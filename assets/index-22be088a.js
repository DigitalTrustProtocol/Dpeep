var Foe=Object.defineProperty;var joe=(e,r,t)=>r in e?Foe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var le=(e,r,t)=>(joe(e,typeof r!="symbol"?r+"":r,t),t),K2=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var Bn=(e,r,t)=>(K2(e,r,"read from private field"),t?t.call(e):r.get(e)),Gr=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},Eo=(e,r,t,n)=>(K2(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var Qn=(e,r,t)=>(K2(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var im,at,aH,Af,pD,lH,vT,uH,ap={},cH=[],Hoe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,e_=Array.isArray;function ql(e,r){for(var t in r)e[t]=r[t];return e}function fH(e){var r=e.parentNode;r&&r.removeChild(e)}function Ye(e,r,t){var n,i,s,o={};for(s in r)s=="key"?n=r[s]:s=="ref"?i=r[s]:o[s]=r[s];if(arguments.length>2&&(o.children=arguments.length>3?im.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return qg(e,o,n,i,null)}function qg(e,r,t,n,i){var s={type:e,props:r,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++aH};return i==null&&at.vnode!=null&&at.vnode(s),s}function t_(){return{current:null}}function rt(e){return e.children}function jn(e,r){this.props=e,this.context=r}function gw(e,r){if(r==null)return e.__?gw(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?gw(e):null}function hH(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return hH(e)}}function gT(e){(!e.__d&&(e.__d=!0)&&Af.push(e)&&!yw.__r++||pD!==at.debounceRendering)&&((pD=at.debounceRendering)||lH)(yw)}function yw(){var e,r,t,n,i,s,o,a,l;for(Af.sort(vT);e=Af.shift();)e.__d&&(r=Af.length,n=void 0,i=void 0,s=void 0,a=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],i=[],(s=ql({},o)).__v=o.__v+1,VC(l,o,s,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??gw(o),o.__h,i),gH(n,o,i),o.__e!=a&&hH(o)),Af.length>r&&Af.sort(vT));yw.__r=0}function dH(e,r,t,n,i,s,o,a,l,u,h){var c,p,m,w,b,T,_,A,x,I,O=0,C=n&&n.__k||cH,g=C.length,R=g,M=r.length;for(t.__k=[],c=0;c<M;c++)(w=t.__k[c]=(w=r[c])==null||typeof w=="boolean"||typeof w=="function"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?qg(null,w,null,null,w):e_(w)?qg(rt,{children:w},null,null,null):w.__b>0?qg(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null&&(w.__=t,w.__b=t.__b+1,(A=zoe(w,C,_=c+O,R))===-1?m=ap:(m=C[A]||ap,C[A]=void 0,R--),VC(e,w,m,i,s,o,a,l,u,h),b=w.__e,(p=w.ref)&&m.ref!=p&&(m.ref&&GC(m.ref,null,w),h.push(p,w.__c||b,w)),b!=null&&(T==null&&(T=b),I=!(x=m===ap||m.__v===null)&&A===_,x?A==-1&&O--:A!==_&&(A===_+1?(O++,I=!0):A>_?R>M-_?(O+=A-_,I=!0):O--:O=A<_&&A==_-1?A-_:0),_=c+O,I=I||A==c&&!x,typeof w.type!="function"||A===_&&m.__k!==w.__k?typeof w.type=="function"||I?w.__d!==void 0?(l=w.__d,w.__d=void 0):l=b.nextSibling:l=vH(e,b,l):l=pH(w,l,e),typeof t.type=="function"&&(t.__d=l)));for(t.__e=T,c=g;c--;)C[c]!=null&&(typeof t.type=="function"&&C[c].__e!=null&&C[c].__e==t.__d&&(t.__d=C[c].__e.nextSibling),yH(C[c],C[c]))}function pH(e,r,t){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,r=typeof n.type=="function"?pH(n,r,t):vH(t,n.__e,r));return r}function ya(e,r){return r=r||[],e==null||typeof e=="boolean"||(e_(e)?e.some(function(t){ya(t,r)}):r.push(e)),r}function vH(e,r,t){return t==null||t.parentNode!==e?e.insertBefore(r,null):r==t&&r.parentNode!=null||e.insertBefore(r,t),r.nextSibling}function zoe(e,r,t,n){var i=e.key,s=e.type,o=t-1,a=t+1,l=r[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<r.length;){if(o>=0){if((l=r[o])&&i==l.key&&s===l.type)return o;o--}if(a<r.length){if((l=r[a])&&i==l.key&&s===l.type)return a;a++}}return-1}function Uoe(e,r,t,n,i){var s;for(s in t)s==="children"||s==="key"||s in r||mw(e,s,null,t[s],n);for(s in r)i&&typeof r[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===r[s]||mw(e,s,r[s],t[s],n)}function vD(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||Hoe.test(r)?t:t+"px"}function mw(e,r,t,n,i){var s;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(r in n)t&&r in t||vD(e.style,r,"");if(t)for(r in t)n&&t[r]===n[r]||vD(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")s=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+s]=t,t?n||e.addEventListener(r,s?yD:gD,s):e.removeEventListener(r,s?yD:gD,s);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function gD(e){return this.l[e.type+!1](at.event?at.event(e):e)}function yD(e){return this.l[e.type+!0](at.event?at.event(e):e)}function VC(e,r,t,n,i,s,o,a,l,u){var h,c,p,m,w,b,T,_,A,x,I,O,C,g,R,M=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=r.__e=t.__e,r.__h=null,s=[a]),(h=at.__b)&&h(r);try{e:if(typeof M=="function"){if(_=r.props,A=(h=M.contextType)&&n[h.__c],x=h?A?A.props.value:h.__:n,t.__c?T=(c=r.__c=t.__c).__=c.__E:("prototype"in M&&M.prototype.render?r.__c=c=new M(_,x):(r.__c=c=new jn(_,x),c.constructor=M,c.render=Koe),A&&A.sub(c),c.props=_,c.state||(c.state={}),c.context=x,c.__n=n,p=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),M.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ql({},c.__s)),ql(c.__s,M.getDerivedStateFromProps(_,c.__s))),m=c.props,w=c.state,c.__v=r,p)M.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(M.getDerivedStateFromProps==null&&_!==m&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(_,x),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(_,c.__s,x)===!1||r.__v===t.__v)){for(r.__v!==t.__v&&(c.props=_,c.state=c.__s,c.__d=!1),r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(U){U&&(U.__=r)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(_,c.__s,x),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(m,w,b)})}if(c.context=x,c.props=_,c.__P=e,c.__e=!1,O=at.__r,C=0,"prototype"in M&&M.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(r),h=c.render(c.props,c.state,c.context),g=0;g<c._sb.length;g++)c.__h.push(c._sb[g]);c._sb=[]}else do c.__d=!1,O&&O(r),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++C<25);c.state=c.__s,c.getChildContext!=null&&(n=ql(ql({},n),c.getChildContext())),p||c.getSnapshotBeforeUpdate==null||(b=c.getSnapshotBeforeUpdate(m,w)),dH(e,e_(R=h!=null&&h.type===rt&&h.key==null?h.props.children:h)?R:[R],r,t,n,i,s,o,a,l,u),c.base=r.__e,r.__h=null,c.__h.length&&o.push(c),T&&(c.__E=c.__=null)}else s==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=Woe(t.__e,r,t,n,i,s,o,l,u);(h=at.diffed)&&h(r)}catch(U){r.__v=null,(l||s!=null)&&(r.__e=a,r.__h=!!l,s[s.indexOf(a)]=null),at.__e(U,r,t)}}function gH(e,r,t){for(var n=0;n<t.length;n++)GC(t[n],t[++n],t[++n]);at.__c&&at.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){at.__e(s,i.__v)}})}function Woe(e,r,t,n,i,s,o,a,l){var u,h,c,p=t.props,m=r.props,w=r.type,b=0;if(w==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!w&&(w?u.localName===w:u.nodeType===3)){e=u,s[b]=null;break}}if(e==null){if(w===null)return document.createTextNode(m);e=i?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,m.is&&m),s=null,a=!1}if(w===null)p===m||a&&e.data===m||(e.data=m);else{if(s=s&&im.call(e.childNodes),h=(p=t.props||ap).dangerouslySetInnerHTML,c=m.dangerouslySetInnerHTML,!a){if(s!=null)for(p={},b=0;b<e.attributes.length;b++)p[e.attributes[b].name]=e.attributes[b].value;(c||h)&&(c&&(h&&c.__html==h.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(Uoe(e,m,p,i,a),c)r.__k=[];else if(dH(e,e_(b=r.props.children)?b:[b],r,t,n,i&&w!=="foreignObject",s,o,s?s[0]:t.__k&&gw(t,0),a,l),s!=null)for(b=s.length;b--;)s[b]!=null&&fH(s[b]);a||("value"in m&&(b=m.value)!==void 0&&(b!==e.value||w==="progress"&&!b||w==="option"&&b!==p.value)&&mw(e,"value",b,p.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==e.checked&&mw(e,"checked",b,p.checked,!1))}return e}function GC(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(n){at.__e(n,t)}}function yH(e,r,t){var n,i;if(at.unmount&&at.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||GC(n,null,r)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){at.__e(s,r)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&yH(n[i],r,t||typeof e.type!="function");t||e.__e==null||fH(e.__e),e.__=e.__e=e.__d=void 0}function Koe(e,r,t){return this.constructor(e,t)}function Sp(e,r,t){var n,i,s,o;at.__&&at.__(e,r),i=(n=typeof t=="function")?null:t&&t.__k||r.__k,s=[],o=[],VC(r,e=(!n&&t||r).__k=Ye(rt,null,[e]),i||ap,ap,r.ownerSVGElement!==void 0,!n&&t?[t]:i?null:r.firstChild?im.call(r.childNodes):null,s,!n&&t?t:i?i.__e:r.firstChild,n,o),gH(s,e,o)}function mH(e,r){Sp(e,r,mH)}function bH(e,r,t){var n,i,s,o,a=ql({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),r)s=="key"?n=r[s]:s=="ref"?i=r[s]:a[s]=r[s]===void 0&&o!==void 0?o[s]:r[s];return arguments.length>2&&(a.children=arguments.length>3?im.call(arguments,2):t),qg(e.type,a,n||e.key,i||e.ref,null)}function YC(e,r){var t={__c:r="__cC"+uH++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[r]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,gT(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}im=cH.slice,at={__e:function(e,r,t,n){for(var i,s,o;r=r.__;)if((i=r.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},aH=0,jn.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ql({},this.state),typeof e=="function"&&(e=e(ql({},t),this.props)),e&&ql(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),gT(this))},jn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),gT(this))},jn.prototype.render=rt,Af=[],lH=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,vT=function(e,r){return e.__v.__b-r.__v.__b},yw.__r=0,uH=0;typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.16.0",at,{Fragment:rt,Component:jn});function mD(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function qoe(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(i,s){if(i){if(typeof i=="string")return mD(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?mD(i,s):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bD={};function Ll(e){return e.type===rt?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var Vg=[],_d=[];function wH(){return Vg.length>0?Vg[Vg.length-1]:null}var wD=!1;function q2(e){return typeof e.type=="function"&&e.type!=rt}function es(e){for(var r=[e],t=e;t.__o!=null;)r.push(t.__o),t=t.__o;return r.reduce(function(n,i){n+="  in "+Ll(i);var s=i.__source;return s?n+=" (at "+s.fileName+":"+s.lineNumber+")":wD||(wD=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var Voe=typeof WeakMap=="function";function $H(e){return e?typeof e.type=="function"?e.__===null?e.__e!==null&&e.__e.parentNode!==null?e.__e.parentNode.localName:"":$H(e.__):e.type:""}var Goe=jn.prototype.setState;jn.prototype.setState=function(e,r){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+es(wH())),Goe.call(this,e,r)};var Yoe=jn.prototype.forceUpdate;function Rl(e){var r=e.props,t=Ll(e),n="";for(var i in r)if(r.hasOwnProperty(i)&&i!=="children"){var s=r[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),n+=" "+i+"="+JSON.stringify(s)}var o=r.children;return"<"+t+n+(o&&o.length?">..</"+t+">":" />")}jn.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+es(wH())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+es(this.__v)),Yoe.call(this,e)},function(){(function(){var b=at.__b,T=at.diffed,_=at.__,A=at.vnode,x=at.__r;at.diffed=function(I){q2(I)&&_d.pop(),Vg.pop(),T&&T(I)},at.__b=function(I){q2(I)&&Vg.push(I),b&&b(I)},at.__=function(I,O){_d=[],_&&_(I,O)},at.vnode=function(I){I.__o=_d.length>0?_d[_d.length-1]:null,A&&A(I)},at.__r=function(I){q2(I)&&_d.push(I),x&&x(I)}})();var e=!1,r=at.__b,t=at.diffed,n=at.vnode,i=at.__r,s=at.__e,o=at.__,a=at.__h,l=at.__c,u=Voe?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,h=[],c=[];at.__e=function(b,T,_,A){if(T&&T.__c&&typeof b.then=="function"){var x=b;b=new Error("Missing Suspense. The throwing component was: "+Ll(T));for(var I=T;I;I=I.__)if(I.__c&&I.__c.__c){b=x;break}if(b instanceof Error)throw b}try{(A=A||{}).componentStack=es(T),s(b,T,_,A),typeof b.then!="function"&&setTimeout(function(){throw b})}catch(O){throw O}},at.__=function(b,T){if(!T)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var _;switch(T.nodeType){case 1:case 11:case 9:_=!0;break;default:_=!1}if(!_){var A=Ll(b);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+T+" instead: render(<"+A+" />, "+T+");")}o&&o(b,T)},at.__b=function(b){var T=b.type;if(typeof T!="string"||T!=="thead"&&T!=="tfoot"&&T!=="tbody"&&T!=="tr"&&T!=="td"&&T!=="th"||c.push(b),e=!0,T===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+Rl(b)+`

`+es(b));if(T!=null&&typeof T=="object")throw T.__k!==void 0&&T.__e!==void 0?new Error("Invalid type passed to createElement(): "+T+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+Ll(b)+" = "+Rl(T)+`;
  let vnode = <My`+Ll(b)+` />;

This usually happens when you export a JSX literal and not the component.

`+es(b)):new Error("Invalid type passed to createElement(): "+(Array.isArray(T)?"array":T));if(b.ref!==void 0&&typeof b.ref!="function"&&typeof b.ref!="object"&&!("$$typeof"in b))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof b.ref+`] instead
`+Rl(b)+`

`+es(b));if(typeof b.type=="string"){for(var _ in b.props)if(_[0]==="o"&&_[1]==="n"&&typeof b.props[_]!="function"&&b.props[_]!=null)throw new Error(`Component's "`+_+'" property should be a function, but got ['+typeof b.props[_]+`] instead
`+Rl(b)+`

`+es(b))}if(typeof b.type=="function"&&b.type.propTypes){if(b.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(b.type)){var A="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var x=b.type();u.lazyPropTypes.set(b.type,!0),console.warn(A+"Component wrapped in lazy() is "+Ll(x))}catch{console.warn(A+"We will log the wrapped component's name once it is loaded.")}}var I=b.props;b.type.__f&&delete(I=function(O,C){for(var g in C)O[g]=C[g];return O}({},I)).ref,function(O,C,g,R,M){Object.keys(O).forEach(function(U){var V;try{V=O[U](C,U,R,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ne){V=ne}V&&!(V.message in bD)&&(bD[V.message]=!0,console.error("Failed prop type: "+V.message+(M&&`
`+M()||"")))})}(b.type.propTypes,I,0,Ll(b),function(){return es(b)})}r&&r(b)},at.__r=function(b){i&&i(b),e=!0},at.__h=function(b,T,_){if(!b||!e)throw new Error("Hook can only be invoked from render methods.");a&&a(b,T,_)};var p=function(b,T){return{get:function(){var _="get"+b+T;h&&h.indexOf(_)<0&&(h.push(_),console.warn("getting vnode."+b+" is deprecated, "+T))},set:function(){var _="set"+b+T;h&&h.indexOf(_)<0&&(h.push(_),console.warn("setting vnode."+b+" is not allowed, "+T))}}},m={nodeName:p("nodeName","use vnode.type"),attributes:p("attributes","use vnode.props"),children:p("children","use vnode.props.children")},w=Object.create({},m);at.vnode=function(b){var T=b.props;if(b.type!==null&&T!=null&&("__source"in T||"__self"in T)){var _=b.props={};for(var A in T){var x=T[A];A==="__source"?b.__source=x:A==="__self"?b.__self=x:_[A]=x}}b.__proto__=w,n&&n(b)},at.diffed=function(b){if(b.__k&&b.__k.forEach(function(V){if(typeof V=="object"&&V&&V.type===void 0){var ne=Object.keys(V).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+ne+`}.

`+es(b))}}),e=!1,t&&t(b),b.__k!=null)for(var T=[],_=0;_<b.__k.length;_++){var A=b.__k[_];if(A&&A.key!=null){var x=A.key;if(T.indexOf(x)!==-1){console.error('Following component has two or more children with the same key attribute: "'+x+`". This may cause glitches and misbehavior in rendering process. Component: 

`+Rl(b)+`

`+es(b));break}T.push(x)}}if(b.__c!=null&&b.__c.__H!=null){var I=b.__c.__H.__;if(I)for(var O=0;O<I.length;O+=1){var C=I[O];if(C.__H){for(var g,R=qoe(C.__H);!(g=R()).done;)if((U=g.value)!=U){var M=Ll(b);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+O+" in component "+M+" was called with NaN.")}}}}var U},at.__c=function(b,T){for(var _=0;_<c.length;_++){var A=c[_],x=A.type,I=$H(A.__);x!=="thead"&&x!=="tfoot"&&x!=="tbody"||I==="table"?x==="tr"&&I!=="thead"&&I!=="tfoot"&&I!=="tbody"&&I!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+Rl(A)+`

`+es(A)):x==="td"&&I!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+Rl(A)+`

`+es(A)):x==="th"&&I!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+Rl(A)+`

`+es(A)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+Rl(A)+`

`+es(A))}c=[],l&&l(b,T)}}();var kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zc(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var _H={exports:{}},Zoe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xoe=Zoe,Joe=Xoe;function xH(){}function EH(){}EH.resetWarningCache=xH;var Qoe=function(){function e(n,i,s,o,a,l){if(l!==Joe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:EH,resetWarningCache:xH};return t.PropTypes=t,t};_H.exports=Qoe();var eae=_H.exports;const tn=ro(eae);var au,Ur,V2,$D,kp=0,SH=[],O1=[],_D=at.__b,xD=at.__r,ED=at.diffed,SD=at.__c,kD=at.unmount;function Ph(e,r){at.__h&&at.__h(Ur,e,kp||r),kp=0;var t=Ur.__H||(Ur.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:O1}),t.__[e]}function Me(e){return kp=1,ZC(AH,e)}function ZC(e,r,t){var n=Ph(au++,2);if(n.t=e,!n.__c&&(n.__=[t?t(r):AH(void 0,r),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=Ur,!Ur.u)){var i=function(a,l,u){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(p){return p.__c});if(h.every(function(p){return!p.__N}))return!s||s.call(this,a,l,u);var c=!1;return h.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(c=!0)}}),!(!c&&n.__c.props===a)&&(!s||s.call(this,a,l,u))};Ur.u=!0;var s=Ur.shouldComponentUpdate,o=Ur.componentWillUpdate;Ur.componentWillUpdate=function(a,l,u){if(this.__e){var h=s;s=void 0,i(a,l,u),s=h}o&&o.call(this,a,l,u)},Ur.shouldComponentUpdate=i}return n.__N||n.__}function St(e,r){var t=Ph(au++,3);!at.__s&&JC(t.__H,r)&&(t.__=e,t.i=r,Ur.__H.__h.push(t))}function nv(e,r){var t=Ph(au++,4);!at.__s&&JC(t.__H,r)&&(t.__=e,t.i=r,Ur.__h.push(t))}function Ps(e){return kp=5,$a(function(){return{current:e}},[])}function kH(e,r,t){kp=6,nv(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function $a(e,r){var t=Ph(au++,7);return JC(t.__H,r)?(t.__V=e(),t.i=r,t.__h=e,t.__V):t.__}function Nh(e,r){return kp=8,$a(function(){return e},r)}function XC(e){var r=Ur.context[e.__c],t=Ph(au++,9);return t.c=e,r?(t.__==null&&(t.__=!0,r.sub(Ur)),r.props.value):e.__}function TH(e,r){at.useDebugValue&&at.useDebugValue(r?r(e):e)}function tae(e){var r=Ph(au++,10),t=Me();return r.__=e,Ur.componentDidCatch||(Ur.componentDidCatch=function(n,i){r.__&&r.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function IH(){var e=Ph(au++,11);if(!e.__){for(var r=Ur.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var t=r.__m||(r.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function rae(){for(var e;e=SH.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(C1),e.__H.__h.forEach(yT),e.__H.__h=[]}catch(r){e.__H.__h=[],at.__e(r,e.__v)}}at.__b=function(e){Ur=null,_D&&_D(e)},at.__r=function(e){xD&&xD(e),au=0;var r=(Ur=e.__c).__H;r&&(V2===Ur?(r.__h=[],Ur.__h=[],r.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=O1,t.__N=t.i=void 0})):(r.__h.forEach(C1),r.__h.forEach(yT),r.__h=[],au=0)),V2=Ur},at.diffed=function(e){ED&&ED(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(SH.push(r)!==1&&$D===at.requestAnimationFrame||(($D=at.requestAnimationFrame)||nae)(rae)),r.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==O1&&(t.__=t.__V),t.i=void 0,t.__V=O1})),V2=Ur=null},at.__c=function(e,r){r.some(function(t){try{t.__h.forEach(C1),t.__h=t.__h.filter(function(n){return!n.__||yT(n)})}catch(n){r.some(function(i){i.__h&&(i.__h=[])}),r=[],at.__e(n,t.__v)}}),SD&&SD(e,r)},at.unmount=function(e){kD&&kD(e);var r,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{C1(n)}catch(i){r=i}}),t.__H=void 0,r&&at.__e(r,t.__v))};var TD=typeof requestAnimationFrame=="function";function nae(e){var r,t=function(){clearTimeout(n),TD&&cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100);TD&&(r=requestAnimationFrame(t))}function C1(e){var r=Ur,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),Ur=r}function yT(e){var r=Ur;e.__c=e.__(),Ur=r}function JC(e,r){return!e||e.length!==r.length||r.some(function(t,n){return t!==e[n]})}function AH(e,r){return typeof r=="function"?r(e):r}function OH(e,r){for(var t in r)e[t]=r[t];return e}function mT(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var n in r)if(n!=="__source"&&e[n]!==r[n])return!0;return!1}function G2(e,r){return e===r&&(e!==0||1/e==1/r)||e!=e&&r!=r}function dy(e){this.props=e}function gi(e,r){function t(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),r?!r(this.props,i)||!o:mT(this.props,i)}function n(i){return this.shouldComponentUpdate=t,Ye(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(dy.prototype=new jn).isPureReactComponent=!0,dy.prototype.shouldComponentUpdate=function(e,r){return mT(this.props,e)||mT(this.state,r)};var ID=at.__b;at.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ID&&ID(e)};var iae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Or(e){function r(t){var n=OH({},t);return delete n.ref,e(n,t.ref||null)}return r.$$typeof=iae,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var AD=function(e,r){return e==null?null:ya(ya(e).map(r))},CH={map:AD,forEach:AD,count:function(e){return e?ya(e).length:0},only:function(e){var r=ya(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:ya},sae=at.__e;at.__e=function(e,r,t,n){if(e.then){for(var i,s=r;s=s.__;)if((i=s.__c)&&i.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),i.__c(e,r)}sae(e,r,t,n)};var OD=at.unmount;function PH(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=OH({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return PH(n,r,t)})),e}function NH(e,r,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return NH(n,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function Gg(){this.__u=0,this.t=null,this.__b=null}function RH(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function DH(e){var r,t,n;function i(s){if(r||(r=e()).then(function(o){t=o.default||o},function(o){n=o}),n)throw n;if(!t)throw r;return Ye(t,s)}return i.displayName="Lazy",i.__f=!0,i}function Wd(){this.u=null,this.o=null}at.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&e.__h===!0&&(e.type=null),OD&&OD(e)},(Gg.prototype=new jn).__c=function(e,r){var t=r.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=RH(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=NH(u,u.__c.__P,u.__c.__O)}var h;for(n.setState({__a:n.__b=null});h=n.t.pop();)h.forceUpdate()}},l=r.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},Gg.prototype.componentWillUnmount=function(){this.t=[]},Gg.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=PH(this.__b,t,n.__O=n.__P)}this.__b=null}var i=r.__a&&Ye(rt,null,e.fallback);return i&&(i.__h=null),[Ye(rt,null,r.__a?null:e.children),i]};var CD=function(e,r,t){if(++t[1]===t[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function oae(e){return this.getChildContext=function(){return e.context},e.children}function aae(e){var r=this,t=e.i;r.componentWillUnmount=function(){Sp(null,r.l),r.l=null,r.i=null},r.i&&r.i!==t&&r.componentWillUnmount(),e.__v?(r.l||(r.i=t,r.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),r.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),r.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),r.i.removeChild(n)}}),Sp(Ye(oae,{context:r.context},e.__v),r.l)):r.l&&r.componentWillUnmount()}function BH(e,r){var t=Ye(aae,{__v:e,i:r});return t.containerInfo=r,t}(Wd.prototype=new jn).__a=function(e){var r=this,t=RH(r.__v),n=r.o.get(e);return n[0]++,function(i){var s=function(){r.props.revealOrder?(n.push(i),CD(r,e,n)):i()};t?t(s):s()}},Wd.prototype.render=function(e){this.u=null,this.o=new Map;var r=ya(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.o.set(r[t],this.u=[1,0,this.u]);return e.children},Wd.prototype.componentDidUpdate=Wd.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,t){CD(e,t,r)})};var MH=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,lae=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,uae=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,cae=/[A-Z0-9]/g,fae=typeof document<"u",hae=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function LH(e,r,t){return r.__k==null&&(r.textContent=""),Sp(e,r),typeof t=="function"&&t(),e?e.__c:null}function FH(e,r,t){return mH(e,r),typeof t=="function"&&t(),e?e.__c:null}jn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(jn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var PD=at.event;function dae(){}function pae(){return this.cancelBubble}function vae(){return this.defaultPrevented}at.event=function(e){return PD&&(e=PD(e)),e.persist=dae,e.isPropagationStopped=pae,e.isDefaultPrevented=vae,e.nativeEvent=e};var QC,gae={enumerable:!1,configurable:!0,get:function(){return this.class}},ND=at.vnode;at.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,n=r.type,i={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||fae&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||hae(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":uae.test(s)?s=a:n.indexOf("-")===-1&&lae.test(s)?s=s.replace(cae,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ya(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=ya(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",gae)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),r.props=i}(e),e.$$typeof=MH,ND&&ND(e)};var RD=at.__r;at.__r=function(e){RD&&RD(e),QC=e.__c};var DD=at.diffed;at.diffed=function(e){DD&&DD(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value),QC=null};var jH={ReactCurrentDispatcher:{current:{readContext:function(e){return QC.__n[e.__c].props.value}}}},yae="17.0.2";function HH(e){return Ye.bind(null,e)}function e3(e){return!!e&&e.$$typeof===MH}function zH(e){return e3(e)?bH.apply(null,arguments):e}function UH(e){return!!e.__k&&(Sp(null,e),!0)}function WH(e){return e&&(e.base||e.nodeType===1&&e)||null}var KH=function(e,r){return e(r)},qH=function(e,r){return e(r)},VH=rt;function t3(e){e()}function GH(e){return e}function YH(){return[!1,t3]}var ZH=nv;function XH(e,r){var t=r(),n=Me({h:{__:t,v:r}}),i=n[0].h,s=n[1];return nv(function(){i.__=t,i.v=r,G2(i.__,r())||s({h:i})},[e,t,r]),St(function(){return G2(i.__,i.v())||s({h:i}),e(function(){G2(i.__,i.v())||s({h:i})})},[e]),t}var ma={useState:Me,useId:IH,useReducer:ZC,useEffect:St,useLayoutEffect:nv,useInsertionEffect:ZH,useTransition:YH,useDeferredValue:GH,useSyncExternalStore:XH,startTransition:t3,useRef:Ps,useImperativeHandle:kH,useMemo:$a,useCallback:Nh,useContext:XC,useDebugValue:TH,version:"17.0.2",Children:CH,render:LH,hydrate:FH,unmountComponentAtNode:UH,createPortal:BH,createElement:Ye,createContext:YC,createFactory:HH,cloneElement:zH,createRef:t_,Fragment:rt,isValidElement:e3,findDOMNode:WH,Component:jn,PureComponent:dy,memo:gi,forwardRef:Or,flushSync:qH,unstable_batchedUpdates:KH,StrictMode:VH,Suspense:Gg,SuspenseList:Wd,lazy:DH,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:jH};const mae=Object.freeze(Object.defineProperty({__proto__:null,Children:CH,Component:jn,Fragment:rt,PureComponent:dy,StrictMode:VH,Suspense:Gg,SuspenseList:Wd,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:jH,cloneElement:zH,createContext:YC,createElement:Ye,createFactory:HH,createPortal:BH,createRef:t_,default:ma,findDOMNode:WH,flushSync:qH,forwardRef:Or,hydrate:FH,isValidElement:e3,lazy:DH,memo:gi,render:LH,startTransition:t3,unmountComponentAtNode:UH,unstable_batchedUpdates:KH,useCallback:Nh,useContext:XC,useDebugValue:TH,useDeferredValue:GH,useEffect:St,useErrorBoundary:tae,useId:IH,useImperativeHandle:kH,useInsertionEffect:ZH,useLayoutEffect:nv,useMemo:$a,useReducer:ZC,useRef:Ps,useState:Me,useSyncExternalStore:XH,useTransition:YH,version:yae},Symbol.toStringTag,{value:"Module"})),bae=zc(mae);function wae(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var JH=bae,$ae=wae(JH);function BD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _ae(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var xae=!!(typeof window<"u"&&window.document&&window.document.createElement);function Eae(e,r,t){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof r!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=e(o.map(function(h){return h.props})),u.canUseDOM?r(a):t&&(a=t(a))}var u=function(h){_ae(c,h);function c(){return h.apply(this,arguments)||this}c.peek=function(){return a},c.rewind=function(){if(c.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var w=a;return a=void 0,o=[],w};var p=c.prototype;return p.UNSAFE_componentWillMount=function(){o.push(this),l()},p.componentDidUpdate=function(){l()},p.componentWillUnmount=function(){var w=o.indexOf(this);o.splice(w,1),l()},p.render=function(){return $ae.createElement(s,this.props)},c}(JH.PureComponent);return BD(u,"displayName","SideEffect("+n(s)+")"),BD(u,"canUseDOM",xae),u}}var Sae=Eae;const kae=ro(Sae);var Tae=typeof Element<"u",Iae=typeof Map=="function",Aae=typeof Set=="function",Oae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function P1(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,n,i;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(!P1(e[n],r[n]))return!1;return!0}var s;if(Iae&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!P1(n.value[1],r.get(n.value[0])))return!1;return!0}if(Aae&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(Oae&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof r.valueOf=="function")return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof r.toString=="function")return e.toString()===r.toString();if(i=Object.keys(e),t=i.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;if(Tae&&e instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!P1(e[i[n]],r[i[n]]))return!1;return!0}return e!==e&&r!==r}var Cae=function(r,t){try{return P1(r,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Pae=ro(Cae);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var MD=Object.getOwnPropertySymbols,Nae=Object.prototype.hasOwnProperty,Rae=Object.prototype.propertyIsEnumerable;function Dae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Bae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Mae=Bae()?Object.assign:function(e,r){for(var t,n=Dae(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)Nae.call(t,o)&&(n[o]=t[o]);if(MD){i=MD(t);for(var a=0;a<i.length;a++)Rae.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};const Lae=ro(Mae);var Xf={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Jt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Jt).map(function(e){return Jt[e]});var rn={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},bw={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},py={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Fae=Object.keys(bw).reduce(function(e,r){return e[bw[r]]=r,e},{}),jae=[Jt.NOSCRIPT,Jt.SCRIPT,Jt.STYLE],da="data-react-helmet",Hae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zae=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},Uae=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),$s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Wae=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},LD=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Kae=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e},bT=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},qae=function(r){var t=lp(r,Jt.TITLE),n=lp(r,py.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=lp(r,py.DEFAULT_TITLE);return t||i||void 0},Vae=function(r){return lp(r,py.ON_CHANGE_CLIENT_STATE)||function(){}},Y2=function(r,t){return t.filter(function(n){return typeof n[r]<"u"}).map(function(n){return n[r]}).reduce(function(n,i){return $s({},n,i)},{})},Gae=function(r,t){return t.filter(function(n){return typeof n[Jt.BASE]<"u"}).map(function(n){return n[Jt.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(r.indexOf(l)!==-1&&i[l])return n.concat(i)}return n},[])},wg=function(r,t,n){var i={};return n.filter(function(s){return Array.isArray(s[r])?!0:(typeof s[r]<"u"&&Jae("Helmet: "+r+' should be of type "Array". Instead found type "'+Hae(s[r])+'"'),!1)}).map(function(s){return s[r]}).reverse().reduce(function(s,o){var a={};o.filter(function(p){for(var m=void 0,w=Object.keys(p),b=0;b<w.length;b++){var T=w[b],_=T.toLowerCase();t.indexOf(_)!==-1&&!(m===rn.REL&&p[m].toLowerCase()==="canonical")&&!(_===rn.REL&&p[_].toLowerCase()==="stylesheet")&&(m=_),t.indexOf(T)!==-1&&(T===rn.INNER_HTML||T===rn.CSS_TEXT||T===rn.ITEM_PROP)&&(m=T)}if(!m||!p[m])return!1;var A=p[m].toLowerCase();return i[m]||(i[m]={}),a[m]||(a[m]={}),i[m][A]?!1:(a[m][A]=!0,!0)}).reverse().forEach(function(p){return s.push(p)});for(var l=Object.keys(a),u=0;u<l.length;u++){var h=l[u],c=Lae({},i[h],a[h]);i[h]=c}return s},[]).reverse()},lp=function(r,t){for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.hasOwnProperty(t))return i[t]}return null},Yae=function(r){return{baseTag:Gae([rn.HREF,rn.TARGET],r),bodyAttributes:Y2(Xf.BODY,r),defer:lp(r,py.DEFER),encode:lp(r,py.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Y2(Xf.HTML,r),linkTags:wg(Jt.LINK,[rn.REL,rn.HREF],r),metaTags:wg(Jt.META,[rn.NAME,rn.CHARSET,rn.HTTPEQUIV,rn.PROPERTY,rn.ITEM_PROP],r),noscriptTags:wg(Jt.NOSCRIPT,[rn.INNER_HTML],r),onChangeClientState:Vae(r),scriptTags:wg(Jt.SCRIPT,[rn.SRC,rn.INNER_HTML],r),styleTags:wg(Jt.STYLE,[rn.CSS_TEXT],r),title:qae(r),titleAttributes:Y2(Xf.TITLE,r)}},wT=function(){var e=Date.now();return function(r){var t=Date.now();t-e>16?(e=t,r(t)):setTimeout(function(){wT(r)},0)}}(),FD=function(r){return clearTimeout(r)},Zae=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||wT:global.requestAnimationFrame||wT,Xae=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||FD:global.cancelAnimationFrame||FD,Jae=function(r){return console&&typeof console.warn=="function"&&console.warn(r)},$g=null,Qae=function(r){$g&&Xae($g),r.defer?$g=Zae(function(){jD(r,function(){$g=null})}):(jD(r),$g=null)},jD=function(r,t){var n=r.baseTag,i=r.bodyAttributes,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.onChangeClientState,h=r.scriptTags,c=r.styleTags,p=r.title,m=r.titleAttributes;$T(Jt.BODY,i),$T(Jt.HTML,s),ele(p,m);var w={baseTag:xd(Jt.BASE,n),linkTags:xd(Jt.LINK,o),metaTags:xd(Jt.META,a),noscriptTags:xd(Jt.NOSCRIPT,l),scriptTags:xd(Jt.SCRIPT,h),styleTags:xd(Jt.STYLE,c)},b={},T={};Object.keys(w).forEach(function(_){var A=w[_],x=A.newTags,I=A.oldTags;x.length&&(b[_]=x),I.length&&(T[_]=w[_].oldTags)}),t&&t(),u(r,b,T)},QH=function(r){return Array.isArray(r)?r.join(""):r},ele=function(r,t){typeof r<"u"&&document.title!==r&&(document.title=QH(r)),$T(Jt.TITLE,t)},$T=function(r,t){var n=document.getElementsByTagName(r)[0];if(n){for(var i=n.getAttribute(da),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],h=t[u]||"";n.getAttribute(u)!==h&&n.setAttribute(u,h),s.indexOf(u)===-1&&s.push(u);var c=o.indexOf(u);c!==-1&&o.splice(c,1)}for(var p=o.length-1;p>=0;p--)n.removeAttribute(o[p]);s.length===o.length?n.removeAttribute(da):n.getAttribute(da)!==a.join(",")&&n.setAttribute(da,a.join(","))}},xd=function(r,t){var n=document.head||document.querySelector(Jt.HEAD),i=n.querySelectorAll(r+"["+da+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(r);for(var h in l)if(l.hasOwnProperty(h))if(h===rn.INNER_HTML)u.innerHTML=l.innerHTML;else if(h===rn.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var c=typeof l[h]>"u"?"":l[h];u.setAttribute(h,c)}u.setAttribute(da,"true"),s.some(function(p,m){return a=m,u.isEqualNode(p)})?s.splice(a,1):o.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:o}},ez=function(r){return Object.keys(r).reduce(function(t,n){var i=typeof r[n]<"u"?n+'="'+r[n]+'"':""+n;return t?t+" "+i:i},"")},tle=function(r,t,n,i){var s=ez(n),o=QH(t);return s?"<"+r+" "+da+'="true" '+s+">"+bT(o,i)+"</"+r+">":"<"+r+" "+da+'="true">'+bT(o,i)+"</"+r+">"},rle=function(r,t,n){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(u){return!(u===rn.INNER_HTML||u===rn.CSS_TEXT)}).reduce(function(u,h){var c=typeof s[h]>"u"?h:h+'="'+bT(s[h],n)+'"';return u?u+" "+c:c},""),a=s.innerHTML||s.cssText||"",l=jae.indexOf(r)===-1;return i+"<"+r+" "+da+'="true" '+o+(l?"/>":">"+a+"</"+r+">")},"")},tz=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[bw[i]||i]=r[i],n},t)},nle=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Fae[i]||i]=r[i],n},t)},ile=function(r,t,n){var i,s=(i={key:t},i[da]=!0,i),o=tz(n,s);return[ma.createElement(Jt.TITLE,o,t)]},sle=function(r,t){return t.map(function(n,i){var s,o=(s={key:i},s[da]=!0,s);return Object.keys(n).forEach(function(a){var l=bw[a]||a;if(l===rn.INNER_HTML||l===rn.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=n[a]}),ma.createElement(r,o)})},Dl=function(r,t,n){switch(r){case Jt.TITLE:return{toComponent:function(){return ile(r,t.title,t.titleAttributes)},toString:function(){return tle(r,t.title,t.titleAttributes,n)}};case Xf.BODY:case Xf.HTML:return{toComponent:function(){return tz(t)},toString:function(){return ez(t)}};default:return{toComponent:function(){return sle(r,t)},toString:function(){return rle(r,t,n)}}}},rz=function(r){var t=r.baseTag,n=r.bodyAttributes,i=r.encode,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.scriptTags,h=r.styleTags,c=r.title,p=c===void 0?"":c,m=r.titleAttributes;return{base:Dl(Jt.BASE,t,i),bodyAttributes:Dl(Xf.BODY,n,i),htmlAttributes:Dl(Xf.HTML,s,i),link:Dl(Jt.LINK,o,i),meta:Dl(Jt.META,a,i),noscript:Dl(Jt.NOSCRIPT,l,i),script:Dl(Jt.SCRIPT,u,i),style:Dl(Jt.STYLE,h,i),title:Dl(Jt.TITLE,{title:p,titleAttributes:m},i)}},ole=function(r){var t,n;return n=t=function(i){Wae(s,i);function s(){return zae(this,s),Kae(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!Pae(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Jt.SCRIPT:case Jt.NOSCRIPT:return{innerHTML:l};case Jt.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,h=a.arrayTypeChildren,c=a.newChildProps,p=a.nestedChildren;return $s({},h,(l={},l[u.type]=[].concat(h[u.type]||[],[$s({},c,this.mapNestedChildrenToProps(u,p))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,u,h=a.child,c=a.newProps,p=a.newChildProps,m=a.nestedChildren;switch(h.type){case Jt.TITLE:return $s({},c,(l={},l[h.type]=m,l.titleAttributes=$s({},p),l));case Jt.BODY:return $s({},c,{bodyAttributes:$s({},p)});case Jt.HTML:return $s({},c,{htmlAttributes:$s({},p)})}return $s({},c,(u={},u[h.type]=$s({},p),u))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=$s({},l);return Object.keys(a).forEach(function(h){var c;u=$s({},u,(c={},c[h]=a[h],c))}),u},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var u=this,h={};return ma.Children.forEach(a,function(c){if(!(!c||!c.props)){var p=c.props,m=p.children,w=LD(p,["children"]),b=nle(w);switch(u.warnOnInvalidChildren(c,m),c.type){case Jt.LINK:case Jt.META:case Jt.NOSCRIPT:case Jt.SCRIPT:case Jt.STYLE:h=u.flattenArrayTypeChildren({child:c,arrayTypeChildren:h,newChildProps:b,nestedChildren:m});break;default:l=u.mapObjectTypeChildren({child:c,newProps:l,newChildProps:b,nestedChildren:m});break}}}),l=this.mapArrayTypeChildrenToProps(h,l),l},s.prototype.render=function(){var a=this.props,l=a.children,u=LD(a,["children"]),h=$s({},u);return l&&(h=this.mapChildrenToProps(l,h)),ma.createElement(r,h)},Uae(s,null,[{key:"canUseDOM",set:function(a){r.canUseDOM=a}}]),s}(ma.Component),t.propTypes={base:tn.object,bodyAttributes:tn.object,children:tn.oneOfType([tn.arrayOf(tn.node),tn.node]),defaultTitle:tn.string,defer:tn.bool,encodeSpecialCharacters:tn.bool,htmlAttributes:tn.object,link:tn.arrayOf(tn.object),meta:tn.arrayOf(tn.object),noscript:tn.arrayOf(tn.object),onChangeClientState:tn.func,script:tn.arrayOf(tn.object),style:tn.arrayOf(tn.object),title:tn.string,titleAttributes:tn.object,titleTemplate:tn.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=r.peek,t.rewind=function(){var i=r.rewind();return i||(i=rz({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},ale=function(){return null},lle=kae(Yae,Qae,rz)(ale),vh=ole(lle);vh.renderStatic=vh.rewind;var ule={};function Ng(e,r){for(var t in r)e[t]=r[t];return e}function cle(e,r,t){var n,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),o={};if(s&&s[1])for(var a=s[1].split("&"),l=0;l<a.length;l++){var u=a[l].split("=");o[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=_T(e.replace(i,"")),r=_T(r||"");for(var h=Math.max(e.length,r.length),c=0;c<h;c++)if(r[c]&&r[c].charAt(0)===":"){var p=r[c].replace(/(^:|[+*?]+$)/g,""),m=(r[c].match(/[+*?]+$/)||ule)[0]||"",w=~m.indexOf("+"),b=~m.indexOf("*"),T=e[c]||"";if(!T&&!b&&(m.indexOf("?")<0||w)){n=!1;break}if(o[p]=decodeURIComponent(T),w||b){o[p]=e.slice(c).map(decodeURIComponent).join("/");break}}else if(r[c]!==e[c]){n=!1;break}return(t.default===!0||n!==!1)&&o}function fle(e,r){return e.rank<r.rank?1:e.rank>r.rank?-1:e.index-r.index}function hle(e,r){return e.index=r,e.rank=function(t){return t.props.default?0:_T(t.props.path).map(dle).join("")}(e),e.props}function _T(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function dle(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var ple={},Jf=[],HD=[],Gs=null,nz={url:r3()},vle=YC(nz);function r3(){var e;return""+((e=Gs&&Gs.location?Gs.location:Gs&&Gs.getCurrentLocation?Gs.getCurrentLocation():typeof location<"u"?location:ple).pathname||"")+(e.search||"")}function Sr(e,r){return r===void 0&&(r=!1),typeof e!="string"&&e.url&&(r=e.replace,e=e.url),function(t){for(var n=Jf.length;n--;)if(Jf[n].canRoute(t))return!0;return!1}(e)&&function(t,n){n===void 0&&(n="push"),Gs&&Gs[n]?Gs[n](t):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,t)}(e,r?"replace":"push"),iz(e)}function iz(e){for(var r=!1,t=0;t<Jf.length;t++)Jf[t].routeTo(e)&&(r=!0);return r}function gle(e){if(e&&e.getAttribute){var r=e.getAttribute("href"),t=e.getAttribute("target");if(r&&r.match(/^\//g)&&(!t||t.match(/^_?self$/i)))return Sr(r)}}function yle(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function sz(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var r=e.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(gle(r))return yle(e)}while(r=r.parentNode)}}var zD=!1;function oz(e){e.history&&(Gs=e.history),this.state={url:e.url||r3()}}Ng(oz.prototype=new jn,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var r=ya(this.props.children);return this.g(r,e)!==void 0},routeTo:function(e){this.setState({url:e});var r=this.canRoute(e);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;zD||(zD=!0,Gs||addEventListener("popstate",function(){iz(r3())}),addEventListener("click",sz)),Jf.push(this),Gs&&(this.u=Gs.listen(function(r){var t=r.location||r;e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),Jf.splice(Jf.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,r){e=e.filter(hle).sort(fle);for(var t=0;t<e.length;t++){var n=e[t],i=cle(r,n.props.path,n.props);if(i)return[n,i]}},render:function(e,r){var t,n,i=e.onChange,s=r.url,o=this.c,a=this.g(ya(e.children),s);if(a&&(n=bH(a[0],Ng(Ng({url:s,matches:t=a[1]},t),{key:void 0,ref:void 0}))),s!==(o&&o.url)){Ng(nz,o=this.c={url:s,previous:o&&o.url,current:n,path:n?n.props.path:null,matches:t}),o.router=this,o.active=n?[n]:[];for(var l=HD.length;l--;)HD[l]({});typeof i=="function"&&i(o)}return Ye(vle.Provider,{value:o},n)}});var Kt=function(e){return Ye("a",Ng({onClick:sz},e))};function mle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ble=Or(mle),az=ble;function wle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const $le=Or(wle),_le=$le;function xle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}const Ele=Or(xle),Sle=Ele;function kle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))}const Tle=Or(kle),Ile=Tle;function Ale({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Ole=Or(Ale),Cle=Ole;function Ple({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Nle=Or(Ple),lz=Nle;function Rle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Dle=Or(Rle),uz=Dle;function Ble({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Mle=Or(Ble),cz=Mle;function Lle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Fle=Or(Lle),jle=Fle;function Hle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const zle=Or(Hle),n3=zle;function Ule({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Wle=Or(Ule),Kle=Wle;function qle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"}))}const Vle=Or(qle),Gle=Vle;function Yle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const Zle=Or(Yle),fz=Zle;function Xle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z",clipRule:"evenodd"}))}const Jle=Or(Xle),Qle=Jle;function eue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const tue=Or(eue),rue=tue;function nue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))}const iue=Or(nue),sue=iue;function oue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const aue=Or(oue),i3=aue;function lue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),Ye("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const uue=Or(lue),hz=uue;function cue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const fue=Or(cue),hue=fue;function due({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z",clipRule:"evenodd"}))}const pue=Or(due),dz=pue;function vue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}))}const gue=Or(vue),pz=gue;function yue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const mue=Or(yue),s3=mue;function bue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const wue=Or(bue),$ue=wue;function _ue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const xue=Or(_ue),vz=xue;function Eue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z",clipRule:"evenodd"}))}const Sue=Or(Eue),kue=Sue;function Tue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const Iue=Or(Tue),gz=Iue;var Aue=0;function v(e,r,t,n,i,s){var o,a,l={};for(a in r)a=="ref"?o=r[a]:l[a]=r[a];var u={type:e,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Aue,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return at.vnode&&at.vnode(u),u}const Os={video:v("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:v("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),magnifyingGlassBold:({width:e})=>v("svg",{fill:"none",width:e,viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),close:v("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:v("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:v("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[v("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),v("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:v("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[v("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),v("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),v("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),newFollower:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:v("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),search:v("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:v("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:v("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),network:v("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:v("g",{children:[v("g",{children:[v("g",{children:v("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),v("g",{children:v("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),v("g",{children:v("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),v("g",{children:v("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),v("g",{children:v("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),v("g",{children:v("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),checkmark:v("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:v("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})})};function Rg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yz={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,r){(function(t){e.exports=t()})(function(){return function t(n,i,s){function o(u,h){if(!i[u]){if(!n[u]){var c=typeof Rg=="function"&&Rg;if(!h&&c)return c(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[u]={exports:{}};n[u][0].call(m.exports,function(w){var b=n[u][1][w];return o(b||w)},m,m.exports,t,n,i,s)}return i[u].exports}for(var a=typeof Rg=="function"&&Rg,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(w),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),a=function(){h.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:a=function(){setTimeout(w,0)};var p,m=[];function w(){p=!0;for(var T,_,A=m.length;A;){for(_=m,m=[],T=-1;++T<A;)_[T]();A=m.length}p=!1}n.exports=b;function b(T){m.push(T)===1&&!p&&a()}}).call(this,typeof kn<"u"?kn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],h=["PENDING"];n.exports=c;function c(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,O!==o&&b(this,O)}c.prototype.catch=function(O){return this.then(null,O)},c.prototype.then=function(O,C){if(typeof O!="function"&&this.state===u||typeof C!="function"&&this.state===l)return this;var g=new this.constructor(o);if(this.state!==h){var R=this.state===u?O:C;m(g,R,this.outcome)}else this.queue.push(new p(g,O,C));return g};function p(O,C,g){this.promise=O,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(O){a.resolve(this.promise,O)},p.prototype.otherCallFulfilled=function(O){m(this.promise,this.onFulfilled,O)},p.prototype.callRejected=function(O){a.reject(this.promise,O)},p.prototype.otherCallRejected=function(O){m(this.promise,this.onRejected,O)};function m(O,C,g){s(function(){var R;try{R=C(g)}catch(M){return a.reject(O,M)}R===O?a.reject(O,new TypeError("Cannot resolve promise with itself")):a.resolve(O,R)})}a.resolve=function(O,C){var g=T(w,C);if(g.status==="error")return a.reject(O,g.value);var R=g.value;if(R)b(O,R);else{O.state=u,O.outcome=C;for(var M=-1,U=O.queue.length;++M<U;)O.queue[M].callFulfilled(C)}return O},a.reject=function(O,C){O.state=l,O.outcome=C;for(var g=-1,R=O.queue.length;++g<R;)O.queue[g].callRejected(C);return O};function w(O){var C=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof C=="function")return function(){C.apply(O,arguments)}}function b(O,C){var g=!1;function R(ne){g||(g=!0,a.reject(O,ne))}function M(ne){g||(g=!0,a.resolve(O,ne))}function U(){C(M,R)}var V=T(U);V.status==="error"&&R(V.value)}function T(O,C){var g={};try{g.value=O(C),g.status="success"}catch(R){g.status="error",g.value=R}return g}c.resolve=_;function _(O){return O instanceof this?O:a.resolve(new this(o),O)}c.reject=A;function A(O){var C=new this(o);return a.reject(C,O)}c.all=x;function x(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,R=!1;if(!g)return this.resolve([]);for(var M=new Array(g),U=0,V=-1,ne=new this(o);++V<g;)re(O[V],V);return ne;function re(Q,F){C.resolve(Q).then(Z,function(se){R||(R=!0,a.reject(ne,se))});function Z(se){M[F]=se,++U===g&&!R&&(R=!0,a.resolve(ne,M))}}}c.race=I;function I(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,R=!1;if(!g)return this.resolve([]);for(var M=-1,U=new this(o);++M<g;)V(O[M]);return U;function V(ne){C.resolve(ne).then(function(re){R||(R=!0,a.resolve(U,re))},function(re){R||(R=!0,a.reject(U,re))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof kn<"u"?kn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,ue){if(!(Y instanceof ue))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ue=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||ue)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function h(Y,ue){Y=Y||[],ue=ue||{};try{return new Blob(Y,ue)}catch(we){if(we.name!=="TypeError")throw we;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$e=new ee,Se=0;Se<Y.length;Se+=1)$e.append(Y[Se]);return $e.getBlob(ue.type)}}typeof Promise>"u"&&t(3);var c=Promise;function p(Y,ue){ue&&Y.then(function(ee){ue(null,ee)},function(ee){ue(ee)})}function m(Y,ue,ee){typeof ue=="function"&&Y.then(ue),typeof ee=="function"&&Y.catch(ee)}function w(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",_=void 0,A={},x=Object.prototype.toString,I="readonly",O="readwrite";function C(Y){for(var ue=Y.length,ee=new ArrayBuffer(ue),$e=new Uint8Array(ee),Se=0;Se<ue;Se++)$e[Se]=Y.charCodeAt(Se);return ee}function g(Y){return new c(function(ue){var ee=Y.transaction(T,O),$e=h([""]);ee.objectStore(T).put($e,"key"),ee.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),ue(!1)},ee.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),we=navigator.userAgent.match(/Edge\//);ue(we||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function R(Y){return typeof _=="boolean"?c.resolve(_):g(Y).then(function(ue){return _=ue,_})}function M(Y){var ue=A[Y.name],ee={};ee.promise=new c(function($e,Se){ee.resolve=$e,ee.reject=Se}),ue.deferredOperations.push(ee),ue.dbReady?ue.dbReady=ue.dbReady.then(function(){return ee.promise}):ue.dbReady=ee.promise}function U(Y){var ue=A[Y.name],ee=ue.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function V(Y,ue){var ee=A[Y.name],$e=ee.deferredOperations.pop();if($e)return $e.reject(ue),$e.promise}function ne(Y,ue){return new c(function(ee,$e){if(A[Y.name]=A[Y.name]||Ge(),Y.db)if(ue)M(Y),Y.db.close();else return ee(Y.db);var Se=[Y.name];ue&&Se.push(Y.version);var we=l.open.apply(l,Se);ue&&(we.onupgradeneeded=function(Le){var Ze=we.result;try{Ze.createObjectStore(Y.storeName),Le.oldVersion<=1&&Ze.createObjectStore(T)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Qe}}),we.onerror=function(Le){Le.preventDefault(),$e(we.error)},we.onsuccess=function(){var Le=we.result;Le.onversionchange=function(Ze){Ze.target.close()},ee(Le),U(Y)}})}function re(Y){return ne(Y,!1)}function Q(Y){return ne(Y,!0)}function F(Y,ue){if(!Y.db)return!0;var ee=!Y.db.objectStoreNames.contains(Y.storeName),$e=Y.version<Y.db.version,Se=Y.version>Y.db.version;if($e&&(Y.version!==ue&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),Se||ee){if(ee){var we=Y.db.version+1;we>Y.version&&(Y.version=we)}return!0}return!1}function Z(Y){return new c(function(ue,ee){var $e=new FileReader;$e.onerror=ee,$e.onloadend=function(Se){var we=btoa(Se.target.result||"");ue({__local_forage_encoded_blob:!0,data:we,type:Y.type})},$e.readAsBinaryString(Y)})}function se(Y){var ue=C(atob(Y.data));return h([ue],{type:Y.type})}function Ee(Y){return Y&&Y.__local_forage_encoded_blob}function ye(Y){var ue=this,ee=ue._initReady().then(function(){var $e=A[ue._dbInfo.name];if($e&&$e.dbReady)return $e.dbReady});return m(ee,Y,Y),ee}function Pe(Y){M(Y);for(var ue=A[Y.name],ee=ue.forages,$e=0;$e<ee.length;$e++){var Se=ee[$e];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return Y.db=null,re(Y).then(function(we){return Y.db=we,F(Y)?Q(Y):we}).then(function(we){Y.db=ue.db=we;for(var Le=0;Le<ee.length;Le++)ee[Le]._dbInfo.db=we}).catch(function(we){throw V(Y,we),we})}function Ue(Y,ue,ee,$e){$e===void 0&&($e=1);try{var Se=Y.db.transaction(Y.storeName,ue);ee(null,Se)}catch(we){if($e>0&&(!Y.db||we.name==="InvalidStateError"||we.name==="NotFoundError"))return c.resolve().then(function(){if(!Y.db||we.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),Q(Y)}).then(function(){return Pe(Y).then(function(){Ue(Y,ue,ee,$e-1)})}).catch(ee);ee(we)}}function Ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function it(Y){var ue=this,ee={db:null};if(Y)for(var $e in Y)ee[$e]=Y[$e];var Se=A[ee.name];Se||(Se=Ge(),A[ee.name]=Se),Se.forages.push(ue),ue._initReady||(ue._initReady=ue.ready,ue.ready=ye);var we=[];function Le(){return c.resolve()}for(var Ze=0;Ze<Se.forages.length;Ze++){var Qe=Se.forages[Ze];Qe!==ue&&we.push(Qe._initReady().catch(Le))}var et=Se.forages.slice(0);return c.all(we).then(function(){return ee.db=Se.db,re(ee)}).then(function(ot){return ee.db=ot,F(ee,ue._defaultConfig.version)?Q(ee):ot}).then(function(ot){ee.db=Se.db=ot,ue._dbInfo=ee;for(var xt=0;xt<et.length;xt++){var Mt=et[xt];Mt!==ue&&(Mt._dbInfo.db=ee.db,Mt._dbInfo.version=ee.version)}})}function _e(Y,ue){var ee=this;Y=w(Y);var $e=new c(function(Se,we){ee.ready().then(function(){Ue(ee._dbInfo,I,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(ee._dbInfo.storeName),et=Qe.get(Y);et.onsuccess=function(){var ot=et.result;ot===void 0&&(ot=null),Ee(ot)&&(ot=se(ot)),Se(ot)},et.onerror=function(){we(et.error)}}catch(ot){we(ot)}})}).catch(we)});return p($e,ue),$e}function pe(Y,ue){var ee=this,$e=new c(function(Se,we){ee.ready().then(function(){Ue(ee._dbInfo,I,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(ee._dbInfo.storeName),et=Qe.openCursor(),ot=1;et.onsuccess=function(){var xt=et.result;if(xt){var Mt=xt.value;Ee(Mt)&&(Mt=se(Mt));var gr=Y(Mt,xt.key,ot++);gr!==void 0?Se(gr):xt.continue()}else Se()},et.onerror=function(){we(et.error)}}catch(xt){we(xt)}})}).catch(we)});return p($e,ue),$e}function Te(Y,ue,ee){var $e=this;Y=w(Y);var Se=new c(function(we,Le){var Ze;$e.ready().then(function(){return Ze=$e._dbInfo,x.call(ue)==="[object Blob]"?R(Ze.db).then(function(Qe){return Qe?ue:Z(ue)}):ue}).then(function(Qe){Ue($e._dbInfo,O,function(et,ot){if(et)return Le(et);try{var xt=ot.objectStore($e._dbInfo.storeName);Qe===null&&(Qe=void 0);var Mt=xt.put(Qe,Y);ot.oncomplete=function(){Qe===void 0&&(Qe=null),we(Qe)},ot.onabort=ot.onerror=function(){var gr=Mt.error?Mt.error:Mt.transaction.error;Le(gr)}}catch(gr){Le(gr)}})}).catch(Le)});return p(Se,ee),Se}function je(Y,ue){var ee=this;Y=w(Y);var $e=new c(function(Se,we){ee.ready().then(function(){Ue(ee._dbInfo,O,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(ee._dbInfo.storeName),et=Qe.delete(Y);Ze.oncomplete=function(){Se()},Ze.onerror=function(){we(et.error)},Ze.onabort=function(){var ot=et.error?et.error:et.transaction.error;we(ot)}}catch(ot){we(ot)}})}).catch(we)});return p($e,ue),$e}function $(Y){var ue=this,ee=new c(function($e,Se){ue.ready().then(function(){Ue(ue._dbInfo,O,function(we,Le){if(we)return Se(we);try{var Ze=Le.objectStore(ue._dbInfo.storeName),Qe=Ze.clear();Le.oncomplete=function(){$e()},Le.onabort=Le.onerror=function(){var et=Qe.error?Qe.error:Qe.transaction.error;Se(et)}}catch(et){Se(et)}})}).catch(Se)});return p(ee,Y),ee}function S(Y){var ue=this,ee=new c(function($e,Se){ue.ready().then(function(){Ue(ue._dbInfo,I,function(we,Le){if(we)return Se(we);try{var Ze=Le.objectStore(ue._dbInfo.storeName),Qe=Ze.count();Qe.onsuccess=function(){$e(Qe.result)},Qe.onerror=function(){Se(Qe.error)}}catch(et){Se(et)}})}).catch(Se)});return p(ee,Y),ee}function N(Y,ue){var ee=this,$e=new c(function(Se,we){if(Y<0){Se(null);return}ee.ready().then(function(){Ue(ee._dbInfo,I,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(ee._dbInfo.storeName),et=!1,ot=Qe.openKeyCursor();ot.onsuccess=function(){var xt=ot.result;if(!xt){Se(null);return}Y===0||et?Se(xt.key):(et=!0,xt.advance(Y))},ot.onerror=function(){we(ot.error)}}catch(xt){we(xt)}})}).catch(we)});return p($e,ue),$e}function L(Y){var ue=this,ee=new c(function($e,Se){ue.ready().then(function(){Ue(ue._dbInfo,I,function(we,Le){if(we)return Se(we);try{var Ze=Le.objectStore(ue._dbInfo.storeName),Qe=Ze.openKeyCursor(),et=[];Qe.onsuccess=function(){var ot=Qe.result;if(!ot){$e(et);return}et.push(ot.key),ot.continue()},Qe.onerror=function(){Se(Qe.error)}}catch(ot){Se(ot)}})}).catch(Se)});return p(ee,Y),ee}function j(Y,ue){ue=b.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var $e=this,Se;if(!Y.name)Se=c.reject("Invalid arguments");else{var we=Y.name===ee.name&&$e._dbInfo.db,Le=we?c.resolve($e._dbInfo.db):re(Y).then(function(Ze){var Qe=A[Y.name],et=Qe.forages;Qe.db=Ze;for(var ot=0;ot<et.length;ot++)et[ot]._dbInfo.db=Ze;return Ze});Y.storeName?Se=Le.then(function(Ze){if(Ze.objectStoreNames.contains(Y.storeName)){var Qe=Ze.version+1;M(Y);var et=A[Y.name],ot=et.forages;Ze.close();for(var xt=0;xt<ot.length;xt++){var Mt=ot[xt];Mt._dbInfo.db=null,Mt._dbInfo.version=Qe}var gr=new c(function(ar,Vr){var Pr=l.open(Y.name,Qe);Pr.onerror=function(ln){var Di=Pr.result;Di.close(),Vr(ln)},Pr.onupgradeneeded=function(){var ln=Pr.result;ln.deleteObjectStore(Y.storeName)},Pr.onsuccess=function(){var ln=Pr.result;ln.close(),ar(ln)}});return gr.then(function(ar){et.db=ar;for(var Vr=0;Vr<ot.length;Vr++){var Pr=ot[Vr];Pr._dbInfo.db=ar,U(Pr._dbInfo)}}).catch(function(ar){throw(V(Y,ar)||c.resolve()).catch(function(){}),ar})}}):Se=Le.then(function(Ze){M(Y);var Qe=A[Y.name],et=Qe.forages;Ze.close();for(var ot=0;ot<et.length;ot++){var xt=et[ot];xt._dbInfo.db=null}var Mt=new c(function(gr,ar){var Vr=l.deleteDatabase(Y.name);Vr.onerror=function(){var Pr=Vr.result;Pr&&Pr.close(),ar(Vr.error)},Vr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Vr.onsuccess=function(){var Pr=Vr.result;Pr&&Pr.close(),gr(Pr)}});return Mt.then(function(gr){Qe.db=gr;for(var ar=0;ar<et.length;ar++){var Vr=et[ar];U(Vr._dbInfo)}}).catch(function(gr){throw(V(Y,gr)||c.resolve()).catch(function(){}),gr})})}return p(Se,ue),Se}var q={_driver:"asyncStorage",_initStorage:it,_support:u(),iterate:pe,getItem:_e,setItem:Te,removeItem:je,clear:$,length:S,key:N,keys:L,dropInstance:j};function ae(){return typeof openDatabase=="function"}var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ze="~~local_forage_type~",He=/^~~local_forage_type~([^~]+)~/,st="__lfsc__:",wt=st.length,mt="arbf",pt="blob",Rt="si08",fr="ui08",qr="uic8",ut="si16",It="si32",dn="ur16",Pi="ui32",qi="fl32",pn="fl64",hs=wt+mt.length,uo=Object.prototype.toString;function Ni(Y){var ue=Y.length*.75,ee=Y.length,$e,Se=0,we,Le,Ze,Qe;Y[Y.length-1]==="="&&(ue--,Y[Y.length-2]==="="&&ue--);var et=new ArrayBuffer(ue),ot=new Uint8Array(et);for($e=0;$e<ee;$e+=4)we=ve.indexOf(Y[$e]),Le=ve.indexOf(Y[$e+1]),Ze=ve.indexOf(Y[$e+2]),Qe=ve.indexOf(Y[$e+3]),ot[Se++]=we<<2|Le>>4,ot[Se++]=(Le&15)<<4|Ze>>2,ot[Se++]=(Ze&3)<<6|Qe&63;return et}function Vi(Y){var ue=new Uint8Array(Y),ee="",$e;for($e=0;$e<ue.length;$e+=3)ee+=ve[ue[$e]>>2],ee+=ve[(ue[$e]&3)<<4|ue[$e+1]>>4],ee+=ve[(ue[$e+1]&15)<<2|ue[$e+2]>>6],ee+=ve[ue[$e+2]&63];return ue.length%3===2?ee=ee.substring(0,ee.length-1)+"=":ue.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function co(Y,ue){var ee="";if(Y&&(ee=uo.call(Y)),Y&&(ee==="[object ArrayBuffer]"||Y.buffer&&uo.call(Y.buffer)==="[object ArrayBuffer]")){var $e,Se=st;Y instanceof ArrayBuffer?($e=Y,Se+=mt):($e=Y.buffer,ee==="[object Int8Array]"?Se+=Rt:ee==="[object Uint8Array]"?Se+=fr:ee==="[object Uint8ClampedArray]"?Se+=qr:ee==="[object Int16Array]"?Se+=ut:ee==="[object Uint16Array]"?Se+=dn:ee==="[object Int32Array]"?Se+=It:ee==="[object Uint32Array]"?Se+=Pi:ee==="[object Float32Array]"?Se+=qi:ee==="[object Float64Array]"?Se+=pn:ue(new Error("Failed to get type for BinaryArray"))),ue(Se+Vi($e))}else if(ee==="[object Blob]"){var we=new FileReader;we.onload=function(){var Le=ze+Y.type+"~"+Vi(this.result);ue(st+pt+Le)},we.readAsArrayBuffer(Y)}else try{ue(JSON.stringify(Y))}catch(Le){console.error("Couldn't convert value into a JSON string: ",Y),ue(null,Le)}}function ef(Y){if(Y.substring(0,wt)!==st)return JSON.parse(Y);var ue=Y.substring(hs),ee=Y.substring(wt,hs),$e;if(ee===pt&&He.test(ue)){var Se=ue.match(He);$e=Se[1],ue=ue.substring(Se[0].length)}var we=Ni(ue);switch(ee){case mt:return we;case pt:return h([we],{type:$e});case Rt:return new Int8Array(we);case fr:return new Uint8Array(we);case qr:return new Uint8ClampedArray(we);case ut:return new Int16Array(we);case dn:return new Uint16Array(we);case It:return new Int32Array(we);case Pi:return new Uint32Array(we);case qi:return new Float32Array(we);case pn:return new Float64Array(we);default:throw new Error("Unkown type: "+ee)}}var fo={serialize:co,deserialize:ef,stringToBuffer:Ni,bufferToString:Vi};function tf(Y,ue,ee,$e){Y.executeSql("CREATE TABLE IF NOT EXISTS "+ue.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,$e)}function Yh(Y){var ue=this,ee={db:null};if(Y)for(var $e in Y)ee[$e]=typeof Y[$e]!="string"?Y[$e].toString():Y[$e];var Se=new c(function(we,Le){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(Ze){return Le(Ze)}ee.db.transaction(function(Ze){tf(Ze,ee,function(){ue._dbInfo=ee,we()},function(Qe,et){Le(et)})},Le)});return ee.serializer=fo,Se}function ho(Y,ue,ee,$e,Se,we){Y.executeSql(ee,$e,Se,function(Le,Ze){Ze.code===Ze.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ue.storeName],function(Qe,et){et.rows.length?we(Qe,Ze):tf(Qe,ue,function(){Qe.executeSql(ee,$e,Se,we)},we)},we):we(Le,Ze)},we)}function Yo(Y,ue){var ee=this;Y=w(Y);var $e=new c(function(Se,we){ee.ready().then(function(){var Le=ee._dbInfo;Le.db.transaction(function(Ze){ho(Ze,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[Y],function(Qe,et){var ot=et.rows.length?et.rows.item(0).value:null;ot&&(ot=Le.serializer.deserialize(ot)),Se(ot)},function(Qe,et){we(et)})})}).catch(we)});return p($e,ue),$e}function Ca(Y,ue){var ee=this,$e=new c(function(Se,we){ee.ready().then(function(){var Le=ee._dbInfo;Le.db.transaction(function(Ze){ho(Ze,Le,"SELECT * FROM "+Le.storeName,[],function(Qe,et){for(var ot=et.rows,xt=ot.length,Mt=0;Mt<xt;Mt++){var gr=ot.item(Mt),ar=gr.value;if(ar&&(ar=Le.serializer.deserialize(ar)),ar=Y(ar,gr.key,Mt+1),ar!==void 0){Se(ar);return}}Se()},function(Qe,et){we(et)})})}).catch(we)});return p($e,ue),$e}function rf(Y,ue,ee,$e){var Se=this;Y=w(Y);var we=new c(function(Le,Ze){Se.ready().then(function(){ue===void 0&&(ue=null);var Qe=ue,et=Se._dbInfo;et.serializer.serialize(ue,function(ot,xt){xt?Ze(xt):et.db.transaction(function(Mt){ho(Mt,et,"INSERT OR REPLACE INTO "+et.storeName+" (key, value) VALUES (?, ?)",[Y,ot],function(){Le(Qe)},function(gr,ar){Ze(ar)})},function(Mt){if(Mt.code===Mt.QUOTA_ERR){if($e>0){Le(rf.apply(Se,[Y,Qe,ee,$e-1]));return}Ze(Mt)}})})}).catch(Ze)});return p(we,ee),we}function Zh(Y,ue,ee){return rf.apply(this,[Y,ue,ee,1])}function Ri(Y,ue){var ee=this;Y=w(Y);var $e=new c(function(Se,we){ee.ready().then(function(){var Le=ee._dbInfo;Le.db.transaction(function(Ze){ho(Ze,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[Y],function(){Se()},function(Qe,et){we(et)})})}).catch(we)});return p($e,ue),$e}function si(Y){var ue=this,ee=new c(function($e,Se){ue.ready().then(function(){var we=ue._dbInfo;we.db.transaction(function(Le){ho(Le,we,"DELETE FROM "+we.storeName,[],function(){$e()},function(Ze,Qe){Se(Qe)})})}).catch(Se)});return p(ee,Y),ee}function Eu(Y){var ue=this,ee=new c(function($e,Se){ue.ready().then(function(){var we=ue._dbInfo;we.db.transaction(function(Le){ho(Le,we,"SELECT COUNT(key) as c FROM "+we.storeName,[],function(Ze,Qe){var et=Qe.rows.item(0).c;$e(et)},function(Ze,Qe){Se(Qe)})})}).catch(Se)});return p(ee,Y),ee}function Uv(Y,ue){var ee=this,$e=new c(function(Se,we){ee.ready().then(function(){var Le=ee._dbInfo;Le.db.transaction(function(Ze){ho(Ze,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Qe,et){var ot=et.rows.length?et.rows.item(0).key:null;Se(ot)},function(Qe,et){we(et)})})}).catch(we)});return p($e,ue),$e}function Xh(Y){var ue=this,ee=new c(function($e,Se){ue.ready().then(function(){var we=ue._dbInfo;we.db.transaction(function(Le){ho(Le,we,"SELECT key FROM "+we.storeName,[],function(Ze,Qe){for(var et=[],ot=0;ot<Qe.rows.length;ot++)et.push(Qe.rows.item(ot).key);$e(et)},function(Ze,Qe){Se(Qe)})})}).catch(Se)});return p(ee,Y),ee}function Jh(Y){return new c(function(ue,ee){Y.transaction(function($e){$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,we){for(var Le=[],Ze=0;Ze<we.rows.length;Ze++)Le.push(we.rows.item(Ze).name);ue({db:Y,storeNames:Le})},function(Se,we){ee(we)})},function($e){ee($e)})})}function po(Y,ue){ue=b.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var $e=this,Se;return Y.name?Se=new c(function(we){var Le;Y.name===ee.name?Le=$e._dbInfo.db:Le=openDatabase(Y.name,"","",0),Y.storeName?we({db:Le,storeNames:[Y.storeName]}):we(Jh(Le))}).then(function(we){return new c(function(Le,Ze){we.db.transaction(function(Qe){function et(gr){return new c(function(ar,Vr){Qe.executeSql("DROP TABLE IF EXISTS "+gr,[],function(){ar()},function(Pr,ln){Vr(ln)})})}for(var ot=[],xt=0,Mt=we.storeNames.length;xt<Mt;xt++)ot.push(et(we.storeNames[xt]));c.all(ot).then(function(){Le()}).catch(function(gr){Ze(gr)})},function(Qe){Ze(Qe)})})}):Se=c.reject("Invalid arguments"),p(Se,ue),Se}var Pa={_driver:"webSQLStorage",_initStorage:Yh,_support:ae(),iterate:Ca,getItem:Yo,setItem:Zh,removeItem:Ri,clear:si,length:Eu,key:Uv,keys:Xh,dropInstance:po};function bl(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function wl(Y,ue){var ee=Y.name+"/";return Y.storeName!==ue.storeName&&(ee+=Y.storeName+"/"),ee}function Wv(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function Kv(){return!Wv()||localStorage.length>0}function qv(Y){var ue=this,ee={};if(Y)for(var $e in Y)ee[$e]=Y[$e];return ee.keyPrefix=wl(Y,ue._defaultConfig),Kv()?(ue._dbInfo=ee,ee.serializer=fo,c.resolve()):c.reject()}function Qh(Y){var ue=this,ee=ue.ready().then(function(){for(var $e=ue._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var we=localStorage.key(Se);we.indexOf($e)===0&&localStorage.removeItem(we)}});return p(ee,Y),ee}function Vv(Y,ue){var ee=this;Y=w(Y);var $e=ee.ready().then(function(){var Se=ee._dbInfo,we=localStorage.getItem(Se.keyPrefix+Y);return we&&(we=Se.serializer.deserialize(we)),we});return p($e,ue),$e}function Gv(Y,ue){var ee=this,$e=ee.ready().then(function(){for(var Se=ee._dbInfo,we=Se.keyPrefix,Le=we.length,Ze=localStorage.length,Qe=1,et=0;et<Ze;et++){var ot=localStorage.key(et);if(ot.indexOf(we)===0){var xt=localStorage.getItem(ot);if(xt&&(xt=Se.serializer.deserialize(xt)),xt=Y(xt,ot.substring(Le),Qe++),xt!==void 0)return xt}}});return p($e,ue),$e}function ed(Y,ue){var ee=this,$e=ee.ready().then(function(){var Se=ee._dbInfo,we;try{we=localStorage.key(Y)}catch{we=null}return we&&(we=we.substring(Se.keyPrefix.length)),we});return p($e,ue),$e}function td(Y){var ue=this,ee=ue.ready().then(function(){for(var $e=ue._dbInfo,Se=localStorage.length,we=[],Le=0;Le<Se;Le++){var Ze=localStorage.key(Le);Ze.indexOf($e.keyPrefix)===0&&we.push(Ze.substring($e.keyPrefix.length))}return we});return p(ee,Y),ee}function Na(Y){var ue=this,ee=ue.keys().then(function($e){return $e.length});return p(ee,Y),ee}function rd(Y,ue){var ee=this;Y=w(Y);var $e=ee.ready().then(function(){var Se=ee._dbInfo;localStorage.removeItem(Se.keyPrefix+Y)});return p($e,ue),$e}function nf(Y,ue,ee){var $e=this;Y=w(Y);var Se=$e.ready().then(function(){ue===void 0&&(ue=null);var we=ue;return new c(function(Le,Ze){var Qe=$e._dbInfo;Qe.serializer.serialize(ue,function(et,ot){if(ot)Ze(ot);else try{localStorage.setItem(Qe.keyPrefix+Y,et),Le(we)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ze(xt),Ze(xt)}})})});return p(Se,ee),Se}function sf(Y,ue){if(ue=b.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var ee=this.config();Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName}var $e=this,Se;return Y.name?Se=new c(function(we){Y.storeName?we(wl(Y,$e._defaultConfig)):we(Y.name+"/")}).then(function(we){for(var Le=localStorage.length-1;Le>=0;Le--){var Ze=localStorage.key(Le);Ze.indexOf(we)===0&&localStorage.removeItem(Ze)}}):Se=c.reject("Invalid arguments"),p(Se,ue),Se}var Su={_driver:"localStorageWrapper",_initStorage:qv,_support:bl(),iterate:Gv,getItem:Vv,setItem:nf,removeItem:rd,clear:Qh,length:Na,key:ed,keys:td,dropInstance:sf},nd=function(ue,ee){return ue===ee||typeof ue=="number"&&typeof ee=="number"&&isNaN(ue)&&isNaN(ee)},ku=function(ue,ee){for(var $e=ue.length,Se=0;Se<$e;){if(nd(ue[Se],ee))return!0;Se++}return!1},Ra=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ms={},of={},Zo={INDEXEDDB:q,WEBSQL:Pa,LOCALSTORAGE:Su},id=[Zo.INDEXEDDB._driver,Zo.WEBSQL._driver,Zo.LOCALSTORAGE._driver],$l=["dropInstance"],Da=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($l),sd={description:"",driver:id.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Yv(Y,ue){Y[ue]=function(){var ee=arguments;return Y.ready().then(function(){return Y[ue].apply(Y,ee)})}}function Tu(){for(var Y=1;Y<arguments.length;Y++){var ue=arguments[Y];if(ue)for(var ee in ue)ue.hasOwnProperty(ee)&&(Ra(ue[ee])?arguments[0][ee]=ue[ee].slice():arguments[0][ee]=ue[ee])}return arguments[0]}var od=function(){function Y(ue){o(this,Y);for(var ee in Zo)if(Zo.hasOwnProperty(ee)){var $e=Zo[ee],Se=$e._driver;this[ee]=Se,Ms[Se]||this.defineDriver($e)}this._defaultConfig=Tu({},sd),this._config=Tu({},this._defaultConfig,ue),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $e in ee){if($e==="storeName"&&(ee[$e]=ee[$e].replace(/\W/g,"_")),$e==="version"&&typeof ee[$e]!="number")return new Error("Database version must be a number.");this._config[$e]=ee[$e]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},Y.prototype.defineDriver=function(ee,$e,Se){var we=new c(function(Le,Ze){try{var Qe=ee._driver,et=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){Ze(et);return}for(var ot=Da.concat("_initStorage"),xt=0,Mt=ot.length;xt<Mt;xt++){var gr=ot[xt],ar=!ku($l,gr);if((ar||ee[gr])&&typeof ee[gr]!="function"){Ze(et);return}}var Vr=function(){for(var Di=function(Iu){return function(){var ud=new Error("Method "+Iu+" is not implemented by the current driver"),lf=c.reject(ud);return p(lf,arguments[arguments.length-1]),lf}},_l=0,ad=$l.length;_l<ad;_l++){var vo=$l[_l];ee[vo]||(ee[vo]=Di(vo))}};Vr();var Pr=function(Di){Ms[Qe]&&console.info("Redefining LocalForage driver: "+Qe),Ms[Qe]=ee,of[Qe]=Di,Le()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(Pr,Ze):Pr(!!ee._support):Pr(!0)}catch(ln){Ze(ln)}});return m(we,$e,Se),we},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(ee,$e,Se){var we=Ms[ee]?c.resolve(Ms[ee]):c.reject(new Error("Driver not found."));return m(we,$e,Se),we},Y.prototype.getSerializer=function(ee){var $e=c.resolve(fo);return m($e,ee),$e},Y.prototype.ready=function(ee){var $e=this,Se=$e._driverSet.then(function(){return $e._ready===null&&($e._ready=$e._initDriver()),$e._ready});return m(Se,ee,ee),Se},Y.prototype.setDriver=function(ee,$e,Se){var we=this;Ra(ee)||(ee=[ee]);var Le=this._getSupportedDrivers(ee);function Ze(){we._config.driver=we.driver()}function Qe(xt){return we._extend(xt),Ze(),we._ready=we._initStorage(we._config),we._ready}function et(xt){return function(){var Mt=0;function gr(){for(;Mt<xt.length;){var ar=xt[Mt];return Mt++,we._dbInfo=null,we._ready=null,we.getDriver(ar).then(Qe).catch(gr)}Ze();var Vr=new Error("No available storage method found.");return we._driverSet=c.reject(Vr),we._driverSet}return gr()}}var ot=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=ot.then(function(){var xt=Le[0];return we._dbInfo=null,we._ready=null,we.getDriver(xt).then(function(Mt){we._driver=Mt._driver,Ze(),we._wrapLibraryMethodsWithReady(),we._initDriver=et(Le)})}).catch(function(){Ze();var xt=new Error("No available storage method found.");return we._driverSet=c.reject(xt),we._driverSet}),m(this._driverSet,$e,Se),this._driverSet},Y.prototype.supports=function(ee){return!!of[ee]},Y.prototype._extend=function(ee){Tu(this,ee)},Y.prototype._getSupportedDrivers=function(ee){for(var $e=[],Se=0,we=ee.length;Se<we;Se++){var Le=ee[Se];this.supports(Le)&&$e.push(Le)}return $e},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,$e=Da.length;ee<$e;ee++)Yv(this,Da[ee])},Y.prototype.createInstance=function(ee){return new Y(ee)},Y}(),af=new od;n.exports=af},{3:3}]},{},[4])(4)})})(yz);var Oue=yz.exports;const hn=ro(Oue);var ww={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ww.exports;(function(e,r){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",c=1,p=2,m=4,w=1,b=2,T=1,_=2,A=4,x=8,I=16,O=32,C=64,g=128,R=256,M=512,U=30,V="...",ne=800,re=16,Q=1,F=2,Z=3,se=1/0,Ee=9007199254740991,ye=17976931348623157e292,Pe=0/0,Ue=4294967295,Ge=Ue-1,it=Ue>>>1,_e=[["ary",g],["bind",T],["bindKey",_],["curry",x],["curryRight",I],["flip",M],["partial",O],["partialRight",C],["rearg",R]],pe="[object Arguments]",Te="[object Array]",je="[object AsyncFunction]",$="[object Boolean]",S="[object Date]",N="[object DOMException]",L="[object Error]",j="[object Function]",q="[object GeneratorFunction]",ae="[object Map]",ve="[object Number]",ze="[object Null]",He="[object Object]",st="[object Promise]",wt="[object Proxy]",mt="[object RegExp]",pt="[object Set]",Rt="[object String]",fr="[object Symbol]",qr="[object Undefined]",ut="[object WeakMap]",It="[object WeakSet]",dn="[object ArrayBuffer]",Pi="[object DataView]",qi="[object Float32Array]",pn="[object Float64Array]",hs="[object Int8Array]",uo="[object Int16Array]",Ni="[object Int32Array]",Vi="[object Uint8Array]",co="[object Uint8ClampedArray]",ef="[object Uint16Array]",fo="[object Uint32Array]",tf=/\b__p \+= '';/g,Yh=/\b(__p \+=) '' \+/g,ho=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yo=/&(?:amp|lt|gt|quot|#39);/g,Ca=/[&<>"']/g,rf=RegExp(Yo.source),Zh=RegExp(Ca.source),Ri=/<%-([\s\S]+?)%>/g,si=/<%([\s\S]+?)%>/g,Eu=/<%=([\s\S]+?)%>/g,Uv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xh=/^\w*$/,Jh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,po=/[\\^$.*+?()[\]{}|]/g,Pa=RegExp(po.source),bl=/^\s+/,wl=/\s/,Wv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kv=/\{\n\/\* \[wrapped with (.+)\] \*/,qv=/,? & /,Qh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vv=/[()=,{}\[\]\/\s]/,Gv=/\\(\\)?/g,ed=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,td=/\w*$/,Na=/^[-+]0x[0-9a-f]+$/i,rd=/^0b[01]+$/i,nf=/^\[object .+?Constructor\]$/,sf=/^0o[0-7]+$/i,Su=/^(?:0|[1-9]\d*)$/,nd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ku=/($^)/,Ra=/['\n\r\u2028\u2029\\]/g,Ms="\\ud800-\\udfff",of="\\u0300-\\u036f",Zo="\\ufe20-\\ufe2f",id="\\u20d0-\\u20ff",$l=of+Zo+id,Da="\\u2700-\\u27bf",sd="a-z\\xdf-\\xf6\\xf8-\\xff",Yv="\\xac\\xb1\\xd7\\xf7",Tu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",od="\\u2000-\\u206f",af=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",ue="\\ufe0e\\ufe0f",ee=Yv+Tu+od+af,$e="[']",Se="["+Ms+"]",we="["+ee+"]",Le="["+$l+"]",Ze="\\d+",Qe="["+Da+"]",et="["+sd+"]",ot="[^"+Ms+ee+Ze+Da+sd+Y+"]",xt="\\ud83c[\\udffb-\\udfff]",Mt="(?:"+Le+"|"+xt+")",gr="[^"+Ms+"]",ar="(?:\\ud83c[\\udde6-\\uddff]){2}",Vr="[\\ud800-\\udbff][\\udc00-\\udfff]",Pr="["+Y+"]",ln="\\u200d",Di="(?:"+et+"|"+ot+")",_l="(?:"+Pr+"|"+ot+")",ad="(?:"+$e+"(?:d|ll|m|re|s|t|ve))?",vo="(?:"+$e+"(?:D|LL|M|RE|S|T|VE))?",ld=Mt+"?",Iu="["+ue+"]?",ud="(?:"+ln+"(?:"+[gr,ar,Vr].join("|")+")"+Iu+ld+")*",lf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zv=Iu+ld+ud,Fx="(?:"+[Qe,ar,Vr].join("|")+")"+Zv,jx="(?:"+[gr+Le+"?",Le,ar,Vr,Se].join("|")+")",Xv=RegExp($e,"g"),Hx=RegExp(Le,"g"),Jv=RegExp(xt+"(?="+xt+")|"+jx+Zv,"g"),zx=RegExp([Pr+"?"+et+"+"+ad+"(?="+[we,Pr,"$"].join("|")+")",_l+"+"+vo+"(?="+[we,Pr+Di,"$"].join("|")+")",Pr+"?"+Di+"+"+ad,Pr+"+"+vo,Lx,lf,Ze,Fx].join("|"),"g"),Ux=RegExp("["+ln+Ms+$l+ue+"]"),Wx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kx=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qx=-1,Hr={};Hr[qi]=Hr[pn]=Hr[hs]=Hr[uo]=Hr[Ni]=Hr[Vi]=Hr[co]=Hr[ef]=Hr[fo]=!0,Hr[pe]=Hr[Te]=Hr[dn]=Hr[$]=Hr[Pi]=Hr[S]=Hr[L]=Hr[j]=Hr[ae]=Hr[ve]=Hr[He]=Hr[mt]=Hr[pt]=Hr[Rt]=Hr[ut]=!1;var Nr={};Nr[pe]=Nr[Te]=Nr[dn]=Nr[Pi]=Nr[$]=Nr[S]=Nr[qi]=Nr[pn]=Nr[hs]=Nr[uo]=Nr[Ni]=Nr[ae]=Nr[ve]=Nr[He]=Nr[mt]=Nr[pt]=Nr[Rt]=Nr[fr]=Nr[Vi]=Nr[co]=Nr[ef]=Nr[fo]=!0,Nr[L]=Nr[j]=Nr[ut]=!1;var S0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Qv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},T0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},eg=parseFloat,Vx=parseInt,I0=typeof kn=="object"&&kn&&kn.Object===Object&&kn,Gx=typeof self=="object"&&self&&self.Object===Object&&self,un=I0||Gx||Function("return this")(),cd=r&&!r.nodeType&&r,Xo=cd&&!0&&e&&!e.nodeType&&e,A0=Xo&&Xo.exports===cd,tg=A0&&I0.process,ds=function(){try{var J=Xo&&Xo.require&&Xo.require("util").types;return J||tg&&tg.binding&&tg.binding("util")}catch{}}(),y=ds&&ds.isArrayBuffer,k=ds&&ds.isDate,P=ds&&ds.isMap,B=ds&&ds.isRegExp,H=ds&&ds.isSet,z=ds&&ds.isTypedArray;function K(J,he,fe){switch(fe.length){case 0:return J.call(he);case 1:return J.call(he,fe[0]);case 2:return J.call(he,fe[0],fe[1]);case 3:return J.call(he,fe[0],fe[1],fe[2])}return J.apply(he,fe)}function ce(J,he,fe,Be){for(var We=-1,$t=J==null?0:J.length;++We<$t;){var _t=J[We];he(Be,_t,fe(_t),J)}return Be}function ie(J,he){for(var fe=-1,Be=J==null?0:J.length;++fe<Be&&he(J[fe],fe,J)!==!1;);return J}function xe(J,he){for(var fe=J==null?0:J.length;fe--&&he(J[fe],fe,J)!==!1;);return J}function Ce(J,he){for(var fe=-1,Be=J==null?0:J.length;++fe<Be;)if(!he(J[fe],fe,J))return!1;return!0}function De(J,he){for(var fe=-1,Be=J==null?0:J.length,We=0,$t=[];++fe<Be;){var _t=J[fe];he(_t,fe,J)&&($t[We++]=_t)}return $t}function Ae(J,he){var fe=J==null?0:J.length;return!!fe&&Lr(J,he,0)>-1}function Je(J,he,fe){for(var Be=-1,We=J==null?0:J.length;++Be<We;)if(fe(he,J[Be]))return!0;return!1}function bt(J,he){for(var fe=-1,Be=J==null?0:J.length,We=Array(Be);++fe<Be;)We[fe]=he(J[fe],fe,J);return We}function Zt(J,he){for(var fe=-1,Be=he.length,We=J.length;++fe<Be;)J[We+fe]=he[fe];return J}function Yt(J,he,fe,Be){var We=-1,$t=J==null?0:J.length;for(Be&&$t&&(fe=J[++We]);++We<$t;)fe=he(fe,J[We],We,J);return fe}function Yn(J,he,fe,Be){var We=J==null?0:J.length;for(Be&&We&&(fe=J[--We]);We--;)fe=he(fe,J[We],We,J);return fe}function cn(J,he){for(var fe=-1,Be=J==null?0:J.length;++fe<Be;)if(he(J[fe],fe,J))return!0;return!1}var go=xl("length");function yo(J){return J.split("")}function hr(J){return J.match(Qh)||[]}function Ba(J,he,fe){var Be;return fe(J,function(We,$t,_t){if(he(We,$t,_t))return Be=$t,!1}),Be}function dr(J,he,fe,Be){for(var We=J.length,$t=fe+(Be?1:-1);Be?$t--:++$t<We;)if(he(J[$t],$t,J))return $t;return-1}function Lr(J,he,fe){return he===he?Xx(J,he,fe):dr(J,fd,fe)}function uf(J,he,fe,Be){for(var We=fe-1,$t=J.length;++We<$t;)if(Be(J[We],he))return We;return-1}function fd(J){return J!==J}function Ls(J,he){var fe=J==null?0:J.length;return fe?Bi(J,he)/fe:Pe}function xl(J){return function(he){return he==null?t:he[J]}}function ps(J){return function(he){return J==null?t:J[he]}}function Jo(J,he,fe,Be,We){return We(J,function($t,_t,yt){fe=Be?(Be=!1,$t):he(fe,$t,_t,yt)}),fe}function Ma(J,he){var fe=J.length;for(J.sort(he);fe--;)J[fe]=J[fe].value;return J}function Bi(J,he){for(var fe,Be=-1,We=J.length;++Be<We;){var $t=he(J[Be]);$t!==t&&(fe=fe===t?$t:fe+$t)}return fe}function cf(J,he){for(var fe=-1,Be=Array(J);++fe<J;)Be[fe]=he(fe);return Be}function Qo(J,he){return bt(he,function(fe){return[fe,J[fe]]})}function mo(J){return J&&J.slice(0,C0(J)+1).replace(bl,"")}function Gi(J){return function(he){return J(he)}}function rg(J,he){return bt(he,function(fe){return J[fe]})}function ff(J,he){return J.has(he)}function Ar(J,he){for(var fe=-1,Be=J.length;++fe<Be&&Lr(he,J[fe],0)>-1;);return fe}function hf(J,he){for(var fe=J.length;fe--&&Lr(he,J[fe],0)>-1;);return fe}function Fs(J,he){for(var fe=J.length,Be=0;fe--;)J[fe]===he&&++Be;return Be}var Au=ps(S0),Yx=ps(Qv);function Zx(J){return"\\"+T0[J]}function O0(J,he){return J==null?t:J[he]}function vs(J){return Ux.test(J)}function ng(J){return Wx.test(J)}function La(J){for(var he,fe=[];!(he=J.next()).done;)fe.push(he.value);return fe}function hd(J){var he=-1,fe=Array(J.size);return J.forEach(function(Be,We){fe[++he]=[We,Be]}),fe}function df(J,he){return function(fe){return J(he(fe))}}function js(J,he){for(var fe=-1,Be=J.length,We=0,$t=[];++fe<Be;){var _t=J[fe];(_t===he||_t===h)&&(J[fe]=h,$t[We++]=fe)}return $t}function El(J){var he=-1,fe=Array(J.size);return J.forEach(function(Be){fe[++he]=Be}),fe}function ig(J){var he=-1,fe=Array(J.size);return J.forEach(function(Be){fe[++he]=[Be,Be]}),fe}function Xx(J,he,fe){for(var Be=fe-1,We=J.length;++Be<We;)if(J[Be]===he)return Be;return-1}function dd(J,he,fe){for(var Be=fe+1;Be--;)if(J[Be]===he)return Be;return Be}function Fa(J){return vs(J)?P0(J):go(J)}function Yi(J){return vs(J)?te(J):yo(J)}function C0(J){for(var he=J.length;he--&&wl.test(J.charAt(he)););return he}var sg=ps(k0);function P0(J){for(var he=Jv.lastIndex=0;Jv.test(J);)++he;return he}function te(J){return J.match(Jv)||[]}function ge(J){return J.match(zx)||[]}var Ie=function J(he){he=he==null?un:Oe.defaults(un.Object(),he,Oe.pick(un,Kx));var fe=he.Array,Be=he.Date,We=he.Error,$t=he.Function,_t=he.Math,yt=he.Object,Qt=he.RegExp,Dt=he.String,lr=he.TypeError,Zn=fe.prototype,oi=$t.prototype,Xn=yt.prototype,Zi=he["__core-js_shared__"],ea=oi.toString,qt=Xn.hasOwnProperty,Ree=0,SN=function(){var f=/[^.]+$/.exec(Zi&&Zi.keys&&Zi.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),N0=Xn.toString,Dee=ea.call(yt),Bee=un._,Mee=Qt("^"+ea.call(qt).replace(po,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R0=A0?he.Buffer:t,Ou=he.Symbol,D0=he.Uint8Array,kN=R0?R0.allocUnsafe:t,B0=df(yt.getPrototypeOf,yt),TN=yt.create,IN=Xn.propertyIsEnumerable,M0=Zn.splice,AN=Ou?Ou.isConcatSpreadable:t,og=Ou?Ou.iterator:t,pf=Ou?Ou.toStringTag:t,L0=function(){try{var f=bf(yt,"defineProperty");return f({},"",{}),f}catch{}}(),Lee=he.clearTimeout!==un.clearTimeout&&he.clearTimeout,Fee=Be&&Be.now!==un.Date.now&&Be.now,jee=he.setTimeout!==un.setTimeout&&he.setTimeout,F0=_t.ceil,j0=_t.floor,Jx=yt.getOwnPropertySymbols,Hee=R0?R0.isBuffer:t,ON=he.isFinite,zee=Zn.join,Uee=df(yt.keys,yt),Jn=_t.max,Mi=_t.min,Wee=Be.now,Kee=he.parseInt,CN=_t.random,qee=Zn.reverse,Qx=bf(he,"DataView"),ag=bf(he,"Map"),e2=bf(he,"Promise"),pd=bf(he,"Set"),lg=bf(he,"WeakMap"),ug=bf(yt,"create"),H0=lg&&new lg,vd={},Vee=wf(Qx),Gee=wf(ag),Yee=wf(e2),Zee=wf(pd),Xee=wf(lg),z0=Ou?Ou.prototype:t,cg=z0?z0.valueOf:t,PN=z0?z0.toString:t;function G(f){if(vn(f)&&!Xt(f)&&!(f instanceof yr)){if(f instanceof bo)return f;if(qt.call(f,"__wrapped__"))return NR(f)}return new bo(f)}var gd=function(){function f(){}return function(d){if(!fn(d))return{};if(TN)return TN(d);f.prototype=d;var E=new f;return f.prototype=t,E}}();function U0(){}function bo(f,d){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=t}G.templateSettings={escape:Ri,evaluate:si,interpolate:Eu,variable:"",imports:{_:G}},G.prototype=U0.prototype,G.prototype.constructor=G,bo.prototype=gd(U0.prototype),bo.prototype.constructor=bo;function yr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}function Jee(){var f=new yr(this.__wrapped__);return f.__actions__=gs(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=gs(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=gs(this.__views__),f}function Qee(){if(this.__filtered__){var f=new yr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function ete(){var f=this.__wrapped__.value(),d=this.__dir__,E=Xt(f),D=d<0,W=E?f.length:0,X=hre(0,W,this.__views__),oe=X.start,de=X.end,ke=de-oe,qe=D?de:oe-1,Ve=this.__iteratees__,Xe=Ve.length,gt=0,At=Mi(ke,this.__takeCount__);if(!E||!D&&W==ke&&At==ke)return rR(f,this.__actions__);var Ht=[];e:for(;ke--&&gt<At;){qe+=d;for(var rr=-1,zt=f[qe];++rr<Xe;){var vr=Ve[rr],mr=vr.iteratee,Us=vr.type,Qi=mr(zt);if(Us==F)zt=Qi;else if(!Qi){if(Us==Q)continue e;break e}}Ht[gt++]=zt}return Ht}yr.prototype=gd(U0.prototype),yr.prototype.constructor=yr;function vf(f){var d=-1,E=f==null?0:f.length;for(this.clear();++d<E;){var D=f[d];this.set(D[0],D[1])}}function tte(){this.__data__=ug?ug(null):{},this.size=0}function rte(f){var d=this.has(f)&&delete this.__data__[f];return this.size-=d?1:0,d}function nte(f){var d=this.__data__;if(ug){var E=d[f];return E===l?t:E}return qt.call(d,f)?d[f]:t}function ite(f){var d=this.__data__;return ug?d[f]!==t:qt.call(d,f)}function ste(f,d){var E=this.__data__;return this.size+=this.has(f)?0:1,E[f]=ug&&d===t?l:d,this}vf.prototype.clear=tte,vf.prototype.delete=rte,vf.prototype.get=nte,vf.prototype.has=ite,vf.prototype.set=ste;function Sl(f){var d=-1,E=f==null?0:f.length;for(this.clear();++d<E;){var D=f[d];this.set(D[0],D[1])}}function ote(){this.__data__=[],this.size=0}function ate(f){var d=this.__data__,E=W0(d,f);if(E<0)return!1;var D=d.length-1;return E==D?d.pop():M0.call(d,E,1),--this.size,!0}function lte(f){var d=this.__data__,E=W0(d,f);return E<0?t:d[E][1]}function ute(f){return W0(this.__data__,f)>-1}function cte(f,d){var E=this.__data__,D=W0(E,f);return D<0?(++this.size,E.push([f,d])):E[D][1]=d,this}Sl.prototype.clear=ote,Sl.prototype.delete=ate,Sl.prototype.get=lte,Sl.prototype.has=ute,Sl.prototype.set=cte;function kl(f){var d=-1,E=f==null?0:f.length;for(this.clear();++d<E;){var D=f[d];this.set(D[0],D[1])}}function fte(){this.size=0,this.__data__={hash:new vf,map:new(ag||Sl),string:new vf}}function hte(f){var d=rb(this,f).delete(f);return this.size-=d?1:0,d}function dte(f){return rb(this,f).get(f)}function pte(f){return rb(this,f).has(f)}function vte(f,d){var E=rb(this,f),D=E.size;return E.set(f,d),this.size+=E.size==D?0:1,this}kl.prototype.clear=fte,kl.prototype.delete=hte,kl.prototype.get=dte,kl.prototype.has=pte,kl.prototype.set=vte;function gf(f){var d=-1,E=f==null?0:f.length;for(this.__data__=new kl;++d<E;)this.add(f[d])}function gte(f){return this.__data__.set(f,l),this}function yte(f){return this.__data__.has(f)}gf.prototype.add=gf.prototype.push=gte,gf.prototype.has=yte;function ta(f){var d=this.__data__=new Sl(f);this.size=d.size}function mte(){this.__data__=new Sl,this.size=0}function bte(f){var d=this.__data__,E=d.delete(f);return this.size=d.size,E}function wte(f){return this.__data__.get(f)}function $te(f){return this.__data__.has(f)}function _te(f,d){var E=this.__data__;if(E instanceof Sl){var D=E.__data__;if(!ag||D.length<i-1)return D.push([f,d]),this.size=++E.size,this;E=this.__data__=new kl(D)}return E.set(f,d),this.size=E.size,this}ta.prototype.clear=mte,ta.prototype.delete=bte,ta.prototype.get=wte,ta.prototype.has=$te,ta.prototype.set=_te;function NN(f,d){var E=Xt(f),D=!E&&$f(f),W=!E&&!D&&Du(f),X=!E&&!D&&!W&&wd(f),oe=E||D||W||X,de=oe?cf(f.length,Dt):[],ke=de.length;for(var qe in f)(d||qt.call(f,qe))&&!(oe&&(qe=="length"||W&&(qe=="offset"||qe=="parent")||X&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||Ol(qe,ke)))&&de.push(qe);return de}function RN(f){var d=f.length;return d?f[f2(0,d-1)]:t}function xte(f,d){return nb(gs(f),yf(d,0,f.length))}function Ete(f){return nb(gs(f))}function t2(f,d,E){(E!==t&&!ra(f[d],E)||E===t&&!(d in f))&&Tl(f,d,E)}function fg(f,d,E){var D=f[d];(!(qt.call(f,d)&&ra(D,E))||E===t&&!(d in f))&&Tl(f,d,E)}function W0(f,d){for(var E=f.length;E--;)if(ra(f[E][0],d))return E;return-1}function Ste(f,d,E,D){return Cu(f,function(W,X,oe){d(D,W,E(W),oe)}),D}function DN(f,d){return f&&Ha(d,ai(d),f)}function kte(f,d){return f&&Ha(d,ms(d),f)}function Tl(f,d,E){d=="__proto__"&&L0?L0(f,d,{configurable:!0,enumerable:!0,value:E,writable:!0}):f[d]=E}function r2(f,d){for(var E=-1,D=d.length,W=fe(D),X=f==null;++E<D;)W[E]=X?t:B2(f,d[E]);return W}function yf(f,d,E){return f===f&&(E!==t&&(f=f<=E?f:E),d!==t&&(f=f>=d?f:d)),f}function wo(f,d,E,D,W,X){var oe,de=d&c,ke=d&p,qe=d&m;if(E&&(oe=W?E(f,D,W,X):E(f)),oe!==t)return oe;if(!fn(f))return f;var Ve=Xt(f);if(Ve){if(oe=pre(f),!de)return gs(f,oe)}else{var Xe=Li(f),gt=Xe==j||Xe==q;if(Du(f))return sR(f,de);if(Xe==He||Xe==pe||gt&&!W){if(oe=ke||gt?{}:ER(f),!de)return ke?nre(f,kte(oe,f)):rre(f,DN(oe,f))}else{if(!Nr[Xe])return W?f:{};oe=vre(f,Xe,de)}}X||(X=new ta);var At=X.get(f);if(At)return At;X.set(f,oe),QR(f)?f.forEach(function(zt){oe.add(wo(zt,d,E,zt,f,X))}):XR(f)&&f.forEach(function(zt,vr){oe.set(vr,wo(zt,d,E,vr,f,X))});var Ht=qe?ke?_2:$2:ke?ms:ai,rr=Ve?t:Ht(f);return ie(rr||f,function(zt,vr){rr&&(vr=zt,zt=f[vr]),fg(oe,vr,wo(zt,d,E,vr,f,X))}),oe}function Tte(f){var d=ai(f);return function(E){return BN(E,f,d)}}function BN(f,d,E){var D=E.length;if(f==null)return!D;for(f=yt(f);D--;){var W=E[D],X=d[W],oe=f[W];if(oe===t&&!(W in f)||!X(oe))return!1}return!0}function MN(f,d,E){if(typeof f!="function")throw new lr(o);return mg(function(){f.apply(t,E)},d)}function hg(f,d,E,D){var W=-1,X=Ae,oe=!0,de=f.length,ke=[],qe=d.length;if(!de)return ke;E&&(d=bt(d,Gi(E))),D?(X=Je,oe=!1):d.length>=i&&(X=ff,oe=!1,d=new gf(d));e:for(;++W<de;){var Ve=f[W],Xe=E==null?Ve:E(Ve);if(Ve=D||Ve!==0?Ve:0,oe&&Xe===Xe){for(var gt=qe;gt--;)if(d[gt]===Xe)continue e;ke.push(Ve)}else X(d,Xe,D)||ke.push(Ve)}return ke}var Cu=cR(ja),LN=cR(i2,!0);function Ite(f,d){var E=!0;return Cu(f,function(D,W,X){return E=!!d(D,W,X),E}),E}function K0(f,d,E){for(var D=-1,W=f.length;++D<W;){var X=f[D],oe=d(X);if(oe!=null&&(de===t?oe===oe&&!zs(oe):E(oe,de)))var de=oe,ke=X}return ke}function Ate(f,d,E,D){var W=f.length;for(E=er(E),E<0&&(E=-E>W?0:W+E),D=D===t||D>W?W:er(D),D<0&&(D+=W),D=E>D?0:tD(D);E<D;)f[E++]=d;return f}function FN(f,d){var E=[];return Cu(f,function(D,W,X){d(D,W,X)&&E.push(D)}),E}function xi(f,d,E,D,W){var X=-1,oe=f.length;for(E||(E=yre),W||(W=[]);++X<oe;){var de=f[X];d>0&&E(de)?d>1?xi(de,d-1,E,D,W):Zt(W,de):D||(W[W.length]=de)}return W}var n2=fR(),jN=fR(!0);function ja(f,d){return f&&n2(f,d,ai)}function i2(f,d){return f&&jN(f,d,ai)}function q0(f,d){return De(d,function(E){return Cl(f[E])})}function mf(f,d){d=Nu(d,f);for(var E=0,D=d.length;f!=null&&E<D;)f=f[za(d[E++])];return E&&E==D?f:t}function HN(f,d,E){var D=d(f);return Xt(f)?D:Zt(D,E(f))}function Xi(f){return f==null?f===t?qr:ze:pf&&pf in yt(f)?fre(f):Ere(f)}function s2(f,d){return f>d}function Ote(f,d){return f!=null&&qt.call(f,d)}function Cte(f,d){return f!=null&&d in yt(f)}function Pte(f,d,E){return f>=Mi(d,E)&&f<Jn(d,E)}function o2(f,d,E){for(var D=E?Je:Ae,W=f[0].length,X=f.length,oe=X,de=fe(X),ke=1/0,qe=[];oe--;){var Ve=f[oe];oe&&d&&(Ve=bt(Ve,Gi(d))),ke=Mi(Ve.length,ke),de[oe]=!E&&(d||W>=120&&Ve.length>=120)?new gf(oe&&Ve):t}Ve=f[0];var Xe=-1,gt=de[0];e:for(;++Xe<W&&qe.length<ke;){var At=Ve[Xe],Ht=d?d(At):At;if(At=E||At!==0?At:0,!(gt?ff(gt,Ht):D(qe,Ht,E))){for(oe=X;--oe;){var rr=de[oe];if(!(rr?ff(rr,Ht):D(f[oe],Ht,E)))continue e}gt&&gt.push(Ht),qe.push(At)}}return qe}function Nte(f,d,E,D){return ja(f,function(W,X,oe){d(D,E(W),X,oe)}),D}function dg(f,d,E){d=Nu(d,f),f=IR(f,d);var D=f==null?f:f[za(_o(d))];return D==null?t:K(D,f,E)}function zN(f){return vn(f)&&Xi(f)==pe}function Rte(f){return vn(f)&&Xi(f)==dn}function Dte(f){return vn(f)&&Xi(f)==S}function pg(f,d,E,D,W){return f===d?!0:f==null||d==null||!vn(f)&&!vn(d)?f!==f&&d!==d:Bte(f,d,E,D,pg,W)}function Bte(f,d,E,D,W,X){var oe=Xt(f),de=Xt(d),ke=oe?Te:Li(f),qe=de?Te:Li(d);ke=ke==pe?He:ke,qe=qe==pe?He:qe;var Ve=ke==He,Xe=qe==He,gt=ke==qe;if(gt&&Du(f)){if(!Du(d))return!1;oe=!0,Ve=!1}if(gt&&!Ve)return X||(X=new ta),oe||wd(f)?$R(f,d,E,D,W,X):ure(f,d,ke,E,D,W,X);if(!(E&w)){var At=Ve&&qt.call(f,"__wrapped__"),Ht=Xe&&qt.call(d,"__wrapped__");if(At||Ht){var rr=At?f.value():f,zt=Ht?d.value():d;return X||(X=new ta),W(rr,zt,E,D,X)}}return gt?(X||(X=new ta),cre(f,d,E,D,W,X)):!1}function Mte(f){return vn(f)&&Li(f)==ae}function a2(f,d,E,D){var W=E.length,X=W,oe=!D;if(f==null)return!X;for(f=yt(f);W--;){var de=E[W];if(oe&&de[2]?de[1]!==f[de[0]]:!(de[0]in f))return!1}for(;++W<X;){de=E[W];var ke=de[0],qe=f[ke],Ve=de[1];if(oe&&de[2]){if(qe===t&&!(ke in f))return!1}else{var Xe=new ta;if(D)var gt=D(qe,Ve,ke,f,d,Xe);if(!(gt===t?pg(Ve,qe,w|b,D,Xe):gt))return!1}}return!0}function UN(f){if(!fn(f)||bre(f))return!1;var d=Cl(f)?Mee:nf;return d.test(wf(f))}function Lte(f){return vn(f)&&Xi(f)==mt}function Fte(f){return vn(f)&&Li(f)==pt}function jte(f){return vn(f)&&ub(f.length)&&!!Hr[Xi(f)]}function WN(f){return typeof f=="function"?f:f==null?bs:typeof f=="object"?Xt(f)?VN(f[0],f[1]):qN(f):hD(f)}function l2(f){if(!yg(f))return Uee(f);var d=[];for(var E in yt(f))qt.call(f,E)&&E!="constructor"&&d.push(E);return d}function Hte(f){if(!fn(f))return xre(f);var d=yg(f),E=[];for(var D in f)D=="constructor"&&(d||!qt.call(f,D))||E.push(D);return E}function u2(f,d){return f<d}function KN(f,d){var E=-1,D=ys(f)?fe(f.length):[];return Cu(f,function(W,X,oe){D[++E]=d(W,X,oe)}),D}function qN(f){var d=E2(f);return d.length==1&&d[0][2]?kR(d[0][0],d[0][1]):function(E){return E===f||a2(E,f,d)}}function VN(f,d){return k2(f)&&SR(d)?kR(za(f),d):function(E){var D=B2(E,f);return D===t&&D===d?M2(E,f):pg(d,D,w|b)}}function V0(f,d,E,D,W){f!==d&&n2(d,function(X,oe){if(W||(W=new ta),fn(X))zte(f,d,oe,E,V0,D,W);else{var de=D?D(I2(f,oe),X,oe+"",f,d,W):t;de===t&&(de=X),t2(f,oe,de)}},ms)}function zte(f,d,E,D,W,X,oe){var de=I2(f,E),ke=I2(d,E),qe=oe.get(ke);if(qe){t2(f,E,qe);return}var Ve=X?X(de,ke,E+"",f,d,oe):t,Xe=Ve===t;if(Xe){var gt=Xt(ke),At=!gt&&Du(ke),Ht=!gt&&!At&&wd(ke);Ve=ke,gt||At||Ht?Xt(de)?Ve=de:_n(de)?Ve=gs(de):At?(Xe=!1,Ve=sR(ke,!0)):Ht?(Xe=!1,Ve=oR(ke,!0)):Ve=[]:bg(ke)||$f(ke)?(Ve=de,$f(de)?Ve=rD(de):(!fn(de)||Cl(de))&&(Ve=ER(ke))):Xe=!1}Xe&&(oe.set(ke,Ve),W(Ve,ke,D,X,oe),oe.delete(ke)),t2(f,E,Ve)}function GN(f,d){var E=f.length;if(E)return d+=d<0?E:0,Ol(d,E)?f[d]:t}function YN(f,d,E){d.length?d=bt(d,function(X){return Xt(X)?function(oe){return mf(oe,X.length===1?X[0]:X)}:X}):d=[bs];var D=-1;d=bt(d,Gi(Lt()));var W=KN(f,function(X,oe,de){var ke=bt(d,function(qe){return qe(X)});return{criteria:ke,index:++D,value:X}});return Ma(W,function(X,oe){return tre(X,oe,E)})}function Ute(f,d){return ZN(f,d,function(E,D){return M2(f,D)})}function ZN(f,d,E){for(var D=-1,W=d.length,X={};++D<W;){var oe=d[D],de=mf(f,oe);E(de,oe)&&vg(X,Nu(oe,f),de)}return X}function Wte(f){return function(d){return mf(d,f)}}function c2(f,d,E,D){var W=D?uf:Lr,X=-1,oe=d.length,de=f;for(f===d&&(d=gs(d)),E&&(de=bt(f,Gi(E)));++X<oe;)for(var ke=0,qe=d[X],Ve=E?E(qe):qe;(ke=W(de,Ve,ke,D))>-1;)de!==f&&M0.call(de,ke,1),M0.call(f,ke,1);return f}function XN(f,d){for(var E=f?d.length:0,D=E-1;E--;){var W=d[E];if(E==D||W!==X){var X=W;Ol(W)?M0.call(f,W,1):p2(f,W)}}return f}function f2(f,d){return f+j0(CN()*(d-f+1))}function Kte(f,d,E,D){for(var W=-1,X=Jn(F0((d-f)/(E||1)),0),oe=fe(X);X--;)oe[D?X:++W]=f,f+=E;return oe}function h2(f,d){var E="";if(!f||d<1||d>Ee)return E;do d%2&&(E+=f),d=j0(d/2),d&&(f+=f);while(d);return E}function ur(f,d){return A2(TR(f,d,bs),f+"")}function qte(f){return RN($d(f))}function Vte(f,d){var E=$d(f);return nb(E,yf(d,0,E.length))}function vg(f,d,E,D){if(!fn(f))return f;d=Nu(d,f);for(var W=-1,X=d.length,oe=X-1,de=f;de!=null&&++W<X;){var ke=za(d[W]),qe=E;if(ke==="__proto__"||ke==="constructor"||ke==="prototype")return f;if(W!=oe){var Ve=de[ke];qe=D?D(Ve,ke,de):t,qe===t&&(qe=fn(Ve)?Ve:Ol(d[W+1])?[]:{})}fg(de,ke,qe),de=de[ke]}return f}var JN=H0?function(f,d){return H0.set(f,d),f}:bs,Gte=L0?function(f,d){return L0(f,"toString",{configurable:!0,enumerable:!1,value:F2(d),writable:!0})}:bs;function Yte(f){return nb($d(f))}function $o(f,d,E){var D=-1,W=f.length;d<0&&(d=-d>W?0:W+d),E=E>W?W:E,E<0&&(E+=W),W=d>E?0:E-d>>>0,d>>>=0;for(var X=fe(W);++D<W;)X[D]=f[D+d];return X}function Zte(f,d){var E;return Cu(f,function(D,W,X){return E=d(D,W,X),!E}),!!E}function G0(f,d,E){var D=0,W=f==null?D:f.length;if(typeof d=="number"&&d===d&&W<=it){for(;D<W;){var X=D+W>>>1,oe=f[X];oe!==null&&!zs(oe)&&(E?oe<=d:oe<d)?D=X+1:W=X}return W}return d2(f,d,bs,E)}function d2(f,d,E,D){var W=0,X=f==null?0:f.length;if(X===0)return 0;d=E(d);for(var oe=d!==d,de=d===null,ke=zs(d),qe=d===t;W<X;){var Ve=j0((W+X)/2),Xe=E(f[Ve]),gt=Xe!==t,At=Xe===null,Ht=Xe===Xe,rr=zs(Xe);if(oe)var zt=D||Ht;else qe?zt=Ht&&(D||gt):de?zt=Ht&&gt&&(D||!At):ke?zt=Ht&&gt&&!At&&(D||!rr):At||rr?zt=!1:zt=D?Xe<=d:Xe<d;zt?W=Ve+1:X=Ve}return Mi(X,Ge)}function QN(f,d){for(var E=-1,D=f.length,W=0,X=[];++E<D;){var oe=f[E],de=d?d(oe):oe;if(!E||!ra(de,ke)){var ke=de;X[W++]=oe===0?0:oe}}return X}function eR(f){return typeof f=="number"?f:zs(f)?Pe:+f}function Hs(f){if(typeof f=="string")return f;if(Xt(f))return bt(f,Hs)+"";if(zs(f))return PN?PN.call(f):"";var d=f+"";return d=="0"&&1/f==-se?"-0":d}function Pu(f,d,E){var D=-1,W=Ae,X=f.length,oe=!0,de=[],ke=de;if(E)oe=!1,W=Je;else if(X>=i){var qe=d?null:are(f);if(qe)return El(qe);oe=!1,W=ff,ke=new gf}else ke=d?[]:de;e:for(;++D<X;){var Ve=f[D],Xe=d?d(Ve):Ve;if(Ve=E||Ve!==0?Ve:0,oe&&Xe===Xe){for(var gt=ke.length;gt--;)if(ke[gt]===Xe)continue e;d&&ke.push(Xe),de.push(Ve)}else W(ke,Xe,E)||(ke!==de&&ke.push(Xe),de.push(Ve))}return de}function p2(f,d){return d=Nu(d,f),f=IR(f,d),f==null||delete f[za(_o(d))]}function tR(f,d,E,D){return vg(f,d,E(mf(f,d)),D)}function Y0(f,d,E,D){for(var W=f.length,X=D?W:-1;(D?X--:++X<W)&&d(f[X],X,f););return E?$o(f,D?0:X,D?X+1:W):$o(f,D?X+1:0,D?W:X)}function rR(f,d){var E=f;return E instanceof yr&&(E=E.value()),Yt(d,function(D,W){return W.func.apply(W.thisArg,Zt([D],W.args))},E)}function v2(f,d,E){var D=f.length;if(D<2)return D?Pu(f[0]):[];for(var W=-1,X=fe(D);++W<D;)for(var oe=f[W],de=-1;++de<D;)de!=W&&(X[W]=hg(X[W]||oe,f[de],d,E));return Pu(xi(X,1),d,E)}function nR(f,d,E){for(var D=-1,W=f.length,X=d.length,oe={};++D<W;){var de=D<X?d[D]:t;E(oe,f[D],de)}return oe}function g2(f){return _n(f)?f:[]}function y2(f){return typeof f=="function"?f:bs}function Nu(f,d){return Xt(f)?f:k2(f,d)?[f]:PR(Rr(f))}var Xte=ur;function Ru(f,d,E){var D=f.length;return E=E===t?D:E,!d&&E>=D?f:$o(f,d,E)}var iR=Lee||function(f){return un.clearTimeout(f)};function sR(f,d){if(d)return f.slice();var E=f.length,D=kN?kN(E):new f.constructor(E);return f.copy(D),D}function m2(f){var d=new f.constructor(f.byteLength);return new D0(d).set(new D0(f)),d}function Jte(f,d){var E=d?m2(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.byteLength)}function Qte(f){var d=new f.constructor(f.source,td.exec(f));return d.lastIndex=f.lastIndex,d}function ere(f){return cg?yt(cg.call(f)):{}}function oR(f,d){var E=d?m2(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.length)}function aR(f,d){if(f!==d){var E=f!==t,D=f===null,W=f===f,X=zs(f),oe=d!==t,de=d===null,ke=d===d,qe=zs(d);if(!de&&!qe&&!X&&f>d||X&&oe&&ke&&!de&&!qe||D&&oe&&ke||!E&&ke||!W)return 1;if(!D&&!X&&!qe&&f<d||qe&&E&&W&&!D&&!X||de&&E&&W||!oe&&W||!ke)return-1}return 0}function tre(f,d,E){for(var D=-1,W=f.criteria,X=d.criteria,oe=W.length,de=E.length;++D<oe;){var ke=aR(W[D],X[D]);if(ke){if(D>=de)return ke;var qe=E[D];return ke*(qe=="desc"?-1:1)}}return f.index-d.index}function lR(f,d,E,D){for(var W=-1,X=f.length,oe=E.length,de=-1,ke=d.length,qe=Jn(X-oe,0),Ve=fe(ke+qe),Xe=!D;++de<ke;)Ve[de]=d[de];for(;++W<oe;)(Xe||W<X)&&(Ve[E[W]]=f[W]);for(;qe--;)Ve[de++]=f[W++];return Ve}function uR(f,d,E,D){for(var W=-1,X=f.length,oe=-1,de=E.length,ke=-1,qe=d.length,Ve=Jn(X-de,0),Xe=fe(Ve+qe),gt=!D;++W<Ve;)Xe[W]=f[W];for(var At=W;++ke<qe;)Xe[At+ke]=d[ke];for(;++oe<de;)(gt||W<X)&&(Xe[At+E[oe]]=f[W++]);return Xe}function gs(f,d){var E=-1,D=f.length;for(d||(d=fe(D));++E<D;)d[E]=f[E];return d}function Ha(f,d,E,D){var W=!E;E||(E={});for(var X=-1,oe=d.length;++X<oe;){var de=d[X],ke=D?D(E[de],f[de],de,E,f):t;ke===t&&(ke=f[de]),W?Tl(E,de,ke):fg(E,de,ke)}return E}function rre(f,d){return Ha(f,S2(f),d)}function nre(f,d){return Ha(f,_R(f),d)}function Z0(f,d){return function(E,D){var W=Xt(E)?ce:Ste,X=d?d():{};return W(E,f,Lt(D,2),X)}}function yd(f){return ur(function(d,E){var D=-1,W=E.length,X=W>1?E[W-1]:t,oe=W>2?E[2]:t;for(X=f.length>3&&typeof X=="function"?(W--,X):t,oe&&Ji(E[0],E[1],oe)&&(X=W<3?t:X,W=1),d=yt(d);++D<W;){var de=E[D];de&&f(d,de,D,X)}return d})}function cR(f,d){return function(E,D){if(E==null)return E;if(!ys(E))return f(E,D);for(var W=E.length,X=d?W:-1,oe=yt(E);(d?X--:++X<W)&&D(oe[X],X,oe)!==!1;);return E}}function fR(f){return function(d,E,D){for(var W=-1,X=yt(d),oe=D(d),de=oe.length;de--;){var ke=oe[f?de:++W];if(E(X[ke],ke,X)===!1)break}return d}}function ire(f,d,E){var D=d&T,W=gg(f);function X(){var oe=this&&this!==un&&this instanceof X?W:f;return oe.apply(D?E:this,arguments)}return X}function hR(f){return function(d){d=Rr(d);var E=vs(d)?Yi(d):t,D=E?E[0]:d.charAt(0),W=E?Ru(E,1).join(""):d.slice(1);return D[f]()+W}}function md(f){return function(d){return Yt(cD(uD(d).replace(Xv,"")),f,"")}}function gg(f){return function(){var d=arguments;switch(d.length){case 0:return new f;case 1:return new f(d[0]);case 2:return new f(d[0],d[1]);case 3:return new f(d[0],d[1],d[2]);case 4:return new f(d[0],d[1],d[2],d[3]);case 5:return new f(d[0],d[1],d[2],d[3],d[4]);case 6:return new f(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new f(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var E=gd(f.prototype),D=f.apply(E,d);return fn(D)?D:E}}function sre(f,d,E){var D=gg(f);function W(){for(var X=arguments.length,oe=fe(X),de=X,ke=bd(W);de--;)oe[de]=arguments[de];var qe=X<3&&oe[0]!==ke&&oe[X-1]!==ke?[]:js(oe,ke);if(X-=qe.length,X<E)return yR(f,d,X0,W.placeholder,t,oe,qe,t,t,E-X);var Ve=this&&this!==un&&this instanceof W?D:f;return K(Ve,this,oe)}return W}function dR(f){return function(d,E,D){var W=yt(d);if(!ys(d)){var X=Lt(E,3);d=ai(d),E=function(de){return X(W[de],de,W)}}var oe=f(d,E,D);return oe>-1?W[X?d[oe]:oe]:t}}function pR(f){return Al(function(d){var E=d.length,D=E,W=bo.prototype.thru;for(f&&d.reverse();D--;){var X=d[D];if(typeof X!="function")throw new lr(o);if(W&&!oe&&tb(X)=="wrapper")var oe=new bo([],!0)}for(D=oe?D:E;++D<E;){X=d[D];var de=tb(X),ke=de=="wrapper"?x2(X):t;ke&&T2(ke[0])&&ke[1]==(g|x|O|R)&&!ke[4].length&&ke[9]==1?oe=oe[tb(ke[0])].apply(oe,ke[3]):oe=X.length==1&&T2(X)?oe[de]():oe.thru(X)}return function(){var qe=arguments,Ve=qe[0];if(oe&&qe.length==1&&Xt(Ve))return oe.plant(Ve).value();for(var Xe=0,gt=E?d[Xe].apply(this,qe):Ve;++Xe<E;)gt=d[Xe].call(this,gt);return gt}})}function X0(f,d,E,D,W,X,oe,de,ke,qe){var Ve=d&g,Xe=d&T,gt=d&_,At=d&(x|I),Ht=d&M,rr=gt?t:gg(f);function zt(){for(var vr=arguments.length,mr=fe(vr),Us=vr;Us--;)mr[Us]=arguments[Us];if(At)var Qi=bd(zt),Ws=Fs(mr,Qi);if(D&&(mr=lR(mr,D,W,At)),X&&(mr=uR(mr,X,oe,At)),vr-=Ws,At&&vr<qe){var xn=js(mr,Qi);return yR(f,d,X0,zt.placeholder,E,mr,xn,de,ke,qe-vr)}var na=Xe?E:this,Nl=gt?na[f]:f;return vr=mr.length,de?mr=Sre(mr,de):Ht&&vr>1&&mr.reverse(),Ve&&ke<vr&&(mr.length=ke),this&&this!==un&&this instanceof zt&&(Nl=rr||gg(Nl)),Nl.apply(na,mr)}return zt}function vR(f,d){return function(E,D){return Nte(E,f,d(D),{})}}function J0(f,d){return function(E,D){var W;if(E===t&&D===t)return d;if(E!==t&&(W=E),D!==t){if(W===t)return D;typeof E=="string"||typeof D=="string"?(E=Hs(E),D=Hs(D)):(E=eR(E),D=eR(D)),W=f(E,D)}return W}}function b2(f){return Al(function(d){return d=bt(d,Gi(Lt())),ur(function(E){var D=this;return f(d,function(W){return K(W,D,E)})})})}function Q0(f,d){d=d===t?" ":Hs(d);var E=d.length;if(E<2)return E?h2(d,f):d;var D=h2(d,F0(f/Fa(d)));return vs(d)?Ru(Yi(D),0,f).join(""):D.slice(0,f)}function ore(f,d,E,D){var W=d&T,X=gg(f);function oe(){for(var de=-1,ke=arguments.length,qe=-1,Ve=D.length,Xe=fe(Ve+ke),gt=this&&this!==un&&this instanceof oe?X:f;++qe<Ve;)Xe[qe]=D[qe];for(;ke--;)Xe[qe++]=arguments[++de];return K(gt,W?E:this,Xe)}return oe}function gR(f){return function(d,E,D){return D&&typeof D!="number"&&Ji(d,E,D)&&(E=D=t),d=Pl(d),E===t?(E=d,d=0):E=Pl(E),D=D===t?d<E?1:-1:Pl(D),Kte(d,E,D,f)}}function eb(f){return function(d,E){return typeof d=="string"&&typeof E=="string"||(d=xo(d),E=xo(E)),f(d,E)}}function yR(f,d,E,D,W,X,oe,de,ke,qe){var Ve=d&x,Xe=Ve?oe:t,gt=Ve?t:oe,At=Ve?X:t,Ht=Ve?t:X;d|=Ve?O:C,d&=~(Ve?C:O),d&A||(d&=~(T|_));var rr=[f,d,W,At,Xe,Ht,gt,de,ke,qe],zt=E.apply(t,rr);return T2(f)&&AR(zt,rr),zt.placeholder=D,OR(zt,f,d)}function w2(f){var d=_t[f];return function(E,D){if(E=xo(E),D=D==null?0:Mi(er(D),292),D&&ON(E)){var W=(Rr(E)+"e").split("e"),X=d(W[0]+"e"+(+W[1]+D));return W=(Rr(X)+"e").split("e"),+(W[0]+"e"+(+W[1]-D))}return d(E)}}var are=pd&&1/El(new pd([,-0]))[1]==se?function(f){return new pd(f)}:z2;function mR(f){return function(d){var E=Li(d);return E==ae?hd(d):E==pt?ig(d):Qo(d,f(d))}}function Il(f,d,E,D,W,X,oe,de){var ke=d&_;if(!ke&&typeof f!="function")throw new lr(o);var qe=D?D.length:0;if(qe||(d&=~(O|C),D=W=t),oe=oe===t?oe:Jn(er(oe),0),de=de===t?de:er(de),qe-=W?W.length:0,d&C){var Ve=D,Xe=W;D=W=t}var gt=ke?t:x2(f),At=[f,d,E,D,W,Ve,Xe,X,oe,de];if(gt&&_re(At,gt),f=At[0],d=At[1],E=At[2],D=At[3],W=At[4],de=At[9]=At[9]===t?ke?0:f.length:Jn(At[9]-qe,0),!de&&d&(x|I)&&(d&=~(x|I)),!d||d==T)var Ht=ire(f,d,E);else d==x||d==I?Ht=sre(f,d,de):(d==O||d==(T|O))&&!W.length?Ht=ore(f,d,E,D):Ht=X0.apply(t,At);var rr=gt?JN:AR;return OR(rr(Ht,At),f,d)}function bR(f,d,E,D){return f===t||ra(f,Xn[E])&&!qt.call(D,E)?d:f}function wR(f,d,E,D,W,X){return fn(f)&&fn(d)&&(X.set(d,f),V0(f,d,t,wR,X),X.delete(d)),f}function lre(f){return bg(f)?t:f}function $R(f,d,E,D,W,X){var oe=E&w,de=f.length,ke=d.length;if(de!=ke&&!(oe&&ke>de))return!1;var qe=X.get(f),Ve=X.get(d);if(qe&&Ve)return qe==d&&Ve==f;var Xe=-1,gt=!0,At=E&b?new gf:t;for(X.set(f,d),X.set(d,f);++Xe<de;){var Ht=f[Xe],rr=d[Xe];if(D)var zt=oe?D(rr,Ht,Xe,d,f,X):D(Ht,rr,Xe,f,d,X);if(zt!==t){if(zt)continue;gt=!1;break}if(At){if(!cn(d,function(vr,mr){if(!ff(At,mr)&&(Ht===vr||W(Ht,vr,E,D,X)))return At.push(mr)})){gt=!1;break}}else if(!(Ht===rr||W(Ht,rr,E,D,X))){gt=!1;break}}return X.delete(f),X.delete(d),gt}function ure(f,d,E,D,W,X,oe){switch(E){case Pi:if(f.byteLength!=d.byteLength||f.byteOffset!=d.byteOffset)return!1;f=f.buffer,d=d.buffer;case dn:return!(f.byteLength!=d.byteLength||!X(new D0(f),new D0(d)));case $:case S:case ve:return ra(+f,+d);case L:return f.name==d.name&&f.message==d.message;case mt:case Rt:return f==d+"";case ae:var de=hd;case pt:var ke=D&w;if(de||(de=El),f.size!=d.size&&!ke)return!1;var qe=oe.get(f);if(qe)return qe==d;D|=b,oe.set(f,d);var Ve=$R(de(f),de(d),D,W,X,oe);return oe.delete(f),Ve;case fr:if(cg)return cg.call(f)==cg.call(d)}return!1}function cre(f,d,E,D,W,X){var oe=E&w,de=$2(f),ke=de.length,qe=$2(d),Ve=qe.length;if(ke!=Ve&&!oe)return!1;for(var Xe=ke;Xe--;){var gt=de[Xe];if(!(oe?gt in d:qt.call(d,gt)))return!1}var At=X.get(f),Ht=X.get(d);if(At&&Ht)return At==d&&Ht==f;var rr=!0;X.set(f,d),X.set(d,f);for(var zt=oe;++Xe<ke;){gt=de[Xe];var vr=f[gt],mr=d[gt];if(D)var Us=oe?D(mr,vr,gt,d,f,X):D(vr,mr,gt,f,d,X);if(!(Us===t?vr===mr||W(vr,mr,E,D,X):Us)){rr=!1;break}zt||(zt=gt=="constructor")}if(rr&&!zt){var Qi=f.constructor,Ws=d.constructor;Qi!=Ws&&"constructor"in f&&"constructor"in d&&!(typeof Qi=="function"&&Qi instanceof Qi&&typeof Ws=="function"&&Ws instanceof Ws)&&(rr=!1)}return X.delete(f),X.delete(d),rr}function Al(f){return A2(TR(f,t,BR),f+"")}function $2(f){return HN(f,ai,S2)}function _2(f){return HN(f,ms,_R)}var x2=H0?function(f){return H0.get(f)}:z2;function tb(f){for(var d=f.name+"",E=vd[d],D=qt.call(vd,d)?E.length:0;D--;){var W=E[D],X=W.func;if(X==null||X==f)return W.name}return d}function bd(f){var d=qt.call(G,"placeholder")?G:f;return d.placeholder}function Lt(){var f=G.iteratee||j2;return f=f===j2?WN:f,arguments.length?f(arguments[0],arguments[1]):f}function rb(f,d){var E=f.__data__;return mre(d)?E[typeof d=="string"?"string":"hash"]:E.map}function E2(f){for(var d=ai(f),E=d.length;E--;){var D=d[E],W=f[D];d[E]=[D,W,SR(W)]}return d}function bf(f,d){var E=O0(f,d);return UN(E)?E:t}function fre(f){var d=qt.call(f,pf),E=f[pf];try{f[pf]=t;var D=!0}catch{}var W=N0.call(f);return D&&(d?f[pf]=E:delete f[pf]),W}var S2=Jx?function(f){return f==null?[]:(f=yt(f),De(Jx(f),function(d){return IN.call(f,d)}))}:U2,_R=Jx?function(f){for(var d=[];f;)Zt(d,S2(f)),f=B0(f);return d}:U2,Li=Xi;(Qx&&Li(new Qx(new ArrayBuffer(1)))!=Pi||ag&&Li(new ag)!=ae||e2&&Li(e2.resolve())!=st||pd&&Li(new pd)!=pt||lg&&Li(new lg)!=ut)&&(Li=function(f){var d=Xi(f),E=d==He?f.constructor:t,D=E?wf(E):"";if(D)switch(D){case Vee:return Pi;case Gee:return ae;case Yee:return st;case Zee:return pt;case Xee:return ut}return d});function hre(f,d,E){for(var D=-1,W=E.length;++D<W;){var X=E[D],oe=X.size;switch(X.type){case"drop":f+=oe;break;case"dropRight":d-=oe;break;case"take":d=Mi(d,f+oe);break;case"takeRight":f=Jn(f,d-oe);break}}return{start:f,end:d}}function dre(f){var d=f.match(Kv);return d?d[1].split(qv):[]}function xR(f,d,E){d=Nu(d,f);for(var D=-1,W=d.length,X=!1;++D<W;){var oe=za(d[D]);if(!(X=f!=null&&E(f,oe)))break;f=f[oe]}return X||++D!=W?X:(W=f==null?0:f.length,!!W&&ub(W)&&Ol(oe,W)&&(Xt(f)||$f(f)))}function pre(f){var d=f.length,E=new f.constructor(d);return d&&typeof f[0]=="string"&&qt.call(f,"index")&&(E.index=f.index,E.input=f.input),E}function ER(f){return typeof f.constructor=="function"&&!yg(f)?gd(B0(f)):{}}function vre(f,d,E){var D=f.constructor;switch(d){case dn:return m2(f);case $:case S:return new D(+f);case Pi:return Jte(f,E);case qi:case pn:case hs:case uo:case Ni:case Vi:case co:case ef:case fo:return oR(f,E);case ae:return new D;case ve:case Rt:return new D(f);case mt:return Qte(f);case pt:return new D;case fr:return ere(f)}}function gre(f,d){var E=d.length;if(!E)return f;var D=E-1;return d[D]=(E>1?"& ":"")+d[D],d=d.join(E>2?", ":" "),f.replace(Wv,`{
/* [wrapped with `+d+`] */
`)}function yre(f){return Xt(f)||$f(f)||!!(AN&&f&&f[AN])}function Ol(f,d){var E=typeof f;return d=d??Ee,!!d&&(E=="number"||E!="symbol"&&Su.test(f))&&f>-1&&f%1==0&&f<d}function Ji(f,d,E){if(!fn(E))return!1;var D=typeof d;return(D=="number"?ys(E)&&Ol(d,E.length):D=="string"&&d in E)?ra(E[d],f):!1}function k2(f,d){if(Xt(f))return!1;var E=typeof f;return E=="number"||E=="symbol"||E=="boolean"||f==null||zs(f)?!0:Xh.test(f)||!Uv.test(f)||d!=null&&f in yt(d)}function mre(f){var d=typeof f;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?f!=="__proto__":f===null}function T2(f){var d=tb(f),E=G[d];if(typeof E!="function"||!(d in yr.prototype))return!1;if(f===E)return!0;var D=x2(E);return!!D&&f===D[0]}function bre(f){return!!SN&&SN in f}var wre=Zi?Cl:W2;function yg(f){var d=f&&f.constructor,E=typeof d=="function"&&d.prototype||Xn;return f===E}function SR(f){return f===f&&!fn(f)}function kR(f,d){return function(E){return E==null?!1:E[f]===d&&(d!==t||f in yt(E))}}function $re(f){var d=ab(f,function(D){return E.size===u&&E.clear(),D}),E=d.cache;return d}function _re(f,d){var E=f[1],D=d[1],W=E|D,X=W<(T|_|g),oe=D==g&&E==x||D==g&&E==R&&f[7].length<=d[8]||D==(g|R)&&d[7].length<=d[8]&&E==x;if(!(X||oe))return f;D&T&&(f[2]=d[2],W|=E&T?0:A);var de=d[3];if(de){var ke=f[3];f[3]=ke?lR(ke,de,d[4]):de,f[4]=ke?js(f[3],h):d[4]}return de=d[5],de&&(ke=f[5],f[5]=ke?uR(ke,de,d[6]):de,f[6]=ke?js(f[5],h):d[6]),de=d[7],de&&(f[7]=de),D&g&&(f[8]=f[8]==null?d[8]:Mi(f[8],d[8])),f[9]==null&&(f[9]=d[9]),f[0]=d[0],f[1]=W,f}function xre(f){var d=[];if(f!=null)for(var E in yt(f))d.push(E);return d}function Ere(f){return N0.call(f)}function TR(f,d,E){return d=Jn(d===t?f.length-1:d,0),function(){for(var D=arguments,W=-1,X=Jn(D.length-d,0),oe=fe(X);++W<X;)oe[W]=D[d+W];W=-1;for(var de=fe(d+1);++W<d;)de[W]=D[W];return de[d]=E(oe),K(f,this,de)}}function IR(f,d){return d.length<2?f:mf(f,$o(d,0,-1))}function Sre(f,d){for(var E=f.length,D=Mi(d.length,E),W=gs(f);D--;){var X=d[D];f[D]=Ol(X,E)?W[X]:t}return f}function I2(f,d){if(!(d==="constructor"&&typeof f[d]=="function")&&d!="__proto__")return f[d]}var AR=CR(JN),mg=jee||function(f,d){return un.setTimeout(f,d)},A2=CR(Gte);function OR(f,d,E){var D=d+"";return A2(f,gre(D,kre(dre(D),E)))}function CR(f){var d=0,E=0;return function(){var D=Wee(),W=re-(D-E);if(E=D,W>0){if(++d>=ne)return arguments[0]}else d=0;return f.apply(t,arguments)}}function nb(f,d){var E=-1,D=f.length,W=D-1;for(d=d===t?D:d;++E<d;){var X=f2(E,W),oe=f[X];f[X]=f[E],f[E]=oe}return f.length=d,f}var PR=$re(function(f){var d=[];return f.charCodeAt(0)===46&&d.push(""),f.replace(Jh,function(E,D,W,X){d.push(W?X.replace(Gv,"$1"):D||E)}),d});function za(f){if(typeof f=="string"||zs(f))return f;var d=f+"";return d=="0"&&1/f==-se?"-0":d}function wf(f){if(f!=null){try{return ea.call(f)}catch{}try{return f+""}catch{}}return""}function kre(f,d){return ie(_e,function(E){var D="_."+E[0];d&E[1]&&!Ae(f,D)&&f.push(D)}),f.sort()}function NR(f){if(f instanceof yr)return f.clone();var d=new bo(f.__wrapped__,f.__chain__);return d.__actions__=gs(f.__actions__),d.__index__=f.__index__,d.__values__=f.__values__,d}function Tre(f,d,E){(E?Ji(f,d,E):d===t)?d=1:d=Jn(er(d),0);var D=f==null?0:f.length;if(!D||d<1)return[];for(var W=0,X=0,oe=fe(F0(D/d));W<D;)oe[X++]=$o(f,W,W+=d);return oe}function Ire(f){for(var d=-1,E=f==null?0:f.length,D=0,W=[];++d<E;){var X=f[d];X&&(W[D++]=X)}return W}function Are(){var f=arguments.length;if(!f)return[];for(var d=fe(f-1),E=arguments[0],D=f;D--;)d[D-1]=arguments[D];return Zt(Xt(E)?gs(E):[E],xi(d,1))}var Ore=ur(function(f,d){return _n(f)?hg(f,xi(d,1,_n,!0)):[]}),Cre=ur(function(f,d){var E=_o(d);return _n(E)&&(E=t),_n(f)?hg(f,xi(d,1,_n,!0),Lt(E,2)):[]}),Pre=ur(function(f,d){var E=_o(d);return _n(E)&&(E=t),_n(f)?hg(f,xi(d,1,_n,!0),t,E):[]});function Nre(f,d,E){var D=f==null?0:f.length;return D?(d=E||d===t?1:er(d),$o(f,d<0?0:d,D)):[]}function Rre(f,d,E){var D=f==null?0:f.length;return D?(d=E||d===t?1:er(d),d=D-d,$o(f,0,d<0?0:d)):[]}function Dre(f,d){return f&&f.length?Y0(f,Lt(d,3),!0,!0):[]}function Bre(f,d){return f&&f.length?Y0(f,Lt(d,3),!0):[]}function Mre(f,d,E,D){var W=f==null?0:f.length;return W?(E&&typeof E!="number"&&Ji(f,d,E)&&(E=0,D=W),Ate(f,d,E,D)):[]}function RR(f,d,E){var D=f==null?0:f.length;if(!D)return-1;var W=E==null?0:er(E);return W<0&&(W=Jn(D+W,0)),dr(f,Lt(d,3),W)}function DR(f,d,E){var D=f==null?0:f.length;if(!D)return-1;var W=D-1;return E!==t&&(W=er(E),W=E<0?Jn(D+W,0):Mi(W,D-1)),dr(f,Lt(d,3),W,!0)}function BR(f){var d=f==null?0:f.length;return d?xi(f,1):[]}function Lre(f){var d=f==null?0:f.length;return d?xi(f,se):[]}function Fre(f,d){var E=f==null?0:f.length;return E?(d=d===t?1:er(d),xi(f,d)):[]}function jre(f){for(var d=-1,E=f==null?0:f.length,D={};++d<E;){var W=f[d];D[W[0]]=W[1]}return D}function MR(f){return f&&f.length?f[0]:t}function Hre(f,d,E){var D=f==null?0:f.length;if(!D)return-1;var W=E==null?0:er(E);return W<0&&(W=Jn(D+W,0)),Lr(f,d,W)}function zre(f){var d=f==null?0:f.length;return d?$o(f,0,-1):[]}var Ure=ur(function(f){var d=bt(f,g2);return d.length&&d[0]===f[0]?o2(d):[]}),Wre=ur(function(f){var d=_o(f),E=bt(f,g2);return d===_o(E)?d=t:E.pop(),E.length&&E[0]===f[0]?o2(E,Lt(d,2)):[]}),Kre=ur(function(f){var d=_o(f),E=bt(f,g2);return d=typeof d=="function"?d:t,d&&E.pop(),E.length&&E[0]===f[0]?o2(E,t,d):[]});function qre(f,d){return f==null?"":zee.call(f,d)}function _o(f){var d=f==null?0:f.length;return d?f[d-1]:t}function Vre(f,d,E){var D=f==null?0:f.length;if(!D)return-1;var W=D;return E!==t&&(W=er(E),W=W<0?Jn(D+W,0):Mi(W,D-1)),d===d?dd(f,d,W):dr(f,fd,W,!0)}function Gre(f,d){return f&&f.length?GN(f,er(d)):t}var Yre=ur(LR);function LR(f,d){return f&&f.length&&d&&d.length?c2(f,d):f}function Zre(f,d,E){return f&&f.length&&d&&d.length?c2(f,d,Lt(E,2)):f}function Xre(f,d,E){return f&&f.length&&d&&d.length?c2(f,d,t,E):f}var Jre=Al(function(f,d){var E=f==null?0:f.length,D=r2(f,d);return XN(f,bt(d,function(W){return Ol(W,E)?+W:W}).sort(aR)),D});function Qre(f,d){var E=[];if(!(f&&f.length))return E;var D=-1,W=[],X=f.length;for(d=Lt(d,3);++D<X;){var oe=f[D];d(oe,D,f)&&(E.push(oe),W.push(D))}return XN(f,W),E}function O2(f){return f==null?f:qee.call(f)}function ene(f,d,E){var D=f==null?0:f.length;return D?(E&&typeof E!="number"&&Ji(f,d,E)?(d=0,E=D):(d=d==null?0:er(d),E=E===t?D:er(E)),$o(f,d,E)):[]}function tne(f,d){return G0(f,d)}function rne(f,d,E){return d2(f,d,Lt(E,2))}function nne(f,d){var E=f==null?0:f.length;if(E){var D=G0(f,d);if(D<E&&ra(f[D],d))return D}return-1}function ine(f,d){return G0(f,d,!0)}function sne(f,d,E){return d2(f,d,Lt(E,2),!0)}function one(f,d){var E=f==null?0:f.length;if(E){var D=G0(f,d,!0)-1;if(ra(f[D],d))return D}return-1}function ane(f){return f&&f.length?QN(f):[]}function lne(f,d){return f&&f.length?QN(f,Lt(d,2)):[]}function une(f){var d=f==null?0:f.length;return d?$o(f,1,d):[]}function cne(f,d,E){return f&&f.length?(d=E||d===t?1:er(d),$o(f,0,d<0?0:d)):[]}function fne(f,d,E){var D=f==null?0:f.length;return D?(d=E||d===t?1:er(d),d=D-d,$o(f,d<0?0:d,D)):[]}function hne(f,d){return f&&f.length?Y0(f,Lt(d,3),!1,!0):[]}function dne(f,d){return f&&f.length?Y0(f,Lt(d,3)):[]}var pne=ur(function(f){return Pu(xi(f,1,_n,!0))}),vne=ur(function(f){var d=_o(f);return _n(d)&&(d=t),Pu(xi(f,1,_n,!0),Lt(d,2))}),gne=ur(function(f){var d=_o(f);return d=typeof d=="function"?d:t,Pu(xi(f,1,_n,!0),t,d)});function yne(f){return f&&f.length?Pu(f):[]}function mne(f,d){return f&&f.length?Pu(f,Lt(d,2)):[]}function bne(f,d){return d=typeof d=="function"?d:t,f&&f.length?Pu(f,t,d):[]}function C2(f){if(!(f&&f.length))return[];var d=0;return f=De(f,function(E){if(_n(E))return d=Jn(E.length,d),!0}),cf(d,function(E){return bt(f,xl(E))})}function FR(f,d){if(!(f&&f.length))return[];var E=C2(f);return d==null?E:bt(E,function(D){return K(d,t,D)})}var wne=ur(function(f,d){return _n(f)?hg(f,d):[]}),$ne=ur(function(f){return v2(De(f,_n))}),_ne=ur(function(f){var d=_o(f);return _n(d)&&(d=t),v2(De(f,_n),Lt(d,2))}),xne=ur(function(f){var d=_o(f);return d=typeof d=="function"?d:t,v2(De(f,_n),t,d)}),Ene=ur(C2);function Sne(f,d){return nR(f||[],d||[],fg)}function kne(f,d){return nR(f||[],d||[],vg)}var Tne=ur(function(f){var d=f.length,E=d>1?f[d-1]:t;return E=typeof E=="function"?(f.pop(),E):t,FR(f,E)});function jR(f){var d=G(f);return d.__chain__=!0,d}function Ine(f,d){return d(f),f}function ib(f,d){return d(f)}var Ane=Al(function(f){var d=f.length,E=d?f[0]:0,D=this.__wrapped__,W=function(X){return r2(X,f)};return d>1||this.__actions__.length||!(D instanceof yr)||!Ol(E)?this.thru(W):(D=D.slice(E,+E+(d?1:0)),D.__actions__.push({func:ib,args:[W],thisArg:t}),new bo(D,this.__chain__).thru(function(X){return d&&!X.length&&X.push(t),X}))});function One(){return jR(this)}function Cne(){return new bo(this.value(),this.__chain__)}function Pne(){this.__values__===t&&(this.__values__=eD(this.value()));var f=this.__index__>=this.__values__.length,d=f?t:this.__values__[this.__index__++];return{done:f,value:d}}function Nne(){return this}function Rne(f){for(var d,E=this;E instanceof U0;){var D=NR(E);D.__index__=0,D.__values__=t,d?W.__wrapped__=D:d=D;var W=D;E=E.__wrapped__}return W.__wrapped__=f,d}function Dne(){var f=this.__wrapped__;if(f instanceof yr){var d=f;return this.__actions__.length&&(d=new yr(this)),d=d.reverse(),d.__actions__.push({func:ib,args:[O2],thisArg:t}),new bo(d,this.__chain__)}return this.thru(O2)}function Bne(){return rR(this.__wrapped__,this.__actions__)}var Mne=Z0(function(f,d,E){qt.call(f,E)?++f[E]:Tl(f,E,1)});function Lne(f,d,E){var D=Xt(f)?Ce:Ite;return E&&Ji(f,d,E)&&(d=t),D(f,Lt(d,3))}function Fne(f,d){var E=Xt(f)?De:FN;return E(f,Lt(d,3))}var jne=dR(RR),Hne=dR(DR);function zne(f,d){return xi(sb(f,d),1)}function Une(f,d){return xi(sb(f,d),se)}function Wne(f,d,E){return E=E===t?1:er(E),xi(sb(f,d),E)}function HR(f,d){var E=Xt(f)?ie:Cu;return E(f,Lt(d,3))}function zR(f,d){var E=Xt(f)?xe:LN;return E(f,Lt(d,3))}var Kne=Z0(function(f,d,E){qt.call(f,E)?f[E].push(d):Tl(f,E,[d])});function qne(f,d,E,D){f=ys(f)?f:$d(f),E=E&&!D?er(E):0;var W=f.length;return E<0&&(E=Jn(W+E,0)),cb(f)?E<=W&&f.indexOf(d,E)>-1:!!W&&Lr(f,d,E)>-1}var Vne=ur(function(f,d,E){var D=-1,W=typeof d=="function",X=ys(f)?fe(f.length):[];return Cu(f,function(oe){X[++D]=W?K(d,oe,E):dg(oe,d,E)}),X}),Gne=Z0(function(f,d,E){Tl(f,E,d)});function sb(f,d){var E=Xt(f)?bt:KN;return E(f,Lt(d,3))}function Yne(f,d,E,D){return f==null?[]:(Xt(d)||(d=d==null?[]:[d]),E=D?t:E,Xt(E)||(E=E==null?[]:[E]),YN(f,d,E))}var Zne=Z0(function(f,d,E){f[E?0:1].push(d)},function(){return[[],[]]});function Xne(f,d,E){var D=Xt(f)?Yt:Jo,W=arguments.length<3;return D(f,Lt(d,4),E,W,Cu)}function Jne(f,d,E){var D=Xt(f)?Yn:Jo,W=arguments.length<3;return D(f,Lt(d,4),E,W,LN)}function Qne(f,d){var E=Xt(f)?De:FN;return E(f,lb(Lt(d,3)))}function eie(f){var d=Xt(f)?RN:qte;return d(f)}function tie(f,d,E){(E?Ji(f,d,E):d===t)?d=1:d=er(d);var D=Xt(f)?xte:Vte;return D(f,d)}function rie(f){var d=Xt(f)?Ete:Yte;return d(f)}function nie(f){if(f==null)return 0;if(ys(f))return cb(f)?Fa(f):f.length;var d=Li(f);return d==ae||d==pt?f.size:l2(f).length}function iie(f,d,E){var D=Xt(f)?cn:Zte;return E&&Ji(f,d,E)&&(d=t),D(f,Lt(d,3))}var sie=ur(function(f,d){if(f==null)return[];var E=d.length;return E>1&&Ji(f,d[0],d[1])?d=[]:E>2&&Ji(d[0],d[1],d[2])&&(d=[d[0]]),YN(f,xi(d,1),[])}),ob=Fee||function(){return un.Date.now()};function oie(f,d){if(typeof d!="function")throw new lr(o);return f=er(f),function(){if(--f<1)return d.apply(this,arguments)}}function UR(f,d,E){return d=E?t:d,d=f&&d==null?f.length:d,Il(f,g,t,t,t,t,d)}function WR(f,d){var E;if(typeof d!="function")throw new lr(o);return f=er(f),function(){return--f>0&&(E=d.apply(this,arguments)),f<=1&&(d=t),E}}var P2=ur(function(f,d,E){var D=T;if(E.length){var W=js(E,bd(P2));D|=O}return Il(f,D,d,E,W)}),KR=ur(function(f,d,E){var D=T|_;if(E.length){var W=js(E,bd(KR));D|=O}return Il(d,D,f,E,W)});function qR(f,d,E){d=E?t:d;var D=Il(f,x,t,t,t,t,t,d);return D.placeholder=qR.placeholder,D}function VR(f,d,E){d=E?t:d;var D=Il(f,I,t,t,t,t,t,d);return D.placeholder=VR.placeholder,D}function GR(f,d,E){var D,W,X,oe,de,ke,qe=0,Ve=!1,Xe=!1,gt=!0;if(typeof f!="function")throw new lr(o);d=xo(d)||0,fn(E)&&(Ve=!!E.leading,Xe="maxWait"in E,X=Xe?Jn(xo(E.maxWait)||0,d):X,gt="trailing"in E?!!E.trailing:gt);function At(xn){var na=D,Nl=W;return D=W=t,qe=xn,oe=f.apply(Nl,na),oe}function Ht(xn){return qe=xn,de=mg(vr,d),Ve?At(xn):oe}function rr(xn){var na=xn-ke,Nl=xn-qe,dD=d-na;return Xe?Mi(dD,X-Nl):dD}function zt(xn){var na=xn-ke,Nl=xn-qe;return ke===t||na>=d||na<0||Xe&&Nl>=X}function vr(){var xn=ob();if(zt(xn))return mr(xn);de=mg(vr,rr(xn))}function mr(xn){return de=t,gt&&D?At(xn):(D=W=t,oe)}function Us(){de!==t&&iR(de),qe=0,D=ke=W=de=t}function Qi(){return de===t?oe:mr(ob())}function Ws(){var xn=ob(),na=zt(xn);if(D=arguments,W=this,ke=xn,na){if(de===t)return Ht(ke);if(Xe)return iR(de),de=mg(vr,d),At(ke)}return de===t&&(de=mg(vr,d)),oe}return Ws.cancel=Us,Ws.flush=Qi,Ws}var aie=ur(function(f,d){return MN(f,1,d)}),lie=ur(function(f,d,E){return MN(f,xo(d)||0,E)});function uie(f){return Il(f,M)}function ab(f,d){if(typeof f!="function"||d!=null&&typeof d!="function")throw new lr(o);var E=function(){var D=arguments,W=d?d.apply(this,D):D[0],X=E.cache;if(X.has(W))return X.get(W);var oe=f.apply(this,D);return E.cache=X.set(W,oe)||X,oe};return E.cache=new(ab.Cache||kl),E}ab.Cache=kl;function lb(f){if(typeof f!="function")throw new lr(o);return function(){var d=arguments;switch(d.length){case 0:return!f.call(this);case 1:return!f.call(this,d[0]);case 2:return!f.call(this,d[0],d[1]);case 3:return!f.call(this,d[0],d[1],d[2])}return!f.apply(this,d)}}function cie(f){return WR(2,f)}var fie=Xte(function(f,d){d=d.length==1&&Xt(d[0])?bt(d[0],Gi(Lt())):bt(xi(d,1),Gi(Lt()));var E=d.length;return ur(function(D){for(var W=-1,X=Mi(D.length,E);++W<X;)D[W]=d[W].call(this,D[W]);return K(f,this,D)})}),N2=ur(function(f,d){var E=js(d,bd(N2));return Il(f,O,t,d,E)}),YR=ur(function(f,d){var E=js(d,bd(YR));return Il(f,C,t,d,E)}),hie=Al(function(f,d){return Il(f,R,t,t,t,d)});function die(f,d){if(typeof f!="function")throw new lr(o);return d=d===t?d:er(d),ur(f,d)}function pie(f,d){if(typeof f!="function")throw new lr(o);return d=d==null?0:Jn(er(d),0),ur(function(E){var D=E[d],W=Ru(E,0,d);return D&&Zt(W,D),K(f,this,W)})}function vie(f,d,E){var D=!0,W=!0;if(typeof f!="function")throw new lr(o);return fn(E)&&(D="leading"in E?!!E.leading:D,W="trailing"in E?!!E.trailing:W),GR(f,d,{leading:D,maxWait:d,trailing:W})}function gie(f){return UR(f,1)}function yie(f,d){return N2(y2(d),f)}function mie(){if(!arguments.length)return[];var f=arguments[0];return Xt(f)?f:[f]}function bie(f){return wo(f,m)}function wie(f,d){return d=typeof d=="function"?d:t,wo(f,m,d)}function $ie(f){return wo(f,c|m)}function _ie(f,d){return d=typeof d=="function"?d:t,wo(f,c|m,d)}function xie(f,d){return d==null||BN(f,d,ai(d))}function ra(f,d){return f===d||f!==f&&d!==d}var Eie=eb(s2),Sie=eb(function(f,d){return f>=d}),$f=zN(function(){return arguments}())?zN:function(f){return vn(f)&&qt.call(f,"callee")&&!IN.call(f,"callee")},Xt=fe.isArray,kie=y?Gi(y):Rte;function ys(f){return f!=null&&ub(f.length)&&!Cl(f)}function _n(f){return vn(f)&&ys(f)}function Tie(f){return f===!0||f===!1||vn(f)&&Xi(f)==$}var Du=Hee||W2,Iie=k?Gi(k):Dte;function Aie(f){return vn(f)&&f.nodeType===1&&!bg(f)}function Oie(f){if(f==null)return!0;if(ys(f)&&(Xt(f)||typeof f=="string"||typeof f.splice=="function"||Du(f)||wd(f)||$f(f)))return!f.length;var d=Li(f);if(d==ae||d==pt)return!f.size;if(yg(f))return!l2(f).length;for(var E in f)if(qt.call(f,E))return!1;return!0}function Cie(f,d){return pg(f,d)}function Pie(f,d,E){E=typeof E=="function"?E:t;var D=E?E(f,d):t;return D===t?pg(f,d,t,E):!!D}function R2(f){if(!vn(f))return!1;var d=Xi(f);return d==L||d==N||typeof f.message=="string"&&typeof f.name=="string"&&!bg(f)}function Nie(f){return typeof f=="number"&&ON(f)}function Cl(f){if(!fn(f))return!1;var d=Xi(f);return d==j||d==q||d==je||d==wt}function ZR(f){return typeof f=="number"&&f==er(f)}function ub(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Ee}function fn(f){var d=typeof f;return f!=null&&(d=="object"||d=="function")}function vn(f){return f!=null&&typeof f=="object"}var XR=P?Gi(P):Mte;function Rie(f,d){return f===d||a2(f,d,E2(d))}function Die(f,d,E){return E=typeof E=="function"?E:t,a2(f,d,E2(d),E)}function Bie(f){return JR(f)&&f!=+f}function Mie(f){if(wre(f))throw new We(s);return UN(f)}function Lie(f){return f===null}function Fie(f){return f==null}function JR(f){return typeof f=="number"||vn(f)&&Xi(f)==ve}function bg(f){if(!vn(f)||Xi(f)!=He)return!1;var d=B0(f);if(d===null)return!0;var E=qt.call(d,"constructor")&&d.constructor;return typeof E=="function"&&E instanceof E&&ea.call(E)==Dee}var D2=B?Gi(B):Lte;function jie(f){return ZR(f)&&f>=-Ee&&f<=Ee}var QR=H?Gi(H):Fte;function cb(f){return typeof f=="string"||!Xt(f)&&vn(f)&&Xi(f)==Rt}function zs(f){return typeof f=="symbol"||vn(f)&&Xi(f)==fr}var wd=z?Gi(z):jte;function Hie(f){return f===t}function zie(f){return vn(f)&&Li(f)==ut}function Uie(f){return vn(f)&&Xi(f)==It}var Wie=eb(u2),Kie=eb(function(f,d){return f<=d});function eD(f){if(!f)return[];if(ys(f))return cb(f)?Yi(f):gs(f);if(og&&f[og])return La(f[og]());var d=Li(f),E=d==ae?hd:d==pt?El:$d;return E(f)}function Pl(f){if(!f)return f===0?f:0;if(f=xo(f),f===se||f===-se){var d=f<0?-1:1;return d*ye}return f===f?f:0}function er(f){var d=Pl(f),E=d%1;return d===d?E?d-E:d:0}function tD(f){return f?yf(er(f),0,Ue):0}function xo(f){if(typeof f=="number")return f;if(zs(f))return Pe;if(fn(f)){var d=typeof f.valueOf=="function"?f.valueOf():f;f=fn(d)?d+"":d}if(typeof f!="string")return f===0?f:+f;f=mo(f);var E=rd.test(f);return E||sf.test(f)?Vx(f.slice(2),E?2:8):Na.test(f)?Pe:+f}function rD(f){return Ha(f,ms(f))}function qie(f){return f?yf(er(f),-Ee,Ee):f===0?f:0}function Rr(f){return f==null?"":Hs(f)}var Vie=yd(function(f,d){if(yg(d)||ys(d)){Ha(d,ai(d),f);return}for(var E in d)qt.call(d,E)&&fg(f,E,d[E])}),nD=yd(function(f,d){Ha(d,ms(d),f)}),fb=yd(function(f,d,E,D){Ha(d,ms(d),f,D)}),Gie=yd(function(f,d,E,D){Ha(d,ai(d),f,D)}),Yie=Al(r2);function Zie(f,d){var E=gd(f);return d==null?E:DN(E,d)}var Xie=ur(function(f,d){f=yt(f);var E=-1,D=d.length,W=D>2?d[2]:t;for(W&&Ji(d[0],d[1],W)&&(D=1);++E<D;)for(var X=d[E],oe=ms(X),de=-1,ke=oe.length;++de<ke;){var qe=oe[de],Ve=f[qe];(Ve===t||ra(Ve,Xn[qe])&&!qt.call(f,qe))&&(f[qe]=X[qe])}return f}),Jie=ur(function(f){return f.push(t,wR),K(iD,t,f)});function Qie(f,d){return Ba(f,Lt(d,3),ja)}function ese(f,d){return Ba(f,Lt(d,3),i2)}function tse(f,d){return f==null?f:n2(f,Lt(d,3),ms)}function rse(f,d){return f==null?f:jN(f,Lt(d,3),ms)}function nse(f,d){return f&&ja(f,Lt(d,3))}function ise(f,d){return f&&i2(f,Lt(d,3))}function sse(f){return f==null?[]:q0(f,ai(f))}function ose(f){return f==null?[]:q0(f,ms(f))}function B2(f,d,E){var D=f==null?t:mf(f,d);return D===t?E:D}function ase(f,d){return f!=null&&xR(f,d,Ote)}function M2(f,d){return f!=null&&xR(f,d,Cte)}var lse=vR(function(f,d,E){d!=null&&typeof d.toString!="function"&&(d=N0.call(d)),f[d]=E},F2(bs)),use=vR(function(f,d,E){d!=null&&typeof d.toString!="function"&&(d=N0.call(d)),qt.call(f,d)?f[d].push(E):f[d]=[E]},Lt),cse=ur(dg);function ai(f){return ys(f)?NN(f):l2(f)}function ms(f){return ys(f)?NN(f,!0):Hte(f)}function fse(f,d){var E={};return d=Lt(d,3),ja(f,function(D,W,X){Tl(E,d(D,W,X),D)}),E}function hse(f,d){var E={};return d=Lt(d,3),ja(f,function(D,W,X){Tl(E,W,d(D,W,X))}),E}var dse=yd(function(f,d,E){V0(f,d,E)}),iD=yd(function(f,d,E,D){V0(f,d,E,D)}),pse=Al(function(f,d){var E={};if(f==null)return E;var D=!1;d=bt(d,function(X){return X=Nu(X,f),D||(D=X.length>1),X}),Ha(f,_2(f),E),D&&(E=wo(E,c|p|m,lre));for(var W=d.length;W--;)p2(E,d[W]);return E});function vse(f,d){return sD(f,lb(Lt(d)))}var gse=Al(function(f,d){return f==null?{}:Ute(f,d)});function sD(f,d){if(f==null)return{};var E=bt(_2(f),function(D){return[D]});return d=Lt(d),ZN(f,E,function(D,W){return d(D,W[0])})}function yse(f,d,E){d=Nu(d,f);var D=-1,W=d.length;for(W||(W=1,f=t);++D<W;){var X=f==null?t:f[za(d[D])];X===t&&(D=W,X=E),f=Cl(X)?X.call(f):X}return f}function mse(f,d,E){return f==null?f:vg(f,d,E)}function bse(f,d,E,D){return D=typeof D=="function"?D:t,f==null?f:vg(f,d,E,D)}var oD=mR(ai),aD=mR(ms);function wse(f,d,E){var D=Xt(f),W=D||Du(f)||wd(f);if(d=Lt(d,4),E==null){var X=f&&f.constructor;W?E=D?new X:[]:fn(f)?E=Cl(X)?gd(B0(f)):{}:E={}}return(W?ie:ja)(f,function(oe,de,ke){return d(E,oe,de,ke)}),E}function $se(f,d){return f==null?!0:p2(f,d)}function _se(f,d,E){return f==null?f:tR(f,d,y2(E))}function xse(f,d,E,D){return D=typeof D=="function"?D:t,f==null?f:tR(f,d,y2(E),D)}function $d(f){return f==null?[]:rg(f,ai(f))}function Ese(f){return f==null?[]:rg(f,ms(f))}function Sse(f,d,E){return E===t&&(E=d,d=t),E!==t&&(E=xo(E),E=E===E?E:0),d!==t&&(d=xo(d),d=d===d?d:0),yf(xo(f),d,E)}function kse(f,d,E){return d=Pl(d),E===t?(E=d,d=0):E=Pl(E),f=xo(f),Pte(f,d,E)}function Tse(f,d,E){if(E&&typeof E!="boolean"&&Ji(f,d,E)&&(d=E=t),E===t&&(typeof d=="boolean"?(E=d,d=t):typeof f=="boolean"&&(E=f,f=t)),f===t&&d===t?(f=0,d=1):(f=Pl(f),d===t?(d=f,f=0):d=Pl(d)),f>d){var D=f;f=d,d=D}if(E||f%1||d%1){var W=CN();return Mi(f+W*(d-f+eg("1e-"+((W+"").length-1))),d)}return f2(f,d)}var Ise=md(function(f,d,E){return d=d.toLowerCase(),f+(E?lD(d):d)});function lD(f){return L2(Rr(f).toLowerCase())}function uD(f){return f=Rr(f),f&&f.replace(nd,Au).replace(Hx,"")}function Ase(f,d,E){f=Rr(f),d=Hs(d);var D=f.length;E=E===t?D:yf(er(E),0,D);var W=E;return E-=d.length,E>=0&&f.slice(E,W)==d}function Ose(f){return f=Rr(f),f&&Zh.test(f)?f.replace(Ca,Yx):f}function Cse(f){return f=Rr(f),f&&Pa.test(f)?f.replace(po,"\\$&"):f}var Pse=md(function(f,d,E){return f+(E?"-":"")+d.toLowerCase()}),Nse=md(function(f,d,E){return f+(E?" ":"")+d.toLowerCase()}),Rse=hR("toLowerCase");function Dse(f,d,E){f=Rr(f),d=er(d);var D=d?Fa(f):0;if(!d||D>=d)return f;var W=(d-D)/2;return Q0(j0(W),E)+f+Q0(F0(W),E)}function Bse(f,d,E){f=Rr(f),d=er(d);var D=d?Fa(f):0;return d&&D<d?f+Q0(d-D,E):f}function Mse(f,d,E){f=Rr(f),d=er(d);var D=d?Fa(f):0;return d&&D<d?Q0(d-D,E)+f:f}function Lse(f,d,E){return E||d==null?d=0:d&&(d=+d),Kee(Rr(f).replace(bl,""),d||0)}function Fse(f,d,E){return(E?Ji(f,d,E):d===t)?d=1:d=er(d),h2(Rr(f),d)}function jse(){var f=arguments,d=Rr(f[0]);return f.length<3?d:d.replace(f[1],f[2])}var Hse=md(function(f,d,E){return f+(E?"_":"")+d.toLowerCase()});function zse(f,d,E){return E&&typeof E!="number"&&Ji(f,d,E)&&(d=E=t),E=E===t?Ue:E>>>0,E?(f=Rr(f),f&&(typeof d=="string"||d!=null&&!D2(d))&&(d=Hs(d),!d&&vs(f))?Ru(Yi(f),0,E):f.split(d,E)):[]}var Use=md(function(f,d,E){return f+(E?" ":"")+L2(d)});function Wse(f,d,E){return f=Rr(f),E=E==null?0:yf(er(E),0,f.length),d=Hs(d),f.slice(E,E+d.length)==d}function Kse(f,d,E){var D=G.templateSettings;E&&Ji(f,d,E)&&(d=t),f=Rr(f),d=fb({},d,D,bR);var W=fb({},d.imports,D.imports,bR),X=ai(W),oe=rg(W,X),de,ke,qe=0,Ve=d.interpolate||ku,Xe="__p += '",gt=Qt((d.escape||ku).source+"|"+Ve.source+"|"+(Ve===Eu?ed:ku).source+"|"+(d.evaluate||ku).source+"|$","g"),At="//# sourceURL="+(qt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qx+"]")+`
`;f.replace(gt,function(zt,vr,mr,Us,Qi,Ws){return mr||(mr=Us),Xe+=f.slice(qe,Ws).replace(Ra,Zx),vr&&(de=!0,Xe+=`' +
__e(`+vr+`) +
'`),Qi&&(ke=!0,Xe+=`';
`+Qi+`;
__p += '`),mr&&(Xe+=`' +
((__t = (`+mr+`)) == null ? '' : __t) +
'`),qe=Ws+zt.length,zt}),Xe+=`';
`;var Ht=qt.call(d,"variable")&&d.variable;if(!Ht)Xe=`with (obj) {
`+Xe+`
}
`;else if(Vv.test(Ht))throw new We(a);Xe=(ke?Xe.replace(tf,""):Xe).replace(Yh,"$1").replace(ho,"$1;"),Xe="function("+(Ht||"obj")+`) {
`+(Ht?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(de?", __e = _.escape":"")+(ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Xe+`return __p
}`;var rr=fD(function(){return $t(X,At+"return "+Xe).apply(t,oe)});if(rr.source=Xe,R2(rr))throw rr;return rr}function qse(f){return Rr(f).toLowerCase()}function Vse(f){return Rr(f).toUpperCase()}function Gse(f,d,E){if(f=Rr(f),f&&(E||d===t))return mo(f);if(!f||!(d=Hs(d)))return f;var D=Yi(f),W=Yi(d),X=Ar(D,W),oe=hf(D,W)+1;return Ru(D,X,oe).join("")}function Yse(f,d,E){if(f=Rr(f),f&&(E||d===t))return f.slice(0,C0(f)+1);if(!f||!(d=Hs(d)))return f;var D=Yi(f),W=hf(D,Yi(d))+1;return Ru(D,0,W).join("")}function Zse(f,d,E){if(f=Rr(f),f&&(E||d===t))return f.replace(bl,"");if(!f||!(d=Hs(d)))return f;var D=Yi(f),W=Ar(D,Yi(d));return Ru(D,W).join("")}function Xse(f,d){var E=U,D=V;if(fn(d)){var W="separator"in d?d.separator:W;E="length"in d?er(d.length):E,D="omission"in d?Hs(d.omission):D}f=Rr(f);var X=f.length;if(vs(f)){var oe=Yi(f);X=oe.length}if(E>=X)return f;var de=E-Fa(D);if(de<1)return D;var ke=oe?Ru(oe,0,de).join(""):f.slice(0,de);if(W===t)return ke+D;if(oe&&(de+=ke.length-de),D2(W)){if(f.slice(de).search(W)){var qe,Ve=ke;for(W.global||(W=Qt(W.source,Rr(td.exec(W))+"g")),W.lastIndex=0;qe=W.exec(Ve);)var Xe=qe.index;ke=ke.slice(0,Xe===t?de:Xe)}}else if(f.indexOf(Hs(W),de)!=de){var gt=ke.lastIndexOf(W);gt>-1&&(ke=ke.slice(0,gt))}return ke+D}function Jse(f){return f=Rr(f),f&&rf.test(f)?f.replace(Yo,sg):f}var Qse=md(function(f,d,E){return f+(E?" ":"")+d.toUpperCase()}),L2=hR("toUpperCase");function cD(f,d,E){return f=Rr(f),d=E?t:d,d===t?ng(f)?ge(f):hr(f):f.match(d)||[]}var fD=ur(function(f,d){try{return K(f,t,d)}catch(E){return R2(E)?E:new We(E)}}),eoe=Al(function(f,d){return ie(d,function(E){E=za(E),Tl(f,E,P2(f[E],f))}),f});function toe(f){var d=f==null?0:f.length,E=Lt();return f=d?bt(f,function(D){if(typeof D[1]!="function")throw new lr(o);return[E(D[0]),D[1]]}):[],ur(function(D){for(var W=-1;++W<d;){var X=f[W];if(K(X[0],this,D))return K(X[1],this,D)}})}function roe(f){return Tte(wo(f,c))}function F2(f){return function(){return f}}function noe(f,d){return f==null||f!==f?d:f}var ioe=pR(),soe=pR(!0);function bs(f){return f}function j2(f){return WN(typeof f=="function"?f:wo(f,c))}function ooe(f){return qN(wo(f,c))}function aoe(f,d){return VN(f,wo(d,c))}var loe=ur(function(f,d){return function(E){return dg(E,f,d)}}),uoe=ur(function(f,d){return function(E){return dg(f,E,d)}});function H2(f,d,E){var D=ai(d),W=q0(d,D);E==null&&!(fn(d)&&(W.length||!D.length))&&(E=d,d=f,f=this,W=q0(d,ai(d)));var X=!(fn(E)&&"chain"in E)||!!E.chain,oe=Cl(f);return ie(W,function(de){var ke=d[de];f[de]=ke,oe&&(f.prototype[de]=function(){var qe=this.__chain__;if(X||qe){var Ve=f(this.__wrapped__),Xe=Ve.__actions__=gs(this.__actions__);return Xe.push({func:ke,args:arguments,thisArg:f}),Ve.__chain__=qe,Ve}return ke.apply(f,Zt([this.value()],arguments))})}),f}function coe(){return un._===this&&(un._=Bee),this}function z2(){}function foe(f){return f=er(f),ur(function(d){return GN(d,f)})}var hoe=b2(bt),doe=b2(Ce),poe=b2(cn);function hD(f){return k2(f)?xl(za(f)):Wte(f)}function voe(f){return function(d){return f==null?t:mf(f,d)}}var goe=gR(),yoe=gR(!0);function U2(){return[]}function W2(){return!1}function moe(){return{}}function boe(){return""}function woe(){return!0}function $oe(f,d){if(f=er(f),f<1||f>Ee)return[];var E=Ue,D=Mi(f,Ue);d=Lt(d),f-=Ue;for(var W=cf(D,d);++E<f;)d(E);return W}function _oe(f){return Xt(f)?bt(f,za):zs(f)?[f]:gs(PR(Rr(f)))}function xoe(f){var d=++Ree;return Rr(f)+d}var Eoe=J0(function(f,d){return f+d},0),Soe=w2("ceil"),koe=J0(function(f,d){return f/d},1),Toe=w2("floor");function Ioe(f){return f&&f.length?K0(f,bs,s2):t}function Aoe(f,d){return f&&f.length?K0(f,Lt(d,2),s2):t}function Ooe(f){return Ls(f,bs)}function Coe(f,d){return Ls(f,Lt(d,2))}function Poe(f){return f&&f.length?K0(f,bs,u2):t}function Noe(f,d){return f&&f.length?K0(f,Lt(d,2),u2):t}var Roe=J0(function(f,d){return f*d},1),Doe=w2("round"),Boe=J0(function(f,d){return f-d},0);function Moe(f){return f&&f.length?Bi(f,bs):0}function Loe(f,d){return f&&f.length?Bi(f,Lt(d,2)):0}return G.after=oie,G.ary=UR,G.assign=Vie,G.assignIn=nD,G.assignInWith=fb,G.assignWith=Gie,G.at=Yie,G.before=WR,G.bind=P2,G.bindAll=eoe,G.bindKey=KR,G.castArray=mie,G.chain=jR,G.chunk=Tre,G.compact=Ire,G.concat=Are,G.cond=toe,G.conforms=roe,G.constant=F2,G.countBy=Mne,G.create=Zie,G.curry=qR,G.curryRight=VR,G.debounce=GR,G.defaults=Xie,G.defaultsDeep=Jie,G.defer=aie,G.delay=lie,G.difference=Ore,G.differenceBy=Cre,G.differenceWith=Pre,G.drop=Nre,G.dropRight=Rre,G.dropRightWhile=Dre,G.dropWhile=Bre,G.fill=Mre,G.filter=Fne,G.flatMap=zne,G.flatMapDeep=Une,G.flatMapDepth=Wne,G.flatten=BR,G.flattenDeep=Lre,G.flattenDepth=Fre,G.flip=uie,G.flow=ioe,G.flowRight=soe,G.fromPairs=jre,G.functions=sse,G.functionsIn=ose,G.groupBy=Kne,G.initial=zre,G.intersection=Ure,G.intersectionBy=Wre,G.intersectionWith=Kre,G.invert=lse,G.invertBy=use,G.invokeMap=Vne,G.iteratee=j2,G.keyBy=Gne,G.keys=ai,G.keysIn=ms,G.map=sb,G.mapKeys=fse,G.mapValues=hse,G.matches=ooe,G.matchesProperty=aoe,G.memoize=ab,G.merge=dse,G.mergeWith=iD,G.method=loe,G.methodOf=uoe,G.mixin=H2,G.negate=lb,G.nthArg=foe,G.omit=pse,G.omitBy=vse,G.once=cie,G.orderBy=Yne,G.over=hoe,G.overArgs=fie,G.overEvery=doe,G.overSome=poe,G.partial=N2,G.partialRight=YR,G.partition=Zne,G.pick=gse,G.pickBy=sD,G.property=hD,G.propertyOf=voe,G.pull=Yre,G.pullAll=LR,G.pullAllBy=Zre,G.pullAllWith=Xre,G.pullAt=Jre,G.range=goe,G.rangeRight=yoe,G.rearg=hie,G.reject=Qne,G.remove=Qre,G.rest=die,G.reverse=O2,G.sampleSize=tie,G.set=mse,G.setWith=bse,G.shuffle=rie,G.slice=ene,G.sortBy=sie,G.sortedUniq=ane,G.sortedUniqBy=lne,G.split=zse,G.spread=pie,G.tail=une,G.take=cne,G.takeRight=fne,G.takeRightWhile=hne,G.takeWhile=dne,G.tap=Ine,G.throttle=vie,G.thru=ib,G.toArray=eD,G.toPairs=oD,G.toPairsIn=aD,G.toPath=_oe,G.toPlainObject=rD,G.transform=wse,G.unary=gie,G.union=pne,G.unionBy=vne,G.unionWith=gne,G.uniq=yne,G.uniqBy=mne,G.uniqWith=bne,G.unset=$se,G.unzip=C2,G.unzipWith=FR,G.update=_se,G.updateWith=xse,G.values=$d,G.valuesIn=Ese,G.without=wne,G.words=cD,G.wrap=yie,G.xor=$ne,G.xorBy=_ne,G.xorWith=xne,G.zip=Ene,G.zipObject=Sne,G.zipObjectDeep=kne,G.zipWith=Tne,G.entries=oD,G.entriesIn=aD,G.extend=nD,G.extendWith=fb,H2(G,G),G.add=Eoe,G.attempt=fD,G.camelCase=Ise,G.capitalize=lD,G.ceil=Soe,G.clamp=Sse,G.clone=bie,G.cloneDeep=$ie,G.cloneDeepWith=_ie,G.cloneWith=wie,G.conformsTo=xie,G.deburr=uD,G.defaultTo=noe,G.divide=koe,G.endsWith=Ase,G.eq=ra,G.escape=Ose,G.escapeRegExp=Cse,G.every=Lne,G.find=jne,G.findIndex=RR,G.findKey=Qie,G.findLast=Hne,G.findLastIndex=DR,G.findLastKey=ese,G.floor=Toe,G.forEach=HR,G.forEachRight=zR,G.forIn=tse,G.forInRight=rse,G.forOwn=nse,G.forOwnRight=ise,G.get=B2,G.gt=Eie,G.gte=Sie,G.has=ase,G.hasIn=M2,G.head=MR,G.identity=bs,G.includes=qne,G.indexOf=Hre,G.inRange=kse,G.invoke=cse,G.isArguments=$f,G.isArray=Xt,G.isArrayBuffer=kie,G.isArrayLike=ys,G.isArrayLikeObject=_n,G.isBoolean=Tie,G.isBuffer=Du,G.isDate=Iie,G.isElement=Aie,G.isEmpty=Oie,G.isEqual=Cie,G.isEqualWith=Pie,G.isError=R2,G.isFinite=Nie,G.isFunction=Cl,G.isInteger=ZR,G.isLength=ub,G.isMap=XR,G.isMatch=Rie,G.isMatchWith=Die,G.isNaN=Bie,G.isNative=Mie,G.isNil=Fie,G.isNull=Lie,G.isNumber=JR,G.isObject=fn,G.isObjectLike=vn,G.isPlainObject=bg,G.isRegExp=D2,G.isSafeInteger=jie,G.isSet=QR,G.isString=cb,G.isSymbol=zs,G.isTypedArray=wd,G.isUndefined=Hie,G.isWeakMap=zie,G.isWeakSet=Uie,G.join=qre,G.kebabCase=Pse,G.last=_o,G.lastIndexOf=Vre,G.lowerCase=Nse,G.lowerFirst=Rse,G.lt=Wie,G.lte=Kie,G.max=Ioe,G.maxBy=Aoe,G.mean=Ooe,G.meanBy=Coe,G.min=Poe,G.minBy=Noe,G.stubArray=U2,G.stubFalse=W2,G.stubObject=moe,G.stubString=boe,G.stubTrue=woe,G.multiply=Roe,G.nth=Gre,G.noConflict=coe,G.noop=z2,G.now=ob,G.pad=Dse,G.padEnd=Bse,G.padStart=Mse,G.parseInt=Lse,G.random=Tse,G.reduce=Xne,G.reduceRight=Jne,G.repeat=Fse,G.replace=jse,G.result=yse,G.round=Doe,G.runInContext=J,G.sample=eie,G.size=nie,G.snakeCase=Hse,G.some=iie,G.sortedIndex=tne,G.sortedIndexBy=rne,G.sortedIndexOf=nne,G.sortedLastIndex=ine,G.sortedLastIndexBy=sne,G.sortedLastIndexOf=one,G.startCase=Use,G.startsWith=Wse,G.subtract=Boe,G.sum=Moe,G.sumBy=Loe,G.template=Kse,G.times=$oe,G.toFinite=Pl,G.toInteger=er,G.toLength=tD,G.toLower=qse,G.toNumber=xo,G.toSafeInteger=qie,G.toString=Rr,G.toUpper=Vse,G.trim=Gse,G.trimEnd=Yse,G.trimStart=Zse,G.truncate=Xse,G.unescape=Jse,G.uniqueId=xoe,G.upperCase=Qse,G.upperFirst=L2,G.each=HR,G.eachRight=zR,G.first=MR,H2(G,function(){var f={};return ja(G,function(d,E){qt.call(G.prototype,E)||(f[E]=d)}),f}(),{chain:!1}),G.VERSION=n,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){G[f].placeholder=G}),ie(["drop","take"],function(f,d){yr.prototype[f]=function(E){E=E===t?1:Jn(er(E),0);var D=this.__filtered__&&!d?new yr(this):this.clone();return D.__filtered__?D.__takeCount__=Mi(E,D.__takeCount__):D.__views__.push({size:Mi(E,Ue),type:f+(D.__dir__<0?"Right":"")}),D},yr.prototype[f+"Right"]=function(E){return this.reverse()[f](E).reverse()}}),ie(["filter","map","takeWhile"],function(f,d){var E=d+1,D=E==Q||E==Z;yr.prototype[f]=function(W){var X=this.clone();return X.__iteratees__.push({iteratee:Lt(W,3),type:E}),X.__filtered__=X.__filtered__||D,X}}),ie(["head","last"],function(f,d){var E="take"+(d?"Right":"");yr.prototype[f]=function(){return this[E](1).value()[0]}}),ie(["initial","tail"],function(f,d){var E="drop"+(d?"":"Right");yr.prototype[f]=function(){return this.__filtered__?new yr(this):this[E](1)}}),yr.prototype.compact=function(){return this.filter(bs)},yr.prototype.find=function(f){return this.filter(f).head()},yr.prototype.findLast=function(f){return this.reverse().find(f)},yr.prototype.invokeMap=ur(function(f,d){return typeof f=="function"?new yr(this):this.map(function(E){return dg(E,f,d)})}),yr.prototype.reject=function(f){return this.filter(lb(Lt(f)))},yr.prototype.slice=function(f,d){f=er(f);var E=this;return E.__filtered__&&(f>0||d<0)?new yr(E):(f<0?E=E.takeRight(-f):f&&(E=E.drop(f)),d!==t&&(d=er(d),E=d<0?E.dropRight(-d):E.take(d-f)),E)},yr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},yr.prototype.toArray=function(){return this.take(Ue)},ja(yr.prototype,function(f,d){var E=/^(?:filter|find|map|reject)|While$/.test(d),D=/^(?:head|last)$/.test(d),W=G[D?"take"+(d=="last"?"Right":""):d],X=D||/^find/.test(d);W&&(G.prototype[d]=function(){var oe=this.__wrapped__,de=D?[1]:arguments,ke=oe instanceof yr,qe=de[0],Ve=ke||Xt(oe),Xe=function(vr){var mr=W.apply(G,Zt([vr],de));return D&&gt?mr[0]:mr};Ve&&E&&typeof qe=="function"&&qe.length!=1&&(ke=Ve=!1);var gt=this.__chain__,At=!!this.__actions__.length,Ht=X&&!gt,rr=ke&&!At;if(!X&&Ve){oe=rr?oe:new yr(this);var zt=f.apply(oe,de);return zt.__actions__.push({func:ib,args:[Xe],thisArg:t}),new bo(zt,gt)}return Ht&&rr?f.apply(this,de):(zt=this.thru(Xe),Ht?D?zt.value()[0]:zt.value():zt)})}),ie(["pop","push","shift","sort","splice","unshift"],function(f){var d=Zn[f],E=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",D=/^(?:pop|shift)$/.test(f);G.prototype[f]=function(){var W=arguments;if(D&&!this.__chain__){var X=this.value();return d.apply(Xt(X)?X:[],W)}return this[E](function(oe){return d.apply(Xt(oe)?oe:[],W)})}}),ja(yr.prototype,function(f,d){var E=G[d];if(E){var D=E.name+"";qt.call(vd,D)||(vd[D]=[]),vd[D].push({name:d,func:E})}}),vd[X0(t,_).name]=[{name:"wrapper",func:t}],yr.prototype.clone=Jee,yr.prototype.reverse=Qee,yr.prototype.value=ete,G.prototype.at=Ane,G.prototype.chain=One,G.prototype.commit=Cne,G.prototype.next=Pne,G.prototype.plant=Rne,G.prototype.reverse=Dne,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Bne,G.prototype.first=G.prototype.head,og&&(G.prototype[og]=Nne),G},Oe=Ie();Xo?((Xo.exports=Oe)._=Oe,cd._=Oe):un._=Oe}).call(kn)})(ww,ww.exports);var On=ww.exports;const Kd=ro(On),UD="c2fc1ad0-f76f-11ec-b939-0242ac120002",WD=new Set;hn.config({driver:[hn.LOCALSTORAGE,hn.INDEXEDDB,hn.WEBSQL]});let Cue=class mz{constructor(r="",t=null){le(this,"id");le(this,"parent");le(this,"children",new Map);le(this,"on_subscriptions",new Map);le(this,"map_subscriptions",new Map);le(this,"value");le(this,"counter",0);le(this,"loaded",!1);le(this,"saveLocalForage",Kd.throttle(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const r=Array.from(this.children.keys());await hn.setItem(this.id,r)}else this.value===void 0?await hn.removeItem(this.id):await hn.setItem(this.id,this.value===null?UD:this.value)},500));le(this,"loadLocalForage",Kd.throttle(async()=>{if(WD.has(this.id))return;let r=await hn.getItem(this.id);if(r===null)r=void 0,WD.add(this.id);else if(r===UD)r=null;else if(Array.isArray(r)){const t={};await Promise.all(r.map(async n=>{t[n]=await this.get(n).once()})),r=t}else this.value=r;return this.loaded=!0,r},500));le(this,"doCallbacks",Kd.debounce(()=>{for(const[r,t]of this.on_subscriptions){const n=()=>this.on_subscriptions.delete(r);this.once(t,n,!1)}if(this.parent){this.parent.doCallbacks();for(const[r,t]of this.parent.map_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(r)};this.once(t,n,!1)}}},20,{maxWait:40}));this.id=r,this.parent=t}get(r){const t=this.children.get(r);if(t)return t;const n=new mz(`${this.id}/${r}`,this);return this.children.set(r,n),this.saveLocalForage(),n}async put(r){if(Array.isArray(r))throw new Error("Sorry, we don't deal with arrays");return typeof r=="object"&&r!==null?(this.value=void 0,await Promise.all(Kd.map(r,(t,n)=>this.get(n).put(t)))):(this.children=new Map,this.value=r),this.doCallbacks(),this.saveLocalForage()}async once(r,t,n=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,t)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||n)return r&&r(i,this.id.slice(this.id.lastIndexOf("/")+1),t||(()=>{})),i}on(r){const t=this.counter++;this.on_subscriptions.set(t,r);const n=()=>this.on_subscriptions.delete(t);return this.once(r,n,!1),n}map(r){var s;const t=this.counter++;this.map_subscriptions.set(t,r);const n=()=>this.map_subscriptions.delete(t),i=()=>{for(const o of this.children.values())o.once(r,n,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),n}};const Re=new Cue;function Pue(e,r=void 0,t=!1){const[n,i]=Me(r||Re.get(e).value);St(()=>Re.get(e).on((a,l,u)=>{i(a),t&&u()}),[e,t]);const s=Nh(o=>{Re.get(e).put(o)},[e]);return[n,s]}var vu={},iv={};Object.defineProperty(iv,"__esModule",{value:!0});iv.createBitArray=Nue;iv.fromBits=Due;iv.toBits=Rue;function Nue(e){return new Uint8Array(e)}function bz(e,r,t,n,i){var s=(1<<n)-1,o=0,a=0,l=0;if(e.forEach(function(u){for(o=(o<<r)+u,a+=r;a>=n;)a-=n,t[l]=o>>a&s,l+=1}),i)a>0&&(t[l]=o<<n-a&s);else{if(a>=r)throw new Error("Excessive padding: ".concat(a," (max ").concat(r-1," allowed)"));if(o%(1<<a)!==0)throw new Error("Non-zero padding")}}function Rue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return bz(e,8,t,r,!0),t}function Due(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return bz(e,r,t,8,!1),t}var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.CHECKSUM_LENGTH=void 0;ka.createChecksum=Fue;ka.decode=Ez;ka.decodeWithPrefix=Hue;ka.detectCase=zue;ka.encode=jue;ka.expandPrefix=xz;ka.verifyChecksum=Lue;var wz=iv,xT="qpzry9x8gf2tvdw0s3jn54khce6mua7l",$z=734539939,KD=33,qD=126,ET=6;ka.CHECKSUM_LENGTH=ET;var Bue=function(){for(var e=new Map,r=0;r<xT.length;r+=1)e.set(xT[r],r);return e}(),Mue=[996825010,642813549,513874426,1027748829,705979059];function _z(e){return e.reduce(function(r,t){var n=r>>25,i=(r&33554431)<<5^t;return Mue.reduce(function(s,o,a){return n>>a&1?s^o:s},i)},1)}function xz(e,r){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);r[t]=n>>5,r[t+e.length+1]=n&31}r[e.length]=0}function Lue(e){switch(_z(e)){case 1:return"bech32";case $z:return"bech32m";default:return}}function Fue(e,r){var t;switch(r){case"bech32":t=1;break;case"bech32m":t=$z;break;default:throw Error("Invalid encoding value: ".concat(r,"; expected bech32 or bech32m"))}for(var n=_z(e)^t,i=0;i<ET;i+=1){var s=5*(5-i);e[e.length-ET+i]=n>>s&31}}function jue(e){return e.reduce(function(r,t){return r+xT[t]},"")}function Ez(e,r){for(var t=r||(0,wz.createBitArray)(e.length),n=0;n<e.length;n+=1){var i=Bue.get(e[n]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[n]));t[n]=i}return t}function Hue(e,r){var t=r.length+2*e.length+1,n=(0,wz.createBitArray)(t);return xz(e,n.subarray(0,2*e.length+1)),Ez(r,n.subarray(2*e.length+1)),n}function zue(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",t=!1,n=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<KD||s>qD)throw new TypeError("Invalid char in ".concat(r,": ").concat(s,"; ")+"should be in ASCII range ".concat(KD,"-").concat(qD));n=n||s>=65&&s<=90,t=t||s>=97&&s<=122}if(t&&n)throw new TypeError("Mixed-case ".concat(r));return n?"upper":t?"lower":null}Object.defineProperty(vu,"__esModule",{value:!0});vu.BitcoinAddress=void 0;var $w=vu.decode=que;vu.decodeTo5BitArray=u3;var VD=vu.encode=Kue;vu.encode5BitArray=l3;vu.from5BitArray=a3;vu.to5BitArray=o3;var vy=iv,Ro=ka;function Uue(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function GD(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wue(e,r,t){return r&&GD(e.prototype,r),t&&GD(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var _w=90;function o3(e,r){var t=Math.ceil(e.length*8/5),n=r||(0,vy.createBitArray)(t);return(0,vy.toBits)(e,5,n)}function a3(e,r){var t=Math.floor(e.length*5/8),n=r||new Uint8Array(t);return(0,vy.fromBits)(e,5,n)}function l3(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+r.length+Ro.CHECKSUM_LENGTH;if(i-e.length>_w)throw new Error("Message to be produced is too long (max ".concat(_w," supported)"));var s=(t=(0,Ro.detectCase)(e,"prefix"))!==null&&t!==void 0?t:"lower",o=(0,vy.createBitArray)(i);(0,Ro.expandPrefix)(e.toLowerCase(),o.subarray(0,2*e.length+1));var a=o.subarray(2*e.length+1,o.length-Ro.CHECKSUM_LENGTH);a.set(r),(0,Ro.createChecksum)(o,n);var l=(0,Ro.encode)(o.subarray(2*e.length+1));return s==="upper"&&(l=l.toUpperCase()),"".concat(e,"1").concat(l)}function Kue(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return l3(e,o3(r),t)}function u3(e){if(e.length>_w)throw new TypeError("Message too long; max ".concat(_w," expected"));(0,Ro.detectCase)(e);var r=e.toLowerCase(),t=r.lastIndexOf("1");if(t<0)throw new Error('No separator char ("1") found');if(t>e.length-Ro.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(Ro.CHECKSUM_LENGTH," chars expected)"));var n=r.substring(0,t),i=(0,Ro.decodeWithPrefix)(n,r.substring(t+1)),s=(0,Ro.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:n,encoding:s,data:i.subarray(2*n.length+1,i.length-Ro.CHECKSUM_LENGTH)}}function que(e){var r=u3(e),t=r.prefix,n=r.encoding,i=r.data;return{prefix:t,encoding:n,data:a3(i)}}var Vue=function(){function e(r,t,n){if(Uue(this,e),r!=="bc"&&r!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(t<0||t>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(n.length<2||n.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(t===0&&n.length!==20&&n.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=r,this.scriptVersion=t,this.data=n}return Wue(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var t=Math.ceil(this.data.length*8/5),n=(0,vy.createBitArray)(t+1);n[0]=this.scriptVersion,o3(this.data,n.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return l3(this.prefix,n,i)}}],[{key:"decode",value:function(t){var n=u3(t),i=n.prefix,s=n.data,o=n.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var a=s[0];if(a===0&&o!=="bech32")throw Error("Unexpected encoding ".concat(o," used for version 0 script"));if(a>0&&o!=="bech32m")throw Error("Unexpected encoding ".concat(o," used for version ").concat(a," script"));return new this(i,a,a3(s.subarray(1)))}}]),e}();vu.BitcoinAddress=Vue;function ST(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Gue(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Sz(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Yue(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ST(e.outputLen),ST(e.blockLen)}function Zue(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Xue(e,r){Sz(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const jf={number:ST,bool:Gue,bytes:Sz,hash:Yue,exists:Zue,output:Xue},Z2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c3=e=>e instanceof Uint8Array,X2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ua=(e,r)=>e<<32-r|e>>>r,Jue=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Jue)throw new Error("Non little-endian hardware is not supported");const Que=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Do(e){if(!c3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Que[e[t]];return r}function Tp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ece(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function f3(e){if(typeof e=="string"&&(e=ece(e)),!c3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function kz(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!c3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let Tz=class{clone(){return this._cloneInto()}};function Iz(e){const r=n=>e().update(f3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function h3(e=32){if(Z2&&typeof Z2.getRandomValues=="function")return Z2.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function tce(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let rce=class extends Tz{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=X2(this.buffer)}update(r){jf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=f3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=X2(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){jf.exists(this),jf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;tce(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=X2(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const nce=(e,r,t)=>e&r^~e&t,ice=(e,r,t)=>e&r^e&t^r&t,sce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mu=new Uint32Array(64);let Az=class extends rce{constructor(){super(64,32,8,!1),this.A=Bu[0]|0,this.B=Bu[1]|0,this.C=Bu[2]|0,this.D=Bu[3]|0,this.E=Bu[4]|0,this.F=Bu[5]|0,this.G=Bu[6]|0,this.H=Bu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Mu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Mu[c-15],m=Mu[c-2],w=Ua(p,7)^Ua(p,18)^p>>>3,b=Ua(m,17)^Ua(m,19)^m>>>10;Mu[c]=b+Mu[c-7]+w+Mu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const p=Ua(a,6)^Ua(a,11)^Ua(a,25),m=h+p+nce(a,l,u)+sce[c]+Mu[c]|0,b=(Ua(n,2)^Ua(n,13)^Ua(n,22))+ice(n,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Mu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},oce=class extends Az{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Ip=Iz(()=>new Az);Iz(()=>new oce);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oz=BigInt(0),r_=BigInt(1),ace=BigInt(2),n_=e=>e instanceof Uint8Array,lce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Ap(e){if(!n_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=lce[e[t]];return r}function Cz(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function d3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Op(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Cs(e){return d3(Ap(e))}function p3(e){if(!n_(e))throw new Error("Uint8Array expected");return d3(Ap(Uint8Array.from(e).reverse()))}function bc(e,r){return Op(e.toString(16).padStart(r*2,"0"))}function Pz(e,r){return bc(e,r).reverse()}function uce(e){return Op(Cz(e))}function ki(e,r,t){let n;if(typeof r=="string")try{n=Op(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(n_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function gh(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!n_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function cce(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function fce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function hce(e){let r;for(r=0;e>Oz;e>>=r_,r+=1);return r}function dce(e,r){return e>>BigInt(r)&r_}const pce=(e,r,t)=>e|(t?r_:Oz)<<BigInt(r),v3=e=>(ace<<BigInt(e-1))-r_,J2=e=>new Uint8Array(e),YD=e=>Uint8Array.from(e);function Nz(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=J2(e),i=J2(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=J2())=>{i=a(YD([0]),c),n=a(),c.length!==0&&(i=a(YD([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const p=[];for(;c<r;){n=a();const m=n.slice();p.push(m),c+=n.length}return gh(...p)};return(c,p)=>{o(),l(c);let m;for(;!(m=p(u()));)l();return o(),m}}const vce={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function sm(e,r,t={}){const n=(i,s,o)=>{const a=vce[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const gce=Object.freeze(Object.defineProperty({__proto__:null,bitGet:dce,bitLen:hce,bitMask:v3,bitSet:pce,bytesToHex:Ap,bytesToNumberBE:Cs,bytesToNumberLE:p3,concatBytes:gh,createHmacDrbg:Nz,ensureBytes:ki,equalBytes:cce,hexToBytes:Op,hexToNumber:d3,numberToBytesBE:bc,numberToBytesLE:Pz,numberToHexUnpadded:Cz,numberToVarBytesBE:uce,utf8ToBytes:fce,validateObject:sm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const di=BigInt(0),Tn=BigInt(1),Of=BigInt(2),yce=BigInt(3),kT=BigInt(4),ZD=BigInt(5),XD=BigInt(8);BigInt(9);BigInt(16);function Ii(e,r){const t=e%r;return t>=di?t:r+t}function mce(e,r,t){if(t<=di||r<di)throw new Error("Expected power/modulo > 0");if(t===Tn)return di;let n=Tn;for(;r>di;)r&Tn&&(n=n*e%t),e=e*e%t,r>>=Tn;return n}function So(e,r,t){let n=e;for(;r-- >di;)n*=n,n%=t;return n}function TT(e,r){if(e===di||r<=di)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=Ii(e,r),n=r,i=di,s=Tn;for(;t!==di;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Tn)throw new Error("invert: does not exist");return Ii(i,r)}function bce(e){const r=(e-Tn)/Of;let t,n,i;for(t=e-Tn,n=0;t%Of===di;t/=Of,n++);for(i=Of;i<e&&mce(i,r,e)!==e-Tn;i++);if(n===1){const o=(e+Tn)/kT;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+Tn)/Of;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let b=a.sqr(p);m<u&&!a.eql(b,a.ONE);m++)b=a.sqr(b);const w=a.pow(h,Tn<<BigInt(u-m-1));h=a.sqr(w),c=a.mul(c,w),p=a.mul(p,h),u=m}return c}}function wce(e){if(e%kT===yce){const r=(e+Tn)/kT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%XD===ZD){const r=(e-ZD)/XD;return function(n,i){const s=n.mul(i,Of),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Of),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return bce(e)}const $ce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _ce(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=$ce.reduce((n,i)=>(n[i]="function",n),r);return sm(e,t)}function xce(e,r,t){if(t<di)throw new Error("Expected power > 0");if(t===di)return e.ONE;if(t===Tn)return r;let n=e.ONE,i=r;for(;t>di;)t&Tn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Tn;return n}function Ece(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function g3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Sce(e,r,t=!1,n={}){if(e<=di)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=g3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=wce(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:v3(i),ZERO:di,ONE:Tn,create:l=>Ii(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return di<=l&&l<e},is0:l=>l===di,isOdd:l=>(l&Tn)===Tn,neg:l=>Ii(-l,e),eql:(l,u)=>l===u,sqr:l=>Ii(l*l,e),add:(l,u)=>Ii(l+u,e),sub:(l,u)=>Ii(l-u,e),mul:(l,u)=>Ii(l*u,e),pow:(l,u)=>xce(a,l,u),div:(l,u)=>Ii(l*TT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>TT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Ece(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?Pz(l,s):bc(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?p3(l):Cs(l)}});return Object.freeze(a)}function kce(e,r,t=!1){e=ki("privateHash",e);const n=e.length,i=g3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?p3(e):Cs(e);return Ii(s,r-Tn)+Tn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tce=BigInt(0),Q2=BigInt(1);function Ice(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>Tce;)s&Q2&&(o=o.add(a)),a=a.double(),s>>=Q2;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,h=u;for(let c=0;c<o;c++){h=u,l.push(h);for(let p=1;p<a;p++)h=h.add(u),l.push(h);u=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,h=e.BASE;const c=BigInt(2**i-1),p=2**i,m=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=m,T>l&&(T-=p,o+=Q2);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?h=h.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function Rz(e){return _ce(e.Fp),sm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...g3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ace(e){const r=Rz(e);sm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Oce,hexToBytes:Cce}=gce,Hf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Hf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Oce(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Hf,t=typeof e=="string"?Cce(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Hf._parseInt(t.subarray(2)),{d:o,l:a}=Hf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},zl=BigInt(0),Oo=BigInt(1);BigInt(2);const JD=BigInt(3);BigInt(4);function Pce(e){const r=Ace(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return gh(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&zl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Ap(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:Cs(ki("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=Ii(x,A)),a(x),x}const u=new Map;function h(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(ki("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,JD),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,R=t.mul(A,A),M=t.mul(x,x),U=t.mul(I,I),V=t.mul(A,x);return V=t.add(V,V),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,U),C=t.add(O,C),O=t.sub(M,C),C=t.add(M,C),C=t.mul(O,C),O=t.mul(V,O),g=t.mul(_,g),U=t.mul(b,U),V=t.sub(R,U),V=t.mul(b,V),V=t.add(V,g),g=t.add(R,R),R=t.add(g,R),R=t.add(R,U),R=t.mul(R,V),C=t.add(C,R),U=t.mul(x,I),U=t.add(U,U),R=t.mul(U,V),O=t.sub(O,R),g=t.mul(U,M),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){h(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,R=t.ZERO;const M=r.a,U=t.mul(r.b,JD);let V=t.mul(T,x),ne=t.mul(_,I),re=t.mul(A,O),Q=t.add(T,_),F=t.add(x,I);Q=t.mul(Q,F),F=t.add(V,ne),Q=t.sub(Q,F),F=t.add(T,A);let Z=t.add(x,O);return F=t.mul(F,Z),Z=t.add(V,re),F=t.sub(F,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(ne,re),Z=t.sub(Z,C),R=t.mul(M,F),C=t.mul(U,re),R=t.add(C,R),C=t.sub(ne,R),R=t.add(ne,R),g=t.mul(C,R),ne=t.add(V,V),ne=t.add(ne,V),re=t.mul(M,re),F=t.mul(U,F),ne=t.add(ne,re),re=t.sub(V,re),re=t.mul(M,re),F=t.add(F,re),V=t.mul(ne,F),g=t.add(g,V),V=t.mul(Z,F),C=t.mul(Q,C),C=t.sub(C,V),V=t.mul(Q,ne),R=t.mul(Z,R),R=t.add(R,V),new c(C,g,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return m.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===zl)return T;if(a(b),b===Oo)return this;const{endo:_}=r;if(!_)return m.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,R=this;for(;x>zl||O>zl;)x&Oo&&(C=C.add(R)),O&Oo&&(g=g.add(R)),R=R.double(),x>>=Oo,O>>=Oo;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:R,f:M}=this.wNAF(O),{p:U,f:V}=this.wNAF(g);R=m.constTimeNegate(I,R),U=m.constTimeNegate(C,U),U=new c(t.mul(U.px,x.beta),U.py,U.pz),_=R.add(U),A=M.add(V)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===zl||C===Oo||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Oo)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Oo?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Ap(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const p=r.nBitLength,m=Ice(c,r.endo?Math.ceil(p/2):p);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Nce(e){const r=Rz(e);return sm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Rce(e){const r=Nce(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(F){return zl<F&&F<t.ORDER}function a(F){return Ii(F,n)}function l(F){return TT(F,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:c,isWithinCurveOrder:p}=Pce({...r,toBytes(F,Z,se){const Ee=Z.toAffine(),ye=t.toBytes(Ee.x),Pe=gh;return se?Pe(Uint8Array.from([Z.hasEvenY()?2:3]),ye):Pe(Uint8Array.from([4]),ye,t.toBytes(Ee.y))},fromBytes(F){const Z=F.length,se=F[0],Ee=F.subarray(1);if(Z===i&&(se===2||se===3)){const ye=Cs(Ee);if(!o(ye))throw new Error("Point is not on curve");const Pe=c(ye);let Ue=t.sqrt(Pe);const Ge=(Ue&Oo)===Oo;return(se&1)===1!==Ge&&(Ue=t.neg(Ue)),{x:ye,y:Ue}}else if(Z===s&&se===4){const ye=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:ye,y:Pe}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),m=F=>Ap(bc(F,r.nByteLength));function w(F){const Z=n>>Oo;return F>Z}function b(F){return w(F)?a(-F):F}const T=(F,Z,se)=>Cs(F.slice(Z,se));class _{constructor(Z,se,Ee){this.r=Z,this.s=se,this.recovery=Ee,this.assertValidity()}static fromCompact(Z){const se=r.nByteLength;return Z=ki("compactSignature",Z,se*2),new _(T(Z,0,se),T(Z,se,2*se))}static fromDER(Z){const{r:se,s:Ee}=Hf.toSig(ki("DER",Z));return new _(se,Ee)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:se,s:Ee,recovery:ye}=this,Pe=g(ki("msgHash",Z));if(ye==null||![0,1,2,3].includes(ye))throw new Error("recovery id invalid");const Ue=ye===2||ye===3?se+r.n:se;if(Ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=ye&1?"03":"02",it=u.fromHex(Ge+m(Ue)),_e=l(Ue),pe=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,pe,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Op(this.toDERHex())}toDERHex(){return Hf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Op(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const A={isValidPrivateKey(F){try{return h(F),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const F=r.randomBytes(t.BYTES+8),Z=kce(F,n);return bc(Z,r.nByteLength)},precompute(F=8,Z=u.BASE){return Z._setWindowSize(F),Z.multiply(BigInt(3)),Z}};function x(F,Z=!0){return u.fromPrivateKey(F).toRawBytes(Z)}function I(F){const Z=F instanceof Uint8Array,se=typeof F=="string",Ee=(Z||se)&&F.length;return Z?Ee===i||Ee===s:se?Ee===2*i||Ee===2*s:F instanceof u}function O(F,Z,se=!0){if(I(F))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(h(F)).toRawBytes(se)}const C=r.bits2int||function(F){const Z=Cs(F),se=F.length*8-r.nBitLength;return se>0?Z>>BigInt(se):Z},g=r.bits2int_modN||function(F){return a(C(F))},R=v3(r.nBitLength);function M(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(zl<=F&&F<R))throw new Error(`bigint expected < 2^${r.nBitLength}`);return bc(F,r.nByteLength)}function U(F,Z,se=V){if(["recovered","canonical"].some(S=>S in se))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:ye}=r;let{lowS:Pe,prehash:Ue,extraEntropy:Ge}=se;Pe==null&&(Pe=!0),F=ki("msgHash",F),Ue&&(F=ki("prehashed msgHash",Ee(F)));const it=g(F),_e=h(Z),pe=[M(_e),M(it)];if(Ge!=null){const S=Ge===!0?ye(t.BYTES):Ge;pe.push(ki("extraEntropy",S,t.BYTES))}const Te=gh(...pe),je=it;function $(S){const N=C(S);if(!p(N))return;const L=l(N),j=u.BASE.multiply(N).toAffine(),q=a(j.x);if(q===zl)return;const ae=a(L*a(je+q*_e));if(ae===zl)return;let ve=(j.x===q?0:2)|Number(j.y&Oo),ze=ae;return Pe&&w(ae)&&(ze=b(ae),ve^=1),new _(q,ze,ve)}return{seed:Te,k2sig:$}}const V={lowS:r.lowS,prehash:!1},ne={lowS:r.lowS,prehash:!1};function re(F,Z,se=V){const{seed:Ee,k2sig:ye}=U(F,Z,se),Pe=r;return Nz(Pe.hash.outputLen,Pe.nByteLength,Pe.hmac)(Ee,ye)}u.BASE._setWindowSize(8);function Q(F,Z,se,Ee=ne){var j;const ye=F;if(Z=ki("msgHash",Z),se=ki("publicKey",se),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:Ue}=Ee;let Ge,it;try{if(typeof ye=="string"||ye instanceof Uint8Array)try{Ge=_.fromDER(ye)}catch(q){if(!(q instanceof Hf.Err))throw q;Ge=_.fromCompact(ye)}else if(typeof ye=="object"&&typeof ye.r=="bigint"&&typeof ye.s=="bigint"){const{r:q,s:ae}=ye;Ge=new _(q,ae)}else throw new Error("PARSE");it=u.fromHex(se)}catch(q){if(q.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ge.hasHighS())return!1;Ue&&(Z=r.hash(Z));const{r:_e,s:pe}=Ge,Te=g(Z),je=l(pe),$=a(Te*je),S=a(_e*je),N=(j=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:j.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:Q,ProjectivePoint:u,Signature:_,utils:A}}let Dz=class extends Tz{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,jf.hash(r);const n=f3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return jf.exists(this),this.iHash.update(r),this}digestInto(r){jf.exists(this),jf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Bz=(e,r,t)=>new Dz(e,r).update(t).digest();Bz.create=(e,r)=>new Dz(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dce(e){return{hash:e,hmac:(r,...t)=>Bz(e,r,kz(...t)),randomBytes:h3}}function Bce(e,r){const t=n=>Rce({...e,...Dce(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const i_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Mz=BigInt(1),Ew=BigInt(2),QD=(e,r)=>(e+r/Ew)/r;function Lz(e){const r=i_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,h=u*u*e%r,c=So(h,t,r)*h%r,p=So(c,t,r)*h%r,m=So(p,Ew,r)*u%r,w=So(m,i,r)*m%r,b=So(w,s,r)*w%r,T=So(b,a,r)*b%r,_=So(T,l,r)*T%r,A=So(_,a,r)*b%r,x=So(A,t,r)*h%r,I=So(x,o,r)*w%r,O=So(I,n,r)*u%r,C=So(O,Ew,r);if(!IT.eql(IT.sqr(C),e))throw new Error("Cannot find square root");return C}const IT=Sce(i_,void 0,void 0,{sqrt:Lz}),om=Bce({a:BigInt(0),b:BigInt(7),Fp:IT,n:xw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=xw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Mz*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=QD(s*e,r),l=QD(-n*e,r);let u=Ii(e-a*t-l*i,r),h=Ii(-a*n-l*s,r);const c=u>o,p=h>o;if(c&&(u=r-u),p&&(h=r-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:p,k2:h}}}},Ip),s_=BigInt(0),Fz=e=>typeof e=="bigint"&&s_<e&&e<i_,Mce=e=>typeof e=="bigint"&&s_<e&&e<xw,eB={};function Sw(e,...r){let t=eB[e];if(t===void 0){const n=Ip(Uint8Array.from(e,i=>i.charCodeAt(0)));t=gh(n,n),eB[e]=t}return Ip(gh(t,...r))}const y3=e=>e.toRawBytes(!0).slice(1),AT=e=>bc(e,32),eE=e=>Ii(e,i_),gy=e=>Ii(e,xw),m3=om.ProjectivePoint,Lce=(e,r,t)=>m3.BASE.multiplyAndAddUnsafe(e,r,t);function OT(e){let r=om.utils.normPrivateKeyToScalar(e),t=m3.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:gy(-r),bytes:y3(t)}}function jz(e){if(!Fz(e))throw new Error("bad x: need 0 < x < p");const r=eE(e*e),t=eE(r*e+BigInt(7));let n=Lz(t);n%Ew!==s_&&(n=eE(-n));const i=new m3(e,n,Mz);return i.assertValidity(),i}function Hz(...e){return gy(Cs(Sw("BIP0340/challenge",...e)))}function Fce(e){return OT(e).bytes}function jce(e,r,t=h3(32)){const n=ki("message",e),{bytes:i,scalar:s}=OT(r),o=ki("auxRand",t,32),a=AT(s^Cs(Sw("BIP0340/aux",o))),l=Sw("BIP0340/nonce",a,i,n),u=gy(Cs(l));if(u===s_)throw new Error("sign failed: k is zero");const{bytes:h,scalar:c}=OT(u),p=Hz(h,i,n),m=new Uint8Array(64);if(m.set(h,0),m.set(AT(gy(c+p*s)),32),!zz(m,n,i))throw new Error("sign: Invalid signature produced");return m}function zz(e,r,t){const n=ki("signature",e,64),i=ki("message",r),s=ki("publicKey",t,32);try{const o=jz(Cs(s)),a=Cs(n.subarray(0,32));if(!Fz(a))return!1;const l=Cs(n.subarray(32,64));if(!Mce(l))return!1;const u=Hz(AT(a),y3(o),i),h=Lce(o,l,gy(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}const sv=(()=>({getPublicKey:Fce,sign:jce,verify:zz,utils:{randomPrivateKey:om.utils.randomPrivateKey,lift_x:jz,pointToBytes:y3,numberToBytesBE:bc,bytesToNumberBE:Cs,taggedHash:Sw,mod:Ii}}))();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Ta(...e){const r=(i,s)=>o=>i(s(o)),t=Array.from(e).reverse().reduce((i,s)=>i?r(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?r(i,s.decode):s.decode,void 0);return{encode:t,decode:n}}function hl(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return r.map(t=>{if(Uc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("alphabet.decode input should be array of strings");return r.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})}}}function dl(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of r)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return r.join(e)},decode:r=>{if(typeof r!="string")throw new Error("join.decode input should be string");return r.split(e)}}}function am(e,r="="){if(Uc(e),typeof r!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function Uz(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:r=>r,decode:r=>e(r)}}function tB(e,r,t){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(Uc(o),o<0||o>=r)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let l=n;l<s.length;l++){const u=s[l],h=r*o+u;if(!Number.isSafeInteger(h)||r*o/r!==o||h-u!==r*o)throw new Error("convertRadix: carry overflow");if(o=h%t,s[l]=Math.floor(h/t),!Number.isSafeInteger(s[l])||s[l]*t+o!==h)throw new Error("convertRadix: carry overflow");if(a)s[l]?a=!1:n=l;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const Wz=(e,r)=>r?Wz(r,e%r):e,kw=(e,r)=>e+(r-Wz(e,r));function CT(e,r,t,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(kw(r,t)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${t} carryBits=${kw(r,t)}`);let i=0,s=0;const o=2**t-1,a=[];for(const l of e){if(Uc(l),l>=2**r)throw new Error(`convertRadix2: invalid data word=${l} from=${r}`);if(i=i<<r|l,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=t;s-=t)a.push((i>>s-t&o)>>>0);i&=2**s-1}if(i=i<<t-s&o,!n&&s>=r)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function Kz(e){return Uc(e),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return tB(Array.from(r),2**8,e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(tB(r,e,2**8))}}}function gu(e,r=!1){if(Uc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(kw(8,e)>32||kw(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return CT(Array.from(t),8,e,!r)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(CT(t,e,8,r))}}}function rB(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...r){try{return e.apply(null,r)}catch{}}}function qz(e,r){if(Uc(e),typeof r!="function")throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=r(t).slice(0,e),i=new Uint8Array(t.length+e);return i.set(t),i.set(n,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-e),i=r(n).slice(0,e),s=t.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}const Dg={alphabet:hl,chain:Ta,checksum:qz,radix:Kz,radix2:gu,join:dl,padding:am},Vz=Ta(gu(4),hl("0123456789ABCDEF"),dl("")),Gz=Ta(gu(5),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),am(5),dl("")),Hce=Ta(gu(5),hl("0123456789ABCDEFGHIJKLMNOPQRSTUV"),am(5),dl("")),zce=Ta(gu(5),hl("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),dl(""),Uz(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),zo=Ta(gu(6),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),am(6),dl("")),Yz=Ta(gu(6),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),am(6),dl("")),b3=e=>Ta(Kz(58),hl(e),dl("")),yy=b3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Uce=b3("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Wce=b3("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),nB=[0,2,3,5,6,7,9,10,11],Zz={encode(e){let r="";for(let t=0;t<e.length;t+=8){const n=e.subarray(t,t+8);r+=yy.encode(n).padStart(nB[n.length],"1")}return r},decode(e){let r=[];for(let t=0;t<e.length;t+=11){const n=e.slice(t,t+11),i=nB.indexOf(n.length),s=yy.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},w3=e=>Ta(qz(4,r=>e(e(r))),yy),PT=Ta(hl("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),dl("")),iB=[996825010,642813549,513874426,1027748829,705979059];function _g(e){const r=e>>25;let t=(e&33554431)<<5;for(let n=0;n<iB.length;n++)(r>>n&1)===1&&(t^=iB[n]);return t}function sB(e,r,t=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=_g(i)^o>>5}i=_g(i);for(let s=0;s<n;s++)i=_g(i)^e.charCodeAt(s)&31;for(let s of r)i=_g(i)^s;for(let s=0;s<6;s++)i=_g(i);return i^=t,PT.encode(CT([i%2**30],30,5,!1))}function Xz(e){const r=e==="bech32"?1:734539939,t=gu(5),n=t.decode,i=t.encode,s=rB(n);function o(h,c,p=90){if(typeof h!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof h}`);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof c}`);const m=h.length+7+c.length;if(p!==!1&&m>p)throw new TypeError(`Length ${m} exceeds limit ${p}`);return h=h.toLowerCase(),`${h}1${PT.encode(c)}${sB(h,c,r)}`}function a(h,c=90){if(typeof h!="string")throw new Error(`bech32.decode input should be string, not ${typeof h}`);if(h.length<8||c!==!1&&h.length>c)throw new TypeError(`Wrong string length: ${h.length} (${h}). Expected (8..${c})`);const p=h.toLowerCase();if(h!==p&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");h=p;const m=h.lastIndexOf("1");if(m===0||m===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=h.slice(0,m),b=h.slice(m+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");const T=PT.decode(b).slice(0,-6),_=sB(w,T,r);if(!b.endsWith(_))throw new Error(`Invalid checksum in ${h}: expected "${_}"`);return{prefix:w,words:T}}const l=rB(a);function u(h){const{prefix:c,words:p}=a(h,!1);return{prefix:c,words:p,bytes:n(p)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const Pn=Xz("bech32"),Kce=Xz("bech32m"),Jz={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Qz=Ta(gu(4),hl("0123456789abcdef"),dl(""),Uz(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),my={utf8:Jz,hex:Qz,base16:Vz,base32:Gz,base64:zo,base64url:Yz,base58:yy,base58xmr:Zz},eU=`Invalid encoding type. Available types: ${Object.keys(my).join(", ")}`,tU=(e,r)=>{if(typeof e!="string"||!my.hasOwnProperty(e))throw new TypeError(eU);if(!(r instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return my[e].encode(r)},qce=tU,rU=(e,r)=>{if(!my.hasOwnProperty(e))throw new TypeError(eU);if(typeof r!="string")throw new TypeError("stringToBytes() expects string");return my[e].decode(r)},Vce=rU,Gce=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Uc,base16:Vz,base32:Gz,base32crockford:zce,base32hex:Hce,base58:yy,base58check:w3,base58flickr:Uce,base58xmr:Zz,base58xrp:Wce,base64:zo,base64url:Yz,bech32:Pn,bech32m:Kce,bytes:Vce,bytesToString:tU,hex:Qz,str:qce,stringToBytes:rU,utf8:Jz,utils:Dg},Symbol.toStringTag,{value:"Module"})),nU=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);function NT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Yce(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function iU(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Zce(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");NT(e.outputLen),NT(e.blockLen)}function Xce(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Jce(e,r){iU(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Qs={number:NT,bool:Yce,bytes:iU,hash:Zce,exists:Xce,output:Jce},tE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Wa=(e,r)=>e<<32-r|e>>>r,Qce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Qce)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function efe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function by(e){if(typeof e=="string"&&(e=efe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let sU=class{clone(){return this._cloneInto()}};const tfe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function rfe(e,r){if(r!==void 0&&(typeof r!="object"||!tfe(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function ov(e){const r=n=>e().update(by(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function nfe(e=32){if(tE&&typeof tE.getRandomValues=="function")return tE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let oU=class extends sU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Qs.hash(r);const n=by(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Qs.exists(this),this.iHash.update(r),this}digestInto(r){Qs.exists(this),Qs.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const aU=(e,r,t)=>new oU(e,r).update(t).digest();aU.create=(e,r)=>new oU(e,r);function ife(e,r,t,n){Qs.hash(e);const i=rfe({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Qs.number(s),Qs.number(o),Qs.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=by(r),u=by(t),h=new Uint8Array(o),c=aU.create(e,l),p=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:h,PRF:c,PRFSalt:p}}function sfe(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function ofe(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=ife(e,r,t,n);let u;const h=new Uint8Array(4),c=N1(h),p=new Uint8Array(a.outputLen);for(let m=1,w=0;w<s;m++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,m,!1),(u=l._cloneInto(u)).update(h).digestInto(p),b.set(p.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(p).digestInto(p);for(let _=0;_<b.length;_++)b[_]^=p[_]}}return sfe(a,l,o,u,p)}function afe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let lU=class extends sU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=N1(this.buffer)}update(r){Qs.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=by(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=N1(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Qs.exists(this),Qs.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;afe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=N1(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const lfe=(e,r,t)=>e&r^~e&t,ufe=(e,r,t)=>e&r^e&t^r&t,cfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fu=new Uint32Array(64);let uU=class extends lU{constructor(){super(64,32,8,!1),this.A=Lu[0]|0,this.B=Lu[1]|0,this.C=Lu[2]|0,this.D=Lu[3]|0,this.E=Lu[4]|0,this.F=Lu[5]|0,this.G=Lu[6]|0,this.H=Lu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Fu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Fu[c-15],m=Fu[c-2],w=Wa(p,7)^Wa(p,18)^p>>>3,b=Wa(m,17)^Wa(m,19)^m>>>10;Fu[c]=b+Fu[c-7]+w+Fu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const p=Wa(a,6)^Wa(a,11)^Wa(a,25),m=h+p+lfe(a,l,u)+cfe[c]+Fu[c]|0,b=(Wa(n,2)^Wa(n,13)^Wa(n,22))+ufe(n,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Fu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ffe=class extends uU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const hfe=ov(()=>new uU);ov(()=>new ffe);const hb=BigInt(2**32-1),RT=BigInt(32);function cU(e,r=!1){return r?{h:Number(e&hb),l:Number(e>>RT&hb)}:{h:Number(e>>RT&hb)|0,l:Number(e&hb)|0}}function dfe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=cU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const pfe=(e,r)=>BigInt(e>>>0)<<RT|BigInt(r>>>0),vfe=(e,r,t)=>e>>>t,gfe=(e,r,t)=>e<<32-t|r>>>t,yfe=(e,r,t)=>e>>>t|r<<32-t,mfe=(e,r,t)=>e<<32-t|r>>>t,bfe=(e,r,t)=>e<<64-t|r>>>t-32,wfe=(e,r,t)=>e>>>t-32|r<<64-t,$fe=(e,r)=>r,_fe=(e,r)=>e,xfe=(e,r,t)=>e<<t|r>>>32-t,Efe=(e,r,t)=>r<<t|e>>>32-t,Sfe=(e,r,t)=>r<<t-32|e>>>64-t,kfe=(e,r,t)=>e<<t-32|r>>>64-t;function Tfe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Ife=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Afe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Ofe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Cfe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Pfe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Nfe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,nr={fromBig:cU,split:dfe,toBig:pfe,shrSH:vfe,shrSL:gfe,rotrSH:yfe,rotrSL:mfe,rotrBH:bfe,rotrBL:wfe,rotr32H:$fe,rotr32L:_fe,rotlSH:xfe,rotlSL:Efe,rotlBH:Sfe,rotlBL:kfe,add:Tfe,add3L:Ife,add3H:Afe,add4L:Ofe,add4H:Cfe,add5H:Nfe,add5L:Pfe},[Rfe,Dfe]=nr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ju=new Uint32Array(80),Hu=new Uint32Array(80);let o_=class extends lU{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:c,Fl:p,Gh:m,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,h,c,p,m,w,b,T]}set(r,t,n,i,s,o,a,l,u,h,c,p,m,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=c|0,this.Fl=p|0,this.Gh=m|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)ju[x]=r.getUint32(t),Hu[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=ju[x-15]|0,O=Hu[x-15]|0,C=nr.rotrSH(I,O,1)^nr.rotrSH(I,O,8)^nr.shrSH(I,O,7),g=nr.rotrSL(I,O,1)^nr.rotrSL(I,O,8)^nr.shrSL(I,O,7),R=ju[x-2]|0,M=Hu[x-2]|0,U=nr.rotrSH(R,M,19)^nr.rotrBH(R,M,61)^nr.shrSH(R,M,6),V=nr.rotrSL(R,M,19)^nr.rotrBL(R,M,61)^nr.shrSL(R,M,6),ne=nr.add4L(g,V,Hu[x-7],Hu[x-16]),re=nr.add4H(ne,C,U,ju[x-7],ju[x-16]);ju[x]=re|0,Hu[x]=ne|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:c,El:p,Fh:m,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=nr.rotrSH(c,p,14)^nr.rotrSH(c,p,18)^nr.rotrBH(c,p,41),O=nr.rotrSL(c,p,14)^nr.rotrSL(c,p,18)^nr.rotrBL(c,p,41),C=c&m^~c&b,g=p&w^~p&T,R=nr.add5L(A,O,g,Dfe[x],Hu[x]),M=nr.add5H(R,_,I,C,Rfe[x],ju[x]),U=R|0,V=nr.rotrSH(n,i,28)^nr.rotrBH(n,i,34)^nr.rotrBH(n,i,39),ne=nr.rotrSL(n,i,28)^nr.rotrBL(n,i,34)^nr.rotrBL(n,i,39),re=n&s^n&a^s&a,Q=i&o^i&l^o&l;_=b|0,A=T|0,b=m|0,T=w|0,m=c|0,w=p|0,{h:c,l:p}=nr.add(u|0,h|0,M|0,U|0),u=a|0,h=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const F=nr.add3L(U,ne,Q);n=nr.add3H(F,M,V,re),i=F|0}({h:n,l:i}=nr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=nr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=nr.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=nr.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:c,l:p}=nr.add(this.Eh|0,this.El|0,c|0,p|0),{h:m,l:w}=nr.add(this.Fh|0,this.Fl|0,m|0,w|0),{h:b,l:T}=nr.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=nr.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,h,c,p,m,w,b,T,_,A)}roundClean(){ju.fill(0),Hu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Bfe=class extends o_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Mfe=class extends o_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Lfe=class extends o_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Ffe=ov(()=>new o_);ov(()=>new Bfe);ov(()=>new Mfe);ov(()=>new Lfe);const jfe=e=>e[0]==="";function fU(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function hU(e){const r=fU(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function dU(e){Qs.bytes(e,16,20,24,28,32)}function Hfe(e,r=128){if(Qs.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return Wfe(nfe(r/8),e)}const zfe=e=>{const r=8-e.length/4;return new Uint8Array([hfe(e)[0]>>r<<r])};function pU(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),Dg.chain(Dg.checksum(1,zfe),Dg.radix2(11,!0),Dg.alphabet(e))}function Ufe(e,r){const{words:t}=hU(e),n=pU(r).decode(t);return dU(n),n}function Wfe(e,r){return dU(e),pU(r).encode(e).join(jfe(r)?"":" ")}function Kfe(e,r){try{Ufe(e,r)}catch{return!1}return!0}const qfe=e=>fU(`mnemonic${e}`);function Vfe(e,r=""){return ofe(Ffe,hU(e).nfkd,qfe(r),{c:2048,dkLen:64})}function DT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Gfe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Cf(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Yfe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");DT(e.outputLen),DT(e.blockLen)}function Zfe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Xfe(e,r){Cf(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const zf={number:DT,bool:Gfe,bytes:Cf,hash:Yfe,exists:Zfe,output:Xfe},rE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $3=e=>e instanceof Uint8Array,up=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ka=(e,r)=>e<<32-r|e>>>r,Jfe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Jfe)throw new Error("Non little-endian hardware is not supported");const Qfe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function ehe(e){if(!$3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Qfe[e[t]];return r}function the(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function vU(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function _3(e){if(typeof e=="string"&&(e=vU(e)),!$3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Bg(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!$3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let gU=class{clone(){return this._cloneInto()}};function Rh(e){const r=n=>e().update(_3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function rhe(e=32){if(rE&&typeof rE.getRandomValues=="function")return rE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let yU=class extends gU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,zf.hash(r);const n=_3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return zf.exists(this),this.iHash.update(r),this}digestInto(r){zf.exists(this),zf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Tw=(e,r,t)=>new yU(e,r).update(t).digest();Tw.create=(e,r)=>new yU(e,r);function nhe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let x3=class extends gU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=up(this.buffer)}update(r){zf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=_3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=up(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){zf.exists(this),zf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;nhe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=up(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const ihe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),mU=Uint8Array.from({length:16},(e,r)=>r),she=mU.map(e=>(9*e+5)%16);let E3=[mU],S3=[she];for(let e=0;e<4;e++)for(let r of[E3,S3])r.push(r[e].map(t=>ihe[t]));const bU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),ohe=E3.map((e,r)=>e.map(t=>bU[r][t])),ahe=S3.map((e,r)=>e.map(t=>bU[r][t])),lhe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),uhe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),db=(e,r)=>e<<r|e>>>32-r;function oB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const pb=new Uint32Array(16);let che=class extends x3{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let m=0;m<16;m++,t+=4)pb[m]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,h=u,c=this.h4|0,p=c;for(let m=0;m<5;m++){const w=4-m,b=lhe[m],T=uhe[m],_=E3[m],A=S3[m],x=ohe[m],I=ahe[m];for(let O=0;O<16;O++){const C=db(n+oB(m,s,a,u)+pb[_[O]]+b,x[O])+c|0;n=c,c=u,u=db(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=db(i+oB(w,o,l,h)+pb[A[O]]+T,I[O])+p|0;i=p,p=h,h=db(l,10)|0,l=o,o=C}}this.set(this.h1+a+h|0,this.h2+u+p|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){pb.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const fhe=Rh(()=>new che),hhe=(e,r,t)=>e&r^~e&t,dhe=(e,r,t)=>e&r^e&t^r&t,phe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Uu=new Uint32Array(64);let wU=class extends x3{constructor(){super(64,32,8,!1),this.A=zu[0]|0,this.B=zu[1]|0,this.C=zu[2]|0,this.D=zu[3]|0,this.E=zu[4]|0,this.F=zu[5]|0,this.G=zu[6]|0,this.H=zu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Uu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Uu[c-15],m=Uu[c-2],w=Ka(p,7)^Ka(p,18)^p>>>3,b=Ka(m,17)^Ka(m,19)^m>>>10;Uu[c]=b+Uu[c-7]+w+Uu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const p=Ka(a,6)^Ka(a,11)^Ka(a,25),m=h+p+hhe(a,l,u)+phe[c]+Uu[c]|0,b=(Ka(n,2)^Ka(n,13)^Ka(n,22))+dhe(n,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Uu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},vhe=class extends wU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const k3=Rh(()=>new wU);Rh(()=>new vhe);const vb=BigInt(2**32-1),BT=BigInt(32);function $U(e,r=!1){return r?{h:Number(e&vb),l:Number(e>>BT&vb)}:{h:Number(e>>BT&vb)|0,l:Number(e&vb)|0}}function ghe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=$U(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const yhe=(e,r)=>BigInt(e>>>0)<<BT|BigInt(r>>>0),mhe=(e,r,t)=>e>>>t,bhe=(e,r,t)=>e<<32-t|r>>>t,whe=(e,r,t)=>e>>>t|r<<32-t,$he=(e,r,t)=>e<<32-t|r>>>t,_he=(e,r,t)=>e<<64-t|r>>>t-32,xhe=(e,r,t)=>e>>>t-32|r<<64-t,Ehe=(e,r)=>r,She=(e,r)=>e,khe=(e,r,t)=>e<<t|r>>>32-t,The=(e,r,t)=>r<<t|e>>>32-t,Ihe=(e,r,t)=>r<<t-32|e>>>64-t,Ahe=(e,r,t)=>e<<t-32|r>>>64-t;function Ohe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Che=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Phe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Nhe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Rhe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Dhe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Bhe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,ir={fromBig:$U,split:ghe,toBig:yhe,shrSH:mhe,shrSL:bhe,rotrSH:whe,rotrSL:$he,rotrBH:_he,rotrBL:xhe,rotr32H:Ehe,rotr32L:She,rotlSH:khe,rotlSL:The,rotlBH:Ihe,rotlBL:Ahe,add:Ohe,add3L:Che,add3H:Phe,add4L:Nhe,add4H:Rhe,add5H:Bhe,add5L:Dhe},[Mhe,Lhe]=ir.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Wu=new Uint32Array(80),Ku=new Uint32Array(80);let a_=class extends x3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:c,Fl:p,Gh:m,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,h,c,p,m,w,b,T]}set(r,t,n,i,s,o,a,l,u,h,c,p,m,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=c|0,this.Fl=p|0,this.Gh=m|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Wu[x]=r.getUint32(t),Ku[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Wu[x-15]|0,O=Ku[x-15]|0,C=ir.rotrSH(I,O,1)^ir.rotrSH(I,O,8)^ir.shrSH(I,O,7),g=ir.rotrSL(I,O,1)^ir.rotrSL(I,O,8)^ir.shrSL(I,O,7),R=Wu[x-2]|0,M=Ku[x-2]|0,U=ir.rotrSH(R,M,19)^ir.rotrBH(R,M,61)^ir.shrSH(R,M,6),V=ir.rotrSL(R,M,19)^ir.rotrBL(R,M,61)^ir.shrSL(R,M,6),ne=ir.add4L(g,V,Ku[x-7],Ku[x-16]),re=ir.add4H(ne,C,U,Wu[x-7],Wu[x-16]);Wu[x]=re|0,Ku[x]=ne|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:c,El:p,Fh:m,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=ir.rotrSH(c,p,14)^ir.rotrSH(c,p,18)^ir.rotrBH(c,p,41),O=ir.rotrSL(c,p,14)^ir.rotrSL(c,p,18)^ir.rotrBL(c,p,41),C=c&m^~c&b,g=p&w^~p&T,R=ir.add5L(A,O,g,Lhe[x],Ku[x]),M=ir.add5H(R,_,I,C,Mhe[x],Wu[x]),U=R|0,V=ir.rotrSH(n,i,28)^ir.rotrBH(n,i,34)^ir.rotrBH(n,i,39),ne=ir.rotrSL(n,i,28)^ir.rotrBL(n,i,34)^ir.rotrBL(n,i,39),re=n&s^n&a^s&a,Q=i&o^i&l^o&l;_=b|0,A=T|0,b=m|0,T=w|0,m=c|0,w=p|0,{h:c,l:p}=ir.add(u|0,h|0,M|0,U|0),u=a|0,h=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const F=ir.add3L(U,ne,Q);n=ir.add3H(F,M,V,re),i=F|0}({h:n,l:i}=ir.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ir.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ir.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=ir.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:c,l:p}=ir.add(this.Eh|0,this.El|0,c|0,p|0),{h:m,l:w}=ir.add(this.Fh|0,this.Fl|0,m|0,w|0),{h:b,l:T}=ir.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=ir.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,h,c,p,m,w,b,T,_,A)}roundClean(){Wu.fill(0),Ku.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Fhe=class extends a_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},jhe=class extends a_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Hhe=class extends a_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const aB=Rh(()=>new a_);Rh(()=>new Fhe);Rh(()=>new jhe);Rh(()=>new Hhe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _U=BigInt(0),l_=BigInt(1),zhe=BigInt(2),u_=e=>e instanceof Uint8Array,Uhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Cp(e){if(!u_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Uhe[e[t]];return r}function xU(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function T3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Pp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Qf(e){return T3(Cp(e))}function I3(e){if(!u_(e))throw new Error("Uint8Array expected");return T3(Cp(Uint8Array.from(e).reverse()))}function cp(e,r){return Pp(e.toString(16).padStart(r*2,"0"))}function EU(e,r){return cp(e,r).reverse()}function Whe(e){return Pp(xU(e))}function Co(e,r,t){let n;if(typeof r=="string")try{n=Pp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(u_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function wy(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!u_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Khe(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function qhe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Vhe(e){let r;for(r=0;e>_U;e>>=l_,r+=1);return r}function Ghe(e,r){return e>>BigInt(r)&l_}const Yhe=(e,r,t)=>e|(t?l_:_U)<<BigInt(r),A3=e=>(zhe<<BigInt(e-1))-l_,nE=e=>new Uint8Array(e),lB=e=>Uint8Array.from(e);function SU(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=nE(e),i=nE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=nE())=>{i=a(lB([0]),c),n=a(),c.length!==0&&(i=a(lB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const p=[];for(;c<r;){n=a();const m=n.slice();p.push(m),c+=n.length}return wy(...p)};return(c,p)=>{o(),l(c);let m;for(;!(m=p(u()));)l();return o(),m}}const Zhe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function lm(e,r,t={}){const n=(i,s,o)=>{const a=Zhe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Xhe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Ghe,bitLen:Vhe,bitMask:A3,bitSet:Yhe,bytesToHex:Cp,bytesToNumberBE:Qf,bytesToNumberLE:I3,concatBytes:wy,createHmacDrbg:SU,ensureBytes:Co,equalBytes:Khe,hexToBytes:Pp,hexToNumber:T3,numberToBytesBE:cp,numberToBytesLE:EU,numberToHexUnpadded:xU,numberToVarBytesBE:Whe,utf8ToBytes:qhe,validateObject:lm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pi=BigInt(0),In=BigInt(1),Pf=BigInt(2),Jhe=BigInt(3),MT=BigInt(4),uB=BigInt(5),cB=BigInt(8);BigInt(9);BigInt(16);function rs(e,r){const t=e%r;return t>=pi?t:r+t}function Qhe(e,r,t){if(t<=pi||r<pi)throw new Error("Expected power/modulo > 0");if(t===In)return pi;let n=In;for(;r>pi;)r&In&&(n=n*e%t),e=e*e%t,r>>=In;return n}function ko(e,r,t){let n=e;for(;r-- >pi;)n*=n,n%=t;return n}function LT(e,r){if(e===pi||r<=pi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=rs(e,r),n=r,i=pi,s=In;for(;t!==pi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==In)throw new Error("invert: does not exist");return rs(i,r)}function ede(e){const r=(e-In)/Pf;let t,n,i;for(t=e-In,n=0;t%Pf===pi;t/=Pf,n++);for(i=Pf;i<e&&Qhe(i,r,e)!==e-In;i++);if(n===1){const o=(e+In)/MT;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+In)/Pf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let b=a.sqr(p);m<u&&!a.eql(b,a.ONE);m++)b=a.sqr(b);const w=a.pow(h,In<<BigInt(u-m-1));h=a.sqr(w),c=a.mul(c,w),p=a.mul(p,h),u=m}return c}}function tde(e){if(e%MT===Jhe){const r=(e+In)/MT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%cB===uB){const r=(e-uB)/cB;return function(n,i){const s=n.mul(i,Pf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Pf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return ede(e)}const rde=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nde(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=rde.reduce((n,i)=>(n[i]="function",n),r);return lm(e,t)}function ide(e,r,t){if(t<pi)throw new Error("Expected power > 0");if(t===pi)return e.ONE;if(t===In)return r;let n=e.ONE,i=r;for(;t>pi;)t&In&&(n=e.mul(n,i)),i=e.sqr(i),t>>=In;return n}function sde(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function O3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function ode(e,r,t=!1,n={}){if(e<=pi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=O3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=tde(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:A3(i),ZERO:pi,ONE:In,create:l=>rs(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return pi<=l&&l<e},is0:l=>l===pi,isOdd:l=>(l&In)===In,neg:l=>rs(-l,e),eql:(l,u)=>l===u,sqr:l=>rs(l*l,e),add:(l,u)=>rs(l+u,e),sub:(l,u)=>rs(l-u,e),mul:(l,u)=>rs(l*u,e),pow:(l,u)=>ide(a,l,u),div:(l,u)=>rs(l*LT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>LT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>sde(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?EU(l,s):cp(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?I3(l):Qf(l)}});return Object.freeze(a)}function ade(e,r,t=!1){e=Co("privateHash",e);const n=e.length,i=O3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?I3(e):Qf(e);return rs(s,r-In)+In}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lde=BigInt(0),iE=BigInt(1);function ude(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>lde;)s&iE&&(o=o.add(a)),a=a.double(),s>>=iE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,h=u;for(let c=0;c<o;c++){h=u,l.push(h);for(let p=1;p<a;p++)h=h.add(u),l.push(h);u=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,h=e.BASE;const c=BigInt(2**i-1),p=2**i,m=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=m,T>l&&(T-=p,o+=iE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?h=h.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function kU(e){return nde(e.Fp),lm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...O3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cde(e){const r=kU(e);lm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:fde,hexToBytes:hde}=Xhe,Uf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Uf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:fde(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Uf,t=typeof e=="string"?hde(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Uf._parseInt(t.subarray(2)),{d:o,l:a}=Uf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Ul=BigInt(0),Po=BigInt(1);BigInt(2);const fB=BigInt(3);BigInt(4);function dde(e){const r=cde(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return wy(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Ul<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Cp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:Qf(Co("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=rs(x,A)),a(x),x}const u=new Map;function h(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Co("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,fB),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,R=t.mul(A,A),M=t.mul(x,x),U=t.mul(I,I),V=t.mul(A,x);return V=t.add(V,V),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,U),C=t.add(O,C),O=t.sub(M,C),C=t.add(M,C),C=t.mul(O,C),O=t.mul(V,O),g=t.mul(_,g),U=t.mul(b,U),V=t.sub(R,U),V=t.mul(b,V),V=t.add(V,g),g=t.add(R,R),R=t.add(g,R),R=t.add(R,U),R=t.mul(R,V),C=t.add(C,R),U=t.mul(x,I),U=t.add(U,U),R=t.mul(U,V),O=t.sub(O,R),g=t.mul(U,M),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){h(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,R=t.ZERO;const M=r.a,U=t.mul(r.b,fB);let V=t.mul(T,x),ne=t.mul(_,I),re=t.mul(A,O),Q=t.add(T,_),F=t.add(x,I);Q=t.mul(Q,F),F=t.add(V,ne),Q=t.sub(Q,F),F=t.add(T,A);let Z=t.add(x,O);return F=t.mul(F,Z),Z=t.add(V,re),F=t.sub(F,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(ne,re),Z=t.sub(Z,C),R=t.mul(M,F),C=t.mul(U,re),R=t.add(C,R),C=t.sub(ne,R),R=t.add(ne,R),g=t.mul(C,R),ne=t.add(V,V),ne=t.add(ne,V),re=t.mul(M,re),F=t.mul(U,F),ne=t.add(ne,re),re=t.sub(V,re),re=t.mul(M,re),F=t.add(F,re),V=t.mul(ne,F),g=t.add(g,V),V=t.mul(Z,F),C=t.mul(Q,C),C=t.sub(C,V),V=t.mul(Q,ne),R=t.mul(Z,R),R=t.add(R,V),new c(C,g,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return m.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Ul)return T;if(a(b),b===Po)return this;const{endo:_}=r;if(!_)return m.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,R=this;for(;x>Ul||O>Ul;)x&Po&&(C=C.add(R)),O&Po&&(g=g.add(R)),R=R.double(),x>>=Po,O>>=Po;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:R,f:M}=this.wNAF(O),{p:U,f:V}=this.wNAF(g);R=m.constTimeNegate(I,R),U=m.constTimeNegate(C,U),U=new c(t.mul(U.px,x.beta),U.py,U.pz),_=R.add(U),A=M.add(V)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Ul||C===Po||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Po)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Po?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Cp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const p=r.nBitLength,m=ude(c,r.endo?Math.ceil(p/2):p);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function pde(e){const r=kU(e);return lm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function vde(e){const r=pde(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(F){return Ul<F&&F<t.ORDER}function a(F){return rs(F,n)}function l(F){return LT(F,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:c,isWithinCurveOrder:p}=dde({...r,toBytes(F,Z,se){const Ee=Z.toAffine(),ye=t.toBytes(Ee.x),Pe=wy;return se?Pe(Uint8Array.from([Z.hasEvenY()?2:3]),ye):Pe(Uint8Array.from([4]),ye,t.toBytes(Ee.y))},fromBytes(F){const Z=F.length,se=F[0],Ee=F.subarray(1);if(Z===i&&(se===2||se===3)){const ye=Qf(Ee);if(!o(ye))throw new Error("Point is not on curve");const Pe=c(ye);let Ue=t.sqrt(Pe);const Ge=(Ue&Po)===Po;return(se&1)===1!==Ge&&(Ue=t.neg(Ue)),{x:ye,y:Ue}}else if(Z===s&&se===4){const ye=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:ye,y:Pe}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),m=F=>Cp(cp(F,r.nByteLength));function w(F){const Z=n>>Po;return F>Z}function b(F){return w(F)?a(-F):F}const T=(F,Z,se)=>Qf(F.slice(Z,se));class _{constructor(Z,se,Ee){this.r=Z,this.s=se,this.recovery=Ee,this.assertValidity()}static fromCompact(Z){const se=r.nByteLength;return Z=Co("compactSignature",Z,se*2),new _(T(Z,0,se),T(Z,se,2*se))}static fromDER(Z){const{r:se,s:Ee}=Uf.toSig(Co("DER",Z));return new _(se,Ee)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:se,s:Ee,recovery:ye}=this,Pe=g(Co("msgHash",Z));if(ye==null||![0,1,2,3].includes(ye))throw new Error("recovery id invalid");const Ue=ye===2||ye===3?se+r.n:se;if(Ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=ye&1?"03":"02",it=u.fromHex(Ge+m(Ue)),_e=l(Ue),pe=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,pe,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Pp(this.toDERHex())}toDERHex(){return Uf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Pp(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const A={isValidPrivateKey(F){try{return h(F),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const F=r.randomBytes(t.BYTES+8),Z=ade(F,n);return cp(Z,r.nByteLength)},precompute(F=8,Z=u.BASE){return Z._setWindowSize(F),Z.multiply(BigInt(3)),Z}};function x(F,Z=!0){return u.fromPrivateKey(F).toRawBytes(Z)}function I(F){const Z=F instanceof Uint8Array,se=typeof F=="string",Ee=(Z||se)&&F.length;return Z?Ee===i||Ee===s:se?Ee===2*i||Ee===2*s:F instanceof u}function O(F,Z,se=!0){if(I(F))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(h(F)).toRawBytes(se)}const C=r.bits2int||function(F){const Z=Qf(F),se=F.length*8-r.nBitLength;return se>0?Z>>BigInt(se):Z},g=r.bits2int_modN||function(F){return a(C(F))},R=A3(r.nBitLength);function M(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(Ul<=F&&F<R))throw new Error(`bigint expected < 2^${r.nBitLength}`);return cp(F,r.nByteLength)}function U(F,Z,se=V){if(["recovered","canonical"].some(S=>S in se))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:ye}=r;let{lowS:Pe,prehash:Ue,extraEntropy:Ge}=se;Pe==null&&(Pe=!0),F=Co("msgHash",F),Ue&&(F=Co("prehashed msgHash",Ee(F)));const it=g(F),_e=h(Z),pe=[M(_e),M(it)];if(Ge!=null){const S=Ge===!0?ye(t.BYTES):Ge;pe.push(Co("extraEntropy",S,t.BYTES))}const Te=wy(...pe),je=it;function $(S){const N=C(S);if(!p(N))return;const L=l(N),j=u.BASE.multiply(N).toAffine(),q=a(j.x);if(q===Ul)return;const ae=a(L*a(je+q*_e));if(ae===Ul)return;let ve=(j.x===q?0:2)|Number(j.y&Po),ze=ae;return Pe&&w(ae)&&(ze=b(ae),ve^=1),new _(q,ze,ve)}return{seed:Te,k2sig:$}}const V={lowS:r.lowS,prehash:!1},ne={lowS:r.lowS,prehash:!1};function re(F,Z,se=V){const{seed:Ee,k2sig:ye}=U(F,Z,se),Pe=r;return SU(Pe.hash.outputLen,Pe.nByteLength,Pe.hmac)(Ee,ye)}u.BASE._setWindowSize(8);function Q(F,Z,se,Ee=ne){var j;const ye=F;if(Z=Co("msgHash",Z),se=Co("publicKey",se),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:Ue}=Ee;let Ge,it;try{if(typeof ye=="string"||ye instanceof Uint8Array)try{Ge=_.fromDER(ye)}catch(q){if(!(q instanceof Uf.Err))throw q;Ge=_.fromCompact(ye)}else if(typeof ye=="object"&&typeof ye.r=="bigint"&&typeof ye.s=="bigint"){const{r:q,s:ae}=ye;Ge=new _(q,ae)}else throw new Error("PARSE");it=u.fromHex(se)}catch(q){if(q.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ge.hasHighS())return!1;Ue&&(Z=r.hash(Z));const{r:_e,s:pe}=Ge,Te=g(Z),je=l(pe),$=a(Te*je),S=a(_e*je),N=(j=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:j.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:Q,ProjectivePoint:u,Signature:_,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gde(e){return{hash:e,hmac:(r,...t)=>Tw(e,r,Bg(...t)),randomBytes:rhe}}function yde(e,r){const t=n=>vde({...e,...gde(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),hB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mde=BigInt(1),FT=BigInt(2),dB=(e,r)=>(e+r/FT)/r;function bde(e){const r=TU,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,h=u*u*e%r,c=ko(h,t,r)*h%r,p=ko(c,t,r)*h%r,m=ko(p,FT,r)*u%r,w=ko(m,i,r)*m%r,b=ko(w,s,r)*w%r,T=ko(b,a,r)*b%r,_=ko(T,l,r)*T%r,A=ko(_,a,r)*b%r,x=ko(A,t,r)*h%r,I=ko(x,o,r)*w%r,O=ko(I,n,r)*u%r,C=ko(O,FT,r);if(!jT.eql(jT.sqr(C),e))throw new Error("Cannot find square root");return C}const jT=ode(TU,void 0,void 0,{sqrt:bde}),Xa=yde({a:BigInt(0),b:BigInt(7),Fp:jT,n:hB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=hB,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-mde*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=dB(s*e,r),l=dB(-n*e,r);let u=rs(e-a*t-l*i,r),h=rs(-a*n-l*s,r);const c=u>o,p=h>o;if(c&&(u=r-u),p&&(h=r-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:p,k2:h}}}},k3);BigInt(0);Xa.ProjectivePoint;const gb=Xa.ProjectivePoint,sE=w3(k3);function pB(e){return BigInt(`0x${ehe(e)}`)}function wde(e){return the(e.toString(16).padStart(64,"0"))}const $de=vU("Bitcoin seed"),oE={private:76066276,public:76067358},aE=2147483648,_de=e=>fhe(k3(e)),xde=e=>up(e).getUint32(0,!1),yb=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return up(r).setUint32(0,e,!1),r};let Ede=class Fd{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return xde(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return sE.encode(this.serialize(this.versions.private,Bg(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return sE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=oE){if(Cf(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=Tw(aB,$de,r);return new Fd({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=oE){const n=sE.decode(r),i=up(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Fd({...o,privateKey:a.slice(1)}):new Fd({...o,publicKey:a})}static fromJSON(r){return Fd.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||oE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!Xa.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:pB(r.privateKey),this.privKeyBytes=wde(this.privKey),this.pubKey=Xa.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=gb.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=_de(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=aE)throw new Error("Invalid index");s[2]==="'"&&(o+=aE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=yb(r);if(r>=aE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Bg(new Uint8Array([0]),a,t)}else t=Bg(this.pubKey,t);const n=Tw(aB,this.chainCode,t),i=pB(n.slice(0,32)),s=n.slice(32);if(!Xa.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=rs(this.privKey+i,Xa.CURVE.n);if(!Xa.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=gb.fromHex(this.pubKey).add(gb.fromPrivateKey(i));if(a.equals(gb.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Fd(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Cf(r,32),Xa.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Cf(r,32),Cf(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Xa.Signature.fromCompact(t)}catch{return!1}return Xa.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Cf(t,33),Bg(yb(r),new Uint8Array([this.depth]),yb(this.parentFingerprint),yb(this.index),this.chainCode,t)}};var Sde=Object.defineProperty,Ci=(e,r)=>{for(var t in r)Sde(e,t,{get:r[t],enumerable:!0})};function C3(){return Do(sv.utils.randomPrivateKey())}function yh(e){return Do(sv.getPublicKey(e))}var kde={};Ci(kde,{MessageNode:()=>IU,MessageQueue:()=>Ode,insertEventIntoAscendingList:()=>Ade,insertEventIntoDescendingList:()=>Ide,normalizeURL:()=>Tde,utf8Decoder:()=>Wl,utf8Encoder:()=>_a});var Wl=new TextDecoder("utf-8"),_a=new TextEncoder;function Tde(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Ide(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Ade(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var IU=class{constructor(e){le(this,"_value");le(this,"_next");this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},Ode=class{constructor(){le(this,"_first");le(this,"_last");le(this,"_size");this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const r=new IU(e);return this._size===0||!this._last?(this._first=r,this._last=r):(this._last.next=r,this._last=r),this._size++,!0}dequeue(){if(this._size===0||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function Cde(e=255){return{kind:e,content:"",tags:[],created_at:0}}function AU(e,r){let t=e;return t.pubkey=yh(r),t.id=Ic(t),t.sig=c_(t,r),t}function Pde(e){if(!$y(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Ic(e){let r=Ip(_a.encode(Pde(e)));return Do(r)}var Nde=e=>e instanceof Object;function $y(e){if(!Nde(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function Np(e){try{return sv.verify(e.sig,Ic(e),e.pubkey)}catch{return!1}}function OU(e,r){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),c_(e,r)}function c_(e,r){return Do(sv.sign(Ic(e),r))}function P3(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>e.until)}var Rde={};Ci(Rde,{getHex64:()=>N3,getInt:()=>CU,getSubscriptionId:()=>Dde,matchEventId:()=>Bde,matchEventKind:()=>Lde,matchEventPubkey:()=>Mde});function N3(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function CU(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Dde(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Bde(e,r){return r===N3(e,"id")}function Mde(e,r){return r===N3(e,"pubkey")}function Lde(e,r){return r===CU(e,"kind")}var lu={};Ci(lu,{BECH32_REGEX:()=>NU,decode:()=>f_,naddrEncode:()=>Wde,neventEncode:()=>Ude,noteEncode:()=>Hde,nprofileEncode:()=>zde,npubEncode:()=>jde,nrelayEncode:()=>Kde,nsecEncode:()=>Fde});var PU=5e3,NU=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function f_(e){var i,s,o,a,l,u,h;let{prefix:r,words:t}=Pn.decode(e,PU),n=new Uint8Array(Pn.fromWords(t));switch(r){case"nprofile":{let c=mb(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Do(c[0][0]),relays:c[1]?c[1].map(p=>Wl.decode(p)):[]}}}case"nevent":{let c=mb(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Do(c[0][0]),relays:c[1]?c[1].map(p=>Wl.decode(p)):[],author:(o=c[2])!=null&&o[0]?Do(c[2][0]):void 0}}}case"naddr":{let c=mb(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Wl.decode(c[0][0]),pubkey:Do(c[2][0]),kind:parseInt(Do(c[3][0]),16),relays:c[1]?c[1].map(p=>Wl.decode(p)):[]}}}case"nrelay":{let c=mb(n);if(!((h=c[0])!=null&&h[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Wl.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Do(n)};default:throw new Error(`unknown prefix ${r}`)}}function mb(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1];if(!i)throw new Error(`malformed TLV ${n}`);let s=t.slice(2,2+i);if(t=t.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${n}`);r[n]=r[n]||[],r[n].push(s)}return r}function Fde(e){return R3("nsec",e)}function jde(e){return R3("npub",e)}function Hde(e){return R3("note",e)}function um(e,r){let t=Pn.toWords(r);return Pn.encode(e,t,PU)}function R3(e,r){let t=Tp(r);return um(e,t)}function zde(e){let r=h_({0:[Tp(e.pubkey)],1:(e.relays||[]).map(t=>_a.encode(t))});return um("nprofile",r)}function Ude(e){let r=h_({0:[Tp(e.id)],1:(e.relays||[]).map(t=>_a.encode(t)),2:e.author?[Tp(e.author)]:[]});return um("nevent",r)}function Wde(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=h_({0:[_a.encode(e.identifier)],1:(e.relays||[]).map(n=>_a.encode(n)),2:[Tp(e.pubkey)],3:[new Uint8Array(r)]});return um("naddr",t)}function Kde(e){let r=h_({0:[_a.encode(e)]});return um("nrelay",r)}function h_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),kz(...r)}var mh={};Ci(mh,{decrypt:()=>Vde,encrypt:()=>qde});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function qde(e,r,t){const n=om.getSharedSecret(e,"02"+r),i=RU(n);let s=Uint8Array.from(h3(16)),o=_a.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=zo.encode(new Uint8Array(l)),h=zo.encode(new Uint8Array(s.buffer));return`${u}?iv=${h}`}async function Vde(e,r,t){let[n,i]=t.split("?iv="),s=om.getSharedSecret(e,"02"+r),o=RU(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=zo.decode(n),u=zo.decode(i),h=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return Wl.decode(h)}function RU(e){return e.slice(1,33)}var Gde={};Ci(Gde,{NIP05_REGEX:()=>DU,queryProfile:()=>Xde,searchDomain:()=>Zde,useFetchImplementation:()=>Yde});var DU=/^(?:([\w.+-]+)@)?([\w.-]+)$/,d_;try{d_=fetch}catch{}function Yde(e){d_=e}async function Zde(e,r=""){try{return(await(await d_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function Xde(e){const r=e.match(DU);if(!r)return null;const[t,n="_",i]=r;try{const s=await d_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=Jde(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function Jde(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var Qde={};Ci(Qde,{generateSeedWords:()=>tpe,privateKeyFromSeedWords:()=>epe,validateWords:()=>rpe});function epe(e,r){let n=Ede.fromMasterSeed(Vfe(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Do(n)}function tpe(){return Hfe(nU)}function rpe(e){return Kfe(e,nU)}var npe={};Ci(npe,{parse:()=>ipe});function ipe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},h=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(h){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var spe={};Ci(spe,{getPow:()=>ope});function ope(e){return ape(Tp(e))}function ape(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=lpe(e[t]),r+=n,n===8);t++);return r}function lpe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var upe={};Ci(upe,{finishRepostEvent:()=>cpe,getRepostedEvent:()=>fpe,getRepostedEventPointer:()=>BU});function cpe(e,r,t,n){return AU({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function BU(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function fpe(e,{skipVerification:r}={}){const t=BU(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!Np(n)))return n}var hpe={};Ci(hpe,{NOSTR_URI_REGEX:()=>p_,parse:()=>ppe,test:()=>dpe});var p_=new RegExp(`nostr:(${NU.source})`);function dpe(e){return typeof e=="string"&&new RegExp(`^${p_.source}$`).test(e)}function ppe(e){const r=e.match(new RegExp(`^${p_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:f_(r[1])}}var vpe={};Ci(vpe,{finishReactionEvent:()=>gpe,getReactedEventPointer:()=>ype});function gpe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return AU({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function ype(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var mpe={};Ci(mpe,{createDelegation:()=>bpe,getDelegator:()=>wpe});function bpe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=Ip(_a.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Do(sv.sign(i,e));return{from:yh(e),to:r.pubkey,cond:n,sig:s}}function wpe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,h]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(h))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(h))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(h))continue;return null}}let o=Ip(_a.encode(`nostr:delegation:${e.pubkey}:${n}`));return sv.verify(i,o,t)?t:null}var $pe={};Ci($pe,{matchAll:()=>_pe,regex:()=>D3,replaceAll:()=>xpe});var D3=()=>new RegExp(`\\b${p_.source}\\b`,"g");function*_pe(e){const r=e.matchAll(D3());for(const t of r)try{const[n,i]=t;yield{uri:n,value:i,decoded:f_(i),start:t.index,end:t.index+n.length}}catch{}}function xpe(e,r){return e.replaceAll(D3(),(t,n)=>r({uri:t,value:n,decoded:f_(n)}))}var Epe={};Ci(Epe,{useFetchImplementation:()=>Spe,validateGithub:()=>kpe});var B3;try{B3=fetch}catch{}function Spe(e){B3=e}async function kpe(e,r,t){try{return await(await B3(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var MU={};Ci(MU,{authenticate:()=>Tpe});var Tpe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Ipe={};Ci(Ipe,{getZapEndpoint:()=>Ope,makeZapReceipt:()=>Npe,makeZapRequest:()=>Cpe,useFetchImplementation:()=>Ape,validateZapRequest:()=>Ppe});var M3;try{M3=fetch}catch{}function Ape(e){M3=e}async function Ope(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Pn.decode(t,1e3),a=Pn.fromWords(o);r=Wl.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await M3(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Cpe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Ppe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!$y(r))return"Zap request is not a valid Nostr event.";if(!Np(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Npe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Rpe={};Ci(Rpe,{getToken:()=>Dpe,validateToken:()=>Bpe});var LU="Nostr ";async function Dpe(e,r,t,n=!1){if(!e||!r)throw new Error("Missing loginUrl or httpMethod");if(r!=="get"&&r!=="post")throw new Error("Unknown httpMethod");const i=Cde(27235);i.tags=[["u",e],["method",r]],i.created_at=Math.round(new Date().getTime()/1e3);const s=await t(i);return(n?LU:"")+zo.encode(_a.encode(JSON.stringify(s)))}async function Bpe(e,r,t){if(!e)throw new Error("Missing token");e=e.replace(LU,"");const n=Wl.decode(zo.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");const i=JSON.parse(n);if(!i)throw new Error("Invalid nostr event");if(!Np(i))throw new Error("Invalid nostr event, signature invalid");if(i.kind!==27235)throw new Error("Invalid nostr event, kind invalid");if(!i.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round(new Date().getTime()/1e3)-i.created_at>60)throw new Error("Invalid nostr event, expired");const s=i.tags.find(a=>a[0]==="u");if((s==null?void 0:s.length)!==1&&(s==null?void 0:s[1])!==r)throw new Error("Invalid nostr event, url tag invalid");const o=i.tags.find(a=>a[0]==="method");if((o==null?void 0:o.length)!==1&&(o==null?void 0:o[1].toLowerCase())!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var _y={};Object.defineProperty(_y,"__esModule",{value:!0});_y.bech32m=HT=_y.bech32=void 0;const Iw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",FU={};for(let e=0;e<Iw.length;e++){const r=Iw.charAt(e);FU[r]=e}function fp(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function vB(e){let r=1;for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=fp(r)^n>>5}r=fp(r);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r=fp(r)^n&31}return r}function L3(e,r,t,n){let i=0,s=0;const o=(1<<t)-1,a=[];for(let l=0;l<e.length;++l)for(i=i<<r|e[l],s+=r;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=r)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function Mpe(e){return L3(e,8,5,!0)}function Lpe(e){const r=L3(e,5,8,!1);if(Array.isArray(r))return r}function Fpe(e){const r=L3(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function jU(e){let r;e==="bech32"?r=1:r=734539939;function t(o,a,l){if(l=l||90,o.length+7+a.length>l)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let u=vB(o);if(typeof u=="string")throw new Error(u);let h=o+"1";for(let c=0;c<a.length;++c){const p=a[c];if(p>>5)throw new Error("Non 5-bit word");u=fp(u)^p,h+=Iw.charAt(p)}for(let c=0;c<6;++c)u=fp(u);u^=r;for(let c=0;c<6;++c){const p=u>>(5-c)*5&31;h+=Iw.charAt(p)}return h}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const l=o.toLowerCase(),u=o.toUpperCase();if(o!==l&&o!==u)return"Mixed-case string "+o;o=l;const h=o.lastIndexOf("1");if(h===-1)return"No separator character for "+o;if(h===0)return"Missing prefix for "+o;const c=o.slice(0,h),p=o.slice(h+1);if(p.length<6)return"Data too short";let m=vB(c);if(typeof m=="string")return m;const w=[];for(let b=0;b<p.length;++b){const T=p.charAt(b),_=FU[T];if(_===void 0)return"Unknown character "+T;m=fp(m)^_,!(b+6>=p.length)&&w.push(_)}return m!==r?"Invalid checksum for "+o:{prefix:c,words:w}}function i(o,a){const l=n(o,a);if(typeof l=="object")return l}function s(o,a){const l=n(o,a);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:i,decode:s,encode:t,toWords:Mpe,fromWordsUnsafe:Lpe,fromWords:Fpe}}var HT=_y.bech32=jU("bech32");_y.bech32m=jU("bech32m");var HU={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(r,t){e.exports=r.document?t(r,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:kn,function(r,t){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(y){return n.flat.call(y)}:function(y){return n.concat.apply([],y)},a=n.push,l=n.indexOf,u={},h=u.toString,c=u.hasOwnProperty,p=c.toString,m=p.call(Object),w={},b=function(k){return typeof k=="function"&&typeof k.nodeType!="number"&&typeof k.item!="function"},T=function(k){return k!=null&&k===k.window},_=r.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function x(y,k,P){P=P||_;var B,H,z=P.createElement("script");if(z.text=y,k)for(B in A)H=k[B]||k.getAttribute&&k.getAttribute(B),H&&z.setAttribute(B,H);P.head.appendChild(z).parentNode.removeChild(z)}function I(y){return y==null?y+"":typeof y=="object"||typeof y=="function"?u[h.call(y)]||"object":typeof y}var O="3.7.0",C=/HTML$/i,g=function(y,k){return new g.fn.init(y,k)};g.fn=g.prototype={jquery:O,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(y){return y==null?s.call(this):y<0?this[y+this.length]:this[y]},pushStack:function(y){var k=g.merge(this.constructor(),y);return k.prevObject=this,k},each:function(y){return g.each(this,y)},map:function(y){return this.pushStack(g.map(this,function(k,P){return y.call(k,P,k)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(y,k){return(k+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(y,k){return k%2}))},eq:function(y){var k=this.length,P=+y+(y<0?k:0);return this.pushStack(P>=0&&P<k?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var y,k,P,B,H,z,K=arguments[0]||{},ce=1,ie=arguments.length,xe=!1;for(typeof K=="boolean"&&(xe=K,K=arguments[ce]||{},ce++),typeof K!="object"&&!b(K)&&(K={}),ce===ie&&(K=this,ce--);ce<ie;ce++)if((y=arguments[ce])!=null)for(k in y)B=y[k],!(k==="__proto__"||K===B)&&(xe&&B&&(g.isPlainObject(B)||(H=Array.isArray(B)))?(P=K[k],H&&!Array.isArray(P)?z=[]:!H&&!g.isPlainObject(P)?z={}:z=P,H=!1,K[k]=g.extend(xe,z,B)):B!==void 0&&(K[k]=B));return K},g.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(y){throw new Error(y)},noop:function(){},isPlainObject:function(y){var k,P;return!y||h.call(y)!=="[object Object]"?!1:(k=i(y),k?(P=c.call(k,"constructor")&&k.constructor,typeof P=="function"&&p.call(P)===m):!0)},isEmptyObject:function(y){var k;for(k in y)return!1;return!0},globalEval:function(y,k,P){x(y,{nonce:k&&k.nonce},P)},each:function(y,k){var P,B=0;if(R(y))for(P=y.length;B<P&&k.call(y[B],B,y[B])!==!1;B++);else for(B in y)if(k.call(y[B],B,y[B])===!1)break;return y},text:function(y){var k,P="",B=0,H=y.nodeType;if(H){if(H===1||H===9||H===11)return y.textContent;if(H===3||H===4)return y.nodeValue}else for(;k=y[B++];)P+=g.text(k);return P},makeArray:function(y,k){var P=k||[];return y!=null&&(R(Object(y))?g.merge(P,typeof y=="string"?[y]:y):a.call(P,y)),P},inArray:function(y,k,P){return k==null?-1:l.call(k,y,P)},isXMLDoc:function(y){var k=y&&y.namespaceURI,P=y&&(y.ownerDocument||y).documentElement;return!C.test(k||P&&P.nodeName||"HTML")},merge:function(y,k){for(var P=+k.length,B=0,H=y.length;B<P;B++)y[H++]=k[B];return y.length=H,y},grep:function(y,k,P){for(var B,H=[],z=0,K=y.length,ce=!P;z<K;z++)B=!k(y[z],z),B!==ce&&H.push(y[z]);return H},map:function(y,k,P){var B,H,z=0,K=[];if(R(y))for(B=y.length;z<B;z++)H=k(y[z],z,P),H!=null&&K.push(H);else for(z in y)H=k(y[z],z,P),H!=null&&K.push(H);return o(K)},guid:1,support:w}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(y,k){u["[object "+k+"]"]=k.toLowerCase()});function R(y){var k=!!y&&"length"in y&&y.length,P=I(y);return b(y)||T(y)?!1:P==="array"||k===0||typeof k=="number"&&k>0&&k-1 in y}function M(y,k){return y.nodeName&&y.nodeName.toLowerCase()===k.toLowerCase()}var U=n.pop,V=n.sort,ne=n.splice,re="[\\x20\\t\\r\\n\\f]",Q=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g");g.contains=function(y,k){var P=k&&k.parentNode;return y===P||!!(P&&P.nodeType===1&&(y.contains?y.contains(P):y.compareDocumentPosition&&y.compareDocumentPosition(P)&16))};var F=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Z(y,k){return k?y==="\0"?"":y.slice(0,-1)+"\\"+y.charCodeAt(y.length-1).toString(16)+" ":"\\"+y}g.escapeSelector=function(y){return(y+"").replace(F,Z)};var se=_,Ee=a;(function(){var y,k,P,B,H,z=Ee,K,ce,ie,xe,Ce,De=g.expando,Ae=0,Je=0,bt=hf(),Zt=hf(),Yt=hf(),Yn=hf(),cn=function(te,ge){return te===ge&&(H=!0),0},go="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yo="(?:\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",hr="\\["+re+"*("+yo+")(?:"+re+"*([*^$|!~]?=)"+re+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+yo+"))|)"+re+"*\\]",Ba=":("+yo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+hr+")*)|.*)\\)|)",dr=new RegExp(re+"+","g"),Lr=new RegExp("^"+re+"*,"+re+"*"),uf=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),fd=new RegExp(re+"|>"),Ls=new RegExp(Ba),xl=new RegExp("^"+yo+"$"),ps={ID:new RegExp("^#("+yo+")"),CLASS:new RegExp("^\\.("+yo+")"),TAG:new RegExp("^("+yo+"|[*])"),ATTR:new RegExp("^"+hr),PSEUDO:new RegExp("^"+Ba),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+go+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},Jo=/^(?:input|select|textarea|button)$/i,Ma=/^h\d$/i,Bi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,cf=/[+~]/,Qo=new RegExp("\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\([^\\r\\n\\f])","g"),mo=function(te,ge){var Ie="0x"+te.slice(1)-65536;return ge||(Ie<0?String.fromCharCode(Ie+65536):String.fromCharCode(Ie>>10|55296,Ie&1023|56320))},Gi=function(){La()},rg=El(function(te){return te.disabled===!0&&M(te,"fieldset")},{dir:"parentNode",next:"legend"});function ff(){try{return K.activeElement}catch{}}try{z.apply(n=s.call(se.childNodes),se.childNodes),n[se.childNodes.length].nodeType}catch{z={apply:function(ge,Ie){Ee.apply(ge,s.call(Ie))},call:function(ge){Ee.apply(ge,s.call(arguments,1))}}}function Ar(te,ge,Ie,Oe){var J,he,fe,Be,We,$t,_t,yt=ge&&ge.ownerDocument,Qt=ge?ge.nodeType:9;if(Ie=Ie||[],typeof te!="string"||!te||Qt!==1&&Qt!==9&&Qt!==11)return Ie;if(!Oe&&(La(ge),ge=ge||K,ie)){if(Qt!==11&&(We=Bi.exec(te)))if(J=We[1]){if(Qt===9)if(fe=ge.getElementById(J)){if(fe.id===J)return z.call(Ie,fe),Ie}else return Ie;else if(yt&&(fe=yt.getElementById(J))&&Ar.contains(ge,fe)&&fe.id===J)return z.call(Ie,fe),Ie}else{if(We[2])return z.apply(Ie,ge.getElementsByTagName(te)),Ie;if((J=We[3])&&ge.getElementsByClassName)return z.apply(Ie,ge.getElementsByClassName(J)),Ie}if(!Yn[te+" "]&&(!xe||!xe.test(te))){if(_t=te,yt=ge,Qt===1&&(fd.test(te)||uf.test(te))){for(yt=cf.test(te)&&ng(ge.parentNode)||ge,(yt!=ge||!w.scope)&&((Be=ge.getAttribute("id"))?Be=g.escapeSelector(Be):ge.setAttribute("id",Be=De)),$t=df(te),he=$t.length;he--;)$t[he]=(Be?"#"+Be:":scope")+" "+js($t[he]);_t=$t.join(",")}try{return z.apply(Ie,yt.querySelectorAll(_t)),Ie}catch{Yn(te,!0)}finally{Be===De&&ge.removeAttribute("id")}}}return P0(te.replace(Q,"$1"),ge,Ie,Oe)}function hf(){var te=[];function ge(Ie,Oe){return te.push(Ie+" ")>k.cacheLength&&delete ge[te.shift()],ge[Ie+" "]=Oe}return ge}function Fs(te){return te[De]=!0,te}function Au(te){var ge=K.createElement("fieldset");try{return!!te(ge)}catch{return!1}finally{ge.parentNode&&ge.parentNode.removeChild(ge),ge=null}}function Yx(te){return function(ge){return M(ge,"input")&&ge.type===te}}function Zx(te){return function(ge){return(M(ge,"input")||M(ge,"button"))&&ge.type===te}}function O0(te){return function(ge){return"form"in ge?ge.parentNode&&ge.disabled===!1?"label"in ge?"label"in ge.parentNode?ge.parentNode.disabled===te:ge.disabled===te:ge.isDisabled===te||ge.isDisabled!==!te&&rg(ge)===te:ge.disabled===te:"label"in ge?ge.disabled===te:!1}}function vs(te){return Fs(function(ge){return ge=+ge,Fs(function(Ie,Oe){for(var J,he=te([],Ie.length,ge),fe=he.length;fe--;)Ie[J=he[fe]]&&(Ie[J]=!(Oe[J]=Ie[J]))})})}function ng(te){return te&&typeof te.getElementsByTagName<"u"&&te}function La(te){var ge,Ie=te?te.ownerDocument||te:se;return Ie==K||Ie.nodeType!==9||!Ie.documentElement||(K=Ie,ce=K.documentElement,ie=!g.isXMLDoc(K),Ce=ce.matches||ce.webkitMatchesSelector||ce.msMatchesSelector,se!=K&&(ge=K.defaultView)&&ge.top!==ge&&ge.addEventListener("unload",Gi),w.getById=Au(function(Oe){return ce.appendChild(Oe).id=g.expando,!K.getElementsByName||!K.getElementsByName(g.expando).length}),w.disconnectedMatch=Au(function(Oe){return Ce.call(Oe,"*")}),w.scope=Au(function(){return K.querySelectorAll(":scope")}),w.cssHas=Au(function(){try{return K.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(k.filter.ID=function(Oe){var J=Oe.replace(Qo,mo);return function(he){return he.getAttribute("id")===J}},k.find.ID=function(Oe,J){if(typeof J.getElementById<"u"&&ie){var he=J.getElementById(Oe);return he?[he]:[]}}):(k.filter.ID=function(Oe){var J=Oe.replace(Qo,mo);return function(he){var fe=typeof he.getAttributeNode<"u"&&he.getAttributeNode("id");return fe&&fe.value===J}},k.find.ID=function(Oe,J){if(typeof J.getElementById<"u"&&ie){var he,fe,Be,We=J.getElementById(Oe);if(We){if(he=We.getAttributeNode("id"),he&&he.value===Oe)return[We];for(Be=J.getElementsByName(Oe),fe=0;We=Be[fe++];)if(he=We.getAttributeNode("id"),he&&he.value===Oe)return[We]}return[]}}),k.find.TAG=function(Oe,J){return typeof J.getElementsByTagName<"u"?J.getElementsByTagName(Oe):J.querySelectorAll(Oe)},k.find.CLASS=function(Oe,J){if(typeof J.getElementsByClassName<"u"&&ie)return J.getElementsByClassName(Oe)},xe=[],Au(function(Oe){var J;ce.appendChild(Oe).innerHTML="<a id='"+De+"' href='' disabled='disabled'></a><select id='"+De+"-\r\\' disabled='disabled'><option selected=''></option></select>",Oe.querySelectorAll("[selected]").length||xe.push("\\["+re+"*(?:value|"+go+")"),Oe.querySelectorAll("[id~="+De+"-]").length||xe.push("~="),Oe.querySelectorAll("a#"+De+"+*").length||xe.push(".#.+[+~]"),Oe.querySelectorAll(":checked").length||xe.push(":checked"),J=K.createElement("input"),J.setAttribute("type","hidden"),Oe.appendChild(J).setAttribute("name","D"),ce.appendChild(Oe).disabled=!0,Oe.querySelectorAll(":disabled").length!==2&&xe.push(":enabled",":disabled"),J=K.createElement("input"),J.setAttribute("name",""),Oe.appendChild(J),Oe.querySelectorAll("[name='']").length||xe.push("\\["+re+"*name"+re+"*="+re+`*(?:''|"")`)}),w.cssHas||xe.push(":has"),xe=xe.length&&new RegExp(xe.join("|")),cn=function(Oe,J){if(Oe===J)return H=!0,0;var he=!Oe.compareDocumentPosition-!J.compareDocumentPosition;return he||(he=(Oe.ownerDocument||Oe)==(J.ownerDocument||J)?Oe.compareDocumentPosition(J):1,he&1||!w.sortDetached&&J.compareDocumentPosition(Oe)===he?Oe===K||Oe.ownerDocument==se&&Ar.contains(se,Oe)?-1:J===K||J.ownerDocument==se&&Ar.contains(se,J)?1:B?l.call(B,Oe)-l.call(B,J):0:he&4?-1:1)}),K}Ar.matches=function(te,ge){return Ar(te,null,null,ge)},Ar.matchesSelector=function(te,ge){if(La(te),ie&&!Yn[ge+" "]&&(!xe||!xe.test(ge)))try{var Ie=Ce.call(te,ge);if(Ie||w.disconnectedMatch||te.document&&te.document.nodeType!==11)return Ie}catch{Yn(ge,!0)}return Ar(ge,K,null,[te]).length>0},Ar.contains=function(te,ge){return(te.ownerDocument||te)!=K&&La(te),g.contains(te,ge)},Ar.attr=function(te,ge){(te.ownerDocument||te)!=K&&La(te);var Ie=k.attrHandle[ge.toLowerCase()],Oe=Ie&&c.call(k.attrHandle,ge.toLowerCase())?Ie(te,ge,!ie):void 0;return Oe!==void 0?Oe:te.getAttribute(ge)},Ar.error=function(te){throw new Error("Syntax error, unrecognized expression: "+te)},g.uniqueSort=function(te){var ge,Ie=[],Oe=0,J=0;if(H=!w.sortStable,B=!w.sortStable&&s.call(te,0),V.call(te,cn),H){for(;ge=te[J++];)ge===te[J]&&(Oe=Ie.push(J));for(;Oe--;)ne.call(te,Ie[Oe],1)}return B=null,te},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(s.apply(this)))},k=g.expr={cacheLength:50,createPseudo:Fs,match:ps,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(te){return te[1]=te[1].replace(Qo,mo),te[3]=(te[3]||te[4]||te[5]||"").replace(Qo,mo),te[2]==="~="&&(te[3]=" "+te[3]+" "),te.slice(0,4)},CHILD:function(te){return te[1]=te[1].toLowerCase(),te[1].slice(0,3)==="nth"?(te[3]||Ar.error(te[0]),te[4]=+(te[4]?te[5]+(te[6]||1):2*(te[3]==="even"||te[3]==="odd")),te[5]=+(te[7]+te[8]||te[3]==="odd")):te[3]&&Ar.error(te[0]),te},PSEUDO:function(te){var ge,Ie=!te[6]&&te[2];return ps.CHILD.test(te[0])?null:(te[3]?te[2]=te[4]||te[5]||"":Ie&&Ls.test(Ie)&&(ge=df(Ie,!0))&&(ge=Ie.indexOf(")",Ie.length-ge)-Ie.length)&&(te[0]=te[0].slice(0,ge),te[2]=Ie.slice(0,ge)),te.slice(0,3))}},filter:{TAG:function(te){var ge=te.replace(Qo,mo).toLowerCase();return te==="*"?function(){return!0}:function(Ie){return M(Ie,ge)}},CLASS:function(te){var ge=bt[te+" "];return ge||(ge=new RegExp("(^|"+re+")"+te+"("+re+"|$)"))&&bt(te,function(Ie){return ge.test(typeof Ie.className=="string"&&Ie.className||typeof Ie.getAttribute<"u"&&Ie.getAttribute("class")||"")})},ATTR:function(te,ge,Ie){return function(Oe){var J=Ar.attr(Oe,te);return J==null?ge==="!=":ge?(J+="",ge==="="?J===Ie:ge==="!="?J!==Ie:ge==="^="?Ie&&J.indexOf(Ie)===0:ge==="*="?Ie&&J.indexOf(Ie)>-1:ge==="$="?Ie&&J.slice(-Ie.length)===Ie:ge==="~="?(" "+J.replace(dr," ")+" ").indexOf(Ie)>-1:ge==="|="?J===Ie||J.slice(0,Ie.length+1)===Ie+"-":!1):!0}},CHILD:function(te,ge,Ie,Oe,J){var he=te.slice(0,3)!=="nth",fe=te.slice(-4)!=="last",Be=ge==="of-type";return Oe===1&&J===0?function(We){return!!We.parentNode}:function(We,$t,_t){var yt,Qt,Dt,lr,Zn,oi=he!==fe?"nextSibling":"previousSibling",Xn=We.parentNode,Zi=Be&&We.nodeName.toLowerCase(),ea=!_t&&!Be,qt=!1;if(Xn){if(he){for(;oi;){for(Dt=We;Dt=Dt[oi];)if(Be?M(Dt,Zi):Dt.nodeType===1)return!1;Zn=oi=te==="only"&&!Zn&&"nextSibling"}return!0}if(Zn=[fe?Xn.firstChild:Xn.lastChild],fe&&ea){for(Qt=Xn[De]||(Xn[De]={}),yt=Qt[te]||[],lr=yt[0]===Ae&&yt[1],qt=lr&&yt[2],Dt=lr&&Xn.childNodes[lr];Dt=++lr&&Dt&&Dt[oi]||(qt=lr=0)||Zn.pop();)if(Dt.nodeType===1&&++qt&&Dt===We){Qt[te]=[Ae,lr,qt];break}}else if(ea&&(Qt=We[De]||(We[De]={}),yt=Qt[te]||[],lr=yt[0]===Ae&&yt[1],qt=lr),qt===!1)for(;(Dt=++lr&&Dt&&Dt[oi]||(qt=lr=0)||Zn.pop())&&!((Be?M(Dt,Zi):Dt.nodeType===1)&&++qt&&(ea&&(Qt=Dt[De]||(Dt[De]={}),Qt[te]=[Ae,qt]),Dt===We)););return qt-=J,qt===Oe||qt%Oe===0&&qt/Oe>=0}}},PSEUDO:function(te,ge){var Ie,Oe=k.pseudos[te]||k.setFilters[te.toLowerCase()]||Ar.error("unsupported pseudo: "+te);return Oe[De]?Oe(ge):Oe.length>1?(Ie=[te,te,"",ge],k.setFilters.hasOwnProperty(te.toLowerCase())?Fs(function(J,he){for(var fe,Be=Oe(J,ge),We=Be.length;We--;)fe=l.call(J,Be[We]),J[fe]=!(he[fe]=Be[We])}):function(J){return Oe(J,0,Ie)}):Oe}},pseudos:{not:Fs(function(te){var ge=[],Ie=[],Oe=sg(te.replace(Q,"$1"));return Oe[De]?Fs(function(J,he,fe,Be){for(var We,$t=Oe(J,null,Be,[]),_t=J.length;_t--;)(We=$t[_t])&&(J[_t]=!(he[_t]=We))}):function(J,he,fe){return ge[0]=J,Oe(ge,null,fe,Ie),ge[0]=null,!Ie.pop()}}),has:Fs(function(te){return function(ge){return Ar(te,ge).length>0}}),contains:Fs(function(te){return te=te.replace(Qo,mo),function(ge){return(ge.textContent||g.text(ge)).indexOf(te)>-1}}),lang:Fs(function(te){return xl.test(te||"")||Ar.error("unsupported lang: "+te),te=te.replace(Qo,mo).toLowerCase(),function(ge){var Ie;do if(Ie=ie?ge.lang:ge.getAttribute("xml:lang")||ge.getAttribute("lang"))return Ie=Ie.toLowerCase(),Ie===te||Ie.indexOf(te+"-")===0;while((ge=ge.parentNode)&&ge.nodeType===1);return!1}}),target:function(te){var ge=r.location&&r.location.hash;return ge&&ge.slice(1)===te.id},root:function(te){return te===ce},focus:function(te){return te===ff()&&K.hasFocus()&&!!(te.type||te.href||~te.tabIndex)},enabled:O0(!1),disabled:O0(!0),checked:function(te){return M(te,"input")&&!!te.checked||M(te,"option")&&!!te.selected},selected:function(te){return te.parentNode&&te.parentNode.selectedIndex,te.selected===!0},empty:function(te){for(te=te.firstChild;te;te=te.nextSibling)if(te.nodeType<6)return!1;return!0},parent:function(te){return!k.pseudos.empty(te)},header:function(te){return Ma.test(te.nodeName)},input:function(te){return Jo.test(te.nodeName)},button:function(te){return M(te,"input")&&te.type==="button"||M(te,"button")},text:function(te){var ge;return M(te,"input")&&te.type==="text"&&((ge=te.getAttribute("type"))==null||ge.toLowerCase()==="text")},first:vs(function(){return[0]}),last:vs(function(te,ge){return[ge-1]}),eq:vs(function(te,ge,Ie){return[Ie<0?Ie+ge:Ie]}),even:vs(function(te,ge){for(var Ie=0;Ie<ge;Ie+=2)te.push(Ie);return te}),odd:vs(function(te,ge){for(var Ie=1;Ie<ge;Ie+=2)te.push(Ie);return te}),lt:vs(function(te,ge,Ie){var Oe;for(Ie<0?Oe=Ie+ge:Ie>ge?Oe=ge:Oe=Ie;--Oe>=0;)te.push(Oe);return te}),gt:vs(function(te,ge,Ie){for(var Oe=Ie<0?Ie+ge:Ie;++Oe<ge;)te.push(Oe);return te})}},k.pseudos.nth=k.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[y]=Yx(y);for(y in{submit:!0,reset:!0})k.pseudos[y]=Zx(y);function hd(){}hd.prototype=k.filters=k.pseudos,k.setFilters=new hd;function df(te,ge){var Ie,Oe,J,he,fe,Be,We,$t=Zt[te+" "];if($t)return ge?0:$t.slice(0);for(fe=te,Be=[],We=k.preFilter;fe;){(!Ie||(Oe=Lr.exec(fe)))&&(Oe&&(fe=fe.slice(Oe[0].length)||fe),Be.push(J=[])),Ie=!1,(Oe=uf.exec(fe))&&(Ie=Oe.shift(),J.push({value:Ie,type:Oe[0].replace(Q," ")}),fe=fe.slice(Ie.length));for(he in k.filter)(Oe=ps[he].exec(fe))&&(!We[he]||(Oe=We[he](Oe)))&&(Ie=Oe.shift(),J.push({value:Ie,type:he,matches:Oe}),fe=fe.slice(Ie.length));if(!Ie)break}return ge?fe.length:fe?Ar.error(te):Zt(te,Be).slice(0)}function js(te){for(var ge=0,Ie=te.length,Oe="";ge<Ie;ge++)Oe+=te[ge].value;return Oe}function El(te,ge,Ie){var Oe=ge.dir,J=ge.next,he=J||Oe,fe=Ie&&he==="parentNode",Be=Je++;return ge.first?function(We,$t,_t){for(;We=We[Oe];)if(We.nodeType===1||fe)return te(We,$t,_t);return!1}:function(We,$t,_t){var yt,Qt,Dt=[Ae,Be];if(_t){for(;We=We[Oe];)if((We.nodeType===1||fe)&&te(We,$t,_t))return!0}else for(;We=We[Oe];)if(We.nodeType===1||fe)if(Qt=We[De]||(We[De]={}),J&&M(We,J))We=We[Oe]||We;else{if((yt=Qt[he])&&yt[0]===Ae&&yt[1]===Be)return Dt[2]=yt[2];if(Qt[he]=Dt,Dt[2]=te(We,$t,_t))return!0}return!1}}function ig(te){return te.length>1?function(ge,Ie,Oe){for(var J=te.length;J--;)if(!te[J](ge,Ie,Oe))return!1;return!0}:te[0]}function Xx(te,ge,Ie){for(var Oe=0,J=ge.length;Oe<J;Oe++)Ar(te,ge[Oe],Ie);return Ie}function dd(te,ge,Ie,Oe,J){for(var he,fe=[],Be=0,We=te.length,$t=ge!=null;Be<We;Be++)(he=te[Be])&&(!Ie||Ie(he,Oe,J))&&(fe.push(he),$t&&ge.push(Be));return fe}function Fa(te,ge,Ie,Oe,J,he){return Oe&&!Oe[De]&&(Oe=Fa(Oe)),J&&!J[De]&&(J=Fa(J,he)),Fs(function(fe,Be,We,$t){var _t,yt,Qt,Dt,lr=[],Zn=[],oi=Be.length,Xn=fe||Xx(ge||"*",We.nodeType?[We]:We,[]),Zi=te&&(fe||!ge)?dd(Xn,lr,te,We,$t):Xn;if(Ie?(Dt=J||(fe?te:oi||Oe)?[]:Be,Ie(Zi,Dt,We,$t)):Dt=Zi,Oe)for(_t=dd(Dt,Zn),Oe(_t,[],We,$t),yt=_t.length;yt--;)(Qt=_t[yt])&&(Dt[Zn[yt]]=!(Zi[Zn[yt]]=Qt));if(fe){if(J||te){if(J){for(_t=[],yt=Dt.length;yt--;)(Qt=Dt[yt])&&_t.push(Zi[yt]=Qt);J(null,Dt=[],_t,$t)}for(yt=Dt.length;yt--;)(Qt=Dt[yt])&&(_t=J?l.call(fe,Qt):lr[yt])>-1&&(fe[_t]=!(Be[_t]=Qt))}}else Dt=dd(Dt===Be?Dt.splice(oi,Dt.length):Dt),J?J(null,Be,Dt,$t):z.apply(Be,Dt)})}function Yi(te){for(var ge,Ie,Oe,J=te.length,he=k.relative[te[0].type],fe=he||k.relative[" "],Be=he?1:0,We=El(function(yt){return yt===ge},fe,!0),$t=El(function(yt){return l.call(ge,yt)>-1},fe,!0),_t=[function(yt,Qt,Dt){var lr=!he&&(Dt||Qt!=P)||((ge=Qt).nodeType?We(yt,Qt,Dt):$t(yt,Qt,Dt));return ge=null,lr}];Be<J;Be++)if(Ie=k.relative[te[Be].type])_t=[El(ig(_t),Ie)];else{if(Ie=k.filter[te[Be].type].apply(null,te[Be].matches),Ie[De]){for(Oe=++Be;Oe<J&&!k.relative[te[Oe].type];Oe++);return Fa(Be>1&&ig(_t),Be>1&&js(te.slice(0,Be-1).concat({value:te[Be-2].type===" "?"*":""})).replace(Q,"$1"),Ie,Be<Oe&&Yi(te.slice(Be,Oe)),Oe<J&&Yi(te=te.slice(Oe)),Oe<J&&js(te))}_t.push(Ie)}return ig(_t)}function C0(te,ge){var Ie=ge.length>0,Oe=te.length>0,J=function(he,fe,Be,We,$t){var _t,yt,Qt,Dt=0,lr="0",Zn=he&&[],oi=[],Xn=P,Zi=he||Oe&&k.find.TAG("*",$t),ea=Ae+=Xn==null?1:Math.random()||.1,qt=Zi.length;for($t&&(P=fe==K||fe||$t);lr!==qt&&(_t=Zi[lr])!=null;lr++){if(Oe&&_t){for(yt=0,!fe&&_t.ownerDocument!=K&&(La(_t),Be=!ie);Qt=te[yt++];)if(Qt(_t,fe||K,Be)){z.call(We,_t);break}$t&&(Ae=ea)}Ie&&((_t=!Qt&&_t)&&Dt--,he&&Zn.push(_t))}if(Dt+=lr,Ie&&lr!==Dt){for(yt=0;Qt=ge[yt++];)Qt(Zn,oi,fe,Be);if(he){if(Dt>0)for(;lr--;)Zn[lr]||oi[lr]||(oi[lr]=U.call(We));oi=dd(oi)}z.apply(We,oi),$t&&!he&&oi.length>0&&Dt+ge.length>1&&g.uniqueSort(We)}return $t&&(Ae=ea,P=Xn),Zn};return Ie?Fs(J):J}function sg(te,ge){var Ie,Oe=[],J=[],he=Yt[te+" "];if(!he){for(ge||(ge=df(te)),Ie=ge.length;Ie--;)he=Yi(ge[Ie]),he[De]?Oe.push(he):J.push(he);he=Yt(te,C0(J,Oe)),he.selector=te}return he}function P0(te,ge,Ie,Oe){var J,he,fe,Be,We,$t=typeof te=="function"&&te,_t=!Oe&&df(te=$t.selector||te);if(Ie=Ie||[],_t.length===1){if(he=_t[0]=_t[0].slice(0),he.length>2&&(fe=he[0]).type==="ID"&&ge.nodeType===9&&ie&&k.relative[he[1].type]){if(ge=(k.find.ID(fe.matches[0].replace(Qo,mo),ge)||[])[0],ge)$t&&(ge=ge.parentNode);else return Ie;te=te.slice(he.shift().value.length)}for(J=ps.needsContext.test(te)?0:he.length;J--&&(fe=he[J],!k.relative[Be=fe.type]);)if((We=k.find[Be])&&(Oe=We(fe.matches[0].replace(Qo,mo),cf.test(he[0].type)&&ng(ge.parentNode)||ge))){if(he.splice(J,1),te=Oe.length&&js(he),!te)return z.apply(Ie,Oe),Ie;break}}return($t||sg(te,_t))(Oe,ge,!ie,Ie,!ge||cf.test(te)&&ng(ge.parentNode)||ge),Ie}w.sortStable=De.split("").sort(cn).join("")===De,La(),w.sortDetached=Au(function(te){return te.compareDocumentPosition(K.createElement("fieldset"))&1}),g.find=Ar,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,Ar.compile=sg,Ar.select=P0,Ar.setDocument=La,Ar.escape=g.escapeSelector,Ar.getText=g.text,Ar.isXML=g.isXMLDoc,Ar.selectors=g.expr,Ar.support=g.support,Ar.uniqueSort=g.uniqueSort})();var ye=function(y,k,P){for(var B=[],H=P!==void 0;(y=y[k])&&y.nodeType!==9;)if(y.nodeType===1){if(H&&g(y).is(P))break;B.push(y)}return B},Pe=function(y,k){for(var P=[];y;y=y.nextSibling)y.nodeType===1&&y!==k&&P.push(y);return P},Ue=g.expr.match.needsContext,Ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function it(y,k,P){return b(k)?g.grep(y,function(B,H){return!!k.call(B,H,B)!==P}):k.nodeType?g.grep(y,function(B){return B===k!==P}):typeof k!="string"?g.grep(y,function(B){return l.call(k,B)>-1!==P}):g.filter(k,y,P)}g.filter=function(y,k,P){var B=k[0];return P&&(y=":not("+y+")"),k.length===1&&B.nodeType===1?g.find.matchesSelector(B,y)?[B]:[]:g.find.matches(y,g.grep(k,function(H){return H.nodeType===1}))},g.fn.extend({find:function(y){var k,P,B=this.length,H=this;if(typeof y!="string")return this.pushStack(g(y).filter(function(){for(k=0;k<B;k++)if(g.contains(H[k],this))return!0}));for(P=this.pushStack([]),k=0;k<B;k++)g.find(y,H[k],P);return B>1?g.uniqueSort(P):P},filter:function(y){return this.pushStack(it(this,y||[],!1))},not:function(y){return this.pushStack(it(this,y||[],!0))},is:function(y){return!!it(this,typeof y=="string"&&Ue.test(y)?g(y):y||[],!1).length}});var _e,pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=g.fn.init=function(y,k,P){var B,H;if(!y)return this;if(P=P||_e,typeof y=="string")if(y[0]==="<"&&y[y.length-1]===">"&&y.length>=3?B=[null,y,null]:B=pe.exec(y),B&&(B[1]||!k))if(B[1]){if(k=k instanceof g?k[0]:k,g.merge(this,g.parseHTML(B[1],k&&k.nodeType?k.ownerDocument||k:_,!0)),Ge.test(B[1])&&g.isPlainObject(k))for(B in k)b(this[B])?this[B](k[B]):this.attr(B,k[B]);return this}else return H=_.getElementById(B[2]),H&&(this[0]=H,this.length=1),this;else return!k||k.jquery?(k||P).find(y):this.constructor(k).find(y);else{if(y.nodeType)return this[0]=y,this.length=1,this;if(b(y))return P.ready!==void 0?P.ready(y):y(g)}return g.makeArray(y,this)};Te.prototype=g.fn,_e=g(_);var je=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(y){var k=g(y,this),P=k.length;return this.filter(function(){for(var B=0;B<P;B++)if(g.contains(this,k[B]))return!0})},closest:function(y,k){var P,B=0,H=this.length,z=[],K=typeof y!="string"&&g(y);if(!Ue.test(y)){for(;B<H;B++)for(P=this[B];P&&P!==k;P=P.parentNode)if(P.nodeType<11&&(K?K.index(P)>-1:P.nodeType===1&&g.find.matchesSelector(P,y))){z.push(P);break}}return this.pushStack(z.length>1?g.uniqueSort(z):z)},index:function(y){return y?typeof y=="string"?l.call(g(y),this[0]):l.call(this,y.jquery?y[0]:y):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(y,k){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(y,k))))},addBack:function(y){return this.add(y==null?this.prevObject:this.prevObject.filter(y))}});function S(y,k){for(;(y=y[k])&&y.nodeType!==1;);return y}g.each({parent:function(y){var k=y.parentNode;return k&&k.nodeType!==11?k:null},parents:function(y){return ye(y,"parentNode")},parentsUntil:function(y,k,P){return ye(y,"parentNode",P)},next:function(y){return S(y,"nextSibling")},prev:function(y){return S(y,"previousSibling")},nextAll:function(y){return ye(y,"nextSibling")},prevAll:function(y){return ye(y,"previousSibling")},nextUntil:function(y,k,P){return ye(y,"nextSibling",P)},prevUntil:function(y,k,P){return ye(y,"previousSibling",P)},siblings:function(y){return Pe((y.parentNode||{}).firstChild,y)},children:function(y){return Pe(y.firstChild)},contents:function(y){return y.contentDocument!=null&&i(y.contentDocument)?y.contentDocument:(M(y,"template")&&(y=y.content||y),g.merge([],y.childNodes))}},function(y,k){g.fn[y]=function(P,B){var H=g.map(this,k,P);return y.slice(-5)!=="Until"&&(B=P),B&&typeof B=="string"&&(H=g.filter(B,H)),this.length>1&&($[y]||g.uniqueSort(H),je.test(y)&&H.reverse()),this.pushStack(H)}});var N=/[^\x20\t\r\n\f]+/g;function L(y){var k={};return g.each(y.match(N)||[],function(P,B){k[B]=!0}),k}g.Callbacks=function(y){y=typeof y=="string"?L(y):g.extend({},y);var k,P,B,H,z=[],K=[],ce=-1,ie=function(){for(H=H||y.once,B=k=!0;K.length;ce=-1)for(P=K.shift();++ce<z.length;)z[ce].apply(P[0],P[1])===!1&&y.stopOnFalse&&(ce=z.length,P=!1);y.memory||(P=!1),k=!1,H&&(P?z=[]:z="")},xe={add:function(){return z&&(P&&!k&&(ce=z.length-1,K.push(P)),function Ce(De){g.each(De,function(Ae,Je){b(Je)?(!y.unique||!xe.has(Je))&&z.push(Je):Je&&Je.length&&I(Je)!=="string"&&Ce(Je)})}(arguments),P&&!k&&ie()),this},remove:function(){return g.each(arguments,function(Ce,De){for(var Ae;(Ae=g.inArray(De,z,Ae))>-1;)z.splice(Ae,1),Ae<=ce&&ce--}),this},has:function(Ce){return Ce?g.inArray(Ce,z)>-1:z.length>0},empty:function(){return z&&(z=[]),this},disable:function(){return H=K=[],z=P="",this},disabled:function(){return!z},lock:function(){return H=K=[],!P&&!k&&(z=P=""),this},locked:function(){return!!H},fireWith:function(Ce,De){return H||(De=De||[],De=[Ce,De.slice?De.slice():De],K.push(De),k||ie()),this},fire:function(){return xe.fireWith(this,arguments),this},fired:function(){return!!B}};return xe};function j(y){return y}function q(y){throw y}function ae(y,k,P,B){var H;try{y&&b(H=y.promise)?H.call(y).done(k).fail(P):y&&b(H=y.then)?H.call(y,k,P):k.apply(void 0,[y].slice(B))}catch(z){P.apply(void 0,[z])}}g.extend({Deferred:function(y){var k=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],P="pending",B={state:function(){return P},always:function(){return H.done(arguments).fail(arguments),this},catch:function(z){return B.then(null,z)},pipe:function(){var z=arguments;return g.Deferred(function(K){g.each(k,function(ce,ie){var xe=b(z[ie[4]])&&z[ie[4]];H[ie[1]](function(){var Ce=xe&&xe.apply(this,arguments);Ce&&b(Ce.promise)?Ce.promise().progress(K.notify).done(K.resolve).fail(K.reject):K[ie[0]+"With"](this,xe?[Ce]:arguments)})}),z=null}).promise()},then:function(z,K,ce){var ie=0;function xe(Ce,De,Ae,Je){return function(){var bt=this,Zt=arguments,Yt=function(){var cn,go;if(!(Ce<ie)){if(cn=Ae.apply(bt,Zt),cn===De.promise())throw new TypeError("Thenable self-resolution");go=cn&&(typeof cn=="object"||typeof cn=="function")&&cn.then,b(go)?Je?go.call(cn,xe(ie,De,j,Je),xe(ie,De,q,Je)):(ie++,go.call(cn,xe(ie,De,j,Je),xe(ie,De,q,Je),xe(ie,De,j,De.notifyWith))):(Ae!==j&&(bt=void 0,Zt=[cn]),(Je||De.resolveWith)(bt,Zt))}},Yn=Je?Yt:function(){try{Yt()}catch(cn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(cn,Yn.error),Ce+1>=ie&&(Ae!==q&&(bt=void 0,Zt=[cn]),De.rejectWith(bt,Zt))}};Ce?Yn():(g.Deferred.getErrorHook?Yn.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(Yn.error=g.Deferred.getStackHook()),r.setTimeout(Yn))}}return g.Deferred(function(Ce){k[0][3].add(xe(0,Ce,b(ce)?ce:j,Ce.notifyWith)),k[1][3].add(xe(0,Ce,b(z)?z:j)),k[2][3].add(xe(0,Ce,b(K)?K:q))}).promise()},promise:function(z){return z!=null?g.extend(z,B):B}},H={};return g.each(k,function(z,K){var ce=K[2],ie=K[5];B[K[1]]=ce.add,ie&&ce.add(function(){P=ie},k[3-z][2].disable,k[3-z][3].disable,k[0][2].lock,k[0][3].lock),ce.add(K[3].fire),H[K[0]]=function(){return H[K[0]+"With"](this===H?void 0:this,arguments),this},H[K[0]+"With"]=ce.fireWith}),B.promise(H),y&&y.call(H,H),H},when:function(y){var k=arguments.length,P=k,B=Array(P),H=s.call(arguments),z=g.Deferred(),K=function(ce){return function(ie){B[ce]=this,H[ce]=arguments.length>1?s.call(arguments):ie,--k||z.resolveWith(B,H)}};if(k<=1&&(ae(y,z.done(K(P)).resolve,z.reject,!k),z.state()==="pending"||b(H[P]&&H[P].then)))return z.then();for(;P--;)ae(H[P],K(P),z.reject);return z.promise()}});var ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(y,k){r.console&&r.console.warn&&y&&ve.test(y.name)&&r.console.warn("jQuery.Deferred exception: "+y.message,y.stack,k)},g.readyException=function(y){r.setTimeout(function(){throw y})};var ze=g.Deferred();g.fn.ready=function(y){return ze.then(y).catch(function(k){g.readyException(k)}),this},g.extend({isReady:!1,readyWait:1,ready:function(y){(y===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(y!==!0&&--g.readyWait>0)&&ze.resolveWith(_,[g]))}}),g.ready.then=ze.then;function He(){_.removeEventListener("DOMContentLoaded",He),r.removeEventListener("load",He),g.ready()}_.readyState==="complete"||_.readyState!=="loading"&&!_.documentElement.doScroll?r.setTimeout(g.ready):(_.addEventListener("DOMContentLoaded",He),r.addEventListener("load",He));var st=function(y,k,P,B,H,z,K){var ce=0,ie=y.length,xe=P==null;if(I(P)==="object"){H=!0;for(ce in P)st(y,k,ce,P[ce],!0,z,K)}else if(B!==void 0&&(H=!0,b(B)||(K=!0),xe&&(K?(k.call(y,B),k=null):(xe=k,k=function(Ce,De,Ae){return xe.call(g(Ce),Ae)})),k))for(;ce<ie;ce++)k(y[ce],P,K?B:B.call(y[ce],ce,k(y[ce],P)));return H?y:xe?k.call(y):ie?k(y[0],P):z},wt=/^-ms-/,mt=/-([a-z])/g;function pt(y,k){return k.toUpperCase()}function Rt(y){return y.replace(wt,"ms-").replace(mt,pt)}var fr=function(y){return y.nodeType===1||y.nodeType===9||!+y.nodeType};function qr(){this.expando=g.expando+qr.uid++}qr.uid=1,qr.prototype={cache:function(y){var k=y[this.expando];return k||(k={},fr(y)&&(y.nodeType?y[this.expando]=k:Object.defineProperty(y,this.expando,{value:k,configurable:!0}))),k},set:function(y,k,P){var B,H=this.cache(y);if(typeof k=="string")H[Rt(k)]=P;else for(B in k)H[Rt(B)]=k[B];return H},get:function(y,k){return k===void 0?this.cache(y):y[this.expando]&&y[this.expando][Rt(k)]},access:function(y,k,P){return k===void 0||k&&typeof k=="string"&&P===void 0?this.get(y,k):(this.set(y,k,P),P!==void 0?P:k)},remove:function(y,k){var P,B=y[this.expando];if(B!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(Rt):(k=Rt(k),k=k in B?[k]:k.match(N)||[]),P=k.length;P--;)delete B[k[P]];(k===void 0||g.isEmptyObject(B))&&(y.nodeType?y[this.expando]=void 0:delete y[this.expando])}},hasData:function(y){var k=y[this.expando];return k!==void 0&&!g.isEmptyObject(k)}};var ut=new qr,It=new qr,dn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pi=/[A-Z]/g;function qi(y){return y==="true"?!0:y==="false"?!1:y==="null"?null:y===+y+""?+y:dn.test(y)?JSON.parse(y):y}function pn(y,k,P){var B;if(P===void 0&&y.nodeType===1)if(B="data-"+k.replace(Pi,"-$&").toLowerCase(),P=y.getAttribute(B),typeof P=="string"){try{P=qi(P)}catch{}It.set(y,k,P)}else P=void 0;return P}g.extend({hasData:function(y){return It.hasData(y)||ut.hasData(y)},data:function(y,k,P){return It.access(y,k,P)},removeData:function(y,k){It.remove(y,k)},_data:function(y,k,P){return ut.access(y,k,P)},_removeData:function(y,k){ut.remove(y,k)}}),g.fn.extend({data:function(y,k){var P,B,H,z=this[0],K=z&&z.attributes;if(y===void 0){if(this.length&&(H=It.get(z),z.nodeType===1&&!ut.get(z,"hasDataAttrs"))){for(P=K.length;P--;)K[P]&&(B=K[P].name,B.indexOf("data-")===0&&(B=Rt(B.slice(5)),pn(z,B,H[B])));ut.set(z,"hasDataAttrs",!0)}return H}return typeof y=="object"?this.each(function(){It.set(this,y)}):st(this,function(ce){var ie;if(z&&ce===void 0)return ie=It.get(z,y),ie!==void 0||(ie=pn(z,y),ie!==void 0)?ie:void 0;this.each(function(){It.set(this,y,ce)})},null,k,arguments.length>1,null,!0)},removeData:function(y){return this.each(function(){It.remove(this,y)})}}),g.extend({queue:function(y,k,P){var B;if(y)return k=(k||"fx")+"queue",B=ut.get(y,k),P&&(!B||Array.isArray(P)?B=ut.access(y,k,g.makeArray(P)):B.push(P)),B||[]},dequeue:function(y,k){k=k||"fx";var P=g.queue(y,k),B=P.length,H=P.shift(),z=g._queueHooks(y,k),K=function(){g.dequeue(y,k)};H==="inprogress"&&(H=P.shift(),B--),H&&(k==="fx"&&P.unshift("inprogress"),delete z.stop,H.call(y,K,z)),!B&&z&&z.empty.fire()},_queueHooks:function(y,k){var P=k+"queueHooks";return ut.get(y,P)||ut.access(y,P,{empty:g.Callbacks("once memory").add(function(){ut.remove(y,[k+"queue",P])})})}}),g.fn.extend({queue:function(y,k){var P=2;return typeof y!="string"&&(k=y,y="fx",P--),arguments.length<P?g.queue(this[0],y):k===void 0?this:this.each(function(){var B=g.queue(this,y,k);g._queueHooks(this,y),y==="fx"&&B[0]!=="inprogress"&&g.dequeue(this,y)})},dequeue:function(y){return this.each(function(){g.dequeue(this,y)})},clearQueue:function(y){return this.queue(y||"fx",[])},promise:function(y,k){var P,B=1,H=g.Deferred(),z=this,K=this.length,ce=function(){--B||H.resolveWith(z,[z])};for(typeof y!="string"&&(k=y,y=void 0),y=y||"fx";K--;)P=ut.get(z[K],y+"queueHooks"),P&&P.empty&&(B++,P.empty.add(ce));return ce(),H.promise(k)}});var hs=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,uo=new RegExp("^(?:([+-])=|)("+hs+")([a-z%]*)$","i"),Ni=["Top","Right","Bottom","Left"],Vi=_.documentElement,co=function(y){return g.contains(y.ownerDocument,y)},ef={composed:!0};Vi.getRootNode&&(co=function(y){return g.contains(y.ownerDocument,y)||y.getRootNode(ef)===y.ownerDocument});var fo=function(y,k){return y=k||y,y.style.display==="none"||y.style.display===""&&co(y)&&g.css(y,"display")==="none"};function tf(y,k,P,B){var H,z,K=20,ce=B?function(){return B.cur()}:function(){return g.css(y,k,"")},ie=ce(),xe=P&&P[3]||(g.cssNumber[k]?"":"px"),Ce=y.nodeType&&(g.cssNumber[k]||xe!=="px"&&+ie)&&uo.exec(g.css(y,k));if(Ce&&Ce[3]!==xe){for(ie=ie/2,xe=xe||Ce[3],Ce=+ie||1;K--;)g.style(y,k,Ce+xe),(1-z)*(1-(z=ce()/ie||.5))<=0&&(K=0),Ce=Ce/z;Ce=Ce*2,g.style(y,k,Ce+xe),P=P||[]}return P&&(Ce=+Ce||+ie||0,H=P[1]?Ce+(P[1]+1)*P[2]:+P[2],B&&(B.unit=xe,B.start=Ce,B.end=H)),H}var Yh={};function ho(y){var k,P=y.ownerDocument,B=y.nodeName,H=Yh[B];return H||(k=P.body.appendChild(P.createElement(B)),H=g.css(k,"display"),k.parentNode.removeChild(k),H==="none"&&(H="block"),Yh[B]=H,H)}function Yo(y,k){for(var P,B,H=[],z=0,K=y.length;z<K;z++)B=y[z],B.style&&(P=B.style.display,k?(P==="none"&&(H[z]=ut.get(B,"display")||null,H[z]||(B.style.display="")),B.style.display===""&&fo(B)&&(H[z]=ho(B))):P!=="none"&&(H[z]="none",ut.set(B,"display",P)));for(z=0;z<K;z++)H[z]!=null&&(y[z].style.display=H[z]);return y}g.fn.extend({show:function(){return Yo(this,!0)},hide:function(){return Yo(this)},toggle:function(y){return typeof y=="boolean"?y?this.show():this.hide():this.each(function(){fo(this)?g(this).show():g(this).hide()})}});var Ca=/^(?:checkbox|radio)$/i,rf=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zh=/^$|^module$|\/(?:java|ecma)script/i;(function(){var y=_.createDocumentFragment(),k=y.appendChild(_.createElement("div")),P=_.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),k.appendChild(P),w.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,k.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!k.cloneNode(!0).lastChild.defaultValue,k.innerHTML="<option></option>",w.option=!!k.lastChild})();var Ri={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ri.tbody=Ri.tfoot=Ri.colgroup=Ri.caption=Ri.thead,Ri.th=Ri.td,w.option||(Ri.optgroup=Ri.option=[1,"<select multiple='multiple'>","</select>"]);function si(y,k){var P;return typeof y.getElementsByTagName<"u"?P=y.getElementsByTagName(k||"*"):typeof y.querySelectorAll<"u"?P=y.querySelectorAll(k||"*"):P=[],k===void 0||k&&M(y,k)?g.merge([y],P):P}function Eu(y,k){for(var P=0,B=y.length;P<B;P++)ut.set(y[P],"globalEval",!k||ut.get(k[P],"globalEval"))}var Uv=/<|&#?\w+;/;function Xh(y,k,P,B,H){for(var z,K,ce,ie,xe,Ce,De=k.createDocumentFragment(),Ae=[],Je=0,bt=y.length;Je<bt;Je++)if(z=y[Je],z||z===0)if(I(z)==="object")g.merge(Ae,z.nodeType?[z]:z);else if(!Uv.test(z))Ae.push(k.createTextNode(z));else{for(K=K||De.appendChild(k.createElement("div")),ce=(rf.exec(z)||["",""])[1].toLowerCase(),ie=Ri[ce]||Ri._default,K.innerHTML=ie[1]+g.htmlPrefilter(z)+ie[2],Ce=ie[0];Ce--;)K=K.lastChild;g.merge(Ae,K.childNodes),K=De.firstChild,K.textContent=""}for(De.textContent="",Je=0;z=Ae[Je++];){if(B&&g.inArray(z,B)>-1){H&&H.push(z);continue}if(xe=co(z),K=si(De.appendChild(z),"script"),xe&&Eu(K),P)for(Ce=0;z=K[Ce++];)Zh.test(z.type||"")&&P.push(z)}return De}var Jh=/^([^.]*)(?:\.(.+)|)/;function po(){return!0}function Pa(){return!1}function bl(y,k,P,B,H,z){var K,ce;if(typeof k=="object"){typeof P!="string"&&(B=B||P,P=void 0);for(ce in k)bl(y,ce,P,B,k[ce],z);return y}if(B==null&&H==null?(H=P,B=P=void 0):H==null&&(typeof P=="string"?(H=B,B=void 0):(H=B,B=P,P=void 0)),H===!1)H=Pa;else if(!H)return y;return z===1&&(K=H,H=function(ie){return g().off(ie),K.apply(this,arguments)},H.guid=K.guid||(K.guid=g.guid++)),y.each(function(){g.event.add(this,k,H,B,P)})}g.event={global:{},add:function(y,k,P,B,H){var z,K,ce,ie,xe,Ce,De,Ae,Je,bt,Zt,Yt=ut.get(y);if(fr(y))for(P.handler&&(z=P,P=z.handler,H=z.selector),H&&g.find.matchesSelector(Vi,H),P.guid||(P.guid=g.guid++),(ie=Yt.events)||(ie=Yt.events=Object.create(null)),(K=Yt.handle)||(K=Yt.handle=function(Yn){return typeof g<"u"&&g.event.triggered!==Yn.type?g.event.dispatch.apply(y,arguments):void 0}),k=(k||"").match(N)||[""],xe=k.length;xe--;)ce=Jh.exec(k[xe])||[],Je=Zt=ce[1],bt=(ce[2]||"").split(".").sort(),Je&&(De=g.event.special[Je]||{},Je=(H?De.delegateType:De.bindType)||Je,De=g.event.special[Je]||{},Ce=g.extend({type:Je,origType:Zt,data:B,handler:P,guid:P.guid,selector:H,needsContext:H&&g.expr.match.needsContext.test(H),namespace:bt.join(".")},z),(Ae=ie[Je])||(Ae=ie[Je]=[],Ae.delegateCount=0,(!De.setup||De.setup.call(y,B,bt,K)===!1)&&y.addEventListener&&y.addEventListener(Je,K)),De.add&&(De.add.call(y,Ce),Ce.handler.guid||(Ce.handler.guid=P.guid)),H?Ae.splice(Ae.delegateCount++,0,Ce):Ae.push(Ce),g.event.global[Je]=!0)},remove:function(y,k,P,B,H){var z,K,ce,ie,xe,Ce,De,Ae,Je,bt,Zt,Yt=ut.hasData(y)&&ut.get(y);if(!(!Yt||!(ie=Yt.events))){for(k=(k||"").match(N)||[""],xe=k.length;xe--;){if(ce=Jh.exec(k[xe])||[],Je=Zt=ce[1],bt=(ce[2]||"").split(".").sort(),!Je){for(Je in ie)g.event.remove(y,Je+k[xe],P,B,!0);continue}for(De=g.event.special[Je]||{},Je=(B?De.delegateType:De.bindType)||Je,Ae=ie[Je]||[],ce=ce[2]&&new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"),K=z=Ae.length;z--;)Ce=Ae[z],(H||Zt===Ce.origType)&&(!P||P.guid===Ce.guid)&&(!ce||ce.test(Ce.namespace))&&(!B||B===Ce.selector||B==="**"&&Ce.selector)&&(Ae.splice(z,1),Ce.selector&&Ae.delegateCount--,De.remove&&De.remove.call(y,Ce));K&&!Ae.length&&((!De.teardown||De.teardown.call(y,bt,Yt.handle)===!1)&&g.removeEvent(y,Je,Yt.handle),delete ie[Je])}g.isEmptyObject(ie)&&ut.remove(y,"handle events")}},dispatch:function(y){var k,P,B,H,z,K,ce=new Array(arguments.length),ie=g.event.fix(y),xe=(ut.get(this,"events")||Object.create(null))[ie.type]||[],Ce=g.event.special[ie.type]||{};for(ce[0]=ie,k=1;k<arguments.length;k++)ce[k]=arguments[k];if(ie.delegateTarget=this,!(Ce.preDispatch&&Ce.preDispatch.call(this,ie)===!1)){for(K=g.event.handlers.call(this,ie,xe),k=0;(H=K[k++])&&!ie.isPropagationStopped();)for(ie.currentTarget=H.elem,P=0;(z=H.handlers[P++])&&!ie.isImmediatePropagationStopped();)(!ie.rnamespace||z.namespace===!1||ie.rnamespace.test(z.namespace))&&(ie.handleObj=z,ie.data=z.data,B=((g.event.special[z.origType]||{}).handle||z.handler).apply(H.elem,ce),B!==void 0&&(ie.result=B)===!1&&(ie.preventDefault(),ie.stopPropagation()));return Ce.postDispatch&&Ce.postDispatch.call(this,ie),ie.result}},handlers:function(y,k){var P,B,H,z,K,ce=[],ie=k.delegateCount,xe=y.target;if(ie&&xe.nodeType&&!(y.type==="click"&&y.button>=1)){for(;xe!==this;xe=xe.parentNode||this)if(xe.nodeType===1&&!(y.type==="click"&&xe.disabled===!0)){for(z=[],K={},P=0;P<ie;P++)B=k[P],H=B.selector+" ",K[H]===void 0&&(K[H]=B.needsContext?g(H,this).index(xe)>-1:g.find(H,this,null,[xe]).length),K[H]&&z.push(B);z.length&&ce.push({elem:xe,handlers:z})}}return xe=this,ie<k.length&&ce.push({elem:xe,handlers:k.slice(ie)}),ce},addProp:function(y,k){Object.defineProperty(g.Event.prototype,y,{enumerable:!0,configurable:!0,get:b(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[y]},set:function(P){Object.defineProperty(this,y,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(y){return y[g.expando]?y:new g.Event(y)},special:{load:{noBubble:!0},click:{setup:function(y){var k=this||y;return Ca.test(k.type)&&k.click&&M(k,"input")&&wl(k,"click",!0),!1},trigger:function(y){var k=this||y;return Ca.test(k.type)&&k.click&&M(k,"input")&&wl(k,"click"),!0},_default:function(y){var k=y.target;return Ca.test(k.type)&&k.click&&M(k,"input")&&ut.get(k,"click")||M(k,"a")}},beforeunload:{postDispatch:function(y){y.result!==void 0&&y.originalEvent&&(y.originalEvent.returnValue=y.result)}}}};function wl(y,k,P){if(!P){ut.get(y,k)===void 0&&g.event.add(y,k,po);return}ut.set(y,k,!1),g.event.add(y,k,{namespace:!1,handler:function(B){var H,z=ut.get(this,k);if(B.isTrigger&1&&this[k]){if(z)(g.event.special[k]||{}).delegateType&&B.stopPropagation();else if(z=s.call(arguments),ut.set(this,k,z),this[k](),H=ut.get(this,k),ut.set(this,k,!1),z!==H)return B.stopImmediatePropagation(),B.preventDefault(),H}else z&&(ut.set(this,k,g.event.trigger(z[0],z.slice(1),this)),B.stopPropagation(),B.isImmediatePropagationStopped=po)}})}g.removeEvent=function(y,k,P){y.removeEventListener&&y.removeEventListener(k,P)},g.Event=function(y,k){if(!(this instanceof g.Event))return new g.Event(y,k);y&&y.type?(this.originalEvent=y,this.type=y.type,this.isDefaultPrevented=y.defaultPrevented||y.defaultPrevented===void 0&&y.returnValue===!1?po:Pa,this.target=y.target&&y.target.nodeType===3?y.target.parentNode:y.target,this.currentTarget=y.currentTarget,this.relatedTarget=y.relatedTarget):this.type=y,k&&g.extend(this,k),this.timeStamp=y&&y.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Pa,isPropagationStopped:Pa,isImmediatePropagationStopped:Pa,isSimulated:!1,preventDefault:function(){var y=this.originalEvent;this.isDefaultPrevented=po,y&&!this.isSimulated&&y.preventDefault()},stopPropagation:function(){var y=this.originalEvent;this.isPropagationStopped=po,y&&!this.isSimulated&&y.stopPropagation()},stopImmediatePropagation:function(){var y=this.originalEvent;this.isImmediatePropagationStopped=po,y&&!this.isSimulated&&y.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(y,k){function P(B){if(_.documentMode){var H=ut.get(this,"handle"),z=g.event.fix(B);z.type=B.type==="focusin"?"focus":"blur",z.isSimulated=!0,H(B),z.target===z.currentTarget&&H(z)}else g.event.simulate(k,B.target,g.event.fix(B))}g.event.special[y]={setup:function(){var B;if(wl(this,y,!0),_.documentMode)B=ut.get(this,k),B||this.addEventListener(k,P),ut.set(this,k,(B||0)+1);else return!1},trigger:function(){return wl(this,y),!0},teardown:function(){var B;if(_.documentMode)B=ut.get(this,k)-1,B?ut.set(this,k,B):(this.removeEventListener(k,P),ut.remove(this,k));else return!1},_default:function(B){return ut.get(B.target,y)},delegateType:k},g.event.special[k]={setup:function(){var B=this.ownerDocument||this.document||this,H=_.documentMode?this:B,z=ut.get(H,k);z||(_.documentMode?this.addEventListener(k,P):B.addEventListener(y,P,!0)),ut.set(H,k,(z||0)+1)},teardown:function(){var B=this.ownerDocument||this.document||this,H=_.documentMode?this:B,z=ut.get(H,k)-1;z?ut.set(H,k,z):(_.documentMode?this.removeEventListener(k,P):B.removeEventListener(y,P,!0),ut.remove(H,k))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(y,k){g.event.special[y]={delegateType:k,bindType:k,handle:function(P){var B,H=this,z=P.relatedTarget,K=P.handleObj;return(!z||z!==H&&!g.contains(H,z))&&(P.type=K.origType,B=K.handler.apply(this,arguments),P.type=k),B}}}),g.fn.extend({on:function(y,k,P,B){return bl(this,y,k,P,B)},one:function(y,k,P,B){return bl(this,y,k,P,B,1)},off:function(y,k,P){var B,H;if(y&&y.preventDefault&&y.handleObj)return B=y.handleObj,g(y.delegateTarget).off(B.namespace?B.origType+"."+B.namespace:B.origType,B.selector,B.handler),this;if(typeof y=="object"){for(H in y)this.off(H,k,y[H]);return this}return(k===!1||typeof k=="function")&&(P=k,k=void 0),P===!1&&(P=Pa),this.each(function(){g.event.remove(this,y,P,k)})}});var Wv=/<script|<style|<link/i,Kv=/checked\s*(?:[^=]|=\s*.checked.)/i,qv=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Qh(y,k){return M(y,"table")&&M(k.nodeType!==11?k:k.firstChild,"tr")&&g(y).children("tbody")[0]||y}function Vv(y){return y.type=(y.getAttribute("type")!==null)+"/"+y.type,y}function Gv(y){return(y.type||"").slice(0,5)==="true/"?y.type=y.type.slice(5):y.removeAttribute("type"),y}function ed(y,k){var P,B,H,z,K,ce,ie;if(k.nodeType===1){if(ut.hasData(y)&&(z=ut.get(y),ie=z.events,ie)){ut.remove(k,"handle events");for(H in ie)for(P=0,B=ie[H].length;P<B;P++)g.event.add(k,H,ie[H][P])}It.hasData(y)&&(K=It.access(y),ce=g.extend({},K),It.set(k,ce))}}function td(y,k){var P=k.nodeName.toLowerCase();P==="input"&&Ca.test(y.type)?k.checked=y.checked:(P==="input"||P==="textarea")&&(k.defaultValue=y.defaultValue)}function Na(y,k,P,B){k=o(k);var H,z,K,ce,ie,xe,Ce=0,De=y.length,Ae=De-1,Je=k[0],bt=b(Je);if(bt||De>1&&typeof Je=="string"&&!w.checkClone&&Kv.test(Je))return y.each(function(Zt){var Yt=y.eq(Zt);bt&&(k[0]=Je.call(this,Zt,Yt.html())),Na(Yt,k,P,B)});if(De&&(H=Xh(k,y[0].ownerDocument,!1,y,B),z=H.firstChild,H.childNodes.length===1&&(H=z),z||B)){for(K=g.map(si(H,"script"),Vv),ce=K.length;Ce<De;Ce++)ie=H,Ce!==Ae&&(ie=g.clone(ie,!0,!0),ce&&g.merge(K,si(ie,"script"))),P.call(y[Ce],ie,Ce);if(ce)for(xe=K[K.length-1].ownerDocument,g.map(K,Gv),Ce=0;Ce<ce;Ce++)ie=K[Ce],Zh.test(ie.type||"")&&!ut.access(ie,"globalEval")&&g.contains(xe,ie)&&(ie.src&&(ie.type||"").toLowerCase()!=="module"?g._evalUrl&&!ie.noModule&&g._evalUrl(ie.src,{nonce:ie.nonce||ie.getAttribute("nonce")},xe):x(ie.textContent.replace(qv,""),ie,xe))}return y}function rd(y,k,P){for(var B,H=k?g.filter(k,y):y,z=0;(B=H[z])!=null;z++)!P&&B.nodeType===1&&g.cleanData(si(B)),B.parentNode&&(P&&co(B)&&Eu(si(B,"script")),B.parentNode.removeChild(B));return y}g.extend({htmlPrefilter:function(y){return y},clone:function(y,k,P){var B,H,z,K,ce=y.cloneNode(!0),ie=co(y);if(!w.noCloneChecked&&(y.nodeType===1||y.nodeType===11)&&!g.isXMLDoc(y))for(K=si(ce),z=si(y),B=0,H=z.length;B<H;B++)td(z[B],K[B]);if(k)if(P)for(z=z||si(y),K=K||si(ce),B=0,H=z.length;B<H;B++)ed(z[B],K[B]);else ed(y,ce);return K=si(ce,"script"),K.length>0&&Eu(K,!ie&&si(y,"script")),ce},cleanData:function(y){for(var k,P,B,H=g.event.special,z=0;(P=y[z])!==void 0;z++)if(fr(P)){if(k=P[ut.expando]){if(k.events)for(B in k.events)H[B]?g.event.remove(P,B):g.removeEvent(P,B,k.handle);P[ut.expando]=void 0}P[It.expando]&&(P[It.expando]=void 0)}}}),g.fn.extend({detach:function(y){return rd(this,y,!0)},remove:function(y){return rd(this,y)},text:function(y){return st(this,function(k){return k===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,y,arguments.length)},append:function(){return Na(this,arguments,function(y){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=Qh(this,y);k.appendChild(y)}})},prepend:function(){return Na(this,arguments,function(y){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=Qh(this,y);k.insertBefore(y,k.firstChild)}})},before:function(){return Na(this,arguments,function(y){this.parentNode&&this.parentNode.insertBefore(y,this)})},after:function(){return Na(this,arguments,function(y){this.parentNode&&this.parentNode.insertBefore(y,this.nextSibling)})},empty:function(){for(var y,k=0;(y=this[k])!=null;k++)y.nodeType===1&&(g.cleanData(si(y,!1)),y.textContent="");return this},clone:function(y,k){return y=y??!1,k=k??y,this.map(function(){return g.clone(this,y,k)})},html:function(y){return st(this,function(k){var P=this[0]||{},B=0,H=this.length;if(k===void 0&&P.nodeType===1)return P.innerHTML;if(typeof k=="string"&&!Wv.test(k)&&!Ri[(rf.exec(k)||["",""])[1].toLowerCase()]){k=g.htmlPrefilter(k);try{for(;B<H;B++)P=this[B]||{},P.nodeType===1&&(g.cleanData(si(P,!1)),P.innerHTML=k);P=0}catch{}}P&&this.empty().append(k)},null,y,arguments.length)},replaceWith:function(){var y=[];return Na(this,arguments,function(k){var P=this.parentNode;g.inArray(this,y)<0&&(g.cleanData(si(this)),P&&P.replaceChild(k,this))},y)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(y,k){g.fn[y]=function(P){for(var B,H=[],z=g(P),K=z.length-1,ce=0;ce<=K;ce++)B=ce===K?this:this.clone(!0),g(z[ce])[k](B),a.apply(H,B.get());return this.pushStack(H)}});var nf=new RegExp("^("+hs+")(?!px)[a-z%]+$","i"),sf=/^--/,Su=function(y){var k=y.ownerDocument.defaultView;return(!k||!k.opener)&&(k=r),k.getComputedStyle(y)},nd=function(y,k,P){var B,H,z={};for(H in k)z[H]=y.style[H],y.style[H]=k[H];B=P.call(y);for(H in k)y.style[H]=z[H];return B},ku=new RegExp(Ni.join("|"),"i");(function(){function y(){if(xe){ie.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",xe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Vi.appendChild(ie).appendChild(xe);var Ce=r.getComputedStyle(xe);P=Ce.top!=="1%",ce=k(Ce.marginLeft)===12,xe.style.right="60%",z=k(Ce.right)===36,B=k(Ce.width)===36,xe.style.position="absolute",H=k(xe.offsetWidth/3)===12,Vi.removeChild(ie),xe=null}}function k(Ce){return Math.round(parseFloat(Ce))}var P,B,H,z,K,ce,ie=_.createElement("div"),xe=_.createElement("div");xe.style&&(xe.style.backgroundClip="content-box",xe.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=xe.style.backgroundClip==="content-box",g.extend(w,{boxSizingReliable:function(){return y(),B},pixelBoxStyles:function(){return y(),z},pixelPosition:function(){return y(),P},reliableMarginLeft:function(){return y(),ce},scrollboxSize:function(){return y(),H},reliableTrDimensions:function(){var Ce,De,Ae,Je;return K==null&&(Ce=_.createElement("table"),De=_.createElement("tr"),Ae=_.createElement("div"),Ce.style.cssText="position:absolute;left:-11111px;border-collapse:separate",De.style.cssText="border:1px solid",De.style.height="1px",Ae.style.height="9px",Ae.style.display="block",Vi.appendChild(Ce).appendChild(De).appendChild(Ae),Je=r.getComputedStyle(De),K=parseInt(Je.height,10)+parseInt(Je.borderTopWidth,10)+parseInt(Je.borderBottomWidth,10)===De.offsetHeight,Vi.removeChild(Ce)),K}}))})();function Ra(y,k,P){var B,H,z,K,ce=sf.test(k),ie=y.style;return P=P||Su(y),P&&(K=P.getPropertyValue(k)||P[k],ce&&K&&(K=K.replace(Q,"$1")||void 0),K===""&&!co(y)&&(K=g.style(y,k)),!w.pixelBoxStyles()&&nf.test(K)&&ku.test(k)&&(B=ie.width,H=ie.minWidth,z=ie.maxWidth,ie.minWidth=ie.maxWidth=ie.width=K,K=P.width,ie.width=B,ie.minWidth=H,ie.maxWidth=z)),K!==void 0?K+"":K}function Ms(y,k){return{get:function(){if(y()){delete this.get;return}return(this.get=k).apply(this,arguments)}}}var of=["Webkit","Moz","ms"],Zo=_.createElement("div").style,id={};function $l(y){for(var k=y[0].toUpperCase()+y.slice(1),P=of.length;P--;)if(y=of[P]+k,y in Zo)return y}function Da(y){var k=g.cssProps[y]||id[y];return k||(y in Zo?y:id[y]=$l(y)||y)}var sd=/^(none|table(?!-c[ea]).+)/,Yv={position:"absolute",visibility:"hidden",display:"block"},Tu={letterSpacing:"0",fontWeight:"400"};function od(y,k,P){var B=uo.exec(k);return B?Math.max(0,B[2]-(P||0))+(B[3]||"px"):k}function af(y,k,P,B,H,z){var K=k==="width"?1:0,ce=0,ie=0,xe=0;if(P===(B?"border":"content"))return 0;for(;K<4;K+=2)P==="margin"&&(xe+=g.css(y,P+Ni[K],!0,H)),B?(P==="content"&&(ie-=g.css(y,"padding"+Ni[K],!0,H)),P!=="margin"&&(ie-=g.css(y,"border"+Ni[K]+"Width",!0,H))):(ie+=g.css(y,"padding"+Ni[K],!0,H),P!=="padding"?ie+=g.css(y,"border"+Ni[K]+"Width",!0,H):ce+=g.css(y,"border"+Ni[K]+"Width",!0,H));return!B&&z>=0&&(ie+=Math.max(0,Math.ceil(y["offset"+k[0].toUpperCase()+k.slice(1)]-z-ie-ce-.5))||0),ie+xe}function Y(y,k,P){var B=Su(y),H=!w.boxSizingReliable()||P,z=H&&g.css(y,"boxSizing",!1,B)==="border-box",K=z,ce=Ra(y,k,B),ie="offset"+k[0].toUpperCase()+k.slice(1);if(nf.test(ce)){if(!P)return ce;ce="auto"}return(!w.boxSizingReliable()&&z||!w.reliableTrDimensions()&&M(y,"tr")||ce==="auto"||!parseFloat(ce)&&g.css(y,"display",!1,B)==="inline")&&y.getClientRects().length&&(z=g.css(y,"boxSizing",!1,B)==="border-box",K=ie in y,K&&(ce=y[ie])),ce=parseFloat(ce)||0,ce+af(y,k,P||(z?"border":"content"),K,B,ce)+"px"}g.extend({cssHooks:{opacity:{get:function(y,k){if(k){var P=Ra(y,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(y,k,P,B){if(!(!y||y.nodeType===3||y.nodeType===8||!y.style)){var H,z,K,ce=Rt(k),ie=sf.test(k),xe=y.style;if(ie||(k=Da(ce)),K=g.cssHooks[k]||g.cssHooks[ce],P!==void 0){if(z=typeof P,z==="string"&&(H=uo.exec(P))&&H[1]&&(P=tf(y,k,H),z="number"),P==null||P!==P)return;z==="number"&&!ie&&(P+=H&&H[3]||(g.cssNumber[ce]?"":"px")),!w.clearCloneStyle&&P===""&&k.indexOf("background")===0&&(xe[k]="inherit"),(!K||!("set"in K)||(P=K.set(y,P,B))!==void 0)&&(ie?xe.setProperty(k,P):xe[k]=P)}else return K&&"get"in K&&(H=K.get(y,!1,B))!==void 0?H:xe[k]}},css:function(y,k,P,B){var H,z,K,ce=Rt(k),ie=sf.test(k);return ie||(k=Da(ce)),K=g.cssHooks[k]||g.cssHooks[ce],K&&"get"in K&&(H=K.get(y,!0,P)),H===void 0&&(H=Ra(y,k,B)),H==="normal"&&k in Tu&&(H=Tu[k]),P===""||P?(z=parseFloat(H),P===!0||isFinite(z)?z||0:H):H}}),g.each(["height","width"],function(y,k){g.cssHooks[k]={get:function(P,B,H){if(B)return sd.test(g.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?nd(P,Yv,function(){return Y(P,k,H)}):Y(P,k,H)},set:function(P,B,H){var z,K=Su(P),ce=!w.scrollboxSize()&&K.position==="absolute",ie=ce||H,xe=ie&&g.css(P,"boxSizing",!1,K)==="border-box",Ce=H?af(P,k,H,xe,K):0;return xe&&ce&&(Ce-=Math.ceil(P["offset"+k[0].toUpperCase()+k.slice(1)]-parseFloat(K[k])-af(P,k,"border",!1,K)-.5)),Ce&&(z=uo.exec(B))&&(z[3]||"px")!=="px"&&(P.style[k]=B,B=g.css(P,k)),od(P,B,Ce)}}}),g.cssHooks.marginLeft=Ms(w.reliableMarginLeft,function(y,k){if(k)return(parseFloat(Ra(y,"marginLeft"))||y.getBoundingClientRect().left-nd(y,{marginLeft:0},function(){return y.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(y,k){g.cssHooks[y+k]={expand:function(P){for(var B=0,H={},z=typeof P=="string"?P.split(" "):[P];B<4;B++)H[y+Ni[B]+k]=z[B]||z[B-2]||z[0];return H}},y!=="margin"&&(g.cssHooks[y+k].set=od)}),g.fn.extend({css:function(y,k){return st(this,function(P,B,H){var z,K,ce={},ie=0;if(Array.isArray(B)){for(z=Su(P),K=B.length;ie<K;ie++)ce[B[ie]]=g.css(P,B[ie],!1,z);return ce}return H!==void 0?g.style(P,B,H):g.css(P,B)},y,k,arguments.length>1)}});function ue(y,k,P,B,H){return new ue.prototype.init(y,k,P,B,H)}g.Tween=ue,ue.prototype={constructor:ue,init:function(y,k,P,B,H,z){this.elem=y,this.prop=P,this.easing=H||g.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=B,this.unit=z||(g.cssNumber[P]?"":"px")},cur:function(){var y=ue.propHooks[this.prop];return y&&y.get?y.get(this):ue.propHooks._default.get(this)},run:function(y){var k,P=ue.propHooks[this.prop];return this.options.duration?this.pos=k=g.easing[this.easing](y,this.options.duration*y,0,1,this.options.duration):this.pos=k=y,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):ue.propHooks._default.set(this),this}},ue.prototype.init.prototype=ue.prototype,ue.propHooks={_default:{get:function(y){var k;return y.elem.nodeType!==1||y.elem[y.prop]!=null&&y.elem.style[y.prop]==null?y.elem[y.prop]:(k=g.css(y.elem,y.prop,""),!k||k==="auto"?0:k)},set:function(y){g.fx.step[y.prop]?g.fx.step[y.prop](y):y.elem.nodeType===1&&(g.cssHooks[y.prop]||y.elem.style[Da(y.prop)]!=null)?g.style(y.elem,y.prop,y.now+y.unit):y.elem[y.prop]=y.now}}},ue.propHooks.scrollTop=ue.propHooks.scrollLeft={set:function(y){y.elem.nodeType&&y.elem.parentNode&&(y.elem[y.prop]=y.now)}},g.easing={linear:function(y){return y},swing:function(y){return .5-Math.cos(y*Math.PI)/2},_default:"swing"},g.fx=ue.prototype.init,g.fx.step={};var ee,$e,Se=/^(?:toggle|show|hide)$/,we=/queueHooks$/;function Le(){$e&&(_.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Le):r.setTimeout(Le,g.fx.interval),g.fx.tick())}function Ze(){return r.setTimeout(function(){ee=void 0}),ee=Date.now()}function Qe(y,k){var P,B=0,H={height:y};for(k=k?1:0;B<4;B+=2-k)P=Ni[B],H["margin"+P]=H["padding"+P]=y;return k&&(H.opacity=H.width=y),H}function et(y,k,P){for(var B,H=(Mt.tweeners[k]||[]).concat(Mt.tweeners["*"]),z=0,K=H.length;z<K;z++)if(B=H[z].call(P,k,y))return B}function ot(y,k,P){var B,H,z,K,ce,ie,xe,Ce,De="width"in k||"height"in k,Ae=this,Je={},bt=y.style,Zt=y.nodeType&&fo(y),Yt=ut.get(y,"fxshow");P.queue||(K=g._queueHooks(y,"fx"),K.unqueued==null&&(K.unqueued=0,ce=K.empty.fire,K.empty.fire=function(){K.unqueued||ce()}),K.unqueued++,Ae.always(function(){Ae.always(function(){K.unqueued--,g.queue(y,"fx").length||K.empty.fire()})}));for(B in k)if(H=k[B],Se.test(H)){if(delete k[B],z=z||H==="toggle",H===(Zt?"hide":"show"))if(H==="show"&&Yt&&Yt[B]!==void 0)Zt=!0;else continue;Je[B]=Yt&&Yt[B]||g.style(y,B)}if(ie=!g.isEmptyObject(k),!(!ie&&g.isEmptyObject(Je))){De&&y.nodeType===1&&(P.overflow=[bt.overflow,bt.overflowX,bt.overflowY],xe=Yt&&Yt.display,xe==null&&(xe=ut.get(y,"display")),Ce=g.css(y,"display"),Ce==="none"&&(xe?Ce=xe:(Yo([y],!0),xe=y.style.display||xe,Ce=g.css(y,"display"),Yo([y]))),(Ce==="inline"||Ce==="inline-block"&&xe!=null)&&g.css(y,"float")==="none"&&(ie||(Ae.done(function(){bt.display=xe}),xe==null&&(Ce=bt.display,xe=Ce==="none"?"":Ce)),bt.display="inline-block")),P.overflow&&(bt.overflow="hidden",Ae.always(function(){bt.overflow=P.overflow[0],bt.overflowX=P.overflow[1],bt.overflowY=P.overflow[2]})),ie=!1;for(B in Je)ie||(Yt?"hidden"in Yt&&(Zt=Yt.hidden):Yt=ut.access(y,"fxshow",{display:xe}),z&&(Yt.hidden=!Zt),Zt&&Yo([y],!0),Ae.done(function(){Zt||Yo([y]),ut.remove(y,"fxshow");for(B in Je)g.style(y,B,Je[B])})),ie=et(Zt?Yt[B]:0,B,Ae),B in Yt||(Yt[B]=ie.start,Zt&&(ie.end=ie.start,ie.start=0))}}function xt(y,k){var P,B,H,z,K;for(P in y)if(B=Rt(P),H=k[B],z=y[P],Array.isArray(z)&&(H=z[1],z=y[P]=z[0]),P!==B&&(y[B]=z,delete y[P]),K=g.cssHooks[B],K&&"expand"in K){z=K.expand(z),delete y[B];for(P in z)P in y||(y[P]=z[P],k[P]=H)}else k[B]=H}function Mt(y,k,P){var B,H,z=0,K=Mt.prefilters.length,ce=g.Deferred().always(function(){delete ie.elem}),ie=function(){if(H)return!1;for(var De=ee||Ze(),Ae=Math.max(0,xe.startTime+xe.duration-De),Je=Ae/xe.duration||0,bt=1-Je,Zt=0,Yt=xe.tweens.length;Zt<Yt;Zt++)xe.tweens[Zt].run(bt);return ce.notifyWith(y,[xe,bt,Ae]),bt<1&&Yt?Ae:(Yt||ce.notifyWith(y,[xe,1,0]),ce.resolveWith(y,[xe]),!1)},xe=ce.promise({elem:y,props:g.extend({},k),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},P),originalProperties:k,originalOptions:P,startTime:ee||Ze(),duration:P.duration,tweens:[],createTween:function(De,Ae){var Je=g.Tween(y,xe.opts,De,Ae,xe.opts.specialEasing[De]||xe.opts.easing);return xe.tweens.push(Je),Je},stop:function(De){var Ae=0,Je=De?xe.tweens.length:0;if(H)return this;for(H=!0;Ae<Je;Ae++)xe.tweens[Ae].run(1);return De?(ce.notifyWith(y,[xe,1,0]),ce.resolveWith(y,[xe,De])):ce.rejectWith(y,[xe,De]),this}}),Ce=xe.props;for(xt(Ce,xe.opts.specialEasing);z<K;z++)if(B=Mt.prefilters[z].call(xe,y,Ce,xe.opts),B)return b(B.stop)&&(g._queueHooks(xe.elem,xe.opts.queue).stop=B.stop.bind(B)),B;return g.map(Ce,et,xe),b(xe.opts.start)&&xe.opts.start.call(y,xe),xe.progress(xe.opts.progress).done(xe.opts.done,xe.opts.complete).fail(xe.opts.fail).always(xe.opts.always),g.fx.timer(g.extend(ie,{elem:y,anim:xe,queue:xe.opts.queue})),xe}g.Animation=g.extend(Mt,{tweeners:{"*":[function(y,k){var P=this.createTween(y,k);return tf(P.elem,y,uo.exec(k),P),P}]},tweener:function(y,k){b(y)?(k=y,y=["*"]):y=y.match(N);for(var P,B=0,H=y.length;B<H;B++)P=y[B],Mt.tweeners[P]=Mt.tweeners[P]||[],Mt.tweeners[P].unshift(k)},prefilters:[ot],prefilter:function(y,k){k?Mt.prefilters.unshift(y):Mt.prefilters.push(y)}}),g.speed=function(y,k,P){var B=y&&typeof y=="object"?g.extend({},y):{complete:P||!P&&k||b(y)&&y,duration:y,easing:P&&k||k&&!b(k)&&k};return g.fx.off?B.duration=0:typeof B.duration!="number"&&(B.duration in g.fx.speeds?B.duration=g.fx.speeds[B.duration]:B.duration=g.fx.speeds._default),(B.queue==null||B.queue===!0)&&(B.queue="fx"),B.old=B.complete,B.complete=function(){b(B.old)&&B.old.call(this),B.queue&&g.dequeue(this,B.queue)},B},g.fn.extend({fadeTo:function(y,k,P,B){return this.filter(fo).css("opacity",0).show().end().animate({opacity:k},y,P,B)},animate:function(y,k,P,B){var H=g.isEmptyObject(y),z=g.speed(k,P,B),K=function(){var ce=Mt(this,g.extend({},y),z);(H||ut.get(this,"finish"))&&ce.stop(!0)};return K.finish=K,H||z.queue===!1?this.each(K):this.queue(z.queue,K)},stop:function(y,k,P){var B=function(H){var z=H.stop;delete H.stop,z(P)};return typeof y!="string"&&(P=k,k=y,y=void 0),k&&this.queue(y||"fx",[]),this.each(function(){var H=!0,z=y!=null&&y+"queueHooks",K=g.timers,ce=ut.get(this);if(z)ce[z]&&ce[z].stop&&B(ce[z]);else for(z in ce)ce[z]&&ce[z].stop&&we.test(z)&&B(ce[z]);for(z=K.length;z--;)K[z].elem===this&&(y==null||K[z].queue===y)&&(K[z].anim.stop(P),H=!1,K.splice(z,1));(H||!P)&&g.dequeue(this,y)})},finish:function(y){return y!==!1&&(y=y||"fx"),this.each(function(){var k,P=ut.get(this),B=P[y+"queue"],H=P[y+"queueHooks"],z=g.timers,K=B?B.length:0;for(P.finish=!0,g.queue(this,y,[]),H&&H.stop&&H.stop.call(this,!0),k=z.length;k--;)z[k].elem===this&&z[k].queue===y&&(z[k].anim.stop(!0),z.splice(k,1));for(k=0;k<K;k++)B[k]&&B[k].finish&&B[k].finish.call(this);delete P.finish})}}),g.each(["toggle","show","hide"],function(y,k){var P=g.fn[k];g.fn[k]=function(B,H,z){return B==null||typeof B=="boolean"?P.apply(this,arguments):this.animate(Qe(k,!0),B,H,z)}}),g.each({slideDown:Qe("show"),slideUp:Qe("hide"),slideToggle:Qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(y,k){g.fn[y]=function(P,B,H){return this.animate(k,P,B,H)}}),g.timers=[],g.fx.tick=function(){var y,k=0,P=g.timers;for(ee=Date.now();k<P.length;k++)y=P[k],!y()&&P[k]===y&&P.splice(k--,1);P.length||g.fx.stop(),ee=void 0},g.fx.timer=function(y){g.timers.push(y),g.fx.start()},g.fx.interval=13,g.fx.start=function(){$e||($e=!0,Le())},g.fx.stop=function(){$e=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(y,k){return y=g.fx&&g.fx.speeds[y]||y,k=k||"fx",this.queue(k,function(P,B){var H=r.setTimeout(P,y);B.stop=function(){r.clearTimeout(H)}})},function(){var y=_.createElement("input"),k=_.createElement("select"),P=k.appendChild(_.createElement("option"));y.type="checkbox",w.checkOn=y.value!=="",w.optSelected=P.selected,y=_.createElement("input"),y.value="t",y.type="radio",w.radioValue=y.value==="t"}();var gr,ar=g.expr.attrHandle;g.fn.extend({attr:function(y,k){return st(this,g.attr,y,k,arguments.length>1)},removeAttr:function(y){return this.each(function(){g.removeAttr(this,y)})}}),g.extend({attr:function(y,k,P){var B,H,z=y.nodeType;if(!(z===3||z===8||z===2)){if(typeof y.getAttribute>"u")return g.prop(y,k,P);if((z!==1||!g.isXMLDoc(y))&&(H=g.attrHooks[k.toLowerCase()]||(g.expr.match.bool.test(k)?gr:void 0)),P!==void 0){if(P===null){g.removeAttr(y,k);return}return H&&"set"in H&&(B=H.set(y,P,k))!==void 0?B:(y.setAttribute(k,P+""),P)}return H&&"get"in H&&(B=H.get(y,k))!==null?B:(B=g.find.attr(y,k),B??void 0)}},attrHooks:{type:{set:function(y,k){if(!w.radioValue&&k==="radio"&&M(y,"input")){var P=y.value;return y.setAttribute("type",k),P&&(y.value=P),k}}}},removeAttr:function(y,k){var P,B=0,H=k&&k.match(N);if(H&&y.nodeType===1)for(;P=H[B++];)y.removeAttribute(P)}}),gr={set:function(y,k,P){return k===!1?g.removeAttr(y,P):y.setAttribute(P,P),P}},g.each(g.expr.match.bool.source.match(/\w+/g),function(y,k){var P=ar[k]||g.find.attr;ar[k]=function(B,H,z){var K,ce,ie=H.toLowerCase();return z||(ce=ar[ie],ar[ie]=K,K=P(B,H,z)!=null?ie:null,ar[ie]=ce),K}});var Vr=/^(?:input|select|textarea|button)$/i,Pr=/^(?:a|area)$/i;g.fn.extend({prop:function(y,k){return st(this,g.prop,y,k,arguments.length>1)},removeProp:function(y){return this.each(function(){delete this[g.propFix[y]||y]})}}),g.extend({prop:function(y,k,P){var B,H,z=y.nodeType;if(!(z===3||z===8||z===2))return(z!==1||!g.isXMLDoc(y))&&(k=g.propFix[k]||k,H=g.propHooks[k]),P!==void 0?H&&"set"in H&&(B=H.set(y,P,k))!==void 0?B:y[k]=P:H&&"get"in H&&(B=H.get(y,k))!==null?B:y[k]},propHooks:{tabIndex:{get:function(y){var k=g.find.attr(y,"tabindex");return k?parseInt(k,10):Vr.test(y.nodeName)||Pr.test(y.nodeName)&&y.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(g.propHooks.selected={get:function(y){var k=y.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(y){var k=y.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function ln(y){var k=y.match(N)||[];return k.join(" ")}function Di(y){return y.getAttribute&&y.getAttribute("class")||""}function _l(y){return Array.isArray(y)?y:typeof y=="string"?y.match(N)||[]:[]}g.fn.extend({addClass:function(y){var k,P,B,H,z,K;return b(y)?this.each(function(ce){g(this).addClass(y.call(this,ce,Di(this)))}):(k=_l(y),k.length?this.each(function(){if(B=Di(this),P=this.nodeType===1&&" "+ln(B)+" ",P){for(z=0;z<k.length;z++)H=k[z],P.indexOf(" "+H+" ")<0&&(P+=H+" ");K=ln(P),B!==K&&this.setAttribute("class",K)}}):this)},removeClass:function(y){var k,P,B,H,z,K;return b(y)?this.each(function(ce){g(this).removeClass(y.call(this,ce,Di(this)))}):arguments.length?(k=_l(y),k.length?this.each(function(){if(B=Di(this),P=this.nodeType===1&&" "+ln(B)+" ",P){for(z=0;z<k.length;z++)for(H=k[z];P.indexOf(" "+H+" ")>-1;)P=P.replace(" "+H+" "," ");K=ln(P),B!==K&&this.setAttribute("class",K)}}):this):this.attr("class","")},toggleClass:function(y,k){var P,B,H,z,K=typeof y,ce=K==="string"||Array.isArray(y);return b(y)?this.each(function(ie){g(this).toggleClass(y.call(this,ie,Di(this),k),k)}):typeof k=="boolean"&&ce?k?this.addClass(y):this.removeClass(y):(P=_l(y),this.each(function(){if(ce)for(z=g(this),H=0;H<P.length;H++)B=P[H],z.hasClass(B)?z.removeClass(B):z.addClass(B);else(y===void 0||K==="boolean")&&(B=Di(this),B&&ut.set(this,"__className__",B),this.setAttribute&&this.setAttribute("class",B||y===!1?"":ut.get(this,"__className__")||""))}))},hasClass:function(y){var k,P,B=0;for(k=" "+y+" ";P=this[B++];)if(P.nodeType===1&&(" "+ln(Di(P))+" ").indexOf(k)>-1)return!0;return!1}});var ad=/\r/g;g.fn.extend({val:function(y){var k,P,B,H=this[0];return arguments.length?(B=b(y),this.each(function(z){var K;this.nodeType===1&&(B?K=y.call(this,z,g(this).val()):K=y,K==null?K="":typeof K=="number"?K+="":Array.isArray(K)&&(K=g.map(K,function(ce){return ce==null?"":ce+""})),k=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,K,"value")===void 0)&&(this.value=K))})):H?(k=g.valHooks[H.type]||g.valHooks[H.nodeName.toLowerCase()],k&&"get"in k&&(P=k.get(H,"value"))!==void 0?P:(P=H.value,typeof P=="string"?P.replace(ad,""):P??"")):void 0}}),g.extend({valHooks:{option:{get:function(y){var k=g.find.attr(y,"value");return k??ln(g.text(y))}},select:{get:function(y){var k,P,B,H=y.options,z=y.selectedIndex,K=y.type==="select-one",ce=K?null:[],ie=K?z+1:H.length;for(z<0?B=ie:B=K?z:0;B<ie;B++)if(P=H[B],(P.selected||B===z)&&!P.disabled&&(!P.parentNode.disabled||!M(P.parentNode,"optgroup"))){if(k=g(P).val(),K)return k;ce.push(k)}return ce},set:function(y,k){for(var P,B,H=y.options,z=g.makeArray(k),K=H.length;K--;)B=H[K],(B.selected=g.inArray(g.valHooks.option.get(B),z)>-1)&&(P=!0);return P||(y.selectedIndex=-1),z}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(y,k){if(Array.isArray(k))return y.checked=g.inArray(g(y).val(),k)>-1}},w.checkOn||(g.valHooks[this].get=function(y){return y.getAttribute("value")===null?"on":y.value})});var vo=r.location,ld={guid:Date.now()},Iu=/\?/;g.parseXML=function(y){var k,P;if(!y||typeof y!="string")return null;try{k=new r.DOMParser().parseFromString(y,"text/xml")}catch{}return P=k&&k.getElementsByTagName("parsererror")[0],(!k||P)&&g.error("Invalid XML: "+(P?g.map(P.childNodes,function(B){return B.textContent}).join(`
`):y)),k};var ud=/^(?:focusinfocus|focusoutblur)$/,lf=function(y){y.stopPropagation()};g.extend(g.event,{trigger:function(y,k,P,B){var H,z,K,ce,ie,xe,Ce,De,Ae=[P||_],Je=c.call(y,"type")?y.type:y,bt=c.call(y,"namespace")?y.namespace.split("."):[];if(z=De=K=P=P||_,!(P.nodeType===3||P.nodeType===8)&&!ud.test(Je+g.event.triggered)&&(Je.indexOf(".")>-1&&(bt=Je.split("."),Je=bt.shift(),bt.sort()),ie=Je.indexOf(":")<0&&"on"+Je,y=y[g.expando]?y:new g.Event(Je,typeof y=="object"&&y),y.isTrigger=B?2:3,y.namespace=bt.join("."),y.rnamespace=y.namespace?new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,y.result=void 0,y.target||(y.target=P),k=k==null?[y]:g.makeArray(k,[y]),Ce=g.event.special[Je]||{},!(!B&&Ce.trigger&&Ce.trigger.apply(P,k)===!1))){if(!B&&!Ce.noBubble&&!T(P)){for(ce=Ce.delegateType||Je,ud.test(ce+Je)||(z=z.parentNode);z;z=z.parentNode)Ae.push(z),K=z;K===(P.ownerDocument||_)&&Ae.push(K.defaultView||K.parentWindow||r)}for(H=0;(z=Ae[H++])&&!y.isPropagationStopped();)De=z,y.type=H>1?ce:Ce.bindType||Je,xe=(ut.get(z,"events")||Object.create(null))[y.type]&&ut.get(z,"handle"),xe&&xe.apply(z,k),xe=ie&&z[ie],xe&&xe.apply&&fr(z)&&(y.result=xe.apply(z,k),y.result===!1&&y.preventDefault());return y.type=Je,!B&&!y.isDefaultPrevented()&&(!Ce._default||Ce._default.apply(Ae.pop(),k)===!1)&&fr(P)&&ie&&b(P[Je])&&!T(P)&&(K=P[ie],K&&(P[ie]=null),g.event.triggered=Je,y.isPropagationStopped()&&De.addEventListener(Je,lf),P[Je](),y.isPropagationStopped()&&De.removeEventListener(Je,lf),g.event.triggered=void 0,K&&(P[ie]=K)),y.result}},simulate:function(y,k,P){var B=g.extend(new g.Event,P,{type:y,isSimulated:!0});g.event.trigger(B,null,k)}}),g.fn.extend({trigger:function(y,k){return this.each(function(){g.event.trigger(y,k,this)})},triggerHandler:function(y,k){var P=this[0];if(P)return g.event.trigger(y,k,P,!0)}});var Lx=/\[\]$/,Zv=/\r?\n/g,Fx=/^(?:submit|button|image|reset|file)$/i,jx=/^(?:input|select|textarea|keygen)/i;function Xv(y,k,P,B){var H;if(Array.isArray(k))g.each(k,function(z,K){P||Lx.test(y)?B(y,K):Xv(y+"["+(typeof K=="object"&&K!=null?z:"")+"]",K,P,B)});else if(!P&&I(k)==="object")for(H in k)Xv(y+"["+H+"]",k[H],P,B);else B(y,k)}g.param=function(y,k){var P,B=[],H=function(z,K){var ce=b(K)?K():K;B[B.length]=encodeURIComponent(z)+"="+encodeURIComponent(ce??"")};if(y==null)return"";if(Array.isArray(y)||y.jquery&&!g.isPlainObject(y))g.each(y,function(){H(this.name,this.value)});else for(P in y)Xv(P,y[P],k,H);return B.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var y=g.prop(this,"elements");return y?g.makeArray(y):this}).filter(function(){var y=this.type;return this.name&&!g(this).is(":disabled")&&jx.test(this.nodeName)&&!Fx.test(y)&&(this.checked||!Ca.test(y))}).map(function(y,k){var P=g(this).val();return P==null?null:Array.isArray(P)?g.map(P,function(B){return{name:k.name,value:B.replace(Zv,`\r
`)}}):{name:k.name,value:P.replace(Zv,`\r
`)}}).get()}});var Hx=/%20/g,Jv=/#.*$/,zx=/([?&])_=[^&]*/,Ux=/^(.*?):[ \t]*([^\r\n]*)$/mg,Wx=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Kx=/^(?:GET|HEAD)$/,qx=/^\/\//,Hr={},Nr={},S0="*/".concat("*"),Qv=_.createElement("a");Qv.href=vo.href;function k0(y){return function(k,P){typeof k!="string"&&(P=k,k="*");var B,H=0,z=k.toLowerCase().match(N)||[];if(b(P))for(;B=z[H++];)B[0]==="+"?(B=B.slice(1)||"*",(y[B]=y[B]||[]).unshift(P)):(y[B]=y[B]||[]).push(P)}}function T0(y,k,P,B){var H={},z=y===Nr;function K(ce){var ie;return H[ce]=!0,g.each(y[ce]||[],function(xe,Ce){var De=Ce(k,P,B);if(typeof De=="string"&&!z&&!H[De])return k.dataTypes.unshift(De),K(De),!1;if(z)return!(ie=De)}),ie}return K(k.dataTypes[0])||!H["*"]&&K("*")}function eg(y,k){var P,B,H=g.ajaxSettings.flatOptions||{};for(P in k)k[P]!==void 0&&((H[P]?y:B||(B={}))[P]=k[P]);return B&&g.extend(!0,y,B),y}function Vx(y,k,P){for(var B,H,z,K,ce=y.contents,ie=y.dataTypes;ie[0]==="*";)ie.shift(),B===void 0&&(B=y.mimeType||k.getResponseHeader("Content-Type"));if(B){for(H in ce)if(ce[H]&&ce[H].test(B)){ie.unshift(H);break}}if(ie[0]in P)z=ie[0];else{for(H in P){if(!ie[0]||y.converters[H+" "+ie[0]]){z=H;break}K||(K=H)}z=z||K}if(z)return z!==ie[0]&&ie.unshift(z),P[z]}function I0(y,k,P,B){var H,z,K,ce,ie,xe={},Ce=y.dataTypes.slice();if(Ce[1])for(K in y.converters)xe[K.toLowerCase()]=y.converters[K];for(z=Ce.shift();z;)if(y.responseFields[z]&&(P[y.responseFields[z]]=k),!ie&&B&&y.dataFilter&&(k=y.dataFilter(k,y.dataType)),ie=z,z=Ce.shift(),z){if(z==="*")z=ie;else if(ie!=="*"&&ie!==z){if(K=xe[ie+" "+z]||xe["* "+z],!K){for(H in xe)if(ce=H.split(" "),ce[1]===z&&(K=xe[ie+" "+ce[0]]||xe["* "+ce[0]],K)){K===!0?K=xe[H]:xe[H]!==!0&&(z=ce[0],Ce.unshift(ce[1]));break}}if(K!==!0)if(K&&y.throws)k=K(k);else try{k=K(k)}catch(De){return{state:"parsererror",error:K?De:"No conversion from "+ie+" to "+z}}}}return{state:"success",data:k}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vo.href,type:"GET",isLocal:Wx.test(vo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":S0,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(y,k){return k?eg(eg(y,g.ajaxSettings),k):eg(g.ajaxSettings,y)},ajaxPrefilter:k0(Hr),ajaxTransport:k0(Nr),ajax:function(y,k){typeof y=="object"&&(k=y,y=void 0),k=k||{};var P,B,H,z,K,ce,ie,xe,Ce,De,Ae=g.ajaxSetup({},k),Je=Ae.context||Ae,bt=Ae.context&&(Je.nodeType||Je.jquery)?g(Je):g.event,Zt=g.Deferred(),Yt=g.Callbacks("once memory"),Yn=Ae.statusCode||{},cn={},go={},yo="canceled",hr={readyState:0,getResponseHeader:function(dr){var Lr;if(ie){if(!z)for(z={};Lr=Ux.exec(H);)z[Lr[1].toLowerCase()+" "]=(z[Lr[1].toLowerCase()+" "]||[]).concat(Lr[2]);Lr=z[dr.toLowerCase()+" "]}return Lr==null?null:Lr.join(", ")},getAllResponseHeaders:function(){return ie?H:null},setRequestHeader:function(dr,Lr){return ie==null&&(dr=go[dr.toLowerCase()]=go[dr.toLowerCase()]||dr,cn[dr]=Lr),this},overrideMimeType:function(dr){return ie==null&&(Ae.mimeType=dr),this},statusCode:function(dr){var Lr;if(dr)if(ie)hr.always(dr[hr.status]);else for(Lr in dr)Yn[Lr]=[Yn[Lr],dr[Lr]];return this},abort:function(dr){var Lr=dr||yo;return P&&P.abort(Lr),Ba(0,Lr),this}};if(Zt.promise(hr),Ae.url=((y||Ae.url||vo.href)+"").replace(qx,vo.protocol+"//"),Ae.type=k.method||k.type||Ae.method||Ae.type,Ae.dataTypes=(Ae.dataType||"*").toLowerCase().match(N)||[""],Ae.crossDomain==null){ce=_.createElement("a");try{ce.href=Ae.url,ce.href=ce.href,Ae.crossDomain=Qv.protocol+"//"+Qv.host!=ce.protocol+"//"+ce.host}catch{Ae.crossDomain=!0}}if(Ae.data&&Ae.processData&&typeof Ae.data!="string"&&(Ae.data=g.param(Ae.data,Ae.traditional)),T0(Hr,Ae,k,hr),ie)return hr;xe=g.event&&Ae.global,xe&&g.active++===0&&g.event.trigger("ajaxStart"),Ae.type=Ae.type.toUpperCase(),Ae.hasContent=!Kx.test(Ae.type),B=Ae.url.replace(Jv,""),Ae.hasContent?Ae.data&&Ae.processData&&(Ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ae.data=Ae.data.replace(Hx,"+")):(De=Ae.url.slice(B.length),Ae.data&&(Ae.processData||typeof Ae.data=="string")&&(B+=(Iu.test(B)?"&":"?")+Ae.data,delete Ae.data),Ae.cache===!1&&(B=B.replace(zx,"$1"),De=(Iu.test(B)?"&":"?")+"_="+ld.guid+++De),Ae.url=B+De),Ae.ifModified&&(g.lastModified[B]&&hr.setRequestHeader("If-Modified-Since",g.lastModified[B]),g.etag[B]&&hr.setRequestHeader("If-None-Match",g.etag[B])),(Ae.data&&Ae.hasContent&&Ae.contentType!==!1||k.contentType)&&hr.setRequestHeader("Content-Type",Ae.contentType),hr.setRequestHeader("Accept",Ae.dataTypes[0]&&Ae.accepts[Ae.dataTypes[0]]?Ae.accepts[Ae.dataTypes[0]]+(Ae.dataTypes[0]!=="*"?", "+S0+"; q=0.01":""):Ae.accepts["*"]);for(Ce in Ae.headers)hr.setRequestHeader(Ce,Ae.headers[Ce]);if(Ae.beforeSend&&(Ae.beforeSend.call(Je,hr,Ae)===!1||ie))return hr.abort();if(yo="abort",Yt.add(Ae.complete),hr.done(Ae.success),hr.fail(Ae.error),P=T0(Nr,Ae,k,hr),!P)Ba(-1,"No Transport");else{if(hr.readyState=1,xe&&bt.trigger("ajaxSend",[hr,Ae]),ie)return hr;Ae.async&&Ae.timeout>0&&(K=r.setTimeout(function(){hr.abort("timeout")},Ae.timeout));try{ie=!1,P.send(cn,Ba)}catch(dr){if(ie)throw dr;Ba(-1,dr)}}function Ba(dr,Lr,uf,fd){var Ls,xl,ps,Jo,Ma,Bi=Lr;ie||(ie=!0,K&&r.clearTimeout(K),P=void 0,H=fd||"",hr.readyState=dr>0?4:0,Ls=dr>=200&&dr<300||dr===304,uf&&(Jo=Vx(Ae,hr,uf)),!Ls&&g.inArray("script",Ae.dataTypes)>-1&&g.inArray("json",Ae.dataTypes)<0&&(Ae.converters["text script"]=function(){}),Jo=I0(Ae,Jo,hr,Ls),Ls?(Ae.ifModified&&(Ma=hr.getResponseHeader("Last-Modified"),Ma&&(g.lastModified[B]=Ma),Ma=hr.getResponseHeader("etag"),Ma&&(g.etag[B]=Ma)),dr===204||Ae.type==="HEAD"?Bi="nocontent":dr===304?Bi="notmodified":(Bi=Jo.state,xl=Jo.data,ps=Jo.error,Ls=!ps)):(ps=Bi,(dr||!Bi)&&(Bi="error",dr<0&&(dr=0))),hr.status=dr,hr.statusText=(Lr||Bi)+"",Ls?Zt.resolveWith(Je,[xl,Bi,hr]):Zt.rejectWith(Je,[hr,Bi,ps]),hr.statusCode(Yn),Yn=void 0,xe&&bt.trigger(Ls?"ajaxSuccess":"ajaxError",[hr,Ae,Ls?xl:ps]),Yt.fireWith(Je,[hr,Bi]),xe&&(bt.trigger("ajaxComplete",[hr,Ae]),--g.active||g.event.trigger("ajaxStop")))}return hr},getJSON:function(y,k,P){return g.get(y,k,P,"json")},getScript:function(y,k){return g.get(y,void 0,k,"script")}}),g.each(["get","post"],function(y,k){g[k]=function(P,B,H,z){return b(B)&&(z=z||H,H=B,B=void 0),g.ajax(g.extend({url:P,type:k,dataType:z,data:B,success:H},g.isPlainObject(P)&&P))}}),g.ajaxPrefilter(function(y){var k;for(k in y.headers)k.toLowerCase()==="content-type"&&(y.contentType=y.headers[k]||"")}),g._evalUrl=function(y,k,P){return g.ajax({url:y,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(B){g.globalEval(B,k,P)}})},g.fn.extend({wrapAll:function(y){var k;return this[0]&&(b(y)&&(y=y.call(this[0])),k=g(y,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(y){return b(y)?this.each(function(k){g(this).wrapInner(y.call(this,k))}):this.each(function(){var k=g(this),P=k.contents();P.length?P.wrapAll(y):k.append(y)})},wrap:function(y){var k=b(y);return this.each(function(P){g(this).wrapAll(k?y.call(this,P):y)})},unwrap:function(y){return this.parent(y).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(y){return!g.expr.pseudos.visible(y)},g.expr.pseudos.visible=function(y){return!!(y.offsetWidth||y.offsetHeight||y.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var Gx={0:200,1223:204},un=g.ajaxSettings.xhr();w.cors=!!un&&"withCredentials"in un,w.ajax=un=!!un,g.ajaxTransport(function(y){var k,P;if(w.cors||un&&!y.crossDomain)return{send:function(B,H){var z,K=y.xhr();if(K.open(y.type,y.url,y.async,y.username,y.password),y.xhrFields)for(z in y.xhrFields)K[z]=y.xhrFields[z];y.mimeType&&K.overrideMimeType&&K.overrideMimeType(y.mimeType),!y.crossDomain&&!B["X-Requested-With"]&&(B["X-Requested-With"]="XMLHttpRequest");for(z in B)K.setRequestHeader(z,B[z]);k=function(ce){return function(){k&&(k=P=K.onload=K.onerror=K.onabort=K.ontimeout=K.onreadystatechange=null,ce==="abort"?K.abort():ce==="error"?typeof K.status!="number"?H(0,"error"):H(K.status,K.statusText):H(Gx[K.status]||K.status,K.statusText,(K.responseType||"text")!=="text"||typeof K.responseText!="string"?{binary:K.response}:{text:K.responseText},K.getAllResponseHeaders()))}},K.onload=k(),P=K.onerror=K.ontimeout=k("error"),K.onabort!==void 0?K.onabort=P:K.onreadystatechange=function(){K.readyState===4&&r.setTimeout(function(){k&&P()})},k=k("abort");try{K.send(y.hasContent&&y.data||null)}catch(ce){if(k)throw ce}},abort:function(){k&&k()}}}),g.ajaxPrefilter(function(y){y.crossDomain&&(y.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(y){return g.globalEval(y),y}}}),g.ajaxPrefilter("script",function(y){y.cache===void 0&&(y.cache=!1),y.crossDomain&&(y.type="GET")}),g.ajaxTransport("script",function(y){if(y.crossDomain||y.scriptAttrs){var k,P;return{send:function(B,H){k=g("<script>").attr(y.scriptAttrs||{}).prop({charset:y.scriptCharset,src:y.url}).on("load error",P=function(z){k.remove(),P=null,z&&H(z.type==="error"?404:200,z.type)}),_.head.appendChild(k[0])},abort:function(){P&&P()}}}});var cd=[],Xo=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var y=cd.pop()||g.expando+"_"+ld.guid++;return this[y]=!0,y}}),g.ajaxPrefilter("json jsonp",function(y,k,P){var B,H,z,K=y.jsonp!==!1&&(Xo.test(y.url)?"url":typeof y.data=="string"&&(y.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Xo.test(y.data)&&"data");if(K||y.dataTypes[0]==="jsonp")return B=y.jsonpCallback=b(y.jsonpCallback)?y.jsonpCallback():y.jsonpCallback,K?y[K]=y[K].replace(Xo,"$1"+B):y.jsonp!==!1&&(y.url+=(Iu.test(y.url)?"&":"?")+y.jsonp+"="+B),y.converters["script json"]=function(){return z||g.error(B+" was not called"),z[0]},y.dataTypes[0]="json",H=r[B],r[B]=function(){z=arguments},P.always(function(){H===void 0?g(r).removeProp(B):r[B]=H,y[B]&&(y.jsonpCallback=k.jsonpCallback,cd.push(B)),z&&b(H)&&H(z[0]),z=H=void 0}),"script"}),w.createHTMLDocument=function(){var y=_.implementation.createHTMLDocument("").body;return y.innerHTML="<form></form><form></form>",y.childNodes.length===2}(),g.parseHTML=function(y,k,P){if(typeof y!="string")return[];typeof k=="boolean"&&(P=k,k=!1);var B,H,z;return k||(w.createHTMLDocument?(k=_.implementation.createHTMLDocument(""),B=k.createElement("base"),B.href=_.location.href,k.head.appendChild(B)):k=_),H=Ge.exec(y),z=!P&&[],H?[k.createElement(H[1])]:(H=Xh([y],k,z),z&&z.length&&g(z).remove(),g.merge([],H.childNodes))},g.fn.load=function(y,k,P){var B,H,z,K=this,ce=y.indexOf(" ");return ce>-1&&(B=ln(y.slice(ce)),y=y.slice(0,ce)),b(k)?(P=k,k=void 0):k&&typeof k=="object"&&(H="POST"),K.length>0&&g.ajax({url:y,type:H||"GET",dataType:"html",data:k}).done(function(ie){z=arguments,K.html(B?g("<div>").append(g.parseHTML(ie)).find(B):ie)}).always(P&&function(ie,xe){K.each(function(){P.apply(this,z||[ie.responseText,xe,ie])})}),this},g.expr.pseudos.animated=function(y){return g.grep(g.timers,function(k){return y===k.elem}).length},g.offset={setOffset:function(y,k,P){var B,H,z,K,ce,ie,xe,Ce=g.css(y,"position"),De=g(y),Ae={};Ce==="static"&&(y.style.position="relative"),ce=De.offset(),z=g.css(y,"top"),ie=g.css(y,"left"),xe=(Ce==="absolute"||Ce==="fixed")&&(z+ie).indexOf("auto")>-1,xe?(B=De.position(),K=B.top,H=B.left):(K=parseFloat(z)||0,H=parseFloat(ie)||0),b(k)&&(k=k.call(y,P,g.extend({},ce))),k.top!=null&&(Ae.top=k.top-ce.top+K),k.left!=null&&(Ae.left=k.left-ce.left+H),"using"in k?k.using.call(y,Ae):De.css(Ae)}},g.fn.extend({offset:function(y){if(arguments.length)return y===void 0?this:this.each(function(H){g.offset.setOffset(this,y,H)});var k,P,B=this[0];if(B)return B.getClientRects().length?(k=B.getBoundingClientRect(),P=B.ownerDocument.defaultView,{top:k.top+P.pageYOffset,left:k.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var y,k,P,B=this[0],H={top:0,left:0};if(g.css(B,"position")==="fixed")k=B.getBoundingClientRect();else{for(k=this.offset(),P=B.ownerDocument,y=B.offsetParent||P.documentElement;y&&(y===P.body||y===P.documentElement)&&g.css(y,"position")==="static";)y=y.parentNode;y&&y!==B&&y.nodeType===1&&(H=g(y).offset(),H.top+=g.css(y,"borderTopWidth",!0),H.left+=g.css(y,"borderLeftWidth",!0))}return{top:k.top-H.top-g.css(B,"marginTop",!0),left:k.left-H.left-g.css(B,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var y=this.offsetParent;y&&g.css(y,"position")==="static";)y=y.offsetParent;return y||Vi})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(y,k){var P=k==="pageYOffset";g.fn[y]=function(B){return st(this,function(H,z,K){var ce;if(T(H)?ce=H:H.nodeType===9&&(ce=H.defaultView),K===void 0)return ce?ce[k]:H[z];ce?ce.scrollTo(P?ce.pageXOffset:K,P?K:ce.pageYOffset):H[z]=K},y,B,arguments.length)}}),g.each(["top","left"],function(y,k){g.cssHooks[k]=Ms(w.pixelPosition,function(P,B){if(B)return B=Ra(P,k),nf.test(B)?g(P).position()[k]+"px":B})}),g.each({Height:"height",Width:"width"},function(y,k){g.each({padding:"inner"+y,content:k,"":"outer"+y},function(P,B){g.fn[B]=function(H,z){var K=arguments.length&&(P||typeof H!="boolean"),ce=P||(H===!0||z===!0?"margin":"border");return st(this,function(ie,xe,Ce){var De;return T(ie)?B.indexOf("outer")===0?ie["inner"+y]:ie.document.documentElement["client"+y]:ie.nodeType===9?(De=ie.documentElement,Math.max(ie.body["scroll"+y],De["scroll"+y],ie.body["offset"+y],De["offset"+y],De["client"+y])):Ce===void 0?g.css(ie,xe,ce):g.style(ie,xe,Ce,ce)},k,K?H:void 0,K)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(y,k){g.fn[k]=function(P){return this.on(k,P)}}),g.fn.extend({bind:function(y,k,P){return this.on(y,null,k,P)},unbind:function(y,k){return this.off(y,null,k)},delegate:function(y,k,P,B){return this.on(k,y,P,B)},undelegate:function(y,k,P){return arguments.length===1?this.off(y,"**"):this.off(k,y||"**",P)},hover:function(y,k){return this.mouseenter(y).mouseleave(k||y)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(y,k){g.fn[k]=function(P,B){return arguments.length>0?this.on(k,null,P,B):this.trigger(k)}});var A0=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(y,k){var P,B,H;if(typeof k=="string"&&(P=y[k],k=y,y=P),!!b(y))return B=s.call(arguments,2),H=function(){return y.apply(k||this,B.concat(s.call(arguments)))},H.guid=y.guid=y.guid||g.guid++,H},g.holdReady=function(y){y?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=M,g.isFunction=b,g.isWindow=T,g.camelCase=Rt,g.type=I,g.now=Date.now,g.isNumeric=function(y){var k=g.type(y);return(k==="number"||k==="string")&&!isNaN(y-parseFloat(y))},g.trim=function(y){return y==null?"":(y+"").replace(A0,"$1")};var tg=r.jQuery,ds=r.$;return g.noConflict=function(y){return r.$===g&&(r.$=ds),y&&r.jQuery===g&&(r.jQuery=tg),g},typeof t>"u"&&(r.jQuery=r.$=g),g})})(HU);var jpe=HU.exports;const tr=ro(jpe);function Hpe(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var cm=Hpe,zpe=typeof kn=="object"&&kn&&kn.Object===Object&&kn,zU=zpe,Upe=zU,Wpe=typeof self=="object"&&self&&self.Object===Object&&self,Kpe=Upe||Wpe||Function("return this")(),pl=Kpe,qpe=pl,Vpe=function(){return qpe.Date.now()},Gpe=Vpe,Ype=/\s/;function Zpe(e){for(var r=e.length;r--&&Ype.test(e.charAt(r)););return r}var Xpe=Zpe,Jpe=Xpe,Qpe=/^\s+/;function eve(e){return e&&e.slice(0,Jpe(e)+1).replace(Qpe,"")}var tve=eve,rve=pl,nve=rve.Symbol,F3=nve,gB=F3,UU=Object.prototype,ive=UU.hasOwnProperty,sve=UU.toString,xg=gB?gB.toStringTag:void 0;function ove(e){var r=ive.call(e,xg),t=e[xg];try{e[xg]=void 0;var n=!0}catch{}var i=sve.call(e);return n&&(r?e[xg]=t:delete e[xg]),i}var ave=ove,lve=Object.prototype,uve=lve.toString;function cve(e){return uve.call(e)}var fve=cve,yB=F3,hve=ave,dve=fve,pve="[object Null]",vve="[object Undefined]",mB=yB?yB.toStringTag:void 0;function gve(e){return e==null?e===void 0?vve:pve:mB&&mB in Object(e)?hve(e):dve(e)}var fm=gve;function yve(e){return e!=null&&typeof e=="object"}var hm=yve,mve=fm,bve=hm,wve="[object Symbol]";function $ve(e){return typeof e=="symbol"||bve(e)&&mve(e)==wve}var _ve=$ve,xve=tve,bB=cm,Eve=_ve,wB=0/0,Sve=/^[-+]0x[0-9a-f]+$/i,kve=/^0b[01]+$/i,Tve=/^0o[0-7]+$/i,Ive=parseInt;function Ave(e){if(typeof e=="number")return e;if(Eve(e))return wB;if(bB(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=bB(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=xve(e);var t=kve.test(e);return t||Tve.test(e)?Ive(e.slice(2),t?2:8):Sve.test(e)?wB:+e}var Ove=Ave,Cve=cm,lE=Gpe,$B=Ove,Pve="Expected a function",Nve=Math.max,Rve=Math.min;function Dve(e,r,t){var n,i,s,o,a,l,u=0,h=!1,c=!1,p=!0;if(typeof e!="function")throw new TypeError(Pve);r=$B(r)||0,Cve(t)&&(h=!!t.leading,c="maxWait"in t,s=c?Nve($B(t.maxWait)||0,r):s,p="trailing"in t?!!t.trailing:p);function m(C){var g=n,R=i;return n=i=void 0,u=C,o=e.apply(R,g),o}function w(C){return u=C,a=setTimeout(_,r),h?m(C):o}function b(C){var g=C-l,R=C-u,M=r-g;return c?Rve(M,s-R):M}function T(C){var g=C-l,R=C-u;return l===void 0||g>=r||g<0||c&&R>=s}function _(){var C=lE();if(T(C))return A(C);a=setTimeout(_,b(C))}function A(C){return a=void 0,p&&n?m(C):(n=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,n=l=i=a=void 0}function I(){return a===void 0?o:A(lE())}function O(){var C=lE(),g=T(C);if(n=arguments,i=this,l=C,g){if(a===void 0)return w(l);if(c)return clearTimeout(a),a=setTimeout(_,r),m(l)}return a===void 0&&(a=setTimeout(_,r)),o}return O.cancel=x,O.flush=I,O}var Bve=Dve,Mve=Bve,Lve=cm,Fve="Expected a function";function jve(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Fve);return Lve(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),Mve(e,r,{leading:n,maxWait:r,trailing:i})}var Hve=jve;const v_=ro(Hve),zve="modulepreload",Uve=function(e){return"/"+e},_B={},br=function(r,t,n){if(!t||t.length===0)return r();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Uve(s),s in _B)return;_B[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=i.length-1;h>=0;h--){const c=i[h];if(c.href===s&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":zve,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,c)=>{u.addEventListener("load",h),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},WU={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who and when you're chatting with.",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},Wve=Object.freeze(Object.defineProperty({__proto__:null,default:WU},Symbol.toStringTag,{value:"Module"})),xy={en:"English","zh-cn":"","zh-tw":"",es:"Espaol",ru:"",de:"Deutsch",fr:"Franais",it:"Italiano",ja:"",ko:"",ar:"",id:"Indonesia","pt-BR":"Portugus (Brasil)",tr:"Trke",vt:"Ting Vit",bn:"",th:"",hi:"",fa:"",ur:"",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"",sv:"Svenska",fi:"Suomi","cs-CZ":"etina",bg:"",as:"",sk:"Slovenina",lt:"Lietuvi","el-GR":""},Kve=Object.assign({"./languages/ar.mjs":()=>br(()=>import("./ar-b05107c0.js"),[]),"./languages/as.mjs":()=>br(()=>import("./as-825421ff.js"),[]),"./languages/bg.mjs":()=>br(()=>import("./bg-262cfc4e.js"),[]),"./languages/bn.mjs":()=>br(()=>import("./bn-542e2fe5.js"),[]),"./languages/cs-CZ.mjs":()=>br(()=>import("./cs-CZ-ad8d06ab.js"),[]),"./languages/de.mjs":()=>br(()=>import("./de-e254045b.js"),[]),"./languages/el-GR.mjs":()=>br(()=>import("./el-GR-dd662a28.js"),[]),"./languages/en.mjs":()=>br(()=>Promise.resolve().then(()=>Wve),void 0),"./languages/es.mjs":()=>br(()=>import("./es-9ed73c18.js"),[]),"./languages/fa.mjs":()=>br(()=>import("./fa-b92e5c69.js"),[]),"./languages/fi.mjs":()=>br(()=>import("./fi-1b81d3e2.js"),[]),"./languages/fr.mjs":()=>br(()=>import("./fr-084a88bb.js"),[]),"./languages/he.mjs":()=>br(()=>import("./he-f8f630eb.js"),[]),"./languages/hi.mjs":()=>br(()=>import("./hi-21492224.js"),[]),"./languages/hu.mjs":()=>br(()=>import("./hu-272cee10.js"),[]),"./languages/id.mjs":()=>br(()=>import("./id-879a045d.js"),[]),"./languages/it.mjs":()=>br(()=>import("./it-570c4004.js"),[]),"./languages/ja.mjs":()=>br(()=>import("./ja-ca2ddcd8.js"),[]),"./languages/ko.mjs":()=>br(()=>import("./ko-20dade51.js"),[]),"./languages/lt.mjs":()=>br(()=>import("./lt-9d42b6bf.js"),[]),"./languages/nl.mjs":()=>br(()=>import("./nl-e18021b9.js"),[]),"./languages/pl.mjs":()=>br(()=>import("./pl-c71aa6e1.js"),[]),"./languages/pt-BR.mjs":()=>br(()=>import("./pt-BR-f6e074f5.js"),[]),"./languages/ru.mjs":()=>br(()=>import("./ru-a4f155c7.js"),[]),"./languages/sk.mjs":()=>br(()=>import("./sk-baed6548.js"),[]),"./languages/sv.mjs":()=>br(()=>import("./sv-6a12b090.js"),[]),"./languages/th.mjs":()=>br(()=>import("./th-77251d86.js"),[]),"./languages/tr.mjs":()=>br(()=>import("./tr-5c13f72f.js"),[]),"./languages/ur.mjs":()=>br(()=>import("./ur-da5400bf.js"),[]),"./languages/vt.mjs":()=>br(()=>import("./vt-ed0b9062.js"),[]),"./languages/zh-cn.mjs":()=>br(()=>import("./zh-cn-8db267de.js"),[]),"./languages/zh-tw.mjs":()=>br(()=>import("./zh-tw-27ec4fa0.js"),[])});let qd=Object.keys(xy),Lo,R1,KU;Lo=localStorage.getItem("language")||navigator.language||"en";if(qd.indexOf(Lo)===-1){const e=Lo.slice(0,2);Lo="en";for(let r=0;r<qd.length;r++)if(qd[r].slice(0,2)===e){Lo=qd[r];break}}KU=Kve[`./languages/${Lo}.mjs`]().then(e=>{console.log("loaded translation",Lo,`./languages/${Lo}.mjs`),R1=e.default,Lo!=="en"&&(R1={...WU,...R1})}).catch(e=>{console.error("failed to load translation",e)});function qve(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function be(e,r){const n=(e&&(R1[e]||qve(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return n.forEach(s=>{s.startsWith("<b>")?i.push(Ye("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(Ye("a",{key:i.length,...r},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}const Vve=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,Gve=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,Yve=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,Zve=/(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;let qU={};Re.get("existingIrisToAddress").on(e=>qU=e);const Xve=navigator.userAgent.toLowerCase(),Jve=Xve.indexOf(" electron/")>-1,xr={wtClient:void 0,formatAmount(e,r=2){return typeof e!="number"?"":e<1e3?e.toFixed(r):e<1e6?(e/1e3).toFixed(r)+"K":e<1e9?(e/1e6).toFixed(r)+"M":(e/1e9).toFixed(r)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(Vve)!==null},async translateText(e){const t=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:Lo.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return t==null?void 0:t.translatedText},handleLightningLinkClick(e){e.preventDefault();const r=e.target.closest("A").href;r.startsWith("lightning:")&&window.open(r,"_self")},isMobile:function(){let e=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const r=document.createElement("textarea");r.textContent=e,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}finally{document.body.removeChild(r)}}return!1},showConsoleWarning(){const e="Stop!",r=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const t="font-family:helvetica; font-size:20px; ";[[e,`${t}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[r,t],["",""]].map(n=>{setTimeout(console.log.bind(console,`
%c${n[0]}`,n[1]))})}},formatTime(e){const r=e.toLocaleTimeString(void 0,{timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},formatDate(e){const r=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,r,t,n){if(t||(t=new Date,n=t.toLocaleDateString(void 0,{dateStyle:"short"})),r===n)return"today";const i=Math.round((t.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):r},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const r=HT.decode(e,1e3),t=HT.fromWords(r.words);return new TextDecoder().decode(Uint8Array.from(t))}catch(r){return console.error("bech32ToText failed",r),""}},formatBytes(e,r=2){if(e===0)return"0 Bytes";const t=1024,n=r<0?0:r,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,s)).toFixed(n))} ${i[s]}`},download(e,r,t,n,i){n===null&&(n="utf-8");const s=document.createElement("a");s.href=i||`data:${t};charset=${n},${encodeURI(r)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const r=new FileReader;return r.readAsDataURL(e),new Promise((t,n)=>{r.onload=function(){t(r.result)},r.onerror=function(i){n(`Error: ${i}`)}})},scrollToMessageListBottom:v_(()=>{tr("#message-view")[0]&&tr("#message-view").scrollTop(tr("#message-view")[0].scrollHeight-tr("#message-view")[0].clientHeight)},100),getMyProfileLink(){const e=qU.name||me.toNostrBech32Address(me.getPubKey(),"npub");return this.buildURL(e)},buildURL(e,r={},t=""){const n=new URL(window.location.origin);return n.pathname=e,r&&Kd.forEach(r,(i,s)=>{n.searchParams.append(s,i)}),t&&(n.hash=t),n.toString()},arrayToHex(e){return Array.from(e,r=>("0"+(r&255).toString(16)).slice(-2)).join("")},isElectron:Jve,pubKeyRegex:Gve,noteRegex:Yve,hashtagRegex:Zve};var VU={exports:{}},uE={exports:{}},xB;function Qve(){return xB||(xB=1,function(e,r){(function(t,n){e.exports=n()})(kn,function(){return function(){function t(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},t.prototype.loadDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.loadDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){if(typeof s=="function"){if(l.id===0){s(null);return}s(l.val)}else console.log(l.val)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(i,s,o){var a=this.app,l=this;function u(h){h&&h.success===!0?o(null):o(new Error("Error saving database")),l.options.closeAfterSave&&l.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(h){l.saveDatabase(i,s,u)});return}this.catalog.setAppKey(a,i,s,u)},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.deleteDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){var u=l.id;u!==0?a.catalog.deleteAppKey(u,s):typeof s=="function"&&s({success:!0})})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(o){o.forEach(function(a){a.startsWith(i)&&s.deleteDatabase(a)})})},t.prototype.getDatabaseList=function(i){var s=this.app,o=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(a){o.catalog=a,o.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(a){for(var l=[],u=0;u<a.length;u++)l.push(a[u].key);typeof i=="function"?i(l):l.forEach(function(h){console.log(h)})})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(o){s.catalog=o,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(o){for(var a=[],l,u,h,c,p,m=0;m<o.length;m++)l=o[m],h=l.app||"",c=l.key||"",p=l.val||"",u=h.length*2+c.length*2+p.length+1,a.push({app:l.app,key:l.key,size:u});typeof i=="function"?i(a):a.forEach(function(w){console.log(w)})})};function n(i){this.db=null,this.initializeLokiCatalog(i)}return n.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),o=this;s.onupgradeneeded=function(a){var l=a.target.result;if(l.objectStoreNames.contains("LokiAKV")&&l.deleteObjectStore("LokiAKV"),!l.objectStoreNames.contains("LokiAKV")){var u=l.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});u.createIndex("app","app",{unique:!1}),u.createIndex("key","key",{unique:!1}),u.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(a){o.db=a.target.result,typeof i=="function"&&i(o)},s.onerror=function(a){throw a}},n.prototype.getAppKey=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.index("appkey"),h=i+","+s,c=u.get(h);c.onsuccess=function(p){return function(m){var w=m.target.result;(w===null||typeof w>"u")&&(w={id:0,success:!1}),typeof p=="function"?p(w):console.log(w)}}(o),c.onerror=function(p){return function(m){if(typeof p=="function")p({id:0,success:!1});else throw m}}(o)},n.prototype.getAppKeyById=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.get(i);u.onsuccess=function(h,c){return function(p){typeof c=="function"?c(p.target.result,h):console.log(p.target.result)}}(o,s)},n.prototype.setAppKey=function(i,s,o,a){var l=this.db.transaction(["LokiAKV"],"readwrite"),u=l.objectStore("LokiAKV"),h=u.index("appkey"),c=i+","+s,p=h.get(c);p.onsuccess=function(m){var w=m.target.result;w==null?w={app:i,key:s,appkey:i+","+s,val:o}:w.val=o;var b=u.put(w);b.onerror=function(T){return function(_){typeof T=="function"?T({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(p.error))}}(a),b.onsuccess=function(T){return function(_){typeof T=="function"&&T({success:!0})}}(a)},p.onerror=function(m){return function(w){typeof m=="function"?m({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(p.error))}}(a)},n.prototype.deleteAppKey=function(i,s){var o=this.db.transaction(["LokiAKV"],"readwrite"),a=o.objectStore("LokiAKV"),l=a.delete(i);l.onsuccess=function(u){return function(h){typeof u=="function"&&u({success:!0})}}(s),l.onerror=function(u){return function(h){typeof u=="function"?u({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(l.error))}}(s)},n.prototype.getAppKeys=function(i,s){var o=this.db.transaction(["LokiAKV"],"readonly"),a=o.objectStore("LokiAKV"),l=a.index("app"),u=IDBKeyRange.only(i),h=l.openCursor(u),c=[];h.onsuccess=function(p,m){return function(w){var b=w.target.result;if(b){var T=b.value;p.push(T),b.continue()}else typeof m=="function"?m(p):console.log(p)}}(c,s),h.onerror=function(p){return function(m){typeof p=="function"?p(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(m))}}(s)},n.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),o=s.objectStore("LokiAKV"),a=o.openCursor(),l=[];a.onsuccess=function(u,h){return function(c){var p=c.target.result;if(p){var m=p.value;u.push(m),p.continue()}else typeof h=="function"?h(u):console.log(u)}}(l,i),a.onerror=function(u){return function(h){typeof u=="function"&&u(null)}}(i)},t}()})}(uE)),uE.exports}const ege={},tge=Object.freeze(Object.defineProperty({__proto__:null,default:ege},Symbol.toStringTag,{value:"Module"})),rge=zc(tge);(function(e,r){(function(t,n){e.exports=n()})(kn,function(){return function(){var t=Object.prototype.hasOwnProperty;function n($){var S,N;if(Array.isArray($)){for(N=0;N<$.length;N++)n($[N]);i($)}else if($!==null&&typeof $=="object"){for(S in $)$.hasOwnProperty(S)&&n($[S]);i($)}}function i($){Object.isFrozen($)||Object.freeze($)}function s($){return Object.isFrozen($)?x($,"shallow"):$}var o={copyProperties:function($,S){var N;for(N in $)S[N]=$[N]},resolveTransformObject:function($,S,N){var L,j;if(typeof N!="number"&&(N=0),++N>=10)return $;for(L in $)typeof $[L]=="string"&&$[L].indexOf("[%lktxp]")===0?(j=$[L].substring(8),S.hasOwnProperty(j)&&($[L]=S[j])):typeof $[L]=="object"&&($[L]=o.resolveTransformObject($[L],S,N));return $},resolveTransformParams:function($,S){var N,L,j=[];if(typeof S>"u")return $;for(N=0;N<$.length;N++)L=x($[N],"shallow-recurse-objects"),j.push(o.resolveTransformObject(L,S));return j},getIn:function($,S,N){if($!=null){if(!N)return $[S];if(typeof S=="string"&&(S=S.split(".")),!Array.isArray(S))throw new Error("path must be a string or array. Found "+typeof S);for(var L=0,j=S.length;$!=null&&L<j;)$=$[S[L++]];return L&&L==j?$:void 0}}},a={aeq:l,lt:u,gt:h};function l($,S){var N,L,j,q;if($===S)return!0;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:j=1;break;case null:j=1;break;case!1:j=3;break;case!0:j=4;break;case"":j=5;break;default:j=$===$?9:0;break}switch(S){case void 0:q=1;break;case null:q=1;break;case!1:q=3;break;case!0:q=4;break;case"":q=5;break;default:q=S===S?9:0;break}if(j!==9||q!==9)return j===q}return N=Number($),L=Number(S),N===N||L===L?N===L:(N=$.toString(),L=S.toString(),N==L)}function u($,S,N){var L,j,q,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:q=1;break;case null:q=1;break;case!1:q=3;break;case!0:q=4;break;case"":q=5;break;default:q=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(q!==9||ae!==9)return q===ae?N:q<ae}return L=Number($),j=Number(S),L===L&&j===j?L<j?!0:L>j?!1:N:L===L&&j!==j?!0:j===j&&L!==L?!1:$<S?!0:$>S?!1:$==S?N:(L=$.toString(),j=S.toString(),L<j?!0:L==j?N:!1)}function h($,S,N){var L,j,q,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:q=1;break;case null:q=1;break;case!1:q=3;break;case!0:q=4;break;case"":q=5;break;default:q=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(q!==9||ae!==9)return q===ae?N:q>ae}return L=Number($),j=Number(S),L===L&&j===j?L>j?!0:L<j?!1:N:L===L&&j!==j?!1:j===j&&L!==L||$>S?!0:$<S?!1:$==S?N:(L=$.toString(),j=S.toString(),L>j?!0:L==j?N:!1)}function c($,S,N){return a.aeq($,S)?0:a.lt($,S,!1)?N?1:-1:a.gt($,S,!1)?N?-1:1:0}function p($,S,N){for(var L=0,j,q,ae,ve,ze,He=0,st=$.length;He<st;He++)if(j=$[He],q=j[0],~q.indexOf(".")?(ze=q.split("."),ae=o.getIn(S,ze,!0),ve=o.getIn(N,ze,!0)):(ae=S[q],ve=N[q]),L=c(ae,ve,j[1]),L!==0)return L;return 0}function m($,S,N,L,j,q){var ae=q||0,ve=S[ae],ze=!1,He;if(typeof $=="object"&&ve in $&&(He=$[ve]),ae+1>=S.length)ze=N(He,L,j);else if(Array.isArray(He))for(var st=0,wt=He.length;st<wt&&(ze=m(He[st],S,N,L,j,ae+1),ze!==!0);st+=1);else ze=m(He,S,N,L,j,ae+1);return ze}function w($){return typeof $=="string"||Array.isArray($)?function(S){return $.indexOf(S)!==-1}:typeof $=="object"&&$!==null?function(S){return t.call($,S)}:null}function b($,S,N){for(var L in S)if(t.call(S,L))return T[L]($,S[L],N);return!1}var T={$eq:function($,S){return $===S},$aeq:function($,S){return $==S},$ne:function($,S){return S!==S?$===$:$!==S},$dteq:function($,S){return a.aeq($,S)},$gt:function($,S){return a.gt($,S,!1)},$gte:function($,S){return a.gt($,S,!0)},$lt:function($,S){return a.lt($,S,!1)},$lte:function($,S){return a.lt($,S,!0)},$jgt:function($,S){return $>S},$jgte:function($,S){return $>=S},$jlt:function($,S){return $<S},$jlte:function($,S){return $<=S},$between:function($,S){return $==null?!1:a.gt($,S[0],!0)&&a.lt($,S[1],!0)},$jbetween:function($,S){return $==null?!1:$>=S[0]&&$<=S[1]},$in:function($,S){return S.indexOf($)!==-1},$inSet:function($,S){return S.has($)},$nin:function($,S){return S.indexOf($)===-1},$keyin:function($,S){return $ in S},$nkeyin:function($,S){return!($ in S)},$definedin:function($,S){return S[$]!==void 0},$undefinedin:function($,S){return S[$]===void 0},$regex:function($,S){return S.test($)},$containsString:function($,S){return typeof $=="string"&&$.indexOf(S)!==-1},$containsNone:function($,S){return!T.$containsAny($,S)},$containsAny:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.some(N):N(S):!1},$contains:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.every(N):N(S):!1},$elemMatch:function($,S){return Array.isArray($)?$.some(function(N){return Object.keys(S).every(function(L){var j=S[L];return typeof j=="object"&&j||(j={$eq:j}),L.indexOf(".")!==-1?m(N,L.split("."),b,S[L],N):b(N[L],j,N)})}):!1},$type:function($,S,N){var L=typeof $;return L==="object"&&(Array.isArray($)?L="array":$ instanceof Date&&(L="date")),typeof S!="object"?L===S:b(L,S,N)},$finite:function($,S){return S===isFinite($)},$size:function($,S,N){return Array.isArray($)?typeof S!="object"?$.length===S:b($.length,S,N):!1},$len:function($,S,N){return typeof $=="string"?typeof S!="object"?$.length===S:b($.length,S,N):!1},$where:function($,S){return S($)===!0},$not:function($,S,N){return!b($,S,N)},$and:function($,S,N){for(var L=0,j=S.length;L<j;L+=1)if(!b($,S[L],N))return!1;return!0},$or:function($,S,N){for(var L=0,j=S.length;L<j;L+=1)if(b($,S[L],N))return!0;return!1},$exists:function($,S){return S?$!==void 0:$===void 0}},_=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];_.forEach(function($){var S=T[$];T["$"+$]=function(N,L,j){if(typeof L=="string")return S(N,j[L]);if(typeof L=="function")return S(N,L(j));throw new Error("Invalid argument to $$ matcher")}});var A={$eq:T.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function x($,S){if($==null)return null;var N=S||"parse-stringify",L;switch(N){case"parse-stringify":L=JSON.parse(JSON.stringify($));break;case"jquery-extend-deep":L=jQuery.extend(!0,{},$);break;case"shallow":L=Object.create($.constructor.prototype),Object.keys($).map(function(q){L[q]=$[q]});break;case"shallow-assign":L=Object.create($.constructor.prototype),Object.assign(L,$);break;case"shallow-recurse-objects":L=x($,"shallow");var j=Object.keys($);j.forEach(function(q){typeof $[q]=="object"&&$[q].constructor.name==="Object"?L[q]=x($[q],"shallow-recurse-objects"):Array.isArray($[q])&&(L[q]=I($[q],"shallow-recurse-objects"))});break}return L}function I($,S){if(S=="parse-stringify")return x($,S);for(var N=[],L=0,j=$.length;L<j;L++)N[L]=x($[L],S);return N}function O(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function C(){}C.prototype.events={},C.prototype.asyncListeners=!1,C.prototype.on=function($,S){var N,L=this;return Array.isArray($)?($.forEach(function(j){L.on(j,S)}),S):(N=this.events[$],N||(N=this.events[$]=[]),N.push(S),S)},C.prototype.emit=function($){var S=this,N;if($&&this.events[$])this.events[$].length&&(N=Array.prototype.slice.call(arguments,1),this.events[$].forEach(function(L){S.asyncListeners?setTimeout(function(){L.apply(S,N)},1):L.apply(S,N)}));else throw new Error("No event "+$+" defined")},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function($,S){var N=this;if(Array.isArray($)){$.forEach(function(j){N.removeListener(j,S)});return}if(this.events[$]){var L=this.events[$];L.splice(L.indexOf(S),1)}};function g($,S){this.filename=$||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=S&&S.hasOwnProperty("verbose")?S.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var N=function(){return typeof kn<"u"&&(kn.android||kn.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof kn<"u"&&kn.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};S&&S.hasOwnProperty("env")?this.ENV=S.env:this.ENV=N(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(S,!0),this.on("init",this.clearChanges)}g.prototype=new C,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){var $;return typeof Rg=="function"&&($=Qve()),$},g.prototype.configureOptions=function($,S){var N={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},L={fs:U,localStorage:V,memory:R};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof $<"u"){if(this.options=$,this.options.hasOwnProperty("persistenceMethod")&&typeof L[$.persistenceMethod]=="function"&&(this.persistenceMethod=$.persistenceMethod,this.persistenceAdapter=new L[$.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=$.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),$.autoload&&S){var j=this;setTimeout(function(){j.loadDatabase($,$.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable($,$.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=N[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new L[this.persistenceMethod]))},g.prototype.copy=function($){var S=new g(this.filename,{env:"NA"}),N,L;if($=$||{},S.loadJSONObject(this,{retainDirtyFlags:!0}),$.hasOwnProperty("removeNonSerializable")&&$.removeNonSerializable===!0)for(S.autosaveHandle=null,S.persistenceAdapter=null,N=S.collections.length,L=0;L<N;L++)S.collections[L].constraints=null,S.collections[L].ttl=null;return S},g.prototype.addCollection=function($,S){var N,L=this.collections.length;if(S&&S.disableMeta===!0){if(S.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(S.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof S.ttl=="number"&&S.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(N=0;N<L;N+=1)if(this.collections[N].name===$)return this.collections[N];var j=new F($,S);return j.isIncremental=this.isIncremental,this.collections.push(j),this.verbose&&(j.lokiConsoleWrapper=console),j},g.prototype.loadCollection=function($){if(!$.name)throw new Error("Collection must have a name property to be loaded");this.collections.push($)},g.prototype.getCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$)return this.collections[S];return this.emit("warning","collection "+$+" not found"),null},g.prototype.renameCollection=function($,S){var N=this.getCollection($);return N&&(N.name=S),N},g.prototype.listCollections=function(){for(var $=this.collections.length,S=[];$--;)S.push({name:this.collections[$].name,type:this.collections[$].objType,count:this.collections[$].data.length});return S},g.prototype.removeCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$){var L=new F($,{}),j=this.collections[S];for(var q in j)j.hasOwnProperty(q)&&L.hasOwnProperty(q)&&(j[q]=L[q]);this.collections.splice(S,1);return}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function($,S){switch($){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return S}},g.prototype.serialize=function($){switch($=$||{},$.hasOwnProperty("serializationMethod")||($.serializationMethod=this.options.serializationMethod),$.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function($){var S,N,L,j,q=[],ae;if($=$||{},$.hasOwnProperty("partitioned")||($.partitioned=!1),$.hasOwnProperty("delimited")||($.delimited=!0),$.hasOwnProperty("delimiter")||($.delimiter=this.options.destructureDelimiter),$.partitioned===!0&&$.hasOwnProperty("partition")&&$.partition>=0)return this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:$.partition});for(ae=new g(this.filename),ae.loadJSONObject(this),S=0;S<ae.collections.length;S++)ae.collections[S].data=[];if($.partitioned===!0&&$.partition===-1)return ae.serialize({serializationMethod:"normal"});for(q.push(ae.serialize({serializationMethod:"normal"})),ae=null,S=0;S<this.collections.length;S++)if(L=this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:S}),$.partitioned===!1&&$.delimited===!1){if(!Array.isArray(L))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(j=L.length,N=0;N<j;N++)q.push(L[N]),L[N]=null;q.push("")}else q.push(L);return $.partitioned?($.delimited,q):$.delimited?(q.push(""),q.join($.delimiter)):(q.push(""),q)},g.prototype.serializeCollection=function($){var S,N,L=[];if($=$||{},$.hasOwnProperty("delimited")||($.delimited=!0),!$.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(S=this.collections[$.collectionIndex].data.length,L=[],N=0;N<S;N++)L.push(JSON.stringify(this.collections[$.collectionIndex].data[N]));return $.delimited?(L.push(""),L.join($.delimiter)):L},g.prototype.deserializeDestructured=function($,S){var N=[],L,j,q=0,ae,ve=1,ze=!1,He;if(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.partitioned){if(S.hasOwnProperty("partition"))return S.partition===-1?(j=JSON.parse($[0]),j):this.deserializeCollection($[S.partition+1],S);for(j=JSON.parse($[0]),ae=j.collections.length,q=0;q<ae;q++)j.collections[q].data=this.deserializeCollection($[q+1],S);return j}if(S.delimited){if(N=$.split(S.delimiter),$=null,L=N.length,L===0)return null}else N=$;for(j=JSON.parse(N[0]),ae=j.collections.length,N[0]=null;!ze;)N[ve],N[ve]===""?++q>ae&&(ze=!0):(He=JSON.parse(N[ve]),j.collections[q].data.push(He)),N[ve++]=null;return j},g.prototype.deserializeCollection=function($,S){var N=[],L,j;for(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.delimited?(N=$.split(S.delimiter),N.pop()):N=$,j=N.length,L=0;L<j;L++)N[L]=JSON.parse(N[L]);return N},g.prototype.loadJSON=function($,S){var N;if($.length===0)N={};else switch(this.options.serializationMethod){case"normal":case"pretty":N=JSON.parse($);break;case"destructured":N=this.deserializeDestructured($);break;default:N=JSON.parse($);break}this.loadJSONObject(N,S)},g.prototype.loadJSONObject=function($,S){var N=0,L=$.collections?$.collections.length:0,j,q,ae,ve,ze,He;this.name=$.name,$.hasOwnProperty("throttledSaves")&&S&&!S.hasOwnProperty("throttledSaves")&&(this.throttledSaves=$.throttledSaves),this.collections=[];function st(Rt){var fr=S[Rt.name],qr;return fr.proto?(qr=fr.inflate||o.copyProperties,function(ut){var It=new fr.proto;return qr(ut,It),It}):fr.inflate}for(N;N<L;N+=1){if(j=$.collections[N],q=this.addCollection(j.name,{disableChangesApi:j.disableChangesApi,disableDeltaChangesApi:j.disableDeltaChangesApi,disableMeta:j.disableMeta,disableFreeze:j.hasOwnProperty("disableFreeze")?j.disableFreeze:!0}),q.adaptiveBinaryIndices=j.hasOwnProperty("adaptiveBinaryIndices")?j.adaptiveBinaryIndices===!0:!1,q.transactional=j.transactional,q.asyncListeners=j.asyncListeners,q.cloneObjects=j.cloneObjects,q.cloneMethod=j.cloneMethod||"parse-stringify",q.autoupdate=j.autoupdate,q.changes=j.changes,q.dirtyIds=j.dirtyIds||[],S&&S.retainDirtyFlags===!0?q.dirty=j.dirty:q.dirty=!1,ae=j.data.length,ve=0,S&&S.hasOwnProperty(j.name))for(ze=st(j),ve;ve<ae;ve++)He=ze(j.data[ve]),q.data[ve]=He,q.addAutoUpdateObserver(He),q.disableFreeze||n(q.data[ve]);else for(ve;ve<ae;ve++)q.data[ve]=j.data[ve],q.addAutoUpdateObserver(q.data[ve]),q.disableFreeze||n(q.data[ve]);if(q.maxId=typeof j.maxId>"u"?0:j.maxId,typeof j.binaryIndices<"u"&&(q.binaryIndices=j.binaryIndices),typeof j.transforms<"u"&&(q.transforms=j.transforms),q.uniqueNames=[],j.hasOwnProperty("uniqueNames")&&(q.uniqueNames=j.uniqueNames),!(typeof j.DynamicViews>"u")){for(var wt=0;wt<j.DynamicViews.length;wt++){var mt=j.DynamicViews[wt],pt=q.addDynamicView(mt.name,mt.options);pt.resultdata=mt.resultdata,pt.resultsdirty=mt.resultsdirty,pt.filterPipeline=mt.filterPipeline,pt.sortCriteriaSimple=mt.sortCriteriaSimple,pt.sortCriteria=mt.sortCriteria,pt.sortFunction=null,pt.sortDirty=mt.sortDirty,q.disableFreeze||(n(pt.filterPipeline),pt.sortCriteriaSimple?n(pt.sortCriteriaSimple):pt.sortCriteria&&n(pt.sortCriteria)),pt.resultset.filteredrows=mt.resultset.filteredrows,pt.resultset.filterInitialized=mt.resultset.filterInitialized,pt.rematerialize({removeWhereFilters:!0})}$.databaseVersion<1.5&&(q.ensureAllIndexes(!0),q.dirty=!0)}}},g.prototype.close=function($){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase($),$=void 0)),$&&this.on("close",$),this.emit("close")},g.prototype.generateChangesNotification=function($){function S(j){return j.name}var N=[],L=$||this.collections.map(S);return this.collections.forEach(function(j){L.indexOf(S(j))!==-1&&(N=N.concat(j.getChanges()))}),N},g.prototype.serializeChanges=function($){return JSON.stringify(this.generateChangesNotification($))},g.prototype.clearChanges=function(){this.collections.forEach(function($){$.flushChanges&&$.flushChanges()})};function R($){this.hashStore={},this.options=$||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}R.prototype.loadDatabase=function($,S){var N=this;this.options.asyncResponses?setTimeout(function(){N.hashStore.hasOwnProperty($)?S(N.hashStore[$].value):S(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty($)?S(this.hashStore[$].value):S(null)},R.prototype.saveDatabase=function($,S,N){var L=this,j;this.options.asyncResponses?setTimeout(function(){j=L.hashStore.hasOwnProperty($)?L.hashStore[$].savecount:0,L.hashStore[$]={savecount:j+1,lastsave:new Date,value:S},N()},this.options.asyncTimeout):(j=this.hashStore.hasOwnProperty($)?this.hashStore[$].savecount:0,this.hashStore[$]={savecount:j+1,lastsave:new Date,value:S},N())},R.prototype.deleteDatabase=function($,S){this.hashStore.hasOwnProperty($)&&delete this.hashStore[$],typeof S=="function"&&S()};function M($,S){if(this.mode="reference",this.adapter=null,this.options=S||{},this.dbref=null,this.dbname="",this.pageIterator={},$){if($.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=$}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}M.prototype.loadDatabase=function($,S){var N=this;this.dbname=$,this.dbref=new g($),this.adapter.loadDatabase($,function(L){if(!L){S(L);return}typeof L!="string"&&S(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var j=JSON.parse(L);if(N.dbref.loadJSONObject(j),j=null,N.dbref.collections.length,N.dbref.collections.length===0){S(N.dbref);return}N.pageIterator={collection:0,pageIndex:0},N.loadNextPartition(0,function(){S(N.dbref)})})},M.prototype.loadNextPartition=function($,S){var N=this.dbname+"."+$,L=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(S);return}this.adapter.loadDatabase(N,function(j){var q=L.dbref.deserializeCollection(j,{delimited:!0,collectionIndex:$});L.dbref.collections[$].data=q,++$<L.dbref.collections.length?L.loadNextPartition($,S):S()})},M.prototype.loadNextPage=function($){var S=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,N=this;this.adapter.loadDatabase(S,function(L){var j=L.split(N.options.delimiter);L="";var q=j.length,ae,ve=j[q-1]==="";for(ve&&(j.pop(),q=j.length,j[q-1]===""&&q===1&&(j.pop(),q=j.length)),ae=0;ae<q;ae++)N.dbref.collections[N.pageIterator.collection].data.push(JSON.parse(j[ae])),j[ae]=null;j=[],ve?++N.pageIterator.collection<N.dbref.collections.length?N.loadNextPartition(N.pageIterator.collection,$):$():(N.pageIterator.pageIndex++,N.loadNextPage($))})},M.prototype.exportDatabase=function($,S,N){var L,j=S.collections.length;for(this.dbref=S,this.dbname=$,this.dirtyPartitions=[-1],L=0;L<j;L++)S.collections[L].dirty&&this.dirtyPartitions.push(L);this.saveNextPartition(function(q){N(q)})},M.prototype.saveNextPartition=function($){var S=this,N=this.dirtyPartitions.shift(),L=this.dbname+(N===-1?"":"."+N);if(this.options.paging&&N!==-1){this.pageIterator={collection:N,docIndex:0,pageIndex:0},this.saveNextPage(function(q){S.dirtyPartitions.length===0?$(q):S.saveNextPartition($)});return}var j=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:N});this.adapter.saveDatabase(L,j,function(q){if(q){$(q);return}S.dirtyPartitions.length===0?$(null):S.saveNextPartition($)})},M.prototype.saveNextPage=function($){var S=this,N=this.dbref.collections[this.pageIterator.collection],L=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,j=0,q=N.data.length,ae=this.options.delimiter.length,ve="",ze="",He=!1,st=!1,wt=function(mt){ze="",mt&&$(mt),He?$(null):(S.pageIterator.pageIndex++,S.saveNextPage($))};for(N.data.length===0&&(He=!0);;)if(He||(ve=JSON.stringify(N.data[this.pageIterator.docIndex]),ze+=ve,j+=ve.length,++this.pageIterator.docIndex>=q&&(He=!0)),j>=this.options.pageSize&&(st=!0),(!st||He)&&(ze+=this.options.delimiter,j+=ae),He||st){this.adapter.saveDatabase(L,ze,wt);return}};function U(){try{this.fs=rge}catch{this.fs=null}}U.prototype.loadDatabase=function(S,N){var L=this;this.fs.stat(S,function(j,q){!j&&q.isFile()?L.fs.readFile(S,{encoding:"utf8"},function(ve,ze){N(ve?new Error(ve):ze)}):N(null)})},U.prototype.saveDatabase=function(S,N,L){var j=this,q=S+"~";this.fs.writeFile(q,N,function(ve){ve?L(new Error(ve)):j.fs.rename(q,S,L)})},U.prototype.deleteDatabase=function(S,N){this.fs.unlink(S,function(j){j?N(new Error(j)):N()})};function V(){}V.prototype.loadDatabase=function(S,N){O()?N(localStorage.getItem(S)):N(new Error("localStorage is not available"))},V.prototype.saveDatabase=function(S,N,L){O()?(localStorage.setItem(S,N),L(null)):L(new Error("localStorage is not available"))},V.prototype.deleteDatabase=function(S,N){O()?(localStorage.removeItem(S),N(null)):N(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function($,S){var N=this,L=new Date().getTime();if(this.throttledSaves||$(!0),S=S||{},S.hasOwnProperty("recursiveWait")||(S.recursiveWait=!0),S.hasOwnProperty("recursiveWaitLimit")||(S.recursiveWaitLimit=!1),S.hasOwnProperty("recursiveWaitLimitDuration")||(S.recursiveWaitLimitDuration=2e3),S.hasOwnProperty("started")||(S.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(S.recursiveWait)this.throttledCallbacks.push(function(){if(N.throttledSavePending){if(S.recursiveWaitLimit&&L-S.started>S.recursiveWaitLimitDuration){$(!1);return}N.throttledSaveDrain($,S);return}else{$(!0);return}});else{this.throttledCallbacks.push($);return}else $(!0)},g.prototype.loadDatabaseInternal=function($,S){var N=S||function(j,q){if(j)throw j},L=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(q){if(typeof q=="string"){var ae=!1;try{L.loadJSON(q,$||{}),ae=!0}catch(ve){N(ve)}ae&&(N(null),L.emit("loaded","database "+L.filename+" loaded"))}else{if(!q){N(null),L.emit("loaded","empty database "+L.filename+" loaded");return}if(q instanceof Error){N(q);return}if(typeof q=="object"){L.loadJSONObject(q,$||{}),N(null),L.emit("loaded","database "+L.filename+" loaded");return}N("unexpected adapter response : "+q)}}):N(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function($,S){var N=this;if(!this.throttledSaves){this.loadDatabaseInternal($,S);return}this.throttledSaveDrain(function(L){if(L){N.throttledSavePending=!0,N.loadDatabaseInternal($,function(j){N.throttledCallbacks.length===0?N.throttledSavePending=!1:N.saveDatabase(),typeof S=="function"&&S(j)});return}else typeof S=="function"&&S(new Error("Unable to pause save throttling long enough to read database"))},$)},g.prototype.saveDatabaseInternal=function($){var S=$||function(j){if(j)throw j},N=this;if(!this.persistenceAdapter){S(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var L;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(N.ignoreAutosave=!1,L){S(new Error("adapter error - getLokiCopy called more than once"));return}var q=N.copy({removeNonSerializable:!0});return L=N.collections.map(function(ae){return[ae.dirty,ae.dirtyIds]}),N.collections.forEach(function(ae){ae.dirty=!1,ae.dirtyIds=[]}),q},function(q){N.ignoreAutosave=!1,q&&L&&N.collections.forEach(function(ae,ve){var ze=L[ve];ae.dirty=ae.dirty||ze[0],ae.dirtyIds=ae.dirtyIds.concat(ze[1])}),S(q)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(q){N.autosaveClearFlags(),S(q)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(q){S(q)}))},g.prototype.saveDatabase=function($){if(!this.throttledSaves){this.saveDatabaseInternal($);return}if(this.throttledSavePending){this.throttledCallbacks.push($);return}var S=this.throttledCallbacks;this.throttledCallbacks=[],S.unshift($),this.throttledSavePending=!0;var N=this;this.saveDatabaseInternal(function(L){N.throttledSavePending=!1,S.forEach(function(j){typeof j=="function"&&setTimeout(function(){j(L)},1)}),N.throttledCallbacks.length>0&&N.saveDatabase()})},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function($,S){var N=S||function(L,j){if(L)throw L};typeof $=="function"&&!S&&(N=$),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(j){N(j)}):N(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var $=0;$<this.collections.length;$++)if(this.collections[$].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var $=0;$<this.collections.length;$++)this.collections[$].dirty=!1},g.prototype.autosaveEnable=function($,S){this.autosave=!0;var N=5e3,L=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(N=this.autosaveInterval),this.autosaveHandle=setInterval(function(){L.autosaveDirty()&&!L.ignoreAutosave&&L.saveDatabase(S)},N)},g.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function ne($,S){return this.collection=$,this.filteredrows=[],this.filterInitialized=!1,this}ne.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},ne.prototype.toJSON=function(){var $=this.copy();return $.collection=null,$},ne.prototype.limit=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new ne(this.collection);return S.filteredrows=this.filteredrows.slice(0,$),S.filterInitialized=!0,S},ne.prototype.offset=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new ne(this.collection);return S.filteredrows=this.filteredrows.slice($),S.filterInitialized=!0,S},ne.prototype.copy=function(){var $=new ne(this.collection);return this.filteredrows.length>0&&($.filteredrows=this.filteredrows.slice()),$.filterInitialized=this.filterInitialized,$},ne.prototype.branch=ne.prototype.copy,ne.prototype.transform=function($,S){var N,L,j=this;if(typeof $=="string"&&this.collection.transforms.hasOwnProperty($)&&($=this.collection.transforms[$]),typeof $!="object"||!Array.isArray($))throw new Error("Invalid transform");for(typeof S<"u"&&($=o.resolveTransformParams($,S)),N=0;N<$.length;N++)switch(L=$[N],L.type){case"find":j.find(L.value);break;case"where":j.where(L.value);break;case"simplesort":j.simplesort(L.property,L.desc||L.options);break;case"compoundsort":j.compoundsort(L.value);break;case"sort":j.sort(L.value);break;case"limit":j=j.limit(L.value);break;case"offset":j=j.offset(L.value);break;case"map":j=j.map(L.value,L.dataOptions);break;case"eqJoin":j=j.eqJoin(L.joinData,L.leftJoinKey,L.rightJoinKey,L.mapFun,L.dataOptions);break;case"mapReduce":j=j.mapReduce(L.mapFunction,L.reduceFunction);break;case"update":j.update(L.value);break;case"remove":j.remove();break}return j},ne.prototype.sort=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=function(N,L){return function(j,q){return N(L[j],L[q])}}($,this.collection.data);return this.filteredrows.sort(S),this},ne.prototype.simplesort=function($,S){var N,L=10,j=this.collection.data.length,q=this.filteredrows.length,ae=this.collection.binaryIndices.hasOwnProperty($);if((typeof S>"u"||S===!1)&&(S={desc:!1}),S===!0&&(S={desc:!0}),q===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty($))return this.collection.ensureIndex($),this.filteredrows=this.collection.binaryIndices[$].values.slice(0),S.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!S.disableIndexIntersect&&ae&&(N=j/q,S.useJavascriptSorting&&(L=6),N<=L||S.forceIndexIntersect)){var ve,ze=this.filteredrows,He={};for(ve=0;ve<q;ve++)He[ze[ve]]=!0;var st=this.collection.binaryIndices[$].values;return this.filteredrows=st.filter(function(mt){return He[mt]}),S.desc&&this.filteredrows.reverse(),this}if(S.useJavascriptSorting)return this.sort(function(mt,pt){if(mt[$]===pt[$])return 0;if(mt[$]>pt[$])return 1;if(mt[$]<pt[$])return-1});var wt=function(mt,pt,Rt){var fr,qr,ut;return function(It,dn){return~mt.indexOf(".")?(ut=mt.split("."),fr=o.getIn(Rt[It],ut,!0),qr=o.getIn(Rt[dn],ut,!0)):(fr=Rt[It][mt],qr=Rt[dn][mt]),c(fr,qr,pt)}}($,S.desc,this.collection.data);return this.filteredrows.sort(wt),this},ne.prototype.compoundsort=function($){if($.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var S;if($.length===1)return S=$[0],Array.isArray(S)?this.simplesort(S[0],S[1]):this.simplesort(S,!1);for(var N=0,L=$.length;N<L;N+=1)S=$[N],Array.isArray(S)||($[N]=[S,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var j=function(q,ae){return function(ve,ze){return p(q,ae[ve],ae[ze])}}($,this.collection.data);return this.filteredrows.sort(j),this},ne.prototype.findOr=function($){var S=null,N=0,L=0,j=[],q=[],ae=0;this.count();for(var ve=0,ze=$.length;ve<ze;ve++)for(S=this.branch().find($[ve]).filteredrows,L=S.length,N=0;N<L;N++)ae=S[N],q[ae]===void 0&&(q[ae]=!0,j.push(ae));return this.filteredrows=j,this.filterInitialized=!0,this},ne.prototype.$or=ne.prototype.findOr;function re($,S){if($==="$regex")Array.isArray(S)?S=new RegExp(S[0],S[1]):S instanceof RegExp||(S=new RegExp(S));else if(typeof S=="object")for(var N in S)(N==="$regex"||typeof S[N]=="object")&&(S[N]=re(N,S[N]));return S}ne.prototype.findAnd=function($){for(var S=0,N=$.length;S<N;S++){if(this.count()===0)return this;this.find($[S])}return this},ne.prototype.$and=ne.prototype.findAnd,ne.prototype.find=function($,S){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var N=$||"getAll",L,j,q,ae,ve,ze,He,st=!1,wt=[],mt=[],pt=null;if(S=S||!1,typeof N=="object"){for(L in N)ae={},ae[L]=N[L],mt.push(ae),t.call(N,L)&&(j=L,q=N[L]);if(mt.length>1)return this.find({$and:mt},S)}if(!j||N==="getAll")return S&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(j==="$and"||j==="$or")return this[j](q),S&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(q===null||typeof q!="object"||q instanceof Date)ve="$eq",ze=q;else if(typeof q=="object"){for(He in q)if(t.call(q,He)){ve=He,ze=q[He];break}}else throw new Error("Do not know what you want to do.");(ve==="$regex"||typeof ze=="object")&&(ze=re(ve,ze));var Rt=j.indexOf(".")!==-1,fr=!this.filterInitialized;fr&&this.collection.binaryIndices[j]&&A[ve]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(j),st=!0,pt=this.collection.binaryIndices[j]),!st&&ve==="$in"&&Array.isArray(ze)&&typeof Set<"u"&&(ze=new Set(ze),ve="$inSet");var qr=T[ve],ut=this.collection.data,It=0,dn=0,Pi,qi=0,pn;if(this.filterInitialized){if(Pi=this.filteredrows,dn=Pi.length,Rt){for(j=j.split("."),It=0;It<dn;It++)if(qi=Pi[It],pn=ut[qi],m(pn,j,qr,ze,pn)&&(wt.push(qi),S))return this.filteredrows=wt,this}else for(It=0;It<dn;It++)if(qi=Pi[It],pn=ut[qi],qr(pn[j],ze,pn)&&(wt.push(qi),S))return this.filteredrows=wt,this}else if(st){var hs=this.collection.calculateRange(ve,j,ze);if(ve!=="$in"){for(It=hs[0];It<=hs[1];It++)if(A[ve]!==!0){if(A[ve](o.getIn(ut[pt.values[It]],j,Rt),ze)&&(wt.push(pt.values[It]),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else if(wt.push(pt.values[It]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0,dn=hs.length;It<dn;It++)if(wt.push(pt.values[hs[It]]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else if(dn=ut.length,Rt){for(j=j.split("."),It=0;It<dn;It++)if(pn=ut[It],m(pn,j,qr,ze,pn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0;It<dn;It++)if(pn=ut[It],qr(pn[j],ze,pn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this;return this.filteredrows=wt,this.filterInitialized=!0,this},ne.prototype.where=function($){var S,N=[];if(typeof $=="function")S=$;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var L=this.filteredrows.length;L--;)S(this.collection.data[this.filteredrows[L]])===!0&&N.push(this.filteredrows[L]);return this.filteredrows=N,this}else{for(var j=this.collection.data.length;j--;)S(this.collection.data[j])===!0&&N.push(j);return this.filteredrows=N,this.filterInitialized=!0,this}}catch(q){throw q}},ne.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},ne.prototype.data=function($){var S=[],N=this.collection.data,L,j,q,ae;if($=$||{},$.removeMeta&&!$.forceClones&&($.forceClones=!0,$.forceCloneMethod=$.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&($.forceClones=!0,$.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||$.forceClones){for(j=N.length,ae=$.forceCloneMethod||this.collection.cloneMethod,q=0;q<j;q++)L=x(N[q],ae),$.removeMeta&&(delete L.$loki,delete L.meta),S.push(L);return S}else return N.slice();else this.filterInitialized=!0;var ve=this.filteredrows;if(j=ve.length,this.collection.cloneObjects||$.forceClones)for(ae=$.forceCloneMethod||this.collection.cloneMethod,q=0;q<j;q++)L=x(N[ve[q]],ae),$.removeMeta&&(delete L.$loki,delete L.meta),S.push(L);else for(q=0;q<j;q++)S.push(N[ve[q]]);return S},ne.prototype.update=function($){if(typeof $!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var S,N=this.filteredrows.length,L=this.collection.data,j=0;j<N;j++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(S=x(L[this.filteredrows[j]],this.collection.cloneMethod),$(S),this.collection.update(S)):($(L[this.filteredrows[j]]),this.collection.update(L[this.filteredrows[j]]));return this},ne.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},ne.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}},ne.prototype.eqJoin=function($,S,N,L,j){var q=[],ae,ve=[],ze,He,st=[],wt=typeof S=="function",mt=typeof N=="function",pt={};if(q=this.data(j),ae=q.length,$ instanceof F)ve=$.chain().data(j);else if($ instanceof ne)ve=$.data(j);else if(Array.isArray($))ve=$;else throw new TypeError("joinData needs to be an array or result set");ze=ve.length;for(var Rt=0;Rt<ze;Rt++)He=mt?N(ve[Rt]):ve[Rt][N],pt[He]=ve[Rt];L||(L=function(qr,ut){return{left:qr,right:ut}});for(var fr=0;fr<ae;fr++)He=wt?S(q[fr]):q[fr][S],st.push(L(q[fr],pt[He]||{}));return this.collection=new F("joinData"),this.collection.insert(st),this.filteredrows=[],this.filterInitialized=!1,this},ne.prototype.map=function($,S){var N=this.data(S).map($);return this.collection=new F("mappedData"),this.collection.insert(N),this.filteredrows=[],this.filterInitialized=!1,this};function Q($,S,N){this.collection=$,this.name=S,this.rebuildPending=!1,this.options=N||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new ne($),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}Q.prototype=new C,Q.prototype.constructor=Q,Q.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},Q.prototype.rematerialize=function($){var S,N,L;$=$||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new ne(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var j=Object.isFrozen(this.filterPipeline);if($.hasOwnProperty("removeWhereFilters"))for(j&&(this.filterPipeline=this.filterPipeline.slice()),S=this.filterPipeline.length,N=S;N--;)this.filterPipeline[N].type==="where"&&(N!==this.filterPipeline.length-1&&(this.filterPipeline[N]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var q=this.filterPipeline;for(this.filterPipeline=[],S=q.length,L=0;L<S;L++)this.applyFind(q[L].val,q[L].uid);return j&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},Q.prototype.branchResultset=function($,S){var N=this.resultset.branch();return typeof $>"u"?N:N.transform($,S)},Q.prototype.toJSON=function(){var $=new Q(this.collection,this.name,this.options);return $.resultset=this.resultset,$.resultdata=[],$.resultsdirty=!0,$.filterPipeline=this.filterPipeline,$.sortFunction=this.sortFunction,$.sortCriteria=this.sortCriteria,$.sortCriteriaSimple=this.sortCriteriaSimple||null,$.sortDirty=this.sortDirty,$.collection=null,$},Q.prototype.removeFilters=function($){$=$||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var S=Object.isFrozen(this.filterPipeline),N=this.filterPipeline.length>0;this.filterPipeline=[],S&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,$.queueSortPhase===!0&&this.queueSortPhase(),N&&this.emit("filter")},Q.prototype.applySort=function($){return this.sortFunction=$,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},Q.prototype.applySimpleSort=function($,S){return this.sortCriteriaSimple={propname:$,options:S||!1},this.collection.disableFreeze||n(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},Q.prototype.applySortCriteria=function($){return this.sortCriteria=$,this.collection.disableFreeze||n(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},Q.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},Q.prototype.commit=function(){return this.cachedresultset=null,this},Q.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},Q.prototype._indexOfFilterWithId=function($){if(typeof $=="string"||typeof $=="number"){for(var S=0,N=this.filterPipeline.length;S<N;S+=1)if($===this.filterPipeline[S].uid)return S}return-1},Q.prototype._addFilter=function($){var S=Object.isFrozen(this.filterPipeline);S&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||n($),this.filterPipeline.push($),S&&Object.freeze(this.filterPipeline),this.resultset[$.type]($.val)},Q.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var $=this.filterPipeline,S=Object.isFrozen($);this.filterPipeline=[];for(var N=0,L=$.length;N<L;N+=1)this._addFilter($[N]);return S&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},Q.prototype.applyFilter=function($){var S=this._indexOfFilterWithId($.uid);if(S>=0){var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[S]=$,N&&(i($),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter($),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},Q.prototype.applyFind=function($,S){return this.applyFilter({type:"find",val:$,uid:S}),this},Q.prototype.applyWhere=function($,S){return this.applyFilter({type:"where",val:$,uid:S}),this},Q.prototype.removeFilter=function($){var S=this._indexOfFilterWithId($);if(S<0)throw new Error("Dynamic view does not contain a filter with ID: "+$);var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(S,1),N&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},Q.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},Q.prototype.data=function($){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data($)},Q.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var $=this;setTimeout(function(){$.rebuildPending&&($.rebuildPending=!1,$.emit("rebuild",$))},this.options.minRebuildInterval)}},Q.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var $=this;this.options.sortPriority==="active"?setTimeout(function(){$.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},Q.prototype.performSortPhase=function($){!this.sortDirty&&!this.resultsdirty||($=$||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),$.suppressRebuildEvent||this.emit("rebuild",this))},Q.prototype.evaluateDocument=function($,S){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var N=this.resultset.filteredrows,L=S?-1:N.indexOf(+$),j=N.length,q=new ne(this.collection);q.filteredrows=[$],q.filterInitialized=!0;for(var ae,ve=0,ze=this.filterPipeline.length;ve<ze;ve++)ae=this.filterPipeline[ve],q[ae.type](ae.val);var He=q.filteredrows.length===0?-1:0;if(!(L===-1&&He===-1)){if(L===-1&&He!==-1){N.push($),this.options.persistent&&this.resultdata.push(this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(L!==-1&&He===-1){L<j-1?(N.splice(L,1),this.options.persistent&&this.resultdata.splice(L,1)):(N.length=j-1,this.options.persistent&&(this.resultdata.length=j-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(L!==-1&&He!==-1){this.options.persistent&&(this.resultdata[L]=this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},Q.prototype.removeDocument=function($){var S,N,L,j={},q={},ae=[],ve=this.resultset,ze=this.resultset.filteredrows,He=ze.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray($)||($=[$]),L=$.length,N=0;N<L;N++)j[$[N]]=!0;for(S=0;S<He;S++)j[ze[S]]&&(q[S]=!0);Object.keys(q).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(wt,mt){return!q[mt]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(wt,mt){return!q[mt]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var st=function(wt){return function(mt){return mt<ve.filteredrows[wt]}};for(He=ve.filteredrows.length,S=0;S<He;S++)ae=$.filter(st(S)),ve.filteredrows[S]-=ae.length},Q.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}};function F($,S){this.name=$,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=$,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var N=this;S=S||{},S.hasOwnProperty("unique")&&(Array.isArray(S.unique)||(S.unique=[S.unique]),S.unique.forEach(function(He){N.uniqueNames.push(He)})),S.hasOwnProperty("exact")&&S.exact.forEach(function(He){N.constraints.exact[He]=new je(He)}),this.adaptiveBinaryIndices=S.hasOwnProperty("adaptiveBinaryIndices")?S.adaptiveBinaryIndices:!0,this.transactional=S.hasOwnProperty("transactional")?S.transactional:!1,this.cloneObjects=S.hasOwnProperty("clone")?S.clone:!1,this.cloneMethod=S.hasOwnProperty("cloneMethod")?S.cloneMethod:"parse-stringify",this.asyncListeners=S.hasOwnProperty("asyncListeners")?S.asyncListeners:!1,this.disableMeta=S.hasOwnProperty("disableMeta")?S.disableMeta:!1,this.disableChangesApi=S.hasOwnProperty("disableChangesApi")?S.disableChangesApi:!0,this.disableDeltaChangesApi=S.hasOwnProperty("disableDeltaChangesApi")?S.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=S.hasOwnProperty("autoupdate")?S.autoupdate:!1,this.serializableIndices=S.hasOwnProperty("serializableIndices")?S.serializableIndices:!0,this.disableFreeze=S.hasOwnProperty("disableFreeze")?S.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(S.ttl||-1,S.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var L=[];if(S&&S.indices)if(Object.prototype.toString.call(S.indices)==="[object Array]")L=S.indices;else if(typeof S.indices=="string")L=[S.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var j=0;j<L.length;j++)this.ensureIndex(L[j]);function q(He){var st=typeof Set=="function"?new Set:[];st.add||(st.add=function(wt){return this.indexOf(wt)===-1&&this.push(wt),this}),He.forEach(function(wt){st.add(wt.object)}),st.forEach(function(wt){if(!t.call(wt,"$loki"))return N.removeAutoUpdateObserver(wt);try{N.update(wt)}catch{}})}this.observerCallback=q;function ae(He,st){return st?ve(st,He):JSON.parse(JSON.stringify(He))}this.getChangeDelta=ae;function ve(He,st){var wt=st!==null&&typeof st=="object"?Object.keys(st):null;if(wt&&wt.length&&["string","boolean","number"].indexOf(typeof st)<0){for(var mt={},pt=0;pt<wt.length;pt++){var Rt=wt[pt];if(st.hasOwnProperty(Rt))if(!He.hasOwnProperty(Rt)||N.uniqueNames.indexOf(Rt)>=0||Rt=="$loki"||Rt=="meta")mt[Rt]=st[Rt];else{var fr=ve(He[Rt],st[Rt]);typeof fr<"u"&&fr!={}&&(mt[Rt]=fr)}}return Object.keys(mt).length===0?void 0:mt}else return He===st?void 0:st}this.getObjectDelta=ve;function ze(){N.changes=[]}this.getChanges=function(){return N.changes},this.flushChanges=ze,this.setChangesApi=function(He){N.disableChangesApi=!He,He||(N.disableDeltaChangesApi=!1)},this.on("delete",function(st){N.disableChangesApi||N.createChange(N.name,"R",st)}),this.on("warning",function(He){N.lokiConsoleWrapper.warn(He)}),ze()}F.prototype=new C,F.prototype.contructor=F,F.prototype.createChange=function($,S,N,L){this.changes.push({name:$,operation:S,obj:S=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(N,L):JSON.parse(JSON.stringify(N))})},F.prototype.insertMeta=function($){var S,N;if(!(this.disableMeta||!$)){if(Array.isArray($)){for(S=$.length,N=0;N<S;N++)$[N].hasOwnProperty("meta")||($[N].meta={}),$[N].meta.created=new Date().getTime(),$[N].meta.revision=0;return}$.meta||($.meta={}),$.meta.created=new Date().getTime(),$.meta.revision=0}},F.prototype.updateMeta=function($){return this.disableMeta||!$||(this.disableFreeze||($=s($),$.meta=s($.meta)),$.meta.updated=new Date().getTime(),$.meta.revision+=1),$},F.prototype.createInsertChange=function($){this.createChange(this.name,"I",$)},F.prototype.createUpdateChange=function($,S){this.createChange(this.name,"U",$,S)},F.prototype.insertMetaWithChange=function($){this.insertMeta($),this.createInsertChange($)},F.prototype.updateMetaWithChange=function($,S,N){return $=this.updateMeta($,N),this.createUpdateChange($,S),$},F.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},F.prototype.addAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.observe($,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},F.prototype.removeAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve($,this.observerCallback)},F.prototype.addTransform=function($,S){if(this.transforms.hasOwnProperty($))throw new Error("a transform by that name already exists");this.transforms[$]=S},F.prototype.getTransform=function($){return this.transforms[$]},F.prototype.setTransform=function($,S){this.transforms[$]=S},F.prototype.removeTransform=function($){delete this.transforms[$]},F.prototype.byExample=function($){var S,N,L;L=[];for(S in $)$.hasOwnProperty(S)&&L.push((N={},N[S]=$[S],N));return{$and:L}},F.prototype.findObject=function($){return this.findOne(this.byExample($))},F.prototype.findObjects=function($){return this.find(this.byExample($))},F.prototype.ttlDaemonFuncGen=function(){var $=this,S=this.ttl.age;return function(){var L=Date.now(),j=$.chain().where(function(ae){var ve=ae.meta.updated||ae.meta.created,ze=L-ve;return S<ze});j.remove()}},F.prototype.setTTL=function($,S){$<0?clearInterval(this.ttl.daemon):(this.ttl.age=$,this.ttl.ttlInterval=S,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),S))},F.prototype.prepareFullDocIndex=function(){for(var $=this.data.length,S=new Array($),N=0;N<$;N+=1)S[N]=N;return S},F.prototype.configureOptions=function($){$=$||{},$.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=$.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},F.prototype.ensureIndex=function($,S){if(typeof S>"u"&&(S=!1),$==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[$]&&!S&&!this.binaryIndices[$].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty($)&&!S)){var N={name:$,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[$]=N;var L=function(j,q){var ae,ve,ze=~j.indexOf(".")?j.split("."):!1;return function(He,st){if(ze?(ae=o.getIn(q[He],ze,!0),ve=o.getIn(q[st],ze,!0)):(ae=q[He][j],ve=q[st][j]),ae!==ve){if(a.lt(ae,ve,!1))return-1;if(a.gt(ae,ve,!1))return 1}return 0}}($,this.data);N.values.sort(L),N.dirty=!1,this.dirty=!0}},F.prototype.checkAllIndexes=function($){var S,N=this.binaryIndices,L=[],j;for(S in N)t.call(N,S)&&(j=this.checkIndex(S,$),j||L.push(S));return L},F.prototype.checkIndex=function($,S){S=S||{},S.randomSamplingFactor&&S.randomSampling!==!1&&(S.randomSampling=!0),S.randomSamplingFactor=S.randomSamplingFactor||.1,(S.randomSamplingFactor<0||S.randomSamplingFactor>1)&&(S.randomSamplingFactor=.1);var N=!0,L,j,q,ae,ve;if(!this.binaryIndices.hasOwnProperty($))throw new Error("called checkIndex on property without an index: "+$);if(this.adaptiveBinaryIndices||this.ensureIndex($),ve=this.binaryIndices[$].values,ae=ve.length,ae!==this.data.length)return S.repair&&this.ensureIndex($,!0),!1;if(ae===0)return!0;var ze=$.indexOf(".")!==-1;if(ae===1)N=ve[0]===0;else if(S.randomSampling){if(T.$lte(o.getIn(this.data[ve[0]],$,ze),o.getIn(this.data[ve[1]],$,ze))||(N=!1),T.$lte(o.getIn(this.data[ve[ae-2]],$,ze),o.getIn(this.data[ve[ae-1]],$,ze))||(N=!1),N){for(j=Math.floor((ae-1)*S.randomSamplingFactor),L=0;L<j-1;L++)if(q=Math.floor(Math.random()*(ae-1)),!T.$lte(o.getIn(this.data[ve[q]],$,ze),o.getIn(this.data[ve[q+1]],$,ze))){N=!1;break}}}else for(L=0;L<ae-1;L++)if(!T.$lte(o.getIn(this.data[ve[L]],$,ze),o.getIn(this.data[ve[L+1]],$,ze))){N=!1;break}return!N&&S.repair&&this.ensureIndex($,!0),N},F.prototype.getBinaryIndexValues=function($){var S,N=this.binaryIndices[$].values,L=[];for(S=0;S<N.length;S++)L.push(o.getIn(this.data[N[S]],$,!0));return L},F.prototype.getUniqueIndex=function($,S){var N=this.constraints.unique[$];return!N&&S?this.ensureUniqueIndex($):N},F.prototype.ensureUniqueIndex=function($){var S=this.constraints.unique[$];return S||this.uniqueNames.indexOf($)==-1&&this.uniqueNames.push($),this.constraints.unique[$]=S=new Te($),this.data.forEach(function(N){S.set(N)}),S},F.prototype.ensureAllIndexes=function($){var S,N=this.binaryIndices;for(S in N)t.call(N,S)&&this.ensureIndex(S,$)},F.prototype.flagBinaryIndexesDirty=function(){var $,S=this.binaryIndices;for($ in S)t.call(S,$)&&(S[$].dirty=!0)},F.prototype.flagBinaryIndexDirty=function($){this.binaryIndices[$]&&(this.binaryIndices[$].dirty=!0)},F.prototype.count=function($){return $?this.chain().find($).filteredrows.length:this.data.length},F.prototype.ensureId=function(){if(!this.idIndex){var $=this.data,S=0,N=$.length,L=new Array(N);for(S;S<N;S++)L[S]=$[S].$loki;this.idIndex=L}},F.prototype.ensureIdAsync=function($){this.async(function(){this.ensureId()},$)},F.prototype.addDynamicView=function($,S){var N=new Q(this,$,S);return this.DynamicViews.push(N),N},F.prototype.removeDynamicView=function($){this.DynamicViews=this.DynamicViews.filter(function(S){return S.name!==$})},F.prototype.getDynamicView=function($){for(var S=0;S<this.DynamicViews.length;S++)if(this.DynamicViews[S].name===$)return this.DynamicViews[S];return null},F.prototype.findAndUpdate=function($,S){typeof $=="function"?this.updateWhere($,S):this.chain().find($).update(S)},F.prototype.findAndRemove=function($){this.chain().find($).remove()},F.prototype.insert=function($,S){if(!Array.isArray($))return this.insertOne($);var N,L=[],j=S&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;j&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",$);for(var q=0,ae=$.length;q<ae;q++){if(N=this.insertOne($[q],!0),!N)return;L.push(N)}}finally{j&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",L),L=this.cloneObjects?x(L,this.cloneMethod):L,L.length===1?L[0]:L},F.prototype.insertOne=function($,S){var N=null,L;if(typeof $!="object"?N=new TypeError("Document needs to be an object"):$===null&&(N=new TypeError("Object cannot be null")),N!==null)throw this.emit("error",N),N;var j=this.cloneObjects?x($,this.cloneMethod):$;if(this.disableFreeze||(j=s(j)),this.disableMeta||(typeof j.meta>"u"?j.meta={revision:0,created:0}:this.disableFreeze||(j.meta=s(j.meta))),S||this.emit("pre-insert",j),!!this.add(j))return this.disableChangesApi?this.insertMeta(j):this.insertMetaWithChange(j),this.disableFreeze||n(j),L=this.cloneObjects?x(j,this.cloneMethod):j,S||this.emit("insert",L),this.addAutoUpdateObserver(L),L},F.prototype.clear=function($){var S=this;if($=$||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},$.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var N=Object.keys(this.binaryIndices);N.forEach(function(L){S.binaryIndices[L].dirty=!1,S.binaryIndices[L].values=[]})}},F.prototype.update=function($){var S,N,L;if(Array.isArray($)){L=$.length,S=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,S&&(this.adaptiveBinaryIndices=!1);try{for(N=0;N<L;N+=1)this.update($[N])}finally{S&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!t.call($,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var j=this.get($.$loki,!0),q,ae,ve,ze=this;if(!j)throw new Error("Trying to update a document not in collection.");q=j[0],ve=j[1],ae=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?x($,this.cloneMethod):$,this.emit("pre-update",$),this.uniqueNames.forEach(function(pt){ze.getUniqueIndex(pt,!0).update(q,ae)}),this.data[ve]=ae,ae!==$&&this.addAutoUpdateObserver($);for(var He=0;He<this.DynamicViews.length;He++)this.DynamicViews[He].evaluateDocument(ve,!1);var st;if(this.adaptiveBinaryIndices){var wt=this.binaryIndices;for(st in wt)this.adaptiveBinaryIndexUpdate(ve,st)}else this.flagBinaryIndexesDirty();this.idIndex[ve]=ae.$loki,this.isIncremental&&this.dirtyIds.push(ae.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?ae=this.updateMeta(ae):ae=this.updateMetaWithChange(ae,q),this.disableFreeze||n(ae);var mt;return this.cloneObjects?mt=x(ae,this.cloneMethod):mt=ae,this.emit("update",mt,q),mt}catch(pt){throw this.rollback(),this.lokiConsoleWrapper.error(pt.message),this.emit("error",pt),pt}},F.prototype.add=function($){if(typeof $!="object")throw new TypeError("Object being added needs to be an object");if(typeof $.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var S=this.maxId;$.$loki=S,this.disableMeta||($.meta.version=0);for(var N=0,L=this.uniqueNames.length;N<L;N++)this.getUniqueIndex(this.uniqueNames[N],!0).set($);this.idIndex&&this.idIndex.push(S),this.isIncremental&&this.dirtyIds.push(S),this.data.push($);var j=this.data.length-1,q=this.DynamicViews.length;for(N=0;N<q;N++)this.DynamicViews[N].evaluateDocument(j,!0);if(this.adaptiveBinaryIndices){var ae=this.binaryIndices;for(var ve in ae)this.adaptiveBinaryIndexInsert(j,ve)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?x($,this.cloneMethod):$}catch(ze){throw this.rollback(),this.lokiConsoleWrapper.error(ze.message),this.emit("error",ze),ze}},F.prototype.updateWhere=function($,S){var N=this.where($),L=0,j;try{for(L;L<N.length;L++)j=S(N[L]),this.update(j)}catch(q){this.rollback(),this.lokiConsoleWrapper.error(q.message)}},F.prototype.removeWhere=function($){var S;typeof $=="function"?(S=this.data.filter($),this.remove(S)):this.chain().find($).remove()},F.prototype.removeDataOnly=function(){this.remove(this.data.slice())},F.prototype.removeBatchByPositions=function($){var S=$.length,N={},L,j,q,ae=Object.keys(this.binaryIndices).length,ve=Object.keys(this.constraints.unique).length,ze=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,He,st=this;try{for(this.startTransaction(),this.ensureId(),q=0;q<S;q++)N[this.idIndex[$[q]]]=!0;if(L=this.DynamicViews.length,L>0||ae>0||ve>0){if(L>0)for(j=0;j<L;j++)this.DynamicViews[j].removeDocument($);if(this.adaptiveBinaryIndices&&!ze){var wt,mt=this.binaryIndices;for(wt in mt)this.adaptiveBinaryIndexRemove($,wt)}else this.flagBinaryIndexesDirty();ve&&this.uniqueNames.forEach(function(pt){var Rt=st.getUniqueIndex(pt);if(Rt)for(q=0;q<S;q++)He=st.data[$[q]],He[pt]!==null&&He[pt]!==void 0&&Rt.remove(He[pt])})}if(!this.disableChangesApi||this.events.delete.length>1)for(q=0;q<S;q++)this.emit("delete",this.data[$[q]]);if(this.data=this.data.filter(function(pt){return!N[pt.$loki]}),this.isIncremental)for(q=0;q<S;q++)this.dirtyIds.push(this.idIndex[$[q]]);this.idIndex=this.idIndex.filter(function(pt){return!N[pt]}),this.adaptiveBinaryIndices&&ze&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(pt){return this.rollback(),ze&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(pt.message),this.emit("error",pt),null}},F.prototype.removeBatch=function($){var S=$.length,N=this.data.length,L,j={},q=[];for(L=0;L<N;L++)j[this.data[L].$loki]=L;for(L=0;L<S;L++)typeof $[L]=="object"?q.push(j[$[L].$loki]):q.push(j[$[L]]);this.removeBatchByPositions(q)},F.prototype.remove=function($){if(typeof $=="number"&&($=this.get($)),typeof $!="object")throw new Error("Parameter is not an object");if(Array.isArray($)){this.removeBatch($);return}if(!t.call($,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var S=this.get($.$loki,!0),N=S[1],L=this;this.uniqueNames.forEach(function(ve){if($[ve]!==null&&typeof $[ve]<"u"){var ze=L.getUniqueIndex(ve);ze&&ze.remove($[ve])}});for(var j=0;j<this.DynamicViews.length;j++)this.DynamicViews[j].removeDocument(N);if(this.adaptiveBinaryIndices){var q,ae=this.binaryIndices;for(q in ae)this.adaptiveBinaryIndexRemove(N,q)}else this.flagBinaryIndexesDirty();return this.data.splice(N,1),this.removeAutoUpdateObserver($),this.idIndex.splice(N,1),this.isIncremental&&this.dirtyIds.push($.$loki),this.commit(),this.dirty=!0,this.emit("delete",S[0]),this.disableFreeze||($=s($)),delete $.$loki,delete $.meta,this.disableFreeze||i($),$}catch(ve){return this.rollback(),this.lokiConsoleWrapper.error(ve.message),this.emit("error",ve),null}},F.prototype.get=function($,S){this.idIndex||this.ensureId();var N=S||!1,L=this.idIndex,j=L.length-1,q=0,ae=q+j>>1;if($=typeof $=="number"?$:parseInt($,10),isNaN($))throw new TypeError("Passed id is not an integer");for(;L[q]<L[j];)ae=q+j>>1,L[ae]<$?q=ae+1:j=ae;return j===q&&L[q]===$?N?[this.data[q],q]:this.data[q]:null},F.prototype.getBinaryIndexPosition=function($,S){var N=o.getIn(this.data[$],S,!0),L=this.binaryIndices[S].values,j=this.calculateRange("$eq",S,N);if(j[0]===0&&j[1]===-1)return null;for(var q=j[0],ae=j[1],ve=q;ve<=ae;ve++)if(L[ve]===$)return ve;return null},F.prototype.adaptiveBinaryIndexInsert=function($,S){var N=S.indexOf(".")!==-1,L=this.binaryIndices[S].values,j=o.getIn(this.data[$],S,N);this.serializableIndices===!0&&j instanceof Date&&(this.data[$][S]=j.getTime(),j=o.getIn(this.data[$],S));var q=L.length===0?0:this.calculateRangeStart(S,j,!0,N);this.binaryIndices[S].values.splice(q,0,$)},F.prototype.adaptiveBinaryIndexUpdate=function($,S){var N,L=this.binaryIndices[S].values,j=L.length;for(N=0;N<j&&L[N]!==$;N++);this.binaryIndices[S].values.splice(N,1),this.adaptiveBinaryIndexInsert($,S)},F.prototype.adaptiveBinaryIndexRemove=function($,S,N){var L=this.binaryIndices[S],j,q,ae,ve,ze={},He,st,wt;if(Array.isArray($))if(ve=$.length,ve===1)$=$[0];else{for(ae=0;ae<ve;ae++)ze[$[ae]]=!0;if(L.values=L.values.filter(function(pt){return!ze[pt]}),N===!0)return;var mt=$.slice();for(mt.sort(function(pt,Rt){return pt-Rt}),j=L.values.length,q=0;q<j;q++){for(He=L.values[q],st=0,ae=0;ae<ve&&He>mt[ae];ae++)st++;L.values[q]-=st}return}if(wt=this.getBinaryIndexPosition($,S),wt===null)return null;if(L.values.splice(wt,1),N!==!0)for(j=L.values.length,q=0;q<j;q++)L.values[q]>$&&L.values[q]--},F.prototype.calculateRangeStart=function($,S,N,L){var j=this.data,q=this.binaryIndices[$].values,ae=0,ve=q.length-1,ze=0;if(q.length===0)return-1;for(o.getIn(j[q[ae]],$,L),o.getIn(j[q[ve]],$,L);ae<ve;)ze=ae+ve>>1,a.lt(o.getIn(j[q[ze]],$,L),S,!1)?ae=ze+1:ve=ze;var He=ae;return a.aeq(S,o.getIn(j[q[He]],$,L))?He:a.lt(S,o.getIn(j[q[He]],$,L),!1)?N?He:He-1:N?He+1:He},F.prototype.calculateRangeEnd=function($,S,N){var L=this.data,j=this.binaryIndices[$].values,q=0,ae=j.length-1,ve=0;if(j.length===0)return-1;for(o.getIn(L[j[q]],$,N),o.getIn(L[j[ae]],$,N);q<ae;)ve=q+ae>>1,a.lt(S,o.getIn(L[j[ve]],$,N),!1)?ae=ve:q=ve+1;var ze=ae;return a.aeq(S,o.getIn(L[j[ze]],$,N))?ze:a.gt(S,o.getIn(L[j[ze]],$,N),!1)?ze+1:a.aeq(S,o.getIn(L[j[ze-1]],$,N))?ze-1:ze},F.prototype.calculateRange=function($,S,N){var L=this.data,j=this.binaryIndices[S].values,q=0,ae=j.length-1,ve,ze,He;if(L.length===0)return[0,-1];var st=S.indexOf(".")!==-1,wt=o.getIn(L[j[q]],S,st),mt=o.getIn(L[j[ae]],S,st);switch($){case"$eq":case"$aeq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$dteq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$gt":if(a.gt(N,mt,!0))return[0,-1];if(a.gt(wt,N,!1))return[q,ae];break;case"$gte":if(a.gt(N,mt,!1))return[0,-1];if(a.gt(wt,N,!0))return[q,ae];break;case"$lt":if(a.lt(N,wt,!0))return[0,-1];if(a.lt(mt,N,!1))return[q,ae];break;case"$lte":if(a.lt(N,wt,!1))return[0,-1];if(a.lt(mt,N,!0))return[q,ae];break;case"$between":return a.gt(N[0],mt,!1)?[0,-1]:a.lt(N[1],wt,!1)?[0,-1]:(ve=this.calculateRangeStart(S,N[0],!1,st),He=this.calculateRangeEnd(S,N[1],st),ve<0&&ve++,He>ae&&He--,a.gt(o.getIn(L[j[ve]],S,st),N[0],!0)||ve++,a.lt(o.getIn(L[j[He]],S,st),N[1],!0)||He--,He<ve?[0,-1]:[ve,He]);case"$in":for(var pt=[],Rt=[],fr=0,qr=N.length;fr<qr;fr++)for(var ut=this.calculateRange("$eq",S,N[fr]),It=ut[0];It<=ut[1];It++)pt[It]===void 0&&(pt[It]=!0,Rt.push(It));return Rt}switch($){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":ve=this.calculateRangeStart(S,N,!1,st),ze=o.getIn(L[j[ve]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":He=this.calculateRangeEnd(S,N,st),o.getIn(L[j[He]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":return a.aeq(ze,N)?[ve,He]:[0,-1];case"$gt":return a.aeq(o.getIn(L[j[He]],S,st),N)?[He+1,ae]:[He,ae];case"$gte":return a.aeq(o.getIn(L[j[ve]],S,st),N)?[ve,ae]:[ve+1,ae];case"$lt":return a.aeq(o.getIn(L[j[ve]],S,st),N)?[q,ve-1]:[q,ve];case"$lte":return a.aeq(o.getIn(L[j[He]],S,st),N)?[q,He]:[q,He-1];default:return[0,L.length-1]}},F.prototype.by=function($,S){var N;if(S===void 0)return N=this,function(j){return N.by($,j)};var L=this.getUniqueIndex($,!0).get(S);return this.cloneObjects?x(L,this.cloneMethod):L},F.prototype.findOne=function($){$=$||{};var S=this.chain().find($,!0).data();return Array.isArray(S)&&S.length===0?null:this.cloneObjects?x(S[0],this.cloneMethod):S[0]},F.prototype.chain=function($,S){var N=new ne(this);return typeof $>"u"?N:N.transform($,S)},F.prototype.find=function($){return this.chain().find($).data()},F.prototype.findOneUnindexed=function($,S){for(var N=this.data.length,L;N--;)if(o.getIn(this.data[N],$,!0)===S)return L=this.data[N],L;return null},F.prototype.startTransaction=function(){if(this.transactional){this.cachedData=x(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].startTransaction()}},F.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].commit()}},F.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].rollback()}},F.prototype.async=function($,S){setTimeout(function(){if(typeof $=="function")$(),S();else throw new TypeError("Argument passed for async execution is not a function")},0)},F.prototype.where=function($){return this.chain().where($).data()},F.prototype.mapReduce=function($,S){try{return S(this.data.map($))}catch(N){throw N}},F.prototype.eqJoin=function($,S,N,L,j){return new ne(this).eqJoin($,S,N,L,j)},F.prototype.stages={},F.prototype.getStage=function($){return this.stages[$]||(this.stages[$]={}),this.stages[$]},F.prototype.commitLog=[],F.prototype.stage=function($,S){var N=JSON.parse(JSON.stringify(S));return this.getStage($)[S.$loki]=N,N},F.prototype.commitStage=function($,S){var N=this.getStage($),L,j=new Date().getTime();for(L in N)this.update(N[L]),this.commitLog.push({timestamp:j,message:S,data:JSON.parse(JSON.stringify(N[L]))});this.stages[$]={}},F.prototype.no_op=function(){},F.prototype.extract=function($){var S=0,N=this.data.length,L=Z($),j=[];for(S;S<N;S+=1)j.push(Ge(this.data[S],$,L));return j},F.prototype.max=function($){return Math.max.apply(null,this.extract($))},F.prototype.min=function($){return Math.min.apply(null,this.extract($))},F.prototype.maxRecord=function($){var S=0,N=this.data.length,L=Z($),j={index:0,value:void 0},q;for(S;S<N;S+=1)q!==void 0?q<Ge(this.data[S],$,L)&&(q=Ge(this.data[S],$,L),j.index=this.data[S].$loki):(q=Ge(this.data[S],$,L),j.index=this.data[S].$loki);return j.value=q,j},F.prototype.minRecord=function($){var S=0,N=this.data.length,L=Z($),j={index:0,value:void 0},q;for(S;S<N;S+=1)q!==void 0?q>Ge(this.data[S],$,L)&&(q=Ge(this.data[S],$,L),j.index=this.data[S].$loki):(q=Ge(this.data[S],$,L),j.index=this.data[S].$loki);return j.value=q,j},F.prototype.extractNumerical=function($){return this.extract($).map(se).filter(Number).filter(function(S){return!isNaN(S)})},F.prototype.avg=function($){return Pe(this.extractNumerical($))},F.prototype.stdDev=function($){return Ue(this.extractNumerical($))},F.prototype.mode=function($){var S={},N=this.extract($);N.forEach(function(ae){S[ae]?S[ae]+=1:S[ae]=1});var L,j,q;for(j in S)L?L<S[j]&&(q=j):(q=j,L=S[j]);return q},F.prototype.median=function($){var S=this.extractNumerical($);S.sort(ye);var N=Math.floor(S.length/2);return S.length%2?S[N]:(S[N-1]+S[N])/2};function Z($){return $.indexOf(".")!==-1}function se($){return parseFloat($,10)}function Ee($,S){return $+S}function ye($,S){return $-S}function Pe($){return $.reduce(Ee,0)/$.length}function Ue($){var S=Pe($),N=$.map(function(q){var ae=q-S,ve=ae*ae;return ve}),L=Pe(N),j=Math.sqrt(L);return j}function Ge($,S,N){if(N===!1)return $[S];for(var L=S.split("."),j=$;L.length>0;)j=j[L.shift()];return j}function it($,S,N){for(var L=0,j=$.length,q,ae;L<j;){if(ae=L+j>>1,q=N.apply(null,[S,$[ae]]),q===0)return{found:!0,index:ae};q<0?j=ae:L=ae+1}return{found:!1,index:j}}function _e($){return function(S,N){return it(S,N,$)}}function pe(){}pe.prototype={keys:[],values:[],sort:function($,S){return $<S?-1:$>S?1:0},setSort:function($){this.bs=new _e($)},bs:function(){return new _e(this.sort)},set:function($,S){var N=this.bs(this.keys,$);N.found?this.values[N.index]=S:(this.keys.splice(N.index,0,$),this.values.splice(N.index,0,S))},get:function($){return this.values[it(this.keys,$,this.sort).index]}};function Te($){this.field=$,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}Te.prototype.keyMap={},Te.prototype.lokiMap={},Te.prototype.set=function($){var S=$[this.field];if(S!==null&&typeof S<"u"){if(this.keyMap[S])throw new Error("Duplicate key for property "+this.field+": "+S);this.keyMap[S]=$,this.lokiMap[$.$loki]=S}},Te.prototype.get=function($){return this.keyMap[$]},Te.prototype.byId=function($){return this.keyMap[this.lokiMap[$]]},Te.prototype.update=function($,S){if(this.lokiMap[$.$loki]!==S[this.field]){var N=this.lokiMap[$.$loki];this.set(S),this.keyMap[N]=void 0}else this.keyMap[$[this.field]]=S},Te.prototype.remove=function($){var S=this.keyMap[$];if(S!==null&&typeof S<"u")this.keyMap[$]=void 0,this.lokiMap[S.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},Te.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function je($){this.index=Object.create(null),this.field=$}return je.prototype={set:function(S,N){this.index[S]?this.index[S].push(N):this.index[S]=[N]},remove:function(S,N){var L=this.index[S];for(var j in L)L[j]==N&&L.splice(j,1);L.length<1&&(this.index[S]=void 0)},get:function(S){return this.index[S]},clear:function(S){this.index={}}},g.deepFreeze=n,g.freeze=i,g.unFreeze=s,g.LokiOps=T,g.Collection=F,g.DynamicView=Q,g.Resultset=ne,g.KeyValueStore=pe,g.LokiMemoryAdapter=R,g.LokiPartitioningAdapter=M,g.LokiLocalStorageAdapter=V,g.LokiFsAdapter=U,g.persistenceAdapters={fs:U,localStorage:V},g.aeq=l,g.lt=u,g.gt=h,g.Comparators=a,g}()})})(VU);var nge=VU.exports;const ige=ro(nge);class j3{constructor(r,t){le(this,"map");le(this,"sortedKeys");le(this,"compare");this.map=new Map,this.sortedKeys=[],r?typeof r=="string"?this.compare=(n,i)=>t==="desc"?n.value[r]>i.value[r]?-1:n.value[r]<i.value[r]?1:0:n.value[r]>i.value[r]?1:n.value[r]<i.value[r]?-1:0:this.compare=r:this.compare=(n,i)=>n.key>i.key?1:n.key<i.key?-1:0}set(r,t){if(this.map.has(r)){const s=this.sortedKeys.indexOf(r);s!==-1&&this.sortedKeys.splice(s,1)}this.map.set(r,t);let n=0,i=this.sortedKeys.length;for(;n<i;){const s=Math.floor((n+i)/2);this.compare({key:r,value:t},{key:this.sortedKeys[s],value:this.map.get(this.sortedKeys[s])})<0?i=s:n=s+1}this.sortedKeys.splice(n,0,r)}get(r){return this.map.get(r)}*[Symbol.iterator](){for(const r of this.sortedKeys)yield{key:r,value:this.map.get(r)}}*reverse(){for(let r=this.sortedKeys.length-1;r>=0;r--){const t=this.sortedKeys[r];yield{key:t,value:this.map.get(t)}}}*keys(){for(const r of this.sortedKeys)yield r}*values(){for(const r of this.sortedKeys)yield this.map.get(r)}*entries(){for(const r of this.sortedKeys)yield[r,this.map.get(r)]}has(r){return this.map.has(r)}delete(r){if(this.map.delete(r)){const t=this.sortedKeys.indexOf(r);return t!==-1&&this.sortedKeys.splice(t,1),!0}return!1}get size(){return this.map.size}}function zT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function sge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function GU(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function oge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zT(e.outputLen),zT(e.blockLen)}function age(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function lge(e,r){GU(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const cE={number:zT,bool:sge,bytes:GU,hash:oge,exists:age,output:lge};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YU=e=>e instanceof Uint8Array,fE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),qa=(e,r)=>e<<32-r|e>>>r,uge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!uge)throw new Error("Non little-endian hardware is not supported");const cge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function UT(e){if(!YU(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=cge[e[t]];return r}function fge(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ZU(e){if(typeof e=="string"&&(e=fge(e)),!YU(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let hge=class{clone(){return this._cloneInto()}};function XU(e){const r=n=>e().update(ZU(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function dge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let pge=class extends hge{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=fE(this.buffer)}update(r){cE.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=ZU(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=fE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){cE.exists(this),cE.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;dge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=fE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const vge=(e,r,t)=>e&r^~e&t,gge=(e,r,t)=>e&r^e&t^r&t,yge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vu=new Uint32Array(64);let JU=class extends pge{constructor(){super(64,32,8,!1),this.A=qu[0]|0,this.B=qu[1]|0,this.C=qu[2]|0,this.D=qu[3]|0,this.E=qu[4]|0,this.F=qu[5]|0,this.G=qu[6]|0,this.H=qu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Vu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Vu[c-15],m=Vu[c-2],w=qa(p,7)^qa(p,18)^p>>>3,b=qa(m,17)^qa(m,19)^m>>>10;Vu[c]=b+Vu[c-7]+w+Vu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const p=qa(a,6)^qa(a,11)^qa(a,25),m=h+p+vge(a,l,u)+yge[c]+Vu[c]|0,b=(qa(n,2)^qa(n,13)^qa(n,22))+gge(n,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Vu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},mge=class extends JU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const g_=XU(()=>new JU);XU(()=>new mge);const EB=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],SB=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function kB(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function bge(e){if(!e)throw new Error("No seed provided");const r=g_(e),t=SB[r[0]%SB.length],n=EB[r[1]%EB.length];return`${kB(t)} ${kB(n)}`}let _f;const wge=()=>_f||(_f=Fe.db.addDynamicView("latest_by_follows",{persist:!0}),_f.applyFind({kind:1}),_f.applySimpleSort("created_at",{desc:!0}),_f.applyWhere(e=>ct.getFollowDistance(e.pubkey)<=1),_f);let Ed;const $ge=()=>Ed||(Ed=Fe.db.addDynamicView("latest_by_everyone",{persist:!0}),Ed.applyFind({kind:1}),Ed.applySimpleSort("created_at",{desc:!0}),Ed),Aw={loaded:!1,saveEvents:On.throttle(()=>{const e=wge().data().slice(0,50),r=$ge().data().slice(0,50),t=Fe.notifications.eventIds.map(s=>Fe.db.by("id",s)).slice(0,50);let n=[];for(const s of Fe.directMessagesByUser.values())s.eventIds.forEach(o=>{n.push(Fe.db.by("id",o))});n=n.slice(0,100);const i=Array.from(Fe.keyValueEvents.values()).slice(0,50);hn.setItem("latestMsgs",e),hn.setItem("latestMsgsByEveryone",r),hn.setItem("notificationEvents",t),hn.setItem("dms",n),hn.setItem("keyValueEvents",i),console.log("saved latestMsgs",e.length),console.log("saved latestMsgsByEveryone",r.length)},5e3),saveProfilesAndFollows:On.debounce(()=>{const e=me.getPubKey(),r=[Fe.db.find({kind:0,pubkey:e}),...Fe.db.find({kind:0})],t=Fe.db.find({kind:3}).filter(s=>s.pubkey===e||ct.isFollowing(e,s.pubkey)),n=[Fe.db.findOne({kind:3,pubkey:e})];let i=0;for(const s of t.map(o=>[JSON.stringify(o).length,o]).sort((o,a)=>o[0]-a[0]))i+s[0]<5e5&&(i+=s[0],n.push(s[1]));hn.setItem("profileEvents",r.slice(0,50)),hn.setItem("followEvents",n.slice(0,50))},5e3),loadEvents:async function(){const e=await hn.getItem("latestMsgs"),r=await hn.getItem("latestMsgsByEveryone"),t=await hn.getItem("followEvents"),n=await hn.getItem("profileEvents"),i=await hn.getItem("notificationEvents"),s=await hn.getItem("dms"),o=await hn.getItem("keyValueEvents");this.loaded=!0,Array.isArray(t)&&t.forEach(a=>Fe.handle(a)),Array.isArray(n)&&n.forEach(a=>Fe.handle(a)),Array.isArray(e)&&e.forEach(a=>{Fe.handle(a)}),Array.isArray(r)&&r.forEach(a=>{Fe.handle(a)}),Array.isArray(i)&&i.forEach(a=>{Fe.handle(a)}),Array.isArray(s)&&s.forEach(a=>{Fe.handle(a)}),Array.isArray(o)&&o.forEach(a=>{Fe.handle(a)})}};var WT={exports:{}};(function(e,r){const{hasOwnProperty:t}=Object.prototype,n=T();n.configure=T,n.stringify=n,n.default=n,r.stringify=n,r.configure=T,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(_){return _.length<5e3&&!i.test(_)?`"${_}"`:JSON.stringify(_)}function o(_){if(_.length>200)return _.sort();for(let A=1;A<_.length;A++){const x=_[A];let I=A;for(;I!==0&&_[I-1]>x;)_[I]=_[I-1],I--;_[I]=x}return _}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(_){return a.call(_)!==void 0&&_.length!==0}function u(_,A,x){_.length<x&&(x=_.length);const I=A===","?"":" ";let O=`"0":${I}${_[0]}`;for(let C=1;C<x;C++)O+=`${A}"${C}":${I}${_[C]}`;return O}function h(_){if(t.call(_,"circularValue")){const A=_.circularValue;if(typeof A=="string")return`"${A}"`;if(A==null)return A;if(A===Error||A===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function c(_,A){let x;if(t.call(_,A)&&(x=_[A],typeof x!="boolean"))throw new TypeError(`The "${A}" argument must be of type boolean`);return x===void 0?!0:x}function p(_,A){let x;if(t.call(_,A)){if(x=_[A],typeof x!="number")throw new TypeError(`The "${A}" argument must be of type number`);if(!Number.isInteger(x))throw new TypeError(`The "${A}" argument must be an integer`);if(x<1)throw new RangeError(`The "${A}" argument must be >= 1`)}return x===void 0?1/0:x}function m(_){return _===1?"1 item":`${_} items`}function w(_){const A=new Set;for(const x of _)(typeof x=="string"||typeof x=="number")&&A.add(String(x));return A}function b(_){if(t.call(_,"strict")){const A=_.strict;if(typeof A!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(A)return x=>{let I=`Object can not safely be stringified. Received type ${typeof x}`;throw typeof x!="function"&&(I+=` (${x.toString()})`),new Error(I)}}}function T(_){_={..._};const A=b(_);A&&(_.bigint===void 0&&(_.bigint=!1),"circularValue"in _||(_.circularValue=Error));const x=h(_),I=c(_,"bigint"),O=c(_,"deterministic"),C=p(_,"maximumDepth"),g=p(_,"maximumBreadth");function R(re,Q,F,Z,se,Ee){let ye=Q[re];switch(typeof ye=="object"&&ye!==null&&typeof ye.toJSON=="function"&&(ye=ye.toJSON(re)),ye=Z.call(Q,re,ye),typeof ye){case"string":return s(ye);case"object":{if(ye===null)return"null";if(F.indexOf(ye)!==-1)return x;let Pe="",Ue=",";const Ge=Ee;if(Array.isArray(ye)){if(ye.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(ye),se!==""&&(Ee+=se,Pe+=`
${Ee}`,Ue=`,
${Ee}`);const $=Math.min(ye.length,g);let S=0;for(;S<$-1;S++){const L=R(String(S),ye,F,Z,se,Ee);Pe+=L!==void 0?L:"null",Pe+=Ue}const N=R(String(S),ye,F,Z,se,Ee);if(Pe+=N!==void 0?N:"null",ye.length-1>g){const L=ye.length-g-1;Pe+=`${Ue}"... ${m(L)} not stringified"`}return se!==""&&(Pe+=`
${Ge}`),F.pop(),`[${Pe}]`}let it=Object.keys(ye);const _e=it.length;if(_e===0)return"{}";if(C<F.length+1)return'"[Object]"';let pe="",Te="";se!==""&&(Ee+=se,Ue=`,
${Ee}`,pe=" ");const je=Math.min(_e,g);O&&!l(ye)&&(it=o(it)),F.push(ye);for(let $=0;$<je;$++){const S=it[$],N=R(S,ye,F,Z,se,Ee);N!==void 0&&(Pe+=`${Te}${s(S)}:${pe}${N}`,Te=Ue)}if(_e>g){const $=_e-g;Pe+=`${Te}"...":${pe}"${m($)} not stringified"`,Te=Ue}return se!==""&&Te.length>1&&(Pe=`
${Ee}${Pe}
${Ge}`),F.pop(),`{${Pe}}`}case"number":return isFinite(ye)?String(ye):A?A(ye):"null";case"boolean":return ye===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(ye);default:return A?A(ye):void 0}}function M(re,Q,F,Z,se,Ee){switch(typeof Q=="object"&&Q!==null&&typeof Q.toJSON=="function"&&(Q=Q.toJSON(re)),typeof Q){case"string":return s(Q);case"object":{if(Q===null)return"null";if(F.indexOf(Q)!==-1)return x;const ye=Ee;let Pe="",Ue=",";if(Array.isArray(Q)){if(Q.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(Q),se!==""&&(Ee+=se,Pe+=`
${Ee}`,Ue=`,
${Ee}`);const _e=Math.min(Q.length,g);let pe=0;for(;pe<_e-1;pe++){const je=M(String(pe),Q[pe],F,Z,se,Ee);Pe+=je!==void 0?je:"null",Pe+=Ue}const Te=M(String(pe),Q[pe],F,Z,se,Ee);if(Pe+=Te!==void 0?Te:"null",Q.length-1>g){const je=Q.length-g-1;Pe+=`${Ue}"... ${m(je)} not stringified"`}return se!==""&&(Pe+=`
${ye}`),F.pop(),`[${Pe}]`}F.push(Q);let Ge="";se!==""&&(Ee+=se,Ue=`,
${Ee}`,Ge=" ");let it="";for(const _e of Z){const pe=M(_e,Q[_e],F,Z,se,Ee);pe!==void 0&&(Pe+=`${it}${s(_e)}:${Ge}${pe}`,it=Ue)}return se!==""&&it.length>1&&(Pe=`
${Ee}${Pe}
${ye}`),F.pop(),`{${Pe}}`}case"number":return isFinite(Q)?String(Q):A?A(Q):"null";case"boolean":return Q===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(Q);default:return A?A(Q):void 0}}function U(re,Q,F,Z,se){switch(typeof Q){case"string":return s(Q);case"object":{if(Q===null)return"null";if(typeof Q.toJSON=="function"){if(Q=Q.toJSON(re),typeof Q!="object")return U(re,Q,F,Z,se);if(Q===null)return"null"}if(F.indexOf(Q)!==-1)return x;const Ee=se;if(Array.isArray(Q)){if(Q.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(Q),se+=Z;let pe=`
${se}`;const Te=`,
${se}`,je=Math.min(Q.length,g);let $=0;for(;$<je-1;$++){const N=U(String($),Q[$],F,Z,se);pe+=N!==void 0?N:"null",pe+=Te}const S=U(String($),Q[$],F,Z,se);if(pe+=S!==void 0?S:"null",Q.length-1>g){const N=Q.length-g-1;pe+=`${Te}"... ${m(N)} not stringified"`}return pe+=`
${Ee}`,F.pop(),`[${pe}]`}let ye=Object.keys(Q);const Pe=ye.length;if(Pe===0)return"{}";if(C<F.length+1)return'"[Object]"';se+=Z;const Ue=`,
${se}`;let Ge="",it="",_e=Math.min(Pe,g);l(Q)&&(Ge+=u(Q,Ue,g),ye=ye.slice(Q.length),_e-=Q.length,it=Ue),O&&(ye=o(ye)),F.push(Q);for(let pe=0;pe<_e;pe++){const Te=ye[pe],je=U(Te,Q[Te],F,Z,se);je!==void 0&&(Ge+=`${it}${s(Te)}: ${je}`,it=Ue)}if(Pe>g){const pe=Pe-g;Ge+=`${it}"...": "${m(pe)} not stringified"`,it=Ue}return it!==""&&(Ge=`
${se}${Ge}
${Ee}`),F.pop(),`{${Ge}}`}case"number":return isFinite(Q)?String(Q):A?A(Q):"null";case"boolean":return Q===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(Q);default:return A?A(Q):void 0}}function V(re,Q,F){switch(typeof Q){case"string":return s(Q);case"object":{if(Q===null)return"null";if(typeof Q.toJSON=="function"){if(Q=Q.toJSON(re),typeof Q!="object")return V(re,Q,F);if(Q===null)return"null"}if(F.indexOf(Q)!==-1)return x;let Z="";if(Array.isArray(Q)){if(Q.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(Q);const Ue=Math.min(Q.length,g);let Ge=0;for(;Ge<Ue-1;Ge++){const _e=V(String(Ge),Q[Ge],F);Z+=_e!==void 0?_e:"null",Z+=","}const it=V(String(Ge),Q[Ge],F);if(Z+=it!==void 0?it:"null",Q.length-1>g){const _e=Q.length-g-1;Z+=`,"... ${m(_e)} not stringified"`}return F.pop(),`[${Z}]`}let se=Object.keys(Q);const Ee=se.length;if(Ee===0)return"{}";if(C<F.length+1)return'"[Object]"';let ye="",Pe=Math.min(Ee,g);l(Q)&&(Z+=u(Q,",",g),se=se.slice(Q.length),Pe-=Q.length,ye=","),O&&(se=o(se)),F.push(Q);for(let Ue=0;Ue<Pe;Ue++){const Ge=se[Ue],it=V(Ge,Q[Ge],F);it!==void 0&&(Z+=`${ye}${s(Ge)}:${it}`,ye=",")}if(Ee>g){const Ue=Ee-g;Z+=`${ye}"...":"${m(Ue)} not stringified"`}return F.pop(),`{${Z}}`}case"number":return isFinite(Q)?String(Q):A?A(Q):"null";case"boolean":return Q===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(Q);default:return A?A(Q):void 0}}function ne(re,Q,F){if(arguments.length>1){let Z="";if(typeof F=="number"?Z=" ".repeat(Math.min(F,10)):typeof F=="string"&&(Z=F.slice(0,10)),Q!=null){if(typeof Q=="function")return R("",{"":re},[],Q,Z,"");if(Array.isArray(Q))return M("",re,[],w(Q),Z,"")}if(Z.length!==0)return U("",re,[],Z,"")}return V("",re,[])}return ne}})(WT,WT.exports);var _ge=WT.exports;const QU=ro(_ge);QU.configure;const xge=QU;function KT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ege(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function eW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Sge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");KT(e.outputLen),KT(e.blockLen)}function kge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Tge(e,r){eW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Wf={number:KT,bool:Ege,bytes:eW,hash:Sge,exists:kge,output:Tge},hE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Va=(e,r)=>e<<32-r|e>>>r,Ige=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ige)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Age(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function H3(e){if(typeof e=="string"&&(e=Age(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Oge(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let tW=class{clone(){return this._cloneInto()}};function rW(e){const r=n=>e().update(H3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function nW(e=32){if(hE&&typeof hE.getRandomValues=="function")return hE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Cge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let Pge=class extends tW{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=dE(this.buffer)}update(r){Wf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=H3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=dE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Wf.exists(this),Wf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Cge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=dE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Nge=(e,r,t)=>e&r^~e&t,Rge=(e,r,t)=>e&r^e&t^r&t,Dge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yu=new Uint32Array(64);let iW=class extends Pge{constructor(){super(64,32,8,!1),this.A=Gu[0]|0,this.B=Gu[1]|0,this.C=Gu[2]|0,this.D=Gu[3]|0,this.E=Gu[4]|0,this.F=Gu[5]|0,this.G=Gu[6]|0,this.H=Gu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Yu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Yu[c-15],m=Yu[c-2],w=Va(p,7)^Va(p,18)^p>>>3,b=Va(m,17)^Va(m,19)^m>>>10;Yu[c]=b+Yu[c-7]+w+Yu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const p=Va(a,6)^Va(a,11)^Va(a,25),m=h+p+Nge(a,l,u)+Dge[c]+Yu[c]|0,b=(Va(n,2)^Va(n,13)^Va(n,22))+Rge(n,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Yu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Bge=class extends iW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Ow=rW(()=>new iW);rW(()=>new Bge);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sW=BigInt(0),y_=BigInt(1),Mge=BigInt(2),m_=e=>e instanceof Uint8Array,Lge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Rp(e){if(!m_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Lge[e[t]];return r}function oW(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function z3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Dp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");r[t]=s}return r}function as(e){return z3(Rp(e))}function U3(e){if(!m_(e))throw new Error("Uint8Array expected");return z3(Rp(Uint8Array.from(e).reverse()))}const wc=(e,r)=>Dp(e.toString(16).padStart(r*2,"0")),aW=(e,r)=>wc(e,r).reverse(),Fge=e=>Dp(oW(e));function Ti(e,r,t){let n;if(typeof r=="string")try{n=Dp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(m_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Ys(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!m_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function jge(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function b_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Hge(e){let r;for(r=0;e>sW;e>>=y_,r+=1);return r}const zge=(e,r)=>e>>BigInt(r)&y_,Uge=(e,r,t)=>e|(t?y_:sW)<<BigInt(r),W3=e=>(Mge<<BigInt(e-1))-y_,pE=e=>new Uint8Array(e),TB=e=>Uint8Array.from(e);function lW(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=pE(e),i=pE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=pE())=>{i=a(TB([0]),c),n=a(),c.length!==0&&(i=a(TB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const p=[];for(;c<r;){n=a();const m=n.slice();p.push(m),c+=n.length}return Ys(...p)};return(c,p)=>{o(),l(c);let m;for(;!(m=p(u()));)l();return o(),m}}const Wge={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function av(e,r,t={}){const n=(i,s,o)=>{const a=Wge[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Kge=Object.freeze(Object.defineProperty({__proto__:null,bitGet:zge,bitLen:Hge,bitMask:W3,bitSet:Uge,bytesToHex:Rp,bytesToNumberBE:as,bytesToNumberLE:U3,concatBytes:Ys,createHmacDrbg:lW,ensureBytes:Ti,equalBytes:jge,hexToBytes:Dp,hexToNumber:z3,numberToBytesBE:wc,numberToBytesLE:aW,numberToHexUnpadded:oW,numberToVarBytesBE:Fge,utf8ToBytes:b_,validateObject:av},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vi=BigInt(0),An=BigInt(1),Nf=BigInt(2),qge=BigInt(3),qT=BigInt(4),IB=BigInt(5),AB=BigInt(8);BigInt(9);BigInt(16);function ti(e,r){const t=e%r;return t>=vi?t:r+t}function Vge(e,r,t){if(t<=vi||r<vi)throw new Error("Expected power/modulo > 0");if(t===An)return vi;let n=An;for(;r>vi;)r&An&&(n=n*e%t),e=e*e%t,r>>=An;return n}function To(e,r,t){let n=e;for(;r-- >vi;)n*=n,n%=t;return n}function VT(e,r){if(e===vi||r<=vi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ti(e,r),n=r,i=vi,s=An;for(;t!==vi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==An)throw new Error("invert: does not exist");return ti(i,r)}function Gge(e){const r=(e-An)/Nf;let t,n,i;for(t=e-An,n=0;t%Nf===vi;t/=Nf,n++);for(i=Nf;i<e&&Vge(i,r,e)!==e-An;i++);if(n===1){const o=(e+An)/qT;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+An)/Nf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let b=a.sqr(p);m<u&&!a.eql(b,a.ONE);m++)b=a.sqr(b);const w=a.pow(h,An<<BigInt(u-m-1));h=a.sqr(w),c=a.mul(c,w),p=a.mul(p,h),u=m}return c}}function Yge(e){if(e%qT===qge){const r=(e+An)/qT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%AB===IB){const r=(e-IB)/AB;return function(n,i){const s=n.mul(i,Nf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Nf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Gge(e)}const Zge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uW(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Zge.reduce((n,i)=>(n[i]="function",n),r);return av(e,t)}function Xge(e,r,t){if(t<vi)throw new Error("Expected power > 0");if(t===vi)return e.ONE;if(t===An)return r;let n=e.ONE,i=r;for(;t>vi;)t&An&&(n=e.mul(n,i)),i=e.sqr(i),t>>=An;return n}function Jge(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function K3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Qge(e,r,t=!1,n={}){if(e<=vi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=K3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Yge(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:W3(i),ZERO:vi,ONE:An,create:l=>ti(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return vi<=l&&l<e},is0:l=>l===vi,isOdd:l=>(l&An)===An,neg:l=>ti(-l,e),eql:(l,u)=>l===u,sqr:l=>ti(l*l,e),add:(l,u)=>ti(l+u,e),sub:(l,u)=>ti(l-u,e),mul:(l,u)=>ti(l*u,e),pow:(l,u)=>Xge(a,l,u),div:(l,u)=>ti(l*VT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>VT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Jge(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?aW(l,s):wc(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?U3(l):as(l)}});return Object.freeze(a)}function eye(e,r,t=!1){e=Ti("privateHash",e);const n=e.length,i=K3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?U3(e):as(e);return ti(s,r-An)+An}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tye=BigInt(0),vE=BigInt(1);function rye(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>tye;)s&vE&&(o=o.add(a)),a=a.double(),s>>=vE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,h=u;for(let c=0;c<o;c++){h=u,l.push(h);for(let p=1;p<a;p++)h=h.add(u),l.push(h);u=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,h=e.BASE;const c=BigInt(2**i-1),p=2**i,m=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=m,T>l&&(T-=p,o+=vE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?h=h.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function cW(e){return uW(e.Fp),av(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...K3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nye(e){const r=cW(e);av(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:iye,hexToBytes:sye}=Kge,Kf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Kf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:iye(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Kf,t=typeof e=="string"?sye(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Kf._parseInt(t.subarray(2)),{d:o,l:a}=Kf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},fa=BigInt(0),Mn=BigInt(1),Bl=BigInt(2),Cw=BigInt(3),OB=BigInt(4);function oye(e){const r=nye(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Ys(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&fa<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Rp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:as(Ti("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=ti(x,A)),a(x),x}const u=new Map;function h(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ti("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,Cw),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,R=t.mul(A,A),M=t.mul(x,x),U=t.mul(I,I),V=t.mul(A,x);return V=t.add(V,V),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,U),C=t.add(O,C),O=t.sub(M,C),C=t.add(M,C),C=t.mul(O,C),O=t.mul(V,O),g=t.mul(_,g),U=t.mul(b,U),V=t.sub(R,U),V=t.mul(b,V),V=t.add(V,g),g=t.add(R,R),R=t.add(g,R),R=t.add(R,U),R=t.mul(R,V),C=t.add(C,R),U=t.mul(x,I),U=t.add(U,U),R=t.mul(U,V),O=t.sub(O,R),g=t.mul(U,M),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){h(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,R=t.ZERO;const M=r.a,U=t.mul(r.b,Cw);let V=t.mul(T,x),ne=t.mul(_,I),re=t.mul(A,O),Q=t.add(T,_),F=t.add(x,I);Q=t.mul(Q,F),F=t.add(V,ne),Q=t.sub(Q,F),F=t.add(T,A);let Z=t.add(x,O);return F=t.mul(F,Z),Z=t.add(V,re),F=t.sub(F,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(ne,re),Z=t.sub(Z,C),R=t.mul(M,F),C=t.mul(U,re),R=t.add(C,R),C=t.sub(ne,R),R=t.add(ne,R),g=t.mul(C,R),ne=t.add(V,V),ne=t.add(ne,V),re=t.mul(M,re),F=t.mul(U,F),ne=t.add(ne,re),re=t.sub(V,re),re=t.mul(M,re),F=t.add(F,re),V=t.mul(ne,F),g=t.add(g,V),V=t.mul(Z,F),C=t.mul(Q,C),C=t.sub(C,V),V=t.mul(Q,ne),R=t.mul(Z,R),R=t.add(R,V),new c(C,g,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return m.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===fa)return T;if(a(b),b===Mn)return this;const{endo:_}=r;if(!_)return m.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,R=this;for(;x>fa||O>fa;)x&Mn&&(C=C.add(R)),O&Mn&&(g=g.add(R)),R=R.double(),x>>=Mn,O>>=Mn;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:R,f:M}=this.wNAF(O),{p:U,f:V}=this.wNAF(g);R=m.constTimeNegate(I,R),U=m.constTimeNegate(C,U),U=new c(t.mul(U.px,x.beta),U.py,U.pz),_=R.add(U),A=M.add(V)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===fa||C===Mn||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Mn)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Mn?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Rp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const p=r.nBitLength,m=rye(c,r.endo?Math.ceil(p/2):p);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function aye(e){const r=cW(e);return av(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function lye(e){const r=aye(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(F){return fa<F&&F<t.ORDER}function a(F){return ti(F,n)}function l(F){return VT(F,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:c,isWithinCurveOrder:p}=oye({...r,toBytes(F,Z,se){const Ee=Z.toAffine(),ye=t.toBytes(Ee.x),Pe=Ys;return se?Pe(Uint8Array.from([Z.hasEvenY()?2:3]),ye):Pe(Uint8Array.from([4]),ye,t.toBytes(Ee.y))},fromBytes(F){const Z=F.length,se=F[0],Ee=F.subarray(1);if(Z===i&&(se===2||se===3)){const ye=as(Ee);if(!o(ye))throw new Error("Point is not on curve");const Pe=c(ye);let Ue=t.sqrt(Pe);const Ge=(Ue&Mn)===Mn;return(se&1)===1!==Ge&&(Ue=t.neg(Ue)),{x:ye,y:Ue}}else if(Z===s&&se===4){const ye=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:ye,y:Pe}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),m=F=>Rp(wc(F,r.nByteLength));function w(F){const Z=n>>Mn;return F>Z}function b(F){return w(F)?a(-F):F}const T=(F,Z,se)=>as(F.slice(Z,se));class _{constructor(Z,se,Ee){this.r=Z,this.s=se,this.recovery=Ee,this.assertValidity()}static fromCompact(Z){const se=r.nByteLength;return Z=Ti("compactSignature",Z,se*2),new _(T(Z,0,se),T(Z,se,2*se))}static fromDER(Z){const{r:se,s:Ee}=Kf.toSig(Ti("DER",Z));return new _(se,Ee)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:se,s:Ee,recovery:ye}=this,Pe=g(Ti("msgHash",Z));if(ye==null||![0,1,2,3].includes(ye))throw new Error("recovery id invalid");const Ue=ye===2||ye===3?se+r.n:se;if(Ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=ye&1?"03":"02",it=u.fromHex(Ge+m(Ue)),_e=l(Ue),pe=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,pe,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Dp(this.toDERHex())}toDERHex(){return Kf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dp(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const A={isValidPrivateKey(F){try{return h(F),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const F=r.randomBytes(t.BYTES+8),Z=eye(F,n);return wc(Z,r.nByteLength)},precompute(F=8,Z=u.BASE){return Z._setWindowSize(F),Z.multiply(BigInt(3)),Z}};function x(F,Z=!0){return u.fromPrivateKey(F).toRawBytes(Z)}function I(F){const Z=F instanceof Uint8Array,se=typeof F=="string",Ee=(Z||se)&&F.length;return Z?Ee===i||Ee===s:se?Ee===2*i||Ee===2*s:F instanceof u}function O(F,Z,se=!0){if(I(F))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(h(F)).toRawBytes(se)}const C=r.bits2int||function(F){const Z=as(F),se=F.length*8-r.nBitLength;return se>0?Z>>BigInt(se):Z},g=r.bits2int_modN||function(F){return a(C(F))},R=W3(r.nBitLength);function M(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(fa<=F&&F<R))throw new Error(`bigint expected < 2^${r.nBitLength}`);return wc(F,r.nByteLength)}function U(F,Z,se=V){if(["recovered","canonical"].some(S=>S in se))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:ye}=r;let{lowS:Pe,prehash:Ue,extraEntropy:Ge}=se;Pe==null&&(Pe=!0),F=Ti("msgHash",F),Ue&&(F=Ti("prehashed msgHash",Ee(F)));const it=g(F),_e=h(Z),pe=[M(_e),M(it)];if(Ge!=null){const S=Ge===!0?ye(t.BYTES):Ge;pe.push(Ti("extraEntropy",S,t.BYTES))}const Te=Ys(...pe),je=it;function $(S){const N=C(S);if(!p(N))return;const L=l(N),j=u.BASE.multiply(N).toAffine(),q=a(j.x);if(q===fa)return;const ae=a(L*a(je+q*_e));if(ae===fa)return;let ve=(j.x===q?0:2)|Number(j.y&Mn),ze=ae;return Pe&&w(ae)&&(ze=b(ae),ve^=1),new _(q,ze,ve)}return{seed:Te,k2sig:$}}const V={lowS:r.lowS,prehash:!1},ne={lowS:r.lowS,prehash:!1};function re(F,Z,se=V){const{seed:Ee,k2sig:ye}=U(F,Z,se);return lW(r.hash.outputLen,r.nByteLength,r.hmac)(Ee,ye)}u.BASE._setWindowSize(8);function Q(F,Z,se,Ee=ne){var j;const ye=F;if(Z=Ti("msgHash",Z),se=Ti("publicKey",se),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:Ue}=Ee;let Ge,it;try{if(typeof ye=="string"||ye instanceof Uint8Array)try{Ge=_.fromDER(ye)}catch(q){if(!(q instanceof Kf.Err))throw q;Ge=_.fromCompact(ye)}else if(typeof ye=="object"&&typeof ye.r=="bigint"&&typeof ye.s=="bigint"){const{r:q,s:ae}=ye;Ge=new _(q,ae)}else throw new Error("PARSE");it=u.fromHex(se)}catch(q){if(q.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ge.hasHighS())return!1;Ue&&(Z=r.hash(Z));const{r:_e,s:pe}=Ge,Te=g(Z),je=l(pe),$=a(Te*je),S=a(_e*je),N=(j=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:j.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:Q,ProjectivePoint:u,Signature:_,utils:A}}function uye(e,r){const t=e.ORDER;let n=fa;for(let p=t-Mn;p%Bl===fa;p/=Bl)n+=Mn;const i=n,s=(t-Mn)/Bl**i,o=(s-Mn)/Bl,a=Bl**i-Mn,l=Bl**(i-Mn),u=e.pow(r,s),h=e.pow(r,(s+Mn)/Bl);let c=(p,m)=>{let w=u,b=e.pow(m,a),T=e.sqr(b);T=e.mul(T,m);let _=e.mul(p,T);_=e.pow(_,o),_=e.mul(_,b),b=e.mul(_,m),T=e.mul(_,p);let A=e.mul(T,b);_=e.pow(A,l);let x=e.eql(_,e.ONE);b=e.mul(T,h),_=e.mul(A,w),T=e.cmov(b,T,x),A=e.cmov(_,A,x);for(let I=i;I>Mn;I--){let O=Bl**(I-Bl),C=e.pow(A,O);const g=e.eql(C,e.ONE);b=e.mul(T,w),w=e.mul(w,w),C=e.mul(A,w),T=e.cmov(b,T,g),A=e.cmov(C,A,g)}return{isValid:x,value:T}};if(e.ORDER%OB===Cw){const p=(e.ORDER-Cw)/OB,m=e.sqrt(e.neg(r));c=(w,b)=>{let T=e.sqr(b);const _=e.mul(w,b);T=e.mul(T,_);let A=e.pow(T,p);A=e.mul(A,_);const x=e.mul(A,m),I=e.mul(e.sqr(A),b),O=e.eql(I,w);let C=e.cmov(x,A,O);return{isValid:O,value:C}}}return c}function cye(e,r){if(uW(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=uye(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,h,c;i=e.sqr(n),i=e.mul(i,r.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,r.B),a=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,r.A),s=e.sqr(o),u=e.sqr(a),l=e.mul(u,r.A),s=e.add(s,l),s=e.mul(s,o),u=e.mul(u,a),l=e.mul(u,r.B),s=e.add(s,l),h=e.mul(i,o);const{isValid:p,value:m}=t(s,u);c=e.mul(i,n),c=e.mul(c,m),h=e.cmov(h,o,p),c=e.cmov(c,m,p);const w=e.isOdd(n)===e.isOdd(c);return c=e.cmov(e.neg(c),c,w),h=e.div(h,a),{x:h,y:c}}}function fye(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return b_(e);throw new Error("DST must be Uint8Array or string")}const hye=as;function oc(e,r){if(e<0||e>=1<<8*r)throw new Error(`bad I2OSP call: value=${e} length=${r}`);const t=Array.from({length:r}).fill(0);for(let n=r-1;n>=0;n--)t[n]=e&255,e>>>=8;return new Uint8Array(t)}function dye(e,r){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function Ey(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function q3(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function pye(e,r,t,n){Ey(e),Ey(r),q3(t),r.length>255&&(r=n(Ys(b_("H2C-OVERSIZE-DST-"),r)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(t/i);if(o>255)throw new Error("Invalid xmd length");const a=Ys(r,oc(r.length,1)),l=oc(0,s),u=oc(t,2),h=new Array(o),c=n(Ys(l,e,u,oc(0,1),a));h[0]=n(Ys(c,oc(1,1),a));for(let m=1;m<=o;m++){const w=[dye(c,h[m-1]),oc(m+1,1),a];h[m]=n(Ys(...w))}return Ys(...h).slice(0,t)}function vye(e,r,t,n,i){if(Ey(e),Ey(r),q3(t),r.length>255){const s=Math.ceil(2*n/8);r=i.create({dkLen:s}).update(b_("H2C-OVERSIZE-DST-")).update(r).digest()}if(t>65535||r.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(e).update(oc(t,2)).update(r).update(oc(r.length,1)).digest()}function CB(e,r,t){av(t,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:l}=t;Ey(e),q3(r);const u=fye(l),h=n.toString(2).length,c=Math.ceil((h+i)/8),p=r*s*c;let m;if(a==="xmd")m=pye(e,u,p,o);else if(a==="xof")m=vye(e,u,p,i,o);else if(a==="_internal_pass")m=e;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(r);for(let b=0;b<r;b++){const T=new Array(s);for(let _=0;_<s;_++){const A=c*(_+b*s),x=m.subarray(A,A+c);T[_]=ti(hye(x),n)}w[b]=T}return w}function gye(e,r){const t=r.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,l]=t.map(u=>u.reduce((h,c)=>e.add(e.mul(h,n),c)));return n=e.div(s,o),i=e.mul(i,e.div(a,l)),{x:n,y:i}}}function yye(e,r,t){if(typeof r!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=CB(n,2,{...t,DST:t.DST,...i}),o=e.fromAffine(r(s[0])),a=e.fromAffine(r(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=CB(n,1,{...t,DST:t.encodeDST,...i}),o=e.fromAffine(r(s[0])).clearCofactor();return o.assertValidity(),o}}}let fW=class extends tW{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Wf.hash(r);const n=H3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Wf.exists(this),this.iHash.update(r),this}digestInto(r){Wf.exists(this),Wf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hW=(e,r,t)=>new fW(e,r).update(t).digest();hW.create=(e,r)=>new fW(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mye(e){return{hash:e,hmac:(r,...t)=>hW(e,r,Oge(...t)),randomBytes:nW}}function bye(e,r){const t=n=>lye({...e,...mye(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const w_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),dW=BigInt(1),Nw=BigInt(2),PB=(e,r)=>(e+r/Nw)/r;function pW(e){const r=w_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,h=u*u*e%r,c=To(h,t,r)*h%r,p=To(c,t,r)*h%r,m=To(p,Nw,r)*u%r,w=To(m,i,r)*m%r,b=To(w,s,r)*w%r,T=To(b,a,r)*b%r,_=To(T,l,r)*T%r,A=To(_,a,r)*b%r,x=To(A,t,r)*h%r,I=To(x,o,r)*w%r,O=To(I,n,r)*u%r,C=To(O,Nw,r);if(!Ac.eql(Ac.sqr(C),e))throw new Error("Cannot find square root");return C}const Ac=Qge(w_,void 0,void 0,{sqrt:pW}),ts=bye({a:BigInt(0),b:BigInt(7),Fp:Ac,n:Pw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Pw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-dW*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=PB(s*e,r),l=PB(-n*e,r);let u=ti(e-a*t-l*i,r),h=ti(-a*n-l*s,r);const c=u>o,p=h>o;if(c&&(u=r-u),p&&(h=r-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:p,k2:h}}}},Ow),$_=BigInt(0),vW=e=>typeof e=="bigint"&&$_<e&&e<w_,wye=e=>typeof e=="bigint"&&$_<e&&e<Pw,NB={};function Rw(e,...r){let t=NB[e];if(t===void 0){const n=Ow(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Ys(n,n),NB[e]=t}return Ow(Ys(t,...r))}const V3=e=>e.toRawBytes(!0).slice(1),GT=e=>wc(e,32),gE=e=>ti(e,w_),Sy=e=>ti(e,Pw),G3=ts.ProjectivePoint,$ye=(e,r,t)=>G3.BASE.multiplyAndAddUnsafe(e,r,t);function YT(e){let r=ts.utils.normPrivateKeyToScalar(e),t=G3.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Sy(-r),bytes:V3(t)}}function gW(e){if(!vW(e))throw new Error("bad x: need 0 < x < p");const r=gE(e*e),t=gE(r*e+BigInt(7));let n=pW(t);n%Nw!==$_&&(n=gE(-n));const i=new G3(e,n,dW);return i.assertValidity(),i}function yW(...e){return Sy(as(Rw("BIP0340/challenge",...e)))}function _ye(e){return YT(e).bytes}function xye(e,r,t=nW(32)){const n=Ti("message",e),{bytes:i,scalar:s}=YT(r),o=Ti("auxRand",t,32),a=GT(s^as(Rw("BIP0340/aux",o))),l=Rw("BIP0340/nonce",a,i,n),u=Sy(as(l));if(u===$_)throw new Error("sign failed: k is zero");const{bytes:h,scalar:c}=YT(u),p=yW(h,i,n),m=new Uint8Array(64);if(m.set(h,0),m.set(GT(Sy(c+p*s)),32),!mW(m,n,i))throw new Error("sign: Invalid signature produced");return m}function mW(e,r,t){const n=Ti("signature",e,64),i=Ti("message",r),s=Ti("publicKey",t,32);try{const o=gW(as(s)),a=as(n.subarray(0,32));if(!vW(a))return!1;const l=as(n.subarray(32,64));if(!wye(l))return!1;const u=yW(GT(a),V3(o),i),h=$ye(o,l,Sy(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}const dm={getPublicKey:_ye,sign:xye,verify:mW,utils:{randomPrivateKey:ts.utils.randomPrivateKey,lift_x:gW,pointToBytes:V3,numberToBytesBE:wc,bytesToNumberBE:as,taggedHash:Rw,mod:ti}},Eye=gye(Ac,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(r=>BigInt(r)))),Sye=cye(Ac,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ac.create(BigInt("-11"))});yye(ts.ProjectivePoint,e=>{const{x:r,y:t}=Sye(Ac.create(e[0]));return Eye(r,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ac.ORDER,m:1,k:128,expand:"xmd",hash:Ow});const D1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,kye=Object.freeze(Object.defineProperty({__proto__:null,crypto:D1},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tye=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Iye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),eh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),sa=(e,r)=>e<<32-r|e>>>r,bW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!bW)throw new Error("Non little-endian hardware is not supported");const Aye=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Zs(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Aye[e[t]];return r}function Oc(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}const wW=async()=>{};async function Oye(e,r,t){let n=Date.now();for(let i=0;i<e;i++){t(i);const s=Date.now()-n;s>=0&&s<r||(await wW(),n+=s)}}function Y3(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function pm(e){if(typeof e=="string"&&(e=Y3(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Vd(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let Z3=class{clone(){return this._cloneInto()}};const Cye=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function Pye(e,r){if(r!==void 0&&(typeof r!="object"||!Cye(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function Wc(e){const r=n=>e().update(pm(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Nye(e){const r=(n,i)=>e(i).update(pm(n)).digest(),t=e({});return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=n=>e(n),r}function $W(e=32){if(D1&&typeof D1.getRandomValues=="function")return D1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Rye=Object.freeze(Object.defineProperty({__proto__:null,Hash:Z3,asyncLoop:Oye,bytesToHex:Zs,checkOpts:Pye,concatBytes:Vd,createView:eh,hexToBytes:Oc,isLE:bW,nextTick:wW,randomBytes:$W,rotr:sa,toBytes:pm,u32:Iye,u8:Tye,utf8ToBytes:Y3,wrapConstructor:Wc,wrapConstructorWithOpts:Nye},Symbol.toStringTag,{value:"Module"}));function Dw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function _W(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function cc(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function xW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Dw(e.outputLen),Dw(e.blockLen)}function EW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function SW(e,r){cc(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const vc={number:Dw,bool:_W,bytes:cc,hash:xW,exists:EW,output:SW},Dye=Object.freeze(Object.defineProperty({__proto__:null,bool:_W,bytes:cc,default:vc,exists:EW,hash:xW,number:Dw,output:SW},Symbol.toStringTag,{value:"Module"}));function Bye(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}class X3 extends Z3{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=eh(this.buffer)}update(r){vc.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=pm(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=eh(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){vc.exists(this),vc.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Bye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=eh(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}}const Mye=(e,r,t)=>e&r^~e&t,Lye=(e,r,t)=>e&r^e&t^r&t,Fye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xu=new Uint32Array(64);class kW extends X3{constructor(){super(64,32,8,!1),this.A=Zu[0]|0,this.B=Zu[1]|0,this.C=Zu[2]|0,this.D=Zu[3]|0,this.E=Zu[4]|0,this.F=Zu[5]|0,this.G=Zu[6]|0,this.H=Zu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Xu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Xu[c-15],m=Xu[c-2],w=sa(p,7)^sa(p,18)^p>>>3,b=sa(m,17)^sa(m,19)^m>>>10;Xu[c]=b+Xu[c-7]+w+Xu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const p=sa(a,6)^sa(a,11)^sa(a,25),m=h+p+Mye(a,l,u)+Fye[c]+Xu[c]|0,b=(sa(n,2)^sa(n,13)^sa(n,22))+Lye(n,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Xu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class jye extends kW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const lv=Wc(()=>new kW),Hye=Wc(()=>new jye),zye=Object.freeze(Object.defineProperty({__proto__:null,sha224:Hye,sha256:lv},Symbol.toStringTag,{value:"Module"}));var J3={};Object.defineProperty(J3,"__esModule",{value:!0});var Q3=J3.wordlist=void 0;Q3=J3.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Xs={};const Uye=zc(Dye);var Bp={},ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.output=ji.exists=ji.hash=ji.bytes=ji.bool=ji.number=void 0;function Bw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ji.number=Bw;function TW(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ji.bool=TW;function eP(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}ji.bytes=eP;function IW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bw(e.outputLen),Bw(e.blockLen)}ji.hash=IW;function AW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}ji.exists=AW;function OW(e,r){eP(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}ji.output=OW;const Wye={number:Bw,bool:TW,bytes:eP,hash:IW,exists:AW,output:OW};ji.default=Wye;var CW={},tP={};const Kye=zc(kye);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=Kye,t=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);e.u8=t;const n=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));e.u32=n;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);e.createView=i;const s=(I,O)=>I<<32-O|I>>>O;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(I,O)=>O.toString(16).padStart(2,"0"));function a(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let O="";for(let C=0;C<I.length;C++)O+=o[I[C]];return O}e.bytesToHex=a;function l(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const O=new Uint8Array(I.length/2);for(let C=0;C<O.length;C++){const g=C*2,R=I.slice(g,g+2),M=Number.parseInt(R,16);if(Number.isNaN(M)||M<0)throw new Error("Invalid byte sequence");O[C]=M}return O}e.hexToBytes=l;const u=async()=>{};e.nextTick=u;async function h(I,O,C){let g=Date.now();for(let R=0;R<I;R++){C(R);const M=Date.now()-g;M>=0&&M<O||(await(0,e.nextTick)(),g+=M)}}e.asyncLoop=h;function c(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}e.utf8ToBytes=c;function p(I){if(typeof I=="string"&&(I=c(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}e.toBytes=p;function m(...I){if(!I.every(g=>g instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const O=I.reduce((g,R)=>g+R.length,0),C=new Uint8Array(O);for(let g=0,R=0;g<I.length;g++){const M=I[g];C.set(M,R),R+=M.length}return C}e.concatBytes=m;class w{clone(){return this._cloneInto()}}e.Hash=w;const b=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function T(I,O){if(O!==void 0&&(typeof O!="object"||!b(O)))throw new TypeError("Options should be object or undefined");return Object.assign(I,O)}e.checkOpts=T;function _(I){const O=g=>I().update(p(g)).digest(),C=I();return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=()=>I(),O}e.wrapConstructor=_;function A(I){const O=(g,R)=>I(R).update(p(g)).digest(),C=I({});return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=g=>I(g),O}e.wrapConstructorWithOpts=A;function x(I=32){if(r.crypto&&typeof r.crypto.getRandomValues=="function")return r.crypto.getRandomValues(new Uint8Array(I));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=x})(tP);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const r=ji,t=tP;class n extends t.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,r.default.hash(o);const l=(0,t.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,h=new Uint8Array(u);h.set(l.length>u?o.create().update(l).digest():l);for(let c=0;c<h.length;c++)h[c]^=54;this.iHash.update(h),this.oHash=o.create();for(let c=0;c<h.length;c++)h[c]^=106;this.oHash.update(h),h.fill(0)}update(o){return r.default.exists(this),this.iHash.update(o),this}digestInto(o){r.default.exists(this),r.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:l,finished:u,destroyed:h,blockLen:c,outputLen:p}=this;return o=o,o.finished=u,o.destroyed=h,o.blockLen=c,o.outputLen=p,o.oHash=a._cloneInto(o.oHash),o.iHash=l._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new n(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new n(s,o)})(CW);Object.defineProperty(Bp,"__esModule",{value:!0});Bp.pbkdf2Async=Bp.pbkdf2=void 0;const bb=ji,qye=CW,hp=tP;function PW(e,r,t,n){bb.default.hash(e);const i=(0,hp.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(bb.default.number(s),bb.default.number(o),bb.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,hp.toBytes)(r),u=(0,hp.toBytes)(t),h=new Uint8Array(o),c=qye.hmac.create(e,l),p=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:h,PRF:c,PRFSalt:p}}function NW(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function Vye(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=PW(e,r,t,n);let u;const h=new Uint8Array(4),c=(0,hp.createView)(h),p=new Uint8Array(a.outputLen);for(let m=1,w=0;w<s;m++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,m,!1),(u=l._cloneInto(u)).update(h).digestInto(p),b.set(p.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(p).digestInto(p);for(let _=0;_<b.length;_++)b[_]^=p[_]}}return NW(a,l,o,u,p)}Bp.pbkdf2=Vye;async function Gye(e,r,t,n){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:l,PRFSalt:u}=PW(e,r,t,n);let h;const c=new Uint8Array(4),p=(0,hp.createView)(c),m=new Uint8Array(l.outputLen);for(let w=1,b=0;b<s;w++,b+=l.outputLen){const T=a.subarray(b,b+l.outputLen);p.setInt32(0,w,!1),(h=u._cloneInto(h)).update(c).digestInto(m),T.set(m.subarray(0,T.length)),await(0,hp.asyncLoop)(i-1,o,_=>{l._cloneInto(h).update(m).digestInto(m);for(let A=0;A<T.length;A++)T[A]^=m[A]})}return NW(l,u,a,h,m)}Bp.pbkdf2Async=Gye;const Yye=zc(zye),wb=BigInt(2**32-1),ZT=BigInt(32);function RW(e,r=!1){return r?{h:Number(e&wb),l:Number(e>>ZT&wb)}:{h:Number(e>>ZT&wb)|0,l:Number(e&wb)|0}}function Zye(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=RW(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Xye=(e,r)=>BigInt(e>>>0)<<ZT|BigInt(r>>>0),Jye=(e,r,t)=>e>>>t,Qye=(e,r,t)=>e<<32-t|r>>>t,eme=(e,r,t)=>e>>>t|r<<32-t,tme=(e,r,t)=>e<<32-t|r>>>t,rme=(e,r,t)=>e<<64-t|r>>>t-32,nme=(e,r,t)=>e>>>t-32|r<<64-t,ime=(e,r)=>r,sme=(e,r)=>e,ome=(e,r,t)=>e<<t|r>>>32-t,ame=(e,r,t)=>r<<t|e>>>32-t,lme=(e,r,t)=>r<<t-32|e>>>64-t,ume=(e,r,t)=>e<<t-32|r>>>64-t;function cme(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const fme=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),hme=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,dme=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),pme=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,vme=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),gme=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,sr={fromBig:RW,split:Zye,toBig:Xye,shrSH:Jye,shrSL:Qye,rotrSH:eme,rotrSL:tme,rotrBH:rme,rotrBL:nme,rotr32H:ime,rotr32L:sme,rotlSH:ome,rotlSL:ame,rotlBH:lme,rotlBL:ume,add:cme,add3L:fme,add3H:hme,add4L:dme,add4H:pme,add5H:gme,add5L:vme},[yme,mme]=sr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ju=new Uint32Array(80),Qu=new Uint32Array(80);class vm extends X3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:c,Fl:p,Gh:m,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,h,c,p,m,w,b,T]}set(r,t,n,i,s,o,a,l,u,h,c,p,m,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=c|0,this.Fl=p|0,this.Gh=m|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Ju[x]=r.getUint32(t),Qu[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Ju[x-15]|0,O=Qu[x-15]|0,C=sr.rotrSH(I,O,1)^sr.rotrSH(I,O,8)^sr.shrSH(I,O,7),g=sr.rotrSL(I,O,1)^sr.rotrSL(I,O,8)^sr.shrSL(I,O,7),R=Ju[x-2]|0,M=Qu[x-2]|0,U=sr.rotrSH(R,M,19)^sr.rotrBH(R,M,61)^sr.shrSH(R,M,6),V=sr.rotrSL(R,M,19)^sr.rotrBL(R,M,61)^sr.shrSL(R,M,6),ne=sr.add4L(g,V,Qu[x-7],Qu[x-16]),re=sr.add4H(ne,C,U,Ju[x-7],Ju[x-16]);Ju[x]=re|0,Qu[x]=ne|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:c,El:p,Fh:m,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=sr.rotrSH(c,p,14)^sr.rotrSH(c,p,18)^sr.rotrBH(c,p,41),O=sr.rotrSL(c,p,14)^sr.rotrSL(c,p,18)^sr.rotrBL(c,p,41),C=c&m^~c&b,g=p&w^~p&T,R=sr.add5L(A,O,g,mme[x],Qu[x]),M=sr.add5H(R,_,I,C,yme[x],Ju[x]),U=R|0,V=sr.rotrSH(n,i,28)^sr.rotrBH(n,i,34)^sr.rotrBH(n,i,39),ne=sr.rotrSL(n,i,28)^sr.rotrBL(n,i,34)^sr.rotrBL(n,i,39),re=n&s^n&a^s&a,Q=i&o^i&l^o&l;_=b|0,A=T|0,b=m|0,T=w|0,m=c|0,w=p|0,{h:c,l:p}=sr.add(u|0,h|0,M|0,U|0),u=a|0,h=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const F=sr.add3L(U,ne,Q);n=sr.add3H(F,M,V,re),i=F|0}({h:n,l:i}=sr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=sr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=sr.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=sr.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:c,l:p}=sr.add(this.Eh|0,this.El|0,c|0,p|0),{h:m,l:w}=sr.add(this.Fh|0,this.Fl|0,m|0,w|0),{h:b,l:T}=sr.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=sr.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,h,c,p,m,w,b,T,_,A)}roundClean(){Ju.fill(0),Qu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class bme extends vm{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class wme extends vm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class $me extends vm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const XT=Wc(()=>new vm),_me=Wc(()=>new bme),xme=Wc(()=>new wme),Eme=Wc(()=>new $me),Sme=Object.freeze(Object.defineProperty({__proto__:null,SHA512:vm,sha384:Eme,sha512:XT,sha512_224:_me,sha512_256:xme},Symbol.toStringTag,{value:"Module"})),kme=zc(Sme),Tme=zc(Rye),DW=zc(Gce);Object.defineProperty(Xs,"__esModule",{value:!0});var BW=Xs.mnemonicToSeedSync=Xs.mnemonicToSeed=qW=Xs.validateMnemonic=Xs.entropyToMnemonic=Xs.mnemonicToEntropy=zW=Xs.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const MW=Uye,LW=Bp,Ime=Yye,FW=kme,Ame=Tme,$b=DW,Ome=e=>e[0]==="";function jW(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function rP(e){const r=jW(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function HW(e){MW.default.bytes(e,16,20,24,28,32)}function Cme(e,r=128){if(MW.default.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return KW((0,Ame.randomBytes)(r/8),e)}var zW=Xs.generateMnemonic=Cme;const Pme=e=>{const r=8-e.length/4;return new Uint8Array([(0,Ime.sha256)(e)[0]>>r<<r])};function UW(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),$b.utils.chain($b.utils.checksum(1,Pme),$b.utils.radix2(11,!0),$b.utils.alphabet(e))}function WW(e,r){const{words:t}=rP(e),n=UW(r).decode(t);return HW(n),n}Xs.mnemonicToEntropy=WW;function KW(e,r){return HW(e),UW(r).encode(e).join(Ome(r)?"":" ")}Xs.entropyToMnemonic=KW;function Nme(e,r){try{WW(e,r)}catch{return!1}return!0}var qW=Xs.validateMnemonic=Nme;const VW=e=>jW(`mnemonic${e}`);function Rme(e,r=""){return(0,LW.pbkdf2Async)(FW.sha512,rP(e).nfkd,VW(r),{c:2048,dkLen:64})}Xs.mnemonicToSeed=Rme;function Dme(e,r=""){return(0,LW.pbkdf2)(FW.sha512,rP(e).nfkd,VW(r),{c:2048,dkLen:64})}BW=Xs.mnemonicToSeedSync=Dme;class GW extends Z3{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,vc.hash(r);const n=pm(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return vc.exists(this),this.iHash.update(r),this}digestInto(r){vc.exists(this),vc.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const JT=(e,r,t)=>new GW(e,r).update(t).digest();JT.create=(e,r)=>new GW(e,r);const Bme=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),YW=Uint8Array.from({length:16},(e,r)=>r),Mme=YW.map(e=>(9*e+5)%16);let nP=[YW],iP=[Mme];for(let e=0;e<4;e++)for(let r of[nP,iP])r.push(r[e].map(t=>Bme[t]));const ZW=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Lme=nP.map((e,r)=>e.map(t=>ZW[r][t])),Fme=iP.map((e,r)=>e.map(t=>ZW[r][t])),jme=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Hme=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),_b=(e,r)=>e<<r|e>>>32-r;function RB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const xb=new Uint32Array(16);class zme extends X3{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let m=0;m<16;m++,t+=4)xb[m]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,h=u,c=this.h4|0,p=c;for(let m=0;m<5;m++){const w=4-m,b=jme[m],T=Hme[m],_=nP[m],A=iP[m],x=Lme[m],I=Fme[m];for(let O=0;O<16;O++){const C=_b(n+RB(m,s,a,u)+xb[_[O]]+b,x[O])+c|0;n=c,c=u,u=_b(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=_b(i+RB(w,o,l,h)+xb[A[O]]+T,I[O])+p|0;i=p,p=h,h=_b(l,10)|0,l=o,o=C}}this.set(this.h1+a+h|0,this.h2+u+p|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){xb.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ume=Wc(()=>new zme),Eb=ts.ProjectivePoint,yE=w3(lv);function DB(e){return BigInt(`0x${Zs(e)}`)}function Wme(e){return Oc(e.toString(16).padStart(64,"0"))}const Kme=Y3("Bitcoin seed"),mE={private:76066276,public:76067358},bE=2147483648,qme=e=>Ume(lv(e)),Vme=e=>eh(e).getUint32(0,!1),Sb=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return eh(r).setUint32(0,e,!1),r};class Rf{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Vme(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return yE.encode(this.serialize(this.versions.private,Vd(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return yE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=mE){if(cc(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=JT(XT,Kme,r);return new Rf({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=mE){const n=yE.decode(r),i=eh(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Rf({...o,privateKey:a.slice(1)}):new Rf({...o,publicKey:a})}static fromJSON(r){return Rf.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||mE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!ts.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:DB(r.privateKey),this.privKeyBytes=Wme(this.privKey),this.pubKey=ts.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=Eb.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=qme(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=bE)throw new Error("Invalid index");s[2]==="'"&&(o+=bE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Sb(r);if(r>=bE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Vd(new Uint8Array([0]),a,t)}else t=Vd(this.pubKey,t);const n=JT(XT,this.chainCode,t),i=DB(n.slice(0,32)),s=n.slice(32);if(!ts.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ti(this.privKey+i,ts.CURVE.n);if(!ts.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=Eb.fromHex(this.pubKey).add(Eb.fromPrivateKey(i));if(a.equals(Eb.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Rf(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return cc(r,32),ts.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(cc(r,32),cc(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=ts.Signature.fromCompact(t)}catch{return!1}return ts.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return cc(t,33),Vd(Sb(r),new Uint8Array([this.depth]),Sb(this.parentFingerprint),Sb(this.index),this.chainCode,t)}}var Gme=Object.defineProperty,Ki=(e,r)=>{for(var t in r)Gme(e,t,{get:r[t],enumerable:!0})};function XW(e){return Zs(dm.getPublicKey(e))}var Yme={};Ki(Yme,{insertEventIntoAscendingList:()=>Jme,insertEventIntoDescendingList:()=>Xme,normalizeURL:()=>Zme,utf8Decoder:()=>fc,utf8Encoder:()=>fl});var fc=new TextDecoder("utf-8"),fl=new TextEncoder;function Zme(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Xme(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Jme(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var ei=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(ei||{});function JW(e,r){let t=e;return t.pubkey=XW(r),t.id=sP(t),t.sig=t0e(t,r),t}function Qme(e){if(!oP(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function sP(e){let r=lv(fl.encode(Qme(e)));return Zs(r)}var e0e=e=>e instanceof Object;function oP(e){if(!e0e(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function aP(e){try{return dm.verify(e.sig,sP(e),e.pubkey)}catch{return!1}}function t0e(e,r){return Zs(dm.sign(sP(e),r))}function QW(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>=e.until)}function r0e(e,r){for(let t=0;t<e.length;t++)if(QW(e[t],r))return!0;return!1}var n0e={};Ki(n0e,{getHex64:()=>lP,getInt:()=>eK,getSubscriptionId:()=>i0e,matchEventId:()=>s0e,matchEventKind:()=>a0e,matchEventPubkey:()=>o0e});function lP(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function eK(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function i0e(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function s0e(e,r){return r===lP(e,"id")}function o0e(e,r){return r===lP(e,"pubkey")}function a0e(e,r){return r===eK(e,"kind")}var l0e={};Ki(l0e,{BECH32_REGEX:()=>tK,decode:()=>__,naddrEncode:()=>p0e,neventEncode:()=>d0e,noteEncode:()=>f0e,nprofileEncode:()=>h0e,npubEncode:()=>c0e,nrelayEncode:()=>v0e,nsecEncode:()=>u0e});var uv=5e3,tK=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function __(e){var i,s,o,a,l,u,h;let{prefix:r,words:t}=Pn.decode(e,uv),n=new Uint8Array(Pn.fromWords(t));switch(r){case"nprofile":{let c=kb(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Zs(c[0][0]),relays:c[1]?c[1].map(p=>fc.decode(p)):[]}}}case"nevent":{let c=kb(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Zs(c[0][0]),relays:c[1]?c[1].map(p=>fc.decode(p)):[],author:(o=c[2])!=null&&o[0]?Zs(c[2][0]):void 0}}}case"naddr":{let c=kb(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:fc.decode(c[0][0]),pubkey:Zs(c[2][0]),kind:parseInt(Zs(c[3][0]),16),relays:c[1]?c[1].map(p=>fc.decode(p)):[]}}}case"nrelay":{let c=kb(n);if(!((h=c[0])!=null&&h[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:fc.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Zs(n)};default:throw new Error(`unknown prefix ${r}`)}}function kb(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1],s=t.slice(2,2+i);t=t.slice(2+i),!(s.length<i)&&(r[n]=r[n]||[],r[n].push(s))}return r}function u0e(e){return uP("nsec",e)}function c0e(e){return uP("npub",e)}function f0e(e){return uP("note",e)}function uP(e,r){let t=Oc(r),n=Pn.toWords(t);return Pn.encode(e,n,uv)}function h0e(e){let r=x_({0:[Oc(e.pubkey)],1:(e.relays||[]).map(n=>fl.encode(n))}),t=Pn.toWords(r);return Pn.encode("nprofile",t,uv)}function d0e(e){let r=x_({0:[Oc(e.id)],1:(e.relays||[]).map(n=>fl.encode(n)),2:e.author?[Oc(e.author)]:[]}),t=Pn.toWords(r);return Pn.encode("nevent",t,uv)}function p0e(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=x_({0:[fl.encode(e.identifier)],1:(e.relays||[]).map(i=>fl.encode(i)),2:[Oc(e.pubkey)],3:[new Uint8Array(r)]}),n=Pn.toWords(t);return Pn.encode("naddr",n,uv)}function v0e(e){let r=x_({0:[fl.encode(e)]}),t=Pn.toWords(r);return Pn.encode("nrelay",t,uv)}function x_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),Vd(...r)}var g0e={};Ki(g0e,{decrypt:()=>m0e,encrypt:()=>y0e});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function y0e(e,r,t){const n=ts.getSharedSecret(e,"02"+r),i=rK(n);let s=Uint8Array.from($W(16)),o=fl.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=zo.encode(new Uint8Array(l)),h=zo.encode(new Uint8Array(s.buffer));return`${u}?iv=${h}`}async function m0e(e,r,t){let[n,i]=t.split("?iv="),s=ts.getSharedSecret(e,"02"+r),o=rK(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=zo.decode(n),u=zo.decode(i),h=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return fc.decode(h)}function rK(e){return e.slice(1,33)}var b0e={};Ki(b0e,{NIP05_REGEX:()=>nK,queryProfile:()=>_0e,searchDomain:()=>$0e,useFetchImplementation:()=>w0e});var nK=/^(?:([\w.+-]+)@)?([\w.-]+)$/,E_;try{E_=fetch}catch{}function w0e(e){E_=e}async function $0e(e,r=""){try{return(await(await E_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function _0e(e){const r=e.match(nK);if(!r)return null;const[t,n="_",i]=r;try{const s=await E_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=x0e(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function x0e(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var E0e={};Ki(E0e,{generateSeedWords:()=>k0e,privateKeyFromSeedWords:()=>S0e,validateWords:()=>T0e});function S0e(e,r){let n=Rf.fromMasterSeed(BW(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Zs(n)}function k0e(){return zW(Q3)}function T0e(e){return qW(e,Q3)}var I0e={};Ki(I0e,{parse:()=>A0e});function A0e(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},h=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(h){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var O0e={};Ki(O0e,{getPow:()=>C0e});function C0e(e){return P0e(Oc(e))}function P0e(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=N0e(e[t]),r+=n,n===8);t++);return r}function N0e(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var R0e={};Ki(R0e,{finishRepostEvent:()=>D0e,getRepostedEvent:()=>B0e,getRepostedEventPointer:()=>iK});function D0e(e,r,t,n){return JW({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function iK(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function B0e(e,{skipVerification:r}={}){const t=iK(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!aP(n)))return n}var M0e={};Ki(M0e,{NOSTR_URI_REGEX:()=>S_,parse:()=>F0e,test:()=>L0e});var S_=new RegExp(`nostr:(${tK.source})`);function L0e(e){return typeof e=="string"&&new RegExp(`^${S_.source}$`).test(e)}function F0e(e){const r=e.match(new RegExp(`^${S_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:__(r[1])}}var j0e={};Ki(j0e,{finishReactionEvent:()=>H0e,getReactedEventPointer:()=>z0e});function H0e(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return JW({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function z0e(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var U0e={};Ki(U0e,{createDelegation:()=>W0e,getDelegator:()=>K0e});function W0e(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=lv(fl.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Zs(dm.sign(i,e));return{from:XW(e),to:r.pubkey,cond:n,sig:s}}function K0e(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,h]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(h))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(h))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(h))continue;return null}}let o=lv(fl.encode(`nostr:delegation:${e.pubkey}:${n}`));return dm.verify(i,o,t)?t:null}var q0e={};Ki(q0e,{matchAll:()=>V0e,regex:()=>cP,replaceAll:()=>G0e});var cP=()=>new RegExp(`\\b${S_.source}\\b`,"g");function*V0e(e){const r=e.matchAll(cP());for(const t of r){const[n,i]=t;yield{uri:n,value:i,decoded:__(i),start:t.index,end:t.index+n.length}}}function G0e(e,r){return e.replaceAll(cP(),(t,n)=>r({uri:t,value:n,decoded:__(n)}))}var Y0e={};Ki(Y0e,{useFetchImplementation:()=>Z0e,validateGithub:()=>X0e});var fP;try{fP=fetch}catch{}function Z0e(e){fP=e}async function X0e(e,r,t){try{return await(await fP(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var J0e={};Ki(J0e,{authenticate:()=>Q0e});var Q0e=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},ebe={};Ki(ebe,{getZapEndpoint:()=>rbe,makeZapReceipt:()=>sbe,makeZapRequest:()=>nbe,useFetchImplementation:()=>tbe,validateZapRequest:()=>ibe});var hP;try{hP=fetch}catch{}function tbe(e){hP=e}async function rbe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Pn.decode(t,1e3),a=Pn.fromWords(o);r=fc.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await hP(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function nbe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function ibe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!oP(r))return"Zap request is not a valid Nostr event.";if(!aP(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function sbe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var jd=null;typeof WebSocket<"u"?jd=WebSocket:typeof MozWebSocket<"u"?jd=MozWebSocket:typeof global<"u"?jd=global.WebSocket||global.MozWebSocket:typeof window<"u"?jd=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(jd=self.WebSocket||self.MozWebSocket);const obe=jd;function wE(e,r){let t={...e};return delete t[r],r+xge(t)}function B1(e){let r=[],t=new Map,n=[];for(let i of e){let s=!1;for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){if(i[o].length===0){s=!0;break}let a=wE(i,o),l=t.get(a);if(l!==void 0){let u=r[l];for(let h in u)if(h!==o){let c=wE(u,h);t.delete(c)}if(r[l][o]instanceof Set)for(let h of i[o])r[l][o].add(h);else r[l][o]=new Set(r[l][o].concat(i[o])),n.push([l,o]);s=!0;break}}if(!s){for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){let a=wE(i,o);t.set(a,r.length)}r.push({...i})}}for(let[i,s]of n)r[i][s]=Array.from(r[i][s]);return r}function abe(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function lbe(e){let r=e.indexOf('"EVENT"')+7,t=e.slice(r),n=t.indexOf('"')+1,i=t.slice(n);return i.slice(0,i.indexOf('"'))}function ube(e,r,t){return new cbe(e,r,t).relayInit()}var D$,sK,B$,oK,M$,aK,L$,lK,F$,uK,j$,cK,iH,cbe=(iH=class{constructor(e,r,t){Gr(this,D$);Gr(this,B$);Gr(this,M$);Gr(this,L$);Gr(this,F$);Gr(this,j$);le(this,"url");le(this,"alreadyHaveEvent");le(this,"logging",!1);le(this,"autoReconnect");le(this,"ws");le(this,"sendOnConnect",[]);le(this,"openSubs",{});le(this,"closedByClient",!1);le(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});le(this,"subListeners",{});le(this,"pubListeners",{});le(this,"incomingMessageQueue",[]);le(this,"handleNextInterval");le(this,"resolveClose");le(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=r,this.autoReconnect=t}async trySend(e){var t;const r=JSON.stringify(e);this.connected?(t=this.ws)==null||t.send(r):this.sendOnConnect.push(r)}async connectRelay(){return new Promise((e,r)=>{try{const t=new obe(this.url);this.ws=t}catch(t){r(t);return}this.ws.onopen=Qn(this,j$,cK).bind(this,e),this.ws.onerror=t=>{this.listeners.error.forEach(n=>n()),r(t)},this.ws.onclose=Qn(this,B$,oK).bind(this),this.ws.onmessage=Qn(this,L$,lK).bind(this)})}async connect(){var e,r;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((r=this.ws)==null?void 0:r.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(r=>{this.resolveClose=r})}on(e,r){var t;this.listeners[e].push(r),e==="connect"&&((t=this.ws)==null?void 0:t.readyState)===1&&r()}off(e,r){const t=this.listeners[e].indexOf(r);t!==-1&&this.listeners[e].splice(t,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,r){const t=this;if(!e.id)throw new Error(`event ${e} has no id`);const n=e.id;let i=!1,s=!1;t.trySend([r,e]).then(()=>{i=!0,s&&(o(),s=!1)}).catch(()=>{});const o=()=>{const a=this.sub([{ids:[n]}],{id:`monitor-${n.slice(0,5)}`}),l=setTimeout(()=>{var u;(((u=t.pubListeners[n])==null?void 0:u.failed)||[]).forEach(h=>h("event not seen after 5 seconds")),a.unsub()},5e3);a.on("event",()=>{var u;clearTimeout(l),(((u=t.pubListeners[n])==null?void 0:u.seen)||[]).forEach(h=>h())})};return{on:(a,l)=>{t.pubListeners[n]=t.pubListeners[n]||{ok:[],seen:[],failed:[]},t.pubListeners[n][a].push(l),a==="seen"&&(i?o():s=!0)},off:(a,l)=>{const u=t.pubListeners[n];if(!u)return;const h=u[a].indexOf(l);h>=0&&u[a].splice(h,1)}}}sub(e,r={}){const t=this,n=r.id||Math.random().toString().slice(2),i=r.skipVerification||!1;return t.openSubs[n]={id:n,filters:e,skipVerification:i},t.connected&&(this.logging&&console.log("REQ2",this.url,n,...e),t.trySend(["REQ",n,...e])),{sub:(s,o={})=>this.sub(s||e,{skipVerification:o.skipVerification||i,id:n}),unsub:()=>{delete t.openSubs[n],delete t.subListeners[n],t.connected&&(t.logging&&console.log("CLOSE",this.url,n),t.trySend(["CLOSE",n]))},on:(s,o)=>{t.subListeners[n]=t.subListeners[n]||{event:[],eose:[]},t.subListeners[n][s].push(o)},off:(s,o)=>{const a=t.subListeners[n];if(!a)return;const l=a[s].indexOf(o);l>=0&&a[s].splice(l,1)}}}},D$=new WeakSet,sK=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}Qn(this,F$,uK).call(this,{data:this.incomingMessageQueue.shift()})},B$=new WeakSet,oK=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&Qn(this,M$,aK).call(this)},M$=new WeakSet,aK=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},L$=new WeakSet,lK=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>Qn(this,D$,sK).call(this),0))},F$=new WeakSet,uK=async function(e){var s,o,a,l,u,h,c;let r,t=e.data.toString();if(!t)return;let n=abe(t,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,n);if(i){const p=this.subListeners[lbe(t)];return p?p.event.forEach(m=>m(i)):void 0}try{r=JSON.parse(t)}catch{r=e.data}if(r.length>=1)switch(r[0]){case"EVENT":if(this.logging&&console.log(r),r.length!==3)return;const p=r[1],m=r[2];if(!this.openSubs[p]||(o=this.openSubs[p].eventIds)!=null&&o.has(n))return;(a=this.openSubs[p].eventIds)==null||a.add(n),oP(m)&&this.openSubs[p]&&(this.openSubs[p].skipVerification||aP(m))&&r0e(this.openSubs[p].filters,m)&&(this.openSubs[p],(((l=this.subListeners[p])==null?void 0:l.event)||[]).forEach(T=>T(m)));return;case"EOSE":{if(r.length!==2)return;const T=r[1];this.logging&&console.log("EOSE",this.url,T),(((u=this.subListeners[T])==null?void 0:u.eose)||[]).forEach(_=>_());return}case"OK":{if(r.length<3)return;const T=r[1],_=r[2],A=r[3]||"";_?(h=this.pubListeners[T])==null||h.ok.forEach(x=>x()):(c=this.pubListeners[T])==null||c.failed.forEach(x=>x(A));return}case"NOTICE":if(r.length!==2)return;const w=r[1];this.listeners.notice.forEach(T=>T(w));return;case"AUTH":if(r.length!==2)return;const b=r[1];this.listeners.auth.forEach(T=>T(b));return}},j$=new WeakSet,cK=function(e){var r;if(this.resolveClose){this.resolveClose();return}for(const t in this.openSubs)this.logging&&console.log("REQ",this.url,t,...this.openSubs[t].filters),this.trySend(["REQ",t,...this.openSubs[t].filters]);for(const t of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,t),(r=this.ws)==null||r.send(t);this.sendOnConnect=[],this.listeners.connect.forEach(t=>t()),e()},iH),H$,fK,z$,hK,qC,hbe,U$,dK,W$,pK,K$,vK,sH,fbe=(sH=class{constructor(){Gr(this,H$);Gr(this,z$);Gr(this,qC);Gr(this,U$);Gr(this,W$);Gr(this,K$);le(this,"eventsById",new Map);le(this,"metadataByPubKey",new Map);le(this,"contactsByPubKey",new Map);le(this,"authorsKindsByPubKey",new Map);le(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===ei.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===ei.Contacts&&this.contactsByPubKey.set(e.pubkey,e),Qn(this,H$,fK).call(this,e),Qn(this,z$,hK).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,r){const t=new Set,n=[];for(const i of e){const s=Qn(this,K$,vK).call(this,i)||Qn(this,U$,dK).call(this,i)||Qn(this,W$,pK).call(this,i)||{filter:i,events:[]};for(const o of s.events)t.add(o);n.push(s.filter)}return{filters:n,events:[...t]}}},H$=new WeakSet,fK=function(e){const r=this.authorsKindsByPubKey.get(e.pubkey);if(!r)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const t=r.get(e.kind);t?e.kind===ei.Metadata||e.kind===ei.Contacts?e.created_at>t[0].created_at&&(t[0]=e):t.push(e):r.set(e.kind,[e])}},z$=new WeakSet,hK=function(e){for(const r of e.tags){let t=r[0]+":"+r[1];const n=this.eventsByTags.get(t);n?n.push(e):this.eventsByTags.set(t,[e])}},qC=new WeakSet,hbe=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(n=>n!==ei.Contacts&&n!==ei.Metadata)!==void 0)return;const r=[],t=new Set;for(const n of e.authors){let i;if(e.kinds.includes(ei.Contacts)&&(i=this.contactsByPubKey.get(n),!i)){r.push(n);continue}let s;if(e.kinds.includes(ei.Metadata)&&(s=this.metadataByPubKey.get(n),!s)){r.push(n);continue}i&&t.add(i),s&&t.add(s)}return{filter:{...e,authors:r},events:t}},U$=new WeakSet,dK=function(e){if(e.noCache||!e.authors)return;const r=new Set;for(const t of e.authors)if(e.kinds){const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of e.kinds){const s=n.get(i);if(s)for(const o of s)r.add(o)}}else{const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of n.values())for(const s of i)r.add(s)}return{filter:e,events:r}},W$=new WeakSet,pK=function(e){if(e.noCache)return;const r=new Set;for(const t in e){if(t[0]!=="#")continue;let n=t.slice(1)+":"+e[t][0];const i=this.eventsByTags.get(n);if(i)for(const s of i)r.add(s)}return{filter:e,events:r}},K$=new WeakSet,vK=function(e){if(!e.ids)return;const r=new Set,t=[];for(const n of e.ids){const i=this.getEventById(n);i?r.add(i):t.push(n)}return{filter:{...e,ids:t},events:r}},sH),gK=class{constructor(r,t,n){le(this,"pubkey");le(this,"relayPool");le(this,"relays");this.pubkey=n,this.relayPool=r,this.relays=t}metaData(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Metadata]}],this.relays,r,t)}subscribe(r,t,n){return this.relayPool.subscribeEventObject(r.map(i=>({authors:[this.pubkey],...i})),this.relays,t,n)}followsPubkeys(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)s[0]==="p"&&i.push(s[1]);r(i)},t)}follows(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)if(s[0]==="p"){let o=this.relays;s[1]&&(o=[s[1],...this.relays||[]]),i.push(new gK(this.relayPool,o,s[1]))}r(i)},t)}secondFollows(r,t,n=!0){return this.followsPubkeys(i=>{let s=new Map;for(const o of i)this.relayPool.subscribeEventObject([{authors:[o],kinds:[ei.Contacts]}],this.relays,a=>{let l=1/a.tags.length;for(const u of a.tags)if(u[0]==="p"){let h=s.get(u[1]);h?h+=l:h=l,s.set(u[1],h)}if(n)for(const u of i)s.delete(u);r(Array.from(s.entries()).sort((u,h)=>h[1]-u[1]))},t)},t)}allEvents(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,r,n)}referenced(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,r,n)}followers(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[ei.Contacts],limit:t}],this.relays,r,n)}sentAndRecievedDMs(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ei.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[ei.EncryptedDirectMessage],limit:t}],this.relays,r,n)}text(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ei.Text],limit:t}],this.relays,r,n)}},QT=class{constructor(e,r,t){le(this,"id");le(this,"kind");le(this,"pubkey");le(this,"tags");le(this,"created_at");le(this,"content");le(this,"relayPool");le(this,"relays");le(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=r,this.relays=t,this.sig=e.sig}referencedAuthors(){const e=[];for(const r of this.tags)r[0]==="p"&&e.push(new gK(this.relayPool,void 0,r[1]));return e}referencedEvents(e){const r=[];for(const t of this.tags)if(t[0]==="e"){let n=this.relays;t[2]&&(n=[t[2],...n||[]]),r.push(this.relayPool.getEventById(t[1],n,e).then(i=>new QT(i,this.relayPool,this.relays)))}return r}thread(e,r){let t=this.relays,n=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(t=[i[2],...t||[]]),n.push(i[1]));return this.relayPool.subscribe([{ids:n},{"#e":n}],t,e,r)}};function dbe(e){let r=new Set;return(t,n,i)=>{r.has(t.id)||(r.add(t.id),e(t,n,i))}}function pbe(e){let r=new Map;return(t,n,i)=>{if(t.kind===ei.Metadata||t.kind===ei.Contacts){let s=t.pubkey+" "+t.kind;if((r.get(s)||0)>t.created_at)return;r.set(s,t.created_at)}e(t,n,i)}}function vbe(e,r){return(t,n,i)=>{for(let s of r)if(QW(s,t)){e(t,n,i);break}}}var gbe=class{constructor(e){le(this,"subs",[]);le(this,"events",[]);le(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(r=>r(...e))}sub(e){return this.events.forEach(r=>e(...r)),this.subs.push(e),()=>{var r;this.subs=this.subs.filter(t=>t!==e),this.subs.length===0&&((r=this.onunsub)==null||r.call(this),this.onunsub=void 0)}}},ybe=e=>[...new Set(e)];function mbe(e,r,t,n={},i){let s=[];if(i){const a=i.getCachedEventsWithUpdatedFilters(e,r);e=a.filters,s=a.events}if(n.logAllEvents){const a=t;t=(l,u,h)=>{a(l,u,h)}}n.allowDuplicateEvents||(t=dbe(t)),n.allowOlderEvents||(t=pbe(t));for(const a of s)t(a,!1,void 0);e=B1(e),t=vbe(t,e),r=ybe(r);const o=bbe(e,r);return[t,o]}function bbe(e,r){const t=new Map,n=[];for(const i of e){const s=i.relay;if(s){const o=t.get(s);o?o.push(BB(i)):t.set(s,[BB(i)])}else n.push(i)}if(n.length>0)for(const i of r){const s=t.get(i);s?t.set(i,s.concat(n)):t.set(i,n)}return t}function BB(e){return e={...e},delete e.relay,e}function wbe(e,r){const t=new Map,n=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},o=()=>{};for(const[l,u,h,c,p]of e){if(!h.unsubcb)continue;for(const[w,b]of u){const T=t.get(w);T?t.set(w,T.concat(b)):t.set(w,b)}let m=(w,b,T)=>{h.unsubcb&&l(w,b,T)};if(r&&p){const w=new gbe(o);n.push((T,_,A)=>{w.event(T,_,A)});let b=w.sub(m);r.set(p,w),h.unsubcb=()=>{h.unsubcb=void 0,b(),c||i--}}else n.push(m),h.unsubcb=()=>{h.unsubcb=void 0,c||i--};c||i++}i===0&&setTimeout(()=>{},0);const a=(l,u,h)=>{for(const c of n)c(l,u,h)};return e.length=0,[a,t,s]}var $E=class{constructor(e,r,t,n){le(this,"data");le(this,"promises");le(this,"relays");le(this,"kind");le(this,"relayPool");le(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=r,this.relays=t||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=n||!1}async get(e){let r=this.data.get(e);if(r)return Promise.resolve(r);const t=this.promises.get(e);return t||new Promise((n,i)=>{let s=0;const o=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},a=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([o],this.relays,l=>{this.data.set(e,l),this.promises.delete(e),n(l)},void 0,l=>{this.relays.includes(l)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=a})}},MB=e=>[...new Set(e)];function $be(e){if(e)return JSON.parse(e)}var q$,yK,V$,mK,G$,bK,Y$,wK,Z$,$K,X$,_K,oH,_be=(oH=class{constructor(e,r={}){Gr(this,q$);Gr(this,V$);Gr(this,G$);Gr(this,Y$);Gr(this,Z$);Gr(this,X$);le(this,"relayByUrl",new Map);le(this,"noticecbs",[]);le(this,"errorcbs",[]);le(this,"authcbs",[]);le(this,"eventCache");le(this,"minMaxDelayms",1/0);le(this,"filtersToSubscribe",[]);le(this,"timer");le(this,"externalGetEventById");le(this,"logSubscriptions",!1);le(this,"autoReconnect",!1);le(this,"startTime",new Date().getTime());le(this,"deleteSignatures");le(this,"subscriptionCache");le(this,"skipVerification");le(this,"writeRelays");le(this,"metadataCache");le(this,"contactListCache");le(this,"logErrorsAndNotices");le(this,"errorsAndNoticesInterval");le(this,"errorsAndNotices",[]);if(this.externalGetEventById=r.externalGetEventById,this.logSubscriptions=r.logSubscriptions,this.autoReconnect=r.autoReconnect,this.deleteSignatures=r.deleteSignatures,this.skipVerification=r.skipVerification,this.writeRelays=new $E(10003,this,void 0,!0),this.metadataCache=new $E(0,this),this.contactListCache=new $E(3,this),r.useEventCache&&(this.eventCache=new fbe),r.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const t of MB(e))this.addOrGetRelay(t);this.logErrorsAndNotices=r.logErrorsAndNotices||!0,this.onnotice((t,n)=>{this.errorsAndNotices.push({type:"notice",url:t,msg:n,time:Date.now()-this.startTime})}),this.onerror((t,n)=>{this.errorsAndNotices.push({type:"error",url:t,msg:n,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>Qn(this,q$,yK).call(this),1e3*10)}addOrGetRelay(e){const r=this.relayByUrl.get(e);if(r)return r;const t=ube(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?n=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(n)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,t),t.connect().then(n=>{t==null||t.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),t==null||t.on("auth",i=>{this.authcbs.forEach(s=>s(t,i))})},n=>{this.errorcbs.forEach(i=>i(e,n))}),t}async close(){const e=[];for(const r of this.relayByUrl.values())e.push(r.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const r=this.relayByUrl.get(e);r&&(r.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,r){clearTimeout(this.timer),this.timer=void 0;let t=this.minMaxDelayms;this.minMaxDelayms=1/0;const[n,i,s]=wbe(r||this.filtersToSubscribe,this.subscriptionCache);return Qn(this,Y$,wK).call(this,i,n,e,s,t)}subscribeEventObject(e,r,t,n,i,s={}){return this.subscribe(e,r,(o,a,l)=>t(new QT(o,this,r),a,l))}subscribe(e,r,t,n,i,s={}){var c;if(n!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(r===void 0){const p=Qn(this,X$,_K).call(this,e,t,n,i,s);return()=>{p.then(m=>{m()})}}let o;if(s.unsubscribeOnEose&&!i){o=JSON.stringify([e,r]);const p=(c=this.subscriptionCache)==null?void 0:c.get(o);if(p)return p.sub(t)}const[a,l]=mbe(e,r,t,s,this.eventCache);let u={unsubcb:()=>{}};n===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const h=[a,l,u,s.unsubscribeOnEose,o,n];return s.dontSendOtherFilters?this.sendSubscriptions(i,[h]):(this.filtersToSubscribe.push(h),n===void 0?this.sendSubscriptions(i):(Qn(this,Z$,$K).call(this,n),()=>{var p;(p=u.unsubcb)==null||p.call(u),delete u.unsubcb}))}async getEventObjectById(e,r,t){return this.getEventById(e,r,t).then(n=>new QT(n,this,r))}async getEventById(e,r,t){return new Promise((n,i)=>{this.subscribe([{ids:[e]}],r,s=>{n(s)},t,void 0)})}publish(e,r){for(const t of MB(r))this.addOrGetRelay(t).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((r,t)=>r.on("error",n=>e(t,n))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((r,t)=>r.on("disconnect",n=>e(t,n)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,r])=>[e,r.status]).sort()}setWriteRelaysForPubKey(e,r,t){const n={created_at:t,pubkey:"",id:"",sig:"",content:JSON.stringify(r),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,n)}setCachedMetadata(e,r){this.metadataCache.data.set(e,r)}setCachedContactList(e,r){this.contactListCache.data.set(e,r)}subscribeReferencedEvents(e,r,t,n,i={}){let s=[],o=[];for(const a of e.tags){if(a[0]==="p"){const l=a[1];if(l.length!==64){console.log("bad pubkey",l,a);continue}o.push(l)}if(a[0]==="e"){const l=a[1];s.push(l)}}return s.length===0?()=>{}:o.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,r,t,n,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:o}],void 0,r,t,n,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${r}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${r}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,r,t,n,i={}){for(const s of e.tags)if(s[0]==="p"){const o=s[1];if(o.length!==64){console.log("bad pubkey",o,s);continue}this.fetchAndCacheMetadata(o).catch(a=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${o}: ${a}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,r,t,n,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(r=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${r}`,time:Date.now()-this.startTime,url:e.url})})})}},q$=new WeakSet,yK=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},V$=new WeakSet,mK=function(e,r,t,n,i){const s=B1(r);if(s.length===0)return;const a=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let l=!1,u=1/0;return a.on("event",h=>{var p;h.created_at<u&&(u=h.created_at);let c=h;this.deleteSignatures||(c.sig=h.sig),(p=this.eventCache)==null||p.addEvent(c),t(c,l,e)}),a.on("eose",()=>{n==null||n(e,u),l=!0}),a},G$=new WeakSet,bK=function(e){const r=new Map;for(const[t,n]of e){const i=B1(B1(n));i.length>0&&r.set(t,i)}return r},Y$=new WeakSet,wK=function(e,r,t,n={},i){var u,h;if(e.size===0)return()=>{};if(e=Qn(this,G$,bK).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const c={};for(const[p,m]of e){let w=0;for(const b of m){const T={...b};T.authors&&(T.authors=T.authors.join(),T["authors.length"]=(u=b==null?void 0:b.authors)==null?void 0:u.length),T.kinds&&(T.kinds=T.kinds.join()),T.ids&&(T.ids=T.ids.join(),T["ids.length"]=(h=b==null?void 0:b.ids)==null?void 0:h.length),T["#e"]&&(T["#e"]=T["#e"].join(),T["#e.length"]=b["#e"].length),T["#p"]&&(T["#p"]=T["#p"].join(),T["#p.length"]=b["#p"].length),c[p+" "+w]=T,w++}}Object.keys(c).length>3&&console.groupCollapsed(Object.keys(c).length+" filters to "+e.size+" relays"),console.table(c),Object.keys(c).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let o=!1,a=[];n.unsuboneosecb=()=>{o=!0,a.forEach(c=>c.unsub())};for(const[c,p]of e){let m={};const w=(_,A)=>{var x;t&&t(_,A),o?(x=m.sub)==null||x.unsub():m.sub&&a.push(m.sub)},b=new Set,T=Qn(this,V$,mK).call(this,c,p,r,w,b);T&&(m.sub=T,s.push(T))}const l=()=>s.forEach(c=>c.unsub());return n.unsubcb=()=>{l(),delete n.unsubcb},l},Z$=new WeakSet,$K=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},X$=new WeakSet,_K=async function(e,r,t,n,i={}){var c;const s=new Set;for(const p of e)if(p.authors)for(const m of p.authors)s.add(m);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const o=[],a=[];for(const p of s)o.push((c=this.writeRelays)==null?void 0:c.get(p).then(m=>$be(m==null?void 0:m.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),a.push(p);const l=new Set;let u=0;for(const p of o){const m=a[u];u+=1;let w=await p;if(!Array.isArray(w)){console.error("Couldn't load relays for author ",m);continue}for(let b of w)l.add(b)}let h=Array.from(l);return h.length===0&&i.defaultRelays&&(h=i.defaultRelays),this.subscribe(e,h,r,t,n,i)},oH);const en=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hn=Object.keys,zi=Array.isArray;function ls(e,r){return typeof r!="object"||Hn(r).forEach(function(t){e[t]=r[t]}),e}typeof Promise>"u"||en.Promise||(en.Promise=Promise);const ky=Object.getPrototypeOf,xbe={}.hasOwnProperty;function to(e,r){return xbe.call(e,r)}function Mp(e,r){typeof r=="function"&&(r=r(ky(e))),(typeof Reflect>"u"?Hn:Reflect.ownKeys)(r).forEach(t=>{Yl(e,t,r[t])})}const xK=Object.defineProperty;function Yl(e,r,t,n){xK(e,r,ls(t&&to(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},n))}function dp(e){return{from:function(r){return e.prototype=Object.create(r.prototype),Yl(e.prototype,"constructor",e),{extend:Mp.bind(null,e.prototype)}}}}const Ebe=Object.getOwnPropertyDescriptor;function dP(e,r){let t;return Ebe(e,r)||(t=ky(e))&&dP(t,r)}const Sbe=[].slice;function Mw(e,r,t){return Sbe.call(e,r,t)}function EK(e,r){return r(e)}function Mg(e){if(!e)throw new Error("Assertion Failed")}function SK(e){en.setImmediate?setImmediate(e):setTimeout(e,0)}function kK(e,r){return e.reduce((t,n,i)=>{var s=r(n,i);return s&&(t[s[0]]=s[1]),t},{})}function Zl(e,r){if(to(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var t=[],n=0,i=r.length;n<i;++n){var s=Zl(e,r[n]);t.push(s)}return t}var o=r.indexOf(".");if(o!==-1){var a=e[r.substr(0,o)];return a===void 0?void 0:Zl(a,r.substr(o+1))}}function ba(e,r,t){if(e&&r!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){Mg(typeof t!="string"&&"length"in t);for(var n=0,i=r.length;n<i;++n)ba(e,r[n],t[n])}else{var s=r.indexOf(".");if(s!==-1){var o=r.substr(0,s),a=r.substr(s+1);if(a==="")t===void 0?zi(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var l=e[o];l&&to(e,o)||(l=e[o]={}),ba(l,a,t)}}else t===void 0?zi(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=t}}function TK(e){var r={};for(var t in e)to(e,t)&&(r[t]=e[t]);return r}const kbe=[].concat;function IK(e){return kbe.apply([],e)}const AK="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(IK([8,16,32,64].map(e=>["Int","Uint","Float"].map(r=>r+e+"Array")))).filter(e=>en[e]),Tbe=AK.map(e=>en[e]);kK(AK,e=>[e,!0]);let ac=null;function gm(e){ac=typeof WeakMap<"u"&&new WeakMap;const r=eI(e);return ac=null,r}function eI(e){if(!e||typeof e!="object")return e;let r=ac&&ac.get(e);if(r)return r;if(zi(e)){r=[],ac&&ac.set(e,r);for(var t=0,n=e.length;t<n;++t)r.push(eI(e[t]))}else if(Tbe.indexOf(e.constructor)>=0)r=e;else{const s=ky(e);for(var i in r=s===Object.prototype?{}:Object.create(s),ac&&ac.set(e,r),e)to(e,i)&&(r[i]=eI(e[i]))}return r}const{toString:Ibe}={};function tI(e){return Ibe.call(e).slice(8,-1)}const rI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Abe=typeof rI=="symbol"?function(e){var r;return e!=null&&(r=e[rI])&&r.apply(e)}:function(){return null},Hd={};function Kl(e){var r,t,n,i;if(arguments.length===1){if(zi(e))return e.slice();if(this===Hd&&typeof e=="string")return[e];if(i=Abe(e)){for(t=[];!(n=i.next()).done;)t.push(n.value);return t}if(e==null)return[e];if(typeof(r=e.length)=="number"){for(t=new Array(r);r--;)t[r]=e[r];return t}return[e]}for(r=arguments.length,t=new Array(r);r--;)t[r]=arguments[r];return t}const pP=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var vl=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function OK(e,r){vl=e,CK=r}var CK=()=>!0;const Obe=!new Error("").stack;function Dh(){if(Obe)try{throw Dh.arguments,new Error}catch(e){return e}return new Error}function nI(e,r){var t=e.stack;return t?(r=r||0,t.indexOf(e.name)===0&&(r+=(e.name+e.message).split(`
`).length),t.split(`
`).slice(r).filter(CK).map(n=>`
`+n).join("")):""}var PK=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vP=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(PK),Cbe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pp(e,r){this._e=Dh(),this.name=e,this.message=r}function NK(e,r){return e+". Errors: "+Object.keys(r).map(t=>r[t].toString()).filter((t,n,i)=>i.indexOf(t)===n).join(`
`)}function Lw(e,r,t,n){this._e=Dh(),this.failures=r,this.failedKeys=n,this.successCount=t,this.message=NK(e,r)}function Yg(e,r){this._e=Dh(),this.name="BulkError",this.failures=Object.keys(r).map(t=>r[t]),this.failuresByPos=r,this.message=NK(e,r)}dp(pp).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+nI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),dp(Lw).from(pp),dp(Yg).from(pp);var gP=vP.reduce((e,r)=>(e[r]=r+"Error",e),{});const Pbe=pp;var Wt=vP.reduce((e,r)=>{var t=r+"Error";function n(i,s){this._e=Dh(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Cbe[r]||t,this.inner=null)}return dp(n).from(Pbe),e[r]=n,e},{});Wt.Syntax=SyntaxError,Wt.Type=TypeError,Wt.Range=RangeError;var LB=PK.reduce((e,r)=>(e[r+"Error"]=Wt[r],e),{}),M1=vP.reduce((e,r)=>(["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=Wt[r]),e),{});function zr(){}function Ty(e){return e}function Nbe(e,r){return e==null||e===Ty?r:function(t){return r(e(t))}}function bh(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function Rbe(e,r){return e===zr?r:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=r.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?bh(n,this.onsuccess):n),i&&(this.onerror=this.onerror?bh(i,this.onerror):i),s!==void 0?s:t}}function Dbe(e,r){return e===zr?r:function(){e.apply(this,arguments);var t=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?bh(t,this.onsuccess):t),n&&(this.onerror=this.onerror?bh(n,this.onerror):n)}}function Bbe(e,r){return e===zr?r:function(t){var n=e.apply(this,arguments);ls(t,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=r.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?bh(i,this.onsuccess):i),s&&(this.onerror=this.onerror?bh(s,this.onerror):s),n===void 0?o===void 0?void 0:o:ls(n,o)}}function Mbe(e,r){return e===zr?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function yP(e,r){return e===zr?r:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return r.apply(n,s)})}return r.apply(this,arguments)}}M1.ModifyError=Lw,M1.DexieError=pp,M1.BulkError=Yg;var Iy={};const RK=100,[iI,Fw,sI]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,ky(e),e];const r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,ky(r),e]})(),DK=Fw&&Fw.then,L1=iI&&iI.constructor,mP=!!sI;var oI=!1,Lbe=sI?()=>{sI.then(Tb)}:en.setImmediate?setImmediate.bind(null,Tb):en.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Tb(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Tb,0)},Zg=function(e,r){Lg.push([e,r]),jw&&(Lbe(),jw=!1)},aI=!0,jw=!0,th=[],F1=[],lI=null,uI=Ty,vp={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:HB,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{HB(e[0],e[1])}catch{}})}},Bt=vp,Lg=[],rh=0,j1=[];function Et(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=zr,this._lib=!1;var r=this._PSD=Bt;if(vl&&(this._stackHolder=Dh(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Iy)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&fI(this,this._value))}this._state=null,this._value=null,++r.ref,MK(this,e)}const cI={get:function(){var e=Bt,r=Hw;function t(n,i){var s=!e.global&&(e!==Bt||r!==Hw);const o=s&&!uu();var a=new Et((l,u)=>{bP(this,new BK(zw(n,e,s,o),zw(i,e,s,o),l,u,e))});return vl&&jK(a,this),a}return t.prototype=Iy,t},set:function(e){Yl(this,"then",e&&e.prototype===Iy?cI:{get:function(){return e},set:cI.set})}};function BK(e,r,t,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=t,this.reject=n,this.psd=i}function MK(e,r){try{r(t=>{if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ym();t&&typeof t.then=="function"?MK(e,(i,s)=>{t instanceof Et?t._then(i,s):t.then(i,s)}):(e._state=!0,e._value=t,LK(e)),n&&mm()}},fI.bind(null,e))}catch(t){fI(e,t)}}function fI(e,r){if(F1.push(r),e._state===null){var t=e._lib&&ym();r=uI(r),e._state=!1,e._value=r,vl&&r!==null&&typeof r=="object"&&!r._promise&&function(n,i,s){try{n.apply(null,s)}catch(o){i&&i(o)}}(()=>{var n=dP(r,"stack");r._promise=e,Yl(r,"stack",{get:()=>oI?n&&(n.get?n.get.apply(r):n.value):e.stack})}),function(n){th.some(i=>i._value===n._value)||th.push(n)}(e),LK(e),t&&mm()}}function LK(e){var r=e._listeners;e._listeners=[];for(var t=0,n=r.length;t<n;++t)bP(e,r[t]);var i=e._PSD;--i.ref||i.finalize(),rh===0&&(++rh,Zg(()=>{--rh==0&&wP()},[]))}function bP(e,r){if(e._state!==null){var t=e._state?r.onFulfilled:r.onRejected;if(t===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++rh,Zg(Fbe,[t,e,r])}else e._listeners.push(r)}function Fbe(e,r,t){try{lI=r;var n,i=r._value;r._state?n=e(i):(F1.length&&(F1=[]),n=e(i),F1.indexOf(i)===-1&&function(s){for(var o=th.length;o;)if(th[--o]._value===s._value)return void th.splice(o,1)}(r)),t.resolve(n)}catch(s){t.reject(s)}finally{lI=null,--rh==0&&wP(),--t.psd.ref||t.psd.finalize()}}function FK(e,r,t){if(r.length===t)return r;var n="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,n=nI(o,0)):(i=o,s=""),r.push(i+(s?": "+s:"")+n)}return vl&&((n=nI(e._stackHolder,2))&&r.indexOf(n)===-1&&r.push(n),e._prev&&FK(e._prev,r,t)),r}function jK(e,r){var t=r?r._numPrev+1:0;t<100&&(e._prev=r,e._numPrev=t)}function Tb(){ym()&&mm()}function ym(){var e=aI;return aI=!1,jw=!1,e}function mm(){var e,r,t;do for(;Lg.length>0;)for(e=Lg,Lg=[],t=e.length,r=0;r<t;++r){var n=e[r];n[0].apply(null,n[1])}while(Lg.length>0);aI=!0,jw=!0}function wP(){var e=th;th=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var r=j1.slice(0),t=r.length;t;)r[--t]()}function Ib(e){return new Et(Iy,!1,e)}function nn(e,r){var t=Bt;return function(){var n=ym(),i=Bt;try{return Pc(t,!0),e.apply(this,arguments)}catch(s){r&&r(s)}finally{Pc(i,!1),n&&mm()}}}Mp(Et.prototype,{then:cI,_then:function(e,r){bP(this,new BK(null,null,e,r,Bt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=arguments[0],t=arguments[1];return typeof r=="function"?this.then(null,n=>n instanceof r?t(n):Ib(n)):this.then(null,n=>n&&n.name===r?t(n):Ib(n))},finally:function(e){return this.then(r=>(e(),r),r=>(e(),Ib(r)))},stack:{get:function(){if(this._stack)return this._stack;try{oI=!0;var e=FK(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{oI=!1}}},timeout:function(e,r){return e<1/0?new Et((t,n)=>{var i=setTimeout(()=>n(new Wt.Timeout(r)),e);this.then(t,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Yl(Et.prototype,Symbol.toStringTag,"Dexie.Promise"),vp.env=HK(),Mp(Et,{all:function(){var e=Kl.apply(null,arguments).map(Ab);return new Et(function(r,t){e.length===0&&r([]);var n=e.length;e.forEach((i,s)=>Et.resolve(i).then(o=>{e[s]=o,--n||r(e)},t))})},resolve:e=>{if(e instanceof Et)return e;if(e&&typeof e.then=="function")return new Et((t,n)=>{e.then(t,n)});var r=new Et(Iy,!0,e);return jK(r,lI),r},reject:Ib,race:function(){var e=Kl.apply(null,arguments).map(Ab);return new Et((r,t)=>{e.map(n=>Et.resolve(n).then(r,t))})},PSD:{get:()=>Bt,set:e=>Bt=e},totalEchoes:{get:()=>Hw},newPSD:Cc,usePSD:fv,scheduler:{get:()=>Zg,set:e=>{Zg=e}},rejectionMapper:{get:()=>uI,set:e=>{uI=e}},follow:(e,r)=>new Et((t,n)=>Cc((i,s)=>{var o=Bt;o.unhandleds=[],o.onunhandled=s,o.finalize=bh(function(){(function(a){function l(){a(),j1.splice(j1.indexOf(l),1)}j1.push(l),++rh,Zg(()=>{--rh==0&&wP()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},r,t,n))}),L1&&(L1.allSettled&&Yl(Et,"allSettled",function(){const e=Kl.apply(null,arguments).map(Ab);return new Et(r=>{e.length===0&&r([]);let t=e.length;const n=new Array(t);e.forEach((i,s)=>Et.resolve(i).then(o=>n[s]={status:"fulfilled",value:o},o=>n[s]={status:"rejected",reason:o}).then(()=>--t||r(n)))})}),L1.any&&typeof AggregateError<"u"&&Yl(Et,"any",function(){const e=Kl.apply(null,arguments).map(Ab);return new Et((r,t)=>{e.length===0&&t(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((s,o)=>Et.resolve(s).then(a=>r(a),a=>{i[o]=a,--n||t(new AggregateError(i))}))})}));const Hi={awaits:0,echoes:0,id:0};var jbe=0,H1=[],_E=0,Hw=0,Hbe=0;function Cc(e,r,t,n){var i=Bt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Hbe;var o=vp.env;s.env=mP?{Promise:Et,PromiseProp:{value:Et,configurable:!0,writable:!0},all:Et.all,race:Et.race,allSettled:Et.allSettled,any:Et.any,resolve:Et.resolve,reject:Et.reject,nthen:FB(o.nthen,s),gthen:FB(o.gthen,s)}:{},r&&ls(s,r),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=fv(s,e,t,n);return s.ref===0&&s.finalize(),a}function cv(){return Hi.id||(Hi.id=++jbe),++Hi.awaits,Hi.echoes+=RK,Hi.id}function uu(){return!!Hi.awaits&&(--Hi.awaits==0&&(Hi.id=0),Hi.echoes=Hi.awaits*RK,!0)}function Ab(e){return Hi.echoes&&e&&e.constructor===L1?(cv(),e.then(r=>(uu(),r),r=>(uu(),ri(r)))):e}function zbe(e){++Hw,Hi.echoes&&--Hi.echoes!=0||(Hi.echoes=Hi.id=0),H1.push(Bt),Pc(e,!0)}function Ube(){var e=H1[H1.length-1];H1.pop(),Pc(e,!1)}function Pc(e,r){var t=Bt;if((r?!Hi.echoes||_E++&&e===Bt:!_E||--_E&&e===Bt)||zK(r?zbe.bind(null,e):Ube),e!==Bt&&(Bt=e,t===vp&&(vp.env=HK()),mP)){var n=vp.env.Promise,i=e.env;Fw.then=i.nthen,n.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty(en,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function HK(){var e=en.Promise;return mP?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(en,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Fw.then,gthen:e.prototype.then}:{}}function fv(e,r,t,n,i){var s=Bt;try{return Pc(e,!0),r(t,n,i)}finally{Pc(s,!1)}}function zK(e){DK.call(iI,e)}function zw(e,r,t,n){return typeof e!="function"?e:function(){var i=Bt;t&&cv(),Pc(r,!0);try{return e.apply(this,arguments)}finally{Pc(i,!1),n&&zK(uu)}}}function FB(e,r){return function(t,n){return e.call(this,zw(t,r),zw(n,r))}}(""+DK).indexOf("[native code]")===-1&&(cv=uu=zr);const jB="unhandledrejection";function HB(e,r){var t;try{t=r.onuncatched(e)}catch{}if(t!==!1)try{var n,i={promise:r,reason:e};if(en.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(jB,!0,!0),ls(n,i)):en.CustomEvent&&ls(n=new CustomEvent(jB,{detail:i}),i),n&&en.dispatchEvent&&(dispatchEvent(n),!en.PromiseRejectionEvent&&en.onunhandledrejection))try{en.onunhandledrejection(n)}catch{}vl&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ri=Et.reject;function hI(e,r,t,n){if(e.idbdb&&(e._state.openComplete||Bt.letThrough||e._vip)){var i=e._createTransaction(r,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===gP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>hI(e,r,t,n))):ri(s)}return i._promise(r,(s,o)=>Cc(()=>(Bt.trans=i,n(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ri(new Wt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ri(new Wt.DatabaseClosed);e.open().catch(zr)}return e._state.dbReadyPromise.then(()=>hI(e,r,t,n))}const zB="3.2.4",qf=String.fromCharCode(65535),dI=-1/0,Ml="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",UK="String expected.",Xg=[],k_=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Wbe=k_,Kbe=k_,WK=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),T_="__dbnames",xE="readonly",EE="readwrite";function wh(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}const KK={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ob(e){return typeof e!="string"||/\./.test(e)?r=>r:r=>(r[e]===void 0&&e in r&&delete(r=gm(r))[e],r)}class qbe{_trans(r,t,n){const i=this._tx||Bt.trans,s=this.name;function o(l,u,h){if(!h.schema[s])throw new Wt.NotFound("Table "+s+" not part of transaction");return t(h.idbtrans,h)}const a=ym();try{return i&&i.db===this.db?i===Bt.trans?i._promise(r,o,n):Cc(()=>i._promise(r,o,n),{trans:i,transless:Bt.transless||Bt}):hI(this.db,r,[this.name],o)}finally{a&&mm()}}get(r,t){return r&&r.constructor===Object?this.where(r).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:r}).then(i=>this.hook.reading.fire(i))).then(t)}where(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(zi(r))return new this.db.WhereClause(this,`[${r.join("+")}]`);const t=Hn(r);if(t.length===1)return this.where(t[0]).equals(r[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&t.every(h=>u.keyPath.indexOf(h)>=0)&&u.keyPath.every(h=>t.indexOf(h)>=0))[0];if(n&&this.db._maxKey!==qf)return this.where(n.name).equals(n.keyPath.map(u=>r[u]));!n&&vl&&console.warn(`The query ${JSON.stringify(r)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,h){try{return s.cmp(u,h)===0}catch{return!1}}const[a,l]=t.reduce(([u,h],c)=>{const p=i[c],m=r[c];return[u||p,u||!p?wh(h,p&&p.multi?w=>{const b=Zl(w,c);return zi(b)&&b.some(T=>o(m,T))}:w=>o(m,Zl(w,c))):h]},[null,null]);return a?this.where(a.name).equals(r[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(r){return this.toCollection().and(r)}count(r){return this.toCollection().count(r)}offset(r){return this.toCollection().offset(r)}limit(r){return this.toCollection().limit(r)}each(r){return this.toCollection().each(r)}toArray(r){return this.toCollection().toArray(r)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(r){return new this.db.Collection(new this.db.WhereClause(this,zi(r)?`[${r.join("+")}]`:r))}reverse(){return this.toCollection().reverse()}mapToClass(r){this.schema.mappedClass=r;const t=n=>{if(!n)return n;const i=Object.create(r.prototype);for(var s in n)if(to(n,s))try{i[s]=n[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),r}defineClass(){return this.mapToClass(function(r){ls(this,r)})}add(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Ob(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{ba(r,i,o)}catch{}return o})}update(r,t){if(typeof r!="object"||zi(r))return this.where(":id").equals(r).modify(t);{const n=Zl(r,this.schema.primKey.keyPath);if(n===void 0)return ri(new Wt.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?Hn(t).forEach(i=>{ba(r,i,t[i])}):t(r,{value:r,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}}put(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Ob(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{ba(r,i,o)}catch{}return o})}delete(r){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[r]})).then(t=>t.numFailures?Et.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"deleteRange",range:KK})).then(r=>r.numFailures?Et.reject(r.failures[0]):void 0)}bulkGet(r){return this._trans("readonly",t=>this.core.getMany({keys:r,trans:t}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let h=l&&a?r.map(Ob(l)):r;return this.core.mutate({trans:o,type:"add",keys:i,values:h,wantResults:s}).then(({numFailures:c,results:p,lastResult:m,failures:w})=>{if(c===0)return s?p:m;throw new Yg(`${this.name}.bulkAdd(): ${c} of ${u} operations failed`,w)})})}bulkPut(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let h=l&&a?r.map(Ob(l)):r;return this.core.mutate({trans:o,type:"put",keys:i,values:h,wantResults:s}).then(({numFailures:c,results:p,lastResult:m,failures:w})=>{if(c===0)return s?p:m;throw new Yg(`${this.name}.bulkPut(): ${c} of ${u} operations failed`,w)})})}bulkDelete(r){const t=r.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:r})).then(({numFailures:n,lastResult:i,failures:s})=>{if(n===0)return i;throw new Yg(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,s)})}}function Jg(e){var r={},t=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return r[o].subscribe.apply(null,u),e}if(typeof o=="string")return r[o]};t.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return t;function s(o,a,l){if(typeof o!="object"){var u;a||(a=Mbe),l||(l=zr);var h={subscribers:[],fire:l,subscribe:function(c){h.subscribers.indexOf(c)===-1&&(h.subscribers.push(c),h.fire=a(h.fire,c))},unsubscribe:function(c){h.subscribers=h.subscribers.filter(function(p){return p!==c}),h.fire=h.subscribers.reduce(a,l)}};return r[o]=t[o]=h,h}Hn(u=o).forEach(function(c){var p=u[c];if(zi(p))s(c,u[c][0],u[c][1]);else{if(p!=="asap")throw new Wt.InvalidArgument("Invalid event config");var m=s(c,Ty,function(){for(var w=arguments.length,b=new Array(w);w--;)b[w]=arguments[w];m.subscribers.forEach(function(T){SK(function(){T.apply(null,b)})})})}})}}function Eg(e,r){return dp(r).from({prototype:e}),r}function Sd(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function SE(e,r){e.filter=wh(e.filter,r)}function kE(e,r,t){var n=e.replayFilter;e.replayFilter=n?()=>wh(n(),r()):r,e.justLimit=t&&!n}function z1(e,r){if(e.isPrimKey)return r.primaryKey;const t=r.getIndexByKeyPath(e.index);if(!t)throw new Wt.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return t}function UB(e,r,t){const n=z1(e,r.schema);return r.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function Cb(e,r,t,n){const i=e.replayFilter?wh(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,p=>l.stop(p),p=>l.fail(p))){var h=l.primaryKey,c=""+h;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(h)),to(s,c)||(s[c]=!0,r(a,l,u))}};return Promise.all([e.or._iterate(o,t),WB(UB(e,n,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return WB(UB(e,n,t),wh(e.algorithm,i),r,!e.keysOnly&&e.valueMapper)}function WB(e,r,t,n){var i=nn(n?(s,o,a)=>t(n(s),o,a):t);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();r&&!r(s,a=>o=a,a=>{s.stop(a),o=zr},a=>{s.fail(a),o=zr})||i(s.value,s,a=>o=a),o()})})}function os(e,r){try{const t=KB(e),n=KB(r);if(t!==n)return t==="Array"?1:n==="Array"?-1:t==="binary"?1:n==="binary"?-1:t==="string"?1:n==="string"?-1:t==="Date"?1:n!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>r?1:e<r?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(qB(e),qB(r));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const h=os(i[u],s[u]);if(h!==0)return h}return o===a?0:o<a?-1:1}(e,r)}}catch{}return NaN}function KB(e){const r=typeof e;if(r!=="object")return r;if(ArrayBuffer.isView(e))return"binary";const t=tI(e);return t==="ArrayBuffer"?"binary":t}function qB(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Vbe{_read(r,t){var n=this._ctx;return n.error?n.table._trans(null,ri.bind(null,n.error)):n.table._trans("readonly",r).then(t)}_write(r){var t=this._ctx;return t.error?t.table._trans(null,ri.bind(null,t.error)):t.table._trans("readwrite",r,"locked")}_addAlgorithm(r){var t=this._ctx;t.algorithm=wh(t.algorithm,r)}_iterate(r,t){return Cb(this._ctx,r,t,this._ctx.table.core)}clone(r){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return r&&ls(n,r),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(r){var t=this._ctx;return this._read(n=>Cb(t,r,n,t.table.core))}count(r){return this._read(t=>{const n=this._ctx,i=n.table.core;if(Sd(n,!0))return i.count({trans:t,query:{index:z1(n,i.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var s=0;return Cb(n,()=>(++s,!1),t,i).then(()=>s)}).then(r)}sortBy(r,t){const n=r.split(".").reverse(),i=n[0],s=n.length-1;function o(u,h){return h?o(u[n[h]],h-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,h){var c=o(u,s),p=o(h,s);return c<p?-a:c>p?a:0}return this.toArray(function(u){return u.sort(l)}).then(t)}toArray(r){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&Sd(n,!0)&&n.limit>0){const{valueMapper:i}=n,s=z1(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Cb(n,s=>i.push(s),t,n.table.core).then(()=>i)}},r)}offset(r){var t=this._ctx;return r<=0||(t.offset+=r,Sd(t)?kE(t,()=>{var n=r;return(i,s)=>n===0||(n===1?(--n,!1):(s(()=>{i.advance(n),n=0}),!1))}):kE(t,()=>{var n=r;return()=>--n<0})),this}limit(r){return this._ctx.limit=Math.min(this._ctx.limit,r),kE(this._ctx,()=>{var t=r;return function(n,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(r,t){return SE(this._ctx,function(n,i,s){return!r(n.value)||(i(s),t)}),this}first(r){return this.limit(1).toArray(function(t){return t[0]}).then(r)}last(r){return this.reverse().first(r)}filter(r){var t,n;return SE(this._ctx,function(i){return r(i.value)}),t=this._ctx,n=r,t.isMatch=wh(t.isMatch,n),this}and(r){return this.filter(r)}or(r){return new this.db.WhereClause(this._ctx.table,r,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.key,i)})}eachUniqueKey(r){return this._ctx.unique="unique",this.eachKey(r)}eachPrimaryKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.primaryKey,i)})}keys(r){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.key)}).then(function(){return n}).then(r)}primaryKeys(r){var t=this._ctx;if(t.dir==="next"&&Sd(t,!0)&&t.limit>0)return this._read(i=>{var s=z1(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(r);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.primaryKey)}).then(function(){return n}).then(r)}uniqueKeys(r){return this._ctx.unique="unique",this.keys(r)}firstKey(r){return this.limit(1).keys(function(t){return t[0]}).then(r)}lastKey(r){return this.reverse().firstKey(r)}distinct(){var r=this._ctx,t=r.index&&r.table.schema.idxByName[r.index];if(!t||!t.multi)return this;var n={};return SE(this._ctx,function(i){var s=i.primaryKey.toString(),o=to(n,s);return n[s]=!0,!o}),this}modify(r){var t=this._ctx;return this._write(n=>{var i;if(typeof r=="function")i=r;else{var s=Hn(r),o=s.length;i=function(b){for(var T=!1,_=0;_<o;++_){var A=s[_],x=r[A];Zl(b,A)!==x&&(ba(b,A,x),T=!0)}return T}}const a=t.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,h=this.db._options.modifyChunkSize||200,c=[];let p=0;const m=[],w=(b,T)=>{const{failures:_,numFailures:A}=T;p+=b-A;for(let x of Hn(_))c.push(_[x])};return this.clone().primaryKeys().then(b=>{const T=_=>{const A=Math.min(h,b.length-_);return a.getMany({trans:n,keys:b.slice(_,_+A),cache:"immutable"}).then(x=>{const I=[],O=[],C=l?[]:null,g=[];for(let M=0;M<A;++M){const U=x[M],V={value:gm(U),primKey:b[_+M]};i.call(V,V.value,V)!==!1&&(V.value==null?g.push(b[_+M]):l||os(u(U),u(V.value))===0?(O.push(V.value),l&&C.push(b[_+M])):(g.push(b[_+M]),I.push(V.value)))}const R=Sd(t)&&t.limit===1/0&&(typeof r!="function"||r===TE)&&{index:t.index,range:t.range};return Promise.resolve(I.length>0&&a.mutate({trans:n,type:"add",values:I}).then(M=>{for(let U in M.failures)g.splice(parseInt(U),1);w(I.length,M)})).then(()=>(O.length>0||R&&typeof r=="object")&&a.mutate({trans:n,type:"put",keys:C,values:O,criteria:R,changeSpec:typeof r!="function"&&r}).then(M=>w(O.length,M))).then(()=>(g.length>0||R&&r===TE)&&a.mutate({trans:n,type:"delete",keys:g,criteria:R}).then(M=>w(g.length,M))).then(()=>b.length>_+A&&T(_+h))})};return T(0).then(()=>{if(c.length>0)throw new Lw("Error modifying one or more objects",c,p,m);return b.length})})})}delete(){var r=this._ctx,t=r.range;return Sd(r)&&(r.isPrimKey&&!Kbe||t.type===3)?this._write(n=>{const{primaryKey:i}=r.table.core.schema,s=t;return r.table.core.count({trans:n,query:{index:i,range:s}}).then(o=>r.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:h})=>{if(h)throw new Lw("Could not delete some values",Object.keys(a).map(c=>a[c]),o-h);return o-h}))}):this.modify(TE)}}const TE=(e,r)=>r.value=null;function Gbe(e,r){return e<r?-1:e===r?0:1}function Ybe(e,r){return e>r?-1:e===r?0:1}function Ks(e,r,t){var n=e instanceof VK?new e.Collection(e):e;return n._ctx.error=t?new t(r):new TypeError(r),n}function kd(e){return new e.Collection(e,()=>qK("")).limit(0)}function Zbe(e,r,t,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=r[l];if(u!==n[l])return i(e[l],t[l])<0?e.substr(0,l)+t[l]+t.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+t.substr(l+1):a>=0?e.substr(0,a)+r[a]+t.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&s==="next"?e+t.substr(e.length):o<e.length&&s==="prev"?e.substr(0,t.length):a<0?null:e.substr(0,a)+n[a]+t.substr(a+1)}function Pb(e,r,t,n){var i,s,o,a,l,u,h,c=t.length;if(!t.every(b=>typeof b=="string"))return Ks(e,UK);function p(b){i=function(_){return _==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),s=function(_){return _==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),o=b==="next"?Gbe:Ybe;var T=t.map(function(_){return{lower:s(_),upper:i(_)}}).sort(function(_,A){return o(_.lower,A.lower)});a=T.map(function(_){return _.upper}),l=T.map(function(_){return _.lower}),u=b,h=b==="next"?"":n}p("next");var m=new e.Collection(e,()=>rc(a[0],l[c-1]+n));m._ondirectionchange=function(b){p(b)};var w=0;return m._addAlgorithm(function(b,T,_){var A=b.key;if(typeof A!="string")return!1;var x=s(A);if(r(x,l,w))return!0;for(var I=null,O=w;O<c;++O){var C=Zbe(A,x,a[O],l[O],o,u);C===null&&I===null?w=O+1:(I===null||o(I,C)>0)&&(I=C)}return T(I!==null?function(){b.continue(I+h)}:_),!1}),m}function rc(e,r,t,n){return{type:2,lower:e,upper:r,lowerOpen:t,upperOpen:n}}function qK(e){return{type:1,lower:e,upper:e}}let VK=class{get Collection(){return this._ctx.table.db.Collection}between(r,t,n,i){n=n!==!1,i=i===!0;try{return this._cmp(r,t)>0||this._cmp(r,t)===0&&(n||i)&&(!n||!i)?kd(this):new this.Collection(this,()=>rc(r,t,!n,!i))}catch{return Ks(this,Ml)}}equals(r){return r==null?Ks(this,Ml):new this.Collection(this,()=>qK(r))}above(r){return r==null?Ks(this,Ml):new this.Collection(this,()=>rc(r,void 0,!0))}aboveOrEqual(r){return r==null?Ks(this,Ml):new this.Collection(this,()=>rc(r,void 0,!1))}below(r){return r==null?Ks(this,Ml):new this.Collection(this,()=>rc(void 0,r,!1,!0))}belowOrEqual(r){return r==null?Ks(this,Ml):new this.Collection(this,()=>rc(void 0,r))}startsWith(r){return typeof r!="string"?Ks(this,UK):this.between(r,r+qf,!0,!0)}startsWithIgnoreCase(r){return r===""?this.startsWith(r):Pb(this,(t,n)=>t.indexOf(n[0])===0,[r],qf)}equalsIgnoreCase(r){return Pb(this,(t,n)=>t===n[0],[r],"")}anyOfIgnoreCase(){var r=Kl.apply(Hd,arguments);return r.length===0?kd(this):Pb(this,(t,n)=>n.indexOf(t)!==-1,r,"")}startsWithAnyOfIgnoreCase(){var r=Kl.apply(Hd,arguments);return r.length===0?kd(this):Pb(this,(t,n)=>n.some(i=>t.indexOf(i)===0),r,qf)}anyOf(){const r=Kl.apply(Hd,arguments);let t=this._cmp;try{r.sort(t)}catch{return Ks(this,Ml)}if(r.length===0)return kd(this);const n=new this.Collection(this,()=>rc(r[0],r[r.length-1]));n._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,r.sort(t)};let i=0;return n._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,r[i])>0;)if(++i,i===r.length)return o(a),!1;return t(l,r[i])===0||(o(()=>{s.continue(r[i])}),!1)}),n}notEqual(r){return this.inAnyRange([[dI,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const r=Kl.apply(Hd,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ks(this,Ml)}const t=r.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[dI,i]],null);return t.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(r,t){const n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(r.length===0)return kd(this);if(!r.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return Ks(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Wt.InvalidArgument);const l=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;let h,c=i;function p(A,x){return c(A[0],x[0])}try{h=r.reduce(function(A,x){let I=0,O=A.length;for(;I<O;++I){const C=A[I];if(n(x[0],C[1])<0&&n(x[1],C[0])>0){C[0]=o(C[0],x[0]),C[1]=a(C[1],x[1]);break}}return I===O&&A.push(x),A},[]),h.sort(p)}catch{return Ks(this,Ml)}let m=0;const w=u?A=>i(A,h[m][1])>0:A=>i(A,h[m][1])>=0,b=l?A=>s(A,h[m][0])>0:A=>s(A,h[m][0])>=0;let T=w;const _=new this.Collection(this,()=>rc(h[0][0],h[h.length-1][1],!l,!u));return _._ondirectionchange=A=>{A==="next"?(T=w,c=i):(T=b,c=s),h.sort(p)},_._addAlgorithm((A,x,I)=>{for(var O=A.key;T(O);)if(++m,m===h.length)return x(I),!1;return!!function(C){return!w(C)&&!b(C)}(O)||(this._cmp(O,h[m][1])===0||this._cmp(O,h[m][0])===0||x(()=>{c===i?A.continue(h[m][0]):A.continue(h[m][1])}),!1)}),_}startsWithAnyOf(){const r=Kl.apply(Hd,arguments);return r.every(t=>typeof t=="string")?r.length===0?kd(this):this.inAnyRange(r.map(t=>[t,t+qf])):Ks(this,"startsWithAnyOf() only works with strings")}};function Ja(e){return nn(function(r){return Ay(r),e(r.target.error),!1})}function Ay(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Oy="storagemutated",hc="x-storagemutated-1",Nc=Jg(null,Oy);class Xbe{_lock(){return Mg(!Bt.global),++this._reculock,this._reculock!==1||Bt.global||(Bt.lockOwnerFor=this),this}_unlock(){if(Mg(!Bt.global),--this._reculock==0)for(Bt.global||(Bt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{fv(r[1],r[0])}catch{}}return this}_locked(){return this._reculock&&Bt.lockOwnerFor!==this}create(r){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Mg(!this.idbtrans),!r&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Wt.DatabaseClosed(n);case"MissingAPIError":throw new Wt.MissingAPI(n.message,n);default:throw new Wt.OpenFailed(n)}if(!this.active)throw new Wt.TransactionInactive;return Mg(this._completion._state===null),(r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=nn(i=>{Ay(i),this._reject(r.error)}),r.onabort=nn(i=>{Ay(i),this.active&&this._reject(new Wt.Abort(r.error)),this.active=!1,this.on("abort").fire(i)}),r.oncomplete=nn(()=>{this.active=!1,this._resolve(),"mutatedParts"in r&&Nc.storagemutated.fire(r.mutatedParts)}),this}_promise(r,t,n){if(r==="readwrite"&&this.mode!=="readwrite")return ri(new Wt.ReadOnly("Transaction is readonly"));if(!this.active)return ri(new Wt.TransactionInactive);if(this._locked())return new Et((s,o)=>{this._blockedFuncs.push([()=>{this._promise(r,t,n).then(s,o)},Bt])});if(n)return Cc(()=>{var s=new Et((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Et((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(r){var t=this._root();const n=Et.resolve(r);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Et((o,a)=>{n.then(l=>t._waitingQueue.push(nn(o.bind(null,l))),l=>t._waitingQueue.push(nn(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Wt.Abort))}table(r){const t=this._memoizedTables||(this._memoizedTables={});if(to(t,r))return t[r];const n=this.schema[r];if(!n)throw new Wt.NotFound("Table "+r+" not part of transaction");const i=new this.db.Table(r,n,this);return i.core=this.db.core.table(r),t[r]=i,i}}function pI(e,r,t,n,i,s,o){return{name:e,keyPath:r,unique:t,multi:n,auto:i,compound:s,src:(t&&!o?"&":"")+(n?"*":"")+(i?"++":"")+GK(r)}}function GK(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function YK(e,r,t){return{name:e,primKey:r,indexes:t,mappedClass:null,idxByName:kK(t,n=>[n.name,n])}}let Cy=e=>{try{return e.only([[]]),Cy=()=>[[]],[[]]}catch{return Cy=()=>qf,qf}};function vI(e){return e==null?()=>{}:typeof e=="string"?function(r){return r.split(".").length===1?n=>n[r]:n=>Zl(n,r)}(e):r=>Zl(r,e)}function VB(e){return[].slice.call(e)}let Jbe=0;function Qg(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Qbe(e,r,t){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:h,lowerOpen:c,upperOpen:p}=l;return u===void 0?h===void 0?null:r.upperBound(h,!!p):h===void 0?r.lowerBound(u,!!c):r.bound(u,h,!!c,!!p)}const{schema:i,hasGetAll:s}=function(l,u){const h=VB(l.objectStoreNames);return{schema:{name:l.name,tables:h.map(c=>u.objectStore(c)).map(c=>{const{keyPath:p,autoIncrement:m}=c,w=zi(p),b=p==null,T={},_={name:c.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:p,autoIncrement:m,unique:!0,extractKey:vI(p)},indexes:VB(c.indexNames).map(A=>c.index(A)).map(A=>{const{name:x,unique:I,multiEntry:O,keyPath:C}=A,g={name:x,compound:zi(C),keyPath:C,unique:I,multiEntry:O,extractKey:vI(C)};return T[Qg(C)]=g,g}),getIndexByKeyPath:A=>T[Qg(A)]};return T[":id"]=_.primaryKey,p!=null&&(T[Qg(p)]=_.primaryKey),_})},hasGetAll:h.length>0&&"getAll"in u.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=i.tables.map(l=>function(u){const h=u.name;return{name:h,schema:u,mutate:function({trans:c,type:p,keys:m,values:w,range:b}){return new Promise((T,_)=>{T=nn(T);const A=c.objectStore(h),x=A.keyPath==null,I=p==="put"||p==="add";if(!I&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:O}=m||w||{length:1};if(m&&w&&m.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const g=[],R=[];let M=0;const U=ne=>{++M,Ay(ne)};if(p==="deleteRange"){if(b.type===4)return T({numFailures:M,failures:R,results:[],lastResult:void 0});b.type===3?g.push(C=A.clear()):g.push(C=A.delete(n(b)))}else{const[ne,re]=I?x?[w,m]:[w,null]:[m,null];if(I)for(let Q=0;Q<O;++Q)g.push(C=re&&re[Q]!==void 0?A[p](ne[Q],re[Q]):A[p](ne[Q])),C.onerror=U;else for(let Q=0;Q<O;++Q)g.push(C=A[p](ne[Q])),C.onerror=U}const V=ne=>{const re=ne.target.result;g.forEach((Q,F)=>Q.error!=null&&(R[F]=Q.error)),T({numFailures:M,failures:R,results:p==="delete"?m:g.map(Q=>Q.result),lastResult:re})};C.onerror=ne=>{U(ne),V(ne)},C.onsuccess=V})},getMany:({trans:c,keys:p})=>new Promise((m,w)=>{m=nn(m);const b=c.objectStore(h),T=p.length,_=new Array(T);let A,x=0,I=0;const O=g=>{const R=g.target;_[R._pos]=R.result,++I===x&&m(_)},C=Ja(w);for(let g=0;g<T;++g)p[g]!=null&&(A=b.get(p[g]),A._pos=g,A.onsuccess=O,A.onerror=C,++x);x===0&&m(_)}),get:({trans:c,key:p})=>new Promise((m,w)=>{m=nn(m);const b=c.objectStore(h).get(p);b.onsuccess=T=>m(T.target.result),b.onerror=Ja(w)}),query:function(c){return p=>new Promise((m,w)=>{m=nn(m);const{trans:b,values:T,limit:_,query:A}=p,x=_===1/0?void 0:_,{index:I,range:O}=A,C=b.objectStore(h),g=I.isPrimaryKey?C:C.index(I.name),R=n(O);if(_===0)return m({result:[]});if(c){const M=T?g.getAll(R,x):g.getAllKeys(R,x);M.onsuccess=U=>m({result:U.target.result}),M.onerror=Ja(w)}else{let M=0;const U=T||!("openKeyCursor"in g)?g.openCursor(R):g.openKeyCursor(R),V=[];U.onsuccess=ne=>{const re=U.result;return re?(V.push(T?re.value:re.primaryKey),++M===_?m({result:V}):void re.continue()):m({result:V})},U.onerror=Ja(w)}})}(s),openCursor:function({trans:c,values:p,query:m,reverse:w,unique:b}){return new Promise((T,_)=>{T=nn(T);const{index:A,range:x}=m,I=c.objectStore(h),O=A.isPrimaryKey?I:I.index(A.name),C=w?b?"prevunique":"prev":b?"nextunique":"next",g=p||!("openKeyCursor"in O)?O.openCursor(n(x),C):O.openKeyCursor(n(x),C);g.onerror=Ja(_),g.onsuccess=nn(R=>{const M=g.result;if(!M)return void T(null);M.___id=++Jbe,M.done=!1;const U=M.continue.bind(M);let V=M.continuePrimaryKey;V&&(V=V.bind(M));const ne=M.advance.bind(M),re=()=>{throw new Error("Cursor not stopped")};M.trans=c,M.stop=M.continue=M.continuePrimaryKey=M.advance=()=>{throw new Error("Cursor not started")},M.fail=nn(_),M.next=function(){let Q=1;return this.start(()=>Q--?this.continue():this.stop()).then(()=>this)},M.start=Q=>{const F=new Promise((se,Ee)=>{se=nn(se),g.onerror=Ja(Ee),M.fail=Ee,M.stop=ye=>{M.stop=M.continue=M.continuePrimaryKey=M.advance=re,se(ye)}}),Z=()=>{if(g.result)try{Q()}catch(se){M.fail(se)}else M.done=!0,M.start=()=>{throw new Error("Cursor behind last entry")},M.stop()};return g.onsuccess=nn(se=>{g.onsuccess=Z,Z()}),M.continue=U,M.continuePrimaryKey=V,M.advance=ne,Z(),F},T(M)},_)})},count({query:c,trans:p}){const{index:m,range:w}=c;return new Promise((b,T)=>{const _=p.objectStore(h),A=m.isPrimaryKey?_:_.index(m.name),x=n(w),I=x?A.count(x):A.count();I.onsuccess=nn(O=>b(O.target.result)),I.onerror=Ja(T)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Cy(r),schema:i}}function gI({_novip:e},r){const t=r.db,n=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(h,c){return c.reduce((p,{create:m})=>({...p,...m(p)}),h)}(Qbe(s,o,l),i.dbcore)}}(e._middlewares,t,e._deps,r);e.core=n.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Uw({_novip:e},r,t,n){t.forEach(i=>{const s=n[i];r.forEach(o=>{const a=dP(o,i);(!a||"value"in a&&a.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?Yl(o,i,{get(){return this.table(i)},set(l){xK(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function yI({_novip:e},r){r.forEach(t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]})}function e1e(e,r){return e._cfg.version-r._cfg.version}function t1e(e,r,t,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(t),s._completion.catch(n);const o=s._reject.bind(s),a=Bt.transless||Bt;Cc(()=>{Bt.trans=s,Bt.transless=a,r===0?(Hn(i).forEach(l=>{IE(t,l,i[l].primKey,i[l].indexes)}),gI(e,t),Et.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,h,c){const p=[],m=l._versions;let w=l._dbSchema=bI(l,l.idbdb,c),b=!1;const T=m.filter(A=>A._cfg.version>=u);function _(){return p.length?Et.resolve(p.shift()(h.idbtrans)).then(_):Et.resolve()}return T.forEach(A=>{p.push(()=>{const x=w,I=A._cfg.dbschema;wI(l,x,c),wI(l,I,c),w=l._dbSchema=I;const O=ZK(x,I);O.add.forEach(g=>{IE(c,g[0],g[1].primKey,g[1].indexes)}),O.change.forEach(g=>{if(g.recreate)throw new Wt.Upgrade("Not yet support for changing primary key");{const R=c.objectStore(g.name);g.add.forEach(M=>mI(R,M)),g.change.forEach(M=>{R.deleteIndex(M.name),mI(R,M)}),g.del.forEach(M=>R.deleteIndex(M))}});const C=A._cfg.contentUpgrade;if(C&&A._cfg.version>u){gI(l,c),h._memoizedTables={},b=!0;let g=TK(I);O.del.forEach(V=>{g[V]=x[V]}),yI(l,[l.Transaction.prototype]),Uw(l,[l.Transaction.prototype],Hn(g),g),h.schema=g;const R=pP(C);let M;R&&cv();const U=Et.follow(()=>{if(M=C(h),M&&R){var V=uu.bind(null,null);M.then(V,V)}});return M&&typeof M.then=="function"?Et.resolve(M):U.then(()=>M)}}),p.push(x=>{(!b||!Wbe)&&function(I,O){[].slice.call(O.db.objectStoreNames).forEach(C=>I[C]==null&&O.db.deleteObjectStore(C))}(A._cfg.dbschema,x),yI(l,[l.Transaction.prototype]),Uw(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),h.schema=l._dbSchema})}),_().then(()=>{var A,x;x=c,Hn(A=w).forEach(I=>{x.db.objectStoreNames.contains(I)||IE(x,I,A[I].primKey,A[I].indexes)})})}(e,r,s,t).catch(o)})}function ZK(e,r){const t={del:[],add:[],change:[]};let n;for(n in e)r[n]||t.del.push(n);for(n in r){const i=e[n],s=r[n];if(i){const o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!k_)o.recreate=!0,t.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const h=a[u],c=l[u];h?h.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([n,s])}return t}function IE(e,r,t,n){const i=e.db.createObjectStore(r,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return n.forEach(s=>mI(i,s)),i}function mI(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function bI(e,r,t){const n={};return Mw(r.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const a=pI(GK(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let h=0;h<s.indexNames.length;++h){const c=s.index(s.indexNames[h]);o=c.keyPath;var u=pI(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}n[i]=YK(i,a,l)}),n}function wI({_novip:e},r,t){const n=t.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=t.objectStore(s);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,h=typeof u=="string"?u:"["+Mw(u).join("+")+"]";if(r[s]){const c=r[s].idxByName[h];c&&(c.name=l,delete r[s].idxByName[h],r[s].idxByName[l]=c)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&en.WorkerGlobalScope&&en instanceof en.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class r1e{_parseStoresSpec(r,t){Hn(r).forEach(n=>{if(r[n]!==null){var i=r[n].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return pI(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),zi(u),a===0)}),s=i.shift();if(s.multi)throw new Wt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Wt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Wt.Schema("Index must have a name and cannot be an empty string")}),t[n]=YK(n,s,i)}})}stores(r){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?ls(this._cfg.storesSource,r):r;const n=t._versions,i={};let s={};return n.forEach(o=>{ls(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,yI(t,[t._allTables,t,t.Transaction.prototype]),Uw(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Hn(s),s),t._storeNames=Hn(s),this}upgrade(r){return this._cfg.contentUpgrade=yP(this._cfg.contentUpgrade||zr,r),this}}function $P(e,r){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new Xl(T_,{addons:[],indexedDB:e,IDBKeyRange:r}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function _P(e){return e&&typeof e.databases=="function"}function $I(e){return Cc(function(){return Bt.letThrough=!0,e()})}function n1e(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(r){var t=function(){return indexedDB.databases().finally(r)};e=setInterval(t,100),t()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function i1e(e){const r=e._state,{indexedDB:t}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?ri(r.dbOpenError):e);vl&&(r.openCanceller._stackHolder=Dh()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const n=r.openCanceller;function i(){if(r.openCanceller!==n)throw new Wt.DatabaseClosed("db.open() was cancelled")}let s=r.dbReadyResolve,o=null,a=!1;return Et.race([n,(typeof navigator>"u"?Et.resolve():n1e()).then(()=>new Et((l,u)=>{if(i(),!t)throw new Wt.MissingAPI;const h=e.name,c=r.autoSchema?t.open(h):t.open(h,Math.round(10*e.verno));if(!c)throw new Wt.MissingAPI;c.onerror=Ja(u),c.onblocked=nn(e._fireOnBlocked),c.onupgradeneeded=nn(p=>{if(o=c.transaction,r.autoSchema&&!e._options.allowEmptyDB){c.onerror=Ay,o.abort(),c.result.close();const w=t.deleteDatabase(h);w.onsuccess=w.onerror=nn(()=>{u(new Wt.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=Ja(u);var m=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;a=m<1,e._novip.idbdb=c.result,t1e(e,m/10,o,u)}},u),c.onsuccess=nn(()=>{o=null;const p=e._novip.idbdb=c.result,m=Mw(p.objectStoreNames);if(m.length>0)try{const b=p.transaction((w=m).length===1?w[0]:w,"readonly");r.autoSchema?function({_novip:T},_,A){T.verno=_.version/10;const x=T._dbSchema=bI(0,_,A);T._storeNames=Mw(_.objectStoreNames,0),Uw(T,[T._allTables],Hn(x),x)}(e,p,b):(wI(e,e._dbSchema,b),function(T,_){const A=ZK(bI(0,T.idbdb,_),T._dbSchema);return!(A.add.length||A.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),gI(e,b)}catch{}var w;Xg.push(e),p.onversionchange=nn(b=>{r.vcFired=!0,e.on("versionchange").fire(b)}),p.onclose=nn(b=>{e.on("close").fire(b)}),a&&function({indexedDB:b,IDBKeyRange:T},_){!_P(b)&&_!==T_&&$P(b,T).put({name:_}).catch(zr)}(e._deps,h),l()},u)}))]).then(()=>(i(),r.onReadyBeingFired=[],Et.resolve($I(()=>e.on.ready.fire(e.vip))).then(function l(){if(r.onReadyBeingFired.length>0){let u=r.onReadyBeingFired.reduce(yP,zr);return r.onReadyBeingFired=[],Et.resolve($I(()=>u(e.vip))).then(l)}}))).finally(()=>{r.onReadyBeingFired=null,r.isBeingOpened=!1}).then(()=>e).catch(l=>{r.dbOpenError=l;try{o&&o.abort()}catch{}return n===r.openCanceller&&e._close(),ri(l)}).finally(()=>{r.openComplete=!0,s()})}function _I(e){var r=s=>e.next(s),t=i(r),n=i(s=>e.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(t,n):zi(l)?Promise.all(l).then(t,n):t(l)}}return i(r)()}function s1e(e,r,t){var n=arguments.length;if(n<2)throw new Wt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return t=i.pop(),[e,IK(i),t]}function XK(e,r,t,n,i){return Et.resolve().then(()=>{const s=Bt.transless||Bt,o=e._createTransaction(r,t,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===gP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>XK(e,r,t,null,i))):ri(c)}const l=pP(i);let u;l&&cv();const h=Et.follow(()=>{if(u=i.call(o,o),u)if(l){var c=uu.bind(null,null);u.then(c,c)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=_I(u))},a);return(u&&typeof u.then=="function"?Et.resolve(u).then(c=>o.active?c:ri(new Wt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>u)).then(c=>(n&&o._resolve(),o._completion.then(()=>c))).catch(c=>(o._reject(c),ri(c)))})}function Nb(e,r,t){const n=zi(e)?e.slice():[e];for(let i=0;i<t;++i)n.push(r);return n}const o1e={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(r){const t=e.table(r),{schema:n}=t,i={},s=[];function o(h,c,p){const m=Qg(h),w=i[m]=i[m]||[],b=h==null?0:typeof h=="string"?1:h.length,T=c>0,_={...p,isVirtual:T,keyTail:c,keyLength:b,extractKey:vI(h),unique:!T&&p.unique};return w.push(_),_.isPrimaryKey||s.push(_),b>1&&o(b===2?h[0]:h.slice(0,b-1),c+1,p),w.sort((A,x)=>A.keyTail-x.keyTail),_}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const h of n.indexes)o(h.keyPath,0,h);function l(h){const c=h.query.index;return c.isVirtual?{...h,query:{index:c,range:(p=h.query.range,m=c.keyTail,{type:p.type===1?2:p.type,lower:Nb(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Nb(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0})}}:h;var p,m}return{...t,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(h){const c=i[Qg(h)];return c&&c[0]}},count:h=>t.count(l(h)),query:h=>t.query(l(h)),openCursor(h){const{keyTail:c,isVirtual:p,keyLength:m}=h.query.index;return p?t.openCursor(l(h)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(_){_!=null?b.continue(Nb(_,h.reverse?e.MAX_KEY:e.MIN_KEY,c)):h.unique?b.continue(b.key.slice(0,m).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,c)):b.continue()}},continuePrimaryKey:{value(_,A){b.continuePrimaryKey(Nb(_,e.MAX_KEY,c),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const _=b.key;return m===1?_[0]:_.slice(0,m)}},value:{get:()=>b.value}})}(w)):t.openCursor(h)}}}}}};function xP(e,r,t,n){return t=t||{},n=n||"",Hn(e).forEach(i=>{if(to(r,i)){var s=e[i],o=r[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=tI(s);a!==tI(o)?t[n+i]=r[i]:a==="Object"?xP(s,o,t,n+i+"."):s!==o&&(t[n+i]=r[i])}else s!==o&&(t[n+i]=r[i])}else t[n+i]=void 0}),Hn(r).forEach(i=>{to(e,i)||(t[n+i]=r[i])}),t}const a1e={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(r){const t=e.table(r),{primaryKey:n}=t.schema;return{...t,mutate(s){const o=Bt.trans,{deleting:a,creating:l,updating:u}=o.table(r).hook;switch(s.type){case"add":if(l.fire===zr)break;return o._promise("readwrite",()=>h(s),!0);case"put":if(l.fire===zr&&u.fire===zr)break;return o._promise("readwrite",()=>h(s),!0);case"delete":if(a.fire===zr)break;return o._promise("readwrite",()=>h(s),!0);case"deleteRange":if(a.fire===zr)break;return o._promise("readwrite",()=>function(p){return c(p.trans,p.range,1e4)}(s),!0)}return t.mutate(s);function h(p){const m=Bt.trans,w=p.keys||function(b,T){return T.type==="delete"?T.keys:T.keys||T.values.map(b.extractKey)}(n,p);if(!w)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:w}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(b,T,_){return T.type==="add"?Promise.resolve([]):b.getMany({trans:T.trans,keys:_,cache:"immutable"})}(t,p,w).then(b=>{const T=w.map((_,A)=>{const x=b[A],I={onerror:null,onsuccess:null};if(p.type==="delete")a.fire.call(I,_,x,m);else if(p.type==="add"||x===void 0){const O=l.fire.call(I,_,p.values[A],m);_==null&&O!=null&&(_=O,p.keys[A]=_,n.outbound||ba(p.values[A],n.keyPath,_))}else{const O=xP(x,p.values[A]),C=u.fire.call(I,O,_,x,m);if(C){const g=p.values[A];Object.keys(C).forEach(R=>{to(g,R)?g[R]=C[R]:ba(g,R,C[R])})}}return I});return t.mutate(p).then(({failures:_,results:A,numFailures:x,lastResult:I})=>{for(let O=0;O<w.length;++O){const C=A?A[O]:w[O],g=T[O];C==null?g.onerror&&g.onerror(_[O]):g.onsuccess&&g.onsuccess(p.type==="put"&&b[O]?p.values[O]:C)}return{failures:_,results:A,numFailures:x,lastResult:I}}).catch(_=>(T.forEach(A=>A.onerror&&A.onerror(_)),Promise.reject(_)))})}function c(p,m,w){return t.query({trans:p,values:!1,query:{index:n,range:m},limit:w}).then(({result:b})=>h({type:"delete",keys:b,trans:p}).then(T=>T.numFailures>0?Promise.reject(T.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:c(p,{...m,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function JK(e,r,t){try{if(!r||r.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<r.keys.length&&s<e.length;++i)os(r.keys[i],e[s])===0&&(n.push(t?gm(r.values[i]):r.values[i]),++s);return n.length===e.length?n:null}catch{return null}}const l1e={stack:"dbcore",level:-1,create:e=>({table:r=>{const t=e.table(r);return{...t,getMany:n=>{if(!n.cache)return t.getMany(n);const i=JK(n.keys,n.trans._cache,n.cache==="clone");return i?Et.resolve(i):t.getMany(n).then(s=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?gm(s):s},s))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),t.mutate(n))}}})};function EP(e){return!("from"in e)}const jl=function(e,r){if(!this){const t=new jl;return e&&"d"in e&&ls(t,e),t}ls(this,arguments.length?{d:1,from:e,to:arguments.length>1?r:e}:{d:0})};function Py(e,r,t){const n=os(r,t);if(isNaN(n))return;if(n>0)throw RangeError();if(EP(e))return ls(e,{from:r,to:t,d:1});const i=e.l,s=e.r;if(os(t,e.from)<0)return i?Py(i,r,t):e.l={from:r,to:t,d:1,l:null,r:null},GB(e);if(os(r,e.to)>0)return s?Py(s,r,t):e.r={from:r,to:t,d:1,l:null,r:null},GB(e);os(r,e.from)<0&&(e.from=r,e.l=null,e.d=s?s.d+1:1),os(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Ww(e,i),s&&o&&Ww(e,s)}function Ww(e,r){EP(r)||function t(n,{from:i,to:s,l:o,r:a}){Py(n,i,s),o&&t(n,o),a&&t(n,a)}(e,r)}function u1e(e,r){const t=xI(r);let n=t.next();if(n.done)return!1;let i=n.value;const s=xI(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(os(a.from,i.to)<=0&&os(a.to,i.from)>=0)return!0;os(i.from,a.from)<0?i=(n=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function xI(e){let r=EP(e)?null:{s:0,n:e};return{next(t){const n=arguments.length>0;for(;r;)switch(r.s){case 0:if(r.s=1,n)for(;r.n.l&&os(t,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!n||os(t,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function GB(e){var r,t;const n=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],o[i]=a[s],e[s]=o,o.d=YB(o)}e.d=YB(e)}function YB({r:e,l:r}){return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}Mp(jl.prototype,{add(e){return Ww(this,e),this},addKey(e){return Py(this,e,e),this},addKeys(e){return e.forEach(r=>Py(this,r,r)),this},[rI](){return xI(this)}});const c1e={stack:"dbcore",level:0,create:e=>{const r=e.schema.name,t=new jl(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:p=>{const m=p.trans,w=m.mutatedParts||(m.mutatedParts={}),b=C=>{const g=`idb://${r}/${n}/${C}`;return w[g]||(w[g]=new jl)},T=b(""),_=b(":dels"),{type:A}=p;let[x,I]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const O=p.trans._cache;return i.mutate(p).then(C=>{if(zi(x)){A!=="delete"&&(x=C.results),T.addKeys(x);const g=JK(x,O);g||A==="add"||_.addKeys(x),(g||I)&&function(R,M,U,V){function ne(re){const Q=R(re.name||"");function F(se){return se!=null?re.extractKey(se):null}const Z=se=>re.multiEntry&&zi(se)?se.forEach(Ee=>Q.addKey(Ee)):Q.addKey(se);(U||V).forEach((se,Ee)=>{const ye=U&&F(U[Ee]),Pe=V&&F(V[Ee]);os(ye,Pe)!==0&&(ye!=null&&Z(ye),Pe!=null&&Z(Pe))})}M.indexes.forEach(ne)}(b,s,g,I)}else if(x){const g={from:x.lower,to:x.upper};_.add(g),T.add(g)}else T.add(t),_.add(t),s.indexes.forEach(g=>b(g.name).add(t));return C})}},h=({query:{index:p,range:m}})=>{var w,b;return[p,new jl((w=m.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=m.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},c={get:p=>[o,new jl(p.key)],getMany:p=>[o,new jl().addKeys(p.keys)],count:h,query:h,openCursor:h};return Hn(c).forEach(p=>{u[p]=function(m){const{subscr:w}=Bt;if(w){const b=I=>{const O=`idb://${r}/${n}/${I}`;return w[O]||(w[O]=new jl)},T=b(""),_=b(":dels"),[A,x]=c[p](m);if(b(A.name||"").add(x),!A.isPrimaryKey){if(p!=="count"){const I=p==="query"&&l&&m.values&&i.query({...m,values:!1});return i[p].apply(this,arguments).then(O=>{if(p==="query"){if(l&&m.values)return I.then(({result:g})=>(T.addKeys(g),O));const C=m.values?O.result.map(a):O.result;m.values?T.addKeys(C):_.addKeys(C)}else if(p==="openCursor"){const C=O,g=m.values;return C&&Object.create(C,{key:{get:()=>(_.addKey(C.primaryKey),C.key)},primaryKey:{get(){const R=C.primaryKey;return _.addKey(R),R}},value:{get:()=>(g&&T.addKey(C.primaryKey),C.value)}})}return O})}_.add(t)}}return i[p].apply(this,arguments)}}),u}}}};class Xl{constructor(r,t){this._middlewares={},this.verno=0;const n=Xl.dependencies;this._options=t={addons:Xl.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:zr,dbReadyPromise:null,cancelOpen:zr,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new Et(a=>{s.dbReadyResolve=a}),s.openCanceller=new Et((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=r,this.on=Jg(this,"populate","blocked","versionchange","close",{ready:[yP,zr]}),this.on.ready.subscribe=EK(this.on.ready.subscribe,a=>(l,u)=>{Xl.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||Et.resolve().then(l),u&&a(l);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(l),u&&a(l);else{a(l);const c=this;u||a(function p(){c.on.ready.unsubscribe(l),c.on.ready.unsubscribe(p)})}})}),this.Collection=(o=this,Eg(Vbe.prototype,function(a,l){this.db=o;let u=KK,h=null;if(l)try{u=l()}catch(w){h=w}const c=a._ctx,p=c.table,m=p.hook.reading.fire;this._ctx={table:p,index:c.index,isPrimKey:!c.index||p.schema.primKey.keyPath&&c.index===p.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:c.or,valueMapper:m!==Ty?m:null}})),this.Table=function(a){return Eg(qbe.prototype,function(l,u,h){this.db=a,this._tx=h,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:Jg(null,{creating:[Rbe,zr],reading:[Nbe,Ty],updating:[Bbe,zr],deleting:[Dbe,zr]})})}(this),this.Transaction=function(a){return Eg(Xbe.prototype,function(l,u,h,c,p){this.db=a,this.mode=l,this.storeNames=u,this.schema=h,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=Jg(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Et((m,w)=>{this._resolve=m,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var w=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):w&&this.idbtrans&&this.idbtrans.abort(),ri(m)})})}(this),this.Version=function(a){return Eg(r1e.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Eg(VK.prototype,function(l,u,h){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:h};const c=a._deps.indexedDB;if(!c)throw new Wt.MissingAPI;this._cmp=this._ascending=c.cmp.bind(c),this._descending=(p,m)=>c.cmp(m,p),this._max=(p,m)=>c.cmp(p,m)>0?p:m,this._min=(p,m)=>c.cmp(p,m)<0?p:m,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Cy(t.IDBKeyRange),this._createTransaction=(a,l,u,h)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,h),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Xg.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(o1e),this.use(a1e),this.use(c1e),this.use(l1e),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(r){if(isNaN(r)||r<.1)throw new Wt.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new Wt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);const t=this._versions;var n=t.filter(i=>i._cfg.version===r)[0];return n||(n=new this.Version(r),t.push(n),t.sort(e1e),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(r){return this.idbdb&&(this._state.openComplete||Bt.letThrough||this._vip)?r():new Et((t,n)=>{if(this._state.openComplete)return n(new Wt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new Wt.DatabaseClosed);this.open().catch(zr)}this._state.dbReadyPromise.then(t,n)}).then(r)}use({stack:r,create:t,level:n,name:i}){i&&this.unuse({stack:r,name:i});const s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:t,level:n??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:r,name:t,create:n}){return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(i=>n?i.create!==n:!!t&&i.name!==t)),this}open(){return i1e(this)}_close(){const r=this._state,t=Xg.indexOf(this);if(t>=0&&Xg.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}r.dbReadyPromise=new Et(n=>{r.dbReadyResolve=n}),r.openCanceller=new Et((n,i)=>{r.cancelOpen=i})}close(){this._close();const r=this._state;this._options.autoOpen=!1,r.dbOpenError=new Wt.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError)}delete(){const r=arguments.length>0,t=this._state;return new Et((n,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=nn(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!_P(a)&&u!==T_&&$P(a,l).delete(u).catch(zr)})(this._deps,this.name),n()}),o.onerror=Ja(i),o.onblocked=this._fireOnBlocked};if(r)throw new Wt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Hn(this._allTables).map(r=>this._allTables[r])}transaction(){const r=s1e.apply(this,arguments);return this._transaction.apply(this,r)}_transaction(r,t,n){let i=Bt.trans;i&&i.db===this&&r.indexOf("!")===-1||(i=null);const s=r.indexOf("?")!==-1;let o,a;r=r.replace("!","").replace("?","");try{if(a=t.map(u=>{var h=u instanceof this.Table?u.name:u;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),r=="r"||r===xE)o=xE;else{if(r!="rw"&&r!=EE)throw new Wt.InvalidArgument("Invalid transaction mode: "+r);o=EE}if(i){if(i.mode===xE&&o===EE){if(!s)throw new Wt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new Wt.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(h,c)=>{c(u)}):ri(u)}const l=XK.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Bt.trans?fv(Bt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(r){if(!to(this._allTables,r))throw new Wt.InvalidTable(`Table ${r} does not exist`);return this._allTables[r]}}const f1e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class h1e{constructor(r){this._subscribe=r}subscribe(r,t,n){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:t,complete:n})}[f1e](){return this}}function QK(e,r){return Hn(r).forEach(t=>{Ww(e[t]||(e[t]=new jl),r[t])}),e}function d1e(e){let r,t=!1;const n=new h1e(i=>{const s=pP(e);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,Nc.storagemutated.unsubscribe(m)}};i.start&&i.start(u);let h=!1,c=!1;function p(){return Hn(l).some(b=>a[b]&&u1e(a[b],l[b]))}const m=b=>{QK(a,b),p()&&w()},w=()=>{if(h||o)return;a={};const b={},T=function(_){s&&cv();const A=()=>Cc(e,{subscr:_,trans:null}),x=Bt.trans?fv(Bt.transless,A):A();return s&&x.then(uu,uu),x}(b);c||(Nc(Oy,m),c=!0),h=!0,Promise.resolve(T).then(_=>{t=!0,r=_,h=!1,o||(p()?w():(a={},l=b,i.next&&i.next(_)))},_=>{h=!1,t=!1,i.error&&i.error(_),u.unsubscribe()})};return w(),u});return n.hasValue=()=>t,n.getValue=()=>r,n}let EI;try{EI={indexedDB:en.indexedDB||en.mozIndexedDB||en.webkitIndexedDB||en.msIndexedDB,IDBKeyRange:en.IDBKeyRange||en.webkitIDBKeyRange}}catch{EI={indexedDB:null,IDBKeyRange:null}}const xf=Xl;function U1(e){let r=Vl;try{Vl=!0,Nc.storagemutated.fire(e)}finally{Vl=r}}Mp(xf,{...M1,delete:e=>new xf(e,{addons:[]}).delete(),exists:e=>new xf(e,{addons:[]}).open().then(r=>(r.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:r,IDBKeyRange:t}){return _P(r)?Promise.resolve(r.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==T_)):$P(r,t).toCollection().primaryKeys()}(xf.dependencies).then(e)}catch{return ri(new Wt.MissingAPI)}},defineClass:()=>function(e){ls(this,e)},ignoreTransaction:e=>Bt.trans?fv(Bt.transless,e):e(),vip:$I,async:function(e){return function(){try{var r=_I(e.apply(this,arguments));return r&&typeof r.then=="function"?r:Et.resolve(r)}catch(t){return ri(t)}}},spawn:function(e,r,t){try{var n=_I(e.apply(t,r||[]));return n&&typeof n.then=="function"?n:Et.resolve(n)}catch(i){return ri(i)}},currentTransaction:{get:()=>Bt.trans||null},waitFor:function(e,r){const t=Et.resolve(typeof e=="function"?xf.ignoreTransaction(e):e).timeout(r||6e4);return Bt.trans?Bt.trans.waitFor(t):t},Promise:Et,debug:{get:()=>vl,set:e=>{OK(e,e==="dexie"?()=>!0:WK)}},derive:dp,extend:ls,props:Mp,override:EK,Events:Jg,on:Nc,liveQuery:d1e,extendObservabilitySet:QK,getByKeyPath:Zl,setByKeyPath:ba,delByKeyPath:function(e,r){typeof r=="string"?ba(e,r,void 0):"length"in r&&[].map.call(r,function(t){ba(e,t,void 0)})},shallowClone:TK,deepClone:gm,getObjectDiff:xP,cmp:os,asap:SK,minKey:dI,addons:[],connections:Xg,errnames:gP,dependencies:EI,semVer:zB,version:zB.split(".").map(e=>parseInt(e)).reduce((e,r,t)=>e+r/Math.pow(10,2*t))}),xf.maxKey=Cy(xf.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nc(Oy,e=>{if(!Vl){let r;k_?(r=document.createEvent("CustomEvent"),r.initCustomEvent(hc,!0,!0,e)):r=new CustomEvent(hc,{detail:e}),Vl=!0,dispatchEvent(r),Vl=!1}}),addEventListener(hc,({detail:e})=>{Vl||U1(e)}));let Vl=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(hc);typeof e.unref=="function"&&e.unref(),Nc(Oy,r=>{Vl||e.postMessage(r)}),e.onmessage=r=>{r.data&&U1(r.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Nc(Oy,r=>{try{Vl||(typeof localStorage<"u"&&localStorage.setItem(hc,JSON.stringify({trig:Math.random(),changedParts:r})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:hc,changedParts:r})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",r=>{if(r.key===hc){const t=JSON.parse(r.newValue);t&&U1(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:r}){r&&r.type===hc&&U1(r.changedParts)})}Et.rejectionMapper=function(e,r){if(!e||e instanceof pp||e instanceof TypeError||e instanceof SyntaxError||!e.name||!LB[e.name])return e;var t=new LB[e.name](r||e.message,e);return"stack"in e&&Yl(t,"stack",{get:function(){return this.inner.stack}}),t},OK(vl,WK);class p1e extends Xl{constructor(){super("iris");le(this,"events");this.version(2).stores({events:"id, pubkey, kind, created_at"})}}const ia=new p1e,rl={db:ia,subscribedEventIds:new Set,subscribedAuthors:new Set,seenFilters:new Set,saveQueue:[],clear(){return ia.delete()},save:On.throttle(e=>{const r=e.saveQueue;e.saveQueue=[],ia.events.bulkAdd(r).catch(()=>{})},500),saveEvent(e){this.saveQueue.push(e),this.save(this)},init(){const e=me.getPubKey();ia.events.where({pubkey:e}).each(r=>{Fe.handle(r,!1,!1)}).then(()=>ia.events.where({kind:3}).each(r=>{Fe.handle(r,!1,!1)})).then(()=>ia.events.where({kind:0}).each(r=>{Fe.handle(r,!1,!1)})).then(()=>ia.events.where({kind:4}).each(r=>{Fe.handle(r,!1,!1)})).then(()=>ia.events.orderBy("created_at").reverse().filter(r=>r.kind===1).limit(5e3).each(r=>{Fe.handle(r,!1,!1)}))},subscribeToAuthors:On.throttle(e=>{const r=Array.from(rl.subscribedAuthors.values());rl.subscribedAuthors.clear(),ia.events.where("pubkey").anyOf(r).limit(e||1e3).each(t=>{Fe.handle(t,!1,!1)})},1e3),subscribeToEventIds:On.throttle(()=>{const e=Array.from(rl.subscribedEventIds.values());rl.subscribedEventIds.clear(),ia.events.where("id").anyOf(e).each(r=>{Fe.handle(r,!1,!1)})},1e3),subscribe(e){var t,n;if(!e||e["#e"]||e["#p"])return;let r=ia.events;if((t=e.ids)!=null&&t.length){e.ids.forEach(i=>{this.subscribedEventIds.add(i)}),this.subscribeToEventIds();return}else if((n=e.authors)!=null&&n.length){e.authors.forEach(i=>{this.subscribedAuthors.add(i)}),this.subscribeToAuthors();return}else{const i=JSON.stringify(e);if(this.seenFilters.has(i))return;this.seenFilters.add(i),e.kinds&&(r=r.where?r.where("kind").anyOf(e.kinds):r.and(s=>{var o;return(o=e.kinds)==null?void 0:o.includes(s.kind)})),e.limit&&(r=r.limit(e.limit))}r.each(i=>{Fe.handle(i,!1,!1)})}};let Sg={};const AE=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi","wss://soloco.nl"],ZB=["wss://relay.nostr.band"],sn={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:AE,init(){this.relays=new Map(AE.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(ZB.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(r=>r.enabled).map(r=>r.url)},getSubscriptionIdForName(e){return xr.arrayToHex(g_(e)).slice(0,8)},getUrlsFromFollowEvent(e){const r=new Map;if(e.content)try{const t=JSON.parse(e.content);for(const n in t)try{const i=new URL(n).toString().replace(/\/$/,"");r.set(i,t[n])}catch{console.log("invalid relay url",n,e)}}catch{console.log("failed to parse relay urls",e)}return r},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return Fe.db.find({kind:3}).forEach(t=>{if(t.content)try{const n=JSON.parse(t.content);for(const i in n)try{const s=new URL(i).toString().replace(/\/$/,""),o=e.get(s)||0;e.set(s,o+1)}catch{console.log("invalid relay url",i,t)}}catch{console.log("failed to parse relay urls",t)}}),Array.from(e.entries()).filter(([t])=>!this.relays.has(t)).sort((t,n)=>n[1]-t[1]).map(t=>({url:t[0],users:t[1]}))},getConnectedRelayCount:function(){var r;let e=0;for(const t of this.relays.keys())((r=Ut.relayPool.relayByUrl.get(t))==null?void 0:r.status)===1&&e++;return e},getUserRelays(e){let r=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const t=Fe.db.findOne({kind:3,pubkey:e});return t&&(r=this.getUrlsFromFollowEvent(t)),Array.from(r.entries())},manage:function(){Re.get("relays").put({}),Re.get("relays").on(e=>{if(e){Sg=e;for(const r of this.relays.keys())if(Sg[r]===null)this.remove(r);else if(Sg[r]&&Sg[r].enabled===!1){const t=this.relays.get(r);t&&(t.enabled=!1,this.relays.set(r,t),Ut.relayPool.removeRelay(r))}for(const[r,t]of Object.entries(Sg))if(t)this.relays.has(r)||(this.relays.set(r,{url:r,enabled:!!t.enabled}),t.enabled&&Ut.relayPool.addOrGetRelay(r));else{this.relays.has(r)&&this.remove(r);continue}}})},add(e){if(this.relays.has(e))return;const r={enabled:!0,url:e};this.relays.set(e,r),Ut.relayPool.addOrGetRelay(e)},remove(e){try{Ut.relayPool.removeRelay(e)}catch(r){console.log("error closing relay",r)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),Ut.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),Ut.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const r of AE)this.add(r);this.saveToContacts();for(const r of ZB)this.relays.has(r)||this.add(r);const e={};for(const[r,t]of this.relays.entries())e[r]={enabled:t.enabled,url:r};Re.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const r=Fe.db.findOne({kind:3,pubkey:me.getPubKey()}),n={kind:3,content:JSON.stringify(e),tags:(r==null?void 0:r.tags)||[]};Fe.publish(n)},updateLastSeen:On.throttle(e=>{const r=Math.floor(Date.now()/1e3);Re.get("relays").get(e).get("lastSeen").put(r)},5*1e3,{leading:!0}),groupFilter(e){var r;return e.authors&&((r=e.kinds)==null?void 0:r.length)===1&&e.kinds[0]===0?(e.authors.forEach(t=>{this.subscribedProfiles.add(t)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(Ut.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(t=>{this.subscribedEventTags.add(t)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&sn.init();const{authenticate:v1e}=MU;let XB=0,Kw={logSubscriptions:!1,indexed03:!0};const $c=new _be(sn.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>Fe.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0});$c.onnotice((e,r)=>{console.log("notice",r," from relay ",e)});const g1e=(e,r)=>new URL(e).host===new URL(r).host;$c.onauth(async(e,r)=>{if(sn.enabledRelays().some(t=>g1e(t,e.url)))try{await v1e({relay:e,challenge:r,sign:Fe.sign})}catch(t){console.log("error: authenticate to relay:",t),$c.removeRelay(e.url),sn.disable(e.url)}});Re.get("dev").on(e=>{Kw=e,$c.logSubscriptions=Kw.logSubscriptions});let eq=0;Re.get("lastOpened").once(e=>{eq=e,Re.get("lastOpened").put(Math.floor(Date.now()/1e3))});let JB=Date.now();const tq=()=>{Date.now()-JB>60*1e3*1&&(JB=Date.now(),$c.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&tq()});document.addEventListener("online",()=>{tq()});const y1e={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:$c,log:On.throttle((...e)=>{console.log(...e)},1e3),subscribe:function(e,r,t=!1,n=!0){let i;if(r&&(i=XB++,this.subscriptions.set(++XB,{filter:e,callback:r})),this.log("subscriptions",this.subscriptions.size,"subscribedEventIds",this.subscribedEventIds.size,"subscribedAuthors",this.subscribedAuthors.size),e.authors&&e.authors.forEach(o=>{this.subscribedAuthors.add(o)}),r&&Fe.find(e,r),e.ids){if(e.ids=e.ids.filter(o=>!Fe.seen.has(o)),!e.ids.length)return()=>{};e.ids.forEach(o=>{this.subscribedEventIds.add(o)})}Kw.indexedDbLoad!==!1&&rl.subscribe(e);const s=this.subscribeRelayPool(e,t,n);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){const r=Array.from(sn.enabledRelays());$c.publish(e,r)},handle(e){var r;for(const t of this.subscriptions.values())t.filter&&P3(t.filter,e)&&((r=t.callback)==null||r.call(t,e))},subscribeRelayPool(e,r,t){var s,o;let n;e.keywords?n=Array.from(sn.searchRelays.keys()):(t||((s=e.authors)==null?void 0:s.length)!==1)&&(n=sn.enabledRelays()),Kw.indexed03!==!1&&((o=e.kinds)!=null&&o.every(a=>a===0||a===3))&&(n=["wss://us.rbr.bio","wss://eu.rbr.bio"]),r&&(e.since=eq);const i=sn.enabledRelays();return $c.subscribe([e],n,(a,l,u)=>{setTimeout(()=>{Fe.handle(a),u&&Fe.handleEventMetadata({url:u,event:a})},0)},t?100:0,void 0,{defaultRelays:i})}},Ut=y1e,Ao=class Ao{static id(r){if((r.startsWith("npub")||r.startsWith("note"))&&(r=me.toNostrHexAddress(r)||"",!r))throw new Error("addFollower: invalid pubKey "+r);const t=Ao.pubKeyToUserId.get(r);if(t)return t;const n=Ao.currentUserId++;return Ao.pubKeyToUserId.set(r,n),Ao.UserIdToPubKey.set(n,r),n}static pub(r){const t=Ao.UserIdToPubKey.get(r);if(!t)throw new Error("pub: invalid id "+r);return t}static bech32(r){return me.toNostrBech32Address(Ao.pub(r),"npub")||""}static has(r){return Ao.pubKeyToUserId.has(r)}};le(Ao,"pubKeyToUserId",new Map),le(Ao,"UserIdToPubKey",new Map),le(Ao,"currentUserId",0);let Rc=Ao;const En=Rc.pub,SI=Rc.bech32,vt=Rc.id;function cu(e){return Array.isArray?Array.isArray(e):iq(e)==="[object Array]"}const m1e=1/0;function b1e(e){if(typeof e=="string")return e;let r=e+"";return r=="0"&&1/e==-m1e?"-0":r}function w1e(e){return e==null?"":b1e(e)}function nl(e){return typeof e=="string"}function rq(e){return typeof e=="number"}function $1e(e){return e===!0||e===!1||_1e(e)&&iq(e)=="[object Boolean]"}function nq(e){return typeof e=="object"}function _1e(e){return nq(e)&&e!==null}function Js(e){return e!=null}function OE(e){return!e.trim().length}function iq(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const x1e="Incorrect 'index' type",E1e=e=>`Invalid value for key ${e}`,S1e=e=>`Pattern length exceeds max of ${e}.`,k1e=e=>`Missing ${e} property in key`,T1e=e=>`Property 'weight' in key '${e}' must be a positive integer`,QB=Object.prototype.hasOwnProperty;class I1e{constructor(r){this._keys=[],this._keyMap={};let t=0;r.forEach(n=>{let i=sq(n);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(r){return this._keyMap[r]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function sq(e){let r=null,t=null,n=null,i=1,s=null;if(nl(e)||cu(e))n=e,r=e6(e),t=kI(e);else{if(!QB.call(e,"name"))throw new Error(k1e("name"));const o=e.name;if(n=o,QB.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(T1e(o));r=e6(o),t=kI(o),s=e.getFn}return{path:r,id:t,weight:i,src:n,getFn:s}}function e6(e){return cu(e)?e:e.split(".")}function kI(e){return cu(e)?e.join("."):e}function A1e(e,r){let t=[],n=!1;const i=(s,o,a)=>{if(Js(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Js(u))return;if(a===o.length-1&&(nl(u)||rq(u)||$1e(u)))t.push(w1e(u));else if(cu(u)){n=!0;for(let h=0,c=u.length;h<c;h+=1)i(u[h],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,nl(r)?r.split("."):r,0),n?t:t[0]}const O1e={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},C1e={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,r)=>e.score===r.score?e.idx<r.idx?-1:1:e.score<r.score?-1:1},P1e={location:0,threshold:.6,distance:100},N1e={useExtendedSearch:!1,getFn:A1e,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Vt={...C1e,...O1e,...P1e,...N1e};const R1e=/[^ ]+/g;function D1e(e=1,r=3){const t=new Map,n=Math.pow(10,r);return{get(i){const s=i.match(R1e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class SP{constructor({getFn:r=Vt.getFn,fieldNormWeight:t=Vt.fieldNormWeight}={}){this.norm=D1e(t,3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}setSources(r=[]){this.docs=r}setIndexRecords(r=[]){this.records=r}setKeys(r=[]){this.keys=r,this._keysMap={},r.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,nl(this.docs[0])?this.docs.forEach((r,t)=>{this._addString(r,t)}):this.docs.forEach((r,t)=>{this._addObject(r,t)}),this.norm.clear())}add(r){const t=this.size();nl(r)?this._addString(r,t):this._addObject(r,t)}removeAt(r){this.records.splice(r,1);for(let t=r,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(r,t){return r[this._keysMap[t]]}size(){return this.records.length}_addString(r,t){if(!Js(r)||OE(r))return;let n={v:r,i:t,n:this.norm.get(r)};this.records.push(n)}_addObject(r,t){let n={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(r):this.getFn(r,i.path);if(Js(o)){if(cu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(Js(h))if(nl(h)&&!OE(h)){let c={v:h,i:u,n:this.norm.get(h)};a.push(c)}else cu(h)&&h.forEach((c,p)=>{l.push({nestedArrIndex:p,value:c})})}n.$[s]=a}else if(nl(o)&&!OE(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function oq(e,r,{getFn:t=Vt.getFn,fieldNormWeight:n=Vt.fieldNormWeight}={}){const i=new SP({getFn:t,fieldNormWeight:n});return i.setKeys(e.map(sq)),i.setSources(r),i.create(),i}function B1e(e,{getFn:r=Vt.getFn,fieldNormWeight:t=Vt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new SP({getFn:r,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(i),s}function Rb(e,{errors:r=0,currentLocation:t=0,expectedLocation:n=0,distance:i=Vt.distance,ignoreLocation:s=Vt.ignoreLocation}={}){const o=r/e.length;if(s)return o;const a=Math.abs(n-t);return i?o+a/i:a?1:o}function M1e(e=[],r=Vt.minMatchCharLength){let t=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=r&&t.push([n,i]),n=-1)}return e[s-1]&&s-n>=r&&t.push([n,s-1]),t}const Df=32;function L1e(e,r,t,{location:n=Vt.location,distance:i=Vt.distance,threshold:s=Vt.threshold,findAllMatches:o=Vt.findAllMatches,minMatchCharLength:a=Vt.minMatchCharLength,includeMatches:l=Vt.includeMatches,ignoreLocation:u=Vt.ignoreLocation}={}){if(r.length>Df)throw new Error(S1e(Df));const h=r.length,c=e.length,p=Math.max(0,Math.min(n,c));let m=s,w=p;const b=a>1||l,T=b?Array(c):[];let _;for(;(_=e.indexOf(r,w))>-1;){let g=Rb(r,{currentLocation:_,expectedLocation:p,distance:i,ignoreLocation:u});if(m=Math.min(g,m),w=_+h,b){let R=0;for(;R<h;)T[_+R]=1,R+=1}}w=-1;let A=[],x=1,I=h+c;const O=1<<h-1;for(let g=0;g<h;g+=1){let R=0,M=I;for(;R<M;)Rb(r,{errors:g,currentLocation:p+M,expectedLocation:p,distance:i,ignoreLocation:u})<=m?R=M:I=M,M=Math.floor((I-R)/2+R);I=M;let U=Math.max(1,p-M+1),V=o?c:Math.min(p+M,c)+h,ne=Array(V+2);ne[V+1]=(1<<g)-1;for(let Q=V;Q>=U;Q-=1){let F=Q-1,Z=t[e.charAt(F)];if(b&&(T[F]=+!!Z),ne[Q]=(ne[Q+1]<<1|1)&Z,g&&(ne[Q]|=(A[Q+1]|A[Q])<<1|1|A[Q+1]),ne[Q]&O&&(x=Rb(r,{errors:g,currentLocation:F,expectedLocation:p,distance:i,ignoreLocation:u}),x<=m)){if(m=x,w=F,w<=p)break;U=Math.max(1,2*p-w)}}if(Rb(r,{errors:g+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:u})>m)break;A=ne}const C={isMatch:w>=0,score:Math.max(.001,x)};if(b){const g=M1e(T,a);g.length?l&&(C.indices=g):C.isMatch=!1}return C}function F1e(e){let r={};for(let t=0,n=e.length;t<n;t+=1){const i=e.charAt(t);r[i]=(r[i]||0)|1<<n-t-1}return r}class aq{constructor(r,{location:t=Vt.location,threshold:n=Vt.threshold,distance:i=Vt.distance,includeMatches:s=Vt.includeMatches,findAllMatches:o=Vt.findAllMatches,minMatchCharLength:a=Vt.minMatchCharLength,isCaseSensitive:l=Vt.isCaseSensitive,ignoreLocation:u=Vt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?r:r.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(p,m)=>{this.chunks.push({pattern:p,alphabet:F1e(p),startIndex:m})},c=this.pattern.length;if(c>Df){let p=0;const m=c%Df,w=c-m;for(;p<w;)h(this.pattern.substr(p,Df),p),p+=Df;if(m){const b=c-Df;h(this.pattern.substr(b),b)}}else h(this.pattern,0)}searchIn(r){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(r=r.toLowerCase()),this.pattern===r){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,r.length-1]]),w}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],c=0,p=!1;this.chunks.forEach(({pattern:w,alphabet:b,startIndex:T})=>{const{isMatch:_,score:A,indices:x}=L1e(r,w,b,{location:i+T,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});_&&(p=!0),c+=A,_&&x&&(h=[...h,...x])});let m={isMatch:p,score:p?c/this.chunks.length:1};return p&&n&&(m.indices=h),m}}class Kc{constructor(r){this.pattern=r}static isMultiMatch(r){return t6(r,this.multiRegex)}static isSingleMatch(r){return t6(r,this.singleRegex)}search(){}}function t6(e,r){const t=e.match(r);return t?t[1]:null}class j1e extends Kc{constructor(r){super(r)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(r){const t=r===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class H1e extends Kc{constructor(r){super(r)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(r){const n=r.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,r.length-1]}}}class z1e extends Kc{constructor(r){super(r)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(r){const t=r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class U1e extends Kc{constructor(r){super(r)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(r){const t=!r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class W1e extends Kc{constructor(r){super(r)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(r){const t=r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[r.length-this.pattern.length,r.length-1]}}}class K1e extends Kc{constructor(r){super(r)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(r){const t=!r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class lq extends Kc{constructor(r,{location:t=Vt.location,threshold:n=Vt.threshold,distance:i=Vt.distance,includeMatches:s=Vt.includeMatches,findAllMatches:o=Vt.findAllMatches,minMatchCharLength:a=Vt.minMatchCharLength,isCaseSensitive:l=Vt.isCaseSensitive,ignoreLocation:u=Vt.ignoreLocation}={}){super(r),this._bitapSearch=new aq(r,{location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(r){return this._bitapSearch.searchIn(r)}}class uq extends Kc{constructor(r){super(r)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(r){let t=0,n;const i=[],s=this.pattern.length;for(;(n=r.indexOf(this.pattern,t))>-1;)t=n+s,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const TI=[j1e,uq,z1e,U1e,K1e,W1e,H1e,lq],r6=TI.length,q1e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,V1e="|";function G1e(e,r={}){return e.split(V1e).map(t=>{let n=t.trim().split(q1e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<r6;){const h=TI[u];let c=h.isMultiMatch(a);c&&(i.push(new h(c,r)),l=!0)}if(!l)for(u=-1;++u<r6;){const h=TI[u];let c=h.isSingleMatch(a);if(c){i.push(new h(c,r));break}}}return i})}const Y1e=new Set([lq.type,uq.type]);class Z1e{constructor(r,{isCaseSensitive:t=Vt.isCaseSensitive,includeMatches:n=Vt.includeMatches,minMatchCharLength:i=Vt.minMatchCharLength,ignoreLocation:s=Vt.ignoreLocation,findAllMatches:o=Vt.findAllMatches,location:a=Vt.location,threshold:l=Vt.threshold,distance:u=Vt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?r:r.toLowerCase(),this.query=G1e(this.pattern,this.options)}static condition(r,t){return t.useExtendedSearch}searchIn(r){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;r=i?r:r.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const h=t[l];o.length=0,s=0;for(let c=0,p=h.length;c<p;c+=1){const m=h[c],{isMatch:w,indices:b,score:T}=m.search(r);if(w){if(s+=1,a+=T,n){const _=m.constructor.type;Y1e.has(_)?o=[...o,...b]:o.push(b)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return n&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const II=[];function X1e(...e){II.push(...e)}function AI(e,r){for(let t=0,n=II.length;t<n;t+=1){let i=II[t];if(i.condition(e,r))return new i(e,r)}return new aq(e,r)}const qw={AND:"$and",OR:"$or"},OI={PATH:"$path",PATTERN:"$val"},CI=e=>!!(e[qw.AND]||e[qw.OR]),J1e=e=>!!e[OI.PATH],Q1e=e=>!cu(e)&&nq(e)&&!CI(e),n6=e=>({[qw.AND]:Object.keys(e).map(r=>({[r]:e[r]}))});function cq(e,r,{auto:t=!0}={}){const n=i=>{let s=Object.keys(i);const o=J1e(i);if(!o&&s.length>1&&!CI(i))return n(n6(i));if(Q1e(i)){const l=o?i[OI.PATH]:s[0],u=o?i[OI.PATTERN]:i[l];if(!nl(u))throw new Error(E1e(l));const h={keyId:kI(l),pattern:u};return t&&(h.searcher=AI(u,r)),h}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];cu(u)&&u.forEach(h=>{a.children.push(n(h))})}),a};return CI(e)||(e=n6(e)),n(e)}function ewe(e,{ignoreFieldNorm:r=Vt.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(r?1:s))}),t.score=n})}function twe(e,r){const t=e.matches;r.matches=[],Js(t)&&t.forEach(n=>{if(!Js(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),r.matches.push(o)})}function rwe(e,r){r.score=e.score}function nwe(e,r,{includeMatches:t=Vt.includeMatches,includeScore:n=Vt.includeScore}={}){const i=[];return t&&i.push(twe),n&&i.push(rwe),e.map(s=>{const{idx:o}=s,a={item:r[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class hv{constructor(r,t={},n){this.options={...Vt,...t},this.options.useExtendedSearch,this._keyStore=new I1e(this.options.keys),this.setCollection(r,n)}setCollection(r,t){if(this._docs=r,t&&!(t instanceof SP))throw new Error(x1e);this._myIndex=t||oq(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(r){Js(r)&&(this._docs.push(r),this._myIndex.add(r))}remove(r=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];r(s,n)&&(this.removeAt(n),n-=1,i-=1,t.push(s))}return t}removeAt(r){this._docs.splice(r,1),this._myIndex.removeAt(r)}getIndex(){return this._myIndex}search(r,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=nl(r)?nl(this._docs[0])?this._searchStringList(r):this._searchObjectList(r):this._searchLogical(r);return ewe(l,{ignoreFieldNorm:a}),s&&l.sort(o),rq(t)&&t>-1&&(l=l.slice(0,t)),nwe(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(r){const t=AI(r,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Js(s))return;const{isMatch:l,score:u,indices:h}=t.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:h}]})}),i}_searchLogical(r){const t=cq(r,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:p}=a,m=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:p});return m&&m.length?[{idx:u,item:l,matches:m}]:[]}const h=[];for(let c=0,p=a.children.length;c<p;c+=1){const m=a.children[c],w=n(m,l,u);if(w.length)h.push(...w);else if(a.operator===qw.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Js(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:h})=>{s[l].matches.push(...h)}))}}),o}_searchObjectList(r){const t=AI(r,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Js(o))return;let l=[];n.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:o[h],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:r,value:t,searcher:n}){if(!Js(t))return[];let i=[];if(cu(t))t.forEach(({v:s,i:o,n:a})=>{if(!Js(s))return;const{isMatch:l,score:u,indices:h}=n.searchIn(s);l&&i.push({score:u,key:r,value:s,idx:o,norm:a,indices:h})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&i.push({score:l,key:r,value:s,norm:o,indices:u})}return i}}hv.version="6.6.2";hv.createIndex=oq;hv.parseIndex=B1e;hv.config=Vt;hv.parseQuery=cq;X1e(Z1e);const iwe={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},i6=Kd.throttle(()=>{Re.get("searchIndexUpdated").put(!0)},2e3),fq={index:new hv([],iwe),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),i6())},remove(e){this.keys.delete(e),this.index.remove(r=>r.key===e),i6()},search(e){return this.index.search(e)}};class swe{constructor(){le(this,"key","");le(this,"name","");le(this,"username","");le(this,"displayName");le(this,"display_name");le(this,"description");le(this,"avatar");le(this,"picture");le(this,"cover");le(this,"location");le(this,"website");le(this,"email");le(this,"nip05");le(this,"lud16");le(this,"lud06");le(this,"about");le(this,"created_at",0);le(this,"isDefault",!1)}}var hq={exports:{}},CE={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var s6;function owe(){return s6||(s6=1,function(e){(function(){function r(o,a){for(var l=2;l<arguments.length;l++)for(var u=0;u<arguments[l].length;u++)o[a++]=arguments[l].charAt(u)}function t(o){return String.fromCharCode(o>>8&255,o&255)}function n(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function i(o){return String.fromCharCode(o&255,o>>8&255)}var s=function(o,a,l){this.width=o,this.height=a,this.depth=l,this.pix_size=a*(o+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*l+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+l+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var u=new Array,h=0;h<this.buffer_size;h++)this.buffer[h]="\0";r(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(o),n(a),"\b"),r(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var c=8+112<<8|192;c+=31-c%31,r(this.buffer,this.idat_offs+8,t(c));for(var h=0;(h<<16)-1<this.pix_size;h++){var p,m;h+65535<this.pix_size?(p=65535,m="\0"):(p=this.pix_size-(h<<16)-h,m=""),r(this.buffer,this.idat_offs+8+2+(h<<16)+(h<<2),m,i(p),i(~p))}for(var h=0;h<256;h++){for(var w=h,b=0;b<8;b++)w&1?w=-306674912^w>>1&2147483647:w=w>>1&2147483647;u[h]=w}this.index=function(T,_){var A=_*(this.width+1)+T+1,x=this.idat_offs+8+2+5*Math.floor(A/65535+1)+A;return x},this.color=function(T,_,A,x){x=x>=0?x:255;var I=((x<<8|T)<<8|_)<<8|A;if(typeof this.palette[I]>"u"){if(this.pindex==this.depth)return"\0";var O=this.plte_offs+8+3*this.pindex;this.buffer[O+0]=String.fromCharCode(T),this.buffer[O+1]=String.fromCharCode(_),this.buffer[O+2]=String.fromCharCode(A),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(x),this.palette[I]=String.fromCharCode(this.pindex++)}return this.palette[I]},this.getBase64=function(){var T=this.getDump(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A,x,I,O,C,g,R,M=T.length,U=0,V="";do A=T.charCodeAt(U),O=A>>2,x=T.charCodeAt(U+1),C=(A&3)<<4|x>>4,I=T.charCodeAt(U+2),M<U+2?g=64:g=(x&15)<<2|I>>6,M<U+3?R=64:R=I&63,V+=_.charAt(O)+_.charAt(C)+_.charAt(g)+_.charAt(R);while((U+=3)<M);return V},this.getDump=function(){for(var T=65521,_=5552,A=1,x=0,I=_,O=0;O<this.height;O++)for(var C=-1;C<this.width;C++)A+=this.buffer[this.index(C,O)].charCodeAt(0),x+=A,(I-=1)==0&&(A%=T,x%=T,I=_);A%=T,x%=T,r(this.buffer,this.idat_offs+this.idat_size-8,n(x<<16|A));function g(R,M,U){for(var V=-1,ne=4;ne<U-4;ne+=1)V=u[(V^R[M+ne].charCodeAt(0))&255]^V>>8&16777215;r(R,M+U-4,n(V^-1))}return g(this.buffer,this.ihdr_offs,this.ihdr_size),g(this.buffer,this.plte_offs,this.plte_size),g(this.buffer,this.trns_offs,this.trns_size),g(this.buffer,this.idat_offs,this.idat_size),g(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(CE)),CE.exports}(function(e){(function(){var r;r=owe();var t=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var o=parseInt(this.hash.substr(-7),16)/268435455,a=this.options.saturation||this.defaults.saturation,l=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(o,a,l)};t.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new n(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,o=Math.floor(s*this.margin),a=Math.floor((s-o*2)/5),l=Math.floor((s-a*5)/2),u=i.color.apply(i,this.background),h=i.color.apply(i,this.foreground),c,p;for(c=0;c<15;c++)p=parseInt(this.hash.charAt(c),16)%2?u:h,c<5?this.rectangle(2*a+l,c*a+l,a,a,p,i):c<10?(this.rectangle(1*a+l,(c-5)*a+l,a,a,p,i),this.rectangle(3*a+l,(c-5)*a+l,a,a,p,i)):c<15&&(this.rectangle(0*a+l,(c-10)*a+l,a,a,p,i),this.rectangle(4*a+l,(c-10)*a+l,a,a,p,i));return i},rectangle:function(i,s,o,a,l,u){if(this.isSvg())u.rectangles.push({x:i,y:s,w:o,h:a,color:l});else{var h,c;for(h=i;h<i+o;h++)for(c=s;c<s+a;c++)u.buffer[u.index(h,c)]=l}},hsl2rgb:function(i,s,o){return i*=6,s=[o+=s*=o<.5?o:1-o,o-i%1*s*2,o-=s*=2,o,o+i%1*s,o+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var n=function(i,s,o){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,o),this.rectangles=[]};n.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,o,a){var l=[i,s,o].map(Math.round);return l.push(a>=0&&a<=255?a/255:1),"rgba("+l.join(",")+")"},getDump:function(){var i,s,o,a=this.foreground,l=this.background,u=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+l+";'><g style='fill:"+a+"; stroke:"+a+"; stroke-width:"+u+";'>",i=0;i<this.rectangles.length;i++)o=this.rectangles[i],o.color!=l&&(s+="<rect  x='"+o.x+"' y='"+o.y+"' width='"+o.w+"' height='"+o.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=t})()})(hq);var awe=hq.exports;const lwe=ro(awe);let Db={};async function o6(e,r){return Db[e]||(Db[e]=r().finally(()=>{delete Db[e]})),Db[e]}const dq="DWoTR";class PI extends Xl{constructor(){super(dq);le(this,"edges");le(this,"profiles");this.version(2).stores({edges:"key, outKey, inKey",profiles:"key"})}}let uwe=new PI;var Hl,nm;class cwe{constructor(){Gr(this,Hl,null);Gr(this,nm,!1)}get profiles(){return this.db.profiles}get edges(){return this.db.edges}get db(){if(!Bn(this,Hl))try{Eo(this,Hl,new PI),Bn(this,Hl).open().catch(r=>{console.log("Error opening database",r),this.recreateDB()})}catch(r){console.log("Error opening database",r),this.recreateDB()}return Bn(this,Hl)}recreateDB(){if(Bn(this,nm))return;Eo(this,nm,!0),this.deleteDB().then(()=>{Eo(this,Hl,new PI)}),(t=>{const n=Date.now();let i;do i=Date.now();while(i-n<t||!Bn(this,Hl))})(5e3)}async deleteDB(){await Xl.delete(dq),console.log("Database deleted")}}Hl=new WeakMap,nm=new WeakMap;const Bb=new cwe;new TextDecoder("utf-8");const fwe=new TextEncoder;function hwe(e){let r=g_(fwe.encode(e));return UT(r)}function dwe(e){return e.slice(0,4)+"..."+e.slice(-4)}const PE="profileEvent";class $h extends CustomEvent{constructor(r){super(PE,{detail:r})}static dispatch(r,t){(!(t!=null&&t.id)||t.id==0)&&(t.id=r),document.dispatchEvent(new $h(t))}static add(r){document.addEventListener(PE,r)}static remove(r){document.removeEventListener(PE,r)}}var xp,Ep;class pwe{constructor(){le(this,"loaded",!1);Gr(this,xp,[]);Gr(this,Ep,!1);le(this,"history",{});le(this,"saveBulk",On.throttle(()=>{if(Bn(this,Ep)){this.saveBulk();return}Eo(this,Ep,!0);const r=Bn(this,xp);Eo(this,xp,[]),Bb.profiles.bulkPut(r).finally(()=>{Eo(this,Ep,!1)})},500));le(this,"subscriptions",new Map)}async init(){this.loaded=!0}async fetchProfile(r){try{let t=`https://api.iris.to/profile/${r}`,{data:n}=await o6(t,async()=>{let i=await fetch(t);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);if(i&&i.status===200){let s=await i.json();return{res:i,data:s}}return{res:i,data:void 0}});return n}catch(t){console.log("There was a problem with the fetch operation: "+t.message)}}async loadProfiles(r){return await Bb.profiles.where("key").anyOf(Array.from(r)).toArray()}async loadProfile(r){let t=await o6(`loadProfile${r}`,async()=>Bb.profiles.get({key:r}));if(!(t!=null&&t.isDefault))return t}async getProfile(r){let t=await this.getProfiles([r]);return t==null?void 0:t[0]}async getProfiles(r){if(!r||r.length===0)return[];let t=[],n=[];for(const i of r){if(!i)continue;const s=me.toNostrHexAddress(i),o=ct.profiles.get(vt(s));o?t.push(o):n.push(s)}if(n.length>0){let i=new Set(n);const s=await this.loadProfiles(i);if(s&&s.length>0){t=t.concat(s);for(const o of s)o&&i.delete(o.key)}if(i.size>0&&i.size<=100){const o=await Promise.all(Array.from(i).map(a=>this.fetchProfile(me.toNostrHexAddress(a))));if(o&&o.length>0)for(const a of o)a&&(Fe.handle(a),t.push(a),i.delete(a.key))}for(const o of i){let a=this.createDefaultProfile(o);ct.profiles.set(vt(a.key),a),t.push(a)}for(const o of t)!o||!this.isProfileNewer(o)||this.addProfileToMemory(o)}return t}saveProfile(r){r!=null&&r.isDefault||(r==null?void 0:r.isDefault)==null||(Bn(this,xp).push(r),this.saveBulk())}async loadAllProfiles(){console.time("Loading profiles from DWoTRDB");const r=await Bb.profiles.toArray();if(r){for(const t of r)this.addProfileToMemory(t);console.timeEnd("Loading profiles from DWoTRDB"),console.log("Loaded profiles from DWoTRDB - "+r.length+" profiles")}}sanitizeProfile(r,t){var m,w,b,T,_,A,x,I,O,C;if(!r)return this.createDefaultProfile(t);let n=r.name||r.username||r.display_name||r.displayName||r.nip05||r.lud16||r.lud06;n=((m=r.name)==null?void 0:m.trim().slice(0,100))||"";let i=(w=r.display_name||r.displayName)==null?void 0:w.trim().slice(0,200);i=(b=r.display_name)==null?void 0:b.trim().slice(0,200);let s=(T=r.about)==null?void 0:T.trim().slice(0,1e4),o=(_=r.picture)==null?void 0:_.trim().slice(0,4096),a=(A=r.banner)==null?void 0:A.trim().slice(0,4096),l=(x=r.website)==null?void 0:x.trim().slice(0,4096),u=(I=r.nip05)==null?void 0:I.trim().slice(0,4096),h=(O=r.lud06)==null?void 0:O.trim().slice(0,4096),c=(C=r.lud16)==null?void 0:C.trim().slice(0,4096);return{...r,key:t,name:n,display_name:i,about:s,picture:o,banner:a,website:l,nip05:u,lud06:h,lud16:c,isDefault:!1}}createDefaultProfile(r){let t=new swe;return t.key=r,t.name=dwe(r),t.isDefault=!0,t}getDefaultProfile(r){if(!r)return;const t=ct.profiles.get(r);return t||this.createDefaultProfile(En(r))}quickProfile(r){const t=vt(r),n=ct.profiles.get(t);return n||this.createDefaultProfile(En(t))}isProfileNewer(r){if(!(r!=null&&r.key))return!1;const t=ct.profiles.get(vt(r.key));return!t||r.isDefault===!1&&r.created_at>t.created_at}addProfileToMemory(r){if(r)return ct.profiles.set(vt(r.key),r),fq.add({key:r.key,name:r.name,display_name:r.display_name,followers:ct.followersByUser.get(vt(r.key))??new Set}),r}addProfileEvent(r){if(!(!r||!r.pubkey||!r.content))try{const t=JSON.parse(r.content);if(!t)return;t.created_at=r.created_at;let n=this.sanitizeProfile(t,r.pubkey);return this.saveProfile(n),this.addProfileToMemory(n)}catch(t){r.id&&rl.db.events.delete(r.id),console.error(t);return}}createImageUrl(r,t=30,n=30){return`data:image/svg+xml;base64,${new lwe(r,{width:t,height:n,format:"svg"}).toString()}`}ensurePicture(r){return r.picture||(r.picture=this.createImageUrl(r.key)),r.picture}subscriptionCallback(r){let t=ct.profiles.get(vt(r.pubkey));Vw.dispatchProfile(t)}subscribe(r){const t=me.toNostrHexAddress(r),n=vt(t);let i=ct.profiles.get(n);return(!i||i.isDefault)&&this.loadProfile(t).then(o=>{o?this.dispatchProfile(o):Vw.fetchProfile(t).then(a=>{if(!a)return;let l=this.addProfileEvent(a);l&&this.dispatchProfile(l)})}),Ut.subscribe({kinds:[0],authors:[t]},this.subscriptionCallback,!1)}dispatchProfile(r){r&&(this.isProfileNewer(r)&&this.addProfileToMemory(r),$h.dispatch(vt(r.key),r))}getMemoryProfile(r){const t=ct.profiles.get(r);return t||this.createDefaultProfile(En(r))}}xp=new WeakMap,Ep=new WeakMap;const Vw=new pwe;Vw.init();const Fn=Vw,ct={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,isFollowing:function(e,r){var i;const t=vt(r),n=vt(e);return!!((i=this.followedByUser.get(n))!=null&&i.has(t))},isBlocked:function(e){const r=vt(e);return this.blockedUsers.has(r)},getFollowDistance:function(e){const r=vt(e),t=this.followDistanceByUser.get(r);return t===void 0?1e3:t},setFollowed:function(e,r=!0){const t=me.getPubKey(),n=vt(t);typeof e=="string"&&(e=[e]),e.forEach(o=>{o=me.toNostrHexAddress(o)||"";const a=vt(o);r&&o&&o!==t?this.addFollower(a,n):this.removeFollower(a,n)});const i=Fe.db.findOne({kind:3,pubkey:t}),s={kind:3,content:(i==null?void 0:i.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(o=>["p",En(o)])};Fe.publish(s)},setBlocked:function(e,r=!0){const t=vt(e),n=vt(me.getPubKey());r?(this.blockedUsers.add(t),this.removeFollower(t,n),Fe.directMessagesByUser.delete(e)):this.blockedUsers.delete(t)},addUserByFollowDistance(e,r){var t,n;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=Ut.subscribe({authors:[En(r)],kinds:[0]},()=>i==null?void 0:i(),!0)}(t=this.usersByFollowDistance.get(e))==null||t.add(r);for(const i of this.usersByFollowDistance.keys())i>e&&((n=this.usersByFollowDistance.get(i))==null||n.delete(r))},addFollower:function(e,r){var n,i,s,o;if(typeof e!="number"||typeof r!="number")throw new Error("Invalid user id");this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(n=this.followersByUser.get(e))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set);const t=vt(me.getPubKey());if(e!==t){let a;if(r===t)a=1,this.addUserByFollowDistance(a,e),this.followDistanceByUser.set(e,a);else{const l=this.followDistanceByUser.get(e),u=this.followDistanceByUser.get(r);a=u&&u+1,(l===void 0||a<l)&&(this.followDistanceByUser.set(e,a),this.addUserByFollowDistance(a,e))}}(i=this.followedByUser.get(r))==null||i.add(e),e===t&&((s=this.followersByUser.get(e))==null?void 0:s.size)===1&&Re.get("hasNostrFollowers").put(!0),(o=this.followedByUser.get(t))!=null&&o.has(r)&&(Ut.subscribedAuthors.has(En(e))||setTimeout(()=>{Ut.subscribe({authors:[En(e)]},void 0,!0)},0))},removeFollower:function(e,r){var i,s,o;if((i=this.followersByUser.get(e))==null||i.delete(r),(s=this.followedByUser.get(r))==null||s.delete(e),e===vt(me.getPubKey()))return;let t=1/0;for(const a of this.followersByUser.get(e)||[]){const l=this.followDistanceByUser.get(a);l!==void 0&&l+1<t&&(t=l+1)}t===1/0?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,t),(this.blockedUsers.has(e)||((o=this.followersByUser.get(e))==null?void 0:o.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),Ut.subscribedAuthors.delete(En(e))),Aw.saveEvents()},followerCount:function(e){var t;const r=vt(e);return((t=this.followersByUser.get(r))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var i;let r=0;const t=vt(me.getPubKey()),n=vt(e);for(const s of this.followersByUser.get(n)??[])(i=this.followedByUser.get(t))!=null&&i.has(s)&&r++;return r},block:async function(e,r){r?this.blockedUsers.add(vt(e)):this.blockedUsers.delete(vt(e));let t=JSON.stringify(Array.from(this.blockedUsers));t=await me.encrypt(t),Fe.publish({kind:16462,content:t})},flag:function(e,r){r?this.flaggedUsers.add(vt(e)):this.flaggedUsers.delete(vt(e)),Fe.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.blockedUsers)n.add(En(i));e(n)}};r();const t=me.getPubKey();return Ut.subscribe({kinds:[16462],authors:[t]},r)},getFlaggedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.flaggedUsers)n.add(En(i));e(n)}};r();const t=me.getPubKey();return Ut.subscribe({kinds:[16463],authors:[t]},r)},getFollowedByUser:function(e,r,t=!1){const n=vt(e),i=()=>{if(r){const s=new Set;for(const o of this.followedByUser.get(n)||[])s.add(En(o));t&&s.add(e),r(s)}};return(this.followedByUser.has(n)||t)&&i(),Ut.subscribe({kinds:[3],authors:[e]},i)},getFollowersByUser:function(e,r){const t=vt(e),n=()=>{if(r){const i=new Set;for(const s of this.followersByUser.get(t)||[])i.add(En(s));r(i)}};return this.followersByUser.has(t)&&n(),Ut.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,r,t=!1){const n=vt(e),i=En(n),s=()=>{r==null||r(this.profiles.get(n),e)},o=this.profiles.get(n);return o?(s(),t&&o.nip05&&!o.nip05valid&&me.verifyNip05Address(o.nip05,e).then(a=>{console.log("NIP05 address is valid?",a,o.nip05,e),o.nip05valid=a,Fn.dispatchProfile(o),s()})):Fn.loadProfile(i).then(a=>{a?(Fn.dispatchProfile(a),s()):Fn.fetchProfile(i).then(l=>{l&&(Fe.handle(l),s())})}),Ut.subscribe({kinds:[0],authors:[e]},s,!1)},setMetadata(e){const r={kind:0,content:JSON.stringify(e)};Fe.publish(r)}},pq=(e,r)=>{let t;const n=ct.getProfile(r,i=>{t=i.name});setTimeout(()=>{t=t||bge(me.toNostrBech32Address(r,"npub")||""),Re.get("groups").get(vq(e)).put({name:t}),n()},1e3)},vq=e=>{const r=g_(e);return Array.from(r,t=>t.toString(16).padStart(2,"0")).join("").slice(0,12)},I_=(e,r=!0,t=null,n=void 0)=>{const i=vq(e),s=Re.get("groups").get(i).put({key:e,inviter:t,name:n});return r&&s.then(()=>Sr(`/chat/${i}`)),i},gq=(e,r=void 0)=>{if(e.indexOf("#")>-1&&(e=e.split("#")[1]),e.startsWith("nsec")){const t=me.toNostrHexAddress(e);t&&I_(t,!0,void 0,r)}},yq=(e=void 0)=>{const r=C3();return[I_(r,!0,void 0,e),r]},vwe=async e=>{const r=yq()[1],t=me.toNostrBech32Address(r,"nsec"),n=C3(),i=4,s=Math.floor(Date.now()/1e3),o=`This is an invitation to a secret chat. Use ${t} or go to https://iris.to/chat/#${t}`;let a={kind:i,created_at:s,pubkey:me.getPubKey(),tags:[["p",e]],content:o};a=await Fe.sign(a);const l=await mh.encrypt(n,e,`${o}

${JSON.stringify(a)}`),u={kind:i,created_at:s,pubkey:yh(n),tags:[["p",e]],content:l};u.id=Ic(u),u.sig=OU(u,n),Fe.publish(u),Re.get("chatInvites").get(e).put({priv:r}),pq(r,e)};function gwe(){const[e,r]=Me(""),[t,n]=Me(""),i=o=>{r(o.target.value),gq(o.target.value,t)};return v("div",{className:"flex flex-1 flex-col items-center justify-center h-full",children:[v("div",{className:"flex flex-row gap-2",children:[v("input",{type:"text",className:"input rounded-full input-bordered",placeholder:"Group name",onChange:o=>{n(o.target.value)}}),v("button",{className:"btn btn-primary",onClick:()=>yq(t),children:be("start_new_group")})]}),v("div",{className:"my-4",children:be("or")}),v("div",{className:"my-4 flex gap-2 justify-center items-center",children:v("input",{placeholder:"Paste nsec or chat link",type:"password",id:"pasteLink",className:"text-center input input-bordered rounded-full p-2",onChange:i,value:e})})]})}class ywe{constructor(){le(this,"_data",new Map)}upsert(r,t){var s;const n=this._data.get(r),i=(n==null?void 0:n.relays)||new Set;return(s=t.relays)==null||s.forEach(o=>i.add(this._normalizeURL(o))),this._data.set(r,{relays:i}),this}get(r){if(r)return this._data.get(r)}getRelays(r){var t;return r?Array.from(((t=this.get(r))==null?void 0:t.relays)||[]):[]}_normalizeURL(r){return r.trim().replace(/\/$/,"")}}const J$=class J${constructor(r,t=!0){le(this,"events");le(this,"eventIdSet");le(this,"maxSize");le(this,"descending");le(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=r,this.descending=t,this.subscriptions=new Map}get size(){return this.events.length}first(){var r;return(r=this.events[0])==null?void 0:r.id}has(r){return this.eventIdSet.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(r.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:r.id,created_at:r.created_at});else if(r.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:r.id,created_at:r.created_at},this.eventIdSet.add(r.id);else return!1;return this.eventIdSet.add(r.id),this.events.sort((t,n)=>this.descending?n.created_at-t.created_at:t.created_at-n.created_at),this.subscriptions.forEach(t=>t(this.eventIds)),!0}delete(r){if(!this.eventIdSet.delete(r))return!1;const n=this.events.findIndex(i=>i.id===r);return n===-1?!1:(this.events.splice(n,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(r=>r.id)}values(){return this.events.map(r=>r.id)}subscribe(r){const t=J$.subscriptionId++;return this.subscriptions.set(t,r),r(this.eventIds),()=>this.subscriptions.delete(t)}};le(J$,"subscriptionId",0);let ey=J$;const mwe=Date.now()/1e3,bwe=500,wwe=1e3,$we=new ige("iris"),_we=$we.addCollection("events",{indices:["created_at","pubkey","kind"],unique:["id"]});let Fg;Re.get("mutedNotes").on(e=>{Fg=e});const NI={maxFollowDistance:3,minFollowersAtMaxDistance:5};let jg=NI;Re.get("globalFilter").on(e=>{jg=e});let RI={};Re.get("dev").on(e=>{RI=e});const xwe=(e,r)=>{const t=Fi.db.by("id",e),n=Fi.db.by("id",r);return t?!n||t.created_at>n.created_at?-1:t.created_at<n.created_at?1:0:1},Fi={DEFAULT_GLOBAL_FILTER:NI,getEventHash:Ic,db:_we,eventsMetaDb:new ywe,seen:new Set,deletedEvents:new Set,directMessagesByUser:new j3((e,r)=>{const t=e.value.eventIds[0],n=r.value.eventIds[0];return t?n?xwe(t,n):-1:1}),latestNotificationByTargetAndKind:new Map,notifications:new ey(bwe),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,directRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new ey(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s,o;this.db.by("id",e.id)||this.insert(e);const t=this.isRepost(e),n=!t&&this.getNoteReplyingTo(e),i=me.getPubKey();if(n&&!t){this.directRepliesByMessageId.has(n)||this.directRepliesByMessageId.set(n,new Set),(s=this.directRepliesByMessageId.get(n))==null||s.add(e.id);const a=e.tags.filter(l=>l[0]==="e").map(l=>l[1]).slice(0,2);for(const l of a)e.created_at>mwe||e.pubkey===i||ct.isFollowing(i,e.pubkey),this.threadRepliesByMessageId.has(l)||this.threadRepliesByMessageId.set(l,new Set),(o=this.threadRepliesByMessageId.get(l))==null||o.add(e.id)}},getRepostedEventId(e){var t,n,i;let r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:n[1];return r||(r=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],r)},getOriginalPostEventId(e){return Fi.isRepost(e)?Fi.getRepostedEventId(e):e.id},getNoteReplyingTo:function(e){if(e.kind===1)return this.getEventReplyingTo(e)},getEventReplyingTo:function(e){var n,i;const r=(n=e.tags)==null?void 0:n.filter(s=>s[0]==="e"&&s[3]!=="mention");if(r.length===1)return r[0][1];const t=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(t)return t[1];if(r.length>1)return r[1][1]},handleRepost(e){var t,n;const r=this.getRepostedEventId(e);r&&(this.repostsByMessageId.has(r)||this.repostsByMessageId.set(r,new Set),(t=this.repostsByMessageId.get(r))!=null&&t.has(e.pubkey)||((n=this.repostsByMessageId.get(r))==null||n.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var t,n,i;const r=(n=(t=e.tags)==null?void 0:t.reverse().find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.likesByMessageId.has(r)||this.likesByMessageId.set(r,new Set),(i=this.likesByMessageId.get(r))==null||i.add(e.pubkey),this.insert(e))},handleFollow(e){var n,i,s,o;const r=Fi.db.findOne({kind:3,pubkey:e.pubkey});if(r&&r.created_at>=e.created_at)return;r&&this.db.findAndRemove({kind:3,pubkey:e.pubkey}),this.insert(e);const t=me.getPubKey();if((e.pubkey===t||ct.isFollowing(t,e.pubkey))&&Aw.loaded&&Aw.saveProfilesAndFollows(),e.tags){for(const a of e.tags)if(Array.isArray(a)&&a[0]==="p"){const l=a[1];l.length===64&&/^[0-9a-f]+$/.test(l)&&ct.addFollower(vt(a[1]),vt(e.pubkey))}}if(ct.followedByUser.has(vt(e.pubkey)))for(const a of ct.followedByUser.get(vt(e.pubkey))||[])(!e.tags||!((n=e.tags)!=null&&n.find(l=>l[0]==="p"&&l[1]===En(a))))&&ct.removeFollower(a,vt(e.pubkey));if(e.pubkey===t&&((i=e.tags)!=null&&i.length)&&(((s=ct.followedByUser.get(vt(t)))==null?void 0:s.size)||0)>10&&Re.get("showFollowSuggestions").put(!1),e.pubkey===t&&((o=e.content)!=null&&o.length))try{const a=JSON.parse(e.content),l=Object.keys(a);if(l.length){console.log("setting relays from your contacs list",l);for(const u of sn.relays.keys())l.includes(u)||sn.remove(u);for(const u of l)sn.add(u)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var t;if((((t=this.myBlockEvent)==null?void 0:t.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const r=me.getPubKey();if(e.pubkey===r){let n;try{n=await me.decrypt(e.content);const i=JSON.parse(n).map(vt);ct.blockedUsers=new Set(i)}catch{console.log("failed to parse your block list",n,e)}}},handleFlagList(e){var t;if((((t=this.myFlagEvent)==null?void 0:t.created_at)||0)>e.created_at)return;const r=me.getPubKey();if(e.pubkey===r)try{const n=JSON.parse(e.content).map(vt);ct.flaggedUsers=new Set(n)}catch{console.log("failed to parse your flagged users list",e)}},insert(e){try{delete e.$loki,this.db.insert(e)}catch{}},handleMetadata(e){var r;if(!((r=e.content)!=null&&r.length))return!1;try{if(Fn.addProfileEvent(e))return!0}catch(t){console.log("error parsing nostr profile",t,e)}return!1},handleDelete(e){var n,i;const r=(i=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:i[1],t=me.getPubKey();if(r){const s=this.db.by("id",r);s&&[e.pubkey,t].includes(s.pubkey)&&this.db.findAndRemove({id:r})}},handleZap(e){var t,n,i;this.insert(e);const r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.zapsByNote.has(r)||this.zapsByNote.set(r,new ey(wwe)),(i=this.zapsByNote.get(r))==null||i.add(e))},async saveDMToLocalState(e,r){const t=r.get("latest"),n=await t.once();(!n||!n.created_at||n.created_at<e.created_at)&&t.put({id:e.id,created_at:e.created_at,text:e.text})},async handleDirectMessage(e){var i,s,o,a,l,u;const r=me.getPubKey();let t,n=!1;if(e.pubkey===r)t=((s=(i=e.tags)==null?void 0:i.find(h=>h[0]==="p"))==null?void 0:s[1])||t;else if(t=e.pubkey,!((o=e.tags)==null?void 0:o.some(c=>c[0]==="p"&&c[1]===r))&&(n=((a=e.tags)==null?void 0:a.length)===1&&((l=e.tags)==null?void 0:l.some(c=>c[0]==="p"&&c[1]===e.pubkey)),!n))return;try{const h=await me.decrypt(e.content,e.pubkey);h&&(e.text=h,this.decryptedMessages.set(e.id,h));const c=JSON.parse(h.slice(h.indexOf("{")));if($y(c)&&Np(c)){const p=(u=c.content.match(/nsec1[023456789acdefghjklmnpqrstuvwxyz]{6,}/gi))==null?void 0:u[0];if(p){const m=me.toNostrHexAddress(p);if(m){I_(m,!1,c.pubkey),pq(m,c.pubkey),Re.get("chatInvites").get(c.pubkey).put({priv:m});return}}}}catch{}this.insert(e),n||this.saveDMToLocalState(e,Re.get("chats").get(t))},getEventFromText(e){try{const r=e.slice(e.indexOf("{")),t=JSON.parse(r);if($y(t)&&Np(t))return t}catch{}},subscribeGroups(){Re.get("groups").map((e,r)=>{if(e.key){const t=yh(e.key);t&&Ut.subscribe({authors:[t],kinds:[4],"#p":[t]},async n=>{const i=await mh.decrypt(e.key,t,n.content),s=this.getEventFromText(i);s&&s.tags.length===1&&s.tags[0][0]==="p"&&s.tags[0][1]===t&&(s.text=s.content,this.saveDMToLocalState(s,Re.get("groups").get(r)))})}})},handleKeyValue(e){var t,n;if(e.pubkey!==me.getPubKey())return;const r=(n=(t=e.tags)==null?void 0:t.find(i=>i[0]==="d"))==null?void 0:n[1];if(r){const i=this.keyValueEvents.get(r);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(r,e)}},isRepost(e){var t;if(e.kind===6)return!0;const r=(t=e.tags)==null?void 0:t.findIndex(n=>n[0]==="e"&&n[3]==="mention");return e.kind===1&&e.content===`#[${r}]`},acceptEvent(e){var r,t,n;if(jg.maxFollowDistance&&me.getPubKey()){if(e.kind===4)return!0;if(!Ut.subscribedAuthors.has(e.pubkey)&&!Ut.subscribedEventIds.has(e.id)){if(!e.pubkey)return console.log("what",e),!1;if(Rc.has(e.pubkey)&&ct.getFollowDistance(e.pubkey)){const i=ct.followDistanceByUser.get(vt(e.pubkey));if(i&&i>jg.maxFollowDistance||i===jg.maxFollowDistance&&(((r=ct.followersByUser.get(vt(e.pubkey)))==null?void 0:r.size)||0)<(jg.minFollowersAtMaxDistance||NI.minFollowersAtMaxDistance))return!1}else{const i=((t=Fi.likesByMessageId.get(e.id))==null?void 0:t.size)||0,s=((n=Fi.repostsByMessageId.get(e.id))==null?void 0:n.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}}}return!0},find(e,r){const t={};e.authors&&(t.pubkey={$in:e.authors}),e.kinds&&(t.kind={$in:e.kinds}),this.db.chain().find(t).where(n=>P3(e,n)).simplesort("created_at",{desc:!0}).limit(e.limit||1/0).data().forEach(n=>{r(n)})},handle(e,r=!1,t=!0,n=2){var i;if(!e||!r&&this.seen.has(e.id))return!1;if(!r&&!this.acceptEvent(e))return n&&setTimeout(()=>{this.handle(e,r,t,n-1)},3e3),!1;if(ct.isBlocked(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&this.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,Ut.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),this.isRepost(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:if(((i=Fi.db.findOne({kind:3,pubkey:e.pubkey}))==null?void 0:i.created_at)>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break;case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(t){const s=ct.followDistanceByUser.get(vt(e.pubkey))||1/0;s<=1?RI.indexedDbSave!==!1&&rl.saveEvent(e):s<=4&&[0,3,4].includes(e.kind)&&RI.indexedDbSave!==!1&&rl.saveEvent(e)}return Ut.handle(e),!0},handleEventMetadata({url:e,event:r}){const t=this.getOriginalPostEventId(r);t&&this.eventsMetaDb.upsert(t,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),r=this.db.by("id",e);r&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(r.id),this.handle(r,!0),this.handleNextFutureEvent()},(r.created_at-Date.now()/1e3)*1e3))},isMuted(e){let r=!1;if(Fg&&(r=Fg[e.id],!r)){for(const t of e.tags)if(t[0]==="e"&&Fg[t[1]]&&(r=Fg[t[1]],r))return!0}return r},getEventRoot(e){var t,n,i,s;const r=(n=(t=e==null?void 0:e.tags)==null?void 0:t.find(o=>o[0]==="e"&&o[3]==="root"))==null?void 0:n[1];return r||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(o=>o[0]==="e"))==null?void 0:s[1])},maybeAddNotification(e){var t,n;if(((t=e.tags)==null?void 0:t.filter(i=>i[0]==="p").length)>10)return;const r=me.getPubKey();if(e.pubkey!==r&&((n=e.tags)!=null&&n.some(i=>i[0]==="p"&&i[1]===r))){if(e.kind===3){const i=ct.followedByUser.get(vt(e.pubkey));if(!i||i.has(vt(r)))return}if(!this.isMuted(e)){this.insert(e);const i=this.getEventRoot(e)||this.getEventReplyingTo(e)||e.id,s=`${e.kind}-${i}`,o=this.latestNotificationByTargetAndKind.get(s),a=o&&this.db.by("id",o);(!o||a.created_at<e.created_at)&&(o&&this.notifications.delete(o),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:On.debounce(()=>{if(!Fi.notificationsSeenTime)return;let e=0;for(const r of Fi.notifications.eventIds){const t=Fi.db.by("id",r);if((t==null?void 0:t.created_at)>Fi.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",Fi.notificationsSeenTime,"count",e),Re.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var t;if(delete e.$loki,delete e.meta,e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");Ut.publish(e),console.log("publishing event",e),this.handle(e,!0);const r=(t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").reverse().slice(0,10);for(const n of r||[]){const i=this.db.by("id",n[1]);i&&(delete i.meta,delete i.$loki,Ut.publish(i))}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=me.getPubKey(),e.id=Ic(e),e.sig=await me.sign(e),e},getZappingUser(e){var i,s,o;const r=(o=(s=(i=Fi.db.by("id",e))==null?void 0:i.tags)==null?void 0:s.find(a=>a[0]==="description"))==null?void 0:o[1];if(!r)return null;let t;try{t=JSON.parse(r)}catch{return null}return me.toNostrBech32Address(t.pubkey,"npub")},getReplies(e,r){const t=()=>{r==null||r(this.directRepliesByMessageId.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[1]},t,!1)},getLikes(e,r){const t=()=>{r==null||r(this.likesByMessageId.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[7]},t,!1)},getThreadRepliesCount(e,r){const t=()=>{var n;r==null||r(((n=this.threadRepliesByMessageId.get(e))==null?void 0:n.size)??0)};return t(),Ut.subscribe({"#e":[e],kinds:[1]},t,!1)},getReposts(e,r){const t=()=>{r==null||r(this.repostsByMessageId.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[1,6]},t,!1)},getZaps(e,r){const t=()=>{r==null||r(this.zapsByNote.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[9735]},t,!1)},getEventById(e,r=!1,t){const n=this.db.by("id",e);if(t&&n){t(n);return}if(r){const i=setTimeout(()=>{Ut.subscribe({ids:[e]},s=>t==null?void 0:t(s))},300);fetch(`https://api.iris.to/event/${e}`).then(s=>{s.status===200&&s.json().then(o=>{o&&o.id===e&&(clearTimeout(i),Fi.handle(o,!0),t==null||t(o))})})}else Ut.subscribe({ids:[e]},t,!1)}},Fe=Fi,me={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:yh,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,r=!1){const t=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),t&&location.reload(),Re.get("loggedIn").put(!0),r&&setTimeout(()=>{Sr("/following")}),Re.get("showLoginModal").put(!1)},generateKey(){const e=C3();return{priv:e,rpub:yh(e)}},getOrCreate(e){let r=localStorage.getItem("iris.myKey");return r||(r=localStorage.getItem("chatKeyPair")),r?(this.key=JSON.parse(r),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),Re.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),Re.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return((e=this.key)==null?void 0:e.rpub)||""},getPrivKey(){var e;return((e=this.key)==null?void 0:e.priv)||""},encrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?mh.encrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"encrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},decrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?mh.decrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"decrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},sign:async function(e){const r=this.getPrivKey();return r?OU(e,r):window.nostr?new Promise(t=>{this.processWindowNostr({op:"sign",data:e,callback:t})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:r,pub:t,callback:n}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(t,r),n):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(t,r),n):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(r),s=>n(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,r){return e.then(t=>{r(t)}).catch(t=>{console.error(t),r(null)})},async decryptMessage(e,r){var n,i;const t=Fe.decryptedMessages.get(e.id);if(t){r(t);return}try{const s=this.getPubKey(),o=e.pubkey===s?(i=(n=e.tags)==null?void 0:n.find(l=>l[0]==="p"))==null?void 0:i[1]:e.pubkey;if(!(e&&o))return;let a=await this.decrypt(e.content,o);a!=null&&a.content&&(a=a.content),Fe.decryptedMessages.set(e.id,a),r(a)}catch(s){console.error(s)}},async getPubKeyByNip05Address(e){try{const[r,t]=e.split("@"),n=`https://${t}/.well-known/nostr.json?name=${r}`;return(await(await fetch(n)).json()).names[r]||null}catch(r){return console.error(r),null}},async verifyNip05Address(e,r){try{const[t,n]=e.split("@"),i=`https://${n}/.well-known/nostr.json?name=${t}`,a=(await(await fetch(i)).json()).names;return a[t]===r||a[t.toLowerCase()]===r}catch{return!1}},toNostrBech32Address:function(e,r){if(!e)return null;if(!r)throw new Error("prefix is required");try{const n=$w(e);return r!==n.prefix?null:VD(r,n.data)}catch{}const t=e.match(/^[0-9a-fA-F]{64}$/);if(t!==null){const n=t[0].match(/.{1,2}/g);if(n!==null){const i=new Uint8Array(n.map(s=>parseInt(s,16)));return VD(r,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:r}=$w(e);return xr.arrayToHex(r)}catch{}return null}},ft=e=>e.when?e.children:null;class Nn extends dy{constructor(){super(...arguments);le(this,"unmounted");le(this,"unsubscribes",{})}sub(t,n){return(s,o,a,l)=>{if(this.unmounted){a==null||a();return}this.unsubscribes[n??o]=a,t(s,o,a,l)}}inject(t,n){return this.sub((i,s)=>{const o={};o[t??s]=i,this.setState(o)},n)}unsubscribe(){Object.keys(this.unsubscribes).forEach(t=>{const n=this.unsubscribes[t];n==null||n(),delete this.unsubscribes[t]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}const Ewe=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],mq=e=>Ewe.some(r=>e.startsWith(r)),xa=e=>{let r=e.onError,t=e.src,n=!1;if(e.src&&!e.src.startsWith("data:image")&&(!mq(e.src)||e.width)){const o=e.src;if(e.width){const l=e.width*2;t=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${l}:${l}/plain/${o}`}else t=`https://imgproxy.iris.to/insecure/plain/${o}`;const a=e.onError;r=()=>{n?(console.log("original source failed too",o),a&&a()):(console.log("image proxy failed",t,"trying original source",o),n=!0,s(o))}}const[i,s]=Me(t);return v("img",{src:i,onError:r,onClick:e.onClick,className:e.className,style:e.style,width:e.width,height:e.width,alt:e.alt})};class Wi extends Nn{constructor(){super(...arguments);le(this,"activityTimeout");le(this,"unsub");le(this,"handleEvent")}componentDidMount(){const t=this.props.str;if(!t)return;let n=vt(t);this.handleEvent=s=>{let o=s.detail,a=this.state.created_at||0;!o||o.id!=n||o.created_at<=a||this.setState({picture:o.picture,name:o.name,created_at:o.created_at})},$h.add(this.handleEvent);let i=Fn.getMemoryProfile(n);this.setState({picture:i.picture,name:i.name,avatar:Fn.createImageUrl(t,this.props.width)}),this.unsub=Fn.subscribe(t),this.setState({activity:null})}componentWillUnmount(){var n;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout),this.props.str&&($h.remove(this.handleEvent),(n=this.unsub)==null||n.call(this))}render(){const t=this.props.width,n=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!ct.isBlocked(this.props.str),s=i?"has-picture":"",o=this.props.showTooltip?"tooltip":"";return v("div",{style:{maxWidth:`${t}px`,maxHeight:`${t}px`,cursor:this.props.onClick?"pointer":void 0},className:`inline-flex flex-col flex-shrink-0 items-center justify-center relative select-none ${s} ${o} ${n}`,onClick:this.props.onClick,children:[v("div",{children:[v(ft,{when:i,children:v(xa,{className:"object-cover rounded-full",src:this.state.picture,width:t,square:!0,onError:()=>this.setState({hasError:!0})})}),v(ft,{when:!i,children:v("img",{width:t,className:"max-w-full rounded-full",src:this.state.avatar||""})})]}),v(ft,{when:this.props.showTooltip&&this.state.name,children:v("span",{className:"tooltiptext",children:this.state.name})})]})}}const Swe=[{url:"/",icon:cz,activeIcon:hz},{url:"/chat",icon:n3,activeIcon:s3},{url:"/post/new",icon:Kle,activeIcon:$ue},{url:"/search",icon:pz,activeIcon:Os.magnifyingGlassBold}],kwe=()=>{const[e,r]=Me(!1),[t,n]=Me("/"),[i,s]=Me(null);St(()=>{Re.get("isMyProfile").on(u=>r(u)),Re.get("activeRoute").on(u=>{const h=u.replace("/chat/new","").replace("/chat/",""),c=h.length<u.length?h:null;n(u),s(c)})},[]);const o=u=>{u&&window.scrollTo({top:0})},a=(u,h,c)=>{const p=new RegExp(`^${u}(/|$)`).test(t);return v(Kt,{href:u,className:`btn flex-grow ${p?"active":""}`,onClick:()=>o(p),children:[v(ft,{when:p,children:v(c,{width:24})}),v(ft,{when:!p,children:v(h,{width:24})})]})},l=me.toNostrBech32Address(me.getPubKey(),"npub");return v(ft,{when:l&&!i,children:v("footer",{className:"fixed md:hidden bottom-0 z-10 w-full bg-base-200 pb-safe-area",children:v("div",{className:"flex",children:[Swe.map(u=>a(u.url,u.icon,u.activeIcon)),v(Kt,{href:`/${l}`,onClick:()=>o(e),className:"rounded-full btn flex flex-grow",children:v("span",{className:`${e?"border-white":"border-black"} flex rounded-full border-2`,children:v(Wi,{str:l,width:28})})})]})})})},Twe=(e,r)=>r.indexOf(e.slice(-4))!==-1,a6=e=>Twe(e.name,[".jpg","jpeg",".gif",".png"]);class Iwe extends jn{constructor(){super(...arguments);le(this,"torrentId");le(this,"filePath");le(this,"torrent")}componentDidMount(){Re.get("player").on(t=>{const n=t&&t.torrentId,i=t&&t.filePath;n!==this.torrentId?(this.filePath=i,this.torrentId=n,this.setState({torrentId:n,isOpen:!!t,splitPath:i&&i.split("/")}),n&&this.startTorrenting()):i&&i!==this.filePath&&(this.filePath=i,this.setState({splitPath:i&&i.split("/")}),this.openFile())}),Re.get("player").get("paused").on(t=>this.setPaused(t))}setPaused(t){const i=this.base.querySelector("audio");i&&(t?i.pause():i.play())}onTorrent(t){this.torrent=t;const n=t.files.find(a=>a6(a));let i=t.files.find(a=>a6(a)&&(a.name.indexOf("cover")>-1||a.name.indexOf("poster")>-1));i=i||n;const o=this.base.querySelector(".cover");o.innerHTML="",i&&o.appendChild(i.appendTo()),this.setState({isOpen:!0}),this.openFile()}openFile(){if(this.torrent){const t=this.torrent.files.find(o=>o.path===this.filePath),i=this.base.querySelector(".player");i.innerHTML="",t&&i.appendChild(t.appendTo({autoplay:!0,muted:!1}));const s=i.querySelector("audio");s&&(s.onpause=s.onplay=o=>{const a=o.target;Re.get("player").get("paused").put(!!a.paused)})}}async startTorrenting(){const{default:t}=await br(()=>import("./index-14fa9ce4.js").then(s=>s.i),[]),n=new t,i=n.get(this.torrentId);i?this.onTorrent(i):n.add(this.torrentId,(s,o)=>this.onTorrent(o))}closeClicked(){this.setPaused(!0),Re.get("player").put(null)}render(){const t=this.state;return v(rt,{children:v("div",{className:"media-player",style:{display:t.isOpen?"":"none"},children:[v("div",{className:"player"}),v("div",{className:"cover"}),v(Kt,{href:`/torrent/${encodeURIComponent(this.state.torrentId??"")}`,className:"info",children:t.splitPath?t.splitPath.map((n,i)=>{var s;return i===(((s=t.splitPath)==null?void 0:s.length)||0)-1?(n=n.split(".").slice(0,-1).join("."),v("p",{children:v("b",{children:n})})):v("p",{children:n})}):""}),v("div",{className:"close",onClick:()=>this.closeClicked(),children:Os.close})]})})}}const Awe=({onFilesChanged:e})=>v("input",{name:"attachment-input",type:"file",className:"hidden attachment-input",accept:"image/*, video/*, audio/*",multiple:!0,onChange:t=>{const n=t.target.files||t.dataTransfer.files;n&&e(Array.from(n)),tr(t.target).val(null)}}),Owe=({onMsgTextPaste:e,onKeyUp:r,onKeyDown:t,onMsgTextInput:n,attachmentsChanged:i,placeholder:s,value:o})=>v("textarea",{onDragOver:a=>{a.preventDefault(),a.stopPropagation()},onDrop:i,onKeyUp:r,onKeyDown:t,onPaste:e,onInput:n,className:"p-2 mt-1 w-full h-12 bg-black focus:ring-blue-500 focus:border-blue-500 block w-full text-lg border-gray-700 rounded-md text-white",type:"text",placeholder:be(s),autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!1,value:o});function Cwe(e=[],r){function t(i,s){var a;const o=[...r.matchAll(i)].map(l=>l[0]).filter((l,u,h)=>h.indexOf(l)===u);if(o)for(const l of o){const u=(a=l.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:a[0],h=u&&me.toNostrHexAddress(u);if(!h)continue;const c=[s,h,"","mention"];e!=null&&e.find(p=>p[0]===c[0]&&p[1]===c[1])||e.push(c)}}t(xr.pubKeyRegex,"p"),t(xr.noteRegex,"e");const n=[...r.matchAll(xr.hashtagRegex)].map(i=>i[0].slice(1));if(n.length)for(const i of n)e!=null&&e.find(s=>s[0]==="t"&&s[1]===i)||e.push(["t",i]);return e}async function Pwe(e){var t,n,i;const r={kind:1,content:e.text};if(e.replyingTo){const s=me.toNostrHexAddress(e.replyingTo);if(!s)throw new Error("invalid replyingTo");const o=await new Promise(l=>{Fe.getEventById(s,!0,u=>l(u))});r.tags=o.tags.filter(l=>l[0]==="p");let a=(t=o.tags)==null?void 0:t.find(l=>l[0]==="e"&&l[3]==="root");a||(a=(n=o.tags)==null?void 0:n.find(l=>l[0]==="e")),a?(r.tags.unshift(["e",s,"","reply"]),r.tags.unshift(["e",a[1],"","root"])):r.tags.unshift(["e",s,"","root"]),(i=r.tags)!=null&&i.find(l=>l[0]==="p"&&l[1]===o.pubkey)||r.tags.push(["p",o.pubkey])}return r.tags=Cwe(r.tags,e.text),console.log("sending event",r),Fe.publish(r)}function Nwe(){this.__data__=[],this.size=0}var Rwe=Nwe;function Dwe(e,r){return e===r||e!==e&&r!==r}var bq=Dwe,Bwe=bq;function Mwe(e,r){for(var t=e.length;t--;)if(Bwe(e[t][0],r))return t;return-1}var A_=Mwe,Lwe=A_,Fwe=Array.prototype,jwe=Fwe.splice;function Hwe(e){var r=this.__data__,t=Lwe(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():jwe.call(r,t,1),--this.size,!0}var zwe=Hwe,Uwe=A_;function Wwe(e){var r=this.__data__,t=Uwe(r,e);return t<0?void 0:r[t][1]}var Kwe=Wwe,qwe=A_;function Vwe(e){return qwe(this.__data__,e)>-1}var Gwe=Vwe,Ywe=A_;function Zwe(e,r){var t=this.__data__,n=Ywe(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}var Xwe=Zwe,Jwe=Rwe,Qwe=zwe,e$e=Kwe,t$e=Gwe,r$e=Xwe;function dv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}dv.prototype.clear=Jwe;dv.prototype.delete=Qwe;dv.prototype.get=e$e;dv.prototype.has=t$e;dv.prototype.set=r$e;var O_=dv,n$e=O_;function i$e(){this.__data__=new n$e,this.size=0}var s$e=i$e;function o$e(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var a$e=o$e;function l$e(e){return this.__data__.get(e)}var u$e=l$e;function c$e(e){return this.__data__.has(e)}var f$e=c$e,h$e=fm,d$e=cm,p$e="[object AsyncFunction]",v$e="[object Function]",g$e="[object GeneratorFunction]",y$e="[object Proxy]";function m$e(e){if(!d$e(e))return!1;var r=h$e(e);return r==v$e||r==g$e||r==p$e||r==y$e}var wq=m$e,b$e=pl,w$e=b$e["__core-js_shared__"],$$e=w$e,NE=$$e,l6=function(){var e=/[^.]+$/.exec(NE&&NE.keys&&NE.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _$e(e){return!!l6&&l6 in e}var x$e=_$e,E$e=Function.prototype,S$e=E$e.toString;function k$e(e){if(e!=null){try{return S$e.call(e)}catch{}try{return e+""}catch{}}return""}var $q=k$e,T$e=wq,I$e=x$e,A$e=cm,O$e=$q,C$e=/[\\^$.*+?()[\]{}|]/g,P$e=/^\[object .+?Constructor\]$/,N$e=Function.prototype,R$e=Object.prototype,D$e=N$e.toString,B$e=R$e.hasOwnProperty,M$e=RegExp("^"+D$e.call(B$e).replace(C$e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L$e(e){if(!A$e(e)||I$e(e))return!1;var r=T$e(e)?M$e:P$e;return r.test(O$e(e))}var F$e=L$e;function j$e(e,r){return e==null?void 0:e[r]}var H$e=j$e,z$e=F$e,U$e=H$e;function W$e(e,r){var t=U$e(e,r);return z$e(t)?t:void 0}var pv=W$e,K$e=pv,q$e=pl,V$e=K$e(q$e,"Map"),kP=V$e,G$e=pv,Y$e=G$e(Object,"create"),C_=Y$e,u6=C_;function Z$e(){this.__data__=u6?u6(null):{},this.size=0}var X$e=Z$e;function J$e(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Q$e=J$e,e_e=C_,t_e="__lodash_hash_undefined__",r_e=Object.prototype,n_e=r_e.hasOwnProperty;function i_e(e){var r=this.__data__;if(e_e){var t=r[e];return t===t_e?void 0:t}return n_e.call(r,e)?r[e]:void 0}var s_e=i_e,o_e=C_,a_e=Object.prototype,l_e=a_e.hasOwnProperty;function u_e(e){var r=this.__data__;return o_e?r[e]!==void 0:l_e.call(r,e)}var c_e=u_e,f_e=C_,h_e="__lodash_hash_undefined__";function d_e(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=f_e&&r===void 0?h_e:r,this}var p_e=d_e,v_e=X$e,g_e=Q$e,y_e=s_e,m_e=c_e,b_e=p_e;function vv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}vv.prototype.clear=v_e;vv.prototype.delete=g_e;vv.prototype.get=y_e;vv.prototype.has=m_e;vv.prototype.set=b_e;var w_e=vv,c6=w_e,$_e=O_,__e=kP;function x_e(){this.size=0,this.__data__={hash:new c6,map:new(__e||$_e),string:new c6}}var E_e=x_e;function S_e(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var k_e=S_e,T_e=k_e;function I_e(e,r){var t=e.__data__;return T_e(r)?t[typeof r=="string"?"string":"hash"]:t.map}var P_=I_e,A_e=P_;function O_e(e){var r=A_e(this,e).delete(e);return this.size-=r?1:0,r}var C_e=O_e,P_e=P_;function N_e(e){return P_e(this,e).get(e)}var R_e=N_e,D_e=P_;function B_e(e){return D_e(this,e).has(e)}var M_e=B_e,L_e=P_;function F_e(e,r){var t=L_e(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}var j_e=F_e,H_e=E_e,z_e=C_e,U_e=R_e,W_e=M_e,K_e=j_e;function gv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}gv.prototype.clear=H_e;gv.prototype.delete=z_e;gv.prototype.get=U_e;gv.prototype.has=W_e;gv.prototype.set=K_e;var _q=gv,q_e=O_,V_e=kP,G_e=_q,Y_e=200;function Z_e(e,r){var t=this.__data__;if(t instanceof q_e){var n=t.__data__;if(!V_e||n.length<Y_e-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new G_e(n)}return t.set(e,r),this.size=t.size,this}var X_e=Z_e,J_e=O_,Q_e=s$e,exe=a$e,txe=u$e,rxe=f$e,nxe=X_e;function yv(e){var r=this.__data__=new J_e(e);this.size=r.size}yv.prototype.clear=Q_e;yv.prototype.delete=exe;yv.prototype.get=txe;yv.prototype.has=rxe;yv.prototype.set=nxe;var ixe=yv,sxe="__lodash_hash_undefined__";function oxe(e){return this.__data__.set(e,sxe),this}var axe=oxe;function lxe(e){return this.__data__.has(e)}var uxe=lxe,cxe=_q,fxe=axe,hxe=uxe;function Gw(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new cxe;++r<t;)this.add(e[r])}Gw.prototype.add=Gw.prototype.push=fxe;Gw.prototype.has=hxe;var dxe=Gw;function pxe(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}var vxe=pxe;function gxe(e,r){return e.has(r)}var yxe=gxe,mxe=dxe,bxe=vxe,wxe=yxe,$xe=1,_xe=2;function xxe(e,r,t,n,i,s){var o=t&$xe,a=e.length,l=r.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),h=s.get(r);if(u&&h)return u==r&&h==e;var c=-1,p=!0,m=t&_xe?new mxe:void 0;for(s.set(e,r),s.set(r,e);++c<a;){var w=e[c],b=r[c];if(n)var T=o?n(b,w,c,r,e,s):n(w,b,c,e,r,s);if(T!==void 0){if(T)continue;p=!1;break}if(m){if(!bxe(r,function(_,A){if(!wxe(m,A)&&(w===_||i(w,_,t,n,s)))return m.push(A)})){p=!1;break}}else if(!(w===b||i(w,b,t,n,s))){p=!1;break}}return s.delete(e),s.delete(r),p}var xq=xxe,Exe=pl,Sxe=Exe.Uint8Array,kxe=Sxe;function Txe(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}var Ixe=Txe;function Axe(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var Oxe=Axe,f6=F3,h6=kxe,Cxe=bq,Pxe=xq,Nxe=Ixe,Rxe=Oxe,Dxe=1,Bxe=2,Mxe="[object Boolean]",Lxe="[object Date]",Fxe="[object Error]",jxe="[object Map]",Hxe="[object Number]",zxe="[object RegExp]",Uxe="[object Set]",Wxe="[object String]",Kxe="[object Symbol]",qxe="[object ArrayBuffer]",Vxe="[object DataView]",d6=f6?f6.prototype:void 0,RE=d6?d6.valueOf:void 0;function Gxe(e,r,t,n,i,s,o){switch(t){case Vxe:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case qxe:return!(e.byteLength!=r.byteLength||!s(new h6(e),new h6(r)));case Mxe:case Lxe:case Hxe:return Cxe(+e,+r);case Fxe:return e.name==r.name&&e.message==r.message;case zxe:case Wxe:return e==r+"";case jxe:var a=Nxe;case Uxe:var l=n&Dxe;if(a||(a=Rxe),e.size!=r.size&&!l)return!1;var u=o.get(e);if(u)return u==r;n|=Bxe,o.set(e,r);var h=Pxe(a(e),a(r),n,i,s,o);return o.delete(e),h;case Kxe:if(RE)return RE.call(e)==RE.call(r)}return!1}var Yxe=Gxe;function Zxe(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var Xxe=Zxe,Jxe=Array.isArray,TP=Jxe,Qxe=Xxe,e2e=TP;function t2e(e,r,t){var n=r(e);return e2e(e)?n:Qxe(n,t(e))}var r2e=t2e;function n2e(e,r){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var o=e[t];r(o,t,e)&&(s[i++]=o)}return s}var i2e=n2e;function s2e(){return[]}var o2e=s2e,a2e=i2e,l2e=o2e,u2e=Object.prototype,c2e=u2e.propertyIsEnumerable,p6=Object.getOwnPropertySymbols,f2e=p6?function(e){return e==null?[]:(e=Object(e),a2e(p6(e),function(r){return c2e.call(e,r)}))}:l2e,h2e=f2e;function d2e(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var p2e=d2e,v2e=fm,g2e=hm,y2e="[object Arguments]";function m2e(e){return g2e(e)&&v2e(e)==y2e}var b2e=m2e,v6=b2e,w2e=hm,Eq=Object.prototype,$2e=Eq.hasOwnProperty,_2e=Eq.propertyIsEnumerable,x2e=v6(function(){return arguments}())?v6:function(e){return w2e(e)&&$2e.call(e,"callee")&&!_2e.call(e,"callee")},E2e=x2e,Yw={exports:{}};function S2e(){return!1}var k2e=S2e;Yw.exports;(function(e,r){var t=pl,n=k2e,i=r&&!r.nodeType&&r,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;e.exports=u})(Yw,Yw.exports);var Sq=Yw.exports,T2e=9007199254740991,I2e=/^(?:0|[1-9]\d*)$/;function A2e(e,r){var t=typeof e;return r=r??T2e,!!r&&(t=="number"||t!="symbol"&&I2e.test(e))&&e>-1&&e%1==0&&e<r}var O2e=A2e,C2e=9007199254740991;function P2e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=C2e}var kq=P2e,N2e=fm,R2e=kq,D2e=hm,B2e="[object Arguments]",M2e="[object Array]",L2e="[object Boolean]",F2e="[object Date]",j2e="[object Error]",H2e="[object Function]",z2e="[object Map]",U2e="[object Number]",W2e="[object Object]",K2e="[object RegExp]",q2e="[object Set]",V2e="[object String]",G2e="[object WeakMap]",Y2e="[object ArrayBuffer]",Z2e="[object DataView]",X2e="[object Float32Array]",J2e="[object Float64Array]",Q2e="[object Int8Array]",eEe="[object Int16Array]",tEe="[object Int32Array]",rEe="[object Uint8Array]",nEe="[object Uint8ClampedArray]",iEe="[object Uint16Array]",sEe="[object Uint32Array]",Qr={};Qr[X2e]=Qr[J2e]=Qr[Q2e]=Qr[eEe]=Qr[tEe]=Qr[rEe]=Qr[nEe]=Qr[iEe]=Qr[sEe]=!0;Qr[B2e]=Qr[M2e]=Qr[Y2e]=Qr[L2e]=Qr[Z2e]=Qr[F2e]=Qr[j2e]=Qr[H2e]=Qr[z2e]=Qr[U2e]=Qr[W2e]=Qr[K2e]=Qr[q2e]=Qr[V2e]=Qr[G2e]=!1;function oEe(e){return D2e(e)&&R2e(e.length)&&!!Qr[N2e(e)]}var aEe=oEe;function lEe(e){return function(r){return e(r)}}var uEe=lEe,Zw={exports:{}};Zw.exports;(function(e,r){var t=zU,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(Zw,Zw.exports);var cEe=Zw.exports,fEe=aEe,hEe=uEe,g6=cEe,y6=g6&&g6.isTypedArray,dEe=y6?hEe(y6):fEe,Tq=dEe,pEe=p2e,vEe=E2e,gEe=TP,yEe=Sq,mEe=O2e,bEe=Tq,wEe=Object.prototype,$Ee=wEe.hasOwnProperty;function _Ee(e,r){var t=gEe(e),n=!t&&vEe(e),i=!t&&!n&&yEe(e),s=!t&&!n&&!i&&bEe(e),o=t||n||i||s,a=o?pEe(e.length,String):[],l=a.length;for(var u in e)(r||$Ee.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mEe(u,l)))&&a.push(u);return a}var xEe=_Ee,EEe=Object.prototype;function SEe(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||EEe;return e===t}var kEe=SEe;function TEe(e,r){return function(t){return e(r(t))}}var IEe=TEe,AEe=IEe,OEe=AEe(Object.keys,Object),CEe=OEe,PEe=kEe,NEe=CEe,REe=Object.prototype,DEe=REe.hasOwnProperty;function BEe(e){if(!PEe(e))return NEe(e);var r=[];for(var t in Object(e))DEe.call(e,t)&&t!="constructor"&&r.push(t);return r}var MEe=BEe,LEe=wq,FEe=kq;function jEe(e){return e!=null&&FEe(e.length)&&!LEe(e)}var HEe=jEe,zEe=xEe,UEe=MEe,WEe=HEe;function KEe(e){return WEe(e)?zEe(e):UEe(e)}var qEe=KEe,VEe=r2e,GEe=h2e,YEe=qEe;function ZEe(e){return VEe(e,YEe,GEe)}var XEe=ZEe,m6=XEe,JEe=1,QEe=Object.prototype,eSe=QEe.hasOwnProperty;function tSe(e,r,t,n,i,s){var o=t&JEe,a=m6(e),l=a.length,u=m6(r),h=u.length;if(l!=h&&!o)return!1;for(var c=l;c--;){var p=a[c];if(!(o?p in r:eSe.call(r,p)))return!1}var m=s.get(e),w=s.get(r);if(m&&w)return m==r&&w==e;var b=!0;s.set(e,r),s.set(r,e);for(var T=o;++c<l;){p=a[c];var _=e[p],A=r[p];if(n)var x=o?n(A,_,p,r,e,s):n(_,A,p,e,r,s);if(!(x===void 0?_===A||i(_,A,t,n,s):x)){b=!1;break}T||(T=p=="constructor")}if(b&&!T){var I=e.constructor,O=r.constructor;I!=O&&"constructor"in e&&"constructor"in r&&!(typeof I=="function"&&I instanceof I&&typeof O=="function"&&O instanceof O)&&(b=!1)}return s.delete(e),s.delete(r),b}var rSe=tSe,nSe=pv,iSe=pl,sSe=nSe(iSe,"DataView"),oSe=sSe,aSe=pv,lSe=pl,uSe=aSe(lSe,"Promise"),cSe=uSe,fSe=pv,hSe=pl,dSe=fSe(hSe,"Set"),pSe=dSe,vSe=pv,gSe=pl,ySe=vSe(gSe,"WeakMap"),mSe=ySe,DI=oSe,BI=kP,MI=cSe,LI=pSe,FI=mSe,Iq=fm,mv=$q,b6="[object Map]",bSe="[object Object]",w6="[object Promise]",$6="[object Set]",_6="[object WeakMap]",x6="[object DataView]",wSe=mv(DI),$Se=mv(BI),_Se=mv(MI),xSe=mv(LI),ESe=mv(FI),Sf=Iq;(DI&&Sf(new DI(new ArrayBuffer(1)))!=x6||BI&&Sf(new BI)!=b6||MI&&Sf(MI.resolve())!=w6||LI&&Sf(new LI)!=$6||FI&&Sf(new FI)!=_6)&&(Sf=function(e){var r=Iq(e),t=r==bSe?e.constructor:void 0,n=t?mv(t):"";if(n)switch(n){case wSe:return x6;case $Se:return b6;case _Se:return w6;case xSe:return $6;case ESe:return _6}return r});var SSe=Sf,DE=ixe,kSe=xq,TSe=Yxe,ISe=rSe,E6=SSe,S6=TP,k6=Sq,ASe=Tq,OSe=1,T6="[object Arguments]",I6="[object Array]",Mb="[object Object]",CSe=Object.prototype,A6=CSe.hasOwnProperty;function PSe(e,r,t,n,i,s){var o=S6(e),a=S6(r),l=o?I6:E6(e),u=a?I6:E6(r);l=l==T6?Mb:l,u=u==T6?Mb:u;var h=l==Mb,c=u==Mb,p=l==u;if(p&&k6(e)){if(!k6(r))return!1;o=!0,h=!1}if(p&&!h)return s||(s=new DE),o||ASe(e)?kSe(e,r,t,n,i,s):TSe(e,r,l,t,n,i,s);if(!(t&OSe)){var m=h&&A6.call(e,"__wrapped__"),w=c&&A6.call(r,"__wrapped__");if(m||w){var b=m?e.value():e,T=w?r.value():r;return s||(s=new DE),i(b,T,t,n,s)}}return p?(s||(s=new DE),ISe(e,r,t,n,i,s)):!1}var NSe=PSe,RSe=NSe,O6=hm;function Aq(e,r,t,n,i){return e===r?!0:e==null||r==null||!O6(e)&&!O6(r)?e!==e&&r!==r:RSe(e,r,t,n,Aq,i)}var DSe=Aq,BSe=DSe;function MSe(e,r){return BSe(e,r)}var LSe=MSe;const FSe=ro(LSe);function jSe(e){const r=me.getPubKey(),t=me.toNostrHexAddress(e.pub);if(t===r)return v("span",{class:"mx-2 text-iris-blue tooltip","data-tip":be("you"),children:Os.checkmark});if(!t)return null;if(ct.isFollowing(r,t))return v("span",{class:"ml-2 text-iris-blue tooltip","data-tip":be("following"),children:Os.checkmark});{const i=ct.followedByFriendsCount(t);if(i>0){const s=i>10?"text-iris-orange":"";return v("span",{class:`${s} tooltip ml-2`,"data-tip":`${i} ${be("friends_following")}`,children:Os.checkmark})}else return null}}const oa=2;class jI{constructor(){le(this,"trusts",Array(oa+1).fill(0));le(this,"distrusts",Array(oa+1).fill(0))}addValue(r,t){r>0&&this.trusts[t]++,r<0&&this.distrusts[t]++}count(r){return this.trusts[r]+this.distrusts[r]}value(r){return this.trusts[r]-this.distrusts[r]}values(){let r=Array(oa+1).fill(0);for(let t=0;t<=oa;t++)r[t]=this.value(t);return r}isDirectTrusted(){return this.isTrusted(0)}isTrusted(r){return this.value(r)>0}isDirectDistrusted(){return this.isDistrusted(0)}isDistrusted(r){return this.value(r)<0}resolve(){let r={val:0,degree:0,count:0,hasScore:!1},t=0;for(;t<=oa;t++)if(!(this.trusts[t]==0&&this.distrusts[t]==0)&&(r.hasScore=!0,this.value(t)!=0)){r.val=this.value(t);break}return r.count=this.count(t),r.degree=t,r}clone(){const r=Object.create(Object.getPrototypeOf(this));return r.trusts=this.trusts.slice(),r.distrusts=this.distrusts.slice(),r}equals(r){for(let t=0;t<=oa;t++)if(this.trusts[t]!=r.trusts[t]||this.distrusts[t]!=r.distrusts[t])return!1;return!0}hasTrustScore(){return this.trusts.some(r=>r>0)}hasDistrustScore(){return this.distrusts.some(r=>r>0)}renderTrustCount(r=!1){return!this.hasTrustScore()&&!r?"":this.trusts.join("/")}renderDistrustCount(r=!1){return!this.hasDistrustScore()&&!r?"":this.distrusts.join("/")}}var Fo=(e=>(e[e.Key=1]="Key",e[e.Item=2]="Item",e[e.Unknown=3]="Unknown",e))(Fo||{});const Xw=99;class IP{constructor(r,t=Xw){le(this,"id",0);le(this,"out",Object.create(null));le(this,"in",Object.create(null));le(this,"degree",Xw);le(this,"entityType",1);le(this,"timestamp",0);le(this,"subscribed",0);le(this,"score",new jI);le(this,"profile");this.id=r,this.degree=t}}let Oq=class{constructor(){le(this,"key","");le(this,"type",1);le(this,"val");le(this,"entityType",1);le(this,"context","");le(this,"note","");le(this,"timestamp",0)}};class HSe extends Oq{constructor(){super(...arguments);le(this,"from","");le(this,"to","")}}let Cq=class Pq extends Oq{constructor(){super(...arguments);le(this,"out");le(this,"in");le(this,"partial",!0)}static partialFrom(t){let n=new Pq;return n.key=t.key,n.entityType=t.entityType,n.type=t.type,n.val=t.val,n.timestamp=t.timestamp,n.partial=!0,n}static key(t,n,i,s){let o=`${t}|${n}|${i}|${s}`;return hwe(o)}fill(t){this.val=t.val,this.context=t.context,this.note=t.note,this.timestamp=t.timestamp,this.partial=!1}};class zSe{constructor(){le(this,"vertices",{});le(this,"edges",{})}addVertice(r){return this.vertices[r]||(this.vertices[r]=new IP(r))}addEdge(r,t=!1){let n=this.edges[r.key];return n||(n=Cq.partialFrom(r),this.edges[r.key]=n,n.out=this.addVertice(vt(r.from)),n.in=this.addVertice(vt(r.to)),n.out.out[n.in.id]=n,n.in.in[n.out.id]=n),t?n.fill(r):(n.val=r.val,n.timestamp=r.timestamp),n}removeEdge(r){const t=r.out,n=r.in;t&&delete t.out[n.id],n&&delete n.in[t.id],delete this.edges[r.key]}getVertice(r){const t=this.getVerticeId(r);if(t!=null)return this.vertices[t]}getEdge(r){return this.edges[r]}getVerticeId(r){return r?vt(r):void 0}calculateScore(r,t){let n=[],i=Object.create(null),s=this.vertices[r];if(!s)return;this.resetScore();let o=s.degree=0;for(n.push(s);n.length>0&&o<=t;){for(let a of n){if(o>0&&!a.score.isTrusted(o-1))continue;let l=o+1;for(const u in a.out){const h=this.vertices[u],c=a.out[u];!c||c.val===0||(h.score.addValue(c.val,o),!(o>=h.degree)&&(h.degree=l,h.entityType=c.entityType,o<t&&h.entityType===1&&!i[u]&&(i[u]=h)))}}n=Object.values(i),i=Object.create(null),o++}}calculateItemScore(r){let t=this.vertices[r];t.score=new jI;let n=Xw;for(const i in t.in){const s=this.vertices[i],o=t.in[i];!o||o.val==0||(s.degree<n&&(n=s.degree),t.score.addValue(o.val,s.degree))}t.degree=n+1}resetScore(){for(let r in this.vertices){const t=this.vertices[r];t.score=new jI,t.degree=Xw}}wotNetwork(r,t=oa+1){let n=[];for(const i in this.vertices){const s=this.vertices[i];s.degree<=t&&s.degree>0&&(!r||s.entityType===r)&&n.push(s)}return n}inOutTrustById(r,t,n){const i=this.vertices[r];if(!i)return[];let s=Object.create(null);for(const o in i.in){const a=this.vertices[o];if(!a||a.degree>oa)continue;const l=i.in[o];!l||l.val==0||n&&l.val!=n||(s[o]=a)}for(const o in i.out){const a=i.out[o];if(!a||a.val==0||n&&a.val!=n)continue;const l=this.vertices[o];(!t||l.entityType===t)&&(s[o]=l)}return Object.values(s)}outTrustById(r,t,n){let i=[];const s=this.vertices[r];for(const o in s.out){const a=this.vertices[o],l=s.out[o];!l||l.val==0||n&&l.val!=n||(!t||a.entityType===t)&&i.push(a)}return i}trustedBy(r,t,n,i=oa){let s=[];const o=this.vertices[r];for(const a in o.in){const l=this.vertices[a];if(!l||l.degree>i)continue;const u=o.in[a];!u||u.val==0||n&&u.val!=n||(!t||l.entityType===t)&&s.push(l)}return s}getPaths(r){let t=[];const n=this.vertices[r];if(!n)return t;let i=[],s=[];for(i.push(n);i.length>0;){for(let o of i)if(o.degree!=0)for(const a in o.in){const l=o.in[a];if(!l||l.val===0)continue;const u=l.out;!u||u.degree>=o.degree||(t.push(l),s.push(u))}i=s,s=[]}return t}getUnsubscribedVertices(r){let t=new Array;for(const n in this.vertices){const i=this.vertices[n];i.degree<=r&&i.subscribed==0&&i.entityType==1&&(i.degree==0||i.score.isTrusted(i.degree-1))&&t.push(i)}return t}}const BE=32010,Nq={PubSub:Ut,unsubs:new Map,subscribeTrust(e,r,t){let n=sn.enabledRelays(),i={kinds:[BE],authors:e,since:r};return Ut.relayPool.subscribe([i],n,(o,a,l)=>{setTimeout(()=>{t(o,a,l)},0)},0,void 0,{})},createTrustEventFromEdge(e){return this.createTrustEvent(e.to,e.type,e.note,e.context,e.entityType)},createMultiEvent(e,r,t,n="",i="nostr",s){const o=`${r}|${t.toString()}|${i}`,a=e.map(u=>[u.entityType==Fo.Key?"p":"e",u.pubkey]);return{kind:BE,content:n||"",created_at:s||this.getTimestamp(),tags:[...a,["d",o],["c",i],["v",t.toString()]]}},createTrustEvent(e,r,t="",n="nostr",i=1,s){const o=`${e}|${r.toString()}|${n}`,a=i==Fo.Key?"p":"e";return{kind:BE,content:t||"",created_at:s||this.getTimestamp(),tags:[[a,e],["d",o],["c",n],["v",r.toString()]]}},publishTrust(e,r,t,n,i,s){let o=this.createTrustEvent(e,r,t,n,i,s);this.sign(o),console.log("Publishing trust event",o),Ut.publish(o)},parseTrustEvent(e){let r=[],t=[],n="",i,s,o,a=e.pubkey,l=e.created_at;if(e.tags)for(const h of e.tags)switch(h[0]){case"p":r.push(h[1]);break;case"e":t.push(h[1]);break;case"c":i=h[1];break;case"d":n=h[1];break;case"v":s=h[1];break}o=e.content;let u=parseInt(s);return(isNaN(u)||u<-1||u>1)&&(u=0),{pTags:r,eTags:t,context:i,d:n,v:s,val:u,note:o,authorPubkey:a,timestamp:l}},sign(e){if(e.sig||(e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=me.getPubKey(),e.id=Ic(e),e.sig=c_(e,me.getPrivKey())),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event")},getTimestamp(e=Date.now()){return Math.floor(e/1e3)},loadProfiles(e){let r=e.filter(n=>!ct.profiles.has(vt(n))),t=n=>{if(!n.content||ct.profiles.get(vt(n.pubkey)))return;let s=JSON.parse(n.content);Fn.addProfileToMemory(s)};return Ut.subscribe({kinds:[0],authors:r},t,!1)}};class N_{constructor(r){le(this,"id",0);le(this,"oldScore");le(this,"oldDegree",0);le(this,"counter",0);this.id=r}hasChanged(r){return!this.oldScore||!this.oldScore.equals(r.score)||this.oldDegree!=r.degree}clone(){var t;let r=new N_(this.id);return r.oldScore=(t=this.oldScore)==null?void 0:t.clone(),r.oldDegree=this.oldDegree,r.counter=this.counter,r}setScore(r){this.oldScore=r==null?void 0:r.score.clone(),this.oldDegree=(r==null?void 0:r.degree)||0}}const ME="trustScoreEvent";class gp extends CustomEvent{constructor(r){super(ME,{detail:r})}static dispatch(r){!r||!(r!=null&&r.id)||r.id==0||document.dispatchEvent(new gp(r))}static add(r){document.addEventListener(ME,r)}static remove(r){document.removeEventListener(ME,r)}}const USe="trust1";class WSe{constructor(r,t){le(this,"db");le(this,"localDataLoaded",!1);le(this,"g",new zSe);le(this,"sourceKey");le(this,"sourceId",-1);le(this,"wotPubSub");le(this,"unsubs",{});le(this,"subscriptionsCounter",0);le(this,"verticeMonitor",Object.create(null));le(this,"maxDegree",oa);le(this,"readyCallbacks",[]);le(this,"processItems",{});le(this,"processGraph",!1);le(this,"processScoreDebounce",On.debounce(this.processScore,1e3,{trailing:!0}));le(this,"submitTrustIndex",{});le(this,"profilesLoaded",!1);this.wotPubSub=r,this.db=t}async init(r){if(this.sourceKey=r,!this.localDataLoaded){this.sourceId=vt(this.sourceKey),this.g.addVertice(this.sourceId),await this.db.edges.each(t=>{this.g.addEdge(t,!1)}),console.info("Graph: "+Object.entries(this.g.vertices).length+" vertices and "+Object.entries(this.g.edges).length+" edges"),this.processGraph=!0,this.processScore(),this.localDataLoaded=!0;for(let t of this.readyCallbacks)t();this.readyCallbacks=[]}}whenReady(r){this.localDataLoaded?r():this.readyCallbacks.push(r)}async publishTrust(r,t=0,n=Fo.Key,i,s="nostr"){var w;const o=(w=this.wotPubSub)==null?void 0:w.getTimestamp(),a={from:this.sourceKey,to:r,val:t,entityType:n,context:s,note:i,timestamp:o},{outV:l,inV:u,preVal:h,change:c}=await this.setTrust(a,!1);if(!c)return;this.addToProcessScoreQueue(l,u),this.processScore();let p=USe+this.sourceKey+r+s,m=this.submitTrustIndex[p];m||(m=On.debounce(async b=>{var T;h!=b&&((T=wr.wotPubSub)==null||T.publishTrust(r,b,i,s,n,o),delete this.submitTrustIndex[p])},3e3),this.submitTrustIndex[p]=m),m(t)}addToProcessScoreQueue(r,t){r.degree>this.maxDegree||(r.degree==this.maxDegree?this.processItems[t.id]=!0:t.entityType==Fo.Key?t.degree==this.maxDegree?this.processGraph=!0:this.processGraph=!0:this.processItems[t.id]=!0)}processScore(){let r=this.processGraph;if(this.processGraph)wr.g.calculateScore(wr.sourceId,this.maxDegree);else for(const t in wr.processItems)wr.g.calculateItemScore(parseInt(t)),r=!0;if(r){for(const t in wr.verticeMonitor)wr.callMonitor(parseInt(t));this.processGraph&&wr.updateSubscriptions(),this.processGraph=!1,this.processItems={}}}callMonitor(r){let t=wr.verticeMonitor[r];if(!t)return;let n=this.g.vertices[r];if(!n||!t.hasChanged(n))return;let i=t.clone();t.setScore(n),gp.dispatch(i)}addVerticeMonitor(r){let t=this.verticeMonitor[r];t||(t=new N_(r),this.verticeMonitor[r]=t),t.counter++}removeVerticeMonitor(r){let t=this.verticeMonitor[r];t&&(t.counter--,t.counter<=0&&delete this.verticeMonitor[r])}updateSubscriptions(){let r=this.g.getUnsubscribedVertices(this.maxDegree);this.subscribeToTrustEvents(r)}async setTrust(r,t){let{edge:n,preVal:i,change:s}=await this.putEdge(r,t),o=n==null?void 0:n.out,a=n==null?void 0:n.in;return{outV:o,inV:a,edge:n,preVal:i,change:s}}async putEdge(r,t){let{from:n,to:i,val:s,entityType:o,context:a,note:l,timestamp:u}=r,h=1,c,p=!1,m=Cq.key(h,n,i,a),w=this.g.edges[m];if(w){if(c=w.val,w.timestamp<u||w.val!=s&&w.timestamp==u){let b={timestamp:0};w.val!=s&&(w.val=b.val=s),w.context!=a&&(w.context=b.context=a),w.note!=l&&(w.note=b.note=l),w.timestamp=b.timestamp=u,w.val==0&&t?(await this.db.edges.delete(m),this.g.removeEdge(w),w=void 0):await this.db.edges.update(m,b),p=!0}}else{if(s==0&&t)return{edge:w,preVal:c,change:p};let b=new HSe;b.type=h,b.key=m,b.from=n,b.to=i,b.val=s,b.entityType=o,b.context=a,b.note=l,b.timestamp=u,await this.db.edges.put(b),w=this.g.addEdge(b,!1),p=!0}return{edge:w,preVal:c,change:p}}subscribeToTrustEvents(r){var o;if(r.length==0)return;let t=this,n=this.subscriptionsCounter++,i=0;const s=new Array;for(let a of r)i<a.timestamp&&(i=a.timestamp),s.push(En(a.id));r.forEach(a=>a.subscribed=n),t.unsubs[n]=(o=t.wotPubSub)==null?void 0:o.subscribeTrust(s,i,t.trustEvent)}unsubscribeAll(){var r,t;for(let n in this.unsubs)(t=(r=this.unsubs)[n])==null||t.call(r)}async trustEvent(r){let{pTags:t,eTags:n,val:i,authorPubkey:s,note:o,context:a,timestamp:l}=Nq.parseTrustEvent(r);console.info(`Trust Event (p): ${s} -> ${t.map(u=>u).join(",")} = ${i} (${o})`);for(const u of t)await wr.setTrustAndProcess(u,s,Fo.Key,i,o,a,l);for(const u of n)await wr.setTrustAndProcess(u,s,Fo.Item,i,o,a,l)}async setTrustAndProcess(r,t,n,i,s,o,a){if(!r||r.length<2)return;r=wr.getHexKey(r);let{outV:l,inV:u,change:h}=await wr.setTrust({from:t,to:r,val:i,note:s,context:o,entityType:n,timestamp:a},!0);h&&(wr.addToProcessScoreQueue(l,u),wr.processScoreDebounce())}findOption(r,t){if(!t||t.length===0||r.degree==0)return;let n=r.score,{val:i,degree:s,count:o,hasScore:a}=n.resolve();if(!a)return;if(s===1)return i>0?t[t.length-1]:i<0?t[0]:void 0;let l=(i+o)*100/(o*2),u=Math.ceil(l/(100/t.length));return u=u===0?1:u>t.length?t.length:u,t[u-1]}getTrustList(r,t){if(!r)return[];let n=new Array;for(const i in r.in){const s=this.g.getEdge(r.in[i]);let o=this.g.vertices[i];o&&s.val==t&&n.push({outV:o,edge:s})}return n}getHexKey(r){let t=r==null?void 0:r.slice(0,4).toLocaleLowerCase();if(t==="npub"||t==="nsec"||t==="note"){const{prefix:n,data:i}=$w(r);return xr.arrayToHex(i)}return r}}const wr=new WSe(Nq,uwe),bm=(e,r,t)=>{const[n,i]=Me({id:e,options:r,option:t});return St(()=>{function s(l){let u=wr.g.vertices[l.id];if(!u)return;let h=wr.findOption(u,r);i(c=>({...c,...l,option:h,vertice:u}))}const o=l=>{let u=l.detail;u.id==e&&s(u)};wr.addVerticeMonitor(e),gp.add(o);let a=new gp(new N_(e));return a!=null&&a.detail&&s(a.detail),()=>{wr.removeVerticeMonitor(e),gp.remove(o)}},[e]),n},Rq=e=>{const[r,t]=Me(()=>Fn.getMemoryProfile(vt(e)));return St(()=>{let n=vt(e),i=Fn.getMemoryProfile(n);r.created_at!=i.created_at&&t(i);const s=a=>{let l=a.detail;!l||l.id!=n||t(u=>l.created_at<=u.created_at?u:l)};$h.add(s);let o=Fn.subscribe(e);return()=>{$h.remove(s),o==null||o()}},[e]),r},$r=e=>{const r=Rq(e.pub),t=bm(vt(e.pub),["badName","neutralName","goodName"],"");return v(rt,{children:[v("span",{className:(r.isDefault?"text-neutral-500":"")+" "+(t==null?void 0:t.option),children:r.name||r.display_name||e.placeholder}),e.hideBadge?"":v(jSe,{pub:e.pub})]})},KSe=5;class AP extends Nn{constructor(){super();le(this,"searchFromServer",On.debounce(t=>{fetch(`https://eu.rbr.bio/search/${t}.json`).then(n=>{n.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{Fe.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(t){if(t.keyCode===38||t.keyCode===40){t.preventDefault();const n=this.state.selected;let i=t.keyCode===40?n+1:n-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){tr(this.base).find("input").val(""),this.setState({results:[],query:""})}componentDidMount(){var t;Re.get("showFollowSuggestions").on(this.inject()),Re.get("searchIndexUpdated").on(this.sub(()=>this.search())),Re.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),tr(document).off("keydown").on("keydown",n=>{var i;n.key==="Tab"&&((i=document.activeElement)==null?void 0:i.tagName)==="BODY"?(n.preventDefault(),tr(this.base).find("input").focus()):n.key==="Escape"&&(this.close(),tr(this.base).find("input").blur())}),this.props.focus&&((t=tr(this.base).find("input"))==null||t.focus())}componentDidUpdate(t,n){this.adjustResultsPosition(),t.focus!==this.props.focus&&tr(this.base).find("input:visible").focus(),t.query!==this.props.query&&this.search(),this.state.selected>=0&&!FSe(this.state.results.slice(0,this.state.selected+1),n.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){tr(document).off("keyup")}adjustResultsPosition(){const t=tr(this.base).find("input");t.length&&this.setState({offsetLeft:t[0].offsetLeft})}onSubmit(t){t.preventDefault();const n=tr(this.base).find("input");n.val(""),n.trigger("blur");const i=tr(this.base).find(".result.selected");i.length&&i[0].click()}preventUpDownDefault(t){(t.keyCode===38||t.keyCode===40)&&t.preventDefault()}search(){let t=this.props.query||tr(this.base).find("input").first().val()||"";if(t=t.toString().trim().toLowerCase(),!t){this.close();return}if(t.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){tr(this.base).find("input").first().val("");return}if(this.props.onSelect){if(t.match(/.+@.+\..+/)&&me.getPubKeyByNip05Address(t).then(o=>{var a,l;o&&t===String(this.props.query||tr(this.base).find("input").first().val())&&((l=(a=this.props).onSelect)==null||l.call(a,{key:o}))}),t.startsWith("https://iris.to/")){const o=t.replace("https://iris.to","");Sr(o);return}const n=t.match(/note[a-zA-Z0-9]{59,60}/gi);if(n){Sr("/"+n[0]);return}const i=t.match(/npub[a-zA-Z0-9]{59,60}/gi);if(i){Sr("/"+i[0]);return}const s=t.split("/profile/");if(s.length>1)return this.props.onSelect({key:s[1]});if(me.toNostrHexAddress(t))return this.props.onSelect({key:t})}if(this.searchFromServer(t),t){const n=fq.search(t).slice(0,KSe);this.setState({results:n,query:t})}else this.setState({results:[],query:t})}onClick(t,n){this.props.onSelect&&(t.preventDefault(),t.stopPropagation(),this.props.onSelect(n)),this.close()}onResultFocus(t,n){this.setState({selected:n})}render(){return v("div",{className:`relative ${this.props.class}`,children:[this.props.resultsOnly?"":v("form",{onSubmit:t=>this.onSubmit(t),children:v("label",{children:v("input",{type:"text",onKeyPress:t=>this.preventUpDownDefault(t),onKeyDown:t=>this.preventUpDownDefault(t),onKeyUp:t=>this.onKeyUp(t),placeholder:be("search"),tabIndex:1,onInput:()=>this.onInput(),className:"input-bordered border-neutral-500 input input-sm w-full"})})}),v("div",{onKeyUp:t=>this.onKeyUp(t),className:`${this.state.query?"":"hidden"} absolute z-20 left-0 mt-2 w-full bg-black border border-neutral-700 rounded shadow-lg`,children:[this.state.query&&!this.props.resultsOnly?v("a",{onFocus:t=>this.onResultFocus(t,-1),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(this.state.selected===-1?"selected bg-neutral-700":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[v("div",{class:"avatar-container",children:v("div",{style:"font-size: 1.5em; width: 40px",children:""})}),v("div",{children:[v("span",{children:this.state.query}),v("br",{}),v("small",{children:be("search_posts")})]})]}):"",this.state.results.map((t,n)=>{const i=t.item;let s="";i.followers&&(i.followDistance===0?s=be("you"):i.followDistance===1?s=be("following"):s=`${i.followers.size} ${be("followers")}`);const o=me.toNostrBech32Address(i.key,"npub");return v("a",{onFocus:a=>this.onResultFocus(a,n),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(n===this.state.selected?"selected bg-neutral-700":""),href:`/${o}`,onClick:a=>this.onClick(a,i),children:[i.picture?v(xa,{src:i.picture,className:"rounded-full",width:40}):v(Wi,{str:o,width:40},`${o}ic`),v("div",{children:[v($r,{pub:i.key},i.key+"searchResult"),v("br",{}),v("small",{children:s})]})]})})]})]})}}const Dq=(e,r,t)=>{const n=new FormData;n.append("fileToUpload",e),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:n}).then(async i=>{const s=await i.json();s&&r&&r(s)}).catch(i=>{console.error("upload error",i),t&&t("upload failed: "+JSON.stringify(i))})},OP=(e,r)=>r.indexOf(e.name.slice(-4))!==-1,LE=e=>OP(e,["webm",".mp4",".ogg"]),FE=e=>OP(e,[".mp3",".wav",".m4a"]),C6=e=>OP(e,[".jpg","jpeg",".gif",".png"]);class wm extends Nn{constructor(){super(...arguments);le(this,"coverRef",t_());le(this,"state",{settings:{},player:{},activeFilePath:"",torrent:{},isAudioOpen:!1,showFiles:!1,torrenting:!1,hasNext:!1,splitPath:null,ogImageUrl:""});le(this,"player");le(this,"torrent");le(this,"observer")}componentDidMount(){console.log("componentDidMount torrent"),Re.get("player").on(this.sub(n=>{if(this.player=n,this.setState({player:n}),this.torrent&&this.player&&this.player.filePath!==this.state.activeFilePath){const i=this.getActiveFile(this.torrent);i&&this.openFile(i)}}));const t=this.props.showFiles;t&&this.setState({showFiles:t}),Re.get("settings").on(this.inject()),(async()=>(this.props.standalone||await Re.get("settings").get("enableWebtorrent").once())&&this.startTorrenting())()}componentWillUnmount(){super.componentWillUnmount(),this.observer&&this.observer.disconnect(),delete this.observer}onPlay(t){t.target.muted||Re.get("player").get("paused").put(!0)}async startTorrenting(t){this.setState({torrenting:!0});const n=this.props.torrentId,{default:i}=await br(()=>import("./index-14fa9ce4.js").then(a=>a.i),[]),s=new i,o=s.get(n);o?this.onTorrent(o,t):s.add(n,(a,l)=>l&&!a&&this.onTorrent(l,t))}playAudio(t,n){n&&n.preventDefault(),Re.get("player").put({torrentId:this.props.torrentId,filePath:t,paused:!1})}pauseAudio(t){t&&t.preventDefault(),Re.get("player").put({paused:!0})}openFile(t,n){const i=this.base,s=LE(t),o=!s&&FE(t);if(this.state.activeFilePath===t.path){if(s){const m=i.querySelector("video");m&&m.play()}else o&&Re.get("player").get("paused").put(!1);return}let a;s||(a=t.path.split("/")),this.setState({activeFilePath:t.path,splitPath:a,isAudioOpen:o});let l,u;n?(l=!0,u=!1):(l=s&&this.state.settings.autoplayVideos,u=l);const h=i==null?void 0:i.querySelector(".player");if(h&&(h.innerHTML=""),o&&n&&this.playAudio(t.path),o||t.appendTo(h,{autoplay:l,muted:u}),s&&this.props.autopause){const m=i.querySelector("video"),w=T=>{T.forEach(_=>{_.isIntersecting?l&&(m==null||m.play()):m==null||m.pause()})},b={rootMargin:"0px",threshold:[.25,.75]};this.observer=new IntersectionObserver(w,b),this.observer.observe(m)}const c=i.querySelector(".info");c&&(c.style.display=s?"none":"block");const p=i.querySelector("video, audio");p&&(p.addEventListener("ended",()=>{const m=p.tagName==="VIDEO"?LE:FE;this.openNextFile(m)}),p.onplay=p.onvolumechange=this.onPlay)}getNextIndex(t){const n=this.state.torrent.files,i=n.findIndex(o=>o.path===this.state.activeFilePath);let s=n.findIndex((o,a)=>a>i&&t(o));return s===-1&&(s=n.findIndex(o=>t(o))),s===-1&&(s=i),s}openNextFile(t){const n=this.getNextIndex(t);this.openFile(this.state.torrent.files[n],!0)}getActiveFile(t){const n=this.player;let i;return n&&n.torrentId===this.props.torrentId&&(i=t.files.find(s=>s.path===n.filePath)),i}onTorrent(t,n){if(console.log("onTorrent",this.props.torrentId,t),!this.coverRef.current)return;this.torrent=t;const i=setInterval(()=>{if(!t.files){console.log("no files found in torrent:",t);return}clearInterval(i);const s=t.files.find(h=>LE(h)),o=t.files.find(h=>FE(h)),a=t.files.find(h=>C6(h)),l=this.getActiveFile(t)||s||o||a||t.files[0];this.setState({torrent:t,cover:a}),l&&this.openFile(l,n);let u=t.files.find(h=>C6(h)&&(h.name.indexOf("cover")>-1||h.name.indexOf("poster")>-1));u=u||a,u&&u.appendTo(this.coverRef.current)},1e3)}showFilesClicked(t){t.preventDefault(),this.setState({showFiles:!this.state.showFiles})}openTorrentClicked(t){t.preventDefault(),this.startTorrenting(!0)}renderLoadingTorrent(){const t=this.state,n=t.torrent,i=t.player,s=i&&i.torrentId===this.props.torrentId&&!i.paused;let o="";return t.isAudioOpen&&(o=s?v("a",{href:"#",onClick:a=>this.pauseAudio(a),children:Os.pause}):v("a",{href:"#",onClick:a=>this.playAudio(t.activeFilePath,a),children:Os.play})),v(rt,{children:[t.torrenting&&!t.torrent?v("p",{children:"Loading attachment..."}):null,v("div",{className:"cover",ref:this.coverRef,style:t.isAudioOpen?{}:{display:"none"}}),v("div",{className:"info",children:t.splitPath?t.splitPath.map((a,l)=>l===t.splitPath.length-1?(t.isAudioOpen&&(a=a.split(".").slice(0,-1).join(".")),v("p",{children:v("b",{children:a})})):v("p",{children:a})):null}),t.hasNext?v("b",{children:"prev"}):null,v("div",{className:"player",children:o}),t.hasNext?v("b",{children:"next"}):null,this.props.standalone||this.props.preview?v(rt,{children:[v("a",{href:this.props.torrentId,children:"Magnet link"}),n&&n.files?v("a",{href:"",style:{marginLeft:"30px"},onClick:a=>this.showFilesClicked(a),children:be(t.showFiles?"hide_files":"show_files")}):null]}):v(Kt,{href:`/torrent/${encodeURIComponent(this.props.torrentId)}`,children:be("show_files")}),t.showFiles&&n&&n.files?v(rt,{children:[v("p",{children:[be("peers"),": ",n.numPeers]}),v("div",{className:"flex-table details",children:n.files.map(a=>v("div",{onClick:()=>this.openFile(a,!0),className:`flex-row ${t.activeFilePath===a.path?"active":""}`,children:[v("div",{className:"flex-cell",children:a.name}),v("div",{className:"flex-cell no-flex",children:xr.formatBytes(a.length)})]},a.path))})]}):null]})}renderMeta(){const t=this.state,n=t.splitPath&&t.splitPath[t.splitPath.length-1].split(".").slice(0,-1).join(".")||"File sharing",i=`${n} | Iris`,s="Shared files",o=t.isAudioOpen?"music:song":"video.movie";return v(vh,{children:[v("title",{children:n}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:o}),v("meta",{property:"og:title",content:i}),v("meta",{property:"og:description",content:s}),t.ogImageUrl?v("meta",{property:"og:image",content:t.ogImageUrl}):null]})}render(){return v("div",{className:"torrent",children:[this.props.standalone?this.renderMeta():null,!this.state.settings.enableWebtorrent&&!this.state.settings.torrenting&&!this.props.standalone?v("a",{href:"",onClick:t=>this.openTorrentClicked(t),children:be("show_attachment")}):this.renderLoadingTorrent()]})}}const qSe=({attachments:e,torrentId:r,removeAttachments:t})=>v(rt,{children:[v(ft,{when:r,children:v(wm,{preview:!0,torrentId:r})}),v(ft,{when:e&&e.length,children:v("p",{children:v("a",{href:"",onClick:n=>{n.preventDefault(),t()},children:"Remove Attachment"})})}),e&&e.map(n=>{var s,o,a;const i=n.error?v("span",{class:"error",children:n.error}):n.url||"uploading...";return(s=n.type)!=null&&s.startsWith("audio")?v(rt,{children:[i,v("audio",{controls:!0,children:v("source",{src:n.data})})]}):(o=n.type)!=null&&o.startsWith("video")?v(rt,{children:[i,v("video",{controls:!0,loop:!0,autoPlay:!0,muted:!0,children:v("source",{src:n.data})})]}):(a=n.type)!=null&&a.startsWith("image")?v(rt,{children:[i,v(xa,{src:n.data})]}):"unknown attachment type"})]}),P6=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/;class $m extends Nn{componentDidMount(){const r=tr(this.base).find("textarea");if((!xr.isMobile||this.props.forceAutofocusMobile==!0)&&this.props.autofocus!==!1&&r.focus(),!this.props.replyingTo)Re.get("channels").get("public").get("msgDraft").once(t=>this.setState({text:t}));else{const t=window.history.state;t&&t["replyTo"+this.props.replyingTo]&&r.val(t["replyTo"+this.props.replyingTo])}}onMsgFormSubmit(r){r.preventDefault(),this.submit()}async submit(){this.props.replyingTo||Re.get("channels").get("public").get("msgDraft").put(null);const r=this.state.text;if(!r.length)return;const t={text:r};this.props.replyingTo&&(t.replyingTo=this.props.replyingTo),this.state.attachments&&(t.attachments=this.state.attachments),await Pwe(t),this.props.onSubmit&&this.props.onSubmit(t),this.setState({attachments:void 0,torrentId:void 0,text:""}),tr(this.base).find("textarea").height(""),this.saveDraftToHistory()}setTextareaHeight(r){r.style.height="",r.style.height=`${r.scrollHeight}px`}onMsgTextPaste(r){const t=r.clipboardData||window.clipboardData,n=t.getData("text"),s=/(magnet:\?xt=urn:btih:.*)/gi.exec(n);if(console.log("magnet match",s),s&&this.setState({torrentId:s[0]}),t.items){const o=t.items;for(let a=0;a<o.length;a++)if(o[a].type.startsWith("image/")){const l=o[a].getAsFile();Dq(l,u=>{const h=this.state.text;h?this.setState({text:h+`

`+u}):this.setState({text:u})},u=>{console.error(u)})}}}onKeyUp(r){[37,38,39,40].indexOf(r.keyCode)!=-1&&this.checkMention(r)}onKeyDown(r){(r.metaKey||r.ctrlKey)&&r.key==="Enter"&&this.submit()}saveDraftToHistory(){const r=this.state.text,n={...window.history.state};n["replyTo"+this.props.replyingTo]=r,window.history.replaceState(n,"")}onMsgTextInput(r){this.setTextareaHeight(r.target),this.props.replyingTo||Re.get("channels").get("public").get("msgDraft").put(tr(r.target).val()),this.checkMention(r),this.saveDraftToHistory(),this.setState({text:tr(r.target).val()})}attachFileClicked(r){r.stopPropagation(),r.preventDefault(),tr(this.base).find(".attachment-input").click()}handleFileAttachments(r){if(r){for(let t=0;t<r.length;t++){const n=new FormData;n.append("fileToUpload",r[t]);const i=this.state.attachments||[];i[t]=i[t]||{type:r[t].type},xr.getBase64(r[t]).then(s=>{i[t].data=s,this.setState({attachments:i})}),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:n}).then(async s=>{const o=await s.json();if(console.log("upload response",o),o){i[t].url=o,this.setState({attachments:i});const a=this.state.text;a?this.setState({text:a+`

`+o}):this.setState({text:o})}}).catch(s=>{console.error("upload error",s),i[t].error="upload failed",this.setState({attachments:i})})}tr(this.base).find("textarea").focus()}}attachmentsChanged(r){r.preventDefault();const t=r.target.files||r.dataTransfer.files;this.handleFileAttachments(t)}onSelectMention(r){const t=tr(this.base).find("textarea").get(0),n=t.selectionStart,i=[t.value.slice(0,n).replace(P6,"nostr:"),r.key,t.value.slice(n)].join("");t.value=`${i} `,t.focus(),t.selectionStart=t.selectionEnd=n+r.key.length}render(){const r=this.props.placeholder||(this.props.index==="media"?"type_a_message_or_paste_a_magnet_link":"type_a_message");return v("form",{autoComplete:"off",className:`message-form ${this.props.class||""} public`,onSubmit:t=>this.onMsgFormSubmit(t),children:[v(Awe,{onFilesChanged:t=>this.handleFileAttachments(t)}),v(Owe,{onMsgTextPaste:t=>this.onMsgTextPaste(t),onKeyUp:t=>this.onKeyUp(t),onKeyDown:t=>this.onKeyDown(t),onMsgTextInput:t=>this.onMsgTextInput(t),attachmentsChanged:t=>this.attachmentsChanged(t),placeholder:r,value:this.state.text}),v(ft,{when:this.state.mentioning,children:v(AP,{resultsOnly:!0,query:this.state.mentioning,onSelect:t=>this.onSelectMention(t)})}),v(ft,{when:!(this.props.waitForFocus&&!this.state.focused),children:v("div",{className:"flex items-center justify-between mt-4",children:[v("button",{type:"button",className:"attach-file-btn btn",onClick:t=>this.attachFileClicked(t),children:Os.attach}),v("button",{type:"submit",className:"btn btn-primary",children:be("post")})]})}),v(qSe,{attachments:this.state.attachments,torrentId:this.state.torrentId,removeAttachments:()=>this.setState({attachments:void 0})})]})}checkMention(r){const n=r.target.value.slice(0,r.target.selectionStart).match(P6);if(n){const i=n[0].slice(1);me.toNostrHexAddress(i)||this.setState({mentioning:i})}else this.state.mentioning&&this.setState({mentioning:void 0})}}var As=function(){return As=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},As.apply(this,arguments)};function Ny(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,s;n<i;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return e.concat(s||Array.prototype.slice.call(r))}var Jr="-ms-",ty="-moz-",Dr="-webkit-",Bq="comm",R_="rule",CP="decl",VSe="@import",Mq="@keyframes",GSe="@layer",YSe=Math.abs,PP=String.fromCharCode,HI=Object.assign;function ZSe(e,r){return ui(e,0)^45?(((r<<2^ui(e,0))<<2^ui(e,1))<<2^ui(e,2))<<2^ui(e,3):0}function Lq(e){return e.trim()}function Fl(e,r){return(e=r.exec(e))?e[0]:e}function or(e,r,t){return e.replace(r,t)}function W1(e,r){return e.indexOf(r)}function ui(e,r){return e.charCodeAt(r)|0}function Lp(e,r,t){return e.slice(r,t)}function Qa(e){return e.length}function Fq(e){return e.length}function Hg(e,r){return r.push(e),e}function XSe(e,r){return e.map(r).join("")}function N6(e,r){return e.filter(function(t){return!Fl(t,r)})}var D_=1,Fp=1,jq=0,Uo=0,Ln=0,bv="";function B_(e,r,t,n,i,s,o,a){return{value:e,root:r,parent:t,type:n,props:i,children:s,line:D_,column:Fp,length:o,return:"",siblings:a}}function nc(e,r){return HI(B_("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},r)}function Td(e){for(;e.root;)e=nc(e.root,{children:[e]});Hg(e,e.siblings)}function JSe(){return Ln}function QSe(){return Ln=Uo>0?ui(bv,--Uo):0,Fp--,Ln===10&&(Fp=1,D_--),Ln}function wa(){return Ln=Uo<jq?ui(bv,Uo++):0,Fp++,Ln===10&&(Fp=1,D_++),Ln}function nh(){return ui(bv,Uo)}function K1(){return Uo}function M_(e,r){return Lp(bv,e,r)}function zI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eke(e){return D_=Fp=1,jq=Qa(bv=e),Uo=0,[]}function tke(e){return bv="",e}function jE(e){return Lq(M_(Uo-1,UI(e===91?e+2:e===40?e+1:e)))}function rke(e){for(;(Ln=nh())&&Ln<33;)wa();return zI(e)>2||zI(Ln)>3?"":" "}function nke(e,r){for(;--r&&wa()&&!(Ln<48||Ln>102||Ln>57&&Ln<65||Ln>70&&Ln<97););return M_(e,K1()+(r<6&&nh()==32&&wa()==32))}function UI(e){for(;wa();)switch(Ln){case e:return Uo;case 34:case 39:e!==34&&e!==39&&UI(Ln);break;case 40:e===41&&UI(e);break;case 92:wa();break}return Uo}function ike(e,r){for(;wa()&&e+Ln!==47+10;)if(e+Ln===42+42&&nh()===47)break;return"/*"+M_(r,Uo-1)+"*"+PP(e===47?e:wa())}function ske(e){for(;!zI(nh());)wa();return M_(e,Uo)}function oke(e){return tke(q1("",null,null,null,[""],e=eke(e),0,[0],e))}function q1(e,r,t,n,i,s,o,a,l){for(var u=0,h=0,c=o,p=0,m=0,w=0,b=1,T=1,_=1,A=0,x="",I=i,O=s,C=n,g=x;T;)switch(w=A,A=wa()){case 40:if(w!=108&&ui(g,c-1)==58){W1(g+=or(jE(A),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:g+=jE(A);break;case 9:case 10:case 13:case 32:g+=rke(w);break;case 92:g+=nke(K1()-1,7);continue;case 47:switch(nh()){case 42:case 47:Hg(ake(ike(wa(),K1()),r,t,l),l);break;default:g+="/"}break;case 123*b:a[u++]=Qa(g)*_;case 125*b:case 59:case 0:switch(A){case 0:case 125:T=0;case 59+h:_==-1&&(g=or(g,/\f/g,"")),m>0&&Qa(g)-c&&Hg(m>32?D6(g+";",n,t,c-1,l):D6(or(g," ","")+";",n,t,c-2,l),l);break;case 59:g+=";";default:if(Hg(C=R6(g,r,t,u,h,i,a,x,I=[],O=[],c,s),s),A===123)if(h===0)q1(g,r,C,C,I,s,c,a,O);else switch(p===99&&ui(g,3)===110?100:p){case 100:case 108:case 109:case 115:q1(e,C,C,n&&Hg(R6(e,C,C,0,0,i,a,x,i,I=[],c,O),O),i,O,c,a,n?I:O);break;default:q1(g,C,C,C,[""],O,0,a,O)}}u=h=m=0,b=_=1,x=g="",c=o;break;case 58:c=1+Qa(g),m=w;default:if(b<1){if(A==123)--b;else if(A==125&&b++==0&&QSe()==125)continue}switch(g+=PP(A),A*b){case 38:_=h>0?1:(g+="\f",-1);break;case 44:a[u++]=(Qa(g)-1)*_,_=1;break;case 64:nh()===45&&(g+=jE(wa())),p=nh(),h=c=Qa(x=g+=ske(K1())),A++;break;case 45:w===45&&Qa(g)==2&&(b=0)}}return s}function R6(e,r,t,n,i,s,o,a,l,u,h,c){for(var p=i-1,m=i===0?s:[""],w=Fq(m),b=0,T=0,_=0;b<n;++b)for(var A=0,x=Lp(e,p+1,p=YSe(T=o[b])),I=e;A<w;++A)(I=Lq(T>0?m[A]+" "+x:or(x,/&\f/g,m[A])))&&(l[_++]=I);return B_(e,r,t,i===0?R_:a,l,u,h,c)}function ake(e,r,t,n){return B_(e,r,t,Bq,PP(JSe()),Lp(e,2,-2),0,n)}function D6(e,r,t,n,i){return B_(e,r,t,CP,Lp(e,0,n),Lp(e,n+1,-1),n,i)}function Hq(e,r,t){switch(ZSe(e,r)){case 5103:return Dr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Dr+e+e;case 4789:return ty+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Dr+e+ty+e+Jr+e+e;case 5936:switch(ui(e,r+11)){case 114:return Dr+e+Jr+or(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Dr+e+Jr+or(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Dr+e+Jr+or(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Dr+e+Jr+e+e;case 6165:return Dr+e+Jr+"flex-"+e+e;case 5187:return Dr+e+or(e,/(\w+).+(:[^]+)/,Dr+"box-$1$2"+Jr+"flex-$1$2")+e;case 5443:return Dr+e+Jr+"flex-item-"+or(e,/flex-|-self/g,"")+(Fl(e,/flex-|baseline/)?"":Jr+"grid-row-"+or(e,/flex-|-self/g,""))+e;case 4675:return Dr+e+Jr+"flex-line-pack"+or(e,/align-content|flex-|-self/g,"")+e;case 5548:return Dr+e+Jr+or(e,"shrink","negative")+e;case 5292:return Dr+e+Jr+or(e,"basis","preferred-size")+e;case 6060:return Dr+"box-"+or(e,"-grow","")+Dr+e+Jr+or(e,"grow","positive")+e;case 4554:return Dr+or(e,/([^-])(transform)/g,"$1"+Dr+"$2")+e;case 6187:return or(or(or(e,/(zoom-|grab)/,Dr+"$1"),/(image-set)/,Dr+"$1"),e,"")+e;case 5495:case 3959:return or(e,/(image-set\([^]*)/,Dr+"$1$`$1");case 4968:return or(or(e,/(.+:)(flex-)?(.*)/,Dr+"box-pack:$3"+Jr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Dr+e+e;case 4200:if(!Fl(e,/flex-|baseline/))return Jr+"grid-column-align"+Lp(e,r)+e;break;case 2592:case 3360:return Jr+or(e,"template-","")+e;case 4384:case 3616:return t&&t.some(function(n,i){return r=i,Fl(n.props,/grid-\w+-end/)})?~W1(e+(t=t[r].value),"span")?e:Jr+or(e,"-start","")+e+Jr+"grid-row-span:"+(~W1(t,"span")?Fl(t,/\d+/):+Fl(t,/\d+/)-+Fl(e,/\d+/))+";":Jr+or(e,"-start","")+e;case 4896:case 4128:return t&&t.some(function(n){return Fl(n.props,/grid-\w+-start/)})?e:Jr+or(or(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return or(e,/(.+)-inline(.+)/,Dr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qa(e)-1-r>6)switch(ui(e,r+1)){case 109:if(ui(e,r+4)!==45)break;case 102:return or(e,/(.+:)(.+)-([^]+)/,"$1"+Dr+"$2-$3$1"+ty+(ui(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~W1(e,"stretch")?Hq(or(e,"stretch","fill-available"),r,t)+e:e}break;case 5152:case 5920:return or(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,s,o,a,l,u){return Jr+i+":"+s+u+(o?Jr+i+"-span:"+(a?l:+l-+s)+u:"")+e});case 4949:if(ui(e,r+6)===121)return or(e,":",":"+Dr)+e;break;case 6444:switch(ui(e,ui(e,14)===45?18:11)){case 120:return or(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Dr+(ui(e,14)===45?"inline-":"")+"box$3$1"+Dr+"$2$3$1"+Jr+"$2box$3")+e;case 100:return or(e,":",":"+Jr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return or(e,"scroll-","scroll-snap-")+e}return e}function Jw(e,r){for(var t="",n=0;n<e.length;n++)t+=r(e[n],n,e,r)||"";return t}function lke(e,r,t,n){switch(e.type){case GSe:if(e.children.length)break;case VSe:case CP:return e.return=e.return||e.value;case Bq:return"";case Mq:return e.return=e.value+"{"+Jw(e.children,n)+"}";case R_:if(!Qa(e.value=e.props.join(",")))return""}return Qa(t=Jw(e.children,n))?e.return=e.value+"{"+t+"}":""}function uke(e){var r=Fq(e);return function(t,n,i,s){for(var o="",a=0;a<r;a++)o+=e[a](t,n,i,s)||"";return o}}function cke(e){return function(r){r.root||(r=r.return)&&e(r)}}function fke(e,r,t,n){if(e.length>-1&&!e.return)switch(e.type){case CP:e.return=Hq(e.value,e.length,t);return;case Mq:return Jw([nc(e,{value:or(e.value,"@","@"+Dr)})],n);case R_:if(e.length)return XSe(t=e.props,function(i){switch(Fl(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Td(nc(e,{props:[or(i,/:(read-\w+)/,":"+ty+"$1")]})),Td(nc(e,{props:[i]})),HI(e,{props:N6(t,n)});break;case"::placeholder":Td(nc(e,{props:[or(i,/:(plac\w+)/,":"+Dr+"input-$1")]})),Td(nc(e,{props:[or(i,/:(plac\w+)/,":"+ty+"$1")]})),Td(nc(e,{props:[or(i,/:(plac\w+)/,Jr+"input-$1")]})),Td(nc(e,{props:[i]})),HI(e,{props:N6(t,n)});break}return""})}}var hke={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jp=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",NP=typeof window<"u"&&"HTMLElement"in window,dke=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),L_=Object.freeze([]),Hp=Object.freeze({});function pke(e,r,t){return t===void 0&&(t=Hp),e.theme!==t.theme&&e.theme||r||t.theme}var zq=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),vke=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,gke=/(^-|-$)/g;function B6(e){return e.replace(vke,"-").replace(gke,"")}var yke=/(a)(d)/gi,M6=function(e){return String.fromCharCode(e+(e>25?39:97))};function WI(e){var r,t="";for(r=Math.abs(e);r>52;r=r/52|0)t=M6(r%52)+t;return(M6(r%52)+t).replace(yke,"$1-$2")}var HE,Gd=function(e,r){for(var t=r.length;t;)e=33*e^r.charCodeAt(--t);return e},Uq=function(e){return Gd(5381,e)};function Wq(e){return WI(Uq(e)>>>0)}function mke(e){return e.displayName||e.name||"Component"}function zE(e){return typeof e=="string"&&!0}var Kq=typeof Symbol=="function"&&Symbol.for,qq=Kq?Symbol.for("react.memo"):60115,bke=Kq?Symbol.for("react.forward_ref"):60112,wke={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$ke={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Vq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_ke=((HE={})[bke]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},HE[qq]=Vq,HE);function L6(e){return("type"in(r=e)&&r.type.$$typeof)===qq?Vq:"$$typeof"in e?_ke[e.$$typeof]:wke;var r}var xke=Object.defineProperty,Eke=Object.getOwnPropertyNames,F6=Object.getOwnPropertySymbols,Ske=Object.getOwnPropertyDescriptor,kke=Object.getPrototypeOf,j6=Object.prototype;function Gq(e,r,t){if(typeof r!="string"){if(j6){var n=kke(r);n&&n!==j6&&Gq(e,n,t)}var i=Eke(r);F6&&(i=i.concat(F6(r)));for(var s=L6(e),o=L6(r),a=0;a<i.length;++a){var l=i[a];if(!(l in $ke||t&&t[l]||o&&l in o||s&&l in s)){var u=Ske(r,l);try{xke(e,l,u)}catch{}}}}return e}function zp(e){return typeof e=="function"}function RP(e){return typeof e=="object"&&"styledComponentId"in e}function Vf(e,r){return e&&r?"".concat(e," ").concat(r):e||r||""}function KI(e,r){if(e.length===0)return"";for(var t=e[0],n=1;n<e.length;n++)t+=r?r+e[n]:e[n];return t}function Ry(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function qI(e,r,t){if(t===void 0&&(t=!1),!t&&!Ry(e)&&!Array.isArray(e))return r;if(Array.isArray(r))for(var n=0;n<r.length;n++)e[n]=qI(e[n],r[n]);else if(Ry(r))for(var n in r)e[n]=qI(e[n],r[n]);return e}function DP(e,r){Object.defineProperty(e,"toString",{value:r})}function _m(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(r.length>0?" Args: ".concat(r.join(", ")):""))}var Tke=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}return e.prototype.indexOfGroup=function(r){for(var t=0,n=0;n<r;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(r,t){if(r>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,s=i;r>=s;)if((s<<=1)<0)throw _m(16,"".concat(r));this.groupSizes=new Uint32Array(s),this.groupSizes.set(n),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(r+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[r]++,a++)},e.prototype.clearGroup=function(r){if(r<this.length){var t=this.groupSizes[r],n=this.indexOfGroup(r),i=n+t;this.groupSizes[r]=0;for(var s=n;s<i;s++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(r){var t="";if(r>=this.length||this.groupSizes[r]===0)return t;for(var n=this.groupSizes[r],i=this.indexOfGroup(r),s=i+n,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return t},e}(),V1=new Map,Qw=new Map,UE=1,Lb=function(e){if(V1.has(e))return V1.get(e);for(;Qw.has(UE);)UE++;var r=UE++;return V1.set(e,r),Qw.set(r,e),r},Ike=function(e,r){V1.set(e,r),Qw.set(r,e)},Ake="style[".concat(jp,"][").concat("data-styled-version",'="').concat("6.0.5",'"]'),Oke=new RegExp("^".concat(jp,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Cke=function(e,r,t){for(var n,i=t.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&e.registerName(r,n)},Pke=function(e,r){for(var t,n=((t=r.textContent)!==null&&t!==void 0?t:"").split(`/*!sc*/
`),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var l=a.match(Oke);if(l){var u=0|parseInt(l[1],10),h=l[2];u!==0&&(Ike(h,u),Cke(e,h,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(a)}}};function Nke(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Yq=function(e){var r=document.head,t=e||r,n=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(jp,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;n.setAttribute(jp,"active"),n.setAttribute("data-styled-version","6.0.5");var o=Nke();return o&&n.setAttribute("nonce",o),t.insertBefore(n,s),n},Rke=function(){function e(r){this.element=Yq(r),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,s=n.length;i<s;i++){var o=n[i];if(o.ownerNode===t)return o}throw _m(17)}(this.element),this.length=0}return e.prototype.insertRule=function(r,t){try{return this.sheet.insertRule(t,r),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},e.prototype.getRule=function(r){var t=this.sheet.cssRules[r];return t&&t.cssText?t.cssText:""},e}(),Dke=function(){function e(r){this.element=Yq(r),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(r,t){if(r<=this.length&&r>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[r]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},e.prototype.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),Bke=function(){function e(r){this.rules=[],this.length=0}return e.prototype.insertRule=function(r,t){return r<=this.length&&(this.rules.splice(r,0,t),this.length++,!0)},e.prototype.deleteRule=function(r){this.rules.splice(r,1),this.length--},e.prototype.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),H6=NP,Mke={isServer:!NP,useCSSOMInjection:!dke},Zq=function(){function e(r,t,n){r===void 0&&(r=Hp),t===void 0&&(t={});var i=this;this.options=As(As({},Mke),r),this.gs=t,this.names=new Map(n),this.server=!!r.isServer,!this.server&&NP&&H6&&(H6=!1,function(s){for(var o=document.querySelectorAll(Ake),a=0,l=o.length;a<l;a++){var u=o[a];u&&u.getAttribute(jp)!=="active"&&(Pke(s,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),DP(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(c){var p=function(_){return Qw.get(_)}(c);if(p===void 0)return"continue";var m=s.names.get(p),w=o.getGroup(c);if(m===void 0||w.length===0)return"continue";var b="".concat(jp,".g").concat(c,'[id="').concat(p,'"]'),T="";m!==void 0&&m.forEach(function(_){_.length>0&&(T+="".concat(_,","))}),l+="".concat(w).concat(b,'{content:"').concat(T,'"}').concat(`/*!sc*/
`)},h=0;h<a;h++)u(h);return l}(i)})}return e.registerId=function(r){return Lb(r)},e.prototype.reconstructWithOptions=function(r,t){return t===void 0&&(t=!0),new e(As(As({},this.options),r),this.gs,t&&this.names||void 0)},e.prototype.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(r=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new Bke(i):n?new Rke(i):new Dke(i)}(this.options),new Tke(r)));var r},e.prototype.hasNameForId=function(r,t){return this.names.has(r)&&this.names.get(r).has(t)},e.prototype.registerName=function(r,t){if(Lb(r),this.names.has(r))this.names.get(r).add(t);else{var n=new Set;n.add(t),this.names.set(r,n)}},e.prototype.insertRules=function(r,t,n){this.registerName(r,t),this.getTag().insertRules(Lb(r),n)},e.prototype.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},e.prototype.clearRules=function(r){this.getTag().clearGroup(Lb(r)),this.clearNames(r)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Lke=/&/g,Fke=/^\s*\/\/.*$/gm;function Xq(e,r){return e.map(function(t){return t.type==="rule"&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(n){return"".concat(r," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=Xq(t.children,r)),t})}function jke(e){var r,t,n,i=e===void 0?Hp:e,s=i.options,o=s===void 0?Hp:s,a=i.plugins,l=a===void 0?L_:a,u=function(p,m,w){return w===t||w.startsWith(t)&&w.endsWith(t)&&w.replaceAll(t,"").length>0?".".concat(r):p},h=l.slice();h.push(function(p){p.type===R_&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(Lke,t).replace(n,u))}),o.prefix&&h.push(fke),h.push(lke);var c=function(p,m,w,b){m===void 0&&(m=""),w===void 0&&(w=""),b===void 0&&(b="&"),r=b,t=m,n=new RegExp("\\".concat(t,"\\b"),"g");var T=p.replace(Fke,""),_=oke(w||m?"".concat(w," ").concat(m," { ").concat(T," }"):T);o.namespace&&(_=Xq(_,o.namespace));var A=[];return Jw(_,uke(h.concat(cke(function(x){return A.push(x)})))),A};return c.hash=l.length?l.reduce(function(p,m){return m.name||_m(15),Gd(p,m.name)},5381).toString():"",c}var Hke=new Zq,VI=jke(),Jq=ma.createContext({shouldForwardProp:void 0,styleSheet:Hke,stylis:VI});Jq.Consumer;ma.createContext(void 0);function z6(){return XC(Jq)}var Qq=function(){function e(r,t){var n=this;this.inject=function(i,s){s===void 0&&(s=VI);var o=n.name+s.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,s(n.rules,o,"@keyframes"))},this.name=r,this.id="sc-keyframes-".concat(r),this.rules=t,DP(this,function(){throw _m(12,String(n.name))})}return e.prototype.getName=function(r){return r===void 0&&(r=VI),this.name+r.hash},e}(),zke=function(e){return e>="A"&&e<="Z"};function U6(e){for(var r="",t=0;t<e.length;t++){var n=e[t];if(t===1&&n==="-"&&e[0]==="-")return e;zke(n)?r+="-"+n.toLowerCase():r+=n}return r.startsWith("ms-")?"-"+r:r}var eV=function(e){return e==null||e===!1||e===""},tV=function(e){var r,t,n=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!eV(s)&&(Array.isArray(s)&&s.isCss||zp(s)?n.push("".concat(U6(i),":"),s,";"):Ry(s)?n.push.apply(n,Ny(Ny(["".concat(i," {")],tV(s),!1),["}"],!1)):n.push("".concat(U6(i),": ").concat((r=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||r in hke||r.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function ih(e,r,t,n){if(eV(e))return[];if(RP(e))return[".".concat(e.styledComponentId)];if(zp(e)){if(!zp(s=e)||s.prototype&&s.prototype.isReactComponent||!r)return[e];var i=e(r);return ih(i,r,t,n)}var s;return e instanceof Qq?t?(e.inject(t,n),[e.getName(n)]):[e]:Ry(e)?tV(e):Array.isArray(e)?Array.prototype.concat.apply(L_,e.map(function(o){return ih(o,r,t,n)})):[e.toString()]}function Uke(e){for(var r=0;r<e.length;r+=1){var t=e[r];if(zp(t)&&!RP(t))return!1}return!0}var Wke=Uq("6.0.5"),Kke=function(){function e(r,t,n){this.rules=r,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&Uke(r),this.componentId=t,this.baseHash=Gd(Wke,t),this.baseStyle=n,Zq.registerId(t)}return e.prototype.generateAndInjectStyles=function(r,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(r,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Vf(i,this.staticRulesId);else{var s=KI(ih(this.rules,r,t,n)),o=WI(Gd(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=Vf(i,o),this.staticRulesId=o}else{for(var l=Gd(this.baseHash,n.hash),u="",h=0;h<this.rules.length;h++){var c=this.rules[h];if(typeof c=="string")u+=c;else if(c){var p=KI(ih(c,r,t,n));l=Gd(l,p),u+=p}}if(u){var m=WI(l>>>0);t.hasNameForId(this.componentId,m)||t.insertRules(this.componentId,m,n(u,".".concat(m),void 0,this.componentId)),i=Vf(i,m)}}return i},e}(),rV=ma.createContext(void 0);rV.Consumer;var WE={};function qke(e,r,t){var n=RP(e),i=e,s=!zE(e),o=r.attrs,a=o===void 0?L_:o,l=r.componentId,u=l===void 0?function(x,I){var O=typeof x!="string"?"sc":B6(x);WE[O]=(WE[O]||0)+1;var C="".concat(O,"-").concat(Wq("6.0.5"+O+WE[O]));return I?"".concat(I,"-").concat(C):C}(r.displayName,r.parentComponentId):l,h=r.displayName;h===void 0&&function(x){return zE(x)?"styled.".concat(x):"Styled(".concat(mke(x),")")}(e);var c=r.displayName&&r.componentId?"".concat(B6(r.displayName),"-").concat(r.componentId):r.componentId||u,p=n&&i.attrs?i.attrs.concat(a).filter(Boolean):a,m=r.shouldForwardProp;if(n&&i.shouldForwardProp){var w=i.shouldForwardProp;if(r.shouldForwardProp){var b=r.shouldForwardProp;m=function(x,I){return w(x,I)&&b(x,I)}}else m=w}var T=new Kke(t,c,n?i.componentStyle:void 0);function _(x,I){return function(O,C,g){var R=O.attrs,M=O.componentStyle,U=O.defaultProps,V=O.foldedComponentIds,ne=O.styledComponentId,re=O.target,Q=ma.useContext(rV),F=z6(),Z=O.shouldForwardProp||F.shouldForwardProp,se=function(it,_e,pe){for(var Te,je=As(As({},_e),{className:void 0,theme:pe}),$=0;$<it.length;$+=1){var S=zp(Te=it[$])?Te(je):Te;for(var N in S)je[N]=N==="className"?Vf(je[N],S[N]):N==="style"?As(As({},je[N]),S[N]):S[N]}return _e.className&&(je.className=Vf(je.className,_e.className)),je}(R,C,pke(C,Q,U)||Hp),Ee=se.as||re,ye={};for(var Pe in se)se[Pe]===void 0||Pe[0]==="$"||Pe==="as"||Pe==="theme"||(Pe==="forwardedAs"?ye.as=se.forwardedAs:Z&&!Z(Pe,Ee)||(ye[Pe]=se[Pe]));var Ue=function(it,_e){var pe=z6(),Te=it.generateAndInjectStyles(_e,pe.styleSheet,pe.stylis);return Te}(M,se),Ge=Vf(V,ne);return Ue&&(Ge+=" "+Ue),se.className&&(Ge+=" "+se.className),ye[zE(Ee)&&!zq.has(Ee)?"class":"className"]=Ge,ye.ref=g,Ye(Ee,ye)}(A,x,I)}var A=ma.forwardRef(_);return A.attrs=p,A.componentStyle=T,A.shouldForwardProp=m,A.foldedComponentIds=n?Vf(i.foldedComponentIds,i.styledComponentId):"",A.styledComponentId=c,A.target=n?i.target:e,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=n?function(I){for(var O=[],C=1;C<arguments.length;C++)O[C-1]=arguments[C];for(var g=0,R=O;g<R.length;g++)qI(I,R[g],!0);return I}({},i.defaultProps,x):x}}),DP(A,function(){return".".concat(A.styledComponentId)}),s&&Gq(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function W6(e,r){for(var t=[e[0]],n=0,i=r.length;n<i;n+=1)t.push(r[n],e[n+1]);return t}var K6=function(e){return Object.assign(e,{isCss:!0})};function BP(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(zp(e)||Ry(e)){var n=e;return K6(ih(W6(L_,Ny([n],r,!0))))}var i=e;return r.length===0&&i.length===1&&typeof i[0]=="string"?ih(i):K6(ih(W6(i,r)))}function GI(e,r,t){if(t===void 0&&(t=Hp),!r)throw _m(1,r);var n=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return e(r,t,BP.apply(void 0,Ny([i],s,!1)))};return n.attrs=function(i){return GI(e,r,As(As({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return GI(e,r,As(As({},t),i))},n}var nV=function(e){return GI(qke,e)},Kn=nV;zq.forEach(function(e){Kn[e]=nV(e)});function Vke(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=KI(BP.apply(void 0,Ny([e],r,!1))),i=Wq(n);return new Qq(i,n)}const Gke=Kn.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  justify-content: ${e=>e.centerVertically?"center":e.justifyContent||"flex-start"};
  align-items: center;
  overflow-y: auto;
  overflow-x: hidden;
`,Yke=Kn.div`
  width: ${e=>e.width||"auto"};
  height: ${e=>e.height||"auto"};
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
`,gl=({width:e,height:r,centerVertically:t,showContainer:n,children:i,onClose:s})=>{const o=h=>{h.key==="Escape"&&(s==null||s())},a=h=>{h.stopPropagation(),s==null||s()},l=h=>{h.stopPropagation()};St(()=>(document.body.style.overflow="hidden",window.addEventListener("keydown",o),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",o)}),[o]);const u=n?v("div",{className:"p-8 border-neutral-500 border-2 bg-black rounded-lg shadow-lg",style:{width:"600px","max-width":"calc(100vw - 40px)"},onClick:h=>l(h),children:i}):i;return v(Gke,{centerVertically:t,onClick:a,children:v(Yke,{width:e,height:r,children:u})})},Zke=[{url:"/",text:"home",icon:cz,activeIcon:hz},{url:"/search",text:"search",icon:pz,activeIcon:Os.magnifyingGlassBold},{url:"/chat",text:"messages",icon:n3,activeIcon:s3},{url:"/settings",text:"settings",icon:lz,activeIcon:rue},{url:"/about",text:"about",icon:jle,activeIcon:hue}];function Xke(){const[e,r]=Me(0),[t,n]=Me(""),[i,s]=Me(!1);St(()=>{const h=Re.get("unseenMsgsTotal").on(r),c=Re.get("activeRoute").on(n);return()=>{h(),c()}},[]),$a(()=>{const h=new Date;return h.getMonth()===2&&h.getDate()===17},[]);const o=()=>{Re.get("scrollUp").put(!0),window.scrollTo(0,0)},a=()=>v(gl,{centerVertically:!0,showContainer:!0,onClose:()=>s(!1),children:v($m,{onSubmit:()=>s(!1),placeholder:be("whats_on_your_mind"),autofocus:!0})}),l=()=>{const h=me.getPubKey(),c=me.toNostrBech32Address(h,"npub");return v("div",{className:"flex justify-center xl:justify-start",children:v(Kt,{href:`/${c}`,className:"btn btn-ghost md:max-xl:btn-circle",children:[v(Wi,{str:h,width:34}),v("div",{className:"hidden xl:block ml-2",children:v($r,{pub:h,hideBadge:!0})})]})})},u=h=>{const c=new RegExp(`^${h.url}(/|$)`).test(t),p=c?h.activeIcon:h.icon;return v("div",{children:v("a",{onClick:()=>o(),className:`${c?"active":""} inline-flex w-auto flex items-center space-x-4 p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900`,href:h.url,children:[v(ft,{when:h.text==="messages"&&e,children:v("span",{class:"unseen unseen-total",children:e})}),v(p,{width:26}),v("span",{className:"hidden xl:flex pr-2",children:be(h.text)})]})})};return v("div",{className:"sticky border-r border-neutral-900 top-0 z-20 h-screen max-h-screen hidden md:flex xl:w-56 flex-col px-2 py-4 flex-shrink-0",children:[v("a",{className:"flex items-center gap-3 px-2 mb-4",tabIndex:3,href:"/",onClick:()=>o(),children:[v("img",{src:"/img/dwotr/logo30.png",width:"30",height:"30"}),v("h1",{className:"hidden xl:flex text-3xl",children:"Dpeep"})]}),v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation/blob/main/Trust.md",target:"_blank",children:v("small",{className:"pl-3",children:"Iris clone with DWoTR"})}),v("div",{className:"flex flex-col gap-2",children:Zke.map(h=>u(h))}),v("div",{class:"py-2 flex-1",children:[v("button",{className:"btn btn-primary md:max-xl:btn-circle mt-2",onClick:()=>s(!i),children:[v(vz,{width:26}),v("span",{className:"hidden xl:flex",children:be("new_post")})]}),v(ft,{when:i,children:a()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),l()]})}const Jke={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const r=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(r.status===200){const n=await r.json();console.log("existingIrisToAddress",n),Re.get("existingIrisToAddress").put(n);const i=setTimeout(()=>{n!=null&&n.confirmed||Re.get("showNoIrisToAddress").put(!0)},1e3);return Re.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:n}}const t=setTimeout(()=>{Re.get("showNoIrisToAddress").put(!0)},2e3);Re.get("showNoIrisToAddress").on(n=>{n||clearTimeout(t)})},setAsPrimary(e){const r=e+"@iris.to",t=setTimeout(()=>{ct.setMetadata({nip05:r})},2e3);ct.getProfile(me.getPubKey(),n=>{n&&(clearTimeout(t),n.nip05!==r&&(n.nip05=r,ct.setMetadata(n)))})},async enableReserved(e){const r=me.getPubKey(),t={content:`iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Fe.getEventHash(t),t.sig=await me.sign(t);const n=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").put({confirmed:!0,name:e}),n.status===200)return{error:null,existing:{confirmed:!0,name:e}};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const r=me.getPubKey(),t={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Fe.getEventHash(t),t.sig=await me.sign(t);const n=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.status===200)return Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},q6=3e4;function iV(e){var r,t;return(t=(r=e.tags)==null?void 0:r.find(([n])=>n==="d"))==null?void 0:t[1]}function Qke(e){var r;return(r=e["#d"])==null?void 0:r[0]}class eTe{constructor(){le(this,"eventsByPathAndAuthor",new Map)}set(r){const t=iV(r);if(!t)return!1;this.eventsByPathAndAuthor.has(t)||this.eventsByPathAndAuthor.set(t,new Map);let n=this.eventsByPathAndAuthor.get(t);n||(n=new Map,this.eventsByPathAndAuthor.set(t,n));const i=n==null?void 0:n.get(r.pubkey);return i&&i.created_at>r.created_at?!1:(n.set(r.pubkey,r),!0)}get(r,t){const n=Qke(r);if(!n)throw new Error(`filter has no #d tag: ${JSON.stringify(r)}`);const i=this.eventsByPathAndAuthor.get(n);if(i)for(const[s,o]of i)(!r.authors||r.authors.indexOf(s)!==-1)&&t(o)}}class V6{constructor(r,t,n,i,s,o){le(this,"store");le(this,"listeners");le(this,"publish");le(this,"subscribe");le(this,"unsubscribe");le(this,"filter");le(this,"encrypt");le(this,"decrypt");this.publish=r,this.subscribe=t,this.unsubscribe=n,this.filter=i,this.encrypt=s,this.decrypt=o,this.store=new eTe,this.listeners=new Map}async publishSetEvent(r,t){let n;if(this.encrypt){const i=JSON.stringify(t);if(n=await this.encrypt(i),i===n)throw new Error(`Encryption failed: ${i} === ${n}`)}else n=JSON.stringify(t);return this.publish({kind:q6,tags:[["d",r]],content:n,created_at:Math.floor(Date.now()/1e3)})}async set(r,t){try{const n=await this.publishSetEvent(r,t);if(n)return this.store.set(n)&&this.notifyListeners(n),!0}catch(n){console.error(n)}return!1}async getEventValue(r){let t=this.decrypt?await this.decrypt(r.content):r.content;try{t=JSON.parse(t)}catch{throw new Error(`Failed to parse event content: ${t}`)}return t}get(r,t,n={}){n=Object.assign({},n,this.filter,{"#d":[r],kinds:[q6]});const i=this.addListener(n,t);return this.store.get(n,s=>this.callbackFromEvent(s,t)),this.subscribe([n],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(r,t){const n=Math.random().toString(36).substr(2,9),i={filter:r,callback:t,off:()=>{this.listeners.delete(n),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(n,i),i}removeListener(r){const t=this.listeners.get(r);t&&t.off()}callbackFromEvent(r,t){const n=iV(r);if(!n)throw new Error(`event has no d tag: ${JSON.stringify(r)}`);this.getEventValue(r).then(i=>{t(i,n,r)})}async notifyListeners(r){for(const t of this.listeners.values())P3(t.filter,r)&&this.callbackFromEvent(r,t.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}const _h={public:void 0,private:void 0,async logOut(){var e;if(Sr("/"),navigator.serviceWorker){const r=await navigator.serviceWorker.getRegistration();r&&r.pushManager&&((e=r.active)==null||e.postMessage({key:null}),await r.pushManager.getSubscription())}rl.clear(),localStorage.clear(),hn.clear().then(()=>{location.reload()})},unsubscribe(){},onLoggedIn(){const e=me.getPubKey(),r=vt(e);ct.followDistanceByUser.set(r,0),ct.followersByUser.set(r,new Set),ct.usersByFollowDistance.set(0,new Set([r]));const t=(s,o)=>{var u;const l=(u=s[0]["#d"])==null?void 0:u[0];if(l){const h=Fe.keyValueEvents.get(l);h&&o(h)}return Ut.subscribe(s[0],o,!0),"0"};Re.get("globalFilter").once(s=>{s||Re.get("globalFilter").put(Fe.DEFAULT_GLOBAL_FILTER)}),this.private=new V6((...s)=>Fe.publish(...s),t,()=>this.unsubscribe(),{authors:[e]},(...s)=>me.encrypt(...s),(...s)=>me.decrypt(...s)),this.public=new V6((...s)=>Fe.publish(...s),t,()=>this.unsubscribe(),{authors:[e]}),this.public.get("notifications/lastOpened",s=>{s!==Fe.notificationsSeenTime&&(Fe.notificationsSeenTime=s,Fe.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",s=>{if(s==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(s==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),sn.init(),Aw.loadEvents();const n=setTimeout(()=>{Jke.checkExistingAccount(e)},1e3);ct.getProfile(e,async s=>{s&&s.nip05&&s.nip05.endsWith("@iris.to")&&(Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").get("name").put(s.nip05.replace("@iris.to","")),clearTimeout(n))});const i=ct.getFollowersByUser(e,s=>{s!=null&&s.size?(Re.get("noFollowers").put(!1),i()):Re.get("noFollowers").put(!0)});setTimeout(()=>{Ut.subscribe({authors:[e]},void 0,!0),Ut.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),Ut.subscribe({"#p":[e],kinds:[4]},void 0,!1,!1),Ut.subscribe({authors:[e],kinds:[4]},void 0,!1,!1),Fe.subscribeGroups()},200),setInterval(()=>{console.log("handled msgs per second",Math.round(Fe.handledMsgsPerSecond/5)),Fe.handledMsgsPerSecond=0},5e3)},init:function(e){me.getOrCreate(e),Re.get("loggedIn").on(()=>this.onLoggedIn())}};let Dc=class extends Nn{constructor(){super();le(this,"key");le(this,"cls");le(this,"actionDone");le(this,"action");le(this,"activeClass");le(this,"hoverAction");le(this,"handleMouseEnter",()=>{this.setState({hover:!0})});le(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.key="follow",this.activeClass="following",this.action=be("follow_btn"),this.actionDone=be("following_btn"),this.hoverAction=be("unfollow_btn"),this.state={...this.state,hover:!1}}onClick(t){t.preventDefault();const n=!this.state[this.key],i=me.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){ct.setFollowed(i,n);return}this.key==="block"&&ct.setBlocked(i,n)}}componentDidMount(){if(this.key==="follow"){ct.getFollowedByUser(me.getPubKey(),t=>{const n=me.toNostrHexAddress(this.props.id),i=n&&(t==null?void 0:t.has(n));this.setState({follow:i})});return}}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`btn ${this.props.className||this.key} ${t?this.activeClass:""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:be(i)})}};function tTe({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const rTe=Or(tTe),nTe=rTe;function iTe({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const sTe=Or(iTe),oTe=sTe;function aTe({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const lTe=Or(aTe),uTe=lTe;let qc=class extends Nn{constructor(){super();le(this,"userId",null);le(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(t){t.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}setTitle(t){let n=t.split("/")[1]||be("follows");n.startsWith("note")?n=be("post"):n.startsWith("npub")?(this.userId=n,n=v($r,{pub:this.userId||""},`${this.userId}title`)):n=n.charAt(0).toUpperCase()+n.slice(1);const i=t.replace("/chat/new","").replace("/chat/","");if(t.indexOf("/chat/")===0&&t.indexOf("/chat/new")!==0&&(this.userId=i.length<t.length?i:null,t.indexOf("/chat/")===0&&this.userId===me.getPubKey()?n=v(rt,{children:[v("b",{className:"mr-5",children:""})," ",v("b",{children:be("note_to_self")})]}):n=v($r,{pub:this.userId||""},`${this.userId}title`)),t.indexOf("/search/")===0){let s=t.replace("/search/","");s.indexOf("?")!==-1&&(s=s.substring(0,s.indexOf("?"))),n=`${be("search")}: ${decodeURIComponent(s)}`}this.setState({title:n})}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),Re.get("showParticipants").on(this.inject()),Re.get("unseenMsgsTotal").on(this.inject()),Re.get("unseenNotificationCount").on(this.inject()),Re.get("showConnectedRelays").on(this.inject()),Re.get("isMyProfile").on(this.inject()),Re.get("activeRoute").on(this.sub(t=>{this.setState({about:null,activeRoute:t,showMobileSearch:!1}),this.setTitle(t)})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){window.scrollTo(0,0),this.userId&&this.userId.indexOf("hashtag")===-1&&Sr("/"+this.userId)}updateRelayCount(){this.setState({connectedRelays:sn.getConnectedRelayCount()})}renderSearchBox(){return this.userId?"":v(AP,{onSelect:t=>Sr(`/${t.key}`)})}renderConnectedRelays(){return v("a",{href:"/settings/network",className:`ml-2 tooltip tooltip-bottom mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,"data-tip":be("connected_relays"),children:v("small",{className:"flex items-center gap-2",children:[v("span",{class:"icon",children:Os.network}),v("span",{children:this.state.connectedRelays})]})})}renderTitle(){const t=this.state.activeRoute,n=["/","/global"].includes(t);return v("div",{className:"flex flex-1 items-center justify-center",onClick:()=>this.onTitleClicked(),children:[this.state.title,v(ft,{when:n,children:[v("button",{className:"ml-2 focus:outline-none rounded-full p-2",onClick:i=>{i.stopPropagation(),window.feed_selector_modal.showModal()},children:v(nTe,{width:20})}),v("dialog",{id:"feed_selector_modal",className:"modal focus:outline-none",children:[v("ul",{className:"modal-box p-2 shadow menu bg-base-100 rounded-box w-52 border-2 border-neutral-900 gap-2",children:[v("li",{children:v(Kt,{className:t==="/"?"active":"",href:"/",children:be("follows")})}),v("li",{children:v(Kt,{className:t==="/global"?"active":"",href:"/global",children:be("global_feed")})})]}),v("form",{method:"dialog",className:"modal-backdrop",children:v("button",{children:"close"})})]})]})]})}renderNotifications(){return v(rt,{children:[v(ft,{when:this.state.isMyProfile,children:v(Kt,{href:"/settings",className:"md:hidden",children:v(lz,{width:28})})}),v("a",{href:"/notifications",className:`relative inline-block ${this.state.isMyProfile?"hidden md:flex":""}`,children:[this.state.activeRoute==="/notifications"?v(i3,{width:28}):v(uz,{width:28}),v(ft,{when:this.state.unseenNotificationCount,children:v("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-iris-purple text-white text-sm rounded-full h-5 w-5 flex items-center justify-center",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount})})]})]})}renderLoginBtns(){return v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>Re.get("showLoginModal").put(!0),children:be("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>Re.get("showLoginModal").put(!0),children:be("sign_up")})]})}renderBackBtnOrLogo(){return this.state.activeRoute==="/"?v(rt,{children:v("div",{className:"flex flex-row items-center gap-2 md:hidden",children:[v("img",{src:"/img/dwotr/logo30.png",style:"padding-top:5px"}),v("h1",{className:"text-3xl",children:"Dpeep"})]})}):v(fz,{width:24,onClick:()=>this.backButtonClicked()})}render(){const n=!!me.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[this.renderBackBtnOrLogo(),v(ft,{when:n&&this.state.showConnectedRelays,children:this.renderConnectedRelays()}),this.renderTitle(),v(ft,{when:n,children:this.renderNotifications()}),v(ft,{when:!n,children:this.renderLoginBtns()})]})})})}};const Fb="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8",jb="npub1srpfc36pes9urzcnmrev38c9ypewahmggqc56dj7czr4k6zd4qcs4m5mn8";class cTe extends Nn{render(){return v(rt,{children:[v(qc,{}),v("div",{className:"main-view prose",id:"settings",children:v("div",{className:"px-2 md:px-4 py-2",children:[v("h2",{className:"mt-0",children:be("about")}),v("p",{children:["Dpeep, a clone of the innovative ",v("b",{children:"Iris.to"})," (",v("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"), serves as a proof-of-concept project for the integration of the Decentralized Web of Trust Reputation system (DWoTR). Apart from showcasing the unique benefits provided by the DWoTR system, Dpeep does not aim to offer additional significant functionality."]}),v("ul",{children:[v("li",{children:[v("b",{children:"Decentralized Web of Trust Reputation"})," system: a decentralized network that evaluates and displays trust based on each user's unique perspective."]}),v("li",{children:[v("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),v("li",{children:[v("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),v("li",{children:[v("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!xr.isStandalone()&&v(rt,{children:[v("h3",{children:"Versions"}),v("p",{children:v("ul",{children:v("li",{children:[v("a",{target:"_blank",href:"https://dpeep.com",children:"dpeep.com"})," ","(web)"]})})})]}),v("h3",{children:"Docs"}),v("p",{children:["Visit Iris ",v("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),v("p",{children:["Visit Dpeep ",v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation",children:"docs"})," explanations on the Decentralized Web of Trust Reputation system."]}),v("h3",{children:"Privacy"}),v("p",{children:be("application_security_warning")}),v("h3",{children:"Follow"}),v("div",{className:"flex flex-row items-center w-full justify-between",children:[v(Kt,{href:`/${Fb}`,className:"flex flex-row items-center gap-2",children:[v(Wi,{str:Fb,width:40}),v($r,{pub:Fb,placeholder:"Iris"})]}),v(Dc,{className:"btn btn-neutral btn-sm",id:Fb})]}),v("div",{className:"flex flex-row items-center w-full justify-between py-5",children:[v(Kt,{href:`/${jb}`,className:"flex flex-row items-center gap-2",children:[v(Wi,{str:jb,width:40}),v($r,{pub:jb,placeholder:"Iris"})]}),v(Dc,{className:"btn btn-neutral btn-sm",id:jb})]}),v("h3",{children:"Released under MIT license"}),v("p",{children:["Dpeep code:",v("a",{href:"https://github.com/DigitalTrustProtocol/Dpeep",children:"Github"}),"."]}),v("br",{})]})})]})}}class sV extends jn{constructor(){super(...arguments);le(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t.message}}componentDidCatch(t){console.error(t),this.setState({error:t.message})}render(){return this.state.error?v("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}function F_({date:e}){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;let o="";return t<n?o=be("now"):t<i?o=Math.floor(t/n)+"m":t<s?o=Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?o=e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):o=e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),v(rt,{children:o})}const fTe=gi(({event:e})=>{var r,t;return v("div",{className:"flex gap-4 w-full break-words",children:[v("div",{className:"flex-shrink-0",children:v(Kt,{href:`/${lu.npubEncode(e.pubkey)}`,children:v(Wi,{str:e.pubkey,width:30})})}),v(Kt,{href:`/${lu.noteEncode(e.id)}`,className:"w-full",children:[v("b",{children:v($r,{pub:e.pubkey})})," | ",v("span",{className:"text-neutral-400",children:[v(F_,{date:new Date(e.created_at*1e3)}),v("br",{}),((r=e.content)==null?void 0:r.length)>80?`${(t=e.content)==null?void 0:t.slice(0,80)}...`:e.content]})]})]},e.id)}),hTe=({events:e})=>{const r=[];return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:[v(sue,{width:20,className:"text-iris-orange"}),"Trending 24h"]}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-6 text-xs overflow-x-hidden",children:e.filter(t=>!r[t.pubkey]).map(t=>v(fTe,{event:t}))})]})},dTe=gi(hTe),oV=(e,r,t=n=>n)=>{const n=localStorage.getItem(r),i=n?JSON.parse(n).data:[],[s,o]=Me(i);return St(()=>{const a=()=>{fetch(e).then(l=>l.json()).then(l=>{const u=t(l);o(u),localStorage.setItem(r,JSON.stringify({data:u,timestamp:new Date().getTime()}))}).catch(()=>{if(n){const{data:l}=JSON.parse(n);o(l)}})};if(n){const{timestamp:l}=JSON.parse(n);(new Date().getTime()-l)/1e3/60>=15&&a()}else a()},[e,r,t]),s},pTe=gi(({pubkey:e})=>{var t,n;const r=Rq(e);return v(Kt,{href:`/${lu.npubEncode(e)}`,className:"flex flex-row gap-4 w-full break-words",children:[v("span",{className:"flex-shrink-0",children:v(Wi,{str:e,width:30})}),v("span",{className:"flex-1",children:[v("b",{children:v($r,{pub:e})}),v("br",{}),v("span",{className:"text-neutral-400",children:[(t=r==null?void 0:r.about)==null?void 0:t.slice(0,100),((n=r==null?void 0:r.about)==null?void 0:n.length)>100?"...":""]})]}),v("span",{className:"flex-shrink-0",children:v(Dc,{className:"btn btn-sm",id:e})})]},e)}),vTe=gi(()=>{const e=`https://api.nostr.band/v0/suggested/profiles/${me.getPubKey()}`,r=oV(e,"followSuggestions",n=>n.profiles||[]);if(!r.length)return null;const t=r.sort(()=>.5-Math.random()).slice(0,8).map(n=>n.pubkey);return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:"Follow suggestions"}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-4 items-center text-xs overflow-x-hidden",children:t.map(n=>v(pTe,{pubkey:n},n))})]})}),aV=e=>{const n=oV("https://api.nostr.band/v0/trending/notes","trendingNotes",i=>{const s=i.notes.map(o=>o.event);return s.forEach(o=>{Fe.handle(o)}),s});return v("div",{class:"sticky border-l border-neutral-900 top-0 right-0 px-4 py-2 mx-2 md:mx-0 flex flex-col gap-4 h-screen",children:[v(AP,{focus:e.focus,onSelect:({key:i})=>{Sr("/"+i)}}),v("div",{className:"max-h-[50vh] overflow-y-auto",children:v(dTe,{events:n})}),v("div",{className:"max-h-[50vh] overflow-y-auto",children:v(vTe,{})})]})};let lV=!0;const uV=function(){lV=!1,window.removeEventListener("popstate",uV)};window.addEventListener("popstate",uV);let yu=class extends Nn{constructor(){super(...arguments);le(this,"class","");le(this,"id","");le(this,"observer",null);le(this,"scrollPosition",0);le(this,"hideSideBar",!1);le(this,"hideHeader",!1);le(this,"saveScrollPosition",On.debounce(()=>{const t=window.scrollY||document.documentElement.scrollTop,i={...window.history.state,scrollPosition:t};window.history.replaceState(i,"")},100));le(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(t=>{t.forEach(()=>{this.restoreScrollPosition(!1)})}),this.observer.observe(document.body),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3)})}render(){return v("div",{className:"flex flex-row h-full w-full",children:[v("div",{className:`flex flex-col w-full h-full ${this.hideSideBar?"":"lg:w-2/3"}`,children:[v(ft,{when:!this.hideHeader,children:v(qc,{})}),v("div",{class:this.class,id:this.id,className:"h-full",children:v(sV,{children:this.renderView()})})]}),v(ft,{when:!this.hideSideBar,children:v("div",{className:"flex-col hidden lg:flex lg:w-1/3",children:v(aV,{focus:!1})})})]})}componentDidMount(){window.addEventListener("scroll",this.saveScrollPosition),this.restoreScrollPosition()}restoreScrollPosition(t=!0){var s,o;const n=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!lV&&n!==i)t&&this.observeScrollElement(),this.scrollPosition||(this.scrollPosition=(o=window.history.state)==null?void 0:o.scrollPosition),this.scrollPosition&&window.scrollTo(0,this.scrollPosition);else{const l={...window.history.state||{},previousState:n};window.history.replaceState(l,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect(),window.removeEventListener("scroll",this.saveScrollPosition)}};const gTe=({chat:e,active:r=!1,latestMsg:t={},name:n})=>{const i=o=>{o.keyCode===13&&o.target.click()},s=me.toNostrBech32Address(e,"npub");return v("div",{onKeyUp:i,role:"button",tabIndex:0,className:`p-2 ${r?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>Sr(`/chat/${s||e}`),children:v("div",{className:"flex gap-4 overflow-x-hidden",children:[v(Wi,{str:s||e,width:49}),v("div",{className:"flex flex-col",children:[v("span",{className:"name",children:[v(ft,{when:n,children:n}),v(ft,{when:!n,children:[v(ft,{when:e===me.getPubKey(),children:v("span",{className:"font-bold italic",children:[" ",be("note_to_self")]})}),v(ft,{when:e!==me.getPubKey(),children:v($r,{pub:e})}),v("small",{className:"ml-2 latest-time text-neutral-500",children:v(F_,{date:new Date(t.created_at*1e3)})})]})]}),v("small",{className:"text-neutral-500 truncate",children:t.text})]})]})})},yTe=gi(gTe),mTe=({active:e})=>v("div",{role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 h-16 items-center cursor-pointer hover:bg-neutral-900 ${e?"bg-neutral-700":""}`,onClick:()=>Sr("/chat/new"),children:[v("div",{className:"flex justify-center items-center w-12 h-12 rounded-full",children:v(vz,{className:"w-6 h-6"})}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:v("span",{className:"name",children:be("new_chat")})})})]}),bTe=(e,r)=>{const t=e.value.latest,n=r.value.latest;return t?n?n.created_at-t.created_at:-1:1},wTe=({activeChat:e,className:r})=>{const[t,n]=Me(new j3(bTe)),[i,s]=Me(0),o=Ps(null),a=()=>{Notification&&Notification.requestPermission().then(u=>{(u==="granted"||u==="denied")&&tr("#enable-notifications-prompt").slideUp()})};St(()=>{const u=[],h=(c,p)=>{n(m=>(m.set(p,{...c}),m)),s(m=>m+1)};return u.push(Re.get("chats").map(h)),u.push(Re.get("groups").map(h)),u.push(Re.get("scrollUp").on(()=>{window.scrollTo(0,0),o.current&&(o.current.scrollTop=0)})),()=>u.forEach(c=>c())},[]);const l=e&&me.toNostrHexAddress(e)||e;return v("section",{className:`md:border-r flex flex-shrink-0 border-neutral-800 overflow-x-hidden overflow-y-auto md:px-0 w-full md:w-64 ${r}`,ref:o,children:[v("div",{id:"enable-notifications-prompt",className:"hidden",onClick:a,children:[v("div",{className:"title",children:be("get_notified_new_messages")}),v("div",{children:v("a",{children:be("turn_on_desktop_notifications")})})]}),v("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[v(mTe,{active:l==="new"}),Array.from(t.entries()).map(([u,h])=>v(yTe,{active:u===l,chat:u,latestMsg:h==null?void 0:h.latest,name:h==null?void 0:h.name},u))]})]})},Ui=({copyStr:e,text:r,className:t})=>{const[n,i]=Me(!1),[s,o]=Me(void 0),[a,l]=Me(void 0),u=(p,m)=>{if(p.target===null)return;xr.copyToClipboard(m);const w=p.target,b=w.offsetWidth;b!==void 0&&(o(s||b+1),w.style.width=`${s}px`,i(!0),a!==void 0&&clearTimeout(a),l(setTimeout(()=>i(!1),2e3)))},h=p=>{p.preventDefault();const m=typeof e=="function"?e():e;u(p,m)};St(()=>()=>{a&&clearTimeout(a)},[a]);const c=n?be("copied"):r||be("copy");return v("button",{className:t||"btn",onClick:p=>h(p),children:c})};var $Te=function(e){return e instanceof RegExp},_Te=function(r){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return r&&n.test(r)?r.replace(t,"\\$&"):r},cV=function(e){return typeof e=="string"},xTe=function(e){var r=[];return e.forEach(function(t){Array.isArray(t)?r=r.concat(t):r.push(t)}),r};function ETe(e,r,t){var n=0,i=0;if(e==="")return e;if(!e||!cV(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=r;$Te(s)||(s=new RegExp("("+_Te(s)+")","gi"));for(var o=e.split(s),a=1,l=o.length;a<l;a+=2){if(o[a]===void 0||o[a-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=o[a].length,n+=o[a-1].length,o[a]=t(o[a],a,n),n+=i}return o}var STe=function(r,t,n){return Array.isArray(r)||(r=[r]),xTe(r.map(function(i){return cV(i)?ETe(i,t,n):i}))};const kTe=ro(STe),TTe={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableAppleMusic",component:({match:e})=>v("iframe",{className:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},ITe={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableAppleMusic",component:({match:e})=>{const r=e.includes("?i=")?"applepodcast-small":"applepodcast-large";return v("iframe",{className:r,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}},ATe=({each:e,children:r})=>e.map((t,n)=>r(t,n)),fV=({event:e,isQuote:r,standalone:t,fullWidth:n})=>v("span",{className:`flex flex-col items-center flex-shrink-0 ${n?"mr-2":"mr-4"}`,children:[v(ft,{when:e.pubkey,children:v(Kt,{href:`/${e.pubkey}`,children:v(Wi,{str:me.toNostrBech32Address(e.pubkey,"npub"),width:40})})}),v(ft,{when:r&&!t,children:v("div",{className:"border-l-2 border-neutral-700 h-full"})})]}),{bech32:el,hex:ha,utf8:OTe}=DW,G6={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},Y6={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Z6={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},X6={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Hb=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],CTe={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},PTe=BigInt("2100000000000000000"),J6=BigInt(1e11),YI={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},hV={};for(let e=0,r=Object.keys(YI);e<r.length;e++){const t=r[e],n=YI[r[e]].toString();hV[n]=t}const NTe={1:e=>ha.encode(el.fromWordsUnsafe(e)),16:e=>ha.encode(el.fromWordsUnsafe(e)),13:e=>OTe.encode(el.fromWordsUnsafe(e)),19:e=>ha.encode(el.fromWordsUnsafe(e)),23:e=>ha.encode(el.fromWordsUnsafe(e)),27:e=>ha.encode(el.fromWordsUnsafe(e)),6:e$,24:e$,3:DTe,5:BTe};function RTe(e){return r=>({tagCode:parseInt(e),words:el.encode("unknown",r,Number.MAX_SAFE_INTEGER)})}function e$(e){return e.reverse().reduce((r,t,n)=>r+t*Math.pow(32,n),0)}function DTe(e){const r=[];let t,n,i,s,o,a=el.fromWordsUnsafe(e);for(;a.length>0;)t=ha.encode(a.slice(0,33)),n=ha.encode(a.slice(33,41)),i=parseInt(ha.encode(a.slice(41,45)),16),s=parseInt(ha.encode(a.slice(45,49)),16),o=parseInt(ha.encode(a.slice(49,51)),16),a=a.slice(51),r.push({pubkey:t,short_channel_id:n,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return r}function BTe(e){const r=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;r.length<Hb.length*2;)r.push(!1);const t={};Hb.forEach((i,s)=>{let o;r[s*2]?o="required":r[s*2+1]?o="supported":o="unsupported",t[i]=o});const n=r.slice(Hb.length*2);return t.extra_bits={start_bit:Hb.length*2,bits:n,has_required:n.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},t}function dV(e,r){let t,n;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(n),s=t?i*J6/CTe[t]:i*J6;if(t==="p"&&i%BigInt(10)!==BigInt(0)||s>PTe)throw new Error("Amount is outside of valid range");return r?s.toString():s}function MTe(e,r){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const t=[],n=el.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=n.prefix;let s=n.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});const u=l[1];let h;if(r){if(r.bech32===void 0||r.pubKeyHash===void 0||r.scriptHash===void 0||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");h=r}else switch(u){case G6.bech32:h=G6;break;case Y6.bech32:h=Y6;break;case Z6.bech32:h=Z6;break;case X6.bech32:h=X6;break}if(!h||h.bech32!==u)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:u,value:h});const c=l[2];let p;if(c){const I=l[3];p=dV(c+I,!0),t.push({name:"amount",letters:l[2]+l[3],value:p})}else p=null;t.push({name:"separator",letters:"1"});const m=e$(s.slice(0,7));s=s.slice(7),t.push({name:"timestamp",letters:o.slice(0,7),value:m}),o=o.slice(7);let w,b,T,_;for(;s.length>0;){const I=s[0].toString();w=hV[I]||"unknown_tag",b=NTe[I]||RTe(I),s=s.slice(1),T=e$(s.slice(0,2)),s=s.slice(2),_=s.slice(0,T),s=s.slice(T),t.push({name:w,tag:o[0],letters:o.slice(0,1+2+T),value:b(_)}),o=o.slice(1+2+T)}t.push({name:"signature",letters:o.slice(0,104),value:ha.encode(el.fromWordsUnsafe(a))}),o=o.slice(104),t.push({name:"checksum",letters:o});let A={paymentRequest:e,sections:t,get expiry(){let I=t.find(O=>O.name==="expiry");if(I)return x("timestamp")+I.value},get route_hints(){return t.filter(I=>I.name==="route_hint").map(I=>I.value)}};for(let I in YI)I!=="route_hint"&&Object.defineProperty(A,I,{get(){return x(I)}});return A;function x(I){let O=t.find(C=>C.name===I);return O?O.value:void 0}}var LTe={decode:MTe,hrpToMillisat:dV};let Dy;const FTe={USD:"$",EUR:"",JPY:"",SATS:""};let _c="USD";const Q6=navigator.language,jTe=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];jTe.some(e=>Q6.startsWith(e))?_c="EUR":Q6.startsWith("ja")&&(_c="JPY");const pV=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+_c).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var r,t,n;Dy=parseFloat((n=(t=(r=e==null?void 0:e.result)==null?void 0:r["XXBTZ"+_c])==null?void 0:t.c)==null?void 0:n[0]),console.log("lastBitcoinPrice",Dy,_c)}).catch(e=>{console.error("Error:",e)})};Re.get("displayCurrency").on(e=>{_c=e,pV()});setTimeout(()=>{Dy||pV()},1e3);function vV(e){var r,t,n;try{const i=LTe.decode(e),s=i.sections.find(b=>b.name==="amount"),o=s?Number(s.value):void 0,a=i.sections.find(b=>b.name==="timestamp"),l=a?Number(a.value):void 0,u=i.sections.find(b=>b.name==="expiry"),h=u?Number(u.value):void 0,c=(r=i.sections.find(b=>b.name==="description"))==null?void 0:r.value,p=new Uint8Array((t=i.sections.find(b=>b.name==="description_hash"))==null?void 0:t.value),m=new Uint8Array((n=i.sections.find(b=>b.name==="payment_hash"))==null?void 0:n.value),w={amount:o,expire:l&&h?l+h:void 0,timestamp:l,description:c,descriptionHash:p?UT(p):void 0,paymentHash:m?UT(m):void 0,expired:!1};return w.expire&&(w.expired=w.expire<new Date().getTime()/1e3),w}catch(i){console.error(i)}}function HTe(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function zTe(e){let r;e>=1||e>=.01?r=2:r=4;const t=Math.pow(10,r);return e=Math.round(e*t)/t,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:r})}function ZI(e){if(Dy&&_c!=="SATS"){const r=e/1e8*Dy,t=zTe(r);return FTe[_c]+" "+t}else return HTe(e)}const By=(e,r=["red","grey","green"])=>r[e+1],UTe=(e,r=!1)=>!e||!r&&!e.hasTrustScore()?null:e.trusts.join("/"),WTe=(e,r=!1)=>!e||!r&&!e.hasDistrustScore()?null:e.distrusts.join("/"),MP=(e,r,t=!1)=>!e||!t&&!e.hasTrustScore()?null:v("a",{href:`/graph/${r}/in/trust/path`,className:"cursor-pointer hover:underline",title:"Trusts at degree 0/1/2",children:[UTe(e,t),"",v("span",{className:"text-neutral-500",children:"Trusts"})]}),LP=(e,r,t=!1)=>!e||!t&&!e.hasDistrustScore()?null:v("a",{href:`/graph/${r}/in/distrust/path`,className:"cursor-pointer hover:underline",title:"Distrusts at degree 0/1/2",children:[WTe(e,t),"",v("span",{className:"text-neutral-500",children:"Distrusts"})]}),KTe=gi(({data:e})=>{const r=e.pubkey.startsWith("npub")?e.pubkey:lu.npubEncode(e.pubkey);return v(Kt,{href:`/${r}`,className:"flex items-center gap-4",children:[v(Wi,{str:e.pubkey,width:40}),v("div",{className:"flex flex-col",children:[v($r,{pub:e.pubkey}),e.text&&v("small",{className:"text-neutral-500",children:e.text})]})]})}),qTe=({event:e,wot:r})=>{var A;const[t,n]=Me(new Set),[i,s]=Me(new Set),[o,a]=Me(new Map),[l,u]=Me(""),[h,c]=Me([]),[p,m]=Me(""),w=(A=r==null?void 0:r.vertice)==null?void 0:A.score,b=w==null?void 0:w.hasTrustScore(),T=w==null?void 0:w.hasDistrustScore();return St(()=>{const x=[],I=g=>{n(new Set(g))},O=g=>{s(new Set(g))},C=g=>{const R=new Map;let M=0;Array.from(g==null?void 0:g.values()).map(V=>Fe.db.by("id",V)).forEach(V=>{const ne=V==null?void 0:V.tags.find(Z=>Z[0]==="bolt11")[1];if(!ne){console.log("Invalid zap, missing bolt11 tag");return}const re=vV(ne),Q=((re==null?void 0:re.amount)||0)/1e3;M+=Q;const F=Fe.getZappingUser(V.id);if(F){const Z=R.get(F)||0;R.set(F,Z+Q)}}),a(R),u(M>0?ZI(M):"")};return x.push(Fe.getLikes(e.id,I)),x.push(Fe.getReposts(e.id,O)),x.push(Fe.getZaps(e.id,C)),()=>{x.forEach(g=>g())}},[e]),t.size>0||i.size>0||o.size>0?v(rt,{children:[v("hr",{className:"-mx-2 opacity-10 mt-2"}),h.length>0&&v(gl,{showContainer:!0,onClose:()=>c([]),children:[v("div",{className:"flex items-center justify-between mb-4",children:v("h2",{className:"text-xl font-bold",children:p})}),v("div",{className:"flex flex-col gap-4 overflow-y-auto max-h-[50vh]",children:h.map(x=>v(KTe,{data:x},x.pubkey))})]}),v("div",{className:"flex items-center gap-4 py-2",children:[t.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(t).map(I=>({pubkey:I}));c(x),m("Liked by")},className:"cursor-pointer hover:underline",children:[t.size," ",v("span",{className:"text-neutral-500",children:"Likes"})]})}),i.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(i).map(I=>({pubkey:I}));c(x),m("Reposted by")},className:"cursor-pointer hover:underline",children:[i.size," ",v("span",{className:"text-neutral-500",children:"Reposts"})]})}),(o==null?void 0:o.size)>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=[],I=[...o.entries()].sort((O,C)=>C[1]-O[1]);for(const[O,C]of I)x.push({pubkey:O,text:ZI(C)});c(x),m("Zapped by")},className:"cursor-pointer hover:underline",children:[o.size," ",v("span",{className:"text-neutral-500",children:"Zaps"}),l&&v("small",{className:"text-neutral-500",children:[" (",l,")"]})]})}),b&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:MP(w,me.toNostrBech32Address(e.id,"note"),!0)}),T&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:LP(w,me.toNostrBech32Address(e.id,"note"),!0)})]}),v("hr",{className:"-mx-2 opacity-10 mb-2"})]}):null};function t$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M19.42 4.44994C19.3203 4.38116 19.2053 4.3379 19.085 4.32395C18.9647 4.31 18.8428 4.32579 18.73 4.36994C17.5425 4.8846 16.2857 5.22155 15 5.36994C14.1879 5.15273 13.4127 4.81569 12.7 4.36994C11.7802 3.80143 10.763 3.40813 9.7 3.20994C8.41 3.08994 5.34 4.09994 4.7 4.30994C4.55144 4.36012 4.42234 4.4556 4.33086 4.58295C4.23938 4.71031 4.19012 4.86314 4.19 5.01994V19.9999C4.19 20.1989 4.26902 20.3896 4.40967 20.5303C4.55032 20.6709 4.74109 20.7499 4.94 20.7499C5.13891 20.7499 5.32968 20.6709 5.47033 20.5303C5.61098 20.3896 5.69 20.1989 5.69 19.9999V14.1399C6.93659 13.6982 8.23315 13.4127 9.55 13.2899C10.3967 13.4978 11.2062 13.8351 11.95 14.2899C12.8201 14.8218 13.7734 15.2038 14.77 15.4199H15C16.4474 15.2326 17.8633 14.8526 19.21 14.2899C19.3506 14.2342 19.4713 14.1379 19.5568 14.0132C19.6423 13.8885 19.6887 13.7411 19.69 13.5899V5.06994C19.6975 4.95258 19.6769 4.83512 19.63 4.7273C19.583 4.61947 19.511 4.5244 19.42 4.44994Z"})})}function r$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[v("g",{"clip-path":"url(#clip0)",children:[v("path",{d:"M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 20L26 28L41 7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]}),v("defs",{children:v("clipPath",{id:"clip0",children:v("rect",{width:"48",height:"48",fill:"white"})})})]})}const VTe=({event:e})=>{const[r,t]=Me({likes:0,liked:!1,likedBy:new Set});St(()=>{const o=ct.getProfile(e.pubkey,l=>{}),a=Fe.getLikes(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=me.getPubKey();t(l=>({...l,likes:o.size,liked:o.has(a),likedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.liked)},s=(o=!0)=>{if(o){const a=e.pubkey,l=me.toNostrHexAddress(e.id);l&&Fe.publish({kind:7,content:"+",tags:[["e",l],["p",a]]})}};return v("a",{className:`btn-ghost btn-sm justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${r.liked?"text-iris-red":"hover:text-iris-red text-neutral-500"}`,onClick:o=>i(o),children:[r.liked?v(i3,{width:18}):v(uz,{width:18}),r.likes||""]})},GTe=({event:e})=>{const[r,t]=Me({reposts:0,reposted:!1,repostedBy:new Set});St(()=>{const o=ct.getProfile(e.pubkey,l=>{}),a=Fe.getReposts(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=me.getPubKey();t(l=>({...l,reposts:o.size,reposted:o.has(a),repostedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.reposted)},s=(o=!0)=>{if(o){const a=e.pubkey,l=me.toNostrHexAddress(e.id);l&&Fe.publish({kind:6,tags:[["e",l,"","mention"],["p",a]],content:""})}};return v("a",{className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none ${r.reposted?"text-iris-green":"hover:text-iris-green text-neutral-500"}`,onClick:o=>i(o),children:[v(az,{width:18}),r.reposts||""]})},YTe="payRequest";var XI=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(XI||{});class kf extends Error{constructor(t,n){super(n);le(this,"code");this.code=t}}var pc,xs,Q$,gV;class ZTe{constructor(r){Gr(this,Q$);Gr(this,pc,void 0);Gr(this,xs,void 0);if(r=r.toLowerCase().trim(),r.startsWith("lnurl")){const t=xr.bech32ToText(r);if(!t.startsWith("http"))throw new kf(2,"Not a url");Eo(this,pc,new URL(t))}else if(r.match(/[\w.-]+@[\w.-]/)){const[t,n]=r.split("@");Eo(this,pc,new URL(`https://${n}/.well-known/lnurlp/${t}`))}else if(r.startsWith("https:"))Eo(this,pc,new URL(r));else if(r.startsWith("lnurlp:")){const t=new URL(r);t.protocol="https:",Eo(this,pc,t)}else throw new kf(2,"Could not determine service url")}async load(){const r=await fetch(Bn(this,pc).toString());r.ok&&(Eo(this,xs,await r.json()),Qn(this,Q$,gV).call(this))}async getInvoice(r,t,n){var l,u,h;const i=new URL(xr.unwrap((l=Bn(this,xs))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(c=>{const p=c.split("=");s.set(p[0],p[1])}),s.set("amount",Math.floor(r*1e3).toString()),t&&((u=Bn(this,xs))!=null&&u.commentAllowed)&&s.set("comment",t),(h=Bn(this,xs))!=null&&h.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(c=>`${c[0]}=${encodeURIComponent(c[1])}`).join("&");try{const c=await fetch(`${o}?${a}`);if(c.ok){const p=await c.json();if(console.debug("[LNURL]: ",p),p.status==="ERROR")throw new Error(p.reason);return p}else throw new kf(1,`Failed to fetch invoice (${c.statusText})`)}catch{throw new kf(1,"Failed to load callback")}}get canZap(){var r;return!!((r=Bn(this,xs))!=null&&r.nostrPubkey)}get zapperPubkey(){var r;return(r=Bn(this,xs))==null?void 0:r.nostrPubkey}get maxCommentLength(){var r;return((r=Bn(this,xs))==null?void 0:r.commentAllowed)??0}get min(){var r;return((r=Bn(this,xs))==null?void 0:r.minSendable)??1e3}get max(){var r;return((r=Bn(this,xs))==null?void 0:r.maxSendable)??1e11}}pc=new WeakMap,xs=new WeakMap,Q$=new WeakSet,gV=function(){var r,t;if(((r=Bn(this,xs))==null?void 0:r.tag)!==YTe)throw new kf(2,"Only LNURLp is supported");if(!((t=Bn(this,xs))!=null&&t.callback))throw new kf(2,"No callback url")};var zd;(function(){function e(x){this.mode=u.MODE_8BIT_BYTE,this.data=x,this.parsedData=[];for(var I=[],O=0,C=this.data.length;C>O;O++){var g=this.data.charCodeAt(O);g>65536?(I[0]=240|(1835008&g)>>>18,I[1]=128|(258048&g)>>>12,I[2]=128|(4032&g)>>>6,I[3]=128|63&g):g>2048?(I[0]=224|(61440&g)>>>12,I[1]=128|(4032&g)>>>6,I[2]=128|63&g):g>128?(I[0]=192|(1984&g)>>>6,I[1]=128|63&g):I[0]=g,this.parsedData=this.parsedData.concat(I)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(x,I){this.typeNumber=x,this.errorCorrectLevel=I,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function t(x,I){if(x.length==null)throw new Error(x.length+"/"+I);for(var O=0;O<x.length&&x[O]==0;)O++;this.num=new Array(x.length-O+I);for(var C=0;C<x.length-O;C++)this.num[C]=x[C+O]}function n(x,I){this.totalCount=x,this.dataCount=I}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function o(){var x=!1,I=navigator.userAgent,O;return/android/i.test(I)&&(x=!0,O=I.toString().match(/android ([0-9]\.[0-9])/i),O&&O[1]&&(x=parseFloat(O[1]))),x}function a(x,I){for(var O=1,C=l(x),g=0,R=b.length;R>=g;g++){var M=0;switch(I){case h.L:M=b[g][0];break;case h.M:M=b[g][1];break;case h.Q:M=b[g][2];break;case h.H:M=b[g][3]}if(M>=C)break;O++}if(O>b.length)throw new Error("Too long data");return O}function l(x){var I=encodeURI(x).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return I.length+(I.length!=x?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(x){for(var I=0,O=this.parsedData.length;O>I;I++)x.put(this.parsedData[I],8)}},r.prototype={addData:function(x){var I=new e(x);this.dataList.push(I),this.dataCache=null},isDark:function(x,I){if(0>x||this.moduleCount<=x||0>I||this.moduleCount<=I)throw new Error(x+","+I);return this.modules[x][I]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(x,I){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var O=0;O<this.moduleCount;O++){this.modules[O]=new Array(this.moduleCount);for(var C=0;C<this.moduleCount;C++)this.modules[O][C]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(x,I),this.typeNumber>=7&&this.setupTypeNumber(x),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,I)},setupPositionProbePattern:function(x,I){for(var O=-1;7>=O;O++)if(!(-1>=x+O||this.moduleCount<=x+O))for(var C=-1;7>=C;C++)-1>=I+C||this.moduleCount<=I+C||(this.modules[x+O][I+C]=O>=0&&6>=O&&(C==0||C==6)||C>=0&&6>=C&&(O==0||O==6)||O>=2&&4>=O&&C>=2&&4>=C)},getBestMaskPattern:function(){for(var x=0,I=0,O=0;8>O;O++){this.makeImpl(!0,O);var C=p.getLostPoint(this);(O==0||x>C)&&(x=C,I=O)}return I},createMovieClip:function(x,I,O){var C=x.createEmptyMovieClip(I,O),g=1;this.make();for(var R=0;R<this.modules.length;R++)for(var M=R*g,U=0;U<this.modules[R].length;U++){var V=U*g,ne=this.modules[R][U];ne&&(C.beginFill(0,100),C.moveTo(V,M),C.lineTo(V+g,M),C.lineTo(V+g,M+g),C.lineTo(V,M+g),C.endFill())}return C},setupTimingPattern:function(){for(var x=8;x<this.moduleCount-8;x++)this.modules[x][6]==null&&(this.modules[x][6]=x%2==0);for(var I=8;I<this.moduleCount-8;I++)this.modules[6][I]==null&&(this.modules[6][I]=I%2==0)},setupPositionAdjustPattern:function(){for(var x=p.getPatternPosition(this.typeNumber),I=0;I<x.length;I++)for(var O=0;O<x.length;O++){var C=x[I],g=x[O];if(this.modules[C][g]==null)for(var R=-2;2>=R;R++)for(var M=-2;2>=M;M++)this.modules[C+R][g+M]=R==-2||R==2||M==-2||M==2||R==0&&M==0}},setupTypeNumber:function(x){for(var I=p.getBCHTypeNumber(this.typeNumber),O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[Math.floor(O/3)][O%3+this.moduleCount-8-3]=C}for(var O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[O%3+this.moduleCount-8-3][Math.floor(O/3)]=C}},setupTypeInfo:function(x,I){for(var O=this.errorCorrectLevel<<3|I,C=p.getBCHTypeInfo(O),g=0;15>g;g++){var R=!x&&(1&C>>g)==1;6>g?this.modules[g][8]=R:8>g?this.modules[g+1][8]=R:this.modules[this.moduleCount-15+g][8]=R}for(var g=0;15>g;g++){var R=!x&&(1&C>>g)==1;8>g?this.modules[8][this.moduleCount-g-1]=R:9>g?this.modules[8][15-g-1+1]=R:this.modules[8][15-g-1]=R}this.modules[this.moduleCount-8][8]=!x},mapData:function(x,I){for(var O=-1,C=this.moduleCount-1,g=7,R=0,M=this.moduleCount-1;M>0;M-=2)for(M==6&&M--;;){for(var U=0;2>U;U++)if(this.modules[C][M-U]==null){var V=!1;R<x.length&&(V=(1&x[R]>>>g)==1);var ne=p.getMask(I,C,M-U);ne&&(V=!V),this.modules[C][M-U]=V,g--,g==-1&&(R++,g=7)}if(C+=O,0>C||this.moduleCount<=C){C-=O,O=-O;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(x,I,O){for(var C=n.getRSBlocks(x,I),g=new i,R=0;R<O.length;R++){var M=O[R];g.put(M.mode,4),g.put(M.getLength(),p.getLengthInBits(M.mode,x)),M.write(g)}for(var U=0,R=0;R<C.length;R++)U+=C[R].dataCount;if(g.getLengthInBits()>8*U)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*U+")");for(g.getLengthInBits()+4<=8*U&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*U||(g.put(r.PAD0,8),g.getLengthInBits()>=8*U));)g.put(r.PAD1,8);return r.createBytes(g,C)},r.createBytes=function(x,I){for(var O=0,C=0,g=0,R=new Array(I.length),M=new Array(I.length),U=0;U<I.length;U++){var V=I[U].dataCount,ne=I[U].totalCount-V;C=Math.max(C,V),g=Math.max(g,ne),R[U]=new Array(V);for(var re=0;re<R[U].length;re++)R[U][re]=255&x.buffer[re+O];O+=V;var Q=p.getErrorCorrectPolynomial(ne),F=new t(R[U],Q.getLength()-1),Z=F.mod(Q);M[U]=new Array(Q.getLength()-1);for(var re=0;re<M[U].length;re++){var se=re+Z.getLength()-M[U].length;M[U][re]=se>=0?Z.get(se):0}}for(var Ee=0,re=0;re<I.length;re++)Ee+=I[re].totalCount;for(var ye=new Array(Ee),Pe=0,re=0;C>re;re++)for(var U=0;U<I.length;U++)re<R[U].length&&(ye[Pe++]=R[U][re]);for(var re=0;g>re;re++)for(var U=0;U<I.length;U++)re<M[U].length&&(ye[Pe++]=M[U][re]);return ye};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(x){for(var I=x<<10;p.getBCHDigit(I)-p.getBCHDigit(p.G15)>=0;)I^=p.G15<<p.getBCHDigit(I)-p.getBCHDigit(p.G15);return(x<<10|I)^p.G15_MASK},getBCHTypeNumber:function(x){for(var I=x<<12;p.getBCHDigit(I)-p.getBCHDigit(p.G18)>=0;)I^=p.G18<<p.getBCHDigit(I)-p.getBCHDigit(p.G18);return x<<12|I},getBCHDigit:function(x){for(var I=0;x!=0;)I++,x>>>=1;return I},getPatternPosition:function(x){return p.PATTERN_POSITION_TABLE[x-1]},getMask:function(x,I,O){switch(x){case c.PATTERN000:return(I+O)%2==0;case c.PATTERN001:return I%2==0;case c.PATTERN010:return O%3==0;case c.PATTERN011:return(I+O)%3==0;case c.PATTERN100:return(Math.floor(I/2)+Math.floor(O/3))%2==0;case c.PATTERN101:return I*O%2+I*O%3==0;case c.PATTERN110:return(I*O%2+I*O%3)%2==0;case c.PATTERN111:return(I*O%3+(I+O)%2)%2==0;default:throw new Error("bad maskPattern:"+x)}},getErrorCorrectPolynomial:function(x){for(var I=new t([1],0),O=0;x>O;O++)I=I.multiply(new t([1,m.gexp(O)],0));return I},getLengthInBits:function(x,I){if(I>=1&&10>I)switch(x){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+x)}else if(27>I)switch(x){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+x)}else{if(!(41>I))throw new Error("type:"+I);switch(x){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+x)}}},getLostPoint:function(x){for(var I=x.getModuleCount(),O=0,C=0;I>C;C++)for(var g=0;I>g;g++){for(var R=0,M=x.isDark(C,g),U=-1;1>=U;U++)if(!(0>C+U||C+U>=I))for(var V=-1;1>=V;V++)0>g+V||g+V>=I||(U!=0||V!=0)&&M==x.isDark(C+U,g+V)&&R++;R>5&&(O+=3+R-5)}for(var C=0;I-1>C;C++)for(var g=0;I-1>g;g++){var ne=0;x.isDark(C,g)&&ne++,x.isDark(C+1,g)&&ne++,x.isDark(C,g+1)&&ne++,x.isDark(C+1,g+1)&&ne++,(ne==0||ne==4)&&(O+=3)}for(var C=0;I>C;C++)for(var g=0;I-6>g;g++)x.isDark(C,g)&&!x.isDark(C,g+1)&&x.isDark(C,g+2)&&x.isDark(C,g+3)&&x.isDark(C,g+4)&&!x.isDark(C,g+5)&&x.isDark(C,g+6)&&(O+=40);for(var g=0;I>g;g++)for(var C=0;I-6>C;C++)x.isDark(C,g)&&!x.isDark(C+1,g)&&x.isDark(C+2,g)&&x.isDark(C+3,g)&&x.isDark(C+4,g)&&!x.isDark(C+5,g)&&x.isDark(C+6,g)&&(O+=40);for(var re=0,g=0;I>g;g++)for(var C=0;I>C;C++)x.isDark(C,g)&&re++;var Q=Math.abs(100*re/I/I-50)/5;return O+=10*Q}},m={glog:function(x){if(1>x)throw new Error("glog("+x+")");return m.LOG_TABLE[x]},gexp:function(x){for(;0>x;)x+=255;for(;x>=256;)x-=255;return m.EXP_TABLE[x]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},w=0;8>w;w++)m.EXP_TABLE[w]=1<<w;for(var w=8;256>w;w++)m.EXP_TABLE[w]=m.EXP_TABLE[w-4]^m.EXP_TABLE[w-5]^m.EXP_TABLE[w-6]^m.EXP_TABLE[w-8];for(var w=0;255>w;w++)m.LOG_TABLE[m.EXP_TABLE[w]]=w;t.prototype={get:function(x){return this.num[x]},getLength:function(){return this.num.length},multiply:function(x){for(var I=new Array(this.getLength()+x.getLength()-1),O=0;O<this.getLength();O++)for(var C=0;C<x.getLength();C++)I[O+C]^=m.gexp(m.glog(this.get(O))+m.glog(x.get(C)));return new t(I,0)},mod:function(x){if(this.getLength()-x.getLength()<0)return this;for(var I=m.glog(this.get(0))-m.glog(x.get(0)),O=new Array(this.getLength()),C=0;C<this.getLength();C++)O[C]=this.get(C);for(var C=0;C<x.getLength();C++)O[C]^=m.gexp(m.glog(x.get(C))+I);return new t(O,0).mod(x)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(x,I){var O=n.getRsBlockTable(x,I);if(O==null)throw new Error("bad rs block @ typeNumber:"+x+"/errorCorrectLevel:"+I);for(var C=O.length/3,g=[],R=0;C>R;R++)for(var M=O[3*R+0],U=O[3*R+1],V=O[3*R+2],ne=0;M>ne;ne++)g.push(new n(U,V));return g},n.getRsBlockTable=function(x,I){switch(I){case h.L:return n.RS_BLOCK_TABLE[4*(x-1)+0];case h.M:return n.RS_BLOCK_TABLE[4*(x-1)+1];case h.Q:return n.RS_BLOCK_TABLE[4*(x-1)+2];case h.H:return n.RS_BLOCK_TABLE[4*(x-1)+3];default:return}},i.prototype={get:function(x){var I=Math.floor(x/8);return(1&this.buffer[I]>>>7-x%8)==1},put:function(x,I){for(var O=0;I>O;O++)this.putBit((1&x>>>I-O-1)==1)},getLengthInBits:function(){return this.length},putBit:function(x){var I=Math.floor(this.length/8);this.buffer.length<=I&&this.buffer.push(0),x&&(this.buffer[I]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],T=function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){function O(re,Q){var F=document.createElementNS("http://www.w3.org/2000/svg",re);for(var Z in Q)Q.hasOwnProperty(Z)&&F.setAttribute(Z,Q[Z]);return F}var C=this._htOption,g=this._el,R=I.getModuleCount();Math.floor(C.width/R),Math.floor(C.height/R),this.clear();var M=O("svg",{viewBox:"0 0 "+String(R)+" "+String(R),width:"100%",height:"100%",fill:C.colorLight});M.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),g.appendChild(M),M.appendChild(O("rect",{fill:C.colorDark,width:"1",height:"1",id:"template"}));for(var U=0;R>U;U++)for(var V=0;R>V;V++)if(I.isDark(U,V)){var ne=O("use",{x:String(U),y:String(V)});ne.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),M.appendChild(ne)}},x.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},x}(),_=document.documentElement.tagName.toLowerCase()==="svg",A=_?T:s()?function(){function x(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function I(R,M){var U=this;if(U._fFail=M,U._fSuccess=R,U._bSupportDataURI===null){var V=document.createElement("img"),ne=function(){U._bSupportDataURI=!1,U._fFail&&_fFail.call(U)},re=function(){U._bSupportDataURI=!0,U._fSuccess&&U._fSuccess.call(U)};return V.onabort=ne,V.onerror=ne,V.onload=re,V.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}U._bSupportDataURI===!0&&U._fSuccess?U._fSuccess.call(U):U._bSupportDataURI===!1&&U._fFail&&U._fFail.call(U)}if(this&&this._android&&this._android<=2.1){var O=1/window.devicePixelRatio,C=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(R,M,U,V,ne,re,Q,F){if("nodeName"in R&&/img/i.test(R.nodeName))for(var Z=arguments.length-1;Z>=1;Z--)arguments[Z]=arguments[Z]*O;else typeof F>"u"&&(arguments[1]*=O,arguments[2]*=O,arguments[3]*=O,arguments[4]*=O);C.apply(this,arguments)}}var g=function(R,M){this._bIsPainted=!1,this._android=o(),this._htOption=M,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=M.width,this._elCanvas.height=M.height,R.appendChild(this._elCanvas),this._el=R,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return g.prototype.draw=function(R){var M=this._elImage,U=this._oContext,V=this._htOption,ne=R.getModuleCount(),re=V.width/ne,Q=V.height/ne,F=Math.round(re),Z=Math.round(Q);M.style.display="none",this.clear();for(var se=0;ne>se;se++)for(var Ee=0;ne>Ee;Ee++){var ye=R.isDark(se,Ee),Pe=Ee*re,Ue=se*Q;U.strokeStyle=ye?V.colorDark:V.colorLight,U.lineWidth=1,U.fillStyle=ye?V.colorDark:V.colorLight,U.fillRect(Pe,Ue,re,Q),U.strokeRect(Math.floor(Pe)+.5,Math.floor(Ue)+.5,F,Z),U.strokeRect(Math.ceil(Pe)-.5,Math.ceil(Ue)-.5,F,Z)}this._bIsPainted=!0},g.prototype.makeImage=function(){this._bIsPainted&&I.call(this,x)},g.prototype.isPainted=function(){return this._bIsPainted},g.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},g.prototype.round=function(R){return R&&Math.floor(1e3*R)/1e3},g}():function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){for(var O=this._htOption,C=this._el,g=I.getModuleCount(),R=Math.floor(O.width/g),M=Math.floor(O.height/g),U=['<table style="border:0;border-collapse:collapse;">'],V=0;g>V;V++){U.push("<tr>");for(var ne=0;g>ne;ne++)U.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+R+"px;height:"+M+"px;background-color:"+(I.isDark(V,ne)?O.colorDark:O.colorLight)+';"></td>');U.push("</tr>")}U.push("</table>"),C.innerHTML=U.join("");var re=C.childNodes[0],Q=(O.width-re.offsetWidth)/2,F=(O.height-re.offsetHeight)/2;Q>0&&F>0&&(re.style.margin=F+"px "+Q+"px")},x.prototype.clear=function(){this._el.innerHTML=""},x}();zd=function(x,I){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},typeof I=="string"&&(I={text:I}),I)for(var O in I)this._htOption[O]=I[O];typeof x=="string"&&(x=document.getElementById(x)),this._android=o(),this._el=x,this._oQRCode=null,this._oDrawing=new A(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},zd.prototype.makeCode=function(x){this._oQRCode=new r(a(x,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(x),this._oQRCode.make(),this._el.title=x,this._oDrawing.draw(this._oQRCode),this.makeImage()},zd.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},zd.prototype.clear=function(){this._oDrawing.clear()},zd.CorrectLevel=h})();const e8=zd;function FP(e){const r=t_();return St(()=>{r.current&&new e8(r.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:e8.CorrectLevel.H})},[e.data]),v("div",{style:"border: 5px solid white; display: inline-block;",ref:r})}function XTe(e,r){const t=[];let n=0,i=e.length/r;for(;i>0;)t.push(e.slice(n,n+r)),n+=r,i-=1;return t}const JTe=Kn.span`
  color: var(--text-color);
  display: inline-block;
  cursor: pointer;
  padding: 10px;
  border-radius: 100px;
  margin: 5px;
  border: 1px solid transparent;
  background: var(--body-bg);
  &.active {
    background: var(--notify);
  }
`,QTe=Kn.div`
  background-color: var(--msg-content-background);
  border-radius: 8px;
  padding: 30px;
  width: 400px;
  color: var(--text-color);
  position: relative;
`,eIe=Kn.div`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: var(--text-color);
`;function tIe(e){const r=e.onClose||(()=>{}),{note:t,recipient:n}=e,i=1e3,s=[i,5e3,1e4,2e4,5e4,1e5,1e6],o={1e3:"",5e3:"",1e4:"",2e4:"",5e4:"",1e5:"",1e6:""},[a,l]=Me(),[u,h]=Me(e.invoice),[c,p]=Me(i),[m,w]=Me(),[b,T]=Me(),[_,A]=Me(),[x,I]=Me(),[O,C]=Me(1),[g,R]=Me(!1),[M,U]=Me(!1),V=a?M&&O!==4||a.maxCommentLength>0:!1;St(()=>{Re.get("defaultZapAmount").on(_e=>{const pe=parseInt(_e);p(pe),w(pe),console.log("defaultZapAmount",pe)})}),St(()=>{e.show&&(I(void 0),p(i),T(void 0),C(1),h(void 0),A(void 0))},[e.show]),St(()=>{_&&!_.url&&setTimeout(()=>{r()},1e3)},[_]),St(()=>{if(e.lnurl&&e.show)try{const _e=new ZTe(e.lnurl);l(_e),_e.load().then(()=>{U(_e.canZap)}).catch(pe=>Z(pe,"ln url error"))}catch(_e){_e instanceof Error&&I(_e.message)}},[e.lnurl,e.show]);const ne=$a(()=>{if(a){const _e=a.min/1e3,pe=a.max/1e3;return s.filter(Te=>Te>=_e&&Te<=pe)}return[]},[a]),re=$a(()=>XTe(ne,3),[ne]),Q=_e=>{I(void 0),p(_e)};async function F(){if(!c||!a)return null;let _e;if(n&&O!==4){let pe={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:me.getPubKey(),content:b||"",tags:[["e",t],["p",n],["relays",...sn.relays.keys()]]};const Te=Fe.getEventHash(pe);pe.id=Te;const je=await me.sign(pe);pe={...pe,sig:je},console.log("loadInvoice",pe),pe&&(_e=pe)}try{const pe=await a.getInvoice(c,b,_e);pe.pr&&(h(pe.pr),await Ee(pe))}catch(pe){Z(pe,"invoice fail")}}function Z(_e,pe){if(console.error("lnurl error",_e),_e instanceof kf)switch(_e.code){case XI.ServiceUnavailable:{I("messages.LNURLFail");return}case XI.InvalidLNURL:{I("messages.InvalidLNURL");return}}I(pe)}function se(){if(!a)return null;const _e=a.min/1e3,pe=a.max/1e3;return v("div",{className:"custom-amount flex",children:[v("input",{type:"number",min:_e,max:pe,className:"f-grow mr-10 input",placeholder:"Custom",value:m,onChange:Te=>w(parseInt(Te.target.value))}),v("button",{className:"btn btn-neutral",type:"button",disabled:!m,onClick:()=>Q(m??0),children:"Confirm"})]})}async function Ee(_e){var pe;try{if(window.webln){R(!0),await window.webln.enable();const Te=await((pe=window.webln)==null?void 0:pe.sendPayment((_e==null?void 0:_e.pr)??""));console.log(Te),A((_e==null?void 0:_e.successAction)??{})}}catch(Te){console.warn(Te),Te instanceof Error&&I(Te.toString())}finally{R(!1)}}function ye(_e,pe){return v("div",{className:"amounts",children:pe.map(Te=>v(JTe,{className:_e===Te?"active":"",onClick:()=>Q(Te),children:[o[Te]&&v(rt,{children:[o[Te],""]}),xr.formatAmount(Te,0)]},Te))})}function Pe(){return!a||u?null:v(rt,{children:[v("h3",{children:"Zap amount in sats"}),re.map(_e=>ye(c,_e)),se(),v("div",{className:"flex",children:V&&v("input",{className:"input",type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:M&&O!==4?250:a.maxCommentLength,onChange:_e=>T(_e.target.value)})}),(c??0)>0&&v("div",{style:"margin-top: 10px;",children:v("button",{class:"btn btn-primary",width:"100%",onClick:()=>F(),children:["Send ",xr.formatAmount(c,0)," sats"]})})]})}function Ue(){return _||!u?null:v(rt,{children:v("div",{className:"invoice",children:[e.notice&&v("b",{className:"error",children:e.notice}),g?v("h4",{children:"Paying"}):"",v("div",{className:"actions",children:u&&v(rt,{children:[v(FP,{data:u,link:`lightning:${u}`}),v("div",{style:"margin-top: 15px",children:[v(Ui,{copyStr:u,text:"Copy invoice"}),v("a",{className:"button",href:`lightning:${u}`,children:"Open wallet"})]})]})})]})})}function Ge(){return _?v("div",{className:"success-action",children:[v("p",{className:"paid",children:(_==null?void 0:_.description)??"Paid"}),_.url&&v("p",{children:v("a",{href:_.url,rel:"noreferrer",target:"_blank",children:_.url})})]}):null}const it=a!=null&&a.canZap?"Send zap to ":"Send sats to ";return e.show??!1?v(gl,{showContainer:!0,centerVertically:!0,onClose:r,children:v(QTe,{children:v("div",{className:"lnurl-tip",onClick:_e=>_e.stopPropagation(),children:[v(eIe,{className:"close",onClick:r,children:v(gz,{width:20,height:20})}),v("div",{className:"lnurl-header",children:v("h2",{children:[e.title||it,v($r,{pub:n||""})]})}),Pe(),x&&v("p",{className:"error",children:x}),Ue(),Ge()]})})}):null}const rIe=({event:e})=>{const[r,t]=Me({totalZapAmount:0,formattedZapAmount:"",zapped:!1,showZapModal:!1,lightning:void 0});St(()=>{const i=ct.getProfile(e.pubkey,o=>{if(!o)return;const a=o.lud16||o.lud06;t(l=>({...l,lightning:a}))}),s=Fe.getZaps(e.id,n);return()=>{i(),s()}},[e]);const n=On.debounce(i=>{const s=Array.from(i==null?void 0:i.values()).map(a=>Fe.db.by("id",a));let o=0;s.forEach(a=>{const l=a==null?void 0:a.tags.find(c=>c[0]==="bolt11")[1];if(!l){console.log("Invalid zap, missing bolt11 tag");return}const u=vV(l),h=((u==null?void 0:u.amount)||0)/1e3;o+=h}),t(a=>({...a,totalZapAmount:o,formattedZapAmount:o&&ZI(o)||""}))},1e3,{leading:!0});return r.lightning?v(rt,{children:[v("a",{onClick:i=>{i.preventDefault(),i.stopPropagation(),t(s=>({...s,showZapModal:!0}))},className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none
          ${r.zapped?"text-iris-orange":"text-neutral-500 hover:text-iris-orange"}`,children:[v(Sle,{width:18}),r.formattedZapAmount]}),r.showZapModal&&v(tIe,{show:!0,lnurl:r.lightning,note:e.id,recipient:e.pubkey,onClose:()=>t(i=>({...i,showZapModal:!1}))})]}):null},nIe=e=>{const[r,t]=Me({replyCount:0}),[n,i]=Me({trusted:!1,distrusted:!1}),s=e.event,o=e.wot;St(()=>Fe.getThreadRepliesCount(s.id,u),[s]),St(()=>{const p=o==null?void 0:o.vertice,m=p==null?void 0:p.score;i(w=>({...w,trusted:m==null?void 0:m.isDirectTrusted(),distrusted:m==null?void 0:m.isDirectDistrusted()}))},[o]);function a(p){p.preventDefault(),p.stopPropagation(),i(m=>{let w=m.trusted?0:1;return wr.publishTrust(s.id,w,Fo.Item),{...m,trusted:!m.trusted,distrusted:!1}})}function l(p){p.preventDefault(),p.stopPropagation(),i(m=>{let w=m.distrusted?0:-1;return wr.publishTrust(s.id,w,Fo.Item),{...m,trusted:!1,distrusted:!m.distrusted}})}const u=p=>{t(m=>({...m,replyCount:p}))};function h(){e.standalone?tr(document).find("textarea").focus():Sr(`/${me.toNostrBech32Address(e.event.id,"note")}`)}function c(){var p,m,w,b;return v(rt,{children:[v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.trusted?"trusted":"hover:trusted text-neutral-500"}`,onClick:T=>a(T),title:n.trusted?"Trusted":"Trust",children:[n.trusted?v(r$,{size:18,fill:"green",stroke:"currentColor"}):v(r$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((m=(p=o==null?void 0:o.vertice)==null?void 0:p.score)==null?void 0:m.renderTrustCount())||""]}),v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.distrusted?"distrusted":"hover:distrusted text-neutral-500"}`,onClick:T=>l(T),title:n.distrusted?"Distrusted":"Distrust",children:[n.distrusted?v(t$,{size:18,fill:"red",stroke:"currentColor"}):v(t$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((b=(w=o==null?void 0:o.vertice)==null?void 0:w.score)==null?void 0:b.renderDistrustCount())||""]})]})}return v(rt,{children:[e.standalone&&v(qTe,{event:e.event,wot:o}),v("div",{className:"flex gap-4",children:[v("a",{className:"btn-ghost btn-sm hover:bg-transparent hover:text-iris-blue btn content-center gap-2 rounded-none text-neutral-500",onClick:()=>h(),children:[v(Ile,{width:18}),v("span",{children:r.replyCount||""})]}),v(GTe,{event:e.event}),v(VTe,{event:e.event}),v(rIe,{event:e.event}),c()]})]})},iIe=gi(nIe);class jP extends Nn{constructor(){super();le(this,"key");le(this,"cls");le(this,"actionDone");le(this,"action");le(this,"activeClass");le(this,"hoverAction");le(this,"handleMouseEnter",()=>{this.setState({hover:!0})});le(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.cls="block-btn",this.key="blocked",this.activeClass="blocked",this.action=be("block"),this.actionDone=be("blocked"),this.hoverAction=be("unblock"),this.state={...this.state,hover:!1}}onClick(t){var s,o;t.preventDefault();const n=!this.state[this.key],i=me.toNostrHexAddress(this.props.id);i&&ct.block(i,n),(o=(s=this.props).onClick)==null||o.call(s,t)}componentDidMount(){ct.getBlockedUsers(t=>{const n=t==null?void 0:t.has(me.toNostrHexAddress(this.props.id));this.setState({blocked:n})})}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`${this.cls||this.key} ${t?this.activeClass:""} ${this.props.className||""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:v("span",{children:[be(i)," ",this.props.showName?v($r,{pub:this.props.id,hideBadge:!0}):""]})})}}const sIe=Kn.button`
  background: var(--button-bg);
  color: var(--button-color);
  border: var(--button-border);
  font-weight: bold;
  cursor: pointer;
  transition: all 0.25s ease;
  width: ${e=>e.width||"auto"};

  ${e=>e.small&&`
    padding: 5px 20px;
  `}

  &:hover,
  &:focus,
  &:active {
    background: var(--button-bg-hover);
    color: var(--button-color-hover);
  }
`,yp=Kn(sIe)`
  background: var(--button-primary-bg);
  color: var(--button-primary-color);
  border: var(--button-primary-border);

  &:hover,
  &:focus,
  &:active {
    background: var(--button-primary-bg-hover);
    color: var(--button-primary-color-hover);
  }
`,yV=({children:e})=>{const[r,t]=Me(!1),n=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),t(s))};return St(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&t(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),v("div",{className:"relative",onClick:i=>n(i,!r),onMouseEnter:i=>n(i,!0),onMouseLeave:i=>n(i,!1),children:[v("button",{className:"dropbtn btn btn-circle btn-sm btn-ghost text-neutral-500 pb-2",children:""}),v(ft,{when:r,children:v("div",{className:"absolute z-10 p-2 flex flex-col gap-2 right-0 w-56 rounded-md shadow-lg bg-black border-neutral-500 border-2",children:e})})]})},oIe=Kn.div`
  display: flex;
  flex-direction: column;

  & ul > li {
    font-size: large;
  }
  & ul > li:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,aIe=Kn.pre`
  overflow: auto;
  background-color: hsl(0, 0%, 16%);
  [data-theme='light'] & {
    background-color: hsl(0, 0%, 88%);
  }
  max-height: 400px;
  border-radius: 4px;
  padding: 0.7rem;
  font-family: monospace;
`,lIe=({event:e})=>{const[r,t]=Me(null);St(()=>{if(!(e!=null&&e.id))return;const i=Fe.getOriginalPostEventId(e),s=i&&Fe.eventsMetaDb.get(i);s&&t(s)},[e]);const n=Array.from((r==null?void 0:r.relays)||[]);return v(oIe,{children:[v("h2",{children:be("event_detail")}),v("p",{children:be("seen_on")}),n.length===0?v("p",{children:be("iris_api_source")}):v("ul",{children:n.map(i=>v("li",{children:i}))}),v(aIe,{children:v("code",{children:JSON.stringify({...e,meta:void 0,$loki:void 0},null,2)})})]})},uIe=Kn.div`
  text-align: left;
  max-width: 100%;
  user-select: text;
`,mV=e=>{const{event:r,id:t}=e,[n]=Me(!1),[i,s]=Me(!1),o=()=>s(!1),a=()=>{},l=w=>{if(w.preventDefault(),confirm("Delete message?")){const b=me.toNostrHexAddress(t);b&&Fe.publish({kind:5,content:"deleted",tags:[["e",b]]})}},u=w=>{w.preventDefault(),Re.get("mutedNotes").get(e.id).put(!n)},h=w=>{if(w.preventDefault(),confirm("Publicly report and hide message?")){const b=me.toNostrHexAddress(e.id);b&&e.event&&Fe.publish({kind:5,content:"reported",tags:[["e",b],["p",e.event.pubkey]]})}},c=w=>{w.preventDefault(),e.event&&xr.translateText(e.event.content).then(b=>{var T;(T=e.onTranslate)==null||T.call(e,b)})},p=w=>{w.preventDefault();const b=me.toNostrHexAddress(t);if(b){const T=Fe.db.by("id",b);T&&(console.log("broadcasting",b,T),Fe.publish(T))}},m=`https://iris.to/${me.toNostrBech32Address(t,"note")}`;return v("div",{children:[v(yV,{children:[v(Ui,{className:"btn btn-sm",text:be("copy_link"),copyStr:m},`${t}copy_link`),v(Ui,{className:"btn btn-sm",text:be("copy_note_ID"),copyStr:me.toNostrBech32Address(t,"note")||""},`${t}copy_id`),v("a",{className:"btn btn-sm",href:"#",onClick:u,children:be(n?"unmute_notifications":"mute_notifications")}),r?v(rt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:p,children:be("resend_to_relays")}),v("a",{className:"btn btn-sm",href:"#",onClick:c,children:be("translate")}),v(Ui,{className:"btn btn-sm",text:be("copy_raw_data"),copyStr:JSON.stringify(r,null,2)},`${t}copyRaw`),r.pubkey===me.getPubKey()?v("a",{className:"btn btn-sm",href:"#",onClick:l,children:be("delete")}):v(rt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:h,children:be("report_public")}),v(Dc,{className:"btn btn-sm",id:r==null?void 0:r.pubkey}),v(jP,{className:"btn btn-sm",onClick:a,id:r==null?void 0:r.pubkey,showName:!0})]}),v("a",{className:"btn btn-sm",href:"#",onClick:w=>{w.preventDefault(),s(!0)},children:be("event_detail")})]}):v(rt,{})]}),r&&i&&v(gl,{showContainer:!0,onClose:o,children:v(uIe,{children:[v(lIe,{event:r}),v(yp,{onClick:o,children:be("done")})]})})]})},cIe=({event:e,fullWidth:r,isQuote:t,standalone:n,setTranslatedText:i})=>{const{time:s,dateStr:o,timeStr:a}=$a(()=>{const l=new Date(e.created_at*1e3),u=l.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=l.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});return{time:l,dateStr:u,timeStr:h}},[e.created_at]);return v("div",{className:"flex items-center gap-2 justify-between",children:[v(ft,{when:r,children:v(fV,{event:e,isQuote:t,standalone:n,fullWidth:r})}),v("div",{className:"flex flex-col",children:v("div",{children:[v(Kt,{href:`/${me.toNostrBech32Address(e.pubkey,"npub")}`,className:"font-bold",children:v($r,{pub:e.pubkey})}),v("small",{className:"text-neutral-500",children:[v("span",{className:"mx-2",children:""}),v(Kt,{href:`/${me.toNostrBech32Address(e.id,"note")}`,className:"tooltip","data-tip":`${o} ${a}`,children:v(F_,{date:s})})]})]})}),v(ft,{when:!t,children:v("div",{className:"flex-1 flex items-center justify-end",children:v(mV,{id:e.id,event:e,onTranslate:i})})})]})},fIe=({attachments:e,name:r,text:t})=>{var a;const n=(a=e==null?void 0:e.find(l=>l.type==="image"))==null?void 0:a.data,s=`"${t.length>128?`${t.slice(0,128)}...`:t}"`,o=`${r||"User"} on Iris`;return v(vh,{titleTemplate:"%s",children:[v("title",{children:`${o}: ${s}`}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:"article"}),n?v("meta",{property:"og:image",content:n}):null,v("meta",{property:"og:title",content:o}),v("meta",{property:"og:description",content:s})]})},hIe=gi(fIe);let JI=!0,bV=!0,wV=!0,$V=!0;Re.get("settings").on(e=>{JI=e.loadReactions!==!1,bV=e.showLikes!==!1,wV=e.showZaps!==!1,$V=e.showReposts!==!1});const KE=500,qE=8,dIe=({standalone:e,isQuote:r,fullWidth:t,asInlineQuote:n,event:i,meta:s,wot:o})=>{var x;const[a,l]=Me(""),[u,h]=Me(!1),[c,p]=Me("");St(()=>{if(e)return ct.getProfile(i.pubkey,I=>{p((I==null?void 0:I.display_name)||(I==null?void 0:I.name)||"")})},[i.pubkey]);const m=((x=i.content)==null?void 0:x.length)===2&&xr.isEmoji(i.content);let w=i.content||"";const b=[],T=w.match(/(https?:\/\/[^\s]+)/g);T&&T.forEach(I=>{let O;try{O=new URL(I)}catch{console.log("invalid url",I);return}O.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&b.push({type:"image",data:`${O.href}`})}),w=w.length>KE&&!u&&!e?`${w.slice(0,KE)}...`:w;const _=w.split(`
`);w=_.length>qE&&!u&&!e?`${_.slice(0,qE).join(`
`)}...`:w;function A(){var I;return(b==null?void 0:b.length)>1||((I=i.content)==null?void 0:I.length)>KE||i.content.split(`
`).length>qE}return v("div",{className:"flex-grow",children:[v(cIe,{standalone:e,event:i,isQuote:r,fullWidth:t,setTranslatedText:l}),v(ft,{when:e,children:v(hIe,{name:c,text:w,attachments:b})}),v(ft,{when:s.torrentId,children:v(wm,{torrentId:s.torrentId,autopause:!e})}),v(ft,{when:(w==null?void 0:w.length)>0,children:v("div",{className:`preformatted-wrap pb-1 ${m&&"text-2xl"} ${t?"full-width-note":""} ${n?"inline-quote":""} ${o==null?void 0:o.option}`,children:[v(HP,{event:i,children:w}),v(ft,{when:a,children:v("p",{children:v("i",{children:a})})})]})}),v(ft,{when:!n&&!e&&A(),children:v("a",{className:"text-sm link mb-2",onClick:I=>{I.preventDefault(),h(!u)},children:be(`show_${u?"less":"more"}`)})}),v(ft,{when:!n&&JI,children:v(iIe,{settings:{showLikes:bV,showZaps:wV,showReposts:$V},standalone:e,event:i,wot:o},i.id+"reactions")}),v(ft,{when:r&&!JI,children:v("div",{style:{marginBottom:"15px"}})}),v(ft,{when:e,children:[v("hr",{className:"-mx-2 opacity-10 my-2"}),v($m,{waitForFocus:!0,autofocus:!e,replyingTo:i.id,placeholder:be("write_your_reply")})]})]})},pIe=gi(dIe),t8=({event:e,meta:r={},asInlineQuote:t=!1,isReply:n=!1,isQuote:i=!1,isQuoting:s=!1,showReplies:o=0,showRepliedMsg:a,standalone:l=!1,fullWidth:u})=>{const[h,c]=Me([]);!l&&o&&h.length&&(i=!0),r.replyingTo&&a&&(s=!0),a===void 0&&(a=l),u===void 0&&(u=!n&&!s&&!i&&!t);const p=bm(vt(e.id),["badMessage","neutralMessage","goodMessage"],""),m=$a(()=>{const A=[];return l?A.push(""):A.push("cursor-pointer transition-all ease-in-out duration-200 hover:bg-neutral-999"),i&&A.push("quote pb-2"),s?A.push("quoting pt-0"):A.push("pt-4"),t&&A.push("inline-quote border-2 border-neutral-900 rounded-lg my-2"),u&&A.push("full-width"),A.join(" ")},[l,i,s,t,u]);St(()=>{if(o)return Fe.getReplies(e.id,On.debounce(A=>{const x=Array.from(A).slice(0,o);x.sort((I,O)=>{const C=Fe.db.by("id",I),g=Fe.db.by("id",O);return C.created_at-g.created_at}),c(x)},500,{leading:!0,trailing:!0}))},[e.id,o]);let w=Fe.getEventRoot(e);w||(w=r.replyingTo);function b(A){var x,I;if(!l&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(O=>A.target.closest(O))&&!((x=window.getSelection())!=null&&x.toString())){if(A.stopPropagation(),e.kind===7){const O=(I=e.tags)==null?void 0:I.reverse().find(C=>C[0]==="e")[1];return Sr(`/${O}`)}Sr(`/${me.toNostrBech32Address(e.id,"note")}`)}}const T=v(ft,{when:r.replyingTo&&a,children:v(Wo,{id:r.replyingTo,isQuote:!0,showReplies:0},e.id+r.replyingTo)}),_=v(ft,{when:!l&&!n&&!s&&w,children:v(Kt,{className:"text-iris-blue text-sm block mb-2",href:`/${me.toNostrBech32Address(w||"","note")}`,children:be("show_thread")})});return v(rt,{children:[T,v("div",{className:`px-2 md:px-4 pb-2 ${m}`,onClick:A=>b(A),children:[_,v("div",{className:"flex flex-row",onClick:A=>b(A),children:[v(ft,{when:!u,children:v(fV,{event:e,isQuote:i,standalone:l,fullWidth:u})}),v(pIe,{event:e,meta:r,standalone:l,isQuote:i,asInlineQuote:t,fullWidth:u,wot:p})]})]},e.id+"note"),v(ft,{when:!(i||t),children:v("hr",{className:"opacity-10"})}),v(ATe,{each:h,children:A=>v(Wo,{id:A,isReply:!0,isQuoting:!l,showReplies:1},A)})]})};function vIe(e){var n;const t=((n=e.event.tags)==null?void 0:n.some(i=>i[0]==="p"&&i[1]===me.getPubKey()))?"started following you":"updated their following list";return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:{display:"flex",alignItems:"center"},children:[v("i",{className:"repost-btn reposted",style:{marginRight:15},children:Os.newFollower}),v(Kt,{href:`/${me.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v($r,{pub:e.event.pubkey})}),v("span",{className:"mar-left5",children:[" ",t]})]})})})}const gIe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),Sr(`/${me.toNostrBech32Address(r,"note")}`))};function yIe(e){var u;const[r,t]=Me([]),n=Fe.getEventReplyingTo(e.event),i=Fe.db.by("id",n),s=(i==null?void 0:i.pubkey)===me.getPubKey(),o=(u=i==null?void 0:i.tags)==null?void 0:u.find(h=>h[0]==="p"&&h[1]===me.getPubKey()),a=s?"liked your note":o?"liked a note where you were mentioned":"liked a note";if(St(()=>{if(n)return Fe.getLikes(n,h=>{t(Array.from(h))})},[n]),!n)return null;const l=`/${me.toNostrBech32Address(e.event.pubkey,"npub")}`;return v("div",{children:v("div",{onClick:h=>gIe(h,n),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"like-btn text-iris-red",children:v(i3,{width:18})}),v("span",{children:[v("a",{href:l,children:v($r,{pub:e.event.pubkey})}),r.length>1&&v(rt,{children:[" and ",r.length-1," others "]})," ",a]})]}),v(Wo,{id:n,fullWidth:!1},n+e.event.id)]})},e.event.id)}const mIe=Kn.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: black;
  border: 1px solid #333;
  border-radius: 4px;
`,bIe=Kn.div`
  flex: 1;
  max-width: 70%;
  display: flex;
  background: var(--main-color);
  justify-content: center;

  @media (max-width: 625px) {
    max-width: 100%;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
`,wIe=Kn.div`
  flex: 1;
  max-width: 30%;
  overflow-y: auto;
  background: var(--msg-content-background);

  @media (max-width: 625px) {
    display: none;
  }
`,$Ie=({event:e,onClose:r,attachment:t})=>v(gl,{width:"90%",height:"90%",centerVertically:!0,onClose:r,children:v(mIe,{children:[v(bIe,{children:t.type==="image"?v(xa,{className:"rounded-sm",src:t.url}):v("video",{loop:!0,autoPlay:!0,src:t.url,controls:!0,poster:`https://imgproxy.iris.to/thumbnail/428/${t.url}`})}),v(wIe,{children:v(Wo,{id:e.id,standalone:!0,showReplies:1/0})})]})}),_Ie=Vke`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`;function xIe({attachment:e}){return e.type==="video"?v("div",{style:{position:"absolute",top:"8px",right:"8px"},children:Os.video}):v(rt,{})}const EIe=Kn.img`
  display: none;
`,SIe=Kn.a`
  position: relative;
  aspect-ratio: 1;
  color: white;
  background-size: cover;
  background-position: center;
  background-color: #ccc;
  background-image: url(${e=>{var r;return((r=e.attachment)==null?void 0:r.type)==="video"?`https://imgproxy.iris.to/thumbnail/428/${e.attachment.url}`:e.proxyError?`${e.attachment.url}`:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${e.attachment.url}`}});
  & .dropdown {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
  }
  & .dropbtn {
    padding-top: 0px;
    margin-top: -5px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
    color: white;
    user-select: none;
  }
  &:hover {
    opacity: 0.8;
  }

  & svg {
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
  }

  opacity: ${e=>e.fadeIn?0:1};
  animation: ${e=>e.fadeIn?BP`
          ${_Ie} 0.5s ease-in-out forwards
        `:"none"};
`;function kIe(e){var u;const[r,t]=Me(-1),[n,i]=Me([]),s=h=>{i(c=>{const p=[...c];return p[h]=!0,p})};if(e.event.kind!==1){const h=Fe.getEventReplyingTo(e.event);return h?v(Wo,{id:h,renderAs:"NoteImage"}):null}const o=[],a=(u=e.event.content)==null?void 0:u.match(/(https?:\/\/[^\s]+)/g);a&&a.forEach(h=>{let c;try{c=new URL(h)}catch{console.log("invalid url",h);return}c.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&o.push({type:"image",url:c.href}),c.pathname.toLowerCase().match(/\.(mp4|mkv|avi|flv|wmv|mov|webm)$/)&&o.push({type:"video",url:c.href})});const l=(h,c)=>{window.innerWidth>625&&(h.preventDefault(),h.stopPropagation(),t(c))};return v(rt,{children:o.map((h,c)=>v(rt,{children:[v(SIe,{href:`/${me.toNostrBech32Address(e.event.id,"note")}`,onClick:p=>l(p,c),attachment:h,fadeIn:e.fadeIn,proxyError:n[c],children:v(xIe,{attachment:h})},e.event.id+c),h.type==="image"&&v(EIe,{src:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${h.url}`,onError:()=>s(c)}),r===c&&v($Ie,{attachment:h,onClose:()=>t(-1),event:e.event})]}))})}const TIe=gi(kIe);function r8(e){var i;const[r,t]=Me([]),n=Fe.getRepostedEventId(e.event)||"";return St(()=>{if(e.notification){const s=Fe.getReposts(n,o=>{t(Array.from(o))});return()=>s()}},[e.notification,n]),v("div",{children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{children:v(az,{width:18})}),v(Kt,{href:`/${me.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v($r,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),v("span",{children:[r.length>1&&`and ${r.length-1} others`," ",be("reposted")]})]}),v(Wo,{id:n,fullWidth:e.fullWidth},n+e.event.id)]})}const IIe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),Sr(`/${me.toNostrBech32Address(r,"note")}`))};function AIe(e){var h;const[r,t]=Me([]),n=Fe.getEventReplyingTo(e.event),i=Fe.db.by("id",n),s=(i==null?void 0:i.pubkey)===me.getPubKey(),o=(h=i==null?void 0:i.tags)==null?void 0:h.find(c=>c[0]==="p"&&c[1]===me.getPubKey()),a=s?"zapped your note":o?"zapped a note where you were mentioned":"zapped a note";if(St(()=>n?Fe.getZaps(n,c=>{t(Array.from(c.values()))}):()=>null,[n]),!n)return null;let l=null;try{l=Fe.getZappingUser(e.event.id)}catch(c){return console.error("no zapping user found for event",e.event.id,c),""}const u=`/${l}`;return v("div",{children:v("div",{onClick:c=>IIe(c,n||""),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"zap-btn text-iris-orange",children:v(Qle,{width:18,height:18})}),v("div",{children:[v("a",{href:u,children:v($r,{pub:l||""})}),r.length>1&&v("span",{children:[" and ",r.length-1," others "]})," ",a]})]}),v(Wo,{id:n,fullWidth:!1},n+e.event.id)]})})}const OIe=e=>{const[r,t]=Me({sortedReplies:[],meta:{},event:Fe.db.by("id",me.toNostrHexAddress(e.id))}),n=Ps(),i=Ps(!1),s=u=>{if(clearTimeout(n.current),i.current)return;r.retrieving&&t(p=>({...p,retrieving:!1}));const h=Fe.getNoteReplyingTo(u),c={npub:me.toNostrBech32Address(u.pubkey,"npub"),noteId:me.toNostrBech32Address(u.id,"note"),time:u.created_at*1e3,isMine:me.getPubKey()===u.pubkey,attachments:[],replyingTo:h};t(p=>({...p,event:u,meta:c}))};St(()=>{if(!e.id){console.log("error: no id",e);return}i.current=!1;const u=me.toNostrHexAddress(e.id);return n.current=setTimeout(()=>{t(h=>({...h,retrieving:!0}))},1e3),u&&Fe.getEventById(u,!0,h=>s(h)),()=>{i.current=!0}},[]),St(()=>{e.standalone&&!r.msg&&r.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const o=()=>e.asInlineQuote?null:v(mV,{id:e.id||"",event:r.event}),a=()=>{var c;let u="msg";return e.standalone&&(u+=" standalone"),(e.isQuote||e.showReplies&&((c=r.sortedReplies)==null?void 0:c.length))&&(u+=" quote"),u};return e.id?r.event?ct.isBlocked(r.event.pubkey)?e.standalone||e.isQuote?v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("p",{style:{display:"flex",alignItems:"center"},children:[v("i",{style:{marginRight:"15px"},children:Os.newFollower}),v("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var h,c,p;let u=t8;if(r.event.kind===1){const m=(c=(h=r.event)==null?void 0:h.tags)==null?void 0:c.findIndex(w=>w[0]==="e"&&w[3]==="mention");((p=r.event)==null?void 0:p.content)===`#[${m}]`&&(u=r8)}else u={1:t8,3:vIe,6:r8,7:yIe,9735:AIe}[r.event.kind];return e.renderAs==="NoteImage"&&(u=TIe),u?v(u,{className:a(),event:r.event,meta:r.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<r.event.created_at,...e},e.id):(console.error("unknown event kind",r.event),null)})():e.renderAs==="NoteImage"?null:v("div",{className:a(),children:v("div",{className:`msg-content retrieving ${r.retrieving?"opacity-100":"opacity-0"} transition-opacity duration-700 ease-in-out`,style:{display:"flex",alignItems:"center"},children:[v("div",{className:"text",children:be("looking_up_message")}),v("div",{children:o()})]})},e.id):(console.error("no id on event",e),null)},Wo=gi(OIe),VE=e=>`#[${e}]`,CIe={regex:/#\[([0-9]+)]/g,component:({match:e,index:r,event:t})=>{if(!(t!=null&&t.tags))return console.log("no tags",t),v(rt,{children:VE(e)});const n=t.tags[parseInt(e)];if(!n)return console.log("no matching tag",r,t),v(rt,{children:VE(e)});const[i,s]=n;return i==="p"?v(Kt,{href:`/${lu.npubEncode(s)}`,className:"link",children:[" ",v($r,{pub:s,hideBadge:!0})]}):i==="e"?v(Wo,{id:s,asInlineQuote:!0},s):(console.log("unknown tag type",i,r,t),v(rt,{children:VE(e)}))}},PIe=/\bnostr:(n(?:event|profile)1\w+)\b/g,NIe={regex:PIe,component:({match:e})=>{try{const{type:r,data:t}=lu.decode(e);if(r==="nprofile")return v(rt,{children:v(Kt,{className:"link",href:`/${t.pubkey}`,children:[" ",v($r,{pub:t.pubkey})]})});if(r==="nevent")return v(Wo,{id:t.id,asInlineQuote:!0})}catch(r){console.log(r)}return v("span",{children:e})}},RIe=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,DIe={regex:RIe,component:({match:e})=>{const r=me.toNostrHexAddress(e.replace("@",""));return v(Wo,{id:r,asInlineQuote:!0})}},BIe=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,_V={regex:BIe,component:({match:e})=>{const r=e.replace("@","");return v(Kt,{href:`/${r}`,className:"link",children:[" ",v($r,{pub:r,hideBadge:!0})]})}},MIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${e}`,frameBorder:"0",allow:"encrypted-media"})},LIe={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{className:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},FIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},jIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${e}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},HIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,settingsKey:"enableTwitch",component:({match:e})=>v("iframe",{className:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${e}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},zIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,settingsKey:"enableTwitch",component:({match:e})=>v("iframe",{className:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${e}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},UIe={regex:/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,settingsKey:"enableAudio",component:({match:e})=>v("audio",{src:e,controls:!0,loop:!0})},xV={regex:new RegExp("(?<=\\s|^)(#\\w+)","g"),component:({match:e})=>v(Kt,{href:`/search/${encodeURIComponent(e)}`,className:"link",children:e})},EV={regex:/(https?:\/\/.*?\.(?:png|jpg|jpeg|gif|svg|webp)(?:\?\S*?)?)/gi,settingsKey:"enableImages",component:({match:e})=>{const[r,t]=Me(!1);return v("div",{className:"flex justify-center md:justify-start",children:[v(xa,{onClick:i=>{i.stopPropagation(),t(!0)},className:"my-2 rounded max-h-[70vh] md:max-h-96 max-w-full cursor-pointer",src:e}),v(ft,{when:r,children:v(gl,{onClose:()=>t(!1),children:v(xa,{className:"rounded max-h-[90vh] max-w-[90vw]",src:e})})})]})}},WIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,settingsKey:"enableInstagram",component:({match:e})=>v("iframe",{className:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${e}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},KIe={regex:/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,component:({match:e})=>(e.startsWith("lightning:")||(e=`lightning:${e}`),v("a",{href:e,onClick:r=>xr.handleLightningLinkClick(r),children:" Pay with lightning"}))},qIe={regex:/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,settingsKey:"enableSoundCloud",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${e}`,frameBorder:"0",allow:"encrypted-media"})},VIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,settingsKey:"enableTidal",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${e}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},GIe={regex:/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,settingsKey:"enableTiktok",component:({match:e})=>v("iframe",{className:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${e}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},YIe={regex:/(magnet:\?xt=urn:btih:.*)/gi,settingsKey:"enableTorrent",component:({match:e})=>v(wm,{preview:!0,torrentId:e})},ZIe={regex:/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,settingsKey:"enableTwitter",component:({match:e})=>v("iframe",{style:{maxWidth:"350px",height:"450px",backgroundColor:"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(e)}`})},SV={regex:/(https?:\/\/[^\s]+)/g,component:({match:e})=>{const r=e.replace(/^(https:\/\/)?iris.to/,"");return v(Kt,{className:"link",target:"_blank",href:r,children:e.replace(/^https?:\/\//,"").replace(/\/$/,"")})}},kV={regex:/(https?:\/\/.*\.(?:mp4|webm|ogg|mov)(?:\?\S*)?)/gi,settingsKey:"enableVideo",component:({match:e})=>v("div",{className:"relative w-full object-contain my-2",children:v("video",{className:"rounded max-h-[70vh] md:max-h-96",src:e,controls:!0,muted:!0,autoPlay:!0,loop:!0,poster:`https://imgproxy.iris.to/thumbnail/638/${e}`})})},XIe={regex:/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,settingsKey:"enableWavLake",component:({match:e})=>v("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${e}`,frameBorder:"0",loading:"lazy"})},JIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,settingsKey:"enableYoutube",component:({match:e})=>v("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},QIe=[UIe,EV,kV,JIe,WIe,ZIe,qIe,jIe,MIe,FIe,LIe,TTe,ITe,VIe,GIe,HIe,zIe,XIe,YIe,KIe,_V,DIe,NIe,xV,CIe,SV],eAe=[_V,SV,xV];let TV={};Re.get("settings").on(e=>TV=e);const HP=gi(({children:e,event:r,textOnly:t})=>{let n=[e==null?void 0:e.trim()];return(t?eAe:QIe).forEach(s=>{TV[s.settingsKey||""]!==!1&&(n=kTe(n,s.regex,(o,a)=>s.component({match:o,index:a,event:r,key:`${o}-${a}`})))}),n=n.map((s,o,a)=>{var l,u;return typeof s=="string"&&(o<a.length-1&&!((l=a[o+1].props)!=null&&l.href)&&(s=s.replace(/\n+$/,"")),o>0&&!((u=a[o-1].props)!=null&&u.href)&&(s=s.replace(/^\n+/,""))),s}),v(rt,{children:n})}),IV=({event:e,selfAuthored:r,showName:t,torrentId:n})=>{const[i,s]=Me(e.text||""),[o,a]=Me(null),[l,u]=Me(!1);St(()=>{tr("a").click(A=>{const x=tr(A.target).attr("href");x&&x.indexOf("https://iris.to/")===0&&(A.preventDefault(),Sr(x.replace("https://iris.to/","")))});let _=i;_?h(_):me.decryptMessage(e,A=>{_=A,h(_)})},[e.id,i]);const h=_=>{try{const A=_.slice(_.indexOf("{")),x=JSON.parse(A);if($y(x)&&Np(x)&&(console.log(111,x.tags.length===1,x.tags[0][0]==="p",x.tags[0][1]===x.pubkey),x.tags.length===1&&x.tags[0][0]==="p"&&x.tags[0][1]===e.pubkey)){x.text=x.content,a(x);return}}catch{}u(!0),s(_)};if(o)return v(IV,{event:o,showName:!0,selfAuthored:o.pubkey===me.getPubKey()});if(!l)return null;const c=()=>{Sr(`/${me.toNostrBech32Address(e.pubkey,"npub")}`)},p=i&&i.length===2&&xr.isEmoji(i),m="",w=m.seen?"text-green-500":"text-neutral-500",b=m.delivered?"border-green-500":"border-neutral-500";return v("div",{className:`p-2 w-full md:w-2/3 rounded-xl mb-1 ${r?"self-end bg-iris-blue text-white":"self-start bg-neutral-700 text-white"} ${w} ${b} flex flex-col items-start`,children:v("div",{className:"w-full",children:[v("div",{className:"mb-2",children:t&&v("small",{onClick:c,className:"cursor-pointer text-xs",children:v($r,{pub:e.pubkey},e.pubkey)})}),n&&v(wm,{torrentId:n}),v("div",{className:`preformatted-wrap text-base ${p?"text-4xl":""}`,children:v(HP,{event:e,children:i})}),v("div",{className:`${r?"text-right":"text-left"} text-xs text-white`,children:v(F_,{date:new Date(e.created_at*1e3)})})]})})},tAe=gi(IV),rAe=({activeChat:e,class:r,autofocus:t,onSubmit:n,keyPair:i})=>{const[s,o]=Me(""),a=Ps(null);St(()=>{var p;!xr.isMobile&&t!==!1&&((p=a.current)==null||p.focus())},[t]);const l=p=>{try{const m=me.toNostrHexAddress(e);if(!m)throw new Error("invalid public key "+m);return me.encrypt(p,m)}catch(m){console.error(m)}},u=async p=>{if(p.preventDefault(),!s.length)return;const m=4,w=Math.floor(Date.now()/1e3),b={kind:m,created_at:w};if(i){let T={kind:m,created_at:w,content:s,tags:[["p",i.pubKey]]};T=await Fe.sign(T),b.content=await mh.encrypt(i.privKey,i.pubKey,`${s}

${JSON.stringify(T)}`),b.pubkey=i.pubKey,b.tags=[["p",i.pubKey]],console.log("event",b),b.id=Ic(b),b.sig=c_(b,i.privKey)}else{const T=me.toNostrHexAddress(e);if(b.content=await l(s),b.tags=[["p",T]],!T)throw new Error("invalid public key "+T)}Fe.publish(b),o(""),n==null||n()},h=p=>{const m=p.target.value;o(m),Re.get("channels").get(e).get("msgDraft").put(m)},c=p=>{(p.metaKey||p.ctrlKey)&&p.key==="Enter"&&u(p)};return v("form",{autoComplete:"off",className:`flex flex-none flex-row gap-2 p-2 message-form sticky w-full bottom-0 w-96 max-w-screen bg-black ${r||""}`,onSubmit:u,children:[v("input",{ref:a,className:"input input-sm flex-1 new-msg bg-neutral-700 text-white",onInput:h,onKeyDown:c,type:"text",placeholder:"Type a message",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0,value:s}),v("button",{className:`btn btn-sm ${s.length>0?"text-white bg-iris-blue":""}`,style:{marginRight:"0"},disabled:s.length===0,children:v(n3,{width:"24"})})]})};function nAe({id:e}){const r=Ps(null),t=Ps(new j3("created_at")),[n,i]=Me([]),[s,o]=Me(!0),[a,l]=Me(""),[u,h]=Me(!1),[c,p]=Me(void 0),[m,w]=Me(!1),b=[];let T;const _=()=>{let R=tr(".day-separator").last(),M=R.position();for(;R&&M&&M.top-55>0;)R=R.prevAll(".day-separator").first(),M=R.position();const U=R.clone(),V=tr("<div>").css({position:"fixed",top:70,"text-align":"center"}).attr("id","floating-day-separator").width(tr(r.current).width()).append(U);tr("#floating-day-separator").remove(),setTimeout(()=>U.fadeOut(),2e3),tr(r.current).prepend(V)},A=()=>{const R=me.toNostrHexAddress(e);vwe(R)},x=()=>{const R=tr(r.current);R[0].scrollHeight-R.scrollTop()<=R.outerHeight()+200?tr("#scroll-down-btn:visible").fadeOut(150):tr("#scroll-down-btn:not(:visible)").fadeIn(150)},I=Nh(()=>(c==null?void 0:c.privKey)&&me.toNostrBech32Address(c.privKey,"nsec")||"",[c]),O=()=>{T=T||v_(()=>{tr("#attachment-preview:visible").length||(_(),x())},200),T()},C=()=>{const R=r.current;R==null||R.scrollTo({top:R.scrollHeight})},g=()=>{let R;const M=me.getPubKey(),U=new Date,V=U.toLocaleDateString();let ne,re;const Q=[];return e&&e.length>4&&(n.forEach(F=>{if(!F)return null;const Z=new Date(F.created_at*1e3);let se;if(Z){const ye=Z.toLocaleDateString();if(ye!==ne){se=!0;const Pe=xr.getDaySeparatorText(Z,ye,U,V);Q.push(v("div",{className:"px-2 mt-3 mb-4 py-1 inline-block day-separator bg-black opacity-50 text-white rounded-full",children:be(Pe.toLowerCase())}))}ne=ye}let Ee=se;!se&&re&&F.pubkey!==re&&(Q.push(v("div",{className:"m-2"})),Ee=!0),re=F.pubkey,Q.push(v(tAe,{event:F,showName:Ee,selfAuthored:F.pubkey===M},`${F.created_at}${F.pubkey}`))}),R=v("div",{ref:r,className:"main-view p-2 overflow-y-auto overflow-x-hidden flex flex-col flex-grow h-full",onScroll:()=>O(),children:[v("div",{className:"w-full flex flex-col items-center justify-end",children:[Q,v("div",{className:"italic my-2 text-neutral-500 w-full text-center justify-self-center",children:[v(ft,{when:m&&c,children:[v("div",{children:be("secret_chat")}),v("div",{className:"flex gap-2 flex-1 items-center justify-center mt-4",children:[v("button",{className:"btn btn-neutral btn-sm",onClick:()=>h(F=>!F),children:[v(kue,{width:"20"}),be("show_qr_code")]}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:I(),text:"Copy nsec"}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:xr.buildURL("chat",void 0,I()),text:be("copy_link")})]}),v(ft,{when:u,children:v("div",{className:"mt-4",children:v(FP,{data:"nostr:"+I()})})})]}),v(ft,{when:!m&&me.toNostrHexAddress(e)!==M,children:[v("div",{children:be("dm_privacy_warning")}),v("div",{className:"mt-4 flex gap-2 justify-center",children:[v(ft,{when:a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:()=>I_(a),children:"Go to secret chat"})}),v(ft,{when:!a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:A,children:"Invite to secret chat"})})]})]})]})]}),v("div",{id:"attachment-preview",className:"attachment-preview",style:{display:"none"}})]})),R};return nv(()=>{const R=r.current;if(R){const M=new ResizeObserver(()=>{C()});return M.observe(R),()=>{M.disconnect()}}}),St(()=>{const R=me.toNostrHexAddress(e),M=ne=>{const re=Q=>{t.current.set(Q.id,Q),i(Array.from(t.current.values()))};b.push(Ut.subscribe({kinds:[4],"#p":[me.getPubKey()],authors:[ne]},re)),ne!==me.getPubKey()&&b.push(Ut.subscribe({kinds:[4],"#p":[ne],authors:[me.getPubKey()]},re))};Re.get("chatInvites").get(R).once(ne=>{ne!=null&&ne.priv&&l(ne.priv)});const U=()=>{const ne=Re.get("groups").get(e);ne.on(re=>{const Q=re.key,F=yh(Q);p({privKey:Q,pubKey:F}),b.push(Ut.subscribe({kinds:[4],"#p":[F],authors:[F]},async Z=>{const se=await mh.decrypt(Q,F,Z.content);t.current.set(Z.id,{...Z,text:se}),i(Array.from(t.current.values()));const Ee=ne.get("latest"),ye=await Ee.once();(!ye||!ye.created_at||ye.created_at<Z.created_at)&&Ee.put({id:Z.id,created_at:Z.created_at,text:se.slice(0,se.indexOf("{"))})}))})};R?M(R):(w(!0),U());const V=tr(r.current);return V&&V.off("scroll").on("scroll",()=>{const ne=V.scrollTop()+V.innerHeight()>=V[0].scrollHeight;s&&!ne?o(!1):!s&&ne&&o(!0)}),()=>{b.forEach(ne=>ne())}},[e]),St(()=>{s&&xr.scrollToMessageListBottom(),tr(".msg-content img").off("load").on("load",()=>s&&xr.scrollToMessageListBottom())},[s]),v(rt,{children:[v(vh,{children:v("title",{children:be("messages")})}),v("div",{className:`${e?"":"hidden"} flex flex-1 flex-col`,children:[g(),v(ft,{when:e&&e.length>4,children:[v("div",{className:"relative",children:v("div",{id:"scroll-down-btn",style:{display:"none"},className:"absolute bottom-1 left-2 p-1.5 rounded-3xl bg-neutral-900 opacity-85 hover:cursor-pointer",onClick:()=>C(),children:v(Cle,{width:"24"})})}),v(rAe,{activeChat:e,onSubmit:()=>C(),keyPair:c},e)]})]})]})}const iAe=({activeChat:e})=>{const r=()=>{window.history.back()},t=()=>{window.scrollTo(0,0),e&&e.length>15&&Sr("/"+me.toNostrBech32Address(e,"npub"))},n=()=>v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>Re.get("showLoginModal").put(!0),children:be("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>Re.get("showLoginModal").put(!0),children:be("sign_up")})]}),s=!!me.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",onClick:t,children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[v(fz,{width:24,onClick:r}),v(ft,{when:e,children:v("div",{className:"flex flex-row gap-2 items-center",children:[v(Wi,{width:30,str:e}),v($r,{pub:e})]})}),v(ft,{when:!e,children:v("div",{className:"flex flex-row gap-2 items-center",children:be("chat")})}),v(ft,{when:s,children:v("div",{})}),v(ft,{when:!s,children:n()})]})})})};class n8 extends yu{constructor(){super();le(this,"id");le(this,"renderContent",t=>t==="new"?v(gwe,{}):t?v(nAe,{id:t},t):v("div",{className:"hidden md:flex flex-col items-center justify-center flex-1",children:[v("div",{className:"my-4",children:v(s3,{className:"w-24 h-24 text-neutral-400"})}),v("div",{className:"text-neutral-400",children:be("dm_privacy_warning")})]}));this.id="chat-view",this.hideSideBar=!0,this.hideHeader=!0}componentDidMount(){super.componentDidMount();const t=window.location.hash.substr(1);t&&t.startsWith("nsec")&&(window.history.replaceState({},document.title,window.location.pathname),me.getPubKey()||me.loginAsNewUser(),gq(t))}renderView(){const{id:t}=this.props;return v("div",{className:"flex flex-col h-full max-h-screen",children:[v(iAe,{activeChat:t},t),v("div",{className:"flex flex-row flex-grow overflow-hidden",children:[v("div",{className:`flex-shrink-0 ${t?"hidden md:flex overflow-y-auto":"flex overflow-y-auto"}`,children:v(wTe,{activeChat:t,className:t?"hidden md:flex":"flex"})}),v("div",{className:`flex-grow overflow-y-auto ${t?"flex":"hidden md:flex"}`,children:this.renderContent(t)},`chat-content-${t}`)]})]})}}const sAe=e=>{const[r,t]=Me("");return v(rt,{children:[v("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;s&&s.length&&Dq(s[0],o=>{e.onUrl&&e.onUrl(o)},o=>{t(o)})}}),r?v("p",{children:r}):null]})},oAe={lud16:"Bitcoin lightning address  (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class aAe extends Nn{constructor(t){super(t);le(this,"saveOnChange",On.debounce(()=>{const t=this.state.profile;Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n]=t[n].trim())}),ct.setMetadata(t)},2e3));le(this,"setProfileAttribute",(t,n)=>{t=t.trim();const i=Object.assign({},this.state.profile);n?i[t]=n:delete i[t],this.setState({profile:i,edited:!0}),this.saveOnChange()});le(this,"handleSubmit",t=>{t.preventDefault(),ct.setMetadata(this.state.profile);const n=me.toNostrBech32Address(me.getPubKey(),"npub");Sr("/"+n)});le(this,"handleAddField",t=>{t.preventDefault();const n=this.state.newFieldName,i=this.state.newFieldValue;n&&i&&(this.setProfileAttribute(n,i),this.setState({newFieldName:"",newFieldValue:""}),ct.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){ct.getProfile(me.getPubKey(),t=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete t.created_at,this.setState({profile:t}))})}render(){const t=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(n=>{t.includes(n)||t.push(n)}),v(rt,{children:[v(qc,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container prose",children:[v("h3",{children:be("edit_profile")}),v("form",{onSubmit:n=>this.handleSubmit(n),children:[t.map(n=>{const i=this.state.profile[n],s=typeof i=="string"||typeof i>"u";return v("p",{children:[v("label",{htmlFor:n,children:[oAe[n]||n,":"]}),v("br",{}),v("input",{className:"input w-full",type:"text",id:n,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:o=>s&&this.setProfileAttribute(n,o.target.value)}),n==="lud16"&&!i&&v("p",{children:v("small",{children:be("install_lightning_wallet_prompt")})}),n==="picture"||n==="banner"?v(rt,{children:[v("p",{children:v(sAe,{onUrl:o=>this.setProfileAttribute(n,o)})}),i&&v("p",{children:v(xa,{src:i},i)})]}):null]})}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Save"})})]}),v("h4",{children:"Add new field"}),v("form",{onSubmit:n=>this.handleAddField(n),children:[v("p",{children:[v("label",{htmlFor:"newFieldName",children:"Field name:"}),v("br",{}),v("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",className:"input w-full",placeholder:be("field_name"),onInput:n=>this.setState({newFieldName:n.target.value})})]}),v("p",{children:[v("label",{htmlFor:"newFieldValue",children:"Field value:"}),v("br",{}),v("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",className:"input w-full",placeholder:be("field_value"),onInput:n=>this.setState({newFieldValue:n.target.value})})]}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Add new attribute"})})]})]})})]})}}const i8=Kn.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;

  &:nth-child(odd) {
    background-color: var(--zebra-stripe-bg);
  }
`,zb=Kn.div`
  flex: 1;
  padding: 0 10px;

  &:first-of-type {
    flex: none;
  }
`,AV=({path:e})=>{const[r,t]=Me(void 0);return St(()=>{var i;const n=(i=_h.public)==null?void 0:i.get(e,t);return()=>n==null?void 0:n.off()}),typeof r=="object"&&r!==null?v(i8,{children:[v(zb,{children:e}),v(zb,{children:Object.keys(r).map(n=>v(AV,{path:`${e}/${n}`}))})]}):v(i8,{class:"node",children:[v(zb,{children:e}),v(zb,{children:JSON.stringify(r)})]})};function s8({path:e}){return e=e||"/",v(rt,{children:[v(qc,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container",children:[v("h2",{children:[be("explorer")," ",e]}),v("div",{class:"explorer",children:v(AV,{path:e})})]})})]})}const lAe=({activeDisplay:e,onDisplayChange:r})=>v("div",{className:"flex mb-px",children:[v("button",{className:`rounded-sm flex justify-center flex-1 p-3 ${e==="feed"?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>r("feed"),children:v(_le,{width:24,height:24})}),v("button",{className:`rounded-sm flex justify-center flex-1 p-3 ${e==="grid"?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>r("grid"),children:v(Gle,{width:24,height:24})})]}),uAe=({filterOptions:e,activeOption:r,onOptionClick:t})=>v("div",{className:"flex mb-4 gap-2 mx-2 md:mx-4",children:e.map(n=>v("button",{className:`btn btn-sm ${r.name===n.name?"btn-primary":"btn-neutral"}`,onClick:()=>t(n),children:n.name},n.name))}),cAe=({item:e,index:r,setModalImageIndex:t,imagesAndVideosLength:n,lastElementRef:i})=>{const s=e.type==="video"?`https://imgproxy.iris.to/thumbnail/638/${e.url}`:e.url,o=r===n-1;return v("div",{className:"aspect-square cursor-pointer relative bg-neutral-300 hover:opacity-80",ref:o?i:null,onClick:()=>{t(r)},children:[v(xa,{square:!0,width:319,src:s,alt:"",className:"w-full h-full object-cover"}),e.type==="video"&&v("div",{className:"absolute top-0 right-0 m-2 shadow-md shadow-gray-500 ",children:Os.video})]},`feed${s}${r}`)},fAe=({imagesAndVideos:e,modalItemIndex:r,setModalImageIndex:t})=>{const n=()=>{if(r===null)return;const s=(r-1+e.length)%e.length;t(s)},i=()=>{if(r===null)return;const s=(r+1)%e.length;t(s)};return St(()=>{const s=o=>{o.key==="ArrowRight"?i():o.key==="ArrowLeft"&&n()};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[r,e]),r!==null?v(gl,{onClose:()=>t(null),children:v("div",{className:"relative w-full h-full flex justify-center",children:[e[r].type==="video"?v("video",{className:"rounded max-h-[90vh] max-w-[90vw] object-contain",src:e[r].url,controls:!0,muted:!0,autoPlay:!0,loop:!0,poster:`https://imgproxy.iris.to/thumbnail/638/${e[r].url}`}):v(xa,{className:"rounded max-h-[90vh] max-w-[90vw] object-contain",src:e[r].url},e[r].url),v("div",{className:"flex items-center justify-between w-full h-full absolute bottom-0 left-0 right-0",children:[v("div",{className:"p-4",onClick:s=>{s.stopPropagation(),n()},children:v("button",{className:"btn btn-circle btn-sm opacity-25 mr-2 flex-shrink-0",children:v(oTe,{width:20})})}),v("div",{className:"p-4 cursor-pointer",onClick:s=>{s.stopPropagation(),i()},children:v("button",{className:"btn btn-circle btn-sm opacity-25 ml-2 flex-shrink-0",children:v(uTe,{width:20})})})]})]})}):null},hAe="0px 0px 2000px 0px";function dAe(e,r,t){St(()=>{if(e.current&&t){const n=new IntersectionObserver(i=>{i[0].isIntersecting&&r()},{threshold:0,rootMargin:hAe});return n.observe(e.current),()=>{n.disconnect()}}},[e,r,t])}class o8{constructor(r="created_at",t="desc"){le(this,"eventMap");le(this,"sortedEventIds");le(this,"sortBy");le(this,"sortDirection");this.sortBy=r,this.sortDirection=t,this.eventMap=new Map,this.sortedEventIds=[]}compareFn(r,t){var s,o,a,l;let n,i;return!r||!t?0:r&&!t?-1:!r&&t?1:(this.sortBy==="created_at"?(n=r.created_at,i=t.created_at):this.sortBy==="likes"?(n=((s=Fe.likesByMessageId.get(r.id))==null?void 0:s.size)||0,i=((o=Fe.likesByMessageId.get(t.id))==null?void 0:o.size)||0):this.sortBy==="zaps"&&(n=((a=Fe.zapsByNote.get(r.id))==null?void 0:a.size)||0,i=((l=Fe.zapsByNote.get(t.id))==null?void 0:l.size)||0),this.sortDirection==="desc"?i-n:n-i)}has(r){return this.eventMap.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");return this.eventMap.has(r.id)?!1:(this.eventMap.set(r.id,r),this.insertEventId(r.id),!0)}delete(r){if(!this.eventMap.delete(r))return!1;const n=this.sortedEventIds.findIndex(i=>i===r);return n===-1?!1:(this.sortedEventIds.splice(n,1),!0)}get eventIds(){return this.sortedEventIds}get(r){return this.eventMap.get(r)}events(){return this.sortedEventIds.map(r=>this.eventMap.get(r))}last(){return this.eventMap.get(this.sortedEventIds[this.sortedEventIds.length-1])}first(){return this.eventMap.get(this.sortedEventIds[0])}get size(){return this.eventMap.size}insertEventId(r){const t=this.eventMap.get(r);let n=0,i=this.sortedEventIds.length;for(;n<i;){const s=Math.floor((n+i)/2),o=this.eventMap.get(this.sortedEventIds[s]);this.compareFn(t,o)<0?i=s:n=s+1}this.sortedEventIds.splice(n,0,r)}}const pAe=e=>{const[r,t]=Me(new o8),[n,i]=Me(null),{filter:s,enabled:o=!0,sinceLastOpened:a=!1,mergeSubscriptions:l=!0}=e,[u,h]=Me([]),c=m=>{r.has(m.id)||(r.add(m),h(r.events()))};return St(()=>{t(new o8)},[s]),St(()=>{if(!(!o||!s))return s.limit=s.limit||10,Ut.subscribe(s,c,a,l)},[e]),{events:u,loadMore:()=>{var T;const m=(T=r.last())==null?void 0:T.created_at;if(!m)return;n&&(n(),i(null));const w=Object.assign({},s,{until:m,limit:10});console.log("load more until",new Date(m*1e3),"filter",w);const b=Ut.subscribe(w,c,!1,!0);i(b)}}},Ub=6;function vAe(e){return e.flatMap(r=>{const t=(r.content.match(EV.regex)||[]).map(i=>({type:"image",url:i,created_at:r.created_at})),n=(r.content.match(kV.regex)||[]).map(i=>({type:"video",url:i,created_at:r.created_at}));return[...t,...n]})}const gAe=e=>{const{showDisplayAs:r,filterOptions:t,emptyMessage:n}=e;if(!t||t.length===0)throw new Error("Feed requires at least one filter option");const[i,s]=Me(t[0]),[o,a]=Me(Ub),[l,u]=Me("feed"),[h,c]=Me(null),p=Ps(null),[m]=Pue("muted",{}),{events:w,loadMore:b}=pAe({filter:i.filter,sinceLastOpened:!1}),T=$a(()=>w.filter(C=>m[C.pubkey]?!1:i.filterFn?i.filterFn(C):!0),[w,i]),_=T.length===0,A=o<T.length;dAe(p,x,A);function x(){o<T.length?a(O=>O+Ub):b==null||b()}const I=$a(()=>l==="feed"?[]:vAe(T).slice(0,o),[T,o,l]);return v(rt,{children:[v(ft,{when:t.length>1,children:v(uAe,{filterOptions:t,activeOption:i,onOptionClick:O=>{s(O),a(Ub)}})}),v(ft,{when:r!==!1,children:v(lAe,{onDisplayChange:O=>{a(Ub),u(O)},activeDisplay:l})}),v(fAe,{setModalImageIndex:c,modalItemIndex:h,imagesAndVideos:I}),v(ft,{when:_,children:n||"No Posts"}),v(ft,{when:l==="grid",children:v("div",{className:"grid grid-cols-3 gap-px",children:I.map((O,C)=>v(cAe,{item:O,index:C,setModalImageIndex:c,lastElementRef:p,imagesAndVideosLength:I.length}))})}),v(ft,{when:l==="feed",children:T.slice(0,o).map((O,C,g)=>{const R=C===g.length-1;return v("div",{ref:R?p:null,children:v(Wo,{id:O.id,...i.eventProps})},`feed${O.id}${C}`)})})]})},xm=gi(gAe),OV=e=>{const r=`https://iris.to/${me.toNostrBech32Address(e.pub,"npub")}`;return v(gl,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:v("div",{style:{textAlign:"center",flex:1},children:[v(FP,{data:r}),v("p",{children:v($r,{pub:e.pub})})]})})},yAe=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']],mAe=Kn.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
`,bAe=Kn.div`
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
`;class CV extends Nn{componentDidMount(){Re.get("noFollowers").on(this.inject()),Re.get("hasNostrFollowers").on(this.inject()),Re.get("showFollowSuggestions").on(this.inject()),Re.get("showNoIrisToAddress").on(this.inject()),Re.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return v("div",{className:"flex flex-col flex-grow px-2 py-4 md:px-4 gap-2",children:[v("p",{className:"text-base",children:be("follow_someone_info")}),yAe.map(([r,t])=>v("div",{className:"flex items-center space-x-4",children:[v(Kt,{href:`/${r}`,className:"flex flex-grow items-center space-x-2",children:[v("div",{className:"w-10 h-10",children:v(Wi,{str:r,width:40})}),v("div",{className:"flex-grow",children:[v($r,{pub:r,placeholder:"Suggested follow"}),v("p",{className:"text-sm text-gray-500",children:t})]})]}),v(Dc,{id:r})]})),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",onClick:()=>Re.get("showFollowSuggestions").put(!1),children:be("done")})}),v("p",{className:"text-base",children:[be("alternatively"),v("i",{children:" "}),v(Kt,{href:`/${me.toNostrBech32Address(me.getPubKey(),"npub")}`,className:"link",children:be("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return v(mAe,{children:[v(bAe,{onClick:()=>Re.get("noFollowers").put(!1),children:v(gz,{width:24})}),v("p",{children:be("no_followers_yet")}),v("div",{className:"flex gap-2 my-2",children:[v(Ui,{className:"btn btn-neutral",text:be("copy_link"),copyStr:xr.getMyProfileLink()}),v("button",{className:"btn btn-neutral",onClick:()=>this.setState({showQrModal:!0}),children:be("show_qr_code")})]}),v("small",{children:be("no_followers_yet_info")}),this.state.showQrModal&&v(OV,{onClose:()=>this.setState({showQrModal:!1}),pub:me.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return v("div",{className:"flex flex-col gap-2 mb-2",children:[v("p",{children:"Get your own iris.to/username?"}),v("p",{className:"flex gap-2",children:[v("button",{className:"btn btn-primary",onClick:()=>Sr("/settings/iris_account"),children:"Yes please"}),v("button",{className:"btn btn-neutral",onClick:()=>Re.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let r;return this.state.showFollowSuggestions?r=this.renderFollowSuggestions():this.state.showNoIrisToAddress?r=this.renderGetIrisAddress():this.state.noFollowers&&(r=this.renderNoFollowers()),r?v("div",{class:"msg",children:v("div",{class:"msg-content",children:r})}):""}}let wAe=class extends yu{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[v(CV,{}),v("div",{className:"hidden md:block px-4",children:v($m,{autofocus:!1,placeholder:be("whats_on_your_mind")})}),v(xm,{filterOptions:[{name:be("posts"),filter:{kinds:[1]},filterFn:r=>!Fe.getEventReplyingTo(r),eventProps:{showRepliedMsg:!0}},{name:be("posts_and_replies"),filter:{kinds:[1]},eventProps:{showRepliedMsg:!0,fullWidth:!1}}]})]})})}},$Ae=class extends yu{constructor(){super();le(this,"unsub");const t=Array.from(ct.followedByUser.get(vt(me.getPubKey()))||[]).map(n=>En(n));this.state={followedUsers:t},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition(),this.unsub=ct.getFollowedByUser(me.getPubKey(),t=>{console.log("followedUsers",t),this.setState({followedUsers:Array.from(t)})},!0)}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this)}renderView(){return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[v(CV,{}),v("div",{className:"hidden md:block px-4",children:v($m,{autofocus:!1,placeholder:be("whats_on_your_mind")})}),v(ft,{when:this.state.followedUsers.length,children:v(xm,{filterOptions:[{name:be("posts"),filter:{kinds:[1],authors:this.state.followedUsers,limit:100},filterFn:t=>!Fe.getEventReplyingTo(t),eventProps:{showRepliedMsg:!0}},{name:be("posts_and_replies"),filter:{kinds:[1],authors:this.state.followedUsers,limit:100},eventProps:{showRepliedMsg:!0,fullWidth:!1}}]})})]})})}};class _Ae extends yu{constructor(){super(...arguments);le(this,"class","public-messages-view");le(this,"updateNotificationsLastOpened",On.debounce(()=>{const t=Re.get("settings").get("notifications").get("saveLastOpened");t.once(n=>{var i;if(n!==!1){const s=Math.floor(Date.now()/1e3);((i=_h.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),t.put(!1)),Re.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return v(xm,{showDisplayAs:!1,emptyMessage:be("no_notifications_yet"),filterOptions:[{name:"notifications",filter:{kinds:[1,6,7,9735],"#p":[me.getPubKey()]},eventProps:{fullWidth:!1}}]},"notifications")}}class xAe extends yu{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const r=n=>n.content.includes(this.props.keyword),t={kinds:[1],keywords:[this.props.keyword||""]};return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:v(xm,{filterOptions:[{name:"Search",filter:t,filterFn:r}]})})})}}const EAe=gi(({hexKey:e})=>{var t;const r=me.toNostrBech32Address(e,"npub")||"";return v("div",{className:"flex w-full",children:[v(Kt,{href:`/${r}`,className:"flex flex-1 gap-4",children:[v(Wi,{str:r,width:49}),v("div",{children:[v($r,{pub:r}),v("br",{}),v("span",{className:"text-neutral-500 text-sm",children:[((t=ct.followersByUser.get(vt(e)))==null?void 0:t.size)||0,v("i",{children:" "}),"followers"]})]})]}),e!==me.getPubKey()&&v(Dc,{id:r})]},r)});class a8 extends yu{constructor(){super();le(this,"follows");le(this,"myPub");le(this,"updateSortedFollows",v_(()=>{const t=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),n=Array.from(this.follows).sort(t);this.setState({follows:n})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(t,n){var o,a;const i=(o=ct.profiles.get(vt(t)))==null?void 0:o.name,s=(a=ct.profiles.get(vt(n)))==null?void 0:a.name;return!i&&!s?t.localeCompare(n):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(t,n){const i=ct.followDistanceByUser.get(vt(t)),s=ct.followDistanceByUser.get(vt(n));return i===s?this.sortByName(t,n):i===void 0?1:s===void 0||i<s?-1:1}getFollows(){const t=me.toNostrHexAddress(this.props.id)||"";t&&ct.getFollowedByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const t=me.toNostrHexAddress(this.props.id)||"";t&&ct.getFollowersByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=me.toNostrBech32Address(me.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),Re.get("contacts").on(this.inject()))}followAll(){confirm(`${be("follow_all")} (${this.state.follows.length})?`)&&ct.setFollowed(this.state.follows)}renderFollows(){return this.state.follows.map(t=>v(EAe,{hexKey:t}))}renderView(){const t=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return v("div",{className:"px-4 mb-4",children:[v("div",{className:"flex justify-between mb-4",children:[v("span",{className:"text-xl font-bold",children:[v("a",{className:"link",href:`/${this.props.id}`,children:v($r,{pub:this.props.id})}),":",v("i",{children:" "}),v("span",{style:{flex:1},className:"ml-1",children:this.props.followers?be("followers"):be("following")})]}),v(ft,{when:t,children:v("span",{style:"text-align: right",className:"hidden md:inline",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[be("follow_all")," (",this.state.follows.length,")"]})})})]}),v(ft,{when:t,children:v("p",{style:"text-align: right",className:"inline md:hidden",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[be("follow_all")," (",this.state.follows.length,")"]})})}),v("div",{className:"flex flex-col w-full gap-4",children:[this.renderFollows(),this.state.follows.length===0?"":""]})]})}}function SAe(e){const[r,t]=Me(""),n=me.toNostrHexAddress(r),i=me.toNostrBech32Address(r,"note"),s=me.toNostrBech32Address(r,"npub"),o=me.toNostrBech32Address(r,"nsec");return v(rt,{children:[v(qc,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container mobile-padding15",children:[v("h2",{children:be("key_converter")}),v("p",{children:v("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:a=>{var l;return t((l=a.target.value)==null?void 0:l.trim())}})}),r&&n&&(r===n?v(rt,{children:[v("p",{children:[v("b",{children:"note:"})," ",i]}),v("p",{children:[v("b",{children:"npub:"})," ",s]}),v("p",{children:[v("b",{children:"nsec:"})," ",o]})]}):v("p",{children:[v("b",{children:"hex:"})," ",n]})),r&&!n&&v("p",{children:v("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const zP=2n**256n,sh=zP-0x1000003d1n,UP=zP-0x14551231950b75fc4402da1732fc9bebfn,PV=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,NV=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,RV={p:sh,n:UP,a:0n,b:7n,Gx:PV,Gy:NV},oh=32,l8=e=>Ct(Ct(e*e)*e+RV.b),ci=(e="")=>{throw new Error(e)},j_=e=>typeof e=="bigint",DV=e=>typeof e=="string",GE=e=>j_(e)&&0n<e&&e<sh,BV=e=>j_(e)&&0n<e&&e<UP,MV=(e,r)=>!(e instanceof Uint8Array)||typeof r=="number"&&r>0&&e.length!==r?ci("Uint8Array expected"):e,My=e=>new Uint8Array(e),WP=(e,r)=>MV(DV(e)?H_(e):My(e),r),Ct=(e,r=sh)=>{let t=e%r;return t>=0n?t:r+t},u8=e=>e instanceof Bo?e:ci("Point expected");let c8;class Bo{constructor(r,t,n){this.px=r,this.py=t,this.pz=n}static fromAffine(r){return new Bo(r.x,r.y,1n)}static fromHex(r){r=WP(r);let t;const n=r[0],i=r.subarray(1),s=f8(i,0,oh),o=r.length;if(o===33&&[2,3].includes(n)){GE(s)||ci("Point hex invalid: x not FE");let a=kAe(l8(s));const l=(a&1n)===1n;(n&1)===1!==l&&(a=Ct(-a)),t=new Bo(s,a,1n)}return o===65&&n===4&&(t=new Bo(s,f8(i,oh,2*oh),1n)),t?t.ok():ci("Point is not on curve")}static fromPrivateKey(r){return mp.mul(QI(r))}get x(){return this.aff().x}get y(){return this.aff().y}equals(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=u8(r),l=Ct(t*a),u=Ct(s*i),h=Ct(n*a),c=Ct(o*i);return l===u&&h===c}negate(){return new Bo(this.px,Ct(-this.py),this.pz)}double(){return this.add(this)}add(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=u8(r),{a:l,b:u}=RV;let h=0n,c=0n,p=0n;const m=Ct(u*3n);let w=Ct(t*s),b=Ct(n*o),T=Ct(i*a),_=Ct(t+n),A=Ct(s+o);_=Ct(_*A),A=Ct(w+b),_=Ct(_-A),A=Ct(t+i);let x=Ct(s+a);return A=Ct(A*x),x=Ct(w+T),A=Ct(A-x),x=Ct(n+i),h=Ct(o+a),x=Ct(x*h),h=Ct(b+T),x=Ct(x-h),p=Ct(l*A),h=Ct(m*T),p=Ct(h+p),h=Ct(b-p),p=Ct(b+p),c=Ct(h*p),b=Ct(w+w),b=Ct(b+w),T=Ct(l*T),A=Ct(m*A),b=Ct(b+T),T=Ct(w-T),T=Ct(l*T),A=Ct(A+T),w=Ct(b*A),c=Ct(c+w),w=Ct(x*A),h=Ct(_*h),h=Ct(h-w),w=Ct(_*b),p=Ct(x*p),p=Ct(p+w),new Bo(h,c,p)}mul(r,t=!0){if(!t&&r===0n)return G1;if(BV(r)||ci("invalid scalar"),this.equals(mp))return IAe(r).p;let n=G1,i=mp;for(let s=this;r>0n;s=s.double(),r>>=1n)r&1n?n=n.add(s):t&&(i=i.add(s));return n}mulAddQUns(r,t,n){return this.mul(t,!1).add(r.mul(n,!1)).ok()}toAffine(){const{px:r,py:t,pz:n}=this;if(this.equals(G1))return{x:0n,y:0n};if(n===1n)return{x:r,y:t};const i=FV(n);return Ct(n*i)!==1n&&ci("invalid inverse"),{x:Ct(r*i),y:Ct(t*i)}}assertValidity(){const{x:r,y:t}=this.aff();return(!GE(r)||!GE(t))&&ci("Point invalid: x or y"),Ct(t*t)===l8(r)?this:ci("Point invalid: not on curve")}multiply(r){return this.mul(r)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(r=!0){const{x:t,y:n}=this.aff();return(r?(n&1n)===0n?"02":"03":"04")+h8(t)+(r?"":h8(n))}toRawBytes(r=!0){return H_(this.toHex(r))}}Bo.BASE=new Bo(PV,NV,1n);Bo.ZERO=new Bo(0n,1n,0n);const{BASE:mp,ZERO:G1}=Bo,LV=(e,r)=>e.toString(16).padStart(r,"0"),KP=e=>Array.from(e).map(r=>LV(r,2)).join(""),H_=e=>{const r=e.length;(!DV(e)||r%2)&&ci("hex invalid 1");const t=My(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);(Number.isNaN(o)||o<0)&&ci("hex invalid 2"),t[n]=o}return t},z_=e=>BigInt("0x"+(KP(e)||"0")),f8=(e,r,t)=>z_(e.slice(r,t)),qP=e=>j_(e)&&e>=0n&&e<zP?H_(LV(e,2*oh)):ci("bigint expected"),h8=e=>KP(qP(e)),d8=(...e)=>{const r=My(e.reduce((n,i)=>n+MV(i).length,0));let t=0;return e.forEach(n=>{r.set(n,t),t+=n.length}),r},FV=(e,r=sh)=>{(e===0n||r<=0n)&&ci("no inverse n="+e+" mod="+r);let t=Ct(e,r),n=r,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,l=i-s*o;n=t,t=a,i=s,s=l}return n===1n?Ct(i,r):ci("no inverse")},kAe=e=>{let r=1n;for(let t=e,n=(sh+1n)/4n;n>0n;n>>=1n)n&1n&&(r=r*t%sh),t=t*t%sh;return Ct(r*r)===e?r:ci("sqrt invalid")},QI=e=>(j_(e)||(e=z_(WP(e,oh))),BV(e)?e:ci("private key out of range")),p8=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let Y1;function jV(e){e=WP(e);const r=oh+8;(e.length<r||e.length>1024)&&ci("expected proper params");const t=Ct(z_(e),UP-1n)+1n;return qP(t)}const HV={hexToBytes:H_,bytesToHex:KP,concatBytes:d8,bytesToNumberBE:z_,numberToBytesBE:qP,mod:Ct,invert:FV,hmacSha256Async:async(e,...r)=>{const t=p8();if(!t)return ci("etc.hmacSha256Async not set");const n=t.subtle,i=await n.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return My(await n.sign("HMAC",i,d8(...r)))},hmacSha256Sync:Y1,hashToPrivateKey:jV,randomBytes:e=>{const r=p8();return r||ci("crypto.getRandomValues must be defined"),r.getRandomValues(My(e))}},v8={normPrivateKeyToScalar:QI,isValidPrivateKey:e=>{try{return!!QI(e)}catch{return!1}},randomPrivateKey:()=>jV(HV.randomBytes(oh+8)),precompute(e=8,r=mp){return r.multiply(3n),r}};Object.defineProperties(HV,{hmacSha256Sync:{configurable:!1,get(){return Y1},set(e){Y1||(Y1=e)}}});const Bf=8,TAe=()=>{const e=[],r=256/Bf+1;let t=mp,n=t;for(let i=0;i<r;i++){n=t,e.push(n);for(let s=1;s<2**(Bf-1);s++)n=n.add(t),e.push(n);t=n.double()}return e},IAe=e=>{const r=c8||(c8=TAe()),t=(h,c)=>{let p=c.negate();return h?p:c};let n=G1,i=mp;const s=1+256/Bf,o=2**(Bf-1),a=BigInt(2**Bf-1),l=2**Bf,u=BigInt(Bf);for(let h=0;h<s;h++){const c=h*o;let p=Number(e&a);e>>=u,p>o&&(p-=l,e+=1n);const m=c,w=c+Math.abs(p)-1,b=h%2!==0,T=p<0;p===0?i=i.add(t(b,r[m])):n=n.add(t(T,r[w]))}return{p:n,f:i}},AAe=v(rt,{children:[v("b",{children:"End User Licence Agreement"}),v("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),v("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),v("ul",{children:[v("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),v("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),v("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),v("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),v("li",{children:"illegal content related to gambling."})]}),v("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),v("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),v("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),v("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function OAe({onAccept:e,onDecline:r}){return v("div",{class:"m-1 bg-black overflow-y-scroll absolute inset-0 pb-safe-area",children:[v("div",{className:"prose",children:AAe}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-primary",onClick:e,children:"Accept"}),v("button",{className:"btn btn-default",onClick:r,children:"Decline"})]})]})}function CAe(e){const r=e.target,t=tr(r).val();qd.indexOf(t)>=0&&(localStorage.setItem("language",t),location.reload())}const PAe=()=>v("div",{className:"flex flex-row w-full justify-center items-center",children:[v(dz,{width:24}),v("select",{className:"input rounded-full",onChange:e=>CAe(e),value:Lo,children:Object.keys(xy).map(e=>v("option",{value:e,children:xy[e]}))})]});class Z1 extends jn{constructor(){super(...arguments);le(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const t=document.getElementById("login-form-name");t&&t.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(t){t.preventDefault();const n=await window.nostr.getPublicKey();me.login({rpub:n},this.props.fullScreen)}async onPasteKey(t){var s;const n=(s=t.target.value)==null?void 0:s.trim();if(!n.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(n)}catch{}if(!i)if(v8.isValidPrivateKey(n))i={priv:n,rpub:me.getPublicKey(n)};else try{const{data:o,prefix:a}=$w(n),l=xr.arrayToHex(o);a==="npub"?i={rpub:l}:a==="nsec"&&(i={priv:l,rpub:me.getPublicKey(l)})}catch(o){this.setState({privateKeyError:be("invalid_private_key")}),console.error(o)}i&&(await me.login(i,this.props.fullScreen),t.target.value="",xr.copyToClipboard(""))}showCreateAccount(t){t.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const t=document.getElementById("login-form-name"),n=t==null?void 0:t.value;me.loginAsNewUser(this.props.fullScreen),Re.get("showFollowSuggestions").put(!0),n&&setTimeout(()=>{ct.setMetadata({display_name:n})},100);const i=Math.floor(Date.now()/1e3);Fe.notificationsSeenTime=i}onLoginFormSubmit(t){t.preventDefault(),xr.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(t){const n=t.target.value;if(n.indexOf('"priv"')!==-1||v8.isValidPrivateKey(n)||n.startsWith("nsec")||n.startsWith("npub")){this.onPasteKey(t),t.target.value="";return}this.setState({inputStyle:n.length?"text-align: center":""})}renderExistingAccountLogin(){return v(rt,{children:[v("input",{className:"rounded-full input input-bordered centered-placeholder",id:"paste-privkey",autoFocus:!0,onInput:t=>this.onPasteKey(t),placeholder:be("paste_private_key"),type:"password"}),this.state.privateKeyError&&v("p",{className:"error",children:this.state.privateKeyError})]})}render(){return v("section",{className:`flex items-center justify-center ${this.props.fullScreen?"h-screen":""}`,children:[this.state.showEula&&v(OAe,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),v("div",{className:"w-full max-w-sm",children:this.state.showSwitchAccount?v("div",{className:"text-center shadow-md rounded px-8 pt-6 pb-8 mb-4 flex gap-2 flex-col",children:[v("p",{className:"link",children:v("a",{href:"",id:"show-create-account",onClick:t=>this.showCreateAccount(t),children:be("back")})}),this.renderExistingAccountLogin()]}):v("form",{className:"shadow-md bg-black rounded px-8 pt-6 pb-8 mb-4 gap-4 flex flex-col items-center justify-center",autocomplete:"off",onSubmit:t=>this.onLoginFormSubmit(t),children:[v("img",{className:"w-20 h-20 mx-auto",src:"/img/android-chrome-192x192.png",alt:"iris"}),v("h1",{className:"text-2xl font-bold",children:"Dpeep"}),v("input",{className:"input centered-placeholder",style:this.state.inputStyle,onInput:t=>this.onNameChange(t),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:be("whats_your_name")}),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",type:"submit",children:be("new_user_go")})}),window.nostr?v("p",{className:"text-center link",children:v("a",{href:"",onClick:t=>this.nostrExtensionLogin(t),children:be("nostr_extension_login")})}):null,v("p",{className:"text-center link",children:v("a",{href:"",id:"show-existing-account-login",onClick:t=>{t.preventDefault(),this.setState({showSwitchAccount:!0})},children:be("private_key_login")})}),v(PAe,{})]})})]})}}class NAe extends Z1{render(){return this.renderExistingAccountLogin()}}function RAe(e){return v("div",{className:"px-2 md:px-4 py-8 justify-center flex flex-col items-center",children:[v("div",{className:"my-4",children:be("logout_confirmation_info")}),v("div",{className:"my-4 flex flex-row gap-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>Sr("/settings"),children:be("back")}),v("button",{className:"btn btn-primary",onClick:()=>_h.logOut(),children:be("log_out")})]})]})}class g8 extends yu{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const r=me.toNostrBech32Address(this.props.id,"note");if(r&&this.props.id!==r){Sr(`/${r}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(r){r.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let r;return this.props.id==="new"?r=v("div",{className:"m-2",children:v($m,{placeholder:be("whats_on_your_mind"),forceAutofocusMobile:!0,autofocus:!0,onSubmit:()=>Sr("/")})}):r=v(Wo,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),v("div",{className:"w-full",children:r})}}class DAe extends jP{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=be("report_public"),this.actionDone=be("reported"),this.hoverAction=be("unreport")}onClick(r){r.preventDefault();const t=!this.state[this.key];if(confirm(t?"Publicly report this user?":"Unreport user?")){const n=me.toNostrHexAddress(this.props.id);n&&ct.flag(n,t)}}componentDidMount(){ct.getFlaggedUsers(r=>{const t=me.toNostrHexAddress(this.props.id),n=t&&(r==null?void 0:r.has(t));this.setState({reported:n})})}}const BAe=({hexPub:e,npub:r,rawDataJson:t,isMyProfile:n})=>{async function i(a){a.preventDefault(),Sr("/"),me.login({rpub:e})}const[s,o]=Me(!1);return v(rt,{children:[v(yV,{children:[v(Ui,{className:"btn btn-sm",text:be("copy_link"),copyStr:window.location.href},`${e}copyLink`),v(Ui,{className:"btn btn-sm",text:be("copy_user_ID"),copyStr:r},`${e}copyNpub`),v("button",{className:"btn btn-sm",onClick:()=>o(!0),children:be("show_qr_code")}),v(Ui,{className:"btn btn-sm",text:be("copy_raw_data"),copyStr:t},`${e}copyData`),v(ft,{when:!n&&!me.getPrivKey(),children:v("button",{className:"btn btn-sm",onClick:i,children:[be("view_as")+" ",v($r,{pub:e,hideBadge:!0})]})}),v(ft,{when:!n,children:v(rt,{children:[v(jP,{className:"btn btn-sm",id:e}),v(DAe,{className:"btn btn-sm",id:e})]})})]}),v(ft,{when:s,children:v(OV,{pub:e,onClose:()=>o(!1)})})]})},MAe=({picture:e,onError:r})=>{const[t,n]=Me(!1),i=()=>{n(!0)},s=()=>{n(!1)};return e?v("div",{className:"rounded-full border-4 border-black",children:[v(xa,{width:128,square:!0,className:"rounded-full cursor-pointer",src:e,onError:r,onClick:i}),t&&v(gl,{centerVertically:!0,onClose:s,children:v(xa,{className:"max-w-full max-h-[90vh]",square:!0,src:e,onError:r})})]}):null},LAe=({hexPub:e})=>{const[r,t]=Me({showTrustsList:!1,trusted:!1,showDistrustsList:!1,distrusted:!1,renderTrustScore:"",renderDistrustScore:"",processing:!1}),n=bm(vt(e));St(()=>{var u;if(!n)return;const o=(u=n.vertice)==null?void 0:u.score;if(!o)return;let a=o.isDirectTrusted(),l=o.isDirectDistrusted();t(h=>({...h,trusted:a,distrusted:l,renderTrustScore:a?o.renderTrustCount():"",renderDistrustScore:l?o.renderDistrustCount():"",processing:!1}))},[n]);function i(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!r.trusted,distrusted:!1,processing:!0}),(async()=>{let a=r.trusted?0:1;await wr.publishTrust(e,a,Fo.Key)})()}function s(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!1,distrusted:!r.distrusted,processing:!0}),(async()=>{let a=r.distrusted?0:-1;await wr.publishTrust(e,a,Fo.Key)})()}return v(rt,{children:v("div",{className:"flex-1 flex gap-4",children:[v("a",{className:`msg-btn trust-btn ${r.trusted?"trusted":""} cursor-pointer`,onClick:o=>i(o),title:r.trusted?"Trusted":"Trust",children:r.trusted?v(r$,{size:24,fill:"green",stroke:"currentColor"}):v(r$,{size:24,fill:"none",stroke:"currentColor"})}),v("a",{className:`msg-btn trust-btn ${r.distrusted?"distrusted":""} cursor-pointer`,onClick:o=>s(o),title:r.distrusted?"Distrusted":"Distrust",children:r.distrusted?v(t$,{size:24,fill:"red",stroke:"currentColor"}):v(t$,{size:24,fill:"none",stroke:"currentColor"})})]})})},FAe=({hexPub:e})=>{const[r]=Me(me.toNostrBech32Address(e,"npub")),[t,n]=Me(),i=bm(vt(e),void 0,"");return St(()=>{var o;const s=(o=i.vertice)==null?void 0:o.score;s&&n(a=>({...a,score:s}))},[i]),v(rt,{children:[MP(t==null?void 0:t.score,r,!0),LP(t==null?void 0:t.score,r,!0)]})},jAe=({address:e})=>{const[r,t]=Me(0),[n,i]=Me(0),[s,o]=Me(0),[a,l]=Me(0),[u,h]=Me([]),c=me.getPubKey()===e;return St(()=>{const p=[];fetch(`https://eu.rbr.bio/${e}/info.json`).then(w=>{w.ok&&w.json().then(b=>{var T;b&&(l((T=b.following)==null?void 0:T.length),o(b.followerCount))})});const m=v_(w=>{const b=new Set;for(const T of w)ct.getFollowDistance(T)===1&&b.add(T);h(Array.from(b))},1e3);return setTimeout(()=>{p.push(ct.getFollowersByUser(e,w=>{i(w.size),m(w)})),p.push(ct.getFollowedByUser(e,w=>t(w.size)))},1e3),()=>{p.forEach(w=>w())}},[e]),v("div",{children:[v("div",{className:"text-sm flex gap-4",children:[v(Kt,{href:`/follows/${e}`,children:[v("b",{children:Math.max(r,a)}),v("span",{className:"text-neutral-500",children:[" ",be("following")]})]}),v(Kt,{href:`/followers/${e}`,children:[v("b",{children:Math.max(n,s)}),v("span",{className:"text-neutral-500",children:[" ",be("followers")]})]}),v(FAe,{hexPub:e})]}),v(ft,{when:!c&&u.length>0,children:v("div",{className:"text-neutral-500",children:v("small",{children:["Followed by"," ",u.slice(0,3).map((p,m)=>v("span",{children:[v(ft,{when:m>0,children:", "}),v(Kt,{className:"hover:underline",href:`/${me.toNostrBech32Address(p,"npub")}`,children:v($r,{pub:p,hideBadge:!0})})," "]},p)),v(ft,{when:u.length>3,children:v("span",{children:[" ","and ",v("b",{children:u.length-3})," other users you follow"]})})]})})}),v(ft,{when:ct.isFollowing(e,me.getPubKey()),children:v("div",{className:"text-neutral-500",children:v("small",{children:be("follows_you")})})})]})},HAe=gi(jAe),zAe=e=>{var C,g;const{hexPub:r,npub:t}=e,[n,i]=Me(ct.profiles.get(vt(r))||{}),[s,o]=Me(""),[a,l]=Me(""),[u,h]=Me(!1),[c,p]=Me(""),[m,w]=Me(""),[b,T]=Me(!1),[_,A]=Me(!1),x=Nh((R,M)=>{const U=[];return U.push(Ut.subscribe({authors:[R],kinds:[0,3]},void 0,!1,!1)),U.push(ct.getProfile(R,V=>{if(!V)return;if(!(M&&M.endsWith("@iris.to"))&&V.nip05&&V.nip05valid){const F=V.nip05,Z=F.split("@"),se=Z[0],Ee=Z[1];let ye;Ee==="iris.to"?se==="_"?ye="iris":ye=se:se==="_"?ye=Ee:ye=F,p(ye),ye=window.location.pathname.replace(/[^/]+/,ye);const Pe=window.history.state;window.history.replaceState(Pe,"",ye)}let re=V.lud16||V.lud06;re&&!re.startsWith("lightning:")&&(re="lightning:"+re),o(re);let Q="";try{const F=V.website&&(V.website.match(/^https?:\/\//)?V.website:"http://"+V.website),Z=new URL(F);Q=Z.href.endsWith("/")?Z.href.slice(0,-1):Z.href}catch{Q=""}l(Q),i(V)},!0)),()=>{U.forEach(V=>V())}},[]);St(()=>{const R=[],M=Fe.db.findOne({kind:0,pubkey:r}),U=Fe.db.findOne({kind:3,pubkey:r});M&&R.push(M),U&&R.push(U),w(JSON.stringify(R,null,2)),T(r===me.getPubKey()),x(r,c);const V=Re.get("loggedIn").on(re=>{h(re)}),ne=ct.getBlockedUsers(re=>{A(re.has(r))});return()=>{ne(),V()}},[r]);const I=_?v(Wi,{str:t,hidePicture:!0,width:128},`${t}avatar`):v(MAe,{picture:n.picture,onError:()=>null},`${r}picture`),O=()=>!u&&Re.get("showLoginModal").put(!0);return v("div",{children:v("div",{className:"mb-2 mx-4 md:px-4 md:mx-0 flex flex-col gap-2",children:[v("div",{className:"flex flex-row",children:[v("div",{className:n.banner?"-mt-24":"",children:I}),v("div",{className:"flex-1 justify-end items-center flex gap-2",children:[v("div",{onClick:O,children:[v("a",{href:"/graph/"+t,className:"link px-2",children:"Web of Trust"}),v(ft,{when:b,children:v("a",{className:"btn btn-sm btn-neutral",href:"/profile/edit",children:be("edit_profile")})}),v(ft,{when:!b,children:[v(Dc,{id:r},`${r}follow`),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>u&&Sr(`/chat/${t}`),children:be("send_message")})]})]}),v(BAe,{hexPub:r,npub:t,rawDataJson:m,isMyProfile:b})]})]}),v("div",{className:"profile-header-stuff",children:[v("div",{className:"flex-1 profile-name",children:[v("span",{className:"text-xl",children:v($r,{pub:r})}),v(ft,{when:n.nip05&&n.nip05valid,children:[v("br",{}),v("small",{className:"text-iris-green",children:(C=n.nip05)==null?void 0:C.replace(/^_@/,"")})]})]}),v(HAe,{address:r}),v("div",{className:"py-2",children:[v("p",{className:"text-sm",children:v(HP,{textOnly:!0,children:(g=n.about)==null?void 0:g.slice(0,500)})}),v("div",{className:"flex flex-1 flex-row align-center justify-center mt-4",children:[v(ft,{when:!b,children:v(LAe,{hexPub:r})}),v(ft,{when:s,children:v("div",{className:"flex-1",children:v("a",{className:"btn btn-sm btn-neutral",href:s,onClick:R=>xr.handleLightningLinkClick(R),children:[" ",be("tip_lightning")]})})}),v(ft,{when:a,children:v("div",{className:"flex-1",children:v("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"link",children:a==null?void 0:a.replace(/^https?:\/\//,"")})})})]})]})]})]})},`${r}details`)};class Wb extends yu{constructor(){super();le(this,"subscriptions");le(this,"unsub");this.state={followedUserCount:0,followerCount:0},this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers)return v("div",{className:"msg",children:v("div",{className:"msg-content",children:[v("p",{children:["Share your profile link so ",this.state.name||"this user"," can follow you:"]}),v("p",{children:v(Ui,{text:be("copy_link"),copyStr:xr.getMyProfileLink()})}),v("small",{children:be("no_followers_yet_info")})]})})}async viewAs(t){t.preventDefault(),Sr("/"),me.login({rpub:this.state.hexPub})}renderView(){const{hexPub:t,display_name:n,name:i,profile:s,banner:o,picture:a,blocked:l}=this.state;if(!t)return v("div",{});const u=n||i||"Profile",h=`${u} | Iris`,c=`Latest posts by ${n||i||"user"}. ${(s==null?void 0:s.about)||""}`;return v(rt,{children:[v(ft,{when:o,children:v("div",{className:"mb-4 h-48 bg-cover bg-center",style:{backgroundImage:`url(${o})`}})}),v("div",{children:[v(vh,{children:[v("title",{children:u}),v("meta",{name:"description",content:c}),v("meta",{property:"og:type",content:"profile"}),v(ft,{when:a,children:[v("meta",{property:"og:image",content:a}),v("meta",{name:"twitter:image",content:a})]}),v("meta",{property:"og:title",content:h}),v("meta",{property:"og:description",content:c})]}),v(zAe,{npub:this.state.npub,hexPub:this.state.hexPub}),v(ft,{when:!l,children:v(xm,{filterOptions:[{name:be("posts"),filter:{authors:[this.state.hexPub],kinds:[1],limit:5},filterFn:p=>!Fe.getEventReplyingTo(p),eventProps:{showRepliedMsg:!0}},{name:be("posts_and_replies"),filter:{authors:[this.state.hexPub],kinds:[1],limit:5},eventProps:{showRepliedMsg:!0,fullWidth:!1}},{name:be("likes"),filter:{authors:[this.state.hexPub],kinds:[7],limit:5}}]},`posts${this.state.hexPub}`)})]})]})}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this),Re.get("isMyProfile").put(!1)}componentDidUpdate(t,n){var i;!n.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}loadProfile(t){const n=t===me.getPubKey();Re.get("isMyProfile").put(n),Re.get("noFollowers").on(this.inject()),this.subscriptions.push(ct.getProfile(t,i=>{let s;try{if(s=i.banner&&new URL(i.banner).toString(),!s)return;s=mq(s)?s:`https://imgproxy.iris.to/insecure/rs:fill:948:192/plain/${s}`,this.setState({banner:s})}catch{console.log("Invalid banner URL",i.banner)}}))}componentDidMount(){this.restoreScrollPosition();const t=this.props.id,n=me.toNostrBech32Address(t,"npub");if(Re.get("loggedIn").on(this.inject()),n&&n!==t){Sr(`/${n}`,!0);return}const i=me.toNostrHexAddress(t);if(!i){let s=t;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),me.getPubKeyByNip05Address(s).then(o=>{if(o){const a=me.toNostrBech32Address(o,"npub");a&&a!==o&&(this.setState({npub:a,hexPub:o}),this.loadProfile(o))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:me.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}var zV=function(e,r,t,n){var i;r[0]=0;for(var s=1;s<r.length;s++){var o=r[s++],a=r[s]?(r[0]|=o?1:2,t[r[s++]]):r[++s];o===3?n[0]=a:o===4?n[1]=Object.assign(n[1]||{},a):o===5?(n[1]=n[1]||{})[r[++s]]=a:o===6?n[1][r[++s]]+=a+"":o?(i=e.apply(a,zV(e,a,t,["",null])),n.push(i),a[0]?r[0]|=2:(r[s-2]=0,r[s]=i)):n.push(a)}return n},y8=new Map;function UAe(e){var r=y8.get(this);return r||(r=new Map,y8.set(this,r)),(r=zV(this,r.get(e)||(r.set(e,r=function(t){for(var n,i,s=1,o="",a="",l=[0],u=function(p){s===1&&(p||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,p,o):s===3&&(p||o)?(l.push(3,p,o),s=2):s===2&&o==="..."&&p?l.push(4,p,0):s===2&&o&&!p?l.push(5,0,!0,o):s>=5&&((o||!p&&s===5)&&(l.push(s,0,o,i),s=6),p&&(l.push(s,p,0,i),s=6)),o=""},h=0;h<t.length;h++){h&&(s===1&&u(),u(h));for(var c=0;c<t[h].length;c++)n=t[h][c],s===1?n==="<"?(u(),l=[l],s=3):o+=n:s===4?o==="--"&&n===">"?(s=1,o=""):o=n+o[0]:a?n===a?a="":o+=n:n==='"'||n==="'"?a=n:n===">"?(u(),s=1):s&&(n==="="?(s=5,i=o,o=""):n==="/"&&(s<5||t[h][c+1]===">")?(u(),s===3&&(l=l[0]),s=l,(l=l[0]).push(2,0,s),s=0):n===" "||n==="	"||n===`
`||n==="\r"?(u(),s=2):o+=n),s===3&&o==="!--"&&(s=4,l=l[0])}return u(),l}(e)),r),arguments,[])).length>1?r:r[0]}var UV=UAe.bind(Ye);class WAe extends Nn{onLogoutClick(r){r?Sr("/logout"):_h.logOut()}async onExtensionLoginClick(r){r.preventDefault();const t=await window.nostr.getPublicKey();me.login({rpub:t})}deleteAccount(){confirm(`${be("delete_account")}?`)&&(Fe.publish({kind:0,content:JSON.stringify({deleted:!0})}),Fe.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{_h.logOut()},1e3))}render(){const r=me.getPrivKey();let t;r&&(t=lu.nsecEncode(r));const n=me.getPubKey(),i=lu.npubEncode(n),s=!!me.getPrivKey();return v(rt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("account")}),s?v("p",{children:[v("b",{children:be("save_backup_of_privkey_first")})," ",be("otherwise_cant_log_in_again")]}):null,v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.onLogoutClick(s),children:be("log_out")}),v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:be("switch_account")})]}),this.state.showSwitchAccount?UV`
                <p>
                  <${NAe} />
                </p>
                <p>
                  <a href="" onClick=${o=>this.onExtensionLoginClick(o)}>
                    ${be("nostr_extension_login")}
                  </a>
                </p>
              `:"",v("h3",{children:be("public_key")}),v("p",{children:v("small",{children:i})}),v("div",{className:"flex gap-2 my-2",children:[v(Ui,{className:"btn btn-neutral btn-sm",copyStr:i,text:"Copy npub"}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:n,text:"Copy hex"})]}),v("h3",{children:be("private_key")}),v("div",{className:"flex gap-2 my-2",children:r?v(rt,{children:[v(Ui,{className:"btn btn-neutral btn-sm",copyStr:t,text:"Copy nsec"}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:r,text:"Copy hex"})]}):v("p",{children:be("private_key_not_present_good")})}),r?v("p",{children:be("private_key_warning")}):"",xr.isStandalone()?v(rt,{children:[v("h3",{children:be("delete_account")}),v("p",{children:v("button",{className:"btn btn-sm btn-danger",onClick:()=>this.deleteAccount(),children:be("delete_account")})})]}):null]})})}}const KAe=()=>{const[e,r]=Me(!1);return St(()=>{var t;(t=_h.public)==null||t.get("settings/colorScheme",()=>{}),Re.get("showConnectedRelays").on(r)},[]),v(rt,{children:v("div",{class:"centered-container",children:[v("h3",{children:be("appearance")}),v("p",{children:[v("input",{className:"checkbox",type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:e,onChange:t=>{Re.get("showConnectedRelays").put(t.currentTarget.checked)}}),v("label",{htmlFor:"showConnectedRelays",children:[" ",be("show_connected_relays_in_header")]})]})]})})};class qAe extends Nn{profileExportJson(){const r=me.getPubKey();let t=[];const n=Fe.db.findOne({kind:0,pubkey:r}),i=Fe.db.findOne({kind:3,pubkey:r});return n&&t.push(n),i&&t.push(i),t=JSON.stringify(t,null,2),t}async exportMyEvents(){console.log("exporting my events");const r=me.getPubKey(),t=[];let n=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await rl.db.events.where({pubkey:r}).each(i=>{t.push(i),n++}),this.setState({saveMessage:`Found ${n} events`,downloadMyEventsMessage:null}),JSON.stringify(t)}render(){return v(rt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("backup")}),v("h3",{children:be("save")}),v("p",{children:[be("profile")," & ",be("follows"),":"]}),v("p",{children:[v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:be("download")}),v(Ui,{text:be("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),v("p",{children:[be("your_events"),":"]}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||be("download")})}),this.state.saveMessage&&v("p",{children:this.state.saveMessage}),this.state.saveError&&v("p",{class:"warning",children:this.state.saveError}),v("h3",{children:be("load")}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),v("p",{children:v("textarea",{className:"textarea",onInput:r=>this.import(r.target.value),placeholder:be("paste_event_json")})}),this.state.loadError&&v("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&v("p",{class:"positive",children:be("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&v(rt,{children:[v("p",{class:"positive",children:be("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(r=>v("div",{className:"profile-link-container",children:[v(Kt,{href:`/${me.toNostrBech32Address(r,"npub")}`,className:"profile-link",children:[v(Wi,{str:r,width:40}),v($r,{pub:r})]}),v(Dc,{id:r})]}))]})]})})}async onClickDownload(r,t){try{this.setState({saveMessage:null,saveError:null});const n=await t(),i="data:text/json;charset=utf-8,"+encodeURIComponent(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove()}catch(n){console.error(n),this.setState({saveError:n.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=t=>{var s;const i=(s=t.target.files)==null?void 0:s[0];if(i){const o=new FileReader;o.onload=()=>{this.import(o.result)},o.readAsText(i)}},r.click()}import(r){var t;if(!r||r.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let n=JSON.parse(r);Array.isArray(n)||(n=[n]);for(const i of n){if(!i.sig)continue;Fe.publish(i);const s=me.getPubKey();if(i.pubkey===s&&i.kind===3){const o=i.tags.filter(u=>u[0]==="p").map(u=>u[1]),a=(((t=Fe.db.findOne({kind:3,pubkey:s}))==null?void 0:t.tags)||[]).filter(u=>u[0]==="p").map(u=>u[1]),l=o.filter(u=>!a.includes(u));ct.setFollowed(l),this.setState({restoredFollows:l})}}this.setState({loadError:null,importedEvents:n.length})}catch(n){this.setState({loadError:n.message})}}}class VAe extends Nn{constructor(){super(),this.state={settings:{}}}componentDidMount(){Re.get("settings").on(this.inject())}render(){const r=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],t=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return v(rt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("content")}),v("h3",{children:be("notes")}),r.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>Re.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n)),v("h3",{children:be("media")}),t.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>Re.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n))]})})}}class GAe extends Nn{render(){const r=(n,i,s)=>v("p",{children:[v("input",{type:"checkbox",id:n,checked:this.state[n]===void 0?s:this.state[n],onChange:o=>{const a=o.target.checked;Re.get("dev").get(n).put(a)}}),v("label",{htmlFor:n,children:i})]}),t=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexed03",label:"Use central index server for kinds 0 and 3",defaultValue:!0},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return v(rt,{children:v("div",{class:"centered-container",children:[v("h3",{children:"Developer"}),v("p",{children:"Settings intended for Dpeep developers."}),t.map(({key:n,label:i,defaultValue:s})=>r(n,i,s))]})})}componentDidMount(){Re.get("dev").on(this.sub(r=>this.setState(r)))}}class YAe extends Nn{constructor(){super(...arguments);le(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});le(this,"checkAvailabilityFromAPI",On.debounce(async t=>{const n=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(t)}`);if(t===this.state.newUserName)if(n.status<500){const i=await n.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(t,n=!0){return v(rt,{children:[v("p",{children:["Username: ",v("b",{children:t})]}),v("p",{children:["Short link:"," ",n?v("a",{href:`https://iris.to/${t}`,onClick:i=>{i.preventDefault(),Sr(`/${t}`)},children:["iris.to/",t]}):v(rt,{children:["iris.to/",t]})]}),v("p",{children:["Nostr address (nip05): ",v("b",{children:[t,"@iris.to"]})]})]})}render(){let t;if(this.state.irisToActive){const n=this.state.profile.nip05.split("@")[0];t=this.renderAccountName(n)}else this.state.existing&&this.state.existing.confirmed?t=v("div",{children:[v("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),v("p",{children:v(yp,{onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?t=v("div",{children:[v("p",{className:"text-iris-green",children:["Username iris.to/",v("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),v("p",{children:v(yp,{onClick:()=>this.enableReserved(),children:"Yes please"})}),v("p",{children:v(yp,{onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?t=v("div",{className:"text-iris-red",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=n=>this.register(n),t=v(rt,{children:[v("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),v("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):t=v("div",{children:[v("p",{children:"Register an Iris username (iris.to/username)"}),v("form",{onSubmit:n=>this.showChallenge(n),children:[v("div",{className:"flex gap-2",children:[v("input",{className:"input",type:"text",placeholder:"Username",value:this.state.newUserName,onInput:n=>this.onNewUserNameChange(n)}),v("button",{className:"btn btn-primary",type:"submit",children:"Register"})]}),v("p",{children:this.state.newUserNameValid?v(rt,{children:[v("span",{className:"text-iris-green",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):v("span",{className:"text-iris-red",children:this.state.invalidUsernameMessage})})]})]});return v(rt,{children:[v("h3",{children:"Iris.to account"}),t,v("p",{children:v("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})}async onNewUserNameChange(t){const n=t.target.value;if(n.length===0){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:""});return}if(n.length<8||n.length>15){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 8 and 15 characters"});return}if(!n.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:n,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(n)}showChallenge(t){t.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(t){console.log("register",t);const n=me.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};i.id=Fe.getEventHash(i),i.sig=await me.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:t})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(o=>{this.setState({error:o.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const t=this.state.existing.name+"@iris.to",n=setTimeout(()=>{ct.setMetadata({nip05:t})},2e3);ct.getProfile(me.getPubKey(),i=>{i&&(clearTimeout(n),i.nip05!==t&&(i.nip05=t,ct.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const t=me.getPubKey(),n={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Fe.getEventHash(n),n.sig=await me.sign(n);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const t=me.getPubKey(),n={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Fe.getEventHash(n),n.sig=await me.sign(n);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const t=me.getPubKey();ct.getProfile(t,n=>{const i=n&&n.nip05&&n.nip05valid&&n.nip05.endsWith("@iris.to");this.setState({profile:n,irisToActive:i}),n&&!i&&this.checkExistingAccount(t)},!0),this.checkExistingAccount(t)}async checkExistingAccount(t){const n=await fetch(`https://api.iris.to/user/find?public_key=${t}`);if(n.status===200){const i=await n.json();this.setState({existing:i})}}}const ZAe=()=>v(rt,{children:v("div",{class:"centered-container",children:[v("h3",{children:be("language")}),v("div",{class:"centered-container",children:Object.keys(xy).map(e=>{let r;return e==Lo?r=v("input",{type:"radio",name:"language",id:e,onChange:t=>m8(t),value:e,checked:!0}):r=v("input",{type:"radio",name:"language",id:e,onChange:t=>m8(t),value:e}),v(rt,{children:[r,v("label",{for:e,children:[" ",xy[e]]}),v("br",{})]},e)})})]})});function m8(e){const r=e.target.value;qd.indexOf(r)>=0&&(localStorage.setItem("language",r),location.reload())}const XAe=()=>{const[e,r]=Me(Array.from(sn.relays.values())),[t,n]=Me([]),[i,s]=Me("");St(()=>{const c=setInterval(()=>{r(Array.from(sn.relays.values()))},2e3);return()=>clearInterval(c)}),St(()=>{n(sn.getPopularRelays())},[]);const o=c=>{Re.get("relays").get(c.url).put(null),sn.remove(c.url)},a=c=>c.includes("://")?c:`wss://${c}`,l=(c,p)=>{const m=a(p);Re.get("relays").get(m).put({enabled:!0,newRelayUrlWithProtocol:m}),c.preventDefault(),sn.add(m),s("")},u=c=>{try{return Ut.relayPool.relayByUrl.get(c.url).status}catch{return 3}},h=c=>{switch(u(c)){case 0:return"text-iris-yellow";case 1:return"text-iris-green";case 2:return"text-iris-yellow";case 3:return"";default:return"status"}};return v("div",{className:"centered-container",children:[v("h2",{children:be("network")}),v("div",{className:"flex flex-col gap-2",children:[e.map(c=>v("div",{className:"flex gap-2 flex-row peer",children:[v("div",{className:"flex-1",children:[v("span",{className:h(c),children:" "}),c.url]},c.url),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>o(c),children:be("remove")}),v("input",{className:"checkbox",type:"checkbox",checked:c.enabled!==!1,onChange:()=>{c.enabled=c.enabled===!1,c.enabled?sn.enable(c.url):sn.disable(c.url)}})]})),v("div",{className:"flex flex-row peer gap-2",children:[v("div",{className:"flex-cell",children:v("input",{className:"input",id:"new-relay-url",type:"text",placeholder:be("new_relay_url"),value:i,onChange:c=>s(c.target.value)})},"new"),v("div",{className:"flex-cell no-flex",children:v("button",{className:"btn btn-neutral",onClick:c=>l(c,i),children:be("add")})})]}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>sn.saveToContacts(),children:be("save_relays_publicly")}),v("button",{className:"btn btn-neutral",onClick:()=>sn.restoreDefaults(),children:be("restore_defaults")})]})]}),v("h3",{children:be("popular_relays")}),v("div",{className:"flex flex-col gap-2",children:[v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:be("users")}),v("div",{className:"flex-grow",children:"URL"})]}),t.map(c=>v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:c.users}),v("div",{className:"flex-grow truncate",children:c.url}),v("div",{className:"flex-initial",children:v("button",{className:"btn btn-sm btn-neutral",onClick:p=>l(p,c.url),children:be("add")})})]},c.url))]})]})},JAe=()=>{const[e,r]=Me("USD"),[t,n]=Me(1e3);St(()=>{Re.get("displayCurrency").on(s=>{r(s)})},[]),St(()=>{Re.get("defaultZapAmount").on(s=>{n(s)})});const i=s=>{const a=s.target.value;Re.get("displayCurrency").put(a)};return v(rt,{children:v("div",{class:"centered-container",children:[v("h3",{children:be("payments")}),v("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",v("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),v("p",{children:[v("label",{for:"displayCurrency",children:be("display_currency")}),v("select",{className:"select",id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[v("option",{value:"USD",children:"USD"}),v("option",{value:"EUR",children:"EUR"}),v("option",{value:"JPY",children:"JPY"}),v("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),v("p",{children:[v("label",{for:"defaultZapAmount",children:[be("default_zap_amount")," (sats):"]}),v("input",{className:"input",type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:t,onChange:s=>{Re.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class QAe extends Nn{constructor(){super();le(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let t=!1;const n=this.state.blockedUsers.map(s=>{const o=me.toNostrBech32Address(s,"npub");if(o)return t=!0,v("div",{children:v(Kt,{href:`/${o}`,children:v($r,{pub:s})})},s)}),i=Array.from(ct.usersByFollowDistance.entries()).slice(1);return v(rt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("social_network")}),v("h3",{children:"Stored on your device"}),v("p",{children:["Total size: ",i.reduce((s,o)=>s+o[1].size,0)," users"]}),v("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>v("div",{children:[s[0]||be("unknown"),": ",s[1].size," users"]})),v("p",{children:"Filter incoming events by follow distance:"}),v("select",{className:"select",value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const o=s.target;Re.get("globalFilter").get("maxFollowDistance").put(parseInt(o.value))},children:[v("option",{value:"0",children:"Off"}),v("option",{value:"1",children:"1"}),v("option",{value:"2",children:"2"}),v("option",{value:"3",children:"3"}),v("option",{value:"4",children:"4"}),v("option",{value:"5",children:"5"}),v("option",{value:"6",children:"6"})]}),v("p",{children:"Minimum number of followers at maximum follow distance:"}),v("input",{className:"input",type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||Fe.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const o=s.target;Re.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(o.value))}}),v("h3",{children:be("blocked_users")}),!t&&be("none"),v("p",{children:v("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?be("hide"):be("show")," ",n.length]})}),this.state.showBlockedUsers&&n]})})}componentDidMount(){ct.getBlockedUsers(t=>{this.setState({blockedUsers:Array.from(t)})}),Re.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class eOe extends Nn{constructor(){super();le(this,"content","");le(this,"pages",{account:WAe,network:XAe,appearance:KAe,language:ZAe,content:VAe,payments:JAe,backup:qAe,social_network:QAe,iris_account:YAe,dev:GAe});this.content="home"}render(){const t=this.pages[this.props.id]||this.pages.account;return v("div",{className:"prose",children:v(t,{})})}}const X1={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(X1.iris_account="iris.to");class tOe extends Nn{menuLinkClicked(r,t){t.preventDefault(),Re.get("toggleSettingsMenu").put(!1),Re.get("scrollUp").put(!0),Sr(`/settings/${r}`)}render(){const r=this.props.activePage||"account";return v("div",{className:`flex-col w-full md:w-48 flex-shrink-0 ${this.props.activePage?"hidden md:flex":"flex"}`,children:Object.keys(X1).map(t=>{if(X1[t])return v("a",{href:"#",className:`btn inline-flex w-auto flex items-center p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900 ${r===t&&window.innerWidth>624?"active":""}`,onClick:n=>this.menuLinkClicked(t,n),children:[v("span",{class:"text",children:be(X1[t])}),v(ft,{when:t==="language",children:v(dz,{width:16})})]},t)})})}}const rOe=e=>v(rt,{children:[v(qc,{}),v("div",{className:"flex flex-row px-2 md:px-0",children:[v(tOe,{activePage:e.page}),v("div",{className:e.page?"":"hidden md:flex",children:v(eOe,{id:e.page})})]})]});class nOe extends Nn{render(){return v(rt,{children:[v(qc,{}),v("div",{className:"main-view",id:"settings",children:v("div",{className:"centered-container mobile-padding15",children:[v("h2",{children:be("subscribe")}),v("h3",{children:"Iris Supporter"}),v("p",{children:"Support open source development and get extra features!"}),v("p",{children:v("ul",{children:[v("li",{children:"Iris Supporter Badge"}),v("li",{children:"Purple checkmark on Iris"}),v("li",{children:"High-quality automatic translations (via deepl.com)"}),v("li",{children:"Iris Supporters' private group chat"}),v("li",{children:"More features to come!"})]})}),v("p",{children:[v("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),v("label",{htmlFor:"subscription_annually",children:[v("b",{children:"8  / month"})," charged annually (96  / year)"]})]}),v("p",{children:[v("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),v("label",{htmlFor:"subscription_monthly",children:[v("b",{children:"10  / month"})," charged monthly (120  / year)"]})]}),v("p",{children:v(yp,{children:"Subscribe"})}),v("h3",{children:"Iris Titan"}),v("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",v("ul",{children:[v("li",{children:"Iris Titan Badge"}),v("li",{children:"Iris Titans private group chat"}),v("li",{children:"Priority support"})]})]}),v("p",{children:[v("b",{children:"1000 "})," one-time payment."]}),v("p",{children:v(yp,{children:"Subscribe"})}),v("br",{}),v("br",{})]})})]})}}class iOe extends yu{constructor(){super(),this.class="public-messages-view"}renderView(){return UV`
      <div id="message-list" class="centered-container">
        <${wm} standalone=${!0} showFiles=${!0} torrentId=${this.props.id} />
      </div>
    `}}function sOe(){return St(()=>{let e=me.getPubKey();return e&&wr.init(e),()=>{}},[]),null}const oOe=({view:e,me:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v("div",{className:"flex flex-wrap gap-4",children:[v("span",{className:"text-neutral-500",children:"View:"}),v(ft,{when:!r,children:v(Kt,{href:t({view:"path"}),className:e=="path"?n:i,children:be("Path")})}),v(Kt,{href:t({view:"graph"}),className:e=="graph"?n:i,children:be("Graph")}),v(Kt,{href:t({view:"list"}),className:e=="list"?n:i,children:be("List")})]})};let WV=!0;const KV=function(){WV=!1,window.removeEventListener("popstate",KV)};window.addEventListener("popstate",KV);const aOe=e=>{const[r,t]=Me(null);let n=0;St(()=>(window.addEventListener("scroll",i),s(),()=>{r&&r.disconnect(),window.removeEventListener("scroll",i)}),[]);let i=On.debounce(()=>{const a=window.scrollY||document.documentElement.scrollTop,u={...window.history.state,scrollPosition:a};window.history.replaceState(u,"")},100);function s(a=!0){var h,c;const l=window.history.state,u=(h=window.history.state)==null?void 0:h.previousState;if(!WV&&l!==u)a&&o(),n||(n=(c=window.history.state)==null?void 0:c.scrollPosition),n&&window.scrollTo(0,n);else{const m={...window.history.state||{},previousState:l};window.history.replaceState(m,"")}}let o=()=>{t(new ResizeObserver(a=>{a.forEach(()=>{s(!1)})})),r==null||r.observe(document.body),setTimeout(()=>{r&&r.disconnect()},1e3)};return v(rt,{children:v("div",{children:v(sV,{children:e.children})})})},lOe=({entitytype:e,dir:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v(ft,{when:r=="out",children:v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Subject:"}),v(Kt,{href:t({entitytype:"key"}),className:e=="key"?n:i,children:be("Profile")}),v(Kt,{href:t({entitytype:"item"}),className:e=="item"?n:i,children:be("Post")})]})})},qV=({dir:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:[be("Direction"),":"]}),v(Kt,{href:r({dir:"out"}),className:e=="out"?t:n,children:be("Outgoing")}),v(Kt,{href:r({dir:"in"}),className:e=="in"?t:n,children:be("Incoming")})]})},uOe=({trusttype:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Value:"}),v(Kt,{href:r({trusttype:"both"}),className:e=="both"?t:n,children:be("Both")}),v(Kt,{href:r({trusttype:"trust"}),className:e=="trust"?t:n,children:be("Trust")}),v(Kt,{href:r({trusttype:"distrust"}),className:e=="distrust"?t:n,children:be("Distrust")})]})};function cOe(e,r){return!r||e.length==0?[...e]:e.filter(n=>{var s,o;let i=Fn.getDefaultProfile(n.id);return!!((s=i==null?void 0:i.name)!=null&&s.toLowerCase().includes(r.toLowerCase())||(o=i==null?void 0:i.display_name)!=null&&o.toLowerCase().includes(r.toLowerCase()))})}function fOe(e,r){return e.degree<r.degree?-1:e.degree>r.degree?1:0}const VV=(e,r,t=!0)=>!e||!r?null:v("div",{className:"text-sm flex flex-2 gap-2",children:[MP(e,r,t),LP(e,r,t)]}),hOe=({props:e})=>{const[r,t]=Me([]),[n,i]=Me([]),[s]=Me([]);St(()=>{let u=vt(e.hexKey);if(!u)return;let h=Nee(e.entitytype,1),c=S1t(e.trusttype,void 0);return o(u,e.dir,h,c),()=>{s.forEach(p=>p==null?void 0:p())}},[e.npub,e.dir,e.entitytype,e.trusttype]),St(()=>{let u=cOe(r,e.filter);u.length==0&&n.length==0||i(u)},[e.filter,r]);async function o(u,h,c,p){let m=[];h=="out"&&(m=wr.g.outTrustById(u,c,p)),e.dir=="in"&&(m=wr.g.trustedBy(u,Fo.Key,p));let w=m.map(b=>En(b.id));await Fn.getProfiles(w),m=m.sort(fOe),t(m)}const a=()=>{let u=vt(e.hexKey);return n.length==0?v("div",{className:"text-center",children:be("No results")}):v(rt,{children:n.map(h=>l(h,u))})},l=(u,h)=>{const c=En(u.id),p=u.degree,m=u.score,w=me.toNostrBech32Address(c,"npub");let b="",T="";if(e.dir=="in"){const _=u.out[h];_&&(b=`text-${By(_.val)}-500 text-2xl`,T="")}else{const _=u.in[h];_&&(b=`text-${By(_.val)}-500 text-2xl`,T="")}return v("div",{className:"flex w-full py-2",children:[v("div",{className:"flex-0 self-center px-4",children:v("i",{className:b,children:T})}),v(Kt,{href:e.setSearch({npub:w}),className:"flex flex-1 gap-2",children:[v(Wi,{str:w,width:49}),v("div",{children:[v($r,{pub:w,hexKey:c}),v("br",{}),v("span",{className:"text-sm",children:["Degree ",p]})]})]}),VV(m,w)]},c)};return e.npub?v(rt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(ft,{when:e.entitytype=="key",children:v(qV,{dir:e.dir,setSearch:e.setSearch})}),v(uOe,{trusttype:e.trusttype,setSearch:e.setSearch}),v(lOe,{entitytype:e.entitytype,dir:e.dir,setSearch:e.setSearch})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-col w-full gap-4",children:v(aOe,{children:a()})})]}):null};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function U_(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var b8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n$={},dOe={get exports(){return n$},set exports(e){n$=e}},eA={},pOe={get exports(){return eA},set exports(e){eA=e}},tA={},vOe={get exports(){return tA},set exports(e){tA=e}},Kb=function(e){return e&&e.Math==Math&&e},mn=Kb(typeof globalThis=="object"&&globalThis)||Kb(typeof window=="object"&&window)||Kb(typeof self=="object"&&self)||Kb(typeof b8=="object"&&b8)||function(){return this}()||Function("return this")(),kr=function(e){try{return!!e()}catch{return!0}},gOe=kr,Em=!gOe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),yOe=Em,GV=Function.prototype,w8=GV.apply,$8=GV.call,wv=typeof Reflect=="object"&&Reflect.apply||(yOe?$8.bind(w8):function(){return $8.apply(w8,arguments)}),YV=Em,ZV=Function.prototype,rA=ZV.call,mOe=YV&&ZV.bind.bind(rA,rA),Mr=YV?mOe:function(e){return function(){return rA.apply(e,arguments)}},XV=Mr,bOe=XV({}.toString),wOe=XV("".slice),mu=function(e){return wOe(bOe(e),8,-1)},$Oe=mu,_Oe=Mr,VP=function(e){if($Oe(e)==="Function")return _Oe(e)},nA=typeof document=="object"&&document.all,xOe=typeof nA>"u"&&nA!==void 0,JV={all:nA,IS_HTMLDDA:xOe},QV=JV,EOe=QV.all,bn=QV.IS_HTMLDDA?function(e){return typeof e=="function"||e===EOe}:function(e){return typeof e=="function"},Bh={},SOe=kr,ni=!SOe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),kOe=Em,qb=Function.prototype.call,yi=kOe?qb.bind(qb):function(){return qb.apply(qb,arguments)},Sm={},eG={}.propertyIsEnumerable,tG=Object.getOwnPropertyDescriptor,TOe=tG&&!eG.call({1:2},1);Sm.f=TOe?function(r){var t=tG(this,r);return!!t&&t.enumerable}:eG;var Mh=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},IOe=Mr,AOe=kr,OOe=mu,YE=Object,COe=IOe("".split),W_=AOe(function(){return!YE("z").propertyIsEnumerable(0)})?function(e){return OOe(e)=="String"?COe(e,""):YE(e)}:YE,km=function(e){return e==null},POe=km,NOe=TypeError,Tm=function(e){if(POe(e))throw NOe("Can't call method on "+e);return e},ROe=W_,DOe=Tm,Ia=function(e){return ROe(DOe(e))},_8=bn,rG=JV,BOe=rG.all,mi=rG.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:_8(e)||e===BOe}:function(e){return typeof e=="object"?e!==null:_8(e)},Kr={},ZE=Kr,XE=mn,MOe=bn,x8=function(e){return MOe(e)?e:void 0},fs=function(e,r){return arguments.length<2?x8(ZE[e])||x8(XE[e]):ZE[e]&&ZE[e][r]||XE[e]&&XE[e][r]},LOe=Mr,on=LOe({}.isPrototypeOf),Vc=typeof navigator<"u"&&String(navigator.userAgent)||"",nG=mn,JE=Vc,E8=nG.process,S8=nG.Deno,k8=E8&&E8.versions||S8&&S8.version,T8=k8&&k8.v8,aa,i$;T8&&(aa=T8.split("."),i$=aa[0]>0&&aa[0]<4?1:+(aa[0]+aa[1]));!i$&&JE&&(aa=JE.match(/Edge\/(\d+)/),(!aa||aa[1]>=74)&&(aa=JE.match(/Chrome\/(\d+)/),aa&&(i$=+aa[1])));var $v=i$,I8=$v,FOe=kr,_v=!!Object.getOwnPropertySymbols&&!FOe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&I8&&I8<41}),jOe=_v,iG=jOe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",HOe=fs,zOe=bn,UOe=on,WOe=iG,KOe=Object,Im=WOe?function(e){return typeof e=="symbol"}:function(e){var r=HOe("Symbol");return zOe(r)&&UOe(r.prototype,KOe(e))},qOe=String,xv=function(e){try{return qOe(e)}catch{return"Object"}},VOe=bn,GOe=xv,YOe=TypeError,Ds=function(e){if(VOe(e))return e;throw YOe(GOe(e)+" is not a function")},ZOe=Ds,XOe=km,GP=function(e,r){var t=e[r];return XOe(t)?void 0:ZOe(t)},QE=yi,eS=bn,tS=mi,JOe=TypeError,QOe=function(e,r){var t,n;if(r==="string"&&eS(t=e.toString)&&!tS(n=QE(t,e))||eS(t=e.valueOf)&&!tS(n=QE(t,e))||r!=="string"&&eS(t=e.toString)&&!tS(n=QE(t,e)))return n;throw JOe("Can't convert object to primitive value")},Bc={},e5e={get exports(){return Bc},set exports(e){Bc=e}},t5e=!0,A8=mn,r5e=Object.defineProperty,n5e=function(e,r){try{r5e(A8,e,{value:r,configurable:!0,writable:!0})}catch{A8[e]=r}return r},i5e=mn,s5e=n5e,O8="__core-js_shared__",o5e=i5e[O8]||s5e(O8,{}),YP=o5e,C8=YP;(e5e.exports=function(e,r){return C8[e]||(C8[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var a5e=Tm,l5e=Object,Bs=function(e){return l5e(a5e(e))},u5e=Mr,c5e=Bs,f5e=u5e({}.hasOwnProperty),qn=Object.hasOwn||function(r,t){return f5e(c5e(r),t)},h5e=Mr,d5e=0,p5e=Math.random(),v5e=h5e(1 .toString),K_=function(e){return"Symbol("+(e===void 0?"":e)+")_"+v5e(++d5e+p5e,36)},g5e=mn,y5e=Bc,P8=qn,m5e=K_,b5e=_v,w5e=iG,Yd=g5e.Symbol,rS=y5e("wks"),$5e=w5e?Yd.for||Yd:Yd&&Yd.withoutSetter||m5e,an=function(e){return P8(rS,e)||(rS[e]=b5e&&P8(Yd,e)?Yd[e]:$5e("Symbol."+e)),rS[e]},_5e=yi,N8=mi,R8=Im,x5e=GP,E5e=QOe,S5e=an,k5e=TypeError,T5e=S5e("toPrimitive"),I5e=function(e,r){if(!N8(e)||R8(e))return e;var t=x5e(e,T5e),n;if(t){if(r===void 0&&(r="default"),n=_5e(t,e,r),!N8(n)||R8(n))return n;throw k5e("Can't convert object to primitive value")}return r===void 0&&(r="number"),E5e(e,r)},A5e=I5e,O5e=Im,q_=function(e){var r=A5e(e,"string");return O5e(r)?r:r+""},C5e=mn,D8=mi,iA=C5e.document,P5e=D8(iA)&&D8(iA.createElement),ZP=function(e){return P5e?iA.createElement(e):{}},N5e=ni,R5e=kr,D5e=ZP,sG=!N5e&&!R5e(function(){return Object.defineProperty(D5e("div"),"a",{get:function(){return 7}}).a!=7}),B5e=ni,M5e=yi,L5e=Sm,F5e=Mh,j5e=Ia,H5e=q_,z5e=qn,U5e=sG,B8=Object.getOwnPropertyDescriptor;Bh.f=B5e?B8:function(r,t){if(r=j5e(r),t=H5e(t),U5e)try{return B8(r,t)}catch{}if(z5e(r,t))return F5e(!M5e(L5e.f,r,t),r[t])};var W5e=kr,K5e=bn,q5e=/#|\.prototype\./,Am=function(e,r){var t=G5e[V5e(e)];return t==Z5e?!0:t==Y5e?!1:K5e(r)?W5e(r):!!r},V5e=Am.normalize=function(e){return String(e).replace(q5e,".").toLowerCase()},G5e=Am.data={},Y5e=Am.NATIVE="N",Z5e=Am.POLYFILL="P",oG=Am,M8=VP,X5e=Ds,J5e=Em,Q5e=M8(M8.bind),Gc=function(e,r){return X5e(e),r===void 0?e:J5e?Q5e(e,r):function(){return e.apply(r,arguments)}},no={},eCe=ni,tCe=kr,aG=eCe&&tCe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),rCe=mi,nCe=String,iCe=TypeError,io=function(e){if(rCe(e))return e;throw iCe(nCe(e)+" is not an object")},sCe=ni,oCe=sG,aCe=aG,Vb=io,L8=q_,lCe=TypeError,nS=Object.defineProperty,uCe=Object.getOwnPropertyDescriptor,iS="enumerable",sS="configurable",oS="writable";no.f=sCe?aCe?function(r,t,n){if(Vb(r),t=L8(t),Vb(n),typeof r=="function"&&t==="prototype"&&"value"in n&&oS in n&&!n[oS]){var i=uCe(r,t);i&&i[oS]&&(r[t]=n.value,n={configurable:sS in n?n[sS]:i[sS],enumerable:iS in n?n[iS]:i[iS],writable:!1})}return nS(r,t,n)}:nS:function(r,t,n){if(Vb(r),t=L8(t),Vb(n),oCe)try{return nS(r,t,n)}catch{}if("get"in n||"set"in n)throw lCe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var cCe=ni,fCe=no,hCe=Mh,bu=cCe?function(e,r,t){return fCe.f(e,r,hCe(1,t))}:function(e,r,t){return e[r]=t,e},Gb=mn,dCe=wv,pCe=VP,vCe=bn,gCe=Bh.f,yCe=oG,Id=Kr,mCe=Gc,Ad=bu,F8=qn,bCe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return dCe(e,this,arguments)};return r.prototype=e.prototype,r},Nt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?Gb:i?Gb[t]:(Gb[t]||{}).prototype,a=n?Id:Id[t]||Ad(Id,t,{})[t],l=a.prototype,u,h,c,p,m,w,b,T,_;for(p in r)u=yCe(n?p:t+(i?".":"#")+p,e.forced),h=!u&&o&&F8(o,p),w=a[p],h&&(e.dontCallGetSet?(_=gCe(o,p),b=_&&_.value):b=o[p]),m=h&&b?b:r[p],!(h&&typeof w==typeof m)&&(e.bind&&h?T=mCe(m,Gb):e.wrap&&h?T=bCe(m):s&&vCe(m)?T=pCe(m):T=m,(e.sham||m&&m.sham||w&&w.sham)&&Ad(T,"sham",!0),Ad(a,p,T),s&&(c=t+"Prototype",F8(Id,c)||Ad(Id,c,{}),Ad(Id[c],p,m),e.real&&l&&(u||!l[p])&&Ad(l,p,m)))},wCe=Nt,$Ce=ni,j8=no.f;wCe({target:"Object",stat:!0,forced:Object.defineProperty!==j8,sham:!$Ce},{defineProperty:j8});var _Ce=Kr,lG=_Ce.Object,xCe=vOe.exports=function(r,t,n){return lG.defineProperty(r,t,n)};lG.defineProperty.sham&&(xCe.sham=!0);var ECe=tA,uG=ECe,SCe=uG,kCe=SCe,TCe=kCe,ICe=TCe;(function(e){e.exports=ICe})(pOe);(function(e){e.exports=eA})(dOe);var V_=Gt(n$),Ly={},ACe={get exports(){return Ly},set exports(e){Ly=e}},sA={},OCe={get exports(){return sA},set exports(e){sA=e}},CCe=mu,Yc=Array.isArray||function(r){return CCe(r)=="Array"},PCe=Math.ceil,NCe=Math.floor,RCe=Math.trunc||function(r){var t=+r;return(t>0?NCe:PCe)(t)},DCe=RCe,G_=function(e){var r=+e;return r!==r||r===0?0:DCe(r)},BCe=G_,MCe=Math.min,LCe=function(e){return e>0?MCe(BCe(e),9007199254740991):0},FCe=LCe,so=function(e){return FCe(e.length)},jCe=TypeError,HCe=9007199254740991,XP=function(e){if(e>HCe)throw jCe("Maximum allowed index exceeded");return e},zCe=q_,UCe=no,WCe=Mh,Ev=function(e,r,t){var n=zCe(r);n in e?UCe.f(e,n,WCe(0,t)):e[n]=t},KCe=an,qCe=KCe("toStringTag"),cG={};cG[qCe]="z";var JP=String(cG)==="[object z]",VCe=JP,GCe=bn,J1=mu,YCe=an,ZCe=YCe("toStringTag"),XCe=Object,JCe=J1(function(){return arguments}())=="Arguments",QCe=function(e,r){try{return e[r]}catch{}},wu=VCe?J1:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=QCe(r=XCe(e),ZCe))=="string"?t:JCe?J1(r):(n=J1(r))=="Object"&&GCe(r.callee)?"Arguments":n},e3e=Mr,t3e=bn,oA=YP,r3e=e3e(Function.toString);t3e(oA.inspectSource)||(oA.inspectSource=function(e){return r3e(e)});var fG=oA.inspectSource,n3e=Mr,i3e=kr,hG=bn,s3e=wu,o3e=fs,a3e=fG,dG=function(){},l3e=[],pG=o3e("Reflect","construct"),QP=/^\s*(?:class|function)\b/,u3e=n3e(QP.exec),c3e=!QP.exec(dG),kg=function(r){if(!hG(r))return!1;try{return pG(dG,l3e,r),!0}catch{return!1}},vG=function(r){if(!hG(r))return!1;switch(s3e(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return c3e||!!u3e(QP,a3e(r))}catch{return!0}};vG.sham=!0;var Y_=!pG||i3e(function(){var e;return kg(kg.call)||!kg(Object)||!kg(function(){e=!0})||e})?vG:kg,H8=Yc,f3e=Y_,h3e=mi,d3e=an,p3e=d3e("species"),z8=Array,v3e=function(e){var r;return H8(e)&&(r=e.constructor,f3e(r)&&(r===z8||H8(r.prototype))?r=void 0:h3e(r)&&(r=r[p3e],r===null&&(r=void 0))),r===void 0?z8:r},g3e=v3e,Z_=function(e,r){return new(g3e(e))(r===0?0:r)},y3e=kr,m3e=an,b3e=$v,w3e=m3e("species"),Om=function(e){return b3e>=51||!y3e(function(){var r=[],t=r.constructor={};return t[w3e]=function(){return{foo:1}},r[e](Boolean).foo!==1})},$3e=Nt,_3e=kr,x3e=Yc,E3e=mi,S3e=Bs,k3e=so,U8=XP,W8=Ev,T3e=Z_,I3e=Om,A3e=an,O3e=$v,gG=A3e("isConcatSpreadable"),C3e=O3e>=51||!_3e(function(){var e=[];return e[gG]=!1,e.concat()[0]!==e}),P3e=function(e){if(!E3e(e))return!1;var r=e[gG];return r!==void 0?!!r:x3e(e)},N3e=!C3e||!I3e("concat");$3e({target:"Array",proto:!0,arity:1,forced:N3e},{concat:function(r){var t=S3e(this),n=T3e(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],P3e(u))for(l=k3e(u),U8(i+l),o=0;o<l;o++,i++)o in u&&W8(n,i,u[o]);else U8(i+1),W8(n,i++,u);return n.length=i,n}});var R3e=wu,D3e=String,yl=function(e){if(R3e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return D3e(e)},X_={},B3e=G_,M3e=Math.max,L3e=Math.min,Cm=function(e,r){var t=B3e(e);return t<0?M3e(t+r,0):L3e(t,r)},F3e=Ia,j3e=Cm,H3e=so,K8=function(e){return function(r,t,n){var i=F3e(r),s=H3e(i),o=j3e(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},e4={includes:K8(!0),indexOf:K8(!1)},Pm={},z3e=Mr,aS=qn,U3e=Ia,W3e=e4.indexOf,K3e=Pm,q8=z3e([].push),yG=function(e,r){var t=U3e(e),n=0,i=[],s;for(s in t)!aS(K3e,s)&&aS(t,s)&&q8(i,s);for(;r.length>n;)aS(t,s=r[n++])&&(~W3e(i,s)||q8(i,s));return i},t4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],q3e=yG,V3e=t4,Nm=Object.keys||function(r){return q3e(r,V3e)},G3e=ni,Y3e=aG,Z3e=no,X3e=io,J3e=Ia,Q3e=Nm;X_.f=G3e&&!Y3e?Object.defineProperties:function(r,t){X3e(r);for(var n=J3e(t),i=Q3e(t),s=i.length,o=0,a;s>o;)Z3e.f(r,a=i[o++],n[a]);return r};var ePe=fs,mG=ePe("document","documentElement"),tPe=Bc,rPe=K_,V8=tPe("keys"),J_=function(e){return V8[e]||(V8[e]=rPe(e))},nPe=io,iPe=X_,G8=t4,sPe=Pm,oPe=mG,aPe=ZP,lPe=J_,Y8=">",Z8="<",aA="prototype",lA="script",bG=lPe("IE_PROTO"),lS=function(){},wG=function(e){return Z8+lA+Y8+e+Z8+"/"+lA+Y8},X8=function(e){e.write(wG("")),e.close();var r=e.parentWindow.Object;return e=null,r},uPe=function(){var e=aPe("iframe"),r="java"+lA+":",t;return e.style.display="none",oPe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(wG("document.F=Object")),t.close(),t.F},Yb,Q1=function(){try{Yb=new ActiveXObject("htmlfile")}catch{}Q1=typeof document<"u"?document.domain&&Yb?X8(Yb):uPe():X8(Yb);for(var e=G8.length;e--;)delete Q1[aA][G8[e]];return Q1()};sPe[bG]=!0;var Lh=Object.create||function(r,t){var n;return r!==null?(lS[aA]=nPe(r),n=new lS,lS[aA]=null,n[bG]=r):n=Q1(),t===void 0?n:iPe.f(n,t)},Rm={},cPe=yG,fPe=t4,hPe=fPe.concat("length","prototype");Rm.f=Object.getOwnPropertyNames||function(r){return cPe(r,hPe)};var r4={},J8=Cm,dPe=so,pPe=Ev,vPe=Array,gPe=Math.max,$G=function(e,r,t){for(var n=dPe(e),i=J8(r,n),s=J8(t===void 0?n:t,n),o=vPe(gPe(s-i,0)),a=0;i<s;i++,a++)pPe(o,a,e[i]);return o.length=a,o},yPe=mu,mPe=Ia,_G=Rm.f,bPe=$G,xG=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wPe=function(e){try{return _G(e)}catch{return bPe(xG)}};r4.f=function(r){return xG&&yPe(r)=="Window"?wPe(r):_G(mPe(r))};var Dm={};Dm.f=Object.getOwnPropertySymbols;var $Pe=bu,Sv=function(e,r,t,n){return n&&n.enumerable?e[r]=t:$Pe(e,r,t),e},_Pe=no,n4=function(e,r,t){return _Pe.f(e,r,t)},Bm={},xPe=an;Bm.f=xPe;var Q8=Kr,EPe=qn,SPe=Bm,kPe=no.f,wn=function(e){var r=Q8.Symbol||(Q8.Symbol={});EPe(r,e)||kPe(r,e,{value:SPe.f(e)})},TPe=yi,IPe=fs,APe=an,OPe=Sv,EG=function(){var e=IPe("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=APe("toPrimitive");r&&!r[n]&&OPe(r,n,function(i){return TPe(t,this)},{arity:1})},CPe=JP,PPe=wu,NPe=CPe?{}.toString:function(){return"[object "+PPe(this)+"]"},RPe=JP,DPe=no.f,BPe=bu,MPe=qn,LPe=NPe,FPe=an,eM=FPe("toStringTag"),Fh=function(e,r,t,n){if(e){var i=t?e:e.prototype;MPe(i,eM)||DPe(i,eM,{configurable:!0,value:r}),n&&!RPe&&BPe(i,"toString",LPe)}},jPe=mn,HPe=bn,tM=jPe.WeakMap,zPe=HPe(tM)&&/native code/.test(String(tM)),UPe=zPe,SG=mn,WPe=mi,KPe=bu,uS=qn,cS=YP,qPe=J_,VPe=Pm,rM="Object already initialized",uA=SG.TypeError,GPe=SG.WeakMap,s$,Fy,o$,YPe=function(e){return o$(e)?Fy(e):s$(e,{})},ZPe=function(e){return function(r){var t;if(!WPe(r)||(t=Fy(r)).type!==e)throw uA("Incompatible receiver, "+e+" required");return t}};if(UPe||cS.state){var Ga=cS.state||(cS.state=new GPe);Ga.get=Ga.get,Ga.has=Ga.has,Ga.set=Ga.set,s$=function(e,r){if(Ga.has(e))throw uA(rM);return r.facade=e,Ga.set(e,r),r},Fy=function(e){return Ga.get(e)||{}},o$=function(e){return Ga.has(e)}}else{var Od=qPe("state");VPe[Od]=!0,s$=function(e,r){if(uS(e,Od))throw uA(rM);return r.facade=e,KPe(e,Od,r),r},Fy=function(e){return uS(e,Od)?e[Od]:{}},o$=function(e){return uS(e,Od)}}var kv={set:s$,get:Fy,has:o$,enforce:YPe,getterFor:ZPe},XPe=Gc,JPe=Mr,QPe=W_,e4e=Bs,t4e=so,r4e=Z_,nM=JPe([].push),ec=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,h,c){for(var p=e4e(l),m=QPe(p),w=XPe(u,h),b=t4e(m),T=0,_=c||r4e,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in m)&&(x=m[T],I=w(x,T,p),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:nM(A,x)}else switch(e){case 4:return!1;case 7:nM(A,x)}return s?-1:n||i?i:A}},Tv={forEach:ec(0),map:ec(1),filter:ec(2),some:ec(3),every:ec(4),find:ec(5),findIndex:ec(6),filterReject:ec(7)},Q_=Nt,i4=mn,s4=yi,n4e=Mr,Up=ni,Wp=_v,i4e=kr,fi=qn,s4e=on,cA=io,ex=Ia,o4=q_,o4e=yl,fA=Mh,jy=Lh,kG=Nm,a4e=Rm,TG=r4,l4e=Dm,IG=Bh,AG=no,u4e=X_,OG=Sm,iM=Sv,c4e=n4,a4=Bc,f4e=J_,CG=Pm,sM=K_,h4e=an,d4e=Bm,p4e=wn,v4e=EG,g4e=Fh,PG=kv,tx=Tv.forEach,Ss=f4e("hidden"),rx="Symbol",Hy="prototype",y4e=PG.set,oM=PG.getterFor(rx),pa=Object[Hy],ah=i4.Symbol,zg=ah&&ah[Hy],m4e=i4.TypeError,fS=i4.QObject,NG=IG.f,Mf=AG.f,RG=TG.f,b4e=OG.f,DG=n4e([].push),fu=a4("symbols"),Mm=a4("op-symbols"),w4e=a4("wks"),hA=!fS||!fS[Hy]||!fS[Hy].findChild,dA=Up&&i4e(function(){return jy(Mf({},"a",{get:function(){return Mf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=NG(pa,r);n&&delete pa[r],Mf(e,r,t),n&&e!==pa&&Mf(pa,r,n)}:Mf,hS=function(e,r){var t=fu[e]=jy(zg);return y4e(t,{type:rx,tag:e,description:r}),Up||(t.description=r),t},nx=function(r,t,n){r===pa&&nx(Mm,t,n),cA(r);var i=o4(t);return cA(n),fi(fu,i)?(n.enumerable?(fi(r,Ss)&&r[Ss][i]&&(r[Ss][i]=!1),n=jy(n,{enumerable:fA(0,!1)})):(fi(r,Ss)||Mf(r,Ss,fA(1,{})),r[Ss][i]=!0),dA(r,i,n)):Mf(r,i,n)},l4=function(r,t){cA(r);var n=ex(t),i=kG(n).concat(FG(n));return tx(i,function(s){(!Up||s4(BG,n,s))&&nx(r,s,n[s])}),r},$4e=function(r,t){return t===void 0?jy(r):l4(jy(r),t)},BG=function(r){var t=o4(r),n=s4(b4e,this,t);return this===pa&&fi(fu,t)&&!fi(Mm,t)?!1:n||!fi(this,t)||!fi(fu,t)||fi(this,Ss)&&this[Ss][t]?n:!0},MG=function(r,t){var n=ex(r),i=o4(t);if(!(n===pa&&fi(fu,i)&&!fi(Mm,i))){var s=NG(n,i);return s&&fi(fu,i)&&!(fi(n,Ss)&&n[Ss][i])&&(s.enumerable=!0),s}},LG=function(r){var t=RG(ex(r)),n=[];return tx(t,function(i){!fi(fu,i)&&!fi(CG,i)&&DG(n,i)}),n},FG=function(e){var r=e===pa,t=RG(r?Mm:ex(e)),n=[];return tx(t,function(i){fi(fu,i)&&(!r||fi(pa,i))&&DG(n,fu[i])}),n};Wp||(ah=function(){if(s4e(zg,this))throw m4e("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:o4e(arguments[0]),t=sM(r),n=function(i){this===pa&&s4(n,Mm,i),fi(this,Ss)&&fi(this[Ss],t)&&(this[Ss][t]=!1),dA(this,t,fA(1,i))};return Up&&hA&&dA(pa,t,{configurable:!0,set:n}),hS(t,r)},zg=ah[Hy],iM(zg,"toString",function(){return oM(this).tag}),iM(ah,"withoutSetter",function(e){return hS(sM(e),e)}),OG.f=BG,AG.f=nx,u4e.f=l4,IG.f=MG,a4e.f=TG.f=LG,l4e.f=FG,d4e.f=function(e){return hS(h4e(e),e)},Up&&c4e(zg,"description",{configurable:!0,get:function(){return oM(this).description}}));Q_({global:!0,constructor:!0,wrap:!0,forced:!Wp,sham:!Wp},{Symbol:ah});tx(kG(w4e),function(e){p4e(e)});Q_({target:rx,stat:!0,forced:!Wp},{useSetter:function(){hA=!0},useSimple:function(){hA=!1}});Q_({target:"Object",stat:!0,forced:!Wp,sham:!Up},{create:$4e,defineProperty:nx,defineProperties:l4,getOwnPropertyDescriptor:MG});Q_({target:"Object",stat:!0,forced:!Wp},{getOwnPropertyNames:LG});v4e();g4e(ah,rx);CG[Ss]=!0;var _4e=_v,jG=_4e&&!!Symbol.for&&!!Symbol.keyFor,x4e=Nt,E4e=fs,S4e=qn,k4e=yl,HG=Bc,T4e=jG,dS=HG("string-to-symbol-registry"),I4e=HG("symbol-to-string-registry");x4e({target:"Symbol",stat:!0,forced:!T4e},{for:function(e){var r=k4e(e);if(S4e(dS,r))return dS[r];var t=E4e("Symbol")(r);return dS[r]=t,I4e[t]=r,t}});var A4e=Nt,O4e=qn,C4e=Im,P4e=xv,N4e=Bc,R4e=jG,aM=N4e("symbol-to-string-registry");A4e({target:"Symbol",stat:!0,forced:!R4e},{keyFor:function(r){if(!C4e(r))throw TypeError(P4e(r)+" is not a symbol");if(O4e(aM,r))return aM[r]}});var D4e=Mr,Lm=D4e([].slice),B4e=Mr,lM=Yc,M4e=bn,uM=mu,L4e=yl,cM=B4e([].push),F4e=function(e){if(M4e(e))return e;if(lM(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?cM(t,i):(typeof i=="number"||uM(i)=="Number"||uM(i)=="String")&&cM(t,L4e(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(lM(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},j4e=Nt,zG=fs,UG=wv,H4e=yi,Fm=Mr,WG=kr,fM=bn,hM=Im,KG=Lm,z4e=F4e,U4e=_v,W4e=String,xc=zG("JSON","stringify"),Zb=Fm(/./.exec),dM=Fm("".charAt),K4e=Fm("".charCodeAt),q4e=Fm("".replace),V4e=Fm(1 .toString),G4e=/[\uD800-\uDFFF]/g,pM=/^[\uD800-\uDBFF]$/,vM=/^[\uDC00-\uDFFF]$/,gM=!U4e||WG(function(){var e=zG("Symbol")();return xc([e])!="[null]"||xc({a:e})!="{}"||xc(Object(e))!="{}"}),yM=WG(function(){return xc("\uDF06\uD834")!=='"\\udf06\\ud834"'||xc("\uDEAD")!=='"\\udead"'}),Y4e=function(e,r){var t=KG(arguments),n=z4e(r);if(!(!fM(n)&&(e===void 0||hM(e))))return t[1]=function(i,s){if(fM(n)&&(s=H4e(n,this,W4e(i),s)),!hM(s))return s},UG(xc,null,t)},Z4e=function(e,r,t){var n=dM(t,r-1),i=dM(t,r+1);return Zb(pM,e)&&!Zb(vM,i)||Zb(vM,e)&&!Zb(pM,n)?"\\u"+V4e(K4e(e,0),16):e};xc&&j4e({target:"JSON",stat:!0,arity:3,forced:gM||yM},{stringify:function(r,t,n){var i=KG(arguments),s=UG(gM?Y4e:xc,null,i);return yM&&typeof s=="string"?q4e(s,G4e,Z4e):s}});var X4e=Nt,J4e=_v,Q4e=kr,qG=Dm,eNe=Bs,tNe=!J4e||Q4e(function(){qG.f(1)});X4e({target:"Object",stat:!0,forced:tNe},{getOwnPropertySymbols:function(r){var t=qG.f;return t?t(eNe(r)):[]}});var rNe=wn;rNe("asyncIterator");var nNe=wn;nNe("hasInstance");var iNe=wn;iNe("isConcatSpreadable");var sNe=wn;sNe("iterator");var oNe=wn;oNe("match");var aNe=wn;aNe("matchAll");var lNe=wn;lNe("replace");var uNe=wn;uNe("search");var cNe=wn;cNe("species");var fNe=wn;fNe("split");var hNe=wn,dNe=EG;hNe("toPrimitive");dNe();var pNe=fs,vNe=wn,gNe=Fh;vNe("toStringTag");gNe(pNe("Symbol"),"Symbol");var yNe=wn;yNe("unscopables");var mNe=mn,bNe=Fh;bNe(mNe.JSON,"JSON",!0);var wNe=Kr,$Ne=wNe.Symbol,Iv={},pA=ni,_Ne=qn,VG=Function.prototype,xNe=pA&&Object.getOwnPropertyDescriptor,u4=_Ne(VG,"name"),ENe=u4&&(function(){}).name==="something",SNe=u4&&(!pA||pA&&xNe(VG,"name").configurable),GG={EXISTS:u4,PROPER:ENe,CONFIGURABLE:SNe},kNe=kr,YG=!kNe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),TNe=qn,INe=bn,ANe=Bs,ONe=J_,CNe=YG,mM=ONe("IE_PROTO"),vA=Object,PNe=vA.prototype,ix=CNe?vA.getPrototypeOf:function(e){var r=ANe(e);if(TNe(r,mM))return r[mM];var t=r.constructor;return INe(t)&&r instanceof t?t.prototype:r instanceof vA?PNe:null},NNe=kr,RNe=bn,DNe=mi,BNe=Lh,bM=ix,MNe=Sv,LNe=an,gA=LNe("iterator"),ZG=!1,Jl,pS,vS;[].keys&&(vS=[].keys(),"next"in vS?(pS=bM(bM(vS)),pS!==Object.prototype&&(Jl=pS)):ZG=!0);var FNe=!DNe(Jl)||NNe(function(){var e={};return Jl[gA].call(e)!==e});FNe?Jl={}:Jl=BNe(Jl);RNe(Jl[gA])||MNe(Jl,gA,function(){return this});var XG={IteratorPrototype:Jl,BUGGY_SAFARI_ITERATORS:ZG},jNe=XG.IteratorPrototype,HNe=Lh,zNe=Mh,UNe=Fh,WNe=Iv,KNe=function(){return this},qNe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=HNe(jNe,{next:zNe(+!n,t)}),UNe(e,i,!1,!0),WNe[i]=KNe,e},VNe=Mr,GNe=Ds,YNe=function(e,r,t){try{return VNe(GNe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},ZNe=bn,XNe=String,JNe=TypeError,QNe=function(e){if(typeof e=="object"||ZNe(e))return e;throw JNe("Can't set "+XNe(e)+" as a prototype")},eRe=YNe,tRe=io,rRe=QNe,JG=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=eRe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return tRe(i),rRe(s),e?t(i,s):i.__proto__=s,i}}():void 0),nRe=Nt,iRe=yi,sRe=GG,oRe=qNe,aRe=ix,lRe=Fh,wM=Sv,uRe=an,$M=Iv,cRe=XG,fRe=sRe.PROPER,Xb=cRe.BUGGY_SAFARI_ITERATORS,gS=uRe("iterator"),_M="keys",Jb="values",xM="entries",hRe=function(){return this},c4=function(e,r,t,n,i,s,o){oRe(t,r,n);var a=function(_){if(_===i&&p)return p;if(!Xb&&_ in h)return h[_];switch(_){case _M:return function(){return new t(this,_)};case Jb:return function(){return new t(this,_)};case xM:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,c=h[gS]||h["@@iterator"]||i&&h[i],p=!Xb&&c||a(i),m=r=="Array"&&h.entries||c,w,b,T;if(m&&(w=aRe(m.call(new e)),w!==Object.prototype&&w.next&&(lRe(w,l,!0,!0),$M[l]=hRe)),fRe&&i==Jb&&c&&c.name!==Jb&&(u=!0,p=function(){return iRe(c,this)}),i)if(b={values:a(Jb),keys:s?p:a(_M),entries:a(xM)},o)for(T in b)(Xb||u||!(T in h))&&wM(h,T,b[T]);else nRe({target:r,proto:!0,forced:Xb||u},b);return o&&h[gS]!==p&&wM(h,gS,p,{name:i}),$M[r]=p,b},f4=function(e,r){return{value:e,done:r}},dRe=Ia,EM=Iv,QG=kv;no.f;var pRe=c4,Qb=f4,eY="Array Iterator",vRe=QG.set,gRe=QG.getterFor(eY);pRe(Array,"Array",function(e,r){vRe(this,{type:eY,target:dRe(e),index:0,kind:r})},function(){var e=gRe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,Qb(void 0,!0)):t=="keys"?Qb(n,!1):t=="values"?Qb(r[n],!1):Qb([n,r[n]],!1)},"values");EM.Arguments=EM.Array;var yRe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},mRe=yRe,bRe=mn,wRe=wu,$Re=bu,SM=Iv,_Re=an,kM=_Re("toStringTag");for(var yS in mRe){var TM=bRe[yS],mS=TM&&TM.prototype;mS&&wRe(mS)!==kM&&$Re(mS,kM,yS),SM[yS]=SM.Array}var xRe=$Ne,tY=xRe,ERe=wn;ERe("dispose");var SRe=tY,kRe=SRe,TRe=wn;TRe("asyncDispose");var IRe=Nt,ARe=fs,ORe=Mr,rY=ARe("Symbol"),CRe=rY.keyFor,PRe=ORe(rY.prototype.valueOf);IRe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return CRe(PRe(r))!==void 0}catch{return!1}}});var NRe=Nt,RRe=Bc,nY=fs,DRe=Mr,BRe=Im,MRe=an,a$=nY("Symbol"),IM=a$.isWellKnown,iY=nY("Object","getOwnPropertyNames"),LRe=DRe(a$.prototype.valueOf),AM=RRe("wks");for(var bS=0,OM=iY(a$),FRe=OM.length;bS<FRe;bS++)try{var CM=OM[bS];BRe(a$[CM])&&MRe(CM)}catch{}NRe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(IM&&IM(r))return!0;try{for(var t=LRe(r),n=0,i=iY(AM),s=i.length;n<s;n++)if(AM[i[n]]==t)return!0}catch{}return!1}});var jRe=wn;jRe("matcher");var HRe=wn;HRe("metadataKey");var zRe=wn;zRe("observable");var URe=wn;URe("metadata");var WRe=wn;WRe("patternMatch");var KRe=wn;KRe("replaceAll");var qRe=kRe,VRe=qRe;(function(e){e.exports=VRe})(OCe);(function(e){e.exports=sA})(ACe);var Zd=Gt(Ly),l$={},GRe={get exports(){return l$},set exports(e){l$=e}},yA={},YRe={get exports(){return yA},set exports(e){yA=e}},h4=Mr,ZRe=G_,XRe=yl,JRe=Tm,QRe=h4("".charAt),PM=h4("".charCodeAt),eDe=h4("".slice),NM=function(e){return function(r,t){var n=XRe(JRe(r)),i=ZRe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=PM(n,i),o<55296||o>56319||i+1===s||(a=PM(n,i+1))<56320||a>57343?e?QRe(n,i):o:e?eDe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},tDe={codeAt:NM(!1),charAt:NM(!0)},rDe=tDe.charAt,nDe=yl,sY=kv,iDe=c4,RM=f4,oY="String Iterator",sDe=sY.set,oDe=sY.getterFor(oY);iDe(String,"String",function(e){sDe(this,{type:oY,string:nDe(e),index:0})},function(){var r=oDe(this),t=r.string,n=r.index,i;return n>=t.length?RM(void 0,!0):(i=rDe(t,n),r.index+=i.length,RM(i,!1))});var aDe=Bm,lDe=aDe.f("iterator"),uDe=lDe,aY=uDe,cDe=aY,fDe=cDe,hDe=fDe,dDe=hDe;(function(e){e.exports=dDe})(YRe);(function(e){e.exports=yA})(GRe);var pDe=Gt(l$);function Ai(e){"@babel/helpers - typeof";return Ai=typeof Zd=="function"&&typeof pDe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Zd=="function"&&r.constructor===Zd&&r!==Zd.prototype?"symbol":typeof r},Ai(e)}var mA={},vDe={get exports(){return mA},set exports(e){mA=e}},bA={},gDe={get exports(){return bA},set exports(e){bA=e}},yDe=Bm,mDe=yDe.f("toPrimitive"),bDe=mDe,wDe=bDe,$De=wDe,_De=$De,xDe=_De,EDe=xDe;(function(e){e.exports=EDe})(gDe);(function(e){e.exports=bA})(vDe);var SDe=Gt(mA);function kDe(e,r){if(Ai(e)!=="object"||e===null)return e;var t=e[SDe];if(t!==void 0){var n=t.call(e,r||"default");if(Ai(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function lY(e){var r=kDe(e,"string");return Ai(r)==="symbol"?r:String(r)}function DM(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),V_(e,lY(n.key),n)}}function sx(e,r,t){return r&&DM(e.prototype,r),t&&DM(e,t),V_(e,"prototype",{writable:!1}),e}function Sn(e,r,t){return r=lY(r),r in e?V_(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var wA={},TDe={get exports(){return wA},set exports(e){wA=e}},uY=Mr,IDe=Ds,ADe=mi,ODe=qn,BM=Lm,CDe=Em,cY=Function,PDe=uY([].concat),NDe=uY([].join),wS={},RDe=function(e,r,t){if(!ODe(wS,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";wS[r]=cY("C,a","return new C("+NDe(n,",")+")")}return wS[r](e,t)},fY=CDe?cY.bind:function(r){var t=IDe(this),n=t.prototype,i=BM(arguments,1),s=function(){var a=PDe(i,BM(arguments));return this instanceof s?RDe(t,a.length,a):t.apply(r,a)};return ADe(n)&&(s.prototype=n),s},DDe=Nt,MM=fY;DDe({target:"Function",proto:!0,forced:Function.bind!==MM},{bind:MM});var BDe=Kr,Vn=function(e){return BDe[e+"Prototype"]},MDe=Vn,LDe=MDe("Function").bind,FDe=on,jDe=LDe,$S=Function.prototype,HDe=function(e){var r=e.bind;return e===$S||FDe($S,e)&&r===$S.bind?jDe:r},zDe=HDe,hY=zDe;(function(e){e.exports=hY})(TDe);var dY=Gt(wA),$A={},UDe={get exports(){return $A},set exports(e){$A=e}},WDe=Ds,KDe=Bs,qDe=W_,VDe=so,GDe=TypeError,LM=function(e){return function(r,t,n,i){WDe(t);var s=KDe(r),o=qDe(s),a=VDe(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw GDe("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},YDe={left:LM(!1),right:LM(!0)},ZDe=kr,jm=function(e,r){var t=[][e];return!!t&&ZDe(function(){t.call(null,r||function(){return 1},1)})},XDe=mu,Hm=typeof process<"u"&&XDe(process)=="process",JDe=Nt,QDe=YDe.left,eBe=jm,FM=$v,tBe=Hm,rBe=!tBe&&FM>79&&FM<83,nBe=rBe||!eBe("reduce");JDe({target:"Array",proto:!0,forced:nBe},{reduce:function(r){var t=arguments.length;return QDe(this,r,t,t>1?arguments[1]:void 0)}});var iBe=Vn,sBe=iBe("Array").reduce,oBe=on,aBe=sBe,_S=Array.prototype,lBe=function(e){var r=e.reduce;return e===_S||oBe(_S,e)&&r===_S.reduce?aBe:r},uBe=lBe,cBe=uBe;(function(e){e.exports=cBe})(UDe);var fBe=Gt($A),_A={},hBe={get exports(){return _A},set exports(e){_A=e}},dBe=Nt,pBe=Tv.filter,vBe=Om,gBe=vBe("filter");dBe({target:"Array",proto:!0,forced:!gBe},{filter:function(r){return pBe(this,r,arguments.length>1?arguments[1]:void 0)}});var yBe=Vn,mBe=yBe("Array").filter,bBe=on,wBe=mBe,xS=Array.prototype,$Be=function(e){var r=e.filter;return e===xS||bBe(xS,e)&&r===xS.filter?wBe:r},_Be=$Be,xBe=_Be;(function(e){e.exports=xBe})(hBe);var Xd=Gt(_A),xA={},EBe={get exports(){return xA},set exports(e){xA=e}},SBe=Nt,kBe=Tv.map,TBe=Om,IBe=TBe("map");SBe({target:"Array",proto:!0,forced:!IBe},{map:function(r){return kBe(this,r,arguments.length>1?arguments[1]:void 0)}});var ABe=Vn,OBe=ABe("Array").map,CBe=on,PBe=OBe,ES=Array.prototype,NBe=function(e){var r=e.map;return e===ES||CBe(ES,e)&&r===ES.map?PBe:r},RBe=NBe,DBe=RBe;(function(e){e.exports=DBe})(EBe);var la=Gt(xA),jM={},BBe={get exports(){return jM},set exports(e){jM=e}},MBe=Yc,LBe=so,FBe=XP,jBe=Gc,pY=function(e,r,t,n,i,s,o,a){for(var l=i,u=0,h=o?jBe(o,a):!1,c,p;u<n;)u in t&&(c=h?h(t[u],u,r):t[u],s>0&&MBe(c)?(p=LBe(c),l=pY(e,r,c,p,l,s-1)-1):(FBe(l+1),e[l]=c),l++),u++;return l},HBe=pY,zBe=Nt,UBe=HBe,WBe=Ds,KBe=Bs,qBe=so,VBe=Z_;zBe({target:"Array",proto:!0},{flatMap:function(r){var t=KBe(this),n=qBe(t),i;return WBe(r),i=VBe(t,0),i.length=UBe(i,t,t,n,0,1,r,arguments.length>1?arguments[1]:void 0),i}});var GBe=Vn,YBe=GBe("Array").flatMap,ZBe=on,XBe=YBe,SS=Array.prototype,JBe=function(e){var r=e.flatMap;return e===SS||ZBe(SS,e)&&r===SS.flatMap?XBe:r},QBe=JBe,e6e=QBe;(function(e){e.exports=e6e})(BBe);var EA={},t6e={get exports(){return EA},set exports(e){EA=e}},r6e=yi,HM=io,n6e=GP,vY=function(e,r,t){var n,i;HM(e);try{if(n=n6e(e,"return"),!n){if(r==="throw")throw t;return t}n=r6e(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return HM(n),t},i6e=io,s6e=vY,o6e=function(e,r,t,n){try{return n?r(i6e(t)[0],t[1]):r(t)}catch(i){s6e(e,"throw",i)}},a6e=an,l6e=Iv,u6e=a6e("iterator"),c6e=Array.prototype,gY=function(e){return e!==void 0&&(l6e.Array===e||c6e[u6e]===e)},f6e=wu,zM=GP,h6e=km,d6e=Iv,p6e=an,v6e=p6e("iterator"),ox=function(e){if(!h6e(e))return zM(e,v6e)||zM(e,"@@iterator")||d6e[f6e(e)]},g6e=yi,y6e=Ds,m6e=io,b6e=xv,w6e=ox,$6e=TypeError,d4=function(e,r){var t=arguments.length<2?w6e(e):r;if(y6e(t))return m6e(g6e(t,e));throw $6e(b6e(e)+" is not iterable")},_6e=Gc,x6e=yi,E6e=Bs,S6e=o6e,k6e=gY,T6e=Y_,I6e=so,UM=Ev,A6e=d4,O6e=ox,WM=Array,C6e=function(r){var t=E6e(r),n=T6e(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=_6e(s,i>2?arguments[2]:void 0));var a=O6e(t),l=0,u,h,c,p,m,w;if(a&&!(this===WM&&k6e(a)))for(p=A6e(t,a),m=p.next,h=n?new this:[];!(c=x6e(m,p)).done;l++)w=o?S6e(p,s,[c.value,l],!0):c.value,UM(h,l,w);else for(u=I6e(t),h=n?new this(u):WM(u);u>l;l++)w=o?s(t[l],l):t[l],UM(h,l,w);return h.length=l,h},P6e=an,yY=P6e("iterator"),mY=!1;try{var N6e=0,KM={next:function(){return{done:!!N6e++}},return:function(){mY=!0}};KM[yY]=function(){return this},Array.from(KM,function(){throw 2})}catch{}var bY=function(e,r){if(!r&&!mY)return!1;var t=!1;try{var n={};n[yY]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},R6e=Nt,D6e=C6e,B6e=bY,M6e=!B6e(function(e){Array.from(e)});R6e({target:"Array",stat:!0,forced:M6e},{from:D6e});var L6e=Kr,F6e=L6e.Array.from,j6e=F6e,wY=j6e;(function(e){e.exports=wY})(t6e);var p4=Gt(EA),SA={},H6e={get exports(){return SA},set exports(e){SA=e}},kA={},z6e={get exports(){return kA},set exports(e){kA=e}},U6e=ox,W6e=U6e,K6e=W6e,q6e=K6e,V6e=q6e,G6e=V6e,Y6e=G6e,Z6e=Y6e;(function(e){e.exports=Z6e})(z6e);(function(e){e.exports=kA})(H6e);var zm=Gt(SA),TA={},X6e={get exports(){return TA},set exports(e){TA=e}},J6e=Kr,Q6e=J6e.Object.getOwnPropertySymbols,e8e=Q6e,t8e=e8e;(function(e){e.exports=t8e})(X6e);var qM=Gt(TA),IA={},r8e={get exports(){return IA},set exports(e){IA=e}},AA={},n8e={get exports(){return AA},set exports(e){AA=e}},i8e=Nt,s8e=kr,o8e=Ia,$Y=Bh.f,_Y=ni,a8e=!_Y||s8e(function(){$Y(1)});i8e({target:"Object",stat:!0,forced:a8e,sham:!_Y},{getOwnPropertyDescriptor:function(r,t){return $Y(o8e(r),t)}});var l8e=Kr,xY=l8e.Object,u8e=n8e.exports=function(r,t){return xY.getOwnPropertyDescriptor(r,t)};xY.getOwnPropertyDescriptor.sham&&(u8e.sham=!0);var c8e=AA,f8e=c8e;(function(e){e.exports=f8e})(r8e);var EY=Gt(IA),OA={},h8e={get exports(){return OA},set exports(e){OA=e}},d8e=fs,p8e=Mr,v8e=Rm,g8e=Dm,y8e=io,m8e=p8e([].concat),v4=d8e("Reflect","ownKeys")||function(r){var t=v8e.f(y8e(r)),n=g8e.f;return n?m8e(t,n(r)):t},b8e=Nt,w8e=ni,$8e=v4,_8e=Ia,x8e=Bh,E8e=Ev;b8e({target:"Object",stat:!0,sham:!w8e},{getOwnPropertyDescriptors:function(r){for(var t=_8e(r),n=x8e.f,i=$8e(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&E8e(s,a,l);return s}});var S8e=Kr,k8e=S8e.Object.getOwnPropertyDescriptors,T8e=k8e,I8e=T8e;(function(e){e.exports=I8e})(h8e);var VM=Gt(OA),CA={},A8e={get exports(){return CA},set exports(e){CA=e}},PA={},O8e={get exports(){return PA},set exports(e){PA=e}},C8e=Nt,P8e=ni,GM=X_.f;C8e({target:"Object",stat:!0,forced:Object.defineProperties!==GM,sham:!P8e},{defineProperties:GM});var N8e=Kr,SY=N8e.Object,R8e=O8e.exports=function(r,t){return SY.defineProperties(r,t)};SY.defineProperties.sham&&(R8e.sham=!0);var D8e=PA,B8e=D8e;(function(e){e.exports=B8e})(A8e);var M8e=Gt(CA),NA={},L8e={get exports(){return NA},set exports(e){NA=e}};(function(e){e.exports=uG})(L8e);var F8e=Gt(NA),RA={},j8e={get exports(){return RA},set exports(e){RA=e}},DA={},H8e={get exports(){return DA},set exports(e){DA=e}},z8e=Nt,U8e=Yc;z8e({target:"Array",stat:!0},{isArray:U8e});var W8e=Kr,K8e=W8e.Array.isArray,q8e=K8e,kY=q8e,V8e=kY,G8e=V8e,Y8e=G8e,Z8e=Y8e;(function(e){e.exports=Z8e})(H8e);(function(e){e.exports=DA})(j8e);var TY=Gt(RA);function X8e(e){if(TY(e))return e}function J8e(e,r){var t=e==null?null:typeof Zd<"u"&&zm(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var u$={},Q8e={get exports(){return u$},set exports(e){u$=e}},BA={},eMe={get exports(){return BA},set exports(e){BA=e}},tMe=Nt,YM=Yc,rMe=Y_,nMe=mi,ZM=Cm,iMe=so,sMe=Ia,oMe=Ev,aMe=an,lMe=Om,uMe=Lm,cMe=lMe("slice"),fMe=aMe("species"),kS=Array,hMe=Math.max;tMe({target:"Array",proto:!0,forced:!cMe},{slice:function(r,t){var n=sMe(this),i=iMe(n),s=ZM(r,i),o=ZM(t===void 0?i:t,i),a,l,u;if(YM(n)&&(a=n.constructor,rMe(a)&&(a===kS||YM(a.prototype))?a=void 0:nMe(a)&&(a=a[fMe],a===null&&(a=void 0)),a===kS||a===void 0))return uMe(n,s,o);for(l=new(a===void 0?kS:a)(hMe(o-s,0)),u=0;s<o;s++,u++)s in n&&oMe(l,u,n[s]);return l.length=u,l}});var dMe=Vn,pMe=dMe("Array").slice,vMe=on,gMe=pMe,TS=Array.prototype,yMe=function(e){var r=e.slice;return e===TS||vMe(TS,e)&&r===TS.slice?gMe:r},mMe=yMe,IY=mMe,bMe=IY,wMe=bMe,$Me=wMe,_Me=$Me;(function(e){e.exports=_Me})(eMe);(function(e){e.exports=BA})(Q8e);var xMe=Gt(u$),MA={},EMe={get exports(){return MA},set exports(e){MA=e}},LA={},SMe={get exports(){return LA},set exports(e){LA=e}},kMe=wY,TMe=kMe,IMe=TMe,AMe=IMe;(function(e){e.exports=AMe})(SMe);(function(e){e.exports=LA})(EMe);var AY=Gt(MA);function FA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function OY(e,r){var t;if(e){if(typeof e=="string")return FA(e,r);var n=xMe(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return AY(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FA(e,r)}}function OMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(e,r){return X8e(e)||J8e(e,r)||OY(e,r)||OMe()}function CMe(e){if(TY(e))return FA(e)}function PMe(e){if(typeof Zd<"u"&&zm(e)!=null||e["@@iterator"]!=null)return AY(e)}function NMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(e){return CMe(e)||PMe(e)||OY(e)||NMe()}var jA={},RMe={get exports(){return jA},set exports(e){jA=e}};(function(e){e.exports=tY})(RMe);var ax=Gt(jA),HA={},DMe={get exports(){return HA},set exports(e){HA=e}},BMe=Vn,MMe=BMe("Array").concat,LMe=on,FMe=MMe,IS=Array.prototype,jMe=function(e){var r=e.concat;return e===IS||LMe(IS,e)&&r===IS.concat?FMe:r},HMe=jMe,zMe=HMe;(function(e){e.exports=zMe})(DMe);var lx=Gt(HA),zA={},UMe={get exports(){return zA},set exports(e){zA=e}};(function(e){e.exports=IY})(UMe);var ux=Gt(zA),UA={},WMe={get exports(){return UA},set exports(e){UA=e}},KMe=Nt,qMe=v4;KMe({target:"Reflect",stat:!0},{ownKeys:qMe});var VMe=Kr,GMe=VMe.Reflect.ownKeys,YMe=GMe,ZMe=YMe;(function(e){e.exports=ZMe})(WMe);var XMe=Gt(UA),WA={},JMe={get exports(){return WA},set exports(e){WA=e}};(function(e){e.exports=kY})(JMe);var Vs=Gt(WA),KA={},QMe={get exports(){return KA},set exports(e){KA=e}},e7e=Nt,t7e=Bs,CY=Nm,r7e=kr,n7e=r7e(function(){CY(1)});e7e({target:"Object",stat:!0,forced:n7e},{keys:function(r){return CY(t7e(r))}});var i7e=Kr,s7e=i7e.Object.keys,o7e=s7e,a7e=o7e;(function(e){e.exports=a7e})(QMe);var g4=Gt(KA),XM={},l7e={get exports(){return XM},set exports(e){XM=e}},u7e=Nt,c7e=Mr,PY=Date,f7e=c7e(PY.prototype.getTime);u7e({target:"Date",stat:!0},{now:function(){return f7e(new PY)}});var h7e=Kr,d7e=h7e.Date.now,p7e=d7e,v7e=p7e;(function(e){e.exports=v7e})(l7e);var qA={},g7e={get exports(){return qA},set exports(e){qA=e}},y7e=Tv.forEach,m7e=jm,b7e=m7e("forEach"),w7e=b7e?[].forEach:function(r){return y7e(this,r,arguments.length>1?arguments[1]:void 0)},$7e=Nt,JM=w7e;$7e({target:"Array",proto:!0,forced:[].forEach!=JM},{forEach:JM});var _7e=Vn,x7e=_7e("Array").forEach,E7e=x7e,S7e=E7e,k7e=wu,T7e=qn,I7e=on,A7e=S7e,AS=Array.prototype,O7e={DOMTokenList:!0,NodeList:!0},NY=function(e){var r=e.forEach;return e===AS||I7e(AS,e)&&r===AS.forEach||T7e(O7e,k7e(e))?A7e:r};(function(e){e.exports=NY})(g7e);var xh=Gt(qA),VA={},C7e={get exports(){return VA},set exports(e){VA=e}},P7e=Nt,N7e=Mr,R7e=Yc,D7e=N7e([].reverse),QM=[1,2];P7e({target:"Array",proto:!0,forced:String(QM)===String(QM.reverse())},{reverse:function(){return R7e(this)&&(this.length=this.length),D7e(this)}});var B7e=Vn,M7e=B7e("Array").reverse,L7e=on,F7e=M7e,OS=Array.prototype,j7e=function(e){var r=e.reverse;return e===OS||L7e(OS,e)&&r===OS.reverse?F7e:r},H7e=j7e,RY=H7e;(function(e){e.exports=RY})(C7e);var z7e=Gt(VA),GA={},U7e={get exports(){return GA},set exports(e){GA=e}},W7e=ni,K7e=Yc,q7e=TypeError,V7e=Object.getOwnPropertyDescriptor,G7e=W7e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Y7e=G7e?function(e,r){if(K7e(e)&&!V7e(e,"length").writable)throw q7e("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},e7=xv,Z7e=TypeError,DY=function(e,r){if(!delete e[r])throw Z7e("Cannot delete property "+e7(r)+" of "+e7(e))},X7e=Nt,J7e=Bs,Q7e=Cm,eLe=G_,tLe=so,rLe=Y7e,nLe=XP,iLe=Z_,sLe=Ev,CS=DY,oLe=Om,aLe=oLe("splice"),lLe=Math.max,uLe=Math.min;X7e({target:"Array",proto:!0,forced:!aLe},{splice:function(r,t){var n=J7e(this),i=tLe(n),s=Q7e(r,i),o=arguments.length,a,l,u,h,c,p;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=uLe(lLe(eLe(t),0),i-s)),nLe(i+a-l),u=iLe(n,l),h=0;h<l;h++)c=s+h,c in n&&sLe(u,h,n[c]);if(u.length=l,a<l){for(h=s;h<i-l;h++)c=h+l,p=h+a,c in n?n[p]=n[c]:CS(n,p);for(h=i;h>i-l+a;h--)CS(n,h-1)}else if(a>l)for(h=i-l;h>s;h--)c=h+l-1,p=h+a-1,c in n?n[p]=n[c]:CS(n,p);for(h=0;h<a;h++)n[h+s]=arguments[h+2];return rLe(n,i-l+a),u}});var cLe=Vn,fLe=cLe("Array").splice,hLe=on,dLe=fLe,PS=Array.prototype,pLe=function(e){var r=e.splice;return e===PS||hLe(PS,e)&&r===PS.splice?dLe:r},vLe=pLe,gLe=vLe;(function(e){e.exports=gLe})(U7e);var BY=Gt(GA),YA={},yLe={get exports(){return YA},set exports(e){YA=e}},t7=ni,mLe=Mr,bLe=yi,wLe=kr,NS=Nm,$Le=Dm,_Le=Sm,xLe=Bs,ELe=W_,Cd=Object.assign,r7=Object.defineProperty,SLe=mLe([].concat),kLe=!Cd||wLe(function(){if(t7&&Cd({b:1},Cd(r7({},"a",{enumerable:!0,get:function(){r7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Cd({},e)[t]!=7||NS(Cd({},r)).join("")!=n})?function(r,t){for(var n=xLe(r),i=arguments.length,s=1,o=$Le.f,a=_Le.f;i>s;)for(var l=ELe(arguments[s++]),u=o?SLe(NS(l),o(l)):NS(l),h=u.length,c=0,p;h>c;)p=u[c++],(!t7||bLe(a,l,p))&&(n[p]=l[p]);return n}:Cd,TLe=Nt,n7=kLe;TLe({target:"Object",stat:!0,arity:2,forced:Object.assign!==n7},{assign:n7});var ILe=Kr,ALe=ILe.Object.assign,OLe=ALe,CLe=OLe;(function(e){e.exports=CLe})(yLe);var PLe=Gt(YA),i7={},NLe={get exports(){return i7},set exports(e){i7=e}},RLe=Nt,DLe=e4.includes,BLe=kr,MLe=BLe(function(){return!Array(1).includes()});RLe({target:"Array",proto:!0,forced:MLe},{includes:function(r){return DLe(this,r,arguments.length>1?arguments[1]:void 0)}});var LLe=Vn,FLe=LLe("Array").includes,jLe=mi,HLe=mu,zLe=an,ULe=zLe("match"),WLe=function(e){var r;return jLe(e)&&((r=e[ULe])!==void 0?!!r:HLe(e)=="RegExp")},KLe=WLe,qLe=TypeError,VLe=function(e){if(KLe(e))throw qLe("The method doesn't accept regular expressions");return e},GLe=an,YLe=GLe("match"),ZLe=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[YLe]=!1,"/./"[e](r)}catch{}}return!1},XLe=Nt,JLe=Mr,QLe=VLe,eFe=Tm,s7=yl,tFe=ZLe,rFe=JLe("".indexOf);XLe({target:"String",proto:!0,forced:!tFe("includes")},{includes:function(r){return!!~rFe(s7(eFe(this)),s7(QLe(r)),arguments.length>1?arguments[1]:void 0)}});var nFe=Vn,iFe=nFe("String").includes,o7=on,sFe=FLe,oFe=iFe,RS=Array.prototype,DS=String.prototype,aFe=function(e){var r=e.includes;return e===RS||o7(RS,e)&&r===RS.includes?sFe:typeof e=="string"||e===DS||o7(DS,e)&&r===DS.includes?oFe:r},lFe=aFe,uFe=lFe;(function(e){e.exports=uFe})(NLe);var a7={},cFe={get exports(){return a7},set exports(e){a7=e}},fFe=Nt,hFe=kr,dFe=Bs,MY=ix,pFe=YG,vFe=hFe(function(){MY(1)});fFe({target:"Object",stat:!0,forced:vFe,sham:!pFe},{getPrototypeOf:function(r){return MY(dFe(r))}});var gFe=Kr,yFe=gFe.Object.getPrototypeOf,mFe=yFe,LY=mFe;(function(e){e.exports=LY})(cFe);var l7={},bFe={get exports(){return l7},set exports(e){l7=e}},wFe=ni,FY=Mr,$Fe=Nm,_Fe=Ia,xFe=Sm.f,EFe=FY(xFe),SFe=FY([].push),u7=function(e){return function(r){for(var t=_Fe(r),n=$Fe(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!wFe||EFe(t,a))&&SFe(o,e?[a,t[a]]:t[a]);return o}},kFe={entries:u7(!0),values:u7(!1)},TFe=Nt,IFe=kFe.values;TFe({target:"Object",stat:!0},{values:function(r){return IFe(r)}});var AFe=Kr,OFe=AFe.Object.values,CFe=OFe,PFe=CFe;(function(e){e.exports=PFe})(bFe);var c7={},NFe={get exports(){return c7},set exports(e){c7=e}},y4=`	
\v\f\r \u2028\u2029\uFEFF`,RFe=Mr,DFe=Tm,BFe=yl,ZA=y4,f7=RFe("".replace),MFe=RegExp("^["+ZA+"]+"),LFe=RegExp("(^|[^"+ZA+"])["+ZA+"]+$"),BS=function(e){return function(r){var t=BFe(DFe(r));return e&1&&(t=f7(t,MFe,"")),e&2&&(t=f7(t,LFe,"$1")),t}},jY={start:BS(1),end:BS(2),trim:BS(3)},HY=mn,FFe=kr,jFe=Mr,HFe=yl,zFe=jY.trim,h7=y4,ry=HY.parseInt,d7=HY.Symbol,p7=d7&&d7.iterator,zY=/^[+-]?0x/i,UFe=jFe(zY.exec),WFe=ry(h7+"08")!==8||ry(h7+"0x16")!==22||p7&&!FFe(function(){ry(Object(p7))}),KFe=WFe?function(r,t){var n=zFe(HFe(r));return ry(n,t>>>0||(UFe(zY,n)?16:10))}:ry,qFe=Nt,v7=KFe;qFe({global:!0,forced:parseInt!=v7},{parseInt:v7});var VFe=Kr,GFe=VFe.parseInt,YFe=GFe,ZFe=YFe;(function(e){e.exports=ZFe})(NFe);var g7={},XFe={get exports(){return g7},set exports(e){g7=e}},JFe=Nt,QFe=VP,e9e=e4.indexOf,t9e=jm,XA=QFe([].indexOf),UY=!!XA&&1/XA([1],1,-0)<0,r9e=UY||!t9e("indexOf");JFe({target:"Array",proto:!0,forced:r9e},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return UY?XA(this,r,t)||0:e9e(this,r,t)}});var n9e=Vn,i9e=n9e("Array").indexOf,s9e=on,o9e=i9e,MS=Array.prototype,a9e=function(e){var r=e.indexOf;return e===MS||s9e(MS,e)&&r===MS.indexOf?o9e:r},l9e=a9e,u9e=l9e;(function(e){e.exports=u9e})(XFe);var y7={},c9e={get exports(){return y7},set exports(e){y7=e}},f9e=GG.PROPER,h9e=kr,m7=y4,b7="",d9e=function(e){return h9e(function(){return!!m7[e]()||b7[e]()!==b7||f9e&&m7[e].name!==e})},p9e=Nt,v9e=jY.trim,g9e=d9e;p9e({target:"String",proto:!0,forced:g9e("trim")},{trim:function(){return v9e(this)}});var y9e=Vn,m9e=y9e("String").trim,b9e=on,w9e=m9e,LS=String.prototype,$9e=function(e){var r=e.trim;return typeof e=="string"||e===LS||b9e(LS,e)&&r===LS.trim?w9e:r},_9e=$9e,x9e=_9e;(function(e){e.exports=x9e})(c9e);var JA={},E9e={get exports(){return JA},set exports(e){JA=e}},S9e=Nt,k9e=ni,T9e=Lh;S9e({target:"Object",stat:!0,sham:!k9e},{create:T9e});var I9e=Kr,A9e=I9e.Object,O9e=function(r,t){return A9e.create(r,t)},C9e=O9e,WY=C9e;(function(e){e.exports=WY})(E9e);var P9e=Gt(JA),QA={},N9e={get exports(){return QA},set exports(e){QA=e}},eO=Kr,R9e=wv;eO.JSON||(eO.JSON={stringify:JSON.stringify});var D9e=function(r,t,n){return R9e(eO.JSON.stringify,null,arguments)},B9e=D9e,M9e=B9e;(function(e){e.exports=M9e})(N9e);var L9e=Gt(QA),tO={},F9e={get exports(){return tO},set exports(e){tO=e}},j9e=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",H9e=TypeError,KY=function(e,r){if(e<r)throw H9e("Not enough arguments");return e},qY=mn,z9e=wv,U9e=bn,W9e=j9e,K9e=Vc,q9e=Lm,V9e=KY,G9e=qY.Function,Y9e=/MSIE .\./.test(K9e)||W9e&&function(){var e=qY.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),VY=function(e,r){var t=r?2:1;return Y9e?function(n,i){var s=V9e(arguments.length,1)>t,o=U9e(n)?n:G9e(n),a=s?q9e(arguments,t):[],l=s?function(){z9e(o,this,a)}:o;return r?e(l,i):e(l)}:e},Z9e=Nt,GY=mn,X9e=VY,w7=X9e(GY.setInterval,!0);Z9e({global:!0,bind:!0,forced:GY.setInterval!==w7},{setInterval:w7});var J9e=Nt,YY=mn,Q9e=VY,$7=Q9e(YY.setTimeout,!0);J9e({global:!0,bind:!0,forced:YY.setTimeout!==$7},{setTimeout:$7});var eje=Kr,tje=eje.setTimeout;(function(e){e.exports=tje})(F9e);var rje=Gt(tO),_7={},nje={get exports(){return _7},set exports(e){_7=e}},ije=Bs,x7=Cm,sje=so,oje=function(r){for(var t=ije(this),n=sje(t),i=arguments.length,s=x7(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:x7(o,n);a>s;)t[s++]=r;return t},aje=Nt,lje=oje;aje({target:"Array",proto:!0},{fill:lje});var uje=Vn,cje=uje("Array").fill,fje=on,hje=cje,FS=Array.prototype,dje=function(e){var r=e.fill;return e===FS||fje(FS,e)&&r===FS.fill?hje:r},pje=dje,vje=pje;(function(e){e.exports=vje})(nje);var rO={},gje={get exports(){return rO},set exports(e){rO=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(gje);var yje=rO;/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ea(){return Ea=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ea.apply(this,arguments)}function Ko(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function e1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var nO;typeof Object.assign!="function"?nO=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:nO=Object.assign;var Eh=nO,E7=["","webkit","Moz","MS","ms","o"],mje=typeof document>"u"?{style:{}}:document.createElement("div"),bje="function",Jd=Math.round,Sh=Math.abs,m4=Date.now;function cx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<E7.length;){if(t=E7[s],n=t?t+i:r,n in e)return n;s++}}var Ql;typeof window>"u"?Ql={}:Ql=window;var ZY=cx(mje.style,"touchAction"),XY=ZY!==void 0;function wje(){if(!XY)return!1;var e={},r=Ql.CSS&&Ql.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?Ql.CSS.supports("touch-action",t):!0}),e}var JY="compute",QY="auto",iO="manipulation",lh="none",zy="pan-x",Uy="pan-y",t1=wje(),$je=/mobile|tablet|ip(ad|hone|od)|android/i,eZ="ontouchstart"in Ql,_je=cx(Ql,"PointerEvent")!==void 0,xje=eZ&&$je.test(navigator.userAgent),Um="touch",Eje="pen",b4="mouse",Sje="kinect",kje=25,us=1,jh=2,zn=4,Ns=8,c$=1,Wm=2,Km=4,qm=8,Kp=16,al=Wm|Km,uh=qm|Kp,tZ=al|uh,rZ=["x","y"],f$=["clientX","clientY"];function eu(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function fx(e,r){return typeof e===bje?e.apply(r&&r[0]||void 0,r):e}function Gf(e,r){return e.indexOf(r)>-1}function Tje(e){if(Gf(e,lh))return lh;var r=Gf(e,zy),t=Gf(e,Uy);return r&&t?lh:r||t?r?zy:Uy:Gf(e,iO)?iO:QY}var nZ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===JY&&(n=this.compute()),XY&&this.manager.element.style&&t1[n]&&(this.manager.element.style[ZY]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return eu(this.manager.recognizers,function(i){fx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),Tje(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Gf(o,lh)&&!t1[lh],l=Gf(o,Uy)&&!t1[Uy],u=Gf(o,zy)&&!t1[zy];if(a){var h=n.pointers.length===1,c=n.distance<2,p=n.deltaTime<250;if(h&&c&&p)return}if(!(u&&l)&&(a||l&&s&al||u&&s&uh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function w4(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function iZ(e){var r=e.length;if(r===1)return{x:Jd(e[0].clientX),y:Jd(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:Jd(t/r),y:Jd(n/r)}}function S7(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:Jd(e.pointers[t].clientX),clientY:Jd(e.pointers[t].clientY)},t++;return{timeStamp:m4(),pointers:r,center:iZ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function h$(e,r,t){t||(t=rZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function sO(e,r,t){t||(t=rZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function sZ(e,r){return e===r?c$:Sh(e)>=Sh(r)?e<0?Wm:Km:r<0?qm:Kp}function Ije(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===us||s.eventType===zn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function oZ(e,r,t){return{x:r/e||0,y:t/e||0}}function Aje(e,r){return h$(r[0],r[1],f$)/h$(e[0],e[1],f$)}function Oje(e,r){return sO(r[1],r[0],f$)+sO(e[1],e[0],f$)}function Cje(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ns&&(n>kje||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=oZ(n,l,u);s=h.x,o=h.y,i=Sh(h.x)>Sh(h.y)?h.x:h.y,a=sZ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function Pje(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=S7(r)),i>1&&!t.firstMultiple?t.firstMultiple=S7(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=iZ(n);r.timeStamp=m4(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=sO(a,l),r.distance=h$(a,l),Ije(t,r),r.offsetDirection=sZ(r.deltaX,r.deltaY);var u=oZ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Sh(u.x)>Sh(u.y)?u.x:u.y,r.scale=o?Aje(o.pointers,n):1,r.rotation=o?Oje(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,Cje(t,r);var h=e.element,c=r.srcEvent,p;c.composedPath?p=c.composedPath()[0]:c.path?p=c.path[0]:p=c.target,w4(p,h)&&(h=p),r.target=h}function Nje(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&us&&n-i===0,o=r&(zn|Ns)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,Pje(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function Wy(e){return e.trim().split(/\s+/g)}function ny(e,r,t){eu(Wy(r),function(n){e.addEventListener(n,t,!1)})}function iy(e,r,t){eu(Wy(r),function(n){e.removeEventListener(n,t,!1)})}function k7(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Av=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){fx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&ny(this.element,this.evEl,this.domHandler),this.evTarget&&ny(this.target,this.evTarget,this.domHandler),this.evWin&&ny(k7(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&iy(this.element,this.evEl,this.domHandler),this.evTarget&&iy(this.target,this.evTarget,this.domHandler),this.evWin&&iy(k7(this.element),this.evWin,this.domHandler)},e}();function kh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var Rje={pointerdown:us,pointermove:jh,pointerup:zn,pointercancel:Ns,pointerout:Ns},Dje={2:Um,3:Eje,4:b4,5:Sje},aZ="pointerdown",lZ="pointermove pointerup pointercancel";Ql.MSPointerEvent&&!Ql.PointerEvent&&(aZ="MSPointerDown",lZ="MSPointerMove MSPointerUp MSPointerCancel");var uZ=function(e){Ko(r,e);function r(){var n,i=r.prototype;return i.evEl=aZ,i.evWin=lZ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=Rje[a],u=Dje[i.pointerType]||i.pointerType,h=u===Um,c=kh(s,i.pointerId,"pointerId");l&us&&(i.button===0||h)?c<0&&(s.push(i),c=s.length-1):l&(zn|Ns)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Av);function Ky(e){return Array.prototype.slice.call(e,0)}function $4(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];kh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var Bje={touchstart:us,touchmove:jh,touchend:zn,touchcancel:Ns},Mje="touchstart touchmove touchend touchcancel",_4=function(e){Ko(r,e);function r(){var n;return r.prototype.evTarget=Mje,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=Bje[i.type],o=Lje.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Um,srcEvent:i})},r}(Av);function Lje(e,r){var t=Ky(e.touches),n=this.targetIds;if(r&(us|jh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=Ky(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return w4(u.target,l)}),r===us)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(zn|Ns)&&delete n[o[i].identifier],i++;if(a.length)return[$4(s.concat(a),"identifier",!0),a]}var Fje={mousedown:us,mousemove:jh,mouseup:zn},jje="mousedown",Hje="mousemove mouseup",x4=function(e){Ko(r,e);function r(){var n,i=r.prototype;return i.evEl=jje,i.evWin=Hje,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=Fje[i.type];s&us&&i.button===0&&(this.pressed=!0),s&jh&&i.which!==1&&(s=zn),this.pressed&&(s&zn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:b4,srcEvent:i}))},r}(Av),zje=2500,T7=25;function I7(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,zje)}}function Uje(e,r){e&us?(this.primaryTouch=r.changedPointers[0].identifier,I7.call(this,r)):e&(zn|Ns)&&I7.call(this,r)}function Wje(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=T7&&o<=T7)return!0}return!1}var cZ=function(){var e=function(r){Ko(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var h=u.pointerType===Um,c=u.pointerType===b4;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)Uje.call(e1(e1(o)),l,u);else if(c&&Wje.call(e1(e1(o)),u))return;o.callback(a,l,u)}},o.touch=new _4(o.manager,o.handler),o.mouse=new x4(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Av);return e}();function Kje(e){var r,t=e.options.inputClass;return t?r=t:_je?r=uZ:xje?r=_4:eZ?r=cZ:r=x4,new r(e,Nje)}function Qd(e,r,t){return Array.isArray(e)?(eu(e,t[r],t),!0):!1}var ew=1,jo=2,qp=4,Ec=8,tu=Ec,qy=16,il=32,qje=1;function Vje(){return qje++}function r1(e,r){var t=r.manager;return t?t.get(e):e}function A7(e){return e&qy?"cancel":e&Ec?"end":e&qp?"move":e&jo?"start":""}var Vm=function(){function e(t){t===void 0&&(t={}),this.options=Ea({enable:!0},t),this.id=Vje(),this.manager=null,this.state=ew,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Eh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(Qd(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=r1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return Qd(n,"dropRecognizeWith",this)?this:(n=r1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(Qd(n,"requireFailure",this))return this;var i=this.requireFail;return n=r1(n,this),kh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(Qd(n,"dropRequireFailure",this))return this;n=r1(n,this);var i=kh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ec&&o(i.options.event+A7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ec&&o(i.options.event+A7(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=il},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(il|ew)))return!1;n++}return!0},r.recognize=function(n){var i=Eh({},n);if(!fx(this.options.enable,[this,i])){this.reset(),this.state=il;return}this.state&(tu|qy|il)&&(this.state=ew),this.state=this.process(i),this.state&(jo|qp|Ec|qy)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),oO=function(e){Ko(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ea({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[iO]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&us&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==zn)return this.failTimeout();var h=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||h$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!h?this.count=1:this.count+=1,this._input=i;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=tu,s.tryEmit()},o.interval),jo):tu}return il},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=il},this.options.interval),il},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===tu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Vm),Vp=function(e){Ko(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ea({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(jo|qp),l=this.attrTest(i);return a&&(o&Ns||!l)?s|qy:a||l?o&zn?s|Ec:s&jo?s|qp:jo:il},r}(Vm);function fZ(e){return e===Kp?"down":e===qm?"up":e===Wm?"left":e===Km?"right":""}var E4=function(e){Ko(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ea({event:"pan",threshold:10,pointers:1,direction:tZ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&al&&s.push(Uy),i&uh&&s.push(zy),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,h=i.deltaY;return l&s.direction||(s.direction&al?(l=u===0?c$:u<0?Wm:Km,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=h===0?c$:h<0?qm:Kp,o=h!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return Vp.prototype.attrTest.call(this,i)&&(this.state&jo||!(this.state&jo)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=fZ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(Vp),hZ=function(e){Ko(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ea({event:"swipe",threshold:10,velocity:.3,direction:al|uh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return E4.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(al|uh)?o=i.overallVelocity:s&al?o=i.overallVelocityX:s&uh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Sh(o)>this.options.velocity&&i.eventType&zn},t.emit=function(i){var s=fZ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(Vp),dZ=function(e){Ko(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ea({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[lh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&jo)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(Vp),pZ=function(e){Ko(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ea({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[lh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&jo)},r}(Vp),vZ=function(e){Ko(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ea({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[QY]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(zn|Ns)&&!u)this.reset();else if(i.eventType&us)this.reset(),this._timer=setTimeout(function(){s.state=tu,s.tryEmit()},o.time);else if(i.eventType&zn)return tu;return il},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===tu&&(i&&i.eventType&zn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=m4(),this.manager.emit(this.options.event,this._input)))},r}(Vm),gZ={domEvents:!1,touchAction:JY,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},O7=[[pZ,{enable:!1}],[dZ,{enable:!1},["rotate"]],[hZ,{direction:al}],[E4,{direction:al},["swipe"]],[oO],[oO,{event:"doubletap",taps:2},["tap"]],[vZ]],Gje=1,C7=2;function P7(e,r){var t=e.element;if(t.style){var n;eu(e.options.cssProps,function(i,s){n=cx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Yje(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var N7=function(){function e(t,n){var i=this;this.options=Eh({},gZ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Kje(this),this.touchAction=new nZ(this,this.options.touchAction),P7(this,!0),eu(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Eh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?C7:Gje},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&tu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==C7&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(jo|qp|Ec)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof Vm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(Qd(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(Qd(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=kh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return eu(Wy(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return eu(Wy(n),function(o){i?s[o]&&s[o].splice(kh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Yje(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&P7(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),Zje={touchstart:us,touchmove:jh,touchend:zn,touchcancel:Ns},Xje="touchstart",Jje="touchstart touchmove touchend touchcancel",Qje=function(e){Ko(r,e);function r(){var n,i=r.prototype;return i.evTarget=Xje,i.evWin=Jje,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=Zje[i.type];if(s===us&&(this.started=!0),!!this.started){var o=eHe.call(this,i,s);s&(zn|Ns)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Um,srcEvent:i})}},r}(Av);function eHe(e,r){var t=Ky(e.touches),n=Ky(e.changedTouches);return r&(zn|Ns)&&(t=$4(t.concat(n),"identifier",!0)),[t,n]}function yZ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var mZ=yZ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),tHe=yZ(function(e,r){return mZ(e,r,!0)},"merge","Use `assign`.");function rHe(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Eh(i,t)}function R7(e,r){return function(){return e.apply(r,arguments)}}var nHe=function(){var e=function(t,n){return n===void 0&&(n={}),new N7(t,Ea({recognizers:O7.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=tZ,e.DIRECTION_DOWN=Kp,e.DIRECTION_LEFT=Wm,e.DIRECTION_RIGHT=Km,e.DIRECTION_UP=qm,e.DIRECTION_HORIZONTAL=al,e.DIRECTION_VERTICAL=uh,e.DIRECTION_NONE=c$,e.DIRECTION_DOWN=Kp,e.INPUT_START=us,e.INPUT_MOVE=jh,e.INPUT_END=zn,e.INPUT_CANCEL=Ns,e.STATE_POSSIBLE=ew,e.STATE_BEGAN=jo,e.STATE_CHANGED=qp,e.STATE_ENDED=Ec,e.STATE_RECOGNIZED=tu,e.STATE_CANCELLED=qy,e.STATE_FAILED=il,e.Manager=N7,e.Input=Av,e.TouchAction=nZ,e.TouchInput=_4,e.MouseInput=x4,e.PointerEventInput=uZ,e.TouchMouseInput=cZ,e.SingleTouchInput=Qje,e.Recognizer=Vm,e.AttrRecognizer=Vp,e.Tap=oO,e.Pan=E4,e.Swipe=hZ,e.Pinch=dZ,e.Rotate=pZ,e.Press=vZ,e.on=ny,e.off=iy,e.each=eu,e.merge=tHe,e.extend=mZ,e.bindFn=R7,e.assign=Eh,e.inherit=rHe,e.bindFn=R7,e.prefixed=cx,e.toArray=Ky,e.inArray=kh,e.uniqueArray=$4,e.splitStr=Wy,e.boolOrFn=fx,e.hasParent=w4,e.addEventListeners=ny,e.removeEventListeners=iy,e.defaults=Eh({},gZ,{preset:O7}),e}(),iHe=nHe;function bZ(e,r){var t=typeof ax<"u"&&zm(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=sHe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function sHe(e,r){var t;if(e){if(typeof e=="string")return D7(e,r);var n=ux(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return p4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D7(e,r)}}function D7(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var wZ=ax("DELETE");function oHe(e){for(var r,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return $Z.apply(void 0,lx(r=[{},e]).call(r,n))}function $Z(){var e=d$.apply(void 0,arguments);return xZ(e),e}function d$(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var n;return d$.apply(void 0,lx(n=[$Z(r[0],r[1])]).call(n,ks(ux(r).call(r,2))))}var i=r[0],s=r[1],o=bZ(XMe(s)),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===wZ?delete i[l]:i[l]!==null&&s[l]!==null&&Ai(i[l])==="object"&&Ai(s[l])==="object"&&!Vs(i[l])&&!Vs(s[l])?i[l]=d$(i[l],s[l]):i[l]=_Z(s[l]))}}catch(u){o.e(u)}finally{o.f()}return i}function _Z(e){return Vs(e)?la(e).call(e,function(r){return _Z(r)}):Ai(e)==="object"&&e!==null?d$({},e):e}function xZ(e){for(var r=0,t=g4(e);r<t.length;r++){var n=t[r];e[n]===wZ?delete e[n]:Ai(e[n])==="object"&&e[n]!==null&&xZ(e[n])}}function aHe(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var lHe=typeof window<"u"?window.Hammer||iHe:function(){return aHe()};function Gl(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=lHe(this._dom.overlay);n.on("tap",dY(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];xh(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){uHe(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}yje(Gl.prototype);Gl.current=null;Gl.prototype.destroy=function(){var e,r;this.deactivate();var t=bZ(z7e(e=BY(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};Gl.prototype.activate=function(){Gl.current&&Gl.current.deactivate(),Gl.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Gl.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Gl.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function uHe(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var aO={},cHe={get exports(){return aO},set exports(e){aO=e}},fHe=Y_,hHe=xv,dHe=TypeError,EZ=function(e){if(fHe(e))return e;throw dHe(hHe(e)+" is not a constructor")},pHe=Nt,vHe=fs,jS=wv,gHe=fY,B7=EZ,yHe=io,M7=mi,mHe=Lh,SZ=kr,S4=vHe("Reflect","construct"),bHe=Object.prototype,wHe=[].push,kZ=SZ(function(){function e(){}return!(S4(function(){},[],e)instanceof e)}),TZ=!SZ(function(){S4(function(){})}),L7=kZ||TZ;pHe({target:"Reflect",stat:!0,forced:L7,sham:L7},{construct:function(r,t){B7(r),yHe(t);var n=arguments.length<3?r:B7(arguments[2]);if(TZ&&!kZ)return S4(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return jS(wHe,i,t),new(jS(gHe,r,i))}var s=n.prototype,o=mHe(M7(s)?s:bHe),a=jS(r,o,t);return M7(a)?a:o}});var $He=Kr,_He=$He.Reflect.construct,xHe=_He,EHe=xHe;(function(e){e.exports=EHe})(cHe);var tw=Gt(aO);function Tf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p$={},SHe={get exports(){return p$},set exports(e){p$=e}},lO={},kHe={get exports(){return lO},set exports(e){lO=e}},THe=WY,IHe=THe,AHe=IHe,OHe=AHe;(function(e){e.exports=OHe})(kHe);(function(e){e.exports=lO})(SHe);var CHe=Gt(p$),v$={},PHe={get exports(){return v$},set exports(e){v$=e}},uO={},NHe={get exports(){return uO},set exports(e){uO=e}},RHe=Nt,DHe=JG;RHe({target:"Object",stat:!0},{setPrototypeOf:DHe});var BHe=Kr,MHe=BHe.Object.setPrototypeOf,LHe=MHe,FHe=LHe,jHe=FHe,HHe=jHe,zHe=HHe,UHe=zHe;(function(e){e.exports=UHe})(NHe);(function(e){e.exports=uO})(PHe);var cO=Gt(v$),fO={},WHe={get exports(){return fO},set exports(e){fO=e}},hO={},KHe={get exports(){return hO},set exports(e){hO=e}},qHe=hY,VHe=qHe,GHe=VHe,YHe=GHe;(function(e){e.exports=YHe})(KHe);(function(e){e.exports=hO})(WHe);var IZ=Gt(fO);function dO(e,r){var t;return dO=cO?IZ(t=cO).call(t):function(i,s){return i.__proto__=s,i},dO(e,r)}function ZHe(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=CHe(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),V_(e,"prototype",{writable:!1}),r&&dO(e,r)}function XHe(e,r){if(r&&(Ai(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tf(e)}var g$={},JHe={get exports(){return g$},set exports(e){g$=e}},pO={},QHe={get exports(){return pO},set exports(e){pO=e}},eze=LY,tze=eze,rze=tze,nze=rze;(function(e){e.exports=nze})(QHe);(function(e){e.exports=pO})(JHe);var F7=Gt(g$);function y$(e){var r;return y$=cO?IZ(r=F7).call(r):function(n){return n.__proto__||F7(n)},y$(e)}var vO={},ize={get exports(){return vO},set exports(e){vO=e}},gO={},sze={get exports(){return gO},set exports(e){gO=e}};(function(e){var r=Ly,t=l$;function n(i){"@babel/helpers - typeof";return e.exports=n=typeof r=="function"&&typeof t=="symbol"?function(s){return typeof s}:function(s){return s&&typeof r=="function"&&s.constructor===r&&s!==r.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(sze);var yO={},oze={get exports(){return yO},set exports(e){yO=e}},mO={},aze={get exports(){return mO},set exports(e){mO=e}},lze=NY,uze=lze,cze=uze,fze=cze;(function(e){e.exports=fze})(aze);(function(e){e.exports=mO})(oze);var bO={},hze={get exports(){return bO},set exports(e){bO=e}},wO={},dze={get exports(){return wO},set exports(e){wO=e}},j7=qn,pze=v4,vze=Bh,gze=no,yze=function(e,r,t){for(var n=pze(r),i=gze.f,s=vze.f,o=0;o<n.length;o++){var a=n[o];!j7(e,a)&&!(t&&j7(t,a))&&i(e,a,s(r,a))}},mze=mi,bze=bu,wze=function(e,r){mze(r)&&"cause"in r&&bze(e,"cause",r.cause)},$ze=Mr,AZ=Error,_ze=$ze("".replace),xze=function(e){return String(AZ(e).stack)}("zxcasd"),OZ=/\n\s*at [^:]*:[^\n]*/,Eze=OZ.test(xze),Sze=function(e,r){if(Eze&&typeof e=="string"&&!AZ.prepareStackTrace)for(;r--;)e=_ze(e,OZ,"");return e},kze=kr,Tze=Mh,Ize=!kze(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",Tze(1,7)),e.stack!==7):!0}),Aze=bu,Oze=Sze,Cze=Ize,H7=Error.captureStackTrace,Pze=function(e,r,t,n){Cze&&(H7?H7(e,r):Aze(e,"stack",Oze(t,n)))},Nze=Gc,Rze=yi,Dze=io,Bze=xv,Mze=gY,Lze=so,z7=on,Fze=d4,jze=ox,U7=vY,Hze=TypeError,rw=function(e,r){this.stopped=e,this.result=r},W7=rw.prototype,Hh=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=Nze(r,n),u,h,c,p,m,w,b,T=function(A){return u&&U7(u,"normal",A),new rw(!0,A)},_=function(A){return i?(Dze(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(h=jze(e),!h)throw Hze(Bze(e)+" is not iterable");if(Mze(h)){for(c=0,p=Lze(e);p>c;c++)if(m=_(e[c]),m&&z7(W7,m))return m;return new rw(!1)}u=Fze(e,h)}for(w=s?e.next:u.next;!(b=Rze(w,u)).done;){try{m=_(b.value)}catch(A){U7(u,"throw",A)}if(typeof m=="object"&&m&&z7(W7,m))return m}return new rw(!1)},zze=yl,Uze=function(e,r){return e===void 0?arguments.length<2?"":r:zze(e)},Wze=Nt,Kze=on,qze=ix,m$=JG,Vze=yze,CZ=Lh,HS=bu,zS=Mh,Gze=wze,Yze=Pze,Zze=Hh,Xze=Uze,Jze=an,Qze=Jze("toStringTag"),b$=Error,eUe=[].push,Gp=function(r,t){var n=Kze(US,this),i;m$?i=m$(b$(),n?qze(this):US):(i=n?this:CZ(US),HS(i,Qze,"Error")),t!==void 0&&HS(i,"message",Xze(t)),Yze(i,Gp,i.stack,1),arguments.length>2&&Gze(i,arguments[2]);var s=[];return Zze(r,eUe,{that:s}),HS(i,"errors",s),i};m$?m$(Gp,b$):Vze(Gp,b$,{name:!0});var US=Gp.prototype=CZ(b$.prototype,{constructor:zS(1,Gp),message:zS(1,""),name:zS(1,"AggregateError")});Wze({global:!0,constructor:!0,arity:2},{AggregateError:Gp});var tUe=fs,rUe=n4,nUe=an,iUe=ni,K7=nUe("species"),PZ=function(e){var r=tUe(e);iUe&&r&&!r[K7]&&rUe(r,K7,{configurable:!0,get:function(){return this}})},sUe=on,oUe=TypeError,k4=function(e,r){if(sUe(r,e))return e;throw oUe("Incorrect invocation")},q7=io,aUe=EZ,lUe=km,uUe=an,cUe=uUe("species"),NZ=function(e,r){var t=q7(e).constructor,n;return t===void 0||lUe(n=q7(t)[cUe])?r:aUe(n)},fUe=Vc,RZ=/(?:ipad|iphone|ipod).*applewebkit/i.test(fUe),eo=mn,hUe=wv,dUe=Gc,V7=bn,pUe=qn,DZ=kr,G7=mG,vUe=Lm,Y7=ZP,gUe=KY,yUe=RZ,mUe=Hm,$O=eo.setImmediate,_O=eo.clearImmediate,bUe=eo.process,WS=eo.Dispatch,wUe=eo.Function,Z7=eo.MessageChannel,$Ue=eo.String,KS=0,sy={},X7="onreadystatechange",Vy,Ef,qS,VS;DZ(function(){Vy=eo.location});var T4=function(e){if(pUe(sy,e)){var r=sy[e];delete sy[e],r()}},GS=function(e){return function(){T4(e)}},J7=function(e){T4(e.data)},Q7=function(e){eo.postMessage($Ue(e),Vy.protocol+"//"+Vy.host)};(!$O||!_O)&&($O=function(r){gUe(arguments.length,1);var t=V7(r)?r:wUe(r),n=vUe(arguments,1);return sy[++KS]=function(){hUe(t,void 0,n)},Ef(KS),KS},_O=function(r){delete sy[r]},mUe?Ef=function(e){bUe.nextTick(GS(e))}:WS&&WS.now?Ef=function(e){WS.now(GS(e))}:Z7&&!yUe?(qS=new Z7,VS=qS.port2,qS.port1.onmessage=J7,Ef=dUe(VS.postMessage,VS)):eo.addEventListener&&V7(eo.postMessage)&&!eo.importScripts&&Vy&&Vy.protocol!=="file:"&&!DZ(Q7)?(Ef=Q7,eo.addEventListener("message",J7,!1)):X7 in Y7("script")?Ef=function(e){G7.appendChild(Y7("script"))[X7]=function(){G7.removeChild(this),T4(e)}}:Ef=function(e){setTimeout(GS(e),0)});var BZ={set:$O,clear:_O},MZ=function(){this.head=null,this.tail=null};MZ.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var LZ=MZ,_Ue=Vc,xUe=/ipad|iphone|ipod/i.test(_Ue)&&typeof Pebble<"u",EUe=Vc,SUe=/web0s(?!.*chrome)/i.test(EUe),Th=mn,eL=Gc,kUe=Bh.f,YS=BZ.set,TUe=LZ,IUe=RZ,AUe=xUe,OUe=SUe,ZS=Hm,tL=Th.MutationObserver||Th.WebKitMutationObserver,rL=Th.document,nL=Th.process,n1=Th.Promise,iL=kUe(Th,"queueMicrotask"),xO=iL&&iL.value,Pd,XS,JS,i1,sL;if(!xO){var s1=new TUe,o1=function(){var e,r;for(ZS&&(e=nL.domain)&&e.exit();r=s1.get();)try{r()}catch(t){throw s1.head&&Pd(),t}e&&e.enter()};!IUe&&!ZS&&!OUe&&tL&&rL?(XS=!0,JS=rL.createTextNode(""),new tL(o1).observe(JS,{characterData:!0}),Pd=function(){JS.data=XS=!XS}):!AUe&&n1&&n1.resolve?(i1=n1.resolve(void 0),i1.constructor=n1,sL=eL(i1.then,i1),Pd=function(){sL(o1)}):ZS?Pd=function(){nL.nextTick(o1)}:(YS=eL(YS,Th),Pd=function(){YS(o1)}),xO=function(e){s1.head||Pd(),s1.add(e)}}var CUe=xO,PUe=function(e,r){try{arguments.length==1?console.error(e):console.error(e,r)}catch{}},Ov=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},NUe=mn,Cv=NUe.Promise,FZ=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",RUe=FZ,DUe=Hm,BUe=!RUe&&!DUe&&typeof window=="object"&&typeof document=="object",MUe=mn,oy=Cv,LUe=bn,FUe=oG,jUe=fG,HUe=an,zUe=BUe,UUe=FZ,QS=$v,oL=oy&&oy.prototype,WUe=HUe("species"),EO=!1,jZ=LUe(MUe.PromiseRejectionEvent),KUe=FUe("Promise",function(){var e=jUe(oy),r=e!==String(oy);if(!r&&QS===66||!(oL.catch&&oL.finally))return!0;if(!QS||QS<51||!/native code/.test(e)){var t=new oy(function(s){s(1)}),n=function(s){s(function(){},function(){})},i=t.constructor={};if(i[WUe]=n,EO=t.then(function(){})instanceof n,!EO)return!0}return!r&&(zUe||UUe)&&!jZ}),Gm={CONSTRUCTOR:KUe,REJECTION_EVENT:jZ,SUBCLASSING:EO},$u={},aL=Ds,qUe=TypeError,VUe=function(e){var r,t;this.promise=new e(function(n,i){if(r!==void 0||t!==void 0)throw qUe("Bad Promise constructor");r=n,t=i}),this.resolve=aL(r),this.reject=aL(t)};$u.f=function(e){return new VUe(e)};var GUe=Nt,w$=Hm,Mc=mn,Ym=yi,YUe=Sv,ZUe=Fh,XUe=PZ,JUe=Ds,SO=bn,QUe=mi,eWe=k4,tWe=NZ,HZ=BZ.set,I4=CUe,rWe=PUe,nWe=Ov,iWe=LZ,zZ=kv,kO=Cv,UZ=Gm,WZ=$u,hx="Promise",KZ=UZ.CONSTRUCTOR,sWe=UZ.REJECTION_EVENT,ek=zZ.getterFor(hx),oWe=zZ.set,aWe=kO&&kO.prototype,ep=kO,tk=aWe,qZ=Mc.TypeError,TO=Mc.document,A4=Mc.process,IO=WZ.f,lWe=IO,uWe=!!(TO&&TO.createEvent&&Mc.dispatchEvent),VZ="unhandledrejection",cWe="rejectionhandled",lL=0,GZ=1,fWe=2,O4=1,YZ=2,a1,uL,hWe,ZZ=function(e){var r;return QUe(e)&&SO(r=e.then)?r:!1},XZ=function(e,r){var t=r.value,n=r.state==GZ,i=n?e.ok:e.fail,s=e.resolve,o=e.reject,a=e.domain,l,u,h;try{i?(n||(r.rejection===YZ&&pWe(r),r.rejection=O4),i===!0?l=t:(a&&a.enter(),l=i(t),a&&(a.exit(),h=!0)),l===e.promise?o(qZ("Promise-chain cycle")):(u=ZZ(l))?Ym(u,l,s,o):s(l)):o(t)}catch(c){a&&!h&&a.exit(),o(c)}},JZ=function(e,r){e.notified||(e.notified=!0,I4(function(){for(var t=e.reactions,n;n=t.get();)XZ(n,e);e.notified=!1,r&&!e.rejection&&dWe(e)}))},QZ=function(e,r,t){var n,i;uWe?(n=TO.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Mc.dispatchEvent(n)):n={promise:r,reason:t},!sWe&&(i=Mc["on"+e])?i(n):e===VZ&&rWe("Unhandled promise rejection",t)},dWe=function(e){Ym(HZ,Mc,function(){var r=e.facade,t=e.value,n=cL(e),i;if(n&&(i=nWe(function(){w$?A4.emit("unhandledRejection",t,r):QZ(VZ,r,t)}),e.rejection=w$||cL(e)?YZ:O4,i.error))throw i.value})},cL=function(e){return e.rejection!==O4&&!e.parent},pWe=function(e){Ym(HZ,Mc,function(){var r=e.facade;w$?A4.emit("rejectionHandled",r):QZ(cWe,r,e.value)})},tp=function(e,r,t){return function(n){e(r,n,t)}},bp=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=fWe,JZ(e,!0))},AO=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw qZ("Promise can't be resolved itself");var n=ZZ(r);n?I4(function(){var i={done:!1};try{Ym(n,r,tp(AO,i,e),tp(bp,i,e))}catch(s){bp(i,s,e)}}):(e.value=r,e.state=GZ,JZ(e,!1))}catch(i){bp({done:!1},i,e)}}};KZ&&(ep=function(r){eWe(this,tk),JUe(r),Ym(a1,this);var t=ek(this);try{r(tp(AO,t),tp(bp,t))}catch(n){bp(t,n)}},tk=ep.prototype,a1=function(r){oWe(this,{type:hx,done:!1,notified:!1,parent:!1,reactions:new iWe,rejection:!1,state:lL,value:void 0})},a1.prototype=YUe(tk,"then",function(r,t){var n=ek(this),i=IO(tWe(this,ep));return n.parent=!0,i.ok=SO(r)?r:!0,i.fail=SO(t)&&t,i.domain=w$?A4.domain:void 0,n.state==lL?n.reactions.add(i):I4(function(){XZ(i,n)}),i.promise}),uL=function(){var e=new a1,r=ek(e);this.promise=e,this.resolve=tp(AO,r),this.reject=tp(bp,r)},WZ.f=IO=function(e){return e===ep||e===hWe?new uL(e):lWe(e)});GUe({global:!0,constructor:!0,wrap:!0,forced:KZ},{Promise:ep});ZUe(ep,hx,!1,!0);XUe(hx);var vWe=Cv,gWe=bY,yWe=Gm.CONSTRUCTOR,dx=yWe||!gWe(function(e){vWe.all(e).then(void 0,function(){})}),mWe=Nt,bWe=yi,wWe=Ds,$We=$u,_We=Ov,xWe=Hh,EWe=dx;mWe({target:"Promise",stat:!0,forced:EWe},{all:function(r){var t=this,n=$We.f(t),i=n.resolve,s=n.reject,o=_We(function(){var a=wWe(t.resolve),l=[],u=0,h=1;xWe(r,function(c){var p=u++,m=!1;h++,bWe(a,t,c).then(function(w){m||(m=!0,l[p]=w,--h||i(l))},s)}),--h||i(l)});return o.error&&s(o.value),n.promise}});var SWe=Nt,kWe=Gm.CONSTRUCTOR,fL=Cv;fL&&fL.prototype;SWe({target:"Promise",proto:!0,forced:kWe,real:!0},{catch:function(e){return this.then(void 0,e)}});var TWe=Nt,IWe=yi,AWe=Ds,OWe=$u,CWe=Ov,PWe=Hh,NWe=dx;TWe({target:"Promise",stat:!0,forced:NWe},{race:function(r){var t=this,n=OWe.f(t),i=n.reject,s=CWe(function(){var o=AWe(t.resolve);PWe(r,function(a){IWe(o,t,a).then(n.resolve,i)})});return s.error&&i(s.value),n.promise}});var RWe=Nt,DWe=yi,BWe=$u,MWe=Gm.CONSTRUCTOR;RWe({target:"Promise",stat:!0,forced:MWe},{reject:function(r){var t=BWe.f(this);return DWe(t.reject,void 0,r),t.promise}});var LWe=io,FWe=mi,jWe=$u,eX=function(e,r){if(LWe(e),FWe(r)&&r.constructor===e)return r;var t=jWe.f(e),n=t.resolve;return n(r),t.promise},HWe=Nt,zWe=fs,UWe=t5e,WWe=Cv,KWe=Gm.CONSTRUCTOR,qWe=eX,VWe=zWe("Promise"),GWe=!KWe;HWe({target:"Promise",stat:!0,forced:UWe},{resolve:function(r){return qWe(GWe&&this===VWe?WWe:this,r)}});var YWe=Nt,ZWe=yi,XWe=Ds,JWe=$u,QWe=Ov,eKe=Hh,tKe=dx;YWe({target:"Promise",stat:!0,forced:tKe},{allSettled:function(r){var t=this,n=JWe.f(t),i=n.resolve,s=n.reject,o=QWe(function(){var a=XWe(t.resolve),l=[],u=0,h=1;eKe(r,function(c){var p=u++,m=!1;h++,ZWe(a,t,c).then(function(w){m||(m=!0,l[p]={status:"fulfilled",value:w},--h||i(l))},function(w){m||(m=!0,l[p]={status:"rejected",reason:w},--h||i(l))})}),--h||i(l)});return o.error&&s(o.value),n.promise}});var rKe=Nt,nKe=yi,iKe=Ds,sKe=fs,oKe=$u,aKe=Ov,lKe=Hh,uKe=dx,hL="No one promise resolved";rKe({target:"Promise",stat:!0,forced:uKe},{any:function(r){var t=this,n=sKe("AggregateError"),i=oKe.f(t),s=i.resolve,o=i.reject,a=aKe(function(){var l=iKe(t.resolve),u=[],h=0,c=1,p=!1;lKe(r,function(m){var w=h++,b=!1;c++,nKe(l,t,m).then(function(T){b||p||(p=!0,s(T))},function(T){b||p||(b=!0,u[w]=T,--c||o(new n(u,hL)))})}),--c||o(new n(u,hL))});return a.error&&o(a.value),i.promise}});var cKe=Nt,OO=Cv,fKe=kr,hKe=fs,dKe=bn,pKe=NZ,dL=eX,vKe=OO&&OO.prototype,gKe=!!OO&&fKe(function(){vKe.finally.call({then:function(){}},function(){})});cKe({target:"Promise",proto:!0,real:!0,forced:gKe},{finally:function(e){var r=pKe(this,hKe("Promise")),t=dKe(e);return this.then(t?function(n){return dL(r,e()).then(function(){return n})}:e,t?function(n){return dL(r,e()).then(function(){throw n})}:e)}});var yKe=Kr,mKe=yKe.Promise,bKe=mKe,wKe=bKe,$Ke=wKe,_Ke=$Ke,xKe=Nt,EKe=$u,SKe=Ov;xKe({target:"Promise",stat:!0,forced:!0},{try:function(e){var r=EKe.f(this),t=SKe(e);return(t.error?r.reject:r.resolve)(t.value),r.promise}});var kKe=_Ke,TKe=kKe;(function(e){e.exports=TKe})(dze);(function(e){e.exports=wO})(hze);var CO={},IKe={get exports(){return CO},set exports(e){CO=e}},PO={},AKe={get exports(){return PO},set exports(e){PO=e}},OKe=RY,CKe=OKe,PKe=CKe,NKe=PKe;(function(e){e.exports=NKe})(AKe);(function(e){e.exports=PO})(IKe);(function(e){var r=gO.default,t=n$,n=Ly,i=p$,s=g$,o=yO,a=v$,l=bO,u=CO,h=u$;function c(){e.exports=c=function(){return p},e.exports.__esModule=!0,e.exports.default=e.exports;var p={},m=Object.prototype,w=m.hasOwnProperty,b=t||function(_e,pe,Te){_e[pe]=Te.value},T=typeof n=="function"?n:{},_=T.iterator||"@@iterator",A=T.asyncIterator||"@@asyncIterator",x=T.toStringTag||"@@toStringTag";function I(_e,pe,Te){return t(_e,pe,{value:Te,enumerable:!0,configurable:!0,writable:!0}),_e[pe]}try{I({},"")}catch{I=function(Te,je,$){return Te[je]=$}}function O(_e,pe,Te,je){var $=pe&&pe.prototype instanceof R?pe:R,S=i($.prototype),N=new Ue(je||[]);return b(S,"_invoke",{value:se(_e,Te,N)}),S}function C(_e,pe,Te){try{return{type:"normal",arg:_e.call(pe,Te)}}catch(je){return{type:"throw",arg:je}}}p.wrap=O;var g={};function R(){}function M(){}function U(){}var V={};I(V,_,function(){return this});var ne=s,re=ne&&ne(ne(Ge([])));re&&re!==m&&w.call(re,_)&&(V=re);var Q=U.prototype=R.prototype=i(V);function F(_e){var pe;o(pe=["next","throw","return"]).call(pe,function(Te){I(_e,Te,function(je){return this._invoke(Te,je)})})}function Z(_e,pe){function Te($,S,N,L){var j=C(_e[$],_e,S);if(j.type!=="throw"){var q=j.arg,ae=q.value;return ae&&r(ae)=="object"&&w.call(ae,"__await")?pe.resolve(ae.__await).then(function(ve){Te("next",ve,N,L)},function(ve){Te("throw",ve,N,L)}):pe.resolve(ae).then(function(ve){q.value=ve,N(q)},function(ve){return Te("throw",ve,N,L)})}L(j.arg)}var je;b(this,"_invoke",{value:function(S,N){function L(){return new pe(function(j,q){Te(S,N,j,q)})}return je=je?je.then(L,L):L()}})}function se(_e,pe,Te){var je="suspendedStart";return function($,S){if(je==="executing")throw new Error("Generator is already running");if(je==="completed"){if($==="throw")throw S;return it()}for(Te.method=$,Te.arg=S;;){var N=Te.delegate;if(N){var L=Ee(N,Te);if(L){if(L===g)continue;return L}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(je==="suspendedStart")throw je="completed",Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);je="executing";var j=C(_e,pe,Te);if(j.type==="normal"){if(je=Te.done?"completed":"suspendedYield",j.arg===g)continue;return{value:j.arg,done:Te.done}}j.type==="throw"&&(je="completed",Te.method="throw",Te.arg=j.arg)}}}function Ee(_e,pe){var Te=pe.method,je=_e.iterator[Te];if(je===void 0)return pe.delegate=null,Te==="throw"&&_e.iterator.return&&(pe.method="return",pe.arg=void 0,Ee(_e,pe),pe.method==="throw")||Te!=="return"&&(pe.method="throw",pe.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),g;var $=C(je,_e.iterator,pe.arg);if($.type==="throw")return pe.method="throw",pe.arg=$.arg,pe.delegate=null,g;var S=$.arg;return S?S.done?(pe[_e.resultName]=S.value,pe.next=_e.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=void 0),pe.delegate=null,g):S:(pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,g)}function ye(_e){var pe={tryLoc:_e[0]};1 in _e&&(pe.catchLoc=_e[1]),2 in _e&&(pe.finallyLoc=_e[2],pe.afterLoc=_e[3]),this.tryEntries.push(pe)}function Pe(_e){var pe=_e.completion||{};pe.type="normal",delete pe.arg,_e.completion=pe}function Ue(_e){this.tryEntries=[{tryLoc:"root"}],o(_e).call(_e,ye,this),this.reset(!0)}function Ge(_e){if(_e){var pe=_e[_];if(pe)return pe.call(_e);if(typeof _e.next=="function")return _e;if(!isNaN(_e.length)){var Te=-1,je=function $(){for(;++Te<_e.length;)if(w.call(_e,Te))return $.value=_e[Te],$.done=!1,$;return $.value=void 0,$.done=!0,$};return je.next=je}}return{next:it}}function it(){return{value:void 0,done:!0}}return M.prototype=U,b(Q,"constructor",{value:U,configurable:!0}),b(U,"constructor",{value:M,configurable:!0}),M.displayName=I(U,x,"GeneratorFunction"),p.isGeneratorFunction=function(_e){var pe=typeof _e=="function"&&_e.constructor;return!!pe&&(pe===M||(pe.displayName||pe.name)==="GeneratorFunction")},p.mark=function(_e){return a?a(_e,U):(_e.__proto__=U,I(_e,x,"GeneratorFunction")),_e.prototype=i(Q),_e},p.awrap=function(_e){return{__await:_e}},F(Z.prototype),I(Z.prototype,A,function(){return this}),p.AsyncIterator=Z,p.async=function(_e,pe,Te,je,$){$===void 0&&($=l);var S=new Z(O(_e,pe,Te,je),$);return p.isGeneratorFunction(pe)?S:S.next().then(function(N){return N.done?N.value:S.next()})},F(Q),I(Q,x,"Generator"),I(Q,_,function(){return this}),I(Q,"toString",function(){return"[object Generator]"}),p.keys=function(_e){var pe=Object(_e),Te=[];for(var je in pe)Te.push(je);return u(Te).call(Te),function $(){for(;Te.length;){var S=Te.pop();if(S in pe)return $.value=S,$.done=!1,$}return $.done=!0,$}},p.values=Ge,Ue.prototype={constructor:Ue,reset:function(pe){var Te;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(Te=this.tryEntries).call(Te,Pe),!pe)for(var je in this)je.charAt(0)==="t"&&w.call(this,je)&&!isNaN(+h(je).call(je,1))&&(this[je]=void 0)},stop:function(){this.done=!0;var pe=this.tryEntries[0].completion;if(pe.type==="throw")throw pe.arg;return this.rval},dispatchException:function(pe){if(this.done)throw pe;var Te=this;function je(q,ae){return N.type="throw",N.arg=pe,Te.next=q,ae&&(Te.method="next",Te.arg=void 0),!!ae}for(var $=this.tryEntries.length-1;$>=0;--$){var S=this.tryEntries[$],N=S.completion;if(S.tryLoc==="root")return je("end");if(S.tryLoc<=this.prev){var L=w.call(S,"catchLoc"),j=w.call(S,"finallyLoc");if(L&&j){if(this.prev<S.catchLoc)return je(S.catchLoc,!0);if(this.prev<S.finallyLoc)return je(S.finallyLoc)}else if(L){if(this.prev<S.catchLoc)return je(S.catchLoc,!0)}else{if(!j)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return je(S.finallyLoc)}}}},abrupt:function(pe,Te){for(var je=this.tryEntries.length-1;je>=0;--je){var $=this.tryEntries[je];if($.tryLoc<=this.prev&&w.call($,"finallyLoc")&&this.prev<$.finallyLoc){var S=$;break}}S&&(pe==="break"||pe==="continue")&&S.tryLoc<=Te&&Te<=S.finallyLoc&&(S=null);var N=S?S.completion:{};return N.type=pe,N.arg=Te,S?(this.method="next",this.next=S.finallyLoc,g):this.complete(N)},complete:function(pe,Te){if(pe.type==="throw")throw pe.arg;return pe.type==="break"||pe.type==="continue"?this.next=pe.arg:pe.type==="return"?(this.rval=this.arg=pe.arg,this.method="return",this.next="end"):pe.type==="normal"&&Te&&(this.next=Te),g},finish:function(pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.finallyLoc===pe)return this.complete(je.completion,je.afterLoc),Pe(je),g}},catch:function(pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.tryLoc===pe){var $=je.completion;if($.type==="throw"){var S=$.arg;Pe(je)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(pe,Te,je){return this.delegate={iterator:Ge(pe),resultName:Te,nextLoc:je},this.method==="next"&&(this.arg=void 0),g}},p}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports})(ize);var nw=vO(),_s=nw;try{regeneratorRuntime=nw}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=nw:Function("r","regeneratorRuntime = r")(nw)}var NO={},RKe={get exports(){return NO},set exports(e){NO=e}},$$={},DKe={get exports(){return $$},set exports(e){$$=e}},BKe=kr,MKe=BKe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),LKe=kr,FKe=mi,jKe=mu,pL=MKe,iw=Object.isExtensible,HKe=LKe(function(){iw(1)}),zKe=HKe||pL?function(r){return!FKe(r)||pL&&jKe(r)=="ArrayBuffer"?!1:iw?iw(r):!0}:iw,UKe=kr,WKe=!UKe(function(){return Object.isExtensible(Object.preventExtensions({}))}),KKe=Nt,qKe=Mr,VKe=Pm,GKe=mi,C4=qn,YKe=no.f,vL=Rm,ZKe=r4,P4=zKe,XKe=K_,JKe=WKe,tX=!1,hu=XKe("meta"),QKe=0,N4=function(e){YKe(e,hu,{value:{objectID:"O"+QKe++,weakData:{}}})},eqe=function(e,r){if(!GKe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!C4(e,hu)){if(!P4(e))return"F";if(!r)return"E";N4(e)}return e[hu].objectID},tqe=function(e,r){if(!C4(e,hu)){if(!P4(e))return!0;if(!r)return!1;N4(e)}return e[hu].weakData},rqe=function(e){return JKe&&tX&&P4(e)&&!C4(e,hu)&&N4(e),e},nqe=function(){iqe.enable=function(){},tX=!0;var e=vL.f,r=qKe([].splice),t={};t[hu]=1,e(t).length&&(vL.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===hu){r(i,s,1);break}return i},KKe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ZKe.f}))},iqe=DKe.exports={enable:nqe,fastKey:eqe,getWeakData:tqe,onFreeze:rqe};VKe[hu]=!0;var sqe=Nt,oqe=mn,aqe=$$,lqe=kr,uqe=bu,cqe=Hh,fqe=k4,hqe=bn,dqe=mi,pqe=Fh,vqe=no.f,gqe=Tv.forEach,yqe=ni,rX=kv,mqe=rX.set,bqe=rX.getterFor,nX=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=oqe[e],a=o&&o.prototype,l={},u;if(!yqe||!hqe(o)||!(i||a.forEach&&!lqe(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),aqe.enable();else{u=r(function(p,m){mqe(fqe(p,h),{type:e,collection:new o}),m!=null&&cqe(m,p[s],{that:p,AS_ENTRIES:n})});var h=u.prototype,c=bqe(e);gqe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var m=p=="add"||p=="set";p in a&&!(i&&p=="clear")&&uqe(h,p,function(w,b){var T=c(this).collection;if(!m&&i&&!dqe(w))return p=="get"?void 0:!1;var _=T[p](w===0?0:w,b);return m?this:_})}),i||vqe(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return pqe(u,e,!1,!0),l[e]=u,sqe({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},wqe=Sv,$qe=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:wqe(e,n,r[n],t);return e},_qe=Lh,xqe=n4,gL=$qe,Eqe=Gc,Sqe=k4,kqe=km,Tqe=Hh,Iqe=c4,l1=f4,Aqe=PZ,Tg=ni,yL=$$.fastKey,iX=kv,mL=iX.set,rk=iX.getterFor,sX={getConstructor:function(e,r,t,n){var i=e(function(u,h){Sqe(u,s),mL(u,{type:r,index:_qe(null),first:void 0,last:void 0,size:0}),Tg||(u.size=0),kqe(h)||Tqe(h,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=rk(r),a=function(u,h,c){var p=o(u),m=l(u,h),w,b;return m?m.value=c:(p.last=m={index:b=yL(h,!0),key:h,value:c,previous:w=p.last,next:void 0,removed:!1},p.first||(p.first=m),w&&(w.next=m),Tg?p.size++:u.size++,b!=="F"&&(p.index[b]=m)),u},l=function(u,h){var c=o(u),p=yL(h),m;if(p!=="F")return c.index[p];for(m=c.first;m;m=m.next)if(m.key==h)return m};return gL(s,{clear:function(){for(var h=this,c=o(h),p=c.index,m=c.first;m;)m.removed=!0,m.previous&&(m.previous=m.previous.next=void 0),delete p[m.index],m=m.next;c.first=c.last=void 0,Tg?c.size=0:h.size=0},delete:function(u){var h=this,c=o(h),p=l(h,u);if(p){var m=p.next,w=p.previous;delete c.index[p.index],p.removed=!0,w&&(w.next=m),m&&(m.previous=w),c.first==p&&(c.first=m),c.last==p&&(c.last=w),Tg?c.size--:h.size--}return!!p},forEach:function(h){for(var c=o(this),p=Eqe(h,arguments.length>1?arguments[1]:void 0),m;m=m?m.next:c.first;)for(p(m.value,m.key,this);m&&m.removed;)m=m.previous},has:function(h){return!!l(this,h)}}),gL(s,t?{get:function(h){var c=l(this,h);return c&&c.value},set:function(h,c){return a(this,h===0?0:h,c)}}:{add:function(h){return a(this,h=h===0?0:h,h)}}),Tg&&xqe(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=rk(r),s=rk(n);Iqe(e,r,function(o,a){mL(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,l1(void 0,!0)):a=="keys"?l1(l.key,!1):a=="values"?l1(l.value,!1):l1([l.key,l.value],!1)},t?"entries":"values",!t,!0),Aqe(r)}},Oqe=nX,Cqe=sX;Oqe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Cqe);var Pqe=Kr,Nqe=Pqe.Map,Rqe=Nqe,Dqe=Rqe;(function(e){e.exports=Dqe})(RKe);var oX=Gt(NO),RO={},Bqe={get exports(){return RO},set exports(e){RO=e}},Mqe=Nt,Lqe=Tv.some,Fqe=jm,jqe=Fqe("some");Mqe({target:"Array",proto:!0,forced:!jqe},{some:function(r){return Lqe(this,r,arguments.length>1?arguments[1]:void 0)}});var Hqe=Vn,zqe=Hqe("Array").some,Uqe=on,Wqe=zqe,nk=Array.prototype,Kqe=function(e){var r=e.some;return e===nk||Uqe(nk,e)&&r===nk.some?Wqe:r},qqe=Kqe,Vqe=qqe;(function(e){e.exports=Vqe})(Bqe);var Gqe=Gt(RO),DO={},Yqe={get exports(){return DO},set exports(e){DO=e}},Zqe=Vn,Xqe=Zqe("Array").keys,Jqe=Xqe,Qqe=Jqe,eVe=wu,tVe=qn,rVe=on,nVe=Qqe,ik=Array.prototype,iVe={DOMTokenList:!0,NodeList:!0},sVe=function(e){var r=e.keys;return e===ik||rVe(ik,e)&&r===ik.keys||tVe(iVe,eVe(e))?nVe:r};(function(e){e.exports=sVe})(Yqe);var Nd=Gt(DO),BO={},oVe={get exports(){return BO},set exports(e){BO=e}},bL=$G,aVe=Math.floor,MO=function(e,r){var t=e.length,n=aVe(t/2);return t<8?lVe(e,r):uVe(e,MO(bL(e,0,n),r),MO(bL(e,n),r),r)},lVe=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},uVe=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},cVe=MO,fVe=Vc,wL=fVe.match(/firefox\/(\d+)/i),hVe=!!wL&&+wL[1],dVe=Vc,pVe=/MSIE|Trident/.test(dVe),vVe=Vc,$L=vVe.match(/AppleWebKit\/(\d+)\./),gVe=!!$L&&+$L[1],yVe=Nt,aX=Mr,mVe=Ds,bVe=Bs,_L=so,wVe=DY,xL=yl,R4=kr,$Ve=cVe,_Ve=jm,EL=hVe,xVe=pVe,SL=$v,kL=gVe,gc=[],TL=aX(gc.sort),EVe=aX(gc.push),SVe=R4(function(){gc.sort(void 0)}),kVe=R4(function(){gc.sort(null)}),TVe=_Ve("sort"),lX=!R4(function(){if(SL)return SL<70;if(!(EL&&EL>3)){if(xVe)return!0;if(kL)return kL<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)gc.push({k:t+i,v:n})}for(gc.sort(function(s,o){return o.v-s.v}),i=0;i<gc.length;i++)t=gc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),IVe=SVe||!kVe||!TVe||!lX,AVe=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:xL(r)>xL(t)?1:-1}};yVe({target:"Array",proto:!0,forced:IVe},{sort:function(r){r!==void 0&&mVe(r);var t=bVe(this);if(lX)return r===void 0?TL(t):TL(t,r);var n=[],i=_L(t),s,o;for(o=0;o<i;o++)o in t&&EVe(n,t[o]);for($Ve(n,AVe(r)),s=_L(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)wVe(t,o++);return t}});var OVe=Vn,CVe=OVe("Array").sort,PVe=on,NVe=CVe,sk=Array.prototype,RVe=function(e){var r=e.sort;return e===sk||PVe(sk,e)&&r===sk.sort?NVe:r},DVe=RVe,BVe=DVe;(function(e){e.exports=BVe})(oVe);var LO=Gt(BO),FO={},MVe={get exports(){return FO},set exports(e){FO=e}},LVe=Vn,FVe=LVe("Array").values,jVe=FVe,HVe=jVe,zVe=wu,UVe=qn,WVe=on,KVe=HVe,ok=Array.prototype,qVe={DOMTokenList:!0,NodeList:!0},VVe=function(e){var r=e.values;return e===ok||WVe(ok,e)&&r===ok.values||UVe(qVe,zVe(e))?KVe:r};(function(e){e.exports=VVe})(MVe);var IL=Gt(FO),jO={},GVe={get exports(){return jO},set exports(e){jO=e}};(function(e){e.exports=aY})(GVe);var wp=Gt(jO),HO={},YVe={get exports(){return HO},set exports(e){HO=e}},ZVe=Vn,XVe=ZVe("Array").entries,JVe=XVe,QVe=JVe,eGe=wu,tGe=qn,rGe=on,nGe=QVe,ak=Array.prototype,iGe={DOMTokenList:!0,NodeList:!0},sGe=function(e){var r=e.entries;return e===ak||rGe(ak,e)&&r===ak.entries||tGe(iGe,eGe(e))?nGe:r};(function(e){e.exports=sGe})(YVe);var oGe=Gt(HO);let u1;const aGe=new Uint8Array(16);function lGe(){if(!u1&&(u1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u1(aGe)}const Ei=[];for(let e=0;e<256;++e)Ei.push((e+256).toString(16).slice(1));function uGe(e,r=0){return(Ei[e[r+0]]+Ei[e[r+1]]+Ei[e[r+2]]+Ei[e[r+3]]+"-"+Ei[e[r+4]]+Ei[e[r+5]]+"-"+Ei[e[r+6]]+Ei[e[r+7]]+"-"+Ei[e[r+8]]+Ei[e[r+9]]+"-"+Ei[e[r+10]]+Ei[e[r+11]]+Ei[e[r+12]]+Ei[e[r+13]]+Ei[e[r+14]]+Ei[e[r+15]]).toLowerCase()}const cGe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var AL={randomUUID:cGe};function fGe(e,r,t){if(AL.randomUUID&&!r&&!e)return AL.randomUUID();e=e||{};const n=e.random||(e.rng||lGe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return uGe(n)}function OL(e){return typeof e=="string"||typeof e=="number"}var hGe=function(){function e(r){U_(this,e),Sn(this,"delay",void 0),Sn(this,"max",void 0),Sn(this,"_queue",[]),Sn(this,"_timeout",null),Sn(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(r)}return sx(e,[{key:"setOptions",value:function(t){t&&typeof t.delay<"u"&&(this.delay=t.delay),t&&typeof t.max<"u"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,n=this._extended.methods,i=0;i<n.length;i++){var s=n[i];s.original?t[s.name]=s.original:delete t[s.name]}this._extended=null}}},{key:"replace",value:function(t,n){var i=this,s=t[n];if(!s)throw new Error("Method "+n+" undefined");t[n]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=rje(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,n;xh(t=BY(n=this._queue).call(n,0)).call(t,function(i){i.fn.apply(i.context||i.fn,i.args||[])})}}],[{key:"extend",value:function(t,n){var i=new e(n);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var s=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];s.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:s},i}}]),e}(),dGe=function(){function e(){U_(this,e),Sn(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Sn(this,"subscribe",e.prototype.on),Sn(this,"unsubscribe",e.prototype.off)}return sx(e,[{key:"_trigger",value:function(t,n,i){var s,o;if(t==="*")throw new Error("Cannot trigger event *");xh(s=lx(o=[]).call(o,ks(this._subscribers[t]),ks(this._subscribers["*"]))).call(s,function(a){a(t,n,i??null)})}},{key:"on",value:function(t,n){typeof n=="function"&&this._subscribers[t].push(n)}},{key:"off",value:function(t,n){var i;this._subscribers[t]=Xd(i=this._subscribers[t]).call(i,function(s){return s!==n})}}]),e}(),zO={},pGe={get exports(){return zO},set exports(e){zO=e}},vGe=nX,gGe=sX;vGe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},gGe);var yGe=Kr,mGe=yGe.Set,bGe=mGe,wGe=bGe;(function(e){e.exports=wGe})(pGe);var lk=Gt(zO),UO={},$Ge={get exports(){return UO},set exports(e){UO=e}},WO={},_Ge={get exports(){return WO},set exports(e){WO=e}},xGe=d4,EGe=xGe,SGe=EGe,kGe=SGe,TGe=kGe,IGe=TGe,AGe=IGe,OGe=AGe;(function(e){e.exports=OGe})(_Ge);(function(e){e.exports=WO})($Ge);var uk=Gt(UO),uX;function Ya(e,r){var t=typeof ax<"u"&&zm(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=CGe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function CGe(e,r){var t;if(e){if(typeof e=="string")return CL(e,r);var n=ux(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return p4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CL(e,r)}}function CL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}uX=wp;var PL=function(){function e(r){U_(this,e),Sn(this,"_pairs",void 0),this._pairs=r}return sx(e,[{key:uX,value:_s.mark(function r(){var t,n,i,s,o;return _s.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=Ya(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=ws(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:_s.mark(function r(){var t,n,i,s,o;return _s.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=Ya(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=ws(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:_s.mark(function r(){var t,n,i,s;return _s.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=Ya(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=ws(n.value,1),s=i[0],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:_s.mark(function r(){var t,n,i,s;return _s.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=Ya(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=ws(n.value,2),s=i[1],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return la(t=ks(this._pairs)).call(t,function(n){return n[0]})}},{key:"toItemArray",value:function(){var t;return la(t=ks(this._pairs)).call(t,function(n){return n[1]})}},{key:"toEntryArray",value:function(){return ks(this._pairs)}},{key:"toObjectMap",value:function(){var t=P9e(null),n=Ya(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=ws(i.value,2),o=s[0],a=s[1];t[o]=a}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"toMap",value:function(){return new oX(this._pairs)}},{key:"toIdSet",value:function(){return new lk(this.toIdArray())}},{key:"toItemSet",value:function(){return new lk(this.toItemArray())}},{key:"cache",value:function(){return new e(ks(this._pairs))}},{key:"distinct",value:function(t){var n=new lk,i=Ya(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=ws(s.value,2),a=o[0],l=o[1];n.add(t(l,a))}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e(Sn({},wp,_s.mark(function i(){var s,o,a,l,u;return _s.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=Ya(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=10;break}if(a=ws(o.value,2),l=a[0],u=a[1],!t(u,l)){c.next=8;break}return c.next=8,[l,u];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),s.e(c.t0);case 15:return c.prev=15,s.f(),c.finish(15);case 18:case"end":return c.stop()}},i,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var n=Ya(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=ws(i.value,2),o=s[0],a=s[1];t(a,o)}}catch(l){n.e(l)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e(Sn({},wp,_s.mark(function i(){var s,o,a,l,u;return _s.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=Ya(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=9;break}return a=ws(o.value,2),l=a[0],u=a[1],c.next=7,[l,t(u,l)];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),s.e(c.t0);case 14:return c.prev=14,s.f(),c.finish(14);case 17:case"end":return c.stop()}},i,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var n=uk(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=ws(i.value,2),l=a[0],u=a[1],h=t(u,l);h>o&&(o=h,s=u)}return s}},{key:"min",value:function(t){var n=uk(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=ws(i.value,2),l=a[0],u=a[1],h=t(u,l);h<o&&(o=h,s=u)}return s}},{key:"reduce",value:function(t,n){var i=Ya(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=ws(s.value,2),a=o[0],l=o[1];n=t(n,l,a)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"sort",value:function(t){var n=this;return new e(Sn({},wp,function(){var i;return uk(LO(i=ks(n._pairs)).call(i,function(s,o){var a=ws(s,2),l=a[0],u=a[1],h=ws(o,2),c=h[0],p=h[1];return t(u,p,l,c)}))}))}}]),e}();function NL(e,r){var t=g4(e);if(qM){var n=qM(e);r&&(n=Xd(n).call(n,function(i){return EY(e,i).enumerable})),t.push.apply(t,n)}return t}function RL(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?xh(t=NL(Object(i),!0)).call(t,function(s){Sn(e,s,i[s])}):VM?M8e(e,VM(i)):xh(n=NL(Object(i))).call(n,function(s){F8e(e,s,EY(i,s))})}return e}function ck(e,r){var t=typeof ax<"u"&&zm(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=PGe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function PGe(e,r){var t;if(e){if(typeof e=="string")return DL(e,r);var n=ux(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return p4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DL(e,r)}}function DL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function NGe(e){var r=RGe();return function(){var n=y$(e),i;if(r){var s=y$(this).constructor;i=tw(n,arguments,s)}else i=n.apply(this,arguments);return XHe(this,i)}}function RGe(){if(typeof Reflect>"u"||!tw||tw.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(tw(Boolean,[],function(){})),!0}catch{return!1}}function DGe(e,r){return e[r]==null&&(e[r]=fGe()),e}var va=function(e){ZHe(t,e);var r=NGe(t);function t(n,i){var s;return U_(this,t),s=r.call(this),Sn(Tf(s),"flush",void 0),Sn(Tf(s),"length",void 0),Sn(Tf(s),"_options",void 0),Sn(Tf(s),"_data",void 0),Sn(Tf(s),"_idProp",void 0),Sn(Tf(s),"_queue",null),n&&!Vs(n)&&(i=n,n=[]),s._options=i||{},s._data=new oX,s.length=0,s._idProp=s._options.fieldId||"id",n&&n.length&&s.add(n),s.setOptions(i),s}return sx(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=hGe.extend(this,{replace:["add","update","remove"]})),i.queue&&Ai(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,s){var o=this,a=[],l;if(Vs(i)){var u=la(i).call(i,function(p){return p[o._idProp]});if(Gqe(u).call(u,function(p){return o._data.has(p)}))throw new Error("A duplicate id was found in the parameter array.");for(var h=0,c=i.length;h<c;h++)l=this._addItem(i[h]),a.push(l)}else if(i&&Ai(i)==="object")l=this._addItem(i),a.push(l);else throw new Error("Unknown dataType");return a.length&&this._trigger("add",{items:a},s),a}},{key:"update",value:function(i,s){var o=this,a=[],l=[],u=[],h=[],c=this._idProp,p=function(_){var A=_[c];if(A!=null&&o._data.has(A)){var x=_,I=PLe({},o._data.get(A)),O=o._updateItem(x);l.push(O),h.push(x),u.push(I)}else{var C=o._addItem(_);a.push(C)}};if(Vs(i))for(var m=0,w=i.length;m<w;m++)i[m]&&Ai(i[m])==="object"?p(i[m]):console.warn("Ignoring input item, which is not an object at index "+m);else if(i&&Ai(i)==="object")p(i);else throw new Error("Unknown dataType");if(a.length&&this._trigger("add",{items:a},s),l.length){var b={items:l,oldData:u,data:h};this._trigger("update",b,s)}return lx(a).call(a,l)}},{key:"updateOnly",value:function(i,s){var o,a=this;Vs(i)||(i=[i]);var l=la(o=la(i).call(i,function(h){var c=a._data.get(h[a._idProp]);if(c==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:c,update:h}})).call(o,function(h){var c=h.oldData,p=h.update,m=c[a._idProp],w=oHe(c,p);return a._data.set(m,w),{id:m,oldData:c,updatedData:w}});if(l.length){var u={items:la(l).call(l,function(h){return h.id}),oldData:la(l).call(l,function(h){return h.oldData}),data:la(l).call(l,function(h){return h.updatedData})};return this._trigger("update",u,s),u.items}else return[]}},{key:"get",value:function(i,s){var o=void 0,a=void 0,l=void 0;OL(i)?(o=i,l=s):Vs(i)?(a=i,l=s):l=i;var u=l&&l.returnType==="Object"?"Object":"Array",h=l&&Xd(l),c=[],p=void 0,m=void 0,w=void 0;if(o!=null)p=this._data.get(o),p&&h&&!h(p)&&(p=void 0);else if(a!=null)for(var b=0,T=a.length;b<T;b++)p=this._data.get(a[b]),p!=null&&(!h||h(p))&&c.push(p);else{var _;m=ks(Nd(_=this._data).call(_));for(var A=0,x=m.length;A<x;A++)w=m[A],p=this._data.get(w),p!=null&&(!h||h(p))&&c.push(p)}if(l&&l.order&&o==null&&this._sort(c,l.order),l&&l.fields){var I=l.fields;if(o!=null&&p!=null)p=this._filterFields(p,I);else for(var O=0,C=c.length;O<C;O++)c[O]=this._filterFields(c[O],I)}if(u=="Object"){for(var g={},R=0,M=c.length;R<M;R++){var U=c[R],V=U[this._idProp];g[V]=U}return g}else if(o!=null){var ne;return(ne=p)!==null&&ne!==void 0?ne:null}else return c}},{key:"getIds",value:function(i){var s=this._data,o=i&&Xd(i),a=i&&i.order,l=ks(Nd(s).call(s)),u=[];if(o)if(a){for(var h=[],c=0,p=l.length;c<p;c++){var m=l[c],w=this._data.get(m);w!=null&&o(w)&&h.push(w)}this._sort(h,a);for(var b=0,T=h.length;b<T;b++)u.push(h[b][this._idProp])}else for(var _=0,A=l.length;_<A;_++){var x=l[_],I=this._data.get(x);I!=null&&o(I)&&u.push(I[this._idProp])}else if(a){for(var O=[],C=0,g=l.length;C<g;C++){var R=l[C];O.push(s.get(R))}this._sort(O,a);for(var M=0,U=O.length;M<U;M++)u.push(O[M][this._idProp])}else for(var V=0,ne=l.length;V<ne;V++){var re=l[V],Q=s.get(re);Q!=null&&u.push(Q[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,s){var o=s&&Xd(s),a=this._data,l=ks(Nd(a).call(a));if(s&&s.order)for(var u=this.get(s),h=0,c=u.length;h<c;h++){var p=u[h],m=p[this._idProp];i(p,m)}else for(var w=0,b=l.length;w<b;w++){var T=l[w],_=this._data.get(T);_!=null&&(!o||o(_))&&i(_,T)}}},{key:"map",value:function(i,s){for(var o=s&&Xd(s),a=[],l=this._data,u=ks(Nd(l).call(l)),h=0,c=u.length;h<c;h++){var p=u[h],m=this._data.get(p);m!=null&&(!o||o(m))&&a.push(i(m,p))}return s&&s.order&&this._sort(a,s.order),a}},{key:"_filterFields",value:function(i,s){var o;return i&&fBe(o=Vs(s)?s:g4(s)).call(o,function(a,l){return a[l]=i[l],a},{})}},{key:"_sort",value:function(i,s){if(typeof s=="string"){var o=s;LO(i).call(i,function(a,l){var u=a[o],h=l[o];return u>h?1:u<h?-1:0})}else if(typeof s=="function")LO(i).call(i,s);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,s){for(var o=[],a=[],l=Vs(i)?i:[i],u=0,h=l.length;u<h;u++){var c=this._remove(l[u]);if(c){var p=c[this._idProp];p!=null&&(o.push(p),a.push(c))}}return o.length&&this._trigger("remove",{items:o,oldData:a},s),o}},{key:"_remove",value:function(i){var s;if(OL(i)?s=i:i&&Ai(i)==="object"&&(s=i[this._idProp]),s!=null&&this._data.has(s)){var o=this._data.get(s)||null;return this._data.delete(s),--this.length,o}return null}},{key:"clear",value:function(i){for(var s,o=ks(Nd(s=this._data).call(s)),a=[],l=0,u=o.length;l<u;l++)a.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:a},i),o}},{key:"max",value:function(i){var s,o=null,a=null,l=ck(IL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,c=h[i];typeof c=="number"&&(a==null||c>a)&&(o=h,a=c)}}catch(p){l.e(p)}finally{l.f()}return o||null}},{key:"min",value:function(i){var s,o=null,a=null,l=ck(IL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,c=h[i];typeof c=="number"&&(a==null||c<a)&&(o=h,a=c)}}catch(p){l.e(p)}finally{l.f()}return o||null}},{key:"distinct",value:function(i){for(var s=this._data,o=ks(Nd(s).call(s)),a=[],l=0,u=0,h=o.length;u<h;u++){for(var c=o[u],p=s.get(c),m=p[i],w=!1,b=0;b<l;b++)if(a[b]==m){w=!0;break}!w&&m!==void 0&&(a[l]=m,l++)}return a}},{key:"_addItem",value:function(i){var s=DGe(i,this._idProp),o=s[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,s),++this.length,o}},{key:"_updateItem",value:function(i){var s=i[this._idProp];if(s==null)throw new Error("Cannot update item: item has no id (item: "+L9e(i)+")");var o=this._data.get(s);if(!o)throw new Error("Cannot update item: no item with id "+s+" found");return this._data.set(s,RL(RL({},o),i)),s}},{key:"stream",value:function(i){if(i){var s=this._data;return new PL(Sn({},wp,_s.mark(function a(){var l,u,h,c;return _s.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:l=ck(i),m.prev=1,l.s();case 3:if((u=l.n()).done){m.next=11;break}if(h=u.value,c=s.get(h),c==null){m.next=9;break}return m.next=9,[h,c];case 9:m.next=3;break;case 11:m.next=16;break;case 13:m.prev=13,m.t0=m.catch(1),l.e(m.t0);case 16:return m.prev=16,l.f(),m.finish(16);case 19:case"end":return m.stop()}},a,null,[[1,13,16,19]])})))}else{var o;return new PL(Sn({},wp,dY(o=oGe(this._data)).call(o,this._data)))}}}]),t}(dGe);function BGe(e,r){return Ai(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof xh(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof la(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function cX(e,r){return Ai(r)==="object"&&r!==null&&e===r.idProp&&typeof xh(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof la(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&BGe(e,r.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.6
 * @date    2023-03-23T21:31:19.223Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var KO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qO={},MGe={get exports(){return qO},set exports(e){qO=e}},c1=function(e){return e&&e.Math==Math&&e},Gn=c1(typeof globalThis=="object"&&globalThis)||c1(typeof window=="object"&&window)||c1(typeof self=="object"&&self)||c1(typeof KO=="object"&&KO)||function(){return this}()||Function("return this")(),Tr=function(e){try{return!!e()}catch{return!0}},LGe=Tr,Zm=!LGe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),FGe=Zm,fX=Function.prototype,BL=fX.apply,ML=fX.call,Xm=typeof Reflect=="object"&&Reflect.apply||(FGe?ML.bind(BL):function(){return ML.apply(BL,arguments)}),hX=Zm,dX=Function.prototype,VO=dX.call,jGe=hX&&dX.bind.bind(VO,VO),Ir=hX?jGe:function(e){return function(){return VO.apply(e,arguments)}},pX=Ir,HGe=pX({}.toString),zGe=pX("".slice),_u=function(e){return zGe(HGe(e),8,-1)},UGe=_u,WGe=Ir,D4=function(e){if(UGe(e)==="Function")return WGe(e)},GO=typeof document=="object"&&document.all,KGe=typeof GO>"u"&&GO!==void 0,vX={all:GO,IS_HTMLDDA:KGe},gX=vX,qGe=gX.all,bi=gX.IS_HTMLDDA?function(e){return typeof e=="function"||e===qGe}:function(e){return typeof e=="function"},Pv={},VGe=Tr,ii=!VGe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),GGe=Zm,f1=Function.prototype.call,oo=GGe?f1.bind(f1):function(){return f1.apply(f1,arguments)},Jm={},yX={}.propertyIsEnumerable,mX=Object.getOwnPropertyDescriptor,YGe=mX&&!yX.call({1:2},1);Jm.f=YGe?function(r){var t=mX(this,r);return!!t&&t.enumerable}:yX;var Qm=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},ZGe=Ir,XGe=Tr,JGe=_u,fk=Object,QGe=ZGe("".split),px=XGe(function(){return!fk("z").propertyIsEnumerable(0)})?function(e){return JGe(e)=="String"?QGe(e,""):fk(e)}:fk,e0=function(e){return e==null},eYe=e0,tYe=TypeError,t0=function(e){if(eYe(e))throw tYe("Can't call method on "+e);return e},rYe=px,nYe=t0,Aa=function(e){return rYe(nYe(e))},LL=bi,bX=vX,iYe=bX.all,wi=bX.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:LL(e)||e===iYe}:function(e){return typeof e=="object"?e!==null:LL(e)},_r={},hk=_r,dk=Gn,sYe=bi,FL=function(e){return sYe(e)?e:void 0},qo=function(e,r){return arguments.length<2?FL(hk[e])||FL(dk[e]):hk[e]&&hk[e][r]||dk[e]&&dk[e][r]},oYe=Ir,Rn=oYe({}.isPrototypeOf),r0=typeof navigator<"u"&&String(navigator.userAgent)||"",wX=Gn,pk=r0,jL=wX.process,HL=wX.Deno,zL=jL&&jL.versions||HL&&HL.version,UL=zL&&zL.v8,ua,_$;UL&&(ua=UL.split("."),_$=ua[0]>0&&ua[0]<4?1:+(ua[0]+ua[1]));!_$&&pk&&(ua=pk.match(/Edge\/(\d+)/),(!ua||ua[1]>=74)&&(ua=pk.match(/Chrome\/(\d+)/),ua&&(_$=+ua[1])));var n0=_$,WL=n0,aYe=Tr,Nv=!!Object.getOwnPropertySymbols&&!aYe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&WL&&WL<41}),lYe=Nv,$X=lYe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",uYe=qo,cYe=bi,fYe=Rn,hYe=$X,dYe=Object,i0=hYe?function(e){return typeof e=="symbol"}:function(e){var r=uYe("Symbol");return cYe(r)&&fYe(r.prototype,dYe(e))},pYe=String,Rv=function(e){try{return pYe(e)}catch{return"Object"}},vYe=bi,gYe=Rv,yYe=TypeError,zh=function(e){if(vYe(e))return e;throw yYe(gYe(e)+" is not a function")},mYe=zh,bYe=e0,B4=function(e,r){var t=e[r];return bYe(t)?void 0:mYe(t)},vk=oo,gk=bi,yk=wi,wYe=TypeError,$Ye=function(e,r){var t,n;if(r==="string"&&gk(t=e.toString)&&!yk(n=vk(t,e))||gk(t=e.valueOf)&&!yk(n=vk(t,e))||r!=="string"&&gk(t=e.toString)&&!yk(n=vk(t,e)))return n;throw wYe("Can't convert object to primitive value")},Lc={},_Ye={get exports(){return Lc},set exports(e){Lc=e}},KL=Gn,xYe=Object.defineProperty,EYe=function(e,r){try{xYe(KL,e,{value:r,configurable:!0,writable:!0})}catch{KL[e]=r}return r},SYe=Gn,kYe=EYe,qL="__core-js_shared__",TYe=SYe[qL]||kYe(qL,{}),M4=TYe,VL=M4;(_Ye.exports=function(e,r){return VL[e]||(VL[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var IYe=t0,AYe=Object,ao=function(e){return AYe(IYe(e))},OYe=Ir,CYe=ao,PYe=OYe({}.hasOwnProperty),$i=Object.hasOwn||function(r,t){return PYe(CYe(r),t)},NYe=Ir,RYe=0,DYe=Math.random(),BYe=NYe(1 .toString),vx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+BYe(++RYe+DYe,36)},MYe=Gn,LYe=Lc,GL=$i,FYe=vx,jYe=Nv,HYe=$X,rp=MYe.Symbol,mk=LYe("wks"),zYe=HYe?rp.for||rp:rp&&rp.withoutSetter||FYe,Dn=function(e){return GL(mk,e)||(mk[e]=jYe&&GL(rp,e)?rp[e]:zYe("Symbol."+e)),mk[e]},UYe=oo,YL=wi,ZL=i0,WYe=B4,KYe=$Ye,qYe=Dn,VYe=TypeError,GYe=qYe("toPrimitive"),YYe=function(e,r){if(!YL(e)||ZL(e))return e;var t=WYe(e,GYe),n;if(t){if(r===void 0&&(r="default"),n=UYe(t,e,r),!YL(n)||ZL(n))return n;throw VYe("Can't convert object to primitive value")}return r===void 0&&(r="number"),KYe(e,r)},ZYe=YYe,XYe=i0,gx=function(e){var r=ZYe(e,"string");return XYe(r)?r:r+""},JYe=Gn,XL=wi,YO=JYe.document,QYe=XL(YO)&&XL(YO.createElement),_X=function(e){return QYe?YO.createElement(e):{}},eZe=ii,tZe=Tr,rZe=_X,xX=!eZe&&!tZe(function(){return Object.defineProperty(rZe("div"),"a",{get:function(){return 7}}).a!=7}),nZe=ii,iZe=oo,sZe=Jm,oZe=Qm,aZe=Aa,lZe=gx,uZe=$i,cZe=xX,JL=Object.getOwnPropertyDescriptor;Pv.f=nZe?JL:function(r,t){if(r=aZe(r),t=lZe(t),cZe)try{return JL(r,t)}catch{}if(uZe(r,t))return oZe(!iZe(sZe.f,r,t),r[t])};var fZe=Tr,hZe=bi,dZe=/#|\.prototype\./,s0=function(e,r){var t=vZe[pZe(e)];return t==yZe?!0:t==gZe?!1:hZe(r)?fZe(r):!!r},pZe=s0.normalize=function(e){return String(e).replace(dZe,".").toLowerCase()},vZe=s0.data={},gZe=s0.NATIVE="N",yZe=s0.POLYFILL="P",mZe=s0,QL=D4,bZe=zh,wZe=Zm,$Ze=QL(QL.bind),o0=function(e,r){return bZe(e),r===void 0?e:wZe?$Ze(e,r):function(){return e.apply(r,arguments)}},Vo={},_Ze=ii,xZe=Tr,EX=_Ze&&xZe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),EZe=wi,SZe=String,kZe=TypeError,lo=function(e){if(EZe(e))return e;throw kZe(SZe(e)+" is not an object")},TZe=ii,IZe=xX,AZe=EX,h1=lo,eF=gx,OZe=TypeError,bk=Object.defineProperty,CZe=Object.getOwnPropertyDescriptor,wk="enumerable",$k="configurable",_k="writable";Vo.f=TZe?AZe?function(r,t,n){if(h1(r),t=eF(t),h1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&_k in n&&!n[_k]){var i=CZe(r,t);i&&i[_k]&&(r[t]=n.value,n={configurable:$k in n?n[$k]:i[$k],enumerable:wk in n?n[wk]:i[wk],writable:!1})}return bk(r,t,n)}:bk:function(r,t,n){if(h1(r),t=eF(t),h1(n),IZe)try{return bk(r,t,n)}catch{}if("get"in n||"set"in n)throw OZe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var PZe=ii,NZe=Vo,RZe=Qm,Dv=PZe?function(e,r,t){return NZe.f(e,r,RZe(1,t))}:function(e,r,t){return e[r]=t,e},d1=Gn,DZe=Xm,BZe=D4,MZe=bi,LZe=Pv.f,FZe=mZe,Rd=_r,jZe=o0,Dd=Dv,tF=$i,HZe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return DZe(e,this,arguments)};return r.prototype=e.prototype,r},jt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?d1:i?d1[t]:(d1[t]||{}).prototype,a=n?Rd:Rd[t]||Dd(Rd,t,{})[t],l=a.prototype,u,h,c,p,m,w,b,T,_;for(p in r)u=FZe(n?p:t+(i?".":"#")+p,e.forced),h=!u&&o&&tF(o,p),w=a[p],h&&(e.dontCallGetSet?(_=LZe(o,p),b=_&&_.value):b=o[p]),m=h&&b?b:r[p],!(h&&typeof w==typeof m)&&(e.bind&&h?T=jZe(m,d1):e.wrap&&h?T=HZe(m):s&&MZe(m)?T=BZe(m):T=m,(e.sham||m&&m.sham||w&&w.sham)&&Dd(T,"sham",!0),Dd(a,p,T),s&&(c=t+"Prototype",tF(Rd,c)||Dd(Rd,c,{}),Dd(Rd[c],p,m),e.real&&l&&(u||!l[p])&&Dd(l,p,m)))},zZe=Math.ceil,UZe=Math.floor,WZe=Math.trunc||function(r){var t=+r;return(t>0?UZe:zZe)(t)},KZe=WZe,yx=function(e){var r=+e;return r!==r||r===0?0:KZe(r)},qZe=yx,VZe=Math.max,GZe=Math.min,a0=function(e,r){var t=qZe(e);return t<0?VZe(t+r,0):GZe(t,r)},YZe=yx,ZZe=Math.min,XZe=function(e){return e>0?ZZe(YZe(e),9007199254740991):0},JZe=XZe,Oa=function(e){return JZe(e.length)},QZe=Aa,eXe=a0,tXe=Oa,rF=function(e){return function(r,t,n){var i=QZe(r),s=tXe(i),o=eXe(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},L4={includes:rF(!0),indexOf:rF(!1)},l0={},rXe=Ir,xk=$i,nXe=Aa,iXe=L4.indexOf,sXe=l0,nF=rXe([].push),SX=function(e,r){var t=nXe(e),n=0,i=[],s;for(s in t)!xk(sXe,s)&&xk(t,s)&&nF(i,s);for(;r.length>n;)xk(t,s=r[n++])&&(~iXe(i,s)||nF(i,s));return i},F4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],oXe=SX,aXe=F4,u0=Object.keys||function(r){return oXe(r,aXe)},c0={};c0.f=Object.getOwnPropertySymbols;var iF=ii,lXe=Ir,uXe=oo,cXe=Tr,Ek=u0,fXe=c0,hXe=Jm,dXe=ao,pXe=px,Bd=Object.assign,sF=Object.defineProperty,vXe=lXe([].concat),gXe=!Bd||cXe(function(){if(iF&&Bd({b:1},Bd(sF({},"a",{enumerable:!0,get:function(){sF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Bd({},e)[t]!=7||Ek(Bd({},r)).join("")!=n})?function(r,t){for(var n=dXe(r),i=arguments.length,s=1,o=fXe.f,a=hXe.f;i>s;)for(var l=pXe(arguments[s++]),u=o?vXe(Ek(l),o(l)):Ek(l),h=u.length,c=0,p;h>c;)p=u[c++],(!iF||uXe(a,l,p))&&(n[p]=l[p]);return n}:Bd,yXe=jt,oF=gXe;yXe({target:"Object",stat:!0,arity:2,forced:Object.assign!==oF},{assign:oF});var mXe=_r,bXe=mXe.Object.assign,wXe=bXe,$Xe=wXe;(function(e){e.exports=$Xe})(MGe);var Un=Pt(qO),ZO={},_Xe={get exports(){return ZO},set exports(e){ZO=e}},xXe=Ir,mx=xXe([].slice),kX=Ir,EXe=zh,SXe=wi,kXe=$i,aF=mx,TXe=Zm,TX=Function,IXe=kX([].concat),AXe=kX([].join),Sk={},OXe=function(e,r,t){if(!kXe(Sk,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";Sk[r]=TX("C,a","return new C("+AXe(n,",")+")")}return Sk[r](e,t)},IX=TXe?TX.bind:function(r){var t=EXe(this),n=t.prototype,i=aF(arguments,1),s=function(){var a=IXe(i,aF(arguments));return this instanceof s?OXe(t,a.length,a):t.apply(r,a)};return SXe(n)&&(s.prototype=n),s},CXe=jt,lF=IX;CXe({target:"Function",proto:!0,forced:Function.bind!==lF},{bind:lF});var PXe=_r,_i=function(e){return PXe[e+"Prototype"]},NXe=_i,RXe=NXe("Function").bind,DXe=Rn,BXe=RXe,kk=Function.prototype,MXe=function(e){var r=e.bind;return e===kk||DXe(kk,e)&&r===kk.bind?BXe:r},LXe=MXe,AX=LXe;(function(e){e.exports=AX})(_Xe);var nt=Pt(ZO);function j4(e,r,t,n){e.beginPath(),e.arc(r,t,n,0,2*Math.PI,!1),e.closePath()}function FXe(e,r,t,n){e.beginPath(),e.rect(r-n,t-n,n*2,n*2),e.closePath()}function jXe(e,r,t,n){e.beginPath(),n*=1.15,t+=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t-(a-o)),e.lineTo(r+s,t+o),e.lineTo(r-s,t+o),e.lineTo(r,t-(a-o)),e.closePath()}function HXe(e,r,t,n){e.beginPath(),n*=1.15,t-=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t+(a-o)),e.lineTo(r+s,t-o),e.lineTo(r-s,t-o),e.lineTo(r,t+(a-o)),e.closePath()}function zXe(e,r,t,n){e.beginPath(),n*=.82,t+=.1*n;for(var i=0;i<10;i++){var s=i%2===0?n*1.3:n*.5;e.lineTo(r+s*Math.sin(i*2*Math.PI/10),t-s*Math.cos(i*2*Math.PI/10))}e.closePath()}function UXe(e,r,t,n){e.beginPath(),e.lineTo(r,t+n),e.lineTo(r+n,t),e.lineTo(r,t-n),e.lineTo(r-n,t),e.closePath()}function OX(e,r,t,n,i,s){var o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),e.beginPath(),e.moveTo(r+s,t),e.lineTo(r+n-s,t),e.arc(r+n-s,t+s,s,o*270,o*360,!1),e.lineTo(r+n,t+i-s),e.arc(r+n-s,t+i-s,s,0,o*90,!1),e.lineTo(r+s,t+i),e.arc(r+s,t+i-s,s,o*90,o*180,!1),e.lineTo(r,t+s),e.arc(r+s,t+s,s,o*180,o*270,!1),e.closePath()}function XO(e,r,t,n,i){var s=.5522848,o=n/2*s,a=i/2*s,l=r+n,u=t+i,h=r+n/2,c=t+i/2;e.beginPath(),e.moveTo(r,c),e.bezierCurveTo(r,c-a,h-o,t,h,t),e.bezierCurveTo(h+o,t,l,c-a,l,c),e.bezierCurveTo(l,c+a,h+o,u,h,u),e.bezierCurveTo(h-o,u,r,c+a,r,c),e.closePath()}function CX(e,r,t,n,i){var s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,h=a/2*l,c=r+o,p=t+a,m=r+o/2,w=t+a/2,b=t+(i-a/2),T=t+i;e.beginPath(),e.moveTo(c,w),e.bezierCurveTo(c,w+h,m+u,p,m,p),e.bezierCurveTo(m-u,p,r,w+h,r,w),e.bezierCurveTo(r,w-h,m-u,t,m,t),e.bezierCurveTo(m+u,t,c,w-h,c,w),e.lineTo(c,b),e.bezierCurveTo(c,b+h,m+u,T,m,T),e.bezierCurveTo(m-u,T,r,b+h,r,b),e.lineTo(r,w)}function PX(e,r,t,n,i,s){e.beginPath(),e.moveTo(r,t);for(var o=s.length,a=n-r,l=i-t,u=l/a,h=Math.sqrt(a*a+l*l),c=0,p=!0,m=0,w=+s[0];h>=.1;)w=+s[c++%o],w>h&&(w=h),m=Math.sqrt(w*w/(1+u*u)),m=a<0?-m:m,r+=m,t+=u*m,p===!0?e.lineTo(r,t):e.moveTo(r,t),h-=w,p=!p}function WXe(e,r,t,n){e.beginPath();var i=6,s=Math.PI*2/i;e.moveTo(r+n,t);for(var o=1;o<i;o++)e.lineTo(r+n*Math.cos(s*o),t+n*Math.sin(s*o));e.closePath()}var uF={circle:j4,dashedLine:PX,database:CX,diamond:UXe,ellipse:XO,ellipse_vis:XO,hexagon:WXe,roundRect:OX,square:FXe,star:zXe,triangle:jXe,triangleDown:HXe};function KXe(e){return Object.prototype.hasOwnProperty.call(uF,e)?uF[e]:function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(r,n)}}var JO={},qXe={get exports(){return JO},set exports(e){JO=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(qXe);var NX=JO,QO={},VXe={get exports(){return QO},set exports(e){QO=e}},GXe=Dn,YXe=GXe("toStringTag"),RX={};RX[YXe]="z";var H4=String(RX)==="[object z]",ZXe=H4,XXe=bi,sw=_u,JXe=Dn,QXe=JXe("toStringTag"),eJe=Object,tJe=sw(function(){return arguments}())=="Arguments",rJe=function(e,r){try{return e[r]}catch{}},Uh=ZXe?sw:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=rJe(r=eJe(e),QXe))=="string"?t:tJe?sw(r):(n=sw(r))=="Object"&&XXe(r.callee)?"Arguments":n},nJe=Uh,iJe=String,ml=function(e){if(nJe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return iJe(e)},z4=Ir,sJe=yx,oJe=ml,aJe=t0,lJe=z4("".charAt),cF=z4("".charCodeAt),uJe=z4("".slice),fF=function(e){return function(r,t){var n=oJe(aJe(r)),i=sJe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=cF(n,i),o<55296||o>56319||i+1===s||(a=cF(n,i+1))<56320||a>57343?e?lJe(n,i):o:e?uJe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},cJe={codeAt:fF(!1),charAt:fF(!0)},fJe=Gn,hJe=bi,hF=fJe.WeakMap,DX=hJe(hF)&&/native code/.test(String(hF)),dJe=Lc,pJe=vx,dF=dJe("keys"),bx=function(e){return dF[e]||(dF[e]=pJe(e))},vJe=DX,BX=Gn,gJe=wi,yJe=Dv,Tk=$i,Ik=M4,mJe=bx,bJe=l0,pF="Object already initialized",e5=BX.TypeError,wJe=BX.WeakMap,x$,Gy,E$,$Je=function(e){return E$(e)?Gy(e):x$(e,{})},_Je=function(e){return function(r){var t;if(!gJe(r)||(t=Gy(r)).type!==e)throw e5("Incompatible receiver, "+e+" required");return t}};if(vJe||Ik.state){var Za=Ik.state||(Ik.state=new wJe);Za.get=Za.get,Za.has=Za.has,Za.set=Za.set,x$=function(e,r){if(Za.has(e))throw e5(pF);return r.facade=e,Za.set(e,r),r},Gy=function(e){return Za.get(e)||{}},E$=function(e){return Za.has(e)}}else{var Md=mJe("state");bJe[Md]=!0,x$=function(e,r){if(Tk(e,Md))throw e5(pF);return r.facade=e,yJe(e,Md,r),r},Gy=function(e){return Tk(e,Md)?e[Md]:{}},E$=function(e){return Tk(e,Md)}}var Wh={set:x$,get:Gy,has:E$,enforce:$Je,getterFor:_Je},t5=ii,xJe=$i,MX=Function.prototype,EJe=t5&&Object.getOwnPropertyDescriptor,U4=xJe(MX,"name"),SJe=U4&&(function(){}).name==="something",kJe=U4&&(!t5||t5&&EJe(MX,"name").configurable),LX={EXISTS:U4,PROPER:SJe,CONFIGURABLE:kJe},wx={},TJe=ii,IJe=EX,AJe=Vo,OJe=lo,CJe=Aa,PJe=u0;wx.f=TJe&&!IJe?Object.defineProperties:function(r,t){OJe(r);for(var n=CJe(t),i=PJe(t),s=i.length,o=0,a;s>o;)AJe.f(r,a=i[o++],n[a]);return r};var NJe=qo,RJe=NJe("document","documentElement"),DJe=lo,BJe=wx,vF=F4,MJe=l0,LJe=RJe,FJe=_X,jJe=bx,gF=">",yF="<",r5="prototype",n5="script",FX=jJe("IE_PROTO"),Ak=function(){},jX=function(e){return yF+n5+gF+e+yF+"/"+n5+gF},mF=function(e){e.write(jX("")),e.close();var r=e.parentWindow.Object;return e=null,r},HJe=function(){var e=FJe("iframe"),r="java"+n5+":",t;return e.style.display="none",LJe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(jX("document.F=Object")),t.close(),t.F},p1,ow=function(){try{p1=new ActiveXObject("htmlfile")}catch{}ow=typeof document<"u"?document.domain&&p1?mF(p1):HJe():mF(p1);for(var e=vF.length;e--;)delete ow[r5][vF[e]];return ow()};MJe[FX]=!0;var Bv=Object.create||function(r,t){var n;return r!==null?(Ak[r5]=DJe(r),n=new Ak,Ak[r5]=null,n[FX]=r):n=ow(),t===void 0?n:BJe.f(n,t)},zJe=Tr,HX=!zJe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),UJe=$i,WJe=bi,KJe=ao,qJe=bx,VJe=HX,bF=qJe("IE_PROTO"),i5=Object,GJe=i5.prototype,$x=VJe?i5.getPrototypeOf:function(e){var r=KJe(e);if(UJe(r,bF))return r[bF];var t=r.constructor;return WJe(t)&&r instanceof t?t.prototype:r instanceof i5?GJe:null},YJe=Dv,f0=function(e,r,t,n){return n&&n.enumerable?e[r]=t:YJe(e,r,t),e},ZJe=Tr,XJe=bi,JJe=wi,QJe=Bv,wF=$x,eQe=f0,tQe=Dn,s5=tQe("iterator"),zX=!1,ru,Ok,Ck;[].keys&&(Ck=[].keys(),"next"in Ck?(Ok=wF(wF(Ck)),Ok!==Object.prototype&&(ru=Ok)):zX=!0);var rQe=!JJe(ru)||ZJe(function(){var e={};return ru[s5].call(e)!==e});rQe?ru={}:ru=QJe(ru);XJe(ru[s5])||eQe(ru,s5,function(){return this});var UX={IteratorPrototype:ru,BUGGY_SAFARI_ITERATORS:zX},nQe=H4,iQe=Uh,sQe=nQe?{}.toString:function(){return"[object "+iQe(this)+"]"},oQe=H4,aQe=Vo.f,lQe=Dv,uQe=$i,cQe=sQe,fQe=Dn,$F=fQe("toStringTag"),Mv=function(e,r,t,n){if(e){var i=t?e:e.prototype;uQe(i,$F)||aQe(i,$F,{configurable:!0,value:r}),n&&!oQe&&lQe(i,"toString",cQe)}},Lv={},hQe=UX.IteratorPrototype,dQe=Bv,pQe=Qm,vQe=Mv,gQe=Lv,yQe=function(){return this},mQe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=dQe(hQe,{next:pQe(+!n,t)}),vQe(e,i,!1,!0),gQe[i]=yQe,e},bQe=Ir,wQe=zh,$Qe=function(e,r,t){try{return bQe(wQe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},_Qe=bi,xQe=String,EQe=TypeError,SQe=function(e){if(typeof e=="object"||_Qe(e))return e;throw EQe("Can't set "+xQe(e)+" as a prototype")},kQe=$Qe,TQe=lo,IQe=SQe,AQe=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=kQe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return TQe(i),IQe(s),e?t(i,s):i.__proto__=s,i}}():void 0),OQe=jt,CQe=oo,PQe=LX,NQe=mQe,RQe=$x,DQe=Mv,_F=f0,BQe=Dn,xF=Lv,MQe=UX,LQe=PQe.PROPER,v1=MQe.BUGGY_SAFARI_ITERATORS,Pk=BQe("iterator"),EF="keys",g1="values",SF="entries",FQe=function(){return this},W4=function(e,r,t,n,i,s,o){NQe(t,r,n);var a=function(_){if(_===i&&p)return p;if(!v1&&_ in h)return h[_];switch(_){case EF:return function(){return new t(this,_)};case g1:return function(){return new t(this,_)};case SF:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,c=h[Pk]||h["@@iterator"]||i&&h[i],p=!v1&&c||a(i),m=r=="Array"&&h.entries||c,w,b,T;if(m&&(w=RQe(m.call(new e)),w!==Object.prototype&&w.next&&(DQe(w,l,!0,!0),xF[l]=FQe)),LQe&&i==g1&&c&&c.name!==g1&&(u=!0,p=function(){return CQe(c,this)}),i)if(b={values:a(g1),keys:s?p:a(EF),entries:a(SF)},o)for(T in b)(v1||u||!(T in h))&&_F(h,T,b[T]);else OQe({target:r,proto:!0,forced:v1||u},b);return o&&h[Pk]!==p&&_F(h,Pk,p,{name:i}),xF[r]=p,b},K4=function(e,r){return{value:e,done:r}},jQe=cJe.charAt,HQe=ml,WX=Wh,zQe=W4,kF=K4,KX="String Iterator",UQe=WX.set,WQe=WX.getterFor(KX);zQe(String,"String",function(e){UQe(this,{type:KX,string:HQe(e),index:0})},function(){var r=WQe(this),t=r.string,n=r.index,i;return n>=t.length?kF(void 0,!0):(i=jQe(t,n),r.index+=i.length,kF(i,!1))});var KQe=oo,TF=lo,qQe=B4,qX=function(e,r,t){var n,i;TF(e);try{if(n=qQe(e,"return"),!n){if(r==="throw")throw t;return t}n=KQe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return TF(n),t},VQe=lo,GQe=qX,YQe=function(e,r,t,n){try{return n?r(VQe(t)[0],t[1]):r(t)}catch(i){GQe(e,"throw",i)}},ZQe=Dn,XQe=Lv,JQe=ZQe("iterator"),QQe=Array.prototype,VX=function(e){return e!==void 0&&(XQe.Array===e||QQe[JQe]===e)},eet=Ir,tet=bi,o5=M4,ret=eet(Function.toString);tet(o5.inspectSource)||(o5.inspectSource=function(e){return ret(e)});var net=o5.inspectSource,iet=Ir,set=Tr,GX=bi,oet=Uh,aet=qo,uet=net,YX=function(){},cet=[],ZX=aet("Reflect","construct"),q4=/^\s*(?:class|function)\b/,fet=iet(q4.exec),het=!q4.exec(YX),Ig=function(r){if(!GX(r))return!1;try{return ZX(YX,cet,r),!0}catch{return!1}},XX=function(r){if(!GX(r))return!1;switch(oet(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return het||!!fet(q4,uet(r))}catch{return!0}};XX.sham=!0;var _x=!ZX||set(function(){var e;return Ig(Ig.call)||!Ig(Object)||!Ig(function(){e=!0})||e})?XX:Ig,det=gx,pet=Vo,vet=Qm,Fv=function(e,r,t){var n=det(r);n in e?pet.f(e,n,vet(0,t)):e[n]=t},get=Uh,IF=B4,yet=e0,met=Lv,bet=Dn,wet=bet("iterator"),xx=function(e){if(!yet(e))return IF(e,wet)||IF(e,"@@iterator")||met[get(e)]},$et=oo,_et=zh,xet=lo,Eet=Rv,ket=xx,Tet=TypeError,JX=function(e,r){var t=arguments.length<2?ket(e):r;if(_et(t))return xet($et(t,e));throw Tet(Eet(e)+" is not iterable")},Iet=o0,Aet=oo,Oet=ao,Cet=YQe,Pet=VX,Net=_x,Ret=Oa,AF=Fv,Det=JX,Bet=xx,OF=Array,Met=function(r){var t=Oet(r),n=Net(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=Iet(s,i>2?arguments[2]:void 0));var a=Bet(t),l=0,u,h,c,p,m,w;if(a&&!(this===OF&&Pet(a)))for(p=Det(t,a),m=p.next,h=n?new this:[];!(c=Aet(m,p)).done;l++)w=o?Cet(p,s,[c.value,l],!0):c.value,AF(h,l,w);else for(u=Ret(t),h=n?new this(u):OF(u);u>l;l++)w=o?s(t[l],l):t[l],AF(h,l,w);return h.length=l,h},Let=Dn,QX=Let("iterator"),eJ=!1;try{var Fet=0,CF={next:function(){return{done:!!Fet++}},return:function(){eJ=!0}};CF[QX]=function(){return this},Array.from(CF,function(){throw 2})}catch{}var jet=function(e,r){if(!r&&!eJ)return!1;var t=!1;try{var n={};n[QX]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},Het=jt,zet=Met,Uet=jet,Wet=!Uet(function(e){Array.from(e)});Het({target:"Array",stat:!0,forced:Wet},{from:zet});var Ket=_r,qet=Ket.Array.from,Vet=qet,tJ=Vet;(function(e){e.exports=tJ})(VXe);var Kh=Pt(QO),a5={},Get={get exports(){return a5},set exports(e){a5=e}},l5={},Yet={get exports(){return l5},set exports(e){l5=e}},Zet=Aa,PF=Lv,rJ=Wh;Vo.f;var Xet=W4,y1=K4,nJ="Array Iterator",Jet=rJ.set,Qet=rJ.getterFor(nJ);Xet(Array,"Array",function(e,r){Jet(this,{type:nJ,target:Zet(e),index:0,kind:r})},function(){var e=Qet(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,y1(void 0,!0)):t=="keys"?y1(n,!1):t=="values"?y1(r[n],!1):y1([n,r[n]],!1)},"values");PF.Arguments=PF.Array;var ett=xx,ttt=ett,rtt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ntt=rtt,itt=Gn,stt=Uh,ott=Dv,NF=Lv,att=Dn,RF=att("toStringTag");for(var Nk in ntt){var DF=itt[Nk],Rk=DF&&DF.prototype;Rk&&stt(Rk)!==RF&&ott(Rk,RF,Nk),NF[Nk]=NF.Array}var ltt=ttt,utt=ltt,ctt=utt,ftt=ctt,htt=ftt,dtt=htt;(function(e){e.exports=dtt})(Yet);(function(e){e.exports=l5})(Get);var xu=Pt(a5),u5={},ptt={get exports(){return u5},set exports(e){u5=e}},h0={},vtt=SX,gtt=F4,ytt=gtt.concat("length","prototype");h0.f=Object.getOwnPropertyNames||function(r){return vtt(r,ytt)};var Ex={},BF=a0,mtt=Oa,btt=Fv,wtt=Array,$tt=Math.max,iJ=function(e,r,t){for(var n=mtt(e),i=BF(r,n),s=BF(t===void 0?n:t,n),o=wtt($tt(s-i,0)),a=0;i<s;i++,a++)btt(o,a,e[i]);return o.length=a,o},_tt=_u,xtt=Aa,sJ=h0.f,Ett=iJ,oJ=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Stt=function(e){try{return sJ(e)}catch{return Ett(oJ)}};Ex.f=function(r){return oJ&&_tt(r)=="Window"?Stt(r):sJ(xtt(r))};var ktt=Vo,V4=function(e,r,t){return ktt.f(e,r,t)},d0={},Ttt=Dn;d0.f=Ttt;var MF=_r,Itt=$i,Att=d0,Ott=Vo.f,$n=function(e){var r=MF.Symbol||(MF.Symbol={});Itt(r,e)||Ott(r,e,{value:Att.f(e)})},Ctt=oo,Ptt=qo,Ntt=Dn,Rtt=f0,aJ=function(){var e=Ptt("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=Ntt("toPrimitive");r&&!r[n]&&Rtt(r,n,function(i){return Ctt(t,this)},{arity:1})},Dtt=_u,qh=Array.isArray||function(r){return Dtt(r)=="Array"},LF=qh,Btt=_x,Mtt=wi,Ltt=Dn,Ftt=Ltt("species"),FF=Array,jtt=function(e){var r;return LF(e)&&(r=e.constructor,Btt(r)&&(r===FF||LF(r.prototype))?r=void 0:Mtt(r)&&(r=r[Ftt],r===null&&(r=void 0))),r===void 0?FF:r},Htt=jtt,G4=function(e,r){return new(Htt(e))(r===0?0:r)},ztt=o0,Utt=Ir,Wtt=px,Ktt=ao,qtt=Oa,Vtt=G4,jF=Utt([].push),tc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,h,c){for(var p=Ktt(l),m=Wtt(p),w=ztt(u,h),b=qtt(m),T=0,_=c||Vtt,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in m)&&(x=m[T],I=w(x,T,p),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:jF(A,x)}else switch(e){case 4:return!1;case 7:jF(A,x)}return s?-1:n||i?i:A}},Zc={forEach:tc(0),map:tc(1),filter:tc(2),some:tc(3),every:tc(4),find:tc(5),findIndex:tc(6),filterReject:tc(7)},Sx=jt,Y4=Gn,Z4=oo,Gtt=Ir,Yp=ii,Zp=Nv,Ytt=Tr,hi=$i,Ztt=Rn,c5=lo,kx=Aa,X4=gx,Xtt=ml,f5=Qm,Yy=Bv,lJ=u0,Jtt=h0,uJ=Ex,Qtt=c0,cJ=Pv,fJ=Vo,ert=wx,hJ=Jm,HF=f0,trt=V4,J4=Lc,rrt=bx,dJ=l0,zF=vx,nrt=Dn,irt=d0,srt=$n,ort=aJ,art=Mv,pJ=Wh,Tx=Zc.forEach,Ts=rrt("hidden"),Ix="Symbol",Zy="prototype",lrt=pJ.set,UF=pJ.getterFor(Ix),ga=Object[Zy],ch=Y4.Symbol,Ug=ch&&ch[Zy],urt=Y4.TypeError,Dk=Y4.QObject,vJ=cJ.f,Lf=fJ.f,gJ=uJ.f,crt=hJ.f,yJ=Gtt([].push),du=J4("symbols"),p0=J4("op-symbols"),frt=J4("wks"),h5=!Dk||!Dk[Zy]||!Dk[Zy].findChild,d5=Yp&&Ytt(function(){return Yy(Lf({},"a",{get:function(){return Lf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=vJ(ga,r);n&&delete ga[r],Lf(e,r,t),n&&e!==ga&&Lf(ga,r,n)}:Lf,Bk=function(e,r){var t=du[e]=Yy(Ug);return lrt(t,{type:Ix,tag:e,description:r}),Yp||(t.description=r),t},Ax=function(r,t,n){r===ga&&Ax(p0,t,n),c5(r);var i=X4(t);return c5(n),hi(du,i)?(n.enumerable?(hi(r,Ts)&&r[Ts][i]&&(r[Ts][i]=!1),n=Yy(n,{enumerable:f5(0,!1)})):(hi(r,Ts)||Lf(r,Ts,f5(1,{})),r[Ts][i]=!0),d5(r,i,n)):Lf(r,i,n)},Q4=function(r,t){c5(r);var n=kx(t),i=lJ(n).concat($J(n));return Tx(i,function(s){(!Yp||Z4(mJ,n,s))&&Ax(r,s,n[s])}),r},hrt=function(r,t){return t===void 0?Yy(r):Q4(Yy(r),t)},mJ=function(r){var t=X4(r),n=Z4(crt,this,t);return this===ga&&hi(du,t)&&!hi(p0,t)?!1:n||!hi(this,t)||!hi(du,t)||hi(this,Ts)&&this[Ts][t]?n:!0},bJ=function(r,t){var n=kx(r),i=X4(t);if(!(n===ga&&hi(du,i)&&!hi(p0,i))){var s=vJ(n,i);return s&&hi(du,i)&&!(hi(n,Ts)&&n[Ts][i])&&(s.enumerable=!0),s}},wJ=function(r){var t=gJ(kx(r)),n=[];return Tx(t,function(i){!hi(du,i)&&!hi(dJ,i)&&yJ(n,i)}),n},$J=function(e){var r=e===ga,t=gJ(r?p0:kx(e)),n=[];return Tx(t,function(i){hi(du,i)&&(!r||hi(ga,i))&&yJ(n,du[i])}),n};Zp||(ch=function(){if(Ztt(Ug,this))throw urt("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:Xtt(arguments[0]),t=zF(r),n=function(i){this===ga&&Z4(n,p0,i),hi(this,Ts)&&hi(this[Ts],t)&&(this[Ts][t]=!1),d5(this,t,f5(1,i))};return Yp&&h5&&d5(ga,t,{configurable:!0,set:n}),Bk(t,r)},Ug=ch[Zy],HF(Ug,"toString",function(){return UF(this).tag}),HF(ch,"withoutSetter",function(e){return Bk(zF(e),e)}),hJ.f=mJ,fJ.f=Ax,ert.f=Q4,cJ.f=bJ,Jtt.f=uJ.f=wJ,Qtt.f=$J,irt.f=function(e){return Bk(nrt(e),e)},Yp&&trt(Ug,"description",{configurable:!0,get:function(){return UF(this).description}}));Sx({global:!0,constructor:!0,wrap:!0,forced:!Zp,sham:!Zp},{Symbol:ch});Tx(lJ(frt),function(e){srt(e)});Sx({target:Ix,stat:!0,forced:!Zp},{useSetter:function(){h5=!0},useSimple:function(){h5=!1}});Sx({target:"Object",stat:!0,forced:!Zp,sham:!Yp},{create:hrt,defineProperty:Ax,defineProperties:Q4,getOwnPropertyDescriptor:bJ});Sx({target:"Object",stat:!0,forced:!Zp},{getOwnPropertyNames:wJ});ort();art(ch,Ix);dJ[Ts]=!0;var drt=Nv,_J=drt&&!!Symbol.for&&!!Symbol.keyFor,prt=jt,vrt=qo,grt=$i,yrt=ml,xJ=Lc,mrt=_J,Mk=xJ("string-to-symbol-registry"),brt=xJ("symbol-to-string-registry");prt({target:"Symbol",stat:!0,forced:!mrt},{for:function(e){var r=yrt(e);if(grt(Mk,r))return Mk[r];var t=vrt("Symbol")(r);return Mk[r]=t,brt[t]=r,t}});var wrt=jt,$rt=$i,_rt=i0,xrt=Rv,Ert=Lc,Srt=_J,WF=Ert("symbol-to-string-registry");wrt({target:"Symbol",stat:!0,forced:!Srt},{keyFor:function(r){if(!_rt(r))throw TypeError(xrt(r)+" is not a symbol");if($rt(WF,r))return WF[r]}});var krt=Ir,KF=qh,Trt=bi,qF=_u,Irt=ml,VF=krt([].push),Art=function(e){if(Trt(e))return e;if(KF(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?VF(t,i):(typeof i=="number"||qF(i)=="Number"||qF(i)=="String")&&VF(t,Irt(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(KF(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},Ort=jt,EJ=qo,SJ=Xm,Crt=oo,v0=Ir,kJ=Tr,GF=bi,YF=i0,TJ=mx,Prt=Art,Nrt=Nv,Rrt=String,Sc=EJ("JSON","stringify"),m1=v0(/./.exec),ZF=v0("".charAt),Drt=v0("".charCodeAt),Brt=v0("".replace),Mrt=v0(1 .toString),Lrt=/[\uD800-\uDFFF]/g,XF=/^[\uD800-\uDBFF]$/,JF=/^[\uDC00-\uDFFF]$/,QF=!Nrt||kJ(function(){var e=EJ("Symbol")();return Sc([e])!="[null]"||Sc({a:e})!="{}"||Sc(Object(e))!="{}"}),e9=kJ(function(){return Sc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Sc("\uDEAD")!=='"\\udead"'}),Frt=function(e,r){var t=TJ(arguments),n=Prt(r);if(!(!GF(n)&&(e===void 0||YF(e))))return t[1]=function(i,s){if(GF(n)&&(s=Crt(n,this,Rrt(i),s)),!YF(s))return s},SJ(Sc,null,t)},jrt=function(e,r,t){var n=ZF(t,r-1),i=ZF(t,r+1);return m1(XF,e)&&!m1(JF,i)||m1(JF,e)&&!m1(XF,n)?"\\u"+Mrt(Drt(e,0),16):e};Sc&&Ort({target:"JSON",stat:!0,arity:3,forced:QF||e9},{stringify:function(r,t,n){var i=TJ(arguments),s=SJ(QF?Frt:Sc,null,i);return e9&&typeof s=="string"?Brt(s,Lrt,jrt):s}});var Hrt=jt,zrt=Nv,Urt=Tr,IJ=c0,Wrt=ao,Krt=!zrt||Urt(function(){IJ.f(1)});Hrt({target:"Object",stat:!0,forced:Krt},{getOwnPropertySymbols:function(r){var t=IJ.f;return t?t(Wrt(r)):[]}});var qrt=_r,Vrt=qrt.Object.getOwnPropertySymbols,Grt=Vrt,Yrt=Grt;(function(e){e.exports=Yrt})(ptt);var Fc=Pt(u5),p5={},Zrt={get exports(){return p5},set exports(e){p5=e}},v5={},Xrt={get exports(){return v5},set exports(e){v5=e}},Jrt=jt,Qrt=Tr,ent=Aa,AJ=Pv.f,OJ=ii,tnt=!OJ||Qrt(function(){AJ(1)});Jrt({target:"Object",stat:!0,forced:tnt,sham:!OJ},{getOwnPropertyDescriptor:function(r,t){return AJ(ent(r),t)}});var rnt=_r,CJ=rnt.Object,nnt=Xrt.exports=function(r,t){return CJ.getOwnPropertyDescriptor(r,t)};CJ.getOwnPropertyDescriptor.sham&&(nnt.sham=!0);var int=v5,PJ=int;(function(e){e.exports=PJ})(Zrt);var Xc=Pt(p5),g5={},snt={get exports(){return g5},set exports(e){g5=e}},ont=qo,ant=Ir,lnt=h0,unt=c0,cnt=lo,fnt=ant([].concat),NJ=ont("Reflect","ownKeys")||function(r){var t=lnt.f(cnt(r)),n=unt.f;return n?fnt(t,n(r)):t},hnt=jt,dnt=ii,pnt=NJ,vnt=Aa,gnt=Pv,ynt=Fv;hnt({target:"Object",stat:!0,sham:!dnt},{getOwnPropertyDescriptors:function(r){for(var t=vnt(r),n=gnt.f,i=pnt(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&ynt(s,a,l);return s}});var mnt=_r,bnt=mnt.Object.getOwnPropertyDescriptors,wnt=bnt,$nt=wnt;(function(e){e.exports=$nt})(snt);var jc=Pt(g5),y5={},_nt={get exports(){return y5},set exports(e){y5=e}},m5={},xnt={get exports(){return m5},set exports(e){m5=e}},Ent=jt,Snt=ii,t9=wx.f;Ent({target:"Object",stat:!0,forced:Object.defineProperties!==t9,sham:!Snt},{defineProperties:t9});var knt=_r,RJ=knt.Object,Tnt=xnt.exports=function(r,t){return RJ.defineProperties(r,t)};RJ.defineProperties.sham&&(Tnt.sham=!0);var Int=m5,Ant=Int;(function(e){e.exports=Ant})(_nt);var Ox=Pt(y5),b5={},Ont={get exports(){return b5},set exports(e){b5=e}},w5={},Cnt={get exports(){return w5},set exports(e){w5=e}},Pnt=jt,Nnt=ii,r9=Vo.f;Pnt({target:"Object",stat:!0,forced:Object.defineProperty!==r9,sham:!Nnt},{defineProperty:r9});var Rnt=_r,DJ=Rnt.Object,Dnt=Cnt.exports=function(r,t,n){return DJ.defineProperty(r,t,n)};DJ.defineProperty.sham&&(Dnt.sham=!0);var Bnt=w5,BJ=Bnt;(function(e){e.exports=BJ})(Ont);var Cx=Pt(b5);function ht(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var $5={},Mnt={get exports(){return $5},set exports(e){$5=e}},_5={},Lnt={get exports(){return _5},set exports(e){_5=e}},Fnt=BJ,jnt=Fnt,Hnt=jnt,znt=Hnt;(function(e){e.exports=znt})(Lnt);(function(e){e.exports=_5})(Mnt);var Px=Pt($5),x5={},Unt={get exports(){return x5},set exports(e){x5=e}},E5={},Wnt={get exports(){return E5},set exports(e){E5=e}},Knt=TypeError,qnt=9007199254740991,MJ=function(e){if(e>qnt)throw Knt("Maximum allowed index exceeded");return e},Vnt=Tr,Gnt=Dn,Ynt=n0,Znt=Gnt("species"),g0=function(e){return Ynt>=51||!Vnt(function(){var r=[],t=r.constructor={};return t[Znt]=function(){return{foo:1}},r[e](Boolean).foo!==1})},Xnt=jt,Jnt=Tr,Qnt=qh,eit=wi,tit=ao,rit=Oa,n9=MJ,i9=Fv,nit=G4,iit=g0,sit=Dn,oit=n0,LJ=sit("isConcatSpreadable"),ait=oit>=51||!Jnt(function(){var e=[];return e[LJ]=!1,e.concat()[0]!==e}),lit=function(e){if(!eit(e))return!1;var r=e[LJ];return r!==void 0?!!r:Qnt(e)},uit=!ait||!iit("concat");Xnt({target:"Array",proto:!0,arity:1,forced:uit},{concat:function(r){var t=tit(this),n=nit(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],lit(u))for(l=rit(u),n9(i+l),o=0;o<l;o++,i++)o in u&&i9(n,i,u[o]);else n9(i+1),i9(n,i++,u);return n.length=i,n}});var cit=$n;cit("asyncIterator");var fit=$n;fit("hasInstance");var hit=$n;hit("isConcatSpreadable");var dit=$n;dit("iterator");var pit=$n;pit("match");var vit=$n;vit("matchAll");var git=$n;git("replace");var yit=$n;yit("search");var mit=$n;mit("species");var bit=$n;bit("split");var wit=$n,$it=aJ;wit("toPrimitive");$it();var _it=qo,xit=$n,Eit=Mv;xit("toStringTag");Eit(_it("Symbol"),"Symbol");var Sit=$n;Sit("unscopables");var kit=Gn,Tit=Mv;Tit(kit.JSON,"JSON",!0);var Iit=_r,Ait=Iit.Symbol,Oit=Ait,FJ=Oit,Cit=$n;Cit("dispose");var Pit=FJ,Nit=Pit,Rit=$n;Rit("asyncDispose");var Dit=jt,Bit=qo,Mit=Ir,jJ=Bit("Symbol"),Lit=jJ.keyFor,Fit=Mit(jJ.prototype.valueOf);Dit({target:"Symbol",stat:!0},{isRegistered:function(r){try{return Lit(Fit(r))!==void 0}catch{return!1}}});var jit=jt,Hit=Lc,HJ=qo,zit=Ir,Uit=i0,Wit=Dn,S$=HJ("Symbol"),s9=S$.isWellKnown,zJ=HJ("Object","getOwnPropertyNames"),Kit=zit(S$.prototype.valueOf),o9=Hit("wks");for(var Lk=0,a9=zJ(S$),qit=a9.length;Lk<qit;Lk++)try{var l9=a9[Lk];Uit(S$[l9])&&Wit(l9)}catch{}jit({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(s9&&s9(r))return!0;try{for(var t=Kit(r),n=0,i=zJ(o9),s=i.length;n<s;n++)if(o9[i[n]]==t)return!0}catch{}return!1}});var Vit=$n;Vit("matcher");var Git=$n;Git("metadataKey");var Yit=$n;Yit("observable");var Zit=$n;Zit("metadata");var Xit=$n;Xit("patternMatch");var Jit=$n;Jit("replaceAll");var Qit=Nit,est=Qit;(function(e){e.exports=est})(Wnt);(function(e){e.exports=E5})(Unt);var np=Pt(x5),S5={},tst={get exports(){return S5},set exports(e){S5=e}},k5={},rst={get exports(){return k5},set exports(e){k5=e}},nst=d0,ist=nst.f("iterator"),sst=ist,ost=sst,ast=ost,lst=ast,ust=lst,cst=ust;(function(e){e.exports=cst})(rst);(function(e){e.exports=k5})(tst);var fst=Pt(S5);function Br(e){"@babel/helpers - typeof";return Br=typeof np=="function"&&typeof fst=="symbol"?function(r){return typeof r}:function(r){return r&&typeof np=="function"&&r.constructor===np&&r!==np.prototype?"symbol":typeof r},Br(e)}var T5={},hst={get exports(){return T5},set exports(e){T5=e}},I5={},dst={get exports(){return I5},set exports(e){I5=e}},pst=d0,vst=pst.f("toPrimitive"),gst=vst,yst=gst,mst=yst,bst=mst,wst=bst,$st=wst;(function(e){e.exports=$st})(dst);(function(e){e.exports=I5})(hst);var _st=Pt(T5);function xst(e,r){if(Br(e)!=="object"||e===null)return e;var t=e[_st];if(t!==void 0){var n=t.call(e,r||"default");if(Br(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function UJ(e){var r=xst(e,"string");return Br(r)==="symbol"?r:String(r)}function u9(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Px(e,UJ(n.key),n)}}function dt(e,r,t){return r&&u9(e.prototype,r),t&&u9(e,t),Px(e,"prototype",{writable:!1}),e}function Nx(e,r,t){return r=UJ(r),r in e?Px(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var A5={},Est={get exports(){return A5},set exports(e){A5=e}},O5={},Sst={get exports(){return O5},set exports(e){O5=e}},kst=jt,Tst=qh;kst({target:"Array",stat:!0},{isArray:Tst});var Ist=_r,Ast=Ist.Array.isArray,Ost=Ast,WJ=Ost,Cst=WJ,Pst=Cst,Nst=Pst,Rst=Nst;(function(e){e.exports=Rst})(Sst);(function(e){e.exports=O5})(Est);var KJ=Pt(A5);function Dst(e){if(KJ(e))return e}function Bst(e,r){var t=e==null?null:typeof np<"u"&&xu(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var C5={},Mst={get exports(){return C5},set exports(e){C5=e}},P5={},Lst={get exports(){return P5},set exports(e){P5=e}},Fst=jt,c9=qh,jst=_x,Hst=wi,f9=a0,zst=Oa,Ust=Aa,Wst=Fv,Kst=Dn,qst=g0,Vst=mx,Gst=qst("slice"),Yst=Kst("species"),Fk=Array,Zst=Math.max;Fst({target:"Array",proto:!0,forced:!Gst},{slice:function(r,t){var n=Ust(this),i=zst(n),s=f9(r,i),o=f9(t===void 0?i:t,i),a,l,u;if(c9(n)&&(a=n.constructor,jst(a)&&(a===Fk||c9(a.prototype))?a=void 0:Hst(a)&&(a=a[Yst],a===null&&(a=void 0)),a===Fk||a===void 0))return Vst(n,s,o);for(l=new(a===void 0?Fk:a)(Zst(o-s,0)),u=0;s<o;s++,u++)s in n&&Wst(l,u,n[s]);return l.length=u,l}});var Xst=_i,Jst=Xst("Array").slice,Qst=Rn,eot=Jst,jk=Array.prototype,tot=function(e){var r=e.slice;return e===jk||Qst(jk,e)&&r===jk.slice?eot:r},rot=tot,qJ=rot,not=qJ,iot=not,sot=iot,oot=sot;(function(e){e.exports=oot})(Lst);(function(e){e.exports=P5})(Mst);var aot=Pt(C5),N5={},lot={get exports(){return N5},set exports(e){N5=e}},R5={},uot={get exports(){return R5},set exports(e){R5=e}},cot=tJ,fot=cot,hot=fot,dot=hot;(function(e){e.exports=dot})(uot);(function(e){e.exports=R5})(lot);var VJ=Pt(N5);function D5(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function GJ(e,r){var t;if(e){if(typeof e=="string")return D5(e,r);var n=aot(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return VJ(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D5(e,r)}}function pot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yn(e,r){return Dst(e)||Bst(e,r)||GJ(e,r)||pot()}function vot(e){if(KJ(e))return D5(e)}function got(e){if(typeof np<"u"&&xu(e)!=null||e["@@iterator"]!=null)return VJ(e)}function yot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tl(e){return vot(e)||got(e)||GJ(e)||yot()}var B5={},mot={get exports(){return B5},set exports(e){B5=e}};(function(e){e.exports=FJ})(mot);var Jc=Pt(B5),M5={},bot={get exports(){return M5},set exports(e){M5=e}},wot=_i,$ot=wot("Array").concat,_ot=Rn,xot=$ot,Hk=Array.prototype,Eot=function(e){var r=e.concat;return e===Hk||_ot(Hk,e)&&r===Hk.concat?xot:r},Sot=Eot,kot=Sot;(function(e){e.exports=kot})(bot);var eN=Pt(M5),L5={},Tot={get exports(){return L5},set exports(e){L5=e}};(function(e){e.exports=qJ})(Tot);var Oi=Pt(L5),h9={},Iot={get exports(){return h9},set exports(e){h9=e}},Aot=jt,Oot=NJ;Aot({target:"Reflect",stat:!0},{ownKeys:Oot});var Cot=_r,Pot=Cot.Reflect.ownKeys,Not=Pot,Rot=Not;(function(e){e.exports=Rot})(Iot);var F5={},Dot={get exports(){return F5},set exports(e){F5=e}};(function(e){e.exports=WJ})(Dot);var Fr=Pt(F5),j5={},Bot={get exports(){return j5},set exports(e){j5=e}},Mot=jt,Lot=Zc.map,Fot=g0,jot=Fot("map");Mot({target:"Array",proto:!0,forced:!jot},{map:function(r){return Lot(this,r,arguments.length>1?arguments[1]:void 0)}});var Hot=_i,zot=Hot("Array").map,Uot=Rn,Wot=zot,zk=Array.prototype,Kot=function(e){var r=e.map;return e===zk||Uot(zk,e)&&r===zk.map?Wot:r},qot=Kot,Vot=qot;(function(e){e.exports=Vot})(Bot);var Xp=Pt(j5),H5={},Got={get exports(){return H5},set exports(e){H5=e}},Yot=jt,Zot=ao,YJ=u0,Xot=Tr,Jot=Xot(function(){YJ(1)});Yot({target:"Object",stat:!0,forced:Jot},{keys:function(r){return YJ(Zot(r))}});var Qot=_r,eat=Qot.Object.keys,tat=eat,rat=tat;(function(e){e.exports=rat})(Got);var gn=Pt(H5),z5={},nat={get exports(){return z5},set exports(e){z5=e}},iat=jt,sat=Ir,ZJ=Date,oat=sat(ZJ.prototype.getTime);iat({target:"Date",stat:!0},{now:function(){return oat(new ZJ)}});var aat=_r,lat=aat.Date.now,uat=lat,cat=uat;(function(e){e.exports=cat})(nat);var k$=Pt(z5),U5={},fat={get exports(){return U5},set exports(e){U5=e}},hat=Tr,jv=function(e,r){var t=[][e];return!!t&&hat(function(){t.call(null,r||function(){return 1},1)})},dat=Zc.forEach,pat=jv,vat=pat("forEach"),gat=vat?[].forEach:function(r){return dat(this,r,arguments.length>1?arguments[1]:void 0)},yat=jt,d9=gat;yat({target:"Array",proto:!0,forced:[].forEach!=d9},{forEach:d9});var mat=_i,bat=mat("Array").forEach,wat=bat,$at=wat,_at=Uh,xat=$i,Eat=Rn,Sat=$at,Uk=Array.prototype,kat={DOMTokenList:!0,NodeList:!0},Tat=function(e){var r=e.forEach;return e===Uk||Eat(Uk,e)&&r===Uk.forEach||xat(kat,_at(e))?Sat:r};(function(e){e.exports=Tat})(fat);var Wr=Pt(U5),W5={},Iat={get exports(){return W5},set exports(e){W5=e}},Aat=jt,Oat=Ir,Cat=qh,Pat=Oat([].reverse),p9=[1,2];Aat({target:"Array",proto:!0,forced:String(p9)===String(p9.reverse())},{reverse:function(){return Cat(this)&&(this.length=this.length),Pat(this)}});var Nat=_i,Rat=Nat("Array").reverse,Dat=Rn,Bat=Rat,Wk=Array.prototype,Mat=function(e){var r=e.reverse;return e===Wk||Dat(Wk,e)&&r===Wk.reverse?Bat:r},Lat=Mat,Fat=Lat;(function(e){e.exports=Fat})(Iat);var fh=Pt(W5),K5={},jat={get exports(){return K5},set exports(e){K5=e}},Hat=ii,zat=qh,Uat=TypeError,Wat=Object.getOwnPropertyDescriptor,Kat=Hat&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),qat=Kat?function(e,r){if(zat(e)&&!Wat(e,"length").writable)throw Uat("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},v9=Rv,Vat=TypeError,XJ=function(e,r){if(!delete e[r])throw Vat("Cannot delete property "+v9(r)+" of "+v9(e))},Gat=jt,Yat=ao,Zat=a0,Xat=yx,Jat=Oa,Qat=qat,elt=MJ,tlt=G4,rlt=Fv,Kk=XJ,nlt=g0,ilt=nlt("splice"),slt=Math.max,olt=Math.min;Gat({target:"Array",proto:!0,forced:!ilt},{splice:function(r,t){var n=Yat(this),i=Jat(n),s=Zat(r,i),o=arguments.length,a,l,u,h,c,p;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=olt(slt(Xat(t),0),i-s)),elt(i+a-l),u=tlt(n,l),h=0;h<l;h++)c=s+h,c in n&&rlt(u,h,n[c]);if(u.length=l,a<l){for(h=s;h<i-l;h++)c=h+l,p=h+a,c in n?n[p]=n[c]:Kk(n,p);for(h=i;h>i-l+a;h--)Kk(n,h-1)}else if(a>l)for(h=i-l;h>s;h--)c=h+l-1,p=h+a-1,c in n?n[p]=n[c]:Kk(n,p);for(h=0;h<a;h++)n[h+s]=arguments[h+2];return Qat(n,i-l+a),u}});var alt=_i,llt=alt("Array").splice,ult=Rn,clt=llt,qk=Array.prototype,flt=function(e){var r=e.splice;return e===qk||ult(qk,e)&&r===qk.splice?clt:r},hlt=flt,dlt=hlt;(function(e){e.exports=dlt})(jat);var nu=Pt(K5),q5={},plt={get exports(){return q5},set exports(e){q5=e}},vlt=jt,glt=L4.includes,ylt=Tr,mlt=ylt(function(){return!Array(1).includes()});vlt({target:"Array",proto:!0,forced:mlt},{includes:function(r){return glt(this,r,arguments.length>1?arguments[1]:void 0)}});var blt=_i,wlt=blt("Array").includes,$lt=wi,_lt=_u,xlt=Dn,Elt=xlt("match"),Slt=function(e){var r;return $lt(e)&&((r=e[Elt])!==void 0?!!r:_lt(e)=="RegExp")},klt=Slt,Tlt=TypeError,Ilt=function(e){if(klt(e))throw Tlt("The method doesn't accept regular expressions");return e},Alt=Dn,Olt=Alt("match"),Clt=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[Olt]=!1,"/./"[e](r)}catch{}}return!1},Plt=jt,Nlt=Ir,Rlt=Ilt,Dlt=t0,g9=ml,Blt=Clt,Mlt=Nlt("".indexOf);Plt({target:"String",proto:!0,forced:!Blt("includes")},{includes:function(r){return!!~Mlt(g9(Dlt(this)),g9(Rlt(r)),arguments.length>1?arguments[1]:void 0)}});var Llt=_i,Flt=Llt("String").includes,y9=Rn,jlt=wlt,Hlt=Flt,Vk=Array.prototype,Gk=String.prototype,zlt=function(e){var r=e.includes;return e===Vk||y9(Vk,e)&&r===Vk.includes?jlt:typeof e=="string"||e===Gk||y9(Gk,e)&&r===Gk.includes?Hlt:r},Ult=zlt,Wlt=Ult;(function(e){e.exports=Wlt})(plt);var ll=Pt(q5),V5={},Klt={get exports(){return V5},set exports(e){V5=e}},qlt=jt,Vlt=Tr,Glt=ao,JJ=$x,Ylt=HX,Zlt=Vlt(function(){JJ(1)});qlt({target:"Object",stat:!0,forced:Zlt,sham:!Ylt},{getPrototypeOf:function(r){return JJ(Glt(r))}});var Xlt=_r,Jlt=Xlt.Object.getPrototypeOf,Qlt=Jlt,QJ=Qlt;(function(e){e.exports=QJ})(Klt);var m9=Pt(V5),G5={},eut={get exports(){return G5},set exports(e){G5=e}},tut=jt,rut=Zc.filter,nut=g0,iut=nut("filter");tut({target:"Array",proto:!0,forced:!iut},{filter:function(r){return rut(this,r,arguments.length>1?arguments[1]:void 0)}});var sut=_i,out=sut("Array").filter,aut=Rn,lut=out,Yk=Array.prototype,uut=function(e){var r=e.filter;return e===Yk||aut(Yk,e)&&r===Yk.filter?lut:r},cut=uut,fut=cut;(function(e){e.exports=fut})(eut);var Is=Pt(G5),b9={},hut={get exports(){return b9},set exports(e){b9=e}},dut=ii,eQ=Ir,put=u0,vut=Aa,gut=Jm.f,yut=eQ(gut),mut=eQ([].push),w9=function(e){return function(r){for(var t=vut(r),n=put(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!dut||yut(t,a))&&mut(o,e?[a,t[a]]:t[a]);return o}},but={entries:w9(!0),values:w9(!1)},wut=jt,$ut=but.values;wut({target:"Object",stat:!0},{values:function(r){return $ut(r)}});var _ut=_r,xut=_ut.Object.values,Eut=xut,Sut=Eut;(function(e){e.exports=Sut})(hut);var Y5={},kut={get exports(){return Y5},set exports(e){Y5=e}},Rx=`	
\v\f\r \u2028\u2029\uFEFF`,Tut=Ir,Iut=t0,Aut=ml,Z5=Rx,$9=Tut("".replace),Out=RegExp("^["+Z5+"]+"),Cut=RegExp("(^|[^"+Z5+"])["+Z5+"]+$"),Zk=function(e){return function(r){var t=Aut(Iut(r));return e&1&&(t=$9(t,Out,"")),e&2&&(t=$9(t,Cut,"$1")),t}},tN={start:Zk(1),end:Zk(2),trim:Zk(3)},tQ=Gn,Put=Tr,Nut=Ir,Rut=ml,Dut=tN.trim,_9=Rx,ay=tQ.parseInt,x9=tQ.Symbol,E9=x9&&x9.iterator,rQ=/^[+-]?0x/i,But=Nut(rQ.exec),Mut=ay(_9+"08")!==8||ay(_9+"0x16")!==22||E9&&!Put(function(){ay(Object(E9))}),Lut=Mut?function(r,t){var n=Dut(Rut(r));return ay(n,t>>>0||(But(rQ,n)?16:10))}:ay,Fut=jt,S9=Lut;Fut({global:!0,forced:parseInt!=S9},{parseInt:S9});var jut=_r,Hut=jut.parseInt,zut=Hut,Uut=zut;(function(e){e.exports=Uut})(kut);var ca=Pt(Y5),X5={},Wut={get exports(){return X5},set exports(e){X5=e}},Kut=jt,qut=D4,Vut=L4.indexOf,Gut=jv,J5=qut([].indexOf),nQ=!!J5&&1/J5([1],1,-0)<0,Yut=nQ||!Gut("indexOf");Kut({target:"Array",proto:!0,forced:Yut},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return nQ?J5(this,r,t)||0:Vut(this,r,t)}});var Zut=_i,Xut=Zut("Array").indexOf,Jut=Rn,Qut=Xut,Xk=Array.prototype,ect=function(e){var r=e.indexOf;return e===Xk||Jut(Xk,e)&&r===Xk.indexOf?Qut:r},tct=ect,rct=tct;(function(e){e.exports=rct})(Wut);var Er=Pt(X5),k9={},nct={get exports(){return k9},set exports(e){k9=e}},ict=LX.PROPER,sct=Tr,T9=Rx,I9="",oct=function(e){return sct(function(){return!!T9[e]()||I9[e]()!==I9||ict&&T9[e].name!==e})},act=jt,lct=tN.trim,uct=oct;act({target:"String",proto:!0,forced:uct("trim")},{trim:function(){return lct(this)}});var cct=_i,fct=cct("String").trim,hct=Rn,dct=fct,Jk=String.prototype,pct=function(e){var r=e.trim;return typeof e=="string"||e===Jk||hct(Jk,e)&&r===Jk.trim?dct:r},vct=pct,gct=vct;(function(e){e.exports=gct})(nct);var Q5={},yct={get exports(){return Q5},set exports(e){Q5=e}},mct=jt,bct=ii,wct=Bv;mct({target:"Object",stat:!0,sham:!bct},{create:wct});var $ct=_r,_ct=$ct.Object,xct=function(r,t){return _ct.create(r,t)},Ect=xct,iQ=Ect;(function(e){e.exports=iQ})(yct);var hh=Pt(Q5),eC={},Sct={get exports(){return eC},set exports(e){eC=e}},tC=_r,kct=Xm;tC.JSON||(tC.JSON={stringify:JSON.stringify});var Tct=function(r,t,n){return kct(tC.JSON.stringify,null,arguments)},Ict=Tct,Act=Ict;(function(e){e.exports=Act})(Sct);var y0=Pt(eC),rC={},Oct={get exports(){return rC},set exports(e){rC=e}},Cct=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",Pct=TypeError,Nct=function(e,r){if(e<r)throw Pct("Not enough arguments");return e},sQ=Gn,Rct=Xm,Dct=bi,Bct=Cct,Mct=r0,Lct=mx,Fct=Nct,jct=sQ.Function,Hct=/MSIE .\./.test(Mct)||Bct&&function(){var e=sQ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),oQ=function(e,r){var t=r?2:1;return Hct?function(n,i){var s=Fct(arguments.length,1)>t,o=Dct(n)?n:jct(n),a=s?Lct(arguments,t):[],l=s?function(){Rct(o,this,a)}:o;return r?e(l,i):e(l)}:e},zct=jt,aQ=Gn,Uct=oQ,A9=Uct(aQ.setInterval,!0);zct({global:!0,bind:!0,forced:aQ.setInterval!==A9},{setInterval:A9});var Wct=jt,lQ=Gn,Kct=oQ,O9=Kct(lQ.setTimeout,!0);Wct({global:!0,bind:!0,forced:lQ.setTimeout!==O9},{setTimeout:O9});var qct=_r,Vct=qct.setTimeout;(function(e){e.exports=Vct})(Oct);var ul=Pt(rC),nC={},Gct={get exports(){return nC},set exports(e){nC=e}},Yct=ao,C9=a0,Zct=Oa,Xct=function(r){for(var t=Yct(this),n=Zct(t),i=arguments.length,s=C9(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:C9(o,n);a>s;)t[s++]=r;return t},Jct=jt,Qct=Xct;Jct({target:"Array",proto:!0},{fill:Qct});var eft=_i,tft=eft("Array").fill,rft=Rn,nft=tft,Qk=Array.prototype,ift=function(e){var r=e.fill;return e===Qk||rft(Qk,e)&&r===Qk.fill?nft:r},sft=ift,oft=sft;(function(e){e.exports=oft})(Gct);var m0=Pt(nC);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Sa(){return Sa=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Sa.apply(this,arguments)}function Go(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function b1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var iC;typeof Object.assign!="function"?iC=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:iC=Object.assign;var Ih=iC,P9=["","webkit","Moz","MS","ms","o"],aft=typeof document>"u"?{style:{}}:document.createElement("div"),lft="function",ip=Math.round,Ah=Math.abs,rN=Date.now;function Dx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<P9.length;){if(t=P9[s],n=t?t+i:r,n in e)return n;s++}}var iu;typeof window>"u"?iu={}:iu=window;var uQ=Dx(aft.style,"touchAction"),cQ=uQ!==void 0;function uft(){if(!cQ)return!1;var e={},r=iu.CSS&&iu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?iu.CSS.supports("touch-action",t):!0}),e}var fQ="compute",hQ="auto",sC="manipulation",dh="none",Xy="pan-x",Jy="pan-y",w1=uft(),cft=/mobile|tablet|ip(ad|hone|od)|android/i,dQ="ontouchstart"in iu,fft=Dx(iu,"PointerEvent")!==void 0,hft=dQ&&cft.test(navigator.userAgent),b0="touch",dft="pen",nN="mouse",pft="kinect",vft=25,cs=1,Vh=2,Wn=4,Rs=8,T$=1,w0=2,$0=4,_0=8,Jp=16,cl=w0|$0,ph=_0|Jp,pQ=cl|ph,vQ=["x","y"],I$=["clientX","clientY"];function su(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function Bx(e,r){return typeof e===lft?e.apply(r&&r[0]||void 0,r):e}function Yf(e,r){return e.indexOf(r)>-1}function gft(e){if(Yf(e,dh))return dh;var r=Yf(e,Xy),t=Yf(e,Jy);return r&&t?dh:r||t?r?Xy:Jy:Yf(e,sC)?sC:hQ}var gQ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===fQ&&(n=this.compute()),cQ&&this.manager.element.style&&w1[n]&&(this.manager.element.style[uQ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return su(this.manager.recognizers,function(i){Bx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),gft(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Yf(o,dh)&&!w1[dh],l=Yf(o,Jy)&&!w1[Jy],u=Yf(o,Xy)&&!w1[Xy];if(a){var h=n.pointers.length===1,c=n.distance<2,p=n.deltaTime<250;if(h&&c&&p)return}if(!(u&&l)&&(a||l&&s&cl||u&&s&ph))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function iN(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function yQ(e){var r=e.length;if(r===1)return{x:ip(e[0].clientX),y:ip(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:ip(t/r),y:ip(n/r)}}function N9(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:ip(e.pointers[t].clientX),clientY:ip(e.pointers[t].clientY)},t++;return{timeStamp:rN(),pointers:r,center:yQ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function A$(e,r,t){t||(t=vQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function oC(e,r,t){t||(t=vQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function mQ(e,r){return e===r?T$:Ah(e)>=Ah(r)?e<0?w0:$0:r<0?_0:Jp}function yft(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===cs||s.eventType===Wn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function bQ(e,r,t){return{x:r/e||0,y:t/e||0}}function mft(e,r){return A$(r[0],r[1],I$)/A$(e[0],e[1],I$)}function bft(e,r){return oC(r[1],r[0],I$)+oC(e[1],e[0],I$)}function wft(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Rs&&(n>vft||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=bQ(n,l,u);s=h.x,o=h.y,i=Ah(h.x)>Ah(h.y)?h.x:h.y,a=mQ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function $ft(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=N9(r)),i>1&&!t.firstMultiple?t.firstMultiple=N9(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=yQ(n);r.timeStamp=rN(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=oC(a,l),r.distance=A$(a,l),yft(t,r),r.offsetDirection=mQ(r.deltaX,r.deltaY);var u=bQ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Ah(u.x)>Ah(u.y)?u.x:u.y,r.scale=o?mft(o.pointers,n):1,r.rotation=o?bft(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,wft(t,r);var h=e.element,c=r.srcEvent,p;c.composedPath?p=c.composedPath()[0]:c.path?p=c.path[0]:p=c.target,iN(p,h)&&(h=p),r.target=h}function _ft(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&cs&&n-i===0,o=r&(Wn|Rs)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,$ft(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function Qy(e){return e.trim().split(/\s+/g)}function ly(e,r,t){su(Qy(r),function(n){e.addEventListener(n,t,!1)})}function uy(e,r,t){su(Qy(r),function(n){e.removeEventListener(n,t,!1)})}function R9(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Hv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Bx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&ly(this.element,this.evEl,this.domHandler),this.evTarget&&ly(this.target,this.evTarget,this.domHandler),this.evWin&&ly(R9(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&uy(this.element,this.evEl,this.domHandler),this.evTarget&&uy(this.target,this.evTarget,this.domHandler),this.evWin&&uy(R9(this.element),this.evWin,this.domHandler)},e}();function Oh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var xft={pointerdown:cs,pointermove:Vh,pointerup:Wn,pointercancel:Rs,pointerout:Rs},Eft={2:b0,3:dft,4:nN,5:pft},wQ="pointerdown",$Q="pointermove pointerup pointercancel";iu.MSPointerEvent&&!iu.PointerEvent&&(wQ="MSPointerDown",$Q="MSPointerMove MSPointerUp MSPointerCancel");var _Q=function(e){Go(r,e);function r(){var n,i=r.prototype;return i.evEl=wQ,i.evWin=$Q,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=xft[a],u=Eft[i.pointerType]||i.pointerType,h=u===b0,c=Oh(s,i.pointerId,"pointerId");l&cs&&(i.button===0||h)?c<0&&(s.push(i),c=s.length-1):l&(Wn|Rs)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Hv);function em(e){return Array.prototype.slice.call(e,0)}function sN(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Oh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var Sft={touchstart:cs,touchmove:Vh,touchend:Wn,touchcancel:Rs},kft="touchstart touchmove touchend touchcancel",oN=function(e){Go(r,e);function r(){var n;return r.prototype.evTarget=kft,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=Sft[i.type],o=Tft.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:b0,srcEvent:i})},r}(Hv);function Tft(e,r){var t=em(e.touches),n=this.targetIds;if(r&(cs|Vh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=em(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return iN(u.target,l)}),r===cs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Wn|Rs)&&delete n[o[i].identifier],i++;if(a.length)return[sN(s.concat(a),"identifier",!0),a]}var Ift={mousedown:cs,mousemove:Vh,mouseup:Wn},Aft="mousedown",Oft="mousemove mouseup",aN=function(e){Go(r,e);function r(){var n,i=r.prototype;return i.evEl=Aft,i.evWin=Oft,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=Ift[i.type];s&cs&&i.button===0&&(this.pressed=!0),s&Vh&&i.which!==1&&(s=Wn),this.pressed&&(s&Wn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:nN,srcEvent:i}))},r}(Hv),Cft=2500,D9=25;function B9(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Cft)}}function Pft(e,r){e&cs?(this.primaryTouch=r.changedPointers[0].identifier,B9.call(this,r)):e&(Wn|Rs)&&B9.call(this,r)}function Nft(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=D9&&o<=D9)return!0}return!1}var xQ=function(){var e=function(r){Go(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var h=u.pointerType===b0,c=u.pointerType===nN;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)Pft.call(b1(b1(o)),l,u);else if(c&&Nft.call(b1(b1(o)),u))return;o.callback(a,l,u)}},o.touch=new oN(o.manager,o.handler),o.mouse=new aN(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Hv);return e}();function Rft(e){var r,t=e.options.inputClass;return t?r=t:fft?r=_Q:hft?r=oN:dQ?r=xQ:r=aN,new r(e,_ft)}function sp(e,r,t){return Array.isArray(e)?(su(e,t[r],t),!0):!1}var aw=1,Ho=2,Qp=4,kc=8,ou=kc,tm=16,sl=32,Dft=1;function Bft(){return Dft++}function $1(e,r){var t=r.manager;return t?t.get(e):e}function M9(e){return e&tm?"cancel":e&kc?"end":e&Qp?"move":e&Ho?"start":""}var x0=function(){function e(t){t===void 0&&(t={}),this.options=Sa({enable:!0},t),this.id=Bft(),this.manager=null,this.state=aw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Ih(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(sp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=$1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return sp(n,"dropRecognizeWith",this)?this:(n=$1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(sp(n,"requireFailure",this))return this;var i=this.requireFail;return n=$1(n,this),Oh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(sp(n,"dropRequireFailure",this))return this;n=$1(n,this);var i=Oh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<kc&&o(i.options.event+M9(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=kc&&o(i.options.event+M9(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=sl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(sl|aw)))return!1;n++}return!0},r.recognize=function(n){var i=Ih({},n);if(!Bx(this.options.enable,[this,i])){this.reset(),this.state=sl;return}this.state&(ou|tm|sl)&&(this.state=aw),this.state=this.process(i),this.state&(Ho|Qp|kc|tm)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),aC=function(e){Go(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Sa({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[sC]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&cs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Wn)return this.failTimeout();var h=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||A$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!h?this.count=1:this.count+=1,this._input=i;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ou,s.tryEmit()},o.interval),Ho):ou}return sl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=sl},this.options.interval),sl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===ou&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(x0),ev=function(e){Go(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Sa({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Ho|Qp),l=this.attrTest(i);return a&&(o&Rs||!l)?s|tm:a||l?o&Wn?s|kc:s&Ho?s|Qp:Ho:sl},r}(x0);function EQ(e){return e===Jp?"down":e===_0?"up":e===w0?"left":e===$0?"right":""}var lN=function(e){Go(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Sa({event:"pan",threshold:10,pointers:1,direction:pQ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&cl&&s.push(Jy),i&ph&&s.push(Xy),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,h=i.deltaY;return l&s.direction||(s.direction&cl?(l=u===0?T$:u<0?w0:$0,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=h===0?T$:h<0?_0:Jp,o=h!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return ev.prototype.attrTest.call(this,i)&&(this.state&Ho||!(this.state&Ho)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=EQ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(ev),SQ=function(e){Go(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Sa({event:"swipe",threshold:10,velocity:.3,direction:cl|ph,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return lN.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(cl|ph)?o=i.overallVelocity:s&cl?o=i.overallVelocityX:s&ph&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ah(o)>this.options.velocity&&i.eventType&Wn},t.emit=function(i){var s=EQ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(ev),kQ=function(e){Go(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Sa({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[dh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Ho)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(ev),TQ=function(e){Go(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Sa({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[dh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Ho)},r}(ev),IQ=function(e){Go(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Sa({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[hQ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Wn|Rs)&&!u)this.reset();else if(i.eventType&cs)this.reset(),this._timer=setTimeout(function(){s.state=ou,s.tryEmit()},o.time);else if(i.eventType&Wn)return ou;return sl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===ou&&(i&&i.eventType&Wn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=rN(),this.manager.emit(this.options.event,this._input)))},r}(x0),AQ={domEvents:!1,touchAction:fQ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},L9=[[TQ,{enable:!1}],[kQ,{enable:!1},["rotate"]],[SQ,{direction:cl}],[lN,{direction:cl},["swipe"]],[aC],[aC,{event:"doubletap",taps:2},["tap"]],[IQ]],Mft=1,F9=2;function j9(e,r){var t=e.element;if(t.style){var n;su(e.options.cssProps,function(i,s){n=Dx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Lft(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var H9=function(){function e(t,n){var i=this;this.options=Ih({},AQ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Rft(this),this.touchAction=new gQ(this,this.options.touchAction),j9(this,!0),su(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Ih(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?F9:Mft},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ou)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==F9&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ho|Qp|kc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof x0)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(sp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(sp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Oh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return su(Qy(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return su(Qy(n),function(o){i?s[o]&&s[o].splice(Oh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Lft(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&j9(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),Fft={touchstart:cs,touchmove:Vh,touchend:Wn,touchcancel:Rs},jft="touchstart",Hft="touchstart touchmove touchend touchcancel",zft=function(e){Go(r,e);function r(){var n,i=r.prototype;return i.evTarget=jft,i.evWin=Hft,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=Fft[i.type];if(s===cs&&(this.started=!0),!!this.started){var o=Uft.call(this,i,s);s&(Wn|Rs)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:b0,srcEvent:i})}},r}(Hv);function Uft(e,r){var t=em(e.touches),n=em(e.changedTouches);return r&(Wn|Rs)&&(t=sN(t.concat(n),"identifier",!0)),[t,n]}function OQ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var CQ=OQ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),Wft=OQ(function(e,r){return CQ(e,r,!0)},"merge","Use `assign`.");function Kft(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Ih(i,t)}function z9(e,r){return function(){return e.apply(r,arguments)}}var PQ=function(){var e=function(t,n){return n===void 0&&(n={}),new H9(t,Sa({recognizers:L9.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=pQ,e.DIRECTION_DOWN=Jp,e.DIRECTION_LEFT=w0,e.DIRECTION_RIGHT=$0,e.DIRECTION_UP=_0,e.DIRECTION_HORIZONTAL=cl,e.DIRECTION_VERTICAL=ph,e.DIRECTION_NONE=T$,e.DIRECTION_DOWN=Jp,e.INPUT_START=cs,e.INPUT_MOVE=Vh,e.INPUT_END=Wn,e.INPUT_CANCEL=Rs,e.STATE_POSSIBLE=aw,e.STATE_BEGAN=Ho,e.STATE_CHANGED=Qp,e.STATE_ENDED=kc,e.STATE_RECOGNIZED=ou,e.STATE_CANCELLED=tm,e.STATE_FAILED=sl,e.Manager=H9,e.Input=Hv,e.TouchAction=gQ,e.TouchInput=oN,e.MouseInput=aN,e.PointerEventInput=_Q,e.TouchMouseInput=xQ,e.SingleTouchInput=zft,e.Recognizer=x0,e.AttrRecognizer=ev,e.Tap=aC,e.Pan=lN,e.Swipe=SQ,e.Pinch=kQ,e.Rotate=TQ,e.Press=IQ,e.on=ly,e.off=uy,e.each=su,e.merge=Wft,e.extend=CQ,e.bindFn=z9,e.assign=Ih,e.inherit=Kft,e.bindFn=z9,e.prefixed=Dx,e.toArray=em,e.inArray=Oh,e.uniqueArray=sN,e.splitStr=Qy,e.boolOrFn=Bx,e.hasParent=iN,e.addEventListeners=ly,e.removeEventListeners=uy,e.defaults=Ih({},AQ,{preset:L9}),e}();PQ.defaults;var qft=PQ;function NQ(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=Vft(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Vft(e,r){var t;if(e){if(typeof e=="string")return U9(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U9(e,r)}}function U9(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}Jc("DELETE");function Mx(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return Gft(r.length?r:[k$()])}function Gft(e){var r=Yft(e),t=yn(r,3),n=t[0],i=t[1],s=t[2],o=1,a=function(){var u=2091639*n+o*23283064365386963e-26;return n=i,i=s,s=u-(o=u|0)};return a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function Yft(){for(var e=Zft(),r=e(" "),t=e(" "),n=e(" "),i=0;i<arguments.length;i++)r-=e(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),t-=e(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=e(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[r,t,n]}function Zft(){var e=4022871197;return function(r){for(var t=r.toString(),n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function Xft(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var uN=typeof window<"u"?window.Hammer||qft:function(){return Xft()};function ol(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=uN(this._dom.overlay);n.on("tap",nt(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Wr(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){Jft(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}NX(ol.prototype);ol.current=null;ol.prototype.destroy=function(){var e,r;this.deactivate();var t=NQ(fh(e=nu(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};ol.prototype.activate=function(){ol.current&&ol.current.deactivate(),ol.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};ol.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};ol.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Jft(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var Qft=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,eht=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,tht=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,rht=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function lc(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(lc(r),e.removeChild(r))}}function dc(e){return e instanceof String||typeof e=="string"}function W9(e){return Br(e)==="object"&&e!==null}function Ch(e,r,t,n){var i=!1;n===!0&&(i=r[t]===null&&e[t]!==void 0),i?delete e[t]:e[t]=r[t]}function RQ(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var n in e)if(r[n]!==void 0)if(r[n]===null||Br(r[n])!=="object")Ch(e,r,n,t);else{var i=e[n],s=r[n];W9(i)&&W9(s)&&RQ(i,s,t)}}function zv(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Fr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var s=e[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)r[s]===void 0&&(r[s]={}),r[s].constructor===Object?Zr(r[s],t[s],!1,n):Ch(r,t,s,n);else{if(Fr(t[s]))throw new TypeError("Arrays are not supported by deepExtend");Ch(r,t,s,n)}}return r}function O$(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Fr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!ll(e).call(e,i))if(t[i]&&t[i].constructor===Object)r[i]===void 0&&(r[i]={}),r[i].constructor===Object?Zr(r[i],t[i]):Ch(r,t,i,n);else if(Fr(t[i])){r[i]=[];for(var s=0;s<t[i].length;s++)r[i].push(t[i][s])}else Ch(r,t,i,n);return r}function Zr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)||t===!0)if(Br(r[i])==="object"&&r[i]!==null&&m9(r[i])===Object.prototype)e[i]===void 0?e[i]=Zr({},r[i],t):Br(e[i])==="object"&&e[i]!==null&&m9(e[i])===Object.prototype?Zr(e[i],r[i],t):Ch(e,r,i,n);else if(Fr(r[i])){var s;e[i]=Oi(s=r[i]).call(s)}else Ch(e,r,i,n);return e}function C$(e,r){var t;return eN(t=[]).call(t,tl(e),[r])}function nht(e){return Oi(e).call(e)}function iht(e){return e.getBoundingClientRect().left}function sht(e){return e.getBoundingClientRect().top}function pr(e,r){if(Fr(e))for(var t=e.length,n=0;n<t;n++)r(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r(e[i],i,e)}function oht(e,r,t,n){if(e.addEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&ll(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,n)}else e.attachEvent("on"+r,t)}function aht(e,r,t,n){if(e.removeEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&ll(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,n)}else e.detachEvent("on"+r,t)}function cN(e){var r;switch(e.length){case 3:case 4:return r=eht.exec(e),r?{r:ca(r[1]+r[1],16),g:ca(r[2]+r[2],16),b:ca(r[3]+r[3],16)}:null;case 6:case 7:return r=Qft.exec(e),r?{r:ca(r[1],16),g:ca(r[2],16),b:ca(r[3],16)}:null;default:return null}}function Mo(e,r){if(ll(e).call(e,"rgba"))return e;if(ll(e).call(e,"rgb")){var t=e.substr(Er(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var n=cN(e);return n==null?e:"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}function DQ(e,r,t){var n;return"#"+Oi(n=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(n,1)}function lC(e,r){if(dc(e)){var t=e;if(MQ(t)){var n,i=Xp(n=t.substr(4).substr(0,t.length-5).split(",")).call(n,function(p){return ca(p)});t=DQ(i[0],i[1],i[2])}if(BQ(t)===!0){var s=lht(t),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=uC(a.h,a.s,a.v),u=uC(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var h={background:e.background||r.background,border:e.border||r.border,highlight:dc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:dc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return h}else{var c={background:e.background||void 0,border:e.border||void 0,highlight:dc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:dc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return c}}function Wg(e,r,t){e=e/255,r=r/255,t=t/255;var n=Math.min(e,Math.min(r,t)),i=Math.max(e,Math.max(r,t));if(n===i)return{h:0,s:0,v:n};var s=e===n?r-t:t===n?e-r:t-e,o=e===n?3:t===n?1:5,a=60*(o-s/(i-n))/360,l=(i-n)/i,u=i;return{h:a,s:l,v:u}}function lw(e,r,t){var n,i,s,o=Math.floor(e*6),a=e*6-o,l=t*(1-r),u=t*(1-a*r),h=t*(1-(1-a)*r);switch(o%6){case 0:n=t,i=h,s=l;break;case 1:n=u,i=t,s=l;break;case 2:n=l,i=t,s=h;break;case 3:n=l,i=u,s=t;break;case 4:n=h,i=l,s=t;break;case 5:n=t,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function uC(e,r,t){var n=lw(e,r,t);return DQ(n.r,n.g,n.b)}function lht(e){var r=cN(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return Wg(r.r,r.g,r.b)}function BQ(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function MQ(e){return tht.test(e)}function uht(e){return rht.test(e)}function Tc(e){if(e===null||Br(e)!=="object")return null;if(e instanceof Element)return e;var r=hh(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Br(e[t])=="object"&&(r[t]=Tc(e[t]));return r}function No(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=function(w){return w!=null},s=function(w){return w!==null&&Br(w)==="object"},o=function(w){for(var b in w)if(Object.prototype.hasOwnProperty.call(w,b))return!1;return!0};if(!s(e))throw new Error("Parameter mergeTarget must be an object");if(!s(r))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(w,b,T){s(w[T])||(w[T]={});var _=b[T],A=w[T];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(A[x]=_[x])},l=r[t],u=s(n)&&!o(n),h=u?n[t]:void 0,c=h?h.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){s(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!s(e[t]))if(i(h))e[t]=hh(h);else return;if(s(l)){var p=!0;l.enabled!==void 0?p=l.enabled:c!==void 0&&(p=h.enabled),a(e,r,t),e[t].enabled=p}}}var cht={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function uc(e,r){var t;Fr(r)||(r=[r]);var n=NQ(e),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s){t=s[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t<"u")break}}}catch(a){n.e(a)}finally{n.f()}return t}var fht={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},hht=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ht(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return dt(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return fht[t]}},{key:"setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var i,s=this._isColorString(t);if(s!==void 0&&(t=s),dc(t)===!0){if(MQ(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(uht(t)===!0){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(BQ(t)===!0){var l=cN(t);i={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:u}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+y0(t));this._setColor(i,n)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n===!0&&(this.previousColor=Un({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",ul(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n===!0&&(this.initialColor=Un({},t)),this.color=t;var i=Wg(t.r,t.g,t.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var n=Wg(this.color.r,this.color.g,this.color.b);n.v=t/100;var i=lw(n.h,n.s,n.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,n=Wg(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-n.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),m0(i).call(i),this.brightnessRange.value=100*n.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,n,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=nt(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=nt(n=this._apply).call(n,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=nt(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=nt(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new uN(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(n){n.isFirst&&t._moveSelector(n)}),this.hammer.on("tap",function(n){t._moveSelector(n)}),this.hammer.on("panstart",function(n){t._moveSelector(n)}),this.hammer.on("panmove",function(n){t._moveSelector(n)}),this.hammer.on("panend",function(n){t._moveSelector(n)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,n,i);var s,o,a,l;this.centerCoordinates={x:n*.5,y:i*.5},this.r=.49*n;var u=2*Math.PI/360,h=1/360,c=1/this.r,p;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(u*a),o=this.centerCoordinates.y+l*Math.cos(u*a),p=lw(a*h,l*c,1),t.fillStyle="rgb("+p.r+","+p.g+","+p.b+")",t.fillRect(s-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,n,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var n=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-n.left,s=t.center.y-n.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,u=s-o,h=Math.atan2(l,u),c=.98*Math.min(Math.sqrt(l*l+u*u),a),p=Math.cos(h)*c+o,m=Math.sin(h)*c+a;this.colorPickerSelector.style.top=p-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=m-.5*this.colorPickerSelector.clientWidth+"px";var w=h/(2*Math.PI);w=w<0?w+1:w;var b=c/this.r,T=Wg(this.color.r,this.color.g,this.color.b);T.h=w,T.s=b;var _=lw(T.h,T.s,T.v);_.a=this.color.a,this.color=_,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function cC(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var n=document.createElement(r[0]);return n.appendChild(cC.apply(void 0,tl(Oi(r).call(r,1)))),n}var dht=function(){function e(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ht(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Un(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new hht(i),this.wrapper=void 0}return dt(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof t=="string")this.options.filter=t;else if(Fr(t))this.options.filter=t.join();else if(Br(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Is(t)!==void 0&&(this.options.filter=Is(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(n=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,n=t):typeof t=="function"&&(this.options.filter=t,n=!0);Is(this.options)===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Is(this.options),n=0,i=!1;for(var s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof t=="function"?(i=t(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(t===!0||Er(t).call(t,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,n>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var n=this.moduleOptions,i=0;i<t.length;i++)if(n[t[i]]!==void 0)n=n[t[i]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return Wr(s).call(s,function(a){n.appendChild(a)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerText=t,this._makeItem([],n)}},{key:"_makeLabel",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+n.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(cC("i","b",t))}else s.innerText=t+":";return s}},{key:"_makeDropdown",value:function(t,n,i){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var o=0;n!==void 0&&Er(t).call(t,n)!==-1&&(o=Er(t).call(t,n));for(var a=0;a<t.length;a++){var l=document.createElement("option");l.value=t[a],a===o&&(l.selected="selected"),l.innerText=t[a],s.appendChild(l)}var u=this;s.onchange=function(){u._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,s)}},{key:"_makeRange",value:function(t,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=a}catch{}u.step=l;var h="",c=0;if(n!==void 0){var p=1.2;n<0&&n*p<o?(u.min=Math.ceil(n*p),c=u.min,h="range increased"):n/p<o&&(u.min=Math.ceil(n/p),c=u.min,h="range increased"),n*p>a&&a!==1&&(u.max=Math.ceil(n*p),c=u.max,h="range increased"),u.value=n}else u.value=s;var m=document.createElement("input");m.className="vis-configuration vis-config-rangeinput",m.value=u.value;var w=this;u.onchange=function(){m.value=this.value,w._update(Number(this.value),i)},u.oninput=function(){m.value=this.value};var b=this._makeLabel(i[i.length-1],i),T=this._makeItem(i,b,u,m);h!==""&&this.popupHistory[T]!==c&&(this.popupHistory[T]=c,this._setupPopup(h,T))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=function(){t._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(t,n){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerText=t,s.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],i=n.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=ul(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=ul(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,n,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=t,n!==void 0&&(s.checked=n,n!==t&&(Br(t)==="object"?n!==t.enabled&&this.changedOptions.push({path:i,value:n}):this.changedOptions.push({path:i,value:n})));var o=this;s.onchange=function(){o._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeTextInput",value:function(t,n,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==t&&this.changedOptions.push({path:i,value:n});var o=this;s.onchange=function(){o._update(this.value,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeColorField",value:function(t,n,i){var s=this,o=t[1],a=document.createElement("div");n=n===void 0?o:n,n!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=n):a.className="vis-configuration vis-config-colorBlock none",n=n===void 0?o:n,a.onclick=function(){s._showColorPicker(n,a,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,a)}},{key:"_showColorPicker",value:function(t,n,i){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var a="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";n.style.backgroundColor=a,s._update(a,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=Is(this.options),a=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){s=!0;var u=t[l],h=C$(n,l);if(typeof o=="function"&&(s=o(l,n),s===!1&&!Fr(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,s=this._handleObject(u,h,!0),this.allowCreation=i===!1)),s!==!1){a=!0;var c=this._getValue(h);if(Fr(u))this._handleArray(u,c,h);else if(typeof u=="string")this._makeTextInput(u,c,h);else if(typeof u=="boolean")this._makeCheckbox(u,c,h);else if(u instanceof Object){if(!this.hideOption(n,l,this.moduleOptions))if(u.enabled!==void 0){var p=C$(h,"enabled"),m=this._getValue(p);if(m===!0){var w=this._makeLabel(l,h,!0);this._makeItem(h,w),a=this._handleObject(u,h)||a}else this._makeCheckbox(u,m,h)}else{var b=this._makeLabel(l,h,!0);this._makeItem(h,b),a=this._handleObject(u,h)||a}}else console.error("dont know how to handle",u,l,h)}}return a}},{key:"_handleArray",value:function(t,n,i){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,n,i),t[1]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="string"?(this._makeDropdown(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="number"&&(this._makeRange(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:Number(n)}))}},{key:"_update",value:function(t,n){var i=this._constructOptions(t,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<n.length;o++)n[o]!=="global"&&(s[n[o]]===void 0&&(s[n[o]]={}),o!==n.length-1?s=s[n[o]]:s[n[o]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(cC("pre","const options = "+y0(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,t);return t}}]),e}(),pht=function(){function e(r,t){ht(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return dt(e,[{key:"setPosition",value:function(t,n){this.x=ca(t),this.y=ca(n)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var n=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"){var u=!1,h=!0;this.y-n<this.padding&&(h=!1),this.x+i>o-this.padding&&(u=!0),u?a=this.x-i:a=this.x,h?l=this.y-n:l=this.y}else l=this.y-n,l+n+this.padding>s&&(l=s-n-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Ag=!1,K9,fC="background: #FFeeee; color: #dd0000",vht=function(){function e(){ht(this,e)}return dt(e,null,[{key:"validate",value:function(t,n,i){Ag=!1,K9=n;var s=n;return i!==void 0&&(s=n[i]),e.parse(t,s,[]),Ag}},{key:"parse",value:function(t,n,i){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.check(s,t,n,i)}},{key:"check",value:function(t,n,i,s){if(i[t]===void 0&&i.__any__===void 0){e.getSuggestion(t,i,s);return}var o=t,a=!0;i[t]===void 0&&i.__any__!==void 0&&(o="__any__",a=e.getType(n[t])==="object");var l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,n,i,o,l,s)}},{key:"checkFields",value:function(t,n,i,s,o,a){var l=function(p){console.error("%c"+p+e.printLocation(a,t),fC)},u=e.getType(n[t]),h=o[u];h!==void 0?e.getType(h)==="array"&&Er(h).call(h,n[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(h)+' not "'+n[t]+'". '),Ag=!0):u==="object"&&s!=="__any__"&&(a=C$(a,t),e.parse(n[t],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(gn(o))+". Received ["+u+'] "'+n[t]+'"'),Ag=!0)}},{key:"getType",value:function(t){var n=Br(t);return n==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Fr(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(t,n,i){var s=e.findInOptions(t,n,i,!1),o=e.findInOptions(t,K9,[],!0),a=8,l=4,u;s.indexMatch!==void 0?u=" in "+e.printLocation(s.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?u=" in "+e.printLocation(s.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):s.distance<=a?u='. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,t):u=". Did you mean one of these: "+e.print(gn(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+u,fC),Ag=!0}},{key:"findInOptions",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],u=t.toLowerCase(),h=void 0;for(var c in n){var p=void 0;if(n[c].__type__!==void 0&&s===!0){var m=e.findInOptions(t,n[c],C$(i,c));o>m.distance&&(a=m.closestMatch,l=m.path,o=m.distance,h=m.indexMatch)}else{var w;Er(w=c.toLowerCase()).call(w,u)!==-1&&(h=c),p=e.levenshteinDistance(t,c),o>p&&(a=c,l=nht(i),o=p)}}return{closestMatch:a,path:l,distance:o,indexMatch:h}}},{key:"printLocation",value:function(t,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+i+`options = {
`,o=0;o<t.length;o++){for(var a=0;a<o+1;a++)s+="  ";s+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)s+="  ";s+=n+`
`;for(var u=0;u<t.length+1;u++){for(var h=0;h<t.length-u;h++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(t){return y0(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,n){if(t.length===0)return n.length;if(n.length===0)return t.length;var i=[],s;for(s=0;s<=n.length;s++)i[s]=[s];var o;for(o=0;o<=t.length;o++)i[0][o]=o;for(s=1;s<=n.length;s++)for(o=1;o<=t.length;o++)n.charAt(s-1)==t.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[n.length][t.length]}}]),e}(),ght=ol,yht=dht,$p=uN,mht=pht,LQ=fC,bht=vht;function wht(e){return yc=e,Eht()}var FQ={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},fN=hh(FQ);fN.color="color.color";fN.style="dashes";var ns={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},q9={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},yc="",tv=0,cr="",Ft="",Es=ns.NULL;function $ht(){tv=0,cr=yc.charAt(0)}function li(){tv++,cr=yc.charAt(tv)}function Ld(){return yc.charAt(tv+1)}function V9(e){var r=e.charCodeAt(0);return r<47?r===35||r===46:r<59?r>47:r<91?r>64:r<96?r===95:r<123?r>96:!1}function Hc(e,r){if(e||(e={}),r)for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}function _ht(e,r,t){for(var n=r.split("."),i=e;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=t}}function jQ(e,r){for(var t,n,i=null,s=[e],o=e;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(r.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:r.id},e.node&&(i.attr=Hc(i.attr,e.node))),t=s.length-1;t>=0;t--){var a,l=s[t];l.nodes||(l.nodes=[]),Er(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}r.attr&&(i.attr=Hc(i.attr,r.attr))}function xht(e,r){if(e.edges||(e.edges=[]),e.edges.push(r),e.edge){var t=Hc({},e.edge);r.attr=Hc(t,r.attr)}}function HQ(e,r,t,n,i){var s={from:r,to:t,type:n};return e.edge&&(s.attr=Hc({},e.edge)),s.attr=Hc(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Xr(){for(Es=ns.NULL,Ft="";cr===" "||cr==="	"||cr===`
`||cr==="\r";)li();do{var e=!1;if(cr==="#"){for(var r=tv-1;yc.charAt(r)===" "||yc.charAt(r)==="	";)r--;if(yc.charAt(r)===`
`||yc.charAt(r)===""){for(;cr!=""&&cr!=`
`;)li();e=!0}}if(cr==="/"&&Ld()==="/"){for(;cr!=""&&cr!=`
`;)li();e=!0}if(cr==="/"&&Ld()==="*"){for(;cr!="";)if(cr==="*"&&Ld()==="/"){li(),li();break}else li();e=!0}for(;cr===" "||cr==="	"||cr===`
`||cr==="\r";)li()}while(e);if(cr===""){Es=ns.DELIMITER;return}var t=cr+Ld();if(q9[t]){Es=ns.DELIMITER,Ft=t,li(),li();return}if(q9[cr]){Es=ns.DELIMITER,Ft=cr,li();return}if(V9(cr)||cr==="-"){for(Ft+=cr,li();V9(cr);)Ft+=cr,li();Ft==="false"?Ft=!1:Ft==="true"?Ft=!0:isNaN(Number(Ft))||(Ft=Number(Ft)),Es=ns.IDENTIFIER;return}if(cr==='"'){for(li();cr!=""&&(cr!='"'||cr==='"'&&Ld()==='"');)cr==='"'?(Ft+=cr,li()):cr==="\\"&&Ld()==="n"?(Ft+=`
`,li()):Ft+=cr,li();if(cr!='"')throw is('End of string " expected');li(),Es=ns.IDENTIFIER;return}for(Es=ns.UNKNOWN;cr!="";)Ft+=cr,li();throw new SyntaxError('Syntax error in part "'+KQ(Ft,30)+'"')}function Eht(){var e={};if($ht(),Xr(),Ft==="strict"&&(e.strict=!0,Xr()),(Ft==="graph"||Ft==="digraph")&&(e.type=Ft,Xr()),Es===ns.IDENTIFIER&&(e.id=Ft,Xr()),Ft!="{")throw is("Angle bracket { expected");if(Xr(),zQ(e),Ft!="}")throw is("Angle bracket } expected");if(Xr(),Ft!=="")throw is("End of file expected");return Xr(),delete e.node,delete e.edge,delete e.graph,e}function zQ(e){for(;Ft!==""&&Ft!="}";)Sht(e),Ft===";"&&Xr()}function Sht(e){var r=UQ(e);if(r){WQ(e,r);return}var t=kht(e);if(!t){if(Es!=ns.IDENTIFIER)throw is("Identifier expected");var n=Ft;if(Xr(),Ft==="="){if(Xr(),Es!=ns.IDENTIFIER)throw is("Identifier expected");e[n]=Ft,Xr()}else Tht(e,n)}}function UQ(e){var r=null;if(Ft==="subgraph"&&(r={},r.type="subgraph",Xr(),Es===ns.IDENTIFIER&&(r.id=Ft,Xr())),Ft==="{"){if(Xr(),r||(r={}),r.parent=e,r.node=e.node,r.edge=e.edge,r.graph=e.graph,zQ(r),Ft!="}")throw is("Angle bracket } expected");Xr(),delete r.node,delete r.edge,delete r.graph,delete r.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(r)}return r}function kht(e){return Ft==="node"?(Xr(),e.node=cy(),"node"):Ft==="edge"?(Xr(),e.edge=cy(),"edge"):Ft==="graph"?(Xr(),e.graph=cy(),"graph"):null}function Tht(e,r){var t={id:r},n=cy();n&&(t.attr=n),jQ(e,t),WQ(e,r)}function WQ(e,r){for(;Ft==="->"||Ft==="--";){var t,n=Ft;Xr();var i=UQ(e);if(i)t=i;else{if(Es!=ns.IDENTIFIER)throw is("Identifier or subgraph expected");t=Ft,jQ(e,{id:t}),Xr()}var s=cy(),o=HQ(e,r,t,n,s);xht(e,o),r=t}}function cy(){for(var e,r=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Ft==="[";){for(Xr(),r={};Ft!==""&&Ft!="]";){if(Es!=ns.IDENTIFIER)throw is("Attribute name expected");var o=Ft;if(Xr(),Ft!="=")throw is("Equal sign = expected");if(Xr(),Es!=ns.IDENTIFIER)throw is("Attribute value expected");var a=Ft;o==="style"&&(a=t[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:r,name:o,value:a}),s.push(o),Xr(),Ft==","&&Xr()}if(Ft!="]")throw is("Bracket ] expected");Xr()}if(ll(s).call(s,"dir")){var u={};for(u.arrows={},e=0;e<i.length;e++)if(i[e].name==="arrows")if(i[e].value.to!=null)u.arrows.to=e;else if(i[e].value.from!=null)u.arrows.from=e;else throw is("Invalid value of arrows");else i[e].name==="dir"&&(u.dir=e);var h=i[u.dir].value;if(!ll(s).call(s,"arrows"))if(h==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(h==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(h==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(h==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw is('Invalid dir type "'+h+'"');var c,p;if(h==="both")u.arrows.to&&u.arrows.from?(p=i[u.arrows.to].value.to.type,c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}},nu(i).call(i,u.arrows.from,1)):u.arrows.to?(p=i[u.arrows.to].value.to.type,c="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.from&&(p="arrow",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}});else if(h==="back")u.arrows.to&&u.arrows.from?(p="",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.to?(p="",c="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.from&&(p="",c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(h==="none"){var m;u.arrows.to?m=u.arrows.to:m=u.arrows.from,i[m]={attr:i[m].attr,name:i[m].name,value:""}}else if(h==="forward")u.arrows.to&&u.arrows.from?(p=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.to?(p=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.from&&(p="arrow",c="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw is('Invalid dir type "'+h+'"');nu(i).call(i,u.dir,1)}var w;if(ll(s).call(s,"penwidth")){var b=[];for(w=i.length,e=0;e<w;e++)i[e].name!=="width"&&(i[e].name==="penwidth"&&(i[e].name="width"),b.push(i[e]));i=b}for(w=i.length,e=0;e<w;e++)_ht(i[e].attr,i[e].name,i[e].value);return r}function is(e){return new SyntaxError(e+', got "'+KQ(Ft,30)+'" (char '+tv+")")}function KQ(e,r){return e.length<=r?e:e.substr(0,27)+"..."}function Iht(e,r,t){Fr(e)?Wr(e).call(e,function(n){Fr(r)?Wr(r).call(r,function(i){t(n,i)}):t(n,r)}):Fr(r)?Wr(r).call(r,function(n){t(e,n)}):t(e,r)}function eT(e,r,t){for(var n=r.split("."),i=n.pop(),s=e,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=t,e}function G9(e,r){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=r[n];Fr(i)?Wr(i).call(i,function(s){eT(t,s,e[n])}):typeof i=="string"?eT(t,i,e[n]):eT(t,n,e[n])}return t}function Aht(e){var r=wht(e),t={nodes:[],edges:[],options:{}};if(r.nodes){var n;Wr(n=r.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};Hc(a,G9(o.attr,FQ)),a.image&&(a.shape="image"),t.nodes.push(a)})}if(r.edges){var i,s=function(a){var l={from:a.from,to:a.to};return Hc(l,G9(a.attr,fN)),l.arrows==null&&a.type==="->"&&(l.arrows="to"),l};Wr(i=r.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;Wr(u=o.from.edges).call(u,function(c){var p=s(c);t.edges.push(p)})}if(Iht(a,l,function(c,p){var m=HQ(t,c.id,p.id,o.type,o.attr),w=s(m);t.edges.push(w)}),o.to instanceof Object&&o.to.edges){var h;Wr(h=o.to.edges).call(h,function(c){var p=s(c);t.edges.push(p)})}})}return r.attr&&(t.options=r.attr),t}function Oht(e,r){var t,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};r!=null&&(r.fixed!=null&&(n.nodes.fixed=r.fixed),r.parseColor!=null&&(n.nodes.parseColor=r.parseColor),r.inheritColor!=null&&(n.edges.inheritColor=r.inheritColor));var i=e.edges,s=Xp(i).call(i,function(a){var l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l}),o=Xp(t=e.nodes).call(t,function(a){var l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l});return{nodes:o,edges:s}}var Cht={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},Pht={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},Nht={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},Rht={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},Dht={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},Bht={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},Mht={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},Lht={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},Fht={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},jht={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},Hht={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"},zht=Object.freeze({__proto__:null,cn:Lht,cs:Hht,de:Pht,en:Cht,es:Nht,fr:jht,it:Rht,nl:Dht,pt:Bht,ru:Mht,uk:Fht});function Uht(e,r){try{var t=r.split(/[-_ /]/,2),n=yn(t,2),i=n[0],s=n[1],o=i!=null?i.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(o&&a){var l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(e,l))return l;var u;console.warn(eN(u="Unknown variant ".concat(a," of language ")).call(u,o,"."))}if(o){var h=o;if(Object.prototype.hasOwnProperty.call(e,h))return h;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(r,", falling back to English.")),"en"}catch(c){return console.error(c),console.warn("Unexpected error while normalizing locale ".concat(r,", falling back to English.")),"en"}}var Wht=function(){function e(){ht(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return dt(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,n=this.image.height;this.width=t,this.height=n;var i=Math.floor(n/2),s=Math.floor(n/4),o=Math.floor(n/8),a=Math.floor(n/16),l=Math.floor(t/2),u=Math.floor(t/4),h=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*u,this.canvas.height=i,this.coordinates=[[0,0,l,i],[l,0,u,s],[l,s,h,o],[5*h,s,c,a]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),n=this.coordinates[0];t.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var s=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,n,i,s,o,a){if(this.initialized())if(n>2){n*=.5;for(var l=0;n>2&&l<this.NUM_ITERATIONS;)n*=.5,l+=1;l>=this.NUM_ITERATIONS&&(l=this.NUM_ITERATIONS-1);var u=this.coordinates[l];t.drawImage(this.canvas,u[0],u[1],u[2],u[3],i,s,o,a)}else t.drawImage(this.image,i,s,o,a)}}]),e}(),Kht=function(){function e(r){ht(this,e),this.images={},this.imageBroken={},this.callback=r}return dt(e,[{key:"_tryloadBrokenUrl",value:function(t,n,i){if(!(t===void 0||i===void 0)){if(n===void 0){console.warn("No broken url image defined");return}i.image.onerror=function(){console.error("Could not load brokenImage:",n)},i.image.src=n}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,n){var i=this,s=this.images[t];if(s)return s;var o=new Wht;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,n,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),e}(),hC={},qht={get exports(){return hC},set exports(e){hC=e}},rv={},Vht={get exports(){return rv},set exports(e){rv=e}},Ght=Tr,Yht=Ght(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Zht=Tr,Xht=wi,Jht=_u,Y9=Yht,uw=Object.isExtensible,Qht=Zht(function(){uw(1)}),edt=Qht||Y9?function(r){return!Xht(r)||Y9&&Jht(r)=="ArrayBuffer"?!1:uw?uw(r):!0}:uw,tdt=Tr,qQ=!tdt(function(){return Object.isExtensible(Object.preventExtensions({}))}),rdt=jt,ndt=Ir,idt=l0,sdt=wi,hN=$i,odt=Vo.f,Z9=h0,adt=Ex,dN=edt,ldt=vx,udt=qQ,VQ=!1,pu=ldt("meta"),cdt=0,pN=function(e){odt(e,pu,{value:{objectID:"O"+cdt++,weakData:{}}})},fdt=function(e,r){if(!sdt(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!hN(e,pu)){if(!dN(e))return"F";if(!r)return"E";pN(e)}return e[pu].objectID},hdt=function(e,r){if(!hN(e,pu)){if(!dN(e))return!0;if(!r)return!1;pN(e)}return e[pu].weakData},ddt=function(e){return udt&&VQ&&dN(e)&&!hN(e,pu)&&pN(e),e},pdt=function(){vdt.enable=function(){},VQ=!0;var e=Z9.f,r=ndt([].splice),t={};t[pu]=1,e(t).length&&(Z9.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===pu){r(i,s,1);break}return i},rdt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:adt.f}))},vdt=Vht.exports={enable:pdt,fastKey:fdt,getWeakData:hdt,onFreeze:ddt};idt[pu]=!0;var gdt=o0,ydt=oo,mdt=lo,bdt=Rv,wdt=VX,$dt=Oa,X9=Rn,_dt=JX,xdt=xx,J9=qX,Edt=TypeError,cw=function(e,r){this.stopped=e,this.result=r},Q9=cw.prototype,vN=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=gdt(r,n),u,h,c,p,m,w,b,T=function(A){return u&&J9(u,"normal",A),new cw(!0,A)},_=function(A){return i?(mdt(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(h=xdt(e),!h)throw Edt(bdt(e)+" is not iterable");if(wdt(h)){for(c=0,p=$dt(e);p>c;c++)if(m=_(e[c]),m&&X9(Q9,m))return m;return new cw(!1)}u=_dt(e,h)}for(w=s?e.next:u.next;!(b=ydt(w,u)).done;){try{m=_(b.value)}catch(A){J9(u,"throw",A)}if(typeof m=="object"&&m&&X9(Q9,m))return m}return new cw(!1)},Sdt=Rn,kdt=TypeError,gN=function(e,r){if(Sdt(r,e))return e;throw kdt("Incorrect invocation")},Tdt=jt,Idt=Gn,Adt=rv,Odt=Tr,Cdt=Dv,Pdt=vN,Ndt=gN,Rdt=bi,Ddt=wi,Bdt=Mv,Mdt=Vo.f,Ldt=Zc.forEach,Fdt=ii,GQ=Wh,jdt=GQ.set,Hdt=GQ.getterFor,yN=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=Idt[e],a=o&&o.prototype,l={},u;if(!Fdt||!Rdt(o)||!(i||a.forEach&&!Odt(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),Adt.enable();else{u=r(function(p,m){jdt(Ndt(p,h),{type:e,collection:new o}),m!=null&&Pdt(m,p[s],{that:p,AS_ENTRIES:n})});var h=u.prototype,c=Hdt(e);Ldt(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var m=p=="add"||p=="set";p in a&&!(i&&p=="clear")&&Cdt(h,p,function(w,b){var T=c(this).collection;if(!m&&i&&!Ddt(w))return p=="get"?void 0:!1;var _=T[p](w===0?0:w,b);return m?this:_})}),i||Mdt(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return Bdt(u,e,!1,!0),l[e]=u,Tdt({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},zdt=f0,mN=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:zdt(e,n,r[n],t);return e},Udt=qo,Wdt=V4,Kdt=Dn,qdt=ii,ej=Kdt("species"),Vdt=function(e){var r=Udt(e);qdt&&r&&!r[ej]&&Wdt(r,ej,{configurable:!0,get:function(){return this}})},Gdt=Bv,Ydt=V4,tj=mN,Zdt=o0,Xdt=gN,Jdt=e0,Qdt=vN,ept=W4,_1=K4,tpt=Vdt,Og=ii,rj=rv.fastKey,YQ=Wh,nj=YQ.set,tT=YQ.getterFor,ZQ={getConstructor:function(e,r,t,n){var i=e(function(u,h){Xdt(u,s),nj(u,{type:r,index:Gdt(null),first:void 0,last:void 0,size:0}),Og||(u.size=0),Jdt(h)||Qdt(h,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=tT(r),a=function(u,h,c){var p=o(u),m=l(u,h),w,b;return m?m.value=c:(p.last=m={index:b=rj(h,!0),key:h,value:c,previous:w=p.last,next:void 0,removed:!1},p.first||(p.first=m),w&&(w.next=m),Og?p.size++:u.size++,b!=="F"&&(p.index[b]=m)),u},l=function(u,h){var c=o(u),p=rj(h),m;if(p!=="F")return c.index[p];for(m=c.first;m;m=m.next)if(m.key==h)return m};return tj(s,{clear:function(){for(var h=this,c=o(h),p=c.index,m=c.first;m;)m.removed=!0,m.previous&&(m.previous=m.previous.next=void 0),delete p[m.index],m=m.next;c.first=c.last=void 0,Og?c.size=0:h.size=0},delete:function(u){var h=this,c=o(h),p=l(h,u);if(p){var m=p.next,w=p.previous;delete c.index[p.index],p.removed=!0,w&&(w.next=m),m&&(m.previous=w),c.first==p&&(c.first=m),c.last==p&&(c.last=w),Og?c.size--:h.size--}return!!p},forEach:function(h){for(var c=o(this),p=Zdt(h,arguments.length>1?arguments[1]:void 0),m;m=m?m.next:c.first;)for(p(m.value,m.key,this);m&&m.removed;)m=m.previous},has:function(h){return!!l(this,h)}}),tj(s,t?{get:function(h){var c=l(this,h);return c&&c.value},set:function(h,c){return a(this,h===0?0:h,c)}}:{add:function(h){return a(this,h=h===0?0:h,h)}}),Og&&Ydt(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=tT(r),s=tT(n);ept(e,r,function(o,a){nj(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,_1(void 0,!0)):a=="keys"?_1(l.key,!1):a=="values"?_1(l.value,!1):_1([l.key,l.value],!1)},t?"entries":"values",!t,!0),tpt(r)}},rpt=yN,npt=ZQ;rpt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},npt);var ipt=_r,spt=ipt.Map,opt=spt,apt=opt;(function(e){e.exports=apt})(qht);var XQ=Pt(hC),lpt=function(){function e(){ht(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Un(this.options,this.defaultOptions)}return dt(e,[{key:"setOptions",value:function(t){var n=["useDefaultGroups"];if(t!==void 0){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Er(n).call(n,i)===-1){var s=t[i];this.add(i,s)}}}},{key:"clear",value:function(){this._groups=new XQ,this._groupNames=[]}},{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._groups.get(t);if(i===void 0&&n)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var s=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[s]),this._groups.set(t,i)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}},{key:"add",value:function(t,n){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,n),n}}]),e}(),dC={},upt={get exports(){return dC},set exports(e){dC=e}},cpt=jt;cpt({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var fpt=_r,hpt=fpt.Number.isNaN,dpt=hpt,ppt=dpt;(function(e){e.exports=ppt})(upt);var pC=Pt(dC),vC={},vpt={get exports(){return vC},set exports(e){vC=e}},gpt=Gn,ypt=gpt.isFinite,mpt=Number.isFinite||function(r){return typeof r=="number"&&ypt(r)},bpt=jt,wpt=mpt;bpt({target:"Number",stat:!0},{isFinite:wpt});var $pt=_r,_pt=$pt.Number.isFinite,xpt=_pt,Ept=xpt;(function(e){e.exports=Ept})(vpt);var Zf=Pt(vC),gC={},Spt={get exports(){return gC},set exports(e){gC=e}},kpt=jt,Tpt=Zc.some,Ipt=jv,Apt=Ipt("some");kpt({target:"Array",proto:!0,forced:!Apt},{some:function(r){return Tpt(this,r,arguments.length>1?arguments[1]:void 0)}});var Opt=_i,Cpt=Opt("Array").some,Ppt=Rn,Npt=Cpt,rT=Array.prototype,Rpt=function(e){var r=e.some;return e===rT||Ppt(rT,e)&&r===rT.some?Npt:r},Dpt=Rpt,Bpt=Dpt;(function(e){e.exports=Bpt})(Spt);var Mpt=Pt(gC),yC={},Lpt={get exports(){return yC},set exports(e){yC=e}},JQ=Gn,Fpt=Tr,jpt=Ir,Hpt=ml,zpt=tN.trim,Upt=Rx,Wpt=jpt("".charAt),P$=JQ.parseFloat,ij=JQ.Symbol,sj=ij&&ij.iterator,Kpt=1/P$(Upt+"-0")!==-1/0||sj&&!Fpt(function(){P$(Object(sj))}),qpt=Kpt?function(r){var t=zpt(Hpt(r)),n=P$(t);return n===0&&Wpt(t,0)=="-"?-0:n}:P$,Vpt=jt,oj=qpt;Vpt({global:!0,forced:parseFloat!=oj},{parseFloat:oj});var Gpt=_r,Ypt=Gpt.parseFloat,Zpt=Ypt,Xpt=Zpt;(function(e){e.exports=Xpt})(Lpt);var QQ=Pt(yC),mC={},Jpt={get exports(){return mC},set exports(e){mC=e}},Qpt=jt,evt=Tr,tvt=Ex.f,rvt=evt(function(){return!Object.getOwnPropertyNames(1)});Qpt({target:"Object",stat:!0,forced:rvt},{getOwnPropertyNames:tvt});var nvt=_r,ivt=nvt.Object,svt=function(r){return ivt.getOwnPropertyNames(r)},ovt=svt,avt=ovt;(function(e){e.exports=avt})(Jpt);var lvt=Pt(mC);function bN(e,r){var t=["node","edge","label"],n=!0,i=uc(r,"chosen");if(typeof i=="boolean")n=i;else if(Br(i)==="object"){if(Er(t).call(t,e)===-1)throw new Error("choosify: subOption '"+e+"' should be one of '"+t.join("', '")+"'");var s=uc(r,["chosen",e]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function bC(e,r,t){if(e.width<=0||e.height<=0)return!1;if(t!==void 0){var n={x:r.x-t.x,y:r.y-t.y};if(t.angle!==0){var i=-t.angle,s={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y};r=s}else r=n}var o=e.x+e.width,a=e.y+e.width;return e.left<r.x&&o>r.x&&e.top<r.y&&a>r.y}function N$(e){return typeof e=="string"&&e!==""}function eee(e,r,t,n){var i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){var o=n.distanceToBorder(e,r),a=Math.sin(r)*o,l=Math.cos(r)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-t):(i=n.x+t,s=n.y-n.shape.height*.5);return{x:i,y:s}}var wC={},uvt={get exports(){return wC},set exports(e){wC=e}},cvt=_i,fvt=cvt("Array").values,hvt=fvt,dvt=hvt,pvt=Uh,vvt=$i,gvt=Rn,yvt=dvt,nT=Array.prototype,mvt={DOMTokenList:!0,NodeList:!0},bvt=function(e){var r=e.values;return e===nT||gvt(nT,e)&&r===nT.values||vvt(mvt,pvt(e))?yvt:r};(function(e){e.exports=bvt})(uvt);var tee=Pt(wC),wvt=function(){function e(r){ht(this,e),this.measureText=r,this.current=0,this.width=0,this.height=0,this.lines=[]}return dt(e,[{key:"_add",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});var s=n;(n===void 0||n==="")&&(s=" ");var o=this.measureText(s,i),a=Un({},tee(o));a.text=n,a.width=o.width,a.mod=i,(n===void 0||n==="")&&(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return t===void 0?0:t.width}},{key:"append",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n)}},{key:"newLine",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var n=this.lines[t],i=0;if(n.blocks!==void 0)for(var s=0;s<n.blocks.length;s++){var o=n.blocks[s];i<o.height&&(i=o.height)}n.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,n=0,i=0;i<this.lines.length;i++){var s=this.lines[i];s.width>t&&(t=s.width),n+=s.height}this.width=t,this.height=n}},{key:"removeEmptyBlocks",value:function(){for(var t=[],n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.blocks.length!==0&&!(n===this.lines.length-1&&i.width===0)){var s={};Un(s,i),s.blocks=[];for(var o=void 0,a=[],l=0;l<i.blocks.length;l++){var u=i.blocks[l];u.width!==0?a.push(u):o===void 0&&(o=u)}a.length===0&&o!==void 0&&a.push(o),s.blocks=a,t.push(s)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),e}(),$vt={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},aj=function(){function e(r){ht(this,e),this.text=r,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return dt(e,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return/[ \t]/.test(t)?(this.mono?this.add(t):this.spacing=!0,!0):!1}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,n){return!this.mono&&!this[t]&&this.match(n)?(this.setTag(t),!0):!1}},{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.prepareRegExp(t),s=yn(i,2),o=s[0],a=s[1],l=o.test(this.text.substr(this.position,a));return l&&n&&(this.position+=a-1),l}},{key:"parseEndTag",value:function(t,n,i){var s=this.mod()===t;return t==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(n)?(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0):!1}},{key:"replace",value:function(t,n){return this.match(t)?(this.add(n),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(t){var n,i;if(t instanceof RegExp)i=t,n=1;else{var s=$vt[t];s!==void 0?i=s:i=new RegExp(t),n=t.length}return[i,n]}}]),e}(),_vt=function(){function e(r,t,n,i){var s=this;ht(this,e),this.ctx=r,this.parent=t,this.selected=n,this.hover=i;var o=function(l,u){if(l===void 0)return 0;var h=s.parent.getFormattingValues(r,n,i,u),c=0;if(l!==""){var p=s.ctx.measureText(l);c=p.width}return{width:c,values:h}};this.lines=new wvt(o)}return dt(e,[{key:"process",value:function(t){if(!N$(t))return this.lines.finalize();var n=this.parent.fontOptions;t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`);var i=String(t).split(`
`),s=i.length;if(n.multi)for(var o=0;o<s;o++){var a=this.splitBlocks(i[o],n.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(n.maxWdt>0)for(var l=0;l<a.length;l++){var u=a[l].mod,h=a[l].text;this.splitStringIntoLines(h,u,!0)}else for(var c=0;c<a.length;c++){var p=a[c].mod,m=a[c].text;this.lines.append(m,p)}this.lines.newLine()}}else if(n.maxWdt>0)for(var w=0;w<s;w++)this.splitStringIntoLines(i[w]);else for(var b=0;b<s;b++)this.lines.newLine(i[b]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var n="none";return t==="markdown"||t==="md"?n="markdown":(t===!0||t==="html")&&(n="html"),n}},{key:"splitHtmlBlocks",value:function(t){for(var n=new aj(t),i=function(l){if(/&/.test(l)){var u=n.replace(n.text,"&lt;","<")||n.replace(n.text,"&amp;","&");return u||n.add("&"),!0}return!1};n.position<n.text.length;){var s=n.text.charAt(n.position),o=n.parseWS(s)||/</.test(s)&&(n.parseStartTag("bold","<b>")||n.parseStartTag("ital","<i>")||n.parseStartTag("mono","<code>")||n.parseEndTag("bold","</b>")||n.parseEndTag("ital","</i>")||n.parseEndTag("mono","</code>"))||i(s);o||n.add(s),n.position++}return n.emitBlock(),n.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var n=this,i=new aj(t),s=!0,o=function(h){return/\\/.test(h)?(i.position<n.text.length+1&&(i.position++,h=n.text.charAt(i.position),/ \t/.test(h)?i.spacing=!0:(i.add(h),s=!1)),!0):!1};i.position<i.text.length;){var a=i.text.charAt(i.position),l=i.parseWS(a)||o(a)||(s||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono");l||(i.add(a),s=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,n){var i=this.decodeMarkupSystem(n);if(i==="none")return[{text:t,mod:"normal"}];if(i==="markdown")return this.splitMarkdownBlocks(t);if(i==="html")return this.splitHtmlBlocks(t)}},{key:"overMaxWidth",value:function(t){var n=this.ctx.measureText(t).width;return this.lines.curWidth()+n>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var n="",i=0;i<t.length;){var s=n===""?"":" ",o=n+s+t[i];if(this.overMaxWidth(o))break;n=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var n=0;n<t.length&&!this.overMaxWidth(Oi(t).call(t,0,n));)n++;return n}},{key:"splitStringIntoLines",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,n),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var s=t.split("\r");s.length>0;){var o=this.getLongestFit(s);if(o===0){var a=s[0],l=this.getLongestFitWord(a);this.lines.newLine(Oi(a).call(a,0,l),n),s[0]=Oi(a).call(a,l)}else{var u=o;s[o-1]===" "?o--:s[u]===" "&&u++;var h=Oi(s).call(s,0,o).join("");o==s.length&&i?this.lines.append(h,n):this.lines.newLine(h,n),s=Oi(s).call(s,u)}}}}]),e}(),Cg=["bold","ital","boldital","mono"],ree=function(){function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ht(this,e),this.body=r,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return dt(e,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),N$(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(Br(t.font)==="object"){var n=t.font.size;n!==void 0&&(this.baseSize=n)}}}},{key:"initFontOptions",value:function(t){var n=this;if(pr(Cg,function(i){n.fontOptions[i]={}}),e.parseFontString(this.fontOptions,t)){this.fontOptions.vadjust=0;return}pr(t,function(i,s){i!=null&&Br(i)!=="object"&&(n.fontOptions[s]=i)})}},{key:"constrain",value:function(t){var n={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=uc(t,"widthConstraint");if(typeof i=="number")n.maxWdt=Number(i),n.minWdt=Number(i);else if(Br(i)==="object"){var s=uc(t,["widthConstraint","maximum"]);typeof s=="number"&&(n.maxWdt=Number(s));var o=uc(t,["widthConstraint","minimum"]);typeof o=="number"&&(n.minWdt=Number(o))}var a=uc(t,"heightConstraint");if(typeof a=="number")n.minHgt=Number(a);else if(Br(a)==="object"){var l=uc(t,["heightConstraint","minimum"]);typeof l=="number"&&(n.minHgt=Number(l));var u=uc(t,["heightConstraint","valign"]);typeof u=="string"&&(u==="top"||u==="bottom")&&(n.valign=u)}return n}},{key:"update",value:function(t,n){this.setOptions(t,!0),this.propagateFonts(n),Zr(this.fontOptions,this.constrain(n)),this.fontOptions.chooser=bN("label",n)}},{key:"adjustSizes",value:function(t){var n=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=n,this.fontOptions.minWdt-=n);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,n){for(var i=0;i<n.length;++i)this.addFontToPile(t,n[i])}},{key:"addFontToPile",value:function(t,n){if(n!==void 0&&!(n.font===void 0||n.font===null)){var i=n.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var s=t[i],o={};e.parseFontString(o,s)&&(s=o),pr(s,function(a,l){a!==void 0&&(Object.prototype.hasOwnProperty.call(n,l)||(Er(Cg).call(Cg,l)!==-1?n[l]={}:n[l]=a))})}return n}},{key:"getFontOption",value:function(t,n,i){for(var s,o=0;o<t.length;++o){var a=t[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(s=a[n],s==null)continue;var l={};if(e.parseFontString(l,s)&&(s=l),Object.prototype.hasOwnProperty.call(s,i))return s[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,n){for(var i={},s=["color","size","face","mod","vadjust"],o=0;o<s.length;++o){var a=s[o];i[a]=this.getFontOption(t,n,a)}return i}},{key:"propagateFonts",value:function(t){var n=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var s=function(){var l=Cg[o],u=n.fontOptions[l],h=n.getFontOptions(i,l);pr(h,function(c,p){u[p]=c}),u.size=Number(u.size),u.vadjust=Number(u.vadjust)},o=0;o<Cg.length;++o)s()}},{key:"draw",value:function(t,n,i,s,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var l=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&l<this.elementOptions.scaling.label.drawThreshold-1||(l>=this.elementOptions.scaling.label.maxVisible&&(l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,s,o,n,i,a),this._drawBackground(t),this._drawText(t,n,this.size.yLine,a,l))}}},{key:"_drawBackground",value:function(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var n=this.getSize();t.fillRect(n.left,n.top,n.width,n.height)}}},{key:"_drawText",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,a=this._setAlignment(t,n,i,s),l=yn(a,2);n=l[0],i=l[1],t.textAlign="left",n=n-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(var u=0;u<this.lineCount;u++){var h=this.lines[u];if(h&&h.blocks){var c=0;this.isEdgeLabel||this.fontOptions.align==="center"?c+=(this.size.width-h.width)/2:this.fontOptions.align==="right"&&(c+=this.size.width-h.width);for(var p=0;p<h.blocks.length;p++){var m=h.blocks[p];t.font=m.font;var w=this._getColor(m.color,o,m.strokeColor),b=yn(w,2),T=b[0],_=b[1];m.strokeWidth>0&&(t.lineWidth=m.strokeWidth,t.strokeStyle=_,t.lineJoin="round"),t.fillStyle=T,m.strokeWidth>0&&t.strokeText(m.text,n+c,i+m.vadjust),t.fillText(m.text,n+c,i+m.vadjust),c+=m.width}i+=h.height}}}},{key:"_setAlignment",value:function(t,n,i,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){n=0,i=0;var o=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*o):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*o):t.textBaseline="middle"}else t.textBaseline=s;return[n,i]}},{key:"_getColor",value:function(t,n,i){var s=t||"#000000",o=i||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));s=Mo(s,a),o=Mo(o,a)}return[s,o]}},{key:"getTextSize",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(t,n,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=2,n=this.size.left,i=this.size.top-.5*t;if(this.isEdgeLabel){var s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":n=s,i=-this.size.height*.5;break;case"top":n=s,i=-(this.size.height+t);break;case"bottom":n=s,i=t;break}}var o={left:n,top:i,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,n,i),this.size.left=s-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,n,i,s){var o=function(h,c,p){return c==="normal"?p==="mod"?"":h[p]:h[c][p]!==void 0?h[c][p]:h[p]},a={color:o(this.fontOptions,s,"color"),size:o(this.fontOptions,s,"size"),face:o(this.fontOptions,s,"face"),mod:o(this.fontOptions,s,"mod"),vadjust:o(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(n||i)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,n,i));var l="";return a.mod!==void 0&&a.mod!==""&&(l+=a.mod+" "),l+=a.size+"px "+a.face,t.font=l.replace(/"/g,""),a.font=t.font,a.height=a.size,a}},{key:"differentState",value:function(t,n){return t!==this.selectedState||n!==this.hoverState}},{key:"_processLabelText",value:function(t,n,i,s){var o=new _vt(t,this,n,i);return o.process(s)}},{key:"_processLabel",value:function(t,n,i){if(!(this.labelDirty===!1&&!this.differentState(n,i))){var s=this._processLabelText(t,n,i,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=n,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var t=this.fontOptions.size*this.body.view.scale;return!(t<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,n){if(!n||typeof n!="string")return!1;var i=n.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),e}(),$C={},xvt={get exports(){return $C},set exports(e){$C=e}},Evt=_x,Svt=Rv,kvt=TypeError,Tvt=function(e){if(Evt(e))return e;throw kvt(Svt(e)+" is not a constructor")},Ivt=jt,Avt=qo,iT=Xm,Ovt=IX,lj=Tvt,Cvt=lo,uj=wi,Pvt=Bv,nee=Tr,wN=Avt("Reflect","construct"),Nvt=Object.prototype,Rvt=[].push,iee=nee(function(){function e(){}return!(wN(function(){},[],e)instanceof e)}),see=!nee(function(){wN(function(){})}),cj=iee||see;Ivt({target:"Reflect",stat:!0,forced:cj,sham:cj},{construct:function(r,t){lj(r),Cvt(t);var n=arguments.length<3?r:lj(arguments[2]);if(see&&!iee)return wN(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return iT(Rvt,i,t),new(iT(Ovt,r,i))}var s=n.prototype,o=Pvt(uj(s)?s:Nvt),a=iT(r,o,t);return uj(a)?a:o}});var Dvt=_r,Bvt=Dvt.Reflect.construct,Mvt=Bvt,Lvt=Mvt;(function(e){e.exports=Lvt})(xvt);var Ke=Pt($C),_C={},Fvt={get exports(){return _C},set exports(e){_C=e}},xC={},jvt={get exports(){return xC},set exports(e){xC=e}},Hvt=iQ,zvt=Hvt,Uvt=zvt,Wvt=Uvt;(function(e){e.exports=Wvt})(jvt);(function(e){e.exports=xC})(Fvt);var Kvt=Pt(_C),EC={},qvt={get exports(){return EC},set exports(e){EC=e}},SC={},Vvt={get exports(){return SC},set exports(e){SC=e}},Gvt=jt,Yvt=AQe;Gvt({target:"Object",stat:!0},{setPrototypeOf:Yvt});var Zvt=_r,Xvt=Zvt.Object.setPrototypeOf,Jvt=Xvt,Qvt=Jvt,egt=Qvt,tgt=egt,rgt=tgt,ngt=rgt;(function(e){e.exports=ngt})(Vvt);(function(e){e.exports=SC})(qvt);var kC=Pt(EC),TC={},igt={get exports(){return TC},set exports(e){TC=e}},IC={},sgt={get exports(){return IC},set exports(e){IC=e}},ogt=AX,agt=ogt,lgt=agt,ugt=lgt;(function(e){e.exports=ugt})(sgt);(function(e){e.exports=IC})(igt);var $N=Pt(TC);function AC(e,r){var t;return AC=kC?$N(t=kC).call(t):function(i,s){return i.__proto__=s,i},AC(e,r)}function Cr(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Kvt(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Px(e,"prototype",{writable:!1}),r&&AC(e,r)}function cgt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jr(e,r){if(r&&(Br(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cgt(e)}var OC={},fgt={get exports(){return OC},set exports(e){OC=e}},CC={},hgt={get exports(){return CC},set exports(e){CC=e}},dgt=QJ,pgt=dgt,vgt=pgt,ggt=vgt;(function(e){e.exports=ggt})(hgt);(function(e){e.exports=CC})(fgt);var fj=Pt(OC);function Tt(e){var r;return Tt=kC?$N(r=fj).call(r):function(n){return n.__proto__||fj(n)},Tt(e)}var Gh=function(){function e(r,t,n){ht(this,e),this.body=t,this.labelModule=n,this.setOptions(r),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&(Br(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,n){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(n)),Math.abs(this.height/2/Math.sin(n)))+i}},{key:"enableShadow",value:function(t,n){n.shadow&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,n){if(n.borderDashes!==!1)if(t.setLineDash!==void 0){var i=n.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,n){n.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1))}},{key:"needsRefresh",value:function(t,n){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,n)}},{key:"initContextForDraw",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=n.borderColor,t.fillStyle=n.color}},{key:"performStroke",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,n),t.stroke(),this.disableBorderDashes(t,n)),t.restore()}},{key:"performFill",value:function(t,n){t.save(),t.fillStyle=n.color,this.enableShadow(t,n),m0(t).call(t),this.disableShadow(t,n),t.restore(),this.performStroke(t,n)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,n,i,s,o){i!==void 0&&this.resize(i,s,o),this.left=t-this.width/2,this.top=n-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,n,i,s,o){this._updateBoundingBox(t,n,i,s,o)}},{key:"getDimensionsFromLabel",value:function(t,n,i){this.textSize=this.labelModule.getTextSize(t,n,i);var s=this.textSize.width,o=this.textSize.height,a=14;return s===0&&(s=a,o=a),{width:s,height:o}}}]),e}();function ygt(e){var r=mgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function mgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var bgt=function(e){Cr(t,e);var r=ygt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.width=a.width+this.margin.right+this.margin.left,this.height=a.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),OX(i,this.left,this.top,this.width,this.height,u.borderRadius),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"updateBoundingBox",value:function(i,s,o,a,l){this._updateBoundingBox(i,s,o,a,l);var u=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(u)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(s)),Math.abs(this.height/2/Math.sin(s)))+o}}]),t}(Gh);function wgt(e){var r=$gt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function $gt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var _N=function(e){Cr(t,e);var r=wgt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o.labelOffset=0,o.selected=!1,o}return dt(t,[{key:"setOptions",value:function(i,s,o){this.options=i,s===void 0&&o===void 0||this.setImages(s,o)}},{key:"setImages",value:function(i,s){s&&this.selected?(this.imageObj=s,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=s)}},{key:"switchImages",value:function(i){var s=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&s){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var i={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var s=this.options.imagePadding;Br(s)=="object"?(i.top=s.top,i.right=s.right,i.bottom=s.bottom,i.left=s.left):(i.top=s,i.right=s,i.bottom=s,i.left=s)}return i}},{key:"_resizeImage",value:function(){var i,s;if(this.options.shapeProperties.useImageSize===!1){var o=1,a=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:a=this.imageObj.height/this.imageObj.width),i=this.options.size*2*o,s=this.options.size*2*a}else{var l=this._getImagePadding();i=this.imageObj.width+l.left+l.right,s=this.imageObj.height+l.top+l.bottom}this.width=i,this.height=s,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,s,o,a){this.initContextForDraw(i,a),j4(i,s,o,a.size),this.performFill(i,a)}},{key:"_drawImageAtPosition",value:function(i,s){if(this.imageObj.width!=0){i.globalAlpha=s.opacity!==void 0?s.opacity:1,this.enableShadow(i,s);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var a=this._getImagePadding(),l=this.left+a.left,u=this.top+a.top,h=this.width-a.left-a.right,c=this.height-a.top-a.bottom;this.imageObj.drawImageAtPosition(i,o,l,u,h,c),this.disableShadow(i,s)}}},{key:"_drawImageLabel",value:function(i,s,o,a,l){var u=0;if(this.height!==void 0){u=this.height*.5;var h=this.labelModule.getTextSize(i,a,l);h.lineCount>=1&&(u+=h.height/2)}var c=o+u;this.options.label&&(this.labelOffset=u),this.labelModule.draw(i,s,c,a,l,"hanging")}}]),t}(Gh);function _gt(e){var r=xgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function xgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Egt=function(e){Cr(t,e);var r=_gt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=Math.max(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=l/2,this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this._drawRawCircle(i,s,o,u),this.updateBoundingBox(s,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,o,a,l)}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(_N);function Sgt(e){var r=kgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function kgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Tgt=function(e){Cr(t,e);var r=Sgt(t);function t(n,i,s,o,a){var l;return ht(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l,this.radius=.5*this.width;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){this.switchImages(a),this.resize();var h=s,c=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,h+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this._drawRawCircle(i,h,c,u),i.save(),i.clip(),this._drawImageAtPosition(i,u),i.restore(),this._drawImageLabel(i,h,c,a,l),this.updateBoundingBox(s,o)}},{key:"updateBoundingBox",value:function(i,s){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=s,this.boundingBox.left=i,this.boundingBox.right=i+this.options.size*2,this.boundingBox.bottom=s+this.options.size*2):(this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(_N);function Igt(e){var r=Agt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Agt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Qc=function(e){Cr(t,e);var r=Igt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,o)){var l,u;this.labelModule.getTextSize(i,s,o);var h=2*a.size;this.width=(l=this.customSizeWidth)!==null&&l!==void 0?l:h,this.height=(u=this.customSizeHeight)!==null&&u!==void 0?u:h,this.radius=.5*this.width}}},{key:"_drawShape",value:function(i,s,o,a,l,u,h,c){var p=this;return this.resize(i,u,h,c),this.left=a-this.width/2,this.top=l-this.height/2,this.initContextForDraw(i,c),KXe(s)(i,a,l,c.size),this.performFill(i,c),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(i.font=(u?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",i.fillText(this.options.icon.code,a,l)),{drawExternalLabel:function(){if(p.options.label!==void 0){p.labelModule.calculateLabelSize(i,u,h,a,l,"hanging");var w=l+.5*p.height+.5*p.labelModule.size.height;p.labelModule.draw(i,a,w,u,h,"hanging")}p.updateBoundingBox(a,l)}}}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),t}(Gh);function hj(e,r){var t=gn(e);if(Fc){var n=Fc(e);r&&(n=Is(n).call(n,function(i){return Xc(e,i).enumerable})),t.push.apply(t,n)}return t}function Ogt(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Wr(t=hj(Object(i),!0)).call(t,function(s){Nx(e,s,i[s])}):jc?Ox(e,jc(i)):Wr(n=hj(Object(i))).call(n,function(s){Cx(e,s,Xc(i,s))})}return e}function Cgt(e){var r=Pgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Pgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Ngt=function(e){Cr(t,e);var r=Cgt(t);function t(n,i,s,o){var a;return ht(this,t),a=r.call(this,n,i,s,o),a.ctxRenderer=o,a}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l,u),this.left=s-this.width/2,this.top=o-this.height/2,i.save();var h=this.ctxRenderer({ctx:i,id:this.options.id,x:s,y:o,state:{selected:a,hover:l},style:Ogt({},u),label:this.options.label});if(h.drawNode!=null&&h.drawNode(),i.restore(),h.drawExternalLabel){var c=h.drawExternalLabel;h.drawExternalLabel=function(){i.save(),c(),i.restore()}}return h.nodeDimensions&&(this.customSizeWidth=h.nodeDimensions.width,this.customSizeHeight=h.nodeDimensions.height),h}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function Rgt(e){var r=Dgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Dgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Bgt=function(e){Cr(t,e);var r=Rgt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i,s,o){if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=a.width+this.margin.right+this.margin.left;this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),CX(i,s-this.width/2,o-this.height/2,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Gh);function Mgt(e){var r=Lgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Lgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Fgt=function(e){Cr(t,e);var r=Mgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"diamond",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function jgt(e){var r=Hgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Hgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var zgt=function(e){Cr(t,e);var r=jgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"circle",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.options.size}}]),t}(Qc);function Ugt(e){var r=Wgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Wgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var dj=function(e){Cr(t,e);var r=Ugt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.height=a.height*2,this.width=a.width+a.height,this.radius=.5*this.width}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(i,u),XO(i,this.left,this.top,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,s,o,a,l)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.width*.5,a=this.height*.5,l=Math.sin(s)*o,u=Math.cos(s)*a;return o*a/Math.sqrt(l*l+u*u)}}]),t}(Gh);function Kgt(e){var r=qgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function qgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Vgt=function(e){Cr(t,e);var r=Kgt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){var h=this;return this.resize(i,a,l),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=o-this.height/2,this._icon(i,s,o,a,l,u),{drawExternalLabel:function(){if(h.options.label!==void 0){var p=5;h.labelModule.draw(i,h.left+h.iconSize.width/2+h.margin.left,o+h.height/2+p,a)}h.updateBoundingBox(s,o)}}}},{key:"updateBoundingBox",value:function(i,s){if(this.boundingBox.top=s-this.options.icon.size*.5,this.boundingBox.left=i-this.options.icon.size*.5,this.boundingBox.right=i+this.options.icon.size*.5,this.boundingBox.bottom=s+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(i,s,o,a,l,u){var h=Number(this.options.icon.size);this.options.icon.code!==void 0?(i.font=[this.options.icon.weight!=null?this.options.icon.weight:a?"bold":"",(this.options.icon.weight!=null&&a?5:0)+h+"px",this.options.icon.face].join(" "),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",this.enableShadow(i,u),i.fillText(this.options.icon.code,s,o),this.disableShadow(i,u)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Gh);function Ggt(e){var r=Ygt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Ygt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Zgt=function(e){Cr(t,e);var r=Ggt(t);function t(n,i,s,o,a){var l;return ht(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){i.save(),this.switchImages(a),this.resize();var h=s,c=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,h+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var p=this.options.borderWidth,m=this.options.borderWidthSelected||2*this.options.borderWidth,w=(a?m:p)/this.body.view.scale;i.lineWidth=Math.min(this.width,w),i.beginPath();var b=a?this.options.color.highlight.border:l?this.options.color.hover.border:this.options.color.border,T=a?this.options.color.highlight.background:l?this.options.color.hover.background:this.options.color.background;u.opacity!==void 0&&(b=Mo(b,u.opacity),T=Mo(T,u.opacity)),i.strokeStyle=b,i.fillStyle=T,i.rect(this.left-.5*i.lineWidth,this.top-.5*i.lineWidth,this.width+i.lineWidth,this.height+i.lineWidth),m0(i).call(i),this.performStroke(i,u),i.closePath()}this._drawImageAtPosition(i,u),this._drawImageLabel(i,h,c,a,l),this.updateBoundingBox(s,o),i.restore()}},{key:"updateBoundingBox",value:function(i,s){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=i,this.top=s):(this.left=i-this.width/2,this.top=s-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(_N);function Xgt(e){var r=Jgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Jgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Qgt=function(e){Cr(t,e);var r=Xgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"square",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function eyt(e){var r=tyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function tyt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var ryt=function(e){Cr(t,e);var r=eyt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"hexagon",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function nyt(e){var r=iyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function iyt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var syt=function(e){Cr(t,e);var r=nyt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"star",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function oyt(e){var r=ayt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function ayt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var lyt=function(e){Cr(t,e);var r=oyt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.textSize=this.labelModule.getTextSize(i,s,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.enableShadow(i,u),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l),this.disableShadow(i,u),this.updateBoundingBox(s,o,i,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Gh);function uyt(e){var r=cyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function cyt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var fyt=function(e){Cr(t,e);var r=uyt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangle",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function hyt(e){var r=dyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function dyt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var pyt=function(e){Cr(t,e);var r=hyt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangleDown",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Qc);function pj(e,r){var t=gn(e);if(Fc){var n=Fc(e);r&&(n=Is(n).call(n,function(i){return Xc(e,i).enumerable})),t.push.apply(t,n)}return t}function vj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Wr(t=pj(Object(i),!0)).call(t,function(s){Nx(e,s,i[s])}):jc?Ox(e,jc(i)):Wr(n=pj(Object(i))).call(n,function(s){Cx(e,s,Xc(i,s))})}return e}var qs=function(){function e(r,t,n,i,s,o){ht(this,e),this.options=Tc(s),this.globalOptions=s,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new ree(this.body,this.options,!1),this.setOptions(r)}return dt(e,[{key:"attachEdge",value:function(t){var n;Er(n=this.edges).call(n,t)===-1&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var n,i=Er(n=this.edges).call(n,t);if(i!=-1){var s;nu(s=this.edges).call(s,i,1)}}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(typeof t.color<"u"&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");e.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ca(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ca(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=QQ(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=bN("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),t.hidden!==void 0||t.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var n=this.options.opacity;t.borderColor=Mo(t.borderColor,n),t.color=Mo(t.color,n),t.shadowColor=Mo(t.shadowColor,n)}return t}},{key:"updateLabelModule",value:function(t){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),e.updateGroupOptions(this.options,vj(vj({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new bgt(this.options,this.body,this.labelModule);break;case"circle":this.shape=new Egt(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new Tgt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new Ngt(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new Bgt(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Fgt(this.options,this.body,this.labelModule);break;case"dot":this.shape=new zgt(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new dj(this.options,this.body,this.labelModule);break;case"icon":this.shape=new Vgt(this.options,this.body,this.labelModule);break;case"image":this.shape=new Zgt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Qgt(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new ryt(this.options,this.body,this.labelModule);break;case"star":this.shape=new syt(this.options,this.body,this.labelModule);break;case"text":this.shape=new lyt(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new fyt(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new pyt(this.options,this.body,this.labelModule);break;default:this.shape=new dj(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,n){return this.shape.distanceToBorder(t,n)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.size=this.options.scaling.min+s*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var n=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,n)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var n=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,n)}},{key:"getItemsOnPoint",value:function(t){var n=[];return this.labelModule.visible()&&bC(this.labelModule.getSize(),t)&&n.push({nodeId:this.id,labelId:0}),bC(this.shape.boundingBox,t)&&n.push({nodeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return t===void 0||t==="center"||t==="top-left"}},{key:"updateGroupOptions",value:function(t,n,i){var s;if(i!==void 0){var o=t.group;if(n!==void 0&&n.group!==void 0&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");var a=typeof o=="number"||typeof o=="string"&&o!="";if(a){var l=i.get(o);l.opacity!==void 0&&n.opacity===void 0&&(e.checkOpacity(l.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+l.opacity),l.opacity=void 0));var u=Is(s=lvt(n)).call(s,function(h){return n[h]!=null});u.push("font"),O$(u,t,l),t.color=lC(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(O$(a,t,n,i),e.checkMass(n),t.opacity!==void 0&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),n.opacity!==void 0&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),No(t,n,"shadow",s),n.color!==void 0&&n.color!==null){var l=lC(n.color);RQ(t.color,l)}else i===!0&&n.color===null&&(t.color=Tc(s.color));n.fixed!==void 0&&n.fixed!==null&&(typeof n.fixed=="boolean"?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(n.fixed.x!==void 0&&typeof n.fixed.x=="boolean"&&(t.fixed.x=n.fixed.x),n.fixed.y!==void 0&&typeof n.fixed.y=="boolean"&&(t.fixed.y=n.fixed.y))),i===!0&&n.font===null&&(t.font=Tc(s.font)),e.updateGroupOptions(t,n,o),n.scaling!==void 0&&No(t.scaling,n.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,n){if(t.mass!==void 0&&t.mass<=0){var i="";n!==void 0&&(i=" in node id: "+n),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",LQ),t.mass=1}}}]),e}();function vyt(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=gyt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function gyt(e,r){var t;if(e){if(typeof e=="string")return gj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gj(e,r)}}function gj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var yyt=function(){function e(r,t,n,i){var s,o=this;if(ht(this,e),this.body=r,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=nt(s=this.create).call(s,this),this.nodesListeners={add:function(l,u){o.add(u.items)},update:function(l,u){o.update(u.items,u.data,u.oldData)},remove:function(l,u){o.remove(u.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(l,u,h,c){if(u===l)return .5;var p=1/(u-l);return Math.max(0,(c-l)*p)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Tc(this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t,n,i=this;this.body.emitter.on("refreshNodes",nt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",nt(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",function(){pr(i.nodesListeners,function(s,o){i.body.data.nodes&&i.body.data.nodes.off(o,s)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){if(qs.parseOptions(this.options,t),t.opacity!==void 0&&(pC(t.opacity)||!Zf(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(var n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&this.body.nodes[n].updateShape();if(typeof t.font<"u"||typeof t.widthConstraint<"u"||typeof t.heightConstraint<"u")for(var i=0,s=gn(this.body.nodes);i<s.length;i++){var o=s[i];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(t.size!==void 0)for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.body.nodes[a].needsRefresh();(t.hidden!==void 0||t.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.data.nodes;if(cX("id",t))this.body.data.nodes=t;else if(Fr(t))this.body.data.nodes=new va,this.body.data.nodes.add(t);else if(!t)this.body.data.nodes=new va;else throw new TypeError("Array or DataSet expected");if(i&&pr(this.nodesListeners,function(a,l){i.off(l,a)}),this.body.nodes={},this.body.data.nodes){var s=this;pr(this.nodesListeners,function(a,l){s.body.data.nodes.on(l,a)});var o=this.body.data.nodes.getIds();this.add(o,!0)}n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i,s=[],o=0;o<t.length;o++){i=t[o];var a=this.body.data.nodes.get(i),l=this.create(a);s.push(l),this.body.nodes[i]=l}this.layoutEngine.positionInitially(s),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,n,i){for(var s=this.body.nodes,o=!1,a=0;a<t.length;a++){var l=t[a],u=s[l],h=n[a];u!==void 0?u.setOptions(h)&&(o=!0):(o=!0,u=this.create(h),s[l]=u)}!o&&i!==void 0&&(o=Mpt(n).call(n,function(c,p){var m=i[p];return m&&m.level!==c.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var n=this.body.nodes,i=0;i<t.length;i++){var s=t[i];delete n[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qs;return new n(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;pr(this.body.nodes,function(i,s){var o=t.body.data.nodes.get(s);o!==void 0&&(n===!0&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var n={};if(t!==void 0){if(Fr(t)===!0){for(var i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){var s=this.body.nodes[t[i]];n[t[i]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[t]!==void 0){var o=this.body.nodes[t];n[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];n[this.body.nodeIndices[a]]={x:Math.round(l.x),y:Math.round(l.y)}}return n}},{key:"getPosition",value:function(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t=[],n=this.body.data.nodes.getDataSet(),i=vyt(n.get()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.id,l=this.body.nodes[a],u=Math.round(l.x),h=Math.round(l.y);(o.x!==u||o.y!==h)&&t.push({id:a,x:u,y:h})}}catch(c){i.e(c)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,n){var i=[];if(this.body.nodes[t]!==void 0)for(var s=this.body.nodes[t],o={},a=0;a<s.edges.length;a++){var l=s.edges[a];n!=="to"&&l.toId==s.id?o[l.fromId]===void 0&&(i.push(l.fromId),o[l.fromId]=!0):n!=="from"&&l.fromId==s.id&&o[l.toId]===void 0&&(i.push(l.toId),o[l.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var n=[];if(this.body.nodes[t]!==void 0)for(var i=this.body.nodes[t],s=0;s<i.edges.length;s++)n.push(i.edges[s].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return n}},{key:"moveNode",value:function(t,n,i){var s=this;this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(n),this.body.nodes[t].y=Number(i),ul(function(){s.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),e}(),PC={},myt={get exports(){return PC},set exports(e){PC=e}},NC={},byt={get exports(){return NC},set exports(e){NC=e}},yj=$i,wyt=function(e){return e!==void 0&&(yj(e,"value")||yj(e,"writable"))},$yt=jt,_yt=oo,xyt=wi,Eyt=lo,Syt=wyt,kyt=Pv,Tyt=$x;function oee(e,r){var t=arguments.length<3?e:arguments[2],n,i;if(Eyt(e)===t)return e[r];if(n=kyt.f(e,r),n)return Syt(n)?n.value:n.get===void 0?void 0:_yt(n.get,t);if(xyt(i=Tyt(e)))return oee(i,r,t)}$yt({target:"Reflect",stat:!0},{get:oee});var Iyt=_r,Ayt=Iyt.Reflect.get,Oyt=Ayt,Cyt=Oyt,Pyt=Cyt,Nyt=Pyt,Ryt=Nyt,Dyt=Ryt;(function(e){e.exports=Dyt})(byt);(function(e){e.exports=NC})(myt);var mj=Pt(PC),RC={},Byt={get exports(){return RC},set exports(e){RC=e}},DC={},Myt={get exports(){return DC},set exports(e){DC=e}},Lyt=PJ,Fyt=Lyt,jyt=Fyt,Hyt=jyt;(function(e){e.exports=Hyt})(Myt);(function(e){e.exports=DC})(Byt);var zyt=Pt(RC);function Uyt(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Tt(e),e!==null););return e}function fw(){if(typeof Reflect<"u"&&mj){var e;fw=$N(e=mj).call(e)}else fw=function(t,n,i){var s=Uyt(t,n);if(s){var o=zyt(s,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return fw.apply(this,arguments)}var BC={},Wyt={get exports(){return BC},set exports(e){BC=e}},Kyt=jt,bj=Math.hypot,qyt=Math.abs,Vyt=Math.sqrt,Gyt=!!bj&&bj(1/0,NaN)!==1/0;Kyt({target:"Math",stat:!0,arity:2,forced:Gyt},{hypot:function(r,t){for(var n=0,i=0,s=arguments.length,o=0,a,l;i<s;)a=qyt(arguments[i++]),o<a?(l=o/a,n=n*l*l+1,o=a):a>0?(l=a/o,n+=l*l):n+=a;return o===1/0?1/0:o*Vyt(n)}});var Yyt=_r,Zyt=Yyt.Math.hypot,Xyt=Zyt,Jyt=Xyt;(function(e){e.exports=Jyt})(Wyt);var Qyt=Pt(BC);function aee(e){var r=emt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function emt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Cn=function(){function e(){ht(this,e)}return dt(e,null,[{key:"transform",value:function(t,n){Fr(t)||(t=[t]);for(var i=n.point.x,s=n.point.y,o=n.angle,a=n.length,l=0;l<t.length;++l){var u=t[l],h=u.x*Math.cos(o)-u.y*Math.sin(o),c=u.x*Math.sin(o)+u.y*Math.cos(o);u.x=i+a*h,u.y=s+a*c}}},{key:"drawPath",value:function(t,n){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)t.lineTo(n[i].x,n[i].y);t.closePath()}}]),e}(),tmt=function(e){Cr(t,e);var r=aee(t);function t(){return ht(this,t),r.apply(this,arguments)}return dt(t,null,[{key:"draw",value:function(i,s){if(s.image){i.save(),i.translate(s.point.x,s.point.y),i.rotate(Math.PI/2+s.angle);var o=s.imageWidth!=null?s.imageWidth:s.image.width,a=s.imageHeight!=null?s.imageHeight:s.image.height;s.image.drawImageAtPosition(i,1,-o/2,0,o,a),i.restore()}return!1}}]),t}(Cn),rmt=function(e){Cr(t,e);var r=aee(t);function t(){return ht(this,t),r.apply(this,arguments)}return dt(t,null,[{key:"draw",value:function(i,s){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Cn.transform(o,s),Cn.drawPath(i,o),!0}}]),t}(Cn),nmt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),imt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};Cn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle-s/2,a=n.angle+s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),smt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i={x:-.3,y:0};Cn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle+s/2,a=n.angle+3*s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),omt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),amt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),lmt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};return Cn.transform(i,n),j4(t,i.x,i.y,n.length*.4),!0}}]),e}(),umt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),cmt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),fmt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),hmt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Cn.transform(i,n),Cn.drawPath(t,i),!0}}]),e}(),lee=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i;switch(n.type&&(i=n.type.toLowerCase()),i){case"image":return tmt.draw(t,n);case"circle":return lmt.draw(t,n);case"box":return cmt.draw(t,n);case"crow":return nmt.draw(t,n);case"curve":return imt.draw(t,n);case"diamond":return fmt.draw(t,n);case"inv_curve":return smt.draw(t,n);case"triangle":return omt.draw(t,n);case"inv_triangle":return amt.draw(t,n);case"bar":return umt.draw(t,n);case"vee":return hmt.draw(t,n);case"arrow":default:return rmt.draw(t,n)}}}]),e}();function wj(e,r){var t=gn(e);if(Fc){var n=Fc(e);r&&(n=Is(n).call(n,function(i){return Xc(e,i).enumerable})),t.push.apply(t,n)}return t}function $j(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Wr(t=wj(Object(i),!0)).call(t,function(s){Nx(e,s,i[s])}):jc?Ox(e,jc(i)):Wr(n=wj(Object(i))).call(n,function(s){Cx(e,s,Xc(i,s))})}return e}var uee=function(){function e(r,t,n){ht(this,e),this._body=t,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(r),this.fromPoint=this.from,this.toPoint=this.to}return dt(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,n),t.lineWidth=n.width,n.dashes!==!1?this._drawDashedLine(t,n,o):this._drawLine(t,n,o)}},{key:"_drawLine",value:function(t,n,i,s,o){if(this.from!=this.to)this._line(t,n,i,s,o);else{var a=this._getCircleData(t),l=yn(a,3),u=l[0],h=l[1],c=l[2];this._circle(t,n,u,h,c)}}},{key:"_drawDashedLine",value:function(t,n,i,s,o){t.lineCap="round";var a=Fr(n.dashes)?n.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,n,i);else{var l=this._getCircleData(t),u=yn(l,3),h=u[0],c=u[1],p=u[2];this._circle(t,n,h,c,p)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)PX(t,this.from.x,this.from.y,this.to.x,this.to.y,a);else{var m=this._getCircleData(t),w=yn(m,3),b=w[0],T=w[1],_=w[2];this._circle(t,n,b,T,_)}this.enableShadow(t,n),t.stroke(),this.disableShadow(t,n)}}},{key:"findBorderPosition",value:function(t,n,i){return this.from!=this.to?this._findBorderPosition(t,n,i):this._findBorderPositionCircle(t,n,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var n,i=Oi(n=this._getCircleData(t)).call(n,0,2),s=yn(i,2),o=s[0],a=s[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var n=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);var i=eee(t,this.options.selfReference.angle,n,this.from);return[i.x,i.y,n]}},{key:"_pointOnCircle",value:function(t,n,i,s){var o=s*2*Math.PI;return{x:t+i*Math.cos(o),y:n-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,n,i){var s=i.x,o=i.y,a=i.low,l=i.high,u=i.direction,h=10,c=this.options.selfReference.size,p=.05,m,w=(a+l)*.5,b=0;this.options.arrowStrikethrough===!0&&(u===-1?b=this.options.endPointOffset.from:u===1&&(b=this.options.endPointOffset.to));var T=0;do{w=(a+l)*.5,m=this._pointOnCircle(s,o,c,w);var _=Math.atan2(t.y-m.y,t.x-m.x),A=t.distanceToBorder(n,_)+b,x=Math.sqrt(Math.pow(m.x-t.x,2)+Math.pow(m.y-t.y,2)),I=A-x;if(Math.abs(I)<p)break;I>0?u>0?a=w:l=w:u>0?l=w:a=w,++T}while(a<=l&&T<h);return $j($j({},m),{},{t:w})}},{key:"getLineWidth",value:function(t,n){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):n===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,n){if(n.inheritsColor!==!1){if(n.inheritsColor==="both"&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=Mo(this.from.options.color.border,n.opacity),o=Mo(this.to.options.color.border,n.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),i.addColorStop(0,s),i.addColorStop(1,o),i}return n.inheritsColor==="to"?Mo(this.to.options.color.border,n.opacity):Mo(this.from.options.color.border,n.opacity)}else return Mo(n.color,n.opacity)}},{key:"_circle",value:function(t,n,i,s,o){this.enableShadow(t,n);var a=0,l=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var u=this.options.selfReference.angle,h=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:h,direction:-1}),p=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:h,direction:1});a=Math.atan2(c.y-s,c.x-i),l=Math.atan2(p.y-s,p.x-i)}t.beginPath(),t.arc(i,s,o,a,l,!1),t.stroke(),this.disableShadow(t,n)}},{key:"getDistanceToEdge",value:function(t,n,i,s,o,a){if(this.from!=this.to)return this._getDistanceToEdge(t,n,i,s,o,a);var l=this._getCircleData(void 0),u=yn(l,3),h=u[0],c=u[1],p=u[2],m=h-o,w=c-a;return Math.abs(Math.sqrt(m*m+w*w)-p)}},{key:"_getDistanceToLine",value:function(t,n,i,s,o,a){var l=i-t,u=s-n,h=l*l+u*u,c=((o-t)*l+(a-n)*u)/h;c>1?c=1:c<0&&(c=0);var p=t+c*l,m=n+c*u,w=p-o,b=m-a;return Math.sqrt(w*w+b*b)}},{key:"getArrowData",value:function(t,n,i,s,o,a){var l,u,h,c,p,m,w,b=a.width;n==="from"?(h=this.from,c=this.to,p=a.fromArrowScale<0,m=Math.abs(a.fromArrowScale),w=a.fromArrowType):n==="to"?(h=this.to,c=this.from,p=a.toArrowScale<0,m=Math.abs(a.toArrowScale),w=a.toArrowType):(h=this.to,c=this.from,p=a.middleArrowScale<0,m=Math.abs(a.middleArrowScale),w=a.middleArrowType);var T=15*m+3*b;if(h!=c){var _=Qyt(h.x-c.x,h.y-c.y),A=T/_;if(n!=="middle")if(this.options.smooth.enabled===!0){var x=this._findBorderPosition(h,t,{via:i}),I=this.getPoint(x.t+A*(n==="from"?1:-1),i);l=Math.atan2(x.y-I.y,x.x-I.x),u=x}else l=Math.atan2(h.y-c.y,h.x-c.x),u=this._findBorderPosition(h,t);else{var O=(p?-A:A)/2,C=this.getPoint(.5+O,i),g=this.getPoint(.5-O,i);l=Math.atan2(C.y-g.y,C.x-g.x),u=this.getPoint(.5,i)}}else{var R=this._getCircleData(t),M=yn(R,3),U=M[0],V=M[1],ne=M[2];if(n==="from"){var re=this.options.selfReference.angle,Q=this.options.selfReference.angle+Math.PI,F=this._findBorderPositionCircle(this.from,t,{x:U,y:V,low:re,high:Q,direction:-1});l=F.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=F}else if(n==="to"){var Z=this.options.selfReference.angle,se=this.options.selfReference.angle+Math.PI,Ee=this._findBorderPositionCircle(this.from,t,{x:U,y:V,low:Z,high:se,direction:1});l=Ee.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=Ee}else{var ye=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(U,V,ne,ye),l=ye*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var Pe=u.x-T*.9*Math.cos(l),Ue=u.y-T*.9*Math.sin(l),Ge={x:Pe,y:Ue};return{point:u,core:Ge,angle:l,length:T,type:w}}},{key:"drawArrowHead",value:function(t,n,i,s,o){t.strokeStyle=this.getColor(t,n),t.fillStyle=t.strokeStyle,t.lineWidth=n.width;var a=lee.draw(t,o);a&&(this.enableShadow(t,n),m0(t).call(t),this.disableShadow(t,n))}},{key:"enableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,n){if(n.background!==!1){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=n.backgroundColor,t.lineWidth=n.backgroundSize,this.setStrokeDashed(t,n.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,n.dashes)}}},{key:"setStrokeDashed",value:function(t,n){if(n!==!1)if(t.setLineDash!==void 0){var i=Fr(n)?n:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function _j(e,r){var t=gn(e);if(Fc){var n=Fc(e);r&&(n=Is(n).call(n,function(i){return Xc(e,i).enumerable})),t.push.apply(t,n)}return t}function xj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Wr(t=_j(Object(i),!0)).call(t,function(s){Nx(e,s,i[s])}):jc?Ox(e,jc(i)):Wr(n=_j(Object(i))).call(n,function(s){Cx(e,s,Xc(i,s))})}return e}function dmt(e){var r=pmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function pmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var xN=function(e){Cr(t,e);var r=dmt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_findBorderPositionBezier",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),a=10,l=.2,u=!1,h=1,c=0,p=this.to,m,w,b=this.options.endPointOffset?this.options.endPointOffset.to:0;i.id===this.from.id&&(p=this.from,u=!0,b=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(b=0);var T=0;do{w=(c+h)*.5,m=this.getPoint(w,o);var _=Math.atan2(p.y-m.y,p.x-m.x),A=p.distanceToBorder(s,_)+b,x=Math.sqrt(Math.pow(m.x-p.x,2)+Math.pow(m.y-p.y,2)),I=A-x;if(Math.abs(I)<l)break;I<0?u===!1?c=w:h=w:u===!1?h=w:c=w,++T}while(c<=h&&T<a);return xj(xj({},m),{},{t:w})}},{key:"_getDistanceToBezierEdge",value:function(i,s,o,a,l,u,h){var c=1e9,p,m,w,b,T,_=i,A=s;for(m=1;m<10;m++)w=.1*m,b=Math.pow(1-w,2)*i+2*w*(1-w)*h.x+Math.pow(w,2)*o,T=Math.pow(1-w,2)*s+2*w*(1-w)*h.y+Math.pow(w,2)*a,m>0&&(p=this._getDistanceToLine(_,A,b,T,l,u),c=p<c?p:c),_=b,A=T;return c}},{key:"_bezierCurve",value:function(i,s,o,a){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?a!=null&&a.x!=null?i.bezierCurveTo(o.x,o.y,a.x,a.y,this.toPoint.x,this.toPoint.y):i.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):i.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(i,s),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),t}(uee);function vmt(e){var r=gmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function gmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Ej=function(e){Cr(t,e);var r=vmt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return dt(t,[{key:"setOptions",value:function(i){fw(Tt(t.prototype),"setOptions",this).call(this,i);var s=!1;this.options.physics!==i.physics&&(s=!0),this.options=i,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),s===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var i="edgeId:"+this.id,s=this._body.functions.createNode({id:i,shape:"circle",physics:!0,hidden:!0});this._body.nodes[i]=s,this.via=s,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),a=yn(o,3),l=a[0],u=a[1],h=a[2],c=2*Math.PI*(1-i);return{x:l+h*Math.sin(c),y:u+h-h*(1-Math.cos(c))}}else return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*s.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*s.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s,this.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToBezierEdge(i,s,o,a,l,u,this.via)}}]),t}(xN);function ymt(e){var r=mmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function mmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Sj=function(e){Cr(t,e);var r=ymt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var i=this.options.smooth.roundness,s=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),a=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){var l,u;o<=a?l=u=i*a:l=u=i*o,this.from.x>this.to.x&&(l=-l),this.from.y>=this.to.y&&(u=-u);var h=this.from.x+l,c=this.from.y+u;return s==="discrete"&&(o<=a?h=o<i*a?this.from.x:h:c=a<i*o?this.from.y:c),{x:h,y:c}}else if(s==="straightCross"){var p=(1-i)*o,m=(1-i)*a;return o<=a?(p=0,this.from.y<this.to.y&&(m=-m)):(this.from.x<this.to.x&&(p=-p),m=0),{x:this.to.x+p,y:this.to.y+m}}else if(s==="horizontal"){var w=(1-i)*o;return this.from.x<this.to.x&&(w=-w),{x:this.to.x+w,y:this.from.y}}else if(s==="vertical"){var b=(1-i)*a;return this.from.y<this.to.y&&(b=-b),{x:this.from.x,y:this.to.y+b}}else if(s==="curvedCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var T=Math.sqrt(o*o+a*a),_=Math.PI,A=Math.atan2(a,o),x=(A+(i*.5+.5)*_)%(2*_);return{x:this.from.x+(i*.5+.5)*T*Math.sin(x),y:this.from.y+(i*.5+.5)*T*Math.cos(x)}}else if(s==="curvedCCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var I=Math.sqrt(o*o+a*a),O=Math.PI,C=Math.atan2(a,o),g=(C+(-i*.5+.5)*O)%(2*O);return{x:this.from.x+(i*.5+.5)*I*Math.sin(g),y:this.from.y+(i*.5+.5)*I*Math.cos(g)}}else{var R,M;o<=a?R=M=i*a:R=M=i*o,this.from.x>this.to.x&&(R=-R),this.from.y>=this.to.y&&(M=-M);var U=this.from.x+R,V=this.from.y+M;return o<=a?this.from.x<=this.to.x?U=this.to.x<U?this.to.x:U:U=this.to.x>U?this.to.x:U:this.from.y>=this.to.y?V=this.to.y>V?this.to.y:V:V=this.to.y<V?this.to.y:V,{x:U,y:V}}}},{key:"_findBorderPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(i,s,o.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(i,s,o,a,l,u,h)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=i,a=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*s.x+Math.pow(o,2)*this.toPoint.x,l=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*s.y+Math.pow(o,2)*this.toPoint.y;return{x:a,y:l}}}]),t}(xN);function bmt(e){var r=wmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function wmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var $mt=function(e){Cr(t,e);var r=bmt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_getDistanceToBezierEdge2",value:function(i,s,o,a,l,u,h,c){for(var p=1e9,m=i,w=s,b=[0,0,0,0],T=1;T<10;T++){var _=.1*T;b[0]=Math.pow(1-_,3),b[1]=3*_*Math.pow(1-_,2),b[2]=3*Math.pow(_,2)*(1-_),b[3]=Math.pow(_,3);var A=b[0]*i+b[1]*h.x+b[2]*c.x+b[3]*o,x=b[0]*s+b[1]*h.y+b[2]*c.y+b[3]*a;if(T>0){var I=this._getDistanceToLine(m,w,A,x,l,u);p=I<p?I:p}m=A,w=x}return p}}]),t}(xN);function _mt(e){var r=xmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function xmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var kj=function(e){Cr(t,e);var r=_mt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_line",value:function(i,s,o){var a=o[0],l=o[1];this._bezierCurve(i,s,a,l)}},{key:"_getViaCoordinates",value:function(){var i=this.from.x-this.to.x,s=this.from.y-this.to.y,o,a,l,u,h=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(a=this.from.y,u=this.to.y,o=this.from.x-h*i,l=this.to.x+h*i):(a=this.from.y-h*s,u=this.to.y+h*s,o=this.from.x,l=this.to.x),[{x:o,y:a},{x:l,y:u}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),c=yn(h,2),p=c[0],m=c[1];return this._getDistanceToBezierEdge2(i,s,o,a,l,u,p,m)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=yn(s,2),a=o[0],l=o[1],u=i,h=[Math.pow(1-u,3),3*u*Math.pow(1-u,2),3*Math.pow(u,2)*(1-u),Math.pow(u,3)],c=h[0]*this.fromPoint.x+h[1]*a.x+h[2]*l.x+h[3]*this.toPoint.x,p=h[0]*this.fromPoint.y+h[1]*a.y+h[2]*l.y+h[3]*this.toPoint.y;return{x:c,y:p}}}]),t}($mt);function Emt(e){var r=Smt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Smt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Tj=function(e){Cr(t,e);var r=Emt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_line",value:function(i,s){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),i.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(i){return{x:(1-i)*this.fromPoint.x+i*this.toPoint.x,y:(1-i)*this.fromPoint.y+i*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){var o=this.to,a=this.from;i.id===this.from.id&&(o=this.from,a=this.to);var l=Math.atan2(o.y-a.y,o.x-a.x),u=o.x-a.x,h=o.y-a.y,c=Math.sqrt(u*u+h*h),p=i.distanceToBorder(s,l),m=(c-p)/c;return{x:(1-m)*a.x+m*o.x,y:(1-m)*a.y+m*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToLine(i,s,o,a,l,u)}}]),t}(uee),_p=function(){function e(r,t,n,i,s){if(ht(this,e),t===void 0)throw new Error("No body provided");this.options=Tc(i),this.globalOptions=i,this.defaultOptions=s,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new ree(this.body,this.options,!0),this.setOptions(r)}return dt(e,[{key:"setOptions",value:function(t){if(t){var n=typeof t.physics<"u"&&this.options.physics!==t.physics||typeof t.hidden<"u"&&(this.options.hidden||!1)!==(t.hidden||!1)||typeof t.from<"u"&&this.options.from!==t.from||typeof t.to<"u"&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=QQ(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=bN("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,n=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:n,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var a=this.options.selectionWidth;typeof a=="function"?o.width=a(o.width):typeof a=="number"&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var l=this.options.hoverWidth;typeof l=="function"?o.width=l(o.width):typeof l=="number"&&(o.width+=l),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var n=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,n=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof Ej&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof kj&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof Sj&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof Tj&&t.type.enabled===!1)&&(i=!1),i===!0&&(n=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(n=!0,this.edgeType=new Ej(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new kj(this.options,this.body,this.labelModule):this.edgeType=new Sj(this.options,this.body,this.labelModule):this.edgeType=new Tj(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),n}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.width=this.options.scaling.min+s*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,n,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,n.fromArrow&&(s.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),n.fromArrowSrc&&(s.from.image=this.imagelist.load(n.fromArrowSrc)),n.fromArrowImageWidth&&(s.from.imageWidth=n.fromArrowImageWidth),n.fromArrowImageHeight&&(s.from.imageHeight=n.fromArrowImageHeight)),n.toArrow&&(s.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),n.toArrowSrc&&(s.to.image=this.imagelist.load(n.toArrowSrc)),n.toArrowImageWidth&&(s.to.imageWidth=n.toArrowImageWidth),n.toArrowImageHeight&&(s.to.imageHeight=n.toArrowImageHeight)),n.middleArrow&&(s.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,n),n.middleArrowSrc&&(s.middle.image=this.imagelist.load(n.middleArrowSrc)),n.middleArrowImageWidth&&(s.middle.imageWidth=n.middleArrowImageWidth),n.middleArrowImageHeight&&(s.middle.imageHeight=n.middleArrowImageHeight)),n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.to)}}},{key:"drawLabel",value:function(t,n){if(this.options.label!==void 0){var i=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover);var o;if(i.id!=s.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,n),t.save();var a=this._getRotation(t);a.angle!=0&&(t.translate(a.x,a.y),t.rotate(a.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var l=eee(t,this.options.selfReference.angle,this.options.selfReference.size,i);o=this._pointOnCircle(l.x,l.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var n=[];if(this.labelModule.visible()){var i=this._getRotation();bC(this.labelModule.getSize(),t,i)&&n.push({edgeId:this.id,labelId:0})}var s={left:t.x,top:t.y};return this.isOverlappingWith(s)&&n.push({edgeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){if(this.connected){var n=10,i=this.from.x,s=this.from.y,o=this.to.x,a=this.to.y,l=t.left,u=t.top,h=this.edgeType.getDistanceToEdge(i,s,o,a,l,u);return h<n}else return!1}},{key:"_getRotation",value:function(t){var n=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,n);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var s={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;var o=this.from.y-this.to.y,a=this.from.x-this.to.x,l=Math.atan2(o,a);return(l<-1&&a<0||l>0&&a<0)&&(l+=Math.PI),s.angle=l,s}},{key:"_pointOnCircle",value:function(t,n,i,s){return{x:t+i*Math.cos(s),y:n-i*Math.sin(s)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(zv(a,t,n,i),n.endPointOffset!==void 0&&n.endPointOffset.from!==void 0&&(Zf(n.endPointOffset.from)?t.endPointOffset.from=n.endPointOffset.from:(t.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),n.endPointOffset!==void 0&&n.endPointOffset.to!==void 0&&(Zf(n.endPointOffset.to)?t.endPointOffset.to=n.endPointOffset.to:(t.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),N$(n.label)?t.label=n.label:N$(t.label)||(t.label=void 0),No(t,n,"smooth",s),No(t,n,"shadow",s),No(t,n,"background",s),n.dashes!==void 0&&n.dashes!==null?t.dashes=n.dashes:i===!0&&n.dashes===null&&(t.dashes=hh(s.dashes)),n.scaling!==void 0&&n.scaling!==null?(n.scaling.min!==void 0&&(t.scaling.min=n.scaling.min),n.scaling.max!==void 0&&(t.scaling.max=n.scaling.max),No(t.scaling,n.scaling,"label",s.scaling)):i===!0&&n.scaling===null&&(t.scaling=hh(s.scaling)),n.arrows!==void 0&&n.arrows!==null)if(typeof n.arrows=="string"){var l=n.arrows.toLowerCase();t.arrows.to.enabled=Er(l).call(l,"to")!=-1,t.arrows.middle.enabled=Er(l).call(l,"middle")!=-1,t.arrows.from.enabled=Er(l).call(l,"from")!=-1}else if(Br(n.arrows)==="object")No(t.arrows,n.arrows,"to",s.arrows),No(t.arrows,n.arrows,"middle",s.arrows),No(t.arrows,n.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+y0(n.arrows));else i===!0&&n.arrows===null&&(t.arrows=hh(s.arrows));if(n.color!==void 0&&n.color!==null){var u=dc(n.color)?{color:n.color,highlight:n.color,hover:n.color,inherit:!1,opacity:1}:n.color,h=t.color;if(o)Zr(h,s.color,!1,i);else for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&delete h[c];if(dc(h))h.color=h,h.highlight=h,h.hover=h,h.inherit=!1,u.opacity===void 0&&(h.opacity=1);else{var p=!1;u.color!==void 0&&(h.color=u.color,p=!0),u.highlight!==void 0&&(h.highlight=u.highlight,p=!0),u.hover!==void 0&&(h.hover=u.hover,p=!0),u.inherit!==void 0&&(h.inherit=u.inherit),u.opacity!==void 0&&(h.opacity=Math.min(1,Math.max(0,u.opacity))),p===!0?h.inherit=!1:h.inherit===void 0&&(h.inherit="from")}}else i===!0&&n.color===null&&(t.color=Tc(s.color));i===!0&&n.font===null&&(t.font=Tc(s.font)),Object.prototype.hasOwnProperty.call(n,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=n.selfReferenceSize)}}]),e}(),kmt=function(){function e(r,t,n){var i,s=this;ht(this,e),this.body=r,this.images=t,this.groups=n,this.body.functions.createEdge=nt(i=this.create).call(i,this),this.edgesListeners={add:function(a,l){s.add(l.items)},update:function(a,l){s.update(l.items)},remove:function(a,l){s.remove(l.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,l,u,h){if(l===a)return .5;var c=1/(l-a);return Math.max(0,(h-a)*c)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Zr(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this,n,i;this.body.emitter.on("_forceDisableDynamicCurves",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");var a=!1;for(var l in t.body.edges)if(Object.prototype.hasOwnProperty.call(t.body.edges,l)){var u=t.body.edges[l],h=t.body.data.edges.get(l);if(h!=null){var c=h.smooth;c!==void 0&&c.enabled===!0&&c.type==="dynamic"&&(s===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:s}}),a=!0)}}o===!0&&a===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",nt(n=this.refresh).call(n,this)),this.body.emitter.on("refresh",nt(i=this.refresh).call(i,this)),this.body.emitter.on("destroy",function(){pr(t.edgesListeners,function(s,o){t.body.data.edges&&t.body.data.edges.off(o,s)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){_p.parseOptions(this.options,t,!0,this.defaultOptions,!0);var n=!1;if(t.smooth!==void 0)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(n=this.body.edges[i].updateEdgeType()||n);if(t.font!==void 0)for(var s in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,s)&&this.body.edges[s].updateLabelModule();(t.hidden!==void 0||t.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.body.data.edges;if(cX("id",t))this.body.data.edges=t;else if(Fr(t))this.body.data.edges=new va,this.body.data.edges.add(t);else if(!t)this.body.data.edges=new va;else throw new TypeError("Array or DataSet expected");if(s&&pr(this.edgesListeners,function(a,l){s.off(l,a)}),this.body.edges={},this.body.data.edges){pr(this.edgesListeners,function(a,l){n.body.data.edges.on(l,a)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.edges,s=this.body.data.edges,o=0;o<t.length;o++){var a=t[o],l=i[a];l&&l.disconnect();var u=s.get(a,{showInternalIds:!0});i[a]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var n=this.body.edges,i=this.body.data.edges,s=!1,o=0;o<t.length;o++){var a=t[o],l=i.get(a),u=n[a];u!==void 0?(u.disconnect(),s=u.setOptions(l)||s,u.connect()):(this.body.edges[a]=this.create(l),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.length!==0){var i=this.body.edges;pr(t,function(s){var o=i[s];o!==void 0&&o.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;pr(this.body.edges,function(n,i){var s=t.body.data.edges.get(i);s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(t){return new _p(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,n=this.body.nodes,i=this.body.edges;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var s=i[t];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(t){var n=[];if(this.body.edges[t]!==void 0){var i=this.body.edges[t];i.fromId!==void 0&&n.push(i.fromId),i.toId!==void 0&&n.push(i.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,n=[];pr(this.body.edges,function(i,s){var o=t.body.nodes[i.toId],a=t.body.nodes[i.fromId];o!==void 0&&o.isCluster===!0||a!==void 0&&a.isCluster===!0||(o===void 0||a===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(t!=null){var n=this.body.edges,i=[];Wr(t).call(t,function(s,o){var a=n[o];a===void 0&&i.push(o)}),this.add(i,!0)}}}]),e}(),cee=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=Mx("BARNES HUT SOLVER")}return dt(e,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t,n=this.body.nodes,i=this.physicsBody.physicsNodeIndices,s=i.length,o=this._formBarnesHutTree(n,i);this.barnesHutTree=o;for(var a=0;a<s;a++)t=n[i[a]],t.options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,n){this._getForceContribution(t.children.NW,n),this._getForceContribution(t.children.NE,n),this._getForceContribution(t.children.SW,n),this._getForceContribution(t.children.SE,n)}},{key:"_getForceContribution",value:function(t,n){if(t.childrenCount>0){var i=t.centerOfMass.x-n.x,s=t.centerOfMass.y-n.y,o=Math.sqrt(i*i+s*s);o*t.calcSize>this.thetaInversed?this._calculateForces(o,i,s,n,t):t.childrenCount===4?this._getForceContributions(t,n):t.children.data.id!=n.id&&this._calculateForces(o,i,s,n,t)}}},{key:"_calculateForces",value:function(t,n,i,s,o){t===0&&(t=.1,n=t),this.overlapAvoidanceFactor<1&&s.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius));var a=this.options.gravitationalConstant*o.mass*s.options.mass/Math.pow(t,3),l=n*a,u=i*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}},{key:"_formBarnesHutTree",value:function(t,n){for(var i,s=n.length,o=t[n[0]].x,a=t[n[0]].y,l=t[n[0]].x,u=t[n[0]].y,h=1;h<s;h++){var c=t[n[h]],p=c.x,m=c.y;c.options.mass>0&&(p<o&&(o=p),p>l&&(l=p),m<a&&(a=m),m>u&&(u=m))}var w=Math.abs(l-o)-Math.abs(u-a);w>0?(a-=.5*w,u+=.5*w):(o+=.5*w,l-=.5*w);var b=1e-5,T=Math.max(b,Math.abs(l-o)),_=.5*T,A=.5*(o+l),x=.5*(a+u),I={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:A-_,maxX:A+_,minY:x-_,maxY:x+_},size:T,calcSize:1/T,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(I.root);for(var O=0;O<s;O++)i=t[n[O]],i.options.mass>0&&this._placeInTree(I.root,i);return I}},{key:"_updateBranchMass",value:function(t,n){var i=t.centerOfMass,s=t.mass+n.options.mass,o=1/s;i.x=i.x*t.mass+n.x*n.options.mass,i.x*=o,i.y=i.y*t.mass+n.y*n.options.mass,i.y*=o,t.mass=s;var a=Math.max(Math.max(n.height,n.radius),n.width);t.maxWidth=t.maxWidth<a?a:t.maxWidth}},{key:"_placeInTree",value:function(t,n,i){(i!=!0||i===void 0)&&this._updateBranchMass(t,n);var s=t.children.NW.range,o;s.maxX>n.x?s.maxY>n.y?o="NW":o="SW":s.maxY>n.y?o="NE":o="SE",this._placeInRegion(t,n,o)}},{key:"_placeInRegion",value:function(t,n,i){var s=t.children[i];switch(s.childrenCount){case 0:s.children.data=n,s.childrenCount=1,this._updateBranchMass(s,n);break;case 1:s.children.data.x===n.x&&s.children.data.y===n.y?(n.x+=this._rng(),n.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,n));break;case 4:this._placeInTree(s,n);break}}},{key:"_splitBranch",value:function(t){var n=null;t.childrenCount===1&&(n=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),n!=null&&this._placeInTree(t,n)}},{key:"_insertRegion",value:function(t,n){var i,s,o,a,l=.5*t.size;switch(n){case"NW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY,a=t.range.minY+l;break;case"NE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY,a=t.range.minY+l;break;case"SW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY+l,a=t.range.maxY;break;case"SE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY+l,a=t.range.maxY;break}t.children[n]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:s,minY:o,maxY:a},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,n){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,n))}},{key:"_drawBranch",value:function(t,n,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,n),this._drawBranch(t.children.NE,n),this._drawBranch(t.children.SE,n),this._drawBranch(t.children.SW,n)),n.strokeStyle=i,n.beginPath(),n.moveTo(t.range.minX,t.range.minY),n.lineTo(t.range.maxX,t.range.minY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.minY),n.lineTo(t.range.maxX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.maxY),n.lineTo(t.range.minX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.minX,t.range.maxY),n.lineTo(t.range.minX,t.range.minY),n.stroke()}}]),e}(),Tmt=function(){function e(r,t,n){ht(this,e),this._rng=Mx("REPULSION SOLVER"),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,h=this.body.nodes,c=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces,m=this.options.nodeDistance,w=-2/3/m,b=4/3,T=0;T<c.length-1;T++){l=h[c[T]];for(var _=T+1;_<c.length;_++)u=h[c[_]],t=u.x-l.x,n=u.y-l.y,i=Math.sqrt(t*t+n*n),i===0&&(i=.1*this._rng(),t=i),i<2*m&&(i<.5*m?a=1:a=w*i+b,a=a/i,s=t*a,o=n*a,p[l.id].x-=s,p[l.id].y-=o,p[u.id].x+=s,p[u.id].y+=o)}}}]),e}(),Imt=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,s=this.options.nodeDistance,o=0;o<n.length-1;o++)for(var a=t[n[o]],l=o+1;l<n.length;l++){var u=t[n[l]];if(a.level===u.level){var h=s+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(u.shape.radius||0)/2),c=u.x-a.x,p=u.y-a.y,m=Math.sqrt(c*c+p*p),w=.05,b=void 0;m<h?b=-Math.pow(w*m,2)+Math.pow(w*h,2):b=0,m!==0&&(b=b/m);var T=c*b,_=p*b;i[a.id].x-=T,i[a.id].y-=_,i[u.id].x+=T,i[u.id].y+=_}}}}]),e}(),sT=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i=this.physicsBody.physicsEdgeIndices,s=this.body.edges,o,a,l,u=0;u<i.length;u++)n=s[i[u]],n.connected===!0&&n.toId!==n.fromId&&this.body.nodes[n.toId]!==void 0&&this.body.nodes[n.fromId]!==void 0&&(n.edgeType.via!==void 0?(t=n.options.length===void 0?this.options.springLength:n.options.length,o=n.to,a=n.edgeType.via,l=n.from,this._calculateSpringForce(o,a,.5*t),this._calculateSpringForce(a,l,.5*t)):(t=n.options.length===void 0?this.options.springLength*1.5:n.options.length,this._calculateSpringForce(n.from,n.to,t)))}},{key:"_calculateSpringForce",value:function(t,n,i){var s=t.x-n.x,o=t.y-n.y,a=Math.max(Math.sqrt(s*s+o*o),.01),l=this.options.springConstant*(i-a)/a,u=s*l,h=o*l;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=u,this.physicsBody.forces[t.id].y+=h),this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x-=u,this.physicsBody.forces[n.id].y-=h)}}]),e}(),Amt=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,h=this.body.edges,c=.5,p=this.physicsBody.physicsEdgeIndices,m=this.physicsBody.physicsNodeIndices,w=this.physicsBody.forces,b=0;b<m.length;b++){var T=m[b];w[T].springFx=0,w[T].springFy=0}for(var _=0;_<p.length;_++)n=h[p[_]],n.connected===!0&&(t=n.options.length===void 0?this.options.springLength:n.options.length,i=n.from.x-n.to.x,s=n.from.y-n.to.y,u=Math.sqrt(i*i+s*s),u=u===0?.01:u,l=this.options.springConstant*(t-u)/u,o=i*l,a=s*l,n.to.level!=n.from.level?(w[n.toId]!==void 0&&(w[n.toId].springFx-=o,w[n.toId].springFy-=a),w[n.fromId]!==void 0&&(w[n.fromId].springFx+=o,w[n.fromId].springFy+=a)):(w[n.toId]!==void 0&&(w[n.toId].x-=c*o,w[n.toId].y-=c*a),w[n.fromId]!==void 0&&(w[n.fromId].x+=c*o,w[n.fromId].y+=c*a)));l=1;for(var A,x,I=0;I<m.length;I++){var O=m[I];A=Math.min(l,Math.max(-l,w[O].springFx)),x=Math.min(l,Math.max(-l,w[O].springFy)),w[O].x+=A,w[O].y+=x}for(var C=0,g=0,R=0;R<m.length;R++){var M=m[R];C+=w[M].x,g+=w[M].y}for(var U=C/m.length,V=g/m.length,ne=0;ne<m.length;ne++){var re=m[ne];w[re].x-=U,w[re].y-=V}}}]),e}(),hw=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o=this.body.nodes,a=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,u=0;u<a.length;u++){var h=a[u];s=o[h],t=-s.x,n=-s.y,i=Math.sqrt(t*t+n*n),this._calculateForces(i,t,n,l,s)}}},{key:"_calculateForces",value:function(t,n,i,s,o){var a=t===0?0:this.options.centralGravity/t;s[o.id].x=n*a,s[o.id].y=i*a}}]),e}();function Omt(e){var r=Cmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Cmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Pmt=function(e){Cr(t,e);var r=Omt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._rng=Mx("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return dt(t,[{key:"_calculateForces",value:function(i,s,o,a,l){i===0&&(i=.1*this._rng(),s=i),this.overlapAvoidanceFactor<1&&a.shape.radius&&(i=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,i-a.shape.radius));var u=a.edges.length+1,h=this.options.gravitationalConstant*l.mass*a.options.mass*u/Math.pow(i,2),c=s*h,p=o*h;this.physicsBody.forces[a.id].x+=c,this.physicsBody.forces[a.id].y+=p}}]),t}(cee);function Nmt(e){var r=Rmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Rmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Dmt=function(e){Cr(t,e);var r=Nmt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_calculateForces",value:function(i,s,o,a,l){if(i>0){var u=l.edges.length+1,h=this.options.centralGravity*u*l.options.mass;a[l.id].x=s*h,a[l.id].y=o*h}}}]),t}(hw),Bmt=function(){function e(r){ht(this,e),this.body=r,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Un(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,O$(["stabilization"],this.options,t),No(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var n=this.options.wind;n&&((typeof n.x!="number"||pC(n.x))&&(n.x=0),(typeof n.y!="number"||pC(n.y))&&(n.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new Pmt(this.body,this.physicsBody,t),this.edgesSolver=new sT(this.body,this.physicsBody,t),this.gravitySolver=new Dmt(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new Tmt(this.body,this.physicsBody,t),this.edgesSolver=new sT(this.body,this.physicsBody,t),this.gravitySolver=new hw(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new Imt(this.body,this.physicsBody,t),this.edgesSolver=new Amt(this.body,this.physicsBody,t),this.gravitySolver=new hw(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new cee(this.body,this.physicsBody,t),this.edgesSolver=new sT(this.body,this.physicsBody,t),this.gravitySolver=new hw(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var t;this.viewFunction=nt(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=k$();this.physicsTick();var n=k$()-t;(n<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&ul(function(){t.body.emitter.emit("stabilized",{iterations:n}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var t=1.2;this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=this.adaptiveCounter%this.adaptiveInterval===0;t?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,n=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&n[s].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(n[s].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[a]={x:0,y:0},this.physicsBody.velocities[a]===void 0&&(this.physicsBody.velocities[a]={x:0,y:0})}for(var l in this.physicsBody.velocities)t[l]===void 0&&delete this.physicsBody.velocities[l]}},{key:"revert",value:function(){var t=gn(this.previousStates),n=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var s=0;s<t.length;s++){var o=t[s];n[o]!==void 0?n[o].options.physics===!0&&(this.referenceState[o]={positions:{x:n[o].x,y:n[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,n[o].x=this.previousStates[o].x,n[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t,n,i,s=this.body.nodes,o=this.referenceState,a=.3;for(var l in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,l)&&s[l]!==void 0&&(t=s[l].x-o[l].positions.x,n=s[l].y-o[l].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i>a))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,n=0,i=0,s=5,o=0;o<t.length;o++){var a=t[o],l=this._performStep(a);n=Math.max(n,l),i+=l}this.adaptiveTimestepEnabled=i/t.length<s,this.stabilized=n<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,n,i){var s=this.modelOptions.damping*t,o=(n-s)/i;t+=o*this.timestep;var a=this.options.maxVelocity||1e9;return Math.abs(t)>a&&(t=t>0?a:-a),t}},{key:"_performStep",value:function(t){var n=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var s=this.physicsBody.velocities[t];this.previousStates[t]={x:n.x,y:n.y,vx:s.x,vy:s.y},n.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,i.x,n.options.mass),n.x+=s.x*this.timestep):(i.x=0,s.x=0),n.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,i.y,n.options.mass),n.y+=s.y*this.timestep):(i.y=0,s.y=0);var o=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return o}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].x&&t[n].y){var i=t[n].options.fixed;this.freezeCache[n]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.freezeCache[n]!==void 0&&(t[n].options.fixed.x=this.freezeCache[n].x,t[n].options.fixed.y=this.freezeCache[n].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof n!="number"&&(n=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",n)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=n,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,ul(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,n=function(){return t.stabilized===!1&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var s=0;n()&&s<this.options.stabilization.updateInterval;)this.physicsTick(),s++;if(i(),n()){var o;ul(nt(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var i=this.physicsBody.physicsNodeIndices[n],s=this.body.nodes[i],o=this.physicsBody.forces[i],a=20,l=.03,u=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),h=Math.min(Math.max(5,u),15),c=3*h,p=uC((180-Math.min(1,Math.max(0,l*u))*180)/360,1,1),m={x:s.x+a*o.x,y:s.y+a*o.y};t.lineWidth=h,t.strokeStyle=p,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(m.x,m.y),t.stroke();var w=Math.atan2(o.y,o.x);t.fillStyle=p,lee.draw(t,{type:"arrow",point:m,angle:w,length:c}),m0(t).call(t)}}}]),e}();let x1;const Mmt=new Uint8Array(16);function Lmt(){if(!x1&&(x1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x1(Mmt)}const Si=[];for(let e=0;e<256;++e)Si.push((e+256).toString(16).slice(1));function Fmt(e,r=0){return(Si[e[r+0]]+Si[e[r+1]]+Si[e[r+2]]+Si[e[r+3]]+"-"+Si[e[r+4]]+Si[e[r+5]]+"-"+Si[e[r+6]]+Si[e[r+7]]+"-"+Si[e[r+8]]+Si[e[r+9]]+"-"+Si[e[r+10]]+Si[e[r+11]]+Si[e[r+12]]+Si[e[r+13]]+Si[e[r+14]]+Si[e[r+15]]).toLowerCase()}const jmt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Ij={randomUUID:jmt};function fy(e,r,t){if(Ij.randomUUID&&!r&&!e)return Ij.randomUUID();e=e||{};const n=e.random||(e.rng||Lmt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return Fmt(n)}var ss=function(){function e(){ht(this,e)}return dt(e,null,[{key:"getRange",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.shape.boundingBox.left&&(o=l.shape.boundingBox.left),a<l.shape.boundingBox.right&&(a=l.shape.boundingBox.right),i>l.shape.boundingBox.top&&(i=l.shape.boundingBox.top),s<l.shape.boundingBox.bottom&&(s=l.shape.boundingBox.bottom);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"getRangeCore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.x&&(o=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),s<l.y&&(s=l.y);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,n){var i={};return n===void 0||n==="node"?(Zr(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Zr(i,t.options,!0),i}}]),e}();function Hmt(e){var r=zmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function zmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Umt=function(e){Cr(t,e);var r=Hmt(t);function t(n,i,s,o,a,l){var u;return ht(this,t),u=r.call(this,n,i,s,o,a,l),u.isCluster=!0,u.containedNodes={},u.containedEdges={},u}return dt(t,[{key:"_openChildCluster",value:function(i){var s=this,o=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],pr(o.edges,function(a){delete s.containedEdges[a.id]}),pr(o.containedNodes,function(a,l){s.containedNodes[l]=a}),o.containedNodes={},pr(o.containedEdges,function(a,l){s.containedEdges[l]=a}),o.containedEdges={},pr(o.edges,function(a){pr(s.edges,function(l){var u,h,c=Er(u=l.clusteringEdgeReplacingIds).call(u,a.id);c!==-1&&(pr(a.clusteringEdgeReplacingIds,function(p){l.clusteringEdgeReplacingIds.push(p),s.body.edges[p].edgeReplacedById=l.id}),nu(h=l.clusteringEdgeReplacingIds).call(h,c,1))})}),o.edges=[]}}]),t}(qs),Wmt=function(){function e(r){var t=this;ht(this,e),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Un(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}return dt(e,[{key:"clusterByHubsize",value:function(t,n){t===void 0?t=this._getHubSize():Br(t)==="object"&&(n=this._checkOptions(t),t=this._getHubSize());for(var i=[],s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodes[this.body.nodeIndices[s]];o.edges.length>=t&&i.push(o.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],n,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");n=this._checkOptions(n);var s={},o={};pr(this.body.nodes,function(a,l){a.options&&n.joinCondition(a.options)===!0&&(s[l]=a,pr(a.edges,function(u){t.clusteredEdges[u.id]===void 0&&(o[u.id]=u)}))}),this._cluster(s,o,n,i)}},{key:"clusterByEdgeCount",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=this._checkOptions(n);for(var o=[],a={},l,u,h,c=function(){var b={},T={},_=i.body.nodeIndices[p],A=i.body.nodes[_];if(a[_]===void 0){h=0,u=[];for(var x=0;x<A.edges.length;x++)l=A.edges[x],i.clusteredEdges[l.id]===void 0&&(l.toId!==l.fromId&&h++,u.push(l));if(h===t){for(var I=function(re){if(n.joinCondition===void 0||n.joinCondition===null)return!0;var Q=ss.cloneOptions(re);return n.joinCondition(Q)},O=!0,C=0;C<u.length;C++){l=u[C];var g=i._getConnectedId(l,_);if(I(A))T[l.id]=l,b[_]=A,b[g]=i.body.nodes[g],a[_]=!0;else{O=!1;break}}if(gn(b).length>0&&gn(T).length>0&&O===!0){var R=function(){for(var re=0;re<o.length;++re)for(var Q in b)if(o[re].nodes[Q]!==void 0)return o[re]},M=R();if(M!==void 0){for(var U in b)M.nodes[U]===void 0&&(M.nodes[U]=b[U]);for(var V in T)M.edges[V]===void 0&&(M.edges[V]=T[V])}else o.push({nodes:b,edges:T})}}}},p=0;p<this.body.nodeIndices.length;p++)c();for(var m=0;m<o.length;m++)this._cluster(o[m].nodes,o[m].edges,n,!1);s===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,t,n)}},{key:"clusterBridges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,t,n)}},{key:"clusterByConnection",value:function(t,n){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];n=this._checkOptions(n,o),n.clusterNodeProperties.x===void 0&&(n.clusterNodeProperties.x=o.x),n.clusterNodeProperties.y===void 0&&(n.clusterNodeProperties.y=o.y),n.clusterNodeProperties.fixed===void 0&&(n.clusterNodeProperties.fixed={},n.clusterNodeProperties.fixed.x=o.options.fixed.x,n.clusterNodeProperties.fixed.y=o.options.fixed.y);var a={},l={},u=o.id,h=ss.cloneOptions(o);a[u]=o;for(var c=0;c<o.edges.length;c++){var p=o.edges[c];if(this.clusteredEdges[p.id]===void 0){var m=this._getConnectedId(p,u);if(this.clusteredNodes[m]===void 0)if(m!==u)if(n.joinCondition===void 0)l[p.id]=p,a[m]=this.body.nodes[m];else{var w=ss.cloneOptions(this.body.nodes[m]);n.joinCondition(h,w)===!0&&(l[p.id]=p,a[m]=this.body.nodes[m])}else l[p.id]=p}}var b=Xp(i=gn(a)).call(i,function(I){return a[I].id});for(var T in a)if(Object.prototype.hasOwnProperty.call(a,T))for(var _=a[T],A=0;A<_.edges.length;A++){var x=_.edges[A];Er(b).call(b,this._getConnectedId(x,_.id))>-1&&(l[x.id]=x)}this._cluster(a,l,n,s)}},{key:"_createClusterEdges",value:function(t,n,i,s){for(var o,a,l,u,h,c,p=gn(t),m=[],w=0;w<p.length;w++){a=p[w],l=t[a];for(var b=0;b<l.edges.length;b++)o=l.edges[b],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?n[o.id]=o:o.toId==a?(u=i.id,h=o.fromId,c=h):(u=o.toId,h=i.id,c=u),t[c]===void 0&&m.push({edge:o,fromId:h,toId:u}))}for(var T=[],_=function(g){for(var R=0;R<T.length;R++){var M=T[R],U=g.fromId===M.fromId&&g.toId===M.toId,V=g.fromId===M.toId&&g.toId===M.fromId;if(U||V)return M}return null},A=0;A<m.length;A++){var x=m[A],I=x.edge,O=_(x);O===null?(O=this._createClusteredEdge(x.fromId,x.toId,I,s),T.push(O)):O.clusteringEdgeReplacingIds.push(I.id),this.body.edges[I.id].edgeReplacedById=O.id,this._backupEdgeOptions(I),I.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.clusteredNodes[a]!==void 0&&o.push(a);for(var l=0;l<o.length;++l)delete t[o[l]];if(gn(t).length!=0&&!(gn(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=!0)){var u=Zr({},i.clusterNodeProperties);if(i.processProperties!==void 0){var h=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var p=ss.cloneOptions(t[c]);h.push(p)}var m=[];for(var w in n)if(Object.prototype.hasOwnProperty.call(n,w)&&w.substr(0,12)!=="clusterEdge:"){var b=ss.cloneOptions(n[w],"edge");m.push(b)}if(u=i.processProperties(u,h,m),!u)throw new Error("The processProperties function does not return properties!")}u.id===void 0&&(u.id="cluster:"+fy());var T=u.id;u.label===void 0&&(u.label="cluster");var _=void 0;u.x===void 0&&(_=this._getClusterPosition(t),u.x=_.x),u.y===void 0&&(_===void 0&&(_=this._getClusterPosition(t)),u.y=_.y),u.id=T;var A=this.body.functions.createNode(u,Umt);A.containedNodes=t,A.containedEdges=n,A.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[u.id]=A,this._clusterEdges(t,n,u,i.clusterEdgeProperties),u.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var n=this.clusteredEdges[t.id];n!==void 0&&(t.setOptions({physics:n.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var n=gn(t),i=t[n[0]].x,s=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,l,u=1;u<n.length;u++)l=t[n[u]],i=l.x<i?l.x:i,s=l.x>s?l.x:s,o=l.y<o?l.y:o,a=l.y>a?l.y:a;return{x:.5*(i+s),y:.5*(o+a)}}},{key:"openCluster",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var s=this.body.nodes[t];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),a=Er(o).call(o,t)-1;if(a>=0){var l=o[a],u=this.body.nodes[l];u._openChildCluster(t),delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged");return}var h=s.containedNodes,c=s.containedEdges;if(n!==void 0&&n.releaseFunction!==void 0&&typeof n.releaseFunction=="function"){var p={},m={x:s.x,y:s.y};for(var w in h)if(Object.prototype.hasOwnProperty.call(h,w)){var b=this.body.nodes[w];p[w]={x:b.x,y:b.y}}var T=n.releaseFunction(m,p);for(var _ in h)if(Object.prototype.hasOwnProperty.call(h,_)){var A=this.body.nodes[_];T[_]!==void 0&&(A.x=T[_].x===void 0?s.x:T[_].x,A.y=T[_].y===void 0?s.y:T[_].y)}}else pr(h,function(Ee){Ee.options.fixed.x===!1&&(Ee.x=s.x),Ee.options.fixed.y===!1&&(Ee.y=s.y)});for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)){var I=this.body.nodes[x];I.vx=s.vx,I.vy=s.vy,I.setOptions({physics:!0}),delete this.clusteredNodes[x]}for(var O=[],C=0;C<s.edges.length;C++)O.push(s.edges[C]);for(var g=0;g<O.length;g++){for(var R=O[g],M=this._getConnectedId(R,t),U=this.clusteredNodes[M],V=0;V<R.clusteringEdgeReplacingIds.length;V++){var ne=R.clusteringEdgeReplacingIds[V],re=this.body.edges[ne];if(re!==void 0)if(U!==void 0){var Q=this.body.nodes[U.clusterId];Q.containedEdges[re.id]=re,delete c[re.id];var F=re.fromId,Z=re.toId;re.toId==M?Z=U.clusterId:F=U.clusterId,this._createClusteredEdge(F,Z,re,Q.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(re)}R.remove()}for(var se in c)Object.prototype.hasOwnProperty.call(c,se)&&this._restoreEdge(c[se]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var n=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(this.body.nodes[s].id)}return n}},{key:"findNode",value:function(t){for(var n=[],i=100,s=0,o;this.clusteredNodes[t]!==void 0&&s<i;){if(o=this.body.nodes[t],o===void 0)return[];n.push(o.id),t=this.clusteredNodes[t].clusterId,s++}return o=this.body.nodes[t],o===void 0?[]:(n.push(o.id),fh(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,n){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(n===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(n),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,n){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(n===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),s=0;s<i.length;s++){var o=this.body.edges[i[s]];o.setOptions(n)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var n=[],i=100,s=0;t!==void 0&&this.body.edges[t]!==void 0&&s<i;)n.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,s++;return fh(n).call(n),n}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var n=[t],i=[],s=[],o=100,a=0;n.length>0&&a<o;){var l=n.pop();if(l!==void 0){var u=this.body.edges[l];if(u!==void 0){a++;var h=u.clusteringEdgeReplacingIds;if(h===void 0)s.push(l);else for(var c=0;c<h.length;++c){var p=h[c];Er(n).call(n,h)!==-1||Er(i).call(i,h)!==-1||n.push(p)}i.push(l)}}}return s}},{key:"_getConnectedId",value:function(t,n){return t.toId!=n?t.toId:(t.fromId!=n,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,n=0,i=0,s=0,o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];a.edges.length>s&&(s=a.edges.length),t+=a.edges.length,n+=Math.pow(a.edges.length,2),i+=1}t=t/i,n=n/i;var l=n-Math.pow(t,2),u=Math.sqrt(l),h=Math.floor(t+2*u);return h>s&&(h=s),h}},{key:"_createClusteredEdge",value:function(t,n,i,s,o){var a=ss.cloneOptions(i,"edge");Zr(a,s),a.from=t,a.to=n,a.id="clusterEdge:"+fy(),o!==void 0&&Zr(a,o);var l=this.body.functions.createEdge(a);return l.clusteringEdgeReplacingIds=[i.id],l.connect(),this.body.edges[l.id]=l,l}},{key:"_clusterEdges",value:function(t,n,i,s){if(n instanceof _p){var o=n,a={};a[o.id]=o,n=a}if(t instanceof qs){var l=t,u={};u[l.id]=l,t=u}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=i.clusterEdgeProperties),this._createClusterEdges(t,n,i,s);for(var h in n)if(Object.prototype.hasOwnProperty.call(n,h)&&this.body.edges[h]!==void 0){var c=this.body.edges[h];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(this.clusteredNodes[p]={clusterId:i.id,node:this.body.nodes[p]},this.body.nodes[p].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(t!==void 0){var n=this.clusteredNodes[t];if(n!==void 0){var i=n.clusterId;if(i!==void 0)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,n){var i=[];return pr(t,function(s){n(s)&&i.push(s)}),i}},{key:"_updateState",value:function(){var t=this,n,i=[],s={},o=function(w){pr(t.body.nodes,function(b){b.isCluster===!0&&w(b)})};for(n in this.clusteredNodes)if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,n)){var a=this.body.nodes[n];a===void 0&&i.push(n)}o(function(m){for(var w=0;w<i.length;w++)delete m.containedNodes[i[w]]});for(var l=0;l<i.length;l++)delete this.clusteredNodes[i[l]];pr(this.clusteredEdges,function(m){var w=t.body.edges[m];(w===void 0||!w.endPointsValid())&&(s[m]=m)}),o(function(m){pr(m.containedEdges,function(w,b){!w.endPointsValid()&&!s[b]&&(s[b]=b)})}),pr(this.body.edges,function(m,w){var b=!0,T=m.clusteringEdgeReplacingIds;if(T!==void 0){var _=0;pr(T,function(A){var x=t.body.edges[A];x!==void 0&&x.endPointsValid()&&(_+=1)}),b=_>0}(!m.endPointsValid()||!b)&&(s[w]=w)}),o(function(m){pr(s,function(w){delete m.containedEdges[w],pr(m.edges,function(b,T){if(b.id===w){m.edges[T]=null;return}b.clusteringEdgeReplacingIds=t._filter(b.clusteringEdgeReplacingIds,function(_){return!s[_]})}),m.edges=t._filter(m.edges,function(b){return b!==null})})}),pr(s,function(m){delete t.clusteredEdges[m]}),pr(s,function(m){delete t.body.edges[m]});var u=gn(this.body.edges);pr(u,function(m){var w=t.body.edges[m],b=t._isClusteredNode(w.fromId)||t._isClusteredNode(w.toId);if(b!==t._isClusteredEdge(w.id))if(b){var T=t._getClusterNodeForNode(w.fromId);T!==void 0&&t._clusterEdges(t.body.nodes[w.fromId],w,T);var _=t._getClusterNodeForNode(w.toId);_!==void 0&&t._clusterEdges(t.body.nodes[w.toId],w,_)}else delete t._clusterEdges[m],t._restoreEdge(w)});for(var h=!1,c=!0,p=function(){var w=[];o(function(T){var _=gn(T.containedNodes).length,A=T.options.allowSingleNodeCluster===!0;(A&&_<1||!A&&_<2)&&w.push(T.id)});for(var b=0;b<w.length;++b)t.openCluster(w[b],{},!1);c=w.length>0,h=h||c};c;)p();h&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return this.clusteredNodes[t]!==void 0}},{key:"_isClusteredEdge",value:function(t){return this.clusteredEdges[t]!==void 0}}]),e}();function Kmt(){var e;window!==void 0&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),e===void 0?window.requestAnimationFrame=function(r){r()}:window.requestAnimationFrame=e}var qmt=function(){function e(r,t){ht(this,e),Kmt(),this.body=r,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Un(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=ul(function(){var i;t.zooming=!1,nt(i=t._requestRedraw).call(i,t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",nt(n=this._requestRedraw).call(n,this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];zv(n,this.options,t)}}},{key:"_requestNextFrame",value:function(t,n){if(!(typeof window>"u")){var i,s=window;return this.requiresTimeout===!0?i=ul(t,n):s.requestAnimationFrame&&(i=s.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var t;this.renderTimer=this._requestNextFrame(nt(t=this._renderStep).call(t,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var n={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,s,o),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var a=this._drawNodes(i,t),l=a.drawExternalLabels;n.drawExternalLabels=l}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),n.drawExternalLabels!=null&&n.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,s,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var n=this.body.nodes,i;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=n[s],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.nodes,s=this.body.nodeIndices,o,a=[],l=[],u=20,h=this.canvas.DOMtoCanvas({x:-u,y:-u}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),p={top:h.y,left:h.x,bottom:c.y,right:c.x},m=[],w=0;w<s.length;w++)if(o=i[s[w]],o.hover)l.push(s[w]);else if(o.isSelected())a.push(s[w]);else if(n===!0){var b=o.draw(t);b.drawExternalLabel!=null&&m.push(b.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(p)===!0){var T=o.draw(t);T.drawExternalLabel!=null&&m.push(T.drawExternalLabel)}else o.updateBoundingBox(t,o.selected);var _,A=a.length,x=l.length;for(_=0;_<A;_++){o=i[a[_]];var I=o.draw(t);I.drawExternalLabel!=null&&m.push(I.drawExternalLabel)}for(_=0;_<x;_++){o=i[l[_]];var O=o.draw(t);O.drawExternalLabel!=null&&m.push(O.drawExternalLabel)}return{drawExternalLabels:function(){for(var g=0,R=m;g<R.length;g++){var M=R[g];M()}}}}},{key:"_drawEdges",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.draw(t)}}},{key:"_drawArrows",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,Er(t).call(t,"msie 9.0")!=-1?this.requiresTimeout=!0:Er(t).call(t,"safari")!=-1&&Er(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var n=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),e}(),MC={},Vmt={get exports(){return MC},set exports(e){MC=e}},Gmt=_r,Ymt=Gmt.setInterval;(function(e){e.exports=Ymt})(Vmt);var Zmt=Pt(MC);function R$(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function fee(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}var Xmt=function(){function e(r){ht(this,e),this.body=r,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Un(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.once("resize",function(i){i.width!==0&&(t.body.view.translation.x=i.width*.5),i.height!==0&&(t.body.view.translation.y=i.height*.5)}),this.body.emitter.on("setSize",nt(n=this.setSize).call(n,this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var n=this;if(t!==void 0){var i=["width","height","autoResize"];zv(i,this.options,t)}if(this._cleanUp(),this.options.autoResize===!0){var s;if(window.ResizeObserver){var o=new ResizeObserver(function(){var h=n.setSize();h===!0&&n.body.emitter.emit("_requestRedraw")}),a=this.frame;o.observe(a),this._cleanupCallbacks.push(function(){o.unobserve(a)})}else{var l=Zmt(function(){var h=n.setSize();h===!0&&n.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(l)})}var u=nt(s=this._onResize).call(s,this);oht(window,"resize",u),this._cleanupCallbacks.push(function(){aht(window,"resize",u)})}}},{key:"_cleanUp",value:function(){var t,n,i;Wr(t=fh(n=nu(i=this._cleanupCallbacks).call(i,0)).call(n)).call(t,function(s){try{s()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;t!=1&&n!=1?i=this.cameraState.scale*.5*(t+n):t!=1?i=this.cameraState.scale*t:n!=1&&(i=this.cameraState.scale*n),this.body.view.scale=i;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(Er(t).call(t,"%")!==-1||Er(t).call(t,"px")!==-1)return t;if(Er(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new $p(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:$p.DIRECTION_ALL}),R$(this.hammer,function(n){t.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){t.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){t.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){t.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){t.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){t.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){t.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){t.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("wheel",function(n){t.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){t.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){t.body.eventListeners.onContext(n)}),this.hammerFrame=new $p(this.frame),fee(this.hammerFrame,function(n){t.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),n=this._prepareValue(n);var i=!1,s=this.frame.canvas.width,o=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||n!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=t,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==l||this.frame.canvas.height!==u)&&this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,i=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),e}();function Jmt(e,r){var t=Un({nodes:r,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},e??{});if(!Fr(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=r),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}var Qmt=function(){function e(r,t){var n,i=this,s;ht(this,e),this.body=r,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",nt(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",nt(s=this.releaseNode).call(s,this))}return dt(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=Jmt(t,this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight,o,a;if(i===0||s===0)a=1,o=ss.getRange(this.body.nodes,t.nodes);else if(n===!0){var l=0;for(var u in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,u)){var h=this.body.nodes[u];h.predefinedPosition===!0&&(l+=1)}if(l>.5*this.body.nodeIndices.length){this.fit(t,!1);return}o=ss.getRange(this.body.nodes,t.nodes);var c=this.body.nodeIndices.length;a=12.662/(c+7.4147)+.0964822;var p=Math.min(i/600,s/600);a*=p}else{this.body.emitter.emit("_resizeNodes"),o=ss.getRange(this.body.nodes,t.nodes);var m=Math.abs(o.maxX-o.minX)*1.1,w=Math.abs(o.maxY-o.minY)*1.1,b=i/m,T=s/w;a=b<=T?b:T}a>t.maxZoomLevel?a=t.maxZoomLevel:a<t.minZoomLevel&&(a=t.minZoomLevel);var _=ss.findCenter(o),A={position:_,scale:a,animation:t.animation};this.moveTo(A)}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};n.position=i,n.lockedOnNode=t,this.moveTo(n)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(t===void 0){t={};return}if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!Zf(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!Zf(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!Zf(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!Zf(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(t!==void 0){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.position.x,y:n.y-t.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},t.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=nt(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=nt(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.x,y:n.y-t.y},s=this.body.view.translation,o={x:s.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var n=cht[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var i;this.viewFunction=nt(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function Aj(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(h){u(h,"keydown")},l=function(h){u(h,"keyup")},u=function(h,c){if(i[c][h.keyCode]!==void 0){for(var p=i[c][h.keyCode],m=0;m<p.length;m++)(p[m].shift===void 0||p[m].shift==!0&&h.shiftKey==!0||p[m].shift==!1&&h.shiftKey==!1)&&p[m].fn(h);r==!0&&h.preventDefault()}};return n.bind=function(h,c,p){if(p===void 0&&(p="keydown"),s[h]===void 0)throw new Error("unsupported key: "+h);i[p][s[h].code]===void 0&&(i[p][s[h].code]=[]),i[p][s[h].code].push({fn:c,shift:s[h].shift})},n.bindAll=function(h,c){c===void 0&&(c="keydown");for(var p in s)s.hasOwnProperty(p)&&n.bind(p,h,c)},n.getKey=function(h){for(var c in s)if(s.hasOwnProperty(c)){if(h.shiftKey==!0&&s[c].shift==!0&&h.keyCode==s[c].code)return c;if(h.shiftKey==!1&&s[c].shift==!1&&h.keyCode==s[c].code)return c;if(h.keyCode==s[c].code&&c=="shift")return c}return"unknown key, currently not supported"},n.unbind=function(h,c,p){if(p===void 0&&(p="keydown"),s[h]===void 0)throw new Error("unsupported key: "+h);if(c!==void 0){var m=[],w=i[p][s[h].code];if(w!==void 0)for(var b=0;b<w.length;b++)w[b].fn==c&&w[b].shift==s[h].shift||m.push(i[p][s[h].code][b]);i[p][s[h].code]=m}else i[p][s[h].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",a,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",a,!0),t.addEventListener("keyup",l,!0),n}var e0t=function(){function e(r,t){var n=this;ht(this,e),this.body=r,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return dt(e,[{key:"setOptions",value:function(t){t!==void 0&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var n=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var s=0;s<n.length;s++){this.navigationDOM[n[s]]=document.createElement("div"),this.navigationDOM[n[s]].className="vis-button vis-"+n[s],this.navigationDOM.wrapper.appendChild(this.navigationDOM[n[s]]);var o=new $p(this.navigationDOM[n[s]]);if(i[s]==="_fit"){var a;R$(o,nt(a=this._fit).call(a,this))}else{var l;R$(o,nt(l=this.bindToRedraw).call(l,this,i[s]))}this.navigationHammers.push(o)}var u=new $p(this.canvas.frame);fee(u,function(){t._stopMovement()}),this.navigationHammers.push(u),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){if(this.boundFunctions[t]===void 0){var n;this.boundFunctions[t]=nt(n=this[t]).call(n,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,n=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,n=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=Aj({container:window,preventDefault:!0}):this.keycharm=Aj({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var n,i,s,o,a,l,u,h,c,p,m,w,b,T,_,A,x,I,O,C,g,R,M,U;nt(n=this.keycharm).call(n,"up",function(){t.bindToRedraw("_moveUp")},"keydown"),nt(i=this.keycharm).call(i,"down",function(){t.bindToRedraw("_moveDown")},"keydown"),nt(s=this.keycharm).call(s,"left",function(){t.bindToRedraw("_moveLeft")},"keydown"),nt(o=this.keycharm).call(o,"right",function(){t.bindToRedraw("_moveRight")},"keydown"),nt(a=this.keycharm).call(a,"=",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(l=this.keycharm).call(l,"num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(u=this.keycharm).call(u,"num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(h=this.keycharm).call(h,"-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(c=this.keycharm).call(c,"[",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(p=this.keycharm).call(p,"]",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(m=this.keycharm).call(m,"pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(w=this.keycharm).call(w,"pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(b=this.keycharm).call(b,"up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),nt(T=this.keycharm).call(T,"down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),nt(_=this.keycharm).call(_,"left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),nt(A=this.keycharm).call(A,"right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),nt(x=this.keycharm).call(x,"=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(I=this.keycharm).call(I,"num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(O=this.keycharm).call(O,"num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(C=this.keycharm).call(C,"-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(g=this.keycharm).call(g,"[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(R=this.keycharm).call(R,"]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(M=this.keycharm).call(M,"pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(U=this.keycharm).call(U,"pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}]),e}();function t0t(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=r0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function r0t(e,r){var t;if(e){if(typeof e=="string")return Oj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oj(e,r)}}function Oj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var n0t=function(){function e(r,t,n){var i,s,o,a,l,u,h,c,p,m,w,b,T;ht(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new e0t(r,t),this.body.eventListeners.onTap=nt(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=nt(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=nt(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=nt(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=nt(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=nt(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=nt(h=this.onDragEnd).call(h,this),this.body.eventListeners.onMouseWheel=nt(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=nt(p=this.onPinch).call(p,this),this.body.eventListeners.onMouseMove=nt(m=this.onMouseMove).call(m,this),this.body.eventListeners.onRelease=nt(w=this.onRelease).call(w,this),this.body.eventListeners.onContext=nt(b=this.onContext).call(b,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=nt(T=this.getPointer).call(T,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Un(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];O$(n,this.options,t),No(this.options,t,"keyboard"),t.tooltip&&(Un(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=lC(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-iht(this.canvas.frame.canvas),y:t.y-sht(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n)}},{key:"onDoubleTap",value:function(t){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,n)}},{key:"onHold",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n),this.selectionHandler.generateClickEvent("hold",t,n)}},{key:"onRelease",value:function(t){if(new Date().valueOf()-this.touchTime>10){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,n),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(t){var n=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,n)}},{key:"checkSelectionChanges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,n){var i=function(o,a){for(var l=[],u=0;u<o.length;u++){var h=o[u];Er(a).call(a,h)===-1&&l.push(h)}return l};return{nodes:i(t.nodes,n.nodes),edges:i(t.edges,n.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(t);var n=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Un({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(n!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=n.id,n.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[n.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var s=t0t(this.selectionHandler.getSelectedNodes()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l={id:a.id,node:a,x:a.x,y:a.y,xFixed:a.options.fixed.x,yFixed:a.options.fixed.y};a.options.fixed.x=!0,a.options.fixed.y=!0,this.drag.selection.push(l)}}catch(u){s.e(u)}finally{s.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var n=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;Wr(s).call(s,function(h){var c=h.node;h.xFixed===!1&&(c.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(h.x)+o)),h.yFixed===!1&&(c.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(h.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}var l=i.x-this.drag.pointer.x,u=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+l,y:this.drag.translation.y+u},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var n=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var s=this.body.selectionBox.position,o={minX:Math.min(s.start.x,s.end.x),minY:Math.min(s.start.y,s.end.y),maxX:Math.max(s.start.x,s.end.x),maxY:Math.max(s.start.y,s.end.y)},a=Is(i=this.body.nodeIndices).call(i,function(h){var c=n.body.nodes[h];return c.x>=o.minX&&c.x<=o.maxX&&c.y>=o.minY&&c.y<=o.maxY});Wr(a).call(a,function(h){return n.selectionHandler.selectObject(n.body.nodes[h])});var l=this.getPointer(t.center);this.selectionHandler.commitAndEmit(l,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var u=this.drag.selection;u&&u.length?(Wr(u).call(u,function(h){h.node.options.fixed.x=h.xFixed,h.node.options.fixed.y=h.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var n=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,n)}},{key:"zoom",value:function(t,n){if(this.options.zoomView===!0){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var s=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,a=t/i,l=(1-a)*n.x+o.x*a,u=(1-a)*n.y+o.y*a;if(this.body.view.scale=t,this.body.view.translation={x:l,y:u},s!=null){var h=this.canvas.canvasToDOM(s);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:n}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:n})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){if(t.deltaY!==0){var n=this.body.view.scale;n*=1+(t.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var n=this,i=this.getPointer({x:t.clientX,y:t.clientY}),s=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(s=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),s===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=ul(function(){return n._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var n=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),s={left:n,top:i,right:n,bottom:i},o=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,l="node";if(this.popupObj===void 0){for(var u=this.body.nodeIndices,h=this.body.nodes,c,p=[],m=0;m<u.length;m++)c=h[u[m]],c.isOverlappingWith(s)===!0&&(a=!0,c.getTitle()!==void 0&&p.push(u[m]));p.length>0&&(this.popupObj=h[p[p.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var w=this.body.edgeIndices,b=this.body.edges,T,_=[],A=0;A<w.length;A++)T=b[w[A]],T.isOverlappingWith(s)===!0&&T.connected===!0&&T.getTitle()!==void 0&&_.push(w[A]);_.length>0&&(this.popupObj=b[_[_.length-1]],l="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new mht(this.canvas.frame)),this.popup.popupTargetType=l,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var n=this.selectionHandler._pointerToPositionObject(t),i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(n),i===!0)){var s=this.selectionHandler.getNodeAt(t);i=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(n));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),LC={},i0t={get exports(){return LC},set exports(e){LC=e}},s0t=yN,o0t=ZQ;s0t("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},o0t);var a0t=_r,l0t=a0t.Set,u0t=l0t,c0t=u0t;(function(e){e.exports=c0t})(i0t);var Ff=Pt(LC),FC={},f0t={get exports(){return FC},set exports(e){FC=e}},h0t=Ir,Cj=mN,E1=rv.getWeakData,d0t=gN,p0t=lo,v0t=e0,oT=wi,g0t=vN,hee=Zc,Pj=$i,dee=Wh,y0t=dee.set,m0t=dee.getterFor,b0t=hee.find,w0t=hee.findIndex,$0t=h0t([].splice),_0t=0,S1=function(e){return e.frozen||(e.frozen=new pee)},pee=function(){this.entries=[]},aT=function(e,r){return b0t(e.entries,function(t){return t[0]===r})};pee.prototype={get:function(e){var r=aT(this,e);if(r)return r[1]},has:function(e){return!!aT(this,e)},set:function(e,r){var t=aT(this,e);t?t[1]=r:this.entries.push([e,r])},delete:function(e){var r=w0t(this.entries,function(t){return t[0]===e});return~r&&$0t(this.entries,r,1),!!~r}};var x0t={getConstructor:function(e,r,t,n){var i=e(function(l,u){d0t(l,s),y0t(l,{type:r,id:_0t++,frozen:void 0}),v0t(u)||g0t(u,l[n],{that:l,AS_ENTRIES:t})}),s=i.prototype,o=m0t(r),a=function(l,u,h){var c=o(l),p=E1(p0t(u),!0);return p===!0?S1(c).set(u,h):p[c.id]=h,l};return Cj(s,{delete:function(l){var u=o(this);if(!oT(l))return!1;var h=E1(l);return h===!0?S1(u).delete(l):h&&Pj(h,u.id)&&delete h[u.id]},has:function(u){var h=o(this);if(!oT(u))return!1;var c=E1(u);return c===!0?S1(h).has(u):c&&Pj(c,h.id)}}),Cj(s,t?{get:function(u){var h=o(this);if(oT(u)){var c=E1(u);return c===!0?S1(h).get(u):c?c[h.id]:void 0}},set:function(u,h){return a(this,u,h)}}:{add:function(u){return a(this,u,!0)}}),i}},E0t=qQ,Nj=Gn,dw=Ir,Rj=mN,S0t=rv,k0t=yN,vee=x0t,k1=wi,T1=Wh.enforce,T0t=Tr,I0t=DX,E0=Object,A0t=Array.isArray,I1=E0.isExtensible,gee=E0.isFrozen,O0t=E0.isSealed,yee=E0.freeze,C0t=E0.seal,Dj={},Bj={},P0t=!Nj.ActiveXObject&&"ActiveXObject"in Nj,Pg,mee=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},bee=k0t("WeakMap",mee,vee),Ud=bee.prototype,pw=dw(Ud.set),N0t=function(){return E0t&&T0t(function(){var e=yee([]);return pw(new bee,e,1),!gee(e)})};if(I0t)if(P0t){Pg=vee.getConstructor(mee,"WeakMap",!0),S0t.enable();var Mj=dw(Ud.delete),A1=dw(Ud.has),Lj=dw(Ud.get);Rj(Ud,{delete:function(e){if(k1(e)&&!I1(e)){var r=T1(this);return r.frozen||(r.frozen=new Pg),Mj(this,e)||r.frozen.delete(e)}return Mj(this,e)},has:function(r){if(k1(r)&&!I1(r)){var t=T1(this);return t.frozen||(t.frozen=new Pg),A1(this,r)||t.frozen.has(r)}return A1(this,r)},get:function(r){if(k1(r)&&!I1(r)){var t=T1(this);return t.frozen||(t.frozen=new Pg),A1(this,r)?Lj(this,r):t.frozen.get(r)}return Lj(this,r)},set:function(r,t){if(k1(r)&&!I1(r)){var n=T1(this);n.frozen||(n.frozen=new Pg),A1(this,r)?pw(this,r,t):n.frozen.set(r,t)}else pw(this,r,t);return this}})}else N0t()&&Rj(Ud,{set:function(r,t){var n;return A0t(r)&&(gee(r)?n=Dj:O0t(r)&&(n=Bj)),pw(this,r,t),n==Dj&&yee(r),n==Bj&&C0t(r),this}});var R0t=_r,D0t=R0t.WeakMap,B0t=D0t,M0t=B0t;(function(e){e.exports=M0t})(f0t);var hy=Pt(FC);function Yr(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function jC(e,r,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,t):i?i.value=t:r.set(e,t),t}function HC(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=L0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function L0t(e,r){var t;if(e){if(typeof e=="string")return Fj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fj(e,r)}}function Fj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var If,Io,ic,sc,vw;function jj(e,r){var t=new Ff,n=HC(r),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e.has(s)||t.add(s)}}catch(o){n.e(o)}finally{n.f()}return t}var Hj=function(){function e(){ht(this,e),If.set(this,new Ff),Io.set(this,new Ff)}return dt(e,[{key:"size",get:function(){return Yr(this,Io,"f").size}},{key:"add",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Yr(this,Io,"f").add(a)}}},{key:"delete",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Yr(this,Io,"f").delete(a)}}},{key:"clear",value:function(){Yr(this,Io,"f").clear()}},{key:"getSelection",value:function(){return tl(Yr(this,Io,"f"))}},{key:"getChanges",value:function(){return{added:tl(jj(Yr(this,If,"f"),Yr(this,Io,"f"))),deleted:tl(jj(Yr(this,Io,"f"),Yr(this,If,"f"))),previous:tl(new Ff(Yr(this,If,"f"))),current:tl(new Ff(Yr(this,Io,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();jC(this,If,Yr(this,Io,"f"),"f"),jC(this,Io,new Ff(Yr(this,If,"f")),"f");var n=HC(t.added),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s.select()}}catch(u){n.e(u)}finally{n.f()}var o=HC(t.deleted),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.unselect()}}catch(u){o.e(u)}finally{o.f()}return t}}]),e}();If=new hy,Io=new hy;var F0t=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ht(this,e),ic.set(this,new Hj),sc.set(this,new Hj),vw.set(this,void 0),jC(this,vw,r,"f")}return dt(e,[{key:"sizeNodes",get:function(){return Yr(this,ic,"f").size}},{key:"sizeEdges",get:function(){return Yr(this,sc,"f").size}},{key:"getNodes",value:function(){return Yr(this,ic,"f").getSelection()}},{key:"getEdges",value:function(){return Yr(this,sc,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=Yr(this,ic,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=Yr(this,sc,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){Yr(this,ic,"f").delete(t)}},{key:"deleteEdges",value:function(t){Yr(this,sc,"f").delete(t)}},{key:"clear",value:function(){Yr(this,ic,"f").clear(),Yr(this,sc,"f").clear()}},{key:"commit",value:function(){for(var t,n,i={nodes:Yr(this,ic,"f").commit(),edges:Yr(this,sc,"f").commit()},s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(t=Yr(this,vw,"f")).call.apply(t,eN(n=[this,i]).call(n,o)),i}}]),e}();ic=new hy,sc=new hy,vw=new hy;function zj(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=j0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function j0t(e,r){var t;if(e){if(typeof e=="string")return Uj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uj(e,r)}}function Uj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var H0t=function(){function e(r,t){var n=this;ht(this,e),this.body=r,this.canvas=t,this._selectionAccumulator=new F0t,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Un(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return dt(e,[{key:"setOptions",value:function(t){if(t!==void 0){var n=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];zv(n,this.options,t)}}},{key:"selectOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(n=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return n}},{key:"selectAdditionalOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(n=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return n}},{key:"_initBaseEvent",value:function(t,n){var i={};return i.pointer={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)},i.event=t,i}},{key:"generateClickEvent",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this._initBaseEvent(n,i);if(o===!0)a.nodes=[],a.edges=[];else{var l=this.getSelection();a.nodes=l.nodes,a.edges=l.edges}s!==void 0&&(a.previousSelection=s),t=="click"&&(a.items=this.getClickedItems(i)),n.controlEdge!==void 0&&(a.controlEdge=n.controlEdge),this.body.emitter.emit(t,a)}},{key:"selectObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(t!==void 0){if(t instanceof qs){if(n===!0){var i;(i=this._selectionAccumulator).addEdges.apply(i,tl(t.edges))}this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var n=[],i=this.body.nodes,s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}return n}},{key:"_pointerToPositionObject",value:function(t){var n=this.canvas.DOMtoCanvas(t);return{left:n.x-1,top:n.y+1,right:n.x+1,bottom:n.y-1}}},{key:"getNodeAt",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._pointerToPositionObject(t),s=this._getAllNodesOverlappingWith(i);if(s.length>0)return n===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}},{key:"_getEdgesOverlappingWith",value:function(t,n){for(var i=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var o=this.body.edgeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var n=[];return this._getEdgesOverlappingWith(t,n),n}},{key:"getEdgeAt",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.canvas.DOMtoCanvas(t),s=10,o=null,a=this.body.edges,l=0;l<this.body.edgeIndices.length;l++){var u=this.body.edgeIndices[l],h=a[u];if(h.connected){var c=h.from.x,p=h.from.y,m=h.to.x,w=h.to.y,b=h.edgeType.getDistanceToEdge(c,p,m,w,i.x,i.y);b<s&&(o=u,s=b)}}if(o!==null)return n===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(t){t instanceof qs?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){if(t instanceof qs){var n;this._selectionAccumulator.deleteNodes(t),(n=this._selectionAccumulator).deleteEdges.apply(n,tl(t.edges))}else this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n);i.hover===!0&&(i.hover=!1,i instanceof qs?(s.node=i.id,this.body.emitter.emit("blurNode",s)):(s.edge=i.id,this.body.emitter.emit("blurEdge",s)))}},{key:"emitHoverEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n),o=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof qs?(s.node=i.id,this.body.emitter.emit("hoverNode",s)):(s.edge=i.id,this.body.emitter.emit("hoverEdge",s))),o}},{key:"hoverObject",value:function(t,n){var i=this.getNodeAt(n);i===void 0&&(i=this.getEdgeAt(n));var s=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(i===void 0||i instanceof qs&&i.id!=o||i instanceof _p)&&(this.emitBlurEvent(t,n,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],s=!0);for(var a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(s===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(i===void 0||i instanceof _p&&i.id!=a||i instanceof qs&&!i.hover)&&(this.emitBlurEvent(t,n,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],s=!0));if(i!==void 0){var l=gn(this.hoverObj.edges).length,u=gn(this.hoverObj.nodes).length,h=i instanceof _p&&l===0&&u===0,c=i instanceof qs&&l===0&&u===0;(s||h||c)&&(s=this.emitHoverEvent(t,n,i)),i instanceof qs&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}s===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,n){var i=!1,s=this._selectionAccumulator.commit(),o={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",n,t,o),i=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",n,t,o),i=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",n,t),i=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",n,t),i=!0),i===!0&&this.generateClickEvent("select",n,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return Xp(t=this._selectionAccumulator.getNodes()).call(t,function(n){return n.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return Xp(t=this._selectionAccumulator.getEdges()).call(t,function(n){return n.id})}},{key:"setSelection",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((n.unselectAll||n.unselectAll===void 0)&&this.unselectAll(),t.nodes){var i=zj(t.nodes),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.body.nodes[o];if(!a)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(a,n.highlightEdges)}}catch(p){i.e(p)}finally{i.f()}}if(t.edges){var l=zj(t.edges),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,c=this.body.edges[h];if(!c)throw new RangeError('Edge with id "'+h+'" not found');this.selectObject(c)}}catch(p){l.e(p)}finally{l.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:n})}},{key:"selectEdges",value:function(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var n in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,n.id)||this._selectionAccumulator.deleteEdges(n)}},{key:"getClickedItems",value:function(t){for(var n=this.canvas.DOMtoCanvas(t),i=[],s=this.body.nodeIndices,o=this.body.nodes,a=s.length-1;a>=0;a--){var l=o[s[a]],u=l.getItemsOnPoint(n);i.push.apply(i,u)}for(var h=this.body.edgeIndices,c=this.body.edges,p=h.length-1;p>=0;p--){var m=c[h[p]],w=m.getItemsOnPoint(n);i.push.apply(i,w)}return i}}]),e}(),zC={},z0t={get exports(){return zC},set exports(e){zC=e}},Wj=iJ,U0t=Math.floor,UC=function(e,r){var t=e.length,n=U0t(t/2);return t<8?W0t(e,r):K0t(e,UC(Wj(e,0,n),r),UC(Wj(e,n),r),r)},W0t=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},K0t=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},q0t=UC,V0t=r0,Kj=V0t.match(/firefox\/(\d+)/i),G0t=!!Kj&&+Kj[1],Y0t=r0,Z0t=/MSIE|Trident/.test(Y0t),X0t=r0,qj=X0t.match(/AppleWebKit\/(\d+)\./),J0t=!!qj&&+qj[1],Q0t=jt,wee=Ir,ebt=zh,tbt=ao,Vj=Oa,rbt=XJ,Gj=ml,EN=Tr,nbt=q0t,ibt=jv,Yj=G0t,sbt=Z0t,Zj=n0,Xj=J0t,mc=[],Jj=wee(mc.sort),obt=wee(mc.push),abt=EN(function(){mc.sort(void 0)}),lbt=EN(function(){mc.sort(null)}),ubt=ibt("sort"),$ee=!EN(function(){if(Zj)return Zj<70;if(!(Yj&&Yj>3)){if(sbt)return!0;if(Xj)return Xj<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)mc.push({k:t+i,v:n})}for(mc.sort(function(s,o){return o.v-s.v}),i=0;i<mc.length;i++)t=mc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),cbt=abt||!lbt||!ubt||!$ee,fbt=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:Gj(r)>Gj(t)?1:-1}};Q0t({target:"Array",proto:!0,forced:cbt},{sort:function(r){r!==void 0&&ebt(r);var t=tbt(this);if($ee)return r===void 0?Jj(t):Jj(t,r);var n=[],i=Vj(t),s,o;for(o=0;o<i;o++)o in t&&obt(n,t[o]);for(nbt(n,fbt(r)),s=Vj(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)rbt(t,o++);return t}});var hbt=_i,dbt=hbt("Array").sort,pbt=Rn,vbt=dbt,lT=Array.prototype,gbt=function(e){var r=e.sort;return e===lT||pbt(lT,e)&&r===lT.sort?vbt:r},ybt=gbt,mbt=ybt;(function(e){e.exports=mbt})(z0t);var uT=Pt(zC),WC={},bbt={get exports(){return WC},set exports(e){WC=e}},wbt=zh,$bt=ao,_bt=px,xbt=Oa,Ebt=TypeError,Qj=function(e){return function(r,t,n,i){wbt(t);var s=$bt(r),o=_bt(s),a=xbt(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw Ebt("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},Sbt={left:Qj(!1),right:Qj(!0)},kbt=_u,Tbt=typeof process<"u"&&kbt(process)=="process",Ibt=jt,Abt=Sbt.left,Obt=jv,eH=n0,Cbt=Tbt,Pbt=!Cbt&&eH>79&&eH<83,Nbt=Pbt||!Obt("reduce");Ibt({target:"Array",proto:!0,forced:Nbt},{reduce:function(r){var t=arguments.length;return Abt(this,r,t,t>1?arguments[1]:void 0)}});var Rbt=_i,Dbt=Rbt("Array").reduce,Bbt=Rn,Mbt=Dbt,cT=Array.prototype,Lbt=function(e){var r=e.reduce;return e===cT||Bbt(cT,e)&&r===cT.reduce?Mbt:r},Fbt=Lbt,jbt=Fbt;(function(e){e.exports=jbt})(bbt);var _ee=Pt(WC),rm={},Hbt={get exports(){return rm},set exports(e){rm=e}},xee={};(function(e){(function(r,t){t(e)})(KO,function(r){r.__esModule=!0,r.sort=T;function t(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var n=32,i=7,s=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(_){return _<1e5?_<100?_<10?0:1:_<1e4?_<1e3?2:3:4:_<1e7?_<1e6?5:6:_<1e9?_<1e8?7:8:9}function l(_,A){if(_===A)return 0;if(~~_===_&&~~A===A){if(_===0||A===0)return _<A?-1:1;if(_<0||A<0){if(A>=0)return-1;if(_>=0)return 1;_=-_,A=-A}var x=a(_),I=a(A),O=0;return x<I?(_*=o[I-x-1],A/=10,O=-1):x>I&&(A*=o[x-I-1],_/=10,O=1),_===A?O:_<A?-1:1}var C=String(_),g=String(A);return C===g?0:C<g?-1:1}function u(_){for(var A=0;_>=n;)A|=_&1,_>>=1;return _+A}function h(_,A,x,I){var O=A+1;if(O===x)return 1;if(I(_[O++],_[A])<0){for(;O<x&&I(_[O],_[O-1])<0;)O++;c(_,A,O)}else for(;O<x&&I(_[O],_[O-1])>=0;)O++;return O-A}function c(_,A,x){for(x--;A<x;){var I=_[A];_[A++]=_[x],_[x--]=I}}function p(_,A,x,I,O){for(I===A&&I++;I<x;I++){for(var C=_[I],g=A,R=I;g<R;){var M=g+R>>>1;O(C,_[M])<0?R=M:g=M+1}var U=I-g;switch(U){case 3:_[g+3]=_[g+2];case 2:_[g+2]=_[g+1];case 1:_[g+1]=_[g];break;default:for(;U>0;)_[g+U]=_[g+U-1],U--}_[g]=C}}function m(_,A,x,I,O,C){var g=0,R=0,M=1;if(C(_,A[x+O])>0){for(R=I-O;M<R&&C(_,A[x+O+M])>0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R),g+=O,M+=O}else{for(R=O+1;M<R&&C(_,A[x+O-M])<=0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R);var U=g;g=O-M,M=O-U}for(g++;g<M;){var V=g+(M-g>>>1);C(_,A[x+V])>0?g=V+1:M=V}return M}function w(_,A,x,I,O,C){var g=0,R=0,M=1;if(C(_,A[x+O])<0){for(R=O+1;M<R&&C(_,A[x+O-M])<0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R);var U=g;g=O-M,M=O-U}else{for(R=I-O;M<R&&C(_,A[x+O+M])>=0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R),g+=O,M+=O}for(g++;g<M;){var V=g+(M-g>>>1);C(_,A[x+V])<0?M=V:g=V+1}return M}var b=function(){function _(A,x){t(this,_),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=s,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=A,this.compare=x,this.length=A.length,this.length<2*s&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return _.prototype.pushRun=function(x,I){this.runStart[this.stackSize]=x,this.runLength[this.stackSize]=I,this.stackSize+=1},_.prototype.mergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;if(x>=1&&this.runLength[x-1]<=this.runLength[x]+this.runLength[x+1]||x>=2&&this.runLength[x-2]<=this.runLength[x]+this.runLength[x-1])this.runLength[x-1]<this.runLength[x+1]&&x--;else if(this.runLength[x]>this.runLength[x+1])break;this.mergeAt(x)}},_.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;x>0&&this.runLength[x-1]<this.runLength[x+1]&&x--,this.mergeAt(x)}},_.prototype.mergeAt=function(x){var I=this.compare,O=this.array,C=this.runStart[x],g=this.runLength[x],R=this.runStart[x+1],M=this.runLength[x+1];this.runLength[x]=g+M,x===this.stackSize-3&&(this.runStart[x+1]=this.runStart[x+2],this.runLength[x+1]=this.runLength[x+2]),this.stackSize--;var U=w(O[R],O,C,g,0,I);C+=U,g-=U,g!==0&&(M=m(O[C+g-1],O,R,M,M-1,I),M!==0&&(g<=M?this.mergeLow(C,g,R,M):this.mergeHigh(C,g,R,M)))},_.prototype.mergeLow=function(x,I,O,C){var g=this.compare,R=this.array,M=this.tmp,U=0;for(U=0;U<I;U++)M[U]=R[x+U];var V=0,ne=O,re=x;if(R[re++]=R[ne++],--C===0){for(U=0;U<I;U++)R[re+U]=M[V+U];return}if(I===1){for(U=0;U<C;U++)R[re+U]=R[ne+U];R[re+C]=M[V];return}for(var Q=this.minGallop;;){var F=0,Z=0,se=!1;do if(g(R[ne],M[V])<0){if(R[re++]=R[ne++],Z++,F=0,--C===0){se=!0;break}}else if(R[re++]=M[V++],F++,Z=0,--I===1){se=!0;break}while((F|Z)<Q);if(se)break;do{if(F=w(R[ne],M,V,I,0,g),F!==0){for(U=0;U<F;U++)R[re+U]=M[V+U];if(re+=F,V+=F,I-=F,I<=1){se=!0;break}}if(R[re++]=R[ne++],--C===0){se=!0;break}if(Z=m(M[V],R,ne,C,0,g),Z!==0){for(U=0;U<Z;U++)R[re+U]=R[ne+U];if(re+=Z,ne+=Z,C-=Z,C===0){se=!0;break}}if(R[re++]=M[V++],--I===1){se=!0;break}Q--}while(F>=i||Z>=i);if(se)break;Q<0&&(Q=0),Q+=2}if(this.minGallop=Q,Q<1&&(this.minGallop=1),I===1){for(U=0;U<C;U++)R[re+U]=R[ne+U];R[re+C]=M[V]}else{if(I===0)throw new Error("mergeLow preconditions were not respected");for(U=0;U<I;U++)R[re+U]=M[V+U]}},_.prototype.mergeHigh=function(x,I,O,C){var g=this.compare,R=this.array,M=this.tmp,U=0;for(U=0;U<C;U++)M[U]=R[O+U];var V=x+I-1,ne=C-1,re=O+C-1,Q=0,F=0;if(R[re--]=R[V--],--I===0){for(Q=re-(C-1),U=0;U<C;U++)R[Q+U]=M[U];return}if(C===1){for(re-=I,V-=I,F=re+1,Q=V+1,U=I-1;U>=0;U--)R[F+U]=R[Q+U];R[re]=M[ne];return}for(var Z=this.minGallop;;){var se=0,Ee=0,ye=!1;do if(g(M[ne],R[V])<0){if(R[re--]=R[V--],se++,Ee=0,--I===0){ye=!0;break}}else if(R[re--]=M[ne--],Ee++,se=0,--C===1){ye=!0;break}while((se|Ee)<Z);if(ye)break;do{if(se=I-w(M[ne],R,x,I,I-1,g),se!==0){for(re-=se,V-=se,I-=se,F=re+1,Q=V+1,U=se-1;U>=0;U--)R[F+U]=R[Q+U];if(I===0){ye=!0;break}}if(R[re--]=M[ne--],--C===1){ye=!0;break}if(Ee=C-m(R[V],M,0,C,C-1,g),Ee!==0){for(re-=Ee,ne-=Ee,C-=Ee,F=re+1,Q=ne+1,U=0;U<Ee;U++)R[F+U]=M[Q+U];if(C<=1){ye=!0;break}}if(R[re--]=R[V--],--I===0){ye=!0;break}Z--}while(se>=i||Ee>=i);if(ye)break;Z<0&&(Z=0),Z+=2}if(this.minGallop=Z,Z<1&&(this.minGallop=1),C===1){for(re-=I,V-=I,F=re+1,Q=V+1,U=I-1;U>=0;U--)R[F+U]=R[Q+U];R[re]=M[ne]}else{if(C===0)throw new Error("mergeHigh preconditions were not respected");for(Q=re-(C-1),U=0;U<C;U++)R[Q+U]=M[U]}},_}();function T(_,A,x,I){if(!Array.isArray(_))throw new TypeError("Can only sort arrays");A?typeof A!="function"&&(I=x,x=A,A=l):A=l,x||(x=0),I||(I=_.length);var O=I-x;if(!(O<2)){var C=0;if(O<n){C=h(_,x,I,A),p(_,x,I,x+C,A);return}var g=new b(_,A),R=u(O);do{if(C=h(_,x,I,A),C<R){var M=O;M>R&&(M=R),p(_,x,x+M,x+C,A),C=M}g.pushRun(x,C),g.mergeRuns(),O-=C,x+=C}while(O!==0);g.forceMergeRuns()}}})})(xee);(function(e){e.exports=xee})(Hbt);var tH=Pt(rm);function Eee(e){var r=zbt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function zbt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var See=function(){function e(){ht(this,e)}return dt(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,n,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,n){this.fake_use(t,n),this.abstract()}},{key:"shift",value:function(t,n){this.fake_use(t,n),this.abstract()}}]),e}(),Ubt=function(e){Cr(t,e);var r=Eee(t);function t(n){var i;return ht(this,t),i=r.call(this),i.layout=n,i}return dt(t,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.x=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_x,max:s.max_x}}},{key:"sort",value:function(i){rm.sort(i,function(s,o){return s.x-o.x})}},{key:"fix",value:function(i,s){i.y=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.y=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].x+=s}}]),t}(See),Wbt=function(e){Cr(t,e);var r=Eee(t);function t(n){var i;return ht(this,t),i=r.call(this),i.layout=n,i}return dt(t,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.y=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_y,max:s.max_y}}},{key:"sort",value:function(i){rm.sort(i,function(s,o){return s.y-o.y})}},{key:"fix",value:function(i,s){i.x=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.x=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].y+=s}}]),t}(See),KC={},Kbt={get exports(){return KC},set exports(e){KC=e}},qbt=jt,Vbt=Zc.every,Gbt=jv,Ybt=Gbt("every");qbt({target:"Array",proto:!0,forced:!Ybt},{every:function(r){return Vbt(this,r,arguments.length>1?arguments[1]:void 0)}});var Zbt=_i,Xbt=Zbt("Array").every,Jbt=Rn,Qbt=Xbt,fT=Array.prototype,e1t=function(e){var r=e.every;return e===fT||Jbt(fT,e)&&r===fT.every?Qbt:r},t1t=e1t,r1t=t1t;(function(e){e.exports=r1t})(Kbt);var kee=Pt(KC);function n1t(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=i1t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function i1t(e,r){var t;if(e){if(typeof e=="string")return rH(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rH(e,r)}}function rH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function s1t(e,r){var t=new Ff;return Wr(e).call(e,function(n){var i;Wr(i=n.edges).call(i,function(s){s.connected&&t.add(s)})}),Wr(t).call(t,function(n){var i=n.from.id,s=n.to.id;r[i]==null&&(r[i]=0),(r[s]==null||r[i]>=r[s])&&(r[s]=r[i]+1)}),r}function o1t(e){return Tee(function(r){var t,n;return kee(t=Is(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.to===r})},function(r,t){return t>r},"from",e)}function a1t(e){return Tee(function(r){var t,n;return kee(t=Is(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.from===r})},function(r,t){return t<r},"to",e)}function Tee(e,r,t,n){var i,s=hh(null),o=_ee(i=tl(tee(n).call(n))).call(i,function(m,w){return m+1+w.edges.length},0),a=t+"Id",l=t==="to"?1:-1,u=n1t(n),h;try{var c=function(){var w=yn(h.value,2),b=w[0],T=w[1];if(!n.has(b)||!e(T))return"continue";s[b]=0;for(var _=[T],A=0,x,I=function(){var g,R;if(!n.has(b))return"continue";var M=s[x.id]+l;if(Wr(g=Is(R=x.edges).call(R,function(U){return U.connected&&U.to!==U.from&&U[t]!==x&&n.has(U.toId)&&n.has(U.fromId)})).call(g,function(U){var V=U[a],ne=s[V];(ne==null||r(M,ne))&&(s[V]=M,_.push(U[t]))}),A>o)return{v:{v:s1t(n,s)}};++A};x=_.pop();){var O=I();if(O!=="continue"&&Br(O)==="object")return O.v}};for(u.s();!(h=u.n()).done;){var p=c();if(p!=="continue"&&Br(p)==="object")return p.v}}catch(m){u.e(m)}finally{u.f()}return s}var l1t=function(){function e(){ht(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return dt(e,[{key:"addRelation",value:function(t,n){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(n),this.parentReference[n]===void 0&&(this.parentReference[n]=[]),this.parentReference[n].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,n){n!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=n,this.treeIndex=Math.max(n,this.treeIndex))}},{key:"ensureLevel",value:function(t){this.levels[t]===void 0&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var n=this,i={},s=function o(a){if(i[a]!==void 0)return i[a];var l=n.levels[a];if(n.childrenReference[a]){var u=n.childrenReference[a];if(u.length>0)for(var h=0;h<u.length;h++)l=Math.max(l,o(u[h]))}return i[a]=l,l};return s(t)}},{key:"levelDownstream",value:function(t,n){this.levels[n.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[n.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var n=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.levels[i]!==void 0&&(n=Math.min(this.levels[i],n));for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.levels[s]!==void 0&&(this.levels[s]-=n)}},{key:"getTreeSize",value:function(t,n){var i=1e9,s=-1e9,o=1e9,a=-1e9;for(var l in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,l)&&this.trees[l]===n){var u=t[l];i=Math.min(u.x,i),s=Math.max(u.x,s),o=Math.min(u.y,o),a=Math.max(u.y,a)}return{min_x:i,max_x:s,min_y:o,max_y:a}}},{key:"hasSameParent",value:function(t,n){var i=this.parentReference[t.id],s=this.parentReference[n.id];if(i===void 0||s===void 0)return!1;for(var o=0;o<i.length;o++)for(var a=0;a<s.length;a++)if(i[o]==s[a])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,n){return this.trees[t.id]===this.trees[n.id]}},{key:"getLevels",value:function(){return gn(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,n){this.distributionOrdering[n]===void 0&&(this.distributionOrdering[n]=[]);var i=!1,s=this.distributionOrdering[n];for(var o in s)if(s[o]===t){i=!0;break}i||(this.distributionOrdering[n].push(t),this.distributionIndex[t.id]=this.distributionOrdering[n].length-1)}}]),e}(),u1t=function(){function e(r){ht(this,e),this.body=r,this._resetRNG(Math.random()+":"+k$()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Un(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(t.options.hierarchical.enabled===!0){var n=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",n,!1)}})}},{key:"setOptions",value:function(t,n){if(t!==void 0){var i=this.options.hierarchical,s=i.enabled;if(zv(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),No(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(n);if(s===!0)return this.body.emitter.emit("refresh"),Zr(n,this.optionsBackup)}return n}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Mx(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){var n=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:n.enabled===void 0?!0:n.enabled,solver:"hierarchicalRepulsion"},n.enabled=n.enabled===void 0?!0:n.enabled,n.solver=n.solver||"barnesHut"):Br(t.physics)==="object"?(n.enabled=t.physics.enabled===void 0?!0:t.physics.enabled,n.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(n.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var s=t.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(i=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},t.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:i,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var n=t.length+50,i=0;i<t.length;i++){var s=t[i],o=2*Math.PI*this._rng();s.x===void 0&&(s.x=n*Math.cos(o)),s.y===void 0&&(s.y=n*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=this.body.nodeIndices,n=0,i=0;i<t.length;i++){var s=this.body.nodes[t[i]];s.predefinedPosition===!0&&(n+=1)}if(n<.5*t.length){var o=10,a=0,l=this.options.clusterThreshold,u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>l){for(var h=t.length;t.length>l&&a<=o;){a+=1;var c=t.length;a%3===0?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);var p=t.length;if(c==p&&a%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*h)})}a>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var m=70,w=0;w<t.length;w++){var b=this.body.nodes[t[w]];b.predefinedPosition===!1&&(b.x+=(.5-this._rng())*m,b.y+=(.5-this._rng())*m)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=ss.getRangeCore(this.body.nodes,this.body.nodeIndices),n=ss.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var s=this.body.nodes[this.body.nodeIndices[i]];s.x-=n.x,s.y-=n.y}}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var n=0;n<this.body.nodeIndices.length;n++)this.body.nodes[this.body.nodeIndices[n]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[n],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t,n,i=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new l1t;for(n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&(t=this.body.nodes[n],t.options.level!==void 0?(i=!0,this.hierarchical.levels[n]=t.options.level):s=!0);if(s===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(s===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);var l=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(l),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,n=!1,i={},s=function(){for(var x=a(),I=0,O=0;O<x.length-1;O++){var C=x[O].max-x[O+1].min;I+=C+t.options.hierarchical.treeSpacing,o(O+1,I)}},o=function(x,I){var O=t.hierarchical.trees;for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&O[C]===x&&t.direction.shift(C,I)},a=function(){for(var x=[],I=0;I<t.hierarchical.numTrees();I++)x.push(t.direction.getTreeSize(I));return x},l=function A(x,I){if(!I[x.id]&&(I[x.id]=!0,t.hierarchical.childrenReference[x.id])){var O=t.hierarchical.childrenReference[x.id];if(O.length>0)for(var C=0;C<O.length;C++)A(t.body.nodes[O[C]],I)}},u=function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,O=1e9,C=1e9,g=1e9,R=-1e9;for(var M in x)if(Object.prototype.hasOwnProperty.call(x,M)){var U=t.body.nodes[M],V=t.hierarchical.levels[U.id],ne=t.direction.getPosition(U),re=t._getSpaceAroundNode(U,x),Q=yn(re,2),F=Q[0],Z=Q[1];O=Math.min(F,O),C=Math.min(Z,C),V<=I&&(g=Math.min(ne,g),R=Math.max(ne,R))}return[g,R,O,C]},h=function(x,I){var O=t.hierarchical.getMaxLevel(x.id),C=t.hierarchical.getMaxLevel(I.id);return Math.min(O,C)},c=function(x,I,O){for(var C=t.hierarchical,g=0;g<I.length;g++){var R=I[g],M=C.distributionOrdering[R];if(M.length>1)for(var U=0;U<M.length-1;U++){var V=M[U],ne=M[U+1];C.hasSameParent(V,ne)&&C.inSameSubNetwork(V,ne)&&x(V,ne,O)}}},p=function(x,I){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=t.direction.getPosition(x),g=t.direction.getPosition(I),R=Math.abs(g-C),M=t.options.hierarchical.nodeSpacing;if(R>M){var U={},V={};l(x,U),l(I,V);var ne=h(x,I),re=u(U,ne),Q=u(V,ne),F=re[1],Z=Q[0],se=Q[2],Ee=Math.abs(F-Z);if(Ee>M){var ye=F-Z+M;ye<-se+M&&(ye=-se+M),ye<0&&(t._shiftBlock(I.id,ye),n=!0,O===!0&&t._centerParent(I))}}},m=function(x,I){for(var O=I.id,C=I.edges,g=t.hierarchical.levels[I.id],R=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,M={},U=[],V=0;V<C.length;V++){var ne=C[V];if(ne.toId!=ne.fromId){var re=ne.toId==O?ne.from:ne.to;M[C[V].id]=re,t.hierarchical.levels[re.id]<g&&U.push(ne)}}var Q=function(Ue,Ge){for(var it=0,_e=0;_e<Ge.length;_e++)if(M[Ge[_e].id]!==void 0){var pe=t.direction.getPosition(M[Ge[_e].id])-Ue;it+=pe/Math.sqrt(pe*pe+R)}return it},F=function(Ue,Ge){for(var it=0,_e=0;_e<Ge.length;_e++)if(M[Ge[_e].id]!==void 0){var pe=t.direction.getPosition(M[Ge[_e].id])-Ue;it-=R*Math.pow(pe*pe+R,-1.5)}return it},Z=function(Ue,Ge){for(var it=t.direction.getPosition(I),_e={},pe=0;pe<Ue;pe++){var Te=Q(it,Ge),je=F(it,Ge),$=40,S=Math.max(-$,Math.min($,Math.round(Te/je)));if(it=it-S,_e[it]!==void 0)break;_e[it]=pe}return it},se=function(Ue){var Ge=t.direction.getPosition(I);if(i[I.id]===void 0){var it={};l(I,it),i[I.id]=it}var _e=u(i[I.id]),pe=_e[2],Te=_e[3],je=Ue-Ge,$=0;je>0?$=Math.min(je,Te-t.options.hierarchical.nodeSpacing):je<0&&($=-Math.min(-je,pe-t.options.hierarchical.nodeSpacing)),$!=0&&(t._shiftBlock(I.id,$),n=!0)},Ee=function(Ue){var Ge=t.direction.getPosition(I),it=t._getSpaceAroundNode(I),_e=yn(it,2),pe=_e[0],Te=_e[1],je=Ue-Ge,$=Ge;je>0?$=Math.min(Ge+(Te-t.options.hierarchical.nodeSpacing),Ue):je<0&&($=Math.max(Ge-(pe-t.options.hierarchical.nodeSpacing),Ue)),$!==Ge&&(t.direction.setPosition(I,$),n=!0)},ye=Z(x,U);se(ye),ye=Z(x,C),Ee(ye)},w=function(x){var I=t.hierarchical.getLevels();I=fh(I).call(I);for(var O=0;O<x;O++){n=!1;for(var C=0;C<I.length;C++)for(var g=I[C],R=t.hierarchical.distributionOrdering[g],M=0;M<R.length;M++)m(1e3,R[M]);if(n!==!0)break}},b=function(x){var I=t.hierarchical.getLevels();I=fh(I).call(I);for(var O=0;O<x&&(n=!1,c(p,I,!0),n===!0);O++);},T=function(){for(var x in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,x)&&t._centerParent(t.body.nodes[x])},_=function(){var x=t.hierarchical.getLevels();x=fh(x).call(x);for(var I=0;I<x.length;I++)for(var O=x[I],C=t.hierarchical.distributionOrdering[O],g=0;g<C.length;g++)t._centerParent(C[g])};this.options.hierarchical.blockShifting===!0&&(b(5),T()),this.options.hierarchical.edgeMinimization===!0&&w(20),this.options.hierarchical.parentCentralization===!0&&_(),s()}},{key:"_getSpaceAroundNode",value:function(t,n){var i=!0;n===void 0&&(i=!1);var s=this.hierarchical.levels[t.id];if(s!==void 0){var o=this.hierarchical.distributionIndex[t.id],a=this.direction.getPosition(t),l=this.hierarchical.distributionOrdering[s],u=1e9,h=1e9;if(o!==0){var c=l[o-1];if(i===!0&&n[c.id]===void 0||i===!1){var p=this.direction.getPosition(c);u=a-p}}if(o!=l.length-1){var m=l[o+1];if(i===!0&&n[m.id]===void 0||i===!1){var w=this.direction.getPosition(m);h=Math.min(h,w-a)}}return[u,h]}else return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var n=this.hierarchical.parentReference[t.id],i=0;i<n.length;i++){var s=n[i],o=this.body.nodes[s],a=this.hierarchical.childrenReference[s];if(a!==void 0){var l=this._getCenterPosition(a),u=this.direction.getPosition(o),h=this._getSpaceAroundNode(o),c=yn(h,2),p=c[0],m=c[1],w=u-l;(w<0&&Math.abs(w)<m-this.options.hierarchical.nodeSpacing||w>0&&Math.abs(w)<p-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,l)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,s=gn(t[n]);s=this._indexArrayToNodes(s),uT(i=this.direction).call(i,s);for(var o=0,a=0;a<s.length;a++){var l=s[a];if(this.positionedNodes[l.id]===void 0){var u=this.options.hierarchical.nodeSpacing,h=u*o;o>0&&(h=this.direction.getPosition(s[a-1])+u),this.direction.setPosition(l,h,n),this._validatePositionAndContinue(l,n,h),o++}}}}},{key:"_placeBranchNodes",value:function(t,n){var i,s=this.hierarchical.childrenReference[t];if(s!==void 0){for(var o=[],a=0;a<s.length;a++)o.push(this.body.nodes[s[a]]);uT(i=this.direction).call(i,o);for(var l=0;l<o.length;l++){var u=o[l],h=this.hierarchical.levels[u.id];if(h>n&&this.positionedNodes[u.id]===void 0){var c=this.options.hierarchical.nodeSpacing,p=void 0;l===0?p=this.direction.getPosition(this.body.nodes[t]):p=this.direction.getPosition(o[l-1])+c,this.direction.setPosition(u,p,h),this._validatePositionAndContinue(u,h,p)}else return}var m=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[t],m,n)}}},{key:"_validatePositionAndContinue",value:function(t,n,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[n]!==void 0){var s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[n]]);if(i-s<this.options.hierarchical.nodeSpacing){var o=s+this.options.hierarchical.nodeSpacing-i,a=this._findCommonParent(this.lastNodeOnLevel[n],t.id);this._shiftBlock(a.withChild,o)}}this.lastNodeOnLevel[n]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,n)}}},{key:"_indexArrayToNodes",value:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.body.nodes[t[i]]);return n}},{key:"_getDistribution",value:function(){var t={},n,i;for(n in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,n)){i=this.body.nodes[n];var s=this.hierarchical.levels[n]===void 0?0:this.hierarchical.levels[n];this.direction.fix(i,s),t[s]===void 0&&(t[s]={}),t[s][n]=i}return t}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return pr(t.edges,function(s){var o;Er(o=n.body.edgeIndices).call(o,s.id)!==-1&&i.push(s)}),i}},{key:"_getHubSizes",value:function(){var t=this,n={},i=this.body.nodeIndices;pr(i,function(o){var a=t.body.nodes[o],l=t._getActiveEdges(a).length;n[l]=!0});var s=[];return pr(n,function(o){s.push(Number(o))}),uT(tH).call(tH,s,function(o,a){return a-o}),s}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,n=function(u,h){t.hierarchical.levelDownstream(u,h)},i=this._getHubSizes(),s=function(){var u=i[o];if(u===0)return"break";pr(t.body.nodeIndices,function(h){var c=t.body.nodes[h];u===t._getActiveEdges(c).length&&t._crawlNetwork(n,h)})},o=0;o<i.length;++o){var a=s();if(a==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,n=1e5,i=function(a,l,u){},s=function(a,l,u){var h=t.hierarchical.levels[a.id];h===void 0&&(h=t.hierarchical.levels[a.id]=n);var c=i(ss.cloneOptions(a,"node"),ss.cloneOptions(l,"node"),ss.cloneOptions(u,"edge"));t.hierarchical.levels[l.id]=h+c};this._crawlNetwork(s),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,i=_ee(t=this.body.nodeIndices).call(t,function(s,o){return s.set(o,n.body.nodes[o]),s},new XQ);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=a1t(i):this.hierarchical.levels=o1t(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,n=function(s,o){t.hierarchical.levels[o.id]>t.hierarchical.levels[s.id]&&t.hierarchical.addRelation(s.id,o.id)};this._crawlNetwork(n),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,s={},o=function p(m,w){if(s[m.id]===void 0){t.hierarchical.setTreeIndex(m,w),s[m.id]=!0;for(var b,T=t._getActiveEdges(m),_=0;_<T.length;_++){var A=T[_];A.connected===!0&&(A.toId==m.id?b=A.from:b=A.to,m.id!=b.id&&(n(m,b,A),p(b,w)))}}};if(i===void 0)for(var a=0,l=0;l<this.body.nodeIndices.length;l++){var u=this.body.nodeIndices[l];if(s[u]===void 0){var h=this.body.nodes[u];o(h,a),a+=1}}else{var c=this.body.nodes[i];if(c===void 0){console.error("Node not found:",i);return}o(c)}}},{key:"_shiftBlock",value:function(t,n){var i=this,s={},o=function a(l){if(!s[l]){s[l]=!0,i.direction.shift(l,n);var u=i.hierarchical.childrenReference[l];if(u!==void 0)for(var h=0;h<u.length;h++)a(u[h])}};o(t)}},{key:"_findCommonParent",value:function(t,n){var i=this,s={},o=function l(u,h){var c=i.hierarchical.parentReference[h];if(c!==void 0)for(var p=0;p<c.length;p++){var m=c[p];u[m]=!0,l(u,m)}},a=function l(u,h){var c=i.hierarchical.parentReference[h];if(c!==void 0)for(var p=0;p<c.length;p++){var m=c[p];if(u[m]!==void 0)return{foundParent:m,withChild:h};var w=l(u,m);if(w.foundParent!==null)return w}return{foundParent:null,withChild:h}};return o(s,t),a(s,n)}},{key:"setDirectionStrategy",value:function(){var t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";t?this.direction=new Ubt(this):this.direction=new Wbt(this)}},{key:"_getCenterPosition",value:function(t){for(var n=1e9,i=-1e9,s=0;s<t.length;s++){var o=void 0;if(t[s].id!==void 0)o=t[s];else{var a=t[s];o=this.body.nodes[a]}var l=this.direction.getPosition(o);n=Math.min(n,l),i=Math.max(i,l)}return .5*(n+i)}}]),e}();function c1t(e,r){var t=typeof Jc<"u"&&xu(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=f1t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function f1t(e,r){var t;if(e){if(typeof e=="string")return nH(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Kh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nH(e,r)}}function nH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var h1t=function(){function e(r,t,n,i){var s=this,o,a;ht(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Un(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",nt(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",nt(a=this._restore).call(a,this))}return dt(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,n,i){n!==void 0&&(n.locale!==void 0?this.options.locale=n.locale:this.options.locale=i.locale,n.locales!==void 0?this.options.locales=n.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,Zr(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,n;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),o=i+s,a=this.options.locales[this.options.locale],l=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),l=!0),this.options.addEdge!==!1&&(l===!0?this._createSeperator(1):l=!0,this._createAddEdgeButton(a)),i===1&&typeof this.options.editNode=="function"?(l===!0?this._createSeperator(2):l=!0,this._createEditNodeButton(a)):s===1&&i===0&&this.options.editEdge!==!1&&(l===!0?this._createSeperator(3):l=!0,this._createEditEdgeButton(a)),o!==0&&(i>0&&this.options.deleteNode!==!1?(l===!0&&this._createSeperator(4),this._createDeleteButton(a)):i===0&&this.options.deleteEdge!==!1&&(l===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,nt(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",nt(n=this.showManipulatorToolbar).call(n,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}this._temporaryBindEvent("click",nt(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var n=this.selectionHandler.getSelectedNodes()[0];if(n!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(n.isCluster!==!0){var i=Zr({},n.options,!1);if(i.x=n.x,i.y=n.y,this.options.editNode.length===2)this.options.editNode(i,function(s){s!=null&&t.inMode==="editNode"&&t.body.data.nodes.getDataSet().update(s),t.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,n,i,s,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a,l=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(l),this._createSeperator(),this._createDescription(l.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,nt(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",nt(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",nt(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDrag",nt(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",nt(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",nt(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",Br(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from.id,t.to.id);return}if(this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var s,o,a,l,u=this.body.edges[this.edgeBeingEditedId],h=this._getNewTargetNode(u.from.x,u.from.y),c=this._getNewTargetNode(u.to.x,u.to.y);this.temporaryIds.nodes.push(h.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[h.id]=h,this.body.nodeIndices.push(h.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",nt(s=this._controlNodeTouch).call(s,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",nt(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",nt(a=this._controlNodeDrag).call(a,this)),this._temporaryBindUI("onDragEnd",nt(l=this._controlNodeDragEnd).call(l,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(p){var m=u.edgeType.findBorderPositions(p);h.selected===!1&&(h.x=m.from.x,h.y=m.from.y),c.selected===!1&&(c.x=m.to.x,c.y=m.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var n=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),s=void 0;if(n.length>0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(s=this.options.deleteNode)}else i.length>0&&typeof this.options.deleteEdge=="function"&&(s=this.options.deleteEdge);if(typeof s=="function"){var a={nodes:n,edges:i};if(s.length===2)s(a,function(l){l!=null&&t.inMode==="delete"?(t.body.data.edges.getDataSet().remove(l.edges),t.body.data.nodes.getDataSet().remove(l.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(n),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var t,n;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(n=this.options.locales[this.options.locale])===null||n===void 0?void 0:n.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(t,n){var i=Zr({},this.options.controlNodeStyle);i.id="targetNode"+fy(),i.hidden=!1,i.physics=!1,i.x=t,i.y=n;var s=this.body.functions.createNode(i);return s.shape.boundingBox={left:t,right:t,top:n,bottom:n},s}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},lc(this.editModeDiv);var n=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",n.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,nt(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(lc(this.editModeDiv),lc(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,n=c1t(nu(t=this._domEventListenerCleanupQueue).call(t,0)),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),lc(this.manipulationDiv),lc(this.editModeDiv),lc(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var n,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addNodeMode).call(n,this))}},{key:"_createAddEdgeButton",value:function(t){var n,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addEdgeMode).call(n,this))}},{key:"_createEditNodeButton",value:function(t){var n,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editNode).call(n,this))}},{key:"_createEditEdgeButton",value:function(t){var n,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editEdgeMode).call(n,this))}},{key:"_createDeleteButton",value:function(t){var n,i;this.options.rtl?i="vis-delete-rtl":i="vis-delete";var s=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,nt(n=this.deleteSelected).call(n,this))}},{key:"_createBackButton",value:function(t){var n,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.showManipulatorToolbar).call(n,this))}},{key:"_createButton",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+n,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=s,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,n){this.temporaryEventFunctions.push({event:t,boundFunction:n}),this.body.emitter.on(t,n)}},{key:"_temporaryBindUI",value:function(t,n){if(this.body.eventListeners[t]!==void 0)this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=n;else throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+y0(gn(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var n=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(n,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,n){var i=new $p(t,{});R$(i,n),this._domEventListenerCleanupQueue.push(function(){i.destroy()});var s=function(a){var l=a.keyCode,u=a.key;(u==="Enter"||u===" "||l===13||l===32)&&n()};t.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(function(){t.removeEventListener("keyup",s,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var n;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i=Er(n=this.body.edgeIndices).call(n,this.temporaryIds.edges[t]);if(i!==-1){var s;nu(s=this.body.edgeIndices).call(s,i,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var a;delete this.body.nodes[this.temporaryIds.nodes[o]];var l=Er(a=this.body.nodeIndices).call(a,this.temporaryIds.nodes[o]);if(l!==-1){var u;nu(u=this.body.nodeIndices).call(u,l,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Un({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),l=s.isOverlappingWith(n);a===!0?(this.selectedControlNode=i,o.edgeType.from=i):l===!0&&(this.selectedControlNode=s,o.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var n=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(n);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--)if(o[l]!==this.selectedControlNode.id){a=this.body.nodes[o[l]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var u=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===u.id?this._performEditEdge(a.id,s.to.id):this._performEditEdge(s.from.id,a.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Un({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var n=this.lastTouch,i=this.selectionHandler.getNodeAt(n);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this._getNewTargetNode(i.x,i.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);var o=this.body.functions.createEdge({id:"connectionEdge"+fy(),from:i.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Er(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}if(t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,n),this.temporaryIds.nodes[0]!==void 0){var h=this.body.nodes[this.temporaryIds.nodes[0]];h.x=this.canvas._XconvertDOMtoCanvas(n.x),h.y=this.canvas._YconvertDOMtoCanvas(n.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Er(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(s,a.id)),t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,n),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var n=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,n,void 0,!0)}},{key:"_performAddNode",value:function(t){var n=this,i={id:fy(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(i,function(s){s!=null&&n.inMode==="addNode"&&n.body.data.nodes.getDataSet().add(s),n.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,n){var i=this,s={from:t,to:n};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(s,function(o){o!=null&&i.inMode==="addEdge"&&(i.body.data.edges.getDataSet().add(o),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,n){var i=this,s={id:this.edgeBeingEditedId,from:t,to:n,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(Br(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(s,function(a){a==null||i.inMode!=="editEdge"?(i.body.edges[s.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(a),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),lt="string",tt="boolean",Ne="number",Kg="array",Ot="object",Iee="dom",d1t="any",hT=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],dT={borderWidth:{number:Ne},borderWidthSelected:{number:Ne,undefined:"undefined"},brokenImage:{string:lt,undefined:"undefined"},chosen:{label:{boolean:tt,function:"function"},node:{boolean:tt,function:"function"},__type__:{object:Ot,boolean:tt}},color:{border:{string:lt},background:{string:lt},highlight:{border:{string:lt},background:{string:lt},__type__:{object:Ot,string:lt}},hover:{border:{string:lt},background:{string:lt},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},opacity:{number:Ne,undefined:"undefined"},fixed:{x:{boolean:tt},y:{boolean:tt},__type__:{object:Ot,boolean:tt}},font:{align:{string:lt},color:{string:lt},size:{number:Ne},face:{string:lt},background:{string:lt},strokeWidth:{number:Ne},strokeColor:{string:lt},vadjust:{number:Ne},multi:{boolean:tt,string:lt},bold:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},boldital:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},ital:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},mono:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},group:{string:lt,number:Ne,undefined:"undefined"},heightConstraint:{minimum:{number:Ne},valign:{string:lt},__type__:{object:Ot,boolean:tt,number:Ne}},hidden:{boolean:tt},icon:{face:{string:lt},code:{string:lt},size:{number:Ne},color:{string:lt},weight:{string:lt,number:Ne},__type__:{object:Ot}},id:{string:lt,number:Ne},image:{selected:{string:lt,undefined:"undefined"},unselected:{string:lt,undefined:"undefined"},__type__:{object:Ot,string:lt}},imagePadding:{top:{number:Ne},right:{number:Ne},bottom:{number:Ne},left:{number:Ne},__type__:{object:Ot,number:Ne}},label:{string:lt,undefined:"undefined"},labelHighlightBold:{boolean:tt},level:{number:Ne,undefined:"undefined"},margin:{top:{number:Ne},right:{number:Ne},bottom:{number:Ne},left:{number:Ne},__type__:{object:Ot,number:Ne}},mass:{number:Ne},physics:{boolean:tt},scaling:{min:{number:Ne},max:{number:Ne},label:{enabled:{boolean:tt},min:{number:Ne},max:{number:Ne},maxVisible:{number:Ne},drawThreshold:{number:Ne},__type__:{object:Ot,boolean:tt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},shadow:{enabled:{boolean:tt},color:{string:lt},size:{number:Ne},x:{number:Ne},y:{number:Ne},__type__:{object:Ot,boolean:tt}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:tt,array:Kg},borderRadius:{number:Ne},interpolation:{boolean:tt},useImageSize:{boolean:tt},useBorderWithImage:{boolean:tt},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ot}},size:{number:Ne},title:{string:lt,dom:Iee,undefined:"undefined"},value:{number:Ne,undefined:"undefined"},widthConstraint:{minimum:{number:Ne},maximum:{number:Ne},__type__:{object:Ot,boolean:tt,number:Ne}},x:{number:Ne},y:{number:Ne},__type__:{object:Ot}},p1t={configure:{enabled:{boolean:tt},filter:{boolean:tt,string:lt,array:Kg,function:"function"},container:{dom:Iee},showButton:{boolean:tt},__type__:{object:Ot,boolean:tt,string:lt,array:Kg,function:"function"}},edges:{arrows:{to:{enabled:{boolean:tt},scaleFactor:{number:Ne},type:{string:hT},imageHeight:{number:Ne},imageWidth:{number:Ne},src:{string:lt},__type__:{object:Ot,boolean:tt}},middle:{enabled:{boolean:tt},scaleFactor:{number:Ne},type:{string:hT},imageWidth:{number:Ne},imageHeight:{number:Ne},src:{string:lt},__type__:{object:Ot,boolean:tt}},from:{enabled:{boolean:tt},scaleFactor:{number:Ne},type:{string:hT},imageWidth:{number:Ne},imageHeight:{number:Ne},src:{string:lt},__type__:{object:Ot,boolean:tt}},__type__:{string:["from","to","middle"],object:Ot}},endPointOffset:{from:{number:Ne},to:{number:Ne},__type__:{object:Ot,number:Ne}},arrowStrikethrough:{boolean:tt},background:{enabled:{boolean:tt},color:{string:lt},size:{number:Ne},dashes:{boolean:tt,array:Kg},__type__:{object:Ot,boolean:tt}},chosen:{label:{boolean:tt,function:"function"},edge:{boolean:tt,function:"function"},__type__:{object:Ot,boolean:tt}},color:{color:{string:lt},highlight:{string:lt},hover:{string:lt},inherit:{string:["from","to","both"],boolean:tt},opacity:{number:Ne},__type__:{object:Ot,string:lt}},dashes:{boolean:tt,array:Kg},font:{color:{string:lt},size:{number:Ne},face:{string:lt},background:{string:lt},strokeWidth:{number:Ne},strokeColor:{string:lt},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Ne},multi:{boolean:tt,string:lt},bold:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},boldital:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},ital:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},mono:{color:{string:lt},size:{number:Ne},face:{string:lt},mod:{string:lt},vadjust:{number:Ne},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},hidden:{boolean:tt},hoverWidth:{function:"function",number:Ne},label:{string:lt,undefined:"undefined"},labelHighlightBold:{boolean:tt},length:{number:Ne,undefined:"undefined"},physics:{boolean:tt},scaling:{min:{number:Ne},max:{number:Ne},label:{enabled:{boolean:tt},min:{number:Ne},max:{number:Ne},maxVisible:{number:Ne},drawThreshold:{number:Ne},__type__:{object:Ot,boolean:tt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},selectionWidth:{function:"function",number:Ne},selfReferenceSize:{number:Ne},selfReference:{size:{number:Ne},angle:{number:Ne},renderBehindTheNode:{boolean:tt},__type__:{object:Ot}},shadow:{enabled:{boolean:tt},color:{string:lt},size:{number:Ne},x:{number:Ne},y:{number:Ne},__type__:{object:Ot,boolean:tt}},smooth:{enabled:{boolean:tt},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Ne},forceDirection:{string:["horizontal","vertical","none"],boolean:tt},__type__:{object:Ot,boolean:tt}},title:{string:lt,undefined:"undefined"},width:{number:Ne},widthConstraint:{maximum:{number:Ne},__type__:{object:Ot,boolean:tt,number:Ne}},value:{number:Ne,undefined:"undefined"},__type__:{object:Ot}},groups:{useDefaultGroups:{boolean:tt},__any__:dT,__type__:{object:Ot}},interaction:{dragNodes:{boolean:tt},dragView:{boolean:tt},hideEdgesOnDrag:{boolean:tt},hideEdgesOnZoom:{boolean:tt},hideNodesOnDrag:{boolean:tt},hover:{boolean:tt},keyboard:{enabled:{boolean:tt},speed:{x:{number:Ne},y:{number:Ne},zoom:{number:Ne},__type__:{object:Ot}},bindToWindow:{boolean:tt},autoFocus:{boolean:tt},__type__:{object:Ot,boolean:tt}},multiselect:{boolean:tt},navigationButtons:{boolean:tt},selectable:{boolean:tt},selectConnectedEdges:{boolean:tt},hoverConnectedEdges:{boolean:tt},tooltipDelay:{number:Ne},zoomView:{boolean:tt},zoomSpeed:{number:Ne},__type__:{object:Ot}},layout:{randomSeed:{undefined:"undefined",number:Ne,string:lt},improvedLayout:{boolean:tt},clusterThreshold:{number:Ne},hierarchical:{enabled:{boolean:tt},levelSeparation:{number:Ne},nodeSpacing:{number:Ne},treeSpacing:{number:Ne},blockShifting:{boolean:tt},edgeMinimization:{boolean:tt},parentCentralization:{boolean:tt},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ot,boolean:tt}},__type__:{object:Ot}},manipulation:{enabled:{boolean:tt},initiallyActive:{boolean:tt},addNode:{boolean:tt,function:"function"},addEdge:{boolean:tt,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ot,boolean:tt,function:"function"}},deleteNode:{boolean:tt,function:"function"},deleteEdge:{boolean:tt,function:"function"},controlNodeStyle:dT,__type__:{object:Ot,boolean:tt}},nodes:dT,physics:{enabled:{boolean:tt},barnesHut:{theta:{number:Ne},gravitationalConstant:{number:Ne},centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},forceAtlas2Based:{theta:{number:Ne},gravitationalConstant:{number:Ne},centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},repulsion:{centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},nodeDistance:{number:Ne},damping:{number:Ne},__type__:{object:Ot}},hierarchicalRepulsion:{centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},nodeDistance:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},maxVelocity:{number:Ne},minVelocity:{number:Ne},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:tt},iterations:{number:Ne},updateInterval:{number:Ne},onlyDynamicEdges:{boolean:tt},fit:{boolean:tt},__type__:{object:Ot,boolean:tt}},timestep:{number:Ne},adaptiveTimestep:{boolean:tt},wind:{x:{number:Ne},y:{number:Ne},__type__:{object:Ot}},__type__:{object:Ot,boolean:tt}},autoResize:{boolean:tt},clickToUse:{boolean:tt},locale:{string:lt},locales:{__any__:{any:d1t},__type__:{object:Ot}},height:{string:lt},width:{string:lt},__type__:{object:Ot}},Aee={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},v1t=function(r,t,n){var i;return!!(ll(r).call(r,"physics")&&ll(i=Aee.physics.solver).call(i,t)&&n.physics.solver!==t&&t!=="wind")},g1t=function(){function e(){ht(this,e)}return dt(e,[{key:"getDistances",value:function(t,n,i){for(var s={},o=t.edges,a=0;a<n.length;a++){var l=n[a],u={};s[l]=u;for(var h=0;h<n.length;h++)u[n[h]]=a==h?0:1e9}for(var c=0;c<i.length;c++){var p=o[i[c]];p.connected===!0&&s[p.fromId]!==void 0&&s[p.toId]!==void 0&&(s[p.fromId][p.toId]=1,s[p.toId][p.fromId]=1)}for(var m=n.length,w=0;w<m;w++)for(var b=n[w],T=s[b],_=0;_<m-1;_++)for(var A=n[_],x=s[A],I=_+1;I<m;I++){var O=n[I],C=s[O],g=Math.min(x[O],x[b]+T[O]);x[O]=g,C[A]=g}return s}}]),e}(),y1t=function(){function e(r,t,n){ht(this,e),this.body=r,this.springLength=t,this.springConstant=n,this.distanceSolver=new g1t}return dt(e,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.distanceSolver.getDistances(this.body,t,n);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();for(var o=.01,a=1,l=0,u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),h=5,c=1e9,p=0,m=0,w=0,b=0,T=0;c>o&&l<u;){l+=1;var _=this._getHighestEnergyNode(i),A=yn(_,4);for(p=A[0],c=A[1],m=A[2],w=A[3],b=c,T=0;b>a&&T<h;){T+=1,this._moveNode(p,m,w);var x=this._getEnergy(p),I=yn(x,3);b=I[0],m=I[1],w=I[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=0,o=n[0],a=0,l=0,u=0;u<n.length;u++){var h=n[u];if(i[h].predefinedPosition!==!0||i[h].isCluster===!0&&t===!0||i[h].options.fixed.x!==!0||i[h].options.fixed.y!==!0){var c=this._getEnergy(h),p=yn(c,3),m=p[0],w=p[1],b=p[2];s<m&&(s=m,o=h,a=w,l=b)}}return[o,s,a,l]}},{key:"_getEnergy",value:function(t){var n=yn(this.E_sums[t],2),i=n[0],s=n[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));return[o,i,s]}},{key:"_moveNode",value:function(t,n,i){for(var s=this.body.nodeIndices,o=this.body.nodes,a=0,l=0,u=0,h=o[t].x,c=o[t].y,p=this.K_matrix[t],m=this.L_matrix[t],w=0;w<s.length;w++){var b=s[w];if(b!==t){var T=o[b].x,_=o[b].y,A=p[b],x=m[b],I=1/Math.pow(Math.pow(h-T,2)+Math.pow(c-_,2),1.5);a+=A*(1-x*Math.pow(c-_,2)*I),l+=A*(x*(h-T)*(c-_)*I),u+=A*(1-x*Math.pow(h-T,2)*I)}}var O=a,C=l,g=n,R=u,M=i,U=(g/O+M/C)/(C/O-R/C),V=-(C*U+g)/O;o[t].x+=V,o[t].y+=U,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var s=0;s<n.length;s++){this.L_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.L_matrix[n[s]][n[o]]=i*t[n[s]][n[o]]}}},{key:"_createK_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var s=0;s<n.length;s++){this.K_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.K_matrix[n[s]][n[o]]=i*Math.pow(t[n[s]][n[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var s=0;s<t.length;s++){for(var o=t[s],a=n[o].x,l=n[o].y,u=0,h=0,c=s;c<t.length;c++){var p=t[c];if(p!==o){var m=n[p].x,w=n[p].y,b=1/Math.sqrt(Math.pow(a-m,2)+Math.pow(l-w,2));this.E_matrix[o][c]=[this.K_matrix[o][p]*(a-m-this.L_matrix[o][p]*(a-m)*b),this.K_matrix[o][p]*(l-w-this.L_matrix[o][p]*(l-w)*b)],this.E_matrix[p][s]=this.E_matrix[o][c],u+=this.E_matrix[o][c][0],h+=this.E_matrix[o][c][1]}}this.E_sums[o]=[u,h]}}},{key:"_updateE_matrix",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=this.E_matrix[t],o=this.K_matrix[t],a=this.L_matrix[t],l=i[t].x,u=i[t].y,h=0,c=0,p=0;p<n.length;p++){var m=n[p];if(m!==t){var w=s[p],b=w[0],T=w[1],_=i[m].x,A=i[m].y,x=1/Math.sqrt(Math.pow(l-_,2)+Math.pow(u-A,2)),I=o[m]*(l-_-a[m]*(l-_)*x),O=o[m]*(u-A-a[m]*(u-A)*x);s[p]=[I,O],h+=I,c+=O;var C=this.E_sums[m];C[0]+=I-b,C[1]+=O-T}}this.E_sums[t]=[h,c]}}]),e}();function kt(e,r,t){var n,i,s,o,a=this;if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:zht,clickToUse:!1},Un(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:nt(n=this.on).call(n,this),off:nt(i=this.off).call(i,this),emit:nt(s=this.emit).call(s,this),once:nt(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Kht(function(){return a.body.emitter.emit("_requestRedraw")}),this.groups=new lpt,this.canvas=new Xmt(this.body),this.selectionHandler=new H0t(this.body,this.canvas),this.interactionHandler=new n0t(this.body,this.canvas,this.selectionHandler),this.view=new Qmt(this.body,this.canvas),this.renderer=new qmt(this.body,this.canvas),this.physics=new Bmt(this.body),this.layoutEngine=new u1t(this.body),this.clustering=new Wmt(this.body),this.manipulation=new h1t(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new yyt(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new kmt(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new y1t(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(r)}NX(kt.prototype);kt.prototype.setOptions=function(e){var r=this;if(e===null&&(e=void 0),e!==void 0){var t=bht.validate(e,p1t);t===!0&&console.error("%cErrors have been found in the supplied options object.",LQ);var n=["locale","locales","clickToUse"];if(zv(n,this.options,e),e.locale!==void 0&&(e.locale=Uht(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),e.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new yht(this,this.body.container,Aee,this.canvas.pixelRatio,v1t)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Zr(i.nodes,this.nodesHandler.options),Zr(i.edges,this.edgesHandler.options),Zr(i.layout,this.layoutEngine.options),Zr(i.interaction,this.selectionHandler.options),Zr(i.interaction,this.renderer.options),Zr(i.interaction,this.interactionHandler.options),Zr(i.manipulation,this.manipulation.options),Zr(i.physics,this.physics.options),Zr(i.global,this.canvas.options),Zr(i.global,this.options),this.configurator.setModuleOptions(i)}e.clickToUse!==void 0?e.clickToUse===!0?this.activator===void 0&&(this.activator=new ght(this.canvas.frame),this.activator.on("change",function(){r.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};kt.prototype._updateVisibleIndices=function(){var e=this.body.nodes,r=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&!this.clustering._isClusteredNode(t)&&e[t].options.hidden===!1&&this.body.nodeIndices.push(e[t].id);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n],s=e[i.fromId],o=e[i.toId],a=s!==void 0&&o!==void 0,l=!this.clustering._isClusteredEdge(n)&&i.options.hidden===!1&&a&&s.options.hidden===!1&&o.options.hidden===!1;l&&this.body.edgeIndices.push(i.id)}};kt.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})};kt.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var r=Aht(e.dot);this.setData(r);return}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var t=Oht(e.gephi);this.setData(t);return}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};kt.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];lc(this.body.container)};kt.prototype._updateValueRange=function(e){var r,t=void 0,n=void 0,i=0;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r].getValue();s!==void 0&&(t=t===void 0?s:Math.min(s,t),n=n===void 0?s:Math.max(s,n),i+=s)}if(t!==void 0&&n!==void 0)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].setValueRange(t,n,i)};kt.prototype.isActive=function(){return!this.activator||this.activator.active};kt.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};kt.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};kt.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};kt.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};kt.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};kt.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};kt.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};kt.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};kt.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};kt.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};kt.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};kt.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};kt.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};kt.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};kt.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};kt.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};kt.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};kt.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};kt.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};kt.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};kt.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};kt.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};kt.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};kt.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};kt.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};kt.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};kt.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};kt.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};kt.prototype.getConnectedNodes=function(e){return this.body.nodes[e]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};kt.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};kt.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};kt.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};kt.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};kt.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};kt.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};kt.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};kt.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};kt.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};kt.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};kt.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};kt.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};kt.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};kt.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};kt.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};kt.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};kt.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};function Oee(){const e=Ps(!1);return St(()=>(e.current=!0,()=>{e.current=!1}),[]),Nh(()=>e.current,[])}const m1t={layout:{improvedLayout:!0},physics:{solver:"barnesHut",barnesHut:{springLength:200}},autoResize:!1,nodes:{borderWidth:1,shape:"circularImage",color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"},shadow:!0},edges:{smooth:!1,color:"lightgray",width:1,shadow:!0,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function op(e,r,t,n){e.length!=0&&e.forEach(function(i){var a,l;let s=r.get(i.id);if(!t){s||r.add(i);return}if(n!=null&&n.has(i.id)){s||r.add(i);return}let o=Fn.getDefaultProfile(i.id);if((a=o==null?void 0:o.name)!=null&&a.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}if((l=o==null?void 0:o.display_name)!=null&&l.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}s&&r.remove(i.id)})}const b1t=({props:e})=>{const r=Ps(null),t=Ps(),n=Oee(),[i,s]=Me(null),[o]=Me(new va),[a]=Me(new va),[l]=Me(new va),[u]=Me([]),[h,c]=Me(e.dir||"in"),[p,m]=Me(e.entitytype);St(()=>{if(r.current){var T={nodes:a,edges:l};return t.current=r.current&&new kt(r.current,T,m1t),t.current.on("click",function(_){if(_.nodes.length==0||!n())return;const A=_.nodes[0],x=wr.g.vertices[A];if(A==i)return;let I=x.entityType==1?SI(A):me.toNostrBech32Address(Rc.pub(A),"note");e.setNpub(I),s(A),w(A).then(O=>{let C=new Set([vt(e.hexKey),A]);O&&op(O,a,e.filter,C)})}),()=>{var _,A;(_=t.current)==null||_.off("click"),(A=t.current)==null||A.destroy()}}},[r]),St(()=>{let T=vt(e.hexKey);return s(T),(e.dir!=h||e.entitytype!=p)&&(l.clear(),o.clear(),a.clear(),c(e.dir),m(e.entitytype)),w(T).then(_=>{if(!n())return;let A=new Set([vt(e.hexKey)]);_&&op(_,a,e.filter,A)}),()=>{u.forEach(_=>_==null?void 0:_())}},[e.npub,e.dir,e.entitytype]),St(()=>{if(o.length==0&&a.length==0)return;let T=new Set([vt(e.hexKey)]);op(o,a,e.filter,T)},[e.filter]);async function w(T){let _=wr.g.vertices[T];_||(_=new IP(T,0));let A={};if(_.entityType==1&&(A[T]=_),e.dir=="in")for(const g in _.in){const R=_.in[g];if(!R||!R.out||R.val==0)continue;A[R.out.id]=R.out;let M=By(R.val),U=R.out.degree>oa;l.get(R.key)||l.add({id:R.key,from:R.out.id,to:T,color:M,dashes:U})}let x=Nee(e.entitytype);if(e.dir=="out")for(const g in _.out){const R=_.out[g];if(!R||R.val==0||!R.in||R.in.entityType!=x)continue;A[R.in.id]=R.in;let M=By(R.val);l.get(R.key)||l.add({id:R.key,from:T,to:R.in.id,color:M})}let I=Object.values(A),O=I.map(g=>En(g.id));if(await Fn.getProfiles(O),!n())return;let C=new va;_.entityType==2&&I.push(_);for(const g of I){let R;g.entityType==1?R=Cee(g,o):R=await Pee(g,o),R&&C.add(R)}return C}const b=T=>{let _=T||i;if(!_)return;a.clear(),o.clear(),l.clear(),w(_).then(x=>{if(!n())return;let I=new Set([vt(e.hexKey)]);x&&op(x,a,e.filter,I)});const A=SI(_);A!=e.npub&&e.setNpub(A)};return e.npub?v(rt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(ft,{when:p=="key",children:v(qV,{dir:e.dir,setSearch:e.setSearch})}),v("div",{className:"flex gap-4",children:""}),v("div",{className:"flex gap-4",children:v("button",{className:"btn btn-primary btn-sm",onClick:()=>{var T;return b((T=t.current)==null?void 0:T.getSelectedNodes()[0])},children:be("Focus")})}),v("div",{className:"flex gap-4",children:v(Kt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"path"}),children:be("Path")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null};class w1t{constructor(){}async getEventById(r){const t=Fe.db.by("id",r);if(t)return t;let n=await fetch(`https://api.iris.to/event/${r}`);if(n.status===200){let i=await n.json();return i&&Fe.handle(i,!0),i}}}const $1t=new w1t,_1t={layout:{randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!0,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"roots"}},physics:{stabilization:!1},autoResize:!1,nodes:{borderWidth:1,shape:"circularImage",color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"}},edges:{smooth:!1,color:"lightgray",width:1,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function Cee(e,r){let t=Fn.getDefaultProfile(e.id),n=Fn.ensurePicture(t),i=r.get(e.id);if(i){i.label!=t.name&&(i.label=t.name),i.image!=n&&(i.image=n);return}return i={id:e.id,label:t.name,image:n,size:30},r.add(i),i}async function Pee(e,r){let t=En(e.id),n=Fe.db.by("id",t);n||(n=await $1t.getEventById(t));let i=await Fn.getProfile(n==null?void 0:n.pubkey),s=((i==null?void 0:i.name)||"").trim().slice(0,25),o=n.id.slice(0,4),a=((n==null?void 0:n.content)||"").trim().slice(0,25)+((n==null?void 0:n.content.length)>25?"...":""),l=n!=null&&n.created_at?new Date((n==null?void 0:n.created_at)*1e3).toDateString():"",u=`Note ${o}
${s}
${l}
${a}
`,h=r.get(e.id);if(h){h.label!=u&&(h.label=u);return}return h={id:e.id,label:u,shape:"box",font:{align:"left"}},r.add(h),h}const x1t=({props:e})=>{const r=Ps(null),t=Ps(),[n]=Me(new va),[i]=Me(new va),s=Oee(),[o,a]=Me(null),[l]=Me(new va),[u]=Me([]);St(()=>{if(r.current){var w={nodes:i,edges:l};return t.current=r.current&&new kt(r.current,w,_1t),t.current.on("click",function(b){if(b.nodes.length==0)return;const T=b.nodes[0];let A=wr.g.vertices[T].entityType==1?SI(T):me.toNostrBech32Address(Rc.pub(T),"note");e.setNpub(A)}),()=>{var b,T;(b=t.current)==null||b.off("click"),(T=t.current)==null||T.destroy()}}},[]),St(()=>{let w=vt(e.hexKey),b=wr.g.vertices[w];b||(b=new IP(w,0)),h(b);let T=b==null?void 0:b.score;return a(_=>({..._,vId:w,score:T})),()=>{u.forEach(_=>_==null?void 0:_())}},[e.npub]);async function h(w){var x;let b=wr.g.getPaths(w.id),T=Object.create(null);for(let I of b)I!=null&&I.in&&(T[I.in.id]=I.in),I!=null&&I.out&&(T[I.out.id]=I.out);w.entityType!=1&&delete T[w.id];let _=Object.values(T),A=_.map(I=>En(I.id));await Fn.getProfiles(A),s()&&(w.entityType!=1&&_.push(w),await c(_,b),(x=t.current)==null||x.redraw())}async function c(w,b){var _,A;for(let x of w)x.entityType==1?Cee(x,n):await Pee(x,n);for(let x of b){let I=By(x.val);l.get(x.key)||l.add({id:x.key,from:(_=x.out)==null?void 0:_.id,to:(A=x.in)==null?void 0:A.id,color:I})}let T=new Set([vt(e.hexKey)]);op(n,i,e.filter,T)}St(()=>{var b;if(n.length==0&&i.length==0)return;let w=new Set([vt(e.hexKey),vt(me.getPubKey())]);op(n,i,e.filter,w),(b=t.current)==null||b.redraw()},[e.filter]);const p=w=>{let b=w==null?void 0:w.values();return b?b.join("/"):null},m=w=>{if(!w||!(w==null?void 0:w.resolve()))return null;let{val:T,degree:_,count:A,hasScore:x}=w.resolve(),I=Math.round((T+A)*100/(A*2));return v(rt,{children:x?v(rt,{children:[v("span",{children:["Trust score is ",T]}),v("span",{children:[" from ",A==1?`${A} claim`:`a total of ${A} claims`]}),v("span",{children:[" at degree ",_]}),v("span",{children:[" resulting in ",I,"% trust"]})]}):v("span",{children:"No Score"})})};return e.npub?v(rt,{children:[!(o!=null&&o.score)&&v("div",{className:"text-center",children:be("No results")}),(o==null?void 0:o.score)&&v(rt,{children:[v("div",{className:"flex flex-col gap-4",children:[v("div",{children:["Aggregated result of score is ",p(o==null?void 0:o.score)]}),v("div",{children:m(o==null?void 0:o.score)})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:v(Kt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"graph"}),children:be("Focus")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null},E1t=e=>{const r=bm(vt(e.hexPub),["badName","neutralName","goodName"],"");return v(rt,{children:v("span",{className:r==null?void 0:r.option,children:`${be("note")} ${e.hexPub.slice(0,4)}`})})};function S1t(e,r){let t=e==null?void 0:e.toLocaleLowerCase();return t=="trust"?1:t=="distrust"?-1:r}function Nee(e,r=1){let t=e==null?void 0:e.toLocaleLowerCase();return t=="key"?1:t=="item"?2:r}function pT(e){return e!=null&&e.toLocaleLowerCase().startsWith("note")?"item":"key"}const k1t=e=>{const[r,t]=Me({ready:!1}),[n,i]=Me(pT(e.npub)),[s,o]=Me(e.npub||me.toNostrBech32Address(me.getPubKey(),"npub")),[a,l]=Me(e.trusttype||"trust"),[u,h]=Me(e.dir||"out"),[c,p]=Me(e.view||"graph"),[m,w]=Me(e.filter||""),[b,T]=Me(null),[_]=Me([]),A=me.toNostrHexAddress(s),x=A==me.getPubKey(),I=On.debounce(R=>w(R),500,{trailing:!0});St(()=>(wr.whenReady(()=>{T(wr.g.vertices[vt(s)]),t(R=>({...R,ready:!0}))}),()=>{_.forEach(R=>R==null?void 0:R())}),[]);const O=Nh(R=>{T(wr.g.vertices[vt(R)]),o(R),i(pT(R))},[]);St(()=>{if(e.npub!=s){let R=e.npub||me.toNostrBech32Address(me.getPubKey(),"npub");i(pT(R)),O(R)}e.trusttype!=a&&l(e.trusttype||"trust"),e.dir!=u&&h(e.dir||"out"),e.view!=c&&p(e.view||"graph"),e.filter!=m&&w(e.filter||"")},[e.npub,e.trusttype,e.dir,e.view,e.filter]);function C(R){const M={npub:s,trusttype:a,dir:u,view:c,filter:m,...R};return`/graph/${M.npub}/${M.dir}/${M.trusttype}/${M.view}${M.filter?"/"+M.filter:""}`}const g=()=>{let R={npub:s,hexKey:A,entitytype:n,trusttype:a,dir:u,view:c,filter:m,setNpub:O,setSearch:C};return c=="path"?v(x1t,{props:R}):c=="list"?v(hOe,{props:R}):v(b1t,{props:R})};return r.ready?v(rt,{children:[v(qc,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${s}`,children:[n=="key"&&v($r,{pub:s}),n=="item"&&v(E1t,{hexPub:A})]}),v("span",{style:{flex:1},className:"ml-1",children:c})]})}),VV(b==null?void 0:b.score,s,!0),v("div",{className:"text-sm flex flex-2 gap-2",children:["In the context of ",v($r,{pub:me.getPubKey()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-8",children:[v(oOe,{view:c,setSearch:C,me:x}),v("form",{children:v("label",{children:v("input",{type:"text",placeholder:be("Filter"),tabIndex:1,onInput:R=>{var M;return I((M=R==null?void 0:R.target)==null?void 0:M.value)},className:"input-bordered border-neutral-500 input input-sm w-full"})})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),g()]}):null};_h.init({autologin:!1,autofollow:!1});class T1t extends Nn{componentDidMount(){window.onload=()=>{Re.get("loggedIn").on(this.inject())},Re.get("unseenMsgsTotal").on(this.inject()),KU.then(()=>this.setState({translationLoaded:!0})),Re.get("showLoginModal").on(this.inject())}handleRoute(r){const t=r.url;this.setState({activeRoute:t}),Re.get("activeRoute").put(t)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}electronCmd(r){console.log(r)}render(){let r="";const t=this.state;t.activeRoute&&t.activeRoute.length>1&&(r=xr.capitalize(t.activeRoute.replace("/","").split("?")[0]));const n=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) %s | Dpeep`:"%s | Dpeep",i=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) Dpeep`:"Dpeep";if(!t.translationLoaded)return v("div",{});if(!t.loggedIn&&window.location.pathname.length<=1)return v(Z1,{fullScreen:!0});const s=o=>{var a;return(a=o.id)!=null&&a.startsWith("note")?v(g8,{id:o.id}):v(Wb,{id:o.id,tab:"posts",path:o.path})};return v("div",{className:"flex justify-center",children:[v("section",{className:"flex w-full max-w-screen-xl justify-between relative",children:[v(ft,{when:t.loggedIn,children:v(Xke,{})}),v(vh,{titleTemplate:n,defaultTitle:i,children:[v("title",{children:r}),v("meta",{name:"description",content:"Connecting People"}),v("meta",{property:"og:type",content:"website"}),v("meta",{property:"og:title",content:r}),v("meta",{property:"og:description",content:"Connecting People"}),v("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),v("meta",{name:"twitter:card",content:"summary_large_image"}),v("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),v("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),v("div",{className:"pb-16 md:pb-0 relative flex h-full flex-grow flex-col w-1/2",children:v(oz,{onChange:o=>this.handleRoute(o),children:[v($Ae,{path:"/"}),v(aV,{path:"/search",focus:!0}),v(SAe,{path:"/key"}),v(wAe,{path:"/global"}),v(xAe,{path:"/search/:keyword"}),v(Z1,{path:"/login",fullScreen:!0}),v(_Ae,{path:"/notifications"}),v(n8,{path:"/chat/hashtag/:hashtag?"}),v(n8,{path:"/chat/:id?"}),v(g8,{path:"/post/:id+"}),v(iOe,{path:"/torrent/:id+"}),v(cTe,{path:"/about"}),v(rOe,{path:"/settings/:page?"}),v(RAe,{path:"/logout"}),v(s8,{path:"/explorer/:path?"}),v(s8,{path:"/explorer/:path+"}),v(aAe,{path:"/profile/edit"}),v(nOe,{path:"/subscribe"}),v(Wb,{path:"/profile/:id",tab:"posts"}),v(Wb,{path:"/:id/replies",tab:"replies"}),v(Wb,{path:"/:id/likes",tab:"likes"}),v(a8,{path:"/follows/:id"}),v(a8,{followers:!0,path:"/followers/:id"}),v(k1t,{path:"/graph/:npub?/:dir?/:trusttype?/:view?/:filter?"}),v(s,{path:"/:id"})]})}),t.loggedIn?v(sOe,{}):null,v(Iwe,{}),v(kwe,{})]}),v(ft,{when:t.showLoginModal,children:v(gl,{centerVertically:!0,showContainer:!0,onClose:()=>Re.get("showLoginModal").put(!1),children:v(Z1,{})})})]})}}xr.showConsoleWarning();Sp(v(T1t,{}),document.getElementById("app"));export{kn as c,ro as g,rge as r};
