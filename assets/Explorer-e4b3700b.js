import{k as $,y as x,h as c,o as e,al as y,_ as R,p as D,a as V,S as E,l as F,am as L,V as O}from"./index-88716094.js";function B({title:n,titleId:t,...s},l){return x("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":t},s),n?x("title",{id:t},n):null,x("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const I=$(B),T=I,A=({level:n,parent:t})=>{const[s,l]=c(!1),[m,i]=c(!1),[u,h]=c(""),[d,p]=c(""),[a,f]=c(""),b=()=>{l(!s),i(!1)},g=()=>{i(!m),l(!1)},N=r=>{r.preventDefault(),t.get(u).put(y),h(""),l(!1)},o=r=>{r.preventDefault(),t.get(d).put(a),p(""),f(""),i(!1)};return e("div",{className:"pb-1",style:{paddingLeft:`${n*15+9}px`},children:[e("div",{className:"flex flex-row items-center gap-4",children:[e("a",{className:`link text-sm ${s?"underline":""}`,onClick:b,children:"New Directory"}),e("a",{className:`link text-sm ${m?"underline":""}`,onClick:g,children:"New Value"})]}),s&&e("form",{onSubmit:N,className:"py-2 flex gap-2",children:[e("input",{className:"input input-sm",type:"text",placeholder:"Directory Name",value:u,onChange:r=>h(r.target.value)}),e("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Create"}),e("button",{className:"btn btn-sm btn-neutral",onClick:()=>l(!1),children:"Cancel"})]}),m&&e("form",{onSubmit:o,className:"py-2 flex gap-2",children:[e("input",{className:"input input-sm",type:"text",placeholder:"Key",value:d,onChange:r=>p(r.target.value)}),e("input",{className:"input input-sm",type:"text",placeholder:"Value",value:a,onChange:r=>f(r.target.value)}),e("button",{className:"btn btn-sm btn-primary",type:"submit",children:"Create"}),e("button",{className:"btn btn-sm btn-neutral",onClick:()=>i(!1),children:"Cancel"})]})]})},w=20,M=({displayName:n,value:t,setValue:s})=>{const[l,m]=c(!1),[i,u]=c(JSON.stringify(t)),h=R(null),d=()=>n==="priv"||n==="key"?`${t.substring(0,2)}...`:t.length>w?`${t.substring(0,w)}...`:t,p=()=>{let a;try{a=JSON.parse(i)}catch{a=i}s(a)};return D(()=>()=>{p()},[]),typeof t=="string"?e("span",{className:"text-xs text-blue-400",children:[t.length>w&&e("span",{className:"text-xs text-blue-200 cursor-pointer",onClick:()=>m(!l),children:["Show ",l?"less":"more"," "]}),e("span",{ref:h,contentEditable:!0,onBlur:p,onInput:a=>u(a.currentTarget.textContent),children:l?t:d()})]}):e("span",{className:"text-xs text-green-400",children:e("span",{ref:h,contentEditable:!0,onBlur:p,onInput:a=>u(a.currentTarget.textContent),children:JSON.stringify(t)})})};function C({node:n,value:t=y,level:s=0,expanded:l=!1,name:m,parentCounter:i=0}){const[u,h]=c(new V),[d,p]=c(l),a=t===y;D(()=>{if(a)return n.map((o,r)=>{if(!u.has(r)){const v=r.split("/").pop();h(k=>{const S=new V(k);return S.set(v,{node:n.get(v),value:o}),S})}})},[n.id,t]);const f=()=>p(!d),b=i%2===0?"bg-gray-800":"bg-gray-700",g=m||n.id.split("/").pop(),N=`${s*15+(a?0:16)}px`;return e("div",{className:`relative w-full ${b}`,children:[e("div",{className:`flex items-center text-white ${a?"cursor-pointer":""}`,onClick:f,style:{paddingLeft:N},children:[e(E,{when:a,children:e(T,{className:`w-4 h-4 transition ${d?"transform rotate-90":""}`})}),e("span",{className:"ml-1 w-1/3 truncate",children:g}),e(E,{when:!a,children:e("div",{className:"ml-auto w-1/2",children:e(M,{displayName:g,value:t,setValue:o=>n.put(o)})})})]}),a&&d?e("div",{children:[e(A,{level:s+1,parent:n}),Array.from(u.values()).map((o,r)=>e(C,{node:o.node,level:s+1,expanded:!1,value:o.value,parentCounter:i+r+1},n.id+o.node.id))]}):null]})}const J=({p:n})=>e(O,{hideSideBar:!0,children:[e("div",{children:n}),e("div",{className:"md:m-4",children:e(C,{expanded:!0,name:"Local state",node:F})}),e("div",{className:"md:m-4",children:e(C,{expanded:!0,name:"Public state",node:L})})]});export{J as default};
