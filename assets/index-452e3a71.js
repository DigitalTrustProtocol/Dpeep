var Sre=Object.defineProperty;var kre=(e,r,t)=>r in e?Sre(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Z=(e,r,t)=>(kre(e,typeof r!="symbol"?r+"":r,t),t),d$=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var Jr=(e,r,t)=>(d$(e,r,"read from private field"),t?t.call(e):r.get(e)),yr=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},vs=(e,r,t,n)=>(d$(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var dn=(e,r,t)=>(d$(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var wv,Le,oL,Ou,n4,aL,$E,lL,Uh={},uL=[],Tre=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,i1=Array.isArray;function ua(e,r){for(var t in r)e[t]=r[t];return e}function cL(e){var r=e.parentNode;r&&r.removeChild(e)}function Oe(e,r,t){var n,i,s,o={};for(s in r)s=="key"?n=r[s]:s=="ref"?i=r[s]:o[s]=r[s];if(arguments.length>2&&(o.children=arguments.length>3?wv.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return cp(e,o,n,i,null)}function cp(e,r,t,n,i){var s={type:e,props:r,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++oL};return i==null&&Le.vnode!=null&&Le.vnode(s),s}function s1(){return{current:null}}function Be(e){return e.children}function vn(e,r){this.props=e,this.context=r}function Ap(e,r){if(r==null)return e.__?Ap(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?Ap(e):null}function hL(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return hL(e)}}function xE(e){(!e.__d&&(e.__d=!0)&&Ou.push(e)&&!O0.__r++||n4!==Le.debounceRendering)&&((n4=Le.debounceRendering)||aL)(O0)}function O0(){var e,r,t,n,i,s,o,a,l;for(Ou.sort($E);e=Ou.shift();)e.__d&&(r=Ou.length,n=void 0,i=void 0,s=void 0,a=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],i=[],(s=ua({},o)).__v=o.__v+1,DI(l,o,s,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??Ap(o),o.__h,i),vL(n,o,i),o.__e!=a&&hL(o)),Ou.length>r&&Ou.sort($E));O0.__r=0}function dL(e,r,t,n,i,s,o,a,l,u,d){var h,v,g,b,m,x,E,k,$,S=0,T=n&&n.__k||uL,O=T.length,I=O,P=r.length;for(t.__k=[],h=0;h<P;h++)(b=t.__k[h]=(b=r[h])==null||typeof b=="boolean"||typeof b=="function"?null:typeof b=="string"||typeof b=="number"||typeof b=="bigint"?cp(null,b,null,null,b):i1(b)?cp(Be,{children:b},null,null,null):b.__b>0?cp(b.type,b.props,b.key,b.ref?b.ref:null,b.__v):b)!=null?(b.__=t,b.__b=t.__b+1,(k=Ire(b,T,E=h+S,I))===-1?g=Uh:(g=T[k]||Uh,T[k]=void 0,I--),DI(e,b,g,i,s,o,a,l,u,d),m=b.__e,(v=b.ref)&&g.ref!=v&&(g.ref&&BI(g.ref,null,b),d.push(v,b.__c||m,b)),m!=null&&(x==null&&(x=m),($=g===Uh||g.__v===null)?k==-1&&S--:k!==E&&(k===E+1?S++:k>E?I>P-E?S+=k-E:S--:S=k<E&&k==E-1?k-E:0),E=h+S,typeof b.type!="function"||k===E&&g.__k!==b.__k?typeof b.type=="function"||k===E&&!$?b.__d!==void 0?(l=b.__d,b.__d=void 0):l=m.nextSibling:l=pL(e,m,l):l=fL(b,l,e),typeof t.type=="function"&&(t.__d=l))):(g=T[h])&&g.key==null&&g.__e&&(g.__e==l&&(l=Ap(g)),EE(g,g,!1));for(t.__e=x,h=O;h--;)T[h]!=null&&(typeof t.type=="function"&&T[h].__e!=null&&T[h].__e==t.__d&&(t.__d=T[h].__e.nextSibling),EE(T[h],T[h]))}function fL(e,r,t){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,r=typeof n.type=="function"?fL(n,r,t):pL(t,n.__e,r));return r}function Js(e,r){return r=r||[],e==null||typeof e=="boolean"||(i1(e)?e.some(function(t){Js(t,r)}):r.push(e)),r}function pL(e,r,t){return t==null||t.parentNode!==e?e.insertBefore(r,null):r==t&&r.parentNode!=null||e.insertBefore(r,t),r.nextSibling}function Ire(e,r,t,n){var i=e.key,s=e.type,o=t-1,a=t+1,l=r[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<r.length;){if(o>=0){if((l=r[o])&&i==l.key&&s===l.type)return o;o--}if(a<r.length){if((l=r[a])&&i==l.key&&s===l.type)return a;a++}}return-1}function Ore(e,r,t,n,i){var s;for(s in t)s==="children"||s==="key"||s in r||A0(e,s,null,t[s],n);for(s in r)i&&typeof r[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===r[s]||A0(e,s,r[s],t[s],n)}function i4(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||Tre.test(r)?t:t+"px"}function A0(e,r,t,n,i){var s;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(r in n)t&&r in t||i4(e.style,r,"");if(t)for(r in t)n&&t[r]===n[r]||i4(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")s=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+s]=t,t?n||e.addEventListener(r,s?o4:s4,s):e.removeEventListener(r,s?o4:s4,s);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function s4(e){return this.l[e.type+!1](Le.event?Le.event(e):e)}function o4(e){return this.l[e.type+!0](Le.event?Le.event(e):e)}function DI(e,r,t,n,i,s,o,a,l,u){var d,h,v,g,b,m,x,E,k,$,S,T,O,I,P,R=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=r.__e=t.__e,r.__h=null,s=[a]),(d=Le.__b)&&d(r);e:if(typeof R=="function")try{if(E=r.props,k=(d=R.contextType)&&n[d.__c],$=d?k?k.props.value:d.__:n,t.__c?x=(h=r.__c=t.__c).__=h.__E:("prototype"in R&&R.prototype.render?r.__c=h=new R(E,$):(r.__c=h=new vn(E,$),h.constructor=R,h.render=Cre),k&&k.sub(h),h.props=E,h.state||(h.state={}),h.context=$,h.__n=n,v=h.__d=!0,h.__h=[],h._sb=[]),h.__s==null&&(h.__s=h.state),R.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=ua({},h.__s)),ua(h.__s,R.getDerivedStateFromProps(E,h.__s))),g=h.props,b=h.state,h.__v=r,v)R.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(R.getDerivedStateFromProps==null&&E!==g&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(E,$),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(E,h.__s,$)===!1||r.__v===t.__v)){for(r.__v!==t.__v&&(h.props=E,h.state=h.__s,h.__d=!1),r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(D){D&&(D.__=r)}),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(E,h.__s,$),h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(g,b,m)})}if(h.context=$,h.props=E,h.__P=e,h.__e=!1,T=Le.__r,O=0,"prototype"in R&&R.prototype.render){for(h.state=h.__s,h.__d=!1,T&&T(r),d=h.render(h.props,h.state,h.context),I=0;I<h._sb.length;I++)h.__h.push(h._sb[I]);h._sb=[]}else do h.__d=!1,T&&T(r),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++O<25);h.state=h.__s,h.getChildContext!=null&&(n=ua(ua({},n),h.getChildContext())),v||h.getSnapshotBeforeUpdate==null||(m=h.getSnapshotBeforeUpdate(g,b)),dL(e,i1(P=d!=null&&d.type===Be&&d.key==null?d.props.children:d)?P:[P],r,t,n,i,s,o,a,l,u),h.base=r.__e,r.__h=null,h.__h.length&&o.push(h),x&&(h.__E=h.__=null)}catch(D){r.__v=null,(l||s!=null)&&(r.__e=a,r.__h=!!l,s[s.indexOf(a)]=null),Le.__e(D,r,t)}else s==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=Are(t.__e,r,t,n,i,s,o,l,u);(d=Le.diffed)&&d(r)}function vL(e,r,t){for(var n=0;n<t.length;n++)BI(t[n],t[++n],t[++n]);Le.__c&&Le.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){Le.__e(s,i.__v)}})}function Are(e,r,t,n,i,s,o,a,l){var u,d,h,v=t.props,g=r.props,b=r.type,m=0;if(b==="svg"&&(i=!0),s!=null){for(;m<s.length;m++)if((u=s[m])&&"setAttribute"in u==!!b&&(b?u.localName===b:u.nodeType===3)){e=u,s[m]=null;break}}if(e==null){if(b===null)return document.createTextNode(g);e=i?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,g.is&&g),s=null,a=!1}if(b===null)v===g||a&&e.data===g||(e.data=g);else{if(s=s&&wv.call(e.childNodes),d=(v=t.props||Uh).dangerouslySetInnerHTML,h=g.dangerouslySetInnerHTML,!a){if(s!=null)for(v={},m=0;m<e.attributes.length;m++)v[e.attributes[m].name]=e.attributes[m].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(Ore(e,g,v,i,a),h)r.__k=[];else if(dL(e,i1(m=r.props.children)?m:[m],r,t,n,i&&b!=="foreignObject",s,o,s?s[0]:t.__k&&Ap(t,0),a,l),s!=null)for(m=s.length;m--;)s[m]!=null&&cL(s[m]);a||("value"in g&&(m=g.value)!==void 0&&(m!==e.value||b==="progress"&&!m||b==="option"&&m!==v.value)&&A0(e,"value",m,v.value,!1),"checked"in g&&(m=g.checked)!==void 0&&m!==e.checked&&A0(e,"checked",m,v.checked,!1))}return e}function BI(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(n){Le.__e(n,t)}}function EE(e,r,t){var n,i;if(Le.unmount&&Le.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||BI(n,null,r)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){Le.__e(s,r)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&EE(n[i],r,t||typeof e.type!="function");t||e.__e==null||cL(e.__e),e.__=e.__e=e.__d=void 0}function Cre(e,r,t){return this.constructor(e,t)}function ad(e,r,t){var n,i,s,o;Le.__&&Le.__(e,r),i=(n=typeof t=="function")?null:t&&t.__k||r.__k,s=[],o=[],DI(r,e=(!n&&t||r).__k=Oe(Be,null,[e]),i||Uh,Uh,r.ownerSVGElement!==void 0,!n&&t?[t]:i?null:r.firstChild?wv.call(r.childNodes):null,s,!n&&t?t:i?i.__e:r.firstChild,n,o),vL(s,e,o)}function gL(e,r){ad(e,r,gL)}function yL(e,r,t){var n,i,s,o,a=ua({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),r)s=="key"?n=r[s]:s=="ref"?i=r[s]:a[s]=r[s]===void 0&&o!==void 0?o[s]:r[s];return arguments.length>2&&(a.children=arguments.length>3?wv.call(arguments,2):t),cp(e.type,a,n||e.key,i||e.ref,null)}function MI(e,r){var t={__c:r="__cC"+lL++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[r]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,xE(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}wv=uL.slice,Le={__e:function(e,r,t,n){for(var i,s,o;r=r.__;)if((i=r.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},oL=0,vn.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ua({},this.state),typeof e=="function"&&(e=e(ua({},t),this.props)),e&&ua(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),xE(this))},vn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),xE(this))},vn.prototype.render=Be,Ou=[],aL=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$E=function(e,r){return e.__v.__b-r.__v.__b},O0.__r=0,lL=0;typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.17.0",Le,{Fragment:Be,Component:vn});function a4(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Pre(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(i,s){if(i){if(typeof i=="string")return a4(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a4(i,s):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l4={};function na(e){return e.type===Be?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var hp=[],uh=[];function mL(){return hp.length>0?hp[hp.length-1]:null}var u4=!1;function f$(e){return typeof e.type=="function"&&e.type!=Be}function si(e){for(var r=[e],t=e;t.__o!=null;)r.push(t.__o),t=t.__o;return r.reduce(function(n,i){n+="  in "+na(i);var s=i.__source;return s?n+=" (at "+s.fileName+":"+s.lineNumber+")":u4||(u4=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var Nre=typeof WeakMap=="function";function bL(e){return e?typeof e.type=="function"?e.__===null?e.__e!==null&&e.__e.parentNode!==null?e.__e.parentNode.localName:"":bL(e.__):e.type:""}var Rre=vn.prototype.setState;vn.prototype.setState=function(e,r){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+si(mL())),Rre.call(this,e,r)};var Dre=vn.prototype.forceUpdate;function Qo(e){var r=e.props,t=na(e),n="";for(var i in r)if(r.hasOwnProperty(i)&&i!=="children"){var s=r[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),n+=" "+i+"="+JSON.stringify(s)}var o=r.children;return"<"+t+n+(o&&o.length?">..</"+t+">":" />")}vn.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+si(mL())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+si(this.__v)),Dre.call(this,e)},function(){(function(){var m=Le.__b,x=Le.diffed,E=Le.__,k=Le.vnode,$=Le.__r;Le.diffed=function(S){f$(S)&&uh.pop(),hp.pop(),x&&x(S)},Le.__b=function(S){f$(S)&&hp.push(S),m&&m(S)},Le.__=function(S,T){uh=[],E&&E(S,T)},Le.vnode=function(S){S.__o=uh.length>0?uh[uh.length-1]:null,k&&k(S)},Le.__r=function(S){f$(S)&&uh.push(S),$&&$(S)}})();var e=!1,r=Le.__b,t=Le.diffed,n=Le.vnode,i=Le.__r,s=Le.__e,o=Le.__,a=Le.__h,l=Le.__c,u=Nre?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,d=[],h=[];Le.__e=function(m,x,E,k){if(x&&x.__c&&typeof m.then=="function"){var $=m;m=new Error("Missing Suspense. The throwing component was: "+na(x));for(var S=x;S;S=S.__)if(S.__c&&S.__c.__c){m=$;break}if(m instanceof Error)throw m}try{(k=k||{}).componentStack=si(x),s(m,x,E,k),typeof m.then!="function"&&setTimeout(function(){throw m})}catch(T){throw T}},Le.__=function(m,x){if(!x)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var E;switch(x.nodeType){case 1:case 11:case 9:E=!0;break;default:E=!1}if(!E){var k=na(m);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+x+" instead: render(<"+k+" />, "+x+");")}o&&o(m,x)},Le.__b=function(m){var x=m.type;if(typeof x!="string"||x!=="thead"&&x!=="tfoot"&&x!=="tbody"&&x!=="tr"&&x!=="td"&&x!=="th"||h.push(m),e=!0,x===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+Qo(m)+`

`+si(m));if(x!=null&&typeof x=="object")throw x.__k!==void 0&&x.__e!==void 0?new Error("Invalid type passed to createElement(): "+x+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+na(m)+" = "+Qo(x)+`;
  let vnode = <My`+na(m)+` />;

This usually happens when you export a JSX literal and not the component.

`+si(m)):new Error("Invalid type passed to createElement(): "+(Array.isArray(x)?"array":x));if(m.ref!==void 0&&typeof m.ref!="function"&&typeof m.ref!="object"&&!("$$typeof"in m))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof m.ref+`] instead
`+Qo(m)+`

`+si(m));if(typeof m.type=="string"){for(var E in m.props)if(E[0]==="o"&&E[1]==="n"&&typeof m.props[E]!="function"&&m.props[E]!=null)throw new Error(`Component's "`+E+'" property should be a function, but got ['+typeof m.props[E]+`] instead
`+Qo(m)+`

`+si(m))}if(typeof m.type=="function"&&m.type.propTypes){if(m.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(m.type)){var k="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var $=m.type();u.lazyPropTypes.set(m.type,!0),console.warn(k+"Component wrapped in lazy() is "+na($))}catch{console.warn(k+"We will log the wrapped component's name once it is loaded.")}}var S=m.props;m.type.__f&&delete(S=function(T,O){for(var I in O)T[I]=O[I];return T}({},S)).ref,function(T,O,I,P,R){Object.keys(T).forEach(function(D){var F;try{F=T[D](O,D,P,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(K){F=K}F&&!(F.message in l4)&&(l4[F.message]=!0,console.error("Failed prop type: "+F.message+(R&&`
`+R()||"")))})}(m.type.propTypes,S,0,na(m),function(){return si(m)})}r&&r(m)},Le.__r=function(m){i&&i(m),e=!0},Le.__h=function(m,x,E){if(!m||!e)throw new Error("Hook can only be invoked from render methods.");a&&a(m,x,E)};var v=function(m,x){return{get:function(){var E="get"+m+x;d&&d.indexOf(E)<0&&(d.push(E),console.warn("getting vnode."+m+" is deprecated, "+x))},set:function(){var E="set"+m+x;d&&d.indexOf(E)<0&&(d.push(E),console.warn("setting vnode."+m+" is not allowed, "+x))}}},g={nodeName:v("nodeName","use vnode.type"),attributes:v("attributes","use vnode.props"),children:v("children","use vnode.props.children")},b=Object.create({},g);Le.vnode=function(m){var x=m.props;if(m.type!==null&&x!=null&&("__source"in x||"__self"in x)){var E=m.props={};for(var k in x){var $=x[k];k==="__source"?m.__source=$:k==="__self"?m.__self=$:E[k]=$}}m.__proto__=b,n&&n(m)},Le.diffed=function(m){if(m.__k&&m.__k.forEach(function(F){if(typeof F=="object"&&F&&F.type===void 0){var K=Object.keys(F).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+K+`}.

`+si(m))}}),e=!1,t&&t(m),m.__k!=null)for(var x=[],E=0;E<m.__k.length;E++){var k=m.__k[E];if(k&&k.key!=null){var $=k.key;if(x.indexOf($)!==-1){console.error('Following component has two or more children with the same key attribute: "'+$+`". This may cause glitches and misbehavior in rendering process. Component: 

`+Qo(m)+`

`+si(m));break}x.push($)}}if(m.__c!=null&&m.__c.__H!=null){var S=m.__c.__H.__;if(S)for(var T=0;T<S.length;T+=1){var O=S[T];if(O.__H){for(var I,P=Pre(O.__H);!(I=P()).done;)if((D=I.value)!=D){var R=na(m);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+T+" in component "+R+" was called with NaN.")}}}}var D},Le.__c=function(m,x){for(var E=0;E<h.length;E++){var k=h[E],$=k.type,S=bL(k.__);$!=="thead"&&$!=="tfoot"&&$!=="tbody"||S==="table"?$==="tr"&&S!=="thead"&&S!=="tfoot"&&S!=="tbody"&&S!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+Qo(k)+`

`+si(k)):$==="td"&&S!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+Qo(k)+`

`+si(k)):$==="th"&&S!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+Qo(k)+`

`+si(k)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+Qo(k)+`

`+si(k))}h=[],l&&l(m,x)}}();var en=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function LI(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var wL={exports:{}},Bre="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Mre=Bre,Lre=Mre;function _L(){}function $L(){}$L.resetWarningCache=_L;var Fre=function(){function e(n,i,s,o,a,l){if(l!==Lre){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:$L,resetWarningCache:_L};return t.PropTypes=t,t};wL.exports=Fre();var jre=wL.exports;const Sr=oo(jre);var Sa,dr,p$,c4,ld=0,xL=[],Gm=[],h4=Le.__b,d4=Le.__r,f4=Le.diffed,p4=Le.__c,v4=Le.unmount;function kc(e,r){Le.__h&&Le.__h(dr,e,ld||r),ld=0;var t=dr.__H||(dr.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:Gm}),t.__[e]}function ve(e){return ld=1,FI(IL,e)}function FI(e,r,t){var n=kc(Sa++,2);if(n.t=e,!n.__c&&(n.__=[t?t(r):IL(void 0,r),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=dr,!dr.u)){var i=function(a,l,u){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(v){return v.__c});if(d.every(function(v){return!v.__N}))return!s||s.call(this,a,l,u);var h=!1;return d.forEach(function(v){if(v.__N){var g=v.__[0];v.__=v.__N,v.__N=void 0,g!==v.__[0]&&(h=!0)}}),!(!h&&n.__c.props===a)&&(!s||s.call(this,a,l,u))};dr.u=!0;var s=dr.shouldComponentUpdate,o=dr.componentWillUpdate;dr.componentWillUpdate=function(a,l,u){if(this.__e){var d=s;s=void 0,i(a,l,u),s=d}o&&o.call(this,a,l,u)},dr.shouldComponentUpdate=i}return n.__N||n.__}function Ge(e,r){var t=kc(Sa++,3);!Le.__s&&jI(t.__H,r)&&(t.__=e,t.i=r,dr.__H.__h.push(t))}function Bd(e,r){var t=kc(Sa++,4);!Le.__s&&jI(t.__H,r)&&(t.__=e,t.i=r,dr.__h.push(t))}function Vr(e){return ld=5,to(function(){return{current:e}},[])}function EL(e,r,t){ld=6,Bd(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function to(e,r){var t=kc(Sa++,7);return jI(t.__H,r)?(t.__V=e(),t.i=r,t.__h=e,t.__V):t.__}function Hn(e,r){return ld=8,to(function(){return e},r)}function SL(e){var r=dr.context[e.__c],t=kc(Sa++,9);return t.c=e,r?(t.__==null&&(t.__=!0,r.sub(dr)),r.props.value):e.__}function kL(e,r){Le.useDebugValue&&Le.useDebugValue(r?r(e):e)}function zre(e){var r=kc(Sa++,10),t=ve();return r.__=e,dr.componentDidCatch||(dr.componentDidCatch=function(n,i){r.__&&r.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function TL(){var e=kc(Sa++,11);if(!e.__){for(var r=dr.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var t=r.__m||(r.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function Hre(){for(var e;e=xL.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ym),e.__H.__h.forEach(SE),e.__H.__h=[]}catch(r){e.__H.__h=[],Le.__e(r,e.__v)}}Le.__b=function(e){dr=null,h4&&h4(e)},Le.__r=function(e){d4&&d4(e),Sa=0;var r=(dr=e.__c).__H;r&&(p$===dr?(r.__h=[],dr.__h=[],r.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Gm,t.__N=t.i=void 0})):(r.__h.forEach(Ym),r.__h.forEach(SE),r.__h=[],Sa=0)),p$=dr},Le.diffed=function(e){f4&&f4(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(xL.push(r)!==1&&c4===Le.requestAnimationFrame||((c4=Le.requestAnimationFrame)||Ure)(Hre)),r.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Gm&&(t.__=t.__V),t.i=void 0,t.__V=Gm})),p$=dr=null},Le.__c=function(e,r){r.some(function(t){try{t.__h.forEach(Ym),t.__h=t.__h.filter(function(n){return!n.__||SE(n)})}catch(n){r.some(function(i){i.__h&&(i.__h=[])}),r=[],Le.__e(n,t.__v)}}),p4&&p4(e,r)},Le.unmount=function(e){v4&&v4(e);var r,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{Ym(n)}catch(i){r=i}}),t.__H=void 0,r&&Le.__e(r,t.__v))};var g4=typeof requestAnimationFrame=="function";function Ure(e){var r,t=function(){clearTimeout(n),g4&&cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100);g4&&(r=requestAnimationFrame(t))}function Ym(e){var r=dr,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),dr=r}function SE(e){var r=dr;e.__c=e.__(),dr=r}function jI(e,r){return!e||e.length!==r.length||r.some(function(t,n){return t!==e[n]})}function IL(e,r){return typeof r=="function"?r(e):r}function OL(e,r){for(var t in r)e[t]=r[t];return e}function kE(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var n in r)if(n!=="__source"&&e[n]!==r[n])return!0;return!1}function v$(e,r){return e===r&&(e!==0||1/e==1/r)||e!=e&&r!=r}function Cp(e){this.props=e}function Qn(e,r){function t(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),r?!r(this.props,i)||!o:kE(this.props,i)}function n(i){return this.shouldComponentUpdate=t,Oe(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Cp.prototype=new vn).isPureReactComponent=!0,Cp.prototype.shouldComponentUpdate=function(e,r){return kE(this.props,e)||kE(this.state,r)};var y4=Le.__b;Le.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),y4&&y4(e)};var Kre=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Jt(e){function r(t){var n=OL({},t);return delete n.ref,e(n,t.ref||null)}return r.$$typeof=Kre,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var m4=function(e,r){return e==null?null:Js(Js(e).map(r))},AL={map:m4,forEach:m4,count:function(e){return e?Js(e).length:0},only:function(e){var r=Js(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:Js},Wre=Le.__e;Le.__e=function(e,r,t,n){if(e.then){for(var i,s=r;s=s.__;)if((i=s.__c)&&i.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),i.__c(e,r)}Wre(e,r,t,n)};var b4=Le.unmount;function CL(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=OL({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return CL(n,r,t)})),e}function PL(e,r,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return PL(n,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function dp(){this.__u=0,this.t=null,this.__b=null}function NL(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function RL(e){var r,t,n;function i(s){if(r||(r=e()).then(function(o){t=o.default||o},function(o){n=o}),n)throw n;if(!t)throw r;return Oe(t,s)}return i.displayName="Lazy",i.__f=!0,i}function Oh(){this.u=null,this.o=null}Le.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&e.__h===!0&&(e.type=null),b4&&b4(e)},(dp.prototype=new vn).__c=function(e,r){var t=r.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=NL(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=PL(u,u.__c.__P,u.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.t.pop();)d.forceUpdate()}},l=r.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},dp.prototype.componentWillUnmount=function(){this.t=[]},dp.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=CL(this.__b,t,n.__O=n.__P)}this.__b=null}var i=r.__a&&Oe(Be,null,e.fallback);return i&&(i.__h=null),[Oe(Be,null,r.__a?null:e.children),i]};var w4=function(e,r,t){if(++t[1]===t[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function Vre(e){return this.getChildContext=function(){return e.context},e.children}function qre(e){var r=this,t=e.i;r.componentWillUnmount=function(){ad(null,r.l),r.l=null,r.i=null},r.i&&r.i!==t&&r.componentWillUnmount(),r.l||(r.i=t,r.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),r.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),r.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),r.i.removeChild(n)}}),ad(Oe(Vre,{context:r.context},e.__v),r.l)}function DL(e,r){var t=Oe(qre,{__v:e,i:r});return t.containerInfo=r,t}(Oh.prototype=new vn).__a=function(e){var r=this,t=NL(r.__v),n=r.o.get(e);return n[0]++,function(i){var s=function(){r.props.revealOrder?(n.push(i),w4(r,e,n)):i()};t?t(s):s()}},Oh.prototype.render=function(e){this.u=null,this.o=new Map;var r=Js(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.o.set(r[t],this.u=[1,0,this.u]);return e.children},Oh.prototype.componentDidUpdate=Oh.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,t){w4(e,t,r)})};var BL=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Gre=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Yre=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Zre=/[A-Z0-9]/g,Xre=typeof document<"u",Jre=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function ML(e,r,t){return r.__k==null&&(r.textContent=""),ad(e,r),typeof t=="function"&&t(),e?e.__c:null}function LL(e,r,t){return gL(e,r),typeof t=="function"&&t(),e?e.__c:null}vn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(vn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var _4=Le.event;function Qre(){}function ene(){return this.cancelBubble}function tne(){return this.defaultPrevented}Le.event=function(e){return _4&&(e=_4(e)),e.persist=Qre,e.isPropagationStopped=ene,e.isDefaultPrevented=tne,e.nativeEvent=e};var zI,rne={enumerable:!1,configurable:!0,get:function(){return this.class}},$4=Le.vnode;Le.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,n=r.type,i={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||Xre&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||Jre(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":Yre.test(s)?s=a:n.indexOf("-")===-1&&Gre.test(s)?s=s.replace(Zre,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Js(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Js(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",rne)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),r.props=i}(e),e.$$typeof=BL,$4&&$4(e)};var x4=Le.__r;Le.__r=function(e){x4&&x4(e),zI=e.__c};var E4=Le.diffed;Le.diffed=function(e){E4&&E4(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value),zI=null};var FL={ReactCurrentDispatcher:{current:{readContext:function(e){return zI.__n[e.__c].props.value}}}},nne="17.0.2";function jL(e){return Oe.bind(null,e)}function _v(e){return!!e&&e.$$typeof===BL}function zL(e){return _v(e)&&e.type===Be}function HL(e){return _v(e)?yL.apply(null,arguments):e}function UL(e){return!!e.__k&&(ad(null,e),!0)}function KL(e){return e&&(e.base||e.nodeType===1&&e)||null}var WL=function(e,r){return e(r)},VL=function(e,r){return e(r)},qL=Be;function HI(e){e()}function GL(e){return e}function YL(){return[!1,HI]}var ZL=Bd,XL=_v;function JL(e,r){var t=r(),n=ve({h:{__:t,v:r}}),i=n[0].h,s=n[1];return Bd(function(){i.__=t,i.v=r,v$(i.__,r())||s({h:i})},[e,t,r]),Ge(function(){return v$(i.__,i.v())||s({h:i}),e(function(){v$(i.__,i.v())||s({h:i})})},[e]),t}var Kh={useState:ve,useId:TL,useReducer:FI,useEffect:Ge,useLayoutEffect:Bd,useInsertionEffect:ZL,useTransition:YL,useDeferredValue:GL,useSyncExternalStore:JL,startTransition:HI,useRef:Vr,useImperativeHandle:EL,useMemo:to,useCallback:Hn,useContext:SL,useDebugValue:kL,version:"17.0.2",Children:AL,render:ML,hydrate:LL,unmountComponentAtNode:UL,createPortal:DL,createElement:Oe,createContext:MI,createFactory:jL,cloneElement:HL,createRef:s1,Fragment:Be,isValidElement:_v,isElement:XL,isFragment:zL,findDOMNode:KL,Component:vn,PureComponent:Cp,memo:Qn,forwardRef:Jt,flushSync:VL,unstable_batchedUpdates:WL,StrictMode:qL,Suspense:dp,SuspenseList:Oh,lazy:RL,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:FL};const ine=Object.freeze(Object.defineProperty({__proto__:null,Children:AL,Component:vn,Fragment:Be,PureComponent:Cp,StrictMode:qL,Suspense:dp,SuspenseList:Oh,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:FL,cloneElement:HL,createContext:MI,createElement:Oe,createFactory:jL,createPortal:DL,createRef:s1,default:Kh,findDOMNode:KL,flushSync:VL,forwardRef:Jt,hydrate:LL,isElement:XL,isFragment:zL,isValidElement:_v,lazy:RL,memo:Qn,render:ML,startTransition:HI,unmountComponentAtNode:UL,unstable_batchedUpdates:WL,useCallback:Hn,useContext:SL,useDebugValue:kL,useDeferredValue:GL,useEffect:Ge,useErrorBoundary:zre,useId:TL,useImperativeHandle:EL,useInsertionEffect:ZL,useLayoutEffect:Bd,useMemo:to,useReducer:FI,useRef:Vr,useState:ve,useSyncExternalStore:JL,useTransition:YL,version:nne},Symbol.toStringTag,{value:"Module"})),sne=LI(ine);function one(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var QL=sne,ane=one(QL);function S4(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function lne(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var une=!!(typeof window<"u"&&window.document&&window.document.createElement);function cne(e,r,t){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof r!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=e(o.map(function(d){return d.props})),u.canUseDOM?r(a):t&&(a=t(a))}var u=function(d){lne(h,d);function h(){return d.apply(this,arguments)||this}h.peek=function(){return a},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var b=a;return a=void 0,o=[],b};var v=h.prototype;return v.UNSAFE_componentWillMount=function(){o.push(this),l()},v.componentDidUpdate=function(){l()},v.componentWillUnmount=function(){var b=o.indexOf(this);o.splice(b,1),l()},v.render=function(){return ane.createElement(s,this.props)},h}(QL.PureComponent);return S4(u,"displayName","SideEffect("+n(s)+")"),S4(u,"canUseDOM",une),u}}var hne=cne;const dne=oo(hne);var fne=typeof Element<"u",pne=typeof Map=="function",vne=typeof Set=="function",gne=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Zm(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,n,i;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(!Zm(e[n],r[n]))return!1;return!0}var s;if(pne&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!Zm(n.value[1],r.get(n.value[0])))return!1;return!0}if(vne&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(gne&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof r.valueOf=="function")return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof r.toString=="function")return e.toString()===r.toString();if(i=Object.keys(e),t=i.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;if(fne&&e instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!Zm(e[i[n]],r[i[n]]))return!1;return!0}return e!==e&&r!==r}var yne=function(r,t){try{return Zm(r,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const mne=oo(yne);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var k4=Object.getOwnPropertySymbols,bne=Object.prototype.hasOwnProperty,wne=Object.prototype.propertyIsEnumerable;function _ne(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function $ne(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var xne=$ne()?Object.assign:function(e,r){for(var t,n=_ne(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)bne.call(t,o)&&(n[o]=t[o]);if(k4){i=k4(t);for(var a=0;a<i.length;a++)wne.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};const Ene=oo(xne);var Yu={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},St={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(St).map(function(e){return St[e]});var kr={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},C0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Pp={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Sne=Object.keys(C0).reduce(function(e,r){return e[C0[r]]=r,e},{}),kne=[St.NOSCRIPT,St.SCRIPT,St.STYLE],Gs="data-react-helmet",Tne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ine=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},One=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),$i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ane=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},T4=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Cne=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e},TE=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Pne=function(r){var t=Wh(r,St.TITLE),n=Wh(r,Pp.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=Wh(r,Pp.DEFAULT_TITLE);return t||i||void 0},Nne=function(r){return Wh(r,Pp.ON_CHANGE_CLIENT_STATE)||function(){}},g$=function(r,t){return t.filter(function(n){return typeof n[r]<"u"}).map(function(n){return n[r]}).reduce(function(n,i){return $i({},n,i)},{})},Rne=function(r,t){return t.filter(function(n){return typeof n[St.BASE]<"u"}).map(function(n){return n[St.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(r.indexOf(l)!==-1&&i[l])return n.concat(i)}return n},[])},Df=function(r,t,n){var i={};return n.filter(function(s){return Array.isArray(s[r])?!0:(typeof s[r]<"u"&&Lne("Helmet: "+r+' should be of type "Array". Instead found type "'+Tne(s[r])+'"'),!1)}).map(function(s){return s[r]}).reverse().reduce(function(s,o){var a={};o.filter(function(v){for(var g=void 0,b=Object.keys(v),m=0;m<b.length;m++){var x=b[m],E=x.toLowerCase();t.indexOf(E)!==-1&&!(g===kr.REL&&v[g].toLowerCase()==="canonical")&&!(E===kr.REL&&v[E].toLowerCase()==="stylesheet")&&(g=E),t.indexOf(x)!==-1&&(x===kr.INNER_HTML||x===kr.CSS_TEXT||x===kr.ITEM_PROP)&&(g=x)}if(!g||!v[g])return!1;var k=v[g].toLowerCase();return i[g]||(i[g]={}),a[g]||(a[g]={}),i[g][k]?!1:(a[g][k]=!0,!0)}).reverse().forEach(function(v){return s.push(v)});for(var l=Object.keys(a),u=0;u<l.length;u++){var d=l[u],h=Ene({},i[d],a[d]);i[d]=h}return s},[]).reverse()},Wh=function(r,t){for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.hasOwnProperty(t))return i[t]}return null},Dne=function(r){return{baseTag:Rne([kr.HREF,kr.TARGET],r),bodyAttributes:g$(Yu.BODY,r),defer:Wh(r,Pp.DEFER),encode:Wh(r,Pp.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:g$(Yu.HTML,r),linkTags:Df(St.LINK,[kr.REL,kr.HREF],r),metaTags:Df(St.META,[kr.NAME,kr.CHARSET,kr.HTTPEQUIV,kr.PROPERTY,kr.ITEM_PROP],r),noscriptTags:Df(St.NOSCRIPT,[kr.INNER_HTML],r),onChangeClientState:Nne(r),scriptTags:Df(St.SCRIPT,[kr.SRC,kr.INNER_HTML],r),styleTags:Df(St.STYLE,[kr.CSS_TEXT],r),title:Pne(r),titleAttributes:g$(Yu.TITLE,r)}},IE=function(){var e=Date.now();return function(r){var t=Date.now();t-e>16?(e=t,r(t)):setTimeout(function(){IE(r)},0)}}(),I4=function(r){return clearTimeout(r)},Bne=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||IE:global.requestAnimationFrame||IE,Mne=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||I4:global.cancelAnimationFrame||I4,Lne=function(r){return console&&typeof console.warn=="function"&&console.warn(r)},Bf=null,Fne=function(r){Bf&&Mne(Bf),r.defer?Bf=Bne(function(){O4(r,function(){Bf=null})}):(O4(r),Bf=null)},O4=function(r,t){var n=r.baseTag,i=r.bodyAttributes,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.onChangeClientState,d=r.scriptTags,h=r.styleTags,v=r.title,g=r.titleAttributes;OE(St.BODY,i),OE(St.HTML,s),jne(v,g);var b={baseTag:ch(St.BASE,n),linkTags:ch(St.LINK,o),metaTags:ch(St.META,a),noscriptTags:ch(St.NOSCRIPT,l),scriptTags:ch(St.SCRIPT,d),styleTags:ch(St.STYLE,h)},m={},x={};Object.keys(b).forEach(function(E){var k=b[E],$=k.newTags,S=k.oldTags;$.length&&(m[E]=$),S.length&&(x[E]=b[E].oldTags)}),t&&t(),u(r,m,x)},e9=function(r){return Array.isArray(r)?r.join(""):r},jne=function(r,t){typeof r<"u"&&document.title!==r&&(document.title=e9(r)),OE(St.TITLE,t)},OE=function(r,t){var n=document.getElementsByTagName(r)[0];if(n){for(var i=n.getAttribute(Gs),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],d=t[u]||"";n.getAttribute(u)!==d&&n.setAttribute(u,d),s.indexOf(u)===-1&&s.push(u);var h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(var v=o.length-1;v>=0;v--)n.removeAttribute(o[v]);s.length===o.length?n.removeAttribute(Gs):n.getAttribute(Gs)!==a.join(",")&&n.setAttribute(Gs,a.join(","))}},ch=function(r,t){var n=document.head||document.querySelector(St.HEAD),i=n.querySelectorAll(r+"["+Gs+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(r);for(var d in l)if(l.hasOwnProperty(d))if(d===kr.INNER_HTML)u.innerHTML=l.innerHTML;else if(d===kr.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var h=typeof l[d]>"u"?"":l[d];u.setAttribute(d,h)}u.setAttribute(Gs,"true"),s.some(function(v,g){return a=g,u.isEqualNode(v)})?s.splice(a,1):o.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:o}},t9=function(r){return Object.keys(r).reduce(function(t,n){var i=typeof r[n]<"u"?n+'="'+r[n]+'"':""+n;return t?t+" "+i:i},"")},zne=function(r,t,n,i){var s=t9(n),o=e9(t);return s?"<"+r+" "+Gs+'="true" '+s+">"+TE(o,i)+"</"+r+">":"<"+r+" "+Gs+'="true">'+TE(o,i)+"</"+r+">"},Hne=function(r,t,n){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(u){return!(u===kr.INNER_HTML||u===kr.CSS_TEXT)}).reduce(function(u,d){var h=typeof s[d]>"u"?d:d+'="'+TE(s[d],n)+'"';return u?u+" "+h:h},""),a=s.innerHTML||s.cssText||"",l=kne.indexOf(r)===-1;return i+"<"+r+" "+Gs+'="true" '+o+(l?"/>":">"+a+"</"+r+">")},"")},r9=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[C0[i]||i]=r[i],n},t)},Une=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Sne[i]||i]=r[i],n},t)},Kne=function(r,t,n){var i,s=(i={key:t},i[Gs]=!0,i),o=r9(n,s);return[Kh.createElement(St.TITLE,o,t)]},Wne=function(r,t){return t.map(function(n,i){var s,o=(s={key:i},s[Gs]=!0,s);return Object.keys(n).forEach(function(a){var l=C0[a]||a;if(l===kr.INNER_HTML||l===kr.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=n[a]}),Kh.createElement(r,o)})},ea=function(r,t,n){switch(r){case St.TITLE:return{toComponent:function(){return Kne(r,t.title,t.titleAttributes)},toString:function(){return zne(r,t.title,t.titleAttributes,n)}};case Yu.BODY:case Yu.HTML:return{toComponent:function(){return r9(t)},toString:function(){return t9(t)}};default:return{toComponent:function(){return Wne(r,t)},toString:function(){return Hne(r,t,n)}}}},n9=function(r){var t=r.baseTag,n=r.bodyAttributes,i=r.encode,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.scriptTags,d=r.styleTags,h=r.title,v=h===void 0?"":h,g=r.titleAttributes;return{base:ea(St.BASE,t,i),bodyAttributes:ea(Yu.BODY,n,i),htmlAttributes:ea(Yu.HTML,s,i),link:ea(St.LINK,o,i),meta:ea(St.META,a,i),noscript:ea(St.NOSCRIPT,l,i),script:ea(St.SCRIPT,u,i),style:ea(St.STYLE,d,i),title:ea(St.TITLE,{title:v,titleAttributes:g},i)}},Vne=function(r){var t,n;return n=t=function(i){Ane(s,i);function s(){return Ine(this,s),Cne(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!mne(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case St.SCRIPT:case St.NOSCRIPT:return{innerHTML:l};case St.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,d=a.arrayTypeChildren,h=a.newChildProps,v=a.nestedChildren;return $i({},d,(l={},l[u.type]=[].concat(d[u.type]||[],[$i({},h,this.mapNestedChildrenToProps(u,v))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,u,d=a.child,h=a.newProps,v=a.newChildProps,g=a.nestedChildren;switch(d.type){case St.TITLE:return $i({},h,(l={},l[d.type]=g,l.titleAttributes=$i({},v),l));case St.BODY:return $i({},h,{bodyAttributes:$i({},v)});case St.HTML:return $i({},h,{htmlAttributes:$i({},v)})}return $i({},h,(u={},u[d.type]=$i({},v),u))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=$i({},l);return Object.keys(a).forEach(function(d){var h;u=$i({},u,(h={},h[d]=a[d],h))}),u},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var u=this,d={};return Kh.Children.forEach(a,function(h){if(!(!h||!h.props)){var v=h.props,g=v.children,b=T4(v,["children"]),m=Une(b);switch(u.warnOnInvalidChildren(h,g),h.type){case St.LINK:case St.META:case St.NOSCRIPT:case St.SCRIPT:case St.STYLE:d=u.flattenArrayTypeChildren({child:h,arrayTypeChildren:d,newChildProps:m,nestedChildren:g});break;default:l=u.mapObjectTypeChildren({child:h,newProps:l,newChildProps:m,nestedChildren:g});break}}}),l=this.mapArrayTypeChildrenToProps(d,l),l},s.prototype.render=function(){var a=this.props,l=a.children,u=T4(a,["children"]),d=$i({},u);return l&&(d=this.mapChildrenToProps(l,d)),Kh.createElement(r,d)},One(s,null,[{key:"canUseDOM",set:function(a){r.canUseDOM=a}}]),s}(Kh.Component),t.propTypes={base:Sr.object,bodyAttributes:Sr.object,children:Sr.oneOfType([Sr.arrayOf(Sr.node),Sr.node]),defaultTitle:Sr.string,defer:Sr.bool,encodeSpecialCharacters:Sr.bool,htmlAttributes:Sr.object,link:Sr.arrayOf(Sr.object),meta:Sr.arrayOf(Sr.object),noscript:Sr.arrayOf(Sr.object),onChangeClientState:Sr.func,script:Sr.arrayOf(Sr.object),style:Sr.arrayOf(Sr.object),title:Sr.string,titleAttributes:Sr.object,titleTemplate:Sr.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=r.peek,t.rewind=function(){var i=r.rewind();return i||(i=n9({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},qne=function(){return null},Gne=dne(Dne,Fne,n9)(qne),ud=Vne(Gne);ud.renderStatic=ud.rewind;var Yne={};function Yf(e,r){for(var t in r)e[t]=r[t];return e}function Zne(e,r,t){var n,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),o={};if(s&&s[1])for(var a=s[1].split("&"),l=0;l<a.length;l++){var u=a[l].split("=");o[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=AE(e.replace(i,"")),r=AE(r||"");for(var d=Math.max(e.length,r.length),h=0;h<d;h++)if(r[h]&&r[h].charAt(0)===":"){var v=r[h].replace(/(^:|[+*?]+$)/g,""),g=(r[h].match(/[+*?]+$/)||Yne)[0]||"",b=~g.indexOf("+"),m=~g.indexOf("*"),x=e[h]||"";if(!x&&!m&&(g.indexOf("?")<0||b)){n=!1;break}if(o[v]=decodeURIComponent(x),b||m){o[v]=e.slice(h).map(decodeURIComponent).join("/");break}}else if(r[h]!==e[h]){n=!1;break}return(t.default===!0||n!==!1)&&o}function Xne(e,r){return e.rank<r.rank?1:e.rank>r.rank?-1:e.index-r.index}function Jne(e,r){return e.index=r,e.rank=function(t){return t.props.default?0:AE(t.props.path).map(Qne).join("")}(e),e.props}function AE(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Qne(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var eie={},Zu=[],A4=[],qi=null,i9={url:UI()},tie=MI(i9);function UI(){var e;return""+((e=qi&&qi.location?qi.location:qi&&qi.getCurrentLocation?qi.getCurrentLocation():typeof location<"u"?location:eie).pathname||"")+(e.search||"")}function qt(e,r){return r===void 0&&(r=!1),typeof e!="string"&&e.url&&(r=e.replace,e=e.url),function(t){for(var n=Zu.length;n--;)if(Zu[n].canRoute(t))return!0;return!1}(e)&&function(t,n){n===void 0&&(n="push"),qi&&qi[n]?qi[n](t):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,t)}(e,r?"replace":"push"),s9(e)}function s9(e){for(var r=!1,t=0;t<Zu.length;t++)Zu[t].routeTo(e)&&(r=!0);return r}function rie(e){if(e&&e.getAttribute){var r=e.getAttribute("href"),t=e.getAttribute("target");if(r&&r.match(/^\//g)&&(!t||t.match(/^_?self$/i)))return qt(r)}}function nie(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function o9(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var r=e.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(rie(r))return nie(e)}while(r=r.parentNode)}}var C4=!1;function a9(e){e.history&&(qi=e.history),this.state={url:e.url||UI()}}Yf(a9.prototype=new vn,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var r=Js(this.props.children);return this.g(r,e)!==void 0},routeTo:function(e){this.setState({url:e});var r=this.canRoute(e);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;C4||(C4=!0,qi||addEventListener("popstate",function(){s9(UI())}),addEventListener("click",o9)),Zu.push(this),qi&&(this.u=qi.listen(function(r){var t=r.location||r;e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),Zu.splice(Zu.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,r){e=e.filter(Jne).sort(Xne);for(var t=0;t<e.length;t++){var n=e[t],i=Zne(r,n.props.path,n.props);if(i)return[n,i]}},render:function(e,r){var t,n,i=e.onChange,s=r.url,o=this.c,a=this.g(Js(e.children),s);if(a&&(n=yL(a[0],Yf(Yf({url:s,matches:t=a[1]},t),{key:void 0,ref:void 0}))),s!==(o&&o.url)){Yf(i9,o=this.c={url:s,previous:o&&o.url,current:n,path:n?n.props.path:null,matches:t}),o.router=this,o.active=n?[n]:[];for(var l=A4.length;l--;)A4[l]({});typeof i=="function"&&i(o)}return Oe(tie.Provider,{value:o},n)}});var wt=function(e){return Oe("a",Yf({onClick:o9},e))};function iie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const sie=Jt(iie),l9=sie;function oie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const aie=Jt(oie),lie=aie;function uie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}const cie=Jt(uie),hie=cie;function die({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))}const fie=Jt(die),pie=fie;function vie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const gie=Jt(vie),yie=gie;function mie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const bie=Jt(mie),u9=bie;function wie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const _ie=Jt(wie),c9=_ie;function $ie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const xie=Jt($ie),h9=xie;function Eie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Sie=Jt(Eie),kie=Sie;function Tie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const Iie=Jt(Tie),KI=Iie;function Oie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Aie=Jt(Oie),Cie=Aie;function Pie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"}))}const Nie=Jt(Pie),Rie=Nie;function Die({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const Bie=Jt(Die),d9=Bie;function Mie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z",clipRule:"evenodd"}))}const Lie=Jt(Mie),Fie=Lie;function jie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const zie=Jt(jie),Hie=zie;function Uie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))}const Kie=Jt(Uie),Wie=Kie;function Vie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const qie=Jt(Vie),WI=qie;function Gie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),Oe("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const Yie=Jt(Gie),f9=Yie;function Zie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const Xie=Jt(Zie),Jie=Xie;function Qie({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z",clipRule:"evenodd"}))}const ese=Jt(Qie),p9=ese;function tse({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}))}const rse=Jt(tse),v9=rse;function nse({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const ise=Jt(nse),VI=ise;function sse({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const ose=Jt(sse),ase=ose;function lse({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const use=Jt(lse),g9=use;function cse({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z",clipRule:"evenodd"}))}const hse=Jt(cse),dse=hse;function fse({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const pse=Jt(fse),y9=pse;function Zf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var m9={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,r){(function(t){e.exports=t()})(function(){return function t(n,i,s){function o(u,d){if(!i[u]){if(!n[u]){var h=typeof Zf=="function"&&Zf;if(!d&&h)return h(u,!0);if(a)return a(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=i[u]={exports:{}};n[u][0].call(g.exports,function(b){var m=n[u][1][b];return o(m||b)},g,g.exports,t,n,i,s)}return i[u].exports}for(var a=typeof Zf=="function"&&Zf,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(b),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=b,a=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var x=s.document.createElement("script");x.onreadystatechange=function(){b(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:a=function(){setTimeout(b,0)};var v,g=[];function b(){v=!0;for(var x,E,k=g.length;k;){for(E=g,g=[],x=-1;++x<k;)E[x]();k=g.length}v=!1}n.exports=m;function m(x){g.push(x)===1&&!v&&a()}}).call(this,typeof en<"u"?en:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];n.exports=h;function h(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,T!==o&&m(this,T)}h.prototype.catch=function(T){return this.then(null,T)},h.prototype.then=function(T,O){if(typeof T!="function"&&this.state===u||typeof O!="function"&&this.state===l)return this;var I=new this.constructor(o);if(this.state!==d){var P=this.state===u?T:O;g(I,P,this.outcome)}else this.queue.push(new v(I,T,O));return I};function v(T,O,I){this.promise=T,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},v.prototype.otherCallFulfilled=function(T){g(this.promise,this.onFulfilled,T)},v.prototype.callRejected=function(T){a.reject(this.promise,T)},v.prototype.otherCallRejected=function(T){g(this.promise,this.onRejected,T)};function g(T,O,I){s(function(){var P;try{P=O(I)}catch(R){return a.reject(T,R)}P===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,P)})}a.resolve=function(T,O){var I=x(b,O);if(I.status==="error")return a.reject(T,I.value);var P=I.value;if(P)m(T,P);else{T.state=u,T.outcome=O;for(var R=-1,D=T.queue.length;++R<D;)T.queue[R].callFulfilled(O)}return T},a.reject=function(T,O){T.state=l,T.outcome=O;for(var I=-1,P=T.queue.length;++I<P;)T.queue[I].callRejected(O);return T};function b(T){var O=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof O=="function")return function(){O.apply(T,arguments)}}function m(T,O){var I=!1;function P(K){I||(I=!0,a.reject(T,K))}function R(K){I||(I=!0,a.resolve(T,K))}function D(){O(R,P)}var F=x(D);F.status==="error"&&P(F.value)}function x(T,O){var I={};try{I.value=T(O),I.status="success"}catch(P){I.status="error",I.value=P}return I}h.resolve=E;function E(T){return T instanceof this?T:a.resolve(new this(o),T)}h.reject=k;function k(T){var O=new this(o);return a.reject(O,T)}h.all=$;function $(T){var O=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,P=!1;if(!I)return this.resolve([]);for(var R=new Array(I),D=0,F=-1,K=new this(o);++F<I;)q(T[F],F);return K;function q(W,M){O.resolve(W).then(G,function(Q){P||(P=!0,a.reject(K,Q))});function G(Q){R[M]=Q,++D===I&&!P&&(P=!0,a.resolve(K,R))}}}h.race=S;function S(T){var O=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,P=!1;if(!I)return this.resolve([]);for(var R=-1,D=new this(o);++R<I;)F(T[R]);return D;function F(K){O.resolve(K).then(function(q){P||(P=!0,a.resolve(D,q))},function(q){P||(P=!0,a.reject(D,q))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof en<"u"?en:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};function o(H,J){if(!(H instanceof J))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var H=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),J=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!H||J)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(H,J){H=H||[],J=J||{};try{return new Blob(H,J)}catch(ie){if(ie.name!=="TypeError")throw ie;for(var V=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,se=new V,le=0;le<H.length;le+=1)se.append(H[le]);return se.getBlob(J.type)}}typeof Promise>"u"&&t(3);var h=Promise;function v(H,J){J&&H.then(function(V){J(null,V)},function(V){J(V)})}function g(H,J,V){typeof J=="function"&&H.then(J),typeof V=="function"&&H.catch(V)}function b(H){return typeof H!="string"&&(console.warn(H+" used as a key, but it is not a string."),H=String(H)),H}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",E=void 0,k={},$=Object.prototype.toString,S="readonly",T="readwrite";function O(H){for(var J=H.length,V=new ArrayBuffer(J),se=new Uint8Array(V),le=0;le<J;le++)se[le]=H.charCodeAt(le);return V}function I(H){return new h(function(J){var V=H.transaction(x,T),se=d([""]);V.objectStore(x).put(se,"key"),V.onabort=function(le){le.preventDefault(),le.stopPropagation(),J(!1)},V.oncomplete=function(){var le=navigator.userAgent.match(/Chrome\/(\d+)/),ie=navigator.userAgent.match(/Edge\//);J(ie||!le||parseInt(le[1],10)>=43)}}).catch(function(){return!1})}function P(H){return typeof E=="boolean"?h.resolve(E):I(H).then(function(J){return E=J,E})}function R(H){var J=k[H.name],V={};V.promise=new h(function(se,le){V.resolve=se,V.reject=le}),J.deferredOperations.push(V),J.dbReady?J.dbReady=J.dbReady.then(function(){return V.promise}):J.dbReady=V.promise}function D(H){var J=k[H.name],V=J.deferredOperations.pop();if(V)return V.resolve(),V.promise}function F(H,J){var V=k[H.name],se=V.deferredOperations.pop();if(se)return se.reject(J),se.promise}function K(H,J){return new h(function(V,se){if(k[H.name]=k[H.name]||Ce(),H.db)if(J)R(H),H.db.close();else return V(H.db);var le=[H.name];J&&le.push(H.version);var ie=l.open.apply(l,le);J&&(ie.onupgradeneeded=function(we){var Ae=ie.result;try{Ae.createObjectStore(H.storeName),we.oldVersion<=1&&Ae.createObjectStore(x)}catch(Pe){if(Pe.name==="ConstraintError")console.warn('The database "'+H.name+'" has been upgraded from version '+we.oldVersion+" to version "+we.newVersion+', but the storage "'+H.storeName+'" already exists.');else throw Pe}}),ie.onerror=function(we){we.preventDefault(),se(ie.error)},ie.onsuccess=function(){var we=ie.result;we.onversionchange=function(Ae){Ae.target.close()},V(we),D(H)}})}function q(H){return K(H,!1)}function W(H){return K(H,!0)}function M(H,J){if(!H.db)return!0;var V=!H.db.objectStoreNames.contains(H.storeName),se=H.version<H.db.version,le=H.version>H.db.version;if(se&&(H.version!==J&&console.warn('The database "'+H.name+`" can't be downgraded from version `+H.db.version+" to version "+H.version+"."),H.version=H.db.version),le||V){if(V){var ie=H.db.version+1;ie>H.version&&(H.version=ie)}return!0}return!1}function G(H){return new h(function(J,V){var se=new FileReader;se.onerror=V,se.onloadend=function(le){var ie=btoa(le.target.result||"");J({__local_forage_encoded_blob:!0,data:ie,type:H.type})},se.readAsBinaryString(H)})}function Q(H){var J=O(atob(H.data));return d([J],{type:H.type})}function he(H){return H&&H.__local_forage_encoded_blob}function ue(H){var J=this,V=J._initReady().then(function(){var se=k[J._dbInfo.name];if(se&&se.dbReady)return se.dbReady});return g(V,H,H),V}function ke(H){R(H);for(var J=k[H.name],V=J.forages,se=0;se<V.length;se++){var le=V[se];le._dbInfo.db&&(le._dbInfo.db.close(),le._dbInfo.db=null)}return H.db=null,q(H).then(function(ie){return H.db=ie,M(H)?W(H):ie}).then(function(ie){H.db=J.db=ie;for(var we=0;we<V.length;we++)V[we]._dbInfo.db=ie}).catch(function(ie){throw F(H,ie),ie})}function Te(H,J,V,se){se===void 0&&(se=1);try{var le=H.db.transaction(H.storeName,J);V(null,le)}catch(ie){if(se>0&&(!H.db||ie.name==="InvalidStateError"||ie.name==="NotFoundError"))return h.resolve().then(function(){if(!H.db||ie.name==="NotFoundError"&&!H.db.objectStoreNames.contains(H.storeName)&&H.version<=H.db.version)return H.db&&(H.version=H.db.version+1),W(H)}).then(function(){return ke(H).then(function(){Te(H,J,V,se-1)})}).catch(V);V(ie)}}function Ce(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ye(H){var J=this,V={db:null};if(H)for(var se in H)V[se]=H[se];var le=k[V.name];le||(le=Ce(),k[V.name]=le),le.forages.push(J),J._initReady||(J._initReady=J.ready,J.ready=ue);var ie=[];function we(){return h.resolve()}for(var Ae=0;Ae<le.forages.length;Ae++){var Pe=le.forages[Ae];Pe!==J&&ie.push(Pe._initReady().catch(we))}var Ne=le.forages.slice(0);return h.all(ie).then(function(){return V.db=le.db,q(V)}).then(function(Me){return V.db=Me,M(V,J._defaultConfig.version)?W(V):Me}).then(function(Me){V.db=le.db=Me,J._dbInfo=V;for(var et=0;et<Ne.length;et++){var Tt=Ne[et];Tt!==J&&(Tt._dbInfo.db=V.db,Tt._dbInfo.version=V.version)}})}function ge(H,J){var V=this;H=b(H);var se=new h(function(le,ie){V.ready().then(function(){Te(V._dbInfo,S,function(we,Ae){if(we)return ie(we);try{var Pe=Ae.objectStore(V._dbInfo.storeName),Ne=Pe.get(H);Ne.onsuccess=function(){var Me=Ne.result;Me===void 0&&(Me=null),he(Me)&&(Me=Q(Me)),le(Me)},Ne.onerror=function(){ie(Ne.error)}}catch(Me){ie(Me)}})}).catch(ie)});return v(se,J),se}function ce(H,J){var V=this,se=new h(function(le,ie){V.ready().then(function(){Te(V._dbInfo,S,function(we,Ae){if(we)return ie(we);try{var Pe=Ae.objectStore(V._dbInfo.storeName),Ne=Pe.openCursor(),Me=1;Ne.onsuccess=function(){var et=Ne.result;if(et){var Tt=et.value;he(Tt)&&(Tt=Q(Tt));var Ht=H(Tt,et.key,Me++);Ht!==void 0?le(Ht):et.continue()}else le()},Ne.onerror=function(){ie(Ne.error)}}catch(et){ie(et)}})}).catch(ie)});return v(se,J),se}function ye(H,J,V){var se=this;H=b(H);var le=new h(function(ie,we){var Ae;se.ready().then(function(){return Ae=se._dbInfo,$.call(J)==="[object Blob]"?P(Ae.db).then(function(Pe){return Pe?J:G(J)}):J}).then(function(Pe){Te(se._dbInfo,T,function(Ne,Me){if(Ne)return we(Ne);try{var et=Me.objectStore(se._dbInfo.storeName);Pe===null&&(Pe=void 0);var Tt=et.put(Pe,H);Me.oncomplete=function(){Pe===void 0&&(Pe=null),ie(Pe)},Me.onabort=Me.onerror=function(){var Ht=Tt.error?Tt.error:Tt.transaction.error;we(Ht)}}catch(Ht){we(Ht)}})}).catch(we)});return v(le,V),le}function fe(H,J){var V=this;H=b(H);var se=new h(function(le,ie){V.ready().then(function(){Te(V._dbInfo,T,function(we,Ae){if(we)return ie(we);try{var Pe=Ae.objectStore(V._dbInfo.storeName),Ne=Pe.delete(H);Ae.oncomplete=function(){le()},Ae.onerror=function(){ie(Ne.error)},Ae.onabort=function(){var Me=Ne.error?Ne.error:Ne.transaction.error;ie(Me)}}catch(Me){ie(Me)}})}).catch(ie)});return v(se,J),se}function y(H){var J=this,V=new h(function(se,le){J.ready().then(function(){Te(J._dbInfo,T,function(ie,we){if(ie)return le(ie);try{var Ae=we.objectStore(J._dbInfo.storeName),Pe=Ae.clear();we.oncomplete=function(){se()},we.onabort=we.onerror=function(){var Ne=Pe.error?Pe.error:Pe.transaction.error;le(Ne)}}catch(Ne){le(Ne)}})}).catch(le)});return v(V,H),V}function w(H){var J=this,V=new h(function(se,le){J.ready().then(function(){Te(J._dbInfo,S,function(ie,we){if(ie)return le(ie);try{var Ae=we.objectStore(J._dbInfo.storeName),Pe=Ae.count();Pe.onsuccess=function(){se(Pe.result)},Pe.onerror=function(){le(Pe.error)}}catch(Ne){le(Ne)}})}).catch(le)});return v(V,H),V}function A(H,J){var V=this,se=new h(function(le,ie){if(H<0){le(null);return}V.ready().then(function(){Te(V._dbInfo,S,function(we,Ae){if(we)return ie(we);try{var Pe=Ae.objectStore(V._dbInfo.storeName),Ne=!1,Me=Pe.openKeyCursor();Me.onsuccess=function(){var et=Me.result;if(!et){le(null);return}H===0||Ne?le(et.key):(Ne=!0,et.advance(H))},Me.onerror=function(){ie(Me.error)}}catch(et){ie(et)}})}).catch(ie)});return v(se,J),se}function N(H){var J=this,V=new h(function(se,le){J.ready().then(function(){Te(J._dbInfo,S,function(ie,we){if(ie)return le(ie);try{var Ae=we.objectStore(J._dbInfo.storeName),Pe=Ae.openKeyCursor(),Ne=[];Pe.onsuccess=function(){var Me=Pe.result;if(!Me){se(Ne);return}Ne.push(Me.key),Me.continue()},Pe.onerror=function(){le(Pe.error)}}catch(Me){le(Me)}})}).catch(le)});return v(V,H),V}function B(H,J){J=m.apply(this,arguments);var V=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||V.name,H.storeName=H.storeName||V.storeName);var se=this,le;if(!H.name)le=h.reject("Invalid arguments");else{var ie=H.name===V.name&&se._dbInfo.db,we=ie?h.resolve(se._dbInfo.db):q(H).then(function(Ae){var Pe=k[H.name],Ne=Pe.forages;Pe.db=Ae;for(var Me=0;Me<Ne.length;Me++)Ne[Me]._dbInfo.db=Ae;return Ae});H.storeName?le=we.then(function(Ae){if(Ae.objectStoreNames.contains(H.storeName)){var Pe=Ae.version+1;R(H);var Ne=k[H.name],Me=Ne.forages;Ae.close();for(var et=0;et<Me.length;et++){var Tt=Me[et];Tt._dbInfo.db=null,Tt._dbInfo.version=Pe}var Ht=new h(function(Ut,xr){var lr=l.open(H.name,Pe);lr.onerror=function(ti){var Ka=lr.result;Ka.close(),xr(ti)},lr.onupgradeneeded=function(){var ti=lr.result;ti.deleteObjectStore(H.storeName)},lr.onsuccess=function(){var ti=lr.result;ti.close(),Ut(ti)}});return Ht.then(function(Ut){Ne.db=Ut;for(var xr=0;xr<Me.length;xr++){var lr=Me[xr];lr._dbInfo.db=Ut,D(lr._dbInfo)}}).catch(function(Ut){throw(F(H,Ut)||h.resolve()).catch(function(){}),Ut})}}):le=we.then(function(Ae){R(H);var Pe=k[H.name],Ne=Pe.forages;Ae.close();for(var Me=0;Me<Ne.length;Me++){var et=Ne[Me];et._dbInfo.db=null}var Tt=new h(function(Ht,Ut){var xr=l.deleteDatabase(H.name);xr.onerror=function(){var lr=xr.result;lr&&lr.close(),Ut(xr.error)},xr.onblocked=function(){console.warn('dropInstance blocked for database "'+H.name+'" until all open connections are closed')},xr.onsuccess=function(){var lr=xr.result;lr&&lr.close(),Ht(lr)}});return Tt.then(function(Ht){Pe.db=Ht;for(var Ut=0;Ut<Ne.length;Ut++){var xr=Ne[Ut];D(xr._dbInfo)}}).catch(function(Ht){throw(F(H,Ht)||h.resolve()).catch(function(){}),Ht})})}return v(le,J),le}var j={_driver:"asyncStorage",_initStorage:Ye,_support:u(),iterate:ce,getItem:ge,setItem:ye,removeItem:fe,clear:y,length:w,key:A,keys:N,dropInstance:B};function X(){return typeof openDatabase=="function"}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ee="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,We="__lfsc__:",Xe=We.length,Ze="arbf",Ve="blob",$t="si08",Kt="ui08",Zr="uic8",vr="si16",yt="si32",Xr="ur16",gi="ui32",Bi="fl32",un="fl64",Bs=Xe+Ze.length,Wc=Object.prototype.toString;function Vc(H){var J=H.length*.75,V=H.length,se,le=0,ie,we,Ae,Pe;H[H.length-1]==="="&&(J--,H[H.length-2]==="="&&J--);var Ne=new ArrayBuffer(J),Me=new Uint8Array(Ne);for(se=0;se<V;se+=4)ie=re.indexOf(H[se]),we=re.indexOf(H[se+1]),Ae=re.indexOf(H[se+2]),Pe=re.indexOf(H[se+3]),Me[le++]=ie<<2|we>>4,Me[le++]=(we&15)<<4|Ae>>2,Me[le++]=(Ae&3)<<6|Pe&63;return Ne}function du(H){var J=new Uint8Array(H),V="",se;for(se=0;se<J.length;se+=3)V+=re[J[se]>>2],V+=re[(J[se]&3)<<4|J[se+1]>>4],V+=re[(J[se+1]&15)<<2|J[se+2]>>6],V+=re[J[se+2]&63];return J.length%3===2?V=V.substring(0,V.length-1)+"=":J.length%3===1&&(V=V.substring(0,V.length-2)+"=="),V}function pf(H,J){var V="";if(H&&(V=Wc.call(H)),H&&(V==="[object ArrayBuffer]"||H.buffer&&Wc.call(H.buffer)==="[object ArrayBuffer]")){var se,le=We;H instanceof ArrayBuffer?(se=H,le+=Ze):(se=H.buffer,V==="[object Int8Array]"?le+=$t:V==="[object Uint8Array]"?le+=Kt:V==="[object Uint8ClampedArray]"?le+=Zr:V==="[object Int16Array]"?le+=vr:V==="[object Uint16Array]"?le+=Xr:V==="[object Int32Array]"?le+=yt:V==="[object Uint32Array]"?le+=gi:V==="[object Float32Array]"?le+=Bi:V==="[object Float64Array]"?le+=un:J(new Error("Failed to get type for BinaryArray"))),J(le+du(se))}else if(V==="[object Blob]"){var ie=new FileReader;ie.onload=function(){var we=Ee+H.type+"~"+du(this.result);J(We+Ve+we)},ie.readAsArrayBuffer(H)}else try{J(JSON.stringify(H))}catch(we){console.error("Couldn't convert value into a JSON string: ",H),J(null,we)}}function vf(H){if(H.substring(0,Xe)!==We)return JSON.parse(H);var J=H.substring(Bs),V=H.substring(Xe,Bs),se;if(V===Ve&&_e.test(J)){var le=J.match(_e);se=le[1],J=J.substring(le[0].length)}var ie=Vc(J);switch(V){case Ze:return ie;case Ve:return d([ie],{type:se});case $t:return new Int8Array(ie);case Kt:return new Uint8Array(ie);case Zr:return new Uint8ClampedArray(ie);case vr:return new Int16Array(ie);case Xr:return new Uint16Array(ie);case yt:return new Int32Array(ie);case gi:return new Uint32Array(ie);case Bi:return new Float32Array(ie);case un:return new Float64Array(ie);default:throw new Error("Unkown type: "+V)}}var fu={serialize:pf,deserialize:vf,stringToBuffer:Vc,bufferToString:du};function Dg(H,J,V,se){H.executeSql("CREATE TABLE IF NOT EXISTS "+J.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],V,se)}function Nw(H){var J=this,V={db:null};if(H)for(var se in H)V[se]=typeof H[se]!="string"?H[se].toString():H[se];var le=new h(function(ie,we){try{V.db=openDatabase(V.name,String(V.version),V.description,V.size)}catch(Ae){return we(Ae)}V.db.transaction(function(Ae){Dg(Ae,V,function(){J._dbInfo=V,ie()},function(Pe,Ne){we(Ne)})},we)});return V.serializer=fu,le}function po(H,J,V,se,le,ie){H.executeSql(V,se,le,function(we,Ae){Ae.code===Ae.SYNTAX_ERR?we.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[J.storeName],function(Pe,Ne){Ne.rows.length?ie(Pe,Ae):Dg(Pe,J,function(){Pe.executeSql(V,se,le,ie)},ie)},ie):ie(we,Ae)},ie)}function Bg(H,J){var V=this;H=b(H);var se=new h(function(le,ie){V.ready().then(function(){var we=V._dbInfo;we.db.transaction(function(Ae){po(Ae,we,"SELECT * FROM "+we.storeName+" WHERE key = ? LIMIT 1",[H],function(Pe,Ne){var Me=Ne.rows.length?Ne.rows.item(0).value:null;Me&&(Me=we.serializer.deserialize(Me)),le(Me)},function(Pe,Ne){ie(Ne)})})}).catch(ie)});return v(se,J),se}function Mg(H,J){var V=this,se=new h(function(le,ie){V.ready().then(function(){var we=V._dbInfo;we.db.transaction(function(Ae){po(Ae,we,"SELECT * FROM "+we.storeName,[],function(Pe,Ne){for(var Me=Ne.rows,et=Me.length,Tt=0;Tt<et;Tt++){var Ht=Me.item(Tt),Ut=Ht.value;if(Ut&&(Ut=we.serializer.deserialize(Ut)),Ut=H(Ut,Ht.key,Tt+1),Ut!==void 0){le(Ut);return}}le()},function(Pe,Ne){ie(Ne)})})}).catch(ie)});return v(se,J),se}function Lg(H,J,V,se){var le=this;H=b(H);var ie=new h(function(we,Ae){le.ready().then(function(){J===void 0&&(J=null);var Pe=J,Ne=le._dbInfo;Ne.serializer.serialize(J,function(Me,et){et?Ae(et):Ne.db.transaction(function(Tt){po(Tt,Ne,"INSERT OR REPLACE INTO "+Ne.storeName+" (key, value) VALUES (?, ?)",[H,Me],function(){we(Pe)},function(Ht,Ut){Ae(Ut)})},function(Tt){if(Tt.code===Tt.QUOTA_ERR){if(se>0){we(Lg.apply(le,[H,Pe,V,se-1]));return}Ae(Tt)}})})}).catch(Ae)});return v(ie,V),ie}function Rw(H,J,V){return Lg.apply(this,[H,J,V,1])}function Dw(H,J){var V=this;H=b(H);var se=new h(function(le,ie){V.ready().then(function(){var we=V._dbInfo;we.db.transaction(function(Ae){po(Ae,we,"DELETE FROM "+we.storeName+" WHERE key = ?",[H],function(){le()},function(Pe,Ne){ie(Ne)})})}).catch(ie)});return v(se,J),se}function Bw(H){var J=this,V=new h(function(se,le){J.ready().then(function(){var ie=J._dbInfo;ie.db.transaction(function(we){po(we,ie,"DELETE FROM "+ie.storeName,[],function(){se()},function(Ae,Pe){le(Pe)})})}).catch(le)});return v(V,H),V}function Fg(H){var J=this,V=new h(function(se,le){J.ready().then(function(){var ie=J._dbInfo;ie.db.transaction(function(we){po(we,ie,"SELECT COUNT(key) as c FROM "+ie.storeName,[],function(Ae,Pe){var Ne=Pe.rows.item(0).c;se(Ne)},function(Ae,Pe){le(Pe)})})}).catch(le)});return v(V,H),V}function Mw(H,J){var V=this,se=new h(function(le,ie){V.ready().then(function(){var we=V._dbInfo;we.db.transaction(function(Ae){po(Ae,we,"SELECT key FROM "+we.storeName+" WHERE id = ? LIMIT 1",[H+1],function(Pe,Ne){var Me=Ne.rows.length?Ne.rows.item(0).key:null;le(Me)},function(Pe,Ne){ie(Ne)})})}).catch(ie)});return v(se,J),se}function Lw(H){var J=this,V=new h(function(se,le){J.ready().then(function(){var ie=J._dbInfo;ie.db.transaction(function(we){po(we,ie,"SELECT key FROM "+ie.storeName,[],function(Ae,Pe){for(var Ne=[],Me=0;Me<Pe.rows.length;Me++)Ne.push(Pe.rows.item(Me).key);se(Ne)},function(Ae,Pe){le(Pe)})})}).catch(le)});return v(V,H),V}function Fw(H){return new h(function(J,V){H.transaction(function(se){se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(le,ie){for(var we=[],Ae=0;Ae<ie.rows.length;Ae++)we.push(ie.rows.item(Ae).name);J({db:H,storeNames:we})},function(le,ie){V(ie)})},function(se){V(se)})})}function gf(H,J){J=m.apply(this,arguments);var V=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||V.name,H.storeName=H.storeName||V.storeName);var se=this,le;return H.name?le=new h(function(ie){var we;H.name===V.name?we=se._dbInfo.db:we=openDatabase(H.name,"","",0),H.storeName?ie({db:we,storeNames:[H.storeName]}):ie(Fw(we))}).then(function(ie){return new h(function(we,Ae){ie.db.transaction(function(Pe){function Ne(Ht){return new h(function(Ut,xr){Pe.executeSql("DROP TABLE IF EXISTS "+Ht,[],function(){Ut()},function(lr,ti){xr(ti)})})}for(var Me=[],et=0,Tt=ie.storeNames.length;et<Tt;et++)Me.push(Ne(ie.storeNames[et]));h.all(Me).then(function(){we()}).catch(function(Ht){Ae(Ht)})},function(Pe){Ae(Pe)})})}):le=h.reject("Invalid arguments"),v(le,J),le}var jw={_driver:"webSQLStorage",_initStorage:Nw,_support:X(),iterate:Mg,getItem:Bg,setItem:Rw,removeItem:Dw,clear:Bw,length:Fg,key:Mw,keys:Lw,dropInstance:gf};function yf(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function jg(H,J){var V=H.name+"/";return H.storeName!==J.storeName&&(V+=H.storeName+"/"),V}function zw(){var H="_localforage_support_test";try{return localStorage.setItem(H,!0),localStorage.removeItem(H),!1}catch{return!0}}function Hw(){return!zw()||localStorage.length>0}function Uw(H){var J=this,V={};if(H)for(var se in H)V[se]=H[se];return V.keyPrefix=jg(H,J._defaultConfig),Hw()?(J._dbInfo=V,V.serializer=fu,h.resolve()):h.reject()}function Kw(H){var J=this,V=J.ready().then(function(){for(var se=J._dbInfo.keyPrefix,le=localStorage.length-1;le>=0;le--){var ie=localStorage.key(le);ie.indexOf(se)===0&&localStorage.removeItem(ie)}});return v(V,H),V}function Ww(H,J){var V=this;H=b(H);var se=V.ready().then(function(){var le=V._dbInfo,ie=localStorage.getItem(le.keyPrefix+H);return ie&&(ie=le.serializer.deserialize(ie)),ie});return v(se,J),se}function Vw(H,J){var V=this,se=V.ready().then(function(){for(var le=V._dbInfo,ie=le.keyPrefix,we=ie.length,Ae=localStorage.length,Pe=1,Ne=0;Ne<Ae;Ne++){var Me=localStorage.key(Ne);if(Me.indexOf(ie)===0){var et=localStorage.getItem(Me);if(et&&(et=le.serializer.deserialize(et)),et=H(et,Me.substring(we),Pe++),et!==void 0)return et}}});return v(se,J),se}function qw(H,J){var V=this,se=V.ready().then(function(){var le=V._dbInfo,ie;try{ie=localStorage.key(H)}catch{ie=null}return ie&&(ie=ie.substring(le.keyPrefix.length)),ie});return v(se,J),se}function zg(H){var J=this,V=J.ready().then(function(){for(var se=J._dbInfo,le=localStorage.length,ie=[],we=0;we<le;we++){var Ae=localStorage.key(we);Ae.indexOf(se.keyPrefix)===0&&ie.push(Ae.substring(se.keyPrefix.length))}return ie});return v(V,H),V}function Gw(H){var J=this,V=J.keys().then(function(se){return se.length});return v(V,H),V}function Yw(H,J){var V=this;H=b(H);var se=V.ready().then(function(){var le=V._dbInfo;localStorage.removeItem(le.keyPrefix+H)});return v(se,J),se}function Zw(H,J,V){var se=this;H=b(H);var le=se.ready().then(function(){J===void 0&&(J=null);var ie=J;return new h(function(we,Ae){var Pe=se._dbInfo;Pe.serializer.serialize(J,function(Ne,Me){if(Me)Ae(Me);else try{localStorage.setItem(Pe.keyPrefix+H,Ne),we(ie)}catch(et){(et.name==="QuotaExceededError"||et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ae(et),Ae(et)}})})});return v(le,V),le}function Xw(H,J){if(J=m.apply(this,arguments),H=typeof H!="function"&&H||{},!H.name){var V=this.config();H.name=H.name||V.name,H.storeName=H.storeName||V.storeName}var se=this,le;return H.name?le=new h(function(ie){H.storeName?ie(jg(H,se._defaultConfig)):ie(H.name+"/")}).then(function(ie){for(var we=localStorage.length-1;we>=0;we--){var Ae=localStorage.key(we);Ae.indexOf(ie)===0&&localStorage.removeItem(Ae)}}):le=h.reject("Invalid arguments"),v(le,J),le}var Jw={_driver:"localStorageWrapper",_initStorage:Uw,_support:yf(),iterate:Vw,getItem:Ww,setItem:Zw,removeItem:Yw,clear:Kw,length:Gw,key:qw,keys:zg,dropInstance:Xw},Qw=function(J,V){return J===V||typeof J=="number"&&typeof V=="number"&&isNaN(J)&&isNaN(V)},qc=function(J,V){for(var se=J.length,le=0;le<se;){if(Qw(J[le],V))return!0;le++}return!1},Hg=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"},vo={},Ug={},Ua={INDEXEDDB:j,WEBSQL:jw,LOCALSTORAGE:Jw},e_=[Ua.INDEXEDDB._driver,Ua.WEBSQL._driver,Ua.LOCALSTORAGE._driver],pu=["dropInstance"],Gc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(pu),Kg={description:"",driver:e_.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function t_(H,J){H[J]=function(){var V=arguments;return H.ready().then(function(){return H[J].apply(H,V)})}}function mf(){for(var H=1;H<arguments.length;H++){var J=arguments[H];if(J)for(var V in J)J.hasOwnProperty(V)&&(Hg(J[V])?arguments[0][V]=J[V].slice():arguments[0][V]=J[V])}return arguments[0]}var r_=function(){function H(J){o(this,H);for(var V in Ua)if(Ua.hasOwnProperty(V)){var se=Ua[V],le=se._driver;this[V]=le,vo[le]||this.defineDriver(se)}this._defaultConfig=mf({},Kg),this._config=mf({},this._defaultConfig,J),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return H.prototype.config=function(V){if((typeof V>"u"?"undefined":s(V))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var se in V){if(se==="storeName"&&(V[se]=V[se].replace(/\W/g,"_")),se==="version"&&typeof V[se]!="number")return new Error("Database version must be a number.");this._config[se]=V[se]}return"driver"in V&&V.driver?this.setDriver(this._config.driver):!0}else return typeof V=="string"?this._config[V]:this._config},H.prototype.defineDriver=function(V,se,le){var ie=new h(function(we,Ae){try{var Pe=V._driver,Ne=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!V._driver){Ae(Ne);return}for(var Me=Gc.concat("_initStorage"),et=0,Tt=Me.length;et<Tt;et++){var Ht=Me[et],Ut=!qc(pu,Ht);if((Ut||V[Ht])&&typeof V[Ht]!="function"){Ae(Ne);return}}var xr=function(){for(var Ka=function(Vg){return function(){var s_=new Error("Method "+Vg+" is not implemented by the current driver"),qg=h.reject(s_);return v(qg,arguments[arguments.length-1]),qg}},bf=0,Wg=pu.length;bf<Wg;bf++){var Yc=pu[bf];V[Yc]||(V[Yc]=Ka(Yc))}};xr();var lr=function(Ka){vo[Pe]&&console.info("Redefining LocalForage driver: "+Pe),vo[Pe]=V,Ug[Pe]=Ka,we()};"_support"in V?V._support&&typeof V._support=="function"?V._support().then(lr,Ae):lr(!!V._support):lr(!0)}catch(ti){Ae(ti)}});return g(ie,se,le),ie},H.prototype.driver=function(){return this._driver||null},H.prototype.getDriver=function(V,se,le){var ie=vo[V]?h.resolve(vo[V]):h.reject(new Error("Driver not found."));return g(ie,se,le),ie},H.prototype.getSerializer=function(V){var se=h.resolve(fu);return g(se,V),se},H.prototype.ready=function(V){var se=this,le=se._driverSet.then(function(){return se._ready===null&&(se._ready=se._initDriver()),se._ready});return g(le,V,V),le},H.prototype.setDriver=function(V,se,le){var ie=this;Hg(V)||(V=[V]);var we=this._getSupportedDrivers(V);function Ae(){ie._config.driver=ie.driver()}function Pe(et){return ie._extend(et),Ae(),ie._ready=ie._initStorage(ie._config),ie._ready}function Ne(et){return function(){var Tt=0;function Ht(){for(;Tt<et.length;){var Ut=et[Tt];return Tt++,ie._dbInfo=null,ie._ready=null,ie.getDriver(Ut).then(Pe).catch(Ht)}Ae();var xr=new Error("No available storage method found.");return ie._driverSet=h.reject(xr),ie._driverSet}return Ht()}}var Me=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=Me.then(function(){var et=we[0];return ie._dbInfo=null,ie._ready=null,ie.getDriver(et).then(function(Tt){ie._driver=Tt._driver,Ae(),ie._wrapLibraryMethodsWithReady(),ie._initDriver=Ne(we)})}).catch(function(){Ae();var et=new Error("No available storage method found.");return ie._driverSet=h.reject(et),ie._driverSet}),g(this._driverSet,se,le),this._driverSet},H.prototype.supports=function(V){return!!Ug[V]},H.prototype._extend=function(V){mf(this,V)},H.prototype._getSupportedDrivers=function(V){for(var se=[],le=0,ie=V.length;le<ie;le++){var we=V[le];this.supports(we)&&se.push(we)}return se},H.prototype._wrapLibraryMethodsWithReady=function(){for(var V=0,se=Gc.length;V<se;V++)t_(this,Gc[V])},H.prototype.createInstance=function(V){return new H(V)},H}(),n_=new r_;n.exports=n_},{3:3}]},{},[4])(4)})})(m9);var vse=m9.exports;const ca=oo(vse);function gse(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var qI=gse,yse=typeof en=="object"&&en&&en.Object===Object&&en,mse=yse,bse=mse,wse=typeof self=="object"&&self&&self.Object===Object&&self,_se=bse||wse||Function("return this")(),b9=_se,$se=b9,xse=function(){return $se.Date.now()},Ese=xse,Sse=/\s/;function kse(e){for(var r=e.length;r--&&Sse.test(e.charAt(r)););return r}var Tse=kse,Ise=Tse,Ose=/^\s+/;function Ase(e){return e&&e.slice(0,Ise(e)+1).replace(Ose,"")}var Cse=Ase,Pse=b9,Nse=Pse.Symbol,w9=Nse,P4=w9,_9=Object.prototype,Rse=_9.hasOwnProperty,Dse=_9.toString,Mf=P4?P4.toStringTag:void 0;function Bse(e){var r=Rse.call(e,Mf),t=e[Mf];try{e[Mf]=void 0;var n=!0}catch{}var i=Dse.call(e);return n&&(r?e[Mf]=t:delete e[Mf]),i}var Mse=Bse,Lse=Object.prototype,Fse=Lse.toString;function jse(e){return Fse.call(e)}var zse=jse,N4=w9,Hse=Mse,Use=zse,Kse="[object Null]",Wse="[object Undefined]",R4=N4?N4.toStringTag:void 0;function Vse(e){return e==null?e===void 0?Wse:Kse:R4&&R4 in Object(e)?Hse(e):Use(e)}var qse=Vse;function Gse(e){return e!=null&&typeof e=="object"}var Yse=Gse,Zse=qse,Xse=Yse,Jse="[object Symbol]";function Qse(e){return typeof e=="symbol"||Xse(e)&&Zse(e)==Jse}var eoe=Qse,toe=Cse,D4=qI,roe=eoe,B4=0/0,noe=/^[-+]0x[0-9a-f]+$/i,ioe=/^0b[01]+$/i,soe=/^0o[0-7]+$/i,ooe=parseInt;function aoe(e){if(typeof e=="number")return e;if(roe(e))return B4;if(D4(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=D4(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=toe(e);var t=ioe.test(e);return t||soe.test(e)?ooe(e.slice(2),t?2:8):noe.test(e)?B4:+e}var loe=aoe,uoe=qI,y$=Ese,M4=loe,coe="Expected a function",hoe=Math.max,doe=Math.min;function foe(e,r,t){var n,i,s,o,a,l,u=0,d=!1,h=!1,v=!0;if(typeof e!="function")throw new TypeError(coe);r=M4(r)||0,uoe(t)&&(d=!!t.leading,h="maxWait"in t,s=h?hoe(M4(t.maxWait)||0,r):s,v="trailing"in t?!!t.trailing:v);function g(O){var I=n,P=i;return n=i=void 0,u=O,o=e.apply(P,I),o}function b(O){return u=O,a=setTimeout(E,r),d?g(O):o}function m(O){var I=O-l,P=O-u,R=r-I;return h?doe(R,s-P):R}function x(O){var I=O-l,P=O-u;return l===void 0||I>=r||I<0||h&&P>=s}function E(){var O=y$();if(x(O))return k(O);a=setTimeout(E,m(O))}function k(O){return a=void 0,v&&n?g(O):(n=i=void 0,o)}function $(){a!==void 0&&clearTimeout(a),u=0,n=l=i=a=void 0}function S(){return a===void 0?o:k(y$())}function T(){var O=y$(),I=x(O);if(n=arguments,i=this,l=O,I){if(a===void 0)return b(l);if(h)return clearTimeout(a),a=setTimeout(E,r),g(l)}return a===void 0&&(a=setTimeout(E,r)),o}return T.cancel=$,T.flush=S,T}var $9=foe;const tu=oo($9);var poe=$9,voe=qI,goe="Expected a function";function yoe(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(goe);return voe(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),poe(e,r,{leading:n,maxWait:r,trailing:i})}var moe=yoe;const Ai=oo(moe),L4="c2fc1ad0-f76f-11ec-b939-0242ac120002",F4=new Set;ca.config({driver:[ca.LOCALSTORAGE,ca.INDEXEDDB,ca.WEBSQL]});let boe=class x9{constructor(r="",t=null){Z(this,"id");Z(this,"parent");Z(this,"children",new Map);Z(this,"on_subscriptions",new Map);Z(this,"map_subscriptions",new Map);Z(this,"value");Z(this,"counter",0);Z(this,"loaded",!1);Z(this,"saveLocalForage",Ai(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const r=Array.from(this.children.keys());await ca.setItem(this.id,r)}else this.value===void 0?await ca.removeItem(this.id):await ca.setItem(this.id,this.value===null?L4:this.value)},500));Z(this,"loadLocalForage",Ai(async()=>{if(F4.has(this.id))return;let r=await ca.getItem(this.id);if(r===null)r=void 0,F4.add(this.id);else if(r===L4)r=null;else if(Array.isArray(r)){const t={};await Promise.all(r.map(async n=>{t[n]=await this.get(n).once()})),r=t}else this.value=r;return this.loaded=!0,r},500));Z(this,"doCallbacks",tu(()=>{for(const[r,t]of this.on_subscriptions){const n=()=>this.on_subscriptions.delete(r);this.once(t,n,!1)}if(this.parent){this.parent.doCallbacks();for(const[r,t]of this.parent.map_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(r)};this.once(t,n,!1)}}},20,{maxWait:40}));this.id=r,this.parent=t}get(r){const t=this.children.get(r);if(t)return t;const n=new x9(`${this.id}/${r}`,this);return this.children.set(r,n),this.saveLocalForage(),n}async put(r){if(Array.isArray(r))throw new Error("Sorry, we don't deal with arrays");return typeof r=="object"&&r!==null?(this.value=void 0,await Promise.all(Object.entries(r).map(([t,n])=>this.get(t).put(n)))):(this.children=new Map,this.value=r),this.doCallbacks(),this.saveLocalForage()}async once(r,t,n=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,t)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||n)return r&&r(i,this.id.slice(this.id.lastIndexOf("/")+1),t||(()=>{})),i}on(r){const t=this.counter++;this.on_subscriptions.set(t,r);const n=()=>this.on_subscriptions.delete(t);return this.once(r,n,!1),n}map(r){var s;const t=this.counter++;this.map_subscriptions.set(t,r);const n=()=>this.map_subscriptions.delete(t),i=()=>{for(const o of this.children.values())o.once(r,n,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),n}};const be=new boe;function GI(e,r=void 0,t=!1){const[n,i]=ve(r||be.get(e).value);Ge(()=>be.get(e).on((a,l,u)=>{i(a),t&&u()}),[e,t]);const s=Hn(o=>{be.get(e).put(o)},[e]);return[n,s]}var Na={},Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.createBitArray=woe;Md.fromBits=$oe;Md.toBits=_oe;function woe(e){return new Uint8Array(e)}function E9(e,r,t,n,i){var s=(1<<n)-1,o=0,a=0,l=0;if(e.forEach(function(u){for(o=(o<<r)+u,a+=r;a>=n;)a-=n,t[l]=o>>a&s,l+=1}),i)a>0&&(t[l]=o<<n-a&s);else{if(a>=r)throw new Error("Excessive padding: ".concat(a," (max ").concat(r-1," allowed)"));if(o%(1<<a)!==0)throw new Error("Non-zero padding")}}function _oe(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return E9(e,8,t,r,!0),t}function $oe(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return E9(e,r,t,8,!1),t}var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.CHECKSUM_LENGTH=void 0;ao.createChecksum=koe;ao.decode=O9;ao.decodeWithPrefix=Ioe;ao.detectCase=Ooe;ao.encode=Toe;ao.expandPrefix=I9;ao.verifyChecksum=Soe;var S9=Md,CE="qpzry9x8gf2tvdw0s3jn54khce6mua7l",k9=734539939,j4=33,z4=126,PE=6;ao.CHECKSUM_LENGTH=PE;var xoe=function(){for(var e=new Map,r=0;r<CE.length;r+=1)e.set(CE[r],r);return e}(),Eoe=[996825010,642813549,513874426,1027748829,705979059];function T9(e){return e.reduce(function(r,t){var n=r>>25,i=(r&33554431)<<5^t;return Eoe.reduce(function(s,o,a){return n>>a&1?s^o:s},i)},1)}function I9(e,r){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);r[t]=n>>5,r[t+e.length+1]=n&31}r[e.length]=0}function Soe(e){switch(T9(e)){case 1:return"bech32";case k9:return"bech32m";default:return}}function koe(e,r){var t;switch(r){case"bech32":t=1;break;case"bech32m":t=k9;break;default:throw Error("Invalid encoding value: ".concat(r,"; expected bech32 or bech32m"))}for(var n=T9(e)^t,i=0;i<PE;i+=1){var s=5*(5-i);e[e.length-PE+i]=n>>s&31}}function Toe(e){return e.reduce(function(r,t){return r+CE[t]},"")}function O9(e,r){for(var t=r||(0,S9.createBitArray)(e.length),n=0;n<e.length;n+=1){var i=xoe.get(e[n]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[n]));t[n]=i}return t}function Ioe(e,r){var t=r.length+2*e.length+1,n=(0,S9.createBitArray)(t);return I9(e,n.subarray(0,2*e.length+1)),O9(r,n.subarray(2*e.length+1)),n}function Ooe(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",t=!1,n=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<j4||s>z4)throw new TypeError("Invalid char in ".concat(r,": ").concat(s,"; ")+"should be in ASCII range ".concat(j4,"-").concat(z4));n=n||s>=65&&s<=90,t=t||s>=97&&s<=122}if(t&&n)throw new TypeError("Mixed-case ".concat(r));return n?"upper":t?"lower":null}Object.defineProperty(Na,"__esModule",{value:!0});Na.BitcoinAddress=void 0;var NE=Na.decode=Noe;Na.decodeTo5BitArray=JI;var H4=Na.encode=Poe;Na.encode5BitArray=XI;Na.from5BitArray=ZI;Na.to5BitArray=YI;var Np=Md,xs=ao;function Aoe(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function U4(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Coe(e,r,t){return r&&U4(e.prototype,r),t&&U4(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var P0=90;function YI(e,r){var t=Math.ceil(e.length*8/5),n=r||(0,Np.createBitArray)(t);return(0,Np.toBits)(e,5,n)}function ZI(e,r){var t=Math.floor(e.length*5/8),n=r||new Uint8Array(t);return(0,Np.fromBits)(e,5,n)}function XI(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+r.length+xs.CHECKSUM_LENGTH;if(i-e.length>P0)throw new Error("Message to be produced is too long (max ".concat(P0," supported)"));var s=(t=(0,xs.detectCase)(e,"prefix"))!==null&&t!==void 0?t:"lower",o=(0,Np.createBitArray)(i);(0,xs.expandPrefix)(e.toLowerCase(),o.subarray(0,2*e.length+1));var a=o.subarray(2*e.length+1,o.length-xs.CHECKSUM_LENGTH);a.set(r),(0,xs.createChecksum)(o,n);var l=(0,xs.encode)(o.subarray(2*e.length+1));return s==="upper"&&(l=l.toUpperCase()),"".concat(e,"1").concat(l)}function Poe(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return XI(e,YI(r),t)}function JI(e){if(e.length>P0)throw new TypeError("Message too long; max ".concat(P0," expected"));(0,xs.detectCase)(e);var r=e.toLowerCase(),t=r.lastIndexOf("1");if(t<0)throw new Error('No separator char ("1") found');if(t>e.length-xs.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(xs.CHECKSUM_LENGTH," chars expected)"));var n=r.substring(0,t),i=(0,xs.decodeWithPrefix)(n,r.substring(t+1)),s=(0,xs.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:n,encoding:s,data:i.subarray(2*n.length+1,i.length-xs.CHECKSUM_LENGTH)}}function Noe(e){var r=JI(e),t=r.prefix,n=r.encoding,i=r.data;return{prefix:t,encoding:n,data:ZI(i)}}var Roe=function(){function e(r,t,n){if(Aoe(this,e),r!=="bc"&&r!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(t<0||t>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(n.length<2||n.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(t===0&&n.length!==20&&n.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=r,this.scriptVersion=t,this.data=n}return Coe(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var t=Math.ceil(this.data.length*8/5),n=(0,Np.createBitArray)(t+1);n[0]=this.scriptVersion,YI(this.data,n.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return XI(this.prefix,n,i)}}],[{key:"decode",value:function(t){var n=JI(t),i=n.prefix,s=n.data,o=n.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var a=s[0];if(a===0&&o!=="bech32")throw Error("Unexpected encoding ".concat(o," used for version 0 script"));if(a>0&&o!=="bech32m")throw Error("Unexpected encoding ".concat(o," used for version ").concat(a," script"));return new this(i,a,ZI(s.subarray(1)))}}]),e}();Na.BitcoinAddress=Roe;function RE(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Doe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Au(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Boe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");RE(e.outputLen),RE(e.blockLen)}function Moe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Loe(e,r){Au(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const ju={number:RE,bool:Doe,bytes:Au,hash:Boe,exists:Moe,output:Loe},m$=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const QI=e=>e instanceof Uint8Array,Vh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),bo=(e,r)=>e<<32-r|e>>>r,Foe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Foe)throw new Error("Non little-endian hardware is not supported");const joe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function ur(e){if(!QI(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=joe[e[t]];return r}function Qi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function A9(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function eO(e){if(typeof e=="string"&&(e=A9(e)),!QI(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function zu(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!QI(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let C9=class{clone(){return this._cloneInto()}};function Tc(e){const r=n=>e().update(eO(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function o1(e=32){if(m$&&typeof m$.getRandomValues=="function")return m$.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function zoe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let tO=class extends C9{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=Vh(this.buffer)}update(r){ju.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=eO(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Vh(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){ju.exists(this),ju.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;zoe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Vh(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Hoe=(e,r,t)=>e&r^~e&t,Uoe=(e,r,t)=>e&r^e&t^r&t,Koe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),el=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tl=new Uint32Array(64);let P9=class extends tO{constructor(){super(64,32,8,!1),this.A=el[0]|0,this.B=el[1]|0,this.C=el[2]|0,this.D=el[3]|0,this.E=el[4]|0,this.F=el[5]|0,this.G=el[6]|0,this.H=el[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let h=0;h<16;h++,t+=4)tl[h]=r.getUint32(t,!1);for(let h=16;h<64;h++){const v=tl[h-15],g=tl[h-2],b=bo(v,7)^bo(v,18)^v>>>3,m=bo(g,17)^bo(g,19)^g>>>10;tl[h]=m+tl[h-7]+b+tl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const v=bo(a,6)^bo(a,11)^bo(a,25),g=d+v+Hoe(a,l,u)+Koe[h]+tl[h]|0,m=(bo(n,2)^bo(n,13)^bo(n,22))+Uoe(n,i,s)|0;d=u,u=l,l=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,l,u,d)}roundClean(){tl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Woe=class extends P9{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const hi=Tc(()=>new P9);Tc(()=>new Woe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N9=BigInt(0),a1=BigInt(1),Voe=BigInt(2),l1=e=>e instanceof Uint8Array,qoe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function cd(e){if(!l1(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=qoe[e[t]];return r}function R9(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function rO(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function hd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Ci(e){return rO(cd(e))}function nO(e){if(!l1(e))throw new Error("Uint8Array expected");return rO(cd(Uint8Array.from(e).reverse()))}function Dl(e,r){return hd(e.toString(16).padStart(r*2,"0"))}function D9(e,r){return Dl(e,r).reverse()}function Goe(e){return hd(R9(e))}function jn(e,r,t){let n;if(typeof r=="string")try{n=hd(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(l1(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function hc(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!l1(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Yoe(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Zoe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Xoe(e){let r;for(r=0;e>N9;e>>=a1,r+=1);return r}function Joe(e,r){return e>>BigInt(r)&a1}const Qoe=(e,r,t)=>e|(t?a1:N9)<<BigInt(r),iO=e=>(Voe<<BigInt(e-1))-a1,b$=e=>new Uint8Array(e),K4=e=>Uint8Array.from(e);function B9(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=b$(e),i=b$(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...h)=>t(i,n,...h),l=(h=b$())=>{i=a(K4([0]),h),n=a(),h.length!==0&&(i=a(K4([1]),h),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const v=[];for(;h<r;){n=a();const g=n.slice();v.push(g),h+=n.length}return hc(...v)};return(h,v)=>{o(),l(h);let g;for(;!(g=v(u()));)l();return o(),g}}const eae={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function $v(e,r,t={}){const n=(i,s,o)=>{const a=eae[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const tae=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Joe,bitLen:Xoe,bitMask:iO,bitSet:Qoe,bytesToHex:cd,bytesToNumberBE:Ci,bytesToNumberLE:nO,concatBytes:hc,createHmacDrbg:B9,ensureBytes:jn,equalBytes:Yoe,hexToBytes:hd,hexToNumber:rO,numberToBytesBE:Dl,numberToBytesLE:D9,numberToHexUnpadded:R9,numberToVarBytesBE:Goe,utf8ToBytes:Zoe,validateObject:$v},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tn=BigInt(0),Ur=BigInt(1),Cu=BigInt(2),rae=BigInt(3),DE=BigInt(4),W4=BigInt(5),V4=BigInt(8);BigInt(9);BigInt(16);function $n(e,r){const t=e%r;return t>=Tn?t:r+t}function nae(e,r,t){if(t<=Tn||r<Tn)throw new Error("Expected power/modulo > 0");if(t===Ur)return Tn;let n=Ur;for(;r>Tn;)r&Ur&&(n=n*e%t),e=e*e%t,r>>=Ur;return n}function gs(e,r,t){let n=e;for(;r-- >Tn;)n*=n,n%=t;return n}function BE(e,r){if(e===Tn||r<=Tn)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=$n(e,r),n=r,i=Tn,s=Ur;for(;t!==Tn;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Ur)throw new Error("invert: does not exist");return $n(i,r)}function iae(e){const r=(e-Ur)/Cu;let t,n,i;for(t=e-Ur,n=0;t%Cu===Tn;t/=Cu,n++);for(i=Cu;i<e&&nae(i,r,e)!==e-Ur;i++);if(n===1){const o=(e+Ur)/DE;return function(l,u){const d=l.pow(u,o);if(!l.eql(l.sqr(d),u))throw new Error("Cannot find square root");return d}}const s=(t+Ur)/Cu;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,d=a.pow(a.mul(a.ONE,i),t),h=a.pow(l,s),v=a.pow(l,t);for(;!a.eql(v,a.ONE);){if(a.eql(v,a.ZERO))return a.ZERO;let g=1;for(let m=a.sqr(v);g<u&&!a.eql(m,a.ONE);g++)m=a.sqr(m);const b=a.pow(d,Ur<<BigInt(u-g-1));d=a.sqr(b),h=a.mul(h,b),v=a.mul(v,d),u=g}return h}}function sae(e){if(e%DE===rae){const r=(e+Ur)/DE;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%V4===W4){const r=(e-W4)/V4;return function(n,i){const s=n.mul(i,Cu),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Cu),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return iae(e)}const oae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function aae(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=oae.reduce((n,i)=>(n[i]="function",n),r);return $v(e,t)}function lae(e,r,t){if(t<Tn)throw new Error("Expected power > 0");if(t===Tn)return e.ONE;if(t===Ur)return r;let n=e.ONE,i=r;for(;t>Tn;)t&Ur&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Ur;return n}function uae(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function sO(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function cae(e,r,t=!1,n={}){if(e<=Tn)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=sO(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=sae(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:iO(i),ZERO:Tn,ONE:Ur,create:l=>$n(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Tn<=l&&l<e},is0:l=>l===Tn,isOdd:l=>(l&Ur)===Ur,neg:l=>$n(-l,e),eql:(l,u)=>l===u,sqr:l=>$n(l*l,e),add:(l,u)=>$n(l+u,e),sub:(l,u)=>$n(l-u,e),mul:(l,u)=>$n(l*u,e),pow:(l,u)=>lae(a,l,u),div:(l,u)=>$n(l*BE(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>BE(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>uae(a,l),cmov:(l,u,d)=>d?u:l,toBytes:l=>t?D9(l,s):Dl(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?nO(l):Ci(l)}});return Object.freeze(a)}function hae(e,r,t=!1){e=jn("privateHash",e);const n=e.length,i=sO(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?nO(e):Ci(e);return $n(s,r-Ur)+Ur}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dae=BigInt(0),w$=BigInt(1);function fae(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>dae;)s&w$&&(o=o.add(a)),a=a.double(),s>>=w$;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,d=u;for(let h=0;h<o;h++){d=u,l.push(d);for(let v=1;v<a;v++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,d=e.BASE;const h=BigInt(2**i-1),v=2**i,g=BigInt(i);for(let b=0;b<a;b++){const m=b*l;let x=Number(o&h);o>>=g,x>l&&(x-=v,o+=w$);const E=m,k=m+Math.abs(x)-1,$=b%2!==0,S=x<0;x===0?d=d.add(t($,s[E])):u=u.add(t(S,s[k]))}return{p:u,f:d}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function M9(e){return aae(e.Fp),$v(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sO(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pae(e){const r=M9(e);$v(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:vae,hexToBytes:gae}=tae,Hu={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Hu;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:vae(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Hu,t=typeof e=="string"?gae(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Hu._parseInt(t.subarray(2)),{d:o,l:a}=Hu._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},oa=BigInt(0),_s=BigInt(1);BigInt(2);const q4=BigInt(3);BigInt(4);function yae(e){const r=pae(e),{Fp:t}=r,n=r.toBytes||((b,m,x)=>{const E=m.toAffine();return hc(Uint8Array.from([4]),t.toBytes(E.x),t.toBytes(E.y))}),i=r.fromBytes||(b=>{const m=b.subarray(1),x=t.fromBytes(m.subarray(0,t.BYTES)),E=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x,y:E}});function s(b){const{a:m,b:x}=r,E=t.sqr(b),k=t.mul(E,b);return t.add(t.add(k,t.mul(b,m)),x)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(b){return typeof b=="bigint"&&oa<b&&b<r.n}function a(b){if(!o(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(b){const{allowedPrivateKeyLengths:m,nByteLength:x,wrapPrivateKey:E,n:k}=r;if(m&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=cd(b)),typeof b!="string"||!m.includes(b.length))throw new Error("Invalid key");b=b.padStart(x*2,"0")}let $;try{$=typeof b=="bigint"?b:Ci(jn("private key",b,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof b}`)}return E&&($=$n($,k)),a($),$}const u=new Map;function d(b){if(!(b instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(m,x,E){if(this.px=m,this.py=x,this.pz=E,m==null||!t.isValid(m))throw new Error("x required");if(x==null||!t.isValid(x))throw new Error("y required");if(E==null||!t.isValid(E))throw new Error("z required")}static fromAffine(m){const{x,y:E}=m||{};if(!m||!t.isValid(x)||!t.isValid(E))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const k=$=>t.eql($,t.ZERO);return k(x)&&k(E)?h.ZERO:new h(x,E,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const x=t.invertBatch(m.map(E=>E.pz));return m.map((E,k)=>E.toAffine(x[k])).map(h.fromAffine)}static fromHex(m){const x=h.fromAffine(i(jn("pointHex",m)));return x.assertValidity(),x}static fromPrivateKey(m){return h.BASE.multiply(l(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:m,y:x}=this.toAffine();if(!t.isValid(m)||!t.isValid(x))throw new Error("bad point: x or y not FE");const E=t.sqr(x),k=s(m);if(!t.eql(E,k))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){d(m);const{px:x,py:E,pz:k}=this,{px:$,py:S,pz:T}=m,O=t.eql(t.mul(x,T),t.mul($,k)),I=t.eql(t.mul(E,T),t.mul(S,k));return O&&I}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:x}=r,E=t.mul(x,q4),{px:k,py:$,pz:S}=this;let T=t.ZERO,O=t.ZERO,I=t.ZERO,P=t.mul(k,k),R=t.mul($,$),D=t.mul(S,S),F=t.mul(k,$);return F=t.add(F,F),I=t.mul(k,S),I=t.add(I,I),T=t.mul(m,I),O=t.mul(E,D),O=t.add(T,O),T=t.sub(R,O),O=t.add(R,O),O=t.mul(T,O),T=t.mul(F,T),I=t.mul(E,I),D=t.mul(m,D),F=t.sub(P,D),F=t.mul(m,F),F=t.add(F,I),I=t.add(P,P),P=t.add(I,P),P=t.add(P,D),P=t.mul(P,F),O=t.add(O,P),D=t.mul($,S),D=t.add(D,D),P=t.mul(D,F),T=t.sub(T,P),I=t.mul(D,R),I=t.add(I,I),I=t.add(I,I),new h(T,O,I)}add(m){d(m);const{px:x,py:E,pz:k}=this,{px:$,py:S,pz:T}=m;let O=t.ZERO,I=t.ZERO,P=t.ZERO;const R=r.a,D=t.mul(r.b,q4);let F=t.mul(x,$),K=t.mul(E,S),q=t.mul(k,T),W=t.add(x,E),M=t.add($,S);W=t.mul(W,M),M=t.add(F,K),W=t.sub(W,M),M=t.add(x,k);let G=t.add($,T);return M=t.mul(M,G),G=t.add(F,q),M=t.sub(M,G),G=t.add(E,k),O=t.add(S,T),G=t.mul(G,O),O=t.add(K,q),G=t.sub(G,O),P=t.mul(R,M),O=t.mul(D,q),P=t.add(O,P),O=t.sub(K,P),P=t.add(K,P),I=t.mul(O,P),K=t.add(F,F),K=t.add(K,F),q=t.mul(R,q),M=t.mul(D,M),K=t.add(K,q),q=t.sub(F,q),q=t.mul(R,q),M=t.add(M,q),F=t.mul(K,M),I=t.add(I,F),F=t.mul(G,M),O=t.mul(W,O),O=t.sub(O,F),F=t.mul(W,K),P=t.mul(G,P),P=t.add(P,F),new h(O,I,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,u,m,x=>{const E=t.invertBatch(x.map(k=>k.pz));return x.map((k,$)=>k.toAffine(E[$])).map(h.fromAffine)})}multiplyUnsafe(m){const x=h.ZERO;if(m===oa)return x;if(a(m),m===_s)return this;const{endo:E}=r;if(!E)return g.unsafeLadder(this,m);let{k1neg:k,k1:$,k2neg:S,k2:T}=E.splitScalar(m),O=x,I=x,P=this;for(;$>oa||T>oa;)$&_s&&(O=O.add(P)),T&_s&&(I=I.add(P)),P=P.double(),$>>=_s,T>>=_s;return k&&(O=O.negate()),S&&(I=I.negate()),I=new h(t.mul(I.px,E.beta),I.py,I.pz),O.add(I)}multiply(m){a(m);let x=m,E,k;const{endo:$}=r;if($){const{k1neg:S,k1:T,k2neg:O,k2:I}=$.splitScalar(x);let{p:P,f:R}=this.wNAF(T),{p:D,f:F}=this.wNAF(I);P=g.constTimeNegate(S,P),D=g.constTimeNegate(O,D),D=new h(t.mul(D.px,$.beta),D.py,D.pz),E=P.add(D),k=R.add(F)}else{const{p:S,f:T}=this.wNAF(x);E=S,k=T}return h.normalizeZ([E,k])[0]}multiplyAndAddUnsafe(m,x,E){const k=h.BASE,$=(T,O)=>O===oa||O===_s||!T.equals(k)?T.multiplyUnsafe(O):T.multiply(O),S=$(this,x).add($(m,E));return S.is0()?void 0:S}toAffine(m){const{px:x,py:E,pz:k}=this,$=this.is0();m==null&&(m=$?t.ONE:t.inv(k));const S=t.mul(x,m),T=t.mul(E,m),O=t.mul(k,m);if($)return{x:t.ZERO,y:t.ZERO};if(!t.eql(O,t.ONE))throw new Error("invZ was invalid");return{x:S,y:T}}isTorsionFree(){const{h:m,isTorsionFree:x}=r;if(m===_s)return!0;if(x)return x(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:x}=r;return m===_s?this:x?x(h,this):this.multiplyUnsafe(r.h)}toRawBytes(m=!0){return this.assertValidity(),n(h,this,m)}toHex(m=!0){return cd(this.toRawBytes(m))}}h.BASE=new h(r.Gx,r.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const v=r.nBitLength,g=fae(h,r.endo?Math.ceil(v/2):v);return{CURVE:r,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function mae(e){const r=M9(e);return $v(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function bae(e){const r=mae(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(M){return oa<M&&M<t.ORDER}function a(M){return $n(M,n)}function l(M){return BE(M,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:v}=yae({...r,toBytes(M,G,Q){const he=G.toAffine(),ue=t.toBytes(he.x),ke=hc;return Q?ke(Uint8Array.from([G.hasEvenY()?2:3]),ue):ke(Uint8Array.from([4]),ue,t.toBytes(he.y))},fromBytes(M){const G=M.length,Q=M[0],he=M.subarray(1);if(G===i&&(Q===2||Q===3)){const ue=Ci(he);if(!o(ue))throw new Error("Point is not on curve");const ke=h(ue);let Te=t.sqrt(ke);const Ce=(Te&_s)===_s;return(Q&1)===1!==Ce&&(Te=t.neg(Te)),{x:ue,y:Te}}else if(G===s&&Q===4){const ue=t.fromBytes(he.subarray(0,t.BYTES)),ke=t.fromBytes(he.subarray(t.BYTES,2*t.BYTES));return{x:ue,y:ke}}else throw new Error(`Point of length ${G} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=M=>cd(Dl(M,r.nByteLength));function b(M){const G=n>>_s;return M>G}function m(M){return b(M)?a(-M):M}const x=(M,G,Q)=>Ci(M.slice(G,Q));class E{constructor(G,Q,he){this.r=G,this.s=Q,this.recovery=he,this.assertValidity()}static fromCompact(G){const Q=r.nByteLength;return G=jn("compactSignature",G,Q*2),new E(x(G,0,Q),x(G,Q,2*Q))}static fromDER(G){const{r:Q,s:he}=Hu.toSig(jn("DER",G));return new E(Q,he)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new E(this.r,this.s,G)}recoverPublicKey(G){const{r:Q,s:he,recovery:ue}=this,ke=I(jn("msgHash",G));if(ue==null||![0,1,2,3].includes(ue))throw new Error("recovery id invalid");const Te=ue===2||ue===3?Q+r.n:Q;if(Te>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ce=ue&1?"03":"02",Ye=u.fromHex(Ce+g(Te)),ge=l(Te),ce=a(-ke*ge),ye=a(he*ge),fe=u.BASE.multiplyAndAddUnsafe(Ye,ce,ye);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return hd(this.toDERHex())}toDERHex(){return Hu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hd(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const k={isValidPrivateKey(M){try{return d(M),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const M=r.randomBytes(t.BYTES+8),G=hae(M,n);return Dl(G,r.nByteLength)},precompute(M=8,G=u.BASE){return G._setWindowSize(M),G.multiply(BigInt(3)),G}};function $(M,G=!0){return u.fromPrivateKey(M).toRawBytes(G)}function S(M){const G=M instanceof Uint8Array,Q=typeof M=="string",he=(G||Q)&&M.length;return G?he===i||he===s:Q?he===2*i||he===2*s:M instanceof u}function T(M,G,Q=!0){if(S(M))throw new Error("first arg must be private key");if(!S(G))throw new Error("second arg must be public key");return u.fromHex(G).multiply(d(M)).toRawBytes(Q)}const O=r.bits2int||function(M){const G=Ci(M),Q=M.length*8-r.nBitLength;return Q>0?G>>BigInt(Q):G},I=r.bits2int_modN||function(M){return a(O(M))},P=iO(r.nBitLength);function R(M){if(typeof M!="bigint")throw new Error("bigint expected");if(!(oa<=M&&M<P))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Dl(M,r.nByteLength)}function D(M,G,Q=F){if(["recovered","canonical"].some(w=>w in Q))throw new Error("sign() legacy options not supported");const{hash:he,randomBytes:ue}=r;let{lowS:ke,prehash:Te,extraEntropy:Ce}=Q;ke==null&&(ke=!0),M=jn("msgHash",M),Te&&(M=jn("prehashed msgHash",he(M)));const Ye=I(M),ge=d(G),ce=[R(ge),R(Ye)];if(Ce!=null){const w=Ce===!0?ue(t.BYTES):Ce;ce.push(jn("extraEntropy",w,t.BYTES))}const ye=hc(...ce),fe=Ye;function y(w){const A=O(w);if(!v(A))return;const N=l(A),B=u.BASE.multiply(A).toAffine(),j=a(B.x);if(j===oa)return;const X=a(N*a(fe+j*ge));if(X===oa)return;let re=(B.x===j?0:2)|Number(B.y&_s),Ee=X;return ke&&b(X)&&(Ee=m(X),re^=1),new E(j,Ee,re)}return{seed:ye,k2sig:y}}const F={lowS:r.lowS,prehash:!1},K={lowS:r.lowS,prehash:!1};function q(M,G,Q=F){const{seed:he,k2sig:ue}=D(M,G,Q),ke=r;return B9(ke.hash.outputLen,ke.nByteLength,ke.hmac)(he,ue)}u.BASE._setWindowSize(8);function W(M,G,Q,he=K){var B;const ue=M;if(G=jn("msgHash",G),Q=jn("publicKey",Q),"strict"in he)throw new Error("options.strict was renamed to lowS");const{lowS:ke,prehash:Te}=he;let Ce,Ye;try{if(typeof ue=="string"||ue instanceof Uint8Array)try{Ce=E.fromDER(ue)}catch(j){if(!(j instanceof Hu.Err))throw j;Ce=E.fromCompact(ue)}else if(typeof ue=="object"&&typeof ue.r=="bigint"&&typeof ue.s=="bigint"){const{r:j,s:X}=ue;Ce=new E(j,X)}else throw new Error("PARSE");Ye=u.fromHex(Q)}catch(j){if(j.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ke&&Ce.hasHighS())return!1;Te&&(G=r.hash(G));const{r:ge,s:ce}=Ce,ye=I(G),fe=l(ce),y=a(ye*fe),w=a(ge*fe),A=(B=u.BASE.multiplyAndAddUnsafe(Ye,y,w))==null?void 0:B.toAffine();return A?a(A.x)===ge:!1}return{CURVE:r,getPublicKey:$,getSharedSecret:T,sign:q,verify:W,ProjectivePoint:u,Signature:E,utils:k}}let L9=class extends C9{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,ju.hash(r);const n=eO(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return ju.exists(this),this.iHash.update(r),this}digestInto(r){ju.exists(this),ju.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const N0=(e,r,t)=>new L9(e,r).update(t).digest();N0.create=(e,r)=>new L9(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wae(e){return{hash:e,hmac:(r,...t)=>N0(e,r,zu(...t)),randomBytes:o1}}function _ae(e,r){const t=n=>bae({...e,...wae(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),R0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),F9=BigInt(1),D0=BigInt(2),G4=(e,r)=>(e+r/D0)/r;function j9(e){const r=u1,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,d=u*u*e%r,h=gs(d,t,r)*d%r,v=gs(h,t,r)*d%r,g=gs(v,D0,r)*u%r,b=gs(g,i,r)*g%r,m=gs(b,s,r)*b%r,x=gs(m,a,r)*m%r,E=gs(x,l,r)*x%r,k=gs(E,a,r)*m%r,$=gs(k,t,r)*d%r,S=gs($,o,r)*b%r,T=gs(S,n,r)*u%r,O=gs(T,D0,r);if(!ME.eql(ME.sqr(O),e))throw new Error("Cannot find square root");return O}const ME=cae(u1,void 0,void 0,{sqrt:j9}),Yn=_ae({a:BigInt(0),b:BigInt(7),Fp:ME,n:R0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=R0,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-F9*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=G4(s*e,r),l=G4(-n*e,r);let u=$n(e-a*t-l*i,r),d=$n(-a*n-l*s,r);const h=u>o,v=d>o;if(h&&(u=r-u),v&&(d=r-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:v,k2:d}}}},hi),c1=BigInt(0),z9=e=>typeof e=="bigint"&&c1<e&&e<u1,$ae=e=>typeof e=="bigint"&&c1<e&&e<R0,Y4={};function B0(e,...r){let t=Y4[e];if(t===void 0){const n=hi(Uint8Array.from(e,i=>i.charCodeAt(0)));t=hc(n,n),Y4[e]=t}return hi(hc(t,...r))}const oO=e=>e.toRawBytes(!0).slice(1),LE=e=>Dl(e,32),_$=e=>$n(e,u1),Rp=e=>$n(e,R0),aO=Yn.ProjectivePoint,xae=(e,r,t)=>aO.BASE.multiplyAndAddUnsafe(e,r,t);function FE(e){let r=Yn.utils.normPrivateKeyToScalar(e),t=aO.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Rp(-r),bytes:oO(t)}}function H9(e){if(!z9(e))throw new Error("bad x: need 0 < x < p");const r=_$(e*e),t=_$(r*e+BigInt(7));let n=j9(t);n%D0!==c1&&(n=_$(-n));const i=new aO(e,n,F9);return i.assertValidity(),i}function U9(...e){return Rp(Ci(B0("BIP0340/challenge",...e)))}function Eae(e){return FE(e).bytes}function Sae(e,r,t=o1(32)){const n=jn("message",e),{bytes:i,scalar:s}=FE(r),o=jn("auxRand",t,32),a=LE(s^Ci(B0("BIP0340/aux",o))),l=B0("BIP0340/nonce",a,i,n),u=Rp(Ci(l));if(u===c1)throw new Error("sign failed: k is zero");const{bytes:d,scalar:h}=FE(u),v=U9(d,i,n),g=new Uint8Array(64);if(g.set(d,0),g.set(LE(Rp(h+v*s)),32),!K9(g,n,i))throw new Error("sign: Invalid signature produced");return g}function K9(e,r,t){const n=jn("signature",e,64),i=jn("message",r),s=jn("publicKey",t,32);try{const o=H9(Ci(s)),a=Ci(n.subarray(0,32));if(!z9(a))return!1;const l=Ci(n.subarray(32,64));if(!$ae(l))return!1;const u=U9(LE(a),oO(o),i),d=xae(o,l,Rp(-u));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}const lo=(()=>({getPublicKey:Eae,sign:Sae,verify:K9,utils:{randomPrivateKey:Yn.utils.randomPrivateKey,lift_x:H9,pointToBytes:oO,numberToBytesBE:Dl,bytesToNumberBE:Ci,taggedHash:B0,mod:$n}}))();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ru(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function uo(...e){const r=(i,s)=>o=>i(s(o)),t=Array.from(e).reverse().reduce((i,s)=>i?r(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?r(i,s.decode):s.decode,void 0);return{encode:t,decode:n}}function Lo(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return r.map(t=>{if(ru(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("alphabet.decode input should be array of strings");return r.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})}}}function Fo(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of r)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return r.join(e)},decode:r=>{if(typeof r!="string")throw new Error("join.decode input should be string");return r.split(e)}}}function xv(e,r="="){if(ru(e),typeof r!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function W9(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:r=>r,decode:r=>e(r)}}function Z4(e,r,t){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(ru(o),o<0||o>=r)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let l=n;l<s.length;l++){const u=s[l],d=r*o+u;if(!Number.isSafeInteger(d)||r*o/r!==o||d-u!==r*o)throw new Error("convertRadix: carry overflow");if(o=d%t,s[l]=Math.floor(d/t),!Number.isSafeInteger(s[l])||s[l]*t+o!==d)throw new Error("convertRadix: carry overflow");if(a)s[l]?a=!1:n=l;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const V9=(e,r)=>r?V9(r,e%r):e,M0=(e,r)=>e+(r-V9(e,r));function jE(e,r,t,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(M0(r,t)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${t} carryBits=${M0(r,t)}`);let i=0,s=0;const o=2**t-1,a=[];for(const l of e){if(ru(l),l>=2**r)throw new Error(`convertRadix2: invalid data word=${l} from=${r}`);if(i=i<<r|l,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=t;s-=t)a.push((i>>s-t&o)>>>0);i&=2**s-1}if(i=i<<t-s&o,!n&&s>=r)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function q9(e){return ru(e),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Z4(Array.from(r),2**8,e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Z4(r,e,2**8))}}}function Ra(e,r=!1){if(ru(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(M0(8,e)>32||M0(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return jE(Array.from(t),8,e,!r)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(jE(t,e,8,r))}}}function X4(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...r){try{return e.apply(null,r)}catch{}}}function G9(e,r){if(ru(e),typeof r!="function")throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=r(t).slice(0,e),i=new Uint8Array(t.length+e);return i.set(t),i.set(n,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-e),i=r(n).slice(0,e),s=t.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}const Xf={alphabet:Lo,chain:uo,checksum:G9,radix:q9,radix2:Ra,join:Fo,padding:xv},Y9=uo(Ra(4),Lo("0123456789ABCDEF"),Fo("")),Z9=uo(Ra(5),Lo("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),xv(5),Fo("")),kae=uo(Ra(5),Lo("0123456789ABCDEFGHIJKLMNOPQRSTUV"),xv(5),Fo("")),Tae=uo(Ra(5),Lo("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Fo(""),W9(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Cs=uo(Ra(6),Lo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),xv(6),Fo("")),X9=uo(Ra(6),Lo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),xv(6),Fo("")),lO=e=>uo(q9(58),Lo(e),Fo("")),Dp=lO("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Iae=lO("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Oae=lO("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),J4=[0,2,3,5,6,7,9,10,11],J9={encode(e){let r="";for(let t=0;t<e.length;t+=8){const n=e.subarray(t,t+8);r+=Dp.encode(n).padStart(J4[n.length],"1")}return r},decode(e){let r=[];for(let t=0;t<e.length;t+=11){const n=e.slice(t,t+11),i=J4.indexOf(n.length),s=Dp.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},uO=e=>uo(G9(4,r=>e(e(r))),Dp),zE=uo(Lo("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Fo("")),Q4=[996825010,642813549,513874426,1027748829,705979059];function Lf(e){const r=e>>25;let t=(e&33554431)<<5;for(let n=0;n<Q4.length;n++)(r>>n&1)===1&&(t^=Q4[n]);return t}function eN(e,r,t=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Lf(i)^o>>5}i=Lf(i);for(let s=0;s<n;s++)i=Lf(i)^e.charCodeAt(s)&31;for(let s of r)i=Lf(i)^s;for(let s=0;s<6;s++)i=Lf(i);return i^=t,zE.encode(jE([i%2**30],30,5,!1))}function Q9(e){const r=e==="bech32"?1:734539939,t=Ra(5),n=t.decode,i=t.encode,s=X4(n);function o(d,h,v=90){if(typeof d!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof d}`);if(!Array.isArray(h)||h.length&&typeof h[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof h}`);const g=d.length+7+h.length;if(v!==!1&&g>v)throw new TypeError(`Length ${g} exceeds limit ${v}`);return d=d.toLowerCase(),`${d}1${zE.encode(h)}${eN(d,h,r)}`}function a(d,h=90){if(typeof d!="string")throw new Error(`bech32.decode input should be string, not ${typeof d}`);if(d.length<8||h!==!1&&d.length>h)throw new TypeError(`Wrong string length: ${d.length} (${d}). Expected (8..${h})`);const v=d.toLowerCase();if(d!==v&&d!==d.toUpperCase())throw new Error("String must be lowercase or uppercase");d=v;const g=d.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const b=d.slice(0,g),m=d.slice(g+1);if(m.length<6)throw new Error("Data must be at least 6 characters long");const x=zE.decode(m).slice(0,-6),E=eN(b,x,r);if(!m.endsWith(E))throw new Error(`Invalid checksum in ${d}: expected "${E}"`);return{prefix:b,words:x}}const l=X4(a);function u(d){const{prefix:h,words:v}=a(d,!1);return{prefix:h,words:v,bytes:n(v)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const qr=Q9("bech32"),Aae=Q9("bech32m"),eF={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},tF=uo(Ra(4),Lo("0123456789abcdef"),Fo(""),W9(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Bp={utf8:eF,hex:tF,base16:Y9,base32:Z9,base64:Cs,base64url:X9,base58:Dp,base58xmr:J9},rF=`Invalid encoding type. Available types: ${Object.keys(Bp).join(", ")}`,nF=(e,r)=>{if(typeof e!="string"||!Bp.hasOwnProperty(e))throw new TypeError(rF);if(!(r instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Bp[e].encode(r)},Cae=nF,iF=(e,r)=>{if(!Bp.hasOwnProperty(e))throw new TypeError(rF);if(typeof r!="string")throw new TypeError("stringToBytes() expects string");return Bp[e].decode(r)},Pae=iF,Nae=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:ru,base16:Y9,base32:Z9,base32crockford:Tae,base32hex:kae,base58:Dp,base58check:uO,base58flickr:Iae,base58xmr:J9,base58xrp:Oae,base64:Cs,base64url:X9,bech32:qr,bech32m:Aae,bytes:Pae,bytesToString:nF,hex:tF,str:Cae,stringToBytes:iF,utf8:eF,utils:Xf},Symbol.toStringTag,{value:"Module"})),sF=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);function HE(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Rae(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function oF(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Dae(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");HE(e.outputLen),HE(e.blockLen)}function Bae(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Mae(e,r){oF(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Xi={number:HE,bool:Rae,bytes:oF,hash:Dae,exists:Bae,output:Mae},$$=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xm=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),wo=(e,r)=>e<<32-r|e>>>r,Lae=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Lae)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Fae(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Mp(e){if(typeof e=="string"&&(e=Fae(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let aF=class{clone(){return this._cloneInto()}};const jae=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function zae(e,r){if(r!==void 0&&(typeof r!="object"||!jae(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function Ld(e){const r=n=>e().update(Mp(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Hae(e=32){if($$&&typeof $$.getRandomValues=="function")return $$.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let lF=class extends aF{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Xi.hash(r);const n=Mp(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Xi.exists(this),this.iHash.update(r),this}digestInto(r){Xi.exists(this),Xi.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const uF=(e,r,t)=>new lF(e,r).update(t).digest();uF.create=(e,r)=>new lF(e,r);function Uae(e,r,t,n){Xi.hash(e);const i=zae({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Xi.number(s),Xi.number(o),Xi.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Mp(r),u=Mp(t),d=new Uint8Array(o),h=uF.create(e,l),v=h._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:h,PRFSalt:v}}function Kae(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function Wae(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=Uae(e,r,t,n);let u;const d=new Uint8Array(4),h=Xm(d),v=new Uint8Array(a.outputLen);for(let g=1,b=0;b<s;g++,b+=a.outputLen){const m=o.subarray(b,b+a.outputLen);h.setInt32(0,g,!1),(u=l._cloneInto(u)).update(d).digestInto(v),m.set(v.subarray(0,m.length));for(let x=1;x<i;x++){a._cloneInto(u).update(v).digestInto(v);for(let E=0;E<m.length;E++)m[E]^=v[E]}}return Kae(a,l,o,u,v)}function Vae(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let cF=class extends aF{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=Xm(this.buffer)}update(r){Xi.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Mp(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Xm(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Xi.exists(this),Xi.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;Vae(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Xm(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const qae=(e,r,t)=>e&r^~e&t,Gae=(e,r,t)=>e&r^e&t^r&t,Yae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nl=new Uint32Array(64);let hF=class extends cF{constructor(){super(64,32,8,!1),this.A=rl[0]|0,this.B=rl[1]|0,this.C=rl[2]|0,this.D=rl[3]|0,this.E=rl[4]|0,this.F=rl[5]|0,this.G=rl[6]|0,this.H=rl[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let h=0;h<16;h++,t+=4)nl[h]=r.getUint32(t,!1);for(let h=16;h<64;h++){const v=nl[h-15],g=nl[h-2],b=wo(v,7)^wo(v,18)^v>>>3,m=wo(g,17)^wo(g,19)^g>>>10;nl[h]=m+nl[h-7]+b+nl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const v=wo(a,6)^wo(a,11)^wo(a,25),g=d+v+qae(a,l,u)+Yae[h]+nl[h]|0,m=(wo(n,2)^wo(n,13)^wo(n,22))+Gae(n,i,s)|0;d=u,u=l,l=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,l,u,d)}roundClean(){nl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Zae=class extends hF{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Xae=Ld(()=>new hF);Ld(()=>new Zae);const Ny=BigInt(2**32-1),UE=BigInt(32);function dF(e,r=!1){return r?{h:Number(e&Ny),l:Number(e>>UE&Ny)}:{h:Number(e>>UE&Ny)|0,l:Number(e&Ny)|0}}function Jae(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=dF(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Qae=(e,r)=>BigInt(e>>>0)<<UE|BigInt(r>>>0),ele=(e,r,t)=>e>>>t,tle=(e,r,t)=>e<<32-t|r>>>t,rle=(e,r,t)=>e>>>t|r<<32-t,nle=(e,r,t)=>e<<32-t|r>>>t,ile=(e,r,t)=>e<<64-t|r>>>t-32,sle=(e,r,t)=>e>>>t-32|r<<64-t,ole=(e,r)=>r,ale=(e,r)=>e,lle=(e,r,t)=>e<<t|r>>>32-t,ule=(e,r,t)=>r<<t|e>>>32-t,cle=(e,r,t)=>r<<t-32|e>>>64-t,hle=(e,r,t)=>e<<t-32|r>>>64-t;function dle(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const fle=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),ple=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,vle=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),gle=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,yle=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),mle=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,Ot={fromBig:dF,split:Jae,toBig:Qae,shrSH:ele,shrSL:tle,rotrSH:rle,rotrSL:nle,rotrBH:ile,rotrBL:sle,rotr32H:ole,rotr32L:ale,rotlSH:lle,rotlSL:ule,rotlBH:cle,rotlBL:hle,add:dle,add3L:fle,add3H:ple,add4L:vle,add4H:gle,add5H:mle,add5L:yle},[ble,wle]=Ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),il=new Uint32Array(80),sl=new Uint32Array(80);let h1=class extends cF{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:d,Fh:h,Fl:v,Gh:g,Gl:b,Hh:m,Hl:x}=this;return[r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x]}set(r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=v|0,this.Gh=g|0,this.Gl=b|0,this.Hh=m|0,this.Hl=x|0}process(r,t){for(let $=0;$<16;$++,t+=4)il[$]=r.getUint32(t),sl[$]=r.getUint32(t+=4);for(let $=16;$<80;$++){const S=il[$-15]|0,T=sl[$-15]|0,O=Ot.rotrSH(S,T,1)^Ot.rotrSH(S,T,8)^Ot.shrSH(S,T,7),I=Ot.rotrSL(S,T,1)^Ot.rotrSL(S,T,8)^Ot.shrSL(S,T,7),P=il[$-2]|0,R=sl[$-2]|0,D=Ot.rotrSH(P,R,19)^Ot.rotrBH(P,R,61)^Ot.shrSH(P,R,6),F=Ot.rotrSL(P,R,19)^Ot.rotrBL(P,R,61)^Ot.shrSL(P,R,6),K=Ot.add4L(I,F,sl[$-7],sl[$-16]),q=Ot.add4H(K,O,D,il[$-7],il[$-16]);il[$]=q|0,sl[$]=K|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:d,Eh:h,El:v,Fh:g,Fl:b,Gh:m,Gl:x,Hh:E,Hl:k}=this;for(let $=0;$<80;$++){const S=Ot.rotrSH(h,v,14)^Ot.rotrSH(h,v,18)^Ot.rotrBH(h,v,41),T=Ot.rotrSL(h,v,14)^Ot.rotrSL(h,v,18)^Ot.rotrBL(h,v,41),O=h&g^~h&m,I=v&b^~v&x,P=Ot.add5L(k,T,I,wle[$],sl[$]),R=Ot.add5H(P,E,S,O,ble[$],il[$]),D=P|0,F=Ot.rotrSH(n,i,28)^Ot.rotrBH(n,i,34)^Ot.rotrBH(n,i,39),K=Ot.rotrSL(n,i,28)^Ot.rotrBL(n,i,34)^Ot.rotrBL(n,i,39),q=n&s^n&a^s&a,W=i&o^i&l^o&l;E=m|0,k=x|0,m=g|0,x=b|0,g=h|0,b=v|0,{h,l:v}=Ot.add(u|0,d|0,R|0,D|0),u=a|0,d=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const M=Ot.add3L(D,K,W);n=Ot.add3H(M,R,F,q),i=M|0}({h:n,l:i}=Ot.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ot.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ot.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:d}=Ot.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:v}=Ot.add(this.Eh|0,this.El|0,h|0,v|0),{h:g,l:b}=Ot.add(this.Fh|0,this.Fl|0,g|0,b|0),{h:m,l:x}=Ot.add(this.Gh|0,this.Gl|0,m|0,x|0),{h:E,l:k}=Ot.add(this.Hh|0,this.Hl|0,E|0,k|0),this.set(n,i,s,o,a,l,u,d,h,v,g,b,m,x,E,k)}roundClean(){il.fill(0),sl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},_le=class extends h1{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},$le=class extends h1{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},xle=class extends h1{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Ele=Ld(()=>new h1);Ld(()=>new _le);Ld(()=>new $le);Ld(()=>new xle);const Sle=e=>e[0]==="あいこくしん";function fF(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function pF(e){const r=fF(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function vF(e){Xi.bytes(e,16,20,24,28,32)}function kle(e,r=128){if(Xi.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return Ole(Hae(r/8),e)}const Tle=e=>{const r=8-e.length/4;return new Uint8Array([Xae(e)[0]>>r<<r])};function gF(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),Xf.chain(Xf.checksum(1,Tle),Xf.radix2(11,!0),Xf.alphabet(e))}function Ile(e,r){const{words:t}=pF(e),n=gF(r).decode(t);return vF(n),n}function Ole(e,r){return vF(e),gF(r).encode(e).join(Sle(r)?"　":" ")}function Ale(e,r){try{Ile(e,r)}catch{return!1}return!0}const Cle=e=>fF(`mnemonic${e}`);function yF(e,r=""){return Wae(Ele,pF(e).nfkd,Cle(r),{c:2048,dkLen:64})}const Ple=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),mF=Uint8Array.from({length:16},(e,r)=>r),Nle=mF.map(e=>(9*e+5)%16);let cO=[mF],hO=[Nle];for(let e=0;e<4;e++)for(let r of[cO,hO])r.push(r[e].map(t=>Ple[t]));const bF=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Rle=cO.map((e,r)=>e.map(t=>bF[r][t])),Dle=hO.map((e,r)=>e.map(t=>bF[r][t])),Ble=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Mle=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ry=(e,r)=>e<<r|e>>>32-r;function tN(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const Dy=new Uint32Array(16);let Lle=class extends tO{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let g=0;g<16;g++,t+=4)Dy[g]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,d=u,h=this.h4|0,v=h;for(let g=0;g<5;g++){const b=4-g,m=Ble[g],x=Mle[g],E=cO[g],k=hO[g],$=Rle[g],S=Dle[g];for(let T=0;T<16;T++){const O=Ry(n+tN(g,s,a,u)+Dy[E[T]]+m,$[T])+h|0;n=h,h=u,u=Ry(a,10)|0,a=s,s=O}for(let T=0;T<16;T++){const O=Ry(i+tN(b,o,l,d)+Dy[k[T]]+x,S[T])+v|0;i=v,v=d,d=Ry(l,10)|0,l=o,o=O}}this.set(this.h1+a+d|0,this.h2+u+v|0,this.h3+h+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){Dy.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const Fle=Tc(()=>new Lle),By=BigInt(2**32-1),KE=BigInt(32);function wF(e,r=!1){return r?{h:Number(e&By),l:Number(e>>KE&By)}:{h:Number(e>>KE&By)|0,l:Number(e&By)|0}}function jle(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=wF(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const zle=(e,r)=>BigInt(e>>>0)<<KE|BigInt(r>>>0),Hle=(e,r,t)=>e>>>t,Ule=(e,r,t)=>e<<32-t|r>>>t,Kle=(e,r,t)=>e>>>t|r<<32-t,Wle=(e,r,t)=>e<<32-t|r>>>t,Vle=(e,r,t)=>e<<64-t|r>>>t-32,qle=(e,r,t)=>e>>>t-32|r<<64-t,Gle=(e,r)=>r,Yle=(e,r)=>e,Zle=(e,r,t)=>e<<t|r>>>32-t,Xle=(e,r,t)=>r<<t|e>>>32-t,Jle=(e,r,t)=>r<<t-32|e>>>64-t,Qle=(e,r,t)=>e<<t-32|r>>>64-t;function eue(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const tue=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),rue=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,nue=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),iue=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,sue=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),oue=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,At={fromBig:wF,split:jle,toBig:zle,shrSH:Hle,shrSL:Ule,rotrSH:Kle,rotrSL:Wle,rotrBH:Vle,rotrBL:qle,rotr32H:Gle,rotr32L:Yle,rotlSH:Zle,rotlSL:Xle,rotlBH:Jle,rotlBL:Qle,add:eue,add3L:tue,add3H:rue,add4L:nue,add4H:iue,add5H:oue,add5L:sue},[aue,lue]=At.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ol=new Uint32Array(80),al=new Uint32Array(80);let d1=class extends tO{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:d,Fh:h,Fl:v,Gh:g,Gl:b,Hh:m,Hl:x}=this;return[r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x]}set(r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=v|0,this.Gh=g|0,this.Gl=b|0,this.Hh=m|0,this.Hl=x|0}process(r,t){for(let $=0;$<16;$++,t+=4)ol[$]=r.getUint32(t),al[$]=r.getUint32(t+=4);for(let $=16;$<80;$++){const S=ol[$-15]|0,T=al[$-15]|0,O=At.rotrSH(S,T,1)^At.rotrSH(S,T,8)^At.shrSH(S,T,7),I=At.rotrSL(S,T,1)^At.rotrSL(S,T,8)^At.shrSL(S,T,7),P=ol[$-2]|0,R=al[$-2]|0,D=At.rotrSH(P,R,19)^At.rotrBH(P,R,61)^At.shrSH(P,R,6),F=At.rotrSL(P,R,19)^At.rotrBL(P,R,61)^At.shrSL(P,R,6),K=At.add4L(I,F,al[$-7],al[$-16]),q=At.add4H(K,O,D,ol[$-7],ol[$-16]);ol[$]=q|0,al[$]=K|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:d,Eh:h,El:v,Fh:g,Fl:b,Gh:m,Gl:x,Hh:E,Hl:k}=this;for(let $=0;$<80;$++){const S=At.rotrSH(h,v,14)^At.rotrSH(h,v,18)^At.rotrBH(h,v,41),T=At.rotrSL(h,v,14)^At.rotrSL(h,v,18)^At.rotrBL(h,v,41),O=h&g^~h&m,I=v&b^~v&x,P=At.add5L(k,T,I,lue[$],al[$]),R=At.add5H(P,E,S,O,aue[$],ol[$]),D=P|0,F=At.rotrSH(n,i,28)^At.rotrBH(n,i,34)^At.rotrBH(n,i,39),K=At.rotrSL(n,i,28)^At.rotrBL(n,i,34)^At.rotrBL(n,i,39),q=n&s^n&a^s&a,W=i&o^i&l^o&l;E=m|0,k=x|0,m=g|0,x=b|0,g=h|0,b=v|0,{h,l:v}=At.add(u|0,d|0,R|0,D|0),u=a|0,d=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const M=At.add3L(D,K,W);n=At.add3H(M,R,F,q),i=M|0}({h:n,l:i}=At.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=At.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=At.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:d}=At.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:v}=At.add(this.Eh|0,this.El|0,h|0,v|0),{h:g,l:b}=At.add(this.Fh|0,this.Fl|0,g|0,b|0),{h:m,l:x}=At.add(this.Gh|0,this.Gl|0,m|0,x|0),{h:E,l:k}=At.add(this.Hh|0,this.Hl|0,E|0,k|0),this.set(n,i,s,o,a,l,u,d,h,v,g,b,m,x,E,k)}roundClean(){ol.fill(0),al.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},uue=class extends d1{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},cue=class extends d1{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},hue=class extends d1{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const rN=Tc(()=>new d1);Tc(()=>new uue);Tc(()=>new cue);Tc(()=>new hue);const My=Yn.ProjectivePoint,x$=uO(hi);function nN(e){return BigInt(`0x${ur(e)}`)}function due(e){return Qi(e.toString(16).padStart(64,"0"))}const fue=A9("Bitcoin seed"),E$={private:76066276,public:76067358},S$=2147483648,pue=e=>Fle(hi(e)),vue=e=>Vh(e).getUint32(0,!1),Ly=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return Vh(r).setUint32(0,e,!1),r};let _F=class Eh{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return vue(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return x$.encode(this.serialize(this.versions.private,zu(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return x$.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=E$){if(Au(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=N0(rN,fue,r);return new Eh({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=E$){const n=x$.decode(r),i=Vh(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Eh({...o,privateKey:a.slice(1)}):new Eh({...o,publicKey:a})}static fromJSON(r){return Eh.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||E$,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!Yn.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:nN(r.privateKey),this.privKeyBytes=due(this.privKey),this.pubKey=Yn.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=My.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=pue(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=S$)throw new Error("Invalid index");s[2]==="'"&&(o+=S$),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Ly(r);if(r>=S$){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=zu(new Uint8Array([0]),a,t)}else t=zu(this.pubKey,t);const n=N0(rN,this.chainCode,t),i=nN(n.slice(0,32)),s=n.slice(32);if(!Yn.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=$n(this.privKey+i,Yn.CURVE.n);if(!Yn.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=My.fromHex(this.pubKey).add(My.fromPrivateKey(i));if(a.equals(My.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Eh(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Au(r,32),Yn.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Au(r,32),Au(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Yn.Signature.fromCompact(t)}catch{return!1}return Yn.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Au(t,33),zu(Ly(r),new Uint8Array([this.depth]),Ly(this.parentFingerprint),Ly(this.index),this.chainCode,t)}};var gue=Object.defineProperty,On=(e,r)=>{for(var t in r)gue(e,t,{get:r[t],enumerable:!0})};function dO(){return ur(lo.utils.randomPrivateKey())}function dc(e){return ur(lo.getPublicKey(e))}var yue={};On(yue,{MessageNode:()=>$F,MessageQueue:()=>_ue,insertEventIntoAscendingList:()=>wue,insertEventIntoDescendingList:()=>bue,normalizeURL:()=>mue,utf8Decoder:()=>aa,utf8Encoder:()=>ro});var aa=new TextDecoder("utf-8"),ro=new TextEncoder;function mue(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function bue(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function wue(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var $F=class{constructor(e){Z(this,"_value");Z(this,"_next");this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},_ue=class{constructor(){Z(this,"_first");Z(this,"_last");Z(this,"_size");this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const r=new $F(e);return this._size===0||!this._last?(this._first=r,this._last=r):(this._last.next=r,this._last=r),this._size++,!0}dequeue(){if(this._size===0||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function $ue(e=255){return{kind:e,content:"",tags:[],created_at:0}}function Ic(e,r){let t=e;return t.pubkey=dc(r),t.id=Ul(t),t.sig=f1(t,r),t}function xue(e){if(!Lp(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Ul(e){let r=hi(ro.encode(xue(e)));return ur(r)}var Eue=e=>e instanceof Object;function Lp(e){if(!Eue(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function dd(e){try{return lo.verify(e.sig,Ul(e),e.pubkey)}catch{return!1}}function xF(e,r){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),f1(e,r)}function f1(e,r){return ur(lo.sign(Ul(e),r))}function fO(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>e.until)}var Sue={};On(Sue,{getHex64:()=>pO,getInt:()=>EF,getSubscriptionId:()=>kue,matchEventId:()=>Tue,matchEventKind:()=>Oue,matchEventPubkey:()=>Iue});function pO(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function EF(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function kue(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Tue(e,r){return r===pO(e,"id")}function Iue(e,r){return r===pO(e,"pubkey")}function Oue(e,r){return r===EF(e,"kind")}var ka={};On(ka,{BECH32_REGEX:()=>kF,decode:()=>p1,naddrEncode:()=>Due,neventEncode:()=>Rue,noteEncode:()=>Pue,nprofileEncode:()=>Nue,npubEncode:()=>Cue,nrelayEncode:()=>Bue,nsecEncode:()=>Aue});var SF=5e3,kF=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function p1(e){var i,s,o,a,l,u,d;let{prefix:r,words:t}=qr.decode(e,SF),n=new Uint8Array(qr.fromWords(t));switch(r){case"nprofile":{let h=Fy(n);if(!((i=h[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ur(h[0][0]),relays:h[1]?h[1].map(v=>aa.decode(v)):[]}}}case"nevent":{let h=Fy(n);if(!((s=h[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(h[2]&&h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:ur(h[0][0]),relays:h[1]?h[1].map(v=>aa.decode(v)):[],author:(o=h[2])!=null&&o[0]?ur(h[2][0]):void 0}}}case"naddr":{let h=Fy(n);if(!((a=h[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=h[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=h[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(h[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:aa.decode(h[0][0]),pubkey:ur(h[2][0]),kind:parseInt(ur(h[3][0]),16),relays:h[1]?h[1].map(v=>aa.decode(v)):[]}}}case"nrelay":{let h=Fy(n);if(!((d=h[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:aa.decode(h[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:ur(n)};default:throw new Error(`unknown prefix ${r}`)}}function Fy(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1];if(!i)throw new Error(`malformed TLV ${n}`);let s=t.slice(2,2+i);if(t=t.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${n}`);r[n]=r[n]||[],r[n].push(s)}return r}function Aue(e){return vO("nsec",e)}function Cue(e){return vO("npub",e)}function Pue(e){return vO("note",e)}function Ev(e,r){let t=qr.toWords(r);return qr.encode(e,t,SF)}function vO(e,r){let t=Qi(r);return Ev(e,t)}function Nue(e){let r=v1({0:[Qi(e.pubkey)],1:(e.relays||[]).map(t=>ro.encode(t))});return Ev("nprofile",r)}function Rue(e){let r=v1({0:[Qi(e.id)],1:(e.relays||[]).map(t=>ro.encode(t)),2:e.author?[Qi(e.author)]:[]});return Ev("nevent",r)}function Due(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=v1({0:[ro.encode(e.identifier)],1:(e.relays||[]).map(n=>ro.encode(n)),2:[Qi(e.pubkey)],3:[new Uint8Array(r)]});return Ev("naddr",t)}function Bue(e){let r=v1({0:[ro.encode(e)]});return Ev("nrelay",r)}function v1(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),zu(...r)}var fc={};On(fc,{decrypt:()=>Lue,encrypt:()=>Mue});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function Mue(e,r,t){const n=Yn.getSharedSecret(e,"02"+r),i=TF(n);let s=Uint8Array.from(o1(16)),o=ro.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Cs.encode(new Uint8Array(l)),d=Cs.encode(new Uint8Array(s.buffer));return`${u}?iv=${d}`}async function Lue(e,r,t){let[n,i]=t.split("?iv="),s=Yn.getSharedSecret(e,"02"+r),o=TF(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Cs.decode(n),u=Cs.decode(i),d=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return aa.decode(d)}function TF(e){return e.slice(1,33)}var Fue={};On(Fue,{NIP05_REGEX:()=>IF,queryProfile:()=>Hue,searchDomain:()=>zue,useFetchImplementation:()=>jue});var IF=/^(?:([\w.+-]+)@)?([\w.-]+)$/,g1;try{g1=fetch}catch{}function jue(e){g1=e}async function zue(e,r=""){try{return(await(await g1(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function Hue(e){const r=e.match(IF);if(!r)return null;const[t,n="_",i]=r;try{const s=await g1(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=Uue(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function Uue(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var Kue={};On(Kue,{generateSeedWords:()=>Vue,privateKeyFromSeedWords:()=>Wue,validateWords:()=>que});function Wue(e,r){let n=_F.fromMasterSeed(yF(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return ur(n)}function Vue(){return kle(sF)}function que(e){return Ale(e,sF)}var Gue={};On(Gue,{parse:()=>Yue});function Yue(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},d=n===0,h=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(d){r.root=u;continue}if(h){r.reply=u;continue}r.mentions.push(u)}return r}var Zue={};On(Zue,{getPow:()=>Xue});function Xue(e){return Jue(Qi(e))}function Jue(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=Que(e[t]),r+=n,n===8);t++);return r}function Que(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var ece={};On(ece,{finishRepostEvent:()=>tce,getRepostedEvent:()=>rce,getRepostedEventPointer:()=>OF});function tce(e,r,t,n){return Ic({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function OF(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function rce(e,{skipVerification:r}={}){const t=OF(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!dd(n)))return n}var nce={};On(nce,{NOSTR_URI_REGEX:()=>y1,parse:()=>sce,test:()=>ice});var y1=new RegExp(`nostr:(${kF.source})`);function ice(e){return typeof e=="string"&&new RegExp(`^${y1.source}$`).test(e)}function sce(e){const r=e.match(new RegExp(`^${y1.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:p1(r[1])}}var oce={};On(oce,{finishReactionEvent:()=>ace,getReactedEventPointer:()=>lce});function ace(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return Ic({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function lce(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var uce={};On(uce,{createDelegation:()=>cce,getDelegator:()=>hce});function cce(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=hi(ro.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=ur(lo.sign(i,e));return{from:dc(e),to:r.pubkey,cond:n,sig:s}}function hce(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,d]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(d))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(d))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(d))continue;return null}}let o=hi(ro.encode(`nostr:delegation:${e.pubkey}:${n}`));return lo.verify(i,o,t)?t:null}var dce={};On(dce,{matchAll:()=>fce,regex:()=>gO,replaceAll:()=>pce});var gO=()=>new RegExp(`\\b${y1.source}\\b`,"g");function*fce(e){const r=e.matchAll(gO());for(const t of r)try{const[n,i]=t;yield{uri:n,value:i,decoded:p1(i),start:t.index,end:t.index+n.length}}catch{}}function pce(e,r){return e.replaceAll(gO(),(t,n)=>r({uri:t,value:n,decoded:p1(n)}))}var vce={};On(vce,{channelCreateEvent:()=>gce,channelHideMessageEvent:()=>bce,channelMessageEvent:()=>mce,channelMetadataEvent:()=>yce,channelMuteUserEvent:()=>wce});var gce=(e,r)=>{let t;if(typeof e.content=="object")t=JSON.stringify(e.content);else if(typeof e.content=="string")t=e.content;else return;return Ic({kind:40,tags:[...e.tags??[]],content:t,created_at:e.created_at},r)},yce=(e,r)=>{let t;if(typeof e.content=="object")t=JSON.stringify(e.content);else if(typeof e.content=="string")t=e.content;else return;return Ic({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:t,created_at:e.created_at},r)},mce=(e,r)=>{const t=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&t.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),Ic({kind:42,tags:[...t,...e.tags??[]],content:e.content,created_at:e.created_at},r)},bce=(e,r)=>{let t;if(typeof e.content=="object")t=JSON.stringify(e.content);else if(typeof e.content=="string")t=e.content;else return;return Ic({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:t,created_at:e.created_at},r)},wce=(e,r)=>{let t;if(typeof e.content=="object")t=JSON.stringify(e.content);else if(typeof e.content=="string")t=e.content;else return;return Ic({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:t,created_at:e.created_at},r)},_ce={};On(_ce,{useFetchImplementation:()=>$ce,validateGithub:()=>xce});var yO;try{yO=fetch}catch{}function $ce(e){yO=e}async function xce(e,r,t){try{return await(await yO(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var AF={};On(AF,{authenticate:()=>Ece});var Ece=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""};return r.auth(await t(n))},Sce={};On(Sce,{getZapEndpoint:()=>Tce,makeZapReceipt:()=>Ace,makeZapRequest:()=>Ice,useFetchImplementation:()=>kce,validateZapRequest:()=>Oce});var mO;try{mO=fetch}catch{}function kce(e){mO=e}async function Tce(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=qr.decode(t,1e3),a=qr.fromWords(o);r=aa.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await mO(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Ice({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Oce(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Lp(r))return"Zap request is not a valid Nostr event.";if(!dd(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Ace({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Cce={};On(Cce,{getToken:()=>Pce,validateToken:()=>Nce});var CF="Nostr ";async function Pce(e,r,t,n=!1){if(!e||!r)throw new Error("Missing loginUrl or httpMethod");if(r!=="get"&&r!=="post")throw new Error("Unknown httpMethod");const i=$ue(27235);i.tags=[["u",e],["method",r]],i.created_at=Math.round(new Date().getTime()/1e3);const s=await t(i);return(n?CF:"")+Cs.encode(ro.encode(JSON.stringify(s)))}async function Nce(e,r,t){if(!e)throw new Error("Missing token");e=e.replace(CF,"");const n=aa.decode(Cs.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");const i=JSON.parse(n);if(!i)throw new Error("Invalid nostr event");if(!dd(i))throw new Error("Invalid nostr event, signature invalid");if(i.kind!==27235)throw new Error("Invalid nostr event, kind invalid");if(!i.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round(new Date().getTime()/1e3)-i.created_at>60)throw new Error("Invalid nostr event, expired");const s=i.tags.find(a=>a[0]==="u");if((s==null?void 0:s.length)!==1&&(s==null?void 0:s[1])!==r)throw new Error("Invalid nostr event, url tag invalid");const o=i.tags.find(a=>a[0]==="method");if((o==null?void 0:o.length)!==1&&(o==null?void 0:o[1].toLowerCase())!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.bech32m=WE=Fp.bech32=void 0;const L0="qpzry9x8gf2tvdw0s3jn54khce6mua7l",PF={};for(let e=0;e<L0.length;e++){const r=L0.charAt(e);PF[r]=e}function qh(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function iN(e){let r=1;for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=qh(r)^n>>5}r=qh(r);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r=qh(r)^n&31}return r}function bO(e,r,t,n){let i=0,s=0;const o=(1<<t)-1,a=[];for(let l=0;l<e.length;++l)for(i=i<<r|e[l],s+=r;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=r)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function Rce(e){return bO(e,8,5,!0)}function Dce(e){const r=bO(e,5,8,!1);if(Array.isArray(r))return r}function Bce(e){const r=bO(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function NF(e){let r;e==="bech32"?r=1:r=734539939;function t(o,a,l){if(l=l||90,o.length+7+a.length>l)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let u=iN(o);if(typeof u=="string")throw new Error(u);let d=o+"1";for(let h=0;h<a.length;++h){const v=a[h];if(v>>5)throw new Error("Non 5-bit word");u=qh(u)^v,d+=L0.charAt(v)}for(let h=0;h<6;++h)u=qh(u);u^=r;for(let h=0;h<6;++h){const v=u>>(5-h)*5&31;d+=L0.charAt(v)}return d}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const l=o.toLowerCase(),u=o.toUpperCase();if(o!==l&&o!==u)return"Mixed-case string "+o;o=l;const d=o.lastIndexOf("1");if(d===-1)return"No separator character for "+o;if(d===0)return"Missing prefix for "+o;const h=o.slice(0,d),v=o.slice(d+1);if(v.length<6)return"Data too short";let g=iN(h);if(typeof g=="string")return g;const b=[];for(let m=0;m<v.length;++m){const x=v.charAt(m),E=PF[x];if(E===void 0)return"Unknown character "+x;g=qh(g)^E,!(m+6>=v.length)&&b.push(E)}return g!==r?"Invalid checksum for "+o:{prefix:h,words:b}}function i(o,a){const l=n(o,a);if(typeof l=="object")return l}function s(o,a){const l=n(o,a);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:i,decode:s,encode:t,toWords:Rce,fromWordsUnsafe:Dce,fromWords:Bce}}var WE=Fp.bech32=NF("bech32");Fp.bech32m=NF("bech32m");const Mce="modulepreload",Lce=function(e){return"/"+e},sN={},Wt=function(r,t,n){if(!t||t.length===0)return r();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Lce(s),s in sN)return;sN[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Mce,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},RF={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who and when you're chatting with.",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},Fce=Object.freeze(Object.defineProperty({__proto__:null,default:RF},Symbol.toStringTag,{value:"Module"})),jp={en:"English","zh-cn":"简体中文","zh-tw":"繁體中文",es:"Español",ru:"Русский",de:"Deutsch",fr:"Français",it:"Italiano",ja:"日本語",ko:"한국어",ar:"العربية",id:"Indonesia","pt-BR":"Português (Brasil)",tr:"Türkçe",vt:"Tiếng Việt",bn:"বাংলা",th:"ไทย",hi:"हिन्दी",fa:"فارسی",ur:"اردو",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"עברית",sv:"Svenska",fi:"Suomi","cs-CZ":"Čeština",bg:"Български",as:"অসমীয়া",sk:"Slovenčina",lt:"Lietuvių","el-GR":"Ελληνικά"},jce=Object.assign({"./languages/ar.mjs":()=>Wt(()=>import("./ar-b05107c0.js"),[]),"./languages/as.mjs":()=>Wt(()=>import("./as-825421ff.js"),[]),"./languages/bg.mjs":()=>Wt(()=>import("./bg-262cfc4e.js"),[]),"./languages/bn.mjs":()=>Wt(()=>import("./bn-542e2fe5.js"),[]),"./languages/cs-CZ.mjs":()=>Wt(()=>import("./cs-CZ-ad8d06ab.js"),[]),"./languages/de.mjs":()=>Wt(()=>import("./de-e254045b.js"),[]),"./languages/el-GR.mjs":()=>Wt(()=>import("./el-GR-dd662a28.js"),[]),"./languages/en.mjs":()=>Wt(()=>Promise.resolve().then(()=>Fce),void 0),"./languages/es.mjs":()=>Wt(()=>import("./es-9ed73c18.js"),[]),"./languages/fa.mjs":()=>Wt(()=>import("./fa-b92e5c69.js"),[]),"./languages/fi.mjs":()=>Wt(()=>import("./fi-1b81d3e2.js"),[]),"./languages/fr.mjs":()=>Wt(()=>import("./fr-084a88bb.js"),[]),"./languages/he.mjs":()=>Wt(()=>import("./he-f8f630eb.js"),[]),"./languages/hi.mjs":()=>Wt(()=>import("./hi-21492224.js"),[]),"./languages/hu.mjs":()=>Wt(()=>import("./hu-272cee10.js"),[]),"./languages/id.mjs":()=>Wt(()=>import("./id-879a045d.js"),[]),"./languages/it.mjs":()=>Wt(()=>import("./it-570c4004.js"),[]),"./languages/ja.mjs":()=>Wt(()=>import("./ja-ca2ddcd8.js"),[]),"./languages/ko.mjs":()=>Wt(()=>import("./ko-20dade51.js"),[]),"./languages/lt.mjs":()=>Wt(()=>import("./lt-9d42b6bf.js"),[]),"./languages/nl.mjs":()=>Wt(()=>import("./nl-e18021b9.js"),[]),"./languages/pl.mjs":()=>Wt(()=>import("./pl-c71aa6e1.js"),[]),"./languages/pt-BR.mjs":()=>Wt(()=>import("./pt-BR-f6e074f5.js"),[]),"./languages/ru.mjs":()=>Wt(()=>import("./ru-a4f155c7.js"),[]),"./languages/sk.mjs":()=>Wt(()=>import("./sk-baed6548.js"),[]),"./languages/sv.mjs":()=>Wt(()=>import("./sv-6a12b090.js"),[]),"./languages/th.mjs":()=>Wt(()=>import("./th-77251d86.js"),[]),"./languages/tr.mjs":()=>Wt(()=>import("./tr-5c13f72f.js"),[]),"./languages/ur.mjs":()=>Wt(()=>import("./ur-da5400bf.js"),[]),"./languages/vt.mjs":()=>Wt(()=>import("./vt-ed0b9062.js"),[]),"./languages/zh-cn.mjs":()=>Wt(()=>import("./zh-cn-8db267de.js"),[]),"./languages/zh-tw.mjs":()=>Wt(()=>import("./zh-tw-27ec4fa0.js"),[])});let Ah=Object.keys(jp),Ts,Jm,DF;Ts=localStorage.getItem("language")||navigator.language||"en";if(Ah.indexOf(Ts)===-1){const e=Ts.slice(0,2);Ts="en";for(let r=0;r<Ah.length;r++)if(Ah[r].slice(0,2)===e){Ts=Ah[r];break}}DF=jce[`./languages/${Ts}.mjs`]().then(e=>{console.log("loaded translation",Ts,`./languages/${Ts}.mjs`),Jm=e.default,Ts!=="en"&&(Jm={...RF,...Jm})}).catch(e=>{console.error("failed to load translation",e)});function zce(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function ne(e,r){const n=(e&&(Jm[e]||zce(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return n.forEach(s=>{s.startsWith("<b>")?i.push(Oe("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(Oe("a",{key:i.length,...r},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}const Hce=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,Uce=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,Kce=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,Wce=/(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;let BF={};be.get("existingIrisToAddress").on(e=>BF=e);const Vce=navigator.userAgent.toLowerCase(),qce=Vce.indexOf(" electron/")>-1,sr={wtClient:void 0,formatAmount(e,r=2){return typeof e!="number"?"":e<1e3?e.toFixed(r):e<1e6?(e/1e3).toFixed(r)+"K":e<1e9?(e/1e6).toFixed(r)+"M":(e/1e9).toFixed(r)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(Hce)!==null},async translateText(e){const t=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:Ts.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return t==null?void 0:t.translatedText},handleLightningLinkClick(e){e.preventDefault();const r=e.target.closest("A").href;r.startsWith("lightning:")&&window.open(r,"_self")},isMobile:function(){let e=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const r=document.createElement("textarea");r.textContent=e,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}finally{document.body.removeChild(r)}}return!1},showConsoleWarning(){const e="Stop!",r=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const t="font-family:helvetica; font-size:20px; ";[[e,`${t}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[r,t],["",""]].map(n=>{setTimeout(console.log.bind(console,`
%c${n[0]}`,n[1]))})}},formatTime(e){const r=e.toLocaleTimeString(void 0,{timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},formatDate(e){const r=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,r,t,n){if(t||(t=new Date,n=t.toLocaleDateString(void 0,{dateStyle:"short"})),r===n)return"today";const i=Math.round((t.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):r},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const r=WE.decode(e,1e3),t=WE.fromWords(r.words);return new TextDecoder().decode(Uint8Array.from(t))}catch(r){return console.error("bech32ToText failed",r),""}},formatBytes(e,r=2){if(e===0)return"0 Bytes";const t=1024,n=r<0?0:r,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,s)).toFixed(n))} ${i[s]}`},download(e,r,t,n,i){n===null&&(n="utf-8");const s=document.createElement("a");s.href=i||`data:${t};charset=${n},${encodeURI(r)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const r=new FileReader;return r.readAsDataURL(e),new Promise((t,n)=>{r.onload=function(){t(r.result)},r.onerror=function(i){n(`Error: ${i}`)}})},getMyProfileLink(){const e=BF.name||te.toNostrBech32Address(te.getPubKey(),"npub");return this.buildURL(e)},buildURL(e,r={},t=""){const n=new URL(window.location.origin);n.pathname=e;for(const[i,s]of Object.entries(r))n.searchParams.append(i,s);return t&&(n.hash=t),n.toString()},arraysAreEqual(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0},arrayToHex(e){return Array.from(e,r=>("0"+(r&255).toString(16)).slice(-2)).join("")},isElectron:qce,pubKeyRegex:Uce,noteRegex:Kce,hashtagRegex:Wce};var MF={exports:{}},k$={exports:{}},oN;function Gce(){return oN||(oN=1,function(e,r){(function(t,n){e.exports=n()})(en,function(){return function(){function t(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},t.prototype.loadDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.loadDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){if(typeof s=="function"){if(l.id===0){s(null);return}s(l.val)}else console.log(l.val)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(i,s,o){var a=this.app,l=this;function u(d){d&&d.success===!0?o(null):o(new Error("Error saving database")),l.options.closeAfterSave&&l.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(d){l.saveDatabase(i,s,u)});return}this.catalog.setAppKey(a,i,s,u)},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.deleteDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){var u=l.id;u!==0?a.catalog.deleteAppKey(u,s):typeof s=="function"&&s({success:!0})})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(o){o.forEach(function(a){a.startsWith(i)&&s.deleteDatabase(a)})})},t.prototype.getDatabaseList=function(i){var s=this.app,o=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(a){o.catalog=a,o.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(a){for(var l=[],u=0;u<a.length;u++)l.push(a[u].key);typeof i=="function"?i(l):l.forEach(function(d){console.log(d)})})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(o){s.catalog=o,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(o){for(var a=[],l,u,d,h,v,g=0;g<o.length;g++)l=o[g],d=l.app||"",h=l.key||"",v=l.val||"",u=d.length*2+h.length*2+v.length+1,a.push({app:l.app,key:l.key,size:u});typeof i=="function"?i(a):a.forEach(function(b){console.log(b)})})};function n(i){this.db=null,this.initializeLokiCatalog(i)}return n.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),o=this;s.onupgradeneeded=function(a){var l=a.target.result;if(l.objectStoreNames.contains("LokiAKV")&&l.deleteObjectStore("LokiAKV"),!l.objectStoreNames.contains("LokiAKV")){var u=l.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});u.createIndex("app","app",{unique:!1}),u.createIndex("key","key",{unique:!1}),u.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(a){o.db=a.target.result,typeof i=="function"&&i(o)},s.onerror=function(a){throw a}},n.prototype.getAppKey=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.index("appkey"),d=i+","+s,h=u.get(d);h.onsuccess=function(v){return function(g){var b=g.target.result;(b===null||typeof b>"u")&&(b={id:0,success:!1}),typeof v=="function"?v(b):console.log(b)}}(o),h.onerror=function(v){return function(g){if(typeof v=="function")v({id:0,success:!1});else throw g}}(o)},n.prototype.getAppKeyById=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.get(i);u.onsuccess=function(d,h){return function(v){typeof h=="function"?h(v.target.result,d):console.log(v.target.result)}}(o,s)},n.prototype.setAppKey=function(i,s,o,a){var l=this.db.transaction(["LokiAKV"],"readwrite"),u=l.objectStore("LokiAKV"),d=u.index("appkey"),h=i+","+s,v=d.get(h);v.onsuccess=function(g){var b=g.target.result;b==null?b={app:i,key:s,appkey:i+","+s,val:o}:b.val=o;var m=u.put(b);m.onerror=function(x){return function(E){typeof x=="function"?x({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(v.error))}}(a),m.onsuccess=function(x){return function(E){typeof x=="function"&&x({success:!0})}}(a)},v.onerror=function(g){return function(b){typeof g=="function"?g({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(v.error))}}(a)},n.prototype.deleteAppKey=function(i,s){var o=this.db.transaction(["LokiAKV"],"readwrite"),a=o.objectStore("LokiAKV"),l=a.delete(i);l.onsuccess=function(u){return function(d){typeof u=="function"&&u({success:!0})}}(s),l.onerror=function(u){return function(d){typeof u=="function"?u({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(l.error))}}(s)},n.prototype.getAppKeys=function(i,s){var o=this.db.transaction(["LokiAKV"],"readonly"),a=o.objectStore("LokiAKV"),l=a.index("app"),u=IDBKeyRange.only(i),d=l.openCursor(u),h=[];d.onsuccess=function(v,g){return function(b){var m=b.target.result;if(m){var x=m.value;v.push(x),m.continue()}else typeof g=="function"?g(v):console.log(v)}}(h,s),d.onerror=function(v){return function(g){typeof v=="function"?v(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(g))}}(s)},n.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),o=s.objectStore("LokiAKV"),a=o.openCursor(),l=[];a.onsuccess=function(u,d){return function(h){var v=h.target.result;if(v){var g=v.value;u.push(g),v.continue()}else typeof d=="function"?d(u):console.log(u)}}(l,i),a.onerror=function(u){return function(d){typeof u=="function"&&u(null)}}(i)},t}()})}(k$)),k$.exports}const Yce={},Zce=Object.freeze(Object.defineProperty({__proto__:null,default:Yce},Symbol.toStringTag,{value:"Module"})),Xce=LI(Zce);(function(e,r){(function(t,n){e.exports=n()})(en,function(){return function(){var t=Object.prototype.hasOwnProperty;function n(y){var w,A;if(Array.isArray(y)){for(A=0;A<y.length;A++)n(y[A]);i(y)}else if(y!==null&&typeof y=="object"){for(w in y)y.hasOwnProperty(w)&&n(y[w]);i(y)}}function i(y){Object.isFrozen(y)||Object.freeze(y)}function s(y){return Object.isFrozen(y)?$(y,"shallow"):y}var o={copyProperties:function(y,w){var A;for(A in y)w[A]=y[A]},resolveTransformObject:function(y,w,A){var N,B;if(typeof A!="number"&&(A=0),++A>=10)return y;for(N in y)typeof y[N]=="string"&&y[N].indexOf("[%lktxp]")===0?(B=y[N].substring(8),w.hasOwnProperty(B)&&(y[N]=w[B])):typeof y[N]=="object"&&(y[N]=o.resolveTransformObject(y[N],w,A));return y},resolveTransformParams:function(y,w){var A,N,B=[];if(typeof w>"u")return y;for(A=0;A<y.length;A++)N=$(y[A],"shallow-recurse-objects"),B.push(o.resolveTransformObject(N,w));return B},getIn:function(y,w,A){if(y!=null){if(!A)return y[w];if(typeof w=="string"&&(w=w.split(".")),!Array.isArray(w))throw new Error("path must be a string or array. Found "+typeof w);for(var N=0,B=w.length;y!=null&&N<B;)y=y[w[N++]];return N&&N==B?y:void 0}}},a={aeq:l,lt:u,gt:d};function l(y,w){var A,N,B,j;if(y===w)return!0;if(!y||!w||y===!0||w===!0||y!==y||w!==w){switch(y){case void 0:B=1;break;case null:B=1;break;case!1:B=3;break;case!0:B=4;break;case"":B=5;break;default:B=y===y?9:0;break}switch(w){case void 0:j=1;break;case null:j=1;break;case!1:j=3;break;case!0:j=4;break;case"":j=5;break;default:j=w===w?9:0;break}if(B!==9||j!==9)return B===j}return A=Number(y),N=Number(w),A===A||N===N?A===N:(A=y.toString(),N=w.toString(),A==N)}function u(y,w,A){var N,B,j,X;if(!y||!w||y===!0||w===!0||y!==y||w!==w){switch(y){case void 0:j=1;break;case null:j=1;break;case!1:j=3;break;case!0:j=4;break;case"":j=5;break;default:j=y===y?9:0;break}switch(w){case void 0:X=1;break;case null:X=1;break;case!1:X=3;break;case!0:X=4;break;case"":X=5;break;default:X=w===w?9:0;break}if(j!==9||X!==9)return j===X?A:j<X}return N=Number(y),B=Number(w),N===N&&B===B?N<B?!0:N>B?!1:A:N===N&&B!==B?!0:B===B&&N!==N?!1:y<w?!0:y>w?!1:y==w?A:(N=y.toString(),B=w.toString(),N<B?!0:N==B?A:!1)}function d(y,w,A){var N,B,j,X;if(!y||!w||y===!0||w===!0||y!==y||w!==w){switch(y){case void 0:j=1;break;case null:j=1;break;case!1:j=3;break;case!0:j=4;break;case"":j=5;break;default:j=y===y?9:0;break}switch(w){case void 0:X=1;break;case null:X=1;break;case!1:X=3;break;case!0:X=4;break;case"":X=5;break;default:X=w===w?9:0;break}if(j!==9||X!==9)return j===X?A:j>X}return N=Number(y),B=Number(w),N===N&&B===B?N>B?!0:N<B?!1:A:N===N&&B!==B?!1:B===B&&N!==N||y>w?!0:y<w?!1:y==w?A:(N=y.toString(),B=w.toString(),N>B?!0:N==B?A:!1)}function h(y,w,A){return a.aeq(y,w)?0:a.lt(y,w,!1)?A?1:-1:a.gt(y,w,!1)?A?-1:1:0}function v(y,w,A){for(var N=0,B,j,X,re,Ee,_e=0,We=y.length;_e<We;_e++)if(B=y[_e],j=B[0],~j.indexOf(".")?(Ee=j.split("."),X=o.getIn(w,Ee,!0),re=o.getIn(A,Ee,!0)):(X=w[j],re=A[j]),N=h(X,re,B[1]),N!==0)return N;return 0}function g(y,w,A,N,B,j){var X=j||0,re=w[X],Ee=!1,_e;if(typeof y=="object"&&re in y&&(_e=y[re]),X+1>=w.length)Ee=A(_e,N,B);else if(Array.isArray(_e))for(var We=0,Xe=_e.length;We<Xe&&(Ee=g(_e[We],w,A,N,B,X+1),Ee!==!0);We+=1);else Ee=g(_e,w,A,N,B,X+1);return Ee}function b(y){return typeof y=="string"||Array.isArray(y)?function(w){return y.indexOf(w)!==-1}:typeof y=="object"&&y!==null?function(w){return t.call(y,w)}:null}function m(y,w,A){for(var N in w)if(t.call(w,N))return x[N](y,w[N],A);return!1}var x={$eq:function(y,w){return y===w},$aeq:function(y,w){return y==w},$ne:function(y,w){return w!==w?y===y:y!==w},$dteq:function(y,w){return a.aeq(y,w)},$gt:function(y,w){return a.gt(y,w,!1)},$gte:function(y,w){return a.gt(y,w,!0)},$lt:function(y,w){return a.lt(y,w,!1)},$lte:function(y,w){return a.lt(y,w,!0)},$jgt:function(y,w){return y>w},$jgte:function(y,w){return y>=w},$jlt:function(y,w){return y<w},$jlte:function(y,w){return y<=w},$between:function(y,w){return y==null?!1:a.gt(y,w[0],!0)&&a.lt(y,w[1],!0)},$jbetween:function(y,w){return y==null?!1:y>=w[0]&&y<=w[1]},$in:function(y,w){return w.indexOf(y)!==-1},$inSet:function(y,w){return w.has(y)},$nin:function(y,w){return w.indexOf(y)===-1},$keyin:function(y,w){return y in w},$nkeyin:function(y,w){return!(y in w)},$definedin:function(y,w){return w[y]!==void 0},$undefinedin:function(y,w){return w[y]===void 0},$regex:function(y,w){return w.test(y)},$containsString:function(y,w){return typeof y=="string"&&y.indexOf(w)!==-1},$containsNone:function(y,w){return!x.$containsAny(y,w)},$containsAny:function(y,w){var A=b(y);return A!==null?Array.isArray(w)?w.some(A):A(w):!1},$contains:function(y,w){var A=b(y);return A!==null?Array.isArray(w)?w.every(A):A(w):!1},$elemMatch:function(y,w){return Array.isArray(y)?y.some(function(A){return Object.keys(w).every(function(N){var B=w[N];return typeof B=="object"&&B||(B={$eq:B}),N.indexOf(".")!==-1?g(A,N.split("."),m,w[N],A):m(A[N],B,A)})}):!1},$type:function(y,w,A){var N=typeof y;return N==="object"&&(Array.isArray(y)?N="array":y instanceof Date&&(N="date")),typeof w!="object"?N===w:m(N,w,A)},$finite:function(y,w){return w===isFinite(y)},$size:function(y,w,A){return Array.isArray(y)?typeof w!="object"?y.length===w:m(y.length,w,A):!1},$len:function(y,w,A){return typeof y=="string"?typeof w!="object"?y.length===w:m(y.length,w,A):!1},$where:function(y,w){return w(y)===!0},$not:function(y,w,A){return!m(y,w,A)},$and:function(y,w,A){for(var N=0,B=w.length;N<B;N+=1)if(!m(y,w[N],A))return!1;return!0},$or:function(y,w,A){for(var N=0,B=w.length;N<B;N+=1)if(m(y,w[N],A))return!0;return!1},$exists:function(y,w){return w?y!==void 0:y===void 0}},E=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];E.forEach(function(y){var w=x[y];x["$"+y]=function(A,N,B){if(typeof N=="string")return w(A,B[N]);if(typeof N=="function")return w(A,N(B));throw new Error("Invalid argument to $$ matcher")}});var k={$eq:x.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function $(y,w){if(y==null)return null;var A=w||"parse-stringify",N;switch(A){case"parse-stringify":N=JSON.parse(JSON.stringify(y));break;case"jquery-extend-deep":N=jQuery.extend(!0,{},y);break;case"shallow":N=Object.create(y.constructor.prototype),Object.keys(y).map(function(j){N[j]=y[j]});break;case"shallow-assign":N=Object.create(y.constructor.prototype),Object.assign(N,y);break;case"shallow-recurse-objects":N=$(y,"shallow");var B=Object.keys(y);B.forEach(function(j){typeof y[j]=="object"&&y[j].constructor.name==="Object"?N[j]=$(y[j],"shallow-recurse-objects"):Array.isArray(y[j])&&(N[j]=S(y[j],"shallow-recurse-objects"))});break}return N}function S(y,w){if(w=="parse-stringify")return $(y,w);for(var A=[],N=0,B=y.length;N<B;N++)A[N]=$(y[N],w);return A}function T(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function O(){}O.prototype.events={},O.prototype.asyncListeners=!1,O.prototype.on=function(y,w){var A,N=this;return Array.isArray(y)?(y.forEach(function(B){N.on(B,w)}),w):(A=this.events[y],A||(A=this.events[y]=[]),A.push(w),w)},O.prototype.emit=function(y){var w=this,A;if(y&&this.events[y])this.events[y].length&&(A=Array.prototype.slice.call(arguments,1),this.events[y].forEach(function(N){w.asyncListeners?setTimeout(function(){N.apply(w,A)},1):N.apply(w,A)}));else throw new Error("No event "+y+" defined")},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(y,w){var A=this;if(Array.isArray(y)){y.forEach(function(B){A.removeListener(B,w)});return}if(this.events[y]){var N=this.events[y];N.splice(N.indexOf(w),1)}};function I(y,w){this.filename=y||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=w&&w.hasOwnProperty("verbose")?w.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var A=function(){return typeof en<"u"&&(en.android||en.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof en<"u"&&en.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};w&&w.hasOwnProperty("env")?this.ENV=w.env:this.ENV=A(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(w,!0),this.on("init",this.clearChanges)}I.prototype=new O,I.prototype.constructor=I,I.prototype.getIndexedAdapter=function(){var y;return typeof Zf=="function"&&(y=Gce()),y},I.prototype.configureOptions=function(y,w){var A={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},N={fs:D,localStorage:F,memory:P};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof y<"u"){if(this.options=y,this.options.hasOwnProperty("persistenceMethod")&&typeof N[y.persistenceMethod]=="function"&&(this.persistenceMethod=y.persistenceMethod,this.persistenceAdapter=new N[y.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=y.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),y.autoload&&w){var B=this;setTimeout(function(){B.loadDatabase(y,y.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(y,y.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=A[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new N[this.persistenceMethod]))},I.prototype.copy=function(y){var w=new I(this.filename,{env:"NA"}),A,N;if(y=y||{},w.loadJSONObject(this,{retainDirtyFlags:!0}),y.hasOwnProperty("removeNonSerializable")&&y.removeNonSerializable===!0)for(w.autosaveHandle=null,w.persistenceAdapter=null,A=w.collections.length,N=0;N<A;N++)w.collections[N].constraints=null,w.collections[N].ttl=null;return w},I.prototype.addCollection=function(y,w){var A,N=this.collections.length;if(w&&w.disableMeta===!0){if(w.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(w.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof w.ttl=="number"&&w.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(A=0;A<N;A+=1)if(this.collections[A].name===y)return this.collections[A];var B=new M(y,w);return B.isIncremental=this.isIncremental,this.collections.push(B),this.verbose&&(B.lokiConsoleWrapper=console),B},I.prototype.loadCollection=function(y){if(!y.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(y)},I.prototype.getCollection=function(y){var w,A=this.collections.length;for(w=0;w<A;w+=1)if(this.collections[w].name===y)return this.collections[w];return this.emit("warning","collection "+y+" not found"),null},I.prototype.renameCollection=function(y,w){var A=this.getCollection(y);return A&&(A.name=w),A},I.prototype.listCollections=function(){for(var y=this.collections.length,w=[];y--;)w.push({name:this.collections[y].name,type:this.collections[y].objType,count:this.collections[y].data.length});return w},I.prototype.removeCollection=function(y){var w,A=this.collections.length;for(w=0;w<A;w+=1)if(this.collections[w].name===y){var N=new M(y,{}),B=this.collections[w];for(var j in B)B.hasOwnProperty(j)&&N.hasOwnProperty(j)&&(B[j]=N[j]);this.collections.splice(w,1);return}},I.prototype.getName=function(){return this.name},I.prototype.serializeReplacer=function(y,w){switch(y){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return w}},I.prototype.serialize=function(y){switch(y=y||{},y.hasOwnProperty("serializationMethod")||(y.serializationMethod=this.options.serializationMethod),y.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},I.prototype.toJson=I.prototype.serialize,I.prototype.serializeDestructured=function(y){var w,A,N,B,j=[],X;if(y=y||{},y.hasOwnProperty("partitioned")||(y.partitioned=!1),y.hasOwnProperty("delimited")||(y.delimited=!0),y.hasOwnProperty("delimiter")||(y.delimiter=this.options.destructureDelimiter),y.partitioned===!0&&y.hasOwnProperty("partition")&&y.partition>=0)return this.serializeCollection({delimited:y.delimited,delimiter:y.delimiter,collectionIndex:y.partition});for(X=new I(this.filename),X.loadJSONObject(this),w=0;w<X.collections.length;w++)X.collections[w].data=[];if(y.partitioned===!0&&y.partition===-1)return X.serialize({serializationMethod:"normal"});for(j.push(X.serialize({serializationMethod:"normal"})),X=null,w=0;w<this.collections.length;w++)if(N=this.serializeCollection({delimited:y.delimited,delimiter:y.delimiter,collectionIndex:w}),y.partitioned===!1&&y.delimited===!1){if(!Array.isArray(N))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(B=N.length,A=0;A<B;A++)j.push(N[A]),N[A]=null;j.push("")}else j.push(N);return y.partitioned?(y.delimited,j):y.delimited?(j.push(""),j.join(y.delimiter)):(j.push(""),j)},I.prototype.serializeCollection=function(y){var w,A,N=[];if(y=y||{},y.hasOwnProperty("delimited")||(y.delimited=!0),!y.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(w=this.collections[y.collectionIndex].data.length,N=[],A=0;A<w;A++)N.push(JSON.stringify(this.collections[y.collectionIndex].data[A]));return y.delimited?(N.push(""),N.join(y.delimiter)):N},I.prototype.deserializeDestructured=function(y,w){var A=[],N,B,j=0,X,re=1,Ee=!1,_e;if(w=w||{},w.hasOwnProperty("partitioned")||(w.partitioned=!1),w.hasOwnProperty("delimited")||(w.delimited=!0),w.hasOwnProperty("delimiter")||(w.delimiter=this.options.destructureDelimiter),w.partitioned){if(w.hasOwnProperty("partition"))return w.partition===-1?(B=JSON.parse(y[0]),B):this.deserializeCollection(y[w.partition+1],w);for(B=JSON.parse(y[0]),X=B.collections.length,j=0;j<X;j++)B.collections[j].data=this.deserializeCollection(y[j+1],w);return B}if(w.delimited){if(A=y.split(w.delimiter),y=null,N=A.length,N===0)return null}else A=y;for(B=JSON.parse(A[0]),X=B.collections.length,A[0]=null;!Ee;)A[re],A[re]===""?++j>X&&(Ee=!0):(_e=JSON.parse(A[re]),B.collections[j].data.push(_e)),A[re++]=null;return B},I.prototype.deserializeCollection=function(y,w){var A=[],N,B;for(w=w||{},w.hasOwnProperty("partitioned")||(w.partitioned=!1),w.hasOwnProperty("delimited")||(w.delimited=!0),w.hasOwnProperty("delimiter")||(w.delimiter=this.options.destructureDelimiter),w.delimited?(A=y.split(w.delimiter),A.pop()):A=y,B=A.length,N=0;N<B;N++)A[N]=JSON.parse(A[N]);return A},I.prototype.loadJSON=function(y,w){var A;if(y.length===0)A={};else switch(this.options.serializationMethod){case"normal":case"pretty":A=JSON.parse(y);break;case"destructured":A=this.deserializeDestructured(y);break;default:A=JSON.parse(y);break}this.loadJSONObject(A,w)},I.prototype.loadJSONObject=function(y,w){var A=0,N=y.collections?y.collections.length:0,B,j,X,re,Ee,_e;this.name=y.name,y.hasOwnProperty("throttledSaves")&&w&&!w.hasOwnProperty("throttledSaves")&&(this.throttledSaves=y.throttledSaves),this.collections=[];function We($t){var Kt=w[$t.name],Zr;return Kt.proto?(Zr=Kt.inflate||o.copyProperties,function(vr){var yt=new Kt.proto;return Zr(vr,yt),yt}):Kt.inflate}for(A;A<N;A+=1){if(B=y.collections[A],j=this.addCollection(B.name,{disableChangesApi:B.disableChangesApi,disableDeltaChangesApi:B.disableDeltaChangesApi,disableMeta:B.disableMeta,disableFreeze:B.hasOwnProperty("disableFreeze")?B.disableFreeze:!0}),j.adaptiveBinaryIndices=B.hasOwnProperty("adaptiveBinaryIndices")?B.adaptiveBinaryIndices===!0:!1,j.transactional=B.transactional,j.asyncListeners=B.asyncListeners,j.cloneObjects=B.cloneObjects,j.cloneMethod=B.cloneMethod||"parse-stringify",j.autoupdate=B.autoupdate,j.changes=B.changes,j.dirtyIds=B.dirtyIds||[],w&&w.retainDirtyFlags===!0?j.dirty=B.dirty:j.dirty=!1,X=B.data.length,re=0,w&&w.hasOwnProperty(B.name))for(Ee=We(B),re;re<X;re++)_e=Ee(B.data[re]),j.data[re]=_e,j.addAutoUpdateObserver(_e),j.disableFreeze||n(j.data[re]);else for(re;re<X;re++)j.data[re]=B.data[re],j.addAutoUpdateObserver(j.data[re]),j.disableFreeze||n(j.data[re]);if(j.maxId=typeof B.maxId>"u"?0:B.maxId,typeof B.binaryIndices<"u"&&(j.binaryIndices=B.binaryIndices),typeof B.transforms<"u"&&(j.transforms=B.transforms),j.uniqueNames=[],B.hasOwnProperty("uniqueNames")&&(j.uniqueNames=B.uniqueNames),!(typeof B.DynamicViews>"u")){for(var Xe=0;Xe<B.DynamicViews.length;Xe++){var Ze=B.DynamicViews[Xe],Ve=j.addDynamicView(Ze.name,Ze.options);Ve.resultdata=Ze.resultdata,Ve.resultsdirty=Ze.resultsdirty,Ve.filterPipeline=Ze.filterPipeline,Ve.sortCriteriaSimple=Ze.sortCriteriaSimple,Ve.sortCriteria=Ze.sortCriteria,Ve.sortFunction=null,Ve.sortDirty=Ze.sortDirty,j.disableFreeze||(n(Ve.filterPipeline),Ve.sortCriteriaSimple?n(Ve.sortCriteriaSimple):Ve.sortCriteria&&n(Ve.sortCriteria)),Ve.resultset.filteredrows=Ze.resultset.filteredrows,Ve.resultset.filterInitialized=Ze.resultset.filterInitialized,Ve.rematerialize({removeWhereFilters:!0})}y.databaseVersion<1.5&&(j.ensureAllIndexes(!0),j.dirty=!0)}}},I.prototype.close=function(y){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(y),y=void 0)),y&&this.on("close",y),this.emit("close")},I.prototype.generateChangesNotification=function(y){function w(B){return B.name}var A=[],N=y||this.collections.map(w);return this.collections.forEach(function(B){N.indexOf(w(B))!==-1&&(A=A.concat(B.getChanges()))}),A},I.prototype.serializeChanges=function(y){return JSON.stringify(this.generateChangesNotification(y))},I.prototype.clearChanges=function(){this.collections.forEach(function(y){y.flushChanges&&y.flushChanges()})};function P(y){this.hashStore={},this.options=y||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}P.prototype.loadDatabase=function(y,w){var A=this;this.options.asyncResponses?setTimeout(function(){A.hashStore.hasOwnProperty(y)?w(A.hashStore[y].value):w(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(y)?w(this.hashStore[y].value):w(null)},P.prototype.saveDatabase=function(y,w,A){var N=this,B;this.options.asyncResponses?setTimeout(function(){B=N.hashStore.hasOwnProperty(y)?N.hashStore[y].savecount:0,N.hashStore[y]={savecount:B+1,lastsave:new Date,value:w},A()},this.options.asyncTimeout):(B=this.hashStore.hasOwnProperty(y)?this.hashStore[y].savecount:0,this.hashStore[y]={savecount:B+1,lastsave:new Date,value:w},A())},P.prototype.deleteDatabase=function(y,w){this.hashStore.hasOwnProperty(y)&&delete this.hashStore[y],typeof w=="function"&&w()};function R(y,w){if(this.mode="reference",this.adapter=null,this.options=w||{},this.dbref=null,this.dbname="",this.pageIterator={},y){if(y.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=y}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}R.prototype.loadDatabase=function(y,w){var A=this;this.dbname=y,this.dbref=new I(y),this.adapter.loadDatabase(y,function(N){if(!N){w(N);return}typeof N!="string"&&w(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var B=JSON.parse(N);if(A.dbref.loadJSONObject(B),B=null,A.dbref.collections.length,A.dbref.collections.length===0){w(A.dbref);return}A.pageIterator={collection:0,pageIndex:0},A.loadNextPartition(0,function(){w(A.dbref)})})},R.prototype.loadNextPartition=function(y,w){var A=this.dbname+"."+y,N=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(w);return}this.adapter.loadDatabase(A,function(B){var j=N.dbref.deserializeCollection(B,{delimited:!0,collectionIndex:y});N.dbref.collections[y].data=j,++y<N.dbref.collections.length?N.loadNextPartition(y,w):w()})},R.prototype.loadNextPage=function(y){var w=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,A=this;this.adapter.loadDatabase(w,function(N){var B=N.split(A.options.delimiter);N="";var j=B.length,X,re=B[j-1]==="";for(re&&(B.pop(),j=B.length,B[j-1]===""&&j===1&&(B.pop(),j=B.length)),X=0;X<j;X++)A.dbref.collections[A.pageIterator.collection].data.push(JSON.parse(B[X])),B[X]=null;B=[],re?++A.pageIterator.collection<A.dbref.collections.length?A.loadNextPartition(A.pageIterator.collection,y):y():(A.pageIterator.pageIndex++,A.loadNextPage(y))})},R.prototype.exportDatabase=function(y,w,A){var N,B=w.collections.length;for(this.dbref=w,this.dbname=y,this.dirtyPartitions=[-1],N=0;N<B;N++)w.collections[N].dirty&&this.dirtyPartitions.push(N);this.saveNextPartition(function(j){A(j)})},R.prototype.saveNextPartition=function(y){var w=this,A=this.dirtyPartitions.shift(),N=this.dbname+(A===-1?"":"."+A);if(this.options.paging&&A!==-1){this.pageIterator={collection:A,docIndex:0,pageIndex:0},this.saveNextPage(function(j){w.dirtyPartitions.length===0?y(j):w.saveNextPartition(y)});return}var B=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:A});this.adapter.saveDatabase(N,B,function(j){if(j){y(j);return}w.dirtyPartitions.length===0?y(null):w.saveNextPartition(y)})},R.prototype.saveNextPage=function(y){var w=this,A=this.dbref.collections[this.pageIterator.collection],N=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,B=0,j=A.data.length,X=this.options.delimiter.length,re="",Ee="",_e=!1,We=!1,Xe=function(Ze){Ee="",Ze&&y(Ze),_e?y(null):(w.pageIterator.pageIndex++,w.saveNextPage(y))};for(A.data.length===0&&(_e=!0);;)if(_e||(re=JSON.stringify(A.data[this.pageIterator.docIndex]),Ee+=re,B+=re.length,++this.pageIterator.docIndex>=j&&(_e=!0)),B>=this.options.pageSize&&(We=!0),(!We||_e)&&(Ee+=this.options.delimiter,B+=X),_e||We){this.adapter.saveDatabase(N,Ee,Xe);return}};function D(){try{this.fs=Xce}catch{this.fs=null}}D.prototype.loadDatabase=function(w,A){var N=this;this.fs.stat(w,function(B,j){!B&&j.isFile()?N.fs.readFile(w,{encoding:"utf8"},function(re,Ee){A(re?new Error(re):Ee)}):A(null)})},D.prototype.saveDatabase=function(w,A,N){var B=this,j=w+"~";this.fs.writeFile(j,A,function(re){re?N(new Error(re)):B.fs.rename(j,w,N)})},D.prototype.deleteDatabase=function(w,A){this.fs.unlink(w,function(B){B?A(new Error(B)):A()})};function F(){}F.prototype.loadDatabase=function(w,A){T()?A(localStorage.getItem(w)):A(new Error("localStorage is not available"))},F.prototype.saveDatabase=function(w,A,N){T()?(localStorage.setItem(w,A),N(null)):N(new Error("localStorage is not available"))},F.prototype.deleteDatabase=function(w,A){T()?(localStorage.removeItem(w),A(null)):A(new Error("localStorage is not available"))},I.prototype.throttledSaveDrain=function(y,w){var A=this,N=new Date().getTime();if(this.throttledSaves||y(!0),w=w||{},w.hasOwnProperty("recursiveWait")||(w.recursiveWait=!0),w.hasOwnProperty("recursiveWaitLimit")||(w.recursiveWaitLimit=!1),w.hasOwnProperty("recursiveWaitLimitDuration")||(w.recursiveWaitLimitDuration=2e3),w.hasOwnProperty("started")||(w.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(w.recursiveWait)this.throttledCallbacks.push(function(){if(A.throttledSavePending){if(w.recursiveWaitLimit&&N-w.started>w.recursiveWaitLimitDuration){y(!1);return}A.throttledSaveDrain(y,w);return}else{y(!0);return}});else{this.throttledCallbacks.push(y);return}else y(!0)},I.prototype.loadDatabaseInternal=function(y,w){var A=w||function(B,j){if(B)throw B},N=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(j){if(typeof j=="string"){var X=!1;try{N.loadJSON(j,y||{}),X=!0}catch(re){A(re)}X&&(A(null),N.emit("loaded","database "+N.filename+" loaded"))}else{if(!j){A(null),N.emit("loaded","empty database "+N.filename+" loaded");return}if(j instanceof Error){A(j);return}if(typeof j=="object"){N.loadJSONObject(j,y||{}),A(null),N.emit("loaded","database "+N.filename+" loaded");return}A("unexpected adapter response : "+j)}}):A(new Error("persistenceAdapter not configured"))},I.prototype.loadDatabase=function(y,w){var A=this;if(!this.throttledSaves){this.loadDatabaseInternal(y,w);return}this.throttledSaveDrain(function(N){if(N){A.throttledSavePending=!0,A.loadDatabaseInternal(y,function(B){A.throttledCallbacks.length===0?A.throttledSavePending=!1:A.saveDatabase(),typeof w=="function"&&w(B)});return}else typeof w=="function"&&w(new Error("Unable to pause save throttling long enough to read database"))},y)},I.prototype.saveDatabaseInternal=function(y){var w=y||function(B){if(B)throw B},A=this;if(!this.persistenceAdapter){w(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var N;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(A.ignoreAutosave=!1,N){w(new Error("adapter error - getLokiCopy called more than once"));return}var j=A.copy({removeNonSerializable:!0});return N=A.collections.map(function(X){return[X.dirty,X.dirtyIds]}),A.collections.forEach(function(X){X.dirty=!1,X.dirtyIds=[]}),j},function(j){A.ignoreAutosave=!1,j&&N&&A.collections.forEach(function(X,re){var Ee=N[re];X.dirty=X.dirty||Ee[0],X.dirtyIds=X.dirtyIds.concat(Ee[1])}),w(j)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(j){A.autosaveClearFlags(),w(j)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(j){w(j)}))},I.prototype.saveDatabase=function(y){if(!this.throttledSaves){this.saveDatabaseInternal(y);return}if(this.throttledSavePending){this.throttledCallbacks.push(y);return}var w=this.throttledCallbacks;this.throttledCallbacks=[],w.unshift(y),this.throttledSavePending=!0;var A=this;this.saveDatabaseInternal(function(N){A.throttledSavePending=!1,w.forEach(function(B){typeof B=="function"&&setTimeout(function(){B(N)},1)}),A.throttledCallbacks.length>0&&A.saveDatabase()})},I.prototype.save=I.prototype.saveDatabase,I.prototype.deleteDatabase=function(y,w){var A=w||function(N,B){if(N)throw N};typeof y=="function"&&!w&&(A=y),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(B){A(B)}):A(new Error("persistenceAdapter not configured"))},I.prototype.autosaveDirty=function(){for(var y=0;y<this.collections.length;y++)if(this.collections[y].dirty)return!0;return!1},I.prototype.autosaveClearFlags=function(){for(var y=0;y<this.collections.length;y++)this.collections[y].dirty=!1},I.prototype.autosaveEnable=function(y,w){this.autosave=!0;var A=5e3,N=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(A=this.autosaveInterval),this.autosaveHandle=setInterval(function(){N.autosaveDirty()&&!N.ignoreAutosave&&N.saveDatabase(w)},A)},I.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function K(y,w){return this.collection=y,this.filteredrows=[],this.filterInitialized=!1,this}K.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},K.prototype.toJSON=function(){var y=this.copy();return y.collection=null,y},K.prototype.limit=function(y){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var w=new K(this.collection);return w.filteredrows=this.filteredrows.slice(0,y),w.filterInitialized=!0,w},K.prototype.offset=function(y){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var w=new K(this.collection);return w.filteredrows=this.filteredrows.slice(y),w.filterInitialized=!0,w},K.prototype.copy=function(){var y=new K(this.collection);return this.filteredrows.length>0&&(y.filteredrows=this.filteredrows.slice()),y.filterInitialized=this.filterInitialized,y},K.prototype.branch=K.prototype.copy,K.prototype.transform=function(y,w){var A,N,B=this;if(typeof y=="string"&&this.collection.transforms.hasOwnProperty(y)&&(y=this.collection.transforms[y]),typeof y!="object"||!Array.isArray(y))throw new Error("Invalid transform");for(typeof w<"u"&&(y=o.resolveTransformParams(y,w)),A=0;A<y.length;A++)switch(N=y[A],N.type){case"find":B.find(N.value);break;case"where":B.where(N.value);break;case"simplesort":B.simplesort(N.property,N.desc||N.options);break;case"compoundsort":B.compoundsort(N.value);break;case"sort":B.sort(N.value);break;case"limit":B=B.limit(N.value);break;case"offset":B=B.offset(N.value);break;case"map":B=B.map(N.value,N.dataOptions);break;case"eqJoin":B=B.eqJoin(N.joinData,N.leftJoinKey,N.rightJoinKey,N.mapFun,N.dataOptions);break;case"mapReduce":B=B.mapReduce(N.mapFunction,N.reduceFunction);break;case"update":B.update(N.value);break;case"remove":B.remove();break}return B},K.prototype.sort=function(y){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var w=function(A,N){return function(B,j){return A(N[B],N[j])}}(y,this.collection.data);return this.filteredrows.sort(w),this},K.prototype.simplesort=function(y,w){var A,N=10,B=this.collection.data.length,j=this.filteredrows.length,X=this.collection.binaryIndices.hasOwnProperty(y);if((typeof w>"u"||w===!1)&&(w={desc:!1}),w===!0&&(w={desc:!0}),j===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(y))return this.collection.ensureIndex(y),this.filteredrows=this.collection.binaryIndices[y].values.slice(0),w.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!w.disableIndexIntersect&&X&&(A=B/j,w.useJavascriptSorting&&(N=6),A<=N||w.forceIndexIntersect)){var re,Ee=this.filteredrows,_e={};for(re=0;re<j;re++)_e[Ee[re]]=!0;var We=this.collection.binaryIndices[y].values;return this.filteredrows=We.filter(function(Ze){return _e[Ze]}),w.desc&&this.filteredrows.reverse(),this}if(w.useJavascriptSorting)return this.sort(function(Ze,Ve){if(Ze[y]===Ve[y])return 0;if(Ze[y]>Ve[y])return 1;if(Ze[y]<Ve[y])return-1});var Xe=function(Ze,Ve,$t){var Kt,Zr,vr;return function(yt,Xr){return~Ze.indexOf(".")?(vr=Ze.split("."),Kt=o.getIn($t[yt],vr,!0),Zr=o.getIn($t[Xr],vr,!0)):(Kt=$t[yt][Ze],Zr=$t[Xr][Ze]),h(Kt,Zr,Ve)}}(y,w.desc,this.collection.data);return this.filteredrows.sort(Xe),this},K.prototype.compoundsort=function(y){if(y.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var w;if(y.length===1)return w=y[0],Array.isArray(w)?this.simplesort(w[0],w[1]):this.simplesort(w,!1);for(var A=0,N=y.length;A<N;A+=1)w=y[A],Array.isArray(w)||(y[A]=[w,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var B=function(j,X){return function(re,Ee){return v(j,X[re],X[Ee])}}(y,this.collection.data);return this.filteredrows.sort(B),this},K.prototype.findOr=function(y){var w=null,A=0,N=0,B=[],j=[],X=0;this.count();for(var re=0,Ee=y.length;re<Ee;re++)for(w=this.branch().find(y[re]).filteredrows,N=w.length,A=0;A<N;A++)X=w[A],j[X]===void 0&&(j[X]=!0,B.push(X));return this.filteredrows=B,this.filterInitialized=!0,this},K.prototype.$or=K.prototype.findOr;function q(y,w){if(y==="$regex")Array.isArray(w)?w=new RegExp(w[0],w[1]):w instanceof RegExp||(w=new RegExp(w));else if(typeof w=="object")for(var A in w)(A==="$regex"||typeof w[A]=="object")&&(w[A]=q(A,w[A]));return w}K.prototype.findAnd=function(y){for(var w=0,A=y.length;w<A;w++){if(this.count()===0)return this;this.find(y[w])}return this},K.prototype.$and=K.prototype.findAnd,K.prototype.find=function(y,w){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var A=y||"getAll",N,B,j,X,re,Ee,_e,We=!1,Xe=[],Ze=[],Ve=null;if(w=w||!1,typeof A=="object"){for(N in A)X={},X[N]=A[N],Ze.push(X),t.call(A,N)&&(B=N,j=A[N]);if(Ze.length>1)return this.find({$and:Ze},w)}if(!B||A==="getAll")return w&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(B==="$and"||B==="$or")return this[B](j),w&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(j===null||typeof j!="object"||j instanceof Date)re="$eq",Ee=j;else if(typeof j=="object"){for(_e in j)if(t.call(j,_e)){re=_e,Ee=j[_e];break}}else throw new Error("Do not know what you want to do.");(re==="$regex"||typeof Ee=="object")&&(Ee=q(re,Ee));var $t=B.indexOf(".")!==-1,Kt=!this.filterInitialized;Kt&&this.collection.binaryIndices[B]&&k[re]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(B),We=!0,Ve=this.collection.binaryIndices[B]),!We&&re==="$in"&&Array.isArray(Ee)&&typeof Set<"u"&&(Ee=new Set(Ee),re="$inSet");var Zr=x[re],vr=this.collection.data,yt=0,Xr=0,gi,Bi=0,un;if(this.filterInitialized){if(gi=this.filteredrows,Xr=gi.length,$t){for(B=B.split("."),yt=0;yt<Xr;yt++)if(Bi=gi[yt],un=vr[Bi],g(un,B,Zr,Ee,un)&&(Xe.push(Bi),w))return this.filteredrows=Xe,this}else for(yt=0;yt<Xr;yt++)if(Bi=gi[yt],un=vr[Bi],Zr(un[B],Ee,un)&&(Xe.push(Bi),w))return this.filteredrows=Xe,this}else if(We){var Bs=this.collection.calculateRange(re,B,Ee);if(re!=="$in"){for(yt=Bs[0];yt<=Bs[1];yt++)if(k[re]!==!0){if(k[re](o.getIn(vr[Ve.values[yt]],B,$t),Ee)&&(Xe.push(Ve.values[yt]),w))return this.filteredrows=Xe,this.filterInitialized=!0,this}else if(Xe.push(Ve.values[yt]),w)return this.filteredrows=Xe,this.filterInitialized=!0,this}else for(yt=0,Xr=Bs.length;yt<Xr;yt++)if(Xe.push(Ve.values[Bs[yt]]),w)return this.filteredrows=Xe,this.filterInitialized=!0,this}else if(Xr=vr.length,$t){for(B=B.split("."),yt=0;yt<Xr;yt++)if(un=vr[yt],g(un,B,Zr,Ee,un)&&(Xe.push(yt),w))return this.filteredrows=Xe,this.filterInitialized=!0,this}else for(yt=0;yt<Xr;yt++)if(un=vr[yt],Zr(un[B],Ee,un)&&(Xe.push(yt),w))return this.filteredrows=Xe,this.filterInitialized=!0,this;return this.filteredrows=Xe,this.filterInitialized=!0,this},K.prototype.where=function(y){var w,A=[];if(typeof y=="function")w=y;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var N=this.filteredrows.length;N--;)w(this.collection.data[this.filteredrows[N]])===!0&&A.push(this.filteredrows[N]);return this.filteredrows=A,this}else{for(var B=this.collection.data.length;B--;)w(this.collection.data[B])===!0&&A.push(B);return this.filteredrows=A,this.filterInitialized=!0,this}}catch(j){throw j}},K.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},K.prototype.data=function(y){var w=[],A=this.collection.data,N,B,j,X;if(y=y||{},y.removeMeta&&!y.forceClones&&(y.forceClones=!0,y.forceCloneMethod=y.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&(y.forceClones=!0,y.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||y.forceClones){for(B=A.length,X=y.forceCloneMethod||this.collection.cloneMethod,j=0;j<B;j++)N=$(A[j],X),y.removeMeta&&(delete N.$loki,delete N.meta),w.push(N);return w}else return A.slice();else this.filterInitialized=!0;var re=this.filteredrows;if(B=re.length,this.collection.cloneObjects||y.forceClones)for(X=y.forceCloneMethod||this.collection.cloneMethod,j=0;j<B;j++)N=$(A[re[j]],X),y.removeMeta&&(delete N.$loki,delete N.meta),w.push(N);else for(j=0;j<B;j++)w.push(A[re[j]]);return w},K.prototype.update=function(y){if(typeof y!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var w,A=this.filteredrows.length,N=this.collection.data,B=0;B<A;B++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(w=$(N[this.filteredrows[B]],this.collection.cloneMethod),y(w),this.collection.update(w)):(y(N[this.filteredrows[B]]),this.collection.update(N[this.filteredrows[B]]));return this},K.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},K.prototype.mapReduce=function(y,w){try{return w(this.data().map(y))}catch(A){throw A}},K.prototype.eqJoin=function(y,w,A,N,B){var j=[],X,re=[],Ee,_e,We=[],Xe=typeof w=="function",Ze=typeof A=="function",Ve={};if(j=this.data(B),X=j.length,y instanceof M)re=y.chain().data(B);else if(y instanceof K)re=y.data(B);else if(Array.isArray(y))re=y;else throw new TypeError("joinData needs to be an array or result set");Ee=re.length;for(var $t=0;$t<Ee;$t++)_e=Ze?A(re[$t]):re[$t][A],Ve[_e]=re[$t];N||(N=function(Zr,vr){return{left:Zr,right:vr}});for(var Kt=0;Kt<X;Kt++)_e=Xe?w(j[Kt]):j[Kt][w],We.push(N(j[Kt],Ve[_e]||{}));return this.collection=new M("joinData"),this.collection.insert(We),this.filteredrows=[],this.filterInitialized=!1,this},K.prototype.map=function(y,w){var A=this.data(w).map(y);return this.collection=new M("mappedData"),this.collection.insert(A),this.filteredrows=[],this.filterInitialized=!1,this};function W(y,w,A){this.collection=y,this.name=w,this.rebuildPending=!1,this.options=A||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new K(y),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}W.prototype=new O,W.prototype.constructor=W,W.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},W.prototype.rematerialize=function(y){var w,A,N;y=y||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new K(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var B=Object.isFrozen(this.filterPipeline);if(y.hasOwnProperty("removeWhereFilters"))for(B&&(this.filterPipeline=this.filterPipeline.slice()),w=this.filterPipeline.length,A=w;A--;)this.filterPipeline[A].type==="where"&&(A!==this.filterPipeline.length-1&&(this.filterPipeline[A]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var j=this.filterPipeline;for(this.filterPipeline=[],w=j.length,N=0;N<w;N++)this.applyFind(j[N].val,j[N].uid);return B&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},W.prototype.branchResultset=function(y,w){var A=this.resultset.branch();return typeof y>"u"?A:A.transform(y,w)},W.prototype.toJSON=function(){var y=new W(this.collection,this.name,this.options);return y.resultset=this.resultset,y.resultdata=[],y.resultsdirty=!0,y.filterPipeline=this.filterPipeline,y.sortFunction=this.sortFunction,y.sortCriteria=this.sortCriteria,y.sortCriteriaSimple=this.sortCriteriaSimple||null,y.sortDirty=this.sortDirty,y.collection=null,y},W.prototype.removeFilters=function(y){y=y||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var w=Object.isFrozen(this.filterPipeline),A=this.filterPipeline.length>0;this.filterPipeline=[],w&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,y.queueSortPhase===!0&&this.queueSortPhase(),A&&this.emit("filter")},W.prototype.applySort=function(y){return this.sortFunction=y,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},W.prototype.applySimpleSort=function(y,w){return this.sortCriteriaSimple={propname:y,options:w||!1},this.collection.disableFreeze||n(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},W.prototype.applySortCriteria=function(y){return this.sortCriteria=y,this.collection.disableFreeze||n(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},W.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},W.prototype.commit=function(){return this.cachedresultset=null,this},W.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},W.prototype._indexOfFilterWithId=function(y){if(typeof y=="string"||typeof y=="number"){for(var w=0,A=this.filterPipeline.length;w<A;w+=1)if(y===this.filterPipeline[w].uid)return w}return-1},W.prototype._addFilter=function(y){var w=Object.isFrozen(this.filterPipeline);w&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||n(y),this.filterPipeline.push(y),w&&Object.freeze(this.filterPipeline),this.resultset[y.type](y.val)},W.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var y=this.filterPipeline,w=Object.isFrozen(y);this.filterPipeline=[];for(var A=0,N=y.length;A<N;A+=1)this._addFilter(y[A]);return w&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},W.prototype.applyFilter=function(y){var w=this._indexOfFilterWithId(y.uid);if(w>=0){var A=Object.isFrozen(this.filterPipeline);return A&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[w]=y,A&&(i(y),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(y),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},W.prototype.applyFind=function(y,w){return this.applyFilter({type:"find",val:y,uid:w}),this},W.prototype.applyWhere=function(y,w){return this.applyFilter({type:"where",val:y,uid:w}),this},W.prototype.removeFilter=function(y){var w=this._indexOfFilterWithId(y);if(w<0)throw new Error("Dynamic view does not contain a filter with ID: "+y);var A=Object.isFrozen(this.filterPipeline);return A&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(w,1),A&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},W.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},W.prototype.data=function(y){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(y)},W.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var y=this;setTimeout(function(){y.rebuildPending&&(y.rebuildPending=!1,y.emit("rebuild",y))},this.options.minRebuildInterval)}},W.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var y=this;this.options.sortPriority==="active"?setTimeout(function(){y.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},W.prototype.performSortPhase=function(y){!this.sortDirty&&!this.resultsdirty||(y=y||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),y.suppressRebuildEvent||this.emit("rebuild",this))},W.prototype.evaluateDocument=function(y,w){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var A=this.resultset.filteredrows,N=w?-1:A.indexOf(+y),B=A.length,j=new K(this.collection);j.filteredrows=[y],j.filterInitialized=!0;for(var X,re=0,Ee=this.filterPipeline.length;re<Ee;re++)X=this.filterPipeline[re],j[X.type](X.val);var _e=j.filteredrows.length===0?-1:0;if(!(N===-1&&_e===-1)){if(N===-1&&_e!==-1){A.push(y),this.options.persistent&&this.resultdata.push(this.collection.data[y]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(N!==-1&&_e===-1){N<B-1?(A.splice(N,1),this.options.persistent&&this.resultdata.splice(N,1)):(A.length=B-1,this.options.persistent&&(this.resultdata.length=B-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(N!==-1&&_e!==-1){this.options.persistent&&(this.resultdata[N]=this.collection.data[y]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},W.prototype.removeDocument=function(y){var w,A,N,B={},j={},X=[],re=this.resultset,Ee=this.resultset.filteredrows,_e=Ee.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray(y)||(y=[y]),N=y.length,A=0;A<N;A++)B[y[A]]=!0;for(w=0;w<_e;w++)B[Ee[w]]&&(j[w]=!0);Object.keys(j).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(Xe,Ze){return!j[Ze]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(Xe,Ze){return!j[Ze]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var We=function(Xe){return function(Ze){return Ze<re.filteredrows[Xe]}};for(_e=re.filteredrows.length,w=0;w<_e;w++)X=y.filter(We(w)),re.filteredrows[w]-=X.length},W.prototype.mapReduce=function(y,w){try{return w(this.data().map(y))}catch(A){throw A}};function M(y,w){this.name=y,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=y,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var A=this;w=w||{},w.hasOwnProperty("unique")&&(Array.isArray(w.unique)||(w.unique=[w.unique]),w.unique.forEach(function(_e){A.uniqueNames.push(_e)})),w.hasOwnProperty("exact")&&w.exact.forEach(function(_e){A.constraints.exact[_e]=new fe(_e)}),this.adaptiveBinaryIndices=w.hasOwnProperty("adaptiveBinaryIndices")?w.adaptiveBinaryIndices:!0,this.transactional=w.hasOwnProperty("transactional")?w.transactional:!1,this.cloneObjects=w.hasOwnProperty("clone")?w.clone:!1,this.cloneMethod=w.hasOwnProperty("cloneMethod")?w.cloneMethod:"parse-stringify",this.asyncListeners=w.hasOwnProperty("asyncListeners")?w.asyncListeners:!1,this.disableMeta=w.hasOwnProperty("disableMeta")?w.disableMeta:!1,this.disableChangesApi=w.hasOwnProperty("disableChangesApi")?w.disableChangesApi:!0,this.disableDeltaChangesApi=w.hasOwnProperty("disableDeltaChangesApi")?w.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=w.hasOwnProperty("autoupdate")?w.autoupdate:!1,this.serializableIndices=w.hasOwnProperty("serializableIndices")?w.serializableIndices:!0,this.disableFreeze=w.hasOwnProperty("disableFreeze")?w.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(w.ttl||-1,w.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var N=[];if(w&&w.indices)if(Object.prototype.toString.call(w.indices)==="[object Array]")N=w.indices;else if(typeof w.indices=="string")N=[w.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var B=0;B<N.length;B++)this.ensureIndex(N[B]);function j(_e){var We=typeof Set=="function"?new Set:[];We.add||(We.add=function(Xe){return this.indexOf(Xe)===-1&&this.push(Xe),this}),_e.forEach(function(Xe){We.add(Xe.object)}),We.forEach(function(Xe){if(!t.call(Xe,"$loki"))return A.removeAutoUpdateObserver(Xe);try{A.update(Xe)}catch{}})}this.observerCallback=j;function X(_e,We){return We?re(We,_e):JSON.parse(JSON.stringify(_e))}this.getChangeDelta=X;function re(_e,We){var Xe=We!==null&&typeof We=="object"?Object.keys(We):null;if(Xe&&Xe.length&&["string","boolean","number"].indexOf(typeof We)<0){for(var Ze={},Ve=0;Ve<Xe.length;Ve++){var $t=Xe[Ve];if(We.hasOwnProperty($t))if(!_e.hasOwnProperty($t)||A.uniqueNames.indexOf($t)>=0||$t=="$loki"||$t=="meta")Ze[$t]=We[$t];else{var Kt=re(_e[$t],We[$t]);typeof Kt<"u"&&Kt!={}&&(Ze[$t]=Kt)}}return Object.keys(Ze).length===0?void 0:Ze}else return _e===We?void 0:We}this.getObjectDelta=re;function Ee(){A.changes=[]}this.getChanges=function(){return A.changes},this.flushChanges=Ee,this.setChangesApi=function(_e){A.disableChangesApi=!_e,_e||(A.disableDeltaChangesApi=!1)},this.on("delete",function(We){A.disableChangesApi||A.createChange(A.name,"R",We)}),this.on("warning",function(_e){A.lokiConsoleWrapper.warn(_e)}),Ee()}M.prototype=new O,M.prototype.contructor=M,M.prototype.createChange=function(y,w,A,N){this.changes.push({name:y,operation:w,obj:w=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(A,N):JSON.parse(JSON.stringify(A))})},M.prototype.insertMeta=function(y){var w,A;if(!(this.disableMeta||!y)){if(Array.isArray(y)){for(w=y.length,A=0;A<w;A++)y[A].hasOwnProperty("meta")||(y[A].meta={}),y[A].meta.created=new Date().getTime(),y[A].meta.revision=0;return}y.meta||(y.meta={}),y.meta.created=new Date().getTime(),y.meta.revision=0}},M.prototype.updateMeta=function(y){return this.disableMeta||!y||(this.disableFreeze||(y=s(y),y.meta=s(y.meta)),y.meta.updated=new Date().getTime(),y.meta.revision+=1),y},M.prototype.createInsertChange=function(y){this.createChange(this.name,"I",y)},M.prototype.createUpdateChange=function(y,w){this.createChange(this.name,"U",y,w)},M.prototype.insertMetaWithChange=function(y){this.insertMeta(y),this.createInsertChange(y)},M.prototype.updateMetaWithChange=function(y,w,A){return y=this.updateMeta(y,A),this.createUpdateChange(y,w),y},M.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},M.prototype.addAutoUpdateObserver=function(y){!this.autoupdate||typeof Object.observe!="function"||Object.observe(y,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},M.prototype.removeAutoUpdateObserver=function(y){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve(y,this.observerCallback)},M.prototype.addTransform=function(y,w){if(this.transforms.hasOwnProperty(y))throw new Error("a transform by that name already exists");this.transforms[y]=w},M.prototype.getTransform=function(y){return this.transforms[y]},M.prototype.setTransform=function(y,w){this.transforms[y]=w},M.prototype.removeTransform=function(y){delete this.transforms[y]},M.prototype.byExample=function(y){var w,A,N;N=[];for(w in y)y.hasOwnProperty(w)&&N.push((A={},A[w]=y[w],A));return{$and:N}},M.prototype.findObject=function(y){return this.findOne(this.byExample(y))},M.prototype.findObjects=function(y){return this.find(this.byExample(y))},M.prototype.ttlDaemonFuncGen=function(){var y=this,w=this.ttl.age;return function(){var N=Date.now(),B=y.chain().where(function(X){var re=X.meta.updated||X.meta.created,Ee=N-re;return w<Ee});B.remove()}},M.prototype.setTTL=function(y,w){y<0?clearInterval(this.ttl.daemon):(this.ttl.age=y,this.ttl.ttlInterval=w,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),w))},M.prototype.prepareFullDocIndex=function(){for(var y=this.data.length,w=new Array(y),A=0;A<y;A+=1)w[A]=A;return w},M.prototype.configureOptions=function(y){y=y||{},y.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=y.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},M.prototype.ensureIndex=function(y,w){if(typeof w>"u"&&(w=!1),y==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[y]&&!w&&!this.binaryIndices[y].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty(y)&&!w)){var A={name:y,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[y]=A;var N=function(B,j){var X,re,Ee=~B.indexOf(".")?B.split("."):!1;return function(_e,We){if(Ee?(X=o.getIn(j[_e],Ee,!0),re=o.getIn(j[We],Ee,!0)):(X=j[_e][B],re=j[We][B]),X!==re){if(a.lt(X,re,!1))return-1;if(a.gt(X,re,!1))return 1}return 0}}(y,this.data);A.values.sort(N),A.dirty=!1,this.dirty=!0}},M.prototype.checkAllIndexes=function(y){var w,A=this.binaryIndices,N=[],B;for(w in A)t.call(A,w)&&(B=this.checkIndex(w,y),B||N.push(w));return N},M.prototype.checkIndex=function(y,w){w=w||{},w.randomSamplingFactor&&w.randomSampling!==!1&&(w.randomSampling=!0),w.randomSamplingFactor=w.randomSamplingFactor||.1,(w.randomSamplingFactor<0||w.randomSamplingFactor>1)&&(w.randomSamplingFactor=.1);var A=!0,N,B,j,X,re;if(!this.binaryIndices.hasOwnProperty(y))throw new Error("called checkIndex on property without an index: "+y);if(this.adaptiveBinaryIndices||this.ensureIndex(y),re=this.binaryIndices[y].values,X=re.length,X!==this.data.length)return w.repair&&this.ensureIndex(y,!0),!1;if(X===0)return!0;var Ee=y.indexOf(".")!==-1;if(X===1)A=re[0]===0;else if(w.randomSampling){if(x.$lte(o.getIn(this.data[re[0]],y,Ee),o.getIn(this.data[re[1]],y,Ee))||(A=!1),x.$lte(o.getIn(this.data[re[X-2]],y,Ee),o.getIn(this.data[re[X-1]],y,Ee))||(A=!1),A){for(B=Math.floor((X-1)*w.randomSamplingFactor),N=0;N<B-1;N++)if(j=Math.floor(Math.random()*(X-1)),!x.$lte(o.getIn(this.data[re[j]],y,Ee),o.getIn(this.data[re[j+1]],y,Ee))){A=!1;break}}}else for(N=0;N<X-1;N++)if(!x.$lte(o.getIn(this.data[re[N]],y,Ee),o.getIn(this.data[re[N+1]],y,Ee))){A=!1;break}return!A&&w.repair&&this.ensureIndex(y,!0),A},M.prototype.getBinaryIndexValues=function(y){var w,A=this.binaryIndices[y].values,N=[];for(w=0;w<A.length;w++)N.push(o.getIn(this.data[A[w]],y,!0));return N},M.prototype.getUniqueIndex=function(y,w){var A=this.constraints.unique[y];return!A&&w?this.ensureUniqueIndex(y):A},M.prototype.ensureUniqueIndex=function(y){var w=this.constraints.unique[y];return w||this.uniqueNames.indexOf(y)==-1&&this.uniqueNames.push(y),this.constraints.unique[y]=w=new ye(y),this.data.forEach(function(A){w.set(A)}),w},M.prototype.ensureAllIndexes=function(y){var w,A=this.binaryIndices;for(w in A)t.call(A,w)&&this.ensureIndex(w,y)},M.prototype.flagBinaryIndexesDirty=function(){var y,w=this.binaryIndices;for(y in w)t.call(w,y)&&(w[y].dirty=!0)},M.prototype.flagBinaryIndexDirty=function(y){this.binaryIndices[y]&&(this.binaryIndices[y].dirty=!0)},M.prototype.count=function(y){return y?this.chain().find(y).filteredrows.length:this.data.length},M.prototype.ensureId=function(){if(!this.idIndex){var y=this.data,w=0,A=y.length,N=new Array(A);for(w;w<A;w++)N[w]=y[w].$loki;this.idIndex=N}},M.prototype.ensureIdAsync=function(y){this.async(function(){this.ensureId()},y)},M.prototype.addDynamicView=function(y,w){var A=new W(this,y,w);return this.DynamicViews.push(A),A},M.prototype.removeDynamicView=function(y){this.DynamicViews=this.DynamicViews.filter(function(w){return w.name!==y})},M.prototype.getDynamicView=function(y){for(var w=0;w<this.DynamicViews.length;w++)if(this.DynamicViews[w].name===y)return this.DynamicViews[w];return null},M.prototype.findAndUpdate=function(y,w){typeof y=="function"?this.updateWhere(y,w):this.chain().find(y).update(w)},M.prototype.findAndRemove=function(y){this.chain().find(y).remove()},M.prototype.insert=function(y,w){if(!Array.isArray(y))return this.insertOne(y);var A,N=[],B=w&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;B&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",y);for(var j=0,X=y.length;j<X;j++){if(A=this.insertOne(y[j],!0),!A)return;N.push(A)}}finally{B&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",N),N=this.cloneObjects?$(N,this.cloneMethod):N,N.length===1?N[0]:N},M.prototype.insertOne=function(y,w){var A=null,N;if(typeof y!="object"?A=new TypeError("Document needs to be an object"):y===null&&(A=new TypeError("Object cannot be null")),A!==null)throw this.emit("error",A),A;var B=this.cloneObjects?$(y,this.cloneMethod):y;if(this.disableFreeze||(B=s(B)),this.disableMeta||(typeof B.meta>"u"?B.meta={revision:0,created:0}:this.disableFreeze||(B.meta=s(B.meta))),w||this.emit("pre-insert",B),!!this.add(B))return this.disableChangesApi?this.insertMeta(B):this.insertMetaWithChange(B),this.disableFreeze||n(B),N=this.cloneObjects?$(B,this.cloneMethod):B,w||this.emit("insert",N),this.addAutoUpdateObserver(N),N},M.prototype.clear=function(y){var w=this;if(y=y||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},y.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var A=Object.keys(this.binaryIndices);A.forEach(function(N){w.binaryIndices[N].dirty=!1,w.binaryIndices[N].values=[]})}},M.prototype.update=function(y){var w,A,N;if(Array.isArray(y)){N=y.length,w=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,w&&(this.adaptiveBinaryIndices=!1);try{for(A=0;A<N;A+=1)this.update(y[A])}finally{w&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!t.call(y,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var B=this.get(y.$loki,!0),j,X,re,Ee=this;if(!B)throw new Error("Trying to update a document not in collection.");j=B[0],re=B[1],X=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?$(y,this.cloneMethod):y,this.emit("pre-update",y),this.uniqueNames.forEach(function(Ve){Ee.getUniqueIndex(Ve,!0).update(j,X)}),this.data[re]=X,X!==y&&this.addAutoUpdateObserver(y);for(var _e=0;_e<this.DynamicViews.length;_e++)this.DynamicViews[_e].evaluateDocument(re,!1);var We;if(this.adaptiveBinaryIndices){var Xe=this.binaryIndices;for(We in Xe)this.adaptiveBinaryIndexUpdate(re,We)}else this.flagBinaryIndexesDirty();this.idIndex[re]=X.$loki,this.isIncremental&&this.dirtyIds.push(X.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?X=this.updateMeta(X):X=this.updateMetaWithChange(X,j),this.disableFreeze||n(X);var Ze;return this.cloneObjects?Ze=$(X,this.cloneMethod):Ze=X,this.emit("update",Ze,j),Ze}catch(Ve){throw this.rollback(),this.lokiConsoleWrapper.error(Ve.message),this.emit("error",Ve),Ve}},M.prototype.add=function(y){if(typeof y!="object")throw new TypeError("Object being added needs to be an object");if(typeof y.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var w=this.maxId;y.$loki=w,this.disableMeta||(y.meta.version=0);for(var A=0,N=this.uniqueNames.length;A<N;A++)this.getUniqueIndex(this.uniqueNames[A],!0).set(y);this.idIndex&&this.idIndex.push(w),this.isIncremental&&this.dirtyIds.push(w),this.data.push(y);var B=this.data.length-1,j=this.DynamicViews.length;for(A=0;A<j;A++)this.DynamicViews[A].evaluateDocument(B,!0);if(this.adaptiveBinaryIndices){var X=this.binaryIndices;for(var re in X)this.adaptiveBinaryIndexInsert(B,re)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?$(y,this.cloneMethod):y}catch(Ee){throw this.rollback(),this.lokiConsoleWrapper.error(Ee.message),this.emit("error",Ee),Ee}},M.prototype.updateWhere=function(y,w){var A=this.where(y),N=0,B;try{for(N;N<A.length;N++)B=w(A[N]),this.update(B)}catch(j){this.rollback(),this.lokiConsoleWrapper.error(j.message)}},M.prototype.removeWhere=function(y){var w;typeof y=="function"?(w=this.data.filter(y),this.remove(w)):this.chain().find(y).remove()},M.prototype.removeDataOnly=function(){this.remove(this.data.slice())},M.prototype.removeBatchByPositions=function(y){var w=y.length,A={},N,B,j,X=Object.keys(this.binaryIndices).length,re=Object.keys(this.constraints.unique).length,Ee=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,_e,We=this;try{for(this.startTransaction(),this.ensureId(),j=0;j<w;j++)A[this.idIndex[y[j]]]=!0;if(N=this.DynamicViews.length,N>0||X>0||re>0){if(N>0)for(B=0;B<N;B++)this.DynamicViews[B].removeDocument(y);if(this.adaptiveBinaryIndices&&!Ee){var Xe,Ze=this.binaryIndices;for(Xe in Ze)this.adaptiveBinaryIndexRemove(y,Xe)}else this.flagBinaryIndexesDirty();re&&this.uniqueNames.forEach(function(Ve){var $t=We.getUniqueIndex(Ve);if($t)for(j=0;j<w;j++)_e=We.data[y[j]],_e[Ve]!==null&&_e[Ve]!==void 0&&$t.remove(_e[Ve])})}if(!this.disableChangesApi||this.events.delete.length>1)for(j=0;j<w;j++)this.emit("delete",this.data[y[j]]);if(this.data=this.data.filter(function(Ve){return!A[Ve.$loki]}),this.isIncremental)for(j=0;j<w;j++)this.dirtyIds.push(this.idIndex[y[j]]);this.idIndex=this.idIndex.filter(function(Ve){return!A[Ve]}),this.adaptiveBinaryIndices&&Ee&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(Ve){return this.rollback(),Ee&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(Ve.message),this.emit("error",Ve),null}},M.prototype.removeBatch=function(y){var w=y.length,A=this.data.length,N,B={},j=[];for(N=0;N<A;N++)B[this.data[N].$loki]=N;for(N=0;N<w;N++)typeof y[N]=="object"?j.push(B[y[N].$loki]):j.push(B[y[N]]);this.removeBatchByPositions(j)},M.prototype.remove=function(y){if(typeof y=="number"&&(y=this.get(y)),typeof y!="object")throw new Error("Parameter is not an object");if(Array.isArray(y)){this.removeBatch(y);return}if(!t.call(y,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var w=this.get(y.$loki,!0),A=w[1],N=this;this.uniqueNames.forEach(function(re){if(y[re]!==null&&typeof y[re]<"u"){var Ee=N.getUniqueIndex(re);Ee&&Ee.remove(y[re])}});for(var B=0;B<this.DynamicViews.length;B++)this.DynamicViews[B].removeDocument(A);if(this.adaptiveBinaryIndices){var j,X=this.binaryIndices;for(j in X)this.adaptiveBinaryIndexRemove(A,j)}else this.flagBinaryIndexesDirty();return this.data.splice(A,1),this.removeAutoUpdateObserver(y),this.idIndex.splice(A,1),this.isIncremental&&this.dirtyIds.push(y.$loki),this.commit(),this.dirty=!0,this.emit("delete",w[0]),this.disableFreeze||(y=s(y)),delete y.$loki,delete y.meta,this.disableFreeze||i(y),y}catch(re){return this.rollback(),this.lokiConsoleWrapper.error(re.message),this.emit("error",re),null}},M.prototype.get=function(y,w){this.idIndex||this.ensureId();var A=w||!1,N=this.idIndex,B=N.length-1,j=0,X=j+B>>1;if(y=typeof y=="number"?y:parseInt(y,10),isNaN(y))throw new TypeError("Passed id is not an integer");for(;N[j]<N[B];)X=j+B>>1,N[X]<y?j=X+1:B=X;return B===j&&N[j]===y?A?[this.data[j],j]:this.data[j]:null},M.prototype.getBinaryIndexPosition=function(y,w){var A=o.getIn(this.data[y],w,!0),N=this.binaryIndices[w].values,B=this.calculateRange("$eq",w,A);if(B[0]===0&&B[1]===-1)return null;for(var j=B[0],X=B[1],re=j;re<=X;re++)if(N[re]===y)return re;return null},M.prototype.adaptiveBinaryIndexInsert=function(y,w){var A=w.indexOf(".")!==-1,N=this.binaryIndices[w].values,B=o.getIn(this.data[y],w,A);this.serializableIndices===!0&&B instanceof Date&&(this.data[y][w]=B.getTime(),B=o.getIn(this.data[y],w));var j=N.length===0?0:this.calculateRangeStart(w,B,!0,A);this.binaryIndices[w].values.splice(j,0,y)},M.prototype.adaptiveBinaryIndexUpdate=function(y,w){var A,N=this.binaryIndices[w].values,B=N.length;for(A=0;A<B&&N[A]!==y;A++);this.binaryIndices[w].values.splice(A,1),this.adaptiveBinaryIndexInsert(y,w)},M.prototype.adaptiveBinaryIndexRemove=function(y,w,A){var N=this.binaryIndices[w],B,j,X,re,Ee={},_e,We,Xe;if(Array.isArray(y))if(re=y.length,re===1)y=y[0];else{for(X=0;X<re;X++)Ee[y[X]]=!0;if(N.values=N.values.filter(function(Ve){return!Ee[Ve]}),A===!0)return;var Ze=y.slice();for(Ze.sort(function(Ve,$t){return Ve-$t}),B=N.values.length,j=0;j<B;j++){for(_e=N.values[j],We=0,X=0;X<re&&_e>Ze[X];X++)We++;N.values[j]-=We}return}if(Xe=this.getBinaryIndexPosition(y,w),Xe===null)return null;if(N.values.splice(Xe,1),A!==!0)for(B=N.values.length,j=0;j<B;j++)N.values[j]>y&&N.values[j]--},M.prototype.calculateRangeStart=function(y,w,A,N){var B=this.data,j=this.binaryIndices[y].values,X=0,re=j.length-1,Ee=0;if(j.length===0)return-1;for(o.getIn(B[j[X]],y,N),o.getIn(B[j[re]],y,N);X<re;)Ee=X+re>>1,a.lt(o.getIn(B[j[Ee]],y,N),w,!1)?X=Ee+1:re=Ee;var _e=X;return a.aeq(w,o.getIn(B[j[_e]],y,N))?_e:a.lt(w,o.getIn(B[j[_e]],y,N),!1)?A?_e:_e-1:A?_e+1:_e},M.prototype.calculateRangeEnd=function(y,w,A){var N=this.data,B=this.binaryIndices[y].values,j=0,X=B.length-1,re=0;if(B.length===0)return-1;for(o.getIn(N[B[j]],y,A),o.getIn(N[B[X]],y,A);j<X;)re=j+X>>1,a.lt(w,o.getIn(N[B[re]],y,A),!1)?X=re:j=re+1;var Ee=X;return a.aeq(w,o.getIn(N[B[Ee]],y,A))?Ee:a.gt(w,o.getIn(N[B[Ee]],y,A),!1)?Ee+1:a.aeq(w,o.getIn(N[B[Ee-1]],y,A))?Ee-1:Ee},M.prototype.calculateRange=function(y,w,A){var N=this.data,B=this.binaryIndices[w].values,j=0,X=B.length-1,re,Ee,_e;if(N.length===0)return[0,-1];var We=w.indexOf(".")!==-1,Xe=o.getIn(N[B[j]],w,We),Ze=o.getIn(N[B[X]],w,We);switch(y){case"$eq":case"$aeq":if(a.lt(A,Xe,!1)||a.gt(A,Ze,!1))return[0,-1];break;case"$dteq":if(a.lt(A,Xe,!1)||a.gt(A,Ze,!1))return[0,-1];break;case"$gt":if(a.gt(A,Ze,!0))return[0,-1];if(a.gt(Xe,A,!1))return[j,X];break;case"$gte":if(a.gt(A,Ze,!1))return[0,-1];if(a.gt(Xe,A,!0))return[j,X];break;case"$lt":if(a.lt(A,Xe,!0))return[0,-1];if(a.lt(Ze,A,!1))return[j,X];break;case"$lte":if(a.lt(A,Xe,!1))return[0,-1];if(a.lt(Ze,A,!0))return[j,X];break;case"$between":return a.gt(A[0],Ze,!1)?[0,-1]:a.lt(A[1],Xe,!1)?[0,-1]:(re=this.calculateRangeStart(w,A[0],!1,We),_e=this.calculateRangeEnd(w,A[1],We),re<0&&re++,_e>X&&_e--,a.gt(o.getIn(N[B[re]],w,We),A[0],!0)||re++,a.lt(o.getIn(N[B[_e]],w,We),A[1],!0)||_e--,_e<re?[0,-1]:[re,_e]);case"$in":for(var Ve=[],$t=[],Kt=0,Zr=A.length;Kt<Zr;Kt++)for(var vr=this.calculateRange("$eq",w,A[Kt]),yt=vr[0];yt<=vr[1];yt++)Ve[yt]===void 0&&(Ve[yt]=!0,$t.push(yt));return $t}switch(y){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":re=this.calculateRangeStart(w,A,!1,We),Ee=o.getIn(N[B[re]],w,We);break}switch(y){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":_e=this.calculateRangeEnd(w,A,We),o.getIn(N[B[_e]],w,We);break}switch(y){case"$eq":case"$aeq":case"$dteq":return a.aeq(Ee,A)?[re,_e]:[0,-1];case"$gt":return a.aeq(o.getIn(N[B[_e]],w,We),A)?[_e+1,X]:[_e,X];case"$gte":return a.aeq(o.getIn(N[B[re]],w,We),A)?[re,X]:[re+1,X];case"$lt":return a.aeq(o.getIn(N[B[re]],w,We),A)?[j,re-1]:[j,re];case"$lte":return a.aeq(o.getIn(N[B[_e]],w,We),A)?[j,_e]:[j,_e-1];default:return[0,N.length-1]}},M.prototype.by=function(y,w){var A;if(w===void 0)return A=this,function(B){return A.by(y,B)};var N=this.getUniqueIndex(y,!0).get(w);return this.cloneObjects?$(N,this.cloneMethod):N},M.prototype.findOne=function(y){y=y||{};var w=this.chain().find(y,!0).data();return Array.isArray(w)&&w.length===0?null:this.cloneObjects?$(w[0],this.cloneMethod):w[0]},M.prototype.chain=function(y,w){var A=new K(this);return typeof y>"u"?A:A.transform(y,w)},M.prototype.find=function(y){return this.chain().find(y).data()},M.prototype.findOneUnindexed=function(y,w){for(var A=this.data.length,N;A--;)if(o.getIn(this.data[A],y,!0)===w)return N=this.data[A],N;return null},M.prototype.startTransaction=function(){if(this.transactional){this.cachedData=$(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var y=0;y<this.DynamicViews.length;y++)this.DynamicViews[y].startTransaction()}},M.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var y=0;y<this.DynamicViews.length;y++)this.DynamicViews[y].commit()}},M.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var y=0;y<this.DynamicViews.length;y++)this.DynamicViews[y].rollback()}},M.prototype.async=function(y,w){setTimeout(function(){if(typeof y=="function")y(),w();else throw new TypeError("Argument passed for async execution is not a function")},0)},M.prototype.where=function(y){return this.chain().where(y).data()},M.prototype.mapReduce=function(y,w){try{return w(this.data.map(y))}catch(A){throw A}},M.prototype.eqJoin=function(y,w,A,N,B){return new K(this).eqJoin(y,w,A,N,B)},M.prototype.stages={},M.prototype.getStage=function(y){return this.stages[y]||(this.stages[y]={}),this.stages[y]},M.prototype.commitLog=[],M.prototype.stage=function(y,w){var A=JSON.parse(JSON.stringify(w));return this.getStage(y)[w.$loki]=A,A},M.prototype.commitStage=function(y,w){var A=this.getStage(y),N,B=new Date().getTime();for(N in A)this.update(A[N]),this.commitLog.push({timestamp:B,message:w,data:JSON.parse(JSON.stringify(A[N]))});this.stages[y]={}},M.prototype.no_op=function(){},M.prototype.extract=function(y){var w=0,A=this.data.length,N=G(y),B=[];for(w;w<A;w+=1)B.push(Ce(this.data[w],y,N));return B},M.prototype.max=function(y){return Math.max.apply(null,this.extract(y))},M.prototype.min=function(y){return Math.min.apply(null,this.extract(y))},M.prototype.maxRecord=function(y){var w=0,A=this.data.length,N=G(y),B={index:0,value:void 0},j;for(w;w<A;w+=1)j!==void 0?j<Ce(this.data[w],y,N)&&(j=Ce(this.data[w],y,N),B.index=this.data[w].$loki):(j=Ce(this.data[w],y,N),B.index=this.data[w].$loki);return B.value=j,B},M.prototype.minRecord=function(y){var w=0,A=this.data.length,N=G(y),B={index:0,value:void 0},j;for(w;w<A;w+=1)j!==void 0?j>Ce(this.data[w],y,N)&&(j=Ce(this.data[w],y,N),B.index=this.data[w].$loki):(j=Ce(this.data[w],y,N),B.index=this.data[w].$loki);return B.value=j,B},M.prototype.extractNumerical=function(y){return this.extract(y).map(Q).filter(Number).filter(function(w){return!isNaN(w)})},M.prototype.avg=function(y){return ke(this.extractNumerical(y))},M.prototype.stdDev=function(y){return Te(this.extractNumerical(y))},M.prototype.mode=function(y){var w={},A=this.extract(y);A.forEach(function(X){w[X]?w[X]+=1:w[X]=1});var N,B,j;for(B in w)N?N<w[B]&&(j=B):(j=B,N=w[B]);return j},M.prototype.median=function(y){var w=this.extractNumerical(y);w.sort(ue);var A=Math.floor(w.length/2);return w.length%2?w[A]:(w[A-1]+w[A])/2};function G(y){return y.indexOf(".")!==-1}function Q(y){return parseFloat(y,10)}function he(y,w){return y+w}function ue(y,w){return y-w}function ke(y){return y.reduce(he,0)/y.length}function Te(y){var w=ke(y),A=y.map(function(j){var X=j-w,re=X*X;return re}),N=ke(A),B=Math.sqrt(N);return B}function Ce(y,w,A){if(A===!1)return y[w];for(var N=w.split("."),B=y;N.length>0;)B=B[N.shift()];return B}function Ye(y,w,A){for(var N=0,B=y.length,j,X;N<B;){if(X=N+B>>1,j=A.apply(null,[w,y[X]]),j===0)return{found:!0,index:X};j<0?B=X:N=X+1}return{found:!1,index:B}}function ge(y){return function(w,A){return Ye(w,A,y)}}function ce(){}ce.prototype={keys:[],values:[],sort:function(y,w){return y<w?-1:y>w?1:0},setSort:function(y){this.bs=new ge(y)},bs:function(){return new ge(this.sort)},set:function(y,w){var A=this.bs(this.keys,y);A.found?this.values[A.index]=w:(this.keys.splice(A.index,0,y),this.values.splice(A.index,0,w))},get:function(y){return this.values[Ye(this.keys,y,this.sort).index]}};function ye(y){this.field=y,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}ye.prototype.keyMap={},ye.prototype.lokiMap={},ye.prototype.set=function(y){var w=y[this.field];if(w!==null&&typeof w<"u"){if(this.keyMap[w])throw new Error("Duplicate key for property "+this.field+": "+w);this.keyMap[w]=y,this.lokiMap[y.$loki]=w}},ye.prototype.get=function(y){return this.keyMap[y]},ye.prototype.byId=function(y){return this.keyMap[this.lokiMap[y]]},ye.prototype.update=function(y,w){if(this.lokiMap[y.$loki]!==w[this.field]){var A=this.lokiMap[y.$loki];this.set(w),this.keyMap[A]=void 0}else this.keyMap[y[this.field]]=w},ye.prototype.remove=function(y){var w=this.keyMap[y];if(w!==null&&typeof w<"u")this.keyMap[y]=void 0,this.lokiMap[w.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},ye.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function fe(y){this.index=Object.create(null),this.field=y}return fe.prototype={set:function(w,A){this.index[w]?this.index[w].push(A):this.index[w]=[A]},remove:function(w,A){var N=this.index[w];for(var B in N)N[B]==A&&N.splice(B,1);N.length<1&&(this.index[w]=void 0)},get:function(w){return this.index[w]},clear:function(w){this.index={}}},I.deepFreeze=n,I.freeze=i,I.unFreeze=s,I.LokiOps=x,I.Collection=M,I.DynamicView=W,I.Resultset=K,I.KeyValueStore=ce,I.LokiMemoryAdapter=P,I.LokiPartitioningAdapter=R,I.LokiLocalStorageAdapter=F,I.LokiFsAdapter=D,I.persistenceAdapters={fs:D,localStorage:F},I.aeq=l,I.lt=u,I.gt=d,I.Comparators=a,I}()})})(MF);var Jce=MF.exports;const Qce=oo(Jce);class ehe{constructor(){Z(this,"db");Z(this,"eventsCollection");this.db=new Qce("EventDB"),this.eventsCollection=this.db.addCollection("events",{unique:["id"],indices:["pubkey","kind","flatTags","created_at"]})}get(r){return this.eventsCollection.by("id",r)}insert(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");try{const t=r.tags.filter(n=>n[0]==="e").map(n=>n.join("_"));this.eventsCollection.insert({...r,flatTags:t})}catch{return!1}return!0}remove(r){const t=this.get(r);t&&this.eventsCollection.remove(t)}find(r,t){this.findArray(r).forEach(n=>{t(n)})}findArray(r){const t={};r.ids?t.id={$in:r.ids}:(r.authors&&(t.pubkey={$in:r.authors}),r.kinds&&(t.kind={$in:r.kinds}),r["#e"]&&(t.flatTags={$contains:"e_"+r["#e"]}),r["#p"],r.since&&r.until&&(t.created_at={$between:[r.since,r.until]}),r.since&&(t.created_at={$gte:r.since}),r.until&&(t.created_at={$lte:r.until}));let n=this.eventsCollection.chain().find(t).where(i=>fO(r,i)).simplesort("created_at",!0);return r.limit&&(n=n.limit(r.limit)),n.data()}findAndRemove(r){this.findArray(r).forEach(n=>this.remove(n.id))}findOne(r){return this.findArray(r)[0]}}const Mt=new ehe;function wO(e){var t,n,i;let r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:n[1];return r||(r=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],r)}function LF(e){return VE(e)?wO(e):e.id}function FF(e){if(e.kind===1)return Da(e)}function Da(e){var n,i;const r=(n=e.tags)==null?void 0:n.filter(s=>s[0]==="e"&&s[3]!=="mention");if(r.length===1)return r[0][1];const t=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(t)return t[1];if(r.length>1)return r[1][1]}function VE(e){var t;if(e.kind===6)return!0;const r=(t=e.tags)==null?void 0:t.findIndex(n=>n[0]==="e"&&n[3]==="mention");return e.kind===1&&e.content===`#[${r}]`}function _O(e,r=!0){var i,s;const t=(s=(i=e.tags)==null?void 0:i.find(o=>o[0]==="description"))==null?void 0:s[1];if(!t)return null;let n;try{n=JSON.parse(t)}catch{return null}return r&&te.toNostrBech32Address(n.pubkey,"npub"),n.pubkey}function jF(e){var t,n,i,s;const r=(n=(t=e==null?void 0:e.tags)==null?void 0:t.find(o=>o[0]==="e"&&o[3]==="root"))==null?void 0:n[1];return r||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(o=>o[0]==="e"))==null?void 0:s[1])}function the(e){var r;if(e.tags)return(r=e.tags.slice().reverse().find(t=>t[0]==="e"))==null?void 0:r[1]}const ws=class ws{static id(r){if((r.startsWith("npub")||r.startsWith("note"))&&(r=te.toNostrHexAddress(r)||"",!r))throw new Error("str->id: invalid str "+r);const t=ws.strToUniqueId.get(r);if(t)return t;const n=ws.currentUniqueId++;return ws.strToUniqueId.set(r,n),ws.uniqueIdToStr.set(n,r),n}static str(r){const t=ws.uniqueIdToStr.get(r);if(!t)throw new Error("pub: invalid id "+r);return t}static has(r){return ws.strToUniqueId.has(r)}static bech32(r,t="npub"){return te.toNostrBech32Address(ws.str(r),t)||""}};Z(ws,"strToUniqueId",new Map),Z(ws,"uniqueIdToStr",new Map),Z(ws,"currentUniqueId",0);let fd=ws;const Pr=fd.str,Ke=fd.id,F0=fd.bech32;var qE={exports:{}};(function(e,r){const{hasOwnProperty:t}=Object.prototype,n=x();n.configure=x,n.stringify=n,n.default=n,r.stringify=n,r.configure=x,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(E){return E.length<5e3&&!i.test(E)?`"${E}"`:JSON.stringify(E)}function o(E){if(E.length>200)return E.sort();for(let k=1;k<E.length;k++){const $=E[k];let S=k;for(;S!==0&&E[S-1]>$;)E[S]=E[S-1],S--;E[S]=$}return E}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(E){return a.call(E)!==void 0&&E.length!==0}function u(E,k,$){E.length<$&&($=E.length);const S=k===","?"":" ";let T=`"0":${S}${E[0]}`;for(let O=1;O<$;O++)T+=`${k}"${O}":${S}${E[O]}`;return T}function d(E){if(t.call(E,"circularValue")){const k=E.circularValue;if(typeof k=="string")return`"${k}"`;if(k==null)return k;if(k===Error||k===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function h(E,k){let $;if(t.call(E,k)&&($=E[k],typeof $!="boolean"))throw new TypeError(`The "${k}" argument must be of type boolean`);return $===void 0?!0:$}function v(E,k){let $;if(t.call(E,k)){if($=E[k],typeof $!="number")throw new TypeError(`The "${k}" argument must be of type number`);if(!Number.isInteger($))throw new TypeError(`The "${k}" argument must be an integer`);if($<1)throw new RangeError(`The "${k}" argument must be >= 1`)}return $===void 0?1/0:$}function g(E){return E===1?"1 item":`${E} items`}function b(E){const k=new Set;for(const $ of E)(typeof $=="string"||typeof $=="number")&&k.add(String($));return k}function m(E){if(t.call(E,"strict")){const k=E.strict;if(typeof k!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(k)return $=>{let S=`Object can not safely be stringified. Received type ${typeof $}`;throw typeof $!="function"&&(S+=` (${$.toString()})`),new Error(S)}}}function x(E){E={...E};const k=m(E);k&&(E.bigint===void 0&&(E.bigint=!1),"circularValue"in E||(E.circularValue=Error));const $=d(E),S=h(E,"bigint"),T=h(E,"deterministic"),O=v(E,"maximumDepth"),I=v(E,"maximumBreadth");function P(q,W,M,G,Q,he){let ue=W[q];switch(typeof ue=="object"&&ue!==null&&typeof ue.toJSON=="function"&&(ue=ue.toJSON(q)),ue=G.call(W,q,ue),typeof ue){case"string":return s(ue);case"object":{if(ue===null)return"null";if(M.indexOf(ue)!==-1)return $;let ke="",Te=",";const Ce=he;if(Array.isArray(ue)){if(ue.length===0)return"[]";if(O<M.length+1)return'"[Array]"';M.push(ue),Q!==""&&(he+=Q,ke+=`
${he}`,Te=`,
${he}`);const y=Math.min(ue.length,I);let w=0;for(;w<y-1;w++){const N=P(String(w),ue,M,G,Q,he);ke+=N!==void 0?N:"null",ke+=Te}const A=P(String(w),ue,M,G,Q,he);if(ke+=A!==void 0?A:"null",ue.length-1>I){const N=ue.length-I-1;ke+=`${Te}"... ${g(N)} not stringified"`}return Q!==""&&(ke+=`
${Ce}`),M.pop(),`[${ke}]`}let Ye=Object.keys(ue);const ge=Ye.length;if(ge===0)return"{}";if(O<M.length+1)return'"[Object]"';let ce="",ye="";Q!==""&&(he+=Q,Te=`,
${he}`,ce=" ");const fe=Math.min(ge,I);T&&!l(ue)&&(Ye=o(Ye)),M.push(ue);for(let y=0;y<fe;y++){const w=Ye[y],A=P(w,ue,M,G,Q,he);A!==void 0&&(ke+=`${ye}${s(w)}:${ce}${A}`,ye=Te)}if(ge>I){const y=ge-I;ke+=`${ye}"...":${ce}"${g(y)} not stringified"`,ye=Te}return Q!==""&&ye.length>1&&(ke=`
${he}${ke}
${Ce}`),M.pop(),`{${ke}}`}case"number":return isFinite(ue)?String(ue):k?k(ue):"null";case"boolean":return ue===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(ue);default:return k?k(ue):void 0}}function R(q,W,M,G,Q,he){switch(typeof W=="object"&&W!==null&&typeof W.toJSON=="function"&&(W=W.toJSON(q)),typeof W){case"string":return s(W);case"object":{if(W===null)return"null";if(M.indexOf(W)!==-1)return $;const ue=he;let ke="",Te=",";if(Array.isArray(W)){if(W.length===0)return"[]";if(O<M.length+1)return'"[Array]"';M.push(W),Q!==""&&(he+=Q,ke+=`
${he}`,Te=`,
${he}`);const ge=Math.min(W.length,I);let ce=0;for(;ce<ge-1;ce++){const fe=R(String(ce),W[ce],M,G,Q,he);ke+=fe!==void 0?fe:"null",ke+=Te}const ye=R(String(ce),W[ce],M,G,Q,he);if(ke+=ye!==void 0?ye:"null",W.length-1>I){const fe=W.length-I-1;ke+=`${Te}"... ${g(fe)} not stringified"`}return Q!==""&&(ke+=`
${ue}`),M.pop(),`[${ke}]`}M.push(W);let Ce="";Q!==""&&(he+=Q,Te=`,
${he}`,Ce=" ");let Ye="";for(const ge of G){const ce=R(ge,W[ge],M,G,Q,he);ce!==void 0&&(ke+=`${Ye}${s(ge)}:${Ce}${ce}`,Ye=Te)}return Q!==""&&Ye.length>1&&(ke=`
${he}${ke}
${ue}`),M.pop(),`{${ke}}`}case"number":return isFinite(W)?String(W):k?k(W):"null";case"boolean":return W===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(W);default:return k?k(W):void 0}}function D(q,W,M,G,Q){switch(typeof W){case"string":return s(W);case"object":{if(W===null)return"null";if(typeof W.toJSON=="function"){if(W=W.toJSON(q),typeof W!="object")return D(q,W,M,G,Q);if(W===null)return"null"}if(M.indexOf(W)!==-1)return $;const he=Q;if(Array.isArray(W)){if(W.length===0)return"[]";if(O<M.length+1)return'"[Array]"';M.push(W),Q+=G;let ce=`
${Q}`;const ye=`,
${Q}`,fe=Math.min(W.length,I);let y=0;for(;y<fe-1;y++){const A=D(String(y),W[y],M,G,Q);ce+=A!==void 0?A:"null",ce+=ye}const w=D(String(y),W[y],M,G,Q);if(ce+=w!==void 0?w:"null",W.length-1>I){const A=W.length-I-1;ce+=`${ye}"... ${g(A)} not stringified"`}return ce+=`
${he}`,M.pop(),`[${ce}]`}let ue=Object.keys(W);const ke=ue.length;if(ke===0)return"{}";if(O<M.length+1)return'"[Object]"';Q+=G;const Te=`,
${Q}`;let Ce="",Ye="",ge=Math.min(ke,I);l(W)&&(Ce+=u(W,Te,I),ue=ue.slice(W.length),ge-=W.length,Ye=Te),T&&(ue=o(ue)),M.push(W);for(let ce=0;ce<ge;ce++){const ye=ue[ce],fe=D(ye,W[ye],M,G,Q);fe!==void 0&&(Ce+=`${Ye}${s(ye)}: ${fe}`,Ye=Te)}if(ke>I){const ce=ke-I;Ce+=`${Ye}"...": "${g(ce)} not stringified"`,Ye=Te}return Ye!==""&&(Ce=`
${Q}${Ce}
${he}`),M.pop(),`{${Ce}}`}case"number":return isFinite(W)?String(W):k?k(W):"null";case"boolean":return W===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(W);default:return k?k(W):void 0}}function F(q,W,M){switch(typeof W){case"string":return s(W);case"object":{if(W===null)return"null";if(typeof W.toJSON=="function"){if(W=W.toJSON(q),typeof W!="object")return F(q,W,M);if(W===null)return"null"}if(M.indexOf(W)!==-1)return $;let G="";if(Array.isArray(W)){if(W.length===0)return"[]";if(O<M.length+1)return'"[Array]"';M.push(W);const Te=Math.min(W.length,I);let Ce=0;for(;Ce<Te-1;Ce++){const ge=F(String(Ce),W[Ce],M);G+=ge!==void 0?ge:"null",G+=","}const Ye=F(String(Ce),W[Ce],M);if(G+=Ye!==void 0?Ye:"null",W.length-1>I){const ge=W.length-I-1;G+=`,"... ${g(ge)} not stringified"`}return M.pop(),`[${G}]`}let Q=Object.keys(W);const he=Q.length;if(he===0)return"{}";if(O<M.length+1)return'"[Object]"';let ue="",ke=Math.min(he,I);l(W)&&(G+=u(W,",",I),Q=Q.slice(W.length),ke-=W.length,ue=","),T&&(Q=o(Q)),M.push(W);for(let Te=0;Te<ke;Te++){const Ce=Q[Te],Ye=F(Ce,W[Ce],M);Ye!==void 0&&(G+=`${ue}${s(Ce)}:${Ye}`,ue=",")}if(he>I){const Te=he-I;G+=`${ue}"...":"${g(Te)} not stringified"`}return M.pop(),`{${G}}`}case"number":return isFinite(W)?String(W):k?k(W):"null";case"boolean":return W===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(W);default:return k?k(W):void 0}}function K(q,W,M){if(arguments.length>1){let G="";if(typeof M=="number"?G=" ".repeat(Math.min(M,10)):typeof M=="string"&&(G=M.slice(0,10)),W!=null){if(typeof W=="function")return P("",{"":q},[],W,G,"");if(Array.isArray(W))return R("",q,[],b(W),G,"")}if(G.length!==0)return D("",q,[],G,"")}return F("",q,[])}return K}})(qE,qE.exports);var rhe=qE.exports;const zF=oo(rhe);zF.configure;const nhe=zF;var $O={};Object.defineProperty($O,"__esModule",{value:!0});var xO=$O.wordlist=void 0;xO=$O.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Gi={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.output=xn.exists=xn.hash=xn.bytes=xn.bool=xn.number=void 0;function j0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}xn.number=j0;function HF(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}xn.bool=HF;function EO(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}xn.bytes=EO;function UF(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");j0(e.outputLen),j0(e.blockLen)}xn.hash=UF;function KF(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}xn.exists=KF;function WF(e,r){EO(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}xn.output=WF;const ihe={number:j0,bool:HF,bytes:EO,hash:UF,exists:KF,output:WF};xn.default=ihe;var pd={},VF={},Oc={},m1={};Object.defineProperty(m1,"__esModule",{value:!0});m1.crypto=void 0;m1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=m1,t=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=t;const n=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=n;const i=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=i;const s=(S,T)=>S<<32-T|S>>>T;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,T)=>T.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let T="";for(let O=0;O<S.length;O++)T+=o[S[O]];return T}e.bytesToHex=a;function l(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const T=new Uint8Array(S.length/2);for(let O=0;O<T.length;O++){const I=O*2,P=S.slice(I,I+2),R=Number.parseInt(P,16);if(Number.isNaN(R)||R<0)throw new Error("Invalid byte sequence");T[O]=R}return T}e.hexToBytes=l;const u=async()=>{};e.nextTick=u;async function d(S,T,O){let I=Date.now();for(let P=0;P<S;P++){O(P);const R=Date.now()-I;R>=0&&R<T||(await(0,e.nextTick)(),I+=R)}}e.asyncLoop=d;function h(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}e.utf8ToBytes=h;function v(S){if(typeof S=="string"&&(S=h(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}e.toBytes=v;function g(...S){if(!S.every(I=>I instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const T=S.reduce((I,P)=>I+P.length,0),O=new Uint8Array(T);for(let I=0,P=0;I<S.length;I++){const R=S[I];O.set(R,P),P+=R.length}return O}e.concatBytes=g;class b{clone(){return this._cloneInto()}}e.Hash=b;const m=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function x(S,T){if(T!==void 0&&(typeof T!="object"||!m(T)))throw new TypeError("Options should be object or undefined");return Object.assign(S,T)}e.checkOpts=x;function E(S){const T=I=>S().update(v(I)).digest(),O=S();return T.outputLen=O.outputLen,T.blockLen=O.blockLen,T.create=()=>S(),T}e.wrapConstructor=E;function k(S){const T=(I,P)=>S(P).update(v(I)).digest(),O=S({});return T.outputLen=O.outputLen,T.blockLen=O.blockLen,T.create=I=>S(I),T}e.wrapConstructorWithOpts=k;function $(S=32){if(r.crypto&&typeof r.crypto.getRandomValues=="function")return r.crypto.getRandomValues(new Uint8Array(S));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=$})(Oc);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const r=xn,t=Oc;class n extends t.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,r.default.hash(o);const l=(0,t.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(l.length>u?o.create().update(l).digest():l);for(let h=0;h<d.length;h++)d[h]^=54;this.iHash.update(d),this.oHash=o.create();for(let h=0;h<d.length;h++)d[h]^=106;this.oHash.update(d),d.fill(0)}update(o){return r.default.exists(this),this.iHash.update(o),this}digestInto(o){r.default.exists(this),r.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:l,finished:u,destroyed:d,blockLen:h,outputLen:v}=this;return o=o,o.finished=u,o.destroyed=d,o.blockLen=h,o.outputLen=v,o.oHash=a._cloneInto(o.oHash),o.iHash=l._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new n(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new n(s,o)})(VF);Object.defineProperty(pd,"__esModule",{value:!0});pd.pbkdf2Async=pd.pbkdf2=void 0;const jy=xn,she=VF,Gh=Oc;function qF(e,r,t,n){jy.default.hash(e);const i=(0,Gh.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(jy.default.number(s),jy.default.number(o),jy.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,Gh.toBytes)(r),u=(0,Gh.toBytes)(t),d=new Uint8Array(o),h=she.hmac.create(e,l),v=h._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:h,PRFSalt:v}}function GF(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function ohe(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=qF(e,r,t,n);let u;const d=new Uint8Array(4),h=(0,Gh.createView)(d),v=new Uint8Array(a.outputLen);for(let g=1,b=0;b<s;g++,b+=a.outputLen){const m=o.subarray(b,b+a.outputLen);h.setInt32(0,g,!1),(u=l._cloneInto(u)).update(d).digestInto(v),m.set(v.subarray(0,m.length));for(let x=1;x<i;x++){a._cloneInto(u).update(v).digestInto(v);for(let E=0;E<m.length;E++)m[E]^=v[E]}}return GF(a,l,o,u,v)}pd.pbkdf2=ohe;async function ahe(e,r,t,n){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:l,PRFSalt:u}=qF(e,r,t,n);let d;const h=new Uint8Array(4),v=(0,Gh.createView)(h),g=new Uint8Array(l.outputLen);for(let b=1,m=0;m<s;b++,m+=l.outputLen){const x=a.subarray(m,m+l.outputLen);v.setInt32(0,b,!1),(d=u._cloneInto(d)).update(h).digestInto(g),x.set(g.subarray(0,x.length)),await(0,Gh.asyncLoop)(i-1,o,E=>{l._cloneInto(d).update(g).digestInto(g);for(let k=0;k<x.length;k++)x[k]^=g[k]})}return GF(l,u,a,d,g)}pd.pbkdf2Async=ahe;var vd={},Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.SHA2=void 0;const T$=xn,Ff=Oc;function lhe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let uhe=class extends Ff.Hash{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=(0,Ff.createView)(this.buffer)}update(r){T$.default.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=(0,Ff.toBytes)(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=(0,Ff.createView)(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){T$.default.exists(this),T$.default.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;lhe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=(0,Ff.createView)(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};Sv.SHA2=uhe;Object.defineProperty(vd,"__esModule",{value:!0});vd.sha224=vd.sha256=void 0;const che=Sv,bs=Oc,hhe=(e,r,t)=>e&r^~e&t,dhe=(e,r,t)=>e&r^e&t^r&t,fhe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ll=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ul=new Uint32Array(64);let YF=class extends che.SHA2{constructor(){super(64,32,8,!1),this.A=ll[0]|0,this.B=ll[1]|0,this.C=ll[2]|0,this.D=ll[3]|0,this.E=ll[4]|0,this.F=ll[5]|0,this.G=ll[6]|0,this.H=ll[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let h=0;h<16;h++,t+=4)ul[h]=r.getUint32(t,!1);for(let h=16;h<64;h++){const v=ul[h-15],g=ul[h-2],b=(0,bs.rotr)(v,7)^(0,bs.rotr)(v,18)^v>>>3,m=(0,bs.rotr)(g,17)^(0,bs.rotr)(g,19)^g>>>10;ul[h]=m+ul[h-7]+b+ul[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const v=(0,bs.rotr)(a,6)^(0,bs.rotr)(a,11)^(0,bs.rotr)(a,25),g=d+v+hhe(a,l,u)+fhe[h]+ul[h]|0,m=((0,bs.rotr)(n,2)^(0,bs.rotr)(n,13)^(0,bs.rotr)(n,22))+dhe(n,i,s)|0;d=u,u=l,l=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,l,u,d)}roundClean(){ul.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},phe=class extends YF{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};vd.sha256=(0,bs.wrapConstructor)(()=>new YF);vd.sha224=(0,bs.wrapConstructor)(()=>new phe);var Es={},ZF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const r=BigInt(2**32-1),t=BigInt(32);function n(D,F=!1){return F?{h:Number(D&r),l:Number(D>>t&r)}:{h:Number(D>>t&r)|0,l:Number(D&r)|0}}e.fromBig=n;function i(D,F=!1){let K=new Uint32Array(D.length),q=new Uint32Array(D.length);for(let W=0;W<D.length;W++){const{h:M,l:G}=n(D[W],F);[K[W],q[W]]=[M,G]}return[K,q]}e.split=i;const s=(D,F)=>BigInt(D>>>0)<<t|BigInt(F>>>0);e.toBig=s;const o=(D,F,K)=>D>>>K,a=(D,F,K)=>D<<32-K|F>>>K,l=(D,F,K)=>D>>>K|F<<32-K,u=(D,F,K)=>D<<32-K|F>>>K,d=(D,F,K)=>D<<64-K|F>>>K-32,h=(D,F,K)=>D>>>K-32|F<<64-K,v=(D,F)=>F,g=(D,F)=>D,b=(D,F,K)=>D<<K|F>>>32-K,m=(D,F,K)=>F<<K|D>>>32-K,x=(D,F,K)=>F<<K-32|D>>>64-K,E=(D,F,K)=>D<<K-32|F>>>64-K;function k(D,F,K,q){const W=(F>>>0)+(q>>>0);return{h:D+K+(W/2**32|0)|0,l:W|0}}e.add=k;const $=(D,F,K)=>(D>>>0)+(F>>>0)+(K>>>0),S=(D,F,K,q)=>F+K+q+(D/2**32|0)|0,T=(D,F,K,q)=>(D>>>0)+(F>>>0)+(K>>>0)+(q>>>0),O=(D,F,K,q,W)=>F+K+q+W+(D/2**32|0)|0,I=(D,F,K,q,W)=>(D>>>0)+(F>>>0)+(K>>>0)+(q>>>0)+(W>>>0),P=(D,F,K,q,W,M)=>F+K+q+W+M+(D/2**32|0)|0,R={fromBig:n,split:i,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:l,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:v,rotr32L:g,rotlSH:b,rotlSL:m,rotlBH:x,rotlBL:E,add:k,add3L:$,add3H:S,add4L:T,add4H:O,add5H:P,add5L:I};e.default=R})(ZF);Object.defineProperty(Es,"__esModule",{value:!0});Es.sha384=Es.sha512_256=Es.sha512_224=Es.sha512=Es.SHA512=void 0;const vhe=Sv,Ct=ZF,b1=Oc,[ghe,yhe]=Ct.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),cl=new Uint32Array(80),hl=new Uint32Array(80);let kv=class extends vhe.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:d,Fh:h,Fl:v,Gh:g,Gl:b,Hh:m,Hl:x}=this;return[r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x]}set(r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=v|0,this.Gh=g|0,this.Gl=b|0,this.Hh=m|0,this.Hl=x|0}process(r,t){for(let $=0;$<16;$++,t+=4)cl[$]=r.getUint32(t),hl[$]=r.getUint32(t+=4);for(let $=16;$<80;$++){const S=cl[$-15]|0,T=hl[$-15]|0,O=Ct.default.rotrSH(S,T,1)^Ct.default.rotrSH(S,T,8)^Ct.default.shrSH(S,T,7),I=Ct.default.rotrSL(S,T,1)^Ct.default.rotrSL(S,T,8)^Ct.default.shrSL(S,T,7),P=cl[$-2]|0,R=hl[$-2]|0,D=Ct.default.rotrSH(P,R,19)^Ct.default.rotrBH(P,R,61)^Ct.default.shrSH(P,R,6),F=Ct.default.rotrSL(P,R,19)^Ct.default.rotrBL(P,R,61)^Ct.default.shrSL(P,R,6),K=Ct.default.add4L(I,F,hl[$-7],hl[$-16]),q=Ct.default.add4H(K,O,D,cl[$-7],cl[$-16]);cl[$]=q|0,hl[$]=K|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:d,Eh:h,El:v,Fh:g,Fl:b,Gh:m,Gl:x,Hh:E,Hl:k}=this;for(let $=0;$<80;$++){const S=Ct.default.rotrSH(h,v,14)^Ct.default.rotrSH(h,v,18)^Ct.default.rotrBH(h,v,41),T=Ct.default.rotrSL(h,v,14)^Ct.default.rotrSL(h,v,18)^Ct.default.rotrBL(h,v,41),O=h&g^~h&m,I=v&b^~v&x,P=Ct.default.add5L(k,T,I,yhe[$],hl[$]),R=Ct.default.add5H(P,E,S,O,ghe[$],cl[$]),D=P|0,F=Ct.default.rotrSH(n,i,28)^Ct.default.rotrBH(n,i,34)^Ct.default.rotrBH(n,i,39),K=Ct.default.rotrSL(n,i,28)^Ct.default.rotrBL(n,i,34)^Ct.default.rotrBL(n,i,39),q=n&s^n&a^s&a,W=i&o^i&l^o&l;E=m|0,k=x|0,m=g|0,x=b|0,g=h|0,b=v|0,{h,l:v}=Ct.default.add(u|0,d|0,R|0,D|0),u=a|0,d=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const M=Ct.default.add3L(D,K,W);n=Ct.default.add3H(M,R,F,q),i=M|0}({h:n,l:i}=Ct.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ct.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ct.default.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:d}=Ct.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:v}=Ct.default.add(this.Eh|0,this.El|0,h|0,v|0),{h:g,l:b}=Ct.default.add(this.Fh|0,this.Fl|0,g|0,b|0),{h:m,l:x}=Ct.default.add(this.Gh|0,this.Gl|0,m|0,x|0),{h:E,l:k}=Ct.default.add(this.Hh|0,this.Hl|0,E|0,k|0),this.set(n,i,s,o,a,l,u,d,h,v,g,b,m,x,E,k)}roundClean(){cl.fill(0),hl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Es.SHA512=kv;let mhe=class extends kv{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},bhe=class extends kv{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},whe=class extends kv{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Es.sha512=(0,b1.wrapConstructor)(()=>new kv);Es.sha512_224=(0,b1.wrapConstructor)(()=>new mhe);Es.sha512_256=(0,b1.wrapConstructor)(()=>new bhe);Es.sha384=(0,b1.wrapConstructor)(()=>new whe);const XF=LI(Nae);Object.defineProperty(Gi,"__esModule",{value:!0});var JF=Gi.mnemonicToSeedSync=Gi.mnemonicToSeed=lj=Gi.validateMnemonic=Gi.entropyToMnemonic=Gi.mnemonicToEntropy=ij=Gi.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const QF=xn,ej=pd,_he=vd,tj=Es,$he=Oc,zy=XF,xhe=e=>e[0]==="あいこくしん";function rj(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function SO(e){const r=rj(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function nj(e){QF.default.bytes(e,16,20,24,28,32)}function Ehe(e,r=128){if(QF.default.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return aj((0,$he.randomBytes)(r/8),e)}var ij=Gi.generateMnemonic=Ehe;const She=e=>{const r=8-e.length/4;return new Uint8Array([(0,_he.sha256)(e)[0]>>r<<r])};function sj(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),zy.utils.chain(zy.utils.checksum(1,She),zy.utils.radix2(11,!0),zy.utils.alphabet(e))}function oj(e,r){const{words:t}=SO(e),n=sj(r).decode(t);return nj(n),n}Gi.mnemonicToEntropy=oj;function aj(e,r){return nj(e),sj(r).encode(e).join(xhe(r)?"　":" ")}Gi.entropyToMnemonic=aj;function khe(e,r){try{oj(e,r)}catch{return!1}return!0}var lj=Gi.validateMnemonic=khe;const uj=e=>rj(`mnemonic${e}`);function The(e,r=""){return(0,ej.pbkdf2Async)(tj.sha512,SO(e).nfkd,uj(r),{c:2048,dkLen:64})}Gi.mnemonicToSeed=The;function Ihe(e,r=""){return(0,ej.pbkdf2)(tj.sha512,SO(e).nfkd,uj(r),{c:2048,dkLen:64})}JF=Gi.mnemonicToSeedSync=Ihe;function GE(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ohe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Pu(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Ahe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");GE(e.outputLen),GE(e.blockLen)}function Che(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Phe(e,r){Pu(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Uu={number:GE,bool:Ohe,bytes:Pu,hash:Ahe,exists:Che,output:Phe},I$=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),_o=(e,r)=>e<<32-r|e>>>r,Nhe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Nhe)throw new Error("Non little-endian hardware is not supported");const Rhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Dhe(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Rhe[e[t]];return r}function Bhe(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}function cj(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function kO(e){if(typeof e=="string"&&(e=cj(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Jf(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}class hj{clone(){return this._cloneInto()}}function Ac(e){const r=n=>e().update(kO(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function dj(e=32){if(I$&&typeof I$.getRandomValues=="function")return I$.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class fj extends hj{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Uu.hash(r);const n=kO(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Uu.exists(this),this.iHash.update(r),this}digestInto(r){Uu.exists(this),Uu.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const z0=(e,r,t)=>new fj(e,r).update(t).digest();z0.create=(e,r)=>new fj(e,r);function Mhe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}class TO extends hj{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=Yh(this.buffer)}update(r){Uu.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=kO(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Yh(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Uu.exists(this),Uu.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;Mhe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Yh(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}}const Lhe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),pj=Uint8Array.from({length:16},(e,r)=>r),Fhe=pj.map(e=>(9*e+5)%16);let IO=[pj],OO=[Fhe];for(let e=0;e<4;e++)for(let r of[IO,OO])r.push(r[e].map(t=>Lhe[t]));const vj=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),jhe=IO.map((e,r)=>e.map(t=>vj[r][t])),zhe=OO.map((e,r)=>e.map(t=>vj[r][t])),Hhe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Uhe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Hy=(e,r)=>e<<r|e>>>32-r;function aN(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const Uy=new Uint32Array(16);class Khe extends TO{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let g=0;g<16;g++,t+=4)Uy[g]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,d=u,h=this.h4|0,v=h;for(let g=0;g<5;g++){const b=4-g,m=Hhe[g],x=Uhe[g],E=IO[g],k=OO[g],$=jhe[g],S=zhe[g];for(let T=0;T<16;T++){const O=Hy(n+aN(g,s,a,u)+Uy[E[T]]+m,$[T])+h|0;n=h,h=u,u=Hy(a,10)|0,a=s,s=O}for(let T=0;T<16;T++){const O=Hy(i+aN(b,o,l,d)+Uy[k[T]]+x,S[T])+v|0;i=v,v=d,d=Hy(l,10)|0,l=o,o=O}}this.set(this.h1+a+d|0,this.h2+u+v|0,this.h3+h+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){Uy.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Whe=Ac(()=>new Khe),Vhe=(e,r,t)=>e&r^~e&t,qhe=(e,r,t)=>e&r^e&t^r&t,Ghe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fl=new Uint32Array(64);class gj extends TO{constructor(){super(64,32,8,!1),this.A=dl[0]|0,this.B=dl[1]|0,this.C=dl[2]|0,this.D=dl[3]|0,this.E=dl[4]|0,this.F=dl[5]|0,this.G=dl[6]|0,this.H=dl[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let h=0;h<16;h++,t+=4)fl[h]=r.getUint32(t,!1);for(let h=16;h<64;h++){const v=fl[h-15],g=fl[h-2],b=_o(v,7)^_o(v,18)^v>>>3,m=_o(g,17)^_o(g,19)^g>>>10;fl[h]=m+fl[h-7]+b+fl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const v=_o(a,6)^_o(a,11)^_o(a,25),g=d+v+Vhe(a,l,u)+Ghe[h]+fl[h]|0,m=(_o(n,2)^_o(n,13)^_o(n,22))+qhe(n,i,s)|0;d=u,u=l,l=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,l,u,d)}roundClean(){fl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Yhe extends gj{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const gd=Ac(()=>new gj);Ac(()=>new Yhe);const Ky=BigInt(2**32-1),YE=BigInt(32);function yj(e,r=!1){return r?{h:Number(e&Ky),l:Number(e>>YE&Ky)}:{h:Number(e>>YE&Ky)|0,l:Number(e&Ky)|0}}function Zhe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=yj(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Xhe=(e,r)=>BigInt(e>>>0)<<YE|BigInt(r>>>0),Jhe=(e,r,t)=>e>>>t,Qhe=(e,r,t)=>e<<32-t|r>>>t,ede=(e,r,t)=>e>>>t|r<<32-t,tde=(e,r,t)=>e<<32-t|r>>>t,rde=(e,r,t)=>e<<64-t|r>>>t-32,nde=(e,r,t)=>e>>>t-32|r<<64-t,ide=(e,r)=>r,sde=(e,r)=>e,ode=(e,r,t)=>e<<t|r>>>32-t,ade=(e,r,t)=>r<<t|e>>>32-t,lde=(e,r,t)=>r<<t-32|e>>>64-t,ude=(e,r,t)=>e<<t-32|r>>>64-t;function cde(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const hde=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),dde=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,fde=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),pde=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,vde=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),gde=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,Pt={fromBig:yj,split:Zhe,toBig:Xhe,shrSH:Jhe,shrSL:Qhe,rotrSH:ede,rotrSL:tde,rotrBH:rde,rotrBL:nde,rotr32H:ide,rotr32L:sde,rotlSH:ode,rotlSL:ade,rotlBH:lde,rotlBL:ude,add:cde,add3L:hde,add3H:dde,add4L:fde,add4H:pde,add5H:gde,add5L:vde},[yde,mde]=Pt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),pl=new Uint32Array(80),vl=new Uint32Array(80);class w1 extends TO{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:d,Fh:h,Fl:v,Gh:g,Gl:b,Hh:m,Hl:x}=this;return[r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x]}set(r,t,n,i,s,o,a,l,u,d,h,v,g,b,m,x){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=v|0,this.Gh=g|0,this.Gl=b|0,this.Hh=m|0,this.Hl=x|0}process(r,t){for(let $=0;$<16;$++,t+=4)pl[$]=r.getUint32(t),vl[$]=r.getUint32(t+=4);for(let $=16;$<80;$++){const S=pl[$-15]|0,T=vl[$-15]|0,O=Pt.rotrSH(S,T,1)^Pt.rotrSH(S,T,8)^Pt.shrSH(S,T,7),I=Pt.rotrSL(S,T,1)^Pt.rotrSL(S,T,8)^Pt.shrSL(S,T,7),P=pl[$-2]|0,R=vl[$-2]|0,D=Pt.rotrSH(P,R,19)^Pt.rotrBH(P,R,61)^Pt.shrSH(P,R,6),F=Pt.rotrSL(P,R,19)^Pt.rotrBL(P,R,61)^Pt.shrSL(P,R,6),K=Pt.add4L(I,F,vl[$-7],vl[$-16]),q=Pt.add4H(K,O,D,pl[$-7],pl[$-16]);pl[$]=q|0,vl[$]=K|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:d,Eh:h,El:v,Fh:g,Fl:b,Gh:m,Gl:x,Hh:E,Hl:k}=this;for(let $=0;$<80;$++){const S=Pt.rotrSH(h,v,14)^Pt.rotrSH(h,v,18)^Pt.rotrBH(h,v,41),T=Pt.rotrSL(h,v,14)^Pt.rotrSL(h,v,18)^Pt.rotrBL(h,v,41),O=h&g^~h&m,I=v&b^~v&x,P=Pt.add5L(k,T,I,mde[$],vl[$]),R=Pt.add5H(P,E,S,O,yde[$],pl[$]),D=P|0,F=Pt.rotrSH(n,i,28)^Pt.rotrBH(n,i,34)^Pt.rotrBH(n,i,39),K=Pt.rotrSL(n,i,28)^Pt.rotrBL(n,i,34)^Pt.rotrBL(n,i,39),q=n&s^n&a^s&a,W=i&o^i&l^o&l;E=m|0,k=x|0,m=g|0,x=b|0,g=h|0,b=v|0,{h,l:v}=Pt.add(u|0,d|0,R|0,D|0),u=a|0,d=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const M=Pt.add3L(D,K,W);n=Pt.add3H(M,R,F,q),i=M|0}({h:n,l:i}=Pt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Pt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Pt.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:d}=Pt.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:v}=Pt.add(this.Eh|0,this.El|0,h|0,v|0),{h:g,l:b}=Pt.add(this.Fh|0,this.Fl|0,g|0,b|0),{h:m,l:x}=Pt.add(this.Gh|0,this.Gl|0,m|0,x|0),{h:E,l:k}=Pt.add(this.Hh|0,this.Hl|0,E|0,k|0),this.set(n,i,s,o,a,l,u,d,h,v,g,b,m,x,E,k)}roundClean(){pl.fill(0),vl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class bde extends w1{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class wde extends w1{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class _de extends w1{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const lN=Ac(()=>new w1);Ac(()=>new bde);Ac(()=>new wde);Ac(()=>new _de);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mj=BigInt(0),_1=BigInt(1),$de=BigInt(2),$1=e=>e instanceof Uint8Array,xde=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function yd(e){if(!$1(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=xde[e[t]];return r}function bj(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function AO(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function md(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");r[t]=s}return r}function ci(e){return AO(yd(e))}function CO(e){if(!$1(e))throw new Error("Uint8Array expected");return AO(yd(Uint8Array.from(e).reverse()))}const Bl=(e,r)=>md(e.toString(16).padStart(r*2,"0")),wj=(e,r)=>Bl(e,r).reverse(),Ede=e=>md(bj(e));function zn(e,r,t){let n;if(typeof r=="string")try{n=md(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if($1(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Yi(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!$1(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Sde(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function x1(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function kde(e){let r;for(r=0;e>mj;e>>=_1,r+=1);return r}const Tde=(e,r)=>e>>BigInt(r)&_1,Ide=(e,r,t)=>e|(t?_1:mj)<<BigInt(r),PO=e=>($de<<BigInt(e-1))-_1,O$=e=>new Uint8Array(e),uN=e=>Uint8Array.from(e);function _j(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=O$(e),i=O$(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...h)=>t(i,n,...h),l=(h=O$())=>{i=a(uN([0]),h),n=a(),h.length!==0&&(i=a(uN([1]),h),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const v=[];for(;h<r;){n=a();const g=n.slice();v.push(g),h+=n.length}return Yi(...v)};return(h,v)=>{o(),l(h);let g;for(;!(g=v(u()));)l();return o(),g}}const Ode={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Fd(e,r,t={}){const n=(i,s,o)=>{const a=Ode[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Ade=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Tde,bitLen:kde,bitMask:PO,bitSet:Ide,bytesToHex:yd,bytesToNumberBE:ci,bytesToNumberLE:CO,concatBytes:Yi,createHmacDrbg:_j,ensureBytes:zn,equalBytes:Sde,hexToBytes:md,hexToNumber:AO,numberToBytesBE:Bl,numberToBytesLE:wj,numberToHexUnpadded:bj,numberToVarBytesBE:Ede,utf8ToBytes:x1,validateObject:Fd},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const In=BigInt(0),Kr=BigInt(1),Nu=BigInt(2),Cde=BigInt(3),ZE=BigInt(4),cN=BigInt(5),hN=BigInt(8);BigInt(9);BigInt(16);function pn(e,r){const t=e%r;return t>=In?t:r+t}function Pde(e,r,t){if(t<=In||r<In)throw new Error("Expected power/modulo > 0");if(t===Kr)return In;let n=Kr;for(;r>In;)r&Kr&&(n=n*e%t),e=e*e%t,r>>=Kr;return n}function ys(e,r,t){let n=e;for(;r-- >In;)n*=n,n%=t;return n}function XE(e,r){if(e===In||r<=In)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=pn(e,r),n=r,i=In,s=Kr;for(;t!==In;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Kr)throw new Error("invert: does not exist");return pn(i,r)}function Nde(e){const r=(e-Kr)/Nu;let t,n,i;for(t=e-Kr,n=0;t%Nu===In;t/=Nu,n++);for(i=Nu;i<e&&Pde(i,r,e)!==e-Kr;i++);if(n===1){const o=(e+Kr)/ZE;return function(l,u){const d=l.pow(u,o);if(!l.eql(l.sqr(d),u))throw new Error("Cannot find square root");return d}}const s=(t+Kr)/Nu;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,d=a.pow(a.mul(a.ONE,i),t),h=a.pow(l,s),v=a.pow(l,t);for(;!a.eql(v,a.ONE);){if(a.eql(v,a.ZERO))return a.ZERO;let g=1;for(let m=a.sqr(v);g<u&&!a.eql(m,a.ONE);g++)m=a.sqr(m);const b=a.pow(d,Kr<<BigInt(u-g-1));d=a.sqr(b),h=a.mul(h,b),v=a.mul(v,d),u=g}return h}}function Rde(e){if(e%ZE===Cde){const r=(e+Kr)/ZE;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%hN===cN){const r=(e-cN)/hN;return function(n,i){const s=n.mul(i,Nu),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Nu),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Nde(e)}const Dde=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $j(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Dde.reduce((n,i)=>(n[i]="function",n),r);return Fd(e,t)}function Bde(e,r,t){if(t<In)throw new Error("Expected power > 0");if(t===In)return e.ONE;if(t===Kr)return r;let n=e.ONE,i=r;for(;t>In;)t&Kr&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Kr;return n}function Mde(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function NO(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Lde(e,r,t=!1,n={}){if(e<=In)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=NO(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Rde(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:PO(i),ZERO:In,ONE:Kr,create:l=>pn(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return In<=l&&l<e},is0:l=>l===In,isOdd:l=>(l&Kr)===Kr,neg:l=>pn(-l,e),eql:(l,u)=>l===u,sqr:l=>pn(l*l,e),add:(l,u)=>pn(l+u,e),sub:(l,u)=>pn(l-u,e),mul:(l,u)=>pn(l*u,e),pow:(l,u)=>Bde(a,l,u),div:(l,u)=>pn(l*XE(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>XE(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Mde(a,l),cmov:(l,u,d)=>d?u:l,toBytes:l=>t?wj(l,s):Bl(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?CO(l):ci(l)}});return Object.freeze(a)}function Fde(e,r,t=!1){e=zn("privateHash",e);const n=e.length,i=NO(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?CO(e):ci(e);return pn(s,r-Kr)+Kr}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jde=BigInt(0),A$=BigInt(1);function zde(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>jde;)s&A$&&(o=o.add(a)),a=a.double(),s>>=A$;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,d=u;for(let h=0;h<o;h++){d=u,l.push(d);for(let v=1;v<a;v++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,d=e.BASE;const h=BigInt(2**i-1),v=2**i,g=BigInt(i);for(let b=0;b<a;b++){const m=b*l;let x=Number(o&h);o>>=g,x>l&&(x-=v,o+=A$);const E=m,k=m+Math.abs(x)-1,$=b%2!==0,S=x<0;x===0?d=d.add(t($,s[E])):u=u.add(t(S,s[k]))}return{p:u,f:d}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function xj(e){return $j(e.Fp),Fd(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NO(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hde(e){const r=xj(e);Fd(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Ude,hexToBytes:Kde}=Ade,Ku={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Ku;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Ude(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Ku,t=typeof e=="string"?Kde(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Ku._parseInt(t.subarray(2)),{d:o,l:a}=Ku._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Vs=BigInt(0),Qr=BigInt(1),ta=BigInt(2),H0=BigInt(3),dN=BigInt(4);function Wde(e){const r=Hde(e),{Fp:t}=r,n=r.toBytes||((b,m,x)=>{const E=m.toAffine();return Yi(Uint8Array.from([4]),t.toBytes(E.x),t.toBytes(E.y))}),i=r.fromBytes||(b=>{const m=b.subarray(1),x=t.fromBytes(m.subarray(0,t.BYTES)),E=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x,y:E}});function s(b){const{a:m,b:x}=r,E=t.sqr(b),k=t.mul(E,b);return t.add(t.add(k,t.mul(b,m)),x)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(b){return typeof b=="bigint"&&Vs<b&&b<r.n}function a(b){if(!o(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(b){const{allowedPrivateKeyLengths:m,nByteLength:x,wrapPrivateKey:E,n:k}=r;if(m&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=yd(b)),typeof b!="string"||!m.includes(b.length))throw new Error("Invalid key");b=b.padStart(x*2,"0")}let $;try{$=typeof b=="bigint"?b:ci(zn("private key",b,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof b}`)}return E&&($=pn($,k)),a($),$}const u=new Map;function d(b){if(!(b instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(m,x,E){if(this.px=m,this.py=x,this.pz=E,m==null||!t.isValid(m))throw new Error("x required");if(x==null||!t.isValid(x))throw new Error("y required");if(E==null||!t.isValid(E))throw new Error("z required")}static fromAffine(m){const{x,y:E}=m||{};if(!m||!t.isValid(x)||!t.isValid(E))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const k=$=>t.eql($,t.ZERO);return k(x)&&k(E)?h.ZERO:new h(x,E,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const x=t.invertBatch(m.map(E=>E.pz));return m.map((E,k)=>E.toAffine(x[k])).map(h.fromAffine)}static fromHex(m){const x=h.fromAffine(i(zn("pointHex",m)));return x.assertValidity(),x}static fromPrivateKey(m){return h.BASE.multiply(l(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:m,y:x}=this.toAffine();if(!t.isValid(m)||!t.isValid(x))throw new Error("bad point: x or y not FE");const E=t.sqr(x),k=s(m);if(!t.eql(E,k))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){d(m);const{px:x,py:E,pz:k}=this,{px:$,py:S,pz:T}=m,O=t.eql(t.mul(x,T),t.mul($,k)),I=t.eql(t.mul(E,T),t.mul(S,k));return O&&I}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:x}=r,E=t.mul(x,H0),{px:k,py:$,pz:S}=this;let T=t.ZERO,O=t.ZERO,I=t.ZERO,P=t.mul(k,k),R=t.mul($,$),D=t.mul(S,S),F=t.mul(k,$);return F=t.add(F,F),I=t.mul(k,S),I=t.add(I,I),T=t.mul(m,I),O=t.mul(E,D),O=t.add(T,O),T=t.sub(R,O),O=t.add(R,O),O=t.mul(T,O),T=t.mul(F,T),I=t.mul(E,I),D=t.mul(m,D),F=t.sub(P,D),F=t.mul(m,F),F=t.add(F,I),I=t.add(P,P),P=t.add(I,P),P=t.add(P,D),P=t.mul(P,F),O=t.add(O,P),D=t.mul($,S),D=t.add(D,D),P=t.mul(D,F),T=t.sub(T,P),I=t.mul(D,R),I=t.add(I,I),I=t.add(I,I),new h(T,O,I)}add(m){d(m);const{px:x,py:E,pz:k}=this,{px:$,py:S,pz:T}=m;let O=t.ZERO,I=t.ZERO,P=t.ZERO;const R=r.a,D=t.mul(r.b,H0);let F=t.mul(x,$),K=t.mul(E,S),q=t.mul(k,T),W=t.add(x,E),M=t.add($,S);W=t.mul(W,M),M=t.add(F,K),W=t.sub(W,M),M=t.add(x,k);let G=t.add($,T);return M=t.mul(M,G),G=t.add(F,q),M=t.sub(M,G),G=t.add(E,k),O=t.add(S,T),G=t.mul(G,O),O=t.add(K,q),G=t.sub(G,O),P=t.mul(R,M),O=t.mul(D,q),P=t.add(O,P),O=t.sub(K,P),P=t.add(K,P),I=t.mul(O,P),K=t.add(F,F),K=t.add(K,F),q=t.mul(R,q),M=t.mul(D,M),K=t.add(K,q),q=t.sub(F,q),q=t.mul(R,q),M=t.add(M,q),F=t.mul(K,M),I=t.add(I,F),F=t.mul(G,M),O=t.mul(W,O),O=t.sub(O,F),F=t.mul(W,K),P=t.mul(G,P),P=t.add(P,F),new h(O,I,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,u,m,x=>{const E=t.invertBatch(x.map(k=>k.pz));return x.map((k,$)=>k.toAffine(E[$])).map(h.fromAffine)})}multiplyUnsafe(m){const x=h.ZERO;if(m===Vs)return x;if(a(m),m===Qr)return this;const{endo:E}=r;if(!E)return g.unsafeLadder(this,m);let{k1neg:k,k1:$,k2neg:S,k2:T}=E.splitScalar(m),O=x,I=x,P=this;for(;$>Vs||T>Vs;)$&Qr&&(O=O.add(P)),T&Qr&&(I=I.add(P)),P=P.double(),$>>=Qr,T>>=Qr;return k&&(O=O.negate()),S&&(I=I.negate()),I=new h(t.mul(I.px,E.beta),I.py,I.pz),O.add(I)}multiply(m){a(m);let x=m,E,k;const{endo:$}=r;if($){const{k1neg:S,k1:T,k2neg:O,k2:I}=$.splitScalar(x);let{p:P,f:R}=this.wNAF(T),{p:D,f:F}=this.wNAF(I);P=g.constTimeNegate(S,P),D=g.constTimeNegate(O,D),D=new h(t.mul(D.px,$.beta),D.py,D.pz),E=P.add(D),k=R.add(F)}else{const{p:S,f:T}=this.wNAF(x);E=S,k=T}return h.normalizeZ([E,k])[0]}multiplyAndAddUnsafe(m,x,E){const k=h.BASE,$=(T,O)=>O===Vs||O===Qr||!T.equals(k)?T.multiplyUnsafe(O):T.multiply(O),S=$(this,x).add($(m,E));return S.is0()?void 0:S}toAffine(m){const{px:x,py:E,pz:k}=this,$=this.is0();m==null&&(m=$?t.ONE:t.inv(k));const S=t.mul(x,m),T=t.mul(E,m),O=t.mul(k,m);if($)return{x:t.ZERO,y:t.ZERO};if(!t.eql(O,t.ONE))throw new Error("invZ was invalid");return{x:S,y:T}}isTorsionFree(){const{h:m,isTorsionFree:x}=r;if(m===Qr)return!0;if(x)return x(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:x}=r;return m===Qr?this:x?x(h,this):this.multiplyUnsafe(r.h)}toRawBytes(m=!0){return this.assertValidity(),n(h,this,m)}toHex(m=!0){return yd(this.toRawBytes(m))}}h.BASE=new h(r.Gx,r.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const v=r.nBitLength,g=zde(h,r.endo?Math.ceil(v/2):v);return{CURVE:r,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Vde(e){const r=xj(e);return Fd(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function qde(e){const r=Vde(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(M){return Vs<M&&M<t.ORDER}function a(M){return pn(M,n)}function l(M){return XE(M,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:v}=Wde({...r,toBytes(M,G,Q){const he=G.toAffine(),ue=t.toBytes(he.x),ke=Yi;return Q?ke(Uint8Array.from([G.hasEvenY()?2:3]),ue):ke(Uint8Array.from([4]),ue,t.toBytes(he.y))},fromBytes(M){const G=M.length,Q=M[0],he=M.subarray(1);if(G===i&&(Q===2||Q===3)){const ue=ci(he);if(!o(ue))throw new Error("Point is not on curve");const ke=h(ue);let Te=t.sqrt(ke);const Ce=(Te&Qr)===Qr;return(Q&1)===1!==Ce&&(Te=t.neg(Te)),{x:ue,y:Te}}else if(G===s&&Q===4){const ue=t.fromBytes(he.subarray(0,t.BYTES)),ke=t.fromBytes(he.subarray(t.BYTES,2*t.BYTES));return{x:ue,y:ke}}else throw new Error(`Point of length ${G} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=M=>yd(Bl(M,r.nByteLength));function b(M){const G=n>>Qr;return M>G}function m(M){return b(M)?a(-M):M}const x=(M,G,Q)=>ci(M.slice(G,Q));class E{constructor(G,Q,he){this.r=G,this.s=Q,this.recovery=he,this.assertValidity()}static fromCompact(G){const Q=r.nByteLength;return G=zn("compactSignature",G,Q*2),new E(x(G,0,Q),x(G,Q,2*Q))}static fromDER(G){const{r:Q,s:he}=Ku.toSig(zn("DER",G));return new E(Q,he)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new E(this.r,this.s,G)}recoverPublicKey(G){const{r:Q,s:he,recovery:ue}=this,ke=I(zn("msgHash",G));if(ue==null||![0,1,2,3].includes(ue))throw new Error("recovery id invalid");const Te=ue===2||ue===3?Q+r.n:Q;if(Te>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ce=ue&1?"03":"02",Ye=u.fromHex(Ce+g(Te)),ge=l(Te),ce=a(-ke*ge),ye=a(he*ge),fe=u.BASE.multiplyAndAddUnsafe(Ye,ce,ye);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return md(this.toDERHex())}toDERHex(){return Ku.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return md(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const k={isValidPrivateKey(M){try{return d(M),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const M=r.randomBytes(t.BYTES+8),G=Fde(M,n);return Bl(G,r.nByteLength)},precompute(M=8,G=u.BASE){return G._setWindowSize(M),G.multiply(BigInt(3)),G}};function $(M,G=!0){return u.fromPrivateKey(M).toRawBytes(G)}function S(M){const G=M instanceof Uint8Array,Q=typeof M=="string",he=(G||Q)&&M.length;return G?he===i||he===s:Q?he===2*i||he===2*s:M instanceof u}function T(M,G,Q=!0){if(S(M))throw new Error("first arg must be private key");if(!S(G))throw new Error("second arg must be public key");return u.fromHex(G).multiply(d(M)).toRawBytes(Q)}const O=r.bits2int||function(M){const G=ci(M),Q=M.length*8-r.nBitLength;return Q>0?G>>BigInt(Q):G},I=r.bits2int_modN||function(M){return a(O(M))},P=PO(r.nBitLength);function R(M){if(typeof M!="bigint")throw new Error("bigint expected");if(!(Vs<=M&&M<P))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Bl(M,r.nByteLength)}function D(M,G,Q=F){if(["recovered","canonical"].some(w=>w in Q))throw new Error("sign() legacy options not supported");const{hash:he,randomBytes:ue}=r;let{lowS:ke,prehash:Te,extraEntropy:Ce}=Q;ke==null&&(ke=!0),M=zn("msgHash",M),Te&&(M=zn("prehashed msgHash",he(M)));const Ye=I(M),ge=d(G),ce=[R(ge),R(Ye)];if(Ce!=null){const w=Ce===!0?ue(t.BYTES):Ce;ce.push(zn("extraEntropy",w,t.BYTES))}const ye=Yi(...ce),fe=Ye;function y(w){const A=O(w);if(!v(A))return;const N=l(A),B=u.BASE.multiply(A).toAffine(),j=a(B.x);if(j===Vs)return;const X=a(N*a(fe+j*ge));if(X===Vs)return;let re=(B.x===j?0:2)|Number(B.y&Qr),Ee=X;return ke&&b(X)&&(Ee=m(X),re^=1),new E(j,Ee,re)}return{seed:ye,k2sig:y}}const F={lowS:r.lowS,prehash:!1},K={lowS:r.lowS,prehash:!1};function q(M,G,Q=F){const{seed:he,k2sig:ue}=D(M,G,Q);return _j(r.hash.outputLen,r.nByteLength,r.hmac)(he,ue)}u.BASE._setWindowSize(8);function W(M,G,Q,he=K){var B;const ue=M;if(G=zn("msgHash",G),Q=zn("publicKey",Q),"strict"in he)throw new Error("options.strict was renamed to lowS");const{lowS:ke,prehash:Te}=he;let Ce,Ye;try{if(typeof ue=="string"||ue instanceof Uint8Array)try{Ce=E.fromDER(ue)}catch(j){if(!(j instanceof Ku.Err))throw j;Ce=E.fromCompact(ue)}else if(typeof ue=="object"&&typeof ue.r=="bigint"&&typeof ue.s=="bigint"){const{r:j,s:X}=ue;Ce=new E(j,X)}else throw new Error("PARSE");Ye=u.fromHex(Q)}catch(j){if(j.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ke&&Ce.hasHighS())return!1;Te&&(G=r.hash(G));const{r:ge,s:ce}=Ce,ye=I(G),fe=l(ce),y=a(ye*fe),w=a(ge*fe),A=(B=u.BASE.multiplyAndAddUnsafe(Ye,y,w))==null?void 0:B.toAffine();return A?a(A.x)===ge:!1}return{CURVE:r,getPublicKey:$,getSharedSecret:T,sign:q,verify:W,ProjectivePoint:u,Signature:E,utils:k}}function Gde(e,r){const t=e.ORDER;let n=Vs;for(let v=t-Qr;v%ta===Vs;v/=ta)n+=Qr;const i=n,s=(t-Qr)/ta**i,o=(s-Qr)/ta,a=ta**i-Qr,l=ta**(i-Qr),u=e.pow(r,s),d=e.pow(r,(s+Qr)/ta);let h=(v,g)=>{let b=u,m=e.pow(g,a),x=e.sqr(m);x=e.mul(x,g);let E=e.mul(v,x);E=e.pow(E,o),E=e.mul(E,m),m=e.mul(E,g),x=e.mul(E,v);let k=e.mul(x,m);E=e.pow(k,l);let $=e.eql(E,e.ONE);m=e.mul(x,d),E=e.mul(k,b),x=e.cmov(m,x,$),k=e.cmov(E,k,$);for(let S=i;S>Qr;S--){let T=ta**(S-ta),O=e.pow(k,T);const I=e.eql(O,e.ONE);m=e.mul(x,b),b=e.mul(b,b),O=e.mul(k,b),x=e.cmov(m,x,I),k=e.cmov(O,k,I)}return{isValid:$,value:x}};if(e.ORDER%dN===H0){const v=(e.ORDER-H0)/dN,g=e.sqrt(e.neg(r));h=(b,m)=>{let x=e.sqr(m);const E=e.mul(b,m);x=e.mul(x,E);let k=e.pow(x,v);k=e.mul(k,E);const $=e.mul(k,g),S=e.mul(e.sqr(k),m),T=e.eql(S,b);let O=e.cmov($,k,T);return{isValid:T,value:O}}}return h}function Yde(e,r){if($j(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=Gde(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,d,h;i=e.sqr(n),i=e.mul(i,r.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,r.B),a=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,r.A),s=e.sqr(o),u=e.sqr(a),l=e.mul(u,r.A),s=e.add(s,l),s=e.mul(s,o),u=e.mul(u,a),l=e.mul(u,r.B),s=e.add(s,l),d=e.mul(i,o);const{isValid:v,value:g}=t(s,u);h=e.mul(i,n),h=e.mul(h,g),d=e.cmov(d,o,v),h=e.cmov(h,g,v);const b=e.isOdd(n)===e.isOdd(h);return h=e.cmov(e.neg(h),h,b),d=e.div(d,a),{x:d,y:h}}}function Zde(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return x1(e);throw new Error("DST must be Uint8Array or string")}const Xde=ci;function El(e,r){if(e<0||e>=1<<8*r)throw new Error(`bad I2OSP call: value=${e} length=${r}`);const t=Array.from({length:r}).fill(0);for(let n=r-1;n>=0;n--)t[n]=e&255,e>>>=8;return new Uint8Array(t)}function Jde(e,r){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function zp(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function RO(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Qde(e,r,t,n){zp(e),zp(r),RO(t),r.length>255&&(r=n(Yi(x1("H2C-OVERSIZE-DST-"),r)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(t/i);if(o>255)throw new Error("Invalid xmd length");const a=Yi(r,El(r.length,1)),l=El(0,s),u=El(t,2),d=new Array(o),h=n(Yi(l,e,u,El(0,1),a));d[0]=n(Yi(h,El(1,1),a));for(let g=1;g<=o;g++){const b=[Jde(h,d[g-1]),El(g+1,1),a];d[g]=n(Yi(...b))}return Yi(...d).slice(0,t)}function efe(e,r,t,n,i){if(zp(e),zp(r),RO(t),r.length>255){const s=Math.ceil(2*n/8);r=i.create({dkLen:s}).update(x1("H2C-OVERSIZE-DST-")).update(r).digest()}if(t>65535||r.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(e).update(El(t,2)).update(r).update(El(r.length,1)).digest()}function fN(e,r,t){Fd(t,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:l}=t;zp(e),RO(r);const u=Zde(l),d=n.toString(2).length,h=Math.ceil((d+i)/8),v=r*s*h;let g;if(a==="xmd")g=Qde(e,u,v,o);else if(a==="xof")g=efe(e,u,v,i,o);else if(a==="_internal_pass")g=e;else throw new Error('expand must be "xmd" or "xof"');const b=new Array(r);for(let m=0;m<r;m++){const x=new Array(s);for(let E=0;E<s;E++){const k=h*(E+m*s),$=g.subarray(k,k+h);x[E]=pn(Xde($),n)}b[m]=x}return b}function tfe(e,r){const t=r.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,l]=t.map(u=>u.reduce((d,h)=>e.add(e.mul(d,n),h)));return n=e.div(s,o),i=e.mul(i,e.div(a,l)),{x:n,y:i}}}function rfe(e,r,t){if(typeof r!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=fN(n,2,{...t,DST:t.DST,...i}),o=e.fromAffine(r(s[0])),a=e.fromAffine(r(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=fN(n,1,{...t,DST:t.encodeDST,...i}),o=e.fromAffine(r(s[0])).clearCofactor();return o.assertValidity(),o}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nfe(e){return{hash:e,hmac:(r,...t)=>z0(e,r,Jf(...t)),randomBytes:dj}}function ife(e,r){const t=n=>qde({...e,...nfe(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const E1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),U0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ej=BigInt(1),K0=BigInt(2),pN=(e,r)=>(e+r/K0)/r;function Sj(e){const r=E1,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,d=u*u*e%r,h=ys(d,t,r)*d%r,v=ys(h,t,r)*d%r,g=ys(v,K0,r)*u%r,b=ys(g,i,r)*g%r,m=ys(b,s,r)*b%r,x=ys(m,a,r)*m%r,E=ys(x,l,r)*x%r,k=ys(E,a,r)*m%r,$=ys(k,t,r)*d%r,S=ys($,o,r)*b%r,T=ys(S,n,r)*u%r,O=ys(T,K0,r);if(!Kl.eql(Kl.sqr(O),e))throw new Error("Cannot find square root");return O}const Kl=Lde(E1,void 0,void 0,{sqrt:Sj}),Wi=ife({a:BigInt(0),b:BigInt(7),Fp:Kl,n:U0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=U0,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ej*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=pN(s*e,r),l=pN(-n*e,r);let u=pn(e-a*t-l*i,r),d=pn(-a*n-l*s,r);const h=u>o,v=d>o;if(h&&(u=r-u),v&&(d=r-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:v,k2:d}}}},gd),S1=BigInt(0),kj=e=>typeof e=="bigint"&&S1<e&&e<E1,sfe=e=>typeof e=="bigint"&&S1<e&&e<U0,vN={};function W0(e,...r){let t=vN[e];if(t===void 0){const n=gd(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Yi(n,n),vN[e]=t}return gd(Yi(t,...r))}const DO=e=>e.toRawBytes(!0).slice(1),JE=e=>Bl(e,32),C$=e=>pn(e,E1),Hp=e=>pn(e,U0),BO=Wi.ProjectivePoint,ofe=(e,r,t)=>BO.BASE.multiplyAndAddUnsafe(e,r,t);function QE(e){let r=Wi.utils.normPrivateKeyToScalar(e),t=BO.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Hp(-r),bytes:DO(t)}}function Tj(e){if(!kj(e))throw new Error("bad x: need 0 < x < p");const r=C$(e*e),t=C$(r*e+BigInt(7));let n=Sj(t);n%K0!==S1&&(n=C$(-n));const i=new BO(e,n,Ej);return i.assertValidity(),i}function Ij(...e){return Hp(ci(W0("BIP0340/challenge",...e)))}function afe(e){return QE(e).bytes}function lfe(e,r,t=dj(32)){const n=zn("message",e),{bytes:i,scalar:s}=QE(r),o=zn("auxRand",t,32),a=JE(s^ci(W0("BIP0340/aux",o))),l=W0("BIP0340/nonce",a,i,n),u=Hp(ci(l));if(u===S1)throw new Error("sign failed: k is zero");const{bytes:d,scalar:h}=QE(u),v=Ij(d,i,n),g=new Uint8Array(64);if(g.set(d,0),g.set(JE(Hp(h+v*s)),32),!Oj(g,n,i))throw new Error("sign: Invalid signature produced");return g}function Oj(e,r,t){const n=zn("signature",e,64),i=zn("message",r),s=zn("publicKey",t,32);try{const o=Tj(ci(s)),a=ci(n.subarray(0,32));if(!kj(a))return!1;const l=ci(n.subarray(32,64));if(!sfe(l))return!1;const u=Ij(JE(a),DO(o),i),d=ofe(o,l,Hp(-u));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}Wi.utils.randomPrivateKey;const ufe=tfe(Kl,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(r=>BigInt(r)))),cfe=Yde(Kl,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Kl.create(BigInt("-11"))});rfe(Wi.ProjectivePoint,e=>{const{x:r,y:t}=cfe(Kl.create(e[0]));return ufe(r,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Kl.ORDER,m:1,k:128,expand:"xmd",hash:gd});const Wy=Wi.ProjectivePoint,P$=uO(gd);function gN(e){return BigInt(`0x${Dhe(e)}`)}function hfe(e){return Bhe(e.toString(16).padStart(64,"0"))}const dfe=cj("Bitcoin seed"),N$={private:76066276,public:76067358},R$=2147483648,ffe=e=>Whe(gd(e)),pfe=e=>Yh(e).getUint32(0,!1),Vy=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return Yh(r).setUint32(0,e,!1),r};class Ru{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return pfe(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return P$.encode(this.serialize(this.versions.private,Jf(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return P$.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=N$){if(Pu(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=z0(lN,dfe,r);return new Ru({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=N$){const n=P$.decode(r),i=Yh(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Ru({...o,privateKey:a.slice(1)}):new Ru({...o,publicKey:a})}static fromJSON(r){return Ru.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||N$,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!Wi.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:gN(r.privateKey),this.privKeyBytes=hfe(this.privKey),this.pubKey=Wi.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=Wy.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=ffe(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=R$)throw new Error("Invalid index");s[2]==="'"&&(o+=R$),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Vy(r);if(r>=R$){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Jf(new Uint8Array([0]),a,t)}else t=Jf(this.pubKey,t);const n=z0(lN,this.chainCode,t),i=gN(n.slice(0,32)),s=n.slice(32);if(!Wi.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=pn(this.privKey+i,Wi.CURVE.n);if(!Wi.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=Wy.fromHex(this.pubKey).add(Wy.fromPrivateKey(i));if(a.equals(Wy.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Ru(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Pu(r,32),Wi.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Pu(r,32),Pu(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Wi.Signature.fromCompact(t)}catch{return!1}return Wi.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Pu(t,33),Jf(Vy(r),new Uint8Array([this.depth]),Vy(this.parentFingerprint),Vy(this.index),this.chainCode,t)}}var vfe=Object.defineProperty,ei=(e,r)=>{for(var t in r)vfe(e,t,{get:r[t],enumerable:!0})};function Aj(e){return ur(lo.getPublicKey(e))}var gfe={};ei(gfe,{insertEventIntoAscendingList:()=>bfe,insertEventIntoDescendingList:()=>mfe,normalizeURL:()=>yfe,utf8Decoder:()=>Il,utf8Encoder:()=>Bo});var Il=new TextDecoder("utf-8"),Bo=new TextEncoder;function yfe(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function mfe(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function bfe(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var fn=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(fn||{});function Cj(e,r){let t=e;return t.pubkey=Aj(r),t.id=MO(t),t.sig=$fe(t,r),t}function wfe(e){if(!LO(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function MO(e){let r=hi(Bo.encode(wfe(e)));return ur(r)}var _fe=e=>e instanceof Object;function LO(e){if(!_fe(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function FO(e){try{return lo.verify(e.sig,MO(e),e.pubkey)}catch{return!1}}function $fe(e,r){return ur(lo.sign(MO(e),r))}function Pj(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>=e.until)}function xfe(e,r){for(let t=0;t<e.length;t++)if(Pj(e[t],r))return!0;return!1}var Efe={};ei(Efe,{getHex64:()=>jO,getInt:()=>Nj,getSubscriptionId:()=>Sfe,matchEventId:()=>kfe,matchEventKind:()=>Ife,matchEventPubkey:()=>Tfe});function jO(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function Nj(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Sfe(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function kfe(e,r){return r===jO(e,"id")}function Tfe(e,r){return r===jO(e,"pubkey")}function Ife(e,r){return r===Nj(e,"kind")}var Ofe={};ei(Ofe,{BECH32_REGEX:()=>Rj,decode:()=>k1,naddrEncode:()=>Dfe,neventEncode:()=>Rfe,noteEncode:()=>Pfe,nprofileEncode:()=>Nfe,npubEncode:()=>Cfe,nrelayEncode:()=>Bfe,nsecEncode:()=>Afe});var jd=5e3,Rj=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function k1(e){var i,s,o,a,l,u,d;let{prefix:r,words:t}=qr.decode(e,jd),n=new Uint8Array(qr.fromWords(t));switch(r){case"nprofile":{let h=qy(n);if(!((i=h[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ur(h[0][0]),relays:h[1]?h[1].map(v=>Il.decode(v)):[]}}}case"nevent":{let h=qy(n);if(!((s=h[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(h[2]&&h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:ur(h[0][0]),relays:h[1]?h[1].map(v=>Il.decode(v)):[],author:(o=h[2])!=null&&o[0]?ur(h[2][0]):void 0}}}case"naddr":{let h=qy(n);if(!((a=h[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=h[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=h[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(h[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Il.decode(h[0][0]),pubkey:ur(h[2][0]),kind:parseInt(ur(h[3][0]),16),relays:h[1]?h[1].map(v=>Il.decode(v)):[]}}}case"nrelay":{let h=qy(n);if(!((d=h[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Il.decode(h[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:ur(n)};default:throw new Error(`unknown prefix ${r}`)}}function qy(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1],s=t.slice(2,2+i);t=t.slice(2+i),!(s.length<i)&&(r[n]=r[n]||[],r[n].push(s))}return r}function Afe(e){return zO("nsec",e)}function Cfe(e){return zO("npub",e)}function Pfe(e){return zO("note",e)}function zO(e,r){let t=Qi(r),n=qr.toWords(t);return qr.encode(e,n,jd)}function Nfe(e){let r=T1({0:[Qi(e.pubkey)],1:(e.relays||[]).map(n=>Bo.encode(n))}),t=qr.toWords(r);return qr.encode("nprofile",t,jd)}function Rfe(e){let r=T1({0:[Qi(e.id)],1:(e.relays||[]).map(n=>Bo.encode(n)),2:e.author?[Qi(e.author)]:[]}),t=qr.toWords(r);return qr.encode("nevent",t,jd)}function Dfe(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=T1({0:[Bo.encode(e.identifier)],1:(e.relays||[]).map(i=>Bo.encode(i)),2:[Qi(e.pubkey)],3:[new Uint8Array(r)]}),n=qr.toWords(t);return qr.encode("naddr",n,jd)}function Bfe(e){let r=T1({0:[Bo.encode(e)]}),t=qr.toWords(r);return qr.encode("nrelay",t,jd)}function T1(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),zu(...r)}var Mfe={};ei(Mfe,{decrypt:()=>Ffe,encrypt:()=>Lfe});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function Lfe(e,r,t){const n=Yn.getSharedSecret(e,"02"+r),i=Dj(n);let s=Uint8Array.from(o1(16)),o=Bo.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Cs.encode(new Uint8Array(l)),d=Cs.encode(new Uint8Array(s.buffer));return`${u}?iv=${d}`}async function Ffe(e,r,t){let[n,i]=t.split("?iv="),s=Yn.getSharedSecret(e,"02"+r),o=Dj(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Cs.decode(n),u=Cs.decode(i),d=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return Il.decode(d)}function Dj(e){return e.slice(1,33)}var jfe={};ei(jfe,{NIP05_REGEX:()=>Bj,queryProfile:()=>Ufe,searchDomain:()=>Hfe,useFetchImplementation:()=>zfe});var Bj=/^(?:([\w.+-]+)@)?([\w.-]+)$/,I1;try{I1=fetch}catch{}function zfe(e){I1=e}async function Hfe(e,r=""){try{return(await(await I1(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function Ufe(e){const r=e.match(Bj);if(!r)return null;const[t,n="_",i]=r;try{const s=await I1(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=Kfe(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function Kfe(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var Wfe={};ei(Wfe,{generateSeedWords:()=>qfe,privateKeyFromSeedWords:()=>Vfe,validateWords:()=>Gfe});function Vfe(e,r){let n=Ru.fromMasterSeed(JF(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return ur(n)}function qfe(){return ij(xO)}function Gfe(e){return lj(e,xO)}var Yfe={};ei(Yfe,{parse:()=>Zfe});function Zfe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},d=n===0,h=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(d){r.root=u;continue}if(h){r.reply=u;continue}r.mentions.push(u)}return r}var Xfe={};ei(Xfe,{getPow:()=>Jfe});function Jfe(e){return Qfe(Qi(e))}function Qfe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=epe(e[t]),r+=n,n===8);t++);return r}function epe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var tpe={};ei(tpe,{finishRepostEvent:()=>rpe,getRepostedEvent:()=>npe,getRepostedEventPointer:()=>Mj});function rpe(e,r,t,n){return Cj({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function Mj(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function npe(e,{skipVerification:r}={}){const t=Mj(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!FO(n)))return n}var ipe={};ei(ipe,{NOSTR_URI_REGEX:()=>O1,parse:()=>ope,test:()=>spe});var O1=new RegExp(`nostr:(${Rj.source})`);function spe(e){return typeof e=="string"&&new RegExp(`^${O1.source}$`).test(e)}function ope(e){const r=e.match(new RegExp(`^${O1.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:k1(r[1])}}var ape={};ei(ape,{finishReactionEvent:()=>lpe,getReactedEventPointer:()=>upe});function lpe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return Cj({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function upe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var cpe={};ei(cpe,{createDelegation:()=>hpe,getDelegator:()=>dpe});function hpe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=hi(Bo.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=ur(lo.sign(i,e));return{from:Aj(e),to:r.pubkey,cond:n,sig:s}}function dpe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,d]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(d))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(d))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(d))continue;return null}}let o=hi(Bo.encode(`nostr:delegation:${e.pubkey}:${n}`));return lo.verify(i,o,t)?t:null}var fpe={};ei(fpe,{matchAll:()=>ppe,regex:()=>HO,replaceAll:()=>vpe});var HO=()=>new RegExp(`\\b${O1.source}\\b`,"g");function*ppe(e){const r=e.matchAll(HO());for(const t of r){const[n,i]=t;yield{uri:n,value:i,decoded:k1(i),start:t.index,end:t.index+n.length}}}function vpe(e,r){return e.replaceAll(HO(),(t,n)=>r({uri:t,value:n,decoded:k1(n)}))}var gpe={};ei(gpe,{useFetchImplementation:()=>ype,validateGithub:()=>mpe});var UO;try{UO=fetch}catch{}function ype(e){UO=e}async function mpe(e,r,t){try{return await(await UO(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var bpe={};ei(bpe,{authenticate:()=>wpe});var wpe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},_pe={};ei(_pe,{getZapEndpoint:()=>xpe,makeZapReceipt:()=>kpe,makeZapRequest:()=>Epe,useFetchImplementation:()=>$pe,validateZapRequest:()=>Spe});var KO;try{KO=fetch}catch{}function $pe(e){KO=e}async function xpe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=qr.decode(t,1e3),a=qr.fromWords(o);r=Il.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await KO(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Epe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Spe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!LO(r))return"Zap request is not a valid Nostr event.";if(!FO(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function kpe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Sh=null;typeof WebSocket<"u"?Sh=WebSocket:typeof MozWebSocket<"u"?Sh=MozWebSocket:typeof global<"u"?Sh=global.WebSocket||global.MozWebSocket:typeof window<"u"?Sh=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Sh=self.WebSocket||self.MozWebSocket);const Tpe=Sh;function D$(e,r){let t={...e};return delete t[r],r+nhe(t)}function Qm(e){let r=[],t=new Map,n=[];for(let i of e){let s=!1;for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){if(i[o].length===0){s=!0;break}let a=D$(i,o),l=t.get(a);if(l!==void 0){let u=r[l];for(let d in u)if(d!==o){let h=D$(u,d);t.delete(h)}if(r[l][o]instanceof Set)for(let d of i[o])r[l][o].add(d);else r[l][o]=new Set(r[l][o].concat(i[o])),n.push([l,o]);s=!0;break}}if(!s){for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){let a=D$(i,o);t.set(a,r.length)}r.push({...i})}}for(let[i,s]of n)r[i][s]=Array.from(r[i][s]);return r}function Ipe(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function Ope(e){let r=e.indexOf('"EVENT"')+7,t=e.slice(r),n=t.indexOf('"')+1,i=t.slice(n);return i.slice(0,i.indexOf('"'))}function Ape(e,r,t){return new Cpe(e,r,t).relayInit()}var Fb,Lj,jb,Fj,zb,jj,Hb,zj,Ub,Hj,Kb,Uj,nL,Cpe=(nL=class{constructor(e,r,t){yr(this,Fb);yr(this,jb);yr(this,zb);yr(this,Hb);yr(this,Ub);yr(this,Kb);Z(this,"url");Z(this,"alreadyHaveEvent");Z(this,"logging",!1);Z(this,"autoReconnect");Z(this,"ws");Z(this,"sendOnConnect",[]);Z(this,"openSubs",{});Z(this,"closedByClient",!1);Z(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});Z(this,"subListeners",{});Z(this,"pubListeners",{});Z(this,"incomingMessageQueue",[]);Z(this,"handleNextInterval");Z(this,"resolveClose");Z(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=r,this.autoReconnect=t}async trySend(e){var t;const r=JSON.stringify(e);this.connected?(t=this.ws)==null||t.send(r):this.sendOnConnect.push(r)}async connectRelay(){return new Promise((e,r)=>{try{const t=new Tpe(this.url);this.ws=t}catch(t){r(t);return}this.ws.onopen=dn(this,Kb,Uj).bind(this,e),this.ws.onerror=t=>{this.listeners.error.forEach(n=>n()),r(t)},this.ws.onclose=dn(this,jb,Fj).bind(this),this.ws.onmessage=dn(this,Hb,zj).bind(this)})}async connect(){var e,r;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((r=this.ws)==null?void 0:r.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(r=>{this.resolveClose=r})}on(e,r){var t;this.listeners[e].push(r),e==="connect"&&((t=this.ws)==null?void 0:t.readyState)===1&&r()}off(e,r){const t=this.listeners[e].indexOf(r);t!==-1&&this.listeners[e].splice(t,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,r){const t=this;if(!e.id)throw new Error(`event ${e} has no id`);const n=e.id;let i=!1,s=!1;t.trySend([r,e]).then(()=>{i=!0,s&&(o(),s=!1)}).catch(()=>{});const o=()=>{const a=this.sub([{ids:[n]}],{id:`monitor-${n.slice(0,5)}`}),l=setTimeout(()=>{var u;(((u=t.pubListeners[n])==null?void 0:u.failed)||[]).forEach(d=>d("event not seen after 5 seconds")),a.unsub()},5e3);a.on("event",()=>{var u;clearTimeout(l),(((u=t.pubListeners[n])==null?void 0:u.seen)||[]).forEach(d=>d())})};return{on:(a,l)=>{t.pubListeners[n]=t.pubListeners[n]||{ok:[],seen:[],failed:[]},t.pubListeners[n][a].push(l),a==="seen"&&(i?o():s=!0)},off:(a,l)=>{const u=t.pubListeners[n];if(!u)return;const d=u[a].indexOf(l);d>=0&&u[a].splice(d,1)}}}sub(e,r={}){const t=this,n=r.id||Math.random().toString().slice(2),i=r.skipVerification||!1;return t.openSubs[n]={id:n,filters:e,skipVerification:i},t.connected&&(this.logging&&console.log("REQ2",this.url,n,...e),t.trySend(["REQ",n,...e])),{sub:(s,o={})=>this.sub(s||e,{skipVerification:o.skipVerification||i,id:n}),unsub:()=>{delete t.openSubs[n],delete t.subListeners[n],t.connected&&(t.logging&&console.log("CLOSE",this.url,n),t.trySend(["CLOSE",n]))},on:(s,o)=>{t.subListeners[n]=t.subListeners[n]||{event:[],eose:[]},t.subListeners[n][s].push(o)},off:(s,o)=>{const a=t.subListeners[n];if(!a)return;const l=a[s].indexOf(o);l>=0&&a[s].splice(l,1)}}}},Fb=new WeakSet,Lj=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}dn(this,Ub,Hj).call(this,{data:this.incomingMessageQueue.shift()})},jb=new WeakSet,Fj=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&dn(this,zb,jj).call(this)},zb=new WeakSet,jj=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},Hb=new WeakSet,zj=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>dn(this,Fb,Lj).call(this),0))},Ub=new WeakSet,Hj=async function(e){var s,o,a,l,u,d,h;let r,t=e.data.toString();if(!t)return;let n=Ipe(t,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,n);if(i){const v=this.subListeners[Ope(t)];return v?v.event.forEach(g=>g(i)):void 0}try{r=JSON.parse(t)}catch{r=e.data}if(r.length>=1)switch(r[0]){case"EVENT":if(this.logging&&console.log(r),r.length!==3)return;const v=r[1],g=r[2];if(!this.openSubs[v]||(o=this.openSubs[v].eventIds)!=null&&o.has(n))return;(a=this.openSubs[v].eventIds)==null||a.add(n),LO(g)&&this.openSubs[v]&&(this.openSubs[v].skipVerification||FO(g))&&xfe(this.openSubs[v].filters,g)&&(this.openSubs[v],(((l=this.subListeners[v])==null?void 0:l.event)||[]).forEach(x=>x(g)));return;case"EOSE":{if(r.length!==2)return;const x=r[1];this.logging&&console.log("EOSE",this.url,x),(((u=this.subListeners[x])==null?void 0:u.eose)||[]).forEach(E=>E());return}case"OK":{if(r.length<3)return;const x=r[1],E=r[2],k=r[3]||"";E?(d=this.pubListeners[x])==null||d.ok.forEach($=>$()):(h=this.pubListeners[x])==null||h.failed.forEach($=>$(k));return}case"NOTICE":if(r.length!==2)return;const b=r[1];this.listeners.notice.forEach(x=>x(b));return;case"AUTH":if(r.length!==2)return;const m=r[1];this.listeners.auth.forEach(x=>x(m));return}},Kb=new WeakSet,Uj=function(e){var r;if(this.resolveClose){this.resolveClose();return}for(const t in this.openSubs)this.logging&&console.log("REQ",this.url,t,...this.openSubs[t].filters),this.trySend(["REQ",t,...this.openSubs[t].filters]);for(const t of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,t),(r=this.ws)==null||r.send(t);this.sendOnConnect=[],this.listeners.connect.forEach(t=>t()),e()},nL),Wb,Kj,Vb,Wj,RI,Npe,qb,Vj,Gb,qj,Yb,Gj,iL,Ppe=(iL=class{constructor(){yr(this,Wb);yr(this,Vb);yr(this,RI);yr(this,qb);yr(this,Gb);yr(this,Yb);Z(this,"eventsById",new Map);Z(this,"metadataByPubKey",new Map);Z(this,"contactsByPubKey",new Map);Z(this,"authorsKindsByPubKey",new Map);Z(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===fn.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===fn.Contacts&&this.contactsByPubKey.set(e.pubkey,e),dn(this,Wb,Kj).call(this,e),dn(this,Vb,Wj).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,r){const t=new Set,n=[];for(const i of e){const s=dn(this,Yb,Gj).call(this,i)||dn(this,qb,Vj).call(this,i)||dn(this,Gb,qj).call(this,i)||{filter:i,events:[]};for(const o of s.events)t.add(o);n.push(s.filter)}return{filters:n,events:[...t]}}},Wb=new WeakSet,Kj=function(e){const r=this.authorsKindsByPubKey.get(e.pubkey);if(!r)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const t=r.get(e.kind);t?e.kind===fn.Metadata||e.kind===fn.Contacts?e.created_at>t[0].created_at&&(t[0]=e):t.push(e):r.set(e.kind,[e])}},Vb=new WeakSet,Wj=function(e){for(const r of e.tags){let t=r[0]+":"+r[1];const n=this.eventsByTags.get(t);n?n.push(e):this.eventsByTags.set(t,[e])}},RI=new WeakSet,Npe=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(n=>n!==fn.Contacts&&n!==fn.Metadata)!==void 0)return;const r=[],t=new Set;for(const n of e.authors){let i;if(e.kinds.includes(fn.Contacts)&&(i=this.contactsByPubKey.get(n),!i)){r.push(n);continue}let s;if(e.kinds.includes(fn.Metadata)&&(s=this.metadataByPubKey.get(n),!s)){r.push(n);continue}i&&t.add(i),s&&t.add(s)}return{filter:{...e,authors:r},events:t}},qb=new WeakSet,Vj=function(e){if(e.noCache||!e.authors)return;const r=new Set;for(const t of e.authors)if(e.kinds){const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of e.kinds){const s=n.get(i);if(s)for(const o of s)r.add(o)}}else{const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of n.values())for(const s of i)r.add(s)}return{filter:e,events:r}},Gb=new WeakSet,qj=function(e){if(e.noCache)return;const r=new Set;for(const t in e){if(t[0]!=="#")continue;let n=t.slice(1)+":"+e[t][0];const i=this.eventsByTags.get(n);if(i)for(const s of i)r.add(s)}return{filter:e,events:r}},Yb=new WeakSet,Gj=function(e){if(!e.ids)return;const r=new Set,t=[];for(const n of e.ids){const i=this.getEventById(n);i?r.add(i):t.push(n)}return{filter:{...e,ids:t},events:r}},iL),Yj=class{constructor(r,t,n){Z(this,"pubkey");Z(this,"relayPool");Z(this,"relays");this.pubkey=n,this.relayPool=r,this.relays=t}metaData(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[fn.Metadata]}],this.relays,r,t)}subscribe(r,t,n){return this.relayPool.subscribeEventObject(r.map(i=>({authors:[this.pubkey],...i})),this.relays,t,n)}followsPubkeys(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[fn.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)s[0]==="p"&&i.push(s[1]);r(i)},t)}follows(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[fn.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)if(s[0]==="p"){let o=this.relays;s[1]&&(o=[s[1],...this.relays||[]]),i.push(new Yj(this.relayPool,o,s[1]))}r(i)},t)}secondFollows(r,t,n=!0){return this.followsPubkeys(i=>{let s=new Map;for(const o of i)this.relayPool.subscribeEventObject([{authors:[o],kinds:[fn.Contacts]}],this.relays,a=>{let l=1/a.tags.length;for(const u of a.tags)if(u[0]==="p"){let d=s.get(u[1]);d?d+=l:d=l,s.set(u[1],d)}if(n)for(const u of i)s.delete(u);r(Array.from(s.entries()).sort((u,d)=>d[1]-u[1]))},t)},t)}allEvents(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,r,n)}referenced(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,r,n)}followers(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[fn.Contacts],limit:t}],this.relays,r,n)}sentAndRecievedDMs(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[fn.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[fn.EncryptedDirectMessage],limit:t}],this.relays,r,n)}text(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[fn.Text],limit:t}],this.relays,r,n)}},eS=class{constructor(e,r,t){Z(this,"id");Z(this,"kind");Z(this,"pubkey");Z(this,"tags");Z(this,"created_at");Z(this,"content");Z(this,"relayPool");Z(this,"relays");Z(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=r,this.relays=t,this.sig=e.sig}referencedAuthors(){const e=[];for(const r of this.tags)r[0]==="p"&&e.push(new Yj(this.relayPool,void 0,r[1]));return e}referencedEvents(e){const r=[];for(const t of this.tags)if(t[0]==="e"){let n=this.relays;t[2]&&(n=[t[2],...n||[]]),r.push(this.relayPool.getEventById(t[1],n,e).then(i=>new eS(i,this.relayPool,this.relays)))}return r}thread(e,r){let t=this.relays,n=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(t=[i[2],...t||[]]),n.push(i[1]));return this.relayPool.subscribe([{ids:n},{"#e":n}],t,e,r)}};function Rpe(e){let r=new Set;return(t,n,i)=>{r.has(t.id)||(r.add(t.id),e(t,n,i))}}function Dpe(e){let r=new Map;return(t,n,i)=>{if(t.kind===fn.Metadata||t.kind===fn.Contacts){let s=t.pubkey+" "+t.kind;if((r.get(s)||0)>t.created_at)return;r.set(s,t.created_at)}e(t,n,i)}}function Bpe(e,r){return(t,n,i)=>{for(let s of r)if(Pj(s,t)){e(t,n,i);break}}}var Mpe=class{constructor(e){Z(this,"subs",[]);Z(this,"events",[]);Z(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(r=>r(...e))}sub(e){return this.events.forEach(r=>e(...r)),this.subs.push(e),()=>{var r;this.subs=this.subs.filter(t=>t!==e),this.subs.length===0&&((r=this.onunsub)==null||r.call(this),this.onunsub=void 0)}}},Lpe=e=>[...new Set(e)];function Fpe(e,r,t,n={},i){let s=[];if(i){const a=i.getCachedEventsWithUpdatedFilters(e,r);e=a.filters,s=a.events}if(n.logAllEvents){const a=t;t=(l,u,d)=>{a(l,u,d)}}n.allowDuplicateEvents||(t=Rpe(t)),n.allowOlderEvents||(t=Dpe(t));for(const a of s)t(a,!1,void 0);e=Qm(e),t=Bpe(t,e),r=Lpe(r);const o=jpe(e,r);return[t,o]}function jpe(e,r){const t=new Map,n=[];for(const i of e){const s=i.relay;if(s){const o=t.get(s);o?o.push(yN(i)):t.set(s,[yN(i)])}else n.push(i)}if(n.length>0)for(const i of r){const s=t.get(i);s?t.set(i,s.concat(n)):t.set(i,n)}return t}function yN(e){return e={...e},delete e.relay,e}function zpe(e,r){const t=new Map,n=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},o=()=>{};for(const[l,u,d,h,v]of e){if(!d.unsubcb)continue;for(const[b,m]of u){const x=t.get(b);x?t.set(b,x.concat(m)):t.set(b,m)}let g=(b,m,x)=>{d.unsubcb&&l(b,m,x)};if(r&&v){const b=new Mpe(o);n.push((x,E,k)=>{b.event(x,E,k)});let m=b.sub(g);r.set(v,b),d.unsubcb=()=>{d.unsubcb=void 0,m(),h||i--}}else n.push(g),d.unsubcb=()=>{d.unsubcb=void 0,h||i--};h||i++}i===0&&setTimeout(()=>{},0);const a=(l,u,d)=>{for(const h of n)h(l,u,d)};return e.length=0,[a,t,s]}var B$=class{constructor(e,r,t,n){Z(this,"data");Z(this,"promises");Z(this,"relays");Z(this,"kind");Z(this,"relayPool");Z(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=r,this.relays=t||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=n||!1}async get(e){let r=this.data.get(e);if(r)return Promise.resolve(r);const t=this.promises.get(e);return t||new Promise((n,i)=>{let s=0;const o=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},a=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([o],this.relays,l=>{this.data.set(e,l),this.promises.delete(e),n(l)},void 0,l=>{this.relays.includes(l)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=a})}},mN=e=>[...new Set(e)];function Hpe(e){if(e)return JSON.parse(e)}var Zb,Zj,Xb,Xj,Jb,Jj,Qb,Qj,e1,ez,t1,tz,sL,Upe=(sL=class{constructor(e,r={}){yr(this,Zb);yr(this,Xb);yr(this,Jb);yr(this,Qb);yr(this,e1);yr(this,t1);Z(this,"relayByUrl",new Map);Z(this,"noticecbs",[]);Z(this,"errorcbs",[]);Z(this,"authcbs",[]);Z(this,"eventCache");Z(this,"minMaxDelayms",1/0);Z(this,"filtersToSubscribe",[]);Z(this,"timer");Z(this,"externalGetEventById");Z(this,"logSubscriptions",!1);Z(this,"autoReconnect",!1);Z(this,"startTime",new Date().getTime());Z(this,"deleteSignatures");Z(this,"subscriptionCache");Z(this,"skipVerification");Z(this,"writeRelays");Z(this,"metadataCache");Z(this,"contactListCache");Z(this,"logErrorsAndNotices");Z(this,"errorsAndNoticesInterval");Z(this,"errorsAndNotices",[]);if(this.externalGetEventById=r.externalGetEventById,this.logSubscriptions=r.logSubscriptions,this.autoReconnect=r.autoReconnect,this.deleteSignatures=r.deleteSignatures,this.skipVerification=r.skipVerification,this.writeRelays=new B$(10003,this,void 0,!0),this.metadataCache=new B$(0,this),this.contactListCache=new B$(3,this),r.useEventCache&&(this.eventCache=new Ppe),r.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const t of mN(e))this.addOrGetRelay(t);this.logErrorsAndNotices=r.logErrorsAndNotices||!0,this.onnotice((t,n)=>{this.errorsAndNotices.push({type:"notice",url:t,msg:n,time:Date.now()-this.startTime})}),this.onerror((t,n)=>{this.errorsAndNotices.push({type:"error",url:t,msg:n,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>dn(this,Zb,Zj).call(this),1e3*10)}addOrGetRelay(e){const r=this.relayByUrl.get(e);if(r)return r;const t=Ape(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?n=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(n)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,t),t.connect().then(n=>{t==null||t.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),t==null||t.on("auth",i=>{this.authcbs.forEach(s=>s(t,i))})},n=>{this.errorcbs.forEach(i=>i(e,n))}),t}async close(){const e=[];for(const r of this.relayByUrl.values())e.push(r.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const r=this.relayByUrl.get(e);r&&(r.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,r){clearTimeout(this.timer),this.timer=void 0;let t=this.minMaxDelayms;this.minMaxDelayms=1/0;const[n,i,s]=zpe(r||this.filtersToSubscribe,this.subscriptionCache);return dn(this,Qb,Qj).call(this,i,n,e,s,t)}subscribeEventObject(e,r,t,n,i,s={}){return this.subscribe(e,r,(o,a,l)=>t(new eS(o,this,r),a,l))}subscribe(e,r,t,n,i,s={}){var h;if(n!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(r===void 0){const v=dn(this,t1,tz).call(this,e,t,n,i,s);return()=>{v.then(g=>{g()})}}let o;if(s.unsubscribeOnEose&&!i){o=JSON.stringify([e,r]);const v=(h=this.subscriptionCache)==null?void 0:h.get(o);if(v)return v.sub(t)}const[a,l]=Fpe(e,r,t,s,this.eventCache);let u={unsubcb:()=>{}};n===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const d=[a,l,u,s.unsubscribeOnEose,o,n];return s.dontSendOtherFilters?this.sendSubscriptions(i,[d]):(this.filtersToSubscribe.push(d),n===void 0?this.sendSubscriptions(i):(dn(this,e1,ez).call(this,n),()=>{var v;(v=u.unsubcb)==null||v.call(u),delete u.unsubcb}))}async getEventObjectById(e,r,t){return this.getEventById(e,r,t).then(n=>new eS(n,this,r))}async getEventById(e,r,t){return new Promise((n,i)=>{this.subscribe([{ids:[e]}],r,s=>{n(s)},t,void 0)})}publish(e,r){for(const t of mN(r))this.addOrGetRelay(t).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((r,t)=>r.on("error",n=>e(t,n))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((r,t)=>r.on("disconnect",n=>e(t,n)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,r])=>[e,r.status]).sort()}setWriteRelaysForPubKey(e,r,t){const n={created_at:t,pubkey:"",id:"",sig:"",content:JSON.stringify(r),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,n)}setCachedMetadata(e,r){this.metadataCache.data.set(e,r)}setCachedContactList(e,r){this.contactListCache.data.set(e,r)}subscribeReferencedEvents(e,r,t,n,i={}){let s=[],o=[];for(const a of e.tags){if(a[0]==="p"){const l=a[1];if(l.length!==64){console.log("bad pubkey",l,a);continue}o.push(l)}if(a[0]==="e"){const l=a[1];s.push(l)}}return s.length===0?()=>{}:o.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,r,t,n,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:o}],void 0,r,t,n,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${r}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${r}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,r,t,n,i={}){for(const s of e.tags)if(s[0]==="p"){const o=s[1];if(o.length!==64){console.log("bad pubkey",o,s);continue}this.fetchAndCacheMetadata(o).catch(a=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${o}: ${a}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,r,t,n,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(r=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${r}`,time:Date.now()-this.startTime,url:e.url})})})}},Zb=new WeakSet,Zj=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},Xb=new WeakSet,Xj=function(e,r,t,n,i){const s=Qm(r);if(s.length===0)return;const a=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let l=!1,u=1/0;return a.on("event",d=>{var v;d.created_at<u&&(u=d.created_at);let h=d;this.deleteSignatures||(h.sig=d.sig),(v=this.eventCache)==null||v.addEvent(h),t(h,l,e)}),a.on("eose",()=>{n==null||n(e,u),l=!0}),a},Jb=new WeakSet,Jj=function(e){const r=new Map;for(const[t,n]of e){const i=Qm(Qm(n));i.length>0&&r.set(t,i)}return r},Qb=new WeakSet,Qj=function(e,r,t,n={},i){var u,d;if(e.size===0)return()=>{};if(e=dn(this,Jb,Jj).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const h={};for(const[v,g]of e){let b=0;for(const m of g){const x={...m};x.authors&&(x.authors=x.authors.join(),x["authors.length"]=(u=m==null?void 0:m.authors)==null?void 0:u.length),x.kinds&&(x.kinds=x.kinds.join()),x.ids&&(x.ids=x.ids.join(),x["ids.length"]=(d=m==null?void 0:m.ids)==null?void 0:d.length),x["#e"]&&(x["#e"]=x["#e"].join(),x["#e.length"]=m["#e"].length),x["#p"]&&(x["#p"]=x["#p"].join(),x["#p.length"]=m["#p"].length),h[v+" "+b]=x,b++}}Object.keys(h).length>3&&console.groupCollapsed(Object.keys(h).length+" filters to "+e.size+" relays"),console.table(h),Object.keys(h).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let o=!1,a=[];n.unsuboneosecb=()=>{o=!0,a.forEach(h=>h.unsub())};for(const[h,v]of e){let g={};const b=(E,k)=>{var $;t&&t(E,k),o?($=g.sub)==null||$.unsub():g.sub&&a.push(g.sub)},m=new Set,x=dn(this,Xb,Xj).call(this,h,v,r,b,m);x&&(g.sub=x,s.push(x))}const l=()=>s.forEach(h=>h.unsub());return n.unsubcb=()=>{l(),delete n.unsubcb},l},e1=new WeakSet,ez=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},t1=new WeakSet,tz=async function(e,r,t,n,i={}){var h;const s=new Set;for(const v of e)if(v.authors)for(const g of v.authors)s.add(g);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const o=[],a=[];for(const v of s)o.push((h=this.writeRelays)==null?void 0:h.get(v).then(g=>Hpe(g==null?void 0:g.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),a.push(v);const l=new Set;let u=0;for(const v of o){const g=a[u];u+=1;let b=await v;if(!Array.isArray(b)){console.error("Couldn't load relays for author ",g);continue}for(let m of b)l.add(m)}let d=Array.from(l);return d.length===0&&i.defaultRelays&&(d=i.defaultRelays),this.subscribe(e,d,r,t,n,i)},sL);const $r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tn=Object.keys,Xn=Array.isArray;function di(e,r){return typeof r!="object"||tn(r).forEach(function(t){e[t]=r[t]}),e}typeof Promise>"u"||$r.Promise||($r.Promise=Promise);const Up=Object.getPrototypeOf,Kpe={}.hasOwnProperty;function es(e,r){return Kpe.call(e,r)}function bd(e,r){typeof r=="function"&&(r=r(Up(e))),(typeof Reflect>"u"?tn:Reflect.ownKeys)(r).forEach(t=>{fa(e,t,r[t])})}const rz=Object.defineProperty;function fa(e,r,t,n){rz(e,r,di(t&&es(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},n))}function Zh(e){return{from:function(r){return e.prototype=Object.create(r.prototype),fa(e.prototype,"constructor",e),{extend:bd.bind(null,e.prototype)}}}}const Wpe=Object.getOwnPropertyDescriptor;function WO(e,r){let t;return Wpe(e,r)||(t=Up(e))&&WO(t,r)}const Vpe=[].slice;function V0(e,r,t){return Vpe.call(e,r,t)}function nz(e,r){return r(e)}function Qf(e){if(!e)throw new Error("Assertion Failed")}function iz(e){$r.setImmediate?setImmediate(e):setTimeout(e,0)}function sz(e,r){return e.reduce((t,n,i)=>{var s=r(n,i);return s&&(t[s[0]]=s[1]),t},{})}function pa(e,r){if(es(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var t=[],n=0,i=r.length;n<i;++n){var s=pa(e,r[n]);t.push(s)}return t}var o=r.indexOf(".");if(o!==-1){var a=e[r.substr(0,o)];return a===void 0?void 0:pa(a,r.substr(o+1))}}function Qs(e,r,t){if(e&&r!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){Qf(typeof t!="string"&&"length"in t);for(var n=0,i=r.length;n<i;++n)Qs(e,r[n],t[n])}else{var s=r.indexOf(".");if(s!==-1){var o=r.substr(0,s),a=r.substr(s+1);if(a==="")t===void 0?Xn(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var l=e[o];l&&es(e,o)||(l=e[o]={}),Qs(l,a,t)}}else t===void 0?Xn(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=t}}function oz(e){var r={};for(var t in e)es(e,t)&&(r[t]=e[t]);return r}const qpe=[].concat;function az(e){return qpe.apply([],e)}const lz="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(az([8,16,32,64].map(e=>["Int","Uint","Float"].map(r=>r+e+"Array")))).filter(e=>$r[e]),Gpe=lz.map(e=>$r[e]);sz(lz,e=>[e,!0]);let Sl=null;function Tv(e){Sl=typeof WeakMap<"u"&&new WeakMap;const r=tS(e);return Sl=null,r}function tS(e){if(!e||typeof e!="object")return e;let r=Sl&&Sl.get(e);if(r)return r;if(Xn(e)){r=[],Sl&&Sl.set(e,r);for(var t=0,n=e.length;t<n;++t)r.push(tS(e[t]))}else if(Gpe.indexOf(e.constructor)>=0)r=e;else{const s=Up(e);for(var i in r=s===Object.prototype?{}:Object.create(s),Sl&&Sl.set(e,r),e)es(e,i)&&(r[i]=tS(e[i]))}return r}const{toString:Ype}={};function rS(e){return Ype.call(e).slice(8,-1)}const nS=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Zpe=typeof nS=="symbol"?function(e){var r;return e!=null&&(r=e[nS])&&r.apply(e)}:function(){return null},kh={};function la(e){var r,t,n,i;if(arguments.length===1){if(Xn(e))return e.slice();if(this===kh&&typeof e=="string")return[e];if(i=Zpe(e)){for(t=[];!(n=i.next()).done;)t.push(n.value);return t}if(e==null)return[e];if(typeof(r=e.length)=="number"){for(t=new Array(r);r--;)t[r]=e[r];return t}return[e]}for(r=arguments.length,t=new Array(r);r--;)t[r]=arguments[r];return t}const VO=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var jo=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function uz(e,r){jo=e,cz=r}var cz=()=>!0;const Xpe=!new Error("").stack;function Cc(){if(Xpe)try{throw Cc.arguments,new Error}catch(e){return e}return new Error}function iS(e,r){var t=e.stack;return t?(r=r||0,t.indexOf(e.name)===0&&(r+=(e.name+e.message).split(`
`).length),t.split(`
`).slice(r).filter(cz).map(n=>`
`+n).join("")):""}var hz=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qO=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(hz),Jpe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xh(e,r){this._e=Cc(),this.name=e,this.message=r}function dz(e,r){return e+". Errors: "+Object.keys(r).map(t=>r[t].toString()).filter((t,n,i)=>i.indexOf(t)===n).join(`
`)}function q0(e,r,t,n){this._e=Cc(),this.failures=r,this.failedKeys=n,this.successCount=t,this.message=dz(e,r)}function fp(e,r){this._e=Cc(),this.name="BulkError",this.failures=Object.keys(r).map(t=>r[t]),this.failuresByPos=r,this.message=dz(e,r)}Zh(Xh).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+iS(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Zh(q0).from(Xh),Zh(fp).from(Xh);var GO=qO.reduce((e,r)=>(e[r]=r+"Error",e),{});const Qpe=Xh;var vt=qO.reduce((e,r)=>{var t=r+"Error";function n(i,s){this._e=Cc(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Jpe[r]||t,this.inner=null)}return Zh(n).from(Qpe),e[r]=n,e},{});vt.Syntax=SyntaxError,vt.Type=TypeError,vt.Range=RangeError;var bN=hz.reduce((e,r)=>(e[r+"Error"]=vt[r],e),{}),e0=qO.reduce((e,r)=>(["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=vt[r]),e),{});function hr(){}function Kp(e){return e}function eve(e,r){return e==null||e===Kp?r:function(t){return r(e(t))}}function pc(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function tve(e,r){return e===hr?r:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=r.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?pc(n,this.onsuccess):n),i&&(this.onerror=this.onerror?pc(i,this.onerror):i),s!==void 0?s:t}}function rve(e,r){return e===hr?r:function(){e.apply(this,arguments);var t=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?pc(t,this.onsuccess):t),n&&(this.onerror=this.onerror?pc(n,this.onerror):n)}}function nve(e,r){return e===hr?r:function(t){var n=e.apply(this,arguments);di(t,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=r.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?pc(i,this.onsuccess):i),s&&(this.onerror=this.onerror?pc(s,this.onerror):s),n===void 0?o===void 0?void 0:o:di(n,o)}}function ive(e,r){return e===hr?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function YO(e,r){return e===hr?r:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return r.apply(n,s)})}return r.apply(this,arguments)}}e0.ModifyError=q0,e0.DexieError=Xh,e0.BulkError=fp;var Wp={};const fz=100,[sS,G0,oS]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Up(e),e];const r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,Up(r),e]})(),pz=G0&&G0.then,t0=sS&&sS.constructor,ZO=!!oS;var aS=!1,sve=oS?()=>{oS.then(Gy)}:$r.setImmediate?setImmediate.bind(null,Gy):$r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Gy(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Gy,0)},pp=function(e,r){ep.push([e,r]),Y0&&(sve(),Y0=!1)},lS=!0,Y0=!0,Xu=[],r0=[],uS=null,cS=Kp,Jh={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$N,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{$N(e[0],e[1])}catch{}})}},ut=Jh,ep=[],Ju=0,n0=[];function Qe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=hr,this._lib=!1;var r=this._PSD=ut;if(jo&&(this._stackHolder=Cc(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Wp)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&dS(this,this._value))}this._state=null,this._value=null,++r.ref,gz(this,e)}const hS={get:function(){var e=ut,r=Z0;function t(n,i){var s=!e.global&&(e!==ut||r!==Z0);const o=s&&!Ta();var a=new Qe((l,u)=>{XO(this,new vz(X0(n,e,s,o),X0(i,e,s,o),l,u,e))});return jo&&bz(a,this),a}return t.prototype=Wp,t},set:function(e){fa(this,"then",e&&e.prototype===Wp?hS:{get:function(){return e},set:hS.set})}};function vz(e,r,t,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=t,this.reject=n,this.psd=i}function gz(e,r){try{r(t=>{if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Iv();t&&typeof t.then=="function"?gz(e,(i,s)=>{t instanceof Qe?t._then(i,s):t.then(i,s)}):(e._state=!0,e._value=t,yz(e)),n&&Ov()}},dS.bind(null,e))}catch(t){dS(e,t)}}function dS(e,r){if(r0.push(r),e._state===null){var t=e._lib&&Iv();r=cS(r),e._state=!1,e._value=r,jo&&r!==null&&typeof r=="object"&&!r._promise&&function(n,i,s){try{n.apply(null,s)}catch(o){i&&i(o)}}(()=>{var n=WO(r,"stack");r._promise=e,fa(r,"stack",{get:()=>aS?n&&(n.get?n.get.apply(r):n.value):e.stack})}),function(n){Xu.some(i=>i._value===n._value)||Xu.push(n)}(e),yz(e),t&&Ov()}}function yz(e){var r=e._listeners;e._listeners=[];for(var t=0,n=r.length;t<n;++t)XO(e,r[t]);var i=e._PSD;--i.ref||i.finalize(),Ju===0&&(++Ju,pp(()=>{--Ju==0&&JO()},[]))}function XO(e,r){if(e._state!==null){var t=e._state?r.onFulfilled:r.onRejected;if(t===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++Ju,pp(ove,[t,e,r])}else e._listeners.push(r)}function ove(e,r,t){try{uS=r;var n,i=r._value;r._state?n=e(i):(r0.length&&(r0=[]),n=e(i),r0.indexOf(i)===-1&&function(s){for(var o=Xu.length;o;)if(Xu[--o]._value===s._value)return void Xu.splice(o,1)}(r)),t.resolve(n)}catch(s){t.reject(s)}finally{uS=null,--Ju==0&&JO(),--t.psd.ref||t.psd.finalize()}}function mz(e,r,t){if(r.length===t)return r;var n="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,n=iS(o,0)):(i=o,s=""),r.push(i+(s?": "+s:"")+n)}return jo&&((n=iS(e._stackHolder,2))&&r.indexOf(n)===-1&&r.push(n),e._prev&&mz(e._prev,r,t)),r}function bz(e,r){var t=r?r._numPrev+1:0;t<100&&(e._prev=r,e._numPrev=t)}function Gy(){Iv()&&Ov()}function Iv(){var e=lS;return lS=!1,Y0=!1,e}function Ov(){var e,r,t;do for(;ep.length>0;)for(e=ep,ep=[],t=e.length,r=0;r<t;++r){var n=e[r];n[0].apply(null,n[1])}while(ep.length>0);lS=!0,Y0=!0}function JO(){var e=Xu;Xu=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var r=n0.slice(0),t=r.length;t;)r[--t]()}function Yy(e){return new Qe(Wp,!1,e)}function Tr(e,r){var t=ut;return function(){var n=Iv(),i=ut;try{return Vl(t,!0),e.apply(this,arguments)}catch(s){r&&r(s)}finally{Vl(i,!1),n&&Ov()}}}bd(Qe.prototype,{then:hS,_then:function(e,r){XO(this,new vz(null,null,e,r,ut))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=arguments[0],t=arguments[1];return typeof r=="function"?this.then(null,n=>n instanceof r?t(n):Yy(n)):this.then(null,n=>n&&n.name===r?t(n):Yy(n))},finally:function(e){return this.then(r=>(e(),r),r=>(e(),Yy(r)))},stack:{get:function(){if(this._stack)return this._stack;try{aS=!0;var e=mz(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{aS=!1}}},timeout:function(e,r){return e<1/0?new Qe((t,n)=>{var i=setTimeout(()=>n(new vt.Timeout(r)),e);this.then(t,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&fa(Qe.prototype,Symbol.toStringTag,"Dexie.Promise"),Jh.env=wz(),bd(Qe,{all:function(){var e=la.apply(null,arguments).map(Zy);return new Qe(function(r,t){e.length===0&&r([]);var n=e.length;e.forEach((i,s)=>Qe.resolve(i).then(o=>{e[s]=o,--n||r(e)},t))})},resolve:e=>{if(e instanceof Qe)return e;if(e&&typeof e.then=="function")return new Qe((t,n)=>{e.then(t,n)});var r=new Qe(Wp,!0,e);return bz(r,uS),r},reject:Yy,race:function(){var e=la.apply(null,arguments).map(Zy);return new Qe((r,t)=>{e.map(n=>Qe.resolve(n).then(r,t))})},PSD:{get:()=>ut,set:e=>ut=e},totalEchoes:{get:()=>Z0},newPSD:Wl,usePSD:Hd,scheduler:{get:()=>pp,set:e=>{pp=e}},rejectionMapper:{get:()=>cS,set:e=>{cS=e}},follow:(e,r)=>new Qe((t,n)=>Wl((i,s)=>{var o=ut;o.unhandleds=[],o.onunhandled=s,o.finalize=pc(function(){(function(a){function l(){a(),n0.splice(n0.indexOf(l),1)}n0.push(l),++Ju,pp(()=>{--Ju==0&&JO()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},r,t,n))}),t0&&(t0.allSettled&&fa(Qe,"allSettled",function(){const e=la.apply(null,arguments).map(Zy);return new Qe(r=>{e.length===0&&r([]);let t=e.length;const n=new Array(t);e.forEach((i,s)=>Qe.resolve(i).then(o=>n[s]={status:"fulfilled",value:o},o=>n[s]={status:"rejected",reason:o}).then(()=>--t||r(n)))})}),t0.any&&typeof AggregateError<"u"&&fa(Qe,"any",function(){const e=la.apply(null,arguments).map(Zy);return new Qe((r,t)=>{e.length===0&&t(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((s,o)=>Qe.resolve(s).then(a=>r(a),a=>{i[o]=a,--n||t(new AggregateError(i))}))})}));const Zn={awaits:0,echoes:0,id:0};var ave=0,i0=[],M$=0,Z0=0,lve=0;function Wl(e,r,t,n){var i=ut,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++lve;var o=Jh.env;s.env=ZO?{Promise:Qe,PromiseProp:{value:Qe,configurable:!0,writable:!0},all:Qe.all,race:Qe.race,allSettled:Qe.allSettled,any:Qe.any,resolve:Qe.resolve,reject:Qe.reject,nthen:wN(o.nthen,s),gthen:wN(o.gthen,s)}:{},r&&di(s,r),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Hd(s,e,t,n);return s.ref===0&&s.finalize(),a}function zd(){return Zn.id||(Zn.id=++ave),++Zn.awaits,Zn.echoes+=fz,Zn.id}function Ta(){return!!Zn.awaits&&(--Zn.awaits==0&&(Zn.id=0),Zn.echoes=Zn.awaits*fz,!0)}function Zy(e){return Zn.echoes&&e&&e.constructor===t0?(zd(),e.then(r=>(Ta(),r),r=>(Ta(),gn(r)))):e}function uve(e){++Z0,Zn.echoes&&--Zn.echoes!=0||(Zn.echoes=Zn.id=0),i0.push(ut),Vl(e,!0)}function cve(){var e=i0[i0.length-1];i0.pop(),Vl(e,!1)}function Vl(e,r){var t=ut;if((r?!Zn.echoes||M$++&&e===ut:!M$||--M$&&e===ut)||_z(r?uve.bind(null,e):cve),e!==ut&&(ut=e,t===Jh&&(Jh.env=wz()),ZO)){var n=Jh.env.Promise,i=e.env;G0.then=i.nthen,n.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty($r,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function wz(){var e=$r.Promise;return ZO?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor($r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:G0.then,gthen:e.prototype.then}:{}}function Hd(e,r,t,n,i){var s=ut;try{return Vl(e,!0),r(t,n,i)}finally{Vl(s,!1)}}function _z(e){pz.call(sS,e)}function X0(e,r,t,n){return typeof e!="function"?e:function(){var i=ut;t&&zd(),Vl(r,!0);try{return e.apply(this,arguments)}finally{Vl(i,!1),n&&_z(Ta)}}}function wN(e,r){return function(t,n){return e.call(this,X0(t,r),X0(n,r))}}(""+pz).indexOf("[native code]")===-1&&(zd=Ta=hr);const _N="unhandledrejection";function $N(e,r){var t;try{t=r.onuncatched(e)}catch{}if(t!==!1)try{var n,i={promise:r,reason:e};if($r.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(_N,!0,!0),di(n,i)):$r.CustomEvent&&di(n=new CustomEvent(_N,{detail:i}),i),n&&$r.dispatchEvent&&(dispatchEvent(n),!$r.PromiseRejectionEvent&&$r.onunhandledrejection))try{$r.onunhandledrejection(n)}catch{}jo&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var gn=Qe.reject;function fS(e,r,t,n){if(e.idbdb&&(e._state.openComplete||ut.letThrough||e._vip)){var i=e._createTransaction(r,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===GO.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>fS(e,r,t,n))):gn(s)}return i._promise(r,(s,o)=>Wl(()=>(ut.trans=i,n(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return gn(new vt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return gn(new vt.DatabaseClosed);e.open().catch(hr)}return e._state.dbReadyPromise.then(()=>fS(e,r,t,n))}const xN="3.2.4",Wu=String.fromCharCode(65535),pS=-1/0,ra="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$z="String expected.",vp=[],A1=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),hve=A1,dve=A1,xz=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),C1="__dbnames",L$="readonly",F$="readwrite";function vc(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}const Ez={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Xy(e){return typeof e!="string"||/\./.test(e)?r=>r:r=>(r[e]===void 0&&e in r&&delete(r=Tv(r))[e],r)}class fve{_trans(r,t,n){const i=this._tx||ut.trans,s=this.name;function o(l,u,d){if(!d.schema[s])throw new vt.NotFound("Table "+s+" not part of transaction");return t(d.idbtrans,d)}const a=Iv();try{return i&&i.db===this.db?i===ut.trans?i._promise(r,o,n):Wl(()=>i._promise(r,o,n),{trans:i,transless:ut.transless||ut}):fS(this.db,r,[this.name],o)}finally{a&&Ov()}}get(r,t){return r&&r.constructor===Object?this.where(r).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:r}).then(i=>this.hook.reading.fire(i))).then(t)}where(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(Xn(r))return new this.db.WhereClause(this,`[${r.join("+")}]`);const t=tn(r);if(t.length===1)return this.where(t[0]).equals(r[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&t.every(d=>u.keyPath.indexOf(d)>=0)&&u.keyPath.every(d=>t.indexOf(d)>=0))[0];if(n&&this.db._maxKey!==Wu)return this.where(n.name).equals(n.keyPath.map(u=>r[u]));!n&&jo&&console.warn(`The query ${JSON.stringify(r)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,d){try{return s.cmp(u,d)===0}catch{return!1}}const[a,l]=t.reduce(([u,d],h)=>{const v=i[h],g=r[h];return[u||v,u||!v?vc(d,v&&v.multi?b=>{const m=pa(b,h);return Xn(m)&&m.some(x=>o(g,x))}:b=>o(g,pa(b,h))):d]},[null,null]);return a?this.where(a.name).equals(r[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(r){return this.toCollection().and(r)}count(r){return this.toCollection().count(r)}offset(r){return this.toCollection().offset(r)}limit(r){return this.toCollection().limit(r)}each(r){return this.toCollection().each(r)}toArray(r){return this.toCollection().toArray(r)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(r){return new this.db.Collection(new this.db.WhereClause(this,Xn(r)?`[${r.join("+")}]`:r))}reverse(){return this.toCollection().reverse()}mapToClass(r){this.schema.mappedClass=r;const t=n=>{if(!n)return n;const i=Object.create(r.prototype);for(var s in n)if(es(n,s))try{i[s]=n[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),r}defineClass(){return this.mapToClass(function(r){di(this,r)})}add(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Xy(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?Qe.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Qs(r,i,o)}catch{}return o})}update(r,t){if(typeof r!="object"||Xn(r))return this.where(":id").equals(r).modify(t);{const n=pa(r,this.schema.primKey.keyPath);if(n===void 0)return gn(new vt.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?tn(t).forEach(i=>{Qs(r,i,t[i])}):t(r,{value:r,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}}put(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Xy(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?Qe.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Qs(r,i,o)}catch{}return o})}delete(r){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[r]})).then(t=>t.numFailures?Qe.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"deleteRange",range:Ez})).then(r=>r.numFailures?Qe.reject(r.failures[0]):void 0)}bulkGet(r){return this._trans("readonly",t=>this.core.getMany({keys:r,trans:t}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new vt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new vt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let d=l&&a?r.map(Xy(l)):r;return this.core.mutate({trans:o,type:"add",keys:i,values:d,wantResults:s}).then(({numFailures:h,results:v,lastResult:g,failures:b})=>{if(h===0)return s?v:g;throw new fp(`${this.name}.bulkAdd(): ${h} of ${u} operations failed`,b)})})}bulkPut(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new vt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new vt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let d=l&&a?r.map(Xy(l)):r;return this.core.mutate({trans:o,type:"put",keys:i,values:d,wantResults:s}).then(({numFailures:h,results:v,lastResult:g,failures:b})=>{if(h===0)return s?v:g;throw new fp(`${this.name}.bulkPut(): ${h} of ${u} operations failed`,b)})})}bulkDelete(r){const t=r.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:r})).then(({numFailures:n,lastResult:i,failures:s})=>{if(n===0)return i;throw new fp(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,s)})}}function gp(e){var r={},t=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return r[o].subscribe.apply(null,u),e}if(typeof o=="string")return r[o]};t.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return t;function s(o,a,l){if(typeof o!="object"){var u;a||(a=ive),l||(l=hr);var d={subscribers:[],fire:l,subscribe:function(h){d.subscribers.indexOf(h)===-1&&(d.subscribers.push(h),d.fire=a(d.fire,h))},unsubscribe:function(h){d.subscribers=d.subscribers.filter(function(v){return v!==h}),d.fire=d.subscribers.reduce(a,l)}};return r[o]=t[o]=d,d}tn(u=o).forEach(function(h){var v=u[h];if(Xn(v))s(h,u[h][0],u[h][1]);else{if(v!=="asap")throw new vt.InvalidArgument("Invalid event config");var g=s(h,Kp,function(){for(var b=arguments.length,m=new Array(b);b--;)m[b]=arguments[b];g.subscribers.forEach(function(x){iz(function(){x.apply(null,m)})})})}})}}function jf(e,r){return Zh(r).from({prototype:e}),r}function hh(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function j$(e,r){e.filter=vc(e.filter,r)}function z$(e,r,t){var n=e.replayFilter;e.replayFilter=n?()=>vc(n(),r()):r,e.justLimit=t&&!n}function s0(e,r){if(e.isPrimKey)return r.primaryKey;const t=r.getIndexByKeyPath(e.index);if(!t)throw new vt.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return t}function EN(e,r,t){const n=s0(e,r.schema);return r.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function Jy(e,r,t,n){const i=e.replayFilter?vc(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,v=>l.stop(v),v=>l.fail(v))){var d=l.primaryKey,h=""+d;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(d)),es(s,h)||(s[h]=!0,r(a,l,u))}};return Promise.all([e.or._iterate(o,t),SN(EN(e,n,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return SN(EN(e,n,t),vc(e.algorithm,i),r,!e.keysOnly&&e.valueMapper)}function SN(e,r,t,n){var i=Tr(n?(s,o,a)=>t(n(s),o,a):t);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();r&&!r(s,a=>o=a,a=>{s.stop(a),o=hr},a=>{s.fail(a),o=hr})||i(s.value,s,a=>o=a),o()})})}function ui(e,r){try{const t=kN(e),n=kN(r);if(t!==n)return t==="Array"?1:n==="Array"?-1:t==="binary"?1:n==="binary"?-1:t==="string"?1:n==="string"?-1:t==="Date"?1:n!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>r?1:e<r?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(TN(e),TN(r));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const d=ui(i[u],s[u]);if(d!==0)return d}return o===a?0:o<a?-1:1}(e,r)}}catch{}return NaN}function kN(e){const r=typeof e;if(r!=="object")return r;if(ArrayBuffer.isView(e))return"binary";const t=rS(e);return t==="ArrayBuffer"?"binary":t}function TN(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class pve{_read(r,t){var n=this._ctx;return n.error?n.table._trans(null,gn.bind(null,n.error)):n.table._trans("readonly",r).then(t)}_write(r){var t=this._ctx;return t.error?t.table._trans(null,gn.bind(null,t.error)):t.table._trans("readwrite",r,"locked")}_addAlgorithm(r){var t=this._ctx;t.algorithm=vc(t.algorithm,r)}_iterate(r,t){return Jy(this._ctx,r,t,this._ctx.table.core)}clone(r){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return r&&di(n,r),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(r){var t=this._ctx;return this._read(n=>Jy(t,r,n,t.table.core))}count(r){return this._read(t=>{const n=this._ctx,i=n.table.core;if(hh(n,!0))return i.count({trans:t,query:{index:s0(n,i.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var s=0;return Jy(n,()=>(++s,!1),t,i).then(()=>s)}).then(r)}sortBy(r,t){const n=r.split(".").reverse(),i=n[0],s=n.length-1;function o(u,d){return d?o(u[n[d]],d-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,d){var h=o(u,s),v=o(d,s);return h<v?-a:h>v?a:0}return this.toArray(function(u){return u.sort(l)}).then(t)}toArray(r){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&hh(n,!0)&&n.limit>0){const{valueMapper:i}=n,s=s0(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Jy(n,s=>i.push(s),t,n.table.core).then(()=>i)}},r)}offset(r){var t=this._ctx;return r<=0||(t.offset+=r,hh(t)?z$(t,()=>{var n=r;return(i,s)=>n===0||(n===1?(--n,!1):(s(()=>{i.advance(n),n=0}),!1))}):z$(t,()=>{var n=r;return()=>--n<0})),this}limit(r){return this._ctx.limit=Math.min(this._ctx.limit,r),z$(this._ctx,()=>{var t=r;return function(n,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(r,t){return j$(this._ctx,function(n,i,s){return!r(n.value)||(i(s),t)}),this}first(r){return this.limit(1).toArray(function(t){return t[0]}).then(r)}last(r){return this.reverse().first(r)}filter(r){var t,n;return j$(this._ctx,function(i){return r(i.value)}),t=this._ctx,n=r,t.isMatch=vc(t.isMatch,n),this}and(r){return this.filter(r)}or(r){return new this.db.WhereClause(this._ctx.table,r,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.key,i)})}eachUniqueKey(r){return this._ctx.unique="unique",this.eachKey(r)}eachPrimaryKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.primaryKey,i)})}keys(r){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.key)}).then(function(){return n}).then(r)}primaryKeys(r){var t=this._ctx;if(t.dir==="next"&&hh(t,!0)&&t.limit>0)return this._read(i=>{var s=s0(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(r);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.primaryKey)}).then(function(){return n}).then(r)}uniqueKeys(r){return this._ctx.unique="unique",this.keys(r)}firstKey(r){return this.limit(1).keys(function(t){return t[0]}).then(r)}lastKey(r){return this.reverse().firstKey(r)}distinct(){var r=this._ctx,t=r.index&&r.table.schema.idxByName[r.index];if(!t||!t.multi)return this;var n={};return j$(this._ctx,function(i){var s=i.primaryKey.toString(),o=es(n,s);return n[s]=!0,!o}),this}modify(r){var t=this._ctx;return this._write(n=>{var i;if(typeof r=="function")i=r;else{var s=tn(r),o=s.length;i=function(m){for(var x=!1,E=0;E<o;++E){var k=s[E],$=r[k];pa(m,k)!==$&&(Qs(m,k,$),x=!0)}return x}}const a=t.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,d=this.db._options.modifyChunkSize||200,h=[];let v=0;const g=[],b=(m,x)=>{const{failures:E,numFailures:k}=x;v+=m-k;for(let $ of tn(E))h.push(E[$])};return this.clone().primaryKeys().then(m=>{const x=E=>{const k=Math.min(d,m.length-E);return a.getMany({trans:n,keys:m.slice(E,E+k),cache:"immutable"}).then($=>{const S=[],T=[],O=l?[]:null,I=[];for(let R=0;R<k;++R){const D=$[R],F={value:Tv(D),primKey:m[E+R]};i.call(F,F.value,F)!==!1&&(F.value==null?I.push(m[E+R]):l||ui(u(D),u(F.value))===0?(T.push(F.value),l&&O.push(m[E+R])):(I.push(m[E+R]),S.push(F.value)))}const P=hh(t)&&t.limit===1/0&&(typeof r!="function"||r===H$)&&{index:t.index,range:t.range};return Promise.resolve(S.length>0&&a.mutate({trans:n,type:"add",values:S}).then(R=>{for(let D in R.failures)I.splice(parseInt(D),1);b(S.length,R)})).then(()=>(T.length>0||P&&typeof r=="object")&&a.mutate({trans:n,type:"put",keys:O,values:T,criteria:P,changeSpec:typeof r!="function"&&r}).then(R=>b(T.length,R))).then(()=>(I.length>0||P&&r===H$)&&a.mutate({trans:n,type:"delete",keys:I,criteria:P}).then(R=>b(I.length,R))).then(()=>m.length>E+k&&x(E+d))})};return x(0).then(()=>{if(h.length>0)throw new q0("Error modifying one or more objects",h,v,g);return m.length})})})}delete(){var r=this._ctx,t=r.range;return hh(r)&&(r.isPrimKey&&!dve||t.type===3)?this._write(n=>{const{primaryKey:i}=r.table.core.schema,s=t;return r.table.core.count({trans:n,query:{index:i,range:s}}).then(o=>r.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:d})=>{if(d)throw new q0("Could not delete some values",Object.keys(a).map(h=>a[h]),o-d);return o-d}))}):this.modify(H$)}}const H$=(e,r)=>r.value=null;function vve(e,r){return e<r?-1:e===r?0:1}function gve(e,r){return e>r?-1:e===r?0:1}function Ui(e,r,t){var n=e instanceof kz?new e.Collection(e):e;return n._ctx.error=t?new t(r):new TypeError(r),n}function dh(e){return new e.Collection(e,()=>Sz("")).limit(0)}function yve(e,r,t,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=r[l];if(u!==n[l])return i(e[l],t[l])<0?e.substr(0,l)+t[l]+t.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+t.substr(l+1):a>=0?e.substr(0,a)+r[a]+t.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&s==="next"?e+t.substr(e.length):o<e.length&&s==="prev"?e.substr(0,t.length):a<0?null:e.substr(0,a)+n[a]+t.substr(a+1)}function Qy(e,r,t,n){var i,s,o,a,l,u,d,h=t.length;if(!t.every(m=>typeof m=="string"))return Ui(e,$z);function v(m){i=function(E){return E==="next"?k=>k.toUpperCase():k=>k.toLowerCase()}(m),s=function(E){return E==="next"?k=>k.toLowerCase():k=>k.toUpperCase()}(m),o=m==="next"?vve:gve;var x=t.map(function(E){return{lower:s(E),upper:i(E)}}).sort(function(E,k){return o(E.lower,k.lower)});a=x.map(function(E){return E.upper}),l=x.map(function(E){return E.lower}),u=m,d=m==="next"?"":n}v("next");var g=new e.Collection(e,()=>bl(a[0],l[h-1]+n));g._ondirectionchange=function(m){v(m)};var b=0;return g._addAlgorithm(function(m,x,E){var k=m.key;if(typeof k!="string")return!1;var $=s(k);if(r($,l,b))return!0;for(var S=null,T=b;T<h;++T){var O=yve(k,$,a[T],l[T],o,u);O===null&&S===null?b=T+1:(S===null||o(S,O)>0)&&(S=O)}return x(S!==null?function(){m.continue(S+d)}:E),!1}),g}function bl(e,r,t,n){return{type:2,lower:e,upper:r,lowerOpen:t,upperOpen:n}}function Sz(e){return{type:1,lower:e,upper:e}}let kz=class{get Collection(){return this._ctx.table.db.Collection}between(r,t,n,i){n=n!==!1,i=i===!0;try{return this._cmp(r,t)>0||this._cmp(r,t)===0&&(n||i)&&(!n||!i)?dh(this):new this.Collection(this,()=>bl(r,t,!n,!i))}catch{return Ui(this,ra)}}equals(r){return r==null?Ui(this,ra):new this.Collection(this,()=>Sz(r))}above(r){return r==null?Ui(this,ra):new this.Collection(this,()=>bl(r,void 0,!0))}aboveOrEqual(r){return r==null?Ui(this,ra):new this.Collection(this,()=>bl(r,void 0,!1))}below(r){return r==null?Ui(this,ra):new this.Collection(this,()=>bl(void 0,r,!1,!0))}belowOrEqual(r){return r==null?Ui(this,ra):new this.Collection(this,()=>bl(void 0,r))}startsWith(r){return typeof r!="string"?Ui(this,$z):this.between(r,r+Wu,!0,!0)}startsWithIgnoreCase(r){return r===""?this.startsWith(r):Qy(this,(t,n)=>t.indexOf(n[0])===0,[r],Wu)}equalsIgnoreCase(r){return Qy(this,(t,n)=>t===n[0],[r],"")}anyOfIgnoreCase(){var r=la.apply(kh,arguments);return r.length===0?dh(this):Qy(this,(t,n)=>n.indexOf(t)!==-1,r,"")}startsWithAnyOfIgnoreCase(){var r=la.apply(kh,arguments);return r.length===0?dh(this):Qy(this,(t,n)=>n.some(i=>t.indexOf(i)===0),r,Wu)}anyOf(){const r=la.apply(kh,arguments);let t=this._cmp;try{r.sort(t)}catch{return Ui(this,ra)}if(r.length===0)return dh(this);const n=new this.Collection(this,()=>bl(r[0],r[r.length-1]));n._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,r.sort(t)};let i=0;return n._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,r[i])>0;)if(++i,i===r.length)return o(a),!1;return t(l,r[i])===0||(o(()=>{s.continue(r[i])}),!1)}),n}notEqual(r){return this.inAnyRange([[pS,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const r=la.apply(kh,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ui(this,ra)}const t=r.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[pS,i]],null);return t.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(r,t){const n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(r.length===0)return dh(this);if(!r.every(k=>k[0]!==void 0&&k[1]!==void 0&&i(k[0],k[1])<=0))return Ui(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",vt.InvalidArgument);const l=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;let d,h=i;function v(k,$){return h(k[0],$[0])}try{d=r.reduce(function(k,$){let S=0,T=k.length;for(;S<T;++S){const O=k[S];if(n($[0],O[1])<0&&n($[1],O[0])>0){O[0]=o(O[0],$[0]),O[1]=a(O[1],$[1]);break}}return S===T&&k.push($),k},[]),d.sort(v)}catch{return Ui(this,ra)}let g=0;const b=u?k=>i(k,d[g][1])>0:k=>i(k,d[g][1])>=0,m=l?k=>s(k,d[g][0])>0:k=>s(k,d[g][0])>=0;let x=b;const E=new this.Collection(this,()=>bl(d[0][0],d[d.length-1][1],!l,!u));return E._ondirectionchange=k=>{k==="next"?(x=b,h=i):(x=m,h=s),d.sort(v)},E._addAlgorithm((k,$,S)=>{for(var T=k.key;x(T);)if(++g,g===d.length)return $(S),!1;return!!function(O){return!b(O)&&!m(O)}(T)||(this._cmp(T,d[g][1])===0||this._cmp(T,d[g][0])===0||$(()=>{h===i?k.continue(d[g][0]):k.continue(d[g][1])}),!1)}),E}startsWithAnyOf(){const r=la.apply(kh,arguments);return r.every(t=>typeof t=="string")?r.length===0?dh(this):this.inAnyRange(r.map(t=>[t,t+Wu])):Ui(this,"startsWithAnyOf() only works with strings")}};function So(e){return Tr(function(r){return Vp(r),e(r.target.error),!1})}function Vp(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const qp="storagemutated",Ol="x-storagemutated-1",ql=gp(null,qp);class mve{_lock(){return Qf(!ut.global),++this._reculock,this._reculock!==1||ut.global||(ut.lockOwnerFor=this),this}_unlock(){if(Qf(!ut.global),--this._reculock==0)for(ut.global||(ut.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{Hd(r[1],r[0])}catch{}}return this}_locked(){return this._reculock&&ut.lockOwnerFor!==this}create(r){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Qf(!this.idbtrans),!r&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new vt.DatabaseClosed(n);case"MissingAPIError":throw new vt.MissingAPI(n.message,n);default:throw new vt.OpenFailed(n)}if(!this.active)throw new vt.TransactionInactive;return Qf(this._completion._state===null),(r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Tr(i=>{Vp(i),this._reject(r.error)}),r.onabort=Tr(i=>{Vp(i),this.active&&this._reject(new vt.Abort(r.error)),this.active=!1,this.on("abort").fire(i)}),r.oncomplete=Tr(()=>{this.active=!1,this._resolve(),"mutatedParts"in r&&ql.storagemutated.fire(r.mutatedParts)}),this}_promise(r,t,n){if(r==="readwrite"&&this.mode!=="readwrite")return gn(new vt.ReadOnly("Transaction is readonly"));if(!this.active)return gn(new vt.TransactionInactive);if(this._locked())return new Qe((s,o)=>{this._blockedFuncs.push([()=>{this._promise(r,t,n).then(s,o)},ut])});if(n)return Wl(()=>{var s=new Qe((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Qe((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(r){var t=this._root();const n=Qe.resolve(r);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Qe((o,a)=>{n.then(l=>t._waitingQueue.push(Tr(o.bind(null,l))),l=>t._waitingQueue.push(Tr(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new vt.Abort))}table(r){const t=this._memoizedTables||(this._memoizedTables={});if(es(t,r))return t[r];const n=this.schema[r];if(!n)throw new vt.NotFound("Table "+r+" not part of transaction");const i=new this.db.Table(r,n,this);return i.core=this.db.core.table(r),t[r]=i,i}}function vS(e,r,t,n,i,s,o){return{name:e,keyPath:r,unique:t,multi:n,auto:i,compound:s,src:(t&&!o?"&":"")+(n?"*":"")+(i?"++":"")+Tz(r)}}function Tz(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Iz(e,r,t){return{name:e,primKey:r,indexes:t,mappedClass:null,idxByName:sz(t,n=>[n.name,n])}}let Gp=e=>{try{return e.only([[]]),Gp=()=>[[]],[[]]}catch{return Gp=()=>Wu,Wu}};function gS(e){return e==null?()=>{}:typeof e=="string"?function(r){return r.split(".").length===1?n=>n[r]:n=>pa(n,r)}(e):r=>pa(r,e)}function IN(e){return[].slice.call(e)}let bve=0;function yp(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function wve(e,r,t){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:d,lowerOpen:h,upperOpen:v}=l;return u===void 0?d===void 0?null:r.upperBound(d,!!v):d===void 0?r.lowerBound(u,!!h):r.bound(u,d,!!h,!!v)}const{schema:i,hasGetAll:s}=function(l,u){const d=IN(l.objectStoreNames);return{schema:{name:l.name,tables:d.map(h=>u.objectStore(h)).map(h=>{const{keyPath:v,autoIncrement:g}=h,b=Xn(v),m=v==null,x={},E={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:b,keyPath:v,autoIncrement:g,unique:!0,extractKey:gS(v)},indexes:IN(h.indexNames).map(k=>h.index(k)).map(k=>{const{name:$,unique:S,multiEntry:T,keyPath:O}=k,I={name:$,compound:Xn(O),keyPath:O,unique:S,multiEntry:T,extractKey:gS(O)};return x[yp(O)]=I,I}),getIndexByKeyPath:k=>x[yp(k)]};return x[":id"]=E.primaryKey,v!=null&&(x[yp(v)]=E.primaryKey),E})},hasGetAll:d.length>0&&"getAll"in u.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=i.tables.map(l=>function(u){const d=u.name;return{name:d,schema:u,mutate:function({trans:h,type:v,keys:g,values:b,range:m}){return new Promise((x,E)=>{x=Tr(x);const k=h.objectStore(d),$=k.keyPath==null,S=v==="put"||v==="add";if(!S&&v!=="delete"&&v!=="deleteRange")throw new Error("Invalid operation type: "+v);const{length:T}=g||b||{length:1};if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(T===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});let O;const I=[],P=[];let R=0;const D=K=>{++R,Vp(K)};if(v==="deleteRange"){if(m.type===4)return x({numFailures:R,failures:P,results:[],lastResult:void 0});m.type===3?I.push(O=k.clear()):I.push(O=k.delete(n(m)))}else{const[K,q]=S?$?[b,g]:[b,null]:[g,null];if(S)for(let W=0;W<T;++W)I.push(O=q&&q[W]!==void 0?k[v](K[W],q[W]):k[v](K[W])),O.onerror=D;else for(let W=0;W<T;++W)I.push(O=k[v](K[W])),O.onerror=D}const F=K=>{const q=K.target.result;I.forEach((W,M)=>W.error!=null&&(P[M]=W.error)),x({numFailures:R,failures:P,results:v==="delete"?g:I.map(W=>W.result),lastResult:q})};O.onerror=K=>{D(K),F(K)},O.onsuccess=F})},getMany:({trans:h,keys:v})=>new Promise((g,b)=>{g=Tr(g);const m=h.objectStore(d),x=v.length,E=new Array(x);let k,$=0,S=0;const T=I=>{const P=I.target;E[P._pos]=P.result,++S===$&&g(E)},O=So(b);for(let I=0;I<x;++I)v[I]!=null&&(k=m.get(v[I]),k._pos=I,k.onsuccess=T,k.onerror=O,++$);$===0&&g(E)}),get:({trans:h,key:v})=>new Promise((g,b)=>{g=Tr(g);const m=h.objectStore(d).get(v);m.onsuccess=x=>g(x.target.result),m.onerror=So(b)}),query:function(h){return v=>new Promise((g,b)=>{g=Tr(g);const{trans:m,values:x,limit:E,query:k}=v,$=E===1/0?void 0:E,{index:S,range:T}=k,O=m.objectStore(d),I=S.isPrimaryKey?O:O.index(S.name),P=n(T);if(E===0)return g({result:[]});if(h){const R=x?I.getAll(P,$):I.getAllKeys(P,$);R.onsuccess=D=>g({result:D.target.result}),R.onerror=So(b)}else{let R=0;const D=x||!("openKeyCursor"in I)?I.openCursor(P):I.openKeyCursor(P),F=[];D.onsuccess=K=>{const q=D.result;return q?(F.push(x?q.value:q.primaryKey),++R===E?g({result:F}):void q.continue()):g({result:F})},D.onerror=So(b)}})}(s),openCursor:function({trans:h,values:v,query:g,reverse:b,unique:m}){return new Promise((x,E)=>{x=Tr(x);const{index:k,range:$}=g,S=h.objectStore(d),T=k.isPrimaryKey?S:S.index(k.name),O=b?m?"prevunique":"prev":m?"nextunique":"next",I=v||!("openKeyCursor"in T)?T.openCursor(n($),O):T.openKeyCursor(n($),O);I.onerror=So(E),I.onsuccess=Tr(P=>{const R=I.result;if(!R)return void x(null);R.___id=++bve,R.done=!1;const D=R.continue.bind(R);let F=R.continuePrimaryKey;F&&(F=F.bind(R));const K=R.advance.bind(R),q=()=>{throw new Error("Cursor not stopped")};R.trans=h,R.stop=R.continue=R.continuePrimaryKey=R.advance=()=>{throw new Error("Cursor not started")},R.fail=Tr(E),R.next=function(){let W=1;return this.start(()=>W--?this.continue():this.stop()).then(()=>this)},R.start=W=>{const M=new Promise((Q,he)=>{Q=Tr(Q),I.onerror=So(he),R.fail=he,R.stop=ue=>{R.stop=R.continue=R.continuePrimaryKey=R.advance=q,Q(ue)}}),G=()=>{if(I.result)try{W()}catch(Q){R.fail(Q)}else R.done=!0,R.start=()=>{throw new Error("Cursor behind last entry")},R.stop()};return I.onsuccess=Tr(Q=>{I.onsuccess=G,G()}),R.continue=D,R.continuePrimaryKey=F,R.advance=K,G(),M},x(R)},E)})},count({query:h,trans:v}){const{index:g,range:b}=h;return new Promise((m,x)=>{const E=v.objectStore(d),k=g.isPrimaryKey?E:E.index(g.name),$=n(b),S=$?k.count($):k.count();S.onsuccess=Tr(T=>m(T.target.result)),S.onerror=So(x)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Gp(r),schema:i}}function yS({_novip:e},r){const t=r.db,n=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(d,h){return h.reduce((v,{create:g})=>({...v,...g(v)}),d)}(wve(s,o,l),i.dbcore)}}(e._middlewares,t,e._deps,r);e.core=n.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function J0({_novip:e},r,t,n){t.forEach(i=>{const s=n[i];r.forEach(o=>{const a=WO(o,i);(!a||"value"in a&&a.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?fa(o,i,{get(){return this.table(i)},set(l){rz(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function mS({_novip:e},r){r.forEach(t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]})}function _ve(e,r){return e._cfg.version-r._cfg.version}function $ve(e,r,t,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(t),s._completion.catch(n);const o=s._reject.bind(s),a=ut.transless||ut;Wl(()=>{ut.trans=s,ut.transless=a,r===0?(tn(i).forEach(l=>{U$(t,l,i[l].primKey,i[l].indexes)}),yS(e,t),Qe.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,d,h){const v=[],g=l._versions;let b=l._dbSchema=wS(l,l.idbdb,h),m=!1;const x=g.filter(k=>k._cfg.version>=u);function E(){return v.length?Qe.resolve(v.shift()(d.idbtrans)).then(E):Qe.resolve()}return x.forEach(k=>{v.push(()=>{const $=b,S=k._cfg.dbschema;_S(l,$,h),_S(l,S,h),b=l._dbSchema=S;const T=Oz($,S);T.add.forEach(I=>{U$(h,I[0],I[1].primKey,I[1].indexes)}),T.change.forEach(I=>{if(I.recreate)throw new vt.Upgrade("Not yet support for changing primary key");{const P=h.objectStore(I.name);I.add.forEach(R=>bS(P,R)),I.change.forEach(R=>{P.deleteIndex(R.name),bS(P,R)}),I.del.forEach(R=>P.deleteIndex(R))}});const O=k._cfg.contentUpgrade;if(O&&k._cfg.version>u){yS(l,h),d._memoizedTables={},m=!0;let I=oz(S);T.del.forEach(F=>{I[F]=$[F]}),mS(l,[l.Transaction.prototype]),J0(l,[l.Transaction.prototype],tn(I),I),d.schema=I;const P=VO(O);let R;P&&zd();const D=Qe.follow(()=>{if(R=O(d),R&&P){var F=Ta.bind(null,null);R.then(F,F)}});return R&&typeof R.then=="function"?Qe.resolve(R):D.then(()=>R)}}),v.push($=>{(!m||!hve)&&function(S,T){[].slice.call(T.db.objectStoreNames).forEach(O=>S[O]==null&&T.db.deleteObjectStore(O))}(k._cfg.dbschema,$),mS(l,[l.Transaction.prototype]),J0(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),d.schema=l._dbSchema})}),E().then(()=>{var k,$;$=h,tn(k=b).forEach(S=>{$.db.objectStoreNames.contains(S)||U$($,S,k[S].primKey,k[S].indexes)})})}(e,r,s,t).catch(o)})}function Oz(e,r){const t={del:[],add:[],change:[]};let n;for(n in e)r[n]||t.del.push(n);for(n in r){const i=e[n],s=r[n];if(i){const o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!A1)o.recreate=!0,t.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const d=a[u],h=l[u];d?d.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([n,s])}return t}function U$(e,r,t,n){const i=e.db.createObjectStore(r,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return n.forEach(s=>bS(i,s)),i}function bS(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function wS(e,r,t){const n={};return V0(r.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const a=vS(Tz(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let d=0;d<s.indexNames.length;++d){const h=s.index(s.indexNames[d]);o=h.keyPath;var u=vS(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}n[i]=Iz(i,a,l)}),n}function _S({_novip:e},r,t){const n=t.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=t.objectStore(s);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,d=typeof u=="string"?u:"["+V0(u).join("+")+"]";if(r[s]){const h=r[s].idxByName[d];h&&(h.name=l,delete r[s].idxByName[d],r[s].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&$r.WorkerGlobalScope&&$r instanceof $r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class xve{_parseStoresSpec(r,t){tn(r).forEach(n=>{if(r[n]!==null){var i=r[n].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return vS(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Xn(u),a===0)}),s=i.shift();if(s.multi)throw new vt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new vt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new vt.Schema("Index must have a name and cannot be an empty string")}),t[n]=Iz(n,s,i)}})}stores(r){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?di(this._cfg.storesSource,r):r;const n=t._versions,i={};let s={};return n.forEach(o=>{di(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,mS(t,[t._allTables,t,t.Transaction.prototype]),J0(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],tn(s),s),t._storeNames=tn(s),this}upgrade(r){return this._cfg.contentUpgrade=YO(this._cfg.contentUpgrade||hr,r),this}}function QO(e,r){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new va(C1,{addons:[],indexedDB:e,IDBKeyRange:r}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function e3(e){return e&&typeof e.databases=="function"}function $S(e){return Wl(function(){return ut.letThrough=!0,e()})}function Eve(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(r){var t=function(){return indexedDB.databases().finally(r)};e=setInterval(t,100),t()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Sve(e){const r=e._state,{indexedDB:t}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?gn(r.dbOpenError):e);jo&&(r.openCanceller._stackHolder=Cc()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const n=r.openCanceller;function i(){if(r.openCanceller!==n)throw new vt.DatabaseClosed("db.open() was cancelled")}let s=r.dbReadyResolve,o=null,a=!1;return Qe.race([n,(typeof navigator>"u"?Qe.resolve():Eve()).then(()=>new Qe((l,u)=>{if(i(),!t)throw new vt.MissingAPI;const d=e.name,h=r.autoSchema?t.open(d):t.open(d,Math.round(10*e.verno));if(!h)throw new vt.MissingAPI;h.onerror=So(u),h.onblocked=Tr(e._fireOnBlocked),h.onupgradeneeded=Tr(v=>{if(o=h.transaction,r.autoSchema&&!e._options.allowEmptyDB){h.onerror=Vp,o.abort(),h.result.close();const b=t.deleteDatabase(d);b.onsuccess=b.onerror=Tr(()=>{u(new vt.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{o.onerror=So(u);var g=v.oldVersion>Math.pow(2,62)?0:v.oldVersion;a=g<1,e._novip.idbdb=h.result,$ve(e,g/10,o,u)}},u),h.onsuccess=Tr(()=>{o=null;const v=e._novip.idbdb=h.result,g=V0(v.objectStoreNames);if(g.length>0)try{const m=v.transaction((b=g).length===1?b[0]:b,"readonly");r.autoSchema?function({_novip:x},E,k){x.verno=E.version/10;const $=x._dbSchema=wS(0,E,k);x._storeNames=V0(E.objectStoreNames,0),J0(x,[x._allTables],tn($),$)}(e,v,m):(_S(e,e._dbSchema,m),function(x,E){const k=Oz(wS(0,x.idbdb,E),x._dbSchema);return!(k.add.length||k.change.some($=>$.add.length||$.change.length))}(e,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),yS(e,m)}catch{}var b;vp.push(e),v.onversionchange=Tr(m=>{r.vcFired=!0,e.on("versionchange").fire(m)}),v.onclose=Tr(m=>{e.on("close").fire(m)}),a&&function({indexedDB:m,IDBKeyRange:x},E){!e3(m)&&E!==C1&&QO(m,x).put({name:E}).catch(hr)}(e._deps,d),l()},u)}))]).then(()=>(i(),r.onReadyBeingFired=[],Qe.resolve($S(()=>e.on.ready.fire(e.vip))).then(function l(){if(r.onReadyBeingFired.length>0){let u=r.onReadyBeingFired.reduce(YO,hr);return r.onReadyBeingFired=[],Qe.resolve($S(()=>u(e.vip))).then(l)}}))).finally(()=>{r.onReadyBeingFired=null,r.isBeingOpened=!1}).then(()=>e).catch(l=>{r.dbOpenError=l;try{o&&o.abort()}catch{}return n===r.openCanceller&&e._close(),gn(l)}).finally(()=>{r.openComplete=!0,s()})}function xS(e){var r=s=>e.next(s),t=i(r),n=i(s=>e.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(t,n):Xn(l)?Promise.all(l).then(t,n):t(l)}}return i(r)()}function kve(e,r,t){var n=arguments.length;if(n<2)throw new vt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return t=i.pop(),[e,az(i),t]}function Az(e,r,t,n,i){return Qe.resolve().then(()=>{const s=ut.transless||ut,o=e._createTransaction(r,t,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===GO.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Az(e,r,t,null,i))):gn(h)}const l=VO(i);let u;l&&zd();const d=Qe.follow(()=>{if(u=i.call(o,o),u)if(l){var h=Ta.bind(null,null);u.then(h,h)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=xS(u))},a);return(u&&typeof u.then=="function"?Qe.resolve(u).then(h=>o.active?h:gn(new vt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>u)).then(h=>(n&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),gn(h)))})}function em(e,r,t){const n=Xn(e)?e.slice():[e];for(let i=0;i<t;++i)n.push(r);return n}const Tve={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(r){const t=e.table(r),{schema:n}=t,i={},s=[];function o(d,h,v){const g=yp(d),b=i[g]=i[g]||[],m=d==null?0:typeof d=="string"?1:d.length,x=h>0,E={...v,isVirtual:x,keyTail:h,keyLength:m,extractKey:gS(d),unique:!x&&v.unique};return b.push(E),E.isPrimaryKey||s.push(E),m>1&&o(m===2?d[0]:d.slice(0,m-1),h+1,v),b.sort((k,$)=>k.keyTail-$.keyTail),E}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const d of n.indexes)o(d.keyPath,0,d);function l(d){const h=d.query.index;return h.isVirtual?{...d,query:{index:h,range:(v=d.query.range,g=h.keyTail,{type:v.type===1?2:v.type,lower:em(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:em(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}:d;var v,g}return{...t,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(d){const h=i[yp(d)];return h&&h[0]}},count:d=>t.count(l(d)),query:d=>t.query(l(d)),openCursor(d){const{keyTail:h,isVirtual:v,keyLength:g}=d.query.index;return v?t.openCursor(l(d)).then(b=>b&&function(m){return Object.create(m,{continue:{value:function(E){E!=null?m.continue(em(E,d.reverse?e.MAX_KEY:e.MIN_KEY,h)):d.unique?m.continue(m.key.slice(0,g).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,h)):m.continue()}},continuePrimaryKey:{value(E,k){m.continuePrimaryKey(em(E,e.MAX_KEY,h),k)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const E=m.key;return g===1?E[0]:E.slice(0,g)}},value:{get:()=>m.value}})}(b)):t.openCursor(d)}}}}}};function t3(e,r,t,n){return t=t||{},n=n||"",tn(e).forEach(i=>{if(es(r,i)){var s=e[i],o=r[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=rS(s);a!==rS(o)?t[n+i]=r[i]:a==="Object"?t3(s,o,t,n+i+"."):s!==o&&(t[n+i]=r[i])}else s!==o&&(t[n+i]=r[i])}else t[n+i]=void 0}),tn(r).forEach(i=>{es(e,i)||(t[n+i]=r[i])}),t}const Ive={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(r){const t=e.table(r),{primaryKey:n}=t.schema;return{...t,mutate(s){const o=ut.trans,{deleting:a,creating:l,updating:u}=o.table(r).hook;switch(s.type){case"add":if(l.fire===hr)break;return o._promise("readwrite",()=>d(s),!0);case"put":if(l.fire===hr&&u.fire===hr)break;return o._promise("readwrite",()=>d(s),!0);case"delete":if(a.fire===hr)break;return o._promise("readwrite",()=>d(s),!0);case"deleteRange":if(a.fire===hr)break;return o._promise("readwrite",()=>function(v){return h(v.trans,v.range,1e4)}(s),!0)}return t.mutate(s);function d(v){const g=ut.trans,b=v.keys||function(m,x){return x.type==="delete"?x.keys:x.keys||x.values.map(m.extractKey)}(n,v);if(!b)throw new Error("Keys missing");return(v=v.type==="add"||v.type==="put"?{...v,keys:b}:{...v}).type!=="delete"&&(v.values=[...v.values]),v.keys&&(v.keys=[...v.keys]),function(m,x,E){return x.type==="add"?Promise.resolve([]):m.getMany({trans:x.trans,keys:E,cache:"immutable"})}(t,v,b).then(m=>{const x=b.map((E,k)=>{const $=m[k],S={onerror:null,onsuccess:null};if(v.type==="delete")a.fire.call(S,E,$,g);else if(v.type==="add"||$===void 0){const T=l.fire.call(S,E,v.values[k],g);E==null&&T!=null&&(E=T,v.keys[k]=E,n.outbound||Qs(v.values[k],n.keyPath,E))}else{const T=t3($,v.values[k]),O=u.fire.call(S,T,E,$,g);if(O){const I=v.values[k];Object.keys(O).forEach(P=>{es(I,P)?I[P]=O[P]:Qs(I,P,O[P])})}}return S});return t.mutate(v).then(({failures:E,results:k,numFailures:$,lastResult:S})=>{for(let T=0;T<b.length;++T){const O=k?k[T]:b[T],I=x[T];O==null?I.onerror&&I.onerror(E[T]):I.onsuccess&&I.onsuccess(v.type==="put"&&m[T]?v.values[T]:O)}return{failures:E,results:k,numFailures:$,lastResult:S}}).catch(E=>(x.forEach(k=>k.onerror&&k.onerror(E)),Promise.reject(E)))})}function h(v,g,b){return t.query({trans:v,values:!1,query:{index:n,range:g},limit:b}).then(({result:m})=>d({type:"delete",keys:m,trans:v}).then(x=>x.numFailures>0?Promise.reject(x.failures[0]):m.length<b?{failures:[],numFailures:0,lastResult:void 0}:h(v,{...g,lower:m[m.length-1],lowerOpen:!0},b)))}}}}})};function Cz(e,r,t){try{if(!r||r.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<r.keys.length&&s<e.length;++i)ui(r.keys[i],e[s])===0&&(n.push(t?Tv(r.values[i]):r.values[i]),++s);return n.length===e.length?n:null}catch{return null}}const Ove={stack:"dbcore",level:-1,create:e=>({table:r=>{const t=e.table(r);return{...t,getMany:n=>{if(!n.cache)return t.getMany(n);const i=Cz(n.keys,n.trans._cache,n.cache==="clone");return i?Qe.resolve(i):t.getMany(n).then(s=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Tv(s):s},s))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),t.mutate(n))}}})};function r3(e){return!("from"in e)}const ia=function(e,r){if(!this){const t=new ia;return e&&"d"in e&&di(t,e),t}di(this,arguments.length?{d:1,from:e,to:arguments.length>1?r:e}:{d:0})};function Yp(e,r,t){const n=ui(r,t);if(isNaN(n))return;if(n>0)throw RangeError();if(r3(e))return di(e,{from:r,to:t,d:1});const i=e.l,s=e.r;if(ui(t,e.from)<0)return i?Yp(i,r,t):e.l={from:r,to:t,d:1,l:null,r:null},ON(e);if(ui(r,e.to)>0)return s?Yp(s,r,t):e.r={from:r,to:t,d:1,l:null,r:null},ON(e);ui(r,e.from)<0&&(e.from=r,e.l=null,e.d=s?s.d+1:1),ui(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Q0(e,i),s&&o&&Q0(e,s)}function Q0(e,r){r3(r)||function t(n,{from:i,to:s,l:o,r:a}){Yp(n,i,s),o&&t(n,o),a&&t(n,a)}(e,r)}function Ave(e,r){const t=ES(r);let n=t.next();if(n.done)return!1;let i=n.value;const s=ES(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(ui(a.from,i.to)<=0&&ui(a.to,i.from)>=0)return!0;ui(i.from,a.from)<0?i=(n=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function ES(e){let r=r3(e)?null:{s:0,n:e};return{next(t){const n=arguments.length>0;for(;r;)switch(r.s){case 0:if(r.s=1,n)for(;r.n.l&&ui(t,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!n||ui(t,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function ON(e){var r,t;const n=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],o[i]=a[s],e[s]=o,o.d=AN(o)}e.d=AN(e)}function AN({r:e,l:r}){return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}bd(ia.prototype,{add(e){return Q0(this,e),this},addKey(e){return Yp(this,e,e),this},addKeys(e){return e.forEach(r=>Yp(this,r,r)),this},[nS](){return ES(this)}});const Cve={stack:"dbcore",level:0,create:e=>{const r=e.schema.name,t=new ia(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:v=>{const g=v.trans,b=g.mutatedParts||(g.mutatedParts={}),m=O=>{const I=`idb://${r}/${n}/${O}`;return b[I]||(b[I]=new ia)},x=m(""),E=m(":dels"),{type:k}=v;let[$,S]=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[[],v.values]:[];const T=v.trans._cache;return i.mutate(v).then(O=>{if(Xn($)){k!=="delete"&&($=O.results),x.addKeys($);const I=Cz($,T);I||k==="add"||E.addKeys($),(I||S)&&function(P,R,D,F){function K(q){const W=P(q.name||"");function M(Q){return Q!=null?q.extractKey(Q):null}const G=Q=>q.multiEntry&&Xn(Q)?Q.forEach(he=>W.addKey(he)):W.addKey(Q);(D||F).forEach((Q,he)=>{const ue=D&&M(D[he]),ke=F&&M(F[he]);ui(ue,ke)!==0&&(ue!=null&&G(ue),ke!=null&&G(ke))})}R.indexes.forEach(K)}(m,s,I,S)}else if($){const I={from:$.lower,to:$.upper};E.add(I),x.add(I)}else x.add(t),E.add(t),s.indexes.forEach(I=>m(I.name).add(t));return O})}},d=({query:{index:v,range:g}})=>{var b,m;return[v,new ia((b=g.lower)!==null&&b!==void 0?b:e.MIN_KEY,(m=g.upper)!==null&&m!==void 0?m:e.MAX_KEY)]},h={get:v=>[o,new ia(v.key)],getMany:v=>[o,new ia().addKeys(v.keys)],count:d,query:d,openCursor:d};return tn(h).forEach(v=>{u[v]=function(g){const{subscr:b}=ut;if(b){const m=S=>{const T=`idb://${r}/${n}/${S}`;return b[T]||(b[T]=new ia)},x=m(""),E=m(":dels"),[k,$]=h[v](g);if(m(k.name||"").add($),!k.isPrimaryKey){if(v!=="count"){const S=v==="query"&&l&&g.values&&i.query({...g,values:!1});return i[v].apply(this,arguments).then(T=>{if(v==="query"){if(l&&g.values)return S.then(({result:I})=>(x.addKeys(I),T));const O=g.values?T.result.map(a):T.result;g.values?x.addKeys(O):E.addKeys(O)}else if(v==="openCursor"){const O=T,I=g.values;return O&&Object.create(O,{key:{get:()=>(E.addKey(O.primaryKey),O.key)},primaryKey:{get(){const P=O.primaryKey;return E.addKey(P),P}},value:{get:()=>(I&&x.addKey(O.primaryKey),O.value)}})}return T})}E.add(t)}}return i[v].apply(this,arguments)}}),u}}}};class va{constructor(r,t){this._middlewares={},this.verno=0;const n=va.dependencies;this._options=t={addons:va.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:hr,dbReadyPromise:null,cancelOpen:hr,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new Qe(a=>{s.dbReadyResolve=a}),s.openCanceller=new Qe((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=r,this.on=gp(this,"populate","blocked","versionchange","close",{ready:[YO,hr]}),this.on.ready.subscribe=nz(this.on.ready.subscribe,a=>(l,u)=>{va.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||Qe.resolve().then(l),u&&a(l);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(l),u&&a(l);else{a(l);const h=this;u||a(function v(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(v)})}})}),this.Collection=(o=this,jf(pve.prototype,function(a,l){this.db=o;let u=Ez,d=null;if(l)try{u=l()}catch(b){d=b}const h=a._ctx,v=h.table,g=v.hook.reading.fire;this._ctx={table:v,index:h.index,isPrimKey:!h.index||v.schema.primKey.keyPath&&h.index===v.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:h.or,valueMapper:g!==Kp?g:null}})),this.Table=function(a){return jf(fve.prototype,function(l,u,d){this.db=a,this._tx=d,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:gp(null,{creating:[tve,hr],reading:[eve,Kp],updating:[nve,hr],deleting:[rve,hr]})})}(this),this.Transaction=function(a){return jf(mve.prototype,function(l,u,d,h,v){this.db=a,this.mode=l,this.storeNames=u,this.schema=d,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=gp(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Qe((g,b)=>{this._resolve=g,this._reject=b}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var b=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):b&&this.idbtrans&&this.idbtrans.abort(),gn(g)})})}(this),this.Version=function(a){return jf(xve.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return jf(kz.prototype,function(l,u,d){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:d};const h=a._deps.indexedDB;if(!h)throw new vt.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(v,g)=>h.cmp(g,v),this._max=(v,g)=>h.cmp(v,g)>0?v:g,this._min=(v,g)=>h.cmp(v,g)<0?v:g,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Gp(t.IDBKeyRange),this._createTransaction=(a,l,u,d)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,d),this._fireOnBlocked=a=>{this.on("blocked").fire(a),vp.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Tve),this.use(Ive),this.use(Cve),this.use(Ove),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(r){if(isNaN(r)||r<.1)throw new vt.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new vt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);const t=this._versions;var n=t.filter(i=>i._cfg.version===r)[0];return n||(n=new this.Version(r),t.push(n),t.sort(_ve),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(r){return this.idbdb&&(this._state.openComplete||ut.letThrough||this._vip)?r():new Qe((t,n)=>{if(this._state.openComplete)return n(new vt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new vt.DatabaseClosed);this.open().catch(hr)}this._state.dbReadyPromise.then(t,n)}).then(r)}use({stack:r,create:t,level:n,name:i}){i&&this.unuse({stack:r,name:i});const s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:t,level:n??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:r,name:t,create:n}){return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(i=>n?i.create!==n:!!t&&i.name!==t)),this}open(){return Sve(this)}_close(){const r=this._state,t=vp.indexOf(this);if(t>=0&&vp.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}r.dbReadyPromise=new Qe(n=>{r.dbReadyResolve=n}),r.openCanceller=new Qe((n,i)=>{r.cancelOpen=i})}close(){this._close();const r=this._state;this._options.autoOpen=!1,r.dbOpenError=new vt.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError)}delete(){const r=arguments.length>0,t=this._state;return new Qe((n,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=Tr(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!e3(a)&&u!==C1&&QO(a,l).delete(u).catch(hr)})(this._deps,this.name),n()}),o.onerror=So(i),o.onblocked=this._fireOnBlocked};if(r)throw new vt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return tn(this._allTables).map(r=>this._allTables[r])}transaction(){const r=kve.apply(this,arguments);return this._transaction.apply(this,r)}_transaction(r,t,n){let i=ut.trans;i&&i.db===this&&r.indexOf("!")===-1||(i=null);const s=r.indexOf("?")!==-1;let o,a;r=r.replace("!","").replace("?","");try{if(a=t.map(u=>{var d=u instanceof this.Table?u.name:u;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),r=="r"||r===L$)o=L$;else{if(r!="rw"&&r!=F$)throw new vt.InvalidArgument("Invalid transaction mode: "+r);o=F$}if(i){if(i.mode===L$&&o===F$){if(!s)throw new vt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new vt.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(d,h)=>{h(u)}):gn(u)}const l=Az.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):ut.trans?Hd(ut.transless,()=>this._whenReady(l)):this._whenReady(l)}table(r){if(!es(this._allTables,r))throw new vt.InvalidTable(`Table ${r} does not exist`);return this._allTables[r]}}const Pve=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Nve{constructor(r){this._subscribe=r}subscribe(r,t,n){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:t,complete:n})}[Pve](){return this}}function Pz(e,r){return tn(r).forEach(t=>{Q0(e[t]||(e[t]=new ia),r[t])}),e}function Rve(e){let r,t=!1;const n=new Nve(i=>{const s=VO(e);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,ql.storagemutated.unsubscribe(g)}};i.start&&i.start(u);let d=!1,h=!1;function v(){return tn(l).some(m=>a[m]&&Ave(a[m],l[m]))}const g=m=>{Pz(a,m),v()&&b()},b=()=>{if(d||o)return;a={};const m={},x=function(E){s&&zd();const k=()=>Wl(e,{subscr:E,trans:null}),$=ut.trans?Hd(ut.transless,k):k();return s&&$.then(Ta,Ta),$}(m);h||(ql(qp,g),h=!0),d=!0,Promise.resolve(x).then(E=>{t=!0,r=E,d=!1,o||(v()?b():(a={},l=m,i.next&&i.next(E)))},E=>{d=!1,t=!1,i.error&&i.error(E),u.unsubscribe()})};return b(),u});return n.hasValue=()=>t,n.getValue=()=>r,n}let SS;try{SS={indexedDB:$r.indexedDB||$r.mozIndexedDB||$r.webkitIndexedDB||$r.msIndexedDB,IDBKeyRange:$r.IDBKeyRange||$r.webkitIDBKeyRange}}catch{SS={indexedDB:null,IDBKeyRange:null}}const Eu=va;function o0(e){let r=ha;try{ha=!0,ql.storagemutated.fire(e)}finally{ha=r}}bd(Eu,{...e0,delete:e=>new Eu(e,{addons:[]}).delete(),exists:e=>new Eu(e,{addons:[]}).open().then(r=>(r.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:r,IDBKeyRange:t}){return e3(r)?Promise.resolve(r.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==C1)):QO(r,t).toCollection().primaryKeys()}(Eu.dependencies).then(e)}catch{return gn(new vt.MissingAPI)}},defineClass:()=>function(e){di(this,e)},ignoreTransaction:e=>ut.trans?Hd(ut.transless,e):e(),vip:$S,async:function(e){return function(){try{var r=xS(e.apply(this,arguments));return r&&typeof r.then=="function"?r:Qe.resolve(r)}catch(t){return gn(t)}}},spawn:function(e,r,t){try{var n=xS(e.apply(t,r||[]));return n&&typeof n.then=="function"?n:Qe.resolve(n)}catch(i){return gn(i)}},currentTransaction:{get:()=>ut.trans||null},waitFor:function(e,r){const t=Qe.resolve(typeof e=="function"?Eu.ignoreTransaction(e):e).timeout(r||6e4);return ut.trans?ut.trans.waitFor(t):t},Promise:Qe,debug:{get:()=>jo,set:e=>{uz(e,e==="dexie"?()=>!0:xz)}},derive:Zh,extend:di,props:bd,override:nz,Events:gp,on:ql,liveQuery:Rve,extendObservabilitySet:Pz,getByKeyPath:pa,setByKeyPath:Qs,delByKeyPath:function(e,r){typeof r=="string"?Qs(e,r,void 0):"length"in r&&[].map.call(r,function(t){Qs(e,t,void 0)})},shallowClone:oz,deepClone:Tv,getObjectDiff:t3,cmp:ui,asap:iz,minKey:pS,addons:[],connections:vp,errnames:GO,dependencies:SS,semVer:xN,version:xN.split(".").map(e=>parseInt(e)).reduce((e,r,t)=>e+r/Math.pow(10,2*t))}),Eu.maxKey=Gp(Eu.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ql(qp,e=>{if(!ha){let r;A1?(r=document.createEvent("CustomEvent"),r.initCustomEvent(Ol,!0,!0,e)):r=new CustomEvent(Ol,{detail:e}),ha=!0,dispatchEvent(r),ha=!1}}),addEventListener(Ol,({detail:e})=>{ha||o0(e)}));let ha=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(Ol);typeof e.unref=="function"&&e.unref(),ql(qp,r=>{ha||e.postMessage(r)}),e.onmessage=r=>{r.data&&o0(r.data)}}else if(typeof self<"u"&&typeof navigator<"u"){ql(qp,r=>{try{ha||(typeof localStorage<"u"&&localStorage.setItem(Ol,JSON.stringify({trig:Math.random(),changedParts:r})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:Ol,changedParts:r})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",r=>{if(r.key===Ol){const t=JSON.parse(r.newValue);t&&o0(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:r}){r&&r.type===Ol&&o0(r.changedParts)})}Qe.rejectionMapper=function(e,r){if(!e||e instanceof Xh||e instanceof TypeError||e instanceof SyntaxError||!e.name||!bN[e.name])return e;var t=new bN[e.name](r||e.message,e);return"stack"in e&&fa(t,"stack",{get:function(){return this.inner.stack}}),t},uz(jo,xz);class Dve extends va{constructor(){super("iris");Z(this,"events");Z(this,"tags");this.version(4).stores({events:"id, pubkey, kind, created_at",tags:"id, eventId, [type+value]"})}}const Bve=5e3,Gn=new Dve,gl=e=>{requestAnimationFrame(()=>{nt.handle(e,!1,!1)})},Qu={db:Gn,subscribedEventIds:new Set,subscribedAuthors:new Set,subscribedTags:new Set,seenFilters:new Set,saveQueue:[],clear(){return Gn.delete()},save:Ai(async function(){const e=[],r=[];for(const t of this.saveQueue)e.push(...t.events),r.push(...t.tags);this.saveQueue=[];try{await Gn.transaction("rw",Gn.events,Gn.tags,async()=>{await Gn.events.bulkPut(e),await Gn.tags.bulkPut(r)})}catch(t){console.error("bulkPut save error:",t)}},2e3),saveEvent(e){var t;const r=((t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").map(n=>({id:e.id.slice(0,16)+"-"+n[0].slice(0,16)+"-"+n[1].slice(0,16),eventId:e.id,type:n[0],value:n[1]})))||[];this.saveQueue.push({events:[e],tags:r}),this.save()},async init(){const e=te.getPubKey();await Gn.events.where({pubkey:e}).each(gl),await Gn.events.where({kind:3}).each(gl),await Gn.events.where({kind:0}).each(gl),await Gn.events.where({kind:4}).each(gl),await Gn.events.orderBy("created_at").reverse().filter(r=>r.kind===1).limit(Bve).each(gl)},subscribeToAuthors:Ai(async function(e){const r=[...this.subscribedAuthors];this.subscribedAuthors.clear(),await Gn.events.where("pubkey").anyOf(r).limit(e||1e3).each(gl)},1e3),subscribeToEventIds:Ai(async function(){const e=[...this.subscribedEventIds];this.subscribedEventIds.clear(),await Gn.events.where("id").anyOf(e).each(gl)},1e3),subscribeToTags:Ai(async function(){const e=[...this.subscribedTags].map(r=>r.split("|"));this.subscribedTags.clear(),await Gn.tags.where("[type+value]").anyOf(e).each(r=>this.subscribedEventIds.add(r.eventId)),await this.subscribeToEventIds()},1e3),async find(e){var n,i;if(!e||e["#p"])return;const r=JSON.stringify(e);if(this.seenFilters.has(r))return;if(this.seenFilters.add(r),e["#e"]&&Array.isArray(e["#e"])){for(const s of e["#e"])this.subscribedTags.add("e|"+s);await this.subscribeToTags();return}if((n=e.ids)!=null&&n.length){e.ids.forEach(s=>this.subscribedEventIds.add(s)),await this.subscribeToEventIds();return}if((i=e.authors)!=null&&i.length){e.authors.forEach(s=>this.subscribedAuthors.add(s)),await this.subscribeToAuthors();return}let t=Gn.events;e.kinds&&(t=t.where("kind").anyOf(e.kinds)),e.limit&&(t=t.limit(e.limit)),await t.each(gl)}};let zf={};const K$=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi","wss://soloco.nl"],CN=["wss://relay.nostr.band","wss://feeds.nostr.band/nostrhispano","wss://search.nos.today","wss://nostr-relay.app","wss://nb.relay.center","wss://nostrja-kari-nip50.heguro.com","wss://nfdn.betanet.dotalgo.io","wss://filter.stealth.wine","wss://nostr.novacisko.cz"],Ir={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:K$,init(){this.relays=new Map(K$.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(CN.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(r=>r.enabled).map(r=>r.url)},getSubscriptionIdForName(e){return sr.arrayToHex(hi(e)).slice(0,8)},getUrlsFromFollowEvent(e){const r=new Map;if(e.content)try{const t=JSON.parse(e.content);for(const n in t)try{const i=new URL(n).toString().replace(/\/$/,"");r.set(i,t[n])}catch{console.log("invalid relay url",n,e)}}catch{console.log("failed to parse relay urls",e)}return r},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return Mt.findArray({kinds:[3]}).forEach(t=>{if(t.content)try{const n=JSON.parse(t.content);for(const i in n)try{const s=new URL(i).toString().replace(/\/$/,""),o=e.get(s)||0;e.set(s,o+1)}catch{console.log("invalid relay url",i,t)}}catch{console.log("failed to parse relay urls",t)}}),Array.from(e.entries()).filter(([t])=>!this.relays.has(t)).sort((t,n)=>n[1]-t[1]).map(t=>({url:t[0],users:t[1]}))},getConnectedRelayCount:function(){var r;let e=0;for(const t of this.relays.keys())((r=gt.relayPool.relayByUrl.get(t))==null?void 0:r.status)===1&&e++;return e},getUserRelays(e){let r=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const t=Mt.findOne({kinds:[3],authors:[e]});return t&&(r=this.getUrlsFromFollowEvent(t)),Array.from(r.entries())},manage:function(){be.get("relays").put({}),be.get("relays").on(e=>{if(e){zf=e;for(const r of this.relays.keys())if(zf[r]===null)this.remove(r);else if(zf[r]&&zf[r].enabled===!1){const t=this.relays.get(r);t&&(t.enabled=!1,this.relays.set(r,t),gt.relayPool.removeRelay(r))}for(const[r,t]of Object.entries(zf))if(t)this.relays.has(r)||(this.relays.set(r,{url:r,enabled:!!t.enabled}),t.enabled&&gt.relayPool.addOrGetRelay(r));else{this.relays.has(r)&&this.remove(r);continue}}})},add(e){if(this.relays.has(e))return;const r={enabled:!0,url:e};this.relays.set(e,r),gt.relayPool.addOrGetRelay(e)},remove(e){try{gt.relayPool.removeRelay(e)}catch(r){console.log("error closing relay",r)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),gt.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),gt.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const r of K$)this.add(r);this.saveToContacts();for(const r of CN)this.relays.has(r)||this.add(r);const e={};for(const[r,t]of this.relays.entries())e[r]={enabled:t.enabled,url:r};be.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const r=Mt.findOne({kinds:[3],authors:[te.getPubKey()]}),n={kind:3,content:JSON.stringify(e),tags:(r==null?void 0:r.tags)||[]};nt.publish(n)},updateLastSeen:Ai(e=>{const r=Math.floor(Date.now()/1e3);be.get("relays").get(e).get("lastSeen").put(r)},5*1e3,{leading:!0}),groupFilter(e){var r;return e.authors&&((r=e.kinds)==null?void 0:r.length)===1&&e.kinds[0]===0?(e.authors.forEach(t=>{this.subscribedProfiles.add(t)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(gt.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(t=>{this.subscribedEventTags.add(t)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&Ir.init();const{authenticate:Mve}=AF,ec=new Upe(Ir.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>nt.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0}),Lve=(e,r)=>new URL(e).host===new URL(r).host;ec.onauth(async(e,r)=>{if(Ir.enabledRelays().some(t=>Lve(t,e.url)))try{await Mve({relay:e,challenge:r,sign:nt.sign})}catch(t){console.log("error: authenticate to relay:",t),ec.removeRelay(e.url),Ir.disable(e.url)}});let Fve=0,kS={logSubscriptions:!1,indexedDbLoad:!0},Nz=0,PN=Date.now();be.get("dev").on(e=>{kS=e,ec.logSubscriptions=kS.logSubscriptions});be.get("lastOpened").once(e=>{Nz=e,be.get("lastOpened").put(Math.floor(Date.now()/1e3))});const Rz=()=>{Date.now()-PN>60*1e3&&(PN=Date.now(),ec.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Rz()});document.addEventListener("online",Rz);const jve={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:ec,log:Ai(console.log,1e3),subscribe(e,r,t=!1,n=!0){let i;r&&(i=++Fve,this.subscriptions.set(i,{filter:e,callback:r})),e.authors&&e.authors.forEach(o=>this.subscribedAuthors.add(o)),r&&Mt.find(e,r),kS.indexedDbLoad!==!1&&setTimeout(()=>{Qu.find(e)});const s=this.subscribeRelayPool(e,t,n);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){ec.publish(e,Array.from(Ir.enabledRelays()))},handle(e){var r;for(const t of this.subscriptions.values())t.filter&&fO(t.filter,e)&&((r=t.callback)==null||r.call(t,e))},subscribeRelayPool(e,r,t){var i;let n;return e.keywords?n=Array.from(Ir.searchRelays.keys()):(t||((i=e.authors)==null?void 0:i.length)!==1)&&(n=Ir.enabledRelays()),r&&(e.since=Nz),ec.subscribe([e],n,(s,o,a)=>{setTimeout(()=>{nt.handle(s),a&&nt.handleEventMetadata({url:a,event:s})})},t?100:0,void 0,{defaultRelays:Ir.enabledRelays()})}},gt=jve;class zve{constructor(){Z(this,"key","");Z(this,"name","");Z(this,"username","");Z(this,"displayName");Z(this,"display_name");Z(this,"description");Z(this,"avatar");Z(this,"picture");Z(this,"cover");Z(this,"location");Z(this,"website");Z(this,"email");Z(this,"nip05");Z(this,"lud16");Z(this,"lud06");Z(this,"about");Z(this,"created_at",0);Z(this,"isDefault",!1)}}var eb={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */eb.exports;(function(e,r){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,v=2,g=4,b=1,m=2,x=1,E=2,k=4,$=8,S=16,T=32,O=64,I=128,P=256,R=512,D=30,F="...",K=800,q=16,W=1,M=2,G=3,Q=1/0,he=9007199254740991,ue=17976931348623157e292,ke=0/0,Te=4294967295,Ce=Te-1,Ye=Te>>>1,ge=[["ary",I],["bind",x],["bindKey",E],["curry",$],["curryRight",S],["flip",R],["partial",T],["partialRight",O],["rearg",P]],ce="[object Arguments]",ye="[object Array]",fe="[object AsyncFunction]",y="[object Boolean]",w="[object Date]",A="[object DOMException]",N="[object Error]",B="[object Function]",j="[object GeneratorFunction]",X="[object Map]",re="[object Number]",Ee="[object Null]",_e="[object Object]",We="[object Promise]",Xe="[object Proxy]",Ze="[object RegExp]",Ve="[object Set]",$t="[object String]",Kt="[object Symbol]",Zr="[object Undefined]",vr="[object WeakMap]",yt="[object WeakSet]",Xr="[object ArrayBuffer]",gi="[object DataView]",Bi="[object Float32Array]",un="[object Float64Array]",Bs="[object Int8Array]",Wc="[object Int16Array]",Vc="[object Int32Array]",du="[object Uint8Array]",pf="[object Uint8ClampedArray]",vf="[object Uint16Array]",fu="[object Uint32Array]",Dg=/\b__p \+= '';/g,Nw=/\b(__p \+=) '' \+/g,po=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bg=/&(?:amp|lt|gt|quot|#39);/g,Mg=/[&<>"']/g,Lg=RegExp(Bg.source),Rw=RegExp(Mg.source),Dw=/<%-([\s\S]+?)%>/g,Bw=/<%([\s\S]+?)%>/g,Fg=/<%=([\s\S]+?)%>/g,Mw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lw=/^\w*$/,Fw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gf=/[\\^$.*+?()[\]{}|]/g,jw=RegExp(gf.source),yf=/^\s+/,jg=/\s/,zw=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hw=/\{\n\/\* \[wrapped with (.+)\] \*/,Uw=/,? & /,Kw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ww=/[()=,{}\[\]\/\s]/,Vw=/\\(\\)?/g,qw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zg=/\w*$/,Gw=/^[-+]0x[0-9a-f]+$/i,Yw=/^0b[01]+$/i,Zw=/^\[object .+?Constructor\]$/,Xw=/^0o[0-7]+$/i,Jw=/^(?:0|[1-9]\d*)$/,Qw=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qc=/($^)/,Hg=/['\n\r\u2028\u2029\\]/g,vo="\\ud800-\\udfff",Ug="\\u0300-\\u036f",Ua="\\ufe20-\\ufe2f",e_="\\u20d0-\\u20ff",pu=Ug+Ua+e_,Gc="\\u2700-\\u27bf",Kg="a-z\\xdf-\\xf6\\xf8-\\xff",t_="\\xac\\xb1\\xd7\\xf7",mf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r_="\\u2000-\\u206f",n_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H="A-Z\\xc0-\\xd6\\xd8-\\xde",J="\\ufe0e\\ufe0f",V=t_+mf+r_+n_,se="['’]",le="["+vo+"]",ie="["+V+"]",we="["+pu+"]",Ae="\\d+",Pe="["+Gc+"]",Ne="["+Kg+"]",Me="[^"+vo+V+Ae+Gc+Kg+H+"]",et="\\ud83c[\\udffb-\\udfff]",Tt="(?:"+we+"|"+et+")",Ht="[^"+vo+"]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",xr="[\\ud800-\\udbff][\\udc00-\\udfff]",lr="["+H+"]",ti="\\u200d",Ka="(?:"+Ne+"|"+Me+")",bf="(?:"+lr+"|"+Me+")",Wg="(?:"+se+"(?:d|ll|m|re|s|t|ve))?",Yc="(?:"+se+"(?:D|LL|M|RE|S|T|VE))?",i_=Tt+"?",Vg="["+J+"]?",s_="(?:"+ti+"(?:"+[Ht,Ut,xr].join("|")+")"+Vg+i_+")*",qg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CY="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",YA=Vg+i_+s_,PY="(?:"+[Pe,Ut,xr].join("|")+")"+YA,NY="(?:"+[Ht+we+"?",we,Ut,xr,le].join("|")+")",RY=RegExp(se,"g"),DY=RegExp(we,"g"),o_=RegExp(et+"(?="+et+")|"+NY+YA,"g"),BY=RegExp([lr+"?"+Ne+"+"+Wg+"(?="+[ie,lr,"$"].join("|")+")",bf+"+"+Yc+"(?="+[ie,lr+Ka,"$"].join("|")+")",lr+"?"+Ka+"+"+Wg,lr+"+"+Yc,CY,qg,Ae,PY].join("|"),"g"),MY=RegExp("["+ti+vo+pu+J+"]"),LY=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,FY=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jY=-1,_r={};_r[Bi]=_r[un]=_r[Bs]=_r[Wc]=_r[Vc]=_r[du]=_r[pf]=_r[vf]=_r[fu]=!0,_r[ce]=_r[ye]=_r[Xr]=_r[y]=_r[gi]=_r[w]=_r[N]=_r[B]=_r[X]=_r[re]=_r[_e]=_r[Ze]=_r[Ve]=_r[$t]=_r[vr]=!1;var gr={};gr[ce]=gr[ye]=gr[Xr]=gr[gi]=gr[y]=gr[w]=gr[Bi]=gr[un]=gr[Bs]=gr[Wc]=gr[Vc]=gr[X]=gr[re]=gr[_e]=gr[Ze]=gr[Ve]=gr[$t]=gr[Kt]=gr[du]=gr[pf]=gr[vf]=gr[fu]=!0,gr[N]=gr[B]=gr[vr]=!1;var zY={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},HY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},UY={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},KY={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},WY=parseFloat,VY=parseInt,ZA=typeof en=="object"&&en&&en.Object===Object&&en,qY=typeof self=="object"&&self&&self.Object===Object&&self,Bn=ZA||qY||Function("return this")(),a_=r&&!r.nodeType&&r,vu=a_&&!0&&e&&!e.nodeType&&e,XA=vu&&vu.exports===a_,l_=XA&&ZA.process,as=function(){try{var oe=vu&&vu.require&&vu.require("util").types;return oe||l_&&l_.binding&&l_.binding("util")}catch{}}(),JA=as&&as.isArrayBuffer,QA=as&&as.isDate,eC=as&&as.isMap,tC=as&&as.isRegExp,rC=as&&as.isSet,nC=as&&as.isTypedArray;function Mi(oe,me,de){switch(de.length){case 0:return oe.call(me);case 1:return oe.call(me,de[0]);case 2:return oe.call(me,de[0],de[1]);case 3:return oe.call(me,de[0],de[1],de[2])}return oe.apply(me,de)}function GY(oe,me,de,Je){for(var xt=-1,Xt=oe==null?0:oe.length;++xt<Xt;){var cn=oe[xt];me(Je,cn,de(cn),oe)}return Je}function ls(oe,me){for(var de=-1,Je=oe==null?0:oe.length;++de<Je&&me(oe[de],de,oe)!==!1;);return oe}function YY(oe,me){for(var de=oe==null?0:oe.length;de--&&me(oe[de],de,oe)!==!1;);return oe}function iC(oe,me){for(var de=-1,Je=oe==null?0:oe.length;++de<Je;)if(!me(oe[de],de,oe))return!1;return!0}function Wa(oe,me){for(var de=-1,Je=oe==null?0:oe.length,xt=0,Xt=[];++de<Je;){var cn=oe[de];me(cn,de,oe)&&(Xt[xt++]=cn)}return Xt}function Gg(oe,me){var de=oe==null?0:oe.length;return!!de&&Zc(oe,me,0)>-1}function u_(oe,me,de){for(var Je=-1,xt=oe==null?0:oe.length;++Je<xt;)if(de(me,oe[Je]))return!0;return!1}function Er(oe,me){for(var de=-1,Je=oe==null?0:oe.length,xt=Array(Je);++de<Je;)xt[de]=me(oe[de],de,oe);return xt}function Va(oe,me){for(var de=-1,Je=me.length,xt=oe.length;++de<Je;)oe[xt+de]=me[de];return oe}function c_(oe,me,de,Je){var xt=-1,Xt=oe==null?0:oe.length;for(Je&&Xt&&(de=oe[++xt]);++xt<Xt;)de=me(de,oe[xt],xt,oe);return de}function ZY(oe,me,de,Je){var xt=oe==null?0:oe.length;for(Je&&xt&&(de=oe[--xt]);xt--;)de=me(de,oe[xt],xt,oe);return de}function h_(oe,me){for(var de=-1,Je=oe==null?0:oe.length;++de<Je;)if(me(oe[de],de,oe))return!0;return!1}var XY=d_("length");function JY(oe){return oe.split("")}function QY(oe){return oe.match(Kw)||[]}function sC(oe,me,de){var Je;return de(oe,function(xt,Xt,cn){if(me(xt,Xt,cn))return Je=Xt,!1}),Je}function Yg(oe,me,de,Je){for(var xt=oe.length,Xt=de+(Je?1:-1);Je?Xt--:++Xt<xt;)if(me(oe[Xt],Xt,oe))return Xt;return-1}function Zc(oe,me,de){return me===me?hZ(oe,me,de):Yg(oe,oC,de)}function eZ(oe,me,de,Je){for(var xt=de-1,Xt=oe.length;++xt<Xt;)if(Je(oe[xt],me))return xt;return-1}function oC(oe){return oe!==oe}function aC(oe,me){var de=oe==null?0:oe.length;return de?p_(oe,me)/de:ke}function d_(oe){return function(me){return me==null?t:me[oe]}}function f_(oe){return function(me){return oe==null?t:oe[me]}}function lC(oe,me,de,Je,xt){return xt(oe,function(Xt,cn,cr){de=Je?(Je=!1,Xt):me(de,Xt,cn,cr)}),de}function tZ(oe,me){var de=oe.length;for(oe.sort(me);de--;)oe[de]=oe[de].value;return oe}function p_(oe,me){for(var de,Je=-1,xt=oe.length;++Je<xt;){var Xt=me(oe[Je]);Xt!==t&&(de=de===t?Xt:de+Xt)}return de}function v_(oe,me){for(var de=-1,Je=Array(oe);++de<oe;)Je[de]=me(de);return Je}function rZ(oe,me){return Er(me,function(de){return[de,oe[de]]})}function uC(oe){return oe&&oe.slice(0,fC(oe)+1).replace(yf,"")}function Li(oe){return function(me){return oe(me)}}function g_(oe,me){return Er(me,function(de){return oe[de]})}function wf(oe,me){return oe.has(me)}function cC(oe,me){for(var de=-1,Je=oe.length;++de<Je&&Zc(me,oe[de],0)>-1;);return de}function hC(oe,me){for(var de=oe.length;de--&&Zc(me,oe[de],0)>-1;);return de}function nZ(oe,me){for(var de=oe.length,Je=0;de--;)oe[de]===me&&++Je;return Je}var iZ=f_(zY),sZ=f_(HY);function oZ(oe){return"\\"+KY[oe]}function aZ(oe,me){return oe==null?t:oe[me]}function Xc(oe){return MY.test(oe)}function lZ(oe){return LY.test(oe)}function uZ(oe){for(var me,de=[];!(me=oe.next()).done;)de.push(me.value);return de}function y_(oe){var me=-1,de=Array(oe.size);return oe.forEach(function(Je,xt){de[++me]=[xt,Je]}),de}function dC(oe,me){return function(de){return oe(me(de))}}function qa(oe,me){for(var de=-1,Je=oe.length,xt=0,Xt=[];++de<Je;){var cn=oe[de];(cn===me||cn===d)&&(oe[de]=d,Xt[xt++]=de)}return Xt}function Zg(oe){var me=-1,de=Array(oe.size);return oe.forEach(function(Je){de[++me]=Je}),de}function cZ(oe){var me=-1,de=Array(oe.size);return oe.forEach(function(Je){de[++me]=[Je,Je]}),de}function hZ(oe,me,de){for(var Je=de-1,xt=oe.length;++Je<xt;)if(oe[Je]===me)return Je;return-1}function dZ(oe,me,de){for(var Je=de+1;Je--;)if(oe[Je]===me)return Je;return Je}function Jc(oe){return Xc(oe)?pZ(oe):XY(oe)}function Ms(oe){return Xc(oe)?vZ(oe):JY(oe)}function fC(oe){for(var me=oe.length;me--&&jg.test(oe.charAt(me)););return me}var fZ=f_(UY);function pZ(oe){for(var me=o_.lastIndex=0;o_.test(oe);)++me;return me}function vZ(oe){return oe.match(o_)||[]}function gZ(oe){return oe.match(BY)||[]}var yZ=function oe(me){me=me==null?Bn:Qc.defaults(Bn.Object(),me,Qc.pick(Bn,FY));var de=me.Array,Je=me.Date,xt=me.Error,Xt=me.Function,cn=me.Math,cr=me.Object,m_=me.RegExp,mZ=me.String,us=me.TypeError,Xg=de.prototype,bZ=Xt.prototype,eh=cr.prototype,Jg=me["__core-js_shared__"],Qg=bZ.toString,nr=eh.hasOwnProperty,wZ=0,pC=function(){var c=/[^.]+$/.exec(Jg&&Jg.keys&&Jg.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),ey=eh.toString,_Z=Qg.call(cr),$Z=Bn._,xZ=m_("^"+Qg.call(nr).replace(gf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ty=XA?me.Buffer:t,Ga=me.Symbol,ry=me.Uint8Array,vC=ty?ty.allocUnsafe:t,ny=dC(cr.getPrototypeOf,cr),gC=cr.create,yC=eh.propertyIsEnumerable,iy=Xg.splice,mC=Ga?Ga.isConcatSpreadable:t,_f=Ga?Ga.iterator:t,gu=Ga?Ga.toStringTag:t,sy=function(){try{var c=_u(cr,"defineProperty");return c({},"",{}),c}catch{}}(),EZ=me.clearTimeout!==Bn.clearTimeout&&me.clearTimeout,SZ=Je&&Je.now!==Bn.Date.now&&Je.now,kZ=me.setTimeout!==Bn.setTimeout&&me.setTimeout,oy=cn.ceil,ay=cn.floor,b_=cr.getOwnPropertySymbols,TZ=ty?ty.isBuffer:t,bC=me.isFinite,IZ=Xg.join,OZ=dC(cr.keys,cr),hn=cn.max,Vn=cn.min,AZ=Je.now,CZ=me.parseInt,wC=cn.random,PZ=Xg.reverse,w_=_u(me,"DataView"),$f=_u(me,"Map"),__=_u(me,"Promise"),th=_u(me,"Set"),xf=_u(me,"WeakMap"),Ef=_u(cr,"create"),ly=xf&&new xf,rh={},NZ=$u(w_),RZ=$u($f),DZ=$u(__),BZ=$u(th),MZ=$u(xf),uy=Ga?Ga.prototype:t,Sf=uy?uy.valueOf:t,_C=uy?uy.toString:t;function z(c){if(Nr(c)&&!Et(c)&&!(c instanceof Lt)){if(c instanceof cs)return c;if(nr.call(c,"__wrapped__"))return $P(c)}return new cs(c)}var nh=function(){function c(){}return function(f){if(!Cr(f))return{};if(gC)return gC(f);c.prototype=f;var _=new c;return c.prototype=t,_}}();function cy(){}function cs(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}z.templateSettings={escape:Dw,evaluate:Bw,interpolate:Fg,variable:"",imports:{_:z}},z.prototype=cy.prototype,z.prototype.constructor=z,cs.prototype=nh(cy.prototype),cs.prototype.constructor=cs;function Lt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function LZ(){var c=new Lt(this.__wrapped__);return c.__actions__=yi(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=yi(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=yi(this.__views__),c}function FZ(){if(this.__filtered__){var c=new Lt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function jZ(){var c=this.__wrapped__.value(),f=this.__dir__,_=Et(c),C=f<0,L=_?c.length:0,U=JX(0,L,this.__views__),Y=U.start,ee=U.end,ae=ee-Y,xe=C?ee:Y-1,Se=this.__iteratees__,Ie=Se.length,qe=0,it=Vn(ae,this.__takeCount__);if(!_||!C&&L==ae&&it==ae)return WC(c,this.__actions__);var ft=[];e:for(;ae--&&qe<it;){xe+=f;for(var It=-1,pt=c[xe];++It<Ie;){var Bt=Se[It],jt=Bt.iteratee,zi=Bt.type,ii=jt(pt);if(zi==M)pt=ii;else if(!ii){if(zi==W)continue e;break e}}ft[qe++]=pt}return ft}Lt.prototype=nh(cy.prototype),Lt.prototype.constructor=Lt;function yu(c){var f=-1,_=c==null?0:c.length;for(this.clear();++f<_;){var C=c[f];this.set(C[0],C[1])}}function zZ(){this.__data__=Ef?Ef(null):{},this.size=0}function HZ(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function UZ(c){var f=this.__data__;if(Ef){var _=f[c];return _===l?t:_}return nr.call(f,c)?f[c]:t}function KZ(c){var f=this.__data__;return Ef?f[c]!==t:nr.call(f,c)}function WZ(c,f){var _=this.__data__;return this.size+=this.has(c)?0:1,_[c]=Ef&&f===t?l:f,this}yu.prototype.clear=zZ,yu.prototype.delete=HZ,yu.prototype.get=UZ,yu.prototype.has=KZ,yu.prototype.set=WZ;function Ko(c){var f=-1,_=c==null?0:c.length;for(this.clear();++f<_;){var C=c[f];this.set(C[0],C[1])}}function VZ(){this.__data__=[],this.size=0}function qZ(c){var f=this.__data__,_=hy(f,c);if(_<0)return!1;var C=f.length-1;return _==C?f.pop():iy.call(f,_,1),--this.size,!0}function GZ(c){var f=this.__data__,_=hy(f,c);return _<0?t:f[_][1]}function YZ(c){return hy(this.__data__,c)>-1}function ZZ(c,f){var _=this.__data__,C=hy(_,c);return C<0?(++this.size,_.push([c,f])):_[C][1]=f,this}Ko.prototype.clear=VZ,Ko.prototype.delete=qZ,Ko.prototype.get=GZ,Ko.prototype.has=YZ,Ko.prototype.set=ZZ;function Wo(c){var f=-1,_=c==null?0:c.length;for(this.clear();++f<_;){var C=c[f];this.set(C[0],C[1])}}function XZ(){this.size=0,this.__data__={hash:new yu,map:new($f||Ko),string:new yu}}function JZ(c){var f=xy(this,c).delete(c);return this.size-=f?1:0,f}function QZ(c){return xy(this,c).get(c)}function eX(c){return xy(this,c).has(c)}function tX(c,f){var _=xy(this,c),C=_.size;return _.set(c,f),this.size+=_.size==C?0:1,this}Wo.prototype.clear=XZ,Wo.prototype.delete=JZ,Wo.prototype.get=QZ,Wo.prototype.has=eX,Wo.prototype.set=tX;function mu(c){var f=-1,_=c==null?0:c.length;for(this.__data__=new Wo;++f<_;)this.add(c[f])}function rX(c){return this.__data__.set(c,l),this}function nX(c){return this.__data__.has(c)}mu.prototype.add=mu.prototype.push=rX,mu.prototype.has=nX;function Ls(c){var f=this.__data__=new Ko(c);this.size=f.size}function iX(){this.__data__=new Ko,this.size=0}function sX(c){var f=this.__data__,_=f.delete(c);return this.size=f.size,_}function oX(c){return this.__data__.get(c)}function aX(c){return this.__data__.has(c)}function lX(c,f){var _=this.__data__;if(_ instanceof Ko){var C=_.__data__;if(!$f||C.length<i-1)return C.push([c,f]),this.size=++_.size,this;_=this.__data__=new Wo(C)}return _.set(c,f),this.size=_.size,this}Ls.prototype.clear=iX,Ls.prototype.delete=sX,Ls.prototype.get=oX,Ls.prototype.has=aX,Ls.prototype.set=lX;function $C(c,f){var _=Et(c),C=!_&&xu(c),L=!_&&!C&&Qa(c),U=!_&&!C&&!L&&ah(c),Y=_||C||L||U,ee=Y?v_(c.length,mZ):[],ae=ee.length;for(var xe in c)(f||nr.call(c,xe))&&!(Y&&(xe=="length"||L&&(xe=="offset"||xe=="parent")||U&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||Yo(xe,ae)))&&ee.push(xe);return ee}function xC(c){var f=c.length;return f?c[P_(0,f-1)]:t}function uX(c,f){return Ey(yi(c),bu(f,0,c.length))}function cX(c){return Ey(yi(c))}function $_(c,f,_){(_!==t&&!Fs(c[f],_)||_===t&&!(f in c))&&Vo(c,f,_)}function kf(c,f,_){var C=c[f];(!(nr.call(c,f)&&Fs(C,_))||_===t&&!(f in c))&&Vo(c,f,_)}function hy(c,f){for(var _=c.length;_--;)if(Fs(c[_][0],f))return _;return-1}function hX(c,f,_,C){return Ya(c,function(L,U,Y){f(C,L,_(L),Y)}),C}function EC(c,f){return c&&yo(f,wn(f),c)}function dX(c,f){return c&&yo(f,bi(f),c)}function Vo(c,f,_){f=="__proto__"&&sy?sy(c,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):c[f]=_}function x_(c,f){for(var _=-1,C=f.length,L=de(C),U=c==null;++_<C;)L[_]=U?t:n$(c,f[_]);return L}function bu(c,f,_){return c===c&&(_!==t&&(c=c<=_?c:_),f!==t&&(c=c>=f?c:f)),c}function hs(c,f,_,C,L,U){var Y,ee=f&h,ae=f&v,xe=f&g;if(_&&(Y=L?_(c,C,L,U):_(c)),Y!==t)return Y;if(!Cr(c))return c;var Se=Et(c);if(Se){if(Y=eJ(c),!ee)return yi(c,Y)}else{var Ie=qn(c),qe=Ie==B||Ie==j;if(Qa(c))return GC(c,ee);if(Ie==_e||Ie==ce||qe&&!L){if(Y=ae||qe?{}:fP(c),!ee)return ae?UX(c,dX(Y,c)):HX(c,EC(Y,c))}else{if(!gr[Ie])return L?c:{};Y=tJ(c,Ie,ee)}}U||(U=new Ls);var it=U.get(c);if(it)return it;U.set(c,Y),HP(c)?c.forEach(function(pt){Y.add(hs(pt,f,_,pt,c,U))}):jP(c)&&c.forEach(function(pt,Bt){Y.set(Bt,hs(pt,f,_,Bt,c,U))});var ft=xe?ae?U_:H_:ae?bi:wn,It=Se?t:ft(c);return ls(It||c,function(pt,Bt){It&&(Bt=pt,pt=c[Bt]),kf(Y,Bt,hs(pt,f,_,Bt,c,U))}),Y}function fX(c){var f=wn(c);return function(_){return SC(_,c,f)}}function SC(c,f,_){var C=_.length;if(c==null)return!C;for(c=cr(c);C--;){var L=_[C],U=f[L],Y=c[L];if(Y===t&&!(L in c)||!U(Y))return!1}return!0}function kC(c,f,_){if(typeof c!="function")throw new us(o);return Nf(function(){c.apply(t,_)},f)}function Tf(c,f,_,C){var L=-1,U=Gg,Y=!0,ee=c.length,ae=[],xe=f.length;if(!ee)return ae;_&&(f=Er(f,Li(_))),C?(U=u_,Y=!1):f.length>=i&&(U=wf,Y=!1,f=new mu(f));e:for(;++L<ee;){var Se=c[L],Ie=_==null?Se:_(Se);if(Se=C||Se!==0?Se:0,Y&&Ie===Ie){for(var qe=xe;qe--;)if(f[qe]===Ie)continue e;ae.push(Se)}else U(f,Ie,C)||ae.push(Se)}return ae}var Ya=QC(go),TC=QC(S_,!0);function pX(c,f){var _=!0;return Ya(c,function(C,L,U){return _=!!f(C,L,U),_}),_}function dy(c,f,_){for(var C=-1,L=c.length;++C<L;){var U=c[C],Y=f(U);if(Y!=null&&(ee===t?Y===Y&&!ji(Y):_(Y,ee)))var ee=Y,ae=U}return ae}function vX(c,f,_,C){var L=c.length;for(_=kt(_),_<0&&(_=-_>L?0:L+_),C=C===t||C>L?L:kt(C),C<0&&(C+=L),C=_>C?0:KP(C);_<C;)c[_++]=f;return c}function IC(c,f){var _=[];return Ya(c,function(C,L,U){f(C,L,U)&&_.push(C)}),_}function Mn(c,f,_,C,L){var U=-1,Y=c.length;for(_||(_=nJ),L||(L=[]);++U<Y;){var ee=c[U];f>0&&_(ee)?f>1?Mn(ee,f-1,_,C,L):Va(L,ee):C||(L[L.length]=ee)}return L}var E_=eP(),OC=eP(!0);function go(c,f){return c&&E_(c,f,wn)}function S_(c,f){return c&&OC(c,f,wn)}function fy(c,f){return Wa(f,function(_){return Zo(c[_])})}function wu(c,f){f=Xa(f,c);for(var _=0,C=f.length;c!=null&&_<C;)c=c[mo(f[_++])];return _&&_==C?c:t}function AC(c,f,_){var C=f(c);return Et(c)?C:Va(C,_(c))}function ri(c){return c==null?c===t?Zr:Ee:gu&&gu in cr(c)?XX(c):cJ(c)}function k_(c,f){return c>f}function gX(c,f){return c!=null&&nr.call(c,f)}function yX(c,f){return c!=null&&f in cr(c)}function mX(c,f,_){return c>=Vn(f,_)&&c<hn(f,_)}function T_(c,f,_){for(var C=_?u_:Gg,L=c[0].length,U=c.length,Y=U,ee=de(U),ae=1/0,xe=[];Y--;){var Se=c[Y];Y&&f&&(Se=Er(Se,Li(f))),ae=Vn(Se.length,ae),ee[Y]=!_&&(f||L>=120&&Se.length>=120)?new mu(Y&&Se):t}Se=c[0];var Ie=-1,qe=ee[0];e:for(;++Ie<L&&xe.length<ae;){var it=Se[Ie],ft=f?f(it):it;if(it=_||it!==0?it:0,!(qe?wf(qe,ft):C(xe,ft,_))){for(Y=U;--Y;){var It=ee[Y];if(!(It?wf(It,ft):C(c[Y],ft,_)))continue e}qe&&qe.push(ft),xe.push(it)}}return xe}function bX(c,f,_,C){return go(c,function(L,U,Y){f(C,_(L),U,Y)}),C}function If(c,f,_){f=Xa(f,c),c=yP(c,f);var C=c==null?c:c[mo(fs(f))];return C==null?t:Mi(C,c,_)}function CC(c){return Nr(c)&&ri(c)==ce}function wX(c){return Nr(c)&&ri(c)==Xr}function _X(c){return Nr(c)&&ri(c)==w}function Of(c,f,_,C,L){return c===f?!0:c==null||f==null||!Nr(c)&&!Nr(f)?c!==c&&f!==f:$X(c,f,_,C,Of,L)}function $X(c,f,_,C,L,U){var Y=Et(c),ee=Et(f),ae=Y?ye:qn(c),xe=ee?ye:qn(f);ae=ae==ce?_e:ae,xe=xe==ce?_e:xe;var Se=ae==_e,Ie=xe==_e,qe=ae==xe;if(qe&&Qa(c)){if(!Qa(f))return!1;Y=!0,Se=!1}if(qe&&!Se)return U||(U=new Ls),Y||ah(c)?cP(c,f,_,C,L,U):YX(c,f,ae,_,C,L,U);if(!(_&b)){var it=Se&&nr.call(c,"__wrapped__"),ft=Ie&&nr.call(f,"__wrapped__");if(it||ft){var It=it?c.value():c,pt=ft?f.value():f;return U||(U=new Ls),L(It,pt,_,C,U)}}return qe?(U||(U=new Ls),ZX(c,f,_,C,L,U)):!1}function xX(c){return Nr(c)&&qn(c)==X}function I_(c,f,_,C){var L=_.length,U=L,Y=!C;if(c==null)return!U;for(c=cr(c);L--;){var ee=_[L];if(Y&&ee[2]?ee[1]!==c[ee[0]]:!(ee[0]in c))return!1}for(;++L<U;){ee=_[L];var ae=ee[0],xe=c[ae],Se=ee[1];if(Y&&ee[2]){if(xe===t&&!(ae in c))return!1}else{var Ie=new Ls;if(C)var qe=C(xe,Se,ae,c,f,Ie);if(!(qe===t?Of(Se,xe,b|m,C,Ie):qe))return!1}}return!0}function PC(c){if(!Cr(c)||sJ(c))return!1;var f=Zo(c)?xZ:Zw;return f.test($u(c))}function EX(c){return Nr(c)&&ri(c)==Ze}function SX(c){return Nr(c)&&qn(c)==Ve}function kX(c){return Nr(c)&&Ay(c.length)&&!!_r[ri(c)]}function NC(c){return typeof c=="function"?c:c==null?wi:typeof c=="object"?Et(c)?BC(c[0],c[1]):DC(c):t4(c)}function O_(c){if(!Pf(c))return OZ(c);var f=[];for(var _ in cr(c))nr.call(c,_)&&_!="constructor"&&f.push(_);return f}function TX(c){if(!Cr(c))return uJ(c);var f=Pf(c),_=[];for(var C in c)C=="constructor"&&(f||!nr.call(c,C))||_.push(C);return _}function A_(c,f){return c<f}function RC(c,f){var _=-1,C=mi(c)?de(c.length):[];return Ya(c,function(L,U,Y){C[++_]=f(L,U,Y)}),C}function DC(c){var f=W_(c);return f.length==1&&f[0][2]?vP(f[0][0],f[0][1]):function(_){return _===c||I_(_,c,f)}}function BC(c,f){return q_(c)&&pP(f)?vP(mo(c),f):function(_){var C=n$(_,c);return C===t&&C===f?i$(_,c):Of(f,C,b|m)}}function py(c,f,_,C,L){c!==f&&E_(f,function(U,Y){if(L||(L=new Ls),Cr(U))IX(c,f,Y,_,py,C,L);else{var ee=C?C(Y_(c,Y),U,Y+"",c,f,L):t;ee===t&&(ee=U),$_(c,Y,ee)}},bi)}function IX(c,f,_,C,L,U,Y){var ee=Y_(c,_),ae=Y_(f,_),xe=Y.get(ae);if(xe){$_(c,_,xe);return}var Se=U?U(ee,ae,_+"",c,f,Y):t,Ie=Se===t;if(Ie){var qe=Et(ae),it=!qe&&Qa(ae),ft=!qe&&!it&&ah(ae);Se=ae,qe||it||ft?Et(ee)?Se=ee:jr(ee)?Se=yi(ee):it?(Ie=!1,Se=GC(ae,!0)):ft?(Ie=!1,Se=YC(ae,!0)):Se=[]:Rf(ae)||xu(ae)?(Se=ee,xu(ee)?Se=WP(ee):(!Cr(ee)||Zo(ee))&&(Se=fP(ae))):Ie=!1}Ie&&(Y.set(ae,Se),L(Se,ae,C,U,Y),Y.delete(ae)),$_(c,_,Se)}function MC(c,f){var _=c.length;if(_)return f+=f<0?_:0,Yo(f,_)?c[f]:t}function LC(c,f,_){f.length?f=Er(f,function(U){return Et(U)?function(Y){return wu(Y,U.length===1?U[0]:U)}:U}):f=[wi];var C=-1;f=Er(f,Li(ct()));var L=RC(c,function(U,Y,ee){var ae=Er(f,function(xe){return xe(U)});return{criteria:ae,index:++C,value:U}});return tZ(L,function(U,Y){return zX(U,Y,_)})}function OX(c,f){return FC(c,f,function(_,C){return i$(c,C)})}function FC(c,f,_){for(var C=-1,L=f.length,U={};++C<L;){var Y=f[C],ee=wu(c,Y);_(ee,Y)&&Af(U,Xa(Y,c),ee)}return U}function AX(c){return function(f){return wu(f,c)}}function C_(c,f,_,C){var L=C?eZ:Zc,U=-1,Y=f.length,ee=c;for(c===f&&(f=yi(f)),_&&(ee=Er(c,Li(_)));++U<Y;)for(var ae=0,xe=f[U],Se=_?_(xe):xe;(ae=L(ee,Se,ae,C))>-1;)ee!==c&&iy.call(ee,ae,1),iy.call(c,ae,1);return c}function jC(c,f){for(var _=c?f.length:0,C=_-1;_--;){var L=f[_];if(_==C||L!==U){var U=L;Yo(L)?iy.call(c,L,1):D_(c,L)}}return c}function P_(c,f){return c+ay(wC()*(f-c+1))}function CX(c,f,_,C){for(var L=-1,U=hn(oy((f-c)/(_||1)),0),Y=de(U);U--;)Y[C?U:++L]=c,c+=_;return Y}function N_(c,f){var _="";if(!c||f<1||f>he)return _;do f%2&&(_+=c),f=ay(f/2),f&&(c+=c);while(f);return _}function Nt(c,f){return Z_(gP(c,f,wi),c+"")}function PX(c){return xC(lh(c))}function NX(c,f){var _=lh(c);return Ey(_,bu(f,0,_.length))}function Af(c,f,_,C){if(!Cr(c))return c;f=Xa(f,c);for(var L=-1,U=f.length,Y=U-1,ee=c;ee!=null&&++L<U;){var ae=mo(f[L]),xe=_;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return c;if(L!=Y){var Se=ee[ae];xe=C?C(Se,ae,ee):t,xe===t&&(xe=Cr(Se)?Se:Yo(f[L+1])?[]:{})}kf(ee,ae,xe),ee=ee[ae]}return c}var zC=ly?function(c,f){return ly.set(c,f),c}:wi,RX=sy?function(c,f){return sy(c,"toString",{configurable:!0,enumerable:!1,value:o$(f),writable:!0})}:wi;function DX(c){return Ey(lh(c))}function ds(c,f,_){var C=-1,L=c.length;f<0&&(f=-f>L?0:L+f),_=_>L?L:_,_<0&&(_+=L),L=f>_?0:_-f>>>0,f>>>=0;for(var U=de(L);++C<L;)U[C]=c[C+f];return U}function BX(c,f){var _;return Ya(c,function(C,L,U){return _=f(C,L,U),!_}),!!_}function vy(c,f,_){var C=0,L=c==null?C:c.length;if(typeof f=="number"&&f===f&&L<=Ye){for(;C<L;){var U=C+L>>>1,Y=c[U];Y!==null&&!ji(Y)&&(_?Y<=f:Y<f)?C=U+1:L=U}return L}return R_(c,f,wi,_)}function R_(c,f,_,C){var L=0,U=c==null?0:c.length;if(U===0)return 0;f=_(f);for(var Y=f!==f,ee=f===null,ae=ji(f),xe=f===t;L<U;){var Se=ay((L+U)/2),Ie=_(c[Se]),qe=Ie!==t,it=Ie===null,ft=Ie===Ie,It=ji(Ie);if(Y)var pt=C||ft;else xe?pt=ft&&(C||qe):ee?pt=ft&&qe&&(C||!it):ae?pt=ft&&qe&&!it&&(C||!It):it||It?pt=!1:pt=C?Ie<=f:Ie<f;pt?L=Se+1:U=Se}return Vn(U,Ce)}function HC(c,f){for(var _=-1,C=c.length,L=0,U=[];++_<C;){var Y=c[_],ee=f?f(Y):Y;if(!_||!Fs(ee,ae)){var ae=ee;U[L++]=Y===0?0:Y}}return U}function UC(c){return typeof c=="number"?c:ji(c)?ke:+c}function Fi(c){if(typeof c=="string")return c;if(Et(c))return Er(c,Fi)+"";if(ji(c))return _C?_C.call(c):"";var f=c+"";return f=="0"&&1/c==-Q?"-0":f}function Za(c,f,_){var C=-1,L=Gg,U=c.length,Y=!0,ee=[],ae=ee;if(_)Y=!1,L=u_;else if(U>=i){var xe=f?null:qX(c);if(xe)return Zg(xe);Y=!1,L=wf,ae=new mu}else ae=f?[]:ee;e:for(;++C<U;){var Se=c[C],Ie=f?f(Se):Se;if(Se=_||Se!==0?Se:0,Y&&Ie===Ie){for(var qe=ae.length;qe--;)if(ae[qe]===Ie)continue e;f&&ae.push(Ie),ee.push(Se)}else L(ae,Ie,_)||(ae!==ee&&ae.push(Ie),ee.push(Se))}return ee}function D_(c,f){return f=Xa(f,c),c=yP(c,f),c==null||delete c[mo(fs(f))]}function KC(c,f,_,C){return Af(c,f,_(wu(c,f)),C)}function gy(c,f,_,C){for(var L=c.length,U=C?L:-1;(C?U--:++U<L)&&f(c[U],U,c););return _?ds(c,C?0:U,C?U+1:L):ds(c,C?U+1:0,C?L:U)}function WC(c,f){var _=c;return _ instanceof Lt&&(_=_.value()),c_(f,function(C,L){return L.func.apply(L.thisArg,Va([C],L.args))},_)}function B_(c,f,_){var C=c.length;if(C<2)return C?Za(c[0]):[];for(var L=-1,U=de(C);++L<C;)for(var Y=c[L],ee=-1;++ee<C;)ee!=L&&(U[L]=Tf(U[L]||Y,c[ee],f,_));return Za(Mn(U,1),f,_)}function VC(c,f,_){for(var C=-1,L=c.length,U=f.length,Y={};++C<L;){var ee=C<U?f[C]:t;_(Y,c[C],ee)}return Y}function M_(c){return jr(c)?c:[]}function L_(c){return typeof c=="function"?c:wi}function Xa(c,f){return Et(c)?c:q_(c,f)?[c]:_P(er(c))}var MX=Nt;function Ja(c,f,_){var C=c.length;return _=_===t?C:_,!f&&_>=C?c:ds(c,f,_)}var qC=EZ||function(c){return Bn.clearTimeout(c)};function GC(c,f){if(f)return c.slice();var _=c.length,C=vC?vC(_):new c.constructor(_);return c.copy(C),C}function F_(c){var f=new c.constructor(c.byteLength);return new ry(f).set(new ry(c)),f}function LX(c,f){var _=f?F_(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.byteLength)}function FX(c){var f=new c.constructor(c.source,zg.exec(c));return f.lastIndex=c.lastIndex,f}function jX(c){return Sf?cr(Sf.call(c)):{}}function YC(c,f){var _=f?F_(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.length)}function ZC(c,f){if(c!==f){var _=c!==t,C=c===null,L=c===c,U=ji(c),Y=f!==t,ee=f===null,ae=f===f,xe=ji(f);if(!ee&&!xe&&!U&&c>f||U&&Y&&ae&&!ee&&!xe||C&&Y&&ae||!_&&ae||!L)return 1;if(!C&&!U&&!xe&&c<f||xe&&_&&L&&!C&&!U||ee&&_&&L||!Y&&L||!ae)return-1}return 0}function zX(c,f,_){for(var C=-1,L=c.criteria,U=f.criteria,Y=L.length,ee=_.length;++C<Y;){var ae=ZC(L[C],U[C]);if(ae){if(C>=ee)return ae;var xe=_[C];return ae*(xe=="desc"?-1:1)}}return c.index-f.index}function XC(c,f,_,C){for(var L=-1,U=c.length,Y=_.length,ee=-1,ae=f.length,xe=hn(U-Y,0),Se=de(ae+xe),Ie=!C;++ee<ae;)Se[ee]=f[ee];for(;++L<Y;)(Ie||L<U)&&(Se[_[L]]=c[L]);for(;xe--;)Se[ee++]=c[L++];return Se}function JC(c,f,_,C){for(var L=-1,U=c.length,Y=-1,ee=_.length,ae=-1,xe=f.length,Se=hn(U-ee,0),Ie=de(Se+xe),qe=!C;++L<Se;)Ie[L]=c[L];for(var it=L;++ae<xe;)Ie[it+ae]=f[ae];for(;++Y<ee;)(qe||L<U)&&(Ie[it+_[Y]]=c[L++]);return Ie}function yi(c,f){var _=-1,C=c.length;for(f||(f=de(C));++_<C;)f[_]=c[_];return f}function yo(c,f,_,C){var L=!_;_||(_={});for(var U=-1,Y=f.length;++U<Y;){var ee=f[U],ae=C?C(_[ee],c[ee],ee,_,c):t;ae===t&&(ae=c[ee]),L?Vo(_,ee,ae):kf(_,ee,ae)}return _}function HX(c,f){return yo(c,V_(c),f)}function UX(c,f){return yo(c,hP(c),f)}function yy(c,f){return function(_,C){var L=Et(_)?GY:hX,U=f?f():{};return L(_,c,ct(C,2),U)}}function ih(c){return Nt(function(f,_){var C=-1,L=_.length,U=L>1?_[L-1]:t,Y=L>2?_[2]:t;for(U=c.length>3&&typeof U=="function"?(L--,U):t,Y&&ni(_[0],_[1],Y)&&(U=L<3?t:U,L=1),f=cr(f);++C<L;){var ee=_[C];ee&&c(f,ee,C,U)}return f})}function QC(c,f){return function(_,C){if(_==null)return _;if(!mi(_))return c(_,C);for(var L=_.length,U=f?L:-1,Y=cr(_);(f?U--:++U<L)&&C(Y[U],U,Y)!==!1;);return _}}function eP(c){return function(f,_,C){for(var L=-1,U=cr(f),Y=C(f),ee=Y.length;ee--;){var ae=Y[c?ee:++L];if(_(U[ae],ae,U)===!1)break}return f}}function KX(c,f,_){var C=f&x,L=Cf(c);function U(){var Y=this&&this!==Bn&&this instanceof U?L:c;return Y.apply(C?_:this,arguments)}return U}function tP(c){return function(f){f=er(f);var _=Xc(f)?Ms(f):t,C=_?_[0]:f.charAt(0),L=_?Ja(_,1).join(""):f.slice(1);return C[c]()+L}}function sh(c){return function(f){return c_(QP(JP(f).replace(RY,"")),c,"")}}function Cf(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=nh(c.prototype),C=c.apply(_,f);return Cr(C)?C:_}}function WX(c,f,_){var C=Cf(c);function L(){for(var U=arguments.length,Y=de(U),ee=U,ae=oh(L);ee--;)Y[ee]=arguments[ee];var xe=U<3&&Y[0]!==ae&&Y[U-1]!==ae?[]:qa(Y,ae);if(U-=xe.length,U<_)return oP(c,f,my,L.placeholder,t,Y,xe,t,t,_-U);var Se=this&&this!==Bn&&this instanceof L?C:c;return Mi(Se,this,Y)}return L}function rP(c){return function(f,_,C){var L=cr(f);if(!mi(f)){var U=ct(_,3);f=wn(f),_=function(ee){return U(L[ee],ee,L)}}var Y=c(f,_,C);return Y>-1?L[U?f[Y]:Y]:t}}function nP(c){return Go(function(f){var _=f.length,C=_,L=cs.prototype.thru;for(c&&f.reverse();C--;){var U=f[C];if(typeof U!="function")throw new us(o);if(L&&!Y&&$y(U)=="wrapper")var Y=new cs([],!0)}for(C=Y?C:_;++C<_;){U=f[C];var ee=$y(U),ae=ee=="wrapper"?K_(U):t;ae&&G_(ae[0])&&ae[1]==(I|$|T|P)&&!ae[4].length&&ae[9]==1?Y=Y[$y(ae[0])].apply(Y,ae[3]):Y=U.length==1&&G_(U)?Y[ee]():Y.thru(U)}return function(){var xe=arguments,Se=xe[0];if(Y&&xe.length==1&&Et(Se))return Y.plant(Se).value();for(var Ie=0,qe=_?f[Ie].apply(this,xe):Se;++Ie<_;)qe=f[Ie].call(this,qe);return qe}})}function my(c,f,_,C,L,U,Y,ee,ae,xe){var Se=f&I,Ie=f&x,qe=f&E,it=f&($|S),ft=f&R,It=qe?t:Cf(c);function pt(){for(var Bt=arguments.length,jt=de(Bt),zi=Bt;zi--;)jt[zi]=arguments[zi];if(it)var ii=oh(pt),Hi=nZ(jt,ii);if(C&&(jt=XC(jt,C,L,it)),U&&(jt=JC(jt,U,Y,it)),Bt-=Hi,it&&Bt<xe){var zr=qa(jt,ii);return oP(c,f,my,pt.placeholder,_,jt,zr,ee,ae,xe-Bt)}var js=Ie?_:this,Jo=qe?js[c]:c;return Bt=jt.length,ee?jt=hJ(jt,ee):ft&&Bt>1&&jt.reverse(),Se&&ae<Bt&&(jt.length=ae),this&&this!==Bn&&this instanceof pt&&(Jo=It||Cf(Jo)),Jo.apply(js,jt)}return pt}function iP(c,f){return function(_,C){return bX(_,c,f(C),{})}}function by(c,f){return function(_,C){var L;if(_===t&&C===t)return f;if(_!==t&&(L=_),C!==t){if(L===t)return C;typeof _=="string"||typeof C=="string"?(_=Fi(_),C=Fi(C)):(_=UC(_),C=UC(C)),L=c(_,C)}return L}}function j_(c){return Go(function(f){return f=Er(f,Li(ct())),Nt(function(_){var C=this;return c(f,function(L){return Mi(L,C,_)})})})}function wy(c,f){f=f===t?" ":Fi(f);var _=f.length;if(_<2)return _?N_(f,c):f;var C=N_(f,oy(c/Jc(f)));return Xc(f)?Ja(Ms(C),0,c).join(""):C.slice(0,c)}function VX(c,f,_,C){var L=f&x,U=Cf(c);function Y(){for(var ee=-1,ae=arguments.length,xe=-1,Se=C.length,Ie=de(Se+ae),qe=this&&this!==Bn&&this instanceof Y?U:c;++xe<Se;)Ie[xe]=C[xe];for(;ae--;)Ie[xe++]=arguments[++ee];return Mi(qe,L?_:this,Ie)}return Y}function sP(c){return function(f,_,C){return C&&typeof C!="number"&&ni(f,_,C)&&(_=C=t),f=Xo(f),_===t?(_=f,f=0):_=Xo(_),C=C===t?f<_?1:-1:Xo(C),CX(f,_,C,c)}}function _y(c){return function(f,_){return typeof f=="string"&&typeof _=="string"||(f=ps(f),_=ps(_)),c(f,_)}}function oP(c,f,_,C,L,U,Y,ee,ae,xe){var Se=f&$,Ie=Se?Y:t,qe=Se?t:Y,it=Se?U:t,ft=Se?t:U;f|=Se?T:O,f&=~(Se?O:T),f&k||(f&=~(x|E));var It=[c,f,L,it,Ie,ft,qe,ee,ae,xe],pt=_.apply(t,It);return G_(c)&&mP(pt,It),pt.placeholder=C,bP(pt,c,f)}function z_(c){var f=cn[c];return function(_,C){if(_=ps(_),C=C==null?0:Vn(kt(C),292),C&&bC(_)){var L=(er(_)+"e").split("e"),U=f(L[0]+"e"+(+L[1]+C));return L=(er(U)+"e").split("e"),+(L[0]+"e"+(+L[1]-C))}return f(_)}}var qX=th&&1/Zg(new th([,-0]))[1]==Q?function(c){return new th(c)}:u$;function aP(c){return function(f){var _=qn(f);return _==X?y_(f):_==Ve?cZ(f):rZ(f,c(f))}}function qo(c,f,_,C,L,U,Y,ee){var ae=f&E;if(!ae&&typeof c!="function")throw new us(o);var xe=C?C.length:0;if(xe||(f&=~(T|O),C=L=t),Y=Y===t?Y:hn(kt(Y),0),ee=ee===t?ee:kt(ee),xe-=L?L.length:0,f&O){var Se=C,Ie=L;C=L=t}var qe=ae?t:K_(c),it=[c,f,_,C,L,Se,Ie,U,Y,ee];if(qe&&lJ(it,qe),c=it[0],f=it[1],_=it[2],C=it[3],L=it[4],ee=it[9]=it[9]===t?ae?0:c.length:hn(it[9]-xe,0),!ee&&f&($|S)&&(f&=~($|S)),!f||f==x)var ft=KX(c,f,_);else f==$||f==S?ft=WX(c,f,ee):(f==T||f==(x|T))&&!L.length?ft=VX(c,f,_,C):ft=my.apply(t,it);var It=qe?zC:mP;return bP(It(ft,it),c,f)}function lP(c,f,_,C){return c===t||Fs(c,eh[_])&&!nr.call(C,_)?f:c}function uP(c,f,_,C,L,U){return Cr(c)&&Cr(f)&&(U.set(f,c),py(c,f,t,uP,U),U.delete(f)),c}function GX(c){return Rf(c)?t:c}function cP(c,f,_,C,L,U){var Y=_&b,ee=c.length,ae=f.length;if(ee!=ae&&!(Y&&ae>ee))return!1;var xe=U.get(c),Se=U.get(f);if(xe&&Se)return xe==f&&Se==c;var Ie=-1,qe=!0,it=_&m?new mu:t;for(U.set(c,f),U.set(f,c);++Ie<ee;){var ft=c[Ie],It=f[Ie];if(C)var pt=Y?C(It,ft,Ie,f,c,U):C(ft,It,Ie,c,f,U);if(pt!==t){if(pt)continue;qe=!1;break}if(it){if(!h_(f,function(Bt,jt){if(!wf(it,jt)&&(ft===Bt||L(ft,Bt,_,C,U)))return it.push(jt)})){qe=!1;break}}else if(!(ft===It||L(ft,It,_,C,U))){qe=!1;break}}return U.delete(c),U.delete(f),qe}function YX(c,f,_,C,L,U,Y){switch(_){case gi:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case Xr:return!(c.byteLength!=f.byteLength||!U(new ry(c),new ry(f)));case y:case w:case re:return Fs(+c,+f);case N:return c.name==f.name&&c.message==f.message;case Ze:case $t:return c==f+"";case X:var ee=y_;case Ve:var ae=C&b;if(ee||(ee=Zg),c.size!=f.size&&!ae)return!1;var xe=Y.get(c);if(xe)return xe==f;C|=m,Y.set(c,f);var Se=cP(ee(c),ee(f),C,L,U,Y);return Y.delete(c),Se;case Kt:if(Sf)return Sf.call(c)==Sf.call(f)}return!1}function ZX(c,f,_,C,L,U){var Y=_&b,ee=H_(c),ae=ee.length,xe=H_(f),Se=xe.length;if(ae!=Se&&!Y)return!1;for(var Ie=ae;Ie--;){var qe=ee[Ie];if(!(Y?qe in f:nr.call(f,qe)))return!1}var it=U.get(c),ft=U.get(f);if(it&&ft)return it==f&&ft==c;var It=!0;U.set(c,f),U.set(f,c);for(var pt=Y;++Ie<ae;){qe=ee[Ie];var Bt=c[qe],jt=f[qe];if(C)var zi=Y?C(jt,Bt,qe,f,c,U):C(Bt,jt,qe,c,f,U);if(!(zi===t?Bt===jt||L(Bt,jt,_,C,U):zi)){It=!1;break}pt||(pt=qe=="constructor")}if(It&&!pt){var ii=c.constructor,Hi=f.constructor;ii!=Hi&&"constructor"in c&&"constructor"in f&&!(typeof ii=="function"&&ii instanceof ii&&typeof Hi=="function"&&Hi instanceof Hi)&&(It=!1)}return U.delete(c),U.delete(f),It}function Go(c){return Z_(gP(c,t,SP),c+"")}function H_(c){return AC(c,wn,V_)}function U_(c){return AC(c,bi,hP)}var K_=ly?function(c){return ly.get(c)}:u$;function $y(c){for(var f=c.name+"",_=rh[f],C=nr.call(rh,f)?_.length:0;C--;){var L=_[C],U=L.func;if(U==null||U==c)return L.name}return f}function oh(c){var f=nr.call(z,"placeholder")?z:c;return f.placeholder}function ct(){var c=z.iteratee||a$;return c=c===a$?NC:c,arguments.length?c(arguments[0],arguments[1]):c}function xy(c,f){var _=c.__data__;return iJ(f)?_[typeof f=="string"?"string":"hash"]:_.map}function W_(c){for(var f=wn(c),_=f.length;_--;){var C=f[_],L=c[C];f[_]=[C,L,pP(L)]}return f}function _u(c,f){var _=aZ(c,f);return PC(_)?_:t}function XX(c){var f=nr.call(c,gu),_=c[gu];try{c[gu]=t;var C=!0}catch{}var L=ey.call(c);return C&&(f?c[gu]=_:delete c[gu]),L}var V_=b_?function(c){return c==null?[]:(c=cr(c),Wa(b_(c),function(f){return yC.call(c,f)}))}:c$,hP=b_?function(c){for(var f=[];c;)Va(f,V_(c)),c=ny(c);return f}:c$,qn=ri;(w_&&qn(new w_(new ArrayBuffer(1)))!=gi||$f&&qn(new $f)!=X||__&&qn(__.resolve())!=We||th&&qn(new th)!=Ve||xf&&qn(new xf)!=vr)&&(qn=function(c){var f=ri(c),_=f==_e?c.constructor:t,C=_?$u(_):"";if(C)switch(C){case NZ:return gi;case RZ:return X;case DZ:return We;case BZ:return Ve;case MZ:return vr}return f});function JX(c,f,_){for(var C=-1,L=_.length;++C<L;){var U=_[C],Y=U.size;switch(U.type){case"drop":c+=Y;break;case"dropRight":f-=Y;break;case"take":f=Vn(f,c+Y);break;case"takeRight":c=hn(c,f-Y);break}}return{start:c,end:f}}function QX(c){var f=c.match(Hw);return f?f[1].split(Uw):[]}function dP(c,f,_){f=Xa(f,c);for(var C=-1,L=f.length,U=!1;++C<L;){var Y=mo(f[C]);if(!(U=c!=null&&_(c,Y)))break;c=c[Y]}return U||++C!=L?U:(L=c==null?0:c.length,!!L&&Ay(L)&&Yo(Y,L)&&(Et(c)||xu(c)))}function eJ(c){var f=c.length,_=new c.constructor(f);return f&&typeof c[0]=="string"&&nr.call(c,"index")&&(_.index=c.index,_.input=c.input),_}function fP(c){return typeof c.constructor=="function"&&!Pf(c)?nh(ny(c)):{}}function tJ(c,f,_){var C=c.constructor;switch(f){case Xr:return F_(c);case y:case w:return new C(+c);case gi:return LX(c,_);case Bi:case un:case Bs:case Wc:case Vc:case du:case pf:case vf:case fu:return YC(c,_);case X:return new C;case re:case $t:return new C(c);case Ze:return FX(c);case Ve:return new C;case Kt:return jX(c)}}function rJ(c,f){var _=f.length;if(!_)return c;var C=_-1;return f[C]=(_>1?"& ":"")+f[C],f=f.join(_>2?", ":" "),c.replace(zw,`{
/* [wrapped with `+f+`] */
`)}function nJ(c){return Et(c)||xu(c)||!!(mC&&c&&c[mC])}function Yo(c,f){var _=typeof c;return f=f??he,!!f&&(_=="number"||_!="symbol"&&Jw.test(c))&&c>-1&&c%1==0&&c<f}function ni(c,f,_){if(!Cr(_))return!1;var C=typeof f;return(C=="number"?mi(_)&&Yo(f,_.length):C=="string"&&f in _)?Fs(_[f],c):!1}function q_(c,f){if(Et(c))return!1;var _=typeof c;return _=="number"||_=="symbol"||_=="boolean"||c==null||ji(c)?!0:Lw.test(c)||!Mw.test(c)||f!=null&&c in cr(f)}function iJ(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function G_(c){var f=$y(c),_=z[f];if(typeof _!="function"||!(f in Lt.prototype))return!1;if(c===_)return!0;var C=K_(_);return!!C&&c===C[0]}function sJ(c){return!!pC&&pC in c}var oJ=Jg?Zo:h$;function Pf(c){var f=c&&c.constructor,_=typeof f=="function"&&f.prototype||eh;return c===_}function pP(c){return c===c&&!Cr(c)}function vP(c,f){return function(_){return _==null?!1:_[c]===f&&(f!==t||c in cr(_))}}function aJ(c){var f=Iy(c,function(C){return _.size===u&&_.clear(),C}),_=f.cache;return f}function lJ(c,f){var _=c[1],C=f[1],L=_|C,U=L<(x|E|I),Y=C==I&&_==$||C==I&&_==P&&c[7].length<=f[8]||C==(I|P)&&f[7].length<=f[8]&&_==$;if(!(U||Y))return c;C&x&&(c[2]=f[2],L|=_&x?0:k);var ee=f[3];if(ee){var ae=c[3];c[3]=ae?XC(ae,ee,f[4]):ee,c[4]=ae?qa(c[3],d):f[4]}return ee=f[5],ee&&(ae=c[5],c[5]=ae?JC(ae,ee,f[6]):ee,c[6]=ae?qa(c[5],d):f[6]),ee=f[7],ee&&(c[7]=ee),C&I&&(c[8]=c[8]==null?f[8]:Vn(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=L,c}function uJ(c){var f=[];if(c!=null)for(var _ in cr(c))f.push(_);return f}function cJ(c){return ey.call(c)}function gP(c,f,_){return f=hn(f===t?c.length-1:f,0),function(){for(var C=arguments,L=-1,U=hn(C.length-f,0),Y=de(U);++L<U;)Y[L]=C[f+L];L=-1;for(var ee=de(f+1);++L<f;)ee[L]=C[L];return ee[f]=_(Y),Mi(c,this,ee)}}function yP(c,f){return f.length<2?c:wu(c,ds(f,0,-1))}function hJ(c,f){for(var _=c.length,C=Vn(f.length,_),L=yi(c);C--;){var U=f[C];c[C]=Yo(U,_)?L[U]:t}return c}function Y_(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var mP=wP(zC),Nf=kZ||function(c,f){return Bn.setTimeout(c,f)},Z_=wP(RX);function bP(c,f,_){var C=f+"";return Z_(c,rJ(C,dJ(QX(C),_)))}function wP(c){var f=0,_=0;return function(){var C=AZ(),L=q-(C-_);if(_=C,L>0){if(++f>=K)return arguments[0]}else f=0;return c.apply(t,arguments)}}function Ey(c,f){var _=-1,C=c.length,L=C-1;for(f=f===t?C:f;++_<f;){var U=P_(_,L),Y=c[U];c[U]=c[_],c[_]=Y}return c.length=f,c}var _P=aJ(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(Fw,function(_,C,L,U){f.push(L?U.replace(Vw,"$1"):C||_)}),f});function mo(c){if(typeof c=="string"||ji(c))return c;var f=c+"";return f=="0"&&1/c==-Q?"-0":f}function $u(c){if(c!=null){try{return Qg.call(c)}catch{}try{return c+""}catch{}}return""}function dJ(c,f){return ls(ge,function(_){var C="_."+_[0];f&_[1]&&!Gg(c,C)&&c.push(C)}),c.sort()}function $P(c){if(c instanceof Lt)return c.clone();var f=new cs(c.__wrapped__,c.__chain__);return f.__actions__=yi(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function fJ(c,f,_){(_?ni(c,f,_):f===t)?f=1:f=hn(kt(f),0);var C=c==null?0:c.length;if(!C||f<1)return[];for(var L=0,U=0,Y=de(oy(C/f));L<C;)Y[U++]=ds(c,L,L+=f);return Y}function pJ(c){for(var f=-1,_=c==null?0:c.length,C=0,L=[];++f<_;){var U=c[f];U&&(L[C++]=U)}return L}function vJ(){var c=arguments.length;if(!c)return[];for(var f=de(c-1),_=arguments[0],C=c;C--;)f[C-1]=arguments[C];return Va(Et(_)?yi(_):[_],Mn(f,1))}var gJ=Nt(function(c,f){return jr(c)?Tf(c,Mn(f,1,jr,!0)):[]}),yJ=Nt(function(c,f){var _=fs(f);return jr(_)&&(_=t),jr(c)?Tf(c,Mn(f,1,jr,!0),ct(_,2)):[]}),mJ=Nt(function(c,f){var _=fs(f);return jr(_)&&(_=t),jr(c)?Tf(c,Mn(f,1,jr,!0),t,_):[]});function bJ(c,f,_){var C=c==null?0:c.length;return C?(f=_||f===t?1:kt(f),ds(c,f<0?0:f,C)):[]}function wJ(c,f,_){var C=c==null?0:c.length;return C?(f=_||f===t?1:kt(f),f=C-f,ds(c,0,f<0?0:f)):[]}function _J(c,f){return c&&c.length?gy(c,ct(f,3),!0,!0):[]}function $J(c,f){return c&&c.length?gy(c,ct(f,3),!0):[]}function xJ(c,f,_,C){var L=c==null?0:c.length;return L?(_&&typeof _!="number"&&ni(c,f,_)&&(_=0,C=L),vX(c,f,_,C)):[]}function xP(c,f,_){var C=c==null?0:c.length;if(!C)return-1;var L=_==null?0:kt(_);return L<0&&(L=hn(C+L,0)),Yg(c,ct(f,3),L)}function EP(c,f,_){var C=c==null?0:c.length;if(!C)return-1;var L=C-1;return _!==t&&(L=kt(_),L=_<0?hn(C+L,0):Vn(L,C-1)),Yg(c,ct(f,3),L,!0)}function SP(c){var f=c==null?0:c.length;return f?Mn(c,1):[]}function EJ(c){var f=c==null?0:c.length;return f?Mn(c,Q):[]}function SJ(c,f){var _=c==null?0:c.length;return _?(f=f===t?1:kt(f),Mn(c,f)):[]}function kJ(c){for(var f=-1,_=c==null?0:c.length,C={};++f<_;){var L=c[f];C[L[0]]=L[1]}return C}function kP(c){return c&&c.length?c[0]:t}function TJ(c,f,_){var C=c==null?0:c.length;if(!C)return-1;var L=_==null?0:kt(_);return L<0&&(L=hn(C+L,0)),Zc(c,f,L)}function IJ(c){var f=c==null?0:c.length;return f?ds(c,0,-1):[]}var OJ=Nt(function(c){var f=Er(c,M_);return f.length&&f[0]===c[0]?T_(f):[]}),AJ=Nt(function(c){var f=fs(c),_=Er(c,M_);return f===fs(_)?f=t:_.pop(),_.length&&_[0]===c[0]?T_(_,ct(f,2)):[]}),CJ=Nt(function(c){var f=fs(c),_=Er(c,M_);return f=typeof f=="function"?f:t,f&&_.pop(),_.length&&_[0]===c[0]?T_(_,t,f):[]});function PJ(c,f){return c==null?"":IZ.call(c,f)}function fs(c){var f=c==null?0:c.length;return f?c[f-1]:t}function NJ(c,f,_){var C=c==null?0:c.length;if(!C)return-1;var L=C;return _!==t&&(L=kt(_),L=L<0?hn(C+L,0):Vn(L,C-1)),f===f?dZ(c,f,L):Yg(c,oC,L,!0)}function RJ(c,f){return c&&c.length?MC(c,kt(f)):t}var DJ=Nt(TP);function TP(c,f){return c&&c.length&&f&&f.length?C_(c,f):c}function BJ(c,f,_){return c&&c.length&&f&&f.length?C_(c,f,ct(_,2)):c}function MJ(c,f,_){return c&&c.length&&f&&f.length?C_(c,f,t,_):c}var LJ=Go(function(c,f){var _=c==null?0:c.length,C=x_(c,f);return jC(c,Er(f,function(L){return Yo(L,_)?+L:L}).sort(ZC)),C});function FJ(c,f){var _=[];if(!(c&&c.length))return _;var C=-1,L=[],U=c.length;for(f=ct(f,3);++C<U;){var Y=c[C];f(Y,C,c)&&(_.push(Y),L.push(C))}return jC(c,L),_}function X_(c){return c==null?c:PZ.call(c)}function jJ(c,f,_){var C=c==null?0:c.length;return C?(_&&typeof _!="number"&&ni(c,f,_)?(f=0,_=C):(f=f==null?0:kt(f),_=_===t?C:kt(_)),ds(c,f,_)):[]}function zJ(c,f){return vy(c,f)}function HJ(c,f,_){return R_(c,f,ct(_,2))}function UJ(c,f){var _=c==null?0:c.length;if(_){var C=vy(c,f);if(C<_&&Fs(c[C],f))return C}return-1}function KJ(c,f){return vy(c,f,!0)}function WJ(c,f,_){return R_(c,f,ct(_,2),!0)}function VJ(c,f){var _=c==null?0:c.length;if(_){var C=vy(c,f,!0)-1;if(Fs(c[C],f))return C}return-1}function qJ(c){return c&&c.length?HC(c):[]}function GJ(c,f){return c&&c.length?HC(c,ct(f,2)):[]}function YJ(c){var f=c==null?0:c.length;return f?ds(c,1,f):[]}function ZJ(c,f,_){return c&&c.length?(f=_||f===t?1:kt(f),ds(c,0,f<0?0:f)):[]}function XJ(c,f,_){var C=c==null?0:c.length;return C?(f=_||f===t?1:kt(f),f=C-f,ds(c,f<0?0:f,C)):[]}function JJ(c,f){return c&&c.length?gy(c,ct(f,3),!1,!0):[]}function QJ(c,f){return c&&c.length?gy(c,ct(f,3)):[]}var eQ=Nt(function(c){return Za(Mn(c,1,jr,!0))}),tQ=Nt(function(c){var f=fs(c);return jr(f)&&(f=t),Za(Mn(c,1,jr,!0),ct(f,2))}),rQ=Nt(function(c){var f=fs(c);return f=typeof f=="function"?f:t,Za(Mn(c,1,jr,!0),t,f)});function nQ(c){return c&&c.length?Za(c):[]}function iQ(c,f){return c&&c.length?Za(c,ct(f,2)):[]}function sQ(c,f){return f=typeof f=="function"?f:t,c&&c.length?Za(c,t,f):[]}function J_(c){if(!(c&&c.length))return[];var f=0;return c=Wa(c,function(_){if(jr(_))return f=hn(_.length,f),!0}),v_(f,function(_){return Er(c,d_(_))})}function IP(c,f){if(!(c&&c.length))return[];var _=J_(c);return f==null?_:Er(_,function(C){return Mi(f,t,C)})}var oQ=Nt(function(c,f){return jr(c)?Tf(c,f):[]}),aQ=Nt(function(c){return B_(Wa(c,jr))}),lQ=Nt(function(c){var f=fs(c);return jr(f)&&(f=t),B_(Wa(c,jr),ct(f,2))}),uQ=Nt(function(c){var f=fs(c);return f=typeof f=="function"?f:t,B_(Wa(c,jr),t,f)}),cQ=Nt(J_);function hQ(c,f){return VC(c||[],f||[],kf)}function dQ(c,f){return VC(c||[],f||[],Af)}var fQ=Nt(function(c){var f=c.length,_=f>1?c[f-1]:t;return _=typeof _=="function"?(c.pop(),_):t,IP(c,_)});function OP(c){var f=z(c);return f.__chain__=!0,f}function pQ(c,f){return f(c),c}function Sy(c,f){return f(c)}var vQ=Go(function(c){var f=c.length,_=f?c[0]:0,C=this.__wrapped__,L=function(U){return x_(U,c)};return f>1||this.__actions__.length||!(C instanceof Lt)||!Yo(_)?this.thru(L):(C=C.slice(_,+_+(f?1:0)),C.__actions__.push({func:Sy,args:[L],thisArg:t}),new cs(C,this.__chain__).thru(function(U){return f&&!U.length&&U.push(t),U}))});function gQ(){return OP(this)}function yQ(){return new cs(this.value(),this.__chain__)}function mQ(){this.__values__===t&&(this.__values__=UP(this.value()));var c=this.__index__>=this.__values__.length,f=c?t:this.__values__[this.__index__++];return{done:c,value:f}}function bQ(){return this}function wQ(c){for(var f,_=this;_ instanceof cy;){var C=$P(_);C.__index__=0,C.__values__=t,f?L.__wrapped__=C:f=C;var L=C;_=_.__wrapped__}return L.__wrapped__=c,f}function _Q(){var c=this.__wrapped__;if(c instanceof Lt){var f=c;return this.__actions__.length&&(f=new Lt(this)),f=f.reverse(),f.__actions__.push({func:Sy,args:[X_],thisArg:t}),new cs(f,this.__chain__)}return this.thru(X_)}function $Q(){return WC(this.__wrapped__,this.__actions__)}var xQ=yy(function(c,f,_){nr.call(c,_)?++c[_]:Vo(c,_,1)});function EQ(c,f,_){var C=Et(c)?iC:pX;return _&&ni(c,f,_)&&(f=t),C(c,ct(f,3))}function SQ(c,f){var _=Et(c)?Wa:IC;return _(c,ct(f,3))}var kQ=rP(xP),TQ=rP(EP);function IQ(c,f){return Mn(ky(c,f),1)}function OQ(c,f){return Mn(ky(c,f),Q)}function AQ(c,f,_){return _=_===t?1:kt(_),Mn(ky(c,f),_)}function AP(c,f){var _=Et(c)?ls:Ya;return _(c,ct(f,3))}function CP(c,f){var _=Et(c)?YY:TC;return _(c,ct(f,3))}var CQ=yy(function(c,f,_){nr.call(c,_)?c[_].push(f):Vo(c,_,[f])});function PQ(c,f,_,C){c=mi(c)?c:lh(c),_=_&&!C?kt(_):0;var L=c.length;return _<0&&(_=hn(L+_,0)),Cy(c)?_<=L&&c.indexOf(f,_)>-1:!!L&&Zc(c,f,_)>-1}var NQ=Nt(function(c,f,_){var C=-1,L=typeof f=="function",U=mi(c)?de(c.length):[];return Ya(c,function(Y){U[++C]=L?Mi(f,Y,_):If(Y,f,_)}),U}),RQ=yy(function(c,f,_){Vo(c,_,f)});function ky(c,f){var _=Et(c)?Er:RC;return _(c,ct(f,3))}function DQ(c,f,_,C){return c==null?[]:(Et(f)||(f=f==null?[]:[f]),_=C?t:_,Et(_)||(_=_==null?[]:[_]),LC(c,f,_))}var BQ=yy(function(c,f,_){c[_?0:1].push(f)},function(){return[[],[]]});function MQ(c,f,_){var C=Et(c)?c_:lC,L=arguments.length<3;return C(c,ct(f,4),_,L,Ya)}function LQ(c,f,_){var C=Et(c)?ZY:lC,L=arguments.length<3;return C(c,ct(f,4),_,L,TC)}function FQ(c,f){var _=Et(c)?Wa:IC;return _(c,Oy(ct(f,3)))}function jQ(c){var f=Et(c)?xC:PX;return f(c)}function zQ(c,f,_){(_?ni(c,f,_):f===t)?f=1:f=kt(f);var C=Et(c)?uX:NX;return C(c,f)}function HQ(c){var f=Et(c)?cX:DX;return f(c)}function UQ(c){if(c==null)return 0;if(mi(c))return Cy(c)?Jc(c):c.length;var f=qn(c);return f==X||f==Ve?c.size:O_(c).length}function KQ(c,f,_){var C=Et(c)?h_:BX;return _&&ni(c,f,_)&&(f=t),C(c,ct(f,3))}var WQ=Nt(function(c,f){if(c==null)return[];var _=f.length;return _>1&&ni(c,f[0],f[1])?f=[]:_>2&&ni(f[0],f[1],f[2])&&(f=[f[0]]),LC(c,Mn(f,1),[])}),Ty=SZ||function(){return Bn.Date.now()};function VQ(c,f){if(typeof f!="function")throw new us(o);return c=kt(c),function(){if(--c<1)return f.apply(this,arguments)}}function PP(c,f,_){return f=_?t:f,f=c&&f==null?c.length:f,qo(c,I,t,t,t,t,f)}function NP(c,f){var _;if(typeof f!="function")throw new us(o);return c=kt(c),function(){return--c>0&&(_=f.apply(this,arguments)),c<=1&&(f=t),_}}var Q_=Nt(function(c,f,_){var C=x;if(_.length){var L=qa(_,oh(Q_));C|=T}return qo(c,C,f,_,L)}),RP=Nt(function(c,f,_){var C=x|E;if(_.length){var L=qa(_,oh(RP));C|=T}return qo(f,C,c,_,L)});function DP(c,f,_){f=_?t:f;var C=qo(c,$,t,t,t,t,t,f);return C.placeholder=DP.placeholder,C}function BP(c,f,_){f=_?t:f;var C=qo(c,S,t,t,t,t,t,f);return C.placeholder=BP.placeholder,C}function MP(c,f,_){var C,L,U,Y,ee,ae,xe=0,Se=!1,Ie=!1,qe=!0;if(typeof c!="function")throw new us(o);f=ps(f)||0,Cr(_)&&(Se=!!_.leading,Ie="maxWait"in _,U=Ie?hn(ps(_.maxWait)||0,f):U,qe="trailing"in _?!!_.trailing:qe);function it(zr){var js=C,Jo=L;return C=L=t,xe=zr,Y=c.apply(Jo,js),Y}function ft(zr){return xe=zr,ee=Nf(Bt,f),Se?it(zr):Y}function It(zr){var js=zr-ae,Jo=zr-xe,r4=f-js;return Ie?Vn(r4,U-Jo):r4}function pt(zr){var js=zr-ae,Jo=zr-xe;return ae===t||js>=f||js<0||Ie&&Jo>=U}function Bt(){var zr=Ty();if(pt(zr))return jt(zr);ee=Nf(Bt,It(zr))}function jt(zr){return ee=t,qe&&C?it(zr):(C=L=t,Y)}function zi(){ee!==t&&qC(ee),xe=0,C=ae=L=ee=t}function ii(){return ee===t?Y:jt(Ty())}function Hi(){var zr=Ty(),js=pt(zr);if(C=arguments,L=this,ae=zr,js){if(ee===t)return ft(ae);if(Ie)return qC(ee),ee=Nf(Bt,f),it(ae)}return ee===t&&(ee=Nf(Bt,f)),Y}return Hi.cancel=zi,Hi.flush=ii,Hi}var qQ=Nt(function(c,f){return kC(c,1,f)}),GQ=Nt(function(c,f,_){return kC(c,ps(f)||0,_)});function YQ(c){return qo(c,R)}function Iy(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new us(o);var _=function(){var C=arguments,L=f?f.apply(this,C):C[0],U=_.cache;if(U.has(L))return U.get(L);var Y=c.apply(this,C);return _.cache=U.set(L,Y)||U,Y};return _.cache=new(Iy.Cache||Wo),_}Iy.Cache=Wo;function Oy(c){if(typeof c!="function")throw new us(o);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function ZQ(c){return NP(2,c)}var XQ=MX(function(c,f){f=f.length==1&&Et(f[0])?Er(f[0],Li(ct())):Er(Mn(f,1),Li(ct()));var _=f.length;return Nt(function(C){for(var L=-1,U=Vn(C.length,_);++L<U;)C[L]=f[L].call(this,C[L]);return Mi(c,this,C)})}),e$=Nt(function(c,f){var _=qa(f,oh(e$));return qo(c,T,t,f,_)}),LP=Nt(function(c,f){var _=qa(f,oh(LP));return qo(c,O,t,f,_)}),JQ=Go(function(c,f){return qo(c,P,t,t,t,f)});function QQ(c,f){if(typeof c!="function")throw new us(o);return f=f===t?f:kt(f),Nt(c,f)}function eee(c,f){if(typeof c!="function")throw new us(o);return f=f==null?0:hn(kt(f),0),Nt(function(_){var C=_[f],L=Ja(_,0,f);return C&&Va(L,C),Mi(c,this,L)})}function tee(c,f,_){var C=!0,L=!0;if(typeof c!="function")throw new us(o);return Cr(_)&&(C="leading"in _?!!_.leading:C,L="trailing"in _?!!_.trailing:L),MP(c,f,{leading:C,maxWait:f,trailing:L})}function ree(c){return PP(c,1)}function nee(c,f){return e$(L_(f),c)}function iee(){if(!arguments.length)return[];var c=arguments[0];return Et(c)?c:[c]}function see(c){return hs(c,g)}function oee(c,f){return f=typeof f=="function"?f:t,hs(c,g,f)}function aee(c){return hs(c,h|g)}function lee(c,f){return f=typeof f=="function"?f:t,hs(c,h|g,f)}function uee(c,f){return f==null||SC(c,f,wn(f))}function Fs(c,f){return c===f||c!==c&&f!==f}var cee=_y(k_),hee=_y(function(c,f){return c>=f}),xu=CC(function(){return arguments}())?CC:function(c){return Nr(c)&&nr.call(c,"callee")&&!yC.call(c,"callee")},Et=de.isArray,dee=JA?Li(JA):wX;function mi(c){return c!=null&&Ay(c.length)&&!Zo(c)}function jr(c){return Nr(c)&&mi(c)}function fee(c){return c===!0||c===!1||Nr(c)&&ri(c)==y}var Qa=TZ||h$,pee=QA?Li(QA):_X;function vee(c){return Nr(c)&&c.nodeType===1&&!Rf(c)}function gee(c){if(c==null)return!0;if(mi(c)&&(Et(c)||typeof c=="string"||typeof c.splice=="function"||Qa(c)||ah(c)||xu(c)))return!c.length;var f=qn(c);if(f==X||f==Ve)return!c.size;if(Pf(c))return!O_(c).length;for(var _ in c)if(nr.call(c,_))return!1;return!0}function yee(c,f){return Of(c,f)}function mee(c,f,_){_=typeof _=="function"?_:t;var C=_?_(c,f):t;return C===t?Of(c,f,t,_):!!C}function t$(c){if(!Nr(c))return!1;var f=ri(c);return f==N||f==A||typeof c.message=="string"&&typeof c.name=="string"&&!Rf(c)}function bee(c){return typeof c=="number"&&bC(c)}function Zo(c){if(!Cr(c))return!1;var f=ri(c);return f==B||f==j||f==fe||f==Xe}function FP(c){return typeof c=="number"&&c==kt(c)}function Ay(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=he}function Cr(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function Nr(c){return c!=null&&typeof c=="object"}var jP=eC?Li(eC):xX;function wee(c,f){return c===f||I_(c,f,W_(f))}function _ee(c,f,_){return _=typeof _=="function"?_:t,I_(c,f,W_(f),_)}function $ee(c){return zP(c)&&c!=+c}function xee(c){if(oJ(c))throw new xt(s);return PC(c)}function Eee(c){return c===null}function See(c){return c==null}function zP(c){return typeof c=="number"||Nr(c)&&ri(c)==re}function Rf(c){if(!Nr(c)||ri(c)!=_e)return!1;var f=ny(c);if(f===null)return!0;var _=nr.call(f,"constructor")&&f.constructor;return typeof _=="function"&&_ instanceof _&&Qg.call(_)==_Z}var r$=tC?Li(tC):EX;function kee(c){return FP(c)&&c>=-he&&c<=he}var HP=rC?Li(rC):SX;function Cy(c){return typeof c=="string"||!Et(c)&&Nr(c)&&ri(c)==$t}function ji(c){return typeof c=="symbol"||Nr(c)&&ri(c)==Kt}var ah=nC?Li(nC):kX;function Tee(c){return c===t}function Iee(c){return Nr(c)&&qn(c)==vr}function Oee(c){return Nr(c)&&ri(c)==yt}var Aee=_y(A_),Cee=_y(function(c,f){return c<=f});function UP(c){if(!c)return[];if(mi(c))return Cy(c)?Ms(c):yi(c);if(_f&&c[_f])return uZ(c[_f]());var f=qn(c),_=f==X?y_:f==Ve?Zg:lh;return _(c)}function Xo(c){if(!c)return c===0?c:0;if(c=ps(c),c===Q||c===-Q){var f=c<0?-1:1;return f*ue}return c===c?c:0}function kt(c){var f=Xo(c),_=f%1;return f===f?_?f-_:f:0}function KP(c){return c?bu(kt(c),0,Te):0}function ps(c){if(typeof c=="number")return c;if(ji(c))return ke;if(Cr(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Cr(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=uC(c);var _=Yw.test(c);return _||Xw.test(c)?VY(c.slice(2),_?2:8):Gw.test(c)?ke:+c}function WP(c){return yo(c,bi(c))}function Pee(c){return c?bu(kt(c),-he,he):c===0?c:0}function er(c){return c==null?"":Fi(c)}var Nee=ih(function(c,f){if(Pf(f)||mi(f)){yo(f,wn(f),c);return}for(var _ in f)nr.call(f,_)&&kf(c,_,f[_])}),VP=ih(function(c,f){yo(f,bi(f),c)}),Py=ih(function(c,f,_,C){yo(f,bi(f),c,C)}),Ree=ih(function(c,f,_,C){yo(f,wn(f),c,C)}),Dee=Go(x_);function Bee(c,f){var _=nh(c);return f==null?_:EC(_,f)}var Mee=Nt(function(c,f){c=cr(c);var _=-1,C=f.length,L=C>2?f[2]:t;for(L&&ni(f[0],f[1],L)&&(C=1);++_<C;)for(var U=f[_],Y=bi(U),ee=-1,ae=Y.length;++ee<ae;){var xe=Y[ee],Se=c[xe];(Se===t||Fs(Se,eh[xe])&&!nr.call(c,xe))&&(c[xe]=U[xe])}return c}),Lee=Nt(function(c){return c.push(t,uP),Mi(qP,t,c)});function Fee(c,f){return sC(c,ct(f,3),go)}function jee(c,f){return sC(c,ct(f,3),S_)}function zee(c,f){return c==null?c:E_(c,ct(f,3),bi)}function Hee(c,f){return c==null?c:OC(c,ct(f,3),bi)}function Uee(c,f){return c&&go(c,ct(f,3))}function Kee(c,f){return c&&S_(c,ct(f,3))}function Wee(c){return c==null?[]:fy(c,wn(c))}function Vee(c){return c==null?[]:fy(c,bi(c))}function n$(c,f,_){var C=c==null?t:wu(c,f);return C===t?_:C}function qee(c,f){return c!=null&&dP(c,f,gX)}function i$(c,f){return c!=null&&dP(c,f,yX)}var Gee=iP(function(c,f,_){f!=null&&typeof f.toString!="function"&&(f=ey.call(f)),c[f]=_},o$(wi)),Yee=iP(function(c,f,_){f!=null&&typeof f.toString!="function"&&(f=ey.call(f)),nr.call(c,f)?c[f].push(_):c[f]=[_]},ct),Zee=Nt(If);function wn(c){return mi(c)?$C(c):O_(c)}function bi(c){return mi(c)?$C(c,!0):TX(c)}function Xee(c,f){var _={};return f=ct(f,3),go(c,function(C,L,U){Vo(_,f(C,L,U),C)}),_}function Jee(c,f){var _={};return f=ct(f,3),go(c,function(C,L,U){Vo(_,L,f(C,L,U))}),_}var Qee=ih(function(c,f,_){py(c,f,_)}),qP=ih(function(c,f,_,C){py(c,f,_,C)}),ete=Go(function(c,f){var _={};if(c==null)return _;var C=!1;f=Er(f,function(U){return U=Xa(U,c),C||(C=U.length>1),U}),yo(c,U_(c),_),C&&(_=hs(_,h|v|g,GX));for(var L=f.length;L--;)D_(_,f[L]);return _});function tte(c,f){return GP(c,Oy(ct(f)))}var rte=Go(function(c,f){return c==null?{}:OX(c,f)});function GP(c,f){if(c==null)return{};var _=Er(U_(c),function(C){return[C]});return f=ct(f),FC(c,_,function(C,L){return f(C,L[0])})}function nte(c,f,_){f=Xa(f,c);var C=-1,L=f.length;for(L||(L=1,c=t);++C<L;){var U=c==null?t:c[mo(f[C])];U===t&&(C=L,U=_),c=Zo(U)?U.call(c):U}return c}function ite(c,f,_){return c==null?c:Af(c,f,_)}function ste(c,f,_,C){return C=typeof C=="function"?C:t,c==null?c:Af(c,f,_,C)}var YP=aP(wn),ZP=aP(bi);function ote(c,f,_){var C=Et(c),L=C||Qa(c)||ah(c);if(f=ct(f,4),_==null){var U=c&&c.constructor;L?_=C?new U:[]:Cr(c)?_=Zo(U)?nh(ny(c)):{}:_={}}return(L?ls:go)(c,function(Y,ee,ae){return f(_,Y,ee,ae)}),_}function ate(c,f){return c==null?!0:D_(c,f)}function lte(c,f,_){return c==null?c:KC(c,f,L_(_))}function ute(c,f,_,C){return C=typeof C=="function"?C:t,c==null?c:KC(c,f,L_(_),C)}function lh(c){return c==null?[]:g_(c,wn(c))}function cte(c){return c==null?[]:g_(c,bi(c))}function hte(c,f,_){return _===t&&(_=f,f=t),_!==t&&(_=ps(_),_=_===_?_:0),f!==t&&(f=ps(f),f=f===f?f:0),bu(ps(c),f,_)}function dte(c,f,_){return f=Xo(f),_===t?(_=f,f=0):_=Xo(_),c=ps(c),mX(c,f,_)}function fte(c,f,_){if(_&&typeof _!="boolean"&&ni(c,f,_)&&(f=_=t),_===t&&(typeof f=="boolean"?(_=f,f=t):typeof c=="boolean"&&(_=c,c=t)),c===t&&f===t?(c=0,f=1):(c=Xo(c),f===t?(f=c,c=0):f=Xo(f)),c>f){var C=c;c=f,f=C}if(_||c%1||f%1){var L=wC();return Vn(c+L*(f-c+WY("1e-"+((L+"").length-1))),f)}return P_(c,f)}var pte=sh(function(c,f,_){return f=f.toLowerCase(),c+(_?XP(f):f)});function XP(c){return s$(er(c).toLowerCase())}function JP(c){return c=er(c),c&&c.replace(Qw,iZ).replace(DY,"")}function vte(c,f,_){c=er(c),f=Fi(f);var C=c.length;_=_===t?C:bu(kt(_),0,C);var L=_;return _-=f.length,_>=0&&c.slice(_,L)==f}function gte(c){return c=er(c),c&&Rw.test(c)?c.replace(Mg,sZ):c}function yte(c){return c=er(c),c&&jw.test(c)?c.replace(gf,"\\$&"):c}var mte=sh(function(c,f,_){return c+(_?"-":"")+f.toLowerCase()}),bte=sh(function(c,f,_){return c+(_?" ":"")+f.toLowerCase()}),wte=tP("toLowerCase");function _te(c,f,_){c=er(c),f=kt(f);var C=f?Jc(c):0;if(!f||C>=f)return c;var L=(f-C)/2;return wy(ay(L),_)+c+wy(oy(L),_)}function $te(c,f,_){c=er(c),f=kt(f);var C=f?Jc(c):0;return f&&C<f?c+wy(f-C,_):c}function xte(c,f,_){c=er(c),f=kt(f);var C=f?Jc(c):0;return f&&C<f?wy(f-C,_)+c:c}function Ete(c,f,_){return _||f==null?f=0:f&&(f=+f),CZ(er(c).replace(yf,""),f||0)}function Ste(c,f,_){return(_?ni(c,f,_):f===t)?f=1:f=kt(f),N_(er(c),f)}function kte(){var c=arguments,f=er(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var Tte=sh(function(c,f,_){return c+(_?"_":"")+f.toLowerCase()});function Ite(c,f,_){return _&&typeof _!="number"&&ni(c,f,_)&&(f=_=t),_=_===t?Te:_>>>0,_?(c=er(c),c&&(typeof f=="string"||f!=null&&!r$(f))&&(f=Fi(f),!f&&Xc(c))?Ja(Ms(c),0,_):c.split(f,_)):[]}var Ote=sh(function(c,f,_){return c+(_?" ":"")+s$(f)});function Ate(c,f,_){return c=er(c),_=_==null?0:bu(kt(_),0,c.length),f=Fi(f),c.slice(_,_+f.length)==f}function Cte(c,f,_){var C=z.templateSettings;_&&ni(c,f,_)&&(f=t),c=er(c),f=Py({},f,C,lP);var L=Py({},f.imports,C.imports,lP),U=wn(L),Y=g_(L,U),ee,ae,xe=0,Se=f.interpolate||qc,Ie="__p += '",qe=m_((f.escape||qc).source+"|"+Se.source+"|"+(Se===Fg?qw:qc).source+"|"+(f.evaluate||qc).source+"|$","g"),it="//# sourceURL="+(nr.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jY+"]")+`
`;c.replace(qe,function(pt,Bt,jt,zi,ii,Hi){return jt||(jt=zi),Ie+=c.slice(xe,Hi).replace(Hg,oZ),Bt&&(ee=!0,Ie+=`' +
__e(`+Bt+`) +
'`),ii&&(ae=!0,Ie+=`';
`+ii+`;
__p += '`),jt&&(Ie+=`' +
((__t = (`+jt+`)) == null ? '' : __t) +
'`),xe=Hi+pt.length,pt}),Ie+=`';
`;var ft=nr.call(f,"variable")&&f.variable;if(!ft)Ie=`with (obj) {
`+Ie+`
}
`;else if(Ww.test(ft))throw new xt(a);Ie=(ae?Ie.replace(Dg,""):Ie).replace(Nw,"$1").replace(po,"$1;"),Ie="function("+(ft||"obj")+`) {
`+(ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ie+`return __p
}`;var It=e4(function(){return Xt(U,it+"return "+Ie).apply(t,Y)});if(It.source=Ie,t$(It))throw It;return It}function Pte(c){return er(c).toLowerCase()}function Nte(c){return er(c).toUpperCase()}function Rte(c,f,_){if(c=er(c),c&&(_||f===t))return uC(c);if(!c||!(f=Fi(f)))return c;var C=Ms(c),L=Ms(f),U=cC(C,L),Y=hC(C,L)+1;return Ja(C,U,Y).join("")}function Dte(c,f,_){if(c=er(c),c&&(_||f===t))return c.slice(0,fC(c)+1);if(!c||!(f=Fi(f)))return c;var C=Ms(c),L=hC(C,Ms(f))+1;return Ja(C,0,L).join("")}function Bte(c,f,_){if(c=er(c),c&&(_||f===t))return c.replace(yf,"");if(!c||!(f=Fi(f)))return c;var C=Ms(c),L=cC(C,Ms(f));return Ja(C,L).join("")}function Mte(c,f){var _=D,C=F;if(Cr(f)){var L="separator"in f?f.separator:L;_="length"in f?kt(f.length):_,C="omission"in f?Fi(f.omission):C}c=er(c);var U=c.length;if(Xc(c)){var Y=Ms(c);U=Y.length}if(_>=U)return c;var ee=_-Jc(C);if(ee<1)return C;var ae=Y?Ja(Y,0,ee).join(""):c.slice(0,ee);if(L===t)return ae+C;if(Y&&(ee+=ae.length-ee),r$(L)){if(c.slice(ee).search(L)){var xe,Se=ae;for(L.global||(L=m_(L.source,er(zg.exec(L))+"g")),L.lastIndex=0;xe=L.exec(Se);)var Ie=xe.index;ae=ae.slice(0,Ie===t?ee:Ie)}}else if(c.indexOf(Fi(L),ee)!=ee){var qe=ae.lastIndexOf(L);qe>-1&&(ae=ae.slice(0,qe))}return ae+C}function Lte(c){return c=er(c),c&&Lg.test(c)?c.replace(Bg,fZ):c}var Fte=sh(function(c,f,_){return c+(_?" ":"")+f.toUpperCase()}),s$=tP("toUpperCase");function QP(c,f,_){return c=er(c),f=_?t:f,f===t?lZ(c)?gZ(c):QY(c):c.match(f)||[]}var e4=Nt(function(c,f){try{return Mi(c,t,f)}catch(_){return t$(_)?_:new xt(_)}}),jte=Go(function(c,f){return ls(f,function(_){_=mo(_),Vo(c,_,Q_(c[_],c))}),c});function zte(c){var f=c==null?0:c.length,_=ct();return c=f?Er(c,function(C){if(typeof C[1]!="function")throw new us(o);return[_(C[0]),C[1]]}):[],Nt(function(C){for(var L=-1;++L<f;){var U=c[L];if(Mi(U[0],this,C))return Mi(U[1],this,C)}})}function Hte(c){return fX(hs(c,h))}function o$(c){return function(){return c}}function Ute(c,f){return c==null||c!==c?f:c}var Kte=nP(),Wte=nP(!0);function wi(c){return c}function a$(c){return NC(typeof c=="function"?c:hs(c,h))}function Vte(c){return DC(hs(c,h))}function qte(c,f){return BC(c,hs(f,h))}var Gte=Nt(function(c,f){return function(_){return If(_,c,f)}}),Yte=Nt(function(c,f){return function(_){return If(c,_,f)}});function l$(c,f,_){var C=wn(f),L=fy(f,C);_==null&&!(Cr(f)&&(L.length||!C.length))&&(_=f,f=c,c=this,L=fy(f,wn(f)));var U=!(Cr(_)&&"chain"in _)||!!_.chain,Y=Zo(c);return ls(L,function(ee){var ae=f[ee];c[ee]=ae,Y&&(c.prototype[ee]=function(){var xe=this.__chain__;if(U||xe){var Se=c(this.__wrapped__),Ie=Se.__actions__=yi(this.__actions__);return Ie.push({func:ae,args:arguments,thisArg:c}),Se.__chain__=xe,Se}return ae.apply(c,Va([this.value()],arguments))})}),c}function Zte(){return Bn._===this&&(Bn._=$Z),this}function u$(){}function Xte(c){return c=kt(c),Nt(function(f){return MC(f,c)})}var Jte=j_(Er),Qte=j_(iC),ere=j_(h_);function t4(c){return q_(c)?d_(mo(c)):AX(c)}function tre(c){return function(f){return c==null?t:wu(c,f)}}var rre=sP(),nre=sP(!0);function c$(){return[]}function h$(){return!1}function ire(){return{}}function sre(){return""}function ore(){return!0}function are(c,f){if(c=kt(c),c<1||c>he)return[];var _=Te,C=Vn(c,Te);f=ct(f),c-=Te;for(var L=v_(C,f);++_<c;)f(_);return L}function lre(c){return Et(c)?Er(c,mo):ji(c)?[c]:yi(_P(er(c)))}function ure(c){var f=++wZ;return er(c)+f}var cre=by(function(c,f){return c+f},0),hre=z_("ceil"),dre=by(function(c,f){return c/f},1),fre=z_("floor");function pre(c){return c&&c.length?dy(c,wi,k_):t}function vre(c,f){return c&&c.length?dy(c,ct(f,2),k_):t}function gre(c){return aC(c,wi)}function yre(c,f){return aC(c,ct(f,2))}function mre(c){return c&&c.length?dy(c,wi,A_):t}function bre(c,f){return c&&c.length?dy(c,ct(f,2),A_):t}var wre=by(function(c,f){return c*f},1),_re=z_("round"),$re=by(function(c,f){return c-f},0);function xre(c){return c&&c.length?p_(c,wi):0}function Ere(c,f){return c&&c.length?p_(c,ct(f,2)):0}return z.after=VQ,z.ary=PP,z.assign=Nee,z.assignIn=VP,z.assignInWith=Py,z.assignWith=Ree,z.at=Dee,z.before=NP,z.bind=Q_,z.bindAll=jte,z.bindKey=RP,z.castArray=iee,z.chain=OP,z.chunk=fJ,z.compact=pJ,z.concat=vJ,z.cond=zte,z.conforms=Hte,z.constant=o$,z.countBy=xQ,z.create=Bee,z.curry=DP,z.curryRight=BP,z.debounce=MP,z.defaults=Mee,z.defaultsDeep=Lee,z.defer=qQ,z.delay=GQ,z.difference=gJ,z.differenceBy=yJ,z.differenceWith=mJ,z.drop=bJ,z.dropRight=wJ,z.dropRightWhile=_J,z.dropWhile=$J,z.fill=xJ,z.filter=SQ,z.flatMap=IQ,z.flatMapDeep=OQ,z.flatMapDepth=AQ,z.flatten=SP,z.flattenDeep=EJ,z.flattenDepth=SJ,z.flip=YQ,z.flow=Kte,z.flowRight=Wte,z.fromPairs=kJ,z.functions=Wee,z.functionsIn=Vee,z.groupBy=CQ,z.initial=IJ,z.intersection=OJ,z.intersectionBy=AJ,z.intersectionWith=CJ,z.invert=Gee,z.invertBy=Yee,z.invokeMap=NQ,z.iteratee=a$,z.keyBy=RQ,z.keys=wn,z.keysIn=bi,z.map=ky,z.mapKeys=Xee,z.mapValues=Jee,z.matches=Vte,z.matchesProperty=qte,z.memoize=Iy,z.merge=Qee,z.mergeWith=qP,z.method=Gte,z.methodOf=Yte,z.mixin=l$,z.negate=Oy,z.nthArg=Xte,z.omit=ete,z.omitBy=tte,z.once=ZQ,z.orderBy=DQ,z.over=Jte,z.overArgs=XQ,z.overEvery=Qte,z.overSome=ere,z.partial=e$,z.partialRight=LP,z.partition=BQ,z.pick=rte,z.pickBy=GP,z.property=t4,z.propertyOf=tre,z.pull=DJ,z.pullAll=TP,z.pullAllBy=BJ,z.pullAllWith=MJ,z.pullAt=LJ,z.range=rre,z.rangeRight=nre,z.rearg=JQ,z.reject=FQ,z.remove=FJ,z.rest=QQ,z.reverse=X_,z.sampleSize=zQ,z.set=ite,z.setWith=ste,z.shuffle=HQ,z.slice=jJ,z.sortBy=WQ,z.sortedUniq=qJ,z.sortedUniqBy=GJ,z.split=Ite,z.spread=eee,z.tail=YJ,z.take=ZJ,z.takeRight=XJ,z.takeRightWhile=JJ,z.takeWhile=QJ,z.tap=pQ,z.throttle=tee,z.thru=Sy,z.toArray=UP,z.toPairs=YP,z.toPairsIn=ZP,z.toPath=lre,z.toPlainObject=WP,z.transform=ote,z.unary=ree,z.union=eQ,z.unionBy=tQ,z.unionWith=rQ,z.uniq=nQ,z.uniqBy=iQ,z.uniqWith=sQ,z.unset=ate,z.unzip=J_,z.unzipWith=IP,z.update=lte,z.updateWith=ute,z.values=lh,z.valuesIn=cte,z.without=oQ,z.words=QP,z.wrap=nee,z.xor=aQ,z.xorBy=lQ,z.xorWith=uQ,z.zip=cQ,z.zipObject=hQ,z.zipObjectDeep=dQ,z.zipWith=fQ,z.entries=YP,z.entriesIn=ZP,z.extend=VP,z.extendWith=Py,l$(z,z),z.add=cre,z.attempt=e4,z.camelCase=pte,z.capitalize=XP,z.ceil=hre,z.clamp=hte,z.clone=see,z.cloneDeep=aee,z.cloneDeepWith=lee,z.cloneWith=oee,z.conformsTo=uee,z.deburr=JP,z.defaultTo=Ute,z.divide=dre,z.endsWith=vte,z.eq=Fs,z.escape=gte,z.escapeRegExp=yte,z.every=EQ,z.find=kQ,z.findIndex=xP,z.findKey=Fee,z.findLast=TQ,z.findLastIndex=EP,z.findLastKey=jee,z.floor=fre,z.forEach=AP,z.forEachRight=CP,z.forIn=zee,z.forInRight=Hee,z.forOwn=Uee,z.forOwnRight=Kee,z.get=n$,z.gt=cee,z.gte=hee,z.has=qee,z.hasIn=i$,z.head=kP,z.identity=wi,z.includes=PQ,z.indexOf=TJ,z.inRange=dte,z.invoke=Zee,z.isArguments=xu,z.isArray=Et,z.isArrayBuffer=dee,z.isArrayLike=mi,z.isArrayLikeObject=jr,z.isBoolean=fee,z.isBuffer=Qa,z.isDate=pee,z.isElement=vee,z.isEmpty=gee,z.isEqual=yee,z.isEqualWith=mee,z.isError=t$,z.isFinite=bee,z.isFunction=Zo,z.isInteger=FP,z.isLength=Ay,z.isMap=jP,z.isMatch=wee,z.isMatchWith=_ee,z.isNaN=$ee,z.isNative=xee,z.isNil=See,z.isNull=Eee,z.isNumber=zP,z.isObject=Cr,z.isObjectLike=Nr,z.isPlainObject=Rf,z.isRegExp=r$,z.isSafeInteger=kee,z.isSet=HP,z.isString=Cy,z.isSymbol=ji,z.isTypedArray=ah,z.isUndefined=Tee,z.isWeakMap=Iee,z.isWeakSet=Oee,z.join=PJ,z.kebabCase=mte,z.last=fs,z.lastIndexOf=NJ,z.lowerCase=bte,z.lowerFirst=wte,z.lt=Aee,z.lte=Cee,z.max=pre,z.maxBy=vre,z.mean=gre,z.meanBy=yre,z.min=mre,z.minBy=bre,z.stubArray=c$,z.stubFalse=h$,z.stubObject=ire,z.stubString=sre,z.stubTrue=ore,z.multiply=wre,z.nth=RJ,z.noConflict=Zte,z.noop=u$,z.now=Ty,z.pad=_te,z.padEnd=$te,z.padStart=xte,z.parseInt=Ete,z.random=fte,z.reduce=MQ,z.reduceRight=LQ,z.repeat=Ste,z.replace=kte,z.result=nte,z.round=_re,z.runInContext=oe,z.sample=jQ,z.size=UQ,z.snakeCase=Tte,z.some=KQ,z.sortedIndex=zJ,z.sortedIndexBy=HJ,z.sortedIndexOf=UJ,z.sortedLastIndex=KJ,z.sortedLastIndexBy=WJ,z.sortedLastIndexOf=VJ,z.startCase=Ote,z.startsWith=Ate,z.subtract=$re,z.sum=xre,z.sumBy=Ere,z.template=Cte,z.times=are,z.toFinite=Xo,z.toInteger=kt,z.toLength=KP,z.toLower=Pte,z.toNumber=ps,z.toSafeInteger=Pee,z.toString=er,z.toUpper=Nte,z.trim=Rte,z.trimEnd=Dte,z.trimStart=Bte,z.truncate=Mte,z.unescape=Lte,z.uniqueId=ure,z.upperCase=Fte,z.upperFirst=s$,z.each=AP,z.eachRight=CP,z.first=kP,l$(z,function(){var c={};return go(z,function(f,_){nr.call(z.prototype,_)||(c[_]=f)}),c}(),{chain:!1}),z.VERSION=n,ls(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){z[c].placeholder=z}),ls(["drop","take"],function(c,f){Lt.prototype[c]=function(_){_=_===t?1:hn(kt(_),0);var C=this.__filtered__&&!f?new Lt(this):this.clone();return C.__filtered__?C.__takeCount__=Vn(_,C.__takeCount__):C.__views__.push({size:Vn(_,Te),type:c+(C.__dir__<0?"Right":"")}),C},Lt.prototype[c+"Right"]=function(_){return this.reverse()[c](_).reverse()}}),ls(["filter","map","takeWhile"],function(c,f){var _=f+1,C=_==W||_==G;Lt.prototype[c]=function(L){var U=this.clone();return U.__iteratees__.push({iteratee:ct(L,3),type:_}),U.__filtered__=U.__filtered__||C,U}}),ls(["head","last"],function(c,f){var _="take"+(f?"Right":"");Lt.prototype[c]=function(){return this[_](1).value()[0]}}),ls(["initial","tail"],function(c,f){var _="drop"+(f?"":"Right");Lt.prototype[c]=function(){return this.__filtered__?new Lt(this):this[_](1)}}),Lt.prototype.compact=function(){return this.filter(wi)},Lt.prototype.find=function(c){return this.filter(c).head()},Lt.prototype.findLast=function(c){return this.reverse().find(c)},Lt.prototype.invokeMap=Nt(function(c,f){return typeof c=="function"?new Lt(this):this.map(function(_){return If(_,c,f)})}),Lt.prototype.reject=function(c){return this.filter(Oy(ct(c)))},Lt.prototype.slice=function(c,f){c=kt(c);var _=this;return _.__filtered__&&(c>0||f<0)?new Lt(_):(c<0?_=_.takeRight(-c):c&&(_=_.drop(c)),f!==t&&(f=kt(f),_=f<0?_.dropRight(-f):_.take(f-c)),_)},Lt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Lt.prototype.toArray=function(){return this.take(Te)},go(Lt.prototype,function(c,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),C=/^(?:head|last)$/.test(f),L=z[C?"take"+(f=="last"?"Right":""):f],U=C||/^find/.test(f);L&&(z.prototype[f]=function(){var Y=this.__wrapped__,ee=C?[1]:arguments,ae=Y instanceof Lt,xe=ee[0],Se=ae||Et(Y),Ie=function(Bt){var jt=L.apply(z,Va([Bt],ee));return C&&qe?jt[0]:jt};Se&&_&&typeof xe=="function"&&xe.length!=1&&(ae=Se=!1);var qe=this.__chain__,it=!!this.__actions__.length,ft=U&&!qe,It=ae&&!it;if(!U&&Se){Y=It?Y:new Lt(this);var pt=c.apply(Y,ee);return pt.__actions__.push({func:Sy,args:[Ie],thisArg:t}),new cs(pt,qe)}return ft&&It?c.apply(this,ee):(pt=this.thru(Ie),ft?C?pt.value()[0]:pt.value():pt)})}),ls(["pop","push","shift","sort","splice","unshift"],function(c){var f=Xg[c],_=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",C=/^(?:pop|shift)$/.test(c);z.prototype[c]=function(){var L=arguments;if(C&&!this.__chain__){var U=this.value();return f.apply(Et(U)?U:[],L)}return this[_](function(Y){return f.apply(Et(Y)?Y:[],L)})}}),go(Lt.prototype,function(c,f){var _=z[f];if(_){var C=_.name+"";nr.call(rh,C)||(rh[C]=[]),rh[C].push({name:f,func:_})}}),rh[my(t,E).name]=[{name:"wrapper",func:t}],Lt.prototype.clone=LZ,Lt.prototype.reverse=FZ,Lt.prototype.value=jZ,z.prototype.at=vQ,z.prototype.chain=gQ,z.prototype.commit=yQ,z.prototype.next=mQ,z.prototype.plant=wQ,z.prototype.reverse=_Q,z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=$Q,z.prototype.first=z.prototype.head,_f&&(z.prototype[_f]=bQ),z},Qc=yZ();vu?((vu.exports=Qc)._=Qc,a_._=Qc):Bn._=Qc}).call(en)})(eb,eb.exports);var wd=eb.exports,Dz={exports:{}},W$={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var NN;function Hve(){return NN||(NN=1,function(e){(function(){function r(o,a){for(var l=2;l<arguments.length;l++)for(var u=0;u<arguments[l].length;u++)o[a++]=arguments[l].charAt(u)}function t(o){return String.fromCharCode(o>>8&255,o&255)}function n(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function i(o){return String.fromCharCode(o&255,o>>8&255)}var s=function(o,a,l){this.width=o,this.height=a,this.depth=l,this.pix_size=a*(o+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*l+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+l+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var u=new Array,d=0;d<this.buffer_size;d++)this.buffer[d]="\0";r(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(o),n(a),"\b"),r(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var h=8+112<<8|192;h+=31-h%31,r(this.buffer,this.idat_offs+8,t(h));for(var d=0;(d<<16)-1<this.pix_size;d++){var v,g;d+65535<this.pix_size?(v=65535,g="\0"):(v=this.pix_size-(d<<16)-d,g=""),r(this.buffer,this.idat_offs+8+2+(d<<16)+(d<<2),g,i(v),i(~v))}for(var d=0;d<256;d++){for(var b=d,m=0;m<8;m++)b&1?b=-306674912^b>>1&2147483647:b=b>>1&2147483647;u[d]=b}this.index=function(x,E){var k=E*(this.width+1)+x+1,$=this.idat_offs+8+2+5*Math.floor(k/65535+1)+k;return $},this.color=function(x,E,k,$){$=$>=0?$:255;var S=(($<<8|x)<<8|E)<<8|k;if(typeof this.palette[S]>"u"){if(this.pindex==this.depth)return"\0";var T=this.plte_offs+8+3*this.pindex;this.buffer[T+0]=String.fromCharCode(x),this.buffer[T+1]=String.fromCharCode(E),this.buffer[T+2]=String.fromCharCode(k),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode($),this.palette[S]=String.fromCharCode(this.pindex++)}return this.palette[S]},this.getBase64=function(){var x=this.getDump(),E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k,$,S,T,O,I,P,R=x.length,D=0,F="";do k=x.charCodeAt(D),T=k>>2,$=x.charCodeAt(D+1),O=(k&3)<<4|$>>4,S=x.charCodeAt(D+2),R<D+2?I=64:I=($&15)<<2|S>>6,R<D+3?P=64:P=S&63,F+=E.charAt(T)+E.charAt(O)+E.charAt(I)+E.charAt(P);while((D+=3)<R);return F},this.getDump=function(){for(var x=65521,E=5552,k=1,$=0,S=E,T=0;T<this.height;T++)for(var O=-1;O<this.width;O++)k+=this.buffer[this.index(O,T)].charCodeAt(0),$+=k,(S-=1)==0&&(k%=x,$%=x,S=E);k%=x,$%=x,r(this.buffer,this.idat_offs+this.idat_size-8,n($<<16|k));function I(P,R,D){for(var F=-1,K=4;K<D-4;K+=1)F=u[(F^P[R+K].charCodeAt(0))&255]^F>>8&16777215;r(P,R+D-4,n(F^-1))}return I(this.buffer,this.ihdr_offs,this.ihdr_size),I(this.buffer,this.plte_offs,this.plte_size),I(this.buffer,this.trns_offs,this.trns_size),I(this.buffer,this.idat_offs,this.idat_size),I(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(W$)),W$.exports}(function(e){(function(){var r;r=Hve();var t=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var o=parseInt(this.hash.substr(-7),16)/268435455,a=this.options.saturation||this.defaults.saturation,l=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(o,a,l)};t.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new n(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,o=Math.floor(s*this.margin),a=Math.floor((s-o*2)/5),l=Math.floor((s-a*5)/2),u=i.color.apply(i,this.background),d=i.color.apply(i,this.foreground),h,v;for(h=0;h<15;h++)v=parseInt(this.hash.charAt(h),16)%2?u:d,h<5?this.rectangle(2*a+l,h*a+l,a,a,v,i):h<10?(this.rectangle(1*a+l,(h-5)*a+l,a,a,v,i),this.rectangle(3*a+l,(h-5)*a+l,a,a,v,i)):h<15&&(this.rectangle(0*a+l,(h-10)*a+l,a,a,v,i),this.rectangle(4*a+l,(h-10)*a+l,a,a,v,i));return i},rectangle:function(i,s,o,a,l,u){if(this.isSvg())u.rectangles.push({x:i,y:s,w:o,h:a,color:l});else{var d,h;for(d=i;d<i+o;d++)for(h=s;h<s+a;h++)u.buffer[u.index(d,h)]=l}},hsl2rgb:function(i,s,o){return i*=6,s=[o+=s*=o<.5?o:1-o,o-i%1*s*2,o-=s*=2,o,o+i%1*s,o+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var n=function(i,s,o){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,o),this.rectangles=[]};n.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,o,a){var l=[i,s,o].map(Math.round);return l.push(a>=0&&a<=255?a/255:1),"rgba("+l.join(",")+")"},getDump:function(){var i,s,o,a=this.foreground,l=this.background,u=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+l+";'><g style='fill:"+a+"; stroke:"+a+"; stroke-width:"+u+";'>",i=0;i<this.rectangles.length;i++)o=this.rectangles[i],o.color!=l&&(s+="<rect  x='"+o.x+"' y='"+o.y+"' width='"+o.w+"' height='"+o.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=t})()})(Dz);var Uve=Dz.exports;const Kve=oo(Uve);let tm={};async function RN(e,r){return tm[e]||(tm[e]=r().finally(()=>{delete tm[e]})),tm[e]}const Bz="DWoTR";class TS extends va{constructor(){super(Bz);Z(this,"edges");Z(this,"profiles");this.version(2).stores({edges:"key, outKey, inKey",profiles:"key"})}}let tp=new TS;function Wve(){return tp.transaction("rw",tp.edges,tp.profiles,async()=>{await Promise.all(tp.tables.map(e=>e.clear()))})}var sa,bv;class Vve{constructor(){yr(this,sa,null);yr(this,bv,!1)}get profiles(){return this.db.profiles}get edges(){return this.db.edges}get db(){if(!Jr(this,sa))try{vs(this,sa,new TS),Jr(this,sa).open().catch(r=>{console.log("Error opening database",r),this.recreateDB()})}catch(r){console.log("Error opening database",r),this.recreateDB()}return Jr(this,sa)}recreateDB(){if(Jr(this,bv))return;vs(this,bv,!0),this.deleteDB().then(()=>{vs(this,sa,new TS)}),(t=>{const n=Date.now();let i;do i=Date.now();while(i-n<t||!Jr(this,sa))})(5e3)}async deleteDB(){await va.delete(Bz),console.log("Database deleted")}}sa=new WeakMap,bv=new WeakMap;const rm=new Vve;new TextDecoder("utf-8");const qve=new TextEncoder;function Gve(e){let r=hi(qve.encode(e));return ur(r)}function Yve(e=Date.now()){return Math.floor(e/1e3)}function Zve(e){return e.slice(0,4)+"..."+e.slice(-4)}const V$="profileEvent";class gc extends CustomEvent{constructor(r){super(V$,{detail:r})}static dispatch(r,t){(!(t!=null&&t.id)||t.id==0)&&(t.id=r),document.dispatchEvent(new gc(t))}static add(r){document.addEventListener(V$,r)}static remove(r){document.removeEventListener(V$,r)}}function Ia(e){return Array.isArray?Array.isArray(e):Fz(e)==="[object Array]"}const Xve=1/0;function Jve(e){if(typeof e=="string")return e;let r=e+"";return r=="0"&&1/e==-Xve?"-0":r}function Qve(e){return e==null?"":Jve(e)}function Io(e){return typeof e=="string"}function Mz(e){return typeof e=="number"}function ege(e){return e===!0||e===!1||tge(e)&&Fz(e)=="[object Boolean]"}function Lz(e){return typeof e=="object"}function tge(e){return Lz(e)&&e!==null}function Zi(e){return e!=null}function q$(e){return!e.trim().length}function Fz(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const rge="Incorrect 'index' type",nge=e=>`Invalid value for key ${e}`,ige=e=>`Pattern length exceeds max of ${e}.`,sge=e=>`Missing ${e} property in key`,oge=e=>`Property 'weight' in key '${e}' must be a positive integer`,DN=Object.prototype.hasOwnProperty;class age{constructor(r){this._keys=[],this._keyMap={};let t=0;r.forEach(n=>{let i=jz(n);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(r){return this._keyMap[r]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function jz(e){let r=null,t=null,n=null,i=1,s=null;if(Io(e)||Ia(e))n=e,r=BN(e),t=IS(e);else{if(!DN.call(e,"name"))throw new Error(sge("name"));const o=e.name;if(n=o,DN.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(oge(o));r=BN(o),t=IS(o),s=e.getFn}return{path:r,id:t,weight:i,src:n,getFn:s}}function BN(e){return Ia(e)?e:e.split(".")}function IS(e){return Ia(e)?e.join("."):e}function lge(e,r){let t=[],n=!1;const i=(s,o,a)=>{if(Zi(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Zi(u))return;if(a===o.length-1&&(Io(u)||Mz(u)||ege(u)))t.push(Qve(u));else if(Ia(u)){n=!0;for(let d=0,h=u.length;d<h;d+=1)i(u[d],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,Io(r)?r.split("."):r,0),n?t:t[0]}const uge={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},cge={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,r)=>e.score===r.score?e.idx<r.idx?-1:1:e.score<r.score?-1:1},hge={location:0,threshold:.6,distance:100},dge={useExtendedSearch:!1,getFn:lge,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var bt={...cge,...uge,...hge,...dge};const fge=/[^ ]+/g;function pge(e=1,r=3){const t=new Map,n=Math.pow(10,r);return{get(i){const s=i.match(fge).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class n3{constructor({getFn:r=bt.getFn,fieldNormWeight:t=bt.fieldNormWeight}={}){this.norm=pge(t,3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}setSources(r=[]){this.docs=r}setIndexRecords(r=[]){this.records=r}setKeys(r=[]){this.keys=r,this._keysMap={},r.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Io(this.docs[0])?this.docs.forEach((r,t)=>{this._addString(r,t)}):this.docs.forEach((r,t)=>{this._addObject(r,t)}),this.norm.clear())}add(r){const t=this.size();Io(r)?this._addString(r,t):this._addObject(r,t)}removeAt(r){this.records.splice(r,1);for(let t=r,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(r,t){return r[this._keysMap[t]]}size(){return this.records.length}_addString(r,t){if(!Zi(r)||q$(r))return;let n={v:r,i:t,n:this.norm.get(r)};this.records.push(n)}_addObject(r,t){let n={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(r):this.getFn(r,i.path);if(Zi(o)){if(Ia(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:d}=l.pop();if(Zi(d))if(Io(d)&&!q$(d)){let h={v:d,i:u,n:this.norm.get(d)};a.push(h)}else Ia(d)&&d.forEach((h,v)=>{l.push({nestedArrIndex:v,value:h})})}n.$[s]=a}else if(Io(o)&&!q$(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function zz(e,r,{getFn:t=bt.getFn,fieldNormWeight:n=bt.fieldNormWeight}={}){const i=new n3({getFn:t,fieldNormWeight:n});return i.setKeys(e.map(jz)),i.setSources(r),i.create(),i}function vge(e,{getFn:r=bt.getFn,fieldNormWeight:t=bt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new n3({getFn:r,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(i),s}function nm(e,{errors:r=0,currentLocation:t=0,expectedLocation:n=0,distance:i=bt.distance,ignoreLocation:s=bt.ignoreLocation}={}){const o=r/e.length;if(s)return o;const a=Math.abs(n-t);return i?o+a/i:a?1:o}function gge(e=[],r=bt.minMatchCharLength){let t=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=r&&t.push([n,i]),n=-1)}return e[s-1]&&s-n>=r&&t.push([n,s-1]),t}const Du=32;function yge(e,r,t,{location:n=bt.location,distance:i=bt.distance,threshold:s=bt.threshold,findAllMatches:o=bt.findAllMatches,minMatchCharLength:a=bt.minMatchCharLength,includeMatches:l=bt.includeMatches,ignoreLocation:u=bt.ignoreLocation}={}){if(r.length>Du)throw new Error(ige(Du));const d=r.length,h=e.length,v=Math.max(0,Math.min(n,h));let g=s,b=v;const m=a>1||l,x=m?Array(h):[];let E;for(;(E=e.indexOf(r,b))>-1;){let I=nm(r,{currentLocation:E,expectedLocation:v,distance:i,ignoreLocation:u});if(g=Math.min(I,g),b=E+d,m){let P=0;for(;P<d;)x[E+P]=1,P+=1}}b=-1;let k=[],$=1,S=d+h;const T=1<<d-1;for(let I=0;I<d;I+=1){let P=0,R=S;for(;P<R;)nm(r,{errors:I,currentLocation:v+R,expectedLocation:v,distance:i,ignoreLocation:u})<=g?P=R:S=R,R=Math.floor((S-P)/2+P);S=R;let D=Math.max(1,v-R+1),F=o?h:Math.min(v+R,h)+d,K=Array(F+2);K[F+1]=(1<<I)-1;for(let W=F;W>=D;W-=1){let M=W-1,G=t[e.charAt(M)];if(m&&(x[M]=+!!G),K[W]=(K[W+1]<<1|1)&G,I&&(K[W]|=(k[W+1]|k[W])<<1|1|k[W+1]),K[W]&T&&($=nm(r,{errors:I,currentLocation:M,expectedLocation:v,distance:i,ignoreLocation:u}),$<=g)){if(g=$,b=M,b<=v)break;D=Math.max(1,2*v-b)}}if(nm(r,{errors:I+1,currentLocation:v,expectedLocation:v,distance:i,ignoreLocation:u})>g)break;k=K}const O={isMatch:b>=0,score:Math.max(.001,$)};if(m){const I=gge(x,a);I.length?l&&(O.indices=I):O.isMatch=!1}return O}function mge(e){let r={};for(let t=0,n=e.length;t<n;t+=1){const i=e.charAt(t);r[i]=(r[i]||0)|1<<n-t-1}return r}class Hz{constructor(r,{location:t=bt.location,threshold:n=bt.threshold,distance:i=bt.distance,includeMatches:s=bt.includeMatches,findAllMatches:o=bt.findAllMatches,minMatchCharLength:a=bt.minMatchCharLength,isCaseSensitive:l=bt.isCaseSensitive,ignoreLocation:u=bt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?r:r.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(v,g)=>{this.chunks.push({pattern:v,alphabet:mge(v),startIndex:g})},h=this.pattern.length;if(h>Du){let v=0;const g=h%Du,b=h-g;for(;v<b;)d(this.pattern.substr(v,Du),v),v+=Du;if(g){const m=h-Du;d(this.pattern.substr(m),m)}}else d(this.pattern,0)}searchIn(r){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(r=r.toLowerCase()),this.pattern===r){let b={isMatch:!0,score:0};return n&&(b.indices=[[0,r.length-1]]),b}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let d=[],h=0,v=!1;this.chunks.forEach(({pattern:b,alphabet:m,startIndex:x})=>{const{isMatch:E,score:k,indices:$}=yge(r,b,m,{location:i+x,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});E&&(v=!0),h+=k,E&&$&&(d=[...d,...$])});let g={isMatch:v,score:v?h/this.chunks.length:1};return v&&n&&(g.indices=d),g}}class nu{constructor(r){this.pattern=r}static isMultiMatch(r){return MN(r,this.multiRegex)}static isSingleMatch(r){return MN(r,this.singleRegex)}search(){}}function MN(e,r){const t=e.match(r);return t?t[1]:null}class bge extends nu{constructor(r){super(r)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(r){const t=r===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class wge extends nu{constructor(r){super(r)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(r){const n=r.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,r.length-1]}}}class _ge extends nu{constructor(r){super(r)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(r){const t=r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class $ge extends nu{constructor(r){super(r)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(r){const t=!r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class xge extends nu{constructor(r){super(r)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(r){const t=r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[r.length-this.pattern.length,r.length-1]}}}class Ege extends nu{constructor(r){super(r)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(r){const t=!r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class Uz extends nu{constructor(r,{location:t=bt.location,threshold:n=bt.threshold,distance:i=bt.distance,includeMatches:s=bt.includeMatches,findAllMatches:o=bt.findAllMatches,minMatchCharLength:a=bt.minMatchCharLength,isCaseSensitive:l=bt.isCaseSensitive,ignoreLocation:u=bt.ignoreLocation}={}){super(r),this._bitapSearch=new Hz(r,{location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(r){return this._bitapSearch.searchIn(r)}}class Kz extends nu{constructor(r){super(r)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(r){let t=0,n;const i=[],s=this.pattern.length;for(;(n=r.indexOf(this.pattern,t))>-1;)t=n+s,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const OS=[bge,Kz,_ge,$ge,Ege,xge,wge,Uz],LN=OS.length,Sge=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,kge="|";function Tge(e,r={}){return e.split(kge).map(t=>{let n=t.trim().split(Sge).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<LN;){const d=OS[u];let h=d.isMultiMatch(a);h&&(i.push(new d(h,r)),l=!0)}if(!l)for(u=-1;++u<LN;){const d=OS[u];let h=d.isSingleMatch(a);if(h){i.push(new d(h,r));break}}}return i})}const Ige=new Set([Uz.type,Kz.type]);class Oge{constructor(r,{isCaseSensitive:t=bt.isCaseSensitive,includeMatches:n=bt.includeMatches,minMatchCharLength:i=bt.minMatchCharLength,ignoreLocation:s=bt.ignoreLocation,findAllMatches:o=bt.findAllMatches,location:a=bt.location,threshold:l=bt.threshold,distance:u=bt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?r:r.toLowerCase(),this.query=Tge(this.pattern,this.options)}static condition(r,t){return t.useExtendedSearch}searchIn(r){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;r=i?r:r.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const d=t[l];o.length=0,s=0;for(let h=0,v=d.length;h<v;h+=1){const g=d[h],{isMatch:b,indices:m,score:x}=g.search(r);if(b){if(s+=1,a+=x,n){const E=g.constructor.type;Ige.has(E)?o=[...o,...m]:o.push(m)}}else{a=0,s=0,o.length=0;break}}if(s){let h={isMatch:!0,score:a/s};return n&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const AS=[];function Age(...e){AS.push(...e)}function CS(e,r){for(let t=0,n=AS.length;t<n;t+=1){let i=AS[t];if(i.condition(e,r))return new i(e,r)}return new Hz(e,r)}const tb={AND:"$and",OR:"$or"},PS={PATH:"$path",PATTERN:"$val"},NS=e=>!!(e[tb.AND]||e[tb.OR]),Cge=e=>!!e[PS.PATH],Pge=e=>!Ia(e)&&Lz(e)&&!NS(e),FN=e=>({[tb.AND]:Object.keys(e).map(r=>({[r]:e[r]}))});function Wz(e,r,{auto:t=!0}={}){const n=i=>{let s=Object.keys(i);const o=Cge(i);if(!o&&s.length>1&&!NS(i))return n(FN(i));if(Pge(i)){const l=o?i[PS.PATH]:s[0],u=o?i[PS.PATTERN]:i[l];if(!Io(u))throw new Error(nge(l));const d={keyId:IS(l),pattern:u};return t&&(d.searcher=CS(u,r)),d}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];Ia(u)&&u.forEach(d=>{a.children.push(n(d))})}),a};return NS(e)||(e=FN(e)),n(e)}function Nge(e,{ignoreFieldNorm:r=bt.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(r?1:s))}),t.score=n})}function Rge(e,r){const t=e.matches;r.matches=[],Zi(t)&&t.forEach(n=>{if(!Zi(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),r.matches.push(o)})}function Dge(e,r){r.score=e.score}function Bge(e,r,{includeMatches:t=bt.includeMatches,includeScore:n=bt.includeScore}={}){const i=[];return t&&i.push(Rge),n&&i.push(Dge),e.map(s=>{const{idx:o}=s,a={item:r[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class Ud{constructor(r,t={},n){this.options={...bt,...t},this.options.useExtendedSearch,this._keyStore=new age(this.options.keys),this.setCollection(r,n)}setCollection(r,t){if(this._docs=r,t&&!(t instanceof n3))throw new Error(rge);this._myIndex=t||zz(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(r){Zi(r)&&(this._docs.push(r),this._myIndex.add(r))}remove(r=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];r(s,n)&&(this.removeAt(n),n-=1,i-=1,t.push(s))}return t}removeAt(r){this._docs.splice(r,1),this._myIndex.removeAt(r)}getIndex(){return this._myIndex}search(r,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=Io(r)?Io(this._docs[0])?this._searchStringList(r):this._searchObjectList(r):this._searchLogical(r);return Nge(l,{ignoreFieldNorm:a}),s&&l.sort(o),Mz(t)&&t>-1&&(l=l.slice(0,t)),Bge(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(r){const t=CS(r,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Zi(s))return;const{isMatch:l,score:u,indices:d}=t.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:d}]})}),i}_searchLogical(r){const t=Wz(r,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:h,searcher:v}=a,g=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:v});return g&&g.length?[{idx:u,item:l,matches:g}]:[]}const d=[];for(let h=0,v=a.children.length;h<v;h+=1){const g=a.children[h],b=n(g,l,u);if(b.length)d.push(...b);else if(a.operator===tb.AND)return[]}return d},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Zi(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:d})=>{s[l].matches.push(...d)}))}}),o}_searchObjectList(r){const t=CS(r,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Zi(o))return;let l=[];n.forEach((u,d)=>{l.push(...this._findMatches({key:u,value:o[d],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:r,value:t,searcher:n}){if(!Zi(t))return[];let i=[];if(Ia(t))t.forEach(({v:s,i:o,n:a})=>{if(!Zi(s))return;const{isMatch:l,score:u,indices:d}=n.searchIn(s);l&&i.push({score:u,key:r,value:s,idx:o,norm:a,indices:d})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&i.push({score:l,key:r,value:s,norm:o,indices:u})}return i}}Ud.version="6.6.2";Ud.createIndex=zz;Ud.parseIndex=vge;Ud.config=bt;Ud.parseQuery=Wz;Age(Oge);const Mge={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},jN=Ai(()=>{be.get("searchIndexUpdated").put(!0)},2e3),Vz={index:new Ud([],Mge),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),jN())},remove(e){this.keys.delete(e),this.index.remove(r=>r.key===e),jN()},search(e){return this.index.search(e)}};var sd,od;class Lge{constructor(){Z(this,"loaded",!1);yr(this,sd,[]);yr(this,od,!1);Z(this,"history",{});Z(this,"saveBulk",wd.throttle(()=>{if(Jr(this,od)){this.saveBulk();return}vs(this,od,!0);const r=Jr(this,sd);vs(this,sd,[]),rm.profiles.bulkPut(r).finally(()=>{vs(this,od,!1)})},500));Z(this,"subscriptions",new Map)}async init(){this.loaded=!0}validateProfile(r){return!!r}async fetchProfile(r){try{let t=`https://api.iris.to/profile/${r}`,{data:n}=await RN(t,async()=>{let i=await fetch(t);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);if(i&&i.status===200){let s=await i.json();return{res:i,data:s}}return{res:i,data:void 0}});return n}catch(t){console.log("There was a problem with the fetch operation: "+t.message)}}fetchProfiles(r,t){if(!r||r.length===0)return;const n=async i=>{const s=await this.fetchProfile(i);s&&ir.validateProfile(s)&&(nt.handle(s),t(s))};for(const i of r)n(i)}async loadProfiles(r){return await rm.profiles.where("key").anyOf(Array.from(r)).toArray()}async loadProfile(r){let t=await RN(`loadProfile${r}`,async()=>rm.profiles.get({key:r}));if(!(t!=null&&t.isDefault))return t}async getProfile(r){let t=await this.getProfiles([r]);return t==null?void 0:t[0]}async getProfiles(r){if(!r||r.length===0)return[];let t=[],n=[];for(const i of r){if(!i)continue;const s=te.toNostrHexAddress(i),o=Ue.profiles.get(Ke(s));o?t.push(o):n.push(s)}if(n.length>0){let i=new Set(n);console.timeStamp("Loading profiles from IndexedDB"),console.time("LoadDB");const s=await this.loadProfiles(i);if(s&&s.length>0){t=t.concat(s);for(const o of s)o&&i.delete(o.key)}console.timeEnd("LoadDB");for(const o of i){let a=this.createDefaultProfile(o);Ue.profiles.set(Ke(a.key),a),t.push(a)}for(const o of t)!o||!this.isProfileNewer(o)||this.addProfileToMemory(o)}return t}saveProfile(r){r!=null&&r.isDefault||(r==null?void 0:r.isDefault)==null||(Jr(this,sd).push(r),this.saveBulk())}async loadAllProfiles(){console.time("Loading profiles from DWoTRDB");const r=await rm.profiles.toArray();if(r){for(const t of r)this.addProfileToMemory(t);console.timeEnd("Loading profiles from DWoTRDB"),console.log("Loaded profiles from DWoTRDB - "+r.length+" profiles")}}sanitizeProfile(r,t){var g,b,m,x,E,k,$,S,T,O;if(!r)return this.createDefaultProfile(t);let n=r.name||r.username||r.display_name||r.displayName||r.nip05||r.lud16||r.lud06;n=((g=r.name)==null?void 0:g.trim().slice(0,100))||"";let i=(b=r.display_name||r.displayName)==null?void 0:b.trim().slice(0,200);i=(m=r.display_name)==null?void 0:m.trim().slice(0,200);let s=(x=r.about)==null?void 0:x.trim().slice(0,1e4),o=(E=r.picture)==null?void 0:E.trim().slice(0,4096),a=(k=r.banner)==null?void 0:k.trim().slice(0,4096),l=($=r.website)==null?void 0:$.trim().slice(0,4096),u=(S=r.nip05)==null?void 0:S.trim().slice(0,4096),d=(T=r.lud06)==null?void 0:T.trim().slice(0,4096),h=(O=r.lud16)==null?void 0:O.trim().slice(0,4096);return{...r,key:t,name:n,display_name:i,about:s,picture:o,banner:a,website:l,nip05:u,lud06:d,lud16:h,isDefault:!1}}createDefaultProfile(r){let t=new zve;return t.key=r,t.name=Zve(r),t.isDefault=!0,t}getDefaultProfile(r){if(!r)return;const t=Ue.profiles.get(r);return t||this.createDefaultProfile(Pr(r))}quickProfile(r){const t=Ke(r),n=Ue.profiles.get(t);return n||this.createDefaultProfile(Pr(t))}getMemoryProfile(r){const t=Ue.profiles.get(r);return t||this.createDefaultProfile(Pr(r))}isProfileNewer(r){if(!(r!=null&&r.key))return!1;const t=Ue.profiles.get(Ke(r.key));return!t||r.isDefault===!1&&r.created_at>t.created_at}addProfileToMemory(r){if(r)return Ue.profiles.set(Ke(r.key),r),Vz.add({key:r.key,name:r.name,display_name:r.display_name,followers:Ue.followersByUser.get(Ke(r.key))??new Set}),r}addProfileEvent(r){if(!(!r||!r.pubkey||!r.content))try{const t=JSON.parse(r.content);if(!t)return;t.created_at=r.created_at;let n=this.sanitizeProfile(t,r.pubkey);return this.saveProfile(n),this.addProfileToMemory(n)}catch(t){r.id&&Qu.db.events.delete(r.id),console.error(t);return}}createImageUrl(r,t=30,n=30){return`data:image/svg+xml;base64,${new Kve(r,{width:t,height:n,format:"svg"}).toString()}`}ensurePicture(r){return r.picture||(r.picture=this.createImageUrl(r.key)),r.picture}subscriptionCallback(r){let t=Ue.profiles.get(Ke(r.pubkey));ir.dispatchProfile(t)}subscribe(r){const t=te.toNostrHexAddress(r),n=Ke(t);let i=Ue.profiles.get(n);return(!i||i.isDefault)&&this.loadProfile(t).then(o=>{o?this.dispatchProfile(o):ir.fetchProfile(t).then(a=>{if(!a)return;let l=this.addProfileEvent(a);l&&this.dispatchProfile(l)})}),gt.subscribe({kinds:[0],authors:[t]},this.subscriptionCallback,!1)}dispatchProfile(r){r&&(this.isProfileNewer(r)&&this.addProfileToMemory(r),gc.dispatch(Ke(r.key),r))}}sd=new WeakMap,od=new WeakMap;const ir=new Lge;ir.init();const Ue={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,isFollowing:function(e,r){var i;const t=Ke(r),n=Ke(e);return!!((i=this.followedByUser.get(n))!=null&&i.has(t))},isBlocked:function(e){const r=Ke(e);return this.blockedUsers.has(r)},getFollowDistance:function(e){const r=Ke(e),t=this.followDistanceByUser.get(r);return t===void 0?1e3:t},setFollowed:function(e,r=!0){const t=te.getPubKey(),n=Ke(t);typeof e=="string"&&(e=[e]),e.forEach(o=>{o=te.toNostrHexAddress(o)||"";const a=Ke(o);r&&o&&o!==t?this.addFollower(a,n):this.removeFollower(a,n)});const i=Mt.findOne({kinds:[3],authors:[t]}),s={kind:3,content:(i==null?void 0:i.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(o=>["p",Pr(o)])};nt.publish(s)},setBlocked:function(e,r=!0){const t=Ke(e),n=Ke(te.getPubKey());r?(this.blockedUsers.add(t),this.removeFollower(t,n)):this.blockedUsers.delete(t)},addUserByFollowDistance(e,r){var t,n;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=gt.subscribe({authors:[Pr(r)],kinds:[0]},()=>i==null?void 0:i(),!0)}(t=this.usersByFollowDistance.get(e))==null||t.add(r);for(const i of this.usersByFollowDistance.keys())i>e&&((n=this.usersByFollowDistance.get(i))==null||n.delete(r))},addFollower:function(e,r){var n,i,s,o;if(typeof e!="number"||typeof r!="number")throw new Error("Invalid user id");this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(n=this.followersByUser.get(e))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set);const t=Ke(te.getPubKey());if(e!==t){let a;if(r===t)a=1,this.addUserByFollowDistance(a,e),this.followDistanceByUser.set(e,a);else{const l=this.followDistanceByUser.get(e),u=this.followDistanceByUser.get(r);a=u&&u+1,(l===void 0||a<l)&&(this.followDistanceByUser.set(e,a),this.addUserByFollowDistance(a,e))}}(i=this.followedByUser.get(r))==null||i.add(e),e===t&&((s=this.followersByUser.get(e))==null?void 0:s.size)===1&&be.get("hasNostrFollowers").put(!0),(o=this.followedByUser.get(t))!=null&&o.has(r)&&(gt.subscribedAuthors.has(Pr(e))||setTimeout(()=>{gt.subscribe({authors:[Pr(e)]},void 0,!0)},0))},removeFollower:function(e,r){var i,s,o;if((i=this.followersByUser.get(e))==null||i.delete(r),(s=this.followedByUser.get(r))==null||s.delete(e),e===Ke(te.getPubKey()))return;let t=1/0;for(const a of this.followersByUser.get(e)||[]){const l=this.followDistanceByUser.get(a);l!==void 0&&l+1<t&&(t=l+1)}t===1/0?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,t),(this.blockedUsers.has(e)||((o=this.followersByUser.get(e))==null?void 0:o.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),gt.subscribedAuthors.delete(Pr(e)))},followerCount:function(e){var t;const r=Ke(e);return((t=this.followersByUser.get(r))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var i;let r=0;const t=Ke(te.getPubKey()),n=Ke(e);for(const s of this.followersByUser.get(n)??[])(i=this.followedByUser.get(t))!=null&&i.has(s)&&r++;return r},block:async function(e,r){r?this.blockedUsers.add(Ke(e)):this.blockedUsers.delete(Ke(e));let t=JSON.stringify(Array.from(this.blockedUsers));t=await te.encrypt(t),nt.publish({kind:16462,content:t})},flag:function(e,r){r?this.flaggedUsers.add(Ke(e)):this.flaggedUsers.delete(Ke(e)),nt.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.blockedUsers)n.add(Pr(i));e(n)}};r();const t=te.getPubKey();return gt.subscribe({kinds:[16462],authors:[t]},r)},getFlaggedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.flaggedUsers)n.add(Pr(i));e(n)}};r();const t=te.getPubKey();return gt.subscribe({kinds:[16463],authors:[t]},r)},getFollowedByUser:function(e,r,t=!1){const n=Ke(e),i=()=>{if(r){const s=new Set;for(const o of this.followedByUser.get(n)||[])s.add(Pr(o));t&&s.add(e),r(s)}};return(this.followedByUser.has(n)||t)&&i(),gt.subscribe({kinds:[3],authors:[e]},i)},getFollowersByUser:function(e,r){const t=Ke(e),n=()=>{if(r){const i=new Set;for(const s of this.followersByUser.get(t)||[])i.add(Pr(s));r(i)}};return this.followersByUser.has(t)&&n(),gt.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,r,t=!1){const n=Ke(e),i=Pr(n),s=()=>{r==null||r(this.profiles.get(n),e)},o=this.profiles.get(n);return o?(s(),t&&o.nip05&&!o.nip05valid&&te.verifyNip05Address(o.nip05,e).then(a=>{console.log("NIP05 address is valid?",a,o.nip05,e),o.nip05valid=a,ir.dispatchProfile(o),s()})):ir.loadProfile(i).then(a=>{a?(ir.dispatchProfile(a),s()):ir.fetchProfile(i).then(l=>{l&&(nt.handle(l),s())})}),gt.subscribe({kinds:[0],authors:[e]},s,!1)},setMetadata(e){const r={kind:0,content:JSON.stringify(e)};nt.publish(r)}},zN=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],HN=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function UN(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function Fge(e){if(!e)throw new Error("No seed provided");const r=hi(e),t=HN[r[0]%HN.length],n=zN[r[1]%zN.length];return`${UN(t)} ${UN(n)}`}var jge=0;function p(e,r,t,n,i,s){var o,a,l={};for(a in r)a=="ref"?o=r[a]:l[a]=r[a];var u={type:e,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--jge,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return Le.vnode&&Le.vnode(u),u}const qz=(e,r)=>{let t;const n=Ue.getProfile(r,i=>{t=i.name});setTimeout(()=>{t=t||Fge(te.toNostrBech32Address(r,"npub")||""),be.get("groups").get(Gz(e)).put({name:t}),n()},1e3)},Gz=e=>{const r=hi(e);return Array.from(r,t=>t.toString(16).padStart(2,"0")).join("").slice(0,12)},P1=(e,r=!0,t=null,n=void 0)=>{const i=Gz(e),s=be.get("groups").get(i).put({key:e,inviter:t,name:n});return r&&s.then(()=>qt(`/chat/${i}`)),i},Yz=(e,r=void 0)=>{if(e.indexOf("#")>-1&&(e=e.split("#")[1]),e.startsWith("nsec")){const t=te.toNostrHexAddress(e);t&&P1(t,!0,void 0,r)}},Zz=(e=void 0)=>{const r=dO();return[P1(r,!0,void 0,e),r]},zge=async e=>{const r=Zz()[1],t=te.toNostrBech32Address(r,"nsec"),n=dO(),i=4,s=Math.floor(Date.now()/1e3),o=`This is an invitation to a secret chat. Use ${t} or go to https://iris.to/chat/#${t}`;let a={kind:i,created_at:s,pubkey:te.getPubKey(),tags:[["p",e]],content:o};a=await nt.sign(a);const l=await fc.encrypt(n,e,`${o}

${JSON.stringify(a)}`),u={kind:i,created_at:s,pubkey:dc(n),tags:[["p",e]],content:l};u.id=Ul(u),u.sig=xF(u,n),nt.publish(u),be.get("chatInvites").get(e).put({priv:r}),qz(r,e)};function Hge(){const[e,r]=ve(""),[t,n]=ve(""),i=o=>{r(o.target.value),Yz(o.target.value,t)};return p("div",{className:"flex flex-1 flex-col items-center justify-center h-full",children:[p("div",{className:"flex flex-row gap-2",children:[p("input",{type:"text",className:"input rounded-full input-bordered",placeholder:"Group name",onChange:o=>{n(o.target.value)}}),p("button",{className:"btn btn-primary",onClick:()=>Zz(t),children:ne("start_new_group")})]}),p("div",{className:"my-4",children:ne("or")}),p("div",{className:"my-4 flex gap-2 justify-center items-center",children:p("input",{placeholder:"Paste nsec or chat link",type:"password",id:"pasteLink",className:"text-center input input-bordered rounded-full p-2",onChange:i,value:e})})]})}class Uge{constructor(){Z(this,"_data",new Map)}upsert(r,t){var s;const n=this._data.get(r),i=(n==null?void 0:n.relays)||new Set;return(s=t.relays)==null||s.forEach(o=>i.add(this._normalizeURL(o))),this._data.set(r,{relays:i}),this}get(r){if(r)return this._data.get(r)}getRelays(r){var t;return r?Array.from(((t=this.get(r))==null?void 0:t.relays)||[]):[]}_normalizeURL(r){return r.trim().replace(/\/$/,"")}}const r1=class r1{constructor(r,t=!0){Z(this,"events");Z(this,"eventIdSet");Z(this,"maxSize");Z(this,"descending");Z(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=r,this.descending=t,this.subscriptions=new Map}get size(){return this.events.length}first(){var r;return(r=this.events[0])==null?void 0:r.id}has(r){return this.eventIdSet.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(r.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:r.id,created_at:r.created_at});else if(r.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:r.id,created_at:r.created_at},this.eventIdSet.add(r.id);else return!1;return this.eventIdSet.add(r.id),this.events.sort((t,n)=>this.descending?n.created_at-t.created_at:t.created_at-n.created_at),this.subscriptions.forEach(t=>t(this.eventIds)),!0}delete(r){if(!this.eventIdSet.delete(r))return!1;const n=this.events.findIndex(i=>i.id===r);return n===-1?!1:(this.events.splice(n,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(r=>r.id)}values(){return this.events.map(r=>r.id)}subscribe(r){const t=r1.subscriptionId++;return this.subscriptions.set(t,r),r(this.eventIds),()=>this.subscriptions.delete(t)}};Z(r1,"subscriptionId",0);let mp=r1;const Kge=Date.now()/1e3,Wge=500,Vge=1e3;let rp;be.get("mutedNotes").on(e=>{rp=e});const RS={maxFollowDistance:3,minFollowersAtMaxDistance:5};let np=RS;be.get("globalFilter").on(e=>{np=e});let Xz={};be.get("dev").on(e=>{Xz=e});const wl={DEFAULT_GLOBAL_FILTER:RS,getEventHash:Ul,eventsMetaDb:new Uge,seen:new Set,deletedEvents:new Set,latestNotificationByTargetAndKind:new Map,notifications:new mp(Wge),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new mp(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s;Mt.get(e.id)||Mt.insert(e);const t=VE(e),n=!t&&FF(e),i=te.getPubKey();if(n&&!t){const o=e.tags.filter(a=>a[0]==="e").map(a=>a[1]).slice(0,2);for(const a of o)e.created_at>Kge||e.pubkey===i||Ue.isFollowing(i,e.pubkey),this.threadRepliesByMessageId.has(a)||this.threadRepliesByMessageId.set(a,new Set),(s=this.threadRepliesByMessageId.get(a))==null||s.add(e.id)}},handleRepost(e){var t,n;const r=wO(e);r&&(this.repostsByMessageId.has(r)||this.repostsByMessageId.set(r,new Set),(t=this.repostsByMessageId.get(r))!=null&&t.has(e.pubkey)||((n=this.repostsByMessageId.get(r))==null||n.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var t;const r=the(e);r&&(this.likesByMessageId.has(r)||this.likesByMessageId.set(r,new Set),(t=this.likesByMessageId.get(r))==null||t.add(e.pubkey),Mt.insert(e))},handleFollow(e){var n,i,s,o;const r=Mt.findOne({kinds:[3],authors:[e.pubkey]});if(r&&r.created_at>=e.created_at)return;r&&Mt.findAndRemove({kinds:[3],authors:[e.pubkey]}),Mt.insert(e);const t=te.getPubKey();if(e.tags){for(const a of e.tags)if(Array.isArray(a)&&a[0]==="p"){const l=a[1];l.length===64&&/^[0-9a-f]+$/.test(l)&&Ue.addFollower(Ke(a[1]),Ke(e.pubkey))}}if(Ue.followedByUser.has(Ke(e.pubkey)))for(const a of Ue.followedByUser.get(Ke(e.pubkey))||[])(!e.tags||!((n=e.tags)!=null&&n.find(l=>l[0]==="p"&&l[1]===Pr(a))))&&Ue.removeFollower(a,Ke(e.pubkey));if(e.pubkey===t&&((i=e.tags)!=null&&i.length)&&(((s=Ue.followedByUser.get(Ke(t)))==null?void 0:s.size)||0)>10&&be.get("showFollowSuggestions").put(!1),e.pubkey===t&&((o=e.content)!=null&&o.length))try{const a=JSON.parse(e.content),l=Object.keys(a);if(l.length){console.log("setting relays from your contacs list",l);for(const u of Ir.relays.keys())l.includes(u)||Ir.remove(u);for(const u of l)Ir.add(u)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var t;if((((t=this.myBlockEvent)==null?void 0:t.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const r=te.getPubKey();if(e.pubkey===r){let n;try{n=await te.decrypt(e.content);const i=JSON.parse(n).map(Ke);Ue.blockedUsers=new Set(i)}catch{console.log("failed to parse your block list",n,e)}}},handleFlagList(e){var t;if((((t=this.myFlagEvent)==null?void 0:t.created_at)||0)>e.created_at)return;const r=te.getPubKey();if(e.pubkey===r)try{const n=JSON.parse(e.content).map(Ke);Ue.flaggedUsers=new Set(n)}catch{console.log("failed to parse your flagged users list",e)}},handleMetadata(e){var r;if(!((r=e.content)!=null&&r.length))return!1;try{if(ir.addProfileEvent(e))return!0}catch(t){console.log("error parsing nostr profile",t,e)}return!1},handleDelete(e){var n,i;const r=(i=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:i[1],t=te.getPubKey();if(r){const s=Mt.get(r);s&&[e.pubkey,t].includes(s.pubkey)&&Mt.remove(r)}},handleZap(e){var t,n,i;Mt.insert(e);const r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.zapsByNote.has(r)||this.zapsByNote.set(r,new mp(Vge)),(i=this.zapsByNote.get(r))==null||i.add(e))},async saveDMToLocalState(e,r){const t=r.get("latest"),n=await t.once();(!n||!n.created_at||n.created_at<e.created_at)&&t.put({id:e.id,created_at:e.created_at,text:e.text})},async handleDirectMessage(e){var i,s,o,a,l,u;const r=te.getPubKey();let t,n=!1;if(e.pubkey===r)t=((s=(i=e.tags)==null?void 0:i.find(d=>d[0]==="p"))==null?void 0:s[1])||t;else if(t=e.pubkey,!((o=e.tags)==null?void 0:o.some(h=>h[0]==="p"&&h[1]===r))&&(n=((a=e.tags)==null?void 0:a.length)===1&&((l=e.tags)==null?void 0:l.some(h=>h[0]==="p"&&h[1]===e.pubkey)),!n))return;try{const d=await te.decrypt(e.content,e.pubkey);d&&(e.text=d,this.decryptedMessages.set(e.id,d));const h=JSON.parse(d.slice(d.indexOf("{")));if(Lp(h)&&dd(h)){const v=(u=h.content.match(/nsec1[023456789acdefghjklmnpqrstuvwxyz]{6,}/gi))==null?void 0:u[0];if(v){const g=te.toNostrHexAddress(v);if(g){P1(g,!1,h.pubkey),qz(g,h.pubkey),be.get("chatInvites").get(h.pubkey).put({priv:g});return}}}}catch{}Mt.insert(e),n||this.saveDMToLocalState(e,be.get("chats").get(t))},getEventFromText(e){try{const r=e.slice(e.indexOf("{")),t=JSON.parse(r);if(Lp(t)&&dd(t))return t}catch{}},subscribeGroups(){be.get("groups").map((e,r)=>{if(e.key){const t=dc(e.key);t&&gt.subscribe({authors:[t],kinds:[4],"#p":[t]},async n=>{const i=await fc.decrypt(e.key,t,n.content),s=this.getEventFromText(i);s&&s.tags.length===1&&s.tags[0][0]==="p"&&s.tags[0][1]===t&&(s.text=s.content,this.saveDMToLocalState(s,be.get("groups").get(r)))})}})},handleKeyValue(e){var t,n;if(e.pubkey!==te.getPubKey())return;const r=(n=(t=e.tags)==null?void 0:t.find(i=>i[0]==="d"))==null?void 0:n[1];if(r){const i=this.keyValueEvents.get(r);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(r,e)}},acceptEvent(e){var r,t,n;if(np.maxFollowDistance&&te.getPubKey()){if(e.kind===4)return!0;if(!gt.subscribedAuthors.has(e.pubkey)&&!gt.subscribedEventIds.has(e.id)){if(!e.pubkey)return console.log("what",e),!1;if(fd.has(e.pubkey)&&Ue.getFollowDistance(e.pubkey)){const i=Ue.followDistanceByUser.get(Ke(e.pubkey));if(i&&i>np.maxFollowDistance||i===np.maxFollowDistance&&(((r=Ue.followersByUser.get(Ke(e.pubkey)))==null?void 0:r.size)||0)<(np.minFollowersAtMaxDistance||RS.minFollowersAtMaxDistance))return!1}else{const i=((t=wl.likesByMessageId.get(e.id))==null?void 0:t.size)||0,s=((n=wl.repostsByMessageId.get(e.id))==null?void 0:n.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}}}return!0},handle(e,r=!1,t=!0,n=2){if(!e||!r&&this.seen.has(e.id))return!1;if(!r&&!this.acceptEvent(e))return n&&setTimeout(()=>{this.handle(e,r,t,n-1)},3e3),!1;if(Ue.isBlocked(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&Mt.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,gt.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),VE(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:{const i=Mt.findOne({kinds:[3],authors:[e.pubkey]});if(i&&i.created_at>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break}case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(t&&Xz.indexedDbSave!==!1){const i=Ue.getFollowDistance(e.pubkey);(i<=1||[2,3].includes(i)&&e.tags.some(s=>s[0]==="p"&&s[1]===te.getPubKey())||i<=4&&[0,3,4].includes(e.kind))&&Qu.saveEvent(e)}return gt.handle(e),!0},handleEventMetadata({url:e,event:r}){const t=LF(r);t&&this.eventsMetaDb.upsert(t,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),r=e&&Mt.get(e);r&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(r.id),this.handle(r,!0),this.handleNextFutureEvent()},(r.created_at-Date.now()/1e3)*1e3))},isMuted(e){let r=!1;if(rp&&(r=rp[e.id],!r)){for(const t of e.tags)if(t[0]==="e"&&rp[t[1]]&&(r=rp[t[1]],r))return!0}return r},maybeAddNotification(e){var t,n;if(((t=e.tags)==null?void 0:t.filter(i=>i[0]==="p").length)>10)return;const r=te.getPubKey();if(e.pubkey!==r&&((n=e.tags)!=null&&n.some(i=>i[0]==="p"&&i[1]===r))){if(e.kind===3){const i=Ue.followedByUser.get(Ke(e.pubkey));if(!i||i.has(Ke(r)))return}if(!this.isMuted(e)){Mt.insert(e);const i=jF(e)||Da(e)||e.id,s=`${e.kind}-${i}`,o=this.latestNotificationByTargetAndKind.get(s),a=o&&Mt.get(o);(!a||a.created_at<e.created_at)&&(o&&this.notifications.delete(o),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:tu(()=>{if(!wl.notificationsSeenTime)return;let e=0;for(const r of wl.notifications.eventIds){const t=Mt.get(r);if(t&&t.created_at>wl.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",wl.notificationsSeenTime,"count",e),be.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var t;if(e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");gt.publish(e),console.log("publishing event",e),this.handle(e,!0);const r=(t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").reverse().slice(0,10);for(const n of r||[]){const i=Mt.get(n[1]);i&&gt.publish(i)}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=te.getPubKey(),e.id=Ul(e),e.sig=await te.sign(e),e},getLikes(e,r){const t=()=>{r==null||r(this.likesByMessageId.get(e)??new Set)};return t(),gt.subscribe({"#e":[e],kinds:[7]},t,!1)},getThreadRepliesCount(e,r){const t=()=>{var n;r==null||r(((n=this.threadRepliesByMessageId.get(e))==null?void 0:n.size)??0)};return t(),gt.subscribe({"#e":[e],kinds:[1]},t,!1)},getReposts(e,r){const t=()=>{r==null||r(this.repostsByMessageId.get(e)??new Set)};return t(),gt.subscribe({"#e":[e],kinds:[1,6]},t,!1)},getZaps(e,r){const t=()=>{r==null||r(this.zapsByNote.get(e)??new Set)};return t(),gt.subscribe({"#e":[e],kinds:[9735]},t,!1)},getEventById(e,r=!1,t){let n=!1;const i=o=>{n||(n=!0,t==null||t(o))},s=Mt.get(e);if(s){i(s);return}if(r){const o=setTimeout(()=>{gt.subscribe({ids:[e]},a=>i(a))},300);fetch(`https://api.iris.to/event/${e}`).then(a=>{a.status===200&&a.json().then(l=>{l&&l.id===e&&(clearTimeout(o),wl.handle(l,!0),i(l))})})}else gt.subscribe({ids:[e]},i,!1)}},nt=wl,te={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:dc,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,r=!1){const t=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),t&&location.reload(),be.get("loggedIn").put(!0),r&&setTimeout(()=>{qt("/following")}),be.get("showLoginModal").put(!1)},generateKey(){const e=dO();return{priv:e,rpub:dc(e)}},getOrCreate(e){let r=localStorage.getItem("iris.myKey");return r||(r=localStorage.getItem("chatKeyPair")),r?(this.key=JSON.parse(r),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),be.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),be.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return((e=this.key)==null?void 0:e.rpub)||""},getPrivKey(){var e;return((e=this.key)==null?void 0:e.priv)||""},encrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?fc.encrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"encrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},decrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?fc.decrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"decrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},sign:async function(e){const r=this.getPrivKey();return r?xF(e,r):window.nostr?new Promise(t=>{this.processWindowNostr({op:"sign",data:e,callback:t})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:r,pub:t,callback:n}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(t,r),n):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(t,r),n):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(r),s=>n(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,r){return e.then(t=>{r(t)}).catch(t=>{console.error(t),r(null)})},async decryptMessage(e,r){var n,i;const t=nt.decryptedMessages.get(e.id);if(t){r(t);return}try{const s=this.getPubKey(),o=e.pubkey===s?(i=(n=e.tags)==null?void 0:n.find(l=>l[0]==="p"))==null?void 0:i[1]:e.pubkey;if(!(e&&o))return;let a=await this.decrypt(e.content,o);a!=null&&a.content&&(a=a.content),nt.decryptedMessages.set(e.id,a),r(a)}catch(s){console.error(s)}},async getPubKeyByNip05Address(e){try{const[r,t]=e.split("@"),n=`https://${t}/.well-known/nostr.json?name=${r}`;return(await(await fetch(n)).json()).names[r]||null}catch(r){return console.error(r),null}},async verifyNip05Address(e,r){try{const[t,n]=e.split("@"),i=`https://${n}/.well-known/nostr.json?name=${t}`,a=(await(await fetch(i)).json()).names;return a[t]===r||a[t.toLowerCase()]===r}catch{return!1}},toNostrBech32Address:function(e,r){if(!e)return null;if(!r)throw new Error("prefix is required");try{const n=NE(e);return r!==n.prefix?null:H4(r,n.data)}catch{}const t=e.match(/^[0-9a-fA-F]{64}$/);if(t!==null){const n=t[0].match(/.{1,2}/g);if(n!==null){const i=new Uint8Array(n.map(s=>parseInt(s,16)));return H4(r,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:r}=NE(e);return sr.arrayToHex(r)}catch{}return null}},eo={video:p("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:p("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),magnifyingGlassBold:({width:e})=>p("svg",{fill:"none",width:e,viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",className:"w-6 h-6",children:p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),close:p("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:p("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:p("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[p("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),p("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:p("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[p("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),p("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),p("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),newFollower:p("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:p("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:p("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),search:p("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:p("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:p("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),network:p("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:p("g",{children:[p("g",{children:[p("g",{children:p("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),p("g",{children:p("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),p("g",{children:p("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),p("g",{children:p("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),p("g",{children:p("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),p("g",{children:p("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),checkmark:p("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:p("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})}),quickZap:p("svg",{width:"18",height:"18",viewBox:"0 0 23 20",fill:"none",children:p("path",{d:"M8 15.5H2.5M5.5 10H1M8 4.5H3M16 1L9.40357 10.235C9.1116 10.6438 8.96562 10.8481 8.97194 11.0185C8.97744 11.1669 9.04858 11.3051 9.1661 11.3958C9.30108 11.5 9.55224 11.5 10.0546 11.5H15L14 19L20.5964 9.76499C20.8884 9.35624 21.0344 9.15187 21.0281 8.98147C21.0226 8.83312 20.9514 8.69489 20.8339 8.60418C20.6989 8.5 20.4478 8.5 19.9454 8.5H15L16 1Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})},je=e=>e.when?e.children:null;class yn extends Cp{constructor(){super(...arguments);Z(this,"unmounted");Z(this,"unsubscribes",{})}sub(t,n){return(s,o,a,l)=>{if(this.unmounted){a==null||a();return}this.unsubscribes[n??o]=a,t(s,o,a,l)}}inject(t,n){return this.sub((i,s)=>{const o={};o[t??s]=i,this.setState(o)},n)}unsubscribe(){Object.keys(this.unsubscribes).forEach(t=>{const n=this.unsubscribes[t];n==null||n(),delete this.unsubscribes[t]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}const qge=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],Jz=e=>qge.some(r=>e.startsWith(r)),Mo=e=>{let r=e.onError,t=e.src,n=!1;if(e.src&&!e.src.startsWith("data:image")&&(!Jz(e.src)||e.width)){const o=e.src;if(e.width){const l=e.width*2;t=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${l}:${l}/plain/${o}`}else t=`https://imgproxy.iris.to/insecure/plain/${o}`;const a=e.onError;r=()=>{n?(console.log("original source failed too",o),a&&a()):(console.log("image proxy failed",t,"trying original source",o),n=!0,s(o))}}const[i,s]=ve(t);return p("img",{src:i,onError:r,onClick:e.onClick,className:e.className,style:e.style,width:e.width,height:e.width,alt:e.alt})};class Wn extends yn{constructor(){super(...arguments);Z(this,"activityTimeout");Z(this,"unsub");Z(this,"handleEvent")}componentDidMount(){const t=this.props.str;if(!t)return;let n=Ke(t);this.handleEvent=s=>{let o=s.detail,a=this.state.created_at||0;!o||o.id!=n||o.created_at<=a||this.setState({picture:o.picture,name:o.name,created_at:o.created_at})},gc.add(this.handleEvent);let i=ir.getMemoryProfile(n);this.setState({picture:i.picture,name:i.name,avatar:ir.createImageUrl(t,this.props.width)}),this.unsub=ir.subscribe(t),this.setState({activity:null})}componentWillUnmount(){var n;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout),this.props.str&&(gc.remove(this.handleEvent),(n=this.unsub)==null||n.call(this))}render(){const t=this.props.width,n=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!Ue.isBlocked(this.props.str),s=i?"has-picture":"",o=this.props.showTooltip?"tooltip":"";return p("div",{style:{maxWidth:`${t}px`,maxHeight:`${t}px`,cursor:this.props.onClick?"pointer":void 0},className:`inline-flex flex-col flex-shrink-0 items-center justify-center relative select-none ${s} ${o} ${n}`,onClick:this.props.onClick,children:[p("div",{children:[p(je,{when:i,children:p(Mo,{className:"object-cover rounded-full",src:this.state.picture,width:t,square:!0,onError:()=>this.setState({hasError:!0})})}),p(je,{when:!i,children:p("img",{width:t,className:"max-w-full rounded-full",src:this.state.avatar||""})})]}),p(je,{when:this.props.showTooltip&&this.state.name,children:p("span",{className:"tooltiptext",children:this.state.name})})]})}}const Gge=[{url:"/",icon:h9,activeIcon:f9},{url:"/chat",icon:KI,activeIcon:VI},{url:"/post/new",icon:Cie,activeIcon:ase},{url:"/search",icon:v9,activeIcon:eo.magnifyingGlassBold}],Yge=()=>{const[e,r]=ve(!1),[t,n]=ve("/"),[i,s]=ve(null);Ge(()=>{be.get("isMyProfile").on(u=>r(u)),be.get("activeRoute").on(u=>{const d=u.replace("/chat/new","").replace("/chat/",""),h=d.length<u.length?d:null;n(u),s(h)})},[]);const o=u=>{u&&window.scrollTo({top:0})},a=(u,d,h)=>{const v=new RegExp(`^${u}(/|$)`).test(t);return p(wt,{href:u,className:`btn flex-grow ${v?"active":""}`,onClick:()=>o(v),children:[p(je,{when:v,children:p(h,{width:24})}),p(je,{when:!v,children:p(d,{width:24})})]})},l=te.toNostrBech32Address(te.getPubKey(),"npub");return p(je,{when:l&&!i,children:p("footer",{className:"fixed md:hidden bottom-0 z-10 w-full bg-base-200 pb-safe-area",children:p("div",{className:"flex",children:[Gge.map(u=>a(u.url,u.icon,u.activeIcon)),p(wt,{href:`/${l}`,onClick:()=>o(e),className:"rounded-full btn flex flex-grow",children:p("span",{className:`${e?"border-white":"border-black"} flex rounded-full border-2`,children:p(Wn,{str:l,width:28})})})]})})})};function Zge(e){const r=te.getPubKey(),t=te.toNostrHexAddress(e.pub);if(t===r)return p("span",{class:"mx-2 text-iris-blue tooltip","data-tip":ne("you"),children:eo.checkmark});if(!t)return null;if(Ue.isFollowing(r,t))return p("span",{class:"ml-2 text-iris-blue tooltip","data-tip":ne("following"),children:eo.checkmark});{const i=Ue.followedByFriendsCount(t);if(i>0){const s=i>10?"text-iris-orange":"";return p("span",{class:`${s} tooltip ml-2`,"data-tip":`${i} ${ne("friends_following")}`,children:eo.checkmark})}else return null}}const zs=2;class DS{constructor(){Z(this,"trusts",Array(zs+1).fill(0));Z(this,"distrusts",Array(zs+1).fill(0))}addValue(r,t){r>0&&this.trusts[t]++,r<0&&this.distrusts[t]++}count(r){return this.trusts[r]+this.distrusts[r]}value(r){return this.trusts[r]-this.distrusts[r]}values(){let r=Array(zs+1).fill(0);for(let t=0;t<=zs;t++)r[t]=this.value(t);return r}isDirectTrusted(){return this.isTrusted(0)}isTrusted(r){return this.value(r)>0}isDirectDistrusted(){return this.isDistrusted(0)}isDistrusted(r){return this.value(r)<0}resolve(){let r={val:0,degree:0,count:0,hasScore:!1},t=0;for(;t<=zs;t++)if(!(this.trusts[t]==0&&this.distrusts[t]==0)&&(r.hasScore=!0,this.value(t)!=0)){r.val=this.value(t);break}return r.count=this.count(t),r.degree=t,r}clone(){const r=Object.create(Object.getPrototypeOf(this));return r.trusts=this.trusts.slice(),r.distrusts=this.distrusts.slice(),r}equals(r){for(let t=0;t<=zs;t++)if(this.trusts[t]!=r.trusts[t]||this.distrusts[t]!=r.distrusts[t])return!1;return!0}hasTrustScore(){return this.trusts.some(r=>r>0)}hasDistrustScore(){return this.distrusts.some(r=>r>0)}renderTrustCount(r=!1){return!this.hasTrustScore()&&!r?"":this.trusts.join("/")}renderDistrustCount(r=!1){return!this.hasDistrustScore()&&!r?"":this.distrusts.join("/")}}var Is=(e=>(e[e.Key=1]="Key",e[e.Item=2]="Item",e[e.Unknown=3]="Unknown",e))(Is||{});const rb=99;class i3{constructor(r,t=rb){Z(this,"id",0);Z(this,"out",Object.create(null));Z(this,"in",Object.create(null));Z(this,"degree",rb);Z(this,"entityType",1);Z(this,"timestamp",0);Z(this,"subscribed",0);Z(this,"score",new DS);Z(this,"profile");this.id=r,this.degree=t}}let Qz=class{constructor(){Z(this,"key","");Z(this,"type",1);Z(this,"val");Z(this,"entityType",1);Z(this,"context","");Z(this,"note","");Z(this,"timestamp",0)}};class Xge extends Qz{constructor(){super(...arguments);Z(this,"from","");Z(this,"to","")}}let eH=class tH extends Qz{constructor(){super(...arguments);Z(this,"out");Z(this,"in");Z(this,"partial",!0)}static partialFrom(t){let n=new tH;return n.key=t.key,n.entityType=t.entityType,n.type=t.type,n.val=t.val,n.timestamp=t.timestamp,n.partial=!0,n}static key(t,n,i,s){let o=`${t}|${n}|${i}|${s}`;return Gve(o)}fill(t){this.val=t.val,this.context=t.context,this.note=t.note,this.timestamp=t.timestamp,this.partial=!1}};class Jge{constructor(){Z(this,"vertices",{});Z(this,"edges",{})}addVertice(r){return this.vertices[r]||(this.vertices[r]=new i3(r))}addEdge(r,t=!1){let n=this.edges[r.key];return n||(n=eH.partialFrom(r),this.edges[r.key]=n,n.out=this.addVertice(Ke(r.from)),n.in=this.addVertice(Ke(r.to)),n.out.out[n.in.id]=n,n.in.in[n.out.id]=n),t?n.fill(r):(n.val=r.val,n.timestamp=r.timestamp),n!=null&&n.out&&n.out.timestamp<n.timestamp&&(n.out.timestamp=n.timestamp),n!=null&&n.in&&n.in.timestamp<n.timestamp&&(n.in.timestamp=n.timestamp),n}removeEdge(r){const t=r.out,n=r.in;t&&delete t.out[n.id],n&&delete n.in[t.id],delete this.edges[r.key]}getVertice(r){const t=this.getVerticeId(r);if(t!=null)return this.vertices[t]}getEdge(r){return this.edges[r]}getVerticeId(r){return r?Ke(r):void 0}calculateScore(r,t){let n=[],i=Object.create(null),s=this.vertices[r];if(!s)return;this.resetScore();let o=s.degree=0;for(n.push(s);n.length>0&&o<=t;){for(let a of n){if(o>0&&!a.score.isTrusted(o-1))continue;let l=o+1;for(const u in a.out){const d=this.vertices[u],h=a.out[u];!h||h.val===0||(d.score.addValue(h.val,o),!(o>=d.degree)&&(d.degree=l,d.entityType=h.entityType,o<t&&d.entityType===1&&!i[u]&&(i[u]=d)))}}n=Object.values(i),i=Object.create(null),o++}}calculateItemScore(r){let t=this.vertices[r];t.score=new DS;let n=rb;for(const i in t.in){const s=this.vertices[i],o=t.in[i];!o||o.val==0||(s.degree<n&&(n=s.degree),t.score.addValue(o.val,s.degree))}t.degree=n+1}resetScore(){for(let r in this.vertices){const t=this.vertices[r];t.score=new DS,t.degree=rb}}wotNetwork(r,t=zs+1){let n=[];for(const i in this.vertices){const s=this.vertices[i];s.degree<=t&&s.degree>0&&(!r||s.entityType===r)&&n.push(s)}return n}inOutTrustById(r,t,n){const i=this.vertices[r];if(!i)return[];let s=Object.create(null);for(const o in i.in){const a=this.vertices[o];if(!a||a.degree>zs)continue;const l=i.in[o];!l||l.val==0||n&&l.val!=n||(s[o]=a)}for(const o in i.out){const a=i.out[o];if(!a||a.val==0||n&&a.val!=n)continue;const l=this.vertices[o];(!t||l.entityType===t)&&(s[o]=l)}return Object.values(s)}outTrustById(r,t,n){let i=[];const s=this.vertices[r];for(const o in s.out){const a=this.vertices[o],l=s.out[o];!l||l.val==0||n&&l.val!=n||(!t||a.entityType===t)&&i.push(a)}return i}trustedBy(r,t,n,i=zs){let s=[];const o=this.vertices[r];for(const a in o.in){const l=this.vertices[a];if(!l||l.degree>i)continue;const u=o.in[a];!u||u.val==0||n&&u.val!=n||(!t||l.entityType===t)&&s.push(l)}return s}getPaths(r){let t=[];const n=this.vertices[r];if(!n)return t;let i=[],s=[];for(i.push(n);i.length>0;){for(let o of i)if(o.degree!=0)for(const a in o.in){const l=o.in[a];if(!l||l.val===0)continue;const u=l.out;!u||u.degree>=o.degree||(t.push(l),s.push(u))}i=s,s=[]}return t}getUnsubscribedVertices(r){let t=new Array;for(const n in this.vertices){const i=this.vertices[n];i.degree<=r&&i.subscribed==0&&i.entityType==1&&(i.degree==0||i.score.isTrusted(i.degree-1))&&t.push(i)}return t}}const G$=32010;class Qge{constructor(){Z(this,"unsubs",new Map)}subscribeTrust(r,t,n){let i=Ir.enabledRelays(),s={kinds:[G$],authors:r,since:t};return gt.relayPool.subscribe([s],i,(a,l,u)=>{setTimeout(()=>{n(a,l,u)},0)},0,void 0,{})}createTrustEventFromEdge(r){return this.createTrustEvent(r.to,r.type,r.note,r.context,r.entityType)}createMultiEvent(r,t,n,i="",s="nostr",o){const a=`${t}|${n.toString()}|${s}`,l=r.map(d=>[d.entityType==Is.Key?"p":"e",d.pubkey]);return{kind:G$,content:i||"",created_at:o||this.getTimestamp(),tags:[...l,["d",a],["c",s],["v",n.toString()]]}}createTrustEvent(r,t,n="",i="nostr",s=1,o){const a=`${r}|${t.toString()}|${i}`,l=s==Is.Key?"p":"e";return{kind:G$,content:n||"",created_at:o||this.getTimestamp(),tags:[[l,r],["d",a],["c",i],["v",t.toString()]]}}publishTrust(r,t,n,i,s,o){let a=this.createTrustEvent(r,t,n,i,s,o);this.sign(a),console.log("Publishing trust event",a),gt.publish(a)}parseTrustEvent(r){let t=[],n=[],i="",s,o,a,l=r.pubkey,u=r.created_at;if(r.tags)for(const h of r.tags)switch(h[0]){case"p":t.push(h[1]);break;case"e":n.push(h[1]);break;case"c":s=h[1];break;case"d":i=h[1];break;case"v":o=h[1];break}a=r.content;let d=parseInt(o);return(isNaN(d)||d<-1||d>1)&&(d=0),{pTags:t,eTags:n,context:s,d:i,v:o,val:d,note:a,authorPubkey:l,timestamp:u}}sign(r){if(r.sig||(r.tags||(r.tags=[]),r.content=r.content||"",r.created_at=r.created_at||Math.floor(Date.now()/1e3),r.pubkey=te.getPubKey(),r.id=Ul(r),r.sig=f1(r,te.getPrivKey())),!(r.id&&r.sig))throw console.error("Invalid event",r),new Error("Invalid event")}getTimestamp(r=Date.now()){return Math.floor(r/1e3)}}const nb=new Qge;class N1{constructor(r){Z(this,"id",0);Z(this,"oldScore");Z(this,"oldDegree",0);Z(this,"counter",0);this.id=r}hasChanged(r){return!this.oldScore||!this.oldScore.equals(r.score)||this.oldDegree!=r.degree}clone(){var t;let r=new N1(this.id);return r.oldScore=(t=this.oldScore)==null?void 0:t.clone(),r.oldDegree=this.oldDegree,r.counter=this.counter,r}setScore(r){this.oldScore=r==null?void 0:r.score.clone(),this.oldDegree=(r==null?void 0:r.degree)||0}}const Y$="trustScoreEvent";class Qh extends CustomEvent{constructor(r){super(Y$,{detail:r})}static dispatch(r){!r||!(r!=null&&r.id)||r.id==0||document.dispatchEvent(new Qh(r))}static add(r){document.addEventListener(Y$,r)}static remove(r){document.removeEventListener(Y$,r)}}const eye="trust1";class tye{constructor(r,t){Z(this,"db");Z(this,"localDataLoaded",!1);Z(this,"g",new Jge);Z(this,"sourceKey");Z(this,"sourceId",-1);Z(this,"wotPubSub");Z(this,"unsubs",{});Z(this,"subscriptionsCounter",0);Z(this,"verticeMonitor",Object.create(null));Z(this,"maxDegree",zs);Z(this,"readyCallbacks",[]);Z(this,"processItems",{});Z(this,"processGraph",!1);Z(this,"processScoreDebounce",wd.debounce(this.processScore,1e3,{trailing:!0}));Z(this,"submitTrustIndex",{});Z(this,"profilesLoaded",!1);this.wotPubSub=r,this.db=t}async init(r){if(this.sourceKey=r,this.localDataLoaded)return;this.sourceId=Ke(this.sourceKey),this.g.addVertice(this.sourceId);let t=0;await this.db.edges.each(n=>{this.g.addEdge(n,!1),t++}),console.log("Loaded "+t+" edges from the DB"),console.info("Graph: "+Object.entries(this.g.vertices).length+" vertices and "+Object.entries(this.g.edges).length+" edges"),this.processGraph=!0,this.processScore(),this.localDataLoaded=!0;for(let n of this.readyCallbacks)n();this.readyCallbacks=[]}whenReady(r){this.localDataLoaded?r():this.readyCallbacks.push(r)}async publishTrust(r,t=0,n=Is.Key,i,s="nostr"){var b;const o=(b=this.wotPubSub)==null?void 0:b.getTimestamp(),a={from:this.sourceKey,to:r,val:t,entityType:n,context:s,note:i,timestamp:o},{outV:l,inV:u,preVal:d,change:h}=await this.setTrust(a,!1);if(!h)return;this.addToProcessScoreQueue(l,u),this.processScore();let v=eye+this.sourceKey+r+s,g=this.submitTrustIndex[v];g||(g=wd.debounce(async m=>{var x;d!=m&&((x=mt.wotPubSub)==null||x.publishTrust(r,m,i,s,n,o),delete this.submitTrustIndex[v])},3e3),this.submitTrustIndex[v]=g),g(t)}addToProcessScoreQueue(r,t){r||console.log("addToProcessScoreQueue: outV is undefined, inV: "+t),!(!r||r.degree>this.maxDegree)&&(r.degree==this.maxDegree?this.processItems[t.id]=!0:t.entityType==Is.Key?t.degree==this.maxDegree?this.processGraph=!0:this.processGraph=!0:this.processItems[t.id]=!0)}processScore(){let r=this.processGraph;if(this.processGraph)mt.g.calculateScore(mt.sourceId,this.maxDegree);else for(const t in mt.processItems)mt.g.calculateItemScore(parseInt(t)),r=!0;if(r){for(const t in mt.verticeMonitor)mt.callMonitor(parseInt(t));this.processGraph&&mt.updateSubscriptions(),this.processGraph=!1,this.processItems={}}}callMonitor(r){let t=mt.verticeMonitor[r];if(!t)return;let n=this.g.vertices[r];if(!n||!t.hasChanged(n))return;let i=t.clone();t.setScore(n),Qh.dispatch(i)}addVerticeMonitor(r){let t=this.verticeMonitor[r];t||(t=new N1(r),this.verticeMonitor[r]=t),t.counter++}removeVerticeMonitor(r){let t=this.verticeMonitor[r];t&&(t.counter--,t.counter<=0&&delete this.verticeMonitor[r])}updateSubscriptions(){let r=this.g.getUnsubscribedVertices(this.maxDegree);this.subscribeToTrustEvents(r)}async setTrust(r,t){let{edge:n,preVal:i,change:s}=await this.putEdge(r,t),o=n==null?void 0:n.out,a=n==null?void 0:n.in;return{outV:o,inV:a,edge:n,preVal:i,change:s}}async putEdge(r,t){let{from:n,to:i,val:s,entityType:o,context:a,note:l,timestamp:u}=r,d=1,h,v=!1,g=eH.key(d,n,i,a),b=this.g.edges[g];if(b){if(h=b.val,b.timestamp<u||b.val!=s&&b.timestamp==u){let m={timestamp:0};b.val!=s&&(b.val=m.val=s),b.context!=a&&(b.context=m.context=a),b.note!=l&&(b.note=m.note=l),b.entityType!=o&&(b.entityType=m.entityType=o),b.timestamp=m.timestamp=u,b.val==0&&t?(await this.db.edges.delete(g),this.g.removeEdge(b),b=void 0):await this.db.edges.update(g,m),v=!0}}else{if(s==0&&t)return{edge:b,preVal:h,change:v};let m=new Xge;m.type=d,m.key=g,m.from=n,m.to=i,m.val=s,m.entityType=o,m.context=a,m.note=l,m.timestamp=u,await this.db.edges.put(m),b=this.g.addEdge(m,!1),v=!0}return{edge:b,preVal:h,change:v}}subscribeToTrustEvents(r){var o;if(r.length==0)return;let t=this,n=this.subscriptionsCounter++,i=0;const s=new Array;for(let a of r)i<a.timestamp&&(i=a.timestamp),s.push(Pr(a.id));r.forEach(a=>a.subscribed=n),t.unsubs[n]=(o=t.wotPubSub)==null?void 0:o.subscribeTrust(s,i,t.trustEvent)}unsubscribeAll(){var r,t;for(let n in this.unsubs)(t=(r=this.unsubs)[n])==null||t.call(r)}async trustEvent(r){let{pTags:t,eTags:n,val:i,authorPubkey:s,note:o,context:a,timestamp:l}=nb.parseTrustEvent(r);for(const u of t)await mt.setTrustAndProcess(u,s,Is.Key,i,o,a,l);for(const u of n)await mt.setTrustAndProcess(u,s,Is.Item,i,o,a,l)}async setTrustAndProcess(r,t,n,i,s,o,a){if(!r||r.length<2)return;r=te.toNostrHexAddress(r);let{outV:l,inV:u,change:d}=await mt.setTrust({from:t,to:r,val:i,note:s,context:o,entityType:n,timestamp:a},!0);d&&(mt.addToProcessScoreQueue(l,u),mt.processScoreDebounce())}findOption(r,t){if(!t||t.length===0||r.degree==0)return;let n=r.score,{val:i,degree:s,count:o,hasScore:a}=n.resolve();if(!a)return;if(s===1)return i>0?t[t.length-1]:i<0?t[0]:void 0;let l=(i+o)*100/(o*2),u=Math.ceil(l/(100/t.length));return u=u===0?1:u>t.length?t.length:u,t[u-1]}getTrustList(r,t){if(!r)return[];let n=new Array;for(const i in r.in){const s=this.g.getEdge(r.in[i]);let o=this.g.vertices[i];o&&s.val==t&&n.push({outV:o,edge:s})}return n}}const mt=new tye(nb,tp),Av=(e,r,t)=>{const[n,i]=ve({id:e,options:r,option:t});return Ge(()=>{if(!e)return;function s(l){let u=mt.g.vertices[l.id];if(!u)return;let d=mt.findOption(u,r);i(h=>({...h,...l,option:d,vertice:u}))}const o=l=>{let u=l.detail;u.id==e&&s(u)};mt.addVerticeMonitor(e),Qh.add(o);let a=new Qh(new N1(e));return a!=null&&a.detail&&s(a.detail),()=>{mt.removeVerticeMonitor(e),Qh.remove(o)}},[e]),n},rH=e=>{const[r,t]=ve(()=>ir.getMemoryProfile(Ke(e)));return Ge(()=>{let n=Ke(e),i=ir.getMemoryProfile(n);r.created_at!=i.created_at&&t(i);const s=a=>{let l=a.detail;!l||l.id!=n||t(u=>l.created_at<=u.created_at?u:l)};gc.add(s);let o=ir.subscribe(e);return()=>{gc.remove(s),o==null||o()}},[e]),r},Ft=e=>{const r=rH(e.pub),t=Av(Ke(e.pub),["badName","neutralName","goodName"],"");return p(Be,{children:[p("span",{className:(r.isDefault?"text-neutral-500":"")+" "+(t==null?void 0:t.option),children:r.name||r.display_name||e.placeholder}),e.hideBadge?"":p(Zge,{pub:e.pub})]})},rye=5;class s3 extends yn{constructor(){super();Z(this,"inputRef",s1());Z(this,"handleKeydown",t=>{var n;t.key==="Tab"&&((n=document.activeElement)==null?void 0:n.tagName)==="BODY"?(t.preventDefault(),this.inputRef.current.focus()):t.key==="Escape"&&(this.close(),this.inputRef.current.blur())});Z(this,"searchFromServer",tu(t=>{fetch(`https://eu.rbr.bio/search/${t}.json`).then(n=>{n.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{nt.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(t){if(t.keyCode===38||t.keyCode===40){t.preventDefault();const n=this.state.selected;let i=t.keyCode===40?n+1:n-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){const t=this.inputRef.current;t&&(t.value=""),this.setState({results:[],query:""})}componentDidMount(){var t;be.get("showFollowSuggestions").on(this.inject()),be.get("searchIndexUpdated").on(this.sub(()=>this.search())),be.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),document.addEventListener("keydown",this.handleKeydown),this.props.focus&&((t=this.inputRef.current)==null||t.focus())}componentDidUpdate(t,n){this.adjustResultsPosition(),t.focus!==this.props.focus&&this.inputRef.current.focus(),t.query!==this.props.query&&this.search(),this.state.selected>=0&&!sr.arraysAreEqual(this.state.results.slice(0,this.state.selected+1),n.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown)}adjustResultsPosition(){const t=this.inputRef.current;t.length&&this.setState({offsetLeft:t[0].offsetLeft})}onSubmit(t){t.preventDefault();const n=this.inputRef.current;if(n.value="",n.blur(),this.base instanceof Element){const i=this.base.querySelector(".result.selected");i&&i instanceof HTMLElement&&i.click()}}preventUpDownDefault(t){(t.keyCode===38||t.keyCode===40)&&t.preventDefault()}search(){var n;let t=this.props.query||((n=this.inputRef.current)==null?void 0:n.value)||"";if(t=t.toString().trim().toLowerCase(),!t){this.close();return}if(t.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){this.inputRef.current.value="";return}if(this.props.onSelect){if(t.match(/.+@.+\..+/)&&te.getPubKeyByNip05Address(t).then(a=>{var l,u;a&&t===String(this.props.query||this.inputRef.current.value)&&((u=(l=this.props).onSelect)==null||u.call(l,{key:a}))}),t.startsWith("https://iris.to/")){const a=t.replace("https://iris.to","");qt(a);return}const i=t.match(/note[a-zA-Z0-9]{59,60}/gi);if(i){qt("/"+i[0]);return}const s=t.match(/npub[a-zA-Z0-9]{59,60}/gi);if(s){qt("/"+s[0]);return}const o=t.split("/profile/");if(o.length>1)return this.props.onSelect({key:o[1]});if(te.toNostrHexAddress(t))return this.props.onSelect({key:t})}if(this.searchFromServer(t),t){const i=Vz.search(t).slice(0,rye);this.setState({results:i,query:t})}else this.setState({results:[],query:t})}onClick(t,n){this.props.onSelect&&(t.preventDefault(),t.stopPropagation(),this.props.onSelect(n)),this.close()}onResultFocus(t,n){this.setState({selected:n})}render(){return p("div",{className:`relative ${this.props.class}`,children:[this.props.resultsOnly?"":p("form",{onSubmit:t=>this.onSubmit(t),children:p("label",{children:p("input",{ref:this.inputRef,type:"text",onKeyPress:t=>this.preventUpDownDefault(t),onKeyDown:t=>this.preventUpDownDefault(t),onKeyUp:t=>this.onKeyUp(t),placeholder:ne("search"),tabIndex:1,onInput:()=>this.onInput(),className:"input-bordered border-neutral-500 input input-sm w-full"})})}),p("div",{onKeyUp:t=>this.onKeyUp(t),className:`${this.state.query?"":"hidden"} absolute z-20 left-0 mt-2 w-full bg-black border border-neutral-700 rounded shadow-lg`,children:[this.state.query&&!this.props.resultsOnly?p("a",{onFocus:t=>this.onResultFocus(t,-1),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(this.state.selected===-1?"selected bg-neutral-700":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[p("div",{class:"avatar-container",children:p("div",{style:"font-size: 1.5em; width: 40px",children:"🔍"})}),p("div",{children:[p("span",{children:this.state.query}),p("br",{}),p("small",{children:ne("search_posts")})]})]}):"",this.state.results.map((t,n)=>{const i=t.item;let s="";i.followers&&(i.followDistance===0?s=ne("you"):i.followDistance===1?s=ne("following"):s=`${i.followers.size} ${ne("followers")}`);const o=te.toNostrBech32Address(i.key,"npub");return p("a",{onFocus:a=>this.onResultFocus(a,n),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(n===this.state.selected?"selected bg-neutral-700":""),href:`/${o}`,onClick:a=>this.onClick(a,i),children:[i.picture?p(Mo,{src:i.picture,className:"rounded-full",width:40}):p(Wn,{str:o,width:40},`${o}ic`),p("div",{children:[p(Ft,{pub:i.key},i.key+"searchResult"),p("br",{}),p("small",{children:s})]})]})})]})]})}}const nH=(e,r,t)=>{const n=new FormData;n.append("fileToUpload",e),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:n}).then(async i=>{const s=await i.json();s&&r&&r(s)}).catch(i=>{console.error("upload error",i),t&&t("upload failed: "+JSON.stringify(i))})},KN=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/,nye=({submit:e,attachmentsChanged:r,placeholder:t,replyingTo:n,autofocus:i,forceAutoFocusMobile:s,onFocus:o,value:a,setValue:l})=>{const[u,d]=ve(null),h=Vr(null);Ge(()=>{const k=h.current;k&&(k.style.height="auto",k.style.height=`${k.scrollHeight}px`)},[a]),Ge(()=>{if(!n)be.get("public").get("draft").once(k=>l(k));else{const k=window.history.state;k&&k["replyTo"+n]&&l(k["replyTo"+n])}},[]),Ge(()=>{var k;(!sr.isMobile||s==!0)&&i!==!1&&((k=h==null?void 0:h.current)==null||k.focus())},[h.current]);const v=Hn(k=>{const $=k.clipboardData||window.clipboardData;if($.items){const S=$.items;for(let T=0;T<S.length;T++)if(S[T].type.startsWith("image/")){const O=S[T].getAsFile();nH(O,I=>l(a?`${a}

${I}`:I),I=>console.error(I))}}},[]),g=Hn(k=>{(k.metaKey||k.ctrlKey)&&k.key==="Enter"&&e()},[e]),b=k=>{const $=k.target.value;l($),E(k),n||be.get("public").get("draft").put($)},m=k=>{[37,38,39,40].includes(k.keyCode)&&E(k)},x=k=>{const $=h.current;if(!$)return;const S=$.selectionStart,T=[$.value.slice(0,S).replace(KN,"nostr:"),k.key,$.value.slice(S)].join("");l(T),$.focus(),$.selectionStart=$.selectionEnd=S+k.key.length+1},E=k=>{const S=k.target.value.slice(0,k.target.selectionStart).match(KN);if(S){const T=S[0].slice(1);te.toNostrHexAddress(T)||d(T)}else d(null)};return p(Be,{children:[p("textarea",{onDragOver:k=>{k.preventDefault(),k.stopPropagation()},onFocus:o,onDrop:r,onKeyUp:m,onKeyDown:g,onPaste:v,onInput:b,className:"p-2 mt-1 w-full h-12 bg-black focus:outline-iris-purple block w-full text-lg border-gray-700 rounded-md text-white",type:"text",placeholder:ne(t),autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!1,value:a,ref:h}),p(je,{when:u,children:p(s3,{resultsOnly:!0,query:u||"",onSelect:x})})]})};function iye(e=[],r){function t(i,s){var a;const o=[...r.matchAll(i)].map(l=>l[0]).filter((l,u,d)=>d.indexOf(l)===u);if(o)for(const l of o){const u=(a=l.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:a[0],d=u&&te.toNostrHexAddress(u);if(!d)continue;const h=[s,d,"","mention"];e!=null&&e.find(v=>v[0]===h[0]&&v[1]===h[1])||e.push(h)}}t(sr.pubKeyRegex,"p"),t(sr.noteRegex,"e");const n=[...r.matchAll(sr.hashtagRegex)].map(i=>i[0].slice(1));if(n.length)for(const i of n)e!=null&&e.find(s=>s[0]==="t"&&s[1]===i)||e.push(["t",i]);return e}async function sye(e){var t,n,i;const r={kind:1,content:e.text};if(e.replyingTo){const s=te.toNostrHexAddress(e.replyingTo);if(!s)throw new Error("invalid replyingTo");const o=await new Promise(l=>{nt.getEventById(s,!0,u=>l(u))});r.tags=o.tags.filter(l=>l[0]==="p");let a=(t=o.tags)==null?void 0:t.find(l=>l[0]==="e"&&l[3]==="root");a||(a=(n=o.tags)==null?void 0:n.find(l=>l[0]==="e")),a?(r.tags.unshift(["e",s,"","reply"]),r.tags.unshift(["e",a[1],"","root"])):r.tags.unshift(["e",s,"","root"]),(i=r.tags)!=null&&i.find(l=>l[0]==="p"&&l[1]===o.pubkey)||r.tags.push(["p",o.pubkey])}return r.tags=iye(r.tags,e.text),console.log("sending event",r),nt.publish(r)}const{bech32:ko,hex:qs,utf8:oye}=XF,WN={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},VN={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},qN={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},GN={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},im=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],aye={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},lye=BigInt("2100000000000000000"),YN=BigInt(1e11),BS={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},iH={};for(let e=0,r=Object.keys(BS);e<r.length;e++){const t=r[e],n=BS[r[e]].toString();iH[n]=t}const uye={1:e=>qs.encode(ko.fromWordsUnsafe(e)),16:e=>qs.encode(ko.fromWordsUnsafe(e)),13:e=>oye.encode(ko.fromWordsUnsafe(e)),19:e=>qs.encode(ko.fromWordsUnsafe(e)),23:e=>qs.encode(ko.fromWordsUnsafe(e)),27:e=>qs.encode(ko.fromWordsUnsafe(e)),6:ib,24:ib,3:hye,5:dye};function cye(e){return r=>({tagCode:parseInt(e),words:ko.encode("unknown",r,Number.MAX_SAFE_INTEGER)})}function ib(e){return e.reverse().reduce((r,t,n)=>r+t*Math.pow(32,n),0)}function hye(e){const r=[];let t,n,i,s,o,a=ko.fromWordsUnsafe(e);for(;a.length>0;)t=qs.encode(a.slice(0,33)),n=qs.encode(a.slice(33,41)),i=parseInt(qs.encode(a.slice(41,45)),16),s=parseInt(qs.encode(a.slice(45,49)),16),o=parseInt(qs.encode(a.slice(49,51)),16),a=a.slice(51),r.push({pubkey:t,short_channel_id:n,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return r}function dye(e){const r=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;r.length<im.length*2;)r.push(!1);const t={};im.forEach((i,s)=>{let o;r[s*2]?o="required":r[s*2+1]?o="supported":o="unsupported",t[i]=o});const n=r.slice(im.length*2);return t.extra_bits={start_bit:im.length*2,bits:n,has_required:n.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},t}function sH(e,r){let t,n;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(n),s=t?i*YN/aye[t]:i*YN;if(t==="p"&&i%BigInt(10)!==BigInt(0)||s>lye)throw new Error("Amount is outside of valid range");return r?s.toString():s}function fye(e,r){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const t=[],n=ko.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=n.prefix;let s=n.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});const u=l[1];let d;if(r){if(r.bech32===void 0||r.pubKeyHash===void 0||r.scriptHash===void 0||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");d=r}else switch(u){case WN.bech32:d=WN;break;case VN.bech32:d=VN;break;case qN.bech32:d=qN;break;case GN.bech32:d=GN;break}if(!d||d.bech32!==u)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:u,value:d});const h=l[2];let v;if(h){const S=l[3];v=sH(h+S,!0),t.push({name:"amount",letters:l[2]+l[3],value:v})}else v=null;t.push({name:"separator",letters:"1"});const g=ib(s.slice(0,7));s=s.slice(7),t.push({name:"timestamp",letters:o.slice(0,7),value:g}),o=o.slice(7);let b,m,x,E;for(;s.length>0;){const S=s[0].toString();b=iH[S]||"unknown_tag",m=uye[S]||cye(S),s=s.slice(1),x=ib(s.slice(0,2)),s=s.slice(2),E=s.slice(0,x),s=s.slice(x),t.push({name:b,tag:o[0],letters:o.slice(0,1+2+x),value:m(E)}),o=o.slice(1+2+x)}t.push({name:"signature",letters:o.slice(0,104),value:qs.encode(ko.fromWordsUnsafe(a))}),o=o.slice(104),t.push({name:"checksum",letters:o});let k={paymentRequest:e,sections:t,get expiry(){let S=t.find(T=>T.name==="expiry");if(S)return $("timestamp")+S.value},get route_hints(){return t.filter(S=>S.name==="route_hint").map(S=>S.value)}};for(let S in BS)S!=="route_hint"&&Object.defineProperty(k,S,{get(){return $(S)}});return k;function $(S){let T=t.find(O=>O.name===S);return T?T.value:void 0}}var pye={decode:fye,hrpToMillisat:sH};let Zp;const vye={USD:"$",EUR:"€",JPY:"¥",SATS:""};let Ml="USD";const ZN=navigator.language,gye=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];gye.some(e=>ZN.startsWith(e))?Ml="EUR":ZN.startsWith("ja")&&(Ml="JPY");const oH=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+Ml).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var r,t,n;Zp=parseFloat((n=(t=(r=e==null?void 0:e.result)==null?void 0:r["XXBTZ"+Ml])==null?void 0:t.c)==null?void 0:n[0]),console.log("lastBitcoinPrice",Zp,Ml)}).catch(e=>{console.error("Error:",e)})};be.get("displayCurrency").on(e=>{Ml=e,oH()});setTimeout(()=>{Zp||oH()},1e3);function aH(e){var r,t,n;try{const i=pye.decode(e),s=i.sections.find(m=>m.name==="amount"),o=s?Number(s.value):void 0,a=i.sections.find(m=>m.name==="timestamp"),l=a?Number(a.value):void 0,u=i.sections.find(m=>m.name==="expiry"),d=u?Number(u.value):void 0,h=(r=i.sections.find(m=>m.name==="description"))==null?void 0:r.value,v=new Uint8Array((t=i.sections.find(m=>m.name==="description_hash"))==null?void 0:t.value),g=new Uint8Array((n=i.sections.find(m=>m.name==="payment_hash"))==null?void 0:n.value),b={amount:o,expire:l&&d?l+d:void 0,timestamp:l,description:h,descriptionHash:v?ur(v):void 0,paymentHash:g?ur(g):void 0,expired:!1};return b.expire&&(b.expired=b.expire<new Date().getTime()/1e3),b}catch(i){console.error(i)}}function yye(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function mye(e){let r;e>=1||e>=.01?r=2:r=4;const t=Math.pow(10,r);return e=Math.round(e*t)/t,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:r})}function MS(e){if(Zp&&Ml!=="SATS"){const r=e/1e8*Zp,t=mye(r);return vye[Ml]+" "+t}else return yye(e)}const zo=({width:e,height:r,centerVertically:t=!0,showContainer:n,children:i,onClose:s})=>{const o=h=>{h.key==="Escape"&&(s==null||s())},a=h=>{h.stopPropagation(),s==null||s()},l=h=>{h.stopPropagation()};Ge(()=>(document.body.style.overflow="hidden",window.addEventListener("keydown",o),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",o)}),[o]);const u=n?p("div",{className:"p-8 border-2 border-neutral-500 bg-black rounded-lg shadow-lg",style:{width:"600px",maxWidth:"calc(100vw - 40px)"},onClick:h=>l(h),children:i}):i;return p("div",{className:`fixed top-0 left-0 z-50 w-full h-full bg-black bg-opacity-90 flex flex-col ${t?"justify-center":"justify-start"} items-center overflow-y-auto overflow-x-hidden`,onClick:a,children:p("div",{className:"overflow-y-auto flex flex-col items-center",style:{width:e||"auto",height:r||"auto"},children:u})})},Xp=(e,r=["red","grey","green"])=>r[e+1],bye=(e,r=!1)=>!e||!r&&!e.hasTrustScore()?null:e.trusts.join("/"),wye=(e,r=!1)=>!e||!r&&!e.hasDistrustScore()?null:e.distrusts.join("/"),o3=(e,r,t=!1)=>!e||!t&&!e.hasTrustScore()?null:p("a",{href:`/graph/${r}/in/trust/path`,className:"cursor-pointer hover:underline",title:"Trusts at degree 0/1/2",children:[bye(e,t)," ",p("span",{className:"text-neutral-500",children:"Trusts"})]}),a3=(e,r,t=!1)=>!e||!t&&!e.hasDistrustScore()?null:p("a",{href:`/graph/${r}/in/distrust/path`,className:"cursor-pointer hover:underline",title:"Distrusts at degree 0/1/2",children:[wye(e,t)," ",p("span",{className:"text-neutral-500",children:"Distrusts"})]}),_ye=Qn(({data:e})=>{const r=e.pubkey.startsWith("npub")?e.pubkey:ka.npubEncode(e.pubkey);return p(wt,{href:`/${r}`,className:"flex items-center gap-4",children:[p(Wn,{str:e.pubkey,width:40}),p("div",{className:"flex flex-col",children:[p(Ft,{pub:e.pubkey}),e.text&&p("small",{className:"text-neutral-500",children:e.text})]})]})}),$ye=({event:e,wot:r})=>{var k;const[t,n]=ve(new Set),[i,s]=ve(new Set),[o,a]=ve(new Map),[l,u]=ve(""),[d,h]=ve([]),[v,g]=ve(""),b=(k=r==null?void 0:r.vertice)==null?void 0:k.score,m=b==null?void 0:b.hasTrustScore(),x=b==null?void 0:b.hasDistrustScore();return Ge(()=>{const $=[],S=I=>{n(new Set(I))},T=I=>{s(new Set(I))},O=I=>{const P=new Map;let R=0;Array.from(I==null?void 0:I.values()).map(F=>Mt.get(F)).forEach(F=>{var G;const K=(G=F==null?void 0:F.tags.find(Q=>Q[0]==="bolt11"))==null?void 0:G[1];if(!K){console.log("Invalid zap, missing bolt11 tag");return}const q=aH(K),W=((q==null?void 0:q.amount)||0)/1e3;R+=W;const M=_O(F);if(M){const Q=P.get(M)||0;P.set(M,Q+W)}}),a(P),u(R>0?MS(R):"")};return $.push(nt.getLikes(e.id,S)),$.push(nt.getReposts(e.id,T)),$.push(nt.getZaps(e.id,O)),()=>{$.forEach(I=>I())}},[e]),t.size>0||i.size>0||o.size>0?p(Be,{children:[p("hr",{className:"-mx-2 opacity-10 mt-2"}),d.length>0&&p(zo,{showContainer:!0,onClose:()=>h([]),children:[p("div",{className:"flex items-center justify-between mb-4",children:p("h2",{className:"text-xl font-bold",children:v})}),p("div",{className:"flex flex-col gap-4 overflow-y-auto max-h-[50vh]",children:d.map($=>p(_ye,{data:$},$.pubkey))})]}),p("div",{className:"flex items-center gap-4 py-2",children:[t.size>0&&p("div",{className:"flex-shrink-0",children:p("a",{onClick:()=>{const $=Array.from(t).map(S=>({pubkey:S}));h($),g("Liked by")},className:"cursor-pointer hover:underline",children:[t.size," ",p("span",{className:"text-neutral-500",children:"Likes"})]})}),i.size>0&&p("div",{className:"flex-shrink-0",children:p("a",{onClick:()=>{const $=Array.from(i).map(S=>({pubkey:S}));h($),g("Reposted by")},className:"cursor-pointer hover:underline",children:[i.size," ",p("span",{className:"text-neutral-500",children:"Reposts"})]})}),(o==null?void 0:o.size)>0&&p("div",{className:"flex-shrink-0",children:p("a",{onClick:()=>{const $=[],S=[...o.entries()].sort((T,O)=>O[1]-T[1]);for(const[T,O]of S)$.push({pubkey:T,text:MS(O)});h($),g("Zapped by")},className:"cursor-pointer hover:underline",children:[o.size," ",p("span",{className:"text-neutral-500",children:"Zaps"}),l&&p("small",{className:"text-neutral-500",children:[" (",l,")"]})]})}),m&&p("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:o3(b,te.toNostrBech32Address(e.id,"note"),!0)}),x&&p("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:a3(b,te.toNostrBech32Address(e.id,"note"),!0)})]}),p("hr",{className:"-mx-2 opacity-10 mb-2"})]}):null};function sb({size:e=18,fill:r="none",stroke:t="black"}){return p("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p("path",{d:"M19.42 4.44994C19.3203 4.38116 19.2053 4.3379 19.085 4.32395C18.9647 4.31 18.8428 4.32579 18.73 4.36994C17.5425 4.8846 16.2857 5.22155 15 5.36994C14.1879 5.15273 13.4127 4.81569 12.7 4.36994C11.7802 3.80143 10.763 3.40813 9.7 3.20994C8.41 3.08994 5.34 4.09994 4.7 4.30994C4.55144 4.36012 4.42234 4.4556 4.33086 4.58295C4.23938 4.71031 4.19012 4.86314 4.19 5.01994V19.9999C4.19 20.1989 4.26902 20.3896 4.40967 20.5303C4.55032 20.6709 4.74109 20.7499 4.94 20.7499C5.13891 20.7499 5.32968 20.6709 5.47033 20.5303C5.61098 20.3896 5.69 20.1989 5.69 19.9999V14.1399C6.93659 13.6982 8.23315 13.4127 9.55 13.2899C10.3967 13.4978 11.2062 13.8351 11.95 14.2899C12.8201 14.8218 13.7734 15.2038 14.77 15.4199H15C16.4474 15.2326 17.8633 14.8526 19.21 14.2899C19.3506 14.2342 19.4713 14.1379 19.5568 14.0132C19.6423 13.8885 19.6887 13.7411 19.69 13.5899V5.06994C19.6975 4.95258 19.6769 4.83512 19.63 4.7273C19.583 4.61947 19.511 4.5244 19.42 4.44994Z"})})}function ob({size:e=18,fill:r="none",stroke:t="black"}){return p("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[p("g",{"clip-path":"url(#clip0)",children:[p("path",{d:"M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M16 20L26 28L41 7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]}),p("defs",{children:p("clipPath",{id:"clip0",children:p("rect",{width:"48",height:"48",fill:"white"})})})]})}const xye=({event:e})=>{const[r,t]=ve({likes:0,liked:!1,likedBy:new Set});Ge(()=>{const o=Ue.getProfile(e.pubkey,l=>{}),a=nt.getLikes(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=te.getPubKey();t(l=>({...l,likes:o.size,liked:o.has(a),likedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.liked)},s=(o=!0)=>{if(o){const a=e.pubkey,l=te.toNostrHexAddress(e.id);l&&nt.publish({kind:7,content:"+",tags:[["e",l],["p",a]]})}};return p("a",{className:`btn-ghost btn-sm justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${r.liked?"text-iris-red":"hover:text-iris-red text-neutral-500"}`,onClick:o=>i(o),children:[r.liked?p(WI,{width:18}):p(c9,{width:18}),r.likes||""]})},Eye=({event:e})=>{const[r,t]=ve({reposts:0,reposted:!1,repostedBy:new Set});Ge(()=>{const o=Ue.getProfile(e.pubkey,l=>{}),a=nt.getReposts(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=te.getPubKey();t(l=>({...l,reposts:o.size,reposted:o.has(a),repostedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.reposted)},s=(o=!0)=>{if(o){const a=e.pubkey,l=te.toNostrHexAddress(e.id);l&&nt.publish({kind:6,tags:[["e",l,"","mention"],["p",a]],content:""})}};return p("a",{className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none ${r.reposted?"text-iris-green":"hover:text-iris-green text-neutral-500"}`,onClick:o=>i(o),children:[p(l9,{width:18}),r.reposts||""]})},Sye="payRequest";var LS=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(LS||{});class ku extends Error{constructor(t,n){super(n);Z(this,"code");this.code=t}}var Cl,Ei,n1,lH;class kye{constructor(r){yr(this,n1);yr(this,Cl,void 0);yr(this,Ei,void 0);if(r=r.toLowerCase().trim(),r.startsWith("lnurl")){const t=sr.bech32ToText(r);if(!t.startsWith("http"))throw new ku(2,"Not a url");vs(this,Cl,new URL(t))}else if(r.match(/[\w.-]+@[\w.-]/)){const[t,n]=r.split("@");vs(this,Cl,new URL(`https://${n}/.well-known/lnurlp/${t}`))}else if(r.startsWith("https:"))vs(this,Cl,new URL(r));else if(r.startsWith("lnurlp:")){const t=new URL(r);t.protocol="https:",vs(this,Cl,t)}else throw new ku(2,"Could not determine service url")}async load(){const r=await fetch(Jr(this,Cl).toString());r.ok&&(vs(this,Ei,await r.json()),dn(this,n1,lH).call(this))}async getInvoice(r,t,n){var l,u,d;const i=new URL(sr.unwrap((l=Jr(this,Ei))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(h=>{const v=h.split("=");s.set(v[0],v[1])}),s.set("amount",Math.floor(r*1e3).toString()),t&&((u=Jr(this,Ei))!=null&&u.commentAllowed)&&s.set("comment",t),(d=Jr(this,Ei))!=null&&d.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(h=>`${h[0]}=${encodeURIComponent(h[1])}`).join("&");try{const h=await fetch(`${o}?${a}`);if(h.ok){const v=await h.json();if(console.debug("[LNURL]: ",v),v.status==="ERROR")throw new Error(v.reason);return v}else throw new ku(1,`Failed to fetch invoice (${h.statusText})`)}catch{throw new ku(1,"Failed to load callback")}}get canZap(){var r;return!!((r=Jr(this,Ei))!=null&&r.nostrPubkey)}get zapperPubkey(){var r;return(r=Jr(this,Ei))==null?void 0:r.nostrPubkey}get maxCommentLength(){var r;return((r=Jr(this,Ei))==null?void 0:r.commentAllowed)??0}get min(){var r;return((r=Jr(this,Ei))==null?void 0:r.minSendable)??1e3}get max(){var r;return((r=Jr(this,Ei))==null?void 0:r.maxSendable)??1e11}}Cl=new WeakMap,Ei=new WeakMap,n1=new WeakSet,lH=function(){var r,t;if(((r=Jr(this,Ei))==null?void 0:r.tag)!==Sye)throw new ku(2,"Only LNURLp is supported");if(!((t=Jr(this,Ei))!=null&&t.callback))throw new ku(2,"No callback url")};const Jn=({copyStr:e,text:r,className:t})=>{const[n,i]=ve(!1),[s,o]=ve(void 0),[a,l]=ve(void 0),u=(v,g)=>{if(v.target===null)return;sr.copyToClipboard(g);const b=v.target,m=b.offsetWidth;m!==void 0&&(o(s||m+1),b.style.width=`${s}px`,i(!0),a!==void 0&&clearTimeout(a),l(setTimeout(()=>i(!1),2e3)))},d=v=>{v.preventDefault();const g=typeof e=="function"?e():e;u(v,g)};Ge(()=>()=>{a&&clearTimeout(a)},[a]);const h=n?ne("copied"):r||ne("copy");return p("button",{className:t||"btn",onClick:v=>d(v),children:h})};var Th;(function(){function e($){this.mode=u.MODE_8BIT_BYTE,this.data=$,this.parsedData=[];for(var S=[],T=0,O=this.data.length;O>T;T++){var I=this.data.charCodeAt(T);I>65536?(S[0]=240|(1835008&I)>>>18,S[1]=128|(258048&I)>>>12,S[2]=128|(4032&I)>>>6,S[3]=128|63&I):I>2048?(S[0]=224|(61440&I)>>>12,S[1]=128|(4032&I)>>>6,S[2]=128|63&I):I>128?(S[0]=192|(1984&I)>>>6,S[1]=128|63&I):S[0]=I,this.parsedData=this.parsedData.concat(S)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r($,S){this.typeNumber=$,this.errorCorrectLevel=S,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function t($,S){if($.length==null)throw new Error($.length+"/"+S);for(var T=0;T<$.length&&$[T]==0;)T++;this.num=new Array($.length-T+S);for(var O=0;O<$.length-T;O++)this.num[O]=$[O+T]}function n($,S){this.totalCount=$,this.dataCount=S}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function o(){var $=!1,S=navigator.userAgent,T;return/android/i.test(S)&&($=!0,T=S.toString().match(/android ([0-9]\.[0-9])/i),T&&T[1]&&($=parseFloat(T[1]))),$}function a($,S){for(var T=1,O=l($),I=0,P=m.length;P>=I;I++){var R=0;switch(S){case d.L:R=m[I][0];break;case d.M:R=m[I][1];break;case d.Q:R=m[I][2];break;case d.H:R=m[I][3]}if(R>=O)break;T++}if(T>m.length)throw new Error("Too long data");return T}function l($){var S=encodeURI($).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return S.length+(S.length!=$?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function($){for(var S=0,T=this.parsedData.length;T>S;S++)$.put(this.parsedData[S],8)}},r.prototype={addData:function($){var S=new e($);this.dataList.push(S),this.dataCache=null},isDark:function($,S){if(0>$||this.moduleCount<=$||0>S||this.moduleCount<=S)throw new Error($+","+S);return this.modules[$][S]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function($,S){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var T=0;T<this.moduleCount;T++){this.modules[T]=new Array(this.moduleCount);for(var O=0;O<this.moduleCount;O++)this.modules[T][O]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo($,S),this.typeNumber>=7&&this.setupTypeNumber($),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,S)},setupPositionProbePattern:function($,S){for(var T=-1;7>=T;T++)if(!(-1>=$+T||this.moduleCount<=$+T))for(var O=-1;7>=O;O++)-1>=S+O||this.moduleCount<=S+O||(this.modules[$+T][S+O]=T>=0&&6>=T&&(O==0||O==6)||O>=0&&6>=O&&(T==0||T==6)||T>=2&&4>=T&&O>=2&&4>=O)},getBestMaskPattern:function(){for(var $=0,S=0,T=0;8>T;T++){this.makeImpl(!0,T);var O=v.getLostPoint(this);(T==0||$>O)&&($=O,S=T)}return S},createMovieClip:function($,S,T){var O=$.createEmptyMovieClip(S,T),I=1;this.make();for(var P=0;P<this.modules.length;P++)for(var R=P*I,D=0;D<this.modules[P].length;D++){var F=D*I,K=this.modules[P][D];K&&(O.beginFill(0,100),O.moveTo(F,R),O.lineTo(F+I,R),O.lineTo(F+I,R+I),O.lineTo(F,R+I),O.endFill())}return O},setupTimingPattern:function(){for(var $=8;$<this.moduleCount-8;$++)this.modules[$][6]==null&&(this.modules[$][6]=$%2==0);for(var S=8;S<this.moduleCount-8;S++)this.modules[6][S]==null&&(this.modules[6][S]=S%2==0)},setupPositionAdjustPattern:function(){for(var $=v.getPatternPosition(this.typeNumber),S=0;S<$.length;S++)for(var T=0;T<$.length;T++){var O=$[S],I=$[T];if(this.modules[O][I]==null)for(var P=-2;2>=P;P++)for(var R=-2;2>=R;R++)this.modules[O+P][I+R]=P==-2||P==2||R==-2||R==2||P==0&&R==0}},setupTypeNumber:function($){for(var S=v.getBCHTypeNumber(this.typeNumber),T=0;18>T;T++){var O=!$&&(1&S>>T)==1;this.modules[Math.floor(T/3)][T%3+this.moduleCount-8-3]=O}for(var T=0;18>T;T++){var O=!$&&(1&S>>T)==1;this.modules[T%3+this.moduleCount-8-3][Math.floor(T/3)]=O}},setupTypeInfo:function($,S){for(var T=this.errorCorrectLevel<<3|S,O=v.getBCHTypeInfo(T),I=0;15>I;I++){var P=!$&&(1&O>>I)==1;6>I?this.modules[I][8]=P:8>I?this.modules[I+1][8]=P:this.modules[this.moduleCount-15+I][8]=P}for(var I=0;15>I;I++){var P=!$&&(1&O>>I)==1;8>I?this.modules[8][this.moduleCount-I-1]=P:9>I?this.modules[8][15-I-1+1]=P:this.modules[8][15-I-1]=P}this.modules[this.moduleCount-8][8]=!$},mapData:function($,S){for(var T=-1,O=this.moduleCount-1,I=7,P=0,R=this.moduleCount-1;R>0;R-=2)for(R==6&&R--;;){for(var D=0;2>D;D++)if(this.modules[O][R-D]==null){var F=!1;P<$.length&&(F=(1&$[P]>>>I)==1);var K=v.getMask(S,O,R-D);K&&(F=!F),this.modules[O][R-D]=F,I--,I==-1&&(P++,I=7)}if(O+=T,0>O||this.moduleCount<=O){O-=T,T=-T;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function($,S,T){for(var O=n.getRSBlocks($,S),I=new i,P=0;P<T.length;P++){var R=T[P];I.put(R.mode,4),I.put(R.getLength(),v.getLengthInBits(R.mode,$)),R.write(I)}for(var D=0,P=0;P<O.length;P++)D+=O[P].dataCount;if(I.getLengthInBits()>8*D)throw new Error("code length overflow. ("+I.getLengthInBits()+">"+8*D+")");for(I.getLengthInBits()+4<=8*D&&I.put(0,4);I.getLengthInBits()%8!=0;)I.putBit(!1);for(;!(I.getLengthInBits()>=8*D||(I.put(r.PAD0,8),I.getLengthInBits()>=8*D));)I.put(r.PAD1,8);return r.createBytes(I,O)},r.createBytes=function($,S){for(var T=0,O=0,I=0,P=new Array(S.length),R=new Array(S.length),D=0;D<S.length;D++){var F=S[D].dataCount,K=S[D].totalCount-F;O=Math.max(O,F),I=Math.max(I,K),P[D]=new Array(F);for(var q=0;q<P[D].length;q++)P[D][q]=255&$.buffer[q+T];T+=F;var W=v.getErrorCorrectPolynomial(K),M=new t(P[D],W.getLength()-1),G=M.mod(W);R[D]=new Array(W.getLength()-1);for(var q=0;q<R[D].length;q++){var Q=q+G.getLength()-R[D].length;R[D][q]=Q>=0?G.get(Q):0}}for(var he=0,q=0;q<S.length;q++)he+=S[q].totalCount;for(var ue=new Array(he),ke=0,q=0;O>q;q++)for(var D=0;D<S.length;D++)q<P[D].length&&(ue[ke++]=P[D][q]);for(var q=0;I>q;q++)for(var D=0;D<S.length;D++)q<R[D].length&&(ue[ke++]=R[D][q]);return ue};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},h={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},v={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function($){for(var S=$<<10;v.getBCHDigit(S)-v.getBCHDigit(v.G15)>=0;)S^=v.G15<<v.getBCHDigit(S)-v.getBCHDigit(v.G15);return($<<10|S)^v.G15_MASK},getBCHTypeNumber:function($){for(var S=$<<12;v.getBCHDigit(S)-v.getBCHDigit(v.G18)>=0;)S^=v.G18<<v.getBCHDigit(S)-v.getBCHDigit(v.G18);return $<<12|S},getBCHDigit:function($){for(var S=0;$!=0;)S++,$>>>=1;return S},getPatternPosition:function($){return v.PATTERN_POSITION_TABLE[$-1]},getMask:function($,S,T){switch($){case h.PATTERN000:return(S+T)%2==0;case h.PATTERN001:return S%2==0;case h.PATTERN010:return T%3==0;case h.PATTERN011:return(S+T)%3==0;case h.PATTERN100:return(Math.floor(S/2)+Math.floor(T/3))%2==0;case h.PATTERN101:return S*T%2+S*T%3==0;case h.PATTERN110:return(S*T%2+S*T%3)%2==0;case h.PATTERN111:return(S*T%3+(S+T)%2)%2==0;default:throw new Error("bad maskPattern:"+$)}},getErrorCorrectPolynomial:function($){for(var S=new t([1],0),T=0;$>T;T++)S=S.multiply(new t([1,g.gexp(T)],0));return S},getLengthInBits:function($,S){if(S>=1&&10>S)switch($){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+$)}else if(27>S)switch($){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+$)}else{if(!(41>S))throw new Error("type:"+S);switch($){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+$)}}},getLostPoint:function($){for(var S=$.getModuleCount(),T=0,O=0;S>O;O++)for(var I=0;S>I;I++){for(var P=0,R=$.isDark(O,I),D=-1;1>=D;D++)if(!(0>O+D||O+D>=S))for(var F=-1;1>=F;F++)0>I+F||I+F>=S||(D!=0||F!=0)&&R==$.isDark(O+D,I+F)&&P++;P>5&&(T+=3+P-5)}for(var O=0;S-1>O;O++)for(var I=0;S-1>I;I++){var K=0;$.isDark(O,I)&&K++,$.isDark(O+1,I)&&K++,$.isDark(O,I+1)&&K++,$.isDark(O+1,I+1)&&K++,(K==0||K==4)&&(T+=3)}for(var O=0;S>O;O++)for(var I=0;S-6>I;I++)$.isDark(O,I)&&!$.isDark(O,I+1)&&$.isDark(O,I+2)&&$.isDark(O,I+3)&&$.isDark(O,I+4)&&!$.isDark(O,I+5)&&$.isDark(O,I+6)&&(T+=40);for(var I=0;S>I;I++)for(var O=0;S-6>O;O++)$.isDark(O,I)&&!$.isDark(O+1,I)&&$.isDark(O+2,I)&&$.isDark(O+3,I)&&$.isDark(O+4,I)&&!$.isDark(O+5,I)&&$.isDark(O+6,I)&&(T+=40);for(var q=0,I=0;S>I;I++)for(var O=0;S>O;O++)$.isDark(O,I)&&q++;var W=Math.abs(100*q/S/S-50)/5;return T+=10*W}},g={glog:function($){if(1>$)throw new Error("glog("+$+")");return g.LOG_TABLE[$]},gexp:function($){for(;0>$;)$+=255;for(;$>=256;)$-=255;return g.EXP_TABLE[$]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},b=0;8>b;b++)g.EXP_TABLE[b]=1<<b;for(var b=8;256>b;b++)g.EXP_TABLE[b]=g.EXP_TABLE[b-4]^g.EXP_TABLE[b-5]^g.EXP_TABLE[b-6]^g.EXP_TABLE[b-8];for(var b=0;255>b;b++)g.LOG_TABLE[g.EXP_TABLE[b]]=b;t.prototype={get:function($){return this.num[$]},getLength:function(){return this.num.length},multiply:function($){for(var S=new Array(this.getLength()+$.getLength()-1),T=0;T<this.getLength();T++)for(var O=0;O<$.getLength();O++)S[T+O]^=g.gexp(g.glog(this.get(T))+g.glog($.get(O)));return new t(S,0)},mod:function($){if(this.getLength()-$.getLength()<0)return this;for(var S=g.glog(this.get(0))-g.glog($.get(0)),T=new Array(this.getLength()),O=0;O<this.getLength();O++)T[O]=this.get(O);for(var O=0;O<$.getLength();O++)T[O]^=g.gexp(g.glog($.get(O))+S);return new t(T,0).mod($)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function($,S){var T=n.getRsBlockTable($,S);if(T==null)throw new Error("bad rs block @ typeNumber:"+$+"/errorCorrectLevel:"+S);for(var O=T.length/3,I=[],P=0;O>P;P++)for(var R=T[3*P+0],D=T[3*P+1],F=T[3*P+2],K=0;R>K;K++)I.push(new n(D,F));return I},n.getRsBlockTable=function($,S){switch(S){case d.L:return n.RS_BLOCK_TABLE[4*($-1)+0];case d.M:return n.RS_BLOCK_TABLE[4*($-1)+1];case d.Q:return n.RS_BLOCK_TABLE[4*($-1)+2];case d.H:return n.RS_BLOCK_TABLE[4*($-1)+3];default:return}},i.prototype={get:function($){var S=Math.floor($/8);return(1&this.buffer[S]>>>7-$%8)==1},put:function($,S){for(var T=0;S>T;T++)this.putBit((1&$>>>S-T-1)==1)},getLengthInBits:function(){return this.length},putBit:function($){var S=Math.floor(this.length/8);this.buffer.length<=S&&this.buffer.push(0),$&&(this.buffer[S]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],x=function(){var $=function(S,T){this._el=S,this._htOption=T};return $.prototype.draw=function(S){function T(q,W){var M=document.createElementNS("http://www.w3.org/2000/svg",q);for(var G in W)W.hasOwnProperty(G)&&M.setAttribute(G,W[G]);return M}var O=this._htOption,I=this._el,P=S.getModuleCount();Math.floor(O.width/P),Math.floor(O.height/P),this.clear();var R=T("svg",{viewBox:"0 0 "+String(P)+" "+String(P),width:"100%",height:"100%",fill:O.colorLight});R.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),I.appendChild(R),R.appendChild(T("rect",{fill:O.colorDark,width:"1",height:"1",id:"template"}));for(var D=0;P>D;D++)for(var F=0;P>F;F++)if(S.isDark(D,F)){var K=T("use",{x:String(D),y:String(F)});K.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),R.appendChild(K)}},$.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},$}(),E=document.documentElement.tagName.toLowerCase()==="svg",k=E?x:s()?function(){function $(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function S(P,R){var D=this;if(D._fFail=R,D._fSuccess=P,D._bSupportDataURI===null){var F=document.createElement("img"),K=function(){D._bSupportDataURI=!1,D._fFail&&_fFail.call(D)},q=function(){D._bSupportDataURI=!0,D._fSuccess&&D._fSuccess.call(D)};return F.onabort=K,F.onerror=K,F.onload=q,F.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}D._bSupportDataURI===!0&&D._fSuccess?D._fSuccess.call(D):D._bSupportDataURI===!1&&D._fFail&&D._fFail.call(D)}if(this&&this._android&&this._android<=2.1){var T=1/window.devicePixelRatio,O=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(P,R,D,F,K,q,W,M){if("nodeName"in P&&/img/i.test(P.nodeName))for(var G=arguments.length-1;G>=1;G--)arguments[G]=arguments[G]*T;else typeof M>"u"&&(arguments[1]*=T,arguments[2]*=T,arguments[3]*=T,arguments[4]*=T);O.apply(this,arguments)}}var I=function(P,R){this._bIsPainted=!1,this._android=o(),this._htOption=R,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=R.width,this._elCanvas.height=R.height,P.appendChild(this._elCanvas),this._el=P,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return I.prototype.draw=function(P){var R=this._elImage,D=this._oContext,F=this._htOption,K=P.getModuleCount(),q=F.width/K,W=F.height/K,M=Math.round(q),G=Math.round(W);R.style.display="none",this.clear();for(var Q=0;K>Q;Q++)for(var he=0;K>he;he++){var ue=P.isDark(Q,he),ke=he*q,Te=Q*W;D.strokeStyle=ue?F.colorDark:F.colorLight,D.lineWidth=1,D.fillStyle=ue?F.colorDark:F.colorLight,D.fillRect(ke,Te,q,W),D.strokeRect(Math.floor(ke)+.5,Math.floor(Te)+.5,M,G),D.strokeRect(Math.ceil(ke)-.5,Math.ceil(Te)-.5,M,G)}this._bIsPainted=!0},I.prototype.makeImage=function(){this._bIsPainted&&S.call(this,$)},I.prototype.isPainted=function(){return this._bIsPainted},I.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},I.prototype.round=function(P){return P&&Math.floor(1e3*P)/1e3},I}():function(){var $=function(S,T){this._el=S,this._htOption=T};return $.prototype.draw=function(S){for(var T=this._htOption,O=this._el,I=S.getModuleCount(),P=Math.floor(T.width/I),R=Math.floor(T.height/I),D=['<table style="border:0;border-collapse:collapse;">'],F=0;I>F;F++){D.push("<tr>");for(var K=0;I>K;K++)D.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+P+"px;height:"+R+"px;background-color:"+(S.isDark(F,K)?T.colorDark:T.colorLight)+';"></td>');D.push("</tr>")}D.push("</table>"),O.innerHTML=D.join("");var q=O.childNodes[0],W=(T.width-q.offsetWidth)/2,M=(T.height-q.offsetHeight)/2;W>0&&M>0&&(q.style.margin=M+"px "+W+"px")},$.prototype.clear=function(){this._el.innerHTML=""},$}();Th=function($,S){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:d.H},typeof S=="string"&&(S={text:S}),S)for(var T in S)this._htOption[T]=S[T];typeof $=="string"&&($=document.getElementById($)),this._android=o(),this._el=$,this._oQRCode=null,this._oDrawing=new k(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},Th.prototype.makeCode=function($){this._oQRCode=new r(a($,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData($),this._oQRCode.make(),this._el.title=$,this._oDrawing.draw(this._oQRCode),this.makeImage()},Th.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},Th.prototype.clear=function(){this._oDrawing.clear()},Th.CorrectLevel=d})();const XN=Th;function l3(e){const r=s1();return Ge(()=>{r.current&&new XN(r.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:XN.CorrectLevel.H})},[e.data]),p("div",{style:"border: 5px solid white; display: inline-block;",ref:r})}function Tye(e,r){const t=[];let n=0,i=e.length/r;for(;i>0;)t.push(e.slice(n,n+r)),n+=r,i-=1;return t}function Iye(e){const r=e.onClose||(()=>{}),{note:t,recipient:n,quickZap:i=!1}=e,s=1e3,o=[s,5e3,1e4,2e4,5e4,1e5,1e6],a={1e3:"👍",5e3:"💜",1e4:"😍",2e4:"🤩",5e4:"🔥",1e5:"🚀",1e6:"🤯"},[l,u]=ve(),[d,h]=ve(e.invoice),[v,g]=ve(s),[b,m]=ve(),[x,E]=ve(),[k,$]=ve(),[S,T]=ve(),[O,I]=ve(1),[P,R]=ve(!1),[D,F]=ve(!1),K=l?D&&O!==4||l.maxCommentLength>0:!1,[q,W]=GI("defaultZapAmount",0);Ge(()=>{g(q),m(q)},[q]),Ge(()=>{e.show&&(T(void 0),E(void 0),I(1),h(void 0),$(void 0))},[e.show]),Ge(()=>{i&&D&&he()},[i,D]),Ge(()=>{k&&!k.url&&setTimeout(()=>{r()},1e3)},[k]),Ge(()=>{if(e.lnurl&&e.show)try{const fe=new kye(e.lnurl);u(fe),fe.load().then(()=>{F(fe.canZap)}).catch(y=>ue(y,"ln url error"))}catch(fe){fe instanceof Error&&T(fe.message)}},[e.lnurl,e.show]);const M=to(()=>{if(l){const fe=l.min/1e3,y=l.max/1e3;return o.filter(w=>w>=fe&&w<=y)}return[]},[l]),G=to(()=>Tye(M,3),[M]),Q=fe=>{T(void 0),g(fe)};async function he(){if(!v||!l)return null;let fe;if(n&&O!==4){let y={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:te.getPubKey(),content:x||"",tags:[["e",t],["p",n],["relays",...Ir.relays.keys()]]};const w=nt.getEventHash(y);y.id=w;const A=await te.sign(y);y={...y,sig:A},y&&(fe=y)}try{const y=await l.getInvoice(v,x,fe);y.pr&&(h(y.pr),await Te(y))}catch(y){ue(y,"invoice fail")}}function ue(fe,y){if(console.error("lnurl error",fe),fe instanceof ku)switch(fe.code){case LS.ServiceUnavailable:{T("messages.LNURLFail");return}case LS.InvalidLNURL:{T("messages.InvalidLNURL");return}}T(y)}function ke(){if(!l)return null;const fe=l.min/1e3,y=l.max/1e3;return p("div",{className:"custom-amount flex",children:[p("input",{type:"number",min:fe,max:y,className:"f-grow mr-10 input",placeholder:"Custom",value:b,onChange:w=>m(parseInt(w.target.value))}),p("button",{className:"btn btn-neutral",type:"button",disabled:!b||v===b,onClick:()=>Q(b??0),children:"Confirm"})]})}async function Te(fe){var y;try{if(window.webln){R(!0),await window.webln.enable();const w=await((y=window.webln)==null?void 0:y.sendPayment((fe==null?void 0:fe.pr)??""));console.log(w),$((fe==null?void 0:fe.successAction)??{})}}catch(w){console.warn(w),w instanceof Error&&T(w.toString())}finally{R(!1)}}function Ce(fe,y){return p("div",{className:"flex gap-2 my-2",children:y.map(w=>p("button",{className:`btn btn-sm ${w===fe?"btn-primary":"btn-neutral"}`,onClick:()=>Q(w),children:[a[w]&&p(Be,{children:[a[w]," "]}),sr.formatAmount(w,0)]},w))})}function Ye(){return!l||d?null:p(Be,{children:[p("h3",{children:"Zap amount in sats"}),G.map(fe=>Ce(v,fe)),ke(),p("div",{className:"flex",children:K&&p("input",{className:"input",type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:D&&O!==4?250:l.maxCommentLength,onChange:fe=>E(fe.target.value)})}),(v??0)>0&&p("div",{style:"margin-top: 10px;",children:p("button",{class:"btn btn-primary",width:"100%",onClick:()=>he(),children:["Send ",v===b?b:sr.formatAmount(v,0)," sats"]})})]})}function ge(){return k||!d?null:p(Be,{children:p("div",{className:"invoice",children:[e.notice&&p("b",{className:"error",children:e.notice}),P?p("h4",{children:"Paying"}):"",p("div",{className:"actions",children:d&&p(Be,{children:[p(l3,{data:d,link:`lightning:${d}`}),p("div",{style:"margin-top: 15px",children:[p(Jn,{copyStr:d,text:"Copy invoice"}),p("a",{className:"button",href:`lightning:${d}`,children:"Open wallet"})]})]})})]})})}function ce(){return!k||i?null:(q||W(v),p("div",{className:"success-action",children:[p("p",{className:"paid",children:(k==null?void 0:k.description)??"Paid"}),k.url&&p("p",{children:p("a",{href:k.url,rel:"noreferrer",target:"_blank",children:k.url})})]}))}const ye=l!=null&&l.canZap?"Send zap to ":"Send sats to ";return!(e.show??!1)||i&&window.webln&&!S?null:p(zo,{showContainer:!0,centerVertically:!0,onClose:r,children:p("div",{className:"bg-black rounded-lg p-8 w-[400px] relative",children:p("div",{className:"lnurl-tip",onClick:fe=>fe.stopPropagation(),children:[p("div",{className:"absolute top-2.5 right-2.5 cursor-pointer",children:p(y9,{width:20,height:20})}),p("div",{className:"lnurl-header",children:p("h2",{children:[e.title||ye,p(Ft,{pub:n||""})]})}),Ye(),S&&p("p",{className:"error",children:S}),ge(),ce()]})})})}const Oye=({event:e})=>{const[r,t]=ve({totalZapAmount:0,formattedZapAmount:"",zapped:!1,showZapModal:!1,lightning:void 0,defaultZapAmount:0}),[n]=GI("defaultZapAmount",0),[i,s]=ve(!1);let o=null;const a=h=>{h.preventDefault(),h.stopPropagation(),r.showZapModal||t(v=>({...v,showZapModal:!0}))},l=h=>{o=setTimeout(()=>{s(!0),a(h)},500)},u=h=>{h.preventDefault(),h.stopPropagation(),clearTimeout(o),i||a(h),s(!1)};Ge(()=>{const h=Ue.getProfile(e.pubkey,g=>{if(!g)return;const b=g.lud16||g.lud06;t(m=>({...m,lightning:b}))}),v=nt.getZaps(e.id,d);return()=>{h(),v()}},[e]);const d=tu(h=>{const v=Array.from(h==null?void 0:h.values()).map(m=>Mt.get(m));let g=0,b=!1;v.forEach(m=>{var $;const x=($=m==null?void 0:m.tags.find(S=>S[0]==="bolt11"))==null?void 0:$[1];if(!x){console.log("Invalid zap, missing bolt11 tag");return}m&&_O(m,!1)===te.getPubKey()&&(b=!0);const E=aH(x),k=((E==null?void 0:E.amount)||0)/1e3;g+=k}),t(m=>({...m,totalZapAmount:g,zapped:b,formattedZapAmount:g&&MS(g)||""}))},1e3,{leading:!0});return r.lightning?p(Be,{children:[p("a",{onMouseDown:l,onMouseUp:u,className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none
          ${r.zapped?"text-iris-orange":"text-neutral-500 hover:text-iris-orange"}`,children:[p(je,{when:n,children:eo.quickZap}),p(je,{when:!n,children:p(hie,{width:18})}),r.formattedZapAmount]}),r.showZapModal&&p(Iye,{quickZap:!!n&&!i,show:!0,lnurl:r.lightning,note:e.id,recipient:e.pubkey,onClose:()=>t(h=>({...h,showZapModal:!1}))})]}):null},Aye=e=>{const[r,t]=ve({replyCount:0}),[n,i]=ve({trusted:!1,distrusted:!1}),s=e.event,o=e.wot;Ge(()=>nt.getThreadRepliesCount(s.id,u),[s]),Ge(()=>{const v=o==null?void 0:o.vertice,g=v==null?void 0:v.score;i(b=>({...b,trusted:g==null?void 0:g.isDirectTrusted(),distrusted:g==null?void 0:g.isDirectDistrusted()}))},[o]);function a(v){v.preventDefault(),v.stopPropagation(),i(g=>{let b=g.trusted?0:1;return mt.publishTrust(s.id,b,Is.Item),{...g,trusted:!g.trusted,distrusted:!1}})}function l(v){v.preventDefault(),v.stopPropagation(),i(g=>{let b=g.distrusted?0:-1;return mt.publishTrust(s.id,b,Is.Item),{...g,trusted:!1,distrusted:!g.distrusted}})}const u=v=>{t(g=>({...g,replyCount:v}))};function d(){var v;e.standalone?(v=document.querySelector("textarea"))==null||v.focus():qt(`/${te.toNostrBech32Address(e.event.id,"note")}`)}function h(){var v,g,b,m;return p(Be,{children:[p("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.trusted?"trusted":"hover:trusted text-neutral-500"}`,onClick:x=>a(x),title:n.trusted?"Trusted":"Trust",children:[n.trusted?p(ob,{size:18,fill:"green",stroke:"currentColor"}):p(ob,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((g=(v=o==null?void 0:o.vertice)==null?void 0:v.score)==null?void 0:g.renderTrustCount())||""]}),p("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.distrusted?"distrusted":"hover:distrusted text-neutral-500"}`,onClick:x=>l(x),title:n.distrusted?"Distrusted":"Distrust",children:[n.distrusted?p(sb,{size:18,fill:"red",stroke:"currentColor"}):p(sb,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((m=(b=o==null?void 0:o.vertice)==null?void 0:b.score)==null?void 0:m.renderDistrustCount())||""]})]})}return p(Be,{children:[e.standalone&&p($ye,{event:e.event,wot:o}),p("div",{className:"flex gap-4",children:[p("a",{className:"btn-ghost btn-sm hover:bg-transparent hover:text-iris-blue btn content-center gap-2 rounded-none text-neutral-500",onClick:()=>d(),children:[p(pie,{width:18}),p("span",{children:r.replyCount||""})]}),p(Eye,{event:e.event}),p(xye,{event:e.event}),p(Oye,{event:e.event}),h()]})]})},Cye=Qn(Aye);var Pye=function(e){return e instanceof RegExp},Nye=function(r){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return r&&n.test(r)?r.replace(t,"\\$&"):r},uH=function(e){return typeof e=="string"},Rye=function(e){var r=[];return e.forEach(function(t){Array.isArray(t)?r=r.concat(t):r.push(t)}),r};function Dye(e,r,t){var n=0,i=0;if(e==="")return e;if(!e||!uH(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=r;Pye(s)||(s=new RegExp("("+Nye(s)+")","gi"));for(var o=e.split(s),a=1,l=o.length;a<l;a+=2){if(o[a]===void 0||o[a-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=o[a].length,n+=o[a-1].length,o[a]=t(o[a],a,n),n+=i}return o}var Bye=function(r,t,n){return Array.isArray(r)||(r=[r]),Rye(r.map(function(i){return uH(i)?Dye(i,t,n):i}))};const Mye=oo(Bye),Lye={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableAppleMusic",component:({match:e})=>p("iframe",{className:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},Fye={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableAppleMusic",component:({match:e})=>{const r=e.includes("?i=")?"applepodcast-small":"applepodcast-large";return p("iframe",{className:r,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}},Z$=5;function Cv({children:e,margin:r="2000px",loadMore:t}){const[n,i]=ve(Z$),s=Vr(null),o=Vr(null),a=()=>{if(o.current){const l=window.innerHeight||document.documentElement.clientHeight;o.current.getBoundingClientRect().top<=l&&i(u=>u+Z$)}};return Ge(()=>{if(o.current&&!s.current){const l={root:null,rootMargin:r,threshold:0};s.current=new IntersectionObserver(u=>{u.forEach(d=>{d.isIntersecting&&i(h=>h+Z$)})},l),s.current.observe(o.current)}return requestAnimationFrame(()=>{a()}),()=>{s.current&&(s.current.disconnect(),s.current=null)}},[r,t,e.length]),Ge(()=>{t&&n>=e.length&&t()},[n,e.length,t]),p(Be,{children:[e.slice(0,n),n<e.length&&p("div",{ref:o})]})}class Jp{constructor(r){Z(this,"map");Z(this,"sortedKeys");Z(this,"compare");this.map=new Map,this.sortedKeys=[],r?typeof r=="string"?this.compare=(t,n)=>t.value[r]>n.value[r]?1:t.value[r]<n.value[r]?-1:0:this.compare=r:this.compare=(t,n)=>t.key>n.key?1:t.key<n.key?-1:0}binarySearch(r,t){let n=0,i=this.sortedKeys.length;for(;n<i;){const s=n+i>>1,o=this.sortedKeys[s],a=this.map.get(o);this.compare({key:r,value:t},{key:o,value:a})<0?i=s:n=s+1}return n}set(r,t){const n=this.map.has(r);if(this.map.set(r,t),n){const s=this.sortedKeys.indexOf(r);s!==-1&&this.sortedKeys.splice(s,1)}const i=this.binarySearch(r,t);this.sortedKeys.splice(i,0,r)}get(r){return this.map.get(r)}last(){if(this.sortedKeys.length===0)return;const r=this.sortedKeys[this.sortedKeys.length-1];return{key:r,value:this.map.get(r)}}first(){if(this.sortedKeys.length===0)return;const r=this.sortedKeys[0];return{key:r,value:this.map.get(r)}}*[Symbol.iterator](){for(const r of this.sortedKeys)yield{key:r,value:this.map.get(r)}}*reverse(){for(let r=this.sortedKeys.length-1;r>=0;r--){const t=this.sortedKeys[r];yield{key:t,value:this.map.get(t)}}}*keys(){for(const r of this.sortedKeys)yield r}*values(){for(const r of this.sortedKeys)yield this.map.get(r)}*entries(){for(const r of this.sortedKeys)yield[r,this.map.get(r)]}*range(r={}){const{gte:t,lte:n,direction:i="asc"}=r,s=t?this.binarySearch(t,this.map.get(t)):0,o=n?this.binarySearch(n,this.map.get(n)):this.sortedKeys.length;if(i==="asc")for(let a=s;a<o;a++){const l=this.sortedKeys[a];yield{key:l,value:this.map.get(l)}}else for(let a=o-1;a>=s;a--){const l=this.sortedKeys[a];yield{key:l,value:this.map.get(l)}}}has(r){return this.map.has(r)}delete(r){if(this.map.delete(r)){const t=this.sortedKeys.indexOf(r);return t!==-1&&this.sortedKeys.splice(t,1),!0}return!1}get size(){return this.map.size}}const cH=({event:e,isQuote:r,standalone:t,fullWidth:n})=>p("span",{className:`flex flex-col items-center flex-shrink-0 ${n?"mr-2":"mr-4"}`,children:[p(je,{when:e.pubkey,children:p(wt,{href:`/${e.pubkey}`,children:p(Wn,{str:te.toNostrBech32Address(e.pubkey,"npub"),width:40})})}),p(je,{when:r&&!t,children:p("div",{className:"border-l-2 border-neutral-700 h-full"})})]}),JN=({event:e,meta:r={},asInlineQuote:t=!1,isReply:n=!1,isQuote:i=!1,isQuoting:s=!1,showReplies:o=0,showRepliedMsg:a,standalone:l=!1,fullWidth:u})=>{const[d,h]=ve([]);!l&&o&&d.length&&(i=!0),r.replyingTo&&a&&(s=!0),a===void 0&&(a=l),u===void 0&&(u=!n&&!s&&!i&&!t);const v=Av(Ke(e.id),["badMessage","neutralMessage","goodMessage"],""),g=to(()=>{const k=[];return l?k.push(""):k.push("cursor-pointer transition-all ease-in-out duration-200 hover:bg-neutral-999"),i&&k.push("quote pb-2"),s?k.push("quoting pt-0"):k.push("pt-4"),t&&k.push("inline-quote border-2 border-neutral-900 rounded-lg my-2"),u&&k.push("full-width"),k.join(" ")},[l,i,s,t,u]);Ge(()=>{const k=(O,I)=>{const P=O.value,R=I.value;return!P&&!R?0:P?R?P.created_at-R.created_at:1:-1},$=new Jp(k),S=O=>{if(Da(O)!==e.id)return;$.set(O.id,O);const I=Array.from($.keys()).slice(0,o);h(I)},T=gt.subscribe({"#e":[e.id],kinds:[1]},S,!1);return()=>{T()}},[e.id,o]);let b=jF(e);b||(b=r.replyingTo);function m(k){var $,S;if(!l&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(T=>k.target.closest(T))&&!(($=window.getSelection())!=null&&$.toString())){if(k.stopPropagation(),e.kind===7){const T=(S=e.tags)==null?void 0:S.reverse().find(O=>O[0]==="e")[1];return qt(`/${T}`)}qt(`/${te.toNostrBech32Address(e.id,"note")}`)}}const x=p(je,{when:r.replyingTo&&a,children:p(no,{id:r.replyingTo,isQuote:!0,showReplies:0},e.id+r.replyingTo)}),E=p(je,{when:!l&&!n&&!s&&b,children:p(wt,{className:"text-iris-blue text-sm block mb-2",href:`/${te.toNostrBech32Address(b||"","note")}`,children:ne("show_thread")})});return p(Be,{children:[x,p("div",{className:`px-2 md:px-4 pb-2 ${g}`,onClick:k=>m(k),children:[E,p("div",{className:"flex flex-row",onClick:k=>m(k),children:[p(je,{when:!u,children:p(cH,{event:e,isQuote:i,standalone:l,fullWidth:u})}),p($H,{event:e,standalone:l,isQuote:i,asInlineQuote:t,fullWidth:u,wot:v})]})]},e.id+"note"),p(je,{when:!(i||t),children:p("hr",{className:"opacity-10"})}),p(Cv,{children:d.map(k=>p(no,{id:k,isReply:!0,isQuoting:!l,showReplies:1},k))})]})};class u3 extends yn{constructor(){super();Z(this,"key");Z(this,"cls");Z(this,"actionDone");Z(this,"action");Z(this,"activeClass");Z(this,"hoverAction");Z(this,"handleMouseEnter",()=>{this.setState({hover:!0})});Z(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.cls="block-btn",this.key="blocked",this.activeClass="blocked",this.action=ne("block"),this.actionDone=ne("blocked"),this.hoverAction=ne("unblock"),this.state={...this.state,hover:!1}}onClick(t){var s,o;t.preventDefault();const n=!this.state[this.key],i=te.toNostrHexAddress(this.props.id);i&&Ue.block(i,n),(o=(s=this.props).onClick)==null||o.call(s,t)}componentDidMount(){Ue.getBlockedUsers(t=>{const n=t==null?void 0:t.has(te.toNostrHexAddress(this.props.id));this.setState({blocked:n})})}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,p("button",{className:`${this.cls||this.key} ${t?this.activeClass:""} ${this.props.className||""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:p("span",{children:[ne(i)," ",this.props.showName?p(Ft,{pub:this.props.id,hideBadge:!0}):""]})})}}let Gl=class extends yn{constructor(){super();Z(this,"key");Z(this,"cls");Z(this,"actionDone");Z(this,"action");Z(this,"activeClass");Z(this,"hoverAction");Z(this,"handleMouseEnter",()=>{this.setState({hover:!0})});Z(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.key="follow",this.activeClass="following",this.action=ne("follow_btn"),this.actionDone=ne("following_btn"),this.hoverAction=ne("unfollow_btn"),this.state={...this.state,hover:!1}}onClick(t){t.preventDefault();const n=!this.state[this.key],i=te.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){Ue.setFollowed(i,n);return}this.key==="block"&&Ue.setBlocked(i,n)}}componentDidMount(){if(this.key==="follow"){Ue.getFollowedByUser(te.getPubKey(),t=>{const n=te.toNostrHexAddress(this.props.id),i=n&&(t==null?void 0:t.has(n));this.setState({follow:i})});return}}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,p("button",{className:`btn ${this.props.className||this.key} ${t?this.activeClass:""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:ne(i)})}};const hH=({children:e})=>{const[r,t]=ve(!1),n=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),t(s))};return Ge(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&t(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),p("div",{className:"relative",onClick:i=>n(i,!r),onMouseEnter:i=>n(i,!0),onMouseLeave:i=>n(i,!1),children:[p("button",{className:"dropbtn btn btn-circle btn-sm btn-ghost text-neutral-500 pb-2",children:"…"}),p(je,{when:r,children:p("div",{className:"absolute z-10 p-2 flex flex-col gap-2 right-0 w-56 rounded-md shadow-lg bg-black border-neutral-500 border-2",children:e})})]})},jye=({event:e})=>{const[r,t]=ve(null);Ge(()=>{if(!(e!=null&&e.id))return;const i=LF(e),s=i&&nt.eventsMetaDb.get(i);s&&t(s)},[e]);const n=Array.from((r==null?void 0:r.relays)||[]);return p("div",{className:"flex flex-col",children:[p("h2",{children:ne("event_detail")}),p("p",{children:ne("seen_on")}),n.length===0?p("p",{children:ne("iris_api_source")}):p("ul",{className:"space-y-2",children:n.map(i=>p("li",{className:"text-lg",children:i}))}),p("pre",{className:"overflow-auto bg-gray-800 rounded p-2 max-h-96 font-mono",children:p("code",{children:JSON.stringify({...e},null,2)})})]})},dH=e=>{const{event:r,id:t}=e,[n]=ve(!1),[i,s]=ve(!1),o=()=>s(!1),a=()=>{},l=b=>{if(b.preventDefault(),confirm("Delete message?")){const m=te.toNostrHexAddress(t);m&&nt.publish({kind:5,content:"deleted",tags:[["e",m]]})}},u=b=>{b.preventDefault(),be.get("mutedNotes").get(e.id).put(!n)},d=b=>{if(b.preventDefault(),confirm("Publicly report and hide message?")){const m=te.toNostrHexAddress(e.id);m&&e.event&&nt.publish({kind:5,content:"reported",tags:[["e",m],["p",e.event.pubkey]]})}},h=b=>{b.preventDefault(),e.event&&sr.translateText(e.event.content).then(m=>{var x;(x=e.onTranslate)==null||x.call(e,m)})},v=b=>{b.preventDefault();const m=te.toNostrHexAddress(t);if(m){const x=Mt.get(m);x&&(console.log("broadcasting",m,x),nt.publish(x))}},g=`https://iris.to/${te.toNostrBech32Address(t,"note")}`;return p("div",{children:[p(hH,{children:[p(Jn,{className:"btn btn-sm",text:ne("copy_link"),copyStr:g},`${t}copy_link`),p(Jn,{className:"btn btn-sm",text:ne("copy_note_ID"),copyStr:te.toNostrBech32Address(t,"note")||""},`${t}copy_id`),p("a",{className:"btn btn-sm",href:"#",onClick:u,children:ne(n?"unmute_notifications":"mute_notifications")}),r?p(Be,{children:[p("a",{className:"btn btn-sm",href:"#",onClick:v,children:ne("resend_to_relays")}),p("a",{className:"btn btn-sm",href:"#",onClick:h,children:ne("translate")}),p(Jn,{className:"btn btn-sm",text:ne("copy_raw_data"),copyStr:JSON.stringify(r,null,2)},`${t}copyRaw`),r.pubkey===te.getPubKey()?p("a",{className:"btn btn-sm",href:"#",onClick:l,children:ne("delete")}):p(Be,{children:[p("a",{className:"btn btn-sm",href:"#",onClick:d,children:ne("report_public")}),p(Gl,{className:"btn btn-sm",id:r==null?void 0:r.pubkey}),p(u3,{className:"btn btn-sm",onClick:a,id:r==null?void 0:r.pubkey,showName:!0})]}),p("a",{className:"btn btn-sm",href:"#",onClick:b=>{b.preventDefault(),s(!0)},children:ne("event_detail")})]}):p(Be,{})]}),r&&i&&p(zo,{showContainer:!0,onClose:o,children:[p(jye,{event:r}),p("button",{className:"btn btn-sm btn-primary mt-4",onClick:o,children:ne("done")})]})]})};function zye(e){var n;const t=((n=e.event.tags)==null?void 0:n.some(i=>i[0]==="p"&&i[1]===te.getPubKey()))?"started following you":"updated their following list";return p("div",{className:"msg",children:p("div",{className:"msg-content",children:p("div",{style:{display:"flex",alignItems:"center"},children:[p("i",{className:"repost-btn reposted",style:{marginRight:15},children:eo.newFollower}),p(wt,{href:`/${te.toNostrBech32Address(e.event.pubkey,"npub")}`,children:p(Ft,{pub:e.event.pubkey})}),p("span",{className:"mar-left5",children:[" ",t]})]})})})}const Hye=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),qt(`/${te.toNostrBech32Address(r,"note")}`))};function Uye(e){var u;const[r,t]=ve([]),n=Da(e.event),i=Mt.get(n),s=(i==null?void 0:i.pubkey)===te.getPubKey(),o=(u=i==null?void 0:i.tags)==null?void 0:u.find(d=>d[0]==="p"&&d[1]===te.getPubKey()),a=s?"liked your note":o?"liked a note where you were mentioned":"liked a note";if(Ge(()=>{if(n)return nt.getLikes(n,d=>{t(Array.from(d))})},[n]),!n)return null;const l=`/${te.toNostrBech32Address(e.event.pubkey,"npub")}`;return p("div",{children:p("div",{onClick:d=>Hye(d,n),children:[p("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[p("i",{className:"like-btn text-iris-red",children:p(WI,{width:18})}),p("span",{children:[p("a",{href:l,children:p(Ft,{pub:e.event.pubkey})}),r.length>1&&p(Be,{children:[" and ",r.length-1," others "]})," ",a]})]}),p(no,{id:n,fullWidth:!1},n+e.event.id)]})},e.event.id)}function QN(e){var i;const[r,t]=ve([]),n=wO(e.event)||"";return Ge(()=>{if(e.notification){const s=nt.getReposts(n,o=>{t(Array.from(o))});return()=>s()}},[e.notification,n]),p("div",{children:[p("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[p("i",{children:p(l9,{width:18})}),p(wt,{href:`/${te.toNostrBech32Address(e.event.pubkey,"npub")}`,children:p(Ft,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),p("span",{children:[r.length>1&&`and ${r.length-1} others`," ",ne("reposted")]})]}),p(no,{id:n,fullWidth:e.fullWidth},n+e.event.id)]})}const Kye=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),qt(`/${te.toNostrBech32Address(r,"note")}`))};function Wye(e){var d;const[r,t]=ve([]),n=Da(e.event),i=Mt.get(n),s=(i==null?void 0:i.pubkey)===te.getPubKey(),o=(d=i==null?void 0:i.tags)==null?void 0:d.find(h=>h[0]==="p"&&h[1]===te.getPubKey()),a=s?"zapped your note":o?"zapped a note where you were mentioned":"zapped a note";if(Ge(()=>n?nt.getZaps(n,h=>{t(Array.from(h.values()))}):()=>null,[n]),!n)return null;let l=null;try{l=_O(e.event)}catch(h){return console.error("no zapping user found for event",e.event.id,h),""}const u=`/${l}`;return p("div",{children:p("div",{onClick:h=>Kye(h,n||""),children:[p("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[p("i",{className:"zap-btn text-iris-orange",children:p(Fie,{width:18,height:18})}),p("div",{children:[p("a",{href:u,children:p(Ft,{pub:l||""})}),r.length>1&&p("span",{children:[" and ",r.length-1," others "]})," ",a]})]}),p(no,{id:n,fullWidth:!1},n+e.event.id)]})})}const Vye=e=>{const r=te.toNostrHexAddress(e.id),[t,n]=ve({sortedReplies:[],meta:{},event:r&&Mt.get(r)}),i=Vr(),s=Vr(!1),o=d=>{if(clearTimeout(i.current),s.current)return;t.retrieving&&n(g=>({...g,retrieving:!1}));const h=FF(d),v={npub:te.toNostrBech32Address(d.pubkey,"npub"),noteId:te.toNostrBech32Address(d.id,"note"),time:d.created_at*1e3,isMine:te.getPubKey()===d.pubkey,attachments:[],replyingTo:h};n(g=>({...g,event:d,meta:v}))};Ge(()=>{if(!e.id){console.log("error: no id",e);return}s.current=!1;const d=te.toNostrHexAddress(e.id);return i.current=setTimeout(()=>{n(h=>({...h,retrieving:!0}))},1e3),d&&nt.getEventById(d,!0,h=>o(h)),()=>{s.current=!0}},[]),Ge(()=>{e.standalone&&!t.msg&&t.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const a=()=>e.asInlineQuote?null:p(dH,{id:e.id||"",event:t.event}),l=()=>{var v;let d="msg";return e.standalone&&(d+=" standalone"),(e.isQuote||e.showReplies&&((v=t.sortedReplies)==null?void 0:v.length))&&(d+=" quote"),d};return e.id?t.event?Ue.isBlocked(t.event.pubkey)?e.standalone||e.isQuote?p("div",{className:"msg",children:p("div",{className:"msg-content",children:p("p",{style:{display:"flex",alignItems:"center"},children:[p("i",{style:{marginRight:"15px"},children:eo.newFollower}),p("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var h,v,g;let d=JN;if(t.event.kind===1){const b=(v=(h=t.event)==null?void 0:h.tags)==null?void 0:v.findIndex(m=>m[0]==="e"&&m[3]==="mention");((g=t.event)==null?void 0:g.content)===`#[${b}]`&&(d=QN)}else d={1:JN,3:zye,6:QN,7:Uye,9735:Wye}[t.event.kind];return d?p(d,{className:l(),event:t.event,meta:t.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<t.event.created_at,...e},e.id):(console.error("unknown event kind",t.event),null)})():p("div",{className:l(),children:p("div",{className:`msg-content retrieving ${t.retrieving?"opacity-100":"opacity-0"} transition-opacity duration-700 ease-in-out`,style:{display:"flex",alignItems:"center"},children:[p("div",{className:"text",children:ne("looking_up_message")}),p("div",{children:a()})]})},e.id):(console.error("no id on event",e),null)},no=Qn(Vye),X$=e=>`#[${e}]`,qye={regex:/#\[([0-9]+)]/g,component:({match:e,index:r,event:t})=>{if(!(t!=null&&t.tags))return console.log("no tags",t),p(Be,{children:X$(e)});const n=t.tags[parseInt(e)];if(!n)return console.log("no matching tag",r,t),p(Be,{children:X$(e)});const[i,s]=n;return i==="p"?p(wt,{href:`/${ka.npubEncode(s)}`,className:"link",children:[" ",p(Ft,{pub:s,hideBadge:!0})]}):i==="e"?p(no,{id:s,asInlineQuote:!0},s):(console.log("unknown tag type",i,r,t),p(Be,{children:X$(e)}))}},Gye=/\bnostr:(n(?:event|profile)1\w+)\b/g,Yye={regex:Gye,component:({match:e})=>{try{const{type:r,data:t}=ka.decode(e);if(r==="nprofile")return p(Be,{children:p(wt,{className:"link",href:`/${t.pubkey}`,children:[" ",p(Ft,{pub:t.pubkey})]})});if(r==="nevent")return p(no,{id:t.id,asInlineQuote:!0})}catch(r){console.log(r)}return p("span",{children:e})}},Zye=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,Xye={regex:Zye,component:({match:e})=>{const r=te.toNostrHexAddress(e.replace("@",""));return p(no,{id:r,asInlineQuote:!0})}},Jye=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,fH={regex:Jye,component:({match:e})=>{const r=e.replace("@","");return p(wt,{href:`/${r}`,className:"link",children:[" ",p(Ft,{pub:r,hideBadge:!0})]})}},Qye={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,settingsKey:"enableSpotify",component:({match:e})=>p("iframe",{className:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${e}`,frameBorder:"0",allow:"encrypted-media"})},eme={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableSpotify",component:({match:e})=>p("iframe",{className:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},tme={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,settingsKey:"enableSpotify",component:({match:e})=>p("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},rme={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,settingsKey:"enableSpotify",component:({match:e})=>p("iframe",{className:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${e}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},nme={regex:/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,settingsKey:"enableTwitch",component:({match:e})=>p("iframe",{className:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${e}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},ime={regex:/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,settingsKey:"enableTwitch",component:({match:e})=>p("iframe",{className:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${e}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},sme={regex:/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,settingsKey:"enableAudio",component:({match:e})=>p("audio",{src:e,controls:!0,loop:!0})},pH={regex:new RegExp("(?<=\\s|^)(#\\w+)","g"),component:({match:e})=>p(wt,{href:`/search/${encodeURIComponent(e)}`,className:"link",children:e})},vH={regex:/(https?:\/\/\S+?\.(?:png|jpg|jpeg|gif|svg|webp)(?:\?\S*?)?)/gi,settingsKey:"enableImages",component:({match:e})=>{const[r,t]=ve(!1);return p("div",{className:"flex justify-center items-center md:justify-start min-h-96 my-2",children:[p(Mo,{onClick:i=>{i.stopPropagation(),t(!0)},className:"my-2 rounded md:max-h-96 max-w-full cursor-pointer",src:e}),p(je,{when:r,children:p(zo,{centerVertically:!0,onClose:()=>t(!1),children:p(Mo,{className:"rounded max-h-[90vh] max-w-[90vw]",src:e})})})]})}},ome={regex:/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,settingsKey:"enableInstagram",component:({match:e})=>p("iframe",{className:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${e}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},ame={regex:/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,component:({match:e})=>(e.startsWith("lightning:")||(e=`lightning:${e}`),p("a",{href:e,onClick:r=>sr.handleLightningLinkClick(r),children:"⚡ Pay with lightning"}))},lme={regex:/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,settingsKey:"enableSoundCloud",component:({match:e})=>p("iframe",{className:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${e}`,frameBorder:"0",allow:"encrypted-media"})},ume={regex:/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,settingsKey:"enableTidal",component:({match:e})=>p("iframe",{className:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${e}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},cme={regex:/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,settingsKey:"enableTiktok",component:({match:e})=>p("iframe",{className:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${e}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},hme={regex:/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,settingsKey:"enableTwitter",component:({match:e})=>p("iframe",{style:{maxWidth:"350px",height:"450px",backgroundColor:"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(e)}`})},gH={regex:/(https?:\/\/[^\s]+)/g,component:({match:e})=>{const r=e.replace(/^(https:\/\/)?iris.to/,"");return p(wt,{className:"link",target:"_blank",href:r,children:e.replace(/^https?:\/\//,"").replace(/\/$/,"")})}},yH={regex:/(https?:\/\/\S+?\.(?:mp4|webm|ogg|mov)(?:\?\S*)?)/gi,settingsKey:"enableVideo",component:({match:e})=>p("div",{className:"relative w-full object-contain my-2 min-h-96",children:p("video",{className:"rounded max-h-[70vh] md:max-h-96",src:e,controls:!0,muted:!0,autoPlay:!0,playsInline:!0,loop:!0,poster:`https://imgproxy.iris.to/thumbnail/638/${e}`})})},dme={regex:/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,settingsKey:"enableWavLake",component:({match:e})=>p("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${e}`,frameBorder:"0",loading:"lazy"})},fme={regex:/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,settingsKey:"enableYoutube",component:({match:e})=>p("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},pme=[sme,vH,yH,fme,ome,hme,lme,rme,Qye,tme,eme,Lye,Fye,ume,cme,nme,ime,dme,ame,fH,Xye,Yye,pH,qye,gH],vme=[fH,gH,pH];let mH={};be.get("settings").on(e=>mH=e);const c3=Qn(({children:e,event:r,textOnly:t})=>{let n=[e==null?void 0:e.trim()];return(t?vme:pme).forEach(s=>{mH[s.settingsKey||""]!==!1&&(n=Mye(n,s.regex,(o,a)=>s.component({match:o,index:a,event:r,key:`${o}-${a}`})))}),n=n.map((s,o,a)=>{var l,u,d,h;return typeof s=="string"&&(o<a.length-1&&!((u=(l=a[o+1])==null?void 0:l.props)!=null&&u.href)&&(s=s.replace(/\n+$/,"")),o>0&&!((h=(d=a[o-1])==null?void 0:d.props)!=null&&h.href)&&(s=s.replace(/^\n+/,""))),s}),p(Be,{children:n})});function R1({date:e}){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;let o="";return t<n?o=ne("now"):t<i?o=Math.floor(t/n)+"m":t<s?o=Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?o=e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):o=e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),p(Be,{children:o})}const gme=({event:e,fullWidth:r,isQuote:t,standalone:n,setTranslatedText:i,isPreview:s})=>{const{time:o,dateStr:a,timeStr:l}=to(()=>{const u=new Date(e.created_at*1e3),d=u.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=u.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});return{time:u,dateStr:d,timeStr:h}},[e.created_at]);return p("div",{className:"flex items-center gap-2",children:[p(je,{when:r,children:p(cH,{event:e,isQuote:t,standalone:n,fullWidth:r})}),p("div",{className:"flex flex-col",children:p("div",{children:[p(wt,{href:`/${te.toNostrBech32Address(e.pubkey,"npub")}`,className:"font-bold",children:p(Ft,{pub:e.pubkey})}),p("small",{className:"text-neutral-500",children:[p("span",{className:"mx-2",children:"·"}),p(wt,{href:`/${te.toNostrBech32Address(e.id,"note")}`,className:"tooltip","data-tip":`${a} ${l}`,children:p(R1,{date:o})})]})]})}),p(je,{when:!t&&!s,children:p("div",{className:"flex-1 flex items-center justify-end",children:p(dH,{id:e.id,event:e,onTranslate:i})})})]})},yme=({attachments:e,name:r,text:t})=>{var a;const n=(a=e==null?void 0:e.find(l=>l.type==="image"))==null?void 0:a.data,s=`"${t.length>128?`${t.slice(0,128)}...`:t}"`,o=`${r||"User"} on Iris`;return p(ud,{titleTemplate:"%s",children:[p("title",{children:`${o}: ${s}`}),p("meta",{name:"description",content:s}),p("meta",{property:"og:type",content:"article"}),n?p("meta",{property:"og:image",content:n}):null,p("meta",{property:"og:title",content:o}),p("meta",{property:"og:description",content:s})]})},mme=Qn(yme);let FS=!0,bH=!0,wH=!0,_H=!0;be.get("settings").on(e=>{FS=e.loadReactions!==!1,bH=e.showLikes!==!1,wH=e.showZaps!==!1,_H=e.showReposts!==!1});const J$=500,Q$=8,bme=({standalone:e,isQuote:r,fullWidth:t,asInlineQuote:n,event:i,isPreview:s,wot:o})=>{var $;const[a,l]=ve(""),[u,d]=ve(!1),[h,v]=ve("");Ge(()=>{if(e)return Ue.getProfile(i.pubkey,S=>{v((S==null?void 0:S.display_name)||(S==null?void 0:S.name)||"")})},[i.pubkey]);const g=(($=i.content)==null?void 0:$.length)===2&&sr.isEmoji(i.content);let b=i.content||"";const m=[],x=b.match(/(https?:\/\/[^\s]+)/g);x&&x.forEach(S=>{let T;try{T=new URL(S)}catch{console.log("invalid url",S);return}T.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&m.push({type:"image",data:`${T.href}`})}),b=b.length>J$&&!u&&!e&&!s?`${b.slice(0,J$)}...`:b;const E=b.split(`
`);b=E.length>Q$&&!u&&!e&&!s?`${E.slice(0,Q$).join(`
`)}...`:b;function k(){var S;return(m==null?void 0:m.length)>1||((S=i.content)==null?void 0:S.length)>J$||i.content.split(`
`).length>Q$}return p("div",{className:"flex-grow",children:[p(gme,{isPreview:s,standalone:e,event:i,isQuote:r,fullWidth:t,setTranslatedText:l}),p(je,{when:e,children:p(mme,{name:h,text:b,attachments:m})}),p(je,{when:(b==null?void 0:b.length)>0,children:p("div",{className:`preformatted-wrap pb-1 ${g&&"text-2xl"} ${t?"full-width-note":""} ${n?"inline-quote":""} ${o==null?void 0:o.option}`,children:[p(c3,{event:i,children:b}),p(je,{when:a,children:p("p",{children:p("i",{children:a})})})]})}),p(je,{when:!s&&!n&&!e&&k(),children:p("a",{className:"text-sm link mb-2",onClick:S=>{S.preventDefault(),d(!u)},children:ne(`show_${u?"less":"more"}`)})}),p(je,{when:!s&&!n&&FS,children:p(Cye,{settings:{showLikes:bH,showZaps:wH,showReposts:_H},standalone:e,event:i,wot:o},i.id+"reactions")}),p(je,{when:r&&!FS,children:p("div",{style:{marginBottom:"15px"}})}),p(je,{when:e,children:[p("hr",{className:"-mx-2 opacity-10 my-2"}),p(Pv,{autofocus:!e,replyingTo:i.id,placeholder:ne("write_your_reply")})]})]})},$H=Qn(bme);function Pv({replyingTo:e,onSubmit:r,placeholder:t="type_a_message",class:n,autofocus:i,forceAutoFocusMobile:s}){const[o,a]=ve(""),[l,u]=ve(!1),d=Vr(null),h=Hn(k=>{k.preventDefault(),g()},[o]),v=()=>{e||be.get("public").get("draft").put(null),a("")},g=Hn(async()=>{if(!o.length)return;const k={text:o};e&&(k.replyingTo=e),await sye(k),r==null||r(k),v()},[o,e,r]),b=Hn(k=>{k.stopPropagation(),k.preventDefault(),d.current&&d.current.click()},[]),m=Hn(k=>{if(k)for(let $=0;$<k.length;$++){const S=k[$],T=new FormData;T.append("fileToUpload",S),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:T}).then(async O=>{const I=await O.json();I&&a(P=>P?`${P}

${I}`:I)}).catch(O=>{console.error("upload error",O)})}},[]),x=Hn(k=>{k.preventDefault();const $=k.target.files||k.dataTransfer.files;m($)},[m]),E=Hn(k=>{k.preventDefault(),(!o||o.split(" ").length<10||confirm(ne("discard_changes")))&&(v(),u(!1))},[o]);return p("form",{autoComplete:"off",className:n||"",onSubmit:k=>h(k),children:[p("input",{type:"file",className:"hidden",accept:"image/*, video/*, audio/*",multiple:!0,onChange:x,ref:d}),p(nye,{onFocus:()=>u(!0),submit:g,setValue:a,value:o,attachmentsChanged:x,placeholder:t,autofocus:i,forceAutoFocusMobile:s,replyingTo:e}),p(je,{when:l,children:[p("div",{className:"flex items-center justify-between mt-4",children:[p("button",{type:"button",className:"btn btn-sm",onClick:b,children:eo.attach}),p("div",{className:"flex flex-row gap-2",children:[p("button",{className:"btn btn-sm btn-neutral",onClick:E,children:ne("cancel")}),p("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!(o!=null&&o.length),children:ne("post")})]})]}),p("div",{className:"p-2 md:p-4 bg-neutral-900 rounded-sm my-4",children:[p("div",{className:"text-xs text-neutral-500 mb-2",children:ne("preview")}),p($H,{fullWidth:!0,isPreview:!0,event:{content:o,pubkey:te.getPubKey(),created_at:Math.floor(Date.now()/1e3)}})]})]})]})}const wme=[{url:"/",text:"home",icon:h9,activeIcon:f9},{url:"/search",text:"search",icon:v9,activeIcon:eo.magnifyingGlassBold},{url:"/chat",text:"messages",icon:KI,activeIcon:VI},{url:"/settings",text:"settings",icon:u9,activeIcon:Hie},{url:"/about",text:"about",icon:kie,activeIcon:Jie}];function _me(){const[e,r]=ve(0),[t,n]=ve(""),[i,s]=ve(!1);Ge(()=>{const d=be.get("unseenMsgsTotal").on(r),h=be.get("activeRoute").on(n);return()=>{d(),h()}},[]),to(()=>{const d=new Date;return d.getMonth()===2&&d.getDate()===17},[]);const o=()=>{be.get("scrollUp").put(!0),window.scrollTo(0,0)},a=()=>p(zo,{centerVertically:!0,showContainer:!0,onClose:()=>s(!1),children:p(Pv,{onSubmit:()=>s(!1),placeholder:ne("whats_on_your_mind"),autofocus:!0})}),l=()=>{const d=te.getPubKey(),h=te.toNostrBech32Address(d,"npub");return p("div",{className:"flex justify-center xl:justify-start",children:p(wt,{href:`/${h}`,className:"btn btn-ghost md:max-xl:btn-circle",children:[p(Wn,{str:d,width:34}),p("div",{className:"hidden xl:block ml-2",children:p(Ft,{pub:d,hideBadge:!0})})]})})},u=d=>{const h=new RegExp(`^${d.url}(/|$)`).test(t),v=h?d.activeIcon:d.icon;return p("div",{children:p("a",{onClick:()=>o(),className:`${h?"active":""} inline-flex w-auto flex items-center space-x-4 p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900`,href:d.url,children:[p(je,{when:d.text==="messages"&&e,children:p("span",{class:"unseen unseen-total",children:e})}),p(v,{width:26}),p("span",{className:"hidden xl:flex pr-2",children:ne(d.text)})]})})};return p("div",{className:"sticky border-r border-neutral-900 top-0 z-20 h-screen max-h-screen hidden md:flex xl:w-56 flex-col px-2 py-4 flex-shrink-0",children:[p("a",{className:"flex items-center gap-3 px-2 mb-4",tabIndex:3,href:"/",onClick:()=>o(),children:[p("img",{src:"/img/dwotr/logo30.png",width:"30",height:"30"}),p("h1",{className:"hidden xl:flex text-3xl",children:"Dpeep"})]}),p("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation/blob/main/Trust.md",target:"_blank",children:p("small",{className:"pl-3",children:"Iris clone with DWoTR"})}),p("div",{className:"flex flex-col gap-2",children:wme.map(d=>u(d))}),p("div",{class:"py-2 flex-1",children:[p("button",{className:"btn btn-primary md:max-xl:btn-circle mt-2",onClick:()=>s(!i),children:[p(g9,{width:26}),p("span",{className:"hidden xl:flex",children:ne("new_post")})]}),p(je,{when:i,children:a()})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),l()]})}const $me={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const r=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(r.status===200){const n=await r.json();console.log("existingIrisToAddress",n),be.get("existingIrisToAddress").put(n);const i=setTimeout(()=>{n!=null&&n.confirmed||be.get("showNoIrisToAddress").put(!0)},1e3);return be.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:n}}const t=setTimeout(()=>{be.get("showNoIrisToAddress").put(!0)},2e3);be.get("showNoIrisToAddress").on(n=>{n||clearTimeout(t)})},setAsPrimary(e){const r=e+"@iris.to",t=setTimeout(()=>{Ue.setMetadata({nip05:r})},2e3);Ue.getProfile(te.getPubKey(),n=>{n&&(clearTimeout(t),n.nip05!==r&&(n.nip05=r,Ue.setMetadata(n)))})},async enableReserved(e){const r=te.getPubKey(),t={content:`iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=nt.getEventHash(t),t.sig=await te.sign(t);const n=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(be.get("showNoIrisToAddress").put(!1),be.get("existingIrisToAddress").put({confirmed:!0,name:e}),n.status===200)return{error:null,existing:{confirmed:!0,name:e}};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const r=te.getPubKey(),t={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=nt.getEventHash(t),t.sig=await te.sign(t);const n=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.status===200)return be.get("showNoIrisToAddress").put(!1),be.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},e6=3e4;function xH(e){var r,t;return(t=(r=e.tags)==null?void 0:r.find(([n])=>n==="d"))==null?void 0:t[1]}function xme(e){var r;return(r=e["#d"])==null?void 0:r[0]}class Eme{constructor(){Z(this,"eventsByPathAndAuthor",new Map)}set(r){const t=xH(r);if(!t)return!1;this.eventsByPathAndAuthor.has(t)||this.eventsByPathAndAuthor.set(t,new Map);let n=this.eventsByPathAndAuthor.get(t);n||(n=new Map,this.eventsByPathAndAuthor.set(t,n));const i=n==null?void 0:n.get(r.pubkey);return i&&i.created_at>r.created_at?!1:(n.set(r.pubkey,r),!0)}get(r,t){const n=xme(r);if(!n)throw new Error(`filter has no #d tag: ${JSON.stringify(r)}`);const i=this.eventsByPathAndAuthor.get(n);if(i)for(const[s,o]of i)(!r.authors||r.authors.indexOf(s)!==-1)&&t(o)}}class t6{constructor(r,t,n,i,s,o){Z(this,"store");Z(this,"listeners");Z(this,"publish");Z(this,"subscribe");Z(this,"unsubscribe");Z(this,"filter");Z(this,"encrypt");Z(this,"decrypt");this.publish=r,this.subscribe=t,this.unsubscribe=n,this.filter=i,this.encrypt=s,this.decrypt=o,this.store=new Eme,this.listeners=new Map}async publishSetEvent(r,t){let n;if(this.encrypt){const i=JSON.stringify(t);if(n=await this.encrypt(i),i===n)throw new Error(`Encryption failed: ${i} === ${n}`)}else n=JSON.stringify(t);return this.publish({kind:e6,tags:[["d",r]],content:n,created_at:Math.floor(Date.now()/1e3)})}async set(r,t){try{const n=await this.publishSetEvent(r,t);if(n)return this.store.set(n)&&this.notifyListeners(n),!0}catch(n){console.error(n)}return!1}async getEventValue(r){let t=this.decrypt?await this.decrypt(r.content):r.content;try{t=JSON.parse(t)}catch{throw new Error(`Failed to parse event content: ${t}`)}return t}get(r,t,n={}){n=Object.assign({},n,this.filter,{"#d":[r],kinds:[e6]});const i=this.addListener(n,t);return this.store.get(n,s=>this.callbackFromEvent(s,t)),this.subscribe([n],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(r,t){const n=Math.random().toString(36).substr(2,9),i={filter:r,callback:t,off:()=>{this.listeners.delete(n),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(n,i),i}removeListener(r){const t=this.listeners.get(r);t&&t.off()}callbackFromEvent(r,t){const n=xH(r);if(!n)throw new Error(`event has no d tag: ${JSON.stringify(r)}`);this.getEventValue(r).then(i=>{t(i,n,r)})}async notifyListeners(r){for(const t of this.listeners.values())fO(t.filter,r)&&this.callbackFromEvent(r,t.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}let r6=!1;const _d={public:void 0,private:void 0,async logOut(){var e;if(qt("/"),navigator.serviceWorker){const r=await navigator.serviceWorker.getRegistration();r&&r.pushManager&&((e=r.active)==null||e.postMessage({key:null}),await r.pushManager.getSubscription())}Qu.clear(),localStorage.clear(),ca.clear().then(()=>{location.reload()})},unsubscribe(){},onLoggedIn(){if(r6)return;r6=!0;const e=te.getPubKey(),r=Ke(e);Ue.followDistanceByUser.set(r,0),Ue.followersByUser.set(r,new Set),Ue.usersByFollowDistance.set(0,new Set([r]));const t=(s,o)=>{var u;const l=(u=s[0]["#d"])==null?void 0:u[0];if(l){const d=nt.keyValueEvents.get(l);d&&o(d)}return gt.subscribe(s[0],o,!0),"0"};be.get("globalFilter").once(s=>{s||be.get("globalFilter").put(nt.DEFAULT_GLOBAL_FILTER)}),this.private=new t6((...s)=>nt.publish(...s),t,()=>this.unsubscribe(),{authors:[e]},(...s)=>te.encrypt(...s),(...s)=>te.decrypt(...s)),this.public=new t6((...s)=>nt.publish(...s),t,()=>this.unsubscribe(),{authors:[e]}),this.public.get("notifications/lastOpened",s=>{s!==nt.notificationsSeenTime&&(nt.notificationsSeenTime=s,nt.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",s=>{if(s==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(s==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),Ir.init();const n=setTimeout(()=>{$me.checkExistingAccount(e)},1e3);Ue.getProfile(e,async s=>{s&&s.nip05&&s.nip05.endsWith("@iris.to")&&(be.get("showNoIrisToAddress").put(!1),be.get("existingIrisToAddress").get("name").put(s.nip05.replace("@iris.to","")),clearTimeout(n))});const i=Ue.getFollowersByUser(e,s=>{s!=null&&s.size?(be.get("noFollowers").put(!1),i()):be.get("noFollowers").put(!0)});setTimeout(()=>{gt.subscribe({authors:[e]},void 0,!0),gt.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),gt.subscribe({"#p":[e],kinds:[4]},void 0,!1,!1),gt.subscribe({authors:[e],kinds:[4]},void 0,!1,!1),nt.subscribeGroups()},500),setInterval(()=>{nt.handledMsgsPerSecond=0},5e3)},init:function(e){te.getOrCreate(e),be.get("loggedIn").on(()=>this.onLoggedIn())}};function Sme({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const kme=Jt(Sme),Tme=kme;function Ime({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const Ome=Jt(Ime),Ame=Ome;function Cme({title:e,titleId:r,...t},n){return Oe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Oe("title",{id:r},e):null,Oe("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const Pme=Jt(Cme),Nme=Pme;let Ba=class extends yn{constructor(){super();Z(this,"userId",null);Z(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(t){t.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}setTitle(t){let n=t.split("/")[1]||ne("follows");n.startsWith("note")?n=ne("post"):n.startsWith("npub")?(this.userId=n,n=p(Ft,{pub:this.userId||""},`${this.userId}title`)):n=n.charAt(0).toUpperCase()+n.slice(1);const i=t.replace("/chat/new","").replace("/chat/","");if(t.indexOf("/chat/")===0&&t.indexOf("/chat/new")!==0&&(this.userId=i.length<t.length?i:null,t.indexOf("/chat/")===0&&this.userId===te.getPubKey()?n=p(Be,{children:[p("b",{className:"mr-5",children:"📝"})," ",p("b",{children:ne("note_to_self")})]}):n=p(Ft,{pub:this.userId||""},`${this.userId}title`)),t.indexOf("/search/")===0){let s=t.replace("/search/","");s.indexOf("?")!==-1&&(s=s.substring(0,s.indexOf("?"))),n=`${ne("search")}: ${decodeURIComponent(s)}`}this.setState({title:n})}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),be.get("showParticipants").on(this.inject()),be.get("unseenMsgsTotal").on(this.inject()),be.get("unseenNotificationCount").on(this.inject()),be.get("showConnectedRelays").on(this.inject()),be.get("isMyProfile").on(this.inject()),be.get("activeRoute").on(this.sub(t=>{this.setState({about:null,activeRoute:t,showMobileSearch:!1}),this.setTitle(t)})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){window.scrollTo(0,0),this.userId&&this.userId.indexOf("hashtag")===-1&&qt("/"+this.userId)}updateRelayCount(){this.setState({connectedRelays:Ir.getConnectedRelayCount()})}renderSearchBox(){return this.userId?"":p(s3,{onSelect:t=>qt(`/${t.key}`)})}renderConnectedRelays(){return p("a",{href:"/settings/network",className:`ml-2 tooltip tooltip-bottom mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,"data-tip":ne("connected_relays"),children:p("small",{className:"flex items-center gap-2",children:[p("span",{class:"icon",children:eo.network}),p("span",{children:this.state.connectedRelays})]})})}renderTitle(){const t=this.state.activeRoute,n=["/","/global"].includes(t);return p("div",{className:"flex flex-1 items-center justify-center",onClick:()=>this.onTitleClicked(),children:[this.state.title,p(je,{when:n,children:[p("button",{className:"ml-2 focus:outline-none rounded-full p-2",onClick:i=>{i.stopPropagation(),window.feed_selector_modal.showModal()},children:p(Tme,{width:20})}),p("dialog",{id:"feed_selector_modal",className:"modal focus:outline-none",children:[p("ul",{className:"modal-box p-2 shadow menu bg-base-100 rounded-box w-52 border-2 border-neutral-900 gap-2",children:[p("li",{children:p(wt,{className:t==="/"?"active":"",href:"/",children:ne("follows")})}),p("li",{children:p(wt,{className:t==="/global"?"active":"",href:"/global",children:ne("global_feed")})})]}),p("form",{method:"dialog",className:"modal-backdrop",children:p("button",{children:"close"})})]})]})]})}renderNotifications(){return p(Be,{children:[p(je,{when:this.state.isMyProfile,children:p(wt,{href:"/settings",className:"md:hidden",children:p(u9,{width:28})})}),p("a",{href:"/notifications",className:`relative inline-block rounded-full ${this.state.isMyProfile?"hidden md:flex":""}`,children:[this.state.activeRoute==="/notifications"?p(WI,{width:28}):p(c9,{width:28}),p(je,{when:this.state.unseenNotificationCount,children:p("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-iris-purple text-white text-sm rounded-full h-5 w-5 flex items-center justify-center",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount})})]})]})}renderLoginBtns(){return p("div",{className:"flex gap-2",children:[p("button",{className:"btn btn-sm btn-primary",onClick:()=>be.get("showLoginModal").put(!0),children:ne("log_in")}),p("button",{className:"btn btn-sm btn-neutral",onClick:()=>be.get("showLoginModal").put(!0),children:ne("sign_up")})]})}renderBackBtnOrLogo(){return this.state.activeRoute==="/"?p(Be,{children:p("div",{className:"flex flex-row items-center gap-2 md:hidden",children:[p("img",{src:"/img/dwotr/logo30.png",style:"padding-top:5px"}),p("h1",{className:"text-3xl",children:"Dpeep"})]})}):p(d9,{width:24,onClick:()=>this.backButtonClicked()})}render(){const n=!!te.getPubKey();return p("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",children:p("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:p("div",{className:"flex items-center justify-between h-12",children:[this.renderBackBtnOrLogo(),p(je,{when:n&&this.state.showConnectedRelays,children:this.renderConnectedRelays()}),this.renderTitle(),p(je,{when:n,children:this.renderNotifications()}),p(je,{when:!n,children:this.renderLoginBtns()})]})})})}};const sm="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8",om="npub1srpfc36pes9urzcnmrev38c9ypewahmggqc56dj7czr4k6zd4qcs4m5mn8";class Rme extends yn{render(){return p(Be,{children:[p(Ba,{}),p("div",{className:"main-view prose",id:"settings",children:p("div",{className:"px-2 md:px-4 py-2",children:[p("h2",{className:"mt-0",children:ne("about")}),p("p",{children:["Dpeep, a clone of the innovative ",p("b",{children:"Iris.to"})," (",p("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"), serves as a proof-of-concept project for the integration of the Decentralized Web of Trust Reputation system (DWoTR). Apart from showcasing the unique benefits provided by the DWoTR system, Dpeep does not aim to offer additional significant functionality."]}),p("ul",{children:[p("li",{children:[p("b",{children:"Decentralized Web of Trust Reputation"})," system: a decentralized network that evaluates and displays trust based on each user's unique perspective."]}),p("li",{children:[p("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),p("li",{children:[p("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),p("li",{children:[p("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!sr.isStandalone()&&p(Be,{children:[p("h3",{children:"Versions"}),p("p",{children:p("ul",{children:p("li",{children:[p("a",{target:"_blank",href:"https://dpeep.com",children:"dpeep.com"})," ","(web)"]})})})]}),p("h3",{children:"Docs"}),p("p",{children:["Visit Iris ",p("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),p("p",{children:["Visit Dpeep ",p("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation",children:"docs"})," explanations on the Decentralized Web of Trust Reputation system."]}),p("h3",{children:"Privacy"}),p("p",{children:ne("application_security_warning")}),p("h3",{children:"Follow"}),p("div",{className:"flex flex-row items-center w-full justify-between",children:[p(wt,{href:`/${sm}`,className:"flex flex-row items-center gap-2",children:[p(Wn,{str:sm,width:40}),p(Ft,{pub:sm,placeholder:"Iris"})]}),p(Gl,{className:"btn btn-neutral btn-sm",id:sm})]}),p("div",{className:"flex flex-row items-center w-full justify-between py-5",children:[p(wt,{href:`/${om}`,className:"flex flex-row items-center gap-2",children:[p(Wn,{str:om,width:40}),p(Ft,{pub:om,placeholder:"Iris"})]}),p(Gl,{className:"btn btn-neutral btn-sm",id:om})]}),p("h3",{children:"Released under MIT license"}),p("p",{children:["Dpeep code: ",p("a",{href:"https://github.com/DigitalTrustProtocol/Dpeep",children:"Github"}),"."]}),p("br",{})]})})]})}}class EH extends vn{constructor(){super(...arguments);Z(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t.message}}componentDidCatch(t){console.error(t),this.setState({error:t.message})}render(){return this.state.error?p("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}const Dme=Qn(({event:e})=>{var r,t;return p("div",{className:"flex gap-4 w-full break-words",children:[p("div",{className:"flex-shrink-0",children:p(wt,{href:`/${ka.npubEncode(e.pubkey)}`,children:p(Wn,{str:e.pubkey,width:30})})}),p(wt,{href:`/${ka.noteEncode(e.id)}`,className:"w-full",children:[p("b",{children:p(Ft,{pub:e.pubkey})})," | ",p("span",{className:"text-neutral-400",children:[p(R1,{date:new Date(e.created_at*1e3)}),p("br",{}),((r=e.content)==null?void 0:r.length)>80?`${(t=e.content)==null?void 0:t.slice(0,80)}...`:e.content]})]})]},e.id)}),Bme=({events:e})=>{const r=[];return p("div",{className:"card-body p-2",children:[p("h2",{className:"card-title",children:[p(Wie,{width:20,className:"text-iris-orange"}),"Trending 24h"]}),p("hr",{className:"opacity-10"}),p("div",{className:"flex flex-wrap gap-6 text-xs overflow-x-hidden",children:e.filter(t=>!r[t.pubkey]).map(t=>p(Dme,{event:t}))})]})},Mme=Qn(Bme),SH=(e,r,t=n=>n)=>{const n=localStorage.getItem(r),i=n?JSON.parse(n).data:[],[s,o]=ve(i);return Ge(()=>{const a=()=>{fetch(e).then(l=>l.json()).then(l=>{const u=t(l);o(u),localStorage.setItem(r,JSON.stringify({data:u,timestamp:new Date().getTime()}))}).catch(()=>{if(n){const{data:l}=JSON.parse(n);o(l)}})};if(n){const{timestamp:l}=JSON.parse(n);(new Date().getTime()-l)/1e3/60>=15&&a()}else a()},[e,r,t]),s},Lme=Qn(({pubkey:e})=>{var t,n;const r=rH(e);return p(wt,{href:`/${ka.npubEncode(e)}`,className:"flex flex-row gap-4 w-full break-words",children:[p("span",{className:"flex-shrink-0",children:p(Wn,{str:e,width:30})}),p("span",{className:"flex-1",children:[p("b",{children:p(Ft,{pub:e})}),p("br",{}),p("span",{className:"text-neutral-400",children:[(t=r==null?void 0:r.about)==null?void 0:t.slice(0,100),((n=r==null?void 0:r.about)==null?void 0:n.length)>100?"...":""]})]}),p("span",{className:"flex-shrink-0",children:p(Gl,{className:"btn btn-sm",id:e})})]},e)}),Fme=Qn(()=>{const e=`https://api.nostr.band/v0/suggested/profiles/${te.getPubKey()}`,r=SH(e,"followSuggestions",n=>n.profiles||[]);if(!r.length)return null;const t=to(()=>r.sort(()=>.5-Math.random()).slice(0,8).map(n=>n.pubkey),[r]);return p("div",{className:"card-body p-2",children:[p("h2",{className:"card-title",children:"Follow suggestions"}),p("hr",{className:"opacity-10"}),p("div",{className:"flex flex-wrap gap-4 items-center text-xs overflow-x-hidden",children:t.map(n=>p(Lme,{pubkey:n},n))})]})}),kH=e=>{const n=SH("https://api.nostr.band/v0/trending/notes","trendingNotes",i=>{const s=i.notes.map(o=>o.event);return s.forEach(o=>{nt.handle(o)}),s});return p("div",{class:"sticky border-l border-neutral-900 top-0 right-0 px-4 py-2 mx-2 md:mx-0 flex flex-col gap-4 h-screen",children:[p(s3,{focus:e.focus,onSelect:({key:i})=>{qt("/"+i)}}),p("div",{className:"max-h-[50vh] overflow-y-auto",children:p(Mme,{events:n})}),p("div",{className:"max-h-[50vh] overflow-y-auto",children:p(Fme,{})})]})};let TH=!0;const IH=function(){TH=!1,window.removeEventListener("popstate",IH)};window.addEventListener("popstate",IH);let iu=class extends yn{constructor(){super(...arguments);Z(this,"class","");Z(this,"id","");Z(this,"observer",null);Z(this,"scrollPosition",0);Z(this,"hideSideBar",!1);Z(this,"hideHeader",!1);Z(this,"saveScrollPosition",tu(()=>{const t=window.scrollY||document.documentElement.scrollTop,i={...window.history.state,scrollPosition:t};window.history.replaceState(i,"")},100));Z(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(t=>{t.forEach(()=>{this.restoreScrollPosition(!1)})}),this.observer.observe(document.body),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3)})}render(){return p("div",{className:"flex flex-row h-full w-full",children:[p("div",{className:`flex flex-col w-full h-full ${this.hideSideBar?"":"lg:w-2/3"}`,children:[p(je,{when:!this.hideHeader,children:p(Ba,{})}),p("div",{class:this.class,id:this.id,className:"h-full",children:p(EH,{children:this.renderView()})})]}),p(je,{when:!this.hideSideBar,children:p("div",{className:"flex-col hidden lg:flex lg:w-1/3",children:p(kH,{focus:!1})})})]})}componentDidMount(){window.addEventListener("scroll",this.saveScrollPosition),this.restoreScrollPosition()}restoreScrollPosition(t=!0){var s,o;const n=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!TH&&n!==i)t&&this.observeScrollElement(),this.scrollPosition||(this.scrollPosition=(o=window.history.state)==null?void 0:o.scrollPosition),this.scrollPosition&&window.scrollTo(0,this.scrollPosition);else{const l={...window.history.state||{},previousState:n};window.history.replaceState(l,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect(),window.removeEventListener("scroll",this.saveScrollPosition)}};const jme=({chat:e,active:r=!1,latestMsg:t={},name:n})=>{const i=o=>{o.keyCode===13&&o.target.click()},s=te.toNostrBech32Address(e,"npub");return p("div",{onKeyUp:i,role:"button",tabIndex:0,className:`p-2 ${r?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>qt(`/chat/${s||e}`),children:p("div",{className:"flex gap-4 overflow-x-hidden",children:[p(Wn,{str:s||e,width:49}),p("div",{className:"flex flex-col",children:[p("span",{className:"name",children:[p(je,{when:n,children:n}),p(je,{when:!n,children:[p(je,{when:e===te.getPubKey(),children:p("span",{className:"font-bold italic",children:["📝 ",ne("note_to_self")]})}),p(je,{when:e!==te.getPubKey(),children:p(Ft,{pub:e})}),p(je,{when:t.created_at,children:p("small",{className:"ml-2 latest-time text-neutral-500",children:p(R1,{date:new Date(t.created_at*1e3)})})})]})]}),p("small",{className:"text-neutral-500 truncate",children:t.text})]})]})})},zme=Qn(jme),Hme=({active:e})=>p("div",{role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 h-16 items-center cursor-pointer hover:bg-neutral-900 ${e?"bg-neutral-700":""}`,onClick:()=>qt("/chat/new"),children:[p("div",{className:"flex justify-center items-center w-12 h-12 rounded-full",children:p(g9,{className:"w-6 h-6"})}),p("div",{className:"flex flex-row",children:p("div",{className:"flex flex-col",children:p("span",{className:"name",children:ne("new_chat")})})})]}),Ume=(e,r)=>{const t=e.value.latest,n=r.value.latest;return t?n?n.created_at-t.created_at:-1:1},Kme=({activeChat:e,className:r})=>{const[t,n]=ve(new Jp(Ume)),[i,s]=ve(0),[o,a]=ve(!1),l=Vr(null),u=()=>{Notification&&Notification.requestPermission().then(h=>{(h==="granted"||h==="denied")&&a(!1)})};Ge(()=>{const h=[],v=(b,m)=>{n(x=>(x.set(m,{...b}),x)),s(x=>x+1)},g=te.getPubKey();return be.get("chats").get(g).put({id:g}),h.push(be.get("chats").map(v)),h.push(be.get("groups").map(v)),h.push(be.get("scrollUp").on(()=>{window.scrollTo(0,0),l.current&&(l.current.scrollTop=0)})),()=>h.forEach(b=>b())},[]);const d=e&&te.toNostrHexAddress(e)||e;return p("section",{className:`md:border-r flex flex-shrink-0 border-neutral-800 overflow-x-hidden overflow-y-auto md:px-0 w-full md:w-64 ${r}`,ref:l,children:[p("div",{className:o?"":"hidden",onClick:u,children:[p("div",{className:"title",children:ne("get_notified_new_messages")}),p("div",{children:p("a",{children:ne("turn_on_desktop_notifications")})})]}),p("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[p(Hme,{active:d==="new"}),p(Cv,{children:Array.from(t.entries()).map(([h,v])=>p(zme,{active:h===d,chat:h,latestMsg:v==null?void 0:v.latest,name:v==null?void 0:v.name},h))})]})]})},OH=({event:e,selfAuthored:r,showName:t})=>{const[n,i]=ve(e.text||""),[s,o]=ve(null),[a,l]=ve(!1);Ge(()=>{let x=n;x?u(x):te.decryptMessage(e,E=>{x=E,u(x)})},[e.id,n]);const u=x=>{try{const E=x.slice(x.indexOf("{")),k=JSON.parse(E);if(Lp(k)&&dd(k)&&(console.log(111,k.tags.length===1,k.tags[0][0]==="p",k.tags[0][1]===k.pubkey),k.tags.length===1&&k.tags[0][0]==="p"&&k.tags[0][1]===e.pubkey)){k.text=k.content,o(k);return}}catch{}l(!0),i(x)};if(s)return p(OH,{event:s,showName:!0,selfAuthored:s.pubkey===te.getPubKey()});if(!a)return null;const d=()=>{qt(`/${te.toNostrBech32Address(e.pubkey,"npub")}`)},h=n&&n.length===2&&sr.isEmoji(n),v="",g=v.seen?"text-green-500":"text-neutral-500",b=v.delivered?"border-green-500":"border-neutral-500";return p("div",{className:`p-2 w-full md:w-2/3 rounded-xl mb-1 ${r?"self-end bg-iris-blue text-white":"self-start bg-neutral-700 text-white"} ${g} ${b} flex flex-col items-start`,children:p("div",{className:"w-full",children:[p("div",{className:"mb-2",children:t&&p("small",{onClick:d,className:"cursor-pointer text-xs",children:p(Ft,{pub:e.pubkey},e.pubkey)})}),p("div",{className:`preformatted-wrap text-base ${h?"text-4xl":""}`,children:p(c3,{event:e,children:n})}),p("div",{className:`${r?"text-right":"text-left"} text-xs text-white`,children:p(R1,{date:new Date(e.created_at*1e3)})})]})})},Wme=Qn(OH),Vme=({activeChat:e,class:r,autofocus:t,onSubmit:n,keyPair:i})=>{const[s,o]=ve(""),a=Vr(null);Ge(()=>{be.get("chats").get(e).get("draft").once(v=>{v&&o(v)})},[]),Ge(()=>{var v;!sr.isMobile&&t!==!1&&((v=a.current)==null||v.focus())},[t]);const l=v=>{try{const g=te.toNostrHexAddress(e);if(!g)throw new Error("invalid public key "+g);return te.encrypt(v,g)}catch(g){console.error(g)}},u=async v=>{if(v.preventDefault(),!s.length)return;const g=4,b=Math.floor(Date.now()/1e3),m={kind:g,created_at:b};if(i){let x={kind:g,created_at:b,content:s,tags:[["p",i.pubKey]]};x=await nt.sign(x),m.content=await fc.encrypt(i.privKey,i.pubKey,`${s}

${JSON.stringify(x)}`),m.pubkey=i.pubKey,m.tags=[["p",i.pubKey]],console.log("event",m),m.id=Ul(m),m.sig=f1(m,i.privKey)}else{const x=te.toNostrHexAddress(e);if(m.content=await l(s),m.tags=[["p",x]],!x)throw new Error("invalid public key "+x)}nt.publish(m),o(""),be.get("chats").get(e).get("draft").put(""),n==null||n()},d=v=>{const g=v.target.value;o(g),be.get("chats").get(e).get("draft").put(g)},h=v=>{(v.metaKey||v.ctrlKey)&&v.key==="Enter"&&u(v)};return p("form",{autoComplete:"off",className:`flex flex-none flex-row gap-2 p-2 sticky w-full bottom-0 w-96 max-w-screen bg-black ${r||""}`,onSubmit:u,children:[p("input",{ref:a,className:"input input-sm flex-1 new-msg bg-neutral-700 text-white",onInput:d,onKeyDown:h,type:"text",placeholder:"Type a message",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0,value:s}),p("button",{className:`btn btn-sm ${s.length>0?"text-white bg-iris-blue":""}`,style:{marginRight:"0"},disabled:s.length===0,children:p(KI,{width:"24"})})]})},n6=Ai(()=>{const e=document.querySelector("#message-view");e&&e.scrollTo(0,e.scrollHeight-e.clientHeight)},100);function qme({id:e}){const r=Vr(null),t=Vr(new Jp("created_at")),[n,i]=ve([]),[s,o]=ve(!0),[a,l]=ve(""),[u,d]=ve(!1),[h,v]=ve(void 0),[g,b]=ve(!1),m=to(()=>te.toNostrHexAddress(e)||e,[e]),x=[];let E;const k=()=>{const F=document.querySelectorAll(".day-separator");let K=F[F.length-1],q=K.getBoundingClientRect();for(;K&&q&&q.top-55>0;){for(K=K.previousElementSibling;K&&!K.classList.contains("day-separator");)K=K.previousElementSibling;q=K?K.getBoundingClientRect():null}if(!K)return;const W=K.cloneNode(!0),M=document.createElement("div");M.style.position="fixed",M.style.top="70px",M.style.textAlign="center",M.setAttribute("id","floating-day-separator"),M.style.width=r.current.offsetWidth+"px",M.appendChild(W);const G=document.getElementById("floating-day-separator");G&&G.remove(),setTimeout(()=>{W.style.opacity="0",W.style.transition="opacity 2s"},2e3),r.current.prepend(M)},$=()=>{zge(m)},S=()=>{const F=r.current,K=F.scrollHeight-F.scrollTop<=F.offsetHeight+200,q=document.getElementById("scroll-down-btn");K?window.getComputedStyle(q).display!=="none"&&T(q,100):window.getComputedStyle(q).display==="none"&&O(q,100)},T=(F,K)=>{let q=1;const W=setInterval(()=>{q<=.1&&(clearInterval(W),F.style.display="none"),F.style.opacity=q,F.style.filter="alpha(opacity="+q*100+")",q-=q*.1},K/10)},O=(F,K)=>{let q=.1;F.style.display="block";const W=setInterval(()=>{q>=1&&clearInterval(W),F.style.opacity=q,F.style.filter="alpha(opacity="+q*100+")",q+=q*.1},K/10)},I=Hn(()=>(h==null?void 0:h.privKey)&&te.toNostrBech32Address(h.privKey,"nsec")||"",[h]),P=()=>{E=E||Ai(()=>{const F=document.getElementById("attachment-preview");F&&window.getComputedStyle(F).display!=="none"||(k(),S())},200),E()},R=()=>{const F=r.current;F==null||F.scrollTo({top:F.scrollHeight})},D=()=>{let F;const K=te.getPubKey(),q=new Date,W=q.toLocaleDateString();let M,G;const Q=[];return e&&e.length>4&&(n.forEach(he=>{if(!he)return null;const ue=new Date(he.created_at*1e3);let ke;if(ue){const Ce=ue.toLocaleDateString();if(Ce!==M){ke=!0;const Ye=sr.getDaySeparatorText(ue,Ce,q,W);Q.push(p("div",{className:"px-2 mt-3 mb-4 py-1 inline-block day-separator bg-black opacity-50 text-white rounded-full",children:ne(Ye.toLowerCase())}))}M=Ce}let Te=ke;!ke&&G&&he.pubkey!==G&&(Q.push(p("div",{className:"m-2"})),Te=!0),G=he.pubkey,Q.push(p(Wme,{event:he,showName:Te,selfAuthored:he.pubkey===K},`${he.created_at}${he.pubkey}`))}),F=p("div",{ref:r,className:"main-view p-2 overflow-y-auto overflow-x-hidden flex flex-col flex-grow h-full",onScroll:()=>P(),children:[p("div",{className:"w-full flex flex-col items-center justify-end",children:[Q,p("div",{className:"italic my-2 text-neutral-500 w-full text-center justify-self-center",children:[p(je,{when:g&&h,children:[p("div",{children:ne("secret_chat")}),p("div",{className:"flex gap-2 flex-1 items-center justify-center mt-4",children:[p("button",{className:"btn btn-neutral btn-sm",onClick:()=>d(he=>!he),children:[p(dse,{width:"20"}),ne("show_qr_code")]}),p(Jn,{className:"btn btn-neutral btn-sm",copyStr:I(),text:"Copy nsec"}),p(Jn,{className:"btn btn-neutral btn-sm",copyStr:sr.buildURL("chat",void 0,I()),text:ne("copy_link")})]}),p(je,{when:u,children:p("div",{className:"mt-4",children:p(l3,{data:"nostr:"+I()})})})]}),p(je,{when:!g&&te.toNostrHexAddress(e)!==K,children:[p("div",{children:ne("dm_privacy_warning")}),p("div",{className:"mt-4 flex gap-2 justify-center",children:[p(je,{when:a,children:p("button",{className:"btn btn-neutral btn-sm",onClick:()=>P1(a),children:"Go to secret chat"})}),p(je,{when:!a,children:p("button",{className:"btn btn-neutral btn-sm",onClick:$,children:"Invite to secret chat"})})]})]})]})]}),p("div",{id:"attachment-preview",className:"attachment-preview",style:{display:"none"}})]})),F};return Bd(()=>{const F=r.current;if(F){const K=new ResizeObserver(()=>{R()});return K.observe(F),()=>{K.disconnect()}}}),Ge(()=>{const F=M=>{const G=Q=>{t.current.set(Q.id,Q),i(Array.from(t.current.values()))};x.push(gt.subscribe({kinds:[4],"#p":[te.getPubKey()],authors:[M]},G)),M!==te.getPubKey()&&x.push(gt.subscribe({kinds:[4],"#p":[M],authors:[te.getPubKey()]},G))};be.get("chatInvites").get(m).once(M=>{M!=null&&M.priv&&l(M.priv)});const K=()=>{const M=be.get("groups").get(e);M.on(G=>{const Q=G.key,he=dc(Q);v({privKey:Q,pubKey:he}),x.push(gt.subscribe({kinds:[4],"#p":[he],authors:[he]},async ue=>{const ke=await fc.decrypt(Q,he,ue.content);t.current.set(ue.id,{...ue,text:ke}),i(Array.from(t.current.values()));const Te=M.get("latest"),Ce=await Te.once();(!Ce||!Ce.created_at||Ce.created_at<ue.created_at)&&Te.put({id:ue.id,created_at:ue.created_at,text:ke.slice(0,ke.indexOf("{"))})}))})};te.toNostrHexAddress(m)?F(m):(b(!0),K());const q=()=>{const M=W.scrollTop+W.clientHeight>=W.scrollHeight;s&&!M?o(!1):!s&&M&&o(!0)},W=r.current;return W&&W.addEventListener("scroll",q),()=>{r.current.removeEventListener("scroll",q),x.forEach(M=>M())}},[e]),Ge(()=>{s&&n6(),document.querySelectorAll(".msg-content img").forEach(K=>{K.removeEventListener("load",F),K.addEventListener("load",F)});const F=()=>{s&&n6()}},[s]),p(Be,{children:[p(ud,{children:p("title",{children:ne("messages")})}),p("div",{className:`${m?"":"hidden"} flex flex-1 flex-col`,children:[D(),p(je,{when:m&&m.length>4,children:[p("div",{className:"relative",children:p("div",{id:"scroll-down-btn",style:{display:"none"},className:"absolute bottom-1 left-2 p-1.5 rounded-3xl bg-neutral-900 opacity-85 hover:cursor-pointer",onClick:()=>R(),children:p(yie,{width:"24"})})}),p(Vme,{activeChat:m,onSubmit:()=>R(),keyPair:h},m)]})]})]})}const Gme=({activeChat:e})=>{const r=()=>{window.history.back()},t=()=>{window.scrollTo(0,0),e&&e.length>15&&qt("/"+te.toNostrBech32Address(e,"npub"))},n=()=>p("div",{className:"flex gap-2",children:[p("button",{className:"btn btn-sm btn-primary",onClick:()=>be.get("showLoginModal").put(!0),children:ne("log_in")}),p("button",{className:"btn btn-sm btn-neutral",onClick:()=>be.get("showLoginModal").put(!0),children:ne("sign_up")})]}),s=!!te.getPubKey();return p("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",onClick:t,children:p("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:p("div",{className:"flex items-center justify-between h-12",children:[p(d9,{width:24,onClick:r}),p(je,{when:e,children:p("div",{className:"flex flex-row gap-2 items-center",children:[p(Wn,{width:30,str:e}),p(Ft,{pub:e})]})}),p(je,{when:!e,children:p("div",{className:"flex flex-row gap-2 items-center",children:ne("chat")})}),p(je,{when:s,children:p("div",{})}),p(je,{when:!s,children:n()})]})})})};class i6 extends iu{constructor(){super();Z(this,"id");Z(this,"renderContent",t=>t==="new"?p(Hge,{}):t?p(qme,{id:t},t):p("div",{className:"hidden md:flex flex-col items-center justify-center flex-1",children:[p("div",{className:"my-4",children:p(VI,{className:"w-24 h-24 text-neutral-400"})}),p("div",{className:"text-neutral-400",children:ne("dm_privacy_warning")})]}));this.id="chat-view",this.hideSideBar=!0,this.hideHeader=!0}componentDidMount(){super.componentDidMount();const t=window.location.hash.substr(1);t&&t.startsWith("nsec")&&(window.history.replaceState({},document.title,window.location.pathname),te.getPubKey()||te.loginAsNewUser(),Yz(t))}renderView(){const{id:t}=this.props;return p("div",{className:"flex flex-col h-full max-h-screen",children:[p(Gme,{activeChat:t},t),p("div",{className:"flex flex-row flex-grow overflow-hidden",children:[p("div",{className:`flex-shrink-0 ${t?"hidden md:flex overflow-y-auto":"flex overflow-y-auto"}`,children:p(Kme,{activeChat:t,className:t?"hidden md:flex":"flex"})}),p("div",{className:`flex-grow overflow-y-auto ${t?"flex":"hidden md:flex"}`,children:this.renderContent(t)},`chat-content-${t}`)]})]})}}const Yme=e=>{const[r,t]=ve("");return p(Be,{children:[p("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;s&&s.length&&nH(s[0],o=>{e.onUrl&&e.onUrl(o)},o=>{t(o)})}}),r?p("p",{children:r}):null]})},Zme={lud16:"Bitcoin lightning address ⚡ (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class Xme extends yn{constructor(t){super(t);Z(this,"saveOnChange",tu(()=>{const t=this.state.profile;Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n]=t[n].trim())}),Ue.setMetadata(t)},2e3));Z(this,"setProfileAttribute",(t,n)=>{t=t.trim();const i=Object.assign({},this.state.profile);n?i[t]=n:delete i[t],this.setState({profile:i,edited:!0}),this.saveOnChange()});Z(this,"handleSubmit",t=>{t.preventDefault(),Ue.setMetadata(this.state.profile);const n=te.toNostrBech32Address(te.getPubKey(),"npub");qt("/"+n)});Z(this,"handleAddField",t=>{t.preventDefault();const n=this.state.newFieldName,i=this.state.newFieldValue;n&&i&&(this.setProfileAttribute(n,i),this.setState({newFieldName:"",newFieldValue:""}),Ue.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){Ue.getProfile(te.getPubKey(),t=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete t.created_at,this.setState({profile:t}))})}render(){const t=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(n=>{t.includes(n)||t.push(n)}),p(Be,{children:[p(Ba,{}),p("div",{class:"main-view",id:"settings",children:p("div",{class:"centered-container prose",children:[p("h3",{children:ne("edit_profile")}),p("form",{onSubmit:n=>this.handleSubmit(n),children:[t.map(n=>{const i=this.state.profile[n],s=typeof i=="string"||typeof i>"u";return p("p",{children:[p("label",{htmlFor:n,children:[Zme[n]||n,":"]}),p("br",{}),p("input",{className:"input w-full",type:"text",id:n,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:o=>s&&this.setProfileAttribute(n,o.target.value)}),n==="lud16"&&!i&&p("p",{children:p("small",{children:ne("install_lightning_wallet_prompt")})}),n==="picture"||n==="banner"?p(Be,{children:[p("p",{children:p(Yme,{onUrl:o=>this.setProfileAttribute(n,o)})}),i&&p("p",{children:p(Mo,{src:i},i)})]}):null]})}),p("p",{children:p("button",{className:"btn btn-primary",type:"submit",children:"Save"})})]}),p("h4",{children:"Add new field"}),p("form",{onSubmit:n=>this.handleAddField(n),children:[p("p",{children:[p("label",{htmlFor:"newFieldName",children:"Field name:"}),p("br",{}),p("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",className:"input w-full",placeholder:ne("field_name"),onInput:n=>this.setState({newFieldName:n.target.value})})]}),p("p",{children:[p("label",{htmlFor:"newFieldValue",children:"Field value:"}),p("br",{}),p("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",className:"input w-full",placeholder:ne("field_value"),onInput:n=>this.setState({newFieldValue:n.target.value})})]}),p("p",{children:p("button",{className:"btn btn-primary",type:"submit",children:"Add new attribute"})})]})]})})]})}}const Jme=({activeDisplay:e,onDisplayChange:r})=>p("div",{className:"flex mb-px",children:[p("button",{className:`rounded-sm flex justify-center flex-1 p-3 ${e==="feed"?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>r("feed"),children:p(lie,{width:24,height:24})}),p("button",{className:`rounded-sm flex justify-center flex-1 p-3 ${e==="grid"?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>r("grid"),children:p(Rie,{width:24,height:24})})]}),Qme=({filterOptions:e,activeOption:r,onOptionClick:t})=>p("div",{className:"flex mb-4 gap-2 mx-2 md:mx-4",children:e.map(n=>p("button",{className:`btn btn-sm ${r.name===n.name?"btn-primary":"btn-neutral"}`,onClick:()=>t(n),children:n.name},n.name))}),e0e=({item:e,index:r,setActiveItemIndex:t,lastElementRef:n})=>{const i=e.type==="video"?`https://imgproxy.iris.to/thumbnail/638/${e.url}`:e.url;return p("div",{className:"aspect-square cursor-pointer relative bg-neutral-300 hover:opacity-80",onClick:()=>{window.innerWidth>640?t(r):qt(`/${te.toNostrBech32Address(e.eventId,"note")}`)},ref:n,children:[p(Mo,{square:!0,width:319,src:i,alt:"",className:"w-full h-full object-cover"}),e.type==="video"&&p("div",{className:"absolute top-0 right-0 m-2 shadow-md shadow-gray-500 ",children:eo.video})]},`feed${i}${r}`)},t0e=({mediaItems:e,activeItemIndex:r,setActiveItemIndex:t})=>{const n=()=>{if(r===null)return;const o=(r-1+e.length)%e.length;t(o)},i=()=>{if(r===null)return;const o=(r+1)%e.length;t(o)};if(Ge(()=>{const o=a=>{a.key==="ArrowRight"?i():a.key==="ArrowLeft"&&n()};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[r,e]),r===null)return null;const s=e[r];return p(zo,{width:"100%",height:"100%",onClose:()=>t(null),children:p("div",{className:"relative w-full h-full flex",children:[p("div",{className:"flex h-full justify-center items-center flex-1 relative",children:[s.type==="video"?p("video",{className:"rounded max-h-full max-w-full object-contain",src:s.url,controls:!0,muted:!0,autoPlay:!0,loop:!0,poster:`https://imgproxy.iris.to/thumbnail/638/${s.url}`}):p(Mo,{className:"max-h-full max-w-full object-contain",src:s.url},s.url),p("div",{className:"flex items-center justify-between w-full h-full absolute bottom-0 left-0 right-0",children:[p("div",{className:"p-4",onClick:o=>{o.stopPropagation(),n()},children:p("button",{className:"btn btn-circle btn-sm opacity-50 mr-2 flex-shrink-0",children:p(Ame,{width:20})})}),p("div",{className:"p-4 cursor-pointer",onClick:o=>{o.stopPropagation(),i()},children:p("button",{className:"btn btn-circle btn-sm opacity-50 ml-2 flex-shrink-0",children:p(Nme,{width:20})})})]})]}),p("div",{className:"w-96 p-4 border-l border-neutral-900 overflow-y-auto bg-black h-full",children:p(no,{id:s.eventId,standalone:!0,showReplies:1/0},s.eventId)})]})})};function s6(e){const r=(e.content.match(vH.regex)||[]).map(n=>({type:"image",url:n,eventId:e.id})),t=(e.content.match(yH.regex)||[]).map(n=>({type:"video",url:n,eventId:e.id}));return[...r,...t]}const r0e=({events:e,loadMore:r})=>{const[t,n]=ve([]),[i,s]=ve(null),o=Hn(()=>{const a=e.flatMap(l=>{if(l.kind===7){const u=Da(l);if(u){const d=Mt.get(u);return d?s6(d):[]}return[]}else return s6(l)});n(a)},[e]);return Ge(()=>{o()},[e,o]),p("div",{className:"grid grid-cols-3 gap-px",children:[p(t0e,{setActiveItemIndex:s,activeItemIndex:i,mediaItems:t}),p(Cv,{loadMore:r,children:t.map((a,l)=>p(e0e,{item:a,index:l,setActiveItemIndex:s},`grid-${a.url}`))})]})};function n0e({onClick:e}){return p("div",{className:"fixed bottom-16 md:bottom-8 justify-center items-center z-10 flex w-full md:w-1/2 pb-safe-area",children:p("div",{className:"btn btn-sm opacity-90 hover:opacity-100 hover:bg-iris-blue bg-iris-blue text-white",onClick:e,children:ne("show_n_new_messages").replace("{n} ","")})})}const i0e=e=>{const r=Vr(new Jp),[t,n]=ve(null),[i,s]=ve([]),o=Vr(null),{filter:a,filterFn:l,enabled:u=!0,sinceLastOpened:d=!1,mergeSubscriptions:h=!0}=e,v=b=>{r.current.has(b.id)||l&&!l(b)||a.keywords&&!a.keywords.some(m=>{var x;return(x=b.content)==null?void 0:x.includes(m)})||(r.current.set(b.created_at+b.id,b),s([...r.current.values()].reverse()))};Ge(()=>{r.current=new Jp},[a,l]),Ge(()=>{if(!u||!a)return;const b={...a,limit:a.limit||100};return gt.subscribe(b,v,d,h)},[a,l,u,d,h]),Ge(()=>{if(t)return gt.subscribe(t,v,!1,!1)},[t]);const g=Ai(()=>{var x;const b=(x=r.current.last())==null?void 0:x.value.created_at;if(!b||o.current===b)return;o.current=b;const m={...a,until:b,limit:100};n(m)},500);return{events:i,loadMore:g}},Nv=e=>{const r=e.fetchEvents||i0e,t=Vr(null),{showDisplayAs:n,filterOptions:i,emptyMessage:s}=e;if(!i||i.length===0)throw new Error("Feed requires at least one filter option");const[o,a]=ve(i[0]),[l,u]=ve("feed"),[d]=GI("muted",{}),[h,v]=ve(Math.floor(Date.now()/1e3)),[g,b]=ve(0);Ge(()=>{v(Math.floor(Date.now()/1e3))},[o,l]);const m=Hn(S=>d[S.pubkey]?!1:o.filterFn?o.filterFn(S):!0,[d,o]),{events:x,loadMore:E}=r({filter:o.filter,filterFn:m,sinceLastOpened:!1});x.length&&x[0].pubkey===te.getPubKey()&&x[0].created_at>h&&v(Math.floor(Date.now()/1e3));const k=x.length&&x[0].created_at>h,$=x.length===0;return p(Be,{children:[p(je,{when:k,children:p(n0e,{onClick:()=>{t.current&&(document.documentElement.scrollTop||document.body.scrollTop)>t.current.offsetTop&&t.current.scrollIntoView({behavior:"smooth"}),b(g+1),v(Math.floor(Date.now()/1e3))}})}),p("div",{ref:t}),p(je,{when:i.length>1,children:p(Qme,{filterOptions:i,activeOption:o,onOptionClick:S=>{a(S)}})}),p(je,{when:n!==!1,children:p(Jme,{onDisplayChange:S=>{u(S)},activeDisplay:l})}),p(je,{when:$,children:s||"No Posts"}),p(je,{when:l==="grid",children:p(r0e,{events:x,loadMore:E},`${g}grid`)}),p(je,{when:l==="feed",children:p(Cv,{loadMore:E,children:x.map(S=>S.created_at>h?null:p(no,{id:S.id,...o.eventProps},`${S.id}EC`))},`${g}feed`)})]})},AH=e=>{const r=`https://iris.to/${te.toNostrBech32Address(e.pub,"npub")}`;return p(zo,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:p("div",{style:{textAlign:"center",flex:1},children:[p(l3,{data:r}),p("p",{children:p(Ft,{pub:e.pub})})]})})},s0e=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']];class CH extends yn{componentDidMount(){be.get("noFollowers").on(this.inject()),be.get("hasNostrFollowers").on(this.inject()),be.get("showFollowSuggestions").on(this.inject()),be.get("showNoIrisToAddress").on(this.inject()),be.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return p("div",{className:"flex flex-col flex-grow px-2 py-4 md:px-4 gap-2",children:[p("p",{className:"text-base",children:ne("follow_someone_info")}),s0e.map(([r,t])=>p("div",{className:"flex items-center space-x-4",children:[p(wt,{href:`/${r}`,className:"flex flex-grow items-center space-x-2",children:[p("div",{className:"w-10 h-10",children:p(Wn,{str:r,width:40})}),p("div",{className:"flex-grow",children:[p(Ft,{pub:r,placeholder:"Suggested follow"}),p("p",{className:"text-sm text-gray-500",children:t})]})]}),p(Gl,{id:r})]})),p("p",{className:"my-2",children:p("button",{className:"btn btn-primary",onClick:()=>be.get("showFollowSuggestions").put(!1),children:ne("done")})}),p("p",{className:"text-base",children:[ne("alternatively"),p("i",{children:" "}),p(wt,{href:`/${te.toNostrBech32Address(te.getPubKey(),"npub")}`,className:"link",children:ne("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return p("div",{className:"flex flex-col flex-1 relative",children:[p("div",{className:"absolute top-0 right-0 cursor-pointer",onClick:()=>be.get("noFollowers").put(!1),children:p(y9,{width:24})}),p("p",{children:ne("no_followers_yet")}),p("div",{className:"flex gap-2 my-2",children:[p(Jn,{className:"btn btn-sm btn-neutral",text:ne("copy_link"),copyStr:sr.getMyProfileLink()}),p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.setState({showQrModal:!0}),children:ne("show_qr_code")})]}),p("small",{children:ne("no_followers_yet_info")}),this.state.showQrModal&&p(AH,{onClose:()=>this.setState({showQrModal:!1}),pub:te.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return p("div",{className:"flex flex-col gap-2 mb-2",children:[p("p",{children:"Get your own iris.to/username?"}),p("p",{className:"flex gap-2",children:[p("button",{className:"btn btn-primary",onClick:()=>qt("/settings/iris_account"),children:"Yes please"}),p("button",{className:"btn btn-neutral",onClick:()=>be.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let r;return this.state.showFollowSuggestions?r=this.renderFollowSuggestions():this.state.showNoIrisToAddress?r=this.renderGetIrisAddress():this.state.noFollowers&&(r=this.renderNoFollowers()),r?p("div",{class:"msg",children:p("div",{class:"msg-content",children:r})}):""}}let o0e=class extends iu{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){return p("div",{className:"flex flex-row",children:p("div",{className:"flex flex-col w-full",children:[p(CH,{}),p("div",{className:"hidden md:block px-4",children:p(Pv,{autofocus:!1,placeholder:ne("whats_on_your_mind")})}),p(Nv,{filterOptions:[{name:ne("posts"),filter:{kinds:[1,6],limit:10},filterFn:r=>!Da(r),eventProps:{showRepliedMsg:!0}},{name:ne("posts_and_replies"),filter:{kinds:[1,6],limit:5},eventProps:{showRepliedMsg:!0,fullWidth:!1}}]})]})})}},a0e=class extends iu{constructor(){super();Z(this,"unsub");const t=Array.from(Ue.followedByUser.get(Ke(te.getPubKey()))||[]).map(n=>Pr(n));this.state={followedUsers:t},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition(),this.unsub=Ue.getFollowedByUser(te.getPubKey(),t=>{console.log("followedUsers",t),this.setState({followedUsers:Array.from(t)})},!0)}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this)}renderView(){return p("div",{className:"flex flex-row",children:p("div",{className:"flex flex-col w-full",children:[p(CH,{}),p("div",{className:"hidden md:block px-4",children:p(Pv,{autofocus:!1,placeholder:ne("whats_on_your_mind")})}),p(je,{when:this.state.followedUsers.length,children:p(Nv,{filterOptions:[{name:ne("posts"),filter:{kinds:[1,6],authors:this.state.followedUsers,limit:10},filterFn:t=>!Da(t),eventProps:{showRepliedMsg:!0}},{name:ne("posts_and_replies"),filter:{kinds:[1,6],authors:this.state.followedUsers,limit:5},eventProps:{showRepliedMsg:!0,fullWidth:!1}}]},`feed-${this.state.followedUsers.length}`)})]})})}};class l0e extends iu{constructor(){super(...arguments);Z(this,"class","public-messages-view");Z(this,"updateNotificationsLastOpened",tu(()=>{const t=be.get("settings").get("notifications").get("saveLastOpened");t.once(n=>{var i;if(n!==!1){const s=Math.floor(Date.now()/1e3);((i=_d.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),t.put(!1)),be.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return p(Nv,{showDisplayAs:!1,emptyMessage:ne("no_notifications_yet"),filterOptions:[{name:"notifications",filter:{kinds:[1,6,7,9735],"#p":[te.getPubKey()],limit:20},eventProps:{fullWidth:!1}}],fetchEvents:()=>({events:nt.notifications.eventIds.map(n=>Mt.get(n)).filter(n=>!!n),loadMore:()=>{}})},"notifications")}}class u0e extends iu{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const r=n=>n.content.includes(this.props.keyword),t={kinds:[1],keywords:[this.props.keyword||""]};return p("div",{className:"flex flex-row",children:p("div",{className:"flex flex-col w-full",children:p(Nv,{filterOptions:[{name:"Search",filter:t,filterFn:r}]},this.props.keyword)})})}}const c0e=Qn(({hexKey:e})=>{var t;const r=te.toNostrBech32Address(e,"npub")||"";return p("div",{className:"flex w-full",children:[p(wt,{href:`/${r}`,className:"flex flex-1 gap-4",children:[p(Wn,{str:r,width:49}),p("div",{children:[p(Ft,{pub:r}),p("br",{}),p("span",{className:"text-neutral-500 text-sm",children:[((t=Ue.followersByUser.get(Ke(e)))==null?void 0:t.size)||0,p("i",{children:" "}),"followers"]})]})]}),e!==te.getPubKey()&&p(Gl,{id:r})]},r)});class o6 extends iu{constructor(){super();Z(this,"follows");Z(this,"myPub");Z(this,"updateSortedFollows",Ai(()=>{const t=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),n=Array.from(this.follows).sort(t);this.setState({follows:n})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(t,n){var o,a;const i=(o=Ue.profiles.get(Ke(t)))==null?void 0:o.name,s=(a=Ue.profiles.get(Ke(n)))==null?void 0:a.name;return!i&&!s?t.localeCompare(n):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(t,n){const i=Ue.followDistanceByUser.get(Ke(t)),s=Ue.followDistanceByUser.get(Ke(n));return i===s?this.sortByName(t,n):i===void 0?1:s===void 0||i<s?-1:1}getFollows(){const t=te.toNostrHexAddress(this.props.id)||"";t&&Ue.getFollowedByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const t=te.toNostrHexAddress(this.props.id)||"";t&&Ue.getFollowersByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=te.toNostrBech32Address(te.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),be.get("contacts").on(this.inject()))}followAll(){confirm(`${ne("follow_all")} (${this.state.follows.length})?`)&&Ue.setFollowed(this.state.follows)}renderView(){const t=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return p("div",{className:"px-4 mb-4",children:[p("div",{className:"flex justify-between mb-4",children:[p("span",{className:"text-xl font-bold",children:[p("a",{className:"link",href:`/${this.props.id}`,children:p(Ft,{pub:this.props.id})}),":",p("i",{children:" "}),p("span",{style:{flex:1},className:"ml-1",children:this.props.followers?ne("followers"):ne("following")})]}),p(je,{when:t,children:p("span",{style:"text-align: right",className:"hidden md:inline",children:p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[ne("follow_all")," (",this.state.follows.length,")"]})})})]}),p(je,{when:t,children:p("p",{style:"text-align: right",className:"inline md:hidden",children:p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[ne("follow_all")," (",this.state.follows.length,")"]})})}),p("div",{className:"flex flex-col w-full gap-4",children:[p(Cv,{children:this.state.follows.map(n=>p(c0e,{hexKey:n},n))}),this.state.follows.length===0?"—":""]})]})}}function h0e(e){const[r,t]=ve(""),n=te.toNostrHexAddress(r),i=te.toNostrBech32Address(r,"note"),s=te.toNostrBech32Address(r,"npub"),o=te.toNostrBech32Address(r,"nsec");return p(Be,{children:[p(Ba,{}),p("div",{class:"main-view",id:"settings",children:p("div",{class:"centered-container mobile-padding15",children:[p("h2",{children:ne("key_converter")}),p("p",{children:p("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:a=>{var l;return t((l=a.target.value)==null?void 0:l.trim())}})}),r&&n&&(r===n?p(Be,{children:[p("p",{children:[p("b",{children:"note:"})," ",i]}),p("p",{children:[p("b",{children:"npub:"})," ",s]}),p("p",{children:[p("b",{children:"nsec:"})," ",o]})]}):p("p",{children:[p("b",{children:"hex:"})," ",n]})),r&&!n&&p("p",{children:p("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const h3=2n**256n,tc=h3-0x1000003d1n,d3=h3-0x14551231950b75fc4402da1732fc9bebfn,PH=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,NH=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,RH={p:tc,n:d3,a:0n,b:7n,Gx:PH,Gy:NH},rc=32,a6=e=>ot(ot(e*e)*e+RH.b),En=(e="")=>{throw new Error(e)},D1=e=>typeof e=="bigint",DH=e=>typeof e=="string",ex=e=>D1(e)&&0n<e&&e<tc,BH=e=>D1(e)&&0n<e&&e<d3,MH=(e,r)=>!(e instanceof Uint8Array)||typeof r=="number"&&r>0&&e.length!==r?En("Uint8Array expected"):e,Qp=e=>new Uint8Array(e),f3=(e,r)=>MH(DH(e)?B1(e):Qp(e),r),ot=(e,r=tc)=>{let t=e%r;return t>=0n?t:r+t},l6=e=>e instanceof Ss?e:En("Point expected");let u6;class Ss{constructor(r,t,n){this.px=r,this.py=t,this.pz=n}static fromAffine(r){return new Ss(r.x,r.y,1n)}static fromHex(r){r=f3(r);let t;const n=r[0],i=r.subarray(1),s=c6(i,0,rc),o=r.length;if(o===33&&[2,3].includes(n)){ex(s)||En("Point hex invalid: x not FE");let a=d0e(a6(s));const l=(a&1n)===1n;(n&1)===1!==l&&(a=ot(-a)),t=new Ss(s,a,1n)}return o===65&&n===4&&(t=new Ss(s,c6(i,rc,2*rc),1n)),t?t.ok():En("Point is not on curve")}static fromPrivateKey(r){return ed.mul(jS(r))}get x(){return this.aff().x}get y(){return this.aff().y}equals(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=l6(r),l=ot(t*a),u=ot(s*i),d=ot(n*a),h=ot(o*i);return l===u&&d===h}negate(){return new Ss(this.px,ot(-this.py),this.pz)}double(){return this.add(this)}add(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=l6(r),{a:l,b:u}=RH;let d=0n,h=0n,v=0n;const g=ot(u*3n);let b=ot(t*s),m=ot(n*o),x=ot(i*a),E=ot(t+n),k=ot(s+o);E=ot(E*k),k=ot(b+m),E=ot(E-k),k=ot(t+i);let $=ot(s+a);return k=ot(k*$),$=ot(b+x),k=ot(k-$),$=ot(n+i),d=ot(o+a),$=ot($*d),d=ot(m+x),$=ot($-d),v=ot(l*k),d=ot(g*x),v=ot(d+v),d=ot(m-v),v=ot(m+v),h=ot(d*v),m=ot(b+b),m=ot(m+b),x=ot(l*x),k=ot(g*k),m=ot(m+x),x=ot(b-x),x=ot(l*x),k=ot(k+x),b=ot(m*k),h=ot(h+b),b=ot($*k),d=ot(E*d),d=ot(d-b),b=ot(E*m),v=ot($*v),v=ot(v+b),new Ss(d,h,v)}mul(r,t=!0){if(!t&&r===0n)return a0;if(BH(r)||En("invalid scalar"),this.equals(ed))return p0e(r).p;let n=a0,i=ed;for(let s=this;r>0n;s=s.double(),r>>=1n)r&1n?n=n.add(s):t&&(i=i.add(s));return n}mulAddQUns(r,t,n){return this.mul(t,!1).add(r.mul(n,!1)).ok()}toAffine(){const{px:r,py:t,pz:n}=this;if(this.equals(a0))return{x:0n,y:0n};if(n===1n)return{x:r,y:t};const i=FH(n);return ot(n*i)!==1n&&En("invalid inverse"),{x:ot(r*i),y:ot(t*i)}}assertValidity(){const{x:r,y:t}=this.aff();return(!ex(r)||!ex(t))&&En("Point invalid: x or y"),ot(t*t)===a6(r)?this:En("Point invalid: not on curve")}multiply(r){return this.mul(r)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(r=!0){const{x:t,y:n}=this.aff();return(r?(n&1n)===0n?"02":"03":"04")+h6(t)+(r?"":h6(n))}toRawBytes(r=!0){return B1(this.toHex(r))}}Ss.BASE=new Ss(PH,NH,1n);Ss.ZERO=new Ss(0n,1n,0n);const{BASE:ed,ZERO:a0}=Ss,LH=(e,r)=>e.toString(16).padStart(r,"0"),p3=e=>Array.from(e).map(r=>LH(r,2)).join(""),B1=e=>{const r=e.length;(!DH(e)||r%2)&&En("hex invalid 1");const t=Qp(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);(Number.isNaN(o)||o<0)&&En("hex invalid 2"),t[n]=o}return t},M1=e=>BigInt("0x"+(p3(e)||"0")),c6=(e,r,t)=>M1(e.slice(r,t)),v3=e=>D1(e)&&e>=0n&&e<h3?B1(LH(e,2*rc)):En("bigint expected"),h6=e=>p3(v3(e)),d6=(...e)=>{const r=Qp(e.reduce((n,i)=>n+MH(i).length,0));let t=0;return e.forEach(n=>{r.set(n,t),t+=n.length}),r},FH=(e,r=tc)=>{(e===0n||r<=0n)&&En("no inverse n="+e+" mod="+r);let t=ot(e,r),n=r,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,l=i-s*o;n=t,t=a,i=s,s=l}return n===1n?ot(i,r):En("no inverse")},d0e=e=>{let r=1n;for(let t=e,n=(tc+1n)/4n;n>0n;n>>=1n)n&1n&&(r=r*t%tc),t=t*t%tc;return ot(r*r)===e?r:En("sqrt invalid")},jS=e=>(D1(e)||(e=M1(f3(e,rc))),BH(e)?e:En("private key out of range")),f6=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let l0;function jH(e){e=f3(e);const r=rc+8;(e.length<r||e.length>1024)&&En("expected proper params");const t=ot(M1(e),d3-1n)+1n;return v3(t)}const zH={hexToBytes:B1,bytesToHex:p3,concatBytes:d6,bytesToNumberBE:M1,numberToBytesBE:v3,mod:ot,invert:FH,hmacSha256Async:async(e,...r)=>{const t=f6();if(!t)return En("etc.hmacSha256Async not set");const n=t.subtle,i=await n.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Qp(await n.sign("HMAC",i,d6(...r)))},hmacSha256Sync:l0,hashToPrivateKey:jH,randomBytes:e=>{const r=f6();return r||En("crypto.getRandomValues must be defined"),r.getRandomValues(Qp(e))}},p6={normPrivateKeyToScalar:jS,isValidPrivateKey:e=>{try{return!!jS(e)}catch{return!1}},randomPrivateKey:()=>jH(zH.randomBytes(rc+8)),precompute(e=8,r=ed){return r.multiply(3n),r}};Object.defineProperties(zH,{hmacSha256Sync:{configurable:!1,get(){return l0},set(e){l0||(l0=e)}}});const Bu=8,f0e=()=>{const e=[],r=256/Bu+1;let t=ed,n=t;for(let i=0;i<r;i++){n=t,e.push(n);for(let s=1;s<2**(Bu-1);s++)n=n.add(t),e.push(n);t=n.double()}return e},p0e=e=>{const r=u6||(u6=f0e()),t=(d,h)=>{let v=h.negate();return d?v:h};let n=a0,i=ed;const s=1+256/Bu,o=2**(Bu-1),a=BigInt(2**Bu-1),l=2**Bu,u=BigInt(Bu);for(let d=0;d<s;d++){const h=d*o;let v=Number(e&a);e>>=u,v>o&&(v-=l,e+=1n);const g=h,b=h+Math.abs(v)-1,m=d%2!==0,x=v<0;v===0?i=i.add(t(m,r[g])):n=n.add(t(x,r[b]))}return{p:n,f:i}},v0e=p(Be,{children:[p("b",{children:"End User Licence Agreement"}),p("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),p("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),p("ul",{children:[p("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),p("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),p("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),p("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),p("li",{children:"illegal content related to gambling."})]}),p("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),p("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),p("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),p("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function g0e({onAccept:e,onDecline:r}){return p("div",{class:"m-1 bg-black overflow-y-scroll absolute inset-0 pb-safe-area",children:[p("div",{className:"prose",children:v0e}),p("div",{className:"flex gap-2 my-2",children:[p("button",{className:"btn btn-primary",onClick:e,children:"Accept"}),p("button",{className:"btn btn-default",onClick:r,children:"Decline"})]})]})}function y0e(e){const r=e.target.value;Ah.includes(r)&&(localStorage.setItem("language",r),location.reload())}const m0e=()=>p("div",{className:"flex flex-row w-full justify-center items-center",children:[p(p9,{width:24}),p("select",{className:"input rounded-full",onChange:y0e,value:Ts,children:Object.keys(jp).map(e=>p("option",{value:e,children:jp[e]},e))})]});class u0 extends vn{constructor(){super(...arguments);Z(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const t=document.getElementById("login-form-name");t&&t.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(t){t.preventDefault();const n=await window.nostr.getPublicKey();te.login({rpub:n},this.props.fullScreen)}async onPasteKey(t){var s;const n=(s=t.target.value)==null?void 0:s.trim();if(!n.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(n)}catch{}if(!i)if(p6.isValidPrivateKey(n))i={priv:n,rpub:te.getPublicKey(n)};else try{const{data:o,prefix:a}=NE(n),l=sr.arrayToHex(o);a==="npub"?i={rpub:l}:a==="nsec"&&(i={priv:l,rpub:te.getPublicKey(l)})}catch(o){this.setState({privateKeyError:ne("invalid_private_key")}),console.error(o)}i&&(await te.login(i,this.props.fullScreen),t.target.value="",sr.copyToClipboard(""))}showCreateAccount(t){t.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const t=document.getElementById("login-form-name"),n=t==null?void 0:t.value;te.loginAsNewUser(this.props.fullScreen),be.get("showFollowSuggestions").put(!0),n&&setTimeout(()=>{Ue.setMetadata({display_name:n})},100);const i=Math.floor(Date.now()/1e3);nt.notificationsSeenTime=i}onLoginFormSubmit(t){t.preventDefault(),sr.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(t){const n=t.target.value;if(n.indexOf('"priv"')!==-1||p6.isValidPrivateKey(n)||n.startsWith("nsec")||n.startsWith("npub")){this.onPasteKey(t),t.target.value="";return}this.setState({inputStyle:n.length?"text-align: center":""})}renderExistingAccountLogin(){return p(Be,{children:[p("input",{className:"rounded-full input input-bordered centered-placeholder",id:"paste-privkey",autoFocus:!0,onInput:t=>this.onPasteKey(t),placeholder:ne("paste_private_key"),type:"password"}),this.state.privateKeyError&&p("p",{className:"error",children:this.state.privateKeyError})]})}render(){return p("section",{className:`flex items-center justify-center ${this.props.fullScreen?"h-screen":""}`,children:[this.state.showEula&&p(g0e,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),p("div",{className:"w-full max-w-sm",children:this.state.showSwitchAccount?p("div",{className:"text-center shadow-md rounded px-8 pt-6 pb-8 mb-4 flex gap-2 flex-col",children:[p("p",{className:"link",children:p("a",{href:"",id:"show-create-account",onClick:t=>this.showCreateAccount(t),children:ne("back")})}),this.renderExistingAccountLogin()]}):p("form",{className:"shadow-md bg-black rounded px-8 pt-6 pb-8 mb-4 gap-4 flex flex-col items-center justify-center",autocomplete:"off",onSubmit:t=>this.onLoginFormSubmit(t),children:[p("img",{className:"w-20 h-20 mx-auto",src:"/img/android-chrome-192x192.png",alt:"iris"}),p("h1",{className:"text-2xl font-bold",children:"Dpeep"}),p("input",{className:"input centered-placeholder",style:this.state.inputStyle,onInput:t=>this.onNameChange(t),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:ne("whats_your_name")}),p("p",{className:"my-2",children:p("button",{className:"btn btn-primary",type:"submit",children:ne("new_user_go")})}),window.nostr?p("p",{className:"text-center link",children:p("a",{href:"",onClick:t=>this.nostrExtensionLogin(t),children:ne("nostr_extension_login")})}):null,p("p",{className:"text-center link",children:p("a",{href:"",id:"show-existing-account-login",onClick:t=>{t.preventDefault(),this.setState({showSwitchAccount:!0})},children:ne("private_key_login")})}),p(m0e,{})]})})]})}}class b0e extends u0{render(){return this.renderExistingAccountLogin()}}function w0e(e){return p("div",{className:"px-2 md:px-4 py-8 justify-center flex flex-col items-center",children:[p("div",{className:"my-4",children:ne("logout_confirmation_info")}),p("div",{className:"my-4 flex flex-row gap-2",children:[p("button",{className:"btn btn-neutral",onClick:()=>qt("/settings"),children:ne("back")}),p("button",{className:"btn btn-primary",onClick:()=>_d.logOut(),children:ne("log_out")})]})]})}class v6 extends iu{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const r=te.toNostrBech32Address(this.props.id,"note");if(r&&this.props.id!==r){qt(`/${r}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(r){r.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let r;return this.props.id==="new"?r=p("div",{className:"m-2",children:p(Pv,{placeholder:ne("whats_on_your_mind"),forceAutoFocusMobile:!0,autofocus:!0,onSubmit:()=>qt("/")})}):r=p(no,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),p("div",{className:"w-full",children:r})}}const _0e=({imageUrl:e,onClose:r})=>p(zo,{width:"100%",height:"100%",onClose:r,children:p("div",{className:"flex h-full justify-center items-center",children:p(Mo,{className:"max-h-full max-w-full object-contain",src:e})})});class $0e extends u3{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=ne("report_public"),this.actionDone=ne("reported"),this.hoverAction=ne("unreport")}onClick(r){r.preventDefault();const t=!this.state[this.key];if(confirm(t?"Publicly report this user?":"Unreport user?")){const n=te.toNostrHexAddress(this.props.id);n&&Ue.flag(n,t)}}componentDidMount(){Ue.getFlaggedUsers(r=>{const t=te.toNostrHexAddress(this.props.id),n=t&&(r==null?void 0:r.has(t));this.setState({reported:n})})}}const x0e=({hexPub:e,npub:r,rawDataJson:t,isMyProfile:n})=>{async function i(a){a.preventDefault(),qt("/"),te.login({rpub:e})}const[s,o]=ve(!1);return p(Be,{children:[p(hH,{children:[p(Jn,{className:"btn btn-sm",text:ne("copy_link"),copyStr:window.location.href},`${e}copyLink`),p(Jn,{className:"btn btn-sm",text:ne("copy_user_ID"),copyStr:r},`${e}copyNpub`),p("button",{className:"btn btn-sm",onClick:()=>o(!0),children:ne("show_qr_code")}),p(Jn,{className:"btn btn-sm",text:ne("copy_raw_data"),copyStr:t},`${e}copyData`),p(je,{when:!n&&!te.getPrivKey(),children:p("button",{className:"btn btn-sm",onClick:i,children:[ne("view_as")+" ",p(Ft,{pub:e,hideBadge:!0})]})}),p(je,{when:!n,children:p(Be,{children:[p(u3,{className:"btn btn-sm",id:e}),p($0e,{className:"btn btn-sm",id:e})]})})]}),p(je,{when:s,children:p(AH,{pub:e,onClose:()=>o(!1)})})]})},E0e=({picture:e,onError:r})=>{const[t,n]=ve(!1),i=()=>{n(!0)},s=()=>{n(!1)};return e?p("div",{className:"rounded-full border-4 border-black",children:[p(Mo,{width:128,square:!0,className:"rounded-full cursor-pointer",src:e,onError:r,onClick:i}),t&&p(zo,{centerVertically:!0,onClose:s,children:p(Mo,{className:"max-w-full max-h-[90vh]",square:!0,src:e,onError:r})})]}):null},S0e=({str:e})=>{const[r,t]=ve({showTrustsList:!1,trusted:!1,showDistrustsList:!1,distrusted:!1,renderTrustScore:"",renderDistrustScore:"",processing:!1}),n=Av(Ke(e));Ge(()=>{var u;if(!n)return;const o=(u=n.vertice)==null?void 0:u.score;if(!o)return;let a=o.isDirectTrusted(),l=o.isDirectDistrusted();t(d=>({...d,trusted:a,distrusted:l,renderTrustScore:a?o.renderTrustCount():"",renderDistrustScore:l?o.renderDistrustCount():"",processing:!1}))},[n]);function i(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!r.trusted,distrusted:!1,processing:!0}),(async()=>{let a=r.trusted?0:1;await mt.publishTrust(e,a,Is.Key)})()}function s(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!1,distrusted:!r.distrusted,processing:!0}),(async()=>{let a=r.distrusted?0:-1;await mt.publishTrust(e,a,Is.Key)})()}return p(Be,{children:p("div",{className:"flex-1 flex gap-4",children:[p("a",{className:`msg-btn trust-btn ${r.trusted?"trusted":""} cursor-pointer`,onClick:o=>i(o),title:r.trusted?"Trusted":"Trust",children:r.trusted?p(ob,{size:24,fill:"green",stroke:"currentColor"}):p(ob,{size:24,fill:"none",stroke:"currentColor"})}),p("a",{className:`msg-btn trust-btn ${r.distrusted?"distrusted":""} cursor-pointer`,onClick:o=>s(o),title:r.distrusted?"Distrusted":"Distrust",children:r.distrusted?p(sb,{size:24,fill:"red",stroke:"currentColor"}):p(sb,{size:24,fill:"none",stroke:"currentColor"})})]})})};function g6(e,r="npub"){return F0(Ke(e),r)}function k0e(e,r="npub"){const[t,n]=ve(g6(e,r));return Ge(()=>{n(g6(e,r))},[e]),t}const T0e=({str:e})=>{const r=k0e(e),[t,n]=ve(void 0),i=Av(Ke(e),void 0,"");return Ge(()=>{n(()=>{var s;return(s=i.vertice)==null?void 0:s.score})},[i]),p(Be,{children:[o3(t,r,!0),a3(t,r,!0)]})},I0e=({address:e})=>{const[r,t]=ve(0),[n,i]=ve(0),[s,o]=ve(0),[a,l]=ve(0),[u,d]=ve([]),h=te.getPubKey()===e;return Ge(()=>{const v=[];fetch(`https://eu.rbr.bio/${e}/info.json`).then(b=>{b.ok&&b.json().then(m=>{var x;m&&(l((x=m.following)==null?void 0:x.length),o(m.followerCount))})});const g=Ai(b=>{const m=new Set;for(const x of b)Ue.getFollowDistance(x)===1&&m.add(x);d(Array.from(m))},1e3);return setTimeout(()=>{v.push(Ue.getFollowersByUser(e,b=>{i(b.size),g(b)})),v.push(Ue.getFollowedByUser(e,b=>t(b.size)))},1e3),()=>{v.forEach(b=>b())}},[e]),p("div",{children:[p("div",{className:"text-sm flex gap-4",children:[p(wt,{href:`/follows/${e}`,children:[p("b",{children:Math.max(r,a)}),p("span",{className:"text-neutral-500",children:[" ",ne("following")]})]}),p(wt,{href:`/followers/${e}`,children:[p("b",{children:Math.max(n,s)}),p("span",{className:"text-neutral-500",children:[" ",ne("followers")]})]}),p(T0e,{str:e})]}),p(je,{when:!h&&u.length>0,children:p("div",{className:"text-neutral-500",children:p("small",{children:["Followed by"," ",u.slice(0,3).map((v,g)=>p("span",{children:[p(je,{when:g>0,children:", "}),p(wt,{className:"hover:underline",href:`/${te.toNostrBech32Address(v,"npub")}`,children:p(Ft,{pub:v,hideBadge:!0})})," "]},v)),p(je,{when:u.length>3,children:p("span",{children:[" ","and ",p("b",{children:u.length-3})," other users you follow"]})})]})})}),p(je,{when:Ue.isFollowing(e,te.getPubKey()),children:p("div",{className:"text-neutral-500",children:p("small",{children:ne("follows_you")})})})]})},O0e=Qn(I0e),A0e=e=>{var O,I;const{hexPub:r,npub:t}=e,[n,i]=ve(Ue.profiles.get(Ke(r))||{}),[s,o]=ve(""),[a,l]=ve(""),[u,d]=ve(!1),[h,v]=ve(""),[g,b]=ve(""),[m,x]=ve(!1),[E,k]=ve(!1),$=Hn((P,R)=>{const D=[];return D.push(gt.subscribe({authors:[P],kinds:[0,3]},void 0,!1,!1)),D.push(Ue.getProfile(P,F=>{if(!F)return;if(!(R&&R.endsWith("@iris.to"))&&F.nip05&&F.nip05valid){const M=F.nip05,G=M.split("@"),Q=G[0],he=G[1];let ue;he==="iris.to"?Q==="_"?ue="iris":ue=Q:Q==="_"?ue=he:ue=M,v(ue),ue=window.location.pathname.replace(/[^/]+/,ue);const ke=window.history.state;window.history.replaceState(ke,"",ue)}let q=F.lud16||F.lud06;q&&!q.startsWith("lightning:")&&(q="lightning:"+q),o(q);let W="";try{const M=F.website&&(F.website.match(/^https?:\/\//)?F.website:"http://"+F.website),G=new URL(M);W=G.href.endsWith("/")?G.href.slice(0,-1):G.href}catch{W=""}l(W),i(F)},!0)),()=>{D.forEach(F=>F())}},[]);Ge(()=>{const P=[],R=Mt.findOne({kinds:[0],authors:[r]}),D=Mt.findOne({kinds:[3],authors:[r]});R&&P.push(R),D&&P.push(D),b(JSON.stringify(P,null,2)),x(r===te.getPubKey()),$(r,h);const F=be.get("loggedIn").on(q=>{d(q)}),K=Ue.getBlockedUsers(q=>{k(q.has(r))});return()=>{K(),F()}},[r]);const S=E?p(Wn,{str:t,hidePicture:!0,width:128},`${t}avatar`):p(E0e,{picture:n.picture,onError:()=>null},`${r}picture`),T=()=>!u&&be.get("showLoginModal").put(!0);return p("div",{children:p("div",{className:"mb-2 mx-4 md:px-4 md:mx-0 flex flex-col gap-2",children:[p("div",{className:"flex flex-row",children:[p("div",{className:n.banner?"-mt-24":"",children:S}),p("div",{className:"flex-1 justify-end items-center flex gap-2",children:[p("div",{onClick:T,children:[p("a",{href:"/graph/"+t,className:"link px-2",children:"Web of Trust"}),p(je,{when:m,children:p("a",{className:"btn btn-sm btn-neutral",href:"/profile/edit",children:ne("edit_profile")})}),p(je,{when:!m,children:[p(Gl,{id:r},`${r}follow`),p("button",{className:"btn btn-neutral btn-sm",onClick:()=>u&&qt(`/chat/${t}`),children:ne("send_message")})]})]}),p(x0e,{hexPub:r,npub:t,rawDataJson:g,isMyProfile:m})]})]}),p("div",{className:"profile-header-stuff",children:[p("div",{className:"flex-1 profile-name",children:[p("span",{className:"text-xl",children:p(Ft,{pub:r})}),p(je,{when:n.nip05&&n.nip05valid,children:[p("br",{}),p("small",{className:"text-iris-green",children:(O=n.nip05)==null?void 0:O.replace(/^_@/,"")})]})]}),p(O0e,{address:r}),p("div",{className:"py-2",children:[p("p",{className:"text-sm",children:p(c3,{textOnly:!0,children:(I=n.about)==null?void 0:I.slice(0,500)})}),p("div",{className:"flex flex-1 flex-row align-center justify-center mt-4",children:[p(je,{when:!m,children:p(S0e,{str:r})}),p(je,{when:s,children:p("div",{className:"flex-1",children:p("a",{className:"btn btn-sm btn-neutral",href:s,onClick:P=>sr.handleLightningLinkClick(P),children:["⚡ ",ne("tip_lightning")]})})}),p(je,{when:a,children:p("div",{className:"flex-1",children:p("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"link",children:a==null?void 0:a.replace(/^https?:\/\//,"")})})})]})]})]})]})},`${r}details`)};class am extends iu{constructor(){super();Z(this,"subscriptions");Z(this,"unsub");this.state={followedUserCount:0,followerCount:0,bannerModalOpen:!1},this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers)return p("div",{className:"msg",children:p("div",{className:"msg-content",children:[p("p",{children:["Share your profile link so ",this.state.name||"this user"," can follow you:"]}),p("p",{children:p(Jn,{text:ne("copy_link"),copyStr:sr.getMyProfileLink()})}),p("small",{children:ne("no_followers_yet_info")})]})})}async viewAs(t){t.preventDefault(),qt("/"),te.login({rpub:this.state.hexPub})}renderView(){const{hexPub:t,display_name:n,name:i,profile:s,banner:o,picture:a,blocked:l,bannerModalOpen:u,fullBanner:d}=this.state;if(!t)return p("div",{});const h=n||i||"Profile",v=`${h} | Iris`,g=`Latest posts by ${n||i||"user"}. ${(s==null?void 0:s.about)||""}`,b=m=>this.setState({bannerModalOpen:m});return p(Be,{children:[p(je,{when:o,children:[p("div",{className:"mb-4 h-48 bg-cover bg-center cursor-pointer",style:{backgroundImage:`url(${o})`},onClick:()=>b(!0)}),p(je,{when:u,children:p(_0e,{imageUrl:d,onClose:()=>b(!1)})})]}),p("div",{children:[p(ud,{children:[p("title",{children:h}),p("meta",{name:"description",content:g}),p("meta",{property:"og:type",content:"profile"}),p(je,{when:a,children:[p("meta",{property:"og:image",content:a}),p("meta",{name:"twitter:image",content:a})]}),p("meta",{property:"og:title",content:v}),p("meta",{property:"og:description",content:g})]}),p(A0e,{npub:this.state.npub,hexPub:this.state.hexPub}),p(je,{when:!l,children:p(Nv,{filterOptions:[{name:ne("posts"),filter:{authors:[this.state.hexPub],kinds:[1,6],limit:10},filterFn:m=>!Da(m),eventProps:{showRepliedMsg:!0}},{name:ne("posts_and_replies"),filter:{authors:[this.state.hexPub],kinds:[1,6],limit:5},eventProps:{showRepliedMsg:!0,fullWidth:!1}},{name:ne("likes"),filter:{authors:[this.state.hexPub],kinds:[7],limit:5}}]},`posts${this.state.hexPub}`)})]})]})}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this),be.get("isMyProfile").put(!1)}componentDidUpdate(t,n){var i;!n.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}loadProfile(t){const n=t===te.getPubKey();be.get("isMyProfile").put(n),be.get("noFollowers").on(this.inject()),this.subscriptions.push(Ue.getProfile(t,i=>{let s,o;try{if(s=i.banner&&new URL(i.banner).toString(),!s)return;o=s,s=Jz(s)?s:`https://imgproxy.iris.to/insecure/rs:fit:948:948/plain/${s}`,this.setState({banner:s,fullBanner:o})}catch{console.log("Invalid banner URL",i.banner)}}))}componentDidMount(){this.restoreScrollPosition();const t=this.props.id,n=te.toNostrBech32Address(t,"npub");if(be.get("loggedIn").on(this.inject()),n&&n!==t){qt(`/${n}`,!0);return}const i=te.toNostrHexAddress(t);if(!i){let s=t;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),te.getPubKeyByNip05Address(s).then(o=>{if(o){const a=te.toNostrBech32Address(o,"npub");a&&a!==o&&(this.setState({npub:a,hexPub:o}),this.loadProfile(o))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:te.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}class C0e extends yn{onLogoutClick(r){r?qt("/logout"):_d.logOut()}async onExtensionLoginClick(r){r.preventDefault();const t=await window.nostr.getPublicKey();te.login({rpub:t})}deleteAccount(){confirm(`${ne("delete_account")}?`)&&(nt.publish({kind:0,content:JSON.stringify({deleted:!0})}),nt.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{_d.logOut()},1e3))}render(){const r=te.getPrivKey();let t;r&&(t=ka.nsecEncode(r));const n=te.getPubKey(),i=ka.npubEncode(n),s=!!te.getPrivKey();return p(Be,{children:p("div",{class:"centered-container",children:[p("h2",{children:ne("account")}),s?p("p",{children:[p("b",{children:ne("save_backup_of_privkey_first")})," ",ne("otherwise_cant_log_in_again")]}):null,p("div",{className:"flex gap-2 my-2",children:[p("button",{className:"btn btn-sm btn-primary",onClick:()=>this.onLogoutClick(s),children:ne("log_out")}),p("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:ne("switch_account")})]}),this.state.showSwitchAccount&&p(Be,{children:[p("p",{children:p(b0e,{})}),p("p",{children:p("a",{href:"#",onClick:o=>this.onExtensionLoginClick(o),children:ne("nostr_extension_login")})})]}),p("h3",{children:ne("public_key")}),p("p",{children:p("small",{children:i})}),p("div",{className:"flex gap-2 my-2",children:[p(Jn,{className:"btn btn-neutral btn-sm",copyStr:i,text:"Copy npub"}),p(Jn,{className:"btn btn-neutral btn-sm",copyStr:n,text:"Copy hex"})]}),p("h3",{children:ne("private_key")}),p("div",{className:"flex gap-2 my-2",children:r?p(Be,{children:[p(Jn,{className:"btn btn-neutral btn-sm",copyStr:t,text:"Copy nsec"}),p(Jn,{className:"btn btn-neutral btn-sm",copyStr:r,text:"Copy hex"})]}):p("p",{children:ne("private_key_not_present_good")})}),r?p("p",{children:ne("private_key_warning")}):"",sr.isStandalone()?p(Be,{children:[p("h3",{children:ne("delete_account")}),p("p",{children:p("button",{className:"btn btn-sm btn-danger",onClick:()=>this.deleteAccount(),children:ne("delete_account")})})]}):null]})})}}const P0e=()=>{const[e,r]=ve(!1);return Ge(()=>{var t;(t=_d.public)==null||t.get("settings/colorScheme",()=>{}),be.get("showConnectedRelays").on(r)},[]),p(Be,{children:p("div",{class:"centered-container",children:[p("h3",{children:ne("appearance")}),p("p",{children:[p("input",{className:"checkbox",type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:e,onChange:t=>{be.get("showConnectedRelays").put(t.currentTarget.checked)}}),p("label",{htmlFor:"showConnectedRelays",children:[" ",ne("show_connected_relays_in_header")]})]})]})})};class N0e extends yn{profileExportJson(){const r=te.getPubKey();let t=[];const n=Mt.findOne({kinds:[0],authors:[r]}),i=Mt.findOne({kinds:[3],authors:[r]});return n&&t.push(n),i&&t.push(i),t=JSON.stringify(t,null,2),t}async exportMyEvents(){console.log("exporting my events");const r=te.getPubKey(),t=[];let n=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await Qu.db.events.where({pubkey:r}).each(i=>{t.push(i),n++}),this.setState({saveMessage:`Found ${n} events`,downloadMyEventsMessage:null}),JSON.stringify(t)}render(){return p(Be,{children:p("div",{class:"centered-container",children:[p("h2",{children:ne("backup")}),p("h3",{children:ne("save")}),p("p",{children:[ne("profile")," & ",ne("follows"),":"]}),p("p",{children:[p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:ne("download")}),p(Jn,{text:ne("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),p("p",{children:[ne("your_events"),":"]}),p("p",{children:p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||ne("download")})}),this.state.saveMessage&&p("p",{children:this.state.saveMessage}),this.state.saveError&&p("p",{class:"warning",children:this.state.saveError}),p("h3",{children:ne("load")}),p("p",{children:p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),p("p",{children:p("textarea",{className:"textarea",onInput:r=>this.import(r.target.value),placeholder:ne("paste_event_json")})}),this.state.loadError&&p("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&p("p",{class:"positive",children:ne("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&p(Be,{children:[p("p",{class:"positive",children:ne("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(r=>p("div",{className:"profile-link-container",children:[p(wt,{href:`/${te.toNostrBech32Address(r,"npub")}`,className:"profile-link",children:[p(Wn,{str:r,width:40}),p(Ft,{pub:r})]}),p(Gl,{id:r})]}))]})]})})}async onClickDownload(r,t){try{this.setState({saveMessage:null,saveError:null});const n=await t(),i="data:text/json;charset=utf-8,"+encodeURIComponent(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove()}catch(n){console.error(n),this.setState({saveError:n.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=t=>{var s;const i=(s=t.target.files)==null?void 0:s[0];if(i){const o=new FileReader;o.onload=()=>{this.import(o.result)},o.readAsText(i)}},r.click()}import(r){var t;if(!r||r.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let n=JSON.parse(r);Array.isArray(n)||(n=[n]);for(const i of n){if(!i.sig)continue;nt.publish(i);const s=te.getPubKey();if(i.pubkey===s&&i.kind===3){const o=i.tags.filter(u=>u[0]==="p").map(u=>u[1]),a=(((t=Mt.findOne({kinds:[3],authors:[s]}))==null?void 0:t.tags)||[]).filter(u=>u[0]==="p").map(u=>u[1]),l=o.filter(u=>!a.includes(u));Ue.setFollowed(l),this.setState({restoredFollows:l})}}this.setState({loadError:null,importedEvents:n.length})}catch(n){this.setState({loadError:n.message})}}}class R0e extends yn{constructor(){super(),this.state={settings:{}}}componentDidMount(){be.get("settings").on(this.inject())}render(){const r=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],t=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return p(Be,{children:p("div",{class:"centered-container",children:[p("h2",{children:ne("content")}),p("h3",{children:ne("notes")}),r.map(({setting:n,label:i})=>p("p",{children:[p("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>be.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),p("label",{htmlFor:n,children:[" ",i]})]},n)),p("h3",{children:ne("media")}),t.map(({setting:n,label:i})=>p("p",{children:[p("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>be.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),p("label",{htmlFor:n,children:[" ",i]})]},n))]})})}}class D0e extends yn{render(){const r=(n,i,s)=>p("p",{children:[p("input",{type:"checkbox",id:n,checked:this.state[n]===void 0?s:this.state[n],onChange:o=>{const a=o.target.checked;be.get("dev").get(n).put(a)}}),p("label",{htmlFor:n,children:i})]}),t=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return p(Be,{children:p("div",{class:"centered-container",children:[p("h3",{children:"Developer"}),p("p",{children:"Settings intended for Dpeep developers."}),t.map(({key:n,label:i,defaultValue:s})=>r(n,i,s))]})})}componentDidMount(){be.get("dev").on(this.sub(r=>this.setState(r)))}}class B0e extends yn{constructor(){super(...arguments);Z(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});Z(this,"checkAvailabilityFromAPI",tu(async t=>{const n=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(t)}`);if(t===this.state.newUserName)if(n.status<500){const i=await n.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(t,n=!0){return p(Be,{children:[p("p",{children:["Username: ",p("b",{children:t})]}),p("p",{children:["Short link:"," ",n?p("a",{href:`https://iris.to/${t}`,onClick:i=>{i.preventDefault(),qt(`/${t}`)},children:["iris.to/",t]}):p(Be,{children:["iris.to/",t]})]}),p("p",{children:["Nostr address (nip05): ",p("b",{children:[t,"@iris.to"]})]})]})}render(){let t;if(this.state.irisToActive){const n=this.state.profile.nip05.split("@")[0];t=this.renderAccountName(n)}else this.state.existing&&this.state.existing.confirmed?t=p("div",{children:[p("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),p("p",{children:p("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?t=p("div",{children:[p("p",{className:"text-iris-green",children:["Username iris.to/",p("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),p("p",{children:p("button",{className:"btn btn-sm btn-primary",onClick:()=>this.enableReserved(),children:"Yes please"})}),p("p",{children:p("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?t=p("div",{className:"text-iris-red",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=n=>this.register(n),t=p(Be,{children:[p("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),p("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):t=p("div",{children:[p("p",{children:"Register an Iris username (iris.to/username)"}),p("form",{onSubmit:n=>this.showChallenge(n),children:[p("div",{className:"flex gap-2",children:[p("input",{className:"input",type:"text",placeholder:"Username",value:this.state.newUserName,onInput:n=>this.onNewUserNameChange(n)}),p("button",{className:"btn btn-primary",type:"submit",children:"Register"})]}),p("p",{children:this.state.newUserNameValid?p(Be,{children:[p("span",{className:"text-iris-green",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):p("span",{className:"text-iris-red",children:this.state.invalidUsernameMessage})})]})]});return p(Be,{children:[p("h3",{children:"Iris.to account"}),t,p("p",{children:p("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})}async onNewUserNameChange(t){const n=t.target.value;if(n.length===0){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:""});return}if(n.length<8||n.length>15){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 8 and 15 characters"});return}if(!n.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:n,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(n)}showChallenge(t){t.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(t){console.log("register",t);const n=te.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};i.id=nt.getEventHash(i),i.sig=await te.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:t})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(o=>{this.setState({error:o.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const t=this.state.existing.name+"@iris.to",n=setTimeout(()=>{Ue.setMetadata({nip05:t})},2e3);Ue.getProfile(te.getPubKey(),i=>{i&&(clearTimeout(n),i.nip05!==t&&(i.nip05=t,Ue.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const t=te.getPubKey(),n={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=nt.getEventHash(n),n.sig=await te.sign(n);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});be.get("showNoIrisToAddress").put(!1),be.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const t=te.getPubKey(),n={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=nt.getEventHash(n),n.sig=await te.sign(n);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const t=te.getPubKey();Ue.getProfile(t,n=>{const i=n&&n.nip05&&n.nip05valid&&n.nip05.endsWith("@iris.to");this.setState({profile:n,irisToActive:i}),n&&!i&&this.checkExistingAccount(t)},!0),this.checkExistingAccount(t)}async checkExistingAccount(t){const n=await fetch(`https://api.iris.to/user/find?public_key=${t}`);if(n.status===200){const i=await n.json();this.setState({existing:i})}}}const M0e=()=>p(Be,{children:p("div",{class:"centered-container",children:[p("h3",{children:ne("language")}),p("div",{class:"centered-container",children:Object.keys(jp).map(e=>{let r;return e==Ts?r=p("input",{type:"radio",name:"language",id:e,onChange:t=>y6(t),value:e,checked:!0}):r=p("input",{type:"radio",name:"language",id:e,onChange:t=>y6(t),value:e}),p(Be,{children:[r,p("label",{for:e,children:[" ",jp[e]]}),p("br",{})]},e)})})]})});function y6(e){const r=e.target.value;Ah.indexOf(r)>=0&&(localStorage.setItem("language",r),location.reload())}const L0e=()=>{const[e,r]=ve(Array.from(Ir.relays.values())),[t,n]=ve([]),[i,s]=ve("");Ge(()=>{const h=setInterval(()=>{r(Array.from(Ir.relays.values()))},2e3);return()=>clearInterval(h)}),Ge(()=>{n(Ir.getPopularRelays())},[]);const o=h=>{be.get("relays").get(h.url).put(null),Ir.remove(h.url)},a=h=>h.includes("://")?h:`wss://${h}`,l=(h,v)=>{const g=a(v);be.get("relays").get(g).put({enabled:!0,newRelayUrlWithProtocol:g}),h.preventDefault(),Ir.add(g),s("")},u=h=>{try{return gt.relayPool.relayByUrl.get(h.url).status}catch{return 3}},d=h=>{switch(u(h)){case 0:return"text-iris-yellow";case 1:return"text-iris-green";case 2:return"text-iris-yellow";case 3:return"";default:return"status"}};return p("div",{className:"centered-container",children:[p("h2",{children:ne("network")}),p("div",{className:"flex flex-col gap-2",children:[e.map(h=>p("div",{className:"flex gap-2 flex-row peer",children:[p("div",{className:"flex-1 truncate max-w-[60vw]",children:[p("span",{className:d(h),children:"⬤ "}),h.url]},h.url),p("button",{className:"btn btn-neutral btn-sm",onClick:()=>o(h),children:ne("remove")}),p("input",{className:"checkbox",type:"checkbox",checked:h.enabled!==!1,onChange:()=>{h.enabled=h.enabled===!1,h.enabled?Ir.enable(h.url):Ir.disable(h.url)}})]})),p("div",{className:"flex flex-row peer gap-2",children:[p("div",{className:"flex-cell",children:p("input",{className:"input",id:"new-relay-url",type:"text",placeholder:ne("new_relay_url"),value:i,onChange:h=>s(h.target.value)})},"new"),p("div",{className:"flex-cell no-flex",children:p("button",{className:"btn btn-neutral",onClick:h=>l(h,i),children:ne("add")})})]}),p("div",{className:"flex gap-2 my-2",children:[p("button",{className:"btn btn-neutral",onClick:()=>Ir.saveToContacts(),children:ne("save_relays_publicly")}),p("button",{className:"btn btn-neutral",onClick:()=>Ir.restoreDefaults(),children:ne("restore_defaults")})]})]}),p("h3",{children:ne("popular_relays")}),p("div",{className:"flex flex-col gap-2",children:[p("div",{className:"flex peer gap-2",children:[p("div",{className:"flex-initial",children:ne("users")}),p("div",{className:"flex-grow",children:"URL"})]}),t.map(h=>p("div",{className:"flex peer gap-2",children:[p("div",{className:"flex-initial",children:h.users}),p("div",{className:"flex-grow truncate max-w-[60vw]",children:h.url}),p("div",{className:"flex-initial",children:p("button",{className:"btn btn-sm btn-neutral",onClick:v=>l(v,h.url),children:ne("add")})})]},h.url))]})]})},F0e=()=>{const[e,r]=ve("USD"),[t,n]=ve(1e3);Ge(()=>{be.get("displayCurrency").on(s=>{r(s)})},[]),Ge(()=>{be.get("defaultZapAmount").on(s=>{n(s)})},[]);const i=s=>{const a=s.target.value;be.get("displayCurrency").put(a)};return p(Be,{children:p("div",{class:"centered-container",children:[p("h3",{children:ne("payments")}),p("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",p("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),p("p",{children:[p("label",{for:"displayCurrency",children:ne("display_currency")}),p("select",{className:"select",id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[p("option",{value:"USD",children:"USD"}),p("option",{value:"EUR",children:"EUR"}),p("option",{value:"JPY",children:"JPY"}),p("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),p("p",{children:[p("label",{for:"defaultZapAmount",children:[ne("default_zap_amount")," (sats):"]}),p("input",{className:"input",type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:t,onChange:s=>{be.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class j0e extends yn{constructor(){super();Z(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let t=!1;const n=this.state.blockedUsers.map(s=>{const o=te.toNostrBech32Address(s,"npub");if(o)return t=!0,p("div",{children:p(wt,{href:`/${o}`,children:p(Ft,{pub:s})})},s)}),i=Array.from(Ue.usersByFollowDistance.entries()).slice(1);return p(Be,{children:p("div",{class:"centered-container",children:[p("h2",{children:ne("social_network")}),p("h3",{children:"Stored on your device"}),p("p",{children:["Total size: ",i.reduce((s,o)=>s+o[1].size,0)," users"]}),p("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>p("div",{children:[s[0]||ne("unknown"),": ",s[1].size," users"]})),p("p",{children:"Filter incoming events by follow distance:"}),p("select",{className:"select",value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const o=s.target;be.get("globalFilter").get("maxFollowDistance").put(parseInt(o.value))},children:[p("option",{value:"0",children:"Off"}),p("option",{value:"1",children:"1"}),p("option",{value:"2",children:"2"}),p("option",{value:"3",children:"3"}),p("option",{value:"4",children:"4"}),p("option",{value:"5",children:"5"}),p("option",{value:"6",children:"6"})]}),p("p",{children:"Minimum number of followers at maximum follow distance:"}),p("input",{className:"input",type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||nt.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const o=s.target;be.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(o.value))}}),p("h3",{children:ne("blocked_users")}),!t&&ne("none"),p("p",{children:p("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?ne("hide"):ne("show")," ",n.length]})}),this.state.showBlockedUsers&&n]})})}componentDidMount(){Ue.getBlockedUsers(t=>{this.setState({blockedUsers:Array.from(t)})}),be.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class z0e extends yn{constructor(){super();Z(this,"content","");Z(this,"pages",{account:C0e,network:L0e,appearance:P0e,language:M0e,content:R0e,payments:F0e,backup:N0e,social_network:j0e,iris_account:B0e,dev:D0e});this.content="home"}render(){const t=this.pages[this.props.id]||this.pages.account;return p("div",{className:"prose",children:p(t,{})})}}const c0={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(c0.iris_account="iris.to");class H0e extends yn{menuLinkClicked(r,t){t.preventDefault(),be.get("toggleSettingsMenu").put(!1),be.get("scrollUp").put(!0),qt(`/settings/${r}`)}render(){const r=this.props.activePage||"account";return p("div",{className:`flex-col w-full md:w-48 flex-shrink-0 ${this.props.activePage?"hidden md:flex":"flex"}`,children:Object.keys(c0).map(t=>{if(c0[t])return p("a",{href:"#",className:`btn inline-flex w-auto flex items-center p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900 ${r===t&&window.innerWidth>640?"active":""}`,onClick:n=>this.menuLinkClicked(t,n),children:[p("span",{class:"text",children:ne(c0[t])}),p(je,{when:t==="language",children:p(p9,{width:16})})]},t)})})}}const U0e=e=>p(Be,{children:[p(Ba,{}),p("div",{className:"flex flex-row px-2 md:px-0",children:[p(H0e,{activePage:e.page}),p("div",{className:e.page?"":"hidden md:flex",children:p(z0e,{id:e.page})})]})]});class K0e extends yn{render(){return p(Be,{children:[p(Ba,{}),p("div",{className:"main-view",id:"settings",children:p("div",{className:"centered-container mobile-padding15",children:[p("h2",{children:ne("subscribe")}),p("h3",{children:"Iris Supporter"}),p("p",{children:"Support open source development and get extra features!"}),p("p",{children:p("ul",{children:[p("li",{children:"Iris Supporter Badge"}),p("li",{children:"Purple checkmark on Iris"}),p("li",{children:"High-quality automatic translations (via deepl.com)"}),p("li",{children:"Iris Supporters' private group chat"}),p("li",{children:"More features to come!"})]})}),p("p",{children:[p("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),p("label",{htmlFor:"subscription_annually",children:[p("b",{children:"8 € / month"})," charged annually (96 € / year)"]})]}),p("p",{children:[p("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),p("label",{htmlFor:"subscription_monthly",children:[p("b",{children:"10 € / month"})," charged monthly (120 € / year)"]})]}),p("p",{children:p("button",{className:"btn btn-primary",children:"Subscribe"})}),p("h3",{children:"Iris Titan"}),p("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",p("ul",{children:[p("li",{children:"Iris Titan Badge"}),p("li",{children:"Iris Titans private group chat"}),p("li",{children:"Priority support"})]})]}),p("p",{children:[p("b",{children:"1000 €"})," one-time payment."]}),p("p",{children:p("button",{className:"btn btn-primary",children:"Subscribe"})}),p("br",{}),p("br",{})]})})]})}}function W0e(){return Ge(()=>{let e=te.getPubKey();return e&&mt.init(e),()=>{}},[]),null}const V0e=({view:e,me:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return p("div",{className:"flex flex-wrap gap-4",children:[p("span",{className:"text-neutral-500",children:"View:"}),p(je,{when:!r,children:p(wt,{href:t({view:"path"}),className:e=="path"?n:i,children:ne("Path")})}),p(wt,{href:t({view:"graph"}),className:e=="graph"?n:i,children:ne("Graph")}),p(wt,{href:t({view:"list"}),className:e=="list"?n:i,children:ne("List")})]})};let HH=!0;const UH=function(){HH=!1,window.removeEventListener("popstate",UH)};window.addEventListener("popstate",UH);const KH=e=>{const[r,t]=ve(null);let n=0;Ge(()=>(window.addEventListener("scroll",i),s(),()=>{r&&r.disconnect(),window.removeEventListener("scroll",i)}),[]);let i=wd.debounce(()=>{const a=window.scrollY||document.documentElement.scrollTop,u={...window.history.state,scrollPosition:a};window.history.replaceState(u,"")},100);function s(a=!0){var d,h;const l=window.history.state,u=(d=window.history.state)==null?void 0:d.previousState;if(!HH&&l!==u)a&&o(),n||(n=(h=window.history.state)==null?void 0:h.scrollPosition),n&&window.scrollTo(0,n);else{const g={...window.history.state||{},previousState:l};window.history.replaceState(g,"")}}let o=()=>{t(new ResizeObserver(a=>{a.forEach(()=>{s(!1)})})),r==null||r.observe(document.body),setTimeout(()=>{r&&r.disconnect()},1e3)};return p(Be,{children:p("div",{children:p(EH,{children:e.children})})})},q0e=({entitytype:e,dir:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return p(je,{when:r=="out",children:p("div",{className:"flex gap-4",children:[p("span",{className:"text-neutral-500",children:"Subject:"}),p(wt,{href:t({entitytype:"key"}),className:e=="key"?n:i,children:ne("Profile")}),p(wt,{href:t({entitytype:"item"}),className:e=="item"?n:i,children:ne("Post")})]})})},WH=({dir:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return p("div",{className:"flex gap-4",children:[p("span",{className:"text-neutral-500",children:[ne("Direction"),":"]}),p(wt,{href:r({dir:"out"}),className:e=="out"?t:n,children:ne("Outgoing")}),p(wt,{href:r({dir:"in"}),className:e=="in"?t:n,children:ne("Incoming")})]})},G0e=({trusttype:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return p("div",{className:"flex gap-4",children:[p("span",{className:"text-neutral-500",children:"Value:"}),p(wt,{href:r({trusttype:"both"}),className:e=="both"?t:n,children:ne("Both")}),p(wt,{href:r({trusttype:"trust"}),className:e=="trust"?t:n,children:ne("Trust")}),p(wt,{href:r({trusttype:"distrust"}),className:e=="distrust"?t:n,children:ne("Distrust")})]})};function Y0e(e,r){return!r||e.length==0?[...e]:e.filter(n=>{var s,o;let i=ir.getDefaultProfile(n.id);return!!((s=i==null?void 0:i.name)!=null&&s.toLowerCase().includes(r.toLowerCase())||(o=i==null?void 0:i.display_name)!=null&&o.toLowerCase().includes(r.toLowerCase()))})}function Z0e(e,r){return e.degree<r.degree?-1:e.degree>r.degree?1:0}const VH=(e,r,t=!0)=>!e||!r?null:p("div",{className:"text-sm flex flex-2 gap-2",children:[o3(e,r,t),a3(e,r,t)]}),X0e=({props:e})=>{const[r,t]=ve([]),[n,i]=ve([]),[s]=ve([]);Ge(()=>{let u=Ke(e.hexKey);if(!u)return;let d=AY(e.entitytype,1),h=clt(e.trusttype,void 0);return o(u,e.dir,d,h),()=>{s.forEach(v=>v==null?void 0:v())}},[e.npub,e.dir,e.entitytype,e.trusttype]),Ge(()=>{let u=Y0e(r,e.filter);u.length==0&&n.length==0||i(u)},[e.filter,r]);async function o(u,d,h,v){let g=[];d=="out"&&(g=mt.g.outTrustById(u,h,v)),e.dir=="in"&&(g=mt.g.trustedBy(u,Is.Key,v));let b=g.map(m=>Pr(m.id));await ir.getProfiles(b),g=g.sort(Z0e),t(g)}const a=()=>{let u=Ke(e.hexKey);return n.length==0?p("div",{className:"text-center",children:ne("No results")}):p(Be,{children:n.map(d=>l(d,u))})},l=(u,d)=>{const h=Pr(u.id),v=u.degree,g=u.score,b=te.toNostrBech32Address(h,"npub");let m="",x="";if(e.dir=="in"){const E=u.out[d];E&&(m=`text-${Xp(E.val)}-500 text-2xl`,x="←")}else{const E=u.in[d];E&&(m=`text-${Xp(E.val)}-500 text-2xl`,x="→")}return p("div",{className:"flex w-full py-2",children:[p("div",{className:"flex-0 self-center px-4",children:p("i",{className:m,children:x})}),p(wt,{href:e.setSearch({npub:b}),className:"flex flex-1 gap-2",children:[p(Wn,{str:b,width:49}),p("div",{children:[p(Ft,{pub:b,hexKey:h}),p("br",{}),p("span",{className:"text-sm",children:["Degree ",v]})]})]}),VH(g,b)]},h)};return e.npub?p(Be,{children:[p("div",{className:"flex flex-wrap gap-4",children:[p(je,{when:e.entitytype=="key",children:p(WH,{dir:e.dir,setSearch:e.setSearch})}),p(G0e,{trusttype:e.trusttype,setSearch:e.setSearch}),p(q0e,{entitytype:e.entitytype,dir:e.dir,setSearch:e.setSearch})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-col w-full gap-4",children:p(KH,{children:a()})})]}):null};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function L1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var m6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ab={},J0e={get exports(){return ab},set exports(e){ab=e}},zS={},Q0e={get exports(){return zS},set exports(e){zS=e}},HS={},ebe={get exports(){return HS},set exports(e){HS=e}},lm=function(e){return e&&e.Math==Math&&e},Br=lm(typeof globalThis=="object"&&globalThis)||lm(typeof window=="object"&&window)||lm(typeof self=="object"&&self)||lm(typeof m6=="object"&&m6)||function(){return this}()||Function("return this")(),Gt=function(e){try{return!!e()}catch{return!0}},tbe=Gt,Rv=!tbe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),rbe=Rv,qH=Function.prototype,b6=qH.apply,w6=qH.call,Kd=typeof Reflect=="object"&&Reflect.apply||(rbe?w6.bind(b6):function(){return w6.apply(b6,arguments)}),GH=Rv,YH=Function.prototype,US=YH.call,nbe=GH&&YH.bind.bind(US,US),rr=GH?nbe:function(e){return function(){return US.apply(e,arguments)}},ZH=rr,ibe=ZH({}.toString),sbe=ZH("".slice),Ma=function(e){return sbe(ibe(e),8,-1)},obe=Ma,abe=rr,g3=function(e){if(obe(e)==="Function")return abe(e)},KS=typeof document=="object"&&document.all,lbe=typeof KS>"u"&&KS!==void 0,XH={all:KS,IS_HTMLDDA:lbe},JH=XH,ube=JH.all,Mr=JH.IS_HTMLDDA?function(e){return typeof e=="function"||e===ube}:function(e){return typeof e=="function"},Pc={},cbe=Gt,mn=!cbe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),hbe=Rv,um=Function.prototype.call,An=hbe?um.bind(um):function(){return um.apply(um,arguments)},Dv={},QH={}.propertyIsEnumerable,eU=Object.getOwnPropertyDescriptor,dbe=eU&&!QH.call({1:2},1);Dv.f=dbe?function(r){var t=eU(this,r);return!!t&&t.enumerable}:QH;var Nc=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},fbe=rr,pbe=Gt,vbe=Ma,tx=Object,gbe=fbe("".split),F1=pbe(function(){return!tx("z").propertyIsEnumerable(0)})?function(e){return vbe(e)=="String"?gbe(e,""):tx(e)}:tx,Bv=function(e){return e==null},ybe=Bv,mbe=TypeError,Mv=function(e){if(ybe(e))throw mbe("Can't call method on "+e);return e},bbe=F1,wbe=Mv,co=function(e){return bbe(wbe(e))},_6=Mr,tU=XH,_be=tU.all,Cn=tU.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:_6(e)||e===_be}:function(e){return typeof e=="object"?e!==null:_6(e)},pr={},rx=pr,nx=Br,$be=Mr,$6=function(e){return $be(e)?e:void 0},vi=function(e,r){return arguments.length<2?$6(rx[e])||$6(nx[e]):rx[e]&&rx[e][r]||nx[e]&&nx[e][r]},xbe=rr,Or=xbe({}.isPrototypeOf),su=typeof navigator<"u"&&String(navigator.userAgent)||"",rU=Br,ix=su,x6=rU.process,E6=rU.Deno,S6=x6&&x6.versions||E6&&E6.version,k6=S6&&S6.v8,Hs,lb;k6&&(Hs=k6.split("."),lb=Hs[0]>0&&Hs[0]<4?1:+(Hs[0]+Hs[1]));!lb&&ix&&(Hs=ix.match(/Edge\/(\d+)/),(!Hs||Hs[1]>=74)&&(Hs=ix.match(/Chrome\/(\d+)/),Hs&&(lb=+Hs[1])));var Wd=lb,T6=Wd,Ebe=Gt,Vd=!!Object.getOwnPropertySymbols&&!Ebe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&T6&&T6<41}),Sbe=Vd,nU=Sbe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",kbe=vi,Tbe=Mr,Ibe=Or,Obe=nU,Abe=Object,Lv=Obe?function(e){return typeof e=="symbol"}:function(e){var r=kbe("Symbol");return Tbe(r)&&Ibe(r.prototype,Abe(e))},Cbe=String,qd=function(e){try{return Cbe(e)}catch{return"Object"}},Pbe=Mr,Nbe=qd,Rbe=TypeError,Ri=function(e){if(Pbe(e))return e;throw Rbe(Nbe(e)+" is not a function")},Dbe=Ri,Bbe=Bv,y3=function(e,r){var t=e[r];return Bbe(t)?void 0:Dbe(t)},sx=An,ox=Mr,ax=Cn,Mbe=TypeError,Lbe=function(e,r){var t,n;if(r==="string"&&ox(t=e.toString)&&!ax(n=sx(t,e))||ox(t=e.valueOf)&&!ax(n=sx(t,e))||r!=="string"&&ox(t=e.toString)&&!ax(n=sx(t,e)))return n;throw Mbe("Can't convert object to primitive value")},Yl={},Fbe={get exports(){return Yl},set exports(e){Yl=e}},jbe=!0,I6=Br,zbe=Object.defineProperty,Hbe=function(e,r){try{zbe(I6,e,{value:r,configurable:!0,writable:!0})}catch{I6[e]=r}return r},Ube=Br,Kbe=Hbe,O6="__core-js_shared__",Wbe=Ube[O6]||Kbe(O6,{}),m3=Wbe,A6=m3;(Fbe.exports=function(e,r){return A6[e]||(A6[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Vbe=Mv,qbe=Object,Di=function(e){return qbe(Vbe(e))},Gbe=rr,Ybe=Di,Zbe=Gbe({}.hasOwnProperty),on=Object.hasOwn||function(r,t){return Zbe(Ybe(r),t)},Xbe=rr,Jbe=0,Qbe=Math.random(),e1e=Xbe(1 .toString),j1=function(e){return"Symbol("+(e===void 0?"":e)+")_"+e1e(++Jbe+Qbe,36)},t1e=Br,r1e=Yl,C6=on,n1e=j1,i1e=Vd,s1e=nU,Ch=t1e.Symbol,lx=r1e("wks"),o1e=s1e?Ch.for||Ch:Ch&&Ch.withoutSetter||n1e,Ar=function(e){return C6(lx,e)||(lx[e]=i1e&&C6(Ch,e)?Ch[e]:o1e("Symbol."+e)),lx[e]},a1e=An,P6=Cn,N6=Lv,l1e=y3,u1e=Lbe,c1e=Ar,h1e=TypeError,d1e=c1e("toPrimitive"),f1e=function(e,r){if(!P6(e)||N6(e))return e;var t=l1e(e,d1e),n;if(t){if(r===void 0&&(r="default"),n=a1e(t,e,r),!P6(n)||N6(n))return n;throw h1e("Can't convert object to primitive value")}return r===void 0&&(r="number"),u1e(e,r)},p1e=f1e,v1e=Lv,z1=function(e){var r=p1e(e,"string");return v1e(r)?r:r+""},g1e=Br,R6=Cn,WS=g1e.document,y1e=R6(WS)&&R6(WS.createElement),b3=function(e){return y1e?WS.createElement(e):{}},m1e=mn,b1e=Gt,w1e=b3,iU=!m1e&&!b1e(function(){return Object.defineProperty(w1e("div"),"a",{get:function(){return 7}}).a!=7}),_1e=mn,$1e=An,x1e=Dv,E1e=Nc,S1e=co,k1e=z1,T1e=on,I1e=iU,D6=Object.getOwnPropertyDescriptor;Pc.f=_1e?D6:function(r,t){if(r=S1e(r),t=k1e(t),I1e)try{return D6(r,t)}catch{}if(T1e(r,t))return E1e(!$1e(x1e.f,r,t),r[t])};var O1e=Gt,A1e=Mr,C1e=/#|\.prototype\./,Fv=function(e,r){var t=N1e[P1e(e)];return t==D1e?!0:t==R1e?!1:A1e(r)?O1e(r):!!r},P1e=Fv.normalize=function(e){return String(e).replace(C1e,".").toLowerCase()},N1e=Fv.data={},R1e=Fv.NATIVE="N",D1e=Fv.POLYFILL="P",sU=Fv,B6=g3,B1e=Ri,M1e=Rv,L1e=B6(B6.bind),ou=function(e,r){return B1e(e),r===void 0?e:M1e?L1e(e,r):function(){return e.apply(r,arguments)}},ts={},F1e=mn,j1e=Gt,oU=F1e&&j1e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),z1e=Cn,H1e=String,U1e=TypeError,rs=function(e){if(z1e(e))return e;throw U1e(H1e(e)+" is not an object")},K1e=mn,W1e=iU,V1e=oU,cm=rs,M6=z1,q1e=TypeError,ux=Object.defineProperty,G1e=Object.getOwnPropertyDescriptor,cx="enumerable",hx="configurable",dx="writable";ts.f=K1e?V1e?function(r,t,n){if(cm(r),t=M6(t),cm(n),typeof r=="function"&&t==="prototype"&&"value"in n&&dx in n&&!n[dx]){var i=G1e(r,t);i&&i[dx]&&(r[t]=n.value,n={configurable:hx in n?n[hx]:i[hx],enumerable:cx in n?n[cx]:i[cx],writable:!1})}return ux(r,t,n)}:ux:function(r,t,n){if(cm(r),t=M6(t),cm(n),W1e)try{return ux(r,t,n)}catch{}if("get"in n||"set"in n)throw q1e("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var Y1e=mn,Z1e=ts,X1e=Nc,La=Y1e?function(e,r,t){return Z1e.f(e,r,X1e(1,t))}:function(e,r,t){return e[r]=t,e},hm=Br,J1e=Kd,Q1e=g3,ewe=Mr,twe=Pc.f,rwe=sU,fh=pr,nwe=ou,ph=La,L6=on,iwe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return J1e(e,this,arguments)};return r.prototype=e.prototype,r},lt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?hm:i?hm[t]:(hm[t]||{}).prototype,a=n?fh:fh[t]||ph(fh,t,{})[t],l=a.prototype,u,d,h,v,g,b,m,x,E;for(v in r)u=rwe(n?v:t+(i?".":"#")+v,e.forced),d=!u&&o&&L6(o,v),b=a[v],d&&(e.dontCallGetSet?(E=twe(o,v),m=E&&E.value):m=o[v]),g=d&&m?m:r[v],!(d&&typeof b==typeof g)&&(e.bind&&d?x=nwe(g,hm):e.wrap&&d?x=iwe(g):s&&ewe(g)?x=Q1e(g):x=g,(e.sham||g&&g.sham||b&&b.sham)&&ph(x,"sham",!0),ph(a,v,x),s&&(h=t+"Prototype",L6(fh,h)||ph(fh,h,{}),ph(fh[h],v,g),e.real&&l&&(u||!l[v])&&ph(l,v,g)))},swe=lt,owe=mn,F6=ts.f;swe({target:"Object",stat:!0,forced:Object.defineProperty!==F6,sham:!owe},{defineProperty:F6});var awe=pr,aU=awe.Object,lwe=ebe.exports=function(r,t,n){return aU.defineProperty(r,t,n)};aU.defineProperty.sham&&(lwe.sham=!0);var uwe=HS,lU=uwe,cwe=lU,hwe=cwe,dwe=hwe,fwe=dwe;(function(e){e.exports=fwe})(Q0e);(function(e){e.exports=zS})(J0e);var H1=_t(ab),ev={},pwe={get exports(){return ev},set exports(e){ev=e}},VS={},vwe={get exports(){return VS},set exports(e){VS=e}},gwe=Ma,au=Array.isArray||function(r){return gwe(r)=="Array"},ywe=Math.ceil,mwe=Math.floor,bwe=Math.trunc||function(r){var t=+r;return(t>0?mwe:ywe)(t)},wwe=bwe,U1=function(e){var r=+e;return r!==r||r===0?0:wwe(r)},_we=U1,$we=Math.min,xwe=function(e){return e>0?$we(_we(e),9007199254740991):0},Ewe=xwe,ns=function(e){return Ewe(e.length)},Swe=TypeError,kwe=9007199254740991,w3=function(e){if(e>kwe)throw Swe("Maximum allowed index exceeded");return e},Twe=z1,Iwe=ts,Owe=Nc,Gd=function(e,r,t){var n=Twe(r);n in e?Iwe.f(e,n,Owe(0,t)):e[n]=t},Awe=Ar,Cwe=Awe("toStringTag"),uU={};uU[Cwe]="z";var _3=String(uU)==="[object z]",Pwe=_3,Nwe=Mr,h0=Ma,Rwe=Ar,Dwe=Rwe("toStringTag"),Bwe=Object,Mwe=h0(function(){return arguments}())=="Arguments",Lwe=function(e,r){try{return e[r]}catch{}},Fa=Pwe?h0:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=Lwe(r=Bwe(e),Dwe))=="string"?t:Mwe?h0(r):(n=h0(r))=="Object"&&Nwe(r.callee)?"Arguments":n},Fwe=rr,jwe=Mr,qS=m3,zwe=Fwe(Function.toString);jwe(qS.inspectSource)||(qS.inspectSource=function(e){return zwe(e)});var cU=qS.inspectSource,Hwe=rr,Uwe=Gt,hU=Mr,Kwe=Fa,Wwe=vi,Vwe=cU,dU=function(){},qwe=[],fU=Wwe("Reflect","construct"),$3=/^\s*(?:class|function)\b/,Gwe=Hwe($3.exec),Ywe=!$3.exec(dU),Hf=function(r){if(!hU(r))return!1;try{return fU(dU,qwe,r),!0}catch{return!1}},pU=function(r){if(!hU(r))return!1;switch(Kwe(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ywe||!!Gwe($3,Vwe(r))}catch{return!0}};pU.sham=!0;var K1=!fU||Uwe(function(){var e;return Hf(Hf.call)||!Hf(Object)||!Hf(function(){e=!0})||e})?pU:Hf,j6=au,Zwe=K1,Xwe=Cn,Jwe=Ar,Qwe=Jwe("species"),z6=Array,e_e=function(e){var r;return j6(e)&&(r=e.constructor,Zwe(r)&&(r===z6||j6(r.prototype))?r=void 0:Xwe(r)&&(r=r[Qwe],r===null&&(r=void 0))),r===void 0?z6:r},t_e=e_e,W1=function(e,r){return new(t_e(e))(r===0?0:r)},r_e=Gt,n_e=Ar,i_e=Wd,s_e=n_e("species"),jv=function(e){return i_e>=51||!r_e(function(){var r=[],t=r.constructor={};return t[s_e]=function(){return{foo:1}},r[e](Boolean).foo!==1})},o_e=lt,a_e=Gt,l_e=au,u_e=Cn,c_e=Di,h_e=ns,H6=w3,U6=Gd,d_e=W1,f_e=jv,p_e=Ar,v_e=Wd,vU=p_e("isConcatSpreadable"),g_e=v_e>=51||!a_e(function(){var e=[];return e[vU]=!1,e.concat()[0]!==e}),y_e=function(e){if(!u_e(e))return!1;var r=e[vU];return r!==void 0?!!r:l_e(e)},m_e=!g_e||!f_e("concat");o_e({target:"Array",proto:!0,arity:1,forced:m_e},{concat:function(r){var t=c_e(this),n=d_e(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],y_e(u))for(l=h_e(u),H6(i+l),o=0;o<l;o++,i++)o in u&&U6(n,i,u[o]);else H6(i+1),U6(n,i++,u);return n.length=i,n}});var b_e=Fa,w_e=String,Ho=function(e){if(b_e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return w_e(e)},V1={},__e=U1,$_e=Math.max,x_e=Math.min,zv=function(e,r){var t=__e(e);return t<0?$_e(t+r,0):x_e(t,r)},E_e=co,S_e=zv,k_e=ns,K6=function(e){return function(r,t,n){var i=E_e(r),s=k_e(i),o=S_e(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},x3={includes:K6(!0),indexOf:K6(!1)},Hv={},T_e=rr,fx=on,I_e=co,O_e=x3.indexOf,A_e=Hv,W6=T_e([].push),gU=function(e,r){var t=I_e(e),n=0,i=[],s;for(s in t)!fx(A_e,s)&&fx(t,s)&&W6(i,s);for(;r.length>n;)fx(t,s=r[n++])&&(~O_e(i,s)||W6(i,s));return i},E3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],C_e=gU,P_e=E3,Uv=Object.keys||function(r){return C_e(r,P_e)},N_e=mn,R_e=oU,D_e=ts,B_e=rs,M_e=co,L_e=Uv;V1.f=N_e&&!R_e?Object.defineProperties:function(r,t){B_e(r);for(var n=M_e(t),i=L_e(t),s=i.length,o=0,a;s>o;)D_e.f(r,a=i[o++],n[a]);return r};var F_e=vi,yU=F_e("document","documentElement"),j_e=Yl,z_e=j1,V6=j_e("keys"),q1=function(e){return V6[e]||(V6[e]=z_e(e))},H_e=rs,U_e=V1,q6=E3,K_e=Hv,W_e=yU,V_e=b3,q_e=q1,G6=">",Y6="<",GS="prototype",YS="script",mU=q_e("IE_PROTO"),px=function(){},bU=function(e){return Y6+YS+G6+e+Y6+"/"+YS+G6},Z6=function(e){e.write(bU("")),e.close();var r=e.parentWindow.Object;return e=null,r},G_e=function(){var e=V_e("iframe"),r="java"+YS+":",t;return e.style.display="none",W_e.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(bU("document.F=Object")),t.close(),t.F},dm,d0=function(){try{dm=new ActiveXObject("htmlfile")}catch{}d0=typeof document<"u"?document.domain&&dm?Z6(dm):G_e():Z6(dm);for(var e=q6.length;e--;)delete d0[GS][q6[e]];return d0()};K_e[mU]=!0;var Rc=Object.create||function(r,t){var n;return r!==null?(px[GS]=H_e(r),n=new px,px[GS]=null,n[mU]=r):n=d0(),t===void 0?n:U_e.f(n,t)},Kv={},Y_e=gU,Z_e=E3,X_e=Z_e.concat("length","prototype");Kv.f=Object.getOwnPropertyNames||function(r){return Y_e(r,X_e)};var S3={},X6=zv,J_e=ns,Q_e=Gd,e$e=Array,t$e=Math.max,wU=function(e,r,t){for(var n=J_e(e),i=X6(r,n),s=X6(t===void 0?n:t,n),o=e$e(t$e(s-i,0)),a=0;i<s;i++,a++)Q_e(o,a,e[i]);return o.length=a,o},r$e=Ma,n$e=co,_U=Kv.f,i$e=wU,$U=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s$e=function(e){try{return _U(e)}catch{return i$e($U)}};S3.f=function(r){return $U&&r$e(r)=="Window"?s$e(r):_U(n$e(r))};var Wv={};Wv.f=Object.getOwnPropertySymbols;var o$e=La,Yd=function(e,r,t,n){return n&&n.enumerable?e[r]=t:o$e(e,r,t),e},a$e=ts,k3=function(e,r,t){return a$e.f(e,r,t)},Vv={},l$e=Ar;Vv.f=l$e;var J6=pr,u$e=on,c$e=Vv,h$e=ts.f,Lr=function(e){var r=J6.Symbol||(J6.Symbol={});u$e(r,e)||h$e(r,e,{value:c$e.f(e)})},d$e=An,f$e=vi,p$e=Ar,v$e=Yd,xU=function(){var e=f$e("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=p$e("toPrimitive");r&&!r[n]&&v$e(r,n,function(i){return d$e(t,this)},{arity:1})},g$e=_3,y$e=Fa,m$e=g$e?{}.toString:function(){return"[object "+y$e(this)+"]"},b$e=_3,w$e=ts.f,_$e=La,$$e=on,x$e=m$e,E$e=Ar,Q6=E$e("toStringTag"),Dc=function(e,r,t,n){if(e){var i=t?e:e.prototype;$$e(i,Q6)||w$e(i,Q6,{configurable:!0,value:r}),n&&!b$e&&_$e(i,"toString",x$e)}},S$e=Br,k$e=Mr,e8=S$e.WeakMap,T$e=k$e(e8)&&/native code/.test(String(e8)),I$e=T$e,EU=Br,O$e=Cn,A$e=La,vx=on,gx=m3,C$e=q1,P$e=Hv,t8="Object already initialized",ZS=EU.TypeError,N$e=EU.WeakMap,ub,tv,cb,R$e=function(e){return cb(e)?tv(e):ub(e,{})},D$e=function(e){return function(r){var t;if(!O$e(r)||(t=tv(r)).type!==e)throw ZS("Incompatible receiver, "+e+" required");return t}};if(I$e||gx.state){var $o=gx.state||(gx.state=new N$e);$o.get=$o.get,$o.has=$o.has,$o.set=$o.set,ub=function(e,r){if($o.has(e))throw ZS(t8);return r.facade=e,$o.set(e,r),r},tv=function(e){return $o.get(e)||{}},cb=function(e){return $o.has(e)}}else{var vh=C$e("state");P$e[vh]=!0,ub=function(e,r){if(vx(e,vh))throw ZS(t8);return r.facade=e,A$e(e,vh,r),r},tv=function(e){return vx(e,vh)?e[vh]:{}},cb=function(e){return vx(e,vh)}}var Zd={set:ub,get:tv,has:cb,enforce:R$e,getterFor:D$e},B$e=ou,M$e=rr,L$e=F1,F$e=Di,j$e=ns,z$e=W1,r8=M$e([].push),yl=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,d,h){for(var v=F$e(l),g=L$e(v),b=B$e(u,d),m=j$e(g),x=0,E=h||z$e,k=r?E(l,m):t||o?E(l,0):void 0,$,S;m>x;x++)if((a||x in g)&&($=g[x],S=b($,x,v),e))if(r)k[x]=S;else if(S)switch(e){case 3:return!0;case 5:return $;case 6:return x;case 2:r8(k,$)}else switch(e){case 4:return!1;case 7:r8(k,$)}return s?-1:n||i?i:k}},Xd={forEach:yl(0),map:yl(1),filter:yl(2),some:yl(3),every:yl(4),find:yl(5),findIndex:yl(6),filterReject:yl(7)},G1=lt,T3=Br,I3=An,H$e=rr,$d=mn,xd=Vd,U$e=Gt,Sn=on,K$e=Or,XS=rs,Y1=co,O3=z1,W$e=Ho,JS=Nc,rv=Rc,SU=Uv,V$e=Kv,kU=S3,q$e=Wv,TU=Pc,IU=ts,G$e=V1,OU=Dv,n8=Yd,Y$e=k3,A3=Yl,Z$e=q1,AU=Hv,i8=j1,X$e=Ar,J$e=Vv,Q$e=Lr,exe=xU,txe=Dc,CU=Zd,Z1=Xd.forEach,ki=Z$e("hidden"),X1="Symbol",nv="prototype",rxe=CU.set,s8=CU.getterFor(X1),Ys=Object[nv],nc=T3.Symbol,ip=nc&&nc[nv],nxe=T3.TypeError,yx=T3.QObject,PU=TU.f,Mu=IU.f,NU=kU.f,ixe=OU.f,RU=H$e([].push),Oa=A3("symbols"),qv=A3("op-symbols"),sxe=A3("wks"),QS=!yx||!yx[nv]||!yx[nv].findChild,ek=$d&&U$e(function(){return rv(Mu({},"a",{get:function(){return Mu(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=PU(Ys,r);n&&delete Ys[r],Mu(e,r,t),n&&e!==Ys&&Mu(Ys,r,n)}:Mu,mx=function(e,r){var t=Oa[e]=rv(ip);return rxe(t,{type:X1,tag:e,description:r}),$d||(t.description=r),t},J1=function(r,t,n){r===Ys&&J1(qv,t,n),XS(r);var i=O3(t);return XS(n),Sn(Oa,i)?(n.enumerable?(Sn(r,ki)&&r[ki][i]&&(r[ki][i]=!1),n=rv(n,{enumerable:JS(0,!1)})):(Sn(r,ki)||Mu(r,ki,JS(1,{})),r[ki][i]=!0),ek(r,i,n)):Mu(r,i,n)},C3=function(r,t){XS(r);var n=Y1(t),i=SU(n).concat(LU(n));return Z1(i,function(s){(!$d||I3(DU,n,s))&&J1(r,s,n[s])}),r},oxe=function(r,t){return t===void 0?rv(r):C3(rv(r),t)},DU=function(r){var t=O3(r),n=I3(ixe,this,t);return this===Ys&&Sn(Oa,t)&&!Sn(qv,t)?!1:n||!Sn(this,t)||!Sn(Oa,t)||Sn(this,ki)&&this[ki][t]?n:!0},BU=function(r,t){var n=Y1(r),i=O3(t);if(!(n===Ys&&Sn(Oa,i)&&!Sn(qv,i))){var s=PU(n,i);return s&&Sn(Oa,i)&&!(Sn(n,ki)&&n[ki][i])&&(s.enumerable=!0),s}},MU=function(r){var t=NU(Y1(r)),n=[];return Z1(t,function(i){!Sn(Oa,i)&&!Sn(AU,i)&&RU(n,i)}),n},LU=function(e){var r=e===Ys,t=NU(r?qv:Y1(e)),n=[];return Z1(t,function(i){Sn(Oa,i)&&(!r||Sn(Ys,i))&&RU(n,Oa[i])}),n};xd||(nc=function(){if(K$e(ip,this))throw nxe("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:W$e(arguments[0]),t=i8(r),n=function(i){this===Ys&&I3(n,qv,i),Sn(this,ki)&&Sn(this[ki],t)&&(this[ki][t]=!1),ek(this,t,JS(1,i))};return $d&&QS&&ek(Ys,t,{configurable:!0,set:n}),mx(t,r)},ip=nc[nv],n8(ip,"toString",function(){return s8(this).tag}),n8(nc,"withoutSetter",function(e){return mx(i8(e),e)}),OU.f=DU,IU.f=J1,G$e.f=C3,TU.f=BU,V$e.f=kU.f=MU,q$e.f=LU,J$e.f=function(e){return mx(X$e(e),e)},$d&&Y$e(ip,"description",{configurable:!0,get:function(){return s8(this).description}}));G1({global:!0,constructor:!0,wrap:!0,forced:!xd,sham:!xd},{Symbol:nc});Z1(SU(sxe),function(e){Q$e(e)});G1({target:X1,stat:!0,forced:!xd},{useSetter:function(){QS=!0},useSimple:function(){QS=!1}});G1({target:"Object",stat:!0,forced:!xd,sham:!$d},{create:oxe,defineProperty:J1,defineProperties:C3,getOwnPropertyDescriptor:BU});G1({target:"Object",stat:!0,forced:!xd},{getOwnPropertyNames:MU});exe();txe(nc,X1);AU[ki]=!0;var axe=Vd,FU=axe&&!!Symbol.for&&!!Symbol.keyFor,lxe=lt,uxe=vi,cxe=on,hxe=Ho,jU=Yl,dxe=FU,bx=jU("string-to-symbol-registry"),fxe=jU("symbol-to-string-registry");lxe({target:"Symbol",stat:!0,forced:!dxe},{for:function(e){var r=hxe(e);if(cxe(bx,r))return bx[r];var t=uxe("Symbol")(r);return bx[r]=t,fxe[t]=r,t}});var pxe=lt,vxe=on,gxe=Lv,yxe=qd,mxe=Yl,bxe=FU,o8=mxe("symbol-to-string-registry");pxe({target:"Symbol",stat:!0,forced:!bxe},{keyFor:function(r){if(!gxe(r))throw TypeError(yxe(r)+" is not a symbol");if(vxe(o8,r))return o8[r]}});var wxe=rr,Gv=wxe([].slice),_xe=rr,a8=au,$xe=Mr,l8=Ma,xxe=Ho,u8=_xe([].push),Exe=function(e){if($xe(e))return e;if(a8(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?u8(t,i):(typeof i=="number"||l8(i)=="Number"||l8(i)=="String")&&u8(t,xxe(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(a8(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},Sxe=lt,zU=vi,HU=Kd,kxe=An,Yv=rr,UU=Gt,c8=Mr,h8=Lv,KU=Gv,Txe=Exe,Ixe=Vd,Oxe=String,Ll=zU("JSON","stringify"),fm=Yv(/./.exec),d8=Yv("".charAt),Axe=Yv("".charCodeAt),Cxe=Yv("".replace),Pxe=Yv(1 .toString),Nxe=/[\uD800-\uDFFF]/g,f8=/^[\uD800-\uDBFF]$/,p8=/^[\uDC00-\uDFFF]$/,v8=!Ixe||UU(function(){var e=zU("Symbol")();return Ll([e])!="[null]"||Ll({a:e})!="{}"||Ll(Object(e))!="{}"}),g8=UU(function(){return Ll("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ll("\uDEAD")!=='"\\udead"'}),Rxe=function(e,r){var t=KU(arguments),n=Txe(r);if(!(!c8(n)&&(e===void 0||h8(e))))return t[1]=function(i,s){if(c8(n)&&(s=kxe(n,this,Oxe(i),s)),!h8(s))return s},HU(Ll,null,t)},Dxe=function(e,r,t){var n=d8(t,r-1),i=d8(t,r+1);return fm(f8,e)&&!fm(p8,i)||fm(p8,e)&&!fm(f8,n)?"\\u"+Pxe(Axe(e,0),16):e};Ll&&Sxe({target:"JSON",stat:!0,arity:3,forced:v8||g8},{stringify:function(r,t,n){var i=KU(arguments),s=HU(v8?Rxe:Ll,null,i);return g8&&typeof s=="string"?Cxe(s,Nxe,Dxe):s}});var Bxe=lt,Mxe=Vd,Lxe=Gt,WU=Wv,Fxe=Di,jxe=!Mxe||Lxe(function(){WU.f(1)});Bxe({target:"Object",stat:!0,forced:jxe},{getOwnPropertySymbols:function(r){var t=WU.f;return t?t(Fxe(r)):[]}});var zxe=Lr;zxe("asyncIterator");var Hxe=Lr;Hxe("hasInstance");var Uxe=Lr;Uxe("isConcatSpreadable");var Kxe=Lr;Kxe("iterator");var Wxe=Lr;Wxe("match");var Vxe=Lr;Vxe("matchAll");var qxe=Lr;qxe("replace");var Gxe=Lr;Gxe("search");var Yxe=Lr;Yxe("species");var Zxe=Lr;Zxe("split");var Xxe=Lr,Jxe=xU;Xxe("toPrimitive");Jxe();var Qxe=vi,e2e=Lr,t2e=Dc;e2e("toStringTag");t2e(Qxe("Symbol"),"Symbol");var r2e=Lr;r2e("unscopables");var n2e=Br,i2e=Dc;i2e(n2e.JSON,"JSON",!0);var s2e=pr,o2e=s2e.Symbol,Jd={},tk=mn,a2e=on,VU=Function.prototype,l2e=tk&&Object.getOwnPropertyDescriptor,P3=a2e(VU,"name"),u2e=P3&&(function(){}).name==="something",c2e=P3&&(!tk||tk&&l2e(VU,"name").configurable),qU={EXISTS:P3,PROPER:u2e,CONFIGURABLE:c2e},h2e=Gt,GU=!h2e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),d2e=on,f2e=Mr,p2e=Di,v2e=q1,g2e=GU,y8=v2e("IE_PROTO"),rk=Object,y2e=rk.prototype,Q1=g2e?rk.getPrototypeOf:function(e){var r=p2e(e);if(d2e(r,y8))return r[y8];var t=r.constructor;return f2e(t)&&r instanceof t?t.prototype:r instanceof rk?y2e:null},m2e=Gt,b2e=Mr,w2e=Cn,_2e=Rc,m8=Q1,$2e=Yd,x2e=Ar,nk=x2e("iterator"),YU=!1,ga,wx,_x;[].keys&&(_x=[].keys(),"next"in _x?(wx=m8(m8(_x)),wx!==Object.prototype&&(ga=wx)):YU=!0);var E2e=!w2e(ga)||m2e(function(){var e={};return ga[nk].call(e)!==e});E2e?ga={}:ga=_2e(ga);b2e(ga[nk])||$2e(ga,nk,function(){return this});var ZU={IteratorPrototype:ga,BUGGY_SAFARI_ITERATORS:YU},S2e=ZU.IteratorPrototype,k2e=Rc,T2e=Nc,I2e=Dc,O2e=Jd,A2e=function(){return this},C2e=function(e,r,t,n){var i=r+" Iterator";return e.prototype=k2e(S2e,{next:T2e(+!n,t)}),I2e(e,i,!1,!0),O2e[i]=A2e,e},P2e=rr,N2e=Ri,R2e=function(e,r,t){try{return P2e(N2e(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},D2e=Mr,B2e=String,M2e=TypeError,L2e=function(e){if(typeof e=="object"||D2e(e))return e;throw M2e("Can't set "+B2e(e)+" as a prototype")},F2e=R2e,j2e=rs,z2e=L2e,XU=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=F2e(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return j2e(i),z2e(s),e?t(i,s):i.__proto__=s,i}}():void 0),H2e=lt,U2e=An,K2e=qU,W2e=C2e,V2e=Q1,q2e=Dc,b8=Yd,G2e=Ar,w8=Jd,Y2e=ZU,Z2e=K2e.PROPER,pm=Y2e.BUGGY_SAFARI_ITERATORS,$x=G2e("iterator"),_8="keys",vm="values",$8="entries",X2e=function(){return this},N3=function(e,r,t,n,i,s,o){W2e(t,r,n);var a=function(E){if(E===i&&v)return v;if(!pm&&E in d)return d[E];switch(E){case _8:return function(){return new t(this,E)};case vm:return function(){return new t(this,E)};case $8:return function(){return new t(this,E)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,d=e.prototype,h=d[$x]||d["@@iterator"]||i&&d[i],v=!pm&&h||a(i),g=r=="Array"&&d.entries||h,b,m,x;if(g&&(b=V2e(g.call(new e)),b!==Object.prototype&&b.next&&(q2e(b,l,!0,!0),w8[l]=X2e)),Z2e&&i==vm&&h&&h.name!==vm&&(u=!0,v=function(){return U2e(h,this)}),i)if(m={values:a(vm),keys:s?v:a(_8),entries:a($8)},o)for(x in m)(pm||u||!(x in d))&&b8(d,x,m[x]);else H2e({target:r,proto:!0,forced:pm||u},m);return o&&d[$x]!==v&&b8(d,$x,v,{name:i}),w8[r]=v,m},R3=function(e,r){return{value:e,done:r}},J2e=co,x8=Jd,JU=Zd;ts.f;var Q2e=N3,gm=R3,QU="Array Iterator",eEe=JU.set,tEe=JU.getterFor(QU);Q2e(Array,"Array",function(e,r){eEe(this,{type:QU,target:J2e(e),index:0,kind:r})},function(){var e=tEe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,gm(void 0,!0)):t=="keys"?gm(n,!1):t=="values"?gm(r[n],!1):gm([n,r[n]],!1)},"values");x8.Arguments=x8.Array;var rEe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},nEe=rEe,iEe=Br,sEe=Fa,oEe=La,E8=Jd,aEe=Ar,S8=aEe("toStringTag");for(var xx in nEe){var k8=iEe[xx],Ex=k8&&k8.prototype;Ex&&sEe(Ex)!==S8&&oEe(Ex,S8,xx),E8[xx]=E8.Array}var lEe=o2e,eK=lEe,uEe=Lr;uEe("dispose");var cEe=eK,hEe=cEe,dEe=Lr;dEe("asyncDispose");var fEe=lt,pEe=vi,vEe=rr,tK=pEe("Symbol"),gEe=tK.keyFor,yEe=vEe(tK.prototype.valueOf);fEe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return gEe(yEe(r))!==void 0}catch{return!1}}});var mEe=lt,bEe=Yl,rK=vi,wEe=rr,_Ee=Lv,$Ee=Ar,hb=rK("Symbol"),T8=hb.isWellKnown,nK=rK("Object","getOwnPropertyNames"),xEe=wEe(hb.prototype.valueOf),I8=bEe("wks");for(var Sx=0,O8=nK(hb),EEe=O8.length;Sx<EEe;Sx++)try{var A8=O8[Sx];_Ee(hb[A8])&&$Ee(A8)}catch{}mEe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(T8&&T8(r))return!0;try{for(var t=xEe(r),n=0,i=nK(I8),s=i.length;n<s;n++)if(I8[i[n]]==t)return!0}catch{}return!1}});var SEe=Lr;SEe("matcher");var kEe=Lr;kEe("metadataKey");var TEe=Lr;TEe("observable");var IEe=Lr;IEe("metadata");var OEe=Lr;OEe("patternMatch");var AEe=Lr;AEe("replaceAll");var CEe=hEe,PEe=CEe;(function(e){e.exports=PEe})(vwe);(function(e){e.exports=VS})(pwe);var Ph=_t(ev),db={},NEe={get exports(){return db},set exports(e){db=e}},ik={},REe={get exports(){return ik},set exports(e){ik=e}},D3=rr,DEe=U1,BEe=Ho,MEe=Mv,LEe=D3("".charAt),C8=D3("".charCodeAt),FEe=D3("".slice),P8=function(e){return function(r,t){var n=BEe(MEe(r)),i=DEe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=C8(n,i),o<55296||o>56319||i+1===s||(a=C8(n,i+1))<56320||a>57343?e?LEe(n,i):o:e?FEe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},jEe={codeAt:P8(!1),charAt:P8(!0)},zEe=jEe.charAt,HEe=Ho,iK=Zd,UEe=N3,N8=R3,sK="String Iterator",KEe=iK.set,WEe=iK.getterFor(sK);UEe(String,"String",function(e){KEe(this,{type:sK,string:HEe(e),index:0})},function(){var r=WEe(this),t=r.string,n=r.index,i;return n>=t.length?N8(void 0,!0):(i=zEe(t,n),r.index+=i.length,N8(i,!1))});var VEe=Vv,qEe=VEe.f("iterator"),GEe=qEe,oK=GEe,YEe=oK,ZEe=YEe,XEe=ZEe,JEe=XEe;(function(e){e.exports=JEe})(REe);(function(e){e.exports=ik})(NEe);var QEe=_t(db);function Un(e){"@babel/helpers - typeof";return Un=typeof Ph=="function"&&typeof QEe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Ph=="function"&&r.constructor===Ph&&r!==Ph.prototype?"symbol":typeof r},Un(e)}var sk={},eSe={get exports(){return sk},set exports(e){sk=e}},ok={},tSe={get exports(){return ok},set exports(e){ok=e}},rSe=Vv,nSe=rSe.f("toPrimitive"),iSe=nSe,sSe=iSe,oSe=sSe,aSe=oSe,lSe=aSe,uSe=lSe;(function(e){e.exports=uSe})(tSe);(function(e){e.exports=ok})(eSe);var cSe=_t(sk);function hSe(e,r){if(Un(e)!=="object"||e===null)return e;var t=e[cSe];if(t!==void 0){var n=t.call(e,r||"default");if(Un(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function aK(e){var r=hSe(e,"string");return Un(r)==="symbol"?r:String(r)}function R8(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),H1(e,aK(n.key),n)}}function ew(e,r,t){return r&&R8(e.prototype,r),t&&R8(e,t),H1(e,"prototype",{writable:!1}),e}function Hr(e,r,t){return r=aK(r),r in e?H1(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ak={},dSe={get exports(){return ak},set exports(e){ak=e}},lK=rr,fSe=Ri,pSe=Cn,vSe=on,D8=Gv,gSe=Rv,uK=Function,ySe=lK([].concat),mSe=lK([].join),kx={},bSe=function(e,r,t){if(!vSe(kx,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";kx[r]=uK("C,a","return new C("+mSe(n,",")+")")}return kx[r](e,t)},cK=gSe?uK.bind:function(r){var t=fSe(this),n=t.prototype,i=D8(arguments,1),s=function(){var a=ySe(i,D8(arguments));return this instanceof s?bSe(t,a.length,a):t.apply(r,a)};return pSe(n)&&(s.prototype=n),s},wSe=lt,B8=cK;wSe({target:"Function",proto:!0,forced:Function.bind!==B8},{bind:B8});var _Se=pr,an=function(e){return _Se[e+"Prototype"]},$Se=an,xSe=$Se("Function").bind,ESe=Or,SSe=xSe,Tx=Function.prototype,kSe=function(e){var r=e.bind;return e===Tx||ESe(Tx,e)&&r===Tx.bind?SSe:r},TSe=kSe,hK=TSe;(function(e){e.exports=hK})(dSe);var dK=_t(ak),lk={},ISe={get exports(){return lk},set exports(e){lk=e}},OSe=Ri,ASe=Di,CSe=F1,PSe=ns,NSe=TypeError,M8=function(e){return function(r,t,n,i){OSe(t);var s=ASe(r),o=CSe(s),a=PSe(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw NSe("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},RSe={left:M8(!1),right:M8(!0)},DSe=Gt,Zv=function(e,r){var t=[][e];return!!t&&DSe(function(){t.call(null,r||function(){return 1},1)})},BSe=Ma,Xv=typeof process<"u"&&BSe(process)=="process",MSe=lt,LSe=RSe.left,FSe=Zv,L8=Wd,jSe=Xv,zSe=!jSe&&L8>79&&L8<83,HSe=zSe||!FSe("reduce");MSe({target:"Array",proto:!0,forced:HSe},{reduce:function(r){var t=arguments.length;return LSe(this,r,t,t>1?arguments[1]:void 0)}});var USe=an,KSe=USe("Array").reduce,WSe=Or,VSe=KSe,Ix=Array.prototype,qSe=function(e){var r=e.reduce;return e===Ix||WSe(Ix,e)&&r===Ix.reduce?VSe:r},GSe=qSe,YSe=GSe;(function(e){e.exports=YSe})(ISe);var ZSe=_t(lk),uk={},XSe={get exports(){return uk},set exports(e){uk=e}},JSe=lt,QSe=Xd.filter,eke=jv,tke=eke("filter");JSe({target:"Array",proto:!0,forced:!tke},{filter:function(r){return QSe(this,r,arguments.length>1?arguments[1]:void 0)}});var rke=an,nke=rke("Array").filter,ike=Or,ske=nke,Ox=Array.prototype,oke=function(e){var r=e.filter;return e===Ox||ike(Ox,e)&&r===Ox.filter?ske:r},ake=oke,lke=ake;(function(e){e.exports=lke})(XSe);var Nh=_t(uk),ck={},uke={get exports(){return ck},set exports(e){ck=e}},cke=lt,hke=Xd.map,dke=jv,fke=dke("map");cke({target:"Array",proto:!0,forced:!fke},{map:function(r){return hke(this,r,arguments.length>1?arguments[1]:void 0)}});var pke=an,vke=pke("Array").map,gke=Or,yke=vke,Ax=Array.prototype,mke=function(e){var r=e.map;return e===Ax||gke(Ax,e)&&r===Ax.map?yke:r},bke=mke,wke=bke;(function(e){e.exports=wke})(uke);var Us=_t(ck),F8={},_ke={get exports(){return F8},set exports(e){F8=e}},$ke=au,xke=ns,Eke=w3,Ske=ou,fK=function(e,r,t,n,i,s,o,a){for(var l=i,u=0,d=o?Ske(o,a):!1,h,v;u<n;)u in t&&(h=d?d(t[u],u,r):t[u],s>0&&$ke(h)?(v=xke(h),l=fK(e,r,h,v,l,s-1)-1):(Eke(l+1),e[l]=h),l++),u++;return l},kke=fK,Tke=lt,Ike=kke,Oke=Ri,Ake=Di,Cke=ns,Pke=W1;Tke({target:"Array",proto:!0},{flatMap:function(r){var t=Ake(this),n=Cke(t),i;return Oke(r),i=Pke(t,0),i.length=Ike(i,t,t,n,0,1,r,arguments.length>1?arguments[1]:void 0),i}});var Nke=an,Rke=Nke("Array").flatMap,Dke=Or,Bke=Rke,Cx=Array.prototype,Mke=function(e){var r=e.flatMap;return e===Cx||Dke(Cx,e)&&r===Cx.flatMap?Bke:r},Lke=Mke,Fke=Lke;(function(e){e.exports=Fke})(_ke);var hk={},jke={get exports(){return hk},set exports(e){hk=e}},zke=An,j8=rs,Hke=y3,pK=function(e,r,t){var n,i;j8(e);try{if(n=Hke(e,"return"),!n){if(r==="throw")throw t;return t}n=zke(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return j8(n),t},Uke=rs,Kke=pK,Wke=function(e,r,t,n){try{return n?r(Uke(t)[0],t[1]):r(t)}catch(i){Kke(e,"throw",i)}},Vke=Ar,qke=Jd,Gke=Vke("iterator"),Yke=Array.prototype,vK=function(e){return e!==void 0&&(qke.Array===e||Yke[Gke]===e)},Zke=Fa,z8=y3,Xke=Bv,Jke=Jd,Qke=Ar,eTe=Qke("iterator"),tw=function(e){if(!Xke(e))return z8(e,eTe)||z8(e,"@@iterator")||Jke[Zke(e)]},tTe=An,rTe=Ri,nTe=rs,iTe=qd,sTe=tw,oTe=TypeError,B3=function(e,r){var t=arguments.length<2?sTe(e):r;if(rTe(t))return nTe(tTe(t,e));throw oTe(iTe(e)+" is not iterable")},aTe=ou,lTe=An,uTe=Di,cTe=Wke,hTe=vK,dTe=K1,fTe=ns,H8=Gd,pTe=B3,vTe=tw,U8=Array,gTe=function(r){var t=uTe(r),n=dTe(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=aTe(s,i>2?arguments[2]:void 0));var a=vTe(t),l=0,u,d,h,v,g,b;if(a&&!(this===U8&&hTe(a)))for(v=pTe(t,a),g=v.next,d=n?new this:[];!(h=lTe(g,v)).done;l++)b=o?cTe(v,s,[h.value,l],!0):h.value,H8(d,l,b);else for(u=fTe(t),d=n?new this(u):U8(u);u>l;l++)b=o?s(t[l],l):t[l],H8(d,l,b);return d.length=l,d},yTe=Ar,gK=yTe("iterator"),yK=!1;try{var mTe=0,K8={next:function(){return{done:!!mTe++}},return:function(){yK=!0}};K8[gK]=function(){return this},Array.from(K8,function(){throw 2})}catch{}var mK=function(e,r){if(!r&&!yK)return!1;var t=!1;try{var n={};n[gK]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},bTe=lt,wTe=gTe,_Te=mK,$Te=!_Te(function(e){Array.from(e)});bTe({target:"Array",stat:!0,forced:$Te},{from:wTe});var xTe=pr,ETe=xTe.Array.from,STe=ETe,bK=STe;(function(e){e.exports=bK})(jke);var M3=_t(hk),dk={},kTe={get exports(){return dk},set exports(e){dk=e}},fk={},TTe={get exports(){return fk},set exports(e){fk=e}},ITe=tw,OTe=ITe,ATe=OTe,CTe=ATe,PTe=CTe,NTe=PTe,RTe=NTe,DTe=RTe;(function(e){e.exports=DTe})(TTe);(function(e){e.exports=fk})(kTe);var Jv=_t(dk),pk={},BTe={get exports(){return pk},set exports(e){pk=e}},MTe=pr,LTe=MTe.Object.getOwnPropertySymbols,FTe=LTe,jTe=FTe;(function(e){e.exports=jTe})(BTe);var W8=_t(pk),vk={},zTe={get exports(){return vk},set exports(e){vk=e}},gk={},HTe={get exports(){return gk},set exports(e){gk=e}},UTe=lt,KTe=Gt,WTe=co,wK=Pc.f,_K=mn,VTe=!_K||KTe(function(){wK(1)});UTe({target:"Object",stat:!0,forced:VTe,sham:!_K},{getOwnPropertyDescriptor:function(r,t){return wK(WTe(r),t)}});var qTe=pr,$K=qTe.Object,GTe=HTe.exports=function(r,t){return $K.getOwnPropertyDescriptor(r,t)};$K.getOwnPropertyDescriptor.sham&&(GTe.sham=!0);var YTe=gk,ZTe=YTe;(function(e){e.exports=ZTe})(zTe);var xK=_t(vk),yk={},XTe={get exports(){return yk},set exports(e){yk=e}},JTe=vi,QTe=rr,e5e=Kv,t5e=Wv,r5e=rs,n5e=QTe([].concat),L3=JTe("Reflect","ownKeys")||function(r){var t=e5e.f(r5e(r)),n=t5e.f;return n?n5e(t,n(r)):t},i5e=lt,s5e=mn,o5e=L3,a5e=co,l5e=Pc,u5e=Gd;i5e({target:"Object",stat:!0,sham:!s5e},{getOwnPropertyDescriptors:function(r){for(var t=a5e(r),n=l5e.f,i=o5e(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&u5e(s,a,l);return s}});var c5e=pr,h5e=c5e.Object.getOwnPropertyDescriptors,d5e=h5e,f5e=d5e;(function(e){e.exports=f5e})(XTe);var V8=_t(yk),mk={},p5e={get exports(){return mk},set exports(e){mk=e}},bk={},v5e={get exports(){return bk},set exports(e){bk=e}},g5e=lt,y5e=mn,q8=V1.f;g5e({target:"Object",stat:!0,forced:Object.defineProperties!==q8,sham:!y5e},{defineProperties:q8});var m5e=pr,EK=m5e.Object,b5e=v5e.exports=function(r,t){return EK.defineProperties(r,t)};EK.defineProperties.sham&&(b5e.sham=!0);var w5e=bk,_5e=w5e;(function(e){e.exports=_5e})(p5e);var $5e=_t(mk),wk={},x5e={get exports(){return wk},set exports(e){wk=e}};(function(e){e.exports=lU})(x5e);var E5e=_t(wk),_k={},S5e={get exports(){return _k},set exports(e){_k=e}},$k={},k5e={get exports(){return $k},set exports(e){$k=e}},T5e=lt,I5e=au;T5e({target:"Array",stat:!0},{isArray:I5e});var O5e=pr,A5e=O5e.Array.isArray,C5e=A5e,SK=C5e,P5e=SK,N5e=P5e,R5e=N5e,D5e=R5e;(function(e){e.exports=D5e})(k5e);(function(e){e.exports=$k})(S5e);var kK=_t(_k);function B5e(e){if(kK(e))return e}function M5e(e,r){var t=e==null?null:typeof Ph<"u"&&Jv(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var fb={},L5e={get exports(){return fb},set exports(e){fb=e}},xk={},F5e={get exports(){return xk},set exports(e){xk=e}},j5e=lt,G8=au,z5e=K1,H5e=Cn,Y8=zv,U5e=ns,K5e=co,W5e=Gd,V5e=Ar,q5e=jv,G5e=Gv,Y5e=q5e("slice"),Z5e=V5e("species"),Px=Array,X5e=Math.max;j5e({target:"Array",proto:!0,forced:!Y5e},{slice:function(r,t){var n=K5e(this),i=U5e(n),s=Y8(r,i),o=Y8(t===void 0?i:t,i),a,l,u;if(G8(n)&&(a=n.constructor,z5e(a)&&(a===Px||G8(a.prototype))?a=void 0:H5e(a)&&(a=a[Z5e],a===null&&(a=void 0)),a===Px||a===void 0))return G5e(n,s,o);for(l=new(a===void 0?Px:a)(X5e(o-s,0)),u=0;s<o;s++,u++)s in n&&W5e(l,u,n[s]);return l.length=u,l}});var J5e=an,Q5e=J5e("Array").slice,eIe=Or,tIe=Q5e,Nx=Array.prototype,rIe=function(e){var r=e.slice;return e===Nx||eIe(Nx,e)&&r===Nx.slice?tIe:r},nIe=rIe,TK=nIe,iIe=TK,sIe=iIe,oIe=sIe,aIe=oIe;(function(e){e.exports=aIe})(F5e);(function(e){e.exports=xk})(L5e);var lIe=_t(fb),Ek={},uIe={get exports(){return Ek},set exports(e){Ek=e}},Sk={},cIe={get exports(){return Sk},set exports(e){Sk=e}},hIe=bK,dIe=hIe,fIe=dIe,pIe=fIe;(function(e){e.exports=pIe})(cIe);(function(e){e.exports=Sk})(uIe);var IK=_t(Ek);function kk(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function OK(e,r){var t;if(e){if(typeof e=="string")return kk(e,r);var n=lIe(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return IK(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kk(e,r)}}function vIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _i(e,r){return B5e(e)||M5e(e,r)||OK(e,r)||vIe()}function gIe(e){if(kK(e))return kk(e)}function yIe(e){if(typeof Ph<"u"&&Jv(e)!=null||e["@@iterator"]!=null)return IK(e)}function mIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ti(e){return gIe(e)||yIe(e)||OK(e)||mIe()}var Tk={},bIe={get exports(){return Tk},set exports(e){Tk=e}};(function(e){e.exports=eK})(bIe);var rw=_t(Tk),Ik={},wIe={get exports(){return Ik},set exports(e){Ik=e}},_Ie=an,$Ie=_Ie("Array").concat,xIe=Or,EIe=$Ie,Rx=Array.prototype,SIe=function(e){var r=e.concat;return e===Rx||xIe(Rx,e)&&r===Rx.concat?EIe:r},kIe=SIe,TIe=kIe;(function(e){e.exports=TIe})(wIe);var nw=_t(Ik),Ok={},IIe={get exports(){return Ok},set exports(e){Ok=e}};(function(e){e.exports=TK})(IIe);var iw=_t(Ok),Ak={},OIe={get exports(){return Ak},set exports(e){Ak=e}},AIe=lt,CIe=L3;AIe({target:"Reflect",stat:!0},{ownKeys:CIe});var PIe=pr,NIe=PIe.Reflect.ownKeys,RIe=NIe,DIe=RIe;(function(e){e.exports=DIe})(OIe);var BIe=_t(Ak),Ck={},MIe={get exports(){return Ck},set exports(e){Ck=e}};(function(e){e.exports=SK})(MIe);var Vi=_t(Ck),Pk={},LIe={get exports(){return Pk},set exports(e){Pk=e}},FIe=lt,jIe=Di,AK=Uv,zIe=Gt,HIe=zIe(function(){AK(1)});FIe({target:"Object",stat:!0,forced:HIe},{keys:function(r){return AK(jIe(r))}});var UIe=pr,KIe=UIe.Object.keys,WIe=KIe,VIe=WIe;(function(e){e.exports=VIe})(LIe);var F3=_t(Pk),Z8={},qIe={get exports(){return Z8},set exports(e){Z8=e}},GIe=lt,YIe=rr,CK=Date,ZIe=YIe(CK.prototype.getTime);GIe({target:"Date",stat:!0},{now:function(){return ZIe(new CK)}});var XIe=pr,JIe=XIe.Date.now,QIe=JIe,eOe=QIe;(function(e){e.exports=eOe})(qIe);var Nk={},tOe={get exports(){return Nk},set exports(e){Nk=e}},rOe=Xd.forEach,nOe=Zv,iOe=nOe("forEach"),sOe=iOe?[].forEach:function(r){return rOe(this,r,arguments.length>1?arguments[1]:void 0)},oOe=lt,X8=sOe;oOe({target:"Array",proto:!0,forced:[].forEach!=X8},{forEach:X8});var aOe=an,lOe=aOe("Array").forEach,uOe=lOe,cOe=uOe,hOe=Fa,dOe=on,fOe=Or,pOe=cOe,Dx=Array.prototype,vOe={DOMTokenList:!0,NodeList:!0},PK=function(e){var r=e.forEach;return e===Dx||fOe(Dx,e)&&r===Dx.forEach||dOe(vOe,hOe(e))?pOe:r};(function(e){e.exports=PK})(tOe);var yc=_t(Nk),Rk={},gOe={get exports(){return Rk},set exports(e){Rk=e}},yOe=lt,mOe=rr,bOe=au,wOe=mOe([].reverse),J8=[1,2];yOe({target:"Array",proto:!0,forced:String(J8)===String(J8.reverse())},{reverse:function(){return bOe(this)&&(this.length=this.length),wOe(this)}});var _Oe=an,$Oe=_Oe("Array").reverse,xOe=Or,EOe=$Oe,Bx=Array.prototype,SOe=function(e){var r=e.reverse;return e===Bx||xOe(Bx,e)&&r===Bx.reverse?EOe:r},kOe=SOe,NK=kOe;(function(e){e.exports=NK})(gOe);var TOe=_t(Rk),Dk={},IOe={get exports(){return Dk},set exports(e){Dk=e}},OOe=mn,AOe=au,COe=TypeError,POe=Object.getOwnPropertyDescriptor,NOe=OOe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),ROe=NOe?function(e,r){if(AOe(e)&&!POe(e,"length").writable)throw COe("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},Q8=qd,DOe=TypeError,RK=function(e,r){if(!delete e[r])throw DOe("Cannot delete property "+Q8(r)+" of "+Q8(e))},BOe=lt,MOe=Di,LOe=zv,FOe=U1,jOe=ns,zOe=ROe,HOe=w3,UOe=W1,KOe=Gd,Mx=RK,WOe=jv,VOe=WOe("splice"),qOe=Math.max,GOe=Math.min;BOe({target:"Array",proto:!0,forced:!VOe},{splice:function(r,t){var n=MOe(this),i=jOe(n),s=LOe(r,i),o=arguments.length,a,l,u,d,h,v;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=GOe(qOe(FOe(t),0),i-s)),HOe(i+a-l),u=UOe(n,l),d=0;d<l;d++)h=s+d,h in n&&KOe(u,d,n[h]);if(u.length=l,a<l){for(d=s;d<i-l;d++)h=d+l,v=d+a,h in n?n[v]=n[h]:Mx(n,v);for(d=i;d>i-l+a;d--)Mx(n,d-1)}else if(a>l)for(d=i-l;d>s;d--)h=d+l-1,v=d+a-1,h in n?n[v]=n[h]:Mx(n,v);for(d=0;d<a;d++)n[d+s]=arguments[d+2];return zOe(n,i-l+a),u}});var YOe=an,ZOe=YOe("Array").splice,XOe=Or,JOe=ZOe,Lx=Array.prototype,QOe=function(e){var r=e.splice;return e===Lx||XOe(Lx,e)&&r===Lx.splice?JOe:r},e3e=QOe,t3e=e3e;(function(e){e.exports=t3e})(IOe);var DK=_t(Dk),Bk={},r3e={get exports(){return Bk},set exports(e){Bk=e}},eR=mn,n3e=rr,i3e=An,s3e=Gt,Fx=Uv,o3e=Wv,a3e=Dv,l3e=Di,u3e=F1,gh=Object.assign,tR=Object.defineProperty,c3e=n3e([].concat),h3e=!gh||s3e(function(){if(eR&&gh({b:1},gh(tR({},"a",{enumerable:!0,get:function(){tR(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),gh({},e)[t]!=7||Fx(gh({},r)).join("")!=n})?function(r,t){for(var n=l3e(r),i=arguments.length,s=1,o=o3e.f,a=a3e.f;i>s;)for(var l=u3e(arguments[s++]),u=o?c3e(Fx(l),o(l)):Fx(l),d=u.length,h=0,v;d>h;)v=u[h++],(!eR||i3e(a,l,v))&&(n[v]=l[v]);return n}:gh,d3e=lt,rR=h3e;d3e({target:"Object",stat:!0,arity:2,forced:Object.assign!==rR},{assign:rR});var f3e=pr,p3e=f3e.Object.assign,v3e=p3e,g3e=v3e;(function(e){e.exports=g3e})(r3e);var y3e=_t(Bk),nR={},m3e={get exports(){return nR},set exports(e){nR=e}},b3e=lt,w3e=x3.includes,_3e=Gt,$3e=_3e(function(){return!Array(1).includes()});b3e({target:"Array",proto:!0,forced:$3e},{includes:function(r){return w3e(this,r,arguments.length>1?arguments[1]:void 0)}});var x3e=an,E3e=x3e("Array").includes,S3e=Cn,k3e=Ma,T3e=Ar,I3e=T3e("match"),O3e=function(e){var r;return S3e(e)&&((r=e[I3e])!==void 0?!!r:k3e(e)=="RegExp")},A3e=O3e,C3e=TypeError,P3e=function(e){if(A3e(e))throw C3e("The method doesn't accept regular expressions");return e},N3e=Ar,R3e=N3e("match"),D3e=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[R3e]=!1,"/./"[e](r)}catch{}}return!1},B3e=lt,M3e=rr,L3e=P3e,F3e=Mv,iR=Ho,j3e=D3e,z3e=M3e("".indexOf);B3e({target:"String",proto:!0,forced:!j3e("includes")},{includes:function(r){return!!~z3e(iR(F3e(this)),iR(L3e(r)),arguments.length>1?arguments[1]:void 0)}});var H3e=an,U3e=H3e("String").includes,sR=Or,K3e=E3e,W3e=U3e,jx=Array.prototype,zx=String.prototype,V3e=function(e){var r=e.includes;return e===jx||sR(jx,e)&&r===jx.includes?K3e:typeof e=="string"||e===zx||sR(zx,e)&&r===zx.includes?W3e:r},q3e=V3e,G3e=q3e;(function(e){e.exports=G3e})(m3e);var oR={},Y3e={get exports(){return oR},set exports(e){oR=e}},Z3e=lt,X3e=Gt,J3e=Di,BK=Q1,Q3e=GU,eAe=X3e(function(){BK(1)});Z3e({target:"Object",stat:!0,forced:eAe,sham:!Q3e},{getPrototypeOf:function(r){return BK(J3e(r))}});var tAe=pr,rAe=tAe.Object.getPrototypeOf,nAe=rAe,MK=nAe;(function(e){e.exports=MK})(Y3e);var aR={},iAe={get exports(){return aR},set exports(e){aR=e}},sAe=mn,LK=rr,oAe=Uv,aAe=co,lAe=Dv.f,uAe=LK(lAe),cAe=LK([].push),lR=function(e){return function(r){for(var t=aAe(r),n=oAe(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!sAe||uAe(t,a))&&cAe(o,e?[a,t[a]]:t[a]);return o}},hAe={entries:lR(!0),values:lR(!1)},dAe=lt,fAe=hAe.values;dAe({target:"Object",stat:!0},{values:function(r){return fAe(r)}});var pAe=pr,vAe=pAe.Object.values,gAe=vAe,yAe=gAe;(function(e){e.exports=yAe})(iAe);var uR={},mAe={get exports(){return uR},set exports(e){uR=e}},j3=`	
\v\f\r                　\u2028\u2029\uFEFF`,bAe=rr,wAe=Mv,_Ae=Ho,Mk=j3,cR=bAe("".replace),$Ae=RegExp("^["+Mk+"]+"),xAe=RegExp("(^|[^"+Mk+"])["+Mk+"]+$"),Hx=function(e){return function(r){var t=_Ae(wAe(r));return e&1&&(t=cR(t,$Ae,"")),e&2&&(t=cR(t,xAe,"$1")),t}},FK={start:Hx(1),end:Hx(2),trim:Hx(3)},jK=Br,EAe=Gt,SAe=rr,kAe=Ho,TAe=FK.trim,hR=j3,bp=jK.parseInt,dR=jK.Symbol,fR=dR&&dR.iterator,zK=/^[+-]?0x/i,IAe=SAe(zK.exec),OAe=bp(hR+"08")!==8||bp(hR+"0x16")!==22||fR&&!EAe(function(){bp(Object(fR))}),AAe=OAe?function(r,t){var n=TAe(kAe(r));return bp(n,t>>>0||(IAe(zK,n)?16:10))}:bp,CAe=lt,pR=AAe;CAe({global:!0,forced:parseInt!=pR},{parseInt:pR});var PAe=pr,NAe=PAe.parseInt,RAe=NAe,DAe=RAe;(function(e){e.exports=DAe})(mAe);var vR={},BAe={get exports(){return vR},set exports(e){vR=e}},MAe=lt,LAe=g3,FAe=x3.indexOf,jAe=Zv,Lk=LAe([].indexOf),HK=!!Lk&&1/Lk([1],1,-0)<0,zAe=HK||!jAe("indexOf");MAe({target:"Array",proto:!0,forced:zAe},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return HK?Lk(this,r,t)||0:FAe(this,r,t)}});var HAe=an,UAe=HAe("Array").indexOf,KAe=Or,WAe=UAe,Ux=Array.prototype,VAe=function(e){var r=e.indexOf;return e===Ux||KAe(Ux,e)&&r===Ux.indexOf?WAe:r},qAe=VAe,GAe=qAe;(function(e){e.exports=GAe})(BAe);var gR={},YAe={get exports(){return gR},set exports(e){gR=e}},ZAe=qU.PROPER,XAe=Gt,yR=j3,mR="​᠎",JAe=function(e){return XAe(function(){return!!yR[e]()||mR[e]()!==mR||ZAe&&yR[e].name!==e})},QAe=lt,eCe=FK.trim,tCe=JAe;QAe({target:"String",proto:!0,forced:tCe("trim")},{trim:function(){return eCe(this)}});var rCe=an,nCe=rCe("String").trim,iCe=Or,sCe=nCe,Kx=String.prototype,oCe=function(e){var r=e.trim;return typeof e=="string"||e===Kx||iCe(Kx,e)&&r===Kx.trim?sCe:r},aCe=oCe,lCe=aCe;(function(e){e.exports=lCe})(YAe);var Fk={},uCe={get exports(){return Fk},set exports(e){Fk=e}},cCe=lt,hCe=mn,dCe=Rc;cCe({target:"Object",stat:!0,sham:!hCe},{create:dCe});var fCe=pr,pCe=fCe.Object,vCe=function(r,t){return pCe.create(r,t)},gCe=vCe,UK=gCe;(function(e){e.exports=UK})(uCe);var yCe=_t(Fk),jk={},mCe={get exports(){return jk},set exports(e){jk=e}},zk=pr,bCe=Kd;zk.JSON||(zk.JSON={stringify:JSON.stringify});var wCe=function(r,t,n){return bCe(zk.JSON.stringify,null,arguments)},_Ce=wCe,$Ce=_Ce;(function(e){e.exports=$Ce})(mCe);var xCe=_t(jk),Hk={},ECe={get exports(){return Hk},set exports(e){Hk=e}},SCe=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",kCe=TypeError,KK=function(e,r){if(e<r)throw kCe("Not enough arguments");return e},WK=Br,TCe=Kd,ICe=Mr,OCe=SCe,ACe=su,CCe=Gv,PCe=KK,NCe=WK.Function,RCe=/MSIE .\./.test(ACe)||OCe&&function(){var e=WK.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),VK=function(e,r){var t=r?2:1;return RCe?function(n,i){var s=PCe(arguments.length,1)>t,o=ICe(n)?n:NCe(n),a=s?CCe(arguments,t):[],l=s?function(){TCe(o,this,a)}:o;return r?e(l,i):e(l)}:e},DCe=lt,qK=Br,BCe=VK,bR=BCe(qK.setInterval,!0);DCe({global:!0,bind:!0,forced:qK.setInterval!==bR},{setInterval:bR});var MCe=lt,GK=Br,LCe=VK,wR=LCe(GK.setTimeout,!0);MCe({global:!0,bind:!0,forced:GK.setTimeout!==wR},{setTimeout:wR});var FCe=pr,jCe=FCe.setTimeout;(function(e){e.exports=jCe})(ECe);var zCe=_t(Hk),_R={},HCe={get exports(){return _R},set exports(e){_R=e}},UCe=Di,$R=zv,KCe=ns,WCe=function(r){for(var t=UCe(this),n=KCe(t),i=arguments.length,s=$R(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:$R(o,n);a>s;)t[s++]=r;return t},VCe=lt,qCe=WCe;VCe({target:"Array",proto:!0},{fill:qCe});var GCe=an,YCe=GCe("Array").fill,ZCe=Or,XCe=YCe,Wx=Array.prototype,JCe=function(e){var r=e.fill;return e===Wx||ZCe(Wx,e)&&r===Wx.fill?XCe:r},QCe=JCe,ePe=QCe;(function(e){e.exports=ePe})(HCe);var Uk={},tPe={get exports(){return Uk},set exports(e){Uk=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(tPe);var rPe=Uk;/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function io(){return io=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},io.apply(this,arguments)}function Ps(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function ym(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Kk;typeof Object.assign!="function"?Kk=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:Kk=Object.assign;var mc=Kk,xR=["","webkit","Moz","MS","ms","o"],nPe=typeof document>"u"?{style:{}}:document.createElement("div"),iPe="function",Rh=Math.round,bc=Math.abs,z3=Date.now;function sw(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<xR.length;){if(t=xR[s],n=t?t+i:r,n in e)return n;s++}}var ya;typeof window>"u"?ya={}:ya=window;var YK=sw(nPe.style,"touchAction"),ZK=YK!==void 0;function sPe(){if(!ZK)return!1;var e={},r=ya.CSS&&ya.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?ya.CSS.supports("touch-action",t):!0}),e}var XK="compute",JK="auto",Wk="manipulation",ic="none",iv="pan-x",sv="pan-y",mm=sPe(),oPe=/mobile|tablet|ip(ad|hone|od)|android/i,QK="ontouchstart"in ya,aPe=sw(ya,"PointerEvent")!==void 0,lPe=QK&&oPe.test(navigator.userAgent),Qv="touch",uPe="pen",H3="mouse",cPe="kinect",hPe=25,fi=1,Bc=2,rn=4,Pi=8,pb=1,eg=2,tg=4,rg=8,Ed=16,Po=eg|tg,sc=rg|Ed,eW=Po|sc,tW=["x","y"],vb=["clientX","clientY"];function ma(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function ow(e,r){return typeof e===iPe?e.apply(r&&r[0]||void 0,r):e}function Vu(e,r){return e.indexOf(r)>-1}function dPe(e){if(Vu(e,ic))return ic;var r=Vu(e,iv),t=Vu(e,sv);return r&&t?ic:r||t?r?iv:sv:Vu(e,Wk)?Wk:JK}var rW=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===XK&&(n=this.compute()),ZK&&this.manager.element.style&&mm[n]&&(this.manager.element.style[YK]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return ma(this.manager.recognizers,function(i){ow(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),dPe(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Vu(o,ic)&&!mm[ic],l=Vu(o,sv)&&!mm[sv],u=Vu(o,iv)&&!mm[iv];if(a){var d=n.pointers.length===1,h=n.distance<2,v=n.deltaTime<250;if(d&&h&&v)return}if(!(u&&l)&&(a||l&&s&Po||u&&s&sc))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function U3(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function nW(e){var r=e.length;if(r===1)return{x:Rh(e[0].clientX),y:Rh(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:Rh(t/r),y:Rh(n/r)}}function ER(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:Rh(e.pointers[t].clientX),clientY:Rh(e.pointers[t].clientY)},t++;return{timeStamp:z3(),pointers:r,center:nW(r),deltaX:e.deltaX,deltaY:e.deltaY}}function gb(e,r,t){t||(t=tW);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function Vk(e,r,t){t||(t=tW);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function iW(e,r){return e===r?pb:bc(e)>=bc(r)?e<0?eg:tg:r<0?rg:Ed}function fPe(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===fi||s.eventType===rn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function sW(e,r,t){return{x:r/e||0,y:t/e||0}}function pPe(e,r){return gb(r[0],r[1],vb)/gb(e[0],e[1],vb)}function vPe(e,r){return Vk(r[1],r[0],vb)+Vk(e[1],e[0],vb)}function gPe(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Pi&&(n>hPe||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,d=sW(n,l,u);s=d.x,o=d.y,i=bc(d.x)>bc(d.y)?d.x:d.y,a=iW(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function yPe(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=ER(r)),i>1&&!t.firstMultiple?t.firstMultiple=ER(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=nW(n);r.timeStamp=z3(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=Vk(a,l),r.distance=gb(a,l),fPe(t,r),r.offsetDirection=iW(r.deltaX,r.deltaY);var u=sW(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=bc(u.x)>bc(u.y)?u.x:u.y,r.scale=o?pPe(o.pointers,n):1,r.rotation=o?vPe(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,gPe(t,r);var d=e.element,h=r.srcEvent,v;h.composedPath?v=h.composedPath()[0]:h.path?v=h.path[0]:v=h.target,U3(v,d)&&(d=v),r.target=d}function mPe(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&fi&&n-i===0,o=r&(rn|Pi)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,yPe(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function ov(e){return e.trim().split(/\s+/g)}function wp(e,r,t){ma(ov(r),function(n){e.addEventListener(n,t,!1)})}function _p(e,r,t){ma(ov(r),function(n){e.removeEventListener(n,t,!1)})}function SR(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Qd=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){ow(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&wp(this.element,this.evEl,this.domHandler),this.evTarget&&wp(this.target,this.evTarget,this.domHandler),this.evWin&&wp(SR(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&_p(this.element,this.evEl,this.domHandler),this.evTarget&&_p(this.target,this.evTarget,this.domHandler),this.evWin&&_p(SR(this.element),this.evWin,this.domHandler)},e}();function wc(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var bPe={pointerdown:fi,pointermove:Bc,pointerup:rn,pointercancel:Pi,pointerout:Pi},wPe={2:Qv,3:uPe,4:H3,5:cPe},oW="pointerdown",aW="pointermove pointerup pointercancel";ya.MSPointerEvent&&!ya.PointerEvent&&(oW="MSPointerDown",aW="MSPointerMove MSPointerUp MSPointerCancel");var lW=function(e){Ps(r,e);function r(){var n,i=r.prototype;return i.evEl=oW,i.evWin=aW,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=bPe[a],u=wPe[i.pointerType]||i.pointerType,d=u===Qv,h=wc(s,i.pointerId,"pointerId");l&fi&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(rn|Pi)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},r}(Qd);function av(e){return Array.prototype.slice.call(e,0)}function K3(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];wc(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var _Pe={touchstart:fi,touchmove:Bc,touchend:rn,touchcancel:Pi},$Pe="touchstart touchmove touchend touchcancel",W3=function(e){Ps(r,e);function r(){var n;return r.prototype.evTarget=$Pe,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=_Pe[i.type],o=xPe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Qv,srcEvent:i})},r}(Qd);function xPe(e,r){var t=av(e.touches),n=this.targetIds;if(r&(fi|Bc)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=av(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return U3(u.target,l)}),r===fi)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(rn|Pi)&&delete n[o[i].identifier],i++;if(a.length)return[K3(s.concat(a),"identifier",!0),a]}var EPe={mousedown:fi,mousemove:Bc,mouseup:rn},SPe="mousedown",kPe="mousemove mouseup",V3=function(e){Ps(r,e);function r(){var n,i=r.prototype;return i.evEl=SPe,i.evWin=kPe,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=EPe[i.type];s&fi&&i.button===0&&(this.pressed=!0),s&Bc&&i.which!==1&&(s=rn),this.pressed&&(s&rn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:H3,srcEvent:i}))},r}(Qd),TPe=2500,kR=25;function TR(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,TPe)}}function IPe(e,r){e&fi?(this.primaryTouch=r.changedPointers[0].identifier,TR.call(this,r)):e&(rn|Pi)&&TR.call(this,r)}function OPe(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=kR&&o<=kR)return!0}return!1}var uW=function(){var e=function(r){Ps(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===Qv,h=u.pointerType===H3;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)IPe.call(ym(ym(o)),l,u);else if(h&&OPe.call(ym(ym(o)),u))return;o.callback(a,l,u)}},o.touch=new W3(o.manager,o.handler),o.mouse=new V3(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Qd);return e}();function APe(e){var r,t=e.options.inputClass;return t?r=t:aPe?r=lW:lPe?r=W3:QK?r=uW:r=V3,new r(e,mPe)}function Dh(e,r,t){return Array.isArray(e)?(ma(e,t[r],t),!0):!1}var f0=1,Os=2,Sd=4,Fl=8,ba=Fl,lv=16,Oo=32,CPe=1;function PPe(){return CPe++}function bm(e,r){var t=r.manager;return t?t.get(e):e}function IR(e){return e&lv?"cancel":e&Fl?"end":e&Sd?"move":e&Os?"start":""}var ng=function(){function e(t){t===void 0&&(t={}),this.options=io({enable:!0},t),this.id=PPe(),this.manager=null,this.state=f0,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return mc(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(Dh(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=bm(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return Dh(n,"dropRecognizeWith",this)?this:(n=bm(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(Dh(n,"requireFailure",this))return this;var i=this.requireFail;return n=bm(n,this),wc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(Dh(n,"dropRequireFailure",this))return this;n=bm(n,this);var i=wc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Fl&&o(i.options.event+IR(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Fl&&o(i.options.event+IR(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Oo},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Oo|f0)))return!1;n++}return!0},r.recognize=function(n){var i=mc({},n);if(!ow(this.options.enable,[this,i])){this.reset(),this.state=Oo;return}this.state&(ba|lv|Oo)&&(this.state=f0),this.state=this.process(i),this.state&(Os|Sd|Fl|lv)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),qk=function(e){Ps(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,io({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[Wk]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&fi&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==rn)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||gb(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var v=this.count%o.taps;if(v===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ba,s.tryEmit()},o.interval),Os):ba}return Oo},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Oo},this.options.interval),Oo},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===ba&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(ng),kd=function(e){Ps(r,e);function r(n){return n===void 0&&(n={}),e.call(this,io({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Os|Sd),l=this.attrTest(i);return a&&(o&Pi||!l)?s|lv:a||l?o&rn?s|Fl:s&Os?s|Sd:Os:Oo},r}(ng);function cW(e){return e===Ed?"down":e===rg?"up":e===eg?"left":e===tg?"right":""}var q3=function(e){Ps(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,io({event:"pan",threshold:10,pointers:1,direction:eW},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&Po&&s.push(sv),i&sc&&s.push(iv),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Po?(l=u===0?pb:u<0?eg:tg,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?pb:d<0?rg:Ed,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return kd.prototype.attrTest.call(this,i)&&(this.state&Os||!(this.state&Os)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=cW(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(kd),hW=function(e){Ps(r,e);function r(n){return n===void 0&&(n={}),e.call(this,io({event:"swipe",threshold:10,velocity:.3,direction:Po|sc,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return q3.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(Po|sc)?o=i.overallVelocity:s&Po?o=i.overallVelocityX:s&sc&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&bc(o)>this.options.velocity&&i.eventType&rn},t.emit=function(i){var s=cW(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(kd),dW=function(e){Ps(r,e);function r(n){return n===void 0&&(n={}),e.call(this,io({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[ic]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Os)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(kd),fW=function(e){Ps(r,e);function r(n){return n===void 0&&(n={}),e.call(this,io({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[ic]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Os)},r}(kd),pW=function(e){Ps(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,io({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[JK]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(rn|Pi)&&!u)this.reset();else if(i.eventType&fi)this.reset(),this._timer=setTimeout(function(){s.state=ba,s.tryEmit()},o.time);else if(i.eventType&rn)return ba;return Oo},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===ba&&(i&&i.eventType&rn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=z3(),this.manager.emit(this.options.event,this._input)))},r}(ng),vW={domEvents:!1,touchAction:XK,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},OR=[[fW,{enable:!1}],[dW,{enable:!1},["rotate"]],[hW,{direction:Po}],[q3,{direction:Po},["swipe"]],[qk],[qk,{event:"doubletap",taps:2},["tap"]],[pW]],NPe=1,AR=2;function CR(e,r){var t=e.element;if(t.style){var n;ma(e.options.cssProps,function(i,s){n=sw(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function RPe(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var PR=function(){function e(t,n){var i=this;this.options=mc({},vW,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=APe(this),this.touchAction=new rW(this,this.options.touchAction),CR(this,!0),ma(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return mc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?AR:NPe},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ba)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==AR&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Os|Sd|Fl)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof ng)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(Dh(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(Dh(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=wc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return ma(ov(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return ma(ov(n),function(o){i?s[o]&&s[o].splice(wc(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&RPe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&CR(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),DPe={touchstart:fi,touchmove:Bc,touchend:rn,touchcancel:Pi},BPe="touchstart",MPe="touchstart touchmove touchend touchcancel",LPe=function(e){Ps(r,e);function r(){var n,i=r.prototype;return i.evTarget=BPe,i.evWin=MPe,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=DPe[i.type];if(s===fi&&(this.started=!0),!!this.started){var o=FPe.call(this,i,s);s&(rn|Pi)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Qv,srcEvent:i})}},r}(Qd);function FPe(e,r){var t=av(e.touches),n=av(e.changedTouches);return r&(rn|Pi)&&(t=K3(t.concat(n),"identifier",!0)),[t,n]}function gW(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var yW=gW(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),jPe=gW(function(e,r){return yW(e,r,!0)},"merge","Use `assign`.");function zPe(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&mc(i,t)}function NR(e,r){return function(){return e.apply(r,arguments)}}var HPe=function(){var e=function(t,n){return n===void 0&&(n={}),new PR(t,io({recognizers:OR.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=eW,e.DIRECTION_DOWN=Ed,e.DIRECTION_LEFT=eg,e.DIRECTION_RIGHT=tg,e.DIRECTION_UP=rg,e.DIRECTION_HORIZONTAL=Po,e.DIRECTION_VERTICAL=sc,e.DIRECTION_NONE=pb,e.DIRECTION_DOWN=Ed,e.INPUT_START=fi,e.INPUT_MOVE=Bc,e.INPUT_END=rn,e.INPUT_CANCEL=Pi,e.STATE_POSSIBLE=f0,e.STATE_BEGAN=Os,e.STATE_CHANGED=Sd,e.STATE_ENDED=Fl,e.STATE_RECOGNIZED=ba,e.STATE_CANCELLED=lv,e.STATE_FAILED=Oo,e.Manager=PR,e.Input=Qd,e.TouchAction=rW,e.TouchInput=W3,e.MouseInput=V3,e.PointerEventInput=lW,e.TouchMouseInput=uW,e.SingleTouchInput=LPe,e.Recognizer=ng,e.AttrRecognizer=kd,e.Tap=qk,e.Pan=q3,e.Swipe=hW,e.Pinch=dW,e.Rotate=fW,e.Press=pW,e.on=wp,e.off=_p,e.each=ma,e.merge=jPe,e.extend=yW,e.bindFn=NR,e.assign=mc,e.inherit=zPe,e.bindFn=NR,e.prefixed=sw,e.toArray=av,e.inArray=wc,e.uniqueArray=K3,e.splitStr=ov,e.boolOrFn=ow,e.hasParent=U3,e.addEventListeners=wp,e.removeEventListeners=_p,e.defaults=mc({},vW,{preset:OR}),e}(),UPe=HPe;function mW(e,r){var t=typeof rw<"u"&&Jv(e)||e["@@iterator"];if(!t){if(Vi(e)||(t=KPe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function KPe(e,r){var t;if(e){if(typeof e=="string")return RR(e,r);var n=iw(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return M3(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RR(e,r)}}function RR(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var bW=rw("DELETE");function WPe(e){for(var r,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return wW.apply(void 0,nw(r=[{},e]).call(r,n))}function wW(){var e=yb.apply(void 0,arguments);return $W(e),e}function yb(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var n;return yb.apply(void 0,nw(n=[wW(r[0],r[1])]).call(n,Ti(iw(r).call(r,2))))}var i=r[0],s=r[1],o=mW(BIe(s)),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===bW?delete i[l]:i[l]!==null&&s[l]!==null&&Un(i[l])==="object"&&Un(s[l])==="object"&&!Vi(i[l])&&!Vi(s[l])?i[l]=yb(i[l],s[l]):i[l]=_W(s[l]))}}catch(u){o.e(u)}finally{o.f()}return i}function _W(e){return Vi(e)?Us(e).call(e,function(r){return _W(r)}):Un(e)==="object"&&e!==null?yb({},e):e}function $W(e){for(var r=0,t=F3(e);r<t.length;r++){var n=t[r];e[n]===bW?delete e[n]:Un(e[n])==="object"&&e[n]!==null&&$W(e[n])}}function VPe(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var qPe=typeof window<"u"?window.Hammer||UPe:function(){return VPe()};function da(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=qPe(this._dom.overlay);n.on("tap",dK(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];yc(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){GPe(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}rPe(da.prototype);da.current=null;da.prototype.destroy=function(){var e,r;this.deactivate();var t=mW(TOe(e=DK(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};da.prototype.activate=function(){da.current&&da.current.deactivate(),da.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};da.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};da.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function GPe(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var Gk={},YPe={get exports(){return Gk},set exports(e){Gk=e}},ZPe=K1,XPe=qd,JPe=TypeError,xW=function(e){if(ZPe(e))return e;throw JPe(XPe(e)+" is not a constructor")},QPe=lt,e4e=vi,Vx=Kd,t4e=cK,DR=xW,r4e=rs,BR=Cn,n4e=Rc,EW=Gt,G3=e4e("Reflect","construct"),i4e=Object.prototype,s4e=[].push,SW=EW(function(){function e(){}return!(G3(function(){},[],e)instanceof e)}),kW=!EW(function(){G3(function(){})}),MR=SW||kW;QPe({target:"Reflect",stat:!0,forced:MR,sham:MR},{construct:function(r,t){DR(r),r4e(t);var n=arguments.length<3?r:DR(arguments[2]);if(kW&&!SW)return G3(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return Vx(s4e,i,t),new(Vx(t4e,r,i))}var s=n.prototype,o=n4e(BR(s)?s:i4e),a=Vx(r,o,t);return BR(a)?a:o}});var o4e=pr,a4e=o4e.Reflect.construct,l4e=a4e,u4e=l4e;(function(e){e.exports=u4e})(YPe);var p0=_t(Gk);function Tu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var mb={},c4e={get exports(){return mb},set exports(e){mb=e}},Yk={},h4e={get exports(){return Yk},set exports(e){Yk=e}},d4e=UK,f4e=d4e,p4e=f4e,v4e=p4e;(function(e){e.exports=v4e})(h4e);(function(e){e.exports=Yk})(c4e);var g4e=_t(mb),bb={},y4e={get exports(){return bb},set exports(e){bb=e}},Zk={},m4e={get exports(){return Zk},set exports(e){Zk=e}},b4e=lt,w4e=XU;b4e({target:"Object",stat:!0},{setPrototypeOf:w4e});var _4e=pr,$4e=_4e.Object.setPrototypeOf,x4e=$4e,E4e=x4e,S4e=E4e,k4e=S4e,T4e=k4e,I4e=T4e;(function(e){e.exports=I4e})(m4e);(function(e){e.exports=Zk})(y4e);var Xk=_t(bb),Jk={},O4e={get exports(){return Jk},set exports(e){Jk=e}},Qk={},A4e={get exports(){return Qk},set exports(e){Qk=e}},C4e=hK,P4e=C4e,N4e=P4e,R4e=N4e;(function(e){e.exports=R4e})(A4e);(function(e){e.exports=Qk})(O4e);var TW=_t(Jk);function eT(e,r){var t;return eT=Xk?TW(t=Xk).call(t):function(i,s){return i.__proto__=s,i},eT(e,r)}function D4e(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=g4e(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),H1(e,"prototype",{writable:!1}),r&&eT(e,r)}function B4e(e,r){if(r&&(Un(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tu(e)}var wb={},M4e={get exports(){return wb},set exports(e){wb=e}},tT={},L4e={get exports(){return tT},set exports(e){tT=e}},F4e=MK,j4e=F4e,z4e=j4e,H4e=z4e;(function(e){e.exports=H4e})(L4e);(function(e){e.exports=tT})(M4e);var LR=_t(wb);function _b(e){var r;return _b=Xk?TW(r=LR).call(r):function(n){return n.__proto__||LR(n)},_b(e)}var rT={},U4e={get exports(){return rT},set exports(e){rT=e}},nT={},K4e={get exports(){return nT},set exports(e){nT=e}};(function(e){var r=ev,t=db;function n(i){"@babel/helpers - typeof";return e.exports=n=typeof r=="function"&&typeof t=="symbol"?function(s){return typeof s}:function(s){return s&&typeof r=="function"&&s.constructor===r&&s!==r.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(K4e);var iT={},W4e={get exports(){return iT},set exports(e){iT=e}},sT={},V4e={get exports(){return sT},set exports(e){sT=e}},q4e=PK,G4e=q4e,Y4e=G4e,Z4e=Y4e;(function(e){e.exports=Z4e})(V4e);(function(e){e.exports=sT})(W4e);var oT={},X4e={get exports(){return oT},set exports(e){oT=e}},aT={},J4e={get exports(){return aT},set exports(e){aT=e}},FR=on,Q4e=L3,eNe=Pc,tNe=ts,rNe=function(e,r,t){for(var n=Q4e(r),i=tNe.f,s=eNe.f,o=0;o<n.length;o++){var a=n[o];!FR(e,a)&&!(t&&FR(t,a))&&i(e,a,s(r,a))}},nNe=Cn,iNe=La,sNe=function(e,r){nNe(r)&&"cause"in r&&iNe(e,"cause",r.cause)},oNe=rr,IW=Error,aNe=oNe("".replace),lNe=function(e){return String(IW(e).stack)}("zxcasd"),OW=/\n\s*at [^:]*:[^\n]*/,uNe=OW.test(lNe),cNe=function(e,r){if(uNe&&typeof e=="string"&&!IW.prepareStackTrace)for(;r--;)e=aNe(e,OW,"");return e},hNe=Gt,dNe=Nc,fNe=!hNe(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",dNe(1,7)),e.stack!==7):!0}),pNe=La,vNe=cNe,gNe=fNe,jR=Error.captureStackTrace,yNe=function(e,r,t,n){gNe&&(jR?jR(e,r):pNe(e,"stack",vNe(t,n)))},mNe=ou,bNe=An,wNe=rs,_Ne=qd,$Ne=vK,xNe=ns,zR=Or,ENe=B3,SNe=tw,HR=pK,kNe=TypeError,v0=function(e,r){this.stopped=e,this.result=r},UR=v0.prototype,Mc=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=mNe(r,n),u,d,h,v,g,b,m,x=function(k){return u&&HR(u,"normal",k),new v0(!0,k)},E=function(k){return i?(wNe(k),a?l(k[0],k[1],x):l(k[0],k[1])):a?l(k,x):l(k)};if(s)u=e.iterator;else if(o)u=e;else{if(d=SNe(e),!d)throw kNe(_Ne(e)+" is not iterable");if($Ne(d)){for(h=0,v=xNe(e);v>h;h++)if(g=E(e[h]),g&&zR(UR,g))return g;return new v0(!1)}u=ENe(e,d)}for(b=s?e.next:u.next;!(m=bNe(b,u)).done;){try{g=E(m.value)}catch(k){HR(u,"throw",k)}if(typeof g=="object"&&g&&zR(UR,g))return g}return new v0(!1)},TNe=Ho,INe=function(e,r){return e===void 0?arguments.length<2?"":r:TNe(e)},ONe=lt,ANe=Or,CNe=Q1,$b=XU,PNe=rNe,AW=Rc,qx=La,Gx=Nc,NNe=sNe,RNe=yNe,DNe=Mc,BNe=INe,MNe=Ar,LNe=MNe("toStringTag"),xb=Error,FNe=[].push,Td=function(r,t){var n=ANe(Yx,this),i;$b?i=$b(xb(),n?CNe(this):Yx):(i=n?this:AW(Yx),qx(i,LNe,"Error")),t!==void 0&&qx(i,"message",BNe(t)),RNe(i,Td,i.stack,1),arguments.length>2&&NNe(i,arguments[2]);var s=[];return DNe(r,FNe,{that:s}),qx(i,"errors",s),i};$b?$b(Td,xb):PNe(Td,xb,{name:!0});var Yx=Td.prototype=AW(xb.prototype,{constructor:Gx(1,Td),message:Gx(1,""),name:Gx(1,"AggregateError")});ONe({global:!0,constructor:!0,arity:2},{AggregateError:Td});var jNe=vi,zNe=k3,HNe=Ar,UNe=mn,KR=HNe("species"),CW=function(e){var r=jNe(e);UNe&&r&&!r[KR]&&zNe(r,KR,{configurable:!0,get:function(){return this}})},KNe=Or,WNe=TypeError,Y3=function(e,r){if(KNe(r,e))return e;throw WNe("Incorrect invocation")},WR=rs,VNe=xW,qNe=Bv,GNe=Ar,YNe=GNe("species"),PW=function(e,r){var t=WR(e).constructor,n;return t===void 0||qNe(n=WR(t)[YNe])?r:VNe(n)},ZNe=su,NW=/(?:ipad|iphone|ipod).*applewebkit/i.test(ZNe),Ji=Br,XNe=Kd,JNe=ou,VR=Mr,QNe=on,RW=Gt,qR=yU,e6e=Gv,GR=b3,t6e=KK,r6e=NW,n6e=Xv,lT=Ji.setImmediate,uT=Ji.clearImmediate,i6e=Ji.process,Zx=Ji.Dispatch,s6e=Ji.Function,YR=Ji.MessageChannel,o6e=Ji.String,Xx=0,$p={},ZR="onreadystatechange",uv,Su,Jx,Qx;RW(function(){uv=Ji.location});var Z3=function(e){if(QNe($p,e)){var r=$p[e];delete $p[e],r()}},e2=function(e){return function(){Z3(e)}},XR=function(e){Z3(e.data)},JR=function(e){Ji.postMessage(o6e(e),uv.protocol+"//"+uv.host)};(!lT||!uT)&&(lT=function(r){t6e(arguments.length,1);var t=VR(r)?r:s6e(r),n=e6e(arguments,1);return $p[++Xx]=function(){XNe(t,void 0,n)},Su(Xx),Xx},uT=function(r){delete $p[r]},n6e?Su=function(e){i6e.nextTick(e2(e))}:Zx&&Zx.now?Su=function(e){Zx.now(e2(e))}:YR&&!r6e?(Jx=new YR,Qx=Jx.port2,Jx.port1.onmessage=XR,Su=JNe(Qx.postMessage,Qx)):Ji.addEventListener&&VR(Ji.postMessage)&&!Ji.importScripts&&uv&&uv.protocol!=="file:"&&!RW(JR)?(Su=JR,Ji.addEventListener("message",XR,!1)):ZR in GR("script")?Su=function(e){qR.appendChild(GR("script"))[ZR]=function(){qR.removeChild(this),Z3(e)}}:Su=function(e){setTimeout(e2(e),0)});var DW={set:lT,clear:uT},BW=function(){this.head=null,this.tail=null};BW.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var MW=BW,a6e=su,l6e=/ipad|iphone|ipod/i.test(a6e)&&typeof Pebble<"u",u6e=su,c6e=/web0s(?!.*chrome)/i.test(u6e),_c=Br,QR=ou,h6e=Pc.f,t2=DW.set,d6e=MW,f6e=NW,p6e=l6e,v6e=c6e,r2=Xv,eD=_c.MutationObserver||_c.WebKitMutationObserver,tD=_c.document,rD=_c.process,wm=_c.Promise,nD=h6e(_c,"queueMicrotask"),cT=nD&&nD.value,yh,n2,i2,_m,iD;if(!cT){var $m=new d6e,xm=function(){var e,r;for(r2&&(e=rD.domain)&&e.exit();r=$m.get();)try{r()}catch(t){throw $m.head&&yh(),t}e&&e.enter()};!f6e&&!r2&&!v6e&&eD&&tD?(n2=!0,i2=tD.createTextNode(""),new eD(xm).observe(i2,{characterData:!0}),yh=function(){i2.data=n2=!n2}):!p6e&&wm&&wm.resolve?(_m=wm.resolve(void 0),_m.constructor=wm,iD=QR(_m.then,_m),yh=function(){iD(xm)}):r2?yh=function(){rD.nextTick(xm)}:(t2=QR(t2,_c),yh=function(){t2(xm)}),cT=function(e){$m.head||yh(),$m.add(e)}}var g6e=cT,y6e=function(e,r){try{arguments.length==1?console.error(e):console.error(e,r)}catch{}},ef=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},m6e=Br,tf=m6e.Promise,LW=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",b6e=LW,w6e=Xv,_6e=!b6e&&!w6e&&typeof window=="object"&&typeof document=="object",$6e=Br,xp=tf,x6e=Mr,E6e=sU,S6e=cU,k6e=Ar,T6e=_6e,I6e=LW,s2=Wd,sD=xp&&xp.prototype,O6e=k6e("species"),hT=!1,FW=x6e($6e.PromiseRejectionEvent),A6e=E6e("Promise",function(){var e=S6e(xp),r=e!==String(xp);if(!r&&s2===66||!(sD.catch&&sD.finally))return!0;if(!s2||s2<51||!/native code/.test(e)){var t=new xp(function(s){s(1)}),n=function(s){s(function(){},function(){})},i=t.constructor={};if(i[O6e]=n,hT=t.then(function(){})instanceof n,!hT)return!0}return!r&&(T6e||I6e)&&!FW}),ig={CONSTRUCTOR:A6e,REJECTION_EVENT:FW,SUBCLASSING:hT},ja={},oD=Ri,C6e=TypeError,P6e=function(e){var r,t;this.promise=new e(function(n,i){if(r!==void 0||t!==void 0)throw C6e("Bad Promise constructor");r=n,t=i}),this.resolve=oD(r),this.reject=oD(t)};ja.f=function(e){return new P6e(e)};var N6e=lt,Eb=Xv,Zl=Br,sg=An,R6e=Yd,D6e=Dc,B6e=CW,M6e=Ri,dT=Mr,L6e=Cn,F6e=Y3,j6e=PW,jW=DW.set,X3=g6e,z6e=y6e,H6e=ef,U6e=MW,zW=Zd,fT=tf,HW=ig,UW=ja,aw="Promise",KW=HW.CONSTRUCTOR,K6e=HW.REJECTION_EVENT,o2=zW.getterFor(aw),W6e=zW.set,V6e=fT&&fT.prototype,Bh=fT,a2=V6e,WW=Zl.TypeError,pT=Zl.document,J3=Zl.process,vT=UW.f,q6e=vT,G6e=!!(pT&&pT.createEvent&&Zl.dispatchEvent),VW="unhandledrejection",Y6e="rejectionhandled",aD=0,qW=1,Z6e=2,Q3=1,GW=2,Em,lD,X6e,YW=function(e){var r;return L6e(e)&&dT(r=e.then)?r:!1},ZW=function(e,r){var t=r.value,n=r.state==qW,i=n?e.ok:e.fail,s=e.resolve,o=e.reject,a=e.domain,l,u,d;try{i?(n||(r.rejection===GW&&Q6e(r),r.rejection=Q3),i===!0?l=t:(a&&a.enter(),l=i(t),a&&(a.exit(),d=!0)),l===e.promise?o(WW("Promise-chain cycle")):(u=YW(l))?sg(u,l,s,o):s(l)):o(t)}catch(h){a&&!d&&a.exit(),o(h)}},XW=function(e,r){e.notified||(e.notified=!0,X3(function(){for(var t=e.reactions,n;n=t.get();)ZW(n,e);e.notified=!1,r&&!e.rejection&&J6e(e)}))},JW=function(e,r,t){var n,i;G6e?(n=pT.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Zl.dispatchEvent(n)):n={promise:r,reason:t},!K6e&&(i=Zl["on"+e])?i(n):e===VW&&z6e("Unhandled promise rejection",t)},J6e=function(e){sg(jW,Zl,function(){var r=e.facade,t=e.value,n=uD(e),i;if(n&&(i=H6e(function(){Eb?J3.emit("unhandledRejection",t,r):JW(VW,r,t)}),e.rejection=Eb||uD(e)?GW:Q3,i.error))throw i.value})},uD=function(e){return e.rejection!==Q3&&!e.parent},Q6e=function(e){sg(jW,Zl,function(){var r=e.facade;Eb?J3.emit("rejectionHandled",r):JW(Y6e,r,e.value)})},Mh=function(e,r,t){return function(n){e(r,n,t)}},td=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=Z6e,XW(e,!0))},gT=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw WW("Promise can't be resolved itself");var n=YW(r);n?X3(function(){var i={done:!1};try{sg(n,r,Mh(gT,i,e),Mh(td,i,e))}catch(s){td(i,s,e)}}):(e.value=r,e.state=qW,XW(e,!1))}catch(i){td({done:!1},i,e)}}};KW&&(Bh=function(r){F6e(this,a2),M6e(r),sg(Em,this);var t=o2(this);try{r(Mh(gT,t),Mh(td,t))}catch(n){td(t,n)}},a2=Bh.prototype,Em=function(r){W6e(this,{type:aw,done:!1,notified:!1,parent:!1,reactions:new U6e,rejection:!1,state:aD,value:void 0})},Em.prototype=R6e(a2,"then",function(r,t){var n=o2(this),i=vT(j6e(this,Bh));return n.parent=!0,i.ok=dT(r)?r:!0,i.fail=dT(t)&&t,i.domain=Eb?J3.domain:void 0,n.state==aD?n.reactions.add(i):X3(function(){ZW(i,n)}),i.promise}),lD=function(){var e=new Em,r=o2(e);this.promise=e,this.resolve=Mh(gT,r),this.reject=Mh(td,r)},UW.f=vT=function(e){return e===Bh||e===X6e?new lD(e):q6e(e)});N6e({global:!0,constructor:!0,wrap:!0,forced:KW},{Promise:Bh});D6e(Bh,aw,!1,!0);B6e(aw);var e8e=tf,t8e=mK,r8e=ig.CONSTRUCTOR,lw=r8e||!t8e(function(e){e8e.all(e).then(void 0,function(){})}),n8e=lt,i8e=An,s8e=Ri,o8e=ja,a8e=ef,l8e=Mc,u8e=lw;n8e({target:"Promise",stat:!0,forced:u8e},{all:function(r){var t=this,n=o8e.f(t),i=n.resolve,s=n.reject,o=a8e(function(){var a=s8e(t.resolve),l=[],u=0,d=1;l8e(r,function(h){var v=u++,g=!1;d++,i8e(a,t,h).then(function(b){g||(g=!0,l[v]=b,--d||i(l))},s)}),--d||i(l)});return o.error&&s(o.value),n.promise}});var c8e=lt,h8e=ig.CONSTRUCTOR,cD=tf;cD&&cD.prototype;c8e({target:"Promise",proto:!0,forced:h8e,real:!0},{catch:function(e){return this.then(void 0,e)}});var d8e=lt,f8e=An,p8e=Ri,v8e=ja,g8e=ef,y8e=Mc,m8e=lw;d8e({target:"Promise",stat:!0,forced:m8e},{race:function(r){var t=this,n=v8e.f(t),i=n.reject,s=g8e(function(){var o=p8e(t.resolve);y8e(r,function(a){f8e(o,t,a).then(n.resolve,i)})});return s.error&&i(s.value),n.promise}});var b8e=lt,w8e=An,_8e=ja,$8e=ig.CONSTRUCTOR;b8e({target:"Promise",stat:!0,forced:$8e},{reject:function(r){var t=_8e.f(this);return w8e(t.reject,void 0,r),t.promise}});var x8e=rs,E8e=Cn,S8e=ja,QW=function(e,r){if(x8e(e),E8e(r)&&r.constructor===e)return r;var t=S8e.f(e),n=t.resolve;return n(r),t.promise},k8e=lt,T8e=vi,I8e=jbe,O8e=tf,A8e=ig.CONSTRUCTOR,C8e=QW,P8e=T8e("Promise"),N8e=!A8e;k8e({target:"Promise",stat:!0,forced:I8e},{resolve:function(r){return C8e(N8e&&this===P8e?O8e:this,r)}});var R8e=lt,D8e=An,B8e=Ri,M8e=ja,L8e=ef,F8e=Mc,j8e=lw;R8e({target:"Promise",stat:!0,forced:j8e},{allSettled:function(r){var t=this,n=M8e.f(t),i=n.resolve,s=n.reject,o=L8e(function(){var a=B8e(t.resolve),l=[],u=0,d=1;F8e(r,function(h){var v=u++,g=!1;d++,D8e(a,t,h).then(function(b){g||(g=!0,l[v]={status:"fulfilled",value:b},--d||i(l))},function(b){g||(g=!0,l[v]={status:"rejected",reason:b},--d||i(l))})}),--d||i(l)});return o.error&&s(o.value),n.promise}});var z8e=lt,H8e=An,U8e=Ri,K8e=vi,W8e=ja,V8e=ef,q8e=Mc,G8e=lw,hD="No one promise resolved";z8e({target:"Promise",stat:!0,forced:G8e},{any:function(r){var t=this,n=K8e("AggregateError"),i=W8e.f(t),s=i.resolve,o=i.reject,a=V8e(function(){var l=U8e(t.resolve),u=[],d=0,h=1,v=!1;q8e(r,function(g){var b=d++,m=!1;h++,H8e(l,t,g).then(function(x){m||v||(v=!0,s(x))},function(x){m||v||(m=!0,u[b]=x,--h||o(new n(u,hD)))})}),--h||o(new n(u,hD))});return a.error&&o(a.value),i.promise}});var Y8e=lt,yT=tf,Z8e=Gt,X8e=vi,J8e=Mr,Q8e=PW,dD=QW,eRe=yT&&yT.prototype,tRe=!!yT&&Z8e(function(){eRe.finally.call({then:function(){}},function(){})});Y8e({target:"Promise",proto:!0,real:!0,forced:tRe},{finally:function(e){var r=Q8e(this,X8e("Promise")),t=J8e(e);return this.then(t?function(n){return dD(r,e()).then(function(){return n})}:e,t?function(n){return dD(r,e()).then(function(){throw n})}:e)}});var rRe=pr,nRe=rRe.Promise,iRe=nRe,sRe=iRe,oRe=sRe,aRe=oRe,lRe=lt,uRe=ja,cRe=ef;lRe({target:"Promise",stat:!0,forced:!0},{try:function(e){var r=uRe.f(this),t=cRe(e);return(t.error?r.reject:r.resolve)(t.value),r.promise}});var hRe=aRe,dRe=hRe;(function(e){e.exports=dRe})(J4e);(function(e){e.exports=aT})(X4e);var mT={},fRe={get exports(){return mT},set exports(e){mT=e}},bT={},pRe={get exports(){return bT},set exports(e){bT=e}},vRe=NK,gRe=vRe,yRe=gRe,mRe=yRe;(function(e){e.exports=mRe})(pRe);(function(e){e.exports=bT})(fRe);(function(e){var r=nT.default,t=ab,n=ev,i=mb,s=wb,o=iT,a=bb,l=oT,u=mT,d=fb;function h(){e.exports=h=function(){return v},e.exports.__esModule=!0,e.exports.default=e.exports;var v={},g=Object.prototype,b=g.hasOwnProperty,m=t||function(ge,ce,ye){ge[ce]=ye.value},x=typeof n=="function"?n:{},E=x.iterator||"@@iterator",k=x.asyncIterator||"@@asyncIterator",$=x.toStringTag||"@@toStringTag";function S(ge,ce,ye){return t(ge,ce,{value:ye,enumerable:!0,configurable:!0,writable:!0}),ge[ce]}try{S({},"")}catch{S=function(ye,fe,y){return ye[fe]=y}}function T(ge,ce,ye,fe){var y=ce&&ce.prototype instanceof P?ce:P,w=i(y.prototype),A=new Te(fe||[]);return m(w,"_invoke",{value:Q(ge,ye,A)}),w}function O(ge,ce,ye){try{return{type:"normal",arg:ge.call(ce,ye)}}catch(fe){return{type:"throw",arg:fe}}}v.wrap=T;var I={};function P(){}function R(){}function D(){}var F={};S(F,E,function(){return this});var K=s,q=K&&K(K(Ce([])));q&&q!==g&&b.call(q,E)&&(F=q);var W=D.prototype=P.prototype=i(F);function M(ge){var ce;o(ce=["next","throw","return"]).call(ce,function(ye){S(ge,ye,function(fe){return this._invoke(ye,fe)})})}function G(ge,ce){function ye(y,w,A,N){var B=O(ge[y],ge,w);if(B.type!=="throw"){var j=B.arg,X=j.value;return X&&r(X)=="object"&&b.call(X,"__await")?ce.resolve(X.__await).then(function(re){ye("next",re,A,N)},function(re){ye("throw",re,A,N)}):ce.resolve(X).then(function(re){j.value=re,A(j)},function(re){return ye("throw",re,A,N)})}N(B.arg)}var fe;m(this,"_invoke",{value:function(w,A){function N(){return new ce(function(B,j){ye(w,A,B,j)})}return fe=fe?fe.then(N,N):N()}})}function Q(ge,ce,ye){var fe="suspendedStart";return function(y,w){if(fe==="executing")throw new Error("Generator is already running");if(fe==="completed"){if(y==="throw")throw w;return Ye()}for(ye.method=y,ye.arg=w;;){var A=ye.delegate;if(A){var N=he(A,ye);if(N){if(N===I)continue;return N}}if(ye.method==="next")ye.sent=ye._sent=ye.arg;else if(ye.method==="throw"){if(fe==="suspendedStart")throw fe="completed",ye.arg;ye.dispatchException(ye.arg)}else ye.method==="return"&&ye.abrupt("return",ye.arg);fe="executing";var B=O(ge,ce,ye);if(B.type==="normal"){if(fe=ye.done?"completed":"suspendedYield",B.arg===I)continue;return{value:B.arg,done:ye.done}}B.type==="throw"&&(fe="completed",ye.method="throw",ye.arg=B.arg)}}}function he(ge,ce){var ye=ce.method,fe=ge.iterator[ye];if(fe===void 0)return ce.delegate=null,ye==="throw"&&ge.iterator.return&&(ce.method="return",ce.arg=void 0,he(ge,ce),ce.method==="throw")||ye!=="return"&&(ce.method="throw",ce.arg=new TypeError("The iterator does not provide a '"+ye+"' method")),I;var y=O(fe,ge.iterator,ce.arg);if(y.type==="throw")return ce.method="throw",ce.arg=y.arg,ce.delegate=null,I;var w=y.arg;return w?w.done?(ce[ge.resultName]=w.value,ce.next=ge.nextLoc,ce.method!=="return"&&(ce.method="next",ce.arg=void 0),ce.delegate=null,I):w:(ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,I)}function ue(ge){var ce={tryLoc:ge[0]};1 in ge&&(ce.catchLoc=ge[1]),2 in ge&&(ce.finallyLoc=ge[2],ce.afterLoc=ge[3]),this.tryEntries.push(ce)}function ke(ge){var ce=ge.completion||{};ce.type="normal",delete ce.arg,ge.completion=ce}function Te(ge){this.tryEntries=[{tryLoc:"root"}],o(ge).call(ge,ue,this),this.reset(!0)}function Ce(ge){if(ge){var ce=ge[E];if(ce)return ce.call(ge);if(typeof ge.next=="function")return ge;if(!isNaN(ge.length)){var ye=-1,fe=function y(){for(;++ye<ge.length;)if(b.call(ge,ye))return y.value=ge[ye],y.done=!1,y;return y.value=void 0,y.done=!0,y};return fe.next=fe}}return{next:Ye}}function Ye(){return{value:void 0,done:!0}}return R.prototype=D,m(W,"constructor",{value:D,configurable:!0}),m(D,"constructor",{value:R,configurable:!0}),R.displayName=S(D,$,"GeneratorFunction"),v.isGeneratorFunction=function(ge){var ce=typeof ge=="function"&&ge.constructor;return!!ce&&(ce===R||(ce.displayName||ce.name)==="GeneratorFunction")},v.mark=function(ge){return a?a(ge,D):(ge.__proto__=D,S(ge,$,"GeneratorFunction")),ge.prototype=i(W),ge},v.awrap=function(ge){return{__await:ge}},M(G.prototype),S(G.prototype,k,function(){return this}),v.AsyncIterator=G,v.async=function(ge,ce,ye,fe,y){y===void 0&&(y=l);var w=new G(T(ge,ce,ye,fe),y);return v.isGeneratorFunction(ce)?w:w.next().then(function(A){return A.done?A.value:w.next()})},M(W),S(W,$,"Generator"),S(W,E,function(){return this}),S(W,"toString",function(){return"[object Generator]"}),v.keys=function(ge){var ce=Object(ge),ye=[];for(var fe in ce)ye.push(fe);return u(ye).call(ye),function y(){for(;ye.length;){var w=ye.pop();if(w in ce)return y.value=w,y.done=!1,y}return y.done=!0,y}},v.values=Ce,Te.prototype={constructor:Te,reset:function(ce){var ye;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(ye=this.tryEntries).call(ye,ke),!ce)for(var fe in this)fe.charAt(0)==="t"&&b.call(this,fe)&&!isNaN(+d(fe).call(fe,1))&&(this[fe]=void 0)},stop:function(){this.done=!0;var ce=this.tryEntries[0].completion;if(ce.type==="throw")throw ce.arg;return this.rval},dispatchException:function(ce){if(this.done)throw ce;var ye=this;function fe(j,X){return A.type="throw",A.arg=ce,ye.next=j,X&&(ye.method="next",ye.arg=void 0),!!X}for(var y=this.tryEntries.length-1;y>=0;--y){var w=this.tryEntries[y],A=w.completion;if(w.tryLoc==="root")return fe("end");if(w.tryLoc<=this.prev){var N=b.call(w,"catchLoc"),B=b.call(w,"finallyLoc");if(N&&B){if(this.prev<w.catchLoc)return fe(w.catchLoc,!0);if(this.prev<w.finallyLoc)return fe(w.finallyLoc)}else if(N){if(this.prev<w.catchLoc)return fe(w.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<w.finallyLoc)return fe(w.finallyLoc)}}}},abrupt:function(ce,ye){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var y=this.tryEntries[fe];if(y.tryLoc<=this.prev&&b.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var w=y;break}}w&&(ce==="break"||ce==="continue")&&w.tryLoc<=ye&&ye<=w.finallyLoc&&(w=null);var A=w?w.completion:{};return A.type=ce,A.arg=ye,w?(this.method="next",this.next=w.finallyLoc,I):this.complete(A)},complete:function(ce,ye){if(ce.type==="throw")throw ce.arg;return ce.type==="break"||ce.type==="continue"?this.next=ce.arg:ce.type==="return"?(this.rval=this.arg=ce.arg,this.method="return",this.next="end"):ce.type==="normal"&&ye&&(this.next=ye),I},finish:function(ce){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var fe=this.tryEntries[ye];if(fe.finallyLoc===ce)return this.complete(fe.completion,fe.afterLoc),ke(fe),I}},catch:function(ce){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var fe=this.tryEntries[ye];if(fe.tryLoc===ce){var y=fe.completion;if(y.type==="throw"){var w=y.arg;ke(fe)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(ce,ye,fe){return this.delegate={iterator:Ce(ce),resultName:ye,nextLoc:fe},this.method==="next"&&(this.arg=void 0),I}},v}e.exports=h,e.exports.__esModule=!0,e.exports.default=e.exports})(U4e);var g0=rT(),xi=g0;try{regeneratorRuntime=g0}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=g0:Function("r","regeneratorRuntime = r")(g0)}var wT={},bRe={get exports(){return wT},set exports(e){wT=e}},Sb={},wRe={get exports(){return Sb},set exports(e){Sb=e}},_Re=Gt,$Re=_Re(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),xRe=Gt,ERe=Cn,SRe=Ma,fD=$Re,y0=Object.isExtensible,kRe=xRe(function(){y0(1)}),TRe=kRe||fD?function(r){return!ERe(r)||fD&&SRe(r)=="ArrayBuffer"?!1:y0?y0(r):!0}:y0,IRe=Gt,ORe=!IRe(function(){return Object.isExtensible(Object.preventExtensions({}))}),ARe=lt,CRe=rr,PRe=Hv,NRe=Cn,eA=on,RRe=ts.f,pD=Kv,DRe=S3,tA=TRe,BRe=j1,MRe=ORe,eV=!1,Aa=BRe("meta"),LRe=0,rA=function(e){RRe(e,Aa,{value:{objectID:"O"+LRe++,weakData:{}}})},FRe=function(e,r){if(!NRe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!eA(e,Aa)){if(!tA(e))return"F";if(!r)return"E";rA(e)}return e[Aa].objectID},jRe=function(e,r){if(!eA(e,Aa)){if(!tA(e))return!0;if(!r)return!1;rA(e)}return e[Aa].weakData},zRe=function(e){return MRe&&eV&&tA(e)&&!eA(e,Aa)&&rA(e),e},HRe=function(){URe.enable=function(){},eV=!0;var e=pD.f,r=CRe([].splice),t={};t[Aa]=1,e(t).length&&(pD.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===Aa){r(i,s,1);break}return i},ARe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:DRe.f}))},URe=wRe.exports={enable:HRe,fastKey:FRe,getWeakData:jRe,onFreeze:zRe};PRe[Aa]=!0;var KRe=lt,WRe=Br,VRe=Sb,qRe=Gt,GRe=La,YRe=Mc,ZRe=Y3,XRe=Mr,JRe=Cn,QRe=Dc,eDe=ts.f,tDe=Xd.forEach,rDe=mn,tV=Zd,nDe=tV.set,iDe=tV.getterFor,rV=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=WRe[e],a=o&&o.prototype,l={},u;if(!rDe||!XRe(o)||!(i||a.forEach&&!qRe(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),VRe.enable();else{u=r(function(v,g){nDe(ZRe(v,d),{type:e,collection:new o}),g!=null&&YRe(g,v[s],{that:v,AS_ENTRIES:n})});var d=u.prototype,h=iDe(e);tDe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(v){var g=v=="add"||v=="set";v in a&&!(i&&v=="clear")&&GRe(d,v,function(b,m){var x=h(this).collection;if(!g&&i&&!JRe(b))return v=="get"?void 0:!1;var E=x[v](b===0?0:b,m);return g?this:E})}),i||eDe(d,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return QRe(u,e,!1,!0),l[e]=u,KRe({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},sDe=Yd,oDe=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:sDe(e,n,r[n],t);return e},aDe=Rc,lDe=k3,vD=oDe,uDe=ou,cDe=Y3,hDe=Bv,dDe=Mc,fDe=N3,Sm=R3,pDe=CW,Uf=mn,gD=Sb.fastKey,nV=Zd,yD=nV.set,l2=nV.getterFor,iV={getConstructor:function(e,r,t,n){var i=e(function(u,d){cDe(u,s),yD(u,{type:r,index:aDe(null),first:void 0,last:void 0,size:0}),Uf||(u.size=0),hDe(d)||dDe(d,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=l2(r),a=function(u,d,h){var v=o(u),g=l(u,d),b,m;return g?g.value=h:(v.last=g={index:m=gD(d,!0),key:d,value:h,previous:b=v.last,next:void 0,removed:!1},v.first||(v.first=g),b&&(b.next=g),Uf?v.size++:u.size++,m!=="F"&&(v.index[m]=g)),u},l=function(u,d){var h=o(u),v=gD(d),g;if(v!=="F")return h.index[v];for(g=h.first;g;g=g.next)if(g.key==d)return g};return vD(s,{clear:function(){for(var d=this,h=o(d),v=h.index,g=h.first;g;)g.removed=!0,g.previous&&(g.previous=g.previous.next=void 0),delete v[g.index],g=g.next;h.first=h.last=void 0,Uf?h.size=0:d.size=0},delete:function(u){var d=this,h=o(d),v=l(d,u);if(v){var g=v.next,b=v.previous;delete h.index[v.index],v.removed=!0,b&&(b.next=g),g&&(g.previous=b),h.first==v&&(h.first=g),h.last==v&&(h.last=b),Uf?h.size--:d.size--}return!!v},forEach:function(d){for(var h=o(this),v=uDe(d,arguments.length>1?arguments[1]:void 0),g;g=g?g.next:h.first;)for(v(g.value,g.key,this);g&&g.removed;)g=g.previous},has:function(d){return!!l(this,d)}}),vD(s,t?{get:function(d){var h=l(this,d);return h&&h.value},set:function(d,h){return a(this,d===0?0:d,h)}}:{add:function(d){return a(this,d=d===0?0:d,d)}}),Uf&&lDe(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=l2(r),s=l2(n);fDe(e,r,function(o,a){yD(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,Sm(void 0,!0)):a=="keys"?Sm(l.key,!1):a=="values"?Sm(l.value,!1):Sm([l.key,l.value],!1)},t?"entries":"values",!t,!0),pDe(r)}},vDe=rV,gDe=iV;vDe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},gDe);var yDe=pr,mDe=yDe.Map,bDe=mDe,wDe=bDe;(function(e){e.exports=wDe})(bRe);var sV=_t(wT),_T={},_De={get exports(){return _T},set exports(e){_T=e}},$De=lt,xDe=Xd.some,EDe=Zv,SDe=EDe("some");$De({target:"Array",proto:!0,forced:!SDe},{some:function(r){return xDe(this,r,arguments.length>1?arguments[1]:void 0)}});var kDe=an,TDe=kDe("Array").some,IDe=Or,ODe=TDe,u2=Array.prototype,ADe=function(e){var r=e.some;return e===u2||IDe(u2,e)&&r===u2.some?ODe:r},CDe=ADe,PDe=CDe;(function(e){e.exports=PDe})(_De);var NDe=_t(_T),$T={},RDe={get exports(){return $T},set exports(e){$T=e}},DDe=an,BDe=DDe("Array").keys,MDe=BDe,LDe=MDe,FDe=Fa,jDe=on,zDe=Or,HDe=LDe,c2=Array.prototype,UDe={DOMTokenList:!0,NodeList:!0},KDe=function(e){var r=e.keys;return e===c2||zDe(c2,e)&&r===c2.keys||jDe(UDe,FDe(e))?HDe:r};(function(e){e.exports=KDe})(RDe);var mh=_t($T),xT={},WDe={get exports(){return xT},set exports(e){xT=e}},mD=wU,VDe=Math.floor,ET=function(e,r){var t=e.length,n=VDe(t/2);return t<8?qDe(e,r):GDe(e,ET(mD(e,0,n),r),ET(mD(e,n),r),r)},qDe=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},GDe=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},YDe=ET,ZDe=su,bD=ZDe.match(/firefox\/(\d+)/i),XDe=!!bD&&+bD[1],JDe=su,QDe=/MSIE|Trident/.test(JDe),eBe=su,wD=eBe.match(/AppleWebKit\/(\d+)\./),tBe=!!wD&&+wD[1],rBe=lt,oV=rr,nBe=Ri,iBe=Di,_D=ns,sBe=RK,$D=Ho,nA=Gt,oBe=YDe,aBe=Zv,xD=XDe,lBe=QDe,ED=Wd,SD=tBe,Pl=[],kD=oV(Pl.sort),uBe=oV(Pl.push),cBe=nA(function(){Pl.sort(void 0)}),hBe=nA(function(){Pl.sort(null)}),dBe=aBe("sort"),aV=!nA(function(){if(ED)return ED<70;if(!(xD&&xD>3)){if(lBe)return!0;if(SD)return SD<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Pl.push({k:t+i,v:n})}for(Pl.sort(function(s,o){return o.v-s.v}),i=0;i<Pl.length;i++)t=Pl[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),fBe=cBe||!hBe||!dBe||!aV,pBe=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:$D(r)>$D(t)?1:-1}};rBe({target:"Array",proto:!0,forced:fBe},{sort:function(r){r!==void 0&&nBe(r);var t=iBe(this);if(aV)return r===void 0?kD(t):kD(t,r);var n=[],i=_D(t),s,o;for(o=0;o<i;o++)o in t&&uBe(n,t[o]);for(oBe(n,pBe(r)),s=_D(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)sBe(t,o++);return t}});var vBe=an,gBe=vBe("Array").sort,yBe=Or,mBe=gBe,h2=Array.prototype,bBe=function(e){var r=e.sort;return e===h2||yBe(h2,e)&&r===h2.sort?mBe:r},wBe=bBe,_Be=wBe;(function(e){e.exports=_Be})(WDe);var ST=_t(xT),kT={},$Be={get exports(){return kT},set exports(e){kT=e}},xBe=an,EBe=xBe("Array").values,SBe=EBe,kBe=SBe,TBe=Fa,IBe=on,OBe=Or,ABe=kBe,d2=Array.prototype,CBe={DOMTokenList:!0,NodeList:!0},PBe=function(e){var r=e.values;return e===d2||OBe(d2,e)&&r===d2.values||IBe(CBe,TBe(e))?ABe:r};(function(e){e.exports=PBe})($Be);var TD=_t(kT),TT={},NBe={get exports(){return TT},set exports(e){TT=e}};(function(e){e.exports=oK})(NBe);var rd=_t(TT),IT={},RBe={get exports(){return IT},set exports(e){IT=e}},DBe=an,BBe=DBe("Array").entries,MBe=BBe,LBe=MBe,FBe=Fa,jBe=on,zBe=Or,HBe=LBe,f2=Array.prototype,UBe={DOMTokenList:!0,NodeList:!0},KBe=function(e){var r=e.entries;return e===f2||zBe(f2,e)&&r===f2.entries||jBe(UBe,FBe(e))?HBe:r};(function(e){e.exports=KBe})(RBe);var WBe=_t(IT);let km;const VBe=new Uint8Array(16);function qBe(){if(!km&&(km=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!km))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return km(VBe)}const Ln=[];for(let e=0;e<256;++e)Ln.push((e+256).toString(16).slice(1));function GBe(e,r=0){return(Ln[e[r+0]]+Ln[e[r+1]]+Ln[e[r+2]]+Ln[e[r+3]]+"-"+Ln[e[r+4]]+Ln[e[r+5]]+"-"+Ln[e[r+6]]+Ln[e[r+7]]+"-"+Ln[e[r+8]]+Ln[e[r+9]]+"-"+Ln[e[r+10]]+Ln[e[r+11]]+Ln[e[r+12]]+Ln[e[r+13]]+Ln[e[r+14]]+Ln[e[r+15]]).toLowerCase()}const YBe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var ID={randomUUID:YBe};function ZBe(e,r,t){if(ID.randomUUID&&!r&&!e)return ID.randomUUID();e=e||{};const n=e.random||(e.rng||qBe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return GBe(n)}function OD(e){return typeof e=="string"||typeof e=="number"}var XBe=function(){function e(r){L1(this,e),Hr(this,"delay",void 0),Hr(this,"max",void 0),Hr(this,"_queue",[]),Hr(this,"_timeout",null),Hr(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(r)}return ew(e,[{key:"setOptions",value:function(t){t&&typeof t.delay<"u"&&(this.delay=t.delay),t&&typeof t.max<"u"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,n=this._extended.methods,i=0;i<n.length;i++){var s=n[i];s.original?t[s.name]=s.original:delete t[s.name]}this._extended=null}}},{key:"replace",value:function(t,n){var i=this,s=t[n];if(!s)throw new Error("Method "+n+" undefined");t[n]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=zCe(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,n;yc(t=DK(n=this._queue).call(n,0)).call(t,function(i){i.fn.apply(i.context||i.fn,i.args||[])})}}],[{key:"extend",value:function(t,n){var i=new e(n);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var s=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];s.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:s},i}}]),e}(),JBe=function(){function e(){L1(this,e),Hr(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Hr(this,"subscribe",e.prototype.on),Hr(this,"unsubscribe",e.prototype.off)}return ew(e,[{key:"_trigger",value:function(t,n,i){var s,o;if(t==="*")throw new Error("Cannot trigger event *");yc(s=nw(o=[]).call(o,Ti(this._subscribers[t]),Ti(this._subscribers["*"]))).call(s,function(a){a(t,n,i??null)})}},{key:"on",value:function(t,n){typeof n=="function"&&this._subscribers[t].push(n)}},{key:"off",value:function(t,n){var i;this._subscribers[t]=Nh(i=this._subscribers[t]).call(i,function(s){return s!==n})}}]),e}(),OT={},QBe={get exports(){return OT},set exports(e){OT=e}},e7e=rV,t7e=iV;e7e("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},t7e);var r7e=pr,n7e=r7e.Set,i7e=n7e,s7e=i7e;(function(e){e.exports=s7e})(QBe);var p2=_t(OT),AT={},o7e={get exports(){return AT},set exports(e){AT=e}},CT={},a7e={get exports(){return CT},set exports(e){CT=e}},l7e=B3,u7e=l7e,c7e=u7e,h7e=c7e,d7e=h7e,f7e=d7e,p7e=f7e,v7e=p7e;(function(e){e.exports=v7e})(a7e);(function(e){e.exports=CT})(o7e);var v2=_t(AT),lV;function xo(e,r){var t=typeof rw<"u"&&Jv(e)||e["@@iterator"];if(!t){if(Vi(e)||(t=g7e(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function g7e(e,r){var t;if(e){if(typeof e=="string")return AD(e,r);var n=iw(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return M3(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AD(e,r)}}function AD(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}lV=rd;var CD=function(){function e(r){L1(this,e),Hr(this,"_pairs",void 0),this._pairs=r}return ew(e,[{key:lV,value:xi.mark(function r(){var t,n,i,s,o;return xi.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=xo(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=_i(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:xi.mark(function r(){var t,n,i,s,o;return xi.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=xo(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=_i(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:xi.mark(function r(){var t,n,i,s;return xi.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=xo(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=_i(n.value,1),s=i[0],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:xi.mark(function r(){var t,n,i,s;return xi.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=xo(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=_i(n.value,2),s=i[1],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return Us(t=Ti(this._pairs)).call(t,function(n){return n[0]})}},{key:"toItemArray",value:function(){var t;return Us(t=Ti(this._pairs)).call(t,function(n){return n[1]})}},{key:"toEntryArray",value:function(){return Ti(this._pairs)}},{key:"toObjectMap",value:function(){var t=yCe(null),n=xo(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=_i(i.value,2),o=s[0],a=s[1];t[o]=a}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"toMap",value:function(){return new sV(this._pairs)}},{key:"toIdSet",value:function(){return new p2(this.toIdArray())}},{key:"toItemSet",value:function(){return new p2(this.toItemArray())}},{key:"cache",value:function(){return new e(Ti(this._pairs))}},{key:"distinct",value:function(t){var n=new p2,i=xo(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=_i(s.value,2),a=o[0],l=o[1];n.add(t(l,a))}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e(Hr({},rd,xi.mark(function i(){var s,o,a,l,u;return xi.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:s=xo(n),h.prev=1,s.s();case 3:if((o=s.n()).done){h.next=10;break}if(a=_i(o.value,2),l=a[0],u=a[1],!t(u,l)){h.next=8;break}return h.next=8,[l,u];case 8:h.next=3;break;case 10:h.next=15;break;case 12:h.prev=12,h.t0=h.catch(1),s.e(h.t0);case 15:return h.prev=15,s.f(),h.finish(15);case 18:case"end":return h.stop()}},i,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var n=xo(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=_i(i.value,2),o=s[0],a=s[1];t(a,o)}}catch(l){n.e(l)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e(Hr({},rd,xi.mark(function i(){var s,o,a,l,u;return xi.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:s=xo(n),h.prev=1,s.s();case 3:if((o=s.n()).done){h.next=9;break}return a=_i(o.value,2),l=a[0],u=a[1],h.next=7,[l,t(u,l)];case 7:h.next=3;break;case 9:h.next=14;break;case 11:h.prev=11,h.t0=h.catch(1),s.e(h.t0);case 14:return h.prev=14,s.f(),h.finish(14);case 17:case"end":return h.stop()}},i,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var n=v2(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=_i(i.value,2),l=a[0],u=a[1],d=t(u,l);d>o&&(o=d,s=u)}return s}},{key:"min",value:function(t){var n=v2(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=_i(i.value,2),l=a[0],u=a[1],d=t(u,l);d<o&&(o=d,s=u)}return s}},{key:"reduce",value:function(t,n){var i=xo(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=_i(s.value,2),a=o[0],l=o[1];n=t(n,l,a)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"sort",value:function(t){var n=this;return new e(Hr({},rd,function(){var i;return v2(ST(i=Ti(n._pairs)).call(i,function(s,o){var a=_i(s,2),l=a[0],u=a[1],d=_i(o,2),h=d[0],v=d[1];return t(u,v,l,h)}))}))}}]),e}();function PD(e,r){var t=F3(e);if(W8){var n=W8(e);r&&(n=Nh(n).call(n,function(i){return xK(e,i).enumerable})),t.push.apply(t,n)}return t}function ND(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?yc(t=PD(Object(i),!0)).call(t,function(s){Hr(e,s,i[s])}):V8?$5e(e,V8(i)):yc(n=PD(Object(i))).call(n,function(s){E5e(e,s,xK(i,s))})}return e}function g2(e,r){var t=typeof rw<"u"&&Jv(e)||e["@@iterator"];if(!t){if(Vi(e)||(t=y7e(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function y7e(e,r){var t;if(e){if(typeof e=="string")return RD(e,r);var n=iw(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return M3(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RD(e,r)}}function RD(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function m7e(e){var r=b7e();return function(){var n=_b(e),i;if(r){var s=_b(this).constructor;i=p0(n,arguments,s)}else i=n.apply(this,arguments);return B4e(this,i)}}function b7e(){if(typeof Reflect>"u"||!p0||p0.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(p0(Boolean,[],function(){})),!0}catch{return!1}}function w7e(e,r){return e[r]==null&&(e[r]=ZBe()),e}var Zs=function(e){D4e(t,e);var r=m7e(t);function t(n,i){var s;return L1(this,t),s=r.call(this),Hr(Tu(s),"flush",void 0),Hr(Tu(s),"length",void 0),Hr(Tu(s),"_options",void 0),Hr(Tu(s),"_data",void 0),Hr(Tu(s),"_idProp",void 0),Hr(Tu(s),"_queue",null),n&&!Vi(n)&&(i=n,n=[]),s._options=i||{},s._data=new sV,s.length=0,s._idProp=s._options.fieldId||"id",n&&n.length&&s.add(n),s.setOptions(i),s}return ew(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=XBe.extend(this,{replace:["add","update","remove"]})),i.queue&&Un(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,s){var o=this,a=[],l;if(Vi(i)){var u=Us(i).call(i,function(v){return v[o._idProp]});if(NDe(u).call(u,function(v){return o._data.has(v)}))throw new Error("A duplicate id was found in the parameter array.");for(var d=0,h=i.length;d<h;d++)l=this._addItem(i[d]),a.push(l)}else if(i&&Un(i)==="object")l=this._addItem(i),a.push(l);else throw new Error("Unknown dataType");return a.length&&this._trigger("add",{items:a},s),a}},{key:"update",value:function(i,s){var o=this,a=[],l=[],u=[],d=[],h=this._idProp,v=function(E){var k=E[h];if(k!=null&&o._data.has(k)){var $=E,S=y3e({},o._data.get(k)),T=o._updateItem($);l.push(T),d.push($),u.push(S)}else{var O=o._addItem(E);a.push(O)}};if(Vi(i))for(var g=0,b=i.length;g<b;g++)i[g]&&Un(i[g])==="object"?v(i[g]):console.warn("Ignoring input item, which is not an object at index "+g);else if(i&&Un(i)==="object")v(i);else throw new Error("Unknown dataType");if(a.length&&this._trigger("add",{items:a},s),l.length){var m={items:l,oldData:u,data:d};this._trigger("update",m,s)}return nw(a).call(a,l)}},{key:"updateOnly",value:function(i,s){var o,a=this;Vi(i)||(i=[i]);var l=Us(o=Us(i).call(i,function(d){var h=a._data.get(d[a._idProp]);if(h==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:h,update:d}})).call(o,function(d){var h=d.oldData,v=d.update,g=h[a._idProp],b=WPe(h,v);return a._data.set(g,b),{id:g,oldData:h,updatedData:b}});if(l.length){var u={items:Us(l).call(l,function(d){return d.id}),oldData:Us(l).call(l,function(d){return d.oldData}),data:Us(l).call(l,function(d){return d.updatedData})};return this._trigger("update",u,s),u.items}else return[]}},{key:"get",value:function(i,s){var o=void 0,a=void 0,l=void 0;OD(i)?(o=i,l=s):Vi(i)?(a=i,l=s):l=i;var u=l&&l.returnType==="Object"?"Object":"Array",d=l&&Nh(l),h=[],v=void 0,g=void 0,b=void 0;if(o!=null)v=this._data.get(o),v&&d&&!d(v)&&(v=void 0);else if(a!=null)for(var m=0,x=a.length;m<x;m++)v=this._data.get(a[m]),v!=null&&(!d||d(v))&&h.push(v);else{var E;g=Ti(mh(E=this._data).call(E));for(var k=0,$=g.length;k<$;k++)b=g[k],v=this._data.get(b),v!=null&&(!d||d(v))&&h.push(v)}if(l&&l.order&&o==null&&this._sort(h,l.order),l&&l.fields){var S=l.fields;if(o!=null&&v!=null)v=this._filterFields(v,S);else for(var T=0,O=h.length;T<O;T++)h[T]=this._filterFields(h[T],S)}if(u=="Object"){for(var I={},P=0,R=h.length;P<R;P++){var D=h[P],F=D[this._idProp];I[F]=D}return I}else if(o!=null){var K;return(K=v)!==null&&K!==void 0?K:null}else return h}},{key:"getIds",value:function(i){var s=this._data,o=i&&Nh(i),a=i&&i.order,l=Ti(mh(s).call(s)),u=[];if(o)if(a){for(var d=[],h=0,v=l.length;h<v;h++){var g=l[h],b=this._data.get(g);b!=null&&o(b)&&d.push(b)}this._sort(d,a);for(var m=0,x=d.length;m<x;m++)u.push(d[m][this._idProp])}else for(var E=0,k=l.length;E<k;E++){var $=l[E],S=this._data.get($);S!=null&&o(S)&&u.push(S[this._idProp])}else if(a){for(var T=[],O=0,I=l.length;O<I;O++){var P=l[O];T.push(s.get(P))}this._sort(T,a);for(var R=0,D=T.length;R<D;R++)u.push(T[R][this._idProp])}else for(var F=0,K=l.length;F<K;F++){var q=l[F],W=s.get(q);W!=null&&u.push(W[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,s){var o=s&&Nh(s),a=this._data,l=Ti(mh(a).call(a));if(s&&s.order)for(var u=this.get(s),d=0,h=u.length;d<h;d++){var v=u[d],g=v[this._idProp];i(v,g)}else for(var b=0,m=l.length;b<m;b++){var x=l[b],E=this._data.get(x);E!=null&&(!o||o(E))&&i(E,x)}}},{key:"map",value:function(i,s){for(var o=s&&Nh(s),a=[],l=this._data,u=Ti(mh(l).call(l)),d=0,h=u.length;d<h;d++){var v=u[d],g=this._data.get(v);g!=null&&(!o||o(g))&&a.push(i(g,v))}return s&&s.order&&this._sort(a,s.order),a}},{key:"_filterFields",value:function(i,s){var o;return i&&ZSe(o=Vi(s)?s:F3(s)).call(o,function(a,l){return a[l]=i[l],a},{})}},{key:"_sort",value:function(i,s){if(typeof s=="string"){var o=s;ST(i).call(i,function(a,l){var u=a[o],d=l[o];return u>d?1:u<d?-1:0})}else if(typeof s=="function")ST(i).call(i,s);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,s){for(var o=[],a=[],l=Vi(i)?i:[i],u=0,d=l.length;u<d;u++){var h=this._remove(l[u]);if(h){var v=h[this._idProp];v!=null&&(o.push(v),a.push(h))}}return o.length&&this._trigger("remove",{items:o,oldData:a},s),o}},{key:"_remove",value:function(i){var s;if(OD(i)?s=i:i&&Un(i)==="object"&&(s=i[this._idProp]),s!=null&&this._data.has(s)){var o=this._data.get(s)||null;return this._data.delete(s),--this.length,o}return null}},{key:"clear",value:function(i){for(var s,o=Ti(mh(s=this._data).call(s)),a=[],l=0,u=o.length;l<u;l++)a.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:a},i),o}},{key:"max",value:function(i){var s,o=null,a=null,l=g2(TD(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var d=u.value,h=d[i];typeof h=="number"&&(a==null||h>a)&&(o=d,a=h)}}catch(v){l.e(v)}finally{l.f()}return o||null}},{key:"min",value:function(i){var s,o=null,a=null,l=g2(TD(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var d=u.value,h=d[i];typeof h=="number"&&(a==null||h<a)&&(o=d,a=h)}}catch(v){l.e(v)}finally{l.f()}return o||null}},{key:"distinct",value:function(i){for(var s=this._data,o=Ti(mh(s).call(s)),a=[],l=0,u=0,d=o.length;u<d;u++){for(var h=o[u],v=s.get(h),g=v[i],b=!1,m=0;m<l;m++)if(a[m]==g){b=!0;break}!b&&g!==void 0&&(a[l]=g,l++)}return a}},{key:"_addItem",value:function(i){var s=w7e(i,this._idProp),o=s[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,s),++this.length,o}},{key:"_updateItem",value:function(i){var s=i[this._idProp];if(s==null)throw new Error("Cannot update item: item has no id (item: "+xCe(i)+")");var o=this._data.get(s);if(!o)throw new Error("Cannot update item: no item with id "+s+" found");return this._data.set(s,ND(ND({},o),i)),s}},{key:"stream",value:function(i){if(i){var s=this._data;return new CD(Hr({},rd,xi.mark(function a(){var l,u,d,h;return xi.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:l=g2(i),g.prev=1,l.s();case 3:if((u=l.n()).done){g.next=11;break}if(d=u.value,h=s.get(d),h==null){g.next=9;break}return g.next=9,[d,h];case 9:g.next=3;break;case 11:g.next=16;break;case 13:g.prev=13,g.t0=g.catch(1),l.e(g.t0);case 16:return g.prev=16,l.f(),g.finish(16);case 19:case"end":return g.stop()}},a,null,[[1,13,16,19]])})))}else{var o;return new CD(Hr({},rd,dK(o=WBe(this._data)).call(o,this._data)))}}}]),t}(JBe);function _7e(e,r){return Un(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof yc(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof Us(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function uV(e,r){return Un(r)==="object"&&r!==null&&e===r.idProp&&typeof yc(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof Us(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&_7e(e,r.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.6
 * @date    2023-03-23T21:31:19.223Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var PT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NT={},$7e={get exports(){return NT},set exports(e){NT=e}},Tm=function(e){return e&&e.Math==Math&&e},ln=Tm(typeof globalThis=="object"&&globalThis)||Tm(typeof window=="object"&&window)||Tm(typeof self=="object"&&self)||Tm(typeof PT=="object"&&PT)||function(){return this}()||Function("return this")(),Yt=function(e){try{return!!e()}catch{return!0}},x7e=Yt,og=!x7e(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),E7e=og,cV=Function.prototype,DD=cV.apply,BD=cV.call,ag=typeof Reflect=="object"&&Reflect.apply||(E7e?BD.bind(DD):function(){return BD.apply(DD,arguments)}),hV=og,dV=Function.prototype,RT=dV.call,S7e=hV&&dV.bind.bind(RT,RT),Zt=hV?S7e:function(e){return function(){return RT.apply(e,arguments)}},fV=Zt,k7e=fV({}.toString),T7e=fV("".slice),za=function(e){return T7e(k7e(e),8,-1)},I7e=za,O7e=Zt,iA=function(e){if(I7e(e)==="Function")return O7e(e)},DT=typeof document=="object"&&document.all,A7e=typeof DT>"u"&&DT!==void 0,pV={all:DT,IS_HTMLDDA:A7e},vV=pV,C7e=vV.all,Pn=vV.IS_HTMLDDA?function(e){return typeof e=="function"||e===C7e}:function(e){return typeof e=="function"},rf={},P7e=Yt,bn=!P7e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),N7e=og,Im=Function.prototype.call,is=N7e?Im.bind(Im):function(){return Im.apply(Im,arguments)},lg={},gV={}.propertyIsEnumerable,yV=Object.getOwnPropertyDescriptor,R7e=yV&&!gV.call({1:2},1);lg.f=R7e?function(r){var t=yV(this,r);return!!t&&t.enumerable}:gV;var ug=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},D7e=Zt,B7e=Yt,M7e=za,y2=Object,L7e=D7e("".split),uw=B7e(function(){return!y2("z").propertyIsEnumerable(0)})?function(e){return M7e(e)=="String"?L7e(e,""):y2(e)}:y2,cg=function(e){return e==null},F7e=cg,j7e=TypeError,hg=function(e){if(F7e(e))throw j7e("Can't call method on "+e);return e},z7e=uw,H7e=hg,ho=function(e){return z7e(H7e(e))},MD=Pn,mV=pV,U7e=mV.all,Nn=mV.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:MD(e)||e===U7e}:function(e){return typeof e=="object"?e!==null:MD(e)},zt={},m2=zt,b2=ln,K7e=Pn,LD=function(e){return K7e(e)?e:void 0},Ns=function(e,r){return arguments.length<2?LD(m2[e])||LD(b2[e]):m2[e]&&m2[e][r]||b2[e]&&b2[e][r]},W7e=Zt,Gr=W7e({}.isPrototypeOf),dg=typeof navigator<"u"&&String(navigator.userAgent)||"",bV=ln,w2=dg,FD=bV.process,jD=bV.Deno,zD=FD&&FD.versions||jD&&jD.version,HD=zD&&zD.v8,Ks,kb;HD&&(Ks=HD.split("."),kb=Ks[0]>0&&Ks[0]<4?1:+(Ks[0]+Ks[1]));!kb&&w2&&(Ks=w2.match(/Edge\/(\d+)/),(!Ks||Ks[1]>=74)&&(Ks=w2.match(/Chrome\/(\d+)/),Ks&&(kb=+Ks[1])));var fg=kb,UD=fg,V7e=Yt,nf=!!Object.getOwnPropertySymbols&&!V7e(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&UD&&UD<41}),q7e=nf,wV=q7e&&!Symbol.sham&&typeof Symbol.iterator=="symbol",G7e=Ns,Y7e=Pn,Z7e=Gr,X7e=wV,J7e=Object,pg=X7e?function(e){return typeof e=="symbol"}:function(e){var r=G7e("Symbol");return Y7e(r)&&Z7e(r.prototype,J7e(e))},Q7e=String,sf=function(e){try{return Q7e(e)}catch{return"Object"}},eMe=Pn,tMe=sf,rMe=TypeError,Lc=function(e){if(eMe(e))return e;throw rMe(tMe(e)+" is not a function")},nMe=Lc,iMe=cg,sA=function(e,r){var t=e[r];return iMe(t)?void 0:nMe(t)},_2=is,$2=Pn,x2=Nn,sMe=TypeError,oMe=function(e,r){var t,n;if(r==="string"&&$2(t=e.toString)&&!x2(n=_2(t,e))||$2(t=e.valueOf)&&!x2(n=_2(t,e))||r!=="string"&&$2(t=e.toString)&&!x2(n=_2(t,e)))return n;throw sMe("Can't convert object to primitive value")},Xl={},aMe={get exports(){return Xl},set exports(e){Xl=e}},KD=ln,lMe=Object.defineProperty,uMe=function(e,r){try{lMe(KD,e,{value:r,configurable:!0,writable:!0})}catch{KD[e]=r}return r},cMe=ln,hMe=uMe,WD="__core-js_shared__",dMe=cMe[WD]||hMe(WD,{}),oA=dMe,VD=oA;(aMe.exports=function(e,r){return VD[e]||(VD[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var fMe=hg,pMe=Object,ss=function(e){return pMe(fMe(e))},vMe=Zt,gMe=ss,yMe=vMe({}.hasOwnProperty),Rn=Object.hasOwn||function(r,t){return yMe(gMe(r),t)},mMe=Zt,bMe=0,wMe=Math.random(),_Me=mMe(1 .toString),cw=function(e){return"Symbol("+(e===void 0?"":e)+")_"+_Me(++bMe+wMe,36)},$Me=ln,xMe=Xl,qD=Rn,EMe=cw,SMe=nf,kMe=wV,Lh=$Me.Symbol,E2=xMe("wks"),TMe=kMe?Lh.for||Lh:Lh&&Lh.withoutSetter||EMe,Yr=function(e){return qD(E2,e)||(E2[e]=SMe&&qD(Lh,e)?Lh[e]:TMe("Symbol."+e)),E2[e]},IMe=is,GD=Nn,YD=pg,OMe=sA,AMe=oMe,CMe=Yr,PMe=TypeError,NMe=CMe("toPrimitive"),RMe=function(e,r){if(!GD(e)||YD(e))return e;var t=OMe(e,NMe),n;if(t){if(r===void 0&&(r="default"),n=IMe(t,e,r),!GD(n)||YD(n))return n;throw PMe("Can't convert object to primitive value")}return r===void 0&&(r="number"),AMe(e,r)},DMe=RMe,BMe=pg,hw=function(e){var r=DMe(e,"string");return BMe(r)?r:r+""},MMe=ln,ZD=Nn,BT=MMe.document,LMe=ZD(BT)&&ZD(BT.createElement),_V=function(e){return LMe?BT.createElement(e):{}},FMe=bn,jMe=Yt,zMe=_V,$V=!FMe&&!jMe(function(){return Object.defineProperty(zMe("div"),"a",{get:function(){return 7}}).a!=7}),HMe=bn,UMe=is,KMe=lg,WMe=ug,VMe=ho,qMe=hw,GMe=Rn,YMe=$V,XD=Object.getOwnPropertyDescriptor;rf.f=HMe?XD:function(r,t){if(r=VMe(r),t=qMe(t),YMe)try{return XD(r,t)}catch{}if(GMe(r,t))return WMe(!UMe(KMe.f,r,t),r[t])};var ZMe=Yt,XMe=Pn,JMe=/#|\.prototype\./,vg=function(e,r){var t=eLe[QMe(e)];return t==rLe?!0:t==tLe?!1:XMe(r)?ZMe(r):!!r},QMe=vg.normalize=function(e){return String(e).replace(JMe,".").toLowerCase()},eLe=vg.data={},tLe=vg.NATIVE="N",rLe=vg.POLYFILL="P",nLe=vg,JD=iA,iLe=Lc,sLe=og,oLe=JD(JD.bind),gg=function(e,r){return iLe(e),r===void 0?e:sLe?oLe(e,r):function(){return e.apply(r,arguments)}},Rs={},aLe=bn,lLe=Yt,xV=aLe&&lLe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),uLe=Nn,cLe=String,hLe=TypeError,os=function(e){if(uLe(e))return e;throw hLe(cLe(e)+" is not an object")},dLe=bn,fLe=$V,pLe=xV,Om=os,QD=hw,vLe=TypeError,S2=Object.defineProperty,gLe=Object.getOwnPropertyDescriptor,k2="enumerable",T2="configurable",I2="writable";Rs.f=dLe?pLe?function(r,t,n){if(Om(r),t=QD(t),Om(n),typeof r=="function"&&t==="prototype"&&"value"in n&&I2 in n&&!n[I2]){var i=gLe(r,t);i&&i[I2]&&(r[t]=n.value,n={configurable:T2 in n?n[T2]:i[T2],enumerable:k2 in n?n[k2]:i[k2],writable:!1})}return S2(r,t,n)}:S2:function(r,t,n){if(Om(r),t=QD(t),Om(n),fLe)try{return S2(r,t,n)}catch{}if("get"in n||"set"in n)throw vLe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var yLe=bn,mLe=Rs,bLe=ug,of=yLe?function(e,r,t){return mLe.f(e,r,bLe(1,t))}:function(e,r,t){return e[r]=t,e},Am=ln,wLe=ag,_Le=iA,$Le=Pn,xLe=rf.f,ELe=nLe,bh=zt,SLe=gg,wh=of,eB=Rn,kLe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return wLe(e,this,arguments)};return r.prototype=e.prototype,r},dt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?Am:i?Am[t]:(Am[t]||{}).prototype,a=n?bh:bh[t]||wh(bh,t,{})[t],l=a.prototype,u,d,h,v,g,b,m,x,E;for(v in r)u=ELe(n?v:t+(i?".":"#")+v,e.forced),d=!u&&o&&eB(o,v),b=a[v],d&&(e.dontCallGetSet?(E=xLe(o,v),m=E&&E.value):m=o[v]),g=d&&m?m:r[v],!(d&&typeof b==typeof g)&&(e.bind&&d?x=SLe(g,Am):e.wrap&&d?x=kLe(g):s&&$Le(g)?x=_Le(g):x=g,(e.sham||g&&g.sham||b&&b.sham)&&wh(x,"sham",!0),wh(a,v,x),s&&(h=t+"Prototype",eB(bh,h)||wh(bh,h,{}),wh(bh[h],v,g),e.real&&l&&(u||!l[v])&&wh(l,v,g)))},TLe=Math.ceil,ILe=Math.floor,OLe=Math.trunc||function(r){var t=+r;return(t>0?ILe:TLe)(t)},ALe=OLe,dw=function(e){var r=+e;return r!==r||r===0?0:ALe(r)},CLe=dw,PLe=Math.max,NLe=Math.min,yg=function(e,r){var t=CLe(e);return t<0?PLe(t+r,0):NLe(t,r)},RLe=dw,DLe=Math.min,BLe=function(e){return e>0?DLe(RLe(e),9007199254740991):0},MLe=BLe,fo=function(e){return MLe(e.length)},LLe=ho,FLe=yg,jLe=fo,tB=function(e){return function(r,t,n){var i=LLe(r),s=jLe(i),o=FLe(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},aA={includes:tB(!0),indexOf:tB(!1)},mg={},zLe=Zt,O2=Rn,HLe=ho,ULe=aA.indexOf,KLe=mg,rB=zLe([].push),EV=function(e,r){var t=HLe(e),n=0,i=[],s;for(s in t)!O2(KLe,s)&&O2(t,s)&&rB(i,s);for(;r.length>n;)O2(t,s=r[n++])&&(~ULe(i,s)||rB(i,s));return i},lA=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],WLe=EV,VLe=lA,bg=Object.keys||function(r){return WLe(r,VLe)},wg={};wg.f=Object.getOwnPropertySymbols;var nB=bn,qLe=Zt,GLe=is,YLe=Yt,A2=bg,ZLe=wg,XLe=lg,JLe=ss,QLe=uw,_h=Object.assign,iB=Object.defineProperty,e9e=qLe([].concat),t9e=!_h||YLe(function(){if(nB&&_h({b:1},_h(iB({},"a",{enumerable:!0,get:function(){iB(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),_h({},e)[t]!=7||A2(_h({},r)).join("")!=n})?function(r,t){for(var n=JLe(r),i=arguments.length,s=1,o=ZLe.f,a=XLe.f;i>s;)for(var l=QLe(arguments[s++]),u=o?e9e(A2(l),o(l)):A2(l),d=u.length,h=0,v;d>h;)v=u[h++],(!nB||GLe(a,l,v))&&(n[v]=l[v]);return n}:_h,r9e=dt,sB=t9e;r9e({target:"Object",stat:!0,arity:2,forced:Object.assign!==sB},{assign:sB});var n9e=zt,i9e=n9e.Object.assign,s9e=i9e,o9e=s9e;(function(e){e.exports=o9e})($7e);var nn=at(NT),MT={},a9e={get exports(){return MT},set exports(e){MT=e}},l9e=Zt,fw=l9e([].slice),SV=Zt,u9e=Lc,c9e=Nn,h9e=Rn,oB=fw,d9e=og,kV=Function,f9e=SV([].concat),p9e=SV([].join),C2={},v9e=function(e,r,t){if(!h9e(C2,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";C2[r]=kV("C,a","return new C("+p9e(n,",")+")")}return C2[r](e,t)},TV=d9e?kV.bind:function(r){var t=u9e(this),n=t.prototype,i=oB(arguments,1),s=function(){var a=f9e(i,oB(arguments));return this instanceof s?v9e(t,a.length,a):t.apply(r,a)};return c9e(n)&&(s.prototype=n),s},g9e=dt,aB=TV;g9e({target:"Function",proto:!0,forced:Function.bind!==aB},{bind:aB});var y9e=zt,Dn=function(e){return y9e[e+"Prototype"]},m9e=Dn,b9e=m9e("Function").bind,w9e=Gr,_9e=b9e,P2=Function.prototype,$9e=function(e){var r=e.bind;return e===P2||w9e(P2,e)&&r===P2.bind?_9e:r},x9e=$9e,IV=x9e;(function(e){e.exports=IV})(a9e);var De=at(MT);function uA(e,r,t,n){e.beginPath(),e.arc(r,t,n,0,2*Math.PI,!1),e.closePath()}function E9e(e,r,t,n){e.beginPath(),e.rect(r-n,t-n,n*2,n*2),e.closePath()}function S9e(e,r,t,n){e.beginPath(),n*=1.15,t+=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t-(a-o)),e.lineTo(r+s,t+o),e.lineTo(r-s,t+o),e.lineTo(r,t-(a-o)),e.closePath()}function k9e(e,r,t,n){e.beginPath(),n*=1.15,t-=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t+(a-o)),e.lineTo(r+s,t-o),e.lineTo(r-s,t-o),e.lineTo(r,t+(a-o)),e.closePath()}function T9e(e,r,t,n){e.beginPath(),n*=.82,t+=.1*n;for(var i=0;i<10;i++){var s=i%2===0?n*1.3:n*.5;e.lineTo(r+s*Math.sin(i*2*Math.PI/10),t-s*Math.cos(i*2*Math.PI/10))}e.closePath()}function I9e(e,r,t,n){e.beginPath(),e.lineTo(r,t+n),e.lineTo(r+n,t),e.lineTo(r,t-n),e.lineTo(r-n,t),e.closePath()}function OV(e,r,t,n,i,s){var o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),e.beginPath(),e.moveTo(r+s,t),e.lineTo(r+n-s,t),e.arc(r+n-s,t+s,s,o*270,o*360,!1),e.lineTo(r+n,t+i-s),e.arc(r+n-s,t+i-s,s,0,o*90,!1),e.lineTo(r+s,t+i),e.arc(r+s,t+i-s,s,o*90,o*180,!1),e.lineTo(r,t+s),e.arc(r+s,t+s,s,o*180,o*270,!1),e.closePath()}function LT(e,r,t,n,i){var s=.5522848,o=n/2*s,a=i/2*s,l=r+n,u=t+i,d=r+n/2,h=t+i/2;e.beginPath(),e.moveTo(r,h),e.bezierCurveTo(r,h-a,d-o,t,d,t),e.bezierCurveTo(d+o,t,l,h-a,l,h),e.bezierCurveTo(l,h+a,d+o,u,d,u),e.bezierCurveTo(d-o,u,r,h+a,r,h),e.closePath()}function AV(e,r,t,n,i){var s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,d=a/2*l,h=r+o,v=t+a,g=r+o/2,b=t+a/2,m=t+(i-a/2),x=t+i;e.beginPath(),e.moveTo(h,b),e.bezierCurveTo(h,b+d,g+u,v,g,v),e.bezierCurveTo(g-u,v,r,b+d,r,b),e.bezierCurveTo(r,b-d,g-u,t,g,t),e.bezierCurveTo(g+u,t,h,b-d,h,b),e.lineTo(h,m),e.bezierCurveTo(h,m+d,g+u,x,g,x),e.bezierCurveTo(g-u,x,r,m+d,r,m),e.lineTo(r,b)}function CV(e,r,t,n,i,s){e.beginPath(),e.moveTo(r,t);for(var o=s.length,a=n-r,l=i-t,u=l/a,d=Math.sqrt(a*a+l*l),h=0,v=!0,g=0,b=+s[0];d>=.1;)b=+s[h++%o],b>d&&(b=d),g=Math.sqrt(b*b/(1+u*u)),g=a<0?-g:g,r+=g,t+=u*g,v===!0?e.lineTo(r,t):e.moveTo(r,t),d-=b,v=!v}function O9e(e,r,t,n){e.beginPath();var i=6,s=Math.PI*2/i;e.moveTo(r+n,t);for(var o=1;o<i;o++)e.lineTo(r+n*Math.cos(s*o),t+n*Math.sin(s*o));e.closePath()}var lB={circle:uA,dashedLine:CV,database:AV,diamond:I9e,ellipse:LT,ellipse_vis:LT,hexagon:O9e,roundRect:OV,square:E9e,star:T9e,triangle:S9e,triangleDown:k9e};function A9e(e){return Object.prototype.hasOwnProperty.call(lB,e)?lB[e]:function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(r,n)}}var FT={},C9e={get exports(){return FT},set exports(e){FT=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(C9e);var PV=FT,jT={},P9e={get exports(){return jT},set exports(e){jT=e}},N9e=Yr,R9e=N9e("toStringTag"),NV={};NV[R9e]="z";var cA=String(NV)==="[object z]",D9e=cA,B9e=Pn,m0=za,M9e=Yr,L9e=M9e("toStringTag"),F9e=Object,j9e=m0(function(){return arguments}())=="Arguments",z9e=function(e,r){try{return e[r]}catch{}},Fc=D9e?m0:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=z9e(r=F9e(e),L9e))=="string"?t:j9e?m0(r):(n=m0(r))=="Object"&&B9e(r.callee)?"Arguments":n},H9e=Fc,U9e=String,Uo=function(e){if(H9e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return U9e(e)},hA=Zt,K9e=dw,W9e=Uo,V9e=hg,q9e=hA("".charAt),uB=hA("".charCodeAt),G9e=hA("".slice),cB=function(e){return function(r,t){var n=W9e(V9e(r)),i=K9e(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=uB(n,i),o<55296||o>56319||i+1===s||(a=uB(n,i+1))<56320||a>57343?e?q9e(n,i):o:e?G9e(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},Y9e={codeAt:cB(!1),charAt:cB(!0)},Z9e=ln,X9e=Pn,hB=Z9e.WeakMap,RV=X9e(hB)&&/native code/.test(String(hB)),J9e=Xl,Q9e=cw,dB=J9e("keys"),pw=function(e){return dB[e]||(dB[e]=Q9e(e))},eFe=RV,DV=ln,tFe=Nn,rFe=of,N2=Rn,R2=oA,nFe=pw,iFe=mg,fB="Object already initialized",zT=DV.TypeError,sFe=DV.WeakMap,Tb,cv,Ib,oFe=function(e){return Ib(e)?cv(e):Tb(e,{})},aFe=function(e){return function(r){var t;if(!tFe(r)||(t=cv(r)).type!==e)throw zT("Incompatible receiver, "+e+" required");return t}};if(eFe||R2.state){var Eo=R2.state||(R2.state=new sFe);Eo.get=Eo.get,Eo.has=Eo.has,Eo.set=Eo.set,Tb=function(e,r){if(Eo.has(e))throw zT(fB);return r.facade=e,Eo.set(e,r),r},cv=function(e){return Eo.get(e)||{}},Ib=function(e){return Eo.has(e)}}else{var $h=nFe("state");iFe[$h]=!0,Tb=function(e,r){if(N2(e,$h))throw zT(fB);return r.facade=e,rFe(e,$h,r),r},cv=function(e){return N2(e,$h)?e[$h]:{}},Ib=function(e){return N2(e,$h)}}var jc={set:Tb,get:cv,has:Ib,enforce:oFe,getterFor:aFe},HT=bn,lFe=Rn,BV=Function.prototype,uFe=HT&&Object.getOwnPropertyDescriptor,dA=lFe(BV,"name"),cFe=dA&&(function(){}).name==="something",hFe=dA&&(!HT||HT&&uFe(BV,"name").configurable),MV={EXISTS:dA,PROPER:cFe,CONFIGURABLE:hFe},vw={},dFe=bn,fFe=xV,pFe=Rs,vFe=os,gFe=ho,yFe=bg;vw.f=dFe&&!fFe?Object.defineProperties:function(r,t){vFe(r);for(var n=gFe(t),i=yFe(t),s=i.length,o=0,a;s>o;)pFe.f(r,a=i[o++],n[a]);return r};var mFe=Ns,bFe=mFe("document","documentElement"),wFe=os,_Fe=vw,pB=lA,$Fe=mg,xFe=bFe,EFe=_V,SFe=pw,vB=">",gB="<",UT="prototype",KT="script",LV=SFe("IE_PROTO"),D2=function(){},FV=function(e){return gB+KT+vB+e+gB+"/"+KT+vB},yB=function(e){e.write(FV("")),e.close();var r=e.parentWindow.Object;return e=null,r},kFe=function(){var e=EFe("iframe"),r="java"+KT+":",t;return e.style.display="none",xFe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(FV("document.F=Object")),t.close(),t.F},Cm,b0=function(){try{Cm=new ActiveXObject("htmlfile")}catch{}b0=typeof document<"u"?document.domain&&Cm?yB(Cm):kFe():yB(Cm);for(var e=pB.length;e--;)delete b0[UT][pB[e]];return b0()};$Fe[LV]=!0;var af=Object.create||function(r,t){var n;return r!==null?(D2[UT]=wFe(r),n=new D2,D2[UT]=null,n[LV]=r):n=b0(),t===void 0?n:_Fe.f(n,t)},TFe=Yt,jV=!TFe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),IFe=Rn,OFe=Pn,AFe=ss,CFe=pw,PFe=jV,mB=CFe("IE_PROTO"),WT=Object,NFe=WT.prototype,gw=PFe?WT.getPrototypeOf:function(e){var r=AFe(e);if(IFe(r,mB))return r[mB];var t=r.constructor;return OFe(t)&&r instanceof t?t.prototype:r instanceof WT?NFe:null},RFe=of,_g=function(e,r,t,n){return n&&n.enumerable?e[r]=t:RFe(e,r,t),e},DFe=Yt,BFe=Pn,MFe=Nn,LFe=af,bB=gw,FFe=_g,jFe=Yr,VT=jFe("iterator"),zV=!1,wa,B2,M2;[].keys&&(M2=[].keys(),"next"in M2?(B2=bB(bB(M2)),B2!==Object.prototype&&(wa=B2)):zV=!0);var zFe=!MFe(wa)||DFe(function(){var e={};return wa[VT].call(e)!==e});zFe?wa={}:wa=LFe(wa);BFe(wa[VT])||FFe(wa,VT,function(){return this});var HV={IteratorPrototype:wa,BUGGY_SAFARI_ITERATORS:zV},HFe=cA,UFe=Fc,KFe=HFe?{}.toString:function(){return"[object "+UFe(this)+"]"},WFe=cA,VFe=Rs.f,qFe=of,GFe=Rn,YFe=KFe,ZFe=Yr,wB=ZFe("toStringTag"),lf=function(e,r,t,n){if(e){var i=t?e:e.prototype;GFe(i,wB)||VFe(i,wB,{configurable:!0,value:r}),n&&!WFe&&qFe(i,"toString",YFe)}},uf={},XFe=HV.IteratorPrototype,JFe=af,QFe=ug,eje=lf,tje=uf,rje=function(){return this},nje=function(e,r,t,n){var i=r+" Iterator";return e.prototype=JFe(XFe,{next:QFe(+!n,t)}),eje(e,i,!1,!0),tje[i]=rje,e},ije=Zt,sje=Lc,oje=function(e,r,t){try{return ije(sje(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},aje=Pn,lje=String,uje=TypeError,cje=function(e){if(typeof e=="object"||aje(e))return e;throw uje("Can't set "+lje(e)+" as a prototype")},hje=oje,dje=os,fje=cje,pje=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=hje(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return dje(i),fje(s),e?t(i,s):i.__proto__=s,i}}():void 0),vje=dt,gje=is,yje=MV,mje=nje,bje=gw,wje=lf,_B=_g,_je=Yr,$B=uf,$je=HV,xje=yje.PROPER,Pm=$je.BUGGY_SAFARI_ITERATORS,L2=_je("iterator"),xB="keys",Nm="values",EB="entries",Eje=function(){return this},fA=function(e,r,t,n,i,s,o){mje(t,r,n);var a=function(E){if(E===i&&v)return v;if(!Pm&&E in d)return d[E];switch(E){case xB:return function(){return new t(this,E)};case Nm:return function(){return new t(this,E)};case EB:return function(){return new t(this,E)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,d=e.prototype,h=d[L2]||d["@@iterator"]||i&&d[i],v=!Pm&&h||a(i),g=r=="Array"&&d.entries||h,b,m,x;if(g&&(b=bje(g.call(new e)),b!==Object.prototype&&b.next&&(wje(b,l,!0,!0),$B[l]=Eje)),xje&&i==Nm&&h&&h.name!==Nm&&(u=!0,v=function(){return gje(h,this)}),i)if(m={values:a(Nm),keys:s?v:a(xB),entries:a(EB)},o)for(x in m)(Pm||u||!(x in d))&&_B(d,x,m[x]);else vje({target:r,proto:!0,forced:Pm||u},m);return o&&d[L2]!==v&&_B(d,L2,v,{name:i}),$B[r]=v,m},pA=function(e,r){return{value:e,done:r}},Sje=Y9e.charAt,kje=Uo,UV=jc,Tje=fA,SB=pA,KV="String Iterator",Ije=UV.set,Oje=UV.getterFor(KV);Tje(String,"String",function(e){Ije(this,{type:KV,string:kje(e),index:0})},function(){var r=Oje(this),t=r.string,n=r.index,i;return n>=t.length?SB(void 0,!0):(i=Sje(t,n),r.index+=i.length,SB(i,!1))});var Aje=is,kB=os,Cje=sA,WV=function(e,r,t){var n,i;kB(e);try{if(n=Cje(e,"return"),!n){if(r==="throw")throw t;return t}n=Aje(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return kB(n),t},Pje=os,Nje=WV,Rje=function(e,r,t,n){try{return n?r(Pje(t)[0],t[1]):r(t)}catch(i){Nje(e,"throw",i)}},Dje=Yr,Bje=uf,Mje=Dje("iterator"),Lje=Array.prototype,VV=function(e){return e!==void 0&&(Bje.Array===e||Lje[Mje]===e)},Fje=Zt,jje=Pn,qT=oA,zje=Fje(Function.toString);jje(qT.inspectSource)||(qT.inspectSource=function(e){return zje(e)});var Hje=qT.inspectSource,Uje=Zt,Kje=Yt,qV=Pn,Wje=Fc,Vje=Ns,qje=Hje,GV=function(){},Gje=[],YV=Vje("Reflect","construct"),vA=/^\s*(?:class|function)\b/,Yje=Uje(vA.exec),Zje=!vA.exec(GV),Kf=function(r){if(!qV(r))return!1;try{return YV(GV,Gje,r),!0}catch{return!1}},ZV=function(r){if(!qV(r))return!1;switch(Wje(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Zje||!!Yje(vA,qje(r))}catch{return!0}};ZV.sham=!0;var yw=!YV||Kje(function(){var e;return Kf(Kf.call)||!Kf(Object)||!Kf(function(){e=!0})||e})?ZV:Kf,Xje=hw,Jje=Rs,Qje=ug,cf=function(e,r,t){var n=Xje(r);n in e?Jje.f(e,n,Qje(0,t)):e[n]=t},eze=Fc,TB=sA,tze=cg,rze=uf,nze=Yr,ize=nze("iterator"),mw=function(e){if(!tze(e))return TB(e,ize)||TB(e,"@@iterator")||rze[eze(e)]},sze=is,oze=Lc,aze=os,lze=sf,uze=mw,cze=TypeError,XV=function(e,r){var t=arguments.length<2?uze(e):r;if(oze(t))return aze(sze(t,e));throw cze(lze(e)+" is not iterable")},hze=gg,dze=is,fze=ss,pze=Rje,vze=VV,gze=yw,yze=fo,IB=cf,mze=XV,bze=mw,OB=Array,wze=function(r){var t=fze(r),n=gze(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=hze(s,i>2?arguments[2]:void 0));var a=bze(t),l=0,u,d,h,v,g,b;if(a&&!(this===OB&&vze(a)))for(v=mze(t,a),g=v.next,d=n?new this:[];!(h=dze(g,v)).done;l++)b=o?pze(v,s,[h.value,l],!0):h.value,IB(d,l,b);else for(u=yze(t),d=n?new this(u):OB(u);u>l;l++)b=o?s(t[l],l):t[l],IB(d,l,b);return d.length=l,d},_ze=Yr,JV=_ze("iterator"),QV=!1;try{var $ze=0,AB={next:function(){return{done:!!$ze++}},return:function(){QV=!0}};AB[JV]=function(){return this},Array.from(AB,function(){throw 2})}catch{}var xze=function(e,r){if(!r&&!QV)return!1;var t=!1;try{var n={};n[JV]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},Eze=dt,Sze=wze,kze=xze,Tze=!kze(function(e){Array.from(e)});Eze({target:"Array",stat:!0,forced:Tze},{from:Sze});var Ize=zt,Oze=Ize.Array.from,Aze=Oze,eq=Aze;(function(e){e.exports=eq})(P9e);var zc=at(jT),GT={},Cze={get exports(){return GT},set exports(e){GT=e}},YT={},Pze={get exports(){return YT},set exports(e){YT=e}},Nze=ho,CB=uf,tq=jc;Rs.f;var Rze=fA,Rm=pA,rq="Array Iterator",Dze=tq.set,Bze=tq.getterFor(rq);Rze(Array,"Array",function(e,r){Dze(this,{type:rq,target:Nze(e),index:0,kind:r})},function(){var e=Bze(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,Rm(void 0,!0)):t=="keys"?Rm(n,!1):t=="values"?Rm(r[n],!1):Rm([n,r[n]],!1)},"values");CB.Arguments=CB.Array;var Mze=mw,Lze=Mze,Fze={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},jze=Fze,zze=ln,Hze=Fc,Uze=of,PB=uf,Kze=Yr,NB=Kze("toStringTag");for(var F2 in jze){var RB=zze[F2],j2=RB&&RB.prototype;j2&&Hze(j2)!==NB&&Uze(j2,NB,F2),PB[F2]=PB.Array}var Wze=Lze,Vze=Wze,qze=Vze,Gze=qze,Yze=Gze,Zze=Yze;(function(e){e.exports=Zze})(Pze);(function(e){e.exports=YT})(Cze);var Ha=at(GT),ZT={},Xze={get exports(){return ZT},set exports(e){ZT=e}},$g={},Jze=EV,Qze=lA,eHe=Qze.concat("length","prototype");$g.f=Object.getOwnPropertyNames||function(r){return Jze(r,eHe)};var bw={},DB=yg,tHe=fo,rHe=cf,nHe=Array,iHe=Math.max,nq=function(e,r,t){for(var n=tHe(e),i=DB(r,n),s=DB(t===void 0?n:t,n),o=nHe(iHe(s-i,0)),a=0;i<s;i++,a++)rHe(o,a,e[i]);return o.length=a,o},sHe=za,oHe=ho,iq=$g.f,aHe=nq,sq=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],lHe=function(e){try{return iq(e)}catch{return aHe(sq)}};bw.f=function(r){return sq&&sHe(r)=="Window"?lHe(r):iq(oHe(r))};var uHe=Rs,gA=function(e,r,t){return uHe.f(e,r,t)},xg={},cHe=Yr;xg.f=cHe;var BB=zt,hHe=Rn,dHe=xg,fHe=Rs.f,Fr=function(e){var r=BB.Symbol||(BB.Symbol={});hHe(r,e)||fHe(r,e,{value:dHe.f(e)})},pHe=is,vHe=Ns,gHe=Yr,yHe=_g,oq=function(){var e=vHe("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=gHe("toPrimitive");r&&!r[n]&&yHe(r,n,function(i){return pHe(t,this)},{arity:1})},mHe=za,Hc=Array.isArray||function(r){return mHe(r)=="Array"},MB=Hc,bHe=yw,wHe=Nn,_He=Yr,$He=_He("species"),LB=Array,xHe=function(e){var r;return MB(e)&&(r=e.constructor,bHe(r)&&(r===LB||MB(r.prototype))?r=void 0:wHe(r)&&(r=r[$He],r===null&&(r=void 0))),r===void 0?LB:r},EHe=xHe,yA=function(e,r){return new(EHe(e))(r===0?0:r)},SHe=gg,kHe=Zt,THe=uw,IHe=ss,OHe=fo,AHe=yA,FB=kHe([].push),ml=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,d,h){for(var v=IHe(l),g=THe(v),b=SHe(u,d),m=OHe(g),x=0,E=h||AHe,k=r?E(l,m):t||o?E(l,0):void 0,$,S;m>x;x++)if((a||x in g)&&($=g[x],S=b($,x,v),e))if(r)k[x]=S;else if(S)switch(e){case 3:return!0;case 5:return $;case 6:return x;case 2:FB(k,$)}else switch(e){case 4:return!1;case 7:FB(k,$)}return s?-1:n||i?i:k}},lu={forEach:ml(0),map:ml(1),filter:ml(2),some:ml(3),every:ml(4),find:ml(5),findIndex:ml(6),filterReject:ml(7)},ww=dt,mA=ln,bA=is,CHe=Zt,Id=bn,Od=nf,PHe=Yt,kn=Rn,NHe=Gr,XT=os,_w=ho,wA=hw,RHe=Uo,JT=ug,hv=af,aq=bg,DHe=$g,lq=bw,BHe=wg,uq=rf,cq=Rs,MHe=vw,hq=lg,jB=_g,LHe=gA,_A=Xl,FHe=pw,dq=mg,zB=cw,jHe=Yr,zHe=xg,HHe=Fr,UHe=oq,KHe=lf,fq=jc,$w=lu.forEach,Ii=FHe("hidden"),xw="Symbol",dv="prototype",WHe=fq.set,HB=fq.getterFor(xw),Xs=Object[dv],oc=mA.Symbol,sp=oc&&oc[dv],VHe=mA.TypeError,z2=mA.QObject,pq=uq.f,Lu=cq.f,vq=lq.f,qHe=hq.f,gq=CHe([].push),Ca=_A("symbols"),Eg=_A("op-symbols"),GHe=_A("wks"),QT=!z2||!z2[dv]||!z2[dv].findChild,e5=Id&&PHe(function(){return hv(Lu({},"a",{get:function(){return Lu(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=pq(Xs,r);n&&delete Xs[r],Lu(e,r,t),n&&e!==Xs&&Lu(Xs,r,n)}:Lu,H2=function(e,r){var t=Ca[e]=hv(sp);return WHe(t,{type:xw,tag:e,description:r}),Id||(t.description=r),t},Ew=function(r,t,n){r===Xs&&Ew(Eg,t,n),XT(r);var i=wA(t);return XT(n),kn(Ca,i)?(n.enumerable?(kn(r,Ii)&&r[Ii][i]&&(r[Ii][i]=!1),n=hv(n,{enumerable:JT(0,!1)})):(kn(r,Ii)||Lu(r,Ii,JT(1,{})),r[Ii][i]=!0),e5(r,i,n)):Lu(r,i,n)},$A=function(r,t){XT(r);var n=_w(t),i=aq(n).concat(wq(n));return $w(i,function(s){(!Id||bA(yq,n,s))&&Ew(r,s,n[s])}),r},YHe=function(r,t){return t===void 0?hv(r):$A(hv(r),t)},yq=function(r){var t=wA(r),n=bA(qHe,this,t);return this===Xs&&kn(Ca,t)&&!kn(Eg,t)?!1:n||!kn(this,t)||!kn(Ca,t)||kn(this,Ii)&&this[Ii][t]?n:!0},mq=function(r,t){var n=_w(r),i=wA(t);if(!(n===Xs&&kn(Ca,i)&&!kn(Eg,i))){var s=pq(n,i);return s&&kn(Ca,i)&&!(kn(n,Ii)&&n[Ii][i])&&(s.enumerable=!0),s}},bq=function(r){var t=vq(_w(r)),n=[];return $w(t,function(i){!kn(Ca,i)&&!kn(dq,i)&&gq(n,i)}),n},wq=function(e){var r=e===Xs,t=vq(r?Eg:_w(e)),n=[];return $w(t,function(i){kn(Ca,i)&&(!r||kn(Xs,i))&&gq(n,Ca[i])}),n};Od||(oc=function(){if(NHe(sp,this))throw VHe("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:RHe(arguments[0]),t=zB(r),n=function(i){this===Xs&&bA(n,Eg,i),kn(this,Ii)&&kn(this[Ii],t)&&(this[Ii][t]=!1),e5(this,t,JT(1,i))};return Id&&QT&&e5(Xs,t,{configurable:!0,set:n}),H2(t,r)},sp=oc[dv],jB(sp,"toString",function(){return HB(this).tag}),jB(oc,"withoutSetter",function(e){return H2(zB(e),e)}),hq.f=yq,cq.f=Ew,MHe.f=$A,uq.f=mq,DHe.f=lq.f=bq,BHe.f=wq,zHe.f=function(e){return H2(jHe(e),e)},Id&&LHe(sp,"description",{configurable:!0,get:function(){return HB(this).description}}));ww({global:!0,constructor:!0,wrap:!0,forced:!Od,sham:!Od},{Symbol:oc});$w(aq(GHe),function(e){HHe(e)});ww({target:xw,stat:!0,forced:!Od},{useSetter:function(){QT=!0},useSimple:function(){QT=!1}});ww({target:"Object",stat:!0,forced:!Od,sham:!Id},{create:YHe,defineProperty:Ew,defineProperties:$A,getOwnPropertyDescriptor:mq});ww({target:"Object",stat:!0,forced:!Od},{getOwnPropertyNames:bq});UHe();KHe(oc,xw);dq[Ii]=!0;var ZHe=nf,_q=ZHe&&!!Symbol.for&&!!Symbol.keyFor,XHe=dt,JHe=Ns,QHe=Rn,eUe=Uo,$q=Xl,tUe=_q,U2=$q("string-to-symbol-registry"),rUe=$q("symbol-to-string-registry");XHe({target:"Symbol",stat:!0,forced:!tUe},{for:function(e){var r=eUe(e);if(QHe(U2,r))return U2[r];var t=JHe("Symbol")(r);return U2[r]=t,rUe[t]=r,t}});var nUe=dt,iUe=Rn,sUe=pg,oUe=sf,aUe=Xl,lUe=_q,UB=aUe("symbol-to-string-registry");nUe({target:"Symbol",stat:!0,forced:!lUe},{keyFor:function(r){if(!sUe(r))throw TypeError(oUe(r)+" is not a symbol");if(iUe(UB,r))return UB[r]}});var uUe=Zt,KB=Hc,cUe=Pn,WB=za,hUe=Uo,VB=uUe([].push),dUe=function(e){if(cUe(e))return e;if(KB(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?VB(t,i):(typeof i=="number"||WB(i)=="Number"||WB(i)=="String")&&VB(t,hUe(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(KB(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},fUe=dt,xq=Ns,Eq=ag,pUe=is,Sg=Zt,Sq=Yt,qB=Pn,GB=pg,kq=fw,vUe=dUe,gUe=nf,yUe=String,jl=xq("JSON","stringify"),Dm=Sg(/./.exec),YB=Sg("".charAt),mUe=Sg("".charCodeAt),bUe=Sg("".replace),wUe=Sg(1 .toString),_Ue=/[\uD800-\uDFFF]/g,ZB=/^[\uD800-\uDBFF]$/,XB=/^[\uDC00-\uDFFF]$/,JB=!gUe||Sq(function(){var e=xq("Symbol")();return jl([e])!="[null]"||jl({a:e})!="{}"||jl(Object(e))!="{}"}),QB=Sq(function(){return jl("\uDF06\uD834")!=='"\\udf06\\ud834"'||jl("\uDEAD")!=='"\\udead"'}),$Ue=function(e,r){var t=kq(arguments),n=vUe(r);if(!(!qB(n)&&(e===void 0||GB(e))))return t[1]=function(i,s){if(qB(n)&&(s=pUe(n,this,yUe(i),s)),!GB(s))return s},Eq(jl,null,t)},xUe=function(e,r,t){var n=YB(t,r-1),i=YB(t,r+1);return Dm(ZB,e)&&!Dm(XB,i)||Dm(XB,e)&&!Dm(ZB,n)?"\\u"+wUe(mUe(e,0),16):e};jl&&fUe({target:"JSON",stat:!0,arity:3,forced:JB||QB},{stringify:function(r,t,n){var i=kq(arguments),s=Eq(JB?$Ue:jl,null,i);return QB&&typeof s=="string"?bUe(s,_Ue,xUe):s}});var EUe=dt,SUe=nf,kUe=Yt,Tq=wg,TUe=ss,IUe=!SUe||kUe(function(){Tq.f(1)});EUe({target:"Object",stat:!0,forced:IUe},{getOwnPropertySymbols:function(r){var t=Tq.f;return t?t(TUe(r)):[]}});var OUe=zt,AUe=OUe.Object.getOwnPropertySymbols,CUe=AUe,PUe=CUe;(function(e){e.exports=PUe})(Xze);var Jl=at(ZT),t5={},NUe={get exports(){return t5},set exports(e){t5=e}},r5={},RUe={get exports(){return r5},set exports(e){r5=e}},DUe=dt,BUe=Yt,MUe=ho,Iq=rf.f,Oq=bn,LUe=!Oq||BUe(function(){Iq(1)});DUe({target:"Object",stat:!0,forced:LUe,sham:!Oq},{getOwnPropertyDescriptor:function(r,t){return Iq(MUe(r),t)}});var FUe=zt,Aq=FUe.Object,jUe=RUe.exports=function(r,t){return Aq.getOwnPropertyDescriptor(r,t)};Aq.getOwnPropertyDescriptor.sham&&(jUe.sham=!0);var zUe=r5,Cq=zUe;(function(e){e.exports=Cq})(NUe);var uu=at(t5),n5={},HUe={get exports(){return n5},set exports(e){n5=e}},UUe=Ns,KUe=Zt,WUe=$g,VUe=wg,qUe=os,GUe=KUe([].concat),Pq=UUe("Reflect","ownKeys")||function(r){var t=WUe.f(qUe(r)),n=VUe.f;return n?GUe(t,n(r)):t},YUe=dt,ZUe=bn,XUe=Pq,JUe=ho,QUe=rf,eKe=cf;YUe({target:"Object",stat:!0,sham:!ZUe},{getOwnPropertyDescriptors:function(r){for(var t=JUe(r),n=QUe.f,i=XUe(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&eKe(s,a,l);return s}});var tKe=zt,rKe=tKe.Object.getOwnPropertyDescriptors,nKe=rKe,iKe=nKe;(function(e){e.exports=iKe})(HUe);var Ql=at(n5),i5={},sKe={get exports(){return i5},set exports(e){i5=e}},s5={},oKe={get exports(){return s5},set exports(e){s5=e}},aKe=dt,lKe=bn,e7=vw.f;aKe({target:"Object",stat:!0,forced:Object.defineProperties!==e7,sham:!lKe},{defineProperties:e7});var uKe=zt,Nq=uKe.Object,cKe=oKe.exports=function(r,t){return Nq.defineProperties(r,t)};Nq.defineProperties.sham&&(cKe.sham=!0);var hKe=s5,dKe=hKe;(function(e){e.exports=dKe})(sKe);var Sw=at(i5),o5={},fKe={get exports(){return o5},set exports(e){o5=e}},a5={},pKe={get exports(){return a5},set exports(e){a5=e}},vKe=dt,gKe=bn,t7=Rs.f;vKe({target:"Object",stat:!0,forced:Object.defineProperty!==t7,sham:!gKe},{defineProperty:t7});var yKe=zt,Rq=yKe.Object,mKe=pKe.exports=function(r,t,n){return Rq.defineProperty(r,t,n)};Rq.defineProperty.sham&&(mKe.sham=!0);var bKe=a5,Dq=bKe;(function(e){e.exports=Dq})(fKe);var kw=at(o5);function ze(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var l5={},wKe={get exports(){return l5},set exports(e){l5=e}},u5={},_Ke={get exports(){return u5},set exports(e){u5=e}},$Ke=Dq,xKe=$Ke,EKe=xKe,SKe=EKe;(function(e){e.exports=SKe})(_Ke);(function(e){e.exports=u5})(wKe);var Tw=at(l5),c5={},kKe={get exports(){return c5},set exports(e){c5=e}},h5={},TKe={get exports(){return h5},set exports(e){h5=e}},IKe=TypeError,OKe=9007199254740991,Bq=function(e){if(e>OKe)throw IKe("Maximum allowed index exceeded");return e},AKe=Yt,CKe=Yr,PKe=fg,NKe=CKe("species"),kg=function(e){return PKe>=51||!AKe(function(){var r=[],t=r.constructor={};return t[NKe]=function(){return{foo:1}},r[e](Boolean).foo!==1})},RKe=dt,DKe=Yt,BKe=Hc,MKe=Nn,LKe=ss,FKe=fo,r7=Bq,n7=cf,jKe=yA,zKe=kg,HKe=Yr,UKe=fg,Mq=HKe("isConcatSpreadable"),KKe=UKe>=51||!DKe(function(){var e=[];return e[Mq]=!1,e.concat()[0]!==e}),WKe=function(e){if(!MKe(e))return!1;var r=e[Mq];return r!==void 0?!!r:BKe(e)},VKe=!KKe||!zKe("concat");RKe({target:"Array",proto:!0,arity:1,forced:VKe},{concat:function(r){var t=LKe(this),n=jKe(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],WKe(u))for(l=FKe(u),r7(i+l),o=0;o<l;o++,i++)o in u&&n7(n,i,u[o]);else r7(i+1),n7(n,i++,u);return n.length=i,n}});var qKe=Fr;qKe("asyncIterator");var GKe=Fr;GKe("hasInstance");var YKe=Fr;YKe("isConcatSpreadable");var ZKe=Fr;ZKe("iterator");var XKe=Fr;XKe("match");var JKe=Fr;JKe("matchAll");var QKe=Fr;QKe("replace");var eWe=Fr;eWe("search");var tWe=Fr;tWe("species");var rWe=Fr;rWe("split");var nWe=Fr,iWe=oq;nWe("toPrimitive");iWe();var sWe=Ns,oWe=Fr,aWe=lf;oWe("toStringTag");aWe(sWe("Symbol"),"Symbol");var lWe=Fr;lWe("unscopables");var uWe=ln,cWe=lf;cWe(uWe.JSON,"JSON",!0);var hWe=zt,dWe=hWe.Symbol,fWe=dWe,Lq=fWe,pWe=Fr;pWe("dispose");var vWe=Lq,gWe=vWe,yWe=Fr;yWe("asyncDispose");var mWe=dt,bWe=Ns,wWe=Zt,Fq=bWe("Symbol"),_We=Fq.keyFor,$We=wWe(Fq.prototype.valueOf);mWe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return _We($We(r))!==void 0}catch{return!1}}});var xWe=dt,EWe=Xl,jq=Ns,SWe=Zt,kWe=pg,TWe=Yr,Ob=jq("Symbol"),i7=Ob.isWellKnown,zq=jq("Object","getOwnPropertyNames"),IWe=SWe(Ob.prototype.valueOf),s7=EWe("wks");for(var K2=0,o7=zq(Ob),OWe=o7.length;K2<OWe;K2++)try{var a7=o7[K2];kWe(Ob[a7])&&TWe(a7)}catch{}xWe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(i7&&i7(r))return!0;try{for(var t=IWe(r),n=0,i=zq(s7),s=i.length;n<s;n++)if(s7[i[n]]==t)return!0}catch{}return!1}});var AWe=Fr;AWe("matcher");var CWe=Fr;CWe("metadataKey");var PWe=Fr;PWe("observable");var NWe=Fr;NWe("metadata");var RWe=Fr;RWe("patternMatch");var DWe=Fr;DWe("replaceAll");var BWe=gWe,MWe=BWe;(function(e){e.exports=MWe})(TKe);(function(e){e.exports=h5})(kKe);var Fh=at(c5),d5={},LWe={get exports(){return d5},set exports(e){d5=e}},f5={},FWe={get exports(){return f5},set exports(e){f5=e}},jWe=xg,zWe=jWe.f("iterator"),HWe=zWe,UWe=HWe,KWe=UWe,WWe=KWe,VWe=WWe,qWe=VWe;(function(e){e.exports=qWe})(FWe);(function(e){e.exports=f5})(LWe);var GWe=at(d5);function tr(e){"@babel/helpers - typeof";return tr=typeof Fh=="function"&&typeof GWe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Fh=="function"&&r.constructor===Fh&&r!==Fh.prototype?"symbol":typeof r},tr(e)}var p5={},YWe={get exports(){return p5},set exports(e){p5=e}},v5={},ZWe={get exports(){return v5},set exports(e){v5=e}},XWe=xg,JWe=XWe.f("toPrimitive"),QWe=JWe,eVe=QWe,tVe=eVe,rVe=tVe,nVe=rVe,iVe=nVe;(function(e){e.exports=iVe})(ZWe);(function(e){e.exports=v5})(YWe);var sVe=at(p5);function oVe(e,r){if(tr(e)!=="object"||e===null)return e;var t=e[sVe];if(t!==void 0){var n=t.call(e,r||"default");if(tr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Hq(e){var r=oVe(e,"string");return tr(r)==="symbol"?r:String(r)}function l7(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Tw(e,Hq(n.key),n)}}function He(e,r,t){return r&&l7(e.prototype,r),t&&l7(e,t),Tw(e,"prototype",{writable:!1}),e}function Iw(e,r,t){return r=Hq(r),r in e?Tw(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var g5={},aVe={get exports(){return g5},set exports(e){g5=e}},y5={},lVe={get exports(){return y5},set exports(e){y5=e}},uVe=dt,cVe=Hc;uVe({target:"Array",stat:!0},{isArray:cVe});var hVe=zt,dVe=hVe.Array.isArray,fVe=dVe,Uq=fVe,pVe=Uq,vVe=pVe,gVe=vVe,yVe=gVe;(function(e){e.exports=yVe})(lVe);(function(e){e.exports=y5})(aVe);var Kq=at(g5);function mVe(e){if(Kq(e))return e}function bVe(e,r){var t=e==null?null:typeof Fh<"u"&&Ha(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var m5={},wVe={get exports(){return m5},set exports(e){m5=e}},b5={},_Ve={get exports(){return b5},set exports(e){b5=e}},$Ve=dt,u7=Hc,xVe=yw,EVe=Nn,c7=yg,SVe=fo,kVe=ho,TVe=cf,IVe=Yr,OVe=kg,AVe=fw,CVe=OVe("slice"),PVe=IVe("species"),W2=Array,NVe=Math.max;$Ve({target:"Array",proto:!0,forced:!CVe},{slice:function(r,t){var n=kVe(this),i=SVe(n),s=c7(r,i),o=c7(t===void 0?i:t,i),a,l,u;if(u7(n)&&(a=n.constructor,xVe(a)&&(a===W2||u7(a.prototype))?a=void 0:EVe(a)&&(a=a[PVe],a===null&&(a=void 0)),a===W2||a===void 0))return AVe(n,s,o);for(l=new(a===void 0?W2:a)(NVe(o-s,0)),u=0;s<o;s++,u++)s in n&&TVe(l,u,n[s]);return l.length=u,l}});var RVe=Dn,DVe=RVe("Array").slice,BVe=Gr,MVe=DVe,V2=Array.prototype,LVe=function(e){var r=e.slice;return e===V2||BVe(V2,e)&&r===V2.slice?MVe:r},FVe=LVe,Wq=FVe,jVe=Wq,zVe=jVe,HVe=zVe,UVe=HVe;(function(e){e.exports=UVe})(_Ve);(function(e){e.exports=b5})(wVe);var KVe=at(m5),w5={},WVe={get exports(){return w5},set exports(e){w5=e}},_5={},VVe={get exports(){return _5},set exports(e){_5=e}},qVe=eq,GVe=qVe,YVe=GVe,ZVe=YVe;(function(e){e.exports=ZVe})(VVe);(function(e){e.exports=_5})(WVe);var Vq=at(w5);function $5(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function qq(e,r){var t;if(e){if(typeof e=="string")return $5(e,r);var n=KVe(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Vq(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $5(e,r)}}function XVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(e,r){return mVe(e)||bVe(e,r)||qq(e,r)||XVe()}function JVe(e){if(Kq(e))return $5(e)}function QVe(e){if(typeof Fh<"u"&&Ha(e)!=null||e["@@iterator"]!=null)return Vq(e)}function eqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function To(e){return JVe(e)||QVe(e)||qq(e)||eqe()}var x5={},tqe={get exports(){return x5},set exports(e){x5=e}};(function(e){e.exports=Lq})(tqe);var cu=at(x5),E5={},rqe={get exports(){return E5},set exports(e){E5=e}},nqe=Dn,iqe=nqe("Array").concat,sqe=Gr,oqe=iqe,q2=Array.prototype,aqe=function(e){var r=e.concat;return e===q2||sqe(q2,e)&&r===q2.concat?oqe:r},lqe=aqe,uqe=lqe;(function(e){e.exports=uqe})(rqe);var xA=at(E5),S5={},cqe={get exports(){return S5},set exports(e){S5=e}};(function(e){e.exports=Wq})(cqe);var Kn=at(S5),h7={},hqe={get exports(){return h7},set exports(e){h7=e}},dqe=dt,fqe=Pq;dqe({target:"Reflect",stat:!0},{ownKeys:fqe});var pqe=zt,vqe=pqe.Reflect.ownKeys,gqe=vqe,yqe=gqe;(function(e){e.exports=yqe})(hqe);var k5={},mqe={get exports(){return k5},set exports(e){k5=e}};(function(e){e.exports=Uq})(mqe);var or=at(k5),T5={},bqe={get exports(){return T5},set exports(e){T5=e}},wqe=dt,_qe=lu.map,$qe=kg,xqe=$qe("map");wqe({target:"Array",proto:!0,forced:!xqe},{map:function(r){return _qe(this,r,arguments.length>1?arguments[1]:void 0)}});var Eqe=Dn,Sqe=Eqe("Array").map,kqe=Gr,Tqe=Sqe,G2=Array.prototype,Iqe=function(e){var r=e.map;return e===G2||kqe(G2,e)&&r===G2.map?Tqe:r},Oqe=Iqe,Aqe=Oqe;(function(e){e.exports=Aqe})(bqe);var Ad=at(T5),I5={},Cqe={get exports(){return I5},set exports(e){I5=e}},Pqe=dt,Nqe=ss,Gq=bg,Rqe=Yt,Dqe=Rqe(function(){Gq(1)});Pqe({target:"Object",stat:!0,forced:Dqe},{keys:function(r){return Gq(Nqe(r))}});var Bqe=zt,Mqe=Bqe.Object.keys,Lqe=Mqe,Fqe=Lqe;(function(e){e.exports=Fqe})(Cqe);var Rr=at(I5),O5={},jqe={get exports(){return O5},set exports(e){O5=e}},zqe=dt,Hqe=Zt,Yq=Date,Uqe=Hqe(Yq.prototype.getTime);zqe({target:"Date",stat:!0},{now:function(){return Uqe(new Yq)}});var Kqe=zt,Wqe=Kqe.Date.now,Vqe=Wqe,qqe=Vqe;(function(e){e.exports=qqe})(jqe);var Ab=at(O5),A5={},Gqe={get exports(){return A5},set exports(e){A5=e}},Yqe=Yt,hf=function(e,r){var t=[][e];return!!t&&Yqe(function(){t.call(null,r||function(){return 1},1)})},Zqe=lu.forEach,Xqe=hf,Jqe=Xqe("forEach"),Qqe=Jqe?[].forEach:function(r){return Zqe(this,r,arguments.length>1?arguments[1]:void 0)},eGe=dt,d7=Qqe;eGe({target:"Array",proto:!0,forced:[].forEach!=d7},{forEach:d7});var tGe=Dn,rGe=tGe("Array").forEach,nGe=rGe,iGe=nGe,sGe=Fc,oGe=Rn,aGe=Gr,lGe=iGe,Y2=Array.prototype,uGe={DOMTokenList:!0,NodeList:!0},cGe=function(e){var r=e.forEach;return e===Y2||aGe(Y2,e)&&r===Y2.forEach||oGe(uGe,sGe(e))?lGe:r};(function(e){e.exports=cGe})(Gqe);var fr=at(A5),C5={},hGe={get exports(){return C5},set exports(e){C5=e}},dGe=dt,fGe=Zt,pGe=Hc,vGe=fGe([].reverse),f7=[1,2];dGe({target:"Array",proto:!0,forced:String(f7)===String(f7.reverse())},{reverse:function(){return pGe(this)&&(this.length=this.length),vGe(this)}});var gGe=Dn,yGe=gGe("Array").reverse,mGe=Gr,bGe=yGe,Z2=Array.prototype,wGe=function(e){var r=e.reverse;return e===Z2||mGe(Z2,e)&&r===Z2.reverse?bGe:r},_Ge=wGe,$Ge=_Ge;(function(e){e.exports=$Ge})(hGe);var ac=at(C5),P5={},xGe={get exports(){return P5},set exports(e){P5=e}},EGe=bn,SGe=Hc,kGe=TypeError,TGe=Object.getOwnPropertyDescriptor,IGe=EGe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),OGe=IGe?function(e,r){if(SGe(e)&&!TGe(e,"length").writable)throw kGe("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},p7=sf,AGe=TypeError,Zq=function(e,r){if(!delete e[r])throw AGe("Cannot delete property "+p7(r)+" of "+p7(e))},CGe=dt,PGe=ss,NGe=yg,RGe=dw,DGe=fo,BGe=OGe,MGe=Bq,LGe=yA,FGe=cf,X2=Zq,jGe=kg,zGe=jGe("splice"),HGe=Math.max,UGe=Math.min;CGe({target:"Array",proto:!0,forced:!zGe},{splice:function(r,t){var n=PGe(this),i=DGe(n),s=NGe(r,i),o=arguments.length,a,l,u,d,h,v;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=UGe(HGe(RGe(t),0),i-s)),MGe(i+a-l),u=LGe(n,l),d=0;d<l;d++)h=s+d,h in n&&FGe(u,d,n[h]);if(u.length=l,a<l){for(d=s;d<i-l;d++)h=d+l,v=d+a,h in n?n[v]=n[h]:X2(n,v);for(d=i;d>i-l+a;d--)X2(n,d-1)}else if(a>l)for(d=i-l;d>s;d--)h=d+l-1,v=d+a-1,h in n?n[v]=n[h]:X2(n,v);for(d=0;d<a;d++)n[d+s]=arguments[d+2];return BGe(n,i-l+a),u}});var KGe=Dn,WGe=KGe("Array").splice,VGe=Gr,qGe=WGe,J2=Array.prototype,GGe=function(e){var r=e.splice;return e===J2||VGe(J2,e)&&r===J2.splice?qGe:r},YGe=GGe,ZGe=YGe;(function(e){e.exports=ZGe})(xGe);var _a=at(P5),N5={},XGe={get exports(){return N5},set exports(e){N5=e}},JGe=dt,QGe=aA.includes,eYe=Yt,tYe=eYe(function(){return!Array(1).includes()});JGe({target:"Array",proto:!0,forced:tYe},{includes:function(r){return QGe(this,r,arguments.length>1?arguments[1]:void 0)}});var rYe=Dn,nYe=rYe("Array").includes,iYe=Nn,sYe=za,oYe=Yr,aYe=oYe("match"),lYe=function(e){var r;return iYe(e)&&((r=e[aYe])!==void 0?!!r:sYe(e)=="RegExp")},uYe=lYe,cYe=TypeError,hYe=function(e){if(uYe(e))throw cYe("The method doesn't accept regular expressions");return e},dYe=Yr,fYe=dYe("match"),pYe=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[fYe]=!1,"/./"[e](r)}catch{}}return!1},vYe=dt,gYe=Zt,yYe=hYe,mYe=hg,v7=Uo,bYe=pYe,wYe=gYe("".indexOf);vYe({target:"String",proto:!0,forced:!bYe("includes")},{includes:function(r){return!!~wYe(v7(mYe(this)),v7(yYe(r)),arguments.length>1?arguments[1]:void 0)}});var _Ye=Dn,$Ye=_Ye("String").includes,g7=Gr,xYe=nYe,EYe=$Ye,Q2=Array.prototype,eE=String.prototype,SYe=function(e){var r=e.includes;return e===Q2||g7(Q2,e)&&r===Q2.includes?xYe:typeof e=="string"||e===eE||g7(eE,e)&&r===eE.includes?EYe:r},kYe=SYe,TYe=kYe;(function(e){e.exports=TYe})(XGe);var No=at(N5),R5={},IYe={get exports(){return R5},set exports(e){R5=e}},OYe=dt,AYe=Yt,CYe=ss,Xq=gw,PYe=jV,NYe=AYe(function(){Xq(1)});OYe({target:"Object",stat:!0,forced:NYe,sham:!PYe},{getPrototypeOf:function(r){return Xq(CYe(r))}});var RYe=zt,DYe=RYe.Object.getPrototypeOf,BYe=DYe,Jq=BYe;(function(e){e.exports=Jq})(IYe);var y7=at(R5),D5={},MYe={get exports(){return D5},set exports(e){D5=e}},LYe=dt,FYe=lu.filter,jYe=kg,zYe=jYe("filter");LYe({target:"Array",proto:!0,forced:!zYe},{filter:function(r){return FYe(this,r,arguments.length>1?arguments[1]:void 0)}});var HYe=Dn,UYe=HYe("Array").filter,KYe=Gr,WYe=UYe,tE=Array.prototype,VYe=function(e){var r=e.filter;return e===tE||KYe(tE,e)&&r===tE.filter?WYe:r},qYe=VYe,GYe=qYe;(function(e){e.exports=GYe})(MYe);var Oi=at(D5),m7={},YYe={get exports(){return m7},set exports(e){m7=e}},ZYe=bn,Qq=Zt,XYe=bg,JYe=ho,QYe=lg.f,eZe=Qq(QYe),tZe=Qq([].push),b7=function(e){return function(r){for(var t=JYe(r),n=XYe(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!ZYe||eZe(t,a))&&tZe(o,e?[a,t[a]]:t[a]);return o}},rZe={entries:b7(!0),values:b7(!1)},nZe=dt,iZe=rZe.values;nZe({target:"Object",stat:!0},{values:function(r){return iZe(r)}});var sZe=zt,oZe=sZe.Object.values,aZe=oZe,lZe=aZe;(function(e){e.exports=lZe})(YYe);var B5={},uZe={get exports(){return B5},set exports(e){B5=e}},Ow=`	
\v\f\r                　\u2028\u2029\uFEFF`,cZe=Zt,hZe=hg,dZe=Uo,M5=Ow,w7=cZe("".replace),fZe=RegExp("^["+M5+"]+"),pZe=RegExp("(^|[^"+M5+"])["+M5+"]+$"),rE=function(e){return function(r){var t=dZe(hZe(r));return e&1&&(t=w7(t,fZe,"")),e&2&&(t=w7(t,pZe,"$1")),t}},EA={start:rE(1),end:rE(2),trim:rE(3)},eG=ln,vZe=Yt,gZe=Zt,yZe=Uo,mZe=EA.trim,_7=Ow,Ep=eG.parseInt,$7=eG.Symbol,x7=$7&&$7.iterator,tG=/^[+-]?0x/i,bZe=gZe(tG.exec),wZe=Ep(_7+"08")!==8||Ep(_7+"0x16")!==22||x7&&!vZe(function(){Ep(Object(x7))}),_Ze=wZe?function(r,t){var n=mZe(yZe(r));return Ep(n,t>>>0||(bZe(tG,n)?16:10))}:Ep,$Ze=dt,E7=_Ze;$Ze({global:!0,forced:parseInt!=E7},{parseInt:E7});var xZe=zt,EZe=xZe.parseInt,SZe=EZe,kZe=SZe;(function(e){e.exports=kZe})(uZe);var Ws=at(B5),L5={},TZe={get exports(){return L5},set exports(e){L5=e}},IZe=dt,OZe=iA,AZe=aA.indexOf,CZe=hf,F5=OZe([].indexOf),rG=!!F5&&1/F5([1],1,-0)<0,PZe=rG||!CZe("indexOf");IZe({target:"Array",proto:!0,forced:PZe},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return rG?F5(this,r,t)||0:AZe(this,r,t)}});var NZe=Dn,RZe=NZe("Array").indexOf,DZe=Gr,BZe=RZe,nE=Array.prototype,MZe=function(e){var r=e.indexOf;return e===nE||DZe(nE,e)&&r===nE.indexOf?BZe:r},LZe=MZe,FZe=LZe;(function(e){e.exports=FZe})(TZe);var Vt=at(L5),S7={},jZe={get exports(){return S7},set exports(e){S7=e}},zZe=MV.PROPER,HZe=Yt,k7=Ow,T7="​᠎",UZe=function(e){return HZe(function(){return!!k7[e]()||T7[e]()!==T7||zZe&&k7[e].name!==e})},KZe=dt,WZe=EA.trim,VZe=UZe;KZe({target:"String",proto:!0,forced:VZe("trim")},{trim:function(){return WZe(this)}});var qZe=Dn,GZe=qZe("String").trim,YZe=Gr,ZZe=GZe,iE=String.prototype,XZe=function(e){var r=e.trim;return typeof e=="string"||e===iE||YZe(iE,e)&&r===iE.trim?ZZe:r},JZe=XZe,QZe=JZe;(function(e){e.exports=QZe})(jZe);var j5={},eXe={get exports(){return j5},set exports(e){j5=e}},tXe=dt,rXe=bn,nXe=af;tXe({target:"Object",stat:!0,sham:!rXe},{create:nXe});var iXe=zt,sXe=iXe.Object,oXe=function(r,t){return sXe.create(r,t)},aXe=oXe,nG=aXe;(function(e){e.exports=nG})(eXe);var lc=at(j5),z5={},lXe={get exports(){return z5},set exports(e){z5=e}},H5=zt,uXe=ag;H5.JSON||(H5.JSON={stringify:JSON.stringify});var cXe=function(r,t,n){return uXe(H5.JSON.stringify,null,arguments)},hXe=cXe,dXe=hXe;(function(e){e.exports=dXe})(lXe);var Tg=at(z5),U5={},fXe={get exports(){return U5},set exports(e){U5=e}},pXe=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",vXe=TypeError,gXe=function(e,r){if(e<r)throw vXe("Not enough arguments");return e},iG=ln,yXe=ag,mXe=Pn,bXe=pXe,wXe=dg,_Xe=fw,$Xe=gXe,xXe=iG.Function,EXe=/MSIE .\./.test(wXe)||bXe&&function(){var e=iG.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),sG=function(e,r){var t=r?2:1;return EXe?function(n,i){var s=$Xe(arguments.length,1)>t,o=mXe(n)?n:xXe(n),a=s?_Xe(arguments,t):[],l=s?function(){yXe(o,this,a)}:o;return r?e(l,i):e(l)}:e},SXe=dt,oG=ln,kXe=sG,I7=kXe(oG.setInterval,!0);SXe({global:!0,bind:!0,forced:oG.setInterval!==I7},{setInterval:I7});var TXe=dt,aG=ln,IXe=sG,O7=IXe(aG.setTimeout,!0);TXe({global:!0,bind:!0,forced:aG.setTimeout!==O7},{setTimeout:O7});var OXe=zt,AXe=OXe.setTimeout;(function(e){e.exports=AXe})(fXe);var Ro=at(U5),K5={},CXe={get exports(){return K5},set exports(e){K5=e}},PXe=ss,A7=yg,NXe=fo,RXe=function(r){for(var t=PXe(this),n=NXe(t),i=arguments.length,s=A7(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:A7(o,n);a>s;)t[s++]=r;return t},DXe=dt,BXe=RXe;DXe({target:"Array",proto:!0},{fill:BXe});var MXe=Dn,LXe=MXe("Array").fill,FXe=Gr,jXe=LXe,sE=Array.prototype,zXe=function(e){var r=e.fill;return e===sE||FXe(sE,e)&&r===sE.fill?jXe:r},HXe=zXe,UXe=HXe;(function(e){e.exports=UXe})(CXe);var Ig=at(K5);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function so(){return so=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},so.apply(this,arguments)}function Ds(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function Bm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var W5;typeof Object.assign!="function"?W5=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:W5=Object.assign;var $c=W5,C7=["","webkit","Moz","MS","ms","o"],KXe=typeof document>"u"?{style:{}}:document.createElement("div"),WXe="function",jh=Math.round,xc=Math.abs,SA=Date.now;function Aw(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<C7.length;){if(t=C7[s],n=t?t+i:r,n in e)return n;s++}}var $a;typeof window>"u"?$a={}:$a=window;var lG=Aw(KXe.style,"touchAction"),uG=lG!==void 0;function VXe(){if(!uG)return!1;var e={},r=$a.CSS&&$a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?$a.CSS.supports("touch-action",t):!0}),e}var cG="compute",hG="auto",V5="manipulation",uc="none",fv="pan-x",pv="pan-y",Mm=VXe(),qXe=/mobile|tablet|ip(ad|hone|od)|android/i,dG="ontouchstart"in $a,GXe=Aw($a,"PointerEvent")!==void 0,YXe=dG&&qXe.test(navigator.userAgent),Og="touch",ZXe="pen",kA="mouse",XXe="kinect",JXe=25,pi=1,Uc=2,sn=4,Ni=8,Cb=1,Ag=2,Cg=4,Pg=8,Cd=16,Do=Ag|Cg,cc=Pg|Cd,fG=Do|cc,pG=["x","y"],Pb=["clientX","clientY"];function xa(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function Cw(e,r){return typeof e===WXe?e.apply(r&&r[0]||void 0,r):e}function qu(e,r){return e.indexOf(r)>-1}function QXe(e){if(qu(e,uc))return uc;var r=qu(e,fv),t=qu(e,pv);return r&&t?uc:r||t?r?fv:pv:qu(e,V5)?V5:hG}var vG=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===cG&&(n=this.compute()),uG&&this.manager.element.style&&Mm[n]&&(this.manager.element.style[lG]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return xa(this.manager.recognizers,function(i){Cw(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),QXe(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=qu(o,uc)&&!Mm[uc],l=qu(o,pv)&&!Mm[pv],u=qu(o,fv)&&!Mm[fv];if(a){var d=n.pointers.length===1,h=n.distance<2,v=n.deltaTime<250;if(d&&h&&v)return}if(!(u&&l)&&(a||l&&s&Do||u&&s&cc))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function TA(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function gG(e){var r=e.length;if(r===1)return{x:jh(e[0].clientX),y:jh(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:jh(t/r),y:jh(n/r)}}function P7(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:jh(e.pointers[t].clientX),clientY:jh(e.pointers[t].clientY)},t++;return{timeStamp:SA(),pointers:r,center:gG(r),deltaX:e.deltaX,deltaY:e.deltaY}}function Nb(e,r,t){t||(t=pG);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function q5(e,r,t){t||(t=pG);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function yG(e,r){return e===r?Cb:xc(e)>=xc(r)?e<0?Ag:Cg:r<0?Pg:Cd}function eJe(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===pi||s.eventType===sn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function mG(e,r,t){return{x:r/e||0,y:t/e||0}}function tJe(e,r){return Nb(r[0],r[1],Pb)/Nb(e[0],e[1],Pb)}function rJe(e,r){return q5(r[1],r[0],Pb)+q5(e[1],e[0],Pb)}function nJe(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ni&&(n>JXe||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,d=mG(n,l,u);s=d.x,o=d.y,i=xc(d.x)>xc(d.y)?d.x:d.y,a=yG(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function iJe(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=P7(r)),i>1&&!t.firstMultiple?t.firstMultiple=P7(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=gG(n);r.timeStamp=SA(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=q5(a,l),r.distance=Nb(a,l),eJe(t,r),r.offsetDirection=yG(r.deltaX,r.deltaY);var u=mG(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=xc(u.x)>xc(u.y)?u.x:u.y,r.scale=o?tJe(o.pointers,n):1,r.rotation=o?rJe(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,nJe(t,r);var d=e.element,h=r.srcEvent,v;h.composedPath?v=h.composedPath()[0]:h.path?v=h.path[0]:v=h.target,TA(v,d)&&(d=v),r.target=d}function sJe(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&pi&&n-i===0,o=r&(sn|Ni)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,iJe(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function vv(e){return e.trim().split(/\s+/g)}function Sp(e,r,t){xa(vv(r),function(n){e.addEventListener(n,t,!1)})}function kp(e,r,t){xa(vv(r),function(n){e.removeEventListener(n,t,!1)})}function N7(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var df=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Cw(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&Sp(this.element,this.evEl,this.domHandler),this.evTarget&&Sp(this.target,this.evTarget,this.domHandler),this.evWin&&Sp(N7(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&kp(this.element,this.evEl,this.domHandler),this.evTarget&&kp(this.target,this.evTarget,this.domHandler),this.evWin&&kp(N7(this.element),this.evWin,this.domHandler)},e}();function Ec(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var oJe={pointerdown:pi,pointermove:Uc,pointerup:sn,pointercancel:Ni,pointerout:Ni},aJe={2:Og,3:ZXe,4:kA,5:XXe},bG="pointerdown",wG="pointermove pointerup pointercancel";$a.MSPointerEvent&&!$a.PointerEvent&&(bG="MSPointerDown",wG="MSPointerMove MSPointerUp MSPointerCancel");var _G=function(e){Ds(r,e);function r(){var n,i=r.prototype;return i.evEl=bG,i.evWin=wG,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=oJe[a],u=aJe[i.pointerType]||i.pointerType,d=u===Og,h=Ec(s,i.pointerId,"pointerId");l&pi&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(sn|Ni)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},r}(df);function gv(e){return Array.prototype.slice.call(e,0)}function IA(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Ec(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var lJe={touchstart:pi,touchmove:Uc,touchend:sn,touchcancel:Ni},uJe="touchstart touchmove touchend touchcancel",OA=function(e){Ds(r,e);function r(){var n;return r.prototype.evTarget=uJe,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=lJe[i.type],o=cJe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Og,srcEvent:i})},r}(df);function cJe(e,r){var t=gv(e.touches),n=this.targetIds;if(r&(pi|Uc)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=gv(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return TA(u.target,l)}),r===pi)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(sn|Ni)&&delete n[o[i].identifier],i++;if(a.length)return[IA(s.concat(a),"identifier",!0),a]}var hJe={mousedown:pi,mousemove:Uc,mouseup:sn},dJe="mousedown",fJe="mousemove mouseup",AA=function(e){Ds(r,e);function r(){var n,i=r.prototype;return i.evEl=dJe,i.evWin=fJe,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=hJe[i.type];s&pi&&i.button===0&&(this.pressed=!0),s&Uc&&i.which!==1&&(s=sn),this.pressed&&(s&sn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:kA,srcEvent:i}))},r}(df),pJe=2500,R7=25;function D7(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,pJe)}}function vJe(e,r){e&pi?(this.primaryTouch=r.changedPointers[0].identifier,D7.call(this,r)):e&(sn|Ni)&&D7.call(this,r)}function gJe(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=R7&&o<=R7)return!0}return!1}var $G=function(){var e=function(r){Ds(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===Og,h=u.pointerType===kA;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)vJe.call(Bm(Bm(o)),l,u);else if(h&&gJe.call(Bm(Bm(o)),u))return;o.callback(a,l,u)}},o.touch=new OA(o.manager,o.handler),o.mouse=new AA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(df);return e}();function yJe(e){var r,t=e.options.inputClass;return t?r=t:GXe?r=_G:YXe?r=OA:dG?r=$G:r=AA,new r(e,sJe)}function zh(e,r,t){return Array.isArray(e)?(xa(e,t[r],t),!0):!1}var w0=1,As=2,Pd=4,zl=8,Ea=zl,yv=16,Ao=32,mJe=1;function bJe(){return mJe++}function Lm(e,r){var t=r.manager;return t?t.get(e):e}function B7(e){return e&yv?"cancel":e&zl?"end":e&Pd?"move":e&As?"start":""}var Ng=function(){function e(t){t===void 0&&(t={}),this.options=so({enable:!0},t),this.id=bJe(),this.manager=null,this.state=w0,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return $c(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(zh(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Lm(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return zh(n,"dropRecognizeWith",this)?this:(n=Lm(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(zh(n,"requireFailure",this))return this;var i=this.requireFail;return n=Lm(n,this),Ec(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(zh(n,"dropRequireFailure",this))return this;n=Lm(n,this);var i=Ec(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<zl&&o(i.options.event+B7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=zl&&o(i.options.event+B7(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ao},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ao|w0)))return!1;n++}return!0},r.recognize=function(n){var i=$c({},n);if(!Cw(this.options.enable,[this,i])){this.reset(),this.state=Ao;return}this.state&(Ea|yv|Ao)&&(this.state=w0),this.state=this.process(i),this.state&(As|Pd|zl|yv)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),G5=function(e){Ds(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,so({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[V5]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&pi&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==sn)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Nb(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var v=this.count%o.taps;if(v===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=Ea,s.tryEmit()},o.interval),As):Ea}return Ao},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ao},this.options.interval),Ao},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Ea&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Ng),Nd=function(e){Ds(r,e);function r(n){return n===void 0&&(n={}),e.call(this,so({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(As|Pd),l=this.attrTest(i);return a&&(o&Ni||!l)?s|yv:a||l?o&sn?s|zl:s&As?s|Pd:As:Ao},r}(Ng);function xG(e){return e===Cd?"down":e===Pg?"up":e===Ag?"left":e===Cg?"right":""}var CA=function(e){Ds(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,so({event:"pan",threshold:10,pointers:1,direction:fG},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&Do&&s.push(pv),i&cc&&s.push(fv),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Do?(l=u===0?Cb:u<0?Ag:Cg,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Cb:d<0?Pg:Cd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return Nd.prototype.attrTest.call(this,i)&&(this.state&As||!(this.state&As)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=xG(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(Nd),EG=function(e){Ds(r,e);function r(n){return n===void 0&&(n={}),e.call(this,so({event:"swipe",threshold:10,velocity:.3,direction:Do|cc,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return CA.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(Do|cc)?o=i.overallVelocity:s&Do?o=i.overallVelocityX:s&cc&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&xc(o)>this.options.velocity&&i.eventType&sn},t.emit=function(i){var s=xG(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(Nd),SG=function(e){Ds(r,e);function r(n){return n===void 0&&(n={}),e.call(this,so({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[uc]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&As)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(Nd),kG=function(e){Ds(r,e);function r(n){return n===void 0&&(n={}),e.call(this,so({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[uc]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&As)},r}(Nd),TG=function(e){Ds(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,so({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[hG]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(sn|Ni)&&!u)this.reset();else if(i.eventType&pi)this.reset(),this._timer=setTimeout(function(){s.state=Ea,s.tryEmit()},o.time);else if(i.eventType&sn)return Ea;return Ao},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===Ea&&(i&&i.eventType&sn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=SA(),this.manager.emit(this.options.event,this._input)))},r}(Ng),IG={domEvents:!1,touchAction:cG,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},M7=[[kG,{enable:!1}],[SG,{enable:!1},["rotate"]],[EG,{direction:Do}],[CA,{direction:Do},["swipe"]],[G5],[G5,{event:"doubletap",taps:2},["tap"]],[TG]],wJe=1,L7=2;function F7(e,r){var t=e.element;if(t.style){var n;xa(e.options.cssProps,function(i,s){n=Aw(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function _Je(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var j7=function(){function e(t,n){var i=this;this.options=$c({},IG,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=yJe(this),this.touchAction=new vG(this,this.options.touchAction),F7(this,!0),xa(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return $c(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?L7:wJe},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&Ea)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==L7&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(As|Pd|zl)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof Ng)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(zh(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(zh(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Ec(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return xa(vv(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return xa(vv(n),function(o){i?s[o]&&s[o].splice(Ec(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&_Je(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&F7(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),$Je={touchstart:pi,touchmove:Uc,touchend:sn,touchcancel:Ni},xJe="touchstart",EJe="touchstart touchmove touchend touchcancel",SJe=function(e){Ds(r,e);function r(){var n,i=r.prototype;return i.evTarget=xJe,i.evWin=EJe,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=$Je[i.type];if(s===pi&&(this.started=!0),!!this.started){var o=kJe.call(this,i,s);s&(sn|Ni)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Og,srcEvent:i})}},r}(df);function kJe(e,r){var t=gv(e.touches),n=gv(e.changedTouches);return r&(sn|Ni)&&(t=IA(t.concat(n),"identifier",!0)),[t,n]}function OG(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var AG=OG(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),TJe=OG(function(e,r){return AG(e,r,!0)},"merge","Use `assign`.");function IJe(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&$c(i,t)}function z7(e,r){return function(){return e.apply(r,arguments)}}var CG=function(){var e=function(t,n){return n===void 0&&(n={}),new j7(t,so({recognizers:M7.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=fG,e.DIRECTION_DOWN=Cd,e.DIRECTION_LEFT=Ag,e.DIRECTION_RIGHT=Cg,e.DIRECTION_UP=Pg,e.DIRECTION_HORIZONTAL=Do,e.DIRECTION_VERTICAL=cc,e.DIRECTION_NONE=Cb,e.DIRECTION_DOWN=Cd,e.INPUT_START=pi,e.INPUT_MOVE=Uc,e.INPUT_END=sn,e.INPUT_CANCEL=Ni,e.STATE_POSSIBLE=w0,e.STATE_BEGAN=As,e.STATE_CHANGED=Pd,e.STATE_ENDED=zl,e.STATE_RECOGNIZED=Ea,e.STATE_CANCELLED=yv,e.STATE_FAILED=Ao,e.Manager=j7,e.Input=df,e.TouchAction=vG,e.TouchInput=OA,e.MouseInput=AA,e.PointerEventInput=_G,e.TouchMouseInput=$G,e.SingleTouchInput=SJe,e.Recognizer=Ng,e.AttrRecognizer=Nd,e.Tap=G5,e.Pan=CA,e.Swipe=EG,e.Pinch=SG,e.Rotate=kG,e.Press=TG,e.on=Sp,e.off=kp,e.each=xa,e.merge=TJe,e.extend=AG,e.bindFn=z7,e.assign=$c,e.inherit=IJe,e.bindFn=z7,e.prefixed=Aw,e.toArray=gv,e.inArray=Ec,e.uniqueArray=IA,e.splitStr=vv,e.boolOrFn=Cw,e.hasParent=TA,e.addEventListeners=Sp,e.removeEventListeners=kp,e.defaults=$c({},IG,{preset:M7}),e}();CG.defaults;var OJe=CG;function PG(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=AJe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function AJe(e,r){var t;if(e){if(typeof e=="string")return H7(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H7(e,r)}}function H7(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}cu("DELETE");function Pw(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return CJe(r.length?r:[Ab()])}function CJe(e){var r=PJe(e),t=Dr(r,3),n=t[0],i=t[1],s=t[2],o=1,a=function(){var u=2091639*n+o*23283064365386963e-26;return n=i,i=s,s=u-(o=u|0)};return a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function PJe(){for(var e=NJe(),r=e(" "),t=e(" "),n=e(" "),i=0;i<arguments.length;i++)r-=e(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),t-=e(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=e(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[r,t,n]}function NJe(){var e=4022871197;return function(r){for(var t=r.toString(),n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function RJe(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var PA=typeof window<"u"?window.Hammer||OJe:function(){return RJe()};function Co(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=PA(this._dom.overlay);n.on("tap",De(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];fr(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){DJe(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}PV(Co.prototype);Co.current=null;Co.prototype.destroy=function(){var e,r;this.deactivate();var t=PG(ac(e=_a(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};Co.prototype.activate=function(){Co.current&&Co.current.deactivate(),Co.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Co.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Co.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function DJe(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var BJe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,MJe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,LJe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,FJe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function kl(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(kl(r),e.removeChild(r))}}function Al(e){return e instanceof String||typeof e=="string"}function U7(e){return tr(e)==="object"&&e!==null}function Sc(e,r,t,n){var i=!1;n===!0&&(i=r[t]===null&&e[t]!==void 0),i?delete e[t]:e[t]=r[t]}function NG(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var n in e)if(r[n]!==void 0)if(r[n]===null||tr(r[n])!=="object")Sc(e,r,n,t);else{var i=e[n],s=r[n];U7(i)&&U7(s)&&NG(i,s,t)}}function ff(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(or(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var s=e[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)r[s]===void 0&&(r[s]={}),r[s].constructor===Object?br(r[s],t[s],!1,n):Sc(r,t,s,n);else{if(or(t[s]))throw new TypeError("Arrays are not supported by deepExtend");Sc(r,t,s,n)}}return r}function Rb(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(or(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!No(e).call(e,i))if(t[i]&&t[i].constructor===Object)r[i]===void 0&&(r[i]={}),r[i].constructor===Object?br(r[i],t[i]):Sc(r,t,i,n);else if(or(t[i])){r[i]=[];for(var s=0;s<t[i].length;s++)r[i].push(t[i][s])}else Sc(r,t,i,n);return r}function br(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)||t===!0)if(tr(r[i])==="object"&&r[i]!==null&&y7(r[i])===Object.prototype)e[i]===void 0?e[i]=br({},r[i],t):tr(e[i])==="object"&&e[i]!==null&&y7(e[i])===Object.prototype?br(e[i],r[i],t):Sc(e,r,i,n);else if(or(r[i])){var s;e[i]=Kn(s=r[i]).call(s)}else Sc(e,r,i,n);return e}function Db(e,r){var t;return xA(t=[]).call(t,To(e),[r])}function jJe(e){return Kn(e).call(e)}function zJe(e){return e.getBoundingClientRect().left}function HJe(e){return e.getBoundingClientRect().top}function Dt(e,r){if(or(e))for(var t=e.length,n=0;n<t;n++)r(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r(e[i],i,e)}function UJe(e,r,t,n){if(e.addEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&No(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,n)}else e.attachEvent("on"+r,t)}function KJe(e,r,t,n){if(e.removeEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&No(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,n)}else e.detachEvent("on"+r,t)}function NA(e){var r;switch(e.length){case 3:case 4:return r=MJe.exec(e),r?{r:Ws(r[1]+r[1],16),g:Ws(r[2]+r[2],16),b:Ws(r[3]+r[3],16)}:null;case 6:case 7:return r=BJe.exec(e),r?{r:Ws(r[1],16),g:Ws(r[2],16),b:Ws(r[3],16)}:null;default:return null}}function ks(e,r){if(No(e).call(e,"rgba"))return e;if(No(e).call(e,"rgb")){var t=e.substr(Vt(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var n=NA(e);return n==null?e:"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}function RG(e,r,t){var n;return"#"+Kn(n=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(n,1)}function Y5(e,r){if(Al(e)){var t=e;if(BG(t)){var n,i=Ad(n=t.substr(4).substr(0,t.length-5).split(",")).call(n,function(v){return Ws(v)});t=RG(i[0],i[1],i[2])}if(DG(t)===!0){var s=WJe(t),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=Z5(a.h,a.s,a.v),u=Z5(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var d={background:e.background||r.background,border:e.border||r.border,highlight:Al(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:Al(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return d}else{var h={background:e.background||void 0,border:e.border||void 0,highlight:Al(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:Al(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return h}}function op(e,r,t){e=e/255,r=r/255,t=t/255;var n=Math.min(e,Math.min(r,t)),i=Math.max(e,Math.max(r,t));if(n===i)return{h:0,s:0,v:n};var s=e===n?r-t:t===n?e-r:t-e,o=e===n?3:t===n?1:5,a=60*(o-s/(i-n))/360,l=(i-n)/i,u=i;return{h:a,s:l,v:u}}function _0(e,r,t){var n,i,s,o=Math.floor(e*6),a=e*6-o,l=t*(1-r),u=t*(1-a*r),d=t*(1-(1-a)*r);switch(o%6){case 0:n=t,i=d,s=l;break;case 1:n=u,i=t,s=l;break;case 2:n=l,i=t,s=d;break;case 3:n=l,i=u,s=t;break;case 4:n=d,i=l,s=t;break;case 5:n=t,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function Z5(e,r,t){var n=_0(e,r,t);return RG(n.r,n.g,n.b)}function WJe(e){var r=NA(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return op(r.r,r.g,r.b)}function DG(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function BG(e){return LJe.test(e)}function VJe(e){return FJe.test(e)}function Hl(e){if(e===null||tr(e)!=="object")return null;if(e instanceof Element)return e;var r=lc(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&tr(e[t])=="object"&&(r[t]=Hl(e[t]));return r}function $s(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=function(b){return b!=null},s=function(b){return b!==null&&tr(b)==="object"},o=function(b){for(var m in b)if(Object.prototype.hasOwnProperty.call(b,m))return!1;return!0};if(!s(e))throw new Error("Parameter mergeTarget must be an object");if(!s(r))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(b,m,x){s(b[x])||(b[x]={});var E=m[x],k=b[x];for(var $ in E)Object.prototype.hasOwnProperty.call(E,$)&&(k[$]=E[$])},l=r[t],u=s(n)&&!o(n),d=u?n[t]:void 0,h=d?d.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){s(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!s(e[t]))if(i(d))e[t]=lc(d);else return;if(s(l)){var v=!0;l.enabled!==void 0?v=l.enabled:h!==void 0&&(v=d.enabled),a(e,r,t),e[t].enabled=v}}}var qJe={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function Tl(e,r){var t;or(r)||(r=[r]);var n=PG(e),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s){t=s[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t<"u")break}}}catch(a){n.e(a)}finally{n.f()}return t}var GJe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},YJe=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ze(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return He(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return GJe[t]}},{key:"setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var i,s=this._isColorString(t);if(s!==void 0&&(t=s),Al(t)===!0){if(BG(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(VJe(t)===!0){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(DG(t)===!0){var l=NA(t);i={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:u}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Tg(t));this._setColor(i,n)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n===!0&&(this.previousColor=nn({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Ro(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n===!0&&(this.initialColor=nn({},t)),this.color=t;var i=op(t.r,t.g,t.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var n=op(this.color.r,this.color.g,this.color.b);n.v=t/100;var i=_0(n.h,n.s,n.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,n=op(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-n.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Ig(i).call(i),this.brightnessRange.value=100*n.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,n,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=De(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=De(n=this._apply).call(n,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=De(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=De(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new PA(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(n){n.isFirst&&t._moveSelector(n)}),this.hammer.on("tap",function(n){t._moveSelector(n)}),this.hammer.on("panstart",function(n){t._moveSelector(n)}),this.hammer.on("panmove",function(n){t._moveSelector(n)}),this.hammer.on("panend",function(n){t._moveSelector(n)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,n,i);var s,o,a,l;this.centerCoordinates={x:n*.5,y:i*.5},this.r=.49*n;var u=2*Math.PI/360,d=1/360,h=1/this.r,v;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(u*a),o=this.centerCoordinates.y+l*Math.cos(u*a),v=_0(a*d,l*h,1),t.fillStyle="rgb("+v.r+","+v.g+","+v.b+")",t.fillRect(s-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,n,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var n=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-n.left,s=t.center.y-n.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,u=s-o,d=Math.atan2(l,u),h=.98*Math.min(Math.sqrt(l*l+u*u),a),v=Math.cos(d)*h+o,g=Math.sin(d)*h+a;this.colorPickerSelector.style.top=v-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=g-.5*this.colorPickerSelector.clientWidth+"px";var b=d/(2*Math.PI);b=b<0?b+1:b;var m=h/this.r,x=op(this.color.r,this.color.g,this.color.b);x.h=b,x.s=m;var E=_0(x.h,x.s,x.v);E.a=this.color.a,this.color=E,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function X5(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var n=document.createElement(r[0]);return n.appendChild(X5.apply(void 0,To(Kn(r).call(r,1)))),n}var ZJe=function(){function e(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ze(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},nn(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new YJe(i),this.wrapper=void 0}return He(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof t=="string")this.options.filter=t;else if(or(t))this.options.filter=t.join();else if(tr(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Oi(t)!==void 0&&(this.options.filter=Oi(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(n=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,n=t):typeof t=="function"&&(this.options.filter=t,n=!0);Oi(this.options)===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Oi(this.options),n=0,i=!1;for(var s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof t=="function"?(i=t(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(t===!0||Vt(t).call(t,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,n>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var n=this.moduleOptions,i=0;i<t.length;i++)if(n[t[i]]!==void 0)n=n[t[i]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return fr(s).call(s,function(a){n.appendChild(a)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerText=t,this._makeItem([],n)}},{key:"_makeLabel",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+n.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(X5("i","b",t))}else s.innerText=t+":";return s}},{key:"_makeDropdown",value:function(t,n,i){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var o=0;n!==void 0&&Vt(t).call(t,n)!==-1&&(o=Vt(t).call(t,n));for(var a=0;a<t.length;a++){var l=document.createElement("option");l.value=t[a],a===o&&(l.selected="selected"),l.innerText=t[a],s.appendChild(l)}var u=this;s.onchange=function(){u._update(this.value,i)};var d=this._makeLabel(i[i.length-1],i);this._makeItem(i,d,s)}},{key:"_makeRange",value:function(t,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=a}catch{}u.step=l;var d="",h=0;if(n!==void 0){var v=1.2;n<0&&n*v<o?(u.min=Math.ceil(n*v),h=u.min,d="range increased"):n/v<o&&(u.min=Math.ceil(n/v),h=u.min,d="range increased"),n*v>a&&a!==1&&(u.max=Math.ceil(n*v),h=u.max,d="range increased"),u.value=n}else u.value=s;var g=document.createElement("input");g.className="vis-configuration vis-config-rangeinput",g.value=u.value;var b=this;u.onchange=function(){g.value=this.value,b._update(Number(this.value),i)},u.oninput=function(){g.value=this.value};var m=this._makeLabel(i[i.length-1],i),x=this._makeItem(i,m,u,g);d!==""&&this.popupHistory[x]!==h&&(this.popupHistory[x]=h,this._setupPopup(d,x))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=function(){t._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(t,n){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerText=t,s.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],i=n.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Ro(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Ro(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,n,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=t,n!==void 0&&(s.checked=n,n!==t&&(tr(t)==="object"?n!==t.enabled&&this.changedOptions.push({path:i,value:n}):this.changedOptions.push({path:i,value:n})));var o=this;s.onchange=function(){o._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeTextInput",value:function(t,n,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==t&&this.changedOptions.push({path:i,value:n});var o=this;s.onchange=function(){o._update(this.value,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeColorField",value:function(t,n,i){var s=this,o=t[1],a=document.createElement("div");n=n===void 0?o:n,n!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=n):a.className="vis-configuration vis-config-colorBlock none",n=n===void 0?o:n,a.onclick=function(){s._showColorPicker(n,a,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,a)}},{key:"_showColorPicker",value:function(t,n,i){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var a="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";n.style.backgroundColor=a,s._update(a,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=Oi(this.options),a=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){s=!0;var u=t[l],d=Db(n,l);if(typeof o=="function"&&(s=o(l,n),s===!1&&!or(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,s=this._handleObject(u,d,!0),this.allowCreation=i===!1)),s!==!1){a=!0;var h=this._getValue(d);if(or(u))this._handleArray(u,h,d);else if(typeof u=="string")this._makeTextInput(u,h,d);else if(typeof u=="boolean")this._makeCheckbox(u,h,d);else if(u instanceof Object){if(!this.hideOption(n,l,this.moduleOptions))if(u.enabled!==void 0){var v=Db(d,"enabled"),g=this._getValue(v);if(g===!0){var b=this._makeLabel(l,d,!0);this._makeItem(d,b),a=this._handleObject(u,d)||a}else this._makeCheckbox(u,g,d)}else{var m=this._makeLabel(l,d,!0);this._makeItem(d,m),a=this._handleObject(u,d)||a}}else console.error("dont know how to handle",u,l,d)}}return a}},{key:"_handleArray",value:function(t,n,i){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,n,i),t[1]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="string"?(this._makeDropdown(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="number"&&(this._makeRange(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:Number(n)}))}},{key:"_update",value:function(t,n){var i=this._constructOptions(t,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<n.length;o++)n[o]!=="global"&&(s[n[o]]===void 0&&(s[n[o]]={}),o!==n.length-1?s=s[n[o]]:s[n[o]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(X5("pre","const options = "+Tg(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,t);return t}}]),e}(),XJe=function(){function e(r,t){ze(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return He(e,[{key:"setPosition",value:function(t,n){this.x=Ws(t),this.y=Ws(n)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var n=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"){var u=!1,d=!0;this.y-n<this.padding&&(d=!1),this.x+i>o-this.padding&&(u=!0),u?a=this.x-i:a=this.x,d?l=this.y-n:l=this.y}else l=this.y-n,l+n+this.padding>s&&(l=s-n-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Wf=!1,K7,J5="background: #FFeeee; color: #dd0000",JJe=function(){function e(){ze(this,e)}return He(e,null,[{key:"validate",value:function(t,n,i){Wf=!1,K7=n;var s=n;return i!==void 0&&(s=n[i]),e.parse(t,s,[]),Wf}},{key:"parse",value:function(t,n,i){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.check(s,t,n,i)}},{key:"check",value:function(t,n,i,s){if(i[t]===void 0&&i.__any__===void 0){e.getSuggestion(t,i,s);return}var o=t,a=!0;i[t]===void 0&&i.__any__!==void 0&&(o="__any__",a=e.getType(n[t])==="object");var l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,n,i,o,l,s)}},{key:"checkFields",value:function(t,n,i,s,o,a){var l=function(v){console.error("%c"+v+e.printLocation(a,t),J5)},u=e.getType(n[t]),d=o[u];d!==void 0?e.getType(d)==="array"&&Vt(d).call(d,n[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(d)+' not "'+n[t]+'". '),Wf=!0):u==="object"&&s!=="__any__"&&(a=Db(a,t),e.parse(n[t],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(Rr(o))+". Received ["+u+'] "'+n[t]+'"'),Wf=!0)}},{key:"getType",value:function(t){var n=tr(t);return n==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":or(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(t,n,i){var s=e.findInOptions(t,n,i,!1),o=e.findInOptions(t,K7,[],!0),a=8,l=4,u;s.indexMatch!==void 0?u=" in "+e.printLocation(s.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?u=" in "+e.printLocation(s.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):s.distance<=a?u='. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,t):u=". Did you mean one of these: "+e.print(Rr(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+u,J5),Wf=!0}},{key:"findInOptions",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],u=t.toLowerCase(),d=void 0;for(var h in n){var v=void 0;if(n[h].__type__!==void 0&&s===!0){var g=e.findInOptions(t,n[h],Db(i,h));o>g.distance&&(a=g.closestMatch,l=g.path,o=g.distance,d=g.indexMatch)}else{var b;Vt(b=h.toLowerCase()).call(b,u)!==-1&&(d=h),v=e.levenshteinDistance(t,h),o>v&&(a=h,l=jJe(i),o=v)}}return{closestMatch:a,path:l,distance:o,indexMatch:d}}},{key:"printLocation",value:function(t,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+i+`options = {
`,o=0;o<t.length;o++){for(var a=0;a<o+1;a++)s+="  ";s+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)s+="  ";s+=n+`
`;for(var u=0;u<t.length+1;u++){for(var d=0;d<t.length-u;d++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(t){return Tg(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,n){if(t.length===0)return n.length;if(n.length===0)return t.length;var i=[],s;for(s=0;s<=n.length;s++)i[s]=[s];var o;for(o=0;o<=t.length;o++)i[0][o]=o;for(s=1;s<=n.length;s++)for(o=1;o<=t.length;o++)n.charAt(s-1)==t.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[n.length][t.length]}}]),e}(),QJe=Co,eQe=ZJe,nd=PA,tQe=XJe,MG=J5,rQe=JJe;function nQe(e){return Nl=e,aQe()}var LG={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},RA=lc(LG);RA.color="color.color";RA.style="dashes";var oi={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},W7={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Nl="",Rd=0,Rt="",ht="",Si=oi.NULL;function iQe(){Rd=0,Rt=Nl.charAt(0)}function _n(){Rd++,Rt=Nl.charAt(Rd)}function xh(){return Nl.charAt(Rd+1)}function V7(e){var r=e.charCodeAt(0);return r<47?r===35||r===46:r<59?r>47:r<91?r>64:r<96?r===95:r<123?r>96:!1}function eu(e,r){if(e||(e={}),r)for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}function sQe(e,r,t){for(var n=r.split("."),i=e;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=t}}function FG(e,r){for(var t,n,i=null,s=[e],o=e;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(r.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:r.id},e.node&&(i.attr=eu(i.attr,e.node))),t=s.length-1;t>=0;t--){var a,l=s[t];l.nodes||(l.nodes=[]),Vt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}r.attr&&(i.attr=eu(i.attr,r.attr))}function oQe(e,r){if(e.edges||(e.edges=[]),e.edges.push(r),e.edge){var t=eu({},e.edge);r.attr=eu(t,r.attr)}}function jG(e,r,t,n,i){var s={from:r,to:t,type:n};return e.edge&&(s.attr=eu({},e.edge)),s.attr=eu(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function wr(){for(Si=oi.NULL,ht="";Rt===" "||Rt==="	"||Rt===`
`||Rt==="\r";)_n();do{var e=!1;if(Rt==="#"){for(var r=Rd-1;Nl.charAt(r)===" "||Nl.charAt(r)==="	";)r--;if(Nl.charAt(r)===`
`||Nl.charAt(r)===""){for(;Rt!=""&&Rt!=`
`;)_n();e=!0}}if(Rt==="/"&&xh()==="/"){for(;Rt!=""&&Rt!=`
`;)_n();e=!0}if(Rt==="/"&&xh()==="*"){for(;Rt!="";)if(Rt==="*"&&xh()==="/"){_n(),_n();break}else _n();e=!0}for(;Rt===" "||Rt==="	"||Rt===`
`||Rt==="\r";)_n()}while(e);if(Rt===""){Si=oi.DELIMITER;return}var t=Rt+xh();if(W7[t]){Si=oi.DELIMITER,ht=t,_n(),_n();return}if(W7[Rt]){Si=oi.DELIMITER,ht=Rt,_n();return}if(V7(Rt)||Rt==="-"){for(ht+=Rt,_n();V7(Rt);)ht+=Rt,_n();ht==="false"?ht=!1:ht==="true"?ht=!0:isNaN(Number(ht))||(ht=Number(ht)),Si=oi.IDENTIFIER;return}if(Rt==='"'){for(_n();Rt!=""&&(Rt!='"'||Rt==='"'&&xh()==='"');)Rt==='"'?(ht+=Rt,_n()):Rt==="\\"&&xh()==="n"?(ht+=`
`,_n()):ht+=Rt,_n();if(Rt!='"')throw ai('End of string " expected');_n(),Si=oi.IDENTIFIER;return}for(Si=oi.UNKNOWN;Rt!="";)ht+=Rt,_n();throw new SyntaxError('Syntax error in part "'+KG(ht,30)+'"')}function aQe(){var e={};if(iQe(),wr(),ht==="strict"&&(e.strict=!0,wr()),(ht==="graph"||ht==="digraph")&&(e.type=ht,wr()),Si===oi.IDENTIFIER&&(e.id=ht,wr()),ht!="{")throw ai("Angle bracket { expected");if(wr(),zG(e),ht!="}")throw ai("Angle bracket } expected");if(wr(),ht!=="")throw ai("End of file expected");return wr(),delete e.node,delete e.edge,delete e.graph,e}function zG(e){for(;ht!==""&&ht!="}";)lQe(e),ht===";"&&wr()}function lQe(e){var r=HG(e);if(r){UG(e,r);return}var t=uQe(e);if(!t){if(Si!=oi.IDENTIFIER)throw ai("Identifier expected");var n=ht;if(wr(),ht==="="){if(wr(),Si!=oi.IDENTIFIER)throw ai("Identifier expected");e[n]=ht,wr()}else cQe(e,n)}}function HG(e){var r=null;if(ht==="subgraph"&&(r={},r.type="subgraph",wr(),Si===oi.IDENTIFIER&&(r.id=ht,wr())),ht==="{"){if(wr(),r||(r={}),r.parent=e,r.node=e.node,r.edge=e.edge,r.graph=e.graph,zG(r),ht!="}")throw ai("Angle bracket } expected");wr(),delete r.node,delete r.edge,delete r.graph,delete r.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(r)}return r}function uQe(e){return ht==="node"?(wr(),e.node=Tp(),"node"):ht==="edge"?(wr(),e.edge=Tp(),"edge"):ht==="graph"?(wr(),e.graph=Tp(),"graph"):null}function cQe(e,r){var t={id:r},n=Tp();n&&(t.attr=n),FG(e,t),UG(e,r)}function UG(e,r){for(;ht==="->"||ht==="--";){var t,n=ht;wr();var i=HG(e);if(i)t=i;else{if(Si!=oi.IDENTIFIER)throw ai("Identifier or subgraph expected");t=ht,FG(e,{id:t}),wr()}var s=Tp(),o=jG(e,r,t,n,s);oQe(e,o),r=t}}function Tp(){for(var e,r=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;ht==="[";){for(wr(),r={};ht!==""&&ht!="]";){if(Si!=oi.IDENTIFIER)throw ai("Attribute name expected");var o=ht;if(wr(),ht!="=")throw ai("Equal sign = expected");if(wr(),Si!=oi.IDENTIFIER)throw ai("Attribute value expected");var a=ht;o==="style"&&(a=t[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:r,name:o,value:a}),s.push(o),wr(),ht==","&&wr()}if(ht!="]")throw ai("Bracket ] expected");wr()}if(No(s).call(s,"dir")){var u={};for(u.arrows={},e=0;e<i.length;e++)if(i[e].name==="arrows")if(i[e].value.to!=null)u.arrows.to=e;else if(i[e].value.from!=null)u.arrows.from=e;else throw ai("Invalid value of arrows");else i[e].name==="dir"&&(u.dir=e);var d=i[u.dir].value;if(!No(s).call(s,"arrows"))if(d==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw ai('Invalid dir type "'+d+'"');var h,v;if(d==="both")u.arrows.to&&u.arrows.from?(v=i[u.arrows.to].value.to.type,h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}},_a(i).call(i,u.arrows.from,1)):u.arrows.to?(v=i[u.arrows.to].value.to.type,h="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}):u.arrows.from&&(v="arrow",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}});else if(d==="back")u.arrows.to&&u.arrows.from?(v="",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}):u.arrows.to?(v="",h="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}):u.arrows.from&&(v="",h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(d==="none"){var g;u.arrows.to?g=u.arrows.to:g=u.arrows.from,i[g]={attr:i[g].attr,name:i[g].name,value:""}}else if(d==="forward")u.arrows.to&&u.arrows.from?(v=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}):u.arrows.to?(v=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}):u.arrows.from&&(v="arrow",h="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:v},from:{enabled:!0,type:h}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw ai('Invalid dir type "'+d+'"');_a(i).call(i,u.dir,1)}var b;if(No(s).call(s,"penwidth")){var m=[];for(b=i.length,e=0;e<b;e++)i[e].name!=="width"&&(i[e].name==="penwidth"&&(i[e].name="width"),m.push(i[e]));i=m}for(b=i.length,e=0;e<b;e++)sQe(i[e].attr,i[e].name,i[e].value);return r}function ai(e){return new SyntaxError(e+', got "'+KG(ht,30)+'" (char '+Rd+")")}function KG(e,r){return e.length<=r?e:e.substr(0,27)+"..."}function hQe(e,r,t){or(e)?fr(e).call(e,function(n){or(r)?fr(r).call(r,function(i){t(n,i)}):t(n,r)}):or(r)?fr(r).call(r,function(n){t(e,n)}):t(e,r)}function oE(e,r,t){for(var n=r.split("."),i=n.pop(),s=e,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=t,e}function q7(e,r){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=r[n];or(i)?fr(i).call(i,function(s){oE(t,s,e[n])}):typeof i=="string"?oE(t,i,e[n]):oE(t,n,e[n])}return t}function dQe(e){var r=nQe(e),t={nodes:[],edges:[],options:{}};if(r.nodes){var n;fr(n=r.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};eu(a,q7(o.attr,LG)),a.image&&(a.shape="image"),t.nodes.push(a)})}if(r.edges){var i,s=function(a){var l={from:a.from,to:a.to};return eu(l,q7(a.attr,RA)),l.arrows==null&&a.type==="->"&&(l.arrows="to"),l};fr(i=r.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;fr(u=o.from.edges).call(u,function(h){var v=s(h);t.edges.push(v)})}if(hQe(a,l,function(h,v){var g=jG(t,h.id,v.id,o.type,o.attr),b=s(g);t.edges.push(b)}),o.to instanceof Object&&o.to.edges){var d;fr(d=o.to.edges).call(d,function(h){var v=s(h);t.edges.push(v)})}})}return r.attr&&(t.options=r.attr),t}function fQe(e,r){var t,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};r!=null&&(r.fixed!=null&&(n.nodes.fixed=r.fixed),r.parseColor!=null&&(n.nodes.parseColor=r.parseColor),r.inheritColor!=null&&(n.edges.inheritColor=r.inheritColor));var i=e.edges,s=Ad(i).call(i,function(a){var l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l}),o=Ad(t=e.nodes).call(t,function(a){var l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l});return{nodes:o,edges:s}}var pQe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},vQe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",close:"Schließen",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},gQe={addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},yQe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},mQe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},bQe={addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",close:"Fechar",createEdgeError:"Não foi possível linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},wQe={addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",close:"Закрывать",createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},_Qe={addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",addNode:"添加节点",back:"返回",close:"關閉",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},$Qe={addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",close:"Закрити",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"},xQe={addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de créer un lien vers un cluster.",del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},EQe={addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",addNode:"Přidat vrchol",back:"Zpět",close:"Zavřít",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"},SQe=Object.freeze({__proto__:null,cn:_Qe,cs:EQe,de:vQe,en:pQe,es:gQe,fr:xQe,it:yQe,nl:mQe,pt:bQe,ru:wQe,uk:$Qe});function kQe(e,r){try{var t=r.split(/[-_ /]/,2),n=Dr(t,2),i=n[0],s=n[1],o=i!=null?i.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(o&&a){var l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(e,l))return l;var u;console.warn(xA(u="Unknown variant ".concat(a," of language ")).call(u,o,"."))}if(o){var d=o;if(Object.prototype.hasOwnProperty.call(e,d))return d;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(r,", falling back to English.")),"en"}catch(h){return console.error(h),console.warn("Unexpected error while normalizing locale ".concat(r,", falling back to English.")),"en"}}var TQe=function(){function e(){ze(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return He(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,n=this.image.height;this.width=t,this.height=n;var i=Math.floor(n/2),s=Math.floor(n/4),o=Math.floor(n/8),a=Math.floor(n/16),l=Math.floor(t/2),u=Math.floor(t/4),d=Math.floor(t/8),h=Math.floor(t/16);this.canvas.width=3*u,this.canvas.height=i,this.coordinates=[[0,0,l,i],[l,0,u,s],[l,s,d,o],[5*d,s,h,a]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),n=this.coordinates[0];t.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var s=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,n,i,s,o,a){if(this.initialized())if(n>2){n*=.5;for(var l=0;n>2&&l<this.NUM_ITERATIONS;)n*=.5,l+=1;l>=this.NUM_ITERATIONS&&(l=this.NUM_ITERATIONS-1);var u=this.coordinates[l];t.drawImage(this.canvas,u[0],u[1],u[2],u[3],i,s,o,a)}else t.drawImage(this.image,i,s,o,a)}}]),e}(),IQe=function(){function e(r){ze(this,e),this.images={},this.imageBroken={},this.callback=r}return He(e,[{key:"_tryloadBrokenUrl",value:function(t,n,i){if(!(t===void 0||i===void 0)){if(n===void 0){console.warn("No broken url image defined");return}i.image.onerror=function(){console.error("Could not load brokenImage:",n)},i.image.src=n}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,n){var i=this,s=this.images[t];if(s)return s;var o=new TQe;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,n,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),e}(),Q5={},OQe={get exports(){return Q5},set exports(e){Q5=e}},Dd={},AQe={get exports(){return Dd},set exports(e){Dd=e}},CQe=Yt,PQe=CQe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),NQe=Yt,RQe=Nn,DQe=za,G7=PQe,$0=Object.isExtensible,BQe=NQe(function(){$0(1)}),MQe=BQe||G7?function(r){return!RQe(r)||G7&&DQe(r)=="ArrayBuffer"?!1:$0?$0(r):!0}:$0,LQe=Yt,WG=!LQe(function(){return Object.isExtensible(Object.preventExtensions({}))}),FQe=dt,jQe=Zt,zQe=mg,HQe=Nn,DA=Rn,UQe=Rs.f,Y7=$g,KQe=bw,BA=MQe,WQe=cw,VQe=WG,VG=!1,Pa=WQe("meta"),qQe=0,MA=function(e){UQe(e,Pa,{value:{objectID:"O"+qQe++,weakData:{}}})},GQe=function(e,r){if(!HQe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!DA(e,Pa)){if(!BA(e))return"F";if(!r)return"E";MA(e)}return e[Pa].objectID},YQe=function(e,r){if(!DA(e,Pa)){if(!BA(e))return!0;if(!r)return!1;MA(e)}return e[Pa].weakData},ZQe=function(e){return VQe&&VG&&BA(e)&&!DA(e,Pa)&&MA(e),e},XQe=function(){JQe.enable=function(){},VG=!0;var e=Y7.f,r=jQe([].splice),t={};t[Pa]=1,e(t).length&&(Y7.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===Pa){r(i,s,1);break}return i},FQe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:KQe.f}))},JQe=AQe.exports={enable:XQe,fastKey:GQe,getWeakData:YQe,onFreeze:ZQe};zQe[Pa]=!0;var QQe=gg,eet=is,tet=os,ret=sf,net=VV,iet=fo,Z7=Gr,set=XV,oet=mw,X7=WV,aet=TypeError,x0=function(e,r){this.stopped=e,this.result=r},J7=x0.prototype,LA=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=QQe(r,n),u,d,h,v,g,b,m,x=function(k){return u&&X7(u,"normal",k),new x0(!0,k)},E=function(k){return i?(tet(k),a?l(k[0],k[1],x):l(k[0],k[1])):a?l(k,x):l(k)};if(s)u=e.iterator;else if(o)u=e;else{if(d=oet(e),!d)throw aet(ret(e)+" is not iterable");if(net(d)){for(h=0,v=iet(e);v>h;h++)if(g=E(e[h]),g&&Z7(J7,g))return g;return new x0(!1)}u=set(e,d)}for(b=s?e.next:u.next;!(m=eet(b,u)).done;){try{g=E(m.value)}catch(k){X7(u,"throw",k)}if(typeof g=="object"&&g&&Z7(J7,g))return g}return new x0(!1)},uet=Gr,cet=TypeError,FA=function(e,r){if(uet(r,e))return e;throw cet("Incorrect invocation")},het=dt,det=ln,fet=Dd,pet=Yt,vet=of,get=LA,yet=FA,met=Pn,bet=Nn,wet=lf,_et=Rs.f,$et=lu.forEach,xet=bn,qG=jc,Eet=qG.set,ket=qG.getterFor,jA=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=det[e],a=o&&o.prototype,l={},u;if(!xet||!met(o)||!(i||a.forEach&&!pet(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),fet.enable();else{u=r(function(v,g){Eet(yet(v,d),{type:e,collection:new o}),g!=null&&get(g,v[s],{that:v,AS_ENTRIES:n})});var d=u.prototype,h=ket(e);$et(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(v){var g=v=="add"||v=="set";v in a&&!(i&&v=="clear")&&vet(d,v,function(b,m){var x=h(this).collection;if(!g&&i&&!bet(b))return v=="get"?void 0:!1;var E=x[v](b===0?0:b,m);return g?this:E})}),i||_et(d,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return wet(u,e,!1,!0),l[e]=u,het({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},Tet=_g,zA=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:Tet(e,n,r[n],t);return e},Iet=Ns,Oet=gA,Aet=Yr,Cet=bn,Q7=Aet("species"),Pet=function(e){var r=Iet(e);Cet&&r&&!r[Q7]&&Oet(r,Q7,{configurable:!0,get:function(){return this}})},Net=af,Ret=gA,eM=zA,Det=gg,Bet=FA,Met=cg,Let=LA,Fet=fA,Fm=pA,jet=Pet,Vf=bn,tM=Dd.fastKey,GG=jc,rM=GG.set,aE=GG.getterFor,YG={getConstructor:function(e,r,t,n){var i=e(function(u,d){Bet(u,s),rM(u,{type:r,index:Net(null),first:void 0,last:void 0,size:0}),Vf||(u.size=0),Met(d)||Let(d,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=aE(r),a=function(u,d,h){var v=o(u),g=l(u,d),b,m;return g?g.value=h:(v.last=g={index:m=tM(d,!0),key:d,value:h,previous:b=v.last,next:void 0,removed:!1},v.first||(v.first=g),b&&(b.next=g),Vf?v.size++:u.size++,m!=="F"&&(v.index[m]=g)),u},l=function(u,d){var h=o(u),v=tM(d),g;if(v!=="F")return h.index[v];for(g=h.first;g;g=g.next)if(g.key==d)return g};return eM(s,{clear:function(){for(var d=this,h=o(d),v=h.index,g=h.first;g;)g.removed=!0,g.previous&&(g.previous=g.previous.next=void 0),delete v[g.index],g=g.next;h.first=h.last=void 0,Vf?h.size=0:d.size=0},delete:function(u){var d=this,h=o(d),v=l(d,u);if(v){var g=v.next,b=v.previous;delete h.index[v.index],v.removed=!0,b&&(b.next=g),g&&(g.previous=b),h.first==v&&(h.first=g),h.last==v&&(h.last=b),Vf?h.size--:d.size--}return!!v},forEach:function(d){for(var h=o(this),v=Det(d,arguments.length>1?arguments[1]:void 0),g;g=g?g.next:h.first;)for(v(g.value,g.key,this);g&&g.removed;)g=g.previous},has:function(d){return!!l(this,d)}}),eM(s,t?{get:function(d){var h=l(this,d);return h&&h.value},set:function(d,h){return a(this,d===0?0:d,h)}}:{add:function(d){return a(this,d=d===0?0:d,d)}}),Vf&&Ret(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=aE(r),s=aE(n);Fet(e,r,function(o,a){rM(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,Fm(void 0,!0)):a=="keys"?Fm(l.key,!1):a=="values"?Fm(l.value,!1):Fm([l.key,l.value],!1)},t?"entries":"values",!t,!0),jet(r)}},zet=jA,Het=YG;zet("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Het);var Uet=zt,Ket=Uet.Map,Wet=Ket,Vet=Wet;(function(e){e.exports=Vet})(OQe);var ZG=at(Q5),qet=function(){function e(){ze(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},nn(this.options,this.defaultOptions)}return He(e,[{key:"setOptions",value:function(t){var n=["useDefaultGroups"];if(t!==void 0){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Vt(n).call(n,i)===-1){var s=t[i];this.add(i,s)}}}},{key:"clear",value:function(){this._groups=new ZG,this._groupNames=[]}},{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._groups.get(t);if(i===void 0&&n)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var s=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[s]),this._groups.set(t,i)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}},{key:"add",value:function(t,n){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,n),n}}]),e}(),eI={},Get={get exports(){return eI},set exports(e){eI=e}},Yet=dt;Yet({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var Zet=zt,Xet=Zet.Number.isNaN,Jet=Xet,Qet=Jet;(function(e){e.exports=Qet})(Get);var tI=at(eI),rI={},ett={get exports(){return rI},set exports(e){rI=e}},ttt=ln,rtt=ttt.isFinite,ntt=Number.isFinite||function(r){return typeof r=="number"&&rtt(r)},itt=dt,stt=ntt;itt({target:"Number",stat:!0},{isFinite:stt});var ott=zt,att=ott.Number.isFinite,ltt=att,utt=ltt;(function(e){e.exports=utt})(ett);var Gu=at(rI),nI={},ctt={get exports(){return nI},set exports(e){nI=e}},htt=dt,dtt=lu.some,ftt=hf,ptt=ftt("some");htt({target:"Array",proto:!0,forced:!ptt},{some:function(r){return dtt(this,r,arguments.length>1?arguments[1]:void 0)}});var vtt=Dn,gtt=vtt("Array").some,ytt=Gr,mtt=gtt,lE=Array.prototype,btt=function(e){var r=e.some;return e===lE||ytt(lE,e)&&r===lE.some?mtt:r},wtt=btt,_tt=wtt;(function(e){e.exports=_tt})(ctt);var $tt=at(nI),iI={},xtt={get exports(){return iI},set exports(e){iI=e}},XG=ln,Ett=Yt,Stt=Zt,ktt=Uo,Ttt=EA.trim,Itt=Ow,Ott=Stt("".charAt),Bb=XG.parseFloat,nM=XG.Symbol,iM=nM&&nM.iterator,Att=1/Bb(Itt+"-0")!==-1/0||iM&&!Ett(function(){Bb(Object(iM))}),Ctt=Att?function(r){var t=Ttt(ktt(r)),n=Bb(t);return n===0&&Ott(t,0)=="-"?-0:n}:Bb,Ptt=dt,sM=Ctt;Ptt({global:!0,forced:parseFloat!=sM},{parseFloat:sM});var Ntt=zt,Rtt=Ntt.parseFloat,Dtt=Rtt,Btt=Dtt;(function(e){e.exports=Btt})(xtt);var JG=at(iI),sI={},Mtt={get exports(){return sI},set exports(e){sI=e}},Ltt=dt,Ftt=Yt,jtt=bw.f,ztt=Ftt(function(){return!Object.getOwnPropertyNames(1)});Ltt({target:"Object",stat:!0,forced:ztt},{getOwnPropertyNames:jtt});var Htt=zt,Utt=Htt.Object,Ktt=function(r){return Utt.getOwnPropertyNames(r)},Wtt=Ktt,Vtt=Wtt;(function(e){e.exports=Vtt})(Mtt);var qtt=at(sI);function HA(e,r){var t=["node","edge","label"],n=!0,i=Tl(r,"chosen");if(typeof i=="boolean")n=i;else if(tr(i)==="object"){if(Vt(t).call(t,e)===-1)throw new Error("choosify: subOption '"+e+"' should be one of '"+t.join("', '")+"'");var s=Tl(r,["chosen",e]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function oI(e,r,t){if(e.width<=0||e.height<=0)return!1;if(t!==void 0){var n={x:r.x-t.x,y:r.y-t.y};if(t.angle!==0){var i=-t.angle,s={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y};r=s}else r=n}var o=e.x+e.width,a=e.y+e.width;return e.left<r.x&&o>r.x&&e.top<r.y&&a>r.y}function Mb(e){return typeof e=="string"&&e!==""}function QG(e,r,t,n){var i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){var o=n.distanceToBorder(e,r),a=Math.sin(r)*o,l=Math.cos(r)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-t):(i=n.x+t,s=n.y-n.shape.height*.5);return{x:i,y:s}}var aI={},Gtt={get exports(){return aI},set exports(e){aI=e}},Ytt=Dn,Ztt=Ytt("Array").values,Xtt=Ztt,Jtt=Xtt,Qtt=Fc,ert=Rn,trt=Gr,rrt=Jtt,uE=Array.prototype,nrt={DOMTokenList:!0,NodeList:!0},irt=function(e){var r=e.values;return e===uE||trt(uE,e)&&r===uE.values||ert(nrt,Qtt(e))?rrt:r};(function(e){e.exports=irt})(Gtt);var eY=at(aI),srt=function(){function e(r){ze(this,e),this.measureText=r,this.current=0,this.width=0,this.height=0,this.lines=[]}return He(e,[{key:"_add",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});var s=n;(n===void 0||n==="")&&(s=" ");var o=this.measureText(s,i),a=nn({},eY(o));a.text=n,a.width=o.width,a.mod=i,(n===void 0||n==="")&&(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return t===void 0?0:t.width}},{key:"append",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n)}},{key:"newLine",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var n=this.lines[t],i=0;if(n.blocks!==void 0)for(var s=0;s<n.blocks.length;s++){var o=n.blocks[s];i<o.height&&(i=o.height)}n.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,n=0,i=0;i<this.lines.length;i++){var s=this.lines[i];s.width>t&&(t=s.width),n+=s.height}this.width=t,this.height=n}},{key:"removeEmptyBlocks",value:function(){for(var t=[],n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.blocks.length!==0&&!(n===this.lines.length-1&&i.width===0)){var s={};nn(s,i),s.blocks=[];for(var o=void 0,a=[],l=0;l<i.blocks.length;l++){var u=i.blocks[l];u.width!==0?a.push(u):o===void 0&&(o=u)}a.length===0&&o!==void 0&&a.push(o),s.blocks=a,t.push(s)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),e}(),ort={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},oM=function(){function e(r){ze(this,e),this.text=r,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return He(e,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return/[ \t]/.test(t)?(this.mono?this.add(t):this.spacing=!0,!0):!1}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,n){return!this.mono&&!this[t]&&this.match(n)?(this.setTag(t),!0):!1}},{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.prepareRegExp(t),s=Dr(i,2),o=s[0],a=s[1],l=o.test(this.text.substr(this.position,a));return l&&n&&(this.position+=a-1),l}},{key:"parseEndTag",value:function(t,n,i){var s=this.mod()===t;return t==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(n)?(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0):!1}},{key:"replace",value:function(t,n){return this.match(t)?(this.add(n),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(t){var n,i;if(t instanceof RegExp)i=t,n=1;else{var s=ort[t];s!==void 0?i=s:i=new RegExp(t),n=t.length}return[i,n]}}]),e}(),art=function(){function e(r,t,n,i){var s=this;ze(this,e),this.ctx=r,this.parent=t,this.selected=n,this.hover=i;var o=function(l,u){if(l===void 0)return 0;var d=s.parent.getFormattingValues(r,n,i,u),h=0;if(l!==""){var v=s.ctx.measureText(l);h=v.width}return{width:h,values:d}};this.lines=new srt(o)}return He(e,[{key:"process",value:function(t){if(!Mb(t))return this.lines.finalize();var n=this.parent.fontOptions;t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`);var i=String(t).split(`
`),s=i.length;if(n.multi)for(var o=0;o<s;o++){var a=this.splitBlocks(i[o],n.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(n.maxWdt>0)for(var l=0;l<a.length;l++){var u=a[l].mod,d=a[l].text;this.splitStringIntoLines(d,u,!0)}else for(var h=0;h<a.length;h++){var v=a[h].mod,g=a[h].text;this.lines.append(g,v)}this.lines.newLine()}}else if(n.maxWdt>0)for(var b=0;b<s;b++)this.splitStringIntoLines(i[b]);else for(var m=0;m<s;m++)this.lines.newLine(i[m]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var n="none";return t==="markdown"||t==="md"?n="markdown":(t===!0||t==="html")&&(n="html"),n}},{key:"splitHtmlBlocks",value:function(t){for(var n=new oM(t),i=function(l){if(/&/.test(l)){var u=n.replace(n.text,"&lt;","<")||n.replace(n.text,"&amp;","&");return u||n.add("&"),!0}return!1};n.position<n.text.length;){var s=n.text.charAt(n.position),o=n.parseWS(s)||/</.test(s)&&(n.parseStartTag("bold","<b>")||n.parseStartTag("ital","<i>")||n.parseStartTag("mono","<code>")||n.parseEndTag("bold","</b>")||n.parseEndTag("ital","</i>")||n.parseEndTag("mono","</code>"))||i(s);o||n.add(s),n.position++}return n.emitBlock(),n.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var n=this,i=new oM(t),s=!0,o=function(d){return/\\/.test(d)?(i.position<n.text.length+1&&(i.position++,d=n.text.charAt(i.position),/ \t/.test(d)?i.spacing=!0:(i.add(d),s=!1)),!0):!1};i.position<i.text.length;){var a=i.text.charAt(i.position),l=i.parseWS(a)||o(a)||(s||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono");l||(i.add(a),s=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,n){var i=this.decodeMarkupSystem(n);if(i==="none")return[{text:t,mod:"normal"}];if(i==="markdown")return this.splitMarkdownBlocks(t);if(i==="html")return this.splitHtmlBlocks(t)}},{key:"overMaxWidth",value:function(t){var n=this.ctx.measureText(t).width;return this.lines.curWidth()+n>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var n="",i=0;i<t.length;){var s=n===""?"":" ",o=n+s+t[i];if(this.overMaxWidth(o))break;n=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var n=0;n<t.length&&!this.overMaxWidth(Kn(t).call(t,0,n));)n++;return n}},{key:"splitStringIntoLines",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,n),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var s=t.split("\r");s.length>0;){var o=this.getLongestFit(s);if(o===0){var a=s[0],l=this.getLongestFitWord(a);this.lines.newLine(Kn(a).call(a,0,l),n),s[0]=Kn(a).call(a,l)}else{var u=o;s[o-1]===" "?o--:s[u]===" "&&u++;var d=Kn(s).call(s,0,o).join("");o==s.length&&i?this.lines.append(d,n):this.lines.newLine(d,n),s=Kn(s).call(s,u)}}}}]),e}(),qf=["bold","ital","boldital","mono"],tY=function(){function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ze(this,e),this.body=r,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return He(e,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),Mb(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(tr(t.font)==="object"){var n=t.font.size;n!==void 0&&(this.baseSize=n)}}}},{key:"initFontOptions",value:function(t){var n=this;if(Dt(qf,function(i){n.fontOptions[i]={}}),e.parseFontString(this.fontOptions,t)){this.fontOptions.vadjust=0;return}Dt(t,function(i,s){i!=null&&tr(i)!=="object"&&(n.fontOptions[s]=i)})}},{key:"constrain",value:function(t){var n={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=Tl(t,"widthConstraint");if(typeof i=="number")n.maxWdt=Number(i),n.minWdt=Number(i);else if(tr(i)==="object"){var s=Tl(t,["widthConstraint","maximum"]);typeof s=="number"&&(n.maxWdt=Number(s));var o=Tl(t,["widthConstraint","minimum"]);typeof o=="number"&&(n.minWdt=Number(o))}var a=Tl(t,"heightConstraint");if(typeof a=="number")n.minHgt=Number(a);else if(tr(a)==="object"){var l=Tl(t,["heightConstraint","minimum"]);typeof l=="number"&&(n.minHgt=Number(l));var u=Tl(t,["heightConstraint","valign"]);typeof u=="string"&&(u==="top"||u==="bottom")&&(n.valign=u)}return n}},{key:"update",value:function(t,n){this.setOptions(t,!0),this.propagateFonts(n),br(this.fontOptions,this.constrain(n)),this.fontOptions.chooser=HA("label",n)}},{key:"adjustSizes",value:function(t){var n=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=n,this.fontOptions.minWdt-=n);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,n){for(var i=0;i<n.length;++i)this.addFontToPile(t,n[i])}},{key:"addFontToPile",value:function(t,n){if(n!==void 0&&!(n.font===void 0||n.font===null)){var i=n.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var s=t[i],o={};e.parseFontString(o,s)&&(s=o),Dt(s,function(a,l){a!==void 0&&(Object.prototype.hasOwnProperty.call(n,l)||(Vt(qf).call(qf,l)!==-1?n[l]={}:n[l]=a))})}return n}},{key:"getFontOption",value:function(t,n,i){for(var s,o=0;o<t.length;++o){var a=t[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(s=a[n],s==null)continue;var l={};if(e.parseFontString(l,s)&&(s=l),Object.prototype.hasOwnProperty.call(s,i))return s[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,n){for(var i={},s=["color","size","face","mod","vadjust"],o=0;o<s.length;++o){var a=s[o];i[a]=this.getFontOption(t,n,a)}return i}},{key:"propagateFonts",value:function(t){var n=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var s=function(){var l=qf[o],u=n.fontOptions[l],d=n.getFontOptions(i,l);Dt(d,function(h,v){u[v]=h}),u.size=Number(u.size),u.vadjust=Number(u.vadjust)},o=0;o<qf.length;++o)s()}},{key:"draw",value:function(t,n,i,s,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var l=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&l<this.elementOptions.scaling.label.drawThreshold-1||(l>=this.elementOptions.scaling.label.maxVisible&&(l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,s,o,n,i,a),this._drawBackground(t),this._drawText(t,n,this.size.yLine,a,l))}}},{key:"_drawBackground",value:function(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var n=this.getSize();t.fillRect(n.left,n.top,n.width,n.height)}}},{key:"_drawText",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,a=this._setAlignment(t,n,i,s),l=Dr(a,2);n=l[0],i=l[1],t.textAlign="left",n=n-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(var u=0;u<this.lineCount;u++){var d=this.lines[u];if(d&&d.blocks){var h=0;this.isEdgeLabel||this.fontOptions.align==="center"?h+=(this.size.width-d.width)/2:this.fontOptions.align==="right"&&(h+=this.size.width-d.width);for(var v=0;v<d.blocks.length;v++){var g=d.blocks[v];t.font=g.font;var b=this._getColor(g.color,o,g.strokeColor),m=Dr(b,2),x=m[0],E=m[1];g.strokeWidth>0&&(t.lineWidth=g.strokeWidth,t.strokeStyle=E,t.lineJoin="round"),t.fillStyle=x,g.strokeWidth>0&&t.strokeText(g.text,n+h,i+g.vadjust),t.fillText(g.text,n+h,i+g.vadjust),h+=g.width}i+=d.height}}}},{key:"_setAlignment",value:function(t,n,i,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){n=0,i=0;var o=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*o):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*o):t.textBaseline="middle"}else t.textBaseline=s;return[n,i]}},{key:"_getColor",value:function(t,n,i){var s=t||"#000000",o=i||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));s=ks(s,a),o=ks(o,a)}return[s,o]}},{key:"getTextSize",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(t,n,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=2,n=this.size.left,i=this.size.top-.5*t;if(this.isEdgeLabel){var s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":n=s,i=-this.size.height*.5;break;case"top":n=s,i=-(this.size.height+t);break;case"bottom":n=s,i=t;break}}var o={left:n,top:i,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,n,i),this.size.left=s-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,n,i,s){var o=function(d,h,v){return h==="normal"?v==="mod"?"":d[v]:d[h][v]!==void 0?d[h][v]:d[v]},a={color:o(this.fontOptions,s,"color"),size:o(this.fontOptions,s,"size"),face:o(this.fontOptions,s,"face"),mod:o(this.fontOptions,s,"mod"),vadjust:o(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(n||i)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,n,i));var l="";return a.mod!==void 0&&a.mod!==""&&(l+=a.mod+" "),l+=a.size+"px "+a.face,t.font=l.replace(/"/g,""),a.font=t.font,a.height=a.size,a}},{key:"differentState",value:function(t,n){return t!==this.selectedState||n!==this.hoverState}},{key:"_processLabelText",value:function(t,n,i,s){var o=new art(t,this,n,i);return o.process(s)}},{key:"_processLabel",value:function(t,n,i){if(!(this.labelDirty===!1&&!this.differentState(n,i))){var s=this._processLabelText(t,n,i,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=n,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var t=this.fontOptions.size*this.body.view.scale;return!(t<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,n){if(!n||typeof n!="string")return!1;var i=n.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),e}(),lI={},lrt={get exports(){return lI},set exports(e){lI=e}},urt=yw,crt=sf,hrt=TypeError,drt=function(e){if(urt(e))return e;throw hrt(crt(e)+" is not a constructor")},frt=dt,prt=Ns,cE=ag,vrt=TV,aM=drt,grt=os,lM=Nn,yrt=af,rY=Yt,UA=prt("Reflect","construct"),mrt=Object.prototype,brt=[].push,nY=rY(function(){function e(){}return!(UA(function(){},[],e)instanceof e)}),iY=!rY(function(){UA(function(){})}),uM=nY||iY;frt({target:"Reflect",stat:!0,forced:uM,sham:uM},{construct:function(r,t){aM(r),grt(t);var n=arguments.length<3?r:aM(arguments[2]);if(iY&&!nY)return UA(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return cE(brt,i,t),new(cE(vrt,r,i))}var s=n.prototype,o=yrt(lM(s)?s:mrt),a=cE(r,o,t);return lM(a)?a:o}});var wrt=zt,_rt=wrt.Reflect.construct,$rt=_rt,xrt=$rt;(function(e){e.exports=xrt})(lrt);var $e=at(lI),uI={},Ert={get exports(){return uI},set exports(e){uI=e}},cI={},Srt={get exports(){return cI},set exports(e){cI=e}},krt=nG,Trt=krt,Irt=Trt,Ort=Irt;(function(e){e.exports=Ort})(Srt);(function(e){e.exports=cI})(Ert);var Art=at(uI),hI={},Crt={get exports(){return hI},set exports(e){hI=e}},dI={},Prt={get exports(){return dI},set exports(e){dI=e}},Nrt=dt,Rrt=pje;Nrt({target:"Object",stat:!0},{setPrototypeOf:Rrt});var Drt=zt,Brt=Drt.Object.setPrototypeOf,Mrt=Brt,Lrt=Mrt,Frt=Lrt,jrt=Frt,zrt=jrt,Hrt=zrt;(function(e){e.exports=Hrt})(Prt);(function(e){e.exports=dI})(Crt);var fI=at(hI),pI={},Urt={get exports(){return pI},set exports(e){pI=e}},vI={},Krt={get exports(){return vI},set exports(e){vI=e}},Wrt=IV,Vrt=Wrt,qrt=Vrt,Grt=qrt;(function(e){e.exports=Grt})(Krt);(function(e){e.exports=vI})(Urt);var KA=at(pI);function gI(e,r){var t;return gI=fI?KA(t=fI).call(t):function(i,s){return i.__proto__=s,i},gI(e,r)}function Qt(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Art(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Tw(e,"prototype",{writable:!1}),r&&gI(e,r)}function Yrt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ar(e,r){if(r&&(tr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yrt(e)}var yI={},Zrt={get exports(){return yI},set exports(e){yI=e}},mI={},Xrt={get exports(){return mI},set exports(e){mI=e}},Jrt=Jq,Qrt=Jrt,ent=Qrt,tnt=ent;(function(e){e.exports=tnt})(Xrt);(function(e){e.exports=mI})(Zrt);var cM=at(yI);function rt(e){var r;return rt=fI?KA(r=cM).call(r):function(n){return n.__proto__||cM(n)},rt(e)}var Kc=function(){function e(r,t,n){ze(this,e),this.body=t,this.labelModule=n,this.setOptions(r),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return He(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&(tr(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,n){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(n)),Math.abs(this.height/2/Math.sin(n)))+i}},{key:"enableShadow",value:function(t,n){n.shadow&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,n){if(n.borderDashes!==!1)if(t.setLineDash!==void 0){var i=n.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,n){n.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1))}},{key:"needsRefresh",value:function(t,n){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,n)}},{key:"initContextForDraw",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=n.borderColor,t.fillStyle=n.color}},{key:"performStroke",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,n),t.stroke(),this.disableBorderDashes(t,n)),t.restore()}},{key:"performFill",value:function(t,n){t.save(),t.fillStyle=n.color,this.enableShadow(t,n),Ig(t).call(t),this.disableShadow(t,n),t.restore(),this.performStroke(t,n)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,n,i,s,o){i!==void 0&&this.resize(i,s,o),this.left=t-this.width/2,this.top=n-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,n,i,s,o){this._updateBoundingBox(t,n,i,s,o)}},{key:"getDimensionsFromLabel",value:function(t,n,i){this.textSize=this.labelModule.getTextSize(t,n,i);var s=this.textSize.width,o=this.textSize.height,a=14;return s===0&&(s=a,o=a),{width:s,height:o}}}]),e}();function rnt(e){var r=nnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function nnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var int=function(e){Qt(t,e);var r=rnt(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return He(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.width=a.width+this.margin.right+this.margin.left,this.height=a.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),OV(i,this.left,this.top,this.width,this.height,u.borderRadius),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"updateBoundingBox",value:function(i,s,o,a,l){this._updateBoundingBox(i,s,o,a,l);var u=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(u)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(s)),Math.abs(this.height/2/Math.sin(s)))+o}}]),t}(Kc);function snt(e){var r=ont();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function ont(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var WA=function(e){Qt(t,e);var r=snt(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o.labelOffset=0,o.selected=!1,o}return He(t,[{key:"setOptions",value:function(i,s,o){this.options=i,s===void 0&&o===void 0||this.setImages(s,o)}},{key:"setImages",value:function(i,s){s&&this.selected?(this.imageObj=s,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=s)}},{key:"switchImages",value:function(i){var s=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&s){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var i={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var s=this.options.imagePadding;tr(s)=="object"?(i.top=s.top,i.right=s.right,i.bottom=s.bottom,i.left=s.left):(i.top=s,i.right=s,i.bottom=s,i.left=s)}return i}},{key:"_resizeImage",value:function(){var i,s;if(this.options.shapeProperties.useImageSize===!1){var o=1,a=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:a=this.imageObj.height/this.imageObj.width),i=this.options.size*2*o,s=this.options.size*2*a}else{var l=this._getImagePadding();i=this.imageObj.width+l.left+l.right,s=this.imageObj.height+l.top+l.bottom}this.width=i,this.height=s,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,s,o,a){this.initContextForDraw(i,a),uA(i,s,o,a.size),this.performFill(i,a)}},{key:"_drawImageAtPosition",value:function(i,s){if(this.imageObj.width!=0){i.globalAlpha=s.opacity!==void 0?s.opacity:1,this.enableShadow(i,s);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var a=this._getImagePadding(),l=this.left+a.left,u=this.top+a.top,d=this.width-a.left-a.right,h=this.height-a.top-a.bottom;this.imageObj.drawImageAtPosition(i,o,l,u,d,h),this.disableShadow(i,s)}}},{key:"_drawImageLabel",value:function(i,s,o,a,l){var u=0;if(this.height!==void 0){u=this.height*.5;var d=this.labelModule.getTextSize(i,a,l);d.lineCount>=1&&(u+=d.height/2)}var h=o+u;this.options.label&&(this.labelOffset=u),this.labelModule.draw(i,s,h,a,l,"hanging")}}]),t}(Kc);function ant(e){var r=lnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function lnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var unt=function(e){Qt(t,e);var r=ant(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return He(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=Math.max(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=l/2,this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this._drawRawCircle(i,s,o,u),this.updateBoundingBox(s,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,o,a,l)}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(WA);function cnt(e){var r=hnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function hnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var dnt=function(e){Qt(t,e);var r=cnt(t);function t(n,i,s,o,a){var l;return ze(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return He(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l,this.radius=.5*this.width;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){this.switchImages(a),this.resize();var d=s,h=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,d+=this.width/2,h+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this._drawRawCircle(i,d,h,u),i.save(),i.clip(),this._drawImageAtPosition(i,u),i.restore(),this._drawImageLabel(i,d,h,a,l),this.updateBoundingBox(s,o)}},{key:"updateBoundingBox",value:function(i,s){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=s,this.boundingBox.left=i,this.boundingBox.right=i+this.options.size*2,this.boundingBox.bottom=s+this.options.size*2):(this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(WA);function fnt(e){var r=pnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function pnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var hu=function(e){Qt(t,e);var r=fnt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,o)){var l,u;this.labelModule.getTextSize(i,s,o);var d=2*a.size;this.width=(l=this.customSizeWidth)!==null&&l!==void 0?l:d,this.height=(u=this.customSizeHeight)!==null&&u!==void 0?u:d,this.radius=.5*this.width}}},{key:"_drawShape",value:function(i,s,o,a,l,u,d,h){var v=this;return this.resize(i,u,d,h),this.left=a-this.width/2,this.top=l-this.height/2,this.initContextForDraw(i,h),A9e(s)(i,a,l,h.size),this.performFill(i,h),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(i.font=(u?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",i.fillText(this.options.icon.code,a,l)),{drawExternalLabel:function(){if(v.options.label!==void 0){v.labelModule.calculateLabelSize(i,u,d,a,l,"hanging");var b=l+.5*v.height+.5*v.labelModule.size.height;v.labelModule.draw(i,a,b,u,d,"hanging")}v.updateBoundingBox(a,l)}}}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),t}(Kc);function hM(e,r){var t=Rr(e);if(Jl){var n=Jl(e);r&&(n=Oi(n).call(n,function(i){return uu(e,i).enumerable})),t.push.apply(t,n)}return t}function vnt(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?fr(t=hM(Object(i),!0)).call(t,function(s){Iw(e,s,i[s])}):Ql?Sw(e,Ql(i)):fr(n=hM(Object(i))).call(n,function(s){kw(e,s,uu(i,s))})}return e}function gnt(e){var r=ynt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function ynt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var mnt=function(e){Qt(t,e);var r=gnt(t);function t(n,i,s,o){var a;return ze(this,t),a=r.call(this,n,i,s,o),a.ctxRenderer=o,a}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l,u),this.left=s-this.width/2,this.top=o-this.height/2,i.save();var d=this.ctxRenderer({ctx:i,id:this.options.id,x:s,y:o,state:{selected:a,hover:l},style:vnt({},u),label:this.options.label});if(d.drawNode!=null&&d.drawNode(),i.restore(),d.drawExternalLabel){var h=d.drawExternalLabel;d.drawExternalLabel=function(){i.save(),h(),i.restore()}}return d.nodeDimensions&&(this.customSizeWidth=d.nodeDimensions.width,this.customSizeHeight=d.nodeDimensions.height),d}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function bnt(e){var r=wnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function wnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var _nt=function(e){Qt(t,e);var r=bnt(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return He(t,[{key:"resize",value:function(i,s,o){if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=a.width+this.margin.right+this.margin.left;this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),AV(i,s-this.width/2,o-this.height/2,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Kc);function $nt(e){var r=xnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function xnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Ent=function(e){Qt(t,e);var r=$nt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"diamond",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function Snt(e){var r=knt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function knt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Tnt=function(e){Qt(t,e);var r=Snt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"circle",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.options.size}}]),t}(hu);function Int(e){var r=Ont();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Ont(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var dM=function(e){Qt(t,e);var r=Int(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.height=a.height*2,this.width=a.width+a.height,this.radius=.5*this.width}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(i,u),LT(i,this.left,this.top,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,s,o,a,l)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.width*.5,a=this.height*.5,l=Math.sin(s)*o,u=Math.cos(s)*a;return o*a/Math.sqrt(l*l+u*u)}}]),t}(Kc);function Ant(e){var r=Cnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Cnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Pnt=function(e){Qt(t,e);var r=Ant(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return He(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){var d=this;return this.resize(i,a,l),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=o-this.height/2,this._icon(i,s,o,a,l,u),{drawExternalLabel:function(){if(d.options.label!==void 0){var v=5;d.labelModule.draw(i,d.left+d.iconSize.width/2+d.margin.left,o+d.height/2+v,a)}d.updateBoundingBox(s,o)}}}},{key:"updateBoundingBox",value:function(i,s){if(this.boundingBox.top=s-this.options.icon.size*.5,this.boundingBox.left=i-this.options.icon.size*.5,this.boundingBox.right=i+this.options.icon.size*.5,this.boundingBox.bottom=s+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(i,s,o,a,l,u){var d=Number(this.options.icon.size);this.options.icon.code!==void 0?(i.font=[this.options.icon.weight!=null?this.options.icon.weight:a?"bold":"",(this.options.icon.weight!=null&&a?5:0)+d+"px",this.options.icon.face].join(" "),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",this.enableShadow(i,u),i.fillText(this.options.icon.code,s,o),this.disableShadow(i,u)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Kc);function Nnt(e){var r=Rnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Rnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Dnt=function(e){Qt(t,e);var r=Nnt(t);function t(n,i,s,o,a){var l;return ze(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return He(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){i.save(),this.switchImages(a),this.resize();var d=s,h=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,d+=this.width/2,h+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var v=this.options.borderWidth,g=this.options.borderWidthSelected||2*this.options.borderWidth,b=(a?g:v)/this.body.view.scale;i.lineWidth=Math.min(this.width,b),i.beginPath();var m=a?this.options.color.highlight.border:l?this.options.color.hover.border:this.options.color.border,x=a?this.options.color.highlight.background:l?this.options.color.hover.background:this.options.color.background;u.opacity!==void 0&&(m=ks(m,u.opacity),x=ks(x,u.opacity)),i.strokeStyle=m,i.fillStyle=x,i.rect(this.left-.5*i.lineWidth,this.top-.5*i.lineWidth,this.width+i.lineWidth,this.height+i.lineWidth),Ig(i).call(i),this.performStroke(i,u),i.closePath()}this._drawImageAtPosition(i,u),this._drawImageLabel(i,d,h,a,l),this.updateBoundingBox(s,o),i.restore()}},{key:"updateBoundingBox",value:function(i,s){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=i,this.top=s):(this.left=i-this.width/2,this.top=s-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(WA);function Bnt(e){var r=Mnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Mnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Lnt=function(e){Qt(t,e);var r=Bnt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"square",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function Fnt(e){var r=jnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function jnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var znt=function(e){Qt(t,e);var r=Fnt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"hexagon",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function Hnt(e){var r=Unt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Unt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Knt=function(e){Qt(t,e);var r=Hnt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"star",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function Wnt(e){var r=Vnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Vnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var qnt=function(e){Qt(t,e);var r=Wnt(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return He(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.textSize=this.labelModule.getTextSize(i,s,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.enableShadow(i,u),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l),this.disableShadow(i,u),this.updateBoundingBox(s,o,i,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Kc);function Gnt(e){var r=Ynt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Ynt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Znt=function(e){Qt(t,e);var r=Gnt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangle",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function Xnt(e){var r=Jnt();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Jnt(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Qnt=function(e){Qt(t,e);var r=Xnt(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangleDown",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(hu);function fM(e,r){var t=Rr(e);if(Jl){var n=Jl(e);r&&(n=Oi(n).call(n,function(i){return uu(e,i).enumerable})),t.push.apply(t,n)}return t}function pM(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?fr(t=fM(Object(i),!0)).call(t,function(s){Iw(e,s,i[s])}):Ql?Sw(e,Ql(i)):fr(n=fM(Object(i))).call(n,function(s){kw(e,s,uu(i,s))})}return e}var Ki=function(){function e(r,t,n,i,s,o){ze(this,e),this.options=Hl(s),this.globalOptions=s,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new tY(this.body,this.options,!1),this.setOptions(r)}return He(e,[{key:"attachEdge",value:function(t){var n;Vt(n=this.edges).call(n,t)===-1&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var n,i=Vt(n=this.edges).call(n,t);if(i!=-1){var s;_a(s=this.edges).call(s,i,1)}}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(typeof t.color<"u"&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");e.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=Ws(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=Ws(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=JG(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=HA("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),t.hidden!==void 0||t.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var n=this.options.opacity;t.borderColor=ks(t.borderColor,n),t.color=ks(t.color,n),t.shadowColor=ks(t.shadowColor,n)}return t}},{key:"updateLabelModule",value:function(t){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),e.updateGroupOptions(this.options,pM(pM({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new int(this.options,this.body,this.labelModule);break;case"circle":this.shape=new unt(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new dnt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new mnt(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new _nt(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Ent(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Tnt(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new dM(this.options,this.body,this.labelModule);break;case"icon":this.shape=new Pnt(this.options,this.body,this.labelModule);break;case"image":this.shape=new Dnt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Lnt(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new znt(this.options,this.body,this.labelModule);break;case"star":this.shape=new Knt(this.options,this.body,this.labelModule);break;case"text":this.shape=new qnt(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Znt(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Qnt(this.options,this.body,this.labelModule);break;default:this.shape=new dM(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,n){return this.shape.distanceToBorder(t,n)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.size=this.options.scaling.min+s*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var n=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,n)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var n=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,n)}},{key:"getItemsOnPoint",value:function(t){var n=[];return this.labelModule.visible()&&oI(this.labelModule.getSize(),t)&&n.push({nodeId:this.id,labelId:0}),oI(this.shape.boundingBox,t)&&n.push({nodeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return t===void 0||t==="center"||t==="top-left"}},{key:"updateGroupOptions",value:function(t,n,i){var s;if(i!==void 0){var o=t.group;if(n!==void 0&&n.group!==void 0&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");var a=typeof o=="number"||typeof o=="string"&&o!="";if(a){var l=i.get(o);l.opacity!==void 0&&n.opacity===void 0&&(e.checkOpacity(l.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+l.opacity),l.opacity=void 0));var u=Oi(s=qtt(n)).call(s,function(d){return n[d]!=null});u.push("font"),Rb(u,t,l),t.color=Y5(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(Rb(a,t,n,i),e.checkMass(n),t.opacity!==void 0&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),n.opacity!==void 0&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),$s(t,n,"shadow",s),n.color!==void 0&&n.color!==null){var l=Y5(n.color);NG(t.color,l)}else i===!0&&n.color===null&&(t.color=Hl(s.color));n.fixed!==void 0&&n.fixed!==null&&(typeof n.fixed=="boolean"?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(n.fixed.x!==void 0&&typeof n.fixed.x=="boolean"&&(t.fixed.x=n.fixed.x),n.fixed.y!==void 0&&typeof n.fixed.y=="boolean"&&(t.fixed.y=n.fixed.y))),i===!0&&n.font===null&&(t.font=Hl(s.font)),e.updateGroupOptions(t,n,o),n.scaling!==void 0&&$s(t.scaling,n.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,n){if(t.mass!==void 0&&t.mass<=0){var i="";n!==void 0&&(i=" in node id: "+n),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",MG),t.mass=1}}}]),e}();function eit(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=tit(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function tit(e,r){var t;if(e){if(typeof e=="string")return vM(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vM(e,r)}}function vM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var rit=function(){function e(r,t,n,i){var s,o=this;if(ze(this,e),this.body=r,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=De(s=this.create).call(s,this),this.nodesListeners={add:function(l,u){o.add(u.items)},update:function(l,u){o.update(u.items,u.data,u.oldData)},remove:function(l,u){o.remove(u.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(l,u,d,h){if(u===l)return .5;var v=1/(u-l);return Math.max(0,(h-l)*v)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Hl(this.defaultOptions),this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t,n,i=this;this.body.emitter.on("refreshNodes",De(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",De(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",function(){Dt(i.nodesListeners,function(s,o){i.body.data.nodes&&i.body.data.nodes.off(o,s)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){if(Ki.parseOptions(this.options,t),t.opacity!==void 0&&(tI(t.opacity)||!Gu(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(var n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&this.body.nodes[n].updateShape();if(typeof t.font<"u"||typeof t.widthConstraint<"u"||typeof t.heightConstraint<"u")for(var i=0,s=Rr(this.body.nodes);i<s.length;i++){var o=s[i];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(t.size!==void 0)for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.body.nodes[a].needsRefresh();(t.hidden!==void 0||t.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.data.nodes;if(uV("id",t))this.body.data.nodes=t;else if(or(t))this.body.data.nodes=new Zs,this.body.data.nodes.add(t);else if(!t)this.body.data.nodes=new Zs;else throw new TypeError("Array or DataSet expected");if(i&&Dt(this.nodesListeners,function(a,l){i.off(l,a)}),this.body.nodes={},this.body.data.nodes){var s=this;Dt(this.nodesListeners,function(a,l){s.body.data.nodes.on(l,a)});var o=this.body.data.nodes.getIds();this.add(o,!0)}n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i,s=[],o=0;o<t.length;o++){i=t[o];var a=this.body.data.nodes.get(i),l=this.create(a);s.push(l),this.body.nodes[i]=l}this.layoutEngine.positionInitially(s),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,n,i){for(var s=this.body.nodes,o=!1,a=0;a<t.length;a++){var l=t[a],u=s[l],d=n[a];u!==void 0?u.setOptions(d)&&(o=!0):(o=!0,u=this.create(d),s[l]=u)}!o&&i!==void 0&&(o=$tt(n).call(n,function(h,v){var g=i[v];return g&&g.level!==h.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var n=this.body.nodes,i=0;i<t.length;i++){var s=t[i];delete n[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ki;return new n(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Dt(this.body.nodes,function(i,s){var o=t.body.data.nodes.get(s);o!==void 0&&(n===!0&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var n={};if(t!==void 0){if(or(t)===!0){for(var i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){var s=this.body.nodes[t[i]];n[t[i]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[t]!==void 0){var o=this.body.nodes[t];n[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];n[this.body.nodeIndices[a]]={x:Math.round(l.x),y:Math.round(l.y)}}return n}},{key:"getPosition",value:function(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t=[],n=this.body.data.nodes.getDataSet(),i=eit(n.get()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.id,l=this.body.nodes[a],u=Math.round(l.x),d=Math.round(l.y);(o.x!==u||o.y!==d)&&t.push({id:a,x:u,y:d})}}catch(h){i.e(h)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,n){var i=[];if(this.body.nodes[t]!==void 0)for(var s=this.body.nodes[t],o={},a=0;a<s.edges.length;a++){var l=s.edges[a];n!=="to"&&l.toId==s.id?o[l.fromId]===void 0&&(i.push(l.fromId),o[l.fromId]=!0):n!=="from"&&l.fromId==s.id&&o[l.toId]===void 0&&(i.push(l.toId),o[l.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var n=[];if(this.body.nodes[t]!==void 0)for(var i=this.body.nodes[t],s=0;s<i.edges.length;s++)n.push(i.edges[s].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return n}},{key:"moveNode",value:function(t,n,i){var s=this;this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(n),this.body.nodes[t].y=Number(i),Ro(function(){s.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),e}(),bI={},nit={get exports(){return bI},set exports(e){bI=e}},wI={},iit={get exports(){return wI},set exports(e){wI=e}},gM=Rn,sit=function(e){return e!==void 0&&(gM(e,"value")||gM(e,"writable"))},oit=dt,ait=is,lit=Nn,uit=os,cit=sit,hit=rf,dit=gw;function sY(e,r){var t=arguments.length<3?e:arguments[2],n,i;if(uit(e)===t)return e[r];if(n=hit.f(e,r),n)return cit(n)?n.value:n.get===void 0?void 0:ait(n.get,t);if(lit(i=dit(e)))return sY(i,r,t)}oit({target:"Reflect",stat:!0},{get:sY});var fit=zt,pit=fit.Reflect.get,vit=pit,git=vit,yit=git,mit=yit,bit=mit,wit=bit;(function(e){e.exports=wit})(iit);(function(e){e.exports=wI})(nit);var yM=at(bI),_I={},_it={get exports(){return _I},set exports(e){_I=e}},$I={},$it={get exports(){return $I},set exports(e){$I=e}},xit=Cq,Eit=xit,Sit=Eit,kit=Sit;(function(e){e.exports=kit})($it);(function(e){e.exports=$I})(_it);var Tit=at(_I);function Iit(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=rt(e),e!==null););return e}function E0(){if(typeof Reflect<"u"&&yM){var e;E0=KA(e=yM).call(e)}else E0=function(t,n,i){var s=Iit(t,n);if(s){var o=Tit(s,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return E0.apply(this,arguments)}var xI={},Oit={get exports(){return xI},set exports(e){xI=e}},Ait=dt,mM=Math.hypot,Cit=Math.abs,Pit=Math.sqrt,Nit=!!mM&&mM(1/0,NaN)!==1/0;Ait({target:"Math",stat:!0,arity:2,forced:Nit},{hypot:function(r,t){for(var n=0,i=0,s=arguments.length,o=0,a,l;i<s;)a=Cit(arguments[i++]),o<a?(l=o/a,n=n*l*l+1,o=a):a>0?(l=a/o,n+=l*l):n+=a;return o===1/0?1/0:o*Pit(n)}});var Rit=zt,Dit=Rit.Math.hypot,Bit=Dit,Mit=Bit;(function(e){e.exports=Mit})(Oit);var Lit=at(xI);function oY(e){var r=Fit();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Fit(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Wr=function(){function e(){ze(this,e)}return He(e,null,[{key:"transform",value:function(t,n){or(t)||(t=[t]);for(var i=n.point.x,s=n.point.y,o=n.angle,a=n.length,l=0;l<t.length;++l){var u=t[l],d=u.x*Math.cos(o)-u.y*Math.sin(o),h=u.x*Math.sin(o)+u.y*Math.cos(o);u.x=i+a*d,u.y=s+a*h}}},{key:"drawPath",value:function(t,n){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)t.lineTo(n[i].x,n[i].y);t.closePath()}}]),e}(),jit=function(e){Qt(t,e);var r=oY(t);function t(){return ze(this,t),r.apply(this,arguments)}return He(t,null,[{key:"draw",value:function(i,s){if(s.image){i.save(),i.translate(s.point.x,s.point.y),i.rotate(Math.PI/2+s.angle);var o=s.imageWidth!=null?s.imageWidth:s.image.width,a=s.imageHeight!=null?s.imageHeight:s.image.height;s.image.drawImageAtPosition(i,1,-o/2,0,o,a),i.restore()}return!1}}]),t}(Wr),zit=function(e){Qt(t,e);var r=oY(t);function t(){return ze(this,t),r.apply(this,arguments)}return He(t,null,[{key:"draw",value:function(i,s){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Wr.transform(o,s),Wr.drawPath(i,o),!0}}]),t}(Wr),Hit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),Uit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};Wr.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle-s/2,a=n.angle+s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),Kit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i={x:-.3,y:0};Wr.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle+s/2,a=n.angle+3*s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),Wit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),Vit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),qit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};return Wr.transform(i,n),uA(t,i.x,i.y,n.length*.4),!0}}]),e}(),Git=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),Yit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),Zit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),Xit=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Wr.transform(i,n),Wr.drawPath(t,i),!0}}]),e}(),aY=function(){function e(){ze(this,e)}return He(e,null,[{key:"draw",value:function(t,n){var i;switch(n.type&&(i=n.type.toLowerCase()),i){case"image":return jit.draw(t,n);case"circle":return qit.draw(t,n);case"box":return Yit.draw(t,n);case"crow":return Hit.draw(t,n);case"curve":return Uit.draw(t,n);case"diamond":return Zit.draw(t,n);case"inv_curve":return Kit.draw(t,n);case"triangle":return Wit.draw(t,n);case"inv_triangle":return Vit.draw(t,n);case"bar":return Git.draw(t,n);case"vee":return Xit.draw(t,n);case"arrow":default:return zit.draw(t,n)}}}]),e}();function bM(e,r){var t=Rr(e);if(Jl){var n=Jl(e);r&&(n=Oi(n).call(n,function(i){return uu(e,i).enumerable})),t.push.apply(t,n)}return t}function wM(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?fr(t=bM(Object(i),!0)).call(t,function(s){Iw(e,s,i[s])}):Ql?Sw(e,Ql(i)):fr(n=bM(Object(i))).call(n,function(s){kw(e,s,uu(i,s))})}return e}var lY=function(){function e(r,t,n){ze(this,e),this._body=t,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(r),this.fromPoint=this.from,this.toPoint=this.to}return He(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,n),t.lineWidth=n.width,n.dashes!==!1?this._drawDashedLine(t,n,o):this._drawLine(t,n,o)}},{key:"_drawLine",value:function(t,n,i,s,o){if(this.from!=this.to)this._line(t,n,i,s,o);else{var a=this._getCircleData(t),l=Dr(a,3),u=l[0],d=l[1],h=l[2];this._circle(t,n,u,d,h)}}},{key:"_drawDashedLine",value:function(t,n,i,s,o){t.lineCap="round";var a=or(n.dashes)?n.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,n,i);else{var l=this._getCircleData(t),u=Dr(l,3),d=u[0],h=u[1],v=u[2];this._circle(t,n,d,h,v)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)CV(t,this.from.x,this.from.y,this.to.x,this.to.y,a);else{var g=this._getCircleData(t),b=Dr(g,3),m=b[0],x=b[1],E=b[2];this._circle(t,n,m,x,E)}this.enableShadow(t,n),t.stroke(),this.disableShadow(t,n)}}},{key:"findBorderPosition",value:function(t,n,i){return this.from!=this.to?this._findBorderPosition(t,n,i):this._findBorderPositionCircle(t,n,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var n,i=Kn(n=this._getCircleData(t)).call(n,0,2),s=Dr(i,2),o=s[0],a=s[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var n=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);var i=QG(t,this.options.selfReference.angle,n,this.from);return[i.x,i.y,n]}},{key:"_pointOnCircle",value:function(t,n,i,s){var o=s*2*Math.PI;return{x:t+i*Math.cos(o),y:n-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,n,i){var s=i.x,o=i.y,a=i.low,l=i.high,u=i.direction,d=10,h=this.options.selfReference.size,v=.05,g,b=(a+l)*.5,m=0;this.options.arrowStrikethrough===!0&&(u===-1?m=this.options.endPointOffset.from:u===1&&(m=this.options.endPointOffset.to));var x=0;do{b=(a+l)*.5,g=this._pointOnCircle(s,o,h,b);var E=Math.atan2(t.y-g.y,t.x-g.x),k=t.distanceToBorder(n,E)+m,$=Math.sqrt(Math.pow(g.x-t.x,2)+Math.pow(g.y-t.y,2)),S=k-$;if(Math.abs(S)<v)break;S>0?u>0?a=b:l=b:u>0?l=b:a=b,++x}while(a<=l&&x<d);return wM(wM({},g),{},{t:b})}},{key:"getLineWidth",value:function(t,n){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):n===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,n){if(n.inheritsColor!==!1){if(n.inheritsColor==="both"&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=ks(this.from.options.color.border,n.opacity),o=ks(this.to.options.color.border,n.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),i.addColorStop(0,s),i.addColorStop(1,o),i}return n.inheritsColor==="to"?ks(this.to.options.color.border,n.opacity):ks(this.from.options.color.border,n.opacity)}else return ks(n.color,n.opacity)}},{key:"_circle",value:function(t,n,i,s,o){this.enableShadow(t,n);var a=0,l=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var u=this.options.selfReference.angle,d=this.options.selfReference.angle+Math.PI,h=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:d,direction:-1}),v=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:d,direction:1});a=Math.atan2(h.y-s,h.x-i),l=Math.atan2(v.y-s,v.x-i)}t.beginPath(),t.arc(i,s,o,a,l,!1),t.stroke(),this.disableShadow(t,n)}},{key:"getDistanceToEdge",value:function(t,n,i,s,o,a){if(this.from!=this.to)return this._getDistanceToEdge(t,n,i,s,o,a);var l=this._getCircleData(void 0),u=Dr(l,3),d=u[0],h=u[1],v=u[2],g=d-o,b=h-a;return Math.abs(Math.sqrt(g*g+b*b)-v)}},{key:"_getDistanceToLine",value:function(t,n,i,s,o,a){var l=i-t,u=s-n,d=l*l+u*u,h=((o-t)*l+(a-n)*u)/d;h>1?h=1:h<0&&(h=0);var v=t+h*l,g=n+h*u,b=v-o,m=g-a;return Math.sqrt(b*b+m*m)}},{key:"getArrowData",value:function(t,n,i,s,o,a){var l,u,d,h,v,g,b,m=a.width;n==="from"?(d=this.from,h=this.to,v=a.fromArrowScale<0,g=Math.abs(a.fromArrowScale),b=a.fromArrowType):n==="to"?(d=this.to,h=this.from,v=a.toArrowScale<0,g=Math.abs(a.toArrowScale),b=a.toArrowType):(d=this.to,h=this.from,v=a.middleArrowScale<0,g=Math.abs(a.middleArrowScale),b=a.middleArrowType);var x=15*g+3*m;if(d!=h){var E=Lit(d.x-h.x,d.y-h.y),k=x/E;if(n!=="middle")if(this.options.smooth.enabled===!0){var $=this._findBorderPosition(d,t,{via:i}),S=this.getPoint($.t+k*(n==="from"?1:-1),i);l=Math.atan2($.y-S.y,$.x-S.x),u=$}else l=Math.atan2(d.y-h.y,d.x-h.x),u=this._findBorderPosition(d,t);else{var T=(v?-k:k)/2,O=this.getPoint(.5+T,i),I=this.getPoint(.5-T,i);l=Math.atan2(O.y-I.y,O.x-I.x),u=this.getPoint(.5,i)}}else{var P=this._getCircleData(t),R=Dr(P,3),D=R[0],F=R[1],K=R[2];if(n==="from"){var q=this.options.selfReference.angle,W=this.options.selfReference.angle+Math.PI,M=this._findBorderPositionCircle(this.from,t,{x:D,y:F,low:q,high:W,direction:-1});l=M.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=M}else if(n==="to"){var G=this.options.selfReference.angle,Q=this.options.selfReference.angle+Math.PI,he=this._findBorderPositionCircle(this.from,t,{x:D,y:F,low:G,high:Q,direction:1});l=he.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=he}else{var ue=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(D,F,K,ue),l=ue*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var ke=u.x-x*.9*Math.cos(l),Te=u.y-x*.9*Math.sin(l),Ce={x:ke,y:Te};return{point:u,core:Ce,angle:l,length:x,type:b}}},{key:"drawArrowHead",value:function(t,n,i,s,o){t.strokeStyle=this.getColor(t,n),t.fillStyle=t.strokeStyle,t.lineWidth=n.width;var a=aY.draw(t,o);a&&(this.enableShadow(t,n),Ig(t).call(t),this.disableShadow(t,n))}},{key:"enableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,n){if(n.background!==!1){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=n.backgroundColor,t.lineWidth=n.backgroundSize,this.setStrokeDashed(t,n.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,n.dashes)}}},{key:"setStrokeDashed",value:function(t,n){if(n!==!1)if(t.setLineDash!==void 0){var i=or(n)?n:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function _M(e,r){var t=Rr(e);if(Jl){var n=Jl(e);r&&(n=Oi(n).call(n,function(i){return uu(e,i).enumerable})),t.push.apply(t,n)}return t}function $M(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?fr(t=_M(Object(i),!0)).call(t,function(s){Iw(e,s,i[s])}):Ql?Sw(e,Ql(i)):fr(n=_M(Object(i))).call(n,function(s){kw(e,s,uu(i,s))})}return e}function Jit(e){var r=Qit();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Qit(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var VA=function(e){Qt(t,e);var r=Jit(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"_findBorderPositionBezier",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),a=10,l=.2,u=!1,d=1,h=0,v=this.to,g,b,m=this.options.endPointOffset?this.options.endPointOffset.to:0;i.id===this.from.id&&(v=this.from,u=!0,m=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(m=0);var x=0;do{b=(h+d)*.5,g=this.getPoint(b,o);var E=Math.atan2(v.y-g.y,v.x-g.x),k=v.distanceToBorder(s,E)+m,$=Math.sqrt(Math.pow(g.x-v.x,2)+Math.pow(g.y-v.y,2)),S=k-$;if(Math.abs(S)<l)break;S<0?u===!1?h=b:d=b:u===!1?d=b:h=b,++x}while(h<=d&&x<a);return $M($M({},g),{},{t:b})}},{key:"_getDistanceToBezierEdge",value:function(i,s,o,a,l,u,d){var h=1e9,v,g,b,m,x,E=i,k=s;for(g=1;g<10;g++)b=.1*g,m=Math.pow(1-b,2)*i+2*b*(1-b)*d.x+Math.pow(b,2)*o,x=Math.pow(1-b,2)*s+2*b*(1-b)*d.y+Math.pow(b,2)*a,g>0&&(v=this._getDistanceToLine(E,k,m,x,l,u),h=v<h?v:h),E=m,k=x;return h}},{key:"_bezierCurve",value:function(i,s,o,a){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?a!=null&&a.x!=null?i.bezierCurveTo(o.x,o.y,a.x,a.y,this.toPoint.x,this.toPoint.y):i.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):i.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(i,s),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),t}(lY);function est(e){var r=tst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function tst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var xM=function(e){Qt(t,e);var r=est(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return He(t,[{key:"setOptions",value:function(i){E0(rt(t.prototype),"setOptions",this).call(this,i);var s=!1;this.options.physics!==i.physics&&(s=!0),this.options=i,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),s===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var i="edgeId:"+this.id,s=this._body.functions.createNode({id:i,shape:"circle",physics:!0,hidden:!0});this._body.nodes[i]=s,this.via=s,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),a=Dr(o,3),l=a[0],u=a[1],d=a[2],h=2*Math.PI*(1-i);return{x:l+d*Math.sin(h),y:u+d-d*(1-Math.cos(h))}}else return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*s.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*s.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s,this.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToBezierEdge(i,s,o,a,l,u,this.via)}}]),t}(VA);function rst(e){var r=nst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function nst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var EM=function(e){Qt(t,e);var r=rst(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var i=this.options.smooth.roundness,s=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),a=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){var l,u;o<=a?l=u=i*a:l=u=i*o,this.from.x>this.to.x&&(l=-l),this.from.y>=this.to.y&&(u=-u);var d=this.from.x+l,h=this.from.y+u;return s==="discrete"&&(o<=a?d=o<i*a?this.from.x:d:h=a<i*o?this.from.y:h),{x:d,y:h}}else if(s==="straightCross"){var v=(1-i)*o,g=(1-i)*a;return o<=a?(v=0,this.from.y<this.to.y&&(g=-g)):(this.from.x<this.to.x&&(v=-v),g=0),{x:this.to.x+v,y:this.to.y+g}}else if(s==="horizontal"){var b=(1-i)*o;return this.from.x<this.to.x&&(b=-b),{x:this.to.x+b,y:this.from.y}}else if(s==="vertical"){var m=(1-i)*a;return this.from.y<this.to.y&&(m=-m),{x:this.from.x,y:this.to.y+m}}else if(s==="curvedCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var x=Math.sqrt(o*o+a*a),E=Math.PI,k=Math.atan2(a,o),$=(k+(i*.5+.5)*E)%(2*E);return{x:this.from.x+(i*.5+.5)*x*Math.sin($),y:this.from.y+(i*.5+.5)*x*Math.cos($)}}else if(s==="curvedCCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var S=Math.sqrt(o*o+a*a),T=Math.PI,O=Math.atan2(a,o),I=(O+(-i*.5+.5)*T)%(2*T);return{x:this.from.x+(i*.5+.5)*S*Math.sin(I),y:this.from.y+(i*.5+.5)*S*Math.cos(I)}}else{var P,R;o<=a?P=R=i*a:P=R=i*o,this.from.x>this.to.x&&(P=-P),this.from.y>=this.to.y&&(R=-R);var D=this.from.x+P,F=this.from.y+R;return o<=a?this.from.x<=this.to.x?D=this.to.x<D?this.to.x:D:D=this.to.x>D?this.to.x:D:this.from.y>=this.to.y?F=this.to.y>F?this.to.y:F:F=this.to.y<F?this.to.y:F,{x:D,y:F}}}},{key:"_findBorderPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(i,s,o.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(i,s,o,a,l,u,d)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=i,a=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*s.x+Math.pow(o,2)*this.toPoint.x,l=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*s.y+Math.pow(o,2)*this.toPoint.y;return{x:a,y:l}}}]),t}(VA);function ist(e){var r=sst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function sst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var ost=function(e){Qt(t,e);var r=ist(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"_getDistanceToBezierEdge2",value:function(i,s,o,a,l,u,d,h){for(var v=1e9,g=i,b=s,m=[0,0,0,0],x=1;x<10;x++){var E=.1*x;m[0]=Math.pow(1-E,3),m[1]=3*E*Math.pow(1-E,2),m[2]=3*Math.pow(E,2)*(1-E),m[3]=Math.pow(E,3);var k=m[0]*i+m[1]*d.x+m[2]*h.x+m[3]*o,$=m[0]*s+m[1]*d.y+m[2]*h.y+m[3]*a;if(x>0){var S=this._getDistanceToLine(g,b,k,$,l,u);v=S<v?S:v}g=k,b=$}return v}}]),t}(VA);function ast(e){var r=lst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function lst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var SM=function(e){Qt(t,e);var r=ast(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"_line",value:function(i,s,o){var a=o[0],l=o[1];this._bezierCurve(i,s,a,l)}},{key:"_getViaCoordinates",value:function(){var i=this.from.x-this.to.x,s=this.from.y-this.to.y,o,a,l,u,d=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(a=this.from.y,u=this.to.y,o=this.from.x-d*i,l=this.to.x+d*i):(a=this.from.y-d*s,u=this.to.y+d*s,o=this.from.x,l=this.to.x),[{x:o,y:a},{x:l,y:u}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),h=Dr(d,2),v=h[0],g=h[1];return this._getDistanceToBezierEdge2(i,s,o,a,l,u,v,g)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=Dr(s,2),a=o[0],l=o[1],u=i,d=[Math.pow(1-u,3),3*u*Math.pow(1-u,2),3*Math.pow(u,2)*(1-u),Math.pow(u,3)],h=d[0]*this.fromPoint.x+d[1]*a.x+d[2]*l.x+d[3]*this.toPoint.x,v=d[0]*this.fromPoint.y+d[1]*a.y+d[2]*l.y+d[3]*this.toPoint.y;return{x:h,y:v}}}]),t}(ost);function ust(e){var r=cst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function cst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var kM=function(e){Qt(t,e);var r=ust(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"_line",value:function(i,s){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),i.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(i){return{x:(1-i)*this.fromPoint.x+i*this.toPoint.x,y:(1-i)*this.fromPoint.y+i*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){var o=this.to,a=this.from;i.id===this.from.id&&(o=this.from,a=this.to);var l=Math.atan2(o.y-a.y,o.x-a.x),u=o.x-a.x,d=o.y-a.y,h=Math.sqrt(u*u+d*d),v=i.distanceToBorder(s,l),g=(h-v)/h;return{x:(1-g)*a.x+g*o.x,y:(1-g)*a.y+g*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToLine(i,s,o,a,l,u)}}]),t}(lY),id=function(){function e(r,t,n,i,s){if(ze(this,e),t===void 0)throw new Error("No body provided");this.options=Hl(i),this.globalOptions=i,this.defaultOptions=s,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new tY(this.body,this.options,!0),this.setOptions(r)}return He(e,[{key:"setOptions",value:function(t){if(t){var n=typeof t.physics<"u"&&this.options.physics!==t.physics||typeof t.hidden<"u"&&(this.options.hidden||!1)!==(t.hidden||!1)||typeof t.from<"u"&&this.options.from!==t.from||typeof t.to<"u"&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=JG(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=HA("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,n=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:n,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var a=this.options.selectionWidth;typeof a=="function"?o.width=a(o.width):typeof a=="number"&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var l=this.options.hoverWidth;typeof l=="function"?o.width=l(o.width):typeof l=="number"&&(o.width+=l),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var n=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,n=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof xM&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof SM&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof EM&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof kM&&t.type.enabled===!1)&&(i=!1),i===!0&&(n=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(n=!0,this.edgeType=new xM(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new SM(this.options,this.body,this.labelModule):this.edgeType=new EM(this.options,this.body,this.labelModule):this.edgeType=new kM(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),n}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.width=this.options.scaling.min+s*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,n,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,n.fromArrow&&(s.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),n.fromArrowSrc&&(s.from.image=this.imagelist.load(n.fromArrowSrc)),n.fromArrowImageWidth&&(s.from.imageWidth=n.fromArrowImageWidth),n.fromArrowImageHeight&&(s.from.imageHeight=n.fromArrowImageHeight)),n.toArrow&&(s.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),n.toArrowSrc&&(s.to.image=this.imagelist.load(n.toArrowSrc)),n.toArrowImageWidth&&(s.to.imageWidth=n.toArrowImageWidth),n.toArrowImageHeight&&(s.to.imageHeight=n.toArrowImageHeight)),n.middleArrow&&(s.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,n),n.middleArrowSrc&&(s.middle.image=this.imagelist.load(n.middleArrowSrc)),n.middleArrowImageWidth&&(s.middle.imageWidth=n.middleArrowImageWidth),n.middleArrowImageHeight&&(s.middle.imageHeight=n.middleArrowImageHeight)),n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.to)}}},{key:"drawLabel",value:function(t,n){if(this.options.label!==void 0){var i=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover);var o;if(i.id!=s.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,n),t.save();var a=this._getRotation(t);a.angle!=0&&(t.translate(a.x,a.y),t.rotate(a.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var l=QG(t,this.options.selfReference.angle,this.options.selfReference.size,i);o=this._pointOnCircle(l.x,l.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var n=[];if(this.labelModule.visible()){var i=this._getRotation();oI(this.labelModule.getSize(),t,i)&&n.push({edgeId:this.id,labelId:0})}var s={left:t.x,top:t.y};return this.isOverlappingWith(s)&&n.push({edgeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){if(this.connected){var n=10,i=this.from.x,s=this.from.y,o=this.to.x,a=this.to.y,l=t.left,u=t.top,d=this.edgeType.getDistanceToEdge(i,s,o,a,l,u);return d<n}else return!1}},{key:"_getRotation",value:function(t){var n=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,n);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var s={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;var o=this.from.y-this.to.y,a=this.from.x-this.to.x,l=Math.atan2(o,a);return(l<-1&&a<0||l>0&&a<0)&&(l+=Math.PI),s.angle=l,s}},{key:"_pointOnCircle",value:function(t,n,i,s){return{x:t+i*Math.cos(s),y:n-i*Math.sin(s)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(ff(a,t,n,i),n.endPointOffset!==void 0&&n.endPointOffset.from!==void 0&&(Gu(n.endPointOffset.from)?t.endPointOffset.from=n.endPointOffset.from:(t.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),n.endPointOffset!==void 0&&n.endPointOffset.to!==void 0&&(Gu(n.endPointOffset.to)?t.endPointOffset.to=n.endPointOffset.to:(t.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Mb(n.label)?t.label=n.label:Mb(t.label)||(t.label=void 0),$s(t,n,"smooth",s),$s(t,n,"shadow",s),$s(t,n,"background",s),n.dashes!==void 0&&n.dashes!==null?t.dashes=n.dashes:i===!0&&n.dashes===null&&(t.dashes=lc(s.dashes)),n.scaling!==void 0&&n.scaling!==null?(n.scaling.min!==void 0&&(t.scaling.min=n.scaling.min),n.scaling.max!==void 0&&(t.scaling.max=n.scaling.max),$s(t.scaling,n.scaling,"label",s.scaling)):i===!0&&n.scaling===null&&(t.scaling=lc(s.scaling)),n.arrows!==void 0&&n.arrows!==null)if(typeof n.arrows=="string"){var l=n.arrows.toLowerCase();t.arrows.to.enabled=Vt(l).call(l,"to")!=-1,t.arrows.middle.enabled=Vt(l).call(l,"middle")!=-1,t.arrows.from.enabled=Vt(l).call(l,"from")!=-1}else if(tr(n.arrows)==="object")$s(t.arrows,n.arrows,"to",s.arrows),$s(t.arrows,n.arrows,"middle",s.arrows),$s(t.arrows,n.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Tg(n.arrows));else i===!0&&n.arrows===null&&(t.arrows=lc(s.arrows));if(n.color!==void 0&&n.color!==null){var u=Al(n.color)?{color:n.color,highlight:n.color,hover:n.color,inherit:!1,opacity:1}:n.color,d=t.color;if(o)br(d,s.color,!1,i);else for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&delete d[h];if(Al(d))d.color=d,d.highlight=d,d.hover=d,d.inherit=!1,u.opacity===void 0&&(d.opacity=1);else{var v=!1;u.color!==void 0&&(d.color=u.color,v=!0),u.highlight!==void 0&&(d.highlight=u.highlight,v=!0),u.hover!==void 0&&(d.hover=u.hover,v=!0),u.inherit!==void 0&&(d.inherit=u.inherit),u.opacity!==void 0&&(d.opacity=Math.min(1,Math.max(0,u.opacity))),v===!0?d.inherit=!1:d.inherit===void 0&&(d.inherit="from")}}else i===!0&&n.color===null&&(t.color=Hl(s.color));i===!0&&n.font===null&&(t.font=Hl(s.font)),Object.prototype.hasOwnProperty.call(n,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=n.selfReferenceSize)}}]),e}(),hst=function(){function e(r,t,n){var i,s=this;ze(this,e),this.body=r,this.images=t,this.groups=n,this.body.functions.createEdge=De(i=this.create).call(i,this),this.edgesListeners={add:function(a,l){s.add(l.items)},update:function(a,l){s.update(l.items)},remove:function(a,l){s.remove(l.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,l,u,d){if(l===a)return .5;var h=1/(l-a);return Math.max(0,(d-a)*h)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},br(this.options,this.defaultOptions),this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t=this,n,i;this.body.emitter.on("_forceDisableDynamicCurves",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");var a=!1;for(var l in t.body.edges)if(Object.prototype.hasOwnProperty.call(t.body.edges,l)){var u=t.body.edges[l],d=t.body.data.edges.get(l);if(d!=null){var h=d.smooth;h!==void 0&&h.enabled===!0&&h.type==="dynamic"&&(s===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:s}}),a=!0)}}o===!0&&a===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",De(n=this.refresh).call(n,this)),this.body.emitter.on("refresh",De(i=this.refresh).call(i,this)),this.body.emitter.on("destroy",function(){Dt(t.edgesListeners,function(s,o){t.body.data.edges&&t.body.data.edges.off(o,s)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){id.parseOptions(this.options,t,!0,this.defaultOptions,!0);var n=!1;if(t.smooth!==void 0)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(n=this.body.edges[i].updateEdgeType()||n);if(t.font!==void 0)for(var s in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,s)&&this.body.edges[s].updateLabelModule();(t.hidden!==void 0||t.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.body.data.edges;if(uV("id",t))this.body.data.edges=t;else if(or(t))this.body.data.edges=new Zs,this.body.data.edges.add(t);else if(!t)this.body.data.edges=new Zs;else throw new TypeError("Array or DataSet expected");if(s&&Dt(this.edgesListeners,function(a,l){s.off(l,a)}),this.body.edges={},this.body.data.edges){Dt(this.edgesListeners,function(a,l){n.body.data.edges.on(l,a)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.edges,s=this.body.data.edges,o=0;o<t.length;o++){var a=t[o],l=i[a];l&&l.disconnect();var u=s.get(a,{showInternalIds:!0});i[a]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var n=this.body.edges,i=this.body.data.edges,s=!1,o=0;o<t.length;o++){var a=t[o],l=i.get(a),u=n[a];u!==void 0?(u.disconnect(),s=u.setOptions(l)||s,u.connect()):(this.body.edges[a]=this.create(l),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.length!==0){var i=this.body.edges;Dt(t,function(s){var o=i[s];o!==void 0&&o.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;Dt(this.body.edges,function(n,i){var s=t.body.data.edges.get(i);s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(t){return new id(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,n=this.body.nodes,i=this.body.edges;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var s=i[t];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(t){var n=[];if(this.body.edges[t]!==void 0){var i=this.body.edges[t];i.fromId!==void 0&&n.push(i.fromId),i.toId!==void 0&&n.push(i.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,n=[];Dt(this.body.edges,function(i,s){var o=t.body.nodes[i.toId],a=t.body.nodes[i.fromId];o!==void 0&&o.isCluster===!0||a!==void 0&&a.isCluster===!0||(o===void 0||a===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(t!=null){var n=this.body.edges,i=[];fr(t).call(t,function(s,o){var a=n[o];a===void 0&&i.push(o)}),this.add(i,!0)}}}]),e}(),uY=function(){function e(r,t,n){ze(this,e),this.body=r,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=Pw("BARNES HUT SOLVER")}return He(e,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t,n=this.body.nodes,i=this.physicsBody.physicsNodeIndices,s=i.length,o=this._formBarnesHutTree(n,i);this.barnesHutTree=o;for(var a=0;a<s;a++)t=n[i[a]],t.options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,n){this._getForceContribution(t.children.NW,n),this._getForceContribution(t.children.NE,n),this._getForceContribution(t.children.SW,n),this._getForceContribution(t.children.SE,n)}},{key:"_getForceContribution",value:function(t,n){if(t.childrenCount>0){var i=t.centerOfMass.x-n.x,s=t.centerOfMass.y-n.y,o=Math.sqrt(i*i+s*s);o*t.calcSize>this.thetaInversed?this._calculateForces(o,i,s,n,t):t.childrenCount===4?this._getForceContributions(t,n):t.children.data.id!=n.id&&this._calculateForces(o,i,s,n,t)}}},{key:"_calculateForces",value:function(t,n,i,s,o){t===0&&(t=.1,n=t),this.overlapAvoidanceFactor<1&&s.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius));var a=this.options.gravitationalConstant*o.mass*s.options.mass/Math.pow(t,3),l=n*a,u=i*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}},{key:"_formBarnesHutTree",value:function(t,n){for(var i,s=n.length,o=t[n[0]].x,a=t[n[0]].y,l=t[n[0]].x,u=t[n[0]].y,d=1;d<s;d++){var h=t[n[d]],v=h.x,g=h.y;h.options.mass>0&&(v<o&&(o=v),v>l&&(l=v),g<a&&(a=g),g>u&&(u=g))}var b=Math.abs(l-o)-Math.abs(u-a);b>0?(a-=.5*b,u+=.5*b):(o+=.5*b,l-=.5*b);var m=1e-5,x=Math.max(m,Math.abs(l-o)),E=.5*x,k=.5*(o+l),$=.5*(a+u),S={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:k-E,maxX:k+E,minY:$-E,maxY:$+E},size:x,calcSize:1/x,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(S.root);for(var T=0;T<s;T++)i=t[n[T]],i.options.mass>0&&this._placeInTree(S.root,i);return S}},{key:"_updateBranchMass",value:function(t,n){var i=t.centerOfMass,s=t.mass+n.options.mass,o=1/s;i.x=i.x*t.mass+n.x*n.options.mass,i.x*=o,i.y=i.y*t.mass+n.y*n.options.mass,i.y*=o,t.mass=s;var a=Math.max(Math.max(n.height,n.radius),n.width);t.maxWidth=t.maxWidth<a?a:t.maxWidth}},{key:"_placeInTree",value:function(t,n,i){(i!=!0||i===void 0)&&this._updateBranchMass(t,n);var s=t.children.NW.range,o;s.maxX>n.x?s.maxY>n.y?o="NW":o="SW":s.maxY>n.y?o="NE":o="SE",this._placeInRegion(t,n,o)}},{key:"_placeInRegion",value:function(t,n,i){var s=t.children[i];switch(s.childrenCount){case 0:s.children.data=n,s.childrenCount=1,this._updateBranchMass(s,n);break;case 1:s.children.data.x===n.x&&s.children.data.y===n.y?(n.x+=this._rng(),n.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,n));break;case 4:this._placeInTree(s,n);break}}},{key:"_splitBranch",value:function(t){var n=null;t.childrenCount===1&&(n=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),n!=null&&this._placeInTree(t,n)}},{key:"_insertRegion",value:function(t,n){var i,s,o,a,l=.5*t.size;switch(n){case"NW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY,a=t.range.minY+l;break;case"NE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY,a=t.range.minY+l;break;case"SW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY+l,a=t.range.maxY;break;case"SE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY+l,a=t.range.maxY;break}t.children[n]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:s,minY:o,maxY:a},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,n){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,n))}},{key:"_drawBranch",value:function(t,n,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,n),this._drawBranch(t.children.NE,n),this._drawBranch(t.children.SE,n),this._drawBranch(t.children.SW,n)),n.strokeStyle=i,n.beginPath(),n.moveTo(t.range.minX,t.range.minY),n.lineTo(t.range.maxX,t.range.minY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.minY),n.lineTo(t.range.maxX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.maxY),n.lineTo(t.range.minX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.minX,t.range.maxY),n.lineTo(t.range.minX,t.range.minY),n.stroke()}}]),e}(),dst=function(){function e(r,t,n){ze(this,e),this._rng=Pw("REPULSION SOLVER"),this.body=r,this.physicsBody=t,this.setOptions(n)}return He(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,d=this.body.nodes,h=this.physicsBody.physicsNodeIndices,v=this.physicsBody.forces,g=this.options.nodeDistance,b=-2/3/g,m=4/3,x=0;x<h.length-1;x++){l=d[h[x]];for(var E=x+1;E<h.length;E++)u=d[h[E]],t=u.x-l.x,n=u.y-l.y,i=Math.sqrt(t*t+n*n),i===0&&(i=.1*this._rng(),t=i),i<2*g&&(i<.5*g?a=1:a=b*i+m,a=a/i,s=t*a,o=n*a,v[l.id].x-=s,v[l.id].y-=o,v[u.id].x+=s,v[u.id].y+=o)}}}]),e}(),fst=function(){function e(r,t,n){ze(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return He(e,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,s=this.options.nodeDistance,o=0;o<n.length-1;o++)for(var a=t[n[o]],l=o+1;l<n.length;l++){var u=t[n[l]];if(a.level===u.level){var d=s+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(u.shape.radius||0)/2),h=u.x-a.x,v=u.y-a.y,g=Math.sqrt(h*h+v*v),b=.05,m=void 0;g<d?m=-Math.pow(b*g,2)+Math.pow(b*d,2):m=0,g!==0&&(m=m/g);var x=h*m,E=v*m;i[a.id].x-=x,i[a.id].y-=E,i[u.id].x+=x,i[u.id].y+=E}}}}]),e}(),hE=function(){function e(r,t,n){ze(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return He(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i=this.physicsBody.physicsEdgeIndices,s=this.body.edges,o,a,l,u=0;u<i.length;u++)n=s[i[u]],n.connected===!0&&n.toId!==n.fromId&&this.body.nodes[n.toId]!==void 0&&this.body.nodes[n.fromId]!==void 0&&(n.edgeType.via!==void 0?(t=n.options.length===void 0?this.options.springLength:n.options.length,o=n.to,a=n.edgeType.via,l=n.from,this._calculateSpringForce(o,a,.5*t),this._calculateSpringForce(a,l,.5*t)):(t=n.options.length===void 0?this.options.springLength*1.5:n.options.length,this._calculateSpringForce(n.from,n.to,t)))}},{key:"_calculateSpringForce",value:function(t,n,i){var s=t.x-n.x,o=t.y-n.y,a=Math.max(Math.sqrt(s*s+o*o),.01),l=this.options.springConstant*(i-a)/a,u=s*l,d=o*l;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=u,this.physicsBody.forces[t.id].y+=d),this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x-=u,this.physicsBody.forces[n.id].y-=d)}}]),e}(),pst=function(){function e(r,t,n){ze(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return He(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,d=this.body.edges,h=.5,v=this.physicsBody.physicsEdgeIndices,g=this.physicsBody.physicsNodeIndices,b=this.physicsBody.forces,m=0;m<g.length;m++){var x=g[m];b[x].springFx=0,b[x].springFy=0}for(var E=0;E<v.length;E++)n=d[v[E]],n.connected===!0&&(t=n.options.length===void 0?this.options.springLength:n.options.length,i=n.from.x-n.to.x,s=n.from.y-n.to.y,u=Math.sqrt(i*i+s*s),u=u===0?.01:u,l=this.options.springConstant*(t-u)/u,o=i*l,a=s*l,n.to.level!=n.from.level?(b[n.toId]!==void 0&&(b[n.toId].springFx-=o,b[n.toId].springFy-=a),b[n.fromId]!==void 0&&(b[n.fromId].springFx+=o,b[n.fromId].springFy+=a)):(b[n.toId]!==void 0&&(b[n.toId].x-=h*o,b[n.toId].y-=h*a),b[n.fromId]!==void 0&&(b[n.fromId].x+=h*o,b[n.fromId].y+=h*a)));l=1;for(var k,$,S=0;S<g.length;S++){var T=g[S];k=Math.min(l,Math.max(-l,b[T].springFx)),$=Math.min(l,Math.max(-l,b[T].springFy)),b[T].x+=k,b[T].y+=$}for(var O=0,I=0,P=0;P<g.length;P++){var R=g[P];O+=b[R].x,I+=b[R].y}for(var D=O/g.length,F=I/g.length,K=0;K<g.length;K++){var q=g[K];b[q].x-=D,b[q].y-=F}}}]),e}(),S0=function(){function e(r,t,n){ze(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return He(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o=this.body.nodes,a=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,u=0;u<a.length;u++){var d=a[u];s=o[d],t=-s.x,n=-s.y,i=Math.sqrt(t*t+n*n),this._calculateForces(i,t,n,l,s)}}},{key:"_calculateForces",value:function(t,n,i,s,o){var a=t===0?0:this.options.centralGravity/t;s[o.id].x=n*a,s[o.id].y=i*a}}]),e}();function vst(e){var r=gst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function gst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var yst=function(e){Qt(t,e);var r=vst(t);function t(n,i,s){var o;return ze(this,t),o=r.call(this,n,i,s),o._rng=Pw("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return He(t,[{key:"_calculateForces",value:function(i,s,o,a,l){i===0&&(i=.1*this._rng(),s=i),this.overlapAvoidanceFactor<1&&a.shape.radius&&(i=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,i-a.shape.radius));var u=a.edges.length+1,d=this.options.gravitationalConstant*l.mass*a.options.mass*u/Math.pow(i,2),h=s*d,v=o*d;this.physicsBody.forces[a.id].x+=h,this.physicsBody.forces[a.id].y+=v}}]),t}(uY);function mst(e){var r=bst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function bst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var wst=function(e){Qt(t,e);var r=mst(t);function t(n,i,s){return ze(this,t),r.call(this,n,i,s)}return He(t,[{key:"_calculateForces",value:function(i,s,o,a,l){if(i>0){var u=l.edges.length+1,d=this.options.centralGravity*u*l.options.mass;a[l.id].x=s*d,a[l.id].y=o*d}}}]),t}(S0),_st=function(){function e(r){ze(this,e),this.body=r,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},nn(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Rb(["stabilization"],this.options,t),$s(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var n=this.options.wind;n&&((typeof n.x!="number"||tI(n.x))&&(n.x=0),(typeof n.y!="number"||tI(n.y))&&(n.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new yst(this.body,this.physicsBody,t),this.edgesSolver=new hE(this.body,this.physicsBody,t),this.gravitySolver=new wst(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new dst(this.body,this.physicsBody,t),this.edgesSolver=new hE(this.body,this.physicsBody,t),this.gravitySolver=new S0(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new fst(this.body,this.physicsBody,t),this.edgesSolver=new pst(this.body,this.physicsBody,t),this.gravitySolver=new S0(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new uY(this.body,this.physicsBody,t),this.edgesSolver=new hE(this.body,this.physicsBody,t),this.gravitySolver=new S0(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var t;this.viewFunction=De(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Ab();this.physicsTick();var n=Ab()-t;(n<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Ro(function(){t.body.emitter.emit("stabilized",{iterations:n}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var t=1.2;this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=this.adaptiveCounter%this.adaptiveInterval===0;t?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,n=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&n[s].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(n[s].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[a]={x:0,y:0},this.physicsBody.velocities[a]===void 0&&(this.physicsBody.velocities[a]={x:0,y:0})}for(var l in this.physicsBody.velocities)t[l]===void 0&&delete this.physicsBody.velocities[l]}},{key:"revert",value:function(){var t=Rr(this.previousStates),n=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var s=0;s<t.length;s++){var o=t[s];n[o]!==void 0?n[o].options.physics===!0&&(this.referenceState[o]={positions:{x:n[o].x,y:n[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,n[o].x=this.previousStates[o].x,n[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t,n,i,s=this.body.nodes,o=this.referenceState,a=.3;for(var l in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,l)&&s[l]!==void 0&&(t=s[l].x-o[l].positions.x,n=s[l].y-o[l].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i>a))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,n=0,i=0,s=5,o=0;o<t.length;o++){var a=t[o],l=this._performStep(a);n=Math.max(n,l),i+=l}this.adaptiveTimestepEnabled=i/t.length<s,this.stabilized=n<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,n,i){var s=this.modelOptions.damping*t,o=(n-s)/i;t+=o*this.timestep;var a=this.options.maxVelocity||1e9;return Math.abs(t)>a&&(t=t>0?a:-a),t}},{key:"_performStep",value:function(t){var n=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var s=this.physicsBody.velocities[t];this.previousStates[t]={x:n.x,y:n.y,vx:s.x,vy:s.y},n.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,i.x,n.options.mass),n.x+=s.x*this.timestep):(i.x=0,s.x=0),n.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,i.y,n.options.mass),n.y+=s.y*this.timestep):(i.y=0,s.y=0);var o=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return o}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].x&&t[n].y){var i=t[n].options.fixed;this.freezeCache[n]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.freezeCache[n]!==void 0&&(t[n].options.fixed.x=this.freezeCache[n].x,t[n].options.fixed.y=this.freezeCache[n].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof n!="number"&&(n=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",n)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=n,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Ro(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,n=function(){return t.stabilized===!1&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var s=0;n()&&s<this.options.stabilization.updateInterval;)this.physicsTick(),s++;if(i(),n()){var o;Ro(De(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var i=this.physicsBody.physicsNodeIndices[n],s=this.body.nodes[i],o=this.physicsBody.forces[i],a=20,l=.03,u=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),d=Math.min(Math.max(5,u),15),h=3*d,v=Z5((180-Math.min(1,Math.max(0,l*u))*180)/360,1,1),g={x:s.x+a*o.x,y:s.y+a*o.y};t.lineWidth=d,t.strokeStyle=v,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(g.x,g.y),t.stroke();var b=Math.atan2(o.y,o.x);t.fillStyle=v,aY.draw(t,{type:"arrow",point:g,angle:b,length:h}),Ig(t).call(t)}}}]),e}();let jm;const $st=new Uint8Array(16);function xst(){if(!jm&&(jm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jm($st)}const Fn=[];for(let e=0;e<256;++e)Fn.push((e+256).toString(16).slice(1));function Est(e,r=0){return(Fn[e[r+0]]+Fn[e[r+1]]+Fn[e[r+2]]+Fn[e[r+3]]+"-"+Fn[e[r+4]]+Fn[e[r+5]]+"-"+Fn[e[r+6]]+Fn[e[r+7]]+"-"+Fn[e[r+8]]+Fn[e[r+9]]+"-"+Fn[e[r+10]]+Fn[e[r+11]]+Fn[e[r+12]]+Fn[e[r+13]]+Fn[e[r+14]]+Fn[e[r+15]]).toLowerCase()}const Sst=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var TM={randomUUID:Sst};function Ip(e,r,t){if(TM.randomUUID&&!r&&!e)return TM.randomUUID();e=e||{};const n=e.random||(e.rng||xst)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return Est(n)}var li=function(){function e(){ze(this,e)}return He(e,null,[{key:"getRange",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.shape.boundingBox.left&&(o=l.shape.boundingBox.left),a<l.shape.boundingBox.right&&(a=l.shape.boundingBox.right),i>l.shape.boundingBox.top&&(i=l.shape.boundingBox.top),s<l.shape.boundingBox.bottom&&(s=l.shape.boundingBox.bottom);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"getRangeCore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.x&&(o=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),s<l.y&&(s=l.y);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,n){var i={};return n===void 0||n==="node"?(br(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):br(i,t.options,!0),i}}]),e}();function kst(e){var r=Tst();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Tst(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var Ist=function(e){Qt(t,e);var r=kst(t);function t(n,i,s,o,a,l){var u;return ze(this,t),u=r.call(this,n,i,s,o,a,l),u.isCluster=!0,u.containedNodes={},u.containedEdges={},u}return He(t,[{key:"_openChildCluster",value:function(i){var s=this,o=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],Dt(o.edges,function(a){delete s.containedEdges[a.id]}),Dt(o.containedNodes,function(a,l){s.containedNodes[l]=a}),o.containedNodes={},Dt(o.containedEdges,function(a,l){s.containedEdges[l]=a}),o.containedEdges={},Dt(o.edges,function(a){Dt(s.edges,function(l){var u,d,h=Vt(u=l.clusteringEdgeReplacingIds).call(u,a.id);h!==-1&&(Dt(a.clusteringEdgeReplacingIds,function(v){l.clusteringEdgeReplacingIds.push(v),s.body.edges[v].edgeReplacedById=l.id}),_a(d=l.clusteringEdgeReplacingIds).call(d,h,1))})}),o.edges=[]}}]),t}(Ki),Ost=function(){function e(r){var t=this;ze(this,e),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},nn(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}return He(e,[{key:"clusterByHubsize",value:function(t,n){t===void 0?t=this._getHubSize():tr(t)==="object"&&(n=this._checkOptions(t),t=this._getHubSize());for(var i=[],s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodes[this.body.nodeIndices[s]];o.edges.length>=t&&i.push(o.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],n,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");n=this._checkOptions(n);var s={},o={};Dt(this.body.nodes,function(a,l){a.options&&n.joinCondition(a.options)===!0&&(s[l]=a,Dt(a.edges,function(u){t.clusteredEdges[u.id]===void 0&&(o[u.id]=u)}))}),this._cluster(s,o,n,i)}},{key:"clusterByEdgeCount",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=this._checkOptions(n);for(var o=[],a={},l,u,d,h=function(){var m={},x={},E=i.body.nodeIndices[v],k=i.body.nodes[E];if(a[E]===void 0){d=0,u=[];for(var $=0;$<k.edges.length;$++)l=k.edges[$],i.clusteredEdges[l.id]===void 0&&(l.toId!==l.fromId&&d++,u.push(l));if(d===t){for(var S=function(q){if(n.joinCondition===void 0||n.joinCondition===null)return!0;var W=li.cloneOptions(q);return n.joinCondition(W)},T=!0,O=0;O<u.length;O++){l=u[O];var I=i._getConnectedId(l,E);if(S(k))x[l.id]=l,m[E]=k,m[I]=i.body.nodes[I],a[E]=!0;else{T=!1;break}}if(Rr(m).length>0&&Rr(x).length>0&&T===!0){var P=function(){for(var q=0;q<o.length;++q)for(var W in m)if(o[q].nodes[W]!==void 0)return o[q]},R=P();if(R!==void 0){for(var D in m)R.nodes[D]===void 0&&(R.nodes[D]=m[D]);for(var F in x)R.edges[F]===void 0&&(R.edges[F]=x[F])}else o.push({nodes:m,edges:x})}}}},v=0;v<this.body.nodeIndices.length;v++)h();for(var g=0;g<o.length;g++)this._cluster(o[g].nodes,o[g].edges,n,!1);s===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,t,n)}},{key:"clusterBridges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,t,n)}},{key:"clusterByConnection",value:function(t,n){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];n=this._checkOptions(n,o),n.clusterNodeProperties.x===void 0&&(n.clusterNodeProperties.x=o.x),n.clusterNodeProperties.y===void 0&&(n.clusterNodeProperties.y=o.y),n.clusterNodeProperties.fixed===void 0&&(n.clusterNodeProperties.fixed={},n.clusterNodeProperties.fixed.x=o.options.fixed.x,n.clusterNodeProperties.fixed.y=o.options.fixed.y);var a={},l={},u=o.id,d=li.cloneOptions(o);a[u]=o;for(var h=0;h<o.edges.length;h++){var v=o.edges[h];if(this.clusteredEdges[v.id]===void 0){var g=this._getConnectedId(v,u);if(this.clusteredNodes[g]===void 0)if(g!==u)if(n.joinCondition===void 0)l[v.id]=v,a[g]=this.body.nodes[g];else{var b=li.cloneOptions(this.body.nodes[g]);n.joinCondition(d,b)===!0&&(l[v.id]=v,a[g]=this.body.nodes[g])}else l[v.id]=v}}var m=Ad(i=Rr(a)).call(i,function(S){return a[S].id});for(var x in a)if(Object.prototype.hasOwnProperty.call(a,x))for(var E=a[x],k=0;k<E.edges.length;k++){var $=E.edges[k];Vt(m).call(m,this._getConnectedId($,E.id))>-1&&(l[$.id]=$)}this._cluster(a,l,n,s)}},{key:"_createClusterEdges",value:function(t,n,i,s){for(var o,a,l,u,d,h,v=Rr(t),g=[],b=0;b<v.length;b++){a=v[b],l=t[a];for(var m=0;m<l.edges.length;m++)o=l.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?n[o.id]=o:o.toId==a?(u=i.id,d=o.fromId,h=d):(u=o.toId,d=i.id,h=u),t[h]===void 0&&g.push({edge:o,fromId:d,toId:u}))}for(var x=[],E=function(I){for(var P=0;P<x.length;P++){var R=x[P],D=I.fromId===R.fromId&&I.toId===R.toId,F=I.fromId===R.toId&&I.toId===R.fromId;if(D||F)return R}return null},k=0;k<g.length;k++){var $=g[k],S=$.edge,T=E($);T===null?(T=this._createClusteredEdge($.fromId,$.toId,S,s),x.push(T)):T.clusteringEdgeReplacingIds.push(S.id),this.body.edges[S.id].edgeReplacedById=T.id,this._backupEdgeOptions(S),S.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.clusteredNodes[a]!==void 0&&o.push(a);for(var l=0;l<o.length;++l)delete t[o[l]];if(Rr(t).length!=0&&!(Rr(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=!0)){var u=br({},i.clusterNodeProperties);if(i.processProperties!==void 0){var d=[];for(var h in t)if(Object.prototype.hasOwnProperty.call(t,h)){var v=li.cloneOptions(t[h]);d.push(v)}var g=[];for(var b in n)if(Object.prototype.hasOwnProperty.call(n,b)&&b.substr(0,12)!=="clusterEdge:"){var m=li.cloneOptions(n[b],"edge");g.push(m)}if(u=i.processProperties(u,d,g),!u)throw new Error("The processProperties function does not return properties!")}u.id===void 0&&(u.id="cluster:"+Ip());var x=u.id;u.label===void 0&&(u.label="cluster");var E=void 0;u.x===void 0&&(E=this._getClusterPosition(t),u.x=E.x),u.y===void 0&&(E===void 0&&(E=this._getClusterPosition(t)),u.y=E.y),u.id=x;var k=this.body.functions.createNode(u,Ist);k.containedNodes=t,k.containedEdges=n,k.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[u.id]=k,this._clusterEdges(t,n,u,i.clusterEdgeProperties),u.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var n=this.clusteredEdges[t.id];n!==void 0&&(t.setOptions({physics:n.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var n=Rr(t),i=t[n[0]].x,s=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,l,u=1;u<n.length;u++)l=t[n[u]],i=l.x<i?l.x:i,s=l.x>s?l.x:s,o=l.y<o?l.y:o,a=l.y>a?l.y:a;return{x:.5*(i+s),y:.5*(o+a)}}},{key:"openCluster",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var s=this.body.nodes[t];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),a=Vt(o).call(o,t)-1;if(a>=0){var l=o[a],u=this.body.nodes[l];u._openChildCluster(t),delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged");return}var d=s.containedNodes,h=s.containedEdges;if(n!==void 0&&n.releaseFunction!==void 0&&typeof n.releaseFunction=="function"){var v={},g={x:s.x,y:s.y};for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)){var m=this.body.nodes[b];v[b]={x:m.x,y:m.y}}var x=n.releaseFunction(g,v);for(var E in d)if(Object.prototype.hasOwnProperty.call(d,E)){var k=this.body.nodes[E];x[E]!==void 0&&(k.x=x[E].x===void 0?s.x:x[E].x,k.y=x[E].y===void 0?s.y:x[E].y)}}else Dt(d,function(he){he.options.fixed.x===!1&&(he.x=s.x),he.options.fixed.y===!1&&(he.y=s.y)});for(var $ in d)if(Object.prototype.hasOwnProperty.call(d,$)){var S=this.body.nodes[$];S.vx=s.vx,S.vy=s.vy,S.setOptions({physics:!0}),delete this.clusteredNodes[$]}for(var T=[],O=0;O<s.edges.length;O++)T.push(s.edges[O]);for(var I=0;I<T.length;I++){for(var P=T[I],R=this._getConnectedId(P,t),D=this.clusteredNodes[R],F=0;F<P.clusteringEdgeReplacingIds.length;F++){var K=P.clusteringEdgeReplacingIds[F],q=this.body.edges[K];if(q!==void 0)if(D!==void 0){var W=this.body.nodes[D.clusterId];W.containedEdges[q.id]=q,delete h[q.id];var M=q.fromId,G=q.toId;q.toId==R?G=D.clusterId:M=D.clusterId,this._createClusteredEdge(M,G,q,W.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(q)}P.remove()}for(var Q in h)Object.prototype.hasOwnProperty.call(h,Q)&&this._restoreEdge(h[Q]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var n=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(this.body.nodes[s].id)}return n}},{key:"findNode",value:function(t){for(var n=[],i=100,s=0,o;this.clusteredNodes[t]!==void 0&&s<i;){if(o=this.body.nodes[t],o===void 0)return[];n.push(o.id),t=this.clusteredNodes[t].clusterId,s++}return o=this.body.nodes[t],o===void 0?[]:(n.push(o.id),ac(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,n){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(n===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(n),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,n){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(n===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),s=0;s<i.length;s++){var o=this.body.edges[i[s]];o.setOptions(n)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var n=[],i=100,s=0;t!==void 0&&this.body.edges[t]!==void 0&&s<i;)n.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,s++;return ac(n).call(n),n}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var n=[t],i=[],s=[],o=100,a=0;n.length>0&&a<o;){var l=n.pop();if(l!==void 0){var u=this.body.edges[l];if(u!==void 0){a++;var d=u.clusteringEdgeReplacingIds;if(d===void 0)s.push(l);else for(var h=0;h<d.length;++h){var v=d[h];Vt(n).call(n,d)!==-1||Vt(i).call(i,d)!==-1||n.push(v)}i.push(l)}}}return s}},{key:"_getConnectedId",value:function(t,n){return t.toId!=n?t.toId:(t.fromId!=n,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,n=0,i=0,s=0,o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];a.edges.length>s&&(s=a.edges.length),t+=a.edges.length,n+=Math.pow(a.edges.length,2),i+=1}t=t/i,n=n/i;var l=n-Math.pow(t,2),u=Math.sqrt(l),d=Math.floor(t+2*u);return d>s&&(d=s),d}},{key:"_createClusteredEdge",value:function(t,n,i,s,o){var a=li.cloneOptions(i,"edge");br(a,s),a.from=t,a.to=n,a.id="clusterEdge:"+Ip(),o!==void 0&&br(a,o);var l=this.body.functions.createEdge(a);return l.clusteringEdgeReplacingIds=[i.id],l.connect(),this.body.edges[l.id]=l,l}},{key:"_clusterEdges",value:function(t,n,i,s){if(n instanceof id){var o=n,a={};a[o.id]=o,n=a}if(t instanceof Ki){var l=t,u={};u[l.id]=l,t=u}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=i.clusterEdgeProperties),this._createClusterEdges(t,n,i,s);for(var d in n)if(Object.prototype.hasOwnProperty.call(n,d)&&this.body.edges[d]!==void 0){var h=this.body.edges[d];this._backupEdgeOptions(h),h.setOptions({physics:!1})}for(var v in t)Object.prototype.hasOwnProperty.call(t,v)&&(this.clusteredNodes[v]={clusterId:i.id,node:this.body.nodes[v]},this.body.nodes[v].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(t!==void 0){var n=this.clusteredNodes[t];if(n!==void 0){var i=n.clusterId;if(i!==void 0)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,n){var i=[];return Dt(t,function(s){n(s)&&i.push(s)}),i}},{key:"_updateState",value:function(){var t=this,n,i=[],s={},o=function(b){Dt(t.body.nodes,function(m){m.isCluster===!0&&b(m)})};for(n in this.clusteredNodes)if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,n)){var a=this.body.nodes[n];a===void 0&&i.push(n)}o(function(g){for(var b=0;b<i.length;b++)delete g.containedNodes[i[b]]});for(var l=0;l<i.length;l++)delete this.clusteredNodes[i[l]];Dt(this.clusteredEdges,function(g){var b=t.body.edges[g];(b===void 0||!b.endPointsValid())&&(s[g]=g)}),o(function(g){Dt(g.containedEdges,function(b,m){!b.endPointsValid()&&!s[m]&&(s[m]=m)})}),Dt(this.body.edges,function(g,b){var m=!0,x=g.clusteringEdgeReplacingIds;if(x!==void 0){var E=0;Dt(x,function(k){var $=t.body.edges[k];$!==void 0&&$.endPointsValid()&&(E+=1)}),m=E>0}(!g.endPointsValid()||!m)&&(s[b]=b)}),o(function(g){Dt(s,function(b){delete g.containedEdges[b],Dt(g.edges,function(m,x){if(m.id===b){g.edges[x]=null;return}m.clusteringEdgeReplacingIds=t._filter(m.clusteringEdgeReplacingIds,function(E){return!s[E]})}),g.edges=t._filter(g.edges,function(m){return m!==null})})}),Dt(s,function(g){delete t.clusteredEdges[g]}),Dt(s,function(g){delete t.body.edges[g]});var u=Rr(this.body.edges);Dt(u,function(g){var b=t.body.edges[g],m=t._isClusteredNode(b.fromId)||t._isClusteredNode(b.toId);if(m!==t._isClusteredEdge(b.id))if(m){var x=t._getClusterNodeForNode(b.fromId);x!==void 0&&t._clusterEdges(t.body.nodes[b.fromId],b,x);var E=t._getClusterNodeForNode(b.toId);E!==void 0&&t._clusterEdges(t.body.nodes[b.toId],b,E)}else delete t._clusterEdges[g],t._restoreEdge(b)});for(var d=!1,h=!0,v=function(){var b=[];o(function(x){var E=Rr(x.containedNodes).length,k=x.options.allowSingleNodeCluster===!0;(k&&E<1||!k&&E<2)&&b.push(x.id)});for(var m=0;m<b.length;++m)t.openCluster(b[m],{},!1);h=b.length>0,d=d||h};h;)v();d&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return this.clusteredNodes[t]!==void 0}},{key:"_isClusteredEdge",value:function(t){return this.clusteredEdges[t]!==void 0}}]),e}();function Ast(){var e;window!==void 0&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),e===void 0?window.requestAnimationFrame=function(r){r()}:window.requestAnimationFrame=e}var Cst=function(){function e(r,t){ze(this,e),Ast(),this.body=r,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},nn(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=Ro(function(){var i;t.zooming=!1,De(i=t._requestRedraw).call(i,t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",De(n=this._requestRedraw).call(n,this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];ff(n,this.options,t)}}},{key:"_requestNextFrame",value:function(t,n){if(!(typeof window>"u")){var i,s=window;return this.requiresTimeout===!0?i=Ro(t,n):s.requestAnimationFrame&&(i=s.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var t;this.renderTimer=this._requestNextFrame(De(t=this._renderStep).call(t,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var n={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,s,o),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var a=this._drawNodes(i,t),l=a.drawExternalLabels;n.drawExternalLabels=l}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),n.drawExternalLabels!=null&&n.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,s,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var n=this.body.nodes,i;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=n[s],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.nodes,s=this.body.nodeIndices,o,a=[],l=[],u=20,d=this.canvas.DOMtoCanvas({x:-u,y:-u}),h=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),v={top:d.y,left:d.x,bottom:h.y,right:h.x},g=[],b=0;b<s.length;b++)if(o=i[s[b]],o.hover)l.push(s[b]);else if(o.isSelected())a.push(s[b]);else if(n===!0){var m=o.draw(t);m.drawExternalLabel!=null&&g.push(m.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(v)===!0){var x=o.draw(t);x.drawExternalLabel!=null&&g.push(x.drawExternalLabel)}else o.updateBoundingBox(t,o.selected);var E,k=a.length,$=l.length;for(E=0;E<k;E++){o=i[a[E]];var S=o.draw(t);S.drawExternalLabel!=null&&g.push(S.drawExternalLabel)}for(E=0;E<$;E++){o=i[l[E]];var T=o.draw(t);T.drawExternalLabel!=null&&g.push(T.drawExternalLabel)}return{drawExternalLabels:function(){for(var I=0,P=g;I<P.length;I++){var R=P[I];R()}}}}},{key:"_drawEdges",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.draw(t)}}},{key:"_drawArrows",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,Vt(t).call(t,"msie 9.0")!=-1?this.requiresTimeout=!0:Vt(t).call(t,"safari")!=-1&&Vt(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var n=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),e}(),EI={},Pst={get exports(){return EI},set exports(e){EI=e}},Nst=zt,Rst=Nst.setInterval;(function(e){e.exports=Rst})(Pst);var Dst=at(EI);function Lb(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function cY(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}var Bst=function(){function e(r){ze(this,e),this.body=r,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},nn(this.options,this.defaultOptions),this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.once("resize",function(i){i.width!==0&&(t.body.view.translation.x=i.width*.5),i.height!==0&&(t.body.view.translation.y=i.height*.5)}),this.body.emitter.on("setSize",De(n=this.setSize).call(n,this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var n=this;if(t!==void 0){var i=["width","height","autoResize"];ff(i,this.options,t)}if(this._cleanUp(),this.options.autoResize===!0){var s;if(window.ResizeObserver){var o=new ResizeObserver(function(){var d=n.setSize();d===!0&&n.body.emitter.emit("_requestRedraw")}),a=this.frame;o.observe(a),this._cleanupCallbacks.push(function(){o.unobserve(a)})}else{var l=Dst(function(){var d=n.setSize();d===!0&&n.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(l)})}var u=De(s=this._onResize).call(s,this);UJe(window,"resize",u),this._cleanupCallbacks.push(function(){KJe(window,"resize",u)})}}},{key:"_cleanUp",value:function(){var t,n,i;fr(t=ac(n=_a(i=this._cleanupCallbacks).call(i,0)).call(n)).call(t,function(s){try{s()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;t!=1&&n!=1?i=this.cameraState.scale*.5*(t+n):t!=1?i=this.cameraState.scale*t:n!=1&&(i=this.cameraState.scale*n),this.body.view.scale=i;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(Vt(t).call(t,"%")!==-1||Vt(t).call(t,"px")!==-1)return t;if(Vt(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new nd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:nd.DIRECTION_ALL}),Lb(this.hammer,function(n){t.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){t.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){t.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){t.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){t.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){t.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){t.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){t.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("wheel",function(n){t.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){t.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){t.body.eventListeners.onContext(n)}),this.hammerFrame=new nd(this.frame),cY(this.hammerFrame,function(n){t.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),n=this._prepareValue(n);var i=!1,s=this.frame.canvas.width,o=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||n!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=t,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==l||this.frame.canvas.height!==u)&&this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,i=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),e}();function Mst(e,r){var t=nn({nodes:r,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},e??{});if(!or(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=r),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}var Lst=function(){function e(r,t){var n,i=this,s;ze(this,e),this.body=r,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",De(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",De(s=this.releaseNode).call(s,this))}return He(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=Mst(t,this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight,o,a;if(i===0||s===0)a=1,o=li.getRange(this.body.nodes,t.nodes);else if(n===!0){var l=0;for(var u in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,u)){var d=this.body.nodes[u];d.predefinedPosition===!0&&(l+=1)}if(l>.5*this.body.nodeIndices.length){this.fit(t,!1);return}o=li.getRange(this.body.nodes,t.nodes);var h=this.body.nodeIndices.length;a=12.662/(h+7.4147)+.0964822;var v=Math.min(i/600,s/600);a*=v}else{this.body.emitter.emit("_resizeNodes"),o=li.getRange(this.body.nodes,t.nodes);var g=Math.abs(o.maxX-o.minX)*1.1,b=Math.abs(o.maxY-o.minY)*1.1,m=i/g,x=s/b;a=m<=x?m:x}a>t.maxZoomLevel?a=t.maxZoomLevel:a<t.minZoomLevel&&(a=t.minZoomLevel);var E=li.findCenter(o),k={position:E,scale:a,animation:t.animation};this.moveTo(k)}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};n.position=i,n.lockedOnNode=t,this.moveTo(n)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(t===void 0){t={};return}if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!Gu(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!Gu(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!Gu(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!Gu(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(t!==void 0){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.position.x,y:n.y-t.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},t.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=De(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=De(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.x,y:n.y-t.y},s=this.body.view.translation,o={x:s.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var n=qJe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var i;this.viewFunction=De(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function IM(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){u(d,"keydown")},l=function(d){u(d,"keyup")},u=function(d,h){if(i[h][d.keyCode]!==void 0){for(var v=i[h][d.keyCode],g=0;g<v.length;g++)(v[g].shift===void 0||v[g].shift==!0&&d.shiftKey==!0||v[g].shift==!1&&d.shiftKey==!1)&&v[g].fn(d);r==!0&&d.preventDefault()}};return n.bind=function(d,h,v){if(v===void 0&&(v="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[v][s[d].code]===void 0&&(i[v][s[d].code]=[]),i[v][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var v in s)s.hasOwnProperty(v)&&n.bind(v,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,v){if(v===void 0&&(v="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var g=[],b=i[v][s[d].code];if(b!==void 0)for(var m=0;m<b.length;m++)b[m].fn==h&&b[m].shift==s[d].shift||g.push(i[v][s[d].code][m]);i[v][s[d].code]=g}else i[v][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",a,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",a,!0),t.addEventListener("keyup",l,!0),n}var Fst=function(){function e(r,t){var n=this;ze(this,e),this.body=r,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return He(e,[{key:"setOptions",value:function(t){t!==void 0&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var n=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var s=0;s<n.length;s++){this.navigationDOM[n[s]]=document.createElement("div"),this.navigationDOM[n[s]].className="vis-button vis-"+n[s],this.navigationDOM.wrapper.appendChild(this.navigationDOM[n[s]]);var o=new nd(this.navigationDOM[n[s]]);if(i[s]==="_fit"){var a;Lb(o,De(a=this._fit).call(a,this))}else{var l;Lb(o,De(l=this.bindToRedraw).call(l,this,i[s]))}this.navigationHammers.push(o)}var u=new nd(this.canvas.frame);cY(u,function(){t._stopMovement()}),this.navigationHammers.push(u),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){if(this.boundFunctions[t]===void 0){var n;this.boundFunctions[t]=De(n=this[t]).call(n,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,n=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,n=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=IM({container:window,preventDefault:!0}):this.keycharm=IM({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var n,i,s,o,a,l,u,d,h,v,g,b,m,x,E,k,$,S,T,O,I,P,R,D;De(n=this.keycharm).call(n,"up",function(){t.bindToRedraw("_moveUp")},"keydown"),De(i=this.keycharm).call(i,"down",function(){t.bindToRedraw("_moveDown")},"keydown"),De(s=this.keycharm).call(s,"left",function(){t.bindToRedraw("_moveLeft")},"keydown"),De(o=this.keycharm).call(o,"right",function(){t.bindToRedraw("_moveRight")},"keydown"),De(a=this.keycharm).call(a,"=",function(){t.bindToRedraw("_zoomIn")},"keydown"),De(l=this.keycharm).call(l,"num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),De(u=this.keycharm).call(u,"num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),De(d=this.keycharm).call(d,"-",function(){t.bindToRedraw("_zoomOut")},"keydown"),De(h=this.keycharm).call(h,"[",function(){t.bindToRedraw("_zoomOut")},"keydown"),De(v=this.keycharm).call(v,"]",function(){t.bindToRedraw("_zoomIn")},"keydown"),De(g=this.keycharm).call(g,"pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),De(b=this.keycharm).call(b,"pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),De(m=this.keycharm).call(m,"up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),De(x=this.keycharm).call(x,"down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),De(E=this.keycharm).call(E,"left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),De(k=this.keycharm).call(k,"right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),De($=this.keycharm).call($,"=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),De(S=this.keycharm).call(S,"num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),De(T=this.keycharm).call(T,"num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),De(O=this.keycharm).call(O,"-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),De(I=this.keycharm).call(I,"[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),De(P=this.keycharm).call(P,"]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),De(R=this.keycharm).call(R,"pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),De(D=this.keycharm).call(D,"pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}]),e}();function jst(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=zst(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function zst(e,r){var t;if(e){if(typeof e=="string")return OM(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OM(e,r)}}function OM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Hst=function(){function e(r,t,n){var i,s,o,a,l,u,d,h,v,g,b,m,x;ze(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new Fst(r,t),this.body.eventListeners.onTap=De(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=De(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=De(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=De(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=De(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=De(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=De(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=De(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=De(v=this.onPinch).call(v,this),this.body.eventListeners.onMouseMove=De(g=this.onMouseMove).call(g,this),this.body.eventListeners.onRelease=De(b=this.onRelease).call(b,this),this.body.eventListeners.onContext=De(m=this.onContext).call(m,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=De(x=this.getPointer).call(x,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},nn(this.options,this.defaultOptions),this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];Rb(n,this.options,t),$s(this.options,t,"keyboard"),t.tooltip&&(nn(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=Y5(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-zJe(this.canvas.frame.canvas),y:t.y-HJe(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n)}},{key:"onDoubleTap",value:function(t){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,n)}},{key:"onHold",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n),this.selectionHandler.generateClickEvent("hold",t,n)}},{key:"onRelease",value:function(t){if(new Date().valueOf()-this.touchTime>10){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,n),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(t){var n=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,n)}},{key:"checkSelectionChanges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,n){var i=function(o,a){for(var l=[],u=0;u<o.length;u++){var d=o[u];Vt(a).call(a,d)===-1&&l.push(d)}return l};return{nodes:i(t.nodes,n.nodes),edges:i(t.edges,n.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(t);var n=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=nn({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(n!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=n.id,n.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[n.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var s=jst(this.selectionHandler.getSelectedNodes()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l={id:a.id,node:a,x:a.x,y:a.y,xFixed:a.options.fixed.x,yFixed:a.options.fixed.y};a.options.fixed.x=!0,a.options.fixed.y=!0,this.drag.selection.push(l)}}catch(u){s.e(u)}finally{s.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var n=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;fr(s).call(s,function(d){var h=d.node;d.xFixed===!1&&(h.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(d.x)+o)),d.yFixed===!1&&(h.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(d.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}var l=i.x-this.drag.pointer.x,u=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+l,y:this.drag.translation.y+u},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var n=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var s=this.body.selectionBox.position,o={minX:Math.min(s.start.x,s.end.x),minY:Math.min(s.start.y,s.end.y),maxX:Math.max(s.start.x,s.end.x),maxY:Math.max(s.start.y,s.end.y)},a=Oi(i=this.body.nodeIndices).call(i,function(d){var h=n.body.nodes[d];return h.x>=o.minX&&h.x<=o.maxX&&h.y>=o.minY&&h.y<=o.maxY});fr(a).call(a,function(d){return n.selectionHandler.selectObject(n.body.nodes[d])});var l=this.getPointer(t.center);this.selectionHandler.commitAndEmit(l,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var u=this.drag.selection;u&&u.length?(fr(u).call(u,function(d){d.node.options.fixed.x=d.xFixed,d.node.options.fixed.y=d.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var n=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,n)}},{key:"zoom",value:function(t,n){if(this.options.zoomView===!0){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var s=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,a=t/i,l=(1-a)*n.x+o.x*a,u=(1-a)*n.y+o.y*a;if(this.body.view.scale=t,this.body.view.translation={x:l,y:u},s!=null){var d=this.canvas.canvasToDOM(s);this.drag.pointer.x=d.x,this.drag.pointer.y=d.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:n}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:n})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){if(t.deltaY!==0){var n=this.body.view.scale;n*=1+(t.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var n=this,i=this.getPointer({x:t.clientX,y:t.clientY}),s=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(s=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),s===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Ro(function(){return n._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var n=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),s={left:n,top:i,right:n,bottom:i},o=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,l="node";if(this.popupObj===void 0){for(var u=this.body.nodeIndices,d=this.body.nodes,h,v=[],g=0;g<u.length;g++)h=d[u[g]],h.isOverlappingWith(s)===!0&&(a=!0,h.getTitle()!==void 0&&v.push(u[g]));v.length>0&&(this.popupObj=d[v[v.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var b=this.body.edgeIndices,m=this.body.edges,x,E=[],k=0;k<b.length;k++)x=m[b[k]],x.isOverlappingWith(s)===!0&&x.connected===!0&&x.getTitle()!==void 0&&E.push(b[k]);E.length>0&&(this.popupObj=m[E[E.length-1]],l="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new tQe(this.canvas.frame)),this.popup.popupTargetType=l,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var n=this.selectionHandler._pointerToPositionObject(t),i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(n),i===!0)){var s=this.selectionHandler.getNodeAt(t);i=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(n));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),SI={},Ust={get exports(){return SI},set exports(e){SI=e}},Kst=jA,Wst=YG;Kst("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Wst);var Vst=zt,qst=Vst.Set,Gst=qst,Yst=Gst;(function(e){e.exports=Yst})(Ust);var Fu=at(SI),kI={},Zst={get exports(){return kI},set exports(e){kI=e}},Xst=Zt,AM=zA,zm=Dd.getWeakData,Jst=FA,Qst=os,eot=cg,dE=Nn,tot=LA,hY=lu,CM=Rn,dY=jc,rot=dY.set,not=dY.getterFor,iot=hY.find,sot=hY.findIndex,oot=Xst([].splice),aot=0,Hm=function(e){return e.frozen||(e.frozen=new fY)},fY=function(){this.entries=[]},fE=function(e,r){return iot(e.entries,function(t){return t[0]===r})};fY.prototype={get:function(e){var r=fE(this,e);if(r)return r[1]},has:function(e){return!!fE(this,e)},set:function(e,r){var t=fE(this,e);t?t[1]=r:this.entries.push([e,r])},delete:function(e){var r=sot(this.entries,function(t){return t[0]===e});return~r&&oot(this.entries,r,1),!!~r}};var lot={getConstructor:function(e,r,t,n){var i=e(function(l,u){Jst(l,s),rot(l,{type:r,id:aot++,frozen:void 0}),eot(u)||tot(u,l[n],{that:l,AS_ENTRIES:t})}),s=i.prototype,o=not(r),a=function(l,u,d){var h=o(l),v=zm(Qst(u),!0);return v===!0?Hm(h).set(u,d):v[h.id]=d,l};return AM(s,{delete:function(l){var u=o(this);if(!dE(l))return!1;var d=zm(l);return d===!0?Hm(u).delete(l):d&&CM(d,u.id)&&delete d[u.id]},has:function(u){var d=o(this);if(!dE(u))return!1;var h=zm(u);return h===!0?Hm(d).has(u):h&&CM(h,d.id)}}),AM(s,t?{get:function(u){var d=o(this);if(dE(u)){var h=zm(u);return h===!0?Hm(d).get(u):h?h[d.id]:void 0}},set:function(u,d){return a(this,u,d)}}:{add:function(u){return a(this,u,!0)}}),i}},uot=WG,PM=ln,k0=Zt,NM=zA,cot=Dd,hot=jA,pY=lot,Um=Nn,Km=jc.enforce,dot=Yt,fot=RV,Rg=Object,pot=Array.isArray,Wm=Rg.isExtensible,vY=Rg.isFrozen,vot=Rg.isSealed,gY=Rg.freeze,got=Rg.seal,RM={},DM={},yot=!PM.ActiveXObject&&"ActiveXObject"in PM,Gf,yY=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},mY=hot("WeakMap",yY,pY),Ih=mY.prototype,T0=k0(Ih.set),mot=function(){return uot&&dot(function(){var e=gY([]);return T0(new mY,e,1),!vY(e)})};if(fot)if(yot){Gf=pY.getConstructor(yY,"WeakMap",!0),cot.enable();var BM=k0(Ih.delete),Vm=k0(Ih.has),MM=k0(Ih.get);NM(Ih,{delete:function(e){if(Um(e)&&!Wm(e)){var r=Km(this);return r.frozen||(r.frozen=new Gf),BM(this,e)||r.frozen.delete(e)}return BM(this,e)},has:function(r){if(Um(r)&&!Wm(r)){var t=Km(this);return t.frozen||(t.frozen=new Gf),Vm(this,r)||t.frozen.has(r)}return Vm(this,r)},get:function(r){if(Um(r)&&!Wm(r)){var t=Km(this);return t.frozen||(t.frozen=new Gf),Vm(this,r)?MM(this,r):t.frozen.get(r)}return MM(this,r)},set:function(r,t){if(Um(r)&&!Wm(r)){var n=Km(this);n.frozen||(n.frozen=new Gf),Vm(this,r)?T0(this,r,t):n.frozen.set(r,t)}else T0(this,r,t);return this}})}else mot()&&NM(Ih,{set:function(r,t){var n;return pot(r)&&(vY(r)?n=RM:vot(r)&&(n=DM)),T0(this,r,t),n==RM&&gY(r),n==DM&&got(r),this}});var bot=zt,wot=bot.WeakMap,_ot=wot,$ot=_ot;(function(e){e.exports=$ot})(Zst);var Op=at(kI);function mr(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function TI(e,r,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,t):i?i.value=t:r.set(e,t),t}function II(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=xot(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function xot(e,r){var t;if(e){if(typeof e=="string")return LM(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LM(e,r)}}function LM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Iu,ms,_l,$l,I0;function FM(e,r){var t=new Fu,n=II(r),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e.has(s)||t.add(s)}}catch(o){n.e(o)}finally{n.f()}return t}var jM=function(){function e(){ze(this,e),Iu.set(this,new Fu),ms.set(this,new Fu)}return He(e,[{key:"size",get:function(){return mr(this,ms,"f").size}},{key:"add",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];mr(this,ms,"f").add(a)}}},{key:"delete",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];mr(this,ms,"f").delete(a)}}},{key:"clear",value:function(){mr(this,ms,"f").clear()}},{key:"getSelection",value:function(){return To(mr(this,ms,"f"))}},{key:"getChanges",value:function(){return{added:To(FM(mr(this,Iu,"f"),mr(this,ms,"f"))),deleted:To(FM(mr(this,ms,"f"),mr(this,Iu,"f"))),previous:To(new Fu(mr(this,Iu,"f"))),current:To(new Fu(mr(this,ms,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();TI(this,Iu,mr(this,ms,"f"),"f"),TI(this,ms,new Fu(mr(this,Iu,"f")),"f");var n=II(t.added),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s.select()}}catch(u){n.e(u)}finally{n.f()}var o=II(t.deleted),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.unselect()}}catch(u){o.e(u)}finally{o.f()}return t}}]),e}();Iu=new Op,ms=new Op;var Eot=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ze(this,e),_l.set(this,new jM),$l.set(this,new jM),I0.set(this,void 0),TI(this,I0,r,"f")}return He(e,[{key:"sizeNodes",get:function(){return mr(this,_l,"f").size}},{key:"sizeEdges",get:function(){return mr(this,$l,"f").size}},{key:"getNodes",value:function(){return mr(this,_l,"f").getSelection()}},{key:"getEdges",value:function(){return mr(this,$l,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=mr(this,_l,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=mr(this,$l,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){mr(this,_l,"f").delete(t)}},{key:"deleteEdges",value:function(t){mr(this,$l,"f").delete(t)}},{key:"clear",value:function(){mr(this,_l,"f").clear(),mr(this,$l,"f").clear()}},{key:"commit",value:function(){for(var t,n,i={nodes:mr(this,_l,"f").commit(),edges:mr(this,$l,"f").commit()},s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(t=mr(this,I0,"f")).call.apply(t,xA(n=[this,i]).call(n,o)),i}}]),e}();_l=new Op,$l=new Op,I0=new Op;function zM(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=Sot(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Sot(e,r){var t;if(e){if(typeof e=="string")return HM(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HM(e,r)}}function HM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var kot=function(){function e(r,t){var n=this;ze(this,e),this.body=r,this.canvas=t,this._selectionAccumulator=new Eot,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},nn(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return He(e,[{key:"setOptions",value:function(t){if(t!==void 0){var n=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];ff(n,this.options,t)}}},{key:"selectOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(n=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return n}},{key:"selectAdditionalOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(n=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return n}},{key:"_initBaseEvent",value:function(t,n){var i={};return i.pointer={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)},i.event=t,i}},{key:"generateClickEvent",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this._initBaseEvent(n,i);if(o===!0)a.nodes=[],a.edges=[];else{var l=this.getSelection();a.nodes=l.nodes,a.edges=l.edges}s!==void 0&&(a.previousSelection=s),t=="click"&&(a.items=this.getClickedItems(i)),n.controlEdge!==void 0&&(a.controlEdge=n.controlEdge),this.body.emitter.emit(t,a)}},{key:"selectObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(t!==void 0){if(t instanceof Ki){if(n===!0){var i;(i=this._selectionAccumulator).addEdges.apply(i,To(t.edges))}this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var n=[],i=this.body.nodes,s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}return n}},{key:"_pointerToPositionObject",value:function(t){var n=this.canvas.DOMtoCanvas(t);return{left:n.x-1,top:n.y+1,right:n.x+1,bottom:n.y-1}}},{key:"getNodeAt",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._pointerToPositionObject(t),s=this._getAllNodesOverlappingWith(i);if(s.length>0)return n===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}},{key:"_getEdgesOverlappingWith",value:function(t,n){for(var i=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var o=this.body.edgeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var n=[];return this._getEdgesOverlappingWith(t,n),n}},{key:"getEdgeAt",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.canvas.DOMtoCanvas(t),s=10,o=null,a=this.body.edges,l=0;l<this.body.edgeIndices.length;l++){var u=this.body.edgeIndices[l],d=a[u];if(d.connected){var h=d.from.x,v=d.from.y,g=d.to.x,b=d.to.y,m=d.edgeType.getDistanceToEdge(h,v,g,b,i.x,i.y);m<s&&(o=u,s=m)}}if(o!==null)return n===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(t){t instanceof Ki?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){if(t instanceof Ki){var n;this._selectionAccumulator.deleteNodes(t),(n=this._selectionAccumulator).deleteEdges.apply(n,To(t.edges))}else this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n);i.hover===!0&&(i.hover=!1,i instanceof Ki?(s.node=i.id,this.body.emitter.emit("blurNode",s)):(s.edge=i.id,this.body.emitter.emit("blurEdge",s)))}},{key:"emitHoverEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n),o=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof Ki?(s.node=i.id,this.body.emitter.emit("hoverNode",s)):(s.edge=i.id,this.body.emitter.emit("hoverEdge",s))),o}},{key:"hoverObject",value:function(t,n){var i=this.getNodeAt(n);i===void 0&&(i=this.getEdgeAt(n));var s=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(i===void 0||i instanceof Ki&&i.id!=o||i instanceof id)&&(this.emitBlurEvent(t,n,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],s=!0);for(var a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(s===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(i===void 0||i instanceof id&&i.id!=a||i instanceof Ki&&!i.hover)&&(this.emitBlurEvent(t,n,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],s=!0));if(i!==void 0){var l=Rr(this.hoverObj.edges).length,u=Rr(this.hoverObj.nodes).length,d=i instanceof id&&l===0&&u===0,h=i instanceof Ki&&l===0&&u===0;(s||d||h)&&(s=this.emitHoverEvent(t,n,i)),i instanceof Ki&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}s===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,n){var i=!1,s=this._selectionAccumulator.commit(),o={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",n,t,o),i=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",n,t,o),i=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",n,t),i=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",n,t),i=!0),i===!0&&this.generateClickEvent("select",n,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return Ad(t=this._selectionAccumulator.getNodes()).call(t,function(n){return n.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return Ad(t=this._selectionAccumulator.getEdges()).call(t,function(n){return n.id})}},{key:"setSelection",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((n.unselectAll||n.unselectAll===void 0)&&this.unselectAll(),t.nodes){var i=zM(t.nodes),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.body.nodes[o];if(!a)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(a,n.highlightEdges)}}catch(v){i.e(v)}finally{i.f()}}if(t.edges){var l=zM(t.edges),u;try{for(l.s();!(u=l.n()).done;){var d=u.value,h=this.body.edges[d];if(!h)throw new RangeError('Edge with id "'+d+'" not found');this.selectObject(h)}}catch(v){l.e(v)}finally{l.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:n})}},{key:"selectEdges",value:function(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var n in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,n.id)||this._selectionAccumulator.deleteEdges(n)}},{key:"getClickedItems",value:function(t){for(var n=this.canvas.DOMtoCanvas(t),i=[],s=this.body.nodeIndices,o=this.body.nodes,a=s.length-1;a>=0;a--){var l=o[s[a]],u=l.getItemsOnPoint(n);i.push.apply(i,u)}for(var d=this.body.edgeIndices,h=this.body.edges,v=d.length-1;v>=0;v--){var g=h[d[v]],b=g.getItemsOnPoint(n);i.push.apply(i,b)}return i}}]),e}(),OI={},Tot={get exports(){return OI},set exports(e){OI=e}},UM=nq,Iot=Math.floor,AI=function(e,r){var t=e.length,n=Iot(t/2);return t<8?Oot(e,r):Aot(e,AI(UM(e,0,n),r),AI(UM(e,n),r),r)},Oot=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},Aot=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},Cot=AI,Pot=dg,KM=Pot.match(/firefox\/(\d+)/i),Not=!!KM&&+KM[1],Rot=dg,Dot=/MSIE|Trident/.test(Rot),Bot=dg,WM=Bot.match(/AppleWebKit\/(\d+)\./),Mot=!!WM&&+WM[1],Lot=dt,bY=Zt,Fot=Lc,jot=ss,VM=fo,zot=Zq,qM=Uo,qA=Yt,Hot=Cot,Uot=hf,GM=Not,Kot=Dot,YM=fg,ZM=Mot,Rl=[],XM=bY(Rl.sort),Wot=bY(Rl.push),Vot=qA(function(){Rl.sort(void 0)}),qot=qA(function(){Rl.sort(null)}),Got=Uot("sort"),wY=!qA(function(){if(YM)return YM<70;if(!(GM&&GM>3)){if(Kot)return!0;if(ZM)return ZM<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Rl.push({k:t+i,v:n})}for(Rl.sort(function(s,o){return o.v-s.v}),i=0;i<Rl.length;i++)t=Rl[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),Yot=Vot||!qot||!Got||!wY,Zot=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:qM(r)>qM(t)?1:-1}};Lot({target:"Array",proto:!0,forced:Yot},{sort:function(r){r!==void 0&&Fot(r);var t=jot(this);if(wY)return r===void 0?XM(t):XM(t,r);var n=[],i=VM(t),s,o;for(o=0;o<i;o++)o in t&&Wot(n,t[o]);for(Hot(n,Zot(r)),s=VM(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)zot(t,o++);return t}});var Xot=Dn,Jot=Xot("Array").sort,Qot=Gr,eat=Jot,pE=Array.prototype,tat=function(e){var r=e.sort;return e===pE||Qot(pE,e)&&r===pE.sort?eat:r},rat=tat,nat=rat;(function(e){e.exports=nat})(Tot);var vE=at(OI),CI={},iat={get exports(){return CI},set exports(e){CI=e}},sat=Lc,oat=ss,aat=uw,lat=fo,uat=TypeError,JM=function(e){return function(r,t,n,i){sat(t);var s=oat(r),o=aat(s),a=lat(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw uat("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},cat={left:JM(!1),right:JM(!0)},hat=za,dat=typeof process<"u"&&hat(process)=="process",fat=dt,pat=cat.left,vat=hf,QM=fg,gat=dat,yat=!gat&&QM>79&&QM<83,mat=yat||!vat("reduce");fat({target:"Array",proto:!0,forced:mat},{reduce:function(r){var t=arguments.length;return pat(this,r,t,t>1?arguments[1]:void 0)}});var bat=Dn,wat=bat("Array").reduce,_at=Gr,$at=wat,gE=Array.prototype,xat=function(e){var r=e.reduce;return e===gE||_at(gE,e)&&r===gE.reduce?$at:r},Eat=xat,Sat=Eat;(function(e){e.exports=Sat})(iat);var _Y=at(CI),mv={},kat={get exports(){return mv},set exports(e){mv=e}},$Y={};(function(e){(function(r,t){t(e)})(PT,function(r){r.__esModule=!0,r.sort=x;function t(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")}var n=32,i=7,s=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(E){return E<1e5?E<100?E<10?0:1:E<1e4?E<1e3?2:3:4:E<1e7?E<1e6?5:6:E<1e9?E<1e8?7:8:9}function l(E,k){if(E===k)return 0;if(~~E===E&&~~k===k){if(E===0||k===0)return E<k?-1:1;if(E<0||k<0){if(k>=0)return-1;if(E>=0)return 1;E=-E,k=-k}var $=a(E),S=a(k),T=0;return $<S?(E*=o[S-$-1],k/=10,T=-1):$>S&&(k*=o[$-S-1],E/=10,T=1),E===k?T:E<k?-1:1}var O=String(E),I=String(k);return O===I?0:O<I?-1:1}function u(E){for(var k=0;E>=n;)k|=E&1,E>>=1;return E+k}function d(E,k,$,S){var T=k+1;if(T===$)return 1;if(S(E[T++],E[k])<0){for(;T<$&&S(E[T],E[T-1])<0;)T++;h(E,k,T)}else for(;T<$&&S(E[T],E[T-1])>=0;)T++;return T-k}function h(E,k,$){for($--;k<$;){var S=E[k];E[k++]=E[$],E[$--]=S}}function v(E,k,$,S,T){for(S===k&&S++;S<$;S++){for(var O=E[S],I=k,P=S;I<P;){var R=I+P>>>1;T(O,E[R])<0?P=R:I=R+1}var D=S-I;switch(D){case 3:E[I+3]=E[I+2];case 2:E[I+2]=E[I+1];case 1:E[I+1]=E[I];break;default:for(;D>0;)E[I+D]=E[I+D-1],D--}E[I]=O}}function g(E,k,$,S,T,O){var I=0,P=0,R=1;if(O(E,k[$+T])>0){for(P=S-T;R<P&&O(E,k[$+T+R])>0;)I=R,R=(R<<1)+1,R<=0&&(R=P);R>P&&(R=P),I+=T,R+=T}else{for(P=T+1;R<P&&O(E,k[$+T-R])<=0;)I=R,R=(R<<1)+1,R<=0&&(R=P);R>P&&(R=P);var D=I;I=T-R,R=T-D}for(I++;I<R;){var F=I+(R-I>>>1);O(E,k[$+F])>0?I=F+1:R=F}return R}function b(E,k,$,S,T,O){var I=0,P=0,R=1;if(O(E,k[$+T])<0){for(P=T+1;R<P&&O(E,k[$+T-R])<0;)I=R,R=(R<<1)+1,R<=0&&(R=P);R>P&&(R=P);var D=I;I=T-R,R=T-D}else{for(P=S-T;R<P&&O(E,k[$+T+R])>=0;)I=R,R=(R<<1)+1,R<=0&&(R=P);R>P&&(R=P),I+=T,R+=T}for(I++;I<R;){var F=I+(R-I>>>1);O(E,k[$+F])<0?R=F:I=F+1}return R}var m=function(){function E(k,$){t(this,E),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=s,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=k,this.compare=$,this.length=k.length,this.length<2*s&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return E.prototype.pushRun=function($,S){this.runStart[this.stackSize]=$,this.runLength[this.stackSize]=S,this.stackSize+=1},E.prototype.mergeRuns=function(){for(;this.stackSize>1;){var $=this.stackSize-2;if($>=1&&this.runLength[$-1]<=this.runLength[$]+this.runLength[$+1]||$>=2&&this.runLength[$-2]<=this.runLength[$]+this.runLength[$-1])this.runLength[$-1]<this.runLength[$+1]&&$--;else if(this.runLength[$]>this.runLength[$+1])break;this.mergeAt($)}},E.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var $=this.stackSize-2;$>0&&this.runLength[$-1]<this.runLength[$+1]&&$--,this.mergeAt($)}},E.prototype.mergeAt=function($){var S=this.compare,T=this.array,O=this.runStart[$],I=this.runLength[$],P=this.runStart[$+1],R=this.runLength[$+1];this.runLength[$]=I+R,$===this.stackSize-3&&(this.runStart[$+1]=this.runStart[$+2],this.runLength[$+1]=this.runLength[$+2]),this.stackSize--;var D=b(T[P],T,O,I,0,S);O+=D,I-=D,I!==0&&(R=g(T[O+I-1],T,P,R,R-1,S),R!==0&&(I<=R?this.mergeLow(O,I,P,R):this.mergeHigh(O,I,P,R)))},E.prototype.mergeLow=function($,S,T,O){var I=this.compare,P=this.array,R=this.tmp,D=0;for(D=0;D<S;D++)R[D]=P[$+D];var F=0,K=T,q=$;if(P[q++]=P[K++],--O===0){for(D=0;D<S;D++)P[q+D]=R[F+D];return}if(S===1){for(D=0;D<O;D++)P[q+D]=P[K+D];P[q+O]=R[F];return}for(var W=this.minGallop;;){var M=0,G=0,Q=!1;do if(I(P[K],R[F])<0){if(P[q++]=P[K++],G++,M=0,--O===0){Q=!0;break}}else if(P[q++]=R[F++],M++,G=0,--S===1){Q=!0;break}while((M|G)<W);if(Q)break;do{if(M=b(P[K],R,F,S,0,I),M!==0){for(D=0;D<M;D++)P[q+D]=R[F+D];if(q+=M,F+=M,S-=M,S<=1){Q=!0;break}}if(P[q++]=P[K++],--O===0){Q=!0;break}if(G=g(R[F],P,K,O,0,I),G!==0){for(D=0;D<G;D++)P[q+D]=P[K+D];if(q+=G,K+=G,O-=G,O===0){Q=!0;break}}if(P[q++]=R[F++],--S===1){Q=!0;break}W--}while(M>=i||G>=i);if(Q)break;W<0&&(W=0),W+=2}if(this.minGallop=W,W<1&&(this.minGallop=1),S===1){for(D=0;D<O;D++)P[q+D]=P[K+D];P[q+O]=R[F]}else{if(S===0)throw new Error("mergeLow preconditions were not respected");for(D=0;D<S;D++)P[q+D]=R[F+D]}},E.prototype.mergeHigh=function($,S,T,O){var I=this.compare,P=this.array,R=this.tmp,D=0;for(D=0;D<O;D++)R[D]=P[T+D];var F=$+S-1,K=O-1,q=T+O-1,W=0,M=0;if(P[q--]=P[F--],--S===0){for(W=q-(O-1),D=0;D<O;D++)P[W+D]=R[D];return}if(O===1){for(q-=S,F-=S,M=q+1,W=F+1,D=S-1;D>=0;D--)P[M+D]=P[W+D];P[q]=R[K];return}for(var G=this.minGallop;;){var Q=0,he=0,ue=!1;do if(I(R[K],P[F])<0){if(P[q--]=P[F--],Q++,he=0,--S===0){ue=!0;break}}else if(P[q--]=R[K--],he++,Q=0,--O===1){ue=!0;break}while((Q|he)<G);if(ue)break;do{if(Q=S-b(R[K],P,$,S,S-1,I),Q!==0){for(q-=Q,F-=Q,S-=Q,M=q+1,W=F+1,D=Q-1;D>=0;D--)P[M+D]=P[W+D];if(S===0){ue=!0;break}}if(P[q--]=R[K--],--O===1){ue=!0;break}if(he=O-g(P[F],R,0,O,O-1,I),he!==0){for(q-=he,K-=he,O-=he,M=q+1,W=K+1,D=0;D<he;D++)P[M+D]=R[W+D];if(O<=1){ue=!0;break}}if(P[q--]=P[F--],--S===0){ue=!0;break}G--}while(Q>=i||he>=i);if(ue)break;G<0&&(G=0),G+=2}if(this.minGallop=G,G<1&&(this.minGallop=1),O===1){for(q-=S,F-=S,M=q+1,W=F+1,D=S-1;D>=0;D--)P[M+D]=P[W+D];P[q]=R[K]}else{if(O===0)throw new Error("mergeHigh preconditions were not respected");for(W=q-(O-1),D=0;D<O;D++)P[W+D]=R[D]}},E}();function x(E,k,$,S){if(!Array.isArray(E))throw new TypeError("Can only sort arrays");k?typeof k!="function"&&(S=$,$=k,k=l):k=l,$||($=0),S||(S=E.length);var T=S-$;if(!(T<2)){var O=0;if(T<n){O=d(E,$,S,k),v(E,$,S,$+O,k);return}var I=new m(E,k),P=u(T);do{if(O=d(E,$,S,k),O<P){var R=T;R>P&&(R=P),v(E,$,$+R,$+O,k),O=R}I.pushRun($,O),I.mergeRuns(),T-=O,$+=O}while(T!==0);I.forceMergeRuns()}}})})($Y);(function(e){e.exports=$Y})(kat);var eL=at(mv);function xY(e){var r=Tat();return function(){var n=rt(e),i;if(r){var s=rt(this).constructor;i=$e(n,arguments,s)}else i=n.apply(this,arguments);return ar(this,i)}}function Tat(){if(typeof Reflect>"u"||!$e||$e.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call($e(Boolean,[],function(){})),!0}catch{return!1}}var EY=function(){function e(){ze(this,e)}return He(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,n,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,n){this.fake_use(t,n),this.abstract()}},{key:"shift",value:function(t,n){this.fake_use(t,n),this.abstract()}}]),e}(),Iat=function(e){Qt(t,e);var r=xY(t);function t(n){var i;return ze(this,t),i=r.call(this),i.layout=n,i}return He(t,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.x=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_x,max:s.max_x}}},{key:"sort",value:function(i){mv.sort(i,function(s,o){return s.x-o.x})}},{key:"fix",value:function(i,s){i.y=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.y=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].x+=s}}]),t}(EY),Oat=function(e){Qt(t,e);var r=xY(t);function t(n){var i;return ze(this,t),i=r.call(this),i.layout=n,i}return He(t,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.y=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_y,max:s.max_y}}},{key:"sort",value:function(i){mv.sort(i,function(s,o){return s.y-o.y})}},{key:"fix",value:function(i,s){i.x=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.x=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].y+=s}}]),t}(EY),PI={},Aat={get exports(){return PI},set exports(e){PI=e}},Cat=dt,Pat=lu.every,Nat=hf,Rat=Nat("every");Cat({target:"Array",proto:!0,forced:!Rat},{every:function(r){return Pat(this,r,arguments.length>1?arguments[1]:void 0)}});var Dat=Dn,Bat=Dat("Array").every,Mat=Gr,Lat=Bat,yE=Array.prototype,Fat=function(e){var r=e.every;return e===yE||Mat(yE,e)&&r===yE.every?Lat:r},jat=Fat,zat=jat;(function(e){e.exports=zat})(Aat);var SY=at(PI);function Hat(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=Uat(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Uat(e,r){var t;if(e){if(typeof e=="string")return tL(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tL(e,r)}}function tL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Kat(e,r){var t=new Fu;return fr(e).call(e,function(n){var i;fr(i=n.edges).call(i,function(s){s.connected&&t.add(s)})}),fr(t).call(t,function(n){var i=n.from.id,s=n.to.id;r[i]==null&&(r[i]=0),(r[s]==null||r[i]>=r[s])&&(r[s]=r[i]+1)}),r}function Wat(e){return kY(function(r){var t,n;return SY(t=Oi(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.to===r})},function(r,t){return t>r},"from",e)}function Vat(e){return kY(function(r){var t,n;return SY(t=Oi(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.from===r})},function(r,t){return t<r},"to",e)}function kY(e,r,t,n){var i,s=lc(null),o=_Y(i=To(eY(n).call(n))).call(i,function(g,b){return g+1+b.edges.length},0),a=t+"Id",l=t==="to"?1:-1,u=Hat(n),d;try{var h=function(){var b=Dr(d.value,2),m=b[0],x=b[1];if(!n.has(m)||!e(x))return"continue";s[m]=0;for(var E=[x],k=0,$,S=function(){var I,P;if(!n.has(m))return"continue";var R=s[$.id]+l;if(fr(I=Oi(P=$.edges).call(P,function(D){return D.connected&&D.to!==D.from&&D[t]!==$&&n.has(D.toId)&&n.has(D.fromId)})).call(I,function(D){var F=D[a],K=s[F];(K==null||r(R,K))&&(s[F]=R,E.push(D[t]))}),k>o)return{v:{v:Kat(n,s)}};++k};$=E.pop();){var T=S();if(T!=="continue"&&tr(T)==="object")return T.v}};for(u.s();!(d=u.n()).done;){var v=h();if(v!=="continue"&&tr(v)==="object")return v.v}}catch(g){u.e(g)}finally{u.f()}return s}var qat=function(){function e(){ze(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return He(e,[{key:"addRelation",value:function(t,n){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(n),this.parentReference[n]===void 0&&(this.parentReference[n]=[]),this.parentReference[n].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,n){n!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=n,this.treeIndex=Math.max(n,this.treeIndex))}},{key:"ensureLevel",value:function(t){this.levels[t]===void 0&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var n=this,i={},s=function o(a){if(i[a]!==void 0)return i[a];var l=n.levels[a];if(n.childrenReference[a]){var u=n.childrenReference[a];if(u.length>0)for(var d=0;d<u.length;d++)l=Math.max(l,o(u[d]))}return i[a]=l,l};return s(t)}},{key:"levelDownstream",value:function(t,n){this.levels[n.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[n.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var n=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.levels[i]!==void 0&&(n=Math.min(this.levels[i],n));for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.levels[s]!==void 0&&(this.levels[s]-=n)}},{key:"getTreeSize",value:function(t,n){var i=1e9,s=-1e9,o=1e9,a=-1e9;for(var l in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,l)&&this.trees[l]===n){var u=t[l];i=Math.min(u.x,i),s=Math.max(u.x,s),o=Math.min(u.y,o),a=Math.max(u.y,a)}return{min_x:i,max_x:s,min_y:o,max_y:a}}},{key:"hasSameParent",value:function(t,n){var i=this.parentReference[t.id],s=this.parentReference[n.id];if(i===void 0||s===void 0)return!1;for(var o=0;o<i.length;o++)for(var a=0;a<s.length;a++)if(i[o]==s[a])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,n){return this.trees[t.id]===this.trees[n.id]}},{key:"getLevels",value:function(){return Rr(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,n){this.distributionOrdering[n]===void 0&&(this.distributionOrdering[n]=[]);var i=!1,s=this.distributionOrdering[n];for(var o in s)if(s[o]===t){i=!0;break}i||(this.distributionOrdering[n].push(t),this.distributionIndex[t.id]=this.distributionOrdering[n].length-1)}}]),e}(),Gat=function(){function e(r){ze(this,e),this.body=r,this._resetRNG(Math.random()+":"+Ab()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},nn(this.options,this.defaultOptions),this.bindEventListeners()}return He(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(t.options.hierarchical.enabled===!0){var n=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",n,!1)}})}},{key:"setOptions",value:function(t,n){if(t!==void 0){var i=this.options.hierarchical,s=i.enabled;if(ff(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),$s(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(n);if(s===!0)return this.body.emitter.emit("refresh"),br(n,this.optionsBackup)}return n}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Pw(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){var n=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:n.enabled===void 0?!0:n.enabled,solver:"hierarchicalRepulsion"},n.enabled=n.enabled===void 0?!0:n.enabled,n.solver=n.solver||"barnesHut"):tr(t.physics)==="object"?(n.enabled=t.physics.enabled===void 0?!0:t.physics.enabled,n.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(n.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var s=t.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(i=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},t.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:i,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var n=t.length+50,i=0;i<t.length;i++){var s=t[i],o=2*Math.PI*this._rng();s.x===void 0&&(s.x=n*Math.cos(o)),s.y===void 0&&(s.y=n*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=this.body.nodeIndices,n=0,i=0;i<t.length;i++){var s=this.body.nodes[t[i]];s.predefinedPosition===!0&&(n+=1)}if(n<.5*t.length){var o=10,a=0,l=this.options.clusterThreshold,u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>l){for(var d=t.length;t.length>l&&a<=o;){a+=1;var h=t.length;a%3===0?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);var v=t.length;if(h==v&&a%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*d)})}a>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var g=70,b=0;b<t.length;b++){var m=this.body.nodes[t[b]];m.predefinedPosition===!1&&(m.x+=(.5-this._rng())*g,m.y+=(.5-this._rng())*g)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=li.getRangeCore(this.body.nodes,this.body.nodeIndices),n=li.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var s=this.body.nodes[this.body.nodeIndices[i]];s.x-=n.x,s.y-=n.y}}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var n=0;n<this.body.nodeIndices.length;n++)this.body.nodes[this.body.nodeIndices[n]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[n],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t,n,i=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new qat;for(n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&(t=this.body.nodes[n],t.options.level!==void 0?(i=!0,this.hierarchical.levels[n]=t.options.level):s=!0);if(s===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(s===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);var l=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(l),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,n=!1,i={},s=function(){for(var $=a(),S=0,T=0;T<$.length-1;T++){var O=$[T].max-$[T+1].min;S+=O+t.options.hierarchical.treeSpacing,o(T+1,S)}},o=function($,S){var T=t.hierarchical.trees;for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&T[O]===$&&t.direction.shift(O,S)},a=function(){for(var $=[],S=0;S<t.hierarchical.numTrees();S++)$.push(t.direction.getTreeSize(S));return $},l=function k($,S){if(!S[$.id]&&(S[$.id]=!0,t.hierarchical.childrenReference[$.id])){var T=t.hierarchical.childrenReference[$.id];if(T.length>0)for(var O=0;O<T.length;O++)k(t.body.nodes[T[O]],S)}},u=function($){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,T=1e9,O=1e9,I=1e9,P=-1e9;for(var R in $)if(Object.prototype.hasOwnProperty.call($,R)){var D=t.body.nodes[R],F=t.hierarchical.levels[D.id],K=t.direction.getPosition(D),q=t._getSpaceAroundNode(D,$),W=Dr(q,2),M=W[0],G=W[1];T=Math.min(M,T),O=Math.min(G,O),F<=S&&(I=Math.min(K,I),P=Math.max(K,P))}return[I,P,T,O]},d=function($,S){var T=t.hierarchical.getMaxLevel($.id),O=t.hierarchical.getMaxLevel(S.id);return Math.min(T,O)},h=function($,S,T){for(var O=t.hierarchical,I=0;I<S.length;I++){var P=S[I],R=O.distributionOrdering[P];if(R.length>1)for(var D=0;D<R.length-1;D++){var F=R[D],K=R[D+1];O.hasSameParent(F,K)&&O.inSameSubNetwork(F,K)&&$(F,K,T)}}},v=function($,S){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,O=t.direction.getPosition($),I=t.direction.getPosition(S),P=Math.abs(I-O),R=t.options.hierarchical.nodeSpacing;if(P>R){var D={},F={};l($,D),l(S,F);var K=d($,S),q=u(D,K),W=u(F,K),M=q[1],G=W[0],Q=W[2],he=Math.abs(M-G);if(he>R){var ue=M-G+R;ue<-Q+R&&(ue=-Q+R),ue<0&&(t._shiftBlock(S.id,ue),n=!0,T===!0&&t._centerParent(S))}}},g=function($,S){for(var T=S.id,O=S.edges,I=t.hierarchical.levels[S.id],P=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,R={},D=[],F=0;F<O.length;F++){var K=O[F];if(K.toId!=K.fromId){var q=K.toId==T?K.from:K.to;R[O[F].id]=q,t.hierarchical.levels[q.id]<I&&D.push(K)}}var W=function(Te,Ce){for(var Ye=0,ge=0;ge<Ce.length;ge++)if(R[Ce[ge].id]!==void 0){var ce=t.direction.getPosition(R[Ce[ge].id])-Te;Ye+=ce/Math.sqrt(ce*ce+P)}return Ye},M=function(Te,Ce){for(var Ye=0,ge=0;ge<Ce.length;ge++)if(R[Ce[ge].id]!==void 0){var ce=t.direction.getPosition(R[Ce[ge].id])-Te;Ye-=P*Math.pow(ce*ce+P,-1.5)}return Ye},G=function(Te,Ce){for(var Ye=t.direction.getPosition(S),ge={},ce=0;ce<Te;ce++){var ye=W(Ye,Ce),fe=M(Ye,Ce),y=40,w=Math.max(-y,Math.min(y,Math.round(ye/fe)));if(Ye=Ye-w,ge[Ye]!==void 0)break;ge[Ye]=ce}return Ye},Q=function(Te){var Ce=t.direction.getPosition(S);if(i[S.id]===void 0){var Ye={};l(S,Ye),i[S.id]=Ye}var ge=u(i[S.id]),ce=ge[2],ye=ge[3],fe=Te-Ce,y=0;fe>0?y=Math.min(fe,ye-t.options.hierarchical.nodeSpacing):fe<0&&(y=-Math.min(-fe,ce-t.options.hierarchical.nodeSpacing)),y!=0&&(t._shiftBlock(S.id,y),n=!0)},he=function(Te){var Ce=t.direction.getPosition(S),Ye=t._getSpaceAroundNode(S),ge=Dr(Ye,2),ce=ge[0],ye=ge[1],fe=Te-Ce,y=Ce;fe>0?y=Math.min(Ce+(ye-t.options.hierarchical.nodeSpacing),Te):fe<0&&(y=Math.max(Ce-(ce-t.options.hierarchical.nodeSpacing),Te)),y!==Ce&&(t.direction.setPosition(S,y),n=!0)},ue=G($,D);Q(ue),ue=G($,O),he(ue)},b=function($){var S=t.hierarchical.getLevels();S=ac(S).call(S);for(var T=0;T<$;T++){n=!1;for(var O=0;O<S.length;O++)for(var I=S[O],P=t.hierarchical.distributionOrdering[I],R=0;R<P.length;R++)g(1e3,P[R]);if(n!==!0)break}},m=function($){var S=t.hierarchical.getLevels();S=ac(S).call(S);for(var T=0;T<$&&(n=!1,h(v,S,!0),n===!0);T++);},x=function(){for(var $ in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,$)&&t._centerParent(t.body.nodes[$])},E=function(){var $=t.hierarchical.getLevels();$=ac($).call($);for(var S=0;S<$.length;S++)for(var T=$[S],O=t.hierarchical.distributionOrdering[T],I=0;I<O.length;I++)t._centerParent(O[I])};this.options.hierarchical.blockShifting===!0&&(m(5),x()),this.options.hierarchical.edgeMinimization===!0&&b(20),this.options.hierarchical.parentCentralization===!0&&E(),s()}},{key:"_getSpaceAroundNode",value:function(t,n){var i=!0;n===void 0&&(i=!1);var s=this.hierarchical.levels[t.id];if(s!==void 0){var o=this.hierarchical.distributionIndex[t.id],a=this.direction.getPosition(t),l=this.hierarchical.distributionOrdering[s],u=1e9,d=1e9;if(o!==0){var h=l[o-1];if(i===!0&&n[h.id]===void 0||i===!1){var v=this.direction.getPosition(h);u=a-v}}if(o!=l.length-1){var g=l[o+1];if(i===!0&&n[g.id]===void 0||i===!1){var b=this.direction.getPosition(g);d=Math.min(d,b-a)}}return[u,d]}else return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var n=this.hierarchical.parentReference[t.id],i=0;i<n.length;i++){var s=n[i],o=this.body.nodes[s],a=this.hierarchical.childrenReference[s];if(a!==void 0){var l=this._getCenterPosition(a),u=this.direction.getPosition(o),d=this._getSpaceAroundNode(o),h=Dr(d,2),v=h[0],g=h[1],b=u-l;(b<0&&Math.abs(b)<g-this.options.hierarchical.nodeSpacing||b>0&&Math.abs(b)<v-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,l)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,s=Rr(t[n]);s=this._indexArrayToNodes(s),vE(i=this.direction).call(i,s);for(var o=0,a=0;a<s.length;a++){var l=s[a];if(this.positionedNodes[l.id]===void 0){var u=this.options.hierarchical.nodeSpacing,d=u*o;o>0&&(d=this.direction.getPosition(s[a-1])+u),this.direction.setPosition(l,d,n),this._validatePositionAndContinue(l,n,d),o++}}}}},{key:"_placeBranchNodes",value:function(t,n){var i,s=this.hierarchical.childrenReference[t];if(s!==void 0){for(var o=[],a=0;a<s.length;a++)o.push(this.body.nodes[s[a]]);vE(i=this.direction).call(i,o);for(var l=0;l<o.length;l++){var u=o[l],d=this.hierarchical.levels[u.id];if(d>n&&this.positionedNodes[u.id]===void 0){var h=this.options.hierarchical.nodeSpacing,v=void 0;l===0?v=this.direction.getPosition(this.body.nodes[t]):v=this.direction.getPosition(o[l-1])+h,this.direction.setPosition(u,v,d),this._validatePositionAndContinue(u,d,v)}else return}var g=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[t],g,n)}}},{key:"_validatePositionAndContinue",value:function(t,n,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[n]!==void 0){var s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[n]]);if(i-s<this.options.hierarchical.nodeSpacing){var o=s+this.options.hierarchical.nodeSpacing-i,a=this._findCommonParent(this.lastNodeOnLevel[n],t.id);this._shiftBlock(a.withChild,o)}}this.lastNodeOnLevel[n]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,n)}}},{key:"_indexArrayToNodes",value:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.body.nodes[t[i]]);return n}},{key:"_getDistribution",value:function(){var t={},n,i;for(n in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,n)){i=this.body.nodes[n];var s=this.hierarchical.levels[n]===void 0?0:this.hierarchical.levels[n];this.direction.fix(i,s),t[s]===void 0&&(t[s]={}),t[s][n]=i}return t}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return Dt(t.edges,function(s){var o;Vt(o=n.body.edgeIndices).call(o,s.id)!==-1&&i.push(s)}),i}},{key:"_getHubSizes",value:function(){var t=this,n={},i=this.body.nodeIndices;Dt(i,function(o){var a=t.body.nodes[o],l=t._getActiveEdges(a).length;n[l]=!0});var s=[];return Dt(n,function(o){s.push(Number(o))}),vE(eL).call(eL,s,function(o,a){return a-o}),s}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,n=function(u,d){t.hierarchical.levelDownstream(u,d)},i=this._getHubSizes(),s=function(){var u=i[o];if(u===0)return"break";Dt(t.body.nodeIndices,function(d){var h=t.body.nodes[d];u===t._getActiveEdges(h).length&&t._crawlNetwork(n,d)})},o=0;o<i.length;++o){var a=s();if(a==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,n=1e5,i=function(a,l,u){},s=function(a,l,u){var d=t.hierarchical.levels[a.id];d===void 0&&(d=t.hierarchical.levels[a.id]=n);var h=i(li.cloneOptions(a,"node"),li.cloneOptions(l,"node"),li.cloneOptions(u,"edge"));t.hierarchical.levels[l.id]=d+h};this._crawlNetwork(s),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,i=_Y(t=this.body.nodeIndices).call(t,function(s,o){return s.set(o,n.body.nodes[o]),s},new ZG);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=Vat(i):this.hierarchical.levels=Wat(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,n=function(s,o){t.hierarchical.levels[o.id]>t.hierarchical.levels[s.id]&&t.hierarchical.addRelation(s.id,o.id)};this._crawlNetwork(n),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,s={},o=function v(g,b){if(s[g.id]===void 0){t.hierarchical.setTreeIndex(g,b),s[g.id]=!0;for(var m,x=t._getActiveEdges(g),E=0;E<x.length;E++){var k=x[E];k.connected===!0&&(k.toId==g.id?m=k.from:m=k.to,g.id!=m.id&&(n(g,m,k),v(m,b)))}}};if(i===void 0)for(var a=0,l=0;l<this.body.nodeIndices.length;l++){var u=this.body.nodeIndices[l];if(s[u]===void 0){var d=this.body.nodes[u];o(d,a),a+=1}}else{var h=this.body.nodes[i];if(h===void 0){console.error("Node not found:",i);return}o(h)}}},{key:"_shiftBlock",value:function(t,n){var i=this,s={},o=function a(l){if(!s[l]){s[l]=!0,i.direction.shift(l,n);var u=i.hierarchical.childrenReference[l];if(u!==void 0)for(var d=0;d<u.length;d++)a(u[d])}};o(t)}},{key:"_findCommonParent",value:function(t,n){var i=this,s={},o=function l(u,d){var h=i.hierarchical.parentReference[d];if(h!==void 0)for(var v=0;v<h.length;v++){var g=h[v];u[g]=!0,l(u,g)}},a=function l(u,d){var h=i.hierarchical.parentReference[d];if(h!==void 0)for(var v=0;v<h.length;v++){var g=h[v];if(u[g]!==void 0)return{foundParent:g,withChild:d};var b=l(u,g);if(b.foundParent!==null)return b}return{foundParent:null,withChild:d}};return o(s,t),a(s,n)}},{key:"setDirectionStrategy",value:function(){var t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";t?this.direction=new Iat(this):this.direction=new Oat(this)}},{key:"_getCenterPosition",value:function(t){for(var n=1e9,i=-1e9,s=0;s<t.length;s++){var o=void 0;if(t[s].id!==void 0)o=t[s];else{var a=t[s];o=this.body.nodes[a]}var l=this.direction.getPosition(o);n=Math.min(n,l),i=Math.max(i,l)}return .5*(n+i)}}]),e}();function Yat(e,r){var t=typeof cu<"u"&&Ha(e)||e["@@iterator"];if(!t){if(or(e)||(t=Zat(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Zat(e,r){var t;if(e){if(typeof e=="string")return rL(e,r);var n=Kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return zc(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rL(e,r)}}function rL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Xat=function(){function e(r,t,n,i){var s=this,o,a;ze(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},nn(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",De(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",De(a=this._restore).call(a,this))}return He(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,n,i){n!==void 0&&(n.locale!==void 0?this.options.locale=n.locale:this.options.locale=i.locale,n.locales!==void 0?this.options.locales=n.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,br(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,n;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),o=i+s,a=this.options.locales[this.options.locale],l=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),l=!0),this.options.addEdge!==!1&&(l===!0?this._createSeperator(1):l=!0,this._createAddEdgeButton(a)),i===1&&typeof this.options.editNode=="function"?(l===!0?this._createSeperator(2):l=!0,this._createEditNodeButton(a)):s===1&&i===0&&this.options.editEdge!==!1&&(l===!0?this._createSeperator(3):l=!0,this._createEditEdgeButton(a)),o!==0&&(i>0&&this.options.deleteNode!==!1?(l===!0&&this._createSeperator(4),this._createDeleteButton(a)):i===0&&this.options.deleteEdge!==!1&&(l===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,De(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",De(n=this.showManipulatorToolbar).call(n,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,De(n=this.toggleEditMode).call(n,this))}this._temporaryBindEvent("click",De(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var n=this.selectionHandler.getSelectedNodes()[0];if(n!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(n.isCluster!==!0){var i=br({},n.options,!1);if(i.x=n.x,i.y=n.y,this.options.editNode.length===2)this.options.editNode(i,function(s){s!=null&&t.inMode==="editNode"&&t.body.data.nodes.getDataSet().update(s),t.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,n,i,s,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a,l=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(l),this._createSeperator(),this._createDescription(l.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,De(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",De(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",De(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDrag",De(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",De(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",De(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",tr(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from.id,t.to.id);return}if(this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,De(n=this.toggleEditMode).call(n,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var s,o,a,l,u=this.body.edges[this.edgeBeingEditedId],d=this._getNewTargetNode(u.from.x,u.from.y),h=this._getNewTargetNode(u.to.x,u.to.y);this.temporaryIds.nodes.push(d.id),this.temporaryIds.nodes.push(h.id),this.body.nodes[d.id]=d,this.body.nodeIndices.push(d.id),this.body.nodes[h.id]=h,this.body.nodeIndices.push(h.id),this._temporaryBindUI("onTouch",De(s=this._controlNodeTouch).call(s,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",De(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",De(a=this._controlNodeDrag).call(a,this)),this._temporaryBindUI("onDragEnd",De(l=this._controlNodeDragEnd).call(l,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(v){var g=u.edgeType.findBorderPositions(v);d.selected===!1&&(d.x=g.from.x,d.y=g.from.y),h.selected===!1&&(h.x=g.to.x,h.y=g.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var n=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),s=void 0;if(n.length>0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(s=this.options.deleteNode)}else i.length>0&&typeof this.options.deleteEdge=="function"&&(s=this.options.deleteEdge);if(typeof s=="function"){var a={nodes:n,edges:i};if(s.length===2)s(a,function(l){l!=null&&t.inMode==="delete"?(t.body.data.edges.getDataSet().remove(l.edges),t.body.data.nodes.getDataSet().remove(l.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(n),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var t,n;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(n=this.options.locales[this.options.locale])===null||n===void 0?void 0:n.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(t,n){var i=br({},this.options.controlNodeStyle);i.id="targetNode"+Ip(),i.hidden=!1,i.physics=!1,i.x=t,i.y=n;var s=this.body.functions.createNode(i);return s.shape.boundingBox={left:t,right:t,top:n,bottom:n},s}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},kl(this.editModeDiv);var n=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",n.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,De(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(kl(this.editModeDiv),kl(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,n=Yat(_a(t=this._domEventListenerCleanupQueue).call(t,0)),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),kl(this.manipulationDiv),kl(this.editModeDiv),kl(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var n,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,De(n=this.addNodeMode).call(n,this))}},{key:"_createAddEdgeButton",value:function(t){var n,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,De(n=this.addEdgeMode).call(n,this))}},{key:"_createEditNodeButton",value:function(t){var n,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,De(n=this.editNode).call(n,this))}},{key:"_createEditEdgeButton",value:function(t){var n,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,De(n=this.editEdgeMode).call(n,this))}},{key:"_createDeleteButton",value:function(t){var n,i;this.options.rtl?i="vis-delete-rtl":i="vis-delete";var s=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,De(n=this.deleteSelected).call(n,this))}},{key:"_createBackButton",value:function(t){var n,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,De(n=this.showManipulatorToolbar).call(n,this))}},{key:"_createButton",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+n,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=s,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,n){this.temporaryEventFunctions.push({event:t,boundFunction:n}),this.body.emitter.on(t,n)}},{key:"_temporaryBindUI",value:function(t,n){if(this.body.eventListeners[t]!==void 0)this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=n;else throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Tg(Rr(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var n=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(n,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,n){var i=new nd(t,{});Lb(i,n),this._domEventListenerCleanupQueue.push(function(){i.destroy()});var s=function(a){var l=a.keyCode,u=a.key;(u==="Enter"||u===" "||l===13||l===32)&&n()};t.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(function(){t.removeEventListener("keyup",s,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var n;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i=Vt(n=this.body.edgeIndices).call(n,this.temporaryIds.edges[t]);if(i!==-1){var s;_a(s=this.body.edgeIndices).call(s,i,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var a;delete this.body.nodes[this.temporaryIds.nodes[o]];var l=Vt(a=this.body.nodeIndices).call(a,this.temporaryIds.nodes[o]);if(l!==-1){var u;_a(u=this.body.nodeIndices).call(u,l,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=nn({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),l=s.isOverlappingWith(n);a===!0?(this.selectedControlNode=i,o.edgeType.from=i):l===!0&&(this.selectedControlNode=s,o.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var n=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(n);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--)if(o[l]!==this.selectedControlNode.id){a=this.body.nodes[o[l]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var u=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===u.id?this._performEditEdge(a.id,s.to.id):this._performEditEdge(s.from.id,a.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=nn({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var n=this.lastTouch,i=this.selectionHandler.getNodeAt(n);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this._getNewTargetNode(i.x,i.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);var o=this.body.functions.createEdge({id:"connectionEdge"+Ip(),from:i.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Vt(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}if(t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,n),this.temporaryIds.nodes[0]!==void 0){var d=this.body.nodes[this.temporaryIds.nodes[0]];d.x=this.canvas._XconvertDOMtoCanvas(n.x),d.y=this.canvas._YconvertDOMtoCanvas(n.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Vt(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(s,a.id)),t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,n),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var n=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,n,void 0,!0)}},{key:"_performAddNode",value:function(t){var n=this,i={id:Ip(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(i,function(s){s!=null&&n.inMode==="addNode"&&n.body.data.nodes.getDataSet().add(s),n.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,n){var i=this,s={from:t,to:n};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(s,function(o){o!=null&&i.inMode==="addEdge"&&(i.body.data.edges.getDataSet().add(o),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,n){var i=this,s={id:this.edgeBeingEditedId,from:t,to:n,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(tr(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(s,function(a){a==null||i.inMode!=="editEdge"?(i.body.edges[s.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(a),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),Fe="string",Re="boolean",pe="number",ap="array",st="object",TY="dom",Jat="any",mE=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],bE={borderWidth:{number:pe},borderWidthSelected:{number:pe,undefined:"undefined"},brokenImage:{string:Fe,undefined:"undefined"},chosen:{label:{boolean:Re,function:"function"},node:{boolean:Re,function:"function"},__type__:{object:st,boolean:Re}},color:{border:{string:Fe},background:{string:Fe},highlight:{border:{string:Fe},background:{string:Fe},__type__:{object:st,string:Fe}},hover:{border:{string:Fe},background:{string:Fe},__type__:{object:st,string:Fe}},__type__:{object:st,string:Fe}},opacity:{number:pe,undefined:"undefined"},fixed:{x:{boolean:Re},y:{boolean:Re},__type__:{object:st,boolean:Re}},font:{align:{string:Fe},color:{string:Fe},size:{number:pe},face:{string:Fe},background:{string:Fe},strokeWidth:{number:pe},strokeColor:{string:Fe},vadjust:{number:pe},multi:{boolean:Re,string:Fe},bold:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},boldital:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},ital:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},mono:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},__type__:{object:st,string:Fe}},group:{string:Fe,number:pe,undefined:"undefined"},heightConstraint:{minimum:{number:pe},valign:{string:Fe},__type__:{object:st,boolean:Re,number:pe}},hidden:{boolean:Re},icon:{face:{string:Fe},code:{string:Fe},size:{number:pe},color:{string:Fe},weight:{string:Fe,number:pe},__type__:{object:st}},id:{string:Fe,number:pe},image:{selected:{string:Fe,undefined:"undefined"},unselected:{string:Fe,undefined:"undefined"},__type__:{object:st,string:Fe}},imagePadding:{top:{number:pe},right:{number:pe},bottom:{number:pe},left:{number:pe},__type__:{object:st,number:pe}},label:{string:Fe,undefined:"undefined"},labelHighlightBold:{boolean:Re},level:{number:pe,undefined:"undefined"},margin:{top:{number:pe},right:{number:pe},bottom:{number:pe},left:{number:pe},__type__:{object:st,number:pe}},mass:{number:pe},physics:{boolean:Re},scaling:{min:{number:pe},max:{number:pe},label:{enabled:{boolean:Re},min:{number:pe},max:{number:pe},maxVisible:{number:pe},drawThreshold:{number:pe},__type__:{object:st,boolean:Re}},customScalingFunction:{function:"function"},__type__:{object:st}},shadow:{enabled:{boolean:Re},color:{string:Fe},size:{number:pe},x:{number:pe},y:{number:pe},__type__:{object:st,boolean:Re}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:Re,array:ap},borderRadius:{number:pe},interpolation:{boolean:Re},useImageSize:{boolean:Re},useBorderWithImage:{boolean:Re},coordinateOrigin:{string:["center","top-left"]},__type__:{object:st}},size:{number:pe},title:{string:Fe,dom:TY,undefined:"undefined"},value:{number:pe,undefined:"undefined"},widthConstraint:{minimum:{number:pe},maximum:{number:pe},__type__:{object:st,boolean:Re,number:pe}},x:{number:pe},y:{number:pe},__type__:{object:st}},Qat={configure:{enabled:{boolean:Re},filter:{boolean:Re,string:Fe,array:ap,function:"function"},container:{dom:TY},showButton:{boolean:Re},__type__:{object:st,boolean:Re,string:Fe,array:ap,function:"function"}},edges:{arrows:{to:{enabled:{boolean:Re},scaleFactor:{number:pe},type:{string:mE},imageHeight:{number:pe},imageWidth:{number:pe},src:{string:Fe},__type__:{object:st,boolean:Re}},middle:{enabled:{boolean:Re},scaleFactor:{number:pe},type:{string:mE},imageWidth:{number:pe},imageHeight:{number:pe},src:{string:Fe},__type__:{object:st,boolean:Re}},from:{enabled:{boolean:Re},scaleFactor:{number:pe},type:{string:mE},imageWidth:{number:pe},imageHeight:{number:pe},src:{string:Fe},__type__:{object:st,boolean:Re}},__type__:{string:["from","to","middle"],object:st}},endPointOffset:{from:{number:pe},to:{number:pe},__type__:{object:st,number:pe}},arrowStrikethrough:{boolean:Re},background:{enabled:{boolean:Re},color:{string:Fe},size:{number:pe},dashes:{boolean:Re,array:ap},__type__:{object:st,boolean:Re}},chosen:{label:{boolean:Re,function:"function"},edge:{boolean:Re,function:"function"},__type__:{object:st,boolean:Re}},color:{color:{string:Fe},highlight:{string:Fe},hover:{string:Fe},inherit:{string:["from","to","both"],boolean:Re},opacity:{number:pe},__type__:{object:st,string:Fe}},dashes:{boolean:Re,array:ap},font:{color:{string:Fe},size:{number:pe},face:{string:Fe},background:{string:Fe},strokeWidth:{number:pe},strokeColor:{string:Fe},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:pe},multi:{boolean:Re,string:Fe},bold:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},boldital:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},ital:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},mono:{color:{string:Fe},size:{number:pe},face:{string:Fe},mod:{string:Fe},vadjust:{number:pe},__type__:{object:st,string:Fe}},__type__:{object:st,string:Fe}},hidden:{boolean:Re},hoverWidth:{function:"function",number:pe},label:{string:Fe,undefined:"undefined"},labelHighlightBold:{boolean:Re},length:{number:pe,undefined:"undefined"},physics:{boolean:Re},scaling:{min:{number:pe},max:{number:pe},label:{enabled:{boolean:Re},min:{number:pe},max:{number:pe},maxVisible:{number:pe},drawThreshold:{number:pe},__type__:{object:st,boolean:Re}},customScalingFunction:{function:"function"},__type__:{object:st}},selectionWidth:{function:"function",number:pe},selfReferenceSize:{number:pe},selfReference:{size:{number:pe},angle:{number:pe},renderBehindTheNode:{boolean:Re},__type__:{object:st}},shadow:{enabled:{boolean:Re},color:{string:Fe},size:{number:pe},x:{number:pe},y:{number:pe},__type__:{object:st,boolean:Re}},smooth:{enabled:{boolean:Re},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:pe},forceDirection:{string:["horizontal","vertical","none"],boolean:Re},__type__:{object:st,boolean:Re}},title:{string:Fe,undefined:"undefined"},width:{number:pe},widthConstraint:{maximum:{number:pe},__type__:{object:st,boolean:Re,number:pe}},value:{number:pe,undefined:"undefined"},__type__:{object:st}},groups:{useDefaultGroups:{boolean:Re},__any__:bE,__type__:{object:st}},interaction:{dragNodes:{boolean:Re},dragView:{boolean:Re},hideEdgesOnDrag:{boolean:Re},hideEdgesOnZoom:{boolean:Re},hideNodesOnDrag:{boolean:Re},hover:{boolean:Re},keyboard:{enabled:{boolean:Re},speed:{x:{number:pe},y:{number:pe},zoom:{number:pe},__type__:{object:st}},bindToWindow:{boolean:Re},autoFocus:{boolean:Re},__type__:{object:st,boolean:Re}},multiselect:{boolean:Re},navigationButtons:{boolean:Re},selectable:{boolean:Re},selectConnectedEdges:{boolean:Re},hoverConnectedEdges:{boolean:Re},tooltipDelay:{number:pe},zoomView:{boolean:Re},zoomSpeed:{number:pe},__type__:{object:st}},layout:{randomSeed:{undefined:"undefined",number:pe,string:Fe},improvedLayout:{boolean:Re},clusterThreshold:{number:pe},hierarchical:{enabled:{boolean:Re},levelSeparation:{number:pe},nodeSpacing:{number:pe},treeSpacing:{number:pe},blockShifting:{boolean:Re},edgeMinimization:{boolean:Re},parentCentralization:{boolean:Re},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:st,boolean:Re}},__type__:{object:st}},manipulation:{enabled:{boolean:Re},initiallyActive:{boolean:Re},addNode:{boolean:Re,function:"function"},addEdge:{boolean:Re,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:st,boolean:Re,function:"function"}},deleteNode:{boolean:Re,function:"function"},deleteEdge:{boolean:Re,function:"function"},controlNodeStyle:bE,__type__:{object:st,boolean:Re}},nodes:bE,physics:{enabled:{boolean:Re},barnesHut:{theta:{number:pe},gravitationalConstant:{number:pe},centralGravity:{number:pe},springLength:{number:pe},springConstant:{number:pe},damping:{number:pe},avoidOverlap:{number:pe},__type__:{object:st}},forceAtlas2Based:{theta:{number:pe},gravitationalConstant:{number:pe},centralGravity:{number:pe},springLength:{number:pe},springConstant:{number:pe},damping:{number:pe},avoidOverlap:{number:pe},__type__:{object:st}},repulsion:{centralGravity:{number:pe},springLength:{number:pe},springConstant:{number:pe},nodeDistance:{number:pe},damping:{number:pe},__type__:{object:st}},hierarchicalRepulsion:{centralGravity:{number:pe},springLength:{number:pe},springConstant:{number:pe},nodeDistance:{number:pe},damping:{number:pe},avoidOverlap:{number:pe},__type__:{object:st}},maxVelocity:{number:pe},minVelocity:{number:pe},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:Re},iterations:{number:pe},updateInterval:{number:pe},onlyDynamicEdges:{boolean:Re},fit:{boolean:Re},__type__:{object:st,boolean:Re}},timestep:{number:pe},adaptiveTimestep:{boolean:Re},wind:{x:{number:pe},y:{number:pe},__type__:{object:st}},__type__:{object:st,boolean:Re}},autoResize:{boolean:Re},clickToUse:{boolean:Re},locale:{string:Fe},locales:{__any__:{any:Jat},__type__:{object:st}},height:{string:Fe},width:{string:Fe},__type__:{object:st}},IY={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},elt=function(r,t,n){var i;return!!(No(r).call(r,"physics")&&No(i=IY.physics.solver).call(i,t)&&n.physics.solver!==t&&t!=="wind")},tlt=function(){function e(){ze(this,e)}return He(e,[{key:"getDistances",value:function(t,n,i){for(var s={},o=t.edges,a=0;a<n.length;a++){var l=n[a],u={};s[l]=u;for(var d=0;d<n.length;d++)u[n[d]]=a==d?0:1e9}for(var h=0;h<i.length;h++){var v=o[i[h]];v.connected===!0&&s[v.fromId]!==void 0&&s[v.toId]!==void 0&&(s[v.fromId][v.toId]=1,s[v.toId][v.fromId]=1)}for(var g=n.length,b=0;b<g;b++)for(var m=n[b],x=s[m],E=0;E<g-1;E++)for(var k=n[E],$=s[k],S=E+1;S<g;S++){var T=n[S],O=s[T],I=Math.min($[T],$[m]+x[T]);$[T]=I,O[k]=I}return s}}]),e}(),rlt=function(){function e(r,t,n){ze(this,e),this.body=r,this.springLength=t,this.springConstant=n,this.distanceSolver=new tlt}return He(e,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.distanceSolver.getDistances(this.body,t,n);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();for(var o=.01,a=1,l=0,u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),d=5,h=1e9,v=0,g=0,b=0,m=0,x=0;h>o&&l<u;){l+=1;var E=this._getHighestEnergyNode(i),k=Dr(E,4);for(v=k[0],h=k[1],g=k[2],b=k[3],m=h,x=0;m>a&&x<d;){x+=1,this._moveNode(v,g,b);var $=this._getEnergy(v),S=Dr($,3);m=S[0],g=S[1],b=S[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=0,o=n[0],a=0,l=0,u=0;u<n.length;u++){var d=n[u];if(i[d].predefinedPosition!==!0||i[d].isCluster===!0&&t===!0||i[d].options.fixed.x!==!0||i[d].options.fixed.y!==!0){var h=this._getEnergy(d),v=Dr(h,3),g=v[0],b=v[1],m=v[2];s<g&&(s=g,o=d,a=b,l=m)}}return[o,s,a,l]}},{key:"_getEnergy",value:function(t){var n=Dr(this.E_sums[t],2),i=n[0],s=n[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));return[o,i,s]}},{key:"_moveNode",value:function(t,n,i){for(var s=this.body.nodeIndices,o=this.body.nodes,a=0,l=0,u=0,d=o[t].x,h=o[t].y,v=this.K_matrix[t],g=this.L_matrix[t],b=0;b<s.length;b++){var m=s[b];if(m!==t){var x=o[m].x,E=o[m].y,k=v[m],$=g[m],S=1/Math.pow(Math.pow(d-x,2)+Math.pow(h-E,2),1.5);a+=k*(1-$*Math.pow(h-E,2)*S),l+=k*($*(d-x)*(h-E)*S),u+=k*(1-$*Math.pow(d-x,2)*S)}}var T=a,O=l,I=n,P=u,R=i,D=(I/T+R/O)/(O/T-P/O),F=-(O*D+I)/T;o[t].x+=F,o[t].y+=D,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var s=0;s<n.length;s++){this.L_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.L_matrix[n[s]][n[o]]=i*t[n[s]][n[o]]}}},{key:"_createK_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var s=0;s<n.length;s++){this.K_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.K_matrix[n[s]][n[o]]=i*Math.pow(t[n[s]][n[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var s=0;s<t.length;s++){for(var o=t[s],a=n[o].x,l=n[o].y,u=0,d=0,h=s;h<t.length;h++){var v=t[h];if(v!==o){var g=n[v].x,b=n[v].y,m=1/Math.sqrt(Math.pow(a-g,2)+Math.pow(l-b,2));this.E_matrix[o][h]=[this.K_matrix[o][v]*(a-g-this.L_matrix[o][v]*(a-g)*m),this.K_matrix[o][v]*(l-b-this.L_matrix[o][v]*(l-b)*m)],this.E_matrix[v][s]=this.E_matrix[o][h],u+=this.E_matrix[o][h][0],d+=this.E_matrix[o][h][1]}}this.E_sums[o]=[u,d]}}},{key:"_updateE_matrix",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=this.E_matrix[t],o=this.K_matrix[t],a=this.L_matrix[t],l=i[t].x,u=i[t].y,d=0,h=0,v=0;v<n.length;v++){var g=n[v];if(g!==t){var b=s[v],m=b[0],x=b[1],E=i[g].x,k=i[g].y,$=1/Math.sqrt(Math.pow(l-E,2)+Math.pow(u-k,2)),S=o[g]*(l-E-a[g]*(l-E)*$),T=o[g]*(u-k-a[g]*(u-k)*$);s[v]=[S,T],d+=S,h+=T;var O=this.E_sums[g];O[0]+=S-m,O[1]+=T-x}}this.E_sums[t]=[d,h]}}]),e}();function tt(e,r,t){var n,i,s,o,a=this;if(!(this instanceof tt))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:SQe,clickToUse:!1},nn(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:De(n=this.on).call(n,this),off:De(i=this.off).call(i,this),emit:De(s=this.emit).call(s,this),once:De(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new IQe(function(){return a.body.emitter.emit("_requestRedraw")}),this.groups=new qet,this.canvas=new Bst(this.body),this.selectionHandler=new kot(this.body,this.canvas),this.interactionHandler=new Hst(this.body,this.canvas,this.selectionHandler),this.view=new Lst(this.body,this.canvas),this.renderer=new Cst(this.body,this.canvas),this.physics=new _st(this.body),this.layoutEngine=new Gat(this.body),this.clustering=new Ost(this.body),this.manipulation=new Xat(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new rit(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new hst(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new rlt(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(r)}PV(tt.prototype);tt.prototype.setOptions=function(e){var r=this;if(e===null&&(e=void 0),e!==void 0){var t=rQe.validate(e,Qat);t===!0&&console.error("%cErrors have been found in the supplied options object.",MG);var n=["locale","locales","clickToUse"];if(ff(n,this.options,e),e.locale!==void 0&&(e.locale=kQe(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),e.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new eQe(this,this.body.container,IY,this.canvas.pixelRatio,elt)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};br(i.nodes,this.nodesHandler.options),br(i.edges,this.edgesHandler.options),br(i.layout,this.layoutEngine.options),br(i.interaction,this.selectionHandler.options),br(i.interaction,this.renderer.options),br(i.interaction,this.interactionHandler.options),br(i.manipulation,this.manipulation.options),br(i.physics,this.physics.options),br(i.global,this.canvas.options),br(i.global,this.options),this.configurator.setModuleOptions(i)}e.clickToUse!==void 0?e.clickToUse===!0?this.activator===void 0&&(this.activator=new QJe(this.canvas.frame),this.activator.on("change",function(){r.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};tt.prototype._updateVisibleIndices=function(){var e=this.body.nodes,r=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&!this.clustering._isClusteredNode(t)&&e[t].options.hidden===!1&&this.body.nodeIndices.push(e[t].id);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n],s=e[i.fromId],o=e[i.toId],a=s!==void 0&&o!==void 0,l=!this.clustering._isClusteredEdge(n)&&i.options.hidden===!1&&a&&s.options.hidden===!1&&o.options.hidden===!1;l&&this.body.edgeIndices.push(i.id)}};tt.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})};tt.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var r=dQe(e.dot);this.setData(r);return}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var t=fQe(e.gephi);this.setData(t);return}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};tt.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];kl(this.body.container)};tt.prototype._updateValueRange=function(e){var r,t=void 0,n=void 0,i=0;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r].getValue();s!==void 0&&(t=t===void 0?s:Math.min(s,t),n=n===void 0?s:Math.max(s,n),i+=s)}if(t!==void 0&&n!==void 0)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].setValueRange(t,n,i)};tt.prototype.isActive=function(){return!this.activator||this.activator.active};tt.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};tt.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};tt.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};tt.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};tt.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};tt.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};tt.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};tt.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};tt.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};tt.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};tt.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};tt.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};tt.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};tt.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};tt.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};tt.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};tt.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};tt.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};tt.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};tt.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};tt.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};tt.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};tt.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};tt.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};tt.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};tt.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};tt.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};tt.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};tt.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};tt.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};tt.prototype.getConnectedNodes=function(e){return this.body.nodes[e]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};tt.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};tt.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};tt.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};tt.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};tt.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};tt.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};tt.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};tt.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};tt.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};tt.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};tt.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};tt.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};tt.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};tt.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};tt.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};tt.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};tt.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};tt.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};tt.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};tt.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};tt.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};function GA(){const e=Vr(!1);return Ge(()=>(e.current=!0,()=>{e.current=!1}),[]),Hn(()=>e.current,[])}const nlt={layout:{improvedLayout:!0},physics:{solver:"barnesHut",barnesHut:{springLength:200}},autoResize:!1,nodes:{borderWidth:1,shape:"circularImage",color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"},shadow:!0},edges:{smooth:!1,color:"lightgray",width:1,shadow:!0,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function Hh(e,r,t,n){e.length!=0&&e.forEach(function(i){var a,l;let s=r.get(i.id);if(!t){s||r.add(i);return}if(n!=null&&n.has(i.id)){s||r.add(i);return}let o=ir.getDefaultProfile(i.id);if((a=o==null?void 0:o.name)!=null&&a.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}if((l=o==null?void 0:o.display_name)!=null&&l.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}s&&r.remove(i.id)})}const ilt=({props:e})=>{const r=Vr(null),t=Vr(),n=GA(),[i,s]=ve(null),[o]=ve(new Zs),[a]=ve(new Zs),[l]=ve(new Zs),[u]=ve([]),[d,h]=ve(e.dir||"in"),[v,g]=ve(e.entitytype);Ge(()=>{if(r.current){var x={nodes:a,edges:l};return t.current=r.current&&new tt(r.current,x,nlt),t.current.on("click",function(E){if(E.nodes.length==0||!n())return;const k=E.nodes[0],$=mt.g.vertices[k];if(k==i)return;let S=$.entityType==1?F0(k):te.toNostrBech32Address(Pr(k),"note");e.setNpub(S),s(k),b(k).then(T=>{let O=new Set([Ke(e.hexKey),k]);T&&Hh(T,a,e.filter,O)})}),()=>{var E,k;(E=t.current)==null||E.off("click"),(k=t.current)==null||k.destroy()}}},[r]),Ge(()=>{let x=Ke(e.hexKey);return s(x),(e.dir!=d||e.entitytype!=v)&&(l.clear(),o.clear(),a.clear(),h(e.dir),g(e.entitytype)),b(x).then(E=>{if(!n())return;let k=new Set([Ke(e.hexKey)]);E&&Hh(E,a,e.filter,k)}),()=>{u.forEach(E=>E==null?void 0:E())}},[e.npub,e.dir,e.entitytype]),Ge(()=>{if(o.length==0&&a.length==0)return;let x=new Set([Ke(e.hexKey)]);Hh(o,a,e.filter,x)},[e.filter]);async function b(x){let E=mt.g.vertices[x];E||(E=new i3(x,0));let k={};if(E.entityType==1&&(k[x]=E),e.dir=="in")for(const R in E.in){const D=E.in[R];if(!D||!D.out||D.val==0)continue;k[D.out.id]=D.out;let F=Xp(D.val),K=D.out.degree>zs;l.get(D.key)||l.add({id:D.key,from:D.out.id,to:x,color:F,dashes:K})}let $=AY(e.entitytype);if(e.dir=="out")for(const R in E.out){const D=E.out[R];if(!D||D.val==0||!D.in||D.in.entityType!=$)continue;k[D.in.id]=D.in;let F=Xp(D.val);l.get(D.key)||l.add({id:D.key,from:x,to:D.in.id,color:F})}let S=Object.values(k),T=S.map(R=>Pr(R.id)),O=await ir.getProfiles(T);if(!n())return;let I=O.filter(R=>R.isDefault).map(R=>R.key);ir.fetchProfiles(I,R=>{if(!n())return;let D=mt.g.vertices[Ke(R.key)];NI(D,o)});let P=new Zs;E.entityType==2&&S.push(E);for(const R of S){let D;R.entityType==1?D=NI(R,o):D=await OY(R,o),D&&P.add(D)}return P}const m=x=>{let E=x||i;if(!E)return;a.clear(),o.clear(),l.clear(),b(E).then($=>{if(!n())return;let S=new Set([Ke(e.hexKey)]);$&&Hh($,a,e.filter,S)});const k=F0(E);k!=e.npub&&e.setNpub(k)};return e.npub?p(Be,{children:[p("div",{className:"flex flex-wrap gap-4",children:[p(je,{when:v=="key",children:p(WH,{dir:e.dir,setSearch:e.setSearch})}),p("div",{className:"flex gap-4",children:" "}),p("div",{className:"flex gap-4",children:p("button",{className:"btn btn-primary btn-sm",onClick:()=>{var x;return m((x=t.current)==null?void 0:x.getSelectedNodes()[0])},children:ne("Focus")})}),p("div",{className:"flex gap-4",children:p(wt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"path"}),children:ne("Path")})})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"h-full w-full flex items-stretch justify-center",children:p("div",{className:"flex-grow",ref:r})})]}):null};class slt{constructor(){}async getEventById(r){const t=Mt.get(r);if(t)return t;let n=await fetch(`https://api.iris.to/event/${r}`);if(n.status===200){let i=await n.json();return i&&nt.handle(i,!0),i}}}const olt=new slt,alt={layout:{randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!0,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"roots"}},physics:{stabilization:!1},autoResize:!1,nodes:{borderWidth:1,shape:"circularImage",color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"}},edges:{smooth:!1,color:"lightgray",width:1,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function NI(e,r){let t=ir.getDefaultProfile(e.id),n=ir.ensurePicture(t),i=r.get(e.id);if(i){i.label!=t.name&&(i.label=t.name),i.image!=n&&(i.image=n);return}return i={id:e.id,label:t.name,image:n,size:30},r.add(i),i}async function OY(e,r){let t=Pr(e.id),n=await olt.getEventById(t),i=await ir.getProfile(n==null?void 0:n.pubkey),s=((i==null?void 0:i.name)||"").trim().slice(0,25),o=n.id.slice(0,4),a=((n==null?void 0:n.content)||"").trim().slice(0,25)+((n==null?void 0:n.content.length)>25?"...":""),l=n!=null&&n.created_at?new Date((n==null?void 0:n.created_at)*1e3).toDateString():"",u=`Note ${o}
${s}
${l}
${a}
`,d=r.get(e.id);if(d){d.label!=u&&(d.label=u);return}return d={id:e.id,label:u,shape:"box",font:{align:"left"}},r.add(d),d}const llt=({props:e})=>{const r=Vr(null),t=Vr(),[n]=ve(new Zs),[i]=ve(new Zs),s=GA(),[o,a]=ve(null),[l]=ve(new Zs),[u]=ve([]);Ge(()=>{if(r.current){var b={nodes:i,edges:l};return t.current=r.current&&new tt(r.current,b,alt),t.current.on("click",function(m){if(m.nodes.length==0)return;const x=m.nodes[0];let k=mt.g.vertices[x].entityType==1?F0(x):te.toNostrBech32Address(Pr(x),"note");e.setNpub(k)}),()=>{var m,x;(m=t.current)==null||m.off("click"),(x=t.current)==null||x.destroy()}}},[]),Ge(()=>{let b=Ke(e.hexKey),m=mt.g.vertices[b];m||(m=new i3(b,0)),d(m);let x=m==null?void 0:m.score;return a(E=>({...E,vId:b,score:x})),()=>{u.forEach(E=>E==null?void 0:E())}},[e.npub]);async function d(b){var $;let m=mt.g.getPaths(b.id),x=Object.create(null);for(let S of m)S!=null&&S.in&&(x[S.in.id]=S.in),S!=null&&S.out&&(x[S.out.id]=S.out);b.entityType!=1&&delete x[b.id];let E=Object.values(x),k=E.map(S=>Pr(S.id));await ir.getProfiles(k),s()&&(b.entityType!=1&&E.push(b),await h(E,m),($=t.current)==null||$.redraw())}async function h(b,m){var E,k;for(let $ of b)$.entityType==1?NI($,n):await OY($,n);for(let $ of m){let S=Xp($.val);l.get($.key)||l.add({id:$.key,from:(E=$.out)==null?void 0:E.id,to:(k=$.in)==null?void 0:k.id,color:S})}let x=new Set([Ke(e.hexKey)]);Hh(n,i,e.filter,x)}Ge(()=>{var m;if(n.length==0&&i.length==0)return;let b=new Set([Ke(e.hexKey),Ke(te.getPubKey())]);Hh(n,i,e.filter,b),(m=t.current)==null||m.redraw()},[e.filter]);const v=b=>{let m=b==null?void 0:b.values();return m?m.join("/"):null},g=b=>{if(!b||!(b==null?void 0:b.resolve()))return null;let{val:x,degree:E,count:k,hasScore:$}=b.resolve(),S=Math.round((x+k)*100/(k*2));return p(Be,{children:$?p(Be,{children:[p("span",{children:["Trust score is ",x]}),p("span",{children:[" from ",k==1?`${k} claim`:`a total of ${k} claims`]}),p("span",{children:[" at degree ",E]}),p("span",{children:[" resulting in ",S,"% trust"]})]}):p("span",{children:"No Score"})})};return e.npub?p(Be,{children:[!(o!=null&&o.score)&&p("div",{className:"text-center",children:ne("No results")}),(o==null?void 0:o.score)&&p(Be,{children:[p("div",{className:"flex flex-col gap-4",children:[p("div",{children:["Aggregated result of score is ",v(o==null?void 0:o.score)]}),p("div",{children:g(o==null?void 0:o.score)})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-wrap gap-4",children:p(wt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"graph"}),children:ne("Focus")})})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"h-full w-full flex items-stretch justify-center",children:p("div",{className:"flex-grow",ref:r})})]}):null},ult=e=>{const r=Av(Ke(e.str),["badName","neutralName","goodName"],"");return p(Be,{children:p("span",{className:r==null?void 0:r.option,children:`${ne("note")} ${e.str.slice(0,4)}`})})};function clt(e,r){let t=e==null?void 0:e.toLocaleLowerCase();return t=="trust"?1:t=="distrust"?-1:r}function AY(e,r=1){let t=e==null?void 0:e.toLocaleLowerCase();return t=="key"?1:t=="item"?2:r}function wE(e){return e!=null&&e.toLocaleLowerCase().startsWith("note")?"item":"key"}const hlt=e=>{const[r,t]=ve({ready:!1}),[n,i]=ve(wE(e.npub)),[s,o]=ve(e.npub||te.toNostrBech32Address(te.getPubKey(),"npub")),[a,l]=ve(e.trusttype||"trust"),[u,d]=ve(e.dir||"out"),[h,v]=ve(e.view||"graph"),[g,b]=ve(e.filter||""),[m,x]=ve(null),[E]=ve([]),k=te.toNostrHexAddress(s),$=k==te.getPubKey(),S=wd.debounce(P=>b(P),500,{trailing:!0});Ge(()=>(mt.whenReady(()=>{x(mt.g.vertices[Ke(s)]),t(P=>({...P,ready:!0}))}),()=>{E.forEach(P=>P==null?void 0:P())}),[]);const T=Hn(P=>{x(mt.g.vertices[Ke(P)]),o(P),i(wE(P))},[]);Ge(()=>{if(e.npub!=s){let P=e.npub||te.toNostrBech32Address(te.getPubKey(),"npub");i(wE(P)),T(P)}e.trusttype!=a&&l(e.trusttype||"trust"),e.dir!=u&&d(e.dir||"out"),e.view!=h&&v(e.view||"graph"),e.filter!=g&&b(e.filter||"")},[e.npub,e.trusttype,e.dir,e.view,e.filter]);function O(P){const R={npub:s,trusttype:a,dir:u,view:h,filter:g,...P};return`/graph/${R.npub}/${R.dir}/${R.trusttype}/${R.view}${R.filter?"/"+R.filter:""}`}const I=()=>{let P={npub:s,hexKey:k,entitytype:n,trusttype:a,dir:u,view:h,filter:g,setNpub:T,setSearch:O};return h=="path"?p(llt,{props:P}):h=="list"?p(X0e,{props:P}):p(ilt,{props:P})};return r.ready?p(Be,{children:[p(Ba,{}),p("div",{className:"flex justify-between mb-4",children:p("span",{className:"text-2xl font-bold",children:[p("a",{className:"link",href:`/${s}`,children:[n=="key"&&p(Ft,{pub:s}),n=="item"&&p(ult,{str:k})]}),p("span",{style:{flex:1},className:"ml-1",children:h})]})}),VH(m==null?void 0:m.score,s,!0),p("div",{className:"text-sm flex flex-2 gap-2",children:["In the context of ",p(Ft,{pub:te.getPubKey()})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-wrap gap-8",children:[p(V0e,{view:h,setSearch:O,me:$}),p("form",{children:p("label",{children:p("input",{type:"text",placeholder:ne("Filter"),tabIndex:1,onInput:P=>{var R;return S((R=P==null?void 0:P.target)==null?void 0:R.value)},className:"input-bordered border-neutral-500 input input-sm w-full"})})})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),I()]}):null},dlt=e=>{switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"Yes":"No";case"object":return e instanceof Date?e.toLocaleDateString():e===null?"null":Array.isArray(e)?"Array["+e.length+"]":"Object";case"undefined":return"undefined";case"function":return"function";case"symbol":return e.toString();case"bigint":return e.toString()+"n";default:return"Unknown type"}},_E=({data:e,title:r})=>p("div",{className:"flex flex-col border-2 rounded-lg border-white p-4",children:[p("div",{className:"px-4 py-2 text-left text-lg font-semibold",children:r}),e==null?void 0:e.map(t=>p("div",{className:"flex justify-between p-2",children:[p("span",{className:"whitespace-nowrap",children:t.name})," ",p("span",{className:"flex-grow text-right",children:dlt(t.value)})]}))]}),flt="zoo zoo zoo zoo zoo zoo zoo zoo zoo zoo zoo wrong";function plt(e,r){return _F.fromMasterSeed(yF(e,r))}function vlt(e,r){return e.derive(`m/44'/1237'/0'/0/${r}`)}function glt(e){return plt(flt,e)}async function qm(e){return new Promise(r=>setTimeout(r,e))}const ylt=["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9","npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a","npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh"],mlt="npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m",blt="npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",xl="npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m",wlt="npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk",_lt="npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p",$lt="npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8",xlt="npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6",Elt="npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",Slt=[{from:xl,to:mlt,val:1},{from:xl,to:blt,val:1},{from:xl,to:wlt,val:1},{from:xl,to:_lt,val:1},{from:xl,to:$lt,val:1},{from:xl,to:xlt,val:1},{from:xl,to:Elt,val:1}];async function lp(e){let{from:r,to:t}=e;return await mt.setTrust({...e,from:r,to:t},!0)}function up(e,r,t){return{from:e,to:r,val:t,entityType:1,context:"nostr",note:"",timestamp:Yve()}}function klt(e){Object.values(e).forEach(r=>{lp(up(r.from,r.to,r.val))})}const Tlt=e=>{const[r,t]=ve(null),[n]=ve([]),i=te.toNostrHexAddress(e.id)||te.getPubKey(),s=te.toNostrBech32Address(i,"npub");Ge(()=>(mt.whenReady(()=>{o()}),()=>{n.forEach($=>$==null?void 0:$())}),[i]);async function o(){let $=await ir.getProfiles(ylt),S={};$.forEach(I=>{S[Ke(I.key)]=I});let T=Object.values(mt.g.edges).length,O=Object.values(mt.g.vertices).length;t(I=>({...I,profiles:$,profileIndex:S,edgesCount:T,nodesCount:O,message:"Ready"}))}function a($=""){let S=Object.values(mt.g.edges).length,T=Object.values(mt.g.vertices).length,O=Object.values(Ue.profiles);t(I=>({...I,profiles:O,edgesCount:S,nodesCount:T,message:$}))}const l=$=>{$.preventDefault(),Ue.profiles=new Map,a()},u=$=>{$.preventDefault(),mt.g.vertices={},mt.g.edges={},a()},d=$=>{Wve()},h=$=>{$.preventDefault(),d(),u($),l($)},v=$=>{$.preventDefault(),lp(up(i,xl,1)),klt(Slt),a()};function g($,S){let T=vlt($,S);if(!T.privateKey||!T.publicKey)throw new Error("could not derive private key");let O=ur(T.publicKey),I=Ke(O),P=ir.getDefaultProfile(I);return P!=null&&P.isDefault&&(P.name=`Demo User ${S}`,P.isDefault=!1,ir.addProfileToMemory(P),ir.saveProfile(P),console.log("created profile",S,O)),O}const b=$=>{$.preventDefault();let S=glt("123");async function T(){let O=0;for(let I=0;I<10;I++){let P=g(S,O++);await lp(up(i,P,1));for(let D=0;D<100;D++){let F=g(S,O++);await lp(up(P,F,1));for(let q=0;q<100;q++){let W=g(S,O++);await lp(up(F,W,1))}let K=Math.round(O*100/(10*100*100));a("Large graph created "+K+"%"),await qm(1)}let R=Math.round(O*100/(10*100*100));a("Large graph created "+R+"%"),await qm(1)}await o(),a("Processing graph!"),await qm(1),mt.processGraph=!0,mt.processScore(),a("Work done!"),await qm(1)}T(),a("Creating large graph...")},m=$=>{$.preventDefault()},x=()=>{if(!(r!=null&&r.profiles))return;let $=r.profiles.map(S=>({name:S.name,value:te.toNostrBech32Address(S.key,"npub")}));return p(_E,{data:$,title:"Profiles"})},E=()=>{if(!(r!=null&&r.edges))return;let $=r.edges.map(S=>{var T,O;return{name:S.key,value:`${(T=S.out)==null?void 0:T.id} -- ${S.val} --> ${(O=S.in)==null?void 0:O.id}`}});return p(_E,{data:$,title:"Edges"})},k=()=>{let $=[{name:"Profiles",value:r==null?void 0:r.profiles.length},{name:"Vertices",value:r==null?void 0:r.nodesCount},{name:"Edges",value:r==null?void 0:r.edgesCount}];return p(_E,{data:$,title:"Overview"})};return p(Be,{children:[p(Ba,{}),p("div",{className:"flex justify-between mb-4",children:p("span",{className:"text-2xl font-bold",children:[p("a",{className:"link",href:`/${s}`,children:p(Ft,{pub:s})}),p("span",{style:{flex:1},className:"ml-1",children:"Test Data"})]})}),p("hr",{className:"-mx-2 opacity-10 my-2"}),"All trust data generated is solely for testing and will not be submitted to the relays. The profiles used are exclusively for demonstration purposes and do not reflect any real-life trust situations.",p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-wrap gap-4",children:[p("button",{className:"btn btn-sm",onClick:v,children:"Create Influencer Graph"}),p("button",{className:"btn btn-sm",onClick:b,children:"Create Large Graph 10k nodes"}),p("button",{className:"btn btn-sm",onClick:m,children:"Delete Large Graph 10k nodes"}),p("button",{className:"btn btn-sm",onClick:h,children:"Reset All"})]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-wrap gap-4",children:["Status: ",r==null?void 0:r.message]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex",children:[p("div",{className:"flex flex-1 gap-4",children:k()}),p("div",{className:"flex flex-1 gap-4",children:x()}),p("div",{className:"flex flex-1 gap-4",children:E()})]})]})},Ilt=e=>{const r=Vr(Object.create(null)),[t]=ve([]),[n,i]=ve(null),[s,o]=ve([]),a=GA();Ge(()=>(i({message:"Loading..."}),mt.whenReady(()=>{const h=wd.throttle(()=>{let g=Object.values(r.current);o(g)},1e3);let v=nb.subscribeTrust(void 0,0,g=>{if(!a())return;let b=nb.parseTrustEvent(g);r.current[b.authorPubkey]||(r.current[b.authorPubkey]={key:b.authorPubkey,npub:te.toNostrBech32Address(b.authorPubkey,"npub"),p:Object.create(null),e:Object.create(null),time:0,history:[],profile:ir.getDefaultProfile(Ke(b.authorPubkey))});let m=r.current[b.authorPubkey];for(const x of b.pTags)m.p[x]=b;for(const x of b.eTags)m.e[x]=b;m.history.push(b),h()});t.push(v),i({message:"Listening for events..."})}),()=>{t.forEach(h=>h==null?void 0:h())}),[]);function l(h){return`/${{...h}.npub}`}const u=h=>p("div",{className:"flex w-full py-2",children:[p(wt,{href:l({npub:h.npub}),className:"flex flex-1 gap-2",children:[p(Wn,{str:h.npub,width:49}),p("div",{children:p(Ft,{pub:h.npub})})]}),p("div",{className:"flex flex-1 gap-2 flex-col",children:[p("span",{className:"text-sm",children:["Keys: ",Object.values(h.p).length]}),p("span",{className:"text-sm",children:["Notes: ",Object.values(h.e).length]}),p("span",{className:"text-sm",children:["History: ",h.history.length]})]})]},h.key),d=()=>s.length==0?p("div",{className:"text-center",children:"No results"}):p(Be,{children:s.map(h=>u(h))});return p(Be,{children:[p(Ba,{}),p("div",{className:"flex justify-between mb-4",children:p("span",{className:"text-2xl font-bold",children:p("span",{style:{flex:1},className:"ml-1",children:"Kind 32010 events"})})}),p("hr",{className:"-mx-2 opacity-10 my-2"}),"List of all events created with kind:32010 (Trust1)",p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-wrap gap-4",children:["Status: ",n==null?void 0:n.message]}),p("hr",{className:"-mx-2 opacity-10 my-2"}),p("div",{className:"flex flex-col w-full gap-4",children:p(KH,{children:d()})})]})};_d.init({autologin:!1,autofollow:!1});class Olt extends yn{componentDidMount(){window.onload=()=>{be.get("loggedIn").on(this.inject())},be.get("unseenMsgsTotal").on(this.inject()),DF.then(()=>this.setState({translationLoaded:!0})),be.get("showLoginModal").on(this.inject())}handleRoute(r){const t=r.url;this.setState({activeRoute:t}),be.get("activeRoute").put(t)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}electronCmd(r){console.log(r)}render(){let r="";const t=this.state;t.activeRoute&&t.activeRoute.length>1&&(r=sr.capitalize(t.activeRoute.replace("/","").split("?")[0]));const n=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) %s | Dpeep`:"%s | Dpeep",i=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) Dpeep`:"Dpeep";if(!t.translationLoaded)return p("div",{});if(!t.loggedIn&&window.location.pathname.length<=1)return p(u0,{fullScreen:!0});const s=o=>{var a;return(a=o.id)!=null&&a.startsWith("note")?p(v6,{id:o.id}):p(am,{id:o.id,tab:"posts",path:o.path})};return p("div",{className:"flex justify-center",children:[p("section",{className:"flex w-full max-w-screen-xl justify-between relative",children:[p(je,{when:t.loggedIn,children:p(_me,{})}),p(ud,{titleTemplate:n,defaultTitle:i,children:[p("title",{children:r}),p("meta",{name:"description",content:"Connecting People"}),p("meta",{property:"og:type",content:"website"}),p("meta",{property:"og:title",content:r}),p("meta",{property:"og:description",content:"Connecting People"}),p("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),p("meta",{name:"twitter:card",content:"summary_large_image"}),p("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),p("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),p("div",{className:"pb-16 md:pb-0 relative flex h-full flex-grow flex-col w-1/2",children:p(a9,{onChange:o=>this.handleRoute(o),children:[p(a0e,{path:"/"}),p(kH,{path:"/search",focus:!0}),p(h0e,{path:"/key"}),p(o0e,{path:"/global"}),p(u0e,{path:"/search/:keyword"}),p(u0,{path:"/login",fullScreen:!0}),p(l0e,{path:"/notifications"}),p(i6,{path:"/chat/hashtag/:hashtag?"}),p(i6,{path:"/chat/:id?"}),p(v6,{path:"/post/:id+"}),p(Rme,{path:"/about"}),p(U0e,{path:"/settings/:page?"}),p(w0e,{path:"/logout"}),p(Xme,{path:"/profile/edit"}),p(K0e,{path:"/subscribe"}),p(am,{path:"/profile/:id",tab:"posts"}),p(am,{path:"/:id/replies",tab:"replies"}),p(am,{path:"/:id/likes",tab:"likes"}),p(o6,{path:"/follows/:id"}),p(o6,{followers:!0,path:"/followers/:id"}),p(hlt,{path:"/graph/:npub?/:dir?/:trusttype?/:view?/:filter?"}),p(Ilt,{path:"/32010/"}),p(Tlt,{path:"/demo/:id?"}),p(s,{path:"/:id"})]})}),t.loggedIn?p(W0e,{}):null,p(Yge,{})]}),p(je,{when:t.showLoginModal,children:p(zo,{centerVertically:!0,showContainer:!0,onClose:()=>be.get("showLoginModal").put(!1),children:p(u0,{})})})]})}}sr.showConsoleWarning();ad(p(Olt,{}),document.getElementById("app"));
