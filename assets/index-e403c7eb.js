var Yoe=Object.defineProperty;var Zoe=(e,r,t)=>r in e?Yoe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var le=(e,r,t)=>(Zoe(e,typeof r!="symbol"?r+"":r,t),t),tE=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var Bn=(e,r,t)=>(tE(e,r,"read from private field"),t?t.call(e):r.get(e)),Vr=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},So=(e,r,t,n)=>(tE(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var Qn=(e,r,t)=>(tE(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var hm,at,mz,If,ED,bz,TT,wz,ap={},$z=[],Xoe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,a_=Array.isArray;function Gl(e,r){for(var t in r)e[t]=r[t];return e}function _z(e){var r=e.parentNode;r&&r.removeChild(e)}function Ye(e,r,t){var n,i,s,o={};for(s in r)s=="key"?n=r[s]:s=="ref"?i=r[s]:o[s]=r[s];if(arguments.length>2&&(o.children=arguments.length>3?hm.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return Qg(e,o,n,i,null)}function Qg(e,r,t,n,i){var s={type:e,props:r,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++mz};return i==null&&at.vnode!=null&&at.vnode(s),s}function l_(){return{current:null}}function tt(e){return e.children}function Fn(e,r){this.props=e,this.context=r}function Ew(e,r){if(r==null)return e.__?Ew(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?Ew(e):null}function xz(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return xz(e)}}function IT(e){(!e.__d&&(e.__d=!0)&&If.push(e)&&!Sw.__r++||ED!==at.debounceRendering)&&((ED=at.debounceRendering)||bz)(Sw)}function Sw(){var e,r,t,n,i,s,o,a,l;for(If.sort(TT);e=If.shift();)e.__d&&(r=If.length,n=void 0,i=void 0,s=void 0,a=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],i=[],(s=Gl({},o)).__v=o.__v+1,s3(l,o,s,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??Ew(o),o.__h,i),Tz(n,o,i),o.__e!=a&&xz(o)),If.length>r&&If.sort(TT));Sw.__r=0}function Ez(e,r,t,n,i,s,o,a,l,u,h){var c,d,y,w,b,T,x,A,_,I,O=0,C=n&&n.__k||$z,g=C.length,R=g,M=r.length;for(t.__k=[],c=0;c<M;c++)(w=t.__k[c]=(w=r[c])==null||typeof w=="boolean"||typeof w=="function"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?Qg(null,w,null,null,w):a_(w)?Qg(tt,{children:w},null,null,null):w.__b>0?Qg(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null&&(w.__=t,w.__b=t.__b+1,(A=Joe(w,C,x=c+O,R))===-1?y=ap:(y=C[A]||ap,C[A]=void 0,R--),s3(e,w,y,i,s,o,a,l,u,h),b=w.__e,(d=w.ref)&&y.ref!=d&&(y.ref&&o3(y.ref,null,w),h.push(d,w.__c||b,w)),b!=null&&(T==null&&(T=b),I=!(_=y===ap||y.__v===null)&&A===x,_?A==-1&&O--:A!==x&&(A===x+1?(O++,I=!0):A>x?R>M-x?(O+=A-x,I=!0):O--:O=A<x&&A==x-1?A-x:0),x=c+O,I=I||A==c&&!_,typeof w.type!="function"||A===x&&y.__k!==w.__k?typeof w.type=="function"||I?w.__d!==void 0?(l=w.__d,w.__d=void 0):l=b.nextSibling:l=kz(e,b,l):l=Sz(w,l,e),typeof t.type=="function"&&(t.__d=l)));for(t.__e=T,c=g;c--;)C[c]!=null&&(typeof t.type=="function"&&C[c].__e!=null&&C[c].__e==t.__d&&(t.__d=C[c].__e.nextSibling),Iz(C[c],C[c]))}function Sz(e,r,t){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,r=typeof n.type=="function"?Sz(n,r,t):kz(t,n.__e,r));return r}function ba(e,r){return r=r||[],e==null||typeof e=="boolean"||(a_(e)?e.some(function(t){ba(t,r)}):r.push(e)),r}function kz(e,r,t){return t==null||t.parentNode!==e?e.insertBefore(r,null):r==t&&r.parentNode!=null||e.insertBefore(r,t),r.nextSibling}function Joe(e,r,t,n){var i=e.key,s=e.type,o=t-1,a=t+1,l=r[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<r.length;){if(o>=0){if((l=r[o])&&i==l.key&&s===l.type)return o;o--}if(a<r.length){if((l=r[a])&&i==l.key&&s===l.type)return a;a++}}return-1}function Qoe(e,r,t,n,i){var s;for(s in t)s==="children"||s==="key"||s in r||kw(e,s,null,t[s],n);for(s in r)i&&typeof r[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===r[s]||kw(e,s,r[s],t[s],n)}function SD(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||Xoe.test(r)?t:t+"px"}function kw(e,r,t,n,i){var s;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(r in n)t&&r in t||SD(e.style,r,"");if(t)for(r in t)n&&t[r]===n[r]||SD(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")s=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+s]=t,t?n||e.addEventListener(r,s?TD:kD,s):e.removeEventListener(r,s?TD:kD,s);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function kD(e){return this.l[e.type+!1](at.event?at.event(e):e)}function TD(e){return this.l[e.type+!0](at.event?at.event(e):e)}function s3(e,r,t,n,i,s,o,a,l,u){var h,c,d,y,w,b,T,x,A,_,I,O,C,g,R,M=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=r.__e=t.__e,r.__h=null,s=[a]),(h=at.__b)&&h(r);try{e:if(typeof M=="function"){if(x=r.props,A=(h=M.contextType)&&n[h.__c],_=h?A?A.props.value:h.__:n,t.__c?T=(c=r.__c=t.__c).__=c.__E:("prototype"in M&&M.prototype.render?r.__c=c=new M(x,_):(r.__c=c=new Fn(x,_),c.constructor=M,c.render=tae),A&&A.sub(c),c.props=x,c.state||(c.state={}),c.context=_,c.__n=n,d=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),M.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Gl({},c.__s)),Gl(c.__s,M.getDerivedStateFromProps(x,c.__s))),y=c.props,w=c.state,c.__v=r,d)M.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(M.getDerivedStateFromProps==null&&x!==y&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(x,_),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(x,c.__s,_)===!1||r.__v===t.__v)){for(r.__v!==t.__v&&(c.props=x,c.state=c.__s,c.__d=!1),r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(L){L&&(L.__=r)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(x,c.__s,_),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(y,w,b)})}if(c.context=_,c.props=x,c.__P=e,c.__e=!1,O=at.__r,C=0,"prototype"in M&&M.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(r),h=c.render(c.props,c.state,c.context),g=0;g<c._sb.length;g++)c.__h.push(c._sb[g]);c._sb=[]}else do c.__d=!1,O&&O(r),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++C<25);c.state=c.__s,c.getChildContext!=null&&(n=Gl(Gl({},n),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(b=c.getSnapshotBeforeUpdate(y,w)),Ez(e,a_(R=h!=null&&h.type===tt&&h.key==null?h.props.children:h)?R:[R],r,t,n,i,s,o,a,l,u),c.base=r.__e,r.__h=null,c.__h.length&&o.push(c),T&&(c.__E=c.__=null)}else s==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=eae(t.__e,r,t,n,i,s,o,l,u);(h=at.diffed)&&h(r)}catch(L){r.__v=null,(l||s!=null)&&(r.__e=a,r.__h=!!l,s[s.indexOf(a)]=null),at.__e(L,r,t)}}function Tz(e,r,t){for(var n=0;n<t.length;n++)o3(t[n],t[++n],t[++n]);at.__c&&at.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){at.__e(s,i.__v)}})}function eae(e,r,t,n,i,s,o,a,l){var u,h,c,d=t.props,y=r.props,w=r.type,b=0;if(w==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!w&&(w?u.localName===w:u.nodeType===3)){e=u,s[b]=null;break}}if(e==null){if(w===null)return document.createTextNode(y);e=i?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,y.is&&y),s=null,a=!1}if(w===null)d===y||a&&e.data===y||(e.data=y);else{if(s=s&&hm.call(e.childNodes),h=(d=t.props||ap).dangerouslySetInnerHTML,c=y.dangerouslySetInnerHTML,!a){if(s!=null)for(d={},b=0;b<e.attributes.length;b++)d[e.attributes[b].name]=e.attributes[b].value;(c||h)&&(c&&(h&&c.__html==h.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(Qoe(e,y,d,i,a),c)r.__k=[];else if(Ez(e,a_(b=r.props.children)?b:[b],r,t,n,i&&w!=="foreignObject",s,o,s?s[0]:t.__k&&Ew(t,0),a,l),s!=null)for(b=s.length;b--;)s[b]!=null&&_z(s[b]);a||("value"in y&&(b=y.value)!==void 0&&(b!==e.value||w==="progress"&&!b||w==="option"&&b!==d.value)&&kw(e,"value",b,d.value,!1),"checked"in y&&(b=y.checked)!==void 0&&b!==e.checked&&kw(e,"checked",b,d.checked,!1))}return e}function o3(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(n){at.__e(n,t)}}function Iz(e,r,t){var n,i;if(at.unmount&&at.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||o3(n,null,r)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){at.__e(s,r)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Iz(n[i],r,t||typeof e.type!="function");t||e.__e==null||_z(e.__e),e.__=e.__e=e.__d=void 0}function tae(e,r,t){return this.constructor(e,t)}function Sp(e,r,t){var n,i,s,o;at.__&&at.__(e,r),i=(n=typeof t=="function")?null:t&&t.__k||r.__k,s=[],o=[],s3(r,e=(!n&&t||r).__k=Ye(tt,null,[e]),i||ap,ap,r.ownerSVGElement!==void 0,!n&&t?[t]:i?null:r.firstChild?hm.call(r.childNodes):null,s,!n&&t?t:i?i.__e:r.firstChild,n,o),Tz(s,e,o)}function Az(e,r){Sp(e,r,Az)}function Oz(e,r,t){var n,i,s,o,a=Gl({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),r)s=="key"?n=r[s]:s=="ref"?i=r[s]:a[s]=r[s]===void 0&&o!==void 0?o[s]:r[s];return arguments.length>2&&(a.children=arguments.length>3?hm.call(arguments,2):t),Qg(e.type,a,n||e.key,i||e.ref,null)}function a3(e,r){var t={__c:r="__cC"+wz++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[r]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,IT(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}hm=$z.slice,at={__e:function(e,r,t,n){for(var i,s,o;r=r.__;)if((i=r.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},mz=0,Fn.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Gl({},this.state),typeof e=="function"&&(e=e(Gl({},t),this.props)),e&&Gl(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),IT(this))},Fn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),IT(this))},Fn.prototype.render=tt,If=[],bz=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,TT=function(e,r){return e.__v.__b-r.__v.__b},Sw.__r=0,wz=0;typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.16.0",at,{Fragment:tt,Component:Fn});function ID(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function rae(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(i,s){if(i){if(typeof i=="string")return ID(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ID(i,s):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AD={};function jl(e){return e.type===tt?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var ey=[],$d=[];function Cz(){return ey.length>0?ey[ey.length-1]:null}var OD=!1;function rE(e){return typeof e.type=="function"&&e.type!=tt}function ts(e){for(var r=[e],t=e;t.__o!=null;)r.push(t.__o),t=t.__o;return r.reduce(function(n,i){n+="  in "+jl(i);var s=i.__source;return s?n+=" (at "+s.fileName+":"+s.lineNumber+")":OD||(OD=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var nae=typeof WeakMap=="function";function Pz(e){return e?typeof e.type=="function"?e.__===null?e.__e!==null&&e.__e.parentNode!==null?e.__e.parentNode.localName:"":Pz(e.__):e.type:""}var iae=Fn.prototype.setState;Fn.prototype.setState=function(e,r){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+ts(Cz())),iae.call(this,e,r)};var sae=Fn.prototype.forceUpdate;function Bl(e){var r=e.props,t=jl(e),n="";for(var i in r)if(r.hasOwnProperty(i)&&i!=="children"){var s=r[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),n+=" "+i+"="+JSON.stringify(s)}var o=r.children;return"<"+t+n+(o&&o.length?">..</"+t+">":" />")}Fn.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+ts(Cz())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+ts(this.__v)),sae.call(this,e)},function(){(function(){var b=at.__b,T=at.diffed,x=at.__,A=at.vnode,_=at.__r;at.diffed=function(I){rE(I)&&$d.pop(),ey.pop(),T&&T(I)},at.__b=function(I){rE(I)&&ey.push(I),b&&b(I)},at.__=function(I,O){$d=[],x&&x(I,O)},at.vnode=function(I){I.__o=$d.length>0?$d[$d.length-1]:null,A&&A(I)},at.__r=function(I){rE(I)&&$d.push(I),_&&_(I)}})();var e=!1,r=at.__b,t=at.diffed,n=at.vnode,i=at.__r,s=at.__e,o=at.__,a=at.__h,l=at.__c,u=nae?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,h=[],c=[];at.__e=function(b,T,x,A){if(T&&T.__c&&typeof b.then=="function"){var _=b;b=new Error("Missing Suspense. The throwing component was: "+jl(T));for(var I=T;I;I=I.__)if(I.__c&&I.__c.__c){b=_;break}if(b instanceof Error)throw b}try{(A=A||{}).componentStack=ts(T),s(b,T,x,A),typeof b.then!="function"&&setTimeout(function(){throw b})}catch(O){throw O}},at.__=function(b,T){if(!T)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var x;switch(T.nodeType){case 1:case 11:case 9:x=!0;break;default:x=!1}if(!x){var A=jl(b);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+T+" instead: render(<"+A+" />, "+T+");")}o&&o(b,T)},at.__b=function(b){var T=b.type;if(typeof T!="string"||T!=="thead"&&T!=="tfoot"&&T!=="tbody"&&T!=="tr"&&T!=="td"&&T!=="th"||c.push(b),e=!0,T===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+Bl(b)+`

`+ts(b));if(T!=null&&typeof T=="object")throw T.__k!==void 0&&T.__e!==void 0?new Error("Invalid type passed to createElement(): "+T+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+jl(b)+" = "+Bl(T)+`;
  let vnode = <My`+jl(b)+` />;

This usually happens when you export a JSX literal and not the component.

`+ts(b)):new Error("Invalid type passed to createElement(): "+(Array.isArray(T)?"array":T));if(b.ref!==void 0&&typeof b.ref!="function"&&typeof b.ref!="object"&&!("$$typeof"in b))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof b.ref+`] instead
`+Bl(b)+`

`+ts(b));if(typeof b.type=="string"){for(var x in b.props)if(x[0]==="o"&&x[1]==="n"&&typeof b.props[x]!="function"&&b.props[x]!=null)throw new Error(`Component's "`+x+'" property should be a function, but got ['+typeof b.props[x]+`] instead
`+Bl(b)+`

`+ts(b))}if(typeof b.type=="function"&&b.type.propTypes){if(b.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(b.type)){var A="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var _=b.type();u.lazyPropTypes.set(b.type,!0),console.warn(A+"Component wrapped in lazy() is "+jl(_))}catch{console.warn(A+"We will log the wrapped component's name once it is loaded.")}}var I=b.props;b.type.__f&&delete(I=function(O,C){for(var g in C)O[g]=C[g];return O}({},I)).ref,function(O,C,g,R,M){Object.keys(O).forEach(function(L){var W;try{W=O[L](C,L,R,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(X){W=X}W&&!(W.message in AD)&&(AD[W.message]=!0,console.error("Failed prop type: "+W.message+(M&&`
`+M()||"")))})}(b.type.propTypes,I,0,jl(b),function(){return ts(b)})}r&&r(b)},at.__r=function(b){i&&i(b),e=!0},at.__h=function(b,T,x){if(!b||!e)throw new Error("Hook can only be invoked from render methods.");a&&a(b,T,x)};var d=function(b,T){return{get:function(){var x="get"+b+T;h&&h.indexOf(x)<0&&(h.push(x),console.warn("getting vnode."+b+" is deprecated, "+T))},set:function(){var x="set"+b+T;h&&h.indexOf(x)<0&&(h.push(x),console.warn("setting vnode."+b+" is not allowed, "+T))}}},y={nodeName:d("nodeName","use vnode.type"),attributes:d("attributes","use vnode.props"),children:d("children","use vnode.props.children")},w=Object.create({},y);at.vnode=function(b){var T=b.props;if(b.type!==null&&T!=null&&("__source"in T||"__self"in T)){var x=b.props={};for(var A in T){var _=T[A];A==="__source"?b.__source=_:A==="__self"?b.__self=_:x[A]=_}}b.__proto__=w,n&&n(b)},at.diffed=function(b){if(b.__k&&b.__k.forEach(function(W){if(typeof W=="object"&&W&&W.type===void 0){var X=Object.keys(W).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+X+`}.

`+ts(b))}}),e=!1,t&&t(b),b.__k!=null)for(var T=[],x=0;x<b.__k.length;x++){var A=b.__k[x];if(A&&A.key!=null){var _=A.key;if(T.indexOf(_)!==-1){console.error('Following component has two or more children with the same key attribute: "'+_+`". This may cause glitches and misbehavior in rendering process. Component: 

`+Bl(b)+`

`+ts(b));break}T.push(_)}}if(b.__c!=null&&b.__c.__H!=null){var I=b.__c.__H.__;if(I)for(var O=0;O<I.length;O+=1){var C=I[O];if(C.__H){for(var g,R=rae(C.__H);!(g=R()).done;)if((L=g.value)!=L){var M=jl(b);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+O+" in component "+M+" was called with NaN.")}}}}var L},at.__c=function(b,T){for(var x=0;x<c.length;x++){var A=c[x],_=A.type,I=Pz(A.__);_!=="thead"&&_!=="tfoot"&&_!=="tbody"||I==="table"?_==="tr"&&I!=="thead"&&I!=="tfoot"&&I!=="tbody"&&I!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+Bl(A)+`

`+ts(A)):_==="td"&&I!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+Bl(A)+`

`+ts(A)):_==="th"&&I!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+Bl(A)+`

`+ts(A)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+Bl(A)+`

`+ts(A))}c=[],l&&l(b,T)}}();var Tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function no(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nv(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var Nz={exports:{}},oae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aae=oae,lae=aae;function Rz(){}function Dz(){}Dz.resetWarningCache=Rz;var uae=function(){function e(n,i,s,o,a,l){if(l!==lae){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Dz,resetWarningCache:Rz};return t.PropTypes=t,t};Nz.exports=uae();var cae=Nz.exports;const tn=no(cae);var uu,Hr,nE,CD,kp=0,Bz=[],L1=[],PD=at.__b,ND=at.__r,RD=at.diffed,DD=at.__c,BD=at.unmount;function Ph(e,r){at.__h&&at.__h(Hr,e,kp||r),kp=0;var t=Hr.__H||(Hr.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:L1}),t.__[e]}function Ne(e){return kp=1,l3(jz,e)}function l3(e,r,t){var n=Ph(uu++,2);if(n.t=e,!n.__c&&(n.__=[t?t(r):jz(void 0,r),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=Hr,!Hr.u)){var i=function(a,l,u){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(d){return d.__c});if(h.every(function(d){return!d.__N}))return!s||s.call(this,a,l,u);var c=!1;return h.forEach(function(d){if(d.__N){var y=d.__[0];d.__=d.__N,d.__N=void 0,y!==d.__[0]&&(c=!0)}}),!(!c&&n.__c.props===a)&&(!s||s.call(this,a,l,u))};Hr.u=!0;var s=Hr.shouldComponentUpdate,o=Hr.componentWillUpdate;Hr.componentWillUpdate=function(a,l,u){if(this.__e){var h=s;s=void 0,i(a,l,u),s=h}o&&o.call(this,a,l,u)},Hr.shouldComponentUpdate=i}return n.__N||n.__}function xt(e,r){var t=Ph(uu++,3);!at.__s&&c3(t.__H,r)&&(t.__=e,t.i=r,Hr.__H.__h.push(t))}function iv(e,r){var t=Ph(uu++,4);!at.__s&&c3(t.__H,r)&&(t.__=e,t.i=r,Hr.__h.push(t))}function Pi(e){return kp=5,xa(function(){return{current:e}},[])}function Mz(e,r,t){kp=6,iv(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function xa(e,r){var t=Ph(uu++,7);return c3(t.__H,r)?(t.__V=e(),t.i=r,t.__h=e,t.__V):t.__}function As(e,r){return kp=8,xa(function(){return e},r)}function u3(e){var r=Hr.context[e.__c],t=Ph(uu++,9);return t.c=e,r?(t.__==null&&(t.__=!0,r.sub(Hr)),r.props.value):e.__}function Lz(e,r){at.useDebugValue&&at.useDebugValue(r?r(e):e)}function fae(e){var r=Ph(uu++,10),t=Ne();return r.__=e,Hr.componentDidCatch||(Hr.componentDidCatch=function(n,i){r.__&&r.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function Fz(){var e=Ph(uu++,11);if(!e.__){for(var r=Hr.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var t=r.__m||(r.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function hae(){for(var e;e=Bz.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(F1),e.__H.__h.forEach(AT),e.__H.__h=[]}catch(r){e.__H.__h=[],at.__e(r,e.__v)}}at.__b=function(e){Hr=null,PD&&PD(e)},at.__r=function(e){ND&&ND(e),uu=0;var r=(Hr=e.__c).__H;r&&(nE===Hr?(r.__h=[],Hr.__h=[],r.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=L1,t.__N=t.i=void 0})):(r.__h.forEach(F1),r.__h.forEach(AT),r.__h=[],uu=0)),nE=Hr},at.diffed=function(e){RD&&RD(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(Bz.push(r)!==1&&CD===at.requestAnimationFrame||((CD=at.requestAnimationFrame)||dae)(hae)),r.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==L1&&(t.__=t.__V),t.i=void 0,t.__V=L1})),nE=Hr=null},at.__c=function(e,r){r.some(function(t){try{t.__h.forEach(F1),t.__h=t.__h.filter(function(n){return!n.__||AT(n)})}catch(n){r.some(function(i){i.__h&&(i.__h=[])}),r=[],at.__e(n,t.__v)}}),DD&&DD(e,r)},at.unmount=function(e){BD&&BD(e);var r,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{F1(n)}catch(i){r=i}}),t.__H=void 0,r&&at.__e(r,t.__v))};var MD=typeof requestAnimationFrame=="function";function dae(e){var r,t=function(){clearTimeout(n),MD&&cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100);MD&&(r=requestAnimationFrame(t))}function F1(e){var r=Hr,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),Hr=r}function AT(e){var r=Hr;e.__c=e.__(),Hr=r}function c3(e,r){return!e||e.length!==r.length||r.some(function(t,n){return t!==e[n]})}function jz(e,r){return typeof r=="function"?r(e):r}function zz(e,r){for(var t in r)e[t]=r[t];return e}function OT(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var n in r)if(n!=="__source"&&e[n]!==r[n])return!0;return!1}function iE(e,r){return e===r&&(e!==0||1/e==1/r)||e!=e&&r!=r}function $y(e){this.props=e}function yi(e,r){function t(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),r?!r(this.props,i)||!o:OT(this.props,i)}function n(i){return this.shouldComponentUpdate=t,Ye(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}($y.prototype=new Fn).isPureReactComponent=!0,$y.prototype.shouldComponentUpdate=function(e,r){return OT(this.props,e)||OT(this.state,r)};var LD=at.__b;at.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),LD&&LD(e)};var pae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ar(e){function r(t){var n=zz({},t);return delete n.ref,e(n,t.ref||null)}return r.$$typeof=pae,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var FD=function(e,r){return e==null?null:ba(ba(e).map(r))},Hz={map:FD,forEach:FD,count:function(e){return e?ba(e).length:0},only:function(e){var r=ba(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:ba},vae=at.__e;at.__e=function(e,r,t,n){if(e.then){for(var i,s=r;s=s.__;)if((i=s.__c)&&i.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),i.__c(e,r)}vae(e,r,t,n)};var jD=at.unmount;function Uz(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=zz({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Uz(n,r,t)})),e}function Wz(e,r,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Wz(n,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function ty(){this.__u=0,this.t=null,this.__b=null}function Kz(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function qz(e){var r,t,n;function i(s){if(r||(r=e()).then(function(o){t=o.default||o},function(o){n=o}),n)throw n;if(!t)throw r;return Ye(t,s)}return i.displayName="Lazy",i.__f=!0,i}function Wd(){this.u=null,this.o=null}at.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&e.__h===!0&&(e.type=null),jD&&jD(e)},(ty.prototype=new Fn).__c=function(e,r){var t=r.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=Kz(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=Wz(u,u.__c.__P,u.__c.__O)}var h;for(n.setState({__a:n.__b=null});h=n.t.pop();)h.forceUpdate()}},l=r.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},ty.prototype.componentWillUnmount=function(){this.t=[]},ty.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Uz(this.__b,t,n.__O=n.__P)}this.__b=null}var i=r.__a&&Ye(tt,null,e.fallback);return i&&(i.__h=null),[Ye(tt,null,r.__a?null:e.children),i]};var zD=function(e,r,t){if(++t[1]===t[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function gae(e){return this.getChildContext=function(){return e.context},e.children}function yae(e){var r=this,t=e.i;r.componentWillUnmount=function(){Sp(null,r.l),r.l=null,r.i=null},r.i&&r.i!==t&&r.componentWillUnmount(),e.__v?(r.l||(r.i=t,r.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),r.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),r.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),r.i.removeChild(n)}}),Sp(Ye(gae,{context:r.context},e.__v),r.l)):r.l&&r.componentWillUnmount()}function Vz(e,r){var t=Ye(yae,{__v:e,i:r});return t.containerInfo=r,t}(Wd.prototype=new Fn).__a=function(e){var r=this,t=Kz(r.__v),n=r.o.get(e);return n[0]++,function(i){var s=function(){r.props.revealOrder?(n.push(i),zD(r,e,n)):i()};t?t(s):s()}},Wd.prototype.render=function(e){this.u=null,this.o=new Map;var r=ba(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.o.set(r[t],this.u=[1,0,this.u]);return e.children},Wd.prototype.componentDidUpdate=Wd.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,t){zD(e,t,r)})};var Gz=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,mae=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,bae=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,wae=/[A-Z0-9]/g,$ae=typeof document<"u",_ae=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Yz(e,r,t){return r.__k==null&&(r.textContent=""),Sp(e,r),typeof t=="function"&&t(),e?e.__c:null}function Zz(e,r,t){return Az(e,r),typeof t=="function"&&t(),e?e.__c:null}Fn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Fn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var HD=at.event;function xae(){}function Eae(){return this.cancelBubble}function Sae(){return this.defaultPrevented}at.event=function(e){return HD&&(e=HD(e)),e.persist=xae,e.isPropagationStopped=Eae,e.isDefaultPrevented=Sae,e.nativeEvent=e};var f3,kae={enumerable:!1,configurable:!0,get:function(){return this.class}},UD=at.vnode;at.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,n=r.type,i={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||$ae&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||_ae(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":bae.test(s)?s=a:n.indexOf("-")===-1&&mae.test(s)?s=s.replace(wae,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ba(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=ba(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",kae)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),r.props=i}(e),e.$$typeof=Gz,UD&&UD(e)};var WD=at.__r;at.__r=function(e){WD&&WD(e),f3=e.__c};var KD=at.diffed;at.diffed=function(e){KD&&KD(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value),f3=null};var Xz={ReactCurrentDispatcher:{current:{readContext:function(e){return f3.__n[e.__c].props.value}}}},Tae="17.0.2";function Jz(e){return Ye.bind(null,e)}function h3(e){return!!e&&e.$$typeof===Gz}function Qz(e){return h3(e)?Oz.apply(null,arguments):e}function eH(e){return!!e.__k&&(Sp(null,e),!0)}function tH(e){return e&&(e.base||e.nodeType===1&&e)||null}var rH=function(e,r){return e(r)},nH=function(e,r){return e(r)},iH=tt;function d3(e){e()}function sH(e){return e}function oH(){return[!1,d3]}var aH=iv;function lH(e,r){var t=r(),n=Ne({h:{__:t,v:r}}),i=n[0].h,s=n[1];return iv(function(){i.__=t,i.v=r,iE(i.__,r())||s({h:i})},[e,t,r]),xt(function(){return iE(i.__,i.v())||s({h:i}),e(function(){iE(i.__,i.v())||s({h:i})})},[e]),t}var wa={useState:Ne,useId:Fz,useReducer:l3,useEffect:xt,useLayoutEffect:iv,useInsertionEffect:aH,useTransition:oH,useDeferredValue:sH,useSyncExternalStore:lH,startTransition:d3,useRef:Pi,useImperativeHandle:Mz,useMemo:xa,useCallback:As,useContext:u3,useDebugValue:Lz,version:"17.0.2",Children:Hz,render:Yz,hydrate:Zz,unmountComponentAtNode:eH,createPortal:Vz,createElement:Ye,createContext:a3,createFactory:Jz,cloneElement:Qz,createRef:l_,Fragment:tt,isValidElement:h3,findDOMNode:tH,Component:Fn,PureComponent:$y,memo:yi,forwardRef:Ar,flushSync:nH,unstable_batchedUpdates:rH,StrictMode:iH,Suspense:ty,SuspenseList:Wd,lazy:qz,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Xz};const Iae=Object.freeze(Object.defineProperty({__proto__:null,Children:Hz,Component:Fn,Fragment:tt,PureComponent:$y,StrictMode:iH,Suspense:ty,SuspenseList:Wd,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Xz,cloneElement:Qz,createContext:a3,createElement:Ye,createFactory:Jz,createPortal:Vz,createRef:l_,default:wa,findDOMNode:tH,flushSync:nH,forwardRef:Ar,hydrate:Zz,isValidElement:h3,lazy:qz,memo:yi,render:Yz,startTransition:d3,unmountComponentAtNode:eH,unstable_batchedUpdates:rH,useCallback:As,useContext:u3,useDebugValue:Lz,useDeferredValue:sH,useEffect:xt,useErrorBoundary:fae,useId:Fz,useImperativeHandle:Mz,useInsertionEffect:aH,useLayoutEffect:iv,useMemo:xa,useReducer:l3,useRef:Pi,useState:Ne,useSyncExternalStore:lH,useTransition:oH,version:Tae},Symbol.toStringTag,{value:"Module"})),Aae=nv(Iae);function Oae(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var uH=Aae,Cae=Oae(uH);function qD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Pae(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var Nae=!!(typeof window<"u"&&window.document&&window.document.createElement);function Rae(e,r,t){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof r!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=e(o.map(function(h){return h.props})),u.canUseDOM?r(a):t&&(a=t(a))}var u=function(h){Pae(c,h);function c(){return h.apply(this,arguments)||this}c.peek=function(){return a},c.rewind=function(){if(c.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var w=a;return a=void 0,o=[],w};var d=c.prototype;return d.UNSAFE_componentWillMount=function(){o.push(this),l()},d.componentDidUpdate=function(){l()},d.componentWillUnmount=function(){var w=o.indexOf(this);o.splice(w,1),l()},d.render=function(){return Cae.createElement(s,this.props)},c}(uH.PureComponent);return qD(u,"displayName","SideEffect("+n(s)+")"),qD(u,"canUseDOM",Nae),u}}var Dae=Rae;const Bae=no(Dae);var Mae=typeof Element<"u",Lae=typeof Map=="function",Fae=typeof Set=="function",jae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function j1(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,n,i;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(!j1(e[n],r[n]))return!1;return!0}var s;if(Lae&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!j1(n.value[1],r.get(n.value[0])))return!1;return!0}if(Fae&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(jae&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof r.valueOf=="function")return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof r.toString=="function")return e.toString()===r.toString();if(i=Object.keys(e),t=i.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;if(Mae&&e instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!j1(e[i[n]],r[i[n]]))return!1;return!0}return e!==e&&r!==r}var zae=function(r,t){try{return j1(r,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Hae=no(zae);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var VD=Object.getOwnPropertySymbols,Uae=Object.prototype.hasOwnProperty,Wae=Object.prototype.propertyIsEnumerable;function Kae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function qae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Vae=qae()?Object.assign:function(e,r){for(var t,n=Kae(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)Uae.call(t,o)&&(n[o]=t[o]);if(VD){i=VD(t);for(var a=0;a<i.length;a++)Wae.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};const Gae=no(Vae);var Xf={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Qt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Qt).map(function(e){return Qt[e]});var rn={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Tw={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},_y={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Yae=Object.keys(Tw).reduce(function(e,r){return e[Tw[r]]=r,e},{}),Zae=[Qt.NOSCRIPT,Qt.SCRIPT,Qt.STYLE],va="data-react-helmet",Xae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jae=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},Qae=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ele=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},GD=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},tle=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e},CT=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},rle=function(r){var t=lp(r,Qt.TITLE),n=lp(r,_y.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=lp(r,_y.DEFAULT_TITLE);return t||i||void 0},nle=function(r){return lp(r,_y.ON_CHANGE_CLIENT_STATE)||function(){}},sE=function(r,t){return t.filter(function(n){return typeof n[r]<"u"}).map(function(n){return n[r]}).reduce(function(n,i){return _s({},n,i)},{})},ile=function(r,t){return t.filter(function(n){return typeof n[Qt.BASE]<"u"}).map(function(n){return n[Qt.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(r.indexOf(l)!==-1&&i[l])return n.concat(i)}return n},[])},$g=function(r,t,n){var i={};return n.filter(function(s){return Array.isArray(s[r])?!0:(typeof s[r]<"u"&&lle("Helmet: "+r+' should be of type "Array". Instead found type "'+Xae(s[r])+'"'),!1)}).map(function(s){return s[r]}).reverse().reduce(function(s,o){var a={};o.filter(function(d){for(var y=void 0,w=Object.keys(d),b=0;b<w.length;b++){var T=w[b],x=T.toLowerCase();t.indexOf(x)!==-1&&!(y===rn.REL&&d[y].toLowerCase()==="canonical")&&!(x===rn.REL&&d[x].toLowerCase()==="stylesheet")&&(y=x),t.indexOf(T)!==-1&&(T===rn.INNER_HTML||T===rn.CSS_TEXT||T===rn.ITEM_PROP)&&(y=T)}if(!y||!d[y])return!1;var A=d[y].toLowerCase();return i[y]||(i[y]={}),a[y]||(a[y]={}),i[y][A]?!1:(a[y][A]=!0,!0)}).reverse().forEach(function(d){return s.push(d)});for(var l=Object.keys(a),u=0;u<l.length;u++){var h=l[u],c=Gae({},i[h],a[h]);i[h]=c}return s},[]).reverse()},lp=function(r,t){for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.hasOwnProperty(t))return i[t]}return null},sle=function(r){return{baseTag:ile([rn.HREF,rn.TARGET],r),bodyAttributes:sE(Xf.BODY,r),defer:lp(r,_y.DEFER),encode:lp(r,_y.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:sE(Xf.HTML,r),linkTags:$g(Qt.LINK,[rn.REL,rn.HREF],r),metaTags:$g(Qt.META,[rn.NAME,rn.CHARSET,rn.HTTPEQUIV,rn.PROPERTY,rn.ITEM_PROP],r),noscriptTags:$g(Qt.NOSCRIPT,[rn.INNER_HTML],r),onChangeClientState:nle(r),scriptTags:$g(Qt.SCRIPT,[rn.SRC,rn.INNER_HTML],r),styleTags:$g(Qt.STYLE,[rn.CSS_TEXT],r),title:rle(r),titleAttributes:sE(Xf.TITLE,r)}},PT=function(){var e=Date.now();return function(r){var t=Date.now();t-e>16?(e=t,r(t)):setTimeout(function(){PT(r)},0)}}(),YD=function(r){return clearTimeout(r)},ole=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||PT:global.requestAnimationFrame||PT,ale=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||YD:global.cancelAnimationFrame||YD,lle=function(r){return console&&typeof console.warn=="function"&&console.warn(r)},_g=null,ule=function(r){_g&&ale(_g),r.defer?_g=ole(function(){ZD(r,function(){_g=null})}):(ZD(r),_g=null)},ZD=function(r,t){var n=r.baseTag,i=r.bodyAttributes,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.onChangeClientState,h=r.scriptTags,c=r.styleTags,d=r.title,y=r.titleAttributes;NT(Qt.BODY,i),NT(Qt.HTML,s),cle(d,y);var w={baseTag:_d(Qt.BASE,n),linkTags:_d(Qt.LINK,o),metaTags:_d(Qt.META,a),noscriptTags:_d(Qt.NOSCRIPT,l),scriptTags:_d(Qt.SCRIPT,h),styleTags:_d(Qt.STYLE,c)},b={},T={};Object.keys(w).forEach(function(x){var A=w[x],_=A.newTags,I=A.oldTags;_.length&&(b[x]=_),I.length&&(T[x]=w[x].oldTags)}),t&&t(),u(r,b,T)},cH=function(r){return Array.isArray(r)?r.join(""):r},cle=function(r,t){typeof r<"u"&&document.title!==r&&(document.title=cH(r)),NT(Qt.TITLE,t)},NT=function(r,t){var n=document.getElementsByTagName(r)[0];if(n){for(var i=n.getAttribute(va),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],h=t[u]||"";n.getAttribute(u)!==h&&n.setAttribute(u,h),s.indexOf(u)===-1&&s.push(u);var c=o.indexOf(u);c!==-1&&o.splice(c,1)}for(var d=o.length-1;d>=0;d--)n.removeAttribute(o[d]);s.length===o.length?n.removeAttribute(va):n.getAttribute(va)!==a.join(",")&&n.setAttribute(va,a.join(","))}},_d=function(r,t){var n=document.head||document.querySelector(Qt.HEAD),i=n.querySelectorAll(r+"["+va+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(r);for(var h in l)if(l.hasOwnProperty(h))if(h===rn.INNER_HTML)u.innerHTML=l.innerHTML;else if(h===rn.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var c=typeof l[h]>"u"?"":l[h];u.setAttribute(h,c)}u.setAttribute(va,"true"),s.some(function(d,y){return a=y,u.isEqualNode(d)})?s.splice(a,1):o.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:o}},fH=function(r){return Object.keys(r).reduce(function(t,n){var i=typeof r[n]<"u"?n+'="'+r[n]+'"':""+n;return t?t+" "+i:i},"")},fle=function(r,t,n,i){var s=fH(n),o=cH(t);return s?"<"+r+" "+va+'="true" '+s+">"+CT(o,i)+"</"+r+">":"<"+r+" "+va+'="true">'+CT(o,i)+"</"+r+">"},hle=function(r,t,n){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(u){return!(u===rn.INNER_HTML||u===rn.CSS_TEXT)}).reduce(function(u,h){var c=typeof s[h]>"u"?h:h+'="'+CT(s[h],n)+'"';return u?u+" "+c:c},""),a=s.innerHTML||s.cssText||"",l=Zae.indexOf(r)===-1;return i+"<"+r+" "+va+'="true" '+o+(l?"/>":">"+a+"</"+r+">")},"")},hH=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Tw[i]||i]=r[i],n},t)},dle=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Yae[i]||i]=r[i],n},t)},ple=function(r,t,n){var i,s=(i={key:t},i[va]=!0,i),o=hH(n,s);return[wa.createElement(Qt.TITLE,o,t)]},vle=function(r,t){return t.map(function(n,i){var s,o=(s={key:i},s[va]=!0,s);return Object.keys(n).forEach(function(a){var l=Tw[a]||a;if(l===rn.INNER_HTML||l===rn.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=n[a]}),wa.createElement(r,o)})},Ml=function(r,t,n){switch(r){case Qt.TITLE:return{toComponent:function(){return ple(r,t.title,t.titleAttributes)},toString:function(){return fle(r,t.title,t.titleAttributes,n)}};case Xf.BODY:case Xf.HTML:return{toComponent:function(){return hH(t)},toString:function(){return fH(t)}};default:return{toComponent:function(){return vle(r,t)},toString:function(){return hle(r,t,n)}}}},dH=function(r){var t=r.baseTag,n=r.bodyAttributes,i=r.encode,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.scriptTags,h=r.styleTags,c=r.title,d=c===void 0?"":c,y=r.titleAttributes;return{base:Ml(Qt.BASE,t,i),bodyAttributes:Ml(Xf.BODY,n,i),htmlAttributes:Ml(Xf.HTML,s,i),link:Ml(Qt.LINK,o,i),meta:Ml(Qt.META,a,i),noscript:Ml(Qt.NOSCRIPT,l,i),script:Ml(Qt.SCRIPT,u,i),style:Ml(Qt.STYLE,h,i),title:Ml(Qt.TITLE,{title:d,titleAttributes:y},i)}},gle=function(r){var t,n;return n=t=function(i){ele(s,i);function s(){return Jae(this,s),tle(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!Hae(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Qt.SCRIPT:case Qt.NOSCRIPT:return{innerHTML:l};case Qt.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,h=a.arrayTypeChildren,c=a.newChildProps,d=a.nestedChildren;return _s({},h,(l={},l[u.type]=[].concat(h[u.type]||[],[_s({},c,this.mapNestedChildrenToProps(u,d))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,u,h=a.child,c=a.newProps,d=a.newChildProps,y=a.nestedChildren;switch(h.type){case Qt.TITLE:return _s({},c,(l={},l[h.type]=y,l.titleAttributes=_s({},d),l));case Qt.BODY:return _s({},c,{bodyAttributes:_s({},d)});case Qt.HTML:return _s({},c,{htmlAttributes:_s({},d)})}return _s({},c,(u={},u[h.type]=_s({},d),u))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=_s({},l);return Object.keys(a).forEach(function(h){var c;u=_s({},u,(c={},c[h]=a[h],c))}),u},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var u=this,h={};return wa.Children.forEach(a,function(c){if(!(!c||!c.props)){var d=c.props,y=d.children,w=GD(d,["children"]),b=dle(w);switch(u.warnOnInvalidChildren(c,y),c.type){case Qt.LINK:case Qt.META:case Qt.NOSCRIPT:case Qt.SCRIPT:case Qt.STYLE:h=u.flattenArrayTypeChildren({child:c,arrayTypeChildren:h,newChildProps:b,nestedChildren:y});break;default:l=u.mapObjectTypeChildren({child:c,newProps:l,newChildProps:b,nestedChildren:y});break}}}),l=this.mapArrayTypeChildrenToProps(h,l),l},s.prototype.render=function(){var a=this.props,l=a.children,u=GD(a,["children"]),h=_s({},u);return l&&(h=this.mapChildrenToProps(l,h)),wa.createElement(r,h)},Qae(s,null,[{key:"canUseDOM",set:function(a){r.canUseDOM=a}}]),s}(wa.Component),t.propTypes={base:tn.object,bodyAttributes:tn.object,children:tn.oneOfType([tn.arrayOf(tn.node),tn.node]),defaultTitle:tn.string,defer:tn.bool,encodeSpecialCharacters:tn.bool,htmlAttributes:tn.object,link:tn.arrayOf(tn.object),meta:tn.arrayOf(tn.object),noscript:tn.arrayOf(tn.object),onChangeClientState:tn.func,script:tn.arrayOf(tn.object),style:tn.arrayOf(tn.object),title:tn.string,titleAttributes:tn.object,titleTemplate:tn.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=r.peek,t.rewind=function(){var i=r.rewind();return i||(i=dH({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},yle=function(){return null},mle=Bae(sle,ule,dH)(yle),vh=gle(mle);vh.renderStatic=vh.rewind;var ble={};function Bg(e,r){for(var t in r)e[t]=r[t];return e}function wle(e,r,t){var n,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),o={};if(s&&s[1])for(var a=s[1].split("&"),l=0;l<a.length;l++){var u=a[l].split("=");o[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=RT(e.replace(i,"")),r=RT(r||"");for(var h=Math.max(e.length,r.length),c=0;c<h;c++)if(r[c]&&r[c].charAt(0)===":"){var d=r[c].replace(/(^:|[+*?]+$)/g,""),y=(r[c].match(/[+*?]+$/)||ble)[0]||"",w=~y.indexOf("+"),b=~y.indexOf("*"),T=e[c]||"";if(!T&&!b&&(y.indexOf("?")<0||w)){n=!1;break}if(o[d]=decodeURIComponent(T),w||b){o[d]=e.slice(c).map(decodeURIComponent).join("/");break}}else if(r[c]!==e[c]){n=!1;break}return(t.default===!0||n!==!1)&&o}function $le(e,r){return e.rank<r.rank?1:e.rank>r.rank?-1:e.index-r.index}function _le(e,r){return e.index=r,e.rank=function(t){return t.props.default?0:RT(t.props.path).map(xle).join("")}(e),e.props}function RT(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function xle(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Ele={},Jf=[],XD=[],Ys=null,pH={url:p3()},Sle=a3(pH);function p3(){var e;return""+((e=Ys&&Ys.location?Ys.location:Ys&&Ys.getCurrentLocation?Ys.getCurrentLocation():typeof location<"u"?location:Ele).pathname||"")+(e.search||"")}function Tr(e,r){return r===void 0&&(r=!1),typeof e!="string"&&e.url&&(r=e.replace,e=e.url),function(t){for(var n=Jf.length;n--;)if(Jf[n].canRoute(t))return!0;return!1}(e)&&function(t,n){n===void 0&&(n="push"),Ys&&Ys[n]?Ys[n](t):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,t)}(e,r?"replace":"push"),vH(e)}function vH(e){for(var r=!1,t=0;t<Jf.length;t++)Jf[t].routeTo(e)&&(r=!0);return r}function kle(e){if(e&&e.getAttribute){var r=e.getAttribute("href"),t=e.getAttribute("target");if(r&&r.match(/^\//g)&&(!t||t.match(/^_?self$/i)))return Tr(r)}}function Tle(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function gH(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var r=e.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(kle(r))return Tle(e)}while(r=r.parentNode)}}var JD=!1;function yH(e){e.history&&(Ys=e.history),this.state={url:e.url||p3()}}Bg(yH.prototype=new Fn,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var r=ba(this.props.children);return this.g(r,e)!==void 0},routeTo:function(e){this.setState({url:e});var r=this.canRoute(e);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;JD||(JD=!0,Ys||addEventListener("popstate",function(){vH(p3())}),addEventListener("click",gH)),Jf.push(this),Ys&&(this.u=Ys.listen(function(r){var t=r.location||r;e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),Jf.splice(Jf.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,r){e=e.filter(_le).sort($le);for(var t=0;t<e.length;t++){var n=e[t],i=wle(r,n.props.path,n.props);if(i)return[n,i]}},render:function(e,r){var t,n,i=e.onChange,s=r.url,o=this.c,a=this.g(ba(e.children),s);if(a&&(n=Oz(a[0],Bg(Bg({url:s,matches:t=a[1]},t),{key:void 0,ref:void 0}))),s!==(o&&o.url)){Bg(pH,o=this.c={url:s,previous:o&&o.url,current:n,path:n?n.props.path:null,matches:t}),o.router=this,o.active=n?[n]:[];for(var l=XD.length;l--;)XD[l]({});typeof i=="function"&&i(o)}return Ye(Sle.Provider,{value:o},n)}});var Kt=function(e){return Ye("a",Bg({onClick:gH},e))};function Ile({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Ale=Ar(Ile),mH=Ale;function Ole({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Cle=Ar(Ole),Ple=Cle;function Nle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}const Rle=Ar(Nle),Dle=Rle;function Ble({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))}const Mle=Ar(Ble),Lle=Mle;function Fle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const jle=Ar(Fle),zle=jle;function Hle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Ule=Ar(Hle),bH=Ule;function Wle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Kle=Ar(Wle),wH=Kle;function qle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Vle=Ar(qle),$H=Vle;function Gle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Yle=Ar(Gle),Zle=Yle;function Xle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const Jle=Ar(Xle),v3=Jle;function Qle({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const eue=Ar(Qle),tue=eue;function rue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"}))}const nue=Ar(rue),iue=nue;function sue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const oue=Ar(sue),_H=oue;function aue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z",clipRule:"evenodd"}))}const lue=Ar(aue),uue=lue;function cue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const fue=Ar(cue),hue=fue;function due({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))}const pue=Ar(due),vue=pue;function gue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const yue=Ar(gue),g3=yue;function mue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),Ye("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const bue=Ar(mue),xH=bue;function wue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const $ue=Ar(wue),_ue=$ue;function xue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z",clipRule:"evenodd"}))}const Eue=Ar(xue),EH=Eue;function Sue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}))}const kue=Ar(Sue),SH=kue;function Tue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const Iue=Ar(Tue),y3=Iue;function Aue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const Oue=Ar(Aue),Cue=Oue;function Pue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const Nue=Ar(Pue),kH=Nue;function Rue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z",clipRule:"evenodd"}))}const Due=Ar(Rue),Bue=Due;function Mue({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const Lue=Ar(Mue),TH=Lue;var Fue=0;function v(e,r,t,n,i,s){var o,a,l={};for(a in r)a=="ref"?o=r[a]:l[a]=r[a];var u={type:e,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Fue,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return at.vnode&&at.vnode(u),u}const Ps={video:v("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:v("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),magnifyingGlassBold:({width:e})=>v("svg",{fill:"none",width:e,viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),close:v("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:v("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:v("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[v("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),v("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:v("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[v("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),v("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),v("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),newFollower:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:v("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),search:v("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:v("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:v("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),network:v("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:v("g",{children:[v("g",{children:[v("g",{children:v("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),v("g",{children:v("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),v("g",{children:v("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),v("g",{children:v("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),v("g",{children:v("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),v("g",{children:v("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),checkmark:v("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:v("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})})};function Mg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var IH={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,r){(function(t){e.exports=t()})(function(){return function t(n,i,s){function o(u,h){if(!i[u]){if(!n[u]){var c=typeof Mg=="function"&&Mg;if(!h&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(w){var b=n[u][1][w];return o(b||w)},y,y.exports,t,n,i,s)}return i[u].exports}for(var a=typeof Mg=="function"&&Mg,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(w),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),a=function(){h.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:a=function(){setTimeout(w,0)};var d,y=[];function w(){d=!0;for(var T,x,A=y.length;A;){for(x=y,y=[],T=-1;++T<A;)x[T]();A=y.length}d=!1}n.exports=b;function b(T){y.push(T)===1&&!d&&a()}}).call(this,typeof Tn<"u"?Tn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],h=["PENDING"];n.exports=c;function c(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,O!==o&&b(this,O)}c.prototype.catch=function(O){return this.then(null,O)},c.prototype.then=function(O,C){if(typeof O!="function"&&this.state===u||typeof C!="function"&&this.state===l)return this;var g=new this.constructor(o);if(this.state!==h){var R=this.state===u?O:C;y(g,R,this.outcome)}else this.queue.push(new d(g,O,C));return g};function d(O,C,g){this.promise=O,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(O){a.resolve(this.promise,O)},d.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},d.prototype.callRejected=function(O){a.reject(this.promise,O)},d.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)};function y(O,C,g){s(function(){var R;try{R=C(g)}catch(M){return a.reject(O,M)}R===O?a.reject(O,new TypeError("Cannot resolve promise with itself")):a.resolve(O,R)})}a.resolve=function(O,C){var g=T(w,C);if(g.status==="error")return a.reject(O,g.value);var R=g.value;if(R)b(O,R);else{O.state=u,O.outcome=C;for(var M=-1,L=O.queue.length;++M<L;)O.queue[M].callFulfilled(C)}return O},a.reject=function(O,C){O.state=l,O.outcome=C;for(var g=-1,R=O.queue.length;++g<R;)O.queue[g].callRejected(C);return O};function w(O){var C=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof C=="function")return function(){C.apply(O,arguments)}}function b(O,C){var g=!1;function R(X){g||(g=!0,a.reject(O,X))}function M(X){g||(g=!0,a.resolve(O,X))}function L(){C(M,R)}var W=T(L);W.status==="error"&&R(W.value)}function T(O,C){var g={};try{g.value=O(C),g.status="success"}catch(R){g.status="error",g.value=R}return g}c.resolve=x;function x(O){return O instanceof this?O:a.resolve(new this(o),O)}c.reject=A;function A(O){var C=new this(o);return a.reject(C,O)}c.all=_;function _(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,R=!1;if(!g)return this.resolve([]);for(var M=new Array(g),L=0,W=-1,X=new this(o);++W<g;)te(O[W],W);return X;function te(J,j){C.resolve(J).then(Z,function(se){R||(R=!0,a.reject(X,se))});function Z(se){M[j]=se,++L===g&&!R&&(R=!0,a.resolve(X,M))}}}c.race=I;function I(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,R=!1;if(!g)return this.resolve([]);for(var M=-1,L=new this(o);++M<g;)W(O[M]);return L;function W(X){C.resolve(X).then(function(te){R||(R=!0,a.resolve(L,te))},function(te){R||(R=!0,a.reject(L,te))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Tn<"u"?Tn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,ue){if(!(Y instanceof ue))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ue=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||ue)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function h(Y,ue){Y=Y||[],ue=ue||{};try{return new Blob(Y,ue)}catch(we){if(we.name!=="TypeError")throw we;for(var re=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$e=new re,Se=0;Se<Y.length;Se+=1)$e.append(Y[Se]);return $e.getBlob(ue.type)}}typeof Promise>"u"&&t(3);var c=Promise;function d(Y,ue){ue&&Y.then(function(re){ue(null,re)},function(re){ue(re)})}function y(Y,ue,re){typeof ue=="function"&&Y.then(ue),typeof re=="function"&&Y.catch(re)}function w(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",x=void 0,A={},_=Object.prototype.toString,I="readonly",O="readwrite";function C(Y){for(var ue=Y.length,re=new ArrayBuffer(ue),$e=new Uint8Array(re),Se=0;Se<ue;Se++)$e[Se]=Y.charCodeAt(Se);return re}function g(Y){return new c(function(ue){var re=Y.transaction(T,O),$e=h([""]);re.objectStore(T).put($e,"key"),re.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),ue(!1)},re.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),we=navigator.userAgent.match(/Edge\//);ue(we||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function R(Y){return typeof x=="boolean"?c.resolve(x):g(Y).then(function(ue){return x=ue,x})}function M(Y){var ue=A[Y.name],re={};re.promise=new c(function($e,Se){re.resolve=$e,re.reject=Se}),ue.deferredOperations.push(re),ue.dbReady?ue.dbReady=ue.dbReady.then(function(){return re.promise}):ue.dbReady=re.promise}function L(Y){var ue=A[Y.name],re=ue.deferredOperations.pop();if(re)return re.resolve(),re.promise}function W(Y,ue){var re=A[Y.name],$e=re.deferredOperations.pop();if($e)return $e.reject(ue),$e.promise}function X(Y,ue){return new c(function(re,$e){if(A[Y.name]=A[Y.name]||Ge(),Y.db)if(ue)M(Y),Y.db.close();else return re(Y.db);var Se=[Y.name];ue&&Se.push(Y.version);var we=l.open.apply(l,Se);ue&&(we.onupgradeneeded=function(Le){var Ze=we.result;try{Ze.createObjectStore(Y.storeName),Le.oldVersion<=1&&Ze.createObjectStore(T)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Qe}}),we.onerror=function(Le){Le.preventDefault(),$e(we.error)},we.onsuccess=function(){var Le=we.result;Le.onversionchange=function(Ze){Ze.target.close()},re(Le),L(Y)}})}function te(Y){return X(Y,!1)}function J(Y){return X(Y,!0)}function j(Y,ue){if(!Y.db)return!0;var re=!Y.db.objectStoreNames.contains(Y.storeName),$e=Y.version<Y.db.version,Se=Y.version>Y.db.version;if($e&&(Y.version!==ue&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),Se||re){if(re){var we=Y.db.version+1;we>Y.version&&(Y.version=we)}return!0}return!1}function Z(Y){return new c(function(ue,re){var $e=new FileReader;$e.onerror=re,$e.onloadend=function(Se){var we=btoa(Se.target.result||"");ue({__local_forage_encoded_blob:!0,data:we,type:Y.type})},$e.readAsBinaryString(Y)})}function se(Y){var ue=C(atob(Y.data));return h([ue],{type:Y.type})}function Ee(Y){return Y&&Y.__local_forage_encoded_blob}function me(Y){var ue=this,re=ue._initReady().then(function(){var $e=A[ue._dbInfo.name];if($e&&$e.dbReady)return $e.dbReady});return y(re,Y,Y),re}function Pe(Y){M(Y);for(var ue=A[Y.name],re=ue.forages,$e=0;$e<re.length;$e++){var Se=re[$e];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return Y.db=null,te(Y).then(function(we){return Y.db=we,j(Y)?J(Y):we}).then(function(we){Y.db=ue.db=we;for(var Le=0;Le<re.length;Le++)re[Le]._dbInfo.db=we}).catch(function(we){throw W(Y,we),we})}function Ue(Y,ue,re,$e){$e===void 0&&($e=1);try{var Se=Y.db.transaction(Y.storeName,ue);re(null,Se)}catch(we){if($e>0&&(!Y.db||we.name==="InvalidStateError"||we.name==="NotFoundError"))return c.resolve().then(function(){if(!Y.db||we.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),J(Y)}).then(function(){return Pe(Y).then(function(){Ue(Y,ue,re,$e-1)})}).catch(re);re(we)}}function Ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function it(Y){var ue=this,re={db:null};if(Y)for(var $e in Y)re[$e]=Y[$e];var Se=A[re.name];Se||(Se=Ge(),A[re.name]=Se),Se.forages.push(ue),ue._initReady||(ue._initReady=ue.ready,ue.ready=me);var we=[];function Le(){return c.resolve()}for(var Ze=0;Ze<Se.forages.length;Ze++){var Qe=Se.forages[Ze];Qe!==ue&&we.push(Qe._initReady().catch(Le))}var et=Se.forages.slice(0);return c.all(we).then(function(){return re.db=Se.db,te(re)}).then(function(ot){return re.db=ot,j(re,ue._defaultConfig.version)?J(re):ot}).then(function(ot){re.db=Se.db=ot,ue._dbInfo=re;for(var Et=0;Et<et.length;Et++){var Mt=et[Et];Mt!==ue&&(Mt._dbInfo.db=re.db,Mt._dbInfo.version=re.version)}})}function _e(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,we){re.ready().then(function(){Ue(re._dbInfo,I,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(re._dbInfo.storeName),et=Qe.get(Y);et.onsuccess=function(){var ot=et.result;ot===void 0&&(ot=null),Ee(ot)&&(ot=se(ot)),Se(ot)},et.onerror=function(){we(et.error)}}catch(ot){we(ot)}})}).catch(we)});return d($e,ue),$e}function pe(Y,ue){var re=this,$e=new c(function(Se,we){re.ready().then(function(){Ue(re._dbInfo,I,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(re._dbInfo.storeName),et=Qe.openCursor(),ot=1;et.onsuccess=function(){var Et=et.result;if(Et){var Mt=Et.value;Ee(Mt)&&(Mt=se(Mt));var gr=Y(Mt,Et.key,ot++);gr!==void 0?Se(gr):Et.continue()}else Se()},et.onerror=function(){we(et.error)}}catch(Et){we(Et)}})}).catch(we)});return d($e,ue),$e}function Te(Y,ue,re){var $e=this;Y=w(Y);var Se=new c(function(we,Le){var Ze;$e.ready().then(function(){return Ze=$e._dbInfo,_.call(ue)==="[object Blob]"?R(Ze.db).then(function(Qe){return Qe?ue:Z(ue)}):ue}).then(function(Qe){Ue($e._dbInfo,O,function(et,ot){if(et)return Le(et);try{var Et=ot.objectStore($e._dbInfo.storeName);Qe===null&&(Qe=void 0);var Mt=Et.put(Qe,Y);ot.oncomplete=function(){Qe===void 0&&(Qe=null),we(Qe)},ot.onabort=ot.onerror=function(){var gr=Mt.error?Mt.error:Mt.transaction.error;Le(gr)}}catch(gr){Le(gr)}})}).catch(Le)});return d(Se,re),Se}function je(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,we){re.ready().then(function(){Ue(re._dbInfo,O,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(re._dbInfo.storeName),et=Qe.delete(Y);Ze.oncomplete=function(){Se()},Ze.onerror=function(){we(et.error)},Ze.onabort=function(){var ot=et.error?et.error:et.transaction.error;we(ot)}}catch(ot){we(ot)}})}).catch(we)});return d($e,ue),$e}function $(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){Ue(ue._dbInfo,O,function(we,Le){if(we)return Se(we);try{var Ze=Le.objectStore(ue._dbInfo.storeName),Qe=Ze.clear();Le.oncomplete=function(){$e()},Le.onabort=Le.onerror=function(){var et=Qe.error?Qe.error:Qe.transaction.error;Se(et)}}catch(et){Se(et)}})}).catch(Se)});return d(re,Y),re}function S(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){Ue(ue._dbInfo,I,function(we,Le){if(we)return Se(we);try{var Ze=Le.objectStore(ue._dbInfo.storeName),Qe=Ze.count();Qe.onsuccess=function(){$e(Qe.result)},Qe.onerror=function(){Se(Qe.error)}}catch(et){Se(et)}})}).catch(Se)});return d(re,Y),re}function N(Y,ue){var re=this,$e=new c(function(Se,we){if(Y<0){Se(null);return}re.ready().then(function(){Ue(re._dbInfo,I,function(Le,Ze){if(Le)return we(Le);try{var Qe=Ze.objectStore(re._dbInfo.storeName),et=!1,ot=Qe.openKeyCursor();ot.onsuccess=function(){var Et=ot.result;if(!Et){Se(null);return}Y===0||et?Se(Et.key):(et=!0,Et.advance(Y))},ot.onerror=function(){we(ot.error)}}catch(Et){we(Et)}})}).catch(we)});return d($e,ue),$e}function F(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){Ue(ue._dbInfo,I,function(we,Le){if(we)return Se(we);try{var Ze=Le.objectStore(ue._dbInfo.storeName),Qe=Ze.openKeyCursor(),et=[];Qe.onsuccess=function(){var ot=Qe.result;if(!ot){$e(et);return}et.push(ot.key),ot.continue()},Qe.onerror=function(){Se(Qe.error)}}catch(ot){Se(ot)}})}).catch(Se)});return d(re,Y),re}function z(Y,ue){ue=b.apply(this,arguments);var re=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||re.name,Y.storeName=Y.storeName||re.storeName);var $e=this,Se;if(!Y.name)Se=c.reject("Invalid arguments");else{var we=Y.name===re.name&&$e._dbInfo.db,Le=we?c.resolve($e._dbInfo.db):te(Y).then(function(Ze){var Qe=A[Y.name],et=Qe.forages;Qe.db=Ze;for(var ot=0;ot<et.length;ot++)et[ot]._dbInfo.db=Ze;return Ze});Y.storeName?Se=Le.then(function(Ze){if(Ze.objectStoreNames.contains(Y.storeName)){var Qe=Ze.version+1;M(Y);var et=A[Y.name],ot=et.forages;Ze.close();for(var Et=0;Et<ot.length;Et++){var Mt=ot[Et];Mt._dbInfo.db=null,Mt._dbInfo.version=Qe}var gr=new c(function(ar,qr){var Cr=l.open(Y.name,Qe);Cr.onerror=function(un){var Mi=Cr.result;Mi.close(),qr(un)},Cr.onupgradeneeded=function(){var un=Cr.result;un.deleteObjectStore(Y.storeName)},Cr.onsuccess=function(){var un=Cr.result;un.close(),ar(un)}});return gr.then(function(ar){et.db=ar;for(var qr=0;qr<ot.length;qr++){var Cr=ot[qr];Cr._dbInfo.db=ar,L(Cr._dbInfo)}}).catch(function(ar){throw(W(Y,ar)||c.resolve()).catch(function(){}),ar})}}):Se=Le.then(function(Ze){M(Y);var Qe=A[Y.name],et=Qe.forages;Ze.close();for(var ot=0;ot<et.length;ot++){var Et=et[ot];Et._dbInfo.db=null}var Mt=new c(function(gr,ar){var qr=l.deleteDatabase(Y.name);qr.onerror=function(){var Cr=qr.result;Cr&&Cr.close(),ar(qr.error)},qr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},qr.onsuccess=function(){var Cr=qr.result;Cr&&Cr.close(),gr(Cr)}});return Mt.then(function(gr){Qe.db=gr;for(var ar=0;ar<et.length;ar++){var qr=et[ar];L(qr._dbInfo)}}).catch(function(gr){throw(W(Y,gr)||c.resolve()).catch(function(){}),gr})})}return d(Se,ue),Se}var V={_driver:"asyncStorage",_initStorage:it,_support:u(),iterate:pe,getItem:_e,setItem:Te,removeItem:je,clear:$,length:S,key:N,keys:F,dropInstance:z};function ae(){return typeof openDatabase=="function"}var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",He="~~local_forage_type~",ze=/^~~local_forage_type~([^~]+)~/,st="__lfsc__:",wt=st.length,mt="arbf",vt="blob",Rt="si08",fr="ui08",Kr="uic8",ct="si16",It="si32",pn="ur16",Ri="ui32",Vi="fl32",vn="fl64",ds=wt+mt.length,co=Object.prototype.toString;function Di(Y){var ue=Y.length*.75,re=Y.length,$e,Se=0,we,Le,Ze,Qe;Y[Y.length-1]==="="&&(ue--,Y[Y.length-2]==="="&&ue--);var et=new ArrayBuffer(ue),ot=new Uint8Array(et);for($e=0;$e<re;$e+=4)we=ve.indexOf(Y[$e]),Le=ve.indexOf(Y[$e+1]),Ze=ve.indexOf(Y[$e+2]),Qe=ve.indexOf(Y[$e+3]),ot[Se++]=we<<2|Le>>4,ot[Se++]=(Le&15)<<4|Ze>>2,ot[Se++]=(Ze&3)<<6|Qe&63;return et}function Gi(Y){var ue=new Uint8Array(Y),re="",$e;for($e=0;$e<ue.length;$e+=3)re+=ve[ue[$e]>>2],re+=ve[(ue[$e]&3)<<4|ue[$e+1]>>4],re+=ve[(ue[$e+1]&15)<<2|ue[$e+2]>>6],re+=ve[ue[$e+2]&63];return ue.length%3===2?re=re.substring(0,re.length-1)+"=":ue.length%3===1&&(re=re.substring(0,re.length-2)+"=="),re}function fo(Y,ue){var re="";if(Y&&(re=co.call(Y)),Y&&(re==="[object ArrayBuffer]"||Y.buffer&&co.call(Y.buffer)==="[object ArrayBuffer]")){var $e,Se=st;Y instanceof ArrayBuffer?($e=Y,Se+=mt):($e=Y.buffer,re==="[object Int8Array]"?Se+=Rt:re==="[object Uint8Array]"?Se+=fr:re==="[object Uint8ClampedArray]"?Se+=Kr:re==="[object Int16Array]"?Se+=ct:re==="[object Uint16Array]"?Se+=pn:re==="[object Int32Array]"?Se+=It:re==="[object Uint32Array]"?Se+=Ri:re==="[object Float32Array]"?Se+=Vi:re==="[object Float64Array]"?Se+=vn:ue(new Error("Failed to get type for BinaryArray"))),ue(Se+Gi($e))}else if(re==="[object Blob]"){var we=new FileReader;we.onload=function(){var Le=He+Y.type+"~"+Gi(this.result);ue(st+vt+Le)},we.readAsArrayBuffer(Y)}else try{ue(JSON.stringify(Y))}catch(Le){console.error("Couldn't convert value into a JSON string: ",Y),ue(null,Le)}}function Qc(Y){if(Y.substring(0,wt)!==st)return JSON.parse(Y);var ue=Y.substring(ds),re=Y.substring(wt,ds),$e;if(re===vt&&ze.test(ue)){var Se=ue.match(ze);$e=Se[1],ue=ue.substring(Se[0].length)}var we=Di(ue);switch(re){case mt:return we;case vt:return h([we],{type:$e});case Rt:return new Int8Array(we);case fr:return new Uint8Array(we);case Kr:return new Uint8ClampedArray(we);case ct:return new Int16Array(we);case pn:return new Uint16Array(we);case It:return new Int32Array(we);case Ri:return new Uint32Array(we);case Vi:return new Float32Array(we);case vn:return new Float64Array(we);default:throw new Error("Unkown type: "+re)}}var ho={serialize:fo,deserialize:Qc,stringToBuffer:Di,bufferToString:Gi};function ef(Y,ue,re,$e){Y.executeSql("CREATE TABLE IF NOT EXISTS "+ue.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],re,$e)}function Gh(Y){var ue=this,re={db:null};if(Y)for(var $e in Y)re[$e]=typeof Y[$e]!="string"?Y[$e].toString():Y[$e];var Se=new c(function(we,Le){try{re.db=openDatabase(re.name,String(re.version),re.description,re.size)}catch(Ze){return Le(Ze)}re.db.transaction(function(Ze){ef(Ze,re,function(){ue._dbInfo=re,we()},function(Qe,et){Le(et)})},Le)});return re.serializer=ho,Se}function po(Y,ue,re,$e,Se,we){Y.executeSql(re,$e,Se,function(Le,Ze){Ze.code===Ze.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ue.storeName],function(Qe,et){et.rows.length?we(Qe,Ze):ef(Qe,ue,function(){Qe.executeSql(re,$e,Se,we)},we)},we):we(Le,Ze)},we)}function Xo(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,we){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ze){po(Ze,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[Y],function(Qe,et){var ot=et.rows.length?et.rows.item(0).value:null;ot&&(ot=Le.serializer.deserialize(ot)),Se(ot)},function(Qe,et){we(et)})})}).catch(we)});return d($e,ue),$e}function Na(Y,ue){var re=this,$e=new c(function(Se,we){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ze){po(Ze,Le,"SELECT * FROM "+Le.storeName,[],function(Qe,et){for(var ot=et.rows,Et=ot.length,Mt=0;Mt<Et;Mt++){var gr=ot.item(Mt),ar=gr.value;if(ar&&(ar=Le.serializer.deserialize(ar)),ar=Y(ar,gr.key,Mt+1),ar!==void 0){Se(ar);return}}Se()},function(Qe,et){we(et)})})}).catch(we)});return d($e,ue),$e}function tf(Y,ue,re,$e){var Se=this;Y=w(Y);var we=new c(function(Le,Ze){Se.ready().then(function(){ue===void 0&&(ue=null);var Qe=ue,et=Se._dbInfo;et.serializer.serialize(ue,function(ot,Et){Et?Ze(Et):et.db.transaction(function(Mt){po(Mt,et,"INSERT OR REPLACE INTO "+et.storeName+" (key, value) VALUES (?, ?)",[Y,ot],function(){Le(Qe)},function(gr,ar){Ze(ar)})},function(Mt){if(Mt.code===Mt.QUOTA_ERR){if($e>0){Le(tf.apply(Se,[Y,Qe,re,$e-1]));return}Ze(Mt)}})})}).catch(Ze)});return d(we,re),we}function Yh(Y,ue,re){return tf.apply(this,[Y,ue,re,1])}function Bi(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,we){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ze){po(Ze,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[Y],function(){Se()},function(Qe,et){we(et)})})}).catch(we)});return d($e,ue),$e}function si(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){var we=ue._dbInfo;we.db.transaction(function(Le){po(Le,we,"DELETE FROM "+we.storeName,[],function(){$e()},function(Ze,Qe){Se(Qe)})})}).catch(Se)});return d(re,Y),re}function Tu(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){var we=ue._dbInfo;we.db.transaction(function(Le){po(Le,we,"SELECT COUNT(key) as c FROM "+we.storeName,[],function(Ze,Qe){var et=Qe.rows.item(0).c;$e(et)},function(Ze,Qe){Se(Qe)})})}).catch(Se)});return d(re,Y),re}function Wv(Y,ue){var re=this,$e=new c(function(Se,we){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ze){po(Ze,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Qe,et){var ot=et.rows.length?et.rows.item(0).key:null;Se(ot)},function(Qe,et){we(et)})})}).catch(we)});return d($e,ue),$e}function Zh(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){var we=ue._dbInfo;we.db.transaction(function(Le){po(Le,we,"SELECT key FROM "+we.storeName,[],function(Ze,Qe){for(var et=[],ot=0;ot<Qe.rows.length;ot++)et.push(Qe.rows.item(ot).key);$e(et)},function(Ze,Qe){Se(Qe)})})}).catch(Se)});return d(re,Y),re}function Xh(Y){return new c(function(ue,re){Y.transaction(function($e){$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,we){for(var Le=[],Ze=0;Ze<we.rows.length;Ze++)Le.push(we.rows.item(Ze).name);ue({db:Y,storeNames:Le})},function(Se,we){re(we)})},function($e){re($e)})})}function vo(Y,ue){ue=b.apply(this,arguments);var re=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||re.name,Y.storeName=Y.storeName||re.storeName);var $e=this,Se;return Y.name?Se=new c(function(we){var Le;Y.name===re.name?Le=$e._dbInfo.db:Le=openDatabase(Y.name,"","",0),Y.storeName?we({db:Le,storeNames:[Y.storeName]}):we(Xh(Le))}).then(function(we){return new c(function(Le,Ze){we.db.transaction(function(Qe){function et(gr){return new c(function(ar,qr){Qe.executeSql("DROP TABLE IF EXISTS "+gr,[],function(){ar()},function(Cr,un){qr(un)})})}for(var ot=[],Et=0,Mt=we.storeNames.length;Et<Mt;Et++)ot.push(et(we.storeNames[Et]));c.all(ot).then(function(){Le()}).catch(function(gr){Ze(gr)})},function(Qe){Ze(Qe)})})}):Se=c.reject("Invalid arguments"),d(Se,ue),Se}var Ra={_driver:"webSQLStorage",_initStorage:Gh,_support:ae(),iterate:Na,getItem:Xo,setItem:Yh,removeItem:Bi,clear:si,length:Tu,key:Wv,keys:Zh,dropInstance:vo};function $l(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function _l(Y,ue){var re=Y.name+"/";return Y.storeName!==ue.storeName&&(re+=Y.storeName+"/"),re}function Kv(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function qv(){return!Kv()||localStorage.length>0}function Vv(Y){var ue=this,re={};if(Y)for(var $e in Y)re[$e]=Y[$e];return re.keyPrefix=_l(Y,ue._defaultConfig),qv()?(ue._dbInfo=re,re.serializer=ho,c.resolve()):c.reject()}function Jh(Y){var ue=this,re=ue.ready().then(function(){for(var $e=ue._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var we=localStorage.key(Se);we.indexOf($e)===0&&localStorage.removeItem(we)}});return d(re,Y),re}function Gv(Y,ue){var re=this;Y=w(Y);var $e=re.ready().then(function(){var Se=re._dbInfo,we=localStorage.getItem(Se.keyPrefix+Y);return we&&(we=Se.serializer.deserialize(we)),we});return d($e,ue),$e}function Yv(Y,ue){var re=this,$e=re.ready().then(function(){for(var Se=re._dbInfo,we=Se.keyPrefix,Le=we.length,Ze=localStorage.length,Qe=1,et=0;et<Ze;et++){var ot=localStorage.key(et);if(ot.indexOf(we)===0){var Et=localStorage.getItem(ot);if(Et&&(Et=Se.serializer.deserialize(Et)),Et=Y(Et,ot.substring(Le),Qe++),Et!==void 0)return Et}}});return d($e,ue),$e}function Qh(Y,ue){var re=this,$e=re.ready().then(function(){var Se=re._dbInfo,we;try{we=localStorage.key(Y)}catch{we=null}return we&&(we=we.substring(Se.keyPrefix.length)),we});return d($e,ue),$e}function ed(Y){var ue=this,re=ue.ready().then(function(){for(var $e=ue._dbInfo,Se=localStorage.length,we=[],Le=0;Le<Se;Le++){var Ze=localStorage.key(Le);Ze.indexOf($e.keyPrefix)===0&&we.push(Ze.substring($e.keyPrefix.length))}return we});return d(re,Y),re}function Da(Y){var ue=this,re=ue.keys().then(function($e){return $e.length});return d(re,Y),re}function td(Y,ue){var re=this;Y=w(Y);var $e=re.ready().then(function(){var Se=re._dbInfo;localStorage.removeItem(Se.keyPrefix+Y)});return d($e,ue),$e}function rf(Y,ue,re){var $e=this;Y=w(Y);var Se=$e.ready().then(function(){ue===void 0&&(ue=null);var we=ue;return new c(function(Le,Ze){var Qe=$e._dbInfo;Qe.serializer.serialize(ue,function(et,ot){if(ot)Ze(ot);else try{localStorage.setItem(Qe.keyPrefix+Y,et),Le(we)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ze(Et),Ze(Et)}})})});return d(Se,re),Se}function nf(Y,ue){if(ue=b.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var re=this.config();Y.name=Y.name||re.name,Y.storeName=Y.storeName||re.storeName}var $e=this,Se;return Y.name?Se=new c(function(we){Y.storeName?we(_l(Y,$e._defaultConfig)):we(Y.name+"/")}).then(function(we){for(var Le=localStorage.length-1;Le>=0;Le--){var Ze=localStorage.key(Le);Ze.indexOf(we)===0&&localStorage.removeItem(Ze)}}):Se=c.reject("Invalid arguments"),d(Se,ue),Se}var Iu={_driver:"localStorageWrapper",_initStorage:Vv,_support:$l(),iterate:Yv,getItem:Gv,setItem:rf,removeItem:td,clear:Jh,length:Da,key:Qh,keys:ed,dropInstance:nf},rd=function(ue,re){return ue===re||typeof ue=="number"&&typeof re=="number"&&isNaN(ue)&&isNaN(re)},Au=function(ue,re){for(var $e=ue.length,Se=0;Se<$e;){if(rd(ue[Se],re))return!0;Se++}return!1},Ba=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ls={},sf={},Jo={INDEXEDDB:V,WEBSQL:Ra,LOCALSTORAGE:Iu},nd=[Jo.INDEXEDDB._driver,Jo.WEBSQL._driver,Jo.LOCALSTORAGE._driver],xl=["dropInstance"],Ma=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(xl),id={description:"",driver:nd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Zv(Y,ue){Y[ue]=function(){var re=arguments;return Y.ready().then(function(){return Y[ue].apply(Y,re)})}}function Ou(){for(var Y=1;Y<arguments.length;Y++){var ue=arguments[Y];if(ue)for(var re in ue)ue.hasOwnProperty(re)&&(Ba(ue[re])?arguments[0][re]=ue[re].slice():arguments[0][re]=ue[re])}return arguments[0]}var sd=function(){function Y(ue){o(this,Y);for(var re in Jo)if(Jo.hasOwnProperty(re)){var $e=Jo[re],Se=$e._driver;this[re]=Se,Ls[Se]||this.defineDriver($e)}this._defaultConfig=Ou({},id),this._config=Ou({},this._defaultConfig,ue),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(re){if((typeof re>"u"?"undefined":s(re))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $e in re){if($e==="storeName"&&(re[$e]=re[$e].replace(/\W/g,"_")),$e==="version"&&typeof re[$e]!="number")return new Error("Database version must be a number.");this._config[$e]=re[$e]}return"driver"in re&&re.driver?this.setDriver(this._config.driver):!0}else return typeof re=="string"?this._config[re]:this._config},Y.prototype.defineDriver=function(re,$e,Se){var we=new c(function(Le,Ze){try{var Qe=re._driver,et=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!re._driver){Ze(et);return}for(var ot=Ma.concat("_initStorage"),Et=0,Mt=ot.length;Et<Mt;Et++){var gr=ot[Et],ar=!Au(xl,gr);if((ar||re[gr])&&typeof re[gr]!="function"){Ze(et);return}}var qr=function(){for(var Mi=function(Cu){return function(){var ld=new Error("Method "+Cu+" is not implemented by the current driver"),af=c.reject(ld);return d(af,arguments[arguments.length-1]),af}},El=0,od=xl.length;El<od;El++){var go=xl[El];re[go]||(re[go]=Mi(go))}};qr();var Cr=function(Mi){Ls[Qe]&&console.info("Redefining LocalForage driver: "+Qe),Ls[Qe]=re,sf[Qe]=Mi,Le()};"_support"in re?re._support&&typeof re._support=="function"?re._support().then(Cr,Ze):Cr(!!re._support):Cr(!0)}catch(un){Ze(un)}});return y(we,$e,Se),we},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(re,$e,Se){var we=Ls[re]?c.resolve(Ls[re]):c.reject(new Error("Driver not found."));return y(we,$e,Se),we},Y.prototype.getSerializer=function(re){var $e=c.resolve(ho);return y($e,re),$e},Y.prototype.ready=function(re){var $e=this,Se=$e._driverSet.then(function(){return $e._ready===null&&($e._ready=$e._initDriver()),$e._ready});return y(Se,re,re),Se},Y.prototype.setDriver=function(re,$e,Se){var we=this;Ba(re)||(re=[re]);var Le=this._getSupportedDrivers(re);function Ze(){we._config.driver=we.driver()}function Qe(Et){return we._extend(Et),Ze(),we._ready=we._initStorage(we._config),we._ready}function et(Et){return function(){var Mt=0;function gr(){for(;Mt<Et.length;){var ar=Et[Mt];return Mt++,we._dbInfo=null,we._ready=null,we.getDriver(ar).then(Qe).catch(gr)}Ze();var qr=new Error("No available storage method found.");return we._driverSet=c.reject(qr),we._driverSet}return gr()}}var ot=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=ot.then(function(){var Et=Le[0];return we._dbInfo=null,we._ready=null,we.getDriver(Et).then(function(Mt){we._driver=Mt._driver,Ze(),we._wrapLibraryMethodsWithReady(),we._initDriver=et(Le)})}).catch(function(){Ze();var Et=new Error("No available storage method found.");return we._driverSet=c.reject(Et),we._driverSet}),y(this._driverSet,$e,Se),this._driverSet},Y.prototype.supports=function(re){return!!sf[re]},Y.prototype._extend=function(re){Ou(this,re)},Y.prototype._getSupportedDrivers=function(re){for(var $e=[],Se=0,we=re.length;Se<we;Se++){var Le=re[Se];this.supports(Le)&&$e.push(Le)}return $e},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var re=0,$e=Ma.length;re<$e;re++)Zv(this,Ma[re])},Y.prototype.createInstance=function(re){return new Y(re)},Y}(),of=new sd;n.exports=of},{3:3}]},{},[4])(4)})})(IH);var jue=IH.exports;const dn=no(jue);var Iw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Iw.exports;(function(e,r){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",c=1,d=2,y=4,w=1,b=2,T=1,x=2,A=4,_=8,I=16,O=32,C=64,g=128,R=256,M=512,L=30,W="...",X=800,te=16,J=1,j=2,Z=3,se=1/0,Ee=9007199254740991,me=17976931348623157e292,Pe=0/0,Ue=4294967295,Ge=Ue-1,it=Ue>>>1,_e=[["ary",g],["bind",T],["bindKey",x],["curry",_],["curryRight",I],["flip",M],["partial",O],["partialRight",C],["rearg",R]],pe="[object Arguments]",Te="[object Array]",je="[object AsyncFunction]",$="[object Boolean]",S="[object Date]",N="[object DOMException]",F="[object Error]",z="[object Function]",V="[object GeneratorFunction]",ae="[object Map]",ve="[object Number]",He="[object Null]",ze="[object Object]",st="[object Promise]",wt="[object Proxy]",mt="[object RegExp]",vt="[object Set]",Rt="[object String]",fr="[object Symbol]",Kr="[object Undefined]",ct="[object WeakMap]",It="[object WeakSet]",pn="[object ArrayBuffer]",Ri="[object DataView]",Vi="[object Float32Array]",vn="[object Float64Array]",ds="[object Int8Array]",co="[object Int16Array]",Di="[object Int32Array]",Gi="[object Uint8Array]",fo="[object Uint8ClampedArray]",Qc="[object Uint16Array]",ho="[object Uint32Array]",ef=/\b__p \+= '';/g,Gh=/\b(__p \+=) '' \+/g,po=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xo=/&(?:amp|lt|gt|quot|#39);/g,Na=/[&<>"']/g,tf=RegExp(Xo.source),Yh=RegExp(Na.source),Bi=/<%-([\s\S]+?)%>/g,si=/<%([\s\S]+?)%>/g,Tu=/<%=([\s\S]+?)%>/g,Wv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zh=/^\w*$/,Xh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vo=/[\\^$.*+?()[\]{}|]/g,Ra=RegExp(vo.source),$l=/^\s+/,_l=/\s/,Kv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qv=/\{\n\/\* \[wrapped with (.+)\] \*/,Vv=/,? & /,Jh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gv=/[()=,{}\[\]\/\s]/,Yv=/\\(\\)?/g,Qh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ed=/\w*$/,Da=/^[-+]0x[0-9a-f]+$/i,td=/^0b[01]+$/i,rf=/^\[object .+?Constructor\]$/,nf=/^0o[0-7]+$/i,Iu=/^(?:0|[1-9]\d*)$/,rd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Au=/($^)/,Ba=/['\n\r\u2028\u2029\\]/g,Ls="\\ud800-\\udfff",sf="\\u0300-\\u036f",Jo="\\ufe20-\\ufe2f",nd="\\u20d0-\\u20ff",xl=sf+Jo+nd,Ma="\\u2700-\\u27bf",id="a-z\\xdf-\\xf6\\xf8-\\xff",Zv="\\xac\\xb1\\xd7\\xf7",Ou="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sd="\\u2000-\\u206f",of=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",ue="\\ufe0e\\ufe0f",re=Zv+Ou+sd+of,$e="[']",Se="["+Ls+"]",we="["+re+"]",Le="["+xl+"]",Ze="\\d+",Qe="["+Ma+"]",et="["+id+"]",ot="[^"+Ls+re+Ze+Ma+id+Y+"]",Et="\\ud83c[\\udffb-\\udfff]",Mt="(?:"+Le+"|"+Et+")",gr="[^"+Ls+"]",ar="(?:\\ud83c[\\udde6-\\uddff]){2}",qr="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="["+Y+"]",un="\\u200d",Mi="(?:"+et+"|"+ot+")",El="(?:"+Cr+"|"+ot+")",od="(?:"+$e+"(?:d|ll|m|re|s|t|ve))?",go="(?:"+$e+"(?:D|LL|M|RE|S|T|VE))?",ad=Mt+"?",Cu="["+ue+"]?",ld="(?:"+un+"(?:"+[gr,ar,qr].join("|")+")"+Cu+ad+")*",af="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xv=Cu+ad+ld,Yx="(?:"+[Qe,ar,qr].join("|")+")"+Xv,Zx="(?:"+[gr+Le+"?",Le,ar,qr,Se].join("|")+")",Jv=RegExp($e,"g"),Xx=RegExp(Le,"g"),Qv=RegExp(Et+"(?="+Et+")|"+Zx+Xv,"g"),Jx=RegExp([Cr+"?"+et+"+"+od+"(?="+[we,Cr,"$"].join("|")+")",El+"+"+go+"(?="+[we,Cr+Mi,"$"].join("|")+")",Cr+"?"+Mi+"+"+od,Cr+"+"+go,Gx,af,Ze,Yx].join("|"),"g"),Qx=RegExp("["+un+Ls+xl+ue+"]"),e2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,t2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],r2=-1,jr={};jr[Vi]=jr[vn]=jr[ds]=jr[co]=jr[Di]=jr[Gi]=jr[fo]=jr[Qc]=jr[ho]=!0,jr[pe]=jr[Te]=jr[pn]=jr[$]=jr[Ri]=jr[S]=jr[F]=jr[z]=jr[ae]=jr[ve]=jr[ze]=jr[mt]=jr[vt]=jr[Rt]=jr[ct]=!1;var Pr={};Pr[pe]=Pr[Te]=Pr[pn]=Pr[Ri]=Pr[$]=Pr[S]=Pr[Vi]=Pr[vn]=Pr[ds]=Pr[co]=Pr[Di]=Pr[ae]=Pr[ve]=Pr[ze]=Pr[mt]=Pr[vt]=Pr[Rt]=Pr[fr]=Pr[Gi]=Pr[fo]=Pr[Qc]=Pr[ho]=!0,Pr[F]=Pr[z]=Pr[ct]=!1;var R0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},eg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},D0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},B0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tg=parseFloat,n2=parseInt,M0=typeof Tn=="object"&&Tn&&Tn.Object===Object&&Tn,i2=typeof self=="object"&&self&&self.Object===Object&&self,cn=M0||i2||Function("return this")(),ud=r&&!r.nodeType&&r,Qo=ud&&!0&&e&&!e.nodeType&&e,L0=Qo&&Qo.exports===ud,rg=L0&&M0.process,ps=function(){try{var ee=Qo&&Qo.require&&Qo.require("util").types;return ee||rg&&rg.binding&&rg.binding("util")}catch{}}(),m=ps&&ps.isArrayBuffer,k=ps&&ps.isDate,P=ps&&ps.isMap,B=ps&&ps.isRegExp,H=ps&&ps.isSet,U=ps&&ps.isTypedArray;function q(ee,he,fe){switch(fe.length){case 0:return ee.call(he);case 1:return ee.call(he,fe[0]);case 2:return ee.call(he,fe[0],fe[1]);case 3:return ee.call(he,fe[0],fe[1],fe[2])}return ee.apply(he,fe)}function ce(ee,he,fe,Me){for(var We=-1,$t=ee==null?0:ee.length;++We<$t;){var _t=ee[We];he(Me,_t,fe(_t),ee)}return Me}function ie(ee,he){for(var fe=-1,Me=ee==null?0:ee.length;++fe<Me&&he(ee[fe],fe,ee)!==!1;);return ee}function xe(ee,he){for(var fe=ee==null?0:ee.length;fe--&&he(ee[fe],fe,ee)!==!1;);return ee}function Ce(ee,he){for(var fe=-1,Me=ee==null?0:ee.length;++fe<Me;)if(!he(ee[fe],fe,ee))return!1;return!0}function Be(ee,he){for(var fe=-1,Me=ee==null?0:ee.length,We=0,$t=[];++fe<Me;){var _t=ee[fe];he(_t,fe,ee)&&($t[We++]=_t)}return $t}function Ae(ee,he){var fe=ee==null?0:ee.length;return!!fe&&Mr(ee,he,0)>-1}function Je(ee,he,fe){for(var Me=-1,We=ee==null?0:ee.length;++Me<We;)if(fe(he,ee[Me]))return!0;return!1}function bt(ee,he){for(var fe=-1,Me=ee==null?0:ee.length,We=Array(Me);++fe<Me;)We[fe]=he(ee[fe],fe,ee);return We}function Xt(ee,he){for(var fe=-1,Me=he.length,We=ee.length;++fe<Me;)ee[We+fe]=he[fe];return ee}function Zt(ee,he,fe,Me){var We=-1,$t=ee==null?0:ee.length;for(Me&&$t&&(fe=ee[++We]);++We<$t;)fe=he(fe,ee[We],We,ee);return fe}function Yn(ee,he,fe,Me){var We=ee==null?0:ee.length;for(Me&&We&&(fe=ee[--We]);We--;)fe=he(fe,ee[We],We,ee);return fe}function fn(ee,he){for(var fe=-1,Me=ee==null?0:ee.length;++fe<Me;)if(he(ee[fe],fe,ee))return!0;return!1}var yo=Sl("length");function mo(ee){return ee.split("")}function hr(ee){return ee.match(Jh)||[]}function La(ee,he,fe){var Me;return fe(ee,function(We,$t,_t){if(he(We,$t,_t))return Me=$t,!1}),Me}function dr(ee,he,fe,Me){for(var We=ee.length,$t=fe+(Me?1:-1);Me?$t--:++$t<We;)if(he(ee[$t],$t,ee))return $t;return-1}function Mr(ee,he,fe){return he===he?a2(ee,he,fe):dr(ee,cd,fe)}function lf(ee,he,fe,Me){for(var We=fe-1,$t=ee.length;++We<$t;)if(Me(ee[We],he))return We;return-1}function cd(ee){return ee!==ee}function Fs(ee,he){var fe=ee==null?0:ee.length;return fe?Li(ee,he)/fe:Pe}function Sl(ee){return function(he){return he==null?t:he[ee]}}function vs(ee){return function(he){return ee==null?t:ee[he]}}function ea(ee,he,fe,Me,We){return We(ee,function($t,_t,yt){fe=Me?(Me=!1,$t):he(fe,$t,_t,yt)}),fe}function Fa(ee,he){var fe=ee.length;for(ee.sort(he);fe--;)ee[fe]=ee[fe].value;return ee}function Li(ee,he){for(var fe,Me=-1,We=ee.length;++Me<We;){var $t=he(ee[Me]);$t!==t&&(fe=fe===t?$t:fe+$t)}return fe}function uf(ee,he){for(var fe=-1,Me=Array(ee);++fe<ee;)Me[fe]=he(fe);return Me}function ta(ee,he){return bt(he,function(fe){return[fe,ee[fe]]})}function bo(ee){return ee&&ee.slice(0,j0(ee)+1).replace($l,"")}function Yi(ee){return function(he){return ee(he)}}function ng(ee,he){return bt(he,function(fe){return ee[fe]})}function cf(ee,he){return ee.has(he)}function kr(ee,he){for(var fe=-1,Me=ee.length;++fe<Me&&Mr(he,ee[fe],0)>-1;);return fe}function ff(ee,he){for(var fe=ee.length;fe--&&Mr(he,ee[fe],0)>-1;);return fe}function js(ee,he){for(var fe=ee.length,Me=0;fe--;)ee[fe]===he&&++Me;return Me}var Pu=vs(R0),s2=vs(eg);function o2(ee){return"\\"+B0[ee]}function F0(ee,he){return ee==null?t:ee[he]}function gs(ee){return Qx.test(ee)}function ig(ee){return e2.test(ee)}function ja(ee){for(var he,fe=[];!(he=ee.next()).done;)fe.push(he.value);return fe}function fd(ee){var he=-1,fe=Array(ee.size);return ee.forEach(function(Me,We){fe[++he]=[We,Me]}),fe}function hf(ee,he){return function(fe){return ee(he(fe))}}function zs(ee,he){for(var fe=-1,Me=ee.length,We=0,$t=[];++fe<Me;){var _t=ee[fe];(_t===he||_t===h)&&(ee[fe]=h,$t[We++]=fe)}return $t}function kl(ee){var he=-1,fe=Array(ee.size);return ee.forEach(function(Me){fe[++he]=Me}),fe}function sg(ee){var he=-1,fe=Array(ee.size);return ee.forEach(function(Me){fe[++he]=[Me,Me]}),fe}function a2(ee,he,fe){for(var Me=fe-1,We=ee.length;++Me<We;)if(ee[Me]===he)return Me;return-1}function hd(ee,he,fe){for(var Me=fe+1;Me--;)if(ee[Me]===he)return Me;return Me}function za(ee){return gs(ee)?z0(ee):yo(ee)}function Zi(ee){return gs(ee)?ne(ee):mo(ee)}function j0(ee){for(var he=ee.length;he--&&_l.test(ee.charAt(he)););return he}var og=vs(D0);function z0(ee){for(var he=Qv.lastIndex=0;Qv.test(ee);)++he;return he}function ne(ee){return ee.match(Qv)||[]}function ge(ee){return ee.match(Jx)||[]}var Ie=function ee(he){he=he==null?cn:Oe.defaults(cn.Object(),he,Oe.pick(cn,t2));var fe=he.Array,Me=he.Date,We=he.Error,$t=he.Function,_t=he.Math,yt=he.Object,er=he.RegExp,Dt=he.String,lr=he.TypeError,Zn=fe.prototype,oi=$t.prototype,Xn=yt.prototype,Xi=he["__core-js_shared__"],ra=oi.toString,qt=Xn.hasOwnProperty,Wee=0,DN=function(){var f=/[^.]+$/.exec(Xi&&Xi.keys&&Xi.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),H0=Xn.toString,Kee=ra.call(yt),qee=cn._,Vee=er("^"+ra.call(qt).replace(vo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U0=L0?he.Buffer:t,Nu=he.Symbol,W0=he.Uint8Array,BN=U0?U0.allocUnsafe:t,K0=hf(yt.getPrototypeOf,yt),MN=yt.create,LN=Xn.propertyIsEnumerable,q0=Zn.splice,FN=Nu?Nu.isConcatSpreadable:t,ag=Nu?Nu.iterator:t,df=Nu?Nu.toStringTag:t,V0=function(){try{var f=mf(yt,"defineProperty");return f({},"",{}),f}catch{}}(),Gee=he.clearTimeout!==cn.clearTimeout&&he.clearTimeout,Yee=Me&&Me.now!==cn.Date.now&&Me.now,Zee=he.setTimeout!==cn.setTimeout&&he.setTimeout,G0=_t.ceil,Y0=_t.floor,l2=yt.getOwnPropertySymbols,Xee=U0?U0.isBuffer:t,jN=he.isFinite,Jee=Zn.join,Qee=hf(yt.keys,yt),Jn=_t.max,Fi=_t.min,ete=Me.now,tte=he.parseInt,zN=_t.random,rte=Zn.reverse,u2=mf(he,"DataView"),lg=mf(he,"Map"),c2=mf(he,"Promise"),dd=mf(he,"Set"),ug=mf(he,"WeakMap"),cg=mf(yt,"create"),Z0=ug&&new ug,pd={},nte=bf(u2),ite=bf(lg),ste=bf(c2),ote=bf(dd),ate=bf(ug),X0=Nu?Nu.prototype:t,fg=X0?X0.valueOf:t,HN=X0?X0.toString:t;function G(f){if(gn(f)&&!Jt(f)&&!(f instanceof yr)){if(f instanceof wo)return f;if(qt.call(f,"__wrapped__"))return UR(f)}return new wo(f)}var vd=function(){function f(){}return function(p){if(!hn(p))return{};if(MN)return MN(p);f.prototype=p;var E=new f;return f.prototype=t,E}}();function J0(){}function wo(f,p){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}G.templateSettings={escape:Bi,evaluate:si,interpolate:Tu,variable:"",imports:{_:G}},G.prototype=J0.prototype,G.prototype.constructor=G,wo.prototype=vd(J0.prototype),wo.prototype.constructor=wo;function yr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}function lte(){var f=new yr(this.__wrapped__);return f.__actions__=ys(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=ys(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=ys(this.__views__),f}function ute(){if(this.__filtered__){var f=new yr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function cte(){var f=this.__wrapped__.value(),p=this.__dir__,E=Jt(f),D=p<0,K=E?f.length:0,Q=_re(0,K,this.__views__),oe=Q.start,de=Q.end,ke=de-oe,qe=D?de:oe-1,Ve=this.__iteratees__,Xe=Ve.length,gt=0,At=Fi(ke,this.__takeCount__);if(!E||!D&&K==ke&&At==ke)return hR(f,this.__actions__);var zt=[];e:for(;ke--&&gt<At;){qe+=p;for(var rr=-1,Ht=f[qe];++rr<Xe;){var vr=Ve[rr],mr=vr.iteratee,Ws=vr.type,es=mr(Ht);if(Ws==j)Ht=es;else if(!es){if(Ws==J)continue e;break e}}zt[gt++]=Ht}return zt}yr.prototype=vd(J0.prototype),yr.prototype.constructor=yr;function pf(f){var p=-1,E=f==null?0:f.length;for(this.clear();++p<E;){var D=f[p];this.set(D[0],D[1])}}function fte(){this.__data__=cg?cg(null):{},this.size=0}function hte(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}function dte(f){var p=this.__data__;if(cg){var E=p[f];return E===l?t:E}return qt.call(p,f)?p[f]:t}function pte(f){var p=this.__data__;return cg?p[f]!==t:qt.call(p,f)}function vte(f,p){var E=this.__data__;return this.size+=this.has(f)?0:1,E[f]=cg&&p===t?l:p,this}pf.prototype.clear=fte,pf.prototype.delete=hte,pf.prototype.get=dte,pf.prototype.has=pte,pf.prototype.set=vte;function Tl(f){var p=-1,E=f==null?0:f.length;for(this.clear();++p<E;){var D=f[p];this.set(D[0],D[1])}}function gte(){this.__data__=[],this.size=0}function yte(f){var p=this.__data__,E=Q0(p,f);if(E<0)return!1;var D=p.length-1;return E==D?p.pop():q0.call(p,E,1),--this.size,!0}function mte(f){var p=this.__data__,E=Q0(p,f);return E<0?t:p[E][1]}function bte(f){return Q0(this.__data__,f)>-1}function wte(f,p){var E=this.__data__,D=Q0(E,f);return D<0?(++this.size,E.push([f,p])):E[D][1]=p,this}Tl.prototype.clear=gte,Tl.prototype.delete=yte,Tl.prototype.get=mte,Tl.prototype.has=bte,Tl.prototype.set=wte;function Il(f){var p=-1,E=f==null?0:f.length;for(this.clear();++p<E;){var D=f[p];this.set(D[0],D[1])}}function $te(){this.size=0,this.__data__={hash:new pf,map:new(lg||Tl),string:new pf}}function _te(f){var p=fb(this,f).delete(f);return this.size-=p?1:0,p}function xte(f){return fb(this,f).get(f)}function Ete(f){return fb(this,f).has(f)}function Ste(f,p){var E=fb(this,f),D=E.size;return E.set(f,p),this.size+=E.size==D?0:1,this}Il.prototype.clear=$te,Il.prototype.delete=_te,Il.prototype.get=xte,Il.prototype.has=Ete,Il.prototype.set=Ste;function vf(f){var p=-1,E=f==null?0:f.length;for(this.__data__=new Il;++p<E;)this.add(f[p])}function kte(f){return this.__data__.set(f,l),this}function Tte(f){return this.__data__.has(f)}vf.prototype.add=vf.prototype.push=kte,vf.prototype.has=Tte;function na(f){var p=this.__data__=new Tl(f);this.size=p.size}function Ite(){this.__data__=new Tl,this.size=0}function Ate(f){var p=this.__data__,E=p.delete(f);return this.size=p.size,E}function Ote(f){return this.__data__.get(f)}function Cte(f){return this.__data__.has(f)}function Pte(f,p){var E=this.__data__;if(E instanceof Tl){var D=E.__data__;if(!lg||D.length<i-1)return D.push([f,p]),this.size=++E.size,this;E=this.__data__=new Il(D)}return E.set(f,p),this.size=E.size,this}na.prototype.clear=Ite,na.prototype.delete=Ate,na.prototype.get=Ote,na.prototype.has=Cte,na.prototype.set=Pte;function UN(f,p){var E=Jt(f),D=!E&&wf(f),K=!E&&!D&&Lu(f),Q=!E&&!D&&!K&&bd(f),oe=E||D||K||Q,de=oe?uf(f.length,Dt):[],ke=de.length;for(var qe in f)(p||qt.call(f,qe))&&!(oe&&(qe=="length"||K&&(qe=="offset"||qe=="parent")||Q&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||Pl(qe,ke)))&&de.push(qe);return de}function WN(f){var p=f.length;return p?f[$2(0,p-1)]:t}function Nte(f,p){return hb(ys(f),gf(p,0,f.length))}function Rte(f){return hb(ys(f))}function f2(f,p,E){(E!==t&&!ia(f[p],E)||E===t&&!(p in f))&&Al(f,p,E)}function hg(f,p,E){var D=f[p];(!(qt.call(f,p)&&ia(D,E))||E===t&&!(p in f))&&Al(f,p,E)}function Q0(f,p){for(var E=f.length;E--;)if(ia(f[E][0],p))return E;return-1}function Dte(f,p,E,D){return Ru(f,function(K,Q,oe){p(D,K,E(K),oe)}),D}function KN(f,p){return f&&Ua(p,ai(p),f)}function Bte(f,p){return f&&Ua(p,bs(p),f)}function Al(f,p,E){p=="__proto__"&&V0?V0(f,p,{configurable:!0,enumerable:!0,value:E,writable:!0}):f[p]=E}function h2(f,p){for(var E=-1,D=p.length,K=fe(D),Q=f==null;++E<D;)K[E]=Q?t:q2(f,p[E]);return K}function gf(f,p,E){return f===f&&(E!==t&&(f=f<=E?f:E),p!==t&&(f=f>=p?f:p)),f}function $o(f,p,E,D,K,Q){var oe,de=p&c,ke=p&d,qe=p&y;if(E&&(oe=K?E(f,D,K,Q):E(f)),oe!==t)return oe;if(!hn(f))return f;var Ve=Jt(f);if(Ve){if(oe=Ere(f),!de)return ys(f,oe)}else{var Xe=ji(f),gt=Xe==z||Xe==V;if(Lu(f))return vR(f,de);if(Xe==ze||Xe==pe||gt&&!K){if(oe=ke||gt?{}:RR(f),!de)return ke?dre(f,Bte(oe,f)):hre(f,KN(oe,f))}else{if(!Pr[Xe])return K?f:{};oe=Sre(f,Xe,de)}}Q||(Q=new na);var At=Q.get(f);if(At)return At;Q.set(f,oe),uD(f)?f.forEach(function(Ht){oe.add($o(Ht,p,E,Ht,f,Q))}):aD(f)&&f.forEach(function(Ht,vr){oe.set(vr,$o(Ht,p,E,vr,f,Q))});var zt=qe?ke?P2:C2:ke?bs:ai,rr=Ve?t:zt(f);return ie(rr||f,function(Ht,vr){rr&&(vr=Ht,Ht=f[vr]),hg(oe,vr,$o(Ht,p,E,vr,f,Q))}),oe}function Mte(f){var p=ai(f);return function(E){return qN(E,f,p)}}function qN(f,p,E){var D=E.length;if(f==null)return!D;for(f=yt(f);D--;){var K=E[D],Q=p[K],oe=f[K];if(oe===t&&!(K in f)||!Q(oe))return!1}return!0}function VN(f,p,E){if(typeof f!="function")throw new lr(o);return bg(function(){f.apply(t,E)},p)}function dg(f,p,E,D){var K=-1,Q=Ae,oe=!0,de=f.length,ke=[],qe=p.length;if(!de)return ke;E&&(p=bt(p,Yi(E))),D?(Q=Je,oe=!1):p.length>=i&&(Q=cf,oe=!1,p=new vf(p));e:for(;++K<de;){var Ve=f[K],Xe=E==null?Ve:E(Ve);if(Ve=D||Ve!==0?Ve:0,oe&&Xe===Xe){for(var gt=qe;gt--;)if(p[gt]===Xe)continue e;ke.push(Ve)}else Q(p,Xe,D)||ke.push(Ve)}return ke}var Ru=wR(Ha),GN=wR(p2,!0);function Lte(f,p){var E=!0;return Ru(f,function(D,K,Q){return E=!!p(D,K,Q),E}),E}function eb(f,p,E){for(var D=-1,K=f.length;++D<K;){var Q=f[D],oe=p(Q);if(oe!=null&&(de===t?oe===oe&&!Us(oe):E(oe,de)))var de=oe,ke=Q}return ke}function Fte(f,p,E,D){var K=f.length;for(E=tr(E),E<0&&(E=-E>K?0:K+E),D=D===t||D>K?K:tr(D),D<0&&(D+=K),D=E>D?0:fD(D);E<D;)f[E++]=p;return f}function YN(f,p){var E=[];return Ru(f,function(D,K,Q){p(D,K,Q)&&E.push(D)}),E}function Ei(f,p,E,D,K){var Q=-1,oe=f.length;for(E||(E=Tre),K||(K=[]);++Q<oe;){var de=f[Q];p>0&&E(de)?p>1?Ei(de,p-1,E,D,K):Xt(K,de):D||(K[K.length]=de)}return K}var d2=$R(),ZN=$R(!0);function Ha(f,p){return f&&d2(f,p,ai)}function p2(f,p){return f&&ZN(f,p,ai)}function tb(f,p){return Be(p,function(E){return Nl(f[E])})}function yf(f,p){p=Bu(p,f);for(var E=0,D=p.length;f!=null&&E<D;)f=f[Wa(p[E++])];return E&&E==D?f:t}function XN(f,p,E){var D=p(f);return Jt(f)?D:Xt(D,E(f))}function Ji(f){return f==null?f===t?Kr:He:df&&df in yt(f)?$re(f):Rre(f)}function v2(f,p){return f>p}function jte(f,p){return f!=null&&qt.call(f,p)}function zte(f,p){return f!=null&&p in yt(f)}function Hte(f,p,E){return f>=Fi(p,E)&&f<Jn(p,E)}function g2(f,p,E){for(var D=E?Je:Ae,K=f[0].length,Q=f.length,oe=Q,de=fe(Q),ke=1/0,qe=[];oe--;){var Ve=f[oe];oe&&p&&(Ve=bt(Ve,Yi(p))),ke=Fi(Ve.length,ke),de[oe]=!E&&(p||K>=120&&Ve.length>=120)?new vf(oe&&Ve):t}Ve=f[0];var Xe=-1,gt=de[0];e:for(;++Xe<K&&qe.length<ke;){var At=Ve[Xe],zt=p?p(At):At;if(At=E||At!==0?At:0,!(gt?cf(gt,zt):D(qe,zt,E))){for(oe=Q;--oe;){var rr=de[oe];if(!(rr?cf(rr,zt):D(f[oe],zt,E)))continue e}gt&&gt.push(zt),qe.push(At)}}return qe}function Ute(f,p,E,D){return Ha(f,function(K,Q,oe){p(D,E(K),Q,oe)}),D}function pg(f,p,E){p=Bu(p,f),f=LR(f,p);var D=f==null?f:f[Wa(xo(p))];return D==null?t:q(D,f,E)}function JN(f){return gn(f)&&Ji(f)==pe}function Wte(f){return gn(f)&&Ji(f)==pn}function Kte(f){return gn(f)&&Ji(f)==S}function vg(f,p,E,D,K){return f===p?!0:f==null||p==null||!gn(f)&&!gn(p)?f!==f&&p!==p:qte(f,p,E,D,vg,K)}function qte(f,p,E,D,K,Q){var oe=Jt(f),de=Jt(p),ke=oe?Te:ji(f),qe=de?Te:ji(p);ke=ke==pe?ze:ke,qe=qe==pe?ze:qe;var Ve=ke==ze,Xe=qe==ze,gt=ke==qe;if(gt&&Lu(f)){if(!Lu(p))return!1;oe=!0,Ve=!1}if(gt&&!Ve)return Q||(Q=new na),oe||bd(f)?CR(f,p,E,D,K,Q):bre(f,p,ke,E,D,K,Q);if(!(E&w)){var At=Ve&&qt.call(f,"__wrapped__"),zt=Xe&&qt.call(p,"__wrapped__");if(At||zt){var rr=At?f.value():f,Ht=zt?p.value():p;return Q||(Q=new na),K(rr,Ht,E,D,Q)}}return gt?(Q||(Q=new na),wre(f,p,E,D,K,Q)):!1}function Vte(f){return gn(f)&&ji(f)==ae}function y2(f,p,E,D){var K=E.length,Q=K,oe=!D;if(f==null)return!Q;for(f=yt(f);K--;){var de=E[K];if(oe&&de[2]?de[1]!==f[de[0]]:!(de[0]in f))return!1}for(;++K<Q;){de=E[K];var ke=de[0],qe=f[ke],Ve=de[1];if(oe&&de[2]){if(qe===t&&!(ke in f))return!1}else{var Xe=new na;if(D)var gt=D(qe,Ve,ke,f,p,Xe);if(!(gt===t?vg(Ve,qe,w|b,D,Xe):gt))return!1}}return!0}function QN(f){if(!hn(f)||Are(f))return!1;var p=Nl(f)?Vee:rf;return p.test(bf(f))}function Gte(f){return gn(f)&&Ji(f)==mt}function Yte(f){return gn(f)&&ji(f)==vt}function Zte(f){return gn(f)&&mb(f.length)&&!!jr[Ji(f)]}function eR(f){return typeof f=="function"?f:f==null?ws:typeof f=="object"?Jt(f)?nR(f[0],f[1]):rR(f):_D(f)}function m2(f){if(!mg(f))return Qee(f);var p=[];for(var E in yt(f))qt.call(f,E)&&E!="constructor"&&p.push(E);return p}function Xte(f){if(!hn(f))return Nre(f);var p=mg(f),E=[];for(var D in f)D=="constructor"&&(p||!qt.call(f,D))||E.push(D);return E}function b2(f,p){return f<p}function tR(f,p){var E=-1,D=ms(f)?fe(f.length):[];return Ru(f,function(K,Q,oe){D[++E]=p(K,Q,oe)}),D}function rR(f){var p=R2(f);return p.length==1&&p[0][2]?BR(p[0][0],p[0][1]):function(E){return E===f||y2(E,f,p)}}function nR(f,p){return B2(f)&&DR(p)?BR(Wa(f),p):function(E){var D=q2(E,f);return D===t&&D===p?V2(E,f):vg(p,D,w|b)}}function rb(f,p,E,D,K){f!==p&&d2(p,function(Q,oe){if(K||(K=new na),hn(Q))Jte(f,p,oe,E,rb,D,K);else{var de=D?D(L2(f,oe),Q,oe+"",f,p,K):t;de===t&&(de=Q),f2(f,oe,de)}},bs)}function Jte(f,p,E,D,K,Q,oe){var de=L2(f,E),ke=L2(p,E),qe=oe.get(ke);if(qe){f2(f,E,qe);return}var Ve=Q?Q(de,ke,E+"",f,p,oe):t,Xe=Ve===t;if(Xe){var gt=Jt(ke),At=!gt&&Lu(ke),zt=!gt&&!At&&bd(ke);Ve=ke,gt||At||zt?Jt(de)?Ve=de:xn(de)?Ve=ys(de):At?(Xe=!1,Ve=vR(ke,!0)):zt?(Xe=!1,Ve=gR(ke,!0)):Ve=[]:wg(ke)||wf(ke)?(Ve=de,wf(de)?Ve=hD(de):(!hn(de)||Nl(de))&&(Ve=RR(ke))):Xe=!1}Xe&&(oe.set(ke,Ve),K(Ve,ke,D,Q,oe),oe.delete(ke)),f2(f,E,Ve)}function iR(f,p){var E=f.length;if(E)return p+=p<0?E:0,Pl(p,E)?f[p]:t}function sR(f,p,E){p.length?p=bt(p,function(Q){return Jt(Q)?function(oe){return yf(oe,Q.length===1?Q[0]:Q)}:Q}):p=[ws];var D=-1;p=bt(p,Yi(Lt()));var K=tR(f,function(Q,oe,de){var ke=bt(p,function(qe){return qe(Q)});return{criteria:ke,index:++D,value:Q}});return Fa(K,function(Q,oe){return fre(Q,oe,E)})}function Qte(f,p){return oR(f,p,function(E,D){return V2(f,D)})}function oR(f,p,E){for(var D=-1,K=p.length,Q={};++D<K;){var oe=p[D],de=yf(f,oe);E(de,oe)&&gg(Q,Bu(oe,f),de)}return Q}function ere(f){return function(p){return yf(p,f)}}function w2(f,p,E,D){var K=D?lf:Mr,Q=-1,oe=p.length,de=f;for(f===p&&(p=ys(p)),E&&(de=bt(f,Yi(E)));++Q<oe;)for(var ke=0,qe=p[Q],Ve=E?E(qe):qe;(ke=K(de,Ve,ke,D))>-1;)de!==f&&q0.call(de,ke,1),q0.call(f,ke,1);return f}function aR(f,p){for(var E=f?p.length:0,D=E-1;E--;){var K=p[E];if(E==D||K!==Q){var Q=K;Pl(K)?q0.call(f,K,1):E2(f,K)}}return f}function $2(f,p){return f+Y0(zN()*(p-f+1))}function tre(f,p,E,D){for(var K=-1,Q=Jn(G0((p-f)/(E||1)),0),oe=fe(Q);Q--;)oe[D?Q:++K]=f,f+=E;return oe}function _2(f,p){var E="";if(!f||p<1||p>Ee)return E;do p%2&&(E+=f),p=Y0(p/2),p&&(f+=f);while(p);return E}function ur(f,p){return F2(MR(f,p,ws),f+"")}function rre(f){return WN(wd(f))}function nre(f,p){var E=wd(f);return hb(E,gf(p,0,E.length))}function gg(f,p,E,D){if(!hn(f))return f;p=Bu(p,f);for(var K=-1,Q=p.length,oe=Q-1,de=f;de!=null&&++K<Q;){var ke=Wa(p[K]),qe=E;if(ke==="__proto__"||ke==="constructor"||ke==="prototype")return f;if(K!=oe){var Ve=de[ke];qe=D?D(Ve,ke,de):t,qe===t&&(qe=hn(Ve)?Ve:Pl(p[K+1])?[]:{})}hg(de,ke,qe),de=de[ke]}return f}var lR=Z0?function(f,p){return Z0.set(f,p),f}:ws,ire=V0?function(f,p){return V0(f,"toString",{configurable:!0,enumerable:!1,value:Y2(p),writable:!0})}:ws;function sre(f){return hb(wd(f))}function _o(f,p,E){var D=-1,K=f.length;p<0&&(p=-p>K?0:K+p),E=E>K?K:E,E<0&&(E+=K),K=p>E?0:E-p>>>0,p>>>=0;for(var Q=fe(K);++D<K;)Q[D]=f[D+p];return Q}function ore(f,p){var E;return Ru(f,function(D,K,Q){return E=p(D,K,Q),!E}),!!E}function nb(f,p,E){var D=0,K=f==null?D:f.length;if(typeof p=="number"&&p===p&&K<=it){for(;D<K;){var Q=D+K>>>1,oe=f[Q];oe!==null&&!Us(oe)&&(E?oe<=p:oe<p)?D=Q+1:K=Q}return K}return x2(f,p,ws,E)}function x2(f,p,E,D){var K=0,Q=f==null?0:f.length;if(Q===0)return 0;p=E(p);for(var oe=p!==p,de=p===null,ke=Us(p),qe=p===t;K<Q;){var Ve=Y0((K+Q)/2),Xe=E(f[Ve]),gt=Xe!==t,At=Xe===null,zt=Xe===Xe,rr=Us(Xe);if(oe)var Ht=D||zt;else qe?Ht=zt&&(D||gt):de?Ht=zt&&gt&&(D||!At):ke?Ht=zt&&gt&&!At&&(D||!rr):At||rr?Ht=!1:Ht=D?Xe<=p:Xe<p;Ht?K=Ve+1:Q=Ve}return Fi(Q,Ge)}function uR(f,p){for(var E=-1,D=f.length,K=0,Q=[];++E<D;){var oe=f[E],de=p?p(oe):oe;if(!E||!ia(de,ke)){var ke=de;Q[K++]=oe===0?0:oe}}return Q}function cR(f){return typeof f=="number"?f:Us(f)?Pe:+f}function Hs(f){if(typeof f=="string")return f;if(Jt(f))return bt(f,Hs)+"";if(Us(f))return HN?HN.call(f):"";var p=f+"";return p=="0"&&1/f==-se?"-0":p}function Du(f,p,E){var D=-1,K=Ae,Q=f.length,oe=!0,de=[],ke=de;if(E)oe=!1,K=Je;else if(Q>=i){var qe=p?null:yre(f);if(qe)return kl(qe);oe=!1,K=cf,ke=new vf}else ke=p?[]:de;e:for(;++D<Q;){var Ve=f[D],Xe=p?p(Ve):Ve;if(Ve=E||Ve!==0?Ve:0,oe&&Xe===Xe){for(var gt=ke.length;gt--;)if(ke[gt]===Xe)continue e;p&&ke.push(Xe),de.push(Ve)}else K(ke,Xe,E)||(ke!==de&&ke.push(Xe),de.push(Ve))}return de}function E2(f,p){return p=Bu(p,f),f=LR(f,p),f==null||delete f[Wa(xo(p))]}function fR(f,p,E,D){return gg(f,p,E(yf(f,p)),D)}function ib(f,p,E,D){for(var K=f.length,Q=D?K:-1;(D?Q--:++Q<K)&&p(f[Q],Q,f););return E?_o(f,D?0:Q,D?Q+1:K):_o(f,D?Q+1:0,D?K:Q)}function hR(f,p){var E=f;return E instanceof yr&&(E=E.value()),Zt(p,function(D,K){return K.func.apply(K.thisArg,Xt([D],K.args))},E)}function S2(f,p,E){var D=f.length;if(D<2)return D?Du(f[0]):[];for(var K=-1,Q=fe(D);++K<D;)for(var oe=f[K],de=-1;++de<D;)de!=K&&(Q[K]=dg(Q[K]||oe,f[de],p,E));return Du(Ei(Q,1),p,E)}function dR(f,p,E){for(var D=-1,K=f.length,Q=p.length,oe={};++D<K;){var de=D<Q?p[D]:t;E(oe,f[D],de)}return oe}function k2(f){return xn(f)?f:[]}function T2(f){return typeof f=="function"?f:ws}function Bu(f,p){return Jt(f)?f:B2(f,p)?[f]:HR(Nr(f))}var are=ur;function Mu(f,p,E){var D=f.length;return E=E===t?D:E,!p&&E>=D?f:_o(f,p,E)}var pR=Gee||function(f){return cn.clearTimeout(f)};function vR(f,p){if(p)return f.slice();var E=f.length,D=BN?BN(E):new f.constructor(E);return f.copy(D),D}function I2(f){var p=new f.constructor(f.byteLength);return new W0(p).set(new W0(f)),p}function lre(f,p){var E=p?I2(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.byteLength)}function ure(f){var p=new f.constructor(f.source,ed.exec(f));return p.lastIndex=f.lastIndex,p}function cre(f){return fg?yt(fg.call(f)):{}}function gR(f,p){var E=p?I2(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.length)}function yR(f,p){if(f!==p){var E=f!==t,D=f===null,K=f===f,Q=Us(f),oe=p!==t,de=p===null,ke=p===p,qe=Us(p);if(!de&&!qe&&!Q&&f>p||Q&&oe&&ke&&!de&&!qe||D&&oe&&ke||!E&&ke||!K)return 1;if(!D&&!Q&&!qe&&f<p||qe&&E&&K&&!D&&!Q||de&&E&&K||!oe&&K||!ke)return-1}return 0}function fre(f,p,E){for(var D=-1,K=f.criteria,Q=p.criteria,oe=K.length,de=E.length;++D<oe;){var ke=yR(K[D],Q[D]);if(ke){if(D>=de)return ke;var qe=E[D];return ke*(qe=="desc"?-1:1)}}return f.index-p.index}function mR(f,p,E,D){for(var K=-1,Q=f.length,oe=E.length,de=-1,ke=p.length,qe=Jn(Q-oe,0),Ve=fe(ke+qe),Xe=!D;++de<ke;)Ve[de]=p[de];for(;++K<oe;)(Xe||K<Q)&&(Ve[E[K]]=f[K]);for(;qe--;)Ve[de++]=f[K++];return Ve}function bR(f,p,E,D){for(var K=-1,Q=f.length,oe=-1,de=E.length,ke=-1,qe=p.length,Ve=Jn(Q-de,0),Xe=fe(Ve+qe),gt=!D;++K<Ve;)Xe[K]=f[K];for(var At=K;++ke<qe;)Xe[At+ke]=p[ke];for(;++oe<de;)(gt||K<Q)&&(Xe[At+E[oe]]=f[K++]);return Xe}function ys(f,p){var E=-1,D=f.length;for(p||(p=fe(D));++E<D;)p[E]=f[E];return p}function Ua(f,p,E,D){var K=!E;E||(E={});for(var Q=-1,oe=p.length;++Q<oe;){var de=p[Q],ke=D?D(E[de],f[de],de,E,f):t;ke===t&&(ke=f[de]),K?Al(E,de,ke):hg(E,de,ke)}return E}function hre(f,p){return Ua(f,D2(f),p)}function dre(f,p){return Ua(f,PR(f),p)}function sb(f,p){return function(E,D){var K=Jt(E)?ce:Dte,Q=p?p():{};return K(E,f,Lt(D,2),Q)}}function gd(f){return ur(function(p,E){var D=-1,K=E.length,Q=K>1?E[K-1]:t,oe=K>2?E[2]:t;for(Q=f.length>3&&typeof Q=="function"?(K--,Q):t,oe&&Qi(E[0],E[1],oe)&&(Q=K<3?t:Q,K=1),p=yt(p);++D<K;){var de=E[D];de&&f(p,de,D,Q)}return p})}function wR(f,p){return function(E,D){if(E==null)return E;if(!ms(E))return f(E,D);for(var K=E.length,Q=p?K:-1,oe=yt(E);(p?Q--:++Q<K)&&D(oe[Q],Q,oe)!==!1;);return E}}function $R(f){return function(p,E,D){for(var K=-1,Q=yt(p),oe=D(p),de=oe.length;de--;){var ke=oe[f?de:++K];if(E(Q[ke],ke,Q)===!1)break}return p}}function pre(f,p,E){var D=p&T,K=yg(f);function Q(){var oe=this&&this!==cn&&this instanceof Q?K:f;return oe.apply(D?E:this,arguments)}return Q}function _R(f){return function(p){p=Nr(p);var E=gs(p)?Zi(p):t,D=E?E[0]:p.charAt(0),K=E?Mu(E,1).join(""):p.slice(1);return D[f]()+K}}function yd(f){return function(p){return Zt(wD(bD(p).replace(Jv,"")),f,"")}}function yg(f){return function(){var p=arguments;switch(p.length){case 0:return new f;case 1:return new f(p[0]);case 2:return new f(p[0],p[1]);case 3:return new f(p[0],p[1],p[2]);case 4:return new f(p[0],p[1],p[2],p[3]);case 5:return new f(p[0],p[1],p[2],p[3],p[4]);case 6:return new f(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new f(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var E=vd(f.prototype),D=f.apply(E,p);return hn(D)?D:E}}function vre(f,p,E){var D=yg(f);function K(){for(var Q=arguments.length,oe=fe(Q),de=Q,ke=md(K);de--;)oe[de]=arguments[de];var qe=Q<3&&oe[0]!==ke&&oe[Q-1]!==ke?[]:zs(oe,ke);if(Q-=qe.length,Q<E)return TR(f,p,ob,K.placeholder,t,oe,qe,t,t,E-Q);var Ve=this&&this!==cn&&this instanceof K?D:f;return q(Ve,this,oe)}return K}function xR(f){return function(p,E,D){var K=yt(p);if(!ms(p)){var Q=Lt(E,3);p=ai(p),E=function(de){return Q(K[de],de,K)}}var oe=f(p,E,D);return oe>-1?K[Q?p[oe]:oe]:t}}function ER(f){return Cl(function(p){var E=p.length,D=E,K=wo.prototype.thru;for(f&&p.reverse();D--;){var Q=p[D];if(typeof Q!="function")throw new lr(o);if(K&&!oe&&cb(Q)=="wrapper")var oe=new wo([],!0)}for(D=oe?D:E;++D<E;){Q=p[D];var de=cb(Q),ke=de=="wrapper"?N2(Q):t;ke&&M2(ke[0])&&ke[1]==(g|_|O|R)&&!ke[4].length&&ke[9]==1?oe=oe[cb(ke[0])].apply(oe,ke[3]):oe=Q.length==1&&M2(Q)?oe[de]():oe.thru(Q)}return function(){var qe=arguments,Ve=qe[0];if(oe&&qe.length==1&&Jt(Ve))return oe.plant(Ve).value();for(var Xe=0,gt=E?p[Xe].apply(this,qe):Ve;++Xe<E;)gt=p[Xe].call(this,gt);return gt}})}function ob(f,p,E,D,K,Q,oe,de,ke,qe){var Ve=p&g,Xe=p&T,gt=p&x,At=p&(_|I),zt=p&M,rr=gt?t:yg(f);function Ht(){for(var vr=arguments.length,mr=fe(vr),Ws=vr;Ws--;)mr[Ws]=arguments[Ws];if(At)var es=md(Ht),Ks=js(mr,es);if(D&&(mr=mR(mr,D,K,At)),Q&&(mr=bR(mr,Q,oe,At)),vr-=Ks,At&&vr<qe){var En=zs(mr,es);return TR(f,p,ob,Ht.placeholder,E,mr,En,de,ke,qe-vr)}var sa=Xe?E:this,Dl=gt?sa[f]:f;return vr=mr.length,de?mr=Dre(mr,de):zt&&vr>1&&mr.reverse(),Ve&&ke<vr&&(mr.length=ke),this&&this!==cn&&this instanceof Ht&&(Dl=rr||yg(Dl)),Dl.apply(sa,mr)}return Ht}function SR(f,p){return function(E,D){return Ute(E,f,p(D),{})}}function ab(f,p){return function(E,D){var K;if(E===t&&D===t)return p;if(E!==t&&(K=E),D!==t){if(K===t)return D;typeof E=="string"||typeof D=="string"?(E=Hs(E),D=Hs(D)):(E=cR(E),D=cR(D)),K=f(E,D)}return K}}function A2(f){return Cl(function(p){return p=bt(p,Yi(Lt())),ur(function(E){var D=this;return f(p,function(K){return q(K,D,E)})})})}function lb(f,p){p=p===t?" ":Hs(p);var E=p.length;if(E<2)return E?_2(p,f):p;var D=_2(p,G0(f/za(p)));return gs(p)?Mu(Zi(D),0,f).join(""):D.slice(0,f)}function gre(f,p,E,D){var K=p&T,Q=yg(f);function oe(){for(var de=-1,ke=arguments.length,qe=-1,Ve=D.length,Xe=fe(Ve+ke),gt=this&&this!==cn&&this instanceof oe?Q:f;++qe<Ve;)Xe[qe]=D[qe];for(;ke--;)Xe[qe++]=arguments[++de];return q(gt,K?E:this,Xe)}return oe}function kR(f){return function(p,E,D){return D&&typeof D!="number"&&Qi(p,E,D)&&(E=D=t),p=Rl(p),E===t?(E=p,p=0):E=Rl(E),D=D===t?p<E?1:-1:Rl(D),tre(p,E,D,f)}}function ub(f){return function(p,E){return typeof p=="string"&&typeof E=="string"||(p=Eo(p),E=Eo(E)),f(p,E)}}function TR(f,p,E,D,K,Q,oe,de,ke,qe){var Ve=p&_,Xe=Ve?oe:t,gt=Ve?t:oe,At=Ve?Q:t,zt=Ve?t:Q;p|=Ve?O:C,p&=~(Ve?C:O),p&A||(p&=~(T|x));var rr=[f,p,K,At,Xe,zt,gt,de,ke,qe],Ht=E.apply(t,rr);return M2(f)&&FR(Ht,rr),Ht.placeholder=D,jR(Ht,f,p)}function O2(f){var p=_t[f];return function(E,D){if(E=Eo(E),D=D==null?0:Fi(tr(D),292),D&&jN(E)){var K=(Nr(E)+"e").split("e"),Q=p(K[0]+"e"+(+K[1]+D));return K=(Nr(Q)+"e").split("e"),+(K[0]+"e"+(+K[1]-D))}return p(E)}}var yre=dd&&1/kl(new dd([,-0]))[1]==se?function(f){return new dd(f)}:J2;function IR(f){return function(p){var E=ji(p);return E==ae?fd(p):E==vt?sg(p):ta(p,f(p))}}function Ol(f,p,E,D,K,Q,oe,de){var ke=p&x;if(!ke&&typeof f!="function")throw new lr(o);var qe=D?D.length:0;if(qe||(p&=~(O|C),D=K=t),oe=oe===t?oe:Jn(tr(oe),0),de=de===t?de:tr(de),qe-=K?K.length:0,p&C){var Ve=D,Xe=K;D=K=t}var gt=ke?t:N2(f),At=[f,p,E,D,K,Ve,Xe,Q,oe,de];if(gt&&Pre(At,gt),f=At[0],p=At[1],E=At[2],D=At[3],K=At[4],de=At[9]=At[9]===t?ke?0:f.length:Jn(At[9]-qe,0),!de&&p&(_|I)&&(p&=~(_|I)),!p||p==T)var zt=pre(f,p,E);else p==_||p==I?zt=vre(f,p,de):(p==O||p==(T|O))&&!K.length?zt=gre(f,p,E,D):zt=ob.apply(t,At);var rr=gt?lR:FR;return jR(rr(zt,At),f,p)}function AR(f,p,E,D){return f===t||ia(f,Xn[E])&&!qt.call(D,E)?p:f}function OR(f,p,E,D,K,Q){return hn(f)&&hn(p)&&(Q.set(p,f),rb(f,p,t,OR,Q),Q.delete(p)),f}function mre(f){return wg(f)?t:f}function CR(f,p,E,D,K,Q){var oe=E&w,de=f.length,ke=p.length;if(de!=ke&&!(oe&&ke>de))return!1;var qe=Q.get(f),Ve=Q.get(p);if(qe&&Ve)return qe==p&&Ve==f;var Xe=-1,gt=!0,At=E&b?new vf:t;for(Q.set(f,p),Q.set(p,f);++Xe<de;){var zt=f[Xe],rr=p[Xe];if(D)var Ht=oe?D(rr,zt,Xe,p,f,Q):D(zt,rr,Xe,f,p,Q);if(Ht!==t){if(Ht)continue;gt=!1;break}if(At){if(!fn(p,function(vr,mr){if(!cf(At,mr)&&(zt===vr||K(zt,vr,E,D,Q)))return At.push(mr)})){gt=!1;break}}else if(!(zt===rr||K(zt,rr,E,D,Q))){gt=!1;break}}return Q.delete(f),Q.delete(p),gt}function bre(f,p,E,D,K,Q,oe){switch(E){case Ri:if(f.byteLength!=p.byteLength||f.byteOffset!=p.byteOffset)return!1;f=f.buffer,p=p.buffer;case pn:return!(f.byteLength!=p.byteLength||!Q(new W0(f),new W0(p)));case $:case S:case ve:return ia(+f,+p);case F:return f.name==p.name&&f.message==p.message;case mt:case Rt:return f==p+"";case ae:var de=fd;case vt:var ke=D&w;if(de||(de=kl),f.size!=p.size&&!ke)return!1;var qe=oe.get(f);if(qe)return qe==p;D|=b,oe.set(f,p);var Ve=CR(de(f),de(p),D,K,Q,oe);return oe.delete(f),Ve;case fr:if(fg)return fg.call(f)==fg.call(p)}return!1}function wre(f,p,E,D,K,Q){var oe=E&w,de=C2(f),ke=de.length,qe=C2(p),Ve=qe.length;if(ke!=Ve&&!oe)return!1;for(var Xe=ke;Xe--;){var gt=de[Xe];if(!(oe?gt in p:qt.call(p,gt)))return!1}var At=Q.get(f),zt=Q.get(p);if(At&&zt)return At==p&&zt==f;var rr=!0;Q.set(f,p),Q.set(p,f);for(var Ht=oe;++Xe<ke;){gt=de[Xe];var vr=f[gt],mr=p[gt];if(D)var Ws=oe?D(mr,vr,gt,p,f,Q):D(vr,mr,gt,f,p,Q);if(!(Ws===t?vr===mr||K(vr,mr,E,D,Q):Ws)){rr=!1;break}Ht||(Ht=gt=="constructor")}if(rr&&!Ht){var es=f.constructor,Ks=p.constructor;es!=Ks&&"constructor"in f&&"constructor"in p&&!(typeof es=="function"&&es instanceof es&&typeof Ks=="function"&&Ks instanceof Ks)&&(rr=!1)}return Q.delete(f),Q.delete(p),rr}function Cl(f){return F2(MR(f,t,qR),f+"")}function C2(f){return XN(f,ai,D2)}function P2(f){return XN(f,bs,PR)}var N2=Z0?function(f){return Z0.get(f)}:J2;function cb(f){for(var p=f.name+"",E=pd[p],D=qt.call(pd,p)?E.length:0;D--;){var K=E[D],Q=K.func;if(Q==null||Q==f)return K.name}return p}function md(f){var p=qt.call(G,"placeholder")?G:f;return p.placeholder}function Lt(){var f=G.iteratee||Z2;return f=f===Z2?eR:f,arguments.length?f(arguments[0],arguments[1]):f}function fb(f,p){var E=f.__data__;return Ire(p)?E[typeof p=="string"?"string":"hash"]:E.map}function R2(f){for(var p=ai(f),E=p.length;E--;){var D=p[E],K=f[D];p[E]=[D,K,DR(K)]}return p}function mf(f,p){var E=F0(f,p);return QN(E)?E:t}function $re(f){var p=qt.call(f,df),E=f[df];try{f[df]=t;var D=!0}catch{}var K=H0.call(f);return D&&(p?f[df]=E:delete f[df]),K}var D2=l2?function(f){return f==null?[]:(f=yt(f),Be(l2(f),function(p){return LN.call(f,p)}))}:Q2,PR=l2?function(f){for(var p=[];f;)Xt(p,D2(f)),f=K0(f);return p}:Q2,ji=Ji;(u2&&ji(new u2(new ArrayBuffer(1)))!=Ri||lg&&ji(new lg)!=ae||c2&&ji(c2.resolve())!=st||dd&&ji(new dd)!=vt||ug&&ji(new ug)!=ct)&&(ji=function(f){var p=Ji(f),E=p==ze?f.constructor:t,D=E?bf(E):"";if(D)switch(D){case nte:return Ri;case ite:return ae;case ste:return st;case ote:return vt;case ate:return ct}return p});function _re(f,p,E){for(var D=-1,K=E.length;++D<K;){var Q=E[D],oe=Q.size;switch(Q.type){case"drop":f+=oe;break;case"dropRight":p-=oe;break;case"take":p=Fi(p,f+oe);break;case"takeRight":f=Jn(f,p-oe);break}}return{start:f,end:p}}function xre(f){var p=f.match(qv);return p?p[1].split(Vv):[]}function NR(f,p,E){p=Bu(p,f);for(var D=-1,K=p.length,Q=!1;++D<K;){var oe=Wa(p[D]);if(!(Q=f!=null&&E(f,oe)))break;f=f[oe]}return Q||++D!=K?Q:(K=f==null?0:f.length,!!K&&mb(K)&&Pl(oe,K)&&(Jt(f)||wf(f)))}function Ere(f){var p=f.length,E=new f.constructor(p);return p&&typeof f[0]=="string"&&qt.call(f,"index")&&(E.index=f.index,E.input=f.input),E}function RR(f){return typeof f.constructor=="function"&&!mg(f)?vd(K0(f)):{}}function Sre(f,p,E){var D=f.constructor;switch(p){case pn:return I2(f);case $:case S:return new D(+f);case Ri:return lre(f,E);case Vi:case vn:case ds:case co:case Di:case Gi:case fo:case Qc:case ho:return gR(f,E);case ae:return new D;case ve:case Rt:return new D(f);case mt:return ure(f);case vt:return new D;case fr:return cre(f)}}function kre(f,p){var E=p.length;if(!E)return f;var D=E-1;return p[D]=(E>1?"& ":"")+p[D],p=p.join(E>2?", ":" "),f.replace(Kv,`{
/* [wrapped with `+p+`] */
`)}function Tre(f){return Jt(f)||wf(f)||!!(FN&&f&&f[FN])}function Pl(f,p){var E=typeof f;return p=p??Ee,!!p&&(E=="number"||E!="symbol"&&Iu.test(f))&&f>-1&&f%1==0&&f<p}function Qi(f,p,E){if(!hn(E))return!1;var D=typeof p;return(D=="number"?ms(E)&&Pl(p,E.length):D=="string"&&p in E)?ia(E[p],f):!1}function B2(f,p){if(Jt(f))return!1;var E=typeof f;return E=="number"||E=="symbol"||E=="boolean"||f==null||Us(f)?!0:Zh.test(f)||!Wv.test(f)||p!=null&&f in yt(p)}function Ire(f){var p=typeof f;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?f!=="__proto__":f===null}function M2(f){var p=cb(f),E=G[p];if(typeof E!="function"||!(p in yr.prototype))return!1;if(f===E)return!0;var D=N2(E);return!!D&&f===D[0]}function Are(f){return!!DN&&DN in f}var Ore=Xi?Nl:eE;function mg(f){var p=f&&f.constructor,E=typeof p=="function"&&p.prototype||Xn;return f===E}function DR(f){return f===f&&!hn(f)}function BR(f,p){return function(E){return E==null?!1:E[f]===p&&(p!==t||f in yt(E))}}function Cre(f){var p=gb(f,function(D){return E.size===u&&E.clear(),D}),E=p.cache;return p}function Pre(f,p){var E=f[1],D=p[1],K=E|D,Q=K<(T|x|g),oe=D==g&&E==_||D==g&&E==R&&f[7].length<=p[8]||D==(g|R)&&p[7].length<=p[8]&&E==_;if(!(Q||oe))return f;D&T&&(f[2]=p[2],K|=E&T?0:A);var de=p[3];if(de){var ke=f[3];f[3]=ke?mR(ke,de,p[4]):de,f[4]=ke?zs(f[3],h):p[4]}return de=p[5],de&&(ke=f[5],f[5]=ke?bR(ke,de,p[6]):de,f[6]=ke?zs(f[5],h):p[6]),de=p[7],de&&(f[7]=de),D&g&&(f[8]=f[8]==null?p[8]:Fi(f[8],p[8])),f[9]==null&&(f[9]=p[9]),f[0]=p[0],f[1]=K,f}function Nre(f){var p=[];if(f!=null)for(var E in yt(f))p.push(E);return p}function Rre(f){return H0.call(f)}function MR(f,p,E){return p=Jn(p===t?f.length-1:p,0),function(){for(var D=arguments,K=-1,Q=Jn(D.length-p,0),oe=fe(Q);++K<Q;)oe[K]=D[p+K];K=-1;for(var de=fe(p+1);++K<p;)de[K]=D[K];return de[p]=E(oe),q(f,this,de)}}function LR(f,p){return p.length<2?f:yf(f,_o(p,0,-1))}function Dre(f,p){for(var E=f.length,D=Fi(p.length,E),K=ys(f);D--;){var Q=p[D];f[D]=Pl(Q,E)?K[Q]:t}return f}function L2(f,p){if(!(p==="constructor"&&typeof f[p]=="function")&&p!="__proto__")return f[p]}var FR=zR(lR),bg=Zee||function(f,p){return cn.setTimeout(f,p)},F2=zR(ire);function jR(f,p,E){var D=p+"";return F2(f,kre(D,Bre(xre(D),E)))}function zR(f){var p=0,E=0;return function(){var D=ete(),K=te-(D-E);if(E=D,K>0){if(++p>=X)return arguments[0]}else p=0;return f.apply(t,arguments)}}function hb(f,p){var E=-1,D=f.length,K=D-1;for(p=p===t?D:p;++E<p;){var Q=$2(E,K),oe=f[Q];f[Q]=f[E],f[E]=oe}return f.length=p,f}var HR=Cre(function(f){var p=[];return f.charCodeAt(0)===46&&p.push(""),f.replace(Xh,function(E,D,K,Q){p.push(K?Q.replace(Yv,"$1"):D||E)}),p});function Wa(f){if(typeof f=="string"||Us(f))return f;var p=f+"";return p=="0"&&1/f==-se?"-0":p}function bf(f){if(f!=null){try{return ra.call(f)}catch{}try{return f+""}catch{}}return""}function Bre(f,p){return ie(_e,function(E){var D="_."+E[0];p&E[1]&&!Ae(f,D)&&f.push(D)}),f.sort()}function UR(f){if(f instanceof yr)return f.clone();var p=new wo(f.__wrapped__,f.__chain__);return p.__actions__=ys(f.__actions__),p.__index__=f.__index__,p.__values__=f.__values__,p}function Mre(f,p,E){(E?Qi(f,p,E):p===t)?p=1:p=Jn(tr(p),0);var D=f==null?0:f.length;if(!D||p<1)return[];for(var K=0,Q=0,oe=fe(G0(D/p));K<D;)oe[Q++]=_o(f,K,K+=p);return oe}function Lre(f){for(var p=-1,E=f==null?0:f.length,D=0,K=[];++p<E;){var Q=f[p];Q&&(K[D++]=Q)}return K}function Fre(){var f=arguments.length;if(!f)return[];for(var p=fe(f-1),E=arguments[0],D=f;D--;)p[D-1]=arguments[D];return Xt(Jt(E)?ys(E):[E],Ei(p,1))}var jre=ur(function(f,p){return xn(f)?dg(f,Ei(p,1,xn,!0)):[]}),zre=ur(function(f,p){var E=xo(p);return xn(E)&&(E=t),xn(f)?dg(f,Ei(p,1,xn,!0),Lt(E,2)):[]}),Hre=ur(function(f,p){var E=xo(p);return xn(E)&&(E=t),xn(f)?dg(f,Ei(p,1,xn,!0),t,E):[]});function Ure(f,p,E){var D=f==null?0:f.length;return D?(p=E||p===t?1:tr(p),_o(f,p<0?0:p,D)):[]}function Wre(f,p,E){var D=f==null?0:f.length;return D?(p=E||p===t?1:tr(p),p=D-p,_o(f,0,p<0?0:p)):[]}function Kre(f,p){return f&&f.length?ib(f,Lt(p,3),!0,!0):[]}function qre(f,p){return f&&f.length?ib(f,Lt(p,3),!0):[]}function Vre(f,p,E,D){var K=f==null?0:f.length;return K?(E&&typeof E!="number"&&Qi(f,p,E)&&(E=0,D=K),Fte(f,p,E,D)):[]}function WR(f,p,E){var D=f==null?0:f.length;if(!D)return-1;var K=E==null?0:tr(E);return K<0&&(K=Jn(D+K,0)),dr(f,Lt(p,3),K)}function KR(f,p,E){var D=f==null?0:f.length;if(!D)return-1;var K=D-1;return E!==t&&(K=tr(E),K=E<0?Jn(D+K,0):Fi(K,D-1)),dr(f,Lt(p,3),K,!0)}function qR(f){var p=f==null?0:f.length;return p?Ei(f,1):[]}function Gre(f){var p=f==null?0:f.length;return p?Ei(f,se):[]}function Yre(f,p){var E=f==null?0:f.length;return E?(p=p===t?1:tr(p),Ei(f,p)):[]}function Zre(f){for(var p=-1,E=f==null?0:f.length,D={};++p<E;){var K=f[p];D[K[0]]=K[1]}return D}function VR(f){return f&&f.length?f[0]:t}function Xre(f,p,E){var D=f==null?0:f.length;if(!D)return-1;var K=E==null?0:tr(E);return K<0&&(K=Jn(D+K,0)),Mr(f,p,K)}function Jre(f){var p=f==null?0:f.length;return p?_o(f,0,-1):[]}var Qre=ur(function(f){var p=bt(f,k2);return p.length&&p[0]===f[0]?g2(p):[]}),ene=ur(function(f){var p=xo(f),E=bt(f,k2);return p===xo(E)?p=t:E.pop(),E.length&&E[0]===f[0]?g2(E,Lt(p,2)):[]}),tne=ur(function(f){var p=xo(f),E=bt(f,k2);return p=typeof p=="function"?p:t,p&&E.pop(),E.length&&E[0]===f[0]?g2(E,t,p):[]});function rne(f,p){return f==null?"":Jee.call(f,p)}function xo(f){var p=f==null?0:f.length;return p?f[p-1]:t}function nne(f,p,E){var D=f==null?0:f.length;if(!D)return-1;var K=D;return E!==t&&(K=tr(E),K=K<0?Jn(D+K,0):Fi(K,D-1)),p===p?hd(f,p,K):dr(f,cd,K,!0)}function ine(f,p){return f&&f.length?iR(f,tr(p)):t}var sne=ur(GR);function GR(f,p){return f&&f.length&&p&&p.length?w2(f,p):f}function one(f,p,E){return f&&f.length&&p&&p.length?w2(f,p,Lt(E,2)):f}function ane(f,p,E){return f&&f.length&&p&&p.length?w2(f,p,t,E):f}var lne=Cl(function(f,p){var E=f==null?0:f.length,D=h2(f,p);return aR(f,bt(p,function(K){return Pl(K,E)?+K:K}).sort(yR)),D});function une(f,p){var E=[];if(!(f&&f.length))return E;var D=-1,K=[],Q=f.length;for(p=Lt(p,3);++D<Q;){var oe=f[D];p(oe,D,f)&&(E.push(oe),K.push(D))}return aR(f,K),E}function j2(f){return f==null?f:rte.call(f)}function cne(f,p,E){var D=f==null?0:f.length;return D?(E&&typeof E!="number"&&Qi(f,p,E)?(p=0,E=D):(p=p==null?0:tr(p),E=E===t?D:tr(E)),_o(f,p,E)):[]}function fne(f,p){return nb(f,p)}function hne(f,p,E){return x2(f,p,Lt(E,2))}function dne(f,p){var E=f==null?0:f.length;if(E){var D=nb(f,p);if(D<E&&ia(f[D],p))return D}return-1}function pne(f,p){return nb(f,p,!0)}function vne(f,p,E){return x2(f,p,Lt(E,2),!0)}function gne(f,p){var E=f==null?0:f.length;if(E){var D=nb(f,p,!0)-1;if(ia(f[D],p))return D}return-1}function yne(f){return f&&f.length?uR(f):[]}function mne(f,p){return f&&f.length?uR(f,Lt(p,2)):[]}function bne(f){var p=f==null?0:f.length;return p?_o(f,1,p):[]}function wne(f,p,E){return f&&f.length?(p=E||p===t?1:tr(p),_o(f,0,p<0?0:p)):[]}function $ne(f,p,E){var D=f==null?0:f.length;return D?(p=E||p===t?1:tr(p),p=D-p,_o(f,p<0?0:p,D)):[]}function _ne(f,p){return f&&f.length?ib(f,Lt(p,3),!1,!0):[]}function xne(f,p){return f&&f.length?ib(f,Lt(p,3)):[]}var Ene=ur(function(f){return Du(Ei(f,1,xn,!0))}),Sne=ur(function(f){var p=xo(f);return xn(p)&&(p=t),Du(Ei(f,1,xn,!0),Lt(p,2))}),kne=ur(function(f){var p=xo(f);return p=typeof p=="function"?p:t,Du(Ei(f,1,xn,!0),t,p)});function Tne(f){return f&&f.length?Du(f):[]}function Ine(f,p){return f&&f.length?Du(f,Lt(p,2)):[]}function Ane(f,p){return p=typeof p=="function"?p:t,f&&f.length?Du(f,t,p):[]}function z2(f){if(!(f&&f.length))return[];var p=0;return f=Be(f,function(E){if(xn(E))return p=Jn(E.length,p),!0}),uf(p,function(E){return bt(f,Sl(E))})}function YR(f,p){if(!(f&&f.length))return[];var E=z2(f);return p==null?E:bt(E,function(D){return q(p,t,D)})}var One=ur(function(f,p){return xn(f)?dg(f,p):[]}),Cne=ur(function(f){return S2(Be(f,xn))}),Pne=ur(function(f){var p=xo(f);return xn(p)&&(p=t),S2(Be(f,xn),Lt(p,2))}),Nne=ur(function(f){var p=xo(f);return p=typeof p=="function"?p:t,S2(Be(f,xn),t,p)}),Rne=ur(z2);function Dne(f,p){return dR(f||[],p||[],hg)}function Bne(f,p){return dR(f||[],p||[],gg)}var Mne=ur(function(f){var p=f.length,E=p>1?f[p-1]:t;return E=typeof E=="function"?(f.pop(),E):t,YR(f,E)});function ZR(f){var p=G(f);return p.__chain__=!0,p}function Lne(f,p){return p(f),f}function db(f,p){return p(f)}var Fne=Cl(function(f){var p=f.length,E=p?f[0]:0,D=this.__wrapped__,K=function(Q){return h2(Q,f)};return p>1||this.__actions__.length||!(D instanceof yr)||!Pl(E)?this.thru(K):(D=D.slice(E,+E+(p?1:0)),D.__actions__.push({func:db,args:[K],thisArg:t}),new wo(D,this.__chain__).thru(function(Q){return p&&!Q.length&&Q.push(t),Q}))});function jne(){return ZR(this)}function zne(){return new wo(this.value(),this.__chain__)}function Hne(){this.__values__===t&&(this.__values__=cD(this.value()));var f=this.__index__>=this.__values__.length,p=f?t:this.__values__[this.__index__++];return{done:f,value:p}}function Une(){return this}function Wne(f){for(var p,E=this;E instanceof J0;){var D=UR(E);D.__index__=0,D.__values__=t,p?K.__wrapped__=D:p=D;var K=D;E=E.__wrapped__}return K.__wrapped__=f,p}function Kne(){var f=this.__wrapped__;if(f instanceof yr){var p=f;return this.__actions__.length&&(p=new yr(this)),p=p.reverse(),p.__actions__.push({func:db,args:[j2],thisArg:t}),new wo(p,this.__chain__)}return this.thru(j2)}function qne(){return hR(this.__wrapped__,this.__actions__)}var Vne=sb(function(f,p,E){qt.call(f,E)?++f[E]:Al(f,E,1)});function Gne(f,p,E){var D=Jt(f)?Ce:Lte;return E&&Qi(f,p,E)&&(p=t),D(f,Lt(p,3))}function Yne(f,p){var E=Jt(f)?Be:YN;return E(f,Lt(p,3))}var Zne=xR(WR),Xne=xR(KR);function Jne(f,p){return Ei(pb(f,p),1)}function Qne(f,p){return Ei(pb(f,p),se)}function eie(f,p,E){return E=E===t?1:tr(E),Ei(pb(f,p),E)}function XR(f,p){var E=Jt(f)?ie:Ru;return E(f,Lt(p,3))}function JR(f,p){var E=Jt(f)?xe:GN;return E(f,Lt(p,3))}var tie=sb(function(f,p,E){qt.call(f,E)?f[E].push(p):Al(f,E,[p])});function rie(f,p,E,D){f=ms(f)?f:wd(f),E=E&&!D?tr(E):0;var K=f.length;return E<0&&(E=Jn(K+E,0)),bb(f)?E<=K&&f.indexOf(p,E)>-1:!!K&&Mr(f,p,E)>-1}var nie=ur(function(f,p,E){var D=-1,K=typeof p=="function",Q=ms(f)?fe(f.length):[];return Ru(f,function(oe){Q[++D]=K?q(p,oe,E):pg(oe,p,E)}),Q}),iie=sb(function(f,p,E){Al(f,E,p)});function pb(f,p){var E=Jt(f)?bt:tR;return E(f,Lt(p,3))}function sie(f,p,E,D){return f==null?[]:(Jt(p)||(p=p==null?[]:[p]),E=D?t:E,Jt(E)||(E=E==null?[]:[E]),sR(f,p,E))}var oie=sb(function(f,p,E){f[E?0:1].push(p)},function(){return[[],[]]});function aie(f,p,E){var D=Jt(f)?Zt:ea,K=arguments.length<3;return D(f,Lt(p,4),E,K,Ru)}function lie(f,p,E){var D=Jt(f)?Yn:ea,K=arguments.length<3;return D(f,Lt(p,4),E,K,GN)}function uie(f,p){var E=Jt(f)?Be:YN;return E(f,yb(Lt(p,3)))}function cie(f){var p=Jt(f)?WN:rre;return p(f)}function fie(f,p,E){(E?Qi(f,p,E):p===t)?p=1:p=tr(p);var D=Jt(f)?Nte:nre;return D(f,p)}function hie(f){var p=Jt(f)?Rte:sre;return p(f)}function die(f){if(f==null)return 0;if(ms(f))return bb(f)?za(f):f.length;var p=ji(f);return p==ae||p==vt?f.size:m2(f).length}function pie(f,p,E){var D=Jt(f)?fn:ore;return E&&Qi(f,p,E)&&(p=t),D(f,Lt(p,3))}var vie=ur(function(f,p){if(f==null)return[];var E=p.length;return E>1&&Qi(f,p[0],p[1])?p=[]:E>2&&Qi(p[0],p[1],p[2])&&(p=[p[0]]),sR(f,Ei(p,1),[])}),vb=Yee||function(){return cn.Date.now()};function gie(f,p){if(typeof p!="function")throw new lr(o);return f=tr(f),function(){if(--f<1)return p.apply(this,arguments)}}function QR(f,p,E){return p=E?t:p,p=f&&p==null?f.length:p,Ol(f,g,t,t,t,t,p)}function eD(f,p){var E;if(typeof p!="function")throw new lr(o);return f=tr(f),function(){return--f>0&&(E=p.apply(this,arguments)),f<=1&&(p=t),E}}var H2=ur(function(f,p,E){var D=T;if(E.length){var K=zs(E,md(H2));D|=O}return Ol(f,D,p,E,K)}),tD=ur(function(f,p,E){var D=T|x;if(E.length){var K=zs(E,md(tD));D|=O}return Ol(p,D,f,E,K)});function rD(f,p,E){p=E?t:p;var D=Ol(f,_,t,t,t,t,t,p);return D.placeholder=rD.placeholder,D}function nD(f,p,E){p=E?t:p;var D=Ol(f,I,t,t,t,t,t,p);return D.placeholder=nD.placeholder,D}function iD(f,p,E){var D,K,Q,oe,de,ke,qe=0,Ve=!1,Xe=!1,gt=!0;if(typeof f!="function")throw new lr(o);p=Eo(p)||0,hn(E)&&(Ve=!!E.leading,Xe="maxWait"in E,Q=Xe?Jn(Eo(E.maxWait)||0,p):Q,gt="trailing"in E?!!E.trailing:gt);function At(En){var sa=D,Dl=K;return D=K=t,qe=En,oe=f.apply(Dl,sa),oe}function zt(En){return qe=En,de=bg(vr,p),Ve?At(En):oe}function rr(En){var sa=En-ke,Dl=En-qe,xD=p-sa;return Xe?Fi(xD,Q-Dl):xD}function Ht(En){var sa=En-ke,Dl=En-qe;return ke===t||sa>=p||sa<0||Xe&&Dl>=Q}function vr(){var En=vb();if(Ht(En))return mr(En);de=bg(vr,rr(En))}function mr(En){return de=t,gt&&D?At(En):(D=K=t,oe)}function Ws(){de!==t&&pR(de),qe=0,D=ke=K=de=t}function es(){return de===t?oe:mr(vb())}function Ks(){var En=vb(),sa=Ht(En);if(D=arguments,K=this,ke=En,sa){if(de===t)return zt(ke);if(Xe)return pR(de),de=bg(vr,p),At(ke)}return de===t&&(de=bg(vr,p)),oe}return Ks.cancel=Ws,Ks.flush=es,Ks}var yie=ur(function(f,p){return VN(f,1,p)}),mie=ur(function(f,p,E){return VN(f,Eo(p)||0,E)});function bie(f){return Ol(f,M)}function gb(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new lr(o);var E=function(){var D=arguments,K=p?p.apply(this,D):D[0],Q=E.cache;if(Q.has(K))return Q.get(K);var oe=f.apply(this,D);return E.cache=Q.set(K,oe)||Q,oe};return E.cache=new(gb.Cache||Il),E}gb.Cache=Il;function yb(f){if(typeof f!="function")throw new lr(o);return function(){var p=arguments;switch(p.length){case 0:return!f.call(this);case 1:return!f.call(this,p[0]);case 2:return!f.call(this,p[0],p[1]);case 3:return!f.call(this,p[0],p[1],p[2])}return!f.apply(this,p)}}function wie(f){return eD(2,f)}var $ie=are(function(f,p){p=p.length==1&&Jt(p[0])?bt(p[0],Yi(Lt())):bt(Ei(p,1),Yi(Lt()));var E=p.length;return ur(function(D){for(var K=-1,Q=Fi(D.length,E);++K<Q;)D[K]=p[K].call(this,D[K]);return q(f,this,D)})}),U2=ur(function(f,p){var E=zs(p,md(U2));return Ol(f,O,t,p,E)}),sD=ur(function(f,p){var E=zs(p,md(sD));return Ol(f,C,t,p,E)}),_ie=Cl(function(f,p){return Ol(f,R,t,t,t,p)});function xie(f,p){if(typeof f!="function")throw new lr(o);return p=p===t?p:tr(p),ur(f,p)}function Eie(f,p){if(typeof f!="function")throw new lr(o);return p=p==null?0:Jn(tr(p),0),ur(function(E){var D=E[p],K=Mu(E,0,p);return D&&Xt(K,D),q(f,this,K)})}function Sie(f,p,E){var D=!0,K=!0;if(typeof f!="function")throw new lr(o);return hn(E)&&(D="leading"in E?!!E.leading:D,K="trailing"in E?!!E.trailing:K),iD(f,p,{leading:D,maxWait:p,trailing:K})}function kie(f){return QR(f,1)}function Tie(f,p){return U2(T2(p),f)}function Iie(){if(!arguments.length)return[];var f=arguments[0];return Jt(f)?f:[f]}function Aie(f){return $o(f,y)}function Oie(f,p){return p=typeof p=="function"?p:t,$o(f,y,p)}function Cie(f){return $o(f,c|y)}function Pie(f,p){return p=typeof p=="function"?p:t,$o(f,c|y,p)}function Nie(f,p){return p==null||qN(f,p,ai(p))}function ia(f,p){return f===p||f!==f&&p!==p}var Rie=ub(v2),Die=ub(function(f,p){return f>=p}),wf=JN(function(){return arguments}())?JN:function(f){return gn(f)&&qt.call(f,"callee")&&!LN.call(f,"callee")},Jt=fe.isArray,Bie=m?Yi(m):Wte;function ms(f){return f!=null&&mb(f.length)&&!Nl(f)}function xn(f){return gn(f)&&ms(f)}function Mie(f){return f===!0||f===!1||gn(f)&&Ji(f)==$}var Lu=Xee||eE,Lie=k?Yi(k):Kte;function Fie(f){return gn(f)&&f.nodeType===1&&!wg(f)}function jie(f){if(f==null)return!0;if(ms(f)&&(Jt(f)||typeof f=="string"||typeof f.splice=="function"||Lu(f)||bd(f)||wf(f)))return!f.length;var p=ji(f);if(p==ae||p==vt)return!f.size;if(mg(f))return!m2(f).length;for(var E in f)if(qt.call(f,E))return!1;return!0}function zie(f,p){return vg(f,p)}function Hie(f,p,E){E=typeof E=="function"?E:t;var D=E?E(f,p):t;return D===t?vg(f,p,t,E):!!D}function W2(f){if(!gn(f))return!1;var p=Ji(f);return p==F||p==N||typeof f.message=="string"&&typeof f.name=="string"&&!wg(f)}function Uie(f){return typeof f=="number"&&jN(f)}function Nl(f){if(!hn(f))return!1;var p=Ji(f);return p==z||p==V||p==je||p==wt}function oD(f){return typeof f=="number"&&f==tr(f)}function mb(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Ee}function hn(f){var p=typeof f;return f!=null&&(p=="object"||p=="function")}function gn(f){return f!=null&&typeof f=="object"}var aD=P?Yi(P):Vte;function Wie(f,p){return f===p||y2(f,p,R2(p))}function Kie(f,p,E){return E=typeof E=="function"?E:t,y2(f,p,R2(p),E)}function qie(f){return lD(f)&&f!=+f}function Vie(f){if(Ore(f))throw new We(s);return QN(f)}function Gie(f){return f===null}function Yie(f){return f==null}function lD(f){return typeof f=="number"||gn(f)&&Ji(f)==ve}function wg(f){if(!gn(f)||Ji(f)!=ze)return!1;var p=K0(f);if(p===null)return!0;var E=qt.call(p,"constructor")&&p.constructor;return typeof E=="function"&&E instanceof E&&ra.call(E)==Kee}var K2=B?Yi(B):Gte;function Zie(f){return oD(f)&&f>=-Ee&&f<=Ee}var uD=H?Yi(H):Yte;function bb(f){return typeof f=="string"||!Jt(f)&&gn(f)&&Ji(f)==Rt}function Us(f){return typeof f=="symbol"||gn(f)&&Ji(f)==fr}var bd=U?Yi(U):Zte;function Xie(f){return f===t}function Jie(f){return gn(f)&&ji(f)==ct}function Qie(f){return gn(f)&&Ji(f)==It}var ese=ub(b2),tse=ub(function(f,p){return f<=p});function cD(f){if(!f)return[];if(ms(f))return bb(f)?Zi(f):ys(f);if(ag&&f[ag])return ja(f[ag]());var p=ji(f),E=p==ae?fd:p==vt?kl:wd;return E(f)}function Rl(f){if(!f)return f===0?f:0;if(f=Eo(f),f===se||f===-se){var p=f<0?-1:1;return p*me}return f===f?f:0}function tr(f){var p=Rl(f),E=p%1;return p===p?E?p-E:p:0}function fD(f){return f?gf(tr(f),0,Ue):0}function Eo(f){if(typeof f=="number")return f;if(Us(f))return Pe;if(hn(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=hn(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=bo(f);var E=td.test(f);return E||nf.test(f)?n2(f.slice(2),E?2:8):Da.test(f)?Pe:+f}function hD(f){return Ua(f,bs(f))}function rse(f){return f?gf(tr(f),-Ee,Ee):f===0?f:0}function Nr(f){return f==null?"":Hs(f)}var nse=gd(function(f,p){if(mg(p)||ms(p)){Ua(p,ai(p),f);return}for(var E in p)qt.call(p,E)&&hg(f,E,p[E])}),dD=gd(function(f,p){Ua(p,bs(p),f)}),wb=gd(function(f,p,E,D){Ua(p,bs(p),f,D)}),ise=gd(function(f,p,E,D){Ua(p,ai(p),f,D)}),sse=Cl(h2);function ose(f,p){var E=vd(f);return p==null?E:KN(E,p)}var ase=ur(function(f,p){f=yt(f);var E=-1,D=p.length,K=D>2?p[2]:t;for(K&&Qi(p[0],p[1],K)&&(D=1);++E<D;)for(var Q=p[E],oe=bs(Q),de=-1,ke=oe.length;++de<ke;){var qe=oe[de],Ve=f[qe];(Ve===t||ia(Ve,Xn[qe])&&!qt.call(f,qe))&&(f[qe]=Q[qe])}return f}),lse=ur(function(f){return f.push(t,OR),q(pD,t,f)});function use(f,p){return La(f,Lt(p,3),Ha)}function cse(f,p){return La(f,Lt(p,3),p2)}function fse(f,p){return f==null?f:d2(f,Lt(p,3),bs)}function hse(f,p){return f==null?f:ZN(f,Lt(p,3),bs)}function dse(f,p){return f&&Ha(f,Lt(p,3))}function pse(f,p){return f&&p2(f,Lt(p,3))}function vse(f){return f==null?[]:tb(f,ai(f))}function gse(f){return f==null?[]:tb(f,bs(f))}function q2(f,p,E){var D=f==null?t:yf(f,p);return D===t?E:D}function yse(f,p){return f!=null&&NR(f,p,jte)}function V2(f,p){return f!=null&&NR(f,p,zte)}var mse=SR(function(f,p,E){p!=null&&typeof p.toString!="function"&&(p=H0.call(p)),f[p]=E},Y2(ws)),bse=SR(function(f,p,E){p!=null&&typeof p.toString!="function"&&(p=H0.call(p)),qt.call(f,p)?f[p].push(E):f[p]=[E]},Lt),wse=ur(pg);function ai(f){return ms(f)?UN(f):m2(f)}function bs(f){return ms(f)?UN(f,!0):Xte(f)}function $se(f,p){var E={};return p=Lt(p,3),Ha(f,function(D,K,Q){Al(E,p(D,K,Q),D)}),E}function _se(f,p){var E={};return p=Lt(p,3),Ha(f,function(D,K,Q){Al(E,K,p(D,K,Q))}),E}var xse=gd(function(f,p,E){rb(f,p,E)}),pD=gd(function(f,p,E,D){rb(f,p,E,D)}),Ese=Cl(function(f,p){var E={};if(f==null)return E;var D=!1;p=bt(p,function(Q){return Q=Bu(Q,f),D||(D=Q.length>1),Q}),Ua(f,P2(f),E),D&&(E=$o(E,c|d|y,mre));for(var K=p.length;K--;)E2(E,p[K]);return E});function Sse(f,p){return vD(f,yb(Lt(p)))}var kse=Cl(function(f,p){return f==null?{}:Qte(f,p)});function vD(f,p){if(f==null)return{};var E=bt(P2(f),function(D){return[D]});return p=Lt(p),oR(f,E,function(D,K){return p(D,K[0])})}function Tse(f,p,E){p=Bu(p,f);var D=-1,K=p.length;for(K||(K=1,f=t);++D<K;){var Q=f==null?t:f[Wa(p[D])];Q===t&&(D=K,Q=E),f=Nl(Q)?Q.call(f):Q}return f}function Ise(f,p,E){return f==null?f:gg(f,p,E)}function Ase(f,p,E,D){return D=typeof D=="function"?D:t,f==null?f:gg(f,p,E,D)}var gD=IR(ai),yD=IR(bs);function Ose(f,p,E){var D=Jt(f),K=D||Lu(f)||bd(f);if(p=Lt(p,4),E==null){var Q=f&&f.constructor;K?E=D?new Q:[]:hn(f)?E=Nl(Q)?vd(K0(f)):{}:E={}}return(K?ie:Ha)(f,function(oe,de,ke){return p(E,oe,de,ke)}),E}function Cse(f,p){return f==null?!0:E2(f,p)}function Pse(f,p,E){return f==null?f:fR(f,p,T2(E))}function Nse(f,p,E,D){return D=typeof D=="function"?D:t,f==null?f:fR(f,p,T2(E),D)}function wd(f){return f==null?[]:ng(f,ai(f))}function Rse(f){return f==null?[]:ng(f,bs(f))}function Dse(f,p,E){return E===t&&(E=p,p=t),E!==t&&(E=Eo(E),E=E===E?E:0),p!==t&&(p=Eo(p),p=p===p?p:0),gf(Eo(f),p,E)}function Bse(f,p,E){return p=Rl(p),E===t?(E=p,p=0):E=Rl(E),f=Eo(f),Hte(f,p,E)}function Mse(f,p,E){if(E&&typeof E!="boolean"&&Qi(f,p,E)&&(p=E=t),E===t&&(typeof p=="boolean"?(E=p,p=t):typeof f=="boolean"&&(E=f,f=t)),f===t&&p===t?(f=0,p=1):(f=Rl(f),p===t?(p=f,f=0):p=Rl(p)),f>p){var D=f;f=p,p=D}if(E||f%1||p%1){var K=zN();return Fi(f+K*(p-f+tg("1e-"+((K+"").length-1))),p)}return $2(f,p)}var Lse=yd(function(f,p,E){return p=p.toLowerCase(),f+(E?mD(p):p)});function mD(f){return G2(Nr(f).toLowerCase())}function bD(f){return f=Nr(f),f&&f.replace(rd,Pu).replace(Xx,"")}function Fse(f,p,E){f=Nr(f),p=Hs(p);var D=f.length;E=E===t?D:gf(tr(E),0,D);var K=E;return E-=p.length,E>=0&&f.slice(E,K)==p}function jse(f){return f=Nr(f),f&&Yh.test(f)?f.replace(Na,s2):f}function zse(f){return f=Nr(f),f&&Ra.test(f)?f.replace(vo,"\\$&"):f}var Hse=yd(function(f,p,E){return f+(E?"-":"")+p.toLowerCase()}),Use=yd(function(f,p,E){return f+(E?" ":"")+p.toLowerCase()}),Wse=_R("toLowerCase");function Kse(f,p,E){f=Nr(f),p=tr(p);var D=p?za(f):0;if(!p||D>=p)return f;var K=(p-D)/2;return lb(Y0(K),E)+f+lb(G0(K),E)}function qse(f,p,E){f=Nr(f),p=tr(p);var D=p?za(f):0;return p&&D<p?f+lb(p-D,E):f}function Vse(f,p,E){f=Nr(f),p=tr(p);var D=p?za(f):0;return p&&D<p?lb(p-D,E)+f:f}function Gse(f,p,E){return E||p==null?p=0:p&&(p=+p),tte(Nr(f).replace($l,""),p||0)}function Yse(f,p,E){return(E?Qi(f,p,E):p===t)?p=1:p=tr(p),_2(Nr(f),p)}function Zse(){var f=arguments,p=Nr(f[0]);return f.length<3?p:p.replace(f[1],f[2])}var Xse=yd(function(f,p,E){return f+(E?"_":"")+p.toLowerCase()});function Jse(f,p,E){return E&&typeof E!="number"&&Qi(f,p,E)&&(p=E=t),E=E===t?Ue:E>>>0,E?(f=Nr(f),f&&(typeof p=="string"||p!=null&&!K2(p))&&(p=Hs(p),!p&&gs(f))?Mu(Zi(f),0,E):f.split(p,E)):[]}var Qse=yd(function(f,p,E){return f+(E?" ":"")+G2(p)});function eoe(f,p,E){return f=Nr(f),E=E==null?0:gf(tr(E),0,f.length),p=Hs(p),f.slice(E,E+p.length)==p}function toe(f,p,E){var D=G.templateSettings;E&&Qi(f,p,E)&&(p=t),f=Nr(f),p=wb({},p,D,AR);var K=wb({},p.imports,D.imports,AR),Q=ai(K),oe=ng(K,Q),de,ke,qe=0,Ve=p.interpolate||Au,Xe="__p += '",gt=er((p.escape||Au).source+"|"+Ve.source+"|"+(Ve===Tu?Qh:Au).source+"|"+(p.evaluate||Au).source+"|$","g"),At="//# sourceURL="+(qt.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++r2+"]")+`
`;f.replace(gt,function(Ht,vr,mr,Ws,es,Ks){return mr||(mr=Ws),Xe+=f.slice(qe,Ks).replace(Ba,o2),vr&&(de=!0,Xe+=`' +
__e(`+vr+`) +
'`),es&&(ke=!0,Xe+=`';
`+es+`;
__p += '`),mr&&(Xe+=`' +
((__t = (`+mr+`)) == null ? '' : __t) +
'`),qe=Ks+Ht.length,Ht}),Xe+=`';
`;var zt=qt.call(p,"variable")&&p.variable;if(!zt)Xe=`with (obj) {
`+Xe+`
}
`;else if(Gv.test(zt))throw new We(a);Xe=(ke?Xe.replace(ef,""):Xe).replace(Gh,"$1").replace(po,"$1;"),Xe="function("+(zt||"obj")+`) {
`+(zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(de?", __e = _.escape":"")+(ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Xe+`return __p
}`;var rr=$D(function(){return $t(Q,At+"return "+Xe).apply(t,oe)});if(rr.source=Xe,W2(rr))throw rr;return rr}function roe(f){return Nr(f).toLowerCase()}function noe(f){return Nr(f).toUpperCase()}function ioe(f,p,E){if(f=Nr(f),f&&(E||p===t))return bo(f);if(!f||!(p=Hs(p)))return f;var D=Zi(f),K=Zi(p),Q=kr(D,K),oe=ff(D,K)+1;return Mu(D,Q,oe).join("")}function soe(f,p,E){if(f=Nr(f),f&&(E||p===t))return f.slice(0,j0(f)+1);if(!f||!(p=Hs(p)))return f;var D=Zi(f),K=ff(D,Zi(p))+1;return Mu(D,0,K).join("")}function ooe(f,p,E){if(f=Nr(f),f&&(E||p===t))return f.replace($l,"");if(!f||!(p=Hs(p)))return f;var D=Zi(f),K=kr(D,Zi(p));return Mu(D,K).join("")}function aoe(f,p){var E=L,D=W;if(hn(p)){var K="separator"in p?p.separator:K;E="length"in p?tr(p.length):E,D="omission"in p?Hs(p.omission):D}f=Nr(f);var Q=f.length;if(gs(f)){var oe=Zi(f);Q=oe.length}if(E>=Q)return f;var de=E-za(D);if(de<1)return D;var ke=oe?Mu(oe,0,de).join(""):f.slice(0,de);if(K===t)return ke+D;if(oe&&(de+=ke.length-de),K2(K)){if(f.slice(de).search(K)){var qe,Ve=ke;for(K.global||(K=er(K.source,Nr(ed.exec(K))+"g")),K.lastIndex=0;qe=K.exec(Ve);)var Xe=qe.index;ke=ke.slice(0,Xe===t?de:Xe)}}else if(f.indexOf(Hs(K),de)!=de){var gt=ke.lastIndexOf(K);gt>-1&&(ke=ke.slice(0,gt))}return ke+D}function loe(f){return f=Nr(f),f&&tf.test(f)?f.replace(Xo,og):f}var uoe=yd(function(f,p,E){return f+(E?" ":"")+p.toUpperCase()}),G2=_R("toUpperCase");function wD(f,p,E){return f=Nr(f),p=E?t:p,p===t?ig(f)?ge(f):hr(f):f.match(p)||[]}var $D=ur(function(f,p){try{return q(f,t,p)}catch(E){return W2(E)?E:new We(E)}}),coe=Cl(function(f,p){return ie(p,function(E){E=Wa(E),Al(f,E,H2(f[E],f))}),f});function foe(f){var p=f==null?0:f.length,E=Lt();return f=p?bt(f,function(D){if(typeof D[1]!="function")throw new lr(o);return[E(D[0]),D[1]]}):[],ur(function(D){for(var K=-1;++K<p;){var Q=f[K];if(q(Q[0],this,D))return q(Q[1],this,D)}})}function hoe(f){return Mte($o(f,c))}function Y2(f){return function(){return f}}function doe(f,p){return f==null||f!==f?p:f}var poe=ER(),voe=ER(!0);function ws(f){return f}function Z2(f){return eR(typeof f=="function"?f:$o(f,c))}function goe(f){return rR($o(f,c))}function yoe(f,p){return nR(f,$o(p,c))}var moe=ur(function(f,p){return function(E){return pg(E,f,p)}}),boe=ur(function(f,p){return function(E){return pg(f,E,p)}});function X2(f,p,E){var D=ai(p),K=tb(p,D);E==null&&!(hn(p)&&(K.length||!D.length))&&(E=p,p=f,f=this,K=tb(p,ai(p)));var Q=!(hn(E)&&"chain"in E)||!!E.chain,oe=Nl(f);return ie(K,function(de){var ke=p[de];f[de]=ke,oe&&(f.prototype[de]=function(){var qe=this.__chain__;if(Q||qe){var Ve=f(this.__wrapped__),Xe=Ve.__actions__=ys(this.__actions__);return Xe.push({func:ke,args:arguments,thisArg:f}),Ve.__chain__=qe,Ve}return ke.apply(f,Xt([this.value()],arguments))})}),f}function woe(){return cn._===this&&(cn._=qee),this}function J2(){}function $oe(f){return f=tr(f),ur(function(p){return iR(p,f)})}var _oe=A2(bt),xoe=A2(Ce),Eoe=A2(fn);function _D(f){return B2(f)?Sl(Wa(f)):ere(f)}function Soe(f){return function(p){return f==null?t:yf(f,p)}}var koe=kR(),Toe=kR(!0);function Q2(){return[]}function eE(){return!1}function Ioe(){return{}}function Aoe(){return""}function Ooe(){return!0}function Coe(f,p){if(f=tr(f),f<1||f>Ee)return[];var E=Ue,D=Fi(f,Ue);p=Lt(p),f-=Ue;for(var K=uf(D,p);++E<f;)p(E);return K}function Poe(f){return Jt(f)?bt(f,Wa):Us(f)?[f]:ys(HR(Nr(f)))}function Noe(f){var p=++Wee;return Nr(f)+p}var Roe=ab(function(f,p){return f+p},0),Doe=O2("ceil"),Boe=ab(function(f,p){return f/p},1),Moe=O2("floor");function Loe(f){return f&&f.length?eb(f,ws,v2):t}function Foe(f,p){return f&&f.length?eb(f,Lt(p,2),v2):t}function joe(f){return Fs(f,ws)}function zoe(f,p){return Fs(f,Lt(p,2))}function Hoe(f){return f&&f.length?eb(f,ws,b2):t}function Uoe(f,p){return f&&f.length?eb(f,Lt(p,2),b2):t}var Woe=ab(function(f,p){return f*p},1),Koe=O2("round"),qoe=ab(function(f,p){return f-p},0);function Voe(f){return f&&f.length?Li(f,ws):0}function Goe(f,p){return f&&f.length?Li(f,Lt(p,2)):0}return G.after=gie,G.ary=QR,G.assign=nse,G.assignIn=dD,G.assignInWith=wb,G.assignWith=ise,G.at=sse,G.before=eD,G.bind=H2,G.bindAll=coe,G.bindKey=tD,G.castArray=Iie,G.chain=ZR,G.chunk=Mre,G.compact=Lre,G.concat=Fre,G.cond=foe,G.conforms=hoe,G.constant=Y2,G.countBy=Vne,G.create=ose,G.curry=rD,G.curryRight=nD,G.debounce=iD,G.defaults=ase,G.defaultsDeep=lse,G.defer=yie,G.delay=mie,G.difference=jre,G.differenceBy=zre,G.differenceWith=Hre,G.drop=Ure,G.dropRight=Wre,G.dropRightWhile=Kre,G.dropWhile=qre,G.fill=Vre,G.filter=Yne,G.flatMap=Jne,G.flatMapDeep=Qne,G.flatMapDepth=eie,G.flatten=qR,G.flattenDeep=Gre,G.flattenDepth=Yre,G.flip=bie,G.flow=poe,G.flowRight=voe,G.fromPairs=Zre,G.functions=vse,G.functionsIn=gse,G.groupBy=tie,G.initial=Jre,G.intersection=Qre,G.intersectionBy=ene,G.intersectionWith=tne,G.invert=mse,G.invertBy=bse,G.invokeMap=nie,G.iteratee=Z2,G.keyBy=iie,G.keys=ai,G.keysIn=bs,G.map=pb,G.mapKeys=$se,G.mapValues=_se,G.matches=goe,G.matchesProperty=yoe,G.memoize=gb,G.merge=xse,G.mergeWith=pD,G.method=moe,G.methodOf=boe,G.mixin=X2,G.negate=yb,G.nthArg=$oe,G.omit=Ese,G.omitBy=Sse,G.once=wie,G.orderBy=sie,G.over=_oe,G.overArgs=$ie,G.overEvery=xoe,G.overSome=Eoe,G.partial=U2,G.partialRight=sD,G.partition=oie,G.pick=kse,G.pickBy=vD,G.property=_D,G.propertyOf=Soe,G.pull=sne,G.pullAll=GR,G.pullAllBy=one,G.pullAllWith=ane,G.pullAt=lne,G.range=koe,G.rangeRight=Toe,G.rearg=_ie,G.reject=uie,G.remove=une,G.rest=xie,G.reverse=j2,G.sampleSize=fie,G.set=Ise,G.setWith=Ase,G.shuffle=hie,G.slice=cne,G.sortBy=vie,G.sortedUniq=yne,G.sortedUniqBy=mne,G.split=Jse,G.spread=Eie,G.tail=bne,G.take=wne,G.takeRight=$ne,G.takeRightWhile=_ne,G.takeWhile=xne,G.tap=Lne,G.throttle=Sie,G.thru=db,G.toArray=cD,G.toPairs=gD,G.toPairsIn=yD,G.toPath=Poe,G.toPlainObject=hD,G.transform=Ose,G.unary=kie,G.union=Ene,G.unionBy=Sne,G.unionWith=kne,G.uniq=Tne,G.uniqBy=Ine,G.uniqWith=Ane,G.unset=Cse,G.unzip=z2,G.unzipWith=YR,G.update=Pse,G.updateWith=Nse,G.values=wd,G.valuesIn=Rse,G.without=One,G.words=wD,G.wrap=Tie,G.xor=Cne,G.xorBy=Pne,G.xorWith=Nne,G.zip=Rne,G.zipObject=Dne,G.zipObjectDeep=Bne,G.zipWith=Mne,G.entries=gD,G.entriesIn=yD,G.extend=dD,G.extendWith=wb,X2(G,G),G.add=Roe,G.attempt=$D,G.camelCase=Lse,G.capitalize=mD,G.ceil=Doe,G.clamp=Dse,G.clone=Aie,G.cloneDeep=Cie,G.cloneDeepWith=Pie,G.cloneWith=Oie,G.conformsTo=Nie,G.deburr=bD,G.defaultTo=doe,G.divide=Boe,G.endsWith=Fse,G.eq=ia,G.escape=jse,G.escapeRegExp=zse,G.every=Gne,G.find=Zne,G.findIndex=WR,G.findKey=use,G.findLast=Xne,G.findLastIndex=KR,G.findLastKey=cse,G.floor=Moe,G.forEach=XR,G.forEachRight=JR,G.forIn=fse,G.forInRight=hse,G.forOwn=dse,G.forOwnRight=pse,G.get=q2,G.gt=Rie,G.gte=Die,G.has=yse,G.hasIn=V2,G.head=VR,G.identity=ws,G.includes=rie,G.indexOf=Xre,G.inRange=Bse,G.invoke=wse,G.isArguments=wf,G.isArray=Jt,G.isArrayBuffer=Bie,G.isArrayLike=ms,G.isArrayLikeObject=xn,G.isBoolean=Mie,G.isBuffer=Lu,G.isDate=Lie,G.isElement=Fie,G.isEmpty=jie,G.isEqual=zie,G.isEqualWith=Hie,G.isError=W2,G.isFinite=Uie,G.isFunction=Nl,G.isInteger=oD,G.isLength=mb,G.isMap=aD,G.isMatch=Wie,G.isMatchWith=Kie,G.isNaN=qie,G.isNative=Vie,G.isNil=Yie,G.isNull=Gie,G.isNumber=lD,G.isObject=hn,G.isObjectLike=gn,G.isPlainObject=wg,G.isRegExp=K2,G.isSafeInteger=Zie,G.isSet=uD,G.isString=bb,G.isSymbol=Us,G.isTypedArray=bd,G.isUndefined=Xie,G.isWeakMap=Jie,G.isWeakSet=Qie,G.join=rne,G.kebabCase=Hse,G.last=xo,G.lastIndexOf=nne,G.lowerCase=Use,G.lowerFirst=Wse,G.lt=ese,G.lte=tse,G.max=Loe,G.maxBy=Foe,G.mean=joe,G.meanBy=zoe,G.min=Hoe,G.minBy=Uoe,G.stubArray=Q2,G.stubFalse=eE,G.stubObject=Ioe,G.stubString=Aoe,G.stubTrue=Ooe,G.multiply=Woe,G.nth=ine,G.noConflict=woe,G.noop=J2,G.now=vb,G.pad=Kse,G.padEnd=qse,G.padStart=Vse,G.parseInt=Gse,G.random=Mse,G.reduce=aie,G.reduceRight=lie,G.repeat=Yse,G.replace=Zse,G.result=Tse,G.round=Koe,G.runInContext=ee,G.sample=cie,G.size=die,G.snakeCase=Xse,G.some=pie,G.sortedIndex=fne,G.sortedIndexBy=hne,G.sortedIndexOf=dne,G.sortedLastIndex=pne,G.sortedLastIndexBy=vne,G.sortedLastIndexOf=gne,G.startCase=Qse,G.startsWith=eoe,G.subtract=qoe,G.sum=Voe,G.sumBy=Goe,G.template=toe,G.times=Coe,G.toFinite=Rl,G.toInteger=tr,G.toLength=fD,G.toLower=roe,G.toNumber=Eo,G.toSafeInteger=rse,G.toString=Nr,G.toUpper=noe,G.trim=ioe,G.trimEnd=soe,G.trimStart=ooe,G.truncate=aoe,G.unescape=loe,G.uniqueId=Noe,G.upperCase=uoe,G.upperFirst=G2,G.each=XR,G.eachRight=JR,G.first=VR,X2(G,function(){var f={};return Ha(G,function(p,E){qt.call(G.prototype,E)||(f[E]=p)}),f}(),{chain:!1}),G.VERSION=n,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){G[f].placeholder=G}),ie(["drop","take"],function(f,p){yr.prototype[f]=function(E){E=E===t?1:Jn(tr(E),0);var D=this.__filtered__&&!p?new yr(this):this.clone();return D.__filtered__?D.__takeCount__=Fi(E,D.__takeCount__):D.__views__.push({size:Fi(E,Ue),type:f+(D.__dir__<0?"Right":"")}),D},yr.prototype[f+"Right"]=function(E){return this.reverse()[f](E).reverse()}}),ie(["filter","map","takeWhile"],function(f,p){var E=p+1,D=E==J||E==Z;yr.prototype[f]=function(K){var Q=this.clone();return Q.__iteratees__.push({iteratee:Lt(K,3),type:E}),Q.__filtered__=Q.__filtered__||D,Q}}),ie(["head","last"],function(f,p){var E="take"+(p?"Right":"");yr.prototype[f]=function(){return this[E](1).value()[0]}}),ie(["initial","tail"],function(f,p){var E="drop"+(p?"":"Right");yr.prototype[f]=function(){return this.__filtered__?new yr(this):this[E](1)}}),yr.prototype.compact=function(){return this.filter(ws)},yr.prototype.find=function(f){return this.filter(f).head()},yr.prototype.findLast=function(f){return this.reverse().find(f)},yr.prototype.invokeMap=ur(function(f,p){return typeof f=="function"?new yr(this):this.map(function(E){return pg(E,f,p)})}),yr.prototype.reject=function(f){return this.filter(yb(Lt(f)))},yr.prototype.slice=function(f,p){f=tr(f);var E=this;return E.__filtered__&&(f>0||p<0)?new yr(E):(f<0?E=E.takeRight(-f):f&&(E=E.drop(f)),p!==t&&(p=tr(p),E=p<0?E.dropRight(-p):E.take(p-f)),E)},yr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},yr.prototype.toArray=function(){return this.take(Ue)},Ha(yr.prototype,function(f,p){var E=/^(?:filter|find|map|reject)|While$/.test(p),D=/^(?:head|last)$/.test(p),K=G[D?"take"+(p=="last"?"Right":""):p],Q=D||/^find/.test(p);K&&(G.prototype[p]=function(){var oe=this.__wrapped__,de=D?[1]:arguments,ke=oe instanceof yr,qe=de[0],Ve=ke||Jt(oe),Xe=function(vr){var mr=K.apply(G,Xt([vr],de));return D&&gt?mr[0]:mr};Ve&&E&&typeof qe=="function"&&qe.length!=1&&(ke=Ve=!1);var gt=this.__chain__,At=!!this.__actions__.length,zt=Q&&!gt,rr=ke&&!At;if(!Q&&Ve){oe=rr?oe:new yr(this);var Ht=f.apply(oe,de);return Ht.__actions__.push({func:db,args:[Xe],thisArg:t}),new wo(Ht,gt)}return zt&&rr?f.apply(this,de):(Ht=this.thru(Xe),zt?D?Ht.value()[0]:Ht.value():Ht)})}),ie(["pop","push","shift","sort","splice","unshift"],function(f){var p=Zn[f],E=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",D=/^(?:pop|shift)$/.test(f);G.prototype[f]=function(){var K=arguments;if(D&&!this.__chain__){var Q=this.value();return p.apply(Jt(Q)?Q:[],K)}return this[E](function(oe){return p.apply(Jt(oe)?oe:[],K)})}}),Ha(yr.prototype,function(f,p){var E=G[p];if(E){var D=E.name+"";qt.call(pd,D)||(pd[D]=[]),pd[D].push({name:p,func:E})}}),pd[ob(t,x).name]=[{name:"wrapper",func:t}],yr.prototype.clone=lte,yr.prototype.reverse=ute,yr.prototype.value=cte,G.prototype.at=Fne,G.prototype.chain=jne,G.prototype.commit=zne,G.prototype.next=Hne,G.prototype.plant=Wne,G.prototype.reverse=Kne,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=qne,G.prototype.first=G.prototype.head,ag&&(G.prototype[ag]=Une),G},Oe=Ie();Qo?((Qo.exports=Oe)._=Oe,ud._=Oe):cn._=Oe}).call(Tn)})(Iw,Iw.exports);var Cn=Iw.exports;const Kd=no(Cn),QD="c2fc1ad0-f76f-11ec-b939-0242ac120002",e6=new Set;dn.config({driver:[dn.LOCALSTORAGE,dn.INDEXEDDB,dn.WEBSQL]});let zue=class AH{constructor(r="",t=null){le(this,"id");le(this,"parent");le(this,"children",new Map);le(this,"on_subscriptions",new Map);le(this,"map_subscriptions",new Map);le(this,"value");le(this,"counter",0);le(this,"loaded",!1);le(this,"saveLocalForage",Kd.throttle(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const r=Array.from(this.children.keys());await dn.setItem(this.id,r)}else this.value===void 0?await dn.removeItem(this.id):await dn.setItem(this.id,this.value===null?QD:this.value)},500));le(this,"loadLocalForage",Kd.throttle(async()=>{if(e6.has(this.id))return;let r=await dn.getItem(this.id);if(r===null)r=void 0,e6.add(this.id);else if(r===QD)r=null;else if(Array.isArray(r)){const t={};await Promise.all(r.map(async n=>{t[n]=await this.get(n).once()})),r=t}else this.value=r;return this.loaded=!0,r},500));le(this,"doCallbacks",Kd.debounce(()=>{for(const[r,t]of this.on_subscriptions){const n=()=>this.on_subscriptions.delete(r);this.once(t,n,!1)}if(this.parent){this.parent.doCallbacks();for(const[r,t]of this.parent.map_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(r)};this.once(t,n,!1)}}},20,{maxWait:40}));this.id=r,this.parent=t}get(r){const t=this.children.get(r);if(t)return t;const n=new AH(`${this.id}/${r}`,this);return this.children.set(r,n),this.saveLocalForage(),n}async put(r){if(Array.isArray(r))throw new Error("Sorry, we don't deal with arrays");return typeof r=="object"&&r!==null?(this.value=void 0,await Promise.all(Kd.map(r,(t,n)=>this.get(n).put(t)))):(this.children=new Map,this.value=r),this.doCallbacks(),this.saveLocalForage()}async once(r,t,n=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,t)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||n)return r&&r(i,this.id.slice(this.id.lastIndexOf("/")+1),t||(()=>{})),i}on(r){const t=this.counter++;this.on_subscriptions.set(t,r);const n=()=>this.on_subscriptions.delete(t);return this.once(r,n,!1),n}map(r){var s;const t=this.counter++;this.map_subscriptions.set(t,r);const n=()=>this.map_subscriptions.delete(t),i=()=>{for(const o of this.children.values())o.once(r,n,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),n}};const De=new zue;function Hue(e,r=void 0,t=!1){const[n,i]=Ne(r||De.get(e).value);xt(()=>De.get(e).on((a,l,u)=>{i(a),t&&u()}),[e,t]);const s=As(o=>{De.get(e).put(o)},[e]);return[n,s]}var yu={},sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.createBitArray=Uue;sv.fromBits=Kue;sv.toBits=Wue;function Uue(e){return new Uint8Array(e)}function OH(e,r,t,n,i){var s=(1<<n)-1,o=0,a=0,l=0;if(e.forEach(function(u){for(o=(o<<r)+u,a+=r;a>=n;)a-=n,t[l]=o>>a&s,l+=1}),i)a>0&&(t[l]=o<<n-a&s);else{if(a>=r)throw new Error("Excessive padding: ".concat(a," (max ").concat(r-1," allowed)"));if(o%(1<<a)!==0)throw new Error("Non-zero padding")}}function Wue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return OH(e,8,t,r,!0),t}function Kue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return OH(e,r,t,8,!1),t}var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.CHECKSUM_LENGTH=void 0;Ia.createChecksum=Yue;Ia.decode=DH;Ia.decodeWithPrefix=Xue;Ia.detectCase=Jue;Ia.encode=Zue;Ia.expandPrefix=RH;Ia.verifyChecksum=Gue;var CH=sv,DT="qpzry9x8gf2tvdw0s3jn54khce6mua7l",PH=734539939,t6=33,r6=126,BT=6;Ia.CHECKSUM_LENGTH=BT;var que=function(){for(var e=new Map,r=0;r<DT.length;r+=1)e.set(DT[r],r);return e}(),Vue=[996825010,642813549,513874426,1027748829,705979059];function NH(e){return e.reduce(function(r,t){var n=r>>25,i=(r&33554431)<<5^t;return Vue.reduce(function(s,o,a){return n>>a&1?s^o:s},i)},1)}function RH(e,r){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);r[t]=n>>5,r[t+e.length+1]=n&31}r[e.length]=0}function Gue(e){switch(NH(e)){case 1:return"bech32";case PH:return"bech32m";default:return}}function Yue(e,r){var t;switch(r){case"bech32":t=1;break;case"bech32m":t=PH;break;default:throw Error("Invalid encoding value: ".concat(r,"; expected bech32 or bech32m"))}for(var n=NH(e)^t,i=0;i<BT;i+=1){var s=5*(5-i);e[e.length-BT+i]=n>>s&31}}function Zue(e){return e.reduce(function(r,t){return r+DT[t]},"")}function DH(e,r){for(var t=r||(0,CH.createBitArray)(e.length),n=0;n<e.length;n+=1){var i=que.get(e[n]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[n]));t[n]=i}return t}function Xue(e,r){var t=r.length+2*e.length+1,n=(0,CH.createBitArray)(t);return RH(e,n.subarray(0,2*e.length+1)),DH(r,n.subarray(2*e.length+1)),n}function Jue(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",t=!1,n=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<t6||s>r6)throw new TypeError("Invalid char in ".concat(r,": ").concat(s,"; ")+"should be in ASCII range ".concat(t6,"-").concat(r6));n=n||s>=65&&s<=90,t=t||s>=97&&s<=122}if(t&&n)throw new TypeError("Mixed-case ".concat(r));return n?"upper":t?"lower":null}Object.defineProperty(yu,"__esModule",{value:!0});yu.BitcoinAddress=void 0;var Aw=yu.decode=rce;yu.decodeTo5BitArray=$3;var n6=yu.encode=tce;yu.encode5BitArray=w3;yu.from5BitArray=b3;yu.to5BitArray=m3;var xy=sv,Do=Ia;function Que(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i6(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ece(e,r,t){return r&&i6(e.prototype,r),t&&i6(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ow=90;function m3(e,r){var t=Math.ceil(e.length*8/5),n=r||(0,xy.createBitArray)(t);return(0,xy.toBits)(e,5,n)}function b3(e,r){var t=Math.floor(e.length*5/8),n=r||new Uint8Array(t);return(0,xy.fromBits)(e,5,n)}function w3(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+r.length+Do.CHECKSUM_LENGTH;if(i-e.length>Ow)throw new Error("Message to be produced is too long (max ".concat(Ow," supported)"));var s=(t=(0,Do.detectCase)(e,"prefix"))!==null&&t!==void 0?t:"lower",o=(0,xy.createBitArray)(i);(0,Do.expandPrefix)(e.toLowerCase(),o.subarray(0,2*e.length+1));var a=o.subarray(2*e.length+1,o.length-Do.CHECKSUM_LENGTH);a.set(r),(0,Do.createChecksum)(o,n);var l=(0,Do.encode)(o.subarray(2*e.length+1));return s==="upper"&&(l=l.toUpperCase()),"".concat(e,"1").concat(l)}function tce(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return w3(e,m3(r),t)}function $3(e){if(e.length>Ow)throw new TypeError("Message too long; max ".concat(Ow," expected"));(0,Do.detectCase)(e);var r=e.toLowerCase(),t=r.lastIndexOf("1");if(t<0)throw new Error('No separator char ("1") found');if(t>e.length-Do.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(Do.CHECKSUM_LENGTH," chars expected)"));var n=r.substring(0,t),i=(0,Do.decodeWithPrefix)(n,r.substring(t+1)),s=(0,Do.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:n,encoding:s,data:i.subarray(2*n.length+1,i.length-Do.CHECKSUM_LENGTH)}}function rce(e){var r=$3(e),t=r.prefix,n=r.encoding,i=r.data;return{prefix:t,encoding:n,data:b3(i)}}var nce=function(){function e(r,t,n){if(Que(this,e),r!=="bc"&&r!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(t<0||t>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(n.length<2||n.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(t===0&&n.length!==20&&n.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=r,this.scriptVersion=t,this.data=n}return ece(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var t=Math.ceil(this.data.length*8/5),n=(0,xy.createBitArray)(t+1);n[0]=this.scriptVersion,m3(this.data,n.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return w3(this.prefix,n,i)}}],[{key:"decode",value:function(t){var n=$3(t),i=n.prefix,s=n.data,o=n.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var a=s[0];if(a===0&&o!=="bech32")throw Error("Unexpected encoding ".concat(o," used for version 0 script"));if(a>0&&o!=="bech32m")throw Error("Unexpected encoding ".concat(o," used for version ").concat(a," script"));return new this(i,a,b3(s.subarray(1)))}}]),e}();yu.BitcoinAddress=nce;function MT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ice(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function BH(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function sce(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");MT(e.outputLen),MT(e.blockLen)}function oce(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ace(e,r){BH(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Ff={number:MT,bool:ice,bytes:BH,hash:sce,exists:oce,output:ace},oE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _3=e=>e instanceof Uint8Array,aE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ka=(e,r)=>e<<32-r|e>>>r,lce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lce)throw new Error("Non little-endian hardware is not supported");const uce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Bo(e){if(!_3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=uce[e[t]];return r}function Tp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function cce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function x3(e){if(typeof e=="string"&&(e=cce(e)),!_3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function MH(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!_3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let LH=class{clone(){return this._cloneInto()}};function FH(e){const r=n=>e().update(x3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function E3(e=32){if(oE&&typeof oE.getRandomValues=="function")return oE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function fce(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let hce=class extends LH{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=aE(this.buffer)}update(r){Ff.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=x3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=aE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Ff.exists(this),Ff.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;fce(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=aE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const dce=(e,r,t)=>e&r^~e&t,pce=(e,r,t)=>e&r^e&t^r&t,vce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ju=new Uint32Array(64);let jH=class extends hce{constructor(){super(64,32,8,!1),this.A=Fu[0]|0,this.B=Fu[1]|0,this.C=Fu[2]|0,this.D=Fu[3]|0,this.E=Fu[4]|0,this.F=Fu[5]|0,this.G=Fu[6]|0,this.H=Fu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)ju[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=ju[c-15],y=ju[c-2],w=Ka(d,7)^Ka(d,18)^d>>>3,b=Ka(y,17)^Ka(y,19)^y>>>10;ju[c]=b+ju[c-7]+w+ju[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const d=Ka(a,6)^Ka(a,11)^Ka(a,25),y=h+d+dce(a,l,u)+vce[c]+ju[c]|0,b=(Ka(n,2)^Ka(n,13)^Ka(n,22))+pce(n,i,s)|0;h=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){ju.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},gce=class extends jH{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Ip=FH(()=>new jH);FH(()=>new gce);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zH=BigInt(0),u_=BigInt(1),yce=BigInt(2),c_=e=>e instanceof Uint8Array,mce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Ap(e){if(!c_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=mce[e[t]];return r}function HH(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function S3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Op(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Ns(e){return S3(Ap(e))}function k3(e){if(!c_(e))throw new Error("Uint8Array expected");return S3(Ap(Uint8Array.from(e).reverse()))}function $c(e,r){return Op(e.toString(16).padStart(r*2,"0"))}function UH(e,r){return $c(e,r).reverse()}function bce(e){return Op(HH(e))}function Ti(e,r,t){let n;if(typeof r=="string")try{n=Op(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(c_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function gh(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!c_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function wce(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function $ce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function _ce(e){let r;for(r=0;e>zH;e>>=u_,r+=1);return r}function xce(e,r){return e>>BigInt(r)&u_}const Ece=(e,r,t)=>e|(t?u_:zH)<<BigInt(r),T3=e=>(yce<<BigInt(e-1))-u_,lE=e=>new Uint8Array(e),s6=e=>Uint8Array.from(e);function WH(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=lE(e),i=lE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=lE())=>{i=a(s6([0]),c),n=a(),c.length!==0&&(i=a(s6([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return gh(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const Sce={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function dm(e,r,t={}){const n=(i,s,o)=>{const a=Sce[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const kce=Object.freeze(Object.defineProperty({__proto__:null,bitGet:xce,bitLen:_ce,bitMask:T3,bitSet:Ece,bytesToHex:Ap,bytesToNumberBE:Ns,bytesToNumberLE:k3,concatBytes:gh,createHmacDrbg:WH,ensureBytes:Ti,equalBytes:wce,hexToBytes:Op,hexToNumber:S3,numberToBytesBE:$c,numberToBytesLE:UH,numberToHexUnpadded:HH,numberToVarBytesBE:bce,utf8ToBytes:$ce,validateObject:dm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pi=BigInt(0),In=BigInt(1),Af=BigInt(2),Tce=BigInt(3),LT=BigInt(4),o6=BigInt(5),a6=BigInt(8);BigInt(9);BigInt(16);function Ai(e,r){const t=e%r;return t>=pi?t:r+t}function Ice(e,r,t){if(t<=pi||r<pi)throw new Error("Expected power/modulo > 0");if(t===In)return pi;let n=In;for(;r>pi;)r&In&&(n=n*e%t),e=e*e%t,r>>=In;return n}function ko(e,r,t){let n=e;for(;r-- >pi;)n*=n,n%=t;return n}function FT(e,r){if(e===pi||r<=pi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=Ai(e,r),n=r,i=pi,s=In;for(;t!==pi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==In)throw new Error("invert: does not exist");return Ai(i,r)}function Ace(e){const r=(e-In)/Af;let t,n,i;for(t=e-In,n=0;t%Af===pi;t/=Af,n++);for(i=Af;i<e&&Ice(i,r,e)!==e-In;i++);if(n===1){const o=(e+In)/LT;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+In)/Af;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(h,In<<BigInt(u-y-1));h=a.sqr(w),c=a.mul(c,w),d=a.mul(d,h),u=y}return c}}function Oce(e){if(e%LT===Tce){const r=(e+In)/LT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%a6===o6){const r=(e-o6)/a6;return function(n,i){const s=n.mul(i,Af),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Af),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Ace(e)}const Cce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pce(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Cce.reduce((n,i)=>(n[i]="function",n),r);return dm(e,t)}function Nce(e,r,t){if(t<pi)throw new Error("Expected power > 0");if(t===pi)return e.ONE;if(t===In)return r;let n=e.ONE,i=r;for(;t>pi;)t&In&&(n=e.mul(n,i)),i=e.sqr(i),t>>=In;return n}function Rce(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function I3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Dce(e,r,t=!1,n={}){if(e<=pi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=I3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Oce(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:T3(i),ZERO:pi,ONE:In,create:l=>Ai(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return pi<=l&&l<e},is0:l=>l===pi,isOdd:l=>(l&In)===In,neg:l=>Ai(-l,e),eql:(l,u)=>l===u,sqr:l=>Ai(l*l,e),add:(l,u)=>Ai(l+u,e),sub:(l,u)=>Ai(l-u,e),mul:(l,u)=>Ai(l*u,e),pow:(l,u)=>Nce(a,l,u),div:(l,u)=>Ai(l*FT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>FT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Rce(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?UH(l,s):$c(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?k3(l):Ns(l)}});return Object.freeze(a)}function Bce(e,r,t=!1){e=Ti("privateHash",e);const n=e.length,i=I3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?k3(e):Ns(e);return Ai(s,r-In)+In}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mce=BigInt(0),uE=BigInt(1);function Lce(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>Mce;)s&uE&&(o=o.add(a)),a=a.double(),s>>=uE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,h=u;for(let c=0;c<o;c++){h=u,l.push(h);for(let d=1;d<a;d++)h=h.add(u),l.push(h);u=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,h=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=uE);const x=b,A=b+Math.abs(T)-1,_=w%2!==0,I=T<0;T===0?h=h.add(t(_,s[x])):u=u.add(t(I,s[A]))}return{p:u,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function KH(e){return Pce(e.Fp),dm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...I3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fce(e){const r=KH(e);dm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:jce,hexToBytes:zce}=kce,jf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=jf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:jce(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=jf,t=typeof e=="string"?zce(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=jf._parseInt(t.subarray(2)),{d:o,l:a}=jf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Wl=BigInt(0),Co=BigInt(1);BigInt(2);const l6=BigInt(3);BigInt(4);function Hce(e){const r=Fce(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const x=b.toAffine();return gh(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),x=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:x}});function s(w){const{a:b,b:T}=r,x=t.sqr(w),A=t.mul(x,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Wl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:x,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Ap(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let _;try{_=typeof w=="bigint"?w:Ns(Ti("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return x&&(_=Ai(_,A)),a(_),_}const u=new Map;function h(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,x){if(this.px=b,this.py=T,this.pz=x,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(b){const{x:T,y:x}=b||{};if(!b||!t.isValid(T)||!t.isValid(x))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=_=>t.eql(_,t.ZERO);return A(T)&&A(x)?c.ZERO:new c(T,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(x=>x.pz));return b.map((x,A)=>x.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ti("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const x=t.sqr(T),A=s(b);if(!t.eql(x,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:T,py:x,pz:A}=this,{px:_,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(_,A)),g=t.eql(t.mul(x,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,x=t.mul(T,l6),{px:A,py:_,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,R=t.mul(A,A),M=t.mul(_,_),L=t.mul(I,I),W=t.mul(A,_);return W=t.add(W,W),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(x,L),C=t.add(O,C),O=t.sub(M,C),C=t.add(M,C),C=t.mul(O,C),O=t.mul(W,O),g=t.mul(x,g),L=t.mul(b,L),W=t.sub(R,L),W=t.mul(b,W),W=t.add(W,g),g=t.add(R,R),R=t.add(g,R),R=t.add(R,L),R=t.mul(R,W),C=t.add(C,R),L=t.mul(_,I),L=t.add(L,L),R=t.mul(L,W),O=t.sub(O,R),g=t.mul(L,M),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){h(b);const{px:T,py:x,pz:A}=this,{px:_,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,R=t.ZERO;const M=r.a,L=t.mul(r.b,l6);let W=t.mul(T,_),X=t.mul(x,I),te=t.mul(A,O),J=t.add(T,x),j=t.add(_,I);J=t.mul(J,j),j=t.add(W,X),J=t.sub(J,j),j=t.add(T,A);let Z=t.add(_,O);return j=t.mul(j,Z),Z=t.add(W,te),j=t.sub(j,Z),Z=t.add(x,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(X,te),Z=t.sub(Z,C),R=t.mul(M,j),C=t.mul(L,te),R=t.add(C,R),C=t.sub(X,R),R=t.add(X,R),g=t.mul(C,R),X=t.add(W,W),X=t.add(X,W),te=t.mul(M,te),j=t.mul(L,j),X=t.add(X,te),te=t.sub(W,te),te=t.mul(M,te),j=t.add(j,te),W=t.mul(X,j),g=t.add(g,W),W=t.mul(Z,j),C=t.mul(J,C),C=t.sub(C,W),W=t.mul(J,X),R=t.mul(Z,R),R=t.add(R,W),new c(C,g,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const x=t.invertBatch(T.map(A=>A.pz));return T.map((A,_)=>A.toAffine(x[_])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Wl)return T;if(a(b),b===Co)return this;const{endo:x}=r;if(!x)return y.unsafeLadder(this,b);let{k1neg:A,k1:_,k2neg:I,k2:O}=x.splitScalar(b),C=T,g=T,R=this;for(;_>Wl||O>Wl;)_&Co&&(C=C.add(R)),O&Co&&(g=g.add(R)),R=R.double(),_>>=Co,O>>=Co;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,x.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,x,A;const{endo:_}=r;if(_){const{k1neg:I,k1:O,k2neg:C,k2:g}=_.splitScalar(T);let{p:R,f:M}=this.wNAF(O),{p:L,f:W}=this.wNAF(g);R=y.constTimeNegate(I,R),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,_.beta),L.py,L.pz),x=R.add(L),A=M.add(W)}else{const{p:I,f:O}=this.wNAF(T);x=I,A=O}return c.normalizeZ([x,A])[0]}multiplyAndAddUnsafe(b,T,x){const A=c.BASE,_=(O,C)=>C===Wl||C===Co||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=_(this,T).add(_(b,x));return I.is0()?void 0:I}toAffine(b){const{px:T,py:x,pz:A}=this,_=this.is0();b==null&&(b=_?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(x,b),C=t.mul(A,b);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Co)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Co?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Ap(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=Lce(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Uce(e){const r=KH(e);return dm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Wce(e){const r=Uce(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Wl<j&&j<t.ORDER}function a(j){return Ai(j,n)}function l(j){return FT(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:c,isWithinCurveOrder:d}=Hce({...r,toBytes(j,Z,se){const Ee=Z.toAffine(),me=t.toBytes(Ee.x),Pe=gh;return se?Pe(Uint8Array.from([Z.hasEvenY()?2:3]),me):Pe(Uint8Array.from([4]),me,t.toBytes(Ee.y))},fromBytes(j){const Z=j.length,se=j[0],Ee=j.subarray(1);if(Z===i&&(se===2||se===3)){const me=Ns(Ee);if(!o(me))throw new Error("Point is not on curve");const Pe=c(me);let Ue=t.sqrt(Pe);const Ge=(Ue&Co)===Co;return(se&1)===1!==Ge&&(Ue=t.neg(Ue)),{x:me,y:Ue}}else if(Z===s&&se===4){const me=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:me,y:Pe}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>Ap($c(j,r.nByteLength));function w(j){const Z=n>>Co;return j>Z}function b(j){return w(j)?a(-j):j}const T=(j,Z,se)=>Ns(j.slice(Z,se));class x{constructor(Z,se,Ee){this.r=Z,this.s=se,this.recovery=Ee,this.assertValidity()}static fromCompact(Z){const se=r.nByteLength;return Z=Ti("compactSignature",Z,se*2),new x(T(Z,0,se),T(Z,se,2*se))}static fromDER(Z){const{r:se,s:Ee}=jf.toSig(Ti("DER",Z));return new x(se,Ee)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new x(this.r,this.s,Z)}recoverPublicKey(Z){const{r:se,s:Ee,recovery:me}=this,Pe=g(Ti("msgHash",Z));if(me==null||![0,1,2,3].includes(me))throw new Error("recovery id invalid");const Ue=me===2||me===3?se+r.n:se;if(Ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=me&1?"03":"02",it=u.fromHex(Ge+y(Ue)),_e=l(Ue),pe=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,pe,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Op(this.toDERHex())}toDERHex(){return jf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Op(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return h(j),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),Z=Bce(j,n);return $c(Z,r.nByteLength)},precompute(j=8,Z=u.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function _(j,Z=!0){return u.fromPrivateKey(j).toRawBytes(Z)}function I(j){const Z=j instanceof Uint8Array,se=typeof j=="string",Ee=(Z||se)&&j.length;return Z?Ee===i||Ee===s:se?Ee===2*i||Ee===2*s:j instanceof u}function O(j,Z,se=!0){if(I(j))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(h(j)).toRawBytes(se)}const C=r.bits2int||function(j){const Z=Ns(j),se=j.length*8-r.nBitLength;return se>0?Z>>BigInt(se):Z},g=r.bits2int_modN||function(j){return a(C(j))},R=T3(r.nBitLength);function M(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Wl<=j&&j<R))throw new Error(`bigint expected < 2^${r.nBitLength}`);return $c(j,r.nByteLength)}function L(j,Z,se=W){if(["recovered","canonical"].some(S=>S in se))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:me}=r;let{lowS:Pe,prehash:Ue,extraEntropy:Ge}=se;Pe==null&&(Pe=!0),j=Ti("msgHash",j),Ue&&(j=Ti("prehashed msgHash",Ee(j)));const it=g(j),_e=h(Z),pe=[M(_e),M(it)];if(Ge!=null){const S=Ge===!0?me(t.BYTES):Ge;pe.push(Ti("extraEntropy",S,t.BYTES))}const Te=gh(...pe),je=it;function $(S){const N=C(S);if(!d(N))return;const F=l(N),z=u.BASE.multiply(N).toAffine(),V=a(z.x);if(V===Wl)return;const ae=a(F*a(je+V*_e));if(ae===Wl)return;let ve=(z.x===V?0:2)|Number(z.y&Co),He=ae;return Pe&&w(ae)&&(He=b(ae),ve^=1),new x(V,He,ve)}return{seed:Te,k2sig:$}}const W={lowS:r.lowS,prehash:!1},X={lowS:r.lowS,prehash:!1};function te(j,Z,se=W){const{seed:Ee,k2sig:me}=L(j,Z,se),Pe=r;return WH(Pe.hash.outputLen,Pe.nByteLength,Pe.hmac)(Ee,me)}u.BASE._setWindowSize(8);function J(j,Z,se,Ee=X){var z;const me=j;if(Z=Ti("msgHash",Z),se=Ti("publicKey",se),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:Ue}=Ee;let Ge,it;try{if(typeof me=="string"||me instanceof Uint8Array)try{Ge=x.fromDER(me)}catch(V){if(!(V instanceof jf.Err))throw V;Ge=x.fromCompact(me)}else if(typeof me=="object"&&typeof me.r=="bigint"&&typeof me.s=="bigint"){const{r:V,s:ae}=me;Ge=new x(V,ae)}else throw new Error("PARSE");it=u.fromHex(se)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ge.hasHighS())return!1;Ue&&(Z=r.hash(Z));const{r:_e,s:pe}=Ge,Te=g(Z),je=l(pe),$=a(Te*je),S=a(_e*je),N=(z=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:z.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:_,getSharedSecret:O,sign:te,verify:J,ProjectivePoint:u,Signature:x,utils:A}}let qH=class extends LH{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Ff.hash(r);const n=x3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Ff.exists(this),this.iHash.update(r),this}digestInto(r){Ff.exists(this),Ff.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const VH=(e,r,t)=>new qH(e,r).update(t).digest();VH.create=(e,r)=>new qH(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Kce(e){return{hash:e,hmac:(r,...t)=>VH(e,r,MH(...t)),randomBytes:E3}}function qce(e,r){const t=n=>Wce({...e,...Kce(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),GH=BigInt(1),Pw=BigInt(2),u6=(e,r)=>(e+r/Pw)/r;function YH(e){const r=f_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,h=u*u*e%r,c=ko(h,t,r)*h%r,d=ko(c,t,r)*h%r,y=ko(d,Pw,r)*u%r,w=ko(y,i,r)*y%r,b=ko(w,s,r)*w%r,T=ko(b,a,r)*b%r,x=ko(T,l,r)*T%r,A=ko(x,a,r)*b%r,_=ko(A,t,r)*h%r,I=ko(_,o,r)*w%r,O=ko(I,n,r)*u%r,C=ko(O,Pw,r);if(!jT.eql(jT.sqr(C),e))throw new Error("Cannot find square root");return C}const jT=Dce(f_,void 0,void 0,{sqrt:YH}),pm=qce({a:BigInt(0),b:BigInt(7),Fp:jT,n:Cw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Cw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-GH*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=u6(s*e,r),l=u6(-n*e,r);let u=Ai(e-a*t-l*i,r),h=Ai(-a*n-l*s,r);const c=u>o,d=h>o;if(c&&(u=r-u),d&&(h=r-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:h}}}},Ip),h_=BigInt(0),ZH=e=>typeof e=="bigint"&&h_<e&&e<f_,Vce=e=>typeof e=="bigint"&&h_<e&&e<Cw,c6={};function Nw(e,...r){let t=c6[e];if(t===void 0){const n=Ip(Uint8Array.from(e,i=>i.charCodeAt(0)));t=gh(n,n),c6[e]=t}return Ip(gh(t,...r))}const A3=e=>e.toRawBytes(!0).slice(1),zT=e=>$c(e,32),cE=e=>Ai(e,f_),Ey=e=>Ai(e,Cw),O3=pm.ProjectivePoint,Gce=(e,r,t)=>O3.BASE.multiplyAndAddUnsafe(e,r,t);function HT(e){let r=pm.utils.normPrivateKeyToScalar(e),t=O3.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ey(-r),bytes:A3(t)}}function XH(e){if(!ZH(e))throw new Error("bad x: need 0 < x < p");const r=cE(e*e),t=cE(r*e+BigInt(7));let n=YH(t);n%Pw!==h_&&(n=cE(-n));const i=new O3(e,n,GH);return i.assertValidity(),i}function JH(...e){return Ey(Ns(Nw("BIP0340/challenge",...e)))}function Yce(e){return HT(e).bytes}function Zce(e,r,t=E3(32)){const n=Ti("message",e),{bytes:i,scalar:s}=HT(r),o=Ti("auxRand",t,32),a=zT(s^Ns(Nw("BIP0340/aux",o))),l=Nw("BIP0340/nonce",a,i,n),u=Ey(Ns(l));if(u===h_)throw new Error("sign failed: k is zero");const{bytes:h,scalar:c}=HT(u),d=JH(h,i,n),y=new Uint8Array(64);if(y.set(h,0),y.set(zT(Ey(c+d*s)),32),!QH(y,n,i))throw new Error("sign: Invalid signature produced");return y}function QH(e,r,t){const n=Ti("signature",e,64),i=Ti("message",r),s=Ti("publicKey",t,32);try{const o=XH(Ns(s)),a=Ns(n.subarray(0,32));if(!ZH(a))return!1;const l=Ns(n.subarray(32,64));if(!Vce(l))return!1;const u=JH(zT(a),A3(o),i),h=Gce(o,l,Ey(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}const ov=(()=>({getPublicKey:Yce,sign:Zce,verify:QH,utils:{randomPrivateKey:pm.utils.randomPrivateKey,lift_x:XH,pointToBytes:A3,numberToBytesBE:$c,bytesToNumberBE:Ns,taggedHash:Nw,mod:Ai}}))();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Aa(...e){const r=(i,s)=>o=>i(s(o)),t=Array.from(e).reverse().reduce((i,s)=>i?r(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?r(i,s.decode):s.decode,void 0);return{encode:t,decode:n}}function pl(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return r.map(t=>{if(Wc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("alphabet.decode input should be array of strings");return r.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})}}}function vl(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of r)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return r.join(e)},decode:r=>{if(typeof r!="string")throw new Error("join.decode input should be string");return r.split(e)}}}function vm(e,r="="){if(Wc(e),typeof r!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function eU(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:r=>r,decode:r=>e(r)}}function f6(e,r,t){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(Wc(o),o<0||o>=r)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let l=n;l<s.length;l++){const u=s[l],h=r*o+u;if(!Number.isSafeInteger(h)||r*o/r!==o||h-u!==r*o)throw new Error("convertRadix: carry overflow");if(o=h%t,s[l]=Math.floor(h/t),!Number.isSafeInteger(s[l])||s[l]*t+o!==h)throw new Error("convertRadix: carry overflow");if(a)s[l]?a=!1:n=l;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const tU=(e,r)=>r?tU(r,e%r):e,Rw=(e,r)=>e+(r-tU(e,r));function UT(e,r,t,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Rw(r,t)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${t} carryBits=${Rw(r,t)}`);let i=0,s=0;const o=2**t-1,a=[];for(const l of e){if(Wc(l),l>=2**r)throw new Error(`convertRadix2: invalid data word=${l} from=${r}`);if(i=i<<r|l,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=t;s-=t)a.push((i>>s-t&o)>>>0);i&=2**s-1}if(i=i<<t-s&o,!n&&s>=r)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function rU(e){return Wc(e),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return f6(Array.from(r),2**8,e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(f6(r,e,2**8))}}}function mu(e,r=!1){if(Wc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Rw(8,e)>32||Rw(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return UT(Array.from(t),8,e,!r)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(UT(t,e,8,r))}}}function h6(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...r){try{return e.apply(null,r)}catch{}}}function nU(e,r){if(Wc(e),typeof r!="function")throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=r(t).slice(0,e),i=new Uint8Array(t.length+e);return i.set(t),i.set(n,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-e),i=r(n).slice(0,e),s=t.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}const Lg={alphabet:pl,chain:Aa,checksum:nU,radix:rU,radix2:mu,join:vl,padding:vm},iU=Aa(mu(4),pl("0123456789ABCDEF"),vl("")),sU=Aa(mu(5),pl("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),vm(5),vl("")),Xce=Aa(mu(5),pl("0123456789ABCDEFGHIJKLMNOPQRSTUV"),vm(5),vl("")),Jce=Aa(mu(5),pl("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),vl(""),eU(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Wo=Aa(mu(6),pl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),vm(6),vl("")),oU=Aa(mu(6),pl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),vm(6),vl("")),C3=e=>Aa(rU(58),pl(e),vl("")),Sy=C3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Qce=C3("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),efe=C3("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),d6=[0,2,3,5,6,7,9,10,11],aU={encode(e){let r="";for(let t=0;t<e.length;t+=8){const n=e.subarray(t,t+8);r+=Sy.encode(n).padStart(d6[n.length],"1")}return r},decode(e){let r=[];for(let t=0;t<e.length;t+=11){const n=e.slice(t,t+11),i=d6.indexOf(n.length),s=Sy.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},P3=e=>Aa(nU(4,r=>e(e(r))),Sy),WT=Aa(pl("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),vl("")),p6=[996825010,642813549,513874426,1027748829,705979059];function xg(e){const r=e>>25;let t=(e&33554431)<<5;for(let n=0;n<p6.length;n++)(r>>n&1)===1&&(t^=p6[n]);return t}function v6(e,r,t=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=xg(i)^o>>5}i=xg(i);for(let s=0;s<n;s++)i=xg(i)^e.charCodeAt(s)&31;for(let s of r)i=xg(i)^s;for(let s=0;s<6;s++)i=xg(i);return i^=t,WT.encode(UT([i%2**30],30,5,!1))}function lU(e){const r=e==="bech32"?1:734539939,t=mu(5),n=t.decode,i=t.encode,s=h6(n);function o(h,c,d=90){if(typeof h!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof h}`);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof c}`);const y=h.length+7+c.length;if(d!==!1&&y>d)throw new TypeError(`Length ${y} exceeds limit ${d}`);return h=h.toLowerCase(),`${h}1${WT.encode(c)}${v6(h,c,r)}`}function a(h,c=90){if(typeof h!="string")throw new Error(`bech32.decode input should be string, not ${typeof h}`);if(h.length<8||c!==!1&&h.length>c)throw new TypeError(`Wrong string length: ${h.length} (${h}). Expected (8..${c})`);const d=h.toLowerCase();if(h!==d&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");h=d;const y=h.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=h.slice(0,y),b=h.slice(y+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");const T=WT.decode(b).slice(0,-6),x=v6(w,T,r);if(!b.endsWith(x))throw new Error(`Invalid checksum in ${h}: expected "${x}"`);return{prefix:w,words:T}}const l=h6(a);function u(h){const{prefix:c,words:d}=a(h,!1);return{prefix:c,words:d,bytes:n(d)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const Nn=lU("bech32"),tfe=lU("bech32m"),uU={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},cU=Aa(mu(4),pl("0123456789abcdef"),vl(""),eU(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),ky={utf8:uU,hex:cU,base16:iU,base32:sU,base64:Wo,base64url:oU,base58:Sy,base58xmr:aU},fU=`Invalid encoding type. Available types: ${Object.keys(ky).join(", ")}`,hU=(e,r)=>{if(typeof e!="string"||!ky.hasOwnProperty(e))throw new TypeError(fU);if(!(r instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return ky[e].encode(r)},rfe=hU,dU=(e,r)=>{if(!ky.hasOwnProperty(e))throw new TypeError(fU);if(typeof r!="string")throw new TypeError("stringToBytes() expects string");return ky[e].decode(r)},nfe=dU,ife=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Wc,base16:iU,base32:sU,base32crockford:Jce,base32hex:Xce,base58:Sy,base58check:P3,base58flickr:Qce,base58xmr:aU,base58xrp:efe,base64:Wo,base64url:oU,bech32:Nn,bech32m:tfe,bytes:nfe,bytesToString:hU,hex:cU,str:rfe,stringToBytes:dU,utf8:uU,utils:Lg},Symbol.toStringTag,{value:"Module"})),pU=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);function KT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function sfe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function vU(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function ofe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");KT(e.outputLen),KT(e.blockLen)}function afe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function lfe(e,r){vU(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const eo={number:KT,bool:sfe,bytes:vU,hash:ofe,exists:afe,output:lfe},fE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const z1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),qa=(e,r)=>e<<32-r|e>>>r,ufe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ufe)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function cfe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ty(e){if(typeof e=="string"&&(e=cfe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let gU=class{clone(){return this._cloneInto()}};const ffe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function hfe(e,r){if(r!==void 0&&(typeof r!="object"||!ffe(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function av(e){const r=n=>e().update(Ty(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function dfe(e=32){if(fE&&typeof fE.getRandomValues=="function")return fE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let yU=class extends gU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,eo.hash(r);const n=Ty(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return eo.exists(this),this.iHash.update(r),this}digestInto(r){eo.exists(this),eo.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const mU=(e,r,t)=>new yU(e,r).update(t).digest();mU.create=(e,r)=>new yU(e,r);function pfe(e,r,t,n){eo.hash(e);const i=hfe({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(eo.number(s),eo.number(o),eo.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Ty(r),u=Ty(t),h=new Uint8Array(o),c=mU.create(e,l),d=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:h,PRF:c,PRFSalt:d}}function vfe(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function gfe(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=pfe(e,r,t,n);let u;const h=new Uint8Array(4),c=z1(h),d=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(h).digestInto(d),b.set(d.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(d).digestInto(d);for(let x=0;x<b.length;x++)b[x]^=d[x]}}return vfe(a,l,o,u,d)}function yfe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let bU=class extends gU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=z1(this.buffer)}update(r){eo.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Ty(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=z1(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){eo.exists(this),eo.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;yfe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=z1(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const mfe=(e,r,t)=>e&r^~e&t,bfe=(e,r,t)=>e&r^e&t^r&t,wfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hu=new Uint32Array(64);let wU=class extends bU{constructor(){super(64,32,8,!1),this.A=zu[0]|0,this.B=zu[1]|0,this.C=zu[2]|0,this.D=zu[3]|0,this.E=zu[4]|0,this.F=zu[5]|0,this.G=zu[6]|0,this.H=zu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Hu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Hu[c-15],y=Hu[c-2],w=qa(d,7)^qa(d,18)^d>>>3,b=qa(y,17)^qa(y,19)^y>>>10;Hu[c]=b+Hu[c-7]+w+Hu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const d=qa(a,6)^qa(a,11)^qa(a,25),y=h+d+mfe(a,l,u)+wfe[c]+Hu[c]|0,b=(qa(n,2)^qa(n,13)^qa(n,22))+bfe(n,i,s)|0;h=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Hu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},$fe=class extends wU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const _fe=av(()=>new wU);av(()=>new $fe);const $b=BigInt(2**32-1),qT=BigInt(32);function $U(e,r=!1){return r?{h:Number(e&$b),l:Number(e>>qT&$b)}:{h:Number(e>>qT&$b)|0,l:Number(e&$b)|0}}function xfe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=$U(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Efe=(e,r)=>BigInt(e>>>0)<<qT|BigInt(r>>>0),Sfe=(e,r,t)=>e>>>t,kfe=(e,r,t)=>e<<32-t|r>>>t,Tfe=(e,r,t)=>e>>>t|r<<32-t,Ife=(e,r,t)=>e<<32-t|r>>>t,Afe=(e,r,t)=>e<<64-t|r>>>t-32,Ofe=(e,r,t)=>e>>>t-32|r<<64-t,Cfe=(e,r)=>r,Pfe=(e,r)=>e,Nfe=(e,r,t)=>e<<t|r>>>32-t,Rfe=(e,r,t)=>r<<t|e>>>32-t,Dfe=(e,r,t)=>r<<t-32|e>>>64-t,Bfe=(e,r,t)=>e<<t-32|r>>>64-t;function Mfe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Lfe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Ffe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,jfe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),zfe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Hfe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Ufe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,nr={fromBig:$U,split:xfe,toBig:Efe,shrSH:Sfe,shrSL:kfe,rotrSH:Tfe,rotrSL:Ife,rotrBH:Afe,rotrBL:Ofe,rotr32H:Cfe,rotr32L:Pfe,rotlSH:Nfe,rotlSL:Rfe,rotlBH:Dfe,rotlBL:Bfe,add:Mfe,add3L:Lfe,add3H:Ffe,add4L:jfe,add4H:zfe,add5H:Ufe,add5L:Hfe},[Wfe,Kfe]=nr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Uu=new Uint32Array(80),Wu=new Uint32Array(80);let d_=class extends bU{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,h,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,h,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let _=0;_<16;_++,t+=4)Uu[_]=r.getUint32(t),Wu[_]=r.getUint32(t+=4);for(let _=16;_<80;_++){const I=Uu[_-15]|0,O=Wu[_-15]|0,C=nr.rotrSH(I,O,1)^nr.rotrSH(I,O,8)^nr.shrSH(I,O,7),g=nr.rotrSL(I,O,1)^nr.rotrSL(I,O,8)^nr.shrSL(I,O,7),R=Uu[_-2]|0,M=Wu[_-2]|0,L=nr.rotrSH(R,M,19)^nr.rotrBH(R,M,61)^nr.shrSH(R,M,6),W=nr.rotrSL(R,M,19)^nr.rotrBL(R,M,61)^nr.shrSL(R,M,6),X=nr.add4L(g,W,Wu[_-7],Wu[_-16]),te=nr.add4H(X,C,L,Uu[_-7],Uu[_-16]);Uu[_]=te|0,Wu[_]=X|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:x,Hl:A}=this;for(let _=0;_<80;_++){const I=nr.rotrSH(c,d,14)^nr.rotrSH(c,d,18)^nr.rotrBH(c,d,41),O=nr.rotrSL(c,d,14)^nr.rotrSL(c,d,18)^nr.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,R=nr.add5L(A,O,g,Kfe[_],Wu[_]),M=nr.add5H(R,x,I,C,Wfe[_],Uu[_]),L=R|0,W=nr.rotrSH(n,i,28)^nr.rotrBH(n,i,34)^nr.rotrBH(n,i,39),X=nr.rotrSL(n,i,28)^nr.rotrBL(n,i,34)^nr.rotrBL(n,i,39),te=n&s^n&a^s&a,J=i&o^i&l^o&l;x=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=nr.add(u|0,h|0,M|0,L|0),u=a|0,h=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=nr.add3L(L,X,J);n=nr.add3H(j,M,W,te),i=j|0}({h:n,l:i}=nr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=nr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=nr.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=nr.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:c,l:d}=nr.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=nr.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=nr.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:x,l:A}=nr.add(this.Hh|0,this.Hl|0,x|0,A|0),this.set(n,i,s,o,a,l,u,h,c,d,y,w,b,T,x,A)}roundClean(){Uu.fill(0),Wu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},qfe=class extends d_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Vfe=class extends d_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Gfe=class extends d_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Yfe=av(()=>new d_);av(()=>new qfe);av(()=>new Vfe);av(()=>new Gfe);const Zfe=e=>e[0]==="";function _U(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function xU(e){const r=_U(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function EU(e){eo.bytes(e,16,20,24,28,32)}function Xfe(e,r=128){if(eo.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return ehe(dfe(r/8),e)}const Jfe=e=>{const r=8-e.length/4;return new Uint8Array([_fe(e)[0]>>r<<r])};function SU(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),Lg.chain(Lg.checksum(1,Jfe),Lg.radix2(11,!0),Lg.alphabet(e))}function Qfe(e,r){const{words:t}=xU(e),n=SU(r).decode(t);return EU(n),n}function ehe(e,r){return EU(e),SU(r).encode(e).join(Zfe(r)?"":" ")}function the(e,r){try{Qfe(e,r)}catch{return!1}return!0}const rhe=e=>_U(`mnemonic${e}`);function kU(e,r=""){return gfe(Yfe,xU(e).nfkd,rhe(r),{c:2048,dkLen:64})}function VT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function nhe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Of(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function ihe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");VT(e.outputLen),VT(e.blockLen)}function she(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ohe(e,r){Of(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const zf={number:VT,bool:nhe,bytes:Of,hash:ihe,exists:she,output:ohe},hE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N3=e=>e instanceof Uint8Array,up=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Va=(e,r)=>e<<32-r|e>>>r,ahe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ahe)throw new Error("Non little-endian hardware is not supported");const lhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function uhe(e){if(!N3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=lhe[e[t]];return r}function che(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function TU(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function R3(e){if(typeof e=="string"&&(e=TU(e)),!N3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Fg(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!N3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let IU=class{clone(){return this._cloneInto()}};function Nh(e){const r=n=>e().update(R3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function fhe(e=32){if(hE&&typeof hE.getRandomValues=="function")return hE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let AU=class extends IU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,zf.hash(r);const n=R3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return zf.exists(this),this.iHash.update(r),this}digestInto(r){zf.exists(this),zf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Dw=(e,r,t)=>new AU(e,r).update(t).digest();Dw.create=(e,r)=>new AU(e,r);function hhe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let D3=class extends IU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=up(this.buffer)}update(r){zf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=R3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=up(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){zf.exists(this),zf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;hhe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=up(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const dhe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),OU=Uint8Array.from({length:16},(e,r)=>r),phe=OU.map(e=>(9*e+5)%16);let B3=[OU],M3=[phe];for(let e=0;e<4;e++)for(let r of[B3,M3])r.push(r[e].map(t=>dhe[t]));const CU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),vhe=B3.map((e,r)=>e.map(t=>CU[r][t])),ghe=M3.map((e,r)=>e.map(t=>CU[r][t])),yhe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),mhe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),_b=(e,r)=>e<<r|e>>>32-r;function g6(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const xb=new Uint32Array(16);let bhe=class extends D3{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)xb[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,h=u,c=this.h4|0,d=c;for(let y=0;y<5;y++){const w=4-y,b=yhe[y],T=mhe[y],x=B3[y],A=M3[y],_=vhe[y],I=ghe[y];for(let O=0;O<16;O++){const C=_b(n+g6(y,s,a,u)+xb[x[O]]+b,_[O])+c|0;n=c,c=u,u=_b(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=_b(i+g6(w,o,l,h)+xb[A[O]]+T,I[O])+d|0;i=d,d=h,h=_b(l,10)|0,l=o,o=C}}this.set(this.h1+a+h|0,this.h2+u+d|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){xb.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const whe=Nh(()=>new bhe),$he=(e,r,t)=>e&r^~e&t,_he=(e,r,t)=>e&r^e&t^r&t,xhe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ku=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qu=new Uint32Array(64);let PU=class extends D3{constructor(){super(64,32,8,!1),this.A=Ku[0]|0,this.B=Ku[1]|0,this.C=Ku[2]|0,this.D=Ku[3]|0,this.E=Ku[4]|0,this.F=Ku[5]|0,this.G=Ku[6]|0,this.H=Ku[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)qu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=qu[c-15],y=qu[c-2],w=Va(d,7)^Va(d,18)^d>>>3,b=Va(y,17)^Va(y,19)^y>>>10;qu[c]=b+qu[c-7]+w+qu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const d=Va(a,6)^Va(a,11)^Va(a,25),y=h+d+$he(a,l,u)+xhe[c]+qu[c]|0,b=(Va(n,2)^Va(n,13)^Va(n,22))+_he(n,i,s)|0;h=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){qu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Ehe=class extends PU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const L3=Nh(()=>new PU);Nh(()=>new Ehe);const Eb=BigInt(2**32-1),GT=BigInt(32);function NU(e,r=!1){return r?{h:Number(e&Eb),l:Number(e>>GT&Eb)}:{h:Number(e>>GT&Eb)|0,l:Number(e&Eb)|0}}function She(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=NU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const khe=(e,r)=>BigInt(e>>>0)<<GT|BigInt(r>>>0),The=(e,r,t)=>e>>>t,Ihe=(e,r,t)=>e<<32-t|r>>>t,Ahe=(e,r,t)=>e>>>t|r<<32-t,Ohe=(e,r,t)=>e<<32-t|r>>>t,Che=(e,r,t)=>e<<64-t|r>>>t-32,Phe=(e,r,t)=>e>>>t-32|r<<64-t,Nhe=(e,r)=>r,Rhe=(e,r)=>e,Dhe=(e,r,t)=>e<<t|r>>>32-t,Bhe=(e,r,t)=>r<<t|e>>>32-t,Mhe=(e,r,t)=>r<<t-32|e>>>64-t,Lhe=(e,r,t)=>e<<t-32|r>>>64-t;function Fhe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const jhe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),zhe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Hhe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Uhe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Whe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Khe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,ir={fromBig:NU,split:She,toBig:khe,shrSH:The,shrSL:Ihe,rotrSH:Ahe,rotrSL:Ohe,rotrBH:Che,rotrBL:Phe,rotr32H:Nhe,rotr32L:Rhe,rotlSH:Dhe,rotlSL:Bhe,rotlBH:Mhe,rotlBL:Lhe,add:Fhe,add3L:jhe,add3H:zhe,add4L:Hhe,add4H:Uhe,add5H:Khe,add5L:Whe},[qhe,Vhe]=ir.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Vu=new Uint32Array(80),Gu=new Uint32Array(80);let p_=class extends D3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,h,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,h,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let _=0;_<16;_++,t+=4)Vu[_]=r.getUint32(t),Gu[_]=r.getUint32(t+=4);for(let _=16;_<80;_++){const I=Vu[_-15]|0,O=Gu[_-15]|0,C=ir.rotrSH(I,O,1)^ir.rotrSH(I,O,8)^ir.shrSH(I,O,7),g=ir.rotrSL(I,O,1)^ir.rotrSL(I,O,8)^ir.shrSL(I,O,7),R=Vu[_-2]|0,M=Gu[_-2]|0,L=ir.rotrSH(R,M,19)^ir.rotrBH(R,M,61)^ir.shrSH(R,M,6),W=ir.rotrSL(R,M,19)^ir.rotrBL(R,M,61)^ir.shrSL(R,M,6),X=ir.add4L(g,W,Gu[_-7],Gu[_-16]),te=ir.add4H(X,C,L,Vu[_-7],Vu[_-16]);Vu[_]=te|0,Gu[_]=X|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:x,Hl:A}=this;for(let _=0;_<80;_++){const I=ir.rotrSH(c,d,14)^ir.rotrSH(c,d,18)^ir.rotrBH(c,d,41),O=ir.rotrSL(c,d,14)^ir.rotrSL(c,d,18)^ir.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,R=ir.add5L(A,O,g,Vhe[_],Gu[_]),M=ir.add5H(R,x,I,C,qhe[_],Vu[_]),L=R|0,W=ir.rotrSH(n,i,28)^ir.rotrBH(n,i,34)^ir.rotrBH(n,i,39),X=ir.rotrSL(n,i,28)^ir.rotrBL(n,i,34)^ir.rotrBL(n,i,39),te=n&s^n&a^s&a,J=i&o^i&l^o&l;x=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=ir.add(u|0,h|0,M|0,L|0),u=a|0,h=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=ir.add3L(L,X,J);n=ir.add3H(j,M,W,te),i=j|0}({h:n,l:i}=ir.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ir.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ir.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=ir.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:c,l:d}=ir.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=ir.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=ir.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:x,l:A}=ir.add(this.Hh|0,this.Hl|0,x|0,A|0),this.set(n,i,s,o,a,l,u,h,c,d,y,w,b,T,x,A)}roundClean(){Vu.fill(0),Gu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Ghe=class extends p_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Yhe=class extends p_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Zhe=class extends p_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const y6=Nh(()=>new p_);Nh(()=>new Ghe);Nh(()=>new Yhe);Nh(()=>new Zhe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RU=BigInt(0),v_=BigInt(1),Xhe=BigInt(2),g_=e=>e instanceof Uint8Array,Jhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Cp(e){if(!g_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Jhe[e[t]];return r}function DU(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function F3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Pp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Qf(e){return F3(Cp(e))}function j3(e){if(!g_(e))throw new Error("Uint8Array expected");return F3(Cp(Uint8Array.from(e).reverse()))}function cp(e,r){return Pp(e.toString(16).padStart(r*2,"0"))}function BU(e,r){return cp(e,r).reverse()}function Qhe(e){return Pp(DU(e))}function Po(e,r,t){let n;if(typeof r=="string")try{n=Pp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(g_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Iy(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!g_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function ede(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function tde(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function rde(e){let r;for(r=0;e>RU;e>>=v_,r+=1);return r}function nde(e,r){return e>>BigInt(r)&v_}const ide=(e,r,t)=>e|(t?v_:RU)<<BigInt(r),z3=e=>(Xhe<<BigInt(e-1))-v_,dE=e=>new Uint8Array(e),m6=e=>Uint8Array.from(e);function MU(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=dE(e),i=dE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=dE())=>{i=a(m6([0]),c),n=a(),c.length!==0&&(i=a(m6([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Iy(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const sde={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function gm(e,r,t={}){const n=(i,s,o)=>{const a=sde[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const ode=Object.freeze(Object.defineProperty({__proto__:null,bitGet:nde,bitLen:rde,bitMask:z3,bitSet:ide,bytesToHex:Cp,bytesToNumberBE:Qf,bytesToNumberLE:j3,concatBytes:Iy,createHmacDrbg:MU,ensureBytes:Po,equalBytes:ede,hexToBytes:Pp,hexToNumber:F3,numberToBytesBE:cp,numberToBytesLE:BU,numberToHexUnpadded:DU,numberToVarBytesBE:Qhe,utf8ToBytes:tde,validateObject:gm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vi=BigInt(0),An=BigInt(1),Cf=BigInt(2),ade=BigInt(3),YT=BigInt(4),b6=BigInt(5),w6=BigInt(8);BigInt(9);BigInt(16);function ns(e,r){const t=e%r;return t>=vi?t:r+t}function lde(e,r,t){if(t<=vi||r<vi)throw new Error("Expected power/modulo > 0");if(t===An)return vi;let n=An;for(;r>vi;)r&An&&(n=n*e%t),e=e*e%t,r>>=An;return n}function To(e,r,t){let n=e;for(;r-- >vi;)n*=n,n%=t;return n}function ZT(e,r){if(e===vi||r<=vi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ns(e,r),n=r,i=vi,s=An;for(;t!==vi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==An)throw new Error("invert: does not exist");return ns(i,r)}function ude(e){const r=(e-An)/Cf;let t,n,i;for(t=e-An,n=0;t%Cf===vi;t/=Cf,n++);for(i=Cf;i<e&&lde(i,r,e)!==e-An;i++);if(n===1){const o=(e+An)/YT;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+An)/Cf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(h,An<<BigInt(u-y-1));h=a.sqr(w),c=a.mul(c,w),d=a.mul(d,h),u=y}return c}}function cde(e){if(e%YT===ade){const r=(e+An)/YT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%w6===b6){const r=(e-b6)/w6;return function(n,i){const s=n.mul(i,Cf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Cf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return ude(e)}const fde=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hde(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=fde.reduce((n,i)=>(n[i]="function",n),r);return gm(e,t)}function dde(e,r,t){if(t<vi)throw new Error("Expected power > 0");if(t===vi)return e.ONE;if(t===An)return r;let n=e.ONE,i=r;for(;t>vi;)t&An&&(n=e.mul(n,i)),i=e.sqr(i),t>>=An;return n}function pde(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function H3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function vde(e,r,t=!1,n={}){if(e<=vi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=H3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=cde(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:z3(i),ZERO:vi,ONE:An,create:l=>ns(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return vi<=l&&l<e},is0:l=>l===vi,isOdd:l=>(l&An)===An,neg:l=>ns(-l,e),eql:(l,u)=>l===u,sqr:l=>ns(l*l,e),add:(l,u)=>ns(l+u,e),sub:(l,u)=>ns(l-u,e),mul:(l,u)=>ns(l*u,e),pow:(l,u)=>dde(a,l,u),div:(l,u)=>ns(l*ZT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>ZT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>pde(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?BU(l,s):cp(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?j3(l):Qf(l)}});return Object.freeze(a)}function gde(e,r,t=!1){e=Po("privateHash",e);const n=e.length,i=H3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?j3(e):Qf(e);return ns(s,r-An)+An}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yde=BigInt(0),pE=BigInt(1);function mde(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>yde;)s&pE&&(o=o.add(a)),a=a.double(),s>>=pE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,h=u;for(let c=0;c<o;c++){h=u,l.push(h);for(let d=1;d<a;d++)h=h.add(u),l.push(h);u=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,h=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=pE);const x=b,A=b+Math.abs(T)-1,_=w%2!==0,I=T<0;T===0?h=h.add(t(_,s[x])):u=u.add(t(I,s[A]))}return{p:u,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function LU(e){return hde(e.Fp),gm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...H3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bde(e){const r=LU(e);gm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:wde,hexToBytes:$de}=ode,Hf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Hf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:wde(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Hf,t=typeof e=="string"?$de(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Hf._parseInt(t.subarray(2)),{d:o,l:a}=Hf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Kl=BigInt(0),No=BigInt(1);BigInt(2);const $6=BigInt(3);BigInt(4);function _de(e){const r=bde(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const x=b.toAffine();return Iy(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),x=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:x}});function s(w){const{a:b,b:T}=r,x=t.sqr(w),A=t.mul(x,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Kl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:x,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Cp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let _;try{_=typeof w=="bigint"?w:Qf(Po("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return x&&(_=ns(_,A)),a(_),_}const u=new Map;function h(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,x){if(this.px=b,this.py=T,this.pz=x,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(b){const{x:T,y:x}=b||{};if(!b||!t.isValid(T)||!t.isValid(x))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=_=>t.eql(_,t.ZERO);return A(T)&&A(x)?c.ZERO:new c(T,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(x=>x.pz));return b.map((x,A)=>x.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Po("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const x=t.sqr(T),A=s(b);if(!t.eql(x,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:T,py:x,pz:A}=this,{px:_,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(_,A)),g=t.eql(t.mul(x,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,x=t.mul(T,$6),{px:A,py:_,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,R=t.mul(A,A),M=t.mul(_,_),L=t.mul(I,I),W=t.mul(A,_);return W=t.add(W,W),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(x,L),C=t.add(O,C),O=t.sub(M,C),C=t.add(M,C),C=t.mul(O,C),O=t.mul(W,O),g=t.mul(x,g),L=t.mul(b,L),W=t.sub(R,L),W=t.mul(b,W),W=t.add(W,g),g=t.add(R,R),R=t.add(g,R),R=t.add(R,L),R=t.mul(R,W),C=t.add(C,R),L=t.mul(_,I),L=t.add(L,L),R=t.mul(L,W),O=t.sub(O,R),g=t.mul(L,M),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){h(b);const{px:T,py:x,pz:A}=this,{px:_,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,R=t.ZERO;const M=r.a,L=t.mul(r.b,$6);let W=t.mul(T,_),X=t.mul(x,I),te=t.mul(A,O),J=t.add(T,x),j=t.add(_,I);J=t.mul(J,j),j=t.add(W,X),J=t.sub(J,j),j=t.add(T,A);let Z=t.add(_,O);return j=t.mul(j,Z),Z=t.add(W,te),j=t.sub(j,Z),Z=t.add(x,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(X,te),Z=t.sub(Z,C),R=t.mul(M,j),C=t.mul(L,te),R=t.add(C,R),C=t.sub(X,R),R=t.add(X,R),g=t.mul(C,R),X=t.add(W,W),X=t.add(X,W),te=t.mul(M,te),j=t.mul(L,j),X=t.add(X,te),te=t.sub(W,te),te=t.mul(M,te),j=t.add(j,te),W=t.mul(X,j),g=t.add(g,W),W=t.mul(Z,j),C=t.mul(J,C),C=t.sub(C,W),W=t.mul(J,X),R=t.mul(Z,R),R=t.add(R,W),new c(C,g,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const x=t.invertBatch(T.map(A=>A.pz));return T.map((A,_)=>A.toAffine(x[_])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Kl)return T;if(a(b),b===No)return this;const{endo:x}=r;if(!x)return y.unsafeLadder(this,b);let{k1neg:A,k1:_,k2neg:I,k2:O}=x.splitScalar(b),C=T,g=T,R=this;for(;_>Kl||O>Kl;)_&No&&(C=C.add(R)),O&No&&(g=g.add(R)),R=R.double(),_>>=No,O>>=No;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,x.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,x,A;const{endo:_}=r;if(_){const{k1neg:I,k1:O,k2neg:C,k2:g}=_.splitScalar(T);let{p:R,f:M}=this.wNAF(O),{p:L,f:W}=this.wNAF(g);R=y.constTimeNegate(I,R),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,_.beta),L.py,L.pz),x=R.add(L),A=M.add(W)}else{const{p:I,f:O}=this.wNAF(T);x=I,A=O}return c.normalizeZ([x,A])[0]}multiplyAndAddUnsafe(b,T,x){const A=c.BASE,_=(O,C)=>C===Kl||C===No||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=_(this,T).add(_(b,x));return I.is0()?void 0:I}toAffine(b){const{px:T,py:x,pz:A}=this,_=this.is0();b==null&&(b=_?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(x,b),C=t.mul(A,b);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===No)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===No?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Cp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=mde(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function xde(e){const r=LU(e);return gm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Ede(e){const r=xde(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Kl<j&&j<t.ORDER}function a(j){return ns(j,n)}function l(j){return ZT(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:c,isWithinCurveOrder:d}=_de({...r,toBytes(j,Z,se){const Ee=Z.toAffine(),me=t.toBytes(Ee.x),Pe=Iy;return se?Pe(Uint8Array.from([Z.hasEvenY()?2:3]),me):Pe(Uint8Array.from([4]),me,t.toBytes(Ee.y))},fromBytes(j){const Z=j.length,se=j[0],Ee=j.subarray(1);if(Z===i&&(se===2||se===3)){const me=Qf(Ee);if(!o(me))throw new Error("Point is not on curve");const Pe=c(me);let Ue=t.sqrt(Pe);const Ge=(Ue&No)===No;return(se&1)===1!==Ge&&(Ue=t.neg(Ue)),{x:me,y:Ue}}else if(Z===s&&se===4){const me=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:me,y:Pe}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>Cp(cp(j,r.nByteLength));function w(j){const Z=n>>No;return j>Z}function b(j){return w(j)?a(-j):j}const T=(j,Z,se)=>Qf(j.slice(Z,se));class x{constructor(Z,se,Ee){this.r=Z,this.s=se,this.recovery=Ee,this.assertValidity()}static fromCompact(Z){const se=r.nByteLength;return Z=Po("compactSignature",Z,se*2),new x(T(Z,0,se),T(Z,se,2*se))}static fromDER(Z){const{r:se,s:Ee}=Hf.toSig(Po("DER",Z));return new x(se,Ee)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new x(this.r,this.s,Z)}recoverPublicKey(Z){const{r:se,s:Ee,recovery:me}=this,Pe=g(Po("msgHash",Z));if(me==null||![0,1,2,3].includes(me))throw new Error("recovery id invalid");const Ue=me===2||me===3?se+r.n:se;if(Ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=me&1?"03":"02",it=u.fromHex(Ge+y(Ue)),_e=l(Ue),pe=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,pe,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Pp(this.toDERHex())}toDERHex(){return Hf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Pp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return h(j),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),Z=gde(j,n);return cp(Z,r.nByteLength)},precompute(j=8,Z=u.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function _(j,Z=!0){return u.fromPrivateKey(j).toRawBytes(Z)}function I(j){const Z=j instanceof Uint8Array,se=typeof j=="string",Ee=(Z||se)&&j.length;return Z?Ee===i||Ee===s:se?Ee===2*i||Ee===2*s:j instanceof u}function O(j,Z,se=!0){if(I(j))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(h(j)).toRawBytes(se)}const C=r.bits2int||function(j){const Z=Qf(j),se=j.length*8-r.nBitLength;return se>0?Z>>BigInt(se):Z},g=r.bits2int_modN||function(j){return a(C(j))},R=z3(r.nBitLength);function M(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Kl<=j&&j<R))throw new Error(`bigint expected < 2^${r.nBitLength}`);return cp(j,r.nByteLength)}function L(j,Z,se=W){if(["recovered","canonical"].some(S=>S in se))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:me}=r;let{lowS:Pe,prehash:Ue,extraEntropy:Ge}=se;Pe==null&&(Pe=!0),j=Po("msgHash",j),Ue&&(j=Po("prehashed msgHash",Ee(j)));const it=g(j),_e=h(Z),pe=[M(_e),M(it)];if(Ge!=null){const S=Ge===!0?me(t.BYTES):Ge;pe.push(Po("extraEntropy",S,t.BYTES))}const Te=Iy(...pe),je=it;function $(S){const N=C(S);if(!d(N))return;const F=l(N),z=u.BASE.multiply(N).toAffine(),V=a(z.x);if(V===Kl)return;const ae=a(F*a(je+V*_e));if(ae===Kl)return;let ve=(z.x===V?0:2)|Number(z.y&No),He=ae;return Pe&&w(ae)&&(He=b(ae),ve^=1),new x(V,He,ve)}return{seed:Te,k2sig:$}}const W={lowS:r.lowS,prehash:!1},X={lowS:r.lowS,prehash:!1};function te(j,Z,se=W){const{seed:Ee,k2sig:me}=L(j,Z,se),Pe=r;return MU(Pe.hash.outputLen,Pe.nByteLength,Pe.hmac)(Ee,me)}u.BASE._setWindowSize(8);function J(j,Z,se,Ee=X){var z;const me=j;if(Z=Po("msgHash",Z),se=Po("publicKey",se),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:Ue}=Ee;let Ge,it;try{if(typeof me=="string"||me instanceof Uint8Array)try{Ge=x.fromDER(me)}catch(V){if(!(V instanceof Hf.Err))throw V;Ge=x.fromCompact(me)}else if(typeof me=="object"&&typeof me.r=="bigint"&&typeof me.s=="bigint"){const{r:V,s:ae}=me;Ge=new x(V,ae)}else throw new Error("PARSE");it=u.fromHex(se)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ge.hasHighS())return!1;Ue&&(Z=r.hash(Z));const{r:_e,s:pe}=Ge,Te=g(Z),je=l(pe),$=a(Te*je),S=a(_e*je),N=(z=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:z.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:_,getSharedSecret:O,sign:te,verify:J,ProjectivePoint:u,Signature:x,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sde(e){return{hash:e,hmac:(r,...t)=>Dw(e,r,Fg(...t)),randomBytes:fhe}}function kde(e,r){const t=n=>Ede({...e,...Sde(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),_6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Tde=BigInt(1),XT=BigInt(2),x6=(e,r)=>(e+r/XT)/r;function Ide(e){const r=FU,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,h=u*u*e%r,c=To(h,t,r)*h%r,d=To(c,t,r)*h%r,y=To(d,XT,r)*u%r,w=To(y,i,r)*y%r,b=To(w,s,r)*w%r,T=To(b,a,r)*b%r,x=To(T,l,r)*T%r,A=To(x,a,r)*b%r,_=To(A,t,r)*h%r,I=To(_,o,r)*w%r,O=To(I,n,r)*u%r,C=To(O,XT,r);if(!JT.eql(JT.sqr(C),e))throw new Error("Cannot find square root");return C}const JT=vde(FU,void 0,void 0,{sqrt:Ide}),Qa=kde({a:BigInt(0),b:BigInt(7),Fp:JT,n:_6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=_6,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Tde*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=x6(s*e,r),l=x6(-n*e,r);let u=ns(e-a*t-l*i,r),h=ns(-a*n-l*s,r);const c=u>o,d=h>o;if(c&&(u=r-u),d&&(h=r-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:h}}}},L3);BigInt(0);Qa.ProjectivePoint;const Sb=Qa.ProjectivePoint,vE=P3(L3);function E6(e){return BigInt(`0x${uhe(e)}`)}function Ade(e){return che(e.toString(16).padStart(64,"0"))}const Ode=TU("Bitcoin seed"),gE={private:76066276,public:76067358},yE=2147483648,Cde=e=>whe(L3(e)),Pde=e=>up(e).getUint32(0,!1),kb=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return up(r).setUint32(0,e,!1),r};let jU=class Ld{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Pde(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return vE.encode(this.serialize(this.versions.private,Fg(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return vE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=gE){if(Of(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=Dw(y6,Ode,r);return new Ld({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=gE){const n=vE.decode(r),i=up(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Ld({...o,privateKey:a.slice(1)}):new Ld({...o,publicKey:a})}static fromJSON(r){return Ld.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||gE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!Qa.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:E6(r.privateKey),this.privKeyBytes=Ade(this.privKey),this.pubKey=Qa.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=Sb.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Cde(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=yE)throw new Error("Invalid index");s[2]==="'"&&(o+=yE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=kb(r);if(r>=yE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Fg(new Uint8Array([0]),a,t)}else t=Fg(this.pubKey,t);const n=Dw(y6,this.chainCode,t),i=E6(n.slice(0,32)),s=n.slice(32);if(!Qa.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ns(this.privKey+i,Qa.CURVE.n);if(!Qa.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=Sb.fromHex(this.pubKey).add(Sb.fromPrivateKey(i));if(a.equals(Sb.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Ld(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Of(r,32),Qa.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Of(r,32),Of(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Qa.Signature.fromCompact(t)}catch{return!1}return Qa.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Of(t,33),Fg(kb(r),new Uint8Array([this.depth]),kb(this.parentFingerprint),kb(this.index),this.chainCode,t)}};var Nde=Object.defineProperty,Ni=(e,r)=>{for(var t in r)Nde(e,t,{get:r[t],enumerable:!0})};function U3(){return Bo(ov.utils.randomPrivateKey())}function yh(e){return Bo(ov.getPublicKey(e))}var Rde={};Ni(Rde,{MessageNode:()=>zU,MessageQueue:()=>Lde,insertEventIntoAscendingList:()=>Mde,insertEventIntoDescendingList:()=>Bde,normalizeURL:()=>Dde,utf8Decoder:()=>ql,utf8Encoder:()=>Ea});var ql=new TextDecoder("utf-8"),Ea=new TextEncoder;function Dde(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Bde(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Mde(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var zU=class{constructor(e){le(this,"_value");le(this,"_next");this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},Lde=class{constructor(){le(this,"_first");le(this,"_last");le(this,"_size");this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const r=new zU(e);return this._size===0||!this._last?(this._first=r,this._last=r):(this._last.next=r,this._last=r),this._size++,!0}dequeue(){if(this._size===0||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function Fde(e=255){return{kind:e,content:"",tags:[],created_at:0}}function HU(e,r){let t=e;return t.pubkey=yh(r),t.id=Oc(t),t.sig=y_(t,r),t}function jde(e){if(!Ay(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Oc(e){let r=Ip(Ea.encode(jde(e)));return Bo(r)}var zde=e=>e instanceof Object;function Ay(e){if(!zde(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function Np(e){try{return ov.verify(e.sig,Oc(e),e.pubkey)}catch{return!1}}function UU(e,r){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),y_(e,r)}function y_(e,r){return Bo(ov.sign(Oc(e),r))}function W3(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>e.until)}var Hde={};Ni(Hde,{getHex64:()=>K3,getInt:()=>WU,getSubscriptionId:()=>Ude,matchEventId:()=>Wde,matchEventKind:()=>qde,matchEventPubkey:()=>Kde});function K3(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function WU(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Ude(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Wde(e,r){return r===K3(e,"id")}function Kde(e,r){return r===K3(e,"pubkey")}function qde(e,r){return r===WU(e,"kind")}var cu={};Ni(cu,{BECH32_REGEX:()=>qU,decode:()=>m_,naddrEncode:()=>Jde,neventEncode:()=>Xde,noteEncode:()=>Yde,nprofileEncode:()=>Zde,npubEncode:()=>Gde,nrelayEncode:()=>Qde,nsecEncode:()=>Vde});var KU=5e3,qU=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function m_(e){var i,s,o,a,l,u,h;let{prefix:r,words:t}=Nn.decode(e,KU),n=new Uint8Array(Nn.fromWords(t));switch(r){case"nprofile":{let c=Tb(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Bo(c[0][0]),relays:c[1]?c[1].map(d=>ql.decode(d)):[]}}}case"nevent":{let c=Tb(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Bo(c[0][0]),relays:c[1]?c[1].map(d=>ql.decode(d)):[],author:(o=c[2])!=null&&o[0]?Bo(c[2][0]):void 0}}}case"naddr":{let c=Tb(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:ql.decode(c[0][0]),pubkey:Bo(c[2][0]),kind:parseInt(Bo(c[3][0]),16),relays:c[1]?c[1].map(d=>ql.decode(d)):[]}}}case"nrelay":{let c=Tb(n);if(!((h=c[0])!=null&&h[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:ql.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Bo(n)};default:throw new Error(`unknown prefix ${r}`)}}function Tb(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1];if(!i)throw new Error(`malformed TLV ${n}`);let s=t.slice(2,2+i);if(t=t.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${n}`);r[n]=r[n]||[],r[n].push(s)}return r}function Vde(e){return q3("nsec",e)}function Gde(e){return q3("npub",e)}function Yde(e){return q3("note",e)}function ym(e,r){let t=Nn.toWords(r);return Nn.encode(e,t,KU)}function q3(e,r){let t=Tp(r);return ym(e,t)}function Zde(e){let r=b_({0:[Tp(e.pubkey)],1:(e.relays||[]).map(t=>Ea.encode(t))});return ym("nprofile",r)}function Xde(e){let r=b_({0:[Tp(e.id)],1:(e.relays||[]).map(t=>Ea.encode(t)),2:e.author?[Tp(e.author)]:[]});return ym("nevent",r)}function Jde(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=b_({0:[Ea.encode(e.identifier)],1:(e.relays||[]).map(n=>Ea.encode(n)),2:[Tp(e.pubkey)],3:[new Uint8Array(r)]});return ym("naddr",t)}function Qde(e){let r=b_({0:[Ea.encode(e)]});return ym("nrelay",r)}function b_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),MH(...r)}var mh={};Ni(mh,{decrypt:()=>tpe,encrypt:()=>epe});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function epe(e,r,t){const n=pm.getSharedSecret(e,"02"+r),i=VU(n);let s=Uint8Array.from(E3(16)),o=Ea.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Wo.encode(new Uint8Array(l)),h=Wo.encode(new Uint8Array(s.buffer));return`${u}?iv=${h}`}async function tpe(e,r,t){let[n,i]=t.split("?iv="),s=pm.getSharedSecret(e,"02"+r),o=VU(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Wo.decode(n),u=Wo.decode(i),h=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return ql.decode(h)}function VU(e){return e.slice(1,33)}var rpe={};Ni(rpe,{NIP05_REGEX:()=>GU,queryProfile:()=>spe,searchDomain:()=>ipe,useFetchImplementation:()=>npe});var GU=/^(?:([\w.+-]+)@)?([\w.-]+)$/,w_;try{w_=fetch}catch{}function npe(e){w_=e}async function ipe(e,r=""){try{return(await(await w_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function spe(e){const r=e.match(GU);if(!r)return null;const[t,n="_",i]=r;try{const s=await w_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=ope(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function ope(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var ape={};Ni(ape,{generateSeedWords:()=>upe,privateKeyFromSeedWords:()=>lpe,validateWords:()=>cpe});function lpe(e,r){let n=jU.fromMasterSeed(kU(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Bo(n)}function upe(){return Xfe(pU)}function cpe(e){return the(e,pU)}var fpe={};Ni(fpe,{parse:()=>hpe});function hpe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},h=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(h){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var dpe={};Ni(dpe,{getPow:()=>ppe});function ppe(e){return vpe(Tp(e))}function vpe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=gpe(e[t]),r+=n,n===8);t++);return r}function gpe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var ype={};Ni(ype,{finishRepostEvent:()=>mpe,getRepostedEvent:()=>bpe,getRepostedEventPointer:()=>YU});function mpe(e,r,t,n){return HU({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function YU(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function bpe(e,{skipVerification:r}={}){const t=YU(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!Np(n)))return n}var wpe={};Ni(wpe,{NOSTR_URI_REGEX:()=>$_,parse:()=>_pe,test:()=>$pe});var $_=new RegExp(`nostr:(${qU.source})`);function $pe(e){return typeof e=="string"&&new RegExp(`^${$_.source}$`).test(e)}function _pe(e){const r=e.match(new RegExp(`^${$_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:m_(r[1])}}var xpe={};Ni(xpe,{finishReactionEvent:()=>Epe,getReactedEventPointer:()=>Spe});function Epe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return HU({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function Spe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var kpe={};Ni(kpe,{createDelegation:()=>Tpe,getDelegator:()=>Ipe});function Tpe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=Ip(Ea.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Bo(ov.sign(i,e));return{from:yh(e),to:r.pubkey,cond:n,sig:s}}function Ipe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,h]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(h))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(h))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(h))continue;return null}}let o=Ip(Ea.encode(`nostr:delegation:${e.pubkey}:${n}`));return ov.verify(i,o,t)?t:null}var Ape={};Ni(Ape,{matchAll:()=>Ope,regex:()=>V3,replaceAll:()=>Cpe});var V3=()=>new RegExp(`\\b${$_.source}\\b`,"g");function*Ope(e){const r=e.matchAll(V3());for(const t of r)try{const[n,i]=t;yield{uri:n,value:i,decoded:m_(i),start:t.index,end:t.index+n.length}}catch{}}function Cpe(e,r){return e.replaceAll(V3(),(t,n)=>r({uri:t,value:n,decoded:m_(n)}))}var Ppe={};Ni(Ppe,{useFetchImplementation:()=>Npe,validateGithub:()=>Rpe});var G3;try{G3=fetch}catch{}function Npe(e){G3=e}async function Rpe(e,r,t){try{return await(await G3(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var ZU={};Ni(ZU,{authenticate:()=>Dpe});var Dpe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Bpe={};Ni(Bpe,{getZapEndpoint:()=>Lpe,makeZapReceipt:()=>zpe,makeZapRequest:()=>Fpe,useFetchImplementation:()=>Mpe,validateZapRequest:()=>jpe});var Y3;try{Y3=fetch}catch{}function Mpe(e){Y3=e}async function Lpe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Nn.decode(t,1e3),a=Nn.fromWords(o);r=ql.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await Y3(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Fpe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function jpe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Ay(r))return"Zap request is not a valid Nostr event.";if(!Np(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function zpe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Hpe={};Ni(Hpe,{getToken:()=>Upe,validateToken:()=>Wpe});var XU="Nostr ";async function Upe(e,r,t,n=!1){if(!e||!r)throw new Error("Missing loginUrl or httpMethod");if(r!=="get"&&r!=="post")throw new Error("Unknown httpMethod");const i=Fde(27235);i.tags=[["u",e],["method",r]],i.created_at=Math.round(new Date().getTime()/1e3);const s=await t(i);return(n?XU:"")+Wo.encode(Ea.encode(JSON.stringify(s)))}async function Wpe(e,r,t){if(!e)throw new Error("Missing token");e=e.replace(XU,"");const n=ql.decode(Wo.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");const i=JSON.parse(n);if(!i)throw new Error("Invalid nostr event");if(!Np(i))throw new Error("Invalid nostr event, signature invalid");if(i.kind!==27235)throw new Error("Invalid nostr event, kind invalid");if(!i.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round(new Date().getTime()/1e3)-i.created_at>60)throw new Error("Invalid nostr event, expired");const s=i.tags.find(a=>a[0]==="u");if((s==null?void 0:s.length)!==1&&(s==null?void 0:s[1])!==r)throw new Error("Invalid nostr event, url tag invalid");const o=i.tags.find(a=>a[0]==="method");if((o==null?void 0:o.length)!==1&&(o==null?void 0:o[1].toLowerCase())!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.bech32m=QT=Oy.bech32=void 0;const Bw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",JU={};for(let e=0;e<Bw.length;e++){const r=Bw.charAt(e);JU[r]=e}function fp(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function S6(e){let r=1;for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=fp(r)^n>>5}r=fp(r);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r=fp(r)^n&31}return r}function Z3(e,r,t,n){let i=0,s=0;const o=(1<<t)-1,a=[];for(let l=0;l<e.length;++l)for(i=i<<r|e[l],s+=r;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=r)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function Kpe(e){return Z3(e,8,5,!0)}function qpe(e){const r=Z3(e,5,8,!1);if(Array.isArray(r))return r}function Vpe(e){const r=Z3(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function QU(e){let r;e==="bech32"?r=1:r=734539939;function t(o,a,l){if(l=l||90,o.length+7+a.length>l)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let u=S6(o);if(typeof u=="string")throw new Error(u);let h=o+"1";for(let c=0;c<a.length;++c){const d=a[c];if(d>>5)throw new Error("Non 5-bit word");u=fp(u)^d,h+=Bw.charAt(d)}for(let c=0;c<6;++c)u=fp(u);u^=r;for(let c=0;c<6;++c){const d=u>>(5-c)*5&31;h+=Bw.charAt(d)}return h}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const l=o.toLowerCase(),u=o.toUpperCase();if(o!==l&&o!==u)return"Mixed-case string "+o;o=l;const h=o.lastIndexOf("1");if(h===-1)return"No separator character for "+o;if(h===0)return"Missing prefix for "+o;const c=o.slice(0,h),d=o.slice(h+1);if(d.length<6)return"Data too short";let y=S6(c);if(typeof y=="string")return y;const w=[];for(let b=0;b<d.length;++b){const T=d.charAt(b),x=JU[T];if(x===void 0)return"Unknown character "+T;y=fp(y)^x,!(b+6>=d.length)&&w.push(x)}return y!==r?"Invalid checksum for "+o:{prefix:c,words:w}}function i(o,a){const l=n(o,a);if(typeof l=="object")return l}function s(o,a){const l=n(o,a);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:i,decode:s,encode:t,toWords:Kpe,fromWordsUnsafe:qpe,fromWords:Vpe}}var QT=Oy.bech32=QU("bech32");Oy.bech32m=QU("bech32m");const Gpe="modulepreload",Ype=function(e){return"/"+e},k6={},wr=function(r,t,n){if(!t||t.length===0)return r();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Ype(s),s in k6)return;k6[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=i.length-1;h>=0;h--){const c=i[h];if(c.href===s&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Gpe,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,c)=>{u.addEventListener("load",h),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},eW={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who and when you're chatting with.",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},Zpe=Object.freeze(Object.defineProperty({__proto__:null,default:eW},Symbol.toStringTag,{value:"Module"})),Cy={en:"English","zh-cn":"","zh-tw":"",es:"Espaol",ru:"",de:"Deutsch",fr:"Franais",it:"Italiano",ja:"",ko:"",ar:"",id:"Indonesia","pt-BR":"Portugus (Brasil)",tr:"Trke",vt:"Ting Vit",bn:"",th:"",hi:"",fa:"",ur:"",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"",sv:"Svenska",fi:"Suomi","cs-CZ":"etina",bg:"",as:"",sk:"Slovenina",lt:"Lietuvi","el-GR":""},Xpe=Object.assign({"./languages/ar.mjs":()=>wr(()=>import("./ar-b05107c0.js"),[]),"./languages/as.mjs":()=>wr(()=>import("./as-825421ff.js"),[]),"./languages/bg.mjs":()=>wr(()=>import("./bg-262cfc4e.js"),[]),"./languages/bn.mjs":()=>wr(()=>import("./bn-542e2fe5.js"),[]),"./languages/cs-CZ.mjs":()=>wr(()=>import("./cs-CZ-ad8d06ab.js"),[]),"./languages/de.mjs":()=>wr(()=>import("./de-e254045b.js"),[]),"./languages/el-GR.mjs":()=>wr(()=>import("./el-GR-dd662a28.js"),[]),"./languages/en.mjs":()=>wr(()=>Promise.resolve().then(()=>Zpe),void 0),"./languages/es.mjs":()=>wr(()=>import("./es-9ed73c18.js"),[]),"./languages/fa.mjs":()=>wr(()=>import("./fa-b92e5c69.js"),[]),"./languages/fi.mjs":()=>wr(()=>import("./fi-1b81d3e2.js"),[]),"./languages/fr.mjs":()=>wr(()=>import("./fr-084a88bb.js"),[]),"./languages/he.mjs":()=>wr(()=>import("./he-f8f630eb.js"),[]),"./languages/hi.mjs":()=>wr(()=>import("./hi-21492224.js"),[]),"./languages/hu.mjs":()=>wr(()=>import("./hu-272cee10.js"),[]),"./languages/id.mjs":()=>wr(()=>import("./id-879a045d.js"),[]),"./languages/it.mjs":()=>wr(()=>import("./it-570c4004.js"),[]),"./languages/ja.mjs":()=>wr(()=>import("./ja-ca2ddcd8.js"),[]),"./languages/ko.mjs":()=>wr(()=>import("./ko-20dade51.js"),[]),"./languages/lt.mjs":()=>wr(()=>import("./lt-9d42b6bf.js"),[]),"./languages/nl.mjs":()=>wr(()=>import("./nl-e18021b9.js"),[]),"./languages/pl.mjs":()=>wr(()=>import("./pl-c71aa6e1.js"),[]),"./languages/pt-BR.mjs":()=>wr(()=>import("./pt-BR-f6e074f5.js"),[]),"./languages/ru.mjs":()=>wr(()=>import("./ru-a4f155c7.js"),[]),"./languages/sk.mjs":()=>wr(()=>import("./sk-baed6548.js"),[]),"./languages/sv.mjs":()=>wr(()=>import("./sv-6a12b090.js"),[]),"./languages/th.mjs":()=>wr(()=>import("./th-77251d86.js"),[]),"./languages/tr.mjs":()=>wr(()=>import("./tr-5c13f72f.js"),[]),"./languages/ur.mjs":()=>wr(()=>import("./ur-da5400bf.js"),[]),"./languages/vt.mjs":()=>wr(()=>import("./vt-ed0b9062.js"),[]),"./languages/zh-cn.mjs":()=>wr(()=>import("./zh-cn-8db267de.js"),[]),"./languages/zh-tw.mjs":()=>wr(()=>import("./zh-tw-27ec4fa0.js"),[])});let qd=Object.keys(Cy),jo,H1,tW;jo=localStorage.getItem("language")||navigator.language||"en";if(qd.indexOf(jo)===-1){const e=jo.slice(0,2);jo="en";for(let r=0;r<qd.length;r++)if(qd[r].slice(0,2)===e){jo=qd[r];break}}tW=Xpe[`./languages/${jo}.mjs`]().then(e=>{console.log("loaded translation",jo,`./languages/${jo}.mjs`),H1=e.default,jo!=="en"&&(H1={...eW,...H1})}).catch(e=>{console.error("failed to load translation",e)});function Jpe(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function be(e,r){const n=(e&&(H1[e]||Jpe(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return n.forEach(s=>{s.startsWith("<b>")?i.push(Ye("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(Ye("a",{key:i.length,...r},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}const Qpe=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,eve=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,tve=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,rve=/(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;let rW={};De.get("existingIrisToAddress").on(e=>rW=e);const nve=navigator.userAgent.toLowerCase(),ive=nve.indexOf(" electron/")>-1,Ir={wtClient:void 0,formatAmount(e,r=2){return typeof e!="number"?"":e<1e3?e.toFixed(r):e<1e6?(e/1e3).toFixed(r)+"K":e<1e9?(e/1e6).toFixed(r)+"M":(e/1e9).toFixed(r)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(Qpe)!==null},async translateText(e){const t=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:jo.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return t==null?void 0:t.translatedText},handleLightningLinkClick(e){e.preventDefault();const r=e.target.closest("A").href;r.startsWith("lightning:")&&window.open(r,"_self")},isMobile:function(){let e=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const r=document.createElement("textarea");r.textContent=e,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}finally{document.body.removeChild(r)}}return!1},showConsoleWarning(){const e="Stop!",r=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const t="font-family:helvetica; font-size:20px; ";[[e,`${t}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[r,t],["",""]].map(n=>{setTimeout(console.log.bind(console,`
%c${n[0]}`,n[1]))})}},formatTime(e){const r=e.toLocaleTimeString(void 0,{timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},formatDate(e){const r=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,r,t,n){if(t||(t=new Date,n=t.toLocaleDateString(void 0,{dateStyle:"short"})),r===n)return"today";const i=Math.round((t.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):r},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const r=QT.decode(e,1e3),t=QT.fromWords(r.words);return new TextDecoder().decode(Uint8Array.from(t))}catch(r){return console.error("bech32ToText failed",r),""}},formatBytes(e,r=2){if(e===0)return"0 Bytes";const t=1024,n=r<0?0:r,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,s)).toFixed(n))} ${i[s]}`},download(e,r,t,n,i){n===null&&(n="utf-8");const s=document.createElement("a");s.href=i||`data:${t};charset=${n},${encodeURI(r)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const r=new FileReader;return r.readAsDataURL(e),new Promise((t,n)=>{r.onload=function(){t(r.result)},r.onerror=function(i){n(`Error: ${i}`)}})},getMyProfileLink(){const e=rW.name||ye.toNostrBech32Address(ye.getPubKey(),"npub");return this.buildURL(e)},buildURL(e,r={},t=""){const n=new URL(window.location.origin);return n.pathname=e,r&&Kd.forEach(r,(i,s)=>{n.searchParams.append(s,i)}),t&&(n.hash=t),n.toString()},arrayToHex(e){return Array.from(e,r=>("0"+(r&255).toString(16)).slice(-2)).join("")},isElectron:ive,pubKeyRegex:eve,noteRegex:tve,hashtagRegex:rve};var nW={exports:{}},mE={exports:{}},T6;function sve(){return T6||(T6=1,function(e,r){(function(t,n){e.exports=n()})(Tn,function(){return function(){function t(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},t.prototype.loadDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.loadDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){if(typeof s=="function"){if(l.id===0){s(null);return}s(l.val)}else console.log(l.val)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(i,s,o){var a=this.app,l=this;function u(h){h&&h.success===!0?o(null):o(new Error("Error saving database")),l.options.closeAfterSave&&l.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(h){l.saveDatabase(i,s,u)});return}this.catalog.setAppKey(a,i,s,u)},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.deleteDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){var u=l.id;u!==0?a.catalog.deleteAppKey(u,s):typeof s=="function"&&s({success:!0})})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(o){o.forEach(function(a){a.startsWith(i)&&s.deleteDatabase(a)})})},t.prototype.getDatabaseList=function(i){var s=this.app,o=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(a){o.catalog=a,o.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(a){for(var l=[],u=0;u<a.length;u++)l.push(a[u].key);typeof i=="function"?i(l):l.forEach(function(h){console.log(h)})})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(o){s.catalog=o,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(o){for(var a=[],l,u,h,c,d,y=0;y<o.length;y++)l=o[y],h=l.app||"",c=l.key||"",d=l.val||"",u=h.length*2+c.length*2+d.length+1,a.push({app:l.app,key:l.key,size:u});typeof i=="function"?i(a):a.forEach(function(w){console.log(w)})})};function n(i){this.db=null,this.initializeLokiCatalog(i)}return n.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),o=this;s.onupgradeneeded=function(a){var l=a.target.result;if(l.objectStoreNames.contains("LokiAKV")&&l.deleteObjectStore("LokiAKV"),!l.objectStoreNames.contains("LokiAKV")){var u=l.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});u.createIndex("app","app",{unique:!1}),u.createIndex("key","key",{unique:!1}),u.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(a){o.db=a.target.result,typeof i=="function"&&i(o)},s.onerror=function(a){throw a}},n.prototype.getAppKey=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.index("appkey"),h=i+","+s,c=u.get(h);c.onsuccess=function(d){return function(y){var w=y.target.result;(w===null||typeof w>"u")&&(w={id:0,success:!1}),typeof d=="function"?d(w):console.log(w)}}(o),c.onerror=function(d){return function(y){if(typeof d=="function")d({id:0,success:!1});else throw y}}(o)},n.prototype.getAppKeyById=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.get(i);u.onsuccess=function(h,c){return function(d){typeof c=="function"?c(d.target.result,h):console.log(d.target.result)}}(o,s)},n.prototype.setAppKey=function(i,s,o,a){var l=this.db.transaction(["LokiAKV"],"readwrite"),u=l.objectStore("LokiAKV"),h=u.index("appkey"),c=i+","+s,d=h.get(c);d.onsuccess=function(y){var w=y.target.result;w==null?w={app:i,key:s,appkey:i+","+s,val:o}:w.val=o;var b=u.put(w);b.onerror=function(T){return function(x){typeof T=="function"?T({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(d.error))}}(a),b.onsuccess=function(T){return function(x){typeof T=="function"&&T({success:!0})}}(a)},d.onerror=function(y){return function(w){typeof y=="function"?y({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(d.error))}}(a)},n.prototype.deleteAppKey=function(i,s){var o=this.db.transaction(["LokiAKV"],"readwrite"),a=o.objectStore("LokiAKV"),l=a.delete(i);l.onsuccess=function(u){return function(h){typeof u=="function"&&u({success:!0})}}(s),l.onerror=function(u){return function(h){typeof u=="function"?u({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(l.error))}}(s)},n.prototype.getAppKeys=function(i,s){var o=this.db.transaction(["LokiAKV"],"readonly"),a=o.objectStore("LokiAKV"),l=a.index("app"),u=IDBKeyRange.only(i),h=l.openCursor(u),c=[];h.onsuccess=function(d,y){return function(w){var b=w.target.result;if(b){var T=b.value;d.push(T),b.continue()}else typeof y=="function"?y(d):console.log(d)}}(c,s),h.onerror=function(d){return function(y){typeof d=="function"?d(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(y))}}(s)},n.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),o=s.objectStore("LokiAKV"),a=o.openCursor(),l=[];a.onsuccess=function(u,h){return function(c){var d=c.target.result;if(d){var y=d.value;u.push(y),d.continue()}else typeof h=="function"?h(u):console.log(u)}}(l,i),a.onerror=function(u){return function(h){typeof u=="function"&&u(null)}}(i)},t}()})}(mE)),mE.exports}const ove={},ave=Object.freeze(Object.defineProperty({__proto__:null,default:ove},Symbol.toStringTag,{value:"Module"})),lve=nv(ave);(function(e,r){(function(t,n){e.exports=n()})(Tn,function(){return function(){var t=Object.prototype.hasOwnProperty;function n($){var S,N;if(Array.isArray($)){for(N=0;N<$.length;N++)n($[N]);i($)}else if($!==null&&typeof $=="object"){for(S in $)$.hasOwnProperty(S)&&n($[S]);i($)}}function i($){Object.isFrozen($)||Object.freeze($)}function s($){return Object.isFrozen($)?_($,"shallow"):$}var o={copyProperties:function($,S){var N;for(N in $)S[N]=$[N]},resolveTransformObject:function($,S,N){var F,z;if(typeof N!="number"&&(N=0),++N>=10)return $;for(F in $)typeof $[F]=="string"&&$[F].indexOf("[%lktxp]")===0?(z=$[F].substring(8),S.hasOwnProperty(z)&&($[F]=S[z])):typeof $[F]=="object"&&($[F]=o.resolveTransformObject($[F],S,N));return $},resolveTransformParams:function($,S){var N,F,z=[];if(typeof S>"u")return $;for(N=0;N<$.length;N++)F=_($[N],"shallow-recurse-objects"),z.push(o.resolveTransformObject(F,S));return z},getIn:function($,S,N){if($!=null){if(!N)return $[S];if(typeof S=="string"&&(S=S.split(".")),!Array.isArray(S))throw new Error("path must be a string or array. Found "+typeof S);for(var F=0,z=S.length;$!=null&&F<z;)$=$[S[F++]];return F&&F==z?$:void 0}}},a={aeq:l,lt:u,gt:h};function l($,S){var N,F,z,V;if($===S)return!0;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:z=1;break;case null:z=1;break;case!1:z=3;break;case!0:z=4;break;case"":z=5;break;default:z=$===$?9:0;break}switch(S){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=S===S?9:0;break}if(z!==9||V!==9)return z===V}return N=Number($),F=Number(S),N===N||F===F?N===F:(N=$.toString(),F=S.toString(),N==F)}function u($,S,N){var F,z,V,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(V!==9||ae!==9)return V===ae?N:V<ae}return F=Number($),z=Number(S),F===F&&z===z?F<z?!0:F>z?!1:N:F===F&&z!==z?!0:z===z&&F!==F?!1:$<S?!0:$>S?!1:$==S?N:(F=$.toString(),z=S.toString(),F<z?!0:F==z?N:!1)}function h($,S,N){var F,z,V,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(V!==9||ae!==9)return V===ae?N:V>ae}return F=Number($),z=Number(S),F===F&&z===z?F>z?!0:F<z?!1:N:F===F&&z!==z?!1:z===z&&F!==F||$>S?!0:$<S?!1:$==S?N:(F=$.toString(),z=S.toString(),F>z?!0:F==z?N:!1)}function c($,S,N){return a.aeq($,S)?0:a.lt($,S,!1)?N?1:-1:a.gt($,S,!1)?N?-1:1:0}function d($,S,N){for(var F=0,z,V,ae,ve,He,ze=0,st=$.length;ze<st;ze++)if(z=$[ze],V=z[0],~V.indexOf(".")?(He=V.split("."),ae=o.getIn(S,He,!0),ve=o.getIn(N,He,!0)):(ae=S[V],ve=N[V]),F=c(ae,ve,z[1]),F!==0)return F;return 0}function y($,S,N,F,z,V){var ae=V||0,ve=S[ae],He=!1,ze;if(typeof $=="object"&&ve in $&&(ze=$[ve]),ae+1>=S.length)He=N(ze,F,z);else if(Array.isArray(ze))for(var st=0,wt=ze.length;st<wt&&(He=y(ze[st],S,N,F,z,ae+1),He!==!0);st+=1);else He=y(ze,S,N,F,z,ae+1);return He}function w($){return typeof $=="string"||Array.isArray($)?function(S){return $.indexOf(S)!==-1}:typeof $=="object"&&$!==null?function(S){return t.call($,S)}:null}function b($,S,N){for(var F in S)if(t.call(S,F))return T[F]($,S[F],N);return!1}var T={$eq:function($,S){return $===S},$aeq:function($,S){return $==S},$ne:function($,S){return S!==S?$===$:$!==S},$dteq:function($,S){return a.aeq($,S)},$gt:function($,S){return a.gt($,S,!1)},$gte:function($,S){return a.gt($,S,!0)},$lt:function($,S){return a.lt($,S,!1)},$lte:function($,S){return a.lt($,S,!0)},$jgt:function($,S){return $>S},$jgte:function($,S){return $>=S},$jlt:function($,S){return $<S},$jlte:function($,S){return $<=S},$between:function($,S){return $==null?!1:a.gt($,S[0],!0)&&a.lt($,S[1],!0)},$jbetween:function($,S){return $==null?!1:$>=S[0]&&$<=S[1]},$in:function($,S){return S.indexOf($)!==-1},$inSet:function($,S){return S.has($)},$nin:function($,S){return S.indexOf($)===-1},$keyin:function($,S){return $ in S},$nkeyin:function($,S){return!($ in S)},$definedin:function($,S){return S[$]!==void 0},$undefinedin:function($,S){return S[$]===void 0},$regex:function($,S){return S.test($)},$containsString:function($,S){return typeof $=="string"&&$.indexOf(S)!==-1},$containsNone:function($,S){return!T.$containsAny($,S)},$containsAny:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.some(N):N(S):!1},$contains:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.every(N):N(S):!1},$elemMatch:function($,S){return Array.isArray($)?$.some(function(N){return Object.keys(S).every(function(F){var z=S[F];return typeof z=="object"&&z||(z={$eq:z}),F.indexOf(".")!==-1?y(N,F.split("."),b,S[F],N):b(N[F],z,N)})}):!1},$type:function($,S,N){var F=typeof $;return F==="object"&&(Array.isArray($)?F="array":$ instanceof Date&&(F="date")),typeof S!="object"?F===S:b(F,S,N)},$finite:function($,S){return S===isFinite($)},$size:function($,S,N){return Array.isArray($)?typeof S!="object"?$.length===S:b($.length,S,N):!1},$len:function($,S,N){return typeof $=="string"?typeof S!="object"?$.length===S:b($.length,S,N):!1},$where:function($,S){return S($)===!0},$not:function($,S,N){return!b($,S,N)},$and:function($,S,N){for(var F=0,z=S.length;F<z;F+=1)if(!b($,S[F],N))return!1;return!0},$or:function($,S,N){for(var F=0,z=S.length;F<z;F+=1)if(b($,S[F],N))return!0;return!1},$exists:function($,S){return S?$!==void 0:$===void 0}},x=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];x.forEach(function($){var S=T[$];T["$"+$]=function(N,F,z){if(typeof F=="string")return S(N,z[F]);if(typeof F=="function")return S(N,F(z));throw new Error("Invalid argument to $$ matcher")}});var A={$eq:T.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function _($,S){if($==null)return null;var N=S||"parse-stringify",F;switch(N){case"parse-stringify":F=JSON.parse(JSON.stringify($));break;case"jquery-extend-deep":F=jQuery.extend(!0,{},$);break;case"shallow":F=Object.create($.constructor.prototype),Object.keys($).map(function(V){F[V]=$[V]});break;case"shallow-assign":F=Object.create($.constructor.prototype),Object.assign(F,$);break;case"shallow-recurse-objects":F=_($,"shallow");var z=Object.keys($);z.forEach(function(V){typeof $[V]=="object"&&$[V].constructor.name==="Object"?F[V]=_($[V],"shallow-recurse-objects"):Array.isArray($[V])&&(F[V]=I($[V],"shallow-recurse-objects"))});break}return F}function I($,S){if(S=="parse-stringify")return _($,S);for(var N=[],F=0,z=$.length;F<z;F++)N[F]=_($[F],S);return N}function O(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function C(){}C.prototype.events={},C.prototype.asyncListeners=!1,C.prototype.on=function($,S){var N,F=this;return Array.isArray($)?($.forEach(function(z){F.on(z,S)}),S):(N=this.events[$],N||(N=this.events[$]=[]),N.push(S),S)},C.prototype.emit=function($){var S=this,N;if($&&this.events[$])this.events[$].length&&(N=Array.prototype.slice.call(arguments,1),this.events[$].forEach(function(F){S.asyncListeners?setTimeout(function(){F.apply(S,N)},1):F.apply(S,N)}));else throw new Error("No event "+$+" defined")},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function($,S){var N=this;if(Array.isArray($)){$.forEach(function(z){N.removeListener(z,S)});return}if(this.events[$]){var F=this.events[$];F.splice(F.indexOf(S),1)}};function g($,S){this.filename=$||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=S&&S.hasOwnProperty("verbose")?S.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var N=function(){return typeof Tn<"u"&&(Tn.android||Tn.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof Tn<"u"&&Tn.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};S&&S.hasOwnProperty("env")?this.ENV=S.env:this.ENV=N(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(S,!0),this.on("init",this.clearChanges)}g.prototype=new C,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){var $;return typeof Mg=="function"&&($=sve()),$},g.prototype.configureOptions=function($,S){var N={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},F={fs:L,localStorage:W,memory:R};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof $<"u"){if(this.options=$,this.options.hasOwnProperty("persistenceMethod")&&typeof F[$.persistenceMethod]=="function"&&(this.persistenceMethod=$.persistenceMethod,this.persistenceAdapter=new F[$.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=$.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),$.autoload&&S){var z=this;setTimeout(function(){z.loadDatabase($,$.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable($,$.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=N[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new F[this.persistenceMethod]))},g.prototype.copy=function($){var S=new g(this.filename,{env:"NA"}),N,F;if($=$||{},S.loadJSONObject(this,{retainDirtyFlags:!0}),$.hasOwnProperty("removeNonSerializable")&&$.removeNonSerializable===!0)for(S.autosaveHandle=null,S.persistenceAdapter=null,N=S.collections.length,F=0;F<N;F++)S.collections[F].constraints=null,S.collections[F].ttl=null;return S},g.prototype.addCollection=function($,S){var N,F=this.collections.length;if(S&&S.disableMeta===!0){if(S.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(S.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof S.ttl=="number"&&S.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(N=0;N<F;N+=1)if(this.collections[N].name===$)return this.collections[N];var z=new j($,S);return z.isIncremental=this.isIncremental,this.collections.push(z),this.verbose&&(z.lokiConsoleWrapper=console),z},g.prototype.loadCollection=function($){if(!$.name)throw new Error("Collection must have a name property to be loaded");this.collections.push($)},g.prototype.getCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$)return this.collections[S];return this.emit("warning","collection "+$+" not found"),null},g.prototype.renameCollection=function($,S){var N=this.getCollection($);return N&&(N.name=S),N},g.prototype.listCollections=function(){for(var $=this.collections.length,S=[];$--;)S.push({name:this.collections[$].name,type:this.collections[$].objType,count:this.collections[$].data.length});return S},g.prototype.removeCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$){var F=new j($,{}),z=this.collections[S];for(var V in z)z.hasOwnProperty(V)&&F.hasOwnProperty(V)&&(z[V]=F[V]);this.collections.splice(S,1);return}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function($,S){switch($){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return S}},g.prototype.serialize=function($){switch($=$||{},$.hasOwnProperty("serializationMethod")||($.serializationMethod=this.options.serializationMethod),$.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function($){var S,N,F,z,V=[],ae;if($=$||{},$.hasOwnProperty("partitioned")||($.partitioned=!1),$.hasOwnProperty("delimited")||($.delimited=!0),$.hasOwnProperty("delimiter")||($.delimiter=this.options.destructureDelimiter),$.partitioned===!0&&$.hasOwnProperty("partition")&&$.partition>=0)return this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:$.partition});for(ae=new g(this.filename),ae.loadJSONObject(this),S=0;S<ae.collections.length;S++)ae.collections[S].data=[];if($.partitioned===!0&&$.partition===-1)return ae.serialize({serializationMethod:"normal"});for(V.push(ae.serialize({serializationMethod:"normal"})),ae=null,S=0;S<this.collections.length;S++)if(F=this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:S}),$.partitioned===!1&&$.delimited===!1){if(!Array.isArray(F))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(z=F.length,N=0;N<z;N++)V.push(F[N]),F[N]=null;V.push("")}else V.push(F);return $.partitioned?($.delimited,V):$.delimited?(V.push(""),V.join($.delimiter)):(V.push(""),V)},g.prototype.serializeCollection=function($){var S,N,F=[];if($=$||{},$.hasOwnProperty("delimited")||($.delimited=!0),!$.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(S=this.collections[$.collectionIndex].data.length,F=[],N=0;N<S;N++)F.push(JSON.stringify(this.collections[$.collectionIndex].data[N]));return $.delimited?(F.push(""),F.join($.delimiter)):F},g.prototype.deserializeDestructured=function($,S){var N=[],F,z,V=0,ae,ve=1,He=!1,ze;if(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.partitioned){if(S.hasOwnProperty("partition"))return S.partition===-1?(z=JSON.parse($[0]),z):this.deserializeCollection($[S.partition+1],S);for(z=JSON.parse($[0]),ae=z.collections.length,V=0;V<ae;V++)z.collections[V].data=this.deserializeCollection($[V+1],S);return z}if(S.delimited){if(N=$.split(S.delimiter),$=null,F=N.length,F===0)return null}else N=$;for(z=JSON.parse(N[0]),ae=z.collections.length,N[0]=null;!He;)N[ve],N[ve]===""?++V>ae&&(He=!0):(ze=JSON.parse(N[ve]),z.collections[V].data.push(ze)),N[ve++]=null;return z},g.prototype.deserializeCollection=function($,S){var N=[],F,z;for(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.delimited?(N=$.split(S.delimiter),N.pop()):N=$,z=N.length,F=0;F<z;F++)N[F]=JSON.parse(N[F]);return N},g.prototype.loadJSON=function($,S){var N;if($.length===0)N={};else switch(this.options.serializationMethod){case"normal":case"pretty":N=JSON.parse($);break;case"destructured":N=this.deserializeDestructured($);break;default:N=JSON.parse($);break}this.loadJSONObject(N,S)},g.prototype.loadJSONObject=function($,S){var N=0,F=$.collections?$.collections.length:0,z,V,ae,ve,He,ze;this.name=$.name,$.hasOwnProperty("throttledSaves")&&S&&!S.hasOwnProperty("throttledSaves")&&(this.throttledSaves=$.throttledSaves),this.collections=[];function st(Rt){var fr=S[Rt.name],Kr;return fr.proto?(Kr=fr.inflate||o.copyProperties,function(ct){var It=new fr.proto;return Kr(ct,It),It}):fr.inflate}for(N;N<F;N+=1){if(z=$.collections[N],V=this.addCollection(z.name,{disableChangesApi:z.disableChangesApi,disableDeltaChangesApi:z.disableDeltaChangesApi,disableMeta:z.disableMeta,disableFreeze:z.hasOwnProperty("disableFreeze")?z.disableFreeze:!0}),V.adaptiveBinaryIndices=z.hasOwnProperty("adaptiveBinaryIndices")?z.adaptiveBinaryIndices===!0:!1,V.transactional=z.transactional,V.asyncListeners=z.asyncListeners,V.cloneObjects=z.cloneObjects,V.cloneMethod=z.cloneMethod||"parse-stringify",V.autoupdate=z.autoupdate,V.changes=z.changes,V.dirtyIds=z.dirtyIds||[],S&&S.retainDirtyFlags===!0?V.dirty=z.dirty:V.dirty=!1,ae=z.data.length,ve=0,S&&S.hasOwnProperty(z.name))for(He=st(z),ve;ve<ae;ve++)ze=He(z.data[ve]),V.data[ve]=ze,V.addAutoUpdateObserver(ze),V.disableFreeze||n(V.data[ve]);else for(ve;ve<ae;ve++)V.data[ve]=z.data[ve],V.addAutoUpdateObserver(V.data[ve]),V.disableFreeze||n(V.data[ve]);if(V.maxId=typeof z.maxId>"u"?0:z.maxId,typeof z.binaryIndices<"u"&&(V.binaryIndices=z.binaryIndices),typeof z.transforms<"u"&&(V.transforms=z.transforms),V.uniqueNames=[],z.hasOwnProperty("uniqueNames")&&(V.uniqueNames=z.uniqueNames),!(typeof z.DynamicViews>"u")){for(var wt=0;wt<z.DynamicViews.length;wt++){var mt=z.DynamicViews[wt],vt=V.addDynamicView(mt.name,mt.options);vt.resultdata=mt.resultdata,vt.resultsdirty=mt.resultsdirty,vt.filterPipeline=mt.filterPipeline,vt.sortCriteriaSimple=mt.sortCriteriaSimple,vt.sortCriteria=mt.sortCriteria,vt.sortFunction=null,vt.sortDirty=mt.sortDirty,V.disableFreeze||(n(vt.filterPipeline),vt.sortCriteriaSimple?n(vt.sortCriteriaSimple):vt.sortCriteria&&n(vt.sortCriteria)),vt.resultset.filteredrows=mt.resultset.filteredrows,vt.resultset.filterInitialized=mt.resultset.filterInitialized,vt.rematerialize({removeWhereFilters:!0})}$.databaseVersion<1.5&&(V.ensureAllIndexes(!0),V.dirty=!0)}}},g.prototype.close=function($){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase($),$=void 0)),$&&this.on("close",$),this.emit("close")},g.prototype.generateChangesNotification=function($){function S(z){return z.name}var N=[],F=$||this.collections.map(S);return this.collections.forEach(function(z){F.indexOf(S(z))!==-1&&(N=N.concat(z.getChanges()))}),N},g.prototype.serializeChanges=function($){return JSON.stringify(this.generateChangesNotification($))},g.prototype.clearChanges=function(){this.collections.forEach(function($){$.flushChanges&&$.flushChanges()})};function R($){this.hashStore={},this.options=$||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}R.prototype.loadDatabase=function($,S){var N=this;this.options.asyncResponses?setTimeout(function(){N.hashStore.hasOwnProperty($)?S(N.hashStore[$].value):S(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty($)?S(this.hashStore[$].value):S(null)},R.prototype.saveDatabase=function($,S,N){var F=this,z;this.options.asyncResponses?setTimeout(function(){z=F.hashStore.hasOwnProperty($)?F.hashStore[$].savecount:0,F.hashStore[$]={savecount:z+1,lastsave:new Date,value:S},N()},this.options.asyncTimeout):(z=this.hashStore.hasOwnProperty($)?this.hashStore[$].savecount:0,this.hashStore[$]={savecount:z+1,lastsave:new Date,value:S},N())},R.prototype.deleteDatabase=function($,S){this.hashStore.hasOwnProperty($)&&delete this.hashStore[$],typeof S=="function"&&S()};function M($,S){if(this.mode="reference",this.adapter=null,this.options=S||{},this.dbref=null,this.dbname="",this.pageIterator={},$){if($.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=$}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}M.prototype.loadDatabase=function($,S){var N=this;this.dbname=$,this.dbref=new g($),this.adapter.loadDatabase($,function(F){if(!F){S(F);return}typeof F!="string"&&S(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var z=JSON.parse(F);if(N.dbref.loadJSONObject(z),z=null,N.dbref.collections.length,N.dbref.collections.length===0){S(N.dbref);return}N.pageIterator={collection:0,pageIndex:0},N.loadNextPartition(0,function(){S(N.dbref)})})},M.prototype.loadNextPartition=function($,S){var N=this.dbname+"."+$,F=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(S);return}this.adapter.loadDatabase(N,function(z){var V=F.dbref.deserializeCollection(z,{delimited:!0,collectionIndex:$});F.dbref.collections[$].data=V,++$<F.dbref.collections.length?F.loadNextPartition($,S):S()})},M.prototype.loadNextPage=function($){var S=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,N=this;this.adapter.loadDatabase(S,function(F){var z=F.split(N.options.delimiter);F="";var V=z.length,ae,ve=z[V-1]==="";for(ve&&(z.pop(),V=z.length,z[V-1]===""&&V===1&&(z.pop(),V=z.length)),ae=0;ae<V;ae++)N.dbref.collections[N.pageIterator.collection].data.push(JSON.parse(z[ae])),z[ae]=null;z=[],ve?++N.pageIterator.collection<N.dbref.collections.length?N.loadNextPartition(N.pageIterator.collection,$):$():(N.pageIterator.pageIndex++,N.loadNextPage($))})},M.prototype.exportDatabase=function($,S,N){var F,z=S.collections.length;for(this.dbref=S,this.dbname=$,this.dirtyPartitions=[-1],F=0;F<z;F++)S.collections[F].dirty&&this.dirtyPartitions.push(F);this.saveNextPartition(function(V){N(V)})},M.prototype.saveNextPartition=function($){var S=this,N=this.dirtyPartitions.shift(),F=this.dbname+(N===-1?"":"."+N);if(this.options.paging&&N!==-1){this.pageIterator={collection:N,docIndex:0,pageIndex:0},this.saveNextPage(function(V){S.dirtyPartitions.length===0?$(V):S.saveNextPartition($)});return}var z=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:N});this.adapter.saveDatabase(F,z,function(V){if(V){$(V);return}S.dirtyPartitions.length===0?$(null):S.saveNextPartition($)})},M.prototype.saveNextPage=function($){var S=this,N=this.dbref.collections[this.pageIterator.collection],F=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,z=0,V=N.data.length,ae=this.options.delimiter.length,ve="",He="",ze=!1,st=!1,wt=function(mt){He="",mt&&$(mt),ze?$(null):(S.pageIterator.pageIndex++,S.saveNextPage($))};for(N.data.length===0&&(ze=!0);;)if(ze||(ve=JSON.stringify(N.data[this.pageIterator.docIndex]),He+=ve,z+=ve.length,++this.pageIterator.docIndex>=V&&(ze=!0)),z>=this.options.pageSize&&(st=!0),(!st||ze)&&(He+=this.options.delimiter,z+=ae),ze||st){this.adapter.saveDatabase(F,He,wt);return}};function L(){try{this.fs=lve}catch{this.fs=null}}L.prototype.loadDatabase=function(S,N){var F=this;this.fs.stat(S,function(z,V){!z&&V.isFile()?F.fs.readFile(S,{encoding:"utf8"},function(ve,He){N(ve?new Error(ve):He)}):N(null)})},L.prototype.saveDatabase=function(S,N,F){var z=this,V=S+"~";this.fs.writeFile(V,N,function(ve){ve?F(new Error(ve)):z.fs.rename(V,S,F)})},L.prototype.deleteDatabase=function(S,N){this.fs.unlink(S,function(z){z?N(new Error(z)):N()})};function W(){}W.prototype.loadDatabase=function(S,N){O()?N(localStorage.getItem(S)):N(new Error("localStorage is not available"))},W.prototype.saveDatabase=function(S,N,F){O()?(localStorage.setItem(S,N),F(null)):F(new Error("localStorage is not available"))},W.prototype.deleteDatabase=function(S,N){O()?(localStorage.removeItem(S),N(null)):N(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function($,S){var N=this,F=new Date().getTime();if(this.throttledSaves||$(!0),S=S||{},S.hasOwnProperty("recursiveWait")||(S.recursiveWait=!0),S.hasOwnProperty("recursiveWaitLimit")||(S.recursiveWaitLimit=!1),S.hasOwnProperty("recursiveWaitLimitDuration")||(S.recursiveWaitLimitDuration=2e3),S.hasOwnProperty("started")||(S.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(S.recursiveWait)this.throttledCallbacks.push(function(){if(N.throttledSavePending){if(S.recursiveWaitLimit&&F-S.started>S.recursiveWaitLimitDuration){$(!1);return}N.throttledSaveDrain($,S);return}else{$(!0);return}});else{this.throttledCallbacks.push($);return}else $(!0)},g.prototype.loadDatabaseInternal=function($,S){var N=S||function(z,V){if(z)throw z},F=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(V){if(typeof V=="string"){var ae=!1;try{F.loadJSON(V,$||{}),ae=!0}catch(ve){N(ve)}ae&&(N(null),F.emit("loaded","database "+F.filename+" loaded"))}else{if(!V){N(null),F.emit("loaded","empty database "+F.filename+" loaded");return}if(V instanceof Error){N(V);return}if(typeof V=="object"){F.loadJSONObject(V,$||{}),N(null),F.emit("loaded","database "+F.filename+" loaded");return}N("unexpected adapter response : "+V)}}):N(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function($,S){var N=this;if(!this.throttledSaves){this.loadDatabaseInternal($,S);return}this.throttledSaveDrain(function(F){if(F){N.throttledSavePending=!0,N.loadDatabaseInternal($,function(z){N.throttledCallbacks.length===0?N.throttledSavePending=!1:N.saveDatabase(),typeof S=="function"&&S(z)});return}else typeof S=="function"&&S(new Error("Unable to pause save throttling long enough to read database"))},$)},g.prototype.saveDatabaseInternal=function($){var S=$||function(z){if(z)throw z},N=this;if(!this.persistenceAdapter){S(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var F;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(N.ignoreAutosave=!1,F){S(new Error("adapter error - getLokiCopy called more than once"));return}var V=N.copy({removeNonSerializable:!0});return F=N.collections.map(function(ae){return[ae.dirty,ae.dirtyIds]}),N.collections.forEach(function(ae){ae.dirty=!1,ae.dirtyIds=[]}),V},function(V){N.ignoreAutosave=!1,V&&F&&N.collections.forEach(function(ae,ve){var He=F[ve];ae.dirty=ae.dirty||He[0],ae.dirtyIds=ae.dirtyIds.concat(He[1])}),S(V)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(V){N.autosaveClearFlags(),S(V)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(V){S(V)}))},g.prototype.saveDatabase=function($){if(!this.throttledSaves){this.saveDatabaseInternal($);return}if(this.throttledSavePending){this.throttledCallbacks.push($);return}var S=this.throttledCallbacks;this.throttledCallbacks=[],S.unshift($),this.throttledSavePending=!0;var N=this;this.saveDatabaseInternal(function(F){N.throttledSavePending=!1,S.forEach(function(z){typeof z=="function"&&setTimeout(function(){z(F)},1)}),N.throttledCallbacks.length>0&&N.saveDatabase()})},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function($,S){var N=S||function(F,z){if(F)throw F};typeof $=="function"&&!S&&(N=$),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(z){N(z)}):N(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var $=0;$<this.collections.length;$++)if(this.collections[$].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var $=0;$<this.collections.length;$++)this.collections[$].dirty=!1},g.prototype.autosaveEnable=function($,S){this.autosave=!0;var N=5e3,F=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(N=this.autosaveInterval),this.autosaveHandle=setInterval(function(){F.autosaveDirty()&&!F.ignoreAutosave&&F.saveDatabase(S)},N)},g.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function X($,S){return this.collection=$,this.filteredrows=[],this.filterInitialized=!1,this}X.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},X.prototype.toJSON=function(){var $=this.copy();return $.collection=null,$},X.prototype.limit=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new X(this.collection);return S.filteredrows=this.filteredrows.slice(0,$),S.filterInitialized=!0,S},X.prototype.offset=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new X(this.collection);return S.filteredrows=this.filteredrows.slice($),S.filterInitialized=!0,S},X.prototype.copy=function(){var $=new X(this.collection);return this.filteredrows.length>0&&($.filteredrows=this.filteredrows.slice()),$.filterInitialized=this.filterInitialized,$},X.prototype.branch=X.prototype.copy,X.prototype.transform=function($,S){var N,F,z=this;if(typeof $=="string"&&this.collection.transforms.hasOwnProperty($)&&($=this.collection.transforms[$]),typeof $!="object"||!Array.isArray($))throw new Error("Invalid transform");for(typeof S<"u"&&($=o.resolveTransformParams($,S)),N=0;N<$.length;N++)switch(F=$[N],F.type){case"find":z.find(F.value);break;case"where":z.where(F.value);break;case"simplesort":z.simplesort(F.property,F.desc||F.options);break;case"compoundsort":z.compoundsort(F.value);break;case"sort":z.sort(F.value);break;case"limit":z=z.limit(F.value);break;case"offset":z=z.offset(F.value);break;case"map":z=z.map(F.value,F.dataOptions);break;case"eqJoin":z=z.eqJoin(F.joinData,F.leftJoinKey,F.rightJoinKey,F.mapFun,F.dataOptions);break;case"mapReduce":z=z.mapReduce(F.mapFunction,F.reduceFunction);break;case"update":z.update(F.value);break;case"remove":z.remove();break}return z},X.prototype.sort=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=function(N,F){return function(z,V){return N(F[z],F[V])}}($,this.collection.data);return this.filteredrows.sort(S),this},X.prototype.simplesort=function($,S){var N,F=10,z=this.collection.data.length,V=this.filteredrows.length,ae=this.collection.binaryIndices.hasOwnProperty($);if((typeof S>"u"||S===!1)&&(S={desc:!1}),S===!0&&(S={desc:!0}),V===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty($))return this.collection.ensureIndex($),this.filteredrows=this.collection.binaryIndices[$].values.slice(0),S.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!S.disableIndexIntersect&&ae&&(N=z/V,S.useJavascriptSorting&&(F=6),N<=F||S.forceIndexIntersect)){var ve,He=this.filteredrows,ze={};for(ve=0;ve<V;ve++)ze[He[ve]]=!0;var st=this.collection.binaryIndices[$].values;return this.filteredrows=st.filter(function(mt){return ze[mt]}),S.desc&&this.filteredrows.reverse(),this}if(S.useJavascriptSorting)return this.sort(function(mt,vt){if(mt[$]===vt[$])return 0;if(mt[$]>vt[$])return 1;if(mt[$]<vt[$])return-1});var wt=function(mt,vt,Rt){var fr,Kr,ct;return function(It,pn){return~mt.indexOf(".")?(ct=mt.split("."),fr=o.getIn(Rt[It],ct,!0),Kr=o.getIn(Rt[pn],ct,!0)):(fr=Rt[It][mt],Kr=Rt[pn][mt]),c(fr,Kr,vt)}}($,S.desc,this.collection.data);return this.filteredrows.sort(wt),this},X.prototype.compoundsort=function($){if($.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var S;if($.length===1)return S=$[0],Array.isArray(S)?this.simplesort(S[0],S[1]):this.simplesort(S,!1);for(var N=0,F=$.length;N<F;N+=1)S=$[N],Array.isArray(S)||($[N]=[S,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var z=function(V,ae){return function(ve,He){return d(V,ae[ve],ae[He])}}($,this.collection.data);return this.filteredrows.sort(z),this},X.prototype.findOr=function($){var S=null,N=0,F=0,z=[],V=[],ae=0;this.count();for(var ve=0,He=$.length;ve<He;ve++)for(S=this.branch().find($[ve]).filteredrows,F=S.length,N=0;N<F;N++)ae=S[N],V[ae]===void 0&&(V[ae]=!0,z.push(ae));return this.filteredrows=z,this.filterInitialized=!0,this},X.prototype.$or=X.prototype.findOr;function te($,S){if($==="$regex")Array.isArray(S)?S=new RegExp(S[0],S[1]):S instanceof RegExp||(S=new RegExp(S));else if(typeof S=="object")for(var N in S)(N==="$regex"||typeof S[N]=="object")&&(S[N]=te(N,S[N]));return S}X.prototype.findAnd=function($){for(var S=0,N=$.length;S<N;S++){if(this.count()===0)return this;this.find($[S])}return this},X.prototype.$and=X.prototype.findAnd,X.prototype.find=function($,S){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var N=$||"getAll",F,z,V,ae,ve,He,ze,st=!1,wt=[],mt=[],vt=null;if(S=S||!1,typeof N=="object"){for(F in N)ae={},ae[F]=N[F],mt.push(ae),t.call(N,F)&&(z=F,V=N[F]);if(mt.length>1)return this.find({$and:mt},S)}if(!z||N==="getAll")return S&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(z==="$and"||z==="$or")return this[z](V),S&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(V===null||typeof V!="object"||V instanceof Date)ve="$eq",He=V;else if(typeof V=="object"){for(ze in V)if(t.call(V,ze)){ve=ze,He=V[ze];break}}else throw new Error("Do not know what you want to do.");(ve==="$regex"||typeof He=="object")&&(He=te(ve,He));var Rt=z.indexOf(".")!==-1,fr=!this.filterInitialized;fr&&this.collection.binaryIndices[z]&&A[ve]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(z),st=!0,vt=this.collection.binaryIndices[z]),!st&&ve==="$in"&&Array.isArray(He)&&typeof Set<"u"&&(He=new Set(He),ve="$inSet");var Kr=T[ve],ct=this.collection.data,It=0,pn=0,Ri,Vi=0,vn;if(this.filterInitialized){if(Ri=this.filteredrows,pn=Ri.length,Rt){for(z=z.split("."),It=0;It<pn;It++)if(Vi=Ri[It],vn=ct[Vi],y(vn,z,Kr,He,vn)&&(wt.push(Vi),S))return this.filteredrows=wt,this}else for(It=0;It<pn;It++)if(Vi=Ri[It],vn=ct[Vi],Kr(vn[z],He,vn)&&(wt.push(Vi),S))return this.filteredrows=wt,this}else if(st){var ds=this.collection.calculateRange(ve,z,He);if(ve!=="$in"){for(It=ds[0];It<=ds[1];It++)if(A[ve]!==!0){if(A[ve](o.getIn(ct[vt.values[It]],z,Rt),He)&&(wt.push(vt.values[It]),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else if(wt.push(vt.values[It]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0,pn=ds.length;It<pn;It++)if(wt.push(vt.values[ds[It]]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else if(pn=ct.length,Rt){for(z=z.split("."),It=0;It<pn;It++)if(vn=ct[It],y(vn,z,Kr,He,vn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0;It<pn;It++)if(vn=ct[It],Kr(vn[z],He,vn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this;return this.filteredrows=wt,this.filterInitialized=!0,this},X.prototype.where=function($){var S,N=[];if(typeof $=="function")S=$;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var F=this.filteredrows.length;F--;)S(this.collection.data[this.filteredrows[F]])===!0&&N.push(this.filteredrows[F]);return this.filteredrows=N,this}else{for(var z=this.collection.data.length;z--;)S(this.collection.data[z])===!0&&N.push(z);return this.filteredrows=N,this.filterInitialized=!0,this}}catch(V){throw V}},X.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},X.prototype.data=function($){var S=[],N=this.collection.data,F,z,V,ae;if($=$||{},$.removeMeta&&!$.forceClones&&($.forceClones=!0,$.forceCloneMethod=$.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&($.forceClones=!0,$.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||$.forceClones){for(z=N.length,ae=$.forceCloneMethod||this.collection.cloneMethod,V=0;V<z;V++)F=_(N[V],ae),$.removeMeta&&(delete F.$loki,delete F.meta),S.push(F);return S}else return N.slice();else this.filterInitialized=!0;var ve=this.filteredrows;if(z=ve.length,this.collection.cloneObjects||$.forceClones)for(ae=$.forceCloneMethod||this.collection.cloneMethod,V=0;V<z;V++)F=_(N[ve[V]],ae),$.removeMeta&&(delete F.$loki,delete F.meta),S.push(F);else for(V=0;V<z;V++)S.push(N[ve[V]]);return S},X.prototype.update=function($){if(typeof $!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var S,N=this.filteredrows.length,F=this.collection.data,z=0;z<N;z++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(S=_(F[this.filteredrows[z]],this.collection.cloneMethod),$(S),this.collection.update(S)):($(F[this.filteredrows[z]]),this.collection.update(F[this.filteredrows[z]]));return this},X.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},X.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}},X.prototype.eqJoin=function($,S,N,F,z){var V=[],ae,ve=[],He,ze,st=[],wt=typeof S=="function",mt=typeof N=="function",vt={};if(V=this.data(z),ae=V.length,$ instanceof j)ve=$.chain().data(z);else if($ instanceof X)ve=$.data(z);else if(Array.isArray($))ve=$;else throw new TypeError("joinData needs to be an array or result set");He=ve.length;for(var Rt=0;Rt<He;Rt++)ze=mt?N(ve[Rt]):ve[Rt][N],vt[ze]=ve[Rt];F||(F=function(Kr,ct){return{left:Kr,right:ct}});for(var fr=0;fr<ae;fr++)ze=wt?S(V[fr]):V[fr][S],st.push(F(V[fr],vt[ze]||{}));return this.collection=new j("joinData"),this.collection.insert(st),this.filteredrows=[],this.filterInitialized=!1,this},X.prototype.map=function($,S){var N=this.data(S).map($);return this.collection=new j("mappedData"),this.collection.insert(N),this.filteredrows=[],this.filterInitialized=!1,this};function J($,S,N){this.collection=$,this.name=S,this.rebuildPending=!1,this.options=N||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new X($),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}J.prototype=new C,J.prototype.constructor=J,J.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},J.prototype.rematerialize=function($){var S,N,F;$=$||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new X(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var z=Object.isFrozen(this.filterPipeline);if($.hasOwnProperty("removeWhereFilters"))for(z&&(this.filterPipeline=this.filterPipeline.slice()),S=this.filterPipeline.length,N=S;N--;)this.filterPipeline[N].type==="where"&&(N!==this.filterPipeline.length-1&&(this.filterPipeline[N]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var V=this.filterPipeline;for(this.filterPipeline=[],S=V.length,F=0;F<S;F++)this.applyFind(V[F].val,V[F].uid);return z&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},J.prototype.branchResultset=function($,S){var N=this.resultset.branch();return typeof $>"u"?N:N.transform($,S)},J.prototype.toJSON=function(){var $=new J(this.collection,this.name,this.options);return $.resultset=this.resultset,$.resultdata=[],$.resultsdirty=!0,$.filterPipeline=this.filterPipeline,$.sortFunction=this.sortFunction,$.sortCriteria=this.sortCriteria,$.sortCriteriaSimple=this.sortCriteriaSimple||null,$.sortDirty=this.sortDirty,$.collection=null,$},J.prototype.removeFilters=function($){$=$||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var S=Object.isFrozen(this.filterPipeline),N=this.filterPipeline.length>0;this.filterPipeline=[],S&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,$.queueSortPhase===!0&&this.queueSortPhase(),N&&this.emit("filter")},J.prototype.applySort=function($){return this.sortFunction=$,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},J.prototype.applySimpleSort=function($,S){return this.sortCriteriaSimple={propname:$,options:S||!1},this.collection.disableFreeze||n(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},J.prototype.applySortCriteria=function($){return this.sortCriteria=$,this.collection.disableFreeze||n(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},J.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},J.prototype.commit=function(){return this.cachedresultset=null,this},J.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},J.prototype._indexOfFilterWithId=function($){if(typeof $=="string"||typeof $=="number"){for(var S=0,N=this.filterPipeline.length;S<N;S+=1)if($===this.filterPipeline[S].uid)return S}return-1},J.prototype._addFilter=function($){var S=Object.isFrozen(this.filterPipeline);S&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||n($),this.filterPipeline.push($),S&&Object.freeze(this.filterPipeline),this.resultset[$.type]($.val)},J.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var $=this.filterPipeline,S=Object.isFrozen($);this.filterPipeline=[];for(var N=0,F=$.length;N<F;N+=1)this._addFilter($[N]);return S&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},J.prototype.applyFilter=function($){var S=this._indexOfFilterWithId($.uid);if(S>=0){var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[S]=$,N&&(i($),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter($),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},J.prototype.applyFind=function($,S){return this.applyFilter({type:"find",val:$,uid:S}),this},J.prototype.applyWhere=function($,S){return this.applyFilter({type:"where",val:$,uid:S}),this},J.prototype.removeFilter=function($){var S=this._indexOfFilterWithId($);if(S<0)throw new Error("Dynamic view does not contain a filter with ID: "+$);var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(S,1),N&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},J.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},J.prototype.data=function($){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data($)},J.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var $=this;setTimeout(function(){$.rebuildPending&&($.rebuildPending=!1,$.emit("rebuild",$))},this.options.minRebuildInterval)}},J.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var $=this;this.options.sortPriority==="active"?setTimeout(function(){$.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},J.prototype.performSortPhase=function($){!this.sortDirty&&!this.resultsdirty||($=$||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),$.suppressRebuildEvent||this.emit("rebuild",this))},J.prototype.evaluateDocument=function($,S){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var N=this.resultset.filteredrows,F=S?-1:N.indexOf(+$),z=N.length,V=new X(this.collection);V.filteredrows=[$],V.filterInitialized=!0;for(var ae,ve=0,He=this.filterPipeline.length;ve<He;ve++)ae=this.filterPipeline[ve],V[ae.type](ae.val);var ze=V.filteredrows.length===0?-1:0;if(!(F===-1&&ze===-1)){if(F===-1&&ze!==-1){N.push($),this.options.persistent&&this.resultdata.push(this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(F!==-1&&ze===-1){F<z-1?(N.splice(F,1),this.options.persistent&&this.resultdata.splice(F,1)):(N.length=z-1,this.options.persistent&&(this.resultdata.length=z-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(F!==-1&&ze!==-1){this.options.persistent&&(this.resultdata[F]=this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},J.prototype.removeDocument=function($){var S,N,F,z={},V={},ae=[],ve=this.resultset,He=this.resultset.filteredrows,ze=He.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray($)||($=[$]),F=$.length,N=0;N<F;N++)z[$[N]]=!0;for(S=0;S<ze;S++)z[He[S]]&&(V[S]=!0);Object.keys(V).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(wt,mt){return!V[mt]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(wt,mt){return!V[mt]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var st=function(wt){return function(mt){return mt<ve.filteredrows[wt]}};for(ze=ve.filteredrows.length,S=0;S<ze;S++)ae=$.filter(st(S)),ve.filteredrows[S]-=ae.length},J.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}};function j($,S){this.name=$,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=$,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var N=this;S=S||{},S.hasOwnProperty("unique")&&(Array.isArray(S.unique)||(S.unique=[S.unique]),S.unique.forEach(function(ze){N.uniqueNames.push(ze)})),S.hasOwnProperty("exact")&&S.exact.forEach(function(ze){N.constraints.exact[ze]=new je(ze)}),this.adaptiveBinaryIndices=S.hasOwnProperty("adaptiveBinaryIndices")?S.adaptiveBinaryIndices:!0,this.transactional=S.hasOwnProperty("transactional")?S.transactional:!1,this.cloneObjects=S.hasOwnProperty("clone")?S.clone:!1,this.cloneMethod=S.hasOwnProperty("cloneMethod")?S.cloneMethod:"parse-stringify",this.asyncListeners=S.hasOwnProperty("asyncListeners")?S.asyncListeners:!1,this.disableMeta=S.hasOwnProperty("disableMeta")?S.disableMeta:!1,this.disableChangesApi=S.hasOwnProperty("disableChangesApi")?S.disableChangesApi:!0,this.disableDeltaChangesApi=S.hasOwnProperty("disableDeltaChangesApi")?S.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=S.hasOwnProperty("autoupdate")?S.autoupdate:!1,this.serializableIndices=S.hasOwnProperty("serializableIndices")?S.serializableIndices:!0,this.disableFreeze=S.hasOwnProperty("disableFreeze")?S.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(S.ttl||-1,S.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var F=[];if(S&&S.indices)if(Object.prototype.toString.call(S.indices)==="[object Array]")F=S.indices;else if(typeof S.indices=="string")F=[S.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var z=0;z<F.length;z++)this.ensureIndex(F[z]);function V(ze){var st=typeof Set=="function"?new Set:[];st.add||(st.add=function(wt){return this.indexOf(wt)===-1&&this.push(wt),this}),ze.forEach(function(wt){st.add(wt.object)}),st.forEach(function(wt){if(!t.call(wt,"$loki"))return N.removeAutoUpdateObserver(wt);try{N.update(wt)}catch{}})}this.observerCallback=V;function ae(ze,st){return st?ve(st,ze):JSON.parse(JSON.stringify(ze))}this.getChangeDelta=ae;function ve(ze,st){var wt=st!==null&&typeof st=="object"?Object.keys(st):null;if(wt&&wt.length&&["string","boolean","number"].indexOf(typeof st)<0){for(var mt={},vt=0;vt<wt.length;vt++){var Rt=wt[vt];if(st.hasOwnProperty(Rt))if(!ze.hasOwnProperty(Rt)||N.uniqueNames.indexOf(Rt)>=0||Rt=="$loki"||Rt=="meta")mt[Rt]=st[Rt];else{var fr=ve(ze[Rt],st[Rt]);typeof fr<"u"&&fr!={}&&(mt[Rt]=fr)}}return Object.keys(mt).length===0?void 0:mt}else return ze===st?void 0:st}this.getObjectDelta=ve;function He(){N.changes=[]}this.getChanges=function(){return N.changes},this.flushChanges=He,this.setChangesApi=function(ze){N.disableChangesApi=!ze,ze||(N.disableDeltaChangesApi=!1)},this.on("delete",function(st){N.disableChangesApi||N.createChange(N.name,"R",st)}),this.on("warning",function(ze){N.lokiConsoleWrapper.warn(ze)}),He()}j.prototype=new C,j.prototype.contructor=j,j.prototype.createChange=function($,S,N,F){this.changes.push({name:$,operation:S,obj:S=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(N,F):JSON.parse(JSON.stringify(N))})},j.prototype.insertMeta=function($){var S,N;if(!(this.disableMeta||!$)){if(Array.isArray($)){for(S=$.length,N=0;N<S;N++)$[N].hasOwnProperty("meta")||($[N].meta={}),$[N].meta.created=new Date().getTime(),$[N].meta.revision=0;return}$.meta||($.meta={}),$.meta.created=new Date().getTime(),$.meta.revision=0}},j.prototype.updateMeta=function($){return this.disableMeta||!$||(this.disableFreeze||($=s($),$.meta=s($.meta)),$.meta.updated=new Date().getTime(),$.meta.revision+=1),$},j.prototype.createInsertChange=function($){this.createChange(this.name,"I",$)},j.prototype.createUpdateChange=function($,S){this.createChange(this.name,"U",$,S)},j.prototype.insertMetaWithChange=function($){this.insertMeta($),this.createInsertChange($)},j.prototype.updateMetaWithChange=function($,S,N){return $=this.updateMeta($,N),this.createUpdateChange($,S),$},j.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},j.prototype.addAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.observe($,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},j.prototype.removeAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve($,this.observerCallback)},j.prototype.addTransform=function($,S){if(this.transforms.hasOwnProperty($))throw new Error("a transform by that name already exists");this.transforms[$]=S},j.prototype.getTransform=function($){return this.transforms[$]},j.prototype.setTransform=function($,S){this.transforms[$]=S},j.prototype.removeTransform=function($){delete this.transforms[$]},j.prototype.byExample=function($){var S,N,F;F=[];for(S in $)$.hasOwnProperty(S)&&F.push((N={},N[S]=$[S],N));return{$and:F}},j.prototype.findObject=function($){return this.findOne(this.byExample($))},j.prototype.findObjects=function($){return this.find(this.byExample($))},j.prototype.ttlDaemonFuncGen=function(){var $=this,S=this.ttl.age;return function(){var F=Date.now(),z=$.chain().where(function(ae){var ve=ae.meta.updated||ae.meta.created,He=F-ve;return S<He});z.remove()}},j.prototype.setTTL=function($,S){$<0?clearInterval(this.ttl.daemon):(this.ttl.age=$,this.ttl.ttlInterval=S,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),S))},j.prototype.prepareFullDocIndex=function(){for(var $=this.data.length,S=new Array($),N=0;N<$;N+=1)S[N]=N;return S},j.prototype.configureOptions=function($){$=$||{},$.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=$.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},j.prototype.ensureIndex=function($,S){if(typeof S>"u"&&(S=!1),$==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[$]&&!S&&!this.binaryIndices[$].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty($)&&!S)){var N={name:$,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[$]=N;var F=function(z,V){var ae,ve,He=~z.indexOf(".")?z.split("."):!1;return function(ze,st){if(He?(ae=o.getIn(V[ze],He,!0),ve=o.getIn(V[st],He,!0)):(ae=V[ze][z],ve=V[st][z]),ae!==ve){if(a.lt(ae,ve,!1))return-1;if(a.gt(ae,ve,!1))return 1}return 0}}($,this.data);N.values.sort(F),N.dirty=!1,this.dirty=!0}},j.prototype.checkAllIndexes=function($){var S,N=this.binaryIndices,F=[],z;for(S in N)t.call(N,S)&&(z=this.checkIndex(S,$),z||F.push(S));return F},j.prototype.checkIndex=function($,S){S=S||{},S.randomSamplingFactor&&S.randomSampling!==!1&&(S.randomSampling=!0),S.randomSamplingFactor=S.randomSamplingFactor||.1,(S.randomSamplingFactor<0||S.randomSamplingFactor>1)&&(S.randomSamplingFactor=.1);var N=!0,F,z,V,ae,ve;if(!this.binaryIndices.hasOwnProperty($))throw new Error("called checkIndex on property without an index: "+$);if(this.adaptiveBinaryIndices||this.ensureIndex($),ve=this.binaryIndices[$].values,ae=ve.length,ae!==this.data.length)return S.repair&&this.ensureIndex($,!0),!1;if(ae===0)return!0;var He=$.indexOf(".")!==-1;if(ae===1)N=ve[0]===0;else if(S.randomSampling){if(T.$lte(o.getIn(this.data[ve[0]],$,He),o.getIn(this.data[ve[1]],$,He))||(N=!1),T.$lte(o.getIn(this.data[ve[ae-2]],$,He),o.getIn(this.data[ve[ae-1]],$,He))||(N=!1),N){for(z=Math.floor((ae-1)*S.randomSamplingFactor),F=0;F<z-1;F++)if(V=Math.floor(Math.random()*(ae-1)),!T.$lte(o.getIn(this.data[ve[V]],$,He),o.getIn(this.data[ve[V+1]],$,He))){N=!1;break}}}else for(F=0;F<ae-1;F++)if(!T.$lte(o.getIn(this.data[ve[F]],$,He),o.getIn(this.data[ve[F+1]],$,He))){N=!1;break}return!N&&S.repair&&this.ensureIndex($,!0),N},j.prototype.getBinaryIndexValues=function($){var S,N=this.binaryIndices[$].values,F=[];for(S=0;S<N.length;S++)F.push(o.getIn(this.data[N[S]],$,!0));return F},j.prototype.getUniqueIndex=function($,S){var N=this.constraints.unique[$];return!N&&S?this.ensureUniqueIndex($):N},j.prototype.ensureUniqueIndex=function($){var S=this.constraints.unique[$];return S||this.uniqueNames.indexOf($)==-1&&this.uniqueNames.push($),this.constraints.unique[$]=S=new Te($),this.data.forEach(function(N){S.set(N)}),S},j.prototype.ensureAllIndexes=function($){var S,N=this.binaryIndices;for(S in N)t.call(N,S)&&this.ensureIndex(S,$)},j.prototype.flagBinaryIndexesDirty=function(){var $,S=this.binaryIndices;for($ in S)t.call(S,$)&&(S[$].dirty=!0)},j.prototype.flagBinaryIndexDirty=function($){this.binaryIndices[$]&&(this.binaryIndices[$].dirty=!0)},j.prototype.count=function($){return $?this.chain().find($).filteredrows.length:this.data.length},j.prototype.ensureId=function(){if(!this.idIndex){var $=this.data,S=0,N=$.length,F=new Array(N);for(S;S<N;S++)F[S]=$[S].$loki;this.idIndex=F}},j.prototype.ensureIdAsync=function($){this.async(function(){this.ensureId()},$)},j.prototype.addDynamicView=function($,S){var N=new J(this,$,S);return this.DynamicViews.push(N),N},j.prototype.removeDynamicView=function($){this.DynamicViews=this.DynamicViews.filter(function(S){return S.name!==$})},j.prototype.getDynamicView=function($){for(var S=0;S<this.DynamicViews.length;S++)if(this.DynamicViews[S].name===$)return this.DynamicViews[S];return null},j.prototype.findAndUpdate=function($,S){typeof $=="function"?this.updateWhere($,S):this.chain().find($).update(S)},j.prototype.findAndRemove=function($){this.chain().find($).remove()},j.prototype.insert=function($,S){if(!Array.isArray($))return this.insertOne($);var N,F=[],z=S&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;z&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",$);for(var V=0,ae=$.length;V<ae;V++){if(N=this.insertOne($[V],!0),!N)return;F.push(N)}}finally{z&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",F),F=this.cloneObjects?_(F,this.cloneMethod):F,F.length===1?F[0]:F},j.prototype.insertOne=function($,S){var N=null,F;if(typeof $!="object"?N=new TypeError("Document needs to be an object"):$===null&&(N=new TypeError("Object cannot be null")),N!==null)throw this.emit("error",N),N;var z=this.cloneObjects?_($,this.cloneMethod):$;if(this.disableFreeze||(z=s(z)),this.disableMeta||(typeof z.meta>"u"?z.meta={revision:0,created:0}:this.disableFreeze||(z.meta=s(z.meta))),S||this.emit("pre-insert",z),!!this.add(z))return this.disableChangesApi?this.insertMeta(z):this.insertMetaWithChange(z),this.disableFreeze||n(z),F=this.cloneObjects?_(z,this.cloneMethod):z,S||this.emit("insert",F),this.addAutoUpdateObserver(F),F},j.prototype.clear=function($){var S=this;if($=$||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},$.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var N=Object.keys(this.binaryIndices);N.forEach(function(F){S.binaryIndices[F].dirty=!1,S.binaryIndices[F].values=[]})}},j.prototype.update=function($){var S,N,F;if(Array.isArray($)){F=$.length,S=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,S&&(this.adaptiveBinaryIndices=!1);try{for(N=0;N<F;N+=1)this.update($[N])}finally{S&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!t.call($,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var z=this.get($.$loki,!0),V,ae,ve,He=this;if(!z)throw new Error("Trying to update a document not in collection.");V=z[0],ve=z[1],ae=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?_($,this.cloneMethod):$,this.emit("pre-update",$),this.uniqueNames.forEach(function(vt){He.getUniqueIndex(vt,!0).update(V,ae)}),this.data[ve]=ae,ae!==$&&this.addAutoUpdateObserver($);for(var ze=0;ze<this.DynamicViews.length;ze++)this.DynamicViews[ze].evaluateDocument(ve,!1);var st;if(this.adaptiveBinaryIndices){var wt=this.binaryIndices;for(st in wt)this.adaptiveBinaryIndexUpdate(ve,st)}else this.flagBinaryIndexesDirty();this.idIndex[ve]=ae.$loki,this.isIncremental&&this.dirtyIds.push(ae.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?ae=this.updateMeta(ae):ae=this.updateMetaWithChange(ae,V),this.disableFreeze||n(ae);var mt;return this.cloneObjects?mt=_(ae,this.cloneMethod):mt=ae,this.emit("update",mt,V),mt}catch(vt){throw this.rollback(),this.lokiConsoleWrapper.error(vt.message),this.emit("error",vt),vt}},j.prototype.add=function($){if(typeof $!="object")throw new TypeError("Object being added needs to be an object");if(typeof $.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var S=this.maxId;$.$loki=S,this.disableMeta||($.meta.version=0);for(var N=0,F=this.uniqueNames.length;N<F;N++)this.getUniqueIndex(this.uniqueNames[N],!0).set($);this.idIndex&&this.idIndex.push(S),this.isIncremental&&this.dirtyIds.push(S),this.data.push($);var z=this.data.length-1,V=this.DynamicViews.length;for(N=0;N<V;N++)this.DynamicViews[N].evaluateDocument(z,!0);if(this.adaptiveBinaryIndices){var ae=this.binaryIndices;for(var ve in ae)this.adaptiveBinaryIndexInsert(z,ve)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?_($,this.cloneMethod):$}catch(He){throw this.rollback(),this.lokiConsoleWrapper.error(He.message),this.emit("error",He),He}},j.prototype.updateWhere=function($,S){var N=this.where($),F=0,z;try{for(F;F<N.length;F++)z=S(N[F]),this.update(z)}catch(V){this.rollback(),this.lokiConsoleWrapper.error(V.message)}},j.prototype.removeWhere=function($){var S;typeof $=="function"?(S=this.data.filter($),this.remove(S)):this.chain().find($).remove()},j.prototype.removeDataOnly=function(){this.remove(this.data.slice())},j.prototype.removeBatchByPositions=function($){var S=$.length,N={},F,z,V,ae=Object.keys(this.binaryIndices).length,ve=Object.keys(this.constraints.unique).length,He=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,ze,st=this;try{for(this.startTransaction(),this.ensureId(),V=0;V<S;V++)N[this.idIndex[$[V]]]=!0;if(F=this.DynamicViews.length,F>0||ae>0||ve>0){if(F>0)for(z=0;z<F;z++)this.DynamicViews[z].removeDocument($);if(this.adaptiveBinaryIndices&&!He){var wt,mt=this.binaryIndices;for(wt in mt)this.adaptiveBinaryIndexRemove($,wt)}else this.flagBinaryIndexesDirty();ve&&this.uniqueNames.forEach(function(vt){var Rt=st.getUniqueIndex(vt);if(Rt)for(V=0;V<S;V++)ze=st.data[$[V]],ze[vt]!==null&&ze[vt]!==void 0&&Rt.remove(ze[vt])})}if(!this.disableChangesApi||this.events.delete.length>1)for(V=0;V<S;V++)this.emit("delete",this.data[$[V]]);if(this.data=this.data.filter(function(vt){return!N[vt.$loki]}),this.isIncremental)for(V=0;V<S;V++)this.dirtyIds.push(this.idIndex[$[V]]);this.idIndex=this.idIndex.filter(function(vt){return!N[vt]}),this.adaptiveBinaryIndices&&He&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(vt){return this.rollback(),He&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(vt.message),this.emit("error",vt),null}},j.prototype.removeBatch=function($){var S=$.length,N=this.data.length,F,z={},V=[];for(F=0;F<N;F++)z[this.data[F].$loki]=F;for(F=0;F<S;F++)typeof $[F]=="object"?V.push(z[$[F].$loki]):V.push(z[$[F]]);this.removeBatchByPositions(V)},j.prototype.remove=function($){if(typeof $=="number"&&($=this.get($)),typeof $!="object")throw new Error("Parameter is not an object");if(Array.isArray($)){this.removeBatch($);return}if(!t.call($,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var S=this.get($.$loki,!0),N=S[1],F=this;this.uniqueNames.forEach(function(ve){if($[ve]!==null&&typeof $[ve]<"u"){var He=F.getUniqueIndex(ve);He&&He.remove($[ve])}});for(var z=0;z<this.DynamicViews.length;z++)this.DynamicViews[z].removeDocument(N);if(this.adaptiveBinaryIndices){var V,ae=this.binaryIndices;for(V in ae)this.adaptiveBinaryIndexRemove(N,V)}else this.flagBinaryIndexesDirty();return this.data.splice(N,1),this.removeAutoUpdateObserver($),this.idIndex.splice(N,1),this.isIncremental&&this.dirtyIds.push($.$loki),this.commit(),this.dirty=!0,this.emit("delete",S[0]),this.disableFreeze||($=s($)),delete $.$loki,delete $.meta,this.disableFreeze||i($),$}catch(ve){return this.rollback(),this.lokiConsoleWrapper.error(ve.message),this.emit("error",ve),null}},j.prototype.get=function($,S){this.idIndex||this.ensureId();var N=S||!1,F=this.idIndex,z=F.length-1,V=0,ae=V+z>>1;if($=typeof $=="number"?$:parseInt($,10),isNaN($))throw new TypeError("Passed id is not an integer");for(;F[V]<F[z];)ae=V+z>>1,F[ae]<$?V=ae+1:z=ae;return z===V&&F[V]===$?N?[this.data[V],V]:this.data[V]:null},j.prototype.getBinaryIndexPosition=function($,S){var N=o.getIn(this.data[$],S,!0),F=this.binaryIndices[S].values,z=this.calculateRange("$eq",S,N);if(z[0]===0&&z[1]===-1)return null;for(var V=z[0],ae=z[1],ve=V;ve<=ae;ve++)if(F[ve]===$)return ve;return null},j.prototype.adaptiveBinaryIndexInsert=function($,S){var N=S.indexOf(".")!==-1,F=this.binaryIndices[S].values,z=o.getIn(this.data[$],S,N);this.serializableIndices===!0&&z instanceof Date&&(this.data[$][S]=z.getTime(),z=o.getIn(this.data[$],S));var V=F.length===0?0:this.calculateRangeStart(S,z,!0,N);this.binaryIndices[S].values.splice(V,0,$)},j.prototype.adaptiveBinaryIndexUpdate=function($,S){var N,F=this.binaryIndices[S].values,z=F.length;for(N=0;N<z&&F[N]!==$;N++);this.binaryIndices[S].values.splice(N,1),this.adaptiveBinaryIndexInsert($,S)},j.prototype.adaptiveBinaryIndexRemove=function($,S,N){var F=this.binaryIndices[S],z,V,ae,ve,He={},ze,st,wt;if(Array.isArray($))if(ve=$.length,ve===1)$=$[0];else{for(ae=0;ae<ve;ae++)He[$[ae]]=!0;if(F.values=F.values.filter(function(vt){return!He[vt]}),N===!0)return;var mt=$.slice();for(mt.sort(function(vt,Rt){return vt-Rt}),z=F.values.length,V=0;V<z;V++){for(ze=F.values[V],st=0,ae=0;ae<ve&&ze>mt[ae];ae++)st++;F.values[V]-=st}return}if(wt=this.getBinaryIndexPosition($,S),wt===null)return null;if(F.values.splice(wt,1),N!==!0)for(z=F.values.length,V=0;V<z;V++)F.values[V]>$&&F.values[V]--},j.prototype.calculateRangeStart=function($,S,N,F){var z=this.data,V=this.binaryIndices[$].values,ae=0,ve=V.length-1,He=0;if(V.length===0)return-1;for(o.getIn(z[V[ae]],$,F),o.getIn(z[V[ve]],$,F);ae<ve;)He=ae+ve>>1,a.lt(o.getIn(z[V[He]],$,F),S,!1)?ae=He+1:ve=He;var ze=ae;return a.aeq(S,o.getIn(z[V[ze]],$,F))?ze:a.lt(S,o.getIn(z[V[ze]],$,F),!1)?N?ze:ze-1:N?ze+1:ze},j.prototype.calculateRangeEnd=function($,S,N){var F=this.data,z=this.binaryIndices[$].values,V=0,ae=z.length-1,ve=0;if(z.length===0)return-1;for(o.getIn(F[z[V]],$,N),o.getIn(F[z[ae]],$,N);V<ae;)ve=V+ae>>1,a.lt(S,o.getIn(F[z[ve]],$,N),!1)?ae=ve:V=ve+1;var He=ae;return a.aeq(S,o.getIn(F[z[He]],$,N))?He:a.gt(S,o.getIn(F[z[He]],$,N),!1)?He+1:a.aeq(S,o.getIn(F[z[He-1]],$,N))?He-1:He},j.prototype.calculateRange=function($,S,N){var F=this.data,z=this.binaryIndices[S].values,V=0,ae=z.length-1,ve,He,ze;if(F.length===0)return[0,-1];var st=S.indexOf(".")!==-1,wt=o.getIn(F[z[V]],S,st),mt=o.getIn(F[z[ae]],S,st);switch($){case"$eq":case"$aeq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$dteq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$gt":if(a.gt(N,mt,!0))return[0,-1];if(a.gt(wt,N,!1))return[V,ae];break;case"$gte":if(a.gt(N,mt,!1))return[0,-1];if(a.gt(wt,N,!0))return[V,ae];break;case"$lt":if(a.lt(N,wt,!0))return[0,-1];if(a.lt(mt,N,!1))return[V,ae];break;case"$lte":if(a.lt(N,wt,!1))return[0,-1];if(a.lt(mt,N,!0))return[V,ae];break;case"$between":return a.gt(N[0],mt,!1)?[0,-1]:a.lt(N[1],wt,!1)?[0,-1]:(ve=this.calculateRangeStart(S,N[0],!1,st),ze=this.calculateRangeEnd(S,N[1],st),ve<0&&ve++,ze>ae&&ze--,a.gt(o.getIn(F[z[ve]],S,st),N[0],!0)||ve++,a.lt(o.getIn(F[z[ze]],S,st),N[1],!0)||ze--,ze<ve?[0,-1]:[ve,ze]);case"$in":for(var vt=[],Rt=[],fr=0,Kr=N.length;fr<Kr;fr++)for(var ct=this.calculateRange("$eq",S,N[fr]),It=ct[0];It<=ct[1];It++)vt[It]===void 0&&(vt[It]=!0,Rt.push(It));return Rt}switch($){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":ve=this.calculateRangeStart(S,N,!1,st),He=o.getIn(F[z[ve]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":ze=this.calculateRangeEnd(S,N,st),o.getIn(F[z[ze]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":return a.aeq(He,N)?[ve,ze]:[0,-1];case"$gt":return a.aeq(o.getIn(F[z[ze]],S,st),N)?[ze+1,ae]:[ze,ae];case"$gte":return a.aeq(o.getIn(F[z[ve]],S,st),N)?[ve,ae]:[ve+1,ae];case"$lt":return a.aeq(o.getIn(F[z[ve]],S,st),N)?[V,ve-1]:[V,ve];case"$lte":return a.aeq(o.getIn(F[z[ze]],S,st),N)?[V,ze]:[V,ze-1];default:return[0,F.length-1]}},j.prototype.by=function($,S){var N;if(S===void 0)return N=this,function(z){return N.by($,z)};var F=this.getUniqueIndex($,!0).get(S);return this.cloneObjects?_(F,this.cloneMethod):F},j.prototype.findOne=function($){$=$||{};var S=this.chain().find($,!0).data();return Array.isArray(S)&&S.length===0?null:this.cloneObjects?_(S[0],this.cloneMethod):S[0]},j.prototype.chain=function($,S){var N=new X(this);return typeof $>"u"?N:N.transform($,S)},j.prototype.find=function($){return this.chain().find($).data()},j.prototype.findOneUnindexed=function($,S){for(var N=this.data.length,F;N--;)if(o.getIn(this.data[N],$,!0)===S)return F=this.data[N],F;return null},j.prototype.startTransaction=function(){if(this.transactional){this.cachedData=_(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].startTransaction()}},j.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].commit()}},j.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].rollback()}},j.prototype.async=function($,S){setTimeout(function(){if(typeof $=="function")$(),S();else throw new TypeError("Argument passed for async execution is not a function")},0)},j.prototype.where=function($){return this.chain().where($).data()},j.prototype.mapReduce=function($,S){try{return S(this.data.map($))}catch(N){throw N}},j.prototype.eqJoin=function($,S,N,F,z){return new X(this).eqJoin($,S,N,F,z)},j.prototype.stages={},j.prototype.getStage=function($){return this.stages[$]||(this.stages[$]={}),this.stages[$]},j.prototype.commitLog=[],j.prototype.stage=function($,S){var N=JSON.parse(JSON.stringify(S));return this.getStage($)[S.$loki]=N,N},j.prototype.commitStage=function($,S){var N=this.getStage($),F,z=new Date().getTime();for(F in N)this.update(N[F]),this.commitLog.push({timestamp:z,message:S,data:JSON.parse(JSON.stringify(N[F]))});this.stages[$]={}},j.prototype.no_op=function(){},j.prototype.extract=function($){var S=0,N=this.data.length,F=Z($),z=[];for(S;S<N;S+=1)z.push(Ge(this.data[S],$,F));return z},j.prototype.max=function($){return Math.max.apply(null,this.extract($))},j.prototype.min=function($){return Math.min.apply(null,this.extract($))},j.prototype.maxRecord=function($){var S=0,N=this.data.length,F=Z($),z={index:0,value:void 0},V;for(S;S<N;S+=1)V!==void 0?V<Ge(this.data[S],$,F)&&(V=Ge(this.data[S],$,F),z.index=this.data[S].$loki):(V=Ge(this.data[S],$,F),z.index=this.data[S].$loki);return z.value=V,z},j.prototype.minRecord=function($){var S=0,N=this.data.length,F=Z($),z={index:0,value:void 0},V;for(S;S<N;S+=1)V!==void 0?V>Ge(this.data[S],$,F)&&(V=Ge(this.data[S],$,F),z.index=this.data[S].$loki):(V=Ge(this.data[S],$,F),z.index=this.data[S].$loki);return z.value=V,z},j.prototype.extractNumerical=function($){return this.extract($).map(se).filter(Number).filter(function(S){return!isNaN(S)})},j.prototype.avg=function($){return Pe(this.extractNumerical($))},j.prototype.stdDev=function($){return Ue(this.extractNumerical($))},j.prototype.mode=function($){var S={},N=this.extract($);N.forEach(function(ae){S[ae]?S[ae]+=1:S[ae]=1});var F,z,V;for(z in S)F?F<S[z]&&(V=z):(V=z,F=S[z]);return V},j.prototype.median=function($){var S=this.extractNumerical($);S.sort(me);var N=Math.floor(S.length/2);return S.length%2?S[N]:(S[N-1]+S[N])/2};function Z($){return $.indexOf(".")!==-1}function se($){return parseFloat($,10)}function Ee($,S){return $+S}function me($,S){return $-S}function Pe($){return $.reduce(Ee,0)/$.length}function Ue($){var S=Pe($),N=$.map(function(V){var ae=V-S,ve=ae*ae;return ve}),F=Pe(N),z=Math.sqrt(F);return z}function Ge($,S,N){if(N===!1)return $[S];for(var F=S.split("."),z=$;F.length>0;)z=z[F.shift()];return z}function it($,S,N){for(var F=0,z=$.length,V,ae;F<z;){if(ae=F+z>>1,V=N.apply(null,[S,$[ae]]),V===0)return{found:!0,index:ae};V<0?z=ae:F=ae+1}return{found:!1,index:z}}function _e($){return function(S,N){return it(S,N,$)}}function pe(){}pe.prototype={keys:[],values:[],sort:function($,S){return $<S?-1:$>S?1:0},setSort:function($){this.bs=new _e($)},bs:function(){return new _e(this.sort)},set:function($,S){var N=this.bs(this.keys,$);N.found?this.values[N.index]=S:(this.keys.splice(N.index,0,$),this.values.splice(N.index,0,S))},get:function($){return this.values[it(this.keys,$,this.sort).index]}};function Te($){this.field=$,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}Te.prototype.keyMap={},Te.prototype.lokiMap={},Te.prototype.set=function($){var S=$[this.field];if(S!==null&&typeof S<"u"){if(this.keyMap[S])throw new Error("Duplicate key for property "+this.field+": "+S);this.keyMap[S]=$,this.lokiMap[$.$loki]=S}},Te.prototype.get=function($){return this.keyMap[$]},Te.prototype.byId=function($){return this.keyMap[this.lokiMap[$]]},Te.prototype.update=function($,S){if(this.lokiMap[$.$loki]!==S[this.field]){var N=this.lokiMap[$.$loki];this.set(S),this.keyMap[N]=void 0}else this.keyMap[$[this.field]]=S},Te.prototype.remove=function($){var S=this.keyMap[$];if(S!==null&&typeof S<"u")this.keyMap[$]=void 0,this.lokiMap[S.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},Te.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function je($){this.index=Object.create(null),this.field=$}return je.prototype={set:function(S,N){this.index[S]?this.index[S].push(N):this.index[S]=[N]},remove:function(S,N){var F=this.index[S];for(var z in F)F[z]==N&&F.splice(z,1);F.length<1&&(this.index[S]=void 0)},get:function(S){return this.index[S]},clear:function(S){this.index={}}},g.deepFreeze=n,g.freeze=i,g.unFreeze=s,g.LokiOps=T,g.Collection=j,g.DynamicView=J,g.Resultset=X,g.KeyValueStore=pe,g.LokiMemoryAdapter=R,g.LokiPartitioningAdapter=M,g.LokiLocalStorageAdapter=W,g.LokiFsAdapter=L,g.persistenceAdapters={fs:L,localStorage:W},g.aeq=l,g.lt=u,g.gt=h,g.Comparators=a,g}()})})(nW);var uve=nW.exports;const cve=no(uve);class X3{constructor(r,t){le(this,"map");le(this,"sortedKeys");le(this,"compare");this.map=new Map,this.sortedKeys=[],r?typeof r=="string"?this.compare=(n,i)=>t==="desc"?n.value[r]>i.value[r]?-1:n.value[r]<i.value[r]?1:0:n.value[r]>i.value[r]?1:n.value[r]<i.value[r]?-1:0:this.compare=r:this.compare=(n,i)=>n.key>i.key?1:n.key<i.key?-1:0}set(r,t){if(this.map.has(r)){const s=this.sortedKeys.indexOf(r);s!==-1&&this.sortedKeys.splice(s,1)}this.map.set(r,t);let n=0,i=this.sortedKeys.length;for(;n<i;){const s=Math.floor((n+i)/2);this.compare({key:r,value:t},{key:this.sortedKeys[s],value:this.map.get(this.sortedKeys[s])})<0?i=s:n=s+1}this.sortedKeys.splice(n,0,r)}get(r){return this.map.get(r)}*[Symbol.iterator](){for(const r of this.sortedKeys)yield{key:r,value:this.map.get(r)}}*reverse(){for(let r=this.sortedKeys.length-1;r>=0;r--){const t=this.sortedKeys[r];yield{key:t,value:this.map.get(t)}}}*keys(){for(const r of this.sortedKeys)yield r}*values(){for(const r of this.sortedKeys)yield this.map.get(r)}*entries(){for(const r of this.sortedKeys)yield[r,this.map.get(r)]}has(r){return this.map.has(r)}delete(r){if(this.map.delete(r)){const t=this.sortedKeys.indexOf(r);return t!==-1&&this.sortedKeys.splice(t,1),!0}return!1}get size(){return this.map.size}}function eI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function fve(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function iW(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function hve(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");eI(e.outputLen),eI(e.blockLen)}function dve(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function pve(e,r){iW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const bE={number:eI,bool:fve,bytes:iW,hash:hve,exists:dve,output:pve};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sW=e=>e instanceof Uint8Array,wE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ga=(e,r)=>e<<32-r|e>>>r,vve=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vve)throw new Error("Non little-endian hardware is not supported");const gve=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Mw(e){if(!sW(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=gve[e[t]];return r}function yve(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function oW(e){if(typeof e=="string"&&(e=yve(e)),!sW(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let mve=class{clone(){return this._cloneInto()}};function aW(e){const r=n=>e().update(oW(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function bve(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let wve=class extends mve{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=wE(this.buffer)}update(r){bE.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=oW(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=wE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){bE.exists(this),bE.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;bve(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=wE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const $ve=(e,r,t)=>e&r^~e&t,_ve=(e,r,t)=>e&r^e&t^r&t,xve=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zu=new Uint32Array(64);let lW=class extends wve{constructor(){super(64,32,8,!1),this.A=Yu[0]|0,this.B=Yu[1]|0,this.C=Yu[2]|0,this.D=Yu[3]|0,this.E=Yu[4]|0,this.F=Yu[5]|0,this.G=Yu[6]|0,this.H=Yu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Zu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Zu[c-15],y=Zu[c-2],w=Ga(d,7)^Ga(d,18)^d>>>3,b=Ga(y,17)^Ga(y,19)^y>>>10;Zu[c]=b+Zu[c-7]+w+Zu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const d=Ga(a,6)^Ga(a,11)^Ga(a,25),y=h+d+$ve(a,l,u)+xve[c]+Zu[c]|0,b=(Ga(n,2)^Ga(n,13)^Ga(n,22))+_ve(n,i,s)|0;h=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Zu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Eve=class extends lW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const __=aW(()=>new lW);aW(()=>new Eve);const I6=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],A6=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function O6(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function Sve(e){if(!e)throw new Error("No seed provided");const r=__(e),t=A6[r[0]%A6.length],n=I6[r[1]%I6.length];return`${O6(t)} ${O6(n)}`}let $f;const kve=()=>$f||($f=Fe.db.addDynamicView("latest_by_follows",{persist:!0}),$f.applyFind({kind:1}),$f.applySimpleSort("created_at",{desc:!0}),$f.applyWhere(e=>ut.getFollowDistance(e.pubkey)<=1),$f);let xd;const Tve=()=>xd||(xd=Fe.db.addDynamicView("latest_by_everyone",{persist:!0}),xd.applyFind({kind:1}),xd.applySimpleSort("created_at",{desc:!0}),xd),Lw={loaded:!1,saveEvents:Cn.throttle(()=>{const e=kve().data().slice(0,50),r=Tve().data().slice(0,50),t=Fe.notifications.eventIds.map(s=>Fe.db.by("id",s)).slice(0,50);let n=[];for(const s of Fe.directMessagesByUser.values())s.eventIds.forEach(o=>{n.push(Fe.db.by("id",o))});n=n.slice(0,100);const i=Array.from(Fe.keyValueEvents.values()).slice(0,50);dn.setItem("latestMsgs",e),dn.setItem("latestMsgsByEveryone",r),dn.setItem("notificationEvents",t),dn.setItem("dms",n),dn.setItem("keyValueEvents",i),console.log("saved latestMsgs",e.length),console.log("saved latestMsgsByEveryone",r.length)},5e3),saveProfilesAndFollows:Cn.debounce(()=>{const e=ye.getPubKey(),r=[Fe.db.find({kind:0,pubkey:e}),...Fe.db.find({kind:0})],t=Fe.db.find({kind:3}).filter(s=>s.pubkey===e||ut.isFollowing(e,s.pubkey)),n=[Fe.db.findOne({kind:3,pubkey:e})];let i=0;for(const s of t.map(o=>[JSON.stringify(o).length,o]).sort((o,a)=>o[0]-a[0]))i+s[0]<5e5&&(i+=s[0],n.push(s[1]));dn.setItem("profileEvents",r.slice(0,50)),dn.setItem("followEvents",n.slice(0,50))},5e3),loadEvents:async function(){const e=await dn.getItem("latestMsgs"),r=await dn.getItem("latestMsgsByEveryone"),t=await dn.getItem("followEvents"),n=await dn.getItem("profileEvents"),i=await dn.getItem("notificationEvents"),s=await dn.getItem("dms"),o=await dn.getItem("keyValueEvents");this.loaded=!0,Array.isArray(t)&&t.forEach(a=>Fe.handle(a)),Array.isArray(n)&&n.forEach(a=>Fe.handle(a)),Array.isArray(e)&&e.forEach(a=>{Fe.handle(a)}),Array.isArray(r)&&r.forEach(a=>{Fe.handle(a)}),Array.isArray(i)&&i.forEach(a=>{Fe.handle(a)}),Array.isArray(s)&&s.forEach(a=>{Fe.handle(a)}),Array.isArray(o)&&o.forEach(a=>{Fe.handle(a)})}};var tI={exports:{}};(function(e,r){const{hasOwnProperty:t}=Object.prototype,n=T();n.configure=T,n.stringify=n,n.default=n,r.stringify=n,r.configure=T,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(x){return x.length<5e3&&!i.test(x)?`"${x}"`:JSON.stringify(x)}function o(x){if(x.length>200)return x.sort();for(let A=1;A<x.length;A++){const _=x[A];let I=A;for(;I!==0&&x[I-1]>_;)x[I]=x[I-1],I--;x[I]=_}return x}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(x){return a.call(x)!==void 0&&x.length!==0}function u(x,A,_){x.length<_&&(_=x.length);const I=A===","?"":" ";let O=`"0":${I}${x[0]}`;for(let C=1;C<_;C++)O+=`${A}"${C}":${I}${x[C]}`;return O}function h(x){if(t.call(x,"circularValue")){const A=x.circularValue;if(typeof A=="string")return`"${A}"`;if(A==null)return A;if(A===Error||A===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function c(x,A){let _;if(t.call(x,A)&&(_=x[A],typeof _!="boolean"))throw new TypeError(`The "${A}" argument must be of type boolean`);return _===void 0?!0:_}function d(x,A){let _;if(t.call(x,A)){if(_=x[A],typeof _!="number")throw new TypeError(`The "${A}" argument must be of type number`);if(!Number.isInteger(_))throw new TypeError(`The "${A}" argument must be an integer`);if(_<1)throw new RangeError(`The "${A}" argument must be >= 1`)}return _===void 0?1/0:_}function y(x){return x===1?"1 item":`${x} items`}function w(x){const A=new Set;for(const _ of x)(typeof _=="string"||typeof _=="number")&&A.add(String(_));return A}function b(x){if(t.call(x,"strict")){const A=x.strict;if(typeof A!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(A)return _=>{let I=`Object can not safely be stringified. Received type ${typeof _}`;throw typeof _!="function"&&(I+=` (${_.toString()})`),new Error(I)}}}function T(x){x={...x};const A=b(x);A&&(x.bigint===void 0&&(x.bigint=!1),"circularValue"in x||(x.circularValue=Error));const _=h(x),I=c(x,"bigint"),O=c(x,"deterministic"),C=d(x,"maximumDepth"),g=d(x,"maximumBreadth");function R(te,J,j,Z,se,Ee){let me=J[te];switch(typeof me=="object"&&me!==null&&typeof me.toJSON=="function"&&(me=me.toJSON(te)),me=Z.call(J,te,me),typeof me){case"string":return s(me);case"object":{if(me===null)return"null";if(j.indexOf(me)!==-1)return _;let Pe="",Ue=",";const Ge=Ee;if(Array.isArray(me)){if(me.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(me),se!==""&&(Ee+=se,Pe+=`
${Ee}`,Ue=`,
${Ee}`);const $=Math.min(me.length,g);let S=0;for(;S<$-1;S++){const F=R(String(S),me,j,Z,se,Ee);Pe+=F!==void 0?F:"null",Pe+=Ue}const N=R(String(S),me,j,Z,se,Ee);if(Pe+=N!==void 0?N:"null",me.length-1>g){const F=me.length-g-1;Pe+=`${Ue}"... ${y(F)} not stringified"`}return se!==""&&(Pe+=`
${Ge}`),j.pop(),`[${Pe}]`}let it=Object.keys(me);const _e=it.length;if(_e===0)return"{}";if(C<j.length+1)return'"[Object]"';let pe="",Te="";se!==""&&(Ee+=se,Ue=`,
${Ee}`,pe=" ");const je=Math.min(_e,g);O&&!l(me)&&(it=o(it)),j.push(me);for(let $=0;$<je;$++){const S=it[$],N=R(S,me,j,Z,se,Ee);N!==void 0&&(Pe+=`${Te}${s(S)}:${pe}${N}`,Te=Ue)}if(_e>g){const $=_e-g;Pe+=`${Te}"...":${pe}"${y($)} not stringified"`,Te=Ue}return se!==""&&Te.length>1&&(Pe=`
${Ee}${Pe}
${Ge}`),j.pop(),`{${Pe}}`}case"number":return isFinite(me)?String(me):A?A(me):"null";case"boolean":return me===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(me);default:return A?A(me):void 0}}function M(te,J,j,Z,se,Ee){switch(typeof J=="object"&&J!==null&&typeof J.toJSON=="function"&&(J=J.toJSON(te)),typeof J){case"string":return s(J);case"object":{if(J===null)return"null";if(j.indexOf(J)!==-1)return _;const me=Ee;let Pe="",Ue=",";if(Array.isArray(J)){if(J.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(J),se!==""&&(Ee+=se,Pe+=`
${Ee}`,Ue=`,
${Ee}`);const _e=Math.min(J.length,g);let pe=0;for(;pe<_e-1;pe++){const je=M(String(pe),J[pe],j,Z,se,Ee);Pe+=je!==void 0?je:"null",Pe+=Ue}const Te=M(String(pe),J[pe],j,Z,se,Ee);if(Pe+=Te!==void 0?Te:"null",J.length-1>g){const je=J.length-g-1;Pe+=`${Ue}"... ${y(je)} not stringified"`}return se!==""&&(Pe+=`
${me}`),j.pop(),`[${Pe}]`}j.push(J);let Ge="";se!==""&&(Ee+=se,Ue=`,
${Ee}`,Ge=" ");let it="";for(const _e of Z){const pe=M(_e,J[_e],j,Z,se,Ee);pe!==void 0&&(Pe+=`${it}${s(_e)}:${Ge}${pe}`,it=Ue)}return se!==""&&it.length>1&&(Pe=`
${Ee}${Pe}
${me}`),j.pop(),`{${Pe}}`}case"number":return isFinite(J)?String(J):A?A(J):"null";case"boolean":return J===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(J);default:return A?A(J):void 0}}function L(te,J,j,Z,se){switch(typeof J){case"string":return s(J);case"object":{if(J===null)return"null";if(typeof J.toJSON=="function"){if(J=J.toJSON(te),typeof J!="object")return L(te,J,j,Z,se);if(J===null)return"null"}if(j.indexOf(J)!==-1)return _;const Ee=se;if(Array.isArray(J)){if(J.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(J),se+=Z;let pe=`
${se}`;const Te=`,
${se}`,je=Math.min(J.length,g);let $=0;for(;$<je-1;$++){const N=L(String($),J[$],j,Z,se);pe+=N!==void 0?N:"null",pe+=Te}const S=L(String($),J[$],j,Z,se);if(pe+=S!==void 0?S:"null",J.length-1>g){const N=J.length-g-1;pe+=`${Te}"... ${y(N)} not stringified"`}return pe+=`
${Ee}`,j.pop(),`[${pe}]`}let me=Object.keys(J);const Pe=me.length;if(Pe===0)return"{}";if(C<j.length+1)return'"[Object]"';se+=Z;const Ue=`,
${se}`;let Ge="",it="",_e=Math.min(Pe,g);l(J)&&(Ge+=u(J,Ue,g),me=me.slice(J.length),_e-=J.length,it=Ue),O&&(me=o(me)),j.push(J);for(let pe=0;pe<_e;pe++){const Te=me[pe],je=L(Te,J[Te],j,Z,se);je!==void 0&&(Ge+=`${it}${s(Te)}: ${je}`,it=Ue)}if(Pe>g){const pe=Pe-g;Ge+=`${it}"...": "${y(pe)} not stringified"`,it=Ue}return it!==""&&(Ge=`
${se}${Ge}
${Ee}`),j.pop(),`{${Ge}}`}case"number":return isFinite(J)?String(J):A?A(J):"null";case"boolean":return J===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(J);default:return A?A(J):void 0}}function W(te,J,j){switch(typeof J){case"string":return s(J);case"object":{if(J===null)return"null";if(typeof J.toJSON=="function"){if(J=J.toJSON(te),typeof J!="object")return W(te,J,j);if(J===null)return"null"}if(j.indexOf(J)!==-1)return _;let Z="";if(Array.isArray(J)){if(J.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(J);const Ue=Math.min(J.length,g);let Ge=0;for(;Ge<Ue-1;Ge++){const _e=W(String(Ge),J[Ge],j);Z+=_e!==void 0?_e:"null",Z+=","}const it=W(String(Ge),J[Ge],j);if(Z+=it!==void 0?it:"null",J.length-1>g){const _e=J.length-g-1;Z+=`,"... ${y(_e)} not stringified"`}return j.pop(),`[${Z}]`}let se=Object.keys(J);const Ee=se.length;if(Ee===0)return"{}";if(C<j.length+1)return'"[Object]"';let me="",Pe=Math.min(Ee,g);l(J)&&(Z+=u(J,",",g),se=se.slice(J.length),Pe-=J.length,me=","),O&&(se=o(se)),j.push(J);for(let Ue=0;Ue<Pe;Ue++){const Ge=se[Ue],it=W(Ge,J[Ge],j);it!==void 0&&(Z+=`${me}${s(Ge)}:${it}`,me=",")}if(Ee>g){const Ue=Ee-g;Z+=`${me}"...":"${y(Ue)} not stringified"`}return j.pop(),`{${Z}}`}case"number":return isFinite(J)?String(J):A?A(J):"null";case"boolean":return J===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(J);default:return A?A(J):void 0}}function X(te,J,j){if(arguments.length>1){let Z="";if(typeof j=="number"?Z=" ".repeat(Math.min(j,10)):typeof j=="string"&&(Z=j.slice(0,10)),J!=null){if(typeof J=="function")return R("",{"":te},[],J,Z,"");if(Array.isArray(J))return M("",te,[],w(J),Z,"")}if(Z.length!==0)return L("",te,[],Z,"")}return W("",te,[])}return X}})(tI,tI.exports);var Ive=tI.exports;const uW=no(Ive);uW.configure;const Ave=uW;function rI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ove(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function cW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Cve(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rI(e.outputLen),rI(e.blockLen)}function Pve(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Nve(e,r){cW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Uf={number:rI,bool:Ove,bytes:cW,hash:Cve,exists:Pve,output:Nve},$E=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _E=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ya=(e,r)=>e<<32-r|e>>>r,Rve=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Rve)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Dve(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function J3(e){if(typeof e=="string"&&(e=Dve(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Bve(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let fW=class{clone(){return this._cloneInto()}};function hW(e){const r=n=>e().update(J3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function dW(e=32){if($E&&typeof $E.getRandomValues=="function")return $E.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Mve(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let Lve=class extends fW{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=_E(this.buffer)}update(r){Uf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=J3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=_E(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Uf.exists(this),Uf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Mve(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=_E(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Fve=(e,r,t)=>e&r^~e&t,jve=(e,r,t)=>e&r^e&t^r&t,zve=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ju=new Uint32Array(64);let pW=class extends Lve{constructor(){super(64,32,8,!1),this.A=Xu[0]|0,this.B=Xu[1]|0,this.C=Xu[2]|0,this.D=Xu[3]|0,this.E=Xu[4]|0,this.F=Xu[5]|0,this.G=Xu[6]|0,this.H=Xu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Ju[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Ju[c-15],y=Ju[c-2],w=Ya(d,7)^Ya(d,18)^d>>>3,b=Ya(y,17)^Ya(y,19)^y>>>10;Ju[c]=b+Ju[c-7]+w+Ju[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const d=Ya(a,6)^Ya(a,11)^Ya(a,25),y=h+d+Fve(a,l,u)+zve[c]+Ju[c]|0,b=(Ya(n,2)^Ya(n,13)^Ya(n,22))+jve(n,i,s)|0;h=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){Ju.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Hve=class extends pW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Fw=hW(()=>new pW);hW(()=>new Hve);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vW=BigInt(0),x_=BigInt(1),Uve=BigInt(2),E_=e=>e instanceof Uint8Array,Wve=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Rp(e){if(!E_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Wve[e[t]];return r}function gW(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function Q3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Dp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");r[t]=s}return r}function ls(e){return Q3(Rp(e))}function eP(e){if(!E_(e))throw new Error("Uint8Array expected");return Q3(Rp(Uint8Array.from(e).reverse()))}const _c=(e,r)=>Dp(e.toString(16).padStart(r*2,"0")),yW=(e,r)=>_c(e,r).reverse(),Kve=e=>Dp(gW(e));function Ii(e,r,t){let n;if(typeof r=="string")try{n=Dp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(E_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Zs(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!E_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function qve(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function S_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Vve(e){let r;for(r=0;e>vW;e>>=x_,r+=1);return r}const Gve=(e,r)=>e>>BigInt(r)&x_,Yve=(e,r,t)=>e|(t?x_:vW)<<BigInt(r),tP=e=>(Uve<<BigInt(e-1))-x_,xE=e=>new Uint8Array(e),C6=e=>Uint8Array.from(e);function mW(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=xE(e),i=xE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=xE())=>{i=a(C6([0]),c),n=a(),c.length!==0&&(i=a(C6([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Zs(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const Zve={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function lv(e,r,t={}){const n=(i,s,o)=>{const a=Zve[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Xve=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Gve,bitLen:Vve,bitMask:tP,bitSet:Yve,bytesToHex:Rp,bytesToNumberBE:ls,bytesToNumberLE:eP,concatBytes:Zs,createHmacDrbg:mW,ensureBytes:Ii,equalBytes:qve,hexToBytes:Dp,hexToNumber:Q3,numberToBytesBE:_c,numberToBytesLE:yW,numberToHexUnpadded:gW,numberToVarBytesBE:Kve,utf8ToBytes:S_,validateObject:lv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gi=BigInt(0),On=BigInt(1),Pf=BigInt(2),Jve=BigInt(3),nI=BigInt(4),P6=BigInt(5),N6=BigInt(8);BigInt(9);BigInt(16);function ti(e,r){const t=e%r;return t>=gi?t:r+t}function Qve(e,r,t){if(t<=gi||r<gi)throw new Error("Expected power/modulo > 0");if(t===On)return gi;let n=On;for(;r>gi;)r&On&&(n=n*e%t),e=e*e%t,r>>=On;return n}function Io(e,r,t){let n=e;for(;r-- >gi;)n*=n,n%=t;return n}function iI(e,r){if(e===gi||r<=gi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ti(e,r),n=r,i=gi,s=On;for(;t!==gi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==On)throw new Error("invert: does not exist");return ti(i,r)}function ege(e){const r=(e-On)/Pf;let t,n,i;for(t=e-On,n=0;t%Pf===gi;t/=Pf,n++);for(i=Pf;i<e&&Qve(i,r,e)!==e-On;i++);if(n===1){const o=(e+On)/nI;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+On)/Pf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(h,On<<BigInt(u-y-1));h=a.sqr(w),c=a.mul(c,w),d=a.mul(d,h),u=y}return c}}function tge(e){if(e%nI===Jve){const r=(e+On)/nI;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%N6===P6){const r=(e-P6)/N6;return function(n,i){const s=n.mul(i,Pf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Pf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return ege(e)}const rge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bW(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=rge.reduce((n,i)=>(n[i]="function",n),r);return lv(e,t)}function nge(e,r,t){if(t<gi)throw new Error("Expected power > 0");if(t===gi)return e.ONE;if(t===On)return r;let n=e.ONE,i=r;for(;t>gi;)t&On&&(n=e.mul(n,i)),i=e.sqr(i),t>>=On;return n}function ige(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function rP(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function sge(e,r,t=!1,n={}){if(e<=gi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=rP(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=tge(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:tP(i),ZERO:gi,ONE:On,create:l=>ti(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return gi<=l&&l<e},is0:l=>l===gi,isOdd:l=>(l&On)===On,neg:l=>ti(-l,e),eql:(l,u)=>l===u,sqr:l=>ti(l*l,e),add:(l,u)=>ti(l+u,e),sub:(l,u)=>ti(l-u,e),mul:(l,u)=>ti(l*u,e),pow:(l,u)=>nge(a,l,u),div:(l,u)=>ti(l*iI(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>iI(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>ige(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?yW(l,s):_c(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?eP(l):ls(l)}});return Object.freeze(a)}function oge(e,r,t=!1){e=Ii("privateHash",e);const n=e.length,i=rP(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?eP(e):ls(e);return ti(s,r-On)+On}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const age=BigInt(0),EE=BigInt(1);function lge(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>age;)s&EE&&(o=o.add(a)),a=a.double(),s>>=EE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,h=u;for(let c=0;c<o;c++){h=u,l.push(h);for(let d=1;d<a;d++)h=h.add(u),l.push(h);u=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,h=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=EE);const x=b,A=b+Math.abs(T)-1,_=w%2!==0,I=T<0;T===0?h=h.add(t(_,s[x])):u=u.add(t(I,s[A]))}return{p:u,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function wW(e){return bW(e.Fp),lv(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rP(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uge(e){const r=wW(e);lv(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:cge,hexToBytes:fge}=Xve,Wf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Wf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:cge(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Wf,t=typeof e=="string"?fge(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Wf._parseInt(t.subarray(2)),{d:o,l:a}=Wf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},da=BigInt(0),Mn=BigInt(1),Ll=BigInt(2),jw=BigInt(3),R6=BigInt(4);function hge(e){const r=uge(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const x=b.toAffine();return Zs(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),x=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:x}});function s(w){const{a:b,b:T}=r,x=t.sqr(w),A=t.mul(x,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&da<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:x,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Rp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let _;try{_=typeof w=="bigint"?w:ls(Ii("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return x&&(_=ti(_,A)),a(_),_}const u=new Map;function h(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,x){if(this.px=b,this.py=T,this.pz=x,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(b){const{x:T,y:x}=b||{};if(!b||!t.isValid(T)||!t.isValid(x))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=_=>t.eql(_,t.ZERO);return A(T)&&A(x)?c.ZERO:new c(T,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(x=>x.pz));return b.map((x,A)=>x.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ii("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const x=t.sqr(T),A=s(b);if(!t.eql(x,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:T,py:x,pz:A}=this,{px:_,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(_,A)),g=t.eql(t.mul(x,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,x=t.mul(T,jw),{px:A,py:_,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,R=t.mul(A,A),M=t.mul(_,_),L=t.mul(I,I),W=t.mul(A,_);return W=t.add(W,W),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(x,L),C=t.add(O,C),O=t.sub(M,C),C=t.add(M,C),C=t.mul(O,C),O=t.mul(W,O),g=t.mul(x,g),L=t.mul(b,L),W=t.sub(R,L),W=t.mul(b,W),W=t.add(W,g),g=t.add(R,R),R=t.add(g,R),R=t.add(R,L),R=t.mul(R,W),C=t.add(C,R),L=t.mul(_,I),L=t.add(L,L),R=t.mul(L,W),O=t.sub(O,R),g=t.mul(L,M),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){h(b);const{px:T,py:x,pz:A}=this,{px:_,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,R=t.ZERO;const M=r.a,L=t.mul(r.b,jw);let W=t.mul(T,_),X=t.mul(x,I),te=t.mul(A,O),J=t.add(T,x),j=t.add(_,I);J=t.mul(J,j),j=t.add(W,X),J=t.sub(J,j),j=t.add(T,A);let Z=t.add(_,O);return j=t.mul(j,Z),Z=t.add(W,te),j=t.sub(j,Z),Z=t.add(x,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(X,te),Z=t.sub(Z,C),R=t.mul(M,j),C=t.mul(L,te),R=t.add(C,R),C=t.sub(X,R),R=t.add(X,R),g=t.mul(C,R),X=t.add(W,W),X=t.add(X,W),te=t.mul(M,te),j=t.mul(L,j),X=t.add(X,te),te=t.sub(W,te),te=t.mul(M,te),j=t.add(j,te),W=t.mul(X,j),g=t.add(g,W),W=t.mul(Z,j),C=t.mul(J,C),C=t.sub(C,W),W=t.mul(J,X),R=t.mul(Z,R),R=t.add(R,W),new c(C,g,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const x=t.invertBatch(T.map(A=>A.pz));return T.map((A,_)=>A.toAffine(x[_])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===da)return T;if(a(b),b===Mn)return this;const{endo:x}=r;if(!x)return y.unsafeLadder(this,b);let{k1neg:A,k1:_,k2neg:I,k2:O}=x.splitScalar(b),C=T,g=T,R=this;for(;_>da||O>da;)_&Mn&&(C=C.add(R)),O&Mn&&(g=g.add(R)),R=R.double(),_>>=Mn,O>>=Mn;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,x.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,x,A;const{endo:_}=r;if(_){const{k1neg:I,k1:O,k2neg:C,k2:g}=_.splitScalar(T);let{p:R,f:M}=this.wNAF(O),{p:L,f:W}=this.wNAF(g);R=y.constTimeNegate(I,R),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,_.beta),L.py,L.pz),x=R.add(L),A=M.add(W)}else{const{p:I,f:O}=this.wNAF(T);x=I,A=O}return c.normalizeZ([x,A])[0]}multiplyAndAddUnsafe(b,T,x){const A=c.BASE,_=(O,C)=>C===da||C===Mn||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=_(this,T).add(_(b,x));return I.is0()?void 0:I}toAffine(b){const{px:T,py:x,pz:A}=this,_=this.is0();b==null&&(b=_?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(x,b),C=t.mul(A,b);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Mn)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Mn?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Rp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=lge(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function dge(e){const r=wW(e);return lv(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function pge(e){const r=dge(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return da<j&&j<t.ORDER}function a(j){return ti(j,n)}function l(j){return iI(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:c,isWithinCurveOrder:d}=hge({...r,toBytes(j,Z,se){const Ee=Z.toAffine(),me=t.toBytes(Ee.x),Pe=Zs;return se?Pe(Uint8Array.from([Z.hasEvenY()?2:3]),me):Pe(Uint8Array.from([4]),me,t.toBytes(Ee.y))},fromBytes(j){const Z=j.length,se=j[0],Ee=j.subarray(1);if(Z===i&&(se===2||se===3)){const me=ls(Ee);if(!o(me))throw new Error("Point is not on curve");const Pe=c(me);let Ue=t.sqrt(Pe);const Ge=(Ue&Mn)===Mn;return(se&1)===1!==Ge&&(Ue=t.neg(Ue)),{x:me,y:Ue}}else if(Z===s&&se===4){const me=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:me,y:Pe}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>Rp(_c(j,r.nByteLength));function w(j){const Z=n>>Mn;return j>Z}function b(j){return w(j)?a(-j):j}const T=(j,Z,se)=>ls(j.slice(Z,se));class x{constructor(Z,se,Ee){this.r=Z,this.s=se,this.recovery=Ee,this.assertValidity()}static fromCompact(Z){const se=r.nByteLength;return Z=Ii("compactSignature",Z,se*2),new x(T(Z,0,se),T(Z,se,2*se))}static fromDER(Z){const{r:se,s:Ee}=Wf.toSig(Ii("DER",Z));return new x(se,Ee)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new x(this.r,this.s,Z)}recoverPublicKey(Z){const{r:se,s:Ee,recovery:me}=this,Pe=g(Ii("msgHash",Z));if(me==null||![0,1,2,3].includes(me))throw new Error("recovery id invalid");const Ue=me===2||me===3?se+r.n:se;if(Ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=me&1?"03":"02",it=u.fromHex(Ge+y(Ue)),_e=l(Ue),pe=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,pe,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Dp(this.toDERHex())}toDERHex(){return Wf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return h(j),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),Z=oge(j,n);return _c(Z,r.nByteLength)},precompute(j=8,Z=u.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function _(j,Z=!0){return u.fromPrivateKey(j).toRawBytes(Z)}function I(j){const Z=j instanceof Uint8Array,se=typeof j=="string",Ee=(Z||se)&&j.length;return Z?Ee===i||Ee===s:se?Ee===2*i||Ee===2*s:j instanceof u}function O(j,Z,se=!0){if(I(j))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(h(j)).toRawBytes(se)}const C=r.bits2int||function(j){const Z=ls(j),se=j.length*8-r.nBitLength;return se>0?Z>>BigInt(se):Z},g=r.bits2int_modN||function(j){return a(C(j))},R=tP(r.nBitLength);function M(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(da<=j&&j<R))throw new Error(`bigint expected < 2^${r.nBitLength}`);return _c(j,r.nByteLength)}function L(j,Z,se=W){if(["recovered","canonical"].some(S=>S in se))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:me}=r;let{lowS:Pe,prehash:Ue,extraEntropy:Ge}=se;Pe==null&&(Pe=!0),j=Ii("msgHash",j),Ue&&(j=Ii("prehashed msgHash",Ee(j)));const it=g(j),_e=h(Z),pe=[M(_e),M(it)];if(Ge!=null){const S=Ge===!0?me(t.BYTES):Ge;pe.push(Ii("extraEntropy",S,t.BYTES))}const Te=Zs(...pe),je=it;function $(S){const N=C(S);if(!d(N))return;const F=l(N),z=u.BASE.multiply(N).toAffine(),V=a(z.x);if(V===da)return;const ae=a(F*a(je+V*_e));if(ae===da)return;let ve=(z.x===V?0:2)|Number(z.y&Mn),He=ae;return Pe&&w(ae)&&(He=b(ae),ve^=1),new x(V,He,ve)}return{seed:Te,k2sig:$}}const W={lowS:r.lowS,prehash:!1},X={lowS:r.lowS,prehash:!1};function te(j,Z,se=W){const{seed:Ee,k2sig:me}=L(j,Z,se);return mW(r.hash.outputLen,r.nByteLength,r.hmac)(Ee,me)}u.BASE._setWindowSize(8);function J(j,Z,se,Ee=X){var z;const me=j;if(Z=Ii("msgHash",Z),se=Ii("publicKey",se),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:Ue}=Ee;let Ge,it;try{if(typeof me=="string"||me instanceof Uint8Array)try{Ge=x.fromDER(me)}catch(V){if(!(V instanceof Wf.Err))throw V;Ge=x.fromCompact(me)}else if(typeof me=="object"&&typeof me.r=="bigint"&&typeof me.s=="bigint"){const{r:V,s:ae}=me;Ge=new x(V,ae)}else throw new Error("PARSE");it=u.fromHex(se)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ge.hasHighS())return!1;Ue&&(Z=r.hash(Z));const{r:_e,s:pe}=Ge,Te=g(Z),je=l(pe),$=a(Te*je),S=a(_e*je),N=(z=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:z.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:_,getSharedSecret:O,sign:te,verify:J,ProjectivePoint:u,Signature:x,utils:A}}function vge(e,r){const t=e.ORDER;let n=da;for(let d=t-Mn;d%Ll===da;d/=Ll)n+=Mn;const i=n,s=(t-Mn)/Ll**i,o=(s-Mn)/Ll,a=Ll**i-Mn,l=Ll**(i-Mn),u=e.pow(r,s),h=e.pow(r,(s+Mn)/Ll);let c=(d,y)=>{let w=u,b=e.pow(y,a),T=e.sqr(b);T=e.mul(T,y);let x=e.mul(d,T);x=e.pow(x,o),x=e.mul(x,b),b=e.mul(x,y),T=e.mul(x,d);let A=e.mul(T,b);x=e.pow(A,l);let _=e.eql(x,e.ONE);b=e.mul(T,h),x=e.mul(A,w),T=e.cmov(b,T,_),A=e.cmov(x,A,_);for(let I=i;I>Mn;I--){let O=Ll**(I-Ll),C=e.pow(A,O);const g=e.eql(C,e.ONE);b=e.mul(T,w),w=e.mul(w,w),C=e.mul(A,w),T=e.cmov(b,T,g),A=e.cmov(C,A,g)}return{isValid:_,value:T}};if(e.ORDER%R6===jw){const d=(e.ORDER-jw)/R6,y=e.sqrt(e.neg(r));c=(w,b)=>{let T=e.sqr(b);const x=e.mul(w,b);T=e.mul(T,x);let A=e.pow(T,d);A=e.mul(A,x);const _=e.mul(A,y),I=e.mul(e.sqr(A),b),O=e.eql(I,w);let C=e.cmov(_,A,O);return{isValid:O,value:C}}}return c}function gge(e,r){if(bW(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=vge(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,h,c;i=e.sqr(n),i=e.mul(i,r.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,r.B),a=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,r.A),s=e.sqr(o),u=e.sqr(a),l=e.mul(u,r.A),s=e.add(s,l),s=e.mul(s,o),u=e.mul(u,a),l=e.mul(u,r.B),s=e.add(s,l),h=e.mul(i,o);const{isValid:d,value:y}=t(s,u);c=e.mul(i,n),c=e.mul(c,y),h=e.cmov(h,o,d),c=e.cmov(c,y,d);const w=e.isOdd(n)===e.isOdd(c);return c=e.cmov(e.neg(c),c,w),h=e.div(h,a),{x:h,y:c}}}function yge(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return S_(e);throw new Error("DST must be Uint8Array or string")}const mge=ls;function cc(e,r){if(e<0||e>=1<<8*r)throw new Error(`bad I2OSP call: value=${e} length=${r}`);const t=Array.from({length:r}).fill(0);for(let n=r-1;n>=0;n--)t[n]=e&255,e>>>=8;return new Uint8Array(t)}function bge(e,r){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function Py(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function nP(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function wge(e,r,t,n){Py(e),Py(r),nP(t),r.length>255&&(r=n(Zs(S_("H2C-OVERSIZE-DST-"),r)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(t/i);if(o>255)throw new Error("Invalid xmd length");const a=Zs(r,cc(r.length,1)),l=cc(0,s),u=cc(t,2),h=new Array(o),c=n(Zs(l,e,u,cc(0,1),a));h[0]=n(Zs(c,cc(1,1),a));for(let y=1;y<=o;y++){const w=[bge(c,h[y-1]),cc(y+1,1),a];h[y]=n(Zs(...w))}return Zs(...h).slice(0,t)}function $ge(e,r,t,n,i){if(Py(e),Py(r),nP(t),r.length>255){const s=Math.ceil(2*n/8);r=i.create({dkLen:s}).update(S_("H2C-OVERSIZE-DST-")).update(r).digest()}if(t>65535||r.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(e).update(cc(t,2)).update(r).update(cc(r.length,1)).digest()}function D6(e,r,t){lv(t,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:l}=t;Py(e),nP(r);const u=yge(l),h=n.toString(2).length,c=Math.ceil((h+i)/8),d=r*s*c;let y;if(a==="xmd")y=wge(e,u,d,o);else if(a==="xof")y=$ge(e,u,d,i,o);else if(a==="_internal_pass")y=e;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(r);for(let b=0;b<r;b++){const T=new Array(s);for(let x=0;x<s;x++){const A=c*(x+b*s),_=y.subarray(A,A+c);T[x]=ti(mge(_),n)}w[b]=T}return w}function _ge(e,r){const t=r.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,l]=t.map(u=>u.reduce((h,c)=>e.add(e.mul(h,n),c)));return n=e.div(s,o),i=e.mul(i,e.div(a,l)),{x:n,y:i}}}function xge(e,r,t){if(typeof r!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=D6(n,2,{...t,DST:t.DST,...i}),o=e.fromAffine(r(s[0])),a=e.fromAffine(r(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=D6(n,1,{...t,DST:t.encodeDST,...i}),o=e.fromAffine(r(s[0])).clearCofactor();return o.assertValidity(),o}}}let $W=class extends fW{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Uf.hash(r);const n=J3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Uf.exists(this),this.iHash.update(r),this}digestInto(r){Uf.exists(this),Uf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const _W=(e,r,t)=>new $W(e,r).update(t).digest();_W.create=(e,r)=>new $W(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ege(e){return{hash:e,hmac:(r,...t)=>_W(e,r,Bve(...t)),randomBytes:dW}}function Sge(e,r){const t=n=>pge({...e,...Ege(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xW=BigInt(1),Hw=BigInt(2),B6=(e,r)=>(e+r/Hw)/r;function EW(e){const r=k_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,h=u*u*e%r,c=Io(h,t,r)*h%r,d=Io(c,t,r)*h%r,y=Io(d,Hw,r)*u%r,w=Io(y,i,r)*y%r,b=Io(w,s,r)*w%r,T=Io(b,a,r)*b%r,x=Io(T,l,r)*T%r,A=Io(x,a,r)*b%r,_=Io(A,t,r)*h%r,I=Io(_,o,r)*w%r,O=Io(I,n,r)*u%r,C=Io(O,Hw,r);if(!Cc.eql(Cc.sqr(C),e))throw new Error("Cannot find square root");return C}const Cc=sge(k_,void 0,void 0,{sqrt:EW}),rs=Sge({a:BigInt(0),b:BigInt(7),Fp:Cc,n:zw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=zw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-xW*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=B6(s*e,r),l=B6(-n*e,r);let u=ti(e-a*t-l*i,r),h=ti(-a*n-l*s,r);const c=u>o,d=h>o;if(c&&(u=r-u),d&&(h=r-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:h}}}},Fw),T_=BigInt(0),SW=e=>typeof e=="bigint"&&T_<e&&e<k_,kge=e=>typeof e=="bigint"&&T_<e&&e<zw,M6={};function Uw(e,...r){let t=M6[e];if(t===void 0){const n=Fw(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Zs(n,n),M6[e]=t}return Fw(Zs(t,...r))}const iP=e=>e.toRawBytes(!0).slice(1),sI=e=>_c(e,32),SE=e=>ti(e,k_),Ny=e=>ti(e,zw),sP=rs.ProjectivePoint,Tge=(e,r,t)=>sP.BASE.multiplyAndAddUnsafe(e,r,t);function oI(e){let r=rs.utils.normPrivateKeyToScalar(e),t=sP.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ny(-r),bytes:iP(t)}}function kW(e){if(!SW(e))throw new Error("bad x: need 0 < x < p");const r=SE(e*e),t=SE(r*e+BigInt(7));let n=EW(t);n%Hw!==T_&&(n=SE(-n));const i=new sP(e,n,xW);return i.assertValidity(),i}function TW(...e){return Ny(ls(Uw("BIP0340/challenge",...e)))}function Ige(e){return oI(e).bytes}function Age(e,r,t=dW(32)){const n=Ii("message",e),{bytes:i,scalar:s}=oI(r),o=Ii("auxRand",t,32),a=sI(s^ls(Uw("BIP0340/aux",o))),l=Uw("BIP0340/nonce",a,i,n),u=Ny(ls(l));if(u===T_)throw new Error("sign failed: k is zero");const{bytes:h,scalar:c}=oI(u),d=TW(h,i,n),y=new Uint8Array(64);if(y.set(h,0),y.set(sI(Ny(c+d*s)),32),!IW(y,n,i))throw new Error("sign: Invalid signature produced");return y}function IW(e,r,t){const n=Ii("signature",e,64),i=Ii("message",r),s=Ii("publicKey",t,32);try{const o=kW(ls(s)),a=ls(n.subarray(0,32));if(!SW(a))return!1;const l=ls(n.subarray(32,64));if(!kge(l))return!1;const u=TW(sI(a),iP(o),i),h=Tge(o,l,Ny(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}const mm={getPublicKey:Ige,sign:Age,verify:IW,utils:{randomPrivateKey:rs.utils.randomPrivateKey,lift_x:kW,pointToBytes:iP,numberToBytesBE:_c,bytesToNumberBE:ls,taggedHash:Uw,mod:ti}},Oge=_ge(Cc,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(r=>BigInt(r)))),Cge=gge(Cc,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Cc.create(BigInt("-11"))});xge(rs.ProjectivePoint,e=>{const{x:r,y:t}=Cge(Cc.create(e[0]));return Oge(r,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Cc.ORDER,m:1,k:128,expand:"xmd",hash:Fw});const U1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Pge=Object.freeze(Object.defineProperty({__proto__:null,crypto:U1},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nge=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Rge=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),eh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),aa=(e,r)=>e<<32-r|e>>>r,AW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!AW)throw new Error("Non little-endian hardware is not supported");const Dge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Xs(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Dge[e[t]];return r}function Pc(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}const OW=async()=>{};async function Bge(e,r,t){let n=Date.now();for(let i=0;i<e;i++){t(i);const s=Date.now()-n;s>=0&&s<r||(await OW(),n+=s)}}function oP(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function bm(e){if(typeof e=="string"&&(e=oP(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Vd(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let aP=class{clone(){return this._cloneInto()}};const Mge=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function Lge(e,r){if(r!==void 0&&(typeof r!="object"||!Mge(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function I_(e){const r=n=>e().update(bm(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Fge(e){const r=(n,i)=>e(i).update(bm(n)).digest(),t=e({});return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=n=>e(n),r}function CW(e=32){if(U1&&typeof U1.getRandomValues=="function")return U1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const jge=Object.freeze(Object.defineProperty({__proto__:null,Hash:aP,asyncLoop:Bge,bytesToHex:Xs,checkOpts:Lge,concatBytes:Vd,createView:eh,hexToBytes:Pc,isLE:AW,nextTick:OW,randomBytes:CW,rotr:aa,toBytes:bm,u32:Rge,u8:Nge,utf8ToBytes:oP,wrapConstructor:I_,wrapConstructorWithOpts:Fge},Symbol.toStringTag,{value:"Module"}));function aI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function zge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function PW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Hge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");aI(e.outputLen),aI(e.blockLen)}function Uge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Wge(e,r){PW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Kf={number:aI,bool:zge,bytes:PW,hash:Hge,exists:Uge,output:Wge};function Kge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let NW=class extends aP{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=eh(this.buffer)}update(r){Kf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=bm(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=eh(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Kf.exists(this),Kf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Kge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=eh(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const qge=(e,r,t)=>e&r^~e&t,Vge=(e,r,t)=>e&r^e&t^r&t,Gge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ec=new Uint32Array(64);class RW extends NW{constructor(){super(64,32,8,!1),this.A=Qu[0]|0,this.B=Qu[1]|0,this.C=Qu[2]|0,this.D=Qu[3]|0,this.E=Qu[4]|0,this.F=Qu[5]|0,this.G=Qu[6]|0,this.H=Qu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)ec[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=ec[c-15],y=ec[c-2],w=aa(d,7)^aa(d,18)^d>>>3,b=aa(y,17)^aa(y,19)^y>>>10;ec[c]=b+ec[c-7]+w+ec[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let c=0;c<64;c++){const d=aa(a,6)^aa(a,11)^aa(a,25),y=h+d+qge(a,l,u)+Gge[c]+ec[c]|0,b=(aa(n,2)^aa(n,13)^aa(n,22))+Vge(n,i,s)|0;h=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,o,a,l,u,h)}roundClean(){ec.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Yge extends RW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const uv=I_(()=>new RW),Zge=I_(()=>new Yge),Xge=Object.freeze(Object.defineProperty({__proto__:null,sha224:Zge,sha256:uv},Symbol.toStringTag,{value:"Module"}));var lP={};Object.defineProperty(lP,"__esModule",{value:!0});var uP=lP.wordlist=void 0;uP=lP.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Js={},ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.output=ci.exists=ci.hash=Fd=ci.bytes=ci.bool=ci.number=void 0;function Ww(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ci.number=Ww;function DW(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ci.bool=DW;function cP(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}var Fd=ci.bytes=cP;function BW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ww(e.outputLen),Ww(e.blockLen)}ci.hash=BW;function MW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}ci.exists=MW;function LW(e,r){cP(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}ci.output=LW;const Jge={number:Ww,bool:DW,bytes:cP,hash:BW,exists:MW,output:LW};ci.default=Jge;var Bp={},FW={},wm={};const Qge=nv(Pge);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=Qge,t=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);e.u8=t;const n=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));e.u32=n;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);e.createView=i;const s=(I,O)=>I<<32-O|I>>>O;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(I,O)=>O.toString(16).padStart(2,"0"));function a(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let O="";for(let C=0;C<I.length;C++)O+=o[I[C]];return O}e.bytesToHex=a;function l(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const O=new Uint8Array(I.length/2);for(let C=0;C<O.length;C++){const g=C*2,R=I.slice(g,g+2),M=Number.parseInt(R,16);if(Number.isNaN(M)||M<0)throw new Error("Invalid byte sequence");O[C]=M}return O}e.hexToBytes=l;const u=async()=>{};e.nextTick=u;async function h(I,O,C){let g=Date.now();for(let R=0;R<I;R++){C(R);const M=Date.now()-g;M>=0&&M<O||(await(0,e.nextTick)(),g+=M)}}e.asyncLoop=h;function c(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}e.utf8ToBytes=c;function d(I){if(typeof I=="string"&&(I=c(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}e.toBytes=d;function y(...I){if(!I.every(g=>g instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const O=I.reduce((g,R)=>g+R.length,0),C=new Uint8Array(O);for(let g=0,R=0;g<I.length;g++){const M=I[g];C.set(M,R),R+=M.length}return C}e.concatBytes=y;class w{clone(){return this._cloneInto()}}e.Hash=w;const b=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function T(I,O){if(O!==void 0&&(typeof O!="object"||!b(O)))throw new TypeError("Options should be object or undefined");return Object.assign(I,O)}e.checkOpts=T;function x(I){const O=g=>I().update(d(g)).digest(),C=I();return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=()=>I(),O}e.wrapConstructor=x;function A(I){const O=(g,R)=>I(R).update(d(g)).digest(),C=I({});return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=g=>I(g),O}e.wrapConstructorWithOpts=A;function _(I=32){if(r.crypto&&typeof r.crypto.getRandomValues=="function")return r.crypto.getRandomValues(new Uint8Array(I));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=_})(wm);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const r=ci,t=wm;class n extends t.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,r.default.hash(o);const l=(0,t.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,h=new Uint8Array(u);h.set(l.length>u?o.create().update(l).digest():l);for(let c=0;c<h.length;c++)h[c]^=54;this.iHash.update(h),this.oHash=o.create();for(let c=0;c<h.length;c++)h[c]^=106;this.oHash.update(h),h.fill(0)}update(o){return r.default.exists(this),this.iHash.update(o),this}digestInto(o){r.default.exists(this),r.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:l,finished:u,destroyed:h,blockLen:c,outputLen:d}=this;return o=o,o.finished=u,o.destroyed=h,o.blockLen=c,o.outputLen=d,o.oHash=a._cloneInto(o.oHash),o.iHash=l._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new n(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new n(s,o)})(FW);Object.defineProperty(Bp,"__esModule",{value:!0});Bp.pbkdf2Async=Bp.pbkdf2=void 0;const Ib=ci,eye=FW,hp=wm;function jW(e,r,t,n){Ib.default.hash(e);const i=(0,hp.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Ib.default.number(s),Ib.default.number(o),Ib.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,hp.toBytes)(r),u=(0,hp.toBytes)(t),h=new Uint8Array(o),c=eye.hmac.create(e,l),d=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:h,PRF:c,PRFSalt:d}}function zW(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function tye(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=jW(e,r,t,n);let u;const h=new Uint8Array(4),c=(0,hp.createView)(h),d=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(h).digestInto(d),b.set(d.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(d).digestInto(d);for(let x=0;x<b.length;x++)b[x]^=d[x]}}return zW(a,l,o,u,d)}Bp.pbkdf2=tye;async function rye(e,r,t,n){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:l,PRFSalt:u}=jW(e,r,t,n);let h;const c=new Uint8Array(4),d=(0,hp.createView)(c),y=new Uint8Array(l.outputLen);for(let w=1,b=0;b<s;w++,b+=l.outputLen){const T=a.subarray(b,b+l.outputLen);d.setInt32(0,w,!1),(h=u._cloneInto(h)).update(c).digestInto(y),T.set(y.subarray(0,T.length)),await(0,hp.asyncLoop)(i-1,o,x=>{l._cloneInto(h).update(y).digestInto(y);for(let A=0;A<T.length;A++)T[A]^=y[A]})}return zW(l,u,a,h,y)}Bp.pbkdf2Async=rye;const nye=nv(Xge);var Mo={},A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.SHA2=void 0;const kE=ci,Eg=wm;function iye(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}class sye extends Eg.Hash{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=(0,Eg.createView)(this.buffer)}update(r){kE.default.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=(0,Eg.toBytes)(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=(0,Eg.createView)(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){kE.default.exists(this),kE.default.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;iye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=(0,Eg.createView)(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,h[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}}A_.SHA2=sye;var HW={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const r=BigInt(2**32-1),t=BigInt(32);function n(L,W=!1){return W?{h:Number(L&r),l:Number(L>>t&r)}:{h:Number(L>>t&r)|0,l:Number(L&r)|0}}e.fromBig=n;function i(L,W=!1){let X=new Uint32Array(L.length),te=new Uint32Array(L.length);for(let J=0;J<L.length;J++){const{h:j,l:Z}=n(L[J],W);[X[J],te[J]]=[j,Z]}return[X,te]}e.split=i;const s=(L,W)=>BigInt(L>>>0)<<t|BigInt(W>>>0);e.toBig=s;const o=(L,W,X)=>L>>>X,a=(L,W,X)=>L<<32-X|W>>>X,l=(L,W,X)=>L>>>X|W<<32-X,u=(L,W,X)=>L<<32-X|W>>>X,h=(L,W,X)=>L<<64-X|W>>>X-32,c=(L,W,X)=>L>>>X-32|W<<64-X,d=(L,W)=>W,y=(L,W)=>L,w=(L,W,X)=>L<<X|W>>>32-X,b=(L,W,X)=>W<<X|L>>>32-X,T=(L,W,X)=>W<<X-32|L>>>64-X,x=(L,W,X)=>L<<X-32|W>>>64-X;function A(L,W,X,te){const J=(W>>>0)+(te>>>0);return{h:L+X+(J/2**32|0)|0,l:J|0}}e.add=A;const _=(L,W,X)=>(L>>>0)+(W>>>0)+(X>>>0),I=(L,W,X,te)=>W+X+te+(L/2**32|0)|0,O=(L,W,X,te)=>(L>>>0)+(W>>>0)+(X>>>0)+(te>>>0),C=(L,W,X,te,J)=>W+X+te+J+(L/2**32|0)|0,g=(L,W,X,te,J)=>(L>>>0)+(W>>>0)+(X>>>0)+(te>>>0)+(J>>>0),R=(L,W,X,te,J,j)=>W+X+te+J+j+(L/2**32|0)|0,M={fromBig:n,split:i,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:l,rotrSL:u,rotrBH:h,rotrBL:c,rotr32H:d,rotr32L:y,rotlSH:w,rotlSL:b,rotlBH:T,rotlBL:x,add:A,add3L:_,add3H:I,add4L:O,add4H:C,add5H:R,add5L:g};e.default=M})(HW);Object.defineProperty(Mo,"__esModule",{value:!0});Mo.sha384=Mo.sha512_256=Mo.sha512_224=lI=Mo.sha512=Mo.SHA512=void 0;const oye=A_,sr=HW,O_=wm,[aye,lye]=sr.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),tc=new Uint32Array(80),rc=new Uint32Array(80);class $m extends oye.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,h,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,h,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let _=0;_<16;_++,t+=4)tc[_]=r.getUint32(t),rc[_]=r.getUint32(t+=4);for(let _=16;_<80;_++){const I=tc[_-15]|0,O=rc[_-15]|0,C=sr.default.rotrSH(I,O,1)^sr.default.rotrSH(I,O,8)^sr.default.shrSH(I,O,7),g=sr.default.rotrSL(I,O,1)^sr.default.rotrSL(I,O,8)^sr.default.shrSL(I,O,7),R=tc[_-2]|0,M=rc[_-2]|0,L=sr.default.rotrSH(R,M,19)^sr.default.rotrBH(R,M,61)^sr.default.shrSH(R,M,6),W=sr.default.rotrSL(R,M,19)^sr.default.rotrBL(R,M,61)^sr.default.shrSL(R,M,6),X=sr.default.add4L(g,W,rc[_-7],rc[_-16]),te=sr.default.add4H(X,C,L,tc[_-7],tc[_-16]);tc[_]=te|0,rc[_]=X|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:x,Hl:A}=this;for(let _=0;_<80;_++){const I=sr.default.rotrSH(c,d,14)^sr.default.rotrSH(c,d,18)^sr.default.rotrBH(c,d,41),O=sr.default.rotrSL(c,d,14)^sr.default.rotrSL(c,d,18)^sr.default.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,R=sr.default.add5L(A,O,g,lye[_],rc[_]),M=sr.default.add5H(R,x,I,C,aye[_],tc[_]),L=R|0,W=sr.default.rotrSH(n,i,28)^sr.default.rotrBH(n,i,34)^sr.default.rotrBH(n,i,39),X=sr.default.rotrSL(n,i,28)^sr.default.rotrBL(n,i,34)^sr.default.rotrBL(n,i,39),te=n&s^n&a^s&a,J=i&o^i&l^o&l;x=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=sr.default.add(u|0,h|0,M|0,L|0),u=a|0,h=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=sr.default.add3L(L,X,J);n=sr.default.add3H(j,M,W,te),i=j|0}({h:n,l:i}=sr.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=sr.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=sr.default.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=sr.default.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:c,l:d}=sr.default.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=sr.default.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=sr.default.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:x,l:A}=sr.default.add(this.Hh|0,this.Hl|0,x|0,A|0),this.set(n,i,s,o,a,l,u,h,c,d,y,w,b,T,x,A)}roundClean(){tc.fill(0),rc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Mo.SHA512=$m;class uye extends $m{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class cye extends $m{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class fye extends $m{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}var lI=Mo.sha512=(0,O_.wrapConstructor)(()=>new $m);Mo.sha512_224=(0,O_.wrapConstructor)(()=>new uye);Mo.sha512_256=(0,O_.wrapConstructor)(()=>new cye);Mo.sha384=(0,O_.wrapConstructor)(()=>new fye);const hye=nv(jge),UW=nv(ife);Object.defineProperty(Js,"__esModule",{value:!0});var WW=Js.mnemonicToSeedSync=Js.mnemonicToSeed=eK=Js.validateMnemonic=Js.entropyToMnemonic=Js.mnemonicToEntropy=ZW=Js.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const KW=ci,qW=Bp,dye=nye,VW=Mo,pye=hye,Ab=UW,vye=e=>e[0]==="";function GW(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function fP(e){const r=GW(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function YW(e){KW.default.bytes(e,16,20,24,28,32)}function gye(e,r=128){if(KW.default.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return QW((0,pye.randomBytes)(r/8),e)}var ZW=Js.generateMnemonic=gye;const yye=e=>{const r=8-e.length/4;return new Uint8Array([(0,dye.sha256)(e)[0]>>r<<r])};function XW(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),Ab.utils.chain(Ab.utils.checksum(1,yye),Ab.utils.radix2(11,!0),Ab.utils.alphabet(e))}function JW(e,r){const{words:t}=fP(e),n=XW(r).decode(t);return YW(n),n}Js.mnemonicToEntropy=JW;function QW(e,r){return YW(e),XW(r).encode(e).join(vye(r)?"":" ")}Js.entropyToMnemonic=QW;function mye(e,r){try{JW(e,r)}catch{return!1}return!0}var eK=Js.validateMnemonic=mye;const tK=e=>GW(`mnemonic${e}`);function bye(e,r=""){return(0,qW.pbkdf2Async)(VW.sha512,fP(e).nfkd,tK(r),{c:2048,dkLen:64})}Js.mnemonicToSeed=bye;function wye(e,r=""){return(0,qW.pbkdf2)(VW.sha512,fP(e).nfkd,tK(r),{c:2048,dkLen:64})}WW=Js.mnemonicToSeedSync=wye;class rK extends aP{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Kf.hash(r);const n=bm(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Kf.exists(this),this.iHash.update(r),this}digestInto(r){Kf.exists(this),Kf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const uI=(e,r,t)=>new rK(e,r).update(t).digest();uI.create=(e,r)=>new rK(e,r);const $ye=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),nK=Uint8Array.from({length:16},(e,r)=>r),_ye=nK.map(e=>(9*e+5)%16);let hP=[nK],dP=[_ye];for(let e=0;e<4;e++)for(let r of[hP,dP])r.push(r[e].map(t=>$ye[t]));const iK=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),xye=hP.map((e,r)=>e.map(t=>iK[r][t])),Eye=dP.map((e,r)=>e.map(t=>iK[r][t])),Sye=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),kye=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ob=(e,r)=>e<<r|e>>>32-r;function L6(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const Cb=new Uint32Array(16);class Tye extends NW{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)Cb[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,h=u,c=this.h4|0,d=c;for(let y=0;y<5;y++){const w=4-y,b=Sye[y],T=kye[y],x=hP[y],A=dP[y],_=xye[y],I=Eye[y];for(let O=0;O<16;O++){const C=Ob(n+L6(y,s,a,u)+Cb[x[O]]+b,_[O])+c|0;n=c,c=u,u=Ob(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=Ob(i+L6(w,o,l,h)+Cb[A[O]]+T,I[O])+d|0;i=d,d=h,h=Ob(l,10)|0,l=o,o=C}}this.set(this.h1+a+h|0,this.h2+u+d|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){Cb.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Iye=I_(()=>new Tye),Pb=rs.ProjectivePoint,TE=P3(uv);function F6(e){return BigInt(`0x${Xs(e)}`)}function Aye(e){return Pc(e.toString(16).padStart(64,"0"))}const Oye=oP("Bitcoin seed"),IE={private:76066276,public:76067358},AE=2147483648,Cye=e=>Iye(uv(e)),Pye=e=>eh(e).getUint32(0,!1),Nb=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return eh(r).setUint32(0,e,!1),r};class Nf{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Pye(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return TE.encode(this.serialize(this.versions.private,Vd(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return TE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=IE){if(Fd(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=uI(lI,Oye,r);return new Nf({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=IE){const n=TE.decode(r),i=eh(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Nf({...o,privateKey:a.slice(1)}):new Nf({...o,publicKey:a})}static fromJSON(r){return Nf.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||IE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!rs.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:F6(r.privateKey),this.privKeyBytes=Aye(this.privKey),this.pubKey=rs.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=Pb.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Cye(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=AE)throw new Error("Invalid index");s[2]==="'"&&(o+=AE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Nb(r);if(r>=AE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Vd(new Uint8Array([0]),a,t)}else t=Vd(this.pubKey,t);const n=uI(lI,this.chainCode,t),i=F6(n.slice(0,32)),s=n.slice(32);if(!rs.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ti(this.privKey+i,rs.CURVE.n);if(!rs.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=Pb.fromHex(this.pubKey).add(Pb.fromPrivateKey(i));if(a.equals(Pb.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Nf(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Fd(r,32),rs.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Fd(r,32),Fd(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=rs.Signature.fromCompact(t)}catch{return!1}return rs.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Fd(t,33),Vd(Nb(r),new Uint8Array([this.depth]),Nb(this.parentFingerprint),Nb(this.index),this.chainCode,t)}}var Nye=Object.defineProperty,qi=(e,r)=>{for(var t in r)Nye(e,t,{get:r[t],enumerable:!0})};function sK(e){return Xs(mm.getPublicKey(e))}var Rye={};qi(Rye,{insertEventIntoAscendingList:()=>Mye,insertEventIntoDescendingList:()=>Bye,normalizeURL:()=>Dye,utf8Decoder:()=>pc,utf8Encoder:()=>dl});var pc=new TextDecoder("utf-8"),dl=new TextEncoder;function Dye(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Bye(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Mye(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var ei=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(ei||{});function oK(e,r){let t=e;return t.pubkey=sK(r),t.id=pP(t),t.sig=jye(t,r),t}function Lye(e){if(!vP(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function pP(e){let r=uv(dl.encode(Lye(e)));return Xs(r)}var Fye=e=>e instanceof Object;function vP(e){if(!Fye(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function gP(e){try{return mm.verify(e.sig,pP(e),e.pubkey)}catch{return!1}}function jye(e,r){return Xs(mm.sign(pP(e),r))}function aK(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>=e.until)}function zye(e,r){for(let t=0;t<e.length;t++)if(aK(e[t],r))return!0;return!1}var Hye={};qi(Hye,{getHex64:()=>yP,getInt:()=>lK,getSubscriptionId:()=>Uye,matchEventId:()=>Wye,matchEventKind:()=>qye,matchEventPubkey:()=>Kye});function yP(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function lK(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Uye(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Wye(e,r){return r===yP(e,"id")}function Kye(e,r){return r===yP(e,"pubkey")}function qye(e,r){return r===lK(e,"kind")}var Vye={};qi(Vye,{BECH32_REGEX:()=>uK,decode:()=>C_,naddrEncode:()=>Qye,neventEncode:()=>Jye,noteEncode:()=>Zye,nprofileEncode:()=>Xye,npubEncode:()=>Yye,nrelayEncode:()=>eme,nsecEncode:()=>Gye});var cv=5e3,uK=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function C_(e){var i,s,o,a,l,u,h;let{prefix:r,words:t}=Nn.decode(e,cv),n=new Uint8Array(Nn.fromWords(t));switch(r){case"nprofile":{let c=Rb(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Xs(c[0][0]),relays:c[1]?c[1].map(d=>pc.decode(d)):[]}}}case"nevent":{let c=Rb(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Xs(c[0][0]),relays:c[1]?c[1].map(d=>pc.decode(d)):[],author:(o=c[2])!=null&&o[0]?Xs(c[2][0]):void 0}}}case"naddr":{let c=Rb(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:pc.decode(c[0][0]),pubkey:Xs(c[2][0]),kind:parseInt(Xs(c[3][0]),16),relays:c[1]?c[1].map(d=>pc.decode(d)):[]}}}case"nrelay":{let c=Rb(n);if(!((h=c[0])!=null&&h[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:pc.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Xs(n)};default:throw new Error(`unknown prefix ${r}`)}}function Rb(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1],s=t.slice(2,2+i);t=t.slice(2+i),!(s.length<i)&&(r[n]=r[n]||[],r[n].push(s))}return r}function Gye(e){return mP("nsec",e)}function Yye(e){return mP("npub",e)}function Zye(e){return mP("note",e)}function mP(e,r){let t=Pc(r),n=Nn.toWords(t);return Nn.encode(e,n,cv)}function Xye(e){let r=P_({0:[Pc(e.pubkey)],1:(e.relays||[]).map(n=>dl.encode(n))}),t=Nn.toWords(r);return Nn.encode("nprofile",t,cv)}function Jye(e){let r=P_({0:[Pc(e.id)],1:(e.relays||[]).map(n=>dl.encode(n)),2:e.author?[Pc(e.author)]:[]}),t=Nn.toWords(r);return Nn.encode("nevent",t,cv)}function Qye(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=P_({0:[dl.encode(e.identifier)],1:(e.relays||[]).map(i=>dl.encode(i)),2:[Pc(e.pubkey)],3:[new Uint8Array(r)]}),n=Nn.toWords(t);return Nn.encode("naddr",n,cv)}function eme(e){let r=P_({0:[dl.encode(e)]}),t=Nn.toWords(r);return Nn.encode("nrelay",t,cv)}function P_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),Vd(...r)}var tme={};qi(tme,{decrypt:()=>nme,encrypt:()=>rme});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function rme(e,r,t){const n=rs.getSharedSecret(e,"02"+r),i=cK(n);let s=Uint8Array.from(CW(16)),o=dl.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Wo.encode(new Uint8Array(l)),h=Wo.encode(new Uint8Array(s.buffer));return`${u}?iv=${h}`}async function nme(e,r,t){let[n,i]=t.split("?iv="),s=rs.getSharedSecret(e,"02"+r),o=cK(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Wo.decode(n),u=Wo.decode(i),h=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return pc.decode(h)}function cK(e){return e.slice(1,33)}var ime={};qi(ime,{NIP05_REGEX:()=>fK,queryProfile:()=>ame,searchDomain:()=>ome,useFetchImplementation:()=>sme});var fK=/^(?:([\w.+-]+)@)?([\w.-]+)$/,N_;try{N_=fetch}catch{}function sme(e){N_=e}async function ome(e,r=""){try{return(await(await N_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function ame(e){const r=e.match(fK);if(!r)return null;const[t,n="_",i]=r;try{const s=await N_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=lme(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function lme(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var ume={};qi(ume,{generateSeedWords:()=>fme,privateKeyFromSeedWords:()=>cme,validateWords:()=>hme});function cme(e,r){let n=Nf.fromMasterSeed(WW(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Xs(n)}function fme(){return ZW(uP)}function hme(e){return eK(e,uP)}var dme={};qi(dme,{parse:()=>pme});function pme(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},h=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(h){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var vme={};qi(vme,{getPow:()=>gme});function gme(e){return yme(Pc(e))}function yme(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=mme(e[t]),r+=n,n===8);t++);return r}function mme(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var bme={};qi(bme,{finishRepostEvent:()=>wme,getRepostedEvent:()=>$me,getRepostedEventPointer:()=>hK});function wme(e,r,t,n){return oK({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function hK(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function $me(e,{skipVerification:r}={}){const t=hK(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!gP(n)))return n}var _me={};qi(_me,{NOSTR_URI_REGEX:()=>R_,parse:()=>Eme,test:()=>xme});var R_=new RegExp(`nostr:(${uK.source})`);function xme(e){return typeof e=="string"&&new RegExp(`^${R_.source}$`).test(e)}function Eme(e){const r=e.match(new RegExp(`^${R_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:C_(r[1])}}var Sme={};qi(Sme,{finishReactionEvent:()=>kme,getReactedEventPointer:()=>Tme});function kme(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return oK({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function Tme(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var Ime={};qi(Ime,{createDelegation:()=>Ame,getDelegator:()=>Ome});function Ame(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=uv(dl.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Xs(mm.sign(i,e));return{from:sK(e),to:r.pubkey,cond:n,sig:s}}function Ome(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,h]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(h))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(h))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(h))continue;return null}}let o=uv(dl.encode(`nostr:delegation:${e.pubkey}:${n}`));return mm.verify(i,o,t)?t:null}var Cme={};qi(Cme,{matchAll:()=>Pme,regex:()=>bP,replaceAll:()=>Nme});var bP=()=>new RegExp(`\\b${R_.source}\\b`,"g");function*Pme(e){const r=e.matchAll(bP());for(const t of r){const[n,i]=t;yield{uri:n,value:i,decoded:C_(i),start:t.index,end:t.index+n.length}}}function Nme(e,r){return e.replaceAll(bP(),(t,n)=>r({uri:t,value:n,decoded:C_(n)}))}var Rme={};qi(Rme,{useFetchImplementation:()=>Dme,validateGithub:()=>Bme});var wP;try{wP=fetch}catch{}function Dme(e){wP=e}async function Bme(e,r,t){try{return await(await wP(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var Mme={};qi(Mme,{authenticate:()=>Lme});var Lme=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Fme={};qi(Fme,{getZapEndpoint:()=>zme,makeZapReceipt:()=>Wme,makeZapRequest:()=>Hme,useFetchImplementation:()=>jme,validateZapRequest:()=>Ume});var $P;try{$P=fetch}catch{}function jme(e){$P=e}async function zme(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Nn.decode(t,1e3),a=Nn.fromWords(o);r=pc.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await $P(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Hme({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Ume(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!vP(r))return"Zap request is not a valid Nostr event.";if(!gP(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Wme({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var jd=null;typeof WebSocket<"u"?jd=WebSocket:typeof MozWebSocket<"u"?jd=MozWebSocket:typeof global<"u"?jd=global.WebSocket||global.MozWebSocket:typeof window<"u"?jd=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(jd=self.WebSocket||self.MozWebSocket);const Kme=jd;function OE(e,r){let t={...e};return delete t[r],r+Ave(t)}function W1(e){let r=[],t=new Map,n=[];for(let i of e){let s=!1;for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){if(i[o].length===0){s=!0;break}let a=OE(i,o),l=t.get(a);if(l!==void 0){let u=r[l];for(let h in u)if(h!==o){let c=OE(u,h);t.delete(c)}if(r[l][o]instanceof Set)for(let h of i[o])r[l][o].add(h);else r[l][o]=new Set(r[l][o].concat(i[o])),n.push([l,o]);s=!0;break}}if(!s){for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){let a=OE(i,o);t.set(a,r.length)}r.push({...i})}}for(let[i,s]of n)r[i][s]=Array.from(r[i][s]);return r}function qme(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function Vme(e){let r=e.indexOf('"EVENT"')+7,t=e.slice(r),n=t.indexOf('"')+1,i=t.slice(n);return i.slice(0,i.indexOf('"'))}function Gme(e,r,t){return new Yme(e,r,t).relayInit()}var H$,dK,U$,pK,W$,vK,K$,gK,q$,yK,V$,mK,vz,Yme=(vz=class{constructor(e,r,t){Vr(this,H$);Vr(this,U$);Vr(this,W$);Vr(this,K$);Vr(this,q$);Vr(this,V$);le(this,"url");le(this,"alreadyHaveEvent");le(this,"logging",!1);le(this,"autoReconnect");le(this,"ws");le(this,"sendOnConnect",[]);le(this,"openSubs",{});le(this,"closedByClient",!1);le(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});le(this,"subListeners",{});le(this,"pubListeners",{});le(this,"incomingMessageQueue",[]);le(this,"handleNextInterval");le(this,"resolveClose");le(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=r,this.autoReconnect=t}async trySend(e){var t;const r=JSON.stringify(e);this.connected?(t=this.ws)==null||t.send(r):this.sendOnConnect.push(r)}async connectRelay(){return new Promise((e,r)=>{try{const t=new Kme(this.url);this.ws=t}catch(t){r(t);return}this.ws.onopen=Qn(this,V$,mK).bind(this,e),this.ws.onerror=t=>{this.listeners.error.forEach(n=>n()),r(t)},this.ws.onclose=Qn(this,U$,pK).bind(this),this.ws.onmessage=Qn(this,K$,gK).bind(this)})}async connect(){var e,r;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((r=this.ws)==null?void 0:r.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(r=>{this.resolveClose=r})}on(e,r){var t;this.listeners[e].push(r),e==="connect"&&((t=this.ws)==null?void 0:t.readyState)===1&&r()}off(e,r){const t=this.listeners[e].indexOf(r);t!==-1&&this.listeners[e].splice(t,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,r){const t=this;if(!e.id)throw new Error(`event ${e} has no id`);const n=e.id;let i=!1,s=!1;t.trySend([r,e]).then(()=>{i=!0,s&&(o(),s=!1)}).catch(()=>{});const o=()=>{const a=this.sub([{ids:[n]}],{id:`monitor-${n.slice(0,5)}`}),l=setTimeout(()=>{var u;(((u=t.pubListeners[n])==null?void 0:u.failed)||[]).forEach(h=>h("event not seen after 5 seconds")),a.unsub()},5e3);a.on("event",()=>{var u;clearTimeout(l),(((u=t.pubListeners[n])==null?void 0:u.seen)||[]).forEach(h=>h())})};return{on:(a,l)=>{t.pubListeners[n]=t.pubListeners[n]||{ok:[],seen:[],failed:[]},t.pubListeners[n][a].push(l),a==="seen"&&(i?o():s=!0)},off:(a,l)=>{const u=t.pubListeners[n];if(!u)return;const h=u[a].indexOf(l);h>=0&&u[a].splice(h,1)}}}sub(e,r={}){const t=this,n=r.id||Math.random().toString().slice(2),i=r.skipVerification||!1;return t.openSubs[n]={id:n,filters:e,skipVerification:i},t.connected&&(this.logging&&console.log("REQ2",this.url,n,...e),t.trySend(["REQ",n,...e])),{sub:(s,o={})=>this.sub(s||e,{skipVerification:o.skipVerification||i,id:n}),unsub:()=>{delete t.openSubs[n],delete t.subListeners[n],t.connected&&(t.logging&&console.log("CLOSE",this.url,n),t.trySend(["CLOSE",n]))},on:(s,o)=>{t.subListeners[n]=t.subListeners[n]||{event:[],eose:[]},t.subListeners[n][s].push(o)},off:(s,o)=>{const a=t.subListeners[n];if(!a)return;const l=a[s].indexOf(o);l>=0&&a[s].splice(l,1)}}}},H$=new WeakSet,dK=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}Qn(this,q$,yK).call(this,{data:this.incomingMessageQueue.shift()})},U$=new WeakSet,pK=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&Qn(this,W$,vK).call(this)},W$=new WeakSet,vK=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},K$=new WeakSet,gK=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>Qn(this,H$,dK).call(this),0))},q$=new WeakSet,yK=async function(e){var s,o,a,l,u,h,c;let r,t=e.data.toString();if(!t)return;let n=qme(t,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,n);if(i){const d=this.subListeners[Vme(t)];return d?d.event.forEach(y=>y(i)):void 0}try{r=JSON.parse(t)}catch{r=e.data}if(r.length>=1)switch(r[0]){case"EVENT":if(this.logging&&console.log(r),r.length!==3)return;const d=r[1],y=r[2];if(!this.openSubs[d]||(o=this.openSubs[d].eventIds)!=null&&o.has(n))return;(a=this.openSubs[d].eventIds)==null||a.add(n),vP(y)&&this.openSubs[d]&&(this.openSubs[d].skipVerification||gP(y))&&zye(this.openSubs[d].filters,y)&&(this.openSubs[d],(((l=this.subListeners[d])==null?void 0:l.event)||[]).forEach(T=>T(y)));return;case"EOSE":{if(r.length!==2)return;const T=r[1];this.logging&&console.log("EOSE",this.url,T),(((u=this.subListeners[T])==null?void 0:u.eose)||[]).forEach(x=>x());return}case"OK":{if(r.length<3)return;const T=r[1],x=r[2],A=r[3]||"";x?(h=this.pubListeners[T])==null||h.ok.forEach(_=>_()):(c=this.pubListeners[T])==null||c.failed.forEach(_=>_(A));return}case"NOTICE":if(r.length!==2)return;const w=r[1];this.listeners.notice.forEach(T=>T(w));return;case"AUTH":if(r.length!==2)return;const b=r[1];this.listeners.auth.forEach(T=>T(b));return}},V$=new WeakSet,mK=function(e){var r;if(this.resolveClose){this.resolveClose();return}for(const t in this.openSubs)this.logging&&console.log("REQ",this.url,t,...this.openSubs[t].filters),this.trySend(["REQ",t,...this.openSubs[t].filters]);for(const t of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,t),(r=this.ws)==null||r.send(t);this.sendOnConnect=[],this.listeners.connect.forEach(t=>t()),e()},vz),G$,bK,Y$,wK,i3,Xme,Z$,$K,X$,_K,J$,xK,gz,Zme=(gz=class{constructor(){Vr(this,G$);Vr(this,Y$);Vr(this,i3);Vr(this,Z$);Vr(this,X$);Vr(this,J$);le(this,"eventsById",new Map);le(this,"metadataByPubKey",new Map);le(this,"contactsByPubKey",new Map);le(this,"authorsKindsByPubKey",new Map);le(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===ei.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===ei.Contacts&&this.contactsByPubKey.set(e.pubkey,e),Qn(this,G$,bK).call(this,e),Qn(this,Y$,wK).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,r){const t=new Set,n=[];for(const i of e){const s=Qn(this,J$,xK).call(this,i)||Qn(this,Z$,$K).call(this,i)||Qn(this,X$,_K).call(this,i)||{filter:i,events:[]};for(const o of s.events)t.add(o);n.push(s.filter)}return{filters:n,events:[...t]}}},G$=new WeakSet,bK=function(e){const r=this.authorsKindsByPubKey.get(e.pubkey);if(!r)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const t=r.get(e.kind);t?e.kind===ei.Metadata||e.kind===ei.Contacts?e.created_at>t[0].created_at&&(t[0]=e):t.push(e):r.set(e.kind,[e])}},Y$=new WeakSet,wK=function(e){for(const r of e.tags){let t=r[0]+":"+r[1];const n=this.eventsByTags.get(t);n?n.push(e):this.eventsByTags.set(t,[e])}},i3=new WeakSet,Xme=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(n=>n!==ei.Contacts&&n!==ei.Metadata)!==void 0)return;const r=[],t=new Set;for(const n of e.authors){let i;if(e.kinds.includes(ei.Contacts)&&(i=this.contactsByPubKey.get(n),!i)){r.push(n);continue}let s;if(e.kinds.includes(ei.Metadata)&&(s=this.metadataByPubKey.get(n),!s)){r.push(n);continue}i&&t.add(i),s&&t.add(s)}return{filter:{...e,authors:r},events:t}},Z$=new WeakSet,$K=function(e){if(e.noCache||!e.authors)return;const r=new Set;for(const t of e.authors)if(e.kinds){const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of e.kinds){const s=n.get(i);if(s)for(const o of s)r.add(o)}}else{const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of n.values())for(const s of i)r.add(s)}return{filter:e,events:r}},X$=new WeakSet,_K=function(e){if(e.noCache)return;const r=new Set;for(const t in e){if(t[0]!=="#")continue;let n=t.slice(1)+":"+e[t][0];const i=this.eventsByTags.get(n);if(i)for(const s of i)r.add(s)}return{filter:e,events:r}},J$=new WeakSet,xK=function(e){if(!e.ids)return;const r=new Set,t=[];for(const n of e.ids){const i=this.getEventById(n);i?r.add(i):t.push(n)}return{filter:{...e,ids:t},events:r}},gz),EK=class{constructor(r,t,n){le(this,"pubkey");le(this,"relayPool");le(this,"relays");this.pubkey=n,this.relayPool=r,this.relays=t}metaData(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Metadata]}],this.relays,r,t)}subscribe(r,t,n){return this.relayPool.subscribeEventObject(r.map(i=>({authors:[this.pubkey],...i})),this.relays,t,n)}followsPubkeys(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)s[0]==="p"&&i.push(s[1]);r(i)},t)}follows(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)if(s[0]==="p"){let o=this.relays;s[1]&&(o=[s[1],...this.relays||[]]),i.push(new EK(this.relayPool,o,s[1]))}r(i)},t)}secondFollows(r,t,n=!0){return this.followsPubkeys(i=>{let s=new Map;for(const o of i)this.relayPool.subscribeEventObject([{authors:[o],kinds:[ei.Contacts]}],this.relays,a=>{let l=1/a.tags.length;for(const u of a.tags)if(u[0]==="p"){let h=s.get(u[1]);h?h+=l:h=l,s.set(u[1],h)}if(n)for(const u of i)s.delete(u);r(Array.from(s.entries()).sort((u,h)=>h[1]-u[1]))},t)},t)}allEvents(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,r,n)}referenced(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,r,n)}followers(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[ei.Contacts],limit:t}],this.relays,r,n)}sentAndRecievedDMs(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ei.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[ei.EncryptedDirectMessage],limit:t}],this.relays,r,n)}text(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ei.Text],limit:t}],this.relays,r,n)}},cI=class{constructor(e,r,t){le(this,"id");le(this,"kind");le(this,"pubkey");le(this,"tags");le(this,"created_at");le(this,"content");le(this,"relayPool");le(this,"relays");le(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=r,this.relays=t,this.sig=e.sig}referencedAuthors(){const e=[];for(const r of this.tags)r[0]==="p"&&e.push(new EK(this.relayPool,void 0,r[1]));return e}referencedEvents(e){const r=[];for(const t of this.tags)if(t[0]==="e"){let n=this.relays;t[2]&&(n=[t[2],...n||[]]),r.push(this.relayPool.getEventById(t[1],n,e).then(i=>new cI(i,this.relayPool,this.relays)))}return r}thread(e,r){let t=this.relays,n=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(t=[i[2],...t||[]]),n.push(i[1]));return this.relayPool.subscribe([{ids:n},{"#e":n}],t,e,r)}};function Jme(e){let r=new Set;return(t,n,i)=>{r.has(t.id)||(r.add(t.id),e(t,n,i))}}function Qme(e){let r=new Map;return(t,n,i)=>{if(t.kind===ei.Metadata||t.kind===ei.Contacts){let s=t.pubkey+" "+t.kind;if((r.get(s)||0)>t.created_at)return;r.set(s,t.created_at)}e(t,n,i)}}function e0e(e,r){return(t,n,i)=>{for(let s of r)if(aK(s,t)){e(t,n,i);break}}}var t0e=class{constructor(e){le(this,"subs",[]);le(this,"events",[]);le(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(r=>r(...e))}sub(e){return this.events.forEach(r=>e(...r)),this.subs.push(e),()=>{var r;this.subs=this.subs.filter(t=>t!==e),this.subs.length===0&&((r=this.onunsub)==null||r.call(this),this.onunsub=void 0)}}},r0e=e=>[...new Set(e)];function n0e(e,r,t,n={},i){let s=[];if(i){const a=i.getCachedEventsWithUpdatedFilters(e,r);e=a.filters,s=a.events}if(n.logAllEvents){const a=t;t=(l,u,h)=>{a(l,u,h)}}n.allowDuplicateEvents||(t=Jme(t)),n.allowOlderEvents||(t=Qme(t));for(const a of s)t(a,!1,void 0);e=W1(e),t=e0e(t,e),r=r0e(r);const o=i0e(e,r);return[t,o]}function i0e(e,r){const t=new Map,n=[];for(const i of e){const s=i.relay;if(s){const o=t.get(s);o?o.push(j6(i)):t.set(s,[j6(i)])}else n.push(i)}if(n.length>0)for(const i of r){const s=t.get(i);s?t.set(i,s.concat(n)):t.set(i,n)}return t}function j6(e){return e={...e},delete e.relay,e}function s0e(e,r){const t=new Map,n=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},o=()=>{};for(const[l,u,h,c,d]of e){if(!h.unsubcb)continue;for(const[w,b]of u){const T=t.get(w);T?t.set(w,T.concat(b)):t.set(w,b)}let y=(w,b,T)=>{h.unsubcb&&l(w,b,T)};if(r&&d){const w=new t0e(o);n.push((T,x,A)=>{w.event(T,x,A)});let b=w.sub(y);r.set(d,w),h.unsubcb=()=>{h.unsubcb=void 0,b(),c||i--}}else n.push(y),h.unsubcb=()=>{h.unsubcb=void 0,c||i--};c||i++}i===0&&setTimeout(()=>{},0);const a=(l,u,h)=>{for(const c of n)c(l,u,h)};return e.length=0,[a,t,s]}var CE=class{constructor(e,r,t,n){le(this,"data");le(this,"promises");le(this,"relays");le(this,"kind");le(this,"relayPool");le(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=r,this.relays=t||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=n||!1}async get(e){let r=this.data.get(e);if(r)return Promise.resolve(r);const t=this.promises.get(e);return t||new Promise((n,i)=>{let s=0;const o=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},a=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([o],this.relays,l=>{this.data.set(e,l),this.promises.delete(e),n(l)},void 0,l=>{this.relays.includes(l)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=a})}},z6=e=>[...new Set(e)];function o0e(e){if(e)return JSON.parse(e)}var Q$,SK,e_,kK,t_,TK,r_,IK,n_,AK,i_,OK,yz,a0e=(yz=class{constructor(e,r={}){Vr(this,Q$);Vr(this,e_);Vr(this,t_);Vr(this,r_);Vr(this,n_);Vr(this,i_);le(this,"relayByUrl",new Map);le(this,"noticecbs",[]);le(this,"errorcbs",[]);le(this,"authcbs",[]);le(this,"eventCache");le(this,"minMaxDelayms",1/0);le(this,"filtersToSubscribe",[]);le(this,"timer");le(this,"externalGetEventById");le(this,"logSubscriptions",!1);le(this,"autoReconnect",!1);le(this,"startTime",new Date().getTime());le(this,"deleteSignatures");le(this,"subscriptionCache");le(this,"skipVerification");le(this,"writeRelays");le(this,"metadataCache");le(this,"contactListCache");le(this,"logErrorsAndNotices");le(this,"errorsAndNoticesInterval");le(this,"errorsAndNotices",[]);if(this.externalGetEventById=r.externalGetEventById,this.logSubscriptions=r.logSubscriptions,this.autoReconnect=r.autoReconnect,this.deleteSignatures=r.deleteSignatures,this.skipVerification=r.skipVerification,this.writeRelays=new CE(10003,this,void 0,!0),this.metadataCache=new CE(0,this),this.contactListCache=new CE(3,this),r.useEventCache&&(this.eventCache=new Zme),r.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const t of z6(e))this.addOrGetRelay(t);this.logErrorsAndNotices=r.logErrorsAndNotices||!0,this.onnotice((t,n)=>{this.errorsAndNotices.push({type:"notice",url:t,msg:n,time:Date.now()-this.startTime})}),this.onerror((t,n)=>{this.errorsAndNotices.push({type:"error",url:t,msg:n,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>Qn(this,Q$,SK).call(this),1e3*10)}addOrGetRelay(e){const r=this.relayByUrl.get(e);if(r)return r;const t=Gme(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?n=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(n)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,t),t.connect().then(n=>{t==null||t.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),t==null||t.on("auth",i=>{this.authcbs.forEach(s=>s(t,i))})},n=>{this.errorcbs.forEach(i=>i(e,n))}),t}async close(){const e=[];for(const r of this.relayByUrl.values())e.push(r.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const r=this.relayByUrl.get(e);r&&(r.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,r){clearTimeout(this.timer),this.timer=void 0;let t=this.minMaxDelayms;this.minMaxDelayms=1/0;const[n,i,s]=s0e(r||this.filtersToSubscribe,this.subscriptionCache);return Qn(this,r_,IK).call(this,i,n,e,s,t)}subscribeEventObject(e,r,t,n,i,s={}){return this.subscribe(e,r,(o,a,l)=>t(new cI(o,this,r),a,l))}subscribe(e,r,t,n,i,s={}){var c;if(n!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(r===void 0){const d=Qn(this,i_,OK).call(this,e,t,n,i,s);return()=>{d.then(y=>{y()})}}let o;if(s.unsubscribeOnEose&&!i){o=JSON.stringify([e,r]);const d=(c=this.subscriptionCache)==null?void 0:c.get(o);if(d)return d.sub(t)}const[a,l]=n0e(e,r,t,s,this.eventCache);let u={unsubcb:()=>{}};n===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const h=[a,l,u,s.unsubscribeOnEose,o,n];return s.dontSendOtherFilters?this.sendSubscriptions(i,[h]):(this.filtersToSubscribe.push(h),n===void 0?this.sendSubscriptions(i):(Qn(this,n_,AK).call(this,n),()=>{var d;(d=u.unsubcb)==null||d.call(u),delete u.unsubcb}))}async getEventObjectById(e,r,t){return this.getEventById(e,r,t).then(n=>new cI(n,this,r))}async getEventById(e,r,t){return new Promise((n,i)=>{this.subscribe([{ids:[e]}],r,s=>{n(s)},t,void 0)})}publish(e,r){for(const t of z6(r))this.addOrGetRelay(t).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((r,t)=>r.on("error",n=>e(t,n))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((r,t)=>r.on("disconnect",n=>e(t,n)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,r])=>[e,r.status]).sort()}setWriteRelaysForPubKey(e,r,t){const n={created_at:t,pubkey:"",id:"",sig:"",content:JSON.stringify(r),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,n)}setCachedMetadata(e,r){this.metadataCache.data.set(e,r)}setCachedContactList(e,r){this.contactListCache.data.set(e,r)}subscribeReferencedEvents(e,r,t,n,i={}){let s=[],o=[];for(const a of e.tags){if(a[0]==="p"){const l=a[1];if(l.length!==64){console.log("bad pubkey",l,a);continue}o.push(l)}if(a[0]==="e"){const l=a[1];s.push(l)}}return s.length===0?()=>{}:o.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,r,t,n,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:o}],void 0,r,t,n,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${r}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${r}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,r,t,n,i={}){for(const s of e.tags)if(s[0]==="p"){const o=s[1];if(o.length!==64){console.log("bad pubkey",o,s);continue}this.fetchAndCacheMetadata(o).catch(a=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${o}: ${a}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,r,t,n,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(r=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${r}`,time:Date.now()-this.startTime,url:e.url})})})}},Q$=new WeakSet,SK=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},e_=new WeakSet,kK=function(e,r,t,n,i){const s=W1(r);if(s.length===0)return;const a=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let l=!1,u=1/0;return a.on("event",h=>{var d;h.created_at<u&&(u=h.created_at);let c=h;this.deleteSignatures||(c.sig=h.sig),(d=this.eventCache)==null||d.addEvent(c),t(c,l,e)}),a.on("eose",()=>{n==null||n(e,u),l=!0}),a},t_=new WeakSet,TK=function(e){const r=new Map;for(const[t,n]of e){const i=W1(W1(n));i.length>0&&r.set(t,i)}return r},r_=new WeakSet,IK=function(e,r,t,n={},i){var u,h;if(e.size===0)return()=>{};if(e=Qn(this,t_,TK).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const c={};for(const[d,y]of e){let w=0;for(const b of y){const T={...b};T.authors&&(T.authors=T.authors.join(),T["authors.length"]=(u=b==null?void 0:b.authors)==null?void 0:u.length),T.kinds&&(T.kinds=T.kinds.join()),T.ids&&(T.ids=T.ids.join(),T["ids.length"]=(h=b==null?void 0:b.ids)==null?void 0:h.length),T["#e"]&&(T["#e"]=T["#e"].join(),T["#e.length"]=b["#e"].length),T["#p"]&&(T["#p"]=T["#p"].join(),T["#p.length"]=b["#p"].length),c[d+" "+w]=T,w++}}Object.keys(c).length>3&&console.groupCollapsed(Object.keys(c).length+" filters to "+e.size+" relays"),console.table(c),Object.keys(c).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let o=!1,a=[];n.unsuboneosecb=()=>{o=!0,a.forEach(c=>c.unsub())};for(const[c,d]of e){let y={};const w=(x,A)=>{var _;t&&t(x,A),o?(_=y.sub)==null||_.unsub():y.sub&&a.push(y.sub)},b=new Set,T=Qn(this,e_,kK).call(this,c,d,r,w,b);T&&(y.sub=T,s.push(T))}const l=()=>s.forEach(c=>c.unsub());return n.unsubcb=()=>{l(),delete n.unsubcb},l},n_=new WeakSet,AK=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},i_=new WeakSet,OK=async function(e,r,t,n,i={}){var c;const s=new Set;for(const d of e)if(d.authors)for(const y of d.authors)s.add(y);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const o=[],a=[];for(const d of s)o.push((c=this.writeRelays)==null?void 0:c.get(d).then(y=>o0e(y==null?void 0:y.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),a.push(d);const l=new Set;let u=0;for(const d of o){const y=a[u];u+=1;let w=await d;if(!Array.isArray(w)){console.error("Couldn't load relays for author ",y);continue}for(let b of w)l.add(b)}let h=Array.from(l);return h.length===0&&i.defaultRelays&&(h=i.defaultRelays),this.subscribe(e,h,r,t,n,i)},yz);const Qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jn=Object.keys,Ui=Array.isArray;function us(e,r){return typeof r!="object"||jn(r).forEach(function(t){e[t]=r[t]}),e}typeof Promise>"u"||Qr.Promise||(Qr.Promise=Promise);const Ry=Object.getPrototypeOf,l0e={}.hasOwnProperty;function ro(e,r){return l0e.call(e,r)}function Mp(e,r){typeof r=="function"&&(r=r(Ry(e))),(typeof Reflect>"u"?jn:Reflect.ownKeys)(r).forEach(t=>{Xl(e,t,r[t])})}const CK=Object.defineProperty;function Xl(e,r,t,n){CK(e,r,us(t&&ro(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},n))}function dp(e){return{from:function(r){return e.prototype=Object.create(r.prototype),Xl(e.prototype,"constructor",e),{extend:Mp.bind(null,e.prototype)}}}}const u0e=Object.getOwnPropertyDescriptor;function _P(e,r){let t;return u0e(e,r)||(t=Ry(e))&&_P(t,r)}const c0e=[].slice;function Kw(e,r,t){return c0e.call(e,r,t)}function PK(e,r){return r(e)}function jg(e){if(!e)throw new Error("Assertion Failed")}function NK(e){Qr.setImmediate?setImmediate(e):setTimeout(e,0)}function RK(e,r){return e.reduce((t,n,i)=>{var s=r(n,i);return s&&(t[s[0]]=s[1]),t},{})}function Jl(e,r){if(ro(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var t=[],n=0,i=r.length;n<i;++n){var s=Jl(e,r[n]);t.push(s)}return t}var o=r.indexOf(".");if(o!==-1){var a=e[r.substr(0,o)];return a===void 0?void 0:Jl(a,r.substr(o+1))}}function $a(e,r,t){if(e&&r!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){jg(typeof t!="string"&&"length"in t);for(var n=0,i=r.length;n<i;++n)$a(e,r[n],t[n])}else{var s=r.indexOf(".");if(s!==-1){var o=r.substr(0,s),a=r.substr(s+1);if(a==="")t===void 0?Ui(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var l=e[o];l&&ro(e,o)||(l=e[o]={}),$a(l,a,t)}}else t===void 0?Ui(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=t}}function DK(e){var r={};for(var t in e)ro(e,t)&&(r[t]=e[t]);return r}const f0e=[].concat;function BK(e){return f0e.apply([],e)}const MK="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(BK([8,16,32,64].map(e=>["Int","Uint","Float"].map(r=>r+e+"Array")))).filter(e=>Qr[e]),h0e=MK.map(e=>Qr[e]);RK(MK,e=>[e,!0]);let fc=null;function _m(e){fc=typeof WeakMap<"u"&&new WeakMap;const r=fI(e);return fc=null,r}function fI(e){if(!e||typeof e!="object")return e;let r=fc&&fc.get(e);if(r)return r;if(Ui(e)){r=[],fc&&fc.set(e,r);for(var t=0,n=e.length;t<n;++t)r.push(fI(e[t]))}else if(h0e.indexOf(e.constructor)>=0)r=e;else{const s=Ry(e);for(var i in r=s===Object.prototype?{}:Object.create(s),fc&&fc.set(e,r),e)ro(e,i)&&(r[i]=fI(e[i]))}return r}const{toString:d0e}={};function hI(e){return d0e.call(e).slice(8,-1)}const dI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",p0e=typeof dI=="symbol"?function(e){var r;return e!=null&&(r=e[dI])&&r.apply(e)}:function(){return null},zd={};function Vl(e){var r,t,n,i;if(arguments.length===1){if(Ui(e))return e.slice();if(this===zd&&typeof e=="string")return[e];if(i=p0e(e)){for(t=[];!(n=i.next()).done;)t.push(n.value);return t}if(e==null)return[e];if(typeof(r=e.length)=="number"){for(t=new Array(r);r--;)t[r]=e[r];return t}return[e]}for(r=arguments.length,t=new Array(r);r--;)t[r]=arguments[r];return t}const xP=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var gl=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function LK(e,r){gl=e,FK=r}var FK=()=>!0;const v0e=!new Error("").stack;function Rh(){if(v0e)try{throw Rh.arguments,new Error}catch(e){return e}return new Error}function pI(e,r){var t=e.stack;return t?(r=r||0,t.indexOf(e.name)===0&&(r+=(e.name+e.message).split(`
`).length),t.split(`
`).slice(r).filter(FK).map(n=>`
`+n).join("")):""}var jK=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],EP=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(jK),g0e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pp(e,r){this._e=Rh(),this.name=e,this.message=r}function zK(e,r){return e+". Errors: "+Object.keys(r).map(t=>r[t].toString()).filter((t,n,i)=>i.indexOf(t)===n).join(`
`)}function qw(e,r,t,n){this._e=Rh(),this.failures=r,this.failedKeys=n,this.successCount=t,this.message=zK(e,r)}function ry(e,r){this._e=Rh(),this.name="BulkError",this.failures=Object.keys(r).map(t=>r[t]),this.failuresByPos=r,this.message=zK(e,r)}dp(pp).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+pI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),dp(qw).from(pp),dp(ry).from(pp);var SP=EP.reduce((e,r)=>(e[r]=r+"Error",e),{});const y0e=pp;var Wt=EP.reduce((e,r)=>{var t=r+"Error";function n(i,s){this._e=Rh(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=g0e[r]||t,this.inner=null)}return dp(n).from(y0e),e[r]=n,e},{});Wt.Syntax=SyntaxError,Wt.Type=TypeError,Wt.Range=RangeError;var H6=jK.reduce((e,r)=>(e[r+"Error"]=Wt[r],e),{}),K1=EP.reduce((e,r)=>(["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=Wt[r]),e),{});function zr(){}function Dy(e){return e}function m0e(e,r){return e==null||e===Dy?r:function(t){return r(e(t))}}function bh(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function b0e(e,r){return e===zr?r:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=r.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?bh(n,this.onsuccess):n),i&&(this.onerror=this.onerror?bh(i,this.onerror):i),s!==void 0?s:t}}function w0e(e,r){return e===zr?r:function(){e.apply(this,arguments);var t=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?bh(t,this.onsuccess):t),n&&(this.onerror=this.onerror?bh(n,this.onerror):n)}}function $0e(e,r){return e===zr?r:function(t){var n=e.apply(this,arguments);us(t,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=r.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?bh(i,this.onsuccess):i),s&&(this.onerror=this.onerror?bh(s,this.onerror):s),n===void 0?o===void 0?void 0:o:us(n,o)}}function _0e(e,r){return e===zr?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function kP(e,r){return e===zr?r:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return r.apply(n,s)})}return r.apply(this,arguments)}}K1.ModifyError=qw,K1.DexieError=pp,K1.BulkError=ry;var By={};const HK=100,[vI,Vw,gI]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Ry(e),e];const r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,Ry(r),e]})(),UK=Vw&&Vw.then,q1=vI&&vI.constructor,TP=!!gI;var yI=!1,x0e=gI?()=>{gI.then(Db)}:Qr.setImmediate?setImmediate.bind(null,Db):Qr.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Db(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Db,0)},ny=function(e,r){zg.push([e,r]),Gw&&(x0e(),Gw=!1)},mI=!0,Gw=!0,th=[],V1=[],bI=null,wI=Dy,vp={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:K6,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{K6(e[0],e[1])}catch{}})}},Bt=vp,zg=[],rh=0,G1=[];function St(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=zr,this._lib=!1;var r=this._PSD=Bt;if(gl&&(this._stackHolder=Rh(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==By)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&_I(this,this._value))}this._state=null,this._value=null,++r.ref,KK(this,e)}const $I={get:function(){var e=Bt,r=Yw;function t(n,i){var s=!e.global&&(e!==Bt||r!==Yw);const o=s&&!fu();var a=new St((l,u)=>{IP(this,new WK(Zw(n,e,s,o),Zw(i,e,s,o),l,u,e))});return gl&&GK(a,this),a}return t.prototype=By,t},set:function(e){Xl(this,"then",e&&e.prototype===By?$I:{get:function(){return e},set:$I.set})}};function WK(e,r,t,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=t,this.reject=n,this.psd=i}function KK(e,r){try{r(t=>{if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&xm();t&&typeof t.then=="function"?KK(e,(i,s)=>{t instanceof St?t._then(i,s):t.then(i,s)}):(e._state=!0,e._value=t,qK(e)),n&&Em()}},_I.bind(null,e))}catch(t){_I(e,t)}}function _I(e,r){if(V1.push(r),e._state===null){var t=e._lib&&xm();r=wI(r),e._state=!1,e._value=r,gl&&r!==null&&typeof r=="object"&&!r._promise&&function(n,i,s){try{n.apply(null,s)}catch(o){i&&i(o)}}(()=>{var n=_P(r,"stack");r._promise=e,Xl(r,"stack",{get:()=>yI?n&&(n.get?n.get.apply(r):n.value):e.stack})}),function(n){th.some(i=>i._value===n._value)||th.push(n)}(e),qK(e),t&&Em()}}function qK(e){var r=e._listeners;e._listeners=[];for(var t=0,n=r.length;t<n;++t)IP(e,r[t]);var i=e._PSD;--i.ref||i.finalize(),rh===0&&(++rh,ny(()=>{--rh==0&&AP()},[]))}function IP(e,r){if(e._state!==null){var t=e._state?r.onFulfilled:r.onRejected;if(t===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++rh,ny(E0e,[t,e,r])}else e._listeners.push(r)}function E0e(e,r,t){try{bI=r;var n,i=r._value;r._state?n=e(i):(V1.length&&(V1=[]),n=e(i),V1.indexOf(i)===-1&&function(s){for(var o=th.length;o;)if(th[--o]._value===s._value)return void th.splice(o,1)}(r)),t.resolve(n)}catch(s){t.reject(s)}finally{bI=null,--rh==0&&AP(),--t.psd.ref||t.psd.finalize()}}function VK(e,r,t){if(r.length===t)return r;var n="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,n=pI(o,0)):(i=o,s=""),r.push(i+(s?": "+s:"")+n)}return gl&&((n=pI(e._stackHolder,2))&&r.indexOf(n)===-1&&r.push(n),e._prev&&VK(e._prev,r,t)),r}function GK(e,r){var t=r?r._numPrev+1:0;t<100&&(e._prev=r,e._numPrev=t)}function Db(){xm()&&Em()}function xm(){var e=mI;return mI=!1,Gw=!1,e}function Em(){var e,r,t;do for(;zg.length>0;)for(e=zg,zg=[],t=e.length,r=0;r<t;++r){var n=e[r];n[0].apply(null,n[1])}while(zg.length>0);mI=!0,Gw=!0}function AP(){var e=th;th=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var r=G1.slice(0),t=r.length;t;)r[--t]()}function Bb(e){return new St(By,!1,e)}function sn(e,r){var t=Bt;return function(){var n=xm(),i=Bt;try{return Rc(t,!0),e.apply(this,arguments)}catch(s){r&&r(s)}finally{Rc(i,!1),n&&Em()}}}Mp(St.prototype,{then:$I,_then:function(e,r){IP(this,new WK(null,null,e,r,Bt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=arguments[0],t=arguments[1];return typeof r=="function"?this.then(null,n=>n instanceof r?t(n):Bb(n)):this.then(null,n=>n&&n.name===r?t(n):Bb(n))},finally:function(e){return this.then(r=>(e(),r),r=>(e(),Bb(r)))},stack:{get:function(){if(this._stack)return this._stack;try{yI=!0;var e=VK(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{yI=!1}}},timeout:function(e,r){return e<1/0?new St((t,n)=>{var i=setTimeout(()=>n(new Wt.Timeout(r)),e);this.then(t,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Xl(St.prototype,Symbol.toStringTag,"Dexie.Promise"),vp.env=YK(),Mp(St,{all:function(){var e=Vl.apply(null,arguments).map(Mb);return new St(function(r,t){e.length===0&&r([]);var n=e.length;e.forEach((i,s)=>St.resolve(i).then(o=>{e[s]=o,--n||r(e)},t))})},resolve:e=>{if(e instanceof St)return e;if(e&&typeof e.then=="function")return new St((t,n)=>{e.then(t,n)});var r=new St(By,!0,e);return GK(r,bI),r},reject:Bb,race:function(){var e=Vl.apply(null,arguments).map(Mb);return new St((r,t)=>{e.map(n=>St.resolve(n).then(r,t))})},PSD:{get:()=>Bt,set:e=>Bt=e},totalEchoes:{get:()=>Yw},newPSD:Nc,usePSD:hv,scheduler:{get:()=>ny,set:e=>{ny=e}},rejectionMapper:{get:()=>wI,set:e=>{wI=e}},follow:(e,r)=>new St((t,n)=>Nc((i,s)=>{var o=Bt;o.unhandleds=[],o.onunhandled=s,o.finalize=bh(function(){(function(a){function l(){a(),G1.splice(G1.indexOf(l),1)}G1.push(l),++rh,ny(()=>{--rh==0&&AP()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},r,t,n))}),q1&&(q1.allSettled&&Xl(St,"allSettled",function(){const e=Vl.apply(null,arguments).map(Mb);return new St(r=>{e.length===0&&r([]);let t=e.length;const n=new Array(t);e.forEach((i,s)=>St.resolve(i).then(o=>n[s]={status:"fulfilled",value:o},o=>n[s]={status:"rejected",reason:o}).then(()=>--t||r(n)))})}),q1.any&&typeof AggregateError<"u"&&Xl(St,"any",function(){const e=Vl.apply(null,arguments).map(Mb);return new St((r,t)=>{e.length===0&&t(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((s,o)=>St.resolve(s).then(a=>r(a),a=>{i[o]=a,--n||t(new AggregateError(i))}))})}));const Hi={awaits:0,echoes:0,id:0};var S0e=0,Y1=[],PE=0,Yw=0,k0e=0;function Nc(e,r,t,n){var i=Bt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++k0e;var o=vp.env;s.env=TP?{Promise:St,PromiseProp:{value:St,configurable:!0,writable:!0},all:St.all,race:St.race,allSettled:St.allSettled,any:St.any,resolve:St.resolve,reject:St.reject,nthen:U6(o.nthen,s),gthen:U6(o.gthen,s)}:{},r&&us(s,r),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=hv(s,e,t,n);return s.ref===0&&s.finalize(),a}function fv(){return Hi.id||(Hi.id=++S0e),++Hi.awaits,Hi.echoes+=HK,Hi.id}function fu(){return!!Hi.awaits&&(--Hi.awaits==0&&(Hi.id=0),Hi.echoes=Hi.awaits*HK,!0)}function Mb(e){return Hi.echoes&&e&&e.constructor===q1?(fv(),e.then(r=>(fu(),r),r=>(fu(),ri(r)))):e}function T0e(e){++Yw,Hi.echoes&&--Hi.echoes!=0||(Hi.echoes=Hi.id=0),Y1.push(Bt),Rc(e,!0)}function I0e(){var e=Y1[Y1.length-1];Y1.pop(),Rc(e,!1)}function Rc(e,r){var t=Bt;if((r?!Hi.echoes||PE++&&e===Bt:!PE||--PE&&e===Bt)||ZK(r?T0e.bind(null,e):I0e),e!==Bt&&(Bt=e,t===vp&&(vp.env=YK()),TP)){var n=vp.env.Promise,i=e.env;Vw.then=i.nthen,n.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty(Qr,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function YK(){var e=Qr.Promise;return TP?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Qr,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Vw.then,gthen:e.prototype.then}:{}}function hv(e,r,t,n,i){var s=Bt;try{return Rc(e,!0),r(t,n,i)}finally{Rc(s,!1)}}function ZK(e){UK.call(vI,e)}function Zw(e,r,t,n){return typeof e!="function"?e:function(){var i=Bt;t&&fv(),Rc(r,!0);try{return e.apply(this,arguments)}finally{Rc(i,!1),n&&ZK(fu)}}}function U6(e,r){return function(t,n){return e.call(this,Zw(t,r),Zw(n,r))}}(""+UK).indexOf("[native code]")===-1&&(fv=fu=zr);const W6="unhandledrejection";function K6(e,r){var t;try{t=r.onuncatched(e)}catch{}if(t!==!1)try{var n,i={promise:r,reason:e};if(Qr.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(W6,!0,!0),us(n,i)):Qr.CustomEvent&&us(n=new CustomEvent(W6,{detail:i}),i),n&&Qr.dispatchEvent&&(dispatchEvent(n),!Qr.PromiseRejectionEvent&&Qr.onunhandledrejection))try{Qr.onunhandledrejection(n)}catch{}gl&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ri=St.reject;function xI(e,r,t,n){if(e.idbdb&&(e._state.openComplete||Bt.letThrough||e._vip)){var i=e._createTransaction(r,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===SP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>xI(e,r,t,n))):ri(s)}return i._promise(r,(s,o)=>Nc(()=>(Bt.trans=i,n(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ri(new Wt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ri(new Wt.DatabaseClosed);e.open().catch(zr)}return e._state.dbReadyPromise.then(()=>xI(e,r,t,n))}const q6="3.2.4",qf=String.fromCharCode(65535),EI=-1/0,Fl="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",XK="String expected.",iy=[],D_=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),A0e=D_,O0e=D_,JK=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),B_="__dbnames",NE="readonly",RE="readwrite";function wh(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}const QK={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Lb(e){return typeof e!="string"||/\./.test(e)?r=>r:r=>(r[e]===void 0&&e in r&&delete(r=_m(r))[e],r)}class C0e{_trans(r,t,n){const i=this._tx||Bt.trans,s=this.name;function o(l,u,h){if(!h.schema[s])throw new Wt.NotFound("Table "+s+" not part of transaction");return t(h.idbtrans,h)}const a=xm();try{return i&&i.db===this.db?i===Bt.trans?i._promise(r,o,n):Nc(()=>i._promise(r,o,n),{trans:i,transless:Bt.transless||Bt}):xI(this.db,r,[this.name],o)}finally{a&&Em()}}get(r,t){return r&&r.constructor===Object?this.where(r).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:r}).then(i=>this.hook.reading.fire(i))).then(t)}where(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(Ui(r))return new this.db.WhereClause(this,`[${r.join("+")}]`);const t=jn(r);if(t.length===1)return this.where(t[0]).equals(r[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&t.every(h=>u.keyPath.indexOf(h)>=0)&&u.keyPath.every(h=>t.indexOf(h)>=0))[0];if(n&&this.db._maxKey!==qf)return this.where(n.name).equals(n.keyPath.map(u=>r[u]));!n&&gl&&console.warn(`The query ${JSON.stringify(r)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,h){try{return s.cmp(u,h)===0}catch{return!1}}const[a,l]=t.reduce(([u,h],c)=>{const d=i[c],y=r[c];return[u||d,u||!d?wh(h,d&&d.multi?w=>{const b=Jl(w,c);return Ui(b)&&b.some(T=>o(y,T))}:w=>o(y,Jl(w,c))):h]},[null,null]);return a?this.where(a.name).equals(r[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(r){return this.toCollection().and(r)}count(r){return this.toCollection().count(r)}offset(r){return this.toCollection().offset(r)}limit(r){return this.toCollection().limit(r)}each(r){return this.toCollection().each(r)}toArray(r){return this.toCollection().toArray(r)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(r){return new this.db.Collection(new this.db.WhereClause(this,Ui(r)?`[${r.join("+")}]`:r))}reverse(){return this.toCollection().reverse()}mapToClass(r){this.schema.mappedClass=r;const t=n=>{if(!n)return n;const i=Object.create(r.prototype);for(var s in n)if(ro(n,s))try{i[s]=n[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),r}defineClass(){return this.mapToClass(function(r){us(this,r)})}add(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Lb(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?St.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{$a(r,i,o)}catch{}return o})}update(r,t){if(typeof r!="object"||Ui(r))return this.where(":id").equals(r).modify(t);{const n=Jl(r,this.schema.primKey.keyPath);if(n===void 0)return ri(new Wt.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?jn(t).forEach(i=>{$a(r,i,t[i])}):t(r,{value:r,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}}put(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Lb(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?St.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{$a(r,i,o)}catch{}return o})}delete(r){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[r]})).then(t=>t.numFailures?St.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"deleteRange",range:QK})).then(r=>r.numFailures?St.reject(r.failures[0]):void 0)}bulkGet(r){return this._trans("readonly",t=>this.core.getMany({keys:r,trans:t}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let h=l&&a?r.map(Lb(l)):r;return this.core.mutate({trans:o,type:"add",keys:i,values:h,wantResults:s}).then(({numFailures:c,results:d,lastResult:y,failures:w})=>{if(c===0)return s?d:y;throw new ry(`${this.name}.bulkAdd(): ${c} of ${u} operations failed`,w)})})}bulkPut(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let h=l&&a?r.map(Lb(l)):r;return this.core.mutate({trans:o,type:"put",keys:i,values:h,wantResults:s}).then(({numFailures:c,results:d,lastResult:y,failures:w})=>{if(c===0)return s?d:y;throw new ry(`${this.name}.bulkPut(): ${c} of ${u} operations failed`,w)})})}bulkDelete(r){const t=r.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:r})).then(({numFailures:n,lastResult:i,failures:s})=>{if(n===0)return i;throw new ry(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,s)})}}function sy(e){var r={},t=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return r[o].subscribe.apply(null,u),e}if(typeof o=="string")return r[o]};t.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return t;function s(o,a,l){if(typeof o!="object"){var u;a||(a=_0e),l||(l=zr);var h={subscribers:[],fire:l,subscribe:function(c){h.subscribers.indexOf(c)===-1&&(h.subscribers.push(c),h.fire=a(h.fire,c))},unsubscribe:function(c){h.subscribers=h.subscribers.filter(function(d){return d!==c}),h.fire=h.subscribers.reduce(a,l)}};return r[o]=t[o]=h,h}jn(u=o).forEach(function(c){var d=u[c];if(Ui(d))s(c,u[c][0],u[c][1]);else{if(d!=="asap")throw new Wt.InvalidArgument("Invalid event config");var y=s(c,Dy,function(){for(var w=arguments.length,b=new Array(w);w--;)b[w]=arguments[w];y.subscribers.forEach(function(T){NK(function(){T.apply(null,b)})})})}})}}function Sg(e,r){return dp(r).from({prototype:e}),r}function Ed(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function DE(e,r){e.filter=wh(e.filter,r)}function BE(e,r,t){var n=e.replayFilter;e.replayFilter=n?()=>wh(n(),r()):r,e.justLimit=t&&!n}function Z1(e,r){if(e.isPrimKey)return r.primaryKey;const t=r.getIndexByKeyPath(e.index);if(!t)throw new Wt.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return t}function V6(e,r,t){const n=Z1(e,r.schema);return r.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function Fb(e,r,t,n){const i=e.replayFilter?wh(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,d=>l.stop(d),d=>l.fail(d))){var h=l.primaryKey,c=""+h;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(h)),ro(s,c)||(s[c]=!0,r(a,l,u))}};return Promise.all([e.or._iterate(o,t),G6(V6(e,n,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return G6(V6(e,n,t),wh(e.algorithm,i),r,!e.keysOnly&&e.valueMapper)}function G6(e,r,t,n){var i=sn(n?(s,o,a)=>t(n(s),o,a):t);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();r&&!r(s,a=>o=a,a=>{s.stop(a),o=zr},a=>{s.fail(a),o=zr})||i(s.value,s,a=>o=a),o()})})}function as(e,r){try{const t=Y6(e),n=Y6(r);if(t!==n)return t==="Array"?1:n==="Array"?-1:t==="binary"?1:n==="binary"?-1:t==="string"?1:n==="string"?-1:t==="Date"?1:n!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>r?1:e<r?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(Z6(e),Z6(r));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const h=as(i[u],s[u]);if(h!==0)return h}return o===a?0:o<a?-1:1}(e,r)}}catch{}return NaN}function Y6(e){const r=typeof e;if(r!=="object")return r;if(ArrayBuffer.isView(e))return"binary";const t=hI(e);return t==="ArrayBuffer"?"binary":t}function Z6(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class P0e{_read(r,t){var n=this._ctx;return n.error?n.table._trans(null,ri.bind(null,n.error)):n.table._trans("readonly",r).then(t)}_write(r){var t=this._ctx;return t.error?t.table._trans(null,ri.bind(null,t.error)):t.table._trans("readwrite",r,"locked")}_addAlgorithm(r){var t=this._ctx;t.algorithm=wh(t.algorithm,r)}_iterate(r,t){return Fb(this._ctx,r,t,this._ctx.table.core)}clone(r){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return r&&us(n,r),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(r){var t=this._ctx;return this._read(n=>Fb(t,r,n,t.table.core))}count(r){return this._read(t=>{const n=this._ctx,i=n.table.core;if(Ed(n,!0))return i.count({trans:t,query:{index:Z1(n,i.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var s=0;return Fb(n,()=>(++s,!1),t,i).then(()=>s)}).then(r)}sortBy(r,t){const n=r.split(".").reverse(),i=n[0],s=n.length-1;function o(u,h){return h?o(u[n[h]],h-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,h){var c=o(u,s),d=o(h,s);return c<d?-a:c>d?a:0}return this.toArray(function(u){return u.sort(l)}).then(t)}toArray(r){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&Ed(n,!0)&&n.limit>0){const{valueMapper:i}=n,s=Z1(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Fb(n,s=>i.push(s),t,n.table.core).then(()=>i)}},r)}offset(r){var t=this._ctx;return r<=0||(t.offset+=r,Ed(t)?BE(t,()=>{var n=r;return(i,s)=>n===0||(n===1?(--n,!1):(s(()=>{i.advance(n),n=0}),!1))}):BE(t,()=>{var n=r;return()=>--n<0})),this}limit(r){return this._ctx.limit=Math.min(this._ctx.limit,r),BE(this._ctx,()=>{var t=r;return function(n,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(r,t){return DE(this._ctx,function(n,i,s){return!r(n.value)||(i(s),t)}),this}first(r){return this.limit(1).toArray(function(t){return t[0]}).then(r)}last(r){return this.reverse().first(r)}filter(r){var t,n;return DE(this._ctx,function(i){return r(i.value)}),t=this._ctx,n=r,t.isMatch=wh(t.isMatch,n),this}and(r){return this.filter(r)}or(r){return new this.db.WhereClause(this._ctx.table,r,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.key,i)})}eachUniqueKey(r){return this._ctx.unique="unique",this.eachKey(r)}eachPrimaryKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.primaryKey,i)})}keys(r){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.key)}).then(function(){return n}).then(r)}primaryKeys(r){var t=this._ctx;if(t.dir==="next"&&Ed(t,!0)&&t.limit>0)return this._read(i=>{var s=Z1(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(r);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.primaryKey)}).then(function(){return n}).then(r)}uniqueKeys(r){return this._ctx.unique="unique",this.keys(r)}firstKey(r){return this.limit(1).keys(function(t){return t[0]}).then(r)}lastKey(r){return this.reverse().firstKey(r)}distinct(){var r=this._ctx,t=r.index&&r.table.schema.idxByName[r.index];if(!t||!t.multi)return this;var n={};return DE(this._ctx,function(i){var s=i.primaryKey.toString(),o=ro(n,s);return n[s]=!0,!o}),this}modify(r){var t=this._ctx;return this._write(n=>{var i;if(typeof r=="function")i=r;else{var s=jn(r),o=s.length;i=function(b){for(var T=!1,x=0;x<o;++x){var A=s[x],_=r[A];Jl(b,A)!==_&&($a(b,A,_),T=!0)}return T}}const a=t.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,h=this.db._options.modifyChunkSize||200,c=[];let d=0;const y=[],w=(b,T)=>{const{failures:x,numFailures:A}=T;d+=b-A;for(let _ of jn(x))c.push(x[_])};return this.clone().primaryKeys().then(b=>{const T=x=>{const A=Math.min(h,b.length-x);return a.getMany({trans:n,keys:b.slice(x,x+A),cache:"immutable"}).then(_=>{const I=[],O=[],C=l?[]:null,g=[];for(let M=0;M<A;++M){const L=_[M],W={value:_m(L),primKey:b[x+M]};i.call(W,W.value,W)!==!1&&(W.value==null?g.push(b[x+M]):l||as(u(L),u(W.value))===0?(O.push(W.value),l&&C.push(b[x+M])):(g.push(b[x+M]),I.push(W.value)))}const R=Ed(t)&&t.limit===1/0&&(typeof r!="function"||r===ME)&&{index:t.index,range:t.range};return Promise.resolve(I.length>0&&a.mutate({trans:n,type:"add",values:I}).then(M=>{for(let L in M.failures)g.splice(parseInt(L),1);w(I.length,M)})).then(()=>(O.length>0||R&&typeof r=="object")&&a.mutate({trans:n,type:"put",keys:C,values:O,criteria:R,changeSpec:typeof r!="function"&&r}).then(M=>w(O.length,M))).then(()=>(g.length>0||R&&r===ME)&&a.mutate({trans:n,type:"delete",keys:g,criteria:R}).then(M=>w(g.length,M))).then(()=>b.length>x+A&&T(x+h))})};return T(0).then(()=>{if(c.length>0)throw new qw("Error modifying one or more objects",c,d,y);return b.length})})})}delete(){var r=this._ctx,t=r.range;return Ed(r)&&(r.isPrimKey&&!O0e||t.type===3)?this._write(n=>{const{primaryKey:i}=r.table.core.schema,s=t;return r.table.core.count({trans:n,query:{index:i,range:s}}).then(o=>r.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:h})=>{if(h)throw new qw("Could not delete some values",Object.keys(a).map(c=>a[c]),o-h);return o-h}))}):this.modify(ME)}}const ME=(e,r)=>r.value=null;function N0e(e,r){return e<r?-1:e===r?0:1}function R0e(e,r){return e>r?-1:e===r?0:1}function qs(e,r,t){var n=e instanceof tq?new e.Collection(e):e;return n._ctx.error=t?new t(r):new TypeError(r),n}function Sd(e){return new e.Collection(e,()=>eq("")).limit(0)}function D0e(e,r,t,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=r[l];if(u!==n[l])return i(e[l],t[l])<0?e.substr(0,l)+t[l]+t.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+t.substr(l+1):a>=0?e.substr(0,a)+r[a]+t.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&s==="next"?e+t.substr(e.length):o<e.length&&s==="prev"?e.substr(0,t.length):a<0?null:e.substr(0,a)+n[a]+t.substr(a+1)}function jb(e,r,t,n){var i,s,o,a,l,u,h,c=t.length;if(!t.every(b=>typeof b=="string"))return qs(e,XK);function d(b){i=function(x){return x==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),s=function(x){return x==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),o=b==="next"?N0e:R0e;var T=t.map(function(x){return{lower:s(x),upper:i(x)}}).sort(function(x,A){return o(x.lower,A.lower)});a=T.map(function(x){return x.upper}),l=T.map(function(x){return x.lower}),u=b,h=b==="next"?"":n}d("next");var y=new e.Collection(e,()=>sc(a[0],l[c-1]+n));y._ondirectionchange=function(b){d(b)};var w=0;return y._addAlgorithm(function(b,T,x){var A=b.key;if(typeof A!="string")return!1;var _=s(A);if(r(_,l,w))return!0;for(var I=null,O=w;O<c;++O){var C=D0e(A,_,a[O],l[O],o,u);C===null&&I===null?w=O+1:(I===null||o(I,C)>0)&&(I=C)}return T(I!==null?function(){b.continue(I+h)}:x),!1}),y}function sc(e,r,t,n){return{type:2,lower:e,upper:r,lowerOpen:t,upperOpen:n}}function eq(e){return{type:1,lower:e,upper:e}}let tq=class{get Collection(){return this._ctx.table.db.Collection}between(r,t,n,i){n=n!==!1,i=i===!0;try{return this._cmp(r,t)>0||this._cmp(r,t)===0&&(n||i)&&(!n||!i)?Sd(this):new this.Collection(this,()=>sc(r,t,!n,!i))}catch{return qs(this,Fl)}}equals(r){return r==null?qs(this,Fl):new this.Collection(this,()=>eq(r))}above(r){return r==null?qs(this,Fl):new this.Collection(this,()=>sc(r,void 0,!0))}aboveOrEqual(r){return r==null?qs(this,Fl):new this.Collection(this,()=>sc(r,void 0,!1))}below(r){return r==null?qs(this,Fl):new this.Collection(this,()=>sc(void 0,r,!1,!0))}belowOrEqual(r){return r==null?qs(this,Fl):new this.Collection(this,()=>sc(void 0,r))}startsWith(r){return typeof r!="string"?qs(this,XK):this.between(r,r+qf,!0,!0)}startsWithIgnoreCase(r){return r===""?this.startsWith(r):jb(this,(t,n)=>t.indexOf(n[0])===0,[r],qf)}equalsIgnoreCase(r){return jb(this,(t,n)=>t===n[0],[r],"")}anyOfIgnoreCase(){var r=Vl.apply(zd,arguments);return r.length===0?Sd(this):jb(this,(t,n)=>n.indexOf(t)!==-1,r,"")}startsWithAnyOfIgnoreCase(){var r=Vl.apply(zd,arguments);return r.length===0?Sd(this):jb(this,(t,n)=>n.some(i=>t.indexOf(i)===0),r,qf)}anyOf(){const r=Vl.apply(zd,arguments);let t=this._cmp;try{r.sort(t)}catch{return qs(this,Fl)}if(r.length===0)return Sd(this);const n=new this.Collection(this,()=>sc(r[0],r[r.length-1]));n._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,r.sort(t)};let i=0;return n._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,r[i])>0;)if(++i,i===r.length)return o(a),!1;return t(l,r[i])===0||(o(()=>{s.continue(r[i])}),!1)}),n}notEqual(r){return this.inAnyRange([[EI,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const r=Vl.apply(zd,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return qs(this,Fl)}const t=r.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[EI,i]],null);return t.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(r,t){const n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(r.length===0)return Sd(this);if(!r.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return qs(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Wt.InvalidArgument);const l=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;let h,c=i;function d(A,_){return c(A[0],_[0])}try{h=r.reduce(function(A,_){let I=0,O=A.length;for(;I<O;++I){const C=A[I];if(n(_[0],C[1])<0&&n(_[1],C[0])>0){C[0]=o(C[0],_[0]),C[1]=a(C[1],_[1]);break}}return I===O&&A.push(_),A},[]),h.sort(d)}catch{return qs(this,Fl)}let y=0;const w=u?A=>i(A,h[y][1])>0:A=>i(A,h[y][1])>=0,b=l?A=>s(A,h[y][0])>0:A=>s(A,h[y][0])>=0;let T=w;const x=new this.Collection(this,()=>sc(h[0][0],h[h.length-1][1],!l,!u));return x._ondirectionchange=A=>{A==="next"?(T=w,c=i):(T=b,c=s),h.sort(d)},x._addAlgorithm((A,_,I)=>{for(var O=A.key;T(O);)if(++y,y===h.length)return _(I),!1;return!!function(C){return!w(C)&&!b(C)}(O)||(this._cmp(O,h[y][1])===0||this._cmp(O,h[y][0])===0||_(()=>{c===i?A.continue(h[y][0]):A.continue(h[y][1])}),!1)}),x}startsWithAnyOf(){const r=Vl.apply(zd,arguments);return r.every(t=>typeof t=="string")?r.length===0?Sd(this):this.inAnyRange(r.map(t=>[t,t+qf])):qs(this,"startsWithAnyOf() only works with strings")}};function el(e){return sn(function(r){return My(r),e(r.target.error),!1})}function My(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Ly="storagemutated",vc="x-storagemutated-1",Dc=sy(null,Ly);class B0e{_lock(){return jg(!Bt.global),++this._reculock,this._reculock!==1||Bt.global||(Bt.lockOwnerFor=this),this}_unlock(){if(jg(!Bt.global),--this._reculock==0)for(Bt.global||(Bt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{hv(r[1],r[0])}catch{}}return this}_locked(){return this._reculock&&Bt.lockOwnerFor!==this}create(r){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(jg(!this.idbtrans),!r&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Wt.DatabaseClosed(n);case"MissingAPIError":throw new Wt.MissingAPI(n.message,n);default:throw new Wt.OpenFailed(n)}if(!this.active)throw new Wt.TransactionInactive;return jg(this._completion._state===null),(r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=sn(i=>{My(i),this._reject(r.error)}),r.onabort=sn(i=>{My(i),this.active&&this._reject(new Wt.Abort(r.error)),this.active=!1,this.on("abort").fire(i)}),r.oncomplete=sn(()=>{this.active=!1,this._resolve(),"mutatedParts"in r&&Dc.storagemutated.fire(r.mutatedParts)}),this}_promise(r,t,n){if(r==="readwrite"&&this.mode!=="readwrite")return ri(new Wt.ReadOnly("Transaction is readonly"));if(!this.active)return ri(new Wt.TransactionInactive);if(this._locked())return new St((s,o)=>{this._blockedFuncs.push([()=>{this._promise(r,t,n).then(s,o)},Bt])});if(n)return Nc(()=>{var s=new St((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new St((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(r){var t=this._root();const n=St.resolve(r);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new St((o,a)=>{n.then(l=>t._waitingQueue.push(sn(o.bind(null,l))),l=>t._waitingQueue.push(sn(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Wt.Abort))}table(r){const t=this._memoizedTables||(this._memoizedTables={});if(ro(t,r))return t[r];const n=this.schema[r];if(!n)throw new Wt.NotFound("Table "+r+" not part of transaction");const i=new this.db.Table(r,n,this);return i.core=this.db.core.table(r),t[r]=i,i}}function SI(e,r,t,n,i,s,o){return{name:e,keyPath:r,unique:t,multi:n,auto:i,compound:s,src:(t&&!o?"&":"")+(n?"*":"")+(i?"++":"")+rq(r)}}function rq(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function nq(e,r,t){return{name:e,primKey:r,indexes:t,mappedClass:null,idxByName:RK(t,n=>[n.name,n])}}let Fy=e=>{try{return e.only([[]]),Fy=()=>[[]],[[]]}catch{return Fy=()=>qf,qf}};function kI(e){return e==null?()=>{}:typeof e=="string"?function(r){return r.split(".").length===1?n=>n[r]:n=>Jl(n,r)}(e):r=>Jl(r,e)}function X6(e){return[].slice.call(e)}let M0e=0;function oy(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function L0e(e,r,t){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:h,lowerOpen:c,upperOpen:d}=l;return u===void 0?h===void 0?null:r.upperBound(h,!!d):h===void 0?r.lowerBound(u,!!c):r.bound(u,h,!!c,!!d)}const{schema:i,hasGetAll:s}=function(l,u){const h=X6(l.objectStoreNames);return{schema:{name:l.name,tables:h.map(c=>u.objectStore(c)).map(c=>{const{keyPath:d,autoIncrement:y}=c,w=Ui(d),b=d==null,T={},x={name:c.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:d,autoIncrement:y,unique:!0,extractKey:kI(d)},indexes:X6(c.indexNames).map(A=>c.index(A)).map(A=>{const{name:_,unique:I,multiEntry:O,keyPath:C}=A,g={name:_,compound:Ui(C),keyPath:C,unique:I,multiEntry:O,extractKey:kI(C)};return T[oy(C)]=g,g}),getIndexByKeyPath:A=>T[oy(A)]};return T[":id"]=x.primaryKey,d!=null&&(T[oy(d)]=x.primaryKey),x})},hasGetAll:h.length>0&&"getAll"in u.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=i.tables.map(l=>function(u){const h=u.name;return{name:h,schema:u,mutate:function({trans:c,type:d,keys:y,values:w,range:b}){return new Promise((T,x)=>{T=sn(T);const A=c.objectStore(h),_=A.keyPath==null,I=d==="put"||d==="add";if(!I&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:O}=y||w||{length:1};if(y&&w&&y.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const g=[],R=[];let M=0;const L=X=>{++M,My(X)};if(d==="deleteRange"){if(b.type===4)return T({numFailures:M,failures:R,results:[],lastResult:void 0});b.type===3?g.push(C=A.clear()):g.push(C=A.delete(n(b)))}else{const[X,te]=I?_?[w,y]:[w,null]:[y,null];if(I)for(let J=0;J<O;++J)g.push(C=te&&te[J]!==void 0?A[d](X[J],te[J]):A[d](X[J])),C.onerror=L;else for(let J=0;J<O;++J)g.push(C=A[d](X[J])),C.onerror=L}const W=X=>{const te=X.target.result;g.forEach((J,j)=>J.error!=null&&(R[j]=J.error)),T({numFailures:M,failures:R,results:d==="delete"?y:g.map(J=>J.result),lastResult:te})};C.onerror=X=>{L(X),W(X)},C.onsuccess=W})},getMany:({trans:c,keys:d})=>new Promise((y,w)=>{y=sn(y);const b=c.objectStore(h),T=d.length,x=new Array(T);let A,_=0,I=0;const O=g=>{const R=g.target;x[R._pos]=R.result,++I===_&&y(x)},C=el(w);for(let g=0;g<T;++g)d[g]!=null&&(A=b.get(d[g]),A._pos=g,A.onsuccess=O,A.onerror=C,++_);_===0&&y(x)}),get:({trans:c,key:d})=>new Promise((y,w)=>{y=sn(y);const b=c.objectStore(h).get(d);b.onsuccess=T=>y(T.target.result),b.onerror=el(w)}),query:function(c){return d=>new Promise((y,w)=>{y=sn(y);const{trans:b,values:T,limit:x,query:A}=d,_=x===1/0?void 0:x,{index:I,range:O}=A,C=b.objectStore(h),g=I.isPrimaryKey?C:C.index(I.name),R=n(O);if(x===0)return y({result:[]});if(c){const M=T?g.getAll(R,_):g.getAllKeys(R,_);M.onsuccess=L=>y({result:L.target.result}),M.onerror=el(w)}else{let M=0;const L=T||!("openKeyCursor"in g)?g.openCursor(R):g.openKeyCursor(R),W=[];L.onsuccess=X=>{const te=L.result;return te?(W.push(T?te.value:te.primaryKey),++M===x?y({result:W}):void te.continue()):y({result:W})},L.onerror=el(w)}})}(s),openCursor:function({trans:c,values:d,query:y,reverse:w,unique:b}){return new Promise((T,x)=>{T=sn(T);const{index:A,range:_}=y,I=c.objectStore(h),O=A.isPrimaryKey?I:I.index(A.name),C=w?b?"prevunique":"prev":b?"nextunique":"next",g=d||!("openKeyCursor"in O)?O.openCursor(n(_),C):O.openKeyCursor(n(_),C);g.onerror=el(x),g.onsuccess=sn(R=>{const M=g.result;if(!M)return void T(null);M.___id=++M0e,M.done=!1;const L=M.continue.bind(M);let W=M.continuePrimaryKey;W&&(W=W.bind(M));const X=M.advance.bind(M),te=()=>{throw new Error("Cursor not stopped")};M.trans=c,M.stop=M.continue=M.continuePrimaryKey=M.advance=()=>{throw new Error("Cursor not started")},M.fail=sn(x),M.next=function(){let J=1;return this.start(()=>J--?this.continue():this.stop()).then(()=>this)},M.start=J=>{const j=new Promise((se,Ee)=>{se=sn(se),g.onerror=el(Ee),M.fail=Ee,M.stop=me=>{M.stop=M.continue=M.continuePrimaryKey=M.advance=te,se(me)}}),Z=()=>{if(g.result)try{J()}catch(se){M.fail(se)}else M.done=!0,M.start=()=>{throw new Error("Cursor behind last entry")},M.stop()};return g.onsuccess=sn(se=>{g.onsuccess=Z,Z()}),M.continue=L,M.continuePrimaryKey=W,M.advance=X,Z(),j},T(M)},x)})},count({query:c,trans:d}){const{index:y,range:w}=c;return new Promise((b,T)=>{const x=d.objectStore(h),A=y.isPrimaryKey?x:x.index(y.name),_=n(w),I=_?A.count(_):A.count();I.onsuccess=sn(O=>b(O.target.result)),I.onerror=el(T)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Fy(r),schema:i}}function TI({_novip:e},r){const t=r.db,n=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(h,c){return c.reduce((d,{create:y})=>({...d,...y(d)}),h)}(L0e(s,o,l),i.dbcore)}}(e._middlewares,t,e._deps,r);e.core=n.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Xw({_novip:e},r,t,n){t.forEach(i=>{const s=n[i];r.forEach(o=>{const a=_P(o,i);(!a||"value"in a&&a.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?Xl(o,i,{get(){return this.table(i)},set(l){CK(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function II({_novip:e},r){r.forEach(t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]})}function F0e(e,r){return e._cfg.version-r._cfg.version}function j0e(e,r,t,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(t),s._completion.catch(n);const o=s._reject.bind(s),a=Bt.transless||Bt;Nc(()=>{Bt.trans=s,Bt.transless=a,r===0?(jn(i).forEach(l=>{LE(t,l,i[l].primKey,i[l].indexes)}),TI(e,t),St.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,h,c){const d=[],y=l._versions;let w=l._dbSchema=OI(l,l.idbdb,c),b=!1;const T=y.filter(A=>A._cfg.version>=u);function x(){return d.length?St.resolve(d.shift()(h.idbtrans)).then(x):St.resolve()}return T.forEach(A=>{d.push(()=>{const _=w,I=A._cfg.dbschema;CI(l,_,c),CI(l,I,c),w=l._dbSchema=I;const O=iq(_,I);O.add.forEach(g=>{LE(c,g[0],g[1].primKey,g[1].indexes)}),O.change.forEach(g=>{if(g.recreate)throw new Wt.Upgrade("Not yet support for changing primary key");{const R=c.objectStore(g.name);g.add.forEach(M=>AI(R,M)),g.change.forEach(M=>{R.deleteIndex(M.name),AI(R,M)}),g.del.forEach(M=>R.deleteIndex(M))}});const C=A._cfg.contentUpgrade;if(C&&A._cfg.version>u){TI(l,c),h._memoizedTables={},b=!0;let g=DK(I);O.del.forEach(W=>{g[W]=_[W]}),II(l,[l.Transaction.prototype]),Xw(l,[l.Transaction.prototype],jn(g),g),h.schema=g;const R=xP(C);let M;R&&fv();const L=St.follow(()=>{if(M=C(h),M&&R){var W=fu.bind(null,null);M.then(W,W)}});return M&&typeof M.then=="function"?St.resolve(M):L.then(()=>M)}}),d.push(_=>{(!b||!A0e)&&function(I,O){[].slice.call(O.db.objectStoreNames).forEach(C=>I[C]==null&&O.db.deleteObjectStore(C))}(A._cfg.dbschema,_),II(l,[l.Transaction.prototype]),Xw(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),h.schema=l._dbSchema})}),x().then(()=>{var A,_;_=c,jn(A=w).forEach(I=>{_.db.objectStoreNames.contains(I)||LE(_,I,A[I].primKey,A[I].indexes)})})}(e,r,s,t).catch(o)})}function iq(e,r){const t={del:[],add:[],change:[]};let n;for(n in e)r[n]||t.del.push(n);for(n in r){const i=e[n],s=r[n];if(i){const o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!D_)o.recreate=!0,t.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const h=a[u],c=l[u];h?h.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([n,s])}return t}function LE(e,r,t,n){const i=e.db.createObjectStore(r,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return n.forEach(s=>AI(i,s)),i}function AI(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function OI(e,r,t){const n={};return Kw(r.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const a=SI(rq(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let h=0;h<s.indexNames.length;++h){const c=s.index(s.indexNames[h]);o=c.keyPath;var u=SI(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}n[i]=nq(i,a,l)}),n}function CI({_novip:e},r,t){const n=t.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=t.objectStore(s);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,h=typeof u=="string"?u:"["+Kw(u).join("+")+"]";if(r[s]){const c=r[s].idxByName[h];c&&(c.name=l,delete r[s].idxByName[h],r[s].idxByName[l]=c)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Qr.WorkerGlobalScope&&Qr instanceof Qr.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class z0e{_parseStoresSpec(r,t){jn(r).forEach(n=>{if(r[n]!==null){var i=r[n].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return SI(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Ui(u),a===0)}),s=i.shift();if(s.multi)throw new Wt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Wt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Wt.Schema("Index must have a name and cannot be an empty string")}),t[n]=nq(n,s,i)}})}stores(r){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?us(this._cfg.storesSource,r):r;const n=t._versions,i={};let s={};return n.forEach(o=>{us(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,II(t,[t._allTables,t,t.Transaction.prototype]),Xw(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],jn(s),s),t._storeNames=jn(s),this}upgrade(r){return this._cfg.contentUpgrade=kP(this._cfg.contentUpgrade||zr,r),this}}function OP(e,r){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new Ql(B_,{addons:[],indexedDB:e,IDBKeyRange:r}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function CP(e){return e&&typeof e.databases=="function"}function PI(e){return Nc(function(){return Bt.letThrough=!0,e()})}function H0e(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(r){var t=function(){return indexedDB.databases().finally(r)};e=setInterval(t,100),t()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function U0e(e){const r=e._state,{indexedDB:t}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?ri(r.dbOpenError):e);gl&&(r.openCanceller._stackHolder=Rh()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const n=r.openCanceller;function i(){if(r.openCanceller!==n)throw new Wt.DatabaseClosed("db.open() was cancelled")}let s=r.dbReadyResolve,o=null,a=!1;return St.race([n,(typeof navigator>"u"?St.resolve():H0e()).then(()=>new St((l,u)=>{if(i(),!t)throw new Wt.MissingAPI;const h=e.name,c=r.autoSchema?t.open(h):t.open(h,Math.round(10*e.verno));if(!c)throw new Wt.MissingAPI;c.onerror=el(u),c.onblocked=sn(e._fireOnBlocked),c.onupgradeneeded=sn(d=>{if(o=c.transaction,r.autoSchema&&!e._options.allowEmptyDB){c.onerror=My,o.abort(),c.result.close();const w=t.deleteDatabase(h);w.onsuccess=w.onerror=sn(()=>{u(new Wt.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=el(u);var y=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=y<1,e._novip.idbdb=c.result,j0e(e,y/10,o,u)}},u),c.onsuccess=sn(()=>{o=null;const d=e._novip.idbdb=c.result,y=Kw(d.objectStoreNames);if(y.length>0)try{const b=d.transaction((w=y).length===1?w[0]:w,"readonly");r.autoSchema?function({_novip:T},x,A){T.verno=x.version/10;const _=T._dbSchema=OI(0,x,A);T._storeNames=Kw(x.objectStoreNames,0),Xw(T,[T._allTables],jn(_),_)}(e,d,b):(CI(e,e._dbSchema,b),function(T,x){const A=iq(OI(0,T.idbdb,x),T._dbSchema);return!(A.add.length||A.change.some(_=>_.add.length||_.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),TI(e,b)}catch{}var w;iy.push(e),d.onversionchange=sn(b=>{r.vcFired=!0,e.on("versionchange").fire(b)}),d.onclose=sn(b=>{e.on("close").fire(b)}),a&&function({indexedDB:b,IDBKeyRange:T},x){!CP(b)&&x!==B_&&OP(b,T).put({name:x}).catch(zr)}(e._deps,h),l()},u)}))]).then(()=>(i(),r.onReadyBeingFired=[],St.resolve(PI(()=>e.on.ready.fire(e.vip))).then(function l(){if(r.onReadyBeingFired.length>0){let u=r.onReadyBeingFired.reduce(kP,zr);return r.onReadyBeingFired=[],St.resolve(PI(()=>u(e.vip))).then(l)}}))).finally(()=>{r.onReadyBeingFired=null,r.isBeingOpened=!1}).then(()=>e).catch(l=>{r.dbOpenError=l;try{o&&o.abort()}catch{}return n===r.openCanceller&&e._close(),ri(l)}).finally(()=>{r.openComplete=!0,s()})}function NI(e){var r=s=>e.next(s),t=i(r),n=i(s=>e.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(t,n):Ui(l)?Promise.all(l).then(t,n):t(l)}}return i(r)()}function W0e(e,r,t){var n=arguments.length;if(n<2)throw new Wt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return t=i.pop(),[e,BK(i),t]}function sq(e,r,t,n,i){return St.resolve().then(()=>{const s=Bt.transless||Bt,o=e._createTransaction(r,t,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===SP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>sq(e,r,t,null,i))):ri(c)}const l=xP(i);let u;l&&fv();const h=St.follow(()=>{if(u=i.call(o,o),u)if(l){var c=fu.bind(null,null);u.then(c,c)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=NI(u))},a);return(u&&typeof u.then=="function"?St.resolve(u).then(c=>o.active?c:ri(new Wt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>u)).then(c=>(n&&o._resolve(),o._completion.then(()=>c))).catch(c=>(o._reject(c),ri(c)))})}function zb(e,r,t){const n=Ui(e)?e.slice():[e];for(let i=0;i<t;++i)n.push(r);return n}const K0e={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(r){const t=e.table(r),{schema:n}=t,i={},s=[];function o(h,c,d){const y=oy(h),w=i[y]=i[y]||[],b=h==null?0:typeof h=="string"?1:h.length,T=c>0,x={...d,isVirtual:T,keyTail:c,keyLength:b,extractKey:kI(h),unique:!T&&d.unique};return w.push(x),x.isPrimaryKey||s.push(x),b>1&&o(b===2?h[0]:h.slice(0,b-1),c+1,d),w.sort((A,_)=>A.keyTail-_.keyTail),x}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const h of n.indexes)o(h.keyPath,0,h);function l(h){const c=h.query.index;return c.isVirtual?{...h,query:{index:c,range:(d=h.query.range,y=c.keyTail,{type:d.type===1?2:d.type,lower:zb(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:zb(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}:h;var d,y}return{...t,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(h){const c=i[oy(h)];return c&&c[0]}},count:h=>t.count(l(h)),query:h=>t.query(l(h)),openCursor(h){const{keyTail:c,isVirtual:d,keyLength:y}=h.query.index;return d?t.openCursor(l(h)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(x){x!=null?b.continue(zb(x,h.reverse?e.MAX_KEY:e.MIN_KEY,c)):h.unique?b.continue(b.key.slice(0,y).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,c)):b.continue()}},continuePrimaryKey:{value(x,A){b.continuePrimaryKey(zb(x,e.MAX_KEY,c),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const x=b.key;return y===1?x[0]:x.slice(0,y)}},value:{get:()=>b.value}})}(w)):t.openCursor(h)}}}}}};function PP(e,r,t,n){return t=t||{},n=n||"",jn(e).forEach(i=>{if(ro(r,i)){var s=e[i],o=r[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=hI(s);a!==hI(o)?t[n+i]=r[i]:a==="Object"?PP(s,o,t,n+i+"."):s!==o&&(t[n+i]=r[i])}else s!==o&&(t[n+i]=r[i])}else t[n+i]=void 0}),jn(r).forEach(i=>{ro(e,i)||(t[n+i]=r[i])}),t}const q0e={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(r){const t=e.table(r),{primaryKey:n}=t.schema;return{...t,mutate(s){const o=Bt.trans,{deleting:a,creating:l,updating:u}=o.table(r).hook;switch(s.type){case"add":if(l.fire===zr)break;return o._promise("readwrite",()=>h(s),!0);case"put":if(l.fire===zr&&u.fire===zr)break;return o._promise("readwrite",()=>h(s),!0);case"delete":if(a.fire===zr)break;return o._promise("readwrite",()=>h(s),!0);case"deleteRange":if(a.fire===zr)break;return o._promise("readwrite",()=>function(d){return c(d.trans,d.range,1e4)}(s),!0)}return t.mutate(s);function h(d){const y=Bt.trans,w=d.keys||function(b,T){return T.type==="delete"?T.keys:T.keys||T.values.map(b.extractKey)}(n,d);if(!w)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:w}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(b,T,x){return T.type==="add"?Promise.resolve([]):b.getMany({trans:T.trans,keys:x,cache:"immutable"})}(t,d,w).then(b=>{const T=w.map((x,A)=>{const _=b[A],I={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(I,x,_,y);else if(d.type==="add"||_===void 0){const O=l.fire.call(I,x,d.values[A],y);x==null&&O!=null&&(x=O,d.keys[A]=x,n.outbound||$a(d.values[A],n.keyPath,x))}else{const O=PP(_,d.values[A]),C=u.fire.call(I,O,x,_,y);if(C){const g=d.values[A];Object.keys(C).forEach(R=>{ro(g,R)?g[R]=C[R]:$a(g,R,C[R])})}}return I});return t.mutate(d).then(({failures:x,results:A,numFailures:_,lastResult:I})=>{for(let O=0;O<w.length;++O){const C=A?A[O]:w[O],g=T[O];C==null?g.onerror&&g.onerror(x[O]):g.onsuccess&&g.onsuccess(d.type==="put"&&b[O]?d.values[O]:C)}return{failures:x,results:A,numFailures:_,lastResult:I}}).catch(x=>(T.forEach(A=>A.onerror&&A.onerror(x)),Promise.reject(x)))})}function c(d,y,w){return t.query({trans:d,values:!1,query:{index:n,range:y},limit:w}).then(({result:b})=>h({type:"delete",keys:b,trans:d}).then(T=>T.numFailures>0?Promise.reject(T.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:c(d,{...y,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function oq(e,r,t){try{if(!r||r.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<r.keys.length&&s<e.length;++i)as(r.keys[i],e[s])===0&&(n.push(t?_m(r.values[i]):r.values[i]),++s);return n.length===e.length?n:null}catch{return null}}const V0e={stack:"dbcore",level:-1,create:e=>({table:r=>{const t=e.table(r);return{...t,getMany:n=>{if(!n.cache)return t.getMany(n);const i=oq(n.keys,n.trans._cache,n.cache==="clone");return i?St.resolve(i):t.getMany(n).then(s=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?_m(s):s},s))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),t.mutate(n))}}})};function NP(e){return!("from"in e)}const Hl=function(e,r){if(!this){const t=new Hl;return e&&"d"in e&&us(t,e),t}us(this,arguments.length?{d:1,from:e,to:arguments.length>1?r:e}:{d:0})};function jy(e,r,t){const n=as(r,t);if(isNaN(n))return;if(n>0)throw RangeError();if(NP(e))return us(e,{from:r,to:t,d:1});const i=e.l,s=e.r;if(as(t,e.from)<0)return i?jy(i,r,t):e.l={from:r,to:t,d:1,l:null,r:null},J6(e);if(as(r,e.to)>0)return s?jy(s,r,t):e.r={from:r,to:t,d:1,l:null,r:null},J6(e);as(r,e.from)<0&&(e.from=r,e.l=null,e.d=s?s.d+1:1),as(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Jw(e,i),s&&o&&Jw(e,s)}function Jw(e,r){NP(r)||function t(n,{from:i,to:s,l:o,r:a}){jy(n,i,s),o&&t(n,o),a&&t(n,a)}(e,r)}function G0e(e,r){const t=RI(r);let n=t.next();if(n.done)return!1;let i=n.value;const s=RI(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(as(a.from,i.to)<=0&&as(a.to,i.from)>=0)return!0;as(i.from,a.from)<0?i=(n=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function RI(e){let r=NP(e)?null:{s:0,n:e};return{next(t){const n=arguments.length>0;for(;r;)switch(r.s){case 0:if(r.s=1,n)for(;r.n.l&&as(t,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!n||as(t,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function J6(e){var r,t;const n=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],o[i]=a[s],e[s]=o,o.d=Q6(o)}e.d=Q6(e)}function Q6({r:e,l:r}){return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}Mp(Hl.prototype,{add(e){return Jw(this,e),this},addKey(e){return jy(this,e,e),this},addKeys(e){return e.forEach(r=>jy(this,r,r)),this},[dI](){return RI(this)}});const Y0e={stack:"dbcore",level:0,create:e=>{const r=e.schema.name,t=new Hl(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:d=>{const y=d.trans,w=y.mutatedParts||(y.mutatedParts={}),b=C=>{const g=`idb://${r}/${n}/${C}`;return w[g]||(w[g]=new Hl)},T=b(""),x=b(":dels"),{type:A}=d;let[_,I]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const O=d.trans._cache;return i.mutate(d).then(C=>{if(Ui(_)){A!=="delete"&&(_=C.results),T.addKeys(_);const g=oq(_,O);g||A==="add"||x.addKeys(_),(g||I)&&function(R,M,L,W){function X(te){const J=R(te.name||"");function j(se){return se!=null?te.extractKey(se):null}const Z=se=>te.multiEntry&&Ui(se)?se.forEach(Ee=>J.addKey(Ee)):J.addKey(se);(L||W).forEach((se,Ee)=>{const me=L&&j(L[Ee]),Pe=W&&j(W[Ee]);as(me,Pe)!==0&&(me!=null&&Z(me),Pe!=null&&Z(Pe))})}M.indexes.forEach(X)}(b,s,g,I)}else if(_){const g={from:_.lower,to:_.upper};x.add(g),T.add(g)}else T.add(t),x.add(t),s.indexes.forEach(g=>b(g.name).add(t));return C})}},h=({query:{index:d,range:y}})=>{var w,b;return[d,new Hl((w=y.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=y.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},c={get:d=>[o,new Hl(d.key)],getMany:d=>[o,new Hl().addKeys(d.keys)],count:h,query:h,openCursor:h};return jn(c).forEach(d=>{u[d]=function(y){const{subscr:w}=Bt;if(w){const b=I=>{const O=`idb://${r}/${n}/${I}`;return w[O]||(w[O]=new Hl)},T=b(""),x=b(":dels"),[A,_]=c[d](y);if(b(A.name||"").add(_),!A.isPrimaryKey){if(d!=="count"){const I=d==="query"&&l&&y.values&&i.query({...y,values:!1});return i[d].apply(this,arguments).then(O=>{if(d==="query"){if(l&&y.values)return I.then(({result:g})=>(T.addKeys(g),O));const C=y.values?O.result.map(a):O.result;y.values?T.addKeys(C):x.addKeys(C)}else if(d==="openCursor"){const C=O,g=y.values;return C&&Object.create(C,{key:{get:()=>(x.addKey(C.primaryKey),C.key)},primaryKey:{get(){const R=C.primaryKey;return x.addKey(R),R}},value:{get:()=>(g&&T.addKey(C.primaryKey),C.value)}})}return O})}x.add(t)}}return i[d].apply(this,arguments)}}),u}}}};class Ql{constructor(r,t){this._middlewares={},this.verno=0;const n=Ql.dependencies;this._options=t={addons:Ql.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:zr,dbReadyPromise:null,cancelOpen:zr,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new St(a=>{s.dbReadyResolve=a}),s.openCanceller=new St((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=r,this.on=sy(this,"populate","blocked","versionchange","close",{ready:[kP,zr]}),this.on.ready.subscribe=PK(this.on.ready.subscribe,a=>(l,u)=>{Ql.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||St.resolve().then(l),u&&a(l);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(l),u&&a(l);else{a(l);const c=this;u||a(function d(){c.on.ready.unsubscribe(l),c.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,Sg(P0e.prototype,function(a,l){this.db=o;let u=QK,h=null;if(l)try{u=l()}catch(w){h=w}const c=a._ctx,d=c.table,y=d.hook.reading.fire;this._ctx={table:d,index:c.index,isPrimKey:!c.index||d.schema.primKey.keyPath&&c.index===d.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:c.or,valueMapper:y!==Dy?y:null}})),this.Table=function(a){return Sg(C0e.prototype,function(l,u,h){this.db=a,this._tx=h,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:sy(null,{creating:[b0e,zr],reading:[m0e,Dy],updating:[$0e,zr],deleting:[w0e,zr]})})}(this),this.Transaction=function(a){return Sg(B0e.prototype,function(l,u,h,c,d){this.db=a,this.mode=l,this.storeNames=u,this.schema=h,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=sy(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new St((y,w)=>{this._resolve=y,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},y=>{var w=this.active;return this.active=!1,this.on.error.fire(y),this.parent?this.parent._reject(y):w&&this.idbtrans&&this.idbtrans.abort(),ri(y)})})}(this),this.Version=function(a){return Sg(z0e.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Sg(tq.prototype,function(l,u,h){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:h};const c=a._deps.indexedDB;if(!c)throw new Wt.MissingAPI;this._cmp=this._ascending=c.cmp.bind(c),this._descending=(d,y)=>c.cmp(y,d),this._max=(d,y)=>c.cmp(d,y)>0?d:y,this._min=(d,y)=>c.cmp(d,y)<0?d:y,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Fy(t.IDBKeyRange),this._createTransaction=(a,l,u,h)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,h),this._fireOnBlocked=a=>{this.on("blocked").fire(a),iy.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(K0e),this.use(q0e),this.use(Y0e),this.use(V0e),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(r){if(isNaN(r)||r<.1)throw new Wt.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new Wt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);const t=this._versions;var n=t.filter(i=>i._cfg.version===r)[0];return n||(n=new this.Version(r),t.push(n),t.sort(F0e),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(r){return this.idbdb&&(this._state.openComplete||Bt.letThrough||this._vip)?r():new St((t,n)=>{if(this._state.openComplete)return n(new Wt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new Wt.DatabaseClosed);this.open().catch(zr)}this._state.dbReadyPromise.then(t,n)}).then(r)}use({stack:r,create:t,level:n,name:i}){i&&this.unuse({stack:r,name:i});const s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:t,level:n??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:r,name:t,create:n}){return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(i=>n?i.create!==n:!!t&&i.name!==t)),this}open(){return U0e(this)}_close(){const r=this._state,t=iy.indexOf(this);if(t>=0&&iy.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}r.dbReadyPromise=new St(n=>{r.dbReadyResolve=n}),r.openCanceller=new St((n,i)=>{r.cancelOpen=i})}close(){this._close();const r=this._state;this._options.autoOpen=!1,r.dbOpenError=new Wt.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError)}delete(){const r=arguments.length>0,t=this._state;return new St((n,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=sn(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!CP(a)&&u!==B_&&OP(a,l).delete(u).catch(zr)})(this._deps,this.name),n()}),o.onerror=el(i),o.onblocked=this._fireOnBlocked};if(r)throw new Wt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return jn(this._allTables).map(r=>this._allTables[r])}transaction(){const r=W0e.apply(this,arguments);return this._transaction.apply(this,r)}_transaction(r,t,n){let i=Bt.trans;i&&i.db===this&&r.indexOf("!")===-1||(i=null);const s=r.indexOf("?")!==-1;let o,a;r=r.replace("!","").replace("?","");try{if(a=t.map(u=>{var h=u instanceof this.Table?u.name:u;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),r=="r"||r===NE)o=NE;else{if(r!="rw"&&r!=RE)throw new Wt.InvalidArgument("Invalid transaction mode: "+r);o=RE}if(i){if(i.mode===NE&&o===RE){if(!s)throw new Wt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new Wt.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(h,c)=>{c(u)}):ri(u)}const l=sq.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Bt.trans?hv(Bt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(r){if(!ro(this._allTables,r))throw new Wt.InvalidTable(`Table ${r} does not exist`);return this._allTables[r]}}const Z0e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class X0e{constructor(r){this._subscribe=r}subscribe(r,t,n){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:t,complete:n})}[Z0e](){return this}}function aq(e,r){return jn(r).forEach(t=>{Jw(e[t]||(e[t]=new Hl),r[t])}),e}function J0e(e){let r,t=!1;const n=new X0e(i=>{const s=xP(e);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,Dc.storagemutated.unsubscribe(y)}};i.start&&i.start(u);let h=!1,c=!1;function d(){return jn(l).some(b=>a[b]&&G0e(a[b],l[b]))}const y=b=>{aq(a,b),d()&&w()},w=()=>{if(h||o)return;a={};const b={},T=function(x){s&&fv();const A=()=>Nc(e,{subscr:x,trans:null}),_=Bt.trans?hv(Bt.transless,A):A();return s&&_.then(fu,fu),_}(b);c||(Dc(Ly,y),c=!0),h=!0,Promise.resolve(T).then(x=>{t=!0,r=x,h=!1,o||(d()?w():(a={},l=b,i.next&&i.next(x)))},x=>{h=!1,t=!1,i.error&&i.error(x),u.unsubscribe()})};return w(),u});return n.hasValue=()=>t,n.getValue=()=>r,n}let DI;try{DI={indexedDB:Qr.indexedDB||Qr.mozIndexedDB||Qr.webkitIndexedDB||Qr.msIndexedDB,IDBKeyRange:Qr.IDBKeyRange||Qr.webkitIDBKeyRange}}catch{DI={indexedDB:null,IDBKeyRange:null}}const _f=Ql;function X1(e){let r=Yl;try{Yl=!0,Dc.storagemutated.fire(e)}finally{Yl=r}}Mp(_f,{...K1,delete:e=>new _f(e,{addons:[]}).delete(),exists:e=>new _f(e,{addons:[]}).open().then(r=>(r.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:r,IDBKeyRange:t}){return CP(r)?Promise.resolve(r.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==B_)):OP(r,t).toCollection().primaryKeys()}(_f.dependencies).then(e)}catch{return ri(new Wt.MissingAPI)}},defineClass:()=>function(e){us(this,e)},ignoreTransaction:e=>Bt.trans?hv(Bt.transless,e):e(),vip:PI,async:function(e){return function(){try{var r=NI(e.apply(this,arguments));return r&&typeof r.then=="function"?r:St.resolve(r)}catch(t){return ri(t)}}},spawn:function(e,r,t){try{var n=NI(e.apply(t,r||[]));return n&&typeof n.then=="function"?n:St.resolve(n)}catch(i){return ri(i)}},currentTransaction:{get:()=>Bt.trans||null},waitFor:function(e,r){const t=St.resolve(typeof e=="function"?_f.ignoreTransaction(e):e).timeout(r||6e4);return Bt.trans?Bt.trans.waitFor(t):t},Promise:St,debug:{get:()=>gl,set:e=>{LK(e,e==="dexie"?()=>!0:JK)}},derive:dp,extend:us,props:Mp,override:PK,Events:sy,on:Dc,liveQuery:J0e,extendObservabilitySet:aq,getByKeyPath:Jl,setByKeyPath:$a,delByKeyPath:function(e,r){typeof r=="string"?$a(e,r,void 0):"length"in r&&[].map.call(r,function(t){$a(e,t,void 0)})},shallowClone:DK,deepClone:_m,getObjectDiff:PP,cmp:as,asap:NK,minKey:EI,addons:[],connections:iy,errnames:SP,dependencies:DI,semVer:q6,version:q6.split(".").map(e=>parseInt(e)).reduce((e,r,t)=>e+r/Math.pow(10,2*t))}),_f.maxKey=Fy(_f.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Dc(Ly,e=>{if(!Yl){let r;D_?(r=document.createEvent("CustomEvent"),r.initCustomEvent(vc,!0,!0,e)):r=new CustomEvent(vc,{detail:e}),Yl=!0,dispatchEvent(r),Yl=!1}}),addEventListener(vc,({detail:e})=>{Yl||X1(e)}));let Yl=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(vc);typeof e.unref=="function"&&e.unref(),Dc(Ly,r=>{Yl||e.postMessage(r)}),e.onmessage=r=>{r.data&&X1(r.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Dc(Ly,r=>{try{Yl||(typeof localStorage<"u"&&localStorage.setItem(vc,JSON.stringify({trig:Math.random(),changedParts:r})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:vc,changedParts:r})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",r=>{if(r.key===vc){const t=JSON.parse(r.newValue);t&&X1(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:r}){r&&r.type===vc&&X1(r.changedParts)})}St.rejectionMapper=function(e,r){if(!e||e instanceof pp||e instanceof TypeError||e instanceof SyntaxError||!e.name||!H6[e.name])return e;var t=new H6[e.name](r||e.message,e);return"stack"in e&&Xl(t,"stack",{get:function(){return this.inner.stack}}),t},LK(gl,JK);class Q0e extends Ql{constructor(){super("iris");le(this,"events");this.version(2).stores({events:"id, pubkey, kind, created_at"})}}const oa=new Q0e,il={db:oa,subscribedEventIds:new Set,subscribedAuthors:new Set,seenFilters:new Set,saveQueue:[],clear(){return oa.delete()},save:Cn.throttle(e=>{const r=e.saveQueue;e.saveQueue=[],oa.events.bulkAdd(r).catch(()=>{})},500),saveEvent(e){this.saveQueue.push(e),this.save(this)},init(){const e=ye.getPubKey();oa.events.where({pubkey:e}).each(r=>{Fe.handle(r,!1,!1)}).then(()=>oa.events.where({kind:3}).each(r=>{Fe.handle(r,!1,!1)})).then(()=>oa.events.where({kind:0}).each(r=>{Fe.handle(r,!1,!1)})).then(()=>oa.events.where({kind:4}).each(r=>{Fe.handle(r,!1,!1)})).then(()=>oa.events.orderBy("created_at").reverse().filter(r=>r.kind===1).limit(5e3).each(r=>{Fe.handle(r,!1,!1)}))},subscribeToAuthors:Cn.throttle(e=>{const r=Array.from(il.subscribedAuthors.values());il.subscribedAuthors.clear(),oa.events.where("pubkey").anyOf(r).limit(e||1e3).each(t=>{Fe.handle(t,!1,!1)})},1e3),subscribeToEventIds:Cn.throttle(()=>{const e=Array.from(il.subscribedEventIds.values());il.subscribedEventIds.clear(),oa.events.where("id").anyOf(e).each(r=>{Fe.handle(r,!1,!1)})},1e3),subscribe(e){var t,n;if(!e||e["#e"]||e["#p"])return;let r=oa.events;if((t=e.ids)!=null&&t.length){e.ids.forEach(i=>{this.subscribedEventIds.add(i)}),this.subscribeToEventIds();return}else if((n=e.authors)!=null&&n.length){e.authors.forEach(i=>{this.subscribedAuthors.add(i)}),this.subscribeToAuthors();return}else{const i=JSON.stringify(e);if(this.seenFilters.has(i))return;this.seenFilters.add(i),e.kinds&&(r=r.where?r.where("kind").anyOf(e.kinds):r.and(s=>{var o;return(o=e.kinds)==null?void 0:o.includes(s.kind)})),e.limit&&(r=r.limit(e.limit))}r.each(i=>{Fe.handle(i,!1,!1)})}};let kg={};const FE=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi","wss://soloco.nl"],eB=["wss://relay.nostr.band"],on={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:FE,init(){this.relays=new Map(FE.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(eB.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(r=>r.enabled).map(r=>r.url)},getSubscriptionIdForName(e){return Ir.arrayToHex(__(e)).slice(0,8)},getUrlsFromFollowEvent(e){const r=new Map;if(e.content)try{const t=JSON.parse(e.content);for(const n in t)try{const i=new URL(n).toString().replace(/\/$/,"");r.set(i,t[n])}catch{console.log("invalid relay url",n,e)}}catch{console.log("failed to parse relay urls",e)}return r},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return Fe.db.find({kind:3}).forEach(t=>{if(t.content)try{const n=JSON.parse(t.content);for(const i in n)try{const s=new URL(i).toString().replace(/\/$/,""),o=e.get(s)||0;e.set(s,o+1)}catch{console.log("invalid relay url",i,t)}}catch{console.log("failed to parse relay urls",t)}}),Array.from(e.entries()).filter(([t])=>!this.relays.has(t)).sort((t,n)=>n[1]-t[1]).map(t=>({url:t[0],users:t[1]}))},getConnectedRelayCount:function(){var r;let e=0;for(const t of this.relays.keys())((r=Ut.relayPool.relayByUrl.get(t))==null?void 0:r.status)===1&&e++;return e},getUserRelays(e){let r=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const t=Fe.db.findOne({kind:3,pubkey:e});return t&&(r=this.getUrlsFromFollowEvent(t)),Array.from(r.entries())},manage:function(){De.get("relays").put({}),De.get("relays").on(e=>{if(e){kg=e;for(const r of this.relays.keys())if(kg[r]===null)this.remove(r);else if(kg[r]&&kg[r].enabled===!1){const t=this.relays.get(r);t&&(t.enabled=!1,this.relays.set(r,t),Ut.relayPool.removeRelay(r))}for(const[r,t]of Object.entries(kg))if(t)this.relays.has(r)||(this.relays.set(r,{url:r,enabled:!!t.enabled}),t.enabled&&Ut.relayPool.addOrGetRelay(r));else{this.relays.has(r)&&this.remove(r);continue}}})},add(e){if(this.relays.has(e))return;const r={enabled:!0,url:e};this.relays.set(e,r),Ut.relayPool.addOrGetRelay(e)},remove(e){try{Ut.relayPool.removeRelay(e)}catch(r){console.log("error closing relay",r)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),Ut.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),Ut.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const r of FE)this.add(r);this.saveToContacts();for(const r of eB)this.relays.has(r)||this.add(r);const e={};for(const[r,t]of this.relays.entries())e[r]={enabled:t.enabled,url:r};De.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const r=Fe.db.findOne({kind:3,pubkey:ye.getPubKey()}),n={kind:3,content:JSON.stringify(e),tags:(r==null?void 0:r.tags)||[]};Fe.publish(n)},updateLastSeen:Cn.throttle(e=>{const r=Math.floor(Date.now()/1e3);De.get("relays").get(e).get("lastSeen").put(r)},5*1e3,{leading:!0}),groupFilter(e){var r;return e.authors&&((r=e.kinds)==null?void 0:r.length)===1&&e.kinds[0]===0?(e.authors.forEach(t=>{this.subscribedProfiles.add(t)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(Ut.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(t=>{this.subscribedEventTags.add(t)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&on.init();const{authenticate:ebe}=ZU;let tB=0,Qw={logSubscriptions:!1,indexed03:!0};const xc=new a0e(on.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>Fe.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0});xc.onnotice((e,r)=>{console.log("notice",r," from relay ",e)});const tbe=(e,r)=>new URL(e).host===new URL(r).host;xc.onauth(async(e,r)=>{if(on.enabledRelays().some(t=>tbe(t,e.url)))try{await ebe({relay:e,challenge:r,sign:Fe.sign})}catch(t){console.log("error: authenticate to relay:",t),xc.removeRelay(e.url),on.disable(e.url)}});De.get("dev").on(e=>{Qw=e,xc.logSubscriptions=Qw.logSubscriptions});let lq=0;De.get("lastOpened").once(e=>{lq=e,De.get("lastOpened").put(Math.floor(Date.now()/1e3))});let rB=Date.now();const uq=()=>{Date.now()-rB>60*1e3*1&&(rB=Date.now(),xc.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&uq()});document.addEventListener("online",()=>{uq()});const rbe={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:xc,log:Cn.throttle((...e)=>{console.log(...e)},1e3),subscribe:function(e,r,t=!1,n=!0){let i;if(r&&(i=tB++,this.subscriptions.set(++tB,{filter:e,callback:r})),this.log("subscriptions",this.subscriptions.size,"subscribedEventIds",this.subscribedEventIds.size,"subscribedAuthors",this.subscribedAuthors.size),e.authors&&e.authors.forEach(o=>{this.subscribedAuthors.add(o)}),r&&Fe.find(e,r),e.ids){if(e.ids=e.ids.filter(o=>!Fe.seen.has(o)),!e.ids.length)return()=>{};e.ids.forEach(o=>{this.subscribedEventIds.add(o)})}Qw.indexedDbLoad!==!1&&il.subscribe(e);const s=this.subscribeRelayPool(e,t,n);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){const r=Array.from(on.enabledRelays());xc.publish(e,r)},handle(e){var r;for(const t of this.subscriptions.values())t.filter&&W3(t.filter,e)&&((r=t.callback)==null||r.call(t,e))},subscribeRelayPool(e,r,t){var s,o;let n;e.keywords?n=Array.from(on.searchRelays.keys()):(t||((s=e.authors)==null?void 0:s.length)!==1)&&(n=on.enabledRelays()),Qw.indexed03!==!1&&((o=e.kinds)!=null&&o.every(a=>a===0||a===3))&&(n=["wss://us.rbr.bio","wss://eu.rbr.bio"]),r&&(e.since=lq);const i=on.enabledRelays();return xc.subscribe([e],n,(a,l,u)=>{setTimeout(()=>{Fe.handle(a),u&&Fe.handleEventMetadata({url:u,event:a})},0)},t?100:0,void 0,{defaultRelays:i})}},Ut=rbe,Oo=class Oo{static id(r){if((r.startsWith("npub")||r.startsWith("note"))&&(r=ye.toNostrHexAddress(r)||"",!r))throw new Error("addFollower: invalid pubKey "+r);const t=Oo.pubKeyToUserId.get(r);if(t)return t;const n=Oo.currentUserId++;return Oo.pubKeyToUserId.set(r,n),Oo.UserIdToPubKey.set(n,r),n}static pub(r){const t=Oo.UserIdToPubKey.get(r);if(!t)throw new Error("pub: invalid id "+r);return t}static bech32(r){return ye.toNostrBech32Address(Oo.pub(r),"npub")||""}static has(r){return Oo.pubKeyToUserId.has(r)}};le(Oo,"pubKeyToUserId",new Map),le(Oo,"UserIdToPubKey",new Map),le(Oo,"currentUserId",0);let Bc=Oo;const Sn=Bc.pub,BI=Bc.bech32,pt=Bc.id;function hu(e){return Array.isArray?Array.isArray(e):hq(e)==="[object Array]"}const nbe=1/0;function ibe(e){if(typeof e=="string")return e;let r=e+"";return r=="0"&&1/e==-nbe?"-0":r}function sbe(e){return e==null?"":ibe(e)}function sl(e){return typeof e=="string"}function cq(e){return typeof e=="number"}function obe(e){return e===!0||e===!1||abe(e)&&hq(e)=="[object Boolean]"}function fq(e){return typeof e=="object"}function abe(e){return fq(e)&&e!==null}function Qs(e){return e!=null}function jE(e){return!e.trim().length}function hq(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const lbe="Incorrect 'index' type",ube=e=>`Invalid value for key ${e}`,cbe=e=>`Pattern length exceeds max of ${e}.`,fbe=e=>`Missing ${e} property in key`,hbe=e=>`Property 'weight' in key '${e}' must be a positive integer`,nB=Object.prototype.hasOwnProperty;class dbe{constructor(r){this._keys=[],this._keyMap={};let t=0;r.forEach(n=>{let i=dq(n);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(r){return this._keyMap[r]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dq(e){let r=null,t=null,n=null,i=1,s=null;if(sl(e)||hu(e))n=e,r=iB(e),t=MI(e);else{if(!nB.call(e,"name"))throw new Error(fbe("name"));const o=e.name;if(n=o,nB.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(hbe(o));r=iB(o),t=MI(o),s=e.getFn}return{path:r,id:t,weight:i,src:n,getFn:s}}function iB(e){return hu(e)?e:e.split(".")}function MI(e){return hu(e)?e.join("."):e}function pbe(e,r){let t=[],n=!1;const i=(s,o,a)=>{if(Qs(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Qs(u))return;if(a===o.length-1&&(sl(u)||cq(u)||obe(u)))t.push(sbe(u));else if(hu(u)){n=!0;for(let h=0,c=u.length;h<c;h+=1)i(u[h],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,sl(r)?r.split("."):r,0),n?t:t[0]}const vbe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},gbe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,r)=>e.score===r.score?e.idx<r.idx?-1:1:e.score<r.score?-1:1},ybe={location:0,threshold:.6,distance:100},mbe={useExtendedSearch:!1,getFn:pbe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Gt={...gbe,...vbe,...ybe,...mbe};const bbe=/[^ ]+/g;function wbe(e=1,r=3){const t=new Map,n=Math.pow(10,r);return{get(i){const s=i.match(bbe).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class RP{constructor({getFn:r=Gt.getFn,fieldNormWeight:t=Gt.fieldNormWeight}={}){this.norm=wbe(t,3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}setSources(r=[]){this.docs=r}setIndexRecords(r=[]){this.records=r}setKeys(r=[]){this.keys=r,this._keysMap={},r.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,sl(this.docs[0])?this.docs.forEach((r,t)=>{this._addString(r,t)}):this.docs.forEach((r,t)=>{this._addObject(r,t)}),this.norm.clear())}add(r){const t=this.size();sl(r)?this._addString(r,t):this._addObject(r,t)}removeAt(r){this.records.splice(r,1);for(let t=r,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(r,t){return r[this._keysMap[t]]}size(){return this.records.length}_addString(r,t){if(!Qs(r)||jE(r))return;let n={v:r,i:t,n:this.norm.get(r)};this.records.push(n)}_addObject(r,t){let n={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(r):this.getFn(r,i.path);if(Qs(o)){if(hu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(Qs(h))if(sl(h)&&!jE(h)){let c={v:h,i:u,n:this.norm.get(h)};a.push(c)}else hu(h)&&h.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}n.$[s]=a}else if(sl(o)&&!jE(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function pq(e,r,{getFn:t=Gt.getFn,fieldNormWeight:n=Gt.fieldNormWeight}={}){const i=new RP({getFn:t,fieldNormWeight:n});return i.setKeys(e.map(dq)),i.setSources(r),i.create(),i}function $be(e,{getFn:r=Gt.getFn,fieldNormWeight:t=Gt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new RP({getFn:r,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(i),s}function Hb(e,{errors:r=0,currentLocation:t=0,expectedLocation:n=0,distance:i=Gt.distance,ignoreLocation:s=Gt.ignoreLocation}={}){const o=r/e.length;if(s)return o;const a=Math.abs(n-t);return i?o+a/i:a?1:o}function _be(e=[],r=Gt.minMatchCharLength){let t=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=r&&t.push([n,i]),n=-1)}return e[s-1]&&s-n>=r&&t.push([n,s-1]),t}const Rf=32;function xbe(e,r,t,{location:n=Gt.location,distance:i=Gt.distance,threshold:s=Gt.threshold,findAllMatches:o=Gt.findAllMatches,minMatchCharLength:a=Gt.minMatchCharLength,includeMatches:l=Gt.includeMatches,ignoreLocation:u=Gt.ignoreLocation}={}){if(r.length>Rf)throw new Error(cbe(Rf));const h=r.length,c=e.length,d=Math.max(0,Math.min(n,c));let y=s,w=d;const b=a>1||l,T=b?Array(c):[];let x;for(;(x=e.indexOf(r,w))>-1;){let g=Hb(r,{currentLocation:x,expectedLocation:d,distance:i,ignoreLocation:u});if(y=Math.min(g,y),w=x+h,b){let R=0;for(;R<h;)T[x+R]=1,R+=1}}w=-1;let A=[],_=1,I=h+c;const O=1<<h-1;for(let g=0;g<h;g+=1){let R=0,M=I;for(;R<M;)Hb(r,{errors:g,currentLocation:d+M,expectedLocation:d,distance:i,ignoreLocation:u})<=y?R=M:I=M,M=Math.floor((I-R)/2+R);I=M;let L=Math.max(1,d-M+1),W=o?c:Math.min(d+M,c)+h,X=Array(W+2);X[W+1]=(1<<g)-1;for(let J=W;J>=L;J-=1){let j=J-1,Z=t[e.charAt(j)];if(b&&(T[j]=+!!Z),X[J]=(X[J+1]<<1|1)&Z,g&&(X[J]|=(A[J+1]|A[J])<<1|1|A[J+1]),X[J]&O&&(_=Hb(r,{errors:g,currentLocation:j,expectedLocation:d,distance:i,ignoreLocation:u}),_<=y)){if(y=_,w=j,w<=d)break;L=Math.max(1,2*d-w)}}if(Hb(r,{errors:g+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>y)break;A=X}const C={isMatch:w>=0,score:Math.max(.001,_)};if(b){const g=_be(T,a);g.length?l&&(C.indices=g):C.isMatch=!1}return C}function Ebe(e){let r={};for(let t=0,n=e.length;t<n;t+=1){const i=e.charAt(t);r[i]=(r[i]||0)|1<<n-t-1}return r}class vq{constructor(r,{location:t=Gt.location,threshold:n=Gt.threshold,distance:i=Gt.distance,includeMatches:s=Gt.includeMatches,findAllMatches:o=Gt.findAllMatches,minMatchCharLength:a=Gt.minMatchCharLength,isCaseSensitive:l=Gt.isCaseSensitive,ignoreLocation:u=Gt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?r:r.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(d,y)=>{this.chunks.push({pattern:d,alphabet:Ebe(d),startIndex:y})},c=this.pattern.length;if(c>Rf){let d=0;const y=c%Rf,w=c-y;for(;d<w;)h(this.pattern.substr(d,Rf),d),d+=Rf;if(y){const b=c-Rf;h(this.pattern.substr(b),b)}}else h(this.pattern,0)}searchIn(r){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(r=r.toLowerCase()),this.pattern===r){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,r.length-1]]),w}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],c=0,d=!1;this.chunks.forEach(({pattern:w,alphabet:b,startIndex:T})=>{const{isMatch:x,score:A,indices:_}=xbe(r,w,b,{location:i+T,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});x&&(d=!0),c+=A,x&&_&&(h=[...h,..._])});let y={isMatch:d,score:d?c/this.chunks.length:1};return d&&n&&(y.indices=h),y}}class Kc{constructor(r){this.pattern=r}static isMultiMatch(r){return sB(r,this.multiRegex)}static isSingleMatch(r){return sB(r,this.singleRegex)}search(){}}function sB(e,r){const t=e.match(r);return t?t[1]:null}class Sbe extends Kc{constructor(r){super(r)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(r){const t=r===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class kbe extends Kc{constructor(r){super(r)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(r){const n=r.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,r.length-1]}}}class Tbe extends Kc{constructor(r){super(r)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(r){const t=r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Ibe extends Kc{constructor(r){super(r)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(r){const t=!r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class Abe extends Kc{constructor(r){super(r)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(r){const t=r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[r.length-this.pattern.length,r.length-1]}}}class Obe extends Kc{constructor(r){super(r)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(r){const t=!r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class gq extends Kc{constructor(r,{location:t=Gt.location,threshold:n=Gt.threshold,distance:i=Gt.distance,includeMatches:s=Gt.includeMatches,findAllMatches:o=Gt.findAllMatches,minMatchCharLength:a=Gt.minMatchCharLength,isCaseSensitive:l=Gt.isCaseSensitive,ignoreLocation:u=Gt.ignoreLocation}={}){super(r),this._bitapSearch=new vq(r,{location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(r){return this._bitapSearch.searchIn(r)}}class yq extends Kc{constructor(r){super(r)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(r){let t=0,n;const i=[],s=this.pattern.length;for(;(n=r.indexOf(this.pattern,t))>-1;)t=n+s,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const LI=[Sbe,yq,Tbe,Ibe,Obe,Abe,kbe,gq],oB=LI.length,Cbe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Pbe="|";function Nbe(e,r={}){return e.split(Pbe).map(t=>{let n=t.trim().split(Cbe).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<oB;){const h=LI[u];let c=h.isMultiMatch(a);c&&(i.push(new h(c,r)),l=!0)}if(!l)for(u=-1;++u<oB;){const h=LI[u];let c=h.isSingleMatch(a);if(c){i.push(new h(c,r));break}}}return i})}const Rbe=new Set([gq.type,yq.type]);class Dbe{constructor(r,{isCaseSensitive:t=Gt.isCaseSensitive,includeMatches:n=Gt.includeMatches,minMatchCharLength:i=Gt.minMatchCharLength,ignoreLocation:s=Gt.ignoreLocation,findAllMatches:o=Gt.findAllMatches,location:a=Gt.location,threshold:l=Gt.threshold,distance:u=Gt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?r:r.toLowerCase(),this.query=Nbe(this.pattern,this.options)}static condition(r,t){return t.useExtendedSearch}searchIn(r){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;r=i?r:r.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const h=t[l];o.length=0,s=0;for(let c=0,d=h.length;c<d;c+=1){const y=h[c],{isMatch:w,indices:b,score:T}=y.search(r);if(w){if(s+=1,a+=T,n){const x=y.constructor.type;Rbe.has(x)?o=[...o,...b]:o.push(b)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return n&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const FI=[];function Bbe(...e){FI.push(...e)}function jI(e,r){for(let t=0,n=FI.length;t<n;t+=1){let i=FI[t];if(i.condition(e,r))return new i(e,r)}return new vq(e,r)}const e$={AND:"$and",OR:"$or"},zI={PATH:"$path",PATTERN:"$val"},HI=e=>!!(e[e$.AND]||e[e$.OR]),Mbe=e=>!!e[zI.PATH],Lbe=e=>!hu(e)&&fq(e)&&!HI(e),aB=e=>({[e$.AND]:Object.keys(e).map(r=>({[r]:e[r]}))});function mq(e,r,{auto:t=!0}={}){const n=i=>{let s=Object.keys(i);const o=Mbe(i);if(!o&&s.length>1&&!HI(i))return n(aB(i));if(Lbe(i)){const l=o?i[zI.PATH]:s[0],u=o?i[zI.PATTERN]:i[l];if(!sl(u))throw new Error(ube(l));const h={keyId:MI(l),pattern:u};return t&&(h.searcher=jI(u,r)),h}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];hu(u)&&u.forEach(h=>{a.children.push(n(h))})}),a};return HI(e)||(e=aB(e)),n(e)}function Fbe(e,{ignoreFieldNorm:r=Gt.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(r?1:s))}),t.score=n})}function jbe(e,r){const t=e.matches;r.matches=[],Qs(t)&&t.forEach(n=>{if(!Qs(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),r.matches.push(o)})}function zbe(e,r){r.score=e.score}function Hbe(e,r,{includeMatches:t=Gt.includeMatches,includeScore:n=Gt.includeScore}={}){const i=[];return t&&i.push(jbe),n&&i.push(zbe),e.map(s=>{const{idx:o}=s,a={item:r[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class dv{constructor(r,t={},n){this.options={...Gt,...t},this.options.useExtendedSearch,this._keyStore=new dbe(this.options.keys),this.setCollection(r,n)}setCollection(r,t){if(this._docs=r,t&&!(t instanceof RP))throw new Error(lbe);this._myIndex=t||pq(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(r){Qs(r)&&(this._docs.push(r),this._myIndex.add(r))}remove(r=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];r(s,n)&&(this.removeAt(n),n-=1,i-=1,t.push(s))}return t}removeAt(r){this._docs.splice(r,1),this._myIndex.removeAt(r)}getIndex(){return this._myIndex}search(r,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=sl(r)?sl(this._docs[0])?this._searchStringList(r):this._searchObjectList(r):this._searchLogical(r);return Fbe(l,{ignoreFieldNorm:a}),s&&l.sort(o),cq(t)&&t>-1&&(l=l.slice(0,t)),Hbe(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(r){const t=jI(r,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Qs(s))return;const{isMatch:l,score:u,indices:h}=t.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:h}]})}),i}_searchLogical(r){const t=mq(r,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,y=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return y&&y.length?[{idx:u,item:l,matches:y}]:[]}const h=[];for(let c=0,d=a.children.length;c<d;c+=1){const y=a.children[c],w=n(y,l,u);if(w.length)h.push(...w);else if(a.operator===e$.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Qs(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:h})=>{s[l].matches.push(...h)}))}}),o}_searchObjectList(r){const t=jI(r,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Qs(o))return;let l=[];n.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:o[h],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:r,value:t,searcher:n}){if(!Qs(t))return[];let i=[];if(hu(t))t.forEach(({v:s,i:o,n:a})=>{if(!Qs(s))return;const{isMatch:l,score:u,indices:h}=n.searchIn(s);l&&i.push({score:u,key:r,value:s,idx:o,norm:a,indices:h})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&i.push({score:l,key:r,value:s,norm:o,indices:u})}return i}}dv.version="6.6.2";dv.createIndex=pq;dv.parseIndex=$be;dv.config=Gt;dv.parseQuery=mq;Bbe(Dbe);const Ube={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},lB=Kd.throttle(()=>{De.get("searchIndexUpdated").put(!0)},2e3),bq={index:new dv([],Ube),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),lB())},remove(e){this.keys.delete(e),this.index.remove(r=>r.key===e),lB()},search(e){return this.index.search(e)}};class Wbe{constructor(){le(this,"key","");le(this,"name","");le(this,"username","");le(this,"displayName");le(this,"display_name");le(this,"description");le(this,"avatar");le(this,"picture");le(this,"cover");le(this,"location");le(this,"website");le(this,"email");le(this,"nip05");le(this,"lud16");le(this,"lud06");le(this,"about");le(this,"created_at",0);le(this,"isDefault",!1)}}var wq={exports:{}},zE={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var uB;function Kbe(){return uB||(uB=1,function(e){(function(){function r(o,a){for(var l=2;l<arguments.length;l++)for(var u=0;u<arguments[l].length;u++)o[a++]=arguments[l].charAt(u)}function t(o){return String.fromCharCode(o>>8&255,o&255)}function n(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function i(o){return String.fromCharCode(o&255,o>>8&255)}var s=function(o,a,l){this.width=o,this.height=a,this.depth=l,this.pix_size=a*(o+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*l+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+l+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var u=new Array,h=0;h<this.buffer_size;h++)this.buffer[h]="\0";r(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(o),n(a),"\b"),r(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var c=8+112<<8|192;c+=31-c%31,r(this.buffer,this.idat_offs+8,t(c));for(var h=0;(h<<16)-1<this.pix_size;h++){var d,y;h+65535<this.pix_size?(d=65535,y="\0"):(d=this.pix_size-(h<<16)-h,y=""),r(this.buffer,this.idat_offs+8+2+(h<<16)+(h<<2),y,i(d),i(~d))}for(var h=0;h<256;h++){for(var w=h,b=0;b<8;b++)w&1?w=-306674912^w>>1&2147483647:w=w>>1&2147483647;u[h]=w}this.index=function(T,x){var A=x*(this.width+1)+T+1,_=this.idat_offs+8+2+5*Math.floor(A/65535+1)+A;return _},this.color=function(T,x,A,_){_=_>=0?_:255;var I=((_<<8|T)<<8|x)<<8|A;if(typeof this.palette[I]>"u"){if(this.pindex==this.depth)return"\0";var O=this.plte_offs+8+3*this.pindex;this.buffer[O+0]=String.fromCharCode(T),this.buffer[O+1]=String.fromCharCode(x),this.buffer[O+2]=String.fromCharCode(A),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(_),this.palette[I]=String.fromCharCode(this.pindex++)}return this.palette[I]},this.getBase64=function(){var T=this.getDump(),x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A,_,I,O,C,g,R,M=T.length,L=0,W="";do A=T.charCodeAt(L),O=A>>2,_=T.charCodeAt(L+1),C=(A&3)<<4|_>>4,I=T.charCodeAt(L+2),M<L+2?g=64:g=(_&15)<<2|I>>6,M<L+3?R=64:R=I&63,W+=x.charAt(O)+x.charAt(C)+x.charAt(g)+x.charAt(R);while((L+=3)<M);return W},this.getDump=function(){for(var T=65521,x=5552,A=1,_=0,I=x,O=0;O<this.height;O++)for(var C=-1;C<this.width;C++)A+=this.buffer[this.index(C,O)].charCodeAt(0),_+=A,(I-=1)==0&&(A%=T,_%=T,I=x);A%=T,_%=T,r(this.buffer,this.idat_offs+this.idat_size-8,n(_<<16|A));function g(R,M,L){for(var W=-1,X=4;X<L-4;X+=1)W=u[(W^R[M+X].charCodeAt(0))&255]^W>>8&16777215;r(R,M+L-4,n(W^-1))}return g(this.buffer,this.ihdr_offs,this.ihdr_size),g(this.buffer,this.plte_offs,this.plte_size),g(this.buffer,this.trns_offs,this.trns_size),g(this.buffer,this.idat_offs,this.idat_size),g(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(zE)),zE.exports}(function(e){(function(){var r;r=Kbe();var t=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var o=parseInt(this.hash.substr(-7),16)/268435455,a=this.options.saturation||this.defaults.saturation,l=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(o,a,l)};t.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new n(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,o=Math.floor(s*this.margin),a=Math.floor((s-o*2)/5),l=Math.floor((s-a*5)/2),u=i.color.apply(i,this.background),h=i.color.apply(i,this.foreground),c,d;for(c=0;c<15;c++)d=parseInt(this.hash.charAt(c),16)%2?u:h,c<5?this.rectangle(2*a+l,c*a+l,a,a,d,i):c<10?(this.rectangle(1*a+l,(c-5)*a+l,a,a,d,i),this.rectangle(3*a+l,(c-5)*a+l,a,a,d,i)):c<15&&(this.rectangle(0*a+l,(c-10)*a+l,a,a,d,i),this.rectangle(4*a+l,(c-10)*a+l,a,a,d,i));return i},rectangle:function(i,s,o,a,l,u){if(this.isSvg())u.rectangles.push({x:i,y:s,w:o,h:a,color:l});else{var h,c;for(h=i;h<i+o;h++)for(c=s;c<s+a;c++)u.buffer[u.index(h,c)]=l}},hsl2rgb:function(i,s,o){return i*=6,s=[o+=s*=o<.5?o:1-o,o-i%1*s*2,o-=s*=2,o,o+i%1*s,o+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var n=function(i,s,o){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,o),this.rectangles=[]};n.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,o,a){var l=[i,s,o].map(Math.round);return l.push(a>=0&&a<=255?a/255:1),"rgba("+l.join(",")+")"},getDump:function(){var i,s,o,a=this.foreground,l=this.background,u=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+l+";'><g style='fill:"+a+"; stroke:"+a+"; stroke-width:"+u+";'>",i=0;i<this.rectangles.length;i++)o=this.rectangles[i],o.color!=l&&(s+="<rect  x='"+o.x+"' y='"+o.y+"' width='"+o.w+"' height='"+o.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=t})()})(wq);var qbe=wq.exports;const Vbe=no(qbe);let Ub={};async function cB(e,r){return Ub[e]||(Ub[e]=r().finally(()=>{delete Ub[e]})),Ub[e]}const $q="DWoTR";class UI extends Ql{constructor(){super($q);le(this,"edges");le(this,"profiles");this.version(2).stores({edges:"key, outKey, inKey",profiles:"key"})}}let Hg=new UI;function Gbe(){return Hg.transaction("rw",Hg.edges,Hg.profiles,async()=>{await Promise.all(Hg.tables.map(e=>e.clear()))})}var Ul,fm;class Ybe{constructor(){Vr(this,Ul,null);Vr(this,fm,!1)}get profiles(){return this.db.profiles}get edges(){return this.db.edges}get db(){if(!Bn(this,Ul))try{So(this,Ul,new UI),Bn(this,Ul).open().catch(r=>{console.log("Error opening database",r),this.recreateDB()})}catch(r){console.log("Error opening database",r),this.recreateDB()}return Bn(this,Ul)}recreateDB(){if(Bn(this,fm))return;So(this,fm,!0),this.deleteDB().then(()=>{So(this,Ul,new UI)}),(t=>{const n=Date.now();let i;do i=Date.now();while(i-n<t||!Bn(this,Ul))})(5e3)}async deleteDB(){await Ql.delete($q),console.log("Database deleted")}}Ul=new WeakMap,fm=new WeakMap;const Wb=new Ybe;new TextDecoder("utf-8");const Zbe=new TextEncoder;function Xbe(e){let r=__(Zbe.encode(e));return Mw(r)}function Jbe(e=Date.now()){return Math.floor(e/1e3)}function Qbe(e){return e.slice(0,4)+"..."+e.slice(-4)}const HE="profileEvent";class $h extends CustomEvent{constructor(r){super(HE,{detail:r})}static dispatch(r,t){(!(t!=null&&t.id)||t.id==0)&&(t.id=r),document.dispatchEvent(new $h(t))}static add(r){document.addEventListener(HE,r)}static remove(r){document.removeEventListener(HE,r)}}var xp,Ep;class e1e{constructor(){le(this,"loaded",!1);Vr(this,xp,[]);Vr(this,Ep,!1);le(this,"history",{});le(this,"saveBulk",Cn.throttle(()=>{if(Bn(this,Ep)){this.saveBulk();return}So(this,Ep,!0);const r=Bn(this,xp);So(this,xp,[]),Wb.profiles.bulkPut(r).finally(()=>{So(this,Ep,!1)})},500));le(this,"subscriptions",new Map)}async init(){this.loaded=!0}validateProfile(r){return!!r}async fetchProfile(r){try{let t=`https://api.iris.to/profile/${r}`,{data:n}=await cB(t,async()=>{let i=await fetch(t);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);if(i&&i.status===200){let s=await i.json();return{res:i,data:s}}return{res:i,data:void 0}});return n}catch(t){console.log("There was a problem with the fetch operation: "+t.message)}}fetchProfiles(r,t){if(!r||r.length===0)return;const n=async i=>{const s=await this.fetchProfile(i);s&&ay.validateProfile(s)&&(Fe.handle(s),t(s))};for(const i of r)n(i)}async loadProfiles(r){return await Wb.profiles.where("key").anyOf(Array.from(r)).toArray()}async loadProfile(r){let t=await cB(`loadProfile${r}`,async()=>Wb.profiles.get({key:r}));if(!(t!=null&&t.isDefault))return t}async getProfile(r){let t=await this.getProfiles([r]);return t==null?void 0:t[0]}async getProfiles(r){if(!r||r.length===0)return[];let t=[],n=[];for(const i of r){if(!i)continue;const s=ye.toNostrHexAddress(i),o=ut.profiles.get(pt(s));o?t.push(o):n.push(s)}if(n.length>0){let i=new Set(n);console.timeStamp("Loading profiles from IndexedDB"),console.time("LoadDB");const s=await this.loadProfiles(i);if(s&&s.length>0){t=t.concat(s);for(const o of s)o&&i.delete(o.key)}console.timeEnd("LoadDB");for(const o of i){let a=this.createDefaultProfile(o);ut.profiles.set(pt(a.key),a),t.push(a)}for(const o of t)!o||!this.isProfileNewer(o)||this.addProfileToMemory(o)}return t}saveProfile(r){r!=null&&r.isDefault||(r==null?void 0:r.isDefault)==null||(Bn(this,xp).push(r),this.saveBulk())}async loadAllProfiles(){console.time("Loading profiles from DWoTRDB");const r=await Wb.profiles.toArray();if(r){for(const t of r)this.addProfileToMemory(t);console.timeEnd("Loading profiles from DWoTRDB"),console.log("Loaded profiles from DWoTRDB - "+r.length+" profiles")}}sanitizeProfile(r,t){var y,w,b,T,x,A,_,I,O,C;if(!r)return this.createDefaultProfile(t);let n=r.name||r.username||r.display_name||r.displayName||r.nip05||r.lud16||r.lud06;n=((y=r.name)==null?void 0:y.trim().slice(0,100))||"";let i=(w=r.display_name||r.displayName)==null?void 0:w.trim().slice(0,200);i=(b=r.display_name)==null?void 0:b.trim().slice(0,200);let s=(T=r.about)==null?void 0:T.trim().slice(0,1e4),o=(x=r.picture)==null?void 0:x.trim().slice(0,4096),a=(A=r.banner)==null?void 0:A.trim().slice(0,4096),l=(_=r.website)==null?void 0:_.trim().slice(0,4096),u=(I=r.nip05)==null?void 0:I.trim().slice(0,4096),h=(O=r.lud06)==null?void 0:O.trim().slice(0,4096),c=(C=r.lud16)==null?void 0:C.trim().slice(0,4096);return{...r,key:t,name:n,display_name:i,about:s,picture:o,banner:a,website:l,nip05:u,lud06:h,lud16:c,isDefault:!1}}createDefaultProfile(r){let t=new Wbe;return t.key=r,t.name=Qbe(r),t.isDefault=!0,t}getDefaultProfile(r){if(!r)return;const t=ut.profiles.get(r);return t||this.createDefaultProfile(Sn(r))}quickProfile(r){const t=pt(r),n=ut.profiles.get(t);return n||this.createDefaultProfile(Sn(t))}getMemoryProfile(r){const t=ut.profiles.get(r);return t||this.createDefaultProfile(Sn(r))}isProfileNewer(r){if(!(r!=null&&r.key))return!1;const t=ut.profiles.get(pt(r.key));return!t||r.isDefault===!1&&r.created_at>t.created_at}addProfileToMemory(r){if(r)return ut.profiles.set(pt(r.key),r),bq.add({key:r.key,name:r.name,display_name:r.display_name,followers:ut.followersByUser.get(pt(r.key))??new Set}),r}addProfileEvent(r){if(!(!r||!r.pubkey||!r.content))try{const t=JSON.parse(r.content);if(!t)return;t.created_at=r.created_at;let n=this.sanitizeProfile(t,r.pubkey);return this.saveProfile(n),this.addProfileToMemory(n)}catch(t){r.id&&il.db.events.delete(r.id),console.error(t);return}}createImageUrl(r,t=30,n=30){return`data:image/svg+xml;base64,${new Vbe(r,{width:t,height:n,format:"svg"}).toString()}`}ensurePicture(r){return r.picture||(r.picture=this.createImageUrl(r.key)),r.picture}subscriptionCallback(r){let t=ut.profiles.get(pt(r.pubkey));ay.dispatchProfile(t)}subscribe(r){const t=ye.toNostrHexAddress(r),n=pt(t);let i=ut.profiles.get(n);return(!i||i.isDefault)&&this.loadProfile(t).then(o=>{o?this.dispatchProfile(o):ay.fetchProfile(t).then(a=>{if(!a)return;let l=this.addProfileEvent(a);l&&this.dispatchProfile(l)})}),Ut.subscribe({kinds:[0],authors:[t]},this.subscriptionCallback,!1)}dispatchProfile(r){r&&(this.isProfileNewer(r)&&this.addProfileToMemory(r),$h.dispatch(pt(r.key),r))}}xp=new WeakMap,Ep=new WeakMap;const ay=new e1e;ay.init();const en=ay,ut={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,isFollowing:function(e,r){var i;const t=pt(r),n=pt(e);return!!((i=this.followedByUser.get(n))!=null&&i.has(t))},isBlocked:function(e){const r=pt(e);return this.blockedUsers.has(r)},getFollowDistance:function(e){const r=pt(e),t=this.followDistanceByUser.get(r);return t===void 0?1e3:t},setFollowed:function(e,r=!0){const t=ye.getPubKey(),n=pt(t);typeof e=="string"&&(e=[e]),e.forEach(o=>{o=ye.toNostrHexAddress(o)||"";const a=pt(o);r&&o&&o!==t?this.addFollower(a,n):this.removeFollower(a,n)});const i=Fe.db.findOne({kind:3,pubkey:t}),s={kind:3,content:(i==null?void 0:i.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(o=>["p",Sn(o)])};Fe.publish(s)},setBlocked:function(e,r=!0){const t=pt(e),n=pt(ye.getPubKey());r?(this.blockedUsers.add(t),this.removeFollower(t,n),Fe.directMessagesByUser.delete(e)):this.blockedUsers.delete(t)},addUserByFollowDistance(e,r){var t,n;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=Ut.subscribe({authors:[Sn(r)],kinds:[0]},()=>i==null?void 0:i(),!0)}(t=this.usersByFollowDistance.get(e))==null||t.add(r);for(const i of this.usersByFollowDistance.keys())i>e&&((n=this.usersByFollowDistance.get(i))==null||n.delete(r))},addFollower:function(e,r){var n,i,s,o;if(typeof e!="number"||typeof r!="number")throw new Error("Invalid user id");this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(n=this.followersByUser.get(e))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set);const t=pt(ye.getPubKey());if(e!==t){let a;if(r===t)a=1,this.addUserByFollowDistance(a,e),this.followDistanceByUser.set(e,a);else{const l=this.followDistanceByUser.get(e),u=this.followDistanceByUser.get(r);a=u&&u+1,(l===void 0||a<l)&&(this.followDistanceByUser.set(e,a),this.addUserByFollowDistance(a,e))}}(i=this.followedByUser.get(r))==null||i.add(e),e===t&&((s=this.followersByUser.get(e))==null?void 0:s.size)===1&&De.get("hasNostrFollowers").put(!0),(o=this.followedByUser.get(t))!=null&&o.has(r)&&(Ut.subscribedAuthors.has(Sn(e))||setTimeout(()=>{Ut.subscribe({authors:[Sn(e)]},void 0,!0)},0))},removeFollower:function(e,r){var i,s,o;if((i=this.followersByUser.get(e))==null||i.delete(r),(s=this.followedByUser.get(r))==null||s.delete(e),e===pt(ye.getPubKey()))return;let t=1/0;for(const a of this.followersByUser.get(e)||[]){const l=this.followDistanceByUser.get(a);l!==void 0&&l+1<t&&(t=l+1)}t===1/0?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,t),(this.blockedUsers.has(e)||((o=this.followersByUser.get(e))==null?void 0:o.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),Ut.subscribedAuthors.delete(Sn(e))),Lw.saveEvents()},followerCount:function(e){var t;const r=pt(e);return((t=this.followersByUser.get(r))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var i;let r=0;const t=pt(ye.getPubKey()),n=pt(e);for(const s of this.followersByUser.get(n)??[])(i=this.followedByUser.get(t))!=null&&i.has(s)&&r++;return r},block:async function(e,r){r?this.blockedUsers.add(pt(e)):this.blockedUsers.delete(pt(e));let t=JSON.stringify(Array.from(this.blockedUsers));t=await ye.encrypt(t),Fe.publish({kind:16462,content:t})},flag:function(e,r){r?this.flaggedUsers.add(pt(e)):this.flaggedUsers.delete(pt(e)),Fe.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.blockedUsers)n.add(Sn(i));e(n)}};r();const t=ye.getPubKey();return Ut.subscribe({kinds:[16462],authors:[t]},r)},getFlaggedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.flaggedUsers)n.add(Sn(i));e(n)}};r();const t=ye.getPubKey();return Ut.subscribe({kinds:[16463],authors:[t]},r)},getFollowedByUser:function(e,r,t=!1){const n=pt(e),i=()=>{if(r){const s=new Set;for(const o of this.followedByUser.get(n)||[])s.add(Sn(o));t&&s.add(e),r(s)}};return(this.followedByUser.has(n)||t)&&i(),Ut.subscribe({kinds:[3],authors:[e]},i)},getFollowersByUser:function(e,r){const t=pt(e),n=()=>{if(r){const i=new Set;for(const s of this.followersByUser.get(t)||[])i.add(Sn(s));r(i)}};return this.followersByUser.has(t)&&n(),Ut.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,r,t=!1){const n=pt(e),i=Sn(n),s=()=>{r==null||r(this.profiles.get(n),e)},o=this.profiles.get(n);return o?(s(),t&&o.nip05&&!o.nip05valid&&ye.verifyNip05Address(o.nip05,e).then(a=>{console.log("NIP05 address is valid?",a,o.nip05,e),o.nip05valid=a,en.dispatchProfile(o),s()})):en.loadProfile(i).then(a=>{a?(en.dispatchProfile(a),s()):en.fetchProfile(i).then(l=>{l&&(Fe.handle(l),s())})}),Ut.subscribe({kinds:[0],authors:[e]},s,!1)},setMetadata(e){const r={kind:0,content:JSON.stringify(e)};Fe.publish(r)}},_q=(e,r)=>{let t;const n=ut.getProfile(r,i=>{t=i.name});setTimeout(()=>{t=t||Sve(ye.toNostrBech32Address(r,"npub")||""),De.get("groups").get(xq(e)).put({name:t}),n()},1e3)},xq=e=>{const r=__(e);return Array.from(r,t=>t.toString(16).padStart(2,"0")).join("").slice(0,12)},M_=(e,r=!0,t=null,n=void 0)=>{const i=xq(e),s=De.get("groups").get(i).put({key:e,inviter:t,name:n});return r&&s.then(()=>Tr(`/chat/${i}`)),i},Eq=(e,r=void 0)=>{if(e.indexOf("#")>-1&&(e=e.split("#")[1]),e.startsWith("nsec")){const t=ye.toNostrHexAddress(e);t&&M_(t,!0,void 0,r)}},Sq=(e=void 0)=>{const r=U3();return[M_(r,!0,void 0,e),r]},t1e=async e=>{const r=Sq()[1],t=ye.toNostrBech32Address(r,"nsec"),n=U3(),i=4,s=Math.floor(Date.now()/1e3),o=`This is an invitation to a secret chat. Use ${t} or go to https://iris.to/chat/#${t}`;let a={kind:i,created_at:s,pubkey:ye.getPubKey(),tags:[["p",e]],content:o};a=await Fe.sign(a);const l=await mh.encrypt(n,e,`${o}

${JSON.stringify(a)}`),u={kind:i,created_at:s,pubkey:yh(n),tags:[["p",e]],content:l};u.id=Oc(u),u.sig=UU(u,n),Fe.publish(u),De.get("chatInvites").get(e).put({priv:r}),_q(r,e)};function r1e(){const[e,r]=Ne(""),[t,n]=Ne(""),i=o=>{r(o.target.value),Eq(o.target.value,t)};return v("div",{className:"flex flex-1 flex-col items-center justify-center h-full",children:[v("div",{className:"flex flex-row gap-2",children:[v("input",{type:"text",className:"input rounded-full input-bordered",placeholder:"Group name",onChange:o=>{n(o.target.value)}}),v("button",{className:"btn btn-primary",onClick:()=>Sq(t),children:be("start_new_group")})]}),v("div",{className:"my-4",children:be("or")}),v("div",{className:"my-4 flex gap-2 justify-center items-center",children:v("input",{placeholder:"Paste nsec or chat link",type:"password",id:"pasteLink",className:"text-center input input-bordered rounded-full p-2",onChange:i,value:e})})]})}class n1e{constructor(){le(this,"_data",new Map)}upsert(r,t){var s;const n=this._data.get(r),i=(n==null?void 0:n.relays)||new Set;return(s=t.relays)==null||s.forEach(o=>i.add(this._normalizeURL(o))),this._data.set(r,{relays:i}),this}get(r){if(r)return this._data.get(r)}getRelays(r){var t;return r?Array.from(((t=this.get(r))==null?void 0:t.relays)||[]):[]}_normalizeURL(r){return r.trim().replace(/\/$/,"")}}const s_=class s_{constructor(r,t=!0){le(this,"events");le(this,"eventIdSet");le(this,"maxSize");le(this,"descending");le(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=r,this.descending=t,this.subscriptions=new Map}get size(){return this.events.length}first(){var r;return(r=this.events[0])==null?void 0:r.id}has(r){return this.eventIdSet.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(r.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:r.id,created_at:r.created_at});else if(r.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:r.id,created_at:r.created_at},this.eventIdSet.add(r.id);else return!1;return this.eventIdSet.add(r.id),this.events.sort((t,n)=>this.descending?n.created_at-t.created_at:t.created_at-n.created_at),this.subscriptions.forEach(t=>t(this.eventIds)),!0}delete(r){if(!this.eventIdSet.delete(r))return!1;const n=this.events.findIndex(i=>i.id===r);return n===-1?!1:(this.events.splice(n,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(r=>r.id)}values(){return this.events.map(r=>r.id)}subscribe(r){const t=s_.subscriptionId++;return this.subscriptions.set(t,r),r(this.eventIds),()=>this.subscriptions.delete(t)}};le(s_,"subscriptionId",0);let ly=s_;const i1e=Date.now()/1e3,s1e=500,o1e=1e3,a1e=new cve("iris"),l1e=a1e.addCollection("events",{indices:["created_at","pubkey","kind"],unique:["id"]});let Ug;De.get("mutedNotes").on(e=>{Ug=e});const WI={maxFollowDistance:3,minFollowersAtMaxDistance:5};let Wg=WI;De.get("globalFilter").on(e=>{Wg=e});let KI={};De.get("dev").on(e=>{KI=e});const u1e=(e,r)=>{const t=zi.db.by("id",e),n=zi.db.by("id",r);return t?!n||t.created_at>n.created_at?-1:t.created_at<n.created_at?1:0:1},zi={DEFAULT_GLOBAL_FILTER:WI,getEventHash:Oc,db:l1e,eventsMetaDb:new n1e,seen:new Set,deletedEvents:new Set,directMessagesByUser:new X3((e,r)=>{const t=e.value.eventIds[0],n=r.value.eventIds[0];return t?n?u1e(t,n):-1:1}),latestNotificationByTargetAndKind:new Map,notifications:new ly(s1e),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,directRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new ly(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s,o;this.db.by("id",e.id)||this.insert(e);const t=this.isRepost(e),n=!t&&this.getNoteReplyingTo(e),i=ye.getPubKey();if(n&&!t){this.directRepliesByMessageId.has(n)||this.directRepliesByMessageId.set(n,new Set),(s=this.directRepliesByMessageId.get(n))==null||s.add(e.id);const a=e.tags.filter(l=>l[0]==="e").map(l=>l[1]).slice(0,2);for(const l of a)e.created_at>i1e||e.pubkey===i||ut.isFollowing(i,e.pubkey),this.threadRepliesByMessageId.has(l)||this.threadRepliesByMessageId.set(l,new Set),(o=this.threadRepliesByMessageId.get(l))==null||o.add(e.id)}},getRepostedEventId(e){var t,n,i;let r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:n[1];return r||(r=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],r)},getOriginalPostEventId(e){return zi.isRepost(e)?zi.getRepostedEventId(e):e.id},getNoteReplyingTo:function(e){if(e.kind===1)return this.getEventReplyingTo(e)},getEventReplyingTo:function(e){var n,i;const r=(n=e.tags)==null?void 0:n.filter(s=>s[0]==="e"&&s[3]!=="mention");if(r.length===1)return r[0][1];const t=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(t)return t[1];if(r.length>1)return r[1][1]},handleRepost(e){var t,n;const r=this.getRepostedEventId(e);r&&(this.repostsByMessageId.has(r)||this.repostsByMessageId.set(r,new Set),(t=this.repostsByMessageId.get(r))!=null&&t.has(e.pubkey)||((n=this.repostsByMessageId.get(r))==null||n.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var t,n,i;const r=(n=(t=e.tags)==null?void 0:t.reverse().find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.likesByMessageId.has(r)||this.likesByMessageId.set(r,new Set),(i=this.likesByMessageId.get(r))==null||i.add(e.pubkey),this.insert(e))},handleFollow(e){var n,i,s,o;const r=zi.db.findOne({kind:3,pubkey:e.pubkey});if(r&&r.created_at>=e.created_at)return;r&&this.db.findAndRemove({kind:3,pubkey:e.pubkey}),this.insert(e);const t=ye.getPubKey();if((e.pubkey===t||ut.isFollowing(t,e.pubkey))&&Lw.loaded&&Lw.saveProfilesAndFollows(),e.tags){for(const a of e.tags)if(Array.isArray(a)&&a[0]==="p"){const l=a[1];l.length===64&&/^[0-9a-f]+$/.test(l)&&ut.addFollower(pt(a[1]),pt(e.pubkey))}}if(ut.followedByUser.has(pt(e.pubkey)))for(const a of ut.followedByUser.get(pt(e.pubkey))||[])(!e.tags||!((n=e.tags)!=null&&n.find(l=>l[0]==="p"&&l[1]===Sn(a))))&&ut.removeFollower(a,pt(e.pubkey));if(e.pubkey===t&&((i=e.tags)!=null&&i.length)&&(((s=ut.followedByUser.get(pt(t)))==null?void 0:s.size)||0)>10&&De.get("showFollowSuggestions").put(!1),e.pubkey===t&&((o=e.content)!=null&&o.length))try{const a=JSON.parse(e.content),l=Object.keys(a);if(l.length){console.log("setting relays from your contacs list",l);for(const u of on.relays.keys())l.includes(u)||on.remove(u);for(const u of l)on.add(u)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var t;if((((t=this.myBlockEvent)==null?void 0:t.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const r=ye.getPubKey();if(e.pubkey===r){let n;try{n=await ye.decrypt(e.content);const i=JSON.parse(n).map(pt);ut.blockedUsers=new Set(i)}catch{console.log("failed to parse your block list",n,e)}}},handleFlagList(e){var t;if((((t=this.myFlagEvent)==null?void 0:t.created_at)||0)>e.created_at)return;const r=ye.getPubKey();if(e.pubkey===r)try{const n=JSON.parse(e.content).map(pt);ut.flaggedUsers=new Set(n)}catch{console.log("failed to parse your flagged users list",e)}},insert(e){try{delete e.$loki,this.db.insert(e)}catch{}},handleMetadata(e){var r;if(!((r=e.content)!=null&&r.length))return!1;try{if(en.addProfileEvent(e))return!0}catch(t){console.log("error parsing nostr profile",t,e)}return!1},handleDelete(e){var n,i;const r=(i=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:i[1],t=ye.getPubKey();if(r){const s=this.db.by("id",r);s&&[e.pubkey,t].includes(s.pubkey)&&this.db.findAndRemove({id:r})}},handleZap(e){var t,n,i;this.insert(e);const r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.zapsByNote.has(r)||this.zapsByNote.set(r,new ly(o1e)),(i=this.zapsByNote.get(r))==null||i.add(e))},async saveDMToLocalState(e,r){const t=r.get("latest"),n=await t.once();(!n||!n.created_at||n.created_at<e.created_at)&&t.put({id:e.id,created_at:e.created_at,text:e.text})},async handleDirectMessage(e){var i,s,o,a,l,u;const r=ye.getPubKey();let t,n=!1;if(e.pubkey===r)t=((s=(i=e.tags)==null?void 0:i.find(h=>h[0]==="p"))==null?void 0:s[1])||t;else if(t=e.pubkey,!((o=e.tags)==null?void 0:o.some(c=>c[0]==="p"&&c[1]===r))&&(n=((a=e.tags)==null?void 0:a.length)===1&&((l=e.tags)==null?void 0:l.some(c=>c[0]==="p"&&c[1]===e.pubkey)),!n))return;try{const h=await ye.decrypt(e.content,e.pubkey);h&&(e.text=h,this.decryptedMessages.set(e.id,h));const c=JSON.parse(h.slice(h.indexOf("{")));if(Ay(c)&&Np(c)){const d=(u=c.content.match(/nsec1[023456789acdefghjklmnpqrstuvwxyz]{6,}/gi))==null?void 0:u[0];if(d){const y=ye.toNostrHexAddress(d);if(y){M_(y,!1,c.pubkey),_q(y,c.pubkey),De.get("chatInvites").get(c.pubkey).put({priv:y});return}}}}catch{}this.insert(e),n||this.saveDMToLocalState(e,De.get("chats").get(t))},getEventFromText(e){try{const r=e.slice(e.indexOf("{")),t=JSON.parse(r);if(Ay(t)&&Np(t))return t}catch{}},subscribeGroups(){De.get("groups").map((e,r)=>{if(e.key){const t=yh(e.key);t&&Ut.subscribe({authors:[t],kinds:[4],"#p":[t]},async n=>{const i=await mh.decrypt(e.key,t,n.content),s=this.getEventFromText(i);s&&s.tags.length===1&&s.tags[0][0]==="p"&&s.tags[0][1]===t&&(s.text=s.content,this.saveDMToLocalState(s,De.get("groups").get(r)))})}})},handleKeyValue(e){var t,n;if(e.pubkey!==ye.getPubKey())return;const r=(n=(t=e.tags)==null?void 0:t.find(i=>i[0]==="d"))==null?void 0:n[1];if(r){const i=this.keyValueEvents.get(r);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(r,e)}},isRepost(e){var t;if(e.kind===6)return!0;const r=(t=e.tags)==null?void 0:t.findIndex(n=>n[0]==="e"&&n[3]==="mention");return e.kind===1&&e.content===`#[${r}]`},acceptEvent(e){var r,t,n;if(Wg.maxFollowDistance&&ye.getPubKey()){if(e.kind===4)return!0;if(!Ut.subscribedAuthors.has(e.pubkey)&&!Ut.subscribedEventIds.has(e.id)){if(!e.pubkey)return console.log("what",e),!1;if(Bc.has(e.pubkey)&&ut.getFollowDistance(e.pubkey)){const i=ut.followDistanceByUser.get(pt(e.pubkey));if(i&&i>Wg.maxFollowDistance||i===Wg.maxFollowDistance&&(((r=ut.followersByUser.get(pt(e.pubkey)))==null?void 0:r.size)||0)<(Wg.minFollowersAtMaxDistance||WI.minFollowersAtMaxDistance))return!1}else{const i=((t=zi.likesByMessageId.get(e.id))==null?void 0:t.size)||0,s=((n=zi.repostsByMessageId.get(e.id))==null?void 0:n.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}}}return!0},find(e,r){const t={};e.authors&&(t.pubkey={$in:e.authors}),e.kinds&&(t.kind={$in:e.kinds}),this.db.chain().find(t).where(n=>W3(e,n)).simplesort("created_at",{desc:!0}).limit(e.limit||1/0).data().forEach(n=>{r(n)})},handle(e,r=!1,t=!0,n=2){var i;if(!e||!r&&this.seen.has(e.id))return!1;if(!r&&!this.acceptEvent(e))return n&&setTimeout(()=>{this.handle(e,r,t,n-1)},3e3),!1;if(ut.isBlocked(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&this.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,Ut.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),this.isRepost(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:if(((i=zi.db.findOne({kind:3,pubkey:e.pubkey}))==null?void 0:i.created_at)>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break;case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(t){const s=ut.followDistanceByUser.get(pt(e.pubkey))||1/0;s<=1?KI.indexedDbSave!==!1&&il.saveEvent(e):s<=4&&[0,3,4].includes(e.kind)&&KI.indexedDbSave!==!1&&il.saveEvent(e)}return Ut.handle(e),!0},handleEventMetadata({url:e,event:r}){const t=this.getOriginalPostEventId(r);t&&this.eventsMetaDb.upsert(t,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),r=this.db.by("id",e);r&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(r.id),this.handle(r,!0),this.handleNextFutureEvent()},(r.created_at-Date.now()/1e3)*1e3))},isMuted(e){let r=!1;if(Ug&&(r=Ug[e.id],!r)){for(const t of e.tags)if(t[0]==="e"&&Ug[t[1]]&&(r=Ug[t[1]],r))return!0}return r},getEventRoot(e){var t,n,i,s;const r=(n=(t=e==null?void 0:e.tags)==null?void 0:t.find(o=>o[0]==="e"&&o[3]==="root"))==null?void 0:n[1];return r||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(o=>o[0]==="e"))==null?void 0:s[1])},maybeAddNotification(e){var t,n;if(((t=e.tags)==null?void 0:t.filter(i=>i[0]==="p").length)>10)return;const r=ye.getPubKey();if(e.pubkey!==r&&((n=e.tags)!=null&&n.some(i=>i[0]==="p"&&i[1]===r))){if(e.kind===3){const i=ut.followedByUser.get(pt(e.pubkey));if(!i||i.has(pt(r)))return}if(!this.isMuted(e)){this.insert(e);const i=this.getEventRoot(e)||this.getEventReplyingTo(e)||e.id,s=`${e.kind}-${i}`,o=this.latestNotificationByTargetAndKind.get(s),a=o&&this.db.by("id",o);(!o||a.created_at<e.created_at)&&(o&&this.notifications.delete(o),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:Cn.debounce(()=>{if(!zi.notificationsSeenTime)return;let e=0;for(const r of zi.notifications.eventIds){const t=zi.db.by("id",r);if((t==null?void 0:t.created_at)>zi.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",zi.notificationsSeenTime,"count",e),De.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var t;if(delete e.$loki,delete e.meta,e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");Ut.publish(e),console.log("publishing event",e),this.handle(e,!0);const r=(t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").reverse().slice(0,10);for(const n of r||[]){const i=this.db.by("id",n[1]);i&&(delete i.meta,delete i.$loki,Ut.publish(i))}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=ye.getPubKey(),e.id=Oc(e),e.sig=await ye.sign(e),e},getZappingUser(e){var i,s,o;const r=(o=(s=(i=zi.db.by("id",e))==null?void 0:i.tags)==null?void 0:s.find(a=>a[0]==="description"))==null?void 0:o[1];if(!r)return null;let t;try{t=JSON.parse(r)}catch{return null}return ye.toNostrBech32Address(t.pubkey,"npub")},getReplies(e,r){const t=()=>{r==null||r(this.directRepliesByMessageId.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[1]},t,!1)},getLikes(e,r){const t=()=>{r==null||r(this.likesByMessageId.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[7]},t,!1)},getThreadRepliesCount(e,r){const t=()=>{var n;r==null||r(((n=this.threadRepliesByMessageId.get(e))==null?void 0:n.size)??0)};return t(),Ut.subscribe({"#e":[e],kinds:[1]},t,!1)},getReposts(e,r){const t=()=>{r==null||r(this.repostsByMessageId.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[1,6]},t,!1)},getZaps(e,r){const t=()=>{r==null||r(this.zapsByNote.get(e)??new Set)};return t(),Ut.subscribe({"#e":[e],kinds:[9735]},t,!1)},getEventById(e,r=!1,t){const n=this.db.by("id",e);if(t&&n){t(n);return}if(r){const i=setTimeout(()=>{Ut.subscribe({ids:[e]},s=>t==null?void 0:t(s))},300);fetch(`https://api.iris.to/event/${e}`).then(s=>{s.status===200&&s.json().then(o=>{o&&o.id===e&&(clearTimeout(i),zi.handle(o,!0),t==null||t(o))})})}else Ut.subscribe({ids:[e]},t,!1)}},Fe=zi,ye={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:yh,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,r=!1){const t=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),t&&location.reload(),De.get("loggedIn").put(!0),r&&setTimeout(()=>{Tr("/following")}),De.get("showLoginModal").put(!1)},generateKey(){const e=U3();return{priv:e,rpub:yh(e)}},getOrCreate(e){let r=localStorage.getItem("iris.myKey");return r||(r=localStorage.getItem("chatKeyPair")),r?(this.key=JSON.parse(r),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),De.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),De.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return((e=this.key)==null?void 0:e.rpub)||""},getPrivKey(){var e;return((e=this.key)==null?void 0:e.priv)||""},encrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?mh.encrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"encrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},decrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?mh.decrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"decrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},sign:async function(e){const r=this.getPrivKey();return r?UU(e,r):window.nostr?new Promise(t=>{this.processWindowNostr({op:"sign",data:e,callback:t})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:r,pub:t,callback:n}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(t,r),n):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(t,r),n):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(r),s=>n(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,r){return e.then(t=>{r(t)}).catch(t=>{console.error(t),r(null)})},async decryptMessage(e,r){var n,i;const t=Fe.decryptedMessages.get(e.id);if(t){r(t);return}try{const s=this.getPubKey(),o=e.pubkey===s?(i=(n=e.tags)==null?void 0:n.find(l=>l[0]==="p"))==null?void 0:i[1]:e.pubkey;if(!(e&&o))return;let a=await this.decrypt(e.content,o);a!=null&&a.content&&(a=a.content),Fe.decryptedMessages.set(e.id,a),r(a)}catch(s){console.error(s)}},async getPubKeyByNip05Address(e){try{const[r,t]=e.split("@"),n=`https://${t}/.well-known/nostr.json?name=${r}`;return(await(await fetch(n)).json()).names[r]||null}catch(r){return console.error(r),null}},async verifyNip05Address(e,r){try{const[t,n]=e.split("@"),i=`https://${n}/.well-known/nostr.json?name=${t}`,a=(await(await fetch(i)).json()).names;return a[t]===r||a[t.toLowerCase()]===r}catch{return!1}},toNostrBech32Address:function(e,r){if(!e)return null;if(!r)throw new Error("prefix is required");try{const n=Aw(e);return r!==n.prefix?null:n6(r,n.data)}catch{}const t=e.match(/^[0-9a-fA-F]{64}$/);if(t!==null){const n=t[0].match(/.{1,2}/g);if(n!==null){const i=new Uint8Array(n.map(s=>parseInt(s,16)));return n6(r,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:r}=Aw(e);return Ir.arrayToHex(r)}catch{}return null}},ft=e=>e.when?e.children:null;class Wn extends $y{constructor(){super(...arguments);le(this,"unmounted");le(this,"unsubscribes",{})}sub(t,n){return(s,o,a,l)=>{if(this.unmounted){a==null||a();return}this.unsubscribes[n??o]=a,t(s,o,a,l)}}inject(t,n){return this.sub((i,s)=>{const o={};o[t??s]=i,this.setState(o)},n)}unsubscribe(){Object.keys(this.unsubscribes).forEach(t=>{const n=this.unsubscribes[t];n==null||n(),delete this.unsubscribes[t]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}const c1e=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],kq=e=>c1e.some(r=>e.startsWith(r)),Sa=e=>{let r=e.onError,t=e.src,n=!1;if(e.src&&!e.src.startsWith("data:image")&&(!kq(e.src)||e.width)){const o=e.src;if(e.width){const l=e.width*2;t=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${l}:${l}/plain/${o}`}else t=`https://imgproxy.iris.to/insecure/plain/${o}`;const a=e.onError;r=()=>{n?(console.log("original source failed too",o),a&&a()):(console.log("image proxy failed",t,"trying original source",o),n=!0,s(o))}}const[i,s]=Ne(t);return v("img",{src:i,onError:r,onClick:e.onClick,className:e.className,style:e.style,width:e.width,height:e.width,alt:e.alt})};class Ki extends Wn{constructor(){super(...arguments);le(this,"activityTimeout");le(this,"unsub");le(this,"handleEvent")}componentDidMount(){const t=this.props.str;if(!t)return;let n=pt(t);this.handleEvent=s=>{let o=s.detail,a=this.state.created_at||0;!o||o.id!=n||o.created_at<=a||this.setState({picture:o.picture,name:o.name,created_at:o.created_at})},$h.add(this.handleEvent);let i=en.getMemoryProfile(n);this.setState({picture:i.picture,name:i.name,avatar:en.createImageUrl(t,this.props.width)}),this.unsub=en.subscribe(t),this.setState({activity:null})}componentWillUnmount(){var n;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout),this.props.str&&($h.remove(this.handleEvent),(n=this.unsub)==null||n.call(this))}render(){const t=this.props.width,n=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!ut.isBlocked(this.props.str),s=i?"has-picture":"",o=this.props.showTooltip?"tooltip":"";return v("div",{style:{maxWidth:`${t}px`,maxHeight:`${t}px`,cursor:this.props.onClick?"pointer":void 0},className:`inline-flex flex-col flex-shrink-0 items-center justify-center relative select-none ${s} ${o} ${n}`,onClick:this.props.onClick,children:[v("div",{children:[v(ft,{when:i,children:v(Sa,{className:"object-cover rounded-full",src:this.state.picture,width:t,square:!0,onError:()=>this.setState({hasError:!0})})}),v(ft,{when:!i,children:v("img",{width:t,className:"max-w-full rounded-full",src:this.state.avatar||""})})]}),v(ft,{when:this.props.showTooltip&&this.state.name,children:v("span",{className:"tooltiptext",children:this.state.name})})]})}}const f1e=[{url:"/",icon:$H,activeIcon:xH},{url:"/chat",icon:v3,activeIcon:y3},{url:"/post/new",icon:tue,activeIcon:Cue},{url:"/search",icon:SH,activeIcon:Ps.magnifyingGlassBold}],h1e=()=>{const[e,r]=Ne(!1),[t,n]=Ne("/"),[i,s]=Ne(null);xt(()=>{De.get("isMyProfile").on(u=>r(u)),De.get("activeRoute").on(u=>{const h=u.replace("/chat/new","").replace("/chat/",""),c=h.length<u.length?h:null;n(u),s(c)})},[]);const o=u=>{u&&window.scrollTo({top:0})},a=(u,h,c)=>{const d=new RegExp(`^${u}(/|$)`).test(t);return v(Kt,{href:u,className:`btn flex-grow ${d?"active":""}`,onClick:()=>o(d),children:[v(ft,{when:d,children:v(c,{width:24})}),v(ft,{when:!d,children:v(h,{width:24})})]})},l=ye.toNostrBech32Address(ye.getPubKey(),"npub");return v(ft,{when:l&&!i,children:v("footer",{className:"fixed md:hidden bottom-0 z-10 w-full bg-base-200 pb-safe-area",children:v("div",{className:"flex",children:[f1e.map(u=>a(u.url,u.icon,u.activeIcon)),v(Kt,{href:`/${l}`,onClick:()=>o(e),className:"rounded-full btn flex flex-grow",children:v("span",{className:`${e?"border-white":"border-black"} flex rounded-full border-2`,children:v(Ki,{str:l,width:28})})})]})})})},d1e=(e,r)=>r.indexOf(e.slice(-4))!==-1,fB=e=>d1e(e.name,[".jpg","jpeg",".gif",".png"]);class p1e extends Fn{constructor(){super(...arguments);le(this,"torrentId");le(this,"filePath");le(this,"torrent")}componentDidMount(){De.get("player").on(t=>{const n=t&&t.torrentId,i=t&&t.filePath;n!==this.torrentId?(this.filePath=i,this.torrentId=n,this.setState({torrentId:n,isOpen:!!t,splitPath:i&&i.split("/")}),n&&this.startTorrenting()):i&&i!==this.filePath&&(this.filePath=i,this.setState({splitPath:i&&i.split("/")}),this.openFile())}),De.get("player").get("paused").on(t=>this.setPaused(t))}setPaused(t){const i=this.base.querySelector("audio");i&&(t?i.pause():i.play())}onTorrent(t){this.torrent=t;const n=t.files.find(a=>fB(a));let i=t.files.find(a=>fB(a)&&(a.name.indexOf("cover")>-1||a.name.indexOf("poster")>-1));i=i||n;const o=this.base.querySelector(".cover");o.innerHTML="",i&&o.appendChild(i.appendTo()),this.setState({isOpen:!0}),this.openFile()}openFile(){if(this.torrent){const t=this.torrent.files.find(o=>o.path===this.filePath),i=this.base.querySelector(".player");i.innerHTML="",t&&i.appendChild(t.appendTo({autoplay:!0,muted:!1}));const s=i.querySelector("audio");s&&(s.onpause=s.onplay=o=>{const a=o.target;De.get("player").get("paused").put(!!a.paused)})}}async startTorrenting(){const{default:t}=await wr(()=>import("./index-47365148.js").then(s=>s.i),[]),n=new t,i=n.get(this.torrentId);i?this.onTorrent(i):n.add(this.torrentId,(s,o)=>this.onTorrent(o))}closeClicked(){this.setPaused(!0),De.get("player").put(null)}render(){const t=this.state;return v(tt,{children:v("div",{className:"media-player",style:{display:t.isOpen?"":"none"},children:[v("div",{className:"player"}),v("div",{className:"cover"}),v(Kt,{href:`/torrent/${encodeURIComponent(this.state.torrentId??"")}`,className:"info",children:t.splitPath?t.splitPath.map((n,i)=>{var s;return i===(((s=t.splitPath)==null?void 0:s.length)||0)-1?(n=n.split(".").slice(0,-1).join("."),v("p",{children:v("b",{children:n})})):v("p",{children:n})}):""}),v("div",{className:"close",onClick:()=>this.closeClicked(),children:Ps.close})]})})}}var Tq={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(r,t){e.exports=r.document?t(r,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:Tn,function(r,t){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(m){return n.flat.call(m)}:function(m){return n.concat.apply([],m)},a=n.push,l=n.indexOf,u={},h=u.toString,c=u.hasOwnProperty,d=c.toString,y=d.call(Object),w={},b=function(k){return typeof k=="function"&&typeof k.nodeType!="number"&&typeof k.item!="function"},T=function(k){return k!=null&&k===k.window},x=r.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function _(m,k,P){P=P||x;var B,H,U=P.createElement("script");if(U.text=m,k)for(B in A)H=k[B]||k.getAttribute&&k.getAttribute(B),H&&U.setAttribute(B,H);P.head.appendChild(U).parentNode.removeChild(U)}function I(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?u[h.call(m)]||"object":typeof m}var O="3.7.0",C=/HTML$/i,g=function(m,k){return new g.fn.init(m,k)};g.fn=g.prototype={jquery:O,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(m){return m==null?s.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var k=g.merge(this.constructor(),m);return k.prevObject=this,k},each:function(m){return g.each(this,m)},map:function(m){return this.pushStack(g.map(this,function(k,P){return m.call(k,P,k)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(m,k){return(k+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(m,k){return k%2}))},eq:function(m){var k=this.length,P=+m+(m<0?k:0);return this.pushStack(P>=0&&P<k?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var m,k,P,B,H,U,q=arguments[0]||{},ce=1,ie=arguments.length,xe=!1;for(typeof q=="boolean"&&(xe=q,q=arguments[ce]||{},ce++),typeof q!="object"&&!b(q)&&(q={}),ce===ie&&(q=this,ce--);ce<ie;ce++)if((m=arguments[ce])!=null)for(k in m)B=m[k],!(k==="__proto__"||q===B)&&(xe&&B&&(g.isPlainObject(B)||(H=Array.isArray(B)))?(P=q[k],H&&!Array.isArray(P)?U=[]:!H&&!g.isPlainObject(P)?U={}:U=P,H=!1,q[k]=g.extend(xe,U,B)):B!==void 0&&(q[k]=B));return q},g.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var k,P;return!m||h.call(m)!=="[object Object]"?!1:(k=i(m),k?(P=c.call(k,"constructor")&&k.constructor,typeof P=="function"&&d.call(P)===y):!0)},isEmptyObject:function(m){var k;for(k in m)return!1;return!0},globalEval:function(m,k,P){_(m,{nonce:k&&k.nonce},P)},each:function(m,k){var P,B=0;if(R(m))for(P=m.length;B<P&&k.call(m[B],B,m[B])!==!1;B++);else for(B in m)if(k.call(m[B],B,m[B])===!1)break;return m},text:function(m){var k,P="",B=0,H=m.nodeType;if(H){if(H===1||H===9||H===11)return m.textContent;if(H===3||H===4)return m.nodeValue}else for(;k=m[B++];)P+=g.text(k);return P},makeArray:function(m,k){var P=k||[];return m!=null&&(R(Object(m))?g.merge(P,typeof m=="string"?[m]:m):a.call(P,m)),P},inArray:function(m,k,P){return k==null?-1:l.call(k,m,P)},isXMLDoc:function(m){var k=m&&m.namespaceURI,P=m&&(m.ownerDocument||m).documentElement;return!C.test(k||P&&P.nodeName||"HTML")},merge:function(m,k){for(var P=+k.length,B=0,H=m.length;B<P;B++)m[H++]=k[B];return m.length=H,m},grep:function(m,k,P){for(var B,H=[],U=0,q=m.length,ce=!P;U<q;U++)B=!k(m[U],U),B!==ce&&H.push(m[U]);return H},map:function(m,k,P){var B,H,U=0,q=[];if(R(m))for(B=m.length;U<B;U++)H=k(m[U],U,P),H!=null&&q.push(H);else for(U in m)H=k(m[U],U,P),H!=null&&q.push(H);return o(q)},guid:1,support:w}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,k){u["[object "+k+"]"]=k.toLowerCase()});function R(m){var k=!!m&&"length"in m&&m.length,P=I(m);return b(m)||T(m)?!1:P==="array"||k===0||typeof k=="number"&&k>0&&k-1 in m}function M(m,k){return m.nodeName&&m.nodeName.toLowerCase()===k.toLowerCase()}var L=n.pop,W=n.sort,X=n.splice,te="[\\x20\\t\\r\\n\\f]",J=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g");g.contains=function(m,k){var P=k&&k.parentNode;return m===P||!!(P&&P.nodeType===1&&(m.contains?m.contains(P):m.compareDocumentPosition&&m.compareDocumentPosition(P)&16))};var j=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Z(m,k){return k?m==="\0"?"":m.slice(0,-1)+"\\"+m.charCodeAt(m.length-1).toString(16)+" ":"\\"+m}g.escapeSelector=function(m){return(m+"").replace(j,Z)};var se=x,Ee=a;(function(){var m,k,P,B,H,U=Ee,q,ce,ie,xe,Ce,Be=g.expando,Ae=0,Je=0,bt=ff(),Xt=ff(),Zt=ff(),Yn=ff(),fn=function(ne,ge){return ne===ge&&(H=!0),0},yo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",mo="(?:\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",hr="\\["+te+"*("+mo+")(?:"+te+"*([*^$|!~]?=)"+te+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+mo+"))|)"+te+"*\\]",La=":("+mo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+hr+")*)|.*)\\)|)",dr=new RegExp(te+"+","g"),Mr=new RegExp("^"+te+"*,"+te+"*"),lf=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),cd=new RegExp(te+"|>"),Fs=new RegExp(La),Sl=new RegExp("^"+mo+"$"),vs={ID:new RegExp("^#("+mo+")"),CLASS:new RegExp("^\\.("+mo+")"),TAG:new RegExp("^("+mo+"|[*])"),ATTR:new RegExp("^"+hr),PSEUDO:new RegExp("^"+La),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+yo+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},ea=/^(?:input|select|textarea|button)$/i,Fa=/^h\d$/i,Li=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,uf=/[+~]/,ta=new RegExp("\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\([^\\r\\n\\f])","g"),bo=function(ne,ge){var Ie="0x"+ne.slice(1)-65536;return ge||(Ie<0?String.fromCharCode(Ie+65536):String.fromCharCode(Ie>>10|55296,Ie&1023|56320))},Yi=function(){ja()},ng=kl(function(ne){return ne.disabled===!0&&M(ne,"fieldset")},{dir:"parentNode",next:"legend"});function cf(){try{return q.activeElement}catch{}}try{U.apply(n=s.call(se.childNodes),se.childNodes),n[se.childNodes.length].nodeType}catch{U={apply:function(ge,Ie){Ee.apply(ge,s.call(Ie))},call:function(ge){Ee.apply(ge,s.call(arguments,1))}}}function kr(ne,ge,Ie,Oe){var ee,he,fe,Me,We,$t,_t,yt=ge&&ge.ownerDocument,er=ge?ge.nodeType:9;if(Ie=Ie||[],typeof ne!="string"||!ne||er!==1&&er!==9&&er!==11)return Ie;if(!Oe&&(ja(ge),ge=ge||q,ie)){if(er!==11&&(We=Li.exec(ne)))if(ee=We[1]){if(er===9)if(fe=ge.getElementById(ee)){if(fe.id===ee)return U.call(Ie,fe),Ie}else return Ie;else if(yt&&(fe=yt.getElementById(ee))&&kr.contains(ge,fe)&&fe.id===ee)return U.call(Ie,fe),Ie}else{if(We[2])return U.apply(Ie,ge.getElementsByTagName(ne)),Ie;if((ee=We[3])&&ge.getElementsByClassName)return U.apply(Ie,ge.getElementsByClassName(ee)),Ie}if(!Yn[ne+" "]&&(!xe||!xe.test(ne))){if(_t=ne,yt=ge,er===1&&(cd.test(ne)||lf.test(ne))){for(yt=uf.test(ne)&&ig(ge.parentNode)||ge,(yt!=ge||!w.scope)&&((Me=ge.getAttribute("id"))?Me=g.escapeSelector(Me):ge.setAttribute("id",Me=Be)),$t=hf(ne),he=$t.length;he--;)$t[he]=(Me?"#"+Me:":scope")+" "+zs($t[he]);_t=$t.join(",")}try{return U.apply(Ie,yt.querySelectorAll(_t)),Ie}catch{Yn(ne,!0)}finally{Me===Be&&ge.removeAttribute("id")}}}return z0(ne.replace(J,"$1"),ge,Ie,Oe)}function ff(){var ne=[];function ge(Ie,Oe){return ne.push(Ie+" ")>k.cacheLength&&delete ge[ne.shift()],ge[Ie+" "]=Oe}return ge}function js(ne){return ne[Be]=!0,ne}function Pu(ne){var ge=q.createElement("fieldset");try{return!!ne(ge)}catch{return!1}finally{ge.parentNode&&ge.parentNode.removeChild(ge),ge=null}}function s2(ne){return function(ge){return M(ge,"input")&&ge.type===ne}}function o2(ne){return function(ge){return(M(ge,"input")||M(ge,"button"))&&ge.type===ne}}function F0(ne){return function(ge){return"form"in ge?ge.parentNode&&ge.disabled===!1?"label"in ge?"label"in ge.parentNode?ge.parentNode.disabled===ne:ge.disabled===ne:ge.isDisabled===ne||ge.isDisabled!==!ne&&ng(ge)===ne:ge.disabled===ne:"label"in ge?ge.disabled===ne:!1}}function gs(ne){return js(function(ge){return ge=+ge,js(function(Ie,Oe){for(var ee,he=ne([],Ie.length,ge),fe=he.length;fe--;)Ie[ee=he[fe]]&&(Ie[ee]=!(Oe[ee]=Ie[ee]))})})}function ig(ne){return ne&&typeof ne.getElementsByTagName<"u"&&ne}function ja(ne){var ge,Ie=ne?ne.ownerDocument||ne:se;return Ie==q||Ie.nodeType!==9||!Ie.documentElement||(q=Ie,ce=q.documentElement,ie=!g.isXMLDoc(q),Ce=ce.matches||ce.webkitMatchesSelector||ce.msMatchesSelector,se!=q&&(ge=q.defaultView)&&ge.top!==ge&&ge.addEventListener("unload",Yi),w.getById=Pu(function(Oe){return ce.appendChild(Oe).id=g.expando,!q.getElementsByName||!q.getElementsByName(g.expando).length}),w.disconnectedMatch=Pu(function(Oe){return Ce.call(Oe,"*")}),w.scope=Pu(function(){return q.querySelectorAll(":scope")}),w.cssHas=Pu(function(){try{return q.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(k.filter.ID=function(Oe){var ee=Oe.replace(ta,bo);return function(he){return he.getAttribute("id")===ee}},k.find.ID=function(Oe,ee){if(typeof ee.getElementById<"u"&&ie){var he=ee.getElementById(Oe);return he?[he]:[]}}):(k.filter.ID=function(Oe){var ee=Oe.replace(ta,bo);return function(he){var fe=typeof he.getAttributeNode<"u"&&he.getAttributeNode("id");return fe&&fe.value===ee}},k.find.ID=function(Oe,ee){if(typeof ee.getElementById<"u"&&ie){var he,fe,Me,We=ee.getElementById(Oe);if(We){if(he=We.getAttributeNode("id"),he&&he.value===Oe)return[We];for(Me=ee.getElementsByName(Oe),fe=0;We=Me[fe++];)if(he=We.getAttributeNode("id"),he&&he.value===Oe)return[We]}return[]}}),k.find.TAG=function(Oe,ee){return typeof ee.getElementsByTagName<"u"?ee.getElementsByTagName(Oe):ee.querySelectorAll(Oe)},k.find.CLASS=function(Oe,ee){if(typeof ee.getElementsByClassName<"u"&&ie)return ee.getElementsByClassName(Oe)},xe=[],Pu(function(Oe){var ee;ce.appendChild(Oe).innerHTML="<a id='"+Be+"' href='' disabled='disabled'></a><select id='"+Be+"-\r\\' disabled='disabled'><option selected=''></option></select>",Oe.querySelectorAll("[selected]").length||xe.push("\\["+te+"*(?:value|"+yo+")"),Oe.querySelectorAll("[id~="+Be+"-]").length||xe.push("~="),Oe.querySelectorAll("a#"+Be+"+*").length||xe.push(".#.+[+~]"),Oe.querySelectorAll(":checked").length||xe.push(":checked"),ee=q.createElement("input"),ee.setAttribute("type","hidden"),Oe.appendChild(ee).setAttribute("name","D"),ce.appendChild(Oe).disabled=!0,Oe.querySelectorAll(":disabled").length!==2&&xe.push(":enabled",":disabled"),ee=q.createElement("input"),ee.setAttribute("name",""),Oe.appendChild(ee),Oe.querySelectorAll("[name='']").length||xe.push("\\["+te+"*name"+te+"*="+te+`*(?:''|"")`)}),w.cssHas||xe.push(":has"),xe=xe.length&&new RegExp(xe.join("|")),fn=function(Oe,ee){if(Oe===ee)return H=!0,0;var he=!Oe.compareDocumentPosition-!ee.compareDocumentPosition;return he||(he=(Oe.ownerDocument||Oe)==(ee.ownerDocument||ee)?Oe.compareDocumentPosition(ee):1,he&1||!w.sortDetached&&ee.compareDocumentPosition(Oe)===he?Oe===q||Oe.ownerDocument==se&&kr.contains(se,Oe)?-1:ee===q||ee.ownerDocument==se&&kr.contains(se,ee)?1:B?l.call(B,Oe)-l.call(B,ee):0:he&4?-1:1)}),q}kr.matches=function(ne,ge){return kr(ne,null,null,ge)},kr.matchesSelector=function(ne,ge){if(ja(ne),ie&&!Yn[ge+" "]&&(!xe||!xe.test(ge)))try{var Ie=Ce.call(ne,ge);if(Ie||w.disconnectedMatch||ne.document&&ne.document.nodeType!==11)return Ie}catch{Yn(ge,!0)}return kr(ge,q,null,[ne]).length>0},kr.contains=function(ne,ge){return(ne.ownerDocument||ne)!=q&&ja(ne),g.contains(ne,ge)},kr.attr=function(ne,ge){(ne.ownerDocument||ne)!=q&&ja(ne);var Ie=k.attrHandle[ge.toLowerCase()],Oe=Ie&&c.call(k.attrHandle,ge.toLowerCase())?Ie(ne,ge,!ie):void 0;return Oe!==void 0?Oe:ne.getAttribute(ge)},kr.error=function(ne){throw new Error("Syntax error, unrecognized expression: "+ne)},g.uniqueSort=function(ne){var ge,Ie=[],Oe=0,ee=0;if(H=!w.sortStable,B=!w.sortStable&&s.call(ne,0),W.call(ne,fn),H){for(;ge=ne[ee++];)ge===ne[ee]&&(Oe=Ie.push(ee));for(;Oe--;)X.call(ne,Ie[Oe],1)}return B=null,ne},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(s.apply(this)))},k=g.expr={cacheLength:50,createPseudo:js,match:vs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ne){return ne[1]=ne[1].replace(ta,bo),ne[3]=(ne[3]||ne[4]||ne[5]||"").replace(ta,bo),ne[2]==="~="&&(ne[3]=" "+ne[3]+" "),ne.slice(0,4)},CHILD:function(ne){return ne[1]=ne[1].toLowerCase(),ne[1].slice(0,3)==="nth"?(ne[3]||kr.error(ne[0]),ne[4]=+(ne[4]?ne[5]+(ne[6]||1):2*(ne[3]==="even"||ne[3]==="odd")),ne[5]=+(ne[7]+ne[8]||ne[3]==="odd")):ne[3]&&kr.error(ne[0]),ne},PSEUDO:function(ne){var ge,Ie=!ne[6]&&ne[2];return vs.CHILD.test(ne[0])?null:(ne[3]?ne[2]=ne[4]||ne[5]||"":Ie&&Fs.test(Ie)&&(ge=hf(Ie,!0))&&(ge=Ie.indexOf(")",Ie.length-ge)-Ie.length)&&(ne[0]=ne[0].slice(0,ge),ne[2]=Ie.slice(0,ge)),ne.slice(0,3))}},filter:{TAG:function(ne){var ge=ne.replace(ta,bo).toLowerCase();return ne==="*"?function(){return!0}:function(Ie){return M(Ie,ge)}},CLASS:function(ne){var ge=bt[ne+" "];return ge||(ge=new RegExp("(^|"+te+")"+ne+"("+te+"|$)"))&&bt(ne,function(Ie){return ge.test(typeof Ie.className=="string"&&Ie.className||typeof Ie.getAttribute<"u"&&Ie.getAttribute("class")||"")})},ATTR:function(ne,ge,Ie){return function(Oe){var ee=kr.attr(Oe,ne);return ee==null?ge==="!=":ge?(ee+="",ge==="="?ee===Ie:ge==="!="?ee!==Ie:ge==="^="?Ie&&ee.indexOf(Ie)===0:ge==="*="?Ie&&ee.indexOf(Ie)>-1:ge==="$="?Ie&&ee.slice(-Ie.length)===Ie:ge==="~="?(" "+ee.replace(dr," ")+" ").indexOf(Ie)>-1:ge==="|="?ee===Ie||ee.slice(0,Ie.length+1)===Ie+"-":!1):!0}},CHILD:function(ne,ge,Ie,Oe,ee){var he=ne.slice(0,3)!=="nth",fe=ne.slice(-4)!=="last",Me=ge==="of-type";return Oe===1&&ee===0?function(We){return!!We.parentNode}:function(We,$t,_t){var yt,er,Dt,lr,Zn,oi=he!==fe?"nextSibling":"previousSibling",Xn=We.parentNode,Xi=Me&&We.nodeName.toLowerCase(),ra=!_t&&!Me,qt=!1;if(Xn){if(he){for(;oi;){for(Dt=We;Dt=Dt[oi];)if(Me?M(Dt,Xi):Dt.nodeType===1)return!1;Zn=oi=ne==="only"&&!Zn&&"nextSibling"}return!0}if(Zn=[fe?Xn.firstChild:Xn.lastChild],fe&&ra){for(er=Xn[Be]||(Xn[Be]={}),yt=er[ne]||[],lr=yt[0]===Ae&&yt[1],qt=lr&&yt[2],Dt=lr&&Xn.childNodes[lr];Dt=++lr&&Dt&&Dt[oi]||(qt=lr=0)||Zn.pop();)if(Dt.nodeType===1&&++qt&&Dt===We){er[ne]=[Ae,lr,qt];break}}else if(ra&&(er=We[Be]||(We[Be]={}),yt=er[ne]||[],lr=yt[0]===Ae&&yt[1],qt=lr),qt===!1)for(;(Dt=++lr&&Dt&&Dt[oi]||(qt=lr=0)||Zn.pop())&&!((Me?M(Dt,Xi):Dt.nodeType===1)&&++qt&&(ra&&(er=Dt[Be]||(Dt[Be]={}),er[ne]=[Ae,qt]),Dt===We)););return qt-=ee,qt===Oe||qt%Oe===0&&qt/Oe>=0}}},PSEUDO:function(ne,ge){var Ie,Oe=k.pseudos[ne]||k.setFilters[ne.toLowerCase()]||kr.error("unsupported pseudo: "+ne);return Oe[Be]?Oe(ge):Oe.length>1?(Ie=[ne,ne,"",ge],k.setFilters.hasOwnProperty(ne.toLowerCase())?js(function(ee,he){for(var fe,Me=Oe(ee,ge),We=Me.length;We--;)fe=l.call(ee,Me[We]),ee[fe]=!(he[fe]=Me[We])}):function(ee){return Oe(ee,0,Ie)}):Oe}},pseudos:{not:js(function(ne){var ge=[],Ie=[],Oe=og(ne.replace(J,"$1"));return Oe[Be]?js(function(ee,he,fe,Me){for(var We,$t=Oe(ee,null,Me,[]),_t=ee.length;_t--;)(We=$t[_t])&&(ee[_t]=!(he[_t]=We))}):function(ee,he,fe){return ge[0]=ee,Oe(ge,null,fe,Ie),ge[0]=null,!Ie.pop()}}),has:js(function(ne){return function(ge){return kr(ne,ge).length>0}}),contains:js(function(ne){return ne=ne.replace(ta,bo),function(ge){return(ge.textContent||g.text(ge)).indexOf(ne)>-1}}),lang:js(function(ne){return Sl.test(ne||"")||kr.error("unsupported lang: "+ne),ne=ne.replace(ta,bo).toLowerCase(),function(ge){var Ie;do if(Ie=ie?ge.lang:ge.getAttribute("xml:lang")||ge.getAttribute("lang"))return Ie=Ie.toLowerCase(),Ie===ne||Ie.indexOf(ne+"-")===0;while((ge=ge.parentNode)&&ge.nodeType===1);return!1}}),target:function(ne){var ge=r.location&&r.location.hash;return ge&&ge.slice(1)===ne.id},root:function(ne){return ne===ce},focus:function(ne){return ne===cf()&&q.hasFocus()&&!!(ne.type||ne.href||~ne.tabIndex)},enabled:F0(!1),disabled:F0(!0),checked:function(ne){return M(ne,"input")&&!!ne.checked||M(ne,"option")&&!!ne.selected},selected:function(ne){return ne.parentNode&&ne.parentNode.selectedIndex,ne.selected===!0},empty:function(ne){for(ne=ne.firstChild;ne;ne=ne.nextSibling)if(ne.nodeType<6)return!1;return!0},parent:function(ne){return!k.pseudos.empty(ne)},header:function(ne){return Fa.test(ne.nodeName)},input:function(ne){return ea.test(ne.nodeName)},button:function(ne){return M(ne,"input")&&ne.type==="button"||M(ne,"button")},text:function(ne){var ge;return M(ne,"input")&&ne.type==="text"&&((ge=ne.getAttribute("type"))==null||ge.toLowerCase()==="text")},first:gs(function(){return[0]}),last:gs(function(ne,ge){return[ge-1]}),eq:gs(function(ne,ge,Ie){return[Ie<0?Ie+ge:Ie]}),even:gs(function(ne,ge){for(var Ie=0;Ie<ge;Ie+=2)ne.push(Ie);return ne}),odd:gs(function(ne,ge){for(var Ie=1;Ie<ge;Ie+=2)ne.push(Ie);return ne}),lt:gs(function(ne,ge,Ie){var Oe;for(Ie<0?Oe=Ie+ge:Ie>ge?Oe=ge:Oe=Ie;--Oe>=0;)ne.push(Oe);return ne}),gt:gs(function(ne,ge,Ie){for(var Oe=Ie<0?Ie+ge:Ie;++Oe<ge;)ne.push(Oe);return ne})}},k.pseudos.nth=k.pseudos.eq;for(m in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[m]=s2(m);for(m in{submit:!0,reset:!0})k.pseudos[m]=o2(m);function fd(){}fd.prototype=k.filters=k.pseudos,k.setFilters=new fd;function hf(ne,ge){var Ie,Oe,ee,he,fe,Me,We,$t=Xt[ne+" "];if($t)return ge?0:$t.slice(0);for(fe=ne,Me=[],We=k.preFilter;fe;){(!Ie||(Oe=Mr.exec(fe)))&&(Oe&&(fe=fe.slice(Oe[0].length)||fe),Me.push(ee=[])),Ie=!1,(Oe=lf.exec(fe))&&(Ie=Oe.shift(),ee.push({value:Ie,type:Oe[0].replace(J," ")}),fe=fe.slice(Ie.length));for(he in k.filter)(Oe=vs[he].exec(fe))&&(!We[he]||(Oe=We[he](Oe)))&&(Ie=Oe.shift(),ee.push({value:Ie,type:he,matches:Oe}),fe=fe.slice(Ie.length));if(!Ie)break}return ge?fe.length:fe?kr.error(ne):Xt(ne,Me).slice(0)}function zs(ne){for(var ge=0,Ie=ne.length,Oe="";ge<Ie;ge++)Oe+=ne[ge].value;return Oe}function kl(ne,ge,Ie){var Oe=ge.dir,ee=ge.next,he=ee||Oe,fe=Ie&&he==="parentNode",Me=Je++;return ge.first?function(We,$t,_t){for(;We=We[Oe];)if(We.nodeType===1||fe)return ne(We,$t,_t);return!1}:function(We,$t,_t){var yt,er,Dt=[Ae,Me];if(_t){for(;We=We[Oe];)if((We.nodeType===1||fe)&&ne(We,$t,_t))return!0}else for(;We=We[Oe];)if(We.nodeType===1||fe)if(er=We[Be]||(We[Be]={}),ee&&M(We,ee))We=We[Oe]||We;else{if((yt=er[he])&&yt[0]===Ae&&yt[1]===Me)return Dt[2]=yt[2];if(er[he]=Dt,Dt[2]=ne(We,$t,_t))return!0}return!1}}function sg(ne){return ne.length>1?function(ge,Ie,Oe){for(var ee=ne.length;ee--;)if(!ne[ee](ge,Ie,Oe))return!1;return!0}:ne[0]}function a2(ne,ge,Ie){for(var Oe=0,ee=ge.length;Oe<ee;Oe++)kr(ne,ge[Oe],Ie);return Ie}function hd(ne,ge,Ie,Oe,ee){for(var he,fe=[],Me=0,We=ne.length,$t=ge!=null;Me<We;Me++)(he=ne[Me])&&(!Ie||Ie(he,Oe,ee))&&(fe.push(he),$t&&ge.push(Me));return fe}function za(ne,ge,Ie,Oe,ee,he){return Oe&&!Oe[Be]&&(Oe=za(Oe)),ee&&!ee[Be]&&(ee=za(ee,he)),js(function(fe,Me,We,$t){var _t,yt,er,Dt,lr=[],Zn=[],oi=Me.length,Xn=fe||a2(ge||"*",We.nodeType?[We]:We,[]),Xi=ne&&(fe||!ge)?hd(Xn,lr,ne,We,$t):Xn;if(Ie?(Dt=ee||(fe?ne:oi||Oe)?[]:Me,Ie(Xi,Dt,We,$t)):Dt=Xi,Oe)for(_t=hd(Dt,Zn),Oe(_t,[],We,$t),yt=_t.length;yt--;)(er=_t[yt])&&(Dt[Zn[yt]]=!(Xi[Zn[yt]]=er));if(fe){if(ee||ne){if(ee){for(_t=[],yt=Dt.length;yt--;)(er=Dt[yt])&&_t.push(Xi[yt]=er);ee(null,Dt=[],_t,$t)}for(yt=Dt.length;yt--;)(er=Dt[yt])&&(_t=ee?l.call(fe,er):lr[yt])>-1&&(fe[_t]=!(Me[_t]=er))}}else Dt=hd(Dt===Me?Dt.splice(oi,Dt.length):Dt),ee?ee(null,Me,Dt,$t):U.apply(Me,Dt)})}function Zi(ne){for(var ge,Ie,Oe,ee=ne.length,he=k.relative[ne[0].type],fe=he||k.relative[" "],Me=he?1:0,We=kl(function(yt){return yt===ge},fe,!0),$t=kl(function(yt){return l.call(ge,yt)>-1},fe,!0),_t=[function(yt,er,Dt){var lr=!he&&(Dt||er!=P)||((ge=er).nodeType?We(yt,er,Dt):$t(yt,er,Dt));return ge=null,lr}];Me<ee;Me++)if(Ie=k.relative[ne[Me].type])_t=[kl(sg(_t),Ie)];else{if(Ie=k.filter[ne[Me].type].apply(null,ne[Me].matches),Ie[Be]){for(Oe=++Me;Oe<ee&&!k.relative[ne[Oe].type];Oe++);return za(Me>1&&sg(_t),Me>1&&zs(ne.slice(0,Me-1).concat({value:ne[Me-2].type===" "?"*":""})).replace(J,"$1"),Ie,Me<Oe&&Zi(ne.slice(Me,Oe)),Oe<ee&&Zi(ne=ne.slice(Oe)),Oe<ee&&zs(ne))}_t.push(Ie)}return sg(_t)}function j0(ne,ge){var Ie=ge.length>0,Oe=ne.length>0,ee=function(he,fe,Me,We,$t){var _t,yt,er,Dt=0,lr="0",Zn=he&&[],oi=[],Xn=P,Xi=he||Oe&&k.find.TAG("*",$t),ra=Ae+=Xn==null?1:Math.random()||.1,qt=Xi.length;for($t&&(P=fe==q||fe||$t);lr!==qt&&(_t=Xi[lr])!=null;lr++){if(Oe&&_t){for(yt=0,!fe&&_t.ownerDocument!=q&&(ja(_t),Me=!ie);er=ne[yt++];)if(er(_t,fe||q,Me)){U.call(We,_t);break}$t&&(Ae=ra)}Ie&&((_t=!er&&_t)&&Dt--,he&&Zn.push(_t))}if(Dt+=lr,Ie&&lr!==Dt){for(yt=0;er=ge[yt++];)er(Zn,oi,fe,Me);if(he){if(Dt>0)for(;lr--;)Zn[lr]||oi[lr]||(oi[lr]=L.call(We));oi=hd(oi)}U.apply(We,oi),$t&&!he&&oi.length>0&&Dt+ge.length>1&&g.uniqueSort(We)}return $t&&(Ae=ra,P=Xn),Zn};return Ie?js(ee):ee}function og(ne,ge){var Ie,Oe=[],ee=[],he=Zt[ne+" "];if(!he){for(ge||(ge=hf(ne)),Ie=ge.length;Ie--;)he=Zi(ge[Ie]),he[Be]?Oe.push(he):ee.push(he);he=Zt(ne,j0(ee,Oe)),he.selector=ne}return he}function z0(ne,ge,Ie,Oe){var ee,he,fe,Me,We,$t=typeof ne=="function"&&ne,_t=!Oe&&hf(ne=$t.selector||ne);if(Ie=Ie||[],_t.length===1){if(he=_t[0]=_t[0].slice(0),he.length>2&&(fe=he[0]).type==="ID"&&ge.nodeType===9&&ie&&k.relative[he[1].type]){if(ge=(k.find.ID(fe.matches[0].replace(ta,bo),ge)||[])[0],ge)$t&&(ge=ge.parentNode);else return Ie;ne=ne.slice(he.shift().value.length)}for(ee=vs.needsContext.test(ne)?0:he.length;ee--&&(fe=he[ee],!k.relative[Me=fe.type]);)if((We=k.find[Me])&&(Oe=We(fe.matches[0].replace(ta,bo),uf.test(he[0].type)&&ig(ge.parentNode)||ge))){if(he.splice(ee,1),ne=Oe.length&&zs(he),!ne)return U.apply(Ie,Oe),Ie;break}}return($t||og(ne,_t))(Oe,ge,!ie,Ie,!ge||uf.test(ne)&&ig(ge.parentNode)||ge),Ie}w.sortStable=Be.split("").sort(fn).join("")===Be,ja(),w.sortDetached=Pu(function(ne){return ne.compareDocumentPosition(q.createElement("fieldset"))&1}),g.find=kr,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,kr.compile=og,kr.select=z0,kr.setDocument=ja,kr.escape=g.escapeSelector,kr.getText=g.text,kr.isXML=g.isXMLDoc,kr.selectors=g.expr,kr.support=g.support,kr.uniqueSort=g.uniqueSort})();var me=function(m,k,P){for(var B=[],H=P!==void 0;(m=m[k])&&m.nodeType!==9;)if(m.nodeType===1){if(H&&g(m).is(P))break;B.push(m)}return B},Pe=function(m,k){for(var P=[];m;m=m.nextSibling)m.nodeType===1&&m!==k&&P.push(m);return P},Ue=g.expr.match.needsContext,Ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function it(m,k,P){return b(k)?g.grep(m,function(B,H){return!!k.call(B,H,B)!==P}):k.nodeType?g.grep(m,function(B){return B===k!==P}):typeof k!="string"?g.grep(m,function(B){return l.call(k,B)>-1!==P}):g.filter(k,m,P)}g.filter=function(m,k,P){var B=k[0];return P&&(m=":not("+m+")"),k.length===1&&B.nodeType===1?g.find.matchesSelector(B,m)?[B]:[]:g.find.matches(m,g.grep(k,function(H){return H.nodeType===1}))},g.fn.extend({find:function(m){var k,P,B=this.length,H=this;if(typeof m!="string")return this.pushStack(g(m).filter(function(){for(k=0;k<B;k++)if(g.contains(H[k],this))return!0}));for(P=this.pushStack([]),k=0;k<B;k++)g.find(m,H[k],P);return B>1?g.uniqueSort(P):P},filter:function(m){return this.pushStack(it(this,m||[],!1))},not:function(m){return this.pushStack(it(this,m||[],!0))},is:function(m){return!!it(this,typeof m=="string"&&Ue.test(m)?g(m):m||[],!1).length}});var _e,pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=g.fn.init=function(m,k,P){var B,H;if(!m)return this;if(P=P||_e,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?B=[null,m,null]:B=pe.exec(m),B&&(B[1]||!k))if(B[1]){if(k=k instanceof g?k[0]:k,g.merge(this,g.parseHTML(B[1],k&&k.nodeType?k.ownerDocument||k:x,!0)),Ge.test(B[1])&&g.isPlainObject(k))for(B in k)b(this[B])?this[B](k[B]):this.attr(B,k[B]);return this}else return H=x.getElementById(B[2]),H&&(this[0]=H,this.length=1),this;else return!k||k.jquery?(k||P).find(m):this.constructor(k).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(b(m))return P.ready!==void 0?P.ready(m):m(g)}return g.makeArray(m,this)};Te.prototype=g.fn,_e=g(x);var je=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(m){var k=g(m,this),P=k.length;return this.filter(function(){for(var B=0;B<P;B++)if(g.contains(this,k[B]))return!0})},closest:function(m,k){var P,B=0,H=this.length,U=[],q=typeof m!="string"&&g(m);if(!Ue.test(m)){for(;B<H;B++)for(P=this[B];P&&P!==k;P=P.parentNode)if(P.nodeType<11&&(q?q.index(P)>-1:P.nodeType===1&&g.find.matchesSelector(P,m))){U.push(P);break}}return this.pushStack(U.length>1?g.uniqueSort(U):U)},index:function(m){return m?typeof m=="string"?l.call(g(m),this[0]):l.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,k){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(m,k))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function S(m,k){for(;(m=m[k])&&m.nodeType!==1;);return m}g.each({parent:function(m){var k=m.parentNode;return k&&k.nodeType!==11?k:null},parents:function(m){return me(m,"parentNode")},parentsUntil:function(m,k,P){return me(m,"parentNode",P)},next:function(m){return S(m,"nextSibling")},prev:function(m){return S(m,"previousSibling")},nextAll:function(m){return me(m,"nextSibling")},prevAll:function(m){return me(m,"previousSibling")},nextUntil:function(m,k,P){return me(m,"nextSibling",P)},prevUntil:function(m,k,P){return me(m,"previousSibling",P)},siblings:function(m){return Pe((m.parentNode||{}).firstChild,m)},children:function(m){return Pe(m.firstChild)},contents:function(m){return m.contentDocument!=null&&i(m.contentDocument)?m.contentDocument:(M(m,"template")&&(m=m.content||m),g.merge([],m.childNodes))}},function(m,k){g.fn[m]=function(P,B){var H=g.map(this,k,P);return m.slice(-5)!=="Until"&&(B=P),B&&typeof B=="string"&&(H=g.filter(B,H)),this.length>1&&($[m]||g.uniqueSort(H),je.test(m)&&H.reverse()),this.pushStack(H)}});var N=/[^\x20\t\r\n\f]+/g;function F(m){var k={};return g.each(m.match(N)||[],function(P,B){k[B]=!0}),k}g.Callbacks=function(m){m=typeof m=="string"?F(m):g.extend({},m);var k,P,B,H,U=[],q=[],ce=-1,ie=function(){for(H=H||m.once,B=k=!0;q.length;ce=-1)for(P=q.shift();++ce<U.length;)U[ce].apply(P[0],P[1])===!1&&m.stopOnFalse&&(ce=U.length,P=!1);m.memory||(P=!1),k=!1,H&&(P?U=[]:U="")},xe={add:function(){return U&&(P&&!k&&(ce=U.length-1,q.push(P)),function Ce(Be){g.each(Be,function(Ae,Je){b(Je)?(!m.unique||!xe.has(Je))&&U.push(Je):Je&&Je.length&&I(Je)!=="string"&&Ce(Je)})}(arguments),P&&!k&&ie()),this},remove:function(){return g.each(arguments,function(Ce,Be){for(var Ae;(Ae=g.inArray(Be,U,Ae))>-1;)U.splice(Ae,1),Ae<=ce&&ce--}),this},has:function(Ce){return Ce?g.inArray(Ce,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return H=q=[],U=P="",this},disabled:function(){return!U},lock:function(){return H=q=[],!P&&!k&&(U=P=""),this},locked:function(){return!!H},fireWith:function(Ce,Be){return H||(Be=Be||[],Be=[Ce,Be.slice?Be.slice():Be],q.push(Be),k||ie()),this},fire:function(){return xe.fireWith(this,arguments),this},fired:function(){return!!B}};return xe};function z(m){return m}function V(m){throw m}function ae(m,k,P,B){var H;try{m&&b(H=m.promise)?H.call(m).done(k).fail(P):m&&b(H=m.then)?H.call(m,k,P):k.apply(void 0,[m].slice(B))}catch(U){P.apply(void 0,[U])}}g.extend({Deferred:function(m){var k=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],P="pending",B={state:function(){return P},always:function(){return H.done(arguments).fail(arguments),this},catch:function(U){return B.then(null,U)},pipe:function(){var U=arguments;return g.Deferred(function(q){g.each(k,function(ce,ie){var xe=b(U[ie[4]])&&U[ie[4]];H[ie[1]](function(){var Ce=xe&&xe.apply(this,arguments);Ce&&b(Ce.promise)?Ce.promise().progress(q.notify).done(q.resolve).fail(q.reject):q[ie[0]+"With"](this,xe?[Ce]:arguments)})}),U=null}).promise()},then:function(U,q,ce){var ie=0;function xe(Ce,Be,Ae,Je){return function(){var bt=this,Xt=arguments,Zt=function(){var fn,yo;if(!(Ce<ie)){if(fn=Ae.apply(bt,Xt),fn===Be.promise())throw new TypeError("Thenable self-resolution");yo=fn&&(typeof fn=="object"||typeof fn=="function")&&fn.then,b(yo)?Je?yo.call(fn,xe(ie,Be,z,Je),xe(ie,Be,V,Je)):(ie++,yo.call(fn,xe(ie,Be,z,Je),xe(ie,Be,V,Je),xe(ie,Be,z,Be.notifyWith))):(Ae!==z&&(bt=void 0,Xt=[fn]),(Je||Be.resolveWith)(bt,Xt))}},Yn=Je?Zt:function(){try{Zt()}catch(fn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(fn,Yn.error),Ce+1>=ie&&(Ae!==V&&(bt=void 0,Xt=[fn]),Be.rejectWith(bt,Xt))}};Ce?Yn():(g.Deferred.getErrorHook?Yn.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(Yn.error=g.Deferred.getStackHook()),r.setTimeout(Yn))}}return g.Deferred(function(Ce){k[0][3].add(xe(0,Ce,b(ce)?ce:z,Ce.notifyWith)),k[1][3].add(xe(0,Ce,b(U)?U:z)),k[2][3].add(xe(0,Ce,b(q)?q:V))}).promise()},promise:function(U){return U!=null?g.extend(U,B):B}},H={};return g.each(k,function(U,q){var ce=q[2],ie=q[5];B[q[1]]=ce.add,ie&&ce.add(function(){P=ie},k[3-U][2].disable,k[3-U][3].disable,k[0][2].lock,k[0][3].lock),ce.add(q[3].fire),H[q[0]]=function(){return H[q[0]+"With"](this===H?void 0:this,arguments),this},H[q[0]+"With"]=ce.fireWith}),B.promise(H),m&&m.call(H,H),H},when:function(m){var k=arguments.length,P=k,B=Array(P),H=s.call(arguments),U=g.Deferred(),q=function(ce){return function(ie){B[ce]=this,H[ce]=arguments.length>1?s.call(arguments):ie,--k||U.resolveWith(B,H)}};if(k<=1&&(ae(m,U.done(q(P)).resolve,U.reject,!k),U.state()==="pending"||b(H[P]&&H[P].then)))return U.then();for(;P--;)ae(H[P],q(P),U.reject);return U.promise()}});var ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(m,k){r.console&&r.console.warn&&m&&ve.test(m.name)&&r.console.warn("jQuery.Deferred exception: "+m.message,m.stack,k)},g.readyException=function(m){r.setTimeout(function(){throw m})};var He=g.Deferred();g.fn.ready=function(m){return He.then(m).catch(function(k){g.readyException(k)}),this},g.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(m!==!0&&--g.readyWait>0)&&He.resolveWith(x,[g]))}}),g.ready.then=He.then;function ze(){x.removeEventListener("DOMContentLoaded",ze),r.removeEventListener("load",ze),g.ready()}x.readyState==="complete"||x.readyState!=="loading"&&!x.documentElement.doScroll?r.setTimeout(g.ready):(x.addEventListener("DOMContentLoaded",ze),r.addEventListener("load",ze));var st=function(m,k,P,B,H,U,q){var ce=0,ie=m.length,xe=P==null;if(I(P)==="object"){H=!0;for(ce in P)st(m,k,ce,P[ce],!0,U,q)}else if(B!==void 0&&(H=!0,b(B)||(q=!0),xe&&(q?(k.call(m,B),k=null):(xe=k,k=function(Ce,Be,Ae){return xe.call(g(Ce),Ae)})),k))for(;ce<ie;ce++)k(m[ce],P,q?B:B.call(m[ce],ce,k(m[ce],P)));return H?m:xe?k.call(m):ie?k(m[0],P):U},wt=/^-ms-/,mt=/-([a-z])/g;function vt(m,k){return k.toUpperCase()}function Rt(m){return m.replace(wt,"ms-").replace(mt,vt)}var fr=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function Kr(){this.expando=g.expando+Kr.uid++}Kr.uid=1,Kr.prototype={cache:function(m){var k=m[this.expando];return k||(k={},fr(m)&&(m.nodeType?m[this.expando]=k:Object.defineProperty(m,this.expando,{value:k,configurable:!0}))),k},set:function(m,k,P){var B,H=this.cache(m);if(typeof k=="string")H[Rt(k)]=P;else for(B in k)H[Rt(B)]=k[B];return H},get:function(m,k){return k===void 0?this.cache(m):m[this.expando]&&m[this.expando][Rt(k)]},access:function(m,k,P){return k===void 0||k&&typeof k=="string"&&P===void 0?this.get(m,k):(this.set(m,k,P),P!==void 0?P:k)},remove:function(m,k){var P,B=m[this.expando];if(B!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(Rt):(k=Rt(k),k=k in B?[k]:k.match(N)||[]),P=k.length;P--;)delete B[k[P]];(k===void 0||g.isEmptyObject(B))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var k=m[this.expando];return k!==void 0&&!g.isEmptyObject(k)}};var ct=new Kr,It=new Kr,pn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ri=/[A-Z]/g;function Vi(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:pn.test(m)?JSON.parse(m):m}function vn(m,k,P){var B;if(P===void 0&&m.nodeType===1)if(B="data-"+k.replace(Ri,"-$&").toLowerCase(),P=m.getAttribute(B),typeof P=="string"){try{P=Vi(P)}catch{}It.set(m,k,P)}else P=void 0;return P}g.extend({hasData:function(m){return It.hasData(m)||ct.hasData(m)},data:function(m,k,P){return It.access(m,k,P)},removeData:function(m,k){It.remove(m,k)},_data:function(m,k,P){return ct.access(m,k,P)},_removeData:function(m,k){ct.remove(m,k)}}),g.fn.extend({data:function(m,k){var P,B,H,U=this[0],q=U&&U.attributes;if(m===void 0){if(this.length&&(H=It.get(U),U.nodeType===1&&!ct.get(U,"hasDataAttrs"))){for(P=q.length;P--;)q[P]&&(B=q[P].name,B.indexOf("data-")===0&&(B=Rt(B.slice(5)),vn(U,B,H[B])));ct.set(U,"hasDataAttrs",!0)}return H}return typeof m=="object"?this.each(function(){It.set(this,m)}):st(this,function(ce){var ie;if(U&&ce===void 0)return ie=It.get(U,m),ie!==void 0||(ie=vn(U,m),ie!==void 0)?ie:void 0;this.each(function(){It.set(this,m,ce)})},null,k,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){It.remove(this,m)})}}),g.extend({queue:function(m,k,P){var B;if(m)return k=(k||"fx")+"queue",B=ct.get(m,k),P&&(!B||Array.isArray(P)?B=ct.access(m,k,g.makeArray(P)):B.push(P)),B||[]},dequeue:function(m,k){k=k||"fx";var P=g.queue(m,k),B=P.length,H=P.shift(),U=g._queueHooks(m,k),q=function(){g.dequeue(m,k)};H==="inprogress"&&(H=P.shift(),B--),H&&(k==="fx"&&P.unshift("inprogress"),delete U.stop,H.call(m,q,U)),!B&&U&&U.empty.fire()},_queueHooks:function(m,k){var P=k+"queueHooks";return ct.get(m,P)||ct.access(m,P,{empty:g.Callbacks("once memory").add(function(){ct.remove(m,[k+"queue",P])})})}}),g.fn.extend({queue:function(m,k){var P=2;return typeof m!="string"&&(k=m,m="fx",P--),arguments.length<P?g.queue(this[0],m):k===void 0?this:this.each(function(){var B=g.queue(this,m,k);g._queueHooks(this,m),m==="fx"&&B[0]!=="inprogress"&&g.dequeue(this,m)})},dequeue:function(m){return this.each(function(){g.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,k){var P,B=1,H=g.Deferred(),U=this,q=this.length,ce=function(){--B||H.resolveWith(U,[U])};for(typeof m!="string"&&(k=m,m=void 0),m=m||"fx";q--;)P=ct.get(U[q],m+"queueHooks"),P&&P.empty&&(B++,P.empty.add(ce));return ce(),H.promise(k)}});var ds=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,co=new RegExp("^(?:([+-])=|)("+ds+")([a-z%]*)$","i"),Di=["Top","Right","Bottom","Left"],Gi=x.documentElement,fo=function(m){return g.contains(m.ownerDocument,m)},Qc={composed:!0};Gi.getRootNode&&(fo=function(m){return g.contains(m.ownerDocument,m)||m.getRootNode(Qc)===m.ownerDocument});var ho=function(m,k){return m=k||m,m.style.display==="none"||m.style.display===""&&fo(m)&&g.css(m,"display")==="none"};function ef(m,k,P,B){var H,U,q=20,ce=B?function(){return B.cur()}:function(){return g.css(m,k,"")},ie=ce(),xe=P&&P[3]||(g.cssNumber[k]?"":"px"),Ce=m.nodeType&&(g.cssNumber[k]||xe!=="px"&&+ie)&&co.exec(g.css(m,k));if(Ce&&Ce[3]!==xe){for(ie=ie/2,xe=xe||Ce[3],Ce=+ie||1;q--;)g.style(m,k,Ce+xe),(1-U)*(1-(U=ce()/ie||.5))<=0&&(q=0),Ce=Ce/U;Ce=Ce*2,g.style(m,k,Ce+xe),P=P||[]}return P&&(Ce=+Ce||+ie||0,H=P[1]?Ce+(P[1]+1)*P[2]:+P[2],B&&(B.unit=xe,B.start=Ce,B.end=H)),H}var Gh={};function po(m){var k,P=m.ownerDocument,B=m.nodeName,H=Gh[B];return H||(k=P.body.appendChild(P.createElement(B)),H=g.css(k,"display"),k.parentNode.removeChild(k),H==="none"&&(H="block"),Gh[B]=H,H)}function Xo(m,k){for(var P,B,H=[],U=0,q=m.length;U<q;U++)B=m[U],B.style&&(P=B.style.display,k?(P==="none"&&(H[U]=ct.get(B,"display")||null,H[U]||(B.style.display="")),B.style.display===""&&ho(B)&&(H[U]=po(B))):P!=="none"&&(H[U]="none",ct.set(B,"display",P)));for(U=0;U<q;U++)H[U]!=null&&(m[U].style.display=H[U]);return m}g.fn.extend({show:function(){return Xo(this,!0)},hide:function(){return Xo(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){ho(this)?g(this).show():g(this).hide()})}});var Na=/^(?:checkbox|radio)$/i,tf=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Yh=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=x.createDocumentFragment(),k=m.appendChild(x.createElement("div")),P=x.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),k.appendChild(P),w.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,k.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!k.cloneNode(!0).lastChild.defaultValue,k.innerHTML="<option></option>",w.option=!!k.lastChild})();var Bi={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bi.tbody=Bi.tfoot=Bi.colgroup=Bi.caption=Bi.thead,Bi.th=Bi.td,w.option||(Bi.optgroup=Bi.option=[1,"<select multiple='multiple'>","</select>"]);function si(m,k){var P;return typeof m.getElementsByTagName<"u"?P=m.getElementsByTagName(k||"*"):typeof m.querySelectorAll<"u"?P=m.querySelectorAll(k||"*"):P=[],k===void 0||k&&M(m,k)?g.merge([m],P):P}function Tu(m,k){for(var P=0,B=m.length;P<B;P++)ct.set(m[P],"globalEval",!k||ct.get(k[P],"globalEval"))}var Wv=/<|&#?\w+;/;function Zh(m,k,P,B,H){for(var U,q,ce,ie,xe,Ce,Be=k.createDocumentFragment(),Ae=[],Je=0,bt=m.length;Je<bt;Je++)if(U=m[Je],U||U===0)if(I(U)==="object")g.merge(Ae,U.nodeType?[U]:U);else if(!Wv.test(U))Ae.push(k.createTextNode(U));else{for(q=q||Be.appendChild(k.createElement("div")),ce=(tf.exec(U)||["",""])[1].toLowerCase(),ie=Bi[ce]||Bi._default,q.innerHTML=ie[1]+g.htmlPrefilter(U)+ie[2],Ce=ie[0];Ce--;)q=q.lastChild;g.merge(Ae,q.childNodes),q=Be.firstChild,q.textContent=""}for(Be.textContent="",Je=0;U=Ae[Je++];){if(B&&g.inArray(U,B)>-1){H&&H.push(U);continue}if(xe=fo(U),q=si(Be.appendChild(U),"script"),xe&&Tu(q),P)for(Ce=0;U=q[Ce++];)Yh.test(U.type||"")&&P.push(U)}return Be}var Xh=/^([^.]*)(?:\.(.+)|)/;function vo(){return!0}function Ra(){return!1}function $l(m,k,P,B,H,U){var q,ce;if(typeof k=="object"){typeof P!="string"&&(B=B||P,P=void 0);for(ce in k)$l(m,ce,P,B,k[ce],U);return m}if(B==null&&H==null?(H=P,B=P=void 0):H==null&&(typeof P=="string"?(H=B,B=void 0):(H=B,B=P,P=void 0)),H===!1)H=Ra;else if(!H)return m;return U===1&&(q=H,H=function(ie){return g().off(ie),q.apply(this,arguments)},H.guid=q.guid||(q.guid=g.guid++)),m.each(function(){g.event.add(this,k,H,B,P)})}g.event={global:{},add:function(m,k,P,B,H){var U,q,ce,ie,xe,Ce,Be,Ae,Je,bt,Xt,Zt=ct.get(m);if(fr(m))for(P.handler&&(U=P,P=U.handler,H=U.selector),H&&g.find.matchesSelector(Gi,H),P.guid||(P.guid=g.guid++),(ie=Zt.events)||(ie=Zt.events=Object.create(null)),(q=Zt.handle)||(q=Zt.handle=function(Yn){return typeof g<"u"&&g.event.triggered!==Yn.type?g.event.dispatch.apply(m,arguments):void 0}),k=(k||"").match(N)||[""],xe=k.length;xe--;)ce=Xh.exec(k[xe])||[],Je=Xt=ce[1],bt=(ce[2]||"").split(".").sort(),Je&&(Be=g.event.special[Je]||{},Je=(H?Be.delegateType:Be.bindType)||Je,Be=g.event.special[Je]||{},Ce=g.extend({type:Je,origType:Xt,data:B,handler:P,guid:P.guid,selector:H,needsContext:H&&g.expr.match.needsContext.test(H),namespace:bt.join(".")},U),(Ae=ie[Je])||(Ae=ie[Je]=[],Ae.delegateCount=0,(!Be.setup||Be.setup.call(m,B,bt,q)===!1)&&m.addEventListener&&m.addEventListener(Je,q)),Be.add&&(Be.add.call(m,Ce),Ce.handler.guid||(Ce.handler.guid=P.guid)),H?Ae.splice(Ae.delegateCount++,0,Ce):Ae.push(Ce),g.event.global[Je]=!0)},remove:function(m,k,P,B,H){var U,q,ce,ie,xe,Ce,Be,Ae,Je,bt,Xt,Zt=ct.hasData(m)&&ct.get(m);if(!(!Zt||!(ie=Zt.events))){for(k=(k||"").match(N)||[""],xe=k.length;xe--;){if(ce=Xh.exec(k[xe])||[],Je=Xt=ce[1],bt=(ce[2]||"").split(".").sort(),!Je){for(Je in ie)g.event.remove(m,Je+k[xe],P,B,!0);continue}for(Be=g.event.special[Je]||{},Je=(B?Be.delegateType:Be.bindType)||Je,Ae=ie[Je]||[],ce=ce[2]&&new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"),q=U=Ae.length;U--;)Ce=Ae[U],(H||Xt===Ce.origType)&&(!P||P.guid===Ce.guid)&&(!ce||ce.test(Ce.namespace))&&(!B||B===Ce.selector||B==="**"&&Ce.selector)&&(Ae.splice(U,1),Ce.selector&&Ae.delegateCount--,Be.remove&&Be.remove.call(m,Ce));q&&!Ae.length&&((!Be.teardown||Be.teardown.call(m,bt,Zt.handle)===!1)&&g.removeEvent(m,Je,Zt.handle),delete ie[Je])}g.isEmptyObject(ie)&&ct.remove(m,"handle events")}},dispatch:function(m){var k,P,B,H,U,q,ce=new Array(arguments.length),ie=g.event.fix(m),xe=(ct.get(this,"events")||Object.create(null))[ie.type]||[],Ce=g.event.special[ie.type]||{};for(ce[0]=ie,k=1;k<arguments.length;k++)ce[k]=arguments[k];if(ie.delegateTarget=this,!(Ce.preDispatch&&Ce.preDispatch.call(this,ie)===!1)){for(q=g.event.handlers.call(this,ie,xe),k=0;(H=q[k++])&&!ie.isPropagationStopped();)for(ie.currentTarget=H.elem,P=0;(U=H.handlers[P++])&&!ie.isImmediatePropagationStopped();)(!ie.rnamespace||U.namespace===!1||ie.rnamespace.test(U.namespace))&&(ie.handleObj=U,ie.data=U.data,B=((g.event.special[U.origType]||{}).handle||U.handler).apply(H.elem,ce),B!==void 0&&(ie.result=B)===!1&&(ie.preventDefault(),ie.stopPropagation()));return Ce.postDispatch&&Ce.postDispatch.call(this,ie),ie.result}},handlers:function(m,k){var P,B,H,U,q,ce=[],ie=k.delegateCount,xe=m.target;if(ie&&xe.nodeType&&!(m.type==="click"&&m.button>=1)){for(;xe!==this;xe=xe.parentNode||this)if(xe.nodeType===1&&!(m.type==="click"&&xe.disabled===!0)){for(U=[],q={},P=0;P<ie;P++)B=k[P],H=B.selector+" ",q[H]===void 0&&(q[H]=B.needsContext?g(H,this).index(xe)>-1:g.find(H,this,null,[xe]).length),q[H]&&U.push(B);U.length&&ce.push({elem:xe,handlers:U})}}return xe=this,ie<k.length&&ce.push({elem:xe,handlers:k.slice(ie)}),ce},addProp:function(m,k){Object.defineProperty(g.Event.prototype,m,{enumerable:!0,configurable:!0,get:b(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(P){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(m){return m[g.expando]?m:new g.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var k=this||m;return Na.test(k.type)&&k.click&&M(k,"input")&&_l(k,"click",!0),!1},trigger:function(m){var k=this||m;return Na.test(k.type)&&k.click&&M(k,"input")&&_l(k,"click"),!0},_default:function(m){var k=m.target;return Na.test(k.type)&&k.click&&M(k,"input")&&ct.get(k,"click")||M(k,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function _l(m,k,P){if(!P){ct.get(m,k)===void 0&&g.event.add(m,k,vo);return}ct.set(m,k,!1),g.event.add(m,k,{namespace:!1,handler:function(B){var H,U=ct.get(this,k);if(B.isTrigger&1&&this[k]){if(U)(g.event.special[k]||{}).delegateType&&B.stopPropagation();else if(U=s.call(arguments),ct.set(this,k,U),this[k](),H=ct.get(this,k),ct.set(this,k,!1),U!==H)return B.stopImmediatePropagation(),B.preventDefault(),H}else U&&(ct.set(this,k,g.event.trigger(U[0],U.slice(1),this)),B.stopPropagation(),B.isImmediatePropagationStopped=vo)}})}g.removeEvent=function(m,k,P){m.removeEventListener&&m.removeEventListener(k,P)},g.Event=function(m,k){if(!(this instanceof g.Event))return new g.Event(m,k);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?vo:Ra,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,k&&g.extend(this,k),this.timeStamp=m&&m.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Ra,isPropagationStopped:Ra,isImmediatePropagationStopped:Ra,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=vo,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=vo,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=vo,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(m,k){function P(B){if(x.documentMode){var H=ct.get(this,"handle"),U=g.event.fix(B);U.type=B.type==="focusin"?"focus":"blur",U.isSimulated=!0,H(B),U.target===U.currentTarget&&H(U)}else g.event.simulate(k,B.target,g.event.fix(B))}g.event.special[m]={setup:function(){var B;if(_l(this,m,!0),x.documentMode)B=ct.get(this,k),B||this.addEventListener(k,P),ct.set(this,k,(B||0)+1);else return!1},trigger:function(){return _l(this,m),!0},teardown:function(){var B;if(x.documentMode)B=ct.get(this,k)-1,B?ct.set(this,k,B):(this.removeEventListener(k,P),ct.remove(this,k));else return!1},_default:function(B){return ct.get(B.target,m)},delegateType:k},g.event.special[k]={setup:function(){var B=this.ownerDocument||this.document||this,H=x.documentMode?this:B,U=ct.get(H,k);U||(x.documentMode?this.addEventListener(k,P):B.addEventListener(m,P,!0)),ct.set(H,k,(U||0)+1)},teardown:function(){var B=this.ownerDocument||this.document||this,H=x.documentMode?this:B,U=ct.get(H,k)-1;U?ct.set(H,k,U):(x.documentMode?this.removeEventListener(k,P):B.removeEventListener(m,P,!0),ct.remove(H,k))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,k){g.event.special[m]={delegateType:k,bindType:k,handle:function(P){var B,H=this,U=P.relatedTarget,q=P.handleObj;return(!U||U!==H&&!g.contains(H,U))&&(P.type=q.origType,B=q.handler.apply(this,arguments),P.type=k),B}}}),g.fn.extend({on:function(m,k,P,B){return $l(this,m,k,P,B)},one:function(m,k,P,B){return $l(this,m,k,P,B,1)},off:function(m,k,P){var B,H;if(m&&m.preventDefault&&m.handleObj)return B=m.handleObj,g(m.delegateTarget).off(B.namespace?B.origType+"."+B.namespace:B.origType,B.selector,B.handler),this;if(typeof m=="object"){for(H in m)this.off(H,k,m[H]);return this}return(k===!1||typeof k=="function")&&(P=k,k=void 0),P===!1&&(P=Ra),this.each(function(){g.event.remove(this,m,P,k)})}});var Kv=/<script|<style|<link/i,qv=/checked\s*(?:[^=]|=\s*.checked.)/i,Vv=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Jh(m,k){return M(m,"table")&&M(k.nodeType!==11?k:k.firstChild,"tr")&&g(m).children("tbody")[0]||m}function Gv(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function Yv(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function Qh(m,k){var P,B,H,U,q,ce,ie;if(k.nodeType===1){if(ct.hasData(m)&&(U=ct.get(m),ie=U.events,ie)){ct.remove(k,"handle events");for(H in ie)for(P=0,B=ie[H].length;P<B;P++)g.event.add(k,H,ie[H][P])}It.hasData(m)&&(q=It.access(m),ce=g.extend({},q),It.set(k,ce))}}function ed(m,k){var P=k.nodeName.toLowerCase();P==="input"&&Na.test(m.type)?k.checked=m.checked:(P==="input"||P==="textarea")&&(k.defaultValue=m.defaultValue)}function Da(m,k,P,B){k=o(k);var H,U,q,ce,ie,xe,Ce=0,Be=m.length,Ae=Be-1,Je=k[0],bt=b(Je);if(bt||Be>1&&typeof Je=="string"&&!w.checkClone&&qv.test(Je))return m.each(function(Xt){var Zt=m.eq(Xt);bt&&(k[0]=Je.call(this,Xt,Zt.html())),Da(Zt,k,P,B)});if(Be&&(H=Zh(k,m[0].ownerDocument,!1,m,B),U=H.firstChild,H.childNodes.length===1&&(H=U),U||B)){for(q=g.map(si(H,"script"),Gv),ce=q.length;Ce<Be;Ce++)ie=H,Ce!==Ae&&(ie=g.clone(ie,!0,!0),ce&&g.merge(q,si(ie,"script"))),P.call(m[Ce],ie,Ce);if(ce)for(xe=q[q.length-1].ownerDocument,g.map(q,Yv),Ce=0;Ce<ce;Ce++)ie=q[Ce],Yh.test(ie.type||"")&&!ct.access(ie,"globalEval")&&g.contains(xe,ie)&&(ie.src&&(ie.type||"").toLowerCase()!=="module"?g._evalUrl&&!ie.noModule&&g._evalUrl(ie.src,{nonce:ie.nonce||ie.getAttribute("nonce")},xe):_(ie.textContent.replace(Vv,""),ie,xe))}return m}function td(m,k,P){for(var B,H=k?g.filter(k,m):m,U=0;(B=H[U])!=null;U++)!P&&B.nodeType===1&&g.cleanData(si(B)),B.parentNode&&(P&&fo(B)&&Tu(si(B,"script")),B.parentNode.removeChild(B));return m}g.extend({htmlPrefilter:function(m){return m},clone:function(m,k,P){var B,H,U,q,ce=m.cloneNode(!0),ie=fo(m);if(!w.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!g.isXMLDoc(m))for(q=si(ce),U=si(m),B=0,H=U.length;B<H;B++)ed(U[B],q[B]);if(k)if(P)for(U=U||si(m),q=q||si(ce),B=0,H=U.length;B<H;B++)Qh(U[B],q[B]);else Qh(m,ce);return q=si(ce,"script"),q.length>0&&Tu(q,!ie&&si(m,"script")),ce},cleanData:function(m){for(var k,P,B,H=g.event.special,U=0;(P=m[U])!==void 0;U++)if(fr(P)){if(k=P[ct.expando]){if(k.events)for(B in k.events)H[B]?g.event.remove(P,B):g.removeEvent(P,B,k.handle);P[ct.expando]=void 0}P[It.expando]&&(P[It.expando]=void 0)}}}),g.fn.extend({detach:function(m){return td(this,m,!0)},remove:function(m){return td(this,m)},text:function(m){return st(this,function(k){return k===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,m,arguments.length)},append:function(){return Da(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=Jh(this,m);k.appendChild(m)}})},prepend:function(){return Da(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=Jh(this,m);k.insertBefore(m,k.firstChild)}})},before:function(){return Da(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return Da(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,k=0;(m=this[k])!=null;k++)m.nodeType===1&&(g.cleanData(si(m,!1)),m.textContent="");return this},clone:function(m,k){return m=m??!1,k=k??m,this.map(function(){return g.clone(this,m,k)})},html:function(m){return st(this,function(k){var P=this[0]||{},B=0,H=this.length;if(k===void 0&&P.nodeType===1)return P.innerHTML;if(typeof k=="string"&&!Kv.test(k)&&!Bi[(tf.exec(k)||["",""])[1].toLowerCase()]){k=g.htmlPrefilter(k);try{for(;B<H;B++)P=this[B]||{},P.nodeType===1&&(g.cleanData(si(P,!1)),P.innerHTML=k);P=0}catch{}}P&&this.empty().append(k)},null,m,arguments.length)},replaceWith:function(){var m=[];return Da(this,arguments,function(k){var P=this.parentNode;g.inArray(this,m)<0&&(g.cleanData(si(this)),P&&P.replaceChild(k,this))},m)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,k){g.fn[m]=function(P){for(var B,H=[],U=g(P),q=U.length-1,ce=0;ce<=q;ce++)B=ce===q?this:this.clone(!0),g(U[ce])[k](B),a.apply(H,B.get());return this.pushStack(H)}});var rf=new RegExp("^("+ds+")(?!px)[a-z%]+$","i"),nf=/^--/,Iu=function(m){var k=m.ownerDocument.defaultView;return(!k||!k.opener)&&(k=r),k.getComputedStyle(m)},rd=function(m,k,P){var B,H,U={};for(H in k)U[H]=m.style[H],m.style[H]=k[H];B=P.call(m);for(H in k)m.style[H]=U[H];return B},Au=new RegExp(Di.join("|"),"i");(function(){function m(){if(xe){ie.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",xe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Gi.appendChild(ie).appendChild(xe);var Ce=r.getComputedStyle(xe);P=Ce.top!=="1%",ce=k(Ce.marginLeft)===12,xe.style.right="60%",U=k(Ce.right)===36,B=k(Ce.width)===36,xe.style.position="absolute",H=k(xe.offsetWidth/3)===12,Gi.removeChild(ie),xe=null}}function k(Ce){return Math.round(parseFloat(Ce))}var P,B,H,U,q,ce,ie=x.createElement("div"),xe=x.createElement("div");xe.style&&(xe.style.backgroundClip="content-box",xe.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=xe.style.backgroundClip==="content-box",g.extend(w,{boxSizingReliable:function(){return m(),B},pixelBoxStyles:function(){return m(),U},pixelPosition:function(){return m(),P},reliableMarginLeft:function(){return m(),ce},scrollboxSize:function(){return m(),H},reliableTrDimensions:function(){var Ce,Be,Ae,Je;return q==null&&(Ce=x.createElement("table"),Be=x.createElement("tr"),Ae=x.createElement("div"),Ce.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Be.style.cssText="border:1px solid",Be.style.height="1px",Ae.style.height="9px",Ae.style.display="block",Gi.appendChild(Ce).appendChild(Be).appendChild(Ae),Je=r.getComputedStyle(Be),q=parseInt(Je.height,10)+parseInt(Je.borderTopWidth,10)+parseInt(Je.borderBottomWidth,10)===Be.offsetHeight,Gi.removeChild(Ce)),q}}))})();function Ba(m,k,P){var B,H,U,q,ce=nf.test(k),ie=m.style;return P=P||Iu(m),P&&(q=P.getPropertyValue(k)||P[k],ce&&q&&(q=q.replace(J,"$1")||void 0),q===""&&!fo(m)&&(q=g.style(m,k)),!w.pixelBoxStyles()&&rf.test(q)&&Au.test(k)&&(B=ie.width,H=ie.minWidth,U=ie.maxWidth,ie.minWidth=ie.maxWidth=ie.width=q,q=P.width,ie.width=B,ie.minWidth=H,ie.maxWidth=U)),q!==void 0?q+"":q}function Ls(m,k){return{get:function(){if(m()){delete this.get;return}return(this.get=k).apply(this,arguments)}}}var sf=["Webkit","Moz","ms"],Jo=x.createElement("div").style,nd={};function xl(m){for(var k=m[0].toUpperCase()+m.slice(1),P=sf.length;P--;)if(m=sf[P]+k,m in Jo)return m}function Ma(m){var k=g.cssProps[m]||nd[m];return k||(m in Jo?m:nd[m]=xl(m)||m)}var id=/^(none|table(?!-c[ea]).+)/,Zv={position:"absolute",visibility:"hidden",display:"block"},Ou={letterSpacing:"0",fontWeight:"400"};function sd(m,k,P){var B=co.exec(k);return B?Math.max(0,B[2]-(P||0))+(B[3]||"px"):k}function of(m,k,P,B,H,U){var q=k==="width"?1:0,ce=0,ie=0,xe=0;if(P===(B?"border":"content"))return 0;for(;q<4;q+=2)P==="margin"&&(xe+=g.css(m,P+Di[q],!0,H)),B?(P==="content"&&(ie-=g.css(m,"padding"+Di[q],!0,H)),P!=="margin"&&(ie-=g.css(m,"border"+Di[q]+"Width",!0,H))):(ie+=g.css(m,"padding"+Di[q],!0,H),P!=="padding"?ie+=g.css(m,"border"+Di[q]+"Width",!0,H):ce+=g.css(m,"border"+Di[q]+"Width",!0,H));return!B&&U>=0&&(ie+=Math.max(0,Math.ceil(m["offset"+k[0].toUpperCase()+k.slice(1)]-U-ie-ce-.5))||0),ie+xe}function Y(m,k,P){var B=Iu(m),H=!w.boxSizingReliable()||P,U=H&&g.css(m,"boxSizing",!1,B)==="border-box",q=U,ce=Ba(m,k,B),ie="offset"+k[0].toUpperCase()+k.slice(1);if(rf.test(ce)){if(!P)return ce;ce="auto"}return(!w.boxSizingReliable()&&U||!w.reliableTrDimensions()&&M(m,"tr")||ce==="auto"||!parseFloat(ce)&&g.css(m,"display",!1,B)==="inline")&&m.getClientRects().length&&(U=g.css(m,"boxSizing",!1,B)==="border-box",q=ie in m,q&&(ce=m[ie])),ce=parseFloat(ce)||0,ce+of(m,k,P||(U?"border":"content"),q,B,ce)+"px"}g.extend({cssHooks:{opacity:{get:function(m,k){if(k){var P=Ba(m,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(m,k,P,B){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var H,U,q,ce=Rt(k),ie=nf.test(k),xe=m.style;if(ie||(k=Ma(ce)),q=g.cssHooks[k]||g.cssHooks[ce],P!==void 0){if(U=typeof P,U==="string"&&(H=co.exec(P))&&H[1]&&(P=ef(m,k,H),U="number"),P==null||P!==P)return;U==="number"&&!ie&&(P+=H&&H[3]||(g.cssNumber[ce]?"":"px")),!w.clearCloneStyle&&P===""&&k.indexOf("background")===0&&(xe[k]="inherit"),(!q||!("set"in q)||(P=q.set(m,P,B))!==void 0)&&(ie?xe.setProperty(k,P):xe[k]=P)}else return q&&"get"in q&&(H=q.get(m,!1,B))!==void 0?H:xe[k]}},css:function(m,k,P,B){var H,U,q,ce=Rt(k),ie=nf.test(k);return ie||(k=Ma(ce)),q=g.cssHooks[k]||g.cssHooks[ce],q&&"get"in q&&(H=q.get(m,!0,P)),H===void 0&&(H=Ba(m,k,B)),H==="normal"&&k in Ou&&(H=Ou[k]),P===""||P?(U=parseFloat(H),P===!0||isFinite(U)?U||0:H):H}}),g.each(["height","width"],function(m,k){g.cssHooks[k]={get:function(P,B,H){if(B)return id.test(g.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?rd(P,Zv,function(){return Y(P,k,H)}):Y(P,k,H)},set:function(P,B,H){var U,q=Iu(P),ce=!w.scrollboxSize()&&q.position==="absolute",ie=ce||H,xe=ie&&g.css(P,"boxSizing",!1,q)==="border-box",Ce=H?of(P,k,H,xe,q):0;return xe&&ce&&(Ce-=Math.ceil(P["offset"+k[0].toUpperCase()+k.slice(1)]-parseFloat(q[k])-of(P,k,"border",!1,q)-.5)),Ce&&(U=co.exec(B))&&(U[3]||"px")!=="px"&&(P.style[k]=B,B=g.css(P,k)),sd(P,B,Ce)}}}),g.cssHooks.marginLeft=Ls(w.reliableMarginLeft,function(m,k){if(k)return(parseFloat(Ba(m,"marginLeft"))||m.getBoundingClientRect().left-rd(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(m,k){g.cssHooks[m+k]={expand:function(P){for(var B=0,H={},U=typeof P=="string"?P.split(" "):[P];B<4;B++)H[m+Di[B]+k]=U[B]||U[B-2]||U[0];return H}},m!=="margin"&&(g.cssHooks[m+k].set=sd)}),g.fn.extend({css:function(m,k){return st(this,function(P,B,H){var U,q,ce={},ie=0;if(Array.isArray(B)){for(U=Iu(P),q=B.length;ie<q;ie++)ce[B[ie]]=g.css(P,B[ie],!1,U);return ce}return H!==void 0?g.style(P,B,H):g.css(P,B)},m,k,arguments.length>1)}});function ue(m,k,P,B,H){return new ue.prototype.init(m,k,P,B,H)}g.Tween=ue,ue.prototype={constructor:ue,init:function(m,k,P,B,H,U){this.elem=m,this.prop=P,this.easing=H||g.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=B,this.unit=U||(g.cssNumber[P]?"":"px")},cur:function(){var m=ue.propHooks[this.prop];return m&&m.get?m.get(this):ue.propHooks._default.get(this)},run:function(m){var k,P=ue.propHooks[this.prop];return this.options.duration?this.pos=k=g.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=k=m,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):ue.propHooks._default.set(this),this}},ue.prototype.init.prototype=ue.prototype,ue.propHooks={_default:{get:function(m){var k;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(k=g.css(m.elem,m.prop,""),!k||k==="auto"?0:k)},set:function(m){g.fx.step[m.prop]?g.fx.step[m.prop](m):m.elem.nodeType===1&&(g.cssHooks[m.prop]||m.elem.style[Ma(m.prop)]!=null)?g.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},ue.propHooks.scrollTop=ue.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},g.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},g.fx=ue.prototype.init,g.fx.step={};var re,$e,Se=/^(?:toggle|show|hide)$/,we=/queueHooks$/;function Le(){$e&&(x.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Le):r.setTimeout(Le,g.fx.interval),g.fx.tick())}function Ze(){return r.setTimeout(function(){re=void 0}),re=Date.now()}function Qe(m,k){var P,B=0,H={height:m};for(k=k?1:0;B<4;B+=2-k)P=Di[B],H["margin"+P]=H["padding"+P]=m;return k&&(H.opacity=H.width=m),H}function et(m,k,P){for(var B,H=(Mt.tweeners[k]||[]).concat(Mt.tweeners["*"]),U=0,q=H.length;U<q;U++)if(B=H[U].call(P,k,m))return B}function ot(m,k,P){var B,H,U,q,ce,ie,xe,Ce,Be="width"in k||"height"in k,Ae=this,Je={},bt=m.style,Xt=m.nodeType&&ho(m),Zt=ct.get(m,"fxshow");P.queue||(q=g._queueHooks(m,"fx"),q.unqueued==null&&(q.unqueued=0,ce=q.empty.fire,q.empty.fire=function(){q.unqueued||ce()}),q.unqueued++,Ae.always(function(){Ae.always(function(){q.unqueued--,g.queue(m,"fx").length||q.empty.fire()})}));for(B in k)if(H=k[B],Se.test(H)){if(delete k[B],U=U||H==="toggle",H===(Xt?"hide":"show"))if(H==="show"&&Zt&&Zt[B]!==void 0)Xt=!0;else continue;Je[B]=Zt&&Zt[B]||g.style(m,B)}if(ie=!g.isEmptyObject(k),!(!ie&&g.isEmptyObject(Je))){Be&&m.nodeType===1&&(P.overflow=[bt.overflow,bt.overflowX,bt.overflowY],xe=Zt&&Zt.display,xe==null&&(xe=ct.get(m,"display")),Ce=g.css(m,"display"),Ce==="none"&&(xe?Ce=xe:(Xo([m],!0),xe=m.style.display||xe,Ce=g.css(m,"display"),Xo([m]))),(Ce==="inline"||Ce==="inline-block"&&xe!=null)&&g.css(m,"float")==="none"&&(ie||(Ae.done(function(){bt.display=xe}),xe==null&&(Ce=bt.display,xe=Ce==="none"?"":Ce)),bt.display="inline-block")),P.overflow&&(bt.overflow="hidden",Ae.always(function(){bt.overflow=P.overflow[0],bt.overflowX=P.overflow[1],bt.overflowY=P.overflow[2]})),ie=!1;for(B in Je)ie||(Zt?"hidden"in Zt&&(Xt=Zt.hidden):Zt=ct.access(m,"fxshow",{display:xe}),U&&(Zt.hidden=!Xt),Xt&&Xo([m],!0),Ae.done(function(){Xt||Xo([m]),ct.remove(m,"fxshow");for(B in Je)g.style(m,B,Je[B])})),ie=et(Xt?Zt[B]:0,B,Ae),B in Zt||(Zt[B]=ie.start,Xt&&(ie.end=ie.start,ie.start=0))}}function Et(m,k){var P,B,H,U,q;for(P in m)if(B=Rt(P),H=k[B],U=m[P],Array.isArray(U)&&(H=U[1],U=m[P]=U[0]),P!==B&&(m[B]=U,delete m[P]),q=g.cssHooks[B],q&&"expand"in q){U=q.expand(U),delete m[B];for(P in U)P in m||(m[P]=U[P],k[P]=H)}else k[B]=H}function Mt(m,k,P){var B,H,U=0,q=Mt.prefilters.length,ce=g.Deferred().always(function(){delete ie.elem}),ie=function(){if(H)return!1;for(var Be=re||Ze(),Ae=Math.max(0,xe.startTime+xe.duration-Be),Je=Ae/xe.duration||0,bt=1-Je,Xt=0,Zt=xe.tweens.length;Xt<Zt;Xt++)xe.tweens[Xt].run(bt);return ce.notifyWith(m,[xe,bt,Ae]),bt<1&&Zt?Ae:(Zt||ce.notifyWith(m,[xe,1,0]),ce.resolveWith(m,[xe]),!1)},xe=ce.promise({elem:m,props:g.extend({},k),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},P),originalProperties:k,originalOptions:P,startTime:re||Ze(),duration:P.duration,tweens:[],createTween:function(Be,Ae){var Je=g.Tween(m,xe.opts,Be,Ae,xe.opts.specialEasing[Be]||xe.opts.easing);return xe.tweens.push(Je),Je},stop:function(Be){var Ae=0,Je=Be?xe.tweens.length:0;if(H)return this;for(H=!0;Ae<Je;Ae++)xe.tweens[Ae].run(1);return Be?(ce.notifyWith(m,[xe,1,0]),ce.resolveWith(m,[xe,Be])):ce.rejectWith(m,[xe,Be]),this}}),Ce=xe.props;for(Et(Ce,xe.opts.specialEasing);U<q;U++)if(B=Mt.prefilters[U].call(xe,m,Ce,xe.opts),B)return b(B.stop)&&(g._queueHooks(xe.elem,xe.opts.queue).stop=B.stop.bind(B)),B;return g.map(Ce,et,xe),b(xe.opts.start)&&xe.opts.start.call(m,xe),xe.progress(xe.opts.progress).done(xe.opts.done,xe.opts.complete).fail(xe.opts.fail).always(xe.opts.always),g.fx.timer(g.extend(ie,{elem:m,anim:xe,queue:xe.opts.queue})),xe}g.Animation=g.extend(Mt,{tweeners:{"*":[function(m,k){var P=this.createTween(m,k);return ef(P.elem,m,co.exec(k),P),P}]},tweener:function(m,k){b(m)?(k=m,m=["*"]):m=m.match(N);for(var P,B=0,H=m.length;B<H;B++)P=m[B],Mt.tweeners[P]=Mt.tweeners[P]||[],Mt.tweeners[P].unshift(k)},prefilters:[ot],prefilter:function(m,k){k?Mt.prefilters.unshift(m):Mt.prefilters.push(m)}}),g.speed=function(m,k,P){var B=m&&typeof m=="object"?g.extend({},m):{complete:P||!P&&k||b(m)&&m,duration:m,easing:P&&k||k&&!b(k)&&k};return g.fx.off?B.duration=0:typeof B.duration!="number"&&(B.duration in g.fx.speeds?B.duration=g.fx.speeds[B.duration]:B.duration=g.fx.speeds._default),(B.queue==null||B.queue===!0)&&(B.queue="fx"),B.old=B.complete,B.complete=function(){b(B.old)&&B.old.call(this),B.queue&&g.dequeue(this,B.queue)},B},g.fn.extend({fadeTo:function(m,k,P,B){return this.filter(ho).css("opacity",0).show().end().animate({opacity:k},m,P,B)},animate:function(m,k,P,B){var H=g.isEmptyObject(m),U=g.speed(k,P,B),q=function(){var ce=Mt(this,g.extend({},m),U);(H||ct.get(this,"finish"))&&ce.stop(!0)};return q.finish=q,H||U.queue===!1?this.each(q):this.queue(U.queue,q)},stop:function(m,k,P){var B=function(H){var U=H.stop;delete H.stop,U(P)};return typeof m!="string"&&(P=k,k=m,m=void 0),k&&this.queue(m||"fx",[]),this.each(function(){var H=!0,U=m!=null&&m+"queueHooks",q=g.timers,ce=ct.get(this);if(U)ce[U]&&ce[U].stop&&B(ce[U]);else for(U in ce)ce[U]&&ce[U].stop&&we.test(U)&&B(ce[U]);for(U=q.length;U--;)q[U].elem===this&&(m==null||q[U].queue===m)&&(q[U].anim.stop(P),H=!1,q.splice(U,1));(H||!P)&&g.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var k,P=ct.get(this),B=P[m+"queue"],H=P[m+"queueHooks"],U=g.timers,q=B?B.length:0;for(P.finish=!0,g.queue(this,m,[]),H&&H.stop&&H.stop.call(this,!0),k=U.length;k--;)U[k].elem===this&&U[k].queue===m&&(U[k].anim.stop(!0),U.splice(k,1));for(k=0;k<q;k++)B[k]&&B[k].finish&&B[k].finish.call(this);delete P.finish})}}),g.each(["toggle","show","hide"],function(m,k){var P=g.fn[k];g.fn[k]=function(B,H,U){return B==null||typeof B=="boolean"?P.apply(this,arguments):this.animate(Qe(k,!0),B,H,U)}}),g.each({slideDown:Qe("show"),slideUp:Qe("hide"),slideToggle:Qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,k){g.fn[m]=function(P,B,H){return this.animate(k,P,B,H)}}),g.timers=[],g.fx.tick=function(){var m,k=0,P=g.timers;for(re=Date.now();k<P.length;k++)m=P[k],!m()&&P[k]===m&&P.splice(k--,1);P.length||g.fx.stop(),re=void 0},g.fx.timer=function(m){g.timers.push(m),g.fx.start()},g.fx.interval=13,g.fx.start=function(){$e||($e=!0,Le())},g.fx.stop=function(){$e=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(m,k){return m=g.fx&&g.fx.speeds[m]||m,k=k||"fx",this.queue(k,function(P,B){var H=r.setTimeout(P,m);B.stop=function(){r.clearTimeout(H)}})},function(){var m=x.createElement("input"),k=x.createElement("select"),P=k.appendChild(x.createElement("option"));m.type="checkbox",w.checkOn=m.value!=="",w.optSelected=P.selected,m=x.createElement("input"),m.value="t",m.type="radio",w.radioValue=m.value==="t"}();var gr,ar=g.expr.attrHandle;g.fn.extend({attr:function(m,k){return st(this,g.attr,m,k,arguments.length>1)},removeAttr:function(m){return this.each(function(){g.removeAttr(this,m)})}}),g.extend({attr:function(m,k,P){var B,H,U=m.nodeType;if(!(U===3||U===8||U===2)){if(typeof m.getAttribute>"u")return g.prop(m,k,P);if((U!==1||!g.isXMLDoc(m))&&(H=g.attrHooks[k.toLowerCase()]||(g.expr.match.bool.test(k)?gr:void 0)),P!==void 0){if(P===null){g.removeAttr(m,k);return}return H&&"set"in H&&(B=H.set(m,P,k))!==void 0?B:(m.setAttribute(k,P+""),P)}return H&&"get"in H&&(B=H.get(m,k))!==null?B:(B=g.find.attr(m,k),B??void 0)}},attrHooks:{type:{set:function(m,k){if(!w.radioValue&&k==="radio"&&M(m,"input")){var P=m.value;return m.setAttribute("type",k),P&&(m.value=P),k}}}},removeAttr:function(m,k){var P,B=0,H=k&&k.match(N);if(H&&m.nodeType===1)for(;P=H[B++];)m.removeAttribute(P)}}),gr={set:function(m,k,P){return k===!1?g.removeAttr(m,P):m.setAttribute(P,P),P}},g.each(g.expr.match.bool.source.match(/\w+/g),function(m,k){var P=ar[k]||g.find.attr;ar[k]=function(B,H,U){var q,ce,ie=H.toLowerCase();return U||(ce=ar[ie],ar[ie]=q,q=P(B,H,U)!=null?ie:null,ar[ie]=ce),q}});var qr=/^(?:input|select|textarea|button)$/i,Cr=/^(?:a|area)$/i;g.fn.extend({prop:function(m,k){return st(this,g.prop,m,k,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[g.propFix[m]||m]})}}),g.extend({prop:function(m,k,P){var B,H,U=m.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!g.isXMLDoc(m))&&(k=g.propFix[k]||k,H=g.propHooks[k]),P!==void 0?H&&"set"in H&&(B=H.set(m,P,k))!==void 0?B:m[k]=P:H&&"get"in H&&(B=H.get(m,k))!==null?B:m[k]},propHooks:{tabIndex:{get:function(m){var k=g.find.attr(m,"tabindex");return k?parseInt(k,10):qr.test(m.nodeName)||Cr.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(g.propHooks.selected={get:function(m){var k=m.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(m){var k=m.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function un(m){var k=m.match(N)||[];return k.join(" ")}function Mi(m){return m.getAttribute&&m.getAttribute("class")||""}function El(m){return Array.isArray(m)?m:typeof m=="string"?m.match(N)||[]:[]}g.fn.extend({addClass:function(m){var k,P,B,H,U,q;return b(m)?this.each(function(ce){g(this).addClass(m.call(this,ce,Mi(this)))}):(k=El(m),k.length?this.each(function(){if(B=Mi(this),P=this.nodeType===1&&" "+un(B)+" ",P){for(U=0;U<k.length;U++)H=k[U],P.indexOf(" "+H+" ")<0&&(P+=H+" ");q=un(P),B!==q&&this.setAttribute("class",q)}}):this)},removeClass:function(m){var k,P,B,H,U,q;return b(m)?this.each(function(ce){g(this).removeClass(m.call(this,ce,Mi(this)))}):arguments.length?(k=El(m),k.length?this.each(function(){if(B=Mi(this),P=this.nodeType===1&&" "+un(B)+" ",P){for(U=0;U<k.length;U++)for(H=k[U];P.indexOf(" "+H+" ")>-1;)P=P.replace(" "+H+" "," ");q=un(P),B!==q&&this.setAttribute("class",q)}}):this):this.attr("class","")},toggleClass:function(m,k){var P,B,H,U,q=typeof m,ce=q==="string"||Array.isArray(m);return b(m)?this.each(function(ie){g(this).toggleClass(m.call(this,ie,Mi(this),k),k)}):typeof k=="boolean"&&ce?k?this.addClass(m):this.removeClass(m):(P=El(m),this.each(function(){if(ce)for(U=g(this),H=0;H<P.length;H++)B=P[H],U.hasClass(B)?U.removeClass(B):U.addClass(B);else(m===void 0||q==="boolean")&&(B=Mi(this),B&&ct.set(this,"__className__",B),this.setAttribute&&this.setAttribute("class",B||m===!1?"":ct.get(this,"__className__")||""))}))},hasClass:function(m){var k,P,B=0;for(k=" "+m+" ";P=this[B++];)if(P.nodeType===1&&(" "+un(Mi(P))+" ").indexOf(k)>-1)return!0;return!1}});var od=/\r/g;g.fn.extend({val:function(m){var k,P,B,H=this[0];return arguments.length?(B=b(m),this.each(function(U){var q;this.nodeType===1&&(B?q=m.call(this,U,g(this).val()):q=m,q==null?q="":typeof q=="number"?q+="":Array.isArray(q)&&(q=g.map(q,function(ce){return ce==null?"":ce+""})),k=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,q,"value")===void 0)&&(this.value=q))})):H?(k=g.valHooks[H.type]||g.valHooks[H.nodeName.toLowerCase()],k&&"get"in k&&(P=k.get(H,"value"))!==void 0?P:(P=H.value,typeof P=="string"?P.replace(od,""):P??"")):void 0}}),g.extend({valHooks:{option:{get:function(m){var k=g.find.attr(m,"value");return k??un(g.text(m))}},select:{get:function(m){var k,P,B,H=m.options,U=m.selectedIndex,q=m.type==="select-one",ce=q?null:[],ie=q?U+1:H.length;for(U<0?B=ie:B=q?U:0;B<ie;B++)if(P=H[B],(P.selected||B===U)&&!P.disabled&&(!P.parentNode.disabled||!M(P.parentNode,"optgroup"))){if(k=g(P).val(),q)return k;ce.push(k)}return ce},set:function(m,k){for(var P,B,H=m.options,U=g.makeArray(k),q=H.length;q--;)B=H[q],(B.selected=g.inArray(g.valHooks.option.get(B),U)>-1)&&(P=!0);return P||(m.selectedIndex=-1),U}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(m,k){if(Array.isArray(k))return m.checked=g.inArray(g(m).val(),k)>-1}},w.checkOn||(g.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})});var go=r.location,ad={guid:Date.now()},Cu=/\?/;g.parseXML=function(m){var k,P;if(!m||typeof m!="string")return null;try{k=new r.DOMParser().parseFromString(m,"text/xml")}catch{}return P=k&&k.getElementsByTagName("parsererror")[0],(!k||P)&&g.error("Invalid XML: "+(P?g.map(P.childNodes,function(B){return B.textContent}).join(`
`):m)),k};var ld=/^(?:focusinfocus|focusoutblur)$/,af=function(m){m.stopPropagation()};g.extend(g.event,{trigger:function(m,k,P,B){var H,U,q,ce,ie,xe,Ce,Be,Ae=[P||x],Je=c.call(m,"type")?m.type:m,bt=c.call(m,"namespace")?m.namespace.split("."):[];if(U=Be=q=P=P||x,!(P.nodeType===3||P.nodeType===8)&&!ld.test(Je+g.event.triggered)&&(Je.indexOf(".")>-1&&(bt=Je.split("."),Je=bt.shift(),bt.sort()),ie=Je.indexOf(":")<0&&"on"+Je,m=m[g.expando]?m:new g.Event(Je,typeof m=="object"&&m),m.isTrigger=B?2:3,m.namespace=bt.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=P),k=k==null?[m]:g.makeArray(k,[m]),Ce=g.event.special[Je]||{},!(!B&&Ce.trigger&&Ce.trigger.apply(P,k)===!1))){if(!B&&!Ce.noBubble&&!T(P)){for(ce=Ce.delegateType||Je,ld.test(ce+Je)||(U=U.parentNode);U;U=U.parentNode)Ae.push(U),q=U;q===(P.ownerDocument||x)&&Ae.push(q.defaultView||q.parentWindow||r)}for(H=0;(U=Ae[H++])&&!m.isPropagationStopped();)Be=U,m.type=H>1?ce:Ce.bindType||Je,xe=(ct.get(U,"events")||Object.create(null))[m.type]&&ct.get(U,"handle"),xe&&xe.apply(U,k),xe=ie&&U[ie],xe&&xe.apply&&fr(U)&&(m.result=xe.apply(U,k),m.result===!1&&m.preventDefault());return m.type=Je,!B&&!m.isDefaultPrevented()&&(!Ce._default||Ce._default.apply(Ae.pop(),k)===!1)&&fr(P)&&ie&&b(P[Je])&&!T(P)&&(q=P[ie],q&&(P[ie]=null),g.event.triggered=Je,m.isPropagationStopped()&&Be.addEventListener(Je,af),P[Je](),m.isPropagationStopped()&&Be.removeEventListener(Je,af),g.event.triggered=void 0,q&&(P[ie]=q)),m.result}},simulate:function(m,k,P){var B=g.extend(new g.Event,P,{type:m,isSimulated:!0});g.event.trigger(B,null,k)}}),g.fn.extend({trigger:function(m,k){return this.each(function(){g.event.trigger(m,k,this)})},triggerHandler:function(m,k){var P=this[0];if(P)return g.event.trigger(m,k,P,!0)}});var Gx=/\[\]$/,Xv=/\r?\n/g,Yx=/^(?:submit|button|image|reset|file)$/i,Zx=/^(?:input|select|textarea|keygen)/i;function Jv(m,k,P,B){var H;if(Array.isArray(k))g.each(k,function(U,q){P||Gx.test(m)?B(m,q):Jv(m+"["+(typeof q=="object"&&q!=null?U:"")+"]",q,P,B)});else if(!P&&I(k)==="object")for(H in k)Jv(m+"["+H+"]",k[H],P,B);else B(m,k)}g.param=function(m,k){var P,B=[],H=function(U,q){var ce=b(q)?q():q;B[B.length]=encodeURIComponent(U)+"="+encodeURIComponent(ce??"")};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!g.isPlainObject(m))g.each(m,function(){H(this.name,this.value)});else for(P in m)Jv(P,m[P],k,H);return B.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=g.prop(this,"elements");return m?g.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!g(this).is(":disabled")&&Zx.test(this.nodeName)&&!Yx.test(m)&&(this.checked||!Na.test(m))}).map(function(m,k){var P=g(this).val();return P==null?null:Array.isArray(P)?g.map(P,function(B){return{name:k.name,value:B.replace(Xv,`\r
`)}}):{name:k.name,value:P.replace(Xv,`\r
`)}}).get()}});var Xx=/%20/g,Qv=/#.*$/,Jx=/([?&])_=[^&]*/,Qx=/^(.*?):[ \t]*([^\r\n]*)$/mg,e2=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,t2=/^(?:GET|HEAD)$/,r2=/^\/\//,jr={},Pr={},R0="*/".concat("*"),eg=x.createElement("a");eg.href=go.href;function D0(m){return function(k,P){typeof k!="string"&&(P=k,k="*");var B,H=0,U=k.toLowerCase().match(N)||[];if(b(P))for(;B=U[H++];)B[0]==="+"?(B=B.slice(1)||"*",(m[B]=m[B]||[]).unshift(P)):(m[B]=m[B]||[]).push(P)}}function B0(m,k,P,B){var H={},U=m===Pr;function q(ce){var ie;return H[ce]=!0,g.each(m[ce]||[],function(xe,Ce){var Be=Ce(k,P,B);if(typeof Be=="string"&&!U&&!H[Be])return k.dataTypes.unshift(Be),q(Be),!1;if(U)return!(ie=Be)}),ie}return q(k.dataTypes[0])||!H["*"]&&q("*")}function tg(m,k){var P,B,H=g.ajaxSettings.flatOptions||{};for(P in k)k[P]!==void 0&&((H[P]?m:B||(B={}))[P]=k[P]);return B&&g.extend(!0,m,B),m}function n2(m,k,P){for(var B,H,U,q,ce=m.contents,ie=m.dataTypes;ie[0]==="*";)ie.shift(),B===void 0&&(B=m.mimeType||k.getResponseHeader("Content-Type"));if(B){for(H in ce)if(ce[H]&&ce[H].test(B)){ie.unshift(H);break}}if(ie[0]in P)U=ie[0];else{for(H in P){if(!ie[0]||m.converters[H+" "+ie[0]]){U=H;break}q||(q=H)}U=U||q}if(U)return U!==ie[0]&&ie.unshift(U),P[U]}function M0(m,k,P,B){var H,U,q,ce,ie,xe={},Ce=m.dataTypes.slice();if(Ce[1])for(q in m.converters)xe[q.toLowerCase()]=m.converters[q];for(U=Ce.shift();U;)if(m.responseFields[U]&&(P[m.responseFields[U]]=k),!ie&&B&&m.dataFilter&&(k=m.dataFilter(k,m.dataType)),ie=U,U=Ce.shift(),U){if(U==="*")U=ie;else if(ie!=="*"&&ie!==U){if(q=xe[ie+" "+U]||xe["* "+U],!q){for(H in xe)if(ce=H.split(" "),ce[1]===U&&(q=xe[ie+" "+ce[0]]||xe["* "+ce[0]],q)){q===!0?q=xe[H]:xe[H]!==!0&&(U=ce[0],Ce.unshift(ce[1]));break}}if(q!==!0)if(q&&m.throws)k=q(k);else try{k=q(k)}catch(Be){return{state:"parsererror",error:q?Be:"No conversion from "+ie+" to "+U}}}}return{state:"success",data:k}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:go.href,type:"GET",isLocal:e2.test(go.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":R0,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,k){return k?tg(tg(m,g.ajaxSettings),k):tg(g.ajaxSettings,m)},ajaxPrefilter:D0(jr),ajaxTransport:D0(Pr),ajax:function(m,k){typeof m=="object"&&(k=m,m=void 0),k=k||{};var P,B,H,U,q,ce,ie,xe,Ce,Be,Ae=g.ajaxSetup({},k),Je=Ae.context||Ae,bt=Ae.context&&(Je.nodeType||Je.jquery)?g(Je):g.event,Xt=g.Deferred(),Zt=g.Callbacks("once memory"),Yn=Ae.statusCode||{},fn={},yo={},mo="canceled",hr={readyState:0,getResponseHeader:function(dr){var Mr;if(ie){if(!U)for(U={};Mr=Qx.exec(H);)U[Mr[1].toLowerCase()+" "]=(U[Mr[1].toLowerCase()+" "]||[]).concat(Mr[2]);Mr=U[dr.toLowerCase()+" "]}return Mr==null?null:Mr.join(", ")},getAllResponseHeaders:function(){return ie?H:null},setRequestHeader:function(dr,Mr){return ie==null&&(dr=yo[dr.toLowerCase()]=yo[dr.toLowerCase()]||dr,fn[dr]=Mr),this},overrideMimeType:function(dr){return ie==null&&(Ae.mimeType=dr),this},statusCode:function(dr){var Mr;if(dr)if(ie)hr.always(dr[hr.status]);else for(Mr in dr)Yn[Mr]=[Yn[Mr],dr[Mr]];return this},abort:function(dr){var Mr=dr||mo;return P&&P.abort(Mr),La(0,Mr),this}};if(Xt.promise(hr),Ae.url=((m||Ae.url||go.href)+"").replace(r2,go.protocol+"//"),Ae.type=k.method||k.type||Ae.method||Ae.type,Ae.dataTypes=(Ae.dataType||"*").toLowerCase().match(N)||[""],Ae.crossDomain==null){ce=x.createElement("a");try{ce.href=Ae.url,ce.href=ce.href,Ae.crossDomain=eg.protocol+"//"+eg.host!=ce.protocol+"//"+ce.host}catch{Ae.crossDomain=!0}}if(Ae.data&&Ae.processData&&typeof Ae.data!="string"&&(Ae.data=g.param(Ae.data,Ae.traditional)),B0(jr,Ae,k,hr),ie)return hr;xe=g.event&&Ae.global,xe&&g.active++===0&&g.event.trigger("ajaxStart"),Ae.type=Ae.type.toUpperCase(),Ae.hasContent=!t2.test(Ae.type),B=Ae.url.replace(Qv,""),Ae.hasContent?Ae.data&&Ae.processData&&(Ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ae.data=Ae.data.replace(Xx,"+")):(Be=Ae.url.slice(B.length),Ae.data&&(Ae.processData||typeof Ae.data=="string")&&(B+=(Cu.test(B)?"&":"?")+Ae.data,delete Ae.data),Ae.cache===!1&&(B=B.replace(Jx,"$1"),Be=(Cu.test(B)?"&":"?")+"_="+ad.guid+++Be),Ae.url=B+Be),Ae.ifModified&&(g.lastModified[B]&&hr.setRequestHeader("If-Modified-Since",g.lastModified[B]),g.etag[B]&&hr.setRequestHeader("If-None-Match",g.etag[B])),(Ae.data&&Ae.hasContent&&Ae.contentType!==!1||k.contentType)&&hr.setRequestHeader("Content-Type",Ae.contentType),hr.setRequestHeader("Accept",Ae.dataTypes[0]&&Ae.accepts[Ae.dataTypes[0]]?Ae.accepts[Ae.dataTypes[0]]+(Ae.dataTypes[0]!=="*"?", "+R0+"; q=0.01":""):Ae.accepts["*"]);for(Ce in Ae.headers)hr.setRequestHeader(Ce,Ae.headers[Ce]);if(Ae.beforeSend&&(Ae.beforeSend.call(Je,hr,Ae)===!1||ie))return hr.abort();if(mo="abort",Zt.add(Ae.complete),hr.done(Ae.success),hr.fail(Ae.error),P=B0(Pr,Ae,k,hr),!P)La(-1,"No Transport");else{if(hr.readyState=1,xe&&bt.trigger("ajaxSend",[hr,Ae]),ie)return hr;Ae.async&&Ae.timeout>0&&(q=r.setTimeout(function(){hr.abort("timeout")},Ae.timeout));try{ie=!1,P.send(fn,La)}catch(dr){if(ie)throw dr;La(-1,dr)}}function La(dr,Mr,lf,cd){var Fs,Sl,vs,ea,Fa,Li=Mr;ie||(ie=!0,q&&r.clearTimeout(q),P=void 0,H=cd||"",hr.readyState=dr>0?4:0,Fs=dr>=200&&dr<300||dr===304,lf&&(ea=n2(Ae,hr,lf)),!Fs&&g.inArray("script",Ae.dataTypes)>-1&&g.inArray("json",Ae.dataTypes)<0&&(Ae.converters["text script"]=function(){}),ea=M0(Ae,ea,hr,Fs),Fs?(Ae.ifModified&&(Fa=hr.getResponseHeader("Last-Modified"),Fa&&(g.lastModified[B]=Fa),Fa=hr.getResponseHeader("etag"),Fa&&(g.etag[B]=Fa)),dr===204||Ae.type==="HEAD"?Li="nocontent":dr===304?Li="notmodified":(Li=ea.state,Sl=ea.data,vs=ea.error,Fs=!vs)):(vs=Li,(dr||!Li)&&(Li="error",dr<0&&(dr=0))),hr.status=dr,hr.statusText=(Mr||Li)+"",Fs?Xt.resolveWith(Je,[Sl,Li,hr]):Xt.rejectWith(Je,[hr,Li,vs]),hr.statusCode(Yn),Yn=void 0,xe&&bt.trigger(Fs?"ajaxSuccess":"ajaxError",[hr,Ae,Fs?Sl:vs]),Zt.fireWith(Je,[hr,Li]),xe&&(bt.trigger("ajaxComplete",[hr,Ae]),--g.active||g.event.trigger("ajaxStop")))}return hr},getJSON:function(m,k,P){return g.get(m,k,P,"json")},getScript:function(m,k){return g.get(m,void 0,k,"script")}}),g.each(["get","post"],function(m,k){g[k]=function(P,B,H,U){return b(B)&&(U=U||H,H=B,B=void 0),g.ajax(g.extend({url:P,type:k,dataType:U,data:B,success:H},g.isPlainObject(P)&&P))}}),g.ajaxPrefilter(function(m){var k;for(k in m.headers)k.toLowerCase()==="content-type"&&(m.contentType=m.headers[k]||"")}),g._evalUrl=function(m,k,P){return g.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(B){g.globalEval(B,k,P)}})},g.fn.extend({wrapAll:function(m){var k;return this[0]&&(b(m)&&(m=m.call(this[0])),k=g(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(m){return b(m)?this.each(function(k){g(this).wrapInner(m.call(this,k))}):this.each(function(){var k=g(this),P=k.contents();P.length?P.wrapAll(m):k.append(m)})},wrap:function(m){var k=b(m);return this.each(function(P){g(this).wrapAll(k?m.call(this,P):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(m){return!g.expr.pseudos.visible(m)},g.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var i2={0:200,1223:204},cn=g.ajaxSettings.xhr();w.cors=!!cn&&"withCredentials"in cn,w.ajax=cn=!!cn,g.ajaxTransport(function(m){var k,P;if(w.cors||cn&&!m.crossDomain)return{send:function(B,H){var U,q=m.xhr();if(q.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(U in m.xhrFields)q[U]=m.xhrFields[U];m.mimeType&&q.overrideMimeType&&q.overrideMimeType(m.mimeType),!m.crossDomain&&!B["X-Requested-With"]&&(B["X-Requested-With"]="XMLHttpRequest");for(U in B)q.setRequestHeader(U,B[U]);k=function(ce){return function(){k&&(k=P=q.onload=q.onerror=q.onabort=q.ontimeout=q.onreadystatechange=null,ce==="abort"?q.abort():ce==="error"?typeof q.status!="number"?H(0,"error"):H(q.status,q.statusText):H(i2[q.status]||q.status,q.statusText,(q.responseType||"text")!=="text"||typeof q.responseText!="string"?{binary:q.response}:{text:q.responseText},q.getAllResponseHeaders()))}},q.onload=k(),P=q.onerror=q.ontimeout=k("error"),q.onabort!==void 0?q.onabort=P:q.onreadystatechange=function(){q.readyState===4&&r.setTimeout(function(){k&&P()})},k=k("abort");try{q.send(m.hasContent&&m.data||null)}catch(ce){if(k)throw ce}},abort:function(){k&&k()}}}),g.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return g.globalEval(m),m}}}),g.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),g.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var k,P;return{send:function(B,H){k=g("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",P=function(U){k.remove(),P=null,U&&H(U.type==="error"?404:200,U.type)}),x.head.appendChild(k[0])},abort:function(){P&&P()}}}});var ud=[],Qo=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=ud.pop()||g.expando+"_"+ad.guid++;return this[m]=!0,m}}),g.ajaxPrefilter("json jsonp",function(m,k,P){var B,H,U,q=m.jsonp!==!1&&(Qo.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Qo.test(m.data)&&"data");if(q||m.dataTypes[0]==="jsonp")return B=m.jsonpCallback=b(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,q?m[q]=m[q].replace(Qo,"$1"+B):m.jsonp!==!1&&(m.url+=(Cu.test(m.url)?"&":"?")+m.jsonp+"="+B),m.converters["script json"]=function(){return U||g.error(B+" was not called"),U[0]},m.dataTypes[0]="json",H=r[B],r[B]=function(){U=arguments},P.always(function(){H===void 0?g(r).removeProp(B):r[B]=H,m[B]&&(m.jsonpCallback=k.jsonpCallback,ud.push(B)),U&&b(H)&&H(U[0]),U=H=void 0}),"script"}),w.createHTMLDocument=function(){var m=x.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),g.parseHTML=function(m,k,P){if(typeof m!="string")return[];typeof k=="boolean"&&(P=k,k=!1);var B,H,U;return k||(w.createHTMLDocument?(k=x.implementation.createHTMLDocument(""),B=k.createElement("base"),B.href=x.location.href,k.head.appendChild(B)):k=x),H=Ge.exec(m),U=!P&&[],H?[k.createElement(H[1])]:(H=Zh([m],k,U),U&&U.length&&g(U).remove(),g.merge([],H.childNodes))},g.fn.load=function(m,k,P){var B,H,U,q=this,ce=m.indexOf(" ");return ce>-1&&(B=un(m.slice(ce)),m=m.slice(0,ce)),b(k)?(P=k,k=void 0):k&&typeof k=="object"&&(H="POST"),q.length>0&&g.ajax({url:m,type:H||"GET",dataType:"html",data:k}).done(function(ie){U=arguments,q.html(B?g("<div>").append(g.parseHTML(ie)).find(B):ie)}).always(P&&function(ie,xe){q.each(function(){P.apply(this,U||[ie.responseText,xe,ie])})}),this},g.expr.pseudos.animated=function(m){return g.grep(g.timers,function(k){return m===k.elem}).length},g.offset={setOffset:function(m,k,P){var B,H,U,q,ce,ie,xe,Ce=g.css(m,"position"),Be=g(m),Ae={};Ce==="static"&&(m.style.position="relative"),ce=Be.offset(),U=g.css(m,"top"),ie=g.css(m,"left"),xe=(Ce==="absolute"||Ce==="fixed")&&(U+ie).indexOf("auto")>-1,xe?(B=Be.position(),q=B.top,H=B.left):(q=parseFloat(U)||0,H=parseFloat(ie)||0),b(k)&&(k=k.call(m,P,g.extend({},ce))),k.top!=null&&(Ae.top=k.top-ce.top+q),k.left!=null&&(Ae.left=k.left-ce.left+H),"using"in k?k.using.call(m,Ae):Be.css(Ae)}},g.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(H){g.offset.setOffset(this,m,H)});var k,P,B=this[0];if(B)return B.getClientRects().length?(k=B.getBoundingClientRect(),P=B.ownerDocument.defaultView,{top:k.top+P.pageYOffset,left:k.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var m,k,P,B=this[0],H={top:0,left:0};if(g.css(B,"position")==="fixed")k=B.getBoundingClientRect();else{for(k=this.offset(),P=B.ownerDocument,m=B.offsetParent||P.documentElement;m&&(m===P.body||m===P.documentElement)&&g.css(m,"position")==="static";)m=m.parentNode;m&&m!==B&&m.nodeType===1&&(H=g(m).offset(),H.top+=g.css(m,"borderTopWidth",!0),H.left+=g.css(m,"borderLeftWidth",!0))}return{top:k.top-H.top-g.css(B,"marginTop",!0),left:k.left-H.left-g.css(B,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&g.css(m,"position")==="static";)m=m.offsetParent;return m||Gi})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,k){var P=k==="pageYOffset";g.fn[m]=function(B){return st(this,function(H,U,q){var ce;if(T(H)?ce=H:H.nodeType===9&&(ce=H.defaultView),q===void 0)return ce?ce[k]:H[U];ce?ce.scrollTo(P?ce.pageXOffset:q,P?q:ce.pageYOffset):H[U]=q},m,B,arguments.length)}}),g.each(["top","left"],function(m,k){g.cssHooks[k]=Ls(w.pixelPosition,function(P,B){if(B)return B=Ba(P,k),rf.test(B)?g(P).position()[k]+"px":B})}),g.each({Height:"height",Width:"width"},function(m,k){g.each({padding:"inner"+m,content:k,"":"outer"+m},function(P,B){g.fn[B]=function(H,U){var q=arguments.length&&(P||typeof H!="boolean"),ce=P||(H===!0||U===!0?"margin":"border");return st(this,function(ie,xe,Ce){var Be;return T(ie)?B.indexOf("outer")===0?ie["inner"+m]:ie.document.documentElement["client"+m]:ie.nodeType===9?(Be=ie.documentElement,Math.max(ie.body["scroll"+m],Be["scroll"+m],ie.body["offset"+m],Be["offset"+m],Be["client"+m])):Ce===void 0?g.css(ie,xe,ce):g.style(ie,xe,Ce,ce)},k,q?H:void 0,q)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,k){g.fn[k]=function(P){return this.on(k,P)}}),g.fn.extend({bind:function(m,k,P){return this.on(m,null,k,P)},unbind:function(m,k){return this.off(m,null,k)},delegate:function(m,k,P,B){return this.on(k,m,P,B)},undelegate:function(m,k,P){return arguments.length===1?this.off(m,"**"):this.off(k,m||"**",P)},hover:function(m,k){return this.mouseenter(m).mouseleave(k||m)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,k){g.fn[k]=function(P,B){return arguments.length>0?this.on(k,null,P,B):this.trigger(k)}});var L0=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(m,k){var P,B,H;if(typeof k=="string"&&(P=m[k],k=m,m=P),!!b(m))return B=s.call(arguments,2),H=function(){return m.apply(k||this,B.concat(s.call(arguments)))},H.guid=m.guid=m.guid||g.guid++,H},g.holdReady=function(m){m?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=M,g.isFunction=b,g.isWindow=T,g.camelCase=Rt,g.type=I,g.now=Date.now,g.isNumeric=function(m){var k=g.type(m);return(k==="number"||k==="string")&&!isNaN(m-parseFloat(m))},g.trim=function(m){return m==null?"":(m+"").replace(L0,"$1")};var rg=r.jQuery,ps=r.$;return g.noConflict=function(m){return r.$===g&&(r.$=ps),m&&r.jQuery===g&&(r.jQuery=rg),g},typeof t>"u"&&(r.jQuery=r.$=g),g})})(Tq);var v1e=Tq.exports;const nn=no(v1e);function g1e(){this.__data__=[],this.size=0}var y1e=g1e;function m1e(e,r){return e===r||e!==e&&r!==r}var Iq=m1e,b1e=Iq;function w1e(e,r){for(var t=e.length;t--;)if(b1e(e[t][0],r))return t;return-1}var L_=w1e,$1e=L_,_1e=Array.prototype,x1e=_1e.splice;function E1e(e){var r=this.__data__,t=$1e(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():x1e.call(r,t,1),--this.size,!0}var S1e=E1e,k1e=L_;function T1e(e){var r=this.__data__,t=k1e(r,e);return t<0?void 0:r[t][1]}var I1e=T1e,A1e=L_;function O1e(e){return A1e(this.__data__,e)>-1}var C1e=O1e,P1e=L_;function N1e(e,r){var t=this.__data__,n=P1e(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}var R1e=N1e,D1e=y1e,B1e=S1e,M1e=I1e,L1e=C1e,F1e=R1e;function pv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}pv.prototype.clear=D1e;pv.prototype.delete=B1e;pv.prototype.get=M1e;pv.prototype.has=L1e;pv.prototype.set=F1e;var F_=pv,j1e=F_;function z1e(){this.__data__=new j1e,this.size=0}var H1e=z1e;function U1e(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var W1e=U1e;function K1e(e){return this.__data__.get(e)}var q1e=K1e;function V1e(e){return this.__data__.has(e)}var G1e=V1e,Y1e=typeof Tn=="object"&&Tn&&Tn.Object===Object&&Tn,Aq=Y1e,Z1e=Aq,X1e=typeof self=="object"&&self&&self.Object===Object&&self,J1e=Z1e||X1e||Function("return this")(),yl=J1e,Q1e=yl,ewe=Q1e.Symbol,DP=ewe,hB=DP,Oq=Object.prototype,twe=Oq.hasOwnProperty,rwe=Oq.toString,Tg=hB?hB.toStringTag:void 0;function nwe(e){var r=twe.call(e,Tg),t=e[Tg];try{e[Tg]=void 0;var n=!0}catch{}var i=rwe.call(e);return n&&(r?e[Tg]=t:delete e[Tg]),i}var iwe=nwe,swe=Object.prototype,owe=swe.toString;function awe(e){return owe.call(e)}var lwe=awe,dB=DP,uwe=iwe,cwe=lwe,fwe="[object Null]",hwe="[object Undefined]",pB=dB?dB.toStringTag:void 0;function dwe(e){return e==null?e===void 0?hwe:fwe:pB&&pB in Object(e)?uwe(e):cwe(e)}var Sm=dwe;function pwe(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var km=pwe,vwe=Sm,gwe=km,ywe="[object AsyncFunction]",mwe="[object Function]",bwe="[object GeneratorFunction]",wwe="[object Proxy]";function $we(e){if(!gwe(e))return!1;var r=vwe(e);return r==mwe||r==bwe||r==ywe||r==wwe}var Cq=$we,_we=yl,xwe=_we["__core-js_shared__"],Ewe=xwe,UE=Ewe,vB=function(){var e=/[^.]+$/.exec(UE&&UE.keys&&UE.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Swe(e){return!!vB&&vB in e}var kwe=Swe,Twe=Function.prototype,Iwe=Twe.toString;function Awe(e){if(e!=null){try{return Iwe.call(e)}catch{}try{return e+""}catch{}}return""}var Pq=Awe,Owe=Cq,Cwe=kwe,Pwe=km,Nwe=Pq,Rwe=/[\\^$.*+?()[\]{}|]/g,Dwe=/^\[object .+?Constructor\]$/,Bwe=Function.prototype,Mwe=Object.prototype,Lwe=Bwe.toString,Fwe=Mwe.hasOwnProperty,jwe=RegExp("^"+Lwe.call(Fwe).replace(Rwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zwe(e){if(!Pwe(e)||Cwe(e))return!1;var r=Owe(e)?jwe:Dwe;return r.test(Nwe(e))}var Hwe=zwe;function Uwe(e,r){return e==null?void 0:e[r]}var Wwe=Uwe,Kwe=Hwe,qwe=Wwe;function Vwe(e,r){var t=qwe(e,r);return Kwe(t)?t:void 0}var vv=Vwe,Gwe=vv,Ywe=yl,Zwe=Gwe(Ywe,"Map"),BP=Zwe,Xwe=vv,Jwe=Xwe(Object,"create"),j_=Jwe,gB=j_;function Qwe(){this.__data__=gB?gB(null):{},this.size=0}var e$e=Qwe;function t$e(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var r$e=t$e,n$e=j_,i$e="__lodash_hash_undefined__",s$e=Object.prototype,o$e=s$e.hasOwnProperty;function a$e(e){var r=this.__data__;if(n$e){var t=r[e];return t===i$e?void 0:t}return o$e.call(r,e)?r[e]:void 0}var l$e=a$e,u$e=j_,c$e=Object.prototype,f$e=c$e.hasOwnProperty;function h$e(e){var r=this.__data__;return u$e?r[e]!==void 0:f$e.call(r,e)}var d$e=h$e,p$e=j_,v$e="__lodash_hash_undefined__";function g$e(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=p$e&&r===void 0?v$e:r,this}var y$e=g$e,m$e=e$e,b$e=r$e,w$e=l$e,$$e=d$e,_$e=y$e;function gv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}gv.prototype.clear=m$e;gv.prototype.delete=b$e;gv.prototype.get=w$e;gv.prototype.has=$$e;gv.prototype.set=_$e;var x$e=gv,yB=x$e,E$e=F_,S$e=BP;function k$e(){this.size=0,this.__data__={hash:new yB,map:new(S$e||E$e),string:new yB}}var T$e=k$e;function I$e(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var A$e=I$e,O$e=A$e;function C$e(e,r){var t=e.__data__;return O$e(r)?t[typeof r=="string"?"string":"hash"]:t.map}var z_=C$e,P$e=z_;function N$e(e){var r=P$e(this,e).delete(e);return this.size-=r?1:0,r}var R$e=N$e,D$e=z_;function B$e(e){return D$e(this,e).get(e)}var M$e=B$e,L$e=z_;function F$e(e){return L$e(this,e).has(e)}var j$e=F$e,z$e=z_;function H$e(e,r){var t=z$e(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}var U$e=H$e,W$e=T$e,K$e=R$e,q$e=M$e,V$e=j$e,G$e=U$e;function yv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}yv.prototype.clear=W$e;yv.prototype.delete=K$e;yv.prototype.get=q$e;yv.prototype.has=V$e;yv.prototype.set=G$e;var Nq=yv,Y$e=F_,Z$e=BP,X$e=Nq,J$e=200;function Q$e(e,r){var t=this.__data__;if(t instanceof Y$e){var n=t.__data__;if(!Z$e||n.length<J$e-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new X$e(n)}return t.set(e,r),this.size=t.size,this}var e_e=Q$e,t_e=F_,r_e=H1e,n_e=W1e,i_e=q1e,s_e=G1e,o_e=e_e;function mv(e){var r=this.__data__=new t_e(e);this.size=r.size}mv.prototype.clear=r_e;mv.prototype.delete=n_e;mv.prototype.get=i_e;mv.prototype.has=s_e;mv.prototype.set=o_e;var a_e=mv,l_e="__lodash_hash_undefined__";function u_e(e){return this.__data__.set(e,l_e),this}var c_e=u_e;function f_e(e){return this.__data__.has(e)}var h_e=f_e,d_e=Nq,p_e=c_e,v_e=h_e;function t$(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new d_e;++r<t;)this.add(e[r])}t$.prototype.add=t$.prototype.push=p_e;t$.prototype.has=v_e;var g_e=t$;function y_e(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}var m_e=y_e;function b_e(e,r){return e.has(r)}var w_e=b_e,$_e=g_e,__e=m_e,x_e=w_e,E_e=1,S_e=2;function k_e(e,r,t,n,i,s){var o=t&E_e,a=e.length,l=r.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),h=s.get(r);if(u&&h)return u==r&&h==e;var c=-1,d=!0,y=t&S_e?new $_e:void 0;for(s.set(e,r),s.set(r,e);++c<a;){var w=e[c],b=r[c];if(n)var T=o?n(b,w,c,r,e,s):n(w,b,c,e,r,s);if(T!==void 0){if(T)continue;d=!1;break}if(y){if(!__e(r,function(x,A){if(!x_e(y,A)&&(w===x||i(w,x,t,n,s)))return y.push(A)})){d=!1;break}}else if(!(w===b||i(w,b,t,n,s))){d=!1;break}}return s.delete(e),s.delete(r),d}var Rq=k_e,T_e=yl,I_e=T_e.Uint8Array,A_e=I_e;function O_e(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}var C_e=O_e;function P_e(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var N_e=P_e,mB=DP,bB=A_e,R_e=Iq,D_e=Rq,B_e=C_e,M_e=N_e,L_e=1,F_e=2,j_e="[object Boolean]",z_e="[object Date]",H_e="[object Error]",U_e="[object Map]",W_e="[object Number]",K_e="[object RegExp]",q_e="[object Set]",V_e="[object String]",G_e="[object Symbol]",Y_e="[object ArrayBuffer]",Z_e="[object DataView]",wB=mB?mB.prototype:void 0,WE=wB?wB.valueOf:void 0;function X_e(e,r,t,n,i,s,o){switch(t){case Z_e:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Y_e:return!(e.byteLength!=r.byteLength||!s(new bB(e),new bB(r)));case j_e:case z_e:case W_e:return R_e(+e,+r);case H_e:return e.name==r.name&&e.message==r.message;case K_e:case V_e:return e==r+"";case U_e:var a=B_e;case q_e:var l=n&L_e;if(a||(a=M_e),e.size!=r.size&&!l)return!1;var u=o.get(e);if(u)return u==r;n|=F_e,o.set(e,r);var h=D_e(a(e),a(r),n,i,s,o);return o.delete(e),h;case G_e:if(WE)return WE.call(e)==WE.call(r)}return!1}var J_e=X_e;function Q_e(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var exe=Q_e,txe=Array.isArray,MP=txe,rxe=exe,nxe=MP;function ixe(e,r,t){var n=r(e);return nxe(e)?n:rxe(n,t(e))}var sxe=ixe;function oxe(e,r){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var o=e[t];r(o,t,e)&&(s[i++]=o)}return s}var axe=oxe;function lxe(){return[]}var uxe=lxe,cxe=axe,fxe=uxe,hxe=Object.prototype,dxe=hxe.propertyIsEnumerable,$B=Object.getOwnPropertySymbols,pxe=$B?function(e){return e==null?[]:(e=Object(e),cxe($B(e),function(r){return dxe.call(e,r)}))}:fxe,vxe=pxe;function gxe(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var yxe=gxe;function mxe(e){return e!=null&&typeof e=="object"}var Tm=mxe,bxe=Sm,wxe=Tm,$xe="[object Arguments]";function _xe(e){return wxe(e)&&bxe(e)==$xe}var xxe=_xe,_B=xxe,Exe=Tm,Dq=Object.prototype,Sxe=Dq.hasOwnProperty,kxe=Dq.propertyIsEnumerable,Txe=_B(function(){return arguments}())?_B:function(e){return Exe(e)&&Sxe.call(e,"callee")&&!kxe.call(e,"callee")},Ixe=Txe,r$={exports:{}};function Axe(){return!1}var Oxe=Axe;r$.exports;(function(e,r){var t=yl,n=Oxe,i=r&&!r.nodeType&&r,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;e.exports=u})(r$,r$.exports);var Bq=r$.exports,Cxe=9007199254740991,Pxe=/^(?:0|[1-9]\d*)$/;function Nxe(e,r){var t=typeof e;return r=r??Cxe,!!r&&(t=="number"||t!="symbol"&&Pxe.test(e))&&e>-1&&e%1==0&&e<r}var Rxe=Nxe,Dxe=9007199254740991;function Bxe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Dxe}var Mq=Bxe,Mxe=Sm,Lxe=Mq,Fxe=Tm,jxe="[object Arguments]",zxe="[object Array]",Hxe="[object Boolean]",Uxe="[object Date]",Wxe="[object Error]",Kxe="[object Function]",qxe="[object Map]",Vxe="[object Number]",Gxe="[object Object]",Yxe="[object RegExp]",Zxe="[object Set]",Xxe="[object String]",Jxe="[object WeakMap]",Qxe="[object ArrayBuffer]",e2e="[object DataView]",t2e="[object Float32Array]",r2e="[object Float64Array]",n2e="[object Int8Array]",i2e="[object Int16Array]",s2e="[object Int32Array]",o2e="[object Uint8Array]",a2e="[object Uint8ClampedArray]",l2e="[object Uint16Array]",u2e="[object Uint32Array]",Jr={};Jr[t2e]=Jr[r2e]=Jr[n2e]=Jr[i2e]=Jr[s2e]=Jr[o2e]=Jr[a2e]=Jr[l2e]=Jr[u2e]=!0;Jr[jxe]=Jr[zxe]=Jr[Qxe]=Jr[Hxe]=Jr[e2e]=Jr[Uxe]=Jr[Wxe]=Jr[Kxe]=Jr[qxe]=Jr[Vxe]=Jr[Gxe]=Jr[Yxe]=Jr[Zxe]=Jr[Xxe]=Jr[Jxe]=!1;function c2e(e){return Fxe(e)&&Lxe(e.length)&&!!Jr[Mxe(e)]}var f2e=c2e;function h2e(e){return function(r){return e(r)}}var d2e=h2e,n$={exports:{}};n$.exports;(function(e,r){var t=Aq,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(n$,n$.exports);var p2e=n$.exports,v2e=f2e,g2e=d2e,xB=p2e,EB=xB&&xB.isTypedArray,y2e=EB?g2e(EB):v2e,Lq=y2e,m2e=yxe,b2e=Ixe,w2e=MP,$2e=Bq,_2e=Rxe,x2e=Lq,E2e=Object.prototype,S2e=E2e.hasOwnProperty;function k2e(e,r){var t=w2e(e),n=!t&&b2e(e),i=!t&&!n&&$2e(e),s=!t&&!n&&!i&&x2e(e),o=t||n||i||s,a=o?m2e(e.length,String):[],l=a.length;for(var u in e)(r||S2e.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||_2e(u,l)))&&a.push(u);return a}var T2e=k2e,I2e=Object.prototype;function A2e(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||I2e;return e===t}var O2e=A2e;function C2e(e,r){return function(t){return e(r(t))}}var P2e=C2e,N2e=P2e,R2e=N2e(Object.keys,Object),D2e=R2e,B2e=O2e,M2e=D2e,L2e=Object.prototype,F2e=L2e.hasOwnProperty;function j2e(e){if(!B2e(e))return M2e(e);var r=[];for(var t in Object(e))F2e.call(e,t)&&t!="constructor"&&r.push(t);return r}var z2e=j2e,H2e=Cq,U2e=Mq;function W2e(e){return e!=null&&U2e(e.length)&&!H2e(e)}var K2e=W2e,q2e=T2e,V2e=z2e,G2e=K2e;function Y2e(e){return G2e(e)?q2e(e):V2e(e)}var Z2e=Y2e,X2e=sxe,J2e=vxe,Q2e=Z2e;function eEe(e){return X2e(e,Q2e,J2e)}var tEe=eEe,SB=tEe,rEe=1,nEe=Object.prototype,iEe=nEe.hasOwnProperty;function sEe(e,r,t,n,i,s){var o=t&rEe,a=SB(e),l=a.length,u=SB(r),h=u.length;if(l!=h&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in r:iEe.call(r,d)))return!1}var y=s.get(e),w=s.get(r);if(y&&w)return y==r&&w==e;var b=!0;s.set(e,r),s.set(r,e);for(var T=o;++c<l;){d=a[c];var x=e[d],A=r[d];if(n)var _=o?n(A,x,d,r,e,s):n(x,A,d,e,r,s);if(!(_===void 0?x===A||i(x,A,t,n,s):_)){b=!1;break}T||(T=d=="constructor")}if(b&&!T){var I=e.constructor,O=r.constructor;I!=O&&"constructor"in e&&"constructor"in r&&!(typeof I=="function"&&I instanceof I&&typeof O=="function"&&O instanceof O)&&(b=!1)}return s.delete(e),s.delete(r),b}var oEe=sEe,aEe=vv,lEe=yl,uEe=aEe(lEe,"DataView"),cEe=uEe,fEe=vv,hEe=yl,dEe=fEe(hEe,"Promise"),pEe=dEe,vEe=vv,gEe=yl,yEe=vEe(gEe,"Set"),mEe=yEe,bEe=vv,wEe=yl,$Ee=bEe(wEe,"WeakMap"),_Ee=$Ee,qI=cEe,VI=BP,GI=pEe,YI=mEe,ZI=_Ee,Fq=Sm,bv=Pq,kB="[object Map]",xEe="[object Object]",TB="[object Promise]",IB="[object Set]",AB="[object WeakMap]",OB="[object DataView]",EEe=bv(qI),SEe=bv(VI),kEe=bv(GI),TEe=bv(YI),IEe=bv(ZI),Ef=Fq;(qI&&Ef(new qI(new ArrayBuffer(1)))!=OB||VI&&Ef(new VI)!=kB||GI&&Ef(GI.resolve())!=TB||YI&&Ef(new YI)!=IB||ZI&&Ef(new ZI)!=AB)&&(Ef=function(e){var r=Fq(e),t=r==xEe?e.constructor:void 0,n=t?bv(t):"";if(n)switch(n){case EEe:return OB;case SEe:return kB;case kEe:return TB;case TEe:return IB;case IEe:return AB}return r});var AEe=Ef,KE=a_e,OEe=Rq,CEe=J_e,PEe=oEe,CB=AEe,PB=MP,NB=Bq,NEe=Lq,REe=1,RB="[object Arguments]",DB="[object Array]",Kb="[object Object]",DEe=Object.prototype,BB=DEe.hasOwnProperty;function BEe(e,r,t,n,i,s){var o=PB(e),a=PB(r),l=o?DB:CB(e),u=a?DB:CB(r);l=l==RB?Kb:l,u=u==RB?Kb:u;var h=l==Kb,c=u==Kb,d=l==u;if(d&&NB(e)){if(!NB(r))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new KE),o||NEe(e)?OEe(e,r,t,n,i,s):CEe(e,r,l,t,n,i,s);if(!(t&REe)){var y=h&&BB.call(e,"__wrapped__"),w=c&&BB.call(r,"__wrapped__");if(y||w){var b=y?e.value():e,T=w?r.value():r;return s||(s=new KE),i(b,T,t,n,s)}}return d?(s||(s=new KE),PEe(e,r,t,n,i,s)):!1}var MEe=BEe,LEe=MEe,MB=Tm;function jq(e,r,t,n,i){return e===r?!0:e==null||r==null||!MB(e)&&!MB(r)?e!==e&&r!==r:LEe(e,r,t,n,jq,i)}var FEe=jq,jEe=FEe;function zEe(e,r){return jEe(e,r)}var HEe=zEe;const UEe=no(HEe);function WEe(e){const r=ye.getPubKey(),t=ye.toNostrHexAddress(e.pub);if(t===r)return v("span",{class:"mx-2 text-iris-blue tooltip","data-tip":be("you"),children:Ps.checkmark});if(!t)return null;if(ut.isFollowing(r,t))return v("span",{class:"ml-2 text-iris-blue tooltip","data-tip":be("following"),children:Ps.checkmark});{const i=ut.followedByFriendsCount(t);if(i>0){const s=i>10?"text-iris-orange":"";return v("span",{class:`${s} tooltip ml-2`,"data-tip":`${i} ${be("friends_following")}`,children:Ps.checkmark})}else return null}}const la=2;class XI{constructor(){le(this,"trusts",Array(la+1).fill(0));le(this,"distrusts",Array(la+1).fill(0))}addValue(r,t){r>0&&this.trusts[t]++,r<0&&this.distrusts[t]++}count(r){return this.trusts[r]+this.distrusts[r]}value(r){return this.trusts[r]-this.distrusts[r]}values(){let r=Array(la+1).fill(0);for(let t=0;t<=la;t++)r[t]=this.value(t);return r}isDirectTrusted(){return this.isTrusted(0)}isTrusted(r){return this.value(r)>0}isDirectDistrusted(){return this.isDistrusted(0)}isDistrusted(r){return this.value(r)<0}resolve(){let r={val:0,degree:0,count:0,hasScore:!1},t=0;for(;t<=la;t++)if(!(this.trusts[t]==0&&this.distrusts[t]==0)&&(r.hasScore=!0,this.value(t)!=0)){r.val=this.value(t);break}return r.count=this.count(t),r.degree=t,r}clone(){const r=Object.create(Object.getPrototypeOf(this));return r.trusts=this.trusts.slice(),r.distrusts=this.distrusts.slice(),r}equals(r){for(let t=0;t<=la;t++)if(this.trusts[t]!=r.trusts[t]||this.distrusts[t]!=r.distrusts[t])return!1;return!0}hasTrustScore(){return this.trusts.some(r=>r>0)}hasDistrustScore(){return this.distrusts.some(r=>r>0)}renderTrustCount(r=!1){return!this.hasTrustScore()&&!r?"":this.trusts.join("/")}renderDistrustCount(r=!1){return!this.hasDistrustScore()&&!r?"":this.distrusts.join("/")}}var zo=(e=>(e[e.Key=1]="Key",e[e.Item=2]="Item",e[e.Unknown=3]="Unknown",e))(zo||{});const i$=99;class LP{constructor(r,t=i$){le(this,"id",0);le(this,"out",Object.create(null));le(this,"in",Object.create(null));le(this,"degree",i$);le(this,"entityType",1);le(this,"timestamp",0);le(this,"subscribed",0);le(this,"score",new XI);le(this,"profile");this.id=r,this.degree=t}}let zq=class{constructor(){le(this,"key","");le(this,"type",1);le(this,"val");le(this,"entityType",1);le(this,"context","");le(this,"note","");le(this,"timestamp",0)}};class KEe extends zq{constructor(){super(...arguments);le(this,"from","");le(this,"to","")}}let Hq=class Uq extends zq{constructor(){super(...arguments);le(this,"out");le(this,"in");le(this,"partial",!0)}static partialFrom(t){let n=new Uq;return n.key=t.key,n.entityType=t.entityType,n.type=t.type,n.val=t.val,n.timestamp=t.timestamp,n.partial=!0,n}static key(t,n,i,s){let o=`${t}|${n}|${i}|${s}`;return Xbe(o)}fill(t){this.val=t.val,this.context=t.context,this.note=t.note,this.timestamp=t.timestamp,this.partial=!1}};class qEe{constructor(){le(this,"vertices",{});le(this,"edges",{})}addVertice(r){return this.vertices[r]||(this.vertices[r]=new LP(r))}addEdge(r,t=!1){let n=this.edges[r.key];return n||(n=Hq.partialFrom(r),this.edges[r.key]=n,n.out=this.addVertice(pt(r.from)),n.in=this.addVertice(pt(r.to)),n.out.out[n.in.id]=n,n.in.in[n.out.id]=n),t?n.fill(r):(n.val=r.val,n.timestamp=r.timestamp),n!=null&&n.out&&n.out.timestamp<n.timestamp&&(n.out.timestamp=n.timestamp),n!=null&&n.in&&n.in.timestamp<n.timestamp&&(n.in.timestamp=n.timestamp),n}removeEdge(r){const t=r.out,n=r.in;t&&delete t.out[n.id],n&&delete n.in[t.id],delete this.edges[r.key]}getVertice(r){const t=this.getVerticeId(r);if(t!=null)return this.vertices[t]}getEdge(r){return this.edges[r]}getVerticeId(r){return r?pt(r):void 0}calculateScore(r,t){let n=[],i=Object.create(null),s=this.vertices[r];if(!s)return;this.resetScore();let o=s.degree=0;for(n.push(s);n.length>0&&o<=t;){for(let a of n){if(o>0&&!a.score.isTrusted(o-1))continue;let l=o+1;for(const u in a.out){const h=this.vertices[u],c=a.out[u];!c||c.val===0||(h.score.addValue(c.val,o),!(o>=h.degree)&&(h.degree=l,h.entityType=c.entityType,o<t&&h.entityType===1&&!i[u]&&(i[u]=h)))}}n=Object.values(i),i=Object.create(null),o++}}calculateItemScore(r){let t=this.vertices[r];t.score=new XI;let n=i$;for(const i in t.in){const s=this.vertices[i],o=t.in[i];!o||o.val==0||(s.degree<n&&(n=s.degree),t.score.addValue(o.val,s.degree))}t.degree=n+1}resetScore(){for(let r in this.vertices){const t=this.vertices[r];t.score=new XI,t.degree=i$}}wotNetwork(r,t=la+1){let n=[];for(const i in this.vertices){const s=this.vertices[i];s.degree<=t&&s.degree>0&&(!r||s.entityType===r)&&n.push(s)}return n}inOutTrustById(r,t,n){const i=this.vertices[r];if(!i)return[];let s=Object.create(null);for(const o in i.in){const a=this.vertices[o];if(!a||a.degree>la)continue;const l=i.in[o];!l||l.val==0||n&&l.val!=n||(s[o]=a)}for(const o in i.out){const a=i.out[o];if(!a||a.val==0||n&&a.val!=n)continue;const l=this.vertices[o];(!t||l.entityType===t)&&(s[o]=l)}return Object.values(s)}outTrustById(r,t,n){let i=[];const s=this.vertices[r];for(const o in s.out){const a=this.vertices[o],l=s.out[o];!l||l.val==0||n&&l.val!=n||(!t||a.entityType===t)&&i.push(a)}return i}trustedBy(r,t,n,i=la){let s=[];const o=this.vertices[r];for(const a in o.in){const l=this.vertices[a];if(!l||l.degree>i)continue;const u=o.in[a];!u||u.val==0||n&&u.val!=n||(!t||l.entityType===t)&&s.push(l)}return s}getPaths(r){let t=[];const n=this.vertices[r];if(!n)return t;let i=[],s=[];for(i.push(n);i.length>0;){for(let o of i)if(o.degree!=0)for(const a in o.in){const l=o.in[a];if(!l||l.val===0)continue;const u=l.out;!u||u.degree>=o.degree||(t.push(l),s.push(u))}i=s,s=[]}return t}getUnsubscribedVertices(r){let t=new Array;for(const n in this.vertices){const i=this.vertices[n];i.degree<=r&&i.subscribed==0&&i.entityType==1&&(i.degree==0||i.score.isTrusted(i.degree-1))&&t.push(i)}return t}}const qE=32010,Wq={PubSub:Ut,unsubs:new Map,subscribeTrust(e,r,t){let n=on.enabledRelays(),i={kinds:[qE],authors:e,since:r};return Ut.relayPool.subscribe([i],n,(o,a,l)=>{setTimeout(()=>{t(o,a,l)},0)},0,void 0,{})},createTrustEventFromEdge(e){return this.createTrustEvent(e.to,e.type,e.note,e.context,e.entityType)},createMultiEvent(e,r,t,n="",i="nostr",s){const o=`${r}|${t.toString()}|${i}`,a=e.map(u=>[u.entityType==zo.Key?"p":"e",u.pubkey]);return{kind:qE,content:n||"",created_at:s||this.getTimestamp(),tags:[...a,["d",o],["c",i],["v",t.toString()]]}},createTrustEvent(e,r,t="",n="nostr",i=1,s){const o=`${e}|${r.toString()}|${n}`,a=i==zo.Key?"p":"e";return{kind:qE,content:t||"",created_at:s||this.getTimestamp(),tags:[[a,e],["d",o],["c",n],["v",r.toString()]]}},publishTrust(e,r,t,n,i,s){let o=this.createTrustEvent(e,r,t,n,i,s);this.sign(o),console.log("Publishing trust event",o),Ut.publish(o)},parseTrustEvent(e){let r=[],t=[],n="",i,s,o,a=e.pubkey,l=e.created_at;if(e.tags)for(const h of e.tags)switch(h[0]){case"p":r.push(h[1]);break;case"e":t.push(h[1]);break;case"c":i=h[1];break;case"d":n=h[1];break;case"v":s=h[1];break}o=e.content;let u=parseInt(s);return(isNaN(u)||u<-1||u>1)&&(u=0),{pTags:r,eTags:t,context:i,d:n,v:s,val:u,note:o,authorPubkey:a,timestamp:l}},sign(e){if(e.sig||(e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=ye.getPubKey(),e.id=Oc(e),e.sig=y_(e,ye.getPrivKey())),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event")},getTimestamp(e=Date.now()){return Math.floor(e/1e3)},loadProfiles(e){let r=e.filter(n=>!ut.profiles.has(pt(n))),t=n=>{if(!n.content||ut.profiles.get(pt(n.pubkey)))return;let s=JSON.parse(n.content);en.addProfileToMemory(s)};return Ut.subscribe({kinds:[0],authors:r},t,!1)}};class H_{constructor(r){le(this,"id",0);le(this,"oldScore");le(this,"oldDegree",0);le(this,"counter",0);this.id=r}hasChanged(r){return!this.oldScore||!this.oldScore.equals(r.score)||this.oldDegree!=r.degree}clone(){var t;let r=new H_(this.id);return r.oldScore=(t=this.oldScore)==null?void 0:t.clone(),r.oldDegree=this.oldDegree,r.counter=this.counter,r}setScore(r){this.oldScore=r==null?void 0:r.score.clone(),this.oldDegree=(r==null?void 0:r.degree)||0}}const VE="trustScoreEvent";class gp extends CustomEvent{constructor(r){super(VE,{detail:r})}static dispatch(r){!r||!(r!=null&&r.id)||r.id==0||document.dispatchEvent(new gp(r))}static add(r){document.addEventListener(VE,r)}static remove(r){document.removeEventListener(VE,r)}}const VEe="trust1";class GEe{constructor(r,t){le(this,"db");le(this,"localDataLoaded",!1);le(this,"g",new qEe);le(this,"sourceKey");le(this,"sourceId",-1);le(this,"wotPubSub");le(this,"unsubs",{});le(this,"subscriptionsCounter",0);le(this,"verticeMonitor",Object.create(null));le(this,"maxDegree",la);le(this,"readyCallbacks",[]);le(this,"processItems",{});le(this,"processGraph",!1);le(this,"processScoreDebounce",Cn.debounce(this.processScore,1e3,{trailing:!0}));le(this,"submitTrustIndex",{});le(this,"profilesLoaded",!1);this.wotPubSub=r,this.db=t}async init(r){if(this.sourceKey=r,this.localDataLoaded)return;this.sourceId=pt(this.sourceKey),this.g.addVertice(this.sourceId);let t=0;console.time("Loading edges from the DB"),await this.db.edges.each(n=>{this.g.addEdge(n,!1),t++}),console.timeEnd("Loading edges from the DB"),console.log("Loaded "+t+" edges from the DB"),console.info("Graph: "+Object.entries(this.g.vertices).length+" vertices and "+Object.entries(this.g.edges).length+" edges"),console.time("Processing graph"),this.processGraph=!0,this.processScore(),console.timeEnd("Processing graph"),this.localDataLoaded=!0;for(let n of this.readyCallbacks)n();this.readyCallbacks=[]}whenReady(r){this.localDataLoaded?r():this.readyCallbacks.push(r)}async publishTrust(r,t=0,n=zo.Key,i,s="nostr"){var w;const o=(w=this.wotPubSub)==null?void 0:w.getTimestamp(),a={from:this.sourceKey,to:r,val:t,entityType:n,context:s,note:i,timestamp:o},{outV:l,inV:u,preVal:h,change:c}=await this.setTrust(a,!1);if(!c)return;this.addToProcessScoreQueue(l,u),this.processScore();let d=VEe+this.sourceKey+r+s,y=this.submitTrustIndex[d];y||(y=Cn.debounce(async b=>{var T;h!=b&&((T=Vt.wotPubSub)==null||T.publishTrust(r,b,i,s,n,o),delete this.submitTrustIndex[d])},3e3),this.submitTrustIndex[d]=y),y(t)}addToProcessScoreQueue(r,t){r.degree>this.maxDegree||(r.degree==this.maxDegree?this.processItems[t.id]=!0:t.entityType==zo.Key?t.degree==this.maxDegree?this.processGraph=!0:this.processGraph=!0:this.processItems[t.id]=!0)}processScore(){let r=this.processGraph;if(this.processGraph)Vt.g.calculateScore(Vt.sourceId,this.maxDegree);else for(const t in Vt.processItems)Vt.g.calculateItemScore(parseInt(t)),r=!0;if(r){for(const t in Vt.verticeMonitor)Vt.callMonitor(parseInt(t));this.processGraph&&Vt.updateSubscriptions(),this.processGraph=!1,this.processItems={}}}callMonitor(r){let t=Vt.verticeMonitor[r];if(!t)return;let n=this.g.vertices[r];if(!n||!t.hasChanged(n))return;let i=t.clone();t.setScore(n),gp.dispatch(i)}addVerticeMonitor(r){let t=this.verticeMonitor[r];t||(t=new H_(r),this.verticeMonitor[r]=t),t.counter++}removeVerticeMonitor(r){let t=this.verticeMonitor[r];t&&(t.counter--,t.counter<=0&&delete this.verticeMonitor[r])}updateSubscriptions(){let r=this.g.getUnsubscribedVertices(this.maxDegree);this.subscribeToTrustEvents(r)}async setTrust(r,t){let{edge:n,preVal:i,change:s}=await this.putEdge(r,t),o=n==null?void 0:n.out,a=n==null?void 0:n.in;return{outV:o,inV:a,edge:n,preVal:i,change:s}}async putEdge(r,t){let{from:n,to:i,val:s,entityType:o,context:a,note:l,timestamp:u}=r,h=1,c,d=!1,y=Hq.key(h,n,i,a),w=this.g.edges[y];if(w){if(c=w.val,w.timestamp<u||w.val!=s&&w.timestamp==u){let b={timestamp:0};w.val!=s&&(w.val=b.val=s),w.context!=a&&(w.context=b.context=a),w.note!=l&&(w.note=b.note=l),w.entityType!=o&&(w.entityType=b.entityType=o),w.timestamp=b.timestamp=u,w.val==0&&t?(await this.db.edges.delete(y),this.g.removeEdge(w),w=void 0):await this.db.edges.update(y,b),d=!0}}else{if(s==0&&t)return{edge:w,preVal:c,change:d};let b=new KEe;b.type=h,b.key=y,b.from=n,b.to=i,b.val=s,b.entityType=o,b.context=a,b.note=l,b.timestamp=u,await this.db.edges.put(b),w=this.g.addEdge(b,!1),d=!0}return{edge:w,preVal:c,change:d}}subscribeToTrustEvents(r){var o;if(r.length==0)return;let t=this,n=this.subscriptionsCounter++,i=0;const s=new Array;for(let a of r)i<a.timestamp&&(i=a.timestamp),s.push(Sn(a.id));r.forEach(a=>a.subscribed=n),t.unsubs[n]=(o=t.wotPubSub)==null?void 0:o.subscribeTrust(s,i,t.trustEvent)}unsubscribeAll(){var r,t;for(let n in this.unsubs)(t=(r=this.unsubs)[n])==null||t.call(r)}async trustEvent(r){let{pTags:t,eTags:n,val:i,authorPubkey:s,note:o,context:a,timestamp:l}=Wq.parseTrustEvent(r);for(const u of t)await Vt.setTrustAndProcess(u,s,zo.Key,i,o,a,l);for(const u of n)await Vt.setTrustAndProcess(u,s,zo.Item,i,o,a,l)}async setTrustAndProcess(r,t,n,i,s,o,a){if(!r||r.length<2)return;r=Vt.getHexKey(r);let{outV:l,inV:u,change:h}=await Vt.setTrust({from:t,to:r,val:i,note:s,context:o,entityType:n,timestamp:a},!0);h&&(Vt.addToProcessScoreQueue(l,u),Vt.processScoreDebounce())}findOption(r,t){if(!t||t.length===0||r.degree==0)return;let n=r.score,{val:i,degree:s,count:o,hasScore:a}=n.resolve();if(!a)return;if(s===1)return i>0?t[t.length-1]:i<0?t[0]:void 0;let l=(i+o)*100/(o*2),u=Math.ceil(l/(100/t.length));return u=u===0?1:u>t.length?t.length:u,t[u-1]}getTrustList(r,t){if(!r)return[];let n=new Array;for(const i in r.in){const s=this.g.getEdge(r.in[i]);let o=this.g.vertices[i];o&&s.val==t&&n.push({outV:o,edge:s})}return n}getHexKey(r){let t=r==null?void 0:r.slice(0,4).toLocaleLowerCase();if(t==="npub"||t==="nsec"||t==="note"){const{prefix:n,data:i}=Aw(r);return Ir.arrayToHex(i)}return r}}const Vt=new GEe(Wq,Hg),Im=(e,r,t)=>{const[n,i]=Ne({id:e,options:r,option:t});return xt(()=>{function s(l){let u=Vt.g.vertices[l.id];if(!u)return;let h=Vt.findOption(u,r);i(c=>({...c,...l,option:h,vertice:u}))}const o=l=>{let u=l.detail;u.id==e&&s(u)};Vt.addVerticeMonitor(e),gp.add(o);let a=new gp(new H_(e));return a!=null&&a.detail&&s(a.detail),()=>{Vt.removeVerticeMonitor(e),gp.remove(o)}},[e]),n},Kq=e=>{const[r,t]=Ne(()=>en.getMemoryProfile(pt(e)));return xt(()=>{let n=pt(e),i=en.getMemoryProfile(n);r.created_at!=i.created_at&&t(i);const s=a=>{let l=a.detail;!l||l.id!=n||t(u=>l.created_at<=u.created_at?u:l)};$h.add(s);let o=en.subscribe(e);return()=>{$h.remove(s),o==null||o()}},[e]),r},br=e=>{const r=Kq(e.pub),t=Im(pt(e.pub),["badName","neutralName","goodName"],"");return v(tt,{children:[v("span",{className:(r.isDefault?"text-neutral-500":"")+" "+(t==null?void 0:t.option),children:r.name||r.display_name||e.placeholder}),e.hideBadge?"":v(WEe,{pub:e.pub})]})},YEe=5;class FP extends Wn{constructor(){super();le(this,"searchFromServer",Cn.debounce(t=>{fetch(`https://eu.rbr.bio/search/${t}.json`).then(n=>{n.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{Fe.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(t){if(t.keyCode===38||t.keyCode===40){t.preventDefault();const n=this.state.selected;let i=t.keyCode===40?n+1:n-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){nn(this.base).find("input").val(""),this.setState({results:[],query:""})}componentDidMount(){var t;De.get("showFollowSuggestions").on(this.inject()),De.get("searchIndexUpdated").on(this.sub(()=>this.search())),De.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),nn(document).off("keydown").on("keydown",n=>{var i;n.key==="Tab"&&((i=document.activeElement)==null?void 0:i.tagName)==="BODY"?(n.preventDefault(),nn(this.base).find("input").focus()):n.key==="Escape"&&(this.close(),nn(this.base).find("input").blur())}),this.props.focus&&((t=nn(this.base).find("input"))==null||t.focus())}componentDidUpdate(t,n){this.adjustResultsPosition(),t.focus!==this.props.focus&&nn(this.base).find("input:visible").focus(),t.query!==this.props.query&&this.search(),this.state.selected>=0&&!UEe(this.state.results.slice(0,this.state.selected+1),n.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){nn(document).off("keyup")}adjustResultsPosition(){const t=nn(this.base).find("input");t.length&&this.setState({offsetLeft:t[0].offsetLeft})}onSubmit(t){t.preventDefault();const n=nn(this.base).find("input");n.val(""),n.trigger("blur");const i=nn(this.base).find(".result.selected");i.length&&i[0].click()}preventUpDownDefault(t){(t.keyCode===38||t.keyCode===40)&&t.preventDefault()}search(){let t=this.props.query||nn(this.base).find("input").first().val()||"";if(t=t.toString().trim().toLowerCase(),!t){this.close();return}if(t.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){nn(this.base).find("input").first().val("");return}if(this.props.onSelect){if(t.match(/.+@.+\..+/)&&ye.getPubKeyByNip05Address(t).then(o=>{var a,l;o&&t===String(this.props.query||nn(this.base).find("input").first().val())&&((l=(a=this.props).onSelect)==null||l.call(a,{key:o}))}),t.startsWith("https://iris.to/")){const o=t.replace("https://iris.to","");Tr(o);return}const n=t.match(/note[a-zA-Z0-9]{59,60}/gi);if(n){Tr("/"+n[0]);return}const i=t.match(/npub[a-zA-Z0-9]{59,60}/gi);if(i){Tr("/"+i[0]);return}const s=t.split("/profile/");if(s.length>1)return this.props.onSelect({key:s[1]});if(ye.toNostrHexAddress(t))return this.props.onSelect({key:t})}if(this.searchFromServer(t),t){const n=bq.search(t).slice(0,YEe);this.setState({results:n,query:t})}else this.setState({results:[],query:t})}onClick(t,n){this.props.onSelect&&(t.preventDefault(),t.stopPropagation(),this.props.onSelect(n)),this.close()}onResultFocus(t,n){this.setState({selected:n})}render(){return v("div",{className:`relative ${this.props.class}`,children:[this.props.resultsOnly?"":v("form",{onSubmit:t=>this.onSubmit(t),children:v("label",{children:v("input",{type:"text",onKeyPress:t=>this.preventUpDownDefault(t),onKeyDown:t=>this.preventUpDownDefault(t),onKeyUp:t=>this.onKeyUp(t),placeholder:be("search"),tabIndex:1,onInput:()=>this.onInput(),className:"input-bordered border-neutral-500 input input-sm w-full"})})}),v("div",{onKeyUp:t=>this.onKeyUp(t),className:`${this.state.query?"":"hidden"} absolute z-20 left-0 mt-2 w-full bg-black border border-neutral-700 rounded shadow-lg`,children:[this.state.query&&!this.props.resultsOnly?v("a",{onFocus:t=>this.onResultFocus(t,-1),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(this.state.selected===-1?"selected bg-neutral-700":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[v("div",{class:"avatar-container",children:v("div",{style:"font-size: 1.5em; width: 40px",children:""})}),v("div",{children:[v("span",{children:this.state.query}),v("br",{}),v("small",{children:be("search_posts")})]})]}):"",this.state.results.map((t,n)=>{const i=t.item;let s="";i.followers&&(i.followDistance===0?s=be("you"):i.followDistance===1?s=be("following"):s=`${i.followers.size} ${be("followers")}`);const o=ye.toNostrBech32Address(i.key,"npub");return v("a",{onFocus:a=>this.onResultFocus(a,n),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(n===this.state.selected?"selected bg-neutral-700":""),href:`/${o}`,onClick:a=>this.onClick(a,i),children:[i.picture?v(Sa,{src:i.picture,className:"rounded-full",width:40}):v(Ki,{str:o,width:40},`${o}ic`),v("div",{children:[v(br,{pub:i.key},i.key+"searchResult"),v("br",{}),v("small",{children:s})]})]})})]})]})}}const qq=(e,r,t)=>{const n=new FormData;n.append("fileToUpload",e),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:n}).then(async i=>{const s=await i.json();s&&r&&r(s)}).catch(i=>{console.error("upload error",i),t&&t("upload failed: "+JSON.stringify(i))})},LB=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/,ZEe=({setTorrentId:e,submit:r,attachmentsChanged:t,placeholder:n,replyingTo:i,autofocus:s,forceAutoFocusMobile:o,onFocus:a,value:l,setValue:u})=>{const[h,c]=Ne(null),d=Pi(null);xt(()=>{const _=d.current;_&&(_.style.height=`${_.scrollHeight}px`)},[l]),xt(()=>{if(!i)De.get("channels").get("public").get("msgDraft").once(_=>u(_));else{const _=window.history.state;_&&_["replyTo"+i]&&u(_["replyTo"+i])}},[]),xt(()=>{var _;(!Ir.isMobile||o==!0)&&s!==!1&&((_=d==null?void 0:d.current)==null||_.focus())},[d.current]);const y=As(_=>{const I=_.clipboardData||window.clipboardData,O=I.getData("text"),g=/(magnet:\?xt=urn:btih:.*)/gi.exec(O);if(g&&e(g[0]),I.items){const R=I.items;for(let M=0;M<R.length;M++)if(R[M].type.startsWith("image/")){const L=R[M].getAsFile();qq(L,W=>u(l?`${l}

${W}`:W),W=>console.error(W))}}},[]),w=As(_=>{(_.metaKey||_.ctrlKey)&&_.key==="Enter"&&r()},[r]),b=_=>{const I=_.target.value;u(I),A(_),i||De.get("channels").get("public").get("msgDraft").put(I)},T=_=>{[37,38,39,40].includes(_.keyCode)&&A(_)},x=_=>{const I=d.current;if(!I)return;const O=I.selectionStart,C=[I.value.slice(0,O).replace(LB,"nostr:"),_.key,I.value.slice(O)].join("");u(C),I.focus(),I.selectionStart=I.selectionEnd=O+_.key.length+1},A=_=>{const O=_.target.value.slice(0,_.target.selectionStart).match(LB);if(O){const C=O[0].slice(1);ye.toNostrHexAddress(C)||c(C)}else c(null)};return v(tt,{children:[v("textarea",{onDragOver:_=>{_.preventDefault(),_.stopPropagation()},onFocus:a,onDrop:t,onKeyUp:T,onKeyDown:w,onPaste:y,onInput:b,className:"p-2 mt-1 w-full h-12 bg-black focus:ring-blue-500 focus:border-blue-500 block w-full text-lg border-gray-700 rounded-md text-white",type:"text",placeholder:be(n),autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!1,value:l,ref:d}),v(ft,{when:h,children:v(FP,{resultsOnly:!0,query:h||"",onSelect:x})})]})};function XEe(e=[],r){function t(i,s){var a;const o=[...r.matchAll(i)].map(l=>l[0]).filter((l,u,h)=>h.indexOf(l)===u);if(o)for(const l of o){const u=(a=l.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:a[0],h=u&&ye.toNostrHexAddress(u);if(!h)continue;const c=[s,h,"","mention"];e!=null&&e.find(d=>d[0]===c[0]&&d[1]===c[1])||e.push(c)}}t(Ir.pubKeyRegex,"p"),t(Ir.noteRegex,"e");const n=[...r.matchAll(Ir.hashtagRegex)].map(i=>i[0].slice(1));if(n.length)for(const i of n)e!=null&&e.find(s=>s[0]==="t"&&s[1]===i)||e.push(["t",i]);return e}async function JEe(e){var t,n,i;const r={kind:1,content:e.text};if(e.replyingTo){const s=ye.toNostrHexAddress(e.replyingTo);if(!s)throw new Error("invalid replyingTo");const o=await new Promise(l=>{Fe.getEventById(s,!0,u=>l(u))});r.tags=o.tags.filter(l=>l[0]==="p");let a=(t=o.tags)==null?void 0:t.find(l=>l[0]==="e"&&l[3]==="root");a||(a=(n=o.tags)==null?void 0:n.find(l=>l[0]==="e")),a?(r.tags.unshift(["e",s,"","reply"]),r.tags.unshift(["e",a[1],"","root"])):r.tags.unshift(["e",s,"","root"]),(i=r.tags)!=null&&i.find(l=>l[0]==="p"&&l[1]===o.pubkey)||r.tags.push(["p",o.pubkey])}return r.tags=XEe(r.tags,e.text),console.log("sending event",r),Fe.publish(r)}const jP=(e,r)=>r.indexOf(e.name.slice(-4))!==-1,GE=e=>jP(e,["webm",".mp4",".ogg"]),YE=e=>jP(e,[".mp3",".wav",".m4a"]),FB=e=>jP(e,[".jpg","jpeg",".gif",".png"]);class Am extends Wn{constructor(){super(...arguments);le(this,"coverRef",l_());le(this,"state",{settings:{},player:{},activeFilePath:"",torrent:{},isAudioOpen:!1,showFiles:!1,torrenting:!1,hasNext:!1,splitPath:null,ogImageUrl:""});le(this,"player");le(this,"torrent");le(this,"observer")}componentDidMount(){console.log("componentDidMount torrent"),De.get("player").on(this.sub(n=>{if(this.player=n,this.setState({player:n}),this.torrent&&this.player&&this.player.filePath!==this.state.activeFilePath){const i=this.getActiveFile(this.torrent);i&&this.openFile(i)}}));const t=this.props.showFiles;t&&this.setState({showFiles:t}),De.get("settings").on(this.inject()),(async()=>(this.props.standalone||await De.get("settings").get("enableWebtorrent").once())&&this.startTorrenting())()}componentWillUnmount(){super.componentWillUnmount(),this.observer&&this.observer.disconnect(),delete this.observer}onPlay(t){t.target.muted||De.get("player").get("paused").put(!0)}async startTorrenting(t){this.setState({torrenting:!0});const n=this.props.torrentId,{default:i}=await wr(()=>import("./index-47365148.js").then(a=>a.i),[]),s=new i,o=s.get(n);o?this.onTorrent(o,t):s.add(n,(a,l)=>l&&!a&&this.onTorrent(l,t))}playAudio(t,n){n&&n.preventDefault(),De.get("player").put({torrentId:this.props.torrentId,filePath:t,paused:!1})}pauseAudio(t){t&&t.preventDefault(),De.get("player").put({paused:!0})}openFile(t,n){const i=this.base,s=GE(t),o=!s&&YE(t);if(this.state.activeFilePath===t.path){if(s){const y=i.querySelector("video");y&&y.play()}else o&&De.get("player").get("paused").put(!1);return}let a;s||(a=t.path.split("/")),this.setState({activeFilePath:t.path,splitPath:a,isAudioOpen:o});let l,u;n?(l=!0,u=!1):(l=s&&this.state.settings.autoplayVideos,u=l);const h=i==null?void 0:i.querySelector(".player");if(h&&(h.innerHTML=""),o&&n&&this.playAudio(t.path),o||t.appendTo(h,{autoplay:l,muted:u}),s&&this.props.autopause){const y=i.querySelector("video"),w=T=>{T.forEach(x=>{x.isIntersecting?l&&(y==null||y.play()):y==null||y.pause()})},b={rootMargin:"0px",threshold:[.25,.75]};this.observer=new IntersectionObserver(w,b),this.observer.observe(y)}const c=i.querySelector(".info");c&&(c.style.display=s?"none":"block");const d=i.querySelector("video, audio");d&&(d.addEventListener("ended",()=>{const y=d.tagName==="VIDEO"?GE:YE;this.openNextFile(y)}),d.onplay=d.onvolumechange=this.onPlay)}getNextIndex(t){const n=this.state.torrent.files,i=n.findIndex(o=>o.path===this.state.activeFilePath);let s=n.findIndex((o,a)=>a>i&&t(o));return s===-1&&(s=n.findIndex(o=>t(o))),s===-1&&(s=i),s}openNextFile(t){const n=this.getNextIndex(t);this.openFile(this.state.torrent.files[n],!0)}getActiveFile(t){const n=this.player;let i;return n&&n.torrentId===this.props.torrentId&&(i=t.files.find(s=>s.path===n.filePath)),i}onTorrent(t,n){if(console.log("onTorrent",this.props.torrentId,t),!this.coverRef.current)return;this.torrent=t;const i=setInterval(()=>{if(!t.files){console.log("no files found in torrent:",t);return}clearInterval(i);const s=t.files.find(h=>GE(h)),o=t.files.find(h=>YE(h)),a=t.files.find(h=>FB(h)),l=this.getActiveFile(t)||s||o||a||t.files[0];this.setState({torrent:t,cover:a}),l&&this.openFile(l,n);let u=t.files.find(h=>FB(h)&&(h.name.indexOf("cover")>-1||h.name.indexOf("poster")>-1));u=u||a,u&&u.appendTo(this.coverRef.current)},1e3)}showFilesClicked(t){t.preventDefault(),this.setState({showFiles:!this.state.showFiles})}openTorrentClicked(t){t.preventDefault(),this.startTorrenting(!0)}renderLoadingTorrent(){const t=this.state,n=t.torrent,i=t.player,s=i&&i.torrentId===this.props.torrentId&&!i.paused;let o="";return t.isAudioOpen&&(o=s?v("a",{href:"#",onClick:a=>this.pauseAudio(a),children:Ps.pause}):v("a",{href:"#",onClick:a=>this.playAudio(t.activeFilePath,a),children:Ps.play})),v(tt,{children:[t.torrenting&&!t.torrent?v("p",{children:"Loading attachment..."}):null,v("div",{className:"cover",ref:this.coverRef,style:t.isAudioOpen?{}:{display:"none"}}),v("div",{className:"info",children:t.splitPath?t.splitPath.map((a,l)=>l===t.splitPath.length-1?(t.isAudioOpen&&(a=a.split(".").slice(0,-1).join(".")),v("p",{children:v("b",{children:a})})):v("p",{children:a})):null}),t.hasNext?v("b",{children:"prev"}):null,v("div",{className:"player",children:o}),t.hasNext?v("b",{children:"next"}):null,this.props.standalone||this.props.preview?v(tt,{children:[v("a",{href:this.props.torrentId,children:"Magnet link"}),n&&n.files?v("a",{href:"",style:{marginLeft:"30px"},onClick:a=>this.showFilesClicked(a),children:be(t.showFiles?"hide_files":"show_files")}):null]}):v(Kt,{href:`/torrent/${encodeURIComponent(this.props.torrentId)}`,children:be("show_files")}),t.showFiles&&n&&n.files?v(tt,{children:[v("p",{children:[be("peers"),": ",n.numPeers]}),v("div",{className:"flex-table details",children:n.files.map(a=>v("div",{onClick:()=>this.openFile(a,!0),className:`flex-row ${t.activeFilePath===a.path?"active":""}`,children:[v("div",{className:"flex-cell",children:a.name}),v("div",{className:"flex-cell no-flex",children:Ir.formatBytes(a.length)})]},a.path))})]}):null]})}renderMeta(){const t=this.state,n=t.splitPath&&t.splitPath[t.splitPath.length-1].split(".").slice(0,-1).join(".")||"File sharing",i=`${n} | Iris`,s="Shared files",o=t.isAudioOpen?"music:song":"video.movie";return v(vh,{children:[v("title",{children:n}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:o}),v("meta",{property:"og:title",content:i}),v("meta",{property:"og:description",content:s}),t.ogImageUrl?v("meta",{property:"og:image",content:t.ogImageUrl}):null]})}render(){return v("div",{className:"torrent",children:[this.props.standalone?this.renderMeta():null,!this.state.settings.enableWebtorrent&&!this.state.settings.torrenting&&!this.props.standalone?v("a",{href:"",onClick:t=>this.openTorrentClicked(t),children:be("show_attachment")}):this.renderLoadingTorrent()]})}}const QEe=({attachments:e,torrentId:r,removeAttachments:t})=>v(tt,{children:[v(ft,{when:r,children:v(Am,{preview:!0,torrentId:r})}),v(ft,{when:e&&e.length,children:v("p",{children:v("a",{href:"",onClick:n=>{n.preventDefault(),t()},children:"Remove Attachment"})})}),e&&e.map(n=>{var s,o,a;const i=n.error?v("span",{class:"error",children:n.error}):n.url||"uploading...";return(s=n.type)!=null&&s.startsWith("audio")?v(tt,{children:[i,v("audio",{controls:!0,children:v("source",{src:n.data})})]}):(o=n.type)!=null&&o.startsWith("video")?v(tt,{children:[i,v("video",{controls:!0,loop:!0,autoPlay:!0,muted:!0,children:v("source",{src:n.data})})]}):(a=n.type)!=null&&a.startsWith("image")?v(tt,{children:[i,v(Sa,{src:n.data})]}):"unknown attachment type"})]});function Om({replyingTo:e,onSubmit:r,placeholder:t="type_a_message",class:n,waitForFocus:i,autofocus:s,forceAutoFocusMobile:o}){const[a,l]=Ne(""),[u,h]=Ne([]),[c,d]=Ne(""),[y,w]=Ne(!1),b=Pi(null),T=As(O=>{O.preventDefault(),x()},[a,u,c]),x=As(async()=>{if(e||De.get("channels").get("public").get("msgDraft").put(null),!a.length)return;const O={text:a};e&&(O.replyingTo=e),u.length&&(O.attachments=u),await JEe(O),r==null||r(O),l(""),h([]),d("")},[a,u,c,e,r]),A=As(O=>{O.stopPropagation(),O.preventDefault(),b.current&&b.current.click()},[]),_=As(O=>{if(O)for(let C=0;C<O.length;C++){const g=O[C],R=[...u];R[C]=R[C]||{type:g.type},Ir.getBase64(g).then(L=>{R[C].data=L,h(R)});const M=new FormData;M.append("fileToUpload",g),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:M}).then(async L=>{const W=await L.json();W&&(R[C].url=W,h(R),l(X=>X?`${X}

${W}`:W))}).catch(L=>{console.error("upload error",L),R[C].error="upload failed",h(R)})}},[u,a]),I=As(O=>{O.preventDefault();const C=O.target.files||O.dataTransfer.files;_(C)},[_]);return v("form",{autoComplete:"off",className:n||"",onSubmit:O=>T(O),children:[v("input",{type:"file",className:"hidden",accept:"image/*, video/*, audio/*",multiple:!0,onChange:I,ref:b}),v(ZEe,{onFocus:()=>w(!0),setTorrentId:d,submit:x,setValue:l,value:a,attachmentsChanged:I,placeholder:t,autofocus:s,forceAutoFocusMobile:o}),v(ft,{when:!i||y,children:v("div",{className:"flex items-center justify-between mt-4",children:[v("button",{type:"button",className:"btn",onClick:A,children:Ps.attach}),v("button",{type:"submit",className:"btn btn-primary",children:be("post")})]})}),v(QEe,{attachments:u,torrentId:c,removeAttachments:()=>h([])})]})}var Cs=function(){return Cs=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Cs.apply(this,arguments)};function zy(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,s;n<i;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return e.concat(s||Array.prototype.slice.call(r))}var Xr="-ms-",uy="-moz-",Rr="-webkit-",Vq="comm",U_="rule",zP="decl",eSe="@import",Gq="@keyframes",tSe="@layer",rSe=Math.abs,HP=String.fromCharCode,JI=Object.assign;function nSe(e,r){return ui(e,0)^45?(((r<<2^ui(e,0))<<2^ui(e,1))<<2^ui(e,2))<<2^ui(e,3):0}function Yq(e){return e.trim()}function zl(e,r){return(e=r.exec(e))?e[0]:e}function or(e,r,t){return e.replace(r,t)}function J1(e,r){return e.indexOf(r)}function ui(e,r){return e.charCodeAt(r)|0}function Lp(e,r,t){return e.slice(r,t)}function tl(e){return e.length}function Zq(e){return e.length}function Kg(e,r){return r.push(e),e}function iSe(e,r){return e.map(r).join("")}function jB(e,r){return e.filter(function(t){return!zl(t,r)})}var W_=1,Fp=1,Xq=0,Ko=0,Ln=0,wv="";function K_(e,r,t,n,i,s,o,a){return{value:e,root:r,parent:t,type:n,props:i,children:s,line:W_,column:Fp,length:o,return:"",siblings:a}}function oc(e,r){return JI(K_("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},r)}function kd(e){for(;e.root;)e=oc(e.root,{children:[e]});Kg(e,e.siblings)}function sSe(){return Ln}function oSe(){return Ln=Ko>0?ui(wv,--Ko):0,Fp--,Ln===10&&(Fp=1,W_--),Ln}function _a(){return Ln=Ko<Xq?ui(wv,Ko++):0,Fp++,Ln===10&&(Fp=1,W_++),Ln}function nh(){return ui(wv,Ko)}function Q1(){return Ko}function q_(e,r){return Lp(wv,e,r)}function QI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aSe(e){return W_=Fp=1,Xq=tl(wv=e),Ko=0,[]}function lSe(e){return wv="",e}function ZE(e){return Yq(q_(Ko-1,eA(e===91?e+2:e===40?e+1:e)))}function uSe(e){for(;(Ln=nh())&&Ln<33;)_a();return QI(e)>2||QI(Ln)>3?"":" "}function cSe(e,r){for(;--r&&_a()&&!(Ln<48||Ln>102||Ln>57&&Ln<65||Ln>70&&Ln<97););return q_(e,Q1()+(r<6&&nh()==32&&_a()==32))}function eA(e){for(;_a();)switch(Ln){case e:return Ko;case 34:case 39:e!==34&&e!==39&&eA(Ln);break;case 40:e===41&&eA(e);break;case 92:_a();break}return Ko}function fSe(e,r){for(;_a()&&e+Ln!==47+10;)if(e+Ln===42+42&&nh()===47)break;return"/*"+q_(r,Ko-1)+"*"+HP(e===47?e:_a())}function hSe(e){for(;!QI(nh());)_a();return q_(e,Ko)}function dSe(e){return lSe(ew("",null,null,null,[""],e=aSe(e),0,[0],e))}function ew(e,r,t,n,i,s,o,a,l){for(var u=0,h=0,c=o,d=0,y=0,w=0,b=1,T=1,x=1,A=0,_="",I=i,O=s,C=n,g=_;T;)switch(w=A,A=_a()){case 40:if(w!=108&&ui(g,c-1)==58){J1(g+=or(ZE(A),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:g+=ZE(A);break;case 9:case 10:case 13:case 32:g+=uSe(w);break;case 92:g+=cSe(Q1()-1,7);continue;case 47:switch(nh()){case 42:case 47:Kg(pSe(fSe(_a(),Q1()),r,t,l),l);break;default:g+="/"}break;case 123*b:a[u++]=tl(g)*x;case 125*b:case 59:case 0:switch(A){case 0:case 125:T=0;case 59+h:x==-1&&(g=or(g,/\f/g,"")),y>0&&tl(g)-c&&Kg(y>32?HB(g+";",n,t,c-1,l):HB(or(g," ","")+";",n,t,c-2,l),l);break;case 59:g+=";";default:if(Kg(C=zB(g,r,t,u,h,i,a,_,I=[],O=[],c,s),s),A===123)if(h===0)ew(g,r,C,C,I,s,c,a,O);else switch(d===99&&ui(g,3)===110?100:d){case 100:case 108:case 109:case 115:ew(e,C,C,n&&Kg(zB(e,C,C,0,0,i,a,_,i,I=[],c,O),O),i,O,c,a,n?I:O);break;default:ew(g,C,C,C,[""],O,0,a,O)}}u=h=y=0,b=x=1,_=g="",c=o;break;case 58:c=1+tl(g),y=w;default:if(b<1){if(A==123)--b;else if(A==125&&b++==0&&oSe()==125)continue}switch(g+=HP(A),A*b){case 38:x=h>0?1:(g+="\f",-1);break;case 44:a[u++]=(tl(g)-1)*x,x=1;break;case 64:nh()===45&&(g+=ZE(_a())),d=nh(),h=c=tl(_=g+=hSe(Q1())),A++;break;case 45:w===45&&tl(g)==2&&(b=0)}}return s}function zB(e,r,t,n,i,s,o,a,l,u,h,c){for(var d=i-1,y=i===0?s:[""],w=Zq(y),b=0,T=0,x=0;b<n;++b)for(var A=0,_=Lp(e,d+1,d=rSe(T=o[b])),I=e;A<w;++A)(I=Yq(T>0?y[A]+" "+_:or(_,/&\f/g,y[A])))&&(l[x++]=I);return K_(e,r,t,i===0?U_:a,l,u,h,c)}function pSe(e,r,t,n){return K_(e,r,t,Vq,HP(sSe()),Lp(e,2,-2),0,n)}function HB(e,r,t,n,i){return K_(e,r,t,zP,Lp(e,0,n),Lp(e,n+1,-1),n,i)}function Jq(e,r,t){switch(nSe(e,r)){case 5103:return Rr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rr+e+e;case 4789:return uy+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rr+e+uy+e+Xr+e+e;case 5936:switch(ui(e,r+11)){case 114:return Rr+e+Xr+or(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rr+e+Xr+or(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rr+e+Xr+or(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Rr+e+Xr+e+e;case 6165:return Rr+e+Xr+"flex-"+e+e;case 5187:return Rr+e+or(e,/(\w+).+(:[^]+)/,Rr+"box-$1$2"+Xr+"flex-$1$2")+e;case 5443:return Rr+e+Xr+"flex-item-"+or(e,/flex-|-self/g,"")+(zl(e,/flex-|baseline/)?"":Xr+"grid-row-"+or(e,/flex-|-self/g,""))+e;case 4675:return Rr+e+Xr+"flex-line-pack"+or(e,/align-content|flex-|-self/g,"")+e;case 5548:return Rr+e+Xr+or(e,"shrink","negative")+e;case 5292:return Rr+e+Xr+or(e,"basis","preferred-size")+e;case 6060:return Rr+"box-"+or(e,"-grow","")+Rr+e+Xr+or(e,"grow","positive")+e;case 4554:return Rr+or(e,/([^-])(transform)/g,"$1"+Rr+"$2")+e;case 6187:return or(or(or(e,/(zoom-|grab)/,Rr+"$1"),/(image-set)/,Rr+"$1"),e,"")+e;case 5495:case 3959:return or(e,/(image-set\([^]*)/,Rr+"$1$`$1");case 4968:return or(or(e,/(.+:)(flex-)?(.*)/,Rr+"box-pack:$3"+Xr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rr+e+e;case 4200:if(!zl(e,/flex-|baseline/))return Xr+"grid-column-align"+Lp(e,r)+e;break;case 2592:case 3360:return Xr+or(e,"template-","")+e;case 4384:case 3616:return t&&t.some(function(n,i){return r=i,zl(n.props,/grid-\w+-end/)})?~J1(e+(t=t[r].value),"span")?e:Xr+or(e,"-start","")+e+Xr+"grid-row-span:"+(~J1(t,"span")?zl(t,/\d+/):+zl(t,/\d+/)-+zl(e,/\d+/))+";":Xr+or(e,"-start","")+e;case 4896:case 4128:return t&&t.some(function(n){return zl(n.props,/grid-\w+-start/)})?e:Xr+or(or(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return or(e,/(.+)-inline(.+)/,Rr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(tl(e)-1-r>6)switch(ui(e,r+1)){case 109:if(ui(e,r+4)!==45)break;case 102:return or(e,/(.+:)(.+)-([^]+)/,"$1"+Rr+"$2-$3$1"+uy+(ui(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~J1(e,"stretch")?Jq(or(e,"stretch","fill-available"),r,t)+e:e}break;case 5152:case 5920:return or(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,s,o,a,l,u){return Xr+i+":"+s+u+(o?Xr+i+"-span:"+(a?l:+l-+s)+u:"")+e});case 4949:if(ui(e,r+6)===121)return or(e,":",":"+Rr)+e;break;case 6444:switch(ui(e,ui(e,14)===45?18:11)){case 120:return or(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Rr+(ui(e,14)===45?"inline-":"")+"box$3$1"+Rr+"$2$3$1"+Xr+"$2box$3")+e;case 100:return or(e,":",":"+Xr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return or(e,"scroll-","scroll-snap-")+e}return e}function s$(e,r){for(var t="",n=0;n<e.length;n++)t+=r(e[n],n,e,r)||"";return t}function vSe(e,r,t,n){switch(e.type){case tSe:if(e.children.length)break;case eSe:case zP:return e.return=e.return||e.value;case Vq:return"";case Gq:return e.return=e.value+"{"+s$(e.children,n)+"}";case U_:if(!tl(e.value=e.props.join(",")))return""}return tl(t=s$(e.children,n))?e.return=e.value+"{"+t+"}":""}function gSe(e){var r=Zq(e);return function(t,n,i,s){for(var o="",a=0;a<r;a++)o+=e[a](t,n,i,s)||"";return o}}function ySe(e){return function(r){r.root||(r=r.return)&&e(r)}}function mSe(e,r,t,n){if(e.length>-1&&!e.return)switch(e.type){case zP:e.return=Jq(e.value,e.length,t);return;case Gq:return s$([oc(e,{value:or(e.value,"@","@"+Rr)})],n);case U_:if(e.length)return iSe(t=e.props,function(i){switch(zl(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":kd(oc(e,{props:[or(i,/:(read-\w+)/,":"+uy+"$1")]})),kd(oc(e,{props:[i]})),JI(e,{props:jB(t,n)});break;case"::placeholder":kd(oc(e,{props:[or(i,/:(plac\w+)/,":"+Rr+"input-$1")]})),kd(oc(e,{props:[or(i,/:(plac\w+)/,":"+uy+"$1")]})),kd(oc(e,{props:[or(i,/:(plac\w+)/,Xr+"input-$1")]})),kd(oc(e,{props:[i]})),JI(e,{props:jB(t,n)});break}return""})}}var bSe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jp=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",UP=typeof window<"u"&&"HTMLElement"in window,wSe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),V_=Object.freeze([]),zp=Object.freeze({});function $Se(e,r,t){return t===void 0&&(t=zp),e.theme!==t.theme&&e.theme||r||t.theme}var Qq=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),_Se=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xSe=/(^-|-$)/g;function UB(e){return e.replace(_Se,"-").replace(xSe,"")}var ESe=/(a)(d)/gi,WB=function(e){return String.fromCharCode(e+(e>25?39:97))};function tA(e){var r,t="";for(r=Math.abs(e);r>52;r=r/52|0)t=WB(r%52)+t;return(WB(r%52)+t).replace(ESe,"$1-$2")}var XE,Gd=function(e,r){for(var t=r.length;t;)e=33*e^r.charCodeAt(--t);return e},eV=function(e){return Gd(5381,e)};function tV(e){return tA(eV(e)>>>0)}function SSe(e){return e.displayName||e.name||"Component"}function JE(e){return typeof e=="string"&&!0}var rV=typeof Symbol=="function"&&Symbol.for,nV=rV?Symbol.for("react.memo"):60115,kSe=rV?Symbol.for("react.forward_ref"):60112,TSe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ISe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},iV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ASe=((XE={})[kSe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},XE[nV]=iV,XE);function KB(e){return("type"in(r=e)&&r.type.$$typeof)===nV?iV:"$$typeof"in e?ASe[e.$$typeof]:TSe;var r}var OSe=Object.defineProperty,CSe=Object.getOwnPropertyNames,qB=Object.getOwnPropertySymbols,PSe=Object.getOwnPropertyDescriptor,NSe=Object.getPrototypeOf,VB=Object.prototype;function sV(e,r,t){if(typeof r!="string"){if(VB){var n=NSe(r);n&&n!==VB&&sV(e,n,t)}var i=CSe(r);qB&&(i=i.concat(qB(r)));for(var s=KB(e),o=KB(r),a=0;a<i.length;++a){var l=i[a];if(!(l in ISe||t&&t[l]||o&&l in o||s&&l in s)){var u=PSe(r,l);try{OSe(e,l,u)}catch{}}}}return e}function Hp(e){return typeof e=="function"}function WP(e){return typeof e=="object"&&"styledComponentId"in e}function Vf(e,r){return e&&r?"".concat(e," ").concat(r):e||r||""}function rA(e,r){if(e.length===0)return"";for(var t=e[0],n=1;n<e.length;n++)t+=r?r+e[n]:e[n];return t}function Hy(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function nA(e,r,t){if(t===void 0&&(t=!1),!t&&!Hy(e)&&!Array.isArray(e))return r;if(Array.isArray(r))for(var n=0;n<r.length;n++)e[n]=nA(e[n],r[n]);else if(Hy(r))for(var n in r)e[n]=nA(e[n],r[n]);return e}function KP(e,r){Object.defineProperty(e,"toString",{value:r})}function Cm(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(r.length>0?" Args: ".concat(r.join(", ")):""))}var RSe=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}return e.prototype.indexOfGroup=function(r){for(var t=0,n=0;n<r;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(r,t){if(r>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,s=i;r>=s;)if((s<<=1)<0)throw Cm(16,"".concat(r));this.groupSizes=new Uint32Array(s),this.groupSizes.set(n),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(r+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[r]++,a++)},e.prototype.clearGroup=function(r){if(r<this.length){var t=this.groupSizes[r],n=this.indexOfGroup(r),i=n+t;this.groupSizes[r]=0;for(var s=n;s<i;s++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(r){var t="";if(r>=this.length||this.groupSizes[r]===0)return t;for(var n=this.groupSizes[r],i=this.indexOfGroup(r),s=i+n,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return t},e}(),tw=new Map,o$=new Map,QE=1,qb=function(e){if(tw.has(e))return tw.get(e);for(;o$.has(QE);)QE++;var r=QE++;return tw.set(e,r),o$.set(r,e),r},DSe=function(e,r){tw.set(e,r),o$.set(r,e)},BSe="style[".concat(jp,"][").concat("data-styled-version",'="').concat("6.0.5",'"]'),MSe=new RegExp("^".concat(jp,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),LSe=function(e,r,t){for(var n,i=t.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&e.registerName(r,n)},FSe=function(e,r){for(var t,n=((t=r.textContent)!==null&&t!==void 0?t:"").split(`/*!sc*/
`),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var l=a.match(MSe);if(l){var u=0|parseInt(l[1],10),h=l[2];u!==0&&(DSe(h,u),LSe(e,h,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(a)}}};function jSe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var oV=function(e){var r=document.head,t=e||r,n=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(jp,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;n.setAttribute(jp,"active"),n.setAttribute("data-styled-version","6.0.5");var o=jSe();return o&&n.setAttribute("nonce",o),t.insertBefore(n,s),n},zSe=function(){function e(r){this.element=oV(r),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,s=n.length;i<s;i++){var o=n[i];if(o.ownerNode===t)return o}throw Cm(17)}(this.element),this.length=0}return e.prototype.insertRule=function(r,t){try{return this.sheet.insertRule(t,r),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},e.prototype.getRule=function(r){var t=this.sheet.cssRules[r];return t&&t.cssText?t.cssText:""},e}(),HSe=function(){function e(r){this.element=oV(r),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(r,t){if(r<=this.length&&r>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[r]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},e.prototype.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),USe=function(){function e(r){this.rules=[],this.length=0}return e.prototype.insertRule=function(r,t){return r<=this.length&&(this.rules.splice(r,0,t),this.length++,!0)},e.prototype.deleteRule=function(r){this.rules.splice(r,1),this.length--},e.prototype.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),GB=UP,WSe={isServer:!UP,useCSSOMInjection:!wSe},aV=function(){function e(r,t,n){r===void 0&&(r=zp),t===void 0&&(t={});var i=this;this.options=Cs(Cs({},WSe),r),this.gs=t,this.names=new Map(n),this.server=!!r.isServer,!this.server&&UP&&GB&&(GB=!1,function(s){for(var o=document.querySelectorAll(BSe),a=0,l=o.length;a<l;a++){var u=o[a];u&&u.getAttribute(jp)!=="active"&&(FSe(s,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),KP(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(c){var d=function(x){return o$.get(x)}(c);if(d===void 0)return"continue";var y=s.names.get(d),w=o.getGroup(c);if(y===void 0||w.length===0)return"continue";var b="".concat(jp,".g").concat(c,'[id="').concat(d,'"]'),T="";y!==void 0&&y.forEach(function(x){x.length>0&&(T+="".concat(x,","))}),l+="".concat(w).concat(b,'{content:"').concat(T,'"}').concat(`/*!sc*/
`)},h=0;h<a;h++)u(h);return l}(i)})}return e.registerId=function(r){return qb(r)},e.prototype.reconstructWithOptions=function(r,t){return t===void 0&&(t=!0),new e(Cs(Cs({},this.options),r),this.gs,t&&this.names||void 0)},e.prototype.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(r=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new USe(i):n?new zSe(i):new HSe(i)}(this.options),new RSe(r)));var r},e.prototype.hasNameForId=function(r,t){return this.names.has(r)&&this.names.get(r).has(t)},e.prototype.registerName=function(r,t){if(qb(r),this.names.has(r))this.names.get(r).add(t);else{var n=new Set;n.add(t),this.names.set(r,n)}},e.prototype.insertRules=function(r,t,n){this.registerName(r,t),this.getTag().insertRules(qb(r),n)},e.prototype.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},e.prototype.clearRules=function(r){this.getTag().clearGroup(qb(r)),this.clearNames(r)},e.prototype.clearTag=function(){this.tag=void 0},e}(),KSe=/&/g,qSe=/^\s*\/\/.*$/gm;function lV(e,r){return e.map(function(t){return t.type==="rule"&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(n){return"".concat(r," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=lV(t.children,r)),t})}function VSe(e){var r,t,n,i=e===void 0?zp:e,s=i.options,o=s===void 0?zp:s,a=i.plugins,l=a===void 0?V_:a,u=function(d,y,w){return w===t||w.startsWith(t)&&w.endsWith(t)&&w.replaceAll(t,"").length>0?".".concat(r):d},h=l.slice();h.push(function(d){d.type===U_&&d.value.includes("&")&&(d.props[0]=d.props[0].replace(KSe,t).replace(n,u))}),o.prefix&&h.push(mSe),h.push(vSe);var c=function(d,y,w,b){y===void 0&&(y=""),w===void 0&&(w=""),b===void 0&&(b="&"),r=b,t=y,n=new RegExp("\\".concat(t,"\\b"),"g");var T=d.replace(qSe,""),x=dSe(w||y?"".concat(w," ").concat(y," { ").concat(T," }"):T);o.namespace&&(x=lV(x,o.namespace));var A=[];return s$(x,gSe(h.concat(ySe(function(_){return A.push(_)})))),A};return c.hash=l.length?l.reduce(function(d,y){return y.name||Cm(15),Gd(d,y.name)},5381).toString():"",c}var GSe=new aV,iA=VSe(),uV=wa.createContext({shouldForwardProp:void 0,styleSheet:GSe,stylis:iA});uV.Consumer;wa.createContext(void 0);function YB(){return u3(uV)}var cV=function(){function e(r,t){var n=this;this.inject=function(i,s){s===void 0&&(s=iA);var o=n.name+s.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,s(n.rules,o,"@keyframes"))},this.name=r,this.id="sc-keyframes-".concat(r),this.rules=t,KP(this,function(){throw Cm(12,String(n.name))})}return e.prototype.getName=function(r){return r===void 0&&(r=iA),this.name+r.hash},e}(),YSe=function(e){return e>="A"&&e<="Z"};function ZB(e){for(var r="",t=0;t<e.length;t++){var n=e[t];if(t===1&&n==="-"&&e[0]==="-")return e;YSe(n)?r+="-"+n.toLowerCase():r+=n}return r.startsWith("ms-")?"-"+r:r}var fV=function(e){return e==null||e===!1||e===""},hV=function(e){var r,t,n=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!fV(s)&&(Array.isArray(s)&&s.isCss||Hp(s)?n.push("".concat(ZB(i),":"),s,";"):Hy(s)?n.push.apply(n,zy(zy(["".concat(i," {")],hV(s),!1),["}"],!1)):n.push("".concat(ZB(i),": ").concat((r=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||r in bSe||r.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function ih(e,r,t,n){if(fV(e))return[];if(WP(e))return[".".concat(e.styledComponentId)];if(Hp(e)){if(!Hp(s=e)||s.prototype&&s.prototype.isReactComponent||!r)return[e];var i=e(r);return ih(i,r,t,n)}var s;return e instanceof cV?t?(e.inject(t,n),[e.getName(n)]):[e]:Hy(e)?hV(e):Array.isArray(e)?Array.prototype.concat.apply(V_,e.map(function(o){return ih(o,r,t,n)})):[e.toString()]}function ZSe(e){for(var r=0;r<e.length;r+=1){var t=e[r];if(Hp(t)&&!WP(t))return!1}return!0}var XSe=eV("6.0.5"),JSe=function(){function e(r,t,n){this.rules=r,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&ZSe(r),this.componentId=t,this.baseHash=Gd(XSe,t),this.baseStyle=n,aV.registerId(t)}return e.prototype.generateAndInjectStyles=function(r,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(r,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Vf(i,this.staticRulesId);else{var s=rA(ih(this.rules,r,t,n)),o=tA(Gd(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=Vf(i,o),this.staticRulesId=o}else{for(var l=Gd(this.baseHash,n.hash),u="",h=0;h<this.rules.length;h++){var c=this.rules[h];if(typeof c=="string")u+=c;else if(c){var d=rA(ih(c,r,t,n));l=Gd(l,d),u+=d}}if(u){var y=tA(l>>>0);t.hasNameForId(this.componentId,y)||t.insertRules(this.componentId,y,n(u,".".concat(y),void 0,this.componentId)),i=Vf(i,y)}}return i},e}(),dV=wa.createContext(void 0);dV.Consumer;var eS={};function QSe(e,r,t){var n=WP(e),i=e,s=!JE(e),o=r.attrs,a=o===void 0?V_:o,l=r.componentId,u=l===void 0?function(_,I){var O=typeof _!="string"?"sc":UB(_);eS[O]=(eS[O]||0)+1;var C="".concat(O,"-").concat(tV("6.0.5"+O+eS[O]));return I?"".concat(I,"-").concat(C):C}(r.displayName,r.parentComponentId):l,h=r.displayName;h===void 0&&function(_){return JE(_)?"styled.".concat(_):"Styled(".concat(SSe(_),")")}(e);var c=r.displayName&&r.componentId?"".concat(UB(r.displayName),"-").concat(r.componentId):r.componentId||u,d=n&&i.attrs?i.attrs.concat(a).filter(Boolean):a,y=r.shouldForwardProp;if(n&&i.shouldForwardProp){var w=i.shouldForwardProp;if(r.shouldForwardProp){var b=r.shouldForwardProp;y=function(_,I){return w(_,I)&&b(_,I)}}else y=w}var T=new JSe(t,c,n?i.componentStyle:void 0);function x(_,I){return function(O,C,g){var R=O.attrs,M=O.componentStyle,L=O.defaultProps,W=O.foldedComponentIds,X=O.styledComponentId,te=O.target,J=wa.useContext(dV),j=YB(),Z=O.shouldForwardProp||j.shouldForwardProp,se=function(it,_e,pe){for(var Te,je=Cs(Cs({},_e),{className:void 0,theme:pe}),$=0;$<it.length;$+=1){var S=Hp(Te=it[$])?Te(je):Te;for(var N in S)je[N]=N==="className"?Vf(je[N],S[N]):N==="style"?Cs(Cs({},je[N]),S[N]):S[N]}return _e.className&&(je.className=Vf(je.className,_e.className)),je}(R,C,$Se(C,J,L)||zp),Ee=se.as||te,me={};for(var Pe in se)se[Pe]===void 0||Pe[0]==="$"||Pe==="as"||Pe==="theme"||(Pe==="forwardedAs"?me.as=se.forwardedAs:Z&&!Z(Pe,Ee)||(me[Pe]=se[Pe]));var Ue=function(it,_e){var pe=YB(),Te=it.generateAndInjectStyles(_e,pe.styleSheet,pe.stylis);return Te}(M,se),Ge=Vf(W,X);return Ue&&(Ge+=" "+Ue),se.className&&(Ge+=" "+se.className),me[JE(Ee)&&!Qq.has(Ee)?"class":"className"]=Ge,me.ref=g,Ye(Ee,me)}(A,_,I)}var A=wa.forwardRef(x);return A.attrs=d,A.componentStyle=T,A.shouldForwardProp=y,A.foldedComponentIds=n?Vf(i.foldedComponentIds,i.styledComponentId):"",A.styledComponentId=c,A.target=n?i.target:e,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(_){this._foldedDefaultProps=n?function(I){for(var O=[],C=1;C<arguments.length;C++)O[C-1]=arguments[C];for(var g=0,R=O;g<R.length;g++)nA(I,R[g],!0);return I}({},i.defaultProps,_):_}}),KP(A,function(){return".".concat(A.styledComponentId)}),s&&sV(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function XB(e,r){for(var t=[e[0]],n=0,i=r.length;n<i;n+=1)t.push(r[n],e[n+1]);return t}var JB=function(e){return Object.assign(e,{isCss:!0})};function qP(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(Hp(e)||Hy(e)){var n=e;return JB(ih(XB(V_,zy([n],r,!0))))}var i=e;return r.length===0&&i.length===1&&typeof i[0]=="string"?ih(i):JB(ih(XB(i,r)))}function sA(e,r,t){if(t===void 0&&(t=zp),!r)throw Cm(1,r);var n=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return e(r,t,qP.apply(void 0,zy([i],s,!1)))};return n.attrs=function(i){return sA(e,r,Cs(Cs({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return sA(e,r,Cs(Cs({},t),i))},n}var pV=function(e){return sA(QSe,e)},Kn=pV;Qq.forEach(function(e){Kn[e]=pV(e)});function eke(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=rA(qP.apply(void 0,zy([e],r,!1))),i=tV(n);return new cV(i,n)}const tke=Kn.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  justify-content: ${e=>e.centerVertically?"center":e.justifyContent||"flex-start"};
  align-items: center;
  overflow-y: auto;
  overflow-x: hidden;
`,rke=Kn.div`
  width: ${e=>e.width||"auto"};
  height: ${e=>e.height||"auto"};
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
`,ml=({width:e,height:r,centerVertically:t,showContainer:n,children:i,onClose:s})=>{const o=h=>{h.key==="Escape"&&(s==null||s())},a=h=>{h.stopPropagation(),s==null||s()},l=h=>{h.stopPropagation()};xt(()=>(document.body.style.overflow="hidden",window.addEventListener("keydown",o),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",o)}),[o]);const u=n?v("div",{className:"p-8 border-neutral-500 border-2 bg-black rounded-lg shadow-lg",style:{width:"600px","max-width":"calc(100vw - 40px)"},onClick:h=>l(h),children:i}):i;return v(tke,{centerVertically:t,onClick:a,children:v(rke,{width:e,height:r,children:u})})},nke=[{url:"/",text:"home",icon:$H,activeIcon:xH},{url:"/search",text:"search",icon:SH,activeIcon:Ps.magnifyingGlassBold},{url:"/chat",text:"messages",icon:v3,activeIcon:y3},{url:"/settings",text:"settings",icon:bH,activeIcon:hue},{url:"/about",text:"about",icon:Zle,activeIcon:_ue}];function ike(){const[e,r]=Ne(0),[t,n]=Ne(""),[i,s]=Ne(!1);xt(()=>{const h=De.get("unseenMsgsTotal").on(r),c=De.get("activeRoute").on(n);return()=>{h(),c()}},[]),xa(()=>{const h=new Date;return h.getMonth()===2&&h.getDate()===17},[]);const o=()=>{De.get("scrollUp").put(!0),window.scrollTo(0,0)},a=()=>v(ml,{centerVertically:!0,showContainer:!0,onClose:()=>s(!1),children:v(Om,{onSubmit:()=>s(!1),placeholder:be("whats_on_your_mind"),autofocus:!0})}),l=()=>{const h=ye.getPubKey(),c=ye.toNostrBech32Address(h,"npub");return v("div",{className:"flex justify-center xl:justify-start",children:v(Kt,{href:`/${c}`,className:"btn btn-ghost md:max-xl:btn-circle",children:[v(Ki,{str:h,width:34}),v("div",{className:"hidden xl:block ml-2",children:v(br,{pub:h,hideBadge:!0})})]})})},u=h=>{const c=new RegExp(`^${h.url}(/|$)`).test(t),d=c?h.activeIcon:h.icon;return v("div",{children:v("a",{onClick:()=>o(),className:`${c?"active":""} inline-flex w-auto flex items-center space-x-4 p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900`,href:h.url,children:[v(ft,{when:h.text==="messages"&&e,children:v("span",{class:"unseen unseen-total",children:e})}),v(d,{width:26}),v("span",{className:"hidden xl:flex pr-2",children:be(h.text)})]})})};return v("div",{className:"sticky border-r border-neutral-900 top-0 z-20 h-screen max-h-screen hidden md:flex xl:w-56 flex-col px-2 py-4 flex-shrink-0",children:[v("a",{className:"flex items-center gap-3 px-2 mb-4",tabIndex:3,href:"/",onClick:()=>o(),children:[v("img",{src:"/img/dwotr/logo30.png",width:"30",height:"30"}),v("h1",{className:"hidden xl:flex text-3xl",children:"Dpeep"})]}),v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation/blob/main/Trust.md",target:"_blank",children:v("small",{className:"pl-3",children:"Iris clone with DWoTR"})}),v("div",{className:"flex flex-col gap-2",children:nke.map(h=>u(h))}),v("div",{class:"py-2 flex-1",children:[v("button",{className:"btn btn-primary md:max-xl:btn-circle mt-2",onClick:()=>s(!i),children:[v(kH,{width:26}),v("span",{className:"hidden xl:flex",children:be("new_post")})]}),v(ft,{when:i,children:a()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),l()]})}const ske={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const r=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(r.status===200){const n=await r.json();console.log("existingIrisToAddress",n),De.get("existingIrisToAddress").put(n);const i=setTimeout(()=>{n!=null&&n.confirmed||De.get("showNoIrisToAddress").put(!0)},1e3);return De.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:n}}const t=setTimeout(()=>{De.get("showNoIrisToAddress").put(!0)},2e3);De.get("showNoIrisToAddress").on(n=>{n||clearTimeout(t)})},setAsPrimary(e){const r=e+"@iris.to",t=setTimeout(()=>{ut.setMetadata({nip05:r})},2e3);ut.getProfile(ye.getPubKey(),n=>{n&&(clearTimeout(t),n.nip05!==r&&(n.nip05=r,ut.setMetadata(n)))})},async enableReserved(e){const r=ye.getPubKey(),t={content:`iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Fe.getEventHash(t),t.sig=await ye.sign(t);const n=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").put({confirmed:!0,name:e}),n.status===200)return{error:null,existing:{confirmed:!0,name:e}};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const r=ye.getPubKey(),t={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Fe.getEventHash(t),t.sig=await ye.sign(t);const n=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.status===200)return De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},QB=3e4;function vV(e){var r,t;return(t=(r=e.tags)==null?void 0:r.find(([n])=>n==="d"))==null?void 0:t[1]}function oke(e){var r;return(r=e["#d"])==null?void 0:r[0]}class ake{constructor(){le(this,"eventsByPathAndAuthor",new Map)}set(r){const t=vV(r);if(!t)return!1;this.eventsByPathAndAuthor.has(t)||this.eventsByPathAndAuthor.set(t,new Map);let n=this.eventsByPathAndAuthor.get(t);n||(n=new Map,this.eventsByPathAndAuthor.set(t,n));const i=n==null?void 0:n.get(r.pubkey);return i&&i.created_at>r.created_at?!1:(n.set(r.pubkey,r),!0)}get(r,t){const n=oke(r);if(!n)throw new Error(`filter has no #d tag: ${JSON.stringify(r)}`);const i=this.eventsByPathAndAuthor.get(n);if(i)for(const[s,o]of i)(!r.authors||r.authors.indexOf(s)!==-1)&&t(o)}}class e8{constructor(r,t,n,i,s,o){le(this,"store");le(this,"listeners");le(this,"publish");le(this,"subscribe");le(this,"unsubscribe");le(this,"filter");le(this,"encrypt");le(this,"decrypt");this.publish=r,this.subscribe=t,this.unsubscribe=n,this.filter=i,this.encrypt=s,this.decrypt=o,this.store=new ake,this.listeners=new Map}async publishSetEvent(r,t){let n;if(this.encrypt){const i=JSON.stringify(t);if(n=await this.encrypt(i),i===n)throw new Error(`Encryption failed: ${i} === ${n}`)}else n=JSON.stringify(t);return this.publish({kind:QB,tags:[["d",r]],content:n,created_at:Math.floor(Date.now()/1e3)})}async set(r,t){try{const n=await this.publishSetEvent(r,t);if(n)return this.store.set(n)&&this.notifyListeners(n),!0}catch(n){console.error(n)}return!1}async getEventValue(r){let t=this.decrypt?await this.decrypt(r.content):r.content;try{t=JSON.parse(t)}catch{throw new Error(`Failed to parse event content: ${t}`)}return t}get(r,t,n={}){n=Object.assign({},n,this.filter,{"#d":[r],kinds:[QB]});const i=this.addListener(n,t);return this.store.get(n,s=>this.callbackFromEvent(s,t)),this.subscribe([n],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(r,t){const n=Math.random().toString(36).substr(2,9),i={filter:r,callback:t,off:()=>{this.listeners.delete(n),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(n,i),i}removeListener(r){const t=this.listeners.get(r);t&&t.off()}callbackFromEvent(r,t){const n=vV(r);if(!n)throw new Error(`event has no d tag: ${JSON.stringify(r)}`);this.getEventValue(r).then(i=>{t(i,n,r)})}async notifyListeners(r){for(const t of this.listeners.values())W3(t.filter,r)&&this.callbackFromEvent(r,t.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}const _h={public:void 0,private:void 0,async logOut(){var e;if(Tr("/"),navigator.serviceWorker){const r=await navigator.serviceWorker.getRegistration();r&&r.pushManager&&((e=r.active)==null||e.postMessage({key:null}),await r.pushManager.getSubscription())}il.clear(),localStorage.clear(),dn.clear().then(()=>{location.reload()})},unsubscribe(){},onLoggedIn(){const e=ye.getPubKey(),r=pt(e);ut.followDistanceByUser.set(r,0),ut.followersByUser.set(r,new Set),ut.usersByFollowDistance.set(0,new Set([r]));const t=(s,o)=>{var u;const l=(u=s[0]["#d"])==null?void 0:u[0];if(l){const h=Fe.keyValueEvents.get(l);h&&o(h)}return Ut.subscribe(s[0],o,!0),"0"};De.get("globalFilter").once(s=>{s||De.get("globalFilter").put(Fe.DEFAULT_GLOBAL_FILTER)}),this.private=new e8((...s)=>Fe.publish(...s),t,()=>this.unsubscribe(),{authors:[e]},(...s)=>ye.encrypt(...s),(...s)=>ye.decrypt(...s)),this.public=new e8((...s)=>Fe.publish(...s),t,()=>this.unsubscribe(),{authors:[e]}),this.public.get("notifications/lastOpened",s=>{s!==Fe.notificationsSeenTime&&(Fe.notificationsSeenTime=s,Fe.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",s=>{if(s==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(s==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),on.init(),Lw.loadEvents();const n=setTimeout(()=>{ske.checkExistingAccount(e)},1e3);ut.getProfile(e,async s=>{s&&s.nip05&&s.nip05.endsWith("@iris.to")&&(De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").get("name").put(s.nip05.replace("@iris.to","")),clearTimeout(n))});const i=ut.getFollowersByUser(e,s=>{s!=null&&s.size?(De.get("noFollowers").put(!1),i()):De.get("noFollowers").put(!0)});setTimeout(()=>{Ut.subscribe({authors:[e]},void 0,!0),Ut.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),Ut.subscribe({"#p":[e],kinds:[4]},void 0,!1,!1),Ut.subscribe({authors:[e],kinds:[4]},void 0,!1,!1),Fe.subscribeGroups()},200),setInterval(()=>{console.log("handled msgs per second",Math.round(Fe.handledMsgsPerSecond/5)),Fe.handledMsgsPerSecond=0},5e3)},init:function(e){ye.getOrCreate(e),De.get("loggedIn").on(()=>this.onLoggedIn())}};let Mc=class extends Wn{constructor(){super();le(this,"key");le(this,"cls");le(this,"actionDone");le(this,"action");le(this,"activeClass");le(this,"hoverAction");le(this,"handleMouseEnter",()=>{this.setState({hover:!0})});le(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.key="follow",this.activeClass="following",this.action=be("follow_btn"),this.actionDone=be("following_btn"),this.hoverAction=be("unfollow_btn"),this.state={...this.state,hover:!1}}onClick(t){t.preventDefault();const n=!this.state[this.key],i=ye.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){ut.setFollowed(i,n);return}this.key==="block"&&ut.setBlocked(i,n)}}componentDidMount(){if(this.key==="follow"){ut.getFollowedByUser(ye.getPubKey(),t=>{const n=ye.toNostrHexAddress(this.props.id),i=n&&(t==null?void 0:t.has(n));this.setState({follow:i})});return}}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`btn ${this.props.className||this.key} ${t?this.activeClass:""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:be(i)})}};function lke({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const uke=Ar(lke),cke=uke;function fke({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const hke=Ar(fke),dke=hke;function pke({title:e,titleId:r,...t},n){return Ye("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Ye("title",{id:r},e):null,Ye("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const vke=Ar(pke),gke=vke;let bu=class extends Wn{constructor(){super();le(this,"userId",null);le(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(t){t.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}setTitle(t){let n=t.split("/")[1]||be("follows");n.startsWith("note")?n=be("post"):n.startsWith("npub")?(this.userId=n,n=v(br,{pub:this.userId||""},`${this.userId}title`)):n=n.charAt(0).toUpperCase()+n.slice(1);const i=t.replace("/chat/new","").replace("/chat/","");if(t.indexOf("/chat/")===0&&t.indexOf("/chat/new")!==0&&(this.userId=i.length<t.length?i:null,t.indexOf("/chat/")===0&&this.userId===ye.getPubKey()?n=v(tt,{children:[v("b",{className:"mr-5",children:""})," ",v("b",{children:be("note_to_self")})]}):n=v(br,{pub:this.userId||""},`${this.userId}title`)),t.indexOf("/search/")===0){let s=t.replace("/search/","");s.indexOf("?")!==-1&&(s=s.substring(0,s.indexOf("?"))),n=`${be("search")}: ${decodeURIComponent(s)}`}this.setState({title:n})}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),De.get("showParticipants").on(this.inject()),De.get("unseenMsgsTotal").on(this.inject()),De.get("unseenNotificationCount").on(this.inject()),De.get("showConnectedRelays").on(this.inject()),De.get("isMyProfile").on(this.inject()),De.get("activeRoute").on(this.sub(t=>{this.setState({about:null,activeRoute:t,showMobileSearch:!1}),this.setTitle(t)})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){window.scrollTo(0,0),this.userId&&this.userId.indexOf("hashtag")===-1&&Tr("/"+this.userId)}updateRelayCount(){this.setState({connectedRelays:on.getConnectedRelayCount()})}renderSearchBox(){return this.userId?"":v(FP,{onSelect:t=>Tr(`/${t.key}`)})}renderConnectedRelays(){return v("a",{href:"/settings/network",className:`ml-2 tooltip tooltip-bottom mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,"data-tip":be("connected_relays"),children:v("small",{className:"flex items-center gap-2",children:[v("span",{class:"icon",children:Ps.network}),v("span",{children:this.state.connectedRelays})]})})}renderTitle(){const t=this.state.activeRoute,n=["/","/global"].includes(t);return v("div",{className:"flex flex-1 items-center justify-center",onClick:()=>this.onTitleClicked(),children:[this.state.title,v(ft,{when:n,children:[v("button",{className:"ml-2 focus:outline-none rounded-full p-2",onClick:i=>{i.stopPropagation(),window.feed_selector_modal.showModal()},children:v(cke,{width:20})}),v("dialog",{id:"feed_selector_modal",className:"modal focus:outline-none",children:[v("ul",{className:"modal-box p-2 shadow menu bg-base-100 rounded-box w-52 border-2 border-neutral-900 gap-2",children:[v("li",{children:v(Kt,{className:t==="/"?"active":"",href:"/",children:be("follows")})}),v("li",{children:v(Kt,{className:t==="/global"?"active":"",href:"/global",children:be("global_feed")})})]}),v("form",{method:"dialog",className:"modal-backdrop",children:v("button",{children:"close"})})]})]})]})}renderNotifications(){return v(tt,{children:[v(ft,{when:this.state.isMyProfile,children:v(Kt,{href:"/settings",className:"md:hidden",children:v(bH,{width:28})})}),v("a",{href:"/notifications",className:`relative inline-block ${this.state.isMyProfile?"hidden md:flex":""}`,children:[this.state.activeRoute==="/notifications"?v(g3,{width:28}):v(wH,{width:28}),v(ft,{when:this.state.unseenNotificationCount,children:v("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-iris-purple text-white text-sm rounded-full h-5 w-5 flex items-center justify-center",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount})})]})]})}renderLoginBtns(){return v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>De.get("showLoginModal").put(!0),children:be("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>De.get("showLoginModal").put(!0),children:be("sign_up")})]})}renderBackBtnOrLogo(){return this.state.activeRoute==="/"?v(tt,{children:v("div",{className:"flex flex-row items-center gap-2 md:hidden",children:[v("img",{src:"/img/dwotr/logo30.png",style:"padding-top:5px"}),v("h1",{className:"text-3xl",children:"Dpeep"})]})}):v(_H,{width:24,onClick:()=>this.backButtonClicked()})}render(){const n=!!ye.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[this.renderBackBtnOrLogo(),v(ft,{when:n&&this.state.showConnectedRelays,children:this.renderConnectedRelays()}),this.renderTitle(),v(ft,{when:n,children:this.renderNotifications()}),v(ft,{when:!n,children:this.renderLoginBtns()})]})})})}};const Vb="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8",Gb="npub1srpfc36pes9urzcnmrev38c9ypewahmggqc56dj7czr4k6zd4qcs4m5mn8";class yke extends Wn{render(){return v(tt,{children:[v(bu,{}),v("div",{className:"main-view prose",id:"settings",children:v("div",{className:"px-2 md:px-4 py-2",children:[v("h2",{className:"mt-0",children:be("about")}),v("p",{children:["Dpeep, a clone of the innovative ",v("b",{children:"Iris.to"})," (",v("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"), serves as a proof-of-concept project for the integration of the Decentralized Web of Trust Reputation system (DWoTR). Apart from showcasing the unique benefits provided by the DWoTR system, Dpeep does not aim to offer additional significant functionality."]}),v("ul",{children:[v("li",{children:[v("b",{children:"Decentralized Web of Trust Reputation"})," system: a decentralized network that evaluates and displays trust based on each user's unique perspective."]}),v("li",{children:[v("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),v("li",{children:[v("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),v("li",{children:[v("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!Ir.isStandalone()&&v(tt,{children:[v("h3",{children:"Versions"}),v("p",{children:v("ul",{children:v("li",{children:[v("a",{target:"_blank",href:"https://dpeep.com",children:"dpeep.com"})," ","(web)"]})})})]}),v("h3",{children:"Docs"}),v("p",{children:["Visit Iris ",v("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),v("p",{children:["Visit Dpeep ",v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation",children:"docs"})," explanations on the Decentralized Web of Trust Reputation system."]}),v("h3",{children:"Privacy"}),v("p",{children:be("application_security_warning")}),v("h3",{children:"Follow"}),v("div",{className:"flex flex-row items-center w-full justify-between",children:[v(Kt,{href:`/${Vb}`,className:"flex flex-row items-center gap-2",children:[v(Ki,{str:Vb,width:40}),v(br,{pub:Vb,placeholder:"Iris"})]}),v(Mc,{className:"btn btn-neutral btn-sm",id:Vb})]}),v("div",{className:"flex flex-row items-center w-full justify-between py-5",children:[v(Kt,{href:`/${Gb}`,className:"flex flex-row items-center gap-2",children:[v(Ki,{str:Gb,width:40}),v(br,{pub:Gb,placeholder:"Iris"})]}),v(Mc,{className:"btn btn-neutral btn-sm",id:Gb})]}),v("h3",{children:"Released under MIT license"}),v("p",{children:["Dpeep code:",v("a",{href:"https://github.com/DigitalTrustProtocol/Dpeep",children:"Github"}),"."]}),v("br",{})]})})]})}}class gV extends Fn{constructor(){super(...arguments);le(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t.message}}componentDidCatch(t){console.error(t),this.setState({error:t.message})}render(){return this.state.error?v("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}function G_({date:e}){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;let o="";return t<n?o=be("now"):t<i?o=Math.floor(t/n)+"m":t<s?o=Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?o=e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):o=e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),v(tt,{children:o})}const mke=yi(({event:e})=>{var r,t;return v("div",{className:"flex gap-4 w-full break-words",children:[v("div",{className:"flex-shrink-0",children:v(Kt,{href:`/${cu.npubEncode(e.pubkey)}`,children:v(Ki,{str:e.pubkey,width:30})})}),v(Kt,{href:`/${cu.noteEncode(e.id)}`,className:"w-full",children:[v("b",{children:v(br,{pub:e.pubkey})})," | ",v("span",{className:"text-neutral-400",children:[v(G_,{date:new Date(e.created_at*1e3)}),v("br",{}),((r=e.content)==null?void 0:r.length)>80?`${(t=e.content)==null?void 0:t.slice(0,80)}...`:e.content]})]})]},e.id)}),bke=({events:e})=>{const r=[];return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:[v(vue,{width:20,className:"text-iris-orange"}),"Trending 24h"]}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-6 text-xs overflow-x-hidden",children:e.filter(t=>!r[t.pubkey]).map(t=>v(mke,{event:t}))})]})},wke=yi(bke),yV=(e,r,t=n=>n)=>{const n=localStorage.getItem(r),i=n?JSON.parse(n).data:[],[s,o]=Ne(i);return xt(()=>{const a=()=>{fetch(e).then(l=>l.json()).then(l=>{const u=t(l);o(u),localStorage.setItem(r,JSON.stringify({data:u,timestamp:new Date().getTime()}))}).catch(()=>{if(n){const{data:l}=JSON.parse(n);o(l)}})};if(n){const{timestamp:l}=JSON.parse(n);(new Date().getTime()-l)/1e3/60>=15&&a()}else a()},[e,r,t]),s},$ke=yi(({pubkey:e})=>{var t,n;const r=Kq(e);return v(Kt,{href:`/${cu.npubEncode(e)}`,className:"flex flex-row gap-4 w-full break-words",children:[v("span",{className:"flex-shrink-0",children:v(Ki,{str:e,width:30})}),v("span",{className:"flex-1",children:[v("b",{children:v(br,{pub:e})}),v("br",{}),v("span",{className:"text-neutral-400",children:[(t=r==null?void 0:r.about)==null?void 0:t.slice(0,100),((n=r==null?void 0:r.about)==null?void 0:n.length)>100?"...":""]})]}),v("span",{className:"flex-shrink-0",children:v(Mc,{className:"btn btn-sm",id:e})})]},e)}),_ke=yi(()=>{const e=`https://api.nostr.band/v0/suggested/profiles/${ye.getPubKey()}`,r=yV(e,"followSuggestions",n=>n.profiles||[]);if(!r.length)return null;const t=r.sort(()=>.5-Math.random()).slice(0,8).map(n=>n.pubkey);return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:"Follow suggestions"}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-4 items-center text-xs overflow-x-hidden",children:t.map(n=>v($ke,{pubkey:n},n))})]})}),mV=e=>{const n=yV("https://api.nostr.band/v0/trending/notes","trendingNotes",i=>{const s=i.notes.map(o=>o.event);return s.forEach(o=>{Fe.handle(o)}),s});return v("div",{class:"sticky border-l border-neutral-900 top-0 right-0 px-4 py-2 mx-2 md:mx-0 flex flex-col gap-4 h-screen",children:[v(FP,{focus:e.focus,onSelect:({key:i})=>{Tr("/"+i)}}),v("div",{className:"max-h-[50vh] overflow-y-auto",children:v(wke,{events:n})}),v("div",{className:"max-h-[50vh] overflow-y-auto",children:v(_ke,{})})]})};let bV=!0;const wV=function(){bV=!1,window.removeEventListener("popstate",wV)};window.addEventListener("popstate",wV);let wu=class extends Wn{constructor(){super(...arguments);le(this,"class","");le(this,"id","");le(this,"observer",null);le(this,"scrollPosition",0);le(this,"hideSideBar",!1);le(this,"hideHeader",!1);le(this,"saveScrollPosition",Cn.debounce(()=>{const t=window.scrollY||document.documentElement.scrollTop,i={...window.history.state,scrollPosition:t};window.history.replaceState(i,"")},100));le(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(t=>{t.forEach(()=>{this.restoreScrollPosition(!1)})}),this.observer.observe(document.body),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3)})}render(){return v("div",{className:"flex flex-row h-full w-full",children:[v("div",{className:`flex flex-col w-full h-full ${this.hideSideBar?"":"lg:w-2/3"}`,children:[v(ft,{when:!this.hideHeader,children:v(bu,{})}),v("div",{class:this.class,id:this.id,className:"h-full",children:v(gV,{children:this.renderView()})})]}),v(ft,{when:!this.hideSideBar,children:v("div",{className:"flex-col hidden lg:flex lg:w-1/3",children:v(mV,{focus:!1})})})]})}componentDidMount(){window.addEventListener("scroll",this.saveScrollPosition),this.restoreScrollPosition()}restoreScrollPosition(t=!0){var s,o;const n=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!bV&&n!==i)t&&this.observeScrollElement(),this.scrollPosition||(this.scrollPosition=(o=window.history.state)==null?void 0:o.scrollPosition),this.scrollPosition&&window.scrollTo(0,this.scrollPosition);else{const l={...window.history.state||{},previousState:n};window.history.replaceState(l,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect(),window.removeEventListener("scroll",this.saveScrollPosition)}};const xke=({chat:e,active:r=!1,latestMsg:t={},name:n})=>{const i=o=>{o.keyCode===13&&o.target.click()},s=ye.toNostrBech32Address(e,"npub");return v("div",{onKeyUp:i,role:"button",tabIndex:0,className:`p-2 ${r?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>Tr(`/chat/${s||e}`),children:v("div",{className:"flex gap-4 overflow-x-hidden",children:[v(Ki,{str:s||e,width:49}),v("div",{className:"flex flex-col",children:[v("span",{className:"name",children:[v(ft,{when:n,children:n}),v(ft,{when:!n,children:[v(ft,{when:e===ye.getPubKey(),children:v("span",{className:"font-bold italic",children:[" ",be("note_to_self")]})}),v(ft,{when:e!==ye.getPubKey(),children:v(br,{pub:e})}),v("small",{className:"ml-2 latest-time text-neutral-500",children:v(G_,{date:new Date(t.created_at*1e3)})})]})]}),v("small",{className:"text-neutral-500 truncate",children:t.text})]})]})})},Eke=yi(xke),Ske=({active:e})=>v("div",{role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 h-16 items-center cursor-pointer hover:bg-neutral-900 ${e?"bg-neutral-700":""}`,onClick:()=>Tr("/chat/new"),children:[v("div",{className:"flex justify-center items-center w-12 h-12 rounded-full",children:v(kH,{className:"w-6 h-6"})}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:v("span",{className:"name",children:be("new_chat")})})})]}),kke=(e,r)=>{const t=e.value.latest,n=r.value.latest;return t?n?n.created_at-t.created_at:-1:1},Tke=({activeChat:e,className:r})=>{const[t,n]=Ne(new X3(kke)),[i,s]=Ne(0),[o,a]=Ne(!1),l=Pi(null),u=()=>{Notification&&Notification.requestPermission().then(c=>{(c==="granted"||c==="denied")&&a(!1)})};xt(()=>{const c=[],d=(y,w)=>{n(b=>(b.set(w,{...y}),b)),s(b=>b+1)};return c.push(De.get("chats").map(d)),c.push(De.get("groups").map(d)),c.push(De.get("scrollUp").on(()=>{window.scrollTo(0,0),l.current&&(l.current.scrollTop=0)})),()=>c.forEach(y=>y())},[]);const h=e&&ye.toNostrHexAddress(e)||e;return v("section",{className:`md:border-r flex flex-shrink-0 border-neutral-800 overflow-x-hidden overflow-y-auto md:px-0 w-full md:w-64 ${r}`,ref:l,children:[v("div",{className:o?"":"hidden",onClick:u,children:[v("div",{className:"title",children:be("get_notified_new_messages")}),v("div",{children:v("a",{children:be("turn_on_desktop_notifications")})})]}),v("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[v(Ske,{active:h==="new"}),Array.from(t.entries()).map(([c,d])=>v(Eke,{active:c===h,chat:c,latestMsg:d==null?void 0:d.latest,name:d==null?void 0:d.name},c))]})]})};var Ike=yl,Ake=function(){return Ike.Date.now()},Oke=Ake,Cke=/\s/;function Pke(e){for(var r=e.length;r--&&Cke.test(e.charAt(r)););return r}var Nke=Pke,Rke=Nke,Dke=/^\s+/;function Bke(e){return e&&e.slice(0,Rke(e)+1).replace(Dke,"")}var Mke=Bke,Lke=Sm,Fke=Tm,jke="[object Symbol]";function zke(e){return typeof e=="symbol"||Fke(e)&&Lke(e)==jke}var Hke=zke,Uke=Mke,t8=km,Wke=Hke,r8=0/0,Kke=/^[-+]0x[0-9a-f]+$/i,qke=/^0b[01]+$/i,Vke=/^0o[0-7]+$/i,Gke=parseInt;function Yke(e){if(typeof e=="number")return e;if(Wke(e))return r8;if(t8(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=t8(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Uke(e);var t=qke.test(e);return t||Vke.test(e)?Gke(e.slice(2),t?2:8):Kke.test(e)?r8:+e}var Zke=Yke,Xke=km,tS=Oke,n8=Zke,Jke="Expected a function",Qke=Math.max,eTe=Math.min;function tTe(e,r,t){var n,i,s,o,a,l,u=0,h=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(Jke);r=n8(r)||0,Xke(t)&&(h=!!t.leading,c="maxWait"in t,s=c?Qke(n8(t.maxWait)||0,r):s,d="trailing"in t?!!t.trailing:d);function y(C){var g=n,R=i;return n=i=void 0,u=C,o=e.apply(R,g),o}function w(C){return u=C,a=setTimeout(x,r),h?y(C):o}function b(C){var g=C-l,R=C-u,M=r-g;return c?eTe(M,s-R):M}function T(C){var g=C-l,R=C-u;return l===void 0||g>=r||g<0||c&&R>=s}function x(){var C=tS();if(T(C))return A(C);a=setTimeout(x,b(C))}function A(C){return a=void 0,d&&n?y(C):(n=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),u=0,n=l=i=a=void 0}function I(){return a===void 0?o:A(tS())}function O(){var C=tS(),g=T(C);if(n=arguments,i=this,l=C,g){if(a===void 0)return w(l);if(c)return clearTimeout(a),a=setTimeout(x,r),y(l)}return a===void 0&&(a=setTimeout(x,r)),o}return O.cancel=_,O.flush=I,O}var rTe=tTe,nTe=rTe,iTe=km,sTe="Expected a function";function oTe(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(sTe);return iTe(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),nTe(e,r,{leading:n,maxWait:r,trailing:i})}var aTe=oTe;const Y_=no(aTe),Wi=({copyStr:e,text:r,className:t})=>{const[n,i]=Ne(!1),[s,o]=Ne(void 0),[a,l]=Ne(void 0),u=(d,y)=>{if(d.target===null)return;Ir.copyToClipboard(y);const w=d.target,b=w.offsetWidth;b!==void 0&&(o(s||b+1),w.style.width=`${s}px`,i(!0),a!==void 0&&clearTimeout(a),l(setTimeout(()=>i(!1),2e3)))},h=d=>{d.preventDefault();const y=typeof e=="function"?e():e;u(d,y)};xt(()=>()=>{a&&clearTimeout(a)},[a]);const c=n?be("copied"):r||be("copy");return v("button",{className:t||"btn",onClick:d=>h(d),children:c})};var lTe=function(e){return e instanceof RegExp},uTe=function(r){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return r&&n.test(r)?r.replace(t,"\\$&"):r},$V=function(e){return typeof e=="string"},cTe=function(e){var r=[];return e.forEach(function(t){Array.isArray(t)?r=r.concat(t):r.push(t)}),r};function fTe(e,r,t){var n=0,i=0;if(e==="")return e;if(!e||!$V(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=r;lTe(s)||(s=new RegExp("("+uTe(s)+")","gi"));for(var o=e.split(s),a=1,l=o.length;a<l;a+=2){if(o[a]===void 0||o[a-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=o[a].length,n+=o[a-1].length,o[a]=t(o[a],a,n),n+=i}return o}var hTe=function(r,t,n){return Array.isArray(r)||(r=[r]),cTe(r.map(function(i){return $V(i)?fTe(i,t,n):i}))};const dTe=no(hTe),pTe={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableAppleMusic",component:({match:e})=>v("iframe",{className:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},vTe={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableAppleMusic",component:({match:e})=>{const r=e.includes("?i=")?"applepodcast-small":"applepodcast-large";return v("iframe",{className:r,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}},gTe=({each:e,children:r})=>e.map((t,n)=>r(t,n)),_V=({event:e,isQuote:r,standalone:t,fullWidth:n})=>v("span",{className:`flex flex-col items-center flex-shrink-0 ${n?"mr-2":"mr-4"}`,children:[v(ft,{when:e.pubkey,children:v(Kt,{href:`/${e.pubkey}`,children:v(Ki,{str:ye.toNostrBech32Address(e.pubkey,"npub"),width:40})})}),v(ft,{when:r&&!t,children:v("div",{className:"border-l-2 border-neutral-700 h-full"})})]}),{bech32:rl,hex:pa,utf8:yTe}=UW,i8={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},s8={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},o8={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},a8={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Yb=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],mTe={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},bTe=BigInt("2100000000000000000"),l8=BigInt(1e11),oA={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},xV={};for(let e=0,r=Object.keys(oA);e<r.length;e++){const t=r[e],n=oA[r[e]].toString();xV[n]=t}const wTe={1:e=>pa.encode(rl.fromWordsUnsafe(e)),16:e=>pa.encode(rl.fromWordsUnsafe(e)),13:e=>yTe.encode(rl.fromWordsUnsafe(e)),19:e=>pa.encode(rl.fromWordsUnsafe(e)),23:e=>pa.encode(rl.fromWordsUnsafe(e)),27:e=>pa.encode(rl.fromWordsUnsafe(e)),6:a$,24:a$,3:_Te,5:xTe};function $Te(e){return r=>({tagCode:parseInt(e),words:rl.encode("unknown",r,Number.MAX_SAFE_INTEGER)})}function a$(e){return e.reverse().reduce((r,t,n)=>r+t*Math.pow(32,n),0)}function _Te(e){const r=[];let t,n,i,s,o,a=rl.fromWordsUnsafe(e);for(;a.length>0;)t=pa.encode(a.slice(0,33)),n=pa.encode(a.slice(33,41)),i=parseInt(pa.encode(a.slice(41,45)),16),s=parseInt(pa.encode(a.slice(45,49)),16),o=parseInt(pa.encode(a.slice(49,51)),16),a=a.slice(51),r.push({pubkey:t,short_channel_id:n,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return r}function xTe(e){const r=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;r.length<Yb.length*2;)r.push(!1);const t={};Yb.forEach((i,s)=>{let o;r[s*2]?o="required":r[s*2+1]?o="supported":o="unsupported",t[i]=o});const n=r.slice(Yb.length*2);return t.extra_bits={start_bit:Yb.length*2,bits:n,has_required:n.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},t}function EV(e,r){let t,n;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(n),s=t?i*l8/mTe[t]:i*l8;if(t==="p"&&i%BigInt(10)!==BigInt(0)||s>bTe)throw new Error("Amount is outside of valid range");return r?s.toString():s}function ETe(e,r){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const t=[],n=rl.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=n.prefix;let s=n.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});const u=l[1];let h;if(r){if(r.bech32===void 0||r.pubKeyHash===void 0||r.scriptHash===void 0||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");h=r}else switch(u){case i8.bech32:h=i8;break;case s8.bech32:h=s8;break;case o8.bech32:h=o8;break;case a8.bech32:h=a8;break}if(!h||h.bech32!==u)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:u,value:h});const c=l[2];let d;if(c){const I=l[3];d=EV(c+I,!0),t.push({name:"amount",letters:l[2]+l[3],value:d})}else d=null;t.push({name:"separator",letters:"1"});const y=a$(s.slice(0,7));s=s.slice(7),t.push({name:"timestamp",letters:o.slice(0,7),value:y}),o=o.slice(7);let w,b,T,x;for(;s.length>0;){const I=s[0].toString();w=xV[I]||"unknown_tag",b=wTe[I]||$Te(I),s=s.slice(1),T=a$(s.slice(0,2)),s=s.slice(2),x=s.slice(0,T),s=s.slice(T),t.push({name:w,tag:o[0],letters:o.slice(0,1+2+T),value:b(x)}),o=o.slice(1+2+T)}t.push({name:"signature",letters:o.slice(0,104),value:pa.encode(rl.fromWordsUnsafe(a))}),o=o.slice(104),t.push({name:"checksum",letters:o});let A={paymentRequest:e,sections:t,get expiry(){let I=t.find(O=>O.name==="expiry");if(I)return _("timestamp")+I.value},get route_hints(){return t.filter(I=>I.name==="route_hint").map(I=>I.value)}};for(let I in oA)I!=="route_hint"&&Object.defineProperty(A,I,{get(){return _(I)}});return A;function _(I){let O=t.find(C=>C.name===I);return O?O.value:void 0}}var STe={decode:ETe,hrpToMillisat:EV};let Uy;const kTe={USD:"$",EUR:"",JPY:"",SATS:""};let Ec="USD";const u8=navigator.language,TTe=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];TTe.some(e=>u8.startsWith(e))?Ec="EUR":u8.startsWith("ja")&&(Ec="JPY");const SV=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+Ec).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var r,t,n;Uy=parseFloat((n=(t=(r=e==null?void 0:e.result)==null?void 0:r["XXBTZ"+Ec])==null?void 0:t.c)==null?void 0:n[0]),console.log("lastBitcoinPrice",Uy,Ec)}).catch(e=>{console.error("Error:",e)})};De.get("displayCurrency").on(e=>{Ec=e,SV()});setTimeout(()=>{Uy||SV()},1e3);function kV(e){var r,t,n;try{const i=STe.decode(e),s=i.sections.find(b=>b.name==="amount"),o=s?Number(s.value):void 0,a=i.sections.find(b=>b.name==="timestamp"),l=a?Number(a.value):void 0,u=i.sections.find(b=>b.name==="expiry"),h=u?Number(u.value):void 0,c=(r=i.sections.find(b=>b.name==="description"))==null?void 0:r.value,d=new Uint8Array((t=i.sections.find(b=>b.name==="description_hash"))==null?void 0:t.value),y=new Uint8Array((n=i.sections.find(b=>b.name==="payment_hash"))==null?void 0:n.value),w={amount:o,expire:l&&h?l+h:void 0,timestamp:l,description:c,descriptionHash:d?Mw(d):void 0,paymentHash:y?Mw(y):void 0,expired:!1};return w.expire&&(w.expired=w.expire<new Date().getTime()/1e3),w}catch(i){console.error(i)}}function ITe(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function ATe(e){let r;e>=1||e>=.01?r=2:r=4;const t=Math.pow(10,r);return e=Math.round(e*t)/t,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:r})}function aA(e){if(Uy&&Ec!=="SATS"){const r=e/1e8*Uy,t=ATe(r);return kTe[Ec]+" "+t}else return ITe(e)}const Wy=(e,r=["red","grey","green"])=>r[e+1],OTe=(e,r=!1)=>!e||!r&&!e.hasTrustScore()?null:e.trusts.join("/"),CTe=(e,r=!1)=>!e||!r&&!e.hasDistrustScore()?null:e.distrusts.join("/"),VP=(e,r,t=!1)=>!e||!t&&!e.hasTrustScore()?null:v("a",{href:`/graph/${r}/in/trust/path`,className:"cursor-pointer hover:underline",title:"Trusts at degree 0/1/2",children:[OTe(e,t),"",v("span",{className:"text-neutral-500",children:"Trusts"})]}),GP=(e,r,t=!1)=>!e||!t&&!e.hasDistrustScore()?null:v("a",{href:`/graph/${r}/in/distrust/path`,className:"cursor-pointer hover:underline",title:"Distrusts at degree 0/1/2",children:[CTe(e,t),"",v("span",{className:"text-neutral-500",children:"Distrusts"})]}),PTe=yi(({data:e})=>{const r=e.pubkey.startsWith("npub")?e.pubkey:cu.npubEncode(e.pubkey);return v(Kt,{href:`/${r}`,className:"flex items-center gap-4",children:[v(Ki,{str:e.pubkey,width:40}),v("div",{className:"flex flex-col",children:[v(br,{pub:e.pubkey}),e.text&&v("small",{className:"text-neutral-500",children:e.text})]})]})}),NTe=({event:e,wot:r})=>{var A;const[t,n]=Ne(new Set),[i,s]=Ne(new Set),[o,a]=Ne(new Map),[l,u]=Ne(""),[h,c]=Ne([]),[d,y]=Ne(""),w=(A=r==null?void 0:r.vertice)==null?void 0:A.score,b=w==null?void 0:w.hasTrustScore(),T=w==null?void 0:w.hasDistrustScore();return xt(()=>{const _=[],I=g=>{n(new Set(g))},O=g=>{s(new Set(g))},C=g=>{const R=new Map;let M=0;Array.from(g==null?void 0:g.values()).map(W=>Fe.db.by("id",W)).forEach(W=>{const X=W==null?void 0:W.tags.find(Z=>Z[0]==="bolt11")[1];if(!X){console.log("Invalid zap, missing bolt11 tag");return}const te=kV(X),J=((te==null?void 0:te.amount)||0)/1e3;M+=J;const j=Fe.getZappingUser(W.id);if(j){const Z=R.get(j)||0;R.set(j,Z+J)}}),a(R),u(M>0?aA(M):"")};return _.push(Fe.getLikes(e.id,I)),_.push(Fe.getReposts(e.id,O)),_.push(Fe.getZaps(e.id,C)),()=>{_.forEach(g=>g())}},[e]),t.size>0||i.size>0||o.size>0?v(tt,{children:[v("hr",{className:"-mx-2 opacity-10 mt-2"}),h.length>0&&v(ml,{showContainer:!0,onClose:()=>c([]),children:[v("div",{className:"flex items-center justify-between mb-4",children:v("h2",{className:"text-xl font-bold",children:d})}),v("div",{className:"flex flex-col gap-4 overflow-y-auto max-h-[50vh]",children:h.map(_=>v(PTe,{data:_},_.pubkey))})]}),v("div",{className:"flex items-center gap-4 py-2",children:[t.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const _=Array.from(t).map(I=>({pubkey:I}));c(_),y("Liked by")},className:"cursor-pointer hover:underline",children:[t.size," ",v("span",{className:"text-neutral-500",children:"Likes"})]})}),i.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const _=Array.from(i).map(I=>({pubkey:I}));c(_),y("Reposted by")},className:"cursor-pointer hover:underline",children:[i.size," ",v("span",{className:"text-neutral-500",children:"Reposts"})]})}),(o==null?void 0:o.size)>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const _=[],I=[...o.entries()].sort((O,C)=>C[1]-O[1]);for(const[O,C]of I)_.push({pubkey:O,text:aA(C)});c(_),y("Zapped by")},className:"cursor-pointer hover:underline",children:[o.size," ",v("span",{className:"text-neutral-500",children:"Zaps"}),l&&v("small",{className:"text-neutral-500",children:[" (",l,")"]})]})}),b&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:VP(w,ye.toNostrBech32Address(e.id,"note"),!0)}),T&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:GP(w,ye.toNostrBech32Address(e.id,"note"),!0)})]}),v("hr",{className:"-mx-2 opacity-10 mb-2"})]}):null};function l$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M19.42 4.44994C19.3203 4.38116 19.2053 4.3379 19.085 4.32395C18.9647 4.31 18.8428 4.32579 18.73 4.36994C17.5425 4.8846 16.2857 5.22155 15 5.36994C14.1879 5.15273 13.4127 4.81569 12.7 4.36994C11.7802 3.80143 10.763 3.40813 9.7 3.20994C8.41 3.08994 5.34 4.09994 4.7 4.30994C4.55144 4.36012 4.42234 4.4556 4.33086 4.58295C4.23938 4.71031 4.19012 4.86314 4.19 5.01994V19.9999C4.19 20.1989 4.26902 20.3896 4.40967 20.5303C4.55032 20.6709 4.74109 20.7499 4.94 20.7499C5.13891 20.7499 5.32968 20.6709 5.47033 20.5303C5.61098 20.3896 5.69 20.1989 5.69 19.9999V14.1399C6.93659 13.6982 8.23315 13.4127 9.55 13.2899C10.3967 13.4978 11.2062 13.8351 11.95 14.2899C12.8201 14.8218 13.7734 15.2038 14.77 15.4199H15C16.4474 15.2326 17.8633 14.8526 19.21 14.2899C19.3506 14.2342 19.4713 14.1379 19.5568 14.0132C19.6423 13.8885 19.6887 13.7411 19.69 13.5899V5.06994C19.6975 4.95258 19.6769 4.83512 19.63 4.7273C19.583 4.61947 19.511 4.5244 19.42 4.44994Z"})})}function u$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[v("g",{"clip-path":"url(#clip0)",children:[v("path",{d:"M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 20L26 28L41 7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]}),v("defs",{children:v("clipPath",{id:"clip0",children:v("rect",{width:"48",height:"48",fill:"white"})})})]})}const RTe=({event:e})=>{const[r,t]=Ne({likes:0,liked:!1,likedBy:new Set});xt(()=>{const o=ut.getProfile(e.pubkey,l=>{}),a=Fe.getLikes(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=ye.getPubKey();t(l=>({...l,likes:o.size,liked:o.has(a),likedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.liked)},s=(o=!0)=>{if(o){const a=e.pubkey,l=ye.toNostrHexAddress(e.id);l&&Fe.publish({kind:7,content:"+",tags:[["e",l],["p",a]]})}};return v("a",{className:`btn-ghost btn-sm justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${r.liked?"text-iris-red":"hover:text-iris-red text-neutral-500"}`,onClick:o=>i(o),children:[r.liked?v(g3,{width:18}):v(wH,{width:18}),r.likes||""]})},DTe=({event:e})=>{const[r,t]=Ne({reposts:0,reposted:!1,repostedBy:new Set});xt(()=>{const o=ut.getProfile(e.pubkey,l=>{}),a=Fe.getReposts(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=ye.getPubKey();t(l=>({...l,reposts:o.size,reposted:o.has(a),repostedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.reposted)},s=(o=!0)=>{if(o){const a=e.pubkey,l=ye.toNostrHexAddress(e.id);l&&Fe.publish({kind:6,tags:[["e",l,"","mention"],["p",a]],content:""})}};return v("a",{className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none ${r.reposted?"text-iris-green":"hover:text-iris-green text-neutral-500"}`,onClick:o=>i(o),children:[v(mH,{width:18}),r.reposts||""]})},BTe="payRequest";var lA=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(lA||{});class Sf extends Error{constructor(t,n){super(n);le(this,"code");this.code=t}}var yc,Es,o_,TV;class MTe{constructor(r){Vr(this,o_);Vr(this,yc,void 0);Vr(this,Es,void 0);if(r=r.toLowerCase().trim(),r.startsWith("lnurl")){const t=Ir.bech32ToText(r);if(!t.startsWith("http"))throw new Sf(2,"Not a url");So(this,yc,new URL(t))}else if(r.match(/[\w.-]+@[\w.-]/)){const[t,n]=r.split("@");So(this,yc,new URL(`https://${n}/.well-known/lnurlp/${t}`))}else if(r.startsWith("https:"))So(this,yc,new URL(r));else if(r.startsWith("lnurlp:")){const t=new URL(r);t.protocol="https:",So(this,yc,t)}else throw new Sf(2,"Could not determine service url")}async load(){const r=await fetch(Bn(this,yc).toString());r.ok&&(So(this,Es,await r.json()),Qn(this,o_,TV).call(this))}async getInvoice(r,t,n){var l,u,h;const i=new URL(Ir.unwrap((l=Bn(this,Es))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(c=>{const d=c.split("=");s.set(d[0],d[1])}),s.set("amount",Math.floor(r*1e3).toString()),t&&((u=Bn(this,Es))!=null&&u.commentAllowed)&&s.set("comment",t),(h=Bn(this,Es))!=null&&h.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(c=>`${c[0]}=${encodeURIComponent(c[1])}`).join("&");try{const c=await fetch(`${o}?${a}`);if(c.ok){const d=await c.json();if(console.debug("[LNURL]: ",d),d.status==="ERROR")throw new Error(d.reason);return d}else throw new Sf(1,`Failed to fetch invoice (${c.statusText})`)}catch{throw new Sf(1,"Failed to load callback")}}get canZap(){var r;return!!((r=Bn(this,Es))!=null&&r.nostrPubkey)}get zapperPubkey(){var r;return(r=Bn(this,Es))==null?void 0:r.nostrPubkey}get maxCommentLength(){var r;return((r=Bn(this,Es))==null?void 0:r.commentAllowed)??0}get min(){var r;return((r=Bn(this,Es))==null?void 0:r.minSendable)??1e3}get max(){var r;return((r=Bn(this,Es))==null?void 0:r.maxSendable)??1e11}}yc=new WeakMap,Es=new WeakMap,o_=new WeakSet,TV=function(){var r,t;if(((r=Bn(this,Es))==null?void 0:r.tag)!==BTe)throw new Sf(2,"Only LNURLp is supported");if(!((t=Bn(this,Es))!=null&&t.callback))throw new Sf(2,"No callback url")};var Hd;(function(){function e(_){this.mode=u.MODE_8BIT_BYTE,this.data=_,this.parsedData=[];for(var I=[],O=0,C=this.data.length;C>O;O++){var g=this.data.charCodeAt(O);g>65536?(I[0]=240|(1835008&g)>>>18,I[1]=128|(258048&g)>>>12,I[2]=128|(4032&g)>>>6,I[3]=128|63&g):g>2048?(I[0]=224|(61440&g)>>>12,I[1]=128|(4032&g)>>>6,I[2]=128|63&g):g>128?(I[0]=192|(1984&g)>>>6,I[1]=128|63&g):I[0]=g,this.parsedData=this.parsedData.concat(I)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(_,I){this.typeNumber=_,this.errorCorrectLevel=I,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function t(_,I){if(_.length==null)throw new Error(_.length+"/"+I);for(var O=0;O<_.length&&_[O]==0;)O++;this.num=new Array(_.length-O+I);for(var C=0;C<_.length-O;C++)this.num[C]=_[C+O]}function n(_,I){this.totalCount=_,this.dataCount=I}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function o(){var _=!1,I=navigator.userAgent,O;return/android/i.test(I)&&(_=!0,O=I.toString().match(/android ([0-9]\.[0-9])/i),O&&O[1]&&(_=parseFloat(O[1]))),_}function a(_,I){for(var O=1,C=l(_),g=0,R=b.length;R>=g;g++){var M=0;switch(I){case h.L:M=b[g][0];break;case h.M:M=b[g][1];break;case h.Q:M=b[g][2];break;case h.H:M=b[g][3]}if(M>=C)break;O++}if(O>b.length)throw new Error("Too long data");return O}function l(_){var I=encodeURI(_).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return I.length+(I.length!=_?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(_){for(var I=0,O=this.parsedData.length;O>I;I++)_.put(this.parsedData[I],8)}},r.prototype={addData:function(_){var I=new e(_);this.dataList.push(I),this.dataCache=null},isDark:function(_,I){if(0>_||this.moduleCount<=_||0>I||this.moduleCount<=I)throw new Error(_+","+I);return this.modules[_][I]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(_,I){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var O=0;O<this.moduleCount;O++){this.modules[O]=new Array(this.moduleCount);for(var C=0;C<this.moduleCount;C++)this.modules[O][C]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(_,I),this.typeNumber>=7&&this.setupTypeNumber(_),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,I)},setupPositionProbePattern:function(_,I){for(var O=-1;7>=O;O++)if(!(-1>=_+O||this.moduleCount<=_+O))for(var C=-1;7>=C;C++)-1>=I+C||this.moduleCount<=I+C||(this.modules[_+O][I+C]=O>=0&&6>=O&&(C==0||C==6)||C>=0&&6>=C&&(O==0||O==6)||O>=2&&4>=O&&C>=2&&4>=C)},getBestMaskPattern:function(){for(var _=0,I=0,O=0;8>O;O++){this.makeImpl(!0,O);var C=d.getLostPoint(this);(O==0||_>C)&&(_=C,I=O)}return I},createMovieClip:function(_,I,O){var C=_.createEmptyMovieClip(I,O),g=1;this.make();for(var R=0;R<this.modules.length;R++)for(var M=R*g,L=0;L<this.modules[R].length;L++){var W=L*g,X=this.modules[R][L];X&&(C.beginFill(0,100),C.moveTo(W,M),C.lineTo(W+g,M),C.lineTo(W+g,M+g),C.lineTo(W,M+g),C.endFill())}return C},setupTimingPattern:function(){for(var _=8;_<this.moduleCount-8;_++)this.modules[_][6]==null&&(this.modules[_][6]=_%2==0);for(var I=8;I<this.moduleCount-8;I++)this.modules[6][I]==null&&(this.modules[6][I]=I%2==0)},setupPositionAdjustPattern:function(){for(var _=d.getPatternPosition(this.typeNumber),I=0;I<_.length;I++)for(var O=0;O<_.length;O++){var C=_[I],g=_[O];if(this.modules[C][g]==null)for(var R=-2;2>=R;R++)for(var M=-2;2>=M;M++)this.modules[C+R][g+M]=R==-2||R==2||M==-2||M==2||R==0&&M==0}},setupTypeNumber:function(_){for(var I=d.getBCHTypeNumber(this.typeNumber),O=0;18>O;O++){var C=!_&&(1&I>>O)==1;this.modules[Math.floor(O/3)][O%3+this.moduleCount-8-3]=C}for(var O=0;18>O;O++){var C=!_&&(1&I>>O)==1;this.modules[O%3+this.moduleCount-8-3][Math.floor(O/3)]=C}},setupTypeInfo:function(_,I){for(var O=this.errorCorrectLevel<<3|I,C=d.getBCHTypeInfo(O),g=0;15>g;g++){var R=!_&&(1&C>>g)==1;6>g?this.modules[g][8]=R:8>g?this.modules[g+1][8]=R:this.modules[this.moduleCount-15+g][8]=R}for(var g=0;15>g;g++){var R=!_&&(1&C>>g)==1;8>g?this.modules[8][this.moduleCount-g-1]=R:9>g?this.modules[8][15-g-1+1]=R:this.modules[8][15-g-1]=R}this.modules[this.moduleCount-8][8]=!_},mapData:function(_,I){for(var O=-1,C=this.moduleCount-1,g=7,R=0,M=this.moduleCount-1;M>0;M-=2)for(M==6&&M--;;){for(var L=0;2>L;L++)if(this.modules[C][M-L]==null){var W=!1;R<_.length&&(W=(1&_[R]>>>g)==1);var X=d.getMask(I,C,M-L);X&&(W=!W),this.modules[C][M-L]=W,g--,g==-1&&(R++,g=7)}if(C+=O,0>C||this.moduleCount<=C){C-=O,O=-O;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(_,I,O){for(var C=n.getRSBlocks(_,I),g=new i,R=0;R<O.length;R++){var M=O[R];g.put(M.mode,4),g.put(M.getLength(),d.getLengthInBits(M.mode,_)),M.write(g)}for(var L=0,R=0;R<C.length;R++)L+=C[R].dataCount;if(g.getLengthInBits()>8*L)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*L+")");for(g.getLengthInBits()+4<=8*L&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*L||(g.put(r.PAD0,8),g.getLengthInBits()>=8*L));)g.put(r.PAD1,8);return r.createBytes(g,C)},r.createBytes=function(_,I){for(var O=0,C=0,g=0,R=new Array(I.length),M=new Array(I.length),L=0;L<I.length;L++){var W=I[L].dataCount,X=I[L].totalCount-W;C=Math.max(C,W),g=Math.max(g,X),R[L]=new Array(W);for(var te=0;te<R[L].length;te++)R[L][te]=255&_.buffer[te+O];O+=W;var J=d.getErrorCorrectPolynomial(X),j=new t(R[L],J.getLength()-1),Z=j.mod(J);M[L]=new Array(J.getLength()-1);for(var te=0;te<M[L].length;te++){var se=te+Z.getLength()-M[L].length;M[L][te]=se>=0?Z.get(se):0}}for(var Ee=0,te=0;te<I.length;te++)Ee+=I[te].totalCount;for(var me=new Array(Ee),Pe=0,te=0;C>te;te++)for(var L=0;L<I.length;L++)te<R[L].length&&(me[Pe++]=R[L][te]);for(var te=0;g>te;te++)for(var L=0;L<I.length;L++)te<M[L].length&&(me[Pe++]=M[L][te]);return me};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(_){for(var I=_<<10;d.getBCHDigit(I)-d.getBCHDigit(d.G15)>=0;)I^=d.G15<<d.getBCHDigit(I)-d.getBCHDigit(d.G15);return(_<<10|I)^d.G15_MASK},getBCHTypeNumber:function(_){for(var I=_<<12;d.getBCHDigit(I)-d.getBCHDigit(d.G18)>=0;)I^=d.G18<<d.getBCHDigit(I)-d.getBCHDigit(d.G18);return _<<12|I},getBCHDigit:function(_){for(var I=0;_!=0;)I++,_>>>=1;return I},getPatternPosition:function(_){return d.PATTERN_POSITION_TABLE[_-1]},getMask:function(_,I,O){switch(_){case c.PATTERN000:return(I+O)%2==0;case c.PATTERN001:return I%2==0;case c.PATTERN010:return O%3==0;case c.PATTERN011:return(I+O)%3==0;case c.PATTERN100:return(Math.floor(I/2)+Math.floor(O/3))%2==0;case c.PATTERN101:return I*O%2+I*O%3==0;case c.PATTERN110:return(I*O%2+I*O%3)%2==0;case c.PATTERN111:return(I*O%3+(I+O)%2)%2==0;default:throw new Error("bad maskPattern:"+_)}},getErrorCorrectPolynomial:function(_){for(var I=new t([1],0),O=0;_>O;O++)I=I.multiply(new t([1,y.gexp(O)],0));return I},getLengthInBits:function(_,I){if(I>=1&&10>I)switch(_){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+_)}else if(27>I)switch(_){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+_)}else{if(!(41>I))throw new Error("type:"+I);switch(_){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+_)}}},getLostPoint:function(_){for(var I=_.getModuleCount(),O=0,C=0;I>C;C++)for(var g=0;I>g;g++){for(var R=0,M=_.isDark(C,g),L=-1;1>=L;L++)if(!(0>C+L||C+L>=I))for(var W=-1;1>=W;W++)0>g+W||g+W>=I||(L!=0||W!=0)&&M==_.isDark(C+L,g+W)&&R++;R>5&&(O+=3+R-5)}for(var C=0;I-1>C;C++)for(var g=0;I-1>g;g++){var X=0;_.isDark(C,g)&&X++,_.isDark(C+1,g)&&X++,_.isDark(C,g+1)&&X++,_.isDark(C+1,g+1)&&X++,(X==0||X==4)&&(O+=3)}for(var C=0;I>C;C++)for(var g=0;I-6>g;g++)_.isDark(C,g)&&!_.isDark(C,g+1)&&_.isDark(C,g+2)&&_.isDark(C,g+3)&&_.isDark(C,g+4)&&!_.isDark(C,g+5)&&_.isDark(C,g+6)&&(O+=40);for(var g=0;I>g;g++)for(var C=0;I-6>C;C++)_.isDark(C,g)&&!_.isDark(C+1,g)&&_.isDark(C+2,g)&&_.isDark(C+3,g)&&_.isDark(C+4,g)&&!_.isDark(C+5,g)&&_.isDark(C+6,g)&&(O+=40);for(var te=0,g=0;I>g;g++)for(var C=0;I>C;C++)_.isDark(C,g)&&te++;var J=Math.abs(100*te/I/I-50)/5;return O+=10*J}},y={glog:function(_){if(1>_)throw new Error("glog("+_+")");return y.LOG_TABLE[_]},gexp:function(_){for(;0>_;)_+=255;for(;_>=256;)_-=255;return y.EXP_TABLE[_]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},w=0;8>w;w++)y.EXP_TABLE[w]=1<<w;for(var w=8;256>w;w++)y.EXP_TABLE[w]=y.EXP_TABLE[w-4]^y.EXP_TABLE[w-5]^y.EXP_TABLE[w-6]^y.EXP_TABLE[w-8];for(var w=0;255>w;w++)y.LOG_TABLE[y.EXP_TABLE[w]]=w;t.prototype={get:function(_){return this.num[_]},getLength:function(){return this.num.length},multiply:function(_){for(var I=new Array(this.getLength()+_.getLength()-1),O=0;O<this.getLength();O++)for(var C=0;C<_.getLength();C++)I[O+C]^=y.gexp(y.glog(this.get(O))+y.glog(_.get(C)));return new t(I,0)},mod:function(_){if(this.getLength()-_.getLength()<0)return this;for(var I=y.glog(this.get(0))-y.glog(_.get(0)),O=new Array(this.getLength()),C=0;C<this.getLength();C++)O[C]=this.get(C);for(var C=0;C<_.getLength();C++)O[C]^=y.gexp(y.glog(_.get(C))+I);return new t(O,0).mod(_)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(_,I){var O=n.getRsBlockTable(_,I);if(O==null)throw new Error("bad rs block @ typeNumber:"+_+"/errorCorrectLevel:"+I);for(var C=O.length/3,g=[],R=0;C>R;R++)for(var M=O[3*R+0],L=O[3*R+1],W=O[3*R+2],X=0;M>X;X++)g.push(new n(L,W));return g},n.getRsBlockTable=function(_,I){switch(I){case h.L:return n.RS_BLOCK_TABLE[4*(_-1)+0];case h.M:return n.RS_BLOCK_TABLE[4*(_-1)+1];case h.Q:return n.RS_BLOCK_TABLE[4*(_-1)+2];case h.H:return n.RS_BLOCK_TABLE[4*(_-1)+3];default:return}},i.prototype={get:function(_){var I=Math.floor(_/8);return(1&this.buffer[I]>>>7-_%8)==1},put:function(_,I){for(var O=0;I>O;O++)this.putBit((1&_>>>I-O-1)==1)},getLengthInBits:function(){return this.length},putBit:function(_){var I=Math.floor(this.length/8);this.buffer.length<=I&&this.buffer.push(0),_&&(this.buffer[I]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],T=function(){var _=function(I,O){this._el=I,this._htOption=O};return _.prototype.draw=function(I){function O(te,J){var j=document.createElementNS("http://www.w3.org/2000/svg",te);for(var Z in J)J.hasOwnProperty(Z)&&j.setAttribute(Z,J[Z]);return j}var C=this._htOption,g=this._el,R=I.getModuleCount();Math.floor(C.width/R),Math.floor(C.height/R),this.clear();var M=O("svg",{viewBox:"0 0 "+String(R)+" "+String(R),width:"100%",height:"100%",fill:C.colorLight});M.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),g.appendChild(M),M.appendChild(O("rect",{fill:C.colorDark,width:"1",height:"1",id:"template"}));for(var L=0;R>L;L++)for(var W=0;R>W;W++)if(I.isDark(L,W)){var X=O("use",{x:String(L),y:String(W)});X.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),M.appendChild(X)}},_.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},_}(),x=document.documentElement.tagName.toLowerCase()==="svg",A=x?T:s()?function(){function _(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function I(R,M){var L=this;if(L._fFail=M,L._fSuccess=R,L._bSupportDataURI===null){var W=document.createElement("img"),X=function(){L._bSupportDataURI=!1,L._fFail&&_fFail.call(L)},te=function(){L._bSupportDataURI=!0,L._fSuccess&&L._fSuccess.call(L)};return W.onabort=X,W.onerror=X,W.onload=te,W.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}L._bSupportDataURI===!0&&L._fSuccess?L._fSuccess.call(L):L._bSupportDataURI===!1&&L._fFail&&L._fFail.call(L)}if(this&&this._android&&this._android<=2.1){var O=1/window.devicePixelRatio,C=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(R,M,L,W,X,te,J,j){if("nodeName"in R&&/img/i.test(R.nodeName))for(var Z=arguments.length-1;Z>=1;Z--)arguments[Z]=arguments[Z]*O;else typeof j>"u"&&(arguments[1]*=O,arguments[2]*=O,arguments[3]*=O,arguments[4]*=O);C.apply(this,arguments)}}var g=function(R,M){this._bIsPainted=!1,this._android=o(),this._htOption=M,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=M.width,this._elCanvas.height=M.height,R.appendChild(this._elCanvas),this._el=R,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return g.prototype.draw=function(R){var M=this._elImage,L=this._oContext,W=this._htOption,X=R.getModuleCount(),te=W.width/X,J=W.height/X,j=Math.round(te),Z=Math.round(J);M.style.display="none",this.clear();for(var se=0;X>se;se++)for(var Ee=0;X>Ee;Ee++){var me=R.isDark(se,Ee),Pe=Ee*te,Ue=se*J;L.strokeStyle=me?W.colorDark:W.colorLight,L.lineWidth=1,L.fillStyle=me?W.colorDark:W.colorLight,L.fillRect(Pe,Ue,te,J),L.strokeRect(Math.floor(Pe)+.5,Math.floor(Ue)+.5,j,Z),L.strokeRect(Math.ceil(Pe)-.5,Math.ceil(Ue)-.5,j,Z)}this._bIsPainted=!0},g.prototype.makeImage=function(){this._bIsPainted&&I.call(this,_)},g.prototype.isPainted=function(){return this._bIsPainted},g.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},g.prototype.round=function(R){return R&&Math.floor(1e3*R)/1e3},g}():function(){var _=function(I,O){this._el=I,this._htOption=O};return _.prototype.draw=function(I){for(var O=this._htOption,C=this._el,g=I.getModuleCount(),R=Math.floor(O.width/g),M=Math.floor(O.height/g),L=['<table style="border:0;border-collapse:collapse;">'],W=0;g>W;W++){L.push("<tr>");for(var X=0;g>X;X++)L.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+R+"px;height:"+M+"px;background-color:"+(I.isDark(W,X)?O.colorDark:O.colorLight)+';"></td>');L.push("</tr>")}L.push("</table>"),C.innerHTML=L.join("");var te=C.childNodes[0],J=(O.width-te.offsetWidth)/2,j=(O.height-te.offsetHeight)/2;J>0&&j>0&&(te.style.margin=j+"px "+J+"px")},_.prototype.clear=function(){this._el.innerHTML=""},_}();Hd=function(_,I){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},typeof I=="string"&&(I={text:I}),I)for(var O in I)this._htOption[O]=I[O];typeof _=="string"&&(_=document.getElementById(_)),this._android=o(),this._el=_,this._oQRCode=null,this._oDrawing=new A(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},Hd.prototype.makeCode=function(_){this._oQRCode=new r(a(_,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(_),this._oQRCode.make(),this._el.title=_,this._oDrawing.draw(this._oQRCode),this.makeImage()},Hd.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},Hd.prototype.clear=function(){this._oDrawing.clear()},Hd.CorrectLevel=h})();const c8=Hd;function YP(e){const r=l_();return xt(()=>{r.current&&new c8(r.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:c8.CorrectLevel.H})},[e.data]),v("div",{style:"border: 5px solid white; display: inline-block;",ref:r})}function LTe(e,r){const t=[];let n=0,i=e.length/r;for(;i>0;)t.push(e.slice(n,n+r)),n+=r,i-=1;return t}const FTe=Kn.span`
  color: var(--text-color);
  display: inline-block;
  cursor: pointer;
  padding: 10px;
  border-radius: 100px;
  margin: 5px;
  border: 1px solid transparent;
  background: var(--body-bg);
  &.active {
    background: var(--notify);
  }
`,jTe=Kn.div`
  background-color: var(--msg-content-background);
  border-radius: 8px;
  padding: 30px;
  width: 400px;
  color: var(--text-color);
  position: relative;
`,zTe=Kn.div`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: var(--text-color);
`;function HTe(e){const r=e.onClose||(()=>{}),{note:t,recipient:n}=e,i=1e3,s=[i,5e3,1e4,2e4,5e4,1e5,1e6],o={1e3:"",5e3:"",1e4:"",2e4:"",5e4:"",1e5:"",1e6:""},[a,l]=Ne(),[u,h]=Ne(e.invoice),[c,d]=Ne(i),[y,w]=Ne(),[b,T]=Ne(),[x,A]=Ne(),[_,I]=Ne(),[O,C]=Ne(1),[g,R]=Ne(!1),[M,L]=Ne(!1),W=a?M&&O!==4||a.maxCommentLength>0:!1;xt(()=>{De.get("defaultZapAmount").on(_e=>{const pe=parseInt(_e);d(pe),w(pe),console.log("defaultZapAmount",pe)})}),xt(()=>{e.show&&(I(void 0),d(i),T(void 0),C(1),h(void 0),A(void 0))},[e.show]),xt(()=>{x&&!x.url&&setTimeout(()=>{r()},1e3)},[x]),xt(()=>{if(e.lnurl&&e.show)try{const _e=new MTe(e.lnurl);l(_e),_e.load().then(()=>{L(_e.canZap)}).catch(pe=>Z(pe,"ln url error"))}catch(_e){_e instanceof Error&&I(_e.message)}},[e.lnurl,e.show]);const X=xa(()=>{if(a){const _e=a.min/1e3,pe=a.max/1e3;return s.filter(Te=>Te>=_e&&Te<=pe)}return[]},[a]),te=xa(()=>LTe(X,3),[X]),J=_e=>{I(void 0),d(_e)};async function j(){if(!c||!a)return null;let _e;if(n&&O!==4){let pe={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:ye.getPubKey(),content:b||"",tags:[["e",t],["p",n],["relays",...on.relays.keys()]]};const Te=Fe.getEventHash(pe);pe.id=Te;const je=await ye.sign(pe);pe={...pe,sig:je},console.log("loadInvoice",pe),pe&&(_e=pe)}try{const pe=await a.getInvoice(c,b,_e);pe.pr&&(h(pe.pr),await Ee(pe))}catch(pe){Z(pe,"invoice fail")}}function Z(_e,pe){if(console.error("lnurl error",_e),_e instanceof Sf)switch(_e.code){case lA.ServiceUnavailable:{I("messages.LNURLFail");return}case lA.InvalidLNURL:{I("messages.InvalidLNURL");return}}I(pe)}function se(){if(!a)return null;const _e=a.min/1e3,pe=a.max/1e3;return v("div",{className:"custom-amount flex",children:[v("input",{type:"number",min:_e,max:pe,className:"f-grow mr-10 input",placeholder:"Custom",value:y,onChange:Te=>w(parseInt(Te.target.value))}),v("button",{className:"btn btn-neutral",type:"button",disabled:!y,onClick:()=>J(y??0),children:"Confirm"})]})}async function Ee(_e){var pe;try{if(window.webln){R(!0),await window.webln.enable();const Te=await((pe=window.webln)==null?void 0:pe.sendPayment((_e==null?void 0:_e.pr)??""));console.log(Te),A((_e==null?void 0:_e.successAction)??{})}}catch(Te){console.warn(Te),Te instanceof Error&&I(Te.toString())}finally{R(!1)}}function me(_e,pe){return v("div",{className:"amounts",children:pe.map(Te=>v(FTe,{className:_e===Te?"active":"",onClick:()=>J(Te),children:[o[Te]&&v(tt,{children:[o[Te],""]}),Ir.formatAmount(Te,0)]},Te))})}function Pe(){return!a||u?null:v(tt,{children:[v("h3",{children:"Zap amount in sats"}),te.map(_e=>me(c,_e)),se(),v("div",{className:"flex",children:W&&v("input",{className:"input",type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:M&&O!==4?250:a.maxCommentLength,onChange:_e=>T(_e.target.value)})}),(c??0)>0&&v("div",{style:"margin-top: 10px;",children:v("button",{class:"btn btn-primary",width:"100%",onClick:()=>j(),children:["Send ",Ir.formatAmount(c,0)," sats"]})})]})}function Ue(){return x||!u?null:v(tt,{children:v("div",{className:"invoice",children:[e.notice&&v("b",{className:"error",children:e.notice}),g?v("h4",{children:"Paying"}):"",v("div",{className:"actions",children:u&&v(tt,{children:[v(YP,{data:u,link:`lightning:${u}`}),v("div",{style:"margin-top: 15px",children:[v(Wi,{copyStr:u,text:"Copy invoice"}),v("a",{className:"button",href:`lightning:${u}`,children:"Open wallet"})]})]})})]})})}function Ge(){return x?v("div",{className:"success-action",children:[v("p",{className:"paid",children:(x==null?void 0:x.description)??"Paid"}),x.url&&v("p",{children:v("a",{href:x.url,rel:"noreferrer",target:"_blank",children:x.url})})]}):null}const it=a!=null&&a.canZap?"Send zap to ":"Send sats to ";return e.show??!1?v(ml,{showContainer:!0,centerVertically:!0,onClose:r,children:v(jTe,{children:v("div",{className:"lnurl-tip",onClick:_e=>_e.stopPropagation(),children:[v(zTe,{className:"close",onClick:r,children:v(TH,{width:20,height:20})}),v("div",{className:"lnurl-header",children:v("h2",{children:[e.title||it,v(br,{pub:n||""})]})}),Pe(),_&&v("p",{className:"error",children:_}),Ue(),Ge()]})})}):null}const UTe=({event:e})=>{const[r,t]=Ne({totalZapAmount:0,formattedZapAmount:"",zapped:!1,showZapModal:!1,lightning:void 0});xt(()=>{const i=ut.getProfile(e.pubkey,o=>{if(!o)return;const a=o.lud16||o.lud06;t(l=>({...l,lightning:a}))}),s=Fe.getZaps(e.id,n);return()=>{i(),s()}},[e]);const n=Cn.debounce(i=>{const s=Array.from(i==null?void 0:i.values()).map(a=>Fe.db.by("id",a));let o=0;s.forEach(a=>{const l=a==null?void 0:a.tags.find(c=>c[0]==="bolt11")[1];if(!l){console.log("Invalid zap, missing bolt11 tag");return}const u=kV(l),h=((u==null?void 0:u.amount)||0)/1e3;o+=h}),t(a=>({...a,totalZapAmount:o,formattedZapAmount:o&&aA(o)||""}))},1e3,{leading:!0});return r.lightning?v(tt,{children:[v("a",{onClick:i=>{i.preventDefault(),i.stopPropagation(),t(s=>({...s,showZapModal:!0}))},className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none
          ${r.zapped?"text-iris-orange":"text-neutral-500 hover:text-iris-orange"}`,children:[v(Dle,{width:18}),r.formattedZapAmount]}),r.showZapModal&&v(HTe,{show:!0,lnurl:r.lightning,note:e.id,recipient:e.pubkey,onClose:()=>t(i=>({...i,showZapModal:!1}))})]}):null},WTe=e=>{const[r,t]=Ne({replyCount:0}),[n,i]=Ne({trusted:!1,distrusted:!1}),s=e.event,o=e.wot;xt(()=>Fe.getThreadRepliesCount(s.id,u),[s]),xt(()=>{const d=o==null?void 0:o.vertice,y=d==null?void 0:d.score;i(w=>({...w,trusted:y==null?void 0:y.isDirectTrusted(),distrusted:y==null?void 0:y.isDirectDistrusted()}))},[o]);function a(d){d.preventDefault(),d.stopPropagation(),i(y=>{let w=y.trusted?0:1;return Vt.publishTrust(s.id,w,zo.Item),{...y,trusted:!y.trusted,distrusted:!1}})}function l(d){d.preventDefault(),d.stopPropagation(),i(y=>{let w=y.distrusted?0:-1;return Vt.publishTrust(s.id,w,zo.Item),{...y,trusted:!1,distrusted:!y.distrusted}})}const u=d=>{t(y=>({...y,replyCount:d}))};function h(){var d;e.standalone?(d=document.querySelector("textarea"))==null||d.focus():Tr(`/${ye.toNostrBech32Address(e.event.id,"note")}`)}function c(){var d,y,w,b;return v(tt,{children:[v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.trusted?"trusted":"hover:trusted text-neutral-500"}`,onClick:T=>a(T),title:n.trusted?"Trusted":"Trust",children:[n.trusted?v(u$,{size:18,fill:"green",stroke:"currentColor"}):v(u$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((y=(d=o==null?void 0:o.vertice)==null?void 0:d.score)==null?void 0:y.renderTrustCount())||""]}),v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.distrusted?"distrusted":"hover:distrusted text-neutral-500"}`,onClick:T=>l(T),title:n.distrusted?"Distrusted":"Distrust",children:[n.distrusted?v(l$,{size:18,fill:"red",stroke:"currentColor"}):v(l$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((b=(w=o==null?void 0:o.vertice)==null?void 0:w.score)==null?void 0:b.renderDistrustCount())||""]})]})}return v(tt,{children:[e.standalone&&v(NTe,{event:e.event,wot:o}),v("div",{className:"flex gap-4",children:[v("a",{className:"btn-ghost btn-sm hover:bg-transparent hover:text-iris-blue btn content-center gap-2 rounded-none text-neutral-500",onClick:()=>h(),children:[v(Lle,{width:18}),v("span",{children:r.replyCount||""})]}),v(DTe,{event:e.event}),v(RTe,{event:e.event}),v(UTe,{event:e.event}),c()]})]})},KTe=yi(WTe);class ZP extends Wn{constructor(){super();le(this,"key");le(this,"cls");le(this,"actionDone");le(this,"action");le(this,"activeClass");le(this,"hoverAction");le(this,"handleMouseEnter",()=>{this.setState({hover:!0})});le(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.cls="block-btn",this.key="blocked",this.activeClass="blocked",this.action=be("block"),this.actionDone=be("blocked"),this.hoverAction=be("unblock"),this.state={...this.state,hover:!1}}onClick(t){var s,o;t.preventDefault();const n=!this.state[this.key],i=ye.toNostrHexAddress(this.props.id);i&&ut.block(i,n),(o=(s=this.props).onClick)==null||o.call(s,t)}componentDidMount(){ut.getBlockedUsers(t=>{const n=t==null?void 0:t.has(ye.toNostrHexAddress(this.props.id));this.setState({blocked:n})})}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`${this.cls||this.key} ${t?this.activeClass:""} ${this.props.className||""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:v("span",{children:[be(i)," ",this.props.showName?v(br,{pub:this.props.id,hideBadge:!0}):""]})})}}const qg=Kn.button`
  background: var(--button-bg);
  color: var(--button-color);
  border: var(--button-border);
  font-weight: bold;
  cursor: pointer;
  transition: all 0.25s ease;
  width: ${e=>e.width||"auto"};

  ${e=>e.small&&`
    padding: 5px 20px;
  `}

  &:hover,
  &:focus,
  &:active {
    background: var(--button-bg-hover);
    color: var(--button-color-hover);
  }
`,yp=Kn(qg)`
  background: var(--button-primary-bg);
  color: var(--button-primary-color);
  border: var(--button-primary-border);

  &:hover,
  &:focus,
  &:active {
    background: var(--button-primary-bg-hover);
    color: var(--button-primary-color-hover);
  }
`,IV=({children:e})=>{const[r,t]=Ne(!1),n=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),t(s))};return xt(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&t(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),v("div",{className:"relative",onClick:i=>n(i,!r),onMouseEnter:i=>n(i,!0),onMouseLeave:i=>n(i,!1),children:[v("button",{className:"dropbtn btn btn-circle btn-sm btn-ghost text-neutral-500 pb-2",children:""}),v(ft,{when:r,children:v("div",{className:"absolute z-10 p-2 flex flex-col gap-2 right-0 w-56 rounded-md shadow-lg bg-black border-neutral-500 border-2",children:e})})]})},qTe=Kn.div`
  display: flex;
  flex-direction: column;

  & ul > li {
    font-size: large;
  }
  & ul > li:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,VTe=Kn.pre`
  overflow: auto;
  background-color: hsl(0, 0%, 16%);
  [data-theme='light'] & {
    background-color: hsl(0, 0%, 88%);
  }
  max-height: 400px;
  border-radius: 4px;
  padding: 0.7rem;
  font-family: monospace;
`,GTe=({event:e})=>{const[r,t]=Ne(null);xt(()=>{if(!(e!=null&&e.id))return;const i=Fe.getOriginalPostEventId(e),s=i&&Fe.eventsMetaDb.get(i);s&&t(s)},[e]);const n=Array.from((r==null?void 0:r.relays)||[]);return v(qTe,{children:[v("h2",{children:be("event_detail")}),v("p",{children:be("seen_on")}),n.length===0?v("p",{children:be("iris_api_source")}):v("ul",{children:n.map(i=>v("li",{children:i}))}),v(VTe,{children:v("code",{children:JSON.stringify({...e,meta:void 0,$loki:void 0},null,2)})})]})},YTe=Kn.div`
  text-align: left;
  max-width: 100%;
  user-select: text;
`,AV=e=>{const{event:r,id:t}=e,[n]=Ne(!1),[i,s]=Ne(!1),o=()=>s(!1),a=()=>{},l=w=>{if(w.preventDefault(),confirm("Delete message?")){const b=ye.toNostrHexAddress(t);b&&Fe.publish({kind:5,content:"deleted",tags:[["e",b]]})}},u=w=>{w.preventDefault(),De.get("mutedNotes").get(e.id).put(!n)},h=w=>{if(w.preventDefault(),confirm("Publicly report and hide message?")){const b=ye.toNostrHexAddress(e.id);b&&e.event&&Fe.publish({kind:5,content:"reported",tags:[["e",b],["p",e.event.pubkey]]})}},c=w=>{w.preventDefault(),e.event&&Ir.translateText(e.event.content).then(b=>{var T;(T=e.onTranslate)==null||T.call(e,b)})},d=w=>{w.preventDefault();const b=ye.toNostrHexAddress(t);if(b){const T=Fe.db.by("id",b);T&&(console.log("broadcasting",b,T),Fe.publish(T))}},y=`https://iris.to/${ye.toNostrBech32Address(t,"note")}`;return v("div",{children:[v(IV,{children:[v(Wi,{className:"btn btn-sm",text:be("copy_link"),copyStr:y},`${t}copy_link`),v(Wi,{className:"btn btn-sm",text:be("copy_note_ID"),copyStr:ye.toNostrBech32Address(t,"note")||""},`${t}copy_id`),v("a",{className:"btn btn-sm",href:"#",onClick:u,children:be(n?"unmute_notifications":"mute_notifications")}),r?v(tt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:d,children:be("resend_to_relays")}),v("a",{className:"btn btn-sm",href:"#",onClick:c,children:be("translate")}),v(Wi,{className:"btn btn-sm",text:be("copy_raw_data"),copyStr:JSON.stringify(r,null,2)},`${t}copyRaw`),r.pubkey===ye.getPubKey()?v("a",{className:"btn btn-sm",href:"#",onClick:l,children:be("delete")}):v(tt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:h,children:be("report_public")}),v(Mc,{className:"btn btn-sm",id:r==null?void 0:r.pubkey}),v(ZP,{className:"btn btn-sm",onClick:a,id:r==null?void 0:r.pubkey,showName:!0})]}),v("a",{className:"btn btn-sm",href:"#",onClick:w=>{w.preventDefault(),s(!0)},children:be("event_detail")})]}):v(tt,{})]}),r&&i&&v(ml,{showContainer:!0,onClose:o,children:v(YTe,{children:[v(GTe,{event:r}),v(yp,{onClick:o,children:be("done")})]})})]})},ZTe=({event:e,fullWidth:r,isQuote:t,standalone:n,setTranslatedText:i})=>{const{time:s,dateStr:o,timeStr:a}=xa(()=>{const l=new Date(e.created_at*1e3),u=l.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=l.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});return{time:l,dateStr:u,timeStr:h}},[e.created_at]);return v("div",{className:"flex items-center gap-2 justify-between",children:[v(ft,{when:r,children:v(_V,{event:e,isQuote:t,standalone:n,fullWidth:r})}),v("div",{className:"flex flex-col",children:v("div",{children:[v(Kt,{href:`/${ye.toNostrBech32Address(e.pubkey,"npub")}`,className:"font-bold",children:v(br,{pub:e.pubkey})}),v("small",{className:"text-neutral-500",children:[v("span",{className:"mx-2",children:""}),v(Kt,{href:`/${ye.toNostrBech32Address(e.id,"note")}`,className:"tooltip","data-tip":`${o} ${a}`,children:v(G_,{date:s})})]})]})}),v(ft,{when:!t,children:v("div",{className:"flex-1 flex items-center justify-end",children:v(AV,{id:e.id,event:e,onTranslate:i})})})]})},XTe=({attachments:e,name:r,text:t})=>{var a;const n=(a=e==null?void 0:e.find(l=>l.type==="image"))==null?void 0:a.data,s=`"${t.length>128?`${t.slice(0,128)}...`:t}"`,o=`${r||"User"} on Iris`;return v(vh,{titleTemplate:"%s",children:[v("title",{children:`${o}: ${s}`}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:"article"}),n?v("meta",{property:"og:image",content:n}):null,v("meta",{property:"og:title",content:o}),v("meta",{property:"og:description",content:s})]})},JTe=yi(XTe);let uA=!0,OV=!0,CV=!0,PV=!0;De.get("settings").on(e=>{uA=e.loadReactions!==!1,OV=e.showLikes!==!1,CV=e.showZaps!==!1,PV=e.showReposts!==!1});const rS=500,nS=8,QTe=({standalone:e,isQuote:r,fullWidth:t,asInlineQuote:n,event:i,meta:s,wot:o})=>{var _;const[a,l]=Ne(""),[u,h]=Ne(!1),[c,d]=Ne("");xt(()=>{if(e)return ut.getProfile(i.pubkey,I=>{d((I==null?void 0:I.display_name)||(I==null?void 0:I.name)||"")})},[i.pubkey]);const y=((_=i.content)==null?void 0:_.length)===2&&Ir.isEmoji(i.content);let w=i.content||"";const b=[],T=w.match(/(https?:\/\/[^\s]+)/g);T&&T.forEach(I=>{let O;try{O=new URL(I)}catch{console.log("invalid url",I);return}O.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&b.push({type:"image",data:`${O.href}`})}),w=w.length>rS&&!u&&!e?`${w.slice(0,rS)}...`:w;const x=w.split(`
`);w=x.length>nS&&!u&&!e?`${x.slice(0,nS).join(`
`)}...`:w;function A(){var I;return(b==null?void 0:b.length)>1||((I=i.content)==null?void 0:I.length)>rS||i.content.split(`
`).length>nS}return v("div",{className:"flex-grow",children:[v(ZTe,{standalone:e,event:i,isQuote:r,fullWidth:t,setTranslatedText:l}),v(ft,{when:e,children:v(JTe,{name:c,text:w,attachments:b})}),v(ft,{when:s.torrentId,children:v(Am,{torrentId:s.torrentId,autopause:!e})}),v(ft,{when:(w==null?void 0:w.length)>0,children:v("div",{className:`preformatted-wrap pb-1 ${y&&"text-2xl"} ${t?"full-width-note":""} ${n?"inline-quote":""} ${o==null?void 0:o.option}`,children:[v(XP,{event:i,children:w}),v(ft,{when:a,children:v("p",{children:v("i",{children:a})})})]})}),v(ft,{when:!n&&!e&&A(),children:v("a",{className:"text-sm link mb-2",onClick:I=>{I.preventDefault(),h(!u)},children:be(`show_${u?"less":"more"}`)})}),v(ft,{when:!n&&uA,children:v(KTe,{settings:{showLikes:OV,showZaps:CV,showReposts:PV},standalone:e,event:i,wot:o},i.id+"reactions")}),v(ft,{when:r&&!uA,children:v("div",{style:{marginBottom:"15px"}})}),v(ft,{when:e,children:[v("hr",{className:"-mx-2 opacity-10 my-2"}),v(Om,{waitForFocus:!0,autofocus:!e,replyingTo:i.id,placeholder:be("write_your_reply")})]})]})},eIe=yi(QTe),f8=({event:e,meta:r={},asInlineQuote:t=!1,isReply:n=!1,isQuote:i=!1,isQuoting:s=!1,showReplies:o=0,showRepliedMsg:a,standalone:l=!1,fullWidth:u})=>{const[h,c]=Ne([]);!l&&o&&h.length&&(i=!0),r.replyingTo&&a&&(s=!0),a===void 0&&(a=l),u===void 0&&(u=!n&&!s&&!i&&!t);const d=Im(pt(e.id),["badMessage","neutralMessage","goodMessage"],""),y=xa(()=>{const A=[];return l?A.push(""):A.push("cursor-pointer transition-all ease-in-out duration-200 hover:bg-neutral-999"),i&&A.push("quote pb-2"),s?A.push("quoting pt-0"):A.push("pt-4"),t&&A.push("inline-quote border-2 border-neutral-900 rounded-lg my-2"),u&&A.push("full-width"),A.join(" ")},[l,i,s,t,u]);xt(()=>{if(o)return Fe.getReplies(e.id,Cn.debounce(A=>{const _=Array.from(A).slice(0,o);_.sort((I,O)=>{const C=Fe.db.by("id",I),g=Fe.db.by("id",O);return C.created_at-g.created_at}),c(_)},500,{leading:!0,trailing:!0}))},[e.id,o]);let w=Fe.getEventRoot(e);w||(w=r.replyingTo);function b(A){var _,I;if(!l&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(O=>A.target.closest(O))&&!((_=window.getSelection())!=null&&_.toString())){if(A.stopPropagation(),e.kind===7){const O=(I=e.tags)==null?void 0:I.reverse().find(C=>C[0]==="e")[1];return Tr(`/${O}`)}Tr(`/${ye.toNostrBech32Address(e.id,"note")}`)}}const T=v(ft,{when:r.replyingTo&&a,children:v(qo,{id:r.replyingTo,isQuote:!0,showReplies:0},e.id+r.replyingTo)}),x=v(ft,{when:!l&&!n&&!s&&w,children:v(Kt,{className:"text-iris-blue text-sm block mb-2",href:`/${ye.toNostrBech32Address(w||"","note")}`,children:be("show_thread")})});return v(tt,{children:[T,v("div",{className:`px-2 md:px-4 pb-2 ${y}`,onClick:A=>b(A),children:[x,v("div",{className:"flex flex-row",onClick:A=>b(A),children:[v(ft,{when:!u,children:v(_V,{event:e,isQuote:i,standalone:l,fullWidth:u})}),v(eIe,{event:e,meta:r,standalone:l,isQuote:i,asInlineQuote:t,fullWidth:u,wot:d})]})]},e.id+"note"),v(ft,{when:!(i||t),children:v("hr",{className:"opacity-10"})}),v(gTe,{each:h,children:A=>v(qo,{id:A,isReply:!0,isQuoting:!l,showReplies:1},A)})]})};function tIe(e){var n;const t=((n=e.event.tags)==null?void 0:n.some(i=>i[0]==="p"&&i[1]===ye.getPubKey()))?"started following you":"updated their following list";return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:{display:"flex",alignItems:"center"},children:[v("i",{className:"repost-btn reposted",style:{marginRight:15},children:Ps.newFollower}),v(Kt,{href:`/${ye.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v(br,{pub:e.event.pubkey})}),v("span",{className:"mar-left5",children:[" ",t]})]})})})}const rIe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),Tr(`/${ye.toNostrBech32Address(r,"note")}`))};function nIe(e){var u;const[r,t]=Ne([]),n=Fe.getEventReplyingTo(e.event),i=Fe.db.by("id",n),s=(i==null?void 0:i.pubkey)===ye.getPubKey(),o=(u=i==null?void 0:i.tags)==null?void 0:u.find(h=>h[0]==="p"&&h[1]===ye.getPubKey()),a=s?"liked your note":o?"liked a note where you were mentioned":"liked a note";if(xt(()=>{if(n)return Fe.getLikes(n,h=>{t(Array.from(h))})},[n]),!n)return null;const l=`/${ye.toNostrBech32Address(e.event.pubkey,"npub")}`;return v("div",{children:v("div",{onClick:h=>rIe(h,n),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"like-btn text-iris-red",children:v(g3,{width:18})}),v("span",{children:[v("a",{href:l,children:v(br,{pub:e.event.pubkey})}),r.length>1&&v(tt,{children:[" and ",r.length-1," others "]})," ",a]})]}),v(qo,{id:n,fullWidth:!1},n+e.event.id)]})},e.event.id)}const iIe=Kn.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: black;
  border: 1px solid #333;
  border-radius: 4px;
`,sIe=Kn.div`
  flex: 1;
  max-width: 70%;
  display: flex;
  background: var(--main-color);
  justify-content: center;

  @media (max-width: 625px) {
    max-width: 100%;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
`,oIe=Kn.div`
  flex: 1;
  max-width: 30%;
  overflow-y: auto;
  background: var(--msg-content-background);

  @media (max-width: 625px) {
    display: none;
  }
`,aIe=({event:e,onClose:r,attachment:t})=>v(ml,{width:"90%",height:"90%",centerVertically:!0,onClose:r,children:v(iIe,{children:[v(sIe,{children:t.type==="image"?v(Sa,{className:"rounded-sm",src:t.url}):v("video",{loop:!0,autoPlay:!0,src:t.url,controls:!0,poster:`https://imgproxy.iris.to/thumbnail/428/${t.url}`})}),v(oIe,{children:v(qo,{id:e.id,standalone:!0,showReplies:1/0})})]})}),lIe=eke`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`;function uIe({attachment:e}){return e.type==="video"?v("div",{style:{position:"absolute",top:"8px",right:"8px"},children:Ps.video}):v(tt,{})}const cIe=Kn.img`
  display: none;
`,fIe=Kn.a`
  position: relative;
  aspect-ratio: 1;
  color: white;
  background-size: cover;
  background-position: center;
  background-color: #ccc;
  background-image: url(${e=>{var r;return((r=e.attachment)==null?void 0:r.type)==="video"?`https://imgproxy.iris.to/thumbnail/428/${e.attachment.url}`:e.proxyError?`${e.attachment.url}`:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${e.attachment.url}`}});
  & .dropdown {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
  }
  & .dropbtn {
    padding-top: 0px;
    margin-top: -5px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
    color: white;
    user-select: none;
  }
  &:hover {
    opacity: 0.8;
  }

  & svg {
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
  }

  opacity: ${e=>e.fadeIn?0:1};
  animation: ${e=>e.fadeIn?qP`
          ${lIe} 0.5s ease-in-out forwards
        `:"none"};
`;function hIe(e){var u;const[r,t]=Ne(-1),[n,i]=Ne([]),s=h=>{i(c=>{const d=[...c];return d[h]=!0,d})};if(e.event.kind!==1){const h=Fe.getEventReplyingTo(e.event);return h?v(qo,{id:h,renderAs:"NoteImage"}):null}const o=[],a=(u=e.event.content)==null?void 0:u.match(/(https?:\/\/[^\s]+)/g);a&&a.forEach(h=>{let c;try{c=new URL(h)}catch{console.log("invalid url",h);return}c.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&o.push({type:"image",url:c.href}),c.pathname.toLowerCase().match(/\.(mp4|mkv|avi|flv|wmv|mov|webm)$/)&&o.push({type:"video",url:c.href})});const l=(h,c)=>{window.innerWidth>625&&(h.preventDefault(),h.stopPropagation(),t(c))};return v(tt,{children:o.map((h,c)=>v(tt,{children:[v(fIe,{href:`/${ye.toNostrBech32Address(e.event.id,"note")}`,onClick:d=>l(d,c),attachment:h,fadeIn:e.fadeIn,proxyError:n[c],children:v(uIe,{attachment:h})},e.event.id+c),h.type==="image"&&v(cIe,{src:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${h.url}`,onError:()=>s(c)}),r===c&&v(aIe,{attachment:h,onClose:()=>t(-1),event:e.event})]}))})}const dIe=yi(hIe);function h8(e){var i;const[r,t]=Ne([]),n=Fe.getRepostedEventId(e.event)||"";return xt(()=>{if(e.notification){const s=Fe.getReposts(n,o=>{t(Array.from(o))});return()=>s()}},[e.notification,n]),v("div",{children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{children:v(mH,{width:18})}),v(Kt,{href:`/${ye.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v(br,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),v("span",{children:[r.length>1&&`and ${r.length-1} others`," ",be("reposted")]})]}),v(qo,{id:n,fullWidth:e.fullWidth},n+e.event.id)]})}const pIe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),Tr(`/${ye.toNostrBech32Address(r,"note")}`))};function vIe(e){var h;const[r,t]=Ne([]),n=Fe.getEventReplyingTo(e.event),i=Fe.db.by("id",n),s=(i==null?void 0:i.pubkey)===ye.getPubKey(),o=(h=i==null?void 0:i.tags)==null?void 0:h.find(c=>c[0]==="p"&&c[1]===ye.getPubKey()),a=s?"zapped your note":o?"zapped a note where you were mentioned":"zapped a note";if(xt(()=>n?Fe.getZaps(n,c=>{t(Array.from(c.values()))}):()=>null,[n]),!n)return null;let l=null;try{l=Fe.getZappingUser(e.event.id)}catch(c){return console.error("no zapping user found for event",e.event.id,c),""}const u=`/${l}`;return v("div",{children:v("div",{onClick:c=>pIe(c,n||""),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"zap-btn text-iris-orange",children:v(uue,{width:18,height:18})}),v("div",{children:[v("a",{href:u,children:v(br,{pub:l||""})}),r.length>1&&v("span",{children:[" and ",r.length-1," others "]})," ",a]})]}),v(qo,{id:n,fullWidth:!1},n+e.event.id)]})})}const gIe=e=>{const[r,t]=Ne({sortedReplies:[],meta:{},event:Fe.db.by("id",ye.toNostrHexAddress(e.id))}),n=Pi(),i=Pi(!1),s=u=>{if(clearTimeout(n.current),i.current)return;r.retrieving&&t(d=>({...d,retrieving:!1}));const h=Fe.getNoteReplyingTo(u),c={npub:ye.toNostrBech32Address(u.pubkey,"npub"),noteId:ye.toNostrBech32Address(u.id,"note"),time:u.created_at*1e3,isMine:ye.getPubKey()===u.pubkey,attachments:[],replyingTo:h};t(d=>({...d,event:u,meta:c}))};xt(()=>{if(!e.id){console.log("error: no id",e);return}i.current=!1;const u=ye.toNostrHexAddress(e.id);return n.current=setTimeout(()=>{t(h=>({...h,retrieving:!0}))},1e3),u&&Fe.getEventById(u,!0,h=>s(h)),()=>{i.current=!0}},[]),xt(()=>{e.standalone&&!r.msg&&r.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const o=()=>e.asInlineQuote?null:v(AV,{id:e.id||"",event:r.event}),a=()=>{var c;let u="msg";return e.standalone&&(u+=" standalone"),(e.isQuote||e.showReplies&&((c=r.sortedReplies)==null?void 0:c.length))&&(u+=" quote"),u};return e.id?r.event?ut.isBlocked(r.event.pubkey)?e.standalone||e.isQuote?v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("p",{style:{display:"flex",alignItems:"center"},children:[v("i",{style:{marginRight:"15px"},children:Ps.newFollower}),v("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var h,c,d;let u=f8;if(r.event.kind===1){const y=(c=(h=r.event)==null?void 0:h.tags)==null?void 0:c.findIndex(w=>w[0]==="e"&&w[3]==="mention");((d=r.event)==null?void 0:d.content)===`#[${y}]`&&(u=h8)}else u={1:f8,3:tIe,6:h8,7:nIe,9735:vIe}[r.event.kind];return e.renderAs==="NoteImage"&&(u=dIe),u?v(u,{className:a(),event:r.event,meta:r.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<r.event.created_at,...e},e.id):(console.error("unknown event kind",r.event),null)})():e.renderAs==="NoteImage"?null:v("div",{className:a(),children:v("div",{className:`msg-content retrieving ${r.retrieving?"opacity-100":"opacity-0"} transition-opacity duration-700 ease-in-out`,style:{display:"flex",alignItems:"center"},children:[v("div",{className:"text",children:be("looking_up_message")}),v("div",{children:o()})]})},e.id):(console.error("no id on event",e),null)},qo=yi(gIe),iS=e=>`#[${e}]`,yIe={regex:/#\[([0-9]+)]/g,component:({match:e,index:r,event:t})=>{if(!(t!=null&&t.tags))return console.log("no tags",t),v(tt,{children:iS(e)});const n=t.tags[parseInt(e)];if(!n)return console.log("no matching tag",r,t),v(tt,{children:iS(e)});const[i,s]=n;return i==="p"?v(Kt,{href:`/${cu.npubEncode(s)}`,className:"link",children:[" ",v(br,{pub:s,hideBadge:!0})]}):i==="e"?v(qo,{id:s,asInlineQuote:!0},s):(console.log("unknown tag type",i,r,t),v(tt,{children:iS(e)}))}},mIe=/\bnostr:(n(?:event|profile)1\w+)\b/g,bIe={regex:mIe,component:({match:e})=>{try{const{type:r,data:t}=cu.decode(e);if(r==="nprofile")return v(tt,{children:v(Kt,{className:"link",href:`/${t.pubkey}`,children:[" ",v(br,{pub:t.pubkey})]})});if(r==="nevent")return v(qo,{id:t.id,asInlineQuote:!0})}catch(r){console.log(r)}return v("span",{children:e})}},wIe=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,$Ie={regex:wIe,component:({match:e})=>{const r=ye.toNostrHexAddress(e.replace("@",""));return v(qo,{id:r,asInlineQuote:!0})}},_Ie=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,NV={regex:_Ie,component:({match:e})=>{const r=e.replace("@","");return v(Kt,{href:`/${r}`,className:"link",children:[" ",v(br,{pub:r,hideBadge:!0})]})}},xIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${e}`,frameBorder:"0",allow:"encrypted-media"})},EIe={regex:/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{className:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},SIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},kIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,settingsKey:"enableSpotify",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${e}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},TIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,settingsKey:"enableTwitch",component:({match:e})=>v("iframe",{className:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${e}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},IIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,settingsKey:"enableTwitch",component:({match:e})=>v("iframe",{className:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${e}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},AIe={regex:/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,settingsKey:"enableAudio",component:({match:e})=>v("audio",{src:e,controls:!0,loop:!0})},RV={regex:new RegExp("(?<=\\s|^)(#\\w+)","g"),component:({match:e})=>v(Kt,{href:`/search/${encodeURIComponent(e)}`,className:"link",children:e})},DV={regex:/(https?:\/\/.*?\.(?:png|jpg|jpeg|gif|svg|webp)(?:\?\S*?)?)/gi,settingsKey:"enableImages",component:({match:e})=>{const[r,t]=Ne(!1);return v("div",{className:"flex justify-center md:justify-start",children:[v(Sa,{onClick:i=>{i.stopPropagation(),t(!0)},className:"my-2 rounded max-h-[70vh] md:max-h-96 max-w-full cursor-pointer",src:e}),v(ft,{when:r,children:v(ml,{onClose:()=>t(!1),children:v(Sa,{className:"rounded max-h-[90vh] max-w-[90vw]",src:e})})})]})}},OIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,settingsKey:"enableInstagram",component:({match:e})=>v("iframe",{className:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${e}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},CIe={regex:/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,component:({match:e})=>(e.startsWith("lightning:")||(e=`lightning:${e}`),v("a",{href:e,onClick:r=>Ir.handleLightningLinkClick(r),children:" Pay with lightning"}))},PIe={regex:/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,settingsKey:"enableSoundCloud",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${e}`,frameBorder:"0",allow:"encrypted-media"})},NIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,settingsKey:"enableTidal",component:({match:e})=>v("iframe",{className:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${e}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},RIe={regex:/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,settingsKey:"enableTiktok",component:({match:e})=>v("iframe",{className:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${e}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},DIe={regex:/(magnet:\?xt=urn:btih:.*)/gi,settingsKey:"enableTorrent",component:({match:e})=>v(Am,{preview:!0,torrentId:e})},BIe={regex:/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,settingsKey:"enableTwitter",component:({match:e})=>v("iframe",{style:{maxWidth:"350px",height:"450px",backgroundColor:"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(e)}`})},BV={regex:/(https?:\/\/[^\s]+)/g,component:({match:e})=>{const r=e.replace(/^(https:\/\/)?iris.to/,"");return v(Kt,{className:"link",target:"_blank",href:r,children:e.replace(/^https?:\/\//,"").replace(/\/$/,"")})}},MV={regex:/(https?:\/\/.*\.(?:mp4|webm|ogg|mov)(?:\?\S*)?)/gi,settingsKey:"enableVideo",component:({match:e})=>v("div",{className:"relative w-full object-contain my-2",children:v("video",{className:"rounded max-h-[70vh] md:max-h-96",src:e,controls:!0,muted:!0,autoPlay:!0,loop:!0,poster:`https://imgproxy.iris.to/thumbnail/638/${e}`})})},MIe={regex:/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,settingsKey:"enableWavLake",component:({match:e})=>v("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${e}`,frameBorder:"0",loading:"lazy"})},LIe={regex:/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,settingsKey:"enableYoutube",component:({match:e})=>v("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},FIe=[AIe,DV,MV,LIe,OIe,BIe,PIe,kIe,xIe,SIe,EIe,pTe,vTe,NIe,RIe,TIe,IIe,MIe,DIe,CIe,NV,$Ie,bIe,RV,yIe,BV],jIe=[NV,BV,RV];let LV={};De.get("settings").on(e=>LV=e);const XP=yi(({children:e,event:r,textOnly:t})=>{let n=[e==null?void 0:e.trim()];return(t?jIe:FIe).forEach(s=>{LV[s.settingsKey||""]!==!1&&(n=dTe(n,s.regex,(o,a)=>s.component({match:o,index:a,event:r,key:`${o}-${a}`})))}),n=n.map((s,o,a)=>{var l,u;return typeof s=="string"&&(o<a.length-1&&!((l=a[o+1].props)!=null&&l.href)&&(s=s.replace(/\n+$/,"")),o>0&&!((u=a[o-1].props)!=null&&u.href)&&(s=s.replace(/^\n+/,""))),s}),v(tt,{children:n})}),FV=({event:e,selfAuthored:r,showName:t,torrentId:n})=>{const[i,s]=Ne(e.text||""),[o,a]=Ne(null),[l,u]=Ne(!1);xt(()=>{let x=i;x?h(x):ye.decryptMessage(e,A=>{x=A,h(x)})},[e.id,i]);const h=x=>{try{const A=x.slice(x.indexOf("{")),_=JSON.parse(A);if(Ay(_)&&Np(_)&&(console.log(111,_.tags.length===1,_.tags[0][0]==="p",_.tags[0][1]===_.pubkey),_.tags.length===1&&_.tags[0][0]==="p"&&_.tags[0][1]===e.pubkey)){_.text=_.content,a(_);return}}catch{}u(!0),s(x)};if(o)return v(FV,{event:o,showName:!0,selfAuthored:o.pubkey===ye.getPubKey()});if(!l)return null;const c=()=>{Tr(`/${ye.toNostrBech32Address(e.pubkey,"npub")}`)},d=i&&i.length===2&&Ir.isEmoji(i),y="",w=y.seen?"text-green-500":"text-neutral-500",b=y.delivered?"border-green-500":"border-neutral-500";return v("div",{className:`p-2 w-full md:w-2/3 rounded-xl mb-1 ${r?"self-end bg-iris-blue text-white":"self-start bg-neutral-700 text-white"} ${w} ${b} flex flex-col items-start`,children:v("div",{className:"w-full",children:[v("div",{className:"mb-2",children:t&&v("small",{onClick:c,className:"cursor-pointer text-xs",children:v(br,{pub:e.pubkey},e.pubkey)})}),n&&v(Am,{torrentId:n}),v("div",{className:`preformatted-wrap text-base ${d?"text-4xl":""}`,children:v(XP,{event:e,children:i})}),v("div",{className:`${r?"text-right":"text-left"} text-xs text-white`,children:v(G_,{date:new Date(e.created_at*1e3)})})]})})},zIe=yi(FV),HIe=({activeChat:e,class:r,autofocus:t,onSubmit:n,keyPair:i})=>{const[s,o]=Ne(""),a=Pi(null);xt(()=>{var d;!Ir.isMobile&&t!==!1&&((d=a.current)==null||d.focus())},[t]);const l=d=>{try{const y=ye.toNostrHexAddress(e);if(!y)throw new Error("invalid public key "+y);return ye.encrypt(d,y)}catch(y){console.error(y)}},u=async d=>{if(d.preventDefault(),!s.length)return;const y=4,w=Math.floor(Date.now()/1e3),b={kind:y,created_at:w};if(i){let T={kind:y,created_at:w,content:s,tags:[["p",i.pubKey]]};T=await Fe.sign(T),b.content=await mh.encrypt(i.privKey,i.pubKey,`${s}

${JSON.stringify(T)}`),b.pubkey=i.pubKey,b.tags=[["p",i.pubKey]],console.log("event",b),b.id=Oc(b),b.sig=y_(b,i.privKey)}else{const T=ye.toNostrHexAddress(e);if(b.content=await l(s),b.tags=[["p",T]],!T)throw new Error("invalid public key "+T)}Fe.publish(b),o(""),n==null||n()},h=d=>{const y=d.target.value;o(y),De.get("channels").get(e).get("msgDraft").put(y)},c=d=>{(d.metaKey||d.ctrlKey)&&d.key==="Enter"&&u(d)};return v("form",{autoComplete:"off",className:`flex flex-none flex-row gap-2 p-2 sticky w-full bottom-0 w-96 max-w-screen bg-black ${r||""}`,onSubmit:u,children:[v("input",{ref:a,className:"input input-sm flex-1 new-msg bg-neutral-700 text-white",onInput:h,onKeyDown:c,type:"text",placeholder:"Type a message",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0,value:s}),v("button",{className:`btn btn-sm ${s.length>0?"text-white bg-iris-blue":""}`,style:{marginRight:"0"},disabled:s.length===0,children:v(v3,{width:"24"})})]})},d8=Y_(()=>{const e=document.querySelector("#message-view");e&&e.scrollTo(0,e.scrollHeight-e.clientHeight)},100);function UIe({id:e}){const r=Pi(null),t=Pi(new X3("created_at")),[n,i]=Ne([]),[s,o]=Ne(!0),[a,l]=Ne(""),[u,h]=Ne(!1),[c,d]=Ne(void 0),[y,w]=Ne(!1),b=[];let T;const x=()=>{let R=nn(".day-separator").last(),M=R.position();for(;R&&M&&M.top-55>0;)R=R.prevAll(".day-separator").first(),M=R.position();const L=R.clone(),W=nn("<div>").css({position:"fixed",top:70,"text-align":"center"}).attr("id","floating-day-separator").width(nn(r.current).width()).append(L);nn("#floating-day-separator").remove(),setTimeout(()=>L.fadeOut(),2e3),nn(r.current).prepend(W)},A=()=>{const R=ye.toNostrHexAddress(e);t1e(R)},_=()=>{const R=nn(r.current);R[0].scrollHeight-R.scrollTop()<=R.outerHeight()+200?nn("#scroll-down-btn:visible").fadeOut(150):nn("#scroll-down-btn:not(:visible)").fadeIn(150)},I=As(()=>(c==null?void 0:c.privKey)&&ye.toNostrBech32Address(c.privKey,"nsec")||"",[c]),O=()=>{T=T||Y_(()=>{nn("#attachment-preview:visible").length||(x(),_())},200),T()},C=()=>{const R=r.current;R==null||R.scrollTo({top:R.scrollHeight})},g=()=>{let R;const M=ye.getPubKey(),L=new Date,W=L.toLocaleDateString();let X,te;const J=[];return e&&e.length>4&&(n.forEach(j=>{if(!j)return null;const Z=new Date(j.created_at*1e3);let se;if(Z){const me=Z.toLocaleDateString();if(me!==X){se=!0;const Pe=Ir.getDaySeparatorText(Z,me,L,W);J.push(v("div",{className:"px-2 mt-3 mb-4 py-1 inline-block day-separator bg-black opacity-50 text-white rounded-full",children:be(Pe.toLowerCase())}))}X=me}let Ee=se;!se&&te&&j.pubkey!==te&&(J.push(v("div",{className:"m-2"})),Ee=!0),te=j.pubkey,J.push(v(zIe,{event:j,showName:Ee,selfAuthored:j.pubkey===M},`${j.created_at}${j.pubkey}`))}),R=v("div",{ref:r,className:"main-view p-2 overflow-y-auto overflow-x-hidden flex flex-col flex-grow h-full",onScroll:()=>O(),children:[v("div",{className:"w-full flex flex-col items-center justify-end",children:[J,v("div",{className:"italic my-2 text-neutral-500 w-full text-center justify-self-center",children:[v(ft,{when:y&&c,children:[v("div",{children:be("secret_chat")}),v("div",{className:"flex gap-2 flex-1 items-center justify-center mt-4",children:[v("button",{className:"btn btn-neutral btn-sm",onClick:()=>h(j=>!j),children:[v(Bue,{width:"20"}),be("show_qr_code")]}),v(Wi,{className:"btn btn-neutral btn-sm",copyStr:I(),text:"Copy nsec"}),v(Wi,{className:"btn btn-neutral btn-sm",copyStr:Ir.buildURL("chat",void 0,I()),text:be("copy_link")})]}),v(ft,{when:u,children:v("div",{className:"mt-4",children:v(YP,{data:"nostr:"+I()})})})]}),v(ft,{when:!y&&ye.toNostrHexAddress(e)!==M,children:[v("div",{children:be("dm_privacy_warning")}),v("div",{className:"mt-4 flex gap-2 justify-center",children:[v(ft,{when:a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:()=>M_(a),children:"Go to secret chat"})}),v(ft,{when:!a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:A,children:"Invite to secret chat"})})]})]})]})]}),v("div",{id:"attachment-preview",className:"attachment-preview",style:{display:"none"}})]})),R};return iv(()=>{const R=r.current;if(R){const M=new ResizeObserver(()=>{C()});return M.observe(R),()=>{M.disconnect()}}}),xt(()=>{const R=ye.toNostrHexAddress(e),M=X=>{const te=J=>{t.current.set(J.id,J),i(Array.from(t.current.values()))};b.push(Ut.subscribe({kinds:[4],"#p":[ye.getPubKey()],authors:[X]},te)),X!==ye.getPubKey()&&b.push(Ut.subscribe({kinds:[4],"#p":[X],authors:[ye.getPubKey()]},te))};De.get("chatInvites").get(R).once(X=>{X!=null&&X.priv&&l(X.priv)});const L=()=>{const X=De.get("groups").get(e);X.on(te=>{const J=te.key,j=yh(J);d({privKey:J,pubKey:j}),b.push(Ut.subscribe({kinds:[4],"#p":[j],authors:[j]},async Z=>{const se=await mh.decrypt(J,j,Z.content);t.current.set(Z.id,{...Z,text:se}),i(Array.from(t.current.values()));const Ee=X.get("latest"),me=await Ee.once();(!me||!me.created_at||me.created_at<Z.created_at)&&Ee.put({id:Z.id,created_at:Z.created_at,text:se.slice(0,se.indexOf("{"))})}))})};R?M(R):(w(!0),L());const W=nn(r.current);return W&&W.off("scroll").on("scroll",()=>{const X=W.scrollTop()+W.innerHeight()>=W[0].scrollHeight;s&&!X?o(!1):!s&&X&&o(!0)}),()=>{b.forEach(X=>X())}},[e]),xt(()=>{s&&d8(),nn(".msg-content img").off("load").on("load",()=>s&&d8())},[s]),v(tt,{children:[v(vh,{children:v("title",{children:be("messages")})}),v("div",{className:`${e?"":"hidden"} flex flex-1 flex-col`,children:[g(),v(ft,{when:e&&e.length>4,children:[v("div",{className:"relative",children:v("div",{id:"scroll-down-btn",style:{display:"none"},className:"absolute bottom-1 left-2 p-1.5 rounded-3xl bg-neutral-900 opacity-85 hover:cursor-pointer",onClick:()=>C(),children:v(zle,{width:"24"})})}),v(HIe,{activeChat:e,onSubmit:()=>C(),keyPair:c},e)]})]})]})}const WIe=({activeChat:e})=>{const r=()=>{window.history.back()},t=()=>{window.scrollTo(0,0),e&&e.length>15&&Tr("/"+ye.toNostrBech32Address(e,"npub"))},n=()=>v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>De.get("showLoginModal").put(!0),children:be("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>De.get("showLoginModal").put(!0),children:be("sign_up")})]}),s=!!ye.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",onClick:t,children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[v(_H,{width:24,onClick:r}),v(ft,{when:e,children:v("div",{className:"flex flex-row gap-2 items-center",children:[v(Ki,{width:30,str:e}),v(br,{pub:e})]})}),v(ft,{when:!e,children:v("div",{className:"flex flex-row gap-2 items-center",children:be("chat")})}),v(ft,{when:s,children:v("div",{})}),v(ft,{when:!s,children:n()})]})})})};class p8 extends wu{constructor(){super();le(this,"id");le(this,"renderContent",t=>t==="new"?v(r1e,{}):t?v(UIe,{id:t},t):v("div",{className:"hidden md:flex flex-col items-center justify-center flex-1",children:[v("div",{className:"my-4",children:v(y3,{className:"w-24 h-24 text-neutral-400"})}),v("div",{className:"text-neutral-400",children:be("dm_privacy_warning")})]}));this.id="chat-view",this.hideSideBar=!0,this.hideHeader=!0}componentDidMount(){super.componentDidMount();const t=window.location.hash.substr(1);t&&t.startsWith("nsec")&&(window.history.replaceState({},document.title,window.location.pathname),ye.getPubKey()||ye.loginAsNewUser(),Eq(t))}renderView(){const{id:t}=this.props;return v("div",{className:"flex flex-col h-full max-h-screen",children:[v(WIe,{activeChat:t},t),v("div",{className:"flex flex-row flex-grow overflow-hidden",children:[v("div",{className:`flex-shrink-0 ${t?"hidden md:flex overflow-y-auto":"flex overflow-y-auto"}`,children:v(Tke,{activeChat:t,className:t?"hidden md:flex":"flex"})}),v("div",{className:`flex-grow overflow-y-auto ${t?"flex":"hidden md:flex"}`,children:this.renderContent(t)},`chat-content-${t}`)]})]})}}const KIe=e=>{const[r,t]=Ne("");return v(tt,{children:[v("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;s&&s.length&&qq(s[0],o=>{e.onUrl&&e.onUrl(o)},o=>{t(o)})}}),r?v("p",{children:r}):null]})},qIe={lud16:"Bitcoin lightning address  (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class VIe extends Wn{constructor(t){super(t);le(this,"saveOnChange",Cn.debounce(()=>{const t=this.state.profile;Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n]=t[n].trim())}),ut.setMetadata(t)},2e3));le(this,"setProfileAttribute",(t,n)=>{t=t.trim();const i=Object.assign({},this.state.profile);n?i[t]=n:delete i[t],this.setState({profile:i,edited:!0}),this.saveOnChange()});le(this,"handleSubmit",t=>{t.preventDefault(),ut.setMetadata(this.state.profile);const n=ye.toNostrBech32Address(ye.getPubKey(),"npub");Tr("/"+n)});le(this,"handleAddField",t=>{t.preventDefault();const n=this.state.newFieldName,i=this.state.newFieldValue;n&&i&&(this.setProfileAttribute(n,i),this.setState({newFieldName:"",newFieldValue:""}),ut.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){ut.getProfile(ye.getPubKey(),t=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete t.created_at,this.setState({profile:t}))})}render(){const t=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(n=>{t.includes(n)||t.push(n)}),v(tt,{children:[v(bu,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container prose",children:[v("h3",{children:be("edit_profile")}),v("form",{onSubmit:n=>this.handleSubmit(n),children:[t.map(n=>{const i=this.state.profile[n],s=typeof i=="string"||typeof i>"u";return v("p",{children:[v("label",{htmlFor:n,children:[qIe[n]||n,":"]}),v("br",{}),v("input",{className:"input w-full",type:"text",id:n,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:o=>s&&this.setProfileAttribute(n,o.target.value)}),n==="lud16"&&!i&&v("p",{children:v("small",{children:be("install_lightning_wallet_prompt")})}),n==="picture"||n==="banner"?v(tt,{children:[v("p",{children:v(KIe,{onUrl:o=>this.setProfileAttribute(n,o)})}),i&&v("p",{children:v(Sa,{src:i},i)})]}):null]})}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Save"})})]}),v("h4",{children:"Add new field"}),v("form",{onSubmit:n=>this.handleAddField(n),children:[v("p",{children:[v("label",{htmlFor:"newFieldName",children:"Field name:"}),v("br",{}),v("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",className:"input w-full",placeholder:be("field_name"),onInput:n=>this.setState({newFieldName:n.target.value})})]}),v("p",{children:[v("label",{htmlFor:"newFieldValue",children:"Field value:"}),v("br",{}),v("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",className:"input w-full",placeholder:be("field_value"),onInput:n=>this.setState({newFieldValue:n.target.value})})]}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Add new attribute"})})]})]})})]})}}const v8=Kn.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;

  &:nth-child(odd) {
    background-color: var(--zebra-stripe-bg);
  }
`,Zb=Kn.div`
  flex: 1;
  padding: 0 10px;

  &:first-of-type {
    flex: none;
  }
`,jV=({path:e})=>{const[r,t]=Ne(void 0);return xt(()=>{var i;const n=(i=_h.public)==null?void 0:i.get(e,t);return()=>n==null?void 0:n.off()}),typeof r=="object"&&r!==null?v(v8,{children:[v(Zb,{children:e}),v(Zb,{children:Object.keys(r).map(n=>v(jV,{path:`${e}/${n}`}))})]}):v(v8,{class:"node",children:[v(Zb,{children:e}),v(Zb,{children:JSON.stringify(r)})]})};function g8({path:e}){return e=e||"/",v(tt,{children:[v(bu,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container",children:[v("h2",{children:[be("explorer")," ",e]}),v("div",{class:"explorer",children:v(jV,{path:e})})]})})]})}const GIe=({activeDisplay:e,onDisplayChange:r})=>v("div",{className:"flex mb-px",children:[v("button",{className:`rounded-sm flex justify-center flex-1 p-3 ${e==="feed"?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>r("feed"),children:v(Ple,{width:24,height:24})}),v("button",{className:`rounded-sm flex justify-center flex-1 p-3 ${e==="grid"?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>r("grid"),children:v(iue,{width:24,height:24})})]}),YIe=({filterOptions:e,activeOption:r,onOptionClick:t})=>v("div",{className:"flex mb-4 gap-2 mx-2 md:mx-4",children:e.map(n=>v("button",{className:`btn btn-sm ${r.name===n.name?"btn-primary":"btn-neutral"}`,onClick:()=>t(n),children:n.name},n.name))}),ZIe=({item:e,index:r,setModalImageIndex:t,imagesAndVideosLength:n,lastElementRef:i})=>{const s=e.type==="video"?`https://imgproxy.iris.to/thumbnail/638/${e.url}`:e.url,o=r===n-1;return v("div",{className:"aspect-square cursor-pointer relative bg-neutral-300 hover:opacity-80",ref:o?i:null,onClick:()=>{t(r)},children:[v(Sa,{square:!0,width:319,src:s,alt:"",className:"w-full h-full object-cover"}),e.type==="video"&&v("div",{className:"absolute top-0 right-0 m-2 shadow-md shadow-gray-500 ",children:Ps.video})]},`feed${s}${r}`)},XIe=({imagesAndVideos:e,modalItemIndex:r,setModalImageIndex:t})=>{const n=()=>{if(r===null)return;const s=(r-1+e.length)%e.length;t(s)},i=()=>{if(r===null)return;const s=(r+1)%e.length;t(s)};return xt(()=>{const s=o=>{o.key==="ArrowRight"?i():o.key==="ArrowLeft"&&n()};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[r,e]),r!==null?v(ml,{onClose:()=>t(null),children:v("div",{className:"relative w-full h-full flex justify-center",children:[e[r].type==="video"?v("video",{className:"rounded max-h-[90vh] max-w-[90vw] object-contain",src:e[r].url,controls:!0,muted:!0,autoPlay:!0,loop:!0,poster:`https://imgproxy.iris.to/thumbnail/638/${e[r].url}`}):v(Sa,{className:"rounded max-h-[90vh] max-w-[90vw] object-contain",src:e[r].url},e[r].url),v("div",{className:"flex items-center justify-between w-full h-full absolute bottom-0 left-0 right-0",children:[v("div",{className:"p-4",onClick:s=>{s.stopPropagation(),n()},children:v("button",{className:"btn btn-circle btn-sm opacity-25 mr-2 flex-shrink-0",children:v(dke,{width:20})})}),v("div",{className:"p-4 cursor-pointer",onClick:s=>{s.stopPropagation(),i()},children:v("button",{className:"btn btn-circle btn-sm opacity-25 ml-2 flex-shrink-0",children:v(gke,{width:20})})})]})]})}):null};function JIe({onClick:e}){return v("div",{className:"fixed bottom-16 md:bottom-8 justify-center items-center z-10 flex w-full md:w-1/2 pb-safe-area",children:v("div",{className:"btn btn-sm opacity-90 hover:opacity-100 hover:bg-iris-blue bg-iris-blue text-white",onClick:e,children:be("show_n_new_messages").replace("{n} ","")})})}const QIe="0px 0px 2000px 0px";function eAe(e,r,t){xt(()=>{if(e.current&&t){const n=new IntersectionObserver(i=>{i[0].isIntersecting&&r()},{threshold:0,rootMargin:QIe});return n.observe(e.current),()=>{n.disconnect()}}},[e,r,t])}class y8{constructor(r="created_at",t="desc"){le(this,"eventMap");le(this,"sortedEventIds");le(this,"sortBy");le(this,"sortDirection");this.sortBy=r,this.sortDirection=t,this.eventMap=new Map,this.sortedEventIds=[]}compareFn(r,t){var s,o,a,l;let n,i;return!r||!t?0:r&&!t?-1:!r&&t?1:(this.sortBy==="created_at"?(n=r.created_at,i=t.created_at):this.sortBy==="likes"?(n=((s=Fe.likesByMessageId.get(r.id))==null?void 0:s.size)||0,i=((o=Fe.likesByMessageId.get(t.id))==null?void 0:o.size)||0):this.sortBy==="zaps"&&(n=((a=Fe.zapsByNote.get(r.id))==null?void 0:a.size)||0,i=((l=Fe.zapsByNote.get(t.id))==null?void 0:l.size)||0),this.sortDirection==="desc"?i-n:n-i)}has(r){return this.eventMap.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");return this.eventMap.has(r.id)?!1:(this.eventMap.set(r.id,r),this.insertEventId(r.id),!0)}delete(r){if(!this.eventMap.delete(r))return!1;const n=this.sortedEventIds.findIndex(i=>i===r);return n===-1?!1:(this.sortedEventIds.splice(n,1),!0)}get eventIds(){return this.sortedEventIds}get(r){return this.eventMap.get(r)}events(){return this.sortedEventIds.map(r=>this.eventMap.get(r))}last(){return this.eventMap.get(this.sortedEventIds[this.sortedEventIds.length-1])}first(){return this.eventMap.get(this.sortedEventIds[0])}get size(){return this.eventMap.size}insertEventId(r){const t=this.eventMap.get(r);let n=0,i=this.sortedEventIds.length;for(;n<i;){const s=Math.floor((n+i)/2),o=this.eventMap.get(this.sortedEventIds[s]);this.compareFn(t,o)<0?i=s:n=s+1}this.sortedEventIds.splice(n,0,r)}}const tAe=e=>{const[r,t]=Ne(new y8),[n,i]=Ne(null),{filter:s,enabled:o=!0,sinceLastOpened:a=!1,mergeSubscriptions:l=!0}=e,[u,h]=Ne([]),c=y=>{r.has(y.id)||(r.add(y),h(r.events()))};return xt(()=>{t(new y8)},[s]),xt(()=>{if(!(!o||!s))return s.limit=s.limit||10,Ut.subscribe(s,c,a,l)},[e]),{events:u,loadMore:()=>{var T;const y=(T=r.last())==null?void 0:T.created_at;if(!y)return;n&&(n(),i(null));const w=Object.assign({},s,{until:y,limit:10});console.log("load more until",new Date(y*1e3),"filter",w);const b=Ut.subscribe(w,c,!1,!0);i(b)}}},Ig=6;function rAe(e){return e.flatMap(r=>{const t=(r.content.match(DV.regex)||[]).map(i=>({type:"image",url:i,created_at:r.created_at})),n=(r.content.match(MV.regex)||[]).map(i=>({type:"video",url:i,created_at:r.created_at}));return[...t,...n]})}const nAe=e=>{const r=Pi(null),{showDisplayAs:t,filterOptions:n,emptyMessage:i}=e;if(!n||n.length===0)throw new Error("Feed requires at least one filter option");const[s,o]=Ne(n[0]),[a,l]=Ne(Ig),[u,h]=Ne("feed"),[c,d]=Ne(null),y=Pi(null),[w]=Hue("muted",{}),[b,T]=Ne(!1),[x,A]=Ne([]),{events:_,loadMore:I}=tAe({filter:s.filter,sinceLastOpened:!1}),O=xa(()=>_.filter(W=>w[W.pubkey]?!1:s.filterFn?s.filterFn(W):!0),[_,s]);xt(()=>{if(x.length<10)A(O);else{const L=x[Math.min(a,x.length)-1],W=O.filter(X=>X.created_at<L.created_at);A(X=>[...X,...W]),T(!0)}},[O]);const C=x.length===0,g=a<x.length;eAe(y,R,g);function R(){a<x.length?l(L=>L+Ig):I==null||I()}const M=xa(()=>u==="feed"?[]:rAe(x).slice(0,a),[x,a,u]);return v(tt,{children:[v(ft,{when:b,children:v(JIe,{onClick:()=>{T(!1),l(Ig),A(O),r.current&&r.current.scrollIntoView({behavior:"smooth"})}})}),v("div",{ref:r}),v(ft,{when:n.length>1,children:v(YIe,{filterOptions:n,activeOption:s,onOptionClick:L=>{o(L),l(Ig)}})}),v(ft,{when:t!==!1,children:v(GIe,{onDisplayChange:L=>{l(Ig),h(L)},activeDisplay:u})}),v(XIe,{setModalImageIndex:d,modalItemIndex:c,imagesAndVideos:M}),v(ft,{when:C,children:i||"No Posts"}),v(ft,{when:u==="grid",children:v("div",{className:"grid grid-cols-3 gap-px",children:M.map((L,W)=>v(ZIe,{item:L,index:W,setModalImageIndex:d,lastElementRef:y,imagesAndVideosLength:M.length}))})}),v(ft,{when:u==="feed",children:x.slice(0,a).map((L,W,X)=>{const te=W===X.length-1;return v("div",{ref:te?y:null,children:v(qo,{id:L.id,...s.eventProps})},`feed${L.id}${W}`)})})]})},Pm=yi(nAe),zV=e=>{const r=`https://iris.to/${ye.toNostrBech32Address(e.pub,"npub")}`;return v(ml,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:v("div",{style:{textAlign:"center",flex:1},children:[v(YP,{data:r}),v("p",{children:v(br,{pub:e.pub})})]})})},iAe=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']],sAe=Kn.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
`,oAe=Kn.div`
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
`;class HV extends Wn{componentDidMount(){De.get("noFollowers").on(this.inject()),De.get("hasNostrFollowers").on(this.inject()),De.get("showFollowSuggestions").on(this.inject()),De.get("showNoIrisToAddress").on(this.inject()),De.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return v("div",{className:"flex flex-col flex-grow px-2 py-4 md:px-4 gap-2",children:[v("p",{className:"text-base",children:be("follow_someone_info")}),iAe.map(([r,t])=>v("div",{className:"flex items-center space-x-4",children:[v(Kt,{href:`/${r}`,className:"flex flex-grow items-center space-x-2",children:[v("div",{className:"w-10 h-10",children:v(Ki,{str:r,width:40})}),v("div",{className:"flex-grow",children:[v(br,{pub:r,placeholder:"Suggested follow"}),v("p",{className:"text-sm text-gray-500",children:t})]})]}),v(Mc,{id:r})]})),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",onClick:()=>De.get("showFollowSuggestions").put(!1),children:be("done")})}),v("p",{className:"text-base",children:[be("alternatively"),v("i",{children:" "}),v(Kt,{href:`/${ye.toNostrBech32Address(ye.getPubKey(),"npub")}`,className:"link",children:be("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return v(sAe,{children:[v(oAe,{onClick:()=>De.get("noFollowers").put(!1),children:v(TH,{width:24})}),v("p",{children:be("no_followers_yet")}),v("div",{className:"flex gap-2 my-2",children:[v(Wi,{className:"btn btn-sm btn-neutral",text:be("copy_link"),copyStr:Ir.getMyProfileLink()}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.setState({showQrModal:!0}),children:be("show_qr_code")})]}),v("small",{children:be("no_followers_yet_info")}),this.state.showQrModal&&v(zV,{onClose:()=>this.setState({showQrModal:!1}),pub:ye.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return v("div",{className:"flex flex-col gap-2 mb-2",children:[v("p",{children:"Get your own iris.to/username?"}),v("p",{className:"flex gap-2",children:[v("button",{className:"btn btn-primary",onClick:()=>Tr("/settings/iris_account"),children:"Yes please"}),v("button",{className:"btn btn-neutral",onClick:()=>De.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let r;return this.state.showFollowSuggestions?r=this.renderFollowSuggestions():this.state.showNoIrisToAddress?r=this.renderGetIrisAddress():this.state.noFollowers&&(r=this.renderNoFollowers()),r?v("div",{class:"msg",children:v("div",{class:"msg-content",children:r})}):""}}let aAe=class extends wu{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[v(HV,{}),v("div",{className:"hidden md:block px-4",children:v(Om,{autofocus:!1,placeholder:be("whats_on_your_mind")})}),v(Pm,{filterOptions:[{name:be("posts"),filter:{kinds:[1]},filterFn:r=>!Fe.getEventReplyingTo(r),eventProps:{showRepliedMsg:!0}},{name:be("posts_and_replies"),filter:{kinds:[1]},eventProps:{showRepliedMsg:!0,fullWidth:!1}}]})]})})}},lAe=class extends wu{constructor(){super();le(this,"unsub");const t=Array.from(ut.followedByUser.get(pt(ye.getPubKey()))||[]).map(n=>Sn(n));this.state={followedUsers:t},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition(),this.unsub=ut.getFollowedByUser(ye.getPubKey(),t=>{console.log("followedUsers",t),this.setState({followedUsers:Array.from(t)})},!0)}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this)}renderView(){return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[v(HV,{}),v("div",{className:"hidden md:block px-4",children:v(Om,{autofocus:!1,placeholder:be("whats_on_your_mind")})}),v(ft,{when:this.state.followedUsers.length,children:v(Pm,{filterOptions:[{name:be("posts"),filter:{kinds:[1],authors:this.state.followedUsers,limit:100},filterFn:t=>!Fe.getEventReplyingTo(t),eventProps:{showRepliedMsg:!0}},{name:be("posts_and_replies"),filter:{kinds:[1],authors:this.state.followedUsers,limit:100},eventProps:{showRepliedMsg:!0,fullWidth:!1}}]})})]})})}};class uAe extends wu{constructor(){super(...arguments);le(this,"class","public-messages-view");le(this,"updateNotificationsLastOpened",Cn.debounce(()=>{const t=De.get("settings").get("notifications").get("saveLastOpened");t.once(n=>{var i;if(n!==!1){const s=Math.floor(Date.now()/1e3);((i=_h.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),t.put(!1)),De.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return v(Pm,{showDisplayAs:!1,emptyMessage:be("no_notifications_yet"),filterOptions:[{name:"notifications",filter:{kinds:[1,6,7,9735],"#p":[ye.getPubKey()]},eventProps:{fullWidth:!1}}]},"notifications")}}class cAe extends wu{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const r=n=>n.content.includes(this.props.keyword),t={kinds:[1],keywords:[this.props.keyword||""]};return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:v(Pm,{filterOptions:[{name:"Search",filter:t,filterFn:r}]})})})}}const fAe=yi(({hexKey:e})=>{var t;const r=ye.toNostrBech32Address(e,"npub")||"";return v("div",{className:"flex w-full",children:[v(Kt,{href:`/${r}`,className:"flex flex-1 gap-4",children:[v(Ki,{str:r,width:49}),v("div",{children:[v(br,{pub:r}),v("br",{}),v("span",{className:"text-neutral-500 text-sm",children:[((t=ut.followersByUser.get(pt(e)))==null?void 0:t.size)||0,v("i",{children:" "}),"followers"]})]})]}),e!==ye.getPubKey()&&v(Mc,{id:r})]},r)});class m8 extends wu{constructor(){super();le(this,"follows");le(this,"myPub");le(this,"updateSortedFollows",Y_(()=>{const t=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),n=Array.from(this.follows).sort(t);this.setState({follows:n})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(t,n){var o,a;const i=(o=ut.profiles.get(pt(t)))==null?void 0:o.name,s=(a=ut.profiles.get(pt(n)))==null?void 0:a.name;return!i&&!s?t.localeCompare(n):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(t,n){const i=ut.followDistanceByUser.get(pt(t)),s=ut.followDistanceByUser.get(pt(n));return i===s?this.sortByName(t,n):i===void 0?1:s===void 0||i<s?-1:1}getFollows(){const t=ye.toNostrHexAddress(this.props.id)||"";t&&ut.getFollowedByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const t=ye.toNostrHexAddress(this.props.id)||"";t&&ut.getFollowersByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=ye.toNostrBech32Address(ye.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),De.get("contacts").on(this.inject()))}followAll(){confirm(`${be("follow_all")} (${this.state.follows.length})?`)&&ut.setFollowed(this.state.follows)}renderFollows(){return this.state.follows.map(t=>v(fAe,{hexKey:t}))}renderView(){const t=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return v("div",{className:"px-4 mb-4",children:[v("div",{className:"flex justify-between mb-4",children:[v("span",{className:"text-xl font-bold",children:[v("a",{className:"link",href:`/${this.props.id}`,children:v(br,{pub:this.props.id})}),":",v("i",{children:" "}),v("span",{style:{flex:1},className:"ml-1",children:this.props.followers?be("followers"):be("following")})]}),v(ft,{when:t,children:v("span",{style:"text-align: right",className:"hidden md:inline",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[be("follow_all")," (",this.state.follows.length,")"]})})})]}),v(ft,{when:t,children:v("p",{style:"text-align: right",className:"inline md:hidden",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[be("follow_all")," (",this.state.follows.length,")"]})})}),v("div",{className:"flex flex-col w-full gap-4",children:[this.renderFollows(),this.state.follows.length===0?"":""]})]})}}function hAe(e){const[r,t]=Ne(""),n=ye.toNostrHexAddress(r),i=ye.toNostrBech32Address(r,"note"),s=ye.toNostrBech32Address(r,"npub"),o=ye.toNostrBech32Address(r,"nsec");return v(tt,{children:[v(bu,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container mobile-padding15",children:[v("h2",{children:be("key_converter")}),v("p",{children:v("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:a=>{var l;return t((l=a.target.value)==null?void 0:l.trim())}})}),r&&n&&(r===n?v(tt,{children:[v("p",{children:[v("b",{children:"note:"})," ",i]}),v("p",{children:[v("b",{children:"npub:"})," ",s]}),v("p",{children:[v("b",{children:"nsec:"})," ",o]})]}):v("p",{children:[v("b",{children:"hex:"})," ",n]})),r&&!n&&v("p",{children:v("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const JP=2n**256n,sh=JP-0x1000003d1n,QP=JP-0x14551231950b75fc4402da1732fc9bebfn,UV=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,WV=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,KV={p:sh,n:QP,a:0n,b:7n,Gx:UV,Gy:WV},oh=32,b8=e=>Ct(Ct(e*e)*e+KV.b),fi=(e="")=>{throw new Error(e)},Z_=e=>typeof e=="bigint",qV=e=>typeof e=="string",sS=e=>Z_(e)&&0n<e&&e<sh,VV=e=>Z_(e)&&0n<e&&e<QP,GV=(e,r)=>!(e instanceof Uint8Array)||typeof r=="number"&&r>0&&e.length!==r?fi("Uint8Array expected"):e,Ky=e=>new Uint8Array(e),e4=(e,r)=>GV(qV(e)?X_(e):Ky(e),r),Ct=(e,r=sh)=>{let t=e%r;return t>=0n?t:r+t},w8=e=>e instanceof Lo?e:fi("Point expected");let $8;class Lo{constructor(r,t,n){this.px=r,this.py=t,this.pz=n}static fromAffine(r){return new Lo(r.x,r.y,1n)}static fromHex(r){r=e4(r);let t;const n=r[0],i=r.subarray(1),s=_8(i,0,oh),o=r.length;if(o===33&&[2,3].includes(n)){sS(s)||fi("Point hex invalid: x not FE");let a=dAe(b8(s));const l=(a&1n)===1n;(n&1)===1!==l&&(a=Ct(-a)),t=new Lo(s,a,1n)}return o===65&&n===4&&(t=new Lo(s,_8(i,oh,2*oh),1n)),t?t.ok():fi("Point is not on curve")}static fromPrivateKey(r){return mp.mul(cA(r))}get x(){return this.aff().x}get y(){return this.aff().y}equals(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=w8(r),l=Ct(t*a),u=Ct(s*i),h=Ct(n*a),c=Ct(o*i);return l===u&&h===c}negate(){return new Lo(this.px,Ct(-this.py),this.pz)}double(){return this.add(this)}add(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=w8(r),{a:l,b:u}=KV;let h=0n,c=0n,d=0n;const y=Ct(u*3n);let w=Ct(t*s),b=Ct(n*o),T=Ct(i*a),x=Ct(t+n),A=Ct(s+o);x=Ct(x*A),A=Ct(w+b),x=Ct(x-A),A=Ct(t+i);let _=Ct(s+a);return A=Ct(A*_),_=Ct(w+T),A=Ct(A-_),_=Ct(n+i),h=Ct(o+a),_=Ct(_*h),h=Ct(b+T),_=Ct(_-h),d=Ct(l*A),h=Ct(y*T),d=Ct(h+d),h=Ct(b-d),d=Ct(b+d),c=Ct(h*d),b=Ct(w+w),b=Ct(b+w),T=Ct(l*T),A=Ct(y*A),b=Ct(b+T),T=Ct(w-T),T=Ct(l*T),A=Ct(A+T),w=Ct(b*A),c=Ct(c+w),w=Ct(_*A),h=Ct(x*h),h=Ct(h-w),w=Ct(x*b),d=Ct(_*d),d=Ct(d+w),new Lo(h,c,d)}mul(r,t=!0){if(!t&&r===0n)return rw;if(VV(r)||fi("invalid scalar"),this.equals(mp))return vAe(r).p;let n=rw,i=mp;for(let s=this;r>0n;s=s.double(),r>>=1n)r&1n?n=n.add(s):t&&(i=i.add(s));return n}mulAddQUns(r,t,n){return this.mul(t,!1).add(r.mul(n,!1)).ok()}toAffine(){const{px:r,py:t,pz:n}=this;if(this.equals(rw))return{x:0n,y:0n};if(n===1n)return{x:r,y:t};const i=ZV(n);return Ct(n*i)!==1n&&fi("invalid inverse"),{x:Ct(r*i),y:Ct(t*i)}}assertValidity(){const{x:r,y:t}=this.aff();return(!sS(r)||!sS(t))&&fi("Point invalid: x or y"),Ct(t*t)===b8(r)?this:fi("Point invalid: not on curve")}multiply(r){return this.mul(r)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(r=!0){const{x:t,y:n}=this.aff();return(r?(n&1n)===0n?"02":"03":"04")+x8(t)+(r?"":x8(n))}toRawBytes(r=!0){return X_(this.toHex(r))}}Lo.BASE=new Lo(UV,WV,1n);Lo.ZERO=new Lo(0n,1n,0n);const{BASE:mp,ZERO:rw}=Lo,YV=(e,r)=>e.toString(16).padStart(r,"0"),t4=e=>Array.from(e).map(r=>YV(r,2)).join(""),X_=e=>{const r=e.length;(!qV(e)||r%2)&&fi("hex invalid 1");const t=Ky(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);(Number.isNaN(o)||o<0)&&fi("hex invalid 2"),t[n]=o}return t},J_=e=>BigInt("0x"+(t4(e)||"0")),_8=(e,r,t)=>J_(e.slice(r,t)),r4=e=>Z_(e)&&e>=0n&&e<JP?X_(YV(e,2*oh)):fi("bigint expected"),x8=e=>t4(r4(e)),E8=(...e)=>{const r=Ky(e.reduce((n,i)=>n+GV(i).length,0));let t=0;return e.forEach(n=>{r.set(n,t),t+=n.length}),r},ZV=(e,r=sh)=>{(e===0n||r<=0n)&&fi("no inverse n="+e+" mod="+r);let t=Ct(e,r),n=r,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,l=i-s*o;n=t,t=a,i=s,s=l}return n===1n?Ct(i,r):fi("no inverse")},dAe=e=>{let r=1n;for(let t=e,n=(sh+1n)/4n;n>0n;n>>=1n)n&1n&&(r=r*t%sh),t=t*t%sh;return Ct(r*r)===e?r:fi("sqrt invalid")},cA=e=>(Z_(e)||(e=J_(e4(e,oh))),VV(e)?e:fi("private key out of range")),S8=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let nw;function XV(e){e=e4(e);const r=oh+8;(e.length<r||e.length>1024)&&fi("expected proper params");const t=Ct(J_(e),QP-1n)+1n;return r4(t)}const JV={hexToBytes:X_,bytesToHex:t4,concatBytes:E8,bytesToNumberBE:J_,numberToBytesBE:r4,mod:Ct,invert:ZV,hmacSha256Async:async(e,...r)=>{const t=S8();if(!t)return fi("etc.hmacSha256Async not set");const n=t.subtle,i=await n.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Ky(await n.sign("HMAC",i,E8(...r)))},hmacSha256Sync:nw,hashToPrivateKey:XV,randomBytes:e=>{const r=S8();return r||fi("crypto.getRandomValues must be defined"),r.getRandomValues(Ky(e))}},k8={normPrivateKeyToScalar:cA,isValidPrivateKey:e=>{try{return!!cA(e)}catch{return!1}},randomPrivateKey:()=>XV(JV.randomBytes(oh+8)),precompute(e=8,r=mp){return r.multiply(3n),r}};Object.defineProperties(JV,{hmacSha256Sync:{configurable:!1,get(){return nw},set(e){nw||(nw=e)}}});const Df=8,pAe=()=>{const e=[],r=256/Df+1;let t=mp,n=t;for(let i=0;i<r;i++){n=t,e.push(n);for(let s=1;s<2**(Df-1);s++)n=n.add(t),e.push(n);t=n.double()}return e},vAe=e=>{const r=$8||($8=pAe()),t=(h,c)=>{let d=c.negate();return h?d:c};let n=rw,i=mp;const s=1+256/Df,o=2**(Df-1),a=BigInt(2**Df-1),l=2**Df,u=BigInt(Df);for(let h=0;h<s;h++){const c=h*o;let d=Number(e&a);e>>=u,d>o&&(d-=l,e+=1n);const y=c,w=c+Math.abs(d)-1,b=h%2!==0,T=d<0;d===0?i=i.add(t(b,r[y])):n=n.add(t(T,r[w]))}return{p:n,f:i}},gAe=v(tt,{children:[v("b",{children:"End User Licence Agreement"}),v("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),v("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),v("ul",{children:[v("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),v("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),v("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),v("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),v("li",{children:"illegal content related to gambling."})]}),v("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),v("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),v("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),v("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function yAe({onAccept:e,onDecline:r}){return v("div",{class:"m-1 bg-black overflow-y-scroll absolute inset-0 pb-safe-area",children:[v("div",{className:"prose",children:gAe}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-primary",onClick:e,children:"Accept"}),v("button",{className:"btn btn-default",onClick:r,children:"Decline"})]})]})}function mAe(e){const r=e.target.value;qd.includes(r)&&(localStorage.setItem("language",r),location.reload())}const bAe=()=>v("div",{className:"flex flex-row w-full justify-center items-center",children:[v(EH,{width:24}),v("select",{className:"input rounded-full",onChange:mAe,value:jo,children:Object.keys(Cy).map(e=>v("option",{value:e,children:Cy[e]},e))})]});class iw extends Fn{constructor(){super(...arguments);le(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const t=document.getElementById("login-form-name");t&&t.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(t){t.preventDefault();const n=await window.nostr.getPublicKey();ye.login({rpub:n},this.props.fullScreen)}async onPasteKey(t){var s;const n=(s=t.target.value)==null?void 0:s.trim();if(!n.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(n)}catch{}if(!i)if(k8.isValidPrivateKey(n))i={priv:n,rpub:ye.getPublicKey(n)};else try{const{data:o,prefix:a}=Aw(n),l=Ir.arrayToHex(o);a==="npub"?i={rpub:l}:a==="nsec"&&(i={priv:l,rpub:ye.getPublicKey(l)})}catch(o){this.setState({privateKeyError:be("invalid_private_key")}),console.error(o)}i&&(await ye.login(i,this.props.fullScreen),t.target.value="",Ir.copyToClipboard(""))}showCreateAccount(t){t.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const t=document.getElementById("login-form-name"),n=t==null?void 0:t.value;ye.loginAsNewUser(this.props.fullScreen),De.get("showFollowSuggestions").put(!0),n&&setTimeout(()=>{ut.setMetadata({display_name:n})},100);const i=Math.floor(Date.now()/1e3);Fe.notificationsSeenTime=i}onLoginFormSubmit(t){t.preventDefault(),Ir.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(t){const n=t.target.value;if(n.indexOf('"priv"')!==-1||k8.isValidPrivateKey(n)||n.startsWith("nsec")||n.startsWith("npub")){this.onPasteKey(t),t.target.value="";return}this.setState({inputStyle:n.length?"text-align: center":""})}renderExistingAccountLogin(){return v(tt,{children:[v("input",{className:"rounded-full input input-bordered centered-placeholder",id:"paste-privkey",autoFocus:!0,onInput:t=>this.onPasteKey(t),placeholder:be("paste_private_key"),type:"password"}),this.state.privateKeyError&&v("p",{className:"error",children:this.state.privateKeyError})]})}render(){return v("section",{className:`flex items-center justify-center ${this.props.fullScreen?"h-screen":""}`,children:[this.state.showEula&&v(yAe,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),v("div",{className:"w-full max-w-sm",children:this.state.showSwitchAccount?v("div",{className:"text-center shadow-md rounded px-8 pt-6 pb-8 mb-4 flex gap-2 flex-col",children:[v("p",{className:"link",children:v("a",{href:"",id:"show-create-account",onClick:t=>this.showCreateAccount(t),children:be("back")})}),this.renderExistingAccountLogin()]}):v("form",{className:"shadow-md bg-black rounded px-8 pt-6 pb-8 mb-4 gap-4 flex flex-col items-center justify-center",autocomplete:"off",onSubmit:t=>this.onLoginFormSubmit(t),children:[v("img",{className:"w-20 h-20 mx-auto",src:"/img/android-chrome-192x192.png",alt:"iris"}),v("h1",{className:"text-2xl font-bold",children:"Dpeep"}),v("input",{className:"input centered-placeholder",style:this.state.inputStyle,onInput:t=>this.onNameChange(t),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:be("whats_your_name")}),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",type:"submit",children:be("new_user_go")})}),window.nostr?v("p",{className:"text-center link",children:v("a",{href:"",onClick:t=>this.nostrExtensionLogin(t),children:be("nostr_extension_login")})}):null,v("p",{className:"text-center link",children:v("a",{href:"",id:"show-existing-account-login",onClick:t=>{t.preventDefault(),this.setState({showSwitchAccount:!0})},children:be("private_key_login")})}),v(bAe,{})]})})]})}}class wAe extends iw{render(){return this.renderExistingAccountLogin()}}function $Ae(e){return v("div",{className:"px-2 md:px-4 py-8 justify-center flex flex-col items-center",children:[v("div",{className:"my-4",children:be("logout_confirmation_info")}),v("div",{className:"my-4 flex flex-row gap-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>Tr("/settings"),children:be("back")}),v("button",{className:"btn btn-primary",onClick:()=>_h.logOut(),children:be("log_out")})]})]})}class T8 extends wu{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const r=ye.toNostrBech32Address(this.props.id,"note");if(r&&this.props.id!==r){Tr(`/${r}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(r){r.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let r;return this.props.id==="new"?r=v("div",{className:"m-2",children:v(Om,{placeholder:be("whats_on_your_mind"),forceAutoFocusMobile:!0,autofocus:!0,onSubmit:()=>Tr("/")})}):r=v(qo,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),v("div",{className:"w-full",children:r})}}class _Ae extends ZP{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=be("report_public"),this.actionDone=be("reported"),this.hoverAction=be("unreport")}onClick(r){r.preventDefault();const t=!this.state[this.key];if(confirm(t?"Publicly report this user?":"Unreport user?")){const n=ye.toNostrHexAddress(this.props.id);n&&ut.flag(n,t)}}componentDidMount(){ut.getFlaggedUsers(r=>{const t=ye.toNostrHexAddress(this.props.id),n=t&&(r==null?void 0:r.has(t));this.setState({reported:n})})}}const xAe=({hexPub:e,npub:r,rawDataJson:t,isMyProfile:n})=>{async function i(a){a.preventDefault(),Tr("/"),ye.login({rpub:e})}const[s,o]=Ne(!1);return v(tt,{children:[v(IV,{children:[v(Wi,{className:"btn btn-sm",text:be("copy_link"),copyStr:window.location.href},`${e}copyLink`),v(Wi,{className:"btn btn-sm",text:be("copy_user_ID"),copyStr:r},`${e}copyNpub`),v("button",{className:"btn btn-sm",onClick:()=>o(!0),children:be("show_qr_code")}),v(Wi,{className:"btn btn-sm",text:be("copy_raw_data"),copyStr:t},`${e}copyData`),v(ft,{when:!n&&!ye.getPrivKey(),children:v("button",{className:"btn btn-sm",onClick:i,children:[be("view_as")+" ",v(br,{pub:e,hideBadge:!0})]})}),v(ft,{when:!n,children:v(tt,{children:[v(ZP,{className:"btn btn-sm",id:e}),v(_Ae,{className:"btn btn-sm",id:e})]})})]}),v(ft,{when:s,children:v(zV,{pub:e,onClose:()=>o(!1)})})]})},EAe=({picture:e,onError:r})=>{const[t,n]=Ne(!1),i=()=>{n(!0)},s=()=>{n(!1)};return e?v("div",{className:"rounded-full border-4 border-black",children:[v(Sa,{width:128,square:!0,className:"rounded-full cursor-pointer",src:e,onError:r,onClick:i}),t&&v(ml,{centerVertically:!0,onClose:s,children:v(Sa,{className:"max-w-full max-h-[90vh]",square:!0,src:e,onError:r})})]}):null},SAe=({hexPub:e})=>{const[r,t]=Ne({showTrustsList:!1,trusted:!1,showDistrustsList:!1,distrusted:!1,renderTrustScore:"",renderDistrustScore:"",processing:!1}),n=Im(pt(e));xt(()=>{var u;if(!n)return;const o=(u=n.vertice)==null?void 0:u.score;if(!o)return;let a=o.isDirectTrusted(),l=o.isDirectDistrusted();t(h=>({...h,trusted:a,distrusted:l,renderTrustScore:a?o.renderTrustCount():"",renderDistrustScore:l?o.renderDistrustCount():"",processing:!1}))},[n]);function i(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!r.trusted,distrusted:!1,processing:!0}),(async()=>{let a=r.trusted?0:1;await Vt.publishTrust(e,a,zo.Key)})()}function s(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!1,distrusted:!r.distrusted,processing:!0}),(async()=>{let a=r.distrusted?0:-1;await Vt.publishTrust(e,a,zo.Key)})()}return v(tt,{children:v("div",{className:"flex-1 flex gap-4",children:[v("a",{className:`msg-btn trust-btn ${r.trusted?"trusted":""} cursor-pointer`,onClick:o=>i(o),title:r.trusted?"Trusted":"Trust",children:r.trusted?v(u$,{size:24,fill:"green",stroke:"currentColor"}):v(u$,{size:24,fill:"none",stroke:"currentColor"})}),v("a",{className:`msg-btn trust-btn ${r.distrusted?"distrusted":""} cursor-pointer`,onClick:o=>s(o),title:r.distrusted?"Distrusted":"Distrust",children:r.distrusted?v(l$,{size:24,fill:"red",stroke:"currentColor"}):v(l$,{size:24,fill:"none",stroke:"currentColor"})})]})})},kAe=({hexPub:e})=>{const[r]=Ne(ye.toNostrBech32Address(e,"npub")),[t,n]=Ne(),i=Im(pt(e),void 0,"");return xt(()=>{var o;const s=(o=i.vertice)==null?void 0:o.score;s&&n(a=>({...a,score:s}))},[i]),v(tt,{children:[VP(t==null?void 0:t.score,r,!0),GP(t==null?void 0:t.score,r,!0)]})},TAe=({address:e})=>{const[r,t]=Ne(0),[n,i]=Ne(0),[s,o]=Ne(0),[a,l]=Ne(0),[u,h]=Ne([]),c=ye.getPubKey()===e;return xt(()=>{const d=[];fetch(`https://eu.rbr.bio/${e}/info.json`).then(w=>{w.ok&&w.json().then(b=>{var T;b&&(l((T=b.following)==null?void 0:T.length),o(b.followerCount))})});const y=Y_(w=>{const b=new Set;for(const T of w)ut.getFollowDistance(T)===1&&b.add(T);h(Array.from(b))},1e3);return setTimeout(()=>{d.push(ut.getFollowersByUser(e,w=>{i(w.size),y(w)})),d.push(ut.getFollowedByUser(e,w=>t(w.size)))},1e3),()=>{d.forEach(w=>w())}},[e]),v("div",{children:[v("div",{className:"text-sm flex gap-4",children:[v(Kt,{href:`/follows/${e}`,children:[v("b",{children:Math.max(r,a)}),v("span",{className:"text-neutral-500",children:[" ",be("following")]})]}),v(Kt,{href:`/followers/${e}`,children:[v("b",{children:Math.max(n,s)}),v("span",{className:"text-neutral-500",children:[" ",be("followers")]})]}),v(kAe,{hexPub:e})]}),v(ft,{when:!c&&u.length>0,children:v("div",{className:"text-neutral-500",children:v("small",{children:["Followed by"," ",u.slice(0,3).map((d,y)=>v("span",{children:[v(ft,{when:y>0,children:", "}),v(Kt,{className:"hover:underline",href:`/${ye.toNostrBech32Address(d,"npub")}`,children:v(br,{pub:d,hideBadge:!0})})," "]},d)),v(ft,{when:u.length>3,children:v("span",{children:[" ","and ",v("b",{children:u.length-3})," other users you follow"]})})]})})}),v(ft,{when:ut.isFollowing(e,ye.getPubKey()),children:v("div",{className:"text-neutral-500",children:v("small",{children:be("follows_you")})})})]})},IAe=yi(TAe),AAe=e=>{var C,g;const{hexPub:r,npub:t}=e,[n,i]=Ne(ut.profiles.get(pt(r))||{}),[s,o]=Ne(""),[a,l]=Ne(""),[u,h]=Ne(!1),[c,d]=Ne(""),[y,w]=Ne(""),[b,T]=Ne(!1),[x,A]=Ne(!1),_=As((R,M)=>{const L=[];return L.push(Ut.subscribe({authors:[R],kinds:[0,3]},void 0,!1,!1)),L.push(ut.getProfile(R,W=>{if(!W)return;if(!(M&&M.endsWith("@iris.to"))&&W.nip05&&W.nip05valid){const j=W.nip05,Z=j.split("@"),se=Z[0],Ee=Z[1];let me;Ee==="iris.to"?se==="_"?me="iris":me=se:se==="_"?me=Ee:me=j,d(me),me=window.location.pathname.replace(/[^/]+/,me);const Pe=window.history.state;window.history.replaceState(Pe,"",me)}let te=W.lud16||W.lud06;te&&!te.startsWith("lightning:")&&(te="lightning:"+te),o(te);let J="";try{const j=W.website&&(W.website.match(/^https?:\/\//)?W.website:"http://"+W.website),Z=new URL(j);J=Z.href.endsWith("/")?Z.href.slice(0,-1):Z.href}catch{J=""}l(J),i(W)},!0)),()=>{L.forEach(W=>W())}},[]);xt(()=>{const R=[],M=Fe.db.findOne({kind:0,pubkey:r}),L=Fe.db.findOne({kind:3,pubkey:r});M&&R.push(M),L&&R.push(L),w(JSON.stringify(R,null,2)),T(r===ye.getPubKey()),_(r,c);const W=De.get("loggedIn").on(te=>{h(te)}),X=ut.getBlockedUsers(te=>{A(te.has(r))});return()=>{X(),W()}},[r]);const I=x?v(Ki,{str:t,hidePicture:!0,width:128},`${t}avatar`):v(EAe,{picture:n.picture,onError:()=>null},`${r}picture`),O=()=>!u&&De.get("showLoginModal").put(!0);return v("div",{children:v("div",{className:"mb-2 mx-4 md:px-4 md:mx-0 flex flex-col gap-2",children:[v("div",{className:"flex flex-row",children:[v("div",{className:n.banner?"-mt-24":"",children:I}),v("div",{className:"flex-1 justify-end items-center flex gap-2",children:[v("div",{onClick:O,children:[v("a",{href:"/graph/"+t,className:"link px-2",children:"Web of Trust"}),v(ft,{when:b,children:v("a",{className:"btn btn-sm btn-neutral",href:"/profile/edit",children:be("edit_profile")})}),v(ft,{when:!b,children:[v(Mc,{id:r},`${r}follow`),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>u&&Tr(`/chat/${t}`),children:be("send_message")})]})]}),v(xAe,{hexPub:r,npub:t,rawDataJson:y,isMyProfile:b})]})]}),v("div",{className:"profile-header-stuff",children:[v("div",{className:"flex-1 profile-name",children:[v("span",{className:"text-xl",children:v(br,{pub:r})}),v(ft,{when:n.nip05&&n.nip05valid,children:[v("br",{}),v("small",{className:"text-iris-green",children:(C=n.nip05)==null?void 0:C.replace(/^_@/,"")})]})]}),v(IAe,{address:r}),v("div",{className:"py-2",children:[v("p",{className:"text-sm",children:v(XP,{textOnly:!0,children:(g=n.about)==null?void 0:g.slice(0,500)})}),v("div",{className:"flex flex-1 flex-row align-center justify-center mt-4",children:[v(ft,{when:!b,children:v(SAe,{hexPub:r})}),v(ft,{when:s,children:v("div",{className:"flex-1",children:v("a",{className:"btn btn-sm btn-neutral",href:s,onClick:R=>Ir.handleLightningLinkClick(R),children:[" ",be("tip_lightning")]})})}),v(ft,{when:a,children:v("div",{className:"flex-1",children:v("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"link",children:a==null?void 0:a.replace(/^https?:\/\//,"")})})})]})]})]})]})},`${r}details`)};class Xb extends wu{constructor(){super();le(this,"subscriptions");le(this,"unsub");this.state={followedUserCount:0,followerCount:0},this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers)return v("div",{className:"msg",children:v("div",{className:"msg-content",children:[v("p",{children:["Share your profile link so ",this.state.name||"this user"," can follow you:"]}),v("p",{children:v(Wi,{text:be("copy_link"),copyStr:Ir.getMyProfileLink()})}),v("small",{children:be("no_followers_yet_info")})]})})}async viewAs(t){t.preventDefault(),Tr("/"),ye.login({rpub:this.state.hexPub})}renderView(){const{hexPub:t,display_name:n,name:i,profile:s,banner:o,picture:a,blocked:l}=this.state;if(!t)return v("div",{});const u=n||i||"Profile",h=`${u} | Iris`,c=`Latest posts by ${n||i||"user"}. ${(s==null?void 0:s.about)||""}`;return v(tt,{children:[v(ft,{when:o,children:v("div",{className:"mb-4 h-48 bg-cover bg-center",style:{backgroundImage:`url(${o})`}})}),v("div",{children:[v(vh,{children:[v("title",{children:u}),v("meta",{name:"description",content:c}),v("meta",{property:"og:type",content:"profile"}),v(ft,{when:a,children:[v("meta",{property:"og:image",content:a}),v("meta",{name:"twitter:image",content:a})]}),v("meta",{property:"og:title",content:h}),v("meta",{property:"og:description",content:c})]}),v(AAe,{npub:this.state.npub,hexPub:this.state.hexPub}),v(ft,{when:!l,children:v(Pm,{filterOptions:[{name:be("posts"),filter:{authors:[this.state.hexPub],kinds:[1],limit:5},filterFn:d=>!Fe.getEventReplyingTo(d),eventProps:{showRepliedMsg:!0}},{name:be("posts_and_replies"),filter:{authors:[this.state.hexPub],kinds:[1],limit:5},eventProps:{showRepliedMsg:!0,fullWidth:!1}},{name:be("likes"),filter:{authors:[this.state.hexPub],kinds:[7],limit:5}}]},`posts${this.state.hexPub}`)})]})]})}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this),De.get("isMyProfile").put(!1)}componentDidUpdate(t,n){var i;!n.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}loadProfile(t){const n=t===ye.getPubKey();De.get("isMyProfile").put(n),De.get("noFollowers").on(this.inject()),this.subscriptions.push(ut.getProfile(t,i=>{let s;try{if(s=i.banner&&new URL(i.banner).toString(),!s)return;s=kq(s)?s:`https://imgproxy.iris.to/insecure/rs:fill:948:192/plain/${s}`,this.setState({banner:s})}catch{console.log("Invalid banner URL",i.banner)}}))}componentDidMount(){this.restoreScrollPosition();const t=this.props.id,n=ye.toNostrBech32Address(t,"npub");if(De.get("loggedIn").on(this.inject()),n&&n!==t){Tr(`/${n}`,!0);return}const i=ye.toNostrHexAddress(t);if(!i){let s=t;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),ye.getPubKeyByNip05Address(s).then(o=>{if(o){const a=ye.toNostrBech32Address(o,"npub");a&&a!==o&&(this.setState({npub:a,hexPub:o}),this.loadProfile(o))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:ye.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}var QV=function(e,r,t,n){var i;r[0]=0;for(var s=1;s<r.length;s++){var o=r[s++],a=r[s]?(r[0]|=o?1:2,t[r[s++]]):r[++s];o===3?n[0]=a:o===4?n[1]=Object.assign(n[1]||{},a):o===5?(n[1]=n[1]||{})[r[++s]]=a:o===6?n[1][r[++s]]+=a+"":o?(i=e.apply(a,QV(e,a,t,["",null])),n.push(i),a[0]?r[0]|=2:(r[s-2]=0,r[s]=i)):n.push(a)}return n},I8=new Map;function OAe(e){var r=I8.get(this);return r||(r=new Map,I8.set(this,r)),(r=QV(this,r.get(e)||(r.set(e,r=function(t){for(var n,i,s=1,o="",a="",l=[0],u=function(d){s===1&&(d||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,d,o):s===3&&(d||o)?(l.push(3,d,o),s=2):s===2&&o==="..."&&d?l.push(4,d,0):s===2&&o&&!d?l.push(5,0,!0,o):s>=5&&((o||!d&&s===5)&&(l.push(s,0,o,i),s=6),d&&(l.push(s,d,0,i),s=6)),o=""},h=0;h<t.length;h++){h&&(s===1&&u(),u(h));for(var c=0;c<t[h].length;c++)n=t[h][c],s===1?n==="<"?(u(),l=[l],s=3):o+=n:s===4?o==="--"&&n===">"?(s=1,o=""):o=n+o[0]:a?n===a?a="":o+=n:n==='"'||n==="'"?a=n:n===">"?(u(),s=1):s&&(n==="="?(s=5,i=o,o=""):n==="/"&&(s<5||t[h][c+1]===">")?(u(),s===3&&(l=l[0]),s=l,(l=l[0]).push(2,0,s),s=0):n===" "||n==="	"||n===`
`||n==="\r"?(u(),s=2):o+=n),s===3&&o==="!--"&&(s=4,l=l[0])}return u(),l}(e)),r),arguments,[])).length>1?r:r[0]}var eG=OAe.bind(Ye);class CAe extends Wn{onLogoutClick(r){r?Tr("/logout"):_h.logOut()}async onExtensionLoginClick(r){r.preventDefault();const t=await window.nostr.getPublicKey();ye.login({rpub:t})}deleteAccount(){confirm(`${be("delete_account")}?`)&&(Fe.publish({kind:0,content:JSON.stringify({deleted:!0})}),Fe.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{_h.logOut()},1e3))}render(){const r=ye.getPrivKey();let t;r&&(t=cu.nsecEncode(r));const n=ye.getPubKey(),i=cu.npubEncode(n),s=!!ye.getPrivKey();return v(tt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("account")}),s?v("p",{children:[v("b",{children:be("save_backup_of_privkey_first")})," ",be("otherwise_cant_log_in_again")]}):null,v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.onLogoutClick(s),children:be("log_out")}),v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:be("switch_account")})]}),this.state.showSwitchAccount?eG`
                <p>
                  <${wAe} />
                </p>
                <p>
                  <a href="" onClick=${o=>this.onExtensionLoginClick(o)}>
                    ${be("nostr_extension_login")}
                  </a>
                </p>
              `:"",v("h3",{children:be("public_key")}),v("p",{children:v("small",{children:i})}),v("div",{className:"flex gap-2 my-2",children:[v(Wi,{className:"btn btn-neutral btn-sm",copyStr:i,text:"Copy npub"}),v(Wi,{className:"btn btn-neutral btn-sm",copyStr:n,text:"Copy hex"})]}),v("h3",{children:be("private_key")}),v("div",{className:"flex gap-2 my-2",children:r?v(tt,{children:[v(Wi,{className:"btn btn-neutral btn-sm",copyStr:t,text:"Copy nsec"}),v(Wi,{className:"btn btn-neutral btn-sm",copyStr:r,text:"Copy hex"})]}):v("p",{children:be("private_key_not_present_good")})}),r?v("p",{children:be("private_key_warning")}):"",Ir.isStandalone()?v(tt,{children:[v("h3",{children:be("delete_account")}),v("p",{children:v("button",{className:"btn btn-sm btn-danger",onClick:()=>this.deleteAccount(),children:be("delete_account")})})]}):null]})})}}const PAe=()=>{const[e,r]=Ne(!1);return xt(()=>{var t;(t=_h.public)==null||t.get("settings/colorScheme",()=>{}),De.get("showConnectedRelays").on(r)},[]),v(tt,{children:v("div",{class:"centered-container",children:[v("h3",{children:be("appearance")}),v("p",{children:[v("input",{className:"checkbox",type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:e,onChange:t=>{De.get("showConnectedRelays").put(t.currentTarget.checked)}}),v("label",{htmlFor:"showConnectedRelays",children:[" ",be("show_connected_relays_in_header")]})]})]})})};class NAe extends Wn{profileExportJson(){const r=ye.getPubKey();let t=[];const n=Fe.db.findOne({kind:0,pubkey:r}),i=Fe.db.findOne({kind:3,pubkey:r});return n&&t.push(n),i&&t.push(i),t=JSON.stringify(t,null,2),t}async exportMyEvents(){console.log("exporting my events");const r=ye.getPubKey(),t=[];let n=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await il.db.events.where({pubkey:r}).each(i=>{t.push(i),n++}),this.setState({saveMessage:`Found ${n} events`,downloadMyEventsMessage:null}),JSON.stringify(t)}render(){return v(tt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("backup")}),v("h3",{children:be("save")}),v("p",{children:[be("profile")," & ",be("follows"),":"]}),v("p",{children:[v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:be("download")}),v(Wi,{text:be("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),v("p",{children:[be("your_events"),":"]}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||be("download")})}),this.state.saveMessage&&v("p",{children:this.state.saveMessage}),this.state.saveError&&v("p",{class:"warning",children:this.state.saveError}),v("h3",{children:be("load")}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),v("p",{children:v("textarea",{className:"textarea",onInput:r=>this.import(r.target.value),placeholder:be("paste_event_json")})}),this.state.loadError&&v("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&v("p",{class:"positive",children:be("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&v(tt,{children:[v("p",{class:"positive",children:be("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(r=>v("div",{className:"profile-link-container",children:[v(Kt,{href:`/${ye.toNostrBech32Address(r,"npub")}`,className:"profile-link",children:[v(Ki,{str:r,width:40}),v(br,{pub:r})]}),v(Mc,{id:r})]}))]})]})})}async onClickDownload(r,t){try{this.setState({saveMessage:null,saveError:null});const n=await t(),i="data:text/json;charset=utf-8,"+encodeURIComponent(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove()}catch(n){console.error(n),this.setState({saveError:n.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=t=>{var s;const i=(s=t.target.files)==null?void 0:s[0];if(i){const o=new FileReader;o.onload=()=>{this.import(o.result)},o.readAsText(i)}},r.click()}import(r){var t;if(!r||r.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let n=JSON.parse(r);Array.isArray(n)||(n=[n]);for(const i of n){if(!i.sig)continue;Fe.publish(i);const s=ye.getPubKey();if(i.pubkey===s&&i.kind===3){const o=i.tags.filter(u=>u[0]==="p").map(u=>u[1]),a=(((t=Fe.db.findOne({kind:3,pubkey:s}))==null?void 0:t.tags)||[]).filter(u=>u[0]==="p").map(u=>u[1]),l=o.filter(u=>!a.includes(u));ut.setFollowed(l),this.setState({restoredFollows:l})}}this.setState({loadError:null,importedEvents:n.length})}catch(n){this.setState({loadError:n.message})}}}class RAe extends Wn{constructor(){super(),this.state={settings:{}}}componentDidMount(){De.get("settings").on(this.inject())}render(){const r=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],t=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return v(tt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("content")}),v("h3",{children:be("notes")}),r.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>De.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n)),v("h3",{children:be("media")}),t.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>De.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n))]})})}}class DAe extends Wn{render(){const r=(n,i,s)=>v("p",{children:[v("input",{type:"checkbox",id:n,checked:this.state[n]===void 0?s:this.state[n],onChange:o=>{const a=o.target.checked;De.get("dev").get(n).put(a)}}),v("label",{htmlFor:n,children:i})]}),t=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexed03",label:"Use central index server for kinds 0 and 3",defaultValue:!0},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return v(tt,{children:v("div",{class:"centered-container",children:[v("h3",{children:"Developer"}),v("p",{children:"Settings intended for Dpeep developers."}),t.map(({key:n,label:i,defaultValue:s})=>r(n,i,s))]})})}componentDidMount(){De.get("dev").on(this.sub(r=>this.setState(r)))}}class BAe extends Wn{constructor(){super(...arguments);le(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});le(this,"checkAvailabilityFromAPI",Cn.debounce(async t=>{const n=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(t)}`);if(t===this.state.newUserName)if(n.status<500){const i=await n.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(t,n=!0){return v(tt,{children:[v("p",{children:["Username: ",v("b",{children:t})]}),v("p",{children:["Short link:"," ",n?v("a",{href:`https://iris.to/${t}`,onClick:i=>{i.preventDefault(),Tr(`/${t}`)},children:["iris.to/",t]}):v(tt,{children:["iris.to/",t]})]}),v("p",{children:["Nostr address (nip05): ",v("b",{children:[t,"@iris.to"]})]})]})}render(){let t;if(this.state.irisToActive){const n=this.state.profile.nip05.split("@")[0];t=this.renderAccountName(n)}else this.state.existing&&this.state.existing.confirmed?t=v("div",{children:[v("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),v("p",{children:v(yp,{onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?t=v("div",{children:[v("p",{className:"text-iris-green",children:["Username iris.to/",v("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),v("p",{children:v(yp,{onClick:()=>this.enableReserved(),children:"Yes please"})}),v("p",{children:v(yp,{onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?t=v("div",{className:"text-iris-red",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=n=>this.register(n),t=v(tt,{children:[v("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),v("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):t=v("div",{children:[v("p",{children:"Register an Iris username (iris.to/username)"}),v("form",{onSubmit:n=>this.showChallenge(n),children:[v("div",{className:"flex gap-2",children:[v("input",{className:"input",type:"text",placeholder:"Username",value:this.state.newUserName,onInput:n=>this.onNewUserNameChange(n)}),v("button",{className:"btn btn-primary",type:"submit",children:"Register"})]}),v("p",{children:this.state.newUserNameValid?v(tt,{children:[v("span",{className:"text-iris-green",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):v("span",{className:"text-iris-red",children:this.state.invalidUsernameMessage})})]})]});return v(tt,{children:[v("h3",{children:"Iris.to account"}),t,v("p",{children:v("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})}async onNewUserNameChange(t){const n=t.target.value;if(n.length===0){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:""});return}if(n.length<8||n.length>15){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 8 and 15 characters"});return}if(!n.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:n,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(n)}showChallenge(t){t.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(t){console.log("register",t);const n=ye.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};i.id=Fe.getEventHash(i),i.sig=await ye.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:t})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(o=>{this.setState({error:o.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const t=this.state.existing.name+"@iris.to",n=setTimeout(()=>{ut.setMetadata({nip05:t})},2e3);ut.getProfile(ye.getPubKey(),i=>{i&&(clearTimeout(n),i.nip05!==t&&(i.nip05=t,ut.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const t=ye.getPubKey(),n={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Fe.getEventHash(n),n.sig=await ye.sign(n);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const t=ye.getPubKey(),n={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Fe.getEventHash(n),n.sig=await ye.sign(n);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const t=ye.getPubKey();ut.getProfile(t,n=>{const i=n&&n.nip05&&n.nip05valid&&n.nip05.endsWith("@iris.to");this.setState({profile:n,irisToActive:i}),n&&!i&&this.checkExistingAccount(t)},!0),this.checkExistingAccount(t)}async checkExistingAccount(t){const n=await fetch(`https://api.iris.to/user/find?public_key=${t}`);if(n.status===200){const i=await n.json();this.setState({existing:i})}}}const MAe=()=>v(tt,{children:v("div",{class:"centered-container",children:[v("h3",{children:be("language")}),v("div",{class:"centered-container",children:Object.keys(Cy).map(e=>{let r;return e==jo?r=v("input",{type:"radio",name:"language",id:e,onChange:t=>A8(t),value:e,checked:!0}):r=v("input",{type:"radio",name:"language",id:e,onChange:t=>A8(t),value:e}),v(tt,{children:[r,v("label",{for:e,children:[" ",Cy[e]]}),v("br",{})]},e)})})]})});function A8(e){const r=e.target.value;qd.indexOf(r)>=0&&(localStorage.setItem("language",r),location.reload())}const LAe=()=>{const[e,r]=Ne(Array.from(on.relays.values())),[t,n]=Ne([]),[i,s]=Ne("");xt(()=>{const c=setInterval(()=>{r(Array.from(on.relays.values()))},2e3);return()=>clearInterval(c)}),xt(()=>{n(on.getPopularRelays())},[]);const o=c=>{De.get("relays").get(c.url).put(null),on.remove(c.url)},a=c=>c.includes("://")?c:`wss://${c}`,l=(c,d)=>{const y=a(d);De.get("relays").get(y).put({enabled:!0,newRelayUrlWithProtocol:y}),c.preventDefault(),on.add(y),s("")},u=c=>{try{return Ut.relayPool.relayByUrl.get(c.url).status}catch{return 3}},h=c=>{switch(u(c)){case 0:return"text-iris-yellow";case 1:return"text-iris-green";case 2:return"text-iris-yellow";case 3:return"";default:return"status"}};return v("div",{className:"centered-container",children:[v("h2",{children:be("network")}),v("div",{className:"flex flex-col gap-2",children:[e.map(c=>v("div",{className:"flex gap-2 flex-row peer",children:[v("div",{className:"flex-1 truncate max-w-[60vw]",children:[v("span",{className:h(c),children:" "}),c.url]},c.url),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>o(c),children:be("remove")}),v("input",{className:"checkbox",type:"checkbox",checked:c.enabled!==!1,onChange:()=>{c.enabled=c.enabled===!1,c.enabled?on.enable(c.url):on.disable(c.url)}})]})),v("div",{className:"flex flex-row peer gap-2",children:[v("div",{className:"flex-cell",children:v("input",{className:"input",id:"new-relay-url",type:"text",placeholder:be("new_relay_url"),value:i,onChange:c=>s(c.target.value)})},"new"),v("div",{className:"flex-cell no-flex",children:v("button",{className:"btn btn-neutral",onClick:c=>l(c,i),children:be("add")})})]}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>on.saveToContacts(),children:be("save_relays_publicly")}),v("button",{className:"btn btn-neutral",onClick:()=>on.restoreDefaults(),children:be("restore_defaults")})]})]}),v("h3",{children:be("popular_relays")}),v("div",{className:"flex flex-col gap-2",children:[v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:be("users")}),v("div",{className:"flex-grow",children:"URL"})]}),t.map(c=>v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:c.users}),v("div",{className:"flex-grow truncate max-w-[60vw]",children:c.url}),v("div",{className:"flex-initial",children:v("button",{className:"btn btn-sm btn-neutral",onClick:d=>l(d,c.url),children:be("add")})})]},c.url))]})]})},FAe=()=>{const[e,r]=Ne("USD"),[t,n]=Ne(1e3);xt(()=>{De.get("displayCurrency").on(s=>{r(s)})},[]),xt(()=>{De.get("defaultZapAmount").on(s=>{n(s)})});const i=s=>{const a=s.target.value;De.get("displayCurrency").put(a)};return v(tt,{children:v("div",{class:"centered-container",children:[v("h3",{children:be("payments")}),v("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",v("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),v("p",{children:[v("label",{for:"displayCurrency",children:be("display_currency")}),v("select",{className:"select",id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[v("option",{value:"USD",children:"USD"}),v("option",{value:"EUR",children:"EUR"}),v("option",{value:"JPY",children:"JPY"}),v("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),v("p",{children:[v("label",{for:"defaultZapAmount",children:[be("default_zap_amount")," (sats):"]}),v("input",{className:"input",type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:t,onChange:s=>{De.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class jAe extends Wn{constructor(){super();le(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let t=!1;const n=this.state.blockedUsers.map(s=>{const o=ye.toNostrBech32Address(s,"npub");if(o)return t=!0,v("div",{children:v(Kt,{href:`/${o}`,children:v(br,{pub:s})})},s)}),i=Array.from(ut.usersByFollowDistance.entries()).slice(1);return v(tt,{children:v("div",{class:"centered-container",children:[v("h2",{children:be("social_network")}),v("h3",{children:"Stored on your device"}),v("p",{children:["Total size: ",i.reduce((s,o)=>s+o[1].size,0)," users"]}),v("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>v("div",{children:[s[0]||be("unknown"),": ",s[1].size," users"]})),v("p",{children:"Filter incoming events by follow distance:"}),v("select",{className:"select",value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const o=s.target;De.get("globalFilter").get("maxFollowDistance").put(parseInt(o.value))},children:[v("option",{value:"0",children:"Off"}),v("option",{value:"1",children:"1"}),v("option",{value:"2",children:"2"}),v("option",{value:"3",children:"3"}),v("option",{value:"4",children:"4"}),v("option",{value:"5",children:"5"}),v("option",{value:"6",children:"6"})]}),v("p",{children:"Minimum number of followers at maximum follow distance:"}),v("input",{className:"input",type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||Fe.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const o=s.target;De.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(o.value))}}),v("h3",{children:be("blocked_users")}),!t&&be("none"),v("p",{children:v("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?be("hide"):be("show")," ",n.length]})}),this.state.showBlockedUsers&&n]})})}componentDidMount(){ut.getBlockedUsers(t=>{this.setState({blockedUsers:Array.from(t)})}),De.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class zAe extends Wn{constructor(){super();le(this,"content","");le(this,"pages",{account:CAe,network:LAe,appearance:PAe,language:MAe,content:RAe,payments:FAe,backup:NAe,social_network:jAe,iris_account:BAe,dev:DAe});this.content="home"}render(){const t=this.pages[this.props.id]||this.pages.account;return v("div",{className:"prose",children:v(t,{})})}}const sw={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(sw.iris_account="iris.to");class HAe extends Wn{menuLinkClicked(r,t){t.preventDefault(),De.get("toggleSettingsMenu").put(!1),De.get("scrollUp").put(!0),Tr(`/settings/${r}`)}render(){const r=this.props.activePage||"account";return v("div",{className:`flex-col w-full md:w-48 flex-shrink-0 ${this.props.activePage?"hidden md:flex":"flex"}`,children:Object.keys(sw).map(t=>{if(sw[t])return v("a",{href:"#",className:`btn inline-flex w-auto flex items-center p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900 ${r===t&&window.innerWidth>624?"active":""}`,onClick:n=>this.menuLinkClicked(t,n),children:[v("span",{class:"text",children:be(sw[t])}),v(ft,{when:t==="language",children:v(EH,{width:16})})]},t)})})}}const UAe=e=>v(tt,{children:[v(bu,{}),v("div",{className:"flex flex-row px-2 md:px-0",children:[v(HAe,{activePage:e.page}),v("div",{className:e.page?"":"hidden md:flex",children:v(zAe,{id:e.page})})]})]});class WAe extends Wn{render(){return v(tt,{children:[v(bu,{}),v("div",{className:"main-view",id:"settings",children:v("div",{className:"centered-container mobile-padding15",children:[v("h2",{children:be("subscribe")}),v("h3",{children:"Iris Supporter"}),v("p",{children:"Support open source development and get extra features!"}),v("p",{children:v("ul",{children:[v("li",{children:"Iris Supporter Badge"}),v("li",{children:"Purple checkmark on Iris"}),v("li",{children:"High-quality automatic translations (via deepl.com)"}),v("li",{children:"Iris Supporters' private group chat"}),v("li",{children:"More features to come!"})]})}),v("p",{children:[v("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),v("label",{htmlFor:"subscription_annually",children:[v("b",{children:"8  / month"})," charged annually (96  / year)"]})]}),v("p",{children:[v("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),v("label",{htmlFor:"subscription_monthly",children:[v("b",{children:"10  / month"})," charged monthly (120  / year)"]})]}),v("p",{children:v(yp,{children:"Subscribe"})}),v("h3",{children:"Iris Titan"}),v("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",v("ul",{children:[v("li",{children:"Iris Titan Badge"}),v("li",{children:"Iris Titans private group chat"}),v("li",{children:"Priority support"})]})]}),v("p",{children:[v("b",{children:"1000 "})," one-time payment."]}),v("p",{children:v(yp,{children:"Subscribe"})}),v("br",{}),v("br",{})]})})]})}}class KAe extends wu{constructor(){super(),this.class="public-messages-view"}renderView(){return eG`
      <div id="message-list" class="centered-container">
        <${Am} standalone=${!0} showFiles=${!0} torrentId=${this.props.id} />
      </div>
    `}}function qAe(){return xt(()=>{let e=ye.getPubKey();return e&&Vt.init(e),()=>{}},[]),null}const VAe=({view:e,me:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v("div",{className:"flex flex-wrap gap-4",children:[v("span",{className:"text-neutral-500",children:"View:"}),v(ft,{when:!r,children:v(Kt,{href:t({view:"path"}),className:e=="path"?n:i,children:be("Path")})}),v(Kt,{href:t({view:"graph"}),className:e=="graph"?n:i,children:be("Graph")}),v(Kt,{href:t({view:"list"}),className:e=="list"?n:i,children:be("List")})]})};let tG=!0;const rG=function(){tG=!1,window.removeEventListener("popstate",rG)};window.addEventListener("popstate",rG);const GAe=e=>{const[r,t]=Ne(null);let n=0;xt(()=>(window.addEventListener("scroll",i),s(),()=>{r&&r.disconnect(),window.removeEventListener("scroll",i)}),[]);let i=Cn.debounce(()=>{const a=window.scrollY||document.documentElement.scrollTop,u={...window.history.state,scrollPosition:a};window.history.replaceState(u,"")},100);function s(a=!0){var h,c;const l=window.history.state,u=(h=window.history.state)==null?void 0:h.previousState;if(!tG&&l!==u)a&&o(),n||(n=(c=window.history.state)==null?void 0:c.scrollPosition),n&&window.scrollTo(0,n);else{const y={...window.history.state||{},previousState:l};window.history.replaceState(y,"")}}let o=()=>{t(new ResizeObserver(a=>{a.forEach(()=>{s(!1)})})),r==null||r.observe(document.body),setTimeout(()=>{r&&r.disconnect()},1e3)};return v(tt,{children:v("div",{children:v(gV,{children:e.children})})})},YAe=({entitytype:e,dir:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v(ft,{when:r=="out",children:v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Subject:"}),v(Kt,{href:t({entitytype:"key"}),className:e=="key"?n:i,children:be("Profile")}),v(Kt,{href:t({entitytype:"item"}),className:e=="item"?n:i,children:be("Post")})]})})},nG=({dir:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:[be("Direction"),":"]}),v(Kt,{href:r({dir:"out"}),className:e=="out"?t:n,children:be("Outgoing")}),v(Kt,{href:r({dir:"in"}),className:e=="in"?t:n,children:be("Incoming")})]})},ZAe=({trusttype:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Value:"}),v(Kt,{href:r({trusttype:"both"}),className:e=="both"?t:n,children:be("Both")}),v(Kt,{href:r({trusttype:"trust"}),className:e=="trust"?t:n,children:be("Trust")}),v(Kt,{href:r({trusttype:"distrust"}),className:e=="distrust"?t:n,children:be("Distrust")})]})};function XAe(e,r){return!r||e.length==0?[...e]:e.filter(n=>{var s,o;let i=en.getDefaultProfile(n.id);return!!((s=i==null?void 0:i.name)!=null&&s.toLowerCase().includes(r.toLowerCase())||(o=i==null?void 0:i.display_name)!=null&&o.toLowerCase().includes(r.toLowerCase()))})}function JAe(e,r){return e.degree<r.degree?-1:e.degree>r.degree?1:0}const iG=(e,r,t=!0)=>!e||!r?null:v("div",{className:"text-sm flex flex-2 gap-2",children:[VP(e,r,t),GP(e,r,t)]}),QAe=({props:e})=>{const[r,t]=Ne([]),[n,i]=Ne([]),[s]=Ne([]);xt(()=>{let u=pt(e.hexKey);if(!u)return;let h=Uee(e.entitytype,1),c=h1t(e.trusttype,void 0);return o(u,e.dir,h,c),()=>{s.forEach(d=>d==null?void 0:d())}},[e.npub,e.dir,e.entitytype,e.trusttype]),xt(()=>{let u=XAe(r,e.filter);u.length==0&&n.length==0||i(u)},[e.filter,r]);async function o(u,h,c,d){let y=[];h=="out"&&(y=Vt.g.outTrustById(u,c,d)),e.dir=="in"&&(y=Vt.g.trustedBy(u,zo.Key,d));let w=y.map(b=>Sn(b.id));await en.getProfiles(w),y=y.sort(JAe),t(y)}const a=()=>{let u=pt(e.hexKey);return n.length==0?v("div",{className:"text-center",children:be("No results")}):v(tt,{children:n.map(h=>l(h,u))})},l=(u,h)=>{const c=Sn(u.id),d=u.degree,y=u.score,w=ye.toNostrBech32Address(c,"npub");let b="",T="";if(e.dir=="in"){const x=u.out[h];x&&(b=`text-${Wy(x.val)}-500 text-2xl`,T="")}else{const x=u.in[h];x&&(b=`text-${Wy(x.val)}-500 text-2xl`,T="")}return v("div",{className:"flex w-full py-2",children:[v("div",{className:"flex-0 self-center px-4",children:v("i",{className:b,children:T})}),v(Kt,{href:e.setSearch({npub:w}),className:"flex flex-1 gap-2",children:[v(Ki,{str:w,width:49}),v("div",{children:[v(br,{pub:w,hexKey:c}),v("br",{}),v("span",{className:"text-sm",children:["Degree ",d]})]})]}),iG(y,w)]},c)};return e.npub?v(tt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(ft,{when:e.entitytype=="key",children:v(nG,{dir:e.dir,setSearch:e.setSearch})}),v(ZAe,{trusttype:e.trusttype,setSearch:e.setSearch}),v(YAe,{entitytype:e.entitytype,dir:e.dir,setSearch:e.setSearch})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-col w-full gap-4",children:v(GAe,{children:a()})})]}):null};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Q_(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var O8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c$={},eOe={get exports(){return c$},set exports(e){c$=e}},fA={},tOe={get exports(){return fA},set exports(e){fA=e}},hA={},rOe={get exports(){return hA},set exports(e){hA=e}},Jb=function(e){return e&&e.Math==Math&&e},bn=Jb(typeof globalThis=="object"&&globalThis)||Jb(typeof window=="object"&&window)||Jb(typeof self=="object"&&self)||Jb(typeof O8=="object"&&O8)||function(){return this}()||Function("return this")(),xr=function(e){try{return!!e()}catch{return!0}},nOe=xr,Nm=!nOe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),iOe=Nm,sG=Function.prototype,C8=sG.apply,P8=sG.call,$v=typeof Reflect=="object"&&Reflect.apply||(iOe?P8.bind(C8):function(){return P8.apply(C8,arguments)}),oG=Nm,aG=Function.prototype,dA=aG.call,sOe=oG&&aG.bind.bind(dA,dA),Br=oG?sOe:function(e){return function(){return dA.apply(e,arguments)}},lG=Br,oOe=lG({}.toString),aOe=lG("".slice),$u=function(e){return aOe(oOe(e),8,-1)},lOe=$u,uOe=Br,n4=function(e){if(lOe(e)==="Function")return uOe(e)},pA=typeof document=="object"&&document.all,cOe=typeof pA>"u"&&pA!==void 0,uG={all:pA,IS_HTMLDDA:cOe},cG=uG,fOe=cG.all,wn=cG.IS_HTMLDDA?function(e){return typeof e=="function"||e===fOe}:function(e){return typeof e=="function"},Dh={},hOe=xr,ni=!hOe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),dOe=Nm,Qb=Function.prototype.call,mi=dOe?Qb.bind(Qb):function(){return Qb.apply(Qb,arguments)},Rm={},fG={}.propertyIsEnumerable,hG=Object.getOwnPropertyDescriptor,pOe=hG&&!fG.call({1:2},1);Rm.f=pOe?function(r){var t=hG(this,r);return!!t&&t.enumerable}:fG;var Bh=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},vOe=Br,gOe=xr,yOe=$u,oS=Object,mOe=vOe("".split),ex=gOe(function(){return!oS("z").propertyIsEnumerable(0)})?function(e){return yOe(e)=="String"?mOe(e,""):oS(e)}:oS,Dm=function(e){return e==null},bOe=Dm,wOe=TypeError,Bm=function(e){if(bOe(e))throw wOe("Can't call method on "+e);return e},$Oe=ex,_Oe=Bm,Oa=function(e){return $Oe(_Oe(e))},N8=wn,dG=uG,xOe=dG.all,bi=dG.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:N8(e)||e===xOe}:function(e){return typeof e=="object"?e!==null:N8(e)},Wr={},aS=Wr,lS=bn,EOe=wn,R8=function(e){return EOe(e)?e:void 0},hs=function(e,r){return arguments.length<2?R8(aS[e])||R8(lS[e]):aS[e]&&aS[e][r]||lS[e]&&lS[e][r]},SOe=Br,an=SOe({}.isPrototypeOf),qc=typeof navigator<"u"&&String(navigator.userAgent)||"",pG=bn,uS=qc,D8=pG.process,B8=pG.Deno,M8=D8&&D8.versions||B8&&B8.version,L8=M8&&M8.v8,ua,f$;L8&&(ua=L8.split("."),f$=ua[0]>0&&ua[0]<4?1:+(ua[0]+ua[1]));!f$&&uS&&(ua=uS.match(/Edge\/(\d+)/),(!ua||ua[1]>=74)&&(ua=uS.match(/Chrome\/(\d+)/),ua&&(f$=+ua[1])));var _v=f$,F8=_v,kOe=xr,xv=!!Object.getOwnPropertySymbols&&!kOe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&F8&&F8<41}),TOe=xv,vG=TOe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",IOe=hs,AOe=wn,OOe=an,COe=vG,POe=Object,Mm=COe?function(e){return typeof e=="symbol"}:function(e){var r=IOe("Symbol");return AOe(r)&&OOe(r.prototype,POe(e))},NOe=String,Ev=function(e){try{return NOe(e)}catch{return"Object"}},ROe=wn,DOe=Ev,BOe=TypeError,Bs=function(e){if(ROe(e))return e;throw BOe(DOe(e)+" is not a function")},MOe=Bs,LOe=Dm,i4=function(e,r){var t=e[r];return LOe(t)?void 0:MOe(t)},cS=mi,fS=wn,hS=bi,FOe=TypeError,jOe=function(e,r){var t,n;if(r==="string"&&fS(t=e.toString)&&!hS(n=cS(t,e))||fS(t=e.valueOf)&&!hS(n=cS(t,e))||r!=="string"&&fS(t=e.toString)&&!hS(n=cS(t,e)))return n;throw FOe("Can't convert object to primitive value")},Lc={},zOe={get exports(){return Lc},set exports(e){Lc=e}},HOe=!0,j8=bn,UOe=Object.defineProperty,WOe=function(e,r){try{UOe(j8,e,{value:r,configurable:!0,writable:!0})}catch{j8[e]=r}return r},KOe=bn,qOe=WOe,z8="__core-js_shared__",VOe=KOe[z8]||qOe(z8,{}),s4=VOe,H8=s4;(zOe.exports=function(e,r){return H8[e]||(H8[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var GOe=Bm,YOe=Object,Ms=function(e){return YOe(GOe(e))},ZOe=Br,XOe=Ms,JOe=ZOe({}.hasOwnProperty),qn=Object.hasOwn||function(r,t){return JOe(XOe(r),t)},QOe=Br,e5e=0,t5e=Math.random(),r5e=QOe(1 .toString),tx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+r5e(++e5e+t5e,36)},n5e=bn,i5e=Lc,U8=qn,s5e=tx,o5e=xv,a5e=vG,Yd=n5e.Symbol,dS=i5e("wks"),l5e=a5e?Yd.for||Yd:Yd&&Yd.withoutSetter||s5e,ln=function(e){return U8(dS,e)||(dS[e]=o5e&&U8(Yd,e)?Yd[e]:l5e("Symbol."+e)),dS[e]},u5e=mi,W8=bi,K8=Mm,c5e=i4,f5e=jOe,h5e=ln,d5e=TypeError,p5e=h5e("toPrimitive"),v5e=function(e,r){if(!W8(e)||K8(e))return e;var t=c5e(e,p5e),n;if(t){if(r===void 0&&(r="default"),n=u5e(t,e,r),!W8(n)||K8(n))return n;throw d5e("Can't convert object to primitive value")}return r===void 0&&(r="number"),f5e(e,r)},g5e=v5e,y5e=Mm,rx=function(e){var r=g5e(e,"string");return y5e(r)?r:r+""},m5e=bn,q8=bi,vA=m5e.document,b5e=q8(vA)&&q8(vA.createElement),o4=function(e){return b5e?vA.createElement(e):{}},w5e=ni,$5e=xr,_5e=o4,gG=!w5e&&!$5e(function(){return Object.defineProperty(_5e("div"),"a",{get:function(){return 7}}).a!=7}),x5e=ni,E5e=mi,S5e=Rm,k5e=Bh,T5e=Oa,I5e=rx,A5e=qn,O5e=gG,V8=Object.getOwnPropertyDescriptor;Dh.f=x5e?V8:function(r,t){if(r=T5e(r),t=I5e(t),O5e)try{return V8(r,t)}catch{}if(A5e(r,t))return k5e(!E5e(S5e.f,r,t),r[t])};var C5e=xr,P5e=wn,N5e=/#|\.prototype\./,Lm=function(e,r){var t=D5e[R5e(e)];return t==M5e?!0:t==B5e?!1:P5e(r)?C5e(r):!!r},R5e=Lm.normalize=function(e){return String(e).replace(N5e,".").toLowerCase()},D5e=Lm.data={},B5e=Lm.NATIVE="N",M5e=Lm.POLYFILL="P",yG=Lm,G8=n4,L5e=Bs,F5e=Nm,j5e=G8(G8.bind),Vc=function(e,r){return L5e(e),r===void 0?e:F5e?j5e(e,r):function(){return e.apply(r,arguments)}},io={},z5e=ni,H5e=xr,mG=z5e&&H5e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),U5e=bi,W5e=String,K5e=TypeError,so=function(e){if(U5e(e))return e;throw K5e(W5e(e)+" is not an object")},q5e=ni,V5e=gG,G5e=mG,e1=so,Y8=rx,Y5e=TypeError,pS=Object.defineProperty,Z5e=Object.getOwnPropertyDescriptor,vS="enumerable",gS="configurable",yS="writable";io.f=q5e?G5e?function(r,t,n){if(e1(r),t=Y8(t),e1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&yS in n&&!n[yS]){var i=Z5e(r,t);i&&i[yS]&&(r[t]=n.value,n={configurable:gS in n?n[gS]:i[gS],enumerable:vS in n?n[vS]:i[vS],writable:!1})}return pS(r,t,n)}:pS:function(r,t,n){if(e1(r),t=Y8(t),e1(n),V5e)try{return pS(r,t,n)}catch{}if("get"in n||"set"in n)throw Y5e("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var X5e=ni,J5e=io,Q5e=Bh,_u=X5e?function(e,r,t){return J5e.f(e,r,Q5e(1,t))}:function(e,r,t){return e[r]=t,e},t1=bn,eCe=$v,tCe=n4,rCe=wn,nCe=Dh.f,iCe=yG,Td=Wr,sCe=Vc,Id=_u,Z8=qn,oCe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return eCe(e,this,arguments)};return r.prototype=e.prototype,r},Nt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?t1:i?t1[t]:(t1[t]||{}).prototype,a=n?Td:Td[t]||Id(Td,t,{})[t],l=a.prototype,u,h,c,d,y,w,b,T,x;for(d in r)u=iCe(n?d:t+(i?".":"#")+d,e.forced),h=!u&&o&&Z8(o,d),w=a[d],h&&(e.dontCallGetSet?(x=nCe(o,d),b=x&&x.value):b=o[d]),y=h&&b?b:r[d],!(h&&typeof w==typeof y)&&(e.bind&&h?T=sCe(y,t1):e.wrap&&h?T=oCe(y):s&&rCe(y)?T=tCe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&Id(T,"sham",!0),Id(a,d,T),s&&(c=t+"Prototype",Z8(Td,c)||Id(Td,c,{}),Id(Td[c],d,y),e.real&&l&&(u||!l[d])&&Id(l,d,y)))},aCe=Nt,lCe=ni,X8=io.f;aCe({target:"Object",stat:!0,forced:Object.defineProperty!==X8,sham:!lCe},{defineProperty:X8});var uCe=Wr,bG=uCe.Object,cCe=rOe.exports=function(r,t,n){return bG.defineProperty(r,t,n)};bG.defineProperty.sham&&(cCe.sham=!0);var fCe=hA,wG=fCe,hCe=wG,dCe=hCe,pCe=dCe,vCe=pCe;(function(e){e.exports=vCe})(tOe);(function(e){e.exports=fA})(eOe);var nx=Yt(c$),qy={},gCe={get exports(){return qy},set exports(e){qy=e}},gA={},yCe={get exports(){return gA},set exports(e){gA=e}},mCe=$u,Gc=Array.isArray||function(r){return mCe(r)=="Array"},bCe=Math.ceil,wCe=Math.floor,$Ce=Math.trunc||function(r){var t=+r;return(t>0?wCe:bCe)(t)},_Ce=$Ce,ix=function(e){var r=+e;return r!==r||r===0?0:_Ce(r)},xCe=ix,ECe=Math.min,SCe=function(e){return e>0?ECe(xCe(e),9007199254740991):0},kCe=SCe,oo=function(e){return kCe(e.length)},TCe=TypeError,ICe=9007199254740991,a4=function(e){if(e>ICe)throw TCe("Maximum allowed index exceeded");return e},ACe=rx,OCe=io,CCe=Bh,Sv=function(e,r,t){var n=ACe(r);n in e?OCe.f(e,n,CCe(0,t)):e[n]=t},PCe=ln,NCe=PCe("toStringTag"),$G={};$G[NCe]="z";var l4=String($G)==="[object z]",RCe=l4,DCe=wn,ow=$u,BCe=ln,MCe=BCe("toStringTag"),LCe=Object,FCe=ow(function(){return arguments}())=="Arguments",jCe=function(e,r){try{return e[r]}catch{}},xu=RCe?ow:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=jCe(r=LCe(e),MCe))=="string"?t:FCe?ow(r):(n=ow(r))=="Object"&&DCe(r.callee)?"Arguments":n},zCe=Br,HCe=wn,yA=s4,UCe=zCe(Function.toString);HCe(yA.inspectSource)||(yA.inspectSource=function(e){return UCe(e)});var _G=yA.inspectSource,WCe=Br,KCe=xr,xG=wn,qCe=xu,VCe=hs,GCe=_G,EG=function(){},YCe=[],SG=VCe("Reflect","construct"),u4=/^\s*(?:class|function)\b/,ZCe=WCe(u4.exec),XCe=!u4.exec(EG),Ag=function(r){if(!xG(r))return!1;try{return SG(EG,YCe,r),!0}catch{return!1}},kG=function(r){if(!xG(r))return!1;switch(qCe(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return XCe||!!ZCe(u4,GCe(r))}catch{return!0}};kG.sham=!0;var sx=!SG||KCe(function(){var e;return Ag(Ag.call)||!Ag(Object)||!Ag(function(){e=!0})||e})?kG:Ag,J8=Gc,JCe=sx,QCe=bi,e3e=ln,t3e=e3e("species"),Q8=Array,r3e=function(e){var r;return J8(e)&&(r=e.constructor,JCe(r)&&(r===Q8||J8(r.prototype))?r=void 0:QCe(r)&&(r=r[t3e],r===null&&(r=void 0))),r===void 0?Q8:r},n3e=r3e,ox=function(e,r){return new(n3e(e))(r===0?0:r)},i3e=xr,s3e=ln,o3e=_v,a3e=s3e("species"),Fm=function(e){return o3e>=51||!i3e(function(){var r=[],t=r.constructor={};return t[a3e]=function(){return{foo:1}},r[e](Boolean).foo!==1})},l3e=Nt,u3e=xr,c3e=Gc,f3e=bi,h3e=Ms,d3e=oo,eM=a4,tM=Sv,p3e=ox,v3e=Fm,g3e=ln,y3e=_v,TG=g3e("isConcatSpreadable"),m3e=y3e>=51||!u3e(function(){var e=[];return e[TG]=!1,e.concat()[0]!==e}),b3e=function(e){if(!f3e(e))return!1;var r=e[TG];return r!==void 0?!!r:c3e(e)},w3e=!m3e||!v3e("concat");l3e({target:"Array",proto:!0,arity:1,forced:w3e},{concat:function(r){var t=h3e(this),n=p3e(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],b3e(u))for(l=d3e(u),eM(i+l),o=0;o<l;o++,i++)o in u&&tM(n,i,u[o]);else eM(i+1),tM(n,i++,u);return n.length=i,n}});var $3e=xu,_3e=String,bl=function(e){if($3e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return _3e(e)},ax={},x3e=ix,E3e=Math.max,S3e=Math.min,jm=function(e,r){var t=x3e(e);return t<0?E3e(t+r,0):S3e(t,r)},k3e=Oa,T3e=jm,I3e=oo,rM=function(e){return function(r,t,n){var i=k3e(r),s=I3e(i),o=T3e(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},c4={includes:rM(!0),indexOf:rM(!1)},zm={},A3e=Br,mS=qn,O3e=Oa,C3e=c4.indexOf,P3e=zm,nM=A3e([].push),IG=function(e,r){var t=O3e(e),n=0,i=[],s;for(s in t)!mS(P3e,s)&&mS(t,s)&&nM(i,s);for(;r.length>n;)mS(t,s=r[n++])&&(~C3e(i,s)||nM(i,s));return i},f4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],N3e=IG,R3e=f4,Hm=Object.keys||function(r){return N3e(r,R3e)},D3e=ni,B3e=mG,M3e=io,L3e=so,F3e=Oa,j3e=Hm;ax.f=D3e&&!B3e?Object.defineProperties:function(r,t){L3e(r);for(var n=F3e(t),i=j3e(t),s=i.length,o=0,a;s>o;)M3e.f(r,a=i[o++],n[a]);return r};var z3e=hs,AG=z3e("document","documentElement"),H3e=Lc,U3e=tx,iM=H3e("keys"),lx=function(e){return iM[e]||(iM[e]=U3e(e))},W3e=so,K3e=ax,sM=f4,q3e=zm,V3e=AG,G3e=o4,Y3e=lx,oM=">",aM="<",mA="prototype",bA="script",OG=Y3e("IE_PROTO"),bS=function(){},CG=function(e){return aM+bA+oM+e+aM+"/"+bA+oM},lM=function(e){e.write(CG("")),e.close();var r=e.parentWindow.Object;return e=null,r},Z3e=function(){var e=G3e("iframe"),r="java"+bA+":",t;return e.style.display="none",V3e.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(CG("document.F=Object")),t.close(),t.F},r1,aw=function(){try{r1=new ActiveXObject("htmlfile")}catch{}aw=typeof document<"u"?document.domain&&r1?lM(r1):Z3e():lM(r1);for(var e=sM.length;e--;)delete aw[mA][sM[e]];return aw()};q3e[OG]=!0;var Mh=Object.create||function(r,t){var n;return r!==null?(bS[mA]=W3e(r),n=new bS,bS[mA]=null,n[OG]=r):n=aw(),t===void 0?n:K3e.f(n,t)},Um={},X3e=IG,J3e=f4,Q3e=J3e.concat("length","prototype");Um.f=Object.getOwnPropertyNames||function(r){return X3e(r,Q3e)};var h4={},uM=jm,ePe=oo,tPe=Sv,rPe=Array,nPe=Math.max,PG=function(e,r,t){for(var n=ePe(e),i=uM(r,n),s=uM(t===void 0?n:t,n),o=rPe(nPe(s-i,0)),a=0;i<s;i++,a++)tPe(o,a,e[i]);return o.length=a,o},iPe=$u,sPe=Oa,NG=Um.f,oPe=PG,RG=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],aPe=function(e){try{return NG(e)}catch{return oPe(RG)}};h4.f=function(r){return RG&&iPe(r)=="Window"?aPe(r):NG(sPe(r))};var Wm={};Wm.f=Object.getOwnPropertySymbols;var lPe=_u,kv=function(e,r,t,n){return n&&n.enumerable?e[r]=t:lPe(e,r,t),e},uPe=io,d4=function(e,r,t){return uPe.f(e,r,t)},Km={},cPe=ln;Km.f=cPe;var cM=Wr,fPe=qn,hPe=Km,dPe=io.f,$n=function(e){var r=cM.Symbol||(cM.Symbol={});fPe(r,e)||dPe(r,e,{value:hPe.f(e)})},pPe=mi,vPe=hs,gPe=ln,yPe=kv,DG=function(){var e=vPe("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=gPe("toPrimitive");r&&!r[n]&&yPe(r,n,function(i){return pPe(t,this)},{arity:1})},mPe=l4,bPe=xu,wPe=mPe?{}.toString:function(){return"[object "+bPe(this)+"]"},$Pe=l4,_Pe=io.f,xPe=_u,EPe=qn,SPe=wPe,kPe=ln,fM=kPe("toStringTag"),Lh=function(e,r,t,n){if(e){var i=t?e:e.prototype;EPe(i,fM)||_Pe(i,fM,{configurable:!0,value:r}),n&&!$Pe&&xPe(i,"toString",SPe)}},TPe=bn,IPe=wn,hM=TPe.WeakMap,APe=IPe(hM)&&/native code/.test(String(hM)),OPe=APe,BG=bn,CPe=bi,PPe=_u,wS=qn,$S=s4,NPe=lx,RPe=zm,dM="Object already initialized",wA=BG.TypeError,DPe=BG.WeakMap,h$,Vy,d$,BPe=function(e){return d$(e)?Vy(e):h$(e,{})},MPe=function(e){return function(r){var t;if(!CPe(r)||(t=Vy(r)).type!==e)throw wA("Incompatible receiver, "+e+" required");return t}};if(OPe||$S.state){var Za=$S.state||($S.state=new DPe);Za.get=Za.get,Za.has=Za.has,Za.set=Za.set,h$=function(e,r){if(Za.has(e))throw wA(dM);return r.facade=e,Za.set(e,r),r},Vy=function(e){return Za.get(e)||{}},d$=function(e){return Za.has(e)}}else{var Ad=NPe("state");RPe[Ad]=!0,h$=function(e,r){if(wS(e,Ad))throw wA(dM);return r.facade=e,PPe(e,Ad,r),r},Vy=function(e){return wS(e,Ad)?e[Ad]:{}},d$=function(e){return wS(e,Ad)}}var Tv={set:h$,get:Vy,has:d$,enforce:BPe,getterFor:MPe},LPe=Vc,FPe=Br,jPe=ex,zPe=Ms,HPe=oo,UPe=ox,pM=FPe([].push),nc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,h,c){for(var d=zPe(l),y=jPe(d),w=LPe(u,h),b=HPe(y),T=0,x=c||UPe,A=r?x(l,b):t||o?x(l,0):void 0,_,I;b>T;T++)if((a||T in y)&&(_=y[T],I=w(_,T,d),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return _;case 6:return T;case 2:pM(A,_)}else switch(e){case 4:return!1;case 7:pM(A,_)}return s?-1:n||i?i:A}},Iv={forEach:nc(0),map:nc(1),filter:nc(2),some:nc(3),every:nc(4),find:nc(5),findIndex:nc(6),filterReject:nc(7)},ux=Nt,p4=bn,v4=mi,WPe=Br,Up=ni,Wp=xv,KPe=xr,hi=qn,qPe=an,$A=so,cx=Oa,g4=rx,VPe=bl,_A=Bh,Gy=Mh,MG=Hm,GPe=Um,LG=h4,YPe=Wm,FG=Dh,jG=io,ZPe=ax,zG=Rm,vM=kv,XPe=d4,y4=Lc,JPe=lx,HG=zm,gM=tx,QPe=ln,e4e=Km,t4e=$n,r4e=DG,n4e=Lh,UG=Tv,fx=Iv.forEach,ks=JPe("hidden"),hx="Symbol",Yy="prototype",i4e=UG.set,yM=UG.getterFor(hx),ga=Object[Yy],ah=p4.Symbol,Vg=ah&&ah[Yy],s4e=p4.TypeError,_S=p4.QObject,WG=FG.f,Bf=jG.f,KG=LG.f,o4e=zG.f,qG=WPe([].push),du=y4("symbols"),qm=y4("op-symbols"),a4e=y4("wks"),xA=!_S||!_S[Yy]||!_S[Yy].findChild,EA=Up&&KPe(function(){return Gy(Bf({},"a",{get:function(){return Bf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=WG(ga,r);n&&delete ga[r],Bf(e,r,t),n&&e!==ga&&Bf(ga,r,n)}:Bf,xS=function(e,r){var t=du[e]=Gy(Vg);return i4e(t,{type:hx,tag:e,description:r}),Up||(t.description=r),t},dx=function(r,t,n){r===ga&&dx(qm,t,n),$A(r);var i=g4(t);return $A(n),hi(du,i)?(n.enumerable?(hi(r,ks)&&r[ks][i]&&(r[ks][i]=!1),n=Gy(n,{enumerable:_A(0,!1)})):(hi(r,ks)||Bf(r,ks,_A(1,{})),r[ks][i]=!0),EA(r,i,n)):Bf(r,i,n)},m4=function(r,t){$A(r);var n=cx(t),i=MG(n).concat(ZG(n));return fx(i,function(s){(!Up||v4(VG,n,s))&&dx(r,s,n[s])}),r},l4e=function(r,t){return t===void 0?Gy(r):m4(Gy(r),t)},VG=function(r){var t=g4(r),n=v4(o4e,this,t);return this===ga&&hi(du,t)&&!hi(qm,t)?!1:n||!hi(this,t)||!hi(du,t)||hi(this,ks)&&this[ks][t]?n:!0},GG=function(r,t){var n=cx(r),i=g4(t);if(!(n===ga&&hi(du,i)&&!hi(qm,i))){var s=WG(n,i);return s&&hi(du,i)&&!(hi(n,ks)&&n[ks][i])&&(s.enumerable=!0),s}},YG=function(r){var t=KG(cx(r)),n=[];return fx(t,function(i){!hi(du,i)&&!hi(HG,i)&&qG(n,i)}),n},ZG=function(e){var r=e===ga,t=KG(r?qm:cx(e)),n=[];return fx(t,function(i){hi(du,i)&&(!r||hi(ga,i))&&qG(n,du[i])}),n};Wp||(ah=function(){if(qPe(Vg,this))throw s4e("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:VPe(arguments[0]),t=gM(r),n=function(i){this===ga&&v4(n,qm,i),hi(this,ks)&&hi(this[ks],t)&&(this[ks][t]=!1),EA(this,t,_A(1,i))};return Up&&xA&&EA(ga,t,{configurable:!0,set:n}),xS(t,r)},Vg=ah[Yy],vM(Vg,"toString",function(){return yM(this).tag}),vM(ah,"withoutSetter",function(e){return xS(gM(e),e)}),zG.f=VG,jG.f=dx,ZPe.f=m4,FG.f=GG,GPe.f=LG.f=YG,YPe.f=ZG,e4e.f=function(e){return xS(QPe(e),e)},Up&&XPe(Vg,"description",{configurable:!0,get:function(){return yM(this).description}}));ux({global:!0,constructor:!0,wrap:!0,forced:!Wp,sham:!Wp},{Symbol:ah});fx(MG(a4e),function(e){t4e(e)});ux({target:hx,stat:!0,forced:!Wp},{useSetter:function(){xA=!0},useSimple:function(){xA=!1}});ux({target:"Object",stat:!0,forced:!Wp,sham:!Up},{create:l4e,defineProperty:dx,defineProperties:m4,getOwnPropertyDescriptor:GG});ux({target:"Object",stat:!0,forced:!Wp},{getOwnPropertyNames:YG});r4e();n4e(ah,hx);HG[ks]=!0;var u4e=xv,XG=u4e&&!!Symbol.for&&!!Symbol.keyFor,c4e=Nt,f4e=hs,h4e=qn,d4e=bl,JG=Lc,p4e=XG,ES=JG("string-to-symbol-registry"),v4e=JG("symbol-to-string-registry");c4e({target:"Symbol",stat:!0,forced:!p4e},{for:function(e){var r=d4e(e);if(h4e(ES,r))return ES[r];var t=f4e("Symbol")(r);return ES[r]=t,v4e[t]=r,t}});var g4e=Nt,y4e=qn,m4e=Mm,b4e=Ev,w4e=Lc,$4e=XG,mM=w4e("symbol-to-string-registry");g4e({target:"Symbol",stat:!0,forced:!$4e},{keyFor:function(r){if(!m4e(r))throw TypeError(b4e(r)+" is not a symbol");if(y4e(mM,r))return mM[r]}});var _4e=Br,Vm=_4e([].slice),x4e=Br,bM=Gc,E4e=wn,wM=$u,S4e=bl,$M=x4e([].push),k4e=function(e){if(E4e(e))return e;if(bM(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?$M(t,i):(typeof i=="number"||wM(i)=="Number"||wM(i)=="String")&&$M(t,S4e(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(bM(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},T4e=Nt,QG=hs,eY=$v,I4e=mi,Gm=Br,tY=xr,_M=wn,xM=Mm,rY=Vm,A4e=k4e,O4e=xv,C4e=String,Sc=QG("JSON","stringify"),n1=Gm(/./.exec),EM=Gm("".charAt),P4e=Gm("".charCodeAt),N4e=Gm("".replace),R4e=Gm(1 .toString),D4e=/[\uD800-\uDFFF]/g,SM=/^[\uD800-\uDBFF]$/,kM=/^[\uDC00-\uDFFF]$/,TM=!O4e||tY(function(){var e=QG("Symbol")();return Sc([e])!="[null]"||Sc({a:e})!="{}"||Sc(Object(e))!="{}"}),IM=tY(function(){return Sc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Sc("\uDEAD")!=='"\\udead"'}),B4e=function(e,r){var t=rY(arguments),n=A4e(r);if(!(!_M(n)&&(e===void 0||xM(e))))return t[1]=function(i,s){if(_M(n)&&(s=I4e(n,this,C4e(i),s)),!xM(s))return s},eY(Sc,null,t)},M4e=function(e,r,t){var n=EM(t,r-1),i=EM(t,r+1);return n1(SM,e)&&!n1(kM,i)||n1(kM,e)&&!n1(SM,n)?"\\u"+R4e(P4e(e,0),16):e};Sc&&T4e({target:"JSON",stat:!0,arity:3,forced:TM||IM},{stringify:function(r,t,n){var i=rY(arguments),s=eY(TM?B4e:Sc,null,i);return IM&&typeof s=="string"?N4e(s,D4e,M4e):s}});var L4e=Nt,F4e=xv,j4e=xr,nY=Wm,z4e=Ms,H4e=!F4e||j4e(function(){nY.f(1)});L4e({target:"Object",stat:!0,forced:H4e},{getOwnPropertySymbols:function(r){var t=nY.f;return t?t(z4e(r)):[]}});var U4e=$n;U4e("asyncIterator");var W4e=$n;W4e("hasInstance");var K4e=$n;K4e("isConcatSpreadable");var q4e=$n;q4e("iterator");var V4e=$n;V4e("match");var G4e=$n;G4e("matchAll");var Y4e=$n;Y4e("replace");var Z4e=$n;Z4e("search");var X4e=$n;X4e("species");var J4e=$n;J4e("split");var Q4e=$n,eNe=DG;Q4e("toPrimitive");eNe();var tNe=hs,rNe=$n,nNe=Lh;rNe("toStringTag");nNe(tNe("Symbol"),"Symbol");var iNe=$n;iNe("unscopables");var sNe=bn,oNe=Lh;oNe(sNe.JSON,"JSON",!0);var aNe=Wr,lNe=aNe.Symbol,Av={},SA=ni,uNe=qn,iY=Function.prototype,cNe=SA&&Object.getOwnPropertyDescriptor,b4=uNe(iY,"name"),fNe=b4&&(function(){}).name==="something",hNe=b4&&(!SA||SA&&cNe(iY,"name").configurable),sY={EXISTS:b4,PROPER:fNe,CONFIGURABLE:hNe},dNe=xr,oY=!dNe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),pNe=qn,vNe=wn,gNe=Ms,yNe=lx,mNe=oY,AM=yNe("IE_PROTO"),kA=Object,bNe=kA.prototype,px=mNe?kA.getPrototypeOf:function(e){var r=gNe(e);if(pNe(r,AM))return r[AM];var t=r.constructor;return vNe(t)&&r instanceof t?t.prototype:r instanceof kA?bNe:null},wNe=xr,$Ne=wn,_Ne=bi,xNe=Mh,OM=px,ENe=kv,SNe=ln,TA=SNe("iterator"),aY=!1,eu,SS,kS;[].keys&&(kS=[].keys(),"next"in kS?(SS=OM(OM(kS)),SS!==Object.prototype&&(eu=SS)):aY=!0);var kNe=!_Ne(eu)||wNe(function(){var e={};return eu[TA].call(e)!==e});kNe?eu={}:eu=xNe(eu);$Ne(eu[TA])||ENe(eu,TA,function(){return this});var lY={IteratorPrototype:eu,BUGGY_SAFARI_ITERATORS:aY},TNe=lY.IteratorPrototype,INe=Mh,ANe=Bh,ONe=Lh,CNe=Av,PNe=function(){return this},NNe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=INe(TNe,{next:ANe(+!n,t)}),ONe(e,i,!1,!0),CNe[i]=PNe,e},RNe=Br,DNe=Bs,BNe=function(e,r,t){try{return RNe(DNe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},MNe=wn,LNe=String,FNe=TypeError,jNe=function(e){if(typeof e=="object"||MNe(e))return e;throw FNe("Can't set "+LNe(e)+" as a prototype")},zNe=BNe,HNe=so,UNe=jNe,uY=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=zNe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return HNe(i),UNe(s),e?t(i,s):i.__proto__=s,i}}():void 0),WNe=Nt,KNe=mi,qNe=sY,VNe=NNe,GNe=px,YNe=Lh,CM=kv,ZNe=ln,PM=Av,XNe=lY,JNe=qNe.PROPER,i1=XNe.BUGGY_SAFARI_ITERATORS,TS=ZNe("iterator"),NM="keys",s1="values",RM="entries",QNe=function(){return this},w4=function(e,r,t,n,i,s,o){VNe(t,r,n);var a=function(x){if(x===i&&d)return d;if(!i1&&x in h)return h[x];switch(x){case NM:return function(){return new t(this,x)};case s1:return function(){return new t(this,x)};case RM:return function(){return new t(this,x)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,c=h[TS]||h["@@iterator"]||i&&h[i],d=!i1&&c||a(i),y=r=="Array"&&h.entries||c,w,b,T;if(y&&(w=GNe(y.call(new e)),w!==Object.prototype&&w.next&&(YNe(w,l,!0,!0),PM[l]=QNe)),JNe&&i==s1&&c&&c.name!==s1&&(u=!0,d=function(){return KNe(c,this)}),i)if(b={values:a(s1),keys:s?d:a(NM),entries:a(RM)},o)for(T in b)(i1||u||!(T in h))&&CM(h,T,b[T]);else WNe({target:r,proto:!0,forced:i1||u},b);return o&&h[TS]!==d&&CM(h,TS,d,{name:i}),PM[r]=d,b},$4=function(e,r){return{value:e,done:r}},eRe=Oa,DM=Av,cY=Tv;io.f;var tRe=w4,o1=$4,fY="Array Iterator",rRe=cY.set,nRe=cY.getterFor(fY);tRe(Array,"Array",function(e,r){rRe(this,{type:fY,target:eRe(e),index:0,kind:r})},function(){var e=nRe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,o1(void 0,!0)):t=="keys"?o1(n,!1):t=="values"?o1(r[n],!1):o1([n,r[n]],!1)},"values");DM.Arguments=DM.Array;var iRe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},sRe=iRe,oRe=bn,aRe=xu,lRe=_u,BM=Av,uRe=ln,MM=uRe("toStringTag");for(var IS in sRe){var LM=oRe[IS],AS=LM&&LM.prototype;AS&&aRe(AS)!==MM&&lRe(AS,MM,IS),BM[IS]=BM.Array}var cRe=lNe,hY=cRe,fRe=$n;fRe("dispose");var hRe=hY,dRe=hRe,pRe=$n;pRe("asyncDispose");var vRe=Nt,gRe=hs,yRe=Br,dY=gRe("Symbol"),mRe=dY.keyFor,bRe=yRe(dY.prototype.valueOf);vRe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return mRe(bRe(r))!==void 0}catch{return!1}}});var wRe=Nt,$Re=Lc,pY=hs,_Re=Br,xRe=Mm,ERe=ln,p$=pY("Symbol"),FM=p$.isWellKnown,vY=pY("Object","getOwnPropertyNames"),SRe=_Re(p$.prototype.valueOf),jM=$Re("wks");for(var OS=0,zM=vY(p$),kRe=zM.length;OS<kRe;OS++)try{var HM=zM[OS];xRe(p$[HM])&&ERe(HM)}catch{}wRe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(FM&&FM(r))return!0;try{for(var t=SRe(r),n=0,i=vY(jM),s=i.length;n<s;n++)if(jM[i[n]]==t)return!0}catch{}return!1}});var TRe=$n;TRe("matcher");var IRe=$n;IRe("metadataKey");var ARe=$n;ARe("observable");var ORe=$n;ORe("metadata");var CRe=$n;CRe("patternMatch");var PRe=$n;PRe("replaceAll");var NRe=dRe,RRe=NRe;(function(e){e.exports=RRe})(yCe);(function(e){e.exports=gA})(gCe);var Zd=Yt(qy),v$={},DRe={get exports(){return v$},set exports(e){v$=e}},IA={},BRe={get exports(){return IA},set exports(e){IA=e}},_4=Br,MRe=ix,LRe=bl,FRe=Bm,jRe=_4("".charAt),UM=_4("".charCodeAt),zRe=_4("".slice),WM=function(e){return function(r,t){var n=LRe(FRe(r)),i=MRe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=UM(n,i),o<55296||o>56319||i+1===s||(a=UM(n,i+1))<56320||a>57343?e?jRe(n,i):o:e?zRe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},HRe={codeAt:WM(!1),charAt:WM(!0)},URe=HRe.charAt,WRe=bl,gY=Tv,KRe=w4,KM=$4,yY="String Iterator",qRe=gY.set,VRe=gY.getterFor(yY);KRe(String,"String",function(e){qRe(this,{type:yY,string:WRe(e),index:0})},function(){var r=VRe(this),t=r.string,n=r.index,i;return n>=t.length?KM(void 0,!0):(i=URe(t,n),r.index+=i.length,KM(i,!1))});var GRe=Km,YRe=GRe.f("iterator"),ZRe=YRe,mY=ZRe,XRe=mY,JRe=XRe,QRe=JRe,eDe=QRe;(function(e){e.exports=eDe})(BRe);(function(e){e.exports=IA})(DRe);var tDe=Yt(v$);function Oi(e){"@babel/helpers - typeof";return Oi=typeof Zd=="function"&&typeof tDe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Zd=="function"&&r.constructor===Zd&&r!==Zd.prototype?"symbol":typeof r},Oi(e)}var AA={},rDe={get exports(){return AA},set exports(e){AA=e}},OA={},nDe={get exports(){return OA},set exports(e){OA=e}},iDe=Km,sDe=iDe.f("toPrimitive"),oDe=sDe,aDe=oDe,lDe=aDe,uDe=lDe,cDe=uDe,fDe=cDe;(function(e){e.exports=fDe})(nDe);(function(e){e.exports=OA})(rDe);var hDe=Yt(AA);function dDe(e,r){if(Oi(e)!=="object"||e===null)return e;var t=e[hDe];if(t!==void 0){var n=t.call(e,r||"default");if(Oi(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function bY(e){var r=dDe(e,"string");return Oi(r)==="symbol"?r:String(r)}function qM(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),nx(e,bY(n.key),n)}}function vx(e,r,t){return r&&qM(e.prototype,r),t&&qM(e,t),nx(e,"prototype",{writable:!1}),e}function kn(e,r,t){return r=bY(r),r in e?nx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CA={},pDe={get exports(){return CA},set exports(e){CA=e}},wY=Br,vDe=Bs,gDe=bi,yDe=qn,VM=Vm,mDe=Nm,$Y=Function,bDe=wY([].concat),wDe=wY([].join),CS={},$De=function(e,r,t){if(!yDe(CS,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";CS[r]=$Y("C,a","return new C("+wDe(n,",")+")")}return CS[r](e,t)},_Y=mDe?$Y.bind:function(r){var t=vDe(this),n=t.prototype,i=VM(arguments,1),s=function(){var a=bDe(i,VM(arguments));return this instanceof s?$De(t,a.length,a):t.apply(r,a)};return gDe(n)&&(s.prototype=n),s},_De=Nt,GM=_Y;_De({target:"Function",proto:!0,forced:Function.bind!==GM},{bind:GM});var xDe=Wr,Vn=function(e){return xDe[e+"Prototype"]},EDe=Vn,SDe=EDe("Function").bind,kDe=an,TDe=SDe,PS=Function.prototype,IDe=function(e){var r=e.bind;return e===PS||kDe(PS,e)&&r===PS.bind?TDe:r},ADe=IDe,xY=ADe;(function(e){e.exports=xY})(pDe);var EY=Yt(CA),PA={},ODe={get exports(){return PA},set exports(e){PA=e}},CDe=Bs,PDe=Ms,NDe=ex,RDe=oo,DDe=TypeError,YM=function(e){return function(r,t,n,i){CDe(t);var s=PDe(r),o=NDe(s),a=RDe(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw DDe("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},BDe={left:YM(!1),right:YM(!0)},MDe=xr,Ym=function(e,r){var t=[][e];return!!t&&MDe(function(){t.call(null,r||function(){return 1},1)})},LDe=$u,Zm=typeof process<"u"&&LDe(process)=="process",FDe=Nt,jDe=BDe.left,zDe=Ym,ZM=_v,HDe=Zm,UDe=!HDe&&ZM>79&&ZM<83,WDe=UDe||!zDe("reduce");FDe({target:"Array",proto:!0,forced:WDe},{reduce:function(r){var t=arguments.length;return jDe(this,r,t,t>1?arguments[1]:void 0)}});var KDe=Vn,qDe=KDe("Array").reduce,VDe=an,GDe=qDe,NS=Array.prototype,YDe=function(e){var r=e.reduce;return e===NS||VDe(NS,e)&&r===NS.reduce?GDe:r},ZDe=YDe,XDe=ZDe;(function(e){e.exports=XDe})(ODe);var JDe=Yt(PA),NA={},QDe={get exports(){return NA},set exports(e){NA=e}},e6e=Nt,t6e=Iv.filter,r6e=Fm,n6e=r6e("filter");e6e({target:"Array",proto:!0,forced:!n6e},{filter:function(r){return t6e(this,r,arguments.length>1?arguments[1]:void 0)}});var i6e=Vn,s6e=i6e("Array").filter,o6e=an,a6e=s6e,RS=Array.prototype,l6e=function(e){var r=e.filter;return e===RS||o6e(RS,e)&&r===RS.filter?a6e:r},u6e=l6e,c6e=u6e;(function(e){e.exports=c6e})(QDe);var Xd=Yt(NA),RA={},f6e={get exports(){return RA},set exports(e){RA=e}},h6e=Nt,d6e=Iv.map,p6e=Fm,v6e=p6e("map");h6e({target:"Array",proto:!0,forced:!v6e},{map:function(r){return d6e(this,r,arguments.length>1?arguments[1]:void 0)}});var g6e=Vn,y6e=g6e("Array").map,m6e=an,b6e=y6e,DS=Array.prototype,w6e=function(e){var r=e.map;return e===DS||m6e(DS,e)&&r===DS.map?b6e:r},$6e=w6e,_6e=$6e;(function(e){e.exports=_6e})(f6e);var ca=Yt(RA),XM={},x6e={get exports(){return XM},set exports(e){XM=e}},E6e=Gc,S6e=oo,k6e=a4,T6e=Vc,SY=function(e,r,t,n,i,s,o,a){for(var l=i,u=0,h=o?T6e(o,a):!1,c,d;u<n;)u in t&&(c=h?h(t[u],u,r):t[u],s>0&&E6e(c)?(d=S6e(c),l=SY(e,r,c,d,l,s-1)-1):(k6e(l+1),e[l]=c),l++),u++;return l},I6e=SY,A6e=Nt,O6e=I6e,C6e=Bs,P6e=Ms,N6e=oo,R6e=ox;A6e({target:"Array",proto:!0},{flatMap:function(r){var t=P6e(this),n=N6e(t),i;return C6e(r),i=R6e(t,0),i.length=O6e(i,t,t,n,0,1,r,arguments.length>1?arguments[1]:void 0),i}});var D6e=Vn,B6e=D6e("Array").flatMap,M6e=an,L6e=B6e,BS=Array.prototype,F6e=function(e){var r=e.flatMap;return e===BS||M6e(BS,e)&&r===BS.flatMap?L6e:r},j6e=F6e,z6e=j6e;(function(e){e.exports=z6e})(x6e);var DA={},H6e={get exports(){return DA},set exports(e){DA=e}},U6e=mi,JM=so,W6e=i4,kY=function(e,r,t){var n,i;JM(e);try{if(n=W6e(e,"return"),!n){if(r==="throw")throw t;return t}n=U6e(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return JM(n),t},K6e=so,q6e=kY,V6e=function(e,r,t,n){try{return n?r(K6e(t)[0],t[1]):r(t)}catch(i){q6e(e,"throw",i)}},G6e=ln,Y6e=Av,Z6e=G6e("iterator"),X6e=Array.prototype,TY=function(e){return e!==void 0&&(Y6e.Array===e||X6e[Z6e]===e)},J6e=xu,QM=i4,Q6e=Dm,eBe=Av,tBe=ln,rBe=tBe("iterator"),gx=function(e){if(!Q6e(e))return QM(e,rBe)||QM(e,"@@iterator")||eBe[J6e(e)]},nBe=mi,iBe=Bs,sBe=so,oBe=Ev,aBe=gx,lBe=TypeError,x4=function(e,r){var t=arguments.length<2?aBe(e):r;if(iBe(t))return sBe(nBe(t,e));throw lBe(oBe(e)+" is not iterable")},uBe=Vc,cBe=mi,fBe=Ms,hBe=V6e,dBe=TY,pBe=sx,vBe=oo,e7=Sv,gBe=x4,yBe=gx,t7=Array,mBe=function(r){var t=fBe(r),n=pBe(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=uBe(s,i>2?arguments[2]:void 0));var a=yBe(t),l=0,u,h,c,d,y,w;if(a&&!(this===t7&&dBe(a)))for(d=gBe(t,a),y=d.next,h=n?new this:[];!(c=cBe(y,d)).done;l++)w=o?hBe(d,s,[c.value,l],!0):c.value,e7(h,l,w);else for(u=vBe(t),h=n?new this(u):t7(u);u>l;l++)w=o?s(t[l],l):t[l],e7(h,l,w);return h.length=l,h},bBe=ln,IY=bBe("iterator"),AY=!1;try{var wBe=0,r7={next:function(){return{done:!!wBe++}},return:function(){AY=!0}};r7[IY]=function(){return this},Array.from(r7,function(){throw 2})}catch{}var OY=function(e,r){if(!r&&!AY)return!1;var t=!1;try{var n={};n[IY]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},$Be=Nt,_Be=mBe,xBe=OY,EBe=!xBe(function(e){Array.from(e)});$Be({target:"Array",stat:!0,forced:EBe},{from:_Be});var SBe=Wr,kBe=SBe.Array.from,TBe=kBe,CY=TBe;(function(e){e.exports=CY})(H6e);var E4=Yt(DA),BA={},IBe={get exports(){return BA},set exports(e){BA=e}},MA={},ABe={get exports(){return MA},set exports(e){MA=e}},OBe=gx,CBe=OBe,PBe=CBe,NBe=PBe,RBe=NBe,DBe=RBe,BBe=DBe,MBe=BBe;(function(e){e.exports=MBe})(ABe);(function(e){e.exports=MA})(IBe);var Xm=Yt(BA),LA={},LBe={get exports(){return LA},set exports(e){LA=e}},FBe=Wr,jBe=FBe.Object.getOwnPropertySymbols,zBe=jBe,HBe=zBe;(function(e){e.exports=HBe})(LBe);var n7=Yt(LA),FA={},UBe={get exports(){return FA},set exports(e){FA=e}},jA={},WBe={get exports(){return jA},set exports(e){jA=e}},KBe=Nt,qBe=xr,VBe=Oa,PY=Dh.f,NY=ni,GBe=!NY||qBe(function(){PY(1)});KBe({target:"Object",stat:!0,forced:GBe,sham:!NY},{getOwnPropertyDescriptor:function(r,t){return PY(VBe(r),t)}});var YBe=Wr,RY=YBe.Object,ZBe=WBe.exports=function(r,t){return RY.getOwnPropertyDescriptor(r,t)};RY.getOwnPropertyDescriptor.sham&&(ZBe.sham=!0);var XBe=jA,JBe=XBe;(function(e){e.exports=JBe})(UBe);var DY=Yt(FA),zA={},QBe={get exports(){return zA},set exports(e){zA=e}},e8e=hs,t8e=Br,r8e=Um,n8e=Wm,i8e=so,s8e=t8e([].concat),S4=e8e("Reflect","ownKeys")||function(r){var t=r8e.f(i8e(r)),n=n8e.f;return n?s8e(t,n(r)):t},o8e=Nt,a8e=ni,l8e=S4,u8e=Oa,c8e=Dh,f8e=Sv;o8e({target:"Object",stat:!0,sham:!a8e},{getOwnPropertyDescriptors:function(r){for(var t=u8e(r),n=c8e.f,i=l8e(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&f8e(s,a,l);return s}});var h8e=Wr,d8e=h8e.Object.getOwnPropertyDescriptors,p8e=d8e,v8e=p8e;(function(e){e.exports=v8e})(QBe);var i7=Yt(zA),HA={},g8e={get exports(){return HA},set exports(e){HA=e}},UA={},y8e={get exports(){return UA},set exports(e){UA=e}},m8e=Nt,b8e=ni,s7=ax.f;m8e({target:"Object",stat:!0,forced:Object.defineProperties!==s7,sham:!b8e},{defineProperties:s7});var w8e=Wr,BY=w8e.Object,$8e=y8e.exports=function(r,t){return BY.defineProperties(r,t)};BY.defineProperties.sham&&($8e.sham=!0);var _8e=UA,x8e=_8e;(function(e){e.exports=x8e})(g8e);var E8e=Yt(HA),WA={},S8e={get exports(){return WA},set exports(e){WA=e}};(function(e){e.exports=wG})(S8e);var k8e=Yt(WA),KA={},T8e={get exports(){return KA},set exports(e){KA=e}},qA={},I8e={get exports(){return qA},set exports(e){qA=e}},A8e=Nt,O8e=Gc;A8e({target:"Array",stat:!0},{isArray:O8e});var C8e=Wr,P8e=C8e.Array.isArray,N8e=P8e,MY=N8e,R8e=MY,D8e=R8e,B8e=D8e,M8e=B8e;(function(e){e.exports=M8e})(I8e);(function(e){e.exports=qA})(T8e);var LY=Yt(KA);function L8e(e){if(LY(e))return e}function F8e(e,r){var t=e==null?null:typeof Zd<"u"&&Xm(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var g$={},j8e={get exports(){return g$},set exports(e){g$=e}},VA={},z8e={get exports(){return VA},set exports(e){VA=e}},H8e=Nt,o7=Gc,U8e=sx,W8e=bi,a7=jm,K8e=oo,q8e=Oa,V8e=Sv,G8e=ln,Y8e=Fm,Z8e=Vm,X8e=Y8e("slice"),J8e=G8e("species"),MS=Array,Q8e=Math.max;H8e({target:"Array",proto:!0,forced:!X8e},{slice:function(r,t){var n=q8e(this),i=K8e(n),s=a7(r,i),o=a7(t===void 0?i:t,i),a,l,u;if(o7(n)&&(a=n.constructor,U8e(a)&&(a===MS||o7(a.prototype))?a=void 0:W8e(a)&&(a=a[J8e],a===null&&(a=void 0)),a===MS||a===void 0))return Z8e(n,s,o);for(l=new(a===void 0?MS:a)(Q8e(o-s,0)),u=0;s<o;s++,u++)s in n&&V8e(l,u,n[s]);return l.length=u,l}});var eMe=Vn,tMe=eMe("Array").slice,rMe=an,nMe=tMe,LS=Array.prototype,iMe=function(e){var r=e.slice;return e===LS||rMe(LS,e)&&r===LS.slice?nMe:r},sMe=iMe,FY=sMe,oMe=FY,aMe=oMe,lMe=aMe,uMe=lMe;(function(e){e.exports=uMe})(z8e);(function(e){e.exports=VA})(j8e);var cMe=Yt(g$),GA={},fMe={get exports(){return GA},set exports(e){GA=e}},YA={},hMe={get exports(){return YA},set exports(e){YA=e}},dMe=CY,pMe=dMe,vMe=pMe,gMe=vMe;(function(e){e.exports=gMe})(hMe);(function(e){e.exports=YA})(fMe);var jY=Yt(GA);function ZA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function zY(e,r){var t;if(e){if(typeof e=="string")return ZA(e,r);var n=cMe(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return jY(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZA(e,r)}}function yMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(e,r){return L8e(e)||F8e(e,r)||zY(e,r)||yMe()}function mMe(e){if(LY(e))return ZA(e)}function bMe(e){if(typeof Zd<"u"&&Xm(e)!=null||e["@@iterator"]!=null)return jY(e)}function wMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(e){return mMe(e)||bMe(e)||zY(e)||wMe()}var XA={},$Me={get exports(){return XA},set exports(e){XA=e}};(function(e){e.exports=hY})($Me);var yx=Yt(XA),JA={},_Me={get exports(){return JA},set exports(e){JA=e}},xMe=Vn,EMe=xMe("Array").concat,SMe=an,kMe=EMe,FS=Array.prototype,TMe=function(e){var r=e.concat;return e===FS||SMe(FS,e)&&r===FS.concat?kMe:r},IMe=TMe,AMe=IMe;(function(e){e.exports=AMe})(_Me);var mx=Yt(JA),QA={},OMe={get exports(){return QA},set exports(e){QA=e}};(function(e){e.exports=FY})(OMe);var bx=Yt(QA),eO={},CMe={get exports(){return eO},set exports(e){eO=e}},PMe=Nt,NMe=S4;PMe({target:"Reflect",stat:!0},{ownKeys:NMe});var RMe=Wr,DMe=RMe.Reflect.ownKeys,BMe=DMe,MMe=BMe;(function(e){e.exports=MMe})(CMe);var LMe=Yt(eO),tO={},FMe={get exports(){return tO},set exports(e){tO=e}};(function(e){e.exports=MY})(FMe);var Gs=Yt(tO),rO={},jMe={get exports(){return rO},set exports(e){rO=e}},zMe=Nt,HMe=Ms,HY=Hm,UMe=xr,WMe=UMe(function(){HY(1)});zMe({target:"Object",stat:!0,forced:WMe},{keys:function(r){return HY(HMe(r))}});var KMe=Wr,qMe=KMe.Object.keys,VMe=qMe,GMe=VMe;(function(e){e.exports=GMe})(jMe);var k4=Yt(rO),l7={},YMe={get exports(){return l7},set exports(e){l7=e}},ZMe=Nt,XMe=Br,UY=Date,JMe=XMe(UY.prototype.getTime);ZMe({target:"Date",stat:!0},{now:function(){return JMe(new UY)}});var QMe=Wr,e7e=QMe.Date.now,t7e=e7e,r7e=t7e;(function(e){e.exports=r7e})(YMe);var nO={},n7e={get exports(){return nO},set exports(e){nO=e}},i7e=Iv.forEach,s7e=Ym,o7e=s7e("forEach"),a7e=o7e?[].forEach:function(r){return i7e(this,r,arguments.length>1?arguments[1]:void 0)},l7e=Nt,u7=a7e;l7e({target:"Array",proto:!0,forced:[].forEach!=u7},{forEach:u7});var u7e=Vn,c7e=u7e("Array").forEach,f7e=c7e,h7e=f7e,d7e=xu,p7e=qn,v7e=an,g7e=h7e,jS=Array.prototype,y7e={DOMTokenList:!0,NodeList:!0},WY=function(e){var r=e.forEach;return e===jS||v7e(jS,e)&&r===jS.forEach||p7e(y7e,d7e(e))?g7e:r};(function(e){e.exports=WY})(n7e);var xh=Yt(nO),iO={},m7e={get exports(){return iO},set exports(e){iO=e}},b7e=Nt,w7e=Br,$7e=Gc,_7e=w7e([].reverse),c7=[1,2];b7e({target:"Array",proto:!0,forced:String(c7)===String(c7.reverse())},{reverse:function(){return $7e(this)&&(this.length=this.length),_7e(this)}});var x7e=Vn,E7e=x7e("Array").reverse,S7e=an,k7e=E7e,zS=Array.prototype,T7e=function(e){var r=e.reverse;return e===zS||S7e(zS,e)&&r===zS.reverse?k7e:r},I7e=T7e,KY=I7e;(function(e){e.exports=KY})(m7e);var A7e=Yt(iO),sO={},O7e={get exports(){return sO},set exports(e){sO=e}},C7e=ni,P7e=Gc,N7e=TypeError,R7e=Object.getOwnPropertyDescriptor,D7e=C7e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),B7e=D7e?function(e,r){if(P7e(e)&&!R7e(e,"length").writable)throw N7e("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},f7=Ev,M7e=TypeError,qY=function(e,r){if(!delete e[r])throw M7e("Cannot delete property "+f7(r)+" of "+f7(e))},L7e=Nt,F7e=Ms,j7e=jm,z7e=ix,H7e=oo,U7e=B7e,W7e=a4,K7e=ox,q7e=Sv,HS=qY,V7e=Fm,G7e=V7e("splice"),Y7e=Math.max,Z7e=Math.min;L7e({target:"Array",proto:!0,forced:!G7e},{splice:function(r,t){var n=F7e(this),i=H7e(n),s=j7e(r,i),o=arguments.length,a,l,u,h,c,d;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=Z7e(Y7e(z7e(t),0),i-s)),W7e(i+a-l),u=K7e(n,l),h=0;h<l;h++)c=s+h,c in n&&q7e(u,h,n[c]);if(u.length=l,a<l){for(h=s;h<i-l;h++)c=h+l,d=h+a,c in n?n[d]=n[c]:HS(n,d);for(h=i;h>i-l+a;h--)HS(n,h-1)}else if(a>l)for(h=i-l;h>s;h--)c=h+l-1,d=h+a-1,c in n?n[d]=n[c]:HS(n,d);for(h=0;h<a;h++)n[h+s]=arguments[h+2];return U7e(n,i-l+a),u}});var X7e=Vn,J7e=X7e("Array").splice,Q7e=an,eLe=J7e,US=Array.prototype,tLe=function(e){var r=e.splice;return e===US||Q7e(US,e)&&r===US.splice?eLe:r},rLe=tLe,nLe=rLe;(function(e){e.exports=nLe})(O7e);var VY=Yt(sO),oO={},iLe={get exports(){return oO},set exports(e){oO=e}},h7=ni,sLe=Br,oLe=mi,aLe=xr,WS=Hm,lLe=Wm,uLe=Rm,cLe=Ms,fLe=ex,Od=Object.assign,d7=Object.defineProperty,hLe=sLe([].concat),dLe=!Od||aLe(function(){if(h7&&Od({b:1},Od(d7({},"a",{enumerable:!0,get:function(){d7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Od({},e)[t]!=7||WS(Od({},r)).join("")!=n})?function(r,t){for(var n=cLe(r),i=arguments.length,s=1,o=lLe.f,a=uLe.f;i>s;)for(var l=fLe(arguments[s++]),u=o?hLe(WS(l),o(l)):WS(l),h=u.length,c=0,d;h>c;)d=u[c++],(!h7||oLe(a,l,d))&&(n[d]=l[d]);return n}:Od,pLe=Nt,p7=dLe;pLe({target:"Object",stat:!0,arity:2,forced:Object.assign!==p7},{assign:p7});var vLe=Wr,gLe=vLe.Object.assign,yLe=gLe,mLe=yLe;(function(e){e.exports=mLe})(iLe);var bLe=Yt(oO),v7={},wLe={get exports(){return v7},set exports(e){v7=e}},$Le=Nt,_Le=c4.includes,xLe=xr,ELe=xLe(function(){return!Array(1).includes()});$Le({target:"Array",proto:!0,forced:ELe},{includes:function(r){return _Le(this,r,arguments.length>1?arguments[1]:void 0)}});var SLe=Vn,kLe=SLe("Array").includes,TLe=bi,ILe=$u,ALe=ln,OLe=ALe("match"),CLe=function(e){var r;return TLe(e)&&((r=e[OLe])!==void 0?!!r:ILe(e)=="RegExp")},PLe=CLe,NLe=TypeError,RLe=function(e){if(PLe(e))throw NLe("The method doesn't accept regular expressions");return e},DLe=ln,BLe=DLe("match"),MLe=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[BLe]=!1,"/./"[e](r)}catch{}}return!1},LLe=Nt,FLe=Br,jLe=RLe,zLe=Bm,g7=bl,HLe=MLe,ULe=FLe("".indexOf);LLe({target:"String",proto:!0,forced:!HLe("includes")},{includes:function(r){return!!~ULe(g7(zLe(this)),g7(jLe(r)),arguments.length>1?arguments[1]:void 0)}});var WLe=Vn,KLe=WLe("String").includes,y7=an,qLe=kLe,VLe=KLe,KS=Array.prototype,qS=String.prototype,GLe=function(e){var r=e.includes;return e===KS||y7(KS,e)&&r===KS.includes?qLe:typeof e=="string"||e===qS||y7(qS,e)&&r===qS.includes?VLe:r},YLe=GLe,ZLe=YLe;(function(e){e.exports=ZLe})(wLe);var m7={},XLe={get exports(){return m7},set exports(e){m7=e}},JLe=Nt,QLe=xr,e9e=Ms,GY=px,t9e=oY,r9e=QLe(function(){GY(1)});JLe({target:"Object",stat:!0,forced:r9e,sham:!t9e},{getPrototypeOf:function(r){return GY(e9e(r))}});var n9e=Wr,i9e=n9e.Object.getPrototypeOf,s9e=i9e,YY=s9e;(function(e){e.exports=YY})(XLe);var b7={},o9e={get exports(){return b7},set exports(e){b7=e}},a9e=ni,ZY=Br,l9e=Hm,u9e=Oa,c9e=Rm.f,f9e=ZY(c9e),h9e=ZY([].push),w7=function(e){return function(r){for(var t=u9e(r),n=l9e(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!a9e||f9e(t,a))&&h9e(o,e?[a,t[a]]:t[a]);return o}},d9e={entries:w7(!0),values:w7(!1)},p9e=Nt,v9e=d9e.values;p9e({target:"Object",stat:!0},{values:function(r){return v9e(r)}});var g9e=Wr,y9e=g9e.Object.values,m9e=y9e,b9e=m9e;(function(e){e.exports=b9e})(o9e);var $7={},w9e={get exports(){return $7},set exports(e){$7=e}},T4=`	
\v\f\r \u2028\u2029\uFEFF`,$9e=Br,_9e=Bm,x9e=bl,aO=T4,_7=$9e("".replace),E9e=RegExp("^["+aO+"]+"),S9e=RegExp("(^|[^"+aO+"])["+aO+"]+$"),VS=function(e){return function(r){var t=x9e(_9e(r));return e&1&&(t=_7(t,E9e,"")),e&2&&(t=_7(t,S9e,"$1")),t}},XY={start:VS(1),end:VS(2),trim:VS(3)},JY=bn,k9e=xr,T9e=Br,I9e=bl,A9e=XY.trim,x7=T4,cy=JY.parseInt,E7=JY.Symbol,S7=E7&&E7.iterator,QY=/^[+-]?0x/i,O9e=T9e(QY.exec),C9e=cy(x7+"08")!==8||cy(x7+"0x16")!==22||S7&&!k9e(function(){cy(Object(S7))}),P9e=C9e?function(r,t){var n=A9e(I9e(r));return cy(n,t>>>0||(O9e(QY,n)?16:10))}:cy,N9e=Nt,k7=P9e;N9e({global:!0,forced:parseInt!=k7},{parseInt:k7});var R9e=Wr,D9e=R9e.parseInt,B9e=D9e,M9e=B9e;(function(e){e.exports=M9e})(w9e);var T7={},L9e={get exports(){return T7},set exports(e){T7=e}},F9e=Nt,j9e=n4,z9e=c4.indexOf,H9e=Ym,lO=j9e([].indexOf),eZ=!!lO&&1/lO([1],1,-0)<0,U9e=eZ||!H9e("indexOf");F9e({target:"Array",proto:!0,forced:U9e},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return eZ?lO(this,r,t)||0:z9e(this,r,t)}});var W9e=Vn,K9e=W9e("Array").indexOf,q9e=an,V9e=K9e,GS=Array.prototype,G9e=function(e){var r=e.indexOf;return e===GS||q9e(GS,e)&&r===GS.indexOf?V9e:r},Y9e=G9e,Z9e=Y9e;(function(e){e.exports=Z9e})(L9e);var I7={},X9e={get exports(){return I7},set exports(e){I7=e}},J9e=sY.PROPER,Q9e=xr,A7=T4,O7="",eFe=function(e){return Q9e(function(){return!!A7[e]()||O7[e]()!==O7||J9e&&A7[e].name!==e})},tFe=Nt,rFe=XY.trim,nFe=eFe;tFe({target:"String",proto:!0,forced:nFe("trim")},{trim:function(){return rFe(this)}});var iFe=Vn,sFe=iFe("String").trim,oFe=an,aFe=sFe,YS=String.prototype,lFe=function(e){var r=e.trim;return typeof e=="string"||e===YS||oFe(YS,e)&&r===YS.trim?aFe:r},uFe=lFe,cFe=uFe;(function(e){e.exports=cFe})(X9e);var uO={},fFe={get exports(){return uO},set exports(e){uO=e}},hFe=Nt,dFe=ni,pFe=Mh;hFe({target:"Object",stat:!0,sham:!dFe},{create:pFe});var vFe=Wr,gFe=vFe.Object,yFe=function(r,t){return gFe.create(r,t)},mFe=yFe,tZ=mFe;(function(e){e.exports=tZ})(fFe);var bFe=Yt(uO),cO={},wFe={get exports(){return cO},set exports(e){cO=e}},fO=Wr,$Fe=$v;fO.JSON||(fO.JSON={stringify:JSON.stringify});var _Fe=function(r,t,n){return $Fe(fO.JSON.stringify,null,arguments)},xFe=_Fe,EFe=xFe;(function(e){e.exports=EFe})(wFe);var SFe=Yt(cO),hO={},kFe={get exports(){return hO},set exports(e){hO=e}},TFe=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",IFe=TypeError,rZ=function(e,r){if(e<r)throw IFe("Not enough arguments");return e},nZ=bn,AFe=$v,OFe=wn,CFe=TFe,PFe=qc,NFe=Vm,RFe=rZ,DFe=nZ.Function,BFe=/MSIE .\./.test(PFe)||CFe&&function(){var e=nZ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),iZ=function(e,r){var t=r?2:1;return BFe?function(n,i){var s=RFe(arguments.length,1)>t,o=OFe(n)?n:DFe(n),a=s?NFe(arguments,t):[],l=s?function(){AFe(o,this,a)}:o;return r?e(l,i):e(l)}:e},MFe=Nt,sZ=bn,LFe=iZ,C7=LFe(sZ.setInterval,!0);MFe({global:!0,bind:!0,forced:sZ.setInterval!==C7},{setInterval:C7});var FFe=Nt,oZ=bn,jFe=iZ,P7=jFe(oZ.setTimeout,!0);FFe({global:!0,bind:!0,forced:oZ.setTimeout!==P7},{setTimeout:P7});var zFe=Wr,HFe=zFe.setTimeout;(function(e){e.exports=HFe})(kFe);var UFe=Yt(hO),N7={},WFe={get exports(){return N7},set exports(e){N7=e}},KFe=Ms,R7=jm,qFe=oo,VFe=function(r){for(var t=KFe(this),n=qFe(t),i=arguments.length,s=R7(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:R7(o,n);a>s;)t[s++]=r;return t},GFe=Nt,YFe=VFe;GFe({target:"Array",proto:!0},{fill:YFe});var ZFe=Vn,XFe=ZFe("Array").fill,JFe=an,QFe=XFe,ZS=Array.prototype,eje=function(e){var r=e.fill;return e===ZS||JFe(ZS,e)&&r===ZS.fill?QFe:r},tje=eje,rje=tje;(function(e){e.exports=rje})(WFe);var dO={},nje={get exports(){return dO},set exports(e){dO=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(nje);var ije=dO;/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ka(){return ka=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ka.apply(this,arguments)}function Vo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function a1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pO;typeof Object.assign!="function"?pO=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:pO=Object.assign;var Eh=pO,D7=["","webkit","Moz","MS","ms","o"],sje=typeof document>"u"?{style:{}}:document.createElement("div"),oje="function",Jd=Math.round,Sh=Math.abs,I4=Date.now;function wx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<D7.length;){if(t=D7[s],n=t?t+i:r,n in e)return n;s++}}var tu;typeof window>"u"?tu={}:tu=window;var aZ=wx(sje.style,"touchAction"),lZ=aZ!==void 0;function aje(){if(!lZ)return!1;var e={},r=tu.CSS&&tu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?tu.CSS.supports("touch-action",t):!0}),e}var uZ="compute",cZ="auto",vO="manipulation",lh="none",Zy="pan-x",Xy="pan-y",l1=aje(),lje=/mobile|tablet|ip(ad|hone|od)|android/i,fZ="ontouchstart"in tu,uje=wx(tu,"PointerEvent")!==void 0,cje=fZ&&lje.test(navigator.userAgent),Jm="touch",fje="pen",A4="mouse",hje="kinect",dje=25,cs=1,Fh=2,zn=4,Rs=8,y$=1,Qm=2,e0=4,t0=8,Kp=16,ul=Qm|e0,uh=t0|Kp,hZ=ul|uh,dZ=["x","y"],m$=["clientX","clientY"];function ru(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function $x(e,r){return typeof e===oje?e.apply(r&&r[0]||void 0,r):e}function Gf(e,r){return e.indexOf(r)>-1}function pje(e){if(Gf(e,lh))return lh;var r=Gf(e,Zy),t=Gf(e,Xy);return r&&t?lh:r||t?r?Zy:Xy:Gf(e,vO)?vO:cZ}var pZ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===uZ&&(n=this.compute()),lZ&&this.manager.element.style&&l1[n]&&(this.manager.element.style[aZ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return ru(this.manager.recognizers,function(i){$x(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),pje(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Gf(o,lh)&&!l1[lh],l=Gf(o,Xy)&&!l1[Xy],u=Gf(o,Zy)&&!l1[Zy];if(a){var h=n.pointers.length===1,c=n.distance<2,d=n.deltaTime<250;if(h&&c&&d)return}if(!(u&&l)&&(a||l&&s&ul||u&&s&uh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function O4(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function vZ(e){var r=e.length;if(r===1)return{x:Jd(e[0].clientX),y:Jd(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:Jd(t/r),y:Jd(n/r)}}function B7(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:Jd(e.pointers[t].clientX),clientY:Jd(e.pointers[t].clientY)},t++;return{timeStamp:I4(),pointers:r,center:vZ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function b$(e,r,t){t||(t=dZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function gO(e,r,t){t||(t=dZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function gZ(e,r){return e===r?y$:Sh(e)>=Sh(r)?e<0?Qm:e0:r<0?t0:Kp}function vje(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===cs||s.eventType===zn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function yZ(e,r,t){return{x:r/e||0,y:t/e||0}}function gje(e,r){return b$(r[0],r[1],m$)/b$(e[0],e[1],m$)}function yje(e,r){return gO(r[1],r[0],m$)+gO(e[1],e[0],m$)}function mje(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Rs&&(n>dje||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=yZ(n,l,u);s=h.x,o=h.y,i=Sh(h.x)>Sh(h.y)?h.x:h.y,a=gZ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function bje(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=B7(r)),i>1&&!t.firstMultiple?t.firstMultiple=B7(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=vZ(n);r.timeStamp=I4(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=gO(a,l),r.distance=b$(a,l),vje(t,r),r.offsetDirection=gZ(r.deltaX,r.deltaY);var u=yZ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Sh(u.x)>Sh(u.y)?u.x:u.y,r.scale=o?gje(o.pointers,n):1,r.rotation=o?yje(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,mje(t,r);var h=e.element,c=r.srcEvent,d;c.composedPath?d=c.composedPath()[0]:c.path?d=c.path[0]:d=c.target,O4(d,h)&&(h=d),r.target=h}function wje(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&cs&&n-i===0,o=r&(zn|Rs)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,bje(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function Jy(e){return e.trim().split(/\s+/g)}function fy(e,r,t){ru(Jy(r),function(n){e.addEventListener(n,t,!1)})}function hy(e,r,t){ru(Jy(r),function(n){e.removeEventListener(n,t,!1)})}function M7(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Ov=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){$x(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&fy(this.element,this.evEl,this.domHandler),this.evTarget&&fy(this.target,this.evTarget,this.domHandler),this.evWin&&fy(M7(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&hy(this.element,this.evEl,this.domHandler),this.evTarget&&hy(this.target,this.evTarget,this.domHandler),this.evWin&&hy(M7(this.element),this.evWin,this.domHandler)},e}();function kh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var $je={pointerdown:cs,pointermove:Fh,pointerup:zn,pointercancel:Rs,pointerout:Rs},_je={2:Jm,3:fje,4:A4,5:hje},mZ="pointerdown",bZ="pointermove pointerup pointercancel";tu.MSPointerEvent&&!tu.PointerEvent&&(mZ="MSPointerDown",bZ="MSPointerMove MSPointerUp MSPointerCancel");var wZ=function(e){Vo(r,e);function r(){var n,i=r.prototype;return i.evEl=mZ,i.evWin=bZ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=$je[a],u=_je[i.pointerType]||i.pointerType,h=u===Jm,c=kh(s,i.pointerId,"pointerId");l&cs&&(i.button===0||h)?c<0&&(s.push(i),c=s.length-1):l&(zn|Rs)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Ov);function Qy(e){return Array.prototype.slice.call(e,0)}function C4(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];kh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var xje={touchstart:cs,touchmove:Fh,touchend:zn,touchcancel:Rs},Eje="touchstart touchmove touchend touchcancel",P4=function(e){Vo(r,e);function r(){var n;return r.prototype.evTarget=Eje,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=xje[i.type],o=Sje.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Jm,srcEvent:i})},r}(Ov);function Sje(e,r){var t=Qy(e.touches),n=this.targetIds;if(r&(cs|Fh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=Qy(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return O4(u.target,l)}),r===cs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(zn|Rs)&&delete n[o[i].identifier],i++;if(a.length)return[C4(s.concat(a),"identifier",!0),a]}var kje={mousedown:cs,mousemove:Fh,mouseup:zn},Tje="mousedown",Ije="mousemove mouseup",N4=function(e){Vo(r,e);function r(){var n,i=r.prototype;return i.evEl=Tje,i.evWin=Ije,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=kje[i.type];s&cs&&i.button===0&&(this.pressed=!0),s&Fh&&i.which!==1&&(s=zn),this.pressed&&(s&zn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:A4,srcEvent:i}))},r}(Ov),Aje=2500,L7=25;function F7(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Aje)}}function Oje(e,r){e&cs?(this.primaryTouch=r.changedPointers[0].identifier,F7.call(this,r)):e&(zn|Rs)&&F7.call(this,r)}function Cje(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=L7&&o<=L7)return!0}return!1}var $Z=function(){var e=function(r){Vo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var h=u.pointerType===Jm,c=u.pointerType===A4;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)Oje.call(a1(a1(o)),l,u);else if(c&&Cje.call(a1(a1(o)),u))return;o.callback(a,l,u)}},o.touch=new P4(o.manager,o.handler),o.mouse=new N4(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Ov);return e}();function Pje(e){var r,t=e.options.inputClass;return t?r=t:uje?r=wZ:cje?r=P4:fZ?r=$Z:r=N4,new r(e,wje)}function Qd(e,r,t){return Array.isArray(e)?(ru(e,t[r],t),!0):!1}var lw=1,Ho=2,qp=4,kc=8,nu=kc,em=16,ol=32,Nje=1;function Rje(){return Nje++}function u1(e,r){var t=r.manager;return t?t.get(e):e}function j7(e){return e&em?"cancel":e&kc?"end":e&qp?"move":e&Ho?"start":""}var r0=function(){function e(t){t===void 0&&(t={}),this.options=ka({enable:!0},t),this.id=Rje(),this.manager=null,this.state=lw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Eh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(Qd(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=u1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return Qd(n,"dropRecognizeWith",this)?this:(n=u1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(Qd(n,"requireFailure",this))return this;var i=this.requireFail;return n=u1(n,this),kh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(Qd(n,"dropRequireFailure",this))return this;n=u1(n,this);var i=kh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<kc&&o(i.options.event+j7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=kc&&o(i.options.event+j7(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=ol},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(ol|lw)))return!1;n++}return!0},r.recognize=function(n){var i=Eh({},n);if(!$x(this.options.enable,[this,i])){this.reset(),this.state=ol;return}this.state&(nu|em|ol)&&(this.state=lw),this.state=this.process(i),this.state&(Ho|qp|kc|em)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),yO=function(e){Vo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,ka({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[vO]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&cs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==zn)return this.failTimeout();var h=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||b$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!h?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=nu,s.tryEmit()},o.interval),Ho):nu}return ol},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=ol},this.options.interval),ol},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===nu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(r0),Vp=function(e){Vo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,ka({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Ho|qp),l=this.attrTest(i);return a&&(o&Rs||!l)?s|em:a||l?o&zn?s|kc:s&Ho?s|qp:Ho:ol},r}(r0);function _Z(e){return e===Kp?"down":e===t0?"up":e===Qm?"left":e===e0?"right":""}var R4=function(e){Vo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,ka({event:"pan",threshold:10,pointers:1,direction:hZ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&ul&&s.push(Xy),i&uh&&s.push(Zy),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,h=i.deltaY;return l&s.direction||(s.direction&ul?(l=u===0?y$:u<0?Qm:e0,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=h===0?y$:h<0?t0:Kp,o=h!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return Vp.prototype.attrTest.call(this,i)&&(this.state&Ho||!(this.state&Ho)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=_Z(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(Vp),xZ=function(e){Vo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,ka({event:"swipe",threshold:10,velocity:.3,direction:ul|uh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return R4.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(ul|uh)?o=i.overallVelocity:s&ul?o=i.overallVelocityX:s&uh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Sh(o)>this.options.velocity&&i.eventType&zn},t.emit=function(i){var s=_Z(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(Vp),EZ=function(e){Vo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,ka({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[lh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Ho)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(Vp),SZ=function(e){Vo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,ka({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[lh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Ho)},r}(Vp),kZ=function(e){Vo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,ka({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[cZ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(zn|Rs)&&!u)this.reset();else if(i.eventType&cs)this.reset(),this._timer=setTimeout(function(){s.state=nu,s.tryEmit()},o.time);else if(i.eventType&zn)return nu;return ol},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===nu&&(i&&i.eventType&zn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=I4(),this.manager.emit(this.options.event,this._input)))},r}(r0),TZ={domEvents:!1,touchAction:uZ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},z7=[[SZ,{enable:!1}],[EZ,{enable:!1},["rotate"]],[xZ,{direction:ul}],[R4,{direction:ul},["swipe"]],[yO],[yO,{event:"doubletap",taps:2},["tap"]],[kZ]],Dje=1,H7=2;function U7(e,r){var t=e.element;if(t.style){var n;ru(e.options.cssProps,function(i,s){n=wx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Bje(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var W7=function(){function e(t,n){var i=this;this.options=Eh({},TZ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Pje(this),this.touchAction=new pZ(this,this.options.touchAction),U7(this,!0),ru(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Eh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?H7:Dje},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&nu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==H7&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ho|qp|kc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof r0)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(Qd(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(Qd(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=kh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return ru(Jy(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return ru(Jy(n),function(o){i?s[o]&&s[o].splice(kh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Bje(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&U7(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),Mje={touchstart:cs,touchmove:Fh,touchend:zn,touchcancel:Rs},Lje="touchstart",Fje="touchstart touchmove touchend touchcancel",jje=function(e){Vo(r,e);function r(){var n,i=r.prototype;return i.evTarget=Lje,i.evWin=Fje,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=Mje[i.type];if(s===cs&&(this.started=!0),!!this.started){var o=zje.call(this,i,s);s&(zn|Rs)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Jm,srcEvent:i})}},r}(Ov);function zje(e,r){var t=Qy(e.touches),n=Qy(e.changedTouches);return r&(zn|Rs)&&(t=C4(t.concat(n),"identifier",!0)),[t,n]}function IZ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var AZ=IZ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),Hje=IZ(function(e,r){return AZ(e,r,!0)},"merge","Use `assign`.");function Uje(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Eh(i,t)}function K7(e,r){return function(){return e.apply(r,arguments)}}var Wje=function(){var e=function(t,n){return n===void 0&&(n={}),new W7(t,ka({recognizers:z7.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=hZ,e.DIRECTION_DOWN=Kp,e.DIRECTION_LEFT=Qm,e.DIRECTION_RIGHT=e0,e.DIRECTION_UP=t0,e.DIRECTION_HORIZONTAL=ul,e.DIRECTION_VERTICAL=uh,e.DIRECTION_NONE=y$,e.DIRECTION_DOWN=Kp,e.INPUT_START=cs,e.INPUT_MOVE=Fh,e.INPUT_END=zn,e.INPUT_CANCEL=Rs,e.STATE_POSSIBLE=lw,e.STATE_BEGAN=Ho,e.STATE_CHANGED=qp,e.STATE_ENDED=kc,e.STATE_RECOGNIZED=nu,e.STATE_CANCELLED=em,e.STATE_FAILED=ol,e.Manager=W7,e.Input=Ov,e.TouchAction=pZ,e.TouchInput=P4,e.MouseInput=N4,e.PointerEventInput=wZ,e.TouchMouseInput=$Z,e.SingleTouchInput=jje,e.Recognizer=r0,e.AttrRecognizer=Vp,e.Tap=yO,e.Pan=R4,e.Swipe=xZ,e.Pinch=EZ,e.Rotate=SZ,e.Press=kZ,e.on=fy,e.off=hy,e.each=ru,e.merge=Hje,e.extend=AZ,e.bindFn=K7,e.assign=Eh,e.inherit=Uje,e.bindFn=K7,e.prefixed=wx,e.toArray=Qy,e.inArray=kh,e.uniqueArray=C4,e.splitStr=Jy,e.boolOrFn=$x,e.hasParent=O4,e.addEventListeners=fy,e.removeEventListeners=hy,e.defaults=Eh({},TZ,{preset:z7}),e}(),Kje=Wje;function OZ(e,r){var t=typeof yx<"u"&&Xm(e)||e["@@iterator"];if(!t){if(Gs(e)||(t=qje(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function qje(e,r){var t;if(e){if(typeof e=="string")return q7(e,r);var n=bx(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return E4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q7(e,r)}}function q7(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var CZ=yx("DELETE");function Vje(e){for(var r,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return PZ.apply(void 0,mx(r=[{},e]).call(r,n))}function PZ(){var e=w$.apply(void 0,arguments);return RZ(e),e}function w$(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var n;return w$.apply(void 0,mx(n=[PZ(r[0],r[1])]).call(n,Ts(bx(r).call(r,2))))}var i=r[0],s=r[1],o=OZ(LMe(s)),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===CZ?delete i[l]:i[l]!==null&&s[l]!==null&&Oi(i[l])==="object"&&Oi(s[l])==="object"&&!Gs(i[l])&&!Gs(s[l])?i[l]=w$(i[l],s[l]):i[l]=NZ(s[l]))}}catch(u){o.e(u)}finally{o.f()}return i}function NZ(e){return Gs(e)?ca(e).call(e,function(r){return NZ(r)}):Oi(e)==="object"&&e!==null?w$({},e):e}function RZ(e){for(var r=0,t=k4(e);r<t.length;r++){var n=t[r];e[n]===CZ?delete e[n]:Oi(e[n])==="object"&&e[n]!==null&&RZ(e[n])}}function Gje(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var Yje=typeof window<"u"?window.Hammer||Kje:function(){return Gje()};function Zl(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=Yje(this._dom.overlay);n.on("tap",EY(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];xh(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){Zje(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}ije(Zl.prototype);Zl.current=null;Zl.prototype.destroy=function(){var e,r;this.deactivate();var t=OZ(A7e(e=VY(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};Zl.prototype.activate=function(){Zl.current&&Zl.current.deactivate(),Zl.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Zl.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Zl.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Zje(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var mO={},Xje={get exports(){return mO},set exports(e){mO=e}},Jje=sx,Qje=Ev,eze=TypeError,DZ=function(e){if(Jje(e))return e;throw eze(Qje(e)+" is not a constructor")},tze=Nt,rze=hs,XS=$v,nze=_Y,V7=DZ,ize=so,G7=bi,sze=Mh,BZ=xr,D4=rze("Reflect","construct"),oze=Object.prototype,aze=[].push,MZ=BZ(function(){function e(){}return!(D4(function(){},[],e)instanceof e)}),LZ=!BZ(function(){D4(function(){})}),Y7=MZ||LZ;tze({target:"Reflect",stat:!0,forced:Y7,sham:Y7},{construct:function(r,t){V7(r),ize(t);var n=arguments.length<3?r:V7(arguments[2]);if(LZ&&!MZ)return D4(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return XS(aze,i,t),new(XS(nze,r,i))}var s=n.prototype,o=sze(G7(s)?s:oze),a=XS(r,o,t);return G7(a)?a:o}});var lze=Wr,uze=lze.Reflect.construct,cze=uze,fze=cze;(function(e){e.exports=fze})(Xje);var uw=Yt(mO);function kf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $$={},hze={get exports(){return $$},set exports(e){$$=e}},bO={},dze={get exports(){return bO},set exports(e){bO=e}},pze=tZ,vze=pze,gze=vze,yze=gze;(function(e){e.exports=yze})(dze);(function(e){e.exports=bO})(hze);var mze=Yt($$),_$={},bze={get exports(){return _$},set exports(e){_$=e}},wO={},wze={get exports(){return wO},set exports(e){wO=e}},$ze=Nt,_ze=uY;$ze({target:"Object",stat:!0},{setPrototypeOf:_ze});var xze=Wr,Eze=xze.Object.setPrototypeOf,Sze=Eze,kze=Sze,Tze=kze,Ize=Tze,Aze=Ize,Oze=Aze;(function(e){e.exports=Oze})(wze);(function(e){e.exports=wO})(bze);var $O=Yt(_$),_O={},Cze={get exports(){return _O},set exports(e){_O=e}},xO={},Pze={get exports(){return xO},set exports(e){xO=e}},Nze=xY,Rze=Nze,Dze=Rze,Bze=Dze;(function(e){e.exports=Bze})(Pze);(function(e){e.exports=xO})(Cze);var FZ=Yt(_O);function EO(e,r){var t;return EO=$O?FZ(t=$O).call(t):function(i,s){return i.__proto__=s,i},EO(e,r)}function Mze(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=mze(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),nx(e,"prototype",{writable:!1}),r&&EO(e,r)}function Lze(e,r){if(r&&(Oi(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kf(e)}var x$={},Fze={get exports(){return x$},set exports(e){x$=e}},SO={},jze={get exports(){return SO},set exports(e){SO=e}},zze=YY,Hze=zze,Uze=Hze,Wze=Uze;(function(e){e.exports=Wze})(jze);(function(e){e.exports=SO})(Fze);var Z7=Yt(x$);function E$(e){var r;return E$=$O?FZ(r=Z7).call(r):function(n){return n.__proto__||Z7(n)},E$(e)}var kO={},Kze={get exports(){return kO},set exports(e){kO=e}},TO={},qze={get exports(){return TO},set exports(e){TO=e}};(function(e){var r=qy,t=v$;function n(i){"@babel/helpers - typeof";return e.exports=n=typeof r=="function"&&typeof t=="symbol"?function(s){return typeof s}:function(s){return s&&typeof r=="function"&&s.constructor===r&&s!==r.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(qze);var IO={},Vze={get exports(){return IO},set exports(e){IO=e}},AO={},Gze={get exports(){return AO},set exports(e){AO=e}},Yze=WY,Zze=Yze,Xze=Zze,Jze=Xze;(function(e){e.exports=Jze})(Gze);(function(e){e.exports=AO})(Vze);var OO={},Qze={get exports(){return OO},set exports(e){OO=e}},CO={},eHe={get exports(){return CO},set exports(e){CO=e}},X7=qn,tHe=S4,rHe=Dh,nHe=io,iHe=function(e,r,t){for(var n=tHe(r),i=nHe.f,s=rHe.f,o=0;o<n.length;o++){var a=n[o];!X7(e,a)&&!(t&&X7(t,a))&&i(e,a,s(r,a))}},sHe=bi,oHe=_u,aHe=function(e,r){sHe(r)&&"cause"in r&&oHe(e,"cause",r.cause)},lHe=Br,jZ=Error,uHe=lHe("".replace),cHe=function(e){return String(jZ(e).stack)}("zxcasd"),zZ=/\n\s*at [^:]*:[^\n]*/,fHe=zZ.test(cHe),hHe=function(e,r){if(fHe&&typeof e=="string"&&!jZ.prepareStackTrace)for(;r--;)e=uHe(e,zZ,"");return e},dHe=xr,pHe=Bh,vHe=!dHe(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",pHe(1,7)),e.stack!==7):!0}),gHe=_u,yHe=hHe,mHe=vHe,J7=Error.captureStackTrace,bHe=function(e,r,t,n){mHe&&(J7?J7(e,r):gHe(e,"stack",yHe(t,n)))},wHe=Vc,$He=mi,_He=so,xHe=Ev,EHe=TY,SHe=oo,Q7=an,kHe=x4,THe=gx,eL=kY,IHe=TypeError,cw=function(e,r){this.stopped=e,this.result=r},tL=cw.prototype,jh=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=wHe(r,n),u,h,c,d,y,w,b,T=function(A){return u&&eL(u,"normal",A),new cw(!0,A)},x=function(A){return i?(_He(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(h=THe(e),!h)throw IHe(xHe(e)+" is not iterable");if(EHe(h)){for(c=0,d=SHe(e);d>c;c++)if(y=x(e[c]),y&&Q7(tL,y))return y;return new cw(!1)}u=kHe(e,h)}for(w=s?e.next:u.next;!(b=$He(w,u)).done;){try{y=x(b.value)}catch(A){eL(u,"throw",A)}if(typeof y=="object"&&y&&Q7(tL,y))return y}return new cw(!1)},AHe=bl,OHe=function(e,r){return e===void 0?arguments.length<2?"":r:AHe(e)},CHe=Nt,PHe=an,NHe=px,S$=uY,RHe=iHe,HZ=Mh,JS=_u,QS=Bh,DHe=aHe,BHe=bHe,MHe=jh,LHe=OHe,FHe=ln,jHe=FHe("toStringTag"),k$=Error,zHe=[].push,Gp=function(r,t){var n=PHe(ek,this),i;S$?i=S$(k$(),n?NHe(this):ek):(i=n?this:HZ(ek),JS(i,jHe,"Error")),t!==void 0&&JS(i,"message",LHe(t)),BHe(i,Gp,i.stack,1),arguments.length>2&&DHe(i,arguments[2]);var s=[];return MHe(r,zHe,{that:s}),JS(i,"errors",s),i};S$?S$(Gp,k$):RHe(Gp,k$,{name:!0});var ek=Gp.prototype=HZ(k$.prototype,{constructor:QS(1,Gp),message:QS(1,""),name:QS(1,"AggregateError")});CHe({global:!0,constructor:!0,arity:2},{AggregateError:Gp});var HHe=hs,UHe=d4,WHe=ln,KHe=ni,rL=WHe("species"),UZ=function(e){var r=HHe(e);KHe&&r&&!r[rL]&&UHe(r,rL,{configurable:!0,get:function(){return this}})},qHe=an,VHe=TypeError,B4=function(e,r){if(qHe(r,e))return e;throw VHe("Incorrect invocation")},nL=so,GHe=DZ,YHe=Dm,ZHe=ln,XHe=ZHe("species"),WZ=function(e,r){var t=nL(e).constructor,n;return t===void 0||YHe(n=nL(t)[XHe])?r:GHe(n)},JHe=qc,KZ=/(?:ipad|iphone|ipod).*applewebkit/i.test(JHe),to=bn,QHe=$v,eUe=Vc,iL=wn,tUe=qn,qZ=xr,sL=AG,rUe=Vm,oL=o4,nUe=rZ,iUe=KZ,sUe=Zm,PO=to.setImmediate,NO=to.clearImmediate,oUe=to.process,tk=to.Dispatch,aUe=to.Function,aL=to.MessageChannel,lUe=to.String,rk=0,dy={},lL="onreadystatechange",tm,xf,nk,ik;qZ(function(){tm=to.location});var M4=function(e){if(tUe(dy,e)){var r=dy[e];delete dy[e],r()}},sk=function(e){return function(){M4(e)}},uL=function(e){M4(e.data)},cL=function(e){to.postMessage(lUe(e),tm.protocol+"//"+tm.host)};(!PO||!NO)&&(PO=function(r){nUe(arguments.length,1);var t=iL(r)?r:aUe(r),n=rUe(arguments,1);return dy[++rk]=function(){QHe(t,void 0,n)},xf(rk),rk},NO=function(r){delete dy[r]},sUe?xf=function(e){oUe.nextTick(sk(e))}:tk&&tk.now?xf=function(e){tk.now(sk(e))}:aL&&!iUe?(nk=new aL,ik=nk.port2,nk.port1.onmessage=uL,xf=eUe(ik.postMessage,ik)):to.addEventListener&&iL(to.postMessage)&&!to.importScripts&&tm&&tm.protocol!=="file:"&&!qZ(cL)?(xf=cL,to.addEventListener("message",uL,!1)):lL in oL("script")?xf=function(e){sL.appendChild(oL("script"))[lL]=function(){sL.removeChild(this),M4(e)}}:xf=function(e){setTimeout(sk(e),0)});var VZ={set:PO,clear:NO},GZ=function(){this.head=null,this.tail=null};GZ.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var YZ=GZ,uUe=qc,cUe=/ipad|iphone|ipod/i.test(uUe)&&typeof Pebble<"u",fUe=qc,hUe=/web0s(?!.*chrome)/i.test(fUe),Th=bn,fL=Vc,dUe=Dh.f,ok=VZ.set,pUe=YZ,vUe=KZ,gUe=cUe,yUe=hUe,ak=Zm,hL=Th.MutationObserver||Th.WebKitMutationObserver,dL=Th.document,pL=Th.process,c1=Th.Promise,vL=dUe(Th,"queueMicrotask"),RO=vL&&vL.value,Cd,lk,uk,f1,gL;if(!RO){var h1=new pUe,d1=function(){var e,r;for(ak&&(e=pL.domain)&&e.exit();r=h1.get();)try{r()}catch(t){throw h1.head&&Cd(),t}e&&e.enter()};!vUe&&!ak&&!yUe&&hL&&dL?(lk=!0,uk=dL.createTextNode(""),new hL(d1).observe(uk,{characterData:!0}),Cd=function(){uk.data=lk=!lk}):!gUe&&c1&&c1.resolve?(f1=c1.resolve(void 0),f1.constructor=c1,gL=fL(f1.then,f1),Cd=function(){gL(d1)}):ak?Cd=function(){pL.nextTick(d1)}:(ok=fL(ok,Th),Cd=function(){ok(d1)}),RO=function(e){h1.head||Cd(),h1.add(e)}}var mUe=RO,bUe=function(e,r){try{arguments.length==1?console.error(e):console.error(e,r)}catch{}},Cv=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},wUe=bn,Pv=wUe.Promise,ZZ=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",$Ue=ZZ,_Ue=Zm,xUe=!$Ue&&!_Ue&&typeof window=="object"&&typeof document=="object",EUe=bn,py=Pv,SUe=wn,kUe=yG,TUe=_G,IUe=ln,AUe=xUe,OUe=ZZ,ck=_v,yL=py&&py.prototype,CUe=IUe("species"),DO=!1,XZ=SUe(EUe.PromiseRejectionEvent),PUe=kUe("Promise",function(){var e=TUe(py),r=e!==String(py);if(!r&&ck===66||!(yL.catch&&yL.finally))return!0;if(!ck||ck<51||!/native code/.test(e)){var t=new py(function(s){s(1)}),n=function(s){s(function(){},function(){})},i=t.constructor={};if(i[CUe]=n,DO=t.then(function(){})instanceof n,!DO)return!0}return!r&&(AUe||OUe)&&!XZ}),n0={CONSTRUCTOR:PUe,REJECTION_EVENT:XZ,SUBCLASSING:DO},Eu={},mL=Bs,NUe=TypeError,RUe=function(e){var r,t;this.promise=new e(function(n,i){if(r!==void 0||t!==void 0)throw NUe("Bad Promise constructor");r=n,t=i}),this.resolve=mL(r),this.reject=mL(t)};Eu.f=function(e){return new RUe(e)};var DUe=Nt,T$=Zm,Fc=bn,i0=mi,BUe=kv,MUe=Lh,LUe=UZ,FUe=Bs,BO=wn,jUe=bi,zUe=B4,HUe=WZ,JZ=VZ.set,L4=mUe,UUe=bUe,WUe=Cv,KUe=YZ,QZ=Tv,MO=Pv,eX=n0,tX=Eu,_x="Promise",rX=eX.CONSTRUCTOR,qUe=eX.REJECTION_EVENT,fk=QZ.getterFor(_x),VUe=QZ.set,GUe=MO&&MO.prototype,ep=MO,hk=GUe,nX=Fc.TypeError,LO=Fc.document,F4=Fc.process,FO=tX.f,YUe=FO,ZUe=!!(LO&&LO.createEvent&&Fc.dispatchEvent),iX="unhandledrejection",XUe="rejectionhandled",bL=0,sX=1,JUe=2,j4=1,oX=2,p1,wL,QUe,aX=function(e){var r;return jUe(e)&&BO(r=e.then)?r:!1},lX=function(e,r){var t=r.value,n=r.state==sX,i=n?e.ok:e.fail,s=e.resolve,o=e.reject,a=e.domain,l,u,h;try{i?(n||(r.rejection===oX&&tWe(r),r.rejection=j4),i===!0?l=t:(a&&a.enter(),l=i(t),a&&(a.exit(),h=!0)),l===e.promise?o(nX("Promise-chain cycle")):(u=aX(l))?i0(u,l,s,o):s(l)):o(t)}catch(c){a&&!h&&a.exit(),o(c)}},uX=function(e,r){e.notified||(e.notified=!0,L4(function(){for(var t=e.reactions,n;n=t.get();)lX(n,e);e.notified=!1,r&&!e.rejection&&eWe(e)}))},cX=function(e,r,t){var n,i;ZUe?(n=LO.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Fc.dispatchEvent(n)):n={promise:r,reason:t},!qUe&&(i=Fc["on"+e])?i(n):e===iX&&UUe("Unhandled promise rejection",t)},eWe=function(e){i0(JZ,Fc,function(){var r=e.facade,t=e.value,n=$L(e),i;if(n&&(i=WUe(function(){T$?F4.emit("unhandledRejection",t,r):cX(iX,r,t)}),e.rejection=T$||$L(e)?oX:j4,i.error))throw i.value})},$L=function(e){return e.rejection!==j4&&!e.parent},tWe=function(e){i0(JZ,Fc,function(){var r=e.facade;T$?F4.emit("rejectionHandled",r):cX(XUe,r,e.value)})},tp=function(e,r,t){return function(n){e(r,n,t)}},bp=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=JUe,uX(e,!0))},jO=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw nX("Promise can't be resolved itself");var n=aX(r);n?L4(function(){var i={done:!1};try{i0(n,r,tp(jO,i,e),tp(bp,i,e))}catch(s){bp(i,s,e)}}):(e.value=r,e.state=sX,uX(e,!1))}catch(i){bp({done:!1},i,e)}}};rX&&(ep=function(r){zUe(this,hk),FUe(r),i0(p1,this);var t=fk(this);try{r(tp(jO,t),tp(bp,t))}catch(n){bp(t,n)}},hk=ep.prototype,p1=function(r){VUe(this,{type:_x,done:!1,notified:!1,parent:!1,reactions:new KUe,rejection:!1,state:bL,value:void 0})},p1.prototype=BUe(hk,"then",function(r,t){var n=fk(this),i=FO(HUe(this,ep));return n.parent=!0,i.ok=BO(r)?r:!0,i.fail=BO(t)&&t,i.domain=T$?F4.domain:void 0,n.state==bL?n.reactions.add(i):L4(function(){lX(i,n)}),i.promise}),wL=function(){var e=new p1,r=fk(e);this.promise=e,this.resolve=tp(jO,r),this.reject=tp(bp,r)},tX.f=FO=function(e){return e===ep||e===QUe?new wL(e):YUe(e)});DUe({global:!0,constructor:!0,wrap:!0,forced:rX},{Promise:ep});MUe(ep,_x,!1,!0);LUe(_x);var rWe=Pv,nWe=OY,iWe=n0.CONSTRUCTOR,xx=iWe||!nWe(function(e){rWe.all(e).then(void 0,function(){})}),sWe=Nt,oWe=mi,aWe=Bs,lWe=Eu,uWe=Cv,cWe=jh,fWe=xx;sWe({target:"Promise",stat:!0,forced:fWe},{all:function(r){var t=this,n=lWe.f(t),i=n.resolve,s=n.reject,o=uWe(function(){var a=aWe(t.resolve),l=[],u=0,h=1;cWe(r,function(c){var d=u++,y=!1;h++,oWe(a,t,c).then(function(w){y||(y=!0,l[d]=w,--h||i(l))},s)}),--h||i(l)});return o.error&&s(o.value),n.promise}});var hWe=Nt,dWe=n0.CONSTRUCTOR,_L=Pv;_L&&_L.prototype;hWe({target:"Promise",proto:!0,forced:dWe,real:!0},{catch:function(e){return this.then(void 0,e)}});var pWe=Nt,vWe=mi,gWe=Bs,yWe=Eu,mWe=Cv,bWe=jh,wWe=xx;pWe({target:"Promise",stat:!0,forced:wWe},{race:function(r){var t=this,n=yWe.f(t),i=n.reject,s=mWe(function(){var o=gWe(t.resolve);bWe(r,function(a){vWe(o,t,a).then(n.resolve,i)})});return s.error&&i(s.value),n.promise}});var $We=Nt,_We=mi,xWe=Eu,EWe=n0.CONSTRUCTOR;$We({target:"Promise",stat:!0,forced:EWe},{reject:function(r){var t=xWe.f(this);return _We(t.reject,void 0,r),t.promise}});var SWe=so,kWe=bi,TWe=Eu,fX=function(e,r){if(SWe(e),kWe(r)&&r.constructor===e)return r;var t=TWe.f(e),n=t.resolve;return n(r),t.promise},IWe=Nt,AWe=hs,OWe=HOe,CWe=Pv,PWe=n0.CONSTRUCTOR,NWe=fX,RWe=AWe("Promise"),DWe=!PWe;IWe({target:"Promise",stat:!0,forced:OWe},{resolve:function(r){return NWe(DWe&&this===RWe?CWe:this,r)}});var BWe=Nt,MWe=mi,LWe=Bs,FWe=Eu,jWe=Cv,zWe=jh,HWe=xx;BWe({target:"Promise",stat:!0,forced:HWe},{allSettled:function(r){var t=this,n=FWe.f(t),i=n.resolve,s=n.reject,o=jWe(function(){var a=LWe(t.resolve),l=[],u=0,h=1;zWe(r,function(c){var d=u++,y=!1;h++,MWe(a,t,c).then(function(w){y||(y=!0,l[d]={status:"fulfilled",value:w},--h||i(l))},function(w){y||(y=!0,l[d]={status:"rejected",reason:w},--h||i(l))})}),--h||i(l)});return o.error&&s(o.value),n.promise}});var UWe=Nt,WWe=mi,KWe=Bs,qWe=hs,VWe=Eu,GWe=Cv,YWe=jh,ZWe=xx,xL="No one promise resolved";UWe({target:"Promise",stat:!0,forced:ZWe},{any:function(r){var t=this,n=qWe("AggregateError"),i=VWe.f(t),s=i.resolve,o=i.reject,a=GWe(function(){var l=KWe(t.resolve),u=[],h=0,c=1,d=!1;YWe(r,function(y){var w=h++,b=!1;c++,WWe(l,t,y).then(function(T){b||d||(d=!0,s(T))},function(T){b||d||(b=!0,u[w]=T,--c||o(new n(u,xL)))})}),--c||o(new n(u,xL))});return a.error&&o(a.value),i.promise}});var XWe=Nt,zO=Pv,JWe=xr,QWe=hs,eKe=wn,tKe=WZ,EL=fX,rKe=zO&&zO.prototype,nKe=!!zO&&JWe(function(){rKe.finally.call({then:function(){}},function(){})});XWe({target:"Promise",proto:!0,real:!0,forced:nKe},{finally:function(e){var r=tKe(this,QWe("Promise")),t=eKe(e);return this.then(t?function(n){return EL(r,e()).then(function(){return n})}:e,t?function(n){return EL(r,e()).then(function(){throw n})}:e)}});var iKe=Wr,sKe=iKe.Promise,oKe=sKe,aKe=oKe,lKe=aKe,uKe=lKe,cKe=Nt,fKe=Eu,hKe=Cv;cKe({target:"Promise",stat:!0,forced:!0},{try:function(e){var r=fKe.f(this),t=hKe(e);return(t.error?r.reject:r.resolve)(t.value),r.promise}});var dKe=uKe,pKe=dKe;(function(e){e.exports=pKe})(eHe);(function(e){e.exports=CO})(Qze);var HO={},vKe={get exports(){return HO},set exports(e){HO=e}},UO={},gKe={get exports(){return UO},set exports(e){UO=e}},yKe=KY,mKe=yKe,bKe=mKe,wKe=bKe;(function(e){e.exports=wKe})(gKe);(function(e){e.exports=UO})(vKe);(function(e){var r=TO.default,t=c$,n=qy,i=$$,s=x$,o=IO,a=_$,l=OO,u=HO,h=g$;function c(){e.exports=c=function(){return d},e.exports.__esModule=!0,e.exports.default=e.exports;var d={},y=Object.prototype,w=y.hasOwnProperty,b=t||function(_e,pe,Te){_e[pe]=Te.value},T=typeof n=="function"?n:{},x=T.iterator||"@@iterator",A=T.asyncIterator||"@@asyncIterator",_=T.toStringTag||"@@toStringTag";function I(_e,pe,Te){return t(_e,pe,{value:Te,enumerable:!0,configurable:!0,writable:!0}),_e[pe]}try{I({},"")}catch{I=function(Te,je,$){return Te[je]=$}}function O(_e,pe,Te,je){var $=pe&&pe.prototype instanceof R?pe:R,S=i($.prototype),N=new Ue(je||[]);return b(S,"_invoke",{value:se(_e,Te,N)}),S}function C(_e,pe,Te){try{return{type:"normal",arg:_e.call(pe,Te)}}catch(je){return{type:"throw",arg:je}}}d.wrap=O;var g={};function R(){}function M(){}function L(){}var W={};I(W,x,function(){return this});var X=s,te=X&&X(X(Ge([])));te&&te!==y&&w.call(te,x)&&(W=te);var J=L.prototype=R.prototype=i(W);function j(_e){var pe;o(pe=["next","throw","return"]).call(pe,function(Te){I(_e,Te,function(je){return this._invoke(Te,je)})})}function Z(_e,pe){function Te($,S,N,F){var z=C(_e[$],_e,S);if(z.type!=="throw"){var V=z.arg,ae=V.value;return ae&&r(ae)=="object"&&w.call(ae,"__await")?pe.resolve(ae.__await).then(function(ve){Te("next",ve,N,F)},function(ve){Te("throw",ve,N,F)}):pe.resolve(ae).then(function(ve){V.value=ve,N(V)},function(ve){return Te("throw",ve,N,F)})}F(z.arg)}var je;b(this,"_invoke",{value:function(S,N){function F(){return new pe(function(z,V){Te(S,N,z,V)})}return je=je?je.then(F,F):F()}})}function se(_e,pe,Te){var je="suspendedStart";return function($,S){if(je==="executing")throw new Error("Generator is already running");if(je==="completed"){if($==="throw")throw S;return it()}for(Te.method=$,Te.arg=S;;){var N=Te.delegate;if(N){var F=Ee(N,Te);if(F){if(F===g)continue;return F}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(je==="suspendedStart")throw je="completed",Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);je="executing";var z=C(_e,pe,Te);if(z.type==="normal"){if(je=Te.done?"completed":"suspendedYield",z.arg===g)continue;return{value:z.arg,done:Te.done}}z.type==="throw"&&(je="completed",Te.method="throw",Te.arg=z.arg)}}}function Ee(_e,pe){var Te=pe.method,je=_e.iterator[Te];if(je===void 0)return pe.delegate=null,Te==="throw"&&_e.iterator.return&&(pe.method="return",pe.arg=void 0,Ee(_e,pe),pe.method==="throw")||Te!=="return"&&(pe.method="throw",pe.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),g;var $=C(je,_e.iterator,pe.arg);if($.type==="throw")return pe.method="throw",pe.arg=$.arg,pe.delegate=null,g;var S=$.arg;return S?S.done?(pe[_e.resultName]=S.value,pe.next=_e.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=void 0),pe.delegate=null,g):S:(pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,g)}function me(_e){var pe={tryLoc:_e[0]};1 in _e&&(pe.catchLoc=_e[1]),2 in _e&&(pe.finallyLoc=_e[2],pe.afterLoc=_e[3]),this.tryEntries.push(pe)}function Pe(_e){var pe=_e.completion||{};pe.type="normal",delete pe.arg,_e.completion=pe}function Ue(_e){this.tryEntries=[{tryLoc:"root"}],o(_e).call(_e,me,this),this.reset(!0)}function Ge(_e){if(_e){var pe=_e[x];if(pe)return pe.call(_e);if(typeof _e.next=="function")return _e;if(!isNaN(_e.length)){var Te=-1,je=function $(){for(;++Te<_e.length;)if(w.call(_e,Te))return $.value=_e[Te],$.done=!1,$;return $.value=void 0,$.done=!0,$};return je.next=je}}return{next:it}}function it(){return{value:void 0,done:!0}}return M.prototype=L,b(J,"constructor",{value:L,configurable:!0}),b(L,"constructor",{value:M,configurable:!0}),M.displayName=I(L,_,"GeneratorFunction"),d.isGeneratorFunction=function(_e){var pe=typeof _e=="function"&&_e.constructor;return!!pe&&(pe===M||(pe.displayName||pe.name)==="GeneratorFunction")},d.mark=function(_e){return a?a(_e,L):(_e.__proto__=L,I(_e,_,"GeneratorFunction")),_e.prototype=i(J),_e},d.awrap=function(_e){return{__await:_e}},j(Z.prototype),I(Z.prototype,A,function(){return this}),d.AsyncIterator=Z,d.async=function(_e,pe,Te,je,$){$===void 0&&($=l);var S=new Z(O(_e,pe,Te,je),$);return d.isGeneratorFunction(pe)?S:S.next().then(function(N){return N.done?N.value:S.next()})},j(J),I(J,_,"Generator"),I(J,x,function(){return this}),I(J,"toString",function(){return"[object Generator]"}),d.keys=function(_e){var pe=Object(_e),Te=[];for(var je in pe)Te.push(je);return u(Te).call(Te),function $(){for(;Te.length;){var S=Te.pop();if(S in pe)return $.value=S,$.done=!1,$}return $.done=!0,$}},d.values=Ge,Ue.prototype={constructor:Ue,reset:function(pe){var Te;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(Te=this.tryEntries).call(Te,Pe),!pe)for(var je in this)je.charAt(0)==="t"&&w.call(this,je)&&!isNaN(+h(je).call(je,1))&&(this[je]=void 0)},stop:function(){this.done=!0;var pe=this.tryEntries[0].completion;if(pe.type==="throw")throw pe.arg;return this.rval},dispatchException:function(pe){if(this.done)throw pe;var Te=this;function je(V,ae){return N.type="throw",N.arg=pe,Te.next=V,ae&&(Te.method="next",Te.arg=void 0),!!ae}for(var $=this.tryEntries.length-1;$>=0;--$){var S=this.tryEntries[$],N=S.completion;if(S.tryLoc==="root")return je("end");if(S.tryLoc<=this.prev){var F=w.call(S,"catchLoc"),z=w.call(S,"finallyLoc");if(F&&z){if(this.prev<S.catchLoc)return je(S.catchLoc,!0);if(this.prev<S.finallyLoc)return je(S.finallyLoc)}else if(F){if(this.prev<S.catchLoc)return je(S.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return je(S.finallyLoc)}}}},abrupt:function(pe,Te){for(var je=this.tryEntries.length-1;je>=0;--je){var $=this.tryEntries[je];if($.tryLoc<=this.prev&&w.call($,"finallyLoc")&&this.prev<$.finallyLoc){var S=$;break}}S&&(pe==="break"||pe==="continue")&&S.tryLoc<=Te&&Te<=S.finallyLoc&&(S=null);var N=S?S.completion:{};return N.type=pe,N.arg=Te,S?(this.method="next",this.next=S.finallyLoc,g):this.complete(N)},complete:function(pe,Te){if(pe.type==="throw")throw pe.arg;return pe.type==="break"||pe.type==="continue"?this.next=pe.arg:pe.type==="return"?(this.rval=this.arg=pe.arg,this.method="return",this.next="end"):pe.type==="normal"&&Te&&(this.next=Te),g},finish:function(pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.finallyLoc===pe)return this.complete(je.completion,je.afterLoc),Pe(je),g}},catch:function(pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.tryLoc===pe){var $=je.completion;if($.type==="throw"){var S=$.arg;Pe(je)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(pe,Te,je){return this.delegate={iterator:Ge(pe),resultName:Te,nextLoc:je},this.method==="next"&&(this.arg=void 0),g}},d}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports})(Kze);var fw=kO(),xs=fw;try{regeneratorRuntime=fw}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=fw:Function("r","regeneratorRuntime = r")(fw)}var WO={},$Ke={get exports(){return WO},set exports(e){WO=e}},I$={},_Ke={get exports(){return I$},set exports(e){I$=e}},xKe=xr,EKe=xKe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),SKe=xr,kKe=bi,TKe=$u,SL=EKe,hw=Object.isExtensible,IKe=SKe(function(){hw(1)}),AKe=IKe||SL?function(r){return!kKe(r)||SL&&TKe(r)=="ArrayBuffer"?!1:hw?hw(r):!0}:hw,OKe=xr,CKe=!OKe(function(){return Object.isExtensible(Object.preventExtensions({}))}),PKe=Nt,NKe=Br,RKe=zm,DKe=bi,z4=qn,BKe=io.f,kL=Um,MKe=h4,H4=AKe,LKe=tx,FKe=CKe,hX=!1,pu=LKe("meta"),jKe=0,U4=function(e){BKe(e,pu,{value:{objectID:"O"+jKe++,weakData:{}}})},zKe=function(e,r){if(!DKe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!z4(e,pu)){if(!H4(e))return"F";if(!r)return"E";U4(e)}return e[pu].objectID},HKe=function(e,r){if(!z4(e,pu)){if(!H4(e))return!0;if(!r)return!1;U4(e)}return e[pu].weakData},UKe=function(e){return FKe&&hX&&H4(e)&&!z4(e,pu)&&U4(e),e},WKe=function(){KKe.enable=function(){},hX=!0;var e=kL.f,r=NKe([].splice),t={};t[pu]=1,e(t).length&&(kL.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===pu){r(i,s,1);break}return i},PKe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:MKe.f}))},KKe=_Ke.exports={enable:WKe,fastKey:zKe,getWeakData:HKe,onFreeze:UKe};RKe[pu]=!0;var qKe=Nt,VKe=bn,GKe=I$,YKe=xr,ZKe=_u,XKe=jh,JKe=B4,QKe=wn,eqe=bi,tqe=Lh,rqe=io.f,nqe=Iv.forEach,iqe=ni,dX=Tv,sqe=dX.set,oqe=dX.getterFor,pX=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=VKe[e],a=o&&o.prototype,l={},u;if(!iqe||!QKe(o)||!(i||a.forEach&&!YKe(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),GKe.enable();else{u=r(function(d,y){sqe(JKe(d,h),{type:e,collection:new o}),y!=null&&XKe(y,d[s],{that:d,AS_ENTRIES:n})});var h=u.prototype,c=oqe(e);nqe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(d){var y=d=="add"||d=="set";d in a&&!(i&&d=="clear")&&ZKe(h,d,function(w,b){var T=c(this).collection;if(!y&&i&&!eqe(w))return d=="get"?void 0:!1;var x=T[d](w===0?0:w,b);return y?this:x})}),i||rqe(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return tqe(u,e,!1,!0),l[e]=u,qKe({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},aqe=kv,lqe=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:aqe(e,n,r[n],t);return e},uqe=Mh,cqe=d4,TL=lqe,fqe=Vc,hqe=B4,dqe=Dm,pqe=jh,vqe=w4,v1=$4,gqe=UZ,Og=ni,IL=I$.fastKey,vX=Tv,AL=vX.set,dk=vX.getterFor,gX={getConstructor:function(e,r,t,n){var i=e(function(u,h){hqe(u,s),AL(u,{type:r,index:uqe(null),first:void 0,last:void 0,size:0}),Og||(u.size=0),dqe(h)||pqe(h,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=dk(r),a=function(u,h,c){var d=o(u),y=l(u,h),w,b;return y?y.value=c:(d.last=y={index:b=IL(h,!0),key:h,value:c,previous:w=d.last,next:void 0,removed:!1},d.first||(d.first=y),w&&(w.next=y),Og?d.size++:u.size++,b!=="F"&&(d.index[b]=y)),u},l=function(u,h){var c=o(u),d=IL(h),y;if(d!=="F")return c.index[d];for(y=c.first;y;y=y.next)if(y.key==h)return y};return TL(s,{clear:function(){for(var h=this,c=o(h),d=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete d[y.index],y=y.next;c.first=c.last=void 0,Og?c.size=0:h.size=0},delete:function(u){var h=this,c=o(h),d=l(h,u);if(d){var y=d.next,w=d.previous;delete c.index[d.index],d.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==d&&(c.first=y),c.last==d&&(c.last=w),Og?c.size--:h.size--}return!!d},forEach:function(h){for(var c=o(this),d=fqe(h,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(d(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(h){return!!l(this,h)}}),TL(s,t?{get:function(h){var c=l(this,h);return c&&c.value},set:function(h,c){return a(this,h===0?0:h,c)}}:{add:function(h){return a(this,h=h===0?0:h,h)}}),Og&&cqe(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=dk(r),s=dk(n);vqe(e,r,function(o,a){AL(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,v1(void 0,!0)):a=="keys"?v1(l.key,!1):a=="values"?v1(l.value,!1):v1([l.key,l.value],!1)},t?"entries":"values",!t,!0),gqe(r)}},yqe=pX,mqe=gX;yqe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},mqe);var bqe=Wr,wqe=bqe.Map,$qe=wqe,_qe=$qe;(function(e){e.exports=_qe})($Ke);var yX=Yt(WO),KO={},xqe={get exports(){return KO},set exports(e){KO=e}},Eqe=Nt,Sqe=Iv.some,kqe=Ym,Tqe=kqe("some");Eqe({target:"Array",proto:!0,forced:!Tqe},{some:function(r){return Sqe(this,r,arguments.length>1?arguments[1]:void 0)}});var Iqe=Vn,Aqe=Iqe("Array").some,Oqe=an,Cqe=Aqe,pk=Array.prototype,Pqe=function(e){var r=e.some;return e===pk||Oqe(pk,e)&&r===pk.some?Cqe:r},Nqe=Pqe,Rqe=Nqe;(function(e){e.exports=Rqe})(xqe);var Dqe=Yt(KO),qO={},Bqe={get exports(){return qO},set exports(e){qO=e}},Mqe=Vn,Lqe=Mqe("Array").keys,Fqe=Lqe,jqe=Fqe,zqe=xu,Hqe=qn,Uqe=an,Wqe=jqe,vk=Array.prototype,Kqe={DOMTokenList:!0,NodeList:!0},qqe=function(e){var r=e.keys;return e===vk||Uqe(vk,e)&&r===vk.keys||Hqe(Kqe,zqe(e))?Wqe:r};(function(e){e.exports=qqe})(Bqe);var Pd=Yt(qO),VO={},Vqe={get exports(){return VO},set exports(e){VO=e}},OL=PG,Gqe=Math.floor,GO=function(e,r){var t=e.length,n=Gqe(t/2);return t<8?Yqe(e,r):Zqe(e,GO(OL(e,0,n),r),GO(OL(e,n),r),r)},Yqe=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},Zqe=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},Xqe=GO,Jqe=qc,CL=Jqe.match(/firefox\/(\d+)/i),Qqe=!!CL&&+CL[1],eVe=qc,tVe=/MSIE|Trident/.test(eVe),rVe=qc,PL=rVe.match(/AppleWebKit\/(\d+)\./),nVe=!!PL&&+PL[1],iVe=Nt,mX=Br,sVe=Bs,oVe=Ms,NL=oo,aVe=qY,RL=bl,W4=xr,lVe=Xqe,uVe=Ym,DL=Qqe,cVe=tVe,BL=_v,ML=nVe,mc=[],LL=mX(mc.sort),fVe=mX(mc.push),hVe=W4(function(){mc.sort(void 0)}),dVe=W4(function(){mc.sort(null)}),pVe=uVe("sort"),bX=!W4(function(){if(BL)return BL<70;if(!(DL&&DL>3)){if(cVe)return!0;if(ML)return ML<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)mc.push({k:t+i,v:n})}for(mc.sort(function(s,o){return o.v-s.v}),i=0;i<mc.length;i++)t=mc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),vVe=hVe||!dVe||!pVe||!bX,gVe=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:RL(r)>RL(t)?1:-1}};iVe({target:"Array",proto:!0,forced:vVe},{sort:function(r){r!==void 0&&sVe(r);var t=oVe(this);if(bX)return r===void 0?LL(t):LL(t,r);var n=[],i=NL(t),s,o;for(o=0;o<i;o++)o in t&&fVe(n,t[o]);for(lVe(n,gVe(r)),s=NL(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)aVe(t,o++);return t}});var yVe=Vn,mVe=yVe("Array").sort,bVe=an,wVe=mVe,gk=Array.prototype,$Ve=function(e){var r=e.sort;return e===gk||bVe(gk,e)&&r===gk.sort?wVe:r},_Ve=$Ve,xVe=_Ve;(function(e){e.exports=xVe})(Vqe);var YO=Yt(VO),ZO={},EVe={get exports(){return ZO},set exports(e){ZO=e}},SVe=Vn,kVe=SVe("Array").values,TVe=kVe,IVe=TVe,AVe=xu,OVe=qn,CVe=an,PVe=IVe,yk=Array.prototype,NVe={DOMTokenList:!0,NodeList:!0},RVe=function(e){var r=e.values;return e===yk||CVe(yk,e)&&r===yk.values||OVe(NVe,AVe(e))?PVe:r};(function(e){e.exports=RVe})(EVe);var FL=Yt(ZO),XO={},DVe={get exports(){return XO},set exports(e){XO=e}};(function(e){e.exports=mY})(DVe);var wp=Yt(XO),JO={},BVe={get exports(){return JO},set exports(e){JO=e}},MVe=Vn,LVe=MVe("Array").entries,FVe=LVe,jVe=FVe,zVe=xu,HVe=qn,UVe=an,WVe=jVe,mk=Array.prototype,KVe={DOMTokenList:!0,NodeList:!0},qVe=function(e){var r=e.entries;return e===mk||UVe(mk,e)&&r===mk.entries||HVe(KVe,zVe(e))?WVe:r};(function(e){e.exports=qVe})(BVe);var VVe=Yt(JO);let g1;const GVe=new Uint8Array(16);function YVe(){if(!g1&&(g1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g1(GVe)}const Si=[];for(let e=0;e<256;++e)Si.push((e+256).toString(16).slice(1));function ZVe(e,r=0){return(Si[e[r+0]]+Si[e[r+1]]+Si[e[r+2]]+Si[e[r+3]]+"-"+Si[e[r+4]]+Si[e[r+5]]+"-"+Si[e[r+6]]+Si[e[r+7]]+"-"+Si[e[r+8]]+Si[e[r+9]]+"-"+Si[e[r+10]]+Si[e[r+11]]+Si[e[r+12]]+Si[e[r+13]]+Si[e[r+14]]+Si[e[r+15]]).toLowerCase()}const XVe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var jL={randomUUID:XVe};function JVe(e,r,t){if(jL.randomUUID&&!r&&!e)return jL.randomUUID();e=e||{};const n=e.random||(e.rng||YVe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return ZVe(n)}function zL(e){return typeof e=="string"||typeof e=="number"}var QVe=function(){function e(r){Q_(this,e),kn(this,"delay",void 0),kn(this,"max",void 0),kn(this,"_queue",[]),kn(this,"_timeout",null),kn(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(r)}return vx(e,[{key:"setOptions",value:function(t){t&&typeof t.delay<"u"&&(this.delay=t.delay),t&&typeof t.max<"u"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,n=this._extended.methods,i=0;i<n.length;i++){var s=n[i];s.original?t[s.name]=s.original:delete t[s.name]}this._extended=null}}},{key:"replace",value:function(t,n){var i=this,s=t[n];if(!s)throw new Error("Method "+n+" undefined");t[n]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=UFe(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,n;xh(t=VY(n=this._queue).call(n,0)).call(t,function(i){i.fn.apply(i.context||i.fn,i.args||[])})}}],[{key:"extend",value:function(t,n){var i=new e(n);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var s=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];s.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:s},i}}]),e}(),eGe=function(){function e(){Q_(this,e),kn(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),kn(this,"subscribe",e.prototype.on),kn(this,"unsubscribe",e.prototype.off)}return vx(e,[{key:"_trigger",value:function(t,n,i){var s,o;if(t==="*")throw new Error("Cannot trigger event *");xh(s=mx(o=[]).call(o,Ts(this._subscribers[t]),Ts(this._subscribers["*"]))).call(s,function(a){a(t,n,i??null)})}},{key:"on",value:function(t,n){typeof n=="function"&&this._subscribers[t].push(n)}},{key:"off",value:function(t,n){var i;this._subscribers[t]=Xd(i=this._subscribers[t]).call(i,function(s){return s!==n})}}]),e}(),QO={},tGe={get exports(){return QO},set exports(e){QO=e}},rGe=pX,nGe=gX;rGe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},nGe);var iGe=Wr,sGe=iGe.Set,oGe=sGe,aGe=oGe;(function(e){e.exports=aGe})(tGe);var bk=Yt(QO),e5={},lGe={get exports(){return e5},set exports(e){e5=e}},t5={},uGe={get exports(){return t5},set exports(e){t5=e}},cGe=x4,fGe=cGe,hGe=fGe,dGe=hGe,pGe=dGe,vGe=pGe,gGe=vGe,yGe=gGe;(function(e){e.exports=yGe})(uGe);(function(e){e.exports=t5})(lGe);var wk=Yt(e5),wX;function Xa(e,r){var t=typeof yx<"u"&&Xm(e)||e["@@iterator"];if(!t){if(Gs(e)||(t=mGe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function mGe(e,r){var t;if(e){if(typeof e=="string")return HL(e,r);var n=bx(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return E4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HL(e,r)}}function HL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}wX=wp;var UL=function(){function e(r){Q_(this,e),kn(this,"_pairs",void 0),this._pairs=r}return vx(e,[{key:wX,value:xs.mark(function r(){var t,n,i,s,o;return xs.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=Xa(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=$s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:xs.mark(function r(){var t,n,i,s,o;return xs.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=Xa(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=$s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:xs.mark(function r(){var t,n,i,s;return xs.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=Xa(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=$s(n.value,1),s=i[0],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:xs.mark(function r(){var t,n,i,s;return xs.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=Xa(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=$s(n.value,2),s=i[1],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return ca(t=Ts(this._pairs)).call(t,function(n){return n[0]})}},{key:"toItemArray",value:function(){var t;return ca(t=Ts(this._pairs)).call(t,function(n){return n[1]})}},{key:"toEntryArray",value:function(){return Ts(this._pairs)}},{key:"toObjectMap",value:function(){var t=bFe(null),n=Xa(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=$s(i.value,2),o=s[0],a=s[1];t[o]=a}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"toMap",value:function(){return new yX(this._pairs)}},{key:"toIdSet",value:function(){return new bk(this.toIdArray())}},{key:"toItemSet",value:function(){return new bk(this.toItemArray())}},{key:"cache",value:function(){return new e(Ts(this._pairs))}},{key:"distinct",value:function(t){var n=new bk,i=Xa(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=$s(s.value,2),a=o[0],l=o[1];n.add(t(l,a))}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e(kn({},wp,xs.mark(function i(){var s,o,a,l,u;return xs.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=Xa(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=10;break}if(a=$s(o.value,2),l=a[0],u=a[1],!t(u,l)){c.next=8;break}return c.next=8,[l,u];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),s.e(c.t0);case 15:return c.prev=15,s.f(),c.finish(15);case 18:case"end":return c.stop()}},i,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var n=Xa(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=$s(i.value,2),o=s[0],a=s[1];t(a,o)}}catch(l){n.e(l)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e(kn({},wp,xs.mark(function i(){var s,o,a,l,u;return xs.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=Xa(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=9;break}return a=$s(o.value,2),l=a[0],u=a[1],c.next=7,[l,t(u,l)];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),s.e(c.t0);case 14:return c.prev=14,s.f(),c.finish(14);case 17:case"end":return c.stop()}},i,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var n=wk(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=$s(i.value,2),l=a[0],u=a[1],h=t(u,l);h>o&&(o=h,s=u)}return s}},{key:"min",value:function(t){var n=wk(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=$s(i.value,2),l=a[0],u=a[1],h=t(u,l);h<o&&(o=h,s=u)}return s}},{key:"reduce",value:function(t,n){var i=Xa(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=$s(s.value,2),a=o[0],l=o[1];n=t(n,l,a)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"sort",value:function(t){var n=this;return new e(kn({},wp,function(){var i;return wk(YO(i=Ts(n._pairs)).call(i,function(s,o){var a=$s(s,2),l=a[0],u=a[1],h=$s(o,2),c=h[0],d=h[1];return t(u,d,l,c)}))}))}}]),e}();function WL(e,r){var t=k4(e);if(n7){var n=n7(e);r&&(n=Xd(n).call(n,function(i){return DY(e,i).enumerable})),t.push.apply(t,n)}return t}function KL(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?xh(t=WL(Object(i),!0)).call(t,function(s){kn(e,s,i[s])}):i7?E8e(e,i7(i)):xh(n=WL(Object(i))).call(n,function(s){k8e(e,s,DY(i,s))})}return e}function $k(e,r){var t=typeof yx<"u"&&Xm(e)||e["@@iterator"];if(!t){if(Gs(e)||(t=bGe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function bGe(e,r){var t;if(e){if(typeof e=="string")return qL(e,r);var n=bx(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return E4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qL(e,r)}}function qL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function wGe(e){var r=$Ge();return function(){var n=E$(e),i;if(r){var s=E$(this).constructor;i=uw(n,arguments,s)}else i=n.apply(this,arguments);return Lze(this,i)}}function $Ge(){if(typeof Reflect>"u"||!uw||uw.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(uw(Boolean,[],function(){})),!0}catch{return!1}}function _Ge(e,r){return e[r]==null&&(e[r]=JVe()),e}var ya=function(e){Mze(t,e);var r=wGe(t);function t(n,i){var s;return Q_(this,t),s=r.call(this),kn(kf(s),"flush",void 0),kn(kf(s),"length",void 0),kn(kf(s),"_options",void 0),kn(kf(s),"_data",void 0),kn(kf(s),"_idProp",void 0),kn(kf(s),"_queue",null),n&&!Gs(n)&&(i=n,n=[]),s._options=i||{},s._data=new yX,s.length=0,s._idProp=s._options.fieldId||"id",n&&n.length&&s.add(n),s.setOptions(i),s}return vx(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=QVe.extend(this,{replace:["add","update","remove"]})),i.queue&&Oi(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,s){var o=this,a=[],l;if(Gs(i)){var u=ca(i).call(i,function(d){return d[o._idProp]});if(Dqe(u).call(u,function(d){return o._data.has(d)}))throw new Error("A duplicate id was found in the parameter array.");for(var h=0,c=i.length;h<c;h++)l=this._addItem(i[h]),a.push(l)}else if(i&&Oi(i)==="object")l=this._addItem(i),a.push(l);else throw new Error("Unknown dataType");return a.length&&this._trigger("add",{items:a},s),a}},{key:"update",value:function(i,s){var o=this,a=[],l=[],u=[],h=[],c=this._idProp,d=function(x){var A=x[c];if(A!=null&&o._data.has(A)){var _=x,I=bLe({},o._data.get(A)),O=o._updateItem(_);l.push(O),h.push(_),u.push(I)}else{var C=o._addItem(x);a.push(C)}};if(Gs(i))for(var y=0,w=i.length;y<w;y++)i[y]&&Oi(i[y])==="object"?d(i[y]):console.warn("Ignoring input item, which is not an object at index "+y);else if(i&&Oi(i)==="object")d(i);else throw new Error("Unknown dataType");if(a.length&&this._trigger("add",{items:a},s),l.length){var b={items:l,oldData:u,data:h};this._trigger("update",b,s)}return mx(a).call(a,l)}},{key:"updateOnly",value:function(i,s){var o,a=this;Gs(i)||(i=[i]);var l=ca(o=ca(i).call(i,function(h){var c=a._data.get(h[a._idProp]);if(c==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:c,update:h}})).call(o,function(h){var c=h.oldData,d=h.update,y=c[a._idProp],w=Vje(c,d);return a._data.set(y,w),{id:y,oldData:c,updatedData:w}});if(l.length){var u={items:ca(l).call(l,function(h){return h.id}),oldData:ca(l).call(l,function(h){return h.oldData}),data:ca(l).call(l,function(h){return h.updatedData})};return this._trigger("update",u,s),u.items}else return[]}},{key:"get",value:function(i,s){var o=void 0,a=void 0,l=void 0;zL(i)?(o=i,l=s):Gs(i)?(a=i,l=s):l=i;var u=l&&l.returnType==="Object"?"Object":"Array",h=l&&Xd(l),c=[],d=void 0,y=void 0,w=void 0;if(o!=null)d=this._data.get(o),d&&h&&!h(d)&&(d=void 0);else if(a!=null)for(var b=0,T=a.length;b<T;b++)d=this._data.get(a[b]),d!=null&&(!h||h(d))&&c.push(d);else{var x;y=Ts(Pd(x=this._data).call(x));for(var A=0,_=y.length;A<_;A++)w=y[A],d=this._data.get(w),d!=null&&(!h||h(d))&&c.push(d)}if(l&&l.order&&o==null&&this._sort(c,l.order),l&&l.fields){var I=l.fields;if(o!=null&&d!=null)d=this._filterFields(d,I);else for(var O=0,C=c.length;O<C;O++)c[O]=this._filterFields(c[O],I)}if(u=="Object"){for(var g={},R=0,M=c.length;R<M;R++){var L=c[R],W=L[this._idProp];g[W]=L}return g}else if(o!=null){var X;return(X=d)!==null&&X!==void 0?X:null}else return c}},{key:"getIds",value:function(i){var s=this._data,o=i&&Xd(i),a=i&&i.order,l=Ts(Pd(s).call(s)),u=[];if(o)if(a){for(var h=[],c=0,d=l.length;c<d;c++){var y=l[c],w=this._data.get(y);w!=null&&o(w)&&h.push(w)}this._sort(h,a);for(var b=0,T=h.length;b<T;b++)u.push(h[b][this._idProp])}else for(var x=0,A=l.length;x<A;x++){var _=l[x],I=this._data.get(_);I!=null&&o(I)&&u.push(I[this._idProp])}else if(a){for(var O=[],C=0,g=l.length;C<g;C++){var R=l[C];O.push(s.get(R))}this._sort(O,a);for(var M=0,L=O.length;M<L;M++)u.push(O[M][this._idProp])}else for(var W=0,X=l.length;W<X;W++){var te=l[W],J=s.get(te);J!=null&&u.push(J[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,s){var o=s&&Xd(s),a=this._data,l=Ts(Pd(a).call(a));if(s&&s.order)for(var u=this.get(s),h=0,c=u.length;h<c;h++){var d=u[h],y=d[this._idProp];i(d,y)}else for(var w=0,b=l.length;w<b;w++){var T=l[w],x=this._data.get(T);x!=null&&(!o||o(x))&&i(x,T)}}},{key:"map",value:function(i,s){for(var o=s&&Xd(s),a=[],l=this._data,u=Ts(Pd(l).call(l)),h=0,c=u.length;h<c;h++){var d=u[h],y=this._data.get(d);y!=null&&(!o||o(y))&&a.push(i(y,d))}return s&&s.order&&this._sort(a,s.order),a}},{key:"_filterFields",value:function(i,s){var o;return i&&JDe(o=Gs(s)?s:k4(s)).call(o,function(a,l){return a[l]=i[l],a},{})}},{key:"_sort",value:function(i,s){if(typeof s=="string"){var o=s;YO(i).call(i,function(a,l){var u=a[o],h=l[o];return u>h?1:u<h?-1:0})}else if(typeof s=="function")YO(i).call(i,s);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,s){for(var o=[],a=[],l=Gs(i)?i:[i],u=0,h=l.length;u<h;u++){var c=this._remove(l[u]);if(c){var d=c[this._idProp];d!=null&&(o.push(d),a.push(c))}}return o.length&&this._trigger("remove",{items:o,oldData:a},s),o}},{key:"_remove",value:function(i){var s;if(zL(i)?s=i:i&&Oi(i)==="object"&&(s=i[this._idProp]),s!=null&&this._data.has(s)){var o=this._data.get(s)||null;return this._data.delete(s),--this.length,o}return null}},{key:"clear",value:function(i){for(var s,o=Ts(Pd(s=this._data).call(s)),a=[],l=0,u=o.length;l<u;l++)a.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:a},i),o}},{key:"max",value:function(i){var s,o=null,a=null,l=$k(FL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,c=h[i];typeof c=="number"&&(a==null||c>a)&&(o=h,a=c)}}catch(d){l.e(d)}finally{l.f()}return o||null}},{key:"min",value:function(i){var s,o=null,a=null,l=$k(FL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,c=h[i];typeof c=="number"&&(a==null||c<a)&&(o=h,a=c)}}catch(d){l.e(d)}finally{l.f()}return o||null}},{key:"distinct",value:function(i){for(var s=this._data,o=Ts(Pd(s).call(s)),a=[],l=0,u=0,h=o.length;u<h;u++){for(var c=o[u],d=s.get(c),y=d[i],w=!1,b=0;b<l;b++)if(a[b]==y){w=!0;break}!w&&y!==void 0&&(a[l]=y,l++)}return a}},{key:"_addItem",value:function(i){var s=_Ge(i,this._idProp),o=s[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,s),++this.length,o}},{key:"_updateItem",value:function(i){var s=i[this._idProp];if(s==null)throw new Error("Cannot update item: item has no id (item: "+SFe(i)+")");var o=this._data.get(s);if(!o)throw new Error("Cannot update item: no item with id "+s+" found");return this._data.set(s,KL(KL({},o),i)),s}},{key:"stream",value:function(i){if(i){var s=this._data;return new UL(kn({},wp,xs.mark(function a(){var l,u,h,c;return xs.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:l=$k(i),y.prev=1,l.s();case 3:if((u=l.n()).done){y.next=11;break}if(h=u.value,c=s.get(h),c==null){y.next=9;break}return y.next=9,[h,c];case 9:y.next=3;break;case 11:y.next=16;break;case 13:y.prev=13,y.t0=y.catch(1),l.e(y.t0);case 16:return y.prev=16,l.f(),y.finish(16);case 19:case"end":return y.stop()}},a,null,[[1,13,16,19]])})))}else{var o;return new UL(kn({},wp,EY(o=VVe(this._data)).call(o,this._data)))}}}]),t}(eGe);function xGe(e,r){return Oi(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof xh(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ca(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function $X(e,r){return Oi(r)==="object"&&r!==null&&e===r.idProp&&typeof xh(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ca(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&xGe(e,r.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.6
 * @date    2023-03-23T21:31:19.223Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var r5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n5={},EGe={get exports(){return n5},set exports(e){n5=e}},y1=function(e){return e&&e.Math==Math&&e},Gn=y1(typeof globalThis=="object"&&globalThis)||y1(typeof window=="object"&&window)||y1(typeof self=="object"&&self)||y1(typeof r5=="object"&&r5)||function(){return this}()||Function("return this")(),Er=function(e){try{return!!e()}catch{return!0}},SGe=Er,s0=!SGe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),kGe=s0,_X=Function.prototype,VL=_X.apply,GL=_X.call,o0=typeof Reflect=="object"&&Reflect.apply||(kGe?GL.bind(VL):function(){return GL.apply(VL,arguments)}),xX=s0,EX=Function.prototype,i5=EX.call,TGe=xX&&EX.bind.bind(i5,i5),Sr=xX?TGe:function(e){return function(){return i5.apply(e,arguments)}},SX=Sr,IGe=SX({}.toString),AGe=SX("".slice),Su=function(e){return AGe(IGe(e),8,-1)},OGe=Su,CGe=Sr,K4=function(e){if(OGe(e)==="Function")return CGe(e)},s5=typeof document=="object"&&document.all,PGe=typeof s5>"u"&&s5!==void 0,kX={all:s5,IS_HTMLDDA:PGe},TX=kX,NGe=TX.all,wi=TX.IS_HTMLDDA?function(e){return typeof e=="function"||e===NGe}:function(e){return typeof e=="function"},Nv={},RGe=Er,ii=!RGe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),DGe=s0,m1=Function.prototype.call,ao=DGe?m1.bind(m1):function(){return m1.apply(m1,arguments)},a0={},IX={}.propertyIsEnumerable,AX=Object.getOwnPropertyDescriptor,BGe=AX&&!IX.call({1:2},1);a0.f=BGe?function(r){var t=AX(this,r);return!!t&&t.enumerable}:IX;var l0=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},MGe=Sr,LGe=Er,FGe=Su,_k=Object,jGe=MGe("".split),Ex=LGe(function(){return!_k("z").propertyIsEnumerable(0)})?function(e){return FGe(e)=="String"?jGe(e,""):_k(e)}:_k,u0=function(e){return e==null},zGe=u0,HGe=TypeError,c0=function(e){if(zGe(e))throw HGe("Can't call method on "+e);return e},UGe=Ex,WGe=c0,Ca=function(e){return UGe(WGe(e))},YL=wi,OX=kX,KGe=OX.all,$i=OX.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:YL(e)||e===KGe}:function(e){return typeof e=="object"?e!==null:YL(e)},$r={},xk=$r,Ek=Gn,qGe=wi,ZL=function(e){return qGe(e)?e:void 0},Go=function(e,r){return arguments.length<2?ZL(xk[e])||ZL(Ek[e]):xk[e]&&xk[e][r]||Ek[e]&&Ek[e][r]},VGe=Sr,Rn=VGe({}.isPrototypeOf),f0=typeof navigator<"u"&&String(navigator.userAgent)||"",CX=Gn,Sk=f0,XL=CX.process,JL=CX.Deno,QL=XL&&XL.versions||JL&&JL.version,e9=QL&&QL.v8,fa,A$;e9&&(fa=e9.split("."),A$=fa[0]>0&&fa[0]<4?1:+(fa[0]+fa[1]));!A$&&Sk&&(fa=Sk.match(/Edge\/(\d+)/),(!fa||fa[1]>=74)&&(fa=Sk.match(/Chrome\/(\d+)/),fa&&(A$=+fa[1])));var h0=A$,t9=h0,GGe=Er,Rv=!!Object.getOwnPropertySymbols&&!GGe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&t9&&t9<41}),YGe=Rv,PX=YGe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ZGe=Go,XGe=wi,JGe=Rn,QGe=PX,eYe=Object,d0=QGe?function(e){return typeof e=="symbol"}:function(e){var r=ZGe("Symbol");return XGe(r)&&JGe(r.prototype,eYe(e))},tYe=String,Dv=function(e){try{return tYe(e)}catch{return"Object"}},rYe=wi,nYe=Dv,iYe=TypeError,zh=function(e){if(rYe(e))return e;throw iYe(nYe(e)+" is not a function")},sYe=zh,oYe=u0,q4=function(e,r){var t=e[r];return oYe(t)?void 0:sYe(t)},kk=ao,Tk=wi,Ik=$i,aYe=TypeError,lYe=function(e,r){var t,n;if(r==="string"&&Tk(t=e.toString)&&!Ik(n=kk(t,e))||Tk(t=e.valueOf)&&!Ik(n=kk(t,e))||r!=="string"&&Tk(t=e.toString)&&!Ik(n=kk(t,e)))return n;throw aYe("Can't convert object to primitive value")},jc={},uYe={get exports(){return jc},set exports(e){jc=e}},r9=Gn,cYe=Object.defineProperty,fYe=function(e,r){try{cYe(r9,e,{value:r,configurable:!0,writable:!0})}catch{r9[e]=r}return r},hYe=Gn,dYe=fYe,n9="__core-js_shared__",pYe=hYe[n9]||dYe(n9,{}),V4=pYe,i9=V4;(uYe.exports=function(e,r){return i9[e]||(i9[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var vYe=c0,gYe=Object,lo=function(e){return gYe(vYe(e))},yYe=Sr,mYe=lo,bYe=yYe({}.hasOwnProperty),_i=Object.hasOwn||function(r,t){return bYe(mYe(r),t)},wYe=Sr,$Ye=0,_Ye=Math.random(),xYe=wYe(1 .toString),Sx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+xYe(++$Ye+_Ye,36)},EYe=Gn,SYe=jc,s9=_i,kYe=Sx,TYe=Rv,IYe=PX,rp=EYe.Symbol,Ak=SYe("wks"),AYe=IYe?rp.for||rp:rp&&rp.withoutSetter||kYe,Dn=function(e){return s9(Ak,e)||(Ak[e]=TYe&&s9(rp,e)?rp[e]:AYe("Symbol."+e)),Ak[e]},OYe=ao,o9=$i,a9=d0,CYe=q4,PYe=lYe,NYe=Dn,RYe=TypeError,DYe=NYe("toPrimitive"),BYe=function(e,r){if(!o9(e)||a9(e))return e;var t=CYe(e,DYe),n;if(t){if(r===void 0&&(r="default"),n=OYe(t,e,r),!o9(n)||a9(n))return n;throw RYe("Can't convert object to primitive value")}return r===void 0&&(r="number"),PYe(e,r)},MYe=BYe,LYe=d0,kx=function(e){var r=MYe(e,"string");return LYe(r)?r:r+""},FYe=Gn,l9=$i,o5=FYe.document,jYe=l9(o5)&&l9(o5.createElement),NX=function(e){return jYe?o5.createElement(e):{}},zYe=ii,HYe=Er,UYe=NX,RX=!zYe&&!HYe(function(){return Object.defineProperty(UYe("div"),"a",{get:function(){return 7}}).a!=7}),WYe=ii,KYe=ao,qYe=a0,VYe=l0,GYe=Ca,YYe=kx,ZYe=_i,XYe=RX,u9=Object.getOwnPropertyDescriptor;Nv.f=WYe?u9:function(r,t){if(r=GYe(r),t=YYe(t),XYe)try{return u9(r,t)}catch{}if(ZYe(r,t))return VYe(!KYe(qYe.f,r,t),r[t])};var JYe=Er,QYe=wi,eZe=/#|\.prototype\./,p0=function(e,r){var t=rZe[tZe(e)];return t==iZe?!0:t==nZe?!1:QYe(r)?JYe(r):!!r},tZe=p0.normalize=function(e){return String(e).replace(eZe,".").toLowerCase()},rZe=p0.data={},nZe=p0.NATIVE="N",iZe=p0.POLYFILL="P",sZe=p0,c9=K4,oZe=zh,aZe=s0,lZe=c9(c9.bind),v0=function(e,r){return oZe(e),r===void 0?e:aZe?lZe(e,r):function(){return e.apply(r,arguments)}},Yo={},uZe=ii,cZe=Er,DX=uZe&&cZe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),fZe=$i,hZe=String,dZe=TypeError,uo=function(e){if(fZe(e))return e;throw dZe(hZe(e)+" is not an object")},pZe=ii,vZe=RX,gZe=DX,b1=uo,f9=kx,yZe=TypeError,Ok=Object.defineProperty,mZe=Object.getOwnPropertyDescriptor,Ck="enumerable",Pk="configurable",Nk="writable";Yo.f=pZe?gZe?function(r,t,n){if(b1(r),t=f9(t),b1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&Nk in n&&!n[Nk]){var i=mZe(r,t);i&&i[Nk]&&(r[t]=n.value,n={configurable:Pk in n?n[Pk]:i[Pk],enumerable:Ck in n?n[Ck]:i[Ck],writable:!1})}return Ok(r,t,n)}:Ok:function(r,t,n){if(b1(r),t=f9(t),b1(n),vZe)try{return Ok(r,t,n)}catch{}if("get"in n||"set"in n)throw yZe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var bZe=ii,wZe=Yo,$Ze=l0,Bv=bZe?function(e,r,t){return wZe.f(e,r,$Ze(1,t))}:function(e,r,t){return e[r]=t,e},w1=Gn,_Ze=o0,xZe=K4,EZe=wi,SZe=Nv.f,kZe=sZe,Nd=$r,TZe=v0,Rd=Bv,h9=_i,IZe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return _Ze(e,this,arguments)};return r.prototype=e.prototype,r},jt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?w1:i?w1[t]:(w1[t]||{}).prototype,a=n?Nd:Nd[t]||Rd(Nd,t,{})[t],l=a.prototype,u,h,c,d,y,w,b,T,x;for(d in r)u=kZe(n?d:t+(i?".":"#")+d,e.forced),h=!u&&o&&h9(o,d),w=a[d],h&&(e.dontCallGetSet?(x=SZe(o,d),b=x&&x.value):b=o[d]),y=h&&b?b:r[d],!(h&&typeof w==typeof y)&&(e.bind&&h?T=TZe(y,w1):e.wrap&&h?T=IZe(y):s&&EZe(y)?T=xZe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&Rd(T,"sham",!0),Rd(a,d,T),s&&(c=t+"Prototype",h9(Nd,c)||Rd(Nd,c,{}),Rd(Nd[c],d,y),e.real&&l&&(u||!l[d])&&Rd(l,d,y)))},AZe=Math.ceil,OZe=Math.floor,CZe=Math.trunc||function(r){var t=+r;return(t>0?OZe:AZe)(t)},PZe=CZe,Tx=function(e){var r=+e;return r!==r||r===0?0:PZe(r)},NZe=Tx,RZe=Math.max,DZe=Math.min,g0=function(e,r){var t=NZe(e);return t<0?RZe(t+r,0):DZe(t,r)},BZe=Tx,MZe=Math.min,LZe=function(e){return e>0?MZe(BZe(e),9007199254740991):0},FZe=LZe,Pa=function(e){return FZe(e.length)},jZe=Ca,zZe=g0,HZe=Pa,d9=function(e){return function(r,t,n){var i=jZe(r),s=HZe(i),o=zZe(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},G4={includes:d9(!0),indexOf:d9(!1)},y0={},UZe=Sr,Rk=_i,WZe=Ca,KZe=G4.indexOf,qZe=y0,p9=UZe([].push),BX=function(e,r){var t=WZe(e),n=0,i=[],s;for(s in t)!Rk(qZe,s)&&Rk(t,s)&&p9(i,s);for(;r.length>n;)Rk(t,s=r[n++])&&(~KZe(i,s)||p9(i,s));return i},Y4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],VZe=BX,GZe=Y4,m0=Object.keys||function(r){return VZe(r,GZe)},b0={};b0.f=Object.getOwnPropertySymbols;var v9=ii,YZe=Sr,ZZe=ao,XZe=Er,Dk=m0,JZe=b0,QZe=a0,eXe=lo,tXe=Ex,Dd=Object.assign,g9=Object.defineProperty,rXe=YZe([].concat),nXe=!Dd||XZe(function(){if(v9&&Dd({b:1},Dd(g9({},"a",{enumerable:!0,get:function(){g9(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Dd({},e)[t]!=7||Dk(Dd({},r)).join("")!=n})?function(r,t){for(var n=eXe(r),i=arguments.length,s=1,o=JZe.f,a=QZe.f;i>s;)for(var l=tXe(arguments[s++]),u=o?rXe(Dk(l),o(l)):Dk(l),h=u.length,c=0,d;h>c;)d=u[c++],(!v9||ZZe(a,l,d))&&(n[d]=l[d]);return n}:Dd,iXe=jt,y9=nXe;iXe({target:"Object",stat:!0,arity:2,forced:Object.assign!==y9},{assign:y9});var sXe=$r,oXe=sXe.Object.assign,aXe=oXe,lXe=aXe;(function(e){e.exports=lXe})(EGe);var Hn=Pt(n5),a5={},uXe={get exports(){return a5},set exports(e){a5=e}},cXe=Sr,Ix=cXe([].slice),MX=Sr,fXe=zh,hXe=$i,dXe=_i,m9=Ix,pXe=s0,LX=Function,vXe=MX([].concat),gXe=MX([].join),Bk={},yXe=function(e,r,t){if(!dXe(Bk,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";Bk[r]=LX("C,a","return new C("+gXe(n,",")+")")}return Bk[r](e,t)},FX=pXe?LX.bind:function(r){var t=fXe(this),n=t.prototype,i=m9(arguments,1),s=function(){var a=vXe(i,m9(arguments));return this instanceof s?yXe(t,a.length,a):t.apply(r,a)};return hXe(n)&&(s.prototype=n),s},mXe=jt,b9=FX;mXe({target:"Function",proto:!0,forced:Function.bind!==b9},{bind:b9});var bXe=$r,xi=function(e){return bXe[e+"Prototype"]},wXe=xi,$Xe=wXe("Function").bind,_Xe=Rn,xXe=$Xe,Mk=Function.prototype,EXe=function(e){var r=e.bind;return e===Mk||_Xe(Mk,e)&&r===Mk.bind?xXe:r},SXe=EXe,jX=SXe;(function(e){e.exports=jX})(uXe);var nt=Pt(a5);function Z4(e,r,t,n){e.beginPath(),e.arc(r,t,n,0,2*Math.PI,!1),e.closePath()}function kXe(e,r,t,n){e.beginPath(),e.rect(r-n,t-n,n*2,n*2),e.closePath()}function TXe(e,r,t,n){e.beginPath(),n*=1.15,t+=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t-(a-o)),e.lineTo(r+s,t+o),e.lineTo(r-s,t+o),e.lineTo(r,t-(a-o)),e.closePath()}function IXe(e,r,t,n){e.beginPath(),n*=1.15,t-=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t+(a-o)),e.lineTo(r+s,t-o),e.lineTo(r-s,t-o),e.lineTo(r,t+(a-o)),e.closePath()}function AXe(e,r,t,n){e.beginPath(),n*=.82,t+=.1*n;for(var i=0;i<10;i++){var s=i%2===0?n*1.3:n*.5;e.lineTo(r+s*Math.sin(i*2*Math.PI/10),t-s*Math.cos(i*2*Math.PI/10))}e.closePath()}function OXe(e,r,t,n){e.beginPath(),e.lineTo(r,t+n),e.lineTo(r+n,t),e.lineTo(r,t-n),e.lineTo(r-n,t),e.closePath()}function zX(e,r,t,n,i,s){var o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),e.beginPath(),e.moveTo(r+s,t),e.lineTo(r+n-s,t),e.arc(r+n-s,t+s,s,o*270,o*360,!1),e.lineTo(r+n,t+i-s),e.arc(r+n-s,t+i-s,s,0,o*90,!1),e.lineTo(r+s,t+i),e.arc(r+s,t+i-s,s,o*90,o*180,!1),e.lineTo(r,t+s),e.arc(r+s,t+s,s,o*180,o*270,!1),e.closePath()}function l5(e,r,t,n,i){var s=.5522848,o=n/2*s,a=i/2*s,l=r+n,u=t+i,h=r+n/2,c=t+i/2;e.beginPath(),e.moveTo(r,c),e.bezierCurveTo(r,c-a,h-o,t,h,t),e.bezierCurveTo(h+o,t,l,c-a,l,c),e.bezierCurveTo(l,c+a,h+o,u,h,u),e.bezierCurveTo(h-o,u,r,c+a,r,c),e.closePath()}function HX(e,r,t,n,i){var s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,h=a/2*l,c=r+o,d=t+a,y=r+o/2,w=t+a/2,b=t+(i-a/2),T=t+i;e.beginPath(),e.moveTo(c,w),e.bezierCurveTo(c,w+h,y+u,d,y,d),e.bezierCurveTo(y-u,d,r,w+h,r,w),e.bezierCurveTo(r,w-h,y-u,t,y,t),e.bezierCurveTo(y+u,t,c,w-h,c,w),e.lineTo(c,b),e.bezierCurveTo(c,b+h,y+u,T,y,T),e.bezierCurveTo(y-u,T,r,b+h,r,b),e.lineTo(r,w)}function UX(e,r,t,n,i,s){e.beginPath(),e.moveTo(r,t);for(var o=s.length,a=n-r,l=i-t,u=l/a,h=Math.sqrt(a*a+l*l),c=0,d=!0,y=0,w=+s[0];h>=.1;)w=+s[c++%o],w>h&&(w=h),y=Math.sqrt(w*w/(1+u*u)),y=a<0?-y:y,r+=y,t+=u*y,d===!0?e.lineTo(r,t):e.moveTo(r,t),h-=w,d=!d}function CXe(e,r,t,n){e.beginPath();var i=6,s=Math.PI*2/i;e.moveTo(r+n,t);for(var o=1;o<i;o++)e.lineTo(r+n*Math.cos(s*o),t+n*Math.sin(s*o));e.closePath()}var w9={circle:Z4,dashedLine:UX,database:HX,diamond:OXe,ellipse:l5,ellipse_vis:l5,hexagon:CXe,roundRect:zX,square:kXe,star:AXe,triangle:TXe,triangleDown:IXe};function PXe(e){return Object.prototype.hasOwnProperty.call(w9,e)?w9[e]:function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(r,n)}}var u5={},NXe={get exports(){return u5},set exports(e){u5=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(NXe);var WX=u5,c5={},RXe={get exports(){return c5},set exports(e){c5=e}},DXe=Dn,BXe=DXe("toStringTag"),KX={};KX[BXe]="z";var X4=String(KX)==="[object z]",MXe=X4,LXe=wi,dw=Su,FXe=Dn,jXe=FXe("toStringTag"),zXe=Object,HXe=dw(function(){return arguments}())=="Arguments",UXe=function(e,r){try{return e[r]}catch{}},Hh=MXe?dw:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=UXe(r=zXe(e),jXe))=="string"?t:HXe?dw(r):(n=dw(r))=="Object"&&LXe(r.callee)?"Arguments":n},WXe=Hh,KXe=String,wl=function(e){if(WXe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return KXe(e)},J4=Sr,qXe=Tx,VXe=wl,GXe=c0,YXe=J4("".charAt),$9=J4("".charCodeAt),ZXe=J4("".slice),_9=function(e){return function(r,t){var n=VXe(GXe(r)),i=qXe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=$9(n,i),o<55296||o>56319||i+1===s||(a=$9(n,i+1))<56320||a>57343?e?YXe(n,i):o:e?ZXe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},XXe={codeAt:_9(!1),charAt:_9(!0)},JXe=Gn,QXe=wi,x9=JXe.WeakMap,qX=QXe(x9)&&/native code/.test(String(x9)),eJe=jc,tJe=Sx,E9=eJe("keys"),Ax=function(e){return E9[e]||(E9[e]=tJe(e))},rJe=qX,VX=Gn,nJe=$i,iJe=Bv,Lk=_i,Fk=V4,sJe=Ax,oJe=y0,S9="Object already initialized",f5=VX.TypeError,aJe=VX.WeakMap,O$,rm,C$,lJe=function(e){return C$(e)?rm(e):O$(e,{})},uJe=function(e){return function(r){var t;if(!nJe(r)||(t=rm(r)).type!==e)throw f5("Incompatible receiver, "+e+" required");return t}};if(rJe||Fk.state){var Ja=Fk.state||(Fk.state=new aJe);Ja.get=Ja.get,Ja.has=Ja.has,Ja.set=Ja.set,O$=function(e,r){if(Ja.has(e))throw f5(S9);return r.facade=e,Ja.set(e,r),r},rm=function(e){return Ja.get(e)||{}},C$=function(e){return Ja.has(e)}}else{var Bd=sJe("state");oJe[Bd]=!0,O$=function(e,r){if(Lk(e,Bd))throw f5(S9);return r.facade=e,iJe(e,Bd,r),r},rm=function(e){return Lk(e,Bd)?e[Bd]:{}},C$=function(e){return Lk(e,Bd)}}var Uh={set:O$,get:rm,has:C$,enforce:lJe,getterFor:uJe},h5=ii,cJe=_i,GX=Function.prototype,fJe=h5&&Object.getOwnPropertyDescriptor,Q4=cJe(GX,"name"),hJe=Q4&&(function(){}).name==="something",dJe=Q4&&(!h5||h5&&fJe(GX,"name").configurable),YX={EXISTS:Q4,PROPER:hJe,CONFIGURABLE:dJe},Ox={},pJe=ii,vJe=DX,gJe=Yo,yJe=uo,mJe=Ca,bJe=m0;Ox.f=pJe&&!vJe?Object.defineProperties:function(r,t){yJe(r);for(var n=mJe(t),i=bJe(t),s=i.length,o=0,a;s>o;)gJe.f(r,a=i[o++],n[a]);return r};var wJe=Go,$Je=wJe("document","documentElement"),_Je=uo,xJe=Ox,k9=Y4,EJe=y0,SJe=$Je,kJe=NX,TJe=Ax,T9=">",I9="<",d5="prototype",p5="script",ZX=TJe("IE_PROTO"),jk=function(){},XX=function(e){return I9+p5+T9+e+I9+"/"+p5+T9},A9=function(e){e.write(XX("")),e.close();var r=e.parentWindow.Object;return e=null,r},IJe=function(){var e=kJe("iframe"),r="java"+p5+":",t;return e.style.display="none",SJe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(XX("document.F=Object")),t.close(),t.F},$1,pw=function(){try{$1=new ActiveXObject("htmlfile")}catch{}pw=typeof document<"u"?document.domain&&$1?A9($1):IJe():A9($1);for(var e=k9.length;e--;)delete pw[d5][k9[e]];return pw()};EJe[ZX]=!0;var Mv=Object.create||function(r,t){var n;return r!==null?(jk[d5]=_Je(r),n=new jk,jk[d5]=null,n[ZX]=r):n=pw(),t===void 0?n:xJe.f(n,t)},AJe=Er,JX=!AJe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),OJe=_i,CJe=wi,PJe=lo,NJe=Ax,RJe=JX,O9=NJe("IE_PROTO"),v5=Object,DJe=v5.prototype,Cx=RJe?v5.getPrototypeOf:function(e){var r=PJe(e);if(OJe(r,O9))return r[O9];var t=r.constructor;return CJe(t)&&r instanceof t?t.prototype:r instanceof v5?DJe:null},BJe=Bv,w0=function(e,r,t,n){return n&&n.enumerable?e[r]=t:BJe(e,r,t),e},MJe=Er,LJe=wi,FJe=$i,jJe=Mv,C9=Cx,zJe=w0,HJe=Dn,g5=HJe("iterator"),QX=!1,iu,zk,Hk;[].keys&&(Hk=[].keys(),"next"in Hk?(zk=C9(C9(Hk)),zk!==Object.prototype&&(iu=zk)):QX=!0);var UJe=!FJe(iu)||MJe(function(){var e={};return iu[g5].call(e)!==e});UJe?iu={}:iu=jJe(iu);LJe(iu[g5])||zJe(iu,g5,function(){return this});var eJ={IteratorPrototype:iu,BUGGY_SAFARI_ITERATORS:QX},WJe=X4,KJe=Hh,qJe=WJe?{}.toString:function(){return"[object "+KJe(this)+"]"},VJe=X4,GJe=Yo.f,YJe=Bv,ZJe=_i,XJe=qJe,JJe=Dn,P9=JJe("toStringTag"),Lv=function(e,r,t,n){if(e){var i=t?e:e.prototype;ZJe(i,P9)||GJe(i,P9,{configurable:!0,value:r}),n&&!VJe&&YJe(i,"toString",XJe)}},Fv={},QJe=eJ.IteratorPrototype,eQe=Mv,tQe=l0,rQe=Lv,nQe=Fv,iQe=function(){return this},sQe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=eQe(QJe,{next:tQe(+!n,t)}),rQe(e,i,!1,!0),nQe[i]=iQe,e},oQe=Sr,aQe=zh,lQe=function(e,r,t){try{return oQe(aQe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},uQe=wi,cQe=String,fQe=TypeError,hQe=function(e){if(typeof e=="object"||uQe(e))return e;throw fQe("Can't set "+cQe(e)+" as a prototype")},dQe=lQe,pQe=uo,vQe=hQe,gQe=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=dQe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return pQe(i),vQe(s),e?t(i,s):i.__proto__=s,i}}():void 0),yQe=jt,mQe=ao,bQe=YX,wQe=sQe,$Qe=Cx,_Qe=Lv,N9=w0,xQe=Dn,R9=Fv,EQe=eJ,SQe=bQe.PROPER,_1=EQe.BUGGY_SAFARI_ITERATORS,Uk=xQe("iterator"),D9="keys",x1="values",B9="entries",kQe=function(){return this},eN=function(e,r,t,n,i,s,o){wQe(t,r,n);var a=function(x){if(x===i&&d)return d;if(!_1&&x in h)return h[x];switch(x){case D9:return function(){return new t(this,x)};case x1:return function(){return new t(this,x)};case B9:return function(){return new t(this,x)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,c=h[Uk]||h["@@iterator"]||i&&h[i],d=!_1&&c||a(i),y=r=="Array"&&h.entries||c,w,b,T;if(y&&(w=$Qe(y.call(new e)),w!==Object.prototype&&w.next&&(_Qe(w,l,!0,!0),R9[l]=kQe)),SQe&&i==x1&&c&&c.name!==x1&&(u=!0,d=function(){return mQe(c,this)}),i)if(b={values:a(x1),keys:s?d:a(D9),entries:a(B9)},o)for(T in b)(_1||u||!(T in h))&&N9(h,T,b[T]);else yQe({target:r,proto:!0,forced:_1||u},b);return o&&h[Uk]!==d&&N9(h,Uk,d,{name:i}),R9[r]=d,b},tN=function(e,r){return{value:e,done:r}},TQe=XXe.charAt,IQe=wl,tJ=Uh,AQe=eN,M9=tN,rJ="String Iterator",OQe=tJ.set,CQe=tJ.getterFor(rJ);AQe(String,"String",function(e){OQe(this,{type:rJ,string:IQe(e),index:0})},function(){var r=CQe(this),t=r.string,n=r.index,i;return n>=t.length?M9(void 0,!0):(i=TQe(t,n),r.index+=i.length,M9(i,!1))});var PQe=ao,L9=uo,NQe=q4,nJ=function(e,r,t){var n,i;L9(e);try{if(n=NQe(e,"return"),!n){if(r==="throw")throw t;return t}n=PQe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return L9(n),t},RQe=uo,DQe=nJ,BQe=function(e,r,t,n){try{return n?r(RQe(t)[0],t[1]):r(t)}catch(i){DQe(e,"throw",i)}},MQe=Dn,LQe=Fv,FQe=MQe("iterator"),jQe=Array.prototype,iJ=function(e){return e!==void 0&&(LQe.Array===e||jQe[FQe]===e)},zQe=Sr,HQe=wi,y5=V4,UQe=zQe(Function.toString);HQe(y5.inspectSource)||(y5.inspectSource=function(e){return UQe(e)});var WQe=y5.inspectSource,KQe=Sr,qQe=Er,sJ=wi,VQe=Hh,GQe=Go,YQe=WQe,oJ=function(){},ZQe=[],aJ=GQe("Reflect","construct"),rN=/^\s*(?:class|function)\b/,XQe=KQe(rN.exec),JQe=!rN.exec(oJ),Cg=function(r){if(!sJ(r))return!1;try{return aJ(oJ,ZQe,r),!0}catch{return!1}},lJ=function(r){if(!sJ(r))return!1;switch(VQe(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return JQe||!!XQe(rN,YQe(r))}catch{return!0}};lJ.sham=!0;var Px=!aJ||qQe(function(){var e;return Cg(Cg.call)||!Cg(Object)||!Cg(function(){e=!0})||e})?lJ:Cg,QQe=kx,eet=Yo,tet=l0,jv=function(e,r,t){var n=QQe(r);n in e?eet.f(e,n,tet(0,t)):e[n]=t},ret=Hh,F9=q4,net=u0,iet=Fv,set=Dn,oet=set("iterator"),Nx=function(e){if(!net(e))return F9(e,oet)||F9(e,"@@iterator")||iet[ret(e)]},aet=ao,uet=zh,cet=uo,fet=Dv,het=Nx,det=TypeError,uJ=function(e,r){var t=arguments.length<2?het(e):r;if(uet(t))return cet(aet(t,e));throw det(fet(e)+" is not iterable")},pet=v0,vet=ao,get=lo,yet=BQe,met=iJ,bet=Px,wet=Pa,j9=jv,$et=uJ,_et=Nx,z9=Array,xet=function(r){var t=get(r),n=bet(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=pet(s,i>2?arguments[2]:void 0));var a=_et(t),l=0,u,h,c,d,y,w;if(a&&!(this===z9&&met(a)))for(d=$et(t,a),y=d.next,h=n?new this:[];!(c=vet(y,d)).done;l++)w=o?yet(d,s,[c.value,l],!0):c.value,j9(h,l,w);else for(u=wet(t),h=n?new this(u):z9(u);u>l;l++)w=o?s(t[l],l):t[l],j9(h,l,w);return h.length=l,h},Eet=Dn,cJ=Eet("iterator"),fJ=!1;try{var ket=0,H9={next:function(){return{done:!!ket++}},return:function(){fJ=!0}};H9[cJ]=function(){return this},Array.from(H9,function(){throw 2})}catch{}var Tet=function(e,r){if(!r&&!fJ)return!1;var t=!1;try{var n={};n[cJ]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},Iet=jt,Aet=xet,Oet=Tet,Cet=!Oet(function(e){Array.from(e)});Iet({target:"Array",stat:!0,forced:Cet},{from:Aet});var Pet=$r,Net=Pet.Array.from,Ret=Net,hJ=Ret;(function(e){e.exports=hJ})(RXe);var Wh=Pt(c5),m5={},Det={get exports(){return m5},set exports(e){m5=e}},b5={},Bet={get exports(){return b5},set exports(e){b5=e}},Met=Ca,U9=Fv,dJ=Uh;Yo.f;var Let=eN,E1=tN,pJ="Array Iterator",Fet=dJ.set,jet=dJ.getterFor(pJ);Let(Array,"Array",function(e,r){Fet(this,{type:pJ,target:Met(e),index:0,kind:r})},function(){var e=jet(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,E1(void 0,!0)):t=="keys"?E1(n,!1):t=="values"?E1(r[n],!1):E1([n,r[n]],!1)},"values");U9.Arguments=U9.Array;var zet=Nx,Het=zet,Uet={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Wet=Uet,Ket=Gn,qet=Hh,Vet=Bv,W9=Fv,Get=Dn,K9=Get("toStringTag");for(var Wk in Wet){var q9=Ket[Wk],Kk=q9&&q9.prototype;Kk&&qet(Kk)!==K9&&Vet(Kk,K9,Wk),W9[Wk]=W9.Array}var Yet=Het,Zet=Yet,Xet=Zet,Jet=Xet,Qet=Jet,ett=Qet;(function(e){e.exports=ett})(Bet);(function(e){e.exports=b5})(Det);var ku=Pt(m5),w5={},ttt={get exports(){return w5},set exports(e){w5=e}},$0={},rtt=BX,ntt=Y4,itt=ntt.concat("length","prototype");$0.f=Object.getOwnPropertyNames||function(r){return rtt(r,itt)};var Rx={},V9=g0,stt=Pa,ott=jv,att=Array,ltt=Math.max,vJ=function(e,r,t){for(var n=stt(e),i=V9(r,n),s=V9(t===void 0?n:t,n),o=att(ltt(s-i,0)),a=0;i<s;i++,a++)ott(o,a,e[i]);return o.length=a,o},utt=Su,ctt=Ca,gJ=$0.f,ftt=vJ,yJ=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],htt=function(e){try{return gJ(e)}catch{return ftt(yJ)}};Rx.f=function(r){return yJ&&utt(r)=="Window"?htt(r):gJ(ctt(r))};var dtt=Yo,nN=function(e,r,t){return dtt.f(e,r,t)},_0={},ptt=Dn;_0.f=ptt;var G9=$r,vtt=_i,gtt=_0,ytt=Yo.f,_n=function(e){var r=G9.Symbol||(G9.Symbol={});vtt(r,e)||ytt(r,e,{value:gtt.f(e)})},mtt=ao,btt=Go,wtt=Dn,$tt=w0,mJ=function(){var e=btt("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=wtt("toPrimitive");r&&!r[n]&&$tt(r,n,function(i){return mtt(t,this)},{arity:1})},_tt=Su,Kh=Array.isArray||function(r){return _tt(r)=="Array"},Y9=Kh,xtt=Px,Ett=$i,Stt=Dn,ktt=Stt("species"),Z9=Array,Ttt=function(e){var r;return Y9(e)&&(r=e.constructor,xtt(r)&&(r===Z9||Y9(r.prototype))?r=void 0:Ett(r)&&(r=r[ktt],r===null&&(r=void 0))),r===void 0?Z9:r},Itt=Ttt,iN=function(e,r){return new(Itt(e))(r===0?0:r)},Att=v0,Ott=Sr,Ctt=Ex,Ptt=lo,Ntt=Pa,Rtt=iN,X9=Ott([].push),ic=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,h,c){for(var d=Ptt(l),y=Ctt(d),w=Att(u,h),b=Ntt(y),T=0,x=c||Rtt,A=r?x(l,b):t||o?x(l,0):void 0,_,I;b>T;T++)if((a||T in y)&&(_=y[T],I=w(_,T,d),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return _;case 6:return T;case 2:X9(A,_)}else switch(e){case 4:return!1;case 7:X9(A,_)}return s?-1:n||i?i:A}},Yc={forEach:ic(0),map:ic(1),filter:ic(2),some:ic(3),every:ic(4),find:ic(5),findIndex:ic(6),filterReject:ic(7)},Dx=jt,sN=Gn,oN=ao,Dtt=Sr,Yp=ii,Zp=Rv,Btt=Er,di=_i,Mtt=Rn,$5=uo,Bx=Ca,aN=kx,Ltt=wl,_5=l0,nm=Mv,bJ=m0,Ftt=$0,wJ=Rx,jtt=b0,$J=Nv,_J=Yo,ztt=Ox,xJ=a0,J9=w0,Htt=nN,lN=jc,Utt=Ax,EJ=y0,Q9=Sx,Wtt=Dn,Ktt=_0,qtt=_n,Vtt=mJ,Gtt=Lv,SJ=Uh,Mx=Yc.forEach,Is=Utt("hidden"),Lx="Symbol",im="prototype",Ytt=SJ.set,eF=SJ.getterFor(Lx),ma=Object[im],ch=sN.Symbol,Gg=ch&&ch[im],Ztt=sN.TypeError,qk=sN.QObject,kJ=$J.f,Mf=_J.f,TJ=wJ.f,Xtt=xJ.f,IJ=Dtt([].push),vu=lN("symbols"),x0=lN("op-symbols"),Jtt=lN("wks"),x5=!qk||!qk[im]||!qk[im].findChild,E5=Yp&&Btt(function(){return nm(Mf({},"a",{get:function(){return Mf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=kJ(ma,r);n&&delete ma[r],Mf(e,r,t),n&&e!==ma&&Mf(ma,r,n)}:Mf,Vk=function(e,r){var t=vu[e]=nm(Gg);return Ytt(t,{type:Lx,tag:e,description:r}),Yp||(t.description=r),t},Fx=function(r,t,n){r===ma&&Fx(x0,t,n),$5(r);var i=aN(t);return $5(n),di(vu,i)?(n.enumerable?(di(r,Is)&&r[Is][i]&&(r[Is][i]=!1),n=nm(n,{enumerable:_5(0,!1)})):(di(r,Is)||Mf(r,Is,_5(1,{})),r[Is][i]=!0),E5(r,i,n)):Mf(r,i,n)},uN=function(r,t){$5(r);var n=Bx(t),i=bJ(n).concat(PJ(n));return Mx(i,function(s){(!Yp||oN(AJ,n,s))&&Fx(r,s,n[s])}),r},Qtt=function(r,t){return t===void 0?nm(r):uN(nm(r),t)},AJ=function(r){var t=aN(r),n=oN(Xtt,this,t);return this===ma&&di(vu,t)&&!di(x0,t)?!1:n||!di(this,t)||!di(vu,t)||di(this,Is)&&this[Is][t]?n:!0},OJ=function(r,t){var n=Bx(r),i=aN(t);if(!(n===ma&&di(vu,i)&&!di(x0,i))){var s=kJ(n,i);return s&&di(vu,i)&&!(di(n,Is)&&n[Is][i])&&(s.enumerable=!0),s}},CJ=function(r){var t=TJ(Bx(r)),n=[];return Mx(t,function(i){!di(vu,i)&&!di(EJ,i)&&IJ(n,i)}),n},PJ=function(e){var r=e===ma,t=TJ(r?x0:Bx(e)),n=[];return Mx(t,function(i){di(vu,i)&&(!r||di(ma,i))&&IJ(n,vu[i])}),n};Zp||(ch=function(){if(Mtt(Gg,this))throw Ztt("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:Ltt(arguments[0]),t=Q9(r),n=function(i){this===ma&&oN(n,x0,i),di(this,Is)&&di(this[Is],t)&&(this[Is][t]=!1),E5(this,t,_5(1,i))};return Yp&&x5&&E5(ma,t,{configurable:!0,set:n}),Vk(t,r)},Gg=ch[im],J9(Gg,"toString",function(){return eF(this).tag}),J9(ch,"withoutSetter",function(e){return Vk(Q9(e),e)}),xJ.f=AJ,_J.f=Fx,ztt.f=uN,$J.f=OJ,Ftt.f=wJ.f=CJ,jtt.f=PJ,Ktt.f=function(e){return Vk(Wtt(e),e)},Yp&&Htt(Gg,"description",{configurable:!0,get:function(){return eF(this).description}}));Dx({global:!0,constructor:!0,wrap:!0,forced:!Zp,sham:!Zp},{Symbol:ch});Mx(bJ(Jtt),function(e){qtt(e)});Dx({target:Lx,stat:!0,forced:!Zp},{useSetter:function(){x5=!0},useSimple:function(){x5=!1}});Dx({target:"Object",stat:!0,forced:!Zp,sham:!Yp},{create:Qtt,defineProperty:Fx,defineProperties:uN,getOwnPropertyDescriptor:OJ});Dx({target:"Object",stat:!0,forced:!Zp},{getOwnPropertyNames:CJ});Vtt();Gtt(ch,Lx);EJ[Is]=!0;var ert=Rv,NJ=ert&&!!Symbol.for&&!!Symbol.keyFor,trt=jt,rrt=Go,nrt=_i,irt=wl,RJ=jc,srt=NJ,Gk=RJ("string-to-symbol-registry"),ort=RJ("symbol-to-string-registry");trt({target:"Symbol",stat:!0,forced:!srt},{for:function(e){var r=irt(e);if(nrt(Gk,r))return Gk[r];var t=rrt("Symbol")(r);return Gk[r]=t,ort[t]=r,t}});var art=jt,lrt=_i,urt=d0,crt=Dv,frt=jc,hrt=NJ,tF=frt("symbol-to-string-registry");art({target:"Symbol",stat:!0,forced:!hrt},{keyFor:function(r){if(!urt(r))throw TypeError(crt(r)+" is not a symbol");if(lrt(tF,r))return tF[r]}});var drt=Sr,rF=Kh,prt=wi,nF=Su,vrt=wl,iF=drt([].push),grt=function(e){if(prt(e))return e;if(rF(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?iF(t,i):(typeof i=="number"||nF(i)=="Number"||nF(i)=="String")&&iF(t,vrt(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(rF(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},yrt=jt,DJ=Go,BJ=o0,mrt=ao,E0=Sr,MJ=Er,sF=wi,oF=d0,LJ=Ix,brt=grt,wrt=Rv,$rt=String,Tc=DJ("JSON","stringify"),S1=E0(/./.exec),aF=E0("".charAt),_rt=E0("".charCodeAt),xrt=E0("".replace),Ert=E0(1 .toString),Srt=/[\uD800-\uDFFF]/g,lF=/^[\uD800-\uDBFF]$/,uF=/^[\uDC00-\uDFFF]$/,cF=!wrt||MJ(function(){var e=DJ("Symbol")();return Tc([e])!="[null]"||Tc({a:e})!="{}"||Tc(Object(e))!="{}"}),fF=MJ(function(){return Tc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Tc("\uDEAD")!=='"\\udead"'}),krt=function(e,r){var t=LJ(arguments),n=brt(r);if(!(!sF(n)&&(e===void 0||oF(e))))return t[1]=function(i,s){if(sF(n)&&(s=mrt(n,this,$rt(i),s)),!oF(s))return s},BJ(Tc,null,t)},Trt=function(e,r,t){var n=aF(t,r-1),i=aF(t,r+1);return S1(lF,e)&&!S1(uF,i)||S1(uF,e)&&!S1(lF,n)?"\\u"+Ert(_rt(e,0),16):e};Tc&&yrt({target:"JSON",stat:!0,arity:3,forced:cF||fF},{stringify:function(r,t,n){var i=LJ(arguments),s=BJ(cF?krt:Tc,null,i);return fF&&typeof s=="string"?xrt(s,Srt,Trt):s}});var Irt=jt,Art=Rv,Ort=Er,FJ=b0,Crt=lo,Prt=!Art||Ort(function(){FJ.f(1)});Irt({target:"Object",stat:!0,forced:Prt},{getOwnPropertySymbols:function(r){var t=FJ.f;return t?t(Crt(r)):[]}});var Nrt=$r,Rrt=Nrt.Object.getOwnPropertySymbols,Drt=Rrt,Brt=Drt;(function(e){e.exports=Brt})(ttt);var zc=Pt(w5),S5={},Mrt={get exports(){return S5},set exports(e){S5=e}},k5={},Lrt={get exports(){return k5},set exports(e){k5=e}},Frt=jt,jrt=Er,zrt=Ca,jJ=Nv.f,zJ=ii,Hrt=!zJ||jrt(function(){jJ(1)});Frt({target:"Object",stat:!0,forced:Hrt,sham:!zJ},{getOwnPropertyDescriptor:function(r,t){return jJ(zrt(r),t)}});var Urt=$r,HJ=Urt.Object,Wrt=Lrt.exports=function(r,t){return HJ.getOwnPropertyDescriptor(r,t)};HJ.getOwnPropertyDescriptor.sham&&(Wrt.sham=!0);var Krt=k5,UJ=Krt;(function(e){e.exports=UJ})(Mrt);var Zc=Pt(S5),T5={},qrt={get exports(){return T5},set exports(e){T5=e}},Vrt=Go,Grt=Sr,Yrt=$0,Zrt=b0,Xrt=uo,Jrt=Grt([].concat),WJ=Vrt("Reflect","ownKeys")||function(r){var t=Yrt.f(Xrt(r)),n=Zrt.f;return n?Jrt(t,n(r)):t},Qrt=jt,ent=ii,tnt=WJ,rnt=Ca,nnt=Nv,int=jv;Qrt({target:"Object",stat:!0,sham:!ent},{getOwnPropertyDescriptors:function(r){for(var t=rnt(r),n=nnt.f,i=tnt(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&int(s,a,l);return s}});var snt=$r,ont=snt.Object.getOwnPropertyDescriptors,ant=ont,lnt=ant;(function(e){e.exports=lnt})(qrt);var Hc=Pt(T5),I5={},unt={get exports(){return I5},set exports(e){I5=e}},A5={},cnt={get exports(){return A5},set exports(e){A5=e}},fnt=jt,hnt=ii,hF=Ox.f;fnt({target:"Object",stat:!0,forced:Object.defineProperties!==hF,sham:!hnt},{defineProperties:hF});var dnt=$r,KJ=dnt.Object,pnt=cnt.exports=function(r,t){return KJ.defineProperties(r,t)};KJ.defineProperties.sham&&(pnt.sham=!0);var vnt=A5,gnt=vnt;(function(e){e.exports=gnt})(unt);var jx=Pt(I5),O5={},ynt={get exports(){return O5},set exports(e){O5=e}},C5={},mnt={get exports(){return C5},set exports(e){C5=e}},bnt=jt,wnt=ii,dF=Yo.f;bnt({target:"Object",stat:!0,forced:Object.defineProperty!==dF,sham:!wnt},{defineProperty:dF});var $nt=$r,qJ=$nt.Object,_nt=mnt.exports=function(r,t,n){return qJ.defineProperty(r,t,n)};qJ.defineProperty.sham&&(_nt.sham=!0);var xnt=C5,VJ=xnt;(function(e){e.exports=VJ})(ynt);var zx=Pt(O5);function ht(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var P5={},Ent={get exports(){return P5},set exports(e){P5=e}},N5={},Snt={get exports(){return N5},set exports(e){N5=e}},knt=VJ,Tnt=knt,Int=Tnt,Ant=Int;(function(e){e.exports=Ant})(Snt);(function(e){e.exports=N5})(Ent);var Hx=Pt(P5),R5={},Ont={get exports(){return R5},set exports(e){R5=e}},D5={},Cnt={get exports(){return D5},set exports(e){D5=e}},Pnt=TypeError,Nnt=9007199254740991,GJ=function(e){if(e>Nnt)throw Pnt("Maximum allowed index exceeded");return e},Rnt=Er,Dnt=Dn,Bnt=h0,Mnt=Dnt("species"),S0=function(e){return Bnt>=51||!Rnt(function(){var r=[],t=r.constructor={};return t[Mnt]=function(){return{foo:1}},r[e](Boolean).foo!==1})},Lnt=jt,Fnt=Er,jnt=Kh,znt=$i,Hnt=lo,Unt=Pa,pF=GJ,vF=jv,Wnt=iN,Knt=S0,qnt=Dn,Vnt=h0,YJ=qnt("isConcatSpreadable"),Gnt=Vnt>=51||!Fnt(function(){var e=[];return e[YJ]=!1,e.concat()[0]!==e}),Ynt=function(e){if(!znt(e))return!1;var r=e[YJ];return r!==void 0?!!r:jnt(e)},Znt=!Gnt||!Knt("concat");Lnt({target:"Array",proto:!0,arity:1,forced:Znt},{concat:function(r){var t=Hnt(this),n=Wnt(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],Ynt(u))for(l=Unt(u),pF(i+l),o=0;o<l;o++,i++)o in u&&vF(n,i,u[o]);else pF(i+1),vF(n,i++,u);return n.length=i,n}});var Xnt=_n;Xnt("asyncIterator");var Jnt=_n;Jnt("hasInstance");var Qnt=_n;Qnt("isConcatSpreadable");var eit=_n;eit("iterator");var tit=_n;tit("match");var rit=_n;rit("matchAll");var nit=_n;nit("replace");var iit=_n;iit("search");var sit=_n;sit("species");var oit=_n;oit("split");var ait=_n,lit=mJ;ait("toPrimitive");lit();var uit=Go,cit=_n,fit=Lv;cit("toStringTag");fit(uit("Symbol"),"Symbol");var hit=_n;hit("unscopables");var dit=Gn,pit=Lv;pit(dit.JSON,"JSON",!0);var vit=$r,git=vit.Symbol,yit=git,ZJ=yit,mit=_n;mit("dispose");var bit=ZJ,wit=bit,$it=_n;$it("asyncDispose");var _it=jt,xit=Go,Eit=Sr,XJ=xit("Symbol"),Sit=XJ.keyFor,kit=Eit(XJ.prototype.valueOf);_it({target:"Symbol",stat:!0},{isRegistered:function(r){try{return Sit(kit(r))!==void 0}catch{return!1}}});var Tit=jt,Iit=jc,JJ=Go,Ait=Sr,Oit=d0,Cit=Dn,P$=JJ("Symbol"),gF=P$.isWellKnown,QJ=JJ("Object","getOwnPropertyNames"),Pit=Ait(P$.prototype.valueOf),yF=Iit("wks");for(var Yk=0,mF=QJ(P$),Nit=mF.length;Yk<Nit;Yk++)try{var bF=mF[Yk];Oit(P$[bF])&&Cit(bF)}catch{}Tit({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(gF&&gF(r))return!0;try{for(var t=Pit(r),n=0,i=QJ(yF),s=i.length;n<s;n++)if(yF[i[n]]==t)return!0}catch{}return!1}});var Rit=_n;Rit("matcher");var Dit=_n;Dit("metadataKey");var Bit=_n;Bit("observable");var Mit=_n;Mit("metadata");var Lit=_n;Lit("patternMatch");var Fit=_n;Fit("replaceAll");var jit=wit,zit=jit;(function(e){e.exports=zit})(Cnt);(function(e){e.exports=D5})(Ont);var np=Pt(R5),B5={},Hit={get exports(){return B5},set exports(e){B5=e}},M5={},Uit={get exports(){return M5},set exports(e){M5=e}},Wit=_0,Kit=Wit.f("iterator"),qit=Kit,Vit=qit,Git=Vit,Yit=Git,Zit=Yit,Xit=Zit;(function(e){e.exports=Xit})(Uit);(function(e){e.exports=M5})(Hit);var Jit=Pt(B5);function Dr(e){"@babel/helpers - typeof";return Dr=typeof np=="function"&&typeof Jit=="symbol"?function(r){return typeof r}:function(r){return r&&typeof np=="function"&&r.constructor===np&&r!==np.prototype?"symbol":typeof r},Dr(e)}var L5={},Qit={get exports(){return L5},set exports(e){L5=e}},F5={},est={get exports(){return F5},set exports(e){F5=e}},tst=_0,rst=tst.f("toPrimitive"),nst=rst,ist=nst,sst=ist,ost=sst,ast=ost,lst=ast;(function(e){e.exports=lst})(est);(function(e){e.exports=F5})(Qit);var ust=Pt(L5);function cst(e,r){if(Dr(e)!=="object"||e===null)return e;var t=e[ust];if(t!==void 0){var n=t.call(e,r||"default");if(Dr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function eQ(e){var r=cst(e,"string");return Dr(r)==="symbol"?r:String(r)}function wF(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Hx(e,eQ(n.key),n)}}function dt(e,r,t){return r&&wF(e.prototype,r),t&&wF(e,t),Hx(e,"prototype",{writable:!1}),e}function Ux(e,r,t){return r=eQ(r),r in e?Hx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var j5={},fst={get exports(){return j5},set exports(e){j5=e}},z5={},hst={get exports(){return z5},set exports(e){z5=e}},dst=jt,pst=Kh;dst({target:"Array",stat:!0},{isArray:pst});var vst=$r,gst=vst.Array.isArray,yst=gst,tQ=yst,mst=tQ,bst=mst,wst=bst,$st=wst;(function(e){e.exports=$st})(hst);(function(e){e.exports=z5})(fst);var rQ=Pt(j5);function _st(e){if(rQ(e))return e}function xst(e,r){var t=e==null?null:typeof np<"u"&&ku(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var H5={},Est={get exports(){return H5},set exports(e){H5=e}},U5={},Sst={get exports(){return U5},set exports(e){U5=e}},kst=jt,$F=Kh,Tst=Px,Ist=$i,_F=g0,Ast=Pa,Ost=Ca,Cst=jv,Pst=Dn,Nst=S0,Rst=Ix,Dst=Nst("slice"),Bst=Pst("species"),Zk=Array,Mst=Math.max;kst({target:"Array",proto:!0,forced:!Dst},{slice:function(r,t){var n=Ost(this),i=Ast(n),s=_F(r,i),o=_F(t===void 0?i:t,i),a,l,u;if($F(n)&&(a=n.constructor,Tst(a)&&(a===Zk||$F(a.prototype))?a=void 0:Ist(a)&&(a=a[Bst],a===null&&(a=void 0)),a===Zk||a===void 0))return Rst(n,s,o);for(l=new(a===void 0?Zk:a)(Mst(o-s,0)),u=0;s<o;s++,u++)s in n&&Cst(l,u,n[s]);return l.length=u,l}});var Lst=xi,Fst=Lst("Array").slice,jst=Rn,zst=Fst,Xk=Array.prototype,Hst=function(e){var r=e.slice;return e===Xk||jst(Xk,e)&&r===Xk.slice?zst:r},Ust=Hst,nQ=Ust,Wst=nQ,Kst=Wst,qst=Kst,Vst=qst;(function(e){e.exports=Vst})(Sst);(function(e){e.exports=U5})(Est);var Gst=Pt(H5),W5={},Yst={get exports(){return W5},set exports(e){W5=e}},K5={},Zst={get exports(){return K5},set exports(e){K5=e}},Xst=hJ,Jst=Xst,Qst=Jst,eot=Qst;(function(e){e.exports=eot})(Zst);(function(e){e.exports=K5})(Yst);var iQ=Pt(W5);function q5(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function sQ(e,r){var t;if(e){if(typeof e=="string")return q5(e,r);var n=Gst(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return iQ(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q5(e,r)}}function tot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(e,r){return _st(e)||xst(e,r)||sQ(e,r)||tot()}function rot(e){if(rQ(e))return q5(e)}function not(e){if(typeof np<"u"&&ku(e)!=null||e["@@iterator"]!=null)return iQ(e)}function iot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nl(e){return rot(e)||not(e)||sQ(e)||iot()}var V5={},sot={get exports(){return V5},set exports(e){V5=e}};(function(e){e.exports=ZJ})(sot);var Xc=Pt(V5),G5={},oot={get exports(){return G5},set exports(e){G5=e}},aot=xi,lot=aot("Array").concat,uot=Rn,cot=lot,Jk=Array.prototype,fot=function(e){var r=e.concat;return e===Jk||uot(Jk,e)&&r===Jk.concat?cot:r},hot=fot,dot=hot;(function(e){e.exports=dot})(oot);var cN=Pt(G5),Y5={},pot={get exports(){return Y5},set exports(e){Y5=e}};(function(e){e.exports=nQ})(pot);var Ci=Pt(Y5),xF={},vot={get exports(){return xF},set exports(e){xF=e}},got=jt,yot=WJ;got({target:"Reflect",stat:!0},{ownKeys:yot});var mot=$r,bot=mot.Reflect.ownKeys,wot=bot,$ot=wot;(function(e){e.exports=$ot})(vot);var Z5={},_ot={get exports(){return Z5},set exports(e){Z5=e}};(function(e){e.exports=tQ})(_ot);var Lr=Pt(Z5),X5={},xot={get exports(){return X5},set exports(e){X5=e}},Eot=jt,Sot=Yc.map,kot=S0,Tot=kot("map");Eot({target:"Array",proto:!0,forced:!Tot},{map:function(r){return Sot(this,r,arguments.length>1?arguments[1]:void 0)}});var Iot=xi,Aot=Iot("Array").map,Oot=Rn,Cot=Aot,Qk=Array.prototype,Pot=function(e){var r=e.map;return e===Qk||Oot(Qk,e)&&r===Qk.map?Cot:r},Not=Pot,Rot=Not;(function(e){e.exports=Rot})(xot);var Xp=Pt(X5),J5={},Dot={get exports(){return J5},set exports(e){J5=e}},Bot=jt,Mot=lo,oQ=m0,Lot=Er,Fot=Lot(function(){oQ(1)});Bot({target:"Object",stat:!0,forced:Fot},{keys:function(r){return oQ(Mot(r))}});var jot=$r,zot=jot.Object.keys,Hot=zot,Uot=Hot;(function(e){e.exports=Uot})(Dot);var yn=Pt(J5),Q5={},Wot={get exports(){return Q5},set exports(e){Q5=e}},Kot=jt,qot=Sr,aQ=Date,Vot=qot(aQ.prototype.getTime);Kot({target:"Date",stat:!0},{now:function(){return Vot(new aQ)}});var Got=$r,Yot=Got.Date.now,Zot=Yot,Xot=Zot;(function(e){e.exports=Xot})(Wot);var N$=Pt(Q5),eC={},Jot={get exports(){return eC},set exports(e){eC=e}},Qot=Er,zv=function(e,r){var t=[][e];return!!t&&Qot(function(){t.call(null,r||function(){return 1},1)})},eat=Yc.forEach,tat=zv,rat=tat("forEach"),nat=rat?[].forEach:function(r){return eat(this,r,arguments.length>1?arguments[1]:void 0)},iat=jt,EF=nat;iat({target:"Array",proto:!0,forced:[].forEach!=EF},{forEach:EF});var sat=xi,oat=sat("Array").forEach,aat=oat,lat=aat,uat=Hh,cat=_i,fat=Rn,hat=lat,eT=Array.prototype,dat={DOMTokenList:!0,NodeList:!0},pat=function(e){var r=e.forEach;return e===eT||fat(eT,e)&&r===eT.forEach||cat(dat,uat(e))?hat:r};(function(e){e.exports=pat})(Jot);var Ur=Pt(eC),tC={},vat={get exports(){return tC},set exports(e){tC=e}},gat=jt,yat=Sr,mat=Kh,bat=yat([].reverse),SF=[1,2];gat({target:"Array",proto:!0,forced:String(SF)===String(SF.reverse())},{reverse:function(){return mat(this)&&(this.length=this.length),bat(this)}});var wat=xi,$at=wat("Array").reverse,_at=Rn,xat=$at,tT=Array.prototype,Eat=function(e){var r=e.reverse;return e===tT||_at(tT,e)&&r===tT.reverse?xat:r},Sat=Eat,kat=Sat;(function(e){e.exports=kat})(vat);var fh=Pt(tC),rC={},Tat={get exports(){return rC},set exports(e){rC=e}},Iat=ii,Aat=Kh,Oat=TypeError,Cat=Object.getOwnPropertyDescriptor,Pat=Iat&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Nat=Pat?function(e,r){if(Aat(e)&&!Cat(e,"length").writable)throw Oat("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},kF=Dv,Rat=TypeError,lQ=function(e,r){if(!delete e[r])throw Rat("Cannot delete property "+kF(r)+" of "+kF(e))},Dat=jt,Bat=lo,Mat=g0,Lat=Tx,Fat=Pa,jat=Nat,zat=GJ,Hat=iN,Uat=jv,rT=lQ,Wat=S0,Kat=Wat("splice"),qat=Math.max,Vat=Math.min;Dat({target:"Array",proto:!0,forced:!Kat},{splice:function(r,t){var n=Bat(this),i=Fat(n),s=Mat(r,i),o=arguments.length,a,l,u,h,c,d;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=Vat(qat(Lat(t),0),i-s)),zat(i+a-l),u=Hat(n,l),h=0;h<l;h++)c=s+h,c in n&&Uat(u,h,n[c]);if(u.length=l,a<l){for(h=s;h<i-l;h++)c=h+l,d=h+a,c in n?n[d]=n[c]:rT(n,d);for(h=i;h>i-l+a;h--)rT(n,h-1)}else if(a>l)for(h=i-l;h>s;h--)c=h+l-1,d=h+a-1,c in n?n[d]=n[c]:rT(n,d);for(h=0;h<a;h++)n[h+s]=arguments[h+2];return jat(n,i-l+a),u}});var Gat=xi,Yat=Gat("Array").splice,Zat=Rn,Xat=Yat,nT=Array.prototype,Jat=function(e){var r=e.splice;return e===nT||Zat(nT,e)&&r===nT.splice?Xat:r},Qat=Jat,elt=Qat;(function(e){e.exports=elt})(Tat);var su=Pt(rC),nC={},tlt={get exports(){return nC},set exports(e){nC=e}},rlt=jt,nlt=G4.includes,ilt=Er,slt=ilt(function(){return!Array(1).includes()});rlt({target:"Array",proto:!0,forced:slt},{includes:function(r){return nlt(this,r,arguments.length>1?arguments[1]:void 0)}});var olt=xi,alt=olt("Array").includes,llt=$i,ult=Su,clt=Dn,flt=clt("match"),hlt=function(e){var r;return llt(e)&&((r=e[flt])!==void 0?!!r:ult(e)=="RegExp")},dlt=hlt,plt=TypeError,vlt=function(e){if(dlt(e))throw plt("The method doesn't accept regular expressions");return e},glt=Dn,ylt=glt("match"),mlt=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[ylt]=!1,"/./"[e](r)}catch{}}return!1},blt=jt,wlt=Sr,$lt=vlt,_lt=c0,TF=wl,xlt=mlt,Elt=wlt("".indexOf);blt({target:"String",proto:!0,forced:!xlt("includes")},{includes:function(r){return!!~Elt(TF(_lt(this)),TF($lt(r)),arguments.length>1?arguments[1]:void 0)}});var Slt=xi,klt=Slt("String").includes,IF=Rn,Tlt=alt,Ilt=klt,iT=Array.prototype,sT=String.prototype,Alt=function(e){var r=e.includes;return e===iT||IF(iT,e)&&r===iT.includes?Tlt:typeof e=="string"||e===sT||IF(sT,e)&&r===sT.includes?Ilt:r},Olt=Alt,Clt=Olt;(function(e){e.exports=Clt})(tlt);var cl=Pt(nC),iC={},Plt={get exports(){return iC},set exports(e){iC=e}},Nlt=jt,Rlt=Er,Dlt=lo,uQ=Cx,Blt=JX,Mlt=Rlt(function(){uQ(1)});Nlt({target:"Object",stat:!0,forced:Mlt,sham:!Blt},{getPrototypeOf:function(r){return uQ(Dlt(r))}});var Llt=$r,Flt=Llt.Object.getPrototypeOf,jlt=Flt,cQ=jlt;(function(e){e.exports=cQ})(Plt);var AF=Pt(iC),sC={},zlt={get exports(){return sC},set exports(e){sC=e}},Hlt=jt,Ult=Yc.filter,Wlt=S0,Klt=Wlt("filter");Hlt({target:"Array",proto:!0,forced:!Klt},{filter:function(r){return Ult(this,r,arguments.length>1?arguments[1]:void 0)}});var qlt=xi,Vlt=qlt("Array").filter,Glt=Rn,Ylt=Vlt,oT=Array.prototype,Zlt=function(e){var r=e.filter;return e===oT||Glt(oT,e)&&r===oT.filter?Ylt:r},Xlt=Zlt,Jlt=Xlt;(function(e){e.exports=Jlt})(zlt);var Os=Pt(sC),OF={},Qlt={get exports(){return OF},set exports(e){OF=e}},eut=ii,fQ=Sr,tut=m0,rut=Ca,nut=a0.f,iut=fQ(nut),sut=fQ([].push),CF=function(e){return function(r){for(var t=rut(r),n=tut(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!eut||iut(t,a))&&sut(o,e?[a,t[a]]:t[a]);return o}},out={entries:CF(!0),values:CF(!1)},aut=jt,lut=out.values;aut({target:"Object",stat:!0},{values:function(r){return lut(r)}});var uut=$r,cut=uut.Object.values,fut=cut,hut=fut;(function(e){e.exports=hut})(Qlt);var oC={},dut={get exports(){return oC},set exports(e){oC=e}},Wx=`	
\v\f\r \u2028\u2029\uFEFF`,put=Sr,vut=c0,gut=wl,aC=Wx,PF=put("".replace),yut=RegExp("^["+aC+"]+"),mut=RegExp("(^|[^"+aC+"])["+aC+"]+$"),aT=function(e){return function(r){var t=gut(vut(r));return e&1&&(t=PF(t,yut,"")),e&2&&(t=PF(t,mut,"$1")),t}},fN={start:aT(1),end:aT(2),trim:aT(3)},hQ=Gn,but=Er,wut=Sr,$ut=wl,_ut=fN.trim,NF=Wx,vy=hQ.parseInt,RF=hQ.Symbol,DF=RF&&RF.iterator,dQ=/^[+-]?0x/i,xut=wut(dQ.exec),Eut=vy(NF+"08")!==8||vy(NF+"0x16")!==22||DF&&!but(function(){vy(Object(DF))}),Sut=Eut?function(r,t){var n=_ut($ut(r));return vy(n,t>>>0||(xut(dQ,n)?16:10))}:vy,kut=jt,BF=Sut;kut({global:!0,forced:parseInt!=BF},{parseInt:BF});var Tut=$r,Iut=Tut.parseInt,Aut=Iut,Out=Aut;(function(e){e.exports=Out})(dut);var ha=Pt(oC),lC={},Cut={get exports(){return lC},set exports(e){lC=e}},Put=jt,Nut=K4,Rut=G4.indexOf,Dut=zv,uC=Nut([].indexOf),pQ=!!uC&&1/uC([1],1,-0)<0,But=pQ||!Dut("indexOf");Put({target:"Array",proto:!0,forced:But},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return pQ?uC(this,r,t)||0:Rut(this,r,t)}});var Mut=xi,Lut=Mut("Array").indexOf,Fut=Rn,jut=Lut,lT=Array.prototype,zut=function(e){var r=e.indexOf;return e===lT||Fut(lT,e)&&r===lT.indexOf?jut:r},Hut=zut,Uut=Hut;(function(e){e.exports=Uut})(Cut);var _r=Pt(lC),MF={},Wut={get exports(){return MF},set exports(e){MF=e}},Kut=YX.PROPER,qut=Er,LF=Wx,FF="",Vut=function(e){return qut(function(){return!!LF[e]()||FF[e]()!==FF||Kut&&LF[e].name!==e})},Gut=jt,Yut=fN.trim,Zut=Vut;Gut({target:"String",proto:!0,forced:Zut("trim")},{trim:function(){return Yut(this)}});var Xut=xi,Jut=Xut("String").trim,Qut=Rn,ect=Jut,uT=String.prototype,tct=function(e){var r=e.trim;return typeof e=="string"||e===uT||Qut(uT,e)&&r===uT.trim?ect:r},rct=tct,nct=rct;(function(e){e.exports=nct})(Wut);var cC={},ict={get exports(){return cC},set exports(e){cC=e}},sct=jt,oct=ii,act=Mv;sct({target:"Object",stat:!0,sham:!oct},{create:act});var lct=$r,uct=lct.Object,cct=function(r,t){return uct.create(r,t)},fct=cct,vQ=fct;(function(e){e.exports=vQ})(ict);var hh=Pt(cC),fC={},hct={get exports(){return fC},set exports(e){fC=e}},hC=$r,dct=o0;hC.JSON||(hC.JSON={stringify:JSON.stringify});var pct=function(r,t,n){return dct(hC.JSON.stringify,null,arguments)},vct=pct,gct=vct;(function(e){e.exports=gct})(hct);var k0=Pt(fC),dC={},yct={get exports(){return dC},set exports(e){dC=e}},mct=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",bct=TypeError,wct=function(e,r){if(e<r)throw bct("Not enough arguments");return e},gQ=Gn,$ct=o0,_ct=wi,xct=mct,Ect=f0,Sct=Ix,kct=wct,Tct=gQ.Function,Ict=/MSIE .\./.test(Ect)||xct&&function(){var e=gQ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),yQ=function(e,r){var t=r?2:1;return Ict?function(n,i){var s=kct(arguments.length,1)>t,o=_ct(n)?n:Tct(n),a=s?Sct(arguments,t):[],l=s?function(){$ct(o,this,a)}:o;return r?e(l,i):e(l)}:e},Act=jt,mQ=Gn,Oct=yQ,jF=Oct(mQ.setInterval,!0);Act({global:!0,bind:!0,forced:mQ.setInterval!==jF},{setInterval:jF});var Cct=jt,bQ=Gn,Pct=yQ,zF=Pct(bQ.setTimeout,!0);Cct({global:!0,bind:!0,forced:bQ.setTimeout!==zF},{setTimeout:zF});var Nct=$r,Rct=Nct.setTimeout;(function(e){e.exports=Rct})(yct);var fl=Pt(dC),pC={},Dct={get exports(){return pC},set exports(e){pC=e}},Bct=lo,HF=g0,Mct=Pa,Lct=function(r){for(var t=Bct(this),n=Mct(t),i=arguments.length,s=HF(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:HF(o,n);a>s;)t[s++]=r;return t},Fct=jt,jct=Lct;Fct({target:"Array",proto:!0},{fill:jct});var zct=xi,Hct=zct("Array").fill,Uct=Rn,Wct=Hct,cT=Array.prototype,Kct=function(e){var r=e.fill;return e===cT||Uct(cT,e)&&r===cT.fill?Wct:r},qct=Kct,Vct=qct;(function(e){e.exports=Vct})(Dct);var T0=Pt(pC);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ta(){return Ta=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ta.apply(this,arguments)}function Zo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function k1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var vC;typeof Object.assign!="function"?vC=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:vC=Object.assign;var Ih=vC,UF=["","webkit","Moz","MS","ms","o"],Gct=typeof document>"u"?{style:{}}:document.createElement("div"),Yct="function",ip=Math.round,Ah=Math.abs,hN=Date.now;function Kx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<UF.length;){if(t=UF[s],n=t?t+i:r,n in e)return n;s++}}var ou;typeof window>"u"?ou={}:ou=window;var wQ=Kx(Gct.style,"touchAction"),$Q=wQ!==void 0;function Zct(){if(!$Q)return!1;var e={},r=ou.CSS&&ou.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?ou.CSS.supports("touch-action",t):!0}),e}var _Q="compute",xQ="auto",gC="manipulation",dh="none",sm="pan-x",om="pan-y",T1=Zct(),Xct=/mobile|tablet|ip(ad|hone|od)|android/i,EQ="ontouchstart"in ou,Jct=Kx(ou,"PointerEvent")!==void 0,Qct=EQ&&Xct.test(navigator.userAgent),I0="touch",eft="pen",dN="mouse",tft="kinect",rft=25,fs=1,qh=2,Un=4,Ds=8,R$=1,A0=2,O0=4,C0=8,Jp=16,hl=A0|O0,ph=C0|Jp,SQ=hl|ph,kQ=["x","y"],D$=["clientX","clientY"];function au(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function qx(e,r){return typeof e===Yct?e.apply(r&&r[0]||void 0,r):e}function Yf(e,r){return e.indexOf(r)>-1}function nft(e){if(Yf(e,dh))return dh;var r=Yf(e,sm),t=Yf(e,om);return r&&t?dh:r||t?r?sm:om:Yf(e,gC)?gC:xQ}var TQ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===_Q&&(n=this.compute()),$Q&&this.manager.element.style&&T1[n]&&(this.manager.element.style[wQ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return au(this.manager.recognizers,function(i){qx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),nft(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Yf(o,dh)&&!T1[dh],l=Yf(o,om)&&!T1[om],u=Yf(o,sm)&&!T1[sm];if(a){var h=n.pointers.length===1,c=n.distance<2,d=n.deltaTime<250;if(h&&c&&d)return}if(!(u&&l)&&(a||l&&s&hl||u&&s&ph))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function pN(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function IQ(e){var r=e.length;if(r===1)return{x:ip(e[0].clientX),y:ip(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:ip(t/r),y:ip(n/r)}}function WF(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:ip(e.pointers[t].clientX),clientY:ip(e.pointers[t].clientY)},t++;return{timeStamp:hN(),pointers:r,center:IQ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function B$(e,r,t){t||(t=kQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function yC(e,r,t){t||(t=kQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function AQ(e,r){return e===r?R$:Ah(e)>=Ah(r)?e<0?A0:O0:r<0?C0:Jp}function ift(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===fs||s.eventType===Un)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function OQ(e,r,t){return{x:r/e||0,y:t/e||0}}function sft(e,r){return B$(r[0],r[1],D$)/B$(e[0],e[1],D$)}function oft(e,r){return yC(r[1],r[0],D$)+yC(e[1],e[0],D$)}function aft(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ds&&(n>rft||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=OQ(n,l,u);s=h.x,o=h.y,i=Ah(h.x)>Ah(h.y)?h.x:h.y,a=AQ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function lft(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=WF(r)),i>1&&!t.firstMultiple?t.firstMultiple=WF(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=IQ(n);r.timeStamp=hN(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=yC(a,l),r.distance=B$(a,l),ift(t,r),r.offsetDirection=AQ(r.deltaX,r.deltaY);var u=OQ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Ah(u.x)>Ah(u.y)?u.x:u.y,r.scale=o?sft(o.pointers,n):1,r.rotation=o?oft(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,aft(t,r);var h=e.element,c=r.srcEvent,d;c.composedPath?d=c.composedPath()[0]:c.path?d=c.path[0]:d=c.target,pN(d,h)&&(h=d),r.target=h}function uft(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&fs&&n-i===0,o=r&(Un|Ds)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,lft(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function am(e){return e.trim().split(/\s+/g)}function gy(e,r,t){au(am(r),function(n){e.addEventListener(n,t,!1)})}function yy(e,r,t){au(am(r),function(n){e.removeEventListener(n,t,!1)})}function KF(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Hv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){qx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&gy(this.element,this.evEl,this.domHandler),this.evTarget&&gy(this.target,this.evTarget,this.domHandler),this.evWin&&gy(KF(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&yy(this.element,this.evEl,this.domHandler),this.evTarget&&yy(this.target,this.evTarget,this.domHandler),this.evWin&&yy(KF(this.element),this.evWin,this.domHandler)},e}();function Oh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var cft={pointerdown:fs,pointermove:qh,pointerup:Un,pointercancel:Ds,pointerout:Ds},fft={2:I0,3:eft,4:dN,5:tft},CQ="pointerdown",PQ="pointermove pointerup pointercancel";ou.MSPointerEvent&&!ou.PointerEvent&&(CQ="MSPointerDown",PQ="MSPointerMove MSPointerUp MSPointerCancel");var NQ=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evEl=CQ,i.evWin=PQ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=cft[a],u=fft[i.pointerType]||i.pointerType,h=u===I0,c=Oh(s,i.pointerId,"pointerId");l&fs&&(i.button===0||h)?c<0&&(s.push(i),c=s.length-1):l&(Un|Ds)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Hv);function lm(e){return Array.prototype.slice.call(e,0)}function vN(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Oh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var hft={touchstart:fs,touchmove:qh,touchend:Un,touchcancel:Ds},dft="touchstart touchmove touchend touchcancel",gN=function(e){Zo(r,e);function r(){var n;return r.prototype.evTarget=dft,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=hft[i.type],o=pft.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:I0,srcEvent:i})},r}(Hv);function pft(e,r){var t=lm(e.touches),n=this.targetIds;if(r&(fs|qh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=lm(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return pN(u.target,l)}),r===fs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Un|Ds)&&delete n[o[i].identifier],i++;if(a.length)return[vN(s.concat(a),"identifier",!0),a]}var vft={mousedown:fs,mousemove:qh,mouseup:Un},gft="mousedown",yft="mousemove mouseup",yN=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evEl=gft,i.evWin=yft,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=vft[i.type];s&fs&&i.button===0&&(this.pressed=!0),s&qh&&i.which!==1&&(s=Un),this.pressed&&(s&Un&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:dN,srcEvent:i}))},r}(Hv),mft=2500,qF=25;function VF(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,mft)}}function bft(e,r){e&fs?(this.primaryTouch=r.changedPointers[0].identifier,VF.call(this,r)):e&(Un|Ds)&&VF.call(this,r)}function wft(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=qF&&o<=qF)return!0}return!1}var RQ=function(){var e=function(r){Zo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var h=u.pointerType===I0,c=u.pointerType===dN;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)bft.call(k1(k1(o)),l,u);else if(c&&wft.call(k1(k1(o)),u))return;o.callback(a,l,u)}},o.touch=new gN(o.manager,o.handler),o.mouse=new yN(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Hv);return e}();function $ft(e){var r,t=e.options.inputClass;return t?r=t:Jct?r=NQ:Qct?r=gN:EQ?r=RQ:r=yN,new r(e,uft)}function sp(e,r,t){return Array.isArray(e)?(au(e,t[r],t),!0):!1}var vw=1,Uo=2,Qp=4,Ic=8,lu=Ic,um=16,al=32,_ft=1;function xft(){return _ft++}function I1(e,r){var t=r.manager;return t?t.get(e):e}function GF(e){return e&um?"cancel":e&Ic?"end":e&Qp?"move":e&Uo?"start":""}var P0=function(){function e(t){t===void 0&&(t={}),this.options=Ta({enable:!0},t),this.id=xft(),this.manager=null,this.state=vw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Ih(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(sp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=I1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return sp(n,"dropRecognizeWith",this)?this:(n=I1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(sp(n,"requireFailure",this))return this;var i=this.requireFail;return n=I1(n,this),Oh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(sp(n,"dropRequireFailure",this))return this;n=I1(n,this);var i=Oh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ic&&o(i.options.event+GF(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ic&&o(i.options.event+GF(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=al},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(al|vw)))return!1;n++}return!0},r.recognize=function(n){var i=Ih({},n);if(!qx(this.options.enable,[this,i])){this.reset(),this.state=al;return}this.state&(lu|um|al)&&(this.state=vw),this.state=this.process(i),this.state&(Uo|Qp|Ic|um)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),mC=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ta({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[gC]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&fs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Un)return this.failTimeout();var h=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||B$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!h?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=lu,s.tryEmit()},o.interval),Uo):lu}return al},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=al},this.options.interval),al},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===lu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(P0),ev=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ta({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Uo|Qp),l=this.attrTest(i);return a&&(o&Ds||!l)?s|um:a||l?o&Un?s|Ic:s&Uo?s|Qp:Uo:al},r}(P0);function DQ(e){return e===Jp?"down":e===C0?"up":e===A0?"left":e===O0?"right":""}var mN=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ta({event:"pan",threshold:10,pointers:1,direction:SQ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&hl&&s.push(om),i&ph&&s.push(sm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,h=i.deltaY;return l&s.direction||(s.direction&hl?(l=u===0?R$:u<0?A0:O0,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=h===0?R$:h<0?C0:Jp,o=h!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return ev.prototype.attrTest.call(this,i)&&(this.state&Uo||!(this.state&Uo)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=DQ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(ev),BQ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ta({event:"swipe",threshold:10,velocity:.3,direction:hl|ph,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return mN.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(hl|ph)?o=i.overallVelocity:s&hl?o=i.overallVelocityX:s&ph&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ah(o)>this.options.velocity&&i.eventType&Un},t.emit=function(i){var s=DQ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(ev),MQ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ta({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[dh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Uo)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(ev),LQ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ta({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[dh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Uo)},r}(ev),FQ=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ta({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[xQ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Un|Ds)&&!u)this.reset();else if(i.eventType&fs)this.reset(),this._timer=setTimeout(function(){s.state=lu,s.tryEmit()},o.time);else if(i.eventType&Un)return lu;return al},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===lu&&(i&&i.eventType&Un?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=hN(),this.manager.emit(this.options.event,this._input)))},r}(P0),jQ={domEvents:!1,touchAction:_Q,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},YF=[[LQ,{enable:!1}],[MQ,{enable:!1},["rotate"]],[BQ,{direction:hl}],[mN,{direction:hl},["swipe"]],[mC],[mC,{event:"doubletap",taps:2},["tap"]],[FQ]],Eft=1,ZF=2;function XF(e,r){var t=e.element;if(t.style){var n;au(e.options.cssProps,function(i,s){n=Kx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Sft(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var JF=function(){function e(t,n){var i=this;this.options=Ih({},jQ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=$ft(this),this.touchAction=new TQ(this,this.options.touchAction),XF(this,!0),au(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Ih(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?ZF:Eft},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&lu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==ZF&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Uo|Qp|Ic)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof P0)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(sp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(sp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Oh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return au(am(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return au(am(n),function(o){i?s[o]&&s[o].splice(Oh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Sft(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&XF(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),kft={touchstart:fs,touchmove:qh,touchend:Un,touchcancel:Ds},Tft="touchstart",Ift="touchstart touchmove touchend touchcancel",Aft=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evTarget=Tft,i.evWin=Ift,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=kft[i.type];if(s===fs&&(this.started=!0),!!this.started){var o=Oft.call(this,i,s);s&(Un|Ds)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:I0,srcEvent:i})}},r}(Hv);function Oft(e,r){var t=lm(e.touches),n=lm(e.changedTouches);return r&(Un|Ds)&&(t=vN(t.concat(n),"identifier",!0)),[t,n]}function zQ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var HQ=zQ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),Cft=zQ(function(e,r){return HQ(e,r,!0)},"merge","Use `assign`.");function Pft(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Ih(i,t)}function QF(e,r){return function(){return e.apply(r,arguments)}}var UQ=function(){var e=function(t,n){return n===void 0&&(n={}),new JF(t,Ta({recognizers:YF.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=SQ,e.DIRECTION_DOWN=Jp,e.DIRECTION_LEFT=A0,e.DIRECTION_RIGHT=O0,e.DIRECTION_UP=C0,e.DIRECTION_HORIZONTAL=hl,e.DIRECTION_VERTICAL=ph,e.DIRECTION_NONE=R$,e.DIRECTION_DOWN=Jp,e.INPUT_START=fs,e.INPUT_MOVE=qh,e.INPUT_END=Un,e.INPUT_CANCEL=Ds,e.STATE_POSSIBLE=vw,e.STATE_BEGAN=Uo,e.STATE_CHANGED=Qp,e.STATE_ENDED=Ic,e.STATE_RECOGNIZED=lu,e.STATE_CANCELLED=um,e.STATE_FAILED=al,e.Manager=JF,e.Input=Hv,e.TouchAction=TQ,e.TouchInput=gN,e.MouseInput=yN,e.PointerEventInput=NQ,e.TouchMouseInput=RQ,e.SingleTouchInput=Aft,e.Recognizer=P0,e.AttrRecognizer=ev,e.Tap=mC,e.Pan=mN,e.Swipe=BQ,e.Pinch=MQ,e.Rotate=LQ,e.Press=FQ,e.on=gy,e.off=yy,e.each=au,e.merge=Cft,e.extend=HQ,e.bindFn=QF,e.assign=Ih,e.inherit=Pft,e.bindFn=QF,e.prefixed=Kx,e.toArray=lm,e.inArray=Oh,e.uniqueArray=vN,e.splitStr=am,e.boolOrFn=qx,e.hasParent=pN,e.addEventListeners=gy,e.removeEventListeners=yy,e.defaults=Ih({},jQ,{preset:YF}),e}();UQ.defaults;var Nft=UQ;function WQ(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Rft(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Rft(e,r){var t;if(e){if(typeof e=="string")return ej(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ej(e,r)}}function ej(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}Xc("DELETE");function Vx(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return Dft(r.length?r:[N$()])}function Dft(e){var r=Bft(e),t=mn(r,3),n=t[0],i=t[1],s=t[2],o=1,a=function(){var u=2091639*n+o*23283064365386963e-26;return n=i,i=s,s=u-(o=u|0)};return a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function Bft(){for(var e=Mft(),r=e(" "),t=e(" "),n=e(" "),i=0;i<arguments.length;i++)r-=e(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),t-=e(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=e(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[r,t,n]}function Mft(){var e=4022871197;return function(r){for(var t=r.toString(),n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function Lft(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var bN=typeof window<"u"?window.Hammer||Nft:function(){return Lft()};function ll(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=bN(this._dom.overlay);n.on("tap",nt(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ur(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){Fft(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}WX(ll.prototype);ll.current=null;ll.prototype.destroy=function(){var e,r;this.deactivate();var t=WQ(fh(e=su(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};ll.prototype.activate=function(){ll.current&&ll.current.deactivate(),ll.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};ll.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};ll.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Fft(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var jft=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,zft=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Hft=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Uft=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function hc(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(hc(r),e.removeChild(r))}}function gc(e){return e instanceof String||typeof e=="string"}function tj(e){return Dr(e)==="object"&&e!==null}function Ch(e,r,t,n){var i=!1;n===!0&&(i=r[t]===null&&e[t]!==void 0),i?delete e[t]:e[t]=r[t]}function KQ(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var n in e)if(r[n]!==void 0)if(r[n]===null||Dr(r[n])!=="object")Ch(e,r,n,t);else{var i=e[n],s=r[n];tj(i)&&tj(s)&&KQ(i,s,t)}}function Uv(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Lr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var s=e[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)r[s]===void 0&&(r[s]={}),r[s].constructor===Object?Yr(r[s],t[s],!1,n):Ch(r,t,s,n);else{if(Lr(t[s]))throw new TypeError("Arrays are not supported by deepExtend");Ch(r,t,s,n)}}return r}function M$(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Lr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!cl(e).call(e,i))if(t[i]&&t[i].constructor===Object)r[i]===void 0&&(r[i]={}),r[i].constructor===Object?Yr(r[i],t[i]):Ch(r,t,i,n);else if(Lr(t[i])){r[i]=[];for(var s=0;s<t[i].length;s++)r[i].push(t[i][s])}else Ch(r,t,i,n);return r}function Yr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)||t===!0)if(Dr(r[i])==="object"&&r[i]!==null&&AF(r[i])===Object.prototype)e[i]===void 0?e[i]=Yr({},r[i],t):Dr(e[i])==="object"&&e[i]!==null&&AF(e[i])===Object.prototype?Yr(e[i],r[i],t):Ch(e,r,i,n);else if(Lr(r[i])){var s;e[i]=Ci(s=r[i]).call(s)}else Ch(e,r,i,n);return e}function L$(e,r){var t;return cN(t=[]).call(t,nl(e),[r])}function Wft(e){return Ci(e).call(e)}function Kft(e){return e.getBoundingClientRect().left}function qft(e){return e.getBoundingClientRect().top}function pr(e,r){if(Lr(e))for(var t=e.length,n=0;n<t;n++)r(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r(e[i],i,e)}function Vft(e,r,t,n){if(e.addEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&cl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,n)}else e.attachEvent("on"+r,t)}function Gft(e,r,t,n){if(e.removeEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&cl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,n)}else e.detachEvent("on"+r,t)}function wN(e){var r;switch(e.length){case 3:case 4:return r=zft.exec(e),r?{r:ha(r[1]+r[1],16),g:ha(r[2]+r[2],16),b:ha(r[3]+r[3],16)}:null;case 6:case 7:return r=jft.exec(e),r?{r:ha(r[1],16),g:ha(r[2],16),b:ha(r[3],16)}:null;default:return null}}function Fo(e,r){if(cl(e).call(e,"rgba"))return e;if(cl(e).call(e,"rgb")){var t=e.substr(_r(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var n=wN(e);return n==null?e:"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}function qQ(e,r,t){var n;return"#"+Ci(n=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(n,1)}function bC(e,r){if(gc(e)){var t=e;if(GQ(t)){var n,i=Xp(n=t.substr(4).substr(0,t.length-5).split(",")).call(n,function(d){return ha(d)});t=qQ(i[0],i[1],i[2])}if(VQ(t)===!0){var s=Yft(t),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=wC(a.h,a.s,a.v),u=wC(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var h={background:e.background||r.background,border:e.border||r.border,highlight:gc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:gc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return h}else{var c={background:e.background||void 0,border:e.border||void 0,highlight:gc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:gc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return c}}function Yg(e,r,t){e=e/255,r=r/255,t=t/255;var n=Math.min(e,Math.min(r,t)),i=Math.max(e,Math.max(r,t));if(n===i)return{h:0,s:0,v:n};var s=e===n?r-t:t===n?e-r:t-e,o=e===n?3:t===n?1:5,a=60*(o-s/(i-n))/360,l=(i-n)/i,u=i;return{h:a,s:l,v:u}}function gw(e,r,t){var n,i,s,o=Math.floor(e*6),a=e*6-o,l=t*(1-r),u=t*(1-a*r),h=t*(1-(1-a)*r);switch(o%6){case 0:n=t,i=h,s=l;break;case 1:n=u,i=t,s=l;break;case 2:n=l,i=t,s=h;break;case 3:n=l,i=u,s=t;break;case 4:n=h,i=l,s=t;break;case 5:n=t,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function wC(e,r,t){var n=gw(e,r,t);return qQ(n.r,n.g,n.b)}function Yft(e){var r=wN(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return Yg(r.r,r.g,r.b)}function VQ(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function GQ(e){return Hft.test(e)}function Zft(e){return Uft.test(e)}function Ac(e){if(e===null||Dr(e)!=="object")return null;if(e instanceof Element)return e;var r=hh(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Dr(e[t])=="object"&&(r[t]=Ac(e[t]));return r}function Ro(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=function(w){return w!=null},s=function(w){return w!==null&&Dr(w)==="object"},o=function(w){for(var b in w)if(Object.prototype.hasOwnProperty.call(w,b))return!1;return!0};if(!s(e))throw new Error("Parameter mergeTarget must be an object");if(!s(r))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(w,b,T){s(w[T])||(w[T]={});var x=b[T],A=w[T];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(A[_]=x[_])},l=r[t],u=s(n)&&!o(n),h=u?n[t]:void 0,c=h?h.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){s(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!s(e[t]))if(i(h))e[t]=hh(h);else return;if(s(l)){var d=!0;l.enabled!==void 0?d=l.enabled:c!==void 0&&(d=h.enabled),a(e,r,t),e[t].enabled=d}}}var Xft={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function dc(e,r){var t;Lr(r)||(r=[r]);var n=WQ(e),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s){t=s[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t<"u")break}}}catch(a){n.e(a)}finally{n.f()}return t}var Jft={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Qft=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ht(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return dt(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return Jft[t]}},{key:"setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var i,s=this._isColorString(t);if(s!==void 0&&(t=s),gc(t)===!0){if(GQ(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(Zft(t)===!0){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(VQ(t)===!0){var l=wN(t);i={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:u}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+k0(t));this._setColor(i,n)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n===!0&&(this.previousColor=Hn({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",fl(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n===!0&&(this.initialColor=Hn({},t)),this.color=t;var i=Yg(t.r,t.g,t.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var n=Yg(this.color.r,this.color.g,this.color.b);n.v=t/100;var i=gw(n.h,n.s,n.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,n=Yg(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-n.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),T0(i).call(i),this.brightnessRange.value=100*n.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,n,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=nt(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=nt(n=this._apply).call(n,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=nt(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=nt(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new bN(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(n){n.isFirst&&t._moveSelector(n)}),this.hammer.on("tap",function(n){t._moveSelector(n)}),this.hammer.on("panstart",function(n){t._moveSelector(n)}),this.hammer.on("panmove",function(n){t._moveSelector(n)}),this.hammer.on("panend",function(n){t._moveSelector(n)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,n,i);var s,o,a,l;this.centerCoordinates={x:n*.5,y:i*.5},this.r=.49*n;var u=2*Math.PI/360,h=1/360,c=1/this.r,d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(u*a),o=this.centerCoordinates.y+l*Math.cos(u*a),d=gw(a*h,l*c,1),t.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",t.fillRect(s-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,n,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var n=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-n.left,s=t.center.y-n.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,u=s-o,h=Math.atan2(l,u),c=.98*Math.min(Math.sqrt(l*l+u*u),a),d=Math.cos(h)*c+o,y=Math.sin(h)*c+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=y-.5*this.colorPickerSelector.clientWidth+"px";var w=h/(2*Math.PI);w=w<0?w+1:w;var b=c/this.r,T=Yg(this.color.r,this.color.g,this.color.b);T.h=w,T.s=b;var x=gw(T.h,T.s,T.v);x.a=this.color.a,this.color=x,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function $C(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var n=document.createElement(r[0]);return n.appendChild($C.apply(void 0,nl(Ci(r).call(r,1)))),n}var eht=function(){function e(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ht(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Hn(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Qft(i),this.wrapper=void 0}return dt(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof t=="string")this.options.filter=t;else if(Lr(t))this.options.filter=t.join();else if(Dr(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Os(t)!==void 0&&(this.options.filter=Os(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(n=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,n=t):typeof t=="function"&&(this.options.filter=t,n=!0);Os(this.options)===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Os(this.options),n=0,i=!1;for(var s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof t=="function"?(i=t(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(t===!0||_r(t).call(t,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,n>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var n=this.moduleOptions,i=0;i<t.length;i++)if(n[t[i]]!==void 0)n=n[t[i]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return Ur(s).call(s,function(a){n.appendChild(a)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerText=t,this._makeItem([],n)}},{key:"_makeLabel",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+n.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild($C("i","b",t))}else s.innerText=t+":";return s}},{key:"_makeDropdown",value:function(t,n,i){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var o=0;n!==void 0&&_r(t).call(t,n)!==-1&&(o=_r(t).call(t,n));for(var a=0;a<t.length;a++){var l=document.createElement("option");l.value=t[a],a===o&&(l.selected="selected"),l.innerText=t[a],s.appendChild(l)}var u=this;s.onchange=function(){u._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,s)}},{key:"_makeRange",value:function(t,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=a}catch{}u.step=l;var h="",c=0;if(n!==void 0){var d=1.2;n<0&&n*d<o?(u.min=Math.ceil(n*d),c=u.min,h="range increased"):n/d<o&&(u.min=Math.ceil(n/d),c=u.min,h="range increased"),n*d>a&&a!==1&&(u.max=Math.ceil(n*d),c=u.max,h="range increased"),u.value=n}else u.value=s;var y=document.createElement("input");y.className="vis-configuration vis-config-rangeinput",y.value=u.value;var w=this;u.onchange=function(){y.value=this.value,w._update(Number(this.value),i)},u.oninput=function(){y.value=this.value};var b=this._makeLabel(i[i.length-1],i),T=this._makeItem(i,b,u,y);h!==""&&this.popupHistory[T]!==c&&(this.popupHistory[T]=c,this._setupPopup(h,T))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=function(){t._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(t,n){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerText=t,s.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],i=n.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=fl(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=fl(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,n,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=t,n!==void 0&&(s.checked=n,n!==t&&(Dr(t)==="object"?n!==t.enabled&&this.changedOptions.push({path:i,value:n}):this.changedOptions.push({path:i,value:n})));var o=this;s.onchange=function(){o._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeTextInput",value:function(t,n,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==t&&this.changedOptions.push({path:i,value:n});var o=this;s.onchange=function(){o._update(this.value,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeColorField",value:function(t,n,i){var s=this,o=t[1],a=document.createElement("div");n=n===void 0?o:n,n!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=n):a.className="vis-configuration vis-config-colorBlock none",n=n===void 0?o:n,a.onclick=function(){s._showColorPicker(n,a,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,a)}},{key:"_showColorPicker",value:function(t,n,i){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var a="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";n.style.backgroundColor=a,s._update(a,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=Os(this.options),a=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){s=!0;var u=t[l],h=L$(n,l);if(typeof o=="function"&&(s=o(l,n),s===!1&&!Lr(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,s=this._handleObject(u,h,!0),this.allowCreation=i===!1)),s!==!1){a=!0;var c=this._getValue(h);if(Lr(u))this._handleArray(u,c,h);else if(typeof u=="string")this._makeTextInput(u,c,h);else if(typeof u=="boolean")this._makeCheckbox(u,c,h);else if(u instanceof Object){if(!this.hideOption(n,l,this.moduleOptions))if(u.enabled!==void 0){var d=L$(h,"enabled"),y=this._getValue(d);if(y===!0){var w=this._makeLabel(l,h,!0);this._makeItem(h,w),a=this._handleObject(u,h)||a}else this._makeCheckbox(u,y,h)}else{var b=this._makeLabel(l,h,!0);this._makeItem(h,b),a=this._handleObject(u,h)||a}}else console.error("dont know how to handle",u,l,h)}}return a}},{key:"_handleArray",value:function(t,n,i){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,n,i),t[1]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="string"?(this._makeDropdown(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="number"&&(this._makeRange(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:Number(n)}))}},{key:"_update",value:function(t,n){var i=this._constructOptions(t,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<n.length;o++)n[o]!=="global"&&(s[n[o]]===void 0&&(s[n[o]]={}),o!==n.length-1?s=s[n[o]]:s[n[o]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild($C("pre","const options = "+k0(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,t);return t}}]),e}(),tht=function(){function e(r,t){ht(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return dt(e,[{key:"setPosition",value:function(t,n){this.x=ha(t),this.y=ha(n)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var n=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"){var u=!1,h=!0;this.y-n<this.padding&&(h=!1),this.x+i>o-this.padding&&(u=!0),u?a=this.x-i:a=this.x,h?l=this.y-n:l=this.y}else l=this.y-n,l+n+this.padding>s&&(l=s-n-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Pg=!1,rj,_C="background: #FFeeee; color: #dd0000",rht=function(){function e(){ht(this,e)}return dt(e,null,[{key:"validate",value:function(t,n,i){Pg=!1,rj=n;var s=n;return i!==void 0&&(s=n[i]),e.parse(t,s,[]),Pg}},{key:"parse",value:function(t,n,i){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.check(s,t,n,i)}},{key:"check",value:function(t,n,i,s){if(i[t]===void 0&&i.__any__===void 0){e.getSuggestion(t,i,s);return}var o=t,a=!0;i[t]===void 0&&i.__any__!==void 0&&(o="__any__",a=e.getType(n[t])==="object");var l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,n,i,o,l,s)}},{key:"checkFields",value:function(t,n,i,s,o,a){var l=function(d){console.error("%c"+d+e.printLocation(a,t),_C)},u=e.getType(n[t]),h=o[u];h!==void 0?e.getType(h)==="array"&&_r(h).call(h,n[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(h)+' not "'+n[t]+'". '),Pg=!0):u==="object"&&s!=="__any__"&&(a=L$(a,t),e.parse(n[t],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(yn(o))+". Received ["+u+'] "'+n[t]+'"'),Pg=!0)}},{key:"getType",value:function(t){var n=Dr(t);return n==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Lr(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(t,n,i){var s=e.findInOptions(t,n,i,!1),o=e.findInOptions(t,rj,[],!0),a=8,l=4,u;s.indexMatch!==void 0?u=" in "+e.printLocation(s.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?u=" in "+e.printLocation(s.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):s.distance<=a?u='. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,t):u=". Did you mean one of these: "+e.print(yn(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+u,_C),Pg=!0}},{key:"findInOptions",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],u=t.toLowerCase(),h=void 0;for(var c in n){var d=void 0;if(n[c].__type__!==void 0&&s===!0){var y=e.findInOptions(t,n[c],L$(i,c));o>y.distance&&(a=y.closestMatch,l=y.path,o=y.distance,h=y.indexMatch)}else{var w;_r(w=c.toLowerCase()).call(w,u)!==-1&&(h=c),d=e.levenshteinDistance(t,c),o>d&&(a=c,l=Wft(i),o=d)}}return{closestMatch:a,path:l,distance:o,indexMatch:h}}},{key:"printLocation",value:function(t,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+i+`options = {
`,o=0;o<t.length;o++){for(var a=0;a<o+1;a++)s+="  ";s+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)s+="  ";s+=n+`
`;for(var u=0;u<t.length+1;u++){for(var h=0;h<t.length-u;h++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(t){return k0(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,n){if(t.length===0)return n.length;if(n.length===0)return t.length;var i=[],s;for(s=0;s<=n.length;s++)i[s]=[s];var o;for(o=0;o<=t.length;o++)i[0][o]=o;for(s=1;s<=n.length;s++)for(o=1;o<=t.length;o++)n.charAt(s-1)==t.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[n.length][t.length]}}]),e}(),nht=ll,iht=eht,$p=bN,sht=tht,YQ=_C,oht=rht;function aht(e){return bc=e,fht()}var ZQ={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},$N=hh(ZQ);$N.color="color.color";$N.style="dashes";var is={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},nj={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},bc="",tv=0,cr="",Ft="",Ss=is.NULL;function lht(){tv=0,cr=bc.charAt(0)}function li(){tv++,cr=bc.charAt(tv)}function Md(){return bc.charAt(tv+1)}function ij(e){var r=e.charCodeAt(0);return r<47?r===35||r===46:r<59?r>47:r<91?r>64:r<96?r===95:r<123?r>96:!1}function Uc(e,r){if(e||(e={}),r)for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}function uht(e,r,t){for(var n=r.split("."),i=e;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=t}}function XQ(e,r){for(var t,n,i=null,s=[e],o=e;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(r.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:r.id},e.node&&(i.attr=Uc(i.attr,e.node))),t=s.length-1;t>=0;t--){var a,l=s[t];l.nodes||(l.nodes=[]),_r(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}r.attr&&(i.attr=Uc(i.attr,r.attr))}function cht(e,r){if(e.edges||(e.edges=[]),e.edges.push(r),e.edge){var t=Uc({},e.edge);r.attr=Uc(t,r.attr)}}function JQ(e,r,t,n,i){var s={from:r,to:t,type:n};return e.edge&&(s.attr=Uc({},e.edge)),s.attr=Uc(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Zr(){for(Ss=is.NULL,Ft="";cr===" "||cr==="	"||cr===`
`||cr==="\r";)li();do{var e=!1;if(cr==="#"){for(var r=tv-1;bc.charAt(r)===" "||bc.charAt(r)==="	";)r--;if(bc.charAt(r)===`
`||bc.charAt(r)===""){for(;cr!=""&&cr!=`
`;)li();e=!0}}if(cr==="/"&&Md()==="/"){for(;cr!=""&&cr!=`
`;)li();e=!0}if(cr==="/"&&Md()==="*"){for(;cr!="";)if(cr==="*"&&Md()==="/"){li(),li();break}else li();e=!0}for(;cr===" "||cr==="	"||cr===`
`||cr==="\r";)li()}while(e);if(cr===""){Ss=is.DELIMITER;return}var t=cr+Md();if(nj[t]){Ss=is.DELIMITER,Ft=t,li(),li();return}if(nj[cr]){Ss=is.DELIMITER,Ft=cr,li();return}if(ij(cr)||cr==="-"){for(Ft+=cr,li();ij(cr);)Ft+=cr,li();Ft==="false"?Ft=!1:Ft==="true"?Ft=!0:isNaN(Number(Ft))||(Ft=Number(Ft)),Ss=is.IDENTIFIER;return}if(cr==='"'){for(li();cr!=""&&(cr!='"'||cr==='"'&&Md()==='"');)cr==='"'?(Ft+=cr,li()):cr==="\\"&&Md()==="n"?(Ft+=`
`,li()):Ft+=cr,li();if(cr!='"')throw ss('End of string " expected');li(),Ss=is.IDENTIFIER;return}for(Ss=is.UNKNOWN;cr!="";)Ft+=cr,li();throw new SyntaxError('Syntax error in part "'+ree(Ft,30)+'"')}function fht(){var e={};if(lht(),Zr(),Ft==="strict"&&(e.strict=!0,Zr()),(Ft==="graph"||Ft==="digraph")&&(e.type=Ft,Zr()),Ss===is.IDENTIFIER&&(e.id=Ft,Zr()),Ft!="{")throw ss("Angle bracket { expected");if(Zr(),QQ(e),Ft!="}")throw ss("Angle bracket } expected");if(Zr(),Ft!=="")throw ss("End of file expected");return Zr(),delete e.node,delete e.edge,delete e.graph,e}function QQ(e){for(;Ft!==""&&Ft!="}";)hht(e),Ft===";"&&Zr()}function hht(e){var r=eee(e);if(r){tee(e,r);return}var t=dht(e);if(!t){if(Ss!=is.IDENTIFIER)throw ss("Identifier expected");var n=Ft;if(Zr(),Ft==="="){if(Zr(),Ss!=is.IDENTIFIER)throw ss("Identifier expected");e[n]=Ft,Zr()}else pht(e,n)}}function eee(e){var r=null;if(Ft==="subgraph"&&(r={},r.type="subgraph",Zr(),Ss===is.IDENTIFIER&&(r.id=Ft,Zr())),Ft==="{"){if(Zr(),r||(r={}),r.parent=e,r.node=e.node,r.edge=e.edge,r.graph=e.graph,QQ(r),Ft!="}")throw ss("Angle bracket } expected");Zr(),delete r.node,delete r.edge,delete r.graph,delete r.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(r)}return r}function dht(e){return Ft==="node"?(Zr(),e.node=my(),"node"):Ft==="edge"?(Zr(),e.edge=my(),"edge"):Ft==="graph"?(Zr(),e.graph=my(),"graph"):null}function pht(e,r){var t={id:r},n=my();n&&(t.attr=n),XQ(e,t),tee(e,r)}function tee(e,r){for(;Ft==="->"||Ft==="--";){var t,n=Ft;Zr();var i=eee(e);if(i)t=i;else{if(Ss!=is.IDENTIFIER)throw ss("Identifier or subgraph expected");t=Ft,XQ(e,{id:t}),Zr()}var s=my(),o=JQ(e,r,t,n,s);cht(e,o),r=t}}function my(){for(var e,r=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Ft==="[";){for(Zr(),r={};Ft!==""&&Ft!="]";){if(Ss!=is.IDENTIFIER)throw ss("Attribute name expected");var o=Ft;if(Zr(),Ft!="=")throw ss("Equal sign = expected");if(Zr(),Ss!=is.IDENTIFIER)throw ss("Attribute value expected");var a=Ft;o==="style"&&(a=t[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:r,name:o,value:a}),s.push(o),Zr(),Ft==","&&Zr()}if(Ft!="]")throw ss("Bracket ] expected");Zr()}if(cl(s).call(s,"dir")){var u={};for(u.arrows={},e=0;e<i.length;e++)if(i[e].name==="arrows")if(i[e].value.to!=null)u.arrows.to=e;else if(i[e].value.from!=null)u.arrows.from=e;else throw ss("Invalid value of arrows");else i[e].name==="dir"&&(u.dir=e);var h=i[u.dir].value;if(!cl(s).call(s,"arrows"))if(h==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(h==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(h==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(h==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw ss('Invalid dir type "'+h+'"');var c,d;if(h==="both")u.arrows.to&&u.arrows.from?(d=i[u.arrows.to].value.to.type,c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}},su(i).call(i,u.arrows.from,1)):u.arrows.to?(d=i[u.arrows.to].value.to.type,c="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="arrow",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}});else if(h==="back")u.arrows.to&&u.arrows.from?(d="",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.to?(d="",c="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="",c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(h==="none"){var y;u.arrows.to?y=u.arrows.to:y=u.arrows.from,i[y]={attr:i[y].attr,name:i[y].name,value:""}}else if(h==="forward")u.arrows.to&&u.arrows.from?(d=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.to?(d=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="arrow",c="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw ss('Invalid dir type "'+h+'"');su(i).call(i,u.dir,1)}var w;if(cl(s).call(s,"penwidth")){var b=[];for(w=i.length,e=0;e<w;e++)i[e].name!=="width"&&(i[e].name==="penwidth"&&(i[e].name="width"),b.push(i[e]));i=b}for(w=i.length,e=0;e<w;e++)uht(i[e].attr,i[e].name,i[e].value);return r}function ss(e){return new SyntaxError(e+', got "'+ree(Ft,30)+'" (char '+tv+")")}function ree(e,r){return e.length<=r?e:e.substr(0,27)+"..."}function vht(e,r,t){Lr(e)?Ur(e).call(e,function(n){Lr(r)?Ur(r).call(r,function(i){t(n,i)}):t(n,r)}):Lr(r)?Ur(r).call(r,function(n){t(e,n)}):t(e,r)}function fT(e,r,t){for(var n=r.split("."),i=n.pop(),s=e,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=t,e}function sj(e,r){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=r[n];Lr(i)?Ur(i).call(i,function(s){fT(t,s,e[n])}):typeof i=="string"?fT(t,i,e[n]):fT(t,n,e[n])}return t}function ght(e){var r=aht(e),t={nodes:[],edges:[],options:{}};if(r.nodes){var n;Ur(n=r.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};Uc(a,sj(o.attr,ZQ)),a.image&&(a.shape="image"),t.nodes.push(a)})}if(r.edges){var i,s=function(a){var l={from:a.from,to:a.to};return Uc(l,sj(a.attr,$N)),l.arrows==null&&a.type==="->"&&(l.arrows="to"),l};Ur(i=r.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;Ur(u=o.from.edges).call(u,function(c){var d=s(c);t.edges.push(d)})}if(vht(a,l,function(c,d){var y=JQ(t,c.id,d.id,o.type,o.attr),w=s(y);t.edges.push(w)}),o.to instanceof Object&&o.to.edges){var h;Ur(h=o.to.edges).call(h,function(c){var d=s(c);t.edges.push(d)})}})}return r.attr&&(t.options=r.attr),t}function yht(e,r){var t,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};r!=null&&(r.fixed!=null&&(n.nodes.fixed=r.fixed),r.parseColor!=null&&(n.nodes.parseColor=r.parseColor),r.inheritColor!=null&&(n.edges.inheritColor=r.inheritColor));var i=e.edges,s=Xp(i).call(i,function(a){var l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l}),o=Xp(t=e.nodes).call(t,function(a){var l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l});return{nodes:o,edges:s}}var mht={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},bht={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},wht={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},$ht={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},_ht={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},xht={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},Eht={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},Sht={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},kht={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},Tht={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},Iht={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"},Aht=Object.freeze({__proto__:null,cn:Sht,cs:Iht,de:bht,en:mht,es:wht,fr:Tht,it:$ht,nl:_ht,pt:xht,ru:Eht,uk:kht});function Oht(e,r){try{var t=r.split(/[-_ /]/,2),n=mn(t,2),i=n[0],s=n[1],o=i!=null?i.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(o&&a){var l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(e,l))return l;var u;console.warn(cN(u="Unknown variant ".concat(a," of language ")).call(u,o,"."))}if(o){var h=o;if(Object.prototype.hasOwnProperty.call(e,h))return h;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(r,", falling back to English.")),"en"}catch(c){return console.error(c),console.warn("Unexpected error while normalizing locale ".concat(r,", falling back to English.")),"en"}}var Cht=function(){function e(){ht(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return dt(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,n=this.image.height;this.width=t,this.height=n;var i=Math.floor(n/2),s=Math.floor(n/4),o=Math.floor(n/8),a=Math.floor(n/16),l=Math.floor(t/2),u=Math.floor(t/4),h=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*u,this.canvas.height=i,this.coordinates=[[0,0,l,i],[l,0,u,s],[l,s,h,o],[5*h,s,c,a]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),n=this.coordinates[0];t.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var s=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,n,i,s,o,a){if(this.initialized())if(n>2){n*=.5;for(var l=0;n>2&&l<this.NUM_ITERATIONS;)n*=.5,l+=1;l>=this.NUM_ITERATIONS&&(l=this.NUM_ITERATIONS-1);var u=this.coordinates[l];t.drawImage(this.canvas,u[0],u[1],u[2],u[3],i,s,o,a)}else t.drawImage(this.image,i,s,o,a)}}]),e}(),Pht=function(){function e(r){ht(this,e),this.images={},this.imageBroken={},this.callback=r}return dt(e,[{key:"_tryloadBrokenUrl",value:function(t,n,i){if(!(t===void 0||i===void 0)){if(n===void 0){console.warn("No broken url image defined");return}i.image.onerror=function(){console.error("Could not load brokenImage:",n)},i.image.src=n}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,n){var i=this,s=this.images[t];if(s)return s;var o=new Cht;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,n,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),e}(),xC={},Nht={get exports(){return xC},set exports(e){xC=e}},rv={},Rht={get exports(){return rv},set exports(e){rv=e}},Dht=Er,Bht=Dht(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Mht=Er,Lht=$i,Fht=Su,oj=Bht,yw=Object.isExtensible,jht=Mht(function(){yw(1)}),zht=jht||oj?function(r){return!Lht(r)||oj&&Fht(r)=="ArrayBuffer"?!1:yw?yw(r):!0}:yw,Hht=Er,nee=!Hht(function(){return Object.isExtensible(Object.preventExtensions({}))}),Uht=jt,Wht=Sr,Kht=y0,qht=$i,_N=_i,Vht=Yo.f,aj=$0,Ght=Rx,xN=zht,Yht=Sx,Zht=nee,iee=!1,gu=Yht("meta"),Xht=0,EN=function(e){Vht(e,gu,{value:{objectID:"O"+Xht++,weakData:{}}})},Jht=function(e,r){if(!qht(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!_N(e,gu)){if(!xN(e))return"F";if(!r)return"E";EN(e)}return e[gu].objectID},Qht=function(e,r){if(!_N(e,gu)){if(!xN(e))return!0;if(!r)return!1;EN(e)}return e[gu].weakData},edt=function(e){return Zht&&iee&&xN(e)&&!_N(e,gu)&&EN(e),e},tdt=function(){rdt.enable=function(){},iee=!0;var e=aj.f,r=Wht([].splice),t={};t[gu]=1,e(t).length&&(aj.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===gu){r(i,s,1);break}return i},Uht({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Ght.f}))},rdt=Rht.exports={enable:tdt,fastKey:Jht,getWeakData:Qht,onFreeze:edt};Kht[gu]=!0;var ndt=v0,idt=ao,sdt=uo,odt=Dv,adt=iJ,ldt=Pa,lj=Rn,udt=uJ,cdt=Nx,uj=nJ,fdt=TypeError,mw=function(e,r){this.stopped=e,this.result=r},cj=mw.prototype,SN=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=ndt(r,n),u,h,c,d,y,w,b,T=function(A){return u&&uj(u,"normal",A),new mw(!0,A)},x=function(A){return i?(sdt(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(h=cdt(e),!h)throw fdt(odt(e)+" is not iterable");if(adt(h)){for(c=0,d=ldt(e);d>c;c++)if(y=x(e[c]),y&&lj(cj,y))return y;return new mw(!1)}u=udt(e,h)}for(w=s?e.next:u.next;!(b=idt(w,u)).done;){try{y=x(b.value)}catch(A){uj(u,"throw",A)}if(typeof y=="object"&&y&&lj(cj,y))return y}return new mw(!1)},hdt=Rn,ddt=TypeError,kN=function(e,r){if(hdt(r,e))return e;throw ddt("Incorrect invocation")},pdt=jt,vdt=Gn,gdt=rv,ydt=Er,mdt=Bv,bdt=SN,wdt=kN,$dt=wi,_dt=$i,xdt=Lv,Edt=Yo.f,Sdt=Yc.forEach,kdt=ii,see=Uh,Tdt=see.set,Idt=see.getterFor,TN=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=vdt[e],a=o&&o.prototype,l={},u;if(!kdt||!$dt(o)||!(i||a.forEach&&!ydt(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),gdt.enable();else{u=r(function(d,y){Tdt(wdt(d,h),{type:e,collection:new o}),y!=null&&bdt(y,d[s],{that:d,AS_ENTRIES:n})});var h=u.prototype,c=Idt(e);Sdt(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(d){var y=d=="add"||d=="set";d in a&&!(i&&d=="clear")&&mdt(h,d,function(w,b){var T=c(this).collection;if(!y&&i&&!_dt(w))return d=="get"?void 0:!1;var x=T[d](w===0?0:w,b);return y?this:x})}),i||Edt(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return xdt(u,e,!1,!0),l[e]=u,pdt({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},Adt=w0,IN=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:Adt(e,n,r[n],t);return e},Odt=Go,Cdt=nN,Pdt=Dn,Ndt=ii,fj=Pdt("species"),Rdt=function(e){var r=Odt(e);Ndt&&r&&!r[fj]&&Cdt(r,fj,{configurable:!0,get:function(){return this}})},Ddt=Mv,Bdt=nN,hj=IN,Mdt=v0,Ldt=kN,Fdt=u0,jdt=SN,zdt=eN,A1=tN,Hdt=Rdt,Ng=ii,dj=rv.fastKey,oee=Uh,pj=oee.set,hT=oee.getterFor,aee={getConstructor:function(e,r,t,n){var i=e(function(u,h){Ldt(u,s),pj(u,{type:r,index:Ddt(null),first:void 0,last:void 0,size:0}),Ng||(u.size=0),Fdt(h)||jdt(h,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=hT(r),a=function(u,h,c){var d=o(u),y=l(u,h),w,b;return y?y.value=c:(d.last=y={index:b=dj(h,!0),key:h,value:c,previous:w=d.last,next:void 0,removed:!1},d.first||(d.first=y),w&&(w.next=y),Ng?d.size++:u.size++,b!=="F"&&(d.index[b]=y)),u},l=function(u,h){var c=o(u),d=dj(h),y;if(d!=="F")return c.index[d];for(y=c.first;y;y=y.next)if(y.key==h)return y};return hj(s,{clear:function(){for(var h=this,c=o(h),d=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete d[y.index],y=y.next;c.first=c.last=void 0,Ng?c.size=0:h.size=0},delete:function(u){var h=this,c=o(h),d=l(h,u);if(d){var y=d.next,w=d.previous;delete c.index[d.index],d.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==d&&(c.first=y),c.last==d&&(c.last=w),Ng?c.size--:h.size--}return!!d},forEach:function(h){for(var c=o(this),d=Mdt(h,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(d(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(h){return!!l(this,h)}}),hj(s,t?{get:function(h){var c=l(this,h);return c&&c.value},set:function(h,c){return a(this,h===0?0:h,c)}}:{add:function(h){return a(this,h=h===0?0:h,h)}}),Ng&&Bdt(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=hT(r),s=hT(n);zdt(e,r,function(o,a){pj(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,A1(void 0,!0)):a=="keys"?A1(l.key,!1):a=="values"?A1(l.value,!1):A1([l.key,l.value],!1)},t?"entries":"values",!t,!0),Hdt(r)}},Udt=TN,Wdt=aee;Udt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Wdt);var Kdt=$r,qdt=Kdt.Map,Vdt=qdt,Gdt=Vdt;(function(e){e.exports=Gdt})(Nht);var lee=Pt(xC),Ydt=function(){function e(){ht(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Hn(this.options,this.defaultOptions)}return dt(e,[{key:"setOptions",value:function(t){var n=["useDefaultGroups"];if(t!==void 0){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&_r(n).call(n,i)===-1){var s=t[i];this.add(i,s)}}}},{key:"clear",value:function(){this._groups=new lee,this._groupNames=[]}},{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._groups.get(t);if(i===void 0&&n)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var s=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[s]),this._groups.set(t,i)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}},{key:"add",value:function(t,n){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,n),n}}]),e}(),EC={},Zdt={get exports(){return EC},set exports(e){EC=e}},Xdt=jt;Xdt({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var Jdt=$r,Qdt=Jdt.Number.isNaN,ept=Qdt,tpt=ept;(function(e){e.exports=tpt})(Zdt);var SC=Pt(EC),kC={},rpt={get exports(){return kC},set exports(e){kC=e}},npt=Gn,ipt=npt.isFinite,spt=Number.isFinite||function(r){return typeof r=="number"&&ipt(r)},opt=jt,apt=spt;opt({target:"Number",stat:!0},{isFinite:apt});var lpt=$r,upt=lpt.Number.isFinite,cpt=upt,fpt=cpt;(function(e){e.exports=fpt})(rpt);var Zf=Pt(kC),TC={},hpt={get exports(){return TC},set exports(e){TC=e}},dpt=jt,ppt=Yc.some,vpt=zv,gpt=vpt("some");dpt({target:"Array",proto:!0,forced:!gpt},{some:function(r){return ppt(this,r,arguments.length>1?arguments[1]:void 0)}});var ypt=xi,mpt=ypt("Array").some,bpt=Rn,wpt=mpt,dT=Array.prototype,$pt=function(e){var r=e.some;return e===dT||bpt(dT,e)&&r===dT.some?wpt:r},_pt=$pt,xpt=_pt;(function(e){e.exports=xpt})(hpt);var Ept=Pt(TC),IC={},Spt={get exports(){return IC},set exports(e){IC=e}},uee=Gn,kpt=Er,Tpt=Sr,Ipt=wl,Apt=fN.trim,Opt=Wx,Cpt=Tpt("".charAt),F$=uee.parseFloat,vj=uee.Symbol,gj=vj&&vj.iterator,Ppt=1/F$(Opt+"-0")!==-1/0||gj&&!kpt(function(){F$(Object(gj))}),Npt=Ppt?function(r){var t=Apt(Ipt(r)),n=F$(t);return n===0&&Cpt(t,0)=="-"?-0:n}:F$,Rpt=jt,yj=Npt;Rpt({global:!0,forced:parseFloat!=yj},{parseFloat:yj});var Dpt=$r,Bpt=Dpt.parseFloat,Mpt=Bpt,Lpt=Mpt;(function(e){e.exports=Lpt})(Spt);var cee=Pt(IC),AC={},Fpt={get exports(){return AC},set exports(e){AC=e}},jpt=jt,zpt=Er,Hpt=Rx.f,Upt=zpt(function(){return!Object.getOwnPropertyNames(1)});jpt({target:"Object",stat:!0,forced:Upt},{getOwnPropertyNames:Hpt});var Wpt=$r,Kpt=Wpt.Object,qpt=function(r){return Kpt.getOwnPropertyNames(r)},Vpt=qpt,Gpt=Vpt;(function(e){e.exports=Gpt})(Fpt);var Ypt=Pt(AC);function AN(e,r){var t=["node","edge","label"],n=!0,i=dc(r,"chosen");if(typeof i=="boolean")n=i;else if(Dr(i)==="object"){if(_r(t).call(t,e)===-1)throw new Error("choosify: subOption '"+e+"' should be one of '"+t.join("', '")+"'");var s=dc(r,["chosen",e]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function OC(e,r,t){if(e.width<=0||e.height<=0)return!1;if(t!==void 0){var n={x:r.x-t.x,y:r.y-t.y};if(t.angle!==0){var i=-t.angle,s={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y};r=s}else r=n}var o=e.x+e.width,a=e.y+e.width;return e.left<r.x&&o>r.x&&e.top<r.y&&a>r.y}function j$(e){return typeof e=="string"&&e!==""}function fee(e,r,t,n){var i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){var o=n.distanceToBorder(e,r),a=Math.sin(r)*o,l=Math.cos(r)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-t):(i=n.x+t,s=n.y-n.shape.height*.5);return{x:i,y:s}}var CC={},Zpt={get exports(){return CC},set exports(e){CC=e}},Xpt=xi,Jpt=Xpt("Array").values,Qpt=Jpt,evt=Qpt,tvt=Hh,rvt=_i,nvt=Rn,ivt=evt,pT=Array.prototype,svt={DOMTokenList:!0,NodeList:!0},ovt=function(e){var r=e.values;return e===pT||nvt(pT,e)&&r===pT.values||rvt(svt,tvt(e))?ivt:r};(function(e){e.exports=ovt})(Zpt);var hee=Pt(CC),avt=function(){function e(r){ht(this,e),this.measureText=r,this.current=0,this.width=0,this.height=0,this.lines=[]}return dt(e,[{key:"_add",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});var s=n;(n===void 0||n==="")&&(s=" ");var o=this.measureText(s,i),a=Hn({},hee(o));a.text=n,a.width=o.width,a.mod=i,(n===void 0||n==="")&&(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return t===void 0?0:t.width}},{key:"append",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n)}},{key:"newLine",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var n=this.lines[t],i=0;if(n.blocks!==void 0)for(var s=0;s<n.blocks.length;s++){var o=n.blocks[s];i<o.height&&(i=o.height)}n.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,n=0,i=0;i<this.lines.length;i++){var s=this.lines[i];s.width>t&&(t=s.width),n+=s.height}this.width=t,this.height=n}},{key:"removeEmptyBlocks",value:function(){for(var t=[],n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.blocks.length!==0&&!(n===this.lines.length-1&&i.width===0)){var s={};Hn(s,i),s.blocks=[];for(var o=void 0,a=[],l=0;l<i.blocks.length;l++){var u=i.blocks[l];u.width!==0?a.push(u):o===void 0&&(o=u)}a.length===0&&o!==void 0&&a.push(o),s.blocks=a,t.push(s)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),e}(),lvt={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},mj=function(){function e(r){ht(this,e),this.text=r,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return dt(e,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return/[ \t]/.test(t)?(this.mono?this.add(t):this.spacing=!0,!0):!1}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,n){return!this.mono&&!this[t]&&this.match(n)?(this.setTag(t),!0):!1}},{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.prepareRegExp(t),s=mn(i,2),o=s[0],a=s[1],l=o.test(this.text.substr(this.position,a));return l&&n&&(this.position+=a-1),l}},{key:"parseEndTag",value:function(t,n,i){var s=this.mod()===t;return t==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(n)?(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0):!1}},{key:"replace",value:function(t,n){return this.match(t)?(this.add(n),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(t){var n,i;if(t instanceof RegExp)i=t,n=1;else{var s=lvt[t];s!==void 0?i=s:i=new RegExp(t),n=t.length}return[i,n]}}]),e}(),uvt=function(){function e(r,t,n,i){var s=this;ht(this,e),this.ctx=r,this.parent=t,this.selected=n,this.hover=i;var o=function(l,u){if(l===void 0)return 0;var h=s.parent.getFormattingValues(r,n,i,u),c=0;if(l!==""){var d=s.ctx.measureText(l);c=d.width}return{width:c,values:h}};this.lines=new avt(o)}return dt(e,[{key:"process",value:function(t){if(!j$(t))return this.lines.finalize();var n=this.parent.fontOptions;t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`);var i=String(t).split(`
`),s=i.length;if(n.multi)for(var o=0;o<s;o++){var a=this.splitBlocks(i[o],n.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(n.maxWdt>0)for(var l=0;l<a.length;l++){var u=a[l].mod,h=a[l].text;this.splitStringIntoLines(h,u,!0)}else for(var c=0;c<a.length;c++){var d=a[c].mod,y=a[c].text;this.lines.append(y,d)}this.lines.newLine()}}else if(n.maxWdt>0)for(var w=0;w<s;w++)this.splitStringIntoLines(i[w]);else for(var b=0;b<s;b++)this.lines.newLine(i[b]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var n="none";return t==="markdown"||t==="md"?n="markdown":(t===!0||t==="html")&&(n="html"),n}},{key:"splitHtmlBlocks",value:function(t){for(var n=new mj(t),i=function(l){if(/&/.test(l)){var u=n.replace(n.text,"&lt;","<")||n.replace(n.text,"&amp;","&");return u||n.add("&"),!0}return!1};n.position<n.text.length;){var s=n.text.charAt(n.position),o=n.parseWS(s)||/</.test(s)&&(n.parseStartTag("bold","<b>")||n.parseStartTag("ital","<i>")||n.parseStartTag("mono","<code>")||n.parseEndTag("bold","</b>")||n.parseEndTag("ital","</i>")||n.parseEndTag("mono","</code>"))||i(s);o||n.add(s),n.position++}return n.emitBlock(),n.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var n=this,i=new mj(t),s=!0,o=function(h){return/\\/.test(h)?(i.position<n.text.length+1&&(i.position++,h=n.text.charAt(i.position),/ \t/.test(h)?i.spacing=!0:(i.add(h),s=!1)),!0):!1};i.position<i.text.length;){var a=i.text.charAt(i.position),l=i.parseWS(a)||o(a)||(s||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono");l||(i.add(a),s=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,n){var i=this.decodeMarkupSystem(n);if(i==="none")return[{text:t,mod:"normal"}];if(i==="markdown")return this.splitMarkdownBlocks(t);if(i==="html")return this.splitHtmlBlocks(t)}},{key:"overMaxWidth",value:function(t){var n=this.ctx.measureText(t).width;return this.lines.curWidth()+n>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var n="",i=0;i<t.length;){var s=n===""?"":" ",o=n+s+t[i];if(this.overMaxWidth(o))break;n=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var n=0;n<t.length&&!this.overMaxWidth(Ci(t).call(t,0,n));)n++;return n}},{key:"splitStringIntoLines",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,n),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var s=t.split("\r");s.length>0;){var o=this.getLongestFit(s);if(o===0){var a=s[0],l=this.getLongestFitWord(a);this.lines.newLine(Ci(a).call(a,0,l),n),s[0]=Ci(a).call(a,l)}else{var u=o;s[o-1]===" "?o--:s[u]===" "&&u++;var h=Ci(s).call(s,0,o).join("");o==s.length&&i?this.lines.append(h,n):this.lines.newLine(h,n),s=Ci(s).call(s,u)}}}}]),e}(),Rg=["bold","ital","boldital","mono"],dee=function(){function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ht(this,e),this.body=r,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return dt(e,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),j$(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(Dr(t.font)==="object"){var n=t.font.size;n!==void 0&&(this.baseSize=n)}}}},{key:"initFontOptions",value:function(t){var n=this;if(pr(Rg,function(i){n.fontOptions[i]={}}),e.parseFontString(this.fontOptions,t)){this.fontOptions.vadjust=0;return}pr(t,function(i,s){i!=null&&Dr(i)!=="object"&&(n.fontOptions[s]=i)})}},{key:"constrain",value:function(t){var n={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=dc(t,"widthConstraint");if(typeof i=="number")n.maxWdt=Number(i),n.minWdt=Number(i);else if(Dr(i)==="object"){var s=dc(t,["widthConstraint","maximum"]);typeof s=="number"&&(n.maxWdt=Number(s));var o=dc(t,["widthConstraint","minimum"]);typeof o=="number"&&(n.minWdt=Number(o))}var a=dc(t,"heightConstraint");if(typeof a=="number")n.minHgt=Number(a);else if(Dr(a)==="object"){var l=dc(t,["heightConstraint","minimum"]);typeof l=="number"&&(n.minHgt=Number(l));var u=dc(t,["heightConstraint","valign"]);typeof u=="string"&&(u==="top"||u==="bottom")&&(n.valign=u)}return n}},{key:"update",value:function(t,n){this.setOptions(t,!0),this.propagateFonts(n),Yr(this.fontOptions,this.constrain(n)),this.fontOptions.chooser=AN("label",n)}},{key:"adjustSizes",value:function(t){var n=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=n,this.fontOptions.minWdt-=n);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,n){for(var i=0;i<n.length;++i)this.addFontToPile(t,n[i])}},{key:"addFontToPile",value:function(t,n){if(n!==void 0&&!(n.font===void 0||n.font===null)){var i=n.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var s=t[i],o={};e.parseFontString(o,s)&&(s=o),pr(s,function(a,l){a!==void 0&&(Object.prototype.hasOwnProperty.call(n,l)||(_r(Rg).call(Rg,l)!==-1?n[l]={}:n[l]=a))})}return n}},{key:"getFontOption",value:function(t,n,i){for(var s,o=0;o<t.length;++o){var a=t[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(s=a[n],s==null)continue;var l={};if(e.parseFontString(l,s)&&(s=l),Object.prototype.hasOwnProperty.call(s,i))return s[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,n){for(var i={},s=["color","size","face","mod","vadjust"],o=0;o<s.length;++o){var a=s[o];i[a]=this.getFontOption(t,n,a)}return i}},{key:"propagateFonts",value:function(t){var n=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var s=function(){var l=Rg[o],u=n.fontOptions[l],h=n.getFontOptions(i,l);pr(h,function(c,d){u[d]=c}),u.size=Number(u.size),u.vadjust=Number(u.vadjust)},o=0;o<Rg.length;++o)s()}},{key:"draw",value:function(t,n,i,s,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var l=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&l<this.elementOptions.scaling.label.drawThreshold-1||(l>=this.elementOptions.scaling.label.maxVisible&&(l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,s,o,n,i,a),this._drawBackground(t),this._drawText(t,n,this.size.yLine,a,l))}}},{key:"_drawBackground",value:function(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var n=this.getSize();t.fillRect(n.left,n.top,n.width,n.height)}}},{key:"_drawText",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,a=this._setAlignment(t,n,i,s),l=mn(a,2);n=l[0],i=l[1],t.textAlign="left",n=n-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(var u=0;u<this.lineCount;u++){var h=this.lines[u];if(h&&h.blocks){var c=0;this.isEdgeLabel||this.fontOptions.align==="center"?c+=(this.size.width-h.width)/2:this.fontOptions.align==="right"&&(c+=this.size.width-h.width);for(var d=0;d<h.blocks.length;d++){var y=h.blocks[d];t.font=y.font;var w=this._getColor(y.color,o,y.strokeColor),b=mn(w,2),T=b[0],x=b[1];y.strokeWidth>0&&(t.lineWidth=y.strokeWidth,t.strokeStyle=x,t.lineJoin="round"),t.fillStyle=T,y.strokeWidth>0&&t.strokeText(y.text,n+c,i+y.vadjust),t.fillText(y.text,n+c,i+y.vadjust),c+=y.width}i+=h.height}}}},{key:"_setAlignment",value:function(t,n,i,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){n=0,i=0;var o=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*o):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*o):t.textBaseline="middle"}else t.textBaseline=s;return[n,i]}},{key:"_getColor",value:function(t,n,i){var s=t||"#000000",o=i||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));s=Fo(s,a),o=Fo(o,a)}return[s,o]}},{key:"getTextSize",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(t,n,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=2,n=this.size.left,i=this.size.top-.5*t;if(this.isEdgeLabel){var s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":n=s,i=-this.size.height*.5;break;case"top":n=s,i=-(this.size.height+t);break;case"bottom":n=s,i=t;break}}var o={left:n,top:i,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,n,i),this.size.left=s-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,n,i,s){var o=function(h,c,d){return c==="normal"?d==="mod"?"":h[d]:h[c][d]!==void 0?h[c][d]:h[d]},a={color:o(this.fontOptions,s,"color"),size:o(this.fontOptions,s,"size"),face:o(this.fontOptions,s,"face"),mod:o(this.fontOptions,s,"mod"),vadjust:o(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(n||i)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,n,i));var l="";return a.mod!==void 0&&a.mod!==""&&(l+=a.mod+" "),l+=a.size+"px "+a.face,t.font=l.replace(/"/g,""),a.font=t.font,a.height=a.size,a}},{key:"differentState",value:function(t,n){return t!==this.selectedState||n!==this.hoverState}},{key:"_processLabelText",value:function(t,n,i,s){var o=new uvt(t,this,n,i);return o.process(s)}},{key:"_processLabel",value:function(t,n,i){if(!(this.labelDirty===!1&&!this.differentState(n,i))){var s=this._processLabelText(t,n,i,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=n,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var t=this.fontOptions.size*this.body.view.scale;return!(t<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,n){if(!n||typeof n!="string")return!1;var i=n.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),e}(),PC={},cvt={get exports(){return PC},set exports(e){PC=e}},fvt=Px,hvt=Dv,dvt=TypeError,pvt=function(e){if(fvt(e))return e;throw dvt(hvt(e)+" is not a constructor")},vvt=jt,gvt=Go,vT=o0,yvt=FX,bj=pvt,mvt=uo,wj=$i,bvt=Mv,pee=Er,ON=gvt("Reflect","construct"),wvt=Object.prototype,$vt=[].push,vee=pee(function(){function e(){}return!(ON(function(){},[],e)instanceof e)}),gee=!pee(function(){ON(function(){})}),$j=vee||gee;vvt({target:"Reflect",stat:!0,forced:$j,sham:$j},{construct:function(r,t){bj(r),mvt(t);var n=arguments.length<3?r:bj(arguments[2]);if(gee&&!vee)return ON(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return vT($vt,i,t),new(vT(yvt,r,i))}var s=n.prototype,o=bvt(wj(s)?s:wvt),a=vT(r,o,t);return wj(a)?a:o}});var _vt=$r,xvt=_vt.Reflect.construct,Evt=xvt,Svt=Evt;(function(e){e.exports=Svt})(cvt);var Ke=Pt(PC),NC={},kvt={get exports(){return NC},set exports(e){NC=e}},RC={},Tvt={get exports(){return RC},set exports(e){RC=e}},Ivt=vQ,Avt=Ivt,Ovt=Avt,Cvt=Ovt;(function(e){e.exports=Cvt})(Tvt);(function(e){e.exports=RC})(kvt);var Pvt=Pt(NC),DC={},Nvt={get exports(){return DC},set exports(e){DC=e}},BC={},Rvt={get exports(){return BC},set exports(e){BC=e}},Dvt=jt,Bvt=gQe;Dvt({target:"Object",stat:!0},{setPrototypeOf:Bvt});var Mvt=$r,Lvt=Mvt.Object.setPrototypeOf,Fvt=Lvt,jvt=Fvt,zvt=jvt,Hvt=zvt,Uvt=Hvt,Wvt=Uvt;(function(e){e.exports=Wvt})(Rvt);(function(e){e.exports=BC})(Nvt);var MC=Pt(DC),LC={},Kvt={get exports(){return LC},set exports(e){LC=e}},FC={},qvt={get exports(){return FC},set exports(e){FC=e}},Vvt=jX,Gvt=Vvt,Yvt=Gvt,Zvt=Yvt;(function(e){e.exports=Zvt})(qvt);(function(e){e.exports=FC})(Kvt);var CN=Pt(LC);function jC(e,r){var t;return jC=MC?CN(t=MC).call(t):function(i,s){return i.__proto__=s,i},jC(e,r)}function Or(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Pvt(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Hx(e,"prototype",{writable:!1}),r&&jC(e,r)}function Xvt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fr(e,r){if(r&&(Dr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xvt(e)}var zC={},Jvt={get exports(){return zC},set exports(e){zC=e}},HC={},Qvt={get exports(){return HC},set exports(e){HC=e}},egt=cQ,tgt=egt,rgt=tgt,ngt=rgt;(function(e){e.exports=ngt})(Qvt);(function(e){e.exports=HC})(Jvt);var _j=Pt(zC);function Tt(e){var r;return Tt=MC?CN(r=_j).call(r):function(n){return n.__proto__||_j(n)},Tt(e)}var Vh=function(){function e(r,t,n){ht(this,e),this.body=t,this.labelModule=n,this.setOptions(r),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&(Dr(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,n){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(n)),Math.abs(this.height/2/Math.sin(n)))+i}},{key:"enableShadow",value:function(t,n){n.shadow&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,n){if(n.borderDashes!==!1)if(t.setLineDash!==void 0){var i=n.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,n){n.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1))}},{key:"needsRefresh",value:function(t,n){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,n)}},{key:"initContextForDraw",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=n.borderColor,t.fillStyle=n.color}},{key:"performStroke",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,n),t.stroke(),this.disableBorderDashes(t,n)),t.restore()}},{key:"performFill",value:function(t,n){t.save(),t.fillStyle=n.color,this.enableShadow(t,n),T0(t).call(t),this.disableShadow(t,n),t.restore(),this.performStroke(t,n)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,n,i,s,o){i!==void 0&&this.resize(i,s,o),this.left=t-this.width/2,this.top=n-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,n,i,s,o){this._updateBoundingBox(t,n,i,s,o)}},{key:"getDimensionsFromLabel",value:function(t,n,i){this.textSize=this.labelModule.getTextSize(t,n,i);var s=this.textSize.width,o=this.textSize.height,a=14;return s===0&&(s=a,o=a),{width:s,height:o}}}]),e}();function igt(e){var r=sgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function sgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var ogt=function(e){Or(t,e);var r=igt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.width=a.width+this.margin.right+this.margin.left,this.height=a.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),zX(i,this.left,this.top,this.width,this.height,u.borderRadius),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"updateBoundingBox",value:function(i,s,o,a,l){this._updateBoundingBox(i,s,o,a,l);var u=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(u)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(s)),Math.abs(this.height/2/Math.sin(s)))+o}}]),t}(Vh);function agt(e){var r=lgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function lgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var PN=function(e){Or(t,e);var r=agt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o.labelOffset=0,o.selected=!1,o}return dt(t,[{key:"setOptions",value:function(i,s,o){this.options=i,s===void 0&&o===void 0||this.setImages(s,o)}},{key:"setImages",value:function(i,s){s&&this.selected?(this.imageObj=s,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=s)}},{key:"switchImages",value:function(i){var s=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&s){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var i={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var s=this.options.imagePadding;Dr(s)=="object"?(i.top=s.top,i.right=s.right,i.bottom=s.bottom,i.left=s.left):(i.top=s,i.right=s,i.bottom=s,i.left=s)}return i}},{key:"_resizeImage",value:function(){var i,s;if(this.options.shapeProperties.useImageSize===!1){var o=1,a=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:a=this.imageObj.height/this.imageObj.width),i=this.options.size*2*o,s=this.options.size*2*a}else{var l=this._getImagePadding();i=this.imageObj.width+l.left+l.right,s=this.imageObj.height+l.top+l.bottom}this.width=i,this.height=s,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,s,o,a){this.initContextForDraw(i,a),Z4(i,s,o,a.size),this.performFill(i,a)}},{key:"_drawImageAtPosition",value:function(i,s){if(this.imageObj.width!=0){i.globalAlpha=s.opacity!==void 0?s.opacity:1,this.enableShadow(i,s);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var a=this._getImagePadding(),l=this.left+a.left,u=this.top+a.top,h=this.width-a.left-a.right,c=this.height-a.top-a.bottom;this.imageObj.drawImageAtPosition(i,o,l,u,h,c),this.disableShadow(i,s)}}},{key:"_drawImageLabel",value:function(i,s,o,a,l){var u=0;if(this.height!==void 0){u=this.height*.5;var h=this.labelModule.getTextSize(i,a,l);h.lineCount>=1&&(u+=h.height/2)}var c=o+u;this.options.label&&(this.labelOffset=u),this.labelModule.draw(i,s,c,a,l,"hanging")}}]),t}(Vh);function ugt(e){var r=cgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function cgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var fgt=function(e){Or(t,e);var r=ugt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=Math.max(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=l/2,this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this._drawRawCircle(i,s,o,u),this.updateBoundingBox(s,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,o,a,l)}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(PN);function hgt(e){var r=dgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function dgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var pgt=function(e){Or(t,e);var r=hgt(t);function t(n,i,s,o,a){var l;return ht(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l,this.radius=.5*this.width;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){this.switchImages(a),this.resize();var h=s,c=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,h+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this._drawRawCircle(i,h,c,u),i.save(),i.clip(),this._drawImageAtPosition(i,u),i.restore(),this._drawImageLabel(i,h,c,a,l),this.updateBoundingBox(s,o)}},{key:"updateBoundingBox",value:function(i,s){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=s,this.boundingBox.left=i,this.boundingBox.right=i+this.options.size*2,this.boundingBox.bottom=s+this.options.size*2):(this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(PN);function vgt(e){var r=ggt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function ggt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Jc=function(e){Or(t,e);var r=vgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,o)){var l,u;this.labelModule.getTextSize(i,s,o);var h=2*a.size;this.width=(l=this.customSizeWidth)!==null&&l!==void 0?l:h,this.height=(u=this.customSizeHeight)!==null&&u!==void 0?u:h,this.radius=.5*this.width}}},{key:"_drawShape",value:function(i,s,o,a,l,u,h,c){var d=this;return this.resize(i,u,h,c),this.left=a-this.width/2,this.top=l-this.height/2,this.initContextForDraw(i,c),PXe(s)(i,a,l,c.size),this.performFill(i,c),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(i.font=(u?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",i.fillText(this.options.icon.code,a,l)),{drawExternalLabel:function(){if(d.options.label!==void 0){d.labelModule.calculateLabelSize(i,u,h,a,l,"hanging");var w=l+.5*d.height+.5*d.labelModule.size.height;d.labelModule.draw(i,a,w,u,h,"hanging")}d.updateBoundingBox(a,l)}}}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),t}(Vh);function xj(e,r){var t=yn(e);if(zc){var n=zc(e);r&&(n=Os(n).call(n,function(i){return Zc(e,i).enumerable})),t.push.apply(t,n)}return t}function ygt(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Ur(t=xj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):Hc?jx(e,Hc(i)):Ur(n=xj(Object(i))).call(n,function(s){zx(e,s,Zc(i,s))})}return e}function mgt(e){var r=bgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function bgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var wgt=function(e){Or(t,e);var r=mgt(t);function t(n,i,s,o){var a;return ht(this,t),a=r.call(this,n,i,s,o),a.ctxRenderer=o,a}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l,u),this.left=s-this.width/2,this.top=o-this.height/2,i.save();var h=this.ctxRenderer({ctx:i,id:this.options.id,x:s,y:o,state:{selected:a,hover:l},style:ygt({},u),label:this.options.label});if(h.drawNode!=null&&h.drawNode(),i.restore(),h.drawExternalLabel){var c=h.drawExternalLabel;h.drawExternalLabel=function(){i.save(),c(),i.restore()}}return h.nodeDimensions&&(this.customSizeWidth=h.nodeDimensions.width,this.customSizeHeight=h.nodeDimensions.height),h}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function $gt(e){var r=_gt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function _gt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var xgt=function(e){Or(t,e);var r=$gt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i,s,o){if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=a.width+this.margin.right+this.margin.left;this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),HX(i,s-this.width/2,o-this.height/2,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Vh);function Egt(e){var r=Sgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Sgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var kgt=function(e){Or(t,e);var r=Egt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"diamond",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function Tgt(e){var r=Igt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Igt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Agt=function(e){Or(t,e);var r=Tgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"circle",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.options.size}}]),t}(Jc);function Ogt(e){var r=Cgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Cgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Ej=function(e){Or(t,e);var r=Ogt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.height=a.height*2,this.width=a.width+a.height,this.radius=.5*this.width}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(i,u),l5(i,this.left,this.top,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,s,o,a,l)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.width*.5,a=this.height*.5,l=Math.sin(s)*o,u=Math.cos(s)*a;return o*a/Math.sqrt(l*l+u*u)}}]),t}(Vh);function Pgt(e){var r=Ngt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ngt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Rgt=function(e){Or(t,e);var r=Pgt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){var h=this;return this.resize(i,a,l),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=o-this.height/2,this._icon(i,s,o,a,l,u),{drawExternalLabel:function(){if(h.options.label!==void 0){var d=5;h.labelModule.draw(i,h.left+h.iconSize.width/2+h.margin.left,o+h.height/2+d,a)}h.updateBoundingBox(s,o)}}}},{key:"updateBoundingBox",value:function(i,s){if(this.boundingBox.top=s-this.options.icon.size*.5,this.boundingBox.left=i-this.options.icon.size*.5,this.boundingBox.right=i+this.options.icon.size*.5,this.boundingBox.bottom=s+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(i,s,o,a,l,u){var h=Number(this.options.icon.size);this.options.icon.code!==void 0?(i.font=[this.options.icon.weight!=null?this.options.icon.weight:a?"bold":"",(this.options.icon.weight!=null&&a?5:0)+h+"px",this.options.icon.face].join(" "),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",this.enableShadow(i,u),i.fillText(this.options.icon.code,s,o),this.disableShadow(i,u)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Vh);function Dgt(e){var r=Bgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Bgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Mgt=function(e){Or(t,e);var r=Dgt(t);function t(n,i,s,o,a){var l;return ht(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return dt(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){i.save(),this.switchImages(a),this.resize();var h=s,c=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,h+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var d=this.options.borderWidth,y=this.options.borderWidthSelected||2*this.options.borderWidth,w=(a?y:d)/this.body.view.scale;i.lineWidth=Math.min(this.width,w),i.beginPath();var b=a?this.options.color.highlight.border:l?this.options.color.hover.border:this.options.color.border,T=a?this.options.color.highlight.background:l?this.options.color.hover.background:this.options.color.background;u.opacity!==void 0&&(b=Fo(b,u.opacity),T=Fo(T,u.opacity)),i.strokeStyle=b,i.fillStyle=T,i.rect(this.left-.5*i.lineWidth,this.top-.5*i.lineWidth,this.width+i.lineWidth,this.height+i.lineWidth),T0(i).call(i),this.performStroke(i,u),i.closePath()}this._drawImageAtPosition(i,u),this._drawImageLabel(i,h,c,a,l),this.updateBoundingBox(s,o),i.restore()}},{key:"updateBoundingBox",value:function(i,s){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=i,this.top=s):(this.left=i-this.width/2,this.top=s-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(PN);function Lgt(e){var r=Fgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Fgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var jgt=function(e){Or(t,e);var r=Lgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"square",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function zgt(e){var r=Hgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Hgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Ugt=function(e){Or(t,e);var r=zgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"hexagon",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function Wgt(e){var r=Kgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Kgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var qgt=function(e){Or(t,e);var r=Wgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"star",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function Vgt(e){var r=Ggt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ggt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Ygt=function(e){Or(t,e);var r=Vgt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return dt(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.textSize=this.labelModule.getTextSize(i,s,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.enableShadow(i,u),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l),this.disableShadow(i,u),this.updateBoundingBox(s,o,i,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Vh);function Zgt(e){var r=Xgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Xgt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Jgt=function(e){Or(t,e);var r=Zgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangle",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function Qgt(e){var r=eyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function eyt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var tyt=function(e){Or(t,e);var r=Qgt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangleDown",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(Jc);function Sj(e,r){var t=yn(e);if(zc){var n=zc(e);r&&(n=Os(n).call(n,function(i){return Zc(e,i).enumerable})),t.push.apply(t,n)}return t}function kj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Ur(t=Sj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):Hc?jx(e,Hc(i)):Ur(n=Sj(Object(i))).call(n,function(s){zx(e,s,Zc(i,s))})}return e}var Vs=function(){function e(r,t,n,i,s,o){ht(this,e),this.options=Ac(s),this.globalOptions=s,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new dee(this.body,this.options,!1),this.setOptions(r)}return dt(e,[{key:"attachEdge",value:function(t){var n;_r(n=this.edges).call(n,t)===-1&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var n,i=_r(n=this.edges).call(n,t);if(i!=-1){var s;su(s=this.edges).call(s,i,1)}}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(typeof t.color<"u"&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");e.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ha(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ha(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=cee(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=AN("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),t.hidden!==void 0||t.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var n=this.options.opacity;t.borderColor=Fo(t.borderColor,n),t.color=Fo(t.color,n),t.shadowColor=Fo(t.shadowColor,n)}return t}},{key:"updateLabelModule",value:function(t){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),e.updateGroupOptions(this.options,kj(kj({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new ogt(this.options,this.body,this.labelModule);break;case"circle":this.shape=new fgt(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new pgt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new wgt(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new xgt(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new kgt(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Agt(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Ej(this.options,this.body,this.labelModule);break;case"icon":this.shape=new Rgt(this.options,this.body,this.labelModule);break;case"image":this.shape=new Mgt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new jgt(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new Ugt(this.options,this.body,this.labelModule);break;case"star":this.shape=new qgt(this.options,this.body,this.labelModule);break;case"text":this.shape=new Ygt(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Jgt(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new tyt(this.options,this.body,this.labelModule);break;default:this.shape=new Ej(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,n){return this.shape.distanceToBorder(t,n)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.size=this.options.scaling.min+s*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var n=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,n)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var n=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,n)}},{key:"getItemsOnPoint",value:function(t){var n=[];return this.labelModule.visible()&&OC(this.labelModule.getSize(),t)&&n.push({nodeId:this.id,labelId:0}),OC(this.shape.boundingBox,t)&&n.push({nodeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return t===void 0||t==="center"||t==="top-left"}},{key:"updateGroupOptions",value:function(t,n,i){var s;if(i!==void 0){var o=t.group;if(n!==void 0&&n.group!==void 0&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");var a=typeof o=="number"||typeof o=="string"&&o!="";if(a){var l=i.get(o);l.opacity!==void 0&&n.opacity===void 0&&(e.checkOpacity(l.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+l.opacity),l.opacity=void 0));var u=Os(s=Ypt(n)).call(s,function(h){return n[h]!=null});u.push("font"),M$(u,t,l),t.color=bC(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(M$(a,t,n,i),e.checkMass(n),t.opacity!==void 0&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),n.opacity!==void 0&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),Ro(t,n,"shadow",s),n.color!==void 0&&n.color!==null){var l=bC(n.color);KQ(t.color,l)}else i===!0&&n.color===null&&(t.color=Ac(s.color));n.fixed!==void 0&&n.fixed!==null&&(typeof n.fixed=="boolean"?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(n.fixed.x!==void 0&&typeof n.fixed.x=="boolean"&&(t.fixed.x=n.fixed.x),n.fixed.y!==void 0&&typeof n.fixed.y=="boolean"&&(t.fixed.y=n.fixed.y))),i===!0&&n.font===null&&(t.font=Ac(s.font)),e.updateGroupOptions(t,n,o),n.scaling!==void 0&&Ro(t.scaling,n.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,n){if(t.mass!==void 0&&t.mass<=0){var i="";n!==void 0&&(i=" in node id: "+n),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",YQ),t.mass=1}}}]),e}();function ryt(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=nyt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function nyt(e,r){var t;if(e){if(typeof e=="string")return Tj(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tj(e,r)}}function Tj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var iyt=function(){function e(r,t,n,i){var s,o=this;if(ht(this,e),this.body=r,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=nt(s=this.create).call(s,this),this.nodesListeners={add:function(l,u){o.add(u.items)},update:function(l,u){o.update(u.items,u.data,u.oldData)},remove:function(l,u){o.remove(u.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(l,u,h,c){if(u===l)return .5;var d=1/(u-l);return Math.max(0,(c-l)*d)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Ac(this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t,n,i=this;this.body.emitter.on("refreshNodes",nt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",nt(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",function(){pr(i.nodesListeners,function(s,o){i.body.data.nodes&&i.body.data.nodes.off(o,s)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){if(Vs.parseOptions(this.options,t),t.opacity!==void 0&&(SC(t.opacity)||!Zf(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(var n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&this.body.nodes[n].updateShape();if(typeof t.font<"u"||typeof t.widthConstraint<"u"||typeof t.heightConstraint<"u")for(var i=0,s=yn(this.body.nodes);i<s.length;i++){var o=s[i];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(t.size!==void 0)for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.body.nodes[a].needsRefresh();(t.hidden!==void 0||t.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.data.nodes;if($X("id",t))this.body.data.nodes=t;else if(Lr(t))this.body.data.nodes=new ya,this.body.data.nodes.add(t);else if(!t)this.body.data.nodes=new ya;else throw new TypeError("Array or DataSet expected");if(i&&pr(this.nodesListeners,function(a,l){i.off(l,a)}),this.body.nodes={},this.body.data.nodes){var s=this;pr(this.nodesListeners,function(a,l){s.body.data.nodes.on(l,a)});var o=this.body.data.nodes.getIds();this.add(o,!0)}n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i,s=[],o=0;o<t.length;o++){i=t[o];var a=this.body.data.nodes.get(i),l=this.create(a);s.push(l),this.body.nodes[i]=l}this.layoutEngine.positionInitially(s),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,n,i){for(var s=this.body.nodes,o=!1,a=0;a<t.length;a++){var l=t[a],u=s[l],h=n[a];u!==void 0?u.setOptions(h)&&(o=!0):(o=!0,u=this.create(h),s[l]=u)}!o&&i!==void 0&&(o=Ept(n).call(n,function(c,d){var y=i[d];return y&&y.level!==c.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var n=this.body.nodes,i=0;i<t.length;i++){var s=t[i];delete n[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs;return new n(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;pr(this.body.nodes,function(i,s){var o=t.body.data.nodes.get(s);o!==void 0&&(n===!0&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var n={};if(t!==void 0){if(Lr(t)===!0){for(var i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){var s=this.body.nodes[t[i]];n[t[i]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[t]!==void 0){var o=this.body.nodes[t];n[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];n[this.body.nodeIndices[a]]={x:Math.round(l.x),y:Math.round(l.y)}}return n}},{key:"getPosition",value:function(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t=[],n=this.body.data.nodes.getDataSet(),i=ryt(n.get()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.id,l=this.body.nodes[a],u=Math.round(l.x),h=Math.round(l.y);(o.x!==u||o.y!==h)&&t.push({id:a,x:u,y:h})}}catch(c){i.e(c)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,n){var i=[];if(this.body.nodes[t]!==void 0)for(var s=this.body.nodes[t],o={},a=0;a<s.edges.length;a++){var l=s.edges[a];n!=="to"&&l.toId==s.id?o[l.fromId]===void 0&&(i.push(l.fromId),o[l.fromId]=!0):n!=="from"&&l.fromId==s.id&&o[l.toId]===void 0&&(i.push(l.toId),o[l.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var n=[];if(this.body.nodes[t]!==void 0)for(var i=this.body.nodes[t],s=0;s<i.edges.length;s++)n.push(i.edges[s].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return n}},{key:"moveNode",value:function(t,n,i){var s=this;this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(n),this.body.nodes[t].y=Number(i),fl(function(){s.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),e}(),UC={},syt={get exports(){return UC},set exports(e){UC=e}},WC={},oyt={get exports(){return WC},set exports(e){WC=e}},Ij=_i,ayt=function(e){return e!==void 0&&(Ij(e,"value")||Ij(e,"writable"))},lyt=jt,uyt=ao,cyt=$i,fyt=uo,hyt=ayt,dyt=Nv,pyt=Cx;function yee(e,r){var t=arguments.length<3?e:arguments[2],n,i;if(fyt(e)===t)return e[r];if(n=dyt.f(e,r),n)return hyt(n)?n.value:n.get===void 0?void 0:uyt(n.get,t);if(cyt(i=pyt(e)))return yee(i,r,t)}lyt({target:"Reflect",stat:!0},{get:yee});var vyt=$r,gyt=vyt.Reflect.get,yyt=gyt,myt=yyt,byt=myt,wyt=byt,$yt=wyt,_yt=$yt;(function(e){e.exports=_yt})(oyt);(function(e){e.exports=WC})(syt);var Aj=Pt(UC),KC={},xyt={get exports(){return KC},set exports(e){KC=e}},qC={},Eyt={get exports(){return qC},set exports(e){qC=e}},Syt=UJ,kyt=Syt,Tyt=kyt,Iyt=Tyt;(function(e){e.exports=Iyt})(Eyt);(function(e){e.exports=qC})(xyt);var Ayt=Pt(KC);function Oyt(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Tt(e),e!==null););return e}function bw(){if(typeof Reflect<"u"&&Aj){var e;bw=CN(e=Aj).call(e)}else bw=function(t,n,i){var s=Oyt(t,n);if(s){var o=Ayt(s,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return bw.apply(this,arguments)}var VC={},Cyt={get exports(){return VC},set exports(e){VC=e}},Pyt=jt,Oj=Math.hypot,Nyt=Math.abs,Ryt=Math.sqrt,Dyt=!!Oj&&Oj(1/0,NaN)!==1/0;Pyt({target:"Math",stat:!0,arity:2,forced:Dyt},{hypot:function(r,t){for(var n=0,i=0,s=arguments.length,o=0,a,l;i<s;)a=Nyt(arguments[i++]),o<a?(l=o/a,n=n*l*l+1,o=a):a>0?(l=a/o,n+=l*l):n+=a;return o===1/0?1/0:o*Ryt(n)}});var Byt=$r,Myt=Byt.Math.hypot,Lyt=Myt,Fyt=Lyt;(function(e){e.exports=Fyt})(Cyt);var jyt=Pt(VC);function mee(e){var r=zyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function zyt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Pn=function(){function e(){ht(this,e)}return dt(e,null,[{key:"transform",value:function(t,n){Lr(t)||(t=[t]);for(var i=n.point.x,s=n.point.y,o=n.angle,a=n.length,l=0;l<t.length;++l){var u=t[l],h=u.x*Math.cos(o)-u.y*Math.sin(o),c=u.x*Math.sin(o)+u.y*Math.cos(o);u.x=i+a*h,u.y=s+a*c}}},{key:"drawPath",value:function(t,n){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)t.lineTo(n[i].x,n[i].y);t.closePath()}}]),e}(),Hyt=function(e){Or(t,e);var r=mee(t);function t(){return ht(this,t),r.apply(this,arguments)}return dt(t,null,[{key:"draw",value:function(i,s){if(s.image){i.save(),i.translate(s.point.x,s.point.y),i.rotate(Math.PI/2+s.angle);var o=s.imageWidth!=null?s.imageWidth:s.image.width,a=s.imageHeight!=null?s.imageHeight:s.image.height;s.image.drawImageAtPosition(i,1,-o/2,0,o,a),i.restore()}return!1}}]),t}(Pn),Uyt=function(e){Or(t,e);var r=mee(t);function t(){return ht(this,t),r.apply(this,arguments)}return dt(t,null,[{key:"draw",value:function(i,s){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Pn.transform(o,s),Pn.drawPath(i,o),!0}}]),t}(Pn),Wyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),Kyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};Pn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle-s/2,a=n.angle+s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),qyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i={x:-.3,y:0};Pn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle+s/2,a=n.angle+3*s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),Vyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),Gyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),Yyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};return Pn.transform(i,n),Z4(t,i.x,i.y,n.length*.4),!0}}]),e}(),Zyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),Xyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),Jyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),Qyt=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Pn.transform(i,n),Pn.drawPath(t,i),!0}}]),e}(),bee=function(){function e(){ht(this,e)}return dt(e,null,[{key:"draw",value:function(t,n){var i;switch(n.type&&(i=n.type.toLowerCase()),i){case"image":return Hyt.draw(t,n);case"circle":return Yyt.draw(t,n);case"box":return Xyt.draw(t,n);case"crow":return Wyt.draw(t,n);case"curve":return Kyt.draw(t,n);case"diamond":return Jyt.draw(t,n);case"inv_curve":return qyt.draw(t,n);case"triangle":return Vyt.draw(t,n);case"inv_triangle":return Gyt.draw(t,n);case"bar":return Zyt.draw(t,n);case"vee":return Qyt.draw(t,n);case"arrow":default:return Uyt.draw(t,n)}}}]),e}();function Cj(e,r){var t=yn(e);if(zc){var n=zc(e);r&&(n=Os(n).call(n,function(i){return Zc(e,i).enumerable})),t.push.apply(t,n)}return t}function Pj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Ur(t=Cj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):Hc?jx(e,Hc(i)):Ur(n=Cj(Object(i))).call(n,function(s){zx(e,s,Zc(i,s))})}return e}var wee=function(){function e(r,t,n){ht(this,e),this._body=t,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(r),this.fromPoint=this.from,this.toPoint=this.to}return dt(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,n),t.lineWidth=n.width,n.dashes!==!1?this._drawDashedLine(t,n,o):this._drawLine(t,n,o)}},{key:"_drawLine",value:function(t,n,i,s,o){if(this.from!=this.to)this._line(t,n,i,s,o);else{var a=this._getCircleData(t),l=mn(a,3),u=l[0],h=l[1],c=l[2];this._circle(t,n,u,h,c)}}},{key:"_drawDashedLine",value:function(t,n,i,s,o){t.lineCap="round";var a=Lr(n.dashes)?n.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,n,i);else{var l=this._getCircleData(t),u=mn(l,3),h=u[0],c=u[1],d=u[2];this._circle(t,n,h,c,d)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)UX(t,this.from.x,this.from.y,this.to.x,this.to.y,a);else{var y=this._getCircleData(t),w=mn(y,3),b=w[0],T=w[1],x=w[2];this._circle(t,n,b,T,x)}this.enableShadow(t,n),t.stroke(),this.disableShadow(t,n)}}},{key:"findBorderPosition",value:function(t,n,i){return this.from!=this.to?this._findBorderPosition(t,n,i):this._findBorderPositionCircle(t,n,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var n,i=Ci(n=this._getCircleData(t)).call(n,0,2),s=mn(i,2),o=s[0],a=s[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var n=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);var i=fee(t,this.options.selfReference.angle,n,this.from);return[i.x,i.y,n]}},{key:"_pointOnCircle",value:function(t,n,i,s){var o=s*2*Math.PI;return{x:t+i*Math.cos(o),y:n-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,n,i){var s=i.x,o=i.y,a=i.low,l=i.high,u=i.direction,h=10,c=this.options.selfReference.size,d=.05,y,w=(a+l)*.5,b=0;this.options.arrowStrikethrough===!0&&(u===-1?b=this.options.endPointOffset.from:u===1&&(b=this.options.endPointOffset.to));var T=0;do{w=(a+l)*.5,y=this._pointOnCircle(s,o,c,w);var x=Math.atan2(t.y-y.y,t.x-y.x),A=t.distanceToBorder(n,x)+b,_=Math.sqrt(Math.pow(y.x-t.x,2)+Math.pow(y.y-t.y,2)),I=A-_;if(Math.abs(I)<d)break;I>0?u>0?a=w:l=w:u>0?l=w:a=w,++T}while(a<=l&&T<h);return Pj(Pj({},y),{},{t:w})}},{key:"getLineWidth",value:function(t,n){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):n===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,n){if(n.inheritsColor!==!1){if(n.inheritsColor==="both"&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=Fo(this.from.options.color.border,n.opacity),o=Fo(this.to.options.color.border,n.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),i.addColorStop(0,s),i.addColorStop(1,o),i}return n.inheritsColor==="to"?Fo(this.to.options.color.border,n.opacity):Fo(this.from.options.color.border,n.opacity)}else return Fo(n.color,n.opacity)}},{key:"_circle",value:function(t,n,i,s,o){this.enableShadow(t,n);var a=0,l=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var u=this.options.selfReference.angle,h=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:h,direction:-1}),d=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:h,direction:1});a=Math.atan2(c.y-s,c.x-i),l=Math.atan2(d.y-s,d.x-i)}t.beginPath(),t.arc(i,s,o,a,l,!1),t.stroke(),this.disableShadow(t,n)}},{key:"getDistanceToEdge",value:function(t,n,i,s,o,a){if(this.from!=this.to)return this._getDistanceToEdge(t,n,i,s,o,a);var l=this._getCircleData(void 0),u=mn(l,3),h=u[0],c=u[1],d=u[2],y=h-o,w=c-a;return Math.abs(Math.sqrt(y*y+w*w)-d)}},{key:"_getDistanceToLine",value:function(t,n,i,s,o,a){var l=i-t,u=s-n,h=l*l+u*u,c=((o-t)*l+(a-n)*u)/h;c>1?c=1:c<0&&(c=0);var d=t+c*l,y=n+c*u,w=d-o,b=y-a;return Math.sqrt(w*w+b*b)}},{key:"getArrowData",value:function(t,n,i,s,o,a){var l,u,h,c,d,y,w,b=a.width;n==="from"?(h=this.from,c=this.to,d=a.fromArrowScale<0,y=Math.abs(a.fromArrowScale),w=a.fromArrowType):n==="to"?(h=this.to,c=this.from,d=a.toArrowScale<0,y=Math.abs(a.toArrowScale),w=a.toArrowType):(h=this.to,c=this.from,d=a.middleArrowScale<0,y=Math.abs(a.middleArrowScale),w=a.middleArrowType);var T=15*y+3*b;if(h!=c){var x=jyt(h.x-c.x,h.y-c.y),A=T/x;if(n!=="middle")if(this.options.smooth.enabled===!0){var _=this._findBorderPosition(h,t,{via:i}),I=this.getPoint(_.t+A*(n==="from"?1:-1),i);l=Math.atan2(_.y-I.y,_.x-I.x),u=_}else l=Math.atan2(h.y-c.y,h.x-c.x),u=this._findBorderPosition(h,t);else{var O=(d?-A:A)/2,C=this.getPoint(.5+O,i),g=this.getPoint(.5-O,i);l=Math.atan2(C.y-g.y,C.x-g.x),u=this.getPoint(.5,i)}}else{var R=this._getCircleData(t),M=mn(R,3),L=M[0],W=M[1],X=M[2];if(n==="from"){var te=this.options.selfReference.angle,J=this.options.selfReference.angle+Math.PI,j=this._findBorderPositionCircle(this.from,t,{x:L,y:W,low:te,high:J,direction:-1});l=j.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=j}else if(n==="to"){var Z=this.options.selfReference.angle,se=this.options.selfReference.angle+Math.PI,Ee=this._findBorderPositionCircle(this.from,t,{x:L,y:W,low:Z,high:se,direction:1});l=Ee.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=Ee}else{var me=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(L,W,X,me),l=me*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var Pe=u.x-T*.9*Math.cos(l),Ue=u.y-T*.9*Math.sin(l),Ge={x:Pe,y:Ue};return{point:u,core:Ge,angle:l,length:T,type:w}}},{key:"drawArrowHead",value:function(t,n,i,s,o){t.strokeStyle=this.getColor(t,n),t.fillStyle=t.strokeStyle,t.lineWidth=n.width;var a=bee.draw(t,o);a&&(this.enableShadow(t,n),T0(t).call(t),this.disableShadow(t,n))}},{key:"enableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,n){if(n.background!==!1){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=n.backgroundColor,t.lineWidth=n.backgroundSize,this.setStrokeDashed(t,n.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,n.dashes)}}},{key:"setStrokeDashed",value:function(t,n){if(n!==!1)if(t.setLineDash!==void 0){var i=Lr(n)?n:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function Nj(e,r){var t=yn(e);if(zc){var n=zc(e);r&&(n=Os(n).call(n,function(i){return Zc(e,i).enumerable})),t.push.apply(t,n)}return t}function Rj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Ur(t=Nj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):Hc?jx(e,Hc(i)):Ur(n=Nj(Object(i))).call(n,function(s){zx(e,s,Zc(i,s))})}return e}function emt(e){var r=tmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function tmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var NN=function(e){Or(t,e);var r=emt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_findBorderPositionBezier",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),a=10,l=.2,u=!1,h=1,c=0,d=this.to,y,w,b=this.options.endPointOffset?this.options.endPointOffset.to:0;i.id===this.from.id&&(d=this.from,u=!0,b=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(b=0);var T=0;do{w=(c+h)*.5,y=this.getPoint(w,o);var x=Math.atan2(d.y-y.y,d.x-y.x),A=d.distanceToBorder(s,x)+b,_=Math.sqrt(Math.pow(y.x-d.x,2)+Math.pow(y.y-d.y,2)),I=A-_;if(Math.abs(I)<l)break;I<0?u===!1?c=w:h=w:u===!1?h=w:c=w,++T}while(c<=h&&T<a);return Rj(Rj({},y),{},{t:w})}},{key:"_getDistanceToBezierEdge",value:function(i,s,o,a,l,u,h){var c=1e9,d,y,w,b,T,x=i,A=s;for(y=1;y<10;y++)w=.1*y,b=Math.pow(1-w,2)*i+2*w*(1-w)*h.x+Math.pow(w,2)*o,T=Math.pow(1-w,2)*s+2*w*(1-w)*h.y+Math.pow(w,2)*a,y>0&&(d=this._getDistanceToLine(x,A,b,T,l,u),c=d<c?d:c),x=b,A=T;return c}},{key:"_bezierCurve",value:function(i,s,o,a){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?a!=null&&a.x!=null?i.bezierCurveTo(o.x,o.y,a.x,a.y,this.toPoint.x,this.toPoint.y):i.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):i.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(i,s),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),t}(wee);function rmt(e){var r=nmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function nmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Dj=function(e){Or(t,e);var r=rmt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return dt(t,[{key:"setOptions",value:function(i){bw(Tt(t.prototype),"setOptions",this).call(this,i);var s=!1;this.options.physics!==i.physics&&(s=!0),this.options=i,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),s===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var i="edgeId:"+this.id,s=this._body.functions.createNode({id:i,shape:"circle",physics:!0,hidden:!0});this._body.nodes[i]=s,this.via=s,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),a=mn(o,3),l=a[0],u=a[1],h=a[2],c=2*Math.PI*(1-i);return{x:l+h*Math.sin(c),y:u+h-h*(1-Math.cos(c))}}else return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*s.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*s.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s,this.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToBezierEdge(i,s,o,a,l,u,this.via)}}]),t}(NN);function imt(e){var r=smt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function smt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Bj=function(e){Or(t,e);var r=imt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var i=this.options.smooth.roundness,s=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),a=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){var l,u;o<=a?l=u=i*a:l=u=i*o,this.from.x>this.to.x&&(l=-l),this.from.y>=this.to.y&&(u=-u);var h=this.from.x+l,c=this.from.y+u;return s==="discrete"&&(o<=a?h=o<i*a?this.from.x:h:c=a<i*o?this.from.y:c),{x:h,y:c}}else if(s==="straightCross"){var d=(1-i)*o,y=(1-i)*a;return o<=a?(d=0,this.from.y<this.to.y&&(y=-y)):(this.from.x<this.to.x&&(d=-d),y=0),{x:this.to.x+d,y:this.to.y+y}}else if(s==="horizontal"){var w=(1-i)*o;return this.from.x<this.to.x&&(w=-w),{x:this.to.x+w,y:this.from.y}}else if(s==="vertical"){var b=(1-i)*a;return this.from.y<this.to.y&&(b=-b),{x:this.from.x,y:this.to.y+b}}else if(s==="curvedCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var T=Math.sqrt(o*o+a*a),x=Math.PI,A=Math.atan2(a,o),_=(A+(i*.5+.5)*x)%(2*x);return{x:this.from.x+(i*.5+.5)*T*Math.sin(_),y:this.from.y+(i*.5+.5)*T*Math.cos(_)}}else if(s==="curvedCCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var I=Math.sqrt(o*o+a*a),O=Math.PI,C=Math.atan2(a,o),g=(C+(-i*.5+.5)*O)%(2*O);return{x:this.from.x+(i*.5+.5)*I*Math.sin(g),y:this.from.y+(i*.5+.5)*I*Math.cos(g)}}else{var R,M;o<=a?R=M=i*a:R=M=i*o,this.from.x>this.to.x&&(R=-R),this.from.y>=this.to.y&&(M=-M);var L=this.from.x+R,W=this.from.y+M;return o<=a?this.from.x<=this.to.x?L=this.to.x<L?this.to.x:L:L=this.to.x>L?this.to.x:L:this.from.y>=this.to.y?W=this.to.y>W?this.to.y:W:W=this.to.y<W?this.to.y:W,{x:L,y:W}}}},{key:"_findBorderPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(i,s,o.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(i,s,o,a,l,u,h)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=i,a=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*s.x+Math.pow(o,2)*this.toPoint.x,l=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*s.y+Math.pow(o,2)*this.toPoint.y;return{x:a,y:l}}}]),t}(NN);function omt(e){var r=amt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function amt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var lmt=function(e){Or(t,e);var r=omt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_getDistanceToBezierEdge2",value:function(i,s,o,a,l,u,h,c){for(var d=1e9,y=i,w=s,b=[0,0,0,0],T=1;T<10;T++){var x=.1*T;b[0]=Math.pow(1-x,3),b[1]=3*x*Math.pow(1-x,2),b[2]=3*Math.pow(x,2)*(1-x),b[3]=Math.pow(x,3);var A=b[0]*i+b[1]*h.x+b[2]*c.x+b[3]*o,_=b[0]*s+b[1]*h.y+b[2]*c.y+b[3]*a;if(T>0){var I=this._getDistanceToLine(y,w,A,_,l,u);d=I<d?I:d}y=A,w=_}return d}}]),t}(NN);function umt(e){var r=cmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function cmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Mj=function(e){Or(t,e);var r=umt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_line",value:function(i,s,o){var a=o[0],l=o[1];this._bezierCurve(i,s,a,l)}},{key:"_getViaCoordinates",value:function(){var i=this.from.x-this.to.x,s=this.from.y-this.to.y,o,a,l,u,h=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(a=this.from.y,u=this.to.y,o=this.from.x-h*i,l=this.to.x+h*i):(a=this.from.y-h*s,u=this.to.y+h*s,o=this.from.x,l=this.to.x),[{x:o,y:a},{x:l,y:u}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),c=mn(h,2),d=c[0],y=c[1];return this._getDistanceToBezierEdge2(i,s,o,a,l,u,d,y)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=mn(s,2),a=o[0],l=o[1],u=i,h=[Math.pow(1-u,3),3*u*Math.pow(1-u,2),3*Math.pow(u,2)*(1-u),Math.pow(u,3)],c=h[0]*this.fromPoint.x+h[1]*a.x+h[2]*l.x+h[3]*this.toPoint.x,d=h[0]*this.fromPoint.y+h[1]*a.y+h[2]*l.y+h[3]*this.toPoint.y;return{x:c,y:d}}}]),t}(lmt);function fmt(e){var r=hmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function hmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Lj=function(e){Or(t,e);var r=fmt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_line",value:function(i,s){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),i.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(i){return{x:(1-i)*this.fromPoint.x+i*this.toPoint.x,y:(1-i)*this.fromPoint.y+i*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){var o=this.to,a=this.from;i.id===this.from.id&&(o=this.from,a=this.to);var l=Math.atan2(o.y-a.y,o.x-a.x),u=o.x-a.x,h=o.y-a.y,c=Math.sqrt(u*u+h*h),d=i.distanceToBorder(s,l),y=(c-d)/c;return{x:(1-y)*a.x+y*o.x,y:(1-y)*a.y+y*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToLine(i,s,o,a,l,u)}}]),t}(wee),_p=function(){function e(r,t,n,i,s){if(ht(this,e),t===void 0)throw new Error("No body provided");this.options=Ac(i),this.globalOptions=i,this.defaultOptions=s,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new dee(this.body,this.options,!0),this.setOptions(r)}return dt(e,[{key:"setOptions",value:function(t){if(t){var n=typeof t.physics<"u"&&this.options.physics!==t.physics||typeof t.hidden<"u"&&(this.options.hidden||!1)!==(t.hidden||!1)||typeof t.from<"u"&&this.options.from!==t.from||typeof t.to<"u"&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=cee(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=AN("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,n=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:n,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var a=this.options.selectionWidth;typeof a=="function"?o.width=a(o.width):typeof a=="number"&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var l=this.options.hoverWidth;typeof l=="function"?o.width=l(o.width):typeof l=="number"&&(o.width+=l),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var n=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,n=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof Dj&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof Mj&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof Bj&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof Lj&&t.type.enabled===!1)&&(i=!1),i===!0&&(n=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(n=!0,this.edgeType=new Dj(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new Mj(this.options,this.body,this.labelModule):this.edgeType=new Bj(this.options,this.body,this.labelModule):this.edgeType=new Lj(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),n}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.width=this.options.scaling.min+s*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,n,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,n.fromArrow&&(s.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),n.fromArrowSrc&&(s.from.image=this.imagelist.load(n.fromArrowSrc)),n.fromArrowImageWidth&&(s.from.imageWidth=n.fromArrowImageWidth),n.fromArrowImageHeight&&(s.from.imageHeight=n.fromArrowImageHeight)),n.toArrow&&(s.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),n.toArrowSrc&&(s.to.image=this.imagelist.load(n.toArrowSrc)),n.toArrowImageWidth&&(s.to.imageWidth=n.toArrowImageWidth),n.toArrowImageHeight&&(s.to.imageHeight=n.toArrowImageHeight)),n.middleArrow&&(s.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,n),n.middleArrowSrc&&(s.middle.image=this.imagelist.load(n.middleArrowSrc)),n.middleArrowImageWidth&&(s.middle.imageWidth=n.middleArrowImageWidth),n.middleArrowImageHeight&&(s.middle.imageHeight=n.middleArrowImageHeight)),n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.to)}}},{key:"drawLabel",value:function(t,n){if(this.options.label!==void 0){var i=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover);var o;if(i.id!=s.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,n),t.save();var a=this._getRotation(t);a.angle!=0&&(t.translate(a.x,a.y),t.rotate(a.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var l=fee(t,this.options.selfReference.angle,this.options.selfReference.size,i);o=this._pointOnCircle(l.x,l.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var n=[];if(this.labelModule.visible()){var i=this._getRotation();OC(this.labelModule.getSize(),t,i)&&n.push({edgeId:this.id,labelId:0})}var s={left:t.x,top:t.y};return this.isOverlappingWith(s)&&n.push({edgeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){if(this.connected){var n=10,i=this.from.x,s=this.from.y,o=this.to.x,a=this.to.y,l=t.left,u=t.top,h=this.edgeType.getDistanceToEdge(i,s,o,a,l,u);return h<n}else return!1}},{key:"_getRotation",value:function(t){var n=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,n);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var s={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;var o=this.from.y-this.to.y,a=this.from.x-this.to.x,l=Math.atan2(o,a);return(l<-1&&a<0||l>0&&a<0)&&(l+=Math.PI),s.angle=l,s}},{key:"_pointOnCircle",value:function(t,n,i,s){return{x:t+i*Math.cos(s),y:n-i*Math.sin(s)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(Uv(a,t,n,i),n.endPointOffset!==void 0&&n.endPointOffset.from!==void 0&&(Zf(n.endPointOffset.from)?t.endPointOffset.from=n.endPointOffset.from:(t.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),n.endPointOffset!==void 0&&n.endPointOffset.to!==void 0&&(Zf(n.endPointOffset.to)?t.endPointOffset.to=n.endPointOffset.to:(t.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),j$(n.label)?t.label=n.label:j$(t.label)||(t.label=void 0),Ro(t,n,"smooth",s),Ro(t,n,"shadow",s),Ro(t,n,"background",s),n.dashes!==void 0&&n.dashes!==null?t.dashes=n.dashes:i===!0&&n.dashes===null&&(t.dashes=hh(s.dashes)),n.scaling!==void 0&&n.scaling!==null?(n.scaling.min!==void 0&&(t.scaling.min=n.scaling.min),n.scaling.max!==void 0&&(t.scaling.max=n.scaling.max),Ro(t.scaling,n.scaling,"label",s.scaling)):i===!0&&n.scaling===null&&(t.scaling=hh(s.scaling)),n.arrows!==void 0&&n.arrows!==null)if(typeof n.arrows=="string"){var l=n.arrows.toLowerCase();t.arrows.to.enabled=_r(l).call(l,"to")!=-1,t.arrows.middle.enabled=_r(l).call(l,"middle")!=-1,t.arrows.from.enabled=_r(l).call(l,"from")!=-1}else if(Dr(n.arrows)==="object")Ro(t.arrows,n.arrows,"to",s.arrows),Ro(t.arrows,n.arrows,"middle",s.arrows),Ro(t.arrows,n.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+k0(n.arrows));else i===!0&&n.arrows===null&&(t.arrows=hh(s.arrows));if(n.color!==void 0&&n.color!==null){var u=gc(n.color)?{color:n.color,highlight:n.color,hover:n.color,inherit:!1,opacity:1}:n.color,h=t.color;if(o)Yr(h,s.color,!1,i);else for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&delete h[c];if(gc(h))h.color=h,h.highlight=h,h.hover=h,h.inherit=!1,u.opacity===void 0&&(h.opacity=1);else{var d=!1;u.color!==void 0&&(h.color=u.color,d=!0),u.highlight!==void 0&&(h.highlight=u.highlight,d=!0),u.hover!==void 0&&(h.hover=u.hover,d=!0),u.inherit!==void 0&&(h.inherit=u.inherit),u.opacity!==void 0&&(h.opacity=Math.min(1,Math.max(0,u.opacity))),d===!0?h.inherit=!1:h.inherit===void 0&&(h.inherit="from")}}else i===!0&&n.color===null&&(t.color=Ac(s.color));i===!0&&n.font===null&&(t.font=Ac(s.font)),Object.prototype.hasOwnProperty.call(n,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=n.selfReferenceSize)}}]),e}(),dmt=function(){function e(r,t,n){var i,s=this;ht(this,e),this.body=r,this.images=t,this.groups=n,this.body.functions.createEdge=nt(i=this.create).call(i,this),this.edgesListeners={add:function(a,l){s.add(l.items)},update:function(a,l){s.update(l.items)},remove:function(a,l){s.remove(l.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,l,u,h){if(l===a)return .5;var c=1/(l-a);return Math.max(0,(h-a)*c)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Yr(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this,n,i;this.body.emitter.on("_forceDisableDynamicCurves",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");var a=!1;for(var l in t.body.edges)if(Object.prototype.hasOwnProperty.call(t.body.edges,l)){var u=t.body.edges[l],h=t.body.data.edges.get(l);if(h!=null){var c=h.smooth;c!==void 0&&c.enabled===!0&&c.type==="dynamic"&&(s===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:s}}),a=!0)}}o===!0&&a===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",nt(n=this.refresh).call(n,this)),this.body.emitter.on("refresh",nt(i=this.refresh).call(i,this)),this.body.emitter.on("destroy",function(){pr(t.edgesListeners,function(s,o){t.body.data.edges&&t.body.data.edges.off(o,s)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){_p.parseOptions(this.options,t,!0,this.defaultOptions,!0);var n=!1;if(t.smooth!==void 0)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(n=this.body.edges[i].updateEdgeType()||n);if(t.font!==void 0)for(var s in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,s)&&this.body.edges[s].updateLabelModule();(t.hidden!==void 0||t.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.body.data.edges;if($X("id",t))this.body.data.edges=t;else if(Lr(t))this.body.data.edges=new ya,this.body.data.edges.add(t);else if(!t)this.body.data.edges=new ya;else throw new TypeError("Array or DataSet expected");if(s&&pr(this.edgesListeners,function(a,l){s.off(l,a)}),this.body.edges={},this.body.data.edges){pr(this.edgesListeners,function(a,l){n.body.data.edges.on(l,a)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.edges,s=this.body.data.edges,o=0;o<t.length;o++){var a=t[o],l=i[a];l&&l.disconnect();var u=s.get(a,{showInternalIds:!0});i[a]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var n=this.body.edges,i=this.body.data.edges,s=!1,o=0;o<t.length;o++){var a=t[o],l=i.get(a),u=n[a];u!==void 0?(u.disconnect(),s=u.setOptions(l)||s,u.connect()):(this.body.edges[a]=this.create(l),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.length!==0){var i=this.body.edges;pr(t,function(s){var o=i[s];o!==void 0&&o.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;pr(this.body.edges,function(n,i){var s=t.body.data.edges.get(i);s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(t){return new _p(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,n=this.body.nodes,i=this.body.edges;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var s=i[t];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(t){var n=[];if(this.body.edges[t]!==void 0){var i=this.body.edges[t];i.fromId!==void 0&&n.push(i.fromId),i.toId!==void 0&&n.push(i.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,n=[];pr(this.body.edges,function(i,s){var o=t.body.nodes[i.toId],a=t.body.nodes[i.fromId];o!==void 0&&o.isCluster===!0||a!==void 0&&a.isCluster===!0||(o===void 0||a===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(t!=null){var n=this.body.edges,i=[];Ur(t).call(t,function(s,o){var a=n[o];a===void 0&&i.push(o)}),this.add(i,!0)}}}]),e}(),$ee=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=Vx("BARNES HUT SOLVER")}return dt(e,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t,n=this.body.nodes,i=this.physicsBody.physicsNodeIndices,s=i.length,o=this._formBarnesHutTree(n,i);this.barnesHutTree=o;for(var a=0;a<s;a++)t=n[i[a]],t.options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,n){this._getForceContribution(t.children.NW,n),this._getForceContribution(t.children.NE,n),this._getForceContribution(t.children.SW,n),this._getForceContribution(t.children.SE,n)}},{key:"_getForceContribution",value:function(t,n){if(t.childrenCount>0){var i=t.centerOfMass.x-n.x,s=t.centerOfMass.y-n.y,o=Math.sqrt(i*i+s*s);o*t.calcSize>this.thetaInversed?this._calculateForces(o,i,s,n,t):t.childrenCount===4?this._getForceContributions(t,n):t.children.data.id!=n.id&&this._calculateForces(o,i,s,n,t)}}},{key:"_calculateForces",value:function(t,n,i,s,o){t===0&&(t=.1,n=t),this.overlapAvoidanceFactor<1&&s.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius));var a=this.options.gravitationalConstant*o.mass*s.options.mass/Math.pow(t,3),l=n*a,u=i*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}},{key:"_formBarnesHutTree",value:function(t,n){for(var i,s=n.length,o=t[n[0]].x,a=t[n[0]].y,l=t[n[0]].x,u=t[n[0]].y,h=1;h<s;h++){var c=t[n[h]],d=c.x,y=c.y;c.options.mass>0&&(d<o&&(o=d),d>l&&(l=d),y<a&&(a=y),y>u&&(u=y))}var w=Math.abs(l-o)-Math.abs(u-a);w>0?(a-=.5*w,u+=.5*w):(o+=.5*w,l-=.5*w);var b=1e-5,T=Math.max(b,Math.abs(l-o)),x=.5*T,A=.5*(o+l),_=.5*(a+u),I={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:A-x,maxX:A+x,minY:_-x,maxY:_+x},size:T,calcSize:1/T,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(I.root);for(var O=0;O<s;O++)i=t[n[O]],i.options.mass>0&&this._placeInTree(I.root,i);return I}},{key:"_updateBranchMass",value:function(t,n){var i=t.centerOfMass,s=t.mass+n.options.mass,o=1/s;i.x=i.x*t.mass+n.x*n.options.mass,i.x*=o,i.y=i.y*t.mass+n.y*n.options.mass,i.y*=o,t.mass=s;var a=Math.max(Math.max(n.height,n.radius),n.width);t.maxWidth=t.maxWidth<a?a:t.maxWidth}},{key:"_placeInTree",value:function(t,n,i){(i!=!0||i===void 0)&&this._updateBranchMass(t,n);var s=t.children.NW.range,o;s.maxX>n.x?s.maxY>n.y?o="NW":o="SW":s.maxY>n.y?o="NE":o="SE",this._placeInRegion(t,n,o)}},{key:"_placeInRegion",value:function(t,n,i){var s=t.children[i];switch(s.childrenCount){case 0:s.children.data=n,s.childrenCount=1,this._updateBranchMass(s,n);break;case 1:s.children.data.x===n.x&&s.children.data.y===n.y?(n.x+=this._rng(),n.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,n));break;case 4:this._placeInTree(s,n);break}}},{key:"_splitBranch",value:function(t){var n=null;t.childrenCount===1&&(n=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),n!=null&&this._placeInTree(t,n)}},{key:"_insertRegion",value:function(t,n){var i,s,o,a,l=.5*t.size;switch(n){case"NW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY,a=t.range.minY+l;break;case"NE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY,a=t.range.minY+l;break;case"SW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY+l,a=t.range.maxY;break;case"SE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY+l,a=t.range.maxY;break}t.children[n]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:s,minY:o,maxY:a},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,n){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,n))}},{key:"_drawBranch",value:function(t,n,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,n),this._drawBranch(t.children.NE,n),this._drawBranch(t.children.SE,n),this._drawBranch(t.children.SW,n)),n.strokeStyle=i,n.beginPath(),n.moveTo(t.range.minX,t.range.minY),n.lineTo(t.range.maxX,t.range.minY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.minY),n.lineTo(t.range.maxX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.maxY),n.lineTo(t.range.minX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.minX,t.range.maxY),n.lineTo(t.range.minX,t.range.minY),n.stroke()}}]),e}(),pmt=function(){function e(r,t,n){ht(this,e),this._rng=Vx("REPULSION SOLVER"),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,h=this.body.nodes,c=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,y=this.options.nodeDistance,w=-2/3/y,b=4/3,T=0;T<c.length-1;T++){l=h[c[T]];for(var x=T+1;x<c.length;x++)u=h[c[x]],t=u.x-l.x,n=u.y-l.y,i=Math.sqrt(t*t+n*n),i===0&&(i=.1*this._rng(),t=i),i<2*y&&(i<.5*y?a=1:a=w*i+b,a=a/i,s=t*a,o=n*a,d[l.id].x-=s,d[l.id].y-=o,d[u.id].x+=s,d[u.id].y+=o)}}}]),e}(),vmt=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,s=this.options.nodeDistance,o=0;o<n.length-1;o++)for(var a=t[n[o]],l=o+1;l<n.length;l++){var u=t[n[l]];if(a.level===u.level){var h=s+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(u.shape.radius||0)/2),c=u.x-a.x,d=u.y-a.y,y=Math.sqrt(c*c+d*d),w=.05,b=void 0;y<h?b=-Math.pow(w*y,2)+Math.pow(w*h,2):b=0,y!==0&&(b=b/y);var T=c*b,x=d*b;i[a.id].x-=T,i[a.id].y-=x,i[u.id].x+=T,i[u.id].y+=x}}}}]),e}(),gT=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i=this.physicsBody.physicsEdgeIndices,s=this.body.edges,o,a,l,u=0;u<i.length;u++)n=s[i[u]],n.connected===!0&&n.toId!==n.fromId&&this.body.nodes[n.toId]!==void 0&&this.body.nodes[n.fromId]!==void 0&&(n.edgeType.via!==void 0?(t=n.options.length===void 0?this.options.springLength:n.options.length,o=n.to,a=n.edgeType.via,l=n.from,this._calculateSpringForce(o,a,.5*t),this._calculateSpringForce(a,l,.5*t)):(t=n.options.length===void 0?this.options.springLength*1.5:n.options.length,this._calculateSpringForce(n.from,n.to,t)))}},{key:"_calculateSpringForce",value:function(t,n,i){var s=t.x-n.x,o=t.y-n.y,a=Math.max(Math.sqrt(s*s+o*o),.01),l=this.options.springConstant*(i-a)/a,u=s*l,h=o*l;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=u,this.physicsBody.forces[t.id].y+=h),this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x-=u,this.physicsBody.forces[n.id].y-=h)}}]),e}(),gmt=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,h=this.body.edges,c=.5,d=this.physicsBody.physicsEdgeIndices,y=this.physicsBody.physicsNodeIndices,w=this.physicsBody.forces,b=0;b<y.length;b++){var T=y[b];w[T].springFx=0,w[T].springFy=0}for(var x=0;x<d.length;x++)n=h[d[x]],n.connected===!0&&(t=n.options.length===void 0?this.options.springLength:n.options.length,i=n.from.x-n.to.x,s=n.from.y-n.to.y,u=Math.sqrt(i*i+s*s),u=u===0?.01:u,l=this.options.springConstant*(t-u)/u,o=i*l,a=s*l,n.to.level!=n.from.level?(w[n.toId]!==void 0&&(w[n.toId].springFx-=o,w[n.toId].springFy-=a),w[n.fromId]!==void 0&&(w[n.fromId].springFx+=o,w[n.fromId].springFy+=a)):(w[n.toId]!==void 0&&(w[n.toId].x-=c*o,w[n.toId].y-=c*a),w[n.fromId]!==void 0&&(w[n.fromId].x+=c*o,w[n.fromId].y+=c*a)));l=1;for(var A,_,I=0;I<y.length;I++){var O=y[I];A=Math.min(l,Math.max(-l,w[O].springFx)),_=Math.min(l,Math.max(-l,w[O].springFy)),w[O].x+=A,w[O].y+=_}for(var C=0,g=0,R=0;R<y.length;R++){var M=y[R];C+=w[M].x,g+=w[M].y}for(var L=C/y.length,W=g/y.length,X=0;X<y.length;X++){var te=y[X];w[te].x-=L,w[te].y-=W}}}]),e}(),ww=function(){function e(r,t,n){ht(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return dt(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o=this.body.nodes,a=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,u=0;u<a.length;u++){var h=a[u];s=o[h],t=-s.x,n=-s.y,i=Math.sqrt(t*t+n*n),this._calculateForces(i,t,n,l,s)}}},{key:"_calculateForces",value:function(t,n,i,s,o){var a=t===0?0:this.options.centralGravity/t;s[o.id].x=n*a,s[o.id].y=i*a}}]),e}();function ymt(e){var r=mmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function mmt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var bmt=function(e){Or(t,e);var r=ymt(t);function t(n,i,s){var o;return ht(this,t),o=r.call(this,n,i,s),o._rng=Vx("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return dt(t,[{key:"_calculateForces",value:function(i,s,o,a,l){i===0&&(i=.1*this._rng(),s=i),this.overlapAvoidanceFactor<1&&a.shape.radius&&(i=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,i-a.shape.radius));var u=a.edges.length+1,h=this.options.gravitationalConstant*l.mass*a.options.mass*u/Math.pow(i,2),c=s*h,d=o*h;this.physicsBody.forces[a.id].x+=c,this.physicsBody.forces[a.id].y+=d}}]),t}($ee);function wmt(e){var r=$mt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function $mt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var _mt=function(e){Or(t,e);var r=wmt(t);function t(n,i,s){return ht(this,t),r.call(this,n,i,s)}return dt(t,[{key:"_calculateForces",value:function(i,s,o,a,l){if(i>0){var u=l.edges.length+1,h=this.options.centralGravity*u*l.options.mass;a[l.id].x=s*h,a[l.id].y=o*h}}}]),t}(ww),xmt=function(){function e(r){ht(this,e),this.body=r,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Hn(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,M$(["stabilization"],this.options,t),Ro(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var n=this.options.wind;n&&((typeof n.x!="number"||SC(n.x))&&(n.x=0),(typeof n.y!="number"||SC(n.y))&&(n.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new bmt(this.body,this.physicsBody,t),this.edgesSolver=new gT(this.body,this.physicsBody,t),this.gravitySolver=new _mt(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new pmt(this.body,this.physicsBody,t),this.edgesSolver=new gT(this.body,this.physicsBody,t),this.gravitySolver=new ww(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new vmt(this.body,this.physicsBody,t),this.edgesSolver=new gmt(this.body,this.physicsBody,t),this.gravitySolver=new ww(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new $ee(this.body,this.physicsBody,t),this.edgesSolver=new gT(this.body,this.physicsBody,t),this.gravitySolver=new ww(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var t;this.viewFunction=nt(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=N$();this.physicsTick();var n=N$()-t;(n<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&fl(function(){t.body.emitter.emit("stabilized",{iterations:n}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var t=1.2;this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=this.adaptiveCounter%this.adaptiveInterval===0;t?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,n=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&n[s].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(n[s].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[a]={x:0,y:0},this.physicsBody.velocities[a]===void 0&&(this.physicsBody.velocities[a]={x:0,y:0})}for(var l in this.physicsBody.velocities)t[l]===void 0&&delete this.physicsBody.velocities[l]}},{key:"revert",value:function(){var t=yn(this.previousStates),n=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var s=0;s<t.length;s++){var o=t[s];n[o]!==void 0?n[o].options.physics===!0&&(this.referenceState[o]={positions:{x:n[o].x,y:n[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,n[o].x=this.previousStates[o].x,n[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t,n,i,s=this.body.nodes,o=this.referenceState,a=.3;for(var l in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,l)&&s[l]!==void 0&&(t=s[l].x-o[l].positions.x,n=s[l].y-o[l].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i>a))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,n=0,i=0,s=5,o=0;o<t.length;o++){var a=t[o],l=this._performStep(a);n=Math.max(n,l),i+=l}this.adaptiveTimestepEnabled=i/t.length<s,this.stabilized=n<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,n,i){var s=this.modelOptions.damping*t,o=(n-s)/i;t+=o*this.timestep;var a=this.options.maxVelocity||1e9;return Math.abs(t)>a&&(t=t>0?a:-a),t}},{key:"_performStep",value:function(t){var n=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var s=this.physicsBody.velocities[t];this.previousStates[t]={x:n.x,y:n.y,vx:s.x,vy:s.y},n.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,i.x,n.options.mass),n.x+=s.x*this.timestep):(i.x=0,s.x=0),n.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,i.y,n.options.mass),n.y+=s.y*this.timestep):(i.y=0,s.y=0);var o=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return o}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].x&&t[n].y){var i=t[n].options.fixed;this.freezeCache[n]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.freezeCache[n]!==void 0&&(t[n].options.fixed.x=this.freezeCache[n].x,t[n].options.fixed.y=this.freezeCache[n].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof n!="number"&&(n=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",n)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=n,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,fl(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,n=function(){return t.stabilized===!1&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var s=0;n()&&s<this.options.stabilization.updateInterval;)this.physicsTick(),s++;if(i(),n()){var o;fl(nt(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var i=this.physicsBody.physicsNodeIndices[n],s=this.body.nodes[i],o=this.physicsBody.forces[i],a=20,l=.03,u=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),h=Math.min(Math.max(5,u),15),c=3*h,d=wC((180-Math.min(1,Math.max(0,l*u))*180)/360,1,1),y={x:s.x+a*o.x,y:s.y+a*o.y};t.lineWidth=h,t.strokeStyle=d,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(y.x,y.y),t.stroke();var w=Math.atan2(o.y,o.x);t.fillStyle=d,bee.draw(t,{type:"arrow",point:y,angle:w,length:c}),T0(t).call(t)}}}]),e}();let O1;const Emt=new Uint8Array(16);function Smt(){if(!O1&&(O1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O1(Emt)}const ki=[];for(let e=0;e<256;++e)ki.push((e+256).toString(16).slice(1));function kmt(e,r=0){return(ki[e[r+0]]+ki[e[r+1]]+ki[e[r+2]]+ki[e[r+3]]+"-"+ki[e[r+4]]+ki[e[r+5]]+"-"+ki[e[r+6]]+ki[e[r+7]]+"-"+ki[e[r+8]]+ki[e[r+9]]+"-"+ki[e[r+10]]+ki[e[r+11]]+ki[e[r+12]]+ki[e[r+13]]+ki[e[r+14]]+ki[e[r+15]]).toLowerCase()}const Tmt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Fj={randomUUID:Tmt};function by(e,r,t){if(Fj.randomUUID&&!r&&!e)return Fj.randomUUID();e=e||{};const n=e.random||(e.rng||Smt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return kmt(n)}var os=function(){function e(){ht(this,e)}return dt(e,null,[{key:"getRange",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.shape.boundingBox.left&&(o=l.shape.boundingBox.left),a<l.shape.boundingBox.right&&(a=l.shape.boundingBox.right),i>l.shape.boundingBox.top&&(i=l.shape.boundingBox.top),s<l.shape.boundingBox.bottom&&(s=l.shape.boundingBox.bottom);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"getRangeCore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.x&&(o=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),s<l.y&&(s=l.y);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,n){var i={};return n===void 0||n==="node"?(Yr(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Yr(i,t.options,!0),i}}]),e}();function Imt(e){var r=Amt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Amt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Omt=function(e){Or(t,e);var r=Imt(t);function t(n,i,s,o,a,l){var u;return ht(this,t),u=r.call(this,n,i,s,o,a,l),u.isCluster=!0,u.containedNodes={},u.containedEdges={},u}return dt(t,[{key:"_openChildCluster",value:function(i){var s=this,o=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],pr(o.edges,function(a){delete s.containedEdges[a.id]}),pr(o.containedNodes,function(a,l){s.containedNodes[l]=a}),o.containedNodes={},pr(o.containedEdges,function(a,l){s.containedEdges[l]=a}),o.containedEdges={},pr(o.edges,function(a){pr(s.edges,function(l){var u,h,c=_r(u=l.clusteringEdgeReplacingIds).call(u,a.id);c!==-1&&(pr(a.clusteringEdgeReplacingIds,function(d){l.clusteringEdgeReplacingIds.push(d),s.body.edges[d].edgeReplacedById=l.id}),su(h=l.clusteringEdgeReplacingIds).call(h,c,1))})}),o.edges=[]}}]),t}(Vs),Cmt=function(){function e(r){var t=this;ht(this,e),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Hn(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}return dt(e,[{key:"clusterByHubsize",value:function(t,n){t===void 0?t=this._getHubSize():Dr(t)==="object"&&(n=this._checkOptions(t),t=this._getHubSize());for(var i=[],s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodes[this.body.nodeIndices[s]];o.edges.length>=t&&i.push(o.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],n,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");n=this._checkOptions(n);var s={},o={};pr(this.body.nodes,function(a,l){a.options&&n.joinCondition(a.options)===!0&&(s[l]=a,pr(a.edges,function(u){t.clusteredEdges[u.id]===void 0&&(o[u.id]=u)}))}),this._cluster(s,o,n,i)}},{key:"clusterByEdgeCount",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=this._checkOptions(n);for(var o=[],a={},l,u,h,c=function(){var b={},T={},x=i.body.nodeIndices[d],A=i.body.nodes[x];if(a[x]===void 0){h=0,u=[];for(var _=0;_<A.edges.length;_++)l=A.edges[_],i.clusteredEdges[l.id]===void 0&&(l.toId!==l.fromId&&h++,u.push(l));if(h===t){for(var I=function(te){if(n.joinCondition===void 0||n.joinCondition===null)return!0;var J=os.cloneOptions(te);return n.joinCondition(J)},O=!0,C=0;C<u.length;C++){l=u[C];var g=i._getConnectedId(l,x);if(I(A))T[l.id]=l,b[x]=A,b[g]=i.body.nodes[g],a[x]=!0;else{O=!1;break}}if(yn(b).length>0&&yn(T).length>0&&O===!0){var R=function(){for(var te=0;te<o.length;++te)for(var J in b)if(o[te].nodes[J]!==void 0)return o[te]},M=R();if(M!==void 0){for(var L in b)M.nodes[L]===void 0&&(M.nodes[L]=b[L]);for(var W in T)M.edges[W]===void 0&&(M.edges[W]=T[W])}else o.push({nodes:b,edges:T})}}}},d=0;d<this.body.nodeIndices.length;d++)c();for(var y=0;y<o.length;y++)this._cluster(o[y].nodes,o[y].edges,n,!1);s===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,t,n)}},{key:"clusterBridges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,t,n)}},{key:"clusterByConnection",value:function(t,n){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];n=this._checkOptions(n,o),n.clusterNodeProperties.x===void 0&&(n.clusterNodeProperties.x=o.x),n.clusterNodeProperties.y===void 0&&(n.clusterNodeProperties.y=o.y),n.clusterNodeProperties.fixed===void 0&&(n.clusterNodeProperties.fixed={},n.clusterNodeProperties.fixed.x=o.options.fixed.x,n.clusterNodeProperties.fixed.y=o.options.fixed.y);var a={},l={},u=o.id,h=os.cloneOptions(o);a[u]=o;for(var c=0;c<o.edges.length;c++){var d=o.edges[c];if(this.clusteredEdges[d.id]===void 0){var y=this._getConnectedId(d,u);if(this.clusteredNodes[y]===void 0)if(y!==u)if(n.joinCondition===void 0)l[d.id]=d,a[y]=this.body.nodes[y];else{var w=os.cloneOptions(this.body.nodes[y]);n.joinCondition(h,w)===!0&&(l[d.id]=d,a[y]=this.body.nodes[y])}else l[d.id]=d}}var b=Xp(i=yn(a)).call(i,function(I){return a[I].id});for(var T in a)if(Object.prototype.hasOwnProperty.call(a,T))for(var x=a[T],A=0;A<x.edges.length;A++){var _=x.edges[A];_r(b).call(b,this._getConnectedId(_,x.id))>-1&&(l[_.id]=_)}this._cluster(a,l,n,s)}},{key:"_createClusterEdges",value:function(t,n,i,s){for(var o,a,l,u,h,c,d=yn(t),y=[],w=0;w<d.length;w++){a=d[w],l=t[a];for(var b=0;b<l.edges.length;b++)o=l.edges[b],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?n[o.id]=o:o.toId==a?(u=i.id,h=o.fromId,c=h):(u=o.toId,h=i.id,c=u),t[c]===void 0&&y.push({edge:o,fromId:h,toId:u}))}for(var T=[],x=function(g){for(var R=0;R<T.length;R++){var M=T[R],L=g.fromId===M.fromId&&g.toId===M.toId,W=g.fromId===M.toId&&g.toId===M.fromId;if(L||W)return M}return null},A=0;A<y.length;A++){var _=y[A],I=_.edge,O=x(_);O===null?(O=this._createClusteredEdge(_.fromId,_.toId,I,s),T.push(O)):O.clusteringEdgeReplacingIds.push(I.id),this.body.edges[I.id].edgeReplacedById=O.id,this._backupEdgeOptions(I),I.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.clusteredNodes[a]!==void 0&&o.push(a);for(var l=0;l<o.length;++l)delete t[o[l]];if(yn(t).length!=0&&!(yn(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=!0)){var u=Yr({},i.clusterNodeProperties);if(i.processProperties!==void 0){var h=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var d=os.cloneOptions(t[c]);h.push(d)}var y=[];for(var w in n)if(Object.prototype.hasOwnProperty.call(n,w)&&w.substr(0,12)!=="clusterEdge:"){var b=os.cloneOptions(n[w],"edge");y.push(b)}if(u=i.processProperties(u,h,y),!u)throw new Error("The processProperties function does not return properties!")}u.id===void 0&&(u.id="cluster:"+by());var T=u.id;u.label===void 0&&(u.label="cluster");var x=void 0;u.x===void 0&&(x=this._getClusterPosition(t),u.x=x.x),u.y===void 0&&(x===void 0&&(x=this._getClusterPosition(t)),u.y=x.y),u.id=T;var A=this.body.functions.createNode(u,Omt);A.containedNodes=t,A.containedEdges=n,A.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[u.id]=A,this._clusterEdges(t,n,u,i.clusterEdgeProperties),u.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var n=this.clusteredEdges[t.id];n!==void 0&&(t.setOptions({physics:n.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var n=yn(t),i=t[n[0]].x,s=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,l,u=1;u<n.length;u++)l=t[n[u]],i=l.x<i?l.x:i,s=l.x>s?l.x:s,o=l.y<o?l.y:o,a=l.y>a?l.y:a;return{x:.5*(i+s),y:.5*(o+a)}}},{key:"openCluster",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var s=this.body.nodes[t];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),a=_r(o).call(o,t)-1;if(a>=0){var l=o[a],u=this.body.nodes[l];u._openChildCluster(t),delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged");return}var h=s.containedNodes,c=s.containedEdges;if(n!==void 0&&n.releaseFunction!==void 0&&typeof n.releaseFunction=="function"){var d={},y={x:s.x,y:s.y};for(var w in h)if(Object.prototype.hasOwnProperty.call(h,w)){var b=this.body.nodes[w];d[w]={x:b.x,y:b.y}}var T=n.releaseFunction(y,d);for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)){var A=this.body.nodes[x];T[x]!==void 0&&(A.x=T[x].x===void 0?s.x:T[x].x,A.y=T[x].y===void 0?s.y:T[x].y)}}else pr(h,function(Ee){Ee.options.fixed.x===!1&&(Ee.x=s.x),Ee.options.fixed.y===!1&&(Ee.y=s.y)});for(var _ in h)if(Object.prototype.hasOwnProperty.call(h,_)){var I=this.body.nodes[_];I.vx=s.vx,I.vy=s.vy,I.setOptions({physics:!0}),delete this.clusteredNodes[_]}for(var O=[],C=0;C<s.edges.length;C++)O.push(s.edges[C]);for(var g=0;g<O.length;g++){for(var R=O[g],M=this._getConnectedId(R,t),L=this.clusteredNodes[M],W=0;W<R.clusteringEdgeReplacingIds.length;W++){var X=R.clusteringEdgeReplacingIds[W],te=this.body.edges[X];if(te!==void 0)if(L!==void 0){var J=this.body.nodes[L.clusterId];J.containedEdges[te.id]=te,delete c[te.id];var j=te.fromId,Z=te.toId;te.toId==M?Z=L.clusterId:j=L.clusterId,this._createClusteredEdge(j,Z,te,J.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(te)}R.remove()}for(var se in c)Object.prototype.hasOwnProperty.call(c,se)&&this._restoreEdge(c[se]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var n=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(this.body.nodes[s].id)}return n}},{key:"findNode",value:function(t){for(var n=[],i=100,s=0,o;this.clusteredNodes[t]!==void 0&&s<i;){if(o=this.body.nodes[t],o===void 0)return[];n.push(o.id),t=this.clusteredNodes[t].clusterId,s++}return o=this.body.nodes[t],o===void 0?[]:(n.push(o.id),fh(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,n){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(n===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(n),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,n){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(n===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),s=0;s<i.length;s++){var o=this.body.edges[i[s]];o.setOptions(n)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var n=[],i=100,s=0;t!==void 0&&this.body.edges[t]!==void 0&&s<i;)n.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,s++;return fh(n).call(n),n}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var n=[t],i=[],s=[],o=100,a=0;n.length>0&&a<o;){var l=n.pop();if(l!==void 0){var u=this.body.edges[l];if(u!==void 0){a++;var h=u.clusteringEdgeReplacingIds;if(h===void 0)s.push(l);else for(var c=0;c<h.length;++c){var d=h[c];_r(n).call(n,h)!==-1||_r(i).call(i,h)!==-1||n.push(d)}i.push(l)}}}return s}},{key:"_getConnectedId",value:function(t,n){return t.toId!=n?t.toId:(t.fromId!=n,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,n=0,i=0,s=0,o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];a.edges.length>s&&(s=a.edges.length),t+=a.edges.length,n+=Math.pow(a.edges.length,2),i+=1}t=t/i,n=n/i;var l=n-Math.pow(t,2),u=Math.sqrt(l),h=Math.floor(t+2*u);return h>s&&(h=s),h}},{key:"_createClusteredEdge",value:function(t,n,i,s,o){var a=os.cloneOptions(i,"edge");Yr(a,s),a.from=t,a.to=n,a.id="clusterEdge:"+by(),o!==void 0&&Yr(a,o);var l=this.body.functions.createEdge(a);return l.clusteringEdgeReplacingIds=[i.id],l.connect(),this.body.edges[l.id]=l,l}},{key:"_clusterEdges",value:function(t,n,i,s){if(n instanceof _p){var o=n,a={};a[o.id]=o,n=a}if(t instanceof Vs){var l=t,u={};u[l.id]=l,t=u}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=i.clusterEdgeProperties),this._createClusterEdges(t,n,i,s);for(var h in n)if(Object.prototype.hasOwnProperty.call(n,h)&&this.body.edges[h]!==void 0){var c=this.body.edges[h];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(this.clusteredNodes[d]={clusterId:i.id,node:this.body.nodes[d]},this.body.nodes[d].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(t!==void 0){var n=this.clusteredNodes[t];if(n!==void 0){var i=n.clusterId;if(i!==void 0)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,n){var i=[];return pr(t,function(s){n(s)&&i.push(s)}),i}},{key:"_updateState",value:function(){var t=this,n,i=[],s={},o=function(w){pr(t.body.nodes,function(b){b.isCluster===!0&&w(b)})};for(n in this.clusteredNodes)if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,n)){var a=this.body.nodes[n];a===void 0&&i.push(n)}o(function(y){for(var w=0;w<i.length;w++)delete y.containedNodes[i[w]]});for(var l=0;l<i.length;l++)delete this.clusteredNodes[i[l]];pr(this.clusteredEdges,function(y){var w=t.body.edges[y];(w===void 0||!w.endPointsValid())&&(s[y]=y)}),o(function(y){pr(y.containedEdges,function(w,b){!w.endPointsValid()&&!s[b]&&(s[b]=b)})}),pr(this.body.edges,function(y,w){var b=!0,T=y.clusteringEdgeReplacingIds;if(T!==void 0){var x=0;pr(T,function(A){var _=t.body.edges[A];_!==void 0&&_.endPointsValid()&&(x+=1)}),b=x>0}(!y.endPointsValid()||!b)&&(s[w]=w)}),o(function(y){pr(s,function(w){delete y.containedEdges[w],pr(y.edges,function(b,T){if(b.id===w){y.edges[T]=null;return}b.clusteringEdgeReplacingIds=t._filter(b.clusteringEdgeReplacingIds,function(x){return!s[x]})}),y.edges=t._filter(y.edges,function(b){return b!==null})})}),pr(s,function(y){delete t.clusteredEdges[y]}),pr(s,function(y){delete t.body.edges[y]});var u=yn(this.body.edges);pr(u,function(y){var w=t.body.edges[y],b=t._isClusteredNode(w.fromId)||t._isClusteredNode(w.toId);if(b!==t._isClusteredEdge(w.id))if(b){var T=t._getClusterNodeForNode(w.fromId);T!==void 0&&t._clusterEdges(t.body.nodes[w.fromId],w,T);var x=t._getClusterNodeForNode(w.toId);x!==void 0&&t._clusterEdges(t.body.nodes[w.toId],w,x)}else delete t._clusterEdges[y],t._restoreEdge(w)});for(var h=!1,c=!0,d=function(){var w=[];o(function(T){var x=yn(T.containedNodes).length,A=T.options.allowSingleNodeCluster===!0;(A&&x<1||!A&&x<2)&&w.push(T.id)});for(var b=0;b<w.length;++b)t.openCluster(w[b],{},!1);c=w.length>0,h=h||c};c;)d();h&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return this.clusteredNodes[t]!==void 0}},{key:"_isClusteredEdge",value:function(t){return this.clusteredEdges[t]!==void 0}}]),e}();function Pmt(){var e;window!==void 0&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),e===void 0?window.requestAnimationFrame=function(r){r()}:window.requestAnimationFrame=e}var Nmt=function(){function e(r,t){ht(this,e),Pmt(),this.body=r,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Hn(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=fl(function(){var i;t.zooming=!1,nt(i=t._requestRedraw).call(i,t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",nt(n=this._requestRedraw).call(n,this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];Uv(n,this.options,t)}}},{key:"_requestNextFrame",value:function(t,n){if(!(typeof window>"u")){var i,s=window;return this.requiresTimeout===!0?i=fl(t,n):s.requestAnimationFrame&&(i=s.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var t;this.renderTimer=this._requestNextFrame(nt(t=this._renderStep).call(t,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var n={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,s,o),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var a=this._drawNodes(i,t),l=a.drawExternalLabels;n.drawExternalLabels=l}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),n.drawExternalLabels!=null&&n.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,s,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var n=this.body.nodes,i;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=n[s],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.nodes,s=this.body.nodeIndices,o,a=[],l=[],u=20,h=this.canvas.DOMtoCanvas({x:-u,y:-u}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),d={top:h.y,left:h.x,bottom:c.y,right:c.x},y=[],w=0;w<s.length;w++)if(o=i[s[w]],o.hover)l.push(s[w]);else if(o.isSelected())a.push(s[w]);else if(n===!0){var b=o.draw(t);b.drawExternalLabel!=null&&y.push(b.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(d)===!0){var T=o.draw(t);T.drawExternalLabel!=null&&y.push(T.drawExternalLabel)}else o.updateBoundingBox(t,o.selected);var x,A=a.length,_=l.length;for(x=0;x<A;x++){o=i[a[x]];var I=o.draw(t);I.drawExternalLabel!=null&&y.push(I.drawExternalLabel)}for(x=0;x<_;x++){o=i[l[x]];var O=o.draw(t);O.drawExternalLabel!=null&&y.push(O.drawExternalLabel)}return{drawExternalLabels:function(){for(var g=0,R=y;g<R.length;g++){var M=R[g];M()}}}}},{key:"_drawEdges",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.draw(t)}}},{key:"_drawArrows",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,_r(t).call(t,"msie 9.0")!=-1?this.requiresTimeout=!0:_r(t).call(t,"safari")!=-1&&_r(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var n=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),e}(),GC={},Rmt={get exports(){return GC},set exports(e){GC=e}},Dmt=$r,Bmt=Dmt.setInterval;(function(e){e.exports=Bmt})(Rmt);var Mmt=Pt(GC);function z$(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function _ee(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}var Lmt=function(){function e(r){ht(this,e),this.body=r,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Hn(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.once("resize",function(i){i.width!==0&&(t.body.view.translation.x=i.width*.5),i.height!==0&&(t.body.view.translation.y=i.height*.5)}),this.body.emitter.on("setSize",nt(n=this.setSize).call(n,this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var n=this;if(t!==void 0){var i=["width","height","autoResize"];Uv(i,this.options,t)}if(this._cleanUp(),this.options.autoResize===!0){var s;if(window.ResizeObserver){var o=new ResizeObserver(function(){var h=n.setSize();h===!0&&n.body.emitter.emit("_requestRedraw")}),a=this.frame;o.observe(a),this._cleanupCallbacks.push(function(){o.unobserve(a)})}else{var l=Mmt(function(){var h=n.setSize();h===!0&&n.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(l)})}var u=nt(s=this._onResize).call(s,this);Vft(window,"resize",u),this._cleanupCallbacks.push(function(){Gft(window,"resize",u)})}}},{key:"_cleanUp",value:function(){var t,n,i;Ur(t=fh(n=su(i=this._cleanupCallbacks).call(i,0)).call(n)).call(t,function(s){try{s()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;t!=1&&n!=1?i=this.cameraState.scale*.5*(t+n):t!=1?i=this.cameraState.scale*t:n!=1&&(i=this.cameraState.scale*n),this.body.view.scale=i;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(_r(t).call(t,"%")!==-1||_r(t).call(t,"px")!==-1)return t;if(_r(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new $p(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:$p.DIRECTION_ALL}),z$(this.hammer,function(n){t.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){t.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){t.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){t.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){t.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){t.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){t.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){t.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("wheel",function(n){t.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){t.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){t.body.eventListeners.onContext(n)}),this.hammerFrame=new $p(this.frame),_ee(this.hammerFrame,function(n){t.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),n=this._prepareValue(n);var i=!1,s=this.frame.canvas.width,o=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||n!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=t,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==l||this.frame.canvas.height!==u)&&this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,i=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),e}();function Fmt(e,r){var t=Hn({nodes:r,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},e??{});if(!Lr(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=r),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}var jmt=function(){function e(r,t){var n,i=this,s;ht(this,e),this.body=r,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",nt(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",nt(s=this.releaseNode).call(s,this))}return dt(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=Fmt(t,this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight,o,a;if(i===0||s===0)a=1,o=os.getRange(this.body.nodes,t.nodes);else if(n===!0){var l=0;for(var u in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,u)){var h=this.body.nodes[u];h.predefinedPosition===!0&&(l+=1)}if(l>.5*this.body.nodeIndices.length){this.fit(t,!1);return}o=os.getRange(this.body.nodes,t.nodes);var c=this.body.nodeIndices.length;a=12.662/(c+7.4147)+.0964822;var d=Math.min(i/600,s/600);a*=d}else{this.body.emitter.emit("_resizeNodes"),o=os.getRange(this.body.nodes,t.nodes);var y=Math.abs(o.maxX-o.minX)*1.1,w=Math.abs(o.maxY-o.minY)*1.1,b=i/y,T=s/w;a=b<=T?b:T}a>t.maxZoomLevel?a=t.maxZoomLevel:a<t.minZoomLevel&&(a=t.minZoomLevel);var x=os.findCenter(o),A={position:x,scale:a,animation:t.animation};this.moveTo(A)}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};n.position=i,n.lockedOnNode=t,this.moveTo(n)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(t===void 0){t={};return}if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!Zf(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!Zf(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!Zf(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!Zf(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(t!==void 0){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.position.x,y:n.y-t.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},t.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=nt(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=nt(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.x,y:n.y-t.y},s=this.body.view.translation,o={x:s.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var n=Xft[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var i;this.viewFunction=nt(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function jj(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(h){u(h,"keydown")},l=function(h){u(h,"keyup")},u=function(h,c){if(i[c][h.keyCode]!==void 0){for(var d=i[c][h.keyCode],y=0;y<d.length;y++)(d[y].shift===void 0||d[y].shift==!0&&h.shiftKey==!0||d[y].shift==!1&&h.shiftKey==!1)&&d[y].fn(h);r==!0&&h.preventDefault()}};return n.bind=function(h,c,d){if(d===void 0&&(d="keydown"),s[h]===void 0)throw new Error("unsupported key: "+h);i[d][s[h].code]===void 0&&(i[d][s[h].code]=[]),i[d][s[h].code].push({fn:c,shift:s[h].shift})},n.bindAll=function(h,c){c===void 0&&(c="keydown");for(var d in s)s.hasOwnProperty(d)&&n.bind(d,h,c)},n.getKey=function(h){for(var c in s)if(s.hasOwnProperty(c)){if(h.shiftKey==!0&&s[c].shift==!0&&h.keyCode==s[c].code)return c;if(h.shiftKey==!1&&s[c].shift==!1&&h.keyCode==s[c].code)return c;if(h.keyCode==s[c].code&&c=="shift")return c}return"unknown key, currently not supported"},n.unbind=function(h,c,d){if(d===void 0&&(d="keydown"),s[h]===void 0)throw new Error("unsupported key: "+h);if(c!==void 0){var y=[],w=i[d][s[h].code];if(w!==void 0)for(var b=0;b<w.length;b++)w[b].fn==c&&w[b].shift==s[h].shift||y.push(i[d][s[h].code][b]);i[d][s[h].code]=y}else i[d][s[h].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",a,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",a,!0),t.addEventListener("keyup",l,!0),n}var zmt=function(){function e(r,t){var n=this;ht(this,e),this.body=r,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return dt(e,[{key:"setOptions",value:function(t){t!==void 0&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var n=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var s=0;s<n.length;s++){this.navigationDOM[n[s]]=document.createElement("div"),this.navigationDOM[n[s]].className="vis-button vis-"+n[s],this.navigationDOM.wrapper.appendChild(this.navigationDOM[n[s]]);var o=new $p(this.navigationDOM[n[s]]);if(i[s]==="_fit"){var a;z$(o,nt(a=this._fit).call(a,this))}else{var l;z$(o,nt(l=this.bindToRedraw).call(l,this,i[s]))}this.navigationHammers.push(o)}var u=new $p(this.canvas.frame);_ee(u,function(){t._stopMovement()}),this.navigationHammers.push(u),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){if(this.boundFunctions[t]===void 0){var n;this.boundFunctions[t]=nt(n=this[t]).call(n,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,n=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,n=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=jj({container:window,preventDefault:!0}):this.keycharm=jj({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var n,i,s,o,a,l,u,h,c,d,y,w,b,T,x,A,_,I,O,C,g,R,M,L;nt(n=this.keycharm).call(n,"up",function(){t.bindToRedraw("_moveUp")},"keydown"),nt(i=this.keycharm).call(i,"down",function(){t.bindToRedraw("_moveDown")},"keydown"),nt(s=this.keycharm).call(s,"left",function(){t.bindToRedraw("_moveLeft")},"keydown"),nt(o=this.keycharm).call(o,"right",function(){t.bindToRedraw("_moveRight")},"keydown"),nt(a=this.keycharm).call(a,"=",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(l=this.keycharm).call(l,"num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(u=this.keycharm).call(u,"num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(h=this.keycharm).call(h,"-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(c=this.keycharm).call(c,"[",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(d=this.keycharm).call(d,"]",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(y=this.keycharm).call(y,"pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(w=this.keycharm).call(w,"pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(b=this.keycharm).call(b,"up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),nt(T=this.keycharm).call(T,"down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),nt(x=this.keycharm).call(x,"left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),nt(A=this.keycharm).call(A,"right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),nt(_=this.keycharm).call(_,"=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(I=this.keycharm).call(I,"num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(O=this.keycharm).call(O,"num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(C=this.keycharm).call(C,"-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(g=this.keycharm).call(g,"[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(R=this.keycharm).call(R,"]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(M=this.keycharm).call(M,"pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(L=this.keycharm).call(L,"pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}]),e}();function Hmt(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Umt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Umt(e,r){var t;if(e){if(typeof e=="string")return zj(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zj(e,r)}}function zj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Wmt=function(){function e(r,t,n){var i,s,o,a,l,u,h,c,d,y,w,b,T;ht(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new zmt(r,t),this.body.eventListeners.onTap=nt(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=nt(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=nt(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=nt(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=nt(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=nt(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=nt(h=this.onDragEnd).call(h,this),this.body.eventListeners.onMouseWheel=nt(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=nt(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=nt(y=this.onMouseMove).call(y,this),this.body.eventListeners.onRelease=nt(w=this.onRelease).call(w,this),this.body.eventListeners.onContext=nt(b=this.onContext).call(b,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=nt(T=this.getPointer).call(T,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Hn(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];M$(n,this.options,t),Ro(this.options,t,"keyboard"),t.tooltip&&(Hn(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=bC(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-Kft(this.canvas.frame.canvas),y:t.y-qft(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n)}},{key:"onDoubleTap",value:function(t){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,n)}},{key:"onHold",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n),this.selectionHandler.generateClickEvent("hold",t,n)}},{key:"onRelease",value:function(t){if(new Date().valueOf()-this.touchTime>10){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,n),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(t){var n=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,n)}},{key:"checkSelectionChanges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,n){var i=function(o,a){for(var l=[],u=0;u<o.length;u++){var h=o[u];_r(a).call(a,h)===-1&&l.push(h)}return l};return{nodes:i(t.nodes,n.nodes),edges:i(t.edges,n.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(t);var n=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Hn({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(n!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=n.id,n.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[n.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var s=Hmt(this.selectionHandler.getSelectedNodes()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l={id:a.id,node:a,x:a.x,y:a.y,xFixed:a.options.fixed.x,yFixed:a.options.fixed.y};a.options.fixed.x=!0,a.options.fixed.y=!0,this.drag.selection.push(l)}}catch(u){s.e(u)}finally{s.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var n=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;Ur(s).call(s,function(h){var c=h.node;h.xFixed===!1&&(c.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(h.x)+o)),h.yFixed===!1&&(c.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(h.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}var l=i.x-this.drag.pointer.x,u=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+l,y:this.drag.translation.y+u},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var n=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var s=this.body.selectionBox.position,o={minX:Math.min(s.start.x,s.end.x),minY:Math.min(s.start.y,s.end.y),maxX:Math.max(s.start.x,s.end.x),maxY:Math.max(s.start.y,s.end.y)},a=Os(i=this.body.nodeIndices).call(i,function(h){var c=n.body.nodes[h];return c.x>=o.minX&&c.x<=o.maxX&&c.y>=o.minY&&c.y<=o.maxY});Ur(a).call(a,function(h){return n.selectionHandler.selectObject(n.body.nodes[h])});var l=this.getPointer(t.center);this.selectionHandler.commitAndEmit(l,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var u=this.drag.selection;u&&u.length?(Ur(u).call(u,function(h){h.node.options.fixed.x=h.xFixed,h.node.options.fixed.y=h.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var n=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,n)}},{key:"zoom",value:function(t,n){if(this.options.zoomView===!0){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var s=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,a=t/i,l=(1-a)*n.x+o.x*a,u=(1-a)*n.y+o.y*a;if(this.body.view.scale=t,this.body.view.translation={x:l,y:u},s!=null){var h=this.canvas.canvasToDOM(s);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:n}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:n})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){if(t.deltaY!==0){var n=this.body.view.scale;n*=1+(t.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var n=this,i=this.getPointer({x:t.clientX,y:t.clientY}),s=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(s=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),s===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=fl(function(){return n._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var n=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),s={left:n,top:i,right:n,bottom:i},o=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,l="node";if(this.popupObj===void 0){for(var u=this.body.nodeIndices,h=this.body.nodes,c,d=[],y=0;y<u.length;y++)c=h[u[y]],c.isOverlappingWith(s)===!0&&(a=!0,c.getTitle()!==void 0&&d.push(u[y]));d.length>0&&(this.popupObj=h[d[d.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var w=this.body.edgeIndices,b=this.body.edges,T,x=[],A=0;A<w.length;A++)T=b[w[A]],T.isOverlappingWith(s)===!0&&T.connected===!0&&T.getTitle()!==void 0&&x.push(w[A]);x.length>0&&(this.popupObj=b[x[x.length-1]],l="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new sht(this.canvas.frame)),this.popup.popupTargetType=l,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var n=this.selectionHandler._pointerToPositionObject(t),i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(n),i===!0)){var s=this.selectionHandler.getNodeAt(t);i=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(n));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),YC={},Kmt={get exports(){return YC},set exports(e){YC=e}},qmt=TN,Vmt=aee;qmt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Vmt);var Gmt=$r,Ymt=Gmt.Set,Zmt=Ymt,Xmt=Zmt;(function(e){e.exports=Xmt})(Kmt);var Lf=Pt(YC),ZC={},Jmt={get exports(){return ZC},set exports(e){ZC=e}},Qmt=Sr,Hj=IN,C1=rv.getWeakData,e0t=kN,t0t=uo,r0t=u0,yT=$i,n0t=SN,xee=Yc,Uj=_i,Eee=Uh,i0t=Eee.set,s0t=Eee.getterFor,o0t=xee.find,a0t=xee.findIndex,l0t=Qmt([].splice),u0t=0,P1=function(e){return e.frozen||(e.frozen=new See)},See=function(){this.entries=[]},mT=function(e,r){return o0t(e.entries,function(t){return t[0]===r})};See.prototype={get:function(e){var r=mT(this,e);if(r)return r[1]},has:function(e){return!!mT(this,e)},set:function(e,r){var t=mT(this,e);t?t[1]=r:this.entries.push([e,r])},delete:function(e){var r=a0t(this.entries,function(t){return t[0]===e});return~r&&l0t(this.entries,r,1),!!~r}};var c0t={getConstructor:function(e,r,t,n){var i=e(function(l,u){e0t(l,s),i0t(l,{type:r,id:u0t++,frozen:void 0}),r0t(u)||n0t(u,l[n],{that:l,AS_ENTRIES:t})}),s=i.prototype,o=s0t(r),a=function(l,u,h){var c=o(l),d=C1(t0t(u),!0);return d===!0?P1(c).set(u,h):d[c.id]=h,l};return Hj(s,{delete:function(l){var u=o(this);if(!yT(l))return!1;var h=C1(l);return h===!0?P1(u).delete(l):h&&Uj(h,u.id)&&delete h[u.id]},has:function(u){var h=o(this);if(!yT(u))return!1;var c=C1(u);return c===!0?P1(h).has(u):c&&Uj(c,h.id)}}),Hj(s,t?{get:function(u){var h=o(this);if(yT(u)){var c=C1(u);return c===!0?P1(h).get(u):c?c[h.id]:void 0}},set:function(u,h){return a(this,u,h)}}:{add:function(u){return a(this,u,!0)}}),i}},f0t=nee,Wj=Gn,$w=Sr,Kj=IN,h0t=rv,d0t=TN,kee=c0t,N1=$i,R1=Uh.enforce,p0t=Er,v0t=qX,N0=Object,g0t=Array.isArray,D1=N0.isExtensible,Tee=N0.isFrozen,y0t=N0.isSealed,Iee=N0.freeze,m0t=N0.seal,qj={},Vj={},b0t=!Wj.ActiveXObject&&"ActiveXObject"in Wj,Dg,Aee=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Oee=d0t("WeakMap",Aee,kee),Ud=Oee.prototype,_w=$w(Ud.set),w0t=function(){return f0t&&p0t(function(){var e=Iee([]);return _w(new Oee,e,1),!Tee(e)})};if(v0t)if(b0t){Dg=kee.getConstructor(Aee,"WeakMap",!0),h0t.enable();var Gj=$w(Ud.delete),B1=$w(Ud.has),Yj=$w(Ud.get);Kj(Ud,{delete:function(e){if(N1(e)&&!D1(e)){var r=R1(this);return r.frozen||(r.frozen=new Dg),Gj(this,e)||r.frozen.delete(e)}return Gj(this,e)},has:function(r){if(N1(r)&&!D1(r)){var t=R1(this);return t.frozen||(t.frozen=new Dg),B1(this,r)||t.frozen.has(r)}return B1(this,r)},get:function(r){if(N1(r)&&!D1(r)){var t=R1(this);return t.frozen||(t.frozen=new Dg),B1(this,r)?Yj(this,r):t.frozen.get(r)}return Yj(this,r)},set:function(r,t){if(N1(r)&&!D1(r)){var n=R1(this);n.frozen||(n.frozen=new Dg),B1(this,r)?_w(this,r,t):n.frozen.set(r,t)}else _w(this,r,t);return this}})}else w0t()&&Kj(Ud,{set:function(r,t){var n;return g0t(r)&&(Tee(r)?n=qj:y0t(r)&&(n=Vj)),_w(this,r,t),n==qj&&Iee(r),n==Vj&&m0t(r),this}});var $0t=$r,_0t=$0t.WeakMap,x0t=_0t,E0t=x0t;(function(e){e.exports=E0t})(Jmt);var wy=Pt(ZC);function Gr(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function XC(e,r,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,t):i?i.value=t:r.set(e,t),t}function JC(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=S0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function S0t(e,r){var t;if(e){if(typeof e=="string")return Zj(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zj(e,r)}}function Zj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Tf,Ao,ac,lc,xw;function Xj(e,r){var t=new Lf,n=JC(r),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e.has(s)||t.add(s)}}catch(o){n.e(o)}finally{n.f()}return t}var Jj=function(){function e(){ht(this,e),Tf.set(this,new Lf),Ao.set(this,new Lf)}return dt(e,[{key:"size",get:function(){return Gr(this,Ao,"f").size}},{key:"add",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Gr(this,Ao,"f").add(a)}}},{key:"delete",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Gr(this,Ao,"f").delete(a)}}},{key:"clear",value:function(){Gr(this,Ao,"f").clear()}},{key:"getSelection",value:function(){return nl(Gr(this,Ao,"f"))}},{key:"getChanges",value:function(){return{added:nl(Xj(Gr(this,Tf,"f"),Gr(this,Ao,"f"))),deleted:nl(Xj(Gr(this,Ao,"f"),Gr(this,Tf,"f"))),previous:nl(new Lf(Gr(this,Tf,"f"))),current:nl(new Lf(Gr(this,Ao,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();XC(this,Tf,Gr(this,Ao,"f"),"f"),XC(this,Ao,new Lf(Gr(this,Tf,"f")),"f");var n=JC(t.added),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s.select()}}catch(u){n.e(u)}finally{n.f()}var o=JC(t.deleted),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.unselect()}}catch(u){o.e(u)}finally{o.f()}return t}}]),e}();Tf=new wy,Ao=new wy;var k0t=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ht(this,e),ac.set(this,new Jj),lc.set(this,new Jj),xw.set(this,void 0),XC(this,xw,r,"f")}return dt(e,[{key:"sizeNodes",get:function(){return Gr(this,ac,"f").size}},{key:"sizeEdges",get:function(){return Gr(this,lc,"f").size}},{key:"getNodes",value:function(){return Gr(this,ac,"f").getSelection()}},{key:"getEdges",value:function(){return Gr(this,lc,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=Gr(this,ac,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=Gr(this,lc,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){Gr(this,ac,"f").delete(t)}},{key:"deleteEdges",value:function(t){Gr(this,lc,"f").delete(t)}},{key:"clear",value:function(){Gr(this,ac,"f").clear(),Gr(this,lc,"f").clear()}},{key:"commit",value:function(){for(var t,n,i={nodes:Gr(this,ac,"f").commit(),edges:Gr(this,lc,"f").commit()},s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(t=Gr(this,xw,"f")).call.apply(t,cN(n=[this,i]).call(n,o)),i}}]),e}();ac=new wy,lc=new wy,xw=new wy;function Qj(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=T0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function T0t(e,r){var t;if(e){if(typeof e=="string")return ez(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ez(e,r)}}function ez(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var I0t=function(){function e(r,t){var n=this;ht(this,e),this.body=r,this.canvas=t,this._selectionAccumulator=new k0t,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Hn(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return dt(e,[{key:"setOptions",value:function(t){if(t!==void 0){var n=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];Uv(n,this.options,t)}}},{key:"selectOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(n=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return n}},{key:"selectAdditionalOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(n=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return n}},{key:"_initBaseEvent",value:function(t,n){var i={};return i.pointer={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)},i.event=t,i}},{key:"generateClickEvent",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this._initBaseEvent(n,i);if(o===!0)a.nodes=[],a.edges=[];else{var l=this.getSelection();a.nodes=l.nodes,a.edges=l.edges}s!==void 0&&(a.previousSelection=s),t=="click"&&(a.items=this.getClickedItems(i)),n.controlEdge!==void 0&&(a.controlEdge=n.controlEdge),this.body.emitter.emit(t,a)}},{key:"selectObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(t!==void 0){if(t instanceof Vs){if(n===!0){var i;(i=this._selectionAccumulator).addEdges.apply(i,nl(t.edges))}this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var n=[],i=this.body.nodes,s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}return n}},{key:"_pointerToPositionObject",value:function(t){var n=this.canvas.DOMtoCanvas(t);return{left:n.x-1,top:n.y+1,right:n.x+1,bottom:n.y-1}}},{key:"getNodeAt",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._pointerToPositionObject(t),s=this._getAllNodesOverlappingWith(i);if(s.length>0)return n===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}},{key:"_getEdgesOverlappingWith",value:function(t,n){for(var i=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var o=this.body.edgeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var n=[];return this._getEdgesOverlappingWith(t,n),n}},{key:"getEdgeAt",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.canvas.DOMtoCanvas(t),s=10,o=null,a=this.body.edges,l=0;l<this.body.edgeIndices.length;l++){var u=this.body.edgeIndices[l],h=a[u];if(h.connected){var c=h.from.x,d=h.from.y,y=h.to.x,w=h.to.y,b=h.edgeType.getDistanceToEdge(c,d,y,w,i.x,i.y);b<s&&(o=u,s=b)}}if(o!==null)return n===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(t){t instanceof Vs?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){if(t instanceof Vs){var n;this._selectionAccumulator.deleteNodes(t),(n=this._selectionAccumulator).deleteEdges.apply(n,nl(t.edges))}else this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n);i.hover===!0&&(i.hover=!1,i instanceof Vs?(s.node=i.id,this.body.emitter.emit("blurNode",s)):(s.edge=i.id,this.body.emitter.emit("blurEdge",s)))}},{key:"emitHoverEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n),o=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof Vs?(s.node=i.id,this.body.emitter.emit("hoverNode",s)):(s.edge=i.id,this.body.emitter.emit("hoverEdge",s))),o}},{key:"hoverObject",value:function(t,n){var i=this.getNodeAt(n);i===void 0&&(i=this.getEdgeAt(n));var s=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(i===void 0||i instanceof Vs&&i.id!=o||i instanceof _p)&&(this.emitBlurEvent(t,n,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],s=!0);for(var a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(s===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(i===void 0||i instanceof _p&&i.id!=a||i instanceof Vs&&!i.hover)&&(this.emitBlurEvent(t,n,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],s=!0));if(i!==void 0){var l=yn(this.hoverObj.edges).length,u=yn(this.hoverObj.nodes).length,h=i instanceof _p&&l===0&&u===0,c=i instanceof Vs&&l===0&&u===0;(s||h||c)&&(s=this.emitHoverEvent(t,n,i)),i instanceof Vs&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}s===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,n){var i=!1,s=this._selectionAccumulator.commit(),o={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",n,t,o),i=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",n,t,o),i=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",n,t),i=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",n,t),i=!0),i===!0&&this.generateClickEvent("select",n,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return Xp(t=this._selectionAccumulator.getNodes()).call(t,function(n){return n.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return Xp(t=this._selectionAccumulator.getEdges()).call(t,function(n){return n.id})}},{key:"setSelection",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((n.unselectAll||n.unselectAll===void 0)&&this.unselectAll(),t.nodes){var i=Qj(t.nodes),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.body.nodes[o];if(!a)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(a,n.highlightEdges)}}catch(d){i.e(d)}finally{i.f()}}if(t.edges){var l=Qj(t.edges),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,c=this.body.edges[h];if(!c)throw new RangeError('Edge with id "'+h+'" not found');this.selectObject(c)}}catch(d){l.e(d)}finally{l.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:n})}},{key:"selectEdges",value:function(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var n in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,n.id)||this._selectionAccumulator.deleteEdges(n)}},{key:"getClickedItems",value:function(t){for(var n=this.canvas.DOMtoCanvas(t),i=[],s=this.body.nodeIndices,o=this.body.nodes,a=s.length-1;a>=0;a--){var l=o[s[a]],u=l.getItemsOnPoint(n);i.push.apply(i,u)}for(var h=this.body.edgeIndices,c=this.body.edges,d=h.length-1;d>=0;d--){var y=c[h[d]],w=y.getItemsOnPoint(n);i.push.apply(i,w)}return i}}]),e}(),QC={},A0t={get exports(){return QC},set exports(e){QC=e}},tz=vJ,O0t=Math.floor,e3=function(e,r){var t=e.length,n=O0t(t/2);return t<8?C0t(e,r):P0t(e,e3(tz(e,0,n),r),e3(tz(e,n),r),r)},C0t=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},P0t=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},N0t=e3,R0t=f0,rz=R0t.match(/firefox\/(\d+)/i),D0t=!!rz&&+rz[1],B0t=f0,M0t=/MSIE|Trident/.test(B0t),L0t=f0,nz=L0t.match(/AppleWebKit\/(\d+)\./),F0t=!!nz&&+nz[1],j0t=jt,Cee=Sr,z0t=zh,H0t=lo,iz=Pa,U0t=lQ,sz=wl,RN=Er,W0t=N0t,K0t=zv,oz=D0t,q0t=M0t,az=h0,lz=F0t,wc=[],uz=Cee(wc.sort),V0t=Cee(wc.push),G0t=RN(function(){wc.sort(void 0)}),Y0t=RN(function(){wc.sort(null)}),Z0t=K0t("sort"),Pee=!RN(function(){if(az)return az<70;if(!(oz&&oz>3)){if(q0t)return!0;if(lz)return lz<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)wc.push({k:t+i,v:n})}for(wc.sort(function(s,o){return o.v-s.v}),i=0;i<wc.length;i++)t=wc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),X0t=G0t||!Y0t||!Z0t||!Pee,J0t=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:sz(r)>sz(t)?1:-1}};j0t({target:"Array",proto:!0,forced:X0t},{sort:function(r){r!==void 0&&z0t(r);var t=H0t(this);if(Pee)return r===void 0?uz(t):uz(t,r);var n=[],i=iz(t),s,o;for(o=0;o<i;o++)o in t&&V0t(n,t[o]);for(W0t(n,J0t(r)),s=iz(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)U0t(t,o++);return t}});var Q0t=xi,ebt=Q0t("Array").sort,tbt=Rn,rbt=ebt,bT=Array.prototype,nbt=function(e){var r=e.sort;return e===bT||tbt(bT,e)&&r===bT.sort?rbt:r},ibt=nbt,sbt=ibt;(function(e){e.exports=sbt})(A0t);var wT=Pt(QC),t3={},obt={get exports(){return t3},set exports(e){t3=e}},abt=zh,lbt=lo,ubt=Ex,cbt=Pa,fbt=TypeError,cz=function(e){return function(r,t,n,i){abt(t);var s=lbt(r),o=ubt(s),a=cbt(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw fbt("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},hbt={left:cz(!1),right:cz(!0)},dbt=Su,pbt=typeof process<"u"&&dbt(process)=="process",vbt=jt,gbt=hbt.left,ybt=zv,fz=h0,mbt=pbt,bbt=!mbt&&fz>79&&fz<83,wbt=bbt||!ybt("reduce");vbt({target:"Array",proto:!0,forced:wbt},{reduce:function(r){var t=arguments.length;return gbt(this,r,t,t>1?arguments[1]:void 0)}});var $bt=xi,_bt=$bt("Array").reduce,xbt=Rn,Ebt=_bt,$T=Array.prototype,Sbt=function(e){var r=e.reduce;return e===$T||xbt($T,e)&&r===$T.reduce?Ebt:r},kbt=Sbt,Tbt=kbt;(function(e){e.exports=Tbt})(obt);var Nee=Pt(t3),cm={},Ibt={get exports(){return cm},set exports(e){cm=e}},Ree={};(function(e){(function(r,t){t(e)})(r5,function(r){r.__esModule=!0,r.sort=T;function t(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}var n=32,i=7,s=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(x){return x<1e5?x<100?x<10?0:1:x<1e4?x<1e3?2:3:4:x<1e7?x<1e6?5:6:x<1e9?x<1e8?7:8:9}function l(x,A){if(x===A)return 0;if(~~x===x&&~~A===A){if(x===0||A===0)return x<A?-1:1;if(x<0||A<0){if(A>=0)return-1;if(x>=0)return 1;x=-x,A=-A}var _=a(x),I=a(A),O=0;return _<I?(x*=o[I-_-1],A/=10,O=-1):_>I&&(A*=o[_-I-1],x/=10,O=1),x===A?O:x<A?-1:1}var C=String(x),g=String(A);return C===g?0:C<g?-1:1}function u(x){for(var A=0;x>=n;)A|=x&1,x>>=1;return x+A}function h(x,A,_,I){var O=A+1;if(O===_)return 1;if(I(x[O++],x[A])<0){for(;O<_&&I(x[O],x[O-1])<0;)O++;c(x,A,O)}else for(;O<_&&I(x[O],x[O-1])>=0;)O++;return O-A}function c(x,A,_){for(_--;A<_;){var I=x[A];x[A++]=x[_],x[_--]=I}}function d(x,A,_,I,O){for(I===A&&I++;I<_;I++){for(var C=x[I],g=A,R=I;g<R;){var M=g+R>>>1;O(C,x[M])<0?R=M:g=M+1}var L=I-g;switch(L){case 3:x[g+3]=x[g+2];case 2:x[g+2]=x[g+1];case 1:x[g+1]=x[g];break;default:for(;L>0;)x[g+L]=x[g+L-1],L--}x[g]=C}}function y(x,A,_,I,O,C){var g=0,R=0,M=1;if(C(x,A[_+O])>0){for(R=I-O;M<R&&C(x,A[_+O+M])>0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R),g+=O,M+=O}else{for(R=O+1;M<R&&C(x,A[_+O-M])<=0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R);var L=g;g=O-M,M=O-L}for(g++;g<M;){var W=g+(M-g>>>1);C(x,A[_+W])>0?g=W+1:M=W}return M}function w(x,A,_,I,O,C){var g=0,R=0,M=1;if(C(x,A[_+O])<0){for(R=O+1;M<R&&C(x,A[_+O-M])<0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R);var L=g;g=O-M,M=O-L}else{for(R=I-O;M<R&&C(x,A[_+O+M])>=0;)g=M,M=(M<<1)+1,M<=0&&(M=R);M>R&&(M=R),g+=O,M+=O}for(g++;g<M;){var W=g+(M-g>>>1);C(x,A[_+W])<0?M=W:g=W+1}return M}var b=function(){function x(A,_){t(this,x),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=s,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=A,this.compare=_,this.length=A.length,this.length<2*s&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return x.prototype.pushRun=function(_,I){this.runStart[this.stackSize]=_,this.runLength[this.stackSize]=I,this.stackSize+=1},x.prototype.mergeRuns=function(){for(;this.stackSize>1;){var _=this.stackSize-2;if(_>=1&&this.runLength[_-1]<=this.runLength[_]+this.runLength[_+1]||_>=2&&this.runLength[_-2]<=this.runLength[_]+this.runLength[_-1])this.runLength[_-1]<this.runLength[_+1]&&_--;else if(this.runLength[_]>this.runLength[_+1])break;this.mergeAt(_)}},x.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var _=this.stackSize-2;_>0&&this.runLength[_-1]<this.runLength[_+1]&&_--,this.mergeAt(_)}},x.prototype.mergeAt=function(_){var I=this.compare,O=this.array,C=this.runStart[_],g=this.runLength[_],R=this.runStart[_+1],M=this.runLength[_+1];this.runLength[_]=g+M,_===this.stackSize-3&&(this.runStart[_+1]=this.runStart[_+2],this.runLength[_+1]=this.runLength[_+2]),this.stackSize--;var L=w(O[R],O,C,g,0,I);C+=L,g-=L,g!==0&&(M=y(O[C+g-1],O,R,M,M-1,I),M!==0&&(g<=M?this.mergeLow(C,g,R,M):this.mergeHigh(C,g,R,M)))},x.prototype.mergeLow=function(_,I,O,C){var g=this.compare,R=this.array,M=this.tmp,L=0;for(L=0;L<I;L++)M[L]=R[_+L];var W=0,X=O,te=_;if(R[te++]=R[X++],--C===0){for(L=0;L<I;L++)R[te+L]=M[W+L];return}if(I===1){for(L=0;L<C;L++)R[te+L]=R[X+L];R[te+C]=M[W];return}for(var J=this.minGallop;;){var j=0,Z=0,se=!1;do if(g(R[X],M[W])<0){if(R[te++]=R[X++],Z++,j=0,--C===0){se=!0;break}}else if(R[te++]=M[W++],j++,Z=0,--I===1){se=!0;break}while((j|Z)<J);if(se)break;do{if(j=w(R[X],M,W,I,0,g),j!==0){for(L=0;L<j;L++)R[te+L]=M[W+L];if(te+=j,W+=j,I-=j,I<=1){se=!0;break}}if(R[te++]=R[X++],--C===0){se=!0;break}if(Z=y(M[W],R,X,C,0,g),Z!==0){for(L=0;L<Z;L++)R[te+L]=R[X+L];if(te+=Z,X+=Z,C-=Z,C===0){se=!0;break}}if(R[te++]=M[W++],--I===1){se=!0;break}J--}while(j>=i||Z>=i);if(se)break;J<0&&(J=0),J+=2}if(this.minGallop=J,J<1&&(this.minGallop=1),I===1){for(L=0;L<C;L++)R[te+L]=R[X+L];R[te+C]=M[W]}else{if(I===0)throw new Error("mergeLow preconditions were not respected");for(L=0;L<I;L++)R[te+L]=M[W+L]}},x.prototype.mergeHigh=function(_,I,O,C){var g=this.compare,R=this.array,M=this.tmp,L=0;for(L=0;L<C;L++)M[L]=R[O+L];var W=_+I-1,X=C-1,te=O+C-1,J=0,j=0;if(R[te--]=R[W--],--I===0){for(J=te-(C-1),L=0;L<C;L++)R[J+L]=M[L];return}if(C===1){for(te-=I,W-=I,j=te+1,J=W+1,L=I-1;L>=0;L--)R[j+L]=R[J+L];R[te]=M[X];return}for(var Z=this.minGallop;;){var se=0,Ee=0,me=!1;do if(g(M[X],R[W])<0){if(R[te--]=R[W--],se++,Ee=0,--I===0){me=!0;break}}else if(R[te--]=M[X--],Ee++,se=0,--C===1){me=!0;break}while((se|Ee)<Z);if(me)break;do{if(se=I-w(M[X],R,_,I,I-1,g),se!==0){for(te-=se,W-=se,I-=se,j=te+1,J=W+1,L=se-1;L>=0;L--)R[j+L]=R[J+L];if(I===0){me=!0;break}}if(R[te--]=M[X--],--C===1){me=!0;break}if(Ee=C-y(R[W],M,0,C,C-1,g),Ee!==0){for(te-=Ee,X-=Ee,C-=Ee,j=te+1,J=X+1,L=0;L<Ee;L++)R[j+L]=M[J+L];if(C<=1){me=!0;break}}if(R[te--]=R[W--],--I===0){me=!0;break}Z--}while(se>=i||Ee>=i);if(me)break;Z<0&&(Z=0),Z+=2}if(this.minGallop=Z,Z<1&&(this.minGallop=1),C===1){for(te-=I,W-=I,j=te+1,J=W+1,L=I-1;L>=0;L--)R[j+L]=R[J+L];R[te]=M[X]}else{if(C===0)throw new Error("mergeHigh preconditions were not respected");for(J=te-(C-1),L=0;L<C;L++)R[J+L]=M[L]}},x}();function T(x,A,_,I){if(!Array.isArray(x))throw new TypeError("Can only sort arrays");A?typeof A!="function"&&(I=_,_=A,A=l):A=l,_||(_=0),I||(I=x.length);var O=I-_;if(!(O<2)){var C=0;if(O<n){C=h(x,_,I,A),d(x,_,I,_+C,A);return}var g=new b(x,A),R=u(O);do{if(C=h(x,_,I,A),C<R){var M=O;M>R&&(M=R),d(x,_,_+M,_+C,A),C=M}g.pushRun(_,C),g.mergeRuns(),O-=C,_+=C}while(O!==0);g.forceMergeRuns()}}})})(Ree);(function(e){e.exports=Ree})(Ibt);var hz=Pt(cm);function Dee(e){var r=Abt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=Ke(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Abt(){if(typeof Reflect>"u"||!Ke||Ke.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ke(Boolean,[],function(){})),!0}catch{return!1}}var Bee=function(){function e(){ht(this,e)}return dt(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,n,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,n){this.fake_use(t,n),this.abstract()}},{key:"shift",value:function(t,n){this.fake_use(t,n),this.abstract()}}]),e}(),Obt=function(e){Or(t,e);var r=Dee(t);function t(n){var i;return ht(this,t),i=r.call(this),i.layout=n,i}return dt(t,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.x=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_x,max:s.max_x}}},{key:"sort",value:function(i){cm.sort(i,function(s,o){return s.x-o.x})}},{key:"fix",value:function(i,s){i.y=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.y=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].x+=s}}]),t}(Bee),Cbt=function(e){Or(t,e);var r=Dee(t);function t(n){var i;return ht(this,t),i=r.call(this),i.layout=n,i}return dt(t,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.y=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_y,max:s.max_y}}},{key:"sort",value:function(i){cm.sort(i,function(s,o){return s.y-o.y})}},{key:"fix",value:function(i,s){i.x=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.x=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].y+=s}}]),t}(Bee),r3={},Pbt={get exports(){return r3},set exports(e){r3=e}},Nbt=jt,Rbt=Yc.every,Dbt=zv,Bbt=Dbt("every");Nbt({target:"Array",proto:!0,forced:!Bbt},{every:function(r){return Rbt(this,r,arguments.length>1?arguments[1]:void 0)}});var Mbt=xi,Lbt=Mbt("Array").every,Fbt=Rn,jbt=Lbt,_T=Array.prototype,zbt=function(e){var r=e.every;return e===_T||Fbt(_T,e)&&r===_T.every?jbt:r},Hbt=zbt,Ubt=Hbt;(function(e){e.exports=Ubt})(Pbt);var Mee=Pt(r3);function Wbt(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Kbt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Kbt(e,r){var t;if(e){if(typeof e=="string")return dz(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dz(e,r)}}function dz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function qbt(e,r){var t=new Lf;return Ur(e).call(e,function(n){var i;Ur(i=n.edges).call(i,function(s){s.connected&&t.add(s)})}),Ur(t).call(t,function(n){var i=n.from.id,s=n.to.id;r[i]==null&&(r[i]=0),(r[s]==null||r[i]>=r[s])&&(r[s]=r[i]+1)}),r}function Vbt(e){return Lee(function(r){var t,n;return Mee(t=Os(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.to===r})},function(r,t){return t>r},"from",e)}function Gbt(e){return Lee(function(r){var t,n;return Mee(t=Os(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.from===r})},function(r,t){return t<r},"to",e)}function Lee(e,r,t,n){var i,s=hh(null),o=Nee(i=nl(hee(n).call(n))).call(i,function(y,w){return y+1+w.edges.length},0),a=t+"Id",l=t==="to"?1:-1,u=Wbt(n),h;try{var c=function(){var w=mn(h.value,2),b=w[0],T=w[1];if(!n.has(b)||!e(T))return"continue";s[b]=0;for(var x=[T],A=0,_,I=function(){var g,R;if(!n.has(b))return"continue";var M=s[_.id]+l;if(Ur(g=Os(R=_.edges).call(R,function(L){return L.connected&&L.to!==L.from&&L[t]!==_&&n.has(L.toId)&&n.has(L.fromId)})).call(g,function(L){var W=L[a],X=s[W];(X==null||r(M,X))&&(s[W]=M,x.push(L[t]))}),A>o)return{v:{v:qbt(n,s)}};++A};_=x.pop();){var O=I();if(O!=="continue"&&Dr(O)==="object")return O.v}};for(u.s();!(h=u.n()).done;){var d=c();if(d!=="continue"&&Dr(d)==="object")return d.v}}catch(y){u.e(y)}finally{u.f()}return s}var Ybt=function(){function e(){ht(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return dt(e,[{key:"addRelation",value:function(t,n){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(n),this.parentReference[n]===void 0&&(this.parentReference[n]=[]),this.parentReference[n].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,n){n!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=n,this.treeIndex=Math.max(n,this.treeIndex))}},{key:"ensureLevel",value:function(t){this.levels[t]===void 0&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var n=this,i={},s=function o(a){if(i[a]!==void 0)return i[a];var l=n.levels[a];if(n.childrenReference[a]){var u=n.childrenReference[a];if(u.length>0)for(var h=0;h<u.length;h++)l=Math.max(l,o(u[h]))}return i[a]=l,l};return s(t)}},{key:"levelDownstream",value:function(t,n){this.levels[n.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[n.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var n=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.levels[i]!==void 0&&(n=Math.min(this.levels[i],n));for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.levels[s]!==void 0&&(this.levels[s]-=n)}},{key:"getTreeSize",value:function(t,n){var i=1e9,s=-1e9,o=1e9,a=-1e9;for(var l in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,l)&&this.trees[l]===n){var u=t[l];i=Math.min(u.x,i),s=Math.max(u.x,s),o=Math.min(u.y,o),a=Math.max(u.y,a)}return{min_x:i,max_x:s,min_y:o,max_y:a}}},{key:"hasSameParent",value:function(t,n){var i=this.parentReference[t.id],s=this.parentReference[n.id];if(i===void 0||s===void 0)return!1;for(var o=0;o<i.length;o++)for(var a=0;a<s.length;a++)if(i[o]==s[a])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,n){return this.trees[t.id]===this.trees[n.id]}},{key:"getLevels",value:function(){return yn(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,n){this.distributionOrdering[n]===void 0&&(this.distributionOrdering[n]=[]);var i=!1,s=this.distributionOrdering[n];for(var o in s)if(s[o]===t){i=!0;break}i||(this.distributionOrdering[n].push(t),this.distributionIndex[t.id]=this.distributionOrdering[n].length-1)}}]),e}(),Zbt=function(){function e(r){ht(this,e),this.body=r,this._resetRNG(Math.random()+":"+N$()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Hn(this.options,this.defaultOptions),this.bindEventListeners()}return dt(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(t.options.hierarchical.enabled===!0){var n=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",n,!1)}})}},{key:"setOptions",value:function(t,n){if(t!==void 0){var i=this.options.hierarchical,s=i.enabled;if(Uv(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Ro(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(n);if(s===!0)return this.body.emitter.emit("refresh"),Yr(n,this.optionsBackup)}return n}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Vx(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){var n=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:n.enabled===void 0?!0:n.enabled,solver:"hierarchicalRepulsion"},n.enabled=n.enabled===void 0?!0:n.enabled,n.solver=n.solver||"barnesHut"):Dr(t.physics)==="object"?(n.enabled=t.physics.enabled===void 0?!0:t.physics.enabled,n.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(n.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var s=t.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(i=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},t.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:i,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var n=t.length+50,i=0;i<t.length;i++){var s=t[i],o=2*Math.PI*this._rng();s.x===void 0&&(s.x=n*Math.cos(o)),s.y===void 0&&(s.y=n*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=this.body.nodeIndices,n=0,i=0;i<t.length;i++){var s=this.body.nodes[t[i]];s.predefinedPosition===!0&&(n+=1)}if(n<.5*t.length){var o=10,a=0,l=this.options.clusterThreshold,u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>l){for(var h=t.length;t.length>l&&a<=o;){a+=1;var c=t.length;a%3===0?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);var d=t.length;if(c==d&&a%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*h)})}a>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var y=70,w=0;w<t.length;w++){var b=this.body.nodes[t[w]];b.predefinedPosition===!1&&(b.x+=(.5-this._rng())*y,b.y+=(.5-this._rng())*y)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=os.getRangeCore(this.body.nodes,this.body.nodeIndices),n=os.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var s=this.body.nodes[this.body.nodeIndices[i]];s.x-=n.x,s.y-=n.y}}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var n=0;n<this.body.nodeIndices.length;n++)this.body.nodes[this.body.nodeIndices[n]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[n],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t,n,i=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new Ybt;for(n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&(t=this.body.nodes[n],t.options.level!==void 0?(i=!0,this.hierarchical.levels[n]=t.options.level):s=!0);if(s===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(s===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);var l=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(l),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,n=!1,i={},s=function(){for(var _=a(),I=0,O=0;O<_.length-1;O++){var C=_[O].max-_[O+1].min;I+=C+t.options.hierarchical.treeSpacing,o(O+1,I)}},o=function(_,I){var O=t.hierarchical.trees;for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&O[C]===_&&t.direction.shift(C,I)},a=function(){for(var _=[],I=0;I<t.hierarchical.numTrees();I++)_.push(t.direction.getTreeSize(I));return _},l=function A(_,I){if(!I[_.id]&&(I[_.id]=!0,t.hierarchical.childrenReference[_.id])){var O=t.hierarchical.childrenReference[_.id];if(O.length>0)for(var C=0;C<O.length;C++)A(t.body.nodes[O[C]],I)}},u=function(_){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,O=1e9,C=1e9,g=1e9,R=-1e9;for(var M in _)if(Object.prototype.hasOwnProperty.call(_,M)){var L=t.body.nodes[M],W=t.hierarchical.levels[L.id],X=t.direction.getPosition(L),te=t._getSpaceAroundNode(L,_),J=mn(te,2),j=J[0],Z=J[1];O=Math.min(j,O),C=Math.min(Z,C),W<=I&&(g=Math.min(X,g),R=Math.max(X,R))}return[g,R,O,C]},h=function(_,I){var O=t.hierarchical.getMaxLevel(_.id),C=t.hierarchical.getMaxLevel(I.id);return Math.min(O,C)},c=function(_,I,O){for(var C=t.hierarchical,g=0;g<I.length;g++){var R=I[g],M=C.distributionOrdering[R];if(M.length>1)for(var L=0;L<M.length-1;L++){var W=M[L],X=M[L+1];C.hasSameParent(W,X)&&C.inSameSubNetwork(W,X)&&_(W,X,O)}}},d=function(_,I){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=t.direction.getPosition(_),g=t.direction.getPosition(I),R=Math.abs(g-C),M=t.options.hierarchical.nodeSpacing;if(R>M){var L={},W={};l(_,L),l(I,W);var X=h(_,I),te=u(L,X),J=u(W,X),j=te[1],Z=J[0],se=J[2],Ee=Math.abs(j-Z);if(Ee>M){var me=j-Z+M;me<-se+M&&(me=-se+M),me<0&&(t._shiftBlock(I.id,me),n=!0,O===!0&&t._centerParent(I))}}},y=function(_,I){for(var O=I.id,C=I.edges,g=t.hierarchical.levels[I.id],R=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,M={},L=[],W=0;W<C.length;W++){var X=C[W];if(X.toId!=X.fromId){var te=X.toId==O?X.from:X.to;M[C[W].id]=te,t.hierarchical.levels[te.id]<g&&L.push(X)}}var J=function(Ue,Ge){for(var it=0,_e=0;_e<Ge.length;_e++)if(M[Ge[_e].id]!==void 0){var pe=t.direction.getPosition(M[Ge[_e].id])-Ue;it+=pe/Math.sqrt(pe*pe+R)}return it},j=function(Ue,Ge){for(var it=0,_e=0;_e<Ge.length;_e++)if(M[Ge[_e].id]!==void 0){var pe=t.direction.getPosition(M[Ge[_e].id])-Ue;it-=R*Math.pow(pe*pe+R,-1.5)}return it},Z=function(Ue,Ge){for(var it=t.direction.getPosition(I),_e={},pe=0;pe<Ue;pe++){var Te=J(it,Ge),je=j(it,Ge),$=40,S=Math.max(-$,Math.min($,Math.round(Te/je)));if(it=it-S,_e[it]!==void 0)break;_e[it]=pe}return it},se=function(Ue){var Ge=t.direction.getPosition(I);if(i[I.id]===void 0){var it={};l(I,it),i[I.id]=it}var _e=u(i[I.id]),pe=_e[2],Te=_e[3],je=Ue-Ge,$=0;je>0?$=Math.min(je,Te-t.options.hierarchical.nodeSpacing):je<0&&($=-Math.min(-je,pe-t.options.hierarchical.nodeSpacing)),$!=0&&(t._shiftBlock(I.id,$),n=!0)},Ee=function(Ue){var Ge=t.direction.getPosition(I),it=t._getSpaceAroundNode(I),_e=mn(it,2),pe=_e[0],Te=_e[1],je=Ue-Ge,$=Ge;je>0?$=Math.min(Ge+(Te-t.options.hierarchical.nodeSpacing),Ue):je<0&&($=Math.max(Ge-(pe-t.options.hierarchical.nodeSpacing),Ue)),$!==Ge&&(t.direction.setPosition(I,$),n=!0)},me=Z(_,L);se(me),me=Z(_,C),Ee(me)},w=function(_){var I=t.hierarchical.getLevels();I=fh(I).call(I);for(var O=0;O<_;O++){n=!1;for(var C=0;C<I.length;C++)for(var g=I[C],R=t.hierarchical.distributionOrdering[g],M=0;M<R.length;M++)y(1e3,R[M]);if(n!==!0)break}},b=function(_){var I=t.hierarchical.getLevels();I=fh(I).call(I);for(var O=0;O<_&&(n=!1,c(d,I,!0),n===!0);O++);},T=function(){for(var _ in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,_)&&t._centerParent(t.body.nodes[_])},x=function(){var _=t.hierarchical.getLevels();_=fh(_).call(_);for(var I=0;I<_.length;I++)for(var O=_[I],C=t.hierarchical.distributionOrdering[O],g=0;g<C.length;g++)t._centerParent(C[g])};this.options.hierarchical.blockShifting===!0&&(b(5),T()),this.options.hierarchical.edgeMinimization===!0&&w(20),this.options.hierarchical.parentCentralization===!0&&x(),s()}},{key:"_getSpaceAroundNode",value:function(t,n){var i=!0;n===void 0&&(i=!1);var s=this.hierarchical.levels[t.id];if(s!==void 0){var o=this.hierarchical.distributionIndex[t.id],a=this.direction.getPosition(t),l=this.hierarchical.distributionOrdering[s],u=1e9,h=1e9;if(o!==0){var c=l[o-1];if(i===!0&&n[c.id]===void 0||i===!1){var d=this.direction.getPosition(c);u=a-d}}if(o!=l.length-1){var y=l[o+1];if(i===!0&&n[y.id]===void 0||i===!1){var w=this.direction.getPosition(y);h=Math.min(h,w-a)}}return[u,h]}else return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var n=this.hierarchical.parentReference[t.id],i=0;i<n.length;i++){var s=n[i],o=this.body.nodes[s],a=this.hierarchical.childrenReference[s];if(a!==void 0){var l=this._getCenterPosition(a),u=this.direction.getPosition(o),h=this._getSpaceAroundNode(o),c=mn(h,2),d=c[0],y=c[1],w=u-l;(w<0&&Math.abs(w)<y-this.options.hierarchical.nodeSpacing||w>0&&Math.abs(w)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,l)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,s=yn(t[n]);s=this._indexArrayToNodes(s),wT(i=this.direction).call(i,s);for(var o=0,a=0;a<s.length;a++){var l=s[a];if(this.positionedNodes[l.id]===void 0){var u=this.options.hierarchical.nodeSpacing,h=u*o;o>0&&(h=this.direction.getPosition(s[a-1])+u),this.direction.setPosition(l,h,n),this._validatePositionAndContinue(l,n,h),o++}}}}},{key:"_placeBranchNodes",value:function(t,n){var i,s=this.hierarchical.childrenReference[t];if(s!==void 0){for(var o=[],a=0;a<s.length;a++)o.push(this.body.nodes[s[a]]);wT(i=this.direction).call(i,o);for(var l=0;l<o.length;l++){var u=o[l],h=this.hierarchical.levels[u.id];if(h>n&&this.positionedNodes[u.id]===void 0){var c=this.options.hierarchical.nodeSpacing,d=void 0;l===0?d=this.direction.getPosition(this.body.nodes[t]):d=this.direction.getPosition(o[l-1])+c,this.direction.setPosition(u,d,h),this._validatePositionAndContinue(u,h,d)}else return}var y=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[t],y,n)}}},{key:"_validatePositionAndContinue",value:function(t,n,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[n]!==void 0){var s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[n]]);if(i-s<this.options.hierarchical.nodeSpacing){var o=s+this.options.hierarchical.nodeSpacing-i,a=this._findCommonParent(this.lastNodeOnLevel[n],t.id);this._shiftBlock(a.withChild,o)}}this.lastNodeOnLevel[n]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,n)}}},{key:"_indexArrayToNodes",value:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.body.nodes[t[i]]);return n}},{key:"_getDistribution",value:function(){var t={},n,i;for(n in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,n)){i=this.body.nodes[n];var s=this.hierarchical.levels[n]===void 0?0:this.hierarchical.levels[n];this.direction.fix(i,s),t[s]===void 0&&(t[s]={}),t[s][n]=i}return t}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return pr(t.edges,function(s){var o;_r(o=n.body.edgeIndices).call(o,s.id)!==-1&&i.push(s)}),i}},{key:"_getHubSizes",value:function(){var t=this,n={},i=this.body.nodeIndices;pr(i,function(o){var a=t.body.nodes[o],l=t._getActiveEdges(a).length;n[l]=!0});var s=[];return pr(n,function(o){s.push(Number(o))}),wT(hz).call(hz,s,function(o,a){return a-o}),s}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,n=function(u,h){t.hierarchical.levelDownstream(u,h)},i=this._getHubSizes(),s=function(){var u=i[o];if(u===0)return"break";pr(t.body.nodeIndices,function(h){var c=t.body.nodes[h];u===t._getActiveEdges(c).length&&t._crawlNetwork(n,h)})},o=0;o<i.length;++o){var a=s();if(a==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,n=1e5,i=function(a,l,u){},s=function(a,l,u){var h=t.hierarchical.levels[a.id];h===void 0&&(h=t.hierarchical.levels[a.id]=n);var c=i(os.cloneOptions(a,"node"),os.cloneOptions(l,"node"),os.cloneOptions(u,"edge"));t.hierarchical.levels[l.id]=h+c};this._crawlNetwork(s),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,i=Nee(t=this.body.nodeIndices).call(t,function(s,o){return s.set(o,n.body.nodes[o]),s},new lee);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=Gbt(i):this.hierarchical.levels=Vbt(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,n=function(s,o){t.hierarchical.levels[o.id]>t.hierarchical.levels[s.id]&&t.hierarchical.addRelation(s.id,o.id)};this._crawlNetwork(n),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,s={},o=function d(y,w){if(s[y.id]===void 0){t.hierarchical.setTreeIndex(y,w),s[y.id]=!0;for(var b,T=t._getActiveEdges(y),x=0;x<T.length;x++){var A=T[x];A.connected===!0&&(A.toId==y.id?b=A.from:b=A.to,y.id!=b.id&&(n(y,b,A),d(b,w)))}}};if(i===void 0)for(var a=0,l=0;l<this.body.nodeIndices.length;l++){var u=this.body.nodeIndices[l];if(s[u]===void 0){var h=this.body.nodes[u];o(h,a),a+=1}}else{var c=this.body.nodes[i];if(c===void 0){console.error("Node not found:",i);return}o(c)}}},{key:"_shiftBlock",value:function(t,n){var i=this,s={},o=function a(l){if(!s[l]){s[l]=!0,i.direction.shift(l,n);var u=i.hierarchical.childrenReference[l];if(u!==void 0)for(var h=0;h<u.length;h++)a(u[h])}};o(t)}},{key:"_findCommonParent",value:function(t,n){var i=this,s={},o=function l(u,h){var c=i.hierarchical.parentReference[h];if(c!==void 0)for(var d=0;d<c.length;d++){var y=c[d];u[y]=!0,l(u,y)}},a=function l(u,h){var c=i.hierarchical.parentReference[h];if(c!==void 0)for(var d=0;d<c.length;d++){var y=c[d];if(u[y]!==void 0)return{foundParent:y,withChild:h};var w=l(u,y);if(w.foundParent!==null)return w}return{foundParent:null,withChild:h}};return o(s,t),a(s,n)}},{key:"setDirectionStrategy",value:function(){var t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";t?this.direction=new Obt(this):this.direction=new Cbt(this)}},{key:"_getCenterPosition",value:function(t){for(var n=1e9,i=-1e9,s=0;s<t.length;s++){var o=void 0;if(t[s].id!==void 0)o=t[s];else{var a=t[s];o=this.body.nodes[a]}var l=this.direction.getPosition(o);n=Math.min(n,l),i=Math.max(i,l)}return .5*(n+i)}}]),e}();function Xbt(e,r){var t=typeof Xc<"u"&&ku(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Jbt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Jbt(e,r){var t;if(e){if(typeof e=="string")return pz(e,r);var n=Ci(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Wh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pz(e,r)}}function pz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Qbt=function(){function e(r,t,n,i){var s=this,o,a;ht(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Hn(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",nt(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",nt(a=this._restore).call(a,this))}return dt(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,n,i){n!==void 0&&(n.locale!==void 0?this.options.locale=n.locale:this.options.locale=i.locale,n.locales!==void 0?this.options.locales=n.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,Yr(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,n;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),o=i+s,a=this.options.locales[this.options.locale],l=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),l=!0),this.options.addEdge!==!1&&(l===!0?this._createSeperator(1):l=!0,this._createAddEdgeButton(a)),i===1&&typeof this.options.editNode=="function"?(l===!0?this._createSeperator(2):l=!0,this._createEditNodeButton(a)):s===1&&i===0&&this.options.editEdge!==!1&&(l===!0?this._createSeperator(3):l=!0,this._createEditEdgeButton(a)),o!==0&&(i>0&&this.options.deleteNode!==!1?(l===!0&&this._createSeperator(4),this._createDeleteButton(a)):i===0&&this.options.deleteEdge!==!1&&(l===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,nt(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",nt(n=this.showManipulatorToolbar).call(n,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}this._temporaryBindEvent("click",nt(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var n=this.selectionHandler.getSelectedNodes()[0];if(n!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(n.isCluster!==!0){var i=Yr({},n.options,!1);if(i.x=n.x,i.y=n.y,this.options.editNode.length===2)this.options.editNode(i,function(s){s!=null&&t.inMode==="editNode"&&t.body.data.nodes.getDataSet().update(s),t.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,n,i,s,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a,l=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(l),this._createSeperator(),this._createDescription(l.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,nt(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",nt(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",nt(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDrag",nt(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",nt(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",nt(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",Dr(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from.id,t.to.id);return}if(this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var s,o,a,l,u=this.body.edges[this.edgeBeingEditedId],h=this._getNewTargetNode(u.from.x,u.from.y),c=this._getNewTargetNode(u.to.x,u.to.y);this.temporaryIds.nodes.push(h.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[h.id]=h,this.body.nodeIndices.push(h.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",nt(s=this._controlNodeTouch).call(s,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",nt(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",nt(a=this._controlNodeDrag).call(a,this)),this._temporaryBindUI("onDragEnd",nt(l=this._controlNodeDragEnd).call(l,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(d){var y=u.edgeType.findBorderPositions(d);h.selected===!1&&(h.x=y.from.x,h.y=y.from.y),c.selected===!1&&(c.x=y.to.x,c.y=y.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var n=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),s=void 0;if(n.length>0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(s=this.options.deleteNode)}else i.length>0&&typeof this.options.deleteEdge=="function"&&(s=this.options.deleteEdge);if(typeof s=="function"){var a={nodes:n,edges:i};if(s.length===2)s(a,function(l){l!=null&&t.inMode==="delete"?(t.body.data.edges.getDataSet().remove(l.edges),t.body.data.nodes.getDataSet().remove(l.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(n),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var t,n;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(n=this.options.locales[this.options.locale])===null||n===void 0?void 0:n.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(t,n){var i=Yr({},this.options.controlNodeStyle);i.id="targetNode"+by(),i.hidden=!1,i.physics=!1,i.x=t,i.y=n;var s=this.body.functions.createNode(i);return s.shape.boundingBox={left:t,right:t,top:n,bottom:n},s}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},hc(this.editModeDiv);var n=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",n.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,nt(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(hc(this.editModeDiv),hc(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,n=Xbt(su(t=this._domEventListenerCleanupQueue).call(t,0)),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),hc(this.manipulationDiv),hc(this.editModeDiv),hc(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var n,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addNodeMode).call(n,this))}},{key:"_createAddEdgeButton",value:function(t){var n,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addEdgeMode).call(n,this))}},{key:"_createEditNodeButton",value:function(t){var n,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editNode).call(n,this))}},{key:"_createEditEdgeButton",value:function(t){var n,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editEdgeMode).call(n,this))}},{key:"_createDeleteButton",value:function(t){var n,i;this.options.rtl?i="vis-delete-rtl":i="vis-delete";var s=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,nt(n=this.deleteSelected).call(n,this))}},{key:"_createBackButton",value:function(t){var n,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.showManipulatorToolbar).call(n,this))}},{key:"_createButton",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+n,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=s,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,n){this.temporaryEventFunctions.push({event:t,boundFunction:n}),this.body.emitter.on(t,n)}},{key:"_temporaryBindUI",value:function(t,n){if(this.body.eventListeners[t]!==void 0)this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=n;else throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+k0(yn(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var n=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(n,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,n){var i=new $p(t,{});z$(i,n),this._domEventListenerCleanupQueue.push(function(){i.destroy()});var s=function(a){var l=a.keyCode,u=a.key;(u==="Enter"||u===" "||l===13||l===32)&&n()};t.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(function(){t.removeEventListener("keyup",s,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var n;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i=_r(n=this.body.edgeIndices).call(n,this.temporaryIds.edges[t]);if(i!==-1){var s;su(s=this.body.edgeIndices).call(s,i,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var a;delete this.body.nodes[this.temporaryIds.nodes[o]];var l=_r(a=this.body.nodeIndices).call(a,this.temporaryIds.nodes[o]);if(l!==-1){var u;su(u=this.body.nodeIndices).call(u,l,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Hn({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),l=s.isOverlappingWith(n);a===!0?(this.selectedControlNode=i,o.edgeType.from=i):l===!0&&(this.selectedControlNode=s,o.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var n=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(n);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--)if(o[l]!==this.selectedControlNode.id){a=this.body.nodes[o[l]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var u=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===u.id?this._performEditEdge(a.id,s.to.id):this._performEditEdge(s.from.id,a.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Hn({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var n=this.lastTouch,i=this.selectionHandler.getNodeAt(n);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this._getNewTargetNode(i.x,i.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);var o=this.body.functions.createEdge({id:"connectionEdge"+by(),from:i.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(_r(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}if(t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,n),this.temporaryIds.nodes[0]!==void 0){var h=this.body.nodes[this.temporaryIds.nodes[0]];h.x=this.canvas._XconvertDOMtoCanvas(n.x),h.y=this.canvas._YconvertDOMtoCanvas(n.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(_r(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(s,a.id)),t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,n),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var n=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,n,void 0,!0)}},{key:"_performAddNode",value:function(t){var n=this,i={id:by(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(i,function(s){s!=null&&n.inMode==="addNode"&&n.body.data.nodes.getDataSet().add(s),n.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,n){var i=this,s={from:t,to:n};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(s,function(o){o!=null&&i.inMode==="addEdge"&&(i.body.data.edges.getDataSet().add(o),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,n){var i=this,s={id:this.edgeBeingEditedId,from:t,to:n,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(Dr(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(s,function(a){a==null||i.inMode!=="editEdge"?(i.body.edges[s.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(a),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),lt="string",rt="boolean",Re="number",Zg="array",Ot="object",Fee="dom",e1t="any",xT=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],ET={borderWidth:{number:Re},borderWidthSelected:{number:Re,undefined:"undefined"},brokenImage:{string:lt,undefined:"undefined"},chosen:{label:{boolean:rt,function:"function"},node:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{border:{string:lt},background:{string:lt},highlight:{border:{string:lt},background:{string:lt},__type__:{object:Ot,string:lt}},hover:{border:{string:lt},background:{string:lt},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},opacity:{number:Re,undefined:"undefined"},fixed:{x:{boolean:rt},y:{boolean:rt},__type__:{object:Ot,boolean:rt}},font:{align:{string:lt},color:{string:lt},size:{number:Re},face:{string:lt},background:{string:lt},strokeWidth:{number:Re},strokeColor:{string:lt},vadjust:{number:Re},multi:{boolean:rt,string:lt},bold:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},boldital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},ital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},mono:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},group:{string:lt,number:Re,undefined:"undefined"},heightConstraint:{minimum:{number:Re},valign:{string:lt},__type__:{object:Ot,boolean:rt,number:Re}},hidden:{boolean:rt},icon:{face:{string:lt},code:{string:lt},size:{number:Re},color:{string:lt},weight:{string:lt,number:Re},__type__:{object:Ot}},id:{string:lt,number:Re},image:{selected:{string:lt,undefined:"undefined"},unselected:{string:lt,undefined:"undefined"},__type__:{object:Ot,string:lt}},imagePadding:{top:{number:Re},right:{number:Re},bottom:{number:Re},left:{number:Re},__type__:{object:Ot,number:Re}},label:{string:lt,undefined:"undefined"},labelHighlightBold:{boolean:rt},level:{number:Re,undefined:"undefined"},margin:{top:{number:Re},right:{number:Re},bottom:{number:Re},left:{number:Re},__type__:{object:Ot,number:Re}},mass:{number:Re},physics:{boolean:rt},scaling:{min:{number:Re},max:{number:Re},label:{enabled:{boolean:rt},min:{number:Re},max:{number:Re},maxVisible:{number:Re},drawThreshold:{number:Re},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:lt},size:{number:Re},x:{number:Re},y:{number:Re},__type__:{object:Ot,boolean:rt}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:rt,array:Zg},borderRadius:{number:Re},interpolation:{boolean:rt},useImageSize:{boolean:rt},useBorderWithImage:{boolean:rt},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ot}},size:{number:Re},title:{string:lt,dom:Fee,undefined:"undefined"},value:{number:Re,undefined:"undefined"},widthConstraint:{minimum:{number:Re},maximum:{number:Re},__type__:{object:Ot,boolean:rt,number:Re}},x:{number:Re},y:{number:Re},__type__:{object:Ot}},t1t={configure:{enabled:{boolean:rt},filter:{boolean:rt,string:lt,array:Zg,function:"function"},container:{dom:Fee},showButton:{boolean:rt},__type__:{object:Ot,boolean:rt,string:lt,array:Zg,function:"function"}},edges:{arrows:{to:{enabled:{boolean:rt},scaleFactor:{number:Re},type:{string:xT},imageHeight:{number:Re},imageWidth:{number:Re},src:{string:lt},__type__:{object:Ot,boolean:rt}},middle:{enabled:{boolean:rt},scaleFactor:{number:Re},type:{string:xT},imageWidth:{number:Re},imageHeight:{number:Re},src:{string:lt},__type__:{object:Ot,boolean:rt}},from:{enabled:{boolean:rt},scaleFactor:{number:Re},type:{string:xT},imageWidth:{number:Re},imageHeight:{number:Re},src:{string:lt},__type__:{object:Ot,boolean:rt}},__type__:{string:["from","to","middle"],object:Ot}},endPointOffset:{from:{number:Re},to:{number:Re},__type__:{object:Ot,number:Re}},arrowStrikethrough:{boolean:rt},background:{enabled:{boolean:rt},color:{string:lt},size:{number:Re},dashes:{boolean:rt,array:Zg},__type__:{object:Ot,boolean:rt}},chosen:{label:{boolean:rt,function:"function"},edge:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{color:{string:lt},highlight:{string:lt},hover:{string:lt},inherit:{string:["from","to","both"],boolean:rt},opacity:{number:Re},__type__:{object:Ot,string:lt}},dashes:{boolean:rt,array:Zg},font:{color:{string:lt},size:{number:Re},face:{string:lt},background:{string:lt},strokeWidth:{number:Re},strokeColor:{string:lt},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Re},multi:{boolean:rt,string:lt},bold:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},boldital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},ital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},mono:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},hidden:{boolean:rt},hoverWidth:{function:"function",number:Re},label:{string:lt,undefined:"undefined"},labelHighlightBold:{boolean:rt},length:{number:Re,undefined:"undefined"},physics:{boolean:rt},scaling:{min:{number:Re},max:{number:Re},label:{enabled:{boolean:rt},min:{number:Re},max:{number:Re},maxVisible:{number:Re},drawThreshold:{number:Re},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},selectionWidth:{function:"function",number:Re},selfReferenceSize:{number:Re},selfReference:{size:{number:Re},angle:{number:Re},renderBehindTheNode:{boolean:rt},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:lt},size:{number:Re},x:{number:Re},y:{number:Re},__type__:{object:Ot,boolean:rt}},smooth:{enabled:{boolean:rt},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Re},forceDirection:{string:["horizontal","vertical","none"],boolean:rt},__type__:{object:Ot,boolean:rt}},title:{string:lt,undefined:"undefined"},width:{number:Re},widthConstraint:{maximum:{number:Re},__type__:{object:Ot,boolean:rt,number:Re}},value:{number:Re,undefined:"undefined"},__type__:{object:Ot}},groups:{useDefaultGroups:{boolean:rt},__any__:ET,__type__:{object:Ot}},interaction:{dragNodes:{boolean:rt},dragView:{boolean:rt},hideEdgesOnDrag:{boolean:rt},hideEdgesOnZoom:{boolean:rt},hideNodesOnDrag:{boolean:rt},hover:{boolean:rt},keyboard:{enabled:{boolean:rt},speed:{x:{number:Re},y:{number:Re},zoom:{number:Re},__type__:{object:Ot}},bindToWindow:{boolean:rt},autoFocus:{boolean:rt},__type__:{object:Ot,boolean:rt}},multiselect:{boolean:rt},navigationButtons:{boolean:rt},selectable:{boolean:rt},selectConnectedEdges:{boolean:rt},hoverConnectedEdges:{boolean:rt},tooltipDelay:{number:Re},zoomView:{boolean:rt},zoomSpeed:{number:Re},__type__:{object:Ot}},layout:{randomSeed:{undefined:"undefined",number:Re,string:lt},improvedLayout:{boolean:rt},clusterThreshold:{number:Re},hierarchical:{enabled:{boolean:rt},levelSeparation:{number:Re},nodeSpacing:{number:Re},treeSpacing:{number:Re},blockShifting:{boolean:rt},edgeMinimization:{boolean:rt},parentCentralization:{boolean:rt},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ot,boolean:rt}},__type__:{object:Ot}},manipulation:{enabled:{boolean:rt},initiallyActive:{boolean:rt},addNode:{boolean:rt,function:"function"},addEdge:{boolean:rt,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ot,boolean:rt,function:"function"}},deleteNode:{boolean:rt,function:"function"},deleteEdge:{boolean:rt,function:"function"},controlNodeStyle:ET,__type__:{object:Ot,boolean:rt}},nodes:ET,physics:{enabled:{boolean:rt},barnesHut:{theta:{number:Re},gravitationalConstant:{number:Re},centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},damping:{number:Re},avoidOverlap:{number:Re},__type__:{object:Ot}},forceAtlas2Based:{theta:{number:Re},gravitationalConstant:{number:Re},centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},damping:{number:Re},avoidOverlap:{number:Re},__type__:{object:Ot}},repulsion:{centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},nodeDistance:{number:Re},damping:{number:Re},__type__:{object:Ot}},hierarchicalRepulsion:{centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},nodeDistance:{number:Re},damping:{number:Re},avoidOverlap:{number:Re},__type__:{object:Ot}},maxVelocity:{number:Re},minVelocity:{number:Re},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:rt},iterations:{number:Re},updateInterval:{number:Re},onlyDynamicEdges:{boolean:rt},fit:{boolean:rt},__type__:{object:Ot,boolean:rt}},timestep:{number:Re},adaptiveTimestep:{boolean:rt},wind:{x:{number:Re},y:{number:Re},__type__:{object:Ot}},__type__:{object:Ot,boolean:rt}},autoResize:{boolean:rt},clickToUse:{boolean:rt},locale:{string:lt},locales:{__any__:{any:e1t},__type__:{object:Ot}},height:{string:lt},width:{string:lt},__type__:{object:Ot}},jee={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},r1t=function(r,t,n){var i;return!!(cl(r).call(r,"physics")&&cl(i=jee.physics.solver).call(i,t)&&n.physics.solver!==t&&t!=="wind")},n1t=function(){function e(){ht(this,e)}return dt(e,[{key:"getDistances",value:function(t,n,i){for(var s={},o=t.edges,a=0;a<n.length;a++){var l=n[a],u={};s[l]=u;for(var h=0;h<n.length;h++)u[n[h]]=a==h?0:1e9}for(var c=0;c<i.length;c++){var d=o[i[c]];d.connected===!0&&s[d.fromId]!==void 0&&s[d.toId]!==void 0&&(s[d.fromId][d.toId]=1,s[d.toId][d.fromId]=1)}for(var y=n.length,w=0;w<y;w++)for(var b=n[w],T=s[b],x=0;x<y-1;x++)for(var A=n[x],_=s[A],I=x+1;I<y;I++){var O=n[I],C=s[O],g=Math.min(_[O],_[b]+T[O]);_[O]=g,C[A]=g}return s}}]),e}(),i1t=function(){function e(r,t,n){ht(this,e),this.body=r,this.springLength=t,this.springConstant=n,this.distanceSolver=new n1t}return dt(e,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.distanceSolver.getDistances(this.body,t,n);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();for(var o=.01,a=1,l=0,u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),h=5,c=1e9,d=0,y=0,w=0,b=0,T=0;c>o&&l<u;){l+=1;var x=this._getHighestEnergyNode(i),A=mn(x,4);for(d=A[0],c=A[1],y=A[2],w=A[3],b=c,T=0;b>a&&T<h;){T+=1,this._moveNode(d,y,w);var _=this._getEnergy(d),I=mn(_,3);b=I[0],y=I[1],w=I[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=0,o=n[0],a=0,l=0,u=0;u<n.length;u++){var h=n[u];if(i[h].predefinedPosition!==!0||i[h].isCluster===!0&&t===!0||i[h].options.fixed.x!==!0||i[h].options.fixed.y!==!0){var c=this._getEnergy(h),d=mn(c,3),y=d[0],w=d[1],b=d[2];s<y&&(s=y,o=h,a=w,l=b)}}return[o,s,a,l]}},{key:"_getEnergy",value:function(t){var n=mn(this.E_sums[t],2),i=n[0],s=n[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));return[o,i,s]}},{key:"_moveNode",value:function(t,n,i){for(var s=this.body.nodeIndices,o=this.body.nodes,a=0,l=0,u=0,h=o[t].x,c=o[t].y,d=this.K_matrix[t],y=this.L_matrix[t],w=0;w<s.length;w++){var b=s[w];if(b!==t){var T=o[b].x,x=o[b].y,A=d[b],_=y[b],I=1/Math.pow(Math.pow(h-T,2)+Math.pow(c-x,2),1.5);a+=A*(1-_*Math.pow(c-x,2)*I),l+=A*(_*(h-T)*(c-x)*I),u+=A*(1-_*Math.pow(h-T,2)*I)}}var O=a,C=l,g=n,R=u,M=i,L=(g/O+M/C)/(C/O-R/C),W=-(C*L+g)/O;o[t].x+=W,o[t].y+=L,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var s=0;s<n.length;s++){this.L_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.L_matrix[n[s]][n[o]]=i*t[n[s]][n[o]]}}},{key:"_createK_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var s=0;s<n.length;s++){this.K_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.K_matrix[n[s]][n[o]]=i*Math.pow(t[n[s]][n[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var s=0;s<t.length;s++){for(var o=t[s],a=n[o].x,l=n[o].y,u=0,h=0,c=s;c<t.length;c++){var d=t[c];if(d!==o){var y=n[d].x,w=n[d].y,b=1/Math.sqrt(Math.pow(a-y,2)+Math.pow(l-w,2));this.E_matrix[o][c]=[this.K_matrix[o][d]*(a-y-this.L_matrix[o][d]*(a-y)*b),this.K_matrix[o][d]*(l-w-this.L_matrix[o][d]*(l-w)*b)],this.E_matrix[d][s]=this.E_matrix[o][c],u+=this.E_matrix[o][c][0],h+=this.E_matrix[o][c][1]}}this.E_sums[o]=[u,h]}}},{key:"_updateE_matrix",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=this.E_matrix[t],o=this.K_matrix[t],a=this.L_matrix[t],l=i[t].x,u=i[t].y,h=0,c=0,d=0;d<n.length;d++){var y=n[d];if(y!==t){var w=s[d],b=w[0],T=w[1],x=i[y].x,A=i[y].y,_=1/Math.sqrt(Math.pow(l-x,2)+Math.pow(u-A,2)),I=o[y]*(l-x-a[y]*(l-x)*_),O=o[y]*(u-A-a[y]*(u-A)*_);s[d]=[I,O],h+=I,c+=O;var C=this.E_sums[y];C[0]+=I-b,C[1]+=O-T}}this.E_sums[t]=[h,c]}}]),e}();function kt(e,r,t){var n,i,s,o,a=this;if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:Aht,clickToUse:!1},Hn(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:nt(n=this.on).call(n,this),off:nt(i=this.off).call(i,this),emit:nt(s=this.emit).call(s,this),once:nt(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Pht(function(){return a.body.emitter.emit("_requestRedraw")}),this.groups=new Ydt,this.canvas=new Lmt(this.body),this.selectionHandler=new I0t(this.body,this.canvas),this.interactionHandler=new Wmt(this.body,this.canvas,this.selectionHandler),this.view=new jmt(this.body,this.canvas),this.renderer=new Nmt(this.body,this.canvas),this.physics=new xmt(this.body),this.layoutEngine=new Zbt(this.body),this.clustering=new Cmt(this.body),this.manipulation=new Qbt(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new iyt(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new dmt(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new i1t(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(r)}WX(kt.prototype);kt.prototype.setOptions=function(e){var r=this;if(e===null&&(e=void 0),e!==void 0){var t=oht.validate(e,t1t);t===!0&&console.error("%cErrors have been found in the supplied options object.",YQ);var n=["locale","locales","clickToUse"];if(Uv(n,this.options,e),e.locale!==void 0&&(e.locale=Oht(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),e.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new iht(this,this.body.container,jee,this.canvas.pixelRatio,r1t)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Yr(i.nodes,this.nodesHandler.options),Yr(i.edges,this.edgesHandler.options),Yr(i.layout,this.layoutEngine.options),Yr(i.interaction,this.selectionHandler.options),Yr(i.interaction,this.renderer.options),Yr(i.interaction,this.interactionHandler.options),Yr(i.manipulation,this.manipulation.options),Yr(i.physics,this.physics.options),Yr(i.global,this.canvas.options),Yr(i.global,this.options),this.configurator.setModuleOptions(i)}e.clickToUse!==void 0?e.clickToUse===!0?this.activator===void 0&&(this.activator=new nht(this.canvas.frame),this.activator.on("change",function(){r.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};kt.prototype._updateVisibleIndices=function(){var e=this.body.nodes,r=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&!this.clustering._isClusteredNode(t)&&e[t].options.hidden===!1&&this.body.nodeIndices.push(e[t].id);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n],s=e[i.fromId],o=e[i.toId],a=s!==void 0&&o!==void 0,l=!this.clustering._isClusteredEdge(n)&&i.options.hidden===!1&&a&&s.options.hidden===!1&&o.options.hidden===!1;l&&this.body.edgeIndices.push(i.id)}};kt.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})};kt.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var r=ght(e.dot);this.setData(r);return}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var t=yht(e.gephi);this.setData(t);return}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};kt.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];hc(this.body.container)};kt.prototype._updateValueRange=function(e){var r,t=void 0,n=void 0,i=0;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r].getValue();s!==void 0&&(t=t===void 0?s:Math.min(s,t),n=n===void 0?s:Math.max(s,n),i+=s)}if(t!==void 0&&n!==void 0)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].setValueRange(t,n,i)};kt.prototype.isActive=function(){return!this.activator||this.activator.active};kt.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};kt.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};kt.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};kt.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};kt.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};kt.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};kt.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};kt.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};kt.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};kt.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};kt.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};kt.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};kt.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};kt.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};kt.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};kt.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};kt.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};kt.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};kt.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};kt.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};kt.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};kt.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};kt.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};kt.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};kt.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};kt.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};kt.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};kt.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};kt.prototype.getConnectedNodes=function(e){return this.body.nodes[e]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};kt.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};kt.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};kt.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};kt.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};kt.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};kt.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};kt.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};kt.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};kt.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};kt.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};kt.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};kt.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};kt.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};kt.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};kt.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};kt.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};kt.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};function zee(){const e=Pi(!1);return xt(()=>(e.current=!0,()=>{e.current=!1}),[]),As(()=>e.current,[])}const s1t={layout:{improvedLayout:!0},physics:{solver:"barnesHut",barnesHut:{springLength:200}},autoResize:!1,nodes:{borderWidth:1,shape:"circularImage",color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"},shadow:!0},edges:{smooth:!1,color:"lightgray",width:1,shadow:!0,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function op(e,r,t,n){e.length!=0&&e.forEach(function(i){var a,l;let s=r.get(i.id);if(!t){s||r.add(i);return}if(n!=null&&n.has(i.id)){s||r.add(i);return}let o=en.getDefaultProfile(i.id);if((a=o==null?void 0:o.name)!=null&&a.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}if((l=o==null?void 0:o.display_name)!=null&&l.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}s&&r.remove(i.id)})}const o1t=({props:e})=>{const r=Pi(null),t=Pi(),n=zee(),[i,s]=Ne(null),[o]=Ne(new ya),[a]=Ne(new ya),[l]=Ne(new ya),[u]=Ne([]),[h,c]=Ne(e.dir||"in"),[d,y]=Ne(e.entitytype);xt(()=>{if(r.current){var T={nodes:a,edges:l};return t.current=r.current&&new kt(r.current,T,s1t),t.current.on("click",function(x){if(x.nodes.length==0||!n())return;const A=x.nodes[0],_=Vt.g.vertices[A];if(A==i)return;let I=_.entityType==1?BI(A):ye.toNostrBech32Address(Bc.pub(A),"note");e.setNpub(I),s(A),w(A).then(O=>{let C=new Set([pt(e.hexKey),A]);O&&op(O,a,e.filter,C)})}),()=>{var x,A;(x=t.current)==null||x.off("click"),(A=t.current)==null||A.destroy()}}},[r]),xt(()=>{let T=pt(e.hexKey);return s(T),(e.dir!=h||e.entitytype!=d)&&(l.clear(),o.clear(),a.clear(),c(e.dir),y(e.entitytype)),w(T).then(x=>{if(!n())return;let A=new Set([pt(e.hexKey)]);x&&op(x,a,e.filter,A)}),()=>{u.forEach(x=>x==null?void 0:x())}},[e.npub,e.dir,e.entitytype]),xt(()=>{if(o.length==0&&a.length==0)return;let T=new Set([pt(e.hexKey)]);op(o,a,e.filter,T)},[e.filter]);async function w(T){let x=Vt.g.vertices[T];x||(x=new LP(T,0));let A={};if(x.entityType==1&&(A[T]=x),e.dir=="in")for(const M in x.in){const L=x.in[M];if(!L||!L.out||L.val==0)continue;A[L.out.id]=L.out;let W=Wy(L.val),X=L.out.degree>la;l.get(L.key)||l.add({id:L.key,from:L.out.id,to:T,color:W,dashes:X})}let _=Uee(e.entitytype);if(e.dir=="out")for(const M in x.out){const L=x.out[M];if(!L||L.val==0||!L.in||L.in.entityType!=_)continue;A[L.in.id]=L.in;let W=Wy(L.val);l.get(L.key)||l.add({id:L.key,from:T,to:L.in.id,color:W})}let I=Object.values(A),O=I.map(M=>Sn(M.id)),C=await en.getProfiles(O);if(!n())return;let g=C.filter(M=>M.isDefault).map(M=>M.key);en.fetchProfiles(g,M=>{if(!n())return;let L=Vt.g.vertices[pt(M.key)];n3(L,o)});let R=new ya;x.entityType==2&&I.push(x);for(const M of I){let L;M.entityType==1?L=n3(M,o):L=await Hee(M,o),L&&R.add(L)}return R}const b=T=>{let x=T||i;if(!x)return;a.clear(),o.clear(),l.clear(),w(x).then(_=>{if(!n())return;let I=new Set([pt(e.hexKey)]);_&&op(_,a,e.filter,I)});const A=BI(x);A!=e.npub&&e.setNpub(A)};return e.npub?v(tt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(ft,{when:d=="key",children:v(nG,{dir:e.dir,setSearch:e.setSearch})}),v("div",{className:"flex gap-4",children:""}),v("div",{className:"flex gap-4",children:v("button",{className:"btn btn-primary btn-sm",onClick:()=>{var T;return b((T=t.current)==null?void 0:T.getSelectedNodes()[0])},children:be("Focus")})}),v("div",{className:"flex gap-4",children:v(Kt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"path"}),children:be("Path")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null};class a1t{constructor(){}async getEventById(r){const t=Fe.db.by("id",r);if(t)return t;let n=await fetch(`https://api.iris.to/event/${r}`);if(n.status===200){let i=await n.json();return i&&Fe.handle(i,!0),i}}}const l1t=new a1t,u1t={layout:{randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!0,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"roots"}},physics:{stabilization:!1},autoResize:!1,nodes:{borderWidth:1,shape:"circularImage",color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"}},edges:{smooth:!1,color:"lightgray",width:1,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function n3(e,r){let t=en.getDefaultProfile(e.id),n=en.ensurePicture(t),i=r.get(e.id);if(i){i.label!=t.name&&(i.label=t.name),i.image!=n&&(i.image=n);return}return i={id:e.id,label:t.name,image:n,size:30},r.add(i),i}async function Hee(e,r){let t=Sn(e.id),n=Fe.db.by("id",t);n||(n=await l1t.getEventById(t));let i=await en.getProfile(n==null?void 0:n.pubkey),s=((i==null?void 0:i.name)||"").trim().slice(0,25),o=n.id.slice(0,4),a=((n==null?void 0:n.content)||"").trim().slice(0,25)+((n==null?void 0:n.content.length)>25?"...":""),l=n!=null&&n.created_at?new Date((n==null?void 0:n.created_at)*1e3).toDateString():"",u=`Note ${o}
${s}
${l}
${a}
`,h=r.get(e.id);if(h){h.label!=u&&(h.label=u);return}return h={id:e.id,label:u,shape:"box",font:{align:"left"}},r.add(h),h}const c1t=({props:e})=>{const r=Pi(null),t=Pi(),[n]=Ne(new ya),[i]=Ne(new ya),s=zee(),[o,a]=Ne(null),[l]=Ne(new ya),[u]=Ne([]);xt(()=>{if(r.current){var w={nodes:i,edges:l};return t.current=r.current&&new kt(r.current,w,u1t),t.current.on("click",function(b){if(b.nodes.length==0)return;const T=b.nodes[0];let A=Vt.g.vertices[T].entityType==1?BI(T):ye.toNostrBech32Address(Bc.pub(T),"note");e.setNpub(A)}),()=>{var b,T;(b=t.current)==null||b.off("click"),(T=t.current)==null||T.destroy()}}},[]),xt(()=>{let w=pt(e.hexKey),b=Vt.g.vertices[w];b||(b=new LP(w,0)),h(b);let T=b==null?void 0:b.score;return a(x=>({...x,vId:w,score:T})),()=>{u.forEach(x=>x==null?void 0:x())}},[e.npub]);async function h(w){var _;let b=Vt.g.getPaths(w.id),T=Object.create(null);for(let I of b)I!=null&&I.in&&(T[I.in.id]=I.in),I!=null&&I.out&&(T[I.out.id]=I.out);w.entityType!=1&&delete T[w.id];let x=Object.values(T),A=x.map(I=>Sn(I.id));await en.getProfiles(A),s()&&(w.entityType!=1&&x.push(w),await c(x,b),(_=t.current)==null||_.redraw())}async function c(w,b){var x,A;for(let _ of w)_.entityType==1?n3(_,n):await Hee(_,n);for(let _ of b){let I=Wy(_.val);l.get(_.key)||l.add({id:_.key,from:(x=_.out)==null?void 0:x.id,to:(A=_.in)==null?void 0:A.id,color:I})}let T=new Set([pt(e.hexKey)]);op(n,i,e.filter,T)}xt(()=>{var b;if(n.length==0&&i.length==0)return;let w=new Set([pt(e.hexKey),pt(ye.getPubKey())]);op(n,i,e.filter,w),(b=t.current)==null||b.redraw()},[e.filter]);const d=w=>{let b=w==null?void 0:w.values();return b?b.join("/"):null},y=w=>{if(!w||!(w==null?void 0:w.resolve()))return null;let{val:T,degree:x,count:A,hasScore:_}=w.resolve(),I=Math.round((T+A)*100/(A*2));return v(tt,{children:_?v(tt,{children:[v("span",{children:["Trust score is ",T]}),v("span",{children:[" from ",A==1?`${A} claim`:`a total of ${A} claims`]}),v("span",{children:[" at degree ",x]}),v("span",{children:[" resulting in ",I,"% trust"]})]}):v("span",{children:"No Score"})})};return e.npub?v(tt,{children:[!(o!=null&&o.score)&&v("div",{className:"text-center",children:be("No results")}),(o==null?void 0:o.score)&&v(tt,{children:[v("div",{className:"flex flex-col gap-4",children:[v("div",{children:["Aggregated result of score is ",d(o==null?void 0:o.score)]}),v("div",{children:y(o==null?void 0:o.score)})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:v(Kt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"graph"}),children:be("Focus")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null},f1t=e=>{const r=Im(pt(e.hexPub),["badName","neutralName","goodName"],"");return v(tt,{children:v("span",{className:r==null?void 0:r.option,children:`${be("note")} ${e.hexPub.slice(0,4)}`})})};function h1t(e,r){let t=e==null?void 0:e.toLocaleLowerCase();return t=="trust"?1:t=="distrust"?-1:r}function Uee(e,r=1){let t=e==null?void 0:e.toLocaleLowerCase();return t=="key"?1:t=="item"?2:r}function ST(e){return e!=null&&e.toLocaleLowerCase().startsWith("note")?"item":"key"}const d1t=e=>{const[r,t]=Ne({ready:!1}),[n,i]=Ne(ST(e.npub)),[s,o]=Ne(e.npub||ye.toNostrBech32Address(ye.getPubKey(),"npub")),[a,l]=Ne(e.trusttype||"trust"),[u,h]=Ne(e.dir||"out"),[c,d]=Ne(e.view||"graph"),[y,w]=Ne(e.filter||""),[b,T]=Ne(null),[x]=Ne([]),A=ye.toNostrHexAddress(s),_=A==ye.getPubKey(),I=Cn.debounce(R=>w(R),500,{trailing:!0});xt(()=>(Vt.whenReady(()=>{T(Vt.g.vertices[pt(s)]),t(R=>({...R,ready:!0}))}),()=>{x.forEach(R=>R==null?void 0:R())}),[]);const O=As(R=>{T(Vt.g.vertices[pt(R)]),o(R),i(ST(R))},[]);xt(()=>{if(e.npub!=s){let R=e.npub||ye.toNostrBech32Address(ye.getPubKey(),"npub");i(ST(R)),O(R)}e.trusttype!=a&&l(e.trusttype||"trust"),e.dir!=u&&h(e.dir||"out"),e.view!=c&&d(e.view||"graph"),e.filter!=y&&w(e.filter||"")},[e.npub,e.trusttype,e.dir,e.view,e.filter]);function C(R){const M={npub:s,trusttype:a,dir:u,view:c,filter:y,...R};return`/graph/${M.npub}/${M.dir}/${M.trusttype}/${M.view}${M.filter?"/"+M.filter:""}`}const g=()=>{let R={npub:s,hexKey:A,entitytype:n,trusttype:a,dir:u,view:c,filter:y,setNpub:O,setSearch:C};return c=="path"?v(c1t,{props:R}):c=="list"?v(QAe,{props:R}):v(o1t,{props:R})};return r.ready?v(tt,{children:[v(bu,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${s}`,children:[n=="key"&&v(br,{pub:s}),n=="item"&&v(f1t,{hexPub:A})]}),v("span",{style:{flex:1},className:"ml-1",children:c})]})}),iG(b==null?void 0:b.score,s,!0),v("div",{className:"text-sm flex flex-2 gap-2",children:["In the context of ",v(br,{pub:ye.getPubKey()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-8",children:[v(VAe,{view:c,setSearch:C,me:_}),v("form",{children:v("label",{children:v("input",{type:"text",placeholder:be("Filter"),tabIndex:1,onInput:R=>{var M;return I((M=R==null?void 0:R.target)==null?void 0:M.value)},className:"input-bordered border-neutral-500 input input-sm w-full"})})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),g()]}):null},p1t=e=>{switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"Yes":"No";case"object":return e instanceof Date?e.toLocaleDateString():e===null?"null":Array.isArray(e)?"Array["+e.length+"]":"Object";case"undefined":return"undefined";case"function":return"function";case"symbol":return e.toString();case"bigint":return e.toString()+"n";default:return"Unknown type"}},kT=({data:e,title:r})=>v("div",{className:"flex flex-col border-2 rounded-lg border-white p-4",children:[v("div",{className:"px-4 py-2 text-left text-lg font-semibold",children:r}),e==null?void 0:e.map(t=>v("div",{className:"flex justify-between p-2",children:[v("span",{className:"whitespace-nowrap",children:t.name}),"",v("span",{className:"flex-grow text-right",children:p1t(t.value)})]}))]}),v1t="zoo zoo zoo zoo zoo zoo zoo zoo zoo zoo zoo wrong";function g1t(e,r){return jU.fromMasterSeed(kU(e,r))}function y1t(e,r){return e.derive(`m/44'/1237'/0'/0/${r}`)}function m1t(e){return g1t(v1t,e)}async function M1(e){return new Promise(r=>setTimeout(r,e))}const b1t=["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9","npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a","npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh"],w1t="npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m",$1t="npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",uc="npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m",_1t="npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk",x1t="npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p",E1t="npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8",S1t="npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6",k1t="npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",T1t=[{from:uc,to:w1t,val:1},{from:uc,to:$1t,val:1},{from:uc,to:_1t,val:1},{from:uc,to:x1t,val:1},{from:uc,to:E1t,val:1},{from:uc,to:S1t,val:1},{from:uc,to:k1t,val:1}];async function Xg(e){let{from:r,to:t}=e;return await Vt.setTrust({...e,from:r,to:t},!0)}function Jg(e,r,t){return{from:e,to:r,val:t,entityType:1,context:"nostr",note:"",timestamp:Jbe()}}function I1t(e){Object.values(e).forEach(r=>{Xg(Jg(r.from,r.to,r.val))})}const A1t=e=>{const[r,t]=Ne(null),[n]=Ne([]),i=ye.toNostrHexAddress(e.id)||ye.getPubKey(),s=ye.toNostrBech32Address(i,"npub");xt(()=>(Vt.whenReady(()=>{o()}),()=>{n.forEach(_=>_==null?void 0:_())}),[i]);async function o(){let _=await en.getProfiles(b1t),I={};_.forEach(g=>{I[pt(g.key)]=g});let O=Object.values(Vt.g.edges).length,C=Object.values(Vt.g.vertices).length;t(g=>({...g,profiles:_,profileIndex:I,edgesCount:O,nodesCount:C,message:"Ready"}))}function a(_=""){let I=Object.values(Vt.g.edges).length,O=Object.values(Vt.g.vertices).length,C=Object.values(ut.profiles);t(g=>({...g,profiles:C,edgesCount:I,nodesCount:O,message:_}))}const l=_=>{_.preventDefault(),ut.profiles=new Map,a()},u=_=>{_.preventDefault(),Vt.g.vertices={},Vt.g.edges={},a()},h=_=>{Gbe()},c=_=>{_.preventDefault(),h(),u(_),l(_)},d=_=>{_.preventDefault(),Xg(Jg(i,uc,1)),I1t(T1t),a()};function y(_,I){let O=y1t(_,I);if(!O.privateKey||!O.publicKey)throw new Error("could not derive private key");let C=Mw(O.publicKey),g=pt(C),R=en.getDefaultProfile(g);return R!=null&&R.isDefault&&(R.name=`Demo User ${I}`,R.isDefault=!1,en.addProfileToMemory(R),en.saveProfile(R),console.log("created profile",I,C)),C}const w=_=>{_.preventDefault();let I=m1t("123");async function O(){let C=0;for(let g=0;g<10;g++){let R=y(I,C++);await Xg(Jg(i,R,1));for(let L=0;L<100;L++){let W=y(I,C++);await Xg(Jg(R,W,1));for(let te=0;te<100;te++){let J=y(I,C++);await Xg(Jg(W,J,1))}let X=Math.round(C*100/(10*100*100));a("Large graph created "+X+"%"),await M1(1)}let M=Math.round(C*100/(10*100*100));a("Large graph created "+M+"%"),await M1(1)}await o(),a("Processing graph!"),await M1(1),Vt.processGraph=!0,Vt.processScore(),a("Work done!"),await M1(1)}O(),a("Creating large graph...")},b=_=>{_.preventDefault()},T=()=>{if(!(r!=null&&r.profiles))return;let _=r.profiles.map(I=>({name:I.name,value:ye.toNostrBech32Address(I.key,"npub")}));return v(kT,{data:_,title:"Profiles"})},x=()=>{if(!(r!=null&&r.edges))return;let _=r.edges.map(I=>{var O,C;return{name:I.key,value:`${(O=I.out)==null?void 0:O.id} -- ${I.val} --> ${(C=I.in)==null?void 0:C.id}`}});return v(kT,{data:_,title:"Edges"})},A=()=>{let _=[{name:"Profiles",value:r==null?void 0:r.profiles.length},{name:"Vertices",value:r==null?void 0:r.nodesCount},{name:"Edges",value:r==null?void 0:r.edgesCount}];return v(kT,{data:_,title:"Overview"})};return v(tt,{children:[v(bu,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${s}`,children:v(br,{pub:s})}),v("span",{style:{flex:1},className:"ml-1",children:"Test Data"})]})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),"All trust data generated is solely for testing and will not be submitted to the relays. The profiles used are exclusively for demonstration purposes and do not reflect any real-life trust situations.",v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:[v(qg,{className:"btn btn-sm",onClick:d,children:"Create Influencer Graph"}),v(qg,{className:"btn btn-sm",onClick:w,children:"Create Large Graph 10k nodes"}),v(qg,{className:"btn btn-sm",onClick:b,children:"Delete Large Graph 10k nodes"}),v(qg,{className:"btn btn-sm",onClick:c,children:"Reset All"})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:["Status: ",r==null?void 0:r.message]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex",children:[v("div",{className:"flex flex-1 gap-4",children:A()}),v("div",{className:"flex flex-1 gap-4",children:T()}),v("div",{className:"flex flex-1 gap-4",children:x()})]})]})};_h.init({autologin:!1,autofollow:!1});class O1t extends Wn{componentDidMount(){window.onload=()=>{De.get("loggedIn").on(this.inject())},De.get("unseenMsgsTotal").on(this.inject()),tW.then(()=>this.setState({translationLoaded:!0})),De.get("showLoginModal").on(this.inject())}handleRoute(r){const t=r.url;this.setState({activeRoute:t}),De.get("activeRoute").put(t)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}electronCmd(r){console.log(r)}render(){let r="";const t=this.state;t.activeRoute&&t.activeRoute.length>1&&(r=Ir.capitalize(t.activeRoute.replace("/","").split("?")[0]));const n=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) %s | Dpeep`:"%s | Dpeep",i=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) Dpeep`:"Dpeep";if(!t.translationLoaded)return v("div",{});if(!t.loggedIn&&window.location.pathname.length<=1)return v(iw,{fullScreen:!0});const s=o=>{var a;return(a=o.id)!=null&&a.startsWith("note")?v(T8,{id:o.id}):v(Xb,{id:o.id,tab:"posts",path:o.path})};return v("div",{className:"flex justify-center",children:[v("section",{className:"flex w-full max-w-screen-xl justify-between relative",children:[v(ft,{when:t.loggedIn,children:v(ike,{})}),v(vh,{titleTemplate:n,defaultTitle:i,children:[v("title",{children:r}),v("meta",{name:"description",content:"Connecting People"}),v("meta",{property:"og:type",content:"website"}),v("meta",{property:"og:title",content:r}),v("meta",{property:"og:description",content:"Connecting People"}),v("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),v("meta",{name:"twitter:card",content:"summary_large_image"}),v("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),v("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),v("div",{className:"pb-16 md:pb-0 relative flex h-full flex-grow flex-col w-1/2",children:v(yH,{onChange:o=>this.handleRoute(o),children:[v(lAe,{path:"/"}),v(mV,{path:"/search",focus:!0}),v(hAe,{path:"/key"}),v(aAe,{path:"/global"}),v(cAe,{path:"/search/:keyword"}),v(iw,{path:"/login",fullScreen:!0}),v(uAe,{path:"/notifications"}),v(p8,{path:"/chat/hashtag/:hashtag?"}),v(p8,{path:"/chat/:id?"}),v(T8,{path:"/post/:id+"}),v(KAe,{path:"/torrent/:id+"}),v(yke,{path:"/about"}),v(UAe,{path:"/settings/:page?"}),v($Ae,{path:"/logout"}),v(g8,{path:"/explorer/:path?"}),v(g8,{path:"/explorer/:path+"}),v(VIe,{path:"/profile/edit"}),v(WAe,{path:"/subscribe"}),v(Xb,{path:"/profile/:id",tab:"posts"}),v(Xb,{path:"/:id/replies",tab:"replies"}),v(Xb,{path:"/:id/likes",tab:"likes"}),v(m8,{path:"/follows/:id"}),v(m8,{followers:!0,path:"/followers/:id"}),v(d1t,{path:"/graph/:npub?/:dir?/:trusttype?/:view?/:filter?"}),v(A1t,{path:"/demo/:id?"}),v(s,{path:"/:id"})]})}),t.loggedIn?v(qAe,{}):null,v(p1e,{}),v(h1e,{})]}),v(ft,{when:t.showLoginModal,children:v(ml,{centerVertically:!0,showContainer:!0,onClose:()=>De.get("showLoginModal").put(!1),children:v(iw,{})})})]})}}Ir.showConsoleWarning();Sp(v(O1t,{}),document.getElementById("app"));export{Tn as c,no as g,lve as r};
