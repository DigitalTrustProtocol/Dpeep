var Xoe=Object.defineProperty;var Joe=(e,r,t)=>r in e?Xoe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var ce=(e,r,t)=>(Joe(e,typeof r!="symbol"?r+"":r,t),t),nE=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var Ln=(e,r,t)=>(nE(e,r,"read from private field"),t?t.call(e):r.get(e)),Yr=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},ko=(e,r,t,n)=>(nE(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var Qn=(e,r,t)=>(nE(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var bm,at,Tz,Bf,kD,Iz,kT,Az,mp={},Oz=[],Qoe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h_=Array.isArray;function Jl(e,r){for(var t in r)e[t]=r[t];return e}function Cz(e){var r=e.parentNode;r&&r.removeChild(e)}function Qe(e,r,t){var n,i,s,o={};for(s in r)s=="key"?n=r[s]:s=="ref"?i=r[s]:o[s]=r[s];if(arguments.length>2&&(o.children=arguments.length>3?bm.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return iy(e,o,n,i,null)}function iy(e,r,t,n,i){var s={type:e,props:r,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Tz};return i==null&&at.vnode!=null&&at.vnode(s),s}function wm(){return{current:null}}function ut(e){return e.children}function zn(e,r){this.props=e,this.context=r}function Cw(e,r){if(r==null)return e.__?Cw(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?Cw(e):null}function Pz(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return Pz(e)}}function TT(e){(!e.__d&&(e.__d=!0)&&Bf.push(e)&&!Pw.__r++||kD!==at.debounceRendering)&&((kD=at.debounceRendering)||Iz)(Pw)}function Pw(){var e,r,t,n,i,s,o,a,l;for(Bf.sort(kT);e=Bf.shift();)e.__d&&(r=Bf.length,n=void 0,i=void 0,s=void 0,a=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],i=[],(s=Jl({},o)).__v=o.__v+1,o3(l,o,s,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??Cw(o),o.__h,i),Bz(n,o,i),o.__e!=a&&Pz(o)),Bf.length>r&&Bf.sort(kT));Pw.__r=0}function Nz(e,r,t,n,i,s,o,a,l,u,f){var c,d,y,w,b,T,_,A,x,I,O=0,C=n&&n.__k||Oz,g=C.length,M=g,B=r.length;for(t.__k=[],c=0;c<B;c++)(w=t.__k[c]=(w=r[c])==null||typeof w=="boolean"||typeof w=="function"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?iy(null,w,null,null,w):h_(w)?iy(ut,{children:w},null,null,null):w.__b>0?iy(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null&&(w.__=t,w.__b=t.__b+1,(A=eae(w,C,_=c+O,M))===-1?y=mp:(y=C[A]||mp,C[A]=void 0,M--),o3(e,w,y,i,s,o,a,l,u,f),b=w.__e,(d=w.ref)&&y.ref!=d&&(y.ref&&a3(y.ref,null,w),f.push(d,w.__c||b,w)),b!=null&&(T==null&&(T=b),I=!(x=y===mp||y.__v===null)&&A===_,x?A==-1&&O--:A!==_&&(A===_+1?(O++,I=!0):A>_?M>B-_?(O+=A-_,I=!0):O--:O=A<_&&A==_-1?A-_:0),_=c+O,I=I||A==c&&!x,typeof w.type!="function"||A===_&&y.__k!==w.__k?typeof w.type=="function"||I?w.__d!==void 0?(l=w.__d,w.__d=void 0):l=b.nextSibling:l=Dz(e,b,l):l=Rz(w,l,e),typeof t.type=="function"&&(t.__d=l)));for(t.__e=T,c=g;c--;)C[c]!=null&&(typeof t.type=="function"&&C[c].__e!=null&&C[c].__e==t.__d&&(t.__d=C[c].__e.nextSibling),Mz(C[c],C[c]))}function Rz(e,r,t){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,r=typeof n.type=="function"?Rz(n,r,t):Dz(t,n.__e,r));return r}function Sa(e,r){return r=r||[],e==null||typeof e=="boolean"||(h_(e)?e.some(function(t){Sa(t,r)}):r.push(e)),r}function Dz(e,r,t){return t==null||t.parentNode!==e?e.insertBefore(r,null):r==t&&r.parentNode!=null||e.insertBefore(r,t),r.nextSibling}function eae(e,r,t,n){var i=e.key,s=e.type,o=t-1,a=t+1,l=r[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<r.length;){if(o>=0){if((l=r[o])&&i==l.key&&s===l.type)return o;o--}if(a<r.length){if((l=r[a])&&i==l.key&&s===l.type)return a;a++}}return-1}function tae(e,r,t,n,i){var s;for(s in t)s==="children"||s==="key"||s in r||Nw(e,s,null,t[s],n);for(s in r)i&&typeof r[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===r[s]||Nw(e,s,r[s],t[s],n)}function TD(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||Qoe.test(r)?t:t+"px"}function Nw(e,r,t,n,i){var s;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(r in n)t&&r in t||TD(e.style,r,"");if(t)for(r in t)n&&t[r]===n[r]||TD(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")s=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+s]=t,t?n||e.addEventListener(r,s?AD:ID,s):e.removeEventListener(r,s?AD:ID,s);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function ID(e){return this.l[e.type+!1](at.event?at.event(e):e)}function AD(e){return this.l[e.type+!0](at.event?at.event(e):e)}function o3(e,r,t,n,i,s,o,a,l,u){var f,c,d,y,w,b,T,_,A,x,I,O,C,g,M,B=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=r.__e=t.__e,r.__h=null,s=[a]),(f=at.__b)&&f(r);try{e:if(typeof B=="function"){if(_=r.props,A=(f=B.contextType)&&n[f.__c],x=f?A?A.props.value:f.__:n,t.__c?T=(c=r.__c=t.__c).__=c.__E:("prototype"in B&&B.prototype.render?r.__c=c=new B(_,x):(r.__c=c=new zn(_,x),c.constructor=B,c.render=nae),A&&A.sub(c),c.props=_,c.state||(c.state={}),c.context=x,c.__n=n,d=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),B.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Jl({},c.__s)),Jl(c.__s,B.getDerivedStateFromProps(_,c.__s))),y=c.props,w=c.state,c.__v=r,d)B.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(B.getDerivedStateFromProps==null&&_!==y&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(_,x),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(_,c.__s,x)===!1||r.__v===t.__v)){for(r.__v!==t.__v&&(c.props=_,c.state=c.__s,c.__d=!1),r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(z){z&&(z.__=r)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(_,c.__s,x),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(y,w,b)})}if(c.context=x,c.props=_,c.__P=e,c.__e=!1,O=at.__r,C=0,"prototype"in B&&B.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(r),f=c.render(c.props,c.state,c.context),g=0;g<c._sb.length;g++)c.__h.push(c._sb[g]);c._sb=[]}else do c.__d=!1,O&&O(r),f=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++C<25);c.state=c.__s,c.getChildContext!=null&&(n=Jl(Jl({},n),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(b=c.getSnapshotBeforeUpdate(y,w)),Nz(e,h_(M=f!=null&&f.type===ut&&f.key==null?f.props.children:f)?M:[M],r,t,n,i,s,o,a,l,u),c.base=r.__e,r.__h=null,c.__h.length&&o.push(c),T&&(c.__E=c.__=null)}else s==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=rae(t.__e,r,t,n,i,s,o,l,u);(f=at.diffed)&&f(r)}catch(z){r.__v=null,(l||s!=null)&&(r.__e=a,r.__h=!!l,s[s.indexOf(a)]=null),at.__e(z,r,t)}}function Bz(e,r,t){for(var n=0;n<t.length;n++)a3(t[n],t[++n],t[++n]);at.__c&&at.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){at.__e(s,i.__v)}})}function rae(e,r,t,n,i,s,o,a,l){var u,f,c,d=t.props,y=r.props,w=r.type,b=0;if(w==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!w&&(w?u.localName===w:u.nodeType===3)){e=u,s[b]=null;break}}if(e==null){if(w===null)return document.createTextNode(y);e=i?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,y.is&&y),s=null,a=!1}if(w===null)d===y||a&&e.data===y||(e.data=y);else{if(s=s&&bm.call(e.childNodes),f=(d=t.props||mp).dangerouslySetInnerHTML,c=y.dangerouslySetInnerHTML,!a){if(s!=null)for(d={},b=0;b<e.attributes.length;b++)d[e.attributes[b].name]=e.attributes[b].value;(c||f)&&(c&&(f&&c.__html==f.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(tae(e,y,d,i,a),c)r.__k=[];else if(Nz(e,h_(b=r.props.children)?b:[b],r,t,n,i&&w!=="foreignObject",s,o,s?s[0]:t.__k&&Cw(t,0),a,l),s!=null)for(b=s.length;b--;)s[b]!=null&&Cz(s[b]);a||("value"in y&&(b=y.value)!==void 0&&(b!==e.value||w==="progress"&&!b||w==="option"&&b!==d.value)&&Nw(e,"value",b,d.value,!1),"checked"in y&&(b=y.checked)!==void 0&&b!==e.checked&&Nw(e,"checked",b,d.checked,!1))}return e}function a3(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(n){at.__e(n,t)}}function Mz(e,r,t){var n,i;if(at.unmount&&at.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||a3(n,null,r)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){at.__e(s,r)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Mz(n[i],r,t||typeof e.type!="function");t||e.__e==null||Cz(e.__e),e.__=e.__e=e.__d=void 0}function nae(e,r,t){return this.constructor(e,t)}function Rp(e,r,t){var n,i,s,o;at.__&&at.__(e,r),i=(n=typeof t=="function")?null:t&&t.__k||r.__k,s=[],o=[],o3(r,e=(!n&&t||r).__k=Qe(ut,null,[e]),i||mp,mp,r.ownerSVGElement!==void 0,!n&&t?[t]:i?null:r.firstChild?bm.call(r.childNodes):null,s,!n&&t?t:i?i.__e:r.firstChild,n,o),Bz(s,e,o)}function Lz(e,r){Rp(e,r,Lz)}function Fz(e,r,t){var n,i,s,o,a=Jl({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),r)s=="key"?n=r[s]:s=="ref"?i=r[s]:a[s]=r[s]===void 0&&o!==void 0?o[s]:r[s];return arguments.length>2&&(a.children=arguments.length>3?bm.call(arguments,2):t),iy(e.type,a,n||e.key,i||e.ref,null)}function l3(e,r){var t={__c:r="__cC"+Az++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[r]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,TT(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}bm=Oz.slice,at={__e:function(e,r,t,n){for(var i,s,o;r=r.__;)if((i=r.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},Tz=0,zn.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Jl({},this.state),typeof e=="function"&&(e=e(Jl({},t),this.props)),e&&Jl(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),TT(this))},zn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),TT(this))},zn.prototype.render=ut,Bf=[],Iz=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,kT=function(e,r){return e.__v.__b-r.__v.__b},Pw.__r=0,Az=0;typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.16.0",at,{Fragment:ut,Component:zn});function OD(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function iae(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(i,s){if(i){if(typeof i=="string")return OD(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?OD(i,s):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var CD={};function Wl(e){return e.type===ut?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var sy=[],Pd=[];function jz(){return sy.length>0?sy[sy.length-1]:null}var PD=!1;function iE(e){return typeof e.type=="function"&&e.type!=ut}function es(e){for(var r=[e],t=e;t.__o!=null;)r.push(t.__o),t=t.__o;return r.reduce(function(n,i){n+="  in "+Wl(i);var s=i.__source;return s?n+=" (at "+s.fileName+":"+s.lineNumber+")":PD||(PD=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var sae=typeof WeakMap=="function";function zz(e){return e?typeof e.type=="function"?e.__===null?e.__e!==null&&e.__e.parentNode!==null?e.__e.parentNode.localName:"":zz(e.__):e.type:""}var oae=zn.prototype.setState;zn.prototype.setState=function(e,r){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+es(jz())),oae.call(this,e,r)};var aae=zn.prototype.forceUpdate;function Fl(e){var r=e.props,t=Wl(e),n="";for(var i in r)if(r.hasOwnProperty(i)&&i!=="children"){var s=r[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),n+=" "+i+"="+JSON.stringify(s)}var o=r.children;return"<"+t+n+(o&&o.length?">..</"+t+">":" />")}zn.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+es(jz())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+es(this.__v)),aae.call(this,e)},function(){(function(){var b=at.__b,T=at.diffed,_=at.__,A=at.vnode,x=at.__r;at.diffed=function(I){iE(I)&&Pd.pop(),sy.pop(),T&&T(I)},at.__b=function(I){iE(I)&&sy.push(I),b&&b(I)},at.__=function(I,O){Pd=[],_&&_(I,O)},at.vnode=function(I){I.__o=Pd.length>0?Pd[Pd.length-1]:null,A&&A(I)},at.__r=function(I){iE(I)&&Pd.push(I),x&&x(I)}})();var e=!1,r=at.__b,t=at.diffed,n=at.vnode,i=at.__r,s=at.__e,o=at.__,a=at.__h,l=at.__c,u=sae?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,f=[],c=[];at.__e=function(b,T,_,A){if(T&&T.__c&&typeof b.then=="function"){var x=b;b=new Error("Missing Suspense. The throwing component was: "+Wl(T));for(var I=T;I;I=I.__)if(I.__c&&I.__c.__c){b=x;break}if(b instanceof Error)throw b}try{(A=A||{}).componentStack=es(T),s(b,T,_,A),typeof b.then!="function"&&setTimeout(function(){throw b})}catch(O){throw O}},at.__=function(b,T){if(!T)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var _;switch(T.nodeType){case 1:case 11:case 9:_=!0;break;default:_=!1}if(!_){var A=Wl(b);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+T+" instead: render(<"+A+" />, "+T+");")}o&&o(b,T)},at.__b=function(b){var T=b.type;if(typeof T!="string"||T!=="thead"&&T!=="tfoot"&&T!=="tbody"&&T!=="tr"&&T!=="td"&&T!=="th"||c.push(b),e=!0,T===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+Fl(b)+`

`+es(b));if(T!=null&&typeof T=="object")throw T.__k!==void 0&&T.__e!==void 0?new Error("Invalid type passed to createElement(): "+T+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+Wl(b)+" = "+Fl(T)+`;
  let vnode = <My`+Wl(b)+` />;

This usually happens when you export a JSX literal and not the component.

`+es(b)):new Error("Invalid type passed to createElement(): "+(Array.isArray(T)?"array":T));if(b.ref!==void 0&&typeof b.ref!="function"&&typeof b.ref!="object"&&!("$$typeof"in b))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof b.ref+`] instead
`+Fl(b)+`

`+es(b));if(typeof b.type=="string"){for(var _ in b.props)if(_[0]==="o"&&_[1]==="n"&&typeof b.props[_]!="function"&&b.props[_]!=null)throw new Error(`Component's "`+_+'" property should be a function, but got ['+typeof b.props[_]+`] instead
`+Fl(b)+`

`+es(b))}if(typeof b.type=="function"&&b.type.propTypes){if(b.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(b.type)){var A="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var x=b.type();u.lazyPropTypes.set(b.type,!0),console.warn(A+"Component wrapped in lazy() is "+Wl(x))}catch{console.warn(A+"We will log the wrapped component's name once it is loaded.")}}var I=b.props;b.type.__f&&delete(I=function(O,C){for(var g in C)O[g]=C[g];return O}({},I)).ref,function(O,C,g,M,B){Object.keys(O).forEach(function(z){var V;try{V=O[z](C,z,M,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ne){V=ne}V&&!(V.message in CD)&&(CD[V.message]=!0,console.error("Failed prop type: "+V.message+(B&&`
`+B()||"")))})}(b.type.propTypes,I,0,Wl(b),function(){return es(b)})}r&&r(b)},at.__r=function(b){i&&i(b),e=!0},at.__h=function(b,T,_){if(!b||!e)throw new Error("Hook can only be invoked from render methods.");a&&a(b,T,_)};var d=function(b,T){return{get:function(){var _="get"+b+T;f&&f.indexOf(_)<0&&(f.push(_),console.warn("getting vnode."+b+" is deprecated, "+T))},set:function(){var _="set"+b+T;f&&f.indexOf(_)<0&&(f.push(_),console.warn("setting vnode."+b+" is not allowed, "+T))}}},y={nodeName:d("nodeName","use vnode.type"),attributes:d("attributes","use vnode.props"),children:d("children","use vnode.props.children")},w=Object.create({},y);at.vnode=function(b){var T=b.props;if(b.type!==null&&T!=null&&("__source"in T||"__self"in T)){var _=b.props={};for(var A in T){var x=T[A];A==="__source"?b.__source=x:A==="__self"?b.__self=x:_[A]=x}}b.__proto__=w,n&&n(b)},at.diffed=function(b){if(b.__k&&b.__k.forEach(function(V){if(typeof V=="object"&&V&&V.type===void 0){var ne=Object.keys(V).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+ne+`}.

`+es(b))}}),e=!1,t&&t(b),b.__k!=null)for(var T=[],_=0;_<b.__k.length;_++){var A=b.__k[_];if(A&&A.key!=null){var x=A.key;if(T.indexOf(x)!==-1){console.error('Following component has two or more children with the same key attribute: "'+x+`". This may cause glitches and misbehavior in rendering process. Component: 

`+Fl(b)+`

`+es(b));break}T.push(x)}}if(b.__c!=null&&b.__c.__H!=null){var I=b.__c.__H.__;if(I)for(var O=0;O<I.length;O+=1){var C=I[O];if(C.__H){for(var g,M=iae(C.__H);!(g=M()).done;)if((z=g.value)!=z){var B=Wl(b);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+O+" in component "+B+" was called with NaN.")}}}}var z},at.__c=function(b,T){for(var _=0;_<c.length;_++){var A=c[_],x=A.type,I=zz(A.__);x!=="thead"&&x!=="tfoot"&&x!=="tbody"||I==="table"?x==="tr"&&I!=="thead"&&I!=="tfoot"&&I!=="tbody"&&I!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+Fl(A)+`

`+es(A)):x==="td"&&I!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+Fl(A)+`

`+es(A)):x==="th"&&I!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+Fl(A)+`

`+es(A)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+Fl(A)+`

`+es(A))}c=[],l&&l(b,T)}}();var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function io(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yc(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var Hz={exports:{}},lae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uae=lae,cae=uae;function Uz(){}function Wz(){}Wz.resetWarningCache=Uz;var fae=function(){function e(n,i,s,o,a,l){if(l!==cae){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Wz,resetWarningCache:Uz};return t.PropTypes=t,t};Hz.exports=fae();var hae=Hz.exports;const rn=io(hae);var pu,Wr,sE,ND,Dp=0,qz=[],q1=[],RD=at.__b,DD=at.__r,BD=at.diffed,MD=at.__c,LD=at.unmount;function zh(e,r){at.__h&&at.__h(Wr,e,Dp||r),Dp=0;var t=Wr.__H||(Wr.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:q1}),t.__[e]}function Le(e){return Dp=1,u3(Yz,e)}function u3(e,r,t){var n=zh(pu++,2);if(n.t=e,!n.__c&&(n.__=[t?t(r):Yz(void 0,r),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=Wr,!Wr.u)){var i=function(a,l,u){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(d){return d.__c});if(f.every(function(d){return!d.__N}))return!s||s.call(this,a,l,u);var c=!1;return f.forEach(function(d){if(d.__N){var y=d.__[0];d.__=d.__N,d.__N=void 0,y!==d.__[0]&&(c=!0)}}),!(!c&&n.__c.props===a)&&(!s||s.call(this,a,l,u))};Wr.u=!0;var s=Wr.shouldComponentUpdate,o=Wr.componentWillUpdate;Wr.componentWillUpdate=function(a,l,u){if(this.__e){var f=s;s=void 0,i(a,l,u),s=f}o&&o.call(this,a,l,u)},Wr.shouldComponentUpdate=i}return n.__N||n.__}function St(e,r){var t=zh(pu++,3);!at.__s&&c3(t.__H,r)&&(t.__=e,t.i=r,Wr.__H.__h.push(t))}function $m(e,r){var t=zh(pu++,4);!at.__s&&c3(t.__H,r)&&(t.__=e,t.i=r,Wr.__h.push(t))}function ro(e){return Dp=5,vu(function(){return{current:e}},[])}function Kz(e,r,t){Dp=6,$m(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function vu(e,r){var t=zh(pu++,7);return c3(t.__H,r)?(t.__V=e(),t.i=r,t.__h=e,t.__V):t.__}function xh(e,r){return Dp=8,vu(function(){return e},r)}function d_(e){var r=Wr.context[e.__c],t=zh(pu++,9);return t.c=e,r?(t.__==null&&(t.__=!0,r.sub(Wr)),r.props.value):e.__}function Vz(e,r){at.useDebugValue&&at.useDebugValue(r?r(e):e)}function dae(e){var r=zh(pu++,10),t=Le();return r.__=e,Wr.componentDidCatch||(Wr.componentDidCatch=function(n,i){r.__&&r.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function Gz(){var e=zh(pu++,11);if(!e.__){for(var r=Wr.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var t=r.__m||(r.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function pae(){for(var e;e=qz.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(K1),e.__H.__h.forEach(IT),e.__H.__h=[]}catch(r){e.__H.__h=[],at.__e(r,e.__v)}}at.__b=function(e){Wr=null,RD&&RD(e)},at.__r=function(e){DD&&DD(e),pu=0;var r=(Wr=e.__c).__H;r&&(sE===Wr?(r.__h=[],Wr.__h=[],r.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=q1,t.__N=t.i=void 0})):(r.__h.forEach(K1),r.__h.forEach(IT),r.__h=[],pu=0)),sE=Wr},at.diffed=function(e){BD&&BD(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(qz.push(r)!==1&&ND===at.requestAnimationFrame||((ND=at.requestAnimationFrame)||vae)(pae)),r.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==q1&&(t.__=t.__V),t.i=void 0,t.__V=q1})),sE=Wr=null},at.__c=function(e,r){r.some(function(t){try{t.__h.forEach(K1),t.__h=t.__h.filter(function(n){return!n.__||IT(n)})}catch(n){r.some(function(i){i.__h&&(i.__h=[])}),r=[],at.__e(n,t.__v)}}),MD&&MD(e,r)},at.unmount=function(e){LD&&LD(e);var r,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{K1(n)}catch(i){r=i}}),t.__H=void 0,r&&at.__e(r,t.__v))};var FD=typeof requestAnimationFrame=="function";function vae(e){var r,t=function(){clearTimeout(n),FD&&cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100);FD&&(r=requestAnimationFrame(t))}function K1(e){var r=Wr,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),Wr=r}function IT(e){var r=Wr;e.__c=e.__(),Wr=r}function c3(e,r){return!e||e.length!==r.length||r.some(function(t,n){return t!==e[n]})}function Yz(e,r){return typeof r=="function"?r(e):r}function Zz(e,r){for(var t in r)e[t]=r[t];return e}function AT(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var n in r)if(n!=="__source"&&e[n]!==r[n])return!0;return!1}function oE(e,r){return e===r&&(e!==0||1/e==1/r)||e!=e&&r!=r}function Ty(e){this.props=e}function gi(e,r){function t(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),r?!r(this.props,i)||!o:AT(this.props,i)}function n(i){return this.shouldComponentUpdate=t,Qe(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Ty.prototype=new zn).isPureReactComponent=!0,Ty.prototype.shouldComponentUpdate=function(e,r){return AT(this.props,e)||AT(this.state,r)};var jD=at.__b;at.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),jD&&jD(e)};var gae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Hr(e){function r(t){var n=Zz({},t);return delete n.ref,e(n,t.ref||null)}return r.$$typeof=gae,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var zD=function(e,r){return e==null?null:Sa(Sa(e).map(r))},Xz={map:zD,forEach:zD,count:function(e){return e?Sa(e).length:0},only:function(e){var r=Sa(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:Sa},yae=at.__e;at.__e=function(e,r,t,n){if(e.then){for(var i,s=r;s=s.__;)if((i=s.__c)&&i.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),i.__c(e,r)}yae(e,r,t,n)};var HD=at.unmount;function Jz(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Zz({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Jz(n,r,t)})),e}function Qz(e,r,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Qz(n,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function oy(){this.__u=0,this.t=null,this.__b=null}function eH(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function tH(e){var r,t,n;function i(s){if(r||(r=e()).then(function(o){t=o.default||o},function(o){n=o}),n)throw n;if(!t)throw r;return Qe(t,s)}return i.displayName="Lazy",i.__f=!0,i}function tp(){this.u=null,this.o=null}at.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&e.__h===!0&&(e.type=null),HD&&HD(e)},(oy.prototype=new zn).__c=function(e,r){var t=r.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=eH(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=Qz(u,u.__c.__P,u.__c.__O)}var f;for(n.setState({__a:n.__b=null});f=n.t.pop();)f.forceUpdate()}},l=r.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},oy.prototype.componentWillUnmount=function(){this.t=[]},oy.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Jz(this.__b,t,n.__O=n.__P)}this.__b=null}var i=r.__a&&Qe(ut,null,e.fallback);return i&&(i.__h=null),[Qe(ut,null,r.__a?null:e.children),i]};var UD=function(e,r,t){if(++t[1]===t[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function mae(e){return this.getChildContext=function(){return e.context},e.children}function bae(e){var r=this,t=e.i;r.componentWillUnmount=function(){Rp(null,r.l),r.l=null,r.i=null},r.i&&r.i!==t&&r.componentWillUnmount(),e.__v?(r.l||(r.i=t,r.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),r.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),r.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),r.i.removeChild(n)}}),Rp(Qe(mae,{context:r.context},e.__v),r.l)):r.l&&r.componentWillUnmount()}function rH(e,r){var t=Qe(bae,{__v:e,i:r});return t.containerInfo=r,t}(tp.prototype=new zn).__a=function(e){var r=this,t=eH(r.__v),n=r.o.get(e);return n[0]++,function(i){var s=function(){r.props.revealOrder?(n.push(i),UD(r,e,n)):i()};t?t(s):s()}},tp.prototype.render=function(e){this.u=null,this.o=new Map;var r=Sa(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.o.set(r[t],this.u=[1,0,this.u]);return e.children},tp.prototype.componentDidUpdate=tp.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,t){UD(e,t,r)})};var nH=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wae=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,$ae=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,_ae=/[A-Z0-9]/g,xae=typeof document<"u",Eae=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function iH(e,r,t){return r.__k==null&&(r.textContent=""),Rp(e,r),typeof t=="function"&&t(),e?e.__c:null}function sH(e,r,t){return Lz(e,r),typeof t=="function"&&t(),e?e.__c:null}zn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(zn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var WD=at.event;function Sae(){}function kae(){return this.cancelBubble}function Tae(){return this.defaultPrevented}at.event=function(e){return WD&&(e=WD(e)),e.persist=Sae,e.isPropagationStopped=kae,e.isDefaultPrevented=Tae,e.nativeEvent=e};var f3,Iae={enumerable:!1,configurable:!0,get:function(){return this.class}},qD=at.vnode;at.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,n=r.type,i={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||xae&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||Eae(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":$ae.test(s)?s=a:n.indexOf("-")===-1&&wae.test(s)?s=s.replace(_ae,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Sa(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Sa(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",Iae)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),r.props=i}(e),e.$$typeof=nH,qD&&qD(e)};var KD=at.__r;at.__r=function(e){KD&&KD(e),f3=e.__c};var VD=at.diffed;at.diffed=function(e){VD&&VD(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value),f3=null};var oH={ReactCurrentDispatcher:{current:{readContext:function(e){return f3.__n[e.__c].props.value}}}},Aae="17.0.2";function aH(e){return Qe.bind(null,e)}function h3(e){return!!e&&e.$$typeof===nH}function lH(e){return h3(e)?Fz.apply(null,arguments):e}function uH(e){return!!e.__k&&(Rp(null,e),!0)}function cH(e){return e&&(e.base||e.nodeType===1&&e)||null}var fH=function(e,r){return e(r)},hH=function(e,r){return e(r)},dH=ut;function d3(e){e()}function pH(e){return e}function vH(){return[!1,d3]}var gH=$m;function yH(e,r){var t=r(),n=Le({h:{__:t,v:r}}),i=n[0].h,s=n[1];return $m(function(){i.__=t,i.v=r,oE(i.__,r())||s({h:i})},[e,t,r]),St(function(){return oE(i.__,i.v())||s({h:i}),e(function(){oE(i.__,i.v())||s({h:i})})},[e]),t}var ka={useState:Le,useId:Gz,useReducer:u3,useEffect:St,useLayoutEffect:$m,useInsertionEffect:gH,useTransition:vH,useDeferredValue:pH,useSyncExternalStore:yH,startTransition:d3,useRef:ro,useImperativeHandle:Kz,useMemo:vu,useCallback:xh,useContext:d_,useDebugValue:Vz,version:"17.0.2",Children:Xz,render:iH,hydrate:sH,unmountComponentAtNode:uH,createPortal:rH,createElement:Qe,createContext:l3,createFactory:aH,cloneElement:lH,createRef:wm,Fragment:ut,isValidElement:h3,findDOMNode:cH,Component:zn,PureComponent:Ty,memo:gi,forwardRef:Hr,flushSync:hH,unstable_batchedUpdates:fH,StrictMode:dH,Suspense:oy,SuspenseList:tp,lazy:tH,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:oH};const Oae=Object.freeze(Object.defineProperty({__proto__:null,Children:Xz,Component:zn,Fragment:ut,PureComponent:Ty,StrictMode:dH,Suspense:oy,SuspenseList:tp,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:oH,cloneElement:lH,createContext:l3,createElement:Qe,createFactory:aH,createPortal:rH,createRef:wm,default:ka,findDOMNode:cH,flushSync:hH,forwardRef:Hr,hydrate:sH,isValidElement:h3,lazy:tH,memo:gi,render:iH,startTransition:d3,unmountComponentAtNode:uH,unstable_batchedUpdates:fH,useCallback:xh,useContext:d_,useDebugValue:Vz,useDeferredValue:pH,useEffect:St,useErrorBoundary:dae,useId:Gz,useImperativeHandle:Kz,useInsertionEffect:gH,useLayoutEffect:$m,useMemo:vu,useReducer:u3,useRef:ro,useState:Le,useSyncExternalStore:yH,useTransition:vH,version:Aae},Symbol.toStringTag,{value:"Module"})),Cae=Yc(Oae);function Pae(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var mH=Cae,Nae=Pae(mH);function GD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Rae(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var Dae=!!(typeof window<"u"&&window.document&&window.document.createElement);function Bae(e,r,t){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof r!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=e(o.map(function(f){return f.props})),u.canUseDOM?r(a):t&&(a=t(a))}var u=function(f){Rae(c,f);function c(){return f.apply(this,arguments)||this}c.peek=function(){return a},c.rewind=function(){if(c.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var w=a;return a=void 0,o=[],w};var d=c.prototype;return d.UNSAFE_componentWillMount=function(){o.push(this),l()},d.componentDidUpdate=function(){l()},d.componentWillUnmount=function(){var w=o.indexOf(this);o.splice(w,1),l()},d.render=function(){return Nae.createElement(s,this.props)},c}(mH.PureComponent);return GD(u,"displayName","SideEffect("+n(s)+")"),GD(u,"canUseDOM",Dae),u}}var Mae=Bae;const Lae=io(Mae);var Fae=typeof Element<"u",jae=typeof Map=="function",zae=typeof Set=="function",Hae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function V1(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,n,i;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(!V1(e[n],r[n]))return!1;return!0}var s;if(jae&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!V1(n.value[1],r.get(n.value[0])))return!1;return!0}if(zae&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(Hae&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof r.valueOf=="function")return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof r.toString=="function")return e.toString()===r.toString();if(i=Object.keys(e),t=i.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;if(Fae&&e instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!V1(e[i[n]],r[i[n]]))return!1;return!0}return e!==e&&r!==r}var Uae=function(r,t){try{return V1(r,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Wae=io(Uae);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var YD=Object.getOwnPropertySymbols,qae=Object.prototype.hasOwnProperty,Kae=Object.prototype.propertyIsEnumerable;function Vae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Gae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Yae=Gae()?Object.assign:function(e,r){for(var t,n=Vae(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)qae.call(t,o)&&(n[o]=t[o]);if(YD){i=YD(t);for(var a=0;a<i.length;a++)Kae.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};const Zae=io(Yae);var ih={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Xt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Xt).map(function(e){return Xt[e]});var nn={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Rw={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Iy={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Xae=Object.keys(Rw).reduce(function(e,r){return e[Rw[r]]=r,e},{}),Jae=[Xt.NOSCRIPT,Xt.SCRIPT,Xt.STYLE],$a="data-react-helmet",Qae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ele=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},tle=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),xs=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},rle=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},ZD=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},nle=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e},OT=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},ile=function(r){var t=bp(r,Xt.TITLE),n=bp(r,Iy.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=bp(r,Iy.DEFAULT_TITLE);return t||i||void 0},sle=function(r){return bp(r,Iy.ON_CHANGE_CLIENT_STATE)||function(){}},aE=function(r,t){return t.filter(function(n){return typeof n[r]<"u"}).map(function(n){return n[r]}).reduce(function(n,i){return xs({},n,i)},{})},ole=function(r,t){return t.filter(function(n){return typeof n[Xt.BASE]<"u"}).map(function(n){return n[Xt.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(r.indexOf(l)!==-1&&i[l])return n.concat(i)}return n},[])},Cg=function(r,t,n){var i={};return n.filter(function(s){return Array.isArray(s[r])?!0:(typeof s[r]<"u"&&cle("Helmet: "+r+' should be of type "Array". Instead found type "'+Qae(s[r])+'"'),!1)}).map(function(s){return s[r]}).reverse().reduce(function(s,o){var a={};o.filter(function(d){for(var y=void 0,w=Object.keys(d),b=0;b<w.length;b++){var T=w[b],_=T.toLowerCase();t.indexOf(_)!==-1&&!(y===nn.REL&&d[y].toLowerCase()==="canonical")&&!(_===nn.REL&&d[_].toLowerCase()==="stylesheet")&&(y=_),t.indexOf(T)!==-1&&(T===nn.INNER_HTML||T===nn.CSS_TEXT||T===nn.ITEM_PROP)&&(y=T)}if(!y||!d[y])return!1;var A=d[y].toLowerCase();return i[y]||(i[y]={}),a[y]||(a[y]={}),i[y][A]?!1:(a[y][A]=!0,!0)}).reverse().forEach(function(d){return s.push(d)});for(var l=Object.keys(a),u=0;u<l.length;u++){var f=l[u],c=Zae({},i[f],a[f]);i[f]=c}return s},[]).reverse()},bp=function(r,t){for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.hasOwnProperty(t))return i[t]}return null},ale=function(r){return{baseTag:ole([nn.HREF,nn.TARGET],r),bodyAttributes:aE(ih.BODY,r),defer:bp(r,Iy.DEFER),encode:bp(r,Iy.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:aE(ih.HTML,r),linkTags:Cg(Xt.LINK,[nn.REL,nn.HREF],r),metaTags:Cg(Xt.META,[nn.NAME,nn.CHARSET,nn.HTTPEQUIV,nn.PROPERTY,nn.ITEM_PROP],r),noscriptTags:Cg(Xt.NOSCRIPT,[nn.INNER_HTML],r),onChangeClientState:sle(r),scriptTags:Cg(Xt.SCRIPT,[nn.SRC,nn.INNER_HTML],r),styleTags:Cg(Xt.STYLE,[nn.CSS_TEXT],r),title:ile(r),titleAttributes:aE(ih.TITLE,r)}},CT=function(){var e=Date.now();return function(r){var t=Date.now();t-e>16?(e=t,r(t)):setTimeout(function(){CT(r)},0)}}(),XD=function(r){return clearTimeout(r)},lle=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||CT:global.requestAnimationFrame||CT,ule=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||XD:global.cancelAnimationFrame||XD,cle=function(r){return console&&typeof console.warn=="function"&&console.warn(r)},Pg=null,fle=function(r){Pg&&ule(Pg),r.defer?Pg=lle(function(){JD(r,function(){Pg=null})}):(JD(r),Pg=null)},JD=function(r,t){var n=r.baseTag,i=r.bodyAttributes,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.onChangeClientState,f=r.scriptTags,c=r.styleTags,d=r.title,y=r.titleAttributes;PT(Xt.BODY,i),PT(Xt.HTML,s),hle(d,y);var w={baseTag:Nd(Xt.BASE,n),linkTags:Nd(Xt.LINK,o),metaTags:Nd(Xt.META,a),noscriptTags:Nd(Xt.NOSCRIPT,l),scriptTags:Nd(Xt.SCRIPT,f),styleTags:Nd(Xt.STYLE,c)},b={},T={};Object.keys(w).forEach(function(_){var A=w[_],x=A.newTags,I=A.oldTags;x.length&&(b[_]=x),I.length&&(T[_]=w[_].oldTags)}),t&&t(),u(r,b,T)},bH=function(r){return Array.isArray(r)?r.join(""):r},hle=function(r,t){typeof r<"u"&&document.title!==r&&(document.title=bH(r)),PT(Xt.TITLE,t)},PT=function(r,t){var n=document.getElementsByTagName(r)[0];if(n){for(var i=n.getAttribute($a),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],f=t[u]||"";n.getAttribute(u)!==f&&n.setAttribute(u,f),s.indexOf(u)===-1&&s.push(u);var c=o.indexOf(u);c!==-1&&o.splice(c,1)}for(var d=o.length-1;d>=0;d--)n.removeAttribute(o[d]);s.length===o.length?n.removeAttribute($a):n.getAttribute($a)!==a.join(",")&&n.setAttribute($a,a.join(","))}},Nd=function(r,t){var n=document.head||document.querySelector(Xt.HEAD),i=n.querySelectorAll(r+"["+$a+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(r);for(var f in l)if(l.hasOwnProperty(f))if(f===nn.INNER_HTML)u.innerHTML=l.innerHTML;else if(f===nn.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var c=typeof l[f]>"u"?"":l[f];u.setAttribute(f,c)}u.setAttribute($a,"true"),s.some(function(d,y){return a=y,u.isEqualNode(d)})?s.splice(a,1):o.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:o}},wH=function(r){return Object.keys(r).reduce(function(t,n){var i=typeof r[n]<"u"?n+'="'+r[n]+'"':""+n;return t?t+" "+i:i},"")},dle=function(r,t,n,i){var s=wH(n),o=bH(t);return s?"<"+r+" "+$a+'="true" '+s+">"+OT(o,i)+"</"+r+">":"<"+r+" "+$a+'="true">'+OT(o,i)+"</"+r+">"},ple=function(r,t,n){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(u){return!(u===nn.INNER_HTML||u===nn.CSS_TEXT)}).reduce(function(u,f){var c=typeof s[f]>"u"?f:f+'="'+OT(s[f],n)+'"';return u?u+" "+c:c},""),a=s.innerHTML||s.cssText||"",l=Jae.indexOf(r)===-1;return i+"<"+r+" "+$a+'="true" '+o+(l?"/>":">"+a+"</"+r+">")},"")},$H=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Rw[i]||i]=r[i],n},t)},vle=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Xae[i]||i]=r[i],n},t)},gle=function(r,t,n){var i,s=(i={key:t},i[$a]=!0,i),o=$H(n,s);return[ka.createElement(Xt.TITLE,o,t)]},yle=function(r,t){return t.map(function(n,i){var s,o=(s={key:i},s[$a]=!0,s);return Object.keys(n).forEach(function(a){var l=Rw[a]||a;if(l===nn.INNER_HTML||l===nn.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=n[a]}),ka.createElement(r,o)})},jl=function(r,t,n){switch(r){case Xt.TITLE:return{toComponent:function(){return gle(r,t.title,t.titleAttributes)},toString:function(){return dle(r,t.title,t.titleAttributes,n)}};case ih.BODY:case ih.HTML:return{toComponent:function(){return $H(t)},toString:function(){return wH(t)}};default:return{toComponent:function(){return yle(r,t)},toString:function(){return ple(r,t,n)}}}},_H=function(r){var t=r.baseTag,n=r.bodyAttributes,i=r.encode,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.scriptTags,f=r.styleTags,c=r.title,d=c===void 0?"":c,y=r.titleAttributes;return{base:jl(Xt.BASE,t,i),bodyAttributes:jl(ih.BODY,n,i),htmlAttributes:jl(ih.HTML,s,i),link:jl(Xt.LINK,o,i),meta:jl(Xt.META,a,i),noscript:jl(Xt.NOSCRIPT,l,i),script:jl(Xt.SCRIPT,u,i),style:jl(Xt.STYLE,f,i),title:jl(Xt.TITLE,{title:d,titleAttributes:y},i)}},mle=function(r){var t,n;return n=t=function(i){rle(s,i);function s(){return ele(this,s),nle(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!Wae(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Xt.SCRIPT:case Xt.NOSCRIPT:return{innerHTML:l};case Xt.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,f=a.arrayTypeChildren,c=a.newChildProps,d=a.nestedChildren;return xs({},f,(l={},l[u.type]=[].concat(f[u.type]||[],[xs({},c,this.mapNestedChildrenToProps(u,d))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,u,f=a.child,c=a.newProps,d=a.newChildProps,y=a.nestedChildren;switch(f.type){case Xt.TITLE:return xs({},c,(l={},l[f.type]=y,l.titleAttributes=xs({},d),l));case Xt.BODY:return xs({},c,{bodyAttributes:xs({},d)});case Xt.HTML:return xs({},c,{htmlAttributes:xs({},d)})}return xs({},c,(u={},u[f.type]=xs({},d),u))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=xs({},l);return Object.keys(a).forEach(function(f){var c;u=xs({},u,(c={},c[f]=a[f],c))}),u},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var u=this,f={};return ka.Children.forEach(a,function(c){if(!(!c||!c.props)){var d=c.props,y=d.children,w=ZD(d,["children"]),b=vle(w);switch(u.warnOnInvalidChildren(c,y),c.type){case Xt.LINK:case Xt.META:case Xt.NOSCRIPT:case Xt.SCRIPT:case Xt.STYLE:f=u.flattenArrayTypeChildren({child:c,arrayTypeChildren:f,newChildProps:b,nestedChildren:y});break;default:l=u.mapObjectTypeChildren({child:c,newProps:l,newChildProps:b,nestedChildren:y});break}}}),l=this.mapArrayTypeChildrenToProps(f,l),l},s.prototype.render=function(){var a=this.props,l=a.children,u=ZD(a,["children"]),f=xs({},u);return l&&(f=this.mapChildrenToProps(l,f)),ka.createElement(r,f)},tle(s,null,[{key:"canUseDOM",set:function(a){r.canUseDOM=a}}]),s}(ka.Component),t.propTypes={base:rn.object,bodyAttributes:rn.object,children:rn.oneOfType([rn.arrayOf(rn.node),rn.node]),defaultTitle:rn.string,defer:rn.bool,encodeSpecialCharacters:rn.bool,htmlAttributes:rn.object,link:rn.arrayOf(rn.object),meta:rn.arrayOf(rn.object),noscript:rn.arrayOf(rn.object),onChangeClientState:rn.func,script:rn.arrayOf(rn.object),style:rn.arrayOf(rn.object),title:rn.string,titleAttributes:rn.object,titleTemplate:rn.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=r.peek,t.rewind=function(){var i=r.rewind();return i||(i=_H({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},ble=function(){return null},wle=Lae(ale,fle,_H)(ble),Eh=mle(wle);Eh.renderStatic=Eh.rewind;var $le={};function Wg(e,r){for(var t in r)e[t]=r[t];return e}function NT(e,r,t){var n,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),o={};if(s&&s[1])for(var a=s[1].split("&"),l=0;l<a.length;l++){var u=a[l].split("=");o[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=RT(e.replace(i,"")),r=RT(r||"");for(var f=Math.max(e.length,r.length),c=0;c<f;c++)if(r[c]&&r[c].charAt(0)===":"){var d=r[c].replace(/(^:|[+*?]+$)/g,""),y=(r[c].match(/[+*?]+$/)||$le)[0]||"",w=~y.indexOf("+"),b=~y.indexOf("*"),T=e[c]||"";if(!T&&!b&&(y.indexOf("?")<0||w)){n=!1;break}if(o[d]=decodeURIComponent(T),w||b){o[d]=e.slice(c).map(decodeURIComponent).join("/");break}}else if(r[c]!==e[c]){n=!1;break}return(t.default===!0||n!==!1)&&o}function _le(e,r){return e.rank<r.rank?1:e.rank>r.rank?-1:e.index-r.index}function xle(e,r){return e.index=r,e.rank=function(t){return t.props.default?0:RT(t.props.path).map(Ele).join("")}(e),e.props}function RT(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Ele(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Sle={},sh=[],ay=[],Gs=null,p3={url:v3()},xH=l3(p3);function kle(){var e=d_(xH);if(e===p3){var r=Le()[1];St(function(){return ay.push(r),function(){return ay.splice(ay.indexOf(r),1)}},[])}return[e,_r]}function v3(){var e;return""+((e=Gs&&Gs.location?Gs.location:Gs&&Gs.getCurrentLocation?Gs.getCurrentLocation():typeof location<"u"?location:Sle).pathname||"")+(e.search||"")}function _r(e,r){return r===void 0&&(r=!1),typeof e!="string"&&e.url&&(r=e.replace,e=e.url),function(t){for(var n=sh.length;n--;)if(sh[n].canRoute(t))return!0;return!1}(e)&&function(t,n){n===void 0&&(n="push"),Gs&&Gs[n]?Gs[n](t):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,t)}(e,r?"replace":"push"),EH(e)}function EH(e){for(var r=!1,t=0;t<sh.length;t++)sh[t].routeTo(e)&&(r=!0);return r}function Tle(e){if(e&&e.getAttribute){var r=e.getAttribute("href"),t=e.getAttribute("target");if(r&&r.match(/^\//g)&&(!t||t.match(/^_?self$/i)))return _r(r)}}function Ile(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function SH(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var r=e.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(Tle(r))return Ile(e)}while(r=r.parentNode)}}var QD=!1;function kH(e){e.history&&(Gs=e.history),this.state={url:e.url||v3()}}Wg(kH.prototype=new zn,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var r=Sa(this.props.children);return this.g(r,e)!==void 0},routeTo:function(e){this.setState({url:e});var r=this.canRoute(e);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;QD||(QD=!0,Gs||addEventListener("popstate",function(){EH(v3())}),addEventListener("click",SH)),sh.push(this),Gs&&(this.u=Gs.listen(function(r){var t=r.location||r;e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),sh.splice(sh.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,r){e=e.filter(xle).sort(_le);for(var t=0;t<e.length;t++){var n=e[t],i=NT(r,n.props.path,n.props);if(i)return[n,i]}},render:function(e,r){var t,n,i=e.onChange,s=r.url,o=this.c,a=this.g(Sa(e.children),s);if(a&&(n=Fz(a[0],Wg(Wg({url:s,matches:t=a[1]},t),{key:void 0,ref:void 0}))),s!==(o&&o.url)){Wg(p3,o=this.c={url:s,previous:o&&o.url,current:n,path:n?n.props.path:null,matches:t}),o.router=this,o.active=n?[n]:[];for(var l=ay.length;l--;)ay[l]({});typeof i=="function"&&i(o)}return Qe(xH.Provider,{value:o},n)}});var Qt=function(e){return Qe("a",Wg({onClick:SH},e))};function Ale({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Ole=Hr(Ale),TH=Ole;function Cle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ple=Hr(Cle),Nle=Ple;function Rle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}const Dle=Hr(Rle),Ble=Dle;function Mle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))}const Lle=Hr(Mle),Fle=Lle;function jle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const zle=Hr(jle),Hle=zle;function Ule({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Wle=Hr(Ule),IH=Wle;function qle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Kle=Hr(qle),AH=Kle;function Vle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Gle=Hr(Vle),OH=Gle;function Yle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Zle=Hr(Yle),Xle=Zle;function Jle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const Qle=Hr(Jle),g3=Qle;function eue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const tue=Hr(eue),rue=tue;function nue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"}))}const iue=Hr(nue),sue=iue;function oue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const aue=Hr(oue),CH=aue;function lue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z",clipRule:"evenodd"}))}const uue=Hr(lue),cue=uue;function fue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const hue=Hr(fue),due=hue;function pue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))}const vue=Hr(pue),gue=vue;function yue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const mue=Hr(yue),y3=mue;function bue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),Qe("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const wue=Hr(bue),PH=wue;function $ue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const _ue=Hr($ue),xue=_ue;function Eue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z",clipRule:"evenodd"}))}const Sue=Hr(Eue),NH=Sue;function kue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}))}const Tue=Hr(kue),RH=Tue;function Iue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const Aue=Hr(Iue),m3=Aue;function Oue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const Cue=Hr(Oue),Pue=Cue;function Nue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const Rue=Hr(Nue),DH=Rue;function Due({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z",clipRule:"evenodd"}))}const Bue=Hr(Due),Mue=Bue;function Lue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const Fue=Hr(Lue),BH=Fue;var jue=0;function v(e,r,t,n,i,s){var o,a,l={};for(a in r)a=="ref"?o=r[a]:l[a]=r[a];var u={type:e,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--jue,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return at.vnode&&at.vnode(u),u}const to={video:v("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:v("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),magnifyingGlassBold:({width:e})=>v("svg",{fill:"none",width:e,viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),close:v("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:v("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:v("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[v("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),v("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:v("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[v("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),v("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),v("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),newFollower:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:v("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),search:v("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:v("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:v("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),network:v("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:v("g",{children:[v("g",{children:[v("g",{children:v("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),v("g",{children:v("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),v("g",{children:v("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),v("g",{children:v("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),v("g",{children:v("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),v("g",{children:v("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),checkmark:v("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:v("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})})};function qg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var MH={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,r){(function(t){e.exports=t()})(function(){return function t(n,i,s){function o(u,f){if(!i[u]){if(!n[u]){var c=typeof qg=="function"&&qg;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(w){var b=n[u][1][w];return o(b||w)},y,y.exports,t,n,i,s)}return i[u].exports}for(var a=typeof qg=="function"&&qg,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(w),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),a=function(){f.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:a=function(){setTimeout(w,0)};var d,y=[];function w(){d=!0;for(var T,_,A=y.length;A;){for(_=y,y=[],T=-1;++T<A;)_[T]();A=y.length}d=!1}n.exports=b;function b(T){y.push(T)===1&&!d&&a()}}).call(this,typeof On<"u"?On:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];n.exports=c;function c(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,O!==o&&b(this,O)}c.prototype.catch=function(O){return this.then(null,O)},c.prototype.then=function(O,C){if(typeof O!="function"&&this.state===u||typeof C!="function"&&this.state===l)return this;var g=new this.constructor(o);if(this.state!==f){var M=this.state===u?O:C;y(g,M,this.outcome)}else this.queue.push(new d(g,O,C));return g};function d(O,C,g){this.promise=O,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(O){a.resolve(this.promise,O)},d.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},d.prototype.callRejected=function(O){a.reject(this.promise,O)},d.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)};function y(O,C,g){s(function(){var M;try{M=C(g)}catch(B){return a.reject(O,B)}M===O?a.reject(O,new TypeError("Cannot resolve promise with itself")):a.resolve(O,M)})}a.resolve=function(O,C){var g=T(w,C);if(g.status==="error")return a.reject(O,g.value);var M=g.value;if(M)b(O,M);else{O.state=u,O.outcome=C;for(var B=-1,z=O.queue.length;++B<z;)O.queue[B].callFulfilled(C)}return O},a.reject=function(O,C){O.state=l,O.outcome=C;for(var g=-1,M=O.queue.length;++g<M;)O.queue[g].callRejected(C);return O};function w(O){var C=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof C=="function")return function(){C.apply(O,arguments)}}function b(O,C){var g=!1;function M(ne){g||(g=!0,a.reject(O,ne))}function B(ne){g||(g=!0,a.resolve(O,ne))}function z(){C(B,M)}var V=T(z);V.status==="error"&&M(V.value)}function T(O,C){var g={};try{g.value=O(C),g.status="success"}catch(M){g.status="error",g.value=M}return g}c.resolve=_;function _(O){return O instanceof this?O:a.resolve(new this(o),O)}c.reject=A;function A(O){var C=new this(o);return a.reject(C,O)}c.all=x;function x(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,M=!1;if(!g)return this.resolve([]);for(var B=new Array(g),z=0,V=-1,ne=new this(o);++V<g;)re(O[V],V);return ne;function re(J,F){C.resolve(J).then(Z,function(ie){M||(M=!0,a.reject(ne,ie))});function Z(ie){B[F]=ie,++z===g&&!M&&(M=!0,a.resolve(ne,B))}}}c.race=I;function I(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,M=!1;if(!g)return this.resolve([]);for(var B=-1,z=new this(o);++B<g;)V(O[B]);return z;function V(ne){C.resolve(ne).then(function(re){M||(M=!0,a.resolve(z,re))},function(re){M||(M=!0,a.reject(z,re))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof On<"u"?On:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,le){if(!(Y instanceof le))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),le=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||le)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(Y,le){Y=Y||[],le=le||{};try{return new Blob(Y,le)}catch(be){if(be.name!=="TypeError")throw be;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$e=new ee,Se=0;Se<Y.length;Se+=1)$e.append(Y[Se]);return $e.getBlob(le.type)}}typeof Promise>"u"&&t(3);var c=Promise;function d(Y,le){le&&Y.then(function(ee){le(null,ee)},function(ee){le(ee)})}function y(Y,le,ee){typeof le=="function"&&Y.then(le),typeof ee=="function"&&Y.catch(ee)}function w(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",_=void 0,A={},x=Object.prototype.toString,I="readonly",O="readwrite";function C(Y){for(var le=Y.length,ee=new ArrayBuffer(le),$e=new Uint8Array(ee),Se=0;Se<le;Se++)$e[Se]=Y.charCodeAt(Se);return ee}function g(Y){return new c(function(le){var ee=Y.transaction(T,O),$e=f([""]);ee.objectStore(T).put($e,"key"),ee.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),le(!1)},ee.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),be=navigator.userAgent.match(/Edge\//);le(be||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function M(Y){return typeof _=="boolean"?c.resolve(_):g(Y).then(function(le){return _=le,_})}function B(Y){var le=A[Y.name],ee={};ee.promise=new c(function($e,Se){ee.resolve=$e,ee.reject=Se}),le.deferredOperations.push(ee),le.dbReady?le.dbReady=le.dbReady.then(function(){return ee.promise}):le.dbReady=ee.promise}function z(Y){var le=A[Y.name],ee=le.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function V(Y,le){var ee=A[Y.name],$e=ee.deferredOperations.pop();if($e)return $e.reject(le),$e.promise}function ne(Y,le){return new c(function(ee,$e){if(A[Y.name]=A[Y.name]||Ge(),Y.db)if(le)B(Y),Y.db.close();else return ee(Y.db);var Se=[Y.name];le&&Se.push(Y.version);var be=l.open.apply(l,Se);le&&(be.onupgradeneeded=function(Fe){var Ye=be.result;try{Ye.createObjectStore(Y.storeName),Fe.oldVersion<=1&&Ye.createObjectStore(T)}catch(Je){if(Je.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Fe.oldVersion+" to version "+Fe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Je}}),be.onerror=function(Fe){Fe.preventDefault(),$e(be.error)},be.onsuccess=function(){var Fe=be.result;Fe.onversionchange=function(Ye){Ye.target.close()},ee(Fe),z(Y)}})}function re(Y){return ne(Y,!1)}function J(Y){return ne(Y,!0)}function F(Y,le){if(!Y.db)return!0;var ee=!Y.db.objectStoreNames.contains(Y.storeName),$e=Y.version<Y.db.version,Se=Y.version>Y.db.version;if($e&&(Y.version!==le&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),Se||ee){if(ee){var be=Y.db.version+1;be>Y.version&&(Y.version=be)}return!0}return!1}function Z(Y){return new c(function(le,ee){var $e=new FileReader;$e.onerror=ee,$e.onloadend=function(Se){var be=btoa(Se.target.result||"");le({__local_forage_encoded_blob:!0,data:be,type:Y.type})},$e.readAsBinaryString(Y)})}function ie(Y){var le=C(atob(Y.data));return f([le],{type:Y.type})}function _e(Y){return Y&&Y.__local_forage_encoded_blob}function we(Y){var le=this,ee=le._initReady().then(function(){var $e=A[le._dbInfo.name];if($e&&$e.dbReady)return $e.dbReady});return y(ee,Y,Y),ee}function Ce(Y){B(Y);for(var le=A[Y.name],ee=le.forages,$e=0;$e<ee.length;$e++){var Se=ee[$e];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return Y.db=null,re(Y).then(function(be){return Y.db=be,F(Y)?J(Y):be}).then(function(be){Y.db=le.db=be;for(var Fe=0;Fe<ee.length;Fe++)ee[Fe]._dbInfo.db=be}).catch(function(be){throw V(Y,be),be})}function He(Y,le,ee,$e){$e===void 0&&($e=1);try{var Se=Y.db.transaction(Y.storeName,le);ee(null,Se)}catch(be){if($e>0&&(!Y.db||be.name==="InvalidStateError"||be.name==="NotFoundError"))return c.resolve().then(function(){if(!Y.db||be.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),J(Y)}).then(function(){return Ce(Y).then(function(){He(Y,le,ee,$e-1)})}).catch(ee);ee(be)}}function Ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function it(Y){var le=this,ee={db:null};if(Y)for(var $e in Y)ee[$e]=Y[$e];var Se=A[ee.name];Se||(Se=Ge(),A[ee.name]=Se),Se.forages.push(le),le._initReady||(le._initReady=le.ready,le.ready=we);var be=[];function Fe(){return c.resolve()}for(var Ye=0;Ye<Se.forages.length;Ye++){var Je=Se.forages[Ye];Je!==le&&be.push(Je._initReady().catch(Fe))}var et=Se.forages.slice(0);return c.all(be).then(function(){return ee.db=Se.db,re(ee)}).then(function(ot){return ee.db=ot,F(ee,le._defaultConfig.version)?J(ee):ot}).then(function(ot){ee.db=Se.db=ot,le._dbInfo=ee;for(var xt=0;xt<et.length;xt++){var Lt=et[xt];Lt!==le&&(Lt._dbInfo.db=ee.db,Lt._dbInfo.version=ee.version)}})}function xe(Y,le){var ee=this;Y=w(Y);var $e=new c(function(Se,be){ee.ready().then(function(){He(ee._dbInfo,I,function(Fe,Ye){if(Fe)return be(Fe);try{var Je=Ye.objectStore(ee._dbInfo.storeName),et=Je.get(Y);et.onsuccess=function(){var ot=et.result;ot===void 0&&(ot=null),_e(ot)&&(ot=ie(ot)),Se(ot)},et.onerror=function(){be(et.error)}}catch(ot){be(ot)}})}).catch(be)});return d($e,le),$e}function ge(Y,le){var ee=this,$e=new c(function(Se,be){ee.ready().then(function(){He(ee._dbInfo,I,function(Fe,Ye){if(Fe)return be(Fe);try{var Je=Ye.objectStore(ee._dbInfo.storeName),et=Je.openCursor(),ot=1;et.onsuccess=function(){var xt=et.result;if(xt){var Lt=xt.value;_e(Lt)&&(Lt=ie(Lt));var mr=Y(Lt,xt.key,ot++);mr!==void 0?Se(mr):xt.continue()}else Se()},et.onerror=function(){be(et.error)}}catch(xt){be(xt)}})}).catch(be)});return d($e,le),$e}function Te(Y,le,ee){var $e=this;Y=w(Y);var Se=new c(function(be,Fe){var Ye;$e.ready().then(function(){return Ye=$e._dbInfo,x.call(le)==="[object Blob]"?M(Ye.db).then(function(Je){return Je?le:Z(le)}):le}).then(function(Je){He($e._dbInfo,O,function(et,ot){if(et)return Fe(et);try{var xt=ot.objectStore($e._dbInfo.storeName);Je===null&&(Je=void 0);var Lt=xt.put(Je,Y);ot.oncomplete=function(){Je===void 0&&(Je=null),be(Je)},ot.onabort=ot.onerror=function(){var mr=Lt.error?Lt.error:Lt.transaction.error;Fe(mr)}}catch(mr){Fe(mr)}})}).catch(Fe)});return d(Se,ee),Se}function je(Y,le){var ee=this;Y=w(Y);var $e=new c(function(Se,be){ee.ready().then(function(){He(ee._dbInfo,O,function(Fe,Ye){if(Fe)return be(Fe);try{var Je=Ye.objectStore(ee._dbInfo.storeName),et=Je.delete(Y);Ye.oncomplete=function(){Se()},Ye.onerror=function(){be(et.error)},Ye.onabort=function(){var ot=et.error?et.error:et.transaction.error;be(ot)}}catch(ot){be(ot)}})}).catch(be)});return d($e,le),$e}function $(Y){var le=this,ee=new c(function($e,Se){le.ready().then(function(){He(le._dbInfo,O,function(be,Fe){if(be)return Se(be);try{var Ye=Fe.objectStore(le._dbInfo.storeName),Je=Ye.clear();Fe.oncomplete=function(){$e()},Fe.onabort=Fe.onerror=function(){var et=Je.error?Je.error:Je.transaction.error;Se(et)}}catch(et){Se(et)}})}).catch(Se)});return d(ee,Y),ee}function S(Y){var le=this,ee=new c(function($e,Se){le.ready().then(function(){He(le._dbInfo,I,function(be,Fe){if(be)return Se(be);try{var Ye=Fe.objectStore(le._dbInfo.storeName),Je=Ye.count();Je.onsuccess=function(){$e(Je.result)},Je.onerror=function(){Se(Je.error)}}catch(et){Se(et)}})}).catch(Se)});return d(ee,Y),ee}function N(Y,le){var ee=this,$e=new c(function(Se,be){if(Y<0){Se(null);return}ee.ready().then(function(){He(ee._dbInfo,I,function(Fe,Ye){if(Fe)return be(Fe);try{var Je=Ye.objectStore(ee._dbInfo.storeName),et=!1,ot=Je.openKeyCursor();ot.onsuccess=function(){var xt=ot.result;if(!xt){Se(null);return}Y===0||et?Se(xt.key):(et=!0,xt.advance(Y))},ot.onerror=function(){be(ot.error)}}catch(xt){be(xt)}})}).catch(be)});return d($e,le),$e}function L(Y){var le=this,ee=new c(function($e,Se){le.ready().then(function(){He(le._dbInfo,I,function(be,Fe){if(be)return Se(be);try{var Ye=Fe.objectStore(le._dbInfo.storeName),Je=Ye.openKeyCursor(),et=[];Je.onsuccess=function(){var ot=Je.result;if(!ot){$e(et);return}et.push(ot.key),ot.continue()},Je.onerror=function(){Se(Je.error)}}catch(ot){Se(ot)}})}).catch(Se)});return d(ee,Y),ee}function j(Y,le){le=b.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var $e=this,Se;if(!Y.name)Se=c.reject("Invalid arguments");else{var be=Y.name===ee.name&&$e._dbInfo.db,Fe=be?c.resolve($e._dbInfo.db):re(Y).then(function(Ye){var Je=A[Y.name],et=Je.forages;Je.db=Ye;for(var ot=0;ot<et.length;ot++)et[ot]._dbInfo.db=Ye;return Ye});Y.storeName?Se=Fe.then(function(Ye){if(Ye.objectStoreNames.contains(Y.storeName)){var Je=Ye.version+1;B(Y);var et=A[Y.name],ot=et.forages;Ye.close();for(var xt=0;xt<ot.length;xt++){var Lt=ot[xt];Lt._dbInfo.db=null,Lt._dbInfo.version=Je}var mr=new c(function(lr,Gr){var Cr=l.open(Y.name,Je);Cr.onerror=function(un){var Di=Cr.result;Di.close(),Gr(un)},Cr.onupgradeneeded=function(){var un=Cr.result;un.deleteObjectStore(Y.storeName)},Cr.onsuccess=function(){var un=Cr.result;un.close(),lr(un)}});return mr.then(function(lr){et.db=lr;for(var Gr=0;Gr<ot.length;Gr++){var Cr=ot[Gr];Cr._dbInfo.db=lr,z(Cr._dbInfo)}}).catch(function(lr){throw(V(Y,lr)||c.resolve()).catch(function(){}),lr})}}):Se=Fe.then(function(Ye){B(Y);var Je=A[Y.name],et=Je.forages;Ye.close();for(var ot=0;ot<et.length;ot++){var xt=et[ot];xt._dbInfo.db=null}var Lt=new c(function(mr,lr){var Gr=l.deleteDatabase(Y.name);Gr.onerror=function(){var Cr=Gr.result;Cr&&Cr.close(),lr(Gr.error)},Gr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Gr.onsuccess=function(){var Cr=Gr.result;Cr&&Cr.close(),mr(Cr)}});return Lt.then(function(mr){Je.db=mr;for(var lr=0;lr<et.length;lr++){var Gr=et[lr];z(Gr._dbInfo)}}).catch(function(mr){throw(V(Y,mr)||c.resolve()).catch(function(){}),mr})})}return d(Se,le),Se}var K={_driver:"asyncStorage",_initStorage:it,_support:u(),iterate:ge,getItem:xe,setItem:Te,removeItem:je,clear:$,length:S,key:N,keys:L,dropInstance:j};function ae(){return typeof openDatabase=="function"}var ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",ze=/^~~local_forage_type~([^~]+)~/,st="__lfsc__:",wt=st.length,mt="arbf",pt="blob",Rt="si08",dr="ui08",Vr="uic8",ct="si16",It="si32",vn="ur16",Pi="ui32",Ki="fl32",gn="fl64",ps=wt+mt.length,fo=Object.prototype.toString;function Ni(Y){var le=Y.length*.75,ee=Y.length,$e,Se=0,be,Fe,Ye,Je;Y[Y.length-1]==="="&&(le--,Y[Y.length-2]==="="&&le--);var et=new ArrayBuffer(le),ot=new Uint8Array(et);for($e=0;$e<ee;$e+=4)be=ye.indexOf(Y[$e]),Fe=ye.indexOf(Y[$e+1]),Ye=ye.indexOf(Y[$e+2]),Je=ye.indexOf(Y[$e+3]),ot[Se++]=be<<2|Fe>>4,ot[Se++]=(Fe&15)<<4|Ye>>2,ot[Se++]=(Ye&3)<<6|Je&63;return et}function Vi(Y){var le=new Uint8Array(Y),ee="",$e;for($e=0;$e<le.length;$e+=3)ee+=ye[le[$e]>>2],ee+=ye[(le[$e]&3)<<4|le[$e+1]>>4],ee+=ye[(le[$e+1]&15)<<2|le[$e+2]>>6],ee+=ye[le[$e+2]&63];return le.length%3===2?ee=ee.substring(0,ee.length-1)+"=":le.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function ho(Y,le){var ee="";if(Y&&(ee=fo.call(Y)),Y&&(ee==="[object ArrayBuffer]"||Y.buffer&&fo.call(Y.buffer)==="[object ArrayBuffer]")){var $e,Se=st;Y instanceof ArrayBuffer?($e=Y,Se+=mt):($e=Y.buffer,ee==="[object Int8Array]"?Se+=Rt:ee==="[object Uint8Array]"?Se+=dr:ee==="[object Uint8ClampedArray]"?Se+=Vr:ee==="[object Int16Array]"?Se+=ct:ee==="[object Uint16Array]"?Se+=vn:ee==="[object Int32Array]"?Se+=It:ee==="[object Uint32Array]"?Se+=Pi:ee==="[object Float32Array]"?Se+=Ki:ee==="[object Float64Array]"?Se+=gn:le(new Error("Failed to get type for BinaryArray"))),le(Se+Vi($e))}else if(ee==="[object Blob]"){var be=new FileReader;be.onload=function(){var Fe=Ue+Y.type+"~"+Vi(this.result);le(st+pt+Fe)},be.readAsArrayBuffer(Y)}else try{le(JSON.stringify(Y))}catch(Fe){console.error("Couldn't convert value into a JSON string: ",Y),le(null,Fe)}}function af(Y){if(Y.substring(0,wt)!==st)return JSON.parse(Y);var le=Y.substring(ps),ee=Y.substring(wt,ps),$e;if(ee===pt&&ze.test(le)){var Se=le.match(ze);$e=Se[1],le=le.substring(Se[0].length)}var be=Ni(le);switch(ee){case mt:return be;case pt:return f([be],{type:$e});case Rt:return new Int8Array(be);case dr:return new Uint8Array(be);case Vr:return new Uint8ClampedArray(be);case ct:return new Int16Array(be);case vn:return new Uint16Array(be);case It:return new Int32Array(be);case Pi:return new Uint32Array(be);case Ki:return new Float32Array(be);case gn:return new Float64Array(be);default:throw new Error("Unkown type: "+ee)}}var po={serialize:ho,deserialize:af,stringToBuffer:Ni,bufferToString:Vi};function lf(Y,le,ee,$e){Y.executeSql("CREATE TABLE IF NOT EXISTS "+le.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,$e)}function sd(Y){var le=this,ee={db:null};if(Y)for(var $e in Y)ee[$e]=typeof Y[$e]!="string"?Y[$e].toString():Y[$e];var Se=new c(function(be,Fe){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(Ye){return Fe(Ye)}ee.db.transaction(function(Ye){lf(Ye,ee,function(){le._dbInfo=ee,be()},function(Je,et){Fe(et)})},Fe)});return ee.serializer=po,Se}function vo(Y,le,ee,$e,Se,be){Y.executeSql(ee,$e,Se,function(Fe,Ye){Ye.code===Ye.SYNTAX_ERR?Fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[le.storeName],function(Je,et){et.rows.length?be(Je,Ye):lf(Je,le,function(){Je.executeSql(ee,$e,Se,be)},be)},be):be(Fe,Ye)},be)}function ea(Y,le){var ee=this;Y=w(Y);var $e=new c(function(Se,be){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(Ye){vo(Ye,Fe,"SELECT * FROM "+Fe.storeName+" WHERE key = ? LIMIT 1",[Y],function(Je,et){var ot=et.rows.length?et.rows.item(0).value:null;ot&&(ot=Fe.serializer.deserialize(ot)),Se(ot)},function(Je,et){be(et)})})}).catch(be)});return d($e,le),$e}function Ma(Y,le){var ee=this,$e=new c(function(Se,be){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(Ye){vo(Ye,Fe,"SELECT * FROM "+Fe.storeName,[],function(Je,et){for(var ot=et.rows,xt=ot.length,Lt=0;Lt<xt;Lt++){var mr=ot.item(Lt),lr=mr.value;if(lr&&(lr=Fe.serializer.deserialize(lr)),lr=Y(lr,mr.key,Lt+1),lr!==void 0){Se(lr);return}}Se()},function(Je,et){be(et)})})}).catch(be)});return d($e,le),$e}function uf(Y,le,ee,$e){var Se=this;Y=w(Y);var be=new c(function(Fe,Ye){Se.ready().then(function(){le===void 0&&(le=null);var Je=le,et=Se._dbInfo;et.serializer.serialize(le,function(ot,xt){xt?Ye(xt):et.db.transaction(function(Lt){vo(Lt,et,"INSERT OR REPLACE INTO "+et.storeName+" (key, value) VALUES (?, ?)",[Y,ot],function(){Fe(Je)},function(mr,lr){Ye(lr)})},function(Lt){if(Lt.code===Lt.QUOTA_ERR){if($e>0){Fe(uf.apply(Se,[Y,Je,ee,$e-1]));return}Ye(Lt)}})})}).catch(Ye)});return d(be,ee),be}function od(Y,le,ee){return uf.apply(this,[Y,le,ee,1])}function Ri(Y,le){var ee=this;Y=w(Y);var $e=new c(function(Se,be){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(Ye){vo(Ye,Fe,"DELETE FROM "+Fe.storeName+" WHERE key = ?",[Y],function(){Se()},function(Je,et){be(et)})})}).catch(be)});return d($e,le),$e}function si(Y){var le=this,ee=new c(function($e,Se){le.ready().then(function(){var be=le._dbInfo;be.db.transaction(function(Fe){vo(Fe,be,"DELETE FROM "+be.storeName,[],function(){$e()},function(Ye,Je){Se(Je)})})}).catch(Se)});return d(ee,Y),ee}function Nu(Y){var le=this,ee=new c(function($e,Se){le.ready().then(function(){var be=le._dbInfo;be.db.transaction(function(Fe){vo(Fe,be,"SELECT COUNT(key) as c FROM "+be.storeName,[],function(Ye,Je){var et=Je.rows.item(0).c;$e(et)},function(Ye,Je){Se(Je)})})}).catch(Se)});return d(ee,Y),ee}function eg(Y,le){var ee=this,$e=new c(function(Se,be){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(Ye){vo(Ye,Fe,"SELECT key FROM "+Fe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Je,et){var ot=et.rows.length?et.rows.item(0).key:null;Se(ot)},function(Je,et){be(et)})})}).catch(be)});return d($e,le),$e}function ad(Y){var le=this,ee=new c(function($e,Se){le.ready().then(function(){var be=le._dbInfo;be.db.transaction(function(Fe){vo(Fe,be,"SELECT key FROM "+be.storeName,[],function(Ye,Je){for(var et=[],ot=0;ot<Je.rows.length;ot++)et.push(Je.rows.item(ot).key);$e(et)},function(Ye,Je){Se(Je)})})}).catch(Se)});return d(ee,Y),ee}function ld(Y){return new c(function(le,ee){Y.transaction(function($e){$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,be){for(var Fe=[],Ye=0;Ye<be.rows.length;Ye++)Fe.push(be.rows.item(Ye).name);le({db:Y,storeNames:Fe})},function(Se,be){ee(be)})},function($e){ee($e)})})}function go(Y,le){le=b.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var $e=this,Se;return Y.name?Se=new c(function(be){var Fe;Y.name===ee.name?Fe=$e._dbInfo.db:Fe=openDatabase(Y.name,"","",0),Y.storeName?be({db:Fe,storeNames:[Y.storeName]}):be(ld(Fe))}).then(function(be){return new c(function(Fe,Ye){be.db.transaction(function(Je){function et(mr){return new c(function(lr,Gr){Je.executeSql("DROP TABLE IF EXISTS "+mr,[],function(){lr()},function(Cr,un){Gr(un)})})}for(var ot=[],xt=0,Lt=be.storeNames.length;xt<Lt;xt++)ot.push(et(be.storeNames[xt]));c.all(ot).then(function(){Fe()}).catch(function(mr){Ye(mr)})},function(Je){Ye(Je)})})}):Se=c.reject("Invalid arguments"),d(Se,le),Se}var La={_driver:"webSQLStorage",_initStorage:sd,_support:ae(),iterate:Ma,getItem:ea,setItem:od,removeItem:Ri,clear:si,length:Nu,key:eg,keys:ad,dropInstance:go};function El(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Sl(Y,le){var ee=Y.name+"/";return Y.storeName!==le.storeName&&(ee+=Y.storeName+"/"),ee}function tg(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function rg(){return!tg()||localStorage.length>0}function ng(Y){var le=this,ee={};if(Y)for(var $e in Y)ee[$e]=Y[$e];return ee.keyPrefix=Sl(Y,le._defaultConfig),rg()?(le._dbInfo=ee,ee.serializer=po,c.resolve()):c.reject()}function ud(Y){var le=this,ee=le.ready().then(function(){for(var $e=le._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var be=localStorage.key(Se);be.indexOf($e)===0&&localStorage.removeItem(be)}});return d(ee,Y),ee}function ig(Y,le){var ee=this;Y=w(Y);var $e=ee.ready().then(function(){var Se=ee._dbInfo,be=localStorage.getItem(Se.keyPrefix+Y);return be&&(be=Se.serializer.deserialize(be)),be});return d($e,le),$e}function sg(Y,le){var ee=this,$e=ee.ready().then(function(){for(var Se=ee._dbInfo,be=Se.keyPrefix,Fe=be.length,Ye=localStorage.length,Je=1,et=0;et<Ye;et++){var ot=localStorage.key(et);if(ot.indexOf(be)===0){var xt=localStorage.getItem(ot);if(xt&&(xt=Se.serializer.deserialize(xt)),xt=Y(xt,ot.substring(Fe),Je++),xt!==void 0)return xt}}});return d($e,le),$e}function cd(Y,le){var ee=this,$e=ee.ready().then(function(){var Se=ee._dbInfo,be;try{be=localStorage.key(Y)}catch{be=null}return be&&(be=be.substring(Se.keyPrefix.length)),be});return d($e,le),$e}function fd(Y){var le=this,ee=le.ready().then(function(){for(var $e=le._dbInfo,Se=localStorage.length,be=[],Fe=0;Fe<Se;Fe++){var Ye=localStorage.key(Fe);Ye.indexOf($e.keyPrefix)===0&&be.push(Ye.substring($e.keyPrefix.length))}return be});return d(ee,Y),ee}function Fa(Y){var le=this,ee=le.keys().then(function($e){return $e.length});return d(ee,Y),ee}function hd(Y,le){var ee=this;Y=w(Y);var $e=ee.ready().then(function(){var Se=ee._dbInfo;localStorage.removeItem(Se.keyPrefix+Y)});return d($e,le),$e}function cf(Y,le,ee){var $e=this;Y=w(Y);var Se=$e.ready().then(function(){le===void 0&&(le=null);var be=le;return new c(function(Fe,Ye){var Je=$e._dbInfo;Je.serializer.serialize(le,function(et,ot){if(ot)Ye(ot);else try{localStorage.setItem(Je.keyPrefix+Y,et),Fe(be)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ye(xt),Ye(xt)}})})});return d(Se,ee),Se}function ff(Y,le){if(le=b.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var ee=this.config();Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName}var $e=this,Se;return Y.name?Se=new c(function(be){Y.storeName?be(Sl(Y,$e._defaultConfig)):be(Y.name+"/")}).then(function(be){for(var Fe=localStorage.length-1;Fe>=0;Fe--){var Ye=localStorage.key(Fe);Ye.indexOf(be)===0&&localStorage.removeItem(Ye)}}):Se=c.reject("Invalid arguments"),d(Se,le),Se}var Ru={_driver:"localStorageWrapper",_initStorage:ng,_support:El(),iterate:sg,getItem:ig,setItem:cf,removeItem:hd,clear:ud,length:Fa,key:cd,keys:fd,dropInstance:ff},dd=function(le,ee){return le===ee||typeof le=="number"&&typeof ee=="number"&&isNaN(le)&&isNaN(ee)},Du=function(le,ee){for(var $e=le.length,Se=0;Se<$e;){if(dd(le[Se],ee))return!0;Se++}return!1},ja=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ms={},hf={},ta={INDEXEDDB:K,WEBSQL:La,LOCALSTORAGE:Ru},pd=[ta.INDEXEDDB._driver,ta.WEBSQL._driver,ta.LOCALSTORAGE._driver],kl=["dropInstance"],za=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(kl),vd={description:"",driver:pd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function og(Y,le){Y[le]=function(){var ee=arguments;return Y.ready().then(function(){return Y[le].apply(Y,ee)})}}function Bu(){for(var Y=1;Y<arguments.length;Y++){var le=arguments[Y];if(le)for(var ee in le)le.hasOwnProperty(ee)&&(ja(le[ee])?arguments[0][ee]=le[ee].slice():arguments[0][ee]=le[ee])}return arguments[0]}var gd=function(){function Y(le){o(this,Y);for(var ee in ta)if(ta.hasOwnProperty(ee)){var $e=ta[ee],Se=$e._driver;this[ee]=Se,Ms[Se]||this.defineDriver($e)}this._defaultConfig=Bu({},vd),this._config=Bu({},this._defaultConfig,le),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $e in ee){if($e==="storeName"&&(ee[$e]=ee[$e].replace(/\W/g,"_")),$e==="version"&&typeof ee[$e]!="number")return new Error("Database version must be a number.");this._config[$e]=ee[$e]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},Y.prototype.defineDriver=function(ee,$e,Se){var be=new c(function(Fe,Ye){try{var Je=ee._driver,et=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){Ye(et);return}for(var ot=za.concat("_initStorage"),xt=0,Lt=ot.length;xt<Lt;xt++){var mr=ot[xt],lr=!Du(kl,mr);if((lr||ee[mr])&&typeof ee[mr]!="function"){Ye(et);return}}var Gr=function(){for(var Di=function(Mu){return function(){var bd=new Error("Method "+Mu+" is not implemented by the current driver"),pf=c.reject(bd);return d(pf,arguments[arguments.length-1]),pf}},Tl=0,yd=kl.length;Tl<yd;Tl++){var yo=kl[Tl];ee[yo]||(ee[yo]=Di(yo))}};Gr();var Cr=function(Di){Ms[Je]&&console.info("Redefining LocalForage driver: "+Je),Ms[Je]=ee,hf[Je]=Di,Fe()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(Cr,Ye):Cr(!!ee._support):Cr(!0)}catch(un){Ye(un)}});return y(be,$e,Se),be},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(ee,$e,Se){var be=Ms[ee]?c.resolve(Ms[ee]):c.reject(new Error("Driver not found."));return y(be,$e,Se),be},Y.prototype.getSerializer=function(ee){var $e=c.resolve(po);return y($e,ee),$e},Y.prototype.ready=function(ee){var $e=this,Se=$e._driverSet.then(function(){return $e._ready===null&&($e._ready=$e._initDriver()),$e._ready});return y(Se,ee,ee),Se},Y.prototype.setDriver=function(ee,$e,Se){var be=this;ja(ee)||(ee=[ee]);var Fe=this._getSupportedDrivers(ee);function Ye(){be._config.driver=be.driver()}function Je(xt){return be._extend(xt),Ye(),be._ready=be._initStorage(be._config),be._ready}function et(xt){return function(){var Lt=0;function mr(){for(;Lt<xt.length;){var lr=xt[Lt];return Lt++,be._dbInfo=null,be._ready=null,be.getDriver(lr).then(Je).catch(mr)}Ye();var Gr=new Error("No available storage method found.");return be._driverSet=c.reject(Gr),be._driverSet}return mr()}}var ot=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=ot.then(function(){var xt=Fe[0];return be._dbInfo=null,be._ready=null,be.getDriver(xt).then(function(Lt){be._driver=Lt._driver,Ye(),be._wrapLibraryMethodsWithReady(),be._initDriver=et(Fe)})}).catch(function(){Ye();var xt=new Error("No available storage method found.");return be._driverSet=c.reject(xt),be._driverSet}),y(this._driverSet,$e,Se),this._driverSet},Y.prototype.supports=function(ee){return!!hf[ee]},Y.prototype._extend=function(ee){Bu(this,ee)},Y.prototype._getSupportedDrivers=function(ee){for(var $e=[],Se=0,be=ee.length;Se<be;Se++){var Fe=ee[Se];this.supports(Fe)&&$e.push(Fe)}return $e},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,$e=za.length;ee<$e;ee++)og(this,za[ee])},Y.prototype.createInstance=function(ee){return new Y(ee)},Y}(),df=new gd;n.exports=df},{3:3}]},{},[4])(4)})})(MH);var zue=MH.exports;const pn=io(zue);var Dw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Dw.exports;(function(e,r){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",c=1,d=2,y=4,w=1,b=2,T=1,_=2,A=4,x=8,I=16,O=32,C=64,g=128,M=256,B=512,z=30,V="...",ne=800,re=16,J=1,F=2,Z=3,ie=1/0,_e=9007199254740991,we=17976931348623157e292,Ce=0/0,He=4294967295,Ge=He-1,it=He>>>1,xe=[["ary",g],["bind",T],["bindKey",_],["curry",x],["curryRight",I],["flip",B],["partial",O],["partialRight",C],["rearg",M]],ge="[object Arguments]",Te="[object Array]",je="[object AsyncFunction]",$="[object Boolean]",S="[object Date]",N="[object DOMException]",L="[object Error]",j="[object Function]",K="[object GeneratorFunction]",ae="[object Map]",ye="[object Number]",Ue="[object Null]",ze="[object Object]",st="[object Promise]",wt="[object Proxy]",mt="[object RegExp]",pt="[object Set]",Rt="[object String]",dr="[object Symbol]",Vr="[object Undefined]",ct="[object WeakMap]",It="[object WeakSet]",vn="[object ArrayBuffer]",Pi="[object DataView]",Ki="[object Float32Array]",gn="[object Float64Array]",ps="[object Int8Array]",fo="[object Int16Array]",Ni="[object Int32Array]",Vi="[object Uint8Array]",ho="[object Uint8ClampedArray]",af="[object Uint16Array]",po="[object Uint32Array]",lf=/\b__p \+= '';/g,sd=/\b(__p \+=) '' \+/g,vo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ea=/&(?:amp|lt|gt|quot|#39);/g,Ma=/[&<>"']/g,uf=RegExp(ea.source),od=RegExp(Ma.source),Ri=/<%-([\s\S]+?)%>/g,si=/<%([\s\S]+?)%>/g,Nu=/<%=([\s\S]+?)%>/g,eg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ad=/^\w*$/,ld=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,go=/[\\^$.*+?()[\]{}|]/g,La=RegExp(go.source),El=/^\s+/,Sl=/\s/,tg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rg=/\{\n\/\* \[wrapped with (.+)\] \*/,ng=/,? & /,ud=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ig=/[()=,{}\[\]\/\s]/,sg=/\\(\\)?/g,cd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fd=/\w*$/,Fa=/^[-+]0x[0-9a-f]+$/i,hd=/^0b[01]+$/i,cf=/^\[object .+?Constructor\]$/,ff=/^0o[0-7]+$/i,Ru=/^(?:0|[1-9]\d*)$/,dd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Du=/($^)/,ja=/['\n\r\u2028\u2029\\]/g,Ms="\\ud800-\\udfff",hf="\\u0300-\\u036f",ta="\\ufe20-\\ufe2f",pd="\\u20d0-\\u20ff",kl=hf+ta+pd,za="\\u2700-\\u27bf",vd="a-z\\xdf-\\xf6\\xf8-\\xff",og="\\xac\\xb1\\xd7\\xf7",Bu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gd="\\u2000-\\u206f",df=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",le="\\ufe0e\\ufe0f",ee=og+Bu+gd+df,$e="[']",Se="["+Ms+"]",be="["+ee+"]",Fe="["+kl+"]",Ye="\\d+",Je="["+za+"]",et="["+vd+"]",ot="[^"+Ms+ee+Ye+za+vd+Y+"]",xt="\\ud83c[\\udffb-\\udfff]",Lt="(?:"+Fe+"|"+xt+")",mr="[^"+Ms+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="["+Y+"]",un="\\u200d",Di="(?:"+et+"|"+ot+")",Tl="(?:"+Cr+"|"+ot+")",yd="(?:"+$e+"(?:d|ll|m|re|s|t|ve))?",yo="(?:"+$e+"(?:D|LL|M|RE|S|T|VE))?",md=Lt+"?",Mu="["+le+"]?",bd="(?:"+un+"(?:"+[mr,lr,Gr].join("|")+")"+Mu+md+")*",pf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ag=Mu+md+bd,Xx="(?:"+[Je,lr,Gr].join("|")+")"+ag,Jx="(?:"+[mr+Fe+"?",Fe,lr,Gr,Se].join("|")+")",lg=RegExp($e,"g"),Qx=RegExp(Fe,"g"),ug=RegExp(xt+"(?="+xt+")|"+Jx+ag,"g"),e2=RegExp([Cr+"?"+et+"+"+yd+"(?="+[be,Cr,"$"].join("|")+")",Tl+"+"+yo+"(?="+[be,Cr+Di,"$"].join("|")+")",Cr+"?"+Di+"+"+yd,Cr+"+"+yo,Zx,pf,Ye,Xx].join("|"),"g"),t2=RegExp("["+un+Ms+kl+le+"]"),r2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,n2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],i2=-1,jr={};jr[Ki]=jr[gn]=jr[ps]=jr[fo]=jr[Ni]=jr[Vi]=jr[ho]=jr[af]=jr[po]=!0,jr[ge]=jr[Te]=jr[vn]=jr[$]=jr[Pi]=jr[S]=jr[L]=jr[j]=jr[ae]=jr[ye]=jr[ze]=jr[mt]=jr[pt]=jr[Rt]=jr[ct]=!1;var Pr={};Pr[ge]=Pr[Te]=Pr[vn]=Pr[Pi]=Pr[$]=Pr[S]=Pr[Ki]=Pr[gn]=Pr[ps]=Pr[fo]=Pr[Ni]=Pr[ae]=Pr[ye]=Pr[ze]=Pr[mt]=Pr[pt]=Pr[Rt]=Pr[dr]=Pr[Vi]=Pr[ho]=Pr[af]=Pr[po]=!0,Pr[L]=Pr[j]=Pr[ct]=!1;var Hb={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},cg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ub={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fg=parseFloat,s2=parseInt,qb=typeof On=="object"&&On&&On.Object===Object&&On,o2=typeof self=="object"&&self&&self.Object===Object&&self,cn=qb||o2||Function("return this")(),wd=r&&!r.nodeType&&r,ra=wd&&!0&&e&&!e.nodeType&&e,Kb=ra&&ra.exports===wd,hg=Kb&&qb.process,vs=function(){try{var Q=ra&&ra.require&&ra.require("util").types;return Q||hg&&hg.binding&&hg.binding("util")}catch{}}(),m=vs&&vs.isArrayBuffer,k=vs&&vs.isDate,P=vs&&vs.isMap,D=vs&&vs.isRegExp,H=vs&&vs.isSet,U=vs&&vs.isTypedArray;function q(Q,pe,fe){switch(fe.length){case 0:return Q.call(pe);case 1:return Q.call(pe,fe[0]);case 2:return Q.call(pe,fe[0],fe[1]);case 3:return Q.call(pe,fe[0],fe[1],fe[2])}return Q.apply(pe,fe)}function ue(Q,pe,fe,Be){for(var We=-1,$t=Q==null?0:Q.length;++We<$t;){var _t=Q[We];pe(Be,_t,fe(_t),Q)}return Be}function se(Q,pe){for(var fe=-1,Be=Q==null?0:Q.length;++fe<Be&&pe(Q[fe],fe,Q)!==!1;);return Q}function Ee(Q,pe){for(var fe=Q==null?0:Q.length;fe--&&pe(Q[fe],fe,Q)!==!1;);return Q}function Pe(Q,pe){for(var fe=-1,Be=Q==null?0:Q.length;++fe<Be;)if(!pe(Q[fe],fe,Q))return!1;return!0}function De(Q,pe){for(var fe=-1,Be=Q==null?0:Q.length,We=0,$t=[];++fe<Be;){var _t=Q[fe];pe(_t,fe,Q)&&($t[We++]=_t)}return $t}function Ae(Q,pe){var fe=Q==null?0:Q.length;return!!fe&&Mr(Q,pe,0)>-1}function Xe(Q,pe,fe){for(var Be=-1,We=Q==null?0:Q.length;++Be<We;)if(fe(pe,Q[Be]))return!0;return!1}function bt(Q,pe){for(var fe=-1,Be=Q==null?0:Q.length,We=Array(Be);++fe<Be;)We[fe]=pe(Q[fe],fe,Q);return We}function Yt(Q,pe){for(var fe=-1,Be=pe.length,We=Q.length;++fe<Be;)Q[We+fe]=pe[fe];return Q}function Gt(Q,pe,fe,Be){var We=-1,$t=Q==null?0:Q.length;for(Be&&$t&&(fe=Q[++We]);++We<$t;)fe=pe(fe,Q[We],We,Q);return fe}function Yn(Q,pe,fe,Be){var We=Q==null?0:Q.length;for(Be&&We&&(fe=Q[--We]);We--;)fe=pe(fe,Q[We],We,Q);return fe}function fn(Q,pe){for(var fe=-1,Be=Q==null?0:Q.length;++fe<Be;)if(pe(Q[fe],fe,Q))return!0;return!1}var mo=Il("length");function bo(Q){return Q.split("")}function pr(Q){return Q.match(ud)||[]}function Ha(Q,pe,fe){var Be;return fe(Q,function(We,$t,_t){if(pe(We,$t,_t))return Be=$t,!1}),Be}function vr(Q,pe,fe,Be){for(var We=Q.length,$t=fe+(Be?1:-1);Be?$t--:++$t<We;)if(pe(Q[$t],$t,Q))return $t;return-1}function Mr(Q,pe,fe){return pe===pe?u2(Q,pe,fe):vr(Q,$d,fe)}function vf(Q,pe,fe,Be){for(var We=fe-1,$t=Q.length;++We<$t;)if(Be(Q[We],pe))return We;return-1}function $d(Q){return Q!==Q}function Ls(Q,pe){var fe=Q==null?0:Q.length;return fe?Bi(Q,pe)/fe:Ce}function Il(Q){return function(pe){return pe==null?t:pe[Q]}}function gs(Q){return function(pe){return Q==null?t:Q[pe]}}function na(Q,pe,fe,Be,We){return We(Q,function($t,_t,yt){fe=Be?(Be=!1,$t):pe(fe,$t,_t,yt)}),fe}function Ua(Q,pe){var fe=Q.length;for(Q.sort(pe);fe--;)Q[fe]=Q[fe].value;return Q}function Bi(Q,pe){for(var fe,Be=-1,We=Q.length;++Be<We;){var $t=pe(Q[Be]);$t!==t&&(fe=fe===t?$t:fe+$t)}return fe}function gf(Q,pe){for(var fe=-1,Be=Array(Q);++fe<Q;)Be[fe]=pe(fe);return Be}function ia(Q,pe){return bt(pe,function(fe){return[fe,Q[fe]]})}function wo(Q){return Q&&Q.slice(0,Gb(Q)+1).replace(El,"")}function Gi(Q){return function(pe){return Q(pe)}}function dg(Q,pe){return bt(pe,function(fe){return Q[fe]})}function yf(Q,pe){return Q.has(pe)}function Ar(Q,pe){for(var fe=-1,Be=Q.length;++fe<Be&&Mr(pe,Q[fe],0)>-1;);return fe}function mf(Q,pe){for(var fe=Q.length;fe--&&Mr(pe,Q[fe],0)>-1;);return fe}function Fs(Q,pe){for(var fe=Q.length,Be=0;fe--;)Q[fe]===pe&&++Be;return Be}var Lu=gs(Hb),a2=gs(cg);function l2(Q){return"\\"+Wb[Q]}function Vb(Q,pe){return Q==null?t:Q[pe]}function ys(Q){return t2.test(Q)}function pg(Q){return r2.test(Q)}function Wa(Q){for(var pe,fe=[];!(pe=Q.next()).done;)fe.push(pe.value);return fe}function _d(Q){var pe=-1,fe=Array(Q.size);return Q.forEach(function(Be,We){fe[++pe]=[We,Be]}),fe}function bf(Q,pe){return function(fe){return Q(pe(fe))}}function js(Q,pe){for(var fe=-1,Be=Q.length,We=0,$t=[];++fe<Be;){var _t=Q[fe];(_t===pe||_t===f)&&(Q[fe]=f,$t[We++]=fe)}return $t}function Al(Q){var pe=-1,fe=Array(Q.size);return Q.forEach(function(Be){fe[++pe]=Be}),fe}function vg(Q){var pe=-1,fe=Array(Q.size);return Q.forEach(function(Be){fe[++pe]=[Be,Be]}),fe}function u2(Q,pe,fe){for(var Be=fe-1,We=Q.length;++Be<We;)if(Q[Be]===pe)return Be;return-1}function xd(Q,pe,fe){for(var Be=fe+1;Be--;)if(Q[Be]===pe)return Be;return Be}function qa(Q){return ys(Q)?Yb(Q):mo(Q)}function Yi(Q){return ys(Q)?te(Q):bo(Q)}function Gb(Q){for(var pe=Q.length;pe--&&Sl.test(Q.charAt(pe)););return pe}var gg=gs(Ub);function Yb(Q){for(var pe=ug.lastIndex=0;ug.test(Q);)++pe;return pe}function te(Q){return Q.match(ug)||[]}function me(Q){return Q.match(e2)||[]}var Ie=function Q(pe){pe=pe==null?cn:Oe.defaults(cn.Object(),pe,Oe.pick(cn,n2));var fe=pe.Array,Be=pe.Date,We=pe.Error,$t=pe.Function,_t=pe.Math,yt=pe.Object,er=pe.RegExp,Dt=pe.String,ur=pe.TypeError,Zn=fe.prototype,oi=$t.prototype,Xn=yt.prototype,Zi=pe["__core-js_shared__"],sa=oi.toString,qt=Xn.hasOwnProperty,Kee=0,MN=function(){var h=/[^.]+$/.exec(Zi&&Zi.keys&&Zi.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Zb=Xn.toString,Vee=sa.call(yt),Gee=cn._,Yee=er("^"+sa.call(qt).replace(go,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xb=Kb?pe.Buffer:t,Fu=pe.Symbol,Jb=pe.Uint8Array,LN=Xb?Xb.allocUnsafe:t,Qb=bf(yt.getPrototypeOf,yt),FN=yt.create,jN=Xn.propertyIsEnumerable,e0=Zn.splice,zN=Fu?Fu.isConcatSpreadable:t,yg=Fu?Fu.iterator:t,wf=Fu?Fu.toStringTag:t,t0=function(){try{var h=Sf(yt,"defineProperty");return h({},"",{}),h}catch{}}(),Zee=pe.clearTimeout!==cn.clearTimeout&&pe.clearTimeout,Xee=Be&&Be.now!==cn.Date.now&&Be.now,Jee=pe.setTimeout!==cn.setTimeout&&pe.setTimeout,r0=_t.ceil,n0=_t.floor,c2=yt.getOwnPropertySymbols,Qee=Xb?Xb.isBuffer:t,HN=pe.isFinite,ete=Zn.join,tte=bf(yt.keys,yt),Jn=_t.max,Mi=_t.min,rte=Be.now,nte=pe.parseInt,UN=_t.random,ite=Zn.reverse,f2=Sf(pe,"DataView"),mg=Sf(pe,"Map"),h2=Sf(pe,"Promise"),Ed=Sf(pe,"Set"),bg=Sf(pe,"WeakMap"),wg=Sf(yt,"create"),i0=bg&&new bg,Sd={},ste=kf(f2),ote=kf(mg),ate=kf(h2),lte=kf(Ed),ute=kf(bg),s0=Fu?Fu.prototype:t,$g=s0?s0.valueOf:t,WN=s0?s0.toString:t;function G(h){if(yn(h)&&!Zt(h)&&!(h instanceof br)){if(h instanceof $o)return h;if(qt.call(h,"__wrapped__"))return qR(h)}return new $o(h)}var kd=function(){function h(){}return function(p){if(!hn(p))return{};if(FN)return FN(p);h.prototype=p;var E=new h;return h.prototype=t,E}}();function o0(){}function $o(h,p){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}G.templateSettings={escape:Ri,evaluate:si,interpolate:Nu,variable:"",imports:{_:G}},G.prototype=o0.prototype,G.prototype.constructor=G,$o.prototype=kd(o0.prototype),$o.prototype.constructor=$o;function br(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function cte(){var h=new br(this.__wrapped__);return h.__actions__=ms(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=ms(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=ms(this.__views__),h}function fte(){if(this.__filtered__){var h=new br(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function hte(){var h=this.__wrapped__.value(),p=this.__dir__,E=Zt(h),R=p<0,W=E?h.length:0,X=Ere(0,W,this.__views__),oe=X.start,ve=X.end,ke=ve-oe,Ke=R?ve:oe-1,Ve=this.__iteratees__,Ze=Ve.length,gt=0,At=Mi(ke,this.__takeCount__);if(!E||!R&&W==ke&&At==ke)return pR(h,this.__actions__);var Ht=[];e:for(;ke--&&gt<At;){Ke+=p;for(var nr=-1,Ut=h[Ke];++nr<Ze;){var yr=Ve[nr],wr=yr.iteratee,Us=yr.type,Qi=wr(Ut);if(Us==F)Ut=Qi;else if(!Qi){if(Us==J)continue e;break e}}Ht[gt++]=Ut}return Ht}br.prototype=kd(o0.prototype),br.prototype.constructor=br;function $f(h){var p=-1,E=h==null?0:h.length;for(this.clear();++p<E;){var R=h[p];this.set(R[0],R[1])}}function dte(){this.__data__=wg?wg(null):{},this.size=0}function pte(h){var p=this.has(h)&&delete this.__data__[h];return this.size-=p?1:0,p}function vte(h){var p=this.__data__;if(wg){var E=p[h];return E===l?t:E}return qt.call(p,h)?p[h]:t}function gte(h){var p=this.__data__;return wg?p[h]!==t:qt.call(p,h)}function yte(h,p){var E=this.__data__;return this.size+=this.has(h)?0:1,E[h]=wg&&p===t?l:p,this}$f.prototype.clear=dte,$f.prototype.delete=pte,$f.prototype.get=vte,$f.prototype.has=gte,$f.prototype.set=yte;function Ol(h){var p=-1,E=h==null?0:h.length;for(this.clear();++p<E;){var R=h[p];this.set(R[0],R[1])}}function mte(){this.__data__=[],this.size=0}function bte(h){var p=this.__data__,E=a0(p,h);if(E<0)return!1;var R=p.length-1;return E==R?p.pop():e0.call(p,E,1),--this.size,!0}function wte(h){var p=this.__data__,E=a0(p,h);return E<0?t:p[E][1]}function $te(h){return a0(this.__data__,h)>-1}function _te(h,p){var E=this.__data__,R=a0(E,h);return R<0?(++this.size,E.push([h,p])):E[R][1]=p,this}Ol.prototype.clear=mte,Ol.prototype.delete=bte,Ol.prototype.get=wte,Ol.prototype.has=$te,Ol.prototype.set=_te;function Cl(h){var p=-1,E=h==null?0:h.length;for(this.clear();++p<E;){var R=h[p];this.set(R[0],R[1])}}function xte(){this.size=0,this.__data__={hash:new $f,map:new(mg||Ol),string:new $f}}function Ete(h){var p=b0(this,h).delete(h);return this.size-=p?1:0,p}function Ste(h){return b0(this,h).get(h)}function kte(h){return b0(this,h).has(h)}function Tte(h,p){var E=b0(this,h),R=E.size;return E.set(h,p),this.size+=E.size==R?0:1,this}Cl.prototype.clear=xte,Cl.prototype.delete=Ete,Cl.prototype.get=Ste,Cl.prototype.has=kte,Cl.prototype.set=Tte;function _f(h){var p=-1,E=h==null?0:h.length;for(this.__data__=new Cl;++p<E;)this.add(h[p])}function Ite(h){return this.__data__.set(h,l),this}function Ate(h){return this.__data__.has(h)}_f.prototype.add=_f.prototype.push=Ite,_f.prototype.has=Ate;function oa(h){var p=this.__data__=new Ol(h);this.size=p.size}function Ote(){this.__data__=new Ol,this.size=0}function Cte(h){var p=this.__data__,E=p.delete(h);return this.size=p.size,E}function Pte(h){return this.__data__.get(h)}function Nte(h){return this.__data__.has(h)}function Rte(h,p){var E=this.__data__;if(E instanceof Ol){var R=E.__data__;if(!mg||R.length<i-1)return R.push([h,p]),this.size=++E.size,this;E=this.__data__=new Cl(R)}return E.set(h,p),this.size=E.size,this}oa.prototype.clear=Ote,oa.prototype.delete=Cte,oa.prototype.get=Pte,oa.prototype.has=Nte,oa.prototype.set=Rte;function qN(h,p){var E=Zt(h),R=!E&&Tf(h),W=!E&&!R&&Wu(h),X=!E&&!R&&!W&&Od(h),oe=E||R||W||X,ve=oe?gf(h.length,Dt):[],ke=ve.length;for(var Ke in h)(p||qt.call(h,Ke))&&!(oe&&(Ke=="length"||W&&(Ke=="offset"||Ke=="parent")||X&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Dl(Ke,ke)))&&ve.push(Ke);return ve}function KN(h){var p=h.length;return p?h[x2(0,p-1)]:t}function Dte(h,p){return w0(ms(h),xf(p,0,h.length))}function Bte(h){return w0(ms(h))}function d2(h,p,E){(E!==t&&!aa(h[p],E)||E===t&&!(p in h))&&Pl(h,p,E)}function _g(h,p,E){var R=h[p];(!(qt.call(h,p)&&aa(R,E))||E===t&&!(p in h))&&Pl(h,p,E)}function a0(h,p){for(var E=h.length;E--;)if(aa(h[E][0],p))return E;return-1}function Mte(h,p,E,R){return ju(h,function(W,X,oe){p(R,W,E(W),oe)}),R}function VN(h,p){return h&&Va(p,ai(p),h)}function Lte(h,p){return h&&Va(p,ws(p),h)}function Pl(h,p,E){p=="__proto__"&&t0?t0(h,p,{configurable:!0,enumerable:!0,value:E,writable:!0}):h[p]=E}function p2(h,p){for(var E=-1,R=p.length,W=fe(R),X=h==null;++E<R;)W[E]=X?t:G2(h,p[E]);return W}function xf(h,p,E){return h===h&&(E!==t&&(h=h<=E?h:E),p!==t&&(h=h>=p?h:p)),h}function _o(h,p,E,R,W,X){var oe,ve=p&c,ke=p&d,Ke=p&y;if(E&&(oe=W?E(h,R,W,X):E(h)),oe!==t)return oe;if(!hn(h))return h;var Ve=Zt(h);if(Ve){if(oe=kre(h),!ve)return ms(h,oe)}else{var Ze=Li(h),gt=Ze==j||Ze==K;if(Wu(h))return yR(h,ve);if(Ze==ze||Ze==ge||gt&&!W){if(oe=ke||gt?{}:BR(h),!ve)return ke?vre(h,Lte(oe,h)):pre(h,VN(oe,h))}else{if(!Pr[Ze])return W?h:{};oe=Tre(h,Ze,ve)}}X||(X=new oa);var At=X.get(h);if(At)return At;X.set(h,oe),fD(h)?h.forEach(function(Ut){oe.add(_o(Ut,p,E,Ut,h,X))}):uD(h)&&h.forEach(function(Ut,yr){oe.set(yr,_o(Ut,p,E,yr,h,X))});var Ht=Ke?ke?R2:N2:ke?ws:ai,nr=Ve?t:Ht(h);return se(nr||h,function(Ut,yr){nr&&(yr=Ut,Ut=h[yr]),_g(oe,yr,_o(Ut,p,E,yr,h,X))}),oe}function Fte(h){var p=ai(h);return function(E){return GN(E,h,p)}}function GN(h,p,E){var R=E.length;if(h==null)return!R;for(h=yt(h);R--;){var W=E[R],X=p[W],oe=h[W];if(oe===t&&!(W in h)||!X(oe))return!1}return!0}function YN(h,p,E){if(typeof h!="function")throw new ur(o);return Ag(function(){h.apply(t,E)},p)}function xg(h,p,E,R){var W=-1,X=Ae,oe=!0,ve=h.length,ke=[],Ke=p.length;if(!ve)return ke;E&&(p=bt(p,Gi(E))),R?(X=Xe,oe=!1):p.length>=i&&(X=yf,oe=!1,p=new _f(p));e:for(;++W<ve;){var Ve=h[W],Ze=E==null?Ve:E(Ve);if(Ve=R||Ve!==0?Ve:0,oe&&Ze===Ze){for(var gt=Ke;gt--;)if(p[gt]===Ze)continue e;ke.push(Ve)}else X(p,Ze,R)||ke.push(Ve)}return ke}var ju=_R(Ka),ZN=_R(g2,!0);function jte(h,p){var E=!0;return ju(h,function(R,W,X){return E=!!p(R,W,X),E}),E}function l0(h,p,E){for(var R=-1,W=h.length;++R<W;){var X=h[R],oe=p(X);if(oe!=null&&(ve===t?oe===oe&&!Hs(oe):E(oe,ve)))var ve=oe,ke=X}return ke}function zte(h,p,E,R){var W=h.length;for(E=tr(E),E<0&&(E=-E>W?0:W+E),R=R===t||R>W?W:tr(R),R<0&&(R+=W),R=E>R?0:dD(R);E<R;)h[E++]=p;return h}function XN(h,p){var E=[];return ju(h,function(R,W,X){p(R,W,X)&&E.push(R)}),E}function xi(h,p,E,R,W){var X=-1,oe=h.length;for(E||(E=Are),W||(W=[]);++X<oe;){var ve=h[X];p>0&&E(ve)?p>1?xi(ve,p-1,E,R,W):Yt(W,ve):R||(W[W.length]=ve)}return W}var v2=xR(),JN=xR(!0);function Ka(h,p){return h&&v2(h,p,ai)}function g2(h,p){return h&&JN(h,p,ai)}function u0(h,p){return De(p,function(E){return Bl(h[E])})}function Ef(h,p){p=Hu(p,h);for(var E=0,R=p.length;h!=null&&E<R;)h=h[Ga(p[E++])];return E&&E==R?h:t}function QN(h,p,E){var R=p(h);return Zt(h)?R:Yt(R,E(h))}function Xi(h){return h==null?h===t?Vr:Ue:wf&&wf in yt(h)?xre(h):Bre(h)}function y2(h,p){return h>p}function Hte(h,p){return h!=null&&qt.call(h,p)}function Ute(h,p){return h!=null&&p in yt(h)}function Wte(h,p,E){return h>=Mi(p,E)&&h<Jn(p,E)}function m2(h,p,E){for(var R=E?Xe:Ae,W=h[0].length,X=h.length,oe=X,ve=fe(X),ke=1/0,Ke=[];oe--;){var Ve=h[oe];oe&&p&&(Ve=bt(Ve,Gi(p))),ke=Mi(Ve.length,ke),ve[oe]=!E&&(p||W>=120&&Ve.length>=120)?new _f(oe&&Ve):t}Ve=h[0];var Ze=-1,gt=ve[0];e:for(;++Ze<W&&Ke.length<ke;){var At=Ve[Ze],Ht=p?p(At):At;if(At=E||At!==0?At:0,!(gt?yf(gt,Ht):R(Ke,Ht,E))){for(oe=X;--oe;){var nr=ve[oe];if(!(nr?yf(nr,Ht):R(h[oe],Ht,E)))continue e}gt&&gt.push(Ht),Ke.push(At)}}return Ke}function qte(h,p,E,R){return Ka(h,function(W,X,oe){p(R,E(W),X,oe)}),R}function Eg(h,p,E){p=Hu(p,h),h=jR(h,p);var R=h==null?h:h[Ga(Eo(p))];return R==null?t:q(R,h,E)}function eR(h){return yn(h)&&Xi(h)==ge}function Kte(h){return yn(h)&&Xi(h)==vn}function Vte(h){return yn(h)&&Xi(h)==S}function Sg(h,p,E,R,W){return h===p?!0:h==null||p==null||!yn(h)&&!yn(p)?h!==h&&p!==p:Gte(h,p,E,R,Sg,W)}function Gte(h,p,E,R,W,X){var oe=Zt(h),ve=Zt(p),ke=oe?Te:Li(h),Ke=ve?Te:Li(p);ke=ke==ge?ze:ke,Ke=Ke==ge?ze:Ke;var Ve=ke==ze,Ze=Ke==ze,gt=ke==Ke;if(gt&&Wu(h)){if(!Wu(p))return!1;oe=!0,Ve=!1}if(gt&&!Ve)return X||(X=new oa),oe||Od(h)?NR(h,p,E,R,W,X):$re(h,p,ke,E,R,W,X);if(!(E&w)){var At=Ve&&qt.call(h,"__wrapped__"),Ht=Ze&&qt.call(p,"__wrapped__");if(At||Ht){var nr=At?h.value():h,Ut=Ht?p.value():p;return X||(X=new oa),W(nr,Ut,E,R,X)}}return gt?(X||(X=new oa),_re(h,p,E,R,W,X)):!1}function Yte(h){return yn(h)&&Li(h)==ae}function b2(h,p,E,R){var W=E.length,X=W,oe=!R;if(h==null)return!X;for(h=yt(h);W--;){var ve=E[W];if(oe&&ve[2]?ve[1]!==h[ve[0]]:!(ve[0]in h))return!1}for(;++W<X;){ve=E[W];var ke=ve[0],Ke=h[ke],Ve=ve[1];if(oe&&ve[2]){if(Ke===t&&!(ke in h))return!1}else{var Ze=new oa;if(R)var gt=R(Ke,Ve,ke,h,p,Ze);if(!(gt===t?Sg(Ve,Ke,w|b,R,Ze):gt))return!1}}return!0}function tR(h){if(!hn(h)||Cre(h))return!1;var p=Bl(h)?Yee:cf;return p.test(kf(h))}function Zte(h){return yn(h)&&Xi(h)==mt}function Xte(h){return yn(h)&&Li(h)==pt}function Jte(h){return yn(h)&&k0(h.length)&&!!jr[Xi(h)]}function rR(h){return typeof h=="function"?h:h==null?$s:typeof h=="object"?Zt(h)?sR(h[0],h[1]):iR(h):ED(h)}function w2(h){if(!Ig(h))return tte(h);var p=[];for(var E in yt(h))qt.call(h,E)&&E!="constructor"&&p.push(E);return p}function Qte(h){if(!hn(h))return Dre(h);var p=Ig(h),E=[];for(var R in h)R=="constructor"&&(p||!qt.call(h,R))||E.push(R);return E}function $2(h,p){return h<p}function nR(h,p){var E=-1,R=bs(h)?fe(h.length):[];return ju(h,function(W,X,oe){R[++E]=p(W,X,oe)}),R}function iR(h){var p=B2(h);return p.length==1&&p[0][2]?LR(p[0][0],p[0][1]):function(E){return E===h||b2(E,h,p)}}function sR(h,p){return L2(h)&&MR(p)?LR(Ga(h),p):function(E){var R=G2(E,h);return R===t&&R===p?Y2(E,h):Sg(p,R,w|b)}}function c0(h,p,E,R,W){h!==p&&v2(p,function(X,oe){if(W||(W=new oa),hn(X))ere(h,p,oe,E,c0,R,W);else{var ve=R?R(j2(h,oe),X,oe+"",h,p,W):t;ve===t&&(ve=X),d2(h,oe,ve)}},ws)}function ere(h,p,E,R,W,X,oe){var ve=j2(h,E),ke=j2(p,E),Ke=oe.get(ke);if(Ke){d2(h,E,Ke);return}var Ve=X?X(ve,ke,E+"",h,p,oe):t,Ze=Ve===t;if(Ze){var gt=Zt(ke),At=!gt&&Wu(ke),Ht=!gt&&!At&&Od(ke);Ve=ke,gt||At||Ht?Zt(ve)?Ve=ve:Tn(ve)?Ve=ms(ve):At?(Ze=!1,Ve=yR(ke,!0)):Ht?(Ze=!1,Ve=mR(ke,!0)):Ve=[]:Og(ke)||Tf(ke)?(Ve=ve,Tf(ve)?Ve=pD(ve):(!hn(ve)||Bl(ve))&&(Ve=BR(ke))):Ze=!1}Ze&&(oe.set(ke,Ve),W(Ve,ke,R,X,oe),oe.delete(ke)),d2(h,E,Ve)}function oR(h,p){var E=h.length;if(E)return p+=p<0?E:0,Dl(p,E)?h[p]:t}function aR(h,p,E){p.length?p=bt(p,function(X){return Zt(X)?function(oe){return Ef(oe,X.length===1?X[0]:X)}:X}):p=[$s];var R=-1;p=bt(p,Gi(Ft()));var W=nR(h,function(X,oe,ve){var ke=bt(p,function(Ke){return Ke(X)});return{criteria:ke,index:++R,value:X}});return Ua(W,function(X,oe){return dre(X,oe,E)})}function tre(h,p){return lR(h,p,function(E,R){return Y2(h,R)})}function lR(h,p,E){for(var R=-1,W=p.length,X={};++R<W;){var oe=p[R],ve=Ef(h,oe);E(ve,oe)&&kg(X,Hu(oe,h),ve)}return X}function rre(h){return function(p){return Ef(p,h)}}function _2(h,p,E,R){var W=R?vf:Mr,X=-1,oe=p.length,ve=h;for(h===p&&(p=ms(p)),E&&(ve=bt(h,Gi(E)));++X<oe;)for(var ke=0,Ke=p[X],Ve=E?E(Ke):Ke;(ke=W(ve,Ve,ke,R))>-1;)ve!==h&&e0.call(ve,ke,1),e0.call(h,ke,1);return h}function uR(h,p){for(var E=h?p.length:0,R=E-1;E--;){var W=p[E];if(E==R||W!==X){var X=W;Dl(W)?e0.call(h,W,1):k2(h,W)}}return h}function x2(h,p){return h+n0(UN()*(p-h+1))}function nre(h,p,E,R){for(var W=-1,X=Jn(r0((p-h)/(E||1)),0),oe=fe(X);X--;)oe[R?X:++W]=h,h+=E;return oe}function E2(h,p){var E="";if(!h||p<1||p>_e)return E;do p%2&&(E+=h),p=n0(p/2),p&&(h+=h);while(p);return E}function cr(h,p){return z2(FR(h,p,$s),h+"")}function ire(h){return KN(Cd(h))}function sre(h,p){var E=Cd(h);return w0(E,xf(p,0,E.length))}function kg(h,p,E,R){if(!hn(h))return h;p=Hu(p,h);for(var W=-1,X=p.length,oe=X-1,ve=h;ve!=null&&++W<X;){var ke=Ga(p[W]),Ke=E;if(ke==="__proto__"||ke==="constructor"||ke==="prototype")return h;if(W!=oe){var Ve=ve[ke];Ke=R?R(Ve,ke,ve):t,Ke===t&&(Ke=hn(Ve)?Ve:Dl(p[W+1])?[]:{})}_g(ve,ke,Ke),ve=ve[ke]}return h}var cR=i0?function(h,p){return i0.set(h,p),h}:$s,ore=t0?function(h,p){return t0(h,"toString",{configurable:!0,enumerable:!1,value:X2(p),writable:!0})}:$s;function are(h){return w0(Cd(h))}function xo(h,p,E){var R=-1,W=h.length;p<0&&(p=-p>W?0:W+p),E=E>W?W:E,E<0&&(E+=W),W=p>E?0:E-p>>>0,p>>>=0;for(var X=fe(W);++R<W;)X[R]=h[R+p];return X}function lre(h,p){var E;return ju(h,function(R,W,X){return E=p(R,W,X),!E}),!!E}function f0(h,p,E){var R=0,W=h==null?R:h.length;if(typeof p=="number"&&p===p&&W<=it){for(;R<W;){var X=R+W>>>1,oe=h[X];oe!==null&&!Hs(oe)&&(E?oe<=p:oe<p)?R=X+1:W=X}return W}return S2(h,p,$s,E)}function S2(h,p,E,R){var W=0,X=h==null?0:h.length;if(X===0)return 0;p=E(p);for(var oe=p!==p,ve=p===null,ke=Hs(p),Ke=p===t;W<X;){var Ve=n0((W+X)/2),Ze=E(h[Ve]),gt=Ze!==t,At=Ze===null,Ht=Ze===Ze,nr=Hs(Ze);if(oe)var Ut=R||Ht;else Ke?Ut=Ht&&(R||gt):ve?Ut=Ht&&gt&&(R||!At):ke?Ut=Ht&&gt&&!At&&(R||!nr):At||nr?Ut=!1:Ut=R?Ze<=p:Ze<p;Ut?W=Ve+1:X=Ve}return Mi(X,Ge)}function fR(h,p){for(var E=-1,R=h.length,W=0,X=[];++E<R;){var oe=h[E],ve=p?p(oe):oe;if(!E||!aa(ve,ke)){var ke=ve;X[W++]=oe===0?0:oe}}return X}function hR(h){return typeof h=="number"?h:Hs(h)?Ce:+h}function zs(h){if(typeof h=="string")return h;if(Zt(h))return bt(h,zs)+"";if(Hs(h))return WN?WN.call(h):"";var p=h+"";return p=="0"&&1/h==-ie?"-0":p}function zu(h,p,E){var R=-1,W=Ae,X=h.length,oe=!0,ve=[],ke=ve;if(E)oe=!1,W=Xe;else if(X>=i){var Ke=p?null:bre(h);if(Ke)return Al(Ke);oe=!1,W=yf,ke=new _f}else ke=p?[]:ve;e:for(;++R<X;){var Ve=h[R],Ze=p?p(Ve):Ve;if(Ve=E||Ve!==0?Ve:0,oe&&Ze===Ze){for(var gt=ke.length;gt--;)if(ke[gt]===Ze)continue e;p&&ke.push(Ze),ve.push(Ve)}else W(ke,Ze,E)||(ke!==ve&&ke.push(Ze),ve.push(Ve))}return ve}function k2(h,p){return p=Hu(p,h),h=jR(h,p),h==null||delete h[Ga(Eo(p))]}function dR(h,p,E,R){return kg(h,p,E(Ef(h,p)),R)}function h0(h,p,E,R){for(var W=h.length,X=R?W:-1;(R?X--:++X<W)&&p(h[X],X,h););return E?xo(h,R?0:X,R?X+1:W):xo(h,R?X+1:0,R?W:X)}function pR(h,p){var E=h;return E instanceof br&&(E=E.value()),Gt(p,function(R,W){return W.func.apply(W.thisArg,Yt([R],W.args))},E)}function T2(h,p,E){var R=h.length;if(R<2)return R?zu(h[0]):[];for(var W=-1,X=fe(R);++W<R;)for(var oe=h[W],ve=-1;++ve<R;)ve!=W&&(X[W]=xg(X[W]||oe,h[ve],p,E));return zu(xi(X,1),p,E)}function vR(h,p,E){for(var R=-1,W=h.length,X=p.length,oe={};++R<W;){var ve=R<X?p[R]:t;E(oe,h[R],ve)}return oe}function I2(h){return Tn(h)?h:[]}function A2(h){return typeof h=="function"?h:$s}function Hu(h,p){return Zt(h)?h:L2(h,p)?[h]:WR(Nr(h))}var ure=cr;function Uu(h,p,E){var R=h.length;return E=E===t?R:E,!p&&E>=R?h:xo(h,p,E)}var gR=Zee||function(h){return cn.clearTimeout(h)};function yR(h,p){if(p)return h.slice();var E=h.length,R=LN?LN(E):new h.constructor(E);return h.copy(R),R}function O2(h){var p=new h.constructor(h.byteLength);return new Jb(p).set(new Jb(h)),p}function cre(h,p){var E=p?O2(h.buffer):h.buffer;return new h.constructor(E,h.byteOffset,h.byteLength)}function fre(h){var p=new h.constructor(h.source,fd.exec(h));return p.lastIndex=h.lastIndex,p}function hre(h){return $g?yt($g.call(h)):{}}function mR(h,p){var E=p?O2(h.buffer):h.buffer;return new h.constructor(E,h.byteOffset,h.length)}function bR(h,p){if(h!==p){var E=h!==t,R=h===null,W=h===h,X=Hs(h),oe=p!==t,ve=p===null,ke=p===p,Ke=Hs(p);if(!ve&&!Ke&&!X&&h>p||X&&oe&&ke&&!ve&&!Ke||R&&oe&&ke||!E&&ke||!W)return 1;if(!R&&!X&&!Ke&&h<p||Ke&&E&&W&&!R&&!X||ve&&E&&W||!oe&&W||!ke)return-1}return 0}function dre(h,p,E){for(var R=-1,W=h.criteria,X=p.criteria,oe=W.length,ve=E.length;++R<oe;){var ke=bR(W[R],X[R]);if(ke){if(R>=ve)return ke;var Ke=E[R];return ke*(Ke=="desc"?-1:1)}}return h.index-p.index}function wR(h,p,E,R){for(var W=-1,X=h.length,oe=E.length,ve=-1,ke=p.length,Ke=Jn(X-oe,0),Ve=fe(ke+Ke),Ze=!R;++ve<ke;)Ve[ve]=p[ve];for(;++W<oe;)(Ze||W<X)&&(Ve[E[W]]=h[W]);for(;Ke--;)Ve[ve++]=h[W++];return Ve}function $R(h,p,E,R){for(var W=-1,X=h.length,oe=-1,ve=E.length,ke=-1,Ke=p.length,Ve=Jn(X-ve,0),Ze=fe(Ve+Ke),gt=!R;++W<Ve;)Ze[W]=h[W];for(var At=W;++ke<Ke;)Ze[At+ke]=p[ke];for(;++oe<ve;)(gt||W<X)&&(Ze[At+E[oe]]=h[W++]);return Ze}function ms(h,p){var E=-1,R=h.length;for(p||(p=fe(R));++E<R;)p[E]=h[E];return p}function Va(h,p,E,R){var W=!E;E||(E={});for(var X=-1,oe=p.length;++X<oe;){var ve=p[X],ke=R?R(E[ve],h[ve],ve,E,h):t;ke===t&&(ke=h[ve]),W?Pl(E,ve,ke):_g(E,ve,ke)}return E}function pre(h,p){return Va(h,M2(h),p)}function vre(h,p){return Va(h,RR(h),p)}function d0(h,p){return function(E,R){var W=Zt(E)?ue:Mte,X=p?p():{};return W(E,h,Ft(R,2),X)}}function Td(h){return cr(function(p,E){var R=-1,W=E.length,X=W>1?E[W-1]:t,oe=W>2?E[2]:t;for(X=h.length>3&&typeof X=="function"?(W--,X):t,oe&&Ji(E[0],E[1],oe)&&(X=W<3?t:X,W=1),p=yt(p);++R<W;){var ve=E[R];ve&&h(p,ve,R,X)}return p})}function _R(h,p){return function(E,R){if(E==null)return E;if(!bs(E))return h(E,R);for(var W=E.length,X=p?W:-1,oe=yt(E);(p?X--:++X<W)&&R(oe[X],X,oe)!==!1;);return E}}function xR(h){return function(p,E,R){for(var W=-1,X=yt(p),oe=R(p),ve=oe.length;ve--;){var ke=oe[h?ve:++W];if(E(X[ke],ke,X)===!1)break}return p}}function gre(h,p,E){var R=p&T,W=Tg(h);function X(){var oe=this&&this!==cn&&this instanceof X?W:h;return oe.apply(R?E:this,arguments)}return X}function ER(h){return function(p){p=Nr(p);var E=ys(p)?Yi(p):t,R=E?E[0]:p.charAt(0),W=E?Uu(E,1).join(""):p.slice(1);return R[h]()+W}}function Id(h){return function(p){return Gt(_D($D(p).replace(lg,"")),h,"")}}function Tg(h){return function(){var p=arguments;switch(p.length){case 0:return new h;case 1:return new h(p[0]);case 2:return new h(p[0],p[1]);case 3:return new h(p[0],p[1],p[2]);case 4:return new h(p[0],p[1],p[2],p[3]);case 5:return new h(p[0],p[1],p[2],p[3],p[4]);case 6:return new h(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new h(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var E=kd(h.prototype),R=h.apply(E,p);return hn(R)?R:E}}function yre(h,p,E){var R=Tg(h);function W(){for(var X=arguments.length,oe=fe(X),ve=X,ke=Ad(W);ve--;)oe[ve]=arguments[ve];var Ke=X<3&&oe[0]!==ke&&oe[X-1]!==ke?[]:js(oe,ke);if(X-=Ke.length,X<E)return AR(h,p,p0,W.placeholder,t,oe,Ke,t,t,E-X);var Ve=this&&this!==cn&&this instanceof W?R:h;return q(Ve,this,oe)}return W}function SR(h){return function(p,E,R){var W=yt(p);if(!bs(p)){var X=Ft(E,3);p=ai(p),E=function(ve){return X(W[ve],ve,W)}}var oe=h(p,E,R);return oe>-1?W[X?p[oe]:oe]:t}}function kR(h){return Rl(function(p){var E=p.length,R=E,W=$o.prototype.thru;for(h&&p.reverse();R--;){var X=p[R];if(typeof X!="function")throw new ur(o);if(W&&!oe&&m0(X)=="wrapper")var oe=new $o([],!0)}for(R=oe?R:E;++R<E;){X=p[R];var ve=m0(X),ke=ve=="wrapper"?D2(X):t;ke&&F2(ke[0])&&ke[1]==(g|x|O|M)&&!ke[4].length&&ke[9]==1?oe=oe[m0(ke[0])].apply(oe,ke[3]):oe=X.length==1&&F2(X)?oe[ve]():oe.thru(X)}return function(){var Ke=arguments,Ve=Ke[0];if(oe&&Ke.length==1&&Zt(Ve))return oe.plant(Ve).value();for(var Ze=0,gt=E?p[Ze].apply(this,Ke):Ve;++Ze<E;)gt=p[Ze].call(this,gt);return gt}})}function p0(h,p,E,R,W,X,oe,ve,ke,Ke){var Ve=p&g,Ze=p&T,gt=p&_,At=p&(x|I),Ht=p&B,nr=gt?t:Tg(h);function Ut(){for(var yr=arguments.length,wr=fe(yr),Us=yr;Us--;)wr[Us]=arguments[Us];if(At)var Qi=Ad(Ut),Ws=Fs(wr,Qi);if(R&&(wr=wR(wr,R,W,At)),X&&(wr=$R(wr,X,oe,At)),yr-=Ws,At&&yr<Ke){var In=js(wr,Qi);return AR(h,p,p0,Ut.placeholder,E,wr,In,ve,ke,Ke-yr)}var la=Ze?E:this,Ll=gt?la[h]:h;return yr=wr.length,ve?wr=Mre(wr,ve):Ht&&yr>1&&wr.reverse(),Ve&&ke<yr&&(wr.length=ke),this&&this!==cn&&this instanceof Ut&&(Ll=nr||Tg(Ll)),Ll.apply(la,wr)}return Ut}function TR(h,p){return function(E,R){return qte(E,h,p(R),{})}}function v0(h,p){return function(E,R){var W;if(E===t&&R===t)return p;if(E!==t&&(W=E),R!==t){if(W===t)return R;typeof E=="string"||typeof R=="string"?(E=zs(E),R=zs(R)):(E=hR(E),R=hR(R)),W=h(E,R)}return W}}function C2(h){return Rl(function(p){return p=bt(p,Gi(Ft())),cr(function(E){var R=this;return h(p,function(W){return q(W,R,E)})})})}function g0(h,p){p=p===t?" ":zs(p);var E=p.length;if(E<2)return E?E2(p,h):p;var R=E2(p,r0(h/qa(p)));return ys(p)?Uu(Yi(R),0,h).join(""):R.slice(0,h)}function mre(h,p,E,R){var W=p&T,X=Tg(h);function oe(){for(var ve=-1,ke=arguments.length,Ke=-1,Ve=R.length,Ze=fe(Ve+ke),gt=this&&this!==cn&&this instanceof oe?X:h;++Ke<Ve;)Ze[Ke]=R[Ke];for(;ke--;)Ze[Ke++]=arguments[++ve];return q(gt,W?E:this,Ze)}return oe}function IR(h){return function(p,E,R){return R&&typeof R!="number"&&Ji(p,E,R)&&(E=R=t),p=Ml(p),E===t?(E=p,p=0):E=Ml(E),R=R===t?p<E?1:-1:Ml(R),nre(p,E,R,h)}}function y0(h){return function(p,E){return typeof p=="string"&&typeof E=="string"||(p=So(p),E=So(E)),h(p,E)}}function AR(h,p,E,R,W,X,oe,ve,ke,Ke){var Ve=p&x,Ze=Ve?oe:t,gt=Ve?t:oe,At=Ve?X:t,Ht=Ve?t:X;p|=Ve?O:C,p&=~(Ve?C:O),p&A||(p&=~(T|_));var nr=[h,p,W,At,Ze,Ht,gt,ve,ke,Ke],Ut=E.apply(t,nr);return F2(h)&&zR(Ut,nr),Ut.placeholder=R,HR(Ut,h,p)}function P2(h){var p=_t[h];return function(E,R){if(E=So(E),R=R==null?0:Mi(tr(R),292),R&&HN(E)){var W=(Nr(E)+"e").split("e"),X=p(W[0]+"e"+(+W[1]+R));return W=(Nr(X)+"e").split("e"),+(W[0]+"e"+(+W[1]-R))}return p(E)}}var bre=Ed&&1/Al(new Ed([,-0]))[1]==ie?function(h){return new Ed(h)}:eE;function OR(h){return function(p){var E=Li(p);return E==ae?_d(p):E==pt?vg(p):ia(p,h(p))}}function Nl(h,p,E,R,W,X,oe,ve){var ke=p&_;if(!ke&&typeof h!="function")throw new ur(o);var Ke=R?R.length:0;if(Ke||(p&=~(O|C),R=W=t),oe=oe===t?oe:Jn(tr(oe),0),ve=ve===t?ve:tr(ve),Ke-=W?W.length:0,p&C){var Ve=R,Ze=W;R=W=t}var gt=ke?t:D2(h),At=[h,p,E,R,W,Ve,Ze,X,oe,ve];if(gt&&Rre(At,gt),h=At[0],p=At[1],E=At[2],R=At[3],W=At[4],ve=At[9]=At[9]===t?ke?0:h.length:Jn(At[9]-Ke,0),!ve&&p&(x|I)&&(p&=~(x|I)),!p||p==T)var Ht=gre(h,p,E);else p==x||p==I?Ht=yre(h,p,ve):(p==O||p==(T|O))&&!W.length?Ht=mre(h,p,E,R):Ht=p0.apply(t,At);var nr=gt?cR:zR;return HR(nr(Ht,At),h,p)}function CR(h,p,E,R){return h===t||aa(h,Xn[E])&&!qt.call(R,E)?p:h}function PR(h,p,E,R,W,X){return hn(h)&&hn(p)&&(X.set(p,h),c0(h,p,t,PR,X),X.delete(p)),h}function wre(h){return Og(h)?t:h}function NR(h,p,E,R,W,X){var oe=E&w,ve=h.length,ke=p.length;if(ve!=ke&&!(oe&&ke>ve))return!1;var Ke=X.get(h),Ve=X.get(p);if(Ke&&Ve)return Ke==p&&Ve==h;var Ze=-1,gt=!0,At=E&b?new _f:t;for(X.set(h,p),X.set(p,h);++Ze<ve;){var Ht=h[Ze],nr=p[Ze];if(R)var Ut=oe?R(nr,Ht,Ze,p,h,X):R(Ht,nr,Ze,h,p,X);if(Ut!==t){if(Ut)continue;gt=!1;break}if(At){if(!fn(p,function(yr,wr){if(!yf(At,wr)&&(Ht===yr||W(Ht,yr,E,R,X)))return At.push(wr)})){gt=!1;break}}else if(!(Ht===nr||W(Ht,nr,E,R,X))){gt=!1;break}}return X.delete(h),X.delete(p),gt}function $re(h,p,E,R,W,X,oe){switch(E){case Pi:if(h.byteLength!=p.byteLength||h.byteOffset!=p.byteOffset)return!1;h=h.buffer,p=p.buffer;case vn:return!(h.byteLength!=p.byteLength||!X(new Jb(h),new Jb(p)));case $:case S:case ye:return aa(+h,+p);case L:return h.name==p.name&&h.message==p.message;case mt:case Rt:return h==p+"";case ae:var ve=_d;case pt:var ke=R&w;if(ve||(ve=Al),h.size!=p.size&&!ke)return!1;var Ke=oe.get(h);if(Ke)return Ke==p;R|=b,oe.set(h,p);var Ve=NR(ve(h),ve(p),R,W,X,oe);return oe.delete(h),Ve;case dr:if($g)return $g.call(h)==$g.call(p)}return!1}function _re(h,p,E,R,W,X){var oe=E&w,ve=N2(h),ke=ve.length,Ke=N2(p),Ve=Ke.length;if(ke!=Ve&&!oe)return!1;for(var Ze=ke;Ze--;){var gt=ve[Ze];if(!(oe?gt in p:qt.call(p,gt)))return!1}var At=X.get(h),Ht=X.get(p);if(At&&Ht)return At==p&&Ht==h;var nr=!0;X.set(h,p),X.set(p,h);for(var Ut=oe;++Ze<ke;){gt=ve[Ze];var yr=h[gt],wr=p[gt];if(R)var Us=oe?R(wr,yr,gt,p,h,X):R(yr,wr,gt,h,p,X);if(!(Us===t?yr===wr||W(yr,wr,E,R,X):Us)){nr=!1;break}Ut||(Ut=gt=="constructor")}if(nr&&!Ut){var Qi=h.constructor,Ws=p.constructor;Qi!=Ws&&"constructor"in h&&"constructor"in p&&!(typeof Qi=="function"&&Qi instanceof Qi&&typeof Ws=="function"&&Ws instanceof Ws)&&(nr=!1)}return X.delete(h),X.delete(p),nr}function Rl(h){return z2(FR(h,t,GR),h+"")}function N2(h){return QN(h,ai,M2)}function R2(h){return QN(h,ws,RR)}var D2=i0?function(h){return i0.get(h)}:eE;function m0(h){for(var p=h.name+"",E=Sd[p],R=qt.call(Sd,p)?E.length:0;R--;){var W=E[R],X=W.func;if(X==null||X==h)return W.name}return p}function Ad(h){var p=qt.call(G,"placeholder")?G:h;return p.placeholder}function Ft(){var h=G.iteratee||J2;return h=h===J2?rR:h,arguments.length?h(arguments[0],arguments[1]):h}function b0(h,p){var E=h.__data__;return Ore(p)?E[typeof p=="string"?"string":"hash"]:E.map}function B2(h){for(var p=ai(h),E=p.length;E--;){var R=p[E],W=h[R];p[E]=[R,W,MR(W)]}return p}function Sf(h,p){var E=Vb(h,p);return tR(E)?E:t}function xre(h){var p=qt.call(h,wf),E=h[wf];try{h[wf]=t;var R=!0}catch{}var W=Zb.call(h);return R&&(p?h[wf]=E:delete h[wf]),W}var M2=c2?function(h){return h==null?[]:(h=yt(h),De(c2(h),function(p){return jN.call(h,p)}))}:tE,RR=c2?function(h){for(var p=[];h;)Yt(p,M2(h)),h=Qb(h);return p}:tE,Li=Xi;(f2&&Li(new f2(new ArrayBuffer(1)))!=Pi||mg&&Li(new mg)!=ae||h2&&Li(h2.resolve())!=st||Ed&&Li(new Ed)!=pt||bg&&Li(new bg)!=ct)&&(Li=function(h){var p=Xi(h),E=p==ze?h.constructor:t,R=E?kf(E):"";if(R)switch(R){case ste:return Pi;case ote:return ae;case ate:return st;case lte:return pt;case ute:return ct}return p});function Ere(h,p,E){for(var R=-1,W=E.length;++R<W;){var X=E[R],oe=X.size;switch(X.type){case"drop":h+=oe;break;case"dropRight":p-=oe;break;case"take":p=Mi(p,h+oe);break;case"takeRight":h=Jn(h,p-oe);break}}return{start:h,end:p}}function Sre(h){var p=h.match(rg);return p?p[1].split(ng):[]}function DR(h,p,E){p=Hu(p,h);for(var R=-1,W=p.length,X=!1;++R<W;){var oe=Ga(p[R]);if(!(X=h!=null&&E(h,oe)))break;h=h[oe]}return X||++R!=W?X:(W=h==null?0:h.length,!!W&&k0(W)&&Dl(oe,W)&&(Zt(h)||Tf(h)))}function kre(h){var p=h.length,E=new h.constructor(p);return p&&typeof h[0]=="string"&&qt.call(h,"index")&&(E.index=h.index,E.input=h.input),E}function BR(h){return typeof h.constructor=="function"&&!Ig(h)?kd(Qb(h)):{}}function Tre(h,p,E){var R=h.constructor;switch(p){case vn:return O2(h);case $:case S:return new R(+h);case Pi:return cre(h,E);case Ki:case gn:case ps:case fo:case Ni:case Vi:case ho:case af:case po:return mR(h,E);case ae:return new R;case ye:case Rt:return new R(h);case mt:return fre(h);case pt:return new R;case dr:return hre(h)}}function Ire(h,p){var E=p.length;if(!E)return h;var R=E-1;return p[R]=(E>1?"& ":"")+p[R],p=p.join(E>2?", ":" "),h.replace(tg,`{
/* [wrapped with `+p+`] */
`)}function Are(h){return Zt(h)||Tf(h)||!!(zN&&h&&h[zN])}function Dl(h,p){var E=typeof h;return p=p??_e,!!p&&(E=="number"||E!="symbol"&&Ru.test(h))&&h>-1&&h%1==0&&h<p}function Ji(h,p,E){if(!hn(E))return!1;var R=typeof p;return(R=="number"?bs(E)&&Dl(p,E.length):R=="string"&&p in E)?aa(E[p],h):!1}function L2(h,p){if(Zt(h))return!1;var E=typeof h;return E=="number"||E=="symbol"||E=="boolean"||h==null||Hs(h)?!0:ad.test(h)||!eg.test(h)||p!=null&&h in yt(p)}function Ore(h){var p=typeof h;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?h!=="__proto__":h===null}function F2(h){var p=m0(h),E=G[p];if(typeof E!="function"||!(p in br.prototype))return!1;if(h===E)return!0;var R=D2(E);return!!R&&h===R[0]}function Cre(h){return!!MN&&MN in h}var Pre=Zi?Bl:rE;function Ig(h){var p=h&&h.constructor,E=typeof p=="function"&&p.prototype||Xn;return h===E}function MR(h){return h===h&&!hn(h)}function LR(h,p){return function(E){return E==null?!1:E[h]===p&&(p!==t||h in yt(E))}}function Nre(h){var p=E0(h,function(R){return E.size===u&&E.clear(),R}),E=p.cache;return p}function Rre(h,p){var E=h[1],R=p[1],W=E|R,X=W<(T|_|g),oe=R==g&&E==x||R==g&&E==M&&h[7].length<=p[8]||R==(g|M)&&p[7].length<=p[8]&&E==x;if(!(X||oe))return h;R&T&&(h[2]=p[2],W|=E&T?0:A);var ve=p[3];if(ve){var ke=h[3];h[3]=ke?wR(ke,ve,p[4]):ve,h[4]=ke?js(h[3],f):p[4]}return ve=p[5],ve&&(ke=h[5],h[5]=ke?$R(ke,ve,p[6]):ve,h[6]=ke?js(h[5],f):p[6]),ve=p[7],ve&&(h[7]=ve),R&g&&(h[8]=h[8]==null?p[8]:Mi(h[8],p[8])),h[9]==null&&(h[9]=p[9]),h[0]=p[0],h[1]=W,h}function Dre(h){var p=[];if(h!=null)for(var E in yt(h))p.push(E);return p}function Bre(h){return Zb.call(h)}function FR(h,p,E){return p=Jn(p===t?h.length-1:p,0),function(){for(var R=arguments,W=-1,X=Jn(R.length-p,0),oe=fe(X);++W<X;)oe[W]=R[p+W];W=-1;for(var ve=fe(p+1);++W<p;)ve[W]=R[W];return ve[p]=E(oe),q(h,this,ve)}}function jR(h,p){return p.length<2?h:Ef(h,xo(p,0,-1))}function Mre(h,p){for(var E=h.length,R=Mi(p.length,E),W=ms(h);R--;){var X=p[R];h[R]=Dl(X,E)?W[X]:t}return h}function j2(h,p){if(!(p==="constructor"&&typeof h[p]=="function")&&p!="__proto__")return h[p]}var zR=UR(cR),Ag=Jee||function(h,p){return cn.setTimeout(h,p)},z2=UR(ore);function HR(h,p,E){var R=p+"";return z2(h,Ire(R,Lre(Sre(R),E)))}function UR(h){var p=0,E=0;return function(){var R=rte(),W=re-(R-E);if(E=R,W>0){if(++p>=ne)return arguments[0]}else p=0;return h.apply(t,arguments)}}function w0(h,p){var E=-1,R=h.length,W=R-1;for(p=p===t?R:p;++E<p;){var X=x2(E,W),oe=h[X];h[X]=h[E],h[E]=oe}return h.length=p,h}var WR=Nre(function(h){var p=[];return h.charCodeAt(0)===46&&p.push(""),h.replace(ld,function(E,R,W,X){p.push(W?X.replace(sg,"$1"):R||E)}),p});function Ga(h){if(typeof h=="string"||Hs(h))return h;var p=h+"";return p=="0"&&1/h==-ie?"-0":p}function kf(h){if(h!=null){try{return sa.call(h)}catch{}try{return h+""}catch{}}return""}function Lre(h,p){return se(xe,function(E){var R="_."+E[0];p&E[1]&&!Ae(h,R)&&h.push(R)}),h.sort()}function qR(h){if(h instanceof br)return h.clone();var p=new $o(h.__wrapped__,h.__chain__);return p.__actions__=ms(h.__actions__),p.__index__=h.__index__,p.__values__=h.__values__,p}function Fre(h,p,E){(E?Ji(h,p,E):p===t)?p=1:p=Jn(tr(p),0);var R=h==null?0:h.length;if(!R||p<1)return[];for(var W=0,X=0,oe=fe(r0(R/p));W<R;)oe[X++]=xo(h,W,W+=p);return oe}function jre(h){for(var p=-1,E=h==null?0:h.length,R=0,W=[];++p<E;){var X=h[p];X&&(W[R++]=X)}return W}function zre(){var h=arguments.length;if(!h)return[];for(var p=fe(h-1),E=arguments[0],R=h;R--;)p[R-1]=arguments[R];return Yt(Zt(E)?ms(E):[E],xi(p,1))}var Hre=cr(function(h,p){return Tn(h)?xg(h,xi(p,1,Tn,!0)):[]}),Ure=cr(function(h,p){var E=Eo(p);return Tn(E)&&(E=t),Tn(h)?xg(h,xi(p,1,Tn,!0),Ft(E,2)):[]}),Wre=cr(function(h,p){var E=Eo(p);return Tn(E)&&(E=t),Tn(h)?xg(h,xi(p,1,Tn,!0),t,E):[]});function qre(h,p,E){var R=h==null?0:h.length;return R?(p=E||p===t?1:tr(p),xo(h,p<0?0:p,R)):[]}function Kre(h,p,E){var R=h==null?0:h.length;return R?(p=E||p===t?1:tr(p),p=R-p,xo(h,0,p<0?0:p)):[]}function Vre(h,p){return h&&h.length?h0(h,Ft(p,3),!0,!0):[]}function Gre(h,p){return h&&h.length?h0(h,Ft(p,3),!0):[]}function Yre(h,p,E,R){var W=h==null?0:h.length;return W?(E&&typeof E!="number"&&Ji(h,p,E)&&(E=0,R=W),zte(h,p,E,R)):[]}function KR(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=E==null?0:tr(E);return W<0&&(W=Jn(R+W,0)),vr(h,Ft(p,3),W)}function VR(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=R-1;return E!==t&&(W=tr(E),W=E<0?Jn(R+W,0):Mi(W,R-1)),vr(h,Ft(p,3),W,!0)}function GR(h){var p=h==null?0:h.length;return p?xi(h,1):[]}function Zre(h){var p=h==null?0:h.length;return p?xi(h,ie):[]}function Xre(h,p){var E=h==null?0:h.length;return E?(p=p===t?1:tr(p),xi(h,p)):[]}function Jre(h){for(var p=-1,E=h==null?0:h.length,R={};++p<E;){var W=h[p];R[W[0]]=W[1]}return R}function YR(h){return h&&h.length?h[0]:t}function Qre(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=E==null?0:tr(E);return W<0&&(W=Jn(R+W,0)),Mr(h,p,W)}function ene(h){var p=h==null?0:h.length;return p?xo(h,0,-1):[]}var tne=cr(function(h){var p=bt(h,I2);return p.length&&p[0]===h[0]?m2(p):[]}),rne=cr(function(h){var p=Eo(h),E=bt(h,I2);return p===Eo(E)?p=t:E.pop(),E.length&&E[0]===h[0]?m2(E,Ft(p,2)):[]}),nne=cr(function(h){var p=Eo(h),E=bt(h,I2);return p=typeof p=="function"?p:t,p&&E.pop(),E.length&&E[0]===h[0]?m2(E,t,p):[]});function ine(h,p){return h==null?"":ete.call(h,p)}function Eo(h){var p=h==null?0:h.length;return p?h[p-1]:t}function sne(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=R;return E!==t&&(W=tr(E),W=W<0?Jn(R+W,0):Mi(W,R-1)),p===p?xd(h,p,W):vr(h,$d,W,!0)}function one(h,p){return h&&h.length?oR(h,tr(p)):t}var ane=cr(ZR);function ZR(h,p){return h&&h.length&&p&&p.length?_2(h,p):h}function lne(h,p,E){return h&&h.length&&p&&p.length?_2(h,p,Ft(E,2)):h}function une(h,p,E){return h&&h.length&&p&&p.length?_2(h,p,t,E):h}var cne=Rl(function(h,p){var E=h==null?0:h.length,R=p2(h,p);return uR(h,bt(p,function(W){return Dl(W,E)?+W:W}).sort(bR)),R});function fne(h,p){var E=[];if(!(h&&h.length))return E;var R=-1,W=[],X=h.length;for(p=Ft(p,3);++R<X;){var oe=h[R];p(oe,R,h)&&(E.push(oe),W.push(R))}return uR(h,W),E}function H2(h){return h==null?h:ite.call(h)}function hne(h,p,E){var R=h==null?0:h.length;return R?(E&&typeof E!="number"&&Ji(h,p,E)?(p=0,E=R):(p=p==null?0:tr(p),E=E===t?R:tr(E)),xo(h,p,E)):[]}function dne(h,p){return f0(h,p)}function pne(h,p,E){return S2(h,p,Ft(E,2))}function vne(h,p){var E=h==null?0:h.length;if(E){var R=f0(h,p);if(R<E&&aa(h[R],p))return R}return-1}function gne(h,p){return f0(h,p,!0)}function yne(h,p,E){return S2(h,p,Ft(E,2),!0)}function mne(h,p){var E=h==null?0:h.length;if(E){var R=f0(h,p,!0)-1;if(aa(h[R],p))return R}return-1}function bne(h){return h&&h.length?fR(h):[]}function wne(h,p){return h&&h.length?fR(h,Ft(p,2)):[]}function $ne(h){var p=h==null?0:h.length;return p?xo(h,1,p):[]}function _ne(h,p,E){return h&&h.length?(p=E||p===t?1:tr(p),xo(h,0,p<0?0:p)):[]}function xne(h,p,E){var R=h==null?0:h.length;return R?(p=E||p===t?1:tr(p),p=R-p,xo(h,p<0?0:p,R)):[]}function Ene(h,p){return h&&h.length?h0(h,Ft(p,3),!1,!0):[]}function Sne(h,p){return h&&h.length?h0(h,Ft(p,3)):[]}var kne=cr(function(h){return zu(xi(h,1,Tn,!0))}),Tne=cr(function(h){var p=Eo(h);return Tn(p)&&(p=t),zu(xi(h,1,Tn,!0),Ft(p,2))}),Ine=cr(function(h){var p=Eo(h);return p=typeof p=="function"?p:t,zu(xi(h,1,Tn,!0),t,p)});function Ane(h){return h&&h.length?zu(h):[]}function One(h,p){return h&&h.length?zu(h,Ft(p,2)):[]}function Cne(h,p){return p=typeof p=="function"?p:t,h&&h.length?zu(h,t,p):[]}function U2(h){if(!(h&&h.length))return[];var p=0;return h=De(h,function(E){if(Tn(E))return p=Jn(E.length,p),!0}),gf(p,function(E){return bt(h,Il(E))})}function XR(h,p){if(!(h&&h.length))return[];var E=U2(h);return p==null?E:bt(E,function(R){return q(p,t,R)})}var Pne=cr(function(h,p){return Tn(h)?xg(h,p):[]}),Nne=cr(function(h){return T2(De(h,Tn))}),Rne=cr(function(h){var p=Eo(h);return Tn(p)&&(p=t),T2(De(h,Tn),Ft(p,2))}),Dne=cr(function(h){var p=Eo(h);return p=typeof p=="function"?p:t,T2(De(h,Tn),t,p)}),Bne=cr(U2);function Mne(h,p){return vR(h||[],p||[],_g)}function Lne(h,p){return vR(h||[],p||[],kg)}var Fne=cr(function(h){var p=h.length,E=p>1?h[p-1]:t;return E=typeof E=="function"?(h.pop(),E):t,XR(h,E)});function JR(h){var p=G(h);return p.__chain__=!0,p}function jne(h,p){return p(h),h}function $0(h,p){return p(h)}var zne=Rl(function(h){var p=h.length,E=p?h[0]:0,R=this.__wrapped__,W=function(X){return p2(X,h)};return p>1||this.__actions__.length||!(R instanceof br)||!Dl(E)?this.thru(W):(R=R.slice(E,+E+(p?1:0)),R.__actions__.push({func:$0,args:[W],thisArg:t}),new $o(R,this.__chain__).thru(function(X){return p&&!X.length&&X.push(t),X}))});function Hne(){return JR(this)}function Une(){return new $o(this.value(),this.__chain__)}function Wne(){this.__values__===t&&(this.__values__=hD(this.value()));var h=this.__index__>=this.__values__.length,p=h?t:this.__values__[this.__index__++];return{done:h,value:p}}function qne(){return this}function Kne(h){for(var p,E=this;E instanceof o0;){var R=qR(E);R.__index__=0,R.__values__=t,p?W.__wrapped__=R:p=R;var W=R;E=E.__wrapped__}return W.__wrapped__=h,p}function Vne(){var h=this.__wrapped__;if(h instanceof br){var p=h;return this.__actions__.length&&(p=new br(this)),p=p.reverse(),p.__actions__.push({func:$0,args:[H2],thisArg:t}),new $o(p,this.__chain__)}return this.thru(H2)}function Gne(){return pR(this.__wrapped__,this.__actions__)}var Yne=d0(function(h,p,E){qt.call(h,E)?++h[E]:Pl(h,E,1)});function Zne(h,p,E){var R=Zt(h)?Pe:jte;return E&&Ji(h,p,E)&&(p=t),R(h,Ft(p,3))}function Xne(h,p){var E=Zt(h)?De:XN;return E(h,Ft(p,3))}var Jne=SR(KR),Qne=SR(VR);function eie(h,p){return xi(_0(h,p),1)}function tie(h,p){return xi(_0(h,p),ie)}function rie(h,p,E){return E=E===t?1:tr(E),xi(_0(h,p),E)}function QR(h,p){var E=Zt(h)?se:ju;return E(h,Ft(p,3))}function eD(h,p){var E=Zt(h)?Ee:ZN;return E(h,Ft(p,3))}var nie=d0(function(h,p,E){qt.call(h,E)?h[E].push(p):Pl(h,E,[p])});function iie(h,p,E,R){h=bs(h)?h:Cd(h),E=E&&!R?tr(E):0;var W=h.length;return E<0&&(E=Jn(W+E,0)),T0(h)?E<=W&&h.indexOf(p,E)>-1:!!W&&Mr(h,p,E)>-1}var sie=cr(function(h,p,E){var R=-1,W=typeof p=="function",X=bs(h)?fe(h.length):[];return ju(h,function(oe){X[++R]=W?q(p,oe,E):Eg(oe,p,E)}),X}),oie=d0(function(h,p,E){Pl(h,E,p)});function _0(h,p){var E=Zt(h)?bt:nR;return E(h,Ft(p,3))}function aie(h,p,E,R){return h==null?[]:(Zt(p)||(p=p==null?[]:[p]),E=R?t:E,Zt(E)||(E=E==null?[]:[E]),aR(h,p,E))}var lie=d0(function(h,p,E){h[E?0:1].push(p)},function(){return[[],[]]});function uie(h,p,E){var R=Zt(h)?Gt:na,W=arguments.length<3;return R(h,Ft(p,4),E,W,ju)}function cie(h,p,E){var R=Zt(h)?Yn:na,W=arguments.length<3;return R(h,Ft(p,4),E,W,ZN)}function fie(h,p){var E=Zt(h)?De:XN;return E(h,S0(Ft(p,3)))}function hie(h){var p=Zt(h)?KN:ire;return p(h)}function die(h,p,E){(E?Ji(h,p,E):p===t)?p=1:p=tr(p);var R=Zt(h)?Dte:sre;return R(h,p)}function pie(h){var p=Zt(h)?Bte:are;return p(h)}function vie(h){if(h==null)return 0;if(bs(h))return T0(h)?qa(h):h.length;var p=Li(h);return p==ae||p==pt?h.size:w2(h).length}function gie(h,p,E){var R=Zt(h)?fn:lre;return E&&Ji(h,p,E)&&(p=t),R(h,Ft(p,3))}var yie=cr(function(h,p){if(h==null)return[];var E=p.length;return E>1&&Ji(h,p[0],p[1])?p=[]:E>2&&Ji(p[0],p[1],p[2])&&(p=[p[0]]),aR(h,xi(p,1),[])}),x0=Xee||function(){return cn.Date.now()};function mie(h,p){if(typeof p!="function")throw new ur(o);return h=tr(h),function(){if(--h<1)return p.apply(this,arguments)}}function tD(h,p,E){return p=E?t:p,p=h&&p==null?h.length:p,Nl(h,g,t,t,t,t,p)}function rD(h,p){var E;if(typeof p!="function")throw new ur(o);return h=tr(h),function(){return--h>0&&(E=p.apply(this,arguments)),h<=1&&(p=t),E}}var W2=cr(function(h,p,E){var R=T;if(E.length){var W=js(E,Ad(W2));R|=O}return Nl(h,R,p,E,W)}),nD=cr(function(h,p,E){var R=T|_;if(E.length){var W=js(E,Ad(nD));R|=O}return Nl(p,R,h,E,W)});function iD(h,p,E){p=E?t:p;var R=Nl(h,x,t,t,t,t,t,p);return R.placeholder=iD.placeholder,R}function sD(h,p,E){p=E?t:p;var R=Nl(h,I,t,t,t,t,t,p);return R.placeholder=sD.placeholder,R}function oD(h,p,E){var R,W,X,oe,ve,ke,Ke=0,Ve=!1,Ze=!1,gt=!0;if(typeof h!="function")throw new ur(o);p=So(p)||0,hn(E)&&(Ve=!!E.leading,Ze="maxWait"in E,X=Ze?Jn(So(E.maxWait)||0,p):X,gt="trailing"in E?!!E.trailing:gt);function At(In){var la=R,Ll=W;return R=W=t,Ke=In,oe=h.apply(Ll,la),oe}function Ht(In){return Ke=In,ve=Ag(yr,p),Ve?At(In):oe}function nr(In){var la=In-ke,Ll=In-Ke,SD=p-la;return Ze?Mi(SD,X-Ll):SD}function Ut(In){var la=In-ke,Ll=In-Ke;return ke===t||la>=p||la<0||Ze&&Ll>=X}function yr(){var In=x0();if(Ut(In))return wr(In);ve=Ag(yr,nr(In))}function wr(In){return ve=t,gt&&R?At(In):(R=W=t,oe)}function Us(){ve!==t&&gR(ve),Ke=0,R=ke=W=ve=t}function Qi(){return ve===t?oe:wr(x0())}function Ws(){var In=x0(),la=Ut(In);if(R=arguments,W=this,ke=In,la){if(ve===t)return Ht(ke);if(Ze)return gR(ve),ve=Ag(yr,p),At(ke)}return ve===t&&(ve=Ag(yr,p)),oe}return Ws.cancel=Us,Ws.flush=Qi,Ws}var bie=cr(function(h,p){return YN(h,1,p)}),wie=cr(function(h,p,E){return YN(h,So(p)||0,E)});function $ie(h){return Nl(h,B)}function E0(h,p){if(typeof h!="function"||p!=null&&typeof p!="function")throw new ur(o);var E=function(){var R=arguments,W=p?p.apply(this,R):R[0],X=E.cache;if(X.has(W))return X.get(W);var oe=h.apply(this,R);return E.cache=X.set(W,oe)||X,oe};return E.cache=new(E0.Cache||Cl),E}E0.Cache=Cl;function S0(h){if(typeof h!="function")throw new ur(o);return function(){var p=arguments;switch(p.length){case 0:return!h.call(this);case 1:return!h.call(this,p[0]);case 2:return!h.call(this,p[0],p[1]);case 3:return!h.call(this,p[0],p[1],p[2])}return!h.apply(this,p)}}function _ie(h){return rD(2,h)}var xie=ure(function(h,p){p=p.length==1&&Zt(p[0])?bt(p[0],Gi(Ft())):bt(xi(p,1),Gi(Ft()));var E=p.length;return cr(function(R){for(var W=-1,X=Mi(R.length,E);++W<X;)R[W]=p[W].call(this,R[W]);return q(h,this,R)})}),q2=cr(function(h,p){var E=js(p,Ad(q2));return Nl(h,O,t,p,E)}),aD=cr(function(h,p){var E=js(p,Ad(aD));return Nl(h,C,t,p,E)}),Eie=Rl(function(h,p){return Nl(h,M,t,t,t,p)});function Sie(h,p){if(typeof h!="function")throw new ur(o);return p=p===t?p:tr(p),cr(h,p)}function kie(h,p){if(typeof h!="function")throw new ur(o);return p=p==null?0:Jn(tr(p),0),cr(function(E){var R=E[p],W=Uu(E,0,p);return R&&Yt(W,R),q(h,this,W)})}function Tie(h,p,E){var R=!0,W=!0;if(typeof h!="function")throw new ur(o);return hn(E)&&(R="leading"in E?!!E.leading:R,W="trailing"in E?!!E.trailing:W),oD(h,p,{leading:R,maxWait:p,trailing:W})}function Iie(h){return tD(h,1)}function Aie(h,p){return q2(A2(p),h)}function Oie(){if(!arguments.length)return[];var h=arguments[0];return Zt(h)?h:[h]}function Cie(h){return _o(h,y)}function Pie(h,p){return p=typeof p=="function"?p:t,_o(h,y,p)}function Nie(h){return _o(h,c|y)}function Rie(h,p){return p=typeof p=="function"?p:t,_o(h,c|y,p)}function Die(h,p){return p==null||GN(h,p,ai(p))}function aa(h,p){return h===p||h!==h&&p!==p}var Bie=y0(y2),Mie=y0(function(h,p){return h>=p}),Tf=eR(function(){return arguments}())?eR:function(h){return yn(h)&&qt.call(h,"callee")&&!jN.call(h,"callee")},Zt=fe.isArray,Lie=m?Gi(m):Kte;function bs(h){return h!=null&&k0(h.length)&&!Bl(h)}function Tn(h){return yn(h)&&bs(h)}function Fie(h){return h===!0||h===!1||yn(h)&&Xi(h)==$}var Wu=Qee||rE,jie=k?Gi(k):Vte;function zie(h){return yn(h)&&h.nodeType===1&&!Og(h)}function Hie(h){if(h==null)return!0;if(bs(h)&&(Zt(h)||typeof h=="string"||typeof h.splice=="function"||Wu(h)||Od(h)||Tf(h)))return!h.length;var p=Li(h);if(p==ae||p==pt)return!h.size;if(Ig(h))return!w2(h).length;for(var E in h)if(qt.call(h,E))return!1;return!0}function Uie(h,p){return Sg(h,p)}function Wie(h,p,E){E=typeof E=="function"?E:t;var R=E?E(h,p):t;return R===t?Sg(h,p,t,E):!!R}function K2(h){if(!yn(h))return!1;var p=Xi(h);return p==L||p==N||typeof h.message=="string"&&typeof h.name=="string"&&!Og(h)}function qie(h){return typeof h=="number"&&HN(h)}function Bl(h){if(!hn(h))return!1;var p=Xi(h);return p==j||p==K||p==je||p==wt}function lD(h){return typeof h=="number"&&h==tr(h)}function k0(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=_e}function hn(h){var p=typeof h;return h!=null&&(p=="object"||p=="function")}function yn(h){return h!=null&&typeof h=="object"}var uD=P?Gi(P):Yte;function Kie(h,p){return h===p||b2(h,p,B2(p))}function Vie(h,p,E){return E=typeof E=="function"?E:t,b2(h,p,B2(p),E)}function Gie(h){return cD(h)&&h!=+h}function Yie(h){if(Pre(h))throw new We(s);return tR(h)}function Zie(h){return h===null}function Xie(h){return h==null}function cD(h){return typeof h=="number"||yn(h)&&Xi(h)==ye}function Og(h){if(!yn(h)||Xi(h)!=ze)return!1;var p=Qb(h);if(p===null)return!0;var E=qt.call(p,"constructor")&&p.constructor;return typeof E=="function"&&E instanceof E&&sa.call(E)==Vee}var V2=D?Gi(D):Zte;function Jie(h){return lD(h)&&h>=-_e&&h<=_e}var fD=H?Gi(H):Xte;function T0(h){return typeof h=="string"||!Zt(h)&&yn(h)&&Xi(h)==Rt}function Hs(h){return typeof h=="symbol"||yn(h)&&Xi(h)==dr}var Od=U?Gi(U):Jte;function Qie(h){return h===t}function ese(h){return yn(h)&&Li(h)==ct}function tse(h){return yn(h)&&Xi(h)==It}var rse=y0($2),nse=y0(function(h,p){return h<=p});function hD(h){if(!h)return[];if(bs(h))return T0(h)?Yi(h):ms(h);if(yg&&h[yg])return Wa(h[yg]());var p=Li(h),E=p==ae?_d:p==pt?Al:Cd;return E(h)}function Ml(h){if(!h)return h===0?h:0;if(h=So(h),h===ie||h===-ie){var p=h<0?-1:1;return p*we}return h===h?h:0}function tr(h){var p=Ml(h),E=p%1;return p===p?E?p-E:p:0}function dD(h){return h?xf(tr(h),0,He):0}function So(h){if(typeof h=="number")return h;if(Hs(h))return Ce;if(hn(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=hn(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=wo(h);var E=hd.test(h);return E||ff.test(h)?s2(h.slice(2),E?2:8):Fa.test(h)?Ce:+h}function pD(h){return Va(h,ws(h))}function ise(h){return h?xf(tr(h),-_e,_e):h===0?h:0}function Nr(h){return h==null?"":zs(h)}var sse=Td(function(h,p){if(Ig(p)||bs(p)){Va(p,ai(p),h);return}for(var E in p)qt.call(p,E)&&_g(h,E,p[E])}),vD=Td(function(h,p){Va(p,ws(p),h)}),I0=Td(function(h,p,E,R){Va(p,ws(p),h,R)}),ose=Td(function(h,p,E,R){Va(p,ai(p),h,R)}),ase=Rl(p2);function lse(h,p){var E=kd(h);return p==null?E:VN(E,p)}var use=cr(function(h,p){h=yt(h);var E=-1,R=p.length,W=R>2?p[2]:t;for(W&&Ji(p[0],p[1],W)&&(R=1);++E<R;)for(var X=p[E],oe=ws(X),ve=-1,ke=oe.length;++ve<ke;){var Ke=oe[ve],Ve=h[Ke];(Ve===t||aa(Ve,Xn[Ke])&&!qt.call(h,Ke))&&(h[Ke]=X[Ke])}return h}),cse=cr(function(h){return h.push(t,PR),q(gD,t,h)});function fse(h,p){return Ha(h,Ft(p,3),Ka)}function hse(h,p){return Ha(h,Ft(p,3),g2)}function dse(h,p){return h==null?h:v2(h,Ft(p,3),ws)}function pse(h,p){return h==null?h:JN(h,Ft(p,3),ws)}function vse(h,p){return h&&Ka(h,Ft(p,3))}function gse(h,p){return h&&g2(h,Ft(p,3))}function yse(h){return h==null?[]:u0(h,ai(h))}function mse(h){return h==null?[]:u0(h,ws(h))}function G2(h,p,E){var R=h==null?t:Ef(h,p);return R===t?E:R}function bse(h,p){return h!=null&&DR(h,p,Hte)}function Y2(h,p){return h!=null&&DR(h,p,Ute)}var wse=TR(function(h,p,E){p!=null&&typeof p.toString!="function"&&(p=Zb.call(p)),h[p]=E},X2($s)),$se=TR(function(h,p,E){p!=null&&typeof p.toString!="function"&&(p=Zb.call(p)),qt.call(h,p)?h[p].push(E):h[p]=[E]},Ft),_se=cr(Eg);function ai(h){return bs(h)?qN(h):w2(h)}function ws(h){return bs(h)?qN(h,!0):Qte(h)}function xse(h,p){var E={};return p=Ft(p,3),Ka(h,function(R,W,X){Pl(E,p(R,W,X),R)}),E}function Ese(h,p){var E={};return p=Ft(p,3),Ka(h,function(R,W,X){Pl(E,W,p(R,W,X))}),E}var Sse=Td(function(h,p,E){c0(h,p,E)}),gD=Td(function(h,p,E,R){c0(h,p,E,R)}),kse=Rl(function(h,p){var E={};if(h==null)return E;var R=!1;p=bt(p,function(X){return X=Hu(X,h),R||(R=X.length>1),X}),Va(h,R2(h),E),R&&(E=_o(E,c|d|y,wre));for(var W=p.length;W--;)k2(E,p[W]);return E});function Tse(h,p){return yD(h,S0(Ft(p)))}var Ise=Rl(function(h,p){return h==null?{}:tre(h,p)});function yD(h,p){if(h==null)return{};var E=bt(R2(h),function(R){return[R]});return p=Ft(p),lR(h,E,function(R,W){return p(R,W[0])})}function Ase(h,p,E){p=Hu(p,h);var R=-1,W=p.length;for(W||(W=1,h=t);++R<W;){var X=h==null?t:h[Ga(p[R])];X===t&&(R=W,X=E),h=Bl(X)?X.call(h):X}return h}function Ose(h,p,E){return h==null?h:kg(h,p,E)}function Cse(h,p,E,R){return R=typeof R=="function"?R:t,h==null?h:kg(h,p,E,R)}var mD=OR(ai),bD=OR(ws);function Pse(h,p,E){var R=Zt(h),W=R||Wu(h)||Od(h);if(p=Ft(p,4),E==null){var X=h&&h.constructor;W?E=R?new X:[]:hn(h)?E=Bl(X)?kd(Qb(h)):{}:E={}}return(W?se:Ka)(h,function(oe,ve,ke){return p(E,oe,ve,ke)}),E}function Nse(h,p){return h==null?!0:k2(h,p)}function Rse(h,p,E){return h==null?h:dR(h,p,A2(E))}function Dse(h,p,E,R){return R=typeof R=="function"?R:t,h==null?h:dR(h,p,A2(E),R)}function Cd(h){return h==null?[]:dg(h,ai(h))}function Bse(h){return h==null?[]:dg(h,ws(h))}function Mse(h,p,E){return E===t&&(E=p,p=t),E!==t&&(E=So(E),E=E===E?E:0),p!==t&&(p=So(p),p=p===p?p:0),xf(So(h),p,E)}function Lse(h,p,E){return p=Ml(p),E===t?(E=p,p=0):E=Ml(E),h=So(h),Wte(h,p,E)}function Fse(h,p,E){if(E&&typeof E!="boolean"&&Ji(h,p,E)&&(p=E=t),E===t&&(typeof p=="boolean"?(E=p,p=t):typeof h=="boolean"&&(E=h,h=t)),h===t&&p===t?(h=0,p=1):(h=Ml(h),p===t?(p=h,h=0):p=Ml(p)),h>p){var R=h;h=p,p=R}if(E||h%1||p%1){var W=UN();return Mi(h+W*(p-h+fg("1e-"+((W+"").length-1))),p)}return x2(h,p)}var jse=Id(function(h,p,E){return p=p.toLowerCase(),h+(E?wD(p):p)});function wD(h){return Z2(Nr(h).toLowerCase())}function $D(h){return h=Nr(h),h&&h.replace(dd,Lu).replace(Qx,"")}function zse(h,p,E){h=Nr(h),p=zs(p);var R=h.length;E=E===t?R:xf(tr(E),0,R);var W=E;return E-=p.length,E>=0&&h.slice(E,W)==p}function Hse(h){return h=Nr(h),h&&od.test(h)?h.replace(Ma,a2):h}function Use(h){return h=Nr(h),h&&La.test(h)?h.replace(go,"\\$&"):h}var Wse=Id(function(h,p,E){return h+(E?"-":"")+p.toLowerCase()}),qse=Id(function(h,p,E){return h+(E?" ":"")+p.toLowerCase()}),Kse=ER("toLowerCase");function Vse(h,p,E){h=Nr(h),p=tr(p);var R=p?qa(h):0;if(!p||R>=p)return h;var W=(p-R)/2;return g0(n0(W),E)+h+g0(r0(W),E)}function Gse(h,p,E){h=Nr(h),p=tr(p);var R=p?qa(h):0;return p&&R<p?h+g0(p-R,E):h}function Yse(h,p,E){h=Nr(h),p=tr(p);var R=p?qa(h):0;return p&&R<p?g0(p-R,E)+h:h}function Zse(h,p,E){return E||p==null?p=0:p&&(p=+p),nte(Nr(h).replace(El,""),p||0)}function Xse(h,p,E){return(E?Ji(h,p,E):p===t)?p=1:p=tr(p),E2(Nr(h),p)}function Jse(){var h=arguments,p=Nr(h[0]);return h.length<3?p:p.replace(h[1],h[2])}var Qse=Id(function(h,p,E){return h+(E?"_":"")+p.toLowerCase()});function eoe(h,p,E){return E&&typeof E!="number"&&Ji(h,p,E)&&(p=E=t),E=E===t?He:E>>>0,E?(h=Nr(h),h&&(typeof p=="string"||p!=null&&!V2(p))&&(p=zs(p),!p&&ys(h))?Uu(Yi(h),0,E):h.split(p,E)):[]}var toe=Id(function(h,p,E){return h+(E?" ":"")+Z2(p)});function roe(h,p,E){return h=Nr(h),E=E==null?0:xf(tr(E),0,h.length),p=zs(p),h.slice(E,E+p.length)==p}function noe(h,p,E){var R=G.templateSettings;E&&Ji(h,p,E)&&(p=t),h=Nr(h),p=I0({},p,R,CR);var W=I0({},p.imports,R.imports,CR),X=ai(W),oe=dg(W,X),ve,ke,Ke=0,Ve=p.interpolate||Du,Ze="__p += '",gt=er((p.escape||Du).source+"|"+Ve.source+"|"+(Ve===Nu?cd:Du).source+"|"+(p.evaluate||Du).source+"|$","g"),At="//# sourceURL="+(qt.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++i2+"]")+`
`;h.replace(gt,function(Ut,yr,wr,Us,Qi,Ws){return wr||(wr=Us),Ze+=h.slice(Ke,Ws).replace(ja,l2),yr&&(ve=!0,Ze+=`' +
__e(`+yr+`) +
'`),Qi&&(ke=!0,Ze+=`';
`+Qi+`;
__p += '`),wr&&(Ze+=`' +
((__t = (`+wr+`)) == null ? '' : __t) +
'`),Ke=Ws+Ut.length,Ut}),Ze+=`';
`;var Ht=qt.call(p,"variable")&&p.variable;if(!Ht)Ze=`with (obj) {
`+Ze+`
}
`;else if(ig.test(Ht))throw new We(a);Ze=(ke?Ze.replace(lf,""):Ze).replace(sd,"$1").replace(vo,"$1;"),Ze="function("+(Ht||"obj")+`) {
`+(Ht?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var nr=xD(function(){return $t(X,At+"return "+Ze).apply(t,oe)});if(nr.source=Ze,K2(nr))throw nr;return nr}function ioe(h){return Nr(h).toLowerCase()}function soe(h){return Nr(h).toUpperCase()}function ooe(h,p,E){if(h=Nr(h),h&&(E||p===t))return wo(h);if(!h||!(p=zs(p)))return h;var R=Yi(h),W=Yi(p),X=Ar(R,W),oe=mf(R,W)+1;return Uu(R,X,oe).join("")}function aoe(h,p,E){if(h=Nr(h),h&&(E||p===t))return h.slice(0,Gb(h)+1);if(!h||!(p=zs(p)))return h;var R=Yi(h),W=mf(R,Yi(p))+1;return Uu(R,0,W).join("")}function loe(h,p,E){if(h=Nr(h),h&&(E||p===t))return h.replace(El,"");if(!h||!(p=zs(p)))return h;var R=Yi(h),W=Ar(R,Yi(p));return Uu(R,W).join("")}function uoe(h,p){var E=z,R=V;if(hn(p)){var W="separator"in p?p.separator:W;E="length"in p?tr(p.length):E,R="omission"in p?zs(p.omission):R}h=Nr(h);var X=h.length;if(ys(h)){var oe=Yi(h);X=oe.length}if(E>=X)return h;var ve=E-qa(R);if(ve<1)return R;var ke=oe?Uu(oe,0,ve).join(""):h.slice(0,ve);if(W===t)return ke+R;if(oe&&(ve+=ke.length-ve),V2(W)){if(h.slice(ve).search(W)){var Ke,Ve=ke;for(W.global||(W=er(W.source,Nr(fd.exec(W))+"g")),W.lastIndex=0;Ke=W.exec(Ve);)var Ze=Ke.index;ke=ke.slice(0,Ze===t?ve:Ze)}}else if(h.indexOf(zs(W),ve)!=ve){var gt=ke.lastIndexOf(W);gt>-1&&(ke=ke.slice(0,gt))}return ke+R}function coe(h){return h=Nr(h),h&&uf.test(h)?h.replace(ea,gg):h}var foe=Id(function(h,p,E){return h+(E?" ":"")+p.toUpperCase()}),Z2=ER("toUpperCase");function _D(h,p,E){return h=Nr(h),p=E?t:p,p===t?pg(h)?me(h):pr(h):h.match(p)||[]}var xD=cr(function(h,p){try{return q(h,t,p)}catch(E){return K2(E)?E:new We(E)}}),hoe=Rl(function(h,p){return se(p,function(E){E=Ga(E),Pl(h,E,W2(h[E],h))}),h});function doe(h){var p=h==null?0:h.length,E=Ft();return h=p?bt(h,function(R){if(typeof R[1]!="function")throw new ur(o);return[E(R[0]),R[1]]}):[],cr(function(R){for(var W=-1;++W<p;){var X=h[W];if(q(X[0],this,R))return q(X[1],this,R)}})}function poe(h){return Fte(_o(h,c))}function X2(h){return function(){return h}}function voe(h,p){return h==null||h!==h?p:h}var goe=kR(),yoe=kR(!0);function $s(h){return h}function J2(h){return rR(typeof h=="function"?h:_o(h,c))}function moe(h){return iR(_o(h,c))}function boe(h,p){return sR(h,_o(p,c))}var woe=cr(function(h,p){return function(E){return Eg(E,h,p)}}),$oe=cr(function(h,p){return function(E){return Eg(h,E,p)}});function Q2(h,p,E){var R=ai(p),W=u0(p,R);E==null&&!(hn(p)&&(W.length||!R.length))&&(E=p,p=h,h=this,W=u0(p,ai(p)));var X=!(hn(E)&&"chain"in E)||!!E.chain,oe=Bl(h);return se(W,function(ve){var ke=p[ve];h[ve]=ke,oe&&(h.prototype[ve]=function(){var Ke=this.__chain__;if(X||Ke){var Ve=h(this.__wrapped__),Ze=Ve.__actions__=ms(this.__actions__);return Ze.push({func:ke,args:arguments,thisArg:h}),Ve.__chain__=Ke,Ve}return ke.apply(h,Yt([this.value()],arguments))})}),h}function _oe(){return cn._===this&&(cn._=Gee),this}function eE(){}function xoe(h){return h=tr(h),cr(function(p){return oR(p,h)})}var Eoe=C2(bt),Soe=C2(Pe),koe=C2(fn);function ED(h){return L2(h)?Il(Ga(h)):rre(h)}function Toe(h){return function(p){return h==null?t:Ef(h,p)}}var Ioe=IR(),Aoe=IR(!0);function tE(){return[]}function rE(){return!1}function Ooe(){return{}}function Coe(){return""}function Poe(){return!0}function Noe(h,p){if(h=tr(h),h<1||h>_e)return[];var E=He,R=Mi(h,He);p=Ft(p),h-=He;for(var W=gf(R,p);++E<h;)p(E);return W}function Roe(h){return Zt(h)?bt(h,Ga):Hs(h)?[h]:ms(WR(Nr(h)))}function Doe(h){var p=++Kee;return Nr(h)+p}var Boe=v0(function(h,p){return h+p},0),Moe=P2("ceil"),Loe=v0(function(h,p){return h/p},1),Foe=P2("floor");function joe(h){return h&&h.length?l0(h,$s,y2):t}function zoe(h,p){return h&&h.length?l0(h,Ft(p,2),y2):t}function Hoe(h){return Ls(h,$s)}function Uoe(h,p){return Ls(h,Ft(p,2))}function Woe(h){return h&&h.length?l0(h,$s,$2):t}function qoe(h,p){return h&&h.length?l0(h,Ft(p,2),$2):t}var Koe=v0(function(h,p){return h*p},1),Voe=P2("round"),Goe=v0(function(h,p){return h-p},0);function Yoe(h){return h&&h.length?Bi(h,$s):0}function Zoe(h,p){return h&&h.length?Bi(h,Ft(p,2)):0}return G.after=mie,G.ary=tD,G.assign=sse,G.assignIn=vD,G.assignInWith=I0,G.assignWith=ose,G.at=ase,G.before=rD,G.bind=W2,G.bindAll=hoe,G.bindKey=nD,G.castArray=Oie,G.chain=JR,G.chunk=Fre,G.compact=jre,G.concat=zre,G.cond=doe,G.conforms=poe,G.constant=X2,G.countBy=Yne,G.create=lse,G.curry=iD,G.curryRight=sD,G.debounce=oD,G.defaults=use,G.defaultsDeep=cse,G.defer=bie,G.delay=wie,G.difference=Hre,G.differenceBy=Ure,G.differenceWith=Wre,G.drop=qre,G.dropRight=Kre,G.dropRightWhile=Vre,G.dropWhile=Gre,G.fill=Yre,G.filter=Xne,G.flatMap=eie,G.flatMapDeep=tie,G.flatMapDepth=rie,G.flatten=GR,G.flattenDeep=Zre,G.flattenDepth=Xre,G.flip=$ie,G.flow=goe,G.flowRight=yoe,G.fromPairs=Jre,G.functions=yse,G.functionsIn=mse,G.groupBy=nie,G.initial=ene,G.intersection=tne,G.intersectionBy=rne,G.intersectionWith=nne,G.invert=wse,G.invertBy=$se,G.invokeMap=sie,G.iteratee=J2,G.keyBy=oie,G.keys=ai,G.keysIn=ws,G.map=_0,G.mapKeys=xse,G.mapValues=Ese,G.matches=moe,G.matchesProperty=boe,G.memoize=E0,G.merge=Sse,G.mergeWith=gD,G.method=woe,G.methodOf=$oe,G.mixin=Q2,G.negate=S0,G.nthArg=xoe,G.omit=kse,G.omitBy=Tse,G.once=_ie,G.orderBy=aie,G.over=Eoe,G.overArgs=xie,G.overEvery=Soe,G.overSome=koe,G.partial=q2,G.partialRight=aD,G.partition=lie,G.pick=Ise,G.pickBy=yD,G.property=ED,G.propertyOf=Toe,G.pull=ane,G.pullAll=ZR,G.pullAllBy=lne,G.pullAllWith=une,G.pullAt=cne,G.range=Ioe,G.rangeRight=Aoe,G.rearg=Eie,G.reject=fie,G.remove=fne,G.rest=Sie,G.reverse=H2,G.sampleSize=die,G.set=Ose,G.setWith=Cse,G.shuffle=pie,G.slice=hne,G.sortBy=yie,G.sortedUniq=bne,G.sortedUniqBy=wne,G.split=eoe,G.spread=kie,G.tail=$ne,G.take=_ne,G.takeRight=xne,G.takeRightWhile=Ene,G.takeWhile=Sne,G.tap=jne,G.throttle=Tie,G.thru=$0,G.toArray=hD,G.toPairs=mD,G.toPairsIn=bD,G.toPath=Roe,G.toPlainObject=pD,G.transform=Pse,G.unary=Iie,G.union=kne,G.unionBy=Tne,G.unionWith=Ine,G.uniq=Ane,G.uniqBy=One,G.uniqWith=Cne,G.unset=Nse,G.unzip=U2,G.unzipWith=XR,G.update=Rse,G.updateWith=Dse,G.values=Cd,G.valuesIn=Bse,G.without=Pne,G.words=_D,G.wrap=Aie,G.xor=Nne,G.xorBy=Rne,G.xorWith=Dne,G.zip=Bne,G.zipObject=Mne,G.zipObjectDeep=Lne,G.zipWith=Fne,G.entries=mD,G.entriesIn=bD,G.extend=vD,G.extendWith=I0,Q2(G,G),G.add=Boe,G.attempt=xD,G.camelCase=jse,G.capitalize=wD,G.ceil=Moe,G.clamp=Mse,G.clone=Cie,G.cloneDeep=Nie,G.cloneDeepWith=Rie,G.cloneWith=Pie,G.conformsTo=Die,G.deburr=$D,G.defaultTo=voe,G.divide=Loe,G.endsWith=zse,G.eq=aa,G.escape=Hse,G.escapeRegExp=Use,G.every=Zne,G.find=Jne,G.findIndex=KR,G.findKey=fse,G.findLast=Qne,G.findLastIndex=VR,G.findLastKey=hse,G.floor=Foe,G.forEach=QR,G.forEachRight=eD,G.forIn=dse,G.forInRight=pse,G.forOwn=vse,G.forOwnRight=gse,G.get=G2,G.gt=Bie,G.gte=Mie,G.has=bse,G.hasIn=Y2,G.head=YR,G.identity=$s,G.includes=iie,G.indexOf=Qre,G.inRange=Lse,G.invoke=_se,G.isArguments=Tf,G.isArray=Zt,G.isArrayBuffer=Lie,G.isArrayLike=bs,G.isArrayLikeObject=Tn,G.isBoolean=Fie,G.isBuffer=Wu,G.isDate=jie,G.isElement=zie,G.isEmpty=Hie,G.isEqual=Uie,G.isEqualWith=Wie,G.isError=K2,G.isFinite=qie,G.isFunction=Bl,G.isInteger=lD,G.isLength=k0,G.isMap=uD,G.isMatch=Kie,G.isMatchWith=Vie,G.isNaN=Gie,G.isNative=Yie,G.isNil=Xie,G.isNull=Zie,G.isNumber=cD,G.isObject=hn,G.isObjectLike=yn,G.isPlainObject=Og,G.isRegExp=V2,G.isSafeInteger=Jie,G.isSet=fD,G.isString=T0,G.isSymbol=Hs,G.isTypedArray=Od,G.isUndefined=Qie,G.isWeakMap=ese,G.isWeakSet=tse,G.join=ine,G.kebabCase=Wse,G.last=Eo,G.lastIndexOf=sne,G.lowerCase=qse,G.lowerFirst=Kse,G.lt=rse,G.lte=nse,G.max=joe,G.maxBy=zoe,G.mean=Hoe,G.meanBy=Uoe,G.min=Woe,G.minBy=qoe,G.stubArray=tE,G.stubFalse=rE,G.stubObject=Ooe,G.stubString=Coe,G.stubTrue=Poe,G.multiply=Koe,G.nth=one,G.noConflict=_oe,G.noop=eE,G.now=x0,G.pad=Vse,G.padEnd=Gse,G.padStart=Yse,G.parseInt=Zse,G.random=Fse,G.reduce=uie,G.reduceRight=cie,G.repeat=Xse,G.replace=Jse,G.result=Ase,G.round=Voe,G.runInContext=Q,G.sample=hie,G.size=vie,G.snakeCase=Qse,G.some=gie,G.sortedIndex=dne,G.sortedIndexBy=pne,G.sortedIndexOf=vne,G.sortedLastIndex=gne,G.sortedLastIndexBy=yne,G.sortedLastIndexOf=mne,G.startCase=toe,G.startsWith=roe,G.subtract=Goe,G.sum=Yoe,G.sumBy=Zoe,G.template=noe,G.times=Noe,G.toFinite=Ml,G.toInteger=tr,G.toLength=dD,G.toLower=ioe,G.toNumber=So,G.toSafeInteger=ise,G.toString=Nr,G.toUpper=soe,G.trim=ooe,G.trimEnd=aoe,G.trimStart=loe,G.truncate=uoe,G.unescape=coe,G.uniqueId=Doe,G.upperCase=foe,G.upperFirst=Z2,G.each=QR,G.eachRight=eD,G.first=YR,Q2(G,function(){var h={};return Ka(G,function(p,E){qt.call(G.prototype,E)||(h[E]=p)}),h}(),{chain:!1}),G.VERSION=n,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){G[h].placeholder=G}),se(["drop","take"],function(h,p){br.prototype[h]=function(E){E=E===t?1:Jn(tr(E),0);var R=this.__filtered__&&!p?new br(this):this.clone();return R.__filtered__?R.__takeCount__=Mi(E,R.__takeCount__):R.__views__.push({size:Mi(E,He),type:h+(R.__dir__<0?"Right":"")}),R},br.prototype[h+"Right"]=function(E){return this.reverse()[h](E).reverse()}}),se(["filter","map","takeWhile"],function(h,p){var E=p+1,R=E==J||E==Z;br.prototype[h]=function(W){var X=this.clone();return X.__iteratees__.push({iteratee:Ft(W,3),type:E}),X.__filtered__=X.__filtered__||R,X}}),se(["head","last"],function(h,p){var E="take"+(p?"Right":"");br.prototype[h]=function(){return this[E](1).value()[0]}}),se(["initial","tail"],function(h,p){var E="drop"+(p?"":"Right");br.prototype[h]=function(){return this.__filtered__?new br(this):this[E](1)}}),br.prototype.compact=function(){return this.filter($s)},br.prototype.find=function(h){return this.filter(h).head()},br.prototype.findLast=function(h){return this.reverse().find(h)},br.prototype.invokeMap=cr(function(h,p){return typeof h=="function"?new br(this):this.map(function(E){return Eg(E,h,p)})}),br.prototype.reject=function(h){return this.filter(S0(Ft(h)))},br.prototype.slice=function(h,p){h=tr(h);var E=this;return E.__filtered__&&(h>0||p<0)?new br(E):(h<0?E=E.takeRight(-h):h&&(E=E.drop(h)),p!==t&&(p=tr(p),E=p<0?E.dropRight(-p):E.take(p-h)),E)},br.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},br.prototype.toArray=function(){return this.take(He)},Ka(br.prototype,function(h,p){var E=/^(?:filter|find|map|reject)|While$/.test(p),R=/^(?:head|last)$/.test(p),W=G[R?"take"+(p=="last"?"Right":""):p],X=R||/^find/.test(p);W&&(G.prototype[p]=function(){var oe=this.__wrapped__,ve=R?[1]:arguments,ke=oe instanceof br,Ke=ve[0],Ve=ke||Zt(oe),Ze=function(yr){var wr=W.apply(G,Yt([yr],ve));return R&&gt?wr[0]:wr};Ve&&E&&typeof Ke=="function"&&Ke.length!=1&&(ke=Ve=!1);var gt=this.__chain__,At=!!this.__actions__.length,Ht=X&&!gt,nr=ke&&!At;if(!X&&Ve){oe=nr?oe:new br(this);var Ut=h.apply(oe,ve);return Ut.__actions__.push({func:$0,args:[Ze],thisArg:t}),new $o(Ut,gt)}return Ht&&nr?h.apply(this,ve):(Ut=this.thru(Ze),Ht?R?Ut.value()[0]:Ut.value():Ut)})}),se(["pop","push","shift","sort","splice","unshift"],function(h){var p=Zn[h],E=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",R=/^(?:pop|shift)$/.test(h);G.prototype[h]=function(){var W=arguments;if(R&&!this.__chain__){var X=this.value();return p.apply(Zt(X)?X:[],W)}return this[E](function(oe){return p.apply(Zt(oe)?oe:[],W)})}}),Ka(br.prototype,function(h,p){var E=G[p];if(E){var R=E.name+"";qt.call(Sd,R)||(Sd[R]=[]),Sd[R].push({name:p,func:E})}}),Sd[p0(t,_).name]=[{name:"wrapper",func:t}],br.prototype.clone=cte,br.prototype.reverse=fte,br.prototype.value=hte,G.prototype.at=zne,G.prototype.chain=Hne,G.prototype.commit=Une,G.prototype.next=Wne,G.prototype.plant=Kne,G.prototype.reverse=Vne,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Gne,G.prototype.first=G.prototype.head,yg&&(G.prototype[yg]=qne),G},Oe=Ie();ra?((ra.exports=Oe)._=Oe,wd._=Oe):cn._=Oe}).call(On)})(Dw,Dw.exports);var wn=Dw.exports;const rp=io(wn),eB="c2fc1ad0-f76f-11ec-b939-0242ac120002",tB=new Set;pn.config({driver:[pn.LOCALSTORAGE,pn.INDEXEDDB,pn.WEBSQL]});let Hue=class LH{constructor(r="",t=null){ce(this,"id");ce(this,"parent");ce(this,"children",new Map);ce(this,"on_subscriptions",new Map);ce(this,"map_subscriptions",new Map);ce(this,"value");ce(this,"counter",0);ce(this,"loaded",!1);ce(this,"saveLocalForage",rp.throttle(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const r=Array.from(this.children.keys());await pn.setItem(this.id,r)}else this.value===void 0?await pn.removeItem(this.id):await pn.setItem(this.id,this.value===null?eB:this.value)},500));ce(this,"loadLocalForage",rp.throttle(async()=>{if(tB.has(this.id))return;let r=await pn.getItem(this.id);if(r===null)r=void 0,tB.add(this.id);else if(r===eB)r=null;else if(Array.isArray(r)){const t={};await Promise.all(r.map(async n=>{t[n]=await this.get(n).once()})),r=t}else this.value=r;return this.loaded=!0,r},500));ce(this,"doCallbacks",rp.debounce(()=>{for(const[r,t]of this.on_subscriptions){const n=()=>this.on_subscriptions.delete(r);this.once(t,n,!1)}if(this.parent){this.parent.doCallbacks();for(const[r,t]of this.parent.map_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(r)};this.once(t,n,!1)}}},20,{maxWait:40}));this.id=r,this.parent=t}get(r){const t=this.children.get(r);if(t)return t;const n=new LH(`${this.id}/${r}`,this);return this.children.set(r,n),this.saveLocalForage(),n}async put(r){if(Array.isArray(r))throw new Error("Sorry, we don't deal with arrays");return typeof r=="object"&&r!==null?(this.value=void 0,await Promise.all(rp.map(r,(t,n)=>this.get(n).put(t)))):(this.children=new Map,this.value=r),this.doCallbacks(),this.saveLocalForage()}async once(r,t,n=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,t)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||n)return r&&r(i,this.id.slice(this.id.lastIndexOf("/")+1),t||(()=>{})),i}on(r){const t=this.counter++;this.on_subscriptions.set(t,r);const n=()=>this.on_subscriptions.delete(t);return this.once(r,n,!1),n}map(r){var s;const t=this.counter++;this.map_subscriptions.set(t,r);const n=()=>this.map_subscriptions.delete(t),i=()=>{for(const o of this.children.values())o.once(r,n,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),n}};const Ne=new Hue;var xu={},pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.createBitArray=Uue;pv.fromBits=que;pv.toBits=Wue;function Uue(e){return new Uint8Array(e)}function FH(e,r,t,n,i){var s=(1<<n)-1,o=0,a=0,l=0;if(e.forEach(function(u){for(o=(o<<r)+u,a+=r;a>=n;)a-=n,t[l]=o>>a&s,l+=1}),i)a>0&&(t[l]=o<<n-a&s);else{if(a>=r)throw new Error("Excessive padding: ".concat(a," (max ").concat(r-1," allowed)"));if(o%(1<<a)!==0)throw new Error("Non-zero padding")}}function Wue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return FH(e,8,t,r,!0),t}function que(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return FH(e,r,t,8,!1),t}var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.CHECKSUM_LENGTH=void 0;Pa.createChecksum=Yue;Pa.decode=WH;Pa.decodeWithPrefix=Xue;Pa.detectCase=Jue;Pa.encode=Zue;Pa.expandPrefix=UH;Pa.verifyChecksum=Gue;var jH=pv,DT="qpzry9x8gf2tvdw0s3jn54khce6mua7l",zH=734539939,rB=33,nB=126,BT=6;Pa.CHECKSUM_LENGTH=BT;var Kue=function(){for(var e=new Map,r=0;r<DT.length;r+=1)e.set(DT[r],r);return e}(),Vue=[996825010,642813549,513874426,1027748829,705979059];function HH(e){return e.reduce(function(r,t){var n=r>>25,i=(r&33554431)<<5^t;return Vue.reduce(function(s,o,a){return n>>a&1?s^o:s},i)},1)}function UH(e,r){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);r[t]=n>>5,r[t+e.length+1]=n&31}r[e.length]=0}function Gue(e){switch(HH(e)){case 1:return"bech32";case zH:return"bech32m";default:return}}function Yue(e,r){var t;switch(r){case"bech32":t=1;break;case"bech32m":t=zH;break;default:throw Error("Invalid encoding value: ".concat(r,"; expected bech32 or bech32m"))}for(var n=HH(e)^t,i=0;i<BT;i+=1){var s=5*(5-i);e[e.length-BT+i]=n>>s&31}}function Zue(e){return e.reduce(function(r,t){return r+DT[t]},"")}function WH(e,r){for(var t=r||(0,jH.createBitArray)(e.length),n=0;n<e.length;n+=1){var i=Kue.get(e[n]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[n]));t[n]=i}return t}function Xue(e,r){var t=r.length+2*e.length+1,n=(0,jH.createBitArray)(t);return UH(e,n.subarray(0,2*e.length+1)),WH(r,n.subarray(2*e.length+1)),n}function Jue(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",t=!1,n=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<rB||s>nB)throw new TypeError("Invalid char in ".concat(r,": ").concat(s,"; ")+"should be in ASCII range ".concat(rB,"-").concat(nB));n=n||s>=65&&s<=90,t=t||s>=97&&s<=122}if(t&&n)throw new TypeError("Mixed-case ".concat(r));return n?"upper":t?"lower":null}Object.defineProperty(xu,"__esModule",{value:!0});xu.BitcoinAddress=void 0;var MT=xu.decode=rce;xu.decodeTo5BitArray=_3;var iB=xu.encode=tce;xu.encode5BitArray=$3;xu.from5BitArray=w3;xu.to5BitArray=b3;var Ay=pv,jo=Pa;function Que(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sB(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ece(e,r,t){return r&&sB(e.prototype,r),t&&sB(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Bw=90;function b3(e,r){var t=Math.ceil(e.length*8/5),n=r||(0,Ay.createBitArray)(t);return(0,Ay.toBits)(e,5,n)}function w3(e,r){var t=Math.floor(e.length*5/8),n=r||new Uint8Array(t);return(0,Ay.fromBits)(e,5,n)}function $3(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+r.length+jo.CHECKSUM_LENGTH;if(i-e.length>Bw)throw new Error("Message to be produced is too long (max ".concat(Bw," supported)"));var s=(t=(0,jo.detectCase)(e,"prefix"))!==null&&t!==void 0?t:"lower",o=(0,Ay.createBitArray)(i);(0,jo.expandPrefix)(e.toLowerCase(),o.subarray(0,2*e.length+1));var a=o.subarray(2*e.length+1,o.length-jo.CHECKSUM_LENGTH);a.set(r),(0,jo.createChecksum)(o,n);var l=(0,jo.encode)(o.subarray(2*e.length+1));return s==="upper"&&(l=l.toUpperCase()),"".concat(e,"1").concat(l)}function tce(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return $3(e,b3(r),t)}function _3(e){if(e.length>Bw)throw new TypeError("Message too long; max ".concat(Bw," expected"));(0,jo.detectCase)(e);var r=e.toLowerCase(),t=r.lastIndexOf("1");if(t<0)throw new Error('No separator char ("1") found');if(t>e.length-jo.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(jo.CHECKSUM_LENGTH," chars expected)"));var n=r.substring(0,t),i=(0,jo.decodeWithPrefix)(n,r.substring(t+1)),s=(0,jo.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:n,encoding:s,data:i.subarray(2*n.length+1,i.length-jo.CHECKSUM_LENGTH)}}function rce(e){var r=_3(e),t=r.prefix,n=r.encoding,i=r.data;return{prefix:t,encoding:n,data:w3(i)}}var nce=function(){function e(r,t,n){if(Que(this,e),r!=="bc"&&r!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(t<0||t>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(n.length<2||n.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(t===0&&n.length!==20&&n.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=r,this.scriptVersion=t,this.data=n}return ece(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var t=Math.ceil(this.data.length*8/5),n=(0,Ay.createBitArray)(t+1);n[0]=this.scriptVersion,b3(this.data,n.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return $3(this.prefix,n,i)}}],[{key:"decode",value:function(t){var n=_3(t),i=n.prefix,s=n.data,o=n.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var a=s[0];if(a===0&&o!=="bech32")throw Error("Unexpected encoding ".concat(o," used for version 0 script"));if(a>0&&o!=="bech32m")throw Error("Unexpected encoding ".concat(o," used for version ").concat(a," script"));return new this(i,a,w3(s.subarray(1)))}}]),e}();xu.BitcoinAddress=nce;function LT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ice(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function qH(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function sce(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");LT(e.outputLen),LT(e.blockLen)}function oce(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ace(e,r){qH(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Vf={number:LT,bool:ice,bytes:qH,hash:sce,exists:oce,output:ace},lE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x3=e=>e instanceof Uint8Array,uE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ya=(e,r)=>e<<32-r|e>>>r,lce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lce)throw new Error("Non little-endian hardware is not supported");const uce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function zo(e){if(!x3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=uce[e[t]];return r}function Bp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function cce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function E3(e){if(typeof e=="string"&&(e=cce(e)),!x3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function KH(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!x3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let VH=class{clone(){return this._cloneInto()}};function GH(e){const r=n=>e().update(E3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function S3(e=32){if(lE&&typeof lE.getRandomValues=="function")return lE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function fce(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let hce=class extends VH{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=uE(this.buffer)}update(r){Vf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=E3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=uE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Vf.exists(this),Vf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;fce(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=uE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const dce=(e,r,t)=>e&r^~e&t,pce=(e,r,t)=>e&r^e&t^r&t,vce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ku=new Uint32Array(64);let YH=class extends hce{constructor(){super(64,32,8,!1),this.A=qu[0]|0,this.B=qu[1]|0,this.C=qu[2]|0,this.D=qu[3]|0,this.E=qu[4]|0,this.F=qu[5]|0,this.G=qu[6]|0,this.H=qu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Ku[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Ku[c-15],y=Ku[c-2],w=Ya(d,7)^Ya(d,18)^d>>>3,b=Ya(y,17)^Ya(y,19)^y>>>10;Ku[c]=b+Ku[c-7]+w+Ku[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Ya(a,6)^Ya(a,11)^Ya(a,25),y=f+d+dce(a,l,u)+vce[c]+Ku[c]|0,b=(Ya(n,2)^Ya(n,13)^Ya(n,22))+pce(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Ku.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},gce=class extends YH{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Mp=GH(()=>new YH);GH(()=>new gce);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ZH=BigInt(0),p_=BigInt(1),yce=BigInt(2),v_=e=>e instanceof Uint8Array,mce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Lp(e){if(!v_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=mce[e[t]];return r}function XH(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function k3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Fp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Ps(e){return k3(Lp(e))}function T3(e){if(!v_(e))throw new Error("Uint8Array expected");return k3(Lp(Uint8Array.from(e).reverse()))}function Ic(e,r){return Fp(e.toString(16).padStart(r*2,"0"))}function JH(e,r){return Ic(e,r).reverse()}function bce(e){return Fp(XH(e))}function ki(e,r,t){let n;if(typeof r=="string")try{n=Fp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(v_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Sh(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!v_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function wce(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function $ce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function _ce(e){let r;for(r=0;e>ZH;e>>=p_,r+=1);return r}function xce(e,r){return e>>BigInt(r)&p_}const Ece=(e,r,t)=>e|(t?p_:ZH)<<BigInt(r),I3=e=>(yce<<BigInt(e-1))-p_,cE=e=>new Uint8Array(e),oB=e=>Uint8Array.from(e);function QH(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=cE(e),i=cE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=cE())=>{i=a(oB([0]),c),n=a(),c.length!==0&&(i=a(oB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Sh(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const Sce={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function _m(e,r,t={}){const n=(i,s,o)=>{const a=Sce[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const kce=Object.freeze(Object.defineProperty({__proto__:null,bitGet:xce,bitLen:_ce,bitMask:I3,bitSet:Ece,bytesToHex:Lp,bytesToNumberBE:Ps,bytesToNumberLE:T3,concatBytes:Sh,createHmacDrbg:QH,ensureBytes:ki,equalBytes:wce,hexToBytes:Fp,hexToNumber:k3,numberToBytesBE:Ic,numberToBytesLE:JH,numberToHexUnpadded:XH,numberToVarBytesBE:bce,utf8ToBytes:$ce,validateObject:_m},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const di=BigInt(0),Cn=BigInt(1),Mf=BigInt(2),Tce=BigInt(3),FT=BigInt(4),aB=BigInt(5),lB=BigInt(8);BigInt(9);BigInt(16);function Ii(e,r){const t=e%r;return t>=di?t:r+t}function Ice(e,r,t){if(t<=di||r<di)throw new Error("Expected power/modulo > 0");if(t===Cn)return di;let n=Cn;for(;r>di;)r&Cn&&(n=n*e%t),e=e*e%t,r>>=Cn;return n}function To(e,r,t){let n=e;for(;r-- >di;)n*=n,n%=t;return n}function jT(e,r){if(e===di||r<=di)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=Ii(e,r),n=r,i=di,s=Cn;for(;t!==di;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Cn)throw new Error("invert: does not exist");return Ii(i,r)}function Ace(e){const r=(e-Cn)/Mf;let t,n,i;for(t=e-Cn,n=0;t%Mf===di;t/=Mf,n++);for(i=Mf;i<e&&Ice(i,r,e)!==e-Cn;i++);if(n===1){const o=(e+Cn)/FT;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Cn)/Mf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Cn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),d=a.mul(d,f),u=y}return c}}function Oce(e){if(e%FT===Tce){const r=(e+Cn)/FT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%lB===aB){const r=(e-aB)/lB;return function(n,i){const s=n.mul(i,Mf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Mf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Ace(e)}const Cce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pce(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Cce.reduce((n,i)=>(n[i]="function",n),r);return _m(e,t)}function Nce(e,r,t){if(t<di)throw new Error("Expected power > 0");if(t===di)return e.ONE;if(t===Cn)return r;let n=e.ONE,i=r;for(;t>di;)t&Cn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Cn;return n}function Rce(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function A3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Dce(e,r,t=!1,n={}){if(e<=di)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=A3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Oce(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:I3(i),ZERO:di,ONE:Cn,create:l=>Ii(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return di<=l&&l<e},is0:l=>l===di,isOdd:l=>(l&Cn)===Cn,neg:l=>Ii(-l,e),eql:(l,u)=>l===u,sqr:l=>Ii(l*l,e),add:(l,u)=>Ii(l+u,e),sub:(l,u)=>Ii(l-u,e),mul:(l,u)=>Ii(l*u,e),pow:(l,u)=>Nce(a,l,u),div:(l,u)=>Ii(l*jT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>jT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Rce(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?JH(l,s):Ic(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?T3(l):Ps(l)}});return Object.freeze(a)}function Bce(e,r,t=!1){e=ki("privateHash",e);const n=e.length,i=A3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?T3(e):Ps(e);return Ii(s,r-Cn)+Cn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mce=BigInt(0),fE=BigInt(1);function Lce(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>Mce;)s&fE&&(o=o.add(a)),a=a.double(),s>>=fE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let d=1;d<a;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=fE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function eU(e){return Pce(e.Fp),_m(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...A3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fce(e){const r=eU(e);_m(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:jce,hexToBytes:zce}=kce,Gf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Gf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:jce(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Gf,t=typeof e=="string"?zce(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Gf._parseInt(t.subarray(2)),{d:o,l:a}=Gf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Gl=BigInt(0),No=BigInt(1);BigInt(2);const uB=BigInt(3);BigInt(4);function Hce(e){const r=Fce(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Sh(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Gl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Lp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:Ps(ki("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=Ii(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(ki("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,uB),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),z=t.mul(I,I),V=t.mul(A,x);return V=t.add(V,V),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,z),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(V,O),g=t.mul(_,g),z=t.mul(b,z),V=t.sub(M,z),V=t.mul(b,V),V=t.add(V,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,z),M=t.mul(M,V),C=t.add(C,M),z=t.mul(x,I),z=t.add(z,z),M=t.mul(z,V),O=t.sub(O,M),g=t.mul(z,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,z=t.mul(r.b,uB);let V=t.mul(T,x),ne=t.mul(_,I),re=t.mul(A,O),J=t.add(T,_),F=t.add(x,I);J=t.mul(J,F),F=t.add(V,ne),J=t.sub(J,F),F=t.add(T,A);let Z=t.add(x,O);return F=t.mul(F,Z),Z=t.add(V,re),F=t.sub(F,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(ne,re),Z=t.sub(Z,C),M=t.mul(B,F),C=t.mul(z,re),M=t.add(C,M),C=t.sub(ne,M),M=t.add(ne,M),g=t.mul(C,M),ne=t.add(V,V),ne=t.add(ne,V),re=t.mul(B,re),F=t.mul(z,F),ne=t.add(ne,re),re=t.sub(V,re),re=t.mul(B,re),F=t.add(F,re),V=t.mul(ne,F),g=t.add(g,V),V=t.mul(Z,F),C=t.mul(J,C),C=t.sub(C,V),V=t.mul(J,ne),M=t.mul(Z,M),M=t.add(M,V),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Gl)return T;if(a(b),b===No)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>Gl||O>Gl;)x&No&&(C=C.add(M)),O&No&&(g=g.add(M)),M=M.double(),x>>=No,O>>=No;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:z,f:V}=this.wNAF(g);M=y.constTimeNegate(I,M),z=y.constTimeNegate(C,z),z=new c(t.mul(z.px,x.beta),z.py,z.pz),_=M.add(z),A=B.add(V)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Gl||C===No||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===No)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===No?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Lp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=Lce(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Uce(e){const r=eU(e);return _m(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Wce(e){const r=Uce(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(F){return Gl<F&&F<t.ORDER}function a(F){return Ii(F,n)}function l(F){return jT(F,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=Hce({...r,toBytes(F,Z,ie){const _e=Z.toAffine(),we=t.toBytes(_e.x),Ce=Sh;return ie?Ce(Uint8Array.from([Z.hasEvenY()?2:3]),we):Ce(Uint8Array.from([4]),we,t.toBytes(_e.y))},fromBytes(F){const Z=F.length,ie=F[0],_e=F.subarray(1);if(Z===i&&(ie===2||ie===3)){const we=Ps(_e);if(!o(we))throw new Error("Point is not on curve");const Ce=c(we);let He=t.sqrt(Ce);const Ge=(He&No)===No;return(ie&1)===1!==Ge&&(He=t.neg(He)),{x:we,y:He}}else if(Z===s&&ie===4){const we=t.fromBytes(_e.subarray(0,t.BYTES)),Ce=t.fromBytes(_e.subarray(t.BYTES,2*t.BYTES));return{x:we,y:Ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=F=>Lp(Ic(F,r.nByteLength));function w(F){const Z=n>>No;return F>Z}function b(F){return w(F)?a(-F):F}const T=(F,Z,ie)=>Ps(F.slice(Z,ie));class _{constructor(Z,ie,_e){this.r=Z,this.s=ie,this.recovery=_e,this.assertValidity()}static fromCompact(Z){const ie=r.nByteLength;return Z=ki("compactSignature",Z,ie*2),new _(T(Z,0,ie),T(Z,ie,2*ie))}static fromDER(Z){const{r:ie,s:_e}=Gf.toSig(ki("DER",Z));return new _(ie,_e)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:ie,s:_e,recovery:we}=this,Ce=g(ki("msgHash",Z));if(we==null||![0,1,2,3].includes(we))throw new Error("recovery id invalid");const He=we===2||we===3?ie+r.n:ie;if(He>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=we&1?"03":"02",it=u.fromHex(Ge+y(He)),xe=l(He),ge=a(-Ce*xe),Te=a(_e*xe),je=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Fp(this.toDERHex())}toDERHex(){return Gf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(F){try{return f(F),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const F=r.randomBytes(t.BYTES+8),Z=Bce(F,n);return Ic(Z,r.nByteLength)},precompute(F=8,Z=u.BASE){return Z._setWindowSize(F),Z.multiply(BigInt(3)),Z}};function x(F,Z=!0){return u.fromPrivateKey(F).toRawBytes(Z)}function I(F){const Z=F instanceof Uint8Array,ie=typeof F=="string",_e=(Z||ie)&&F.length;return Z?_e===i||_e===s:ie?_e===2*i||_e===2*s:F instanceof u}function O(F,Z,ie=!0){if(I(F))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(f(F)).toRawBytes(ie)}const C=r.bits2int||function(F){const Z=Ps(F),ie=F.length*8-r.nBitLength;return ie>0?Z>>BigInt(ie):Z},g=r.bits2int_modN||function(F){return a(C(F))},M=I3(r.nBitLength);function B(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(Gl<=F&&F<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Ic(F,r.nByteLength)}function z(F,Z,ie=V){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:_e,randomBytes:we}=r;let{lowS:Ce,prehash:He,extraEntropy:Ge}=ie;Ce==null&&(Ce=!0),F=ki("msgHash",F),He&&(F=ki("prehashed msgHash",_e(F)));const it=g(F),xe=f(Z),ge=[B(xe),B(it)];if(Ge!=null){const S=Ge===!0?we(t.BYTES):Ge;ge.push(ki("extraEntropy",S,t.BYTES))}const Te=Sh(...ge),je=it;function $(S){const N=C(S);if(!d(N))return;const L=l(N),j=u.BASE.multiply(N).toAffine(),K=a(j.x);if(K===Gl)return;const ae=a(L*a(je+K*xe));if(ae===Gl)return;let ye=(j.x===K?0:2)|Number(j.y&No),Ue=ae;return Ce&&w(ae)&&(Ue=b(ae),ye^=1),new _(K,Ue,ye)}return{seed:Te,k2sig:$}}const V={lowS:r.lowS,prehash:!1},ne={lowS:r.lowS,prehash:!1};function re(F,Z,ie=V){const{seed:_e,k2sig:we}=z(F,Z,ie),Ce=r;return QH(Ce.hash.outputLen,Ce.nByteLength,Ce.hmac)(_e,we)}u.BASE._setWindowSize(8);function J(F,Z,ie,_e=ne){var j;const we=F;if(Z=ki("msgHash",Z),ie=ki("publicKey",ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:He}=_e;let Ge,it;try{if(typeof we=="string"||we instanceof Uint8Array)try{Ge=_.fromDER(we)}catch(K){if(!(K instanceof Gf.Err))throw K;Ge=_.fromCompact(we)}else if(typeof we=="object"&&typeof we.r=="bigint"&&typeof we.s=="bigint"){const{r:K,s:ae}=we;Ge=new _(K,ae)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(K){if(K.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&Ge.hasHighS())return!1;He&&(Z=r.hash(Z));const{r:xe,s:ge}=Ge,Te=g(Z),je=l(ge),$=a(Te*je),S=a(xe*je),N=(j=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:j.toAffine();return N?a(N.x)===xe:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:J,ProjectivePoint:u,Signature:_,utils:A}}let tU=class extends VH{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Vf.hash(r);const n=E3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Vf.exists(this),this.iHash.update(r),this}digestInto(r){Vf.exists(this),Vf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const rU=(e,r,t)=>new tU(e,r).update(t).digest();rU.create=(e,r)=>new tU(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qce(e){return{hash:e,hmac:(r,...t)=>rU(e,r,KH(...t)),randomBytes:S3}}function Kce(e,r){const t=n=>Wce({...e,...qce(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Mw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nU=BigInt(1),Lw=BigInt(2),cB=(e,r)=>(e+r/Lw)/r;function iU(e){const r=g_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=To(f,t,r)*f%r,d=To(c,t,r)*f%r,y=To(d,Lw,r)*u%r,w=To(y,i,r)*y%r,b=To(w,s,r)*w%r,T=To(b,a,r)*b%r,_=To(T,l,r)*T%r,A=To(_,a,r)*b%r,x=To(A,t,r)*f%r,I=To(x,o,r)*w%r,O=To(I,n,r)*u%r,C=To(O,Lw,r);if(!zT.eql(zT.sqr(C),e))throw new Error("Cannot find square root");return C}const zT=Dce(g_,void 0,void 0,{sqrt:iU}),xm=Kce({a:BigInt(0),b:BigInt(7),Fp:zT,n:Mw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Mw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-nU*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=cB(s*e,r),l=cB(-n*e,r);let u=Ii(e-a*t-l*i,r),f=Ii(-a*n-l*s,r);const c=u>o,d=f>o;if(c&&(u=r-u),d&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:f}}}},Mp),y_=BigInt(0),sU=e=>typeof e=="bigint"&&y_<e&&e<g_,Vce=e=>typeof e=="bigint"&&y_<e&&e<Mw,fB={};function Fw(e,...r){let t=fB[e];if(t===void 0){const n=Mp(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Sh(n,n),fB[e]=t}return Mp(Sh(t,...r))}const O3=e=>e.toRawBytes(!0).slice(1),HT=e=>Ic(e,32),hE=e=>Ii(e,g_),Oy=e=>Ii(e,Mw),C3=xm.ProjectivePoint,Gce=(e,r,t)=>C3.BASE.multiplyAndAddUnsafe(e,r,t);function UT(e){let r=xm.utils.normPrivateKeyToScalar(e),t=C3.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Oy(-r),bytes:O3(t)}}function oU(e){if(!sU(e))throw new Error("bad x: need 0 < x < p");const r=hE(e*e),t=hE(r*e+BigInt(7));let n=iU(t);n%Lw!==y_&&(n=hE(-n));const i=new C3(e,n,nU);return i.assertValidity(),i}function aU(...e){return Oy(Ps(Fw("BIP0340/challenge",...e)))}function Yce(e){return UT(e).bytes}function Zce(e,r,t=S3(32)){const n=ki("message",e),{bytes:i,scalar:s}=UT(r),o=ki("auxRand",t,32),a=HT(s^Ps(Fw("BIP0340/aux",o))),l=Fw("BIP0340/nonce",a,i,n),u=Oy(Ps(l));if(u===y_)throw new Error("sign failed: k is zero");const{bytes:f,scalar:c}=UT(u),d=aU(f,i,n),y=new Uint8Array(64);if(y.set(f,0),y.set(HT(Oy(c+d*s)),32),!lU(y,n,i))throw new Error("sign: Invalid signature produced");return y}function lU(e,r,t){const n=ki("signature",e,64),i=ki("message",r),s=ki("publicKey",t,32);try{const o=oU(Ps(s)),a=Ps(n.subarray(0,32));if(!sU(a))return!1;const l=Ps(n.subarray(32,64));if(!Vce(l))return!1;const u=aU(HT(a),O3(o),i),f=Gce(o,l,Oy(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const vv=(()=>({getPublicKey:Yce,sign:Zce,verify:lU,utils:{randomPrivateKey:xm.utils.randomPrivateKey,lift_x:oU,pointToBytes:O3,numberToBytesBE:Ic,bytesToNumberBE:Ps,taggedHash:Fw,mod:Ii}}))();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Na(...e){const r=(i,s)=>o=>i(s(o)),t=Array.from(e).reverse().reduce((i,s)=>i?r(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?r(i,s.decode):s.decode,void 0);return{encode:t,decode:n}}function ml(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return r.map(t=>{if(Zc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("alphabet.decode input should be array of strings");return r.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})}}}function bl(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of r)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return r.join(e)},decode:r=>{if(typeof r!="string")throw new Error("join.decode input should be string");return r.split(e)}}}function Em(e,r="="){if(Zc(e),typeof r!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function uU(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:r=>r,decode:r=>e(r)}}function hB(e,r,t){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(Zc(o),o<0||o>=r)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let l=n;l<s.length;l++){const u=s[l],f=r*o+u;if(!Number.isSafeInteger(f)||r*o/r!==o||f-u!==r*o)throw new Error("convertRadix: carry overflow");if(o=f%t,s[l]=Math.floor(f/t),!Number.isSafeInteger(s[l])||s[l]*t+o!==f)throw new Error("convertRadix: carry overflow");if(a)s[l]?a=!1:n=l;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const cU=(e,r)=>r?cU(r,e%r):e,jw=(e,r)=>e+(r-cU(e,r));function WT(e,r,t,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(jw(r,t)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${t} carryBits=${jw(r,t)}`);let i=0,s=0;const o=2**t-1,a=[];for(const l of e){if(Zc(l),l>=2**r)throw new Error(`convertRadix2: invalid data word=${l} from=${r}`);if(i=i<<r|l,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=t;s-=t)a.push((i>>s-t&o)>>>0);i&=2**s-1}if(i=i<<t-s&o,!n&&s>=r)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function fU(e){return Zc(e),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return hB(Array.from(r),2**8,e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(hB(r,e,2**8))}}}function Eu(e,r=!1){if(Zc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(jw(8,e)>32||jw(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return WT(Array.from(t),8,e,!r)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(WT(t,e,8,r))}}}function dB(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...r){try{return e.apply(null,r)}catch{}}}function hU(e,r){if(Zc(e),typeof r!="function")throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=r(t).slice(0,e),i=new Uint8Array(t.length+e);return i.set(t),i.set(n,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-e),i=r(n).slice(0,e),s=t.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}const Kg={alphabet:ml,chain:Na,checksum:hU,radix:fU,radix2:Eu,join:bl,padding:Em},dU=Na(Eu(4),ml("0123456789ABCDEF"),bl("")),pU=Na(Eu(5),ml("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Em(5),bl("")),Xce=Na(Eu(5),ml("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Em(5),bl("")),Jce=Na(Eu(5),ml("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),bl(""),uU(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Go=Na(Eu(6),ml("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Em(6),bl("")),vU=Na(Eu(6),ml("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Em(6),bl("")),P3=e=>Na(fU(58),ml(e),bl("")),Cy=P3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Qce=P3("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),efe=P3("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),pB=[0,2,3,5,6,7,9,10,11],gU={encode(e){let r="";for(let t=0;t<e.length;t+=8){const n=e.subarray(t,t+8);r+=Cy.encode(n).padStart(pB[n.length],"1")}return r},decode(e){let r=[];for(let t=0;t<e.length;t+=11){const n=e.slice(t,t+11),i=pB.indexOf(n.length),s=Cy.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},N3=e=>Na(hU(4,r=>e(e(r))),Cy),qT=Na(ml("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),bl("")),vB=[996825010,642813549,513874426,1027748829,705979059];function Ng(e){const r=e>>25;let t=(e&33554431)<<5;for(let n=0;n<vB.length;n++)(r>>n&1)===1&&(t^=vB[n]);return t}function gB(e,r,t=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Ng(i)^o>>5}i=Ng(i);for(let s=0;s<n;s++)i=Ng(i)^e.charCodeAt(s)&31;for(let s of r)i=Ng(i)^s;for(let s=0;s<6;s++)i=Ng(i);return i^=t,qT.encode(WT([i%2**30],30,5,!1))}function yU(e){const r=e==="bech32"?1:734539939,t=Eu(5),n=t.decode,i=t.encode,s=dB(n);function o(f,c,d=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof c}`);const y=f.length+7+c.length;if(d!==!1&&y>d)throw new TypeError(`Length ${y} exceeds limit ${d}`);return f=f.toLowerCase(),`${f}1${qT.encode(c)}${gB(f,c,r)}`}function a(f,c=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||c!==!1&&f.length>c)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${c})`);const d=f.toLowerCase();if(f!==d&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=d;const y=f.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=f.slice(0,y),b=f.slice(y+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");const T=qT.decode(b).slice(0,-6),_=gB(w,T,r);if(!b.endsWith(_))throw new Error(`Invalid checksum in ${f}: expected "${_}"`);return{prefix:w,words:T}}const l=dB(a);function u(f){const{prefix:c,words:d}=a(f,!1);return{prefix:c,words:d,bytes:n(d)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const Dn=yU("bech32"),tfe=yU("bech32m"),mU={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},bU=Na(Eu(4),ml("0123456789abcdef"),bl(""),uU(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Py={utf8:mU,hex:bU,base16:dU,base32:pU,base64:Go,base64url:vU,base58:Cy,base58xmr:gU},wU=`Invalid encoding type. Available types: ${Object.keys(Py).join(", ")}`,$U=(e,r)=>{if(typeof e!="string"||!Py.hasOwnProperty(e))throw new TypeError(wU);if(!(r instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Py[e].encode(r)},rfe=$U,_U=(e,r)=>{if(!Py.hasOwnProperty(e))throw new TypeError(wU);if(typeof r!="string")throw new TypeError("stringToBytes() expects string");return Py[e].decode(r)},nfe=_U,ife=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Zc,base16:dU,base32:pU,base32crockford:Jce,base32hex:Xce,base58:Cy,base58check:N3,base58flickr:Qce,base58xmr:gU,base58xrp:efe,base64:Go,base64url:vU,bech32:Dn,bech32m:tfe,bytes:nfe,bytesToString:$U,hex:bU,str:rfe,stringToBytes:_U,utf8:mU,utils:Kg},Symbol.toStringTag,{value:"Module"})),xU=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);function KT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function sfe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function EU(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function ofe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");KT(e.outputLen),KT(e.blockLen)}function afe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function lfe(e,r){EU(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Qs={number:KT,bool:sfe,bytes:EU,hash:ofe,exists:afe,output:lfe},dE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Za=(e,r)=>e<<32-r|e>>>r,ufe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ufe)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function cfe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ny(e){if(typeof e=="string"&&(e=cfe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let SU=class{clone(){return this._cloneInto()}};const ffe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function hfe(e,r){if(r!==void 0&&(typeof r!="object"||!ffe(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function gv(e){const r=n=>e().update(Ny(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function dfe(e=32){if(dE&&typeof dE.getRandomValues=="function")return dE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let kU=class extends SU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Qs.hash(r);const n=Ny(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Qs.exists(this),this.iHash.update(r),this}digestInto(r){Qs.exists(this),Qs.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const TU=(e,r,t)=>new kU(e,r).update(t).digest();TU.create=(e,r)=>new kU(e,r);function pfe(e,r,t,n){Qs.hash(e);const i=hfe({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Qs.number(s),Qs.number(o),Qs.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Ny(r),u=Ny(t),f=new Uint8Array(o),c=TU.create(e,l),d=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:c,PRFSalt:d}}function vfe(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function gfe(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=pfe(e,r,t,n);let u;const f=new Uint8Array(4),c=G1(f),d=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(f).digestInto(d),b.set(d.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(d).digestInto(d);for(let _=0;_<b.length;_++)b[_]^=d[_]}}return vfe(a,l,o,u,d)}function yfe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let IU=class extends SU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=G1(this.buffer)}update(r){Qs.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Ny(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=G1(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Qs.exists(this),Qs.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;yfe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=G1(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const mfe=(e,r,t)=>e&r^~e&t,bfe=(e,r,t)=>e&r^e&t^r&t,wfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gu=new Uint32Array(64);let AU=class extends IU{constructor(){super(64,32,8,!1),this.A=Vu[0]|0,this.B=Vu[1]|0,this.C=Vu[2]|0,this.D=Vu[3]|0,this.E=Vu[4]|0,this.F=Vu[5]|0,this.G=Vu[6]|0,this.H=Vu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Gu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Gu[c-15],y=Gu[c-2],w=Za(d,7)^Za(d,18)^d>>>3,b=Za(y,17)^Za(y,19)^y>>>10;Gu[c]=b+Gu[c-7]+w+Gu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Za(a,6)^Za(a,11)^Za(a,25),y=f+d+mfe(a,l,u)+wfe[c]+Gu[c]|0,b=(Za(n,2)^Za(n,13)^Za(n,22))+bfe(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Gu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},$fe=class extends AU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const _fe=gv(()=>new AU);gv(()=>new $fe);const A0=BigInt(2**32-1),VT=BigInt(32);function OU(e,r=!1){return r?{h:Number(e&A0),l:Number(e>>VT&A0)}:{h:Number(e>>VT&A0)|0,l:Number(e&A0)|0}}function xfe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=OU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Efe=(e,r)=>BigInt(e>>>0)<<VT|BigInt(r>>>0),Sfe=(e,r,t)=>e>>>t,kfe=(e,r,t)=>e<<32-t|r>>>t,Tfe=(e,r,t)=>e>>>t|r<<32-t,Ife=(e,r,t)=>e<<32-t|r>>>t,Afe=(e,r,t)=>e<<64-t|r>>>t-32,Ofe=(e,r,t)=>e>>>t-32|r<<64-t,Cfe=(e,r)=>r,Pfe=(e,r)=>e,Nfe=(e,r,t)=>e<<t|r>>>32-t,Rfe=(e,r,t)=>r<<t|e>>>32-t,Dfe=(e,r,t)=>r<<t-32|e>>>64-t,Bfe=(e,r,t)=>e<<t-32|r>>>64-t;function Mfe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Lfe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Ffe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,jfe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),zfe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Hfe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Ufe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,ir={fromBig:OU,split:xfe,toBig:Efe,shrSH:Sfe,shrSL:kfe,rotrSH:Tfe,rotrSL:Ife,rotrBH:Afe,rotrBL:Ofe,rotr32H:Cfe,rotr32L:Pfe,rotlSH:Nfe,rotlSL:Rfe,rotlBH:Dfe,rotlBL:Bfe,add:Mfe,add3L:Lfe,add3H:Ffe,add4L:jfe,add4H:zfe,add5H:Ufe,add5L:Hfe},[Wfe,qfe]=ir.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Yu=new Uint32Array(80),Zu=new Uint32Array(80);let m_=class extends IU{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Yu[x]=r.getUint32(t),Zu[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Yu[x-15]|0,O=Zu[x-15]|0,C=ir.rotrSH(I,O,1)^ir.rotrSH(I,O,8)^ir.shrSH(I,O,7),g=ir.rotrSL(I,O,1)^ir.rotrSL(I,O,8)^ir.shrSL(I,O,7),M=Yu[x-2]|0,B=Zu[x-2]|0,z=ir.rotrSH(M,B,19)^ir.rotrBH(M,B,61)^ir.shrSH(M,B,6),V=ir.rotrSL(M,B,19)^ir.rotrBL(M,B,61)^ir.shrSL(M,B,6),ne=ir.add4L(g,V,Zu[x-7],Zu[x-16]),re=ir.add4H(ne,C,z,Yu[x-7],Yu[x-16]);Yu[x]=re|0,Zu[x]=ne|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=ir.rotrSH(c,d,14)^ir.rotrSH(c,d,18)^ir.rotrBH(c,d,41),O=ir.rotrSL(c,d,14)^ir.rotrSL(c,d,18)^ir.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,M=ir.add5L(A,O,g,qfe[x],Zu[x]),B=ir.add5H(M,_,I,C,Wfe[x],Yu[x]),z=M|0,V=ir.rotrSH(n,i,28)^ir.rotrBH(n,i,34)^ir.rotrBH(n,i,39),ne=ir.rotrSL(n,i,28)^ir.rotrBL(n,i,34)^ir.rotrBL(n,i,39),re=n&s^n&a^s&a,J=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=ir.add(u|0,f|0,B|0,z|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const F=ir.add3L(z,ne,J);n=ir.add3H(F,B,V,re),i=F|0}({h:n,l:i}=ir.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ir.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ir.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=ir.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:d}=ir.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=ir.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=ir.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=ir.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A)}roundClean(){Yu.fill(0),Zu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Kfe=class extends m_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Vfe=class extends m_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Gfe=class extends m_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Yfe=gv(()=>new m_);gv(()=>new Kfe);gv(()=>new Vfe);gv(()=>new Gfe);const Zfe=e=>e[0]==="";function CU(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function PU(e){const r=CU(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function NU(e){Qs.bytes(e,16,20,24,28,32)}function Xfe(e,r=128){if(Qs.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return ehe(dfe(r/8),e)}const Jfe=e=>{const r=8-e.length/4;return new Uint8Array([_fe(e)[0]>>r<<r])};function RU(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),Kg.chain(Kg.checksum(1,Jfe),Kg.radix2(11,!0),Kg.alphabet(e))}function Qfe(e,r){const{words:t}=PU(e),n=RU(r).decode(t);return NU(n),n}function ehe(e,r){return NU(e),RU(r).encode(e).join(Zfe(r)?"":" ")}function the(e,r){try{Qfe(e,r)}catch{return!1}return!0}const rhe=e=>CU(`mnemonic${e}`);function nhe(e,r=""){return gfe(Yfe,PU(e).nfkd,rhe(r),{c:2048,dkLen:64})}function GT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ihe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Lf(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function she(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");GT(e.outputLen),GT(e.blockLen)}function ohe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ahe(e,r){Lf(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Yf={number:GT,bool:ihe,bytes:Lf,hash:she,exists:ohe,output:ahe},pE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const R3=e=>e instanceof Uint8Array,wp=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xa=(e,r)=>e<<32-r|e>>>r,lhe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lhe)throw new Error("Non little-endian hardware is not supported");const uhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function che(e){if(!R3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=uhe[e[t]];return r}function fhe(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function DU(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function D3(e){if(typeof e=="string"&&(e=DU(e)),!R3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Vg(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!R3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let BU=class{clone(){return this._cloneInto()}};function Hh(e){const r=n=>e().update(D3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function hhe(e=32){if(pE&&typeof pE.getRandomValues=="function")return pE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let MU=class extends BU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Yf.hash(r);const n=D3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Yf.exists(this),this.iHash.update(r),this}digestInto(r){Yf.exists(this),Yf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zw=(e,r,t)=>new MU(e,r).update(t).digest();zw.create=(e,r)=>new MU(e,r);function dhe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let B3=class extends BU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=wp(this.buffer)}update(r){Yf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=D3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=wp(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Yf.exists(this),Yf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;dhe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=wp(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const phe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),LU=Uint8Array.from({length:16},(e,r)=>r),vhe=LU.map(e=>(9*e+5)%16);let M3=[LU],L3=[vhe];for(let e=0;e<4;e++)for(let r of[M3,L3])r.push(r[e].map(t=>phe[t]));const FU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),ghe=M3.map((e,r)=>e.map(t=>FU[r][t])),yhe=L3.map((e,r)=>e.map(t=>FU[r][t])),mhe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),bhe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),O0=(e,r)=>e<<r|e>>>32-r;function yB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const C0=new Uint32Array(16);let whe=class extends B3{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)C0[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,f=u,c=this.h4|0,d=c;for(let y=0;y<5;y++){const w=4-y,b=mhe[y],T=bhe[y],_=M3[y],A=L3[y],x=ghe[y],I=yhe[y];for(let O=0;O<16;O++){const C=O0(n+yB(y,s,a,u)+C0[_[O]]+b,x[O])+c|0;n=c,c=u,u=O0(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=O0(i+yB(w,o,l,f)+C0[A[O]]+T,I[O])+d|0;i=d,d=f,f=O0(l,10)|0,l=o,o=C}}this.set(this.h1+a+f|0,this.h2+u+d|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){C0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const $he=Hh(()=>new whe),_he=(e,r,t)=>e&r^~e&t,xhe=(e,r,t)=>e&r^e&t^r&t,Ehe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ju=new Uint32Array(64);let jU=class extends B3{constructor(){super(64,32,8,!1),this.A=Xu[0]|0,this.B=Xu[1]|0,this.C=Xu[2]|0,this.D=Xu[3]|0,this.E=Xu[4]|0,this.F=Xu[5]|0,this.G=Xu[6]|0,this.H=Xu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Ju[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Ju[c-15],y=Ju[c-2],w=Xa(d,7)^Xa(d,18)^d>>>3,b=Xa(y,17)^Xa(y,19)^y>>>10;Ju[c]=b+Ju[c-7]+w+Ju[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Xa(a,6)^Xa(a,11)^Xa(a,25),y=f+d+_he(a,l,u)+Ehe[c]+Ju[c]|0,b=(Xa(n,2)^Xa(n,13)^Xa(n,22))+xhe(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Ju.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},She=class extends jU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const F3=Hh(()=>new jU);Hh(()=>new She);const P0=BigInt(2**32-1),YT=BigInt(32);function zU(e,r=!1){return r?{h:Number(e&P0),l:Number(e>>YT&P0)}:{h:Number(e>>YT&P0)|0,l:Number(e&P0)|0}}function khe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=zU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const The=(e,r)=>BigInt(e>>>0)<<YT|BigInt(r>>>0),Ihe=(e,r,t)=>e>>>t,Ahe=(e,r,t)=>e<<32-t|r>>>t,Ohe=(e,r,t)=>e>>>t|r<<32-t,Che=(e,r,t)=>e<<32-t|r>>>t,Phe=(e,r,t)=>e<<64-t|r>>>t-32,Nhe=(e,r,t)=>e>>>t-32|r<<64-t,Rhe=(e,r)=>r,Dhe=(e,r)=>e,Bhe=(e,r,t)=>e<<t|r>>>32-t,Mhe=(e,r,t)=>r<<t|e>>>32-t,Lhe=(e,r,t)=>r<<t-32|e>>>64-t,Fhe=(e,r,t)=>e<<t-32|r>>>64-t;function jhe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const zhe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Hhe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Uhe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Whe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,qhe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Khe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,sr={fromBig:zU,split:khe,toBig:The,shrSH:Ihe,shrSL:Ahe,rotrSH:Ohe,rotrSL:Che,rotrBH:Phe,rotrBL:Nhe,rotr32H:Rhe,rotr32L:Dhe,rotlSH:Bhe,rotlSL:Mhe,rotlBH:Lhe,rotlBL:Fhe,add:jhe,add3L:zhe,add3H:Hhe,add4L:Uhe,add4H:Whe,add5H:Khe,add5L:qhe},[Vhe,Ghe]=sr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Qu=new Uint32Array(80),ec=new Uint32Array(80);let b_=class extends B3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Qu[x]=r.getUint32(t),ec[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Qu[x-15]|0,O=ec[x-15]|0,C=sr.rotrSH(I,O,1)^sr.rotrSH(I,O,8)^sr.shrSH(I,O,7),g=sr.rotrSL(I,O,1)^sr.rotrSL(I,O,8)^sr.shrSL(I,O,7),M=Qu[x-2]|0,B=ec[x-2]|0,z=sr.rotrSH(M,B,19)^sr.rotrBH(M,B,61)^sr.shrSH(M,B,6),V=sr.rotrSL(M,B,19)^sr.rotrBL(M,B,61)^sr.shrSL(M,B,6),ne=sr.add4L(g,V,ec[x-7],ec[x-16]),re=sr.add4H(ne,C,z,Qu[x-7],Qu[x-16]);Qu[x]=re|0,ec[x]=ne|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=sr.rotrSH(c,d,14)^sr.rotrSH(c,d,18)^sr.rotrBH(c,d,41),O=sr.rotrSL(c,d,14)^sr.rotrSL(c,d,18)^sr.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,M=sr.add5L(A,O,g,Ghe[x],ec[x]),B=sr.add5H(M,_,I,C,Vhe[x],Qu[x]),z=M|0,V=sr.rotrSH(n,i,28)^sr.rotrBH(n,i,34)^sr.rotrBH(n,i,39),ne=sr.rotrSL(n,i,28)^sr.rotrBL(n,i,34)^sr.rotrBL(n,i,39),re=n&s^n&a^s&a,J=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=sr.add(u|0,f|0,B|0,z|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const F=sr.add3L(z,ne,J);n=sr.add3H(F,B,V,re),i=F|0}({h:n,l:i}=sr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=sr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=sr.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=sr.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:d}=sr.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=sr.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=sr.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=sr.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A)}roundClean(){Qu.fill(0),ec.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Yhe=class extends b_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Zhe=class extends b_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Xhe=class extends b_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const mB=Hh(()=>new b_);Hh(()=>new Yhe);Hh(()=>new Zhe);Hh(()=>new Xhe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HU=BigInt(0),w_=BigInt(1),Jhe=BigInt(2),$_=e=>e instanceof Uint8Array,Qhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function jp(e){if(!$_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Qhe[e[t]];return r}function UU(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function j3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function zp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function oh(e){return j3(jp(e))}function z3(e){if(!$_(e))throw new Error("Uint8Array expected");return j3(jp(Uint8Array.from(e).reverse()))}function $p(e,r){return zp(e.toString(16).padStart(r*2,"0"))}function WU(e,r){return $p(e,r).reverse()}function ede(e){return zp(UU(e))}function Ro(e,r,t){let n;if(typeof r=="string")try{n=zp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if($_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Ry(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!$_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function tde(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function rde(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function nde(e){let r;for(r=0;e>HU;e>>=w_,r+=1);return r}function ide(e,r){return e>>BigInt(r)&w_}const sde=(e,r,t)=>e|(t?w_:HU)<<BigInt(r),H3=e=>(Jhe<<BigInt(e-1))-w_,vE=e=>new Uint8Array(e),bB=e=>Uint8Array.from(e);function qU(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=vE(e),i=vE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=vE())=>{i=a(bB([0]),c),n=a(),c.length!==0&&(i=a(bB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Ry(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const ode={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Sm(e,r,t={}){const n=(i,s,o)=>{const a=ode[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const ade=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ide,bitLen:nde,bitMask:H3,bitSet:sde,bytesToHex:jp,bytesToNumberBE:oh,bytesToNumberLE:z3,concatBytes:Ry,createHmacDrbg:qU,ensureBytes:Ro,equalBytes:tde,hexToBytes:zp,hexToNumber:j3,numberToBytesBE:$p,numberToBytesLE:WU,numberToHexUnpadded:UU,numberToVarBytesBE:ede,utf8ToBytes:rde,validateObject:Sm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pi=BigInt(0),Pn=BigInt(1),Ff=BigInt(2),lde=BigInt(3),ZT=BigInt(4),wB=BigInt(5),$B=BigInt(8);BigInt(9);BigInt(16);function ns(e,r){const t=e%r;return t>=pi?t:r+t}function ude(e,r,t){if(t<=pi||r<pi)throw new Error("Expected power/modulo > 0");if(t===Pn)return pi;let n=Pn;for(;r>pi;)r&Pn&&(n=n*e%t),e=e*e%t,r>>=Pn;return n}function Io(e,r,t){let n=e;for(;r-- >pi;)n*=n,n%=t;return n}function XT(e,r){if(e===pi||r<=pi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ns(e,r),n=r,i=pi,s=Pn;for(;t!==pi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Pn)throw new Error("invert: does not exist");return ns(i,r)}function cde(e){const r=(e-Pn)/Ff;let t,n,i;for(t=e-Pn,n=0;t%Ff===pi;t/=Ff,n++);for(i=Ff;i<e&&ude(i,r,e)!==e-Pn;i++);if(n===1){const o=(e+Pn)/ZT;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Pn)/Ff;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Pn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),d=a.mul(d,f),u=y}return c}}function fde(e){if(e%ZT===lde){const r=(e+Pn)/ZT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%$B===wB){const r=(e-wB)/$B;return function(n,i){const s=n.mul(i,Ff),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Ff),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return cde(e)}const hde=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dde(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=hde.reduce((n,i)=>(n[i]="function",n),r);return Sm(e,t)}function pde(e,r,t){if(t<pi)throw new Error("Expected power > 0");if(t===pi)return e.ONE;if(t===Pn)return r;let n=e.ONE,i=r;for(;t>pi;)t&Pn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Pn;return n}function vde(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function U3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function gde(e,r,t=!1,n={}){if(e<=pi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=U3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=fde(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:H3(i),ZERO:pi,ONE:Pn,create:l=>ns(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return pi<=l&&l<e},is0:l=>l===pi,isOdd:l=>(l&Pn)===Pn,neg:l=>ns(-l,e),eql:(l,u)=>l===u,sqr:l=>ns(l*l,e),add:(l,u)=>ns(l+u,e),sub:(l,u)=>ns(l-u,e),mul:(l,u)=>ns(l*u,e),pow:(l,u)=>pde(a,l,u),div:(l,u)=>ns(l*XT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>XT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>vde(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?WU(l,s):$p(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?z3(l):oh(l)}});return Object.freeze(a)}function yde(e,r,t=!1){e=Ro("privateHash",e);const n=e.length,i=U3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?z3(e):oh(e);return ns(s,r-Pn)+Pn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mde=BigInt(0),gE=BigInt(1);function bde(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>mde;)s&gE&&(o=o.add(a)),a=a.double(),s>>=gE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let d=1;d<a;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=gE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function KU(e){return dde(e.Fp),Sm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...U3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wde(e){const r=KU(e);Sm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:$de,hexToBytes:_de}=ade,Zf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Zf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:$de(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Zf,t=typeof e=="string"?_de(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Zf._parseInt(t.subarray(2)),{d:o,l:a}=Zf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Yl=BigInt(0),Do=BigInt(1);BigInt(2);const _B=BigInt(3);BigInt(4);function xde(e){const r=wde(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Ry(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Yl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=jp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:oh(Ro("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=ns(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ro("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,_B),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),z=t.mul(I,I),V=t.mul(A,x);return V=t.add(V,V),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,z),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(V,O),g=t.mul(_,g),z=t.mul(b,z),V=t.sub(M,z),V=t.mul(b,V),V=t.add(V,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,z),M=t.mul(M,V),C=t.add(C,M),z=t.mul(x,I),z=t.add(z,z),M=t.mul(z,V),O=t.sub(O,M),g=t.mul(z,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,z=t.mul(r.b,_B);let V=t.mul(T,x),ne=t.mul(_,I),re=t.mul(A,O),J=t.add(T,_),F=t.add(x,I);J=t.mul(J,F),F=t.add(V,ne),J=t.sub(J,F),F=t.add(T,A);let Z=t.add(x,O);return F=t.mul(F,Z),Z=t.add(V,re),F=t.sub(F,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(ne,re),Z=t.sub(Z,C),M=t.mul(B,F),C=t.mul(z,re),M=t.add(C,M),C=t.sub(ne,M),M=t.add(ne,M),g=t.mul(C,M),ne=t.add(V,V),ne=t.add(ne,V),re=t.mul(B,re),F=t.mul(z,F),ne=t.add(ne,re),re=t.sub(V,re),re=t.mul(B,re),F=t.add(F,re),V=t.mul(ne,F),g=t.add(g,V),V=t.mul(Z,F),C=t.mul(J,C),C=t.sub(C,V),V=t.mul(J,ne),M=t.mul(Z,M),M=t.add(M,V),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Yl)return T;if(a(b),b===Do)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>Yl||O>Yl;)x&Do&&(C=C.add(M)),O&Do&&(g=g.add(M)),M=M.double(),x>>=Do,O>>=Do;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:z,f:V}=this.wNAF(g);M=y.constTimeNegate(I,M),z=y.constTimeNegate(C,z),z=new c(t.mul(z.px,x.beta),z.py,z.pz),_=M.add(z),A=B.add(V)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Yl||C===Do||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Do)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Do?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return jp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=bde(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Ede(e){const r=KU(e);return Sm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Sde(e){const r=Ede(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(F){return Yl<F&&F<t.ORDER}function a(F){return ns(F,n)}function l(F){return XT(F,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=xde({...r,toBytes(F,Z,ie){const _e=Z.toAffine(),we=t.toBytes(_e.x),Ce=Ry;return ie?Ce(Uint8Array.from([Z.hasEvenY()?2:3]),we):Ce(Uint8Array.from([4]),we,t.toBytes(_e.y))},fromBytes(F){const Z=F.length,ie=F[0],_e=F.subarray(1);if(Z===i&&(ie===2||ie===3)){const we=oh(_e);if(!o(we))throw new Error("Point is not on curve");const Ce=c(we);let He=t.sqrt(Ce);const Ge=(He&Do)===Do;return(ie&1)===1!==Ge&&(He=t.neg(He)),{x:we,y:He}}else if(Z===s&&ie===4){const we=t.fromBytes(_e.subarray(0,t.BYTES)),Ce=t.fromBytes(_e.subarray(t.BYTES,2*t.BYTES));return{x:we,y:Ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=F=>jp($p(F,r.nByteLength));function w(F){const Z=n>>Do;return F>Z}function b(F){return w(F)?a(-F):F}const T=(F,Z,ie)=>oh(F.slice(Z,ie));class _{constructor(Z,ie,_e){this.r=Z,this.s=ie,this.recovery=_e,this.assertValidity()}static fromCompact(Z){const ie=r.nByteLength;return Z=Ro("compactSignature",Z,ie*2),new _(T(Z,0,ie),T(Z,ie,2*ie))}static fromDER(Z){const{r:ie,s:_e}=Zf.toSig(Ro("DER",Z));return new _(ie,_e)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:ie,s:_e,recovery:we}=this,Ce=g(Ro("msgHash",Z));if(we==null||![0,1,2,3].includes(we))throw new Error("recovery id invalid");const He=we===2||we===3?ie+r.n:ie;if(He>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=we&1?"03":"02",it=u.fromHex(Ge+y(He)),xe=l(He),ge=a(-Ce*xe),Te=a(_e*xe),je=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return zp(this.toDERHex())}toDERHex(){return Zf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(F){try{return f(F),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const F=r.randomBytes(t.BYTES+8),Z=yde(F,n);return $p(Z,r.nByteLength)},precompute(F=8,Z=u.BASE){return Z._setWindowSize(F),Z.multiply(BigInt(3)),Z}};function x(F,Z=!0){return u.fromPrivateKey(F).toRawBytes(Z)}function I(F){const Z=F instanceof Uint8Array,ie=typeof F=="string",_e=(Z||ie)&&F.length;return Z?_e===i||_e===s:ie?_e===2*i||_e===2*s:F instanceof u}function O(F,Z,ie=!0){if(I(F))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(f(F)).toRawBytes(ie)}const C=r.bits2int||function(F){const Z=oh(F),ie=F.length*8-r.nBitLength;return ie>0?Z>>BigInt(ie):Z},g=r.bits2int_modN||function(F){return a(C(F))},M=H3(r.nBitLength);function B(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(Yl<=F&&F<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return $p(F,r.nByteLength)}function z(F,Z,ie=V){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:_e,randomBytes:we}=r;let{lowS:Ce,prehash:He,extraEntropy:Ge}=ie;Ce==null&&(Ce=!0),F=Ro("msgHash",F),He&&(F=Ro("prehashed msgHash",_e(F)));const it=g(F),xe=f(Z),ge=[B(xe),B(it)];if(Ge!=null){const S=Ge===!0?we(t.BYTES):Ge;ge.push(Ro("extraEntropy",S,t.BYTES))}const Te=Ry(...ge),je=it;function $(S){const N=C(S);if(!d(N))return;const L=l(N),j=u.BASE.multiply(N).toAffine(),K=a(j.x);if(K===Yl)return;const ae=a(L*a(je+K*xe));if(ae===Yl)return;let ye=(j.x===K?0:2)|Number(j.y&Do),Ue=ae;return Ce&&w(ae)&&(Ue=b(ae),ye^=1),new _(K,Ue,ye)}return{seed:Te,k2sig:$}}const V={lowS:r.lowS,prehash:!1},ne={lowS:r.lowS,prehash:!1};function re(F,Z,ie=V){const{seed:_e,k2sig:we}=z(F,Z,ie),Ce=r;return qU(Ce.hash.outputLen,Ce.nByteLength,Ce.hmac)(_e,we)}u.BASE._setWindowSize(8);function J(F,Z,ie,_e=ne){var j;const we=F;if(Z=Ro("msgHash",Z),ie=Ro("publicKey",ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:He}=_e;let Ge,it;try{if(typeof we=="string"||we instanceof Uint8Array)try{Ge=_.fromDER(we)}catch(K){if(!(K instanceof Zf.Err))throw K;Ge=_.fromCompact(we)}else if(typeof we=="object"&&typeof we.r=="bigint"&&typeof we.s=="bigint"){const{r:K,s:ae}=we;Ge=new _(K,ae)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(K){if(K.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&Ge.hasHighS())return!1;He&&(Z=r.hash(Z));const{r:xe,s:ge}=Ge,Te=g(Z),je=l(ge),$=a(Te*je),S=a(xe*je),N=(j=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:j.toAffine();return N?a(N.x)===xe:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:J,ProjectivePoint:u,Signature:_,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kde(e){return{hash:e,hmac:(r,...t)=>zw(e,r,Vg(...t)),randomBytes:hhe}}function Tde(e,r){const t=n=>Sde({...e,...kde(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const VU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ide=BigInt(1),JT=BigInt(2),EB=(e,r)=>(e+r/JT)/r;function Ade(e){const r=VU,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=Io(f,t,r)*f%r,d=Io(c,t,r)*f%r,y=Io(d,JT,r)*u%r,w=Io(y,i,r)*y%r,b=Io(w,s,r)*w%r,T=Io(b,a,r)*b%r,_=Io(T,l,r)*T%r,A=Io(_,a,r)*b%r,x=Io(A,t,r)*f%r,I=Io(x,o,r)*w%r,O=Io(I,n,r)*u%r,C=Io(O,JT,r);if(!QT.eql(QT.sqr(C),e))throw new Error("Cannot find square root");return C}const QT=gde(VU,void 0,void 0,{sqrt:Ade}),nl=Tde({a:BigInt(0),b:BigInt(7),Fp:QT,n:xB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=xB,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ide*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=EB(s*e,r),l=EB(-n*e,r);let u=ns(e-a*t-l*i,r),f=ns(-a*n-l*s,r);const c=u>o,d=f>o;if(c&&(u=r-u),d&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:f}}}},F3);BigInt(0);nl.ProjectivePoint;const N0=nl.ProjectivePoint,yE=N3(F3);function SB(e){return BigInt(`0x${che(e)}`)}function Ode(e){return fhe(e.toString(16).padStart(64,"0"))}const Cde=DU("Bitcoin seed"),mE={private:76066276,public:76067358},bE=2147483648,Pde=e=>$he(F3(e)),Nde=e=>wp(e).getUint32(0,!1),R0=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return wp(r).setUint32(0,e,!1),r};let Rde=class Zd{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Nde(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return yE.encode(this.serialize(this.versions.private,Vg(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return yE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=mE){if(Lf(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=zw(mB,Cde,r);return new Zd({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=mE){const n=yE.decode(r),i=wp(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Zd({...o,privateKey:a.slice(1)}):new Zd({...o,publicKey:a})}static fromJSON(r){return Zd.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||mE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!nl.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:SB(r.privateKey),this.privKeyBytes=Ode(this.privKey),this.pubKey=nl.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=N0.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Pde(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=bE)throw new Error("Invalid index");s[2]==="'"&&(o+=bE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=R0(r);if(r>=bE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Vg(new Uint8Array([0]),a,t)}else t=Vg(this.pubKey,t);const n=zw(mB,this.chainCode,t),i=SB(n.slice(0,32)),s=n.slice(32);if(!nl.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ns(this.privKey+i,nl.CURVE.n);if(!nl.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=N0.fromHex(this.pubKey).add(N0.fromPrivateKey(i));if(a.equals(N0.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Zd(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Lf(r,32),nl.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Lf(r,32),Lf(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=nl.Signature.fromCompact(t)}catch{return!1}return nl.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Lf(t,33),Vg(R0(r),new Uint8Array([this.depth]),R0(this.parentFingerprint),R0(this.index),this.chainCode,t)}};var Dde=Object.defineProperty,Ci=(e,r)=>{for(var t in r)Dde(e,t,{get:r[t],enumerable:!0})};function W3(){return zo(vv.utils.randomPrivateKey())}function kh(e){return zo(vv.getPublicKey(e))}var Bde={};Ci(Bde,{MessageNode:()=>GU,MessageQueue:()=>jde,insertEventIntoAscendingList:()=>Fde,insertEventIntoDescendingList:()=>Lde,normalizeURL:()=>Mde,utf8Decoder:()=>Zl,utf8Encoder:()=>Aa});var Zl=new TextDecoder("utf-8"),Aa=new TextEncoder;function Mde(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Lde(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Fde(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var GU=class{constructor(e){ce(this,"_value");ce(this,"_next");this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},jde=class{constructor(){ce(this,"_first");ce(this,"_last");ce(this,"_size");this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const r=new GU(e);return this._size===0||!this._last?(this._first=r,this._last=r):(this._last.next=r,this._last=r),this._size++,!0}dequeue(){if(this._size===0||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function zde(e=255){return{kind:e,content:"",tags:[],created_at:0}}function YU(e,r){let t=e;return t.pubkey=kh(r),t.id=Th(t),t.sig=q3(t,r),t}function Hde(e){if(!Dy(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Th(e){let r=Mp(Aa.encode(Hde(e)));return zo(r)}var Ude=e=>e instanceof Object;function Dy(e){if(!Ude(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function Hp(e){try{return vv.verify(e.sig,Th(e),e.pubkey)}catch{return!1}}function ZU(e,r){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),q3(e,r)}function q3(e,r){return zo(vv.sign(Th(e),r))}function K3(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>e.until)}var Wde={};Ci(Wde,{getHex64:()=>V3,getInt:()=>XU,getSubscriptionId:()=>qde,matchEventId:()=>Kde,matchEventKind:()=>Gde,matchEventPubkey:()=>Vde});function V3(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function XU(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function qde(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Kde(e,r){return r===V3(e,"id")}function Vde(e,r){return r===V3(e,"pubkey")}function Gde(e,r){return r===XU(e,"kind")}var Mc={};Ci(Mc,{BECH32_REGEX:()=>QU,decode:()=>__,naddrEncode:()=>epe,neventEncode:()=>Qde,noteEncode:()=>Xde,nprofileEncode:()=>Jde,npubEncode:()=>Zde,nrelayEncode:()=>tpe,nsecEncode:()=>Yde});var JU=5e3,QU=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function __(e){var i,s,o,a,l,u,f;let{prefix:r,words:t}=Dn.decode(e,JU),n=new Uint8Array(Dn.fromWords(t));switch(r){case"nprofile":{let c=D0(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:zo(c[0][0]),relays:c[1]?c[1].map(d=>Zl.decode(d)):[]}}}case"nevent":{let c=D0(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:zo(c[0][0]),relays:c[1]?c[1].map(d=>Zl.decode(d)):[],author:(o=c[2])!=null&&o[0]?zo(c[2][0]):void 0}}}case"naddr":{let c=D0(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Zl.decode(c[0][0]),pubkey:zo(c[2][0]),kind:parseInt(zo(c[3][0]),16),relays:c[1]?c[1].map(d=>Zl.decode(d)):[]}}}case"nrelay":{let c=D0(n);if(!((f=c[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Zl.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:zo(n)};default:throw new Error(`unknown prefix ${r}`)}}function D0(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1];if(!i)throw new Error(`malformed TLV ${n}`);let s=t.slice(2,2+i);if(t=t.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${n}`);r[n]=r[n]||[],r[n].push(s)}return r}function Yde(e){return G3("nsec",e)}function Zde(e){return G3("npub",e)}function Xde(e){return G3("note",e)}function km(e,r){let t=Dn.toWords(r);return Dn.encode(e,t,JU)}function G3(e,r){let t=Bp(r);return km(e,t)}function Jde(e){let r=x_({0:[Bp(e.pubkey)],1:(e.relays||[]).map(t=>Aa.encode(t))});return km("nprofile",r)}function Qde(e){let r=x_({0:[Bp(e.id)],1:(e.relays||[]).map(t=>Aa.encode(t)),2:e.author?[Bp(e.author)]:[]});return km("nevent",r)}function epe(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=x_({0:[Aa.encode(e.identifier)],1:(e.relays||[]).map(n=>Aa.encode(n)),2:[Bp(e.pubkey)],3:[new Uint8Array(r)]});return km("naddr",t)}function tpe(e){let r=x_({0:[Aa.encode(e)]});return km("nrelay",r)}function x_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),KH(...r)}var Ih={};Ci(Ih,{decrypt:()=>npe,encrypt:()=>rpe});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function rpe(e,r,t){const n=xm.getSharedSecret(e,"02"+r),i=eW(n);let s=Uint8Array.from(S3(16)),o=Aa.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Go.encode(new Uint8Array(l)),f=Go.encode(new Uint8Array(s.buffer));return`${u}?iv=${f}`}async function npe(e,r,t){let[n,i]=t.split("?iv="),s=xm.getSharedSecret(e,"02"+r),o=eW(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Go.decode(n),u=Go.decode(i),f=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return Zl.decode(f)}function eW(e){return e.slice(1,33)}var ipe={};Ci(ipe,{NIP05_REGEX:()=>tW,queryProfile:()=>ape,searchDomain:()=>ope,useFetchImplementation:()=>spe});var tW=/^(?:([\w.+-]+)@)?([\w.-]+)$/,E_;try{E_=fetch}catch{}function spe(e){E_=e}async function ope(e,r=""){try{return(await(await E_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function ape(e){const r=e.match(tW);if(!r)return null;const[t,n="_",i]=r;try{const s=await E_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=lpe(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function lpe(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var upe={};Ci(upe,{generateSeedWords:()=>fpe,privateKeyFromSeedWords:()=>cpe,validateWords:()=>hpe});function cpe(e,r){let n=Rde.fromMasterSeed(nhe(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return zo(n)}function fpe(){return Xfe(xU)}function hpe(e){return the(e,xU)}var dpe={};Ci(dpe,{parse:()=>ppe});function ppe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},f=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(f){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var vpe={};Ci(vpe,{getPow:()=>gpe});function gpe(e){return ype(Bp(e))}function ype(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=mpe(e[t]),r+=n,n===8);t++);return r}function mpe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var bpe={};Ci(bpe,{finishRepostEvent:()=>wpe,getRepostedEvent:()=>$pe,getRepostedEventPointer:()=>rW});function wpe(e,r,t,n){return YU({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function rW(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function $pe(e,{skipVerification:r}={}){const t=rW(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!Hp(n)))return n}var _pe={};Ci(_pe,{NOSTR_URI_REGEX:()=>S_,parse:()=>Epe,test:()=>xpe});var S_=new RegExp(`nostr:(${QU.source})`);function xpe(e){return typeof e=="string"&&new RegExp(`^${S_.source}$`).test(e)}function Epe(e){const r=e.match(new RegExp(`^${S_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:__(r[1])}}var Spe={};Ci(Spe,{finishReactionEvent:()=>kpe,getReactedEventPointer:()=>Tpe});function kpe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return YU({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function Tpe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var Ipe={};Ci(Ipe,{createDelegation:()=>Ape,getDelegator:()=>Ope});function Ape(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=Mp(Aa.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=zo(vv.sign(i,e));return{from:kh(e),to:r.pubkey,cond:n,sig:s}}function Ope(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,f]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(f))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(f))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(f))continue;return null}}let o=Mp(Aa.encode(`nostr:delegation:${e.pubkey}:${n}`));return vv.verify(i,o,t)?t:null}var Cpe={};Ci(Cpe,{matchAll:()=>Ppe,regex:()=>Y3,replaceAll:()=>Npe});var Y3=()=>new RegExp(`\\b${S_.source}\\b`,"g");function*Ppe(e){const r=e.matchAll(Y3());for(const t of r)try{const[n,i]=t;yield{uri:n,value:i,decoded:__(i),start:t.index,end:t.index+n.length}}catch{}}function Npe(e,r){return e.replaceAll(Y3(),(t,n)=>r({uri:t,value:n,decoded:__(n)}))}var Rpe={};Ci(Rpe,{useFetchImplementation:()=>Dpe,validateGithub:()=>Bpe});var Z3;try{Z3=fetch}catch{}function Dpe(e){Z3=e}async function Bpe(e,r,t){try{return await(await Z3(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var nW={};Ci(nW,{authenticate:()=>Mpe});var Mpe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Lpe={};Ci(Lpe,{getZapEndpoint:()=>jpe,makeZapReceipt:()=>Upe,makeZapRequest:()=>zpe,useFetchImplementation:()=>Fpe,validateZapRequest:()=>Hpe});var X3;try{X3=fetch}catch{}function Fpe(e){X3=e}async function jpe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Dn.decode(t,1e3),a=Dn.fromWords(o);r=Zl.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await X3(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function zpe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Hpe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Dy(r))return"Zap request is not a valid Nostr event.";if(!Hp(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Upe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Wpe={};Ci(Wpe,{getToken:()=>qpe,validateToken:()=>Kpe});var iW="Nostr ";async function qpe(e,r,t,n=!1){if(!e||!r)throw new Error("Missing loginUrl or httpMethod");if(r!=="get"&&r!=="post")throw new Error("Unknown httpMethod");const i=zde(27235);i.tags=[["u",e],["method",r]],i.created_at=Math.round(new Date().getTime()/1e3);const s=await t(i);return(n?iW:"")+Go.encode(Aa.encode(JSON.stringify(s)))}async function Kpe(e,r,t){if(!e)throw new Error("Missing token");e=e.replace(iW,"");const n=Zl.decode(Go.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");const i=JSON.parse(n);if(!i)throw new Error("Invalid nostr event");if(!Hp(i))throw new Error("Invalid nostr event, signature invalid");if(i.kind!==27235)throw new Error("Invalid nostr event, kind invalid");if(!i.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round(new Date().getTime()/1e3)-i.created_at>60)throw new Error("Invalid nostr event, expired");const s=i.tags.find(a=>a[0]==="u");if((s==null?void 0:s.length)!==1&&(s==null?void 0:s[1])!==r)throw new Error("Invalid nostr event, url tag invalid");const o=i.tags.find(a=>a[0]==="method");if((o==null?void 0:o.length)!==1&&(o==null?void 0:o[1].toLowerCase())!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var Vpe=function(e){return e instanceof RegExp},Gpe=function(r){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return r&&n.test(r)?r.replace(t,"\\$&"):r},sW=function(e){return typeof e=="string"},Ype=function(e){var r=[];return e.forEach(function(t){Array.isArray(t)?r=r.concat(t):r.push(t)}),r};function Zpe(e,r,t){var n=0,i=0;if(e==="")return e;if(!e||!sW(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=r;Vpe(s)||(s=new RegExp("("+Gpe(s)+")","gi"));for(var o=e.split(s),a=1,l=o.length;a<l;a+=2){if(o[a]===void 0||o[a-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=o[a].length,n+=o[a-1].length,o[a]=t(o[a],a,n),n+=i}return o}var Xpe=function(r,t,n){return Array.isArray(r)||(r=[r]),Ype(r.map(function(i){return sW(i)?Zpe(i,t,n):i}))};const zr=io(Xpe);var By={};Object.defineProperty(By,"__esModule",{value:!0});By.bech32m=eI=By.bech32=void 0;const Hw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",oW={};for(let e=0;e<Hw.length;e++){const r=Hw.charAt(e);oW[r]=e}function _p(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function kB(e){let r=1;for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=_p(r)^n>>5}r=_p(r);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r=_p(r)^n&31}return r}function J3(e,r,t,n){let i=0,s=0;const o=(1<<t)-1,a=[];for(let l=0;l<e.length;++l)for(i=i<<r|e[l],s+=r;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=r)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function Jpe(e){return J3(e,8,5,!0)}function Qpe(e){const r=J3(e,5,8,!1);if(Array.isArray(r))return r}function eve(e){const r=J3(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function aW(e){let r;e==="bech32"?r=1:r=734539939;function t(o,a,l){if(l=l||90,o.length+7+a.length>l)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let u=kB(o);if(typeof u=="string")throw new Error(u);let f=o+"1";for(let c=0;c<a.length;++c){const d=a[c];if(d>>5)throw new Error("Non 5-bit word");u=_p(u)^d,f+=Hw.charAt(d)}for(let c=0;c<6;++c)u=_p(u);u^=r;for(let c=0;c<6;++c){const d=u>>(5-c)*5&31;f+=Hw.charAt(d)}return f}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const l=o.toLowerCase(),u=o.toUpperCase();if(o!==l&&o!==u)return"Mixed-case string "+o;o=l;const f=o.lastIndexOf("1");if(f===-1)return"No separator character for "+o;if(f===0)return"Missing prefix for "+o;const c=o.slice(0,f),d=o.slice(f+1);if(d.length<6)return"Data too short";let y=kB(c);if(typeof y=="string")return y;const w=[];for(let b=0;b<d.length;++b){const T=d.charAt(b),_=oW[T];if(_===void 0)return"Unknown character "+T;y=_p(y)^_,!(b+6>=d.length)&&w.push(_)}return y!==r?"Invalid checksum for "+o:{prefix:c,words:w}}function i(o,a){const l=n(o,a);if(typeof l=="object")return l}function s(o,a){const l=n(o,a);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:i,decode:s,encode:t,toWords:Jpe,fromWordsUnsafe:Qpe,fromWords:eve}}var eI=By.bech32=aW("bech32");By.bech32m=aW("bech32m");var lW={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(r,t){e.exports=r.document?t(r,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:On,function(r,t){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(m){return n.flat.call(m)}:function(m){return n.concat.apply([],m)},a=n.push,l=n.indexOf,u={},f=u.toString,c=u.hasOwnProperty,d=c.toString,y=d.call(Object),w={},b=function(k){return typeof k=="function"&&typeof k.nodeType!="number"&&typeof k.item!="function"},T=function(k){return k!=null&&k===k.window},_=r.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function x(m,k,P){P=P||_;var D,H,U=P.createElement("script");if(U.text=m,k)for(D in A)H=k[D]||k.getAttribute&&k.getAttribute(D),H&&U.setAttribute(D,H);P.head.appendChild(U).parentNode.removeChild(U)}function I(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?u[f.call(m)]||"object":typeof m}var O="3.7.0",C=/HTML$/i,g=function(m,k){return new g.fn.init(m,k)};g.fn=g.prototype={jquery:O,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(m){return m==null?s.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var k=g.merge(this.constructor(),m);return k.prevObject=this,k},each:function(m){return g.each(this,m)},map:function(m){return this.pushStack(g.map(this,function(k,P){return m.call(k,P,k)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(m,k){return(k+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(m,k){return k%2}))},eq:function(m){var k=this.length,P=+m+(m<0?k:0);return this.pushStack(P>=0&&P<k?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var m,k,P,D,H,U,q=arguments[0]||{},ue=1,se=arguments.length,Ee=!1;for(typeof q=="boolean"&&(Ee=q,q=arguments[ue]||{},ue++),typeof q!="object"&&!b(q)&&(q={}),ue===se&&(q=this,ue--);ue<se;ue++)if((m=arguments[ue])!=null)for(k in m)D=m[k],!(k==="__proto__"||q===D)&&(Ee&&D&&(g.isPlainObject(D)||(H=Array.isArray(D)))?(P=q[k],H&&!Array.isArray(P)?U=[]:!H&&!g.isPlainObject(P)?U={}:U=P,H=!1,q[k]=g.extend(Ee,U,D)):D!==void 0&&(q[k]=D));return q},g.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var k,P;return!m||f.call(m)!=="[object Object]"?!1:(k=i(m),k?(P=c.call(k,"constructor")&&k.constructor,typeof P=="function"&&d.call(P)===y):!0)},isEmptyObject:function(m){var k;for(k in m)return!1;return!0},globalEval:function(m,k,P){x(m,{nonce:k&&k.nonce},P)},each:function(m,k){var P,D=0;if(M(m))for(P=m.length;D<P&&k.call(m[D],D,m[D])!==!1;D++);else for(D in m)if(k.call(m[D],D,m[D])===!1)break;return m},text:function(m){var k,P="",D=0,H=m.nodeType;if(H){if(H===1||H===9||H===11)return m.textContent;if(H===3||H===4)return m.nodeValue}else for(;k=m[D++];)P+=g.text(k);return P},makeArray:function(m,k){var P=k||[];return m!=null&&(M(Object(m))?g.merge(P,typeof m=="string"?[m]:m):a.call(P,m)),P},inArray:function(m,k,P){return k==null?-1:l.call(k,m,P)},isXMLDoc:function(m){var k=m&&m.namespaceURI,P=m&&(m.ownerDocument||m).documentElement;return!C.test(k||P&&P.nodeName||"HTML")},merge:function(m,k){for(var P=+k.length,D=0,H=m.length;D<P;D++)m[H++]=k[D];return m.length=H,m},grep:function(m,k,P){for(var D,H=[],U=0,q=m.length,ue=!P;U<q;U++)D=!k(m[U],U),D!==ue&&H.push(m[U]);return H},map:function(m,k,P){var D,H,U=0,q=[];if(M(m))for(D=m.length;U<D;U++)H=k(m[U],U,P),H!=null&&q.push(H);else for(U in m)H=k(m[U],U,P),H!=null&&q.push(H);return o(q)},guid:1,support:w}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,k){u["[object "+k+"]"]=k.toLowerCase()});function M(m){var k=!!m&&"length"in m&&m.length,P=I(m);return b(m)||T(m)?!1:P==="array"||k===0||typeof k=="number"&&k>0&&k-1 in m}function B(m,k){return m.nodeName&&m.nodeName.toLowerCase()===k.toLowerCase()}var z=n.pop,V=n.sort,ne=n.splice,re="[\\x20\\t\\r\\n\\f]",J=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g");g.contains=function(m,k){var P=k&&k.parentNode;return m===P||!!(P&&P.nodeType===1&&(m.contains?m.contains(P):m.compareDocumentPosition&&m.compareDocumentPosition(P)&16))};var F=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Z(m,k){return k?m==="\0"?"":m.slice(0,-1)+"\\"+m.charCodeAt(m.length-1).toString(16)+" ":"\\"+m}g.escapeSelector=function(m){return(m+"").replace(F,Z)};var ie=_,_e=a;(function(){var m,k,P,D,H,U=_e,q,ue,se,Ee,Pe,De=g.expando,Ae=0,Xe=0,bt=mf(),Yt=mf(),Gt=mf(),Yn=mf(),fn=function(te,me){return te===me&&(H=!0),0},mo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",bo="(?:\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",pr="\\["+re+"*("+bo+")(?:"+re+"*([*^$|!~]?=)"+re+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+bo+"))|)"+re+"*\\]",Ha=":("+bo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+pr+")*)|.*)\\)|)",vr=new RegExp(re+"+","g"),Mr=new RegExp("^"+re+"*,"+re+"*"),vf=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),$d=new RegExp(re+"|>"),Ls=new RegExp(Ha),Il=new RegExp("^"+bo+"$"),gs={ID:new RegExp("^#("+bo+")"),CLASS:new RegExp("^\\.("+bo+")"),TAG:new RegExp("^("+bo+"|[*])"),ATTR:new RegExp("^"+pr),PSEUDO:new RegExp("^"+Ha),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+mo+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},na=/^(?:input|select|textarea|button)$/i,Ua=/^h\d$/i,Bi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gf=/[+~]/,ia=new RegExp("\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\([^\\r\\n\\f])","g"),wo=function(te,me){var Ie="0x"+te.slice(1)-65536;return me||(Ie<0?String.fromCharCode(Ie+65536):String.fromCharCode(Ie>>10|55296,Ie&1023|56320))},Gi=function(){Wa()},dg=Al(function(te){return te.disabled===!0&&B(te,"fieldset")},{dir:"parentNode",next:"legend"});function yf(){try{return q.activeElement}catch{}}try{U.apply(n=s.call(ie.childNodes),ie.childNodes),n[ie.childNodes.length].nodeType}catch{U={apply:function(me,Ie){_e.apply(me,s.call(Ie))},call:function(me){_e.apply(me,s.call(arguments,1))}}}function Ar(te,me,Ie,Oe){var Q,pe,fe,Be,We,$t,_t,yt=me&&me.ownerDocument,er=me?me.nodeType:9;if(Ie=Ie||[],typeof te!="string"||!te||er!==1&&er!==9&&er!==11)return Ie;if(!Oe&&(Wa(me),me=me||q,se)){if(er!==11&&(We=Bi.exec(te)))if(Q=We[1]){if(er===9)if(fe=me.getElementById(Q)){if(fe.id===Q)return U.call(Ie,fe),Ie}else return Ie;else if(yt&&(fe=yt.getElementById(Q))&&Ar.contains(me,fe)&&fe.id===Q)return U.call(Ie,fe),Ie}else{if(We[2])return U.apply(Ie,me.getElementsByTagName(te)),Ie;if((Q=We[3])&&me.getElementsByClassName)return U.apply(Ie,me.getElementsByClassName(Q)),Ie}if(!Yn[te+" "]&&(!Ee||!Ee.test(te))){if(_t=te,yt=me,er===1&&($d.test(te)||vf.test(te))){for(yt=gf.test(te)&&pg(me.parentNode)||me,(yt!=me||!w.scope)&&((Be=me.getAttribute("id"))?Be=g.escapeSelector(Be):me.setAttribute("id",Be=De)),$t=bf(te),pe=$t.length;pe--;)$t[pe]=(Be?"#"+Be:":scope")+" "+js($t[pe]);_t=$t.join(",")}try{return U.apply(Ie,yt.querySelectorAll(_t)),Ie}catch{Yn(te,!0)}finally{Be===De&&me.removeAttribute("id")}}}return Yb(te.replace(J,"$1"),me,Ie,Oe)}function mf(){var te=[];function me(Ie,Oe){return te.push(Ie+" ")>k.cacheLength&&delete me[te.shift()],me[Ie+" "]=Oe}return me}function Fs(te){return te[De]=!0,te}function Lu(te){var me=q.createElement("fieldset");try{return!!te(me)}catch{return!1}finally{me.parentNode&&me.parentNode.removeChild(me),me=null}}function a2(te){return function(me){return B(me,"input")&&me.type===te}}function l2(te){return function(me){return(B(me,"input")||B(me,"button"))&&me.type===te}}function Vb(te){return function(me){return"form"in me?me.parentNode&&me.disabled===!1?"label"in me?"label"in me.parentNode?me.parentNode.disabled===te:me.disabled===te:me.isDisabled===te||me.isDisabled!==!te&&dg(me)===te:me.disabled===te:"label"in me?me.disabled===te:!1}}function ys(te){return Fs(function(me){return me=+me,Fs(function(Ie,Oe){for(var Q,pe=te([],Ie.length,me),fe=pe.length;fe--;)Ie[Q=pe[fe]]&&(Ie[Q]=!(Oe[Q]=Ie[Q]))})})}function pg(te){return te&&typeof te.getElementsByTagName<"u"&&te}function Wa(te){var me,Ie=te?te.ownerDocument||te:ie;return Ie==q||Ie.nodeType!==9||!Ie.documentElement||(q=Ie,ue=q.documentElement,se=!g.isXMLDoc(q),Pe=ue.matches||ue.webkitMatchesSelector||ue.msMatchesSelector,ie!=q&&(me=q.defaultView)&&me.top!==me&&me.addEventListener("unload",Gi),w.getById=Lu(function(Oe){return ue.appendChild(Oe).id=g.expando,!q.getElementsByName||!q.getElementsByName(g.expando).length}),w.disconnectedMatch=Lu(function(Oe){return Pe.call(Oe,"*")}),w.scope=Lu(function(){return q.querySelectorAll(":scope")}),w.cssHas=Lu(function(){try{return q.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(k.filter.ID=function(Oe){var Q=Oe.replace(ia,wo);return function(pe){return pe.getAttribute("id")===Q}},k.find.ID=function(Oe,Q){if(typeof Q.getElementById<"u"&&se){var pe=Q.getElementById(Oe);return pe?[pe]:[]}}):(k.filter.ID=function(Oe){var Q=Oe.replace(ia,wo);return function(pe){var fe=typeof pe.getAttributeNode<"u"&&pe.getAttributeNode("id");return fe&&fe.value===Q}},k.find.ID=function(Oe,Q){if(typeof Q.getElementById<"u"&&se){var pe,fe,Be,We=Q.getElementById(Oe);if(We){if(pe=We.getAttributeNode("id"),pe&&pe.value===Oe)return[We];for(Be=Q.getElementsByName(Oe),fe=0;We=Be[fe++];)if(pe=We.getAttributeNode("id"),pe&&pe.value===Oe)return[We]}return[]}}),k.find.TAG=function(Oe,Q){return typeof Q.getElementsByTagName<"u"?Q.getElementsByTagName(Oe):Q.querySelectorAll(Oe)},k.find.CLASS=function(Oe,Q){if(typeof Q.getElementsByClassName<"u"&&se)return Q.getElementsByClassName(Oe)},Ee=[],Lu(function(Oe){var Q;ue.appendChild(Oe).innerHTML="<a id='"+De+"' href='' disabled='disabled'></a><select id='"+De+"-\r\\' disabled='disabled'><option selected=''></option></select>",Oe.querySelectorAll("[selected]").length||Ee.push("\\["+re+"*(?:value|"+mo+")"),Oe.querySelectorAll("[id~="+De+"-]").length||Ee.push("~="),Oe.querySelectorAll("a#"+De+"+*").length||Ee.push(".#.+[+~]"),Oe.querySelectorAll(":checked").length||Ee.push(":checked"),Q=q.createElement("input"),Q.setAttribute("type","hidden"),Oe.appendChild(Q).setAttribute("name","D"),ue.appendChild(Oe).disabled=!0,Oe.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),Q=q.createElement("input"),Q.setAttribute("name",""),Oe.appendChild(Q),Oe.querySelectorAll("[name='']").length||Ee.push("\\["+re+"*name"+re+"*="+re+`*(?:''|"")`)}),w.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),fn=function(Oe,Q){if(Oe===Q)return H=!0,0;var pe=!Oe.compareDocumentPosition-!Q.compareDocumentPosition;return pe||(pe=(Oe.ownerDocument||Oe)==(Q.ownerDocument||Q)?Oe.compareDocumentPosition(Q):1,pe&1||!w.sortDetached&&Q.compareDocumentPosition(Oe)===pe?Oe===q||Oe.ownerDocument==ie&&Ar.contains(ie,Oe)?-1:Q===q||Q.ownerDocument==ie&&Ar.contains(ie,Q)?1:D?l.call(D,Oe)-l.call(D,Q):0:pe&4?-1:1)}),q}Ar.matches=function(te,me){return Ar(te,null,null,me)},Ar.matchesSelector=function(te,me){if(Wa(te),se&&!Yn[me+" "]&&(!Ee||!Ee.test(me)))try{var Ie=Pe.call(te,me);if(Ie||w.disconnectedMatch||te.document&&te.document.nodeType!==11)return Ie}catch{Yn(me,!0)}return Ar(me,q,null,[te]).length>0},Ar.contains=function(te,me){return(te.ownerDocument||te)!=q&&Wa(te),g.contains(te,me)},Ar.attr=function(te,me){(te.ownerDocument||te)!=q&&Wa(te);var Ie=k.attrHandle[me.toLowerCase()],Oe=Ie&&c.call(k.attrHandle,me.toLowerCase())?Ie(te,me,!se):void 0;return Oe!==void 0?Oe:te.getAttribute(me)},Ar.error=function(te){throw new Error("Syntax error, unrecognized expression: "+te)},g.uniqueSort=function(te){var me,Ie=[],Oe=0,Q=0;if(H=!w.sortStable,D=!w.sortStable&&s.call(te,0),V.call(te,fn),H){for(;me=te[Q++];)me===te[Q]&&(Oe=Ie.push(Q));for(;Oe--;)ne.call(te,Ie[Oe],1)}return D=null,te},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(s.apply(this)))},k=g.expr={cacheLength:50,createPseudo:Fs,match:gs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(te){return te[1]=te[1].replace(ia,wo),te[3]=(te[3]||te[4]||te[5]||"").replace(ia,wo),te[2]==="~="&&(te[3]=" "+te[3]+" "),te.slice(0,4)},CHILD:function(te){return te[1]=te[1].toLowerCase(),te[1].slice(0,3)==="nth"?(te[3]||Ar.error(te[0]),te[4]=+(te[4]?te[5]+(te[6]||1):2*(te[3]==="even"||te[3]==="odd")),te[5]=+(te[7]+te[8]||te[3]==="odd")):te[3]&&Ar.error(te[0]),te},PSEUDO:function(te){var me,Ie=!te[6]&&te[2];return gs.CHILD.test(te[0])?null:(te[3]?te[2]=te[4]||te[5]||"":Ie&&Ls.test(Ie)&&(me=bf(Ie,!0))&&(me=Ie.indexOf(")",Ie.length-me)-Ie.length)&&(te[0]=te[0].slice(0,me),te[2]=Ie.slice(0,me)),te.slice(0,3))}},filter:{TAG:function(te){var me=te.replace(ia,wo).toLowerCase();return te==="*"?function(){return!0}:function(Ie){return B(Ie,me)}},CLASS:function(te){var me=bt[te+" "];return me||(me=new RegExp("(^|"+re+")"+te+"("+re+"|$)"))&&bt(te,function(Ie){return me.test(typeof Ie.className=="string"&&Ie.className||typeof Ie.getAttribute<"u"&&Ie.getAttribute("class")||"")})},ATTR:function(te,me,Ie){return function(Oe){var Q=Ar.attr(Oe,te);return Q==null?me==="!=":me?(Q+="",me==="="?Q===Ie:me==="!="?Q!==Ie:me==="^="?Ie&&Q.indexOf(Ie)===0:me==="*="?Ie&&Q.indexOf(Ie)>-1:me==="$="?Ie&&Q.slice(-Ie.length)===Ie:me==="~="?(" "+Q.replace(vr," ")+" ").indexOf(Ie)>-1:me==="|="?Q===Ie||Q.slice(0,Ie.length+1)===Ie+"-":!1):!0}},CHILD:function(te,me,Ie,Oe,Q){var pe=te.slice(0,3)!=="nth",fe=te.slice(-4)!=="last",Be=me==="of-type";return Oe===1&&Q===0?function(We){return!!We.parentNode}:function(We,$t,_t){var yt,er,Dt,ur,Zn,oi=pe!==fe?"nextSibling":"previousSibling",Xn=We.parentNode,Zi=Be&&We.nodeName.toLowerCase(),sa=!_t&&!Be,qt=!1;if(Xn){if(pe){for(;oi;){for(Dt=We;Dt=Dt[oi];)if(Be?B(Dt,Zi):Dt.nodeType===1)return!1;Zn=oi=te==="only"&&!Zn&&"nextSibling"}return!0}if(Zn=[fe?Xn.firstChild:Xn.lastChild],fe&&sa){for(er=Xn[De]||(Xn[De]={}),yt=er[te]||[],ur=yt[0]===Ae&&yt[1],qt=ur&&yt[2],Dt=ur&&Xn.childNodes[ur];Dt=++ur&&Dt&&Dt[oi]||(qt=ur=0)||Zn.pop();)if(Dt.nodeType===1&&++qt&&Dt===We){er[te]=[Ae,ur,qt];break}}else if(sa&&(er=We[De]||(We[De]={}),yt=er[te]||[],ur=yt[0]===Ae&&yt[1],qt=ur),qt===!1)for(;(Dt=++ur&&Dt&&Dt[oi]||(qt=ur=0)||Zn.pop())&&!((Be?B(Dt,Zi):Dt.nodeType===1)&&++qt&&(sa&&(er=Dt[De]||(Dt[De]={}),er[te]=[Ae,qt]),Dt===We)););return qt-=Q,qt===Oe||qt%Oe===0&&qt/Oe>=0}}},PSEUDO:function(te,me){var Ie,Oe=k.pseudos[te]||k.setFilters[te.toLowerCase()]||Ar.error("unsupported pseudo: "+te);return Oe[De]?Oe(me):Oe.length>1?(Ie=[te,te,"",me],k.setFilters.hasOwnProperty(te.toLowerCase())?Fs(function(Q,pe){for(var fe,Be=Oe(Q,me),We=Be.length;We--;)fe=l.call(Q,Be[We]),Q[fe]=!(pe[fe]=Be[We])}):function(Q){return Oe(Q,0,Ie)}):Oe}},pseudos:{not:Fs(function(te){var me=[],Ie=[],Oe=gg(te.replace(J,"$1"));return Oe[De]?Fs(function(Q,pe,fe,Be){for(var We,$t=Oe(Q,null,Be,[]),_t=Q.length;_t--;)(We=$t[_t])&&(Q[_t]=!(pe[_t]=We))}):function(Q,pe,fe){return me[0]=Q,Oe(me,null,fe,Ie),me[0]=null,!Ie.pop()}}),has:Fs(function(te){return function(me){return Ar(te,me).length>0}}),contains:Fs(function(te){return te=te.replace(ia,wo),function(me){return(me.textContent||g.text(me)).indexOf(te)>-1}}),lang:Fs(function(te){return Il.test(te||"")||Ar.error("unsupported lang: "+te),te=te.replace(ia,wo).toLowerCase(),function(me){var Ie;do if(Ie=se?me.lang:me.getAttribute("xml:lang")||me.getAttribute("lang"))return Ie=Ie.toLowerCase(),Ie===te||Ie.indexOf(te+"-")===0;while((me=me.parentNode)&&me.nodeType===1);return!1}}),target:function(te){var me=r.location&&r.location.hash;return me&&me.slice(1)===te.id},root:function(te){return te===ue},focus:function(te){return te===yf()&&q.hasFocus()&&!!(te.type||te.href||~te.tabIndex)},enabled:Vb(!1),disabled:Vb(!0),checked:function(te){return B(te,"input")&&!!te.checked||B(te,"option")&&!!te.selected},selected:function(te){return te.parentNode&&te.parentNode.selectedIndex,te.selected===!0},empty:function(te){for(te=te.firstChild;te;te=te.nextSibling)if(te.nodeType<6)return!1;return!0},parent:function(te){return!k.pseudos.empty(te)},header:function(te){return Ua.test(te.nodeName)},input:function(te){return na.test(te.nodeName)},button:function(te){return B(te,"input")&&te.type==="button"||B(te,"button")},text:function(te){var me;return B(te,"input")&&te.type==="text"&&((me=te.getAttribute("type"))==null||me.toLowerCase()==="text")},first:ys(function(){return[0]}),last:ys(function(te,me){return[me-1]}),eq:ys(function(te,me,Ie){return[Ie<0?Ie+me:Ie]}),even:ys(function(te,me){for(var Ie=0;Ie<me;Ie+=2)te.push(Ie);return te}),odd:ys(function(te,me){for(var Ie=1;Ie<me;Ie+=2)te.push(Ie);return te}),lt:ys(function(te,me,Ie){var Oe;for(Ie<0?Oe=Ie+me:Ie>me?Oe=me:Oe=Ie;--Oe>=0;)te.push(Oe);return te}),gt:ys(function(te,me,Ie){for(var Oe=Ie<0?Ie+me:Ie;++Oe<me;)te.push(Oe);return te})}},k.pseudos.nth=k.pseudos.eq;for(m in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[m]=a2(m);for(m in{submit:!0,reset:!0})k.pseudos[m]=l2(m);function _d(){}_d.prototype=k.filters=k.pseudos,k.setFilters=new _d;function bf(te,me){var Ie,Oe,Q,pe,fe,Be,We,$t=Yt[te+" "];if($t)return me?0:$t.slice(0);for(fe=te,Be=[],We=k.preFilter;fe;){(!Ie||(Oe=Mr.exec(fe)))&&(Oe&&(fe=fe.slice(Oe[0].length)||fe),Be.push(Q=[])),Ie=!1,(Oe=vf.exec(fe))&&(Ie=Oe.shift(),Q.push({value:Ie,type:Oe[0].replace(J," ")}),fe=fe.slice(Ie.length));for(pe in k.filter)(Oe=gs[pe].exec(fe))&&(!We[pe]||(Oe=We[pe](Oe)))&&(Ie=Oe.shift(),Q.push({value:Ie,type:pe,matches:Oe}),fe=fe.slice(Ie.length));if(!Ie)break}return me?fe.length:fe?Ar.error(te):Yt(te,Be).slice(0)}function js(te){for(var me=0,Ie=te.length,Oe="";me<Ie;me++)Oe+=te[me].value;return Oe}function Al(te,me,Ie){var Oe=me.dir,Q=me.next,pe=Q||Oe,fe=Ie&&pe==="parentNode",Be=Xe++;return me.first?function(We,$t,_t){for(;We=We[Oe];)if(We.nodeType===1||fe)return te(We,$t,_t);return!1}:function(We,$t,_t){var yt,er,Dt=[Ae,Be];if(_t){for(;We=We[Oe];)if((We.nodeType===1||fe)&&te(We,$t,_t))return!0}else for(;We=We[Oe];)if(We.nodeType===1||fe)if(er=We[De]||(We[De]={}),Q&&B(We,Q))We=We[Oe]||We;else{if((yt=er[pe])&&yt[0]===Ae&&yt[1]===Be)return Dt[2]=yt[2];if(er[pe]=Dt,Dt[2]=te(We,$t,_t))return!0}return!1}}function vg(te){return te.length>1?function(me,Ie,Oe){for(var Q=te.length;Q--;)if(!te[Q](me,Ie,Oe))return!1;return!0}:te[0]}function u2(te,me,Ie){for(var Oe=0,Q=me.length;Oe<Q;Oe++)Ar(te,me[Oe],Ie);return Ie}function xd(te,me,Ie,Oe,Q){for(var pe,fe=[],Be=0,We=te.length,$t=me!=null;Be<We;Be++)(pe=te[Be])&&(!Ie||Ie(pe,Oe,Q))&&(fe.push(pe),$t&&me.push(Be));return fe}function qa(te,me,Ie,Oe,Q,pe){return Oe&&!Oe[De]&&(Oe=qa(Oe)),Q&&!Q[De]&&(Q=qa(Q,pe)),Fs(function(fe,Be,We,$t){var _t,yt,er,Dt,ur=[],Zn=[],oi=Be.length,Xn=fe||u2(me||"*",We.nodeType?[We]:We,[]),Zi=te&&(fe||!me)?xd(Xn,ur,te,We,$t):Xn;if(Ie?(Dt=Q||(fe?te:oi||Oe)?[]:Be,Ie(Zi,Dt,We,$t)):Dt=Zi,Oe)for(_t=xd(Dt,Zn),Oe(_t,[],We,$t),yt=_t.length;yt--;)(er=_t[yt])&&(Dt[Zn[yt]]=!(Zi[Zn[yt]]=er));if(fe){if(Q||te){if(Q){for(_t=[],yt=Dt.length;yt--;)(er=Dt[yt])&&_t.push(Zi[yt]=er);Q(null,Dt=[],_t,$t)}for(yt=Dt.length;yt--;)(er=Dt[yt])&&(_t=Q?l.call(fe,er):ur[yt])>-1&&(fe[_t]=!(Be[_t]=er))}}else Dt=xd(Dt===Be?Dt.splice(oi,Dt.length):Dt),Q?Q(null,Be,Dt,$t):U.apply(Be,Dt)})}function Yi(te){for(var me,Ie,Oe,Q=te.length,pe=k.relative[te[0].type],fe=pe||k.relative[" "],Be=pe?1:0,We=Al(function(yt){return yt===me},fe,!0),$t=Al(function(yt){return l.call(me,yt)>-1},fe,!0),_t=[function(yt,er,Dt){var ur=!pe&&(Dt||er!=P)||((me=er).nodeType?We(yt,er,Dt):$t(yt,er,Dt));return me=null,ur}];Be<Q;Be++)if(Ie=k.relative[te[Be].type])_t=[Al(vg(_t),Ie)];else{if(Ie=k.filter[te[Be].type].apply(null,te[Be].matches),Ie[De]){for(Oe=++Be;Oe<Q&&!k.relative[te[Oe].type];Oe++);return qa(Be>1&&vg(_t),Be>1&&js(te.slice(0,Be-1).concat({value:te[Be-2].type===" "?"*":""})).replace(J,"$1"),Ie,Be<Oe&&Yi(te.slice(Be,Oe)),Oe<Q&&Yi(te=te.slice(Oe)),Oe<Q&&js(te))}_t.push(Ie)}return vg(_t)}function Gb(te,me){var Ie=me.length>0,Oe=te.length>0,Q=function(pe,fe,Be,We,$t){var _t,yt,er,Dt=0,ur="0",Zn=pe&&[],oi=[],Xn=P,Zi=pe||Oe&&k.find.TAG("*",$t),sa=Ae+=Xn==null?1:Math.random()||.1,qt=Zi.length;for($t&&(P=fe==q||fe||$t);ur!==qt&&(_t=Zi[ur])!=null;ur++){if(Oe&&_t){for(yt=0,!fe&&_t.ownerDocument!=q&&(Wa(_t),Be=!se);er=te[yt++];)if(er(_t,fe||q,Be)){U.call(We,_t);break}$t&&(Ae=sa)}Ie&&((_t=!er&&_t)&&Dt--,pe&&Zn.push(_t))}if(Dt+=ur,Ie&&ur!==Dt){for(yt=0;er=me[yt++];)er(Zn,oi,fe,Be);if(pe){if(Dt>0)for(;ur--;)Zn[ur]||oi[ur]||(oi[ur]=z.call(We));oi=xd(oi)}U.apply(We,oi),$t&&!pe&&oi.length>0&&Dt+me.length>1&&g.uniqueSort(We)}return $t&&(Ae=sa,P=Xn),Zn};return Ie?Fs(Q):Q}function gg(te,me){var Ie,Oe=[],Q=[],pe=Gt[te+" "];if(!pe){for(me||(me=bf(te)),Ie=me.length;Ie--;)pe=Yi(me[Ie]),pe[De]?Oe.push(pe):Q.push(pe);pe=Gt(te,Gb(Q,Oe)),pe.selector=te}return pe}function Yb(te,me,Ie,Oe){var Q,pe,fe,Be,We,$t=typeof te=="function"&&te,_t=!Oe&&bf(te=$t.selector||te);if(Ie=Ie||[],_t.length===1){if(pe=_t[0]=_t[0].slice(0),pe.length>2&&(fe=pe[0]).type==="ID"&&me.nodeType===9&&se&&k.relative[pe[1].type]){if(me=(k.find.ID(fe.matches[0].replace(ia,wo),me)||[])[0],me)$t&&(me=me.parentNode);else return Ie;te=te.slice(pe.shift().value.length)}for(Q=gs.needsContext.test(te)?0:pe.length;Q--&&(fe=pe[Q],!k.relative[Be=fe.type]);)if((We=k.find[Be])&&(Oe=We(fe.matches[0].replace(ia,wo),gf.test(pe[0].type)&&pg(me.parentNode)||me))){if(pe.splice(Q,1),te=Oe.length&&js(pe),!te)return U.apply(Ie,Oe),Ie;break}}return($t||gg(te,_t))(Oe,me,!se,Ie,!me||gf.test(te)&&pg(me.parentNode)||me),Ie}w.sortStable=De.split("").sort(fn).join("")===De,Wa(),w.sortDetached=Lu(function(te){return te.compareDocumentPosition(q.createElement("fieldset"))&1}),g.find=Ar,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,Ar.compile=gg,Ar.select=Yb,Ar.setDocument=Wa,Ar.escape=g.escapeSelector,Ar.getText=g.text,Ar.isXML=g.isXMLDoc,Ar.selectors=g.expr,Ar.support=g.support,Ar.uniqueSort=g.uniqueSort})();var we=function(m,k,P){for(var D=[],H=P!==void 0;(m=m[k])&&m.nodeType!==9;)if(m.nodeType===1){if(H&&g(m).is(P))break;D.push(m)}return D},Ce=function(m,k){for(var P=[];m;m=m.nextSibling)m.nodeType===1&&m!==k&&P.push(m);return P},He=g.expr.match.needsContext,Ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function it(m,k,P){return b(k)?g.grep(m,function(D,H){return!!k.call(D,H,D)!==P}):k.nodeType?g.grep(m,function(D){return D===k!==P}):typeof k!="string"?g.grep(m,function(D){return l.call(k,D)>-1!==P}):g.filter(k,m,P)}g.filter=function(m,k,P){var D=k[0];return P&&(m=":not("+m+")"),k.length===1&&D.nodeType===1?g.find.matchesSelector(D,m)?[D]:[]:g.find.matches(m,g.grep(k,function(H){return H.nodeType===1}))},g.fn.extend({find:function(m){var k,P,D=this.length,H=this;if(typeof m!="string")return this.pushStack(g(m).filter(function(){for(k=0;k<D;k++)if(g.contains(H[k],this))return!0}));for(P=this.pushStack([]),k=0;k<D;k++)g.find(m,H[k],P);return D>1?g.uniqueSort(P):P},filter:function(m){return this.pushStack(it(this,m||[],!1))},not:function(m){return this.pushStack(it(this,m||[],!0))},is:function(m){return!!it(this,typeof m=="string"&&He.test(m)?g(m):m||[],!1).length}});var xe,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=g.fn.init=function(m,k,P){var D,H;if(!m)return this;if(P=P||xe,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?D=[null,m,null]:D=ge.exec(m),D&&(D[1]||!k))if(D[1]){if(k=k instanceof g?k[0]:k,g.merge(this,g.parseHTML(D[1],k&&k.nodeType?k.ownerDocument||k:_,!0)),Ge.test(D[1])&&g.isPlainObject(k))for(D in k)b(this[D])?this[D](k[D]):this.attr(D,k[D]);return this}else return H=_.getElementById(D[2]),H&&(this[0]=H,this.length=1),this;else return!k||k.jquery?(k||P).find(m):this.constructor(k).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(b(m))return P.ready!==void 0?P.ready(m):m(g)}return g.makeArray(m,this)};Te.prototype=g.fn,xe=g(_);var je=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(m){var k=g(m,this),P=k.length;return this.filter(function(){for(var D=0;D<P;D++)if(g.contains(this,k[D]))return!0})},closest:function(m,k){var P,D=0,H=this.length,U=[],q=typeof m!="string"&&g(m);if(!He.test(m)){for(;D<H;D++)for(P=this[D];P&&P!==k;P=P.parentNode)if(P.nodeType<11&&(q?q.index(P)>-1:P.nodeType===1&&g.find.matchesSelector(P,m))){U.push(P);break}}return this.pushStack(U.length>1?g.uniqueSort(U):U)},index:function(m){return m?typeof m=="string"?l.call(g(m),this[0]):l.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,k){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(m,k))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function S(m,k){for(;(m=m[k])&&m.nodeType!==1;);return m}g.each({parent:function(m){var k=m.parentNode;return k&&k.nodeType!==11?k:null},parents:function(m){return we(m,"parentNode")},parentsUntil:function(m,k,P){return we(m,"parentNode",P)},next:function(m){return S(m,"nextSibling")},prev:function(m){return S(m,"previousSibling")},nextAll:function(m){return we(m,"nextSibling")},prevAll:function(m){return we(m,"previousSibling")},nextUntil:function(m,k,P){return we(m,"nextSibling",P)},prevUntil:function(m,k,P){return we(m,"previousSibling",P)},siblings:function(m){return Ce((m.parentNode||{}).firstChild,m)},children:function(m){return Ce(m.firstChild)},contents:function(m){return m.contentDocument!=null&&i(m.contentDocument)?m.contentDocument:(B(m,"template")&&(m=m.content||m),g.merge([],m.childNodes))}},function(m,k){g.fn[m]=function(P,D){var H=g.map(this,k,P);return m.slice(-5)!=="Until"&&(D=P),D&&typeof D=="string"&&(H=g.filter(D,H)),this.length>1&&($[m]||g.uniqueSort(H),je.test(m)&&H.reverse()),this.pushStack(H)}});var N=/[^\x20\t\r\n\f]+/g;function L(m){var k={};return g.each(m.match(N)||[],function(P,D){k[D]=!0}),k}g.Callbacks=function(m){m=typeof m=="string"?L(m):g.extend({},m);var k,P,D,H,U=[],q=[],ue=-1,se=function(){for(H=H||m.once,D=k=!0;q.length;ue=-1)for(P=q.shift();++ue<U.length;)U[ue].apply(P[0],P[1])===!1&&m.stopOnFalse&&(ue=U.length,P=!1);m.memory||(P=!1),k=!1,H&&(P?U=[]:U="")},Ee={add:function(){return U&&(P&&!k&&(ue=U.length-1,q.push(P)),function Pe(De){g.each(De,function(Ae,Xe){b(Xe)?(!m.unique||!Ee.has(Xe))&&U.push(Xe):Xe&&Xe.length&&I(Xe)!=="string"&&Pe(Xe)})}(arguments),P&&!k&&se()),this},remove:function(){return g.each(arguments,function(Pe,De){for(var Ae;(Ae=g.inArray(De,U,Ae))>-1;)U.splice(Ae,1),Ae<=ue&&ue--}),this},has:function(Pe){return Pe?g.inArray(Pe,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return H=q=[],U=P="",this},disabled:function(){return!U},lock:function(){return H=q=[],!P&&!k&&(U=P=""),this},locked:function(){return!!H},fireWith:function(Pe,De){return H||(De=De||[],De=[Pe,De.slice?De.slice():De],q.push(De),k||se()),this},fire:function(){return Ee.fireWith(this,arguments),this},fired:function(){return!!D}};return Ee};function j(m){return m}function K(m){throw m}function ae(m,k,P,D){var H;try{m&&b(H=m.promise)?H.call(m).done(k).fail(P):m&&b(H=m.then)?H.call(m,k,P):k.apply(void 0,[m].slice(D))}catch(U){P.apply(void 0,[U])}}g.extend({Deferred:function(m){var k=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],P="pending",D={state:function(){return P},always:function(){return H.done(arguments).fail(arguments),this},catch:function(U){return D.then(null,U)},pipe:function(){var U=arguments;return g.Deferred(function(q){g.each(k,function(ue,se){var Ee=b(U[se[4]])&&U[se[4]];H[se[1]](function(){var Pe=Ee&&Ee.apply(this,arguments);Pe&&b(Pe.promise)?Pe.promise().progress(q.notify).done(q.resolve).fail(q.reject):q[se[0]+"With"](this,Ee?[Pe]:arguments)})}),U=null}).promise()},then:function(U,q,ue){var se=0;function Ee(Pe,De,Ae,Xe){return function(){var bt=this,Yt=arguments,Gt=function(){var fn,mo;if(!(Pe<se)){if(fn=Ae.apply(bt,Yt),fn===De.promise())throw new TypeError("Thenable self-resolution");mo=fn&&(typeof fn=="object"||typeof fn=="function")&&fn.then,b(mo)?Xe?mo.call(fn,Ee(se,De,j,Xe),Ee(se,De,K,Xe)):(se++,mo.call(fn,Ee(se,De,j,Xe),Ee(se,De,K,Xe),Ee(se,De,j,De.notifyWith))):(Ae!==j&&(bt=void 0,Yt=[fn]),(Xe||De.resolveWith)(bt,Yt))}},Yn=Xe?Gt:function(){try{Gt()}catch(fn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(fn,Yn.error),Pe+1>=se&&(Ae!==K&&(bt=void 0,Yt=[fn]),De.rejectWith(bt,Yt))}};Pe?Yn():(g.Deferred.getErrorHook?Yn.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(Yn.error=g.Deferred.getStackHook()),r.setTimeout(Yn))}}return g.Deferred(function(Pe){k[0][3].add(Ee(0,Pe,b(ue)?ue:j,Pe.notifyWith)),k[1][3].add(Ee(0,Pe,b(U)?U:j)),k[2][3].add(Ee(0,Pe,b(q)?q:K))}).promise()},promise:function(U){return U!=null?g.extend(U,D):D}},H={};return g.each(k,function(U,q){var ue=q[2],se=q[5];D[q[1]]=ue.add,se&&ue.add(function(){P=se},k[3-U][2].disable,k[3-U][3].disable,k[0][2].lock,k[0][3].lock),ue.add(q[3].fire),H[q[0]]=function(){return H[q[0]+"With"](this===H?void 0:this,arguments),this},H[q[0]+"With"]=ue.fireWith}),D.promise(H),m&&m.call(H,H),H},when:function(m){var k=arguments.length,P=k,D=Array(P),H=s.call(arguments),U=g.Deferred(),q=function(ue){return function(se){D[ue]=this,H[ue]=arguments.length>1?s.call(arguments):se,--k||U.resolveWith(D,H)}};if(k<=1&&(ae(m,U.done(q(P)).resolve,U.reject,!k),U.state()==="pending"||b(H[P]&&H[P].then)))return U.then();for(;P--;)ae(H[P],q(P),U.reject);return U.promise()}});var ye=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(m,k){r.console&&r.console.warn&&m&&ye.test(m.name)&&r.console.warn("jQuery.Deferred exception: "+m.message,m.stack,k)},g.readyException=function(m){r.setTimeout(function(){throw m})};var Ue=g.Deferred();g.fn.ready=function(m){return Ue.then(m).catch(function(k){g.readyException(k)}),this},g.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(m!==!0&&--g.readyWait>0)&&Ue.resolveWith(_,[g]))}}),g.ready.then=Ue.then;function ze(){_.removeEventListener("DOMContentLoaded",ze),r.removeEventListener("load",ze),g.ready()}_.readyState==="complete"||_.readyState!=="loading"&&!_.documentElement.doScroll?r.setTimeout(g.ready):(_.addEventListener("DOMContentLoaded",ze),r.addEventListener("load",ze));var st=function(m,k,P,D,H,U,q){var ue=0,se=m.length,Ee=P==null;if(I(P)==="object"){H=!0;for(ue in P)st(m,k,ue,P[ue],!0,U,q)}else if(D!==void 0&&(H=!0,b(D)||(q=!0),Ee&&(q?(k.call(m,D),k=null):(Ee=k,k=function(Pe,De,Ae){return Ee.call(g(Pe),Ae)})),k))for(;ue<se;ue++)k(m[ue],P,q?D:D.call(m[ue],ue,k(m[ue],P)));return H?m:Ee?k.call(m):se?k(m[0],P):U},wt=/^-ms-/,mt=/-([a-z])/g;function pt(m,k){return k.toUpperCase()}function Rt(m){return m.replace(wt,"ms-").replace(mt,pt)}var dr=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function Vr(){this.expando=g.expando+Vr.uid++}Vr.uid=1,Vr.prototype={cache:function(m){var k=m[this.expando];return k||(k={},dr(m)&&(m.nodeType?m[this.expando]=k:Object.defineProperty(m,this.expando,{value:k,configurable:!0}))),k},set:function(m,k,P){var D,H=this.cache(m);if(typeof k=="string")H[Rt(k)]=P;else for(D in k)H[Rt(D)]=k[D];return H},get:function(m,k){return k===void 0?this.cache(m):m[this.expando]&&m[this.expando][Rt(k)]},access:function(m,k,P){return k===void 0||k&&typeof k=="string"&&P===void 0?this.get(m,k):(this.set(m,k,P),P!==void 0?P:k)},remove:function(m,k){var P,D=m[this.expando];if(D!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(Rt):(k=Rt(k),k=k in D?[k]:k.match(N)||[]),P=k.length;P--;)delete D[k[P]];(k===void 0||g.isEmptyObject(D))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var k=m[this.expando];return k!==void 0&&!g.isEmptyObject(k)}};var ct=new Vr,It=new Vr,vn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pi=/[A-Z]/g;function Ki(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:vn.test(m)?JSON.parse(m):m}function gn(m,k,P){var D;if(P===void 0&&m.nodeType===1)if(D="data-"+k.replace(Pi,"-$&").toLowerCase(),P=m.getAttribute(D),typeof P=="string"){try{P=Ki(P)}catch{}It.set(m,k,P)}else P=void 0;return P}g.extend({hasData:function(m){return It.hasData(m)||ct.hasData(m)},data:function(m,k,P){return It.access(m,k,P)},removeData:function(m,k){It.remove(m,k)},_data:function(m,k,P){return ct.access(m,k,P)},_removeData:function(m,k){ct.remove(m,k)}}),g.fn.extend({data:function(m,k){var P,D,H,U=this[0],q=U&&U.attributes;if(m===void 0){if(this.length&&(H=It.get(U),U.nodeType===1&&!ct.get(U,"hasDataAttrs"))){for(P=q.length;P--;)q[P]&&(D=q[P].name,D.indexOf("data-")===0&&(D=Rt(D.slice(5)),gn(U,D,H[D])));ct.set(U,"hasDataAttrs",!0)}return H}return typeof m=="object"?this.each(function(){It.set(this,m)}):st(this,function(ue){var se;if(U&&ue===void 0)return se=It.get(U,m),se!==void 0||(se=gn(U,m),se!==void 0)?se:void 0;this.each(function(){It.set(this,m,ue)})},null,k,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){It.remove(this,m)})}}),g.extend({queue:function(m,k,P){var D;if(m)return k=(k||"fx")+"queue",D=ct.get(m,k),P&&(!D||Array.isArray(P)?D=ct.access(m,k,g.makeArray(P)):D.push(P)),D||[]},dequeue:function(m,k){k=k||"fx";var P=g.queue(m,k),D=P.length,H=P.shift(),U=g._queueHooks(m,k),q=function(){g.dequeue(m,k)};H==="inprogress"&&(H=P.shift(),D--),H&&(k==="fx"&&P.unshift("inprogress"),delete U.stop,H.call(m,q,U)),!D&&U&&U.empty.fire()},_queueHooks:function(m,k){var P=k+"queueHooks";return ct.get(m,P)||ct.access(m,P,{empty:g.Callbacks("once memory").add(function(){ct.remove(m,[k+"queue",P])})})}}),g.fn.extend({queue:function(m,k){var P=2;return typeof m!="string"&&(k=m,m="fx",P--),arguments.length<P?g.queue(this[0],m):k===void 0?this:this.each(function(){var D=g.queue(this,m,k);g._queueHooks(this,m),m==="fx"&&D[0]!=="inprogress"&&g.dequeue(this,m)})},dequeue:function(m){return this.each(function(){g.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,k){var P,D=1,H=g.Deferred(),U=this,q=this.length,ue=function(){--D||H.resolveWith(U,[U])};for(typeof m!="string"&&(k=m,m=void 0),m=m||"fx";q--;)P=ct.get(U[q],m+"queueHooks"),P&&P.empty&&(D++,P.empty.add(ue));return ue(),H.promise(k)}});var ps=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fo=new RegExp("^(?:([+-])=|)("+ps+")([a-z%]*)$","i"),Ni=["Top","Right","Bottom","Left"],Vi=_.documentElement,ho=function(m){return g.contains(m.ownerDocument,m)},af={composed:!0};Vi.getRootNode&&(ho=function(m){return g.contains(m.ownerDocument,m)||m.getRootNode(af)===m.ownerDocument});var po=function(m,k){return m=k||m,m.style.display==="none"||m.style.display===""&&ho(m)&&g.css(m,"display")==="none"};function lf(m,k,P,D){var H,U,q=20,ue=D?function(){return D.cur()}:function(){return g.css(m,k,"")},se=ue(),Ee=P&&P[3]||(g.cssNumber[k]?"":"px"),Pe=m.nodeType&&(g.cssNumber[k]||Ee!=="px"&&+se)&&fo.exec(g.css(m,k));if(Pe&&Pe[3]!==Ee){for(se=se/2,Ee=Ee||Pe[3],Pe=+se||1;q--;)g.style(m,k,Pe+Ee),(1-U)*(1-(U=ue()/se||.5))<=0&&(q=0),Pe=Pe/U;Pe=Pe*2,g.style(m,k,Pe+Ee),P=P||[]}return P&&(Pe=+Pe||+se||0,H=P[1]?Pe+(P[1]+1)*P[2]:+P[2],D&&(D.unit=Ee,D.start=Pe,D.end=H)),H}var sd={};function vo(m){var k,P=m.ownerDocument,D=m.nodeName,H=sd[D];return H||(k=P.body.appendChild(P.createElement(D)),H=g.css(k,"display"),k.parentNode.removeChild(k),H==="none"&&(H="block"),sd[D]=H,H)}function ea(m,k){for(var P,D,H=[],U=0,q=m.length;U<q;U++)D=m[U],D.style&&(P=D.style.display,k?(P==="none"&&(H[U]=ct.get(D,"display")||null,H[U]||(D.style.display="")),D.style.display===""&&po(D)&&(H[U]=vo(D))):P!=="none"&&(H[U]="none",ct.set(D,"display",P)));for(U=0;U<q;U++)H[U]!=null&&(m[U].style.display=H[U]);return m}g.fn.extend({show:function(){return ea(this,!0)},hide:function(){return ea(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){po(this)?g(this).show():g(this).hide()})}});var Ma=/^(?:checkbox|radio)$/i,uf=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,od=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=_.createDocumentFragment(),k=m.appendChild(_.createElement("div")),P=_.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),k.appendChild(P),w.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,k.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!k.cloneNode(!0).lastChild.defaultValue,k.innerHTML="<option></option>",w.option=!!k.lastChild})();var Ri={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ri.tbody=Ri.tfoot=Ri.colgroup=Ri.caption=Ri.thead,Ri.th=Ri.td,w.option||(Ri.optgroup=Ri.option=[1,"<select multiple='multiple'>","</select>"]);function si(m,k){var P;return typeof m.getElementsByTagName<"u"?P=m.getElementsByTagName(k||"*"):typeof m.querySelectorAll<"u"?P=m.querySelectorAll(k||"*"):P=[],k===void 0||k&&B(m,k)?g.merge([m],P):P}function Nu(m,k){for(var P=0,D=m.length;P<D;P++)ct.set(m[P],"globalEval",!k||ct.get(k[P],"globalEval"))}var eg=/<|&#?\w+;/;function ad(m,k,P,D,H){for(var U,q,ue,se,Ee,Pe,De=k.createDocumentFragment(),Ae=[],Xe=0,bt=m.length;Xe<bt;Xe++)if(U=m[Xe],U||U===0)if(I(U)==="object")g.merge(Ae,U.nodeType?[U]:U);else if(!eg.test(U))Ae.push(k.createTextNode(U));else{for(q=q||De.appendChild(k.createElement("div")),ue=(uf.exec(U)||["",""])[1].toLowerCase(),se=Ri[ue]||Ri._default,q.innerHTML=se[1]+g.htmlPrefilter(U)+se[2],Pe=se[0];Pe--;)q=q.lastChild;g.merge(Ae,q.childNodes),q=De.firstChild,q.textContent=""}for(De.textContent="",Xe=0;U=Ae[Xe++];){if(D&&g.inArray(U,D)>-1){H&&H.push(U);continue}if(Ee=ho(U),q=si(De.appendChild(U),"script"),Ee&&Nu(q),P)for(Pe=0;U=q[Pe++];)od.test(U.type||"")&&P.push(U)}return De}var ld=/^([^.]*)(?:\.(.+)|)/;function go(){return!0}function La(){return!1}function El(m,k,P,D,H,U){var q,ue;if(typeof k=="object"){typeof P!="string"&&(D=D||P,P=void 0);for(ue in k)El(m,ue,P,D,k[ue],U);return m}if(D==null&&H==null?(H=P,D=P=void 0):H==null&&(typeof P=="string"?(H=D,D=void 0):(H=D,D=P,P=void 0)),H===!1)H=La;else if(!H)return m;return U===1&&(q=H,H=function(se){return g().off(se),q.apply(this,arguments)},H.guid=q.guid||(q.guid=g.guid++)),m.each(function(){g.event.add(this,k,H,D,P)})}g.event={global:{},add:function(m,k,P,D,H){var U,q,ue,se,Ee,Pe,De,Ae,Xe,bt,Yt,Gt=ct.get(m);if(dr(m))for(P.handler&&(U=P,P=U.handler,H=U.selector),H&&g.find.matchesSelector(Vi,H),P.guid||(P.guid=g.guid++),(se=Gt.events)||(se=Gt.events=Object.create(null)),(q=Gt.handle)||(q=Gt.handle=function(Yn){return typeof g<"u"&&g.event.triggered!==Yn.type?g.event.dispatch.apply(m,arguments):void 0}),k=(k||"").match(N)||[""],Ee=k.length;Ee--;)ue=ld.exec(k[Ee])||[],Xe=Yt=ue[1],bt=(ue[2]||"").split(".").sort(),Xe&&(De=g.event.special[Xe]||{},Xe=(H?De.delegateType:De.bindType)||Xe,De=g.event.special[Xe]||{},Pe=g.extend({type:Xe,origType:Yt,data:D,handler:P,guid:P.guid,selector:H,needsContext:H&&g.expr.match.needsContext.test(H),namespace:bt.join(".")},U),(Ae=se[Xe])||(Ae=se[Xe]=[],Ae.delegateCount=0,(!De.setup||De.setup.call(m,D,bt,q)===!1)&&m.addEventListener&&m.addEventListener(Xe,q)),De.add&&(De.add.call(m,Pe),Pe.handler.guid||(Pe.handler.guid=P.guid)),H?Ae.splice(Ae.delegateCount++,0,Pe):Ae.push(Pe),g.event.global[Xe]=!0)},remove:function(m,k,P,D,H){var U,q,ue,se,Ee,Pe,De,Ae,Xe,bt,Yt,Gt=ct.hasData(m)&&ct.get(m);if(!(!Gt||!(se=Gt.events))){for(k=(k||"").match(N)||[""],Ee=k.length;Ee--;){if(ue=ld.exec(k[Ee])||[],Xe=Yt=ue[1],bt=(ue[2]||"").split(".").sort(),!Xe){for(Xe in se)g.event.remove(m,Xe+k[Ee],P,D,!0);continue}for(De=g.event.special[Xe]||{},Xe=(D?De.delegateType:De.bindType)||Xe,Ae=se[Xe]||[],ue=ue[2]&&new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"),q=U=Ae.length;U--;)Pe=Ae[U],(H||Yt===Pe.origType)&&(!P||P.guid===Pe.guid)&&(!ue||ue.test(Pe.namespace))&&(!D||D===Pe.selector||D==="**"&&Pe.selector)&&(Ae.splice(U,1),Pe.selector&&Ae.delegateCount--,De.remove&&De.remove.call(m,Pe));q&&!Ae.length&&((!De.teardown||De.teardown.call(m,bt,Gt.handle)===!1)&&g.removeEvent(m,Xe,Gt.handle),delete se[Xe])}g.isEmptyObject(se)&&ct.remove(m,"handle events")}},dispatch:function(m){var k,P,D,H,U,q,ue=new Array(arguments.length),se=g.event.fix(m),Ee=(ct.get(this,"events")||Object.create(null))[se.type]||[],Pe=g.event.special[se.type]||{};for(ue[0]=se,k=1;k<arguments.length;k++)ue[k]=arguments[k];if(se.delegateTarget=this,!(Pe.preDispatch&&Pe.preDispatch.call(this,se)===!1)){for(q=g.event.handlers.call(this,se,Ee),k=0;(H=q[k++])&&!se.isPropagationStopped();)for(se.currentTarget=H.elem,P=0;(U=H.handlers[P++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||U.namespace===!1||se.rnamespace.test(U.namespace))&&(se.handleObj=U,se.data=U.data,D=((g.event.special[U.origType]||{}).handle||U.handler).apply(H.elem,ue),D!==void 0&&(se.result=D)===!1&&(se.preventDefault(),se.stopPropagation()));return Pe.postDispatch&&Pe.postDispatch.call(this,se),se.result}},handlers:function(m,k){var P,D,H,U,q,ue=[],se=k.delegateCount,Ee=m.target;if(se&&Ee.nodeType&&!(m.type==="click"&&m.button>=1)){for(;Ee!==this;Ee=Ee.parentNode||this)if(Ee.nodeType===1&&!(m.type==="click"&&Ee.disabled===!0)){for(U=[],q={},P=0;P<se;P++)D=k[P],H=D.selector+" ",q[H]===void 0&&(q[H]=D.needsContext?g(H,this).index(Ee)>-1:g.find(H,this,null,[Ee]).length),q[H]&&U.push(D);U.length&&ue.push({elem:Ee,handlers:U})}}return Ee=this,se<k.length&&ue.push({elem:Ee,handlers:k.slice(se)}),ue},addProp:function(m,k){Object.defineProperty(g.Event.prototype,m,{enumerable:!0,configurable:!0,get:b(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(P){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(m){return m[g.expando]?m:new g.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var k=this||m;return Ma.test(k.type)&&k.click&&B(k,"input")&&Sl(k,"click",!0),!1},trigger:function(m){var k=this||m;return Ma.test(k.type)&&k.click&&B(k,"input")&&Sl(k,"click"),!0},_default:function(m){var k=m.target;return Ma.test(k.type)&&k.click&&B(k,"input")&&ct.get(k,"click")||B(k,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function Sl(m,k,P){if(!P){ct.get(m,k)===void 0&&g.event.add(m,k,go);return}ct.set(m,k,!1),g.event.add(m,k,{namespace:!1,handler:function(D){var H,U=ct.get(this,k);if(D.isTrigger&1&&this[k]){if(U)(g.event.special[k]||{}).delegateType&&D.stopPropagation();else if(U=s.call(arguments),ct.set(this,k,U),this[k](),H=ct.get(this,k),ct.set(this,k,!1),U!==H)return D.stopImmediatePropagation(),D.preventDefault(),H}else U&&(ct.set(this,k,g.event.trigger(U[0],U.slice(1),this)),D.stopPropagation(),D.isImmediatePropagationStopped=go)}})}g.removeEvent=function(m,k,P){m.removeEventListener&&m.removeEventListener(k,P)},g.Event=function(m,k){if(!(this instanceof g.Event))return new g.Event(m,k);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?go:La,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,k&&g.extend(this,k),this.timeStamp=m&&m.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:La,isPropagationStopped:La,isImmediatePropagationStopped:La,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=go,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=go,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=go,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(m,k){function P(D){if(_.documentMode){var H=ct.get(this,"handle"),U=g.event.fix(D);U.type=D.type==="focusin"?"focus":"blur",U.isSimulated=!0,H(D),U.target===U.currentTarget&&H(U)}else g.event.simulate(k,D.target,g.event.fix(D))}g.event.special[m]={setup:function(){var D;if(Sl(this,m,!0),_.documentMode)D=ct.get(this,k),D||this.addEventListener(k,P),ct.set(this,k,(D||0)+1);else return!1},trigger:function(){return Sl(this,m),!0},teardown:function(){var D;if(_.documentMode)D=ct.get(this,k)-1,D?ct.set(this,k,D):(this.removeEventListener(k,P),ct.remove(this,k));else return!1},_default:function(D){return ct.get(D.target,m)},delegateType:k},g.event.special[k]={setup:function(){var D=this.ownerDocument||this.document||this,H=_.documentMode?this:D,U=ct.get(H,k);U||(_.documentMode?this.addEventListener(k,P):D.addEventListener(m,P,!0)),ct.set(H,k,(U||0)+1)},teardown:function(){var D=this.ownerDocument||this.document||this,H=_.documentMode?this:D,U=ct.get(H,k)-1;U?ct.set(H,k,U):(_.documentMode?this.removeEventListener(k,P):D.removeEventListener(m,P,!0),ct.remove(H,k))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,k){g.event.special[m]={delegateType:k,bindType:k,handle:function(P){var D,H=this,U=P.relatedTarget,q=P.handleObj;return(!U||U!==H&&!g.contains(H,U))&&(P.type=q.origType,D=q.handler.apply(this,arguments),P.type=k),D}}}),g.fn.extend({on:function(m,k,P,D){return El(this,m,k,P,D)},one:function(m,k,P,D){return El(this,m,k,P,D,1)},off:function(m,k,P){var D,H;if(m&&m.preventDefault&&m.handleObj)return D=m.handleObj,g(m.delegateTarget).off(D.namespace?D.origType+"."+D.namespace:D.origType,D.selector,D.handler),this;if(typeof m=="object"){for(H in m)this.off(H,k,m[H]);return this}return(k===!1||typeof k=="function")&&(P=k,k=void 0),P===!1&&(P=La),this.each(function(){g.event.remove(this,m,P,k)})}});var tg=/<script|<style|<link/i,rg=/checked\s*(?:[^=]|=\s*.checked.)/i,ng=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ud(m,k){return B(m,"table")&&B(k.nodeType!==11?k:k.firstChild,"tr")&&g(m).children("tbody")[0]||m}function ig(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function sg(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function cd(m,k){var P,D,H,U,q,ue,se;if(k.nodeType===1){if(ct.hasData(m)&&(U=ct.get(m),se=U.events,se)){ct.remove(k,"handle events");for(H in se)for(P=0,D=se[H].length;P<D;P++)g.event.add(k,H,se[H][P])}It.hasData(m)&&(q=It.access(m),ue=g.extend({},q),It.set(k,ue))}}function fd(m,k){var P=k.nodeName.toLowerCase();P==="input"&&Ma.test(m.type)?k.checked=m.checked:(P==="input"||P==="textarea")&&(k.defaultValue=m.defaultValue)}function Fa(m,k,P,D){k=o(k);var H,U,q,ue,se,Ee,Pe=0,De=m.length,Ae=De-1,Xe=k[0],bt=b(Xe);if(bt||De>1&&typeof Xe=="string"&&!w.checkClone&&rg.test(Xe))return m.each(function(Yt){var Gt=m.eq(Yt);bt&&(k[0]=Xe.call(this,Yt,Gt.html())),Fa(Gt,k,P,D)});if(De&&(H=ad(k,m[0].ownerDocument,!1,m,D),U=H.firstChild,H.childNodes.length===1&&(H=U),U||D)){for(q=g.map(si(H,"script"),ig),ue=q.length;Pe<De;Pe++)se=H,Pe!==Ae&&(se=g.clone(se,!0,!0),ue&&g.merge(q,si(se,"script"))),P.call(m[Pe],se,Pe);if(ue)for(Ee=q[q.length-1].ownerDocument,g.map(q,sg),Pe=0;Pe<ue;Pe++)se=q[Pe],od.test(se.type||"")&&!ct.access(se,"globalEval")&&g.contains(Ee,se)&&(se.src&&(se.type||"").toLowerCase()!=="module"?g._evalUrl&&!se.noModule&&g._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},Ee):x(se.textContent.replace(ng,""),se,Ee))}return m}function hd(m,k,P){for(var D,H=k?g.filter(k,m):m,U=0;(D=H[U])!=null;U++)!P&&D.nodeType===1&&g.cleanData(si(D)),D.parentNode&&(P&&ho(D)&&Nu(si(D,"script")),D.parentNode.removeChild(D));return m}g.extend({htmlPrefilter:function(m){return m},clone:function(m,k,P){var D,H,U,q,ue=m.cloneNode(!0),se=ho(m);if(!w.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!g.isXMLDoc(m))for(q=si(ue),U=si(m),D=0,H=U.length;D<H;D++)fd(U[D],q[D]);if(k)if(P)for(U=U||si(m),q=q||si(ue),D=0,H=U.length;D<H;D++)cd(U[D],q[D]);else cd(m,ue);return q=si(ue,"script"),q.length>0&&Nu(q,!se&&si(m,"script")),ue},cleanData:function(m){for(var k,P,D,H=g.event.special,U=0;(P=m[U])!==void 0;U++)if(dr(P)){if(k=P[ct.expando]){if(k.events)for(D in k.events)H[D]?g.event.remove(P,D):g.removeEvent(P,D,k.handle);P[ct.expando]=void 0}P[It.expando]&&(P[It.expando]=void 0)}}}),g.fn.extend({detach:function(m){return hd(this,m,!0)},remove:function(m){return hd(this,m)},text:function(m){return st(this,function(k){return k===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,m,arguments.length)},append:function(){return Fa(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=ud(this,m);k.appendChild(m)}})},prepend:function(){return Fa(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=ud(this,m);k.insertBefore(m,k.firstChild)}})},before:function(){return Fa(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return Fa(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,k=0;(m=this[k])!=null;k++)m.nodeType===1&&(g.cleanData(si(m,!1)),m.textContent="");return this},clone:function(m,k){return m=m??!1,k=k??m,this.map(function(){return g.clone(this,m,k)})},html:function(m){return st(this,function(k){var P=this[0]||{},D=0,H=this.length;if(k===void 0&&P.nodeType===1)return P.innerHTML;if(typeof k=="string"&&!tg.test(k)&&!Ri[(uf.exec(k)||["",""])[1].toLowerCase()]){k=g.htmlPrefilter(k);try{for(;D<H;D++)P=this[D]||{},P.nodeType===1&&(g.cleanData(si(P,!1)),P.innerHTML=k);P=0}catch{}}P&&this.empty().append(k)},null,m,arguments.length)},replaceWith:function(){var m=[];return Fa(this,arguments,function(k){var P=this.parentNode;g.inArray(this,m)<0&&(g.cleanData(si(this)),P&&P.replaceChild(k,this))},m)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,k){g.fn[m]=function(P){for(var D,H=[],U=g(P),q=U.length-1,ue=0;ue<=q;ue++)D=ue===q?this:this.clone(!0),g(U[ue])[k](D),a.apply(H,D.get());return this.pushStack(H)}});var cf=new RegExp("^("+ps+")(?!px)[a-z%]+$","i"),ff=/^--/,Ru=function(m){var k=m.ownerDocument.defaultView;return(!k||!k.opener)&&(k=r),k.getComputedStyle(m)},dd=function(m,k,P){var D,H,U={};for(H in k)U[H]=m.style[H],m.style[H]=k[H];D=P.call(m);for(H in k)m.style[H]=U[H];return D},Du=new RegExp(Ni.join("|"),"i");(function(){function m(){if(Ee){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Vi.appendChild(se).appendChild(Ee);var Pe=r.getComputedStyle(Ee);P=Pe.top!=="1%",ue=k(Pe.marginLeft)===12,Ee.style.right="60%",U=k(Pe.right)===36,D=k(Pe.width)===36,Ee.style.position="absolute",H=k(Ee.offsetWidth/3)===12,Vi.removeChild(se),Ee=null}}function k(Pe){return Math.round(parseFloat(Pe))}var P,D,H,U,q,ue,se=_.createElement("div"),Ee=_.createElement("div");Ee.style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=Ee.style.backgroundClip==="content-box",g.extend(w,{boxSizingReliable:function(){return m(),D},pixelBoxStyles:function(){return m(),U},pixelPosition:function(){return m(),P},reliableMarginLeft:function(){return m(),ue},scrollboxSize:function(){return m(),H},reliableTrDimensions:function(){var Pe,De,Ae,Xe;return q==null&&(Pe=_.createElement("table"),De=_.createElement("tr"),Ae=_.createElement("div"),Pe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",De.style.cssText="border:1px solid",De.style.height="1px",Ae.style.height="9px",Ae.style.display="block",Vi.appendChild(Pe).appendChild(De).appendChild(Ae),Xe=r.getComputedStyle(De),q=parseInt(Xe.height,10)+parseInt(Xe.borderTopWidth,10)+parseInt(Xe.borderBottomWidth,10)===De.offsetHeight,Vi.removeChild(Pe)),q}}))})();function ja(m,k,P){var D,H,U,q,ue=ff.test(k),se=m.style;return P=P||Ru(m),P&&(q=P.getPropertyValue(k)||P[k],ue&&q&&(q=q.replace(J,"$1")||void 0),q===""&&!ho(m)&&(q=g.style(m,k)),!w.pixelBoxStyles()&&cf.test(q)&&Du.test(k)&&(D=se.width,H=se.minWidth,U=se.maxWidth,se.minWidth=se.maxWidth=se.width=q,q=P.width,se.width=D,se.minWidth=H,se.maxWidth=U)),q!==void 0?q+"":q}function Ms(m,k){return{get:function(){if(m()){delete this.get;return}return(this.get=k).apply(this,arguments)}}}var hf=["Webkit","Moz","ms"],ta=_.createElement("div").style,pd={};function kl(m){for(var k=m[0].toUpperCase()+m.slice(1),P=hf.length;P--;)if(m=hf[P]+k,m in ta)return m}function za(m){var k=g.cssProps[m]||pd[m];return k||(m in ta?m:pd[m]=kl(m)||m)}var vd=/^(none|table(?!-c[ea]).+)/,og={position:"absolute",visibility:"hidden",display:"block"},Bu={letterSpacing:"0",fontWeight:"400"};function gd(m,k,P){var D=fo.exec(k);return D?Math.max(0,D[2]-(P||0))+(D[3]||"px"):k}function df(m,k,P,D,H,U){var q=k==="width"?1:0,ue=0,se=0,Ee=0;if(P===(D?"border":"content"))return 0;for(;q<4;q+=2)P==="margin"&&(Ee+=g.css(m,P+Ni[q],!0,H)),D?(P==="content"&&(se-=g.css(m,"padding"+Ni[q],!0,H)),P!=="margin"&&(se-=g.css(m,"border"+Ni[q]+"Width",!0,H))):(se+=g.css(m,"padding"+Ni[q],!0,H),P!=="padding"?se+=g.css(m,"border"+Ni[q]+"Width",!0,H):ue+=g.css(m,"border"+Ni[q]+"Width",!0,H));return!D&&U>=0&&(se+=Math.max(0,Math.ceil(m["offset"+k[0].toUpperCase()+k.slice(1)]-U-se-ue-.5))||0),se+Ee}function Y(m,k,P){var D=Ru(m),H=!w.boxSizingReliable()||P,U=H&&g.css(m,"boxSizing",!1,D)==="border-box",q=U,ue=ja(m,k,D),se="offset"+k[0].toUpperCase()+k.slice(1);if(cf.test(ue)){if(!P)return ue;ue="auto"}return(!w.boxSizingReliable()&&U||!w.reliableTrDimensions()&&B(m,"tr")||ue==="auto"||!parseFloat(ue)&&g.css(m,"display",!1,D)==="inline")&&m.getClientRects().length&&(U=g.css(m,"boxSizing",!1,D)==="border-box",q=se in m,q&&(ue=m[se])),ue=parseFloat(ue)||0,ue+df(m,k,P||(U?"border":"content"),q,D,ue)+"px"}g.extend({cssHooks:{opacity:{get:function(m,k){if(k){var P=ja(m,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(m,k,P,D){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var H,U,q,ue=Rt(k),se=ff.test(k),Ee=m.style;if(se||(k=za(ue)),q=g.cssHooks[k]||g.cssHooks[ue],P!==void 0){if(U=typeof P,U==="string"&&(H=fo.exec(P))&&H[1]&&(P=lf(m,k,H),U="number"),P==null||P!==P)return;U==="number"&&!se&&(P+=H&&H[3]||(g.cssNumber[ue]?"":"px")),!w.clearCloneStyle&&P===""&&k.indexOf("background")===0&&(Ee[k]="inherit"),(!q||!("set"in q)||(P=q.set(m,P,D))!==void 0)&&(se?Ee.setProperty(k,P):Ee[k]=P)}else return q&&"get"in q&&(H=q.get(m,!1,D))!==void 0?H:Ee[k]}},css:function(m,k,P,D){var H,U,q,ue=Rt(k),se=ff.test(k);return se||(k=za(ue)),q=g.cssHooks[k]||g.cssHooks[ue],q&&"get"in q&&(H=q.get(m,!0,P)),H===void 0&&(H=ja(m,k,D)),H==="normal"&&k in Bu&&(H=Bu[k]),P===""||P?(U=parseFloat(H),P===!0||isFinite(U)?U||0:H):H}}),g.each(["height","width"],function(m,k){g.cssHooks[k]={get:function(P,D,H){if(D)return vd.test(g.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?dd(P,og,function(){return Y(P,k,H)}):Y(P,k,H)},set:function(P,D,H){var U,q=Ru(P),ue=!w.scrollboxSize()&&q.position==="absolute",se=ue||H,Ee=se&&g.css(P,"boxSizing",!1,q)==="border-box",Pe=H?df(P,k,H,Ee,q):0;return Ee&&ue&&(Pe-=Math.ceil(P["offset"+k[0].toUpperCase()+k.slice(1)]-parseFloat(q[k])-df(P,k,"border",!1,q)-.5)),Pe&&(U=fo.exec(D))&&(U[3]||"px")!=="px"&&(P.style[k]=D,D=g.css(P,k)),gd(P,D,Pe)}}}),g.cssHooks.marginLeft=Ms(w.reliableMarginLeft,function(m,k){if(k)return(parseFloat(ja(m,"marginLeft"))||m.getBoundingClientRect().left-dd(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(m,k){g.cssHooks[m+k]={expand:function(P){for(var D=0,H={},U=typeof P=="string"?P.split(" "):[P];D<4;D++)H[m+Ni[D]+k]=U[D]||U[D-2]||U[0];return H}},m!=="margin"&&(g.cssHooks[m+k].set=gd)}),g.fn.extend({css:function(m,k){return st(this,function(P,D,H){var U,q,ue={},se=0;if(Array.isArray(D)){for(U=Ru(P),q=D.length;se<q;se++)ue[D[se]]=g.css(P,D[se],!1,U);return ue}return H!==void 0?g.style(P,D,H):g.css(P,D)},m,k,arguments.length>1)}});function le(m,k,P,D,H){return new le.prototype.init(m,k,P,D,H)}g.Tween=le,le.prototype={constructor:le,init:function(m,k,P,D,H,U){this.elem=m,this.prop=P,this.easing=H||g.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=D,this.unit=U||(g.cssNumber[P]?"":"px")},cur:function(){var m=le.propHooks[this.prop];return m&&m.get?m.get(this):le.propHooks._default.get(this)},run:function(m){var k,P=le.propHooks[this.prop];return this.options.duration?this.pos=k=g.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=k=m,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):le.propHooks._default.set(this),this}},le.prototype.init.prototype=le.prototype,le.propHooks={_default:{get:function(m){var k;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(k=g.css(m.elem,m.prop,""),!k||k==="auto"?0:k)},set:function(m){g.fx.step[m.prop]?g.fx.step[m.prop](m):m.elem.nodeType===1&&(g.cssHooks[m.prop]||m.elem.style[za(m.prop)]!=null)?g.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},le.propHooks.scrollTop=le.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},g.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},g.fx=le.prototype.init,g.fx.step={};var ee,$e,Se=/^(?:toggle|show|hide)$/,be=/queueHooks$/;function Fe(){$e&&(_.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Fe):r.setTimeout(Fe,g.fx.interval),g.fx.tick())}function Ye(){return r.setTimeout(function(){ee=void 0}),ee=Date.now()}function Je(m,k){var P,D=0,H={height:m};for(k=k?1:0;D<4;D+=2-k)P=Ni[D],H["margin"+P]=H["padding"+P]=m;return k&&(H.opacity=H.width=m),H}function et(m,k,P){for(var D,H=(Lt.tweeners[k]||[]).concat(Lt.tweeners["*"]),U=0,q=H.length;U<q;U++)if(D=H[U].call(P,k,m))return D}function ot(m,k,P){var D,H,U,q,ue,se,Ee,Pe,De="width"in k||"height"in k,Ae=this,Xe={},bt=m.style,Yt=m.nodeType&&po(m),Gt=ct.get(m,"fxshow");P.queue||(q=g._queueHooks(m,"fx"),q.unqueued==null&&(q.unqueued=0,ue=q.empty.fire,q.empty.fire=function(){q.unqueued||ue()}),q.unqueued++,Ae.always(function(){Ae.always(function(){q.unqueued--,g.queue(m,"fx").length||q.empty.fire()})}));for(D in k)if(H=k[D],Se.test(H)){if(delete k[D],U=U||H==="toggle",H===(Yt?"hide":"show"))if(H==="show"&&Gt&&Gt[D]!==void 0)Yt=!0;else continue;Xe[D]=Gt&&Gt[D]||g.style(m,D)}if(se=!g.isEmptyObject(k),!(!se&&g.isEmptyObject(Xe))){De&&m.nodeType===1&&(P.overflow=[bt.overflow,bt.overflowX,bt.overflowY],Ee=Gt&&Gt.display,Ee==null&&(Ee=ct.get(m,"display")),Pe=g.css(m,"display"),Pe==="none"&&(Ee?Pe=Ee:(ea([m],!0),Ee=m.style.display||Ee,Pe=g.css(m,"display"),ea([m]))),(Pe==="inline"||Pe==="inline-block"&&Ee!=null)&&g.css(m,"float")==="none"&&(se||(Ae.done(function(){bt.display=Ee}),Ee==null&&(Pe=bt.display,Ee=Pe==="none"?"":Pe)),bt.display="inline-block")),P.overflow&&(bt.overflow="hidden",Ae.always(function(){bt.overflow=P.overflow[0],bt.overflowX=P.overflow[1],bt.overflowY=P.overflow[2]})),se=!1;for(D in Xe)se||(Gt?"hidden"in Gt&&(Yt=Gt.hidden):Gt=ct.access(m,"fxshow",{display:Ee}),U&&(Gt.hidden=!Yt),Yt&&ea([m],!0),Ae.done(function(){Yt||ea([m]),ct.remove(m,"fxshow");for(D in Xe)g.style(m,D,Xe[D])})),se=et(Yt?Gt[D]:0,D,Ae),D in Gt||(Gt[D]=se.start,Yt&&(se.end=se.start,se.start=0))}}function xt(m,k){var P,D,H,U,q;for(P in m)if(D=Rt(P),H=k[D],U=m[P],Array.isArray(U)&&(H=U[1],U=m[P]=U[0]),P!==D&&(m[D]=U,delete m[P]),q=g.cssHooks[D],q&&"expand"in q){U=q.expand(U),delete m[D];for(P in U)P in m||(m[P]=U[P],k[P]=H)}else k[D]=H}function Lt(m,k,P){var D,H,U=0,q=Lt.prefilters.length,ue=g.Deferred().always(function(){delete se.elem}),se=function(){if(H)return!1;for(var De=ee||Ye(),Ae=Math.max(0,Ee.startTime+Ee.duration-De),Xe=Ae/Ee.duration||0,bt=1-Xe,Yt=0,Gt=Ee.tweens.length;Yt<Gt;Yt++)Ee.tweens[Yt].run(bt);return ue.notifyWith(m,[Ee,bt,Ae]),bt<1&&Gt?Ae:(Gt||ue.notifyWith(m,[Ee,1,0]),ue.resolveWith(m,[Ee]),!1)},Ee=ue.promise({elem:m,props:g.extend({},k),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},P),originalProperties:k,originalOptions:P,startTime:ee||Ye(),duration:P.duration,tweens:[],createTween:function(De,Ae){var Xe=g.Tween(m,Ee.opts,De,Ae,Ee.opts.specialEasing[De]||Ee.opts.easing);return Ee.tweens.push(Xe),Xe},stop:function(De){var Ae=0,Xe=De?Ee.tweens.length:0;if(H)return this;for(H=!0;Ae<Xe;Ae++)Ee.tweens[Ae].run(1);return De?(ue.notifyWith(m,[Ee,1,0]),ue.resolveWith(m,[Ee,De])):ue.rejectWith(m,[Ee,De]),this}}),Pe=Ee.props;for(xt(Pe,Ee.opts.specialEasing);U<q;U++)if(D=Lt.prefilters[U].call(Ee,m,Pe,Ee.opts),D)return b(D.stop)&&(g._queueHooks(Ee.elem,Ee.opts.queue).stop=D.stop.bind(D)),D;return g.map(Pe,et,Ee),b(Ee.opts.start)&&Ee.opts.start.call(m,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),g.fx.timer(g.extend(se,{elem:m,anim:Ee,queue:Ee.opts.queue})),Ee}g.Animation=g.extend(Lt,{tweeners:{"*":[function(m,k){var P=this.createTween(m,k);return lf(P.elem,m,fo.exec(k),P),P}]},tweener:function(m,k){b(m)?(k=m,m=["*"]):m=m.match(N);for(var P,D=0,H=m.length;D<H;D++)P=m[D],Lt.tweeners[P]=Lt.tweeners[P]||[],Lt.tweeners[P].unshift(k)},prefilters:[ot],prefilter:function(m,k){k?Lt.prefilters.unshift(m):Lt.prefilters.push(m)}}),g.speed=function(m,k,P){var D=m&&typeof m=="object"?g.extend({},m):{complete:P||!P&&k||b(m)&&m,duration:m,easing:P&&k||k&&!b(k)&&k};return g.fx.off?D.duration=0:typeof D.duration!="number"&&(D.duration in g.fx.speeds?D.duration=g.fx.speeds[D.duration]:D.duration=g.fx.speeds._default),(D.queue==null||D.queue===!0)&&(D.queue="fx"),D.old=D.complete,D.complete=function(){b(D.old)&&D.old.call(this),D.queue&&g.dequeue(this,D.queue)},D},g.fn.extend({fadeTo:function(m,k,P,D){return this.filter(po).css("opacity",0).show().end().animate({opacity:k},m,P,D)},animate:function(m,k,P,D){var H=g.isEmptyObject(m),U=g.speed(k,P,D),q=function(){var ue=Lt(this,g.extend({},m),U);(H||ct.get(this,"finish"))&&ue.stop(!0)};return q.finish=q,H||U.queue===!1?this.each(q):this.queue(U.queue,q)},stop:function(m,k,P){var D=function(H){var U=H.stop;delete H.stop,U(P)};return typeof m!="string"&&(P=k,k=m,m=void 0),k&&this.queue(m||"fx",[]),this.each(function(){var H=!0,U=m!=null&&m+"queueHooks",q=g.timers,ue=ct.get(this);if(U)ue[U]&&ue[U].stop&&D(ue[U]);else for(U in ue)ue[U]&&ue[U].stop&&be.test(U)&&D(ue[U]);for(U=q.length;U--;)q[U].elem===this&&(m==null||q[U].queue===m)&&(q[U].anim.stop(P),H=!1,q.splice(U,1));(H||!P)&&g.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var k,P=ct.get(this),D=P[m+"queue"],H=P[m+"queueHooks"],U=g.timers,q=D?D.length:0;for(P.finish=!0,g.queue(this,m,[]),H&&H.stop&&H.stop.call(this,!0),k=U.length;k--;)U[k].elem===this&&U[k].queue===m&&(U[k].anim.stop(!0),U.splice(k,1));for(k=0;k<q;k++)D[k]&&D[k].finish&&D[k].finish.call(this);delete P.finish})}}),g.each(["toggle","show","hide"],function(m,k){var P=g.fn[k];g.fn[k]=function(D,H,U){return D==null||typeof D=="boolean"?P.apply(this,arguments):this.animate(Je(k,!0),D,H,U)}}),g.each({slideDown:Je("show"),slideUp:Je("hide"),slideToggle:Je("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,k){g.fn[m]=function(P,D,H){return this.animate(k,P,D,H)}}),g.timers=[],g.fx.tick=function(){var m,k=0,P=g.timers;for(ee=Date.now();k<P.length;k++)m=P[k],!m()&&P[k]===m&&P.splice(k--,1);P.length||g.fx.stop(),ee=void 0},g.fx.timer=function(m){g.timers.push(m),g.fx.start()},g.fx.interval=13,g.fx.start=function(){$e||($e=!0,Fe())},g.fx.stop=function(){$e=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(m,k){return m=g.fx&&g.fx.speeds[m]||m,k=k||"fx",this.queue(k,function(P,D){var H=r.setTimeout(P,m);D.stop=function(){r.clearTimeout(H)}})},function(){var m=_.createElement("input"),k=_.createElement("select"),P=k.appendChild(_.createElement("option"));m.type="checkbox",w.checkOn=m.value!=="",w.optSelected=P.selected,m=_.createElement("input"),m.value="t",m.type="radio",w.radioValue=m.value==="t"}();var mr,lr=g.expr.attrHandle;g.fn.extend({attr:function(m,k){return st(this,g.attr,m,k,arguments.length>1)},removeAttr:function(m){return this.each(function(){g.removeAttr(this,m)})}}),g.extend({attr:function(m,k,P){var D,H,U=m.nodeType;if(!(U===3||U===8||U===2)){if(typeof m.getAttribute>"u")return g.prop(m,k,P);if((U!==1||!g.isXMLDoc(m))&&(H=g.attrHooks[k.toLowerCase()]||(g.expr.match.bool.test(k)?mr:void 0)),P!==void 0){if(P===null){g.removeAttr(m,k);return}return H&&"set"in H&&(D=H.set(m,P,k))!==void 0?D:(m.setAttribute(k,P+""),P)}return H&&"get"in H&&(D=H.get(m,k))!==null?D:(D=g.find.attr(m,k),D??void 0)}},attrHooks:{type:{set:function(m,k){if(!w.radioValue&&k==="radio"&&B(m,"input")){var P=m.value;return m.setAttribute("type",k),P&&(m.value=P),k}}}},removeAttr:function(m,k){var P,D=0,H=k&&k.match(N);if(H&&m.nodeType===1)for(;P=H[D++];)m.removeAttribute(P)}}),mr={set:function(m,k,P){return k===!1?g.removeAttr(m,P):m.setAttribute(P,P),P}},g.each(g.expr.match.bool.source.match(/\w+/g),function(m,k){var P=lr[k]||g.find.attr;lr[k]=function(D,H,U){var q,ue,se=H.toLowerCase();return U||(ue=lr[se],lr[se]=q,q=P(D,H,U)!=null?se:null,lr[se]=ue),q}});var Gr=/^(?:input|select|textarea|button)$/i,Cr=/^(?:a|area)$/i;g.fn.extend({prop:function(m,k){return st(this,g.prop,m,k,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[g.propFix[m]||m]})}}),g.extend({prop:function(m,k,P){var D,H,U=m.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!g.isXMLDoc(m))&&(k=g.propFix[k]||k,H=g.propHooks[k]),P!==void 0?H&&"set"in H&&(D=H.set(m,P,k))!==void 0?D:m[k]=P:H&&"get"in H&&(D=H.get(m,k))!==null?D:m[k]},propHooks:{tabIndex:{get:function(m){var k=g.find.attr(m,"tabindex");return k?parseInt(k,10):Gr.test(m.nodeName)||Cr.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(g.propHooks.selected={get:function(m){var k=m.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(m){var k=m.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function un(m){var k=m.match(N)||[];return k.join(" ")}function Di(m){return m.getAttribute&&m.getAttribute("class")||""}function Tl(m){return Array.isArray(m)?m:typeof m=="string"?m.match(N)||[]:[]}g.fn.extend({addClass:function(m){var k,P,D,H,U,q;return b(m)?this.each(function(ue){g(this).addClass(m.call(this,ue,Di(this)))}):(k=Tl(m),k.length?this.each(function(){if(D=Di(this),P=this.nodeType===1&&" "+un(D)+" ",P){for(U=0;U<k.length;U++)H=k[U],P.indexOf(" "+H+" ")<0&&(P+=H+" ");q=un(P),D!==q&&this.setAttribute("class",q)}}):this)},removeClass:function(m){var k,P,D,H,U,q;return b(m)?this.each(function(ue){g(this).removeClass(m.call(this,ue,Di(this)))}):arguments.length?(k=Tl(m),k.length?this.each(function(){if(D=Di(this),P=this.nodeType===1&&" "+un(D)+" ",P){for(U=0;U<k.length;U++)for(H=k[U];P.indexOf(" "+H+" ")>-1;)P=P.replace(" "+H+" "," ");q=un(P),D!==q&&this.setAttribute("class",q)}}):this):this.attr("class","")},toggleClass:function(m,k){var P,D,H,U,q=typeof m,ue=q==="string"||Array.isArray(m);return b(m)?this.each(function(se){g(this).toggleClass(m.call(this,se,Di(this),k),k)}):typeof k=="boolean"&&ue?k?this.addClass(m):this.removeClass(m):(P=Tl(m),this.each(function(){if(ue)for(U=g(this),H=0;H<P.length;H++)D=P[H],U.hasClass(D)?U.removeClass(D):U.addClass(D);else(m===void 0||q==="boolean")&&(D=Di(this),D&&ct.set(this,"__className__",D),this.setAttribute&&this.setAttribute("class",D||m===!1?"":ct.get(this,"__className__")||""))}))},hasClass:function(m){var k,P,D=0;for(k=" "+m+" ";P=this[D++];)if(P.nodeType===1&&(" "+un(Di(P))+" ").indexOf(k)>-1)return!0;return!1}});var yd=/\r/g;g.fn.extend({val:function(m){var k,P,D,H=this[0];return arguments.length?(D=b(m),this.each(function(U){var q;this.nodeType===1&&(D?q=m.call(this,U,g(this).val()):q=m,q==null?q="":typeof q=="number"?q+="":Array.isArray(q)&&(q=g.map(q,function(ue){return ue==null?"":ue+""})),k=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,q,"value")===void 0)&&(this.value=q))})):H?(k=g.valHooks[H.type]||g.valHooks[H.nodeName.toLowerCase()],k&&"get"in k&&(P=k.get(H,"value"))!==void 0?P:(P=H.value,typeof P=="string"?P.replace(yd,""):P??"")):void 0}}),g.extend({valHooks:{option:{get:function(m){var k=g.find.attr(m,"value");return k??un(g.text(m))}},select:{get:function(m){var k,P,D,H=m.options,U=m.selectedIndex,q=m.type==="select-one",ue=q?null:[],se=q?U+1:H.length;for(U<0?D=se:D=q?U:0;D<se;D++)if(P=H[D],(P.selected||D===U)&&!P.disabled&&(!P.parentNode.disabled||!B(P.parentNode,"optgroup"))){if(k=g(P).val(),q)return k;ue.push(k)}return ue},set:function(m,k){for(var P,D,H=m.options,U=g.makeArray(k),q=H.length;q--;)D=H[q],(D.selected=g.inArray(g.valHooks.option.get(D),U)>-1)&&(P=!0);return P||(m.selectedIndex=-1),U}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(m,k){if(Array.isArray(k))return m.checked=g.inArray(g(m).val(),k)>-1}},w.checkOn||(g.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})});var yo=r.location,md={guid:Date.now()},Mu=/\?/;g.parseXML=function(m){var k,P;if(!m||typeof m!="string")return null;try{k=new r.DOMParser().parseFromString(m,"text/xml")}catch{}return P=k&&k.getElementsByTagName("parsererror")[0],(!k||P)&&g.error("Invalid XML: "+(P?g.map(P.childNodes,function(D){return D.textContent}).join(`
`):m)),k};var bd=/^(?:focusinfocus|focusoutblur)$/,pf=function(m){m.stopPropagation()};g.extend(g.event,{trigger:function(m,k,P,D){var H,U,q,ue,se,Ee,Pe,De,Ae=[P||_],Xe=c.call(m,"type")?m.type:m,bt=c.call(m,"namespace")?m.namespace.split("."):[];if(U=De=q=P=P||_,!(P.nodeType===3||P.nodeType===8)&&!bd.test(Xe+g.event.triggered)&&(Xe.indexOf(".")>-1&&(bt=Xe.split("."),Xe=bt.shift(),bt.sort()),se=Xe.indexOf(":")<0&&"on"+Xe,m=m[g.expando]?m:new g.Event(Xe,typeof m=="object"&&m),m.isTrigger=D?2:3,m.namespace=bt.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=P),k=k==null?[m]:g.makeArray(k,[m]),Pe=g.event.special[Xe]||{},!(!D&&Pe.trigger&&Pe.trigger.apply(P,k)===!1))){if(!D&&!Pe.noBubble&&!T(P)){for(ue=Pe.delegateType||Xe,bd.test(ue+Xe)||(U=U.parentNode);U;U=U.parentNode)Ae.push(U),q=U;q===(P.ownerDocument||_)&&Ae.push(q.defaultView||q.parentWindow||r)}for(H=0;(U=Ae[H++])&&!m.isPropagationStopped();)De=U,m.type=H>1?ue:Pe.bindType||Xe,Ee=(ct.get(U,"events")||Object.create(null))[m.type]&&ct.get(U,"handle"),Ee&&Ee.apply(U,k),Ee=se&&U[se],Ee&&Ee.apply&&dr(U)&&(m.result=Ee.apply(U,k),m.result===!1&&m.preventDefault());return m.type=Xe,!D&&!m.isDefaultPrevented()&&(!Pe._default||Pe._default.apply(Ae.pop(),k)===!1)&&dr(P)&&se&&b(P[Xe])&&!T(P)&&(q=P[se],q&&(P[se]=null),g.event.triggered=Xe,m.isPropagationStopped()&&De.addEventListener(Xe,pf),P[Xe](),m.isPropagationStopped()&&De.removeEventListener(Xe,pf),g.event.triggered=void 0,q&&(P[se]=q)),m.result}},simulate:function(m,k,P){var D=g.extend(new g.Event,P,{type:m,isSimulated:!0});g.event.trigger(D,null,k)}}),g.fn.extend({trigger:function(m,k){return this.each(function(){g.event.trigger(m,k,this)})},triggerHandler:function(m,k){var P=this[0];if(P)return g.event.trigger(m,k,P,!0)}});var Zx=/\[\]$/,ag=/\r?\n/g,Xx=/^(?:submit|button|image|reset|file)$/i,Jx=/^(?:input|select|textarea|keygen)/i;function lg(m,k,P,D){var H;if(Array.isArray(k))g.each(k,function(U,q){P||Zx.test(m)?D(m,q):lg(m+"["+(typeof q=="object"&&q!=null?U:"")+"]",q,P,D)});else if(!P&&I(k)==="object")for(H in k)lg(m+"["+H+"]",k[H],P,D);else D(m,k)}g.param=function(m,k){var P,D=[],H=function(U,q){var ue=b(q)?q():q;D[D.length]=encodeURIComponent(U)+"="+encodeURIComponent(ue??"")};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!g.isPlainObject(m))g.each(m,function(){H(this.name,this.value)});else for(P in m)lg(P,m[P],k,H);return D.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=g.prop(this,"elements");return m?g.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!g(this).is(":disabled")&&Jx.test(this.nodeName)&&!Xx.test(m)&&(this.checked||!Ma.test(m))}).map(function(m,k){var P=g(this).val();return P==null?null:Array.isArray(P)?g.map(P,function(D){return{name:k.name,value:D.replace(ag,`\r
`)}}):{name:k.name,value:P.replace(ag,`\r
`)}}).get()}});var Qx=/%20/g,ug=/#.*$/,e2=/([?&])_=[^&]*/,t2=/^(.*?):[ \t]*([^\r\n]*)$/mg,r2=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,n2=/^(?:GET|HEAD)$/,i2=/^\/\//,jr={},Pr={},Hb="*/".concat("*"),cg=_.createElement("a");cg.href=yo.href;function Ub(m){return function(k,P){typeof k!="string"&&(P=k,k="*");var D,H=0,U=k.toLowerCase().match(N)||[];if(b(P))for(;D=U[H++];)D[0]==="+"?(D=D.slice(1)||"*",(m[D]=m[D]||[]).unshift(P)):(m[D]=m[D]||[]).push(P)}}function Wb(m,k,P,D){var H={},U=m===Pr;function q(ue){var se;return H[ue]=!0,g.each(m[ue]||[],function(Ee,Pe){var De=Pe(k,P,D);if(typeof De=="string"&&!U&&!H[De])return k.dataTypes.unshift(De),q(De),!1;if(U)return!(se=De)}),se}return q(k.dataTypes[0])||!H["*"]&&q("*")}function fg(m,k){var P,D,H=g.ajaxSettings.flatOptions||{};for(P in k)k[P]!==void 0&&((H[P]?m:D||(D={}))[P]=k[P]);return D&&g.extend(!0,m,D),m}function s2(m,k,P){for(var D,H,U,q,ue=m.contents,se=m.dataTypes;se[0]==="*";)se.shift(),D===void 0&&(D=m.mimeType||k.getResponseHeader("Content-Type"));if(D){for(H in ue)if(ue[H]&&ue[H].test(D)){se.unshift(H);break}}if(se[0]in P)U=se[0];else{for(H in P){if(!se[0]||m.converters[H+" "+se[0]]){U=H;break}q||(q=H)}U=U||q}if(U)return U!==se[0]&&se.unshift(U),P[U]}function qb(m,k,P,D){var H,U,q,ue,se,Ee={},Pe=m.dataTypes.slice();if(Pe[1])for(q in m.converters)Ee[q.toLowerCase()]=m.converters[q];for(U=Pe.shift();U;)if(m.responseFields[U]&&(P[m.responseFields[U]]=k),!se&&D&&m.dataFilter&&(k=m.dataFilter(k,m.dataType)),se=U,U=Pe.shift(),U){if(U==="*")U=se;else if(se!=="*"&&se!==U){if(q=Ee[se+" "+U]||Ee["* "+U],!q){for(H in Ee)if(ue=H.split(" "),ue[1]===U&&(q=Ee[se+" "+ue[0]]||Ee["* "+ue[0]],q)){q===!0?q=Ee[H]:Ee[H]!==!0&&(U=ue[0],Pe.unshift(ue[1]));break}}if(q!==!0)if(q&&m.throws)k=q(k);else try{k=q(k)}catch(De){return{state:"parsererror",error:q?De:"No conversion from "+se+" to "+U}}}}return{state:"success",data:k}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yo.href,type:"GET",isLocal:r2.test(yo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,k){return k?fg(fg(m,g.ajaxSettings),k):fg(g.ajaxSettings,m)},ajaxPrefilter:Ub(jr),ajaxTransport:Ub(Pr),ajax:function(m,k){typeof m=="object"&&(k=m,m=void 0),k=k||{};var P,D,H,U,q,ue,se,Ee,Pe,De,Ae=g.ajaxSetup({},k),Xe=Ae.context||Ae,bt=Ae.context&&(Xe.nodeType||Xe.jquery)?g(Xe):g.event,Yt=g.Deferred(),Gt=g.Callbacks("once memory"),Yn=Ae.statusCode||{},fn={},mo={},bo="canceled",pr={readyState:0,getResponseHeader:function(vr){var Mr;if(se){if(!U)for(U={};Mr=t2.exec(H);)U[Mr[1].toLowerCase()+" "]=(U[Mr[1].toLowerCase()+" "]||[]).concat(Mr[2]);Mr=U[vr.toLowerCase()+" "]}return Mr==null?null:Mr.join(", ")},getAllResponseHeaders:function(){return se?H:null},setRequestHeader:function(vr,Mr){return se==null&&(vr=mo[vr.toLowerCase()]=mo[vr.toLowerCase()]||vr,fn[vr]=Mr),this},overrideMimeType:function(vr){return se==null&&(Ae.mimeType=vr),this},statusCode:function(vr){var Mr;if(vr)if(se)pr.always(vr[pr.status]);else for(Mr in vr)Yn[Mr]=[Yn[Mr],vr[Mr]];return this},abort:function(vr){var Mr=vr||bo;return P&&P.abort(Mr),Ha(0,Mr),this}};if(Yt.promise(pr),Ae.url=((m||Ae.url||yo.href)+"").replace(i2,yo.protocol+"//"),Ae.type=k.method||k.type||Ae.method||Ae.type,Ae.dataTypes=(Ae.dataType||"*").toLowerCase().match(N)||[""],Ae.crossDomain==null){ue=_.createElement("a");try{ue.href=Ae.url,ue.href=ue.href,Ae.crossDomain=cg.protocol+"//"+cg.host!=ue.protocol+"//"+ue.host}catch{Ae.crossDomain=!0}}if(Ae.data&&Ae.processData&&typeof Ae.data!="string"&&(Ae.data=g.param(Ae.data,Ae.traditional)),Wb(jr,Ae,k,pr),se)return pr;Ee=g.event&&Ae.global,Ee&&g.active++===0&&g.event.trigger("ajaxStart"),Ae.type=Ae.type.toUpperCase(),Ae.hasContent=!n2.test(Ae.type),D=Ae.url.replace(ug,""),Ae.hasContent?Ae.data&&Ae.processData&&(Ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ae.data=Ae.data.replace(Qx,"+")):(De=Ae.url.slice(D.length),Ae.data&&(Ae.processData||typeof Ae.data=="string")&&(D+=(Mu.test(D)?"&":"?")+Ae.data,delete Ae.data),Ae.cache===!1&&(D=D.replace(e2,"$1"),De=(Mu.test(D)?"&":"?")+"_="+md.guid+++De),Ae.url=D+De),Ae.ifModified&&(g.lastModified[D]&&pr.setRequestHeader("If-Modified-Since",g.lastModified[D]),g.etag[D]&&pr.setRequestHeader("If-None-Match",g.etag[D])),(Ae.data&&Ae.hasContent&&Ae.contentType!==!1||k.contentType)&&pr.setRequestHeader("Content-Type",Ae.contentType),pr.setRequestHeader("Accept",Ae.dataTypes[0]&&Ae.accepts[Ae.dataTypes[0]]?Ae.accepts[Ae.dataTypes[0]]+(Ae.dataTypes[0]!=="*"?", "+Hb+"; q=0.01":""):Ae.accepts["*"]);for(Pe in Ae.headers)pr.setRequestHeader(Pe,Ae.headers[Pe]);if(Ae.beforeSend&&(Ae.beforeSend.call(Xe,pr,Ae)===!1||se))return pr.abort();if(bo="abort",Gt.add(Ae.complete),pr.done(Ae.success),pr.fail(Ae.error),P=Wb(Pr,Ae,k,pr),!P)Ha(-1,"No Transport");else{if(pr.readyState=1,Ee&&bt.trigger("ajaxSend",[pr,Ae]),se)return pr;Ae.async&&Ae.timeout>0&&(q=r.setTimeout(function(){pr.abort("timeout")},Ae.timeout));try{se=!1,P.send(fn,Ha)}catch(vr){if(se)throw vr;Ha(-1,vr)}}function Ha(vr,Mr,vf,$d){var Ls,Il,gs,na,Ua,Bi=Mr;se||(se=!0,q&&r.clearTimeout(q),P=void 0,H=$d||"",pr.readyState=vr>0?4:0,Ls=vr>=200&&vr<300||vr===304,vf&&(na=s2(Ae,pr,vf)),!Ls&&g.inArray("script",Ae.dataTypes)>-1&&g.inArray("json",Ae.dataTypes)<0&&(Ae.converters["text script"]=function(){}),na=qb(Ae,na,pr,Ls),Ls?(Ae.ifModified&&(Ua=pr.getResponseHeader("Last-Modified"),Ua&&(g.lastModified[D]=Ua),Ua=pr.getResponseHeader("etag"),Ua&&(g.etag[D]=Ua)),vr===204||Ae.type==="HEAD"?Bi="nocontent":vr===304?Bi="notmodified":(Bi=na.state,Il=na.data,gs=na.error,Ls=!gs)):(gs=Bi,(vr||!Bi)&&(Bi="error",vr<0&&(vr=0))),pr.status=vr,pr.statusText=(Mr||Bi)+"",Ls?Yt.resolveWith(Xe,[Il,Bi,pr]):Yt.rejectWith(Xe,[pr,Bi,gs]),pr.statusCode(Yn),Yn=void 0,Ee&&bt.trigger(Ls?"ajaxSuccess":"ajaxError",[pr,Ae,Ls?Il:gs]),Gt.fireWith(Xe,[pr,Bi]),Ee&&(bt.trigger("ajaxComplete",[pr,Ae]),--g.active||g.event.trigger("ajaxStop")))}return pr},getJSON:function(m,k,P){return g.get(m,k,P,"json")},getScript:function(m,k){return g.get(m,void 0,k,"script")}}),g.each(["get","post"],function(m,k){g[k]=function(P,D,H,U){return b(D)&&(U=U||H,H=D,D=void 0),g.ajax(g.extend({url:P,type:k,dataType:U,data:D,success:H},g.isPlainObject(P)&&P))}}),g.ajaxPrefilter(function(m){var k;for(k in m.headers)k.toLowerCase()==="content-type"&&(m.contentType=m.headers[k]||"")}),g._evalUrl=function(m,k,P){return g.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(D){g.globalEval(D,k,P)}})},g.fn.extend({wrapAll:function(m){var k;return this[0]&&(b(m)&&(m=m.call(this[0])),k=g(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(m){return b(m)?this.each(function(k){g(this).wrapInner(m.call(this,k))}):this.each(function(){var k=g(this),P=k.contents();P.length?P.wrapAll(m):k.append(m)})},wrap:function(m){var k=b(m);return this.each(function(P){g(this).wrapAll(k?m.call(this,P):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(m){return!g.expr.pseudos.visible(m)},g.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var o2={0:200,1223:204},cn=g.ajaxSettings.xhr();w.cors=!!cn&&"withCredentials"in cn,w.ajax=cn=!!cn,g.ajaxTransport(function(m){var k,P;if(w.cors||cn&&!m.crossDomain)return{send:function(D,H){var U,q=m.xhr();if(q.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(U in m.xhrFields)q[U]=m.xhrFields[U];m.mimeType&&q.overrideMimeType&&q.overrideMimeType(m.mimeType),!m.crossDomain&&!D["X-Requested-With"]&&(D["X-Requested-With"]="XMLHttpRequest");for(U in D)q.setRequestHeader(U,D[U]);k=function(ue){return function(){k&&(k=P=q.onload=q.onerror=q.onabort=q.ontimeout=q.onreadystatechange=null,ue==="abort"?q.abort():ue==="error"?typeof q.status!="number"?H(0,"error"):H(q.status,q.statusText):H(o2[q.status]||q.status,q.statusText,(q.responseType||"text")!=="text"||typeof q.responseText!="string"?{binary:q.response}:{text:q.responseText},q.getAllResponseHeaders()))}},q.onload=k(),P=q.onerror=q.ontimeout=k("error"),q.onabort!==void 0?q.onabort=P:q.onreadystatechange=function(){q.readyState===4&&r.setTimeout(function(){k&&P()})},k=k("abort");try{q.send(m.hasContent&&m.data||null)}catch(ue){if(k)throw ue}},abort:function(){k&&k()}}}),g.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return g.globalEval(m),m}}}),g.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),g.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var k,P;return{send:function(D,H){k=g("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",P=function(U){k.remove(),P=null,U&&H(U.type==="error"?404:200,U.type)}),_.head.appendChild(k[0])},abort:function(){P&&P()}}}});var wd=[],ra=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=wd.pop()||g.expando+"_"+md.guid++;return this[m]=!0,m}}),g.ajaxPrefilter("json jsonp",function(m,k,P){var D,H,U,q=m.jsonp!==!1&&(ra.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ra.test(m.data)&&"data");if(q||m.dataTypes[0]==="jsonp")return D=m.jsonpCallback=b(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,q?m[q]=m[q].replace(ra,"$1"+D):m.jsonp!==!1&&(m.url+=(Mu.test(m.url)?"&":"?")+m.jsonp+"="+D),m.converters["script json"]=function(){return U||g.error(D+" was not called"),U[0]},m.dataTypes[0]="json",H=r[D],r[D]=function(){U=arguments},P.always(function(){H===void 0?g(r).removeProp(D):r[D]=H,m[D]&&(m.jsonpCallback=k.jsonpCallback,wd.push(D)),U&&b(H)&&H(U[0]),U=H=void 0}),"script"}),w.createHTMLDocument=function(){var m=_.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),g.parseHTML=function(m,k,P){if(typeof m!="string")return[];typeof k=="boolean"&&(P=k,k=!1);var D,H,U;return k||(w.createHTMLDocument?(k=_.implementation.createHTMLDocument(""),D=k.createElement("base"),D.href=_.location.href,k.head.appendChild(D)):k=_),H=Ge.exec(m),U=!P&&[],H?[k.createElement(H[1])]:(H=ad([m],k,U),U&&U.length&&g(U).remove(),g.merge([],H.childNodes))},g.fn.load=function(m,k,P){var D,H,U,q=this,ue=m.indexOf(" ");return ue>-1&&(D=un(m.slice(ue)),m=m.slice(0,ue)),b(k)?(P=k,k=void 0):k&&typeof k=="object"&&(H="POST"),q.length>0&&g.ajax({url:m,type:H||"GET",dataType:"html",data:k}).done(function(se){U=arguments,q.html(D?g("<div>").append(g.parseHTML(se)).find(D):se)}).always(P&&function(se,Ee){q.each(function(){P.apply(this,U||[se.responseText,Ee,se])})}),this},g.expr.pseudos.animated=function(m){return g.grep(g.timers,function(k){return m===k.elem}).length},g.offset={setOffset:function(m,k,P){var D,H,U,q,ue,se,Ee,Pe=g.css(m,"position"),De=g(m),Ae={};Pe==="static"&&(m.style.position="relative"),ue=De.offset(),U=g.css(m,"top"),se=g.css(m,"left"),Ee=(Pe==="absolute"||Pe==="fixed")&&(U+se).indexOf("auto")>-1,Ee?(D=De.position(),q=D.top,H=D.left):(q=parseFloat(U)||0,H=parseFloat(se)||0),b(k)&&(k=k.call(m,P,g.extend({},ue))),k.top!=null&&(Ae.top=k.top-ue.top+q),k.left!=null&&(Ae.left=k.left-ue.left+H),"using"in k?k.using.call(m,Ae):De.css(Ae)}},g.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(H){g.offset.setOffset(this,m,H)});var k,P,D=this[0];if(D)return D.getClientRects().length?(k=D.getBoundingClientRect(),P=D.ownerDocument.defaultView,{top:k.top+P.pageYOffset,left:k.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var m,k,P,D=this[0],H={top:0,left:0};if(g.css(D,"position")==="fixed")k=D.getBoundingClientRect();else{for(k=this.offset(),P=D.ownerDocument,m=D.offsetParent||P.documentElement;m&&(m===P.body||m===P.documentElement)&&g.css(m,"position")==="static";)m=m.parentNode;m&&m!==D&&m.nodeType===1&&(H=g(m).offset(),H.top+=g.css(m,"borderTopWidth",!0),H.left+=g.css(m,"borderLeftWidth",!0))}return{top:k.top-H.top-g.css(D,"marginTop",!0),left:k.left-H.left-g.css(D,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&g.css(m,"position")==="static";)m=m.offsetParent;return m||Vi})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,k){var P=k==="pageYOffset";g.fn[m]=function(D){return st(this,function(H,U,q){var ue;if(T(H)?ue=H:H.nodeType===9&&(ue=H.defaultView),q===void 0)return ue?ue[k]:H[U];ue?ue.scrollTo(P?ue.pageXOffset:q,P?q:ue.pageYOffset):H[U]=q},m,D,arguments.length)}}),g.each(["top","left"],function(m,k){g.cssHooks[k]=Ms(w.pixelPosition,function(P,D){if(D)return D=ja(P,k),cf.test(D)?g(P).position()[k]+"px":D})}),g.each({Height:"height",Width:"width"},function(m,k){g.each({padding:"inner"+m,content:k,"":"outer"+m},function(P,D){g.fn[D]=function(H,U){var q=arguments.length&&(P||typeof H!="boolean"),ue=P||(H===!0||U===!0?"margin":"border");return st(this,function(se,Ee,Pe){var De;return T(se)?D.indexOf("outer")===0?se["inner"+m]:se.document.documentElement["client"+m]:se.nodeType===9?(De=se.documentElement,Math.max(se.body["scroll"+m],De["scroll"+m],se.body["offset"+m],De["offset"+m],De["client"+m])):Pe===void 0?g.css(se,Ee,ue):g.style(se,Ee,Pe,ue)},k,q?H:void 0,q)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,k){g.fn[k]=function(P){return this.on(k,P)}}),g.fn.extend({bind:function(m,k,P){return this.on(m,null,k,P)},unbind:function(m,k){return this.off(m,null,k)},delegate:function(m,k,P,D){return this.on(k,m,P,D)},undelegate:function(m,k,P){return arguments.length===1?this.off(m,"**"):this.off(k,m||"**",P)},hover:function(m,k){return this.mouseenter(m).mouseleave(k||m)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,k){g.fn[k]=function(P,D){return arguments.length>0?this.on(k,null,P,D):this.trigger(k)}});var Kb=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(m,k){var P,D,H;if(typeof k=="string"&&(P=m[k],k=m,m=P),!!b(m))return D=s.call(arguments,2),H=function(){return m.apply(k||this,D.concat(s.call(arguments)))},H.guid=m.guid=m.guid||g.guid++,H},g.holdReady=function(m){m?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=B,g.isFunction=b,g.isWindow=T,g.camelCase=Rt,g.type=I,g.now=Date.now,g.isNumeric=function(m){var k=g.type(m);return(k==="number"||k==="string")&&!isNaN(m-parseFloat(m))},g.trim=function(m){return m==null?"":(m+"").replace(Kb,"$1")};var hg=r.jQuery,vs=r.$;return g.noConflict=function(m){return r.$===g&&(r.$=vs),m&&r.jQuery===g&&(r.jQuery=hg),g},typeof t>"u"&&(r.jQuery=r.$=g),g})})(lW);var tve=lW.exports;const Jt=io(tve);function rve(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Tm=rve,nve=typeof On=="object"&&On&&On.Object===Object&&On,uW=nve,ive=uW,sve=typeof self=="object"&&self&&self.Object===Object&&self,ove=ive||sve||Function("return this")(),wl=ove,ave=wl,lve=function(){return ave.Date.now()},uve=lve,cve=/\s/;function fve(e){for(var r=e.length;r--&&cve.test(e.charAt(r)););return r}var hve=fve,dve=hve,pve=/^\s+/;function vve(e){return e&&e.slice(0,dve(e)+1).replace(pve,"")}var gve=vve,yve=wl,mve=yve.Symbol,Q3=mve,TB=Q3,cW=Object.prototype,bve=cW.hasOwnProperty,wve=cW.toString,Rg=TB?TB.toStringTag:void 0;function $ve(e){var r=bve.call(e,Rg),t=e[Rg];try{e[Rg]=void 0;var n=!0}catch{}var i=wve.call(e);return n&&(r?e[Rg]=t:delete e[Rg]),i}var _ve=$ve,xve=Object.prototype,Eve=xve.toString;function Sve(e){return Eve.call(e)}var kve=Sve,IB=Q3,Tve=_ve,Ive=kve,Ave="[object Null]",Ove="[object Undefined]",AB=IB?IB.toStringTag:void 0;function Cve(e){return e==null?e===void 0?Ove:Ave:AB&&AB in Object(e)?Tve(e):Ive(e)}var Im=Cve;function Pve(e){return e!=null&&typeof e=="object"}var Am=Pve,Nve=Im,Rve=Am,Dve="[object Symbol]";function Bve(e){return typeof e=="symbol"||Rve(e)&&Nve(e)==Dve}var Mve=Bve,Lve=gve,OB=Tm,Fve=Mve,CB=0/0,jve=/^[-+]0x[0-9a-f]+$/i,zve=/^0b[01]+$/i,Hve=/^0o[0-7]+$/i,Uve=parseInt;function Wve(e){if(typeof e=="number")return e;if(Fve(e))return CB;if(OB(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=OB(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Lve(e);var t=zve.test(e);return t||Hve.test(e)?Uve(e.slice(2),t?2:8):jve.test(e)?CB:+e}var qve=Wve,Kve=Tm,wE=uve,PB=qve,Vve="Expected a function",Gve=Math.max,Yve=Math.min;function Zve(e,r,t){var n,i,s,o,a,l,u=0,f=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(Vve);r=PB(r)||0,Kve(t)&&(f=!!t.leading,c="maxWait"in t,s=c?Gve(PB(t.maxWait)||0,r):s,d="trailing"in t?!!t.trailing:d);function y(C){var g=n,M=i;return n=i=void 0,u=C,o=e.apply(M,g),o}function w(C){return u=C,a=setTimeout(_,r),f?y(C):o}function b(C){var g=C-l,M=C-u,B=r-g;return c?Yve(B,s-M):B}function T(C){var g=C-l,M=C-u;return l===void 0||g>=r||g<0||c&&M>=s}function _(){var C=wE();if(T(C))return A(C);a=setTimeout(_,b(C))}function A(C){return a=void 0,d&&n?y(C):(n=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,n=l=i=a=void 0}function I(){return a===void 0?o:A(wE())}function O(){var C=wE(),g=T(C);if(n=arguments,i=this,l=C,g){if(a===void 0)return w(l);if(c)return clearTimeout(a),a=setTimeout(_,r),y(l)}return a===void 0&&(a=setTimeout(_,r)),o}return O.cancel=x,O.flush=I,O}var Xve=Zve,Jve=Xve,Qve=Tm,ege="Expected a function";function tge(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(ege);return Qve(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),Jve(e,r,{leading:n,maxWait:r,trailing:i})}var rge=tge;const k_=io(rge);var fW={exports:{}},$E={exports:{}},NB;function nge(){return NB||(NB=1,function(e,r){(function(t,n){e.exports=n()})(On,function(){return function(){function t(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},t.prototype.loadDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.loadDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){if(typeof s=="function"){if(l.id===0){s(null);return}s(l.val)}else console.log(l.val)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(i,s,o){var a=this.app,l=this;function u(f){f&&f.success===!0?o(null):o(new Error("Error saving database")),l.options.closeAfterSave&&l.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(f){l.saveDatabase(i,s,u)});return}this.catalog.setAppKey(a,i,s,u)},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.deleteDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){var u=l.id;u!==0?a.catalog.deleteAppKey(u,s):typeof s=="function"&&s({success:!0})})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(o){o.forEach(function(a){a.startsWith(i)&&s.deleteDatabase(a)})})},t.prototype.getDatabaseList=function(i){var s=this.app,o=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(a){o.catalog=a,o.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(a){for(var l=[],u=0;u<a.length;u++)l.push(a[u].key);typeof i=="function"?i(l):l.forEach(function(f){console.log(f)})})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(o){s.catalog=o,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(o){for(var a=[],l,u,f,c,d,y=0;y<o.length;y++)l=o[y],f=l.app||"",c=l.key||"",d=l.val||"",u=f.length*2+c.length*2+d.length+1,a.push({app:l.app,key:l.key,size:u});typeof i=="function"?i(a):a.forEach(function(w){console.log(w)})})};function n(i){this.db=null,this.initializeLokiCatalog(i)}return n.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),o=this;s.onupgradeneeded=function(a){var l=a.target.result;if(l.objectStoreNames.contains("LokiAKV")&&l.deleteObjectStore("LokiAKV"),!l.objectStoreNames.contains("LokiAKV")){var u=l.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});u.createIndex("app","app",{unique:!1}),u.createIndex("key","key",{unique:!1}),u.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(a){o.db=a.target.result,typeof i=="function"&&i(o)},s.onerror=function(a){throw a}},n.prototype.getAppKey=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.index("appkey"),f=i+","+s,c=u.get(f);c.onsuccess=function(d){return function(y){var w=y.target.result;(w===null||typeof w>"u")&&(w={id:0,success:!1}),typeof d=="function"?d(w):console.log(w)}}(o),c.onerror=function(d){return function(y){if(typeof d=="function")d({id:0,success:!1});else throw y}}(o)},n.prototype.getAppKeyById=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.get(i);u.onsuccess=function(f,c){return function(d){typeof c=="function"?c(d.target.result,f):console.log(d.target.result)}}(o,s)},n.prototype.setAppKey=function(i,s,o,a){var l=this.db.transaction(["LokiAKV"],"readwrite"),u=l.objectStore("LokiAKV"),f=u.index("appkey"),c=i+","+s,d=f.get(c);d.onsuccess=function(y){var w=y.target.result;w==null?w={app:i,key:s,appkey:i+","+s,val:o}:w.val=o;var b=u.put(w);b.onerror=function(T){return function(_){typeof T=="function"?T({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(d.error))}}(a),b.onsuccess=function(T){return function(_){typeof T=="function"&&T({success:!0})}}(a)},d.onerror=function(y){return function(w){typeof y=="function"?y({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(d.error))}}(a)},n.prototype.deleteAppKey=function(i,s){var o=this.db.transaction(["LokiAKV"],"readwrite"),a=o.objectStore("LokiAKV"),l=a.delete(i);l.onsuccess=function(u){return function(f){typeof u=="function"&&u({success:!0})}}(s),l.onerror=function(u){return function(f){typeof u=="function"?u({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(l.error))}}(s)},n.prototype.getAppKeys=function(i,s){var o=this.db.transaction(["LokiAKV"],"readonly"),a=o.objectStore("LokiAKV"),l=a.index("app"),u=IDBKeyRange.only(i),f=l.openCursor(u),c=[];f.onsuccess=function(d,y){return function(w){var b=w.target.result;if(b){var T=b.value;d.push(T),b.continue()}else typeof y=="function"?y(d):console.log(d)}}(c,s),f.onerror=function(d){return function(y){typeof d=="function"?d(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(y))}}(s)},n.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),o=s.objectStore("LokiAKV"),a=o.openCursor(),l=[];a.onsuccess=function(u,f){return function(c){var d=c.target.result;if(d){var y=d.value;u.push(y),d.continue()}else typeof f=="function"?f(u):console.log(u)}}(l,i),a.onerror=function(u){return function(f){typeof u=="function"&&u(null)}}(i)},t}()})}($E)),$E.exports}const ige={},sge=Object.freeze(Object.defineProperty({__proto__:null,default:ige},Symbol.toStringTag,{value:"Module"})),oge=Yc(sge);(function(e,r){(function(t,n){e.exports=n()})(On,function(){return function(){var t=Object.prototype.hasOwnProperty;function n($){var S,N;if(Array.isArray($)){for(N=0;N<$.length;N++)n($[N]);i($)}else if($!==null&&typeof $=="object"){for(S in $)$.hasOwnProperty(S)&&n($[S]);i($)}}function i($){Object.isFrozen($)||Object.freeze($)}function s($){return Object.isFrozen($)?x($,"shallow"):$}var o={copyProperties:function($,S){var N;for(N in $)S[N]=$[N]},resolveTransformObject:function($,S,N){var L,j;if(typeof N!="number"&&(N=0),++N>=10)return $;for(L in $)typeof $[L]=="string"&&$[L].indexOf("[%lktxp]")===0?(j=$[L].substring(8),S.hasOwnProperty(j)&&($[L]=S[j])):typeof $[L]=="object"&&($[L]=o.resolveTransformObject($[L],S,N));return $},resolveTransformParams:function($,S){var N,L,j=[];if(typeof S>"u")return $;for(N=0;N<$.length;N++)L=x($[N],"shallow-recurse-objects"),j.push(o.resolveTransformObject(L,S));return j},getIn:function($,S,N){if($!=null){if(!N)return $[S];if(typeof S=="string"&&(S=S.split(".")),!Array.isArray(S))throw new Error("path must be a string or array. Found "+typeof S);for(var L=0,j=S.length;$!=null&&L<j;)$=$[S[L++]];return L&&L==j?$:void 0}}},a={aeq:l,lt:u,gt:f};function l($,S){var N,L,j,K;if($===S)return!0;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:j=1;break;case null:j=1;break;case!1:j=3;break;case!0:j=4;break;case"":j=5;break;default:j=$===$?9:0;break}switch(S){case void 0:K=1;break;case null:K=1;break;case!1:K=3;break;case!0:K=4;break;case"":K=5;break;default:K=S===S?9:0;break}if(j!==9||K!==9)return j===K}return N=Number($),L=Number(S),N===N||L===L?N===L:(N=$.toString(),L=S.toString(),N==L)}function u($,S,N){var L,j,K,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:K=1;break;case null:K=1;break;case!1:K=3;break;case!0:K=4;break;case"":K=5;break;default:K=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(K!==9||ae!==9)return K===ae?N:K<ae}return L=Number($),j=Number(S),L===L&&j===j?L<j?!0:L>j?!1:N:L===L&&j!==j?!0:j===j&&L!==L?!1:$<S?!0:$>S?!1:$==S?N:(L=$.toString(),j=S.toString(),L<j?!0:L==j?N:!1)}function f($,S,N){var L,j,K,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:K=1;break;case null:K=1;break;case!1:K=3;break;case!0:K=4;break;case"":K=5;break;default:K=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(K!==9||ae!==9)return K===ae?N:K>ae}return L=Number($),j=Number(S),L===L&&j===j?L>j?!0:L<j?!1:N:L===L&&j!==j?!1:j===j&&L!==L||$>S?!0:$<S?!1:$==S?N:(L=$.toString(),j=S.toString(),L>j?!0:L==j?N:!1)}function c($,S,N){return a.aeq($,S)?0:a.lt($,S,!1)?N?1:-1:a.gt($,S,!1)?N?-1:1:0}function d($,S,N){for(var L=0,j,K,ae,ye,Ue,ze=0,st=$.length;ze<st;ze++)if(j=$[ze],K=j[0],~K.indexOf(".")?(Ue=K.split("."),ae=o.getIn(S,Ue,!0),ye=o.getIn(N,Ue,!0)):(ae=S[K],ye=N[K]),L=c(ae,ye,j[1]),L!==0)return L;return 0}function y($,S,N,L,j,K){var ae=K||0,ye=S[ae],Ue=!1,ze;if(typeof $=="object"&&ye in $&&(ze=$[ye]),ae+1>=S.length)Ue=N(ze,L,j);else if(Array.isArray(ze))for(var st=0,wt=ze.length;st<wt&&(Ue=y(ze[st],S,N,L,j,ae+1),Ue!==!0);st+=1);else Ue=y(ze,S,N,L,j,ae+1);return Ue}function w($){return typeof $=="string"||Array.isArray($)?function(S){return $.indexOf(S)!==-1}:typeof $=="object"&&$!==null?function(S){return t.call($,S)}:null}function b($,S,N){for(var L in S)if(t.call(S,L))return T[L]($,S[L],N);return!1}var T={$eq:function($,S){return $===S},$aeq:function($,S){return $==S},$ne:function($,S){return S!==S?$===$:$!==S},$dteq:function($,S){return a.aeq($,S)},$gt:function($,S){return a.gt($,S,!1)},$gte:function($,S){return a.gt($,S,!0)},$lt:function($,S){return a.lt($,S,!1)},$lte:function($,S){return a.lt($,S,!0)},$jgt:function($,S){return $>S},$jgte:function($,S){return $>=S},$jlt:function($,S){return $<S},$jlte:function($,S){return $<=S},$between:function($,S){return $==null?!1:a.gt($,S[0],!0)&&a.lt($,S[1],!0)},$jbetween:function($,S){return $==null?!1:$>=S[0]&&$<=S[1]},$in:function($,S){return S.indexOf($)!==-1},$inSet:function($,S){return S.has($)},$nin:function($,S){return S.indexOf($)===-1},$keyin:function($,S){return $ in S},$nkeyin:function($,S){return!($ in S)},$definedin:function($,S){return S[$]!==void 0},$undefinedin:function($,S){return S[$]===void 0},$regex:function($,S){return S.test($)},$containsString:function($,S){return typeof $=="string"&&$.indexOf(S)!==-1},$containsNone:function($,S){return!T.$containsAny($,S)},$containsAny:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.some(N):N(S):!1},$contains:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.every(N):N(S):!1},$elemMatch:function($,S){return Array.isArray($)?$.some(function(N){return Object.keys(S).every(function(L){var j=S[L];return typeof j=="object"&&j||(j={$eq:j}),L.indexOf(".")!==-1?y(N,L.split("."),b,S[L],N):b(N[L],j,N)})}):!1},$type:function($,S,N){var L=typeof $;return L==="object"&&(Array.isArray($)?L="array":$ instanceof Date&&(L="date")),typeof S!="object"?L===S:b(L,S,N)},$finite:function($,S){return S===isFinite($)},$size:function($,S,N){return Array.isArray($)?typeof S!="object"?$.length===S:b($.length,S,N):!1},$len:function($,S,N){return typeof $=="string"?typeof S!="object"?$.length===S:b($.length,S,N):!1},$where:function($,S){return S($)===!0},$not:function($,S,N){return!b($,S,N)},$and:function($,S,N){for(var L=0,j=S.length;L<j;L+=1)if(!b($,S[L],N))return!1;return!0},$or:function($,S,N){for(var L=0,j=S.length;L<j;L+=1)if(b($,S[L],N))return!0;return!1},$exists:function($,S){return S?$!==void 0:$===void 0}},_=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];_.forEach(function($){var S=T[$];T["$"+$]=function(N,L,j){if(typeof L=="string")return S(N,j[L]);if(typeof L=="function")return S(N,L(j));throw new Error("Invalid argument to $$ matcher")}});var A={$eq:T.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function x($,S){if($==null)return null;var N=S||"parse-stringify",L;switch(N){case"parse-stringify":L=JSON.parse(JSON.stringify($));break;case"jquery-extend-deep":L=jQuery.extend(!0,{},$);break;case"shallow":L=Object.create($.constructor.prototype),Object.keys($).map(function(K){L[K]=$[K]});break;case"shallow-assign":L=Object.create($.constructor.prototype),Object.assign(L,$);break;case"shallow-recurse-objects":L=x($,"shallow");var j=Object.keys($);j.forEach(function(K){typeof $[K]=="object"&&$[K].constructor.name==="Object"?L[K]=x($[K],"shallow-recurse-objects"):Array.isArray($[K])&&(L[K]=I($[K],"shallow-recurse-objects"))});break}return L}function I($,S){if(S=="parse-stringify")return x($,S);for(var N=[],L=0,j=$.length;L<j;L++)N[L]=x($[L],S);return N}function O(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function C(){}C.prototype.events={},C.prototype.asyncListeners=!1,C.prototype.on=function($,S){var N,L=this;return Array.isArray($)?($.forEach(function(j){L.on(j,S)}),S):(N=this.events[$],N||(N=this.events[$]=[]),N.push(S),S)},C.prototype.emit=function($){var S=this,N;if($&&this.events[$])this.events[$].length&&(N=Array.prototype.slice.call(arguments,1),this.events[$].forEach(function(L){S.asyncListeners?setTimeout(function(){L.apply(S,N)},1):L.apply(S,N)}));else throw new Error("No event "+$+" defined")},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function($,S){var N=this;if(Array.isArray($)){$.forEach(function(j){N.removeListener(j,S)});return}if(this.events[$]){var L=this.events[$];L.splice(L.indexOf(S),1)}};function g($,S){this.filename=$||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=S&&S.hasOwnProperty("verbose")?S.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var N=function(){return typeof On<"u"&&(On.android||On.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof On<"u"&&On.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};S&&S.hasOwnProperty("env")?this.ENV=S.env:this.ENV=N(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(S,!0),this.on("init",this.clearChanges)}g.prototype=new C,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){var $;return typeof qg=="function"&&($=nge()),$},g.prototype.configureOptions=function($,S){var N={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},L={fs:z,localStorage:V,memory:M};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof $<"u"){if(this.options=$,this.options.hasOwnProperty("persistenceMethod")&&typeof L[$.persistenceMethod]=="function"&&(this.persistenceMethod=$.persistenceMethod,this.persistenceAdapter=new L[$.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=$.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),$.autoload&&S){var j=this;setTimeout(function(){j.loadDatabase($,$.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable($,$.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=N[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new L[this.persistenceMethod]))},g.prototype.copy=function($){var S=new g(this.filename,{env:"NA"}),N,L;if($=$||{},S.loadJSONObject(this,{retainDirtyFlags:!0}),$.hasOwnProperty("removeNonSerializable")&&$.removeNonSerializable===!0)for(S.autosaveHandle=null,S.persistenceAdapter=null,N=S.collections.length,L=0;L<N;L++)S.collections[L].constraints=null,S.collections[L].ttl=null;return S},g.prototype.addCollection=function($,S){var N,L=this.collections.length;if(S&&S.disableMeta===!0){if(S.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(S.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof S.ttl=="number"&&S.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(N=0;N<L;N+=1)if(this.collections[N].name===$)return this.collections[N];var j=new F($,S);return j.isIncremental=this.isIncremental,this.collections.push(j),this.verbose&&(j.lokiConsoleWrapper=console),j},g.prototype.loadCollection=function($){if(!$.name)throw new Error("Collection must have a name property to be loaded");this.collections.push($)},g.prototype.getCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$)return this.collections[S];return this.emit("warning","collection "+$+" not found"),null},g.prototype.renameCollection=function($,S){var N=this.getCollection($);return N&&(N.name=S),N},g.prototype.listCollections=function(){for(var $=this.collections.length,S=[];$--;)S.push({name:this.collections[$].name,type:this.collections[$].objType,count:this.collections[$].data.length});return S},g.prototype.removeCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$){var L=new F($,{}),j=this.collections[S];for(var K in j)j.hasOwnProperty(K)&&L.hasOwnProperty(K)&&(j[K]=L[K]);this.collections.splice(S,1);return}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function($,S){switch($){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return S}},g.prototype.serialize=function($){switch($=$||{},$.hasOwnProperty("serializationMethod")||($.serializationMethod=this.options.serializationMethod),$.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function($){var S,N,L,j,K=[],ae;if($=$||{},$.hasOwnProperty("partitioned")||($.partitioned=!1),$.hasOwnProperty("delimited")||($.delimited=!0),$.hasOwnProperty("delimiter")||($.delimiter=this.options.destructureDelimiter),$.partitioned===!0&&$.hasOwnProperty("partition")&&$.partition>=0)return this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:$.partition});for(ae=new g(this.filename),ae.loadJSONObject(this),S=0;S<ae.collections.length;S++)ae.collections[S].data=[];if($.partitioned===!0&&$.partition===-1)return ae.serialize({serializationMethod:"normal"});for(K.push(ae.serialize({serializationMethod:"normal"})),ae=null,S=0;S<this.collections.length;S++)if(L=this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:S}),$.partitioned===!1&&$.delimited===!1){if(!Array.isArray(L))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(j=L.length,N=0;N<j;N++)K.push(L[N]),L[N]=null;K.push("")}else K.push(L);return $.partitioned?($.delimited,K):$.delimited?(K.push(""),K.join($.delimiter)):(K.push(""),K)},g.prototype.serializeCollection=function($){var S,N,L=[];if($=$||{},$.hasOwnProperty("delimited")||($.delimited=!0),!$.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(S=this.collections[$.collectionIndex].data.length,L=[],N=0;N<S;N++)L.push(JSON.stringify(this.collections[$.collectionIndex].data[N]));return $.delimited?(L.push(""),L.join($.delimiter)):L},g.prototype.deserializeDestructured=function($,S){var N=[],L,j,K=0,ae,ye=1,Ue=!1,ze;if(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.partitioned){if(S.hasOwnProperty("partition"))return S.partition===-1?(j=JSON.parse($[0]),j):this.deserializeCollection($[S.partition+1],S);for(j=JSON.parse($[0]),ae=j.collections.length,K=0;K<ae;K++)j.collections[K].data=this.deserializeCollection($[K+1],S);return j}if(S.delimited){if(N=$.split(S.delimiter),$=null,L=N.length,L===0)return null}else N=$;for(j=JSON.parse(N[0]),ae=j.collections.length,N[0]=null;!Ue;)N[ye],N[ye]===""?++K>ae&&(Ue=!0):(ze=JSON.parse(N[ye]),j.collections[K].data.push(ze)),N[ye++]=null;return j},g.prototype.deserializeCollection=function($,S){var N=[],L,j;for(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.delimited?(N=$.split(S.delimiter),N.pop()):N=$,j=N.length,L=0;L<j;L++)N[L]=JSON.parse(N[L]);return N},g.prototype.loadJSON=function($,S){var N;if($.length===0)N={};else switch(this.options.serializationMethod){case"normal":case"pretty":N=JSON.parse($);break;case"destructured":N=this.deserializeDestructured($);break;default:N=JSON.parse($);break}this.loadJSONObject(N,S)},g.prototype.loadJSONObject=function($,S){var N=0,L=$.collections?$.collections.length:0,j,K,ae,ye,Ue,ze;this.name=$.name,$.hasOwnProperty("throttledSaves")&&S&&!S.hasOwnProperty("throttledSaves")&&(this.throttledSaves=$.throttledSaves),this.collections=[];function st(Rt){var dr=S[Rt.name],Vr;return dr.proto?(Vr=dr.inflate||o.copyProperties,function(ct){var It=new dr.proto;return Vr(ct,It),It}):dr.inflate}for(N;N<L;N+=1){if(j=$.collections[N],K=this.addCollection(j.name,{disableChangesApi:j.disableChangesApi,disableDeltaChangesApi:j.disableDeltaChangesApi,disableMeta:j.disableMeta,disableFreeze:j.hasOwnProperty("disableFreeze")?j.disableFreeze:!0}),K.adaptiveBinaryIndices=j.hasOwnProperty("adaptiveBinaryIndices")?j.adaptiveBinaryIndices===!0:!1,K.transactional=j.transactional,K.asyncListeners=j.asyncListeners,K.cloneObjects=j.cloneObjects,K.cloneMethod=j.cloneMethod||"parse-stringify",K.autoupdate=j.autoupdate,K.changes=j.changes,K.dirtyIds=j.dirtyIds||[],S&&S.retainDirtyFlags===!0?K.dirty=j.dirty:K.dirty=!1,ae=j.data.length,ye=0,S&&S.hasOwnProperty(j.name))for(Ue=st(j),ye;ye<ae;ye++)ze=Ue(j.data[ye]),K.data[ye]=ze,K.addAutoUpdateObserver(ze),K.disableFreeze||n(K.data[ye]);else for(ye;ye<ae;ye++)K.data[ye]=j.data[ye],K.addAutoUpdateObserver(K.data[ye]),K.disableFreeze||n(K.data[ye]);if(K.maxId=typeof j.maxId>"u"?0:j.maxId,typeof j.binaryIndices<"u"&&(K.binaryIndices=j.binaryIndices),typeof j.transforms<"u"&&(K.transforms=j.transforms),K.uniqueNames=[],j.hasOwnProperty("uniqueNames")&&(K.uniqueNames=j.uniqueNames),!(typeof j.DynamicViews>"u")){for(var wt=0;wt<j.DynamicViews.length;wt++){var mt=j.DynamicViews[wt],pt=K.addDynamicView(mt.name,mt.options);pt.resultdata=mt.resultdata,pt.resultsdirty=mt.resultsdirty,pt.filterPipeline=mt.filterPipeline,pt.sortCriteriaSimple=mt.sortCriteriaSimple,pt.sortCriteria=mt.sortCriteria,pt.sortFunction=null,pt.sortDirty=mt.sortDirty,K.disableFreeze||(n(pt.filterPipeline),pt.sortCriteriaSimple?n(pt.sortCriteriaSimple):pt.sortCriteria&&n(pt.sortCriteria)),pt.resultset.filteredrows=mt.resultset.filteredrows,pt.resultset.filterInitialized=mt.resultset.filterInitialized,pt.rematerialize({removeWhereFilters:!0})}$.databaseVersion<1.5&&(K.ensureAllIndexes(!0),K.dirty=!0)}}},g.prototype.close=function($){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase($),$=void 0)),$&&this.on("close",$),this.emit("close")},g.prototype.generateChangesNotification=function($){function S(j){return j.name}var N=[],L=$||this.collections.map(S);return this.collections.forEach(function(j){L.indexOf(S(j))!==-1&&(N=N.concat(j.getChanges()))}),N},g.prototype.serializeChanges=function($){return JSON.stringify(this.generateChangesNotification($))},g.prototype.clearChanges=function(){this.collections.forEach(function($){$.flushChanges&&$.flushChanges()})};function M($){this.hashStore={},this.options=$||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}M.prototype.loadDatabase=function($,S){var N=this;this.options.asyncResponses?setTimeout(function(){N.hashStore.hasOwnProperty($)?S(N.hashStore[$].value):S(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty($)?S(this.hashStore[$].value):S(null)},M.prototype.saveDatabase=function($,S,N){var L=this,j;this.options.asyncResponses?setTimeout(function(){j=L.hashStore.hasOwnProperty($)?L.hashStore[$].savecount:0,L.hashStore[$]={savecount:j+1,lastsave:new Date,value:S},N()},this.options.asyncTimeout):(j=this.hashStore.hasOwnProperty($)?this.hashStore[$].savecount:0,this.hashStore[$]={savecount:j+1,lastsave:new Date,value:S},N())},M.prototype.deleteDatabase=function($,S){this.hashStore.hasOwnProperty($)&&delete this.hashStore[$],typeof S=="function"&&S()};function B($,S){if(this.mode="reference",this.adapter=null,this.options=S||{},this.dbref=null,this.dbname="",this.pageIterator={},$){if($.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=$}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}B.prototype.loadDatabase=function($,S){var N=this;this.dbname=$,this.dbref=new g($),this.adapter.loadDatabase($,function(L){if(!L){S(L);return}typeof L!="string"&&S(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var j=JSON.parse(L);if(N.dbref.loadJSONObject(j),j=null,N.dbref.collections.length,N.dbref.collections.length===0){S(N.dbref);return}N.pageIterator={collection:0,pageIndex:0},N.loadNextPartition(0,function(){S(N.dbref)})})},B.prototype.loadNextPartition=function($,S){var N=this.dbname+"."+$,L=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(S);return}this.adapter.loadDatabase(N,function(j){var K=L.dbref.deserializeCollection(j,{delimited:!0,collectionIndex:$});L.dbref.collections[$].data=K,++$<L.dbref.collections.length?L.loadNextPartition($,S):S()})},B.prototype.loadNextPage=function($){var S=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,N=this;this.adapter.loadDatabase(S,function(L){var j=L.split(N.options.delimiter);L="";var K=j.length,ae,ye=j[K-1]==="";for(ye&&(j.pop(),K=j.length,j[K-1]===""&&K===1&&(j.pop(),K=j.length)),ae=0;ae<K;ae++)N.dbref.collections[N.pageIterator.collection].data.push(JSON.parse(j[ae])),j[ae]=null;j=[],ye?++N.pageIterator.collection<N.dbref.collections.length?N.loadNextPartition(N.pageIterator.collection,$):$():(N.pageIterator.pageIndex++,N.loadNextPage($))})},B.prototype.exportDatabase=function($,S,N){var L,j=S.collections.length;for(this.dbref=S,this.dbname=$,this.dirtyPartitions=[-1],L=0;L<j;L++)S.collections[L].dirty&&this.dirtyPartitions.push(L);this.saveNextPartition(function(K){N(K)})},B.prototype.saveNextPartition=function($){var S=this,N=this.dirtyPartitions.shift(),L=this.dbname+(N===-1?"":"."+N);if(this.options.paging&&N!==-1){this.pageIterator={collection:N,docIndex:0,pageIndex:0},this.saveNextPage(function(K){S.dirtyPartitions.length===0?$(K):S.saveNextPartition($)});return}var j=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:N});this.adapter.saveDatabase(L,j,function(K){if(K){$(K);return}S.dirtyPartitions.length===0?$(null):S.saveNextPartition($)})},B.prototype.saveNextPage=function($){var S=this,N=this.dbref.collections[this.pageIterator.collection],L=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,j=0,K=N.data.length,ae=this.options.delimiter.length,ye="",Ue="",ze=!1,st=!1,wt=function(mt){Ue="",mt&&$(mt),ze?$(null):(S.pageIterator.pageIndex++,S.saveNextPage($))};for(N.data.length===0&&(ze=!0);;)if(ze||(ye=JSON.stringify(N.data[this.pageIterator.docIndex]),Ue+=ye,j+=ye.length,++this.pageIterator.docIndex>=K&&(ze=!0)),j>=this.options.pageSize&&(st=!0),(!st||ze)&&(Ue+=this.options.delimiter,j+=ae),ze||st){this.adapter.saveDatabase(L,Ue,wt);return}};function z(){try{this.fs=oge}catch{this.fs=null}}z.prototype.loadDatabase=function(S,N){var L=this;this.fs.stat(S,function(j,K){!j&&K.isFile()?L.fs.readFile(S,{encoding:"utf8"},function(ye,Ue){N(ye?new Error(ye):Ue)}):N(null)})},z.prototype.saveDatabase=function(S,N,L){var j=this,K=S+"~";this.fs.writeFile(K,N,function(ye){ye?L(new Error(ye)):j.fs.rename(K,S,L)})},z.prototype.deleteDatabase=function(S,N){this.fs.unlink(S,function(j){j?N(new Error(j)):N()})};function V(){}V.prototype.loadDatabase=function(S,N){O()?N(localStorage.getItem(S)):N(new Error("localStorage is not available"))},V.prototype.saveDatabase=function(S,N,L){O()?(localStorage.setItem(S,N),L(null)):L(new Error("localStorage is not available"))},V.prototype.deleteDatabase=function(S,N){O()?(localStorage.removeItem(S),N(null)):N(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function($,S){var N=this,L=new Date().getTime();if(this.throttledSaves||$(!0),S=S||{},S.hasOwnProperty("recursiveWait")||(S.recursiveWait=!0),S.hasOwnProperty("recursiveWaitLimit")||(S.recursiveWaitLimit=!1),S.hasOwnProperty("recursiveWaitLimitDuration")||(S.recursiveWaitLimitDuration=2e3),S.hasOwnProperty("started")||(S.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(S.recursiveWait)this.throttledCallbacks.push(function(){if(N.throttledSavePending){if(S.recursiveWaitLimit&&L-S.started>S.recursiveWaitLimitDuration){$(!1);return}N.throttledSaveDrain($,S);return}else{$(!0);return}});else{this.throttledCallbacks.push($);return}else $(!0)},g.prototype.loadDatabaseInternal=function($,S){var N=S||function(j,K){if(j)throw j},L=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(K){if(typeof K=="string"){var ae=!1;try{L.loadJSON(K,$||{}),ae=!0}catch(ye){N(ye)}ae&&(N(null),L.emit("loaded","database "+L.filename+" loaded"))}else{if(!K){N(null),L.emit("loaded","empty database "+L.filename+" loaded");return}if(K instanceof Error){N(K);return}if(typeof K=="object"){L.loadJSONObject(K,$||{}),N(null),L.emit("loaded","database "+L.filename+" loaded");return}N("unexpected adapter response : "+K)}}):N(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function($,S){var N=this;if(!this.throttledSaves){this.loadDatabaseInternal($,S);return}this.throttledSaveDrain(function(L){if(L){N.throttledSavePending=!0,N.loadDatabaseInternal($,function(j){N.throttledCallbacks.length===0?N.throttledSavePending=!1:N.saveDatabase(),typeof S=="function"&&S(j)});return}else typeof S=="function"&&S(new Error("Unable to pause save throttling long enough to read database"))},$)},g.prototype.saveDatabaseInternal=function($){var S=$||function(j){if(j)throw j},N=this;if(!this.persistenceAdapter){S(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var L;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(N.ignoreAutosave=!1,L){S(new Error("adapter error - getLokiCopy called more than once"));return}var K=N.copy({removeNonSerializable:!0});return L=N.collections.map(function(ae){return[ae.dirty,ae.dirtyIds]}),N.collections.forEach(function(ae){ae.dirty=!1,ae.dirtyIds=[]}),K},function(K){N.ignoreAutosave=!1,K&&L&&N.collections.forEach(function(ae,ye){var Ue=L[ye];ae.dirty=ae.dirty||Ue[0],ae.dirtyIds=ae.dirtyIds.concat(Ue[1])}),S(K)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(K){N.autosaveClearFlags(),S(K)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(K){S(K)}))},g.prototype.saveDatabase=function($){if(!this.throttledSaves){this.saveDatabaseInternal($);return}if(this.throttledSavePending){this.throttledCallbacks.push($);return}var S=this.throttledCallbacks;this.throttledCallbacks=[],S.unshift($),this.throttledSavePending=!0;var N=this;this.saveDatabaseInternal(function(L){N.throttledSavePending=!1,S.forEach(function(j){typeof j=="function"&&setTimeout(function(){j(L)},1)}),N.throttledCallbacks.length>0&&N.saveDatabase()})},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function($,S){var N=S||function(L,j){if(L)throw L};typeof $=="function"&&!S&&(N=$),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(j){N(j)}):N(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var $=0;$<this.collections.length;$++)if(this.collections[$].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var $=0;$<this.collections.length;$++)this.collections[$].dirty=!1},g.prototype.autosaveEnable=function($,S){this.autosave=!0;var N=5e3,L=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(N=this.autosaveInterval),this.autosaveHandle=setInterval(function(){L.autosaveDirty()&&!L.ignoreAutosave&&L.saveDatabase(S)},N)},g.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function ne($,S){return this.collection=$,this.filteredrows=[],this.filterInitialized=!1,this}ne.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},ne.prototype.toJSON=function(){var $=this.copy();return $.collection=null,$},ne.prototype.limit=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new ne(this.collection);return S.filteredrows=this.filteredrows.slice(0,$),S.filterInitialized=!0,S},ne.prototype.offset=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new ne(this.collection);return S.filteredrows=this.filteredrows.slice($),S.filterInitialized=!0,S},ne.prototype.copy=function(){var $=new ne(this.collection);return this.filteredrows.length>0&&($.filteredrows=this.filteredrows.slice()),$.filterInitialized=this.filterInitialized,$},ne.prototype.branch=ne.prototype.copy,ne.prototype.transform=function($,S){var N,L,j=this;if(typeof $=="string"&&this.collection.transforms.hasOwnProperty($)&&($=this.collection.transforms[$]),typeof $!="object"||!Array.isArray($))throw new Error("Invalid transform");for(typeof S<"u"&&($=o.resolveTransformParams($,S)),N=0;N<$.length;N++)switch(L=$[N],L.type){case"find":j.find(L.value);break;case"where":j.where(L.value);break;case"simplesort":j.simplesort(L.property,L.desc||L.options);break;case"compoundsort":j.compoundsort(L.value);break;case"sort":j.sort(L.value);break;case"limit":j=j.limit(L.value);break;case"offset":j=j.offset(L.value);break;case"map":j=j.map(L.value,L.dataOptions);break;case"eqJoin":j=j.eqJoin(L.joinData,L.leftJoinKey,L.rightJoinKey,L.mapFun,L.dataOptions);break;case"mapReduce":j=j.mapReduce(L.mapFunction,L.reduceFunction);break;case"update":j.update(L.value);break;case"remove":j.remove();break}return j},ne.prototype.sort=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=function(N,L){return function(j,K){return N(L[j],L[K])}}($,this.collection.data);return this.filteredrows.sort(S),this},ne.prototype.simplesort=function($,S){var N,L=10,j=this.collection.data.length,K=this.filteredrows.length,ae=this.collection.binaryIndices.hasOwnProperty($);if((typeof S>"u"||S===!1)&&(S={desc:!1}),S===!0&&(S={desc:!0}),K===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty($))return this.collection.ensureIndex($),this.filteredrows=this.collection.binaryIndices[$].values.slice(0),S.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!S.disableIndexIntersect&&ae&&(N=j/K,S.useJavascriptSorting&&(L=6),N<=L||S.forceIndexIntersect)){var ye,Ue=this.filteredrows,ze={};for(ye=0;ye<K;ye++)ze[Ue[ye]]=!0;var st=this.collection.binaryIndices[$].values;return this.filteredrows=st.filter(function(mt){return ze[mt]}),S.desc&&this.filteredrows.reverse(),this}if(S.useJavascriptSorting)return this.sort(function(mt,pt){if(mt[$]===pt[$])return 0;if(mt[$]>pt[$])return 1;if(mt[$]<pt[$])return-1});var wt=function(mt,pt,Rt){var dr,Vr,ct;return function(It,vn){return~mt.indexOf(".")?(ct=mt.split("."),dr=o.getIn(Rt[It],ct,!0),Vr=o.getIn(Rt[vn],ct,!0)):(dr=Rt[It][mt],Vr=Rt[vn][mt]),c(dr,Vr,pt)}}($,S.desc,this.collection.data);return this.filteredrows.sort(wt),this},ne.prototype.compoundsort=function($){if($.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var S;if($.length===1)return S=$[0],Array.isArray(S)?this.simplesort(S[0],S[1]):this.simplesort(S,!1);for(var N=0,L=$.length;N<L;N+=1)S=$[N],Array.isArray(S)||($[N]=[S,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var j=function(K,ae){return function(ye,Ue){return d(K,ae[ye],ae[Ue])}}($,this.collection.data);return this.filteredrows.sort(j),this},ne.prototype.findOr=function($){var S=null,N=0,L=0,j=[],K=[],ae=0;this.count();for(var ye=0,Ue=$.length;ye<Ue;ye++)for(S=this.branch().find($[ye]).filteredrows,L=S.length,N=0;N<L;N++)ae=S[N],K[ae]===void 0&&(K[ae]=!0,j.push(ae));return this.filteredrows=j,this.filterInitialized=!0,this},ne.prototype.$or=ne.prototype.findOr;function re($,S){if($==="$regex")Array.isArray(S)?S=new RegExp(S[0],S[1]):S instanceof RegExp||(S=new RegExp(S));else if(typeof S=="object")for(var N in S)(N==="$regex"||typeof S[N]=="object")&&(S[N]=re(N,S[N]));return S}ne.prototype.findAnd=function($){for(var S=0,N=$.length;S<N;S++){if(this.count()===0)return this;this.find($[S])}return this},ne.prototype.$and=ne.prototype.findAnd,ne.prototype.find=function($,S){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var N=$||"getAll",L,j,K,ae,ye,Ue,ze,st=!1,wt=[],mt=[],pt=null;if(S=S||!1,typeof N=="object"){for(L in N)ae={},ae[L]=N[L],mt.push(ae),t.call(N,L)&&(j=L,K=N[L]);if(mt.length>1)return this.find({$and:mt},S)}if(!j||N==="getAll")return S&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(j==="$and"||j==="$or")return this[j](K),S&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(K===null||typeof K!="object"||K instanceof Date)ye="$eq",Ue=K;else if(typeof K=="object"){for(ze in K)if(t.call(K,ze)){ye=ze,Ue=K[ze];break}}else throw new Error("Do not know what you want to do.");(ye==="$regex"||typeof Ue=="object")&&(Ue=re(ye,Ue));var Rt=j.indexOf(".")!==-1,dr=!this.filterInitialized;dr&&this.collection.binaryIndices[j]&&A[ye]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(j),st=!0,pt=this.collection.binaryIndices[j]),!st&&ye==="$in"&&Array.isArray(Ue)&&typeof Set<"u"&&(Ue=new Set(Ue),ye="$inSet");var Vr=T[ye],ct=this.collection.data,It=0,vn=0,Pi,Ki=0,gn;if(this.filterInitialized){if(Pi=this.filteredrows,vn=Pi.length,Rt){for(j=j.split("."),It=0;It<vn;It++)if(Ki=Pi[It],gn=ct[Ki],y(gn,j,Vr,Ue,gn)&&(wt.push(Ki),S))return this.filteredrows=wt,this}else for(It=0;It<vn;It++)if(Ki=Pi[It],gn=ct[Ki],Vr(gn[j],Ue,gn)&&(wt.push(Ki),S))return this.filteredrows=wt,this}else if(st){var ps=this.collection.calculateRange(ye,j,Ue);if(ye!=="$in"){for(It=ps[0];It<=ps[1];It++)if(A[ye]!==!0){if(A[ye](o.getIn(ct[pt.values[It]],j,Rt),Ue)&&(wt.push(pt.values[It]),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else if(wt.push(pt.values[It]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0,vn=ps.length;It<vn;It++)if(wt.push(pt.values[ps[It]]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else if(vn=ct.length,Rt){for(j=j.split("."),It=0;It<vn;It++)if(gn=ct[It],y(gn,j,Vr,Ue,gn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0;It<vn;It++)if(gn=ct[It],Vr(gn[j],Ue,gn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this;return this.filteredrows=wt,this.filterInitialized=!0,this},ne.prototype.where=function($){var S,N=[];if(typeof $=="function")S=$;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var L=this.filteredrows.length;L--;)S(this.collection.data[this.filteredrows[L]])===!0&&N.push(this.filteredrows[L]);return this.filteredrows=N,this}else{for(var j=this.collection.data.length;j--;)S(this.collection.data[j])===!0&&N.push(j);return this.filteredrows=N,this.filterInitialized=!0,this}}catch(K){throw K}},ne.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},ne.prototype.data=function($){var S=[],N=this.collection.data,L,j,K,ae;if($=$||{},$.removeMeta&&!$.forceClones&&($.forceClones=!0,$.forceCloneMethod=$.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&($.forceClones=!0,$.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||$.forceClones){for(j=N.length,ae=$.forceCloneMethod||this.collection.cloneMethod,K=0;K<j;K++)L=x(N[K],ae),$.removeMeta&&(delete L.$loki,delete L.meta),S.push(L);return S}else return N.slice();else this.filterInitialized=!0;var ye=this.filteredrows;if(j=ye.length,this.collection.cloneObjects||$.forceClones)for(ae=$.forceCloneMethod||this.collection.cloneMethod,K=0;K<j;K++)L=x(N[ye[K]],ae),$.removeMeta&&(delete L.$loki,delete L.meta),S.push(L);else for(K=0;K<j;K++)S.push(N[ye[K]]);return S},ne.prototype.update=function($){if(typeof $!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var S,N=this.filteredrows.length,L=this.collection.data,j=0;j<N;j++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(S=x(L[this.filteredrows[j]],this.collection.cloneMethod),$(S),this.collection.update(S)):($(L[this.filteredrows[j]]),this.collection.update(L[this.filteredrows[j]]));return this},ne.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},ne.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}},ne.prototype.eqJoin=function($,S,N,L,j){var K=[],ae,ye=[],Ue,ze,st=[],wt=typeof S=="function",mt=typeof N=="function",pt={};if(K=this.data(j),ae=K.length,$ instanceof F)ye=$.chain().data(j);else if($ instanceof ne)ye=$.data(j);else if(Array.isArray($))ye=$;else throw new TypeError("joinData needs to be an array or result set");Ue=ye.length;for(var Rt=0;Rt<Ue;Rt++)ze=mt?N(ye[Rt]):ye[Rt][N],pt[ze]=ye[Rt];L||(L=function(Vr,ct){return{left:Vr,right:ct}});for(var dr=0;dr<ae;dr++)ze=wt?S(K[dr]):K[dr][S],st.push(L(K[dr],pt[ze]||{}));return this.collection=new F("joinData"),this.collection.insert(st),this.filteredrows=[],this.filterInitialized=!1,this},ne.prototype.map=function($,S){var N=this.data(S).map($);return this.collection=new F("mappedData"),this.collection.insert(N),this.filteredrows=[],this.filterInitialized=!1,this};function J($,S,N){this.collection=$,this.name=S,this.rebuildPending=!1,this.options=N||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new ne($),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}J.prototype=new C,J.prototype.constructor=J,J.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},J.prototype.rematerialize=function($){var S,N,L;$=$||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new ne(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var j=Object.isFrozen(this.filterPipeline);if($.hasOwnProperty("removeWhereFilters"))for(j&&(this.filterPipeline=this.filterPipeline.slice()),S=this.filterPipeline.length,N=S;N--;)this.filterPipeline[N].type==="where"&&(N!==this.filterPipeline.length-1&&(this.filterPipeline[N]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var K=this.filterPipeline;for(this.filterPipeline=[],S=K.length,L=0;L<S;L++)this.applyFind(K[L].val,K[L].uid);return j&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},J.prototype.branchResultset=function($,S){var N=this.resultset.branch();return typeof $>"u"?N:N.transform($,S)},J.prototype.toJSON=function(){var $=new J(this.collection,this.name,this.options);return $.resultset=this.resultset,$.resultdata=[],$.resultsdirty=!0,$.filterPipeline=this.filterPipeline,$.sortFunction=this.sortFunction,$.sortCriteria=this.sortCriteria,$.sortCriteriaSimple=this.sortCriteriaSimple||null,$.sortDirty=this.sortDirty,$.collection=null,$},J.prototype.removeFilters=function($){$=$||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var S=Object.isFrozen(this.filterPipeline),N=this.filterPipeline.length>0;this.filterPipeline=[],S&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,$.queueSortPhase===!0&&this.queueSortPhase(),N&&this.emit("filter")},J.prototype.applySort=function($){return this.sortFunction=$,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},J.prototype.applySimpleSort=function($,S){return this.sortCriteriaSimple={propname:$,options:S||!1},this.collection.disableFreeze||n(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},J.prototype.applySortCriteria=function($){return this.sortCriteria=$,this.collection.disableFreeze||n(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},J.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},J.prototype.commit=function(){return this.cachedresultset=null,this},J.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},J.prototype._indexOfFilterWithId=function($){if(typeof $=="string"||typeof $=="number"){for(var S=0,N=this.filterPipeline.length;S<N;S+=1)if($===this.filterPipeline[S].uid)return S}return-1},J.prototype._addFilter=function($){var S=Object.isFrozen(this.filterPipeline);S&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||n($),this.filterPipeline.push($),S&&Object.freeze(this.filterPipeline),this.resultset[$.type]($.val)},J.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var $=this.filterPipeline,S=Object.isFrozen($);this.filterPipeline=[];for(var N=0,L=$.length;N<L;N+=1)this._addFilter($[N]);return S&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},J.prototype.applyFilter=function($){var S=this._indexOfFilterWithId($.uid);if(S>=0){var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[S]=$,N&&(i($),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter($),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},J.prototype.applyFind=function($,S){return this.applyFilter({type:"find",val:$,uid:S}),this},J.prototype.applyWhere=function($,S){return this.applyFilter({type:"where",val:$,uid:S}),this},J.prototype.removeFilter=function($){var S=this._indexOfFilterWithId($);if(S<0)throw new Error("Dynamic view does not contain a filter with ID: "+$);var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(S,1),N&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},J.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},J.prototype.data=function($){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data($)},J.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var $=this;setTimeout(function(){$.rebuildPending&&($.rebuildPending=!1,$.emit("rebuild",$))},this.options.minRebuildInterval)}},J.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var $=this;this.options.sortPriority==="active"?setTimeout(function(){$.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},J.prototype.performSortPhase=function($){!this.sortDirty&&!this.resultsdirty||($=$||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),$.suppressRebuildEvent||this.emit("rebuild",this))},J.prototype.evaluateDocument=function($,S){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var N=this.resultset.filteredrows,L=S?-1:N.indexOf(+$),j=N.length,K=new ne(this.collection);K.filteredrows=[$],K.filterInitialized=!0;for(var ae,ye=0,Ue=this.filterPipeline.length;ye<Ue;ye++)ae=this.filterPipeline[ye],K[ae.type](ae.val);var ze=K.filteredrows.length===0?-1:0;if(!(L===-1&&ze===-1)){if(L===-1&&ze!==-1){N.push($),this.options.persistent&&this.resultdata.push(this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(L!==-1&&ze===-1){L<j-1?(N.splice(L,1),this.options.persistent&&this.resultdata.splice(L,1)):(N.length=j-1,this.options.persistent&&(this.resultdata.length=j-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(L!==-1&&ze!==-1){this.options.persistent&&(this.resultdata[L]=this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},J.prototype.removeDocument=function($){var S,N,L,j={},K={},ae=[],ye=this.resultset,Ue=this.resultset.filteredrows,ze=Ue.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray($)||($=[$]),L=$.length,N=0;N<L;N++)j[$[N]]=!0;for(S=0;S<ze;S++)j[Ue[S]]&&(K[S]=!0);Object.keys(K).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(wt,mt){return!K[mt]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(wt,mt){return!K[mt]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var st=function(wt){return function(mt){return mt<ye.filteredrows[wt]}};for(ze=ye.filteredrows.length,S=0;S<ze;S++)ae=$.filter(st(S)),ye.filteredrows[S]-=ae.length},J.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}};function F($,S){this.name=$,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=$,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var N=this;S=S||{},S.hasOwnProperty("unique")&&(Array.isArray(S.unique)||(S.unique=[S.unique]),S.unique.forEach(function(ze){N.uniqueNames.push(ze)})),S.hasOwnProperty("exact")&&S.exact.forEach(function(ze){N.constraints.exact[ze]=new je(ze)}),this.adaptiveBinaryIndices=S.hasOwnProperty("adaptiveBinaryIndices")?S.adaptiveBinaryIndices:!0,this.transactional=S.hasOwnProperty("transactional")?S.transactional:!1,this.cloneObjects=S.hasOwnProperty("clone")?S.clone:!1,this.cloneMethod=S.hasOwnProperty("cloneMethod")?S.cloneMethod:"parse-stringify",this.asyncListeners=S.hasOwnProperty("asyncListeners")?S.asyncListeners:!1,this.disableMeta=S.hasOwnProperty("disableMeta")?S.disableMeta:!1,this.disableChangesApi=S.hasOwnProperty("disableChangesApi")?S.disableChangesApi:!0,this.disableDeltaChangesApi=S.hasOwnProperty("disableDeltaChangesApi")?S.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=S.hasOwnProperty("autoupdate")?S.autoupdate:!1,this.serializableIndices=S.hasOwnProperty("serializableIndices")?S.serializableIndices:!0,this.disableFreeze=S.hasOwnProperty("disableFreeze")?S.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(S.ttl||-1,S.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var L=[];if(S&&S.indices)if(Object.prototype.toString.call(S.indices)==="[object Array]")L=S.indices;else if(typeof S.indices=="string")L=[S.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var j=0;j<L.length;j++)this.ensureIndex(L[j]);function K(ze){var st=typeof Set=="function"?new Set:[];st.add||(st.add=function(wt){return this.indexOf(wt)===-1&&this.push(wt),this}),ze.forEach(function(wt){st.add(wt.object)}),st.forEach(function(wt){if(!t.call(wt,"$loki"))return N.removeAutoUpdateObserver(wt);try{N.update(wt)}catch{}})}this.observerCallback=K;function ae(ze,st){return st?ye(st,ze):JSON.parse(JSON.stringify(ze))}this.getChangeDelta=ae;function ye(ze,st){var wt=st!==null&&typeof st=="object"?Object.keys(st):null;if(wt&&wt.length&&["string","boolean","number"].indexOf(typeof st)<0){for(var mt={},pt=0;pt<wt.length;pt++){var Rt=wt[pt];if(st.hasOwnProperty(Rt))if(!ze.hasOwnProperty(Rt)||N.uniqueNames.indexOf(Rt)>=0||Rt=="$loki"||Rt=="meta")mt[Rt]=st[Rt];else{var dr=ye(ze[Rt],st[Rt]);typeof dr<"u"&&dr!={}&&(mt[Rt]=dr)}}return Object.keys(mt).length===0?void 0:mt}else return ze===st?void 0:st}this.getObjectDelta=ye;function Ue(){N.changes=[]}this.getChanges=function(){return N.changes},this.flushChanges=Ue,this.setChangesApi=function(ze){N.disableChangesApi=!ze,ze||(N.disableDeltaChangesApi=!1)},this.on("delete",function(st){N.disableChangesApi||N.createChange(N.name,"R",st)}),this.on("warning",function(ze){N.lokiConsoleWrapper.warn(ze)}),Ue()}F.prototype=new C,F.prototype.contructor=F,F.prototype.createChange=function($,S,N,L){this.changes.push({name:$,operation:S,obj:S=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(N,L):JSON.parse(JSON.stringify(N))})},F.prototype.insertMeta=function($){var S,N;if(!(this.disableMeta||!$)){if(Array.isArray($)){for(S=$.length,N=0;N<S;N++)$[N].hasOwnProperty("meta")||($[N].meta={}),$[N].meta.created=new Date().getTime(),$[N].meta.revision=0;return}$.meta||($.meta={}),$.meta.created=new Date().getTime(),$.meta.revision=0}},F.prototype.updateMeta=function($){return this.disableMeta||!$||(this.disableFreeze||($=s($),$.meta=s($.meta)),$.meta.updated=new Date().getTime(),$.meta.revision+=1),$},F.prototype.createInsertChange=function($){this.createChange(this.name,"I",$)},F.prototype.createUpdateChange=function($,S){this.createChange(this.name,"U",$,S)},F.prototype.insertMetaWithChange=function($){this.insertMeta($),this.createInsertChange($)},F.prototype.updateMetaWithChange=function($,S,N){return $=this.updateMeta($,N),this.createUpdateChange($,S),$},F.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},F.prototype.addAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.observe($,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},F.prototype.removeAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve($,this.observerCallback)},F.prototype.addTransform=function($,S){if(this.transforms.hasOwnProperty($))throw new Error("a transform by that name already exists");this.transforms[$]=S},F.prototype.getTransform=function($){return this.transforms[$]},F.prototype.setTransform=function($,S){this.transforms[$]=S},F.prototype.removeTransform=function($){delete this.transforms[$]},F.prototype.byExample=function($){var S,N,L;L=[];for(S in $)$.hasOwnProperty(S)&&L.push((N={},N[S]=$[S],N));return{$and:L}},F.prototype.findObject=function($){return this.findOne(this.byExample($))},F.prototype.findObjects=function($){return this.find(this.byExample($))},F.prototype.ttlDaemonFuncGen=function(){var $=this,S=this.ttl.age;return function(){var L=Date.now(),j=$.chain().where(function(ae){var ye=ae.meta.updated||ae.meta.created,Ue=L-ye;return S<Ue});j.remove()}},F.prototype.setTTL=function($,S){$<0?clearInterval(this.ttl.daemon):(this.ttl.age=$,this.ttl.ttlInterval=S,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),S))},F.prototype.prepareFullDocIndex=function(){for(var $=this.data.length,S=new Array($),N=0;N<$;N+=1)S[N]=N;return S},F.prototype.configureOptions=function($){$=$||{},$.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=$.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},F.prototype.ensureIndex=function($,S){if(typeof S>"u"&&(S=!1),$==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[$]&&!S&&!this.binaryIndices[$].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty($)&&!S)){var N={name:$,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[$]=N;var L=function(j,K){var ae,ye,Ue=~j.indexOf(".")?j.split("."):!1;return function(ze,st){if(Ue?(ae=o.getIn(K[ze],Ue,!0),ye=o.getIn(K[st],Ue,!0)):(ae=K[ze][j],ye=K[st][j]),ae!==ye){if(a.lt(ae,ye,!1))return-1;if(a.gt(ae,ye,!1))return 1}return 0}}($,this.data);N.values.sort(L),N.dirty=!1,this.dirty=!0}},F.prototype.checkAllIndexes=function($){var S,N=this.binaryIndices,L=[],j;for(S in N)t.call(N,S)&&(j=this.checkIndex(S,$),j||L.push(S));return L},F.prototype.checkIndex=function($,S){S=S||{},S.randomSamplingFactor&&S.randomSampling!==!1&&(S.randomSampling=!0),S.randomSamplingFactor=S.randomSamplingFactor||.1,(S.randomSamplingFactor<0||S.randomSamplingFactor>1)&&(S.randomSamplingFactor=.1);var N=!0,L,j,K,ae,ye;if(!this.binaryIndices.hasOwnProperty($))throw new Error("called checkIndex on property without an index: "+$);if(this.adaptiveBinaryIndices||this.ensureIndex($),ye=this.binaryIndices[$].values,ae=ye.length,ae!==this.data.length)return S.repair&&this.ensureIndex($,!0),!1;if(ae===0)return!0;var Ue=$.indexOf(".")!==-1;if(ae===1)N=ye[0]===0;else if(S.randomSampling){if(T.$lte(o.getIn(this.data[ye[0]],$,Ue),o.getIn(this.data[ye[1]],$,Ue))||(N=!1),T.$lte(o.getIn(this.data[ye[ae-2]],$,Ue),o.getIn(this.data[ye[ae-1]],$,Ue))||(N=!1),N){for(j=Math.floor((ae-1)*S.randomSamplingFactor),L=0;L<j-1;L++)if(K=Math.floor(Math.random()*(ae-1)),!T.$lte(o.getIn(this.data[ye[K]],$,Ue),o.getIn(this.data[ye[K+1]],$,Ue))){N=!1;break}}}else for(L=0;L<ae-1;L++)if(!T.$lte(o.getIn(this.data[ye[L]],$,Ue),o.getIn(this.data[ye[L+1]],$,Ue))){N=!1;break}return!N&&S.repair&&this.ensureIndex($,!0),N},F.prototype.getBinaryIndexValues=function($){var S,N=this.binaryIndices[$].values,L=[];for(S=0;S<N.length;S++)L.push(o.getIn(this.data[N[S]],$,!0));return L},F.prototype.getUniqueIndex=function($,S){var N=this.constraints.unique[$];return!N&&S?this.ensureUniqueIndex($):N},F.prototype.ensureUniqueIndex=function($){var S=this.constraints.unique[$];return S||this.uniqueNames.indexOf($)==-1&&this.uniqueNames.push($),this.constraints.unique[$]=S=new Te($),this.data.forEach(function(N){S.set(N)}),S},F.prototype.ensureAllIndexes=function($){var S,N=this.binaryIndices;for(S in N)t.call(N,S)&&this.ensureIndex(S,$)},F.prototype.flagBinaryIndexesDirty=function(){var $,S=this.binaryIndices;for($ in S)t.call(S,$)&&(S[$].dirty=!0)},F.prototype.flagBinaryIndexDirty=function($){this.binaryIndices[$]&&(this.binaryIndices[$].dirty=!0)},F.prototype.count=function($){return $?this.chain().find($).filteredrows.length:this.data.length},F.prototype.ensureId=function(){if(!this.idIndex){var $=this.data,S=0,N=$.length,L=new Array(N);for(S;S<N;S++)L[S]=$[S].$loki;this.idIndex=L}},F.prototype.ensureIdAsync=function($){this.async(function(){this.ensureId()},$)},F.prototype.addDynamicView=function($,S){var N=new J(this,$,S);return this.DynamicViews.push(N),N},F.prototype.removeDynamicView=function($){this.DynamicViews=this.DynamicViews.filter(function(S){return S.name!==$})},F.prototype.getDynamicView=function($){for(var S=0;S<this.DynamicViews.length;S++)if(this.DynamicViews[S].name===$)return this.DynamicViews[S];return null},F.prototype.findAndUpdate=function($,S){typeof $=="function"?this.updateWhere($,S):this.chain().find($).update(S)},F.prototype.findAndRemove=function($){this.chain().find($).remove()},F.prototype.insert=function($,S){if(!Array.isArray($))return this.insertOne($);var N,L=[],j=S&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;j&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",$);for(var K=0,ae=$.length;K<ae;K++){if(N=this.insertOne($[K],!0),!N)return;L.push(N)}}finally{j&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",L),L=this.cloneObjects?x(L,this.cloneMethod):L,L.length===1?L[0]:L},F.prototype.insertOne=function($,S){var N=null,L;if(typeof $!="object"?N=new TypeError("Document needs to be an object"):$===null&&(N=new TypeError("Object cannot be null")),N!==null)throw this.emit("error",N),N;var j=this.cloneObjects?x($,this.cloneMethod):$;if(this.disableFreeze||(j=s(j)),this.disableMeta||(typeof j.meta>"u"?j.meta={revision:0,created:0}:this.disableFreeze||(j.meta=s(j.meta))),S||this.emit("pre-insert",j),!!this.add(j))return this.disableChangesApi?this.insertMeta(j):this.insertMetaWithChange(j),this.disableFreeze||n(j),L=this.cloneObjects?x(j,this.cloneMethod):j,S||this.emit("insert",L),this.addAutoUpdateObserver(L),L},F.prototype.clear=function($){var S=this;if($=$||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},$.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var N=Object.keys(this.binaryIndices);N.forEach(function(L){S.binaryIndices[L].dirty=!1,S.binaryIndices[L].values=[]})}},F.prototype.update=function($){var S,N,L;if(Array.isArray($)){L=$.length,S=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,S&&(this.adaptiveBinaryIndices=!1);try{for(N=0;N<L;N+=1)this.update($[N])}finally{S&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!t.call($,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var j=this.get($.$loki,!0),K,ae,ye,Ue=this;if(!j)throw new Error("Trying to update a document not in collection.");K=j[0],ye=j[1],ae=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?x($,this.cloneMethod):$,this.emit("pre-update",$),this.uniqueNames.forEach(function(pt){Ue.getUniqueIndex(pt,!0).update(K,ae)}),this.data[ye]=ae,ae!==$&&this.addAutoUpdateObserver($);for(var ze=0;ze<this.DynamicViews.length;ze++)this.DynamicViews[ze].evaluateDocument(ye,!1);var st;if(this.adaptiveBinaryIndices){var wt=this.binaryIndices;for(st in wt)this.adaptiveBinaryIndexUpdate(ye,st)}else this.flagBinaryIndexesDirty();this.idIndex[ye]=ae.$loki,this.isIncremental&&this.dirtyIds.push(ae.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?ae=this.updateMeta(ae):ae=this.updateMetaWithChange(ae,K),this.disableFreeze||n(ae);var mt;return this.cloneObjects?mt=x(ae,this.cloneMethod):mt=ae,this.emit("update",mt,K),mt}catch(pt){throw this.rollback(),this.lokiConsoleWrapper.error(pt.message),this.emit("error",pt),pt}},F.prototype.add=function($){if(typeof $!="object")throw new TypeError("Object being added needs to be an object");if(typeof $.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var S=this.maxId;$.$loki=S,this.disableMeta||($.meta.version=0);for(var N=0,L=this.uniqueNames.length;N<L;N++)this.getUniqueIndex(this.uniqueNames[N],!0).set($);this.idIndex&&this.idIndex.push(S),this.isIncremental&&this.dirtyIds.push(S),this.data.push($);var j=this.data.length-1,K=this.DynamicViews.length;for(N=0;N<K;N++)this.DynamicViews[N].evaluateDocument(j,!0);if(this.adaptiveBinaryIndices){var ae=this.binaryIndices;for(var ye in ae)this.adaptiveBinaryIndexInsert(j,ye)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?x($,this.cloneMethod):$}catch(Ue){throw this.rollback(),this.lokiConsoleWrapper.error(Ue.message),this.emit("error",Ue),Ue}},F.prototype.updateWhere=function($,S){var N=this.where($),L=0,j;try{for(L;L<N.length;L++)j=S(N[L]),this.update(j)}catch(K){this.rollback(),this.lokiConsoleWrapper.error(K.message)}},F.prototype.removeWhere=function($){var S;typeof $=="function"?(S=this.data.filter($),this.remove(S)):this.chain().find($).remove()},F.prototype.removeDataOnly=function(){this.remove(this.data.slice())},F.prototype.removeBatchByPositions=function($){var S=$.length,N={},L,j,K,ae=Object.keys(this.binaryIndices).length,ye=Object.keys(this.constraints.unique).length,Ue=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,ze,st=this;try{for(this.startTransaction(),this.ensureId(),K=0;K<S;K++)N[this.idIndex[$[K]]]=!0;if(L=this.DynamicViews.length,L>0||ae>0||ye>0){if(L>0)for(j=0;j<L;j++)this.DynamicViews[j].removeDocument($);if(this.adaptiveBinaryIndices&&!Ue){var wt,mt=this.binaryIndices;for(wt in mt)this.adaptiveBinaryIndexRemove($,wt)}else this.flagBinaryIndexesDirty();ye&&this.uniqueNames.forEach(function(pt){var Rt=st.getUniqueIndex(pt);if(Rt)for(K=0;K<S;K++)ze=st.data[$[K]],ze[pt]!==null&&ze[pt]!==void 0&&Rt.remove(ze[pt])})}if(!this.disableChangesApi||this.events.delete.length>1)for(K=0;K<S;K++)this.emit("delete",this.data[$[K]]);if(this.data=this.data.filter(function(pt){return!N[pt.$loki]}),this.isIncremental)for(K=0;K<S;K++)this.dirtyIds.push(this.idIndex[$[K]]);this.idIndex=this.idIndex.filter(function(pt){return!N[pt]}),this.adaptiveBinaryIndices&&Ue&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(pt){return this.rollback(),Ue&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(pt.message),this.emit("error",pt),null}},F.prototype.removeBatch=function($){var S=$.length,N=this.data.length,L,j={},K=[];for(L=0;L<N;L++)j[this.data[L].$loki]=L;for(L=0;L<S;L++)typeof $[L]=="object"?K.push(j[$[L].$loki]):K.push(j[$[L]]);this.removeBatchByPositions(K)},F.prototype.remove=function($){if(typeof $=="number"&&($=this.get($)),typeof $!="object")throw new Error("Parameter is not an object");if(Array.isArray($)){this.removeBatch($);return}if(!t.call($,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var S=this.get($.$loki,!0),N=S[1],L=this;this.uniqueNames.forEach(function(ye){if($[ye]!==null&&typeof $[ye]<"u"){var Ue=L.getUniqueIndex(ye);Ue&&Ue.remove($[ye])}});for(var j=0;j<this.DynamicViews.length;j++)this.DynamicViews[j].removeDocument(N);if(this.adaptiveBinaryIndices){var K,ae=this.binaryIndices;for(K in ae)this.adaptiveBinaryIndexRemove(N,K)}else this.flagBinaryIndexesDirty();return this.data.splice(N,1),this.removeAutoUpdateObserver($),this.idIndex.splice(N,1),this.isIncremental&&this.dirtyIds.push($.$loki),this.commit(),this.dirty=!0,this.emit("delete",S[0]),this.disableFreeze||($=s($)),delete $.$loki,delete $.meta,this.disableFreeze||i($),$}catch(ye){return this.rollback(),this.lokiConsoleWrapper.error(ye.message),this.emit("error",ye),null}},F.prototype.get=function($,S){this.idIndex||this.ensureId();var N=S||!1,L=this.idIndex,j=L.length-1,K=0,ae=K+j>>1;if($=typeof $=="number"?$:parseInt($,10),isNaN($))throw new TypeError("Passed id is not an integer");for(;L[K]<L[j];)ae=K+j>>1,L[ae]<$?K=ae+1:j=ae;return j===K&&L[K]===$?N?[this.data[K],K]:this.data[K]:null},F.prototype.getBinaryIndexPosition=function($,S){var N=o.getIn(this.data[$],S,!0),L=this.binaryIndices[S].values,j=this.calculateRange("$eq",S,N);if(j[0]===0&&j[1]===-1)return null;for(var K=j[0],ae=j[1],ye=K;ye<=ae;ye++)if(L[ye]===$)return ye;return null},F.prototype.adaptiveBinaryIndexInsert=function($,S){var N=S.indexOf(".")!==-1,L=this.binaryIndices[S].values,j=o.getIn(this.data[$],S,N);this.serializableIndices===!0&&j instanceof Date&&(this.data[$][S]=j.getTime(),j=o.getIn(this.data[$],S));var K=L.length===0?0:this.calculateRangeStart(S,j,!0,N);this.binaryIndices[S].values.splice(K,0,$)},F.prototype.adaptiveBinaryIndexUpdate=function($,S){var N,L=this.binaryIndices[S].values,j=L.length;for(N=0;N<j&&L[N]!==$;N++);this.binaryIndices[S].values.splice(N,1),this.adaptiveBinaryIndexInsert($,S)},F.prototype.adaptiveBinaryIndexRemove=function($,S,N){var L=this.binaryIndices[S],j,K,ae,ye,Ue={},ze,st,wt;if(Array.isArray($))if(ye=$.length,ye===1)$=$[0];else{for(ae=0;ae<ye;ae++)Ue[$[ae]]=!0;if(L.values=L.values.filter(function(pt){return!Ue[pt]}),N===!0)return;var mt=$.slice();for(mt.sort(function(pt,Rt){return pt-Rt}),j=L.values.length,K=0;K<j;K++){for(ze=L.values[K],st=0,ae=0;ae<ye&&ze>mt[ae];ae++)st++;L.values[K]-=st}return}if(wt=this.getBinaryIndexPosition($,S),wt===null)return null;if(L.values.splice(wt,1),N!==!0)for(j=L.values.length,K=0;K<j;K++)L.values[K]>$&&L.values[K]--},F.prototype.calculateRangeStart=function($,S,N,L){var j=this.data,K=this.binaryIndices[$].values,ae=0,ye=K.length-1,Ue=0;if(K.length===0)return-1;for(o.getIn(j[K[ae]],$,L),o.getIn(j[K[ye]],$,L);ae<ye;)Ue=ae+ye>>1,a.lt(o.getIn(j[K[Ue]],$,L),S,!1)?ae=Ue+1:ye=Ue;var ze=ae;return a.aeq(S,o.getIn(j[K[ze]],$,L))?ze:a.lt(S,o.getIn(j[K[ze]],$,L),!1)?N?ze:ze-1:N?ze+1:ze},F.prototype.calculateRangeEnd=function($,S,N){var L=this.data,j=this.binaryIndices[$].values,K=0,ae=j.length-1,ye=0;if(j.length===0)return-1;for(o.getIn(L[j[K]],$,N),o.getIn(L[j[ae]],$,N);K<ae;)ye=K+ae>>1,a.lt(S,o.getIn(L[j[ye]],$,N),!1)?ae=ye:K=ye+1;var Ue=ae;return a.aeq(S,o.getIn(L[j[Ue]],$,N))?Ue:a.gt(S,o.getIn(L[j[Ue]],$,N),!1)?Ue+1:a.aeq(S,o.getIn(L[j[Ue-1]],$,N))?Ue-1:Ue},F.prototype.calculateRange=function($,S,N){var L=this.data,j=this.binaryIndices[S].values,K=0,ae=j.length-1,ye,Ue,ze;if(L.length===0)return[0,-1];var st=S.indexOf(".")!==-1,wt=o.getIn(L[j[K]],S,st),mt=o.getIn(L[j[ae]],S,st);switch($){case"$eq":case"$aeq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$dteq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$gt":if(a.gt(N,mt,!0))return[0,-1];if(a.gt(wt,N,!1))return[K,ae];break;case"$gte":if(a.gt(N,mt,!1))return[0,-1];if(a.gt(wt,N,!0))return[K,ae];break;case"$lt":if(a.lt(N,wt,!0))return[0,-1];if(a.lt(mt,N,!1))return[K,ae];break;case"$lte":if(a.lt(N,wt,!1))return[0,-1];if(a.lt(mt,N,!0))return[K,ae];break;case"$between":return a.gt(N[0],mt,!1)?[0,-1]:a.lt(N[1],wt,!1)?[0,-1]:(ye=this.calculateRangeStart(S,N[0],!1,st),ze=this.calculateRangeEnd(S,N[1],st),ye<0&&ye++,ze>ae&&ze--,a.gt(o.getIn(L[j[ye]],S,st),N[0],!0)||ye++,a.lt(o.getIn(L[j[ze]],S,st),N[1],!0)||ze--,ze<ye?[0,-1]:[ye,ze]);case"$in":for(var pt=[],Rt=[],dr=0,Vr=N.length;dr<Vr;dr++)for(var ct=this.calculateRange("$eq",S,N[dr]),It=ct[0];It<=ct[1];It++)pt[It]===void 0&&(pt[It]=!0,Rt.push(It));return Rt}switch($){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":ye=this.calculateRangeStart(S,N,!1,st),Ue=o.getIn(L[j[ye]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":ze=this.calculateRangeEnd(S,N,st),o.getIn(L[j[ze]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":return a.aeq(Ue,N)?[ye,ze]:[0,-1];case"$gt":return a.aeq(o.getIn(L[j[ze]],S,st),N)?[ze+1,ae]:[ze,ae];case"$gte":return a.aeq(o.getIn(L[j[ye]],S,st),N)?[ye,ae]:[ye+1,ae];case"$lt":return a.aeq(o.getIn(L[j[ye]],S,st),N)?[K,ye-1]:[K,ye];case"$lte":return a.aeq(o.getIn(L[j[ze]],S,st),N)?[K,ze]:[K,ze-1];default:return[0,L.length-1]}},F.prototype.by=function($,S){var N;if(S===void 0)return N=this,function(j){return N.by($,j)};var L=this.getUniqueIndex($,!0).get(S);return this.cloneObjects?x(L,this.cloneMethod):L},F.prototype.findOne=function($){$=$||{};var S=this.chain().find($,!0).data();return Array.isArray(S)&&S.length===0?null:this.cloneObjects?x(S[0],this.cloneMethod):S[0]},F.prototype.chain=function($,S){var N=new ne(this);return typeof $>"u"?N:N.transform($,S)},F.prototype.find=function($){return this.chain().find($).data()},F.prototype.findOneUnindexed=function($,S){for(var N=this.data.length,L;N--;)if(o.getIn(this.data[N],$,!0)===S)return L=this.data[N],L;return null},F.prototype.startTransaction=function(){if(this.transactional){this.cachedData=x(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].startTransaction()}},F.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].commit()}},F.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].rollback()}},F.prototype.async=function($,S){setTimeout(function(){if(typeof $=="function")$(),S();else throw new TypeError("Argument passed for async execution is not a function")},0)},F.prototype.where=function($){return this.chain().where($).data()},F.prototype.mapReduce=function($,S){try{return S(this.data.map($))}catch(N){throw N}},F.prototype.eqJoin=function($,S,N,L,j){return new ne(this).eqJoin($,S,N,L,j)},F.prototype.stages={},F.prototype.getStage=function($){return this.stages[$]||(this.stages[$]={}),this.stages[$]},F.prototype.commitLog=[],F.prototype.stage=function($,S){var N=JSON.parse(JSON.stringify(S));return this.getStage($)[S.$loki]=N,N},F.prototype.commitStage=function($,S){var N=this.getStage($),L,j=new Date().getTime();for(L in N)this.update(N[L]),this.commitLog.push({timestamp:j,message:S,data:JSON.parse(JSON.stringify(N[L]))});this.stages[$]={}},F.prototype.no_op=function(){},F.prototype.extract=function($){var S=0,N=this.data.length,L=Z($),j=[];for(S;S<N;S+=1)j.push(Ge(this.data[S],$,L));return j},F.prototype.max=function($){return Math.max.apply(null,this.extract($))},F.prototype.min=function($){return Math.min.apply(null,this.extract($))},F.prototype.maxRecord=function($){var S=0,N=this.data.length,L=Z($),j={index:0,value:void 0},K;for(S;S<N;S+=1)K!==void 0?K<Ge(this.data[S],$,L)&&(K=Ge(this.data[S],$,L),j.index=this.data[S].$loki):(K=Ge(this.data[S],$,L),j.index=this.data[S].$loki);return j.value=K,j},F.prototype.minRecord=function($){var S=0,N=this.data.length,L=Z($),j={index:0,value:void 0},K;for(S;S<N;S+=1)K!==void 0?K>Ge(this.data[S],$,L)&&(K=Ge(this.data[S],$,L),j.index=this.data[S].$loki):(K=Ge(this.data[S],$,L),j.index=this.data[S].$loki);return j.value=K,j},F.prototype.extractNumerical=function($){return this.extract($).map(ie).filter(Number).filter(function(S){return!isNaN(S)})},F.prototype.avg=function($){return Ce(this.extractNumerical($))},F.prototype.stdDev=function($){return He(this.extractNumerical($))},F.prototype.mode=function($){var S={},N=this.extract($);N.forEach(function(ae){S[ae]?S[ae]+=1:S[ae]=1});var L,j,K;for(j in S)L?L<S[j]&&(K=j):(K=j,L=S[j]);return K},F.prototype.median=function($){var S=this.extractNumerical($);S.sort(we);var N=Math.floor(S.length/2);return S.length%2?S[N]:(S[N-1]+S[N])/2};function Z($){return $.indexOf(".")!==-1}function ie($){return parseFloat($,10)}function _e($,S){return $+S}function we($,S){return $-S}function Ce($){return $.reduce(_e,0)/$.length}function He($){var S=Ce($),N=$.map(function(K){var ae=K-S,ye=ae*ae;return ye}),L=Ce(N),j=Math.sqrt(L);return j}function Ge($,S,N){if(N===!1)return $[S];for(var L=S.split("."),j=$;L.length>0;)j=j[L.shift()];return j}function it($,S,N){for(var L=0,j=$.length,K,ae;L<j;){if(ae=L+j>>1,K=N.apply(null,[S,$[ae]]),K===0)return{found:!0,index:ae};K<0?j=ae:L=ae+1}return{found:!1,index:j}}function xe($){return function(S,N){return it(S,N,$)}}function ge(){}ge.prototype={keys:[],values:[],sort:function($,S){return $<S?-1:$>S?1:0},setSort:function($){this.bs=new xe($)},bs:function(){return new xe(this.sort)},set:function($,S){var N=this.bs(this.keys,$);N.found?this.values[N.index]=S:(this.keys.splice(N.index,0,$),this.values.splice(N.index,0,S))},get:function($){return this.values[it(this.keys,$,this.sort).index]}};function Te($){this.field=$,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}Te.prototype.keyMap={},Te.prototype.lokiMap={},Te.prototype.set=function($){var S=$[this.field];if(S!==null&&typeof S<"u"){if(this.keyMap[S])throw new Error("Duplicate key for property "+this.field+": "+S);this.keyMap[S]=$,this.lokiMap[$.$loki]=S}},Te.prototype.get=function($){return this.keyMap[$]},Te.prototype.byId=function($){return this.keyMap[this.lokiMap[$]]},Te.prototype.update=function($,S){if(this.lokiMap[$.$loki]!==S[this.field]){var N=this.lokiMap[$.$loki];this.set(S),this.keyMap[N]=void 0}else this.keyMap[$[this.field]]=S},Te.prototype.remove=function($){var S=this.keyMap[$];if(S!==null&&typeof S<"u")this.keyMap[$]=void 0,this.lokiMap[S.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},Te.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function je($){this.index=Object.create(null),this.field=$}return je.prototype={set:function(S,N){this.index[S]?this.index[S].push(N):this.index[S]=[N]},remove:function(S,N){var L=this.index[S];for(var j in L)L[j]==N&&L.splice(j,1);L.length<1&&(this.index[S]=void 0)},get:function(S){return this.index[S]},clear:function(S){this.index={}}},g.deepFreeze=n,g.freeze=i,g.unFreeze=s,g.LokiOps=T,g.Collection=F,g.DynamicView=J,g.Resultset=ne,g.KeyValueStore=ge,g.LokiMemoryAdapter=M,g.LokiPartitioningAdapter=B,g.LokiLocalStorageAdapter=V,g.LokiFsAdapter=z,g.persistenceAdapters={fs:z,localStorage:V},g.aeq=l,g.lt=u,g.gt=f,g.Comparators=a,g}()})})(fW);var age=fW.exports;const lge=io(age);class eP{constructor(r,t){ce(this,"map");ce(this,"sortedKeys");ce(this,"compare");this.map=new Map,this.sortedKeys=[],r?typeof r=="string"?this.compare=(n,i)=>t==="desc"?n.value[r]>i.value[r]?-1:n.value[r]<i.value[r]?1:0:n.value[r]>i.value[r]?1:n.value[r]<i.value[r]?-1:0:this.compare=r:this.compare=(n,i)=>n.key>i.key?1:n.key<i.key?-1:0}set(r,t){if(this.map.has(r)){const s=this.sortedKeys.indexOf(r);s!==-1&&this.sortedKeys.splice(s,1)}this.map.set(r,t);let n=0,i=this.sortedKeys.length;for(;n<i;){const s=Math.floor((n+i)/2);this.compare({key:r,value:t},{key:this.sortedKeys[s],value:this.map.get(this.sortedKeys[s])})<0?i=s:n=s+1}this.sortedKeys.splice(n,0,r)}get(r){return this.map.get(r)}*[Symbol.iterator](){for(const r of this.sortedKeys)yield{key:r,value:this.map.get(r)}}*reverse(){for(let r=this.sortedKeys.length-1;r>=0;r--){const t=this.sortedKeys[r];yield{key:t,value:this.map.get(t)}}}*keys(){for(const r of this.sortedKeys)yield r}*values(){for(const r of this.sortedKeys)yield this.map.get(r)}*entries(){for(const r of this.sortedKeys)yield[r,this.map.get(r)]}has(r){return this.map.has(r)}delete(r){if(this.map.delete(r)){const t=this.sortedKeys.indexOf(r);return t!==-1&&this.sortedKeys.splice(t,1),!0}return!1}get size(){return this.map.size}}function tI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function uge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function hW(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function cge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");tI(e.outputLen),tI(e.blockLen)}function fge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function hge(e,r){hW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const _E={number:tI,bool:uge,bytes:hW,hash:cge,exists:fge,output:hge};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dW=e=>e instanceof Uint8Array,xE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ja=(e,r)=>e<<32-r|e>>>r,dge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!dge)throw new Error("Non little-endian hardware is not supported");const pge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function rI(e){if(!dW(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=pge[e[t]];return r}function vge(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function pW(e){if(typeof e=="string"&&(e=vge(e)),!dW(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let gge=class{clone(){return this._cloneInto()}};function vW(e){const r=n=>e().update(pW(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function yge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let mge=class extends gge{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=xE(this.buffer)}update(r){_E.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=pW(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=xE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){_E.exists(this),_E.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;yge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=xE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const bge=(e,r,t)=>e&r^~e&t,wge=(e,r,t)=>e&r^e&t^r&t,$ge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rc=new Uint32Array(64);let gW=class extends mge{constructor(){super(64,32,8,!1),this.A=tc[0]|0,this.B=tc[1]|0,this.C=tc[2]|0,this.D=tc[3]|0,this.E=tc[4]|0,this.F=tc[5]|0,this.G=tc[6]|0,this.H=tc[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)rc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=rc[c-15],y=rc[c-2],w=Ja(d,7)^Ja(d,18)^d>>>3,b=Ja(y,17)^Ja(y,19)^y>>>10;rc[c]=b+rc[c-7]+w+rc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Ja(a,6)^Ja(a,11)^Ja(a,25),y=f+d+bge(a,l,u)+$ge[c]+rc[c]|0,b=(Ja(n,2)^Ja(n,13)^Ja(n,22))+wge(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){rc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},_ge=class extends gW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const T_=vW(()=>new gW);vW(()=>new _ge);const RB=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],DB=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function BB(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function yW(e){if(!e)throw new Error("No seed provided");const r=T_(e),t=DB[r[0]%DB.length],n=RB[r[1]%RB.length];return`${BB(t)} ${BB(n)}`}let If;const xge=()=>If||(If=Me.db.addDynamicView("latest_by_follows",{persist:!0}),If.applyFind({kind:1}),If.applySimpleSort("created_at",{desc:!0}),If.applyWhere(e=>tt.getFollowDistance(e.pubkey)<=1),If);let Rd;const Ege=()=>Rd||(Rd=Me.db.addDynamicView("latest_by_everyone",{persist:!0}),Rd.applyFind({kind:1}),Rd.applySimpleSort("created_at",{desc:!0}),Rd),Uw={loaded:!1,saveEvents:wn.throttle(()=>{const e=xge().data().slice(0,50),r=Ege().data().slice(0,50),t=Me.notifications.eventIds.map(s=>Me.db.by("id",s)).slice(0,50);let n=[];for(const s of Me.directMessagesByUser.values())s.eventIds.forEach(o=>{n.push(Me.db.by("id",o))});n=n.slice(0,100);const i=Array.from(Me.keyValueEvents.values()).slice(0,50);pn.setItem("latestMsgs",e),pn.setItem("latestMsgsByEveryone",r),pn.setItem("notificationEvents",t),pn.setItem("dms",n),pn.setItem("keyValueEvents",i),console.log("saved latestMsgs",e.length),console.log("saved latestMsgsByEveryone",r.length)},5e3),saveProfilesAndFollows:wn.debounce(()=>{const e=de.getPubKey(),r=[Me.db.find({kind:0,pubkey:e}),...Me.db.find({kind:0})],t=Me.db.find({kind:3}).filter(s=>s.pubkey===e||tt.isFollowing(e,s.pubkey)),n=[Me.db.findOne({kind:3,pubkey:e})];let i=0;for(const s of t.map(o=>[JSON.stringify(o).length,o]).sort((o,a)=>o[0]-a[0]))i+s[0]<5e5&&(i+=s[0],n.push(s[1]));pn.setItem("profileEvents",r.slice(0,50)),pn.setItem("followEvents",n.slice(0,50))},5e3),loadEvents:async function(){const e=await pn.getItem("latestMsgs"),r=await pn.getItem("latestMsgsByEveryone"),t=await pn.getItem("followEvents"),n=await pn.getItem("profileEvents"),i=await pn.getItem("notificationEvents"),s=await pn.getItem("dms"),o=await pn.getItem("keyValueEvents");this.loaded=!0,Array.isArray(t)&&t.forEach(a=>Me.handle(a)),Array.isArray(n)&&n.forEach(a=>Me.handle(a)),Array.isArray(e)&&e.forEach(a=>{Me.handle(a)}),Array.isArray(r)&&r.forEach(a=>{Me.handle(a)}),Array.isArray(i)&&i.forEach(a=>{Me.handle(a)}),Array.isArray(s)&&s.forEach(a=>{Me.handle(a)}),Array.isArray(o)&&o.forEach(a=>{Me.handle(a)})}};var nI={exports:{}};(function(e,r){const{hasOwnProperty:t}=Object.prototype,n=T();n.configure=T,n.stringify=n,n.default=n,r.stringify=n,r.configure=T,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(_){return _.length<5e3&&!i.test(_)?`"${_}"`:JSON.stringify(_)}function o(_){if(_.length>200)return _.sort();for(let A=1;A<_.length;A++){const x=_[A];let I=A;for(;I!==0&&_[I-1]>x;)_[I]=_[I-1],I--;_[I]=x}return _}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(_){return a.call(_)!==void 0&&_.length!==0}function u(_,A,x){_.length<x&&(x=_.length);const I=A===","?"":" ";let O=`"0":${I}${_[0]}`;for(let C=1;C<x;C++)O+=`${A}"${C}":${I}${_[C]}`;return O}function f(_){if(t.call(_,"circularValue")){const A=_.circularValue;if(typeof A=="string")return`"${A}"`;if(A==null)return A;if(A===Error||A===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function c(_,A){let x;if(t.call(_,A)&&(x=_[A],typeof x!="boolean"))throw new TypeError(`The "${A}" argument must be of type boolean`);return x===void 0?!0:x}function d(_,A){let x;if(t.call(_,A)){if(x=_[A],typeof x!="number")throw new TypeError(`The "${A}" argument must be of type number`);if(!Number.isInteger(x))throw new TypeError(`The "${A}" argument must be an integer`);if(x<1)throw new RangeError(`The "${A}" argument must be >= 1`)}return x===void 0?1/0:x}function y(_){return _===1?"1 item":`${_} items`}function w(_){const A=new Set;for(const x of _)(typeof x=="string"||typeof x=="number")&&A.add(String(x));return A}function b(_){if(t.call(_,"strict")){const A=_.strict;if(typeof A!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(A)return x=>{let I=`Object can not safely be stringified. Received type ${typeof x}`;throw typeof x!="function"&&(I+=` (${x.toString()})`),new Error(I)}}}function T(_){_={..._};const A=b(_);A&&(_.bigint===void 0&&(_.bigint=!1),"circularValue"in _||(_.circularValue=Error));const x=f(_),I=c(_,"bigint"),O=c(_,"deterministic"),C=d(_,"maximumDepth"),g=d(_,"maximumBreadth");function M(re,J,F,Z,ie,_e){let we=J[re];switch(typeof we=="object"&&we!==null&&typeof we.toJSON=="function"&&(we=we.toJSON(re)),we=Z.call(J,re,we),typeof we){case"string":return s(we);case"object":{if(we===null)return"null";if(F.indexOf(we)!==-1)return x;let Ce="",He=",";const Ge=_e;if(Array.isArray(we)){if(we.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(we),ie!==""&&(_e+=ie,Ce+=`
${_e}`,He=`,
${_e}`);const $=Math.min(we.length,g);let S=0;for(;S<$-1;S++){const L=M(String(S),we,F,Z,ie,_e);Ce+=L!==void 0?L:"null",Ce+=He}const N=M(String(S),we,F,Z,ie,_e);if(Ce+=N!==void 0?N:"null",we.length-1>g){const L=we.length-g-1;Ce+=`${He}"... ${y(L)} not stringified"`}return ie!==""&&(Ce+=`
${Ge}`),F.pop(),`[${Ce}]`}let it=Object.keys(we);const xe=it.length;if(xe===0)return"{}";if(C<F.length+1)return'"[Object]"';let ge="",Te="";ie!==""&&(_e+=ie,He=`,
${_e}`,ge=" ");const je=Math.min(xe,g);O&&!l(we)&&(it=o(it)),F.push(we);for(let $=0;$<je;$++){const S=it[$],N=M(S,we,F,Z,ie,_e);N!==void 0&&(Ce+=`${Te}${s(S)}:${ge}${N}`,Te=He)}if(xe>g){const $=xe-g;Ce+=`${Te}"...":${ge}"${y($)} not stringified"`,Te=He}return ie!==""&&Te.length>1&&(Ce=`
${_e}${Ce}
${Ge}`),F.pop(),`{${Ce}}`}case"number":return isFinite(we)?String(we):A?A(we):"null";case"boolean":return we===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(we);default:return A?A(we):void 0}}function B(re,J,F,Z,ie,_e){switch(typeof J=="object"&&J!==null&&typeof J.toJSON=="function"&&(J=J.toJSON(re)),typeof J){case"string":return s(J);case"object":{if(J===null)return"null";if(F.indexOf(J)!==-1)return x;const we=_e;let Ce="",He=",";if(Array.isArray(J)){if(J.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(J),ie!==""&&(_e+=ie,Ce+=`
${_e}`,He=`,
${_e}`);const xe=Math.min(J.length,g);let ge=0;for(;ge<xe-1;ge++){const je=B(String(ge),J[ge],F,Z,ie,_e);Ce+=je!==void 0?je:"null",Ce+=He}const Te=B(String(ge),J[ge],F,Z,ie,_e);if(Ce+=Te!==void 0?Te:"null",J.length-1>g){const je=J.length-g-1;Ce+=`${He}"... ${y(je)} not stringified"`}return ie!==""&&(Ce+=`
${we}`),F.pop(),`[${Ce}]`}F.push(J);let Ge="";ie!==""&&(_e+=ie,He=`,
${_e}`,Ge=" ");let it="";for(const xe of Z){const ge=B(xe,J[xe],F,Z,ie,_e);ge!==void 0&&(Ce+=`${it}${s(xe)}:${Ge}${ge}`,it=He)}return ie!==""&&it.length>1&&(Ce=`
${_e}${Ce}
${we}`),F.pop(),`{${Ce}}`}case"number":return isFinite(J)?String(J):A?A(J):"null";case"boolean":return J===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(J);default:return A?A(J):void 0}}function z(re,J,F,Z,ie){switch(typeof J){case"string":return s(J);case"object":{if(J===null)return"null";if(typeof J.toJSON=="function"){if(J=J.toJSON(re),typeof J!="object")return z(re,J,F,Z,ie);if(J===null)return"null"}if(F.indexOf(J)!==-1)return x;const _e=ie;if(Array.isArray(J)){if(J.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(J),ie+=Z;let ge=`
${ie}`;const Te=`,
${ie}`,je=Math.min(J.length,g);let $=0;for(;$<je-1;$++){const N=z(String($),J[$],F,Z,ie);ge+=N!==void 0?N:"null",ge+=Te}const S=z(String($),J[$],F,Z,ie);if(ge+=S!==void 0?S:"null",J.length-1>g){const N=J.length-g-1;ge+=`${Te}"... ${y(N)} not stringified"`}return ge+=`
${_e}`,F.pop(),`[${ge}]`}let we=Object.keys(J);const Ce=we.length;if(Ce===0)return"{}";if(C<F.length+1)return'"[Object]"';ie+=Z;const He=`,
${ie}`;let Ge="",it="",xe=Math.min(Ce,g);l(J)&&(Ge+=u(J,He,g),we=we.slice(J.length),xe-=J.length,it=He),O&&(we=o(we)),F.push(J);for(let ge=0;ge<xe;ge++){const Te=we[ge],je=z(Te,J[Te],F,Z,ie);je!==void 0&&(Ge+=`${it}${s(Te)}: ${je}`,it=He)}if(Ce>g){const ge=Ce-g;Ge+=`${it}"...": "${y(ge)} not stringified"`,it=He}return it!==""&&(Ge=`
${ie}${Ge}
${_e}`),F.pop(),`{${Ge}}`}case"number":return isFinite(J)?String(J):A?A(J):"null";case"boolean":return J===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(J);default:return A?A(J):void 0}}function V(re,J,F){switch(typeof J){case"string":return s(J);case"object":{if(J===null)return"null";if(typeof J.toJSON=="function"){if(J=J.toJSON(re),typeof J!="object")return V(re,J,F);if(J===null)return"null"}if(F.indexOf(J)!==-1)return x;let Z="";if(Array.isArray(J)){if(J.length===0)return"[]";if(C<F.length+1)return'"[Array]"';F.push(J);const He=Math.min(J.length,g);let Ge=0;for(;Ge<He-1;Ge++){const xe=V(String(Ge),J[Ge],F);Z+=xe!==void 0?xe:"null",Z+=","}const it=V(String(Ge),J[Ge],F);if(Z+=it!==void 0?it:"null",J.length-1>g){const xe=J.length-g-1;Z+=`,"... ${y(xe)} not stringified"`}return F.pop(),`[${Z}]`}let ie=Object.keys(J);const _e=ie.length;if(_e===0)return"{}";if(C<F.length+1)return'"[Object]"';let we="",Ce=Math.min(_e,g);l(J)&&(Z+=u(J,",",g),ie=ie.slice(J.length),Ce-=J.length,we=","),O&&(ie=o(ie)),F.push(J);for(let He=0;He<Ce;He++){const Ge=ie[He],it=V(Ge,J[Ge],F);it!==void 0&&(Z+=`${we}${s(Ge)}:${it}`,we=",")}if(_e>g){const He=_e-g;Z+=`${we}"...":"${y(He)} not stringified"`}return F.pop(),`{${Z}}`}case"number":return isFinite(J)?String(J):A?A(J):"null";case"boolean":return J===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(J);default:return A?A(J):void 0}}function ne(re,J,F){if(arguments.length>1){let Z="";if(typeof F=="number"?Z=" ".repeat(Math.min(F,10)):typeof F=="string"&&(Z=F.slice(0,10)),J!=null){if(typeof J=="function")return M("",{"":re},[],J,Z,"");if(Array.isArray(J))return B("",re,[],w(J),Z,"")}if(Z.length!==0)return z("",re,[],Z,"")}return V("",re,[])}return ne}})(nI,nI.exports);var Sge=nI.exports;const mW=io(Sge);mW.configure;const kge=mW;function iI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Tge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function bW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Ige(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");iI(e.outputLen),iI(e.blockLen)}function Age(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Oge(e,r){bW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Xf={number:iI,bool:Tge,bytes:bW,hash:Ige,exists:Age,output:Oge},EE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Qa=(e,r)=>e<<32-r|e>>>r,Cge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Cge)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Pge(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function tP(e){if(typeof e=="string"&&(e=Pge(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Nge(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let wW=class{clone(){return this._cloneInto()}};function $W(e){const r=n=>e().update(tP(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function _W(e=32){if(EE&&typeof EE.getRandomValues=="function")return EE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Rge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let Dge=class extends wW{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=SE(this.buffer)}update(r){Xf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=tP(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=SE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Xf.exists(this),Xf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Rge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=SE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Bge=(e,r,t)=>e&r^~e&t,Mge=(e,r,t)=>e&r^e&t^r&t,Lge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ic=new Uint32Array(64);let xW=class extends Dge{constructor(){super(64,32,8,!1),this.A=nc[0]|0,this.B=nc[1]|0,this.C=nc[2]|0,this.D=nc[3]|0,this.E=nc[4]|0,this.F=nc[5]|0,this.G=nc[6]|0,this.H=nc[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)ic[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=ic[c-15],y=ic[c-2],w=Qa(d,7)^Qa(d,18)^d>>>3,b=Qa(y,17)^Qa(y,19)^y>>>10;ic[c]=b+ic[c-7]+w+ic[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Qa(a,6)^Qa(a,11)^Qa(a,25),y=f+d+Bge(a,l,u)+Lge[c]+ic[c]|0,b=(Qa(n,2)^Qa(n,13)^Qa(n,22))+Mge(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){ic.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Fge=class extends xW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Ww=$W(()=>new xW);$W(()=>new Fge);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const EW=BigInt(0),I_=BigInt(1),jge=BigInt(2),A_=e=>e instanceof Uint8Array,zge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Up(e){if(!A_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=zge[e[t]];return r}function SW(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function rP(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Wp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");r[t]=s}return r}function ls(e){return rP(Up(e))}function nP(e){if(!A_(e))throw new Error("Uint8Array expected");return rP(Up(Uint8Array.from(e).reverse()))}const Ac=(e,r)=>Wp(e.toString(16).padStart(r*2,"0")),kW=(e,r)=>Ac(e,r).reverse(),Hge=e=>Wp(SW(e));function Ti(e,r,t){let n;if(typeof r=="string")try{n=Wp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(A_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Ys(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!A_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Uge(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function O_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Wge(e){let r;for(r=0;e>EW;e>>=I_,r+=1);return r}const qge=(e,r)=>e>>BigInt(r)&I_,Kge=(e,r,t)=>e|(t?I_:EW)<<BigInt(r),iP=e=>(jge<<BigInt(e-1))-I_,kE=e=>new Uint8Array(e),MB=e=>Uint8Array.from(e);function TW(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=kE(e),i=kE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=kE())=>{i=a(MB([0]),c),n=a(),c.length!==0&&(i=a(MB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Ys(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const Vge={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function yv(e,r,t={}){const n=(i,s,o)=>{const a=Vge[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Gge=Object.freeze(Object.defineProperty({__proto__:null,bitGet:qge,bitLen:Wge,bitMask:iP,bitSet:Kge,bytesToHex:Up,bytesToNumberBE:ls,bytesToNumberLE:nP,concatBytes:Ys,createHmacDrbg:TW,ensureBytes:Ti,equalBytes:Uge,hexToBytes:Wp,hexToNumber:rP,numberToBytesBE:Ac,numberToBytesLE:kW,numberToHexUnpadded:SW,numberToVarBytesBE:Hge,utf8ToBytes:O_,validateObject:yv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vi=BigInt(0),Nn=BigInt(1),jf=BigInt(2),Yge=BigInt(3),sI=BigInt(4),LB=BigInt(5),FB=BigInt(8);BigInt(9);BigInt(16);function ti(e,r){const t=e%r;return t>=vi?t:r+t}function Zge(e,r,t){if(t<=vi||r<vi)throw new Error("Expected power/modulo > 0");if(t===Nn)return vi;let n=Nn;for(;r>vi;)r&Nn&&(n=n*e%t),e=e*e%t,r>>=Nn;return n}function Ao(e,r,t){let n=e;for(;r-- >vi;)n*=n,n%=t;return n}function oI(e,r){if(e===vi||r<=vi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ti(e,r),n=r,i=vi,s=Nn;for(;t!==vi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Nn)throw new Error("invert: does not exist");return ti(i,r)}function Xge(e){const r=(e-Nn)/jf;let t,n,i;for(t=e-Nn,n=0;t%jf===vi;t/=jf,n++);for(i=jf;i<e&&Zge(i,r,e)!==e-Nn;i++);if(n===1){const o=(e+Nn)/sI;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Nn)/jf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Nn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),d=a.mul(d,f),u=y}return c}}function Jge(e){if(e%sI===Yge){const r=(e+Nn)/sI;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%FB===LB){const r=(e-LB)/FB;return function(n,i){const s=n.mul(i,jf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,jf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Xge(e)}const Qge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function IW(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Qge.reduce((n,i)=>(n[i]="function",n),r);return yv(e,t)}function eye(e,r,t){if(t<vi)throw new Error("Expected power > 0");if(t===vi)return e.ONE;if(t===Nn)return r;let n=e.ONE,i=r;for(;t>vi;)t&Nn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Nn;return n}function tye(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function sP(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function rye(e,r,t=!1,n={}){if(e<=vi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=sP(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Jge(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:iP(i),ZERO:vi,ONE:Nn,create:l=>ti(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return vi<=l&&l<e},is0:l=>l===vi,isOdd:l=>(l&Nn)===Nn,neg:l=>ti(-l,e),eql:(l,u)=>l===u,sqr:l=>ti(l*l,e),add:(l,u)=>ti(l+u,e),sub:(l,u)=>ti(l-u,e),mul:(l,u)=>ti(l*u,e),pow:(l,u)=>eye(a,l,u),div:(l,u)=>ti(l*oI(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>oI(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>tye(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?kW(l,s):Ac(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?nP(l):ls(l)}});return Object.freeze(a)}function nye(e,r,t=!1){e=Ti("privateHash",e);const n=e.length,i=sP(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?nP(e):ls(e);return ti(s,r-Nn)+Nn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iye=BigInt(0),TE=BigInt(1);function sye(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>iye;)s&TE&&(o=o.add(a)),a=a.double(),s>>=TE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let d=1;d<a;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=TE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function AW(e){return IW(e.Fp),yv(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sP(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function oye(e){const r=AW(e);yv(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:aye,hexToBytes:lye}=Gge,Jf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Jf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:aye(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Jf,t=typeof e=="string"?lye(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Jf._parseInt(t.subarray(2)),{d:o,l:a}=Jf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},ba=BigInt(0),Fn=BigInt(1),zl=BigInt(2),qw=BigInt(3),jB=BigInt(4);function uye(e){const r=oye(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Ys(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&ba<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Up(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:ls(Ti("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=ti(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ti("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,qw),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),z=t.mul(I,I),V=t.mul(A,x);return V=t.add(V,V),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,z),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(V,O),g=t.mul(_,g),z=t.mul(b,z),V=t.sub(M,z),V=t.mul(b,V),V=t.add(V,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,z),M=t.mul(M,V),C=t.add(C,M),z=t.mul(x,I),z=t.add(z,z),M=t.mul(z,V),O=t.sub(O,M),g=t.mul(z,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,z=t.mul(r.b,qw);let V=t.mul(T,x),ne=t.mul(_,I),re=t.mul(A,O),J=t.add(T,_),F=t.add(x,I);J=t.mul(J,F),F=t.add(V,ne),J=t.sub(J,F),F=t.add(T,A);let Z=t.add(x,O);return F=t.mul(F,Z),Z=t.add(V,re),F=t.sub(F,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(ne,re),Z=t.sub(Z,C),M=t.mul(B,F),C=t.mul(z,re),M=t.add(C,M),C=t.sub(ne,M),M=t.add(ne,M),g=t.mul(C,M),ne=t.add(V,V),ne=t.add(ne,V),re=t.mul(B,re),F=t.mul(z,F),ne=t.add(ne,re),re=t.sub(V,re),re=t.mul(B,re),F=t.add(F,re),V=t.mul(ne,F),g=t.add(g,V),V=t.mul(Z,F),C=t.mul(J,C),C=t.sub(C,V),V=t.mul(J,ne),M=t.mul(Z,M),M=t.add(M,V),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===ba)return T;if(a(b),b===Fn)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>ba||O>ba;)x&Fn&&(C=C.add(M)),O&Fn&&(g=g.add(M)),M=M.double(),x>>=Fn,O>>=Fn;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:z,f:V}=this.wNAF(g);M=y.constTimeNegate(I,M),z=y.constTimeNegate(C,z),z=new c(t.mul(z.px,x.beta),z.py,z.pz),_=M.add(z),A=B.add(V)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===ba||C===Fn||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Fn)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Fn?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Up(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=sye(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function cye(e){const r=AW(e);return yv(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function fye(e){const r=cye(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(F){return ba<F&&F<t.ORDER}function a(F){return ti(F,n)}function l(F){return oI(F,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=uye({...r,toBytes(F,Z,ie){const _e=Z.toAffine(),we=t.toBytes(_e.x),Ce=Ys;return ie?Ce(Uint8Array.from([Z.hasEvenY()?2:3]),we):Ce(Uint8Array.from([4]),we,t.toBytes(_e.y))},fromBytes(F){const Z=F.length,ie=F[0],_e=F.subarray(1);if(Z===i&&(ie===2||ie===3)){const we=ls(_e);if(!o(we))throw new Error("Point is not on curve");const Ce=c(we);let He=t.sqrt(Ce);const Ge=(He&Fn)===Fn;return(ie&1)===1!==Ge&&(He=t.neg(He)),{x:we,y:He}}else if(Z===s&&ie===4){const we=t.fromBytes(_e.subarray(0,t.BYTES)),Ce=t.fromBytes(_e.subarray(t.BYTES,2*t.BYTES));return{x:we,y:Ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=F=>Up(Ac(F,r.nByteLength));function w(F){const Z=n>>Fn;return F>Z}function b(F){return w(F)?a(-F):F}const T=(F,Z,ie)=>ls(F.slice(Z,ie));class _{constructor(Z,ie,_e){this.r=Z,this.s=ie,this.recovery=_e,this.assertValidity()}static fromCompact(Z){const ie=r.nByteLength;return Z=Ti("compactSignature",Z,ie*2),new _(T(Z,0,ie),T(Z,ie,2*ie))}static fromDER(Z){const{r:ie,s:_e}=Jf.toSig(Ti("DER",Z));return new _(ie,_e)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:ie,s:_e,recovery:we}=this,Ce=g(Ti("msgHash",Z));if(we==null||![0,1,2,3].includes(we))throw new Error("recovery id invalid");const He=we===2||we===3?ie+r.n:ie;if(He>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=we&1?"03":"02",it=u.fromHex(Ge+y(He)),xe=l(He),ge=a(-Ce*xe),Te=a(_e*xe),je=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Wp(this.toDERHex())}toDERHex(){return Jf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Wp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(F){try{return f(F),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const F=r.randomBytes(t.BYTES+8),Z=nye(F,n);return Ac(Z,r.nByteLength)},precompute(F=8,Z=u.BASE){return Z._setWindowSize(F),Z.multiply(BigInt(3)),Z}};function x(F,Z=!0){return u.fromPrivateKey(F).toRawBytes(Z)}function I(F){const Z=F instanceof Uint8Array,ie=typeof F=="string",_e=(Z||ie)&&F.length;return Z?_e===i||_e===s:ie?_e===2*i||_e===2*s:F instanceof u}function O(F,Z,ie=!0){if(I(F))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(f(F)).toRawBytes(ie)}const C=r.bits2int||function(F){const Z=ls(F),ie=F.length*8-r.nBitLength;return ie>0?Z>>BigInt(ie):Z},g=r.bits2int_modN||function(F){return a(C(F))},M=iP(r.nBitLength);function B(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(ba<=F&&F<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Ac(F,r.nByteLength)}function z(F,Z,ie=V){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:_e,randomBytes:we}=r;let{lowS:Ce,prehash:He,extraEntropy:Ge}=ie;Ce==null&&(Ce=!0),F=Ti("msgHash",F),He&&(F=Ti("prehashed msgHash",_e(F)));const it=g(F),xe=f(Z),ge=[B(xe),B(it)];if(Ge!=null){const S=Ge===!0?we(t.BYTES):Ge;ge.push(Ti("extraEntropy",S,t.BYTES))}const Te=Ys(...ge),je=it;function $(S){const N=C(S);if(!d(N))return;const L=l(N),j=u.BASE.multiply(N).toAffine(),K=a(j.x);if(K===ba)return;const ae=a(L*a(je+K*xe));if(ae===ba)return;let ye=(j.x===K?0:2)|Number(j.y&Fn),Ue=ae;return Ce&&w(ae)&&(Ue=b(ae),ye^=1),new _(K,Ue,ye)}return{seed:Te,k2sig:$}}const V={lowS:r.lowS,prehash:!1},ne={lowS:r.lowS,prehash:!1};function re(F,Z,ie=V){const{seed:_e,k2sig:we}=z(F,Z,ie);return TW(r.hash.outputLen,r.nByteLength,r.hmac)(_e,we)}u.BASE._setWindowSize(8);function J(F,Z,ie,_e=ne){var j;const we=F;if(Z=Ti("msgHash",Z),ie=Ti("publicKey",ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:He}=_e;let Ge,it;try{if(typeof we=="string"||we instanceof Uint8Array)try{Ge=_.fromDER(we)}catch(K){if(!(K instanceof Jf.Err))throw K;Ge=_.fromCompact(we)}else if(typeof we=="object"&&typeof we.r=="bigint"&&typeof we.s=="bigint"){const{r:K,s:ae}=we;Ge=new _(K,ae)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(K){if(K.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&Ge.hasHighS())return!1;He&&(Z=r.hash(Z));const{r:xe,s:ge}=Ge,Te=g(Z),je=l(ge),$=a(Te*je),S=a(xe*je),N=(j=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:j.toAffine();return N?a(N.x)===xe:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:J,ProjectivePoint:u,Signature:_,utils:A}}function hye(e,r){const t=e.ORDER;let n=ba;for(let d=t-Fn;d%zl===ba;d/=zl)n+=Fn;const i=n,s=(t-Fn)/zl**i,o=(s-Fn)/zl,a=zl**i-Fn,l=zl**(i-Fn),u=e.pow(r,s),f=e.pow(r,(s+Fn)/zl);let c=(d,y)=>{let w=u,b=e.pow(y,a),T=e.sqr(b);T=e.mul(T,y);let _=e.mul(d,T);_=e.pow(_,o),_=e.mul(_,b),b=e.mul(_,y),T=e.mul(_,d);let A=e.mul(T,b);_=e.pow(A,l);let x=e.eql(_,e.ONE);b=e.mul(T,f),_=e.mul(A,w),T=e.cmov(b,T,x),A=e.cmov(_,A,x);for(let I=i;I>Fn;I--){let O=zl**(I-zl),C=e.pow(A,O);const g=e.eql(C,e.ONE);b=e.mul(T,w),w=e.mul(w,w),C=e.mul(A,w),T=e.cmov(b,T,g),A=e.cmov(C,A,g)}return{isValid:x,value:T}};if(e.ORDER%jB===qw){const d=(e.ORDER-qw)/jB,y=e.sqrt(e.neg(r));c=(w,b)=>{let T=e.sqr(b);const _=e.mul(w,b);T=e.mul(T,_);let A=e.pow(T,d);A=e.mul(A,_);const x=e.mul(A,y),I=e.mul(e.sqr(A),b),O=e.eql(I,w);let C=e.cmov(x,A,O);return{isValid:O,value:C}}}return c}function dye(e,r){if(IW(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=hye(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,f,c;i=e.sqr(n),i=e.mul(i,r.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,r.B),a=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,r.A),s=e.sqr(o),u=e.sqr(a),l=e.mul(u,r.A),s=e.add(s,l),s=e.mul(s,o),u=e.mul(u,a),l=e.mul(u,r.B),s=e.add(s,l),f=e.mul(i,o);const{isValid:d,value:y}=t(s,u);c=e.mul(i,n),c=e.mul(c,y),f=e.cmov(f,o,d),c=e.cmov(c,y,d);const w=e.isOdd(n)===e.isOdd(c);return c=e.cmov(e.neg(c),c,w),f=e.div(f,a),{x:f,y:c}}}function pye(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return O_(e);throw new Error("DST must be Uint8Array or string")}const vye=ls;function vc(e,r){if(e<0||e>=1<<8*r)throw new Error(`bad I2OSP call: value=${e} length=${r}`);const t=Array.from({length:r}).fill(0);for(let n=r-1;n>=0;n--)t[n]=e&255,e>>>=8;return new Uint8Array(t)}function gye(e,r){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function My(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function oP(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function yye(e,r,t,n){My(e),My(r),oP(t),r.length>255&&(r=n(Ys(O_("H2C-OVERSIZE-DST-"),r)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(t/i);if(o>255)throw new Error("Invalid xmd length");const a=Ys(r,vc(r.length,1)),l=vc(0,s),u=vc(t,2),f=new Array(o),c=n(Ys(l,e,u,vc(0,1),a));f[0]=n(Ys(c,vc(1,1),a));for(let y=1;y<=o;y++){const w=[gye(c,f[y-1]),vc(y+1,1),a];f[y]=n(Ys(...w))}return Ys(...f).slice(0,t)}function mye(e,r,t,n,i){if(My(e),My(r),oP(t),r.length>255){const s=Math.ceil(2*n/8);r=i.create({dkLen:s}).update(O_("H2C-OVERSIZE-DST-")).update(r).digest()}if(t>65535||r.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(e).update(vc(t,2)).update(r).update(vc(r.length,1)).digest()}function zB(e,r,t){yv(t,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:l}=t;My(e),oP(r);const u=pye(l),f=n.toString(2).length,c=Math.ceil((f+i)/8),d=r*s*c;let y;if(a==="xmd")y=yye(e,u,d,o);else if(a==="xof")y=mye(e,u,d,i,o);else if(a==="_internal_pass")y=e;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(r);for(let b=0;b<r;b++){const T=new Array(s);for(let _=0;_<s;_++){const A=c*(_+b*s),x=y.subarray(A,A+c);T[_]=ti(vye(x),n)}w[b]=T}return w}function bye(e,r){const t=r.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,l]=t.map(u=>u.reduce((f,c)=>e.add(e.mul(f,n),c)));return n=e.div(s,o),i=e.mul(i,e.div(a,l)),{x:n,y:i}}}function wye(e,r,t){if(typeof r!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=zB(n,2,{...t,DST:t.DST,...i}),o=e.fromAffine(r(s[0])),a=e.fromAffine(r(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=zB(n,1,{...t,DST:t.encodeDST,...i}),o=e.fromAffine(r(s[0])).clearCofactor();return o.assertValidity(),o}}}let OW=class extends wW{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Xf.hash(r);const n=tP(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Xf.exists(this),this.iHash.update(r),this}digestInto(r){Xf.exists(this),Xf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CW=(e,r,t)=>new OW(e,r).update(t).digest();CW.create=(e,r)=>new OW(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $ye(e){return{hash:e,hmac:(r,...t)=>CW(e,r,Nge(...t)),randomBytes:_W}}function _ye(e,r){const t=n=>fye({...e,...$ye(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Kw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),PW=BigInt(1),Vw=BigInt(2),HB=(e,r)=>(e+r/Vw)/r;function NW(e){const r=C_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=Ao(f,t,r)*f%r,d=Ao(c,t,r)*f%r,y=Ao(d,Vw,r)*u%r,w=Ao(y,i,r)*y%r,b=Ao(w,s,r)*w%r,T=Ao(b,a,r)*b%r,_=Ao(T,l,r)*T%r,A=Ao(_,a,r)*b%r,x=Ao(A,t,r)*f%r,I=Ao(x,o,r)*w%r,O=Ao(I,n,r)*u%r,C=Ao(O,Vw,r);if(!Lc.eql(Lc.sqr(C),e))throw new Error("Cannot find square root");return C}const Lc=rye(C_,void 0,void 0,{sqrt:NW}),rs=_ye({a:BigInt(0),b:BigInt(7),Fp:Lc,n:Kw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Kw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-PW*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=HB(s*e,r),l=HB(-n*e,r);let u=ti(e-a*t-l*i,r),f=ti(-a*n-l*s,r);const c=u>o,d=f>o;if(c&&(u=r-u),d&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:f}}}},Ww),P_=BigInt(0),RW=e=>typeof e=="bigint"&&P_<e&&e<C_,xye=e=>typeof e=="bigint"&&P_<e&&e<Kw,UB={};function Gw(e,...r){let t=UB[e];if(t===void 0){const n=Ww(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Ys(n,n),UB[e]=t}return Ww(Ys(t,...r))}const aP=e=>e.toRawBytes(!0).slice(1),aI=e=>Ac(e,32),IE=e=>ti(e,C_),Ly=e=>ti(e,Kw),lP=rs.ProjectivePoint,Eye=(e,r,t)=>lP.BASE.multiplyAndAddUnsafe(e,r,t);function lI(e){let r=rs.utils.normPrivateKeyToScalar(e),t=lP.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ly(-r),bytes:aP(t)}}function DW(e){if(!RW(e))throw new Error("bad x: need 0 < x < p");const r=IE(e*e),t=IE(r*e+BigInt(7));let n=NW(t);n%Vw!==P_&&(n=IE(-n));const i=new lP(e,n,PW);return i.assertValidity(),i}function BW(...e){return Ly(ls(Gw("BIP0340/challenge",...e)))}function Sye(e){return lI(e).bytes}function kye(e,r,t=_W(32)){const n=Ti("message",e),{bytes:i,scalar:s}=lI(r),o=Ti("auxRand",t,32),a=aI(s^ls(Gw("BIP0340/aux",o))),l=Gw("BIP0340/nonce",a,i,n),u=Ly(ls(l));if(u===P_)throw new Error("sign failed: k is zero");const{bytes:f,scalar:c}=lI(u),d=BW(f,i,n),y=new Uint8Array(64);if(y.set(f,0),y.set(aI(Ly(c+d*s)),32),!MW(y,n,i))throw new Error("sign: Invalid signature produced");return y}function MW(e,r,t){const n=Ti("signature",e,64),i=Ti("message",r),s=Ti("publicKey",t,32);try{const o=DW(ls(s)),a=ls(n.subarray(0,32));if(!RW(a))return!1;const l=ls(n.subarray(32,64));if(!xye(l))return!1;const u=BW(aI(a),aP(o),i),f=Eye(o,l,Ly(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const Om={getPublicKey:Sye,sign:kye,verify:MW,utils:{randomPrivateKey:rs.utils.randomPrivateKey,lift_x:DW,pointToBytes:aP,numberToBytesBE:Ac,bytesToNumberBE:ls,taggedHash:Gw,mod:ti}},Tye=bye(Lc,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(r=>BigInt(r)))),Iye=dye(Lc,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Lc.create(BigInt("-11"))});wye(rs.ProjectivePoint,e=>{const{x:r,y:t}=Iye(Lc.create(e[0]));return Tye(r,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Lc.ORDER,m:1,k:128,expand:"xmd",hash:Ww});const Y1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Aye=Object.freeze(Object.defineProperty({__proto__:null,crypto:Y1},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oye=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Cye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ah=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ca=(e,r)=>e<<32-r|e>>>r,LW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!LW)throw new Error("Non little-endian hardware is not supported");const Pye=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Zs(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Pye[e[t]];return r}function Fc(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}const FW=async()=>{};async function Nye(e,r,t){let n=Date.now();for(let i=0;i<e;i++){t(i);const s=Date.now()-n;s>=0&&s<r||(await FW(),n+=s)}}function uP(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Cm(e){if(typeof e=="string"&&(e=uP(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function np(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let cP=class{clone(){return this._cloneInto()}};const Rye=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function Dye(e,r){if(r!==void 0&&(typeof r!="object"||!Rye(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function Xc(e){const r=n=>e().update(Cm(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Bye(e){const r=(n,i)=>e(i).update(Cm(n)).digest(),t=e({});return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=n=>e(n),r}function jW(e=32){if(Y1&&typeof Y1.getRandomValues=="function")return Y1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Mye=Object.freeze(Object.defineProperty({__proto__:null,Hash:cP,asyncLoop:Nye,bytesToHex:Zs,checkOpts:Dye,concatBytes:np,createView:ah,hexToBytes:Fc,isLE:LW,nextTick:FW,randomBytes:jW,rotr:ca,toBytes:Cm,u32:Cye,u8:Oye,utf8ToBytes:uP,wrapConstructor:Xc,wrapConstructorWithOpts:Bye},Symbol.toStringTag,{value:"Module"}));function Yw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function zW(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function bc(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function HW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yw(e.outputLen),Yw(e.blockLen)}function UW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function WW(e,r){bc(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Ec={number:Yw,bool:zW,bytes:bc,hash:HW,exists:UW,output:WW},Lye=Object.freeze(Object.defineProperty({__proto__:null,bool:zW,bytes:bc,default:Ec,exists:UW,hash:HW,number:Yw,output:WW},Symbol.toStringTag,{value:"Module"}));function Fye(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}class fP extends cP{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=ah(this.buffer)}update(r){Ec.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Cm(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=ah(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Ec.exists(this),Ec.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Fye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=ah(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}}const jye=(e,r,t)=>e&r^~e&t,zye=(e,r,t)=>e&r^e&t^r&t,Hye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),oc=new Uint32Array(64);class qW extends fP{constructor(){super(64,32,8,!1),this.A=sc[0]|0,this.B=sc[1]|0,this.C=sc[2]|0,this.D=sc[3]|0,this.E=sc[4]|0,this.F=sc[5]|0,this.G=sc[6]|0,this.H=sc[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)oc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=oc[c-15],y=oc[c-2],w=ca(d,7)^ca(d,18)^d>>>3,b=ca(y,17)^ca(y,19)^y>>>10;oc[c]=b+oc[c-7]+w+oc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=ca(a,6)^ca(a,11)^ca(a,25),y=f+d+jye(a,l,u)+Hye[c]+oc[c]|0,b=(ca(n,2)^ca(n,13)^ca(n,22))+zye(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){oc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Uye extends qW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const mv=Xc(()=>new qW),Wye=Xc(()=>new Uye),qye=Object.freeze(Object.defineProperty({__proto__:null,sha224:Wye,sha256:mv},Symbol.toStringTag,{value:"Module"}));var hP={};Object.defineProperty(hP,"__esModule",{value:!0});var dP=hP.wordlist=void 0;dP=hP.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Xs={};const Kye=Yc(Lye);var qp={},ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.output=ji.exists=ji.hash=ji.bytes=ji.bool=ji.number=void 0;function Zw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ji.number=Zw;function KW(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ji.bool=KW;function pP(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}ji.bytes=pP;function VW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Zw(e.outputLen),Zw(e.blockLen)}ji.hash=VW;function GW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}ji.exists=GW;function YW(e,r){pP(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}ji.output=YW;const Vye={number:Zw,bool:KW,bytes:pP,hash:VW,exists:GW,output:YW};ji.default=Vye;var ZW={},vP={};const Gye=Yc(Aye);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=Gye,t=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);e.u8=t;const n=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));e.u32=n;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);e.createView=i;const s=(I,O)=>I<<32-O|I>>>O;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(I,O)=>O.toString(16).padStart(2,"0"));function a(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let O="";for(let C=0;C<I.length;C++)O+=o[I[C]];return O}e.bytesToHex=a;function l(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const O=new Uint8Array(I.length/2);for(let C=0;C<O.length;C++){const g=C*2,M=I.slice(g,g+2),B=Number.parseInt(M,16);if(Number.isNaN(B)||B<0)throw new Error("Invalid byte sequence");O[C]=B}return O}e.hexToBytes=l;const u=async()=>{};e.nextTick=u;async function f(I,O,C){let g=Date.now();for(let M=0;M<I;M++){C(M);const B=Date.now()-g;B>=0&&B<O||(await(0,e.nextTick)(),g+=B)}}e.asyncLoop=f;function c(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}e.utf8ToBytes=c;function d(I){if(typeof I=="string"&&(I=c(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}e.toBytes=d;function y(...I){if(!I.every(g=>g instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const O=I.reduce((g,M)=>g+M.length,0),C=new Uint8Array(O);for(let g=0,M=0;g<I.length;g++){const B=I[g];C.set(B,M),M+=B.length}return C}e.concatBytes=y;class w{clone(){return this._cloneInto()}}e.Hash=w;const b=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function T(I,O){if(O!==void 0&&(typeof O!="object"||!b(O)))throw new TypeError("Options should be object or undefined");return Object.assign(I,O)}e.checkOpts=T;function _(I){const O=g=>I().update(d(g)).digest(),C=I();return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=()=>I(),O}e.wrapConstructor=_;function A(I){const O=(g,M)=>I(M).update(d(g)).digest(),C=I({});return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=g=>I(g),O}e.wrapConstructorWithOpts=A;function x(I=32){if(r.crypto&&typeof r.crypto.getRandomValues=="function")return r.crypto.getRandomValues(new Uint8Array(I));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=x})(vP);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const r=ji,t=vP;class n extends t.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,r.default.hash(o);const l=(0,t.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,f=new Uint8Array(u);f.set(l.length>u?o.create().update(l).digest():l);for(let c=0;c<f.length;c++)f[c]^=54;this.iHash.update(f),this.oHash=o.create();for(let c=0;c<f.length;c++)f[c]^=106;this.oHash.update(f),f.fill(0)}update(o){return r.default.exists(this),this.iHash.update(o),this}digestInto(o){r.default.exists(this),r.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:l,finished:u,destroyed:f,blockLen:c,outputLen:d}=this;return o=o,o.finished=u,o.destroyed=f,o.blockLen=c,o.outputLen=d,o.oHash=a._cloneInto(o.oHash),o.iHash=l._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new n(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new n(s,o)})(ZW);Object.defineProperty(qp,"__esModule",{value:!0});qp.pbkdf2Async=qp.pbkdf2=void 0;const B0=ji,Yye=ZW,xp=vP;function XW(e,r,t,n){B0.default.hash(e);const i=(0,xp.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(B0.default.number(s),B0.default.number(o),B0.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,xp.toBytes)(r),u=(0,xp.toBytes)(t),f=new Uint8Array(o),c=Yye.hmac.create(e,l),d=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:c,PRFSalt:d}}function JW(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function Zye(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=XW(e,r,t,n);let u;const f=new Uint8Array(4),c=(0,xp.createView)(f),d=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(f).digestInto(d),b.set(d.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(d).digestInto(d);for(let _=0;_<b.length;_++)b[_]^=d[_]}}return JW(a,l,o,u,d)}qp.pbkdf2=Zye;async function Xye(e,r,t,n){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:l,PRFSalt:u}=XW(e,r,t,n);let f;const c=new Uint8Array(4),d=(0,xp.createView)(c),y=new Uint8Array(l.outputLen);for(let w=1,b=0;b<s;w++,b+=l.outputLen){const T=a.subarray(b,b+l.outputLen);d.setInt32(0,w,!1),(f=u._cloneInto(f)).update(c).digestInto(y),T.set(y.subarray(0,T.length)),await(0,xp.asyncLoop)(i-1,o,_=>{l._cloneInto(f).update(y).digestInto(y);for(let A=0;A<T.length;A++)T[A]^=y[A]})}return JW(l,u,a,f,y)}qp.pbkdf2Async=Xye;const Jye=Yc(qye),M0=BigInt(2**32-1),uI=BigInt(32);function QW(e,r=!1){return r?{h:Number(e&M0),l:Number(e>>uI&M0)}:{h:Number(e>>uI&M0)|0,l:Number(e&M0)|0}}function Qye(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=QW(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const eme=(e,r)=>BigInt(e>>>0)<<uI|BigInt(r>>>0),tme=(e,r,t)=>e>>>t,rme=(e,r,t)=>e<<32-t|r>>>t,nme=(e,r,t)=>e>>>t|r<<32-t,ime=(e,r,t)=>e<<32-t|r>>>t,sme=(e,r,t)=>e<<64-t|r>>>t-32,ome=(e,r,t)=>e>>>t-32|r<<64-t,ame=(e,r)=>r,lme=(e,r)=>e,ume=(e,r,t)=>e<<t|r>>>32-t,cme=(e,r,t)=>r<<t|e>>>32-t,fme=(e,r,t)=>r<<t-32|e>>>64-t,hme=(e,r,t)=>e<<t-32|r>>>64-t;function dme(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const pme=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),vme=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,gme=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),yme=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,mme=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),bme=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,or={fromBig:QW,split:Qye,toBig:eme,shrSH:tme,shrSL:rme,rotrSH:nme,rotrSL:ime,rotrBH:sme,rotrBL:ome,rotr32H:ame,rotr32L:lme,rotlSH:ume,rotlSL:cme,rotlBH:fme,rotlBL:hme,add:dme,add3L:pme,add3H:vme,add4L:gme,add4H:yme,add5H:bme,add5L:mme},[wme,$me]=or.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ac=new Uint32Array(80),lc=new Uint32Array(80);class Pm extends fP{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)ac[x]=r.getUint32(t),lc[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=ac[x-15]|0,O=lc[x-15]|0,C=or.rotrSH(I,O,1)^or.rotrSH(I,O,8)^or.shrSH(I,O,7),g=or.rotrSL(I,O,1)^or.rotrSL(I,O,8)^or.shrSL(I,O,7),M=ac[x-2]|0,B=lc[x-2]|0,z=or.rotrSH(M,B,19)^or.rotrBH(M,B,61)^or.shrSH(M,B,6),V=or.rotrSL(M,B,19)^or.rotrBL(M,B,61)^or.shrSL(M,B,6),ne=or.add4L(g,V,lc[x-7],lc[x-16]),re=or.add4H(ne,C,z,ac[x-7],ac[x-16]);ac[x]=re|0,lc[x]=ne|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=or.rotrSH(c,d,14)^or.rotrSH(c,d,18)^or.rotrBH(c,d,41),O=or.rotrSL(c,d,14)^or.rotrSL(c,d,18)^or.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,M=or.add5L(A,O,g,$me[x],lc[x]),B=or.add5H(M,_,I,C,wme[x],ac[x]),z=M|0,V=or.rotrSH(n,i,28)^or.rotrBH(n,i,34)^or.rotrBH(n,i,39),ne=or.rotrSL(n,i,28)^or.rotrBL(n,i,34)^or.rotrBL(n,i,39),re=n&s^n&a^s&a,J=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=or.add(u|0,f|0,B|0,z|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const F=or.add3L(z,ne,J);n=or.add3H(F,B,V,re),i=F|0}({h:n,l:i}=or.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=or.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=or.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=or.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:d}=or.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=or.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=or.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=or.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A)}roundClean(){ac.fill(0),lc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class _me extends Pm{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class xme extends Pm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Eme extends Pm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const cI=Xc(()=>new Pm),Sme=Xc(()=>new _me),kme=Xc(()=>new xme),Tme=Xc(()=>new Eme),Ime=Object.freeze(Object.defineProperty({__proto__:null,SHA512:Pm,sha384:Tme,sha512:cI,sha512_224:Sme,sha512_256:kme},Symbol.toStringTag,{value:"Module"})),Ame=Yc(Ime),Ome=Yc(Mye),eq=Yc(ife);Object.defineProperty(Xs,"__esModule",{value:!0});var tq=Xs.mnemonicToSeedSync=Xs.mnemonicToSeed=fq=Xs.validateMnemonic=Xs.entropyToMnemonic=Xs.mnemonicToEntropy=aq=Xs.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const rq=Kye,nq=qp,Cme=Jye,iq=Ame,Pme=Ome,L0=eq,Nme=e=>e[0]==="";function sq(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function gP(e){const r=sq(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function oq(e){rq.default.bytes(e,16,20,24,28,32)}function Rme(e,r=128){if(rq.default.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return cq((0,Pme.randomBytes)(r/8),e)}var aq=Xs.generateMnemonic=Rme;const Dme=e=>{const r=8-e.length/4;return new Uint8Array([(0,Cme.sha256)(e)[0]>>r<<r])};function lq(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),L0.utils.chain(L0.utils.checksum(1,Dme),L0.utils.radix2(11,!0),L0.utils.alphabet(e))}function uq(e,r){const{words:t}=gP(e),n=lq(r).decode(t);return oq(n),n}Xs.mnemonicToEntropy=uq;function cq(e,r){return oq(e),lq(r).encode(e).join(Nme(r)?"":" ")}Xs.entropyToMnemonic=cq;function Bme(e,r){try{uq(e,r)}catch{return!1}return!0}var fq=Xs.validateMnemonic=Bme;const hq=e=>sq(`mnemonic${e}`);function Mme(e,r=""){return(0,nq.pbkdf2Async)(iq.sha512,gP(e).nfkd,hq(r),{c:2048,dkLen:64})}Xs.mnemonicToSeed=Mme;function Lme(e,r=""){return(0,nq.pbkdf2)(iq.sha512,gP(e).nfkd,hq(r),{c:2048,dkLen:64})}tq=Xs.mnemonicToSeedSync=Lme;class dq extends cP{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Ec.hash(r);const n=Cm(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Ec.exists(this),this.iHash.update(r),this}digestInto(r){Ec.exists(this),Ec.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fI=(e,r,t)=>new dq(e,r).update(t).digest();fI.create=(e,r)=>new dq(e,r);const Fme=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),pq=Uint8Array.from({length:16},(e,r)=>r),jme=pq.map(e=>(9*e+5)%16);let yP=[pq],mP=[jme];for(let e=0;e<4;e++)for(let r of[yP,mP])r.push(r[e].map(t=>Fme[t]));const vq=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),zme=yP.map((e,r)=>e.map(t=>vq[r][t])),Hme=mP.map((e,r)=>e.map(t=>vq[r][t])),Ume=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Wme=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),F0=(e,r)=>e<<r|e>>>32-r;function WB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const j0=new Uint32Array(16);class qme extends fP{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)j0[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,f=u,c=this.h4|0,d=c;for(let y=0;y<5;y++){const w=4-y,b=Ume[y],T=Wme[y],_=yP[y],A=mP[y],x=zme[y],I=Hme[y];for(let O=0;O<16;O++){const C=F0(n+WB(y,s,a,u)+j0[_[O]]+b,x[O])+c|0;n=c,c=u,u=F0(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=F0(i+WB(w,o,l,f)+j0[A[O]]+T,I[O])+d|0;i=d,d=f,f=F0(l,10)|0,l=o,o=C}}this.set(this.h1+a+f|0,this.h2+u+d|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){j0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Kme=Xc(()=>new qme),z0=rs.ProjectivePoint,AE=N3(mv);function qB(e){return BigInt(`0x${Zs(e)}`)}function Vme(e){return Fc(e.toString(16).padStart(64,"0"))}const Gme=uP("Bitcoin seed"),OE={private:76066276,public:76067358},CE=2147483648,Yme=e=>Kme(mv(e)),Zme=e=>ah(e).getUint32(0,!1),H0=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return ah(r).setUint32(0,e,!1),r};class zf{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Zme(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return AE.encode(this.serialize(this.versions.private,np(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return AE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=OE){if(bc(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=fI(cI,Gme,r);return new zf({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=OE){const n=AE.decode(r),i=ah(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new zf({...o,privateKey:a.slice(1)}):new zf({...o,publicKey:a})}static fromJSON(r){return zf.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||OE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!rs.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:qB(r.privateKey),this.privKeyBytes=Vme(this.privKey),this.pubKey=rs.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=z0.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Yme(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=CE)throw new Error("Invalid index");s[2]==="'"&&(o+=CE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=H0(r);if(r>=CE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=np(new Uint8Array([0]),a,t)}else t=np(this.pubKey,t);const n=fI(cI,this.chainCode,t),i=qB(n.slice(0,32)),s=n.slice(32);if(!rs.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ti(this.privKey+i,rs.CURVE.n);if(!rs.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=z0.fromHex(this.pubKey).add(z0.fromPrivateKey(i));if(a.equals(z0.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new zf(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return bc(r,32),rs.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(bc(r,32),bc(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=rs.Signature.fromCompact(t)}catch{return!1}return rs.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return bc(t,33),np(H0(r),new Uint8Array([this.depth]),H0(this.parentFingerprint),H0(this.index),this.chainCode,t)}}var Xme=Object.defineProperty,qi=(e,r)=>{for(var t in r)Xme(e,t,{get:r[t],enumerable:!0})};function gq(e){return Zs(Om.getPublicKey(e))}var Jme={};qi(Jme,{insertEventIntoAscendingList:()=>tbe,insertEventIntoDescendingList:()=>ebe,normalizeURL:()=>Qme,utf8Decoder:()=>wc,utf8Encoder:()=>yl});var wc=new TextDecoder("utf-8"),yl=new TextEncoder;function Qme(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function ebe(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function tbe(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var ei=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(ei||{});function yq(e,r){let t=e;return t.pubkey=gq(r),t.id=bP(t),t.sig=ibe(t,r),t}function rbe(e){if(!wP(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function bP(e){let r=mv(yl.encode(rbe(e)));return Zs(r)}var nbe=e=>e instanceof Object;function wP(e){if(!nbe(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function $P(e){try{return Om.verify(e.sig,bP(e),e.pubkey)}catch{return!1}}function ibe(e,r){return Zs(Om.sign(bP(e),r))}function mq(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>=e.until)}function sbe(e,r){for(let t=0;t<e.length;t++)if(mq(e[t],r))return!0;return!1}var obe={};qi(obe,{getHex64:()=>_P,getInt:()=>bq,getSubscriptionId:()=>abe,matchEventId:()=>lbe,matchEventKind:()=>cbe,matchEventPubkey:()=>ube});function _P(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function bq(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function abe(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function lbe(e,r){return r===_P(e,"id")}function ube(e,r){return r===_P(e,"pubkey")}function cbe(e,r){return r===bq(e,"kind")}var fbe={};qi(fbe,{BECH32_REGEX:()=>wq,decode:()=>N_,naddrEncode:()=>ybe,neventEncode:()=>gbe,noteEncode:()=>pbe,nprofileEncode:()=>vbe,npubEncode:()=>dbe,nrelayEncode:()=>mbe,nsecEncode:()=>hbe});var bv=5e3,wq=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function N_(e){var i,s,o,a,l,u,f;let{prefix:r,words:t}=Dn.decode(e,bv),n=new Uint8Array(Dn.fromWords(t));switch(r){case"nprofile":{let c=U0(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Zs(c[0][0]),relays:c[1]?c[1].map(d=>wc.decode(d)):[]}}}case"nevent":{let c=U0(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Zs(c[0][0]),relays:c[1]?c[1].map(d=>wc.decode(d)):[],author:(o=c[2])!=null&&o[0]?Zs(c[2][0]):void 0}}}case"naddr":{let c=U0(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:wc.decode(c[0][0]),pubkey:Zs(c[2][0]),kind:parseInt(Zs(c[3][0]),16),relays:c[1]?c[1].map(d=>wc.decode(d)):[]}}}case"nrelay":{let c=U0(n);if(!((f=c[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:wc.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Zs(n)};default:throw new Error(`unknown prefix ${r}`)}}function U0(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1],s=t.slice(2,2+i);t=t.slice(2+i),!(s.length<i)&&(r[n]=r[n]||[],r[n].push(s))}return r}function hbe(e){return xP("nsec",e)}function dbe(e){return xP("npub",e)}function pbe(e){return xP("note",e)}function xP(e,r){let t=Fc(r),n=Dn.toWords(t);return Dn.encode(e,n,bv)}function vbe(e){let r=R_({0:[Fc(e.pubkey)],1:(e.relays||[]).map(n=>yl.encode(n))}),t=Dn.toWords(r);return Dn.encode("nprofile",t,bv)}function gbe(e){let r=R_({0:[Fc(e.id)],1:(e.relays||[]).map(n=>yl.encode(n)),2:e.author?[Fc(e.author)]:[]}),t=Dn.toWords(r);return Dn.encode("nevent",t,bv)}function ybe(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=R_({0:[yl.encode(e.identifier)],1:(e.relays||[]).map(i=>yl.encode(i)),2:[Fc(e.pubkey)],3:[new Uint8Array(r)]}),n=Dn.toWords(t);return Dn.encode("naddr",n,bv)}function mbe(e){let r=R_({0:[yl.encode(e)]}),t=Dn.toWords(r);return Dn.encode("nrelay",t,bv)}function R_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),np(...r)}var bbe={};qi(bbe,{decrypt:()=>$be,encrypt:()=>wbe});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function wbe(e,r,t){const n=rs.getSharedSecret(e,"02"+r),i=$q(n);let s=Uint8Array.from(jW(16)),o=yl.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Go.encode(new Uint8Array(l)),f=Go.encode(new Uint8Array(s.buffer));return`${u}?iv=${f}`}async function $be(e,r,t){let[n,i]=t.split("?iv="),s=rs.getSharedSecret(e,"02"+r),o=$q(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Go.decode(n),u=Go.decode(i),f=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return wc.decode(f)}function $q(e){return e.slice(1,33)}var _be={};qi(_be,{NIP05_REGEX:()=>_q,queryProfile:()=>Sbe,searchDomain:()=>Ebe,useFetchImplementation:()=>xbe});var _q=/^(?:([\w.+-]+)@)?([\w.-]+)$/,D_;try{D_=fetch}catch{}function xbe(e){D_=e}async function Ebe(e,r=""){try{return(await(await D_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function Sbe(e){const r=e.match(_q);if(!r)return null;const[t,n="_",i]=r;try{const s=await D_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=kbe(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function kbe(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var Tbe={};qi(Tbe,{generateSeedWords:()=>Abe,privateKeyFromSeedWords:()=>Ibe,validateWords:()=>Obe});function Ibe(e,r){let n=zf.fromMasterSeed(tq(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Zs(n)}function Abe(){return aq(dP)}function Obe(e){return fq(e,dP)}var Cbe={};qi(Cbe,{parse:()=>Pbe});function Pbe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},f=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(f){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var Nbe={};qi(Nbe,{getPow:()=>Rbe});function Rbe(e){return Dbe(Fc(e))}function Dbe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=Bbe(e[t]),r+=n,n===8);t++);return r}function Bbe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var Mbe={};qi(Mbe,{finishRepostEvent:()=>Lbe,getRepostedEvent:()=>Fbe,getRepostedEventPointer:()=>xq});function Lbe(e,r,t,n){return yq({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function xq(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function Fbe(e,{skipVerification:r}={}){const t=xq(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!$P(n)))return n}var jbe={};qi(jbe,{NOSTR_URI_REGEX:()=>B_,parse:()=>Hbe,test:()=>zbe});var B_=new RegExp(`nostr:(${wq.source})`);function zbe(e){return typeof e=="string"&&new RegExp(`^${B_.source}$`).test(e)}function Hbe(e){const r=e.match(new RegExp(`^${B_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:N_(r[1])}}var Ube={};qi(Ube,{finishReactionEvent:()=>Wbe,getReactedEventPointer:()=>qbe});function Wbe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return yq({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function qbe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var Kbe={};qi(Kbe,{createDelegation:()=>Vbe,getDelegator:()=>Gbe});function Vbe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=mv(yl.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Zs(Om.sign(i,e));return{from:gq(e),to:r.pubkey,cond:n,sig:s}}function Gbe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,f]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(f))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(f))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(f))continue;return null}}let o=mv(yl.encode(`nostr:delegation:${e.pubkey}:${n}`));return Om.verify(i,o,t)?t:null}var Ybe={};qi(Ybe,{matchAll:()=>Zbe,regex:()=>EP,replaceAll:()=>Xbe});var EP=()=>new RegExp(`\\b${B_.source}\\b`,"g");function*Zbe(e){const r=e.matchAll(EP());for(const t of r){const[n,i]=t;yield{uri:n,value:i,decoded:N_(i),start:t.index,end:t.index+n.length}}}function Xbe(e,r){return e.replaceAll(EP(),(t,n)=>r({uri:t,value:n,decoded:N_(n)}))}var Jbe={};qi(Jbe,{useFetchImplementation:()=>Qbe,validateGithub:()=>e0e});var SP;try{SP=fetch}catch{}function Qbe(e){SP=e}async function e0e(e,r,t){try{return await(await SP(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var t0e={};qi(t0e,{authenticate:()=>r0e});var r0e=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},n0e={};qi(n0e,{getZapEndpoint:()=>s0e,makeZapReceipt:()=>l0e,makeZapRequest:()=>o0e,useFetchImplementation:()=>i0e,validateZapRequest:()=>a0e});var kP;try{kP=fetch}catch{}function i0e(e){kP=e}async function s0e(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Dn.decode(t,1e3),a=Dn.fromWords(o);r=wc.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await kP(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function o0e({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function a0e(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!wP(r))return"Zap request is not a valid Nostr event.";if(!$P(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function l0e({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Xd=null;typeof WebSocket<"u"?Xd=WebSocket:typeof MozWebSocket<"u"?Xd=MozWebSocket:typeof global<"u"?Xd=global.WebSocket||global.MozWebSocket:typeof window<"u"?Xd=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Xd=self.WebSocket||self.MozWebSocket);const u0e=Xd;function PE(e,r){let t={...e};return delete t[r],r+kge(t)}function Z1(e){let r=[],t=new Map,n=[];for(let i of e){let s=!1;for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){if(i[o].length===0){s=!0;break}let a=PE(i,o),l=t.get(a);if(l!==void 0){let u=r[l];for(let f in u)if(f!==o){let c=PE(u,f);t.delete(c)}if(r[l][o]instanceof Set)for(let f of i[o])r[l][o].add(f);else r[l][o]=new Set(r[l][o].concat(i[o])),n.push([l,o]);s=!0;break}}if(!s){for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){let a=PE(i,o);t.set(a,r.length)}r.push({...i})}}for(let[i,s]of n)r[i][s]=Array.from(r[i][s]);return r}function c0e(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function f0e(e){let r=e.indexOf('"EVENT"')+7,t=e.slice(r),n=t.indexOf('"')+1,i=t.slice(n);return i.slice(0,i.indexOf('"'))}function h0e(e,r,t){return new d0e(e,r,t).relayInit()}var V$,Eq,G$,Sq,Y$,kq,Z$,Tq,X$,Iq,J$,Aq,Ez,d0e=(Ez=class{constructor(e,r,t){Yr(this,V$);Yr(this,G$);Yr(this,Y$);Yr(this,Z$);Yr(this,X$);Yr(this,J$);ce(this,"url");ce(this,"alreadyHaveEvent");ce(this,"logging",!1);ce(this,"autoReconnect");ce(this,"ws");ce(this,"sendOnConnect",[]);ce(this,"openSubs",{});ce(this,"closedByClient",!1);ce(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});ce(this,"subListeners",{});ce(this,"pubListeners",{});ce(this,"incomingMessageQueue",[]);ce(this,"handleNextInterval");ce(this,"resolveClose");ce(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=r,this.autoReconnect=t}async trySend(e){var t;const r=JSON.stringify(e);this.connected?(t=this.ws)==null||t.send(r):this.sendOnConnect.push(r)}async connectRelay(){return new Promise((e,r)=>{try{const t=new u0e(this.url);this.ws=t}catch(t){r(t);return}this.ws.onopen=Qn(this,J$,Aq).bind(this,e),this.ws.onerror=t=>{this.listeners.error.forEach(n=>n()),r(t)},this.ws.onclose=Qn(this,G$,Sq).bind(this),this.ws.onmessage=Qn(this,Z$,Tq).bind(this)})}async connect(){var e,r;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((r=this.ws)==null?void 0:r.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(r=>{this.resolveClose=r})}on(e,r){var t;this.listeners[e].push(r),e==="connect"&&((t=this.ws)==null?void 0:t.readyState)===1&&r()}off(e,r){const t=this.listeners[e].indexOf(r);t!==-1&&this.listeners[e].splice(t,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,r){const t=this;if(!e.id)throw new Error(`event ${e} has no id`);const n=e.id;let i=!1,s=!1;t.trySend([r,e]).then(()=>{i=!0,s&&(o(),s=!1)}).catch(()=>{});const o=()=>{const a=this.sub([{ids:[n]}],{id:`monitor-${n.slice(0,5)}`}),l=setTimeout(()=>{var u;(((u=t.pubListeners[n])==null?void 0:u.failed)||[]).forEach(f=>f("event not seen after 5 seconds")),a.unsub()},5e3);a.on("event",()=>{var u;clearTimeout(l),(((u=t.pubListeners[n])==null?void 0:u.seen)||[]).forEach(f=>f())})};return{on:(a,l)=>{t.pubListeners[n]=t.pubListeners[n]||{ok:[],seen:[],failed:[]},t.pubListeners[n][a].push(l),a==="seen"&&(i?o():s=!0)},off:(a,l)=>{const u=t.pubListeners[n];if(!u)return;const f=u[a].indexOf(l);f>=0&&u[a].splice(f,1)}}}sub(e,r={}){const t=this,n=r.id||Math.random().toString().slice(2),i=r.skipVerification||!1;return t.openSubs[n]={id:n,filters:e,skipVerification:i},t.connected&&(this.logging&&console.log("REQ2",this.url,n,...e),t.trySend(["REQ",n,...e])),{sub:(s,o={})=>this.sub(s||e,{skipVerification:o.skipVerification||i,id:n}),unsub:()=>{delete t.openSubs[n],delete t.subListeners[n],t.connected&&(t.logging&&console.log("CLOSE",this.url,n),t.trySend(["CLOSE",n]))},on:(s,o)=>{t.subListeners[n]=t.subListeners[n]||{event:[],eose:[]},t.subListeners[n][s].push(o)},off:(s,o)=>{const a=t.subListeners[n];if(!a)return;const l=a[s].indexOf(o);l>=0&&a[s].splice(l,1)}}}},V$=new WeakSet,Eq=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}Qn(this,X$,Iq).call(this,{data:this.incomingMessageQueue.shift()})},G$=new WeakSet,Sq=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&Qn(this,Y$,kq).call(this)},Y$=new WeakSet,kq=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},Z$=new WeakSet,Tq=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>Qn(this,V$,Eq).call(this),0))},X$=new WeakSet,Iq=async function(e){var s,o,a,l,u,f,c;let r,t=e.data.toString();if(!t)return;let n=c0e(t,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,n);if(i){const d=this.subListeners[f0e(t)];return d?d.event.forEach(y=>y(i)):void 0}try{r=JSON.parse(t)}catch{r=e.data}if(r.length>=1)switch(r[0]){case"EVENT":if(this.logging&&console.log(r),r.length!==3)return;const d=r[1],y=r[2];if(!this.openSubs[d]||(o=this.openSubs[d].eventIds)!=null&&o.has(n))return;(a=this.openSubs[d].eventIds)==null||a.add(n),wP(y)&&this.openSubs[d]&&(this.openSubs[d].skipVerification||$P(y))&&sbe(this.openSubs[d].filters,y)&&(this.openSubs[d],(((l=this.subListeners[d])==null?void 0:l.event)||[]).forEach(T=>T(y)));return;case"EOSE":{if(r.length!==2)return;const T=r[1];this.logging&&console.log("EOSE",this.url,T),(((u=this.subListeners[T])==null?void 0:u.eose)||[]).forEach(_=>_());return}case"OK":{if(r.length<3)return;const T=r[1],_=r[2],A=r[3]||"";_?(f=this.pubListeners[T])==null||f.ok.forEach(x=>x()):(c=this.pubListeners[T])==null||c.failed.forEach(x=>x(A));return}case"NOTICE":if(r.length!==2)return;const w=r[1];this.listeners.notice.forEach(T=>T(w));return;case"AUTH":if(r.length!==2)return;const b=r[1];this.listeners.auth.forEach(T=>T(b));return}},J$=new WeakSet,Aq=function(e){var r;if(this.resolveClose){this.resolveClose();return}for(const t in this.openSubs)this.logging&&console.log("REQ",this.url,t,...this.openSubs[t].filters),this.trySend(["REQ",t,...this.openSubs[t].filters]);for(const t of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,t),(r=this.ws)==null||r.send(t);this.sendOnConnect=[],this.listeners.connect.forEach(t=>t()),e()},Ez),Q$,Oq,e_,Cq,s3,v0e,t_,Pq,r_,Nq,n_,Rq,Sz,p0e=(Sz=class{constructor(){Yr(this,Q$);Yr(this,e_);Yr(this,s3);Yr(this,t_);Yr(this,r_);Yr(this,n_);ce(this,"eventsById",new Map);ce(this,"metadataByPubKey",new Map);ce(this,"contactsByPubKey",new Map);ce(this,"authorsKindsByPubKey",new Map);ce(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===ei.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===ei.Contacts&&this.contactsByPubKey.set(e.pubkey,e),Qn(this,Q$,Oq).call(this,e),Qn(this,e_,Cq).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,r){const t=new Set,n=[];for(const i of e){const s=Qn(this,n_,Rq).call(this,i)||Qn(this,t_,Pq).call(this,i)||Qn(this,r_,Nq).call(this,i)||{filter:i,events:[]};for(const o of s.events)t.add(o);n.push(s.filter)}return{filters:n,events:[...t]}}},Q$=new WeakSet,Oq=function(e){const r=this.authorsKindsByPubKey.get(e.pubkey);if(!r)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const t=r.get(e.kind);t?e.kind===ei.Metadata||e.kind===ei.Contacts?e.created_at>t[0].created_at&&(t[0]=e):t.push(e):r.set(e.kind,[e])}},e_=new WeakSet,Cq=function(e){for(const r of e.tags){let t=r[0]+":"+r[1];const n=this.eventsByTags.get(t);n?n.push(e):this.eventsByTags.set(t,[e])}},s3=new WeakSet,v0e=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(n=>n!==ei.Contacts&&n!==ei.Metadata)!==void 0)return;const r=[],t=new Set;for(const n of e.authors){let i;if(e.kinds.includes(ei.Contacts)&&(i=this.contactsByPubKey.get(n),!i)){r.push(n);continue}let s;if(e.kinds.includes(ei.Metadata)&&(s=this.metadataByPubKey.get(n),!s)){r.push(n);continue}i&&t.add(i),s&&t.add(s)}return{filter:{...e,authors:r},events:t}},t_=new WeakSet,Pq=function(e){if(e.noCache||!e.authors)return;const r=new Set;for(const t of e.authors)if(e.kinds){const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of e.kinds){const s=n.get(i);if(s)for(const o of s)r.add(o)}}else{const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of n.values())for(const s of i)r.add(s)}return{filter:e,events:r}},r_=new WeakSet,Nq=function(e){if(e.noCache)return;const r=new Set;for(const t in e){if(t[0]!=="#")continue;let n=t.slice(1)+":"+e[t][0];const i=this.eventsByTags.get(n);if(i)for(const s of i)r.add(s)}return{filter:e,events:r}},n_=new WeakSet,Rq=function(e){if(!e.ids)return;const r=new Set,t=[];for(const n of e.ids){const i=this.getEventById(n);i?r.add(i):t.push(n)}return{filter:{...e,ids:t},events:r}},Sz),Dq=class{constructor(r,t,n){ce(this,"pubkey");ce(this,"relayPool");ce(this,"relays");this.pubkey=n,this.relayPool=r,this.relays=t}metaData(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Metadata]}],this.relays,r,t)}subscribe(r,t,n){return this.relayPool.subscribeEventObject(r.map(i=>({authors:[this.pubkey],...i})),this.relays,t,n)}followsPubkeys(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)s[0]==="p"&&i.push(s[1]);r(i)},t)}follows(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ei.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)if(s[0]==="p"){let o=this.relays;s[1]&&(o=[s[1],...this.relays||[]]),i.push(new Dq(this.relayPool,o,s[1]))}r(i)},t)}secondFollows(r,t,n=!0){return this.followsPubkeys(i=>{let s=new Map;for(const o of i)this.relayPool.subscribeEventObject([{authors:[o],kinds:[ei.Contacts]}],this.relays,a=>{let l=1/a.tags.length;for(const u of a.tags)if(u[0]==="p"){let f=s.get(u[1]);f?f+=l:f=l,s.set(u[1],f)}if(n)for(const u of i)s.delete(u);r(Array.from(s.entries()).sort((u,f)=>f[1]-u[1]))},t)},t)}allEvents(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,r,n)}referenced(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,r,n)}followers(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[ei.Contacts],limit:t}],this.relays,r,n)}sentAndRecievedDMs(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ei.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[ei.EncryptedDirectMessage],limit:t}],this.relays,r,n)}text(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ei.Text],limit:t}],this.relays,r,n)}},hI=class{constructor(e,r,t){ce(this,"id");ce(this,"kind");ce(this,"pubkey");ce(this,"tags");ce(this,"created_at");ce(this,"content");ce(this,"relayPool");ce(this,"relays");ce(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=r,this.relays=t,this.sig=e.sig}referencedAuthors(){const e=[];for(const r of this.tags)r[0]==="p"&&e.push(new Dq(this.relayPool,void 0,r[1]));return e}referencedEvents(e){const r=[];for(const t of this.tags)if(t[0]==="e"){let n=this.relays;t[2]&&(n=[t[2],...n||[]]),r.push(this.relayPool.getEventById(t[1],n,e).then(i=>new hI(i,this.relayPool,this.relays)))}return r}thread(e,r){let t=this.relays,n=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(t=[i[2],...t||[]]),n.push(i[1]));return this.relayPool.subscribe([{ids:n},{"#e":n}],t,e,r)}};function g0e(e){let r=new Set;return(t,n,i)=>{r.has(t.id)||(r.add(t.id),e(t,n,i))}}function y0e(e){let r=new Map;return(t,n,i)=>{if(t.kind===ei.Metadata||t.kind===ei.Contacts){let s=t.pubkey+" "+t.kind;if((r.get(s)||0)>t.created_at)return;r.set(s,t.created_at)}e(t,n,i)}}function m0e(e,r){return(t,n,i)=>{for(let s of r)if(mq(s,t)){e(t,n,i);break}}}var b0e=class{constructor(e){ce(this,"subs",[]);ce(this,"events",[]);ce(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(r=>r(...e))}sub(e){return this.events.forEach(r=>e(...r)),this.subs.push(e),()=>{var r;this.subs=this.subs.filter(t=>t!==e),this.subs.length===0&&((r=this.onunsub)==null||r.call(this),this.onunsub=void 0)}}},w0e=e=>[...new Set(e)];function $0e(e,r,t,n={},i){let s=[];if(i){const a=i.getCachedEventsWithUpdatedFilters(e,r);e=a.filters,s=a.events}if(n.logAllEvents){const a=t;t=(l,u,f)=>{a(l,u,f)}}n.allowDuplicateEvents||(t=g0e(t)),n.allowOlderEvents||(t=y0e(t));for(const a of s)t(a,!1,void 0);e=Z1(e),t=m0e(t,e),r=w0e(r);const o=_0e(e,r);return[t,o]}function _0e(e,r){const t=new Map,n=[];for(const i of e){const s=i.relay;if(s){const o=t.get(s);o?o.push(KB(i)):t.set(s,[KB(i)])}else n.push(i)}if(n.length>0)for(const i of r){const s=t.get(i);s?t.set(i,s.concat(n)):t.set(i,n)}return t}function KB(e){return e={...e},delete e.relay,e}function x0e(e,r){const t=new Map,n=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},o=()=>{};for(const[l,u,f,c,d]of e){if(!f.unsubcb)continue;for(const[w,b]of u){const T=t.get(w);T?t.set(w,T.concat(b)):t.set(w,b)}let y=(w,b,T)=>{f.unsubcb&&l(w,b,T)};if(r&&d){const w=new b0e(o);n.push((T,_,A)=>{w.event(T,_,A)});let b=w.sub(y);r.set(d,w),f.unsubcb=()=>{f.unsubcb=void 0,b(),c||i--}}else n.push(y),f.unsubcb=()=>{f.unsubcb=void 0,c||i--};c||i++}i===0&&setTimeout(()=>{},0);const a=(l,u,f)=>{for(const c of n)c(l,u,f)};return e.length=0,[a,t,s]}var NE=class{constructor(e,r,t,n){ce(this,"data");ce(this,"promises");ce(this,"relays");ce(this,"kind");ce(this,"relayPool");ce(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=r,this.relays=t||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=n||!1}async get(e){let r=this.data.get(e);if(r)return Promise.resolve(r);const t=this.promises.get(e);return t||new Promise((n,i)=>{let s=0;const o=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},a=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([o],this.relays,l=>{this.data.set(e,l),this.promises.delete(e),n(l)},void 0,l=>{this.relays.includes(l)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=a})}},VB=e=>[...new Set(e)];function E0e(e){if(e)return JSON.parse(e)}var i_,Bq,s_,Mq,o_,Lq,a_,Fq,l_,jq,u_,zq,kz,S0e=(kz=class{constructor(e,r={}){Yr(this,i_);Yr(this,s_);Yr(this,o_);Yr(this,a_);Yr(this,l_);Yr(this,u_);ce(this,"relayByUrl",new Map);ce(this,"noticecbs",[]);ce(this,"errorcbs",[]);ce(this,"authcbs",[]);ce(this,"eventCache");ce(this,"minMaxDelayms",1/0);ce(this,"filtersToSubscribe",[]);ce(this,"timer");ce(this,"externalGetEventById");ce(this,"logSubscriptions",!1);ce(this,"autoReconnect",!1);ce(this,"startTime",new Date().getTime());ce(this,"deleteSignatures");ce(this,"subscriptionCache");ce(this,"skipVerification");ce(this,"writeRelays");ce(this,"metadataCache");ce(this,"contactListCache");ce(this,"logErrorsAndNotices");ce(this,"errorsAndNoticesInterval");ce(this,"errorsAndNotices",[]);if(this.externalGetEventById=r.externalGetEventById,this.logSubscriptions=r.logSubscriptions,this.autoReconnect=r.autoReconnect,this.deleteSignatures=r.deleteSignatures,this.skipVerification=r.skipVerification,this.writeRelays=new NE(10003,this,void 0,!0),this.metadataCache=new NE(0,this),this.contactListCache=new NE(3,this),r.useEventCache&&(this.eventCache=new p0e),r.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const t of VB(e))this.addOrGetRelay(t);this.logErrorsAndNotices=r.logErrorsAndNotices||!0,this.onnotice((t,n)=>{this.errorsAndNotices.push({type:"notice",url:t,msg:n,time:Date.now()-this.startTime})}),this.onerror((t,n)=>{this.errorsAndNotices.push({type:"error",url:t,msg:n,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>Qn(this,i_,Bq).call(this),1e3*10)}addOrGetRelay(e){const r=this.relayByUrl.get(e);if(r)return r;const t=h0e(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?n=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(n)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,t),t.connect().then(n=>{t==null||t.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),t==null||t.on("auth",i=>{this.authcbs.forEach(s=>s(t,i))})},n=>{this.errorcbs.forEach(i=>i(e,n))}),t}async close(){const e=[];for(const r of this.relayByUrl.values())e.push(r.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const r=this.relayByUrl.get(e);r&&(r.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,r){clearTimeout(this.timer),this.timer=void 0;let t=this.minMaxDelayms;this.minMaxDelayms=1/0;const[n,i,s]=x0e(r||this.filtersToSubscribe,this.subscriptionCache);return Qn(this,a_,Fq).call(this,i,n,e,s,t)}subscribeEventObject(e,r,t,n,i,s={}){return this.subscribe(e,r,(o,a,l)=>t(new hI(o,this,r),a,l))}subscribe(e,r,t,n,i,s={}){var c;if(n!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(r===void 0){const d=Qn(this,u_,zq).call(this,e,t,n,i,s);return()=>{d.then(y=>{y()})}}let o;if(s.unsubscribeOnEose&&!i){o=JSON.stringify([e,r]);const d=(c=this.subscriptionCache)==null?void 0:c.get(o);if(d)return d.sub(t)}const[a,l]=$0e(e,r,t,s,this.eventCache);let u={unsubcb:()=>{}};n===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const f=[a,l,u,s.unsubscribeOnEose,o,n];return s.dontSendOtherFilters?this.sendSubscriptions(i,[f]):(this.filtersToSubscribe.push(f),n===void 0?this.sendSubscriptions(i):(Qn(this,l_,jq).call(this,n),()=>{var d;(d=u.unsubcb)==null||d.call(u),delete u.unsubcb}))}async getEventObjectById(e,r,t){return this.getEventById(e,r,t).then(n=>new hI(n,this,r))}async getEventById(e,r,t){return new Promise((n,i)=>{this.subscribe([{ids:[e]}],r,s=>{n(s)},t,void 0)})}publish(e,r){for(const t of VB(r))this.addOrGetRelay(t).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((r,t)=>r.on("error",n=>e(t,n))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((r,t)=>r.on("disconnect",n=>e(t,n)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,r])=>[e,r.status]).sort()}setWriteRelaysForPubKey(e,r,t){const n={created_at:t,pubkey:"",id:"",sig:"",content:JSON.stringify(r),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,n)}setCachedMetadata(e,r){this.metadataCache.data.set(e,r)}setCachedContactList(e,r){this.contactListCache.data.set(e,r)}subscribeReferencedEvents(e,r,t,n,i={}){let s=[],o=[];for(const a of e.tags){if(a[0]==="p"){const l=a[1];if(l.length!==64){console.log("bad pubkey",l,a);continue}o.push(l)}if(a[0]==="e"){const l=a[1];s.push(l)}}return s.length===0?()=>{}:o.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,r,t,n,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:o}],void 0,r,t,n,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${r}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${r}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,r,t,n,i={}){for(const s of e.tags)if(s[0]==="p"){const o=s[1];if(o.length!==64){console.log("bad pubkey",o,s);continue}this.fetchAndCacheMetadata(o).catch(a=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${o}: ${a}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,r,t,n,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(r=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${r}`,time:Date.now()-this.startTime,url:e.url})})})}},i_=new WeakSet,Bq=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},s_=new WeakSet,Mq=function(e,r,t,n,i){const s=Z1(r);if(s.length===0)return;const a=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let l=!1,u=1/0;return a.on("event",f=>{var d;f.created_at<u&&(u=f.created_at);let c=f;this.deleteSignatures||(c.sig=f.sig),(d=this.eventCache)==null||d.addEvent(c),t(c,l,e)}),a.on("eose",()=>{n==null||n(e,u),l=!0}),a},o_=new WeakSet,Lq=function(e){const r=new Map;for(const[t,n]of e){const i=Z1(Z1(n));i.length>0&&r.set(t,i)}return r},a_=new WeakSet,Fq=function(e,r,t,n={},i){var u,f;if(e.size===0)return()=>{};if(e=Qn(this,o_,Lq).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const c={};for(const[d,y]of e){let w=0;for(const b of y){const T={...b};T.authors&&(T.authors=T.authors.join(),T["authors.length"]=(u=b==null?void 0:b.authors)==null?void 0:u.length),T.kinds&&(T.kinds=T.kinds.join()),T.ids&&(T.ids=T.ids.join(),T["ids.length"]=(f=b==null?void 0:b.ids)==null?void 0:f.length),T["#e"]&&(T["#e"]=T["#e"].join(),T["#e.length"]=b["#e"].length),T["#p"]&&(T["#p"]=T["#p"].join(),T["#p.length"]=b["#p"].length),c[d+" "+w]=T,w++}}Object.keys(c).length>3&&console.groupCollapsed(Object.keys(c).length+" filters to "+e.size+" relays"),console.table(c),Object.keys(c).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let o=!1,a=[];n.unsuboneosecb=()=>{o=!0,a.forEach(c=>c.unsub())};for(const[c,d]of e){let y={};const w=(_,A)=>{var x;t&&t(_,A),o?(x=y.sub)==null||x.unsub():y.sub&&a.push(y.sub)},b=new Set,T=Qn(this,s_,Mq).call(this,c,d,r,w,b);T&&(y.sub=T,s.push(T))}const l=()=>s.forEach(c=>c.unsub());return n.unsubcb=()=>{l(),delete n.unsubcb},l},l_=new WeakSet,jq=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},u_=new WeakSet,zq=async function(e,r,t,n,i={}){var c;const s=new Set;for(const d of e)if(d.authors)for(const y of d.authors)s.add(y);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const o=[],a=[];for(const d of s)o.push((c=this.writeRelays)==null?void 0:c.get(d).then(y=>E0e(y==null?void 0:y.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),a.push(d);const l=new Set;let u=0;for(const d of o){const y=a[u];u+=1;let w=await d;if(!Array.isArray(w)){console.error("Couldn't load relays for author ",y);continue}for(let b of w)l.add(b)}let f=Array.from(l);return f.length===0&&i.defaultRelays&&(f=i.defaultRelays),this.subscribe(e,f,r,t,n,i)},kz);const tn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hn=Object.keys,Hi=Array.isArray;function us(e,r){return typeof r!="object"||Hn(r).forEach(function(t){e[t]=r[t]}),e}typeof Promise>"u"||tn.Promise||(tn.Promise=Promise);const Fy=Object.getPrototypeOf,k0e={}.hasOwnProperty;function no(e,r){return k0e.call(e,r)}function Kp(e,r){typeof r=="function"&&(r=r(Fy(e))),(typeof Reflect>"u"?Hn:Reflect.ownKeys)(r).forEach(t=>{tu(e,t,r[t])})}const Hq=Object.defineProperty;function tu(e,r,t,n){Hq(e,r,us(t&&no(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},n))}function Ep(e){return{from:function(r){return e.prototype=Object.create(r.prototype),tu(e.prototype,"constructor",e),{extend:Kp.bind(null,e.prototype)}}}}const T0e=Object.getOwnPropertyDescriptor;function TP(e,r){let t;return T0e(e,r)||(t=Fy(e))&&TP(t,r)}const I0e=[].slice;function Xw(e,r,t){return I0e.call(e,r,t)}function Uq(e,r){return r(e)}function Gg(e){if(!e)throw new Error("Assertion Failed")}function Wq(e){tn.setImmediate?setImmediate(e):setTimeout(e,0)}function qq(e,r){return e.reduce((t,n,i)=>{var s=r(n,i);return s&&(t[s[0]]=s[1]),t},{})}function ru(e,r){if(no(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var t=[],n=0,i=r.length;n<i;++n){var s=ru(e,r[n]);t.push(s)}return t}var o=r.indexOf(".");if(o!==-1){var a=e[r.substr(0,o)];return a===void 0?void 0:ru(a,r.substr(o+1))}}function Ta(e,r,t){if(e&&r!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){Gg(typeof t!="string"&&"length"in t);for(var n=0,i=r.length;n<i;++n)Ta(e,r[n],t[n])}else{var s=r.indexOf(".");if(s!==-1){var o=r.substr(0,s),a=r.substr(s+1);if(a==="")t===void 0?Hi(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var l=e[o];l&&no(e,o)||(l=e[o]={}),Ta(l,a,t)}}else t===void 0?Hi(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=t}}function Kq(e){var r={};for(var t in e)no(e,t)&&(r[t]=e[t]);return r}const A0e=[].concat;function Vq(e){return A0e.apply([],e)}const Gq="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Vq([8,16,32,64].map(e=>["Int","Uint","Float"].map(r=>r+e+"Array")))).filter(e=>tn[e]),O0e=Gq.map(e=>tn[e]);qq(Gq,e=>[e,!0]);let gc=null;function Nm(e){gc=typeof WeakMap<"u"&&new WeakMap;const r=dI(e);return gc=null,r}function dI(e){if(!e||typeof e!="object")return e;let r=gc&&gc.get(e);if(r)return r;if(Hi(e)){r=[],gc&&gc.set(e,r);for(var t=0,n=e.length;t<n;++t)r.push(dI(e[t]))}else if(O0e.indexOf(e.constructor)>=0)r=e;else{const s=Fy(e);for(var i in r=s===Object.prototype?{}:Object.create(s),gc&&gc.set(e,r),e)no(e,i)&&(r[i]=dI(e[i]))}return r}const{toString:C0e}={};function pI(e){return C0e.call(e).slice(8,-1)}const vI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",P0e=typeof vI=="symbol"?function(e){var r;return e!=null&&(r=e[vI])&&r.apply(e)}:function(){return null},Jd={};function Xl(e){var r,t,n,i;if(arguments.length===1){if(Hi(e))return e.slice();if(this===Jd&&typeof e=="string")return[e];if(i=P0e(e)){for(t=[];!(n=i.next()).done;)t.push(n.value);return t}if(e==null)return[e];if(typeof(r=e.length)=="number"){for(t=new Array(r);r--;)t[r]=e[r];return t}return[e]}for(r=arguments.length,t=new Array(r);r--;)t[r]=arguments[r];return t}const IP=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var $l=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Yq(e,r){$l=e,Zq=r}var Zq=()=>!0;const N0e=!new Error("").stack;function Uh(){if(N0e)try{throw Uh.arguments,new Error}catch(e){return e}return new Error}function gI(e,r){var t=e.stack;return t?(r=r||0,t.indexOf(e.name)===0&&(r+=(e.name+e.message).split(`
`).length),t.split(`
`).slice(r).filter(Zq).map(n=>`
`+n).join("")):""}var Xq=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],AP=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Xq),R0e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Sp(e,r){this._e=Uh(),this.name=e,this.message=r}function Jq(e,r){return e+". Errors: "+Object.keys(r).map(t=>r[t].toString()).filter((t,n,i)=>i.indexOf(t)===n).join(`
`)}function Jw(e,r,t,n){this._e=Uh(),this.failures=r,this.failedKeys=n,this.successCount=t,this.message=Jq(e,r)}function ly(e,r){this._e=Uh(),this.name="BulkError",this.failures=Object.keys(r).map(t=>r[t]),this.failuresByPos=r,this.message=Jq(e,r)}Ep(Sp).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+gI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ep(Jw).from(Sp),Ep(ly).from(Sp);var OP=AP.reduce((e,r)=>(e[r]=r+"Error",e),{});const D0e=Sp;var Wt=AP.reduce((e,r)=>{var t=r+"Error";function n(i,s){this._e=Uh(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=R0e[r]||t,this.inner=null)}return Ep(n).from(D0e),e[r]=n,e},{});Wt.Syntax=SyntaxError,Wt.Type=TypeError,Wt.Range=RangeError;var GB=Xq.reduce((e,r)=>(e[r+"Error"]=Wt[r],e),{}),X1=AP.reduce((e,r)=>(["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=Wt[r]),e),{});function Ur(){}function jy(e){return e}function B0e(e,r){return e==null||e===jy?r:function(t){return r(e(t))}}function Ah(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function M0e(e,r){return e===Ur?r:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=r.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Ah(n,this.onsuccess):n),i&&(this.onerror=this.onerror?Ah(i,this.onerror):i),s!==void 0?s:t}}function L0e(e,r){return e===Ur?r:function(){e.apply(this,arguments);var t=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Ah(t,this.onsuccess):t),n&&(this.onerror=this.onerror?Ah(n,this.onerror):n)}}function F0e(e,r){return e===Ur?r:function(t){var n=e.apply(this,arguments);us(t,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=r.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ah(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Ah(s,this.onerror):s),n===void 0?o===void 0?void 0:o:us(n,o)}}function j0e(e,r){return e===Ur?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function CP(e,r){return e===Ur?r:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return r.apply(n,s)})}return r.apply(this,arguments)}}X1.ModifyError=Jw,X1.DexieError=Sp,X1.BulkError=ly;var zy={};const Qq=100,[yI,Qw,mI]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Fy(e),e];const r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,Fy(r),e]})(),eK=Qw&&Qw.then,J1=yI&&yI.constructor,PP=!!mI;var bI=!1,z0e=mI?()=>{mI.then(W0)}:tn.setImmediate?setImmediate.bind(null,W0):tn.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{W0(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(W0,0)},uy=function(e,r){Yg.push([e,r]),e$&&(z0e(),e$=!1)},wI=!0,e$=!0,lh=[],Q1=[],$I=null,_I=jy,kp={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:XB,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{XB(e[0],e[1])}catch{}})}},Mt=kp,Yg=[],uh=0,ew=[];function Et(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ur,this._lib=!1;var r=this._PSD=Mt;if($l&&(this._stackHolder=Uh(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==zy)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&EI(this,this._value))}this._state=null,this._value=null,++r.ref,rK(this,e)}const xI={get:function(){var e=Mt,r=t$;function t(n,i){var s=!e.global&&(e!==Mt||r!==t$);const o=s&&!gu();var a=new Et((l,u)=>{NP(this,new tK(r$(n,e,s,o),r$(i,e,s,o),l,u,e))});return $l&&sK(a,this),a}return t.prototype=zy,t},set:function(e){tu(this,"then",e&&e.prototype===zy?xI:{get:function(){return e},set:xI.set})}};function tK(e,r,t,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=t,this.reject=n,this.psd=i}function rK(e,r){try{r(t=>{if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Rm();t&&typeof t.then=="function"?rK(e,(i,s)=>{t instanceof Et?t._then(i,s):t.then(i,s)}):(e._state=!0,e._value=t,nK(e)),n&&Dm()}},EI.bind(null,e))}catch(t){EI(e,t)}}function EI(e,r){if(Q1.push(r),e._state===null){var t=e._lib&&Rm();r=_I(r),e._state=!1,e._value=r,$l&&r!==null&&typeof r=="object"&&!r._promise&&function(n,i,s){try{n.apply(null,s)}catch(o){i&&i(o)}}(()=>{var n=TP(r,"stack");r._promise=e,tu(r,"stack",{get:()=>bI?n&&(n.get?n.get.apply(r):n.value):e.stack})}),function(n){lh.some(i=>i._value===n._value)||lh.push(n)}(e),nK(e),t&&Dm()}}function nK(e){var r=e._listeners;e._listeners=[];for(var t=0,n=r.length;t<n;++t)NP(e,r[t]);var i=e._PSD;--i.ref||i.finalize(),uh===0&&(++uh,uy(()=>{--uh==0&&RP()},[]))}function NP(e,r){if(e._state!==null){var t=e._state?r.onFulfilled:r.onRejected;if(t===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++uh,uy(H0e,[t,e,r])}else e._listeners.push(r)}function H0e(e,r,t){try{$I=r;var n,i=r._value;r._state?n=e(i):(Q1.length&&(Q1=[]),n=e(i),Q1.indexOf(i)===-1&&function(s){for(var o=lh.length;o;)if(lh[--o]._value===s._value)return void lh.splice(o,1)}(r)),t.resolve(n)}catch(s){t.reject(s)}finally{$I=null,--uh==0&&RP(),--t.psd.ref||t.psd.finalize()}}function iK(e,r,t){if(r.length===t)return r;var n="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,n=gI(o,0)):(i=o,s=""),r.push(i+(s?": "+s:"")+n)}return $l&&((n=gI(e._stackHolder,2))&&r.indexOf(n)===-1&&r.push(n),e._prev&&iK(e._prev,r,t)),r}function sK(e,r){var t=r?r._numPrev+1:0;t<100&&(e._prev=r,e._numPrev=t)}function W0(){Rm()&&Dm()}function Rm(){var e=wI;return wI=!1,e$=!1,e}function Dm(){var e,r,t;do for(;Yg.length>0;)for(e=Yg,Yg=[],t=e.length,r=0;r<t;++r){var n=e[r];n[0].apply(null,n[1])}while(Yg.length>0);wI=!0,e$=!0}function RP(){var e=lh;lh=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var r=ew.slice(0),t=r.length;t;)r[--t]()}function q0(e){return new Et(zy,!1,e)}function sn(e,r){var t=Mt;return function(){var n=Rm(),i=Mt;try{return zc(t,!0),e.apply(this,arguments)}catch(s){r&&r(s)}finally{zc(i,!1),n&&Dm()}}}Kp(Et.prototype,{then:xI,_then:function(e,r){NP(this,new tK(null,null,e,r,Mt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=arguments[0],t=arguments[1];return typeof r=="function"?this.then(null,n=>n instanceof r?t(n):q0(n)):this.then(null,n=>n&&n.name===r?t(n):q0(n))},finally:function(e){return this.then(r=>(e(),r),r=>(e(),q0(r)))},stack:{get:function(){if(this._stack)return this._stack;try{bI=!0;var e=iK(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{bI=!1}}},timeout:function(e,r){return e<1/0?new Et((t,n)=>{var i=setTimeout(()=>n(new Wt.Timeout(r)),e);this.then(t,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&tu(Et.prototype,Symbol.toStringTag,"Dexie.Promise"),kp.env=oK(),Kp(Et,{all:function(){var e=Xl.apply(null,arguments).map(K0);return new Et(function(r,t){e.length===0&&r([]);var n=e.length;e.forEach((i,s)=>Et.resolve(i).then(o=>{e[s]=o,--n||r(e)},t))})},resolve:e=>{if(e instanceof Et)return e;if(e&&typeof e.then=="function")return new Et((t,n)=>{e.then(t,n)});var r=new Et(zy,!0,e);return sK(r,$I),r},reject:q0,race:function(){var e=Xl.apply(null,arguments).map(K0);return new Et((r,t)=>{e.map(n=>Et.resolve(n).then(r,t))})},PSD:{get:()=>Mt,set:e=>Mt=e},totalEchoes:{get:()=>t$},newPSD:jc,usePSD:$v,scheduler:{get:()=>uy,set:e=>{uy=e}},rejectionMapper:{get:()=>_I,set:e=>{_I=e}},follow:(e,r)=>new Et((t,n)=>jc((i,s)=>{var o=Mt;o.unhandleds=[],o.onunhandled=s,o.finalize=Ah(function(){(function(a){function l(){a(),ew.splice(ew.indexOf(l),1)}ew.push(l),++uh,uy(()=>{--uh==0&&RP()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},r,t,n))}),J1&&(J1.allSettled&&tu(Et,"allSettled",function(){const e=Xl.apply(null,arguments).map(K0);return new Et(r=>{e.length===0&&r([]);let t=e.length;const n=new Array(t);e.forEach((i,s)=>Et.resolve(i).then(o=>n[s]={status:"fulfilled",value:o},o=>n[s]={status:"rejected",reason:o}).then(()=>--t||r(n)))})}),J1.any&&typeof AggregateError<"u"&&tu(Et,"any",function(){const e=Xl.apply(null,arguments).map(K0);return new Et((r,t)=>{e.length===0&&t(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((s,o)=>Et.resolve(s).then(a=>r(a),a=>{i[o]=a,--n||t(new AggregateError(i))}))})}));const zi={awaits:0,echoes:0,id:0};var U0e=0,tw=[],RE=0,t$=0,W0e=0;function jc(e,r,t,n){var i=Mt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++W0e;var o=kp.env;s.env=PP?{Promise:Et,PromiseProp:{value:Et,configurable:!0,writable:!0},all:Et.all,race:Et.race,allSettled:Et.allSettled,any:Et.any,resolve:Et.resolve,reject:Et.reject,nthen:YB(o.nthen,s),gthen:YB(o.gthen,s)}:{},r&&us(s,r),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=$v(s,e,t,n);return s.ref===0&&s.finalize(),a}function wv(){return zi.id||(zi.id=++U0e),++zi.awaits,zi.echoes+=Qq,zi.id}function gu(){return!!zi.awaits&&(--zi.awaits==0&&(zi.id=0),zi.echoes=zi.awaits*Qq,!0)}function K0(e){return zi.echoes&&e&&e.constructor===J1?(wv(),e.then(r=>(gu(),r),r=>(gu(),ri(r)))):e}function q0e(e){++t$,zi.echoes&&--zi.echoes!=0||(zi.echoes=zi.id=0),tw.push(Mt),zc(e,!0)}function K0e(){var e=tw[tw.length-1];tw.pop(),zc(e,!1)}function zc(e,r){var t=Mt;if((r?!zi.echoes||RE++&&e===Mt:!RE||--RE&&e===Mt)||aK(r?q0e.bind(null,e):K0e),e!==Mt&&(Mt=e,t===kp&&(kp.env=oK()),PP)){var n=kp.env.Promise,i=e.env;Qw.then=i.nthen,n.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty(tn,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function oK(){var e=tn.Promise;return PP?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(tn,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Qw.then,gthen:e.prototype.then}:{}}function $v(e,r,t,n,i){var s=Mt;try{return zc(e,!0),r(t,n,i)}finally{zc(s,!1)}}function aK(e){eK.call(yI,e)}function r$(e,r,t,n){return typeof e!="function"?e:function(){var i=Mt;t&&wv(),zc(r,!0);try{return e.apply(this,arguments)}finally{zc(i,!1),n&&aK(gu)}}}function YB(e,r){return function(t,n){return e.call(this,r$(t,r),r$(n,r))}}(""+eK).indexOf("[native code]")===-1&&(wv=gu=Ur);const ZB="unhandledrejection";function XB(e,r){var t;try{t=r.onuncatched(e)}catch{}if(t!==!1)try{var n,i={promise:r,reason:e};if(tn.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(ZB,!0,!0),us(n,i)):tn.CustomEvent&&us(n=new CustomEvent(ZB,{detail:i}),i),n&&tn.dispatchEvent&&(dispatchEvent(n),!tn.PromiseRejectionEvent&&tn.onunhandledrejection))try{tn.onunhandledrejection(n)}catch{}$l&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ri=Et.reject;function SI(e,r,t,n){if(e.idbdb&&(e._state.openComplete||Mt.letThrough||e._vip)){var i=e._createTransaction(r,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===OP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>SI(e,r,t,n))):ri(s)}return i._promise(r,(s,o)=>jc(()=>(Mt.trans=i,n(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ri(new Wt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ri(new Wt.DatabaseClosed);e.open().catch(Ur)}return e._state.dbReadyPromise.then(()=>SI(e,r,t,n))}const JB="3.2.4",Qf=String.fromCharCode(65535),kI=-1/0,Hl="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lK="String expected.",cy=[],M_=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),V0e=M_,G0e=M_,uK=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),L_="__dbnames",DE="readonly",BE="readwrite";function Oh(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}const cK={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function V0(e){return typeof e!="string"||/\./.test(e)?r=>r:r=>(r[e]===void 0&&e in r&&delete(r=Nm(r))[e],r)}class Y0e{_trans(r,t,n){const i=this._tx||Mt.trans,s=this.name;function o(l,u,f){if(!f.schema[s])throw new Wt.NotFound("Table "+s+" not part of transaction");return t(f.idbtrans,f)}const a=Rm();try{return i&&i.db===this.db?i===Mt.trans?i._promise(r,o,n):jc(()=>i._promise(r,o,n),{trans:i,transless:Mt.transless||Mt}):SI(this.db,r,[this.name],o)}finally{a&&Dm()}}get(r,t){return r&&r.constructor===Object?this.where(r).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:r}).then(i=>this.hook.reading.fire(i))).then(t)}where(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(Hi(r))return new this.db.WhereClause(this,`[${r.join("+")}]`);const t=Hn(r);if(t.length===1)return this.where(t[0]).equals(r[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&t.every(f=>u.keyPath.indexOf(f)>=0)&&u.keyPath.every(f=>t.indexOf(f)>=0))[0];if(n&&this.db._maxKey!==Qf)return this.where(n.name).equals(n.keyPath.map(u=>r[u]));!n&&$l&&console.warn(`The query ${JSON.stringify(r)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,f){try{return s.cmp(u,f)===0}catch{return!1}}const[a,l]=t.reduce(([u,f],c)=>{const d=i[c],y=r[c];return[u||d,u||!d?Oh(f,d&&d.multi?w=>{const b=ru(w,c);return Hi(b)&&b.some(T=>o(y,T))}:w=>o(y,ru(w,c))):f]},[null,null]);return a?this.where(a.name).equals(r[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(r){return this.toCollection().and(r)}count(r){return this.toCollection().count(r)}offset(r){return this.toCollection().offset(r)}limit(r){return this.toCollection().limit(r)}each(r){return this.toCollection().each(r)}toArray(r){return this.toCollection().toArray(r)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(r){return new this.db.Collection(new this.db.WhereClause(this,Hi(r)?`[${r.join("+")}]`:r))}reverse(){return this.toCollection().reverse()}mapToClass(r){this.schema.mappedClass=r;const t=n=>{if(!n)return n;const i=Object.create(r.prototype);for(var s in n)if(no(n,s))try{i[s]=n[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),r}defineClass(){return this.mapToClass(function(r){us(this,r)})}add(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=V0(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Ta(r,i,o)}catch{}return o})}update(r,t){if(typeof r!="object"||Hi(r))return this.where(":id").equals(r).modify(t);{const n=ru(r,this.schema.primKey.keyPath);if(n===void 0)return ri(new Wt.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?Hn(t).forEach(i=>{Ta(r,i,t[i])}):t(r,{value:r,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}}put(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=V0(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Ta(r,i,o)}catch{}return o})}delete(r){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[r]})).then(t=>t.numFailures?Et.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"deleteRange",range:cK})).then(r=>r.numFailures?Et.reject(r.failures[0]):void 0)}bulkGet(r){return this._trans("readonly",t=>this.core.getMany({keys:r,trans:t}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let f=l&&a?r.map(V0(l)):r;return this.core.mutate({trans:o,type:"add",keys:i,values:f,wantResults:s}).then(({numFailures:c,results:d,lastResult:y,failures:w})=>{if(c===0)return s?d:y;throw new ly(`${this.name}.bulkAdd(): ${c} of ${u} operations failed`,w)})})}bulkPut(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let f=l&&a?r.map(V0(l)):r;return this.core.mutate({trans:o,type:"put",keys:i,values:f,wantResults:s}).then(({numFailures:c,results:d,lastResult:y,failures:w})=>{if(c===0)return s?d:y;throw new ly(`${this.name}.bulkPut(): ${c} of ${u} operations failed`,w)})})}bulkDelete(r){const t=r.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:r})).then(({numFailures:n,lastResult:i,failures:s})=>{if(n===0)return i;throw new ly(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,s)})}}function fy(e){var r={},t=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return r[o].subscribe.apply(null,u),e}if(typeof o=="string")return r[o]};t.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return t;function s(o,a,l){if(typeof o!="object"){var u;a||(a=j0e),l||(l=Ur);var f={subscribers:[],fire:l,subscribe:function(c){f.subscribers.indexOf(c)===-1&&(f.subscribers.push(c),f.fire=a(f.fire,c))},unsubscribe:function(c){f.subscribers=f.subscribers.filter(function(d){return d!==c}),f.fire=f.subscribers.reduce(a,l)}};return r[o]=t[o]=f,f}Hn(u=o).forEach(function(c){var d=u[c];if(Hi(d))s(c,u[c][0],u[c][1]);else{if(d!=="asap")throw new Wt.InvalidArgument("Invalid event config");var y=s(c,jy,function(){for(var w=arguments.length,b=new Array(w);w--;)b[w]=arguments[w];y.subscribers.forEach(function(T){Wq(function(){T.apply(null,b)})})})}})}}function Dg(e,r){return Ep(r).from({prototype:e}),r}function Dd(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function ME(e,r){e.filter=Oh(e.filter,r)}function LE(e,r,t){var n=e.replayFilter;e.replayFilter=n?()=>Oh(n(),r()):r,e.justLimit=t&&!n}function rw(e,r){if(e.isPrimKey)return r.primaryKey;const t=r.getIndexByKeyPath(e.index);if(!t)throw new Wt.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return t}function QB(e,r,t){const n=rw(e,r.schema);return r.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function G0(e,r,t,n){const i=e.replayFilter?Oh(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,d=>l.stop(d),d=>l.fail(d))){var f=l.primaryKey,c=""+f;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(f)),no(s,c)||(s[c]=!0,r(a,l,u))}};return Promise.all([e.or._iterate(o,t),e6(QB(e,n,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return e6(QB(e,n,t),Oh(e.algorithm,i),r,!e.keysOnly&&e.valueMapper)}function e6(e,r,t,n){var i=sn(n?(s,o,a)=>t(n(s),o,a):t);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();r&&!r(s,a=>o=a,a=>{s.stop(a),o=Ur},a=>{s.fail(a),o=Ur})||i(s.value,s,a=>o=a),o()})})}function as(e,r){try{const t=t6(e),n=t6(r);if(t!==n)return t==="Array"?1:n==="Array"?-1:t==="binary"?1:n==="binary"?-1:t==="string"?1:n==="string"?-1:t==="Date"?1:n!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>r?1:e<r?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(r6(e),r6(r));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const f=as(i[u],s[u]);if(f!==0)return f}return o===a?0:o<a?-1:1}(e,r)}}catch{}return NaN}function t6(e){const r=typeof e;if(r!=="object")return r;if(ArrayBuffer.isView(e))return"binary";const t=pI(e);return t==="ArrayBuffer"?"binary":t}function r6(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Z0e{_read(r,t){var n=this._ctx;return n.error?n.table._trans(null,ri.bind(null,n.error)):n.table._trans("readonly",r).then(t)}_write(r){var t=this._ctx;return t.error?t.table._trans(null,ri.bind(null,t.error)):t.table._trans("readwrite",r,"locked")}_addAlgorithm(r){var t=this._ctx;t.algorithm=Oh(t.algorithm,r)}_iterate(r,t){return G0(this._ctx,r,t,this._ctx.table.core)}clone(r){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return r&&us(n,r),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(r){var t=this._ctx;return this._read(n=>G0(t,r,n,t.table.core))}count(r){return this._read(t=>{const n=this._ctx,i=n.table.core;if(Dd(n,!0))return i.count({trans:t,query:{index:rw(n,i.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var s=0;return G0(n,()=>(++s,!1),t,i).then(()=>s)}).then(r)}sortBy(r,t){const n=r.split(".").reverse(),i=n[0],s=n.length-1;function o(u,f){return f?o(u[n[f]],f-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,f){var c=o(u,s),d=o(f,s);return c<d?-a:c>d?a:0}return this.toArray(function(u){return u.sort(l)}).then(t)}toArray(r){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&Dd(n,!0)&&n.limit>0){const{valueMapper:i}=n,s=rw(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return G0(n,s=>i.push(s),t,n.table.core).then(()=>i)}},r)}offset(r){var t=this._ctx;return r<=0||(t.offset+=r,Dd(t)?LE(t,()=>{var n=r;return(i,s)=>n===0||(n===1?(--n,!1):(s(()=>{i.advance(n),n=0}),!1))}):LE(t,()=>{var n=r;return()=>--n<0})),this}limit(r){return this._ctx.limit=Math.min(this._ctx.limit,r),LE(this._ctx,()=>{var t=r;return function(n,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(r,t){return ME(this._ctx,function(n,i,s){return!r(n.value)||(i(s),t)}),this}first(r){return this.limit(1).toArray(function(t){return t[0]}).then(r)}last(r){return this.reverse().first(r)}filter(r){var t,n;return ME(this._ctx,function(i){return r(i.value)}),t=this._ctx,n=r,t.isMatch=Oh(t.isMatch,n),this}and(r){return this.filter(r)}or(r){return new this.db.WhereClause(this._ctx.table,r,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.key,i)})}eachUniqueKey(r){return this._ctx.unique="unique",this.eachKey(r)}eachPrimaryKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.primaryKey,i)})}keys(r){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.key)}).then(function(){return n}).then(r)}primaryKeys(r){var t=this._ctx;if(t.dir==="next"&&Dd(t,!0)&&t.limit>0)return this._read(i=>{var s=rw(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(r);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.primaryKey)}).then(function(){return n}).then(r)}uniqueKeys(r){return this._ctx.unique="unique",this.keys(r)}firstKey(r){return this.limit(1).keys(function(t){return t[0]}).then(r)}lastKey(r){return this.reverse().firstKey(r)}distinct(){var r=this._ctx,t=r.index&&r.table.schema.idxByName[r.index];if(!t||!t.multi)return this;var n={};return ME(this._ctx,function(i){var s=i.primaryKey.toString(),o=no(n,s);return n[s]=!0,!o}),this}modify(r){var t=this._ctx;return this._write(n=>{var i;if(typeof r=="function")i=r;else{var s=Hn(r),o=s.length;i=function(b){for(var T=!1,_=0;_<o;++_){var A=s[_],x=r[A];ru(b,A)!==x&&(Ta(b,A,x),T=!0)}return T}}const a=t.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,f=this.db._options.modifyChunkSize||200,c=[];let d=0;const y=[],w=(b,T)=>{const{failures:_,numFailures:A}=T;d+=b-A;for(let x of Hn(_))c.push(_[x])};return this.clone().primaryKeys().then(b=>{const T=_=>{const A=Math.min(f,b.length-_);return a.getMany({trans:n,keys:b.slice(_,_+A),cache:"immutable"}).then(x=>{const I=[],O=[],C=l?[]:null,g=[];for(let B=0;B<A;++B){const z=x[B],V={value:Nm(z),primKey:b[_+B]};i.call(V,V.value,V)!==!1&&(V.value==null?g.push(b[_+B]):l||as(u(z),u(V.value))===0?(O.push(V.value),l&&C.push(b[_+B])):(g.push(b[_+B]),I.push(V.value)))}const M=Dd(t)&&t.limit===1/0&&(typeof r!="function"||r===FE)&&{index:t.index,range:t.range};return Promise.resolve(I.length>0&&a.mutate({trans:n,type:"add",values:I}).then(B=>{for(let z in B.failures)g.splice(parseInt(z),1);w(I.length,B)})).then(()=>(O.length>0||M&&typeof r=="object")&&a.mutate({trans:n,type:"put",keys:C,values:O,criteria:M,changeSpec:typeof r!="function"&&r}).then(B=>w(O.length,B))).then(()=>(g.length>0||M&&r===FE)&&a.mutate({trans:n,type:"delete",keys:g,criteria:M}).then(B=>w(g.length,B))).then(()=>b.length>_+A&&T(_+f))})};return T(0).then(()=>{if(c.length>0)throw new Jw("Error modifying one or more objects",c,d,y);return b.length})})})}delete(){var r=this._ctx,t=r.range;return Dd(r)&&(r.isPrimKey&&!G0e||t.type===3)?this._write(n=>{const{primaryKey:i}=r.table.core.schema,s=t;return r.table.core.count({trans:n,query:{index:i,range:s}}).then(o=>r.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:f})=>{if(f)throw new Jw("Could not delete some values",Object.keys(a).map(c=>a[c]),o-f);return o-f}))}):this.modify(FE)}}const FE=(e,r)=>r.value=null;function X0e(e,r){return e<r?-1:e===r?0:1}function J0e(e,r){return e>r?-1:e===r?0:1}function qs(e,r,t){var n=e instanceof hK?new e.Collection(e):e;return n._ctx.error=t?new t(r):new TypeError(r),n}function Bd(e){return new e.Collection(e,()=>fK("")).limit(0)}function Q0e(e,r,t,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=r[l];if(u!==n[l])return i(e[l],t[l])<0?e.substr(0,l)+t[l]+t.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+t.substr(l+1):a>=0?e.substr(0,a)+r[a]+t.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&s==="next"?e+t.substr(e.length):o<e.length&&s==="prev"?e.substr(0,t.length):a<0?null:e.substr(0,a)+n[a]+t.substr(a+1)}function Y0(e,r,t,n){var i,s,o,a,l,u,f,c=t.length;if(!t.every(b=>typeof b=="string"))return qs(e,lK);function d(b){i=function(_){return _==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),s=function(_){return _==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),o=b==="next"?X0e:J0e;var T=t.map(function(_){return{lower:s(_),upper:i(_)}}).sort(function(_,A){return o(_.lower,A.lower)});a=T.map(function(_){return _.upper}),l=T.map(function(_){return _.lower}),u=b,f=b==="next"?"":n}d("next");var y=new e.Collection(e,()=>fc(a[0],l[c-1]+n));y._ondirectionchange=function(b){d(b)};var w=0;return y._addAlgorithm(function(b,T,_){var A=b.key;if(typeof A!="string")return!1;var x=s(A);if(r(x,l,w))return!0;for(var I=null,O=w;O<c;++O){var C=Q0e(A,x,a[O],l[O],o,u);C===null&&I===null?w=O+1:(I===null||o(I,C)>0)&&(I=C)}return T(I!==null?function(){b.continue(I+f)}:_),!1}),y}function fc(e,r,t,n){return{type:2,lower:e,upper:r,lowerOpen:t,upperOpen:n}}function fK(e){return{type:1,lower:e,upper:e}}let hK=class{get Collection(){return this._ctx.table.db.Collection}between(r,t,n,i){n=n!==!1,i=i===!0;try{return this._cmp(r,t)>0||this._cmp(r,t)===0&&(n||i)&&(!n||!i)?Bd(this):new this.Collection(this,()=>fc(r,t,!n,!i))}catch{return qs(this,Hl)}}equals(r){return r==null?qs(this,Hl):new this.Collection(this,()=>fK(r))}above(r){return r==null?qs(this,Hl):new this.Collection(this,()=>fc(r,void 0,!0))}aboveOrEqual(r){return r==null?qs(this,Hl):new this.Collection(this,()=>fc(r,void 0,!1))}below(r){return r==null?qs(this,Hl):new this.Collection(this,()=>fc(void 0,r,!1,!0))}belowOrEqual(r){return r==null?qs(this,Hl):new this.Collection(this,()=>fc(void 0,r))}startsWith(r){return typeof r!="string"?qs(this,lK):this.between(r,r+Qf,!0,!0)}startsWithIgnoreCase(r){return r===""?this.startsWith(r):Y0(this,(t,n)=>t.indexOf(n[0])===0,[r],Qf)}equalsIgnoreCase(r){return Y0(this,(t,n)=>t===n[0],[r],"")}anyOfIgnoreCase(){var r=Xl.apply(Jd,arguments);return r.length===0?Bd(this):Y0(this,(t,n)=>n.indexOf(t)!==-1,r,"")}startsWithAnyOfIgnoreCase(){var r=Xl.apply(Jd,arguments);return r.length===0?Bd(this):Y0(this,(t,n)=>n.some(i=>t.indexOf(i)===0),r,Qf)}anyOf(){const r=Xl.apply(Jd,arguments);let t=this._cmp;try{r.sort(t)}catch{return qs(this,Hl)}if(r.length===0)return Bd(this);const n=new this.Collection(this,()=>fc(r[0],r[r.length-1]));n._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,r.sort(t)};let i=0;return n._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,r[i])>0;)if(++i,i===r.length)return o(a),!1;return t(l,r[i])===0||(o(()=>{s.continue(r[i])}),!1)}),n}notEqual(r){return this.inAnyRange([[kI,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const r=Xl.apply(Jd,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return qs(this,Hl)}const t=r.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[kI,i]],null);return t.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(r,t){const n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(r.length===0)return Bd(this);if(!r.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return qs(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Wt.InvalidArgument);const l=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;let f,c=i;function d(A,x){return c(A[0],x[0])}try{f=r.reduce(function(A,x){let I=0,O=A.length;for(;I<O;++I){const C=A[I];if(n(x[0],C[1])<0&&n(x[1],C[0])>0){C[0]=o(C[0],x[0]),C[1]=a(C[1],x[1]);break}}return I===O&&A.push(x),A},[]),f.sort(d)}catch{return qs(this,Hl)}let y=0;const w=u?A=>i(A,f[y][1])>0:A=>i(A,f[y][1])>=0,b=l?A=>s(A,f[y][0])>0:A=>s(A,f[y][0])>=0;let T=w;const _=new this.Collection(this,()=>fc(f[0][0],f[f.length-1][1],!l,!u));return _._ondirectionchange=A=>{A==="next"?(T=w,c=i):(T=b,c=s),f.sort(d)},_._addAlgorithm((A,x,I)=>{for(var O=A.key;T(O);)if(++y,y===f.length)return x(I),!1;return!!function(C){return!w(C)&&!b(C)}(O)||(this._cmp(O,f[y][1])===0||this._cmp(O,f[y][0])===0||x(()=>{c===i?A.continue(f[y][0]):A.continue(f[y][1])}),!1)}),_}startsWithAnyOf(){const r=Xl.apply(Jd,arguments);return r.every(t=>typeof t=="string")?r.length===0?Bd(this):this.inAnyRange(r.map(t=>[t,t+Qf])):qs(this,"startsWithAnyOf() only works with strings")}};function il(e){return sn(function(r){return Hy(r),e(r.target.error),!1})}function Hy(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Uy="storagemutated",$c="x-storagemutated-1",Hc=fy(null,Uy);class e1e{_lock(){return Gg(!Mt.global),++this._reculock,this._reculock!==1||Mt.global||(Mt.lockOwnerFor=this),this}_unlock(){if(Gg(!Mt.global),--this._reculock==0)for(Mt.global||(Mt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{$v(r[1],r[0])}catch{}}return this}_locked(){return this._reculock&&Mt.lockOwnerFor!==this}create(r){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Gg(!this.idbtrans),!r&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Wt.DatabaseClosed(n);case"MissingAPIError":throw new Wt.MissingAPI(n.message,n);default:throw new Wt.OpenFailed(n)}if(!this.active)throw new Wt.TransactionInactive;return Gg(this._completion._state===null),(r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=sn(i=>{Hy(i),this._reject(r.error)}),r.onabort=sn(i=>{Hy(i),this.active&&this._reject(new Wt.Abort(r.error)),this.active=!1,this.on("abort").fire(i)}),r.oncomplete=sn(()=>{this.active=!1,this._resolve(),"mutatedParts"in r&&Hc.storagemutated.fire(r.mutatedParts)}),this}_promise(r,t,n){if(r==="readwrite"&&this.mode!=="readwrite")return ri(new Wt.ReadOnly("Transaction is readonly"));if(!this.active)return ri(new Wt.TransactionInactive);if(this._locked())return new Et((s,o)=>{this._blockedFuncs.push([()=>{this._promise(r,t,n).then(s,o)},Mt])});if(n)return jc(()=>{var s=new Et((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Et((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(r){var t=this._root();const n=Et.resolve(r);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Et((o,a)=>{n.then(l=>t._waitingQueue.push(sn(o.bind(null,l))),l=>t._waitingQueue.push(sn(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Wt.Abort))}table(r){const t=this._memoizedTables||(this._memoizedTables={});if(no(t,r))return t[r];const n=this.schema[r];if(!n)throw new Wt.NotFound("Table "+r+" not part of transaction");const i=new this.db.Table(r,n,this);return i.core=this.db.core.table(r),t[r]=i,i}}function TI(e,r,t,n,i,s,o){return{name:e,keyPath:r,unique:t,multi:n,auto:i,compound:s,src:(t&&!o?"&":"")+(n?"*":"")+(i?"++":"")+dK(r)}}function dK(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function pK(e,r,t){return{name:e,primKey:r,indexes:t,mappedClass:null,idxByName:qq(t,n=>[n.name,n])}}let Wy=e=>{try{return e.only([[]]),Wy=()=>[[]],[[]]}catch{return Wy=()=>Qf,Qf}};function II(e){return e==null?()=>{}:typeof e=="string"?function(r){return r.split(".").length===1?n=>n[r]:n=>ru(n,r)}(e):r=>ru(r,e)}function n6(e){return[].slice.call(e)}let t1e=0;function hy(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function r1e(e,r,t){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:f,lowerOpen:c,upperOpen:d}=l;return u===void 0?f===void 0?null:r.upperBound(f,!!d):f===void 0?r.lowerBound(u,!!c):r.bound(u,f,!!c,!!d)}const{schema:i,hasGetAll:s}=function(l,u){const f=n6(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(c=>u.objectStore(c)).map(c=>{const{keyPath:d,autoIncrement:y}=c,w=Hi(d),b=d==null,T={},_={name:c.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:d,autoIncrement:y,unique:!0,extractKey:II(d)},indexes:n6(c.indexNames).map(A=>c.index(A)).map(A=>{const{name:x,unique:I,multiEntry:O,keyPath:C}=A,g={name:x,compound:Hi(C),keyPath:C,unique:I,multiEntry:O,extractKey:II(C)};return T[hy(C)]=g,g}),getIndexByKeyPath:A=>T[hy(A)]};return T[":id"]=_.primaryKey,d!=null&&(T[hy(d)]=_.primaryKey),_})},hasGetAll:f.length>0&&"getAll"in u.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=i.tables.map(l=>function(u){const f=u.name;return{name:f,schema:u,mutate:function({trans:c,type:d,keys:y,values:w,range:b}){return new Promise((T,_)=>{T=sn(T);const A=c.objectStore(f),x=A.keyPath==null,I=d==="put"||d==="add";if(!I&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:O}=y||w||{length:1};if(y&&w&&y.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const g=[],M=[];let B=0;const z=ne=>{++B,Hy(ne)};if(d==="deleteRange"){if(b.type===4)return T({numFailures:B,failures:M,results:[],lastResult:void 0});b.type===3?g.push(C=A.clear()):g.push(C=A.delete(n(b)))}else{const[ne,re]=I?x?[w,y]:[w,null]:[y,null];if(I)for(let J=0;J<O;++J)g.push(C=re&&re[J]!==void 0?A[d](ne[J],re[J]):A[d](ne[J])),C.onerror=z;else for(let J=0;J<O;++J)g.push(C=A[d](ne[J])),C.onerror=z}const V=ne=>{const re=ne.target.result;g.forEach((J,F)=>J.error!=null&&(M[F]=J.error)),T({numFailures:B,failures:M,results:d==="delete"?y:g.map(J=>J.result),lastResult:re})};C.onerror=ne=>{z(ne),V(ne)},C.onsuccess=V})},getMany:({trans:c,keys:d})=>new Promise((y,w)=>{y=sn(y);const b=c.objectStore(f),T=d.length,_=new Array(T);let A,x=0,I=0;const O=g=>{const M=g.target;_[M._pos]=M.result,++I===x&&y(_)},C=il(w);for(let g=0;g<T;++g)d[g]!=null&&(A=b.get(d[g]),A._pos=g,A.onsuccess=O,A.onerror=C,++x);x===0&&y(_)}),get:({trans:c,key:d})=>new Promise((y,w)=>{y=sn(y);const b=c.objectStore(f).get(d);b.onsuccess=T=>y(T.target.result),b.onerror=il(w)}),query:function(c){return d=>new Promise((y,w)=>{y=sn(y);const{trans:b,values:T,limit:_,query:A}=d,x=_===1/0?void 0:_,{index:I,range:O}=A,C=b.objectStore(f),g=I.isPrimaryKey?C:C.index(I.name),M=n(O);if(_===0)return y({result:[]});if(c){const B=T?g.getAll(M,x):g.getAllKeys(M,x);B.onsuccess=z=>y({result:z.target.result}),B.onerror=il(w)}else{let B=0;const z=T||!("openKeyCursor"in g)?g.openCursor(M):g.openKeyCursor(M),V=[];z.onsuccess=ne=>{const re=z.result;return re?(V.push(T?re.value:re.primaryKey),++B===_?y({result:V}):void re.continue()):y({result:V})},z.onerror=il(w)}})}(s),openCursor:function({trans:c,values:d,query:y,reverse:w,unique:b}){return new Promise((T,_)=>{T=sn(T);const{index:A,range:x}=y,I=c.objectStore(f),O=A.isPrimaryKey?I:I.index(A.name),C=w?b?"prevunique":"prev":b?"nextunique":"next",g=d||!("openKeyCursor"in O)?O.openCursor(n(x),C):O.openKeyCursor(n(x),C);g.onerror=il(_),g.onsuccess=sn(M=>{const B=g.result;if(!B)return void T(null);B.___id=++t1e,B.done=!1;const z=B.continue.bind(B);let V=B.continuePrimaryKey;V&&(V=V.bind(B));const ne=B.advance.bind(B),re=()=>{throw new Error("Cursor not stopped")};B.trans=c,B.stop=B.continue=B.continuePrimaryKey=B.advance=()=>{throw new Error("Cursor not started")},B.fail=sn(_),B.next=function(){let J=1;return this.start(()=>J--?this.continue():this.stop()).then(()=>this)},B.start=J=>{const F=new Promise((ie,_e)=>{ie=sn(ie),g.onerror=il(_e),B.fail=_e,B.stop=we=>{B.stop=B.continue=B.continuePrimaryKey=B.advance=re,ie(we)}}),Z=()=>{if(g.result)try{J()}catch(ie){B.fail(ie)}else B.done=!0,B.start=()=>{throw new Error("Cursor behind last entry")},B.stop()};return g.onsuccess=sn(ie=>{g.onsuccess=Z,Z()}),B.continue=z,B.continuePrimaryKey=V,B.advance=ne,Z(),F},T(B)},_)})},count({query:c,trans:d}){const{index:y,range:w}=c;return new Promise((b,T)=>{const _=d.objectStore(f),A=y.isPrimaryKey?_:_.index(y.name),x=n(w),I=x?A.count(x):A.count();I.onsuccess=sn(O=>b(O.target.result)),I.onerror=il(T)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Wy(r),schema:i}}function AI({_novip:e},r){const t=r.db,n=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(f,c){return c.reduce((d,{create:y})=>({...d,...y(d)}),f)}(r1e(s,o,l),i.dbcore)}}(e._middlewares,t,e._deps,r);e.core=n.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function n$({_novip:e},r,t,n){t.forEach(i=>{const s=n[i];r.forEach(o=>{const a=TP(o,i);(!a||"value"in a&&a.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?tu(o,i,{get(){return this.table(i)},set(l){Hq(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function OI({_novip:e},r){r.forEach(t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]})}function n1e(e,r){return e._cfg.version-r._cfg.version}function i1e(e,r,t,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(t),s._completion.catch(n);const o=s._reject.bind(s),a=Mt.transless||Mt;jc(()=>{Mt.trans=s,Mt.transless=a,r===0?(Hn(i).forEach(l=>{jE(t,l,i[l].primKey,i[l].indexes)}),AI(e,t),Et.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,f,c){const d=[],y=l._versions;let w=l._dbSchema=PI(l,l.idbdb,c),b=!1;const T=y.filter(A=>A._cfg.version>=u);function _(){return d.length?Et.resolve(d.shift()(f.idbtrans)).then(_):Et.resolve()}return T.forEach(A=>{d.push(()=>{const x=w,I=A._cfg.dbschema;NI(l,x,c),NI(l,I,c),w=l._dbSchema=I;const O=vK(x,I);O.add.forEach(g=>{jE(c,g[0],g[1].primKey,g[1].indexes)}),O.change.forEach(g=>{if(g.recreate)throw new Wt.Upgrade("Not yet support for changing primary key");{const M=c.objectStore(g.name);g.add.forEach(B=>CI(M,B)),g.change.forEach(B=>{M.deleteIndex(B.name),CI(M,B)}),g.del.forEach(B=>M.deleteIndex(B))}});const C=A._cfg.contentUpgrade;if(C&&A._cfg.version>u){AI(l,c),f._memoizedTables={},b=!0;let g=Kq(I);O.del.forEach(V=>{g[V]=x[V]}),OI(l,[l.Transaction.prototype]),n$(l,[l.Transaction.prototype],Hn(g),g),f.schema=g;const M=IP(C);let B;M&&wv();const z=Et.follow(()=>{if(B=C(f),B&&M){var V=gu.bind(null,null);B.then(V,V)}});return B&&typeof B.then=="function"?Et.resolve(B):z.then(()=>B)}}),d.push(x=>{(!b||!V0e)&&function(I,O){[].slice.call(O.db.objectStoreNames).forEach(C=>I[C]==null&&O.db.deleteObjectStore(C))}(A._cfg.dbschema,x),OI(l,[l.Transaction.prototype]),n$(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),_().then(()=>{var A,x;x=c,Hn(A=w).forEach(I=>{x.db.objectStoreNames.contains(I)||jE(x,I,A[I].primKey,A[I].indexes)})})}(e,r,s,t).catch(o)})}function vK(e,r){const t={del:[],add:[],change:[]};let n;for(n in e)r[n]||t.del.push(n);for(n in r){const i=e[n],s=r[n];if(i){const o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!M_)o.recreate=!0,t.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const f=a[u],c=l[u];f?f.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([n,s])}return t}function jE(e,r,t,n){const i=e.db.createObjectStore(r,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return n.forEach(s=>CI(i,s)),i}function CI(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function PI(e,r,t){const n={};return Xw(r.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const a=TI(dK(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let f=0;f<s.indexNames.length;++f){const c=s.index(s.indexNames[f]);o=c.keyPath;var u=TI(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}n[i]=pK(i,a,l)}),n}function NI({_novip:e},r,t){const n=t.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=t.objectStore(s);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,f=typeof u=="string"?u:"["+Xw(u).join("+")+"]";if(r[s]){const c=r[s].idxByName[f];c&&(c.name=l,delete r[s].idxByName[f],r[s].idxByName[l]=c)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&tn.WorkerGlobalScope&&tn instanceof tn.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class s1e{_parseStoresSpec(r,t){Hn(r).forEach(n=>{if(r[n]!==null){var i=r[n].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return TI(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Hi(u),a===0)}),s=i.shift();if(s.multi)throw new Wt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Wt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Wt.Schema("Index must have a name and cannot be an empty string")}),t[n]=pK(n,s,i)}})}stores(r){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?us(this._cfg.storesSource,r):r;const n=t._versions,i={};let s={};return n.forEach(o=>{us(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,OI(t,[t._allTables,t,t.Transaction.prototype]),n$(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Hn(s),s),t._storeNames=Hn(s),this}upgrade(r){return this._cfg.contentUpgrade=CP(this._cfg.contentUpgrade||Ur,r),this}}function DP(e,r){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new nu(L_,{addons:[],indexedDB:e,IDBKeyRange:r}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function BP(e){return e&&typeof e.databases=="function"}function RI(e){return jc(function(){return Mt.letThrough=!0,e()})}function o1e(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(r){var t=function(){return indexedDB.databases().finally(r)};e=setInterval(t,100),t()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function a1e(e){const r=e._state,{indexedDB:t}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?ri(r.dbOpenError):e);$l&&(r.openCanceller._stackHolder=Uh()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const n=r.openCanceller;function i(){if(r.openCanceller!==n)throw new Wt.DatabaseClosed("db.open() was cancelled")}let s=r.dbReadyResolve,o=null,a=!1;return Et.race([n,(typeof navigator>"u"?Et.resolve():o1e()).then(()=>new Et((l,u)=>{if(i(),!t)throw new Wt.MissingAPI;const f=e.name,c=r.autoSchema?t.open(f):t.open(f,Math.round(10*e.verno));if(!c)throw new Wt.MissingAPI;c.onerror=il(u),c.onblocked=sn(e._fireOnBlocked),c.onupgradeneeded=sn(d=>{if(o=c.transaction,r.autoSchema&&!e._options.allowEmptyDB){c.onerror=Hy,o.abort(),c.result.close();const w=t.deleteDatabase(f);w.onsuccess=w.onerror=sn(()=>{u(new Wt.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{o.onerror=il(u);var y=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=y<1,e._novip.idbdb=c.result,i1e(e,y/10,o,u)}},u),c.onsuccess=sn(()=>{o=null;const d=e._novip.idbdb=c.result,y=Xw(d.objectStoreNames);if(y.length>0)try{const b=d.transaction((w=y).length===1?w[0]:w,"readonly");r.autoSchema?function({_novip:T},_,A){T.verno=_.version/10;const x=T._dbSchema=PI(0,_,A);T._storeNames=Xw(_.objectStoreNames,0),n$(T,[T._allTables],Hn(x),x)}(e,d,b):(NI(e,e._dbSchema,b),function(T,_){const A=vK(PI(0,T.idbdb,_),T._dbSchema);return!(A.add.length||A.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),AI(e,b)}catch{}var w;cy.push(e),d.onversionchange=sn(b=>{r.vcFired=!0,e.on("versionchange").fire(b)}),d.onclose=sn(b=>{e.on("close").fire(b)}),a&&function({indexedDB:b,IDBKeyRange:T},_){!BP(b)&&_!==L_&&DP(b,T).put({name:_}).catch(Ur)}(e._deps,f),l()},u)}))]).then(()=>(i(),r.onReadyBeingFired=[],Et.resolve(RI(()=>e.on.ready.fire(e.vip))).then(function l(){if(r.onReadyBeingFired.length>0){let u=r.onReadyBeingFired.reduce(CP,Ur);return r.onReadyBeingFired=[],Et.resolve(RI(()=>u(e.vip))).then(l)}}))).finally(()=>{r.onReadyBeingFired=null,r.isBeingOpened=!1}).then(()=>e).catch(l=>{r.dbOpenError=l;try{o&&o.abort()}catch{}return n===r.openCanceller&&e._close(),ri(l)}).finally(()=>{r.openComplete=!0,s()})}function DI(e){var r=s=>e.next(s),t=i(r),n=i(s=>e.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(t,n):Hi(l)?Promise.all(l).then(t,n):t(l)}}return i(r)()}function l1e(e,r,t){var n=arguments.length;if(n<2)throw new Wt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return t=i.pop(),[e,Vq(i),t]}function gK(e,r,t,n,i){return Et.resolve().then(()=>{const s=Mt.transless||Mt,o=e._createTransaction(r,t,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===OP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>gK(e,r,t,null,i))):ri(c)}const l=IP(i);let u;l&&wv();const f=Et.follow(()=>{if(u=i.call(o,o),u)if(l){var c=gu.bind(null,null);u.then(c,c)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=DI(u))},a);return(u&&typeof u.then=="function"?Et.resolve(u).then(c=>o.active?c:ri(new Wt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>u)).then(c=>(n&&o._resolve(),o._completion.then(()=>c))).catch(c=>(o._reject(c),ri(c)))})}function Z0(e,r,t){const n=Hi(e)?e.slice():[e];for(let i=0;i<t;++i)n.push(r);return n}const u1e={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(r){const t=e.table(r),{schema:n}=t,i={},s=[];function o(f,c,d){const y=hy(f),w=i[y]=i[y]||[],b=f==null?0:typeof f=="string"?1:f.length,T=c>0,_={...d,isVirtual:T,keyTail:c,keyLength:b,extractKey:II(f),unique:!T&&d.unique};return w.push(_),_.isPrimaryKey||s.push(_),b>1&&o(b===2?f[0]:f.slice(0,b-1),c+1,d),w.sort((A,x)=>A.keyTail-x.keyTail),_}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const f of n.indexes)o(f.keyPath,0,f);function l(f){const c=f.query.index;return c.isVirtual?{...f,query:{index:c,range:(d=f.query.range,y=c.keyTail,{type:d.type===1?2:d.type,lower:Z0(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Z0(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}:f;var d,y}return{...t,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(f){const c=i[hy(f)];return c&&c[0]}},count:f=>t.count(l(f)),query:f=>t.query(l(f)),openCursor(f){const{keyTail:c,isVirtual:d,keyLength:y}=f.query.index;return d?t.openCursor(l(f)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(_){_!=null?b.continue(Z0(_,f.reverse?e.MAX_KEY:e.MIN_KEY,c)):f.unique?b.continue(b.key.slice(0,y).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,c)):b.continue()}},continuePrimaryKey:{value(_,A){b.continuePrimaryKey(Z0(_,e.MAX_KEY,c),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const _=b.key;return y===1?_[0]:_.slice(0,y)}},value:{get:()=>b.value}})}(w)):t.openCursor(f)}}}}}};function MP(e,r,t,n){return t=t||{},n=n||"",Hn(e).forEach(i=>{if(no(r,i)){var s=e[i],o=r[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=pI(s);a!==pI(o)?t[n+i]=r[i]:a==="Object"?MP(s,o,t,n+i+"."):s!==o&&(t[n+i]=r[i])}else s!==o&&(t[n+i]=r[i])}else t[n+i]=void 0}),Hn(r).forEach(i=>{no(e,i)||(t[n+i]=r[i])}),t}const c1e={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(r){const t=e.table(r),{primaryKey:n}=t.schema;return{...t,mutate(s){const o=Mt.trans,{deleting:a,creating:l,updating:u}=o.table(r).hook;switch(s.type){case"add":if(l.fire===Ur)break;return o._promise("readwrite",()=>f(s),!0);case"put":if(l.fire===Ur&&u.fire===Ur)break;return o._promise("readwrite",()=>f(s),!0);case"delete":if(a.fire===Ur)break;return o._promise("readwrite",()=>f(s),!0);case"deleteRange":if(a.fire===Ur)break;return o._promise("readwrite",()=>function(d){return c(d.trans,d.range,1e4)}(s),!0)}return t.mutate(s);function f(d){const y=Mt.trans,w=d.keys||function(b,T){return T.type==="delete"?T.keys:T.keys||T.values.map(b.extractKey)}(n,d);if(!w)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:w}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(b,T,_){return T.type==="add"?Promise.resolve([]):b.getMany({trans:T.trans,keys:_,cache:"immutable"})}(t,d,w).then(b=>{const T=w.map((_,A)=>{const x=b[A],I={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(I,_,x,y);else if(d.type==="add"||x===void 0){const O=l.fire.call(I,_,d.values[A],y);_==null&&O!=null&&(_=O,d.keys[A]=_,n.outbound||Ta(d.values[A],n.keyPath,_))}else{const O=MP(x,d.values[A]),C=u.fire.call(I,O,_,x,y);if(C){const g=d.values[A];Object.keys(C).forEach(M=>{no(g,M)?g[M]=C[M]:Ta(g,M,C[M])})}}return I});return t.mutate(d).then(({failures:_,results:A,numFailures:x,lastResult:I})=>{for(let O=0;O<w.length;++O){const C=A?A[O]:w[O],g=T[O];C==null?g.onerror&&g.onerror(_[O]):g.onsuccess&&g.onsuccess(d.type==="put"&&b[O]?d.values[O]:C)}return{failures:_,results:A,numFailures:x,lastResult:I}}).catch(_=>(T.forEach(A=>A.onerror&&A.onerror(_)),Promise.reject(_)))})}function c(d,y,w){return t.query({trans:d,values:!1,query:{index:n,range:y},limit:w}).then(({result:b})=>f({type:"delete",keys:b,trans:d}).then(T=>T.numFailures>0?Promise.reject(T.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:c(d,{...y,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function yK(e,r,t){try{if(!r||r.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<r.keys.length&&s<e.length;++i)as(r.keys[i],e[s])===0&&(n.push(t?Nm(r.values[i]):r.values[i]),++s);return n.length===e.length?n:null}catch{return null}}const f1e={stack:"dbcore",level:-1,create:e=>({table:r=>{const t=e.table(r);return{...t,getMany:n=>{if(!n.cache)return t.getMany(n);const i=yK(n.keys,n.trans._cache,n.cache==="clone");return i?Et.resolve(i):t.getMany(n).then(s=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Nm(s):s},s))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),t.mutate(n))}}})};function LP(e){return!("from"in e)}const Kl=function(e,r){if(!this){const t=new Kl;return e&&"d"in e&&us(t,e),t}us(this,arguments.length?{d:1,from:e,to:arguments.length>1?r:e}:{d:0})};function qy(e,r,t){const n=as(r,t);if(isNaN(n))return;if(n>0)throw RangeError();if(LP(e))return us(e,{from:r,to:t,d:1});const i=e.l,s=e.r;if(as(t,e.from)<0)return i?qy(i,r,t):e.l={from:r,to:t,d:1,l:null,r:null},i6(e);if(as(r,e.to)>0)return s?qy(s,r,t):e.r={from:r,to:t,d:1,l:null,r:null},i6(e);as(r,e.from)<0&&(e.from=r,e.l=null,e.d=s?s.d+1:1),as(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&i$(e,i),s&&o&&i$(e,s)}function i$(e,r){LP(r)||function t(n,{from:i,to:s,l:o,r:a}){qy(n,i,s),o&&t(n,o),a&&t(n,a)}(e,r)}function h1e(e,r){const t=BI(r);let n=t.next();if(n.done)return!1;let i=n.value;const s=BI(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(as(a.from,i.to)<=0&&as(a.to,i.from)>=0)return!0;as(i.from,a.from)<0?i=(n=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function BI(e){let r=LP(e)?null:{s:0,n:e};return{next(t){const n=arguments.length>0;for(;r;)switch(r.s){case 0:if(r.s=1,n)for(;r.n.l&&as(t,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!n||as(t,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function i6(e){var r,t;const n=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],o[i]=a[s],e[s]=o,o.d=s6(o)}e.d=s6(e)}function s6({r:e,l:r}){return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}Kp(Kl.prototype,{add(e){return i$(this,e),this},addKey(e){return qy(this,e,e),this},addKeys(e){return e.forEach(r=>qy(this,r,r)),this},[vI](){return BI(this)}});const d1e={stack:"dbcore",level:0,create:e=>{const r=e.schema.name,t=new Kl(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:d=>{const y=d.trans,w=y.mutatedParts||(y.mutatedParts={}),b=C=>{const g=`idb://${r}/${n}/${C}`;return w[g]||(w[g]=new Kl)},T=b(""),_=b(":dels"),{type:A}=d;let[x,I]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const O=d.trans._cache;return i.mutate(d).then(C=>{if(Hi(x)){A!=="delete"&&(x=C.results),T.addKeys(x);const g=yK(x,O);g||A==="add"||_.addKeys(x),(g||I)&&function(M,B,z,V){function ne(re){const J=M(re.name||"");function F(ie){return ie!=null?re.extractKey(ie):null}const Z=ie=>re.multiEntry&&Hi(ie)?ie.forEach(_e=>J.addKey(_e)):J.addKey(ie);(z||V).forEach((ie,_e)=>{const we=z&&F(z[_e]),Ce=V&&F(V[_e]);as(we,Ce)!==0&&(we!=null&&Z(we),Ce!=null&&Z(Ce))})}B.indexes.forEach(ne)}(b,s,g,I)}else if(x){const g={from:x.lower,to:x.upper};_.add(g),T.add(g)}else T.add(t),_.add(t),s.indexes.forEach(g=>b(g.name).add(t));return C})}},f=({query:{index:d,range:y}})=>{var w,b;return[d,new Kl((w=y.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=y.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},c={get:d=>[o,new Kl(d.key)],getMany:d=>[o,new Kl().addKeys(d.keys)],count:f,query:f,openCursor:f};return Hn(c).forEach(d=>{u[d]=function(y){const{subscr:w}=Mt;if(w){const b=I=>{const O=`idb://${r}/${n}/${I}`;return w[O]||(w[O]=new Kl)},T=b(""),_=b(":dels"),[A,x]=c[d](y);if(b(A.name||"").add(x),!A.isPrimaryKey){if(d!=="count"){const I=d==="query"&&l&&y.values&&i.query({...y,values:!1});return i[d].apply(this,arguments).then(O=>{if(d==="query"){if(l&&y.values)return I.then(({result:g})=>(T.addKeys(g),O));const C=y.values?O.result.map(a):O.result;y.values?T.addKeys(C):_.addKeys(C)}else if(d==="openCursor"){const C=O,g=y.values;return C&&Object.create(C,{key:{get:()=>(_.addKey(C.primaryKey),C.key)},primaryKey:{get(){const M=C.primaryKey;return _.addKey(M),M}},value:{get:()=>(g&&T.addKey(C.primaryKey),C.value)}})}return O})}_.add(t)}}return i[d].apply(this,arguments)}}),u}}}};class nu{constructor(r,t){this._middlewares={},this.verno=0;const n=nu.dependencies;this._options=t={addons:nu.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ur,dbReadyPromise:null,cancelOpen:Ur,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new Et(a=>{s.dbReadyResolve=a}),s.openCanceller=new Et((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=r,this.on=fy(this,"populate","blocked","versionchange","close",{ready:[CP,Ur]}),this.on.ready.subscribe=Uq(this.on.ready.subscribe,a=>(l,u)=>{nu.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||Et.resolve().then(l),u&&a(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),u&&a(l);else{a(l);const c=this;u||a(function d(){c.on.ready.unsubscribe(l),c.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,Dg(Z0e.prototype,function(a,l){this.db=o;let u=cK,f=null;if(l)try{u=l()}catch(w){f=w}const c=a._ctx,d=c.table,y=d.hook.reading.fire;this._ctx={table:d,index:c.index,isPrimKey:!c.index||d.schema.primKey.keyPath&&c.index===d.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:c.or,valueMapper:y!==jy?y:null}})),this.Table=function(a){return Dg(Y0e.prototype,function(l,u,f){this.db=a,this._tx=f,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:fy(null,{creating:[M0e,Ur],reading:[B0e,jy],updating:[F0e,Ur],deleting:[L0e,Ur]})})}(this),this.Transaction=function(a){return Dg(e1e.prototype,function(l,u,f,c,d){this.db=a,this.mode=l,this.storeNames=u,this.schema=f,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=fy(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Et((y,w)=>{this._resolve=y,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},y=>{var w=this.active;return this.active=!1,this.on.error.fire(y),this.parent?this.parent._reject(y):w&&this.idbtrans&&this.idbtrans.abort(),ri(y)})})}(this),this.Version=function(a){return Dg(s1e.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Dg(hK.prototype,function(l,u,f){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:f};const c=a._deps.indexedDB;if(!c)throw new Wt.MissingAPI;this._cmp=this._ascending=c.cmp.bind(c),this._descending=(d,y)=>c.cmp(y,d),this._max=(d,y)=>c.cmp(d,y)>0?d:y,this._min=(d,y)=>c.cmp(d,y)<0?d:y,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Wy(t.IDBKeyRange),this._createTransaction=(a,l,u,f)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,f),this._fireOnBlocked=a=>{this.on("blocked").fire(a),cy.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(u1e),this.use(c1e),this.use(d1e),this.use(f1e),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(r){if(isNaN(r)||r<.1)throw new Wt.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new Wt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);const t=this._versions;var n=t.filter(i=>i._cfg.version===r)[0];return n||(n=new this.Version(r),t.push(n),t.sort(n1e),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(r){return this.idbdb&&(this._state.openComplete||Mt.letThrough||this._vip)?r():new Et((t,n)=>{if(this._state.openComplete)return n(new Wt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new Wt.DatabaseClosed);this.open().catch(Ur)}this._state.dbReadyPromise.then(t,n)}).then(r)}use({stack:r,create:t,level:n,name:i}){i&&this.unuse({stack:r,name:i});const s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:t,level:n??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:r,name:t,create:n}){return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(i=>n?i.create!==n:!!t&&i.name!==t)),this}open(){return a1e(this)}_close(){const r=this._state,t=cy.indexOf(this);if(t>=0&&cy.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}r.dbReadyPromise=new Et(n=>{r.dbReadyResolve=n}),r.openCanceller=new Et((n,i)=>{r.cancelOpen=i})}close(){this._close();const r=this._state;this._options.autoOpen=!1,r.dbOpenError=new Wt.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError)}delete(){const r=arguments.length>0,t=this._state;return new Et((n,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=sn(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!BP(a)&&u!==L_&&DP(a,l).delete(u).catch(Ur)})(this._deps,this.name),n()}),o.onerror=il(i),o.onblocked=this._fireOnBlocked};if(r)throw new Wt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Hn(this._allTables).map(r=>this._allTables[r])}transaction(){const r=l1e.apply(this,arguments);return this._transaction.apply(this,r)}_transaction(r,t,n){let i=Mt.trans;i&&i.db===this&&r.indexOf("!")===-1||(i=null);const s=r.indexOf("?")!==-1;let o,a;r=r.replace("!","").replace("?","");try{if(a=t.map(u=>{var f=u instanceof this.Table?u.name:u;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),r=="r"||r===DE)o=DE;else{if(r!="rw"&&r!=BE)throw new Wt.InvalidArgument("Invalid transaction mode: "+r);o=BE}if(i){if(i.mode===DE&&o===BE){if(!s)throw new Wt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new Wt.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(f,c)=>{c(u)}):ri(u)}const l=gK.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Mt.trans?$v(Mt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(r){if(!no(this._allTables,r))throw new Wt.InvalidTable(`Table ${r} does not exist`);return this._allTables[r]}}const p1e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class v1e{constructor(r){this._subscribe=r}subscribe(r,t,n){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:t,complete:n})}[p1e](){return this}}function mK(e,r){return Hn(r).forEach(t=>{i$(e[t]||(e[t]=new Kl),r[t])}),e}function g1e(e){let r,t=!1;const n=new v1e(i=>{const s=IP(e);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,Hc.storagemutated.unsubscribe(y)}};i.start&&i.start(u);let f=!1,c=!1;function d(){return Hn(l).some(b=>a[b]&&h1e(a[b],l[b]))}const y=b=>{mK(a,b),d()&&w()},w=()=>{if(f||o)return;a={};const b={},T=function(_){s&&wv();const A=()=>jc(e,{subscr:_,trans:null}),x=Mt.trans?$v(Mt.transless,A):A();return s&&x.then(gu,gu),x}(b);c||(Hc(Uy,y),c=!0),f=!0,Promise.resolve(T).then(_=>{t=!0,r=_,f=!1,o||(d()?w():(a={},l=b,i.next&&i.next(_)))},_=>{f=!1,t=!1,i.error&&i.error(_),u.unsubscribe()})};return w(),u});return n.hasValue=()=>t,n.getValue=()=>r,n}let MI;try{MI={indexedDB:tn.indexedDB||tn.mozIndexedDB||tn.webkitIndexedDB||tn.msIndexedDB,IDBKeyRange:tn.IDBKeyRange||tn.webkitIDBKeyRange}}catch{MI={indexedDB:null,IDBKeyRange:null}}const Af=nu;function nw(e){let r=Ql;try{Ql=!0,Hc.storagemutated.fire(e)}finally{Ql=r}}Kp(Af,{...X1,delete:e=>new Af(e,{addons:[]}).delete(),exists:e=>new Af(e,{addons:[]}).open().then(r=>(r.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:r,IDBKeyRange:t}){return BP(r)?Promise.resolve(r.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==L_)):DP(r,t).toCollection().primaryKeys()}(Af.dependencies).then(e)}catch{return ri(new Wt.MissingAPI)}},defineClass:()=>function(e){us(this,e)},ignoreTransaction:e=>Mt.trans?$v(Mt.transless,e):e(),vip:RI,async:function(e){return function(){try{var r=DI(e.apply(this,arguments));return r&&typeof r.then=="function"?r:Et.resolve(r)}catch(t){return ri(t)}}},spawn:function(e,r,t){try{var n=DI(e.apply(t,r||[]));return n&&typeof n.then=="function"?n:Et.resolve(n)}catch(i){return ri(i)}},currentTransaction:{get:()=>Mt.trans||null},waitFor:function(e,r){const t=Et.resolve(typeof e=="function"?Af.ignoreTransaction(e):e).timeout(r||6e4);return Mt.trans?Mt.trans.waitFor(t):t},Promise:Et,debug:{get:()=>$l,set:e=>{Yq(e,e==="dexie"?()=>!0:uK)}},derive:Ep,extend:us,props:Kp,override:Uq,Events:fy,on:Hc,liveQuery:g1e,extendObservabilitySet:mK,getByKeyPath:ru,setByKeyPath:Ta,delByKeyPath:function(e,r){typeof r=="string"?Ta(e,r,void 0):"length"in r&&[].map.call(r,function(t){Ta(e,t,void 0)})},shallowClone:Kq,deepClone:Nm,getObjectDiff:MP,cmp:as,asap:Wq,minKey:kI,addons:[],connections:cy,errnames:OP,dependencies:MI,semVer:JB,version:JB.split(".").map(e=>parseInt(e)).reduce((e,r,t)=>e+r/Math.pow(10,2*t))}),Af.maxKey=Wy(Af.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Hc(Uy,e=>{if(!Ql){let r;M_?(r=document.createEvent("CustomEvent"),r.initCustomEvent($c,!0,!0,e)):r=new CustomEvent($c,{detail:e}),Ql=!0,dispatchEvent(r),Ql=!1}}),addEventListener($c,({detail:e})=>{Ql||nw(e)}));let Ql=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel($c);typeof e.unref=="function"&&e.unref(),Hc(Uy,r=>{Ql||e.postMessage(r)}),e.onmessage=r=>{r.data&&nw(r.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Hc(Uy,r=>{try{Ql||(typeof localStorage<"u"&&localStorage.setItem($c,JSON.stringify({trig:Math.random(),changedParts:r})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:$c,changedParts:r})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",r=>{if(r.key===$c){const t=JSON.parse(r.newValue);t&&nw(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:r}){r&&r.type===$c&&nw(r.changedParts)})}Et.rejectionMapper=function(e,r){if(!e||e instanceof Sp||e instanceof TypeError||e instanceof SyntaxError||!e.name||!GB[e.name])return e;var t=new GB[e.name](r||e.message,e);return"stack"in e&&tu(t,"stack",{get:function(){return this.inner.stack}}),t},Yq($l,uK);class y1e extends nu{constructor(){super("iris");ce(this,"events");this.version(2).stores({events:"id, pubkey, kind, created_at"})}}const ua=new y1e,ll={db:ua,subscribedEventIds:new Set,subscribedAuthors:new Set,seenFilters:new Set,saveQueue:[],clear(){return ua.delete()},save:wn.throttle(e=>{const r=e.saveQueue;e.saveQueue=[],ua.events.bulkAdd(r).catch(()=>{})},500),saveEvent(e){this.saveQueue.push(e),this.save(this)},init(){const e=de.getPubKey();ua.events.where({pubkey:e}).each(r=>{Me.handle(r,!1,!1)}).then(()=>ua.events.where({kind:3}).each(r=>{Me.handle(r,!1,!1)})).then(()=>ua.events.where({kind:0}).each(r=>{Me.handle(r,!1,!1)})).then(()=>ua.events.where({kind:4}).each(r=>{Me.handle(r,!1,!1)})).then(()=>ua.events.orderBy("created_at").reverse().filter(r=>r.kind===1).limit(5e3).each(r=>{Me.handle(r,!1,!1)}))},subscribeToAuthors:wn.throttle(e=>{const r=Array.from(ll.subscribedAuthors.values());ll.subscribedAuthors.clear(),ua.events.where("pubkey").anyOf(r).limit(e||1e3).each(t=>{Me.handle(t,!1,!1)})},1e3),subscribeToEventIds:wn.throttle(()=>{const e=Array.from(ll.subscribedEventIds.values());ll.subscribedEventIds.clear(),ua.events.where("id").anyOf(e).each(r=>{Me.handle(r,!1,!1)})},1e3),subscribe(e){var t,n;if(!e||e["#e"]||e["#p"])return;let r=ua.events;if((t=e.ids)!=null&&t.length){e.ids.forEach(i=>{this.subscribedEventIds.add(i)}),this.subscribeToEventIds();return}else if((n=e.authors)!=null&&n.length){e.authors.forEach(i=>{this.subscribedAuthors.add(i)}),this.subscribeToAuthors();return}else{const i=JSON.stringify(e);if(this.seenFilters.has(i))return;this.seenFilters.add(i),e.kinds&&(r=r.where?r.where("kind").anyOf(e.kinds):r.and(s=>{var o;return(o=e.kinds)==null?void 0:o.includes(s.kind)})),e.limit&&(r=r.limit(e.limit))}r.each(i=>{Me.handle(i,!1,!1)})}};let Bg={};const zE=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi"],o6=["wss://relay.nostr.band"],on={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:zE,init(){this.relays=new Map(zE.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(o6.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(r=>r.enabled).map(r=>r.url)},getSubscriptionIdForName(e){return hr.arrayToHex(T_(e)).slice(0,8)},getUrlsFromFollowEvent(e){const r=new Map;if(e.content)try{const t=JSON.parse(e.content);for(const n in t)try{const i=new URL(n).toString().replace(/\/$/,"");r.set(i,t[n])}catch{console.log("invalid relay url",n,e)}}catch{console.log("failed to parse relay urls",e)}return r},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return Me.db.find({kind:3}).forEach(t=>{if(t.content)try{const n=JSON.parse(t.content);for(const i in n)try{const s=new URL(i).toString().replace(/\/$/,""),o=e.get(s)||0;e.set(s,o+1)}catch{console.log("invalid relay url",i,t)}}catch{console.log("failed to parse relay urls",t)}}),Array.from(e.entries()).filter(([t])=>!this.relays.has(t)).sort((t,n)=>n[1]-t[1]).map(t=>({url:t[0],users:t[1]}))},getConnectedRelayCount:function(){var r;let e=0;for(const t of this.relays.keys())((r=Bt.relayPool.relayByUrl.get(t))==null?void 0:r.status)===1&&e++;return e},getUserRelays(e){let r=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const t=Me.db.findOne({kind:3,pubkey:e});return t&&(r=this.getUrlsFromFollowEvent(t)),Array.from(r.entries())},manage:function(){Ne.get("relays").put({}),Ne.get("relays").on(e=>{if(e){Bg=e;for(const r of this.relays.keys())if(Bg[r]===null)this.remove(r);else if(Bg[r]&&Bg[r].enabled===!1){const t=this.relays.get(r);t&&(t.enabled=!1,this.relays.set(r,t),Bt.relayPool.removeRelay(r))}for(const[r,t]of Object.entries(Bg))if(t)this.relays.has(r)||(this.relays.set(r,{url:r,enabled:!!t.enabled}),t.enabled&&Bt.relayPool.addOrGetRelay(r));else{this.relays.has(r)&&this.remove(r);continue}}})},add(e){if(this.relays.has(e))return;const r={enabled:!0,url:e};this.relays.set(e,r),Bt.relayPool.addOrGetRelay(e)},remove(e){try{Bt.relayPool.removeRelay(e)}catch(r){console.log("error closing relay",r)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),Bt.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),Bt.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const r of zE)this.add(r);this.saveToContacts();for(const r of o6)this.relays.has(r)||this.add(r);const e={};for(const[r,t]of this.relays.entries())e[r]={enabled:t.enabled,url:r};Ne.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const r=Me.db.findOne({kind:3,pubkey:de.getPubKey()}),n={kind:3,content:JSON.stringify(e),tags:(r==null?void 0:r.tags)||[]};Me.publish(n)},updateLastSeen:wn.throttle(e=>{const r=Math.floor(Date.now()/1e3);Ne.get("relays").get(e).get("lastSeen").put(r)},5*1e3,{leading:!0}),groupFilter(e){var r;return e.authors&&((r=e.kinds)==null?void 0:r.length)===1&&e.kinds[0]===0?(e.authors.forEach(t=>{this.subscribedProfiles.add(t)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(Bt.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(t=>{this.subscribedEventTags.add(t)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&on.init();const{authenticate:m1e}=nW;let a6=0,s$={logSubscriptions:!1,indexed03:!0};const Oc=new S0e(on.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>Me.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0});Oc.onnotice((e,r)=>{console.log("notice",r," from relay ",e)});const b1e=(e,r)=>new URL(e).host===new URL(r).host;Oc.onauth(async(e,r)=>{if(on.enabledRelays().some(t=>b1e(t,e.url)))try{await m1e({relay:e,challenge:r,sign:Me.sign})}catch(t){console.log("error: authenticate to relay:",t),Oc.removeRelay(e.url),on.disable(e.url)}});Ne.get("dev").on(e=>{s$=e,Oc.logSubscriptions=s$.logSubscriptions});let bK=0;Ne.get("lastOpened").once(e=>{bK=e,Ne.get("lastOpened").put(Math.floor(Date.now()/1e3))});let l6=Date.now();const wK=()=>{Date.now()-l6>60*1e3*1&&(l6=Date.now(),Oc.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&wK()});document.addEventListener("online",()=>{wK()});const w1e={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:Oc,log:wn.throttle((...e)=>{console.log(...e)},1e3),subscribe:function(e,r,t=!1,n=!0){let i;if(r&&(i=a6++,this.subscriptions.set(++a6,{filter:e,callback:r})),this.log("subscriptions",this.subscriptions.size,"subscribedEventIds",this.subscribedEventIds.size,"subscribedAuthors",this.subscribedAuthors.size),e.authors&&e.authors.forEach(o=>{this.subscribedAuthors.add(o)}),r&&Me.find(e,r),e.ids){if(e.ids=e.ids.filter(o=>!Me.seen.has(o)),!e.ids.length)return()=>{};e.ids.forEach(o=>{this.subscribedEventIds.add(o)})}s$.indexedDbLoad!==!1&&ll.subscribe(e);const s=this.subscribeRelayPool(e,t,n);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){const r=Array.from(on.enabledRelays());Oc.publish(e,r)},handle(e){var r;for(const t of this.subscriptions.values())t.filter&&K3(t.filter,e)&&((r=t.callback)==null||r.call(t,e))},subscribeRelayPool(e,r,t){var s,o;let n;e.keywords?n=Array.from(on.searchRelays.keys()):(t||((s=e.authors)==null?void 0:s.length)!==1)&&(n=on.enabledRelays()),s$.indexed03!==!1&&((o=e.kinds)!=null&&o.every(a=>a===0||a===3))&&(n=["wss://us.rbr.bio","wss://eu.rbr.bio"]),r&&(e.since=bK);const i=on.enabledRelays();return Oc.subscribe([e],n,(a,l,u)=>{setTimeout(()=>{Me.handle(a),u&&Me.handleEventMetadata({url:u,event:a})},0)},t?100:0,void 0,{defaultRelays:i})}},Bt=w1e,Po=class Po{static id(r){if(r.startsWith("npub")&&(r=de.toNostrHexAddress(r)||"",!r))throw new Error("addFollower: invalid pubKey "+r);const t=Po.pubKeyToUserId.get(r);if(t)return t;const n=Po.currentUserId++;return Po.pubKeyToUserId.set(r,n),Po.UserIdToPubKey.set(n,r),n}static pub(r){const t=Po.UserIdToPubKey.get(r);if(!t)throw new Error("pub: invalid id "+r);return t}static bech32(r){return de.toNostrBech32Address(Po.pub(r),"npub")||""}static has(r){return Po.pubKeyToUserId.has(r)}};ce(Po,"pubKeyToUserId",new Map),ce(Po,"UserIdToPubKey",new Map),ce(Po,"currentUserId",0);let Vp=Po;const ts=Vp.pub,Gp=Vp.bech32,vt=Vp.id;function yu(e){return Array.isArray?Array.isArray(e):xK(e)==="[object Array]"}const $1e=1/0;function _1e(e){if(typeof e=="string")return e;let r=e+"";return r=="0"&&1/e==-$1e?"-0":r}function x1e(e){return e==null?"":_1e(e)}function ul(e){return typeof e=="string"}function $K(e){return typeof e=="number"}function E1e(e){return e===!0||e===!1||S1e(e)&&xK(e)=="[object Boolean]"}function _K(e){return typeof e=="object"}function S1e(e){return _K(e)&&e!==null}function Js(e){return e!=null}function HE(e){return!e.trim().length}function xK(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const k1e="Incorrect 'index' type",T1e=e=>`Invalid value for key ${e}`,I1e=e=>`Pattern length exceeds max of ${e}.`,A1e=e=>`Missing ${e} property in key`,O1e=e=>`Property 'weight' in key '${e}' must be a positive integer`,u6=Object.prototype.hasOwnProperty;class C1e{constructor(r){this._keys=[],this._keyMap={};let t=0;r.forEach(n=>{let i=EK(n);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(r){return this._keyMap[r]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function EK(e){let r=null,t=null,n=null,i=1,s=null;if(ul(e)||yu(e))n=e,r=c6(e),t=LI(e);else{if(!u6.call(e,"name"))throw new Error(A1e("name"));const o=e.name;if(n=o,u6.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(O1e(o));r=c6(o),t=LI(o),s=e.getFn}return{path:r,id:t,weight:i,src:n,getFn:s}}function c6(e){return yu(e)?e:e.split(".")}function LI(e){return yu(e)?e.join("."):e}function P1e(e,r){let t=[],n=!1;const i=(s,o,a)=>{if(Js(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Js(u))return;if(a===o.length-1&&(ul(u)||$K(u)||E1e(u)))t.push(x1e(u));else if(yu(u)){n=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,ul(r)?r.split("."):r,0),n?t:t[0]}const N1e={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},R1e={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,r)=>e.score===r.score?e.idx<r.idx?-1:1:e.score<r.score?-1:1},D1e={location:0,threshold:.6,distance:100},B1e={useExtendedSearch:!1,getFn:P1e,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Kt={...R1e,...N1e,...D1e,...B1e};const M1e=/[^ ]+/g;function L1e(e=1,r=3){const t=new Map,n=Math.pow(10,r);return{get(i){const s=i.match(M1e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class FP{constructor({getFn:r=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){this.norm=L1e(t,3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}setSources(r=[]){this.docs=r}setIndexRecords(r=[]){this.records=r}setKeys(r=[]){this.keys=r,this._keysMap={},r.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ul(this.docs[0])?this.docs.forEach((r,t)=>{this._addString(r,t)}):this.docs.forEach((r,t)=>{this._addObject(r,t)}),this.norm.clear())}add(r){const t=this.size();ul(r)?this._addString(r,t):this._addObject(r,t)}removeAt(r){this.records.splice(r,1);for(let t=r,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(r,t){return r[this._keysMap[t]]}size(){return this.records.length}_addString(r,t){if(!Js(r)||HE(r))return;let n={v:r,i:t,n:this.norm.get(r)};this.records.push(n)}_addObject(r,t){let n={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(r):this.getFn(r,i.path);if(Js(o)){if(yu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Js(f))if(ul(f)&&!HE(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else yu(f)&&f.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}n.$[s]=a}else if(ul(o)&&!HE(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function SK(e,r,{getFn:t=Kt.getFn,fieldNormWeight:n=Kt.fieldNormWeight}={}){const i=new FP({getFn:t,fieldNormWeight:n});return i.setKeys(e.map(EK)),i.setSources(r),i.create(),i}function F1e(e,{getFn:r=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new FP({getFn:r,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(i),s}function X0(e,{errors:r=0,currentLocation:t=0,expectedLocation:n=0,distance:i=Kt.distance,ignoreLocation:s=Kt.ignoreLocation}={}){const o=r/e.length;if(s)return o;const a=Math.abs(n-t);return i?o+a/i:a?1:o}function j1e(e=[],r=Kt.minMatchCharLength){let t=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=r&&t.push([n,i]),n=-1)}return e[s-1]&&s-n>=r&&t.push([n,s-1]),t}const Hf=32;function z1e(e,r,t,{location:n=Kt.location,distance:i=Kt.distance,threshold:s=Kt.threshold,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,includeMatches:l=Kt.includeMatches,ignoreLocation:u=Kt.ignoreLocation}={}){if(r.length>Hf)throw new Error(I1e(Hf));const f=r.length,c=e.length,d=Math.max(0,Math.min(n,c));let y=s,w=d;const b=a>1||l,T=b?Array(c):[];let _;for(;(_=e.indexOf(r,w))>-1;){let g=X0(r,{currentLocation:_,expectedLocation:d,distance:i,ignoreLocation:u});if(y=Math.min(g,y),w=_+f,b){let M=0;for(;M<f;)T[_+M]=1,M+=1}}w=-1;let A=[],x=1,I=f+c;const O=1<<f-1;for(let g=0;g<f;g+=1){let M=0,B=I;for(;M<B;)X0(r,{errors:g,currentLocation:d+B,expectedLocation:d,distance:i,ignoreLocation:u})<=y?M=B:I=B,B=Math.floor((I-M)/2+M);I=B;let z=Math.max(1,d-B+1),V=o?c:Math.min(d+B,c)+f,ne=Array(V+2);ne[V+1]=(1<<g)-1;for(let J=V;J>=z;J-=1){let F=J-1,Z=t[e.charAt(F)];if(b&&(T[F]=+!!Z),ne[J]=(ne[J+1]<<1|1)&Z,g&&(ne[J]|=(A[J+1]|A[J])<<1|1|A[J+1]),ne[J]&O&&(x=X0(r,{errors:g,currentLocation:F,expectedLocation:d,distance:i,ignoreLocation:u}),x<=y)){if(y=x,w=F,w<=d)break;z=Math.max(1,2*d-w)}}if(X0(r,{errors:g+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>y)break;A=ne}const C={isMatch:w>=0,score:Math.max(.001,x)};if(b){const g=j1e(T,a);g.length?l&&(C.indices=g):C.isMatch=!1}return C}function H1e(e){let r={};for(let t=0,n=e.length;t<n;t+=1){const i=e.charAt(t);r[i]=(r[i]||0)|1<<n-t-1}return r}class kK{constructor(r,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:u=Kt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?r:r.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(d,y)=>{this.chunks.push({pattern:d,alphabet:H1e(d),startIndex:y})},c=this.pattern.length;if(c>Hf){let d=0;const y=c%Hf,w=c-y;for(;d<w;)f(this.pattern.substr(d,Hf),d),d+=Hf;if(y){const b=c-Hf;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(r){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(r=r.toLowerCase()),this.pattern===r){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,r.length-1]]),w}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],c=0,d=!1;this.chunks.forEach(({pattern:w,alphabet:b,startIndex:T})=>{const{isMatch:_,score:A,indices:x}=z1e(r,w,b,{location:i+T,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});_&&(d=!0),c+=A,_&&x&&(f=[...f,...x])});let y={isMatch:d,score:d?c/this.chunks.length:1};return d&&n&&(y.indices=f),y}}class Jc{constructor(r){this.pattern=r}static isMultiMatch(r){return f6(r,this.multiRegex)}static isSingleMatch(r){return f6(r,this.singleRegex)}search(){}}function f6(e,r){const t=e.match(r);return t?t[1]:null}class U1e extends Jc{constructor(r){super(r)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(r){const t=r===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class W1e extends Jc{constructor(r){super(r)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(r){const n=r.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,r.length-1]}}}class q1e extends Jc{constructor(r){super(r)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(r){const t=r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class K1e extends Jc{constructor(r){super(r)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(r){const t=!r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class V1e extends Jc{constructor(r){super(r)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(r){const t=r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[r.length-this.pattern.length,r.length-1]}}}class G1e extends Jc{constructor(r){super(r)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(r){const t=!r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class TK extends Jc{constructor(r,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:u=Kt.ignoreLocation}={}){super(r),this._bitapSearch=new kK(r,{location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(r){return this._bitapSearch.searchIn(r)}}class IK extends Jc{constructor(r){super(r)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(r){let t=0,n;const i=[],s=this.pattern.length;for(;(n=r.indexOf(this.pattern,t))>-1;)t=n+s,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const FI=[U1e,IK,q1e,K1e,G1e,V1e,W1e,TK],h6=FI.length,Y1e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Z1e="|";function X1e(e,r={}){return e.split(Z1e).map(t=>{let n=t.trim().split(Y1e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<h6;){const f=FI[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,r)),l=!0)}if(!l)for(u=-1;++u<h6;){const f=FI[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,r));break}}}return i})}const J1e=new Set([TK.type,IK.type]);class Q1e{constructor(r,{isCaseSensitive:t=Kt.isCaseSensitive,includeMatches:n=Kt.includeMatches,minMatchCharLength:i=Kt.minMatchCharLength,ignoreLocation:s=Kt.ignoreLocation,findAllMatches:o=Kt.findAllMatches,location:a=Kt.location,threshold:l=Kt.threshold,distance:u=Kt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?r:r.toLowerCase(),this.query=X1e(this.pattern,this.options)}static condition(r,t){return t.useExtendedSearch}searchIn(r){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;r=i?r:r.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const f=t[l];o.length=0,s=0;for(let c=0,d=f.length;c<d;c+=1){const y=f[c],{isMatch:w,indices:b,score:T}=y.search(r);if(w){if(s+=1,a+=T,n){const _=y.constructor.type;J1e.has(_)?o=[...o,...b]:o.push(b)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return n&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const jI=[];function ewe(...e){jI.push(...e)}function zI(e,r){for(let t=0,n=jI.length;t<n;t+=1){let i=jI[t];if(i.condition(e,r))return new i(e,r)}return new kK(e,r)}const o$={AND:"$and",OR:"$or"},HI={PATH:"$path",PATTERN:"$val"},UI=e=>!!(e[o$.AND]||e[o$.OR]),twe=e=>!!e[HI.PATH],rwe=e=>!yu(e)&&_K(e)&&!UI(e),d6=e=>({[o$.AND]:Object.keys(e).map(r=>({[r]:e[r]}))});function AK(e,r,{auto:t=!0}={}){const n=i=>{let s=Object.keys(i);const o=twe(i);if(!o&&s.length>1&&!UI(i))return n(d6(i));if(rwe(i)){const l=o?i[HI.PATH]:s[0],u=o?i[HI.PATTERN]:i[l];if(!ul(u))throw new Error(T1e(l));const f={keyId:LI(l),pattern:u};return t&&(f.searcher=zI(u,r)),f}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];yu(u)&&u.forEach(f=>{a.children.push(n(f))})}),a};return UI(e)||(e=d6(e)),n(e)}function nwe(e,{ignoreFieldNorm:r=Kt.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(r?1:s))}),t.score=n})}function iwe(e,r){const t=e.matches;r.matches=[],Js(t)&&t.forEach(n=>{if(!Js(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),r.matches.push(o)})}function swe(e,r){r.score=e.score}function owe(e,r,{includeMatches:t=Kt.includeMatches,includeScore:n=Kt.includeScore}={}){const i=[];return t&&i.push(iwe),n&&i.push(swe),e.map(s=>{const{idx:o}=s,a={item:r[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class _v{constructor(r,t={},n){this.options={...Kt,...t},this.options.useExtendedSearch,this._keyStore=new C1e(this.options.keys),this.setCollection(r,n)}setCollection(r,t){if(this._docs=r,t&&!(t instanceof FP))throw new Error(k1e);this._myIndex=t||SK(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(r){Js(r)&&(this._docs.push(r),this._myIndex.add(r))}remove(r=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];r(s,n)&&(this.removeAt(n),n-=1,i-=1,t.push(s))}return t}removeAt(r){this._docs.splice(r,1),this._myIndex.removeAt(r)}getIndex(){return this._myIndex}search(r,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=ul(r)?ul(this._docs[0])?this._searchStringList(r):this._searchObjectList(r):this._searchLogical(r);return nwe(l,{ignoreFieldNorm:a}),s&&l.sort(o),$K(t)&&t>-1&&(l=l.slice(0,t)),owe(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(r){const t=zI(r,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Js(s))return;const{isMatch:l,score:u,indices:f}=t.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:f}]})}),i}_searchLogical(r){const t=AK(r,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,y=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return y&&y.length?[{idx:u,item:l,matches:y}]:[]}const f=[];for(let c=0,d=a.children.length;c<d;c+=1){const y=a.children[c],w=n(y,l,u);if(w.length)f.push(...w);else if(a.operator===o$.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Js(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:f})=>{s[l].matches.push(...f)}))}}),o}_searchObjectList(r){const t=zI(r,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Js(o))return;let l=[];n.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:o[f],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:r,value:t,searcher:n}){if(!Js(t))return[];let i=[];if(yu(t))t.forEach(({v:s,i:o,n:a})=>{if(!Js(s))return;const{isMatch:l,score:u,indices:f}=n.searchIn(s);l&&i.push({score:u,key:r,value:s,idx:o,norm:a,indices:f})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&i.push({score:l,key:r,value:s,norm:o,indices:u})}return i}}_v.version="6.6.2";_v.createIndex=SK;_v.parseIndex=F1e;_v.config=Kt;_v.parseQuery=AK;ewe(Q1e);const awe={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},p6=rp.throttle(()=>{Ne.get("searchIndexUpdated").put(!0)},2e3),OK={index:new _v([],awe),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),p6())},remove(e){this.keys.delete(e),this.index.remove(r=>r.key===e),p6()},search(e){return this.index.search(e)}};var CK={exports:{}},UE={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var v6;function lwe(){return v6||(v6=1,function(e){(function(){function r(o,a){for(var l=2;l<arguments.length;l++)for(var u=0;u<arguments[l].length;u++)o[a++]=arguments[l].charAt(u)}function t(o){return String.fromCharCode(o>>8&255,o&255)}function n(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function i(o){return String.fromCharCode(o&255,o>>8&255)}var s=function(o,a,l){this.width=o,this.height=a,this.depth=l,this.pix_size=a*(o+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*l+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+l+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var u=new Array,f=0;f<this.buffer_size;f++)this.buffer[f]="\0";r(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(o),n(a),"\b"),r(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var c=8+112<<8|192;c+=31-c%31,r(this.buffer,this.idat_offs+8,t(c));for(var f=0;(f<<16)-1<this.pix_size;f++){var d,y;f+65535<this.pix_size?(d=65535,y="\0"):(d=this.pix_size-(f<<16)-f,y=""),r(this.buffer,this.idat_offs+8+2+(f<<16)+(f<<2),y,i(d),i(~d))}for(var f=0;f<256;f++){for(var w=f,b=0;b<8;b++)w&1?w=-306674912^w>>1&2147483647:w=w>>1&2147483647;u[f]=w}this.index=function(T,_){var A=_*(this.width+1)+T+1,x=this.idat_offs+8+2+5*Math.floor(A/65535+1)+A;return x},this.color=function(T,_,A,x){x=x>=0?x:255;var I=((x<<8|T)<<8|_)<<8|A;if(typeof this.palette[I]>"u"){if(this.pindex==this.depth)return"\0";var O=this.plte_offs+8+3*this.pindex;this.buffer[O+0]=String.fromCharCode(T),this.buffer[O+1]=String.fromCharCode(_),this.buffer[O+2]=String.fromCharCode(A),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(x),this.palette[I]=String.fromCharCode(this.pindex++)}return this.palette[I]},this.getBase64=function(){var T=this.getDump(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A,x,I,O,C,g,M,B=T.length,z=0,V="";do A=T.charCodeAt(z),O=A>>2,x=T.charCodeAt(z+1),C=(A&3)<<4|x>>4,I=T.charCodeAt(z+2),B<z+2?g=64:g=(x&15)<<2|I>>6,B<z+3?M=64:M=I&63,V+=_.charAt(O)+_.charAt(C)+_.charAt(g)+_.charAt(M);while((z+=3)<B);return V},this.getDump=function(){for(var T=65521,_=5552,A=1,x=0,I=_,O=0;O<this.height;O++)for(var C=-1;C<this.width;C++)A+=this.buffer[this.index(C,O)].charCodeAt(0),x+=A,(I-=1)==0&&(A%=T,x%=T,I=_);A%=T,x%=T,r(this.buffer,this.idat_offs+this.idat_size-8,n(x<<16|A));function g(M,B,z){for(var V=-1,ne=4;ne<z-4;ne+=1)V=u[(V^M[B+ne].charCodeAt(0))&255]^V>>8&16777215;r(M,B+z-4,n(V^-1))}return g(this.buffer,this.ihdr_offs,this.ihdr_size),g(this.buffer,this.plte_offs,this.plte_size),g(this.buffer,this.trns_offs,this.trns_size),g(this.buffer,this.idat_offs,this.idat_size),g(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(UE)),UE.exports}(function(e){(function(){var r;r=lwe();var t=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var o=parseInt(this.hash.substr(-7),16)/268435455,a=this.options.saturation||this.defaults.saturation,l=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(o,a,l)};t.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new n(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,o=Math.floor(s*this.margin),a=Math.floor((s-o*2)/5),l=Math.floor((s-a*5)/2),u=i.color.apply(i,this.background),f=i.color.apply(i,this.foreground),c,d;for(c=0;c<15;c++)d=parseInt(this.hash.charAt(c),16)%2?u:f,c<5?this.rectangle(2*a+l,c*a+l,a,a,d,i):c<10?(this.rectangle(1*a+l,(c-5)*a+l,a,a,d,i),this.rectangle(3*a+l,(c-5)*a+l,a,a,d,i)):c<15&&(this.rectangle(0*a+l,(c-10)*a+l,a,a,d,i),this.rectangle(4*a+l,(c-10)*a+l,a,a,d,i));return i},rectangle:function(i,s,o,a,l,u){if(this.isSvg())u.rectangles.push({x:i,y:s,w:o,h:a,color:l});else{var f,c;for(f=i;f<i+o;f++)for(c=s;c<s+a;c++)u.buffer[u.index(f,c)]=l}},hsl2rgb:function(i,s,o){return i*=6,s=[o+=s*=o<.5?o:1-o,o-i%1*s*2,o-=s*=2,o,o+i%1*s,o+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var n=function(i,s,o){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,o),this.rectangles=[]};n.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,o,a){var l=[i,s,o].map(Math.round);return l.push(a>=0&&a<=255?a/255:1),"rgba("+l.join(",")+")"},getDump:function(){var i,s,o,a=this.foreground,l=this.background,u=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+l+";'><g style='fill:"+a+"; stroke:"+a+"; stroke-width:"+u+";'>",i=0;i<this.rectangles.length;i++)o=this.rectangles[i],o.color!=l&&(s+="<rect  x='"+o.x+"' y='"+o.y+"' width='"+o.w+"' height='"+o.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=t})()})(CK);var uwe=CK.exports;const cwe=io(uwe);let J0={};async function g6(e,r){return J0[e]||(J0[e]=r().finally(()=>{delete J0[e]})),J0[e]}const PK="DWoTR";class WI extends nu{constructor(){super(PK);ce(this,"edges");ce(this,"profiles");this.version(2).stores({edges:"key, outKey, inKey",profiles:"key"})}}let Zg=new WI;function fwe(){return Zg.transaction("rw",Zg.edges,Zg.profiles,async()=>{await Promise.all(Zg.tables.map(e=>e.clear()))})}var Vl,mm;class hwe{constructor(){Yr(this,Vl,null);Yr(this,mm,!1)}get profiles(){return this.db.profiles}get edges(){return this.db.edges}get db(){if(!Ln(this,Vl))try{ko(this,Vl,new WI),Ln(this,Vl).open().catch(r=>{console.log("Error opening database",r),this.recreateDB()})}catch(r){console.log("Error opening database",r),this.recreateDB()}return Ln(this,Vl)}recreateDB(){if(Ln(this,mm))return;ko(this,mm,!0),this.deleteDB().then(()=>{ko(this,Vl,new WI)}),(t=>{const n=Date.now();let i;do i=Date.now();while(i-n<t||!Ln(this,Vl))})(5e3)}async deleteDB(){await nu.delete(PK),console.log("Database deleted")}}Vl=new WeakMap,mm=new WeakMap;const Q0=new hwe;var Pp,Np;class dwe{constructor(){ce(this,"loaded",!1);Yr(this,Pp,[]);Yr(this,Np,!1);ce(this,"saveBulk",wn.throttle(()=>{if(Ln(this,Np)){this.saveBulk();return}ko(this,Np,!0);const r=Ln(this,Pp);ko(this,Pp,[]),Q0.profiles.bulkPut(r).finally(()=>{ko(this,Np,!1)})},500))}async init(){this.loaded=!0}async fetchProfile(r){let t=`fetchProfile:${r}`;console.time(t);let n=`https://api.iris.to/profile/${r}`,i=await g6(n,async()=>fetch(n));if(console.timeEnd(t),i&&i.status===200)return i.json()}getProfile(r,t,n=!1){const i=de.toNostrHexAddress(r),s=de.toNostrBech32Address(r,"npub"),o=vt(i),a=()=>{t==null||t(tt.profiles.get(o),i)};let l=tt.profiles.get(o);return l&&!l.isDefault?(a(),n&&l.nip05&&!l.nip05valid&&!l.nip05valid&&l.nip05&&de.verifyNip05Address(l.nip05,r).then(u=>{console.log("NIP05 address is valid?",u,l.nip05,r),l.nip05valid=u,tt.profiles.set(o,l),a()})):this.loadProfile(i).then(u=>{if(u)this.isProfileNewer(u)&&this.addProfileToMemory(u),a();else{jP.fetchProfile(s).then(f=>{f&&(this.isProfileNewer(f)&&this.addProfileEvent(f),a())});return}}),l&&l.isDefault&&a(),l||(l=this.createDefaultProfile(s),tt.profiles.set(o,l),a()),Bt.subscribe({kinds:[0],authors:[s]},a,!1)}async getProfiles(r,t){if(!r||r.length===0)return()=>{};let n=[],i=[],s=[];for(const u of r){if(!u)continue;const f=de.toNostrHexAddress(u),c=tt.profiles.get(vt(f));c?n.push(c):i.push(f),s.push(de.toNostrBech32Address(u,"npub"))}let o=new Set(i);const a=await this.loadProfiles(o);if(a&&a.length>0){n=n.concat(a);for(const u of a)u&&o.delete(u.key)}if(o.size>0&&o.size<=100){const u=await Promise.all(Array.from(o).map(f=>this.fetchProfile(de.toNostrBech32Address(f,"npub"))));if(u&&u.length>0)for(const f of u)f&&(Me.handle(f),n.push(f),o.delete(f.key))}for(const u of o){let f=this.createDefaultProfile(u);tt.profiles.set(vt(f.key),f),n.push(f)}for(const u of n)!u||!this.isProfileNewer(u)||this.addProfileToMemory(u);n.length>0&&(t==null||t(n));const l=u=>{const f=vt(u.pubkey);let c=tt.profiles.get(f);t==null||t([c])};return Bt.subscribe({kinds:[0],authors:s},l,!1)}async loadProfiles(r){return await Q0.profiles.where("key").anyOf(Array.from(r)).toArray()}async loadProfile(r){return await g6(`loadProfile${r}`,async()=>Q0.profiles.get({key:r}))}saveProfile(r){Ln(this,Pp).push(r),this.saveBulk()}async loadAllProfiles(){console.time("Loading profiles from DWoTRDB");const r=await Q0.profiles.toArray();if(r){for(const t of r)this.addProfileToMemory(t);console.timeEnd("Loading profiles from DWoTRDB"),console.log("Loaded profiles from DWoTRDB - "+r.length+" profiles")}}sanitizeProfile(r,t){var l,u;r||(r={name:"",displayName:"",default:!1});let n=((l=r.name)==null?void 0:l.trim().slice(0,100))||"",i=!(r.name||r.display_name),s=r.picture;n||(n=yW(de.toNostrBech32Address(t,"npub")||t));let o=((u=r.display_name)==null?void 0:u.trim().slice(0,100))||n;return{...r,key:t,name:n,displayName:o,picture:s,isDefault:i}}createDefaultProfile(r){return this.sanitizeProfile({},r)}getDefaultProfile(r){if(!r)return;const t=tt.profiles.get(r);return t||this.createDefaultProfile(Gp(r))}quickProfile(r){const t=vt(r),n=tt.profiles.get(t);return n||this.createDefaultProfile(Gp(t))}isProfileNewer(r){const t=tt.profiles.get(vt(r.key));return!(t&&t.created_at>r.created_at)}addProfileToMemory(r){if(r)return tt.profiles.set(vt(r.key),r),OK.add({key:r.key,name:r.name,display_name:r.display_name,followers:tt.followersByUser.get(vt(r.key))??new Set}),r}addProfileEvent(r){try{const t=JSON.parse(r.content);t.created_at=r.created_at;let n=this.sanitizeProfile(t,r.pubkey);return this.saveProfile(n),this.addProfileToMemory(n)}catch(t){r.id&&ll.db.events.delete(r.id),console.error(t);return}}createImageUrl(r,t=30,n=30){return`data:image/svg+xml;base64,${new cwe(r,{width:t,height:n,format:"svg"}).toString()}`}ensurePicture(r){return r.picture||(r.picture=this.createImageUrl(r.key)),r.picture}}Pp=new WeakMap,Np=new WeakMap;const jP=new dwe;jP.init();const Wi=jP,tt={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,isFollowing:function(e,r){var i;const t=vt(r),n=vt(e);return!!((i=this.followedByUser.get(n))!=null&&i.has(t))},isBlocked:function(e){const r=vt(e);return this.blockedUsers.has(r)},getFollowDistance:function(e){const r=vt(e),t=this.followDistanceByUser.get(r);return t===void 0?1e3:t},setFollowed:function(e,r=!0){const t=de.getPubKey(),n=vt(t);typeof e=="string"&&(e=[e]),e.forEach(o=>{o=de.toNostrHexAddress(o)||"";const a=vt(o);r&&o&&o!==t?this.addFollower(a,n):this.removeFollower(a,n)});const i=Me.db.findOne({kind:3,pubkey:t}),s={kind:3,content:(i==null?void 0:i.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(o=>["p",ts(o)])};Me.publish(s)},setBlocked:function(e,r=!0){const t=vt(e),n=vt(de.getPubKey());r?(this.blockedUsers.add(t),this.removeFollower(t,n),Me.directMessagesByUser.delete(e)):this.blockedUsers.delete(t)},addUserByFollowDistance(e,r){var t,n;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=Bt.subscribe({authors:[ts(r)],kinds:[0]},()=>i==null?void 0:i(),!0)}(t=this.usersByFollowDistance.get(e))==null||t.add(r);for(const i of this.usersByFollowDistance.keys())i>e&&((n=this.usersByFollowDistance.get(i))==null||n.delete(r))},addFollower:function(e,r){var n,i,s,o;if(typeof e!="number"||typeof r!="number")throw new Error("Invalid user id");this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(n=this.followersByUser.get(e))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set);const t=vt(de.getPubKey());if(e!==t){let a;if(r===t)a=1,this.addUserByFollowDistance(a,e),this.followDistanceByUser.set(e,a);else{const l=this.followDistanceByUser.get(e),u=this.followDistanceByUser.get(r);a=u&&u+1,(l===void 0||a<l)&&(this.followDistanceByUser.set(e,a),this.addUserByFollowDistance(a,e))}}(i=this.followedByUser.get(r))==null||i.add(e),e===t&&((s=this.followersByUser.get(e))==null?void 0:s.size)===1&&Ne.get("hasNostrFollowers").put(!0),(o=this.followedByUser.get(t))!=null&&o.has(r)&&(Bt.subscribedAuthors.has(ts(e))||setTimeout(()=>{Bt.subscribe({authors:[ts(e)]},void 0,!0)},0))},removeFollower:function(e,r){var i,s,o;if((i=this.followersByUser.get(e))==null||i.delete(r),(s=this.followedByUser.get(r))==null||s.delete(e),e===vt(de.getPubKey()))return;let t=1/0;for(const a of this.followersByUser.get(e)||[]){const l=this.followDistanceByUser.get(a);l!==void 0&&l+1<t&&(t=l+1)}t===1/0?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,t),(this.blockedUsers.has(e)||((o=this.followersByUser.get(e))==null?void 0:o.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),Bt.subscribedAuthors.delete(ts(e))),Uw.saveEvents()},followerCount:function(e){var t;const r=vt(e);return((t=this.followersByUser.get(r))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var i;let r=0;const t=vt(de.getPubKey()),n=vt(e);for(const s of this.followersByUser.get(n)??[])(i=this.followedByUser.get(t))!=null&&i.has(s)&&r++;return r},block:async function(e,r){r?this.blockedUsers.add(vt(e)):this.blockedUsers.delete(vt(e));let t=JSON.stringify(Array.from(this.blockedUsers));t=await de.encrypt(t),Me.publish({kind:16462,content:t})},flag:function(e,r){r?this.flaggedUsers.add(vt(e)):this.flaggedUsers.delete(vt(e)),Me.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.blockedUsers)n.add(ts(i));e(n)}};r();const t=de.getPubKey();return Bt.subscribe({kinds:[16462],authors:[t]},r)},getFlaggedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.flaggedUsers)n.add(ts(i));e(n)}};r();const t=de.getPubKey();return Bt.subscribe({kinds:[16463],authors:[t]},r)},getFollowedByUser:function(e,r){const t=vt(e),n=()=>{if(r){const i=new Set;for(const s of this.followedByUser.get(t)||[])i.add(ts(s));r(i)}};return this.followedByUser.has(t)&&n(),Bt.subscribe({kinds:[3],authors:[e]},n)},getFollowersByUser:function(e,r){const t=vt(e),n=()=>{if(r){const i=new Set;for(const s of this.followersByUser.get(t)||[])i.add(ts(s));r(i)}};return this.followersByUser.has(t)&&n(),Bt.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,r,t=!1){const n=vt(e),i=()=>{r==null||r(this.profiles.get(n),e)},s=this.profiles.get(n);return s?(i(),t&&s.nip05&&!s.nip05valid&&de.verifyNip05Address(s.nip05,e).then(o=>{console.log("NIP05 address is valid?",o,s.nip05,e),s.nip05valid=o,this.profiles.set(n,s),i()})):Wi.fetchProfile(e).then(o=>{o&&(Me.handle(o),i())}),Bt.subscribe({kinds:[0],authors:[e]},i,!1)},setMetadata(e){const r={kind:0,content:JSON.stringify(e)};Me.publish(r)}},pwe="modulepreload",vwe=function(e){return"/"+e},y6={},$r=function(r,t,n){if(!t||t.length===0)return r();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=vwe(s),s in y6)return;y6[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const c=i[f];if(c.href===s&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":pwe,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((f,c)=>{u.addEventListener("load",f),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},NK={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who and when you're chatting with.",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},gwe=Object.freeze(Object.defineProperty({__proto__:null,default:NK},Symbol.toStringTag,{value:"Module"})),Ky={en:"English","zh-cn":"","zh-tw":"",es:"Espaol",ru:"",de:"Deutsch",fr:"Franais",it:"Italiano",ja:"",ko:"",ar:"",id:"Indonesia","pt-BR":"Portugus (Brasil)",tr:"Trke",vt:"Ting Vit",bn:"",th:"",hi:"",fa:"",ur:"",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"",sv:"Svenska",fi:"Suomi","cs-CZ":"etina",bg:"",as:"",sk:"Slovenina",lt:"Lietuvi","el-GR":""},ywe=Object.assign({"./languages/ar.mjs":()=>$r(()=>import("./ar-b05107c0.js"),[]),"./languages/as.mjs":()=>$r(()=>import("./as-825421ff.js"),[]),"./languages/bg.mjs":()=>$r(()=>import("./bg-262cfc4e.js"),[]),"./languages/bn.mjs":()=>$r(()=>import("./bn-542e2fe5.js"),[]),"./languages/cs-CZ.mjs":()=>$r(()=>import("./cs-CZ-ad8d06ab.js"),[]),"./languages/de.mjs":()=>$r(()=>import("./de-e254045b.js"),[]),"./languages/el-GR.mjs":()=>$r(()=>import("./el-GR-dd662a28.js"),[]),"./languages/en.mjs":()=>$r(()=>Promise.resolve().then(()=>gwe),void 0),"./languages/es.mjs":()=>$r(()=>import("./es-9ed73c18.js"),[]),"./languages/fa.mjs":()=>$r(()=>import("./fa-b92e5c69.js"),[]),"./languages/fi.mjs":()=>$r(()=>import("./fi-1b81d3e2.js"),[]),"./languages/fr.mjs":()=>$r(()=>import("./fr-084a88bb.js"),[]),"./languages/he.mjs":()=>$r(()=>import("./he-f8f630eb.js"),[]),"./languages/hi.mjs":()=>$r(()=>import("./hi-21492224.js"),[]),"./languages/hu.mjs":()=>$r(()=>import("./hu-272cee10.js"),[]),"./languages/id.mjs":()=>$r(()=>import("./id-879a045d.js"),[]),"./languages/it.mjs":()=>$r(()=>import("./it-570c4004.js"),[]),"./languages/ja.mjs":()=>$r(()=>import("./ja-ca2ddcd8.js"),[]),"./languages/ko.mjs":()=>$r(()=>import("./ko-20dade51.js"),[]),"./languages/lt.mjs":()=>$r(()=>import("./lt-9d42b6bf.js"),[]),"./languages/nl.mjs":()=>$r(()=>import("./nl-e18021b9.js"),[]),"./languages/pl.mjs":()=>$r(()=>import("./pl-c71aa6e1.js"),[]),"./languages/pt-BR.mjs":()=>$r(()=>import("./pt-BR-f6e074f5.js"),[]),"./languages/ru.mjs":()=>$r(()=>import("./ru-a4f155c7.js"),[]),"./languages/sk.mjs":()=>$r(()=>import("./sk-baed6548.js"),[]),"./languages/sv.mjs":()=>$r(()=>import("./sv-6a12b090.js"),[]),"./languages/th.mjs":()=>$r(()=>import("./th-77251d86.js"),[]),"./languages/tr.mjs":()=>$r(()=>import("./tr-5c13f72f.js"),[]),"./languages/ur.mjs":()=>$r(()=>import("./ur-da5400bf.js"),[]),"./languages/vt.mjs":()=>$r(()=>import("./vt-ed0b9062.js"),[]),"./languages/zh-cn.mjs":()=>$r(()=>import("./zh-cn-8db267de.js"),[]),"./languages/zh-tw.mjs":()=>$r(()=>import("./zh-tw-27ec4fa0.js"),[])});let ip=Object.keys(Ky),Wo,iw,RK;Wo=localStorage.getItem("language")||navigator.language||"en";if(ip.indexOf(Wo)===-1){const e=Wo.slice(0,2);Wo="en";for(let r=0;r<ip.length;r++)if(ip[r].slice(0,2)===e){Wo=ip[r];break}}RK=ywe[`./languages/${Wo}.mjs`]().then(e=>{console.log("loaded translation",Wo,`./languages/${Wo}.mjs`),iw=e.default,Wo!=="en"&&(iw={...NK,...iw})}).catch(e=>{console.error("failed to load translation",e)});function mwe(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function he(e,r){const n=(e&&(iw[e]||mwe(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return n.forEach(s=>{s.startsWith("<b>")?i.push(Qe("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(Qe("a",{key:i.length,...r},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}const DK=(e,r)=>{let t;const n=tt.getProfile(r,i=>{t=i.name});setTimeout(()=>{t=t||yW(de.toNostrBech32Address(r,"npub")||""),Ne.get("groups").get(BK(e)).put({name:t}),n()},1e3)},BK=e=>{const r=T_(e);return Array.from(r,t=>t.toString(16).padStart(2,"0")).join("").slice(0,12)},F_=(e,r=!0,t=null,n=void 0)=>{const i=BK(e),s=Ne.get("groups").get(i).put({key:e,inviter:t,name:n});return r&&s.then(()=>_r(`/chat/${i}`)),i},MK=(e,r=void 0)=>{if(e.indexOf("#")>-1&&(e=e.split("#")[1]),e.startsWith("nsec")){const t=de.toNostrHexAddress(e);t&&F_(t,!0,void 0,r)}},LK=(e=void 0)=>{const r=W3();return[F_(r,!0,void 0,e),r]},bwe=async e=>{const r=LK()[1],t=de.toNostrBech32Address(r,"nsec"),n=W3(),i=4,s=Math.floor(Date.now()/1e3),o=`This is an invitation to a secret chat. Use ${t} or go to https://iris.to/chat/#${t}`;let a={kind:i,created_at:s,pubkey:de.getPubKey(),tags:[["p",e]],content:o};a=await Me.sign(a);const l=await Ih.encrypt(n,e,`${o}

${JSON.stringify(a)}`),u={kind:i,created_at:s,pubkey:kh(n),tags:[["p",e]],content:l};u.id=Th(u),u.sig=ZU(u,n),Me.publish(u),Ne.get("chatInvites").get(e).put({priv:r}),DK(r,e)};function wwe(){const[e,r]=Le(""),[t,n]=Le(""),i=o=>{r(o.target.value),MK(o.target.value,t)};return v("div",{className:"flex flex-1 flex-col items-center justify-center h-full",children:[v("div",{className:"flex flex-row gap-2",children:[v("input",{type:"text",className:"input rounded-full input-bordered",placeholder:"Group name",onChange:o=>{n(o.target.value)}}),v("button",{className:"btn btn-primary",onClick:()=>LK(t),children:he("start_new_group")})]}),v("div",{className:"my-4",children:he("or")}),v("div",{className:"my-4 flex gap-2 justify-center items-center",children:v("input",{placeholder:"Paste nsec or chat link",type:"password",id:"pasteLink",className:"text-center input input-bordered rounded-full p-2",onChange:i,value:e})})]})}class $we{constructor(){ce(this,"_data",new Map)}upsert(r,t){var s;const n=this._data.get(r),i=(n==null?void 0:n.relays)||new Set;return(s=t.relays)==null||s.forEach(o=>i.add(this._normalizeURL(o))),this._data.set(r,{relays:i}),this}get(r){if(r)return this._data.get(r)}getRelays(r){var t;return r?Array.from(((t=this.get(r))==null?void 0:t.relays)||[]):[]}_normalizeURL(r){return r.trim().replace(/\/$/,"")}}const c_=class c_{constructor(r,t=!0){ce(this,"events");ce(this,"eventIdSet");ce(this,"maxSize");ce(this,"descending");ce(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=r,this.descending=t,this.subscriptions=new Map}get size(){return this.events.length}first(){var r;return(r=this.events[0])==null?void 0:r.id}has(r){return this.eventIdSet.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(r.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:r.id,created_at:r.created_at});else if(r.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:r.id,created_at:r.created_at},this.eventIdSet.add(r.id);else return!1;return this.eventIdSet.add(r.id),this.events.sort((t,n)=>this.descending?n.created_at-t.created_at:t.created_at-n.created_at),this.subscriptions.forEach(t=>t(this.eventIds)),!0}delete(r){if(!this.eventIdSet.delete(r))return!1;const n=this.events.findIndex(i=>i.id===r);return n===-1?!1:(this.events.splice(n,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(r=>r.id)}values(){return this.events.map(r=>r.id)}subscribe(r){const t=c_.subscriptionId++;return this.subscriptions.set(t,r),r(this.eventIds),()=>this.subscriptions.delete(t)}};ce(c_,"subscriptionId",0);let dy=c_;const _we=Date.now()/1e3,xwe=500,Ewe=1e3,Swe=new lge("iris"),kwe=Swe.addCollection("events",{indices:["created_at","pubkey","kind"],unique:["id"]});let Xg;Ne.get("mutedNotes").on(e=>{Xg=e});const qI={maxFollowDistance:3,minFollowersAtMaxDistance:5};let Jg=qI;Ne.get("globalFilter").on(e=>{Jg=e});let KI={};Ne.get("dev").on(e=>{KI=e});const Twe=(e,r)=>{const t=Fi.db.by("id",e),n=Fi.db.by("id",r);return t?!n||t.created_at>n.created_at?-1:t.created_at<n.created_at?1:0:1},Fi={DEFAULT_GLOBAL_FILTER:qI,getEventHash:Th,db:kwe,eventsMetaDb:new $we,seen:new Set,deletedEvents:new Set,directMessagesByUser:new eP((e,r)=>{const t=e.value.eventIds[0],n=r.value.eventIds[0];return t?n?Twe(t,n):-1:1}),latestNotificationByTargetAndKind:new Map,notifications:new dy(xwe),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,directRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new dy(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s,o;this.db.by("id",e.id)||this.insert(e);const t=this.isRepost(e),n=!t&&this.getNoteReplyingTo(e),i=de.getPubKey();if(n&&!t){this.directRepliesByMessageId.has(n)||this.directRepliesByMessageId.set(n,new Set),(s=this.directRepliesByMessageId.get(n))==null||s.add(e.id);const a=e.tags.filter(l=>l[0]==="e").map(l=>l[1]).slice(0,2);for(const l of a)e.created_at>_we||e.pubkey===i||tt.isFollowing(i,e.pubkey),this.threadRepliesByMessageId.has(l)||this.threadRepliesByMessageId.set(l,new Set),(o=this.threadRepliesByMessageId.get(l))==null||o.add(e.id)}},getRepostedEventId(e){var t,n,i;let r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:n[1];return r||(r=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],r)},getOriginalPostEventId(e){return Fi.isRepost(e)?Fi.getRepostedEventId(e):e.id},getNoteReplyingTo:function(e){if(e.kind===1)return this.getEventReplyingTo(e)},getEventReplyingTo:function(e){var n,i;const r=(n=e.tags)==null?void 0:n.filter(s=>s[0]==="e"&&s[3]!=="mention");if(r.length===1)return r[0][1];const t=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(t)return t[1];if(r.length>1)return r[1][1]},handleRepost(e){var t,n;const r=this.getRepostedEventId(e);r&&(this.repostsByMessageId.has(r)||this.repostsByMessageId.set(r,new Set),(t=this.repostsByMessageId.get(r))!=null&&t.has(e.pubkey)||((n=this.repostsByMessageId.get(r))==null||n.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var t,n,i;const r=(n=(t=e.tags)==null?void 0:t.reverse().find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.likesByMessageId.has(r)||this.likesByMessageId.set(r,new Set),(i=this.likesByMessageId.get(r))==null||i.add(e.pubkey),this.insert(e))},handleFollow(e){var n,i,s,o;const r=Fi.db.findOne({kind:3,pubkey:e.pubkey});if(r&&r.created_at>=e.created_at)return;r&&this.db.findAndRemove({kind:3,pubkey:e.pubkey}),this.insert(e);const t=de.getPubKey();if((e.pubkey===t||tt.isFollowing(t,e.pubkey))&&Uw.loaded&&Uw.saveProfilesAndFollows(),e.tags){for(const a of e.tags)if(Array.isArray(a)&&a[0]==="p"){const l=a[1];l.length===64&&/^[0-9a-f]+$/.test(l)&&tt.addFollower(vt(a[1]),vt(e.pubkey))}}if(tt.followedByUser.has(vt(e.pubkey)))for(const a of tt.followedByUser.get(vt(e.pubkey))||[])(!e.tags||!((n=e.tags)!=null&&n.find(l=>l[0]==="p"&&l[1]===ts(a))))&&tt.removeFollower(a,vt(e.pubkey));if(e.pubkey===t&&((i=e.tags)!=null&&i.length)&&(((s=tt.followedByUser.get(vt(t)))==null?void 0:s.size)||0)>10&&Ne.get("showFollowSuggestions").put(!1),e.pubkey===t&&((o=e.content)!=null&&o.length))try{const a=JSON.parse(e.content),l=Object.keys(a);if(l.length){console.log("setting relays from your contacs list",l);for(const u of on.relays.keys())l.includes(u)||on.remove(u);for(const u of l)on.add(u)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var t;if((((t=this.myBlockEvent)==null?void 0:t.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const r=de.getPubKey();if(e.pubkey===r){let n;try{n=await de.decrypt(e.content);const i=JSON.parse(n),s=new Set;for(const o of i)s.add(vt(o));tt.blockedUsers=s}catch{console.log("failed to parse your block list",n,e)}}},handleFlagList(e){var t;if((((t=this.myFlagEvent)==null?void 0:t.created_at)||0)>e.created_at)return;const r=de.getPubKey();if(e.pubkey===r)try{const n=JSON.parse(e.content);tt.flaggedUsers=new Set(n)}catch{console.log("failed to parse your flagged users list",e)}},insert(e){try{delete e.$loki,this.db.insert(e)}catch{}},handleMetadata(e){var r;if((r=e.content)!=null&&r.length)try{const t=tt.profiles.get(vt(e.pubkey));if((t==null?void 0:t.created_at)>=e.created_at)return!1;Wi.addProfileEvent(e)}catch(t){console.log("error parsing nostr profile",t,e)}},handleDelete(e){var n,i;const r=(i=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:i[1],t=de.getPubKey();if(r){const s=this.db.by("id",r);s&&[e.pubkey,t].includes(s.pubkey)&&this.db.findAndRemove({id:r})}},handleZap(e){var t,n,i;this.insert(e);const r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.zapsByNote.has(r)||this.zapsByNote.set(r,new dy(Ewe)),(i=this.zapsByNote.get(r))==null||i.add(e))},async saveDMToLocalState(e,r){const t=r.get("latest"),n=await t.once();(!n||!n.created_at||n.created_at<e.created_at)&&t.put({id:e.id,created_at:e.created_at,text:e.text})},async handleDirectMessage(e){var i,s,o,a,l,u;const r=de.getPubKey();let t,n=!1;if(e.pubkey===r)t=((s=(i=e.tags)==null?void 0:i.find(f=>f[0]==="p"))==null?void 0:s[1])||t;else if(t=e.pubkey,!((o=e.tags)==null?void 0:o.some(c=>c[0]==="p"&&c[1]===r))&&(n=((a=e.tags)==null?void 0:a.length)===1&&((l=e.tags)==null?void 0:l.some(c=>c[0]==="p"&&c[1]===e.pubkey)),!n))return;try{const f=await de.decrypt(e.content,e.pubkey);f&&(e.text=f,this.decryptedMessages.set(e.id,f));const c=JSON.parse(f.slice(f.indexOf("{")));if(Dy(c)&&Hp(c)){console.log("innerEvent",c);const d=(u=c.content.match(/nsec1[023456789acdefghjklmnpqrstuvwxyz]{6,}/gi))==null?void 0:u[0];if(d){const y=de.toNostrHexAddress(d);if(y){console.log("nsec & hexpriv"),F_(y,!1,c.pubkey),DK(y,c.pubkey),Ne.get("chatInvites").get(c.pubkey).put({priv:y});return}}}}catch{}this.insert(e),n||this.saveDMToLocalState(e,Ne.get("chats").get(t))},getEventFromText(e){try{const r=e.slice(e.indexOf("{"));console.log("maybeJson",r);const t=JSON.parse(r);if(Dy(t)&&Hp(t))return t}catch{}},subscribeGroups(){Ne.get("groups").map((e,r)=>{if(e.key){const t=kh(e.key);t&&(console.log("subscribing to group",r,t),Bt.subscribe({authors:[t],kinds:[4],"#p":[t]},async n=>{const i=await Ih.decrypt(e.key,t,n.content),s=this.getEventFromText(i);s&&s.tags.length===1&&s.tags[0][0]==="p"&&s.tags[0][1]===t&&(s.text=s.content,console.log("saving innerEvent",s),this.saveDMToLocalState(s,Ne.get("groups").get(r)))}))}})},handleKeyValue(e){var t,n;if(e.pubkey!==de.getPubKey())return;const r=(n=(t=e.tags)==null?void 0:t.find(i=>i[0]==="d"))==null?void 0:n[1];if(r){const i=this.keyValueEvents.get(r);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(r,e)}},isRepost(e){var t;if(e.kind===6)return!0;const r=(t=e.tags)==null?void 0:t.findIndex(n=>n[0]==="e"&&n[3]==="mention");return e.kind===1&&e.content===`#[${r}]`},acceptEvent(e){var r,t,n;if(Jg.maxFollowDistance&&de.getPubKey()){if(e.kind===4)return!0;if(!Bt.subscribedAuthors.has(e.pubkey)&&!Bt.subscribedEventIds.has(e.id)){if(!e.pubkey)return console.log("what",e),!1;if(Vp.has(e.pubkey)&&tt.getFollowDistance(e.pubkey)){const i=tt.followDistanceByUser.get(vt(e.pubkey));if(i&&i>Jg.maxFollowDistance||i===Jg.maxFollowDistance&&(((r=tt.followersByUser.get(vt(e.pubkey)))==null?void 0:r.size)||0)<(Jg.minFollowersAtMaxDistance||qI.minFollowersAtMaxDistance))return!1}else{const i=((t=Fi.likesByMessageId.get(e.id))==null?void 0:t.size)||0,s=((n=Fi.repostsByMessageId.get(e.id))==null?void 0:n.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}}}return!0},find(e,r){const t={};e.authors&&(t.pubkey={$in:e.authors}),e.kinds&&(t.kind={$in:e.kinds}),this.db.chain().find(t).where(n=>K3(e,n)).simplesort("created_at",{desc:!0}).limit(e.limit||1/0).data().forEach(n=>{r(n)})},handle(e,r=!1,t=!0,n=2){var i;if(!e||!r&&this.seen.has(e.id))return!1;if(!r&&!this.acceptEvent(e))return n&&setTimeout(()=>{this.handle(e,r,t,n-1)},3e3),!1;if(tt.isBlocked(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&this.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,Bt.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),this.isRepost(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:if(((i=Fi.db.findOne({kind:3,pubkey:e.pubkey}))==null?void 0:i.created_at)>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break;case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(t){const s=tt.followDistanceByUser.get(vt(e.pubkey))||1/0;s<=1?KI.indexedDbSave!==!1&&ll.saveEvent(e):s<=4&&[0,3,4].includes(e.kind)&&KI.indexedDbSave!==!1&&ll.saveEvent(e)}return Bt.handle(e),!0},handleEventMetadata({url:e,event:r}){const t=this.getOriginalPostEventId(r);t&&this.eventsMetaDb.upsert(t,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),r=this.db.by("id",e);r&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(r.id),this.handle(r,!0),this.handleNextFutureEvent()},(r.created_at-Date.now()/1e3)*1e3))},isMuted(e){let r=!1;if(Xg&&(r=Xg[e.id],!r)){for(const t of e.tags)if(t[0]==="e"&&Xg[t[1]]&&(r=Xg[t[1]],r))return!0}return r},getEventRoot(e){var t,n,i,s;const r=(n=(t=e==null?void 0:e.tags)==null?void 0:t.find(o=>o[0]==="e"&&o[3]==="root"))==null?void 0:n[1];return r||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(o=>o[0]==="e"))==null?void 0:s[1])},maybeAddNotification(e){var t,n;if(((t=e.tags)==null?void 0:t.filter(i=>i[0]==="p").length)>10)return;const r=de.getPubKey();if(e.pubkey!==r&&((n=e.tags)!=null&&n.some(i=>i[0]==="p"&&i[1]===r))){if(e.kind===3){const i=tt.followedByUser.get(vt(e.pubkey));if(!i||i.has(vt(r)))return}if(!this.isMuted(e)){this.insert(e);const i=this.getEventRoot(e)||this.getEventReplyingTo(e)||e.id,s=`${e.kind}-${i}`,o=this.latestNotificationByTargetAndKind.get(s),a=o&&this.db.by("id",o);(!o||a.created_at<e.created_at)&&(o&&this.notifications.delete(o),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:wn.debounce(()=>{if(!Fi.notificationsSeenTime)return;let e=0;for(const r of Fi.notifications.eventIds){const t=Fi.db.by("id",r);if((t==null?void 0:t.created_at)>Fi.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",Fi.notificationsSeenTime,"count",e),Ne.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var t;if(delete e.$loki,delete e.meta,e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");Bt.publish(e),console.log("publishing event",e),this.handle(e,!0);const r=(t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").reverse().slice(0,10);for(const n of r||[]){const i=this.db.by("id",n[1]);i&&(delete i.meta,delete i.$loki,Bt.publish(i))}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=de.getPubKey(),e.id=Th(e),e.sig=await de.sign(e),e},getZappingUser(e){var i,s,o;const r=(o=(s=(i=Fi.db.by("id",e))==null?void 0:i.tags)==null?void 0:s.find(a=>a[0]==="description"))==null?void 0:o[1];if(!r)return null;let t;try{t=JSON.parse(r)}catch{return null}return de.toNostrBech32Address(t.pubkey,"npub")},getReplies(e,r){const t=()=>{r==null||r(this.directRepliesByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[1]},t,!1)},getLikes(e,r){const t=()=>{r==null||r(this.likesByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[7]},t,!1)},getThreadRepliesCount(e,r){const t=()=>{var n;r==null||r(((n=this.threadRepliesByMessageId.get(e))==null?void 0:n.size)??0)};return t(),Bt.subscribe({"#e":[e],kinds:[1]},t,!1)},getReposts(e,r){const t=()=>{r==null||r(this.repostsByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[1,6]},t,!1)},getZaps(e,r){const t=()=>{r==null||r(this.zapsByNote.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[9735]},t,!1)},getEventById(e,r=!1,t){const n=this.db.by("id",e);if(t&&n){t(n);return}if(r){const i=setTimeout(()=>{Bt.subscribe({ids:[e]},s=>t==null?void 0:t(s))},300);fetch(`https://api.iris.to/event/${e}`).then(s=>{s.status===200&&s.json().then(o=>{o&&o.id===e&&(clearTimeout(i),Fi.handle(o,!0),t==null||t(o))})})}else Bt.subscribe({ids:[e]},t,!1)}},Me=Fi,Iwe=({each:e,children:r})=>e.map((t,n)=>r(t,n)),dt=e=>e.when?e.children:null;class $n extends Ty{constructor(){super(...arguments);ce(this,"unmounted");ce(this,"unsubscribes",{})}sub(t,n){return(s,o,a,l)=>{if(this.unmounted){a==null||a();return}this.unsubscribes[n??o]=a,t(s,o,a,l)}}inject(t,n){return this.sub((i,s)=>{const o={};o[t??s]=i,this.setState(o)},n)}unsubscribe(){Object.keys(this.unsubscribes).forEach(t=>{const n=this.unsubscribes[t];n==null||n(),delete this.unsubscribes[t]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}const Awe=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],FK=e=>Awe.some(r=>e.startsWith(r)),Owe=e=>{let r=e.onError,t=e.src,n=!1;if(e.src&&!e.src.startsWith("data:image")&&(!FK(e.src)||e.width)){const o=e.src;if(e.width){const l=e.width*2;t=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${l}:${l}/plain/${o}`}else t=`https://imgproxy.iris.to/insecure/plain/${o}`;const a=e.onError;r=()=>{n?(console.log("original source failed too",o),a&&a()):(console.log("image proxy failed",t,"trying original source",o),n=!0,s(o))}}const[i,s]=Le(t);return v("img",{src:i,onError:r,onClick:e.onClick,className:e.className,style:e.style,width:e.width,height:e.width,alt:e.alt})},mu=Owe;class hs extends $n{constructor(){super(...arguments);ce(this,"activityTimeout");ce(this,"unsub")}updateAvatar(){this.setState({avatar:Wi.createImageUrl(this.props.str,this.props.width)})}componentDidMount(){const t=this.props.str;t&&(this.updateAvatar(),t&&(this.unsub=Wi.getProfile(t,n=>{n&&this.setState({picture:n.picture,name:n.name})})),this.setState({activity:null}))}componentWillUnmount(){var t;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout),(t=this.unsub)==null||t.call(this)}render(){const t=this.props.width,n=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!tt.isBlocked(this.props.str),s=i?"has-picture":"",o=this.props.showTooltip?"tooltip":"";return v("div",{style:{maxWidth:`${t}px`,maxHeight:`${t}px`,cursor:this.props.onClick?"pointer":void 0},className:`inline-flex flex-col items-center justify-center relative select-none ${s} ${o} ${n}`,onClick:this.props.onClick,children:[v("div",{children:[v(dt,{when:i,children:v(mu,{className:"object-cover rounded-full",src:this.state.picture,width:t,square:!0,onError:()=>this.setState({hasError:!0})})}),v(dt,{when:!i,children:v("img",{width:t,className:"max-w-full rounded-full",src:this.state.avatar||""})})]}),v(dt,{when:this.props.showTooltip&&this.state.name,children:v("span",{className:"tooltiptext",children:this.state.name})})]})}}const jK=({event:e,isQuote:r,standalone:t,fullWidth:n})=>v("span",{className:`flex flex-col items-center flex-shrink-0 ${n?"mr-2":"mr-4"}`,children:[v(dt,{when:e.pubkey,children:v(Qt,{href:`/${e.pubkey}`,children:v(hs,{str:de.toNostrBech32Address(e.pubkey,"npub"),width:40})})}),v(dt,{when:r&&!t,children:v("div",{className:"border-l-2 border-neutral-700 h-full"})})]});var Cs=function(){return Cs=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Cs.apply(this,arguments)};function Vy(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,s;n<i;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return e.concat(s||Array.prototype.slice.call(r))}var Qr="-ms-",py="-moz-",Rr="-webkit-",zK="comm",j_="rule",zP="decl",Cwe="@import",HK="@keyframes",Pwe="@layer",Nwe=Math.abs,HP=String.fromCharCode,VI=Object.assign;function Rwe(e,r){return ui(e,0)^45?(((r<<2^ui(e,0))<<2^ui(e,1))<<2^ui(e,2))<<2^ui(e,3):0}function UK(e){return e.trim()}function ql(e,r){return(e=r.exec(e))?e[0]:e}function ar(e,r,t){return e.replace(r,t)}function sw(e,r){return e.indexOf(r)}function ui(e,r){return e.charCodeAt(r)|0}function Yp(e,r,t){return e.slice(r,t)}function sl(e){return e.length}function WK(e){return e.length}function Qg(e,r){return r.push(e),e}function Dwe(e,r){return e.map(r).join("")}function m6(e,r){return e.filter(function(t){return!ql(t,r)})}var z_=1,Zp=1,qK=0,Yo=0,jn=0,xv="";function H_(e,r,t,n,i,s,o,a){return{value:e,root:r,parent:t,type:n,props:i,children:s,line:z_,column:Zp,length:o,return:"",siblings:a}}function hc(e,r){return VI(H_("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},r)}function Md(e){for(;e.root;)e=hc(e.root,{children:[e]});Qg(e,e.siblings)}function Bwe(){return jn}function Mwe(){return jn=Yo>0?ui(xv,--Yo):0,Zp--,jn===10&&(Zp=1,z_--),jn}function Ia(){return jn=Yo<qK?ui(xv,Yo++):0,Zp++,jn===10&&(Zp=1,z_++),jn}function ch(){return ui(xv,Yo)}function ow(){return Yo}function U_(e,r){return Yp(xv,e,r)}function GI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lwe(e){return z_=Zp=1,qK=sl(xv=e),Yo=0,[]}function Fwe(e){return xv="",e}function WE(e){return UK(U_(Yo-1,YI(e===91?e+2:e===40?e+1:e)))}function jwe(e){for(;(jn=ch())&&jn<33;)Ia();return GI(e)>2||GI(jn)>3?"":" "}function zwe(e,r){for(;--r&&Ia()&&!(jn<48||jn>102||jn>57&&jn<65||jn>70&&jn<97););return U_(e,ow()+(r<6&&ch()==32&&Ia()==32))}function YI(e){for(;Ia();)switch(jn){case e:return Yo;case 34:case 39:e!==34&&e!==39&&YI(jn);break;case 40:e===41&&YI(e);break;case 92:Ia();break}return Yo}function Hwe(e,r){for(;Ia()&&e+jn!==47+10;)if(e+jn===42+42&&ch()===47)break;return"/*"+U_(r,Yo-1)+"*"+HP(e===47?e:Ia())}function Uwe(e){for(;!GI(ch());)Ia();return U_(e,Yo)}function Wwe(e){return Fwe(aw("",null,null,null,[""],e=Lwe(e),0,[0],e))}function aw(e,r,t,n,i,s,o,a,l){for(var u=0,f=0,c=o,d=0,y=0,w=0,b=1,T=1,_=1,A=0,x="",I=i,O=s,C=n,g=x;T;)switch(w=A,A=Ia()){case 40:if(w!=108&&ui(g,c-1)==58){sw(g+=ar(WE(A),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:g+=WE(A);break;case 9:case 10:case 13:case 32:g+=jwe(w);break;case 92:g+=zwe(ow()-1,7);continue;case 47:switch(ch()){case 42:case 47:Qg(qwe(Hwe(Ia(),ow()),r,t,l),l);break;default:g+="/"}break;case 123*b:a[u++]=sl(g)*_;case 125*b:case 59:case 0:switch(A){case 0:case 125:T=0;case 59+f:_==-1&&(g=ar(g,/\f/g,"")),y>0&&sl(g)-c&&Qg(y>32?w6(g+";",n,t,c-1,l):w6(ar(g," ","")+";",n,t,c-2,l),l);break;case 59:g+=";";default:if(Qg(C=b6(g,r,t,u,f,i,a,x,I=[],O=[],c,s),s),A===123)if(f===0)aw(g,r,C,C,I,s,c,a,O);else switch(d===99&&ui(g,3)===110?100:d){case 100:case 108:case 109:case 115:aw(e,C,C,n&&Qg(b6(e,C,C,0,0,i,a,x,i,I=[],c,O),O),i,O,c,a,n?I:O);break;default:aw(g,C,C,C,[""],O,0,a,O)}}u=f=y=0,b=_=1,x=g="",c=o;break;case 58:c=1+sl(g),y=w;default:if(b<1){if(A==123)--b;else if(A==125&&b++==0&&Mwe()==125)continue}switch(g+=HP(A),A*b){case 38:_=f>0?1:(g+="\f",-1);break;case 44:a[u++]=(sl(g)-1)*_,_=1;break;case 64:ch()===45&&(g+=WE(Ia())),d=ch(),f=c=sl(x=g+=Uwe(ow())),A++;break;case 45:w===45&&sl(g)==2&&(b=0)}}return s}function b6(e,r,t,n,i,s,o,a,l,u,f,c){for(var d=i-1,y=i===0?s:[""],w=WK(y),b=0,T=0,_=0;b<n;++b)for(var A=0,x=Yp(e,d+1,d=Nwe(T=o[b])),I=e;A<w;++A)(I=UK(T>0?y[A]+" "+x:ar(x,/&\f/g,y[A])))&&(l[_++]=I);return H_(e,r,t,i===0?j_:a,l,u,f,c)}function qwe(e,r,t,n){return H_(e,r,t,zK,HP(Bwe()),Yp(e,2,-2),0,n)}function w6(e,r,t,n,i){return H_(e,r,t,zP,Yp(e,0,n),Yp(e,n+1,-1),n,i)}function KK(e,r,t){switch(Rwe(e,r)){case 5103:return Rr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rr+e+e;case 4789:return py+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rr+e+py+e+Qr+e+e;case 5936:switch(ui(e,r+11)){case 114:return Rr+e+Qr+ar(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rr+e+Qr+ar(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rr+e+Qr+ar(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Rr+e+Qr+e+e;case 6165:return Rr+e+Qr+"flex-"+e+e;case 5187:return Rr+e+ar(e,/(\w+).+(:[^]+)/,Rr+"box-$1$2"+Qr+"flex-$1$2")+e;case 5443:return Rr+e+Qr+"flex-item-"+ar(e,/flex-|-self/g,"")+(ql(e,/flex-|baseline/)?"":Qr+"grid-row-"+ar(e,/flex-|-self/g,""))+e;case 4675:return Rr+e+Qr+"flex-line-pack"+ar(e,/align-content|flex-|-self/g,"")+e;case 5548:return Rr+e+Qr+ar(e,"shrink","negative")+e;case 5292:return Rr+e+Qr+ar(e,"basis","preferred-size")+e;case 6060:return Rr+"box-"+ar(e,"-grow","")+Rr+e+Qr+ar(e,"grow","positive")+e;case 4554:return Rr+ar(e,/([^-])(transform)/g,"$1"+Rr+"$2")+e;case 6187:return ar(ar(ar(e,/(zoom-|grab)/,Rr+"$1"),/(image-set)/,Rr+"$1"),e,"")+e;case 5495:case 3959:return ar(e,/(image-set\([^]*)/,Rr+"$1$`$1");case 4968:return ar(ar(e,/(.+:)(flex-)?(.*)/,Rr+"box-pack:$3"+Qr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rr+e+e;case 4200:if(!ql(e,/flex-|baseline/))return Qr+"grid-column-align"+Yp(e,r)+e;break;case 2592:case 3360:return Qr+ar(e,"template-","")+e;case 4384:case 3616:return t&&t.some(function(n,i){return r=i,ql(n.props,/grid-\w+-end/)})?~sw(e+(t=t[r].value),"span")?e:Qr+ar(e,"-start","")+e+Qr+"grid-row-span:"+(~sw(t,"span")?ql(t,/\d+/):+ql(t,/\d+/)-+ql(e,/\d+/))+";":Qr+ar(e,"-start","")+e;case 4896:case 4128:return t&&t.some(function(n){return ql(n.props,/grid-\w+-start/)})?e:Qr+ar(ar(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ar(e,/(.+)-inline(.+)/,Rr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(sl(e)-1-r>6)switch(ui(e,r+1)){case 109:if(ui(e,r+4)!==45)break;case 102:return ar(e,/(.+:)(.+)-([^]+)/,"$1"+Rr+"$2-$3$1"+py+(ui(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~sw(e,"stretch")?KK(ar(e,"stretch","fill-available"),r,t)+e:e}break;case 5152:case 5920:return ar(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,s,o,a,l,u){return Qr+i+":"+s+u+(o?Qr+i+"-span:"+(a?l:+l-+s)+u:"")+e});case 4949:if(ui(e,r+6)===121)return ar(e,":",":"+Rr)+e;break;case 6444:switch(ui(e,ui(e,14)===45?18:11)){case 120:return ar(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Rr+(ui(e,14)===45?"inline-":"")+"box$3$1"+Rr+"$2$3$1"+Qr+"$2box$3")+e;case 100:return ar(e,":",":"+Qr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ar(e,"scroll-","scroll-snap-")+e}return e}function a$(e,r){for(var t="",n=0;n<e.length;n++)t+=r(e[n],n,e,r)||"";return t}function Kwe(e,r,t,n){switch(e.type){case Pwe:if(e.children.length)break;case Cwe:case zP:return e.return=e.return||e.value;case zK:return"";case HK:return e.return=e.value+"{"+a$(e.children,n)+"}";case j_:if(!sl(e.value=e.props.join(",")))return""}return sl(t=a$(e.children,n))?e.return=e.value+"{"+t+"}":""}function Vwe(e){var r=WK(e);return function(t,n,i,s){for(var o="",a=0;a<r;a++)o+=e[a](t,n,i,s)||"";return o}}function Gwe(e){return function(r){r.root||(r=r.return)&&e(r)}}function Ywe(e,r,t,n){if(e.length>-1&&!e.return)switch(e.type){case zP:e.return=KK(e.value,e.length,t);return;case HK:return a$([hc(e,{value:ar(e.value,"@","@"+Rr)})],n);case j_:if(e.length)return Dwe(t=e.props,function(i){switch(ql(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Md(hc(e,{props:[ar(i,/:(read-\w+)/,":"+py+"$1")]})),Md(hc(e,{props:[i]})),VI(e,{props:m6(t,n)});break;case"::placeholder":Md(hc(e,{props:[ar(i,/:(plac\w+)/,":"+Rr+"input-$1")]})),Md(hc(e,{props:[ar(i,/:(plac\w+)/,":"+py+"$1")]})),Md(hc(e,{props:[ar(i,/:(plac\w+)/,Qr+"input-$1")]})),Md(hc(e,{props:[i]})),VI(e,{props:m6(t,n)});break}return""})}}var Zwe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xp=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",UP=typeof window<"u"&&"HTMLElement"in window,Xwe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),W_=Object.freeze([]),Jp=Object.freeze({});function Jwe(e,r,t){return t===void 0&&(t=Jp),e.theme!==t.theme&&e.theme||r||t.theme}var VK=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Qwe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,e$e=/(^-|-$)/g;function $6(e){return e.replace(Qwe,"-").replace(e$e,"")}var t$e=/(a)(d)/gi,_6=function(e){return String.fromCharCode(e+(e>25?39:97))};function ZI(e){var r,t="";for(r=Math.abs(e);r>52;r=r/52|0)t=_6(r%52)+t;return(_6(r%52)+t).replace(t$e,"$1-$2")}var qE,sp=function(e,r){for(var t=r.length;t;)e=33*e^r.charCodeAt(--t);return e},GK=function(e){return sp(5381,e)};function YK(e){return ZI(GK(e)>>>0)}function r$e(e){return e.displayName||e.name||"Component"}function KE(e){return typeof e=="string"&&!0}var ZK=typeof Symbol=="function"&&Symbol.for,XK=ZK?Symbol.for("react.memo"):60115,n$e=ZK?Symbol.for("react.forward_ref"):60112,i$e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s$e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},JK={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o$e=((qE={})[n$e]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qE[XK]=JK,qE);function x6(e){return("type"in(r=e)&&r.type.$$typeof)===XK?JK:"$$typeof"in e?o$e[e.$$typeof]:i$e;var r}var a$e=Object.defineProperty,l$e=Object.getOwnPropertyNames,E6=Object.getOwnPropertySymbols,u$e=Object.getOwnPropertyDescriptor,c$e=Object.getPrototypeOf,S6=Object.prototype;function QK(e,r,t){if(typeof r!="string"){if(S6){var n=c$e(r);n&&n!==S6&&QK(e,n,t)}var i=l$e(r);E6&&(i=i.concat(E6(r)));for(var s=x6(e),o=x6(r),a=0;a<i.length;++a){var l=i[a];if(!(l in s$e||t&&t[l]||o&&l in o||s&&l in s)){var u=u$e(r,l);try{a$e(e,l,u)}catch{}}}}return e}function Qp(e){return typeof e=="function"}function WP(e){return typeof e=="object"&&"styledComponentId"in e}function eh(e,r){return e&&r?"".concat(e," ").concat(r):e||r||""}function XI(e,r){if(e.length===0)return"";for(var t=e[0],n=1;n<e.length;n++)t+=r?r+e[n]:e[n];return t}function Gy(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function JI(e,r,t){if(t===void 0&&(t=!1),!t&&!Gy(e)&&!Array.isArray(e))return r;if(Array.isArray(r))for(var n=0;n<r.length;n++)e[n]=JI(e[n],r[n]);else if(Gy(r))for(var n in r)e[n]=JI(e[n],r[n]);return e}function qP(e,r){Object.defineProperty(e,"toString",{value:r})}function Bm(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(r.length>0?" Args: ".concat(r.join(", ")):""))}var f$e=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}return e.prototype.indexOfGroup=function(r){for(var t=0,n=0;n<r;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(r,t){if(r>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,s=i;r>=s;)if((s<<=1)<0)throw Bm(16,"".concat(r));this.groupSizes=new Uint32Array(s),this.groupSizes.set(n),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(r+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[r]++,a++)},e.prototype.clearGroup=function(r){if(r<this.length){var t=this.groupSizes[r],n=this.indexOfGroup(r),i=n+t;this.groupSizes[r]=0;for(var s=n;s<i;s++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(r){var t="";if(r>=this.length||this.groupSizes[r]===0)return t;for(var n=this.groupSizes[r],i=this.indexOfGroup(r),s=i+n,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return t},e}(),lw=new Map,l$=new Map,VE=1,e1=function(e){if(lw.has(e))return lw.get(e);for(;l$.has(VE);)VE++;var r=VE++;return lw.set(e,r),l$.set(r,e),r},h$e=function(e,r){lw.set(e,r),l$.set(r,e)},d$e="style[".concat(Xp,"][").concat("data-styled-version",'="').concat("6.0.5",'"]'),p$e=new RegExp("^".concat(Xp,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),v$e=function(e,r,t){for(var n,i=t.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&e.registerName(r,n)},g$e=function(e,r){for(var t,n=((t=r.textContent)!==null&&t!==void 0?t:"").split(`/*!sc*/
`),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var l=a.match(p$e);if(l){var u=0|parseInt(l[1],10),f=l[2];u!==0&&(h$e(f,u),v$e(e,f,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(a)}}};function y$e(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var eV=function(e){var r=document.head,t=e||r,n=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Xp,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;n.setAttribute(Xp,"active"),n.setAttribute("data-styled-version","6.0.5");var o=y$e();return o&&n.setAttribute("nonce",o),t.insertBefore(n,s),n},m$e=function(){function e(r){this.element=eV(r),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,s=n.length;i<s;i++){var o=n[i];if(o.ownerNode===t)return o}throw Bm(17)}(this.element),this.length=0}return e.prototype.insertRule=function(r,t){try{return this.sheet.insertRule(t,r),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},e.prototype.getRule=function(r){var t=this.sheet.cssRules[r];return t&&t.cssText?t.cssText:""},e}(),b$e=function(){function e(r){this.element=eV(r),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(r,t){if(r<=this.length&&r>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[r]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},e.prototype.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),w$e=function(){function e(r){this.rules=[],this.length=0}return e.prototype.insertRule=function(r,t){return r<=this.length&&(this.rules.splice(r,0,t),this.length++,!0)},e.prototype.deleteRule=function(r){this.rules.splice(r,1),this.length--},e.prototype.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),k6=UP,$$e={isServer:!UP,useCSSOMInjection:!Xwe},tV=function(){function e(r,t,n){r===void 0&&(r=Jp),t===void 0&&(t={});var i=this;this.options=Cs(Cs({},$$e),r),this.gs=t,this.names=new Map(n),this.server=!!r.isServer,!this.server&&UP&&k6&&(k6=!1,function(s){for(var o=document.querySelectorAll(d$e),a=0,l=o.length;a<l;a++){var u=o[a];u&&u.getAttribute(Xp)!=="active"&&(g$e(s,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),qP(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(c){var d=function(_){return l$.get(_)}(c);if(d===void 0)return"continue";var y=s.names.get(d),w=o.getGroup(c);if(y===void 0||w.length===0)return"continue";var b="".concat(Xp,".g").concat(c,'[id="').concat(d,'"]'),T="";y!==void 0&&y.forEach(function(_){_.length>0&&(T+="".concat(_,","))}),l+="".concat(w).concat(b,'{content:"').concat(T,'"}').concat(`/*!sc*/
`)},f=0;f<a;f++)u(f);return l}(i)})}return e.registerId=function(r){return e1(r)},e.prototype.reconstructWithOptions=function(r,t){return t===void 0&&(t=!0),new e(Cs(Cs({},this.options),r),this.gs,t&&this.names||void 0)},e.prototype.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(r=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new w$e(i):n?new m$e(i):new b$e(i)}(this.options),new f$e(r)));var r},e.prototype.hasNameForId=function(r,t){return this.names.has(r)&&this.names.get(r).has(t)},e.prototype.registerName=function(r,t){if(e1(r),this.names.has(r))this.names.get(r).add(t);else{var n=new Set;n.add(t),this.names.set(r,n)}},e.prototype.insertRules=function(r,t,n){this.registerName(r,t),this.getTag().insertRules(e1(r),n)},e.prototype.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},e.prototype.clearRules=function(r){this.getTag().clearGroup(e1(r)),this.clearNames(r)},e.prototype.clearTag=function(){this.tag=void 0},e}(),_$e=/&/g,x$e=/^\s*\/\/.*$/gm;function rV(e,r){return e.map(function(t){return t.type==="rule"&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(n){return"".concat(r," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=rV(t.children,r)),t})}function E$e(e){var r,t,n,i=e===void 0?Jp:e,s=i.options,o=s===void 0?Jp:s,a=i.plugins,l=a===void 0?W_:a,u=function(d,y,w){return w===t||w.startsWith(t)&&w.endsWith(t)&&w.replaceAll(t,"").length>0?".".concat(r):d},f=l.slice();f.push(function(d){d.type===j_&&d.value.includes("&")&&(d.props[0]=d.props[0].replace(_$e,t).replace(n,u))}),o.prefix&&f.push(Ywe),f.push(Kwe);var c=function(d,y,w,b){y===void 0&&(y=""),w===void 0&&(w=""),b===void 0&&(b="&"),r=b,t=y,n=new RegExp("\\".concat(t,"\\b"),"g");var T=d.replace(x$e,""),_=Wwe(w||y?"".concat(w," ").concat(y," { ").concat(T," }"):T);o.namespace&&(_=rV(_,o.namespace));var A=[];return a$(_,Vwe(f.concat(Gwe(function(x){return A.push(x)})))),A};return c.hash=l.length?l.reduce(function(d,y){return y.name||Bm(15),sp(d,y.name)},5381).toString():"",c}var S$e=new tV,QI=E$e(),nV=ka.createContext({shouldForwardProp:void 0,styleSheet:S$e,stylis:QI});nV.Consumer;ka.createContext(void 0);function T6(){return d_(nV)}var iV=function(){function e(r,t){var n=this;this.inject=function(i,s){s===void 0&&(s=QI);var o=n.name+s.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,s(n.rules,o,"@keyframes"))},this.name=r,this.id="sc-keyframes-".concat(r),this.rules=t,qP(this,function(){throw Bm(12,String(n.name))})}return e.prototype.getName=function(r){return r===void 0&&(r=QI),this.name+r.hash},e}(),k$e=function(e){return e>="A"&&e<="Z"};function I6(e){for(var r="",t=0;t<e.length;t++){var n=e[t];if(t===1&&n==="-"&&e[0]==="-")return e;k$e(n)?r+="-"+n.toLowerCase():r+=n}return r.startsWith("ms-")?"-"+r:r}var sV=function(e){return e==null||e===!1||e===""},oV=function(e){var r,t,n=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!sV(s)&&(Array.isArray(s)&&s.isCss||Qp(s)?n.push("".concat(I6(i),":"),s,";"):Gy(s)?n.push.apply(n,Vy(Vy(["".concat(i," {")],oV(s),!1),["}"],!1)):n.push("".concat(I6(i),": ").concat((r=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||r in Zwe||r.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function fh(e,r,t,n){if(sV(e))return[];if(WP(e))return[".".concat(e.styledComponentId)];if(Qp(e)){if(!Qp(s=e)||s.prototype&&s.prototype.isReactComponent||!r)return[e];var i=e(r);return fh(i,r,t,n)}var s;return e instanceof iV?t?(e.inject(t,n),[e.getName(n)]):[e]:Gy(e)?oV(e):Array.isArray(e)?Array.prototype.concat.apply(W_,e.map(function(o){return fh(o,r,t,n)})):[e.toString()]}function T$e(e){for(var r=0;r<e.length;r+=1){var t=e[r];if(Qp(t)&&!WP(t))return!1}return!0}var I$e=GK("6.0.5"),A$e=function(){function e(r,t,n){this.rules=r,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&T$e(r),this.componentId=t,this.baseHash=sp(I$e,t),this.baseStyle=n,tV.registerId(t)}return e.prototype.generateAndInjectStyles=function(r,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(r,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=eh(i,this.staticRulesId);else{var s=XI(fh(this.rules,r,t,n)),o=ZI(sp(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=eh(i,o),this.staticRulesId=o}else{for(var l=sp(this.baseHash,n.hash),u="",f=0;f<this.rules.length;f++){var c=this.rules[f];if(typeof c=="string")u+=c;else if(c){var d=XI(fh(c,r,t,n));l=sp(l,d),u+=d}}if(u){var y=ZI(l>>>0);t.hasNameForId(this.componentId,y)||t.insertRules(this.componentId,y,n(u,".".concat(y),void 0,this.componentId)),i=eh(i,y)}}return i},e}(),aV=ka.createContext(void 0);aV.Consumer;var GE={};function O$e(e,r,t){var n=WP(e),i=e,s=!KE(e),o=r.attrs,a=o===void 0?W_:o,l=r.componentId,u=l===void 0?function(x,I){var O=typeof x!="string"?"sc":$6(x);GE[O]=(GE[O]||0)+1;var C="".concat(O,"-").concat(YK("6.0.5"+O+GE[O]));return I?"".concat(I,"-").concat(C):C}(r.displayName,r.parentComponentId):l,f=r.displayName;f===void 0&&function(x){return KE(x)?"styled.".concat(x):"Styled(".concat(r$e(x),")")}(e);var c=r.displayName&&r.componentId?"".concat($6(r.displayName),"-").concat(r.componentId):r.componentId||u,d=n&&i.attrs?i.attrs.concat(a).filter(Boolean):a,y=r.shouldForwardProp;if(n&&i.shouldForwardProp){var w=i.shouldForwardProp;if(r.shouldForwardProp){var b=r.shouldForwardProp;y=function(x,I){return w(x,I)&&b(x,I)}}else y=w}var T=new A$e(t,c,n?i.componentStyle:void 0);function _(x,I){return function(O,C,g){var M=O.attrs,B=O.componentStyle,z=O.defaultProps,V=O.foldedComponentIds,ne=O.styledComponentId,re=O.target,J=ka.useContext(aV),F=T6(),Z=O.shouldForwardProp||F.shouldForwardProp,ie=function(it,xe,ge){for(var Te,je=Cs(Cs({},xe),{className:void 0,theme:ge}),$=0;$<it.length;$+=1){var S=Qp(Te=it[$])?Te(je):Te;for(var N in S)je[N]=N==="className"?eh(je[N],S[N]):N==="style"?Cs(Cs({},je[N]),S[N]):S[N]}return xe.className&&(je.className=eh(je.className,xe.className)),je}(M,C,Jwe(C,J,z)||Jp),_e=ie.as||re,we={};for(var Ce in ie)ie[Ce]===void 0||Ce[0]==="$"||Ce==="as"||Ce==="theme"||(Ce==="forwardedAs"?we.as=ie.forwardedAs:Z&&!Z(Ce,_e)||(we[Ce]=ie[Ce]));var He=function(it,xe){var ge=T6(),Te=it.generateAndInjectStyles(xe,ge.styleSheet,ge.stylis);return Te}(B,ie),Ge=eh(V,ne);return He&&(Ge+=" "+He),ie.className&&(Ge+=" "+ie.className),we[KE(_e)&&!VK.has(_e)?"class":"className"]=Ge,we.ref=g,Qe(_e,we)}(A,x,I)}var A=ka.forwardRef(_);return A.attrs=d,A.componentStyle=T,A.shouldForwardProp=y,A.foldedComponentIds=n?eh(i.foldedComponentIds,i.styledComponentId):"",A.styledComponentId=c,A.target=n?i.target:e,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=n?function(I){for(var O=[],C=1;C<arguments.length;C++)O[C-1]=arguments[C];for(var g=0,M=O;g<M.length;g++)JI(I,M[g],!0);return I}({},i.defaultProps,x):x}}),qP(A,function(){return".".concat(A.styledComponentId)}),s&&QK(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function A6(e,r){for(var t=[e[0]],n=0,i=r.length;n<i;n+=1)t.push(r[n],e[n+1]);return t}var O6=function(e){return Object.assign(e,{isCss:!0})};function KP(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(Qp(e)||Gy(e)){var n=e;return O6(fh(A6(W_,Vy([n],r,!0))))}var i=e;return r.length===0&&i.length===1&&typeof i[0]=="string"?fh(i):O6(fh(A6(i,r)))}function eA(e,r,t){if(t===void 0&&(t=Jp),!r)throw Bm(1,r);var n=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return e(r,t,KP.apply(void 0,Vy([i],s,!1)))};return n.attrs=function(i){return eA(e,r,Cs(Cs({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return eA(e,r,Cs(Cs({},t),i))},n}var lV=function(e){return eA(O$e,e)},_n=lV;VK.forEach(function(e){_n[e]=lV(e)});function C$e(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=XI(KP.apply(void 0,Vy([e],r,!1))),i=YK(n);return new iV(i,n)}const P$e=_n.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  justify-content: ${e=>e.centerVertically?"center":e.justifyContent||"flex-start"};
  align-items: center;
  overflow-y: auto;
  overflow-x: hidden;
`,N$e=_n.div`
  width: ${e=>e.width||"auto"};
  height: ${e=>e.height||"auto"};
  max-height: calc(100% - 40px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Su=({width:e,height:r,centerVertically:t,showContainer:n,children:i,onClose:s})=>{const o=f=>{f.key==="Escape"&&(s==null||s())},a=f=>{f.stopPropagation(),s==null||s()},l=f=>{f.stopPropagation()};St(()=>(document.body.style.overflow="hidden",window.addEventListener("keydown",o),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",o)}),[o]);const u=n?v("div",{className:"p-8 border-neutral-500 border-2 bg-black rounded-lg shadow-lg",style:{width:"600px","max-width":"calc(100vw - 40px)"},onClick:f=>l(f),children:i}):i;return v(P$e,{centerVertically:t,onClick:a,children:v(N$e,{width:e,height:r,children:u})})},R$e=_n.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 20px;
`,D$e=e=>{var r;return v(Su,{centerVertically:((r=e.images)==null?void 0:r.length)===1,onClose:e.onClose,children:v(R$e,{children:e.images.map(t=>v("p",{children:v(mu,{className:"rounded-sm",style:{maxHeight:"90vh",maxWidth:"90vw"},src:t})}))})})};var uV=function(e,r,t,n){var i;r[0]=0;for(var s=1;s<r.length;s++){var o=r[s++],a=r[s]?(r[0]|=o?1:2,t[r[s++]]):r[++s];o===3?n[0]=a:o===4?n[1]=Object.assign(n[1]||{},a):o===5?(n[1]=n[1]||{})[r[++s]]=a:o===6?n[1][r[++s]]+=a+"":o?(i=e.apply(a,uV(e,a,t,["",null])),n.push(i),a[0]?r[0]|=2:(r[s-2]=0,r[s]=i)):n.push(a)}return n},C6=new Map;function B$e(e){var r=C6.get(this);return r||(r=new Map,C6.set(this,r)),(r=uV(this,r.get(e)||(r.set(e,r=function(t){for(var n,i,s=1,o="",a="",l=[0],u=function(d){s===1&&(d||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,d,o):s===3&&(d||o)?(l.push(3,d,o),s=2):s===2&&o==="..."&&d?l.push(4,d,0):s===2&&o&&!d?l.push(5,0,!0,o):s>=5&&((o||!d&&s===5)&&(l.push(s,0,o,i),s=6),d&&(l.push(s,d,0,i),s=6)),o=""},f=0;f<t.length;f++){f&&(s===1&&u(),u(f));for(var c=0;c<t[f].length;c++)n=t[f][c],s===1?n==="<"?(u(),l=[l],s=3):o+=n:s===4?o==="--"&&n===">"?(s=1,o=""):o=n+o[0]:a?n===a?a="":o+=n:n==='"'||n==="'"?a=n:n===">"?(u(),s=1):s&&(n==="="?(s=5,i=o,o=""):n==="/"&&(s<5||t[f][c+1]===">")?(u(),s===3&&(l=l[0]),s=l,(l=l[0]).push(2,0,s),s=0):n===" "||n==="	"||n===`
`||n==="\r"?(u(),s=2):o+=n),s===3&&o==="!--"&&(s=4,l=l[0])}return u(),l}(e)),r),arguments,[])).length>1?r:r[0]}var Co=B$e.bind(Qe);function M$e(){this.__data__=[],this.size=0}var L$e=M$e;function F$e(e,r){return e===r||e!==e&&r!==r}var cV=F$e,j$e=cV;function z$e(e,r){for(var t=e.length;t--;)if(j$e(e[t][0],r))return t;return-1}var q_=z$e,H$e=q_,U$e=Array.prototype,W$e=U$e.splice;function q$e(e){var r=this.__data__,t=H$e(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():W$e.call(r,t,1),--this.size,!0}var K$e=q$e,V$e=q_;function G$e(e){var r=this.__data__,t=V$e(r,e);return t<0?void 0:r[t][1]}var Y$e=G$e,Z$e=q_;function X$e(e){return Z$e(this.__data__,e)>-1}var J$e=X$e,Q$e=q_;function e_e(e,r){var t=this.__data__,n=Q$e(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}var t_e=e_e,r_e=L$e,n_e=K$e,i_e=Y$e,s_e=J$e,o_e=t_e;function Ev(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Ev.prototype.clear=r_e;Ev.prototype.delete=n_e;Ev.prototype.get=i_e;Ev.prototype.has=s_e;Ev.prototype.set=o_e;var K_=Ev,a_e=K_;function l_e(){this.__data__=new a_e,this.size=0}var u_e=l_e;function c_e(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var f_e=c_e;function h_e(e){return this.__data__.get(e)}var d_e=h_e;function p_e(e){return this.__data__.has(e)}var v_e=p_e,g_e=Im,y_e=Tm,m_e="[object AsyncFunction]",b_e="[object Function]",w_e="[object GeneratorFunction]",$_e="[object Proxy]";function __e(e){if(!y_e(e))return!1;var r=g_e(e);return r==b_e||r==w_e||r==m_e||r==$_e}var fV=__e,x_e=wl,E_e=x_e["__core-js_shared__"],S_e=E_e,YE=S_e,P6=function(){var e=/[^.]+$/.exec(YE&&YE.keys&&YE.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function k_e(e){return!!P6&&P6 in e}var T_e=k_e,I_e=Function.prototype,A_e=I_e.toString;function O_e(e){if(e!=null){try{return A_e.call(e)}catch{}try{return e+""}catch{}}return""}var hV=O_e,C_e=fV,P_e=T_e,N_e=Tm,R_e=hV,D_e=/[\\^$.*+?()[\]{}|]/g,B_e=/^\[object .+?Constructor\]$/,M_e=Function.prototype,L_e=Object.prototype,F_e=M_e.toString,j_e=L_e.hasOwnProperty,z_e=RegExp("^"+F_e.call(j_e).replace(D_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function H_e(e){if(!N_e(e)||P_e(e))return!1;var r=C_e(e)?z_e:B_e;return r.test(R_e(e))}var U_e=H_e;function W_e(e,r){return e==null?void 0:e[r]}var q_e=W_e,K_e=U_e,V_e=q_e;function G_e(e,r){var t=V_e(e,r);return K_e(t)?t:void 0}var Sv=G_e,Y_e=Sv,Z_e=wl,X_e=Y_e(Z_e,"Map"),VP=X_e,J_e=Sv,Q_e=J_e(Object,"create"),V_=Q_e,N6=V_;function exe(){this.__data__=N6?N6(null):{},this.size=0}var txe=exe;function rxe(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var nxe=rxe,ixe=V_,sxe="__lodash_hash_undefined__",oxe=Object.prototype,axe=oxe.hasOwnProperty;function lxe(e){var r=this.__data__;if(ixe){var t=r[e];return t===sxe?void 0:t}return axe.call(r,e)?r[e]:void 0}var uxe=lxe,cxe=V_,fxe=Object.prototype,hxe=fxe.hasOwnProperty;function dxe(e){var r=this.__data__;return cxe?r[e]!==void 0:hxe.call(r,e)}var pxe=dxe,vxe=V_,gxe="__lodash_hash_undefined__";function yxe(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=vxe&&r===void 0?gxe:r,this}var mxe=yxe,bxe=txe,wxe=nxe,$xe=uxe,_xe=pxe,xxe=mxe;function kv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}kv.prototype.clear=bxe;kv.prototype.delete=wxe;kv.prototype.get=$xe;kv.prototype.has=_xe;kv.prototype.set=xxe;var Exe=kv,R6=Exe,Sxe=K_,kxe=VP;function Txe(){this.size=0,this.__data__={hash:new R6,map:new(kxe||Sxe),string:new R6}}var Ixe=Txe;function Axe(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Oxe=Axe,Cxe=Oxe;function Pxe(e,r){var t=e.__data__;return Cxe(r)?t[typeof r=="string"?"string":"hash"]:t.map}var G_=Pxe,Nxe=G_;function Rxe(e){var r=Nxe(this,e).delete(e);return this.size-=r?1:0,r}var Dxe=Rxe,Bxe=G_;function Mxe(e){return Bxe(this,e).get(e)}var Lxe=Mxe,Fxe=G_;function jxe(e){return Fxe(this,e).has(e)}var zxe=jxe,Hxe=G_;function Uxe(e,r){var t=Hxe(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}var Wxe=Uxe,qxe=Ixe,Kxe=Dxe,Vxe=Lxe,Gxe=zxe,Yxe=Wxe;function Tv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Tv.prototype.clear=qxe;Tv.prototype.delete=Kxe;Tv.prototype.get=Vxe;Tv.prototype.has=Gxe;Tv.prototype.set=Yxe;var dV=Tv,Zxe=K_,Xxe=VP,Jxe=dV,Qxe=200;function e2e(e,r){var t=this.__data__;if(t instanceof Zxe){var n=t.__data__;if(!Xxe||n.length<Qxe-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Jxe(n)}return t.set(e,r),this.size=t.size,this}var t2e=e2e,r2e=K_,n2e=u_e,i2e=f_e,s2e=d_e,o2e=v_e,a2e=t2e;function Iv(e){var r=this.__data__=new r2e(e);this.size=r.size}Iv.prototype.clear=n2e;Iv.prototype.delete=i2e;Iv.prototype.get=s2e;Iv.prototype.has=o2e;Iv.prototype.set=a2e;var l2e=Iv,u2e="__lodash_hash_undefined__";function c2e(e){return this.__data__.set(e,u2e),this}var f2e=c2e;function h2e(e){return this.__data__.has(e)}var d2e=h2e,p2e=dV,v2e=f2e,g2e=d2e;function u$(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new p2e;++r<t;)this.add(e[r])}u$.prototype.add=u$.prototype.push=v2e;u$.prototype.has=g2e;var y2e=u$;function m2e(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}var b2e=m2e;function w2e(e,r){return e.has(r)}var $2e=w2e,_2e=y2e,x2e=b2e,E2e=$2e,S2e=1,k2e=2;function T2e(e,r,t,n,i,s){var o=t&S2e,a=e.length,l=r.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),f=s.get(r);if(u&&f)return u==r&&f==e;var c=-1,d=!0,y=t&k2e?new _2e:void 0;for(s.set(e,r),s.set(r,e);++c<a;){var w=e[c],b=r[c];if(n)var T=o?n(b,w,c,r,e,s):n(w,b,c,e,r,s);if(T!==void 0){if(T)continue;d=!1;break}if(y){if(!x2e(r,function(_,A){if(!E2e(y,A)&&(w===_||i(w,_,t,n,s)))return y.push(A)})){d=!1;break}}else if(!(w===b||i(w,b,t,n,s))){d=!1;break}}return s.delete(e),s.delete(r),d}var pV=T2e,I2e=wl,A2e=I2e.Uint8Array,O2e=A2e;function C2e(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}var P2e=C2e;function N2e(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var R2e=N2e,D6=Q3,B6=O2e,D2e=cV,B2e=pV,M2e=P2e,L2e=R2e,F2e=1,j2e=2,z2e="[object Boolean]",H2e="[object Date]",U2e="[object Error]",W2e="[object Map]",q2e="[object Number]",K2e="[object RegExp]",V2e="[object Set]",G2e="[object String]",Y2e="[object Symbol]",Z2e="[object ArrayBuffer]",X2e="[object DataView]",M6=D6?D6.prototype:void 0,ZE=M6?M6.valueOf:void 0;function J2e(e,r,t,n,i,s,o){switch(t){case X2e:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Z2e:return!(e.byteLength!=r.byteLength||!s(new B6(e),new B6(r)));case z2e:case H2e:case q2e:return D2e(+e,+r);case U2e:return e.name==r.name&&e.message==r.message;case K2e:case G2e:return e==r+"";case W2e:var a=M2e;case V2e:var l=n&F2e;if(a||(a=L2e),e.size!=r.size&&!l)return!1;var u=o.get(e);if(u)return u==r;n|=j2e,o.set(e,r);var f=B2e(a(e),a(r),n,i,s,o);return o.delete(e),f;case Y2e:if(ZE)return ZE.call(e)==ZE.call(r)}return!1}var Q2e=J2e;function eEe(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var tEe=eEe,rEe=Array.isArray,GP=rEe,nEe=tEe,iEe=GP;function sEe(e,r,t){var n=r(e);return iEe(e)?n:nEe(n,t(e))}var oEe=sEe;function aEe(e,r){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var o=e[t];r(o,t,e)&&(s[i++]=o)}return s}var lEe=aEe;function uEe(){return[]}var cEe=uEe,fEe=lEe,hEe=cEe,dEe=Object.prototype,pEe=dEe.propertyIsEnumerable,L6=Object.getOwnPropertySymbols,vEe=L6?function(e){return e==null?[]:(e=Object(e),fEe(L6(e),function(r){return pEe.call(e,r)}))}:hEe,gEe=vEe;function yEe(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var mEe=yEe,bEe=Im,wEe=Am,$Ee="[object Arguments]";function _Ee(e){return wEe(e)&&bEe(e)==$Ee}var xEe=_Ee,F6=xEe,EEe=Am,vV=Object.prototype,SEe=vV.hasOwnProperty,kEe=vV.propertyIsEnumerable,TEe=F6(function(){return arguments}())?F6:function(e){return EEe(e)&&SEe.call(e,"callee")&&!kEe.call(e,"callee")},IEe=TEe,c$={exports:{}};function AEe(){return!1}var OEe=AEe;c$.exports;(function(e,r){var t=wl,n=OEe,i=r&&!r.nodeType&&r,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;e.exports=u})(c$,c$.exports);var gV=c$.exports,CEe=9007199254740991,PEe=/^(?:0|[1-9]\d*)$/;function NEe(e,r){var t=typeof e;return r=r??CEe,!!r&&(t=="number"||t!="symbol"&&PEe.test(e))&&e>-1&&e%1==0&&e<r}var REe=NEe,DEe=9007199254740991;function BEe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=DEe}var yV=BEe,MEe=Im,LEe=yV,FEe=Am,jEe="[object Arguments]",zEe="[object Array]",HEe="[object Boolean]",UEe="[object Date]",WEe="[object Error]",qEe="[object Function]",KEe="[object Map]",VEe="[object Number]",GEe="[object Object]",YEe="[object RegExp]",ZEe="[object Set]",XEe="[object String]",JEe="[object WeakMap]",QEe="[object ArrayBuffer]",eSe="[object DataView]",tSe="[object Float32Array]",rSe="[object Float64Array]",nSe="[object Int8Array]",iSe="[object Int16Array]",sSe="[object Int32Array]",oSe="[object Uint8Array]",aSe="[object Uint8ClampedArray]",lSe="[object Uint16Array]",uSe="[object Uint32Array]",en={};en[tSe]=en[rSe]=en[nSe]=en[iSe]=en[sSe]=en[oSe]=en[aSe]=en[lSe]=en[uSe]=!0;en[jEe]=en[zEe]=en[QEe]=en[HEe]=en[eSe]=en[UEe]=en[WEe]=en[qEe]=en[KEe]=en[VEe]=en[GEe]=en[YEe]=en[ZEe]=en[XEe]=en[JEe]=!1;function cSe(e){return FEe(e)&&LEe(e.length)&&!!en[MEe(e)]}var fSe=cSe;function hSe(e){return function(r){return e(r)}}var dSe=hSe,f$={exports:{}};f$.exports;(function(e,r){var t=uW,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(f$,f$.exports);var pSe=f$.exports,vSe=fSe,gSe=dSe,j6=pSe,z6=j6&&j6.isTypedArray,ySe=z6?gSe(z6):vSe,mV=ySe,mSe=mEe,bSe=IEe,wSe=GP,$Se=gV,_Se=REe,xSe=mV,ESe=Object.prototype,SSe=ESe.hasOwnProperty;function kSe(e,r){var t=wSe(e),n=!t&&bSe(e),i=!t&&!n&&$Se(e),s=!t&&!n&&!i&&xSe(e),o=t||n||i||s,a=o?mSe(e.length,String):[],l=a.length;for(var u in e)(r||SSe.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||_Se(u,l)))&&a.push(u);return a}var TSe=kSe,ISe=Object.prototype;function ASe(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||ISe;return e===t}var OSe=ASe;function CSe(e,r){return function(t){return e(r(t))}}var PSe=CSe,NSe=PSe,RSe=NSe(Object.keys,Object),DSe=RSe,BSe=OSe,MSe=DSe,LSe=Object.prototype,FSe=LSe.hasOwnProperty;function jSe(e){if(!BSe(e))return MSe(e);var r=[];for(var t in Object(e))FSe.call(e,t)&&t!="constructor"&&r.push(t);return r}var zSe=jSe,HSe=fV,USe=yV;function WSe(e){return e!=null&&USe(e.length)&&!HSe(e)}var qSe=WSe,KSe=TSe,VSe=zSe,GSe=qSe;function YSe(e){return GSe(e)?KSe(e):VSe(e)}var ZSe=YSe,XSe=oEe,JSe=gEe,QSe=ZSe;function eke(e){return XSe(e,QSe,JSe)}var tke=eke,H6=tke,rke=1,nke=Object.prototype,ike=nke.hasOwnProperty;function ske(e,r,t,n,i,s){var o=t&rke,a=H6(e),l=a.length,u=H6(r),f=u.length;if(l!=f&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in r:ike.call(r,d)))return!1}var y=s.get(e),w=s.get(r);if(y&&w)return y==r&&w==e;var b=!0;s.set(e,r),s.set(r,e);for(var T=o;++c<l;){d=a[c];var _=e[d],A=r[d];if(n)var x=o?n(A,_,d,r,e,s):n(_,A,d,e,r,s);if(!(x===void 0?_===A||i(_,A,t,n,s):x)){b=!1;break}T||(T=d=="constructor")}if(b&&!T){var I=e.constructor,O=r.constructor;I!=O&&"constructor"in e&&"constructor"in r&&!(typeof I=="function"&&I instanceof I&&typeof O=="function"&&O instanceof O)&&(b=!1)}return s.delete(e),s.delete(r),b}var oke=ske,ake=Sv,lke=wl,uke=ake(lke,"DataView"),cke=uke,fke=Sv,hke=wl,dke=fke(hke,"Promise"),pke=dke,vke=Sv,gke=wl,yke=vke(gke,"Set"),mke=yke,bke=Sv,wke=wl,$ke=bke(wke,"WeakMap"),_ke=$ke,tA=cke,rA=VP,nA=pke,iA=mke,sA=_ke,bV=Im,Av=hV,U6="[object Map]",xke="[object Object]",W6="[object Promise]",q6="[object Set]",K6="[object WeakMap]",V6="[object DataView]",Eke=Av(tA),Ske=Av(rA),kke=Av(nA),Tke=Av(iA),Ike=Av(sA),Cf=bV;(tA&&Cf(new tA(new ArrayBuffer(1)))!=V6||rA&&Cf(new rA)!=U6||nA&&Cf(nA.resolve())!=W6||iA&&Cf(new iA)!=q6||sA&&Cf(new sA)!=K6)&&(Cf=function(e){var r=bV(e),t=r==xke?e.constructor:void 0,n=t?Av(t):"";if(n)switch(n){case Eke:return V6;case Ske:return U6;case kke:return W6;case Tke:return q6;case Ike:return K6}return r});var Ake=Cf,XE=l2e,Oke=pV,Cke=Q2e,Pke=oke,G6=Ake,Y6=GP,Z6=gV,Nke=mV,Rke=1,X6="[object Arguments]",J6="[object Array]",t1="[object Object]",Dke=Object.prototype,Q6=Dke.hasOwnProperty;function Bke(e,r,t,n,i,s){var o=Y6(e),a=Y6(r),l=o?J6:G6(e),u=a?J6:G6(r);l=l==X6?t1:l,u=u==X6?t1:u;var f=l==t1,c=u==t1,d=l==u;if(d&&Z6(e)){if(!Z6(r))return!1;o=!0,f=!1}if(d&&!f)return s||(s=new XE),o||Nke(e)?Oke(e,r,t,n,i,s):Cke(e,r,l,t,n,i,s);if(!(t&Rke)){var y=f&&Q6.call(e,"__wrapped__"),w=c&&Q6.call(r,"__wrapped__");if(y||w){var b=y?e.value():e,T=w?r.value():r;return s||(s=new XE),i(b,T,t,n,s)}}return d?(s||(s=new XE),Pke(e,r,t,n,i,s)):!1}var Mke=Bke,Lke=Mke,e8=Am;function wV(e,r,t,n,i){return e===r?!0:e==null||r==null||!e8(e)&&!e8(r)?e!==e&&r!==r:Lke(e,r,t,n,wV,i)}var Fke=wV,jke=Fke;function zke(e,r){return jke(e,r)}var Hke=zke;const $V=io(Hke);function Uke(e){const r=de.getPubKey(),t=de.toNostrHexAddress(e.pub);if(t===r)return v("span",{class:"mx-2 text-iris-blue tooltip","data-tip":he("you"),children:to.checkmark});if(!t)return null;if(tt.isFollowing(r,t))return v("span",{class:"ml-2 text-iris-blue tooltip","data-tip":he("following"),children:to.checkmark});{const i=tt.followedByFriendsCount(t);if(i>0){const s=i>10?"text-iris-orange":"";return v("span",{class:`${s} tooltip ml-2`,"data-tip":`${i} ${he("friends_following")}`,children:to.checkmark})}else return null}}new TextDecoder("utf-8");const Wke=new TextEncoder;function qke(e){let r=T_(Wke.encode(e));return rI(r)}function Kke(e=Date.now()){return Math.floor(e/1e3)}const pa=2;class oA{constructor(){ce(this,"trusts",Array(pa+1).fill(0));ce(this,"distrusts",Array(pa+1).fill(0))}addValue(r,t){r>0&&this.trusts[t]++,r<0&&this.distrusts[t]++}count(r){return this.trusts[r]+this.distrusts[r]}value(r){return this.trusts[r]-this.distrusts[r]}values(){let r=Array(pa+1).fill(0);for(let t=0;t<=pa;t++)r[t]=this.value(t);return r}isDirectTrusted(){return this.isTrusted(0)}isTrusted(r){return this.value(r)>0}isDirectDistrusted(){return this.isDistrusted(0)}isDistrusted(r){return this.value(r)<0}resolve(){let r={val:0,degree:0,count:0,hasScore:!1},t=0;for(;t<=pa;t++)if(!(this.trusts[t]==0&&this.distrusts[t]==0)&&(r.hasScore=!0,this.value(t)!=0)){r.val=this.value(t);break}return r.count=this.count(t),r.degree=t,r}clone(){const r=Object.create(Object.getPrototypeOf(this));return r.trusts=this.trusts.slice(),r.distrusts=this.distrusts.slice(),r}equals(r){for(let t=0;t<=pa;t++)if(this.trusts[t]!=r.trusts[t]||this.distrusts[t]!=r.distrusts[t])return!1;return!0}hasTrustScore(){return this.trusts.some(r=>r>0)}hasDistrustScore(){return this.distrusts.some(r=>r>0)}renderTrustCount(r=!1){return!this.hasTrustScore()&&!r?"":this.trusts.join("/")}renderDistrustCount(r=!1){return!this.hasDistrustScore()&&!r?"":this.distrusts.join("/")}}var iu=(e=>(e[e.Key=1]="Key",e[e.Item=2]="Item",e[e.Unknown=3]="Unknown",e))(iu||{});const aA=99;class Vke{constructor(r){ce(this,"id",0);ce(this,"out",Object.create(null));ce(this,"in",Object.create(null));ce(this,"degree",aA);ce(this,"entityType",1);ce(this,"timestamp",0);ce(this,"subscribed",0);ce(this,"score",new oA);ce(this,"profile");this.id=r}}let _V=class{constructor(){ce(this,"key","");ce(this,"type",1);ce(this,"val");ce(this,"entityType",1);ce(this,"context","");ce(this,"note","");ce(this,"timestamp",0)}},xV=class EV extends _V{constructor(){super(...arguments);ce(this,"out");ce(this,"in");ce(this,"partial",!0)}static partialFrom(t){let n=new EV;return n.key=t.key,n.type=t.type,n.val=t.val,n.timestamp=t.timestamp,n}static key(t,n,i,s){let o=`${t}|${n}|${i}|${s}`;return qke(o)}fill(t){this.val=t.val,this.context=t.context,this.note=t.note,this.timestamp=t.timestamp,this.partial=!1}};class Gke extends _V{constructor(){super(...arguments);ce(this,"from","");ce(this,"to","")}}class Yke{constructor(){ce(this,"vertices",{});ce(this,"edges",{})}addVertice(r){return this.vertices[r]||(this.vertices[r]=new Vke(r))}addEdge(r,t=!1){let n=this.edges[r.key];return n||(n=xV.partialFrom(r),this.edges[r.key]=n,n.out=this.addVertice(vt(r.from)),n.in=this.addVertice(vt(r.to)),n.out.out[n.in.id]=n,n.in.in[n.out.id]=n),t?n.fill(r):(n.val=r.val,n.timestamp=r.timestamp),n}removeEdge(r){const t=r.out,n=r.in;t&&delete t.out[n.id],n&&delete n.in[t.id],delete this.edges[r.key]}getVertice(r){const t=this.getVerticeId(r);if(t!=null)return this.vertices[t]}getEdge(r){return this.edges[r]}getVerticeId(r){return r?vt(r):void 0}calculateScore(r,t){let n=[],i=Object.create(null),s=this.vertices[r];if(!s)return;this.resetScore();let o=s.degree=0;for(n.push(s);n.length>0&&o<=t;){for(let a of n){if(o>0&&!a.score.isTrusted(o-1))continue;let l=o+1;for(const u in a.out){const f=this.vertices[u],c=a.out[u];!c||c.val===0||(f.score.addValue(c.val,o),!(o>=f.degree)&&(f.degree=l,f.entityType=c.entityType,o<t&&f.entityType===1&&!i[u]&&(i[u]=f)))}}n=Object.values(i),i=Object.create(null),o++}}calculateItemScore(r){let t=this.vertices[r];t.score=new oA;let n=aA;for(const i in t.in){const s=this.vertices[i],o=t.in[i];!o||o.val==0||(s.degree<n&&(n=s.degree),t.score.addValue(o.val,s.degree))}t.degree=n+1}resetScore(){for(let r in this.vertices){const t=this.vertices[r];t.score=new oA,t.degree=aA}}wotNetwork(r,t=pa+1){let n=[];for(const i in this.vertices){const s=this.vertices[i];s.degree<=t&&s.degree>0&&(!r||s.entityType===r)&&n.push(s)}return n}inOutTrustById(r,t,n){const i=this.vertices[r];if(!i)return[];let s=Object.create(null);for(const o in i.in){const a=this.vertices[o];if(!a||a.degree>pa)continue;const l=i.in[o];!l||l.val==0||n&&l.val!=n||(s[o]=a)}for(const o in i.out){const a=i.out[o];if(!a||a.val==0||n&&a.val!=n)continue;const l=this.vertices[o];(!t||l.entityType===t)&&(s[o]=l)}return Object.values(s)}outTrustById(r,t,n){let i=[];const s=this.vertices[r];for(const o in s.out){const a=this.vertices[o],l=s.out[o];!l||l.val==0||n&&l.val!=n||(!t||a.entityType===t)&&i.push(a)}return i}trustedBy(r,t,n,i=pa){let s=[];const o=this.vertices[r];for(const a in o.in){const l=this.vertices[a];if(!l||l.degree>i)continue;const u=o.in[a];!u||u.val==0||n&&u.val!=n||(!t||l.entityType===t)&&s.push(l)}return s}getPaths(r){let t=[];const n=this.vertices[r];if(!n)return t;let i=[],s=[];for(i.push(n);i.length>0;){for(let o of i)if(o.degree!=0)for(const a in o.in){const l=o.in[a];if(!l||l.val===0)continue;const u=l.out;!u||u.degree>=o.degree||(t.push(l),s.push(u))}i=s,s=[]}return t}getUnsubscribedVertices(r){let t=new Array;for(const n in this.vertices){const i=this.vertices[n];i.degree<=r&&i.subscribed==0&&i.entityType==1&&(i.degree==0||i.score.isTrusted(i.degree-1))&&t.push(i)}return t}}const t8=32010,Zke={PubSub:Bt,unsubs:new Map,subscribeTrust(e,r,t){let n=on.enabledRelays(),i={kinds:[t8],authors:e,since:r};return Bt.relayPool.subscribe([i],n,(o,a,l)=>{setTimeout(()=>{t(o,a,l)},0)},0,void 0,{})},async publishTrust(e,r,t,n,i,s){let o=de.toNostrBech32Address(e,"npub");const a=`${o}|nostr`,l={kind:t8,content:t||"",created_at:s||this.getTimestamp(),tags:[["p",o],["d",a],["c",n||"nostr"],["v",r.toString()],["t",i.toString()]]};await this.sign(l),Bt.publish(l)},async sign(e){if(e.sig||await Me.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event")},getTimestamp(e=Date.now()){return Math.floor(e/1e3)},loadProfiles(e){let r=e.filter(n=>!tt.profiles.has(vt(n))),t=n=>{if(!n.content||tt.profiles.get(vt(n.pubkey)))return;let s=JSON.parse(n.content);tt.profiles.set(vt(n.pubkey),s)};return Bt.subscribe({kinds:[0],authors:r},t,!1)}};class Y_{constructor(r){ce(this,"id",0);ce(this,"oldScore");ce(this,"oldDegree",0);ce(this,"counter",0);this.id=r}hasChanged(r){return!this.oldScore||!this.oldScore.equals(r.score)||this.oldDegree!=r.degree}clone(){var t;let r=new Y_(this.id);return r.oldScore=(t=this.oldScore)==null?void 0:t.clone(),r.oldDegree=this.oldDegree,r.counter=this.counter,r}setScore(r){this.oldScore=r==null?void 0:r.score.clone(),this.oldDegree=(r==null?void 0:r.degree)||0}}const Xke="trustScoreEvent";class Yy extends CustomEvent{constructor(r,t){super(Yy.getEventId(r),{detail:t})}static getEventId(r){return Xke+r}}const Jke="trust1";class Qke{constructor(r,t){ce(this,"db");ce(this,"localDataLoaded",!1);ce(this,"g",new Yke);ce(this,"sourceKey");ce(this,"sourceId",-1);ce(this,"wotPubSub");ce(this,"unsubs",{});ce(this,"subscriptionsCounter",0);ce(this,"verticeMonitor",Object.create(null));ce(this,"maxDegree",pa);ce(this,"readyCallbacks",[]);ce(this,"processItems",{});ce(this,"processGraph",!1);ce(this,"processScoreDebounce",wn.debounce(this.processScore,1e3,{trailing:!0}));ce(this,"submitTrustIndex",{});ce(this,"profilesLoaded",!1);this.wotPubSub=r,this.db=t}async init(r){if(this.sourceKey=r,!this.localDataLoaded){this.sourceId=vt(this.sourceKey),this.g.addVertice(this.sourceId),await this.db.edges.each(t=>{this.g.addEdge(t,!1)}),console.info("Graph: "+Object.entries(this.g.vertices).length+" vertices and "+Object.entries(this.g.edges).length+" edges"),this.processGraph=!0,this.processScore(),this.localDataLoaded=!0;for(let t of this.readyCallbacks)t();this.readyCallbacks=[]}}whenReady(r){this.localDataLoaded?r():this.readyCallbacks.push(r)}async publishTrust(r,t=0,n=iu.Key,i,s="nostr"){var y;const o=(y=this.wotPubSub)==null?void 0:y.getTimestamp(),a={from:this.sourceKey,to:r,val:t,entityType:n,context:s,note:i,timestamp:o},{outV:l,inV:u,preVal:f}=await this.setTrust(a,!1);this.addToProcessScoreQueue(l,u),this.processScore();let c=Jke+this.sourceKey+r+s,d=this.submitTrustIndex[c];d||(d=wn.debounce(async w=>{var b;f!=w&&(await((b=rr.wotPubSub)==null?void 0:b.publishTrust(r,w,i,s,n,o)),delete this.submitTrustIndex[c])},3e3),this.submitTrustIndex[c]=d),d(t)}addToProcessScoreQueue(r,t){r.degree>this.maxDegree||(r.degree==this.maxDegree?this.processItems[t.id]=!0:t.entityType==iu.Key?t.degree==this.maxDegree?this.processGraph=!0:this.processGraph=!0:this.processItems[t.id]=!0)}processScore(){let r=this.processGraph;if(this.processGraph)rr.g.calculateScore(rr.sourceId,this.maxDegree);else for(const t in rr.processItems)rr.g.calculateItemScore(parseInt(t)),r=!0;if(r){for(const t in rr.verticeMonitor)rr.callMonitor(parseInt(t));this.processGraph&&rr.updateSubscriptions(),this.processGraph=!1,this.processItems={}}}callMonitor(r){let t=rr.verticeMonitor[r];if(!t)return;let n=this.g.vertices[r];if(!n||!t.hasChanged(n))return;let i=t.clone();t.setScore(n),document.dispatchEvent(new Yy(r,i))}addVerticeMonitor(r){let t=this.verticeMonitor[r];t||(t=new Y_(r),this.verticeMonitor[r]=t),t.counter++}removeVerticeMonitor(r){let t=this.verticeMonitor[r];t&&(t.counter--,t.counter<=0&&delete this.verticeMonitor[r])}updateSubscriptions(){let r=this.g.getUnsubscribedVertices(this.maxDegree);this.subscribeToTrustEvents(r)}async setTrust(r,t){let{edge:n,preVal:i,change:s}=await this.putEdge(r,t),o=n.out,a=n.in;return{outV:o,inV:a,edge:n,preVal:i,change:s}}async putEdge(r,t){let{from:n,to:i,val:s,entityType:o,context:a,note:l,timestamp:u}=r,f=1,c,d=!1,y=xV.key(f,n,i,a),w=this.g.edges[y];if(w){if(c=w.val,w.timestamp<u||w.val!=s&&w.timestamp==u){let b={timestamp:0};w.val!=s&&(w.val=b.val=s),w.context!=a&&(w.context=b.context=a),w.note!=l&&(w.note=b.note=l),w.timestamp=b.timestamp=u,w.val==0&&t?(await this.db.edges.delete(y),this.g.removeEdge(w),w=void 0):await this.db.edges.update(y,b),d=!0}}else{if(s==0&&t)return{edge:w,preVal:c,change:d};let b=new Gke;b.type=f,b.key=y,b.from=n,b.to=i,b.val=s,b.entityType=o,b.context=a,b.note=l,b.timestamp=u,await this.db.edges.put(b),w=this.g.addEdge(b,!1),d=!0}return{edge:w,preVal:c,change:d}}subscribeToTrustEvents(r){if(r.length==0)return;let t=this,n=this.subscriptionsCounter++,i=0;const s=new Array;for(let o of r)i<o.timestamp&&(i=o.timestamp),s.push(Gp(o.id));r.forEach(o=>o.subscribed=n),setTimeout(()=>{var o;console.time("Subscribing to trust events"),t.unsubs[n]=(o=t.wotPubSub)==null?void 0:o.subscribeTrust(s,i,t.trustEvent),console.timeEnd("Subscribing to trust events")},1)}unsubscribeAll(){var r,t;for(let n in this.unsubs)(t=(r=this.unsubs)[n])==null||t.call(r)}async trustEvent(r){let t,n,i,s,o,a,l=r.pubkey;if(r.tags)for(const u of r.tags)switch(u[0]){case"p":t=u[1];break;case"c":n=u[1];break;case"d":i=u[1];break;case"v":s=u[1];break;case"t":o=u[1];break}if(a=r.content,t&&i&&s){let u=parseInt(s);if(isNaN(u)||u<-1||u>1)return;console.info(`Trust Event: ${l} -> ${t} = ${u} (${a})`);let f=o?parseInt(o):iu.Item,c=de.toNostrHexAddress(l),d=de.toNostrHexAddress(t),{outV:y,inV:w,change:b}=await rr.setTrust({from:c,to:d,val:u,note:a,context:n,entityType:f,timestamp:r.created_at},!0);b&&(rr.addToProcessScoreQueue(y,w),rr.processScoreDebounce())}}findOption(r,t){if(!t||t.length===0||r.degree==0)return;let n=r.score,{val:i,degree:s,count:o,hasScore:a}=n.resolve();if(!a)return;if(s===1)return i>0?t[t.length-1]:i<0?t[0]:void 0;let l=(i+o)*100/(o*2),u=Math.ceil(l/(100/t.length));return u=u===0?1:u>t.length?t.length:u,t[u-1]}getTrustList(r,t){if(!r)return[];let n=new Array;for(const i in r.in){const s=this.g.getEdge(r.in[i]);let o=this.g.vertices[i];o&&s.val==t&&n.push({outV:o,edge:s})}return n}}const rr=new Qke(Zke,Zg),Z_=(e,r,t)=>{const[n,i]=Le({id:e,options:r,option:t});return St(()=>{if(!e)return;let s=Yy.getEventId(e);function o(u){let f=rr.g.vertices[u.id];if(!f)return;let c=rr.findOption(f,r);i(d=>({...d,...u,option:c,vertice:f}))}const a=u=>{let f=u.detail;f.id==e&&o(f)};rr.addVerticeMonitor(e),document.addEventListener(s,a);let l=new Yy(e,new Y_(e));return l!=null&&l.detail&&o(l.detail),()=>{rr.removeVerticeMonitor(e),document.removeEventListener(s,a)}},[e]),n},eTe=e=>{const r=e.hexKey||de.toNostrHexAddress(e.pub)||"",[t,n]=Le(()=>Wi.quickProfile(r)),i=Z_(vt(r),["badName","neutralName","goodName"],"");return St(()=>Wi.getProfile(r,s=>{n(s)}),[e.pub,e.hexKey]),v(ut,{children:[v("span",{className:(t.isDefault?"text-neutral-500":"")+" "+(i==null?void 0:i.option),children:t.name||t.displayName||e.placeholder}),e.hideBadge?"":v(Uke,{pub:e.pub,hexKey:r})]})},Er=gi(eTe),tTe=5;class YP extends $n{constructor(){super();ce(this,"searchFromServer",wn.debounce(t=>{fetch(`https://eu.rbr.bio/search/${t}.json`).then(n=>{n.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{Me.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(t){if(t.keyCode===38||t.keyCode===40){t.preventDefault();const n=this.state.selected;let i=t.keyCode===40?n+1:n-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){Jt(this.base).find("input").val(""),this.setState({results:[],query:""})}componentDidMount(){var t;Ne.get("showFollowSuggestions").on(this.inject()),Ne.get("searchIndexUpdated").on(this.sub(()=>this.search())),Ne.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),Jt(document).off("keydown").on("keydown",n=>{var i;n.key==="Tab"&&((i=document.activeElement)==null?void 0:i.tagName)==="BODY"?(n.preventDefault(),Jt(this.base).find("input").focus()):n.key==="Escape"&&(this.close(),Jt(this.base).find("input").blur())}),this.props.focus&&((t=Jt(this.base).find("input"))==null||t.focus())}componentDidUpdate(t,n){this.adjustResultsPosition(),t.focus!==this.props.focus&&Jt(this.base).find("input:visible").focus(),t.query!==this.props.query&&this.search(),this.state.selected>=0&&!$V(this.state.results.slice(0,this.state.selected+1),n.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){Jt(document).off("keyup")}adjustResultsPosition(){const t=Jt(this.base).find("input");t.length&&this.setState({offsetLeft:t[0].offsetLeft})}onSubmit(t){t.preventDefault();const n=Jt(this.base).find("input");n.val(""),n.trigger("blur");const i=Jt(this.base).find(".result.selected");i.length&&i[0].click()}preventUpDownDefault(t){(t.keyCode===38||t.keyCode===40)&&t.preventDefault()}search(){let t=this.props.query||Jt(this.base).find("input").first().val()||"";if(t=t.toString().trim().toLowerCase(),!t){this.close();return}if(t.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){Jt(this.base).find("input").first().val("");return}if(this.props.onSelect){if(t.match(/.+@.+\..+/)&&de.getPubKeyByNip05Address(t).then(o=>{var a,l;o&&t===String(this.props.query||Jt(this.base).find("input").first().val())&&((l=(a=this.props).onSelect)==null||l.call(a,{key:o}))}),t.startsWith("https://iris.to/")){const o=t.replace("https://iris.to","");_r(o);return}const n=t.match(/note[a-zA-Z0-9]{59,60}/gi);if(n){_r("/"+n[0]);return}const i=t.match(/npub[a-zA-Z0-9]{59,60}/gi);if(i){_r("/"+i[0]);return}const s=t.split("/profile/");if(s.length>1)return this.props.onSelect({key:s[1]});if(de.toNostrHexAddress(t))return this.props.onSelect({key:t})}if(this.searchFromServer(t),t){const n=OK.search(t).slice(0,tTe);this.setState({results:n,query:t})}else this.setState({results:[],query:t})}onClick(t,n){this.props.onSelect&&(t.preventDefault(),t.stopPropagation(),this.props.onSelect(n)),this.close()}onResultFocus(t,n){this.setState({selected:n})}render(){return v("div",{className:`relative ${this.props.class}`,children:[this.props.resultsOnly?"":v("form",{onSubmit:t=>this.onSubmit(t),children:v("label",{children:v("input",{type:"text",onKeyPress:t=>this.preventUpDownDefault(t),onKeyDown:t=>this.preventUpDownDefault(t),onKeyUp:t=>this.onKeyUp(t),placeholder:he("search"),tabIndex:1,onInput:()=>this.onInput(),className:"input-bordered border-neutral-500 input input-sm w-full"})})}),v("div",{onKeyUp:t=>this.onKeyUp(t),className:`${this.state.query?"":"hidden"} absolute z-20 left-0 mt-2 w-full bg-black border border-neutral-700 rounded shadow-lg`,children:[this.state.query&&!this.props.resultsOnly?v("a",{onFocus:t=>this.onResultFocus(t,-1),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(this.state.selected===-1?"selected bg-neutral-700":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[v("div",{class:"avatar-container",children:v("div",{style:"font-size: 1.5em; width: 40px",children:""})}),v("div",{children:[v("span",{children:this.state.query}),v("br",{}),v("small",{children:he("search_posts")})]})]}):"",this.state.results.map((t,n)=>{const i=t.item;let s="";i.followers&&(i.followDistance===0?s=he("you"):i.followDistance===1?s=he("following"):s=`${i.followers.size} ${he("followers")}`);const o=de.toNostrBech32Address(i.key,"npub");return v("a",{onFocus:a=>this.onResultFocus(a,n),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(n===this.state.selected?"selected bg-neutral-700":""),href:`/${o}`,onClick:a=>this.onClick(a,i),children:[i.picture?v(mu,{src:i.picture,className:"rounded-full",width:40}):v(hs,{str:o,width:40},`${o}ic`),v("div",{children:[v(Er,{pub:i.key},i.key+"searchResult"),v("br",{}),v("small",{children:s})]})]})})]})]})}}const ZP=(e,r)=>r.indexOf(e.name.slice(-4))!==-1,JE=e=>ZP(e,["webm",".mp4",".ogg"]),QE=e=>ZP(e,[".mp3",".wav",".m4a"]),r8=e=>ZP(e,[".jpg","jpeg",".gif",".png"]);class Mm extends $n{constructor(){super(...arguments);ce(this,"coverRef",wm());ce(this,"state",{settings:{},player:{},activeFilePath:"",torrent:{},isAudioOpen:!1,showFiles:!1,torrenting:!1,hasNext:!1,splitPath:null,ogImageUrl:""});ce(this,"player");ce(this,"torrent");ce(this,"observer")}componentDidMount(){console.log("componentDidMount torrent"),Ne.get("player").on(this.sub(n=>{if(this.player=n,this.setState({player:n}),this.torrent&&this.player&&this.player.filePath!==this.state.activeFilePath){const i=this.getActiveFile(this.torrent);i&&this.openFile(i)}}));const t=this.props.showFiles;t&&this.setState({showFiles:t}),Ne.get("settings").on(this.inject()),(async()=>(this.props.standalone||await Ne.get("settings").get("enableWebtorrent").once())&&this.startTorrenting())()}componentWillUnmount(){super.componentWillUnmount(),this.observer&&this.observer.disconnect(),delete this.observer}onPlay(t){t.target.muted||Ne.get("player").get("paused").put(!0)}async startTorrenting(t){this.setState({torrenting:!0});const n=this.props.torrentId,{default:i}=await $r(()=>import("./index-6b25311b.js").then(a=>a.i),[]),s=new i,o=s.get(n);o?this.onTorrent(o,t):s.add(n,(a,l)=>l&&!a&&this.onTorrent(l,t))}playAudio(t,n){n&&n.preventDefault(),Ne.get("player").put({torrentId:this.props.torrentId,filePath:t,paused:!1})}pauseAudio(t){t&&t.preventDefault(),Ne.get("player").put({paused:!0})}openFile(t,n){const i=this.base,s=JE(t),o=!s&&QE(t);if(this.state.activeFilePath===t.path){if(s){const y=i.querySelector("video");y&&y.play()}else o&&Ne.get("player").get("paused").put(!1);return}let a;s||(a=t.path.split("/")),this.setState({activeFilePath:t.path,splitPath:a,isAudioOpen:o});let l,u;n?(l=!0,u=!1):(l=s&&this.state.settings.autoplayVideos,u=l);const f=i==null?void 0:i.querySelector(".player");if(f&&(f.innerHTML=""),o&&n&&this.playAudio(t.path),o||t.appendTo(f,{autoplay:l,muted:u}),s&&this.props.autopause){const y=i.querySelector("video"),w=T=>{T.forEach(_=>{_.isIntersecting?l&&(y==null||y.play()):y==null||y.pause()})},b={rootMargin:"0px",threshold:[.25,.75]};this.observer=new IntersectionObserver(w,b),this.observer.observe(y)}const c=i.querySelector(".info");c&&(c.style.display=s?"none":"block");const d=i.querySelector("video, audio");d&&(d.addEventListener("ended",()=>{const y=d.tagName==="VIDEO"?JE:QE;this.openNextFile(y)}),d.onplay=d.onvolumechange=this.onPlay)}getNextIndex(t){const n=this.state.torrent.files,i=n.findIndex(o=>o.path===this.state.activeFilePath);let s=n.findIndex((o,a)=>a>i&&t(o));return s===-1&&(s=n.findIndex(o=>t(o))),s===-1&&(s=i),s}openNextFile(t){const n=this.getNextIndex(t);this.openFile(this.state.torrent.files[n],!0)}getActiveFile(t){const n=this.player;let i;return n&&n.torrentId===this.props.torrentId&&(i=t.files.find(s=>s.path===n.filePath)),i}onTorrent(t,n){if(console.log("onTorrent",this.props.torrentId,t),!this.coverRef.current)return;this.torrent=t;const i=setInterval(()=>{if(!t.files){console.log("no files found in torrent:",t);return}clearInterval(i);const s=t.files.find(f=>JE(f)),o=t.files.find(f=>QE(f)),a=t.files.find(f=>r8(f)),l=this.getActiveFile(t)||s||o||a||t.files[0];this.setState({torrent:t,cover:a}),l&&this.openFile(l,n);let u=t.files.find(f=>r8(f)&&(f.name.indexOf("cover")>-1||f.name.indexOf("poster")>-1));u=u||a,u&&u.appendTo(this.coverRef.current)},1e3)}showFilesClicked(t){t.preventDefault(),this.setState({showFiles:!this.state.showFiles})}openTorrentClicked(t){t.preventDefault(),this.startTorrenting(!0)}renderLoadingTorrent(){const t=this.state,n=t.torrent,i=t.player,s=i&&i.torrentId===this.props.torrentId&&!i.paused;let o="";return t.isAudioOpen&&(o=s?v("a",{href:"#",onClick:a=>this.pauseAudio(a),children:to.pause}):v("a",{href:"#",onClick:a=>this.playAudio(t.activeFilePath,a),children:to.play})),v(ut,{children:[t.torrenting&&!t.torrent?v("p",{children:"Loading attachment..."}):null,v("div",{className:"cover",ref:this.coverRef,style:t.isAudioOpen?{}:{display:"none"}}),v("div",{className:"info",children:t.splitPath?t.splitPath.map((a,l)=>l===t.splitPath.length-1?(t.isAudioOpen&&(a=a.split(".").slice(0,-1).join(".")),v("p",{children:v("b",{children:a})})):v("p",{children:a})):null}),t.hasNext?v("b",{children:"prev"}):null,v("div",{className:"player",children:o}),t.hasNext?v("b",{children:"next"}):null,this.props.standalone||this.props.preview?v(ut,{children:[v("a",{href:this.props.torrentId,children:"Magnet link"}),n&&n.files?v("a",{href:"",style:{marginLeft:"30px"},onClick:a=>this.showFilesClicked(a),children:he(t.showFiles?"hide_files":"show_files")}):null]}):v(Qt,{href:`/torrent/${encodeURIComponent(this.props.torrentId)}`,children:he("show_files")}),t.showFiles&&n&&n.files?v(ut,{children:[v("p",{children:[he("peers"),": ",n.numPeers]}),v("div",{className:"flex-table details",children:n.files.map(a=>v("div",{onClick:()=>this.openFile(a,!0),className:`flex-row ${t.activeFilePath===a.path?"active":""}`,children:[v("div",{className:"flex-cell",children:a.name}),v("div",{className:"flex-cell no-flex",children:hr.formatBytes(a.length)})]},a.path))})]}):null]})}renderMeta(){const t=this.state,n=t.splitPath&&t.splitPath[t.splitPath.length-1].split(".").slice(0,-1).join(".")||"File sharing",i=`${n} | Iris`,s="Shared files",o=t.isAudioOpen?"music:song":"video.movie";return v(Eh,{children:[v("title",{children:n}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:o}),v("meta",{property:"og:title",content:i}),v("meta",{property:"og:description",content:s}),t.ogImageUrl?v("meta",{property:"og:image",content:t.ogImageUrl}):null]})}render(){return v("div",{className:"torrent",children:[this.props.standalone?this.renderMeta():null,!this.state.settings.enableWebtorrent&&!this.state.settings.torrenting&&!this.props.standalone?v("a",{href:"",onClick:t=>this.openTorrentClicked(t),children:he("show_attachment")}):this.renderLoadingTorrent()]})}}const n8=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/;class X_ extends $n{constructor(){super(...arguments);ce(this,"newMsgRef",wm())}componentDidMount(){const t=Jt(this.newMsgRef.current);if((!hr.isMobile||this.props.forceAutofocusMobile==!0)&&this.props.autofocus!==!1&&t.focus(),!this.props.replyingTo)Ne.get("channels").get("public").get("msgDraft").once(n=>!t.val()&&t.val(n));else{const n=window.history.state;n&&n["replyTo"+this.props.replyingTo]&&t.val(n["replyTo"+this.props.replyingTo])}}onMsgFormSubmit(t){t.preventDefault(),this.submit()}async submit(){this.props.replyingTo||Ne.get("channels").get("public").get("msgDraft").put(null);const t=Jt(this.newMsgRef.current),n=t.val();if(!n.length)return;const i={text:n};this.props.replyingTo&&(i.replyingTo=this.props.replyingTo),this.state.attachments&&(i.attachments=this.state.attachments),await this.sendNostr(i),this.props.onSubmit&&this.props.onSubmit(i),this.setState({attachments:void 0,torrentId:void 0}),t.val(""),t.height(""),this.saveDraftToHistory()}setTextareaHeight(t){t.style.height="",t.style.height=`${t.scrollHeight}px`}onMsgTextPaste(t){const n=(t.clipboardData||window.clipboardData).getData("text"),s=/(magnet:\?xt=urn:btih:.*)/gi.exec(n);console.log("magnet match",s),s&&this.setState({torrentId:s[0]})}onKeyUp(t){[37,38,39,40].indexOf(t.keyCode)!=-1&&this.checkMention(t)}onKeyDown(t){(t.metaKey||t.ctrlKey)&&t.key==="Enter"&&this.submit()}saveDraftToHistory(){const t=Jt(this.newMsgRef.current).val(),i={...window.history.state};i["replyTo"+this.props.replyingTo]=t,window.history.replaceState(i,"")}onMsgTextInput(t){this.setTextareaHeight(t.target),this.props.replyingTo||Ne.get("channels").get("public").get("msgDraft").put(Jt(t.target).val()),this.checkMention(t),this.saveDraftToHistory()}attachFileClicked(t){t.stopPropagation(),t.preventDefault(),Jt(this.base).find(".attachment-input").click()}attachmentsChanged(t){const n=t.target.files||t.dataTransfer.files;if(n){for(let i=0;i<n.length;i++){const s=new FormData;s.append("fileToUpload",n[i]);const o=this.state.attachments||[];o[i]=o[i]||{type:n[i].type},hr.getBase64(n[i]).then(a=>{o[i].data=a,this.setState({attachments:o})}),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:s}).then(async a=>{const l=await a.json();if(console.log("upload response",l),l){o[i].url=l,this.setState({attachments:o});const u=Jt(this.newMsgRef.current),f=u.val();f?u.val(f+`

`+l):u.val(l)}}).catch(a=>{console.error("upload error",a),o[i].error="upload failed",this.setState({attachments:o})})}Jt(t.target).val(null),Jt(this.newMsgRef.current).focus()}}onSelectMention(t){const n=Jt(this.base).find("textarea").get(0),i=n.selectionStart,s=[n.value.slice(0,i).replace(n8,"nostr:"),t.key,n.value.slice(i)].join("");n.value=`${s} `,n.focus(),n.selectionStart=n.selectionEnd=i+t.key.length}render(){const t=this.props.placeholder||(this.props.index==="media"?"type_a_message_or_paste_a_magnet_link":"type_a_message");return Co`<form
      autocomplete="off"
      class="message-form ${this.props.class||""} public"
      onSubmit=${n=>this.onMsgFormSubmit(n)}
    >
      <input
        name="attachment-input"
        type="file"
        class="hidden attachment-input"
        accept="image/*, video/*, audio/*"
        multiple
        onChange=${n=>this.attachmentsChanged(n)}
      />
      <textarea
        onDragOver=${n=>{n.preventDefault(),n.stopPropagation()}}
        onDrop=${n=>{n.preventDefault(),n.stopPropagation(),this.attachmentsChanged(n)}}
        onKeyUp=${n=>this.onKeyUp(n)}
        onKeyDown=${n=>this.onKeyDown(n)}
        onPaste=${n=>this.onMsgTextPaste(n)}
        onInput=${n=>this.onMsgTextInput(n)}
        onFocus=${()=>this.setState({focused:!0})}
        ref=${this.newMsgRef}
        className="p-2 mt-1 w-full h-12 bg-black focus:ring-blue-500 focus:border-blue-500 block w-full text-lg border-gray-700 rounded-md text-white"
        type="text"
        placeholder="${he(t)}"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="sentences"
        spellcheck="off"
      />
      ${this.state.mentioning?Co`
            <${YP}
              resultsOnly=${!0}
              query=${this.state.mentioning}
              onSelect=${n=>this.onSelectMention(n)}
            />
          `:""}
      ${this.props.waitForFocus&&!this.state.focused?"":Co`
            <div className="flex items-center justify-between mt-4">
              <button
                type="button"
                class="attach-file-btn btn"
                onClick=${n=>this.attachFileClicked(n)}
              >
                ${to.attach}
              </button>
              <button type="submit" className="btn btn-primary">${he("post")}</button>
            </div>
          `}

      <div class="attachment-preview">
        ${this.state.torrentId?Co` <${Mm} preview=${!0} torrentId=${this.state.torrentId} /> `:""}
        ${this.state.attachments&&this.state.attachments.length?Co`
              <p>
                <a
                  href=""
                  onClick=${n=>{n.preventDefault(),this.setState({attachments:void 0})}}
                  >${he("remove_attachment")}</a
                >
              </p>
            `:""}
        ${this.state.attachments&&this.state.attachments.map(n=>{var s,o,a;const i=Co` ${n.error?Co`<span class="error">${n.error}</span>`:n.url||"uploading..."}`;return(s=n.type)!=null&&s.startsWith("audio")?Co`
              ${i}
              <audio controls>
                <source src=${n.data} />
              </audio>
            `:(o=n.type)!=null&&o.startsWith("video")?Co`
              ${i}
              <video controls loop=${!0} autoplay=${!0} muted=${!0}>
                <source src=${n.data} />
              </video>
            `:(a=n.type)!=null&&a.startsWith("image")?Co`${i} <${mu} src=${n.data} /> `:"unknown attachment type"})}
      </div>
    </form>`}async sendNostr(t){var o,a,l,u;const n={kind:1,content:t.text};if(t.replyingTo){const f=de.toNostrHexAddress(t.replyingTo);if(!f)throw new Error("invalid replyingTo");const c=await new Promise(y=>{Me.getEventById(f,!0,w=>y(w))});n.tags=c.tags.filter(y=>y[0]==="p");let d=(o=c.tags)==null?void 0:o.find(y=>y[0]==="e"&&y[3]==="root");d||(d=(a=c.tags)==null?void 0:a.find(y=>y[0]==="e")),d?(n.tags.unshift(["e",f,"","reply"]),n.tags.unshift(["e",d[1],"","root"])):n.tags.unshift(["e",f,"","root"]),(l=n.tags)!=null&&l.find(y=>y[0]==="p"&&y[1]===c.pubkey)||n.tags.push(["p",c.pubkey])}function i(f,c){var y,w;const d=[...t.text.matchAll(f)].map(b=>b[0]).filter((b,T,_)=>_.indexOf(b)===T);if(d){n.tags=n.tags||[];for(const b of d){const T=(y=b.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:y[0],_=T&&de.toNostrHexAddress(T);if(!_)continue;const A=[c,_,"","mention"];(w=n.tags)!=null&&w.find(x=>x[0]===A[0]&&x[1]===A[1])||n.tags.push(A)}}}i(hr.pubKeyRegex,"p"),i(hr.noteRegex,"e");const s=[...t.text.matchAll(hr.hashtagRegex)].map(f=>f[0].slice(1));if(s.length){n.tags=n.tags||[];for(const f of s)(u=n.tags)!=null&&u.find(c=>c[0]==="t"&&c[1]===f)||n.tags.push(["t",f])}return console.log("sending event",n),Me.publish(n)}checkMention(t){const i=t.target.value.slice(0,t.target.selectionStart).match(n8);if(i){const s=i[0].slice(1);de.toNostrHexAddress(s)||this.setState({mentioning:s})}else this.state.mentioning&&this.setState({mentioning:void 0})}}const{bech32:ol,hex:wa,utf8:rTe}=eq,i8={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},s8={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},o8={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},a8={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},r1=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],nTe={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},iTe=BigInt("2100000000000000000"),l8=BigInt(1e11),lA={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},SV={};for(let e=0,r=Object.keys(lA);e<r.length;e++){const t=r[e],n=lA[r[e]].toString();SV[n]=t}const sTe={1:e=>wa.encode(ol.fromWordsUnsafe(e)),16:e=>wa.encode(ol.fromWordsUnsafe(e)),13:e=>rTe.encode(ol.fromWordsUnsafe(e)),19:e=>wa.encode(ol.fromWordsUnsafe(e)),23:e=>wa.encode(ol.fromWordsUnsafe(e)),27:e=>wa.encode(ol.fromWordsUnsafe(e)),6:h$,24:h$,3:aTe,5:lTe};function oTe(e){return r=>({tagCode:parseInt(e),words:ol.encode("unknown",r,Number.MAX_SAFE_INTEGER)})}function h$(e){return e.reverse().reduce((r,t,n)=>r+t*Math.pow(32,n),0)}function aTe(e){const r=[];let t,n,i,s,o,a=ol.fromWordsUnsafe(e);for(;a.length>0;)t=wa.encode(a.slice(0,33)),n=wa.encode(a.slice(33,41)),i=parseInt(wa.encode(a.slice(41,45)),16),s=parseInt(wa.encode(a.slice(45,49)),16),o=parseInt(wa.encode(a.slice(49,51)),16),a=a.slice(51),r.push({pubkey:t,short_channel_id:n,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return r}function lTe(e){const r=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;r.length<r1.length*2;)r.push(!1);const t={};r1.forEach((i,s)=>{let o;r[s*2]?o="required":r[s*2+1]?o="supported":o="unsupported",t[i]=o});const n=r.slice(r1.length*2);return t.extra_bits={start_bit:r1.length*2,bits:n,has_required:n.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},t}function kV(e,r){let t,n;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(n),s=t?i*l8/nTe[t]:i*l8;if(t==="p"&&i%BigInt(10)!==BigInt(0)||s>iTe)throw new Error("Amount is outside of valid range");return r?s.toString():s}function uTe(e,r){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const t=[],n=ol.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=n.prefix;let s=n.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});const u=l[1];let f;if(r){if(r.bech32===void 0||r.pubKeyHash===void 0||r.scriptHash===void 0||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");f=r}else switch(u){case i8.bech32:f=i8;break;case s8.bech32:f=s8;break;case o8.bech32:f=o8;break;case a8.bech32:f=a8;break}if(!f||f.bech32!==u)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:u,value:f});const c=l[2];let d;if(c){const I=l[3];d=kV(c+I,!0),t.push({name:"amount",letters:l[2]+l[3],value:d})}else d=null;t.push({name:"separator",letters:"1"});const y=h$(s.slice(0,7));s=s.slice(7),t.push({name:"timestamp",letters:o.slice(0,7),value:y}),o=o.slice(7);let w,b,T,_;for(;s.length>0;){const I=s[0].toString();w=SV[I]||"unknown_tag",b=sTe[I]||oTe(I),s=s.slice(1),T=h$(s.slice(0,2)),s=s.slice(2),_=s.slice(0,T),s=s.slice(T),t.push({name:w,tag:o[0],letters:o.slice(0,1+2+T),value:b(_)}),o=o.slice(1+2+T)}t.push({name:"signature",letters:o.slice(0,104),value:wa.encode(ol.fromWordsUnsafe(a))}),o=o.slice(104),t.push({name:"checksum",letters:o});let A={paymentRequest:e,sections:t,get expiry(){let I=t.find(O=>O.name==="expiry");if(I)return x("timestamp")+I.value},get route_hints(){return t.filter(I=>I.name==="route_hint").map(I=>I.value)}};for(let I in lA)I!=="route_hint"&&Object.defineProperty(A,I,{get(){return x(I)}});return A;function x(I){let O=t.find(C=>C.name===I);return O?O.value:void 0}}var cTe={decode:uTe,hrpToMillisat:kV};let Zy;const fTe={USD:"$",EUR:"",JPY:"",SATS:""};let Cc="USD";const u8=navigator.language,hTe=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];hTe.some(e=>u8.startsWith(e))?Cc="EUR":u8.startsWith("ja")&&(Cc="JPY");const TV=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+Cc).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var r,t,n;Zy=parseFloat((n=(t=(r=e==null?void 0:e.result)==null?void 0:r["XXBTZ"+Cc])==null?void 0:t.c)==null?void 0:n[0]),console.log("lastBitcoinPrice",Zy,Cc)}).catch(e=>{console.error("Error:",e)})};Ne.get("displayCurrency").on(e=>{Cc=e,TV()});setTimeout(()=>{Zy||TV()},1e3);function IV(e){var r,t,n;try{const i=cTe.decode(e),s=i.sections.find(b=>b.name==="amount"),o=s?Number(s.value):void 0,a=i.sections.find(b=>b.name==="timestamp"),l=a?Number(a.value):void 0,u=i.sections.find(b=>b.name==="expiry"),f=u?Number(u.value):void 0,c=(r=i.sections.find(b=>b.name==="description"))==null?void 0:r.value,d=new Uint8Array((t=i.sections.find(b=>b.name==="description_hash"))==null?void 0:t.value),y=new Uint8Array((n=i.sections.find(b=>b.name==="payment_hash"))==null?void 0:n.value),w={amount:o,expire:l&&f?l+f:void 0,timestamp:l,description:c,descriptionHash:d?rI(d):void 0,paymentHash:y?rI(y):void 0,expired:!1};return w.expire&&(w.expired=w.expire<new Date().getTime()/1e3),w}catch(i){console.error(i)}}function dTe(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function pTe(e){let r;e>=1||e>=.01?r=2:r=4;const t=Math.pow(10,r);return e=Math.round(e*t)/t,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:r})}function uA(e){if(Zy&&Cc!=="SATS"){const r=e/1e8*Zy,t=pTe(r);return fTe[Cc]+" "+t}else return dTe(e)}const vTe=gi(({data:e})=>{const r=e.pubkey.startsWith("npub")?e.pubkey:Mc.npubEncode(e.pubkey);return v(Qt,{href:`/${r}`,className:"flex items-center gap-4",children:[v(hs,{str:e.pubkey,width:40}),v("div",{className:"flex flex-col",children:[v(Er,{pub:e.pubkey}),e.text&&v("small",{className:"text-neutral-500",children:e.text})]})]})}),gTe=({event:e,wot:r})=>{var A;const[t,n]=Le(new Set),[i,s]=Le(new Set),[o,a]=Le(new Map),[l,u]=Le(""),[f,c]=Le([]),[d,y]=Le(""),w=(A=r==null?void 0:r.vertice)==null?void 0:A.score,b=w==null?void 0:w.hasTrustScore(),T=w==null?void 0:w.hasDistrustScore();return St(()=>{const x=[],I=g=>{n(new Set(g))},O=g=>{s(new Set(g))},C=g=>{const M=new Map;let B=0;Array.from(g==null?void 0:g.values()).map(V=>Me.db.by("id",V)).forEach(V=>{const ne=V==null?void 0:V.tags.find(Z=>Z[0]==="bolt11")[1];if(!ne){console.log("Invalid zap, missing bolt11 tag");return}const re=IV(ne),J=((re==null?void 0:re.amount)||0)/1e3;B+=J;const F=Me.getZappingUser(V.id);if(F){const Z=M.get(F)||0;M.set(F,Z+J)}}),a(M),u(B>0?uA(B):"")};return x.push(Me.getLikes(e.id,I)),x.push(Me.getReposts(e.id,O)),x.push(Me.getZaps(e.id,C)),()=>{x.forEach(g=>g())}},[e]),t.size>0||i.size>0||o.size>0?v(ut,{children:[v("hr",{className:"-mx-2 opacity-10 mt-2"}),f.length>0&&v(Su,{showContainer:!0,onClose:()=>c([]),children:[v("div",{className:"flex items-center justify-between mb-4",children:v("h2",{className:"text-xl font-bold",children:d})}),v("div",{className:"flex flex-col gap-4 overflow-y-scroll max-h-[50vh] w-96",children:f.map(x=>v(vTe,{data:x},x.pubkey))})]}),v("div",{className:"flex items-center gap-4 py-2",children:[t.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(t).map(I=>({pubkey:I}));c(x),y("Liked by")},className:"cursor-pointer hover:underline",children:[t.size," ",v("span",{className:"text-neutral-500",children:"Likes"})]})}),i.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(i).map(I=>({pubkey:I}));c(x),y("Reposted by")},className:"cursor-pointer hover:underline",children:[i.size," ",v("span",{className:"text-neutral-500",children:"Reposts"})]})}),(o==null?void 0:o.size)>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=[],I=[...o.entries()].sort((O,C)=>C[1]-O[1]);for(const[O,C]of I)x.push({pubkey:O,text:uA(C)});c(x),y("Zapped by")},className:"cursor-pointer hover:underline",children:[o.size," ",v("span",{className:"text-neutral-500",children:"Zaps"}),l&&v("small",{className:"text-neutral-500",children:[" (",l,")"]})]})}),b&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:v("a",{onClick:()=>{const I=rr.getTrustList(r==null?void 0:r.vertice,1).map(({outV:O,edge:C})=>({pubkey:O.key,text:C.note}));c(I),y("Trusted by")},className:"cursor-pointer hover:underline",children:[w.renderTrustCount()," ",v("span",{className:"text-neutral-500",children:"Trusts"})]})}),T&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:v("a",{onClick:()=>{const I=rr.getTrustList(r==null?void 0:r.vertice,-1).map(({outV:O,edge:C})=>({pubkey:O.key,text:C.note}));c(I),y("Distrusted by")},className:"cursor-pointer hover:underline",children:[w.renderDistrustCount()," ",v("span",{className:"text-neutral-500",children:"Distrusts"})]})})]}),v("hr",{className:"-mx-2 opacity-10 mb-2"})]}):null};function d$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M19.42 4.44994C19.3203 4.38116 19.2053 4.3379 19.085 4.32395C18.9647 4.31 18.8428 4.32579 18.73 4.36994C17.5425 4.8846 16.2857 5.22155 15 5.36994C14.1879 5.15273 13.4127 4.81569 12.7 4.36994C11.7802 3.80143 10.763 3.40813 9.7 3.20994C8.41 3.08994 5.34 4.09994 4.7 4.30994C4.55144 4.36012 4.42234 4.4556 4.33086 4.58295C4.23938 4.71031 4.19012 4.86314 4.19 5.01994V19.9999C4.19 20.1989 4.26902 20.3896 4.40967 20.5303C4.55032 20.6709 4.74109 20.7499 4.94 20.7499C5.13891 20.7499 5.32968 20.6709 5.47033 20.5303C5.61098 20.3896 5.69 20.1989 5.69 19.9999V14.1399C6.93659 13.6982 8.23315 13.4127 9.55 13.2899C10.3967 13.4978 11.2062 13.8351 11.95 14.2899C12.8201 14.8218 13.7734 15.2038 14.77 15.4199H15C16.4474 15.2326 17.8633 14.8526 19.21 14.2899C19.3506 14.2342 19.4713 14.1379 19.5568 14.0132C19.6423 13.8885 19.6887 13.7411 19.69 13.5899V5.06994C19.6975 4.95258 19.6769 4.83512 19.63 4.7273C19.583 4.61947 19.511 4.5244 19.42 4.44994Z"})})}function p$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[v("g",{"clip-path":"url(#clip0)",children:[v("path",{d:"M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 20L26 28L41 7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]}),v("defs",{children:v("clipPath",{id:"clip0",children:v("rect",{width:"48",height:"48",fill:"white"})})})]})}const yTe=({event:e})=>{const[r,t]=Le({likes:0,liked:!1,likedBy:new Set});St(()=>{const o=tt.getProfile(e.pubkey,l=>{}),a=Me.getLikes(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=de.getPubKey();t(l=>({...l,likes:o.size,liked:o.has(a),likedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.liked)},s=(o=!0)=>{if(o){const a=e.pubkey,l=de.toNostrHexAddress(e.id);l&&Me.publish({kind:7,content:"+",tags:[["e",l],["p",a]]})}};return v("a",{className:`btn-ghost btn-sm justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${r.liked?"text-iris-red":"hover:text-iris-red text-neutral-500"}`,onClick:o=>i(o),children:[r.liked?v(y3,{width:18}):v(AH,{width:18}),r.likes||""]})},mTe=({event:e})=>{const[r,t]=Le({reposts:0,reposted:!1,repostedBy:new Set});St(()=>{const o=tt.getProfile(e.pubkey,l=>{}),a=Me.getReposts(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=de.getPubKey();t(l=>({...l,reposts:o.size,reposted:o.has(a),repostedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.reposted)},s=(o=!0)=>{if(o){const a=e.pubkey,l=de.toNostrHexAddress(e.id);l&&Me.publish({kind:6,tags:[["e",l,"","mention"],["p",a]],content:""})}};return v("a",{className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none ${r.reposted?"text-iris-green":"hover:text-iris-green text-neutral-500"}`,onClick:o=>i(o),children:[v(TH,{width:18}),r.reposts||""]})},bTe="payRequest";var cA=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(cA||{});class Pf extends Error{constructor(t,n){super(n);ce(this,"code");this.code=t}}var xc,Ss,f_,AV;class wTe{constructor(r){Yr(this,f_);Yr(this,xc,void 0);Yr(this,Ss,void 0);if(r=r.toLowerCase().trim(),r.startsWith("lnurl")){const t=hr.bech32ToText(r);if(!t.startsWith("http"))throw new Pf(2,"Not a url");ko(this,xc,new URL(t))}else if(r.match(/[\w.-]+@[\w.-]/)){const[t,n]=r.split("@");ko(this,xc,new URL(`https://${n}/.well-known/lnurlp/${t}`))}else if(r.startsWith("https:"))ko(this,xc,new URL(r));else if(r.startsWith("lnurlp:")){const t=new URL(r);t.protocol="https:",ko(this,xc,t)}else throw new Pf(2,"Could not determine service url")}async load(){const r=await fetch(Ln(this,xc).toString());r.ok&&(ko(this,Ss,await r.json()),Qn(this,f_,AV).call(this))}async getInvoice(r,t,n){var l,u,f;const i=new URL(hr.unwrap((l=Ln(this,Ss))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(c=>{const d=c.split("=");s.set(d[0],d[1])}),s.set("amount",Math.floor(r*1e3).toString()),t&&((u=Ln(this,Ss))!=null&&u.commentAllowed)&&s.set("comment",t),(f=Ln(this,Ss))!=null&&f.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(c=>`${c[0]}=${encodeURIComponent(c[1])}`).join("&");try{const c=await fetch(`${o}?${a}`);if(c.ok){const d=await c.json();if(console.debug("[LNURL]: ",d),d.status==="ERROR")throw new Error(d.reason);return d}else throw new Pf(1,`Failed to fetch invoice (${c.statusText})`)}catch{throw new Pf(1,"Failed to load callback")}}get canZap(){var r;return!!((r=Ln(this,Ss))!=null&&r.nostrPubkey)}get zapperPubkey(){var r;return(r=Ln(this,Ss))==null?void 0:r.nostrPubkey}get maxCommentLength(){var r;return((r=Ln(this,Ss))==null?void 0:r.commentAllowed)??0}get min(){var r;return((r=Ln(this,Ss))==null?void 0:r.minSendable)??1e3}get max(){var r;return((r=Ln(this,Ss))==null?void 0:r.maxSendable)??1e11}}xc=new WeakMap,Ss=new WeakMap,f_=new WeakSet,AV=function(){var r,t;if(((r=Ln(this,Ss))==null?void 0:r.tag)!==bTe)throw new Pf(2,"Only LNURLp is supported");if(!((t=Ln(this,Ss))!=null&&t.callback))throw new Pf(2,"No callback url")};const Ui=({copyStr:e,text:r,className:t})=>{const[n,i]=Le(!1),[s,o]=Le(void 0),[a,l]=Le(void 0),u=(d,y)=>{if(d.target===null)return;hr.copyToClipboard(y);const w=d.target,b=w.offsetWidth;b!==void 0&&(o(s||b+1),w.style.width=`${s}px`,i(!0),a!==void 0&&clearTimeout(a),l(setTimeout(()=>i(!1),2e3)))},f=d=>{d.preventDefault();const y=typeof e=="function"?e():e;u(d,y)};St(()=>()=>{a&&clearTimeout(a)},[a]);const c=n?he("copied"):r||he("copy");return v("button",{className:t||"btn",onClick:d=>f(d),children:c})};var Qd;(function(){function e(x){this.mode=u.MODE_8BIT_BYTE,this.data=x,this.parsedData=[];for(var I=[],O=0,C=this.data.length;C>O;O++){var g=this.data.charCodeAt(O);g>65536?(I[0]=240|(1835008&g)>>>18,I[1]=128|(258048&g)>>>12,I[2]=128|(4032&g)>>>6,I[3]=128|63&g):g>2048?(I[0]=224|(61440&g)>>>12,I[1]=128|(4032&g)>>>6,I[2]=128|63&g):g>128?(I[0]=192|(1984&g)>>>6,I[1]=128|63&g):I[0]=g,this.parsedData=this.parsedData.concat(I)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(x,I){this.typeNumber=x,this.errorCorrectLevel=I,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function t(x,I){if(x.length==null)throw new Error(x.length+"/"+I);for(var O=0;O<x.length&&x[O]==0;)O++;this.num=new Array(x.length-O+I);for(var C=0;C<x.length-O;C++)this.num[C]=x[C+O]}function n(x,I){this.totalCount=x,this.dataCount=I}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function o(){var x=!1,I=navigator.userAgent,O;return/android/i.test(I)&&(x=!0,O=I.toString().match(/android ([0-9]\.[0-9])/i),O&&O[1]&&(x=parseFloat(O[1]))),x}function a(x,I){for(var O=1,C=l(x),g=0,M=b.length;M>=g;g++){var B=0;switch(I){case f.L:B=b[g][0];break;case f.M:B=b[g][1];break;case f.Q:B=b[g][2];break;case f.H:B=b[g][3]}if(B>=C)break;O++}if(O>b.length)throw new Error("Too long data");return O}function l(x){var I=encodeURI(x).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return I.length+(I.length!=x?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(x){for(var I=0,O=this.parsedData.length;O>I;I++)x.put(this.parsedData[I],8)}},r.prototype={addData:function(x){var I=new e(x);this.dataList.push(I),this.dataCache=null},isDark:function(x,I){if(0>x||this.moduleCount<=x||0>I||this.moduleCount<=I)throw new Error(x+","+I);return this.modules[x][I]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(x,I){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var O=0;O<this.moduleCount;O++){this.modules[O]=new Array(this.moduleCount);for(var C=0;C<this.moduleCount;C++)this.modules[O][C]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(x,I),this.typeNumber>=7&&this.setupTypeNumber(x),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,I)},setupPositionProbePattern:function(x,I){for(var O=-1;7>=O;O++)if(!(-1>=x+O||this.moduleCount<=x+O))for(var C=-1;7>=C;C++)-1>=I+C||this.moduleCount<=I+C||(this.modules[x+O][I+C]=O>=0&&6>=O&&(C==0||C==6)||C>=0&&6>=C&&(O==0||O==6)||O>=2&&4>=O&&C>=2&&4>=C)},getBestMaskPattern:function(){for(var x=0,I=0,O=0;8>O;O++){this.makeImpl(!0,O);var C=d.getLostPoint(this);(O==0||x>C)&&(x=C,I=O)}return I},createMovieClip:function(x,I,O){var C=x.createEmptyMovieClip(I,O),g=1;this.make();for(var M=0;M<this.modules.length;M++)for(var B=M*g,z=0;z<this.modules[M].length;z++){var V=z*g,ne=this.modules[M][z];ne&&(C.beginFill(0,100),C.moveTo(V,B),C.lineTo(V+g,B),C.lineTo(V+g,B+g),C.lineTo(V,B+g),C.endFill())}return C},setupTimingPattern:function(){for(var x=8;x<this.moduleCount-8;x++)this.modules[x][6]==null&&(this.modules[x][6]=x%2==0);for(var I=8;I<this.moduleCount-8;I++)this.modules[6][I]==null&&(this.modules[6][I]=I%2==0)},setupPositionAdjustPattern:function(){for(var x=d.getPatternPosition(this.typeNumber),I=0;I<x.length;I++)for(var O=0;O<x.length;O++){var C=x[I],g=x[O];if(this.modules[C][g]==null)for(var M=-2;2>=M;M++)for(var B=-2;2>=B;B++)this.modules[C+M][g+B]=M==-2||M==2||B==-2||B==2||M==0&&B==0}},setupTypeNumber:function(x){for(var I=d.getBCHTypeNumber(this.typeNumber),O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[Math.floor(O/3)][O%3+this.moduleCount-8-3]=C}for(var O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[O%3+this.moduleCount-8-3][Math.floor(O/3)]=C}},setupTypeInfo:function(x,I){for(var O=this.errorCorrectLevel<<3|I,C=d.getBCHTypeInfo(O),g=0;15>g;g++){var M=!x&&(1&C>>g)==1;6>g?this.modules[g][8]=M:8>g?this.modules[g+1][8]=M:this.modules[this.moduleCount-15+g][8]=M}for(var g=0;15>g;g++){var M=!x&&(1&C>>g)==1;8>g?this.modules[8][this.moduleCount-g-1]=M:9>g?this.modules[8][15-g-1+1]=M:this.modules[8][15-g-1]=M}this.modules[this.moduleCount-8][8]=!x},mapData:function(x,I){for(var O=-1,C=this.moduleCount-1,g=7,M=0,B=this.moduleCount-1;B>0;B-=2)for(B==6&&B--;;){for(var z=0;2>z;z++)if(this.modules[C][B-z]==null){var V=!1;M<x.length&&(V=(1&x[M]>>>g)==1);var ne=d.getMask(I,C,B-z);ne&&(V=!V),this.modules[C][B-z]=V,g--,g==-1&&(M++,g=7)}if(C+=O,0>C||this.moduleCount<=C){C-=O,O=-O;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(x,I,O){for(var C=n.getRSBlocks(x,I),g=new i,M=0;M<O.length;M++){var B=O[M];g.put(B.mode,4),g.put(B.getLength(),d.getLengthInBits(B.mode,x)),B.write(g)}for(var z=0,M=0;M<C.length;M++)z+=C[M].dataCount;if(g.getLengthInBits()>8*z)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*z+")");for(g.getLengthInBits()+4<=8*z&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*z||(g.put(r.PAD0,8),g.getLengthInBits()>=8*z));)g.put(r.PAD1,8);return r.createBytes(g,C)},r.createBytes=function(x,I){for(var O=0,C=0,g=0,M=new Array(I.length),B=new Array(I.length),z=0;z<I.length;z++){var V=I[z].dataCount,ne=I[z].totalCount-V;C=Math.max(C,V),g=Math.max(g,ne),M[z]=new Array(V);for(var re=0;re<M[z].length;re++)M[z][re]=255&x.buffer[re+O];O+=V;var J=d.getErrorCorrectPolynomial(ne),F=new t(M[z],J.getLength()-1),Z=F.mod(J);B[z]=new Array(J.getLength()-1);for(var re=0;re<B[z].length;re++){var ie=re+Z.getLength()-B[z].length;B[z][re]=ie>=0?Z.get(ie):0}}for(var _e=0,re=0;re<I.length;re++)_e+=I[re].totalCount;for(var we=new Array(_e),Ce=0,re=0;C>re;re++)for(var z=0;z<I.length;z++)re<M[z].length&&(we[Ce++]=M[z][re]);for(var re=0;g>re;re++)for(var z=0;z<I.length;z++)re<B[z].length&&(we[Ce++]=B[z][re]);return we};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},f={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(x){for(var I=x<<10;d.getBCHDigit(I)-d.getBCHDigit(d.G15)>=0;)I^=d.G15<<d.getBCHDigit(I)-d.getBCHDigit(d.G15);return(x<<10|I)^d.G15_MASK},getBCHTypeNumber:function(x){for(var I=x<<12;d.getBCHDigit(I)-d.getBCHDigit(d.G18)>=0;)I^=d.G18<<d.getBCHDigit(I)-d.getBCHDigit(d.G18);return x<<12|I},getBCHDigit:function(x){for(var I=0;x!=0;)I++,x>>>=1;return I},getPatternPosition:function(x){return d.PATTERN_POSITION_TABLE[x-1]},getMask:function(x,I,O){switch(x){case c.PATTERN000:return(I+O)%2==0;case c.PATTERN001:return I%2==0;case c.PATTERN010:return O%3==0;case c.PATTERN011:return(I+O)%3==0;case c.PATTERN100:return(Math.floor(I/2)+Math.floor(O/3))%2==0;case c.PATTERN101:return I*O%2+I*O%3==0;case c.PATTERN110:return(I*O%2+I*O%3)%2==0;case c.PATTERN111:return(I*O%3+(I+O)%2)%2==0;default:throw new Error("bad maskPattern:"+x)}},getErrorCorrectPolynomial:function(x){for(var I=new t([1],0),O=0;x>O;O++)I=I.multiply(new t([1,y.gexp(O)],0));return I},getLengthInBits:function(x,I){if(I>=1&&10>I)switch(x){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+x)}else if(27>I)switch(x){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+x)}else{if(!(41>I))throw new Error("type:"+I);switch(x){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+x)}}},getLostPoint:function(x){for(var I=x.getModuleCount(),O=0,C=0;I>C;C++)for(var g=0;I>g;g++){for(var M=0,B=x.isDark(C,g),z=-1;1>=z;z++)if(!(0>C+z||C+z>=I))for(var V=-1;1>=V;V++)0>g+V||g+V>=I||(z!=0||V!=0)&&B==x.isDark(C+z,g+V)&&M++;M>5&&(O+=3+M-5)}for(var C=0;I-1>C;C++)for(var g=0;I-1>g;g++){var ne=0;x.isDark(C,g)&&ne++,x.isDark(C+1,g)&&ne++,x.isDark(C,g+1)&&ne++,x.isDark(C+1,g+1)&&ne++,(ne==0||ne==4)&&(O+=3)}for(var C=0;I>C;C++)for(var g=0;I-6>g;g++)x.isDark(C,g)&&!x.isDark(C,g+1)&&x.isDark(C,g+2)&&x.isDark(C,g+3)&&x.isDark(C,g+4)&&!x.isDark(C,g+5)&&x.isDark(C,g+6)&&(O+=40);for(var g=0;I>g;g++)for(var C=0;I-6>C;C++)x.isDark(C,g)&&!x.isDark(C+1,g)&&x.isDark(C+2,g)&&x.isDark(C+3,g)&&x.isDark(C+4,g)&&!x.isDark(C+5,g)&&x.isDark(C+6,g)&&(O+=40);for(var re=0,g=0;I>g;g++)for(var C=0;I>C;C++)x.isDark(C,g)&&re++;var J=Math.abs(100*re/I/I-50)/5;return O+=10*J}},y={glog:function(x){if(1>x)throw new Error("glog("+x+")");return y.LOG_TABLE[x]},gexp:function(x){for(;0>x;)x+=255;for(;x>=256;)x-=255;return y.EXP_TABLE[x]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},w=0;8>w;w++)y.EXP_TABLE[w]=1<<w;for(var w=8;256>w;w++)y.EXP_TABLE[w]=y.EXP_TABLE[w-4]^y.EXP_TABLE[w-5]^y.EXP_TABLE[w-6]^y.EXP_TABLE[w-8];for(var w=0;255>w;w++)y.LOG_TABLE[y.EXP_TABLE[w]]=w;t.prototype={get:function(x){return this.num[x]},getLength:function(){return this.num.length},multiply:function(x){for(var I=new Array(this.getLength()+x.getLength()-1),O=0;O<this.getLength();O++)for(var C=0;C<x.getLength();C++)I[O+C]^=y.gexp(y.glog(this.get(O))+y.glog(x.get(C)));return new t(I,0)},mod:function(x){if(this.getLength()-x.getLength()<0)return this;for(var I=y.glog(this.get(0))-y.glog(x.get(0)),O=new Array(this.getLength()),C=0;C<this.getLength();C++)O[C]=this.get(C);for(var C=0;C<x.getLength();C++)O[C]^=y.gexp(y.glog(x.get(C))+I);return new t(O,0).mod(x)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(x,I){var O=n.getRsBlockTable(x,I);if(O==null)throw new Error("bad rs block @ typeNumber:"+x+"/errorCorrectLevel:"+I);for(var C=O.length/3,g=[],M=0;C>M;M++)for(var B=O[3*M+0],z=O[3*M+1],V=O[3*M+2],ne=0;B>ne;ne++)g.push(new n(z,V));return g},n.getRsBlockTable=function(x,I){switch(I){case f.L:return n.RS_BLOCK_TABLE[4*(x-1)+0];case f.M:return n.RS_BLOCK_TABLE[4*(x-1)+1];case f.Q:return n.RS_BLOCK_TABLE[4*(x-1)+2];case f.H:return n.RS_BLOCK_TABLE[4*(x-1)+3];default:return}},i.prototype={get:function(x){var I=Math.floor(x/8);return(1&this.buffer[I]>>>7-x%8)==1},put:function(x,I){for(var O=0;I>O;O++)this.putBit((1&x>>>I-O-1)==1)},getLengthInBits:function(){return this.length},putBit:function(x){var I=Math.floor(this.length/8);this.buffer.length<=I&&this.buffer.push(0),x&&(this.buffer[I]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],T=function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){function O(re,J){var F=document.createElementNS("http://www.w3.org/2000/svg",re);for(var Z in J)J.hasOwnProperty(Z)&&F.setAttribute(Z,J[Z]);return F}var C=this._htOption,g=this._el,M=I.getModuleCount();Math.floor(C.width/M),Math.floor(C.height/M),this.clear();var B=O("svg",{viewBox:"0 0 "+String(M)+" "+String(M),width:"100%",height:"100%",fill:C.colorLight});B.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),g.appendChild(B),B.appendChild(O("rect",{fill:C.colorDark,width:"1",height:"1",id:"template"}));for(var z=0;M>z;z++)for(var V=0;M>V;V++)if(I.isDark(z,V)){var ne=O("use",{x:String(z),y:String(V)});ne.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),B.appendChild(ne)}},x.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},x}(),_=document.documentElement.tagName.toLowerCase()==="svg",A=_?T:s()?function(){function x(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function I(M,B){var z=this;if(z._fFail=B,z._fSuccess=M,z._bSupportDataURI===null){var V=document.createElement("img"),ne=function(){z._bSupportDataURI=!1,z._fFail&&_fFail.call(z)},re=function(){z._bSupportDataURI=!0,z._fSuccess&&z._fSuccess.call(z)};return V.onabort=ne,V.onerror=ne,V.onload=re,V.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}z._bSupportDataURI===!0&&z._fSuccess?z._fSuccess.call(z):z._bSupportDataURI===!1&&z._fFail&&z._fFail.call(z)}if(this&&this._android&&this._android<=2.1){var O=1/window.devicePixelRatio,C=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(M,B,z,V,ne,re,J,F){if("nodeName"in M&&/img/i.test(M.nodeName))for(var Z=arguments.length-1;Z>=1;Z--)arguments[Z]=arguments[Z]*O;else typeof F>"u"&&(arguments[1]*=O,arguments[2]*=O,arguments[3]*=O,arguments[4]*=O);C.apply(this,arguments)}}var g=function(M,B){this._bIsPainted=!1,this._android=o(),this._htOption=B,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=B.width,this._elCanvas.height=B.height,M.appendChild(this._elCanvas),this._el=M,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return g.prototype.draw=function(M){var B=this._elImage,z=this._oContext,V=this._htOption,ne=M.getModuleCount(),re=V.width/ne,J=V.height/ne,F=Math.round(re),Z=Math.round(J);B.style.display="none",this.clear();for(var ie=0;ne>ie;ie++)for(var _e=0;ne>_e;_e++){var we=M.isDark(ie,_e),Ce=_e*re,He=ie*J;z.strokeStyle=we?V.colorDark:V.colorLight,z.lineWidth=1,z.fillStyle=we?V.colorDark:V.colorLight,z.fillRect(Ce,He,re,J),z.strokeRect(Math.floor(Ce)+.5,Math.floor(He)+.5,F,Z),z.strokeRect(Math.ceil(Ce)-.5,Math.ceil(He)-.5,F,Z)}this._bIsPainted=!0},g.prototype.makeImage=function(){this._bIsPainted&&I.call(this,x)},g.prototype.isPainted=function(){return this._bIsPainted},g.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},g.prototype.round=function(M){return M&&Math.floor(1e3*M)/1e3},g}():function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){for(var O=this._htOption,C=this._el,g=I.getModuleCount(),M=Math.floor(O.width/g),B=Math.floor(O.height/g),z=['<table style="border:0;border-collapse:collapse;">'],V=0;g>V;V++){z.push("<tr>");for(var ne=0;g>ne;ne++)z.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+B+"px;background-color:"+(I.isDark(V,ne)?O.colorDark:O.colorLight)+';"></td>');z.push("</tr>")}z.push("</table>"),C.innerHTML=z.join("");var re=C.childNodes[0],J=(O.width-re.offsetWidth)/2,F=(O.height-re.offsetHeight)/2;J>0&&F>0&&(re.style.margin=F+"px "+J+"px")},x.prototype.clear=function(){this._el.innerHTML=""},x}();Qd=function(x,I){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.H},typeof I=="string"&&(I={text:I}),I)for(var O in I)this._htOption[O]=I[O];typeof x=="string"&&(x=document.getElementById(x)),this._android=o(),this._el=x,this._oQRCode=null,this._oDrawing=new A(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},Qd.prototype.makeCode=function(x){this._oQRCode=new r(a(x,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(x),this._oQRCode.make(),this._el.title=x,this._oDrawing.draw(this._oQRCode),this.makeImage()},Qd.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},Qd.prototype.clear=function(){this._oDrawing.clear()},Qd.CorrectLevel=f})();const c8=Qd;function XP(e){const r=wm();return St(()=>{r.current&&new c8(r.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:c8.CorrectLevel.H})},[e.data]),v("div",{style:"border: 5px solid white; display: inline-block;",ref:r})}function $Te(e,r){const t=[];let n=0,i=e.length/r;for(;i>0;)t.push(e.slice(n,n+r)),n+=r,i-=1;return t}const _Te=_n.span`
  color: var(--text-color);
  display: inline-block;
  cursor: pointer;
  padding: 10px;
  border-radius: 100px;
  margin: 5px;
  border: 1px solid transparent;
  background: var(--body-bg);
  &.active {
    background: var(--notify);
  }
`,xTe=_n.div`
  background-color: var(--msg-content-background);
  border-radius: 8px;
  padding: 30px;
  width: 400px;
  color: var(--text-color);
  position: relative;
`,ETe=_n.div`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: var(--text-color);
`;function STe(e){const r=e.onClose||(()=>{}),{note:t,recipient:n}=e,i=1e3,s=[i,5e3,1e4,2e4,5e4,1e5,1e6],o={1e3:"",5e3:"",1e4:"",2e4:"",5e4:"",1e5:"",1e6:""},[a,l]=Le(),[u,f]=Le(e.invoice),[c,d]=Le(i),[y,w]=Le(),[b,T]=Le(),[_,A]=Le(),[x,I]=Le(),[O,C]=Le(1),[g,M]=Le(!1),[B,z]=Le(!1),V=a?B&&O!==4||a.maxCommentLength>0:!1;St(()=>{Ne.get("defaultZapAmount").on(xe=>{const ge=parseInt(xe);d(ge),w(ge),console.log("defaultZapAmount",ge)})}),St(()=>{e.show&&(I(void 0),d(i),T(void 0),C(1),f(void 0),A(void 0))},[e.show]),St(()=>{_&&!_.url&&setTimeout(()=>{r()},1e3)},[_]),St(()=>{if(e.lnurl&&e.show)try{const xe=new wTe(e.lnurl);l(xe),xe.load().then(()=>{z(xe.canZap)}).catch(ge=>Z(ge,"ln url error"))}catch(xe){xe instanceof Error&&I(xe.message)}},[e.lnurl,e.show]);const ne=vu(()=>{if(a){const xe=a.min/1e3,ge=a.max/1e3;return s.filter(Te=>Te>=xe&&Te<=ge)}return[]},[a]),re=vu(()=>$Te(ne,3),[ne]),J=xe=>{I(void 0),d(xe)};async function F(){if(!c||!a)return null;let xe;if(n&&O!==4){let ge={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:de.getPubKey(),content:b||"",tags:[["e",t],["p",n],["relays",...on.relays.keys()]]};const Te=Me.getEventHash(ge);ge.id=Te;const je=await de.sign(ge);ge={...ge,sig:je},console.log("loadInvoice",ge),ge&&(xe=ge)}try{const ge=await a.getInvoice(c,b,xe);ge.pr&&(f(ge.pr),await _e(ge))}catch(ge){Z(ge,"invoice fail")}}function Z(xe,ge){if(console.error("lnurl error",xe),xe instanceof Pf)switch(xe.code){case cA.ServiceUnavailable:{I("messages.LNURLFail");return}case cA.InvalidLNURL:{I("messages.InvalidLNURL");return}}I(ge)}function ie(){if(!a)return null;const xe=a.min/1e3,ge=a.max/1e3;return v("div",{className:"custom-amount flex",children:[v("input",{type:"number",min:xe,max:ge,className:"f-grow mr-10 input",placeholder:"Custom",value:y,onChange:Te=>w(parseInt(Te.target.value))}),v("button",{className:"btn btn-neutral",type:"button",disabled:!y,onClick:()=>J(y??0),children:"Confirm"})]})}async function _e(xe){var ge;try{if(window.webln){M(!0),await window.webln.enable();const Te=await((ge=window.webln)==null?void 0:ge.sendPayment((xe==null?void 0:xe.pr)??""));console.log(Te),A((xe==null?void 0:xe.successAction)??{})}}catch(Te){console.warn(Te),Te instanceof Error&&I(Te.toString())}finally{M(!1)}}function we(xe,ge){return v("div",{className:"amounts",children:ge.map(Te=>v(_Te,{className:xe===Te?"active":"",onClick:()=>J(Te),children:[o[Te]&&v(ut,{children:[o[Te],""]}),hr.formatAmount(Te,0)]},Te))})}function Ce(){return!a||u?null:v(ut,{children:[v("h3",{children:"Zap amount in sats"}),re.map(xe=>we(c,xe)),ie(),v("div",{className:"flex",children:V&&v("input",{className:"input",type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:B&&O!==4?250:a.maxCommentLength,onChange:xe=>T(xe.target.value)})}),(c??0)>0&&v("div",{style:"margin-top: 10px;",children:v("button",{class:"btn btn-primary",width:"100%",onClick:()=>F(),children:["Send ",hr.formatAmount(c,0)," sats"]})})]})}function He(){return _||!u?null:v(ut,{children:v("div",{className:"invoice",children:[e.notice&&v("b",{className:"error",children:e.notice}),g?v("h4",{children:"Paying"}):"",v("div",{className:"actions",children:u&&v(ut,{children:[v(XP,{data:u,link:`lightning:${u}`}),v("div",{style:"margin-top: 15px",children:[v(Ui,{copyStr:u,text:"Copy invoice"}),v("a",{className:"button",href:`lightning:${u}`,children:"Open wallet"})]})]})})]})})}function Ge(){return _?v("div",{className:"success-action",children:[v("p",{className:"paid",children:(_==null?void 0:_.description)??"Paid"}),_.url&&v("p",{children:v("a",{href:_.url,rel:"noreferrer",target:"_blank",children:_.url})})]}):null}const it=a!=null&&a.canZap?"Send zap to ":"Send sats to ";return e.show??!1?v(Su,{showContainer:!0,centerVertically:!0,onClose:r,children:v(xTe,{children:v("div",{className:"lnurl-tip",onClick:xe=>xe.stopPropagation(),children:[v(ETe,{className:"close",onClick:r,children:v(BH,{width:20,height:20})}),v("div",{className:"lnurl-header",children:v("h2",{children:[e.title||it,v(Er,{pub:n||""})]})}),Ce(),x&&v("p",{className:"error",children:x}),He(),Ge()]})})}):null}const kTe=({event:e})=>{const[r,t]=Le({totalZapAmount:0,formattedZapAmount:"",zapped:!1,showZapModal:!1,lightning:void 0});St(()=>{const i=tt.getProfile(e.pubkey,o=>{if(!o)return;const a=o.lud16||o.lud06;t(l=>({...l,lightning:a}))}),s=Me.getZaps(e.id,n);return()=>{i(),s()}},[e]);const n=wn.debounce(i=>{const s=Array.from(i==null?void 0:i.values()).map(a=>Me.db.by("id",a));let o=0;s.forEach(a=>{const l=a==null?void 0:a.tags.find(c=>c[0]==="bolt11")[1];if(!l){console.log("Invalid zap, missing bolt11 tag");return}const u=IV(l),f=((u==null?void 0:u.amount)||0)/1e3;o+=f}),t(a=>({...a,totalZapAmount:o,formattedZapAmount:o&&uA(o)||""}))},1e3,{leading:!0});return r.lightning?v(ut,{children:[v("a",{onClick:i=>{i.preventDefault(),i.stopPropagation(),t(s=>({...s,showZapModal:!0}))},className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none
          ${r.zapped?"text-iris-orange":"text-neutral-500 hover:text-iris-orange"}`,children:[v(Ble,{width:18}),r.formattedZapAmount]}),r.showZapModal&&v(STe,{show:!0,lnurl:r.lightning,note:e.id,recipient:e.pubkey,onClose:()=>t(i=>({...i,showZapModal:!1}))})]}):null},TTe=e=>{const[r,t]=Le({replyCount:0}),[n,i]=Le({trusted:!1,distrusted:!1}),s=e.event,o=e.wot;St(()=>Me.getThreadRepliesCount(s.id,u),[s]),St(()=>{const d=o==null?void 0:o.vertice,y=d==null?void 0:d.score;i(w=>({...w,trusted:y==null?void 0:y.isDirectTrusted(),distrusted:y==null?void 0:y.isDirectDistrusted()}))},[o]);function a(d){d.preventDefault(),d.stopPropagation(),i(y=>{let w=y.trusted?0:1;return rr.publishTrust(s.id,w,iu.Item),{...y,trusted:!y.trusted,distrusted:!1}})}function l(d){d.preventDefault(),d.stopPropagation(),i(y=>{let w=y.distrusted?0:-1;return rr.publishTrust(s.id,w,iu.Item),{...y,trusted:!1,distrusted:!y.distrusted}})}const u=d=>{t(y=>({...y,replyCount:d}))};function f(){e.standalone?Jt(document).find("textarea").focus():_r(`/${de.toNostrBech32Address(e.event.id,"note")}`)}function c(){var d,y,w,b;return v(ut,{children:[v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.trusted?"trusted":"hover:trusted text-neutral-500"}`,onClick:T=>a(T),title:n.trusted?"Trusted":"Trust",children:[n.trusted?v(p$,{size:18,fill:"green",stroke:"currentColor"}):v(p$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((y=(d=o==null?void 0:o.vertice)==null?void 0:d.score)==null?void 0:y.renderTrustCount())||""]}),v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.distrusted?"distrusted":"hover:distrusted text-neutral-500"}`,onClick:T=>l(T),title:n.distrusted?"Distrusted":"Distrust",children:[n.distrusted?v(d$,{size:18,fill:"red",stroke:"currentColor"}):v(d$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((b=(w=o==null?void 0:o.vertice)==null?void 0:w.score)==null?void 0:b.renderDistrustCount())||""]})]})}return v(ut,{children:[e.standalone&&v(gTe,{event:e.event,wot:o}),v("div",{className:"flex gap-4",children:[v("a",{className:"btn-ghost btn-sm hover:bg-transparent hover:text-iris-blue btn content-center gap-2 rounded-none text-neutral-500",onClick:()=>f(),children:[v(Fle,{width:18}),v("span",{children:r.replyCount||""})]}),v(mTe,{event:e.event}),v(yTe,{event:e.event}),v(kTe,{event:e.event}),c()]})]})},ITe=gi(TTe);class JP extends $n{constructor(){super();ce(this,"key");ce(this,"cls");ce(this,"actionDone");ce(this,"action");ce(this,"activeClass");ce(this,"hoverAction");ce(this,"handleMouseEnter",()=>{this.setState({hover:!0})});ce(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.cls="block-btn",this.key="blocked",this.activeClass="blocked",this.action=he("block"),this.actionDone=he("blocked"),this.hoverAction=he("unblock"),this.state={...this.state,hover:!1}}onClick(t){var s,o;t.preventDefault();const n=!this.state[this.key],i=de.toNostrHexAddress(this.props.id);i&&tt.block(i,n),(o=(s=this.props).onClick)==null||o.call(s,t)}componentDidMount(){tt.getBlockedUsers(t=>{const n=t==null?void 0:t.has(de.toNostrHexAddress(this.props.id));this.setState({blocked:n})})}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`${this.cls||this.key} ${t?this.activeClass:""} ${this.props.className||""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:v("span",{children:[he(i)," ",this.props.showName?v(Er,{pub:this.props.id,hideBadge:!0}):""]})})}}const Nf=_n.button`
  background: var(--button-bg);
  color: var(--button-color);
  border: var(--button-border);
  font-weight: bold;
  cursor: pointer;
  transition: all 0.25s ease;
  width: ${e=>e.width||"auto"};

  ${e=>e.small&&`
    padding: 5px 20px;
  `}

  &:hover,
  &:focus,
  &:active {
    background: var(--button-bg-hover);
    color: var(--button-color-hover);
  }
`,hh=_n(Nf)`
  background: var(--button-primary-bg);
  color: var(--button-primary-color);
  border: var(--button-primary-border);

  &:hover,
  &:focus,
  &:active {
    background: var(--button-primary-bg-hover);
    color: var(--button-primary-color-hover);
  }
`;let Wh=class extends $n{constructor(){super();ce(this,"key");ce(this,"cls");ce(this,"actionDone");ce(this,"action");ce(this,"activeClass");ce(this,"hoverAction");ce(this,"handleMouseEnter",()=>{this.setState({hover:!0})});ce(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.key="follow",this.activeClass="following",this.action=he("follow_btn"),this.actionDone=he("following_btn"),this.hoverAction=he("unfollow_btn"),this.state={...this.state,hover:!1}}onClick(t){t.preventDefault();const n=!this.state[this.key],i=de.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){tt.setFollowed(i,n);return}this.key==="block"&&tt.setBlocked(i,n)}}componentDidMount(){if(this.key==="follow"){tt.getFollowedByUser(de.getPubKey(),t=>{const n=de.toNostrHexAddress(this.props.id),i=n&&(t==null?void 0:t.has(n));this.setState({follow:i})});return}}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`btn ${this.props.className||this.key} ${t?this.activeClass:""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:he(i)})}};const OV=({children:e})=>{const[r,t]=Le(!1),n=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),t(s))};return St(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&t(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),v("div",{className:"relative",onClick:i=>n(i,!r),onMouseEnter:i=>n(i,!0),onMouseLeave:i=>n(i,!1),children:[v("button",{className:"dropbtn btn btn-circle btn-sm btn-ghost text-neutral-500 pb-2",children:""}),v(dt,{when:r,children:v("div",{className:"absolute z-10 p-2 flex flex-col gap-2 right-0 w-56 rounded-md shadow-lg bg-black border-neutral-500 border-2",children:e})})]})},ATe=_n.div`
  display: flex;
  flex-direction: column;

  & ul > li {
    font-size: large;
  }
  & ul > li:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,OTe=_n.pre`
  overflow: auto;
  background-color: hsl(0, 0%, 16%);
  [data-theme='light'] & {
    background-color: hsl(0, 0%, 88%);
  }
  max-height: 400px;
  border-radius: 4px;
  padding: 0.7rem;
  font-family: monospace;
`,CTe=({event:e})=>{const[r,t]=Le(null);St(()=>{if(!(e!=null&&e.id))return;const i=Me.getOriginalPostEventId(e),s=i&&Me.eventsMetaDb.get(i);s&&t(s)},[e]);const n=Array.from((r==null?void 0:r.relays)||[]);return v(ATe,{children:[v("h2",{children:he("event_detail")}),v("p",{children:he("seen_on")}),n.length===0?v("p",{children:he("iris_api_source")}):v("ul",{children:n.map(i=>v("li",{children:i}))}),v(OTe,{children:v("code",{children:JSON.stringify({...e,meta:void 0,$loki:void 0},null,2)})})]})},PTe=_n.div`
  text-align: left;
  max-width: 100%;
  user-select: text;
`,CV=e=>{const{event:r,id:t}=e,[n]=Le(!1),[i,s]=Le(!1),o=()=>s(!1),a=()=>{},l=w=>{if(w.preventDefault(),confirm("Delete message?")){const b=de.toNostrHexAddress(t);b&&Me.publish({kind:5,content:"deleted",tags:[["e",b]]})}},u=w=>{w.preventDefault(),Ne.get("mutedNotes").get(e.id).put(!n)},f=w=>{if(w.preventDefault(),confirm("Publicly report and hide message?")){const b=de.toNostrHexAddress(e.id);b&&e.event&&Me.publish({kind:5,content:"reported",tags:[["e",b],["p",e.event.pubkey]]})}},c=w=>{w.preventDefault(),e.event&&hr.translateText(e.event.content).then(b=>{var T;(T=e.onTranslate)==null||T.call(e,b)})},d=w=>{w.preventDefault();const b=de.toNostrHexAddress(t);if(b){const T=Me.db.by("id",b);T&&(console.log("broadcasting",b,T),Me.publish(T))}},y=`https://iris.to/${de.toNostrBech32Address(t,"note")}`;return v("div",{children:[v(OV,{children:[v(Ui,{className:"btn btn-sm",text:he("copy_link"),copyStr:y},`${t}copy_link`),v(Ui,{className:"btn btn-sm",text:he("copy_note_ID"),copyStr:de.toNostrBech32Address(t,"note")||""},`${t}copy_id`),v("a",{className:"btn btn-sm",href:"#",onClick:u,children:he(n?"unmute_notifications":"mute_notifications")}),r?v(ut,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:d,children:he("resend_to_relays")}),v("a",{className:"btn btn-sm",href:"#",onClick:c,children:he("translate")}),v(Ui,{className:"btn btn-sm",text:he("copy_raw_data"),copyStr:JSON.stringify(r,null,2)},`${t}copyRaw`),r.pubkey===de.getPubKey()?v("a",{className:"btn btn-sm",href:"#",onClick:l,children:he("delete")}):v(ut,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:f,children:he("report_public")}),v(Wh,{className:"btn btn-sm",id:r==null?void 0:r.pubkey}),v(JP,{className:"btn btn-sm",onClick:a,id:r==null?void 0:r.pubkey,showName:!0})]}),v("a",{className:"btn btn-sm",href:"#",onClick:w=>{w.preventDefault(),s(!0)},children:he("event_detail")})]}):v(ut,{})]}),r&&i&&v(Su,{showContainer:!0,onClose:o,children:v(PTe,{children:[v(CTe,{event:r}),v(hh,{onClick:o,children:he("done")})]})})]})},NTe=({event:e,fullWidth:r,isQuote:t,standalone:n,setTranslatedText:i})=>{const{time:s,dateStr:o,timeStr:a}=vu(()=>{const l=new Date(e.created_at*1e3),u=l.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),f=l.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});return{time:l,dateStr:u,timeStr:f}},[e.created_at]);return v("div",{className:"flex items-center gap-2 justify-between",children:[v(dt,{when:r,children:v(jK,{event:e,isQuote:t,standalone:n,fullWidth:r})}),v("div",{className:"flex flex-col",children:v("div",{children:[v(Qt,{href:`/${de.toNostrBech32Address(e.pubkey,"npub")}`,className:"font-bold",children:v(Er,{pub:e.pubkey})}),v("small",{className:"text-neutral-500",children:[v("span",{className:"mx-2",children:""}),v(Qt,{href:`/${de.toNostrBech32Address(e.id,"note")}`,className:"tooltip","data-tip":`${o} ${a}`,children:s&&hr.getRelativeTimeText(s)})]})]})}),v(dt,{when:!t,children:v("div",{className:"flex-1 flex items-center justify-end",children:v(CV,{id:e.id,event:e,onTranslate:i})})})]})},RTe=({attachments:e,name:r,text:t})=>{var a;const n=(a=e==null?void 0:e.find(l=>l.type==="image"))==null?void 0:a.data,s=`"${t.length>128?`${t.slice(0,128)}...`:t}"`,o=`${r||"User"} on Iris`;return v(Eh,{titleTemplate:"%s",children:[v("title",{children:`${o}: ${s}`}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:"article"}),n?v("meta",{property:"og:image",content:n}):null,v("meta",{property:"og:title",content:o}),v("meta",{property:"og:description",content:s})]})},DTe=gi(RTe);let fA=!0,PV=!0,NV=!0,RV=!0;Ne.get("settings").on(e=>{fA=e.loadReactions!==!1,PV=e.showLikes!==!1,NV=e.showZaps!==!1,RV=e.showReposts!==!1});const eS=500,tS=8,BTe=({standalone:e,isQuote:r,fullWidth:t,asInlineQuote:n,event:i,meta:s,wot:o})=>{var C;const[a,l]=Le(""),[u,f]=Le(!1),[c,d]=Le(""),[y,w]=Le(!1);St(()=>{if(e)return tt.getProfile(i.pubkey,g=>{d((g==null?void 0:g.display_name)||(g==null?void 0:g.name)||"")})},[i.pubkey]);const b=((C=i.content)==null?void 0:C.length)===2&&hr.isEmoji(i.content);let T=i.content||"";const _=[],A=T.match(/(https?:\/\/[^\s]+)/g);A&&A.forEach(g=>{let M;try{M=new URL(g)}catch{console.log("invalid url",g);return}M.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&_.push({type:"image",data:`${M.href}`})}),T=T.length>eS&&!u&&!e?`${T.slice(0,eS)}...`:T;const x=T.split(`
`);T=x.length>tS&&!u&&!e?`${x.slice(0,tS).join(`
`)}...`:T,T=hr.highlightEverything(T.trim(),i,{showMentionedMessages:!n,onImageClick:g=>I(g)});function I(g){g.preventDefault(),w(!0)}function O(){var g;return(_==null?void 0:_.length)>1||((g=i.content)==null?void 0:g.length)>eS||i.content.split(`
`).length>tS}return v("div",{className:"flex-grow",children:[v(NTe,{standalone:e,event:i,isQuote:r,fullWidth:t,setTranslatedText:l}),v(dt,{when:e,children:v(DTe,{name:c,text:T,attachments:_})}),v(dt,{when:s.torrentId,children:v(Mm,{torrentId:s.torrentId,autopause:!e})}),v(dt,{when:(T==null?void 0:T.length)>0,children:v("div",{className:`preformatted-wrap pb-1 ${b&&"text-2xl"} ${o==null?void 0:o.option}`,children:[T,v(dt,{when:a,children:v("p",{children:v("i",{children:a})})})]})}),v(dt,{when:!n&&!e&&O(),children:v("a",{className:"text-sm link mb-2",onClick:g=>{g.preventDefault(),f(!u)},children:he(`show_${u?"less":"more"}`)})}),v(dt,{when:!n&&fA,children:v(ITe,{settings:{showLikes:PV,showZaps:NV,showReposts:RV},standalone:e,event:i,wot:o},i.id+"reactions")}),v(dt,{when:r&&!fA,children:v("div",{style:{marginBottom:"15px"}})}),v(dt,{when:e,children:[v("hr",{className:"-mx-2 opacity-10 my-2"}),v(X_,{waitForFocus:!0,autofocus:!e,replyingTo:i.id,placeholder:he("write_your_reply")})]}),v(dt,{when:y,children:v(D$e,{images:_==null?void 0:_.map(g=>g.data),onClose:()=>w(!1)})})]})},MTe=gi(BTe),f8=({event:e,meta:r={},asInlineQuote:t=!1,isReply:n=!1,isQuote:i=!1,isQuoting:s=!1,showReplies:o=0,showRepliedMsg:a,standalone:l=!1,fullWidth:u})=>{const[f,c]=Le([]);!l&&o&&f.length&&(i=!0),r.replyingTo&&a&&(s=!0),a===void 0&&(a=l),u===void 0&&(u=!n&&!s&&!i&&!t);const d=Z_(vt(e.id),["badMessage","neutralMessage","goodMessage"],""),y=vu(()=>{const A=[];return l?A.push(""):A.push("cursor-pointer transition-all ease-in-out duration-200 hover:bg-neutral-999"),i&&A.push("quote pb-2"),s?A.push("quoting pt-0"):A.push("pt-4"),t&&A.push("inline-quote border-2 border-neutral-900 rounded-lg my-2"),u&&A.push("full-width"),A.join(" ")},[l,i,s,t,u]);St(()=>{if(o)return Me.getReplies(e.id,wn.debounce(A=>{const x=Array.from(A).slice(0,o);x.sort((I,O)=>{const C=Me.db.by("id",I),g=Me.db.by("id",O);return C.created_at-g.created_at}),c(x)},500,{leading:!0,trailing:!0}))},[e.id,o]);let w=Me.getEventRoot(e);w||(w=r.replyingTo);function b(A){var x,I;if(!l&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(O=>A.target.closest(O))&&!((x=window.getSelection())!=null&&x.toString())){if(A.stopPropagation(),e.kind===7){const O=(I=e.tags)==null?void 0:I.reverse().find(C=>C[0]==="e")[1];return _r(`/${O}`)}_r(`/${de.toNostrBech32Address(e.id,"note")}`)}}const T=v(dt,{when:r.replyingTo&&a,children:v(qo,{id:r.replyingTo,isQuote:!0,showReplies:0},e.id+r.replyingTo)}),_=v(dt,{when:!l&&!n&&!s&&w,children:v(Qt,{className:"text-iris-blue text-sm block mb-2",href:`/${de.toNostrBech32Address(w||"","note")}`,children:he("show_thread")})});return v(ut,{children:[T,v("div",{className:`px-2 md:px-4 pb-2 ${y}`,onClick:A=>b(A),children:[_,v("div",{className:"flex flex-row",onClick:A=>b(A),children:[v(dt,{when:!u,children:v(jK,{event:e,isQuote:i,standalone:l,fullWidth:u})}),v(MTe,{event:e,meta:r,standalone:l,isQuote:i,asInlineQuote:t,fullWidth:u,wot:d})]})]},e.id+"note"),v(dt,{when:!(i||t),children:v("hr",{className:"opacity-10"})}),v(Iwe,{each:f,children:A=>v(qo,{id:A,isReply:!0,isQuoting:!l,showReplies:1},A)})]})};function LTe(e){var n;const t=((n=e.event.tags)==null?void 0:n.some(i=>i[0]==="p"&&i[1]===de.getPubKey()))?"started following you":"updated their following list";return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:{display:"flex",alignItems:"center"},children:[v("i",{className:"repost-btn reposted",style:{marginRight:15},children:to.newFollower}),v(Qt,{href:`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v(Er,{pub:e.event.pubkey})}),v("span",{className:"mar-left5",children:[" ",t]})]})})})}const FTe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),_r(`/${de.toNostrBech32Address(r,"note")}`))};function jTe(e){var u;const[r,t]=Le([]),n=Me.getEventReplyingTo(e.event),i=Me.db.by("id",n),s=(i==null?void 0:i.pubkey)===de.getPubKey(),o=(u=i==null?void 0:i.tags)==null?void 0:u.find(f=>f[0]==="p"&&f[1]===de.getPubKey()),a=s?"liked your note":o?"liked a note where you were mentioned":"liked a note";if(St(()=>{if(n)return Me.getLikes(n,f=>{t(Array.from(f))})},[n]),!n)return null;const l=`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`;return v("div",{children:v("div",{onClick:f=>FTe(f,n),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"like-btn text-iris-red",children:v(y3,{width:18})}),v("span",{children:[v("a",{href:l,children:v(Er,{pub:e.event.pubkey})}),r.length>1&&v(ut,{children:[" and ",r.length-1," others "]})," ",a]})]}),v(qo,{id:n,fullWidth:!1},n+e.event.id)]})},e.event.id)}const zTe=_n.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: black;
  border: 1px solid #333;
  border-radius: 4px;
`,HTe=_n.div`
  flex: 1;
  max-width: 70%;
  display: flex;
  background: var(--main-color);
  justify-content: center;

  @media (max-width: 625px) {
    max-width: 100%;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
`,UTe=_n.div`
  flex: 1;
  max-width: 30%;
  overflow-y: auto;
  background: var(--msg-content-background);

  @media (max-width: 625px) {
    display: none;
  }
`,WTe=({event:e,onClose:r,attachment:t})=>v(Su,{width:"90%",height:"90%",centerVertically:!0,onClose:r,children:v(zTe,{children:[v(HTe,{children:t.type==="image"?v(mu,{className:"rounded-sm",src:t.url}):v("video",{loop:!0,autoPlay:!0,src:t.url,controls:!0,poster:`https://imgproxy.iris.to/thumbnail/428/${t.url}`})}),v(UTe,{children:v(qo,{id:e.id,standalone:!0,showReplies:1/0})})]})}),qTe=C$e`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`;function KTe({attachment:e}){return e.type==="video"?v("div",{style:{position:"absolute",top:"8px",right:"8px"},children:to.video}):v(ut,{})}const VTe=_n.img`
  display: none;
`,GTe=_n.a`
  position: relative;
  aspect-ratio: 1;
  color: white;
  background-size: cover;
  background-position: center;
  background-color: #ccc;
  background-image: url(${e=>{var r;return((r=e.attachment)==null?void 0:r.type)==="video"?`https://imgproxy.iris.to/thumbnail/428/${e.attachment.url}`:e.proxyError?`${e.attachment.url}`:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${e.attachment.url}`}});
  & .dropdown {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
  }
  & .dropbtn {
    padding-top: 0px;
    margin-top: -5px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
    color: white;
    user-select: none;
  }
  &:hover {
    opacity: 0.8;
  }

  & svg {
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
  }

  opacity: ${e=>e.fadeIn?0:1};
  animation: ${e=>e.fadeIn?KP`
          ${qTe} 0.5s ease-in-out forwards
        `:"none"};
`;function YTe(e){var u;const[r,t]=Le(-1),[n,i]=Le([]),s=f=>{i(c=>{const d=[...c];return d[f]=!0,d})};if(e.event.kind!==1){const f=Me.getEventReplyingTo(e.event);return f?v(qo,{id:f,renderAs:"NoteImage"}):null}const o=[],a=(u=e.event.content)==null?void 0:u.match(/(https?:\/\/[^\s]+)/g);a&&a.forEach(f=>{let c;try{c=new URL(f)}catch{console.log("invalid url",f);return}c.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&o.push({type:"image",url:c.href}),c.pathname.toLowerCase().match(/\.(mp4|mkv|avi|flv|wmv|mov|webm)$/)&&o.push({type:"video",url:c.href})});const l=(f,c)=>{window.innerWidth>625&&(f.preventDefault(),f.stopPropagation(),t(c))};return v(ut,{children:o.map((f,c)=>v(ut,{children:[v(GTe,{href:`/${de.toNostrBech32Address(e.event.id,"note")}`,onClick:d=>l(d,c),attachment:f,fadeIn:e.fadeIn,proxyError:n[c],children:v(KTe,{attachment:f})},e.event.id+c),f.type==="image"&&v(VTe,{src:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${f.url}`,onError:()=>s(c)}),r===c&&v(WTe,{attachment:f,onClose:()=>t(-1),event:e.event})]}))})}const ZTe=gi(YTe);function h8(e){var i;const[r,t]=Le([]),n=Me.getRepostedEventId(e.event)||"";return St(()=>{if(e.notification){const s=Me.getReposts(n,o=>{t(Array.from(o))});return()=>s()}},[e.notification,n]),v("div",{children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{children:v(TH,{width:18})}),v(Qt,{href:`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v(Er,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),v("span",{children:[r.length>1&&`and ${r.length-1} others`," ",he("reposted")]})]}),v(qo,{id:n,fullWidth:e.fullWidth},n+e.event.id)]})}const XTe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),_r(`/${de.toNostrBech32Address(r,"note")}`))};function JTe(e){var f;const[r,t]=Le([]),n=Me.getEventReplyingTo(e.event),i=Me.db.by("id",n),s=(i==null?void 0:i.pubkey)===de.getPubKey(),o=(f=i==null?void 0:i.tags)==null?void 0:f.find(c=>c[0]==="p"&&c[1]===de.getPubKey()),a=s?"zapped your note":o?"zapped a note where you were mentioned":"zapped a note";if(St(()=>n?Me.getZaps(n,c=>{t(Array.from(c.values()))}):()=>null,[n]),!n)return null;let l=null;try{l=Me.getZappingUser(e.event.id)}catch(c){return console.error("no zapping user found for event",e.event.id,c),""}const u=`/${l}`;return v("div",{children:v("div",{onClick:c=>XTe(c,n||""),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"zap-btn text-iris-orange",children:v(cue,{width:18,height:18})}),v("div",{children:[v("a",{href:u,children:v(Er,{pub:l||""})}),r.length>1&&v("span",{children:[" and ",r.length-1," others "]})," ",a]})]}),v(qo,{id:n,fullWidth:!1},n+e.event.id)]})})}const QTe=e=>{const[r,t]=Le({sortedReplies:[],meta:{},event:Me.db.by("id",de.toNostrHexAddress(e.id))}),n=ro(),i=ro(!1),s=u=>{if(clearTimeout(n.current),i.current)return;r.retrieving&&t(d=>({...d,retrieving:!1}));const f=Me.getNoteReplyingTo(u),c={npub:de.toNostrBech32Address(u.pubkey,"npub"),noteId:de.toNostrBech32Address(u.id,"note"),time:u.created_at*1e3,isMine:de.getPubKey()===u.pubkey,attachments:[],replyingTo:f};t(d=>({...d,event:u,meta:c}))};St(()=>{if(!e.id){console.log("error: no id",e);return}i.current=!1;const u=de.toNostrHexAddress(e.id);return n.current=setTimeout(()=>{t(f=>({...f,retrieving:!0}))},1e3),u&&Me.getEventById(u,!0,f=>s(f)),()=>{i.current=!0}},[]),St(()=>{e.standalone&&!r.msg&&r.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const o=()=>e.asInlineQuote?null:v(CV,{id:e.id||"",event:r.event}),a=()=>{var c;let u="msg";return e.standalone&&(u+=" standalone"),(e.isQuote||e.showReplies&&((c=r.sortedReplies)==null?void 0:c.length))&&(u+=" quote"),u};return e.id?r.event?tt.isBlocked(r.event.pubkey)?e.standalone||e.isQuote?v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("p",{style:{display:"flex",alignItems:"center"},children:[v("i",{style:{marginRight:"15px"},children:to.newFollower}),v("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var f,c,d;let u=f8;if(r.event.kind===1){const y=(c=(f=r.event)==null?void 0:f.tags)==null?void 0:c.findIndex(w=>w[0]==="e"&&w[3]==="mention");((d=r.event)==null?void 0:d.content)===`#[${y}]`&&(u=h8)}else u={1:f8,3:LTe,6:h8,7:jTe,9735:JTe}[r.event.kind];return e.renderAs==="NoteImage"&&(u=ZTe),u?v(u,{className:a(),event:r.event,meta:r.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<r.event.created_at,...e},e.id):(console.error("unknown event kind",r.event),null)})():e.renderAs==="NoteImage"?null:v("div",{className:a(),children:v("div",{className:`msg-content retrieving ${r.retrieving?"opacity-100":"opacity-0"} transition-opacity duration-700 ease-in-out`,style:{display:"flex",alignItems:"center"},children:[v("div",{className:"text",children:he("looking_up_message")}),v("div",{children:o()})]})},e.id):(console.error("no id on event",e),null)},qo=gi(QTe),d8=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,p8=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,rS=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,eIe=/\bnostr:(n(?:event|profile)1\w+)\b/g,v8=/(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;let dn={};Ne.get("settings").on(e=>dn=e);let DV={};Ne.get("settings").put({});Ne.get("existingIrisToAddress").on(e=>DV=e);const tIe=navigator.userAgent.toLowerCase(),rIe=tIe.indexOf(" electron/")>-1,hr={wtClient:void 0,formatAmount(e,r=2){return typeof e!="number"?"":e<1e3?e.toFixed(r):e<1e6?(e/1e3).toFixed(r)+"K":e<1e9?(e/1e6).toFixed(r)+"M":(e/1e9).toFixed(r)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(d8)!==null},async translateText(e){const t=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:Wo.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return t==null?void 0:t.translatedText},handleLightningLinkClick(e){e.preventDefault();const r=e.target.closest("A").href;r.startsWith("lightning:")&&window.open(r,"_self")},highlightEverything(e,r,t={showMentionedMessages:!0}){let n=zr(e,d8,(s,o)=>v("span",{className:"emoji",children:s},s+o));return t.showMentionedMessages&&(n=zr(n,rS,(s,o)=>v(qo,{id:de.toNostrHexAddress(s)||"",asInlineQuote:!0},s+o))),dn.enableTwitter!==!1&&(n=zr(n,/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,(o,a)=>v("iframe",{style:{"max-width":"350px",height:"450px","background-color":"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(o)}`},o+a))),dn.enableVideos!==!1&&(n=zr(n,/(https?:\/\/[^?\s]+\/[^?\s]+\.(?:mp4|mkv|avi|flv|wmv|mov|webm)(?:\?\S*)?)\b/gi,(o,a)=>v("video",{className:"py-2 rounded max-h-[70vh] md:max-h-96 max-w-full",src:o,poster:`https://imgproxy.iris.to/thumbnail/428/${o}`,muted:!this.isMobile&&dn.autoplayVideos!==!1,autoPlay:!this.isMobile&&dn.autoplayVideos!==!1,playsInline:!0,controls:!0,loop:!0,onLoadedData:l=>{!this.isMobile&&dn.autoplayVideos&&l.target.play()}},o+a))),dn.enableAudio!==!1&&(n=zr(n,/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,(o,a)=>v("audio",{src:o,controls:!0,loop:!0},o+a))),dn.enableYoutube!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,(o,a)=>v("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableInstagram!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,(o,a)=>v("iframe",{class:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${o}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableSoundCloud!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,(o,a)=>(console.log("match: "+o),console.log("match 0: "+o[0]),console.log("match 1: "+o[1]),console.log("match 2: "+o[2]),v("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${o}`,frameBorder:"0",allow:"encrypted-media"},o+a)))),dn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${o}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${o}`,frameBorder:"0",allow:"encrypted-media"},o+a))),dn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/playlist\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/playlist/${o}`,frameBorder:"0",allow:"encrypted-media"},o+a))),dn.enableAppleMusic!==!1&&(n=zr(n,/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,(o,a)=>v("iframe",{class:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableAppleMusic!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(podcasts\.apple\.com\/.*)/g,(o,a)=>{console.log("embed url: "+o);const l=o.includes("?i=")?"applepodcast-small":"applepodcast-large";return v("iframe",{class:l,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a)})),dn.enableTidal!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${o}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableTiktok!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,(o,a)=>v("iframe",{class:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${o}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableTwitch!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,(o,a)=>v("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${o}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableTwitch!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,(o,a)=>v("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${o}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),dn.enableWavlake!==!1&&(n=zr(n,/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,(o,a)=>v("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${o}`,frameBorder:"0",loading:"lazy"},o+a))),dn.enableTorrent!==!1&&(n=zr(n,/(magnet:\?xt=urn:btih:.*)/gi,(o,a)=>(console.log("magnet link",o),v(Mm,{preview:!0,torrentId:o},o+a)))),dn.enableImages!==!1&&(n=zr(n,/(https?:\/\/[^\s]*\.(?:jpg|jpeg|gif|png|webp)(\?[^\s]*)?( |$|\n))/gi,(o,a)=>v(mu,{className:"py-2 md:rounded max-h-[70vh] md:max-h-96 max-w-full cursor-pointer",onClick:t.onImageClick,src:o},o+a))),n=this.highlightText(n,r,t),n=zr(n,/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,s=>(s.startsWith("lightning:")||(s=`lightning:${s}`),v("a",{href:s,onClick:o=>this.handleLightningLinkClick(o),children:" Pay with lightning"}))),n},isMobile:function(){let e=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),highlightText(e,r,t={}){return e=zr(e,p8,(n,i)=>{n=n.replace(/@/g,"");const s=`/${n}`;return v(ut,{children:[" ",v("a",{href:s,className:"link",children:["@",v(Er,{pub:n,hideBadge:!0},n+i)]})]})}),e=zr(e,eIe,(n,i)=>{try{const{type:s,data:o}=Mc.decode(n);if(s==="nprofile")return v(ut,{children:[" ",v(Qt,{href:`/${o.pubkey}`,className:"link",children:["@",v(Er,{pub:o.pubkey,hideBadge:!0},n+i)]})]});if(s==="nevent")return v(qo,{id:o.id,asInlineQuote:!0},n+i)}catch(s){return console.log(s),n}}),e=zr(e,rS,n=>{n=n.replace(/@/g,"");const i=`/${n}`;return v(ut,{children:[" ",v("a",{href:i,className:"link",children:n})]})}),e=zr(e,/((?:https?:\/\/\S*[^.?,)\s])|(?:iris\.to\/\S*[^.?,)\s]))/gi,(n,i)=>{const s=n.replace(/^(https:\/\/)?iris.to/,""),o=s!==n;return v("a",{className:"link",target:"_blank",onClick:a=>{o&&(a.preventDefault(),_r(s))},href:s,children:n.replace(/^https?:\/\//,"").replace(/\/$/,"")},n+i)}),r!=null&&r.tags&&(e=zr(e,/#\[(\d+)\]/g,(n,i)=>{const s=r.tags[parseInt(n,10)];if(s){const o=s[1].replace("@","");if(s[0]==="p"){const a=`/${de.toNostrBech32Address(o,"npub")}`;return v("a",{href:a,children:["@",v(Er,{pub:o,hideBadge:!0},o+i)]})}else if(s[0]==="e")return t.showMentionedMessages?v(qo,{id:o,asInlineQuote:!0},o+i):v(Qt,{className:"link",href:`/${de.toNostrBech32Address(o,"note")}`,children:s[1]})}return n})),e=zr(e,v8,n=>v(Qt,{className:"link",href:`/search/${encodeURIComponent(n)}`,children:n})),e=e.map(n=>typeof n=="string"?n.replace(/^\n+|\n+$/g,""):n),e},copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const r=document.createElement("textarea");r.textContent=e,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}finally{document.body.removeChild(r)}}return!1},showConsoleWarning(){const e="Stop!",r=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const t="font-family:helvetica; font-size:20px; ";[[e,`${t}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[r,t],["",""]].map(n=>{setTimeout(console.log.bind(console,`
%c${n[0]}`,n[1]))})}},formatTime(e){const r=e.toLocaleTimeString(void 0,{timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},formatDate(e){const r=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,r,t,n){if(t||(t=new Date,n=t.toLocaleDateString(void 0,{dateStyle:"short"})),r===n)return"today";const i=Math.round((t.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):r},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const r=eI.decode(e,1e3),t=eI.fromWords(r.words);return new TextDecoder().decode(Uint8Array.from(t))}catch(r){return console.error("bech32ToText failed",r),""}},getRelativeTimeText(e){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;return t<n?he("now"):t<i?Math.floor(t/n)+"m":t<s?Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},formatBytes(e,r=2){if(e===0)return"0 Bytes";const t=1024,n=r<0?0:r,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,s)).toFixed(n))} ${i[s]}`},download(e,r,t,n,i){n===null&&(n="utf-8");const s=document.createElement("a");s.href=i||`data:${t};charset=${n},${encodeURI(r)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const r=new FileReader;return r.readAsDataURL(e),new Promise((t,n)=>{r.onload=function(){t(r.result)},r.onerror=function(i){n(`Error: ${i}`)}})},scrollToMessageListBottom:k_(()=>{Jt("#message-view")[0]&&Jt("#message-view").scrollTop(Jt("#message-view")[0].scrollHeight-Jt("#message-view")[0].clientHeight)},100),getMyProfileLink(){const e=DV.name||de.toNostrBech32Address(de.getPubKey(),"npub");return this.buildURL(e)},buildURL(e,r={},t=""){const n=new URL(window.location.origin);return n.pathname=e,r&&rp.forEach(r,(i,s)=>{n.searchParams.append(s,i)}),t&&(n.hash=t),n.toString()},arrayToHex(e){return Array.from(e,r=>("0"+(r&255).toString(16)).slice(-2)).join("")},isElectron:rIe,pubKeyRegex:p8,noteRegex:rS,hashtagRegex:v8},de={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:kh,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,r=!1){const t=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),t&&location.reload(),Ne.get("loggedIn").put(!0),r&&setTimeout(()=>{_r("/following")}),Ne.get("showLoginModal").put(!1)},generateKey(){const e=W3();return{priv:e,rpub:kh(e)}},getOrCreate(e){let r=localStorage.getItem("iris.myKey");return r||(r=localStorage.getItem("chatKeyPair")),r?(this.key=JSON.parse(r),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),Ne.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),Ne.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return((e=this.key)==null?void 0:e.rpub)||""},getPrivKey(){var e;return((e=this.key)==null?void 0:e.priv)||""},encrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?Ih.encrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"encrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},decrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?Ih.decrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"decrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},sign:async function(e){const r=this.getPrivKey();return r?ZU(e,r):window.nostr?new Promise(t=>{this.processWindowNostr({op:"sign",data:e,callback:t})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:r,pub:t,callback:n}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(t,r),n):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(t,r),n):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(r),s=>n(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,r){return e.then(t=>{r(t)}).catch(t=>{console.error(t),r(null)})},async decryptMessage(e,r){var n,i;const t=Me.decryptedMessages.get(e.id);if(t){r(t);return}try{const s=this.getPubKey(),o=e.pubkey===s?(i=(n=e.tags)==null?void 0:n.find(l=>l[0]==="p"))==null?void 0:i[1]:e.pubkey;if(!(e&&o))return;let a=await this.decrypt(e.content,o);a!=null&&a.content&&(a=a.content),Me.decryptedMessages.set(e.id,a),r(a)}catch(s){console.error(s)}},async getPubKeyByNip05Address(e){try{const[r,t]=e.split("@"),n=`https://${t}/.well-known/nostr.json?name=${r}`;return(await(await fetch(n)).json()).names[r]||null}catch(r){return console.error(r),null}},async verifyNip05Address(e,r){try{const[t,n]=e.split("@"),i=`https://${n}/.well-known/nostr.json?name=${t}`,a=(await(await fetch(i)).json()).names;return a[t]===r||a[t.toLowerCase()]===r}catch{return!1}},toNostrBech32Address:function(e,r){if(!e)return null;if(!r)throw new Error("prefix is required");try{const n=MT(e);return r!==n.prefix?null:iB(r,n.data)}catch{}const t=e.match(/^[0-9a-fA-F]{64}$/);if(t!==null){const n=t[0].match(/.{1,2}/g);if(n!==null){const i=new Uint8Array(n.map(s=>parseInt(s,16)));return iB(r,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:r}=MT(e);return hr.arrayToHex(r)}catch{}return null}},nIe=[{url:"/",icon:OH,activeIcon:PH},{url:"/chat",icon:g3,activeIcon:m3},{url:"/post/new",icon:rue,activeIcon:Pue},{url:"/search",icon:RH,activeIcon:to.magnifyingGlassBold}],iIe=()=>{const[e,r]=Le(!1),[t,n]=Le("/"),[i,s]=Le(null);St(()=>{Ne.get("isMyProfile").on(u=>r(u)),Ne.get("activeRoute").on(u=>{const f=u.replace("/chat/new","").replace("/chat/",""),c=f.length<u.length?f:null;n(u),s(c)})},[]);const o=u=>{u&&window.scrollTo({top:0})},a=(u,f,c)=>{const d=new RegExp(`^${u}(/|$)`).test(t);return v(Qt,{href:u,className:`btn flex-grow ${d?"active":""}`,onClick:()=>o(d),children:[v(dt,{when:d,children:v(c,{width:24})}),v(dt,{when:!d,children:v(f,{width:24})})]})},l=de.toNostrBech32Address(de.getPubKey(),"npub");return v(dt,{when:l&&!i,children:v("footer",{className:"fixed md:hidden bottom-0 z-10 w-full bg-base-200 pb-safe-area",children:v("div",{className:"flex",children:[nIe.map(u=>a(u.url,u.icon,u.activeIcon)),v(Qt,{href:`/${l}`,onClick:()=>o(e),className:"rounded-full btn flex flex-grow",children:v("span",{className:`${e?"border-white":"border-black"} flex rounded-full border-2`,children:v(hs,{str:l,width:28})})})]})})})},sIe=(e,r)=>r.indexOf(e.slice(-4))!==-1,g8=e=>sIe(e.name,[".jpg","jpeg",".gif",".png"]);class oIe extends zn{constructor(){super(...arguments);ce(this,"torrentId");ce(this,"filePath");ce(this,"torrent")}componentDidMount(){Ne.get("player").on(t=>{const n=t&&t.torrentId,i=t&&t.filePath;n!==this.torrentId?(this.filePath=i,this.torrentId=n,this.setState({torrentId:n,isOpen:!!t,splitPath:i&&i.split("/")}),n&&this.startTorrenting()):i&&i!==this.filePath&&(this.filePath=i,this.setState({splitPath:i&&i.split("/")}),this.openFile())}),Ne.get("player").get("paused").on(t=>this.setPaused(t))}setPaused(t){const i=this.base.querySelector("audio");i&&(t?i.pause():i.play())}onTorrent(t){this.torrent=t;const n=t.files.find(a=>g8(a));let i=t.files.find(a=>g8(a)&&(a.name.indexOf("cover")>-1||a.name.indexOf("poster")>-1));i=i||n;const o=this.base.querySelector(".cover");o.innerHTML="",i&&o.appendChild(i.appendTo()),this.setState({isOpen:!0}),this.openFile()}openFile(){if(this.torrent){const t=this.torrent.files.find(o=>o.path===this.filePath),i=this.base.querySelector(".player");i.innerHTML="",t&&i.appendChild(t.appendTo({autoplay:!0,muted:!1}));const s=i.querySelector("audio");s&&(s.onpause=s.onplay=o=>{const a=o.target;Ne.get("player").get("paused").put(!!a.paused)})}}async startTorrenting(){const{default:t}=await $r(()=>import("./index-6b25311b.js").then(s=>s.i),[]),n=new t,i=n.get(this.torrentId);i?this.onTorrent(i):n.add(this.torrentId,(s,o)=>this.onTorrent(o))}closeClicked(){this.setPaused(!0),Ne.get("player").put(null)}render(){const t=this.state;return v(ut,{children:v("div",{className:"media-player",style:{display:t.isOpen?"":"none"},children:[v("div",{className:"player"}),v("div",{className:"cover"}),v(Qt,{href:`/torrent/${encodeURIComponent(this.state.torrentId??"")}`,className:"info",children:t.splitPath?t.splitPath.map((n,i)=>{var s;return i===(((s=t.splitPath)==null?void 0:s.length)||0)-1?(n=n.split(".").slice(0,-1).join("."),v("p",{children:v("b",{children:n})})):v("p",{children:n})}):""}),v("div",{className:"close",onClick:()=>this.closeClicked(),children:to.close})]})})}}const aIe=[{url:"/",text:"home",icon:OH,activeIcon:PH},{url:"/search",text:"search",icon:RH,activeIcon:to.magnifyingGlassBold},{url:"/chat",text:"messages",icon:g3,activeIcon:m3},{url:"/settings",text:"settings",icon:IH,activeIcon:due},{url:"/about",text:"about",icon:Xle,activeIcon:xue}];function lIe(){const[e,r]=Le(0),[t,n]=Le(""),[i,s]=Le(!1);St(()=>{const f=Ne.get("unseenMsgsTotal").on(r),c=Ne.get("activeRoute").on(n);return()=>{f(),c()}},[]),vu(()=>{const f=new Date;return f.getMonth()===2&&f.getDate()===17},[]);const o=()=>{Ne.get("scrollUp").put(!0),window.scrollTo(0,0)},a=()=>v(Su,{centerVertically:!0,showContainer:!0,onClose:()=>s(!1),children:v(X_,{onSubmit:()=>s(!1),placeholder:he("whats_on_your_mind"),autofocus:!0})}),l=()=>{const f=de.getPubKey(),c=de.toNostrBech32Address(f,"npub");return v("div",{className:"flex justify-center xl:justify-start",children:v(Qt,{href:`/${c}`,className:"btn btn-ghost md:max-xl:btn-circle",children:[v(hs,{str:f,width:34}),v("div",{className:"hidden xl:block ml-2",children:v(Er,{pub:f,hideBadge:!0})})]})})},u=f=>{const c=new RegExp(`^${f.url}(/|$)`).test(t),d=c?f.activeIcon:f.icon;return v("div",{children:v("a",{onClick:()=>o(),className:`${c?"active":""} inline-flex w-auto flex items-center space-x-4 p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900`,href:f.url,children:[v(dt,{when:f.text==="messages"&&e,children:v("span",{class:"unseen unseen-total",children:e})}),v(d,{width:26}),v("span",{className:"hidden xl:flex pr-2",children:he(f.text)})]})})};return v("div",{className:"sticky border-r border-neutral-900 top-0 z-20 h-screen max-h-screen hidden md:flex xl:w-56 flex-col px-2 py-4 flex-shrink-0",children:[v("a",{className:"flex items-center gap-3 px-2 mb-4",tabIndex:3,href:"/",onClick:()=>o(),children:[v("img",{src:"/img/dwotr/logo30.png",width:"30",height:"30"}),v("h1",{className:"hidden xl:flex text-3xl",children:"Dpeep"})]}),v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation/blob/main/Trust.md",target:"_blank",children:v("small",{className:"pl-3",children:"Iris clone with DWoTR"})}),v("div",{className:"flex flex-col gap-2",children:aIe.map(f=>u(f))}),v("div",{class:"py-2 flex-1",children:[v("button",{className:"btn btn-primary md:max-xl:btn-circle mt-2",onClick:()=>s(!i),children:[v(DH,{width:26}),v("span",{className:"hidden xl:flex",children:he("new_post")})]}),v(dt,{when:i,children:a()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),l()]})}const uIe={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const r=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(r.status===200){const n=await r.json();console.log("existingIrisToAddress",n),Ne.get("existingIrisToAddress").put(n);const i=setTimeout(()=>{n!=null&&n.confirmed||Ne.get("showNoIrisToAddress").put(!0)},1e3);return Ne.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:n}}const t=setTimeout(()=>{Ne.get("showNoIrisToAddress").put(!0)},2e3);Ne.get("showNoIrisToAddress").on(n=>{n||clearTimeout(t)})},setAsPrimary(e){const r=e+"@iris.to",t=setTimeout(()=>{tt.setMetadata({nip05:r})},2e3);tt.getProfile(de.getPubKey(),n=>{n&&(clearTimeout(t),n.nip05!==r&&(n.nip05=r,tt.setMetadata(n)))})},async enableReserved(e){const r=de.getPubKey(),t={content:`iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Me.getEventHash(t),t.sig=await de.sign(t);const n=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(Ne.get("showNoIrisToAddress").put(!1),Ne.get("existingIrisToAddress").put({confirmed:!0,name:e}),n.status===200)return{error:null,existing:{confirmed:!0,name:e}};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const r=de.getPubKey(),t={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Me.getEventHash(t),t.sig=await de.sign(t);const n=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.status===200)return Ne.get("showNoIrisToAddress").put(!1),Ne.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},y8=3e4;function BV(e){var r,t;return(t=(r=e.tags)==null?void 0:r.find(([n])=>n==="d"))==null?void 0:t[1]}function cIe(e){var r;return(r=e["#d"])==null?void 0:r[0]}class fIe{constructor(){ce(this,"eventsByPathAndAuthor",new Map)}set(r){const t=BV(r);if(!t)return!1;this.eventsByPathAndAuthor.has(t)||this.eventsByPathAndAuthor.set(t,new Map);let n=this.eventsByPathAndAuthor.get(t);n||(n=new Map,this.eventsByPathAndAuthor.set(t,n));const i=n==null?void 0:n.get(r.pubkey);return i&&i.created_at>r.created_at?!1:(n.set(r.pubkey,r),!0)}get(r,t){const n=cIe(r);if(!n)throw new Error(`filter has no #d tag: ${JSON.stringify(r)}`);const i=this.eventsByPathAndAuthor.get(n);if(i)for(const[s,o]of i)(!r.authors||r.authors.indexOf(s)!==-1)&&t(o)}}class m8{constructor(r,t,n,i,s,o){ce(this,"store");ce(this,"listeners");ce(this,"publish");ce(this,"subscribe");ce(this,"unsubscribe");ce(this,"filter");ce(this,"encrypt");ce(this,"decrypt");this.publish=r,this.subscribe=t,this.unsubscribe=n,this.filter=i,this.encrypt=s,this.decrypt=o,this.store=new fIe,this.listeners=new Map}async publishSetEvent(r,t){let n;if(this.encrypt){const i=JSON.stringify(t);if(n=await this.encrypt(i),i===n)throw new Error(`Encryption failed: ${i} === ${n}`)}else n=JSON.stringify(t);return this.publish({kind:y8,tags:[["d",r]],content:n,created_at:Math.floor(Date.now()/1e3)})}async set(r,t){try{const n=await this.publishSetEvent(r,t);if(n)return this.store.set(n)&&this.notifyListeners(n),!0}catch(n){console.error(n)}return!1}async getEventValue(r){let t=this.decrypt?await this.decrypt(r.content):r.content;try{t=JSON.parse(t)}catch{throw new Error(`Failed to parse event content: ${t}`)}return t}get(r,t,n={}){n=Object.assign({},n,this.filter,{"#d":[r],kinds:[y8]});const i=this.addListener(n,t);return this.store.get(n,s=>this.callbackFromEvent(s,t)),this.subscribe([n],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(r,t){const n=Math.random().toString(36).substr(2,9),i={filter:r,callback:t,off:()=>{this.listeners.delete(n),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(n,i),i}removeListener(r){const t=this.listeners.get(r);t&&t.off()}callbackFromEvent(r,t){const n=BV(r);if(!n)throw new Error(`event has no d tag: ${JSON.stringify(r)}`);this.getEventValue(r).then(i=>{t(i,n,r)})}async notifyListeners(r){for(const t of this.listeners.values())K3(t.filter,r)&&this.callbackFromEvent(r,t.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}const Ch={public:void 0,private:void 0,async logOut(){var e;if(_r("/"),navigator.serviceWorker){const r=await navigator.serviceWorker.getRegistration();r&&r.pushManager&&((e=r.active)==null||e.postMessage({key:null}),await r.pushManager.getSubscription())}ll.clear(),localStorage.clear(),pn.clear().then(()=>{location.reload()})},unsubscribe(){},onLoggedIn(){const e=de.getPubKey(),r=vt(e);tt.followDistanceByUser.set(r,0),tt.followersByUser.set(r,new Set),tt.usersByFollowDistance.set(0,new Set([r]));const t=(s,o)=>{var u;const l=(u=s[0]["#d"])==null?void 0:u[0];if(l){const f=Me.keyValueEvents.get(l);f&&o(f)}return Bt.subscribe(s[0],o,!0),"0"};Ne.get("globalFilter").once(s=>{s||Ne.get("globalFilter").put(Me.DEFAULT_GLOBAL_FILTER)}),this.private=new m8((...s)=>Me.publish(...s),t,()=>this.unsubscribe(),{authors:[e]},(...s)=>de.encrypt(...s),(...s)=>de.decrypt(...s)),this.public=new m8((...s)=>Me.publish(...s),t,()=>this.unsubscribe(),{authors:[e]}),this.public.get("notifications/lastOpened",s=>{s!==Me.notificationsSeenTime&&(Me.notificationsSeenTime=s,Me.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",s=>{if(s==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(s==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),on.init(),Uw.loadEvents();const n=setTimeout(()=>{uIe.checkExistingAccount(e)},1e3);tt.getProfile(e,async s=>{s&&s.nip05&&s.nip05.endsWith("@iris.to")&&(Ne.get("showNoIrisToAddress").put(!1),Ne.get("existingIrisToAddress").get("name").put(s.nip05.replace("@iris.to","")),clearTimeout(n))});const i=tt.getFollowersByUser(e,s=>{s!=null&&s.size?(Ne.get("noFollowers").put(!1),i()):Ne.get("noFollowers").put(!0)});setTimeout(()=>{Bt.subscribe({authors:[e]},void 0,!0),Bt.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),Bt.subscribe({"#p":[e],kinds:[4]},void 0,!1),Bt.subscribe({authors:[e],kinds:[4]},void 0,!1)},200),setInterval(()=>{console.log("handled msgs per second",Math.round(Me.handledMsgsPerSecond/5)),Me.handledMsgsPerSecond=0},5e3)},init:function(e){de.getOrCreate(e),Ne.get("loggedIn").on(()=>this.onLoggedIn()),Ne.get("loggedIn").on(()=>this.onLoggedIn()),Me.subscribeGroups()}};let ku=class extends $n{constructor(){super();ce(this,"userId",null);ce(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(t){t.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}setTitle(t){let n=t.split("/")[1]||he("home");n.startsWith("note")?n=he("post"):n.startsWith("npub")?(this.userId=n,n=v(Er,{pub:this.userId||""},`${this.userId}title`)):n=n.charAt(0).toUpperCase()+n.slice(1);const i=t.replace("/chat/new","").replace("/chat/","");if(t.indexOf("/chat/")===0&&t.indexOf("/chat/new")!==0&&(this.userId=i.length<t.length?i:null,t.indexOf("/chat/")===0&&this.userId===de.getPubKey()?n=v(ut,{children:[v("b",{className:"mr-5",children:""})," ",v("b",{children:he("note_to_self")})]}):n=v(Er,{pub:this.userId||""},`${this.userId}title`)),t.indexOf("/search/")===0){let s=t.replace("/search/","");s.indexOf("?")!==-1&&(s=s.substring(0,s.indexOf("?"))),n=`${he("search")}: ${decodeURIComponent(s)}`}this.setState({title:n})}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),Ne.get("showParticipants").on(this.inject()),Ne.get("unseenMsgsTotal").on(this.inject()),Ne.get("unseenNotificationCount").on(this.inject()),Ne.get("showConnectedRelays").on(this.inject()),Ne.get("isMyProfile").on(this.inject()),Ne.get("activeRoute").on(this.sub(t=>{this.setState({about:null,activeRoute:t,showMobileSearch:!1}),this.setTitle(t)})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){window.scrollTo(0,0),this.userId&&this.userId.indexOf("hashtag")===-1&&_r("/"+this.userId)}updateRelayCount(){this.setState({connectedRelays:on.getConnectedRelayCount()})}renderSearchBox(){return this.userId?"":v(YP,{onSelect:t=>_r(`/${t.key}`)})}renderConnectedRelays(){return v("a",{href:"/settings/network",className:`ml-2 tooltip tooltip-bottom mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,"data-tip":he("connected_relays"),children:v("small",{className:"flex items-center gap-2",children:[v("span",{class:"icon",children:to.network}),v("span",{children:this.state.connectedRelays})]})})}renderTitle(){const t=this.state.activeRoute==="/";return v("div",{className:`flex-1 text-center ${t?"invisible md:visible":""}`,onClick:()=>this.onTitleClicked(),children:this.state.title})}renderNotifications(){return v(ut,{children:[v(dt,{when:this.state.isMyProfile,children:v(Qt,{href:"/settings",className:"md:hidden",children:v(IH,{width:28})})}),v("a",{href:"/notifications",className:`relative inline-block ${this.state.isMyProfile?"hidden md:flex":""}`,children:[this.state.activeRoute==="/notifications"?v(y3,{width:28}):v(AH,{width:28}),v(dt,{when:this.state.unseenNotificationCount,children:v("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-iris-purple text-white text-sm rounded-full h-5 w-5 flex items-center justify-center",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount})})]})]})}renderLoginBtns(){return v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>Ne.get("showLoginModal").put(!0),children:he("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>Ne.get("showLoginModal").put(!0),children:he("sign_up")})]})}renderBackBtnOrLogo(){return this.state.activeRoute==="/"?v(ut,{children:[v("div",{className:"flex flex-row items-center gap-2 md:hidden",children:[v("img",{src:"/img/dwotr/logo30.png",style:"padding-top:5px"}),v("h1",{className:"text-3xl",children:"Dpeep"})]}),v("h6",{children:"Iris clone with DWoTR"})]}):v(CH,{width:24,onClick:()=>this.backButtonClicked()})}render(){const n=!!de.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[this.renderBackBtnOrLogo(),v(dt,{when:n&&this.state.showConnectedRelays,children:this.renderConnectedRelays()}),this.renderTitle(),v(dt,{when:n,children:this.renderNotifications()}),v(dt,{when:!n,children:this.renderLoginBtns()})]})})})}};const n1="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8";class hIe extends $n{render(){return v(ut,{children:[v(ku,{}),v("div",{className:"main-view prose",id:"settings",children:v("div",{className:"px-2 md:px-4 py-2",children:[v("h2",{className:"mt-0",children:he("about")}),v("p",{children:"Iris is like the social networking apps we're used to, but better:"}),v("ul",{children:[v("li",{children:[v("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),v("li",{children:[v("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),v("li",{children:[v("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!hr.isStandalone()&&v(ut,{children:[v("h3",{children:"Versions"}),v("p",{children:v("ul",{children:[v("li",{children:[v("a",{target:"_blank",href:"https://iris.to",children:"iris.to"})," ","(web)"]}),v("li",{children:[v("a",{target:"_blank",href:"https://github.com/irislib/iris-messenger/releases/latest",children:"Desktop"})," ","(macOS, Windows, Linux)"]}),v("li",{children:v("a",{target:"_blank",href:"https://apps.apple.com/app/iris-the-nostr-client/id1665849007",children:"iOS"})}),v("li",{children:[v("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=to.iris.twa",children:"Android"})," ","(",v("a",{target:"_blank",href:"https://github.com/irislib/iris-messenger/releases/tag/jan2023",children:"apk"}),")"]})]})})]}),v("h3",{children:"Iris docs"}),v("p",{children:["Visit Iris ",v("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),v("h3",{children:"Privacy"}),v("p",{children:he("application_security_warning")}),v("h3",{children:"Follow"}),v("div",{className:"flex flex-row items-center w-full justify-between",children:[v(Qt,{href:`/${n1}`,className:"flex flex-row items-center gap-2",children:[v(hs,{str:n1,width:40}),v(Er,{pub:n1,placeholder:"Iris"})]}),v(Wh,{className:"btn btn-neutral btn-sm",id:n1})]}),v("p",{children:[v("a",{href:"https://t.me/irismessenger",children:"Telegram"})," channel."]}),v("p",{children:["Released under MIT license. Code:"," ",v("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"."]}),v("br",{})]})})]})}}class QP extends zn{constructor(){super(...arguments);ce(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t.message}}componentDidCatch(t){console.error(t),this.setState({error:t.message})}render(){return this.state.error?v("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}const dIe=e=>e;function pIe({date:e}){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;let o="";return t<n?o=dIe("now"):t<i?o=Math.floor(t/n)+"m":t<s?o=Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?o=e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):o=e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),v(ut,{children:o})}const vIe=gi(({event:e})=>{var r,t;return v("div",{className:"flex gap-4 w-full break-words",children:[v("div",{className:"flex-shrink-0",children:v(Qt,{href:`/${Mc.npubEncode(e.pubkey)}`,children:v(hs,{str:e.pubkey,width:30})})}),v(Qt,{href:`/${Mc.noteEncode(e.id)}`,className:"w-full",children:[v("b",{children:v(Er,{pub:e.pubkey})})," | ",v("span",{className:"text-neutral-400",children:[v(pIe,{date:new Date(e.created_at*1e3)}),v("br",{}),((r=e.content)==null?void 0:r.length)>80?`${(t=e.content)==null?void 0:t.slice(0,80)}...`:e.content]})]})]},e.id)}),gIe=({events:e})=>{const r=[];return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:[v(gue,{width:20,className:"text-iris-orange"}),"Trending 24h"]}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-6 text-xs overflow-x-hidden",children:e.filter(t=>!r[t.pubkey]).map(t=>v(vIe,{event:t}))})]})},yIe=gi(gIe),MV=(e,r,t=n=>n)=>{const n=localStorage.getItem(r),i=n?JSON.parse(n).data:[],[s,o]=Le(i);return St(()=>{const a=()=>{fetch(e).then(l=>l.json()).then(l=>{const u=t(l);o(u),localStorage.setItem(r,JSON.stringify({data:u,timestamp:new Date().getTime()}))}).catch(()=>{if(n){const{data:l}=JSON.parse(n);o(l)}})};if(n){const{timestamp:l}=JSON.parse(n);(new Date().getTime()-l)/1e3/60>=15&&a()}else a()},[e,r,t]),s},mIe=e=>{const[r,t]=Le(Wi.getDefaultProfile(vt(e)));return St(()=>{if(!e)return;const n=Wi.getProfile(e,i=>{i&&t(i)});return()=>{n()}},[e]),r},bIe=gi(({pubkey:e})=>{var t,n;const r=mIe(e);return v(Qt,{href:`/${Mc.npubEncode(e)}`,className:"flex flex-row gap-4 w-full break-words",children:[v("span",{className:"flex-shrink-0",children:v(hs,{str:e,width:30})}),v("span",{className:"flex-1",children:[v("b",{children:v(Er,{pub:e})}),v("br",{}),v("span",{className:"text-neutral-400",children:[(t=r==null?void 0:r.about)==null?void 0:t.slice(0,100),((n=r==null?void 0:r.about)==null?void 0:n.length)>100?"...":""]})]}),v("span",{className:"flex-shrink-0",children:v(Wh,{className:"btn btn-sm",id:e})})]},e)}),wIe=gi(()=>{const e=`https://api.nostr.band/v0/suggested/profiles/${de.getPubKey()}`,r=MV(e,"followSuggestions",n=>n.profiles||[]);if(!r.length)return null;const t=r.sort(()=>.5-Math.random()).slice(0,8).map(n=>n.pubkey);return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:"Follow suggestions"}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-4 items-center text-xs overflow-x-hidden",children:t.map(n=>v(bIe,{pubkey:n},n))})]})}),LV=e=>{const n=MV("https://api.nostr.band/v0/trending/notes","trendingNotes",i=>{const s=i.notes.map(o=>o.event);return s.forEach(o=>{Me.handle(o)}),s});return v("div",{class:"sticky border-l border-neutral-900 top-0 right-0 px-4 py-2 mx-2 md:mx-0 flex flex-col gap-4 h-screen",children:[v(YP,{focus:e.focus,onSelect:({key:i})=>{_r("/"+i)}}),v("div",{className:"max-h-[50vh] overflow-y-scroll",children:v(yIe,{events:n})}),v("div",{className:"max-h-[50vh] overflow-y-scroll",children:v(wIe,{})})]})};let FV=!0;const jV=function(){FV=!1,window.removeEventListener("popstate",jV)};window.addEventListener("popstate",jV);let qh=class extends $n{constructor(){super(...arguments);ce(this,"class","");ce(this,"id","");ce(this,"observer",null);ce(this,"scrollPosition",0);ce(this,"hideSideBar",!1);ce(this,"hideHeader",!1);ce(this,"saveScrollPosition",wn.debounce(()=>{const t=window.scrollY||document.documentElement.scrollTop,i={...window.history.state,scrollPosition:t};window.history.replaceState(i,"")},100));ce(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(t=>{t.forEach(()=>{this.restoreScrollPosition(!1)})}),this.observer.observe(document.body),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3)})}render(){return v("div",{className:"flex flex-row h-full w-full",children:[v("div",{className:`flex flex-col w-full h-full ${this.hideSideBar?"":"lg:w-2/3"}`,children:[v(dt,{when:!this.hideHeader,children:v(ku,{})}),v("div",{class:this.class,id:this.id,className:"h-full",children:v(QP,{children:this.renderView()})})]}),v(dt,{when:!this.hideSideBar,children:v("div",{className:"flex-col hidden lg:flex lg:w-1/3",children:v(LV,{focus:!1})})})]})}componentDidMount(){window.addEventListener("scroll",this.saveScrollPosition),this.restoreScrollPosition()}restoreScrollPosition(t=!0){var s,o;const n=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!FV&&n!==i)t&&this.observeScrollElement(),this.scrollPosition||(this.scrollPosition=(o=window.history.state)==null?void 0:o.scrollPosition),this.scrollPosition&&window.scrollTo(0,this.scrollPosition);else{const l={...window.history.state||{},previousState:n};window.history.replaceState(l,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect(),window.removeEventListener("scroll",this.saveScrollPosition)}};const $Ie=({chat:e,active:r=!1,latestMsg:t={}})=>{const[n]=Le(e.length<20),[i,s]=Le(null),[o,a]=Le(t.text||"");St(()=>{n&&Ne.get("groups").get(e).on(d=>{d.name&&s(d.name)})},[e]),St(()=>{n||t.text||!t.id||Me.getEventById(t.id,!1,d=>{d&&de.decryptMessage(t,y=>{a(y),Ne.get("chats").get(e).get("latest").get("text").put(y)})})},[t.id]);const l=d=>{d.keyCode===13&&d.target.click()},u=r?"bg-neutral-800":"hover:bg-neutral-900",f=t.created_at&&hr.getRelativeTimeText(new Date(t.created_at*1e3))||"",c=de.toNostrBech32Address(e,"npub");return v("div",{onKeyUp:l,role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 ${u}`,onClick:()=>_r(`/chat/${c||e}`),children:[v(hs,{str:c||e,width:49}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:[v("span",{className:"name",children:[v(dt,{when:i,children:i}),v(dt,{when:!i,children:[v(dt,{when:e===de.getPubKey(),children:v("span",{className:"font-bold italic",children:[" ",he("note_to_self")]})}),v(dt,{when:e!==de.getPubKey(),children:v(Er,{pub:e})}),v("small",{className:"ml-2 latest-time text-neutral-500",children:f})]})]}),v("small",{className:"text-neutral-500 truncate",children:o})]})})]})},_Ie=gi($Ie),xIe=({active:e})=>v("div",{role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 h-16 items-center cursor-pointer hover:bg-neutral-900 ${e?"bg-neutral-700":""}`,onClick:()=>_r("/chat/new"),children:[v("div",{className:"flex justify-center items-center w-12 h-12 rounded-full",children:v(DH,{className:"w-6 h-6"})}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:v("span",{className:"name",children:he("new_chat")})})})]}),EIe=(e,r)=>{const t=e.value.latest,n=r.value.latest;return t?n?n.created_at-t.created_at:-1:1},SIe=({activeChat:e,className:r})=>{const[t,n]=Le(new eP(EIe)),[i,s]=Le(0),o=ro(null),a=()=>{Notification&&Notification.requestPermission().then(u=>{(u==="granted"||u==="denied")&&Jt("#enable-notifications-prompt").slideUp()})};St(()=>{const u=[],f=(c,d)=>{n(y=>(y.set(d,{...c}),y)),s(y=>y+1)};return u.push(Ne.get("chats").map(f)),u.push(Ne.get("groups").map(f)),u.push(Ne.get("scrollUp").on(()=>{window.scrollTo(0,0),o.current&&(o.current.scrollTop=0)})),()=>u.forEach(c=>c())},[]);const l=e&&de.toNostrHexAddress(e)||e;return v("section",{className:`md:border-r border-neutral-800 overflow-x-hidden overflow-y-auto h-full md:px-0 w-full md:w-64 ${r}`,ref:o,children:[v("div",{id:"enable-notifications-prompt",className:"hidden",onClick:a,children:[v("div",{className:"title",children:he("get_notified_new_messages")}),v("div",{children:v("a",{children:he("turn_on_desktop_notifications")})})]}),v("div",{className:"flex flex-1 flex-col",children:[v(xIe,{active:l==="new"}),Array.from(t.entries()).map(([u,f])=>v(_Ie,{active:u===l,chat:u,latestMsg:f==null?void 0:f.latest},u))]})]})},zV=({event:e,selfAuthored:r,showName:t,torrentId:n})=>{const[i,s]=Le(e.text||""),[o,a]=Le(null),[l,u]=Le(!1);St(()=>{Jt("a").click(I=>{const O=Jt(I.target).attr("href");O&&O.indexOf("https://iris.to/")===0&&(I.preventDefault(),_r(O.replace("https://iris.to/","")))});let x=i;x?f(x):de.decryptMessage(e,I=>{x=I,f(x)})},[e.id,i]);const f=x=>{try{const I=x.slice(x.indexOf("{")),O=JSON.parse(I);if(Dy(O)&&Hp(O)&&(console.log(111,O.tags.length===1,O.tags[0][0]==="p",O.tags[0][1]===O.pubkey),O.tags.length===1&&O.tags[0][0]==="p"&&O.tags[0][1]===e.pubkey)){O.text=O.content,a(O);return}}catch{}u(!0),s(x)};if(o)return v(zV,{event:o,showName:!0,selfAuthored:o.pubkey===de.getPubKey()});if(!l)return null;const c=()=>{_r(`/${de.toNostrBech32Address(e.pubkey,"npub")}`)},d=i&&i.length===2&&hr.isEmoji(i),y=hr.highlightEverything(i||""),w=typeof e.created_at=="object"?e.created_at:new Date(e.created_at*1e3),b="",T=b.seen?"text-green-500":"text-neutral-500",_=b.delivered?"border-green-500":"border-neutral-500";return v("div",{className:`p-2 w-full md:w-2/3 rounded-xl mb-1 ${r?"self-end bg-iris-blue text-white":"self-start bg-neutral-700 text-white"} ${T} ${_} flex flex-col items-start`,children:v("div",{className:"w-full",children:[v("div",{className:"mb-2",children:t&&v("small",{onClick:c,className:"cursor-pointer text-xs",children:v(Er,{pub:e.pubkey},e.pubkey)})}),n&&v(Mm,{torrentId:n}),v("div",{className:`preformatted-wrap text-base ${d?"text-4xl":""}`,children:y}),v("div",{className:`${r?"text-right":"text-left"} text-xs text-white`,children:e.id?hr.getRelativeTimeText(w):hr.formatTime(w)})]})})},kIe=gi(zV),TIe=({activeChat:e,class:r,autofocus:t,onSubmit:n,keyPair:i})=>{const[s,o]=Le(""),a=ro(null);St(()=>{var d;!hr.isMobile&&t!==!1&&((d=a.current)==null||d.focus())},[t]);const l=d=>{try{const y=de.toNostrHexAddress(e);if(!y)throw new Error("invalid public key "+y);return de.encrypt(d,y)}catch(y){console.error(y)}},u=async d=>{if(d.preventDefault(),!s.length)return;const y=4,w=Math.floor(Date.now()/1e3),b={kind:y,created_at:w};if(i){let T={kind:y,created_at:w,content:s,tags:[["p",i.pubKey]]};T=await Me.sign(T),b.content=await Ih.encrypt(i.privKey,i.pubKey,`${s}

${JSON.stringify(T)}`),b.pubkey=i.pubKey,b.tags=[["p",i.pubKey]],console.log("event",b),b.id=Th(b),b.sig=q3(b,i.privKey)}else{const T=de.toNostrHexAddress(e);if(b.content=await l(s),b.tags=[["p",T]],!T)throw new Error("invalid public key "+T)}Me.publish(b),o(""),n==null||n()},f=d=>{const y=d.target.value;o(y),Ne.get("channels").get(e).get("msgDraft").put(y)},c=d=>{(d.metaKey||d.ctrlKey)&&d.key==="Enter"&&u(d)};return v("form",{autoComplete:"off",className:`flex flex-none flex-row gap-2 p-2 message-form sticky w-full bottom-0 w-96 max-w-screen bg-black ${r||""}`,onSubmit:u,children:[v("input",{ref:a,className:"input input-sm flex-1 new-msg bg-neutral-700 text-white",onInput:f,onKeyDown:c,type:"text",placeholder:"Type a message",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0,value:s}),v("button",{className:`btn btn-sm ${s.length>0?"text-white bg-iris-blue":""}`,style:{marginRight:"0"},disabled:s.length===0,children:v(g3,{width:"24"})})]})};function IIe({id:e}){const r=ro(null),t=ro(new eP("created_at")),[n,i]=Le([]),[s,o]=Le(!0),[a,l]=Le(""),[u,f]=Le(!1),[c,d]=Le(void 0),[y,w]=Le(!1),b=[];let T;const _=()=>{let B=Jt(".day-separator").last(),z=B.position();for(;B&&z&&z.top-55>0;)B=B.prevAll(".day-separator").first(),z=B.position();const V=B.clone(),ne=Jt("<div>").css({position:"fixed",top:70,"text-align":"center"}).attr("id","floating-day-separator").width(Jt("#message-view").width()).append(V);Jt("#floating-day-separator").remove(),setTimeout(()=>V.fadeOut(),2e3),Jt("#message-view").prepend(ne)},A=()=>{const B=de.toNostrHexAddress(e);bwe(B)},x=()=>{const B=Jt("#message-view");B[0].scrollHeight-B.scrollTop()<=B.outerHeight()+200?Jt("#scroll-down-btn:visible").fadeOut(150):Jt("#scroll-down-btn:not(:visible)").fadeIn(150)},I=xh(()=>(c==null?void 0:c.privKey)&&de.toNostrBech32Address(c.privKey,"nsec")||"",[c]),O=()=>{T=T||k_(()=>{Jt("#attachment-preview:visible").length||(_(),x())},200),T()},C=()=>{hr.scrollToMessageListBottom();const B=document.getElementById("message-list");B&&(B.style.paddingBottom="0")},g=()=>{let B;const z=de.getPubKey(),V=new Date,ne=V.toLocaleDateString();let re,J;const F=[];return e&&e.length>4&&(n.forEach(Z=>{if(!Z)return null;const ie=new Date(Z.created_at*1e3);let _e;if(ie){const Ce=ie.toLocaleDateString();if(Ce!==re){_e=!0;const He=hr.getDaySeparatorText(ie,Ce,V,ne);F.push(v("div",{className:"px-2 mt-3 mb-4 py-1 inline-block day-separator bg-black opacity-50 text-white rounded-full",children:he(He.toLowerCase())}))}re=Ce}let we=_e;!_e&&J&&Z.pubkey!==J&&(F.push(v("div",{className:"m-2"})),we=!0),J=Z.pubkey,F.push(v(kIe,{event:Z,showName:we,selfAuthored:Z.pubkey===z},`${Z.created_at}${Z.pubkey}`))}),B=v("div",{className:"main-view p-2 overflow-y-auto overflow-x-hidden flex-grow min-h-screen",id:"message-view",onScroll:()=>O(),children:[v("div",{id:"message-list",className:"w-full flex flex-col items-center",children:[F,v("div",{className:"italic my-2 text-neutral-500 w-full text-center",children:[v(dt,{when:y&&c,children:[v("div",{children:he("secret_chat")}),v("div",{className:"flex gap-2 flex-1 items-center justify-center my-4",children:[v("button",{className:"btn btn-neutral btn-sm",onClick:()=>f(Z=>!Z),children:[v(Mue,{width:"20"}),he("show_qr_code")]}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:I(),text:"Copy nsec"}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:hr.buildURL("chat",void 0,I()),text:he("copy_link")})]}),v(dt,{when:u,children:v(XP,{data:"nostr:"+I()})})]}),v(dt,{when:!y&&de.toNostrHexAddress(e)!==z,children:[v("div",{children:he("dm_privacy_warning")}),v("div",{className:"mt-4 flex gap-2 justify-center",children:[v(dt,{when:a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:()=>F_(a),children:"Go to secret chat"})}),v(dt,{when:!a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:A,children:"Invite to secret chat"})})]})]})]})]}),v("div",{id:"attachment-preview",className:"attachment-preview",style:{display:"none"}})]})),B},M=()=>v(ut,{children:[v("div",{id:"scroll-down-btn",style:{display:"none"},onClick:()=>C(),children:v(Hle,{width:"24"})}),v(TIe,{activeChat:e,onSubmit:()=>C(),keyPair:c},e)]});return St(()=>{const B=de.toNostrHexAddress(e),z=re=>{const J=F=>{t.current.set(F.id,F),i(Array.from(t.current.values()))};b.push(Bt.subscribe({kinds:[4],"#p":[de.getPubKey()],authors:[re]},J)),re!==de.getPubKey()&&b.push(Bt.subscribe({kinds:[4],"#p":[re],authors:[de.getPubKey()]},J))};Ne.get("chatInvites").get(B).once(re=>{re!=null&&re.priv&&l(re.priv)});const V=()=>{const re=Ne.get("groups").get(e);re.on(J=>{const F=J.key,Z=kh(F);d({privKey:F,pubKey:Z}),b.push(Bt.subscribe({kinds:[4],"#p":[Z],authors:[Z]},async ie=>{const _e=await Ih.decrypt(F,Z,ie.content);t.current.set(ie.id,{...ie,text:_e}),i(Array.from(t.current.values()));const we=re.get("latest"),Ce=await we.once();(!Ce||!Ce.created_at||Ce.created_at<ie.created_at)&&we.put({id:ie.id,created_at:ie.created_at,text:_e.slice(0,_e.indexOf("{"))})}))})};if(B?z(B):(w(!0),V()),document.getElementById("message-list")){const re=Jt("#message-view");re.off("scroll").on("scroll",()=>{const J=re[0].scrollHeight-re.scrollTop()==re.outerHeight();s&&!J?o(!1):!s&&J&&o(!0)})}return()=>{b.forEach(re=>re())}},[e]),St(()=>{s&&hr.scrollToMessageListBottom(),Jt(".msg-content img").off("load").on("load",()=>s&&hr.scrollToMessageListBottom())},[s]),v(ut,{children:[v(Eh,{children:v("title",{children:"Messages"})}),v("div",{id:"chat-main",ref:r,className:`${e?"":"hidden"} flex flex-1 flex-col`,children:[g(),v(dt,{when:e&&e.length>4,children:M()})]})]})}const AIe=({activeChat:e})=>{const r=()=>{window.history.back()},t=()=>{window.scrollTo(0,0),e&&e.length>15&&_r("/"+de.toNostrBech32Address(e,"npub"))},n=()=>v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>Ne.get("showLoginModal").put(!0),children:he("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>Ne.get("showLoginModal").put(!0),children:he("sign_up")})]}),s=!!de.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",onClick:t,children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[v(CH,{width:24,onClick:r}),v(dt,{when:e,children:v("div",{className:"flex flex-row gap-2 items-center",children:[v(hs,{width:30,str:e}),v(Er,{pub:e})]})}),v(dt,{when:!e,children:v("div",{className:"flex flex-row gap-2 items-center",children:he("chat")})}),v(dt,{when:s,children:v("div",{})}),v(dt,{when:!s,children:n()})]})})})};class b8 extends qh{constructor(){super();ce(this,"id");ce(this,"renderContent",t=>t==="new"?v(wwe,{}):t?v(IIe,{id:t},t):v("div",{className:"hidden md:flex flex-col items-center justify-center flex-1",children:[v("div",{className:"my-4",children:v(m3,{className:"w-24 h-24 text-neutral-400"})}),v("div",{className:"text-neutral-400",children:he("dm_privacy_warning")})]}));this.id="chat-view",this.hideSideBar=!0,this.hideHeader=!0}componentDidMount(){super.componentDidMount();const t=window.location.hash.substr(1);t&&t.startsWith("nsec")&&(window.history.replaceState({},document.title,window.location.pathname),de.getPubKey()||de.loginAsNewUser(),MK(t))}renderView(){const{id:t}=this.props;return v("div",{className:"flex flex-col h-screen",children:[v(AIe,{activeChat:t},t),v("div",{className:"flex flex-row flex-grow overflow-hidden",children:[v("div",{className:`flex-shrink-0 ${t?"hidden md:flex overflow-y-auto h-screen":"flex overflow-y-auto h-screen"}`,children:v(SIe,{activeChat:t,className:t?"hidden md:flex":"flex"})}),v("div",{className:`flex-grow min-h-screen overflow-y-scroll ${t?"flex":"hidden md:flex"}`,children:this.renderContent(t)},`chat-content-${t}`)]})]})}}const OIe=e=>{const[r,t]=Le("");return v(ut,{children:[v("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;if(s&&s.length){const o=new FormData;o.append("fileToUpload",s[0]),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:o}).then(async a=>{const l=await a.json();l&&e.onUrl&&e.onUrl(l)}).catch(a=>{console.error("upload error",a),t("upload failed: "+JSON.stringify(a))})}}}),r?v("p",{children:r}):null]})},CIe={lud16:"Bitcoin lightning address  (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class PIe extends $n{constructor(t){super(t);ce(this,"saveOnChange",wn.debounce(()=>{const t=this.state.profile;Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n]=t[n].trim())}),tt.setMetadata(t)},2e3));ce(this,"setProfileAttribute",(t,n)=>{t=t.trim();const i=Object.assign({},this.state.profile);n?i[t]=n:delete i[t],this.setState({profile:i,edited:!0}),this.saveOnChange()});ce(this,"handleSubmit",t=>{t.preventDefault(),tt.setMetadata(this.state.profile);const n=de.toNostrBech32Address(de.getPubKey(),"npub");_r("/"+n)});ce(this,"handleAddField",t=>{t.preventDefault();const n=this.state.newFieldName,i=this.state.newFieldValue;n&&i&&(this.setProfileAttribute(n,i),this.setState({newFieldName:"",newFieldValue:""}),tt.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){tt.getProfile(de.getPubKey(),t=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete t.created_at,this.setState({profile:t}))})}render(){const t=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(n=>{t.includes(n)||t.push(n)}),v(ut,{children:[v(ku,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container prose",children:[v("h3",{children:he("edit_profile")}),v("form",{onSubmit:n=>this.handleSubmit(n),children:[t.map(n=>{const i=this.state.profile[n],s=typeof i=="string"||typeof i>"u";return v("p",{children:[v("label",{htmlFor:n,children:[CIe[n]||n,":"]}),v("br",{}),v("input",{className:"input w-full",type:"text",id:n,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:o=>s&&this.setProfileAttribute(n,o.target.value)}),n==="lud16"&&!i&&v("p",{children:v("small",{children:he("install_lightning_wallet_prompt")})}),n==="picture"||n==="banner"?v(ut,{children:[v("p",{children:v(OIe,{onUrl:o=>this.setProfileAttribute(n,o)})}),i&&v("p",{children:v(mu,{src:i})})]}):null]})}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Save"})})]}),v("h4",{children:"Add new field"}),v("form",{onSubmit:n=>this.handleAddField(n),children:[v("p",{children:[v("label",{htmlFor:"newFieldName",children:"Field name:"}),v("br",{}),v("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",className:"input w-full",placeholder:he("field_name"),onInput:n=>this.setState({newFieldName:n.target.value})})]}),v("p",{children:[v("label",{htmlFor:"newFieldValue",children:"Field value:"}),v("br",{}),v("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",className:"input w-full",placeholder:he("field_value"),onInput:n=>this.setState({newFieldValue:n.target.value})})]}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Add new attribute"})})]})]})})]})}}const w8=_n.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;

  &:nth-child(odd) {
    background-color: var(--zebra-stripe-bg);
  }
`,i1=_n.div`
  flex: 1;
  padding: 0 10px;

  &:first-of-type {
    flex: none;
  }
`,HV=({path:e})=>{const[r,t]=Le(void 0);return St(()=>{var i;const n=(i=Ch.public)==null?void 0:i.get(e,t);return()=>n==null?void 0:n.off()}),typeof r=="object"&&r!==null?v(w8,{children:[v(i1,{children:e}),v(i1,{children:Object.keys(r).map(n=>v(HV,{path:`${e}/${n}`}))})]}):v(w8,{class:"node",children:[v(i1,{children:e}),v(i1,{children:JSON.stringify(r)})]})};function $8({path:e}){return e=e||"/",v(ut,{children:[v(ku,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container",children:[v("h2",{children:[he("explorer")," ",e]}),v("div",{class:"explorer",children:v(HV,{path:e})})]})})]})}class _8{constructor(r="created_at",t="desc"){ce(this,"eventMap");ce(this,"sortedEventIds");ce(this,"sortBy");ce(this,"sortDirection");this.sortBy=r,this.sortDirection=t,this.eventMap=new Map,this.sortedEventIds=[]}compareFn(r,t){var s,o,a,l;let n,i;return!r||!t?0:r&&!t?-1:!r&&t?1:(this.sortBy==="created_at"?(n=r.created_at,i=t.created_at):this.sortBy==="likes"?(n=((s=Me.likesByMessageId.get(r.id))==null?void 0:s.size)||0,i=((o=Me.likesByMessageId.get(t.id))==null?void 0:o.size)||0):this.sortBy==="zaps"&&(n=((a=Me.zapsByNote.get(r.id))==null?void 0:a.size)||0,i=((l=Me.zapsByNote.get(t.id))==null?void 0:l.size)||0),this.sortDirection==="desc"?i-n:n-i)}has(r){return this.eventMap.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");return this.eventMap.has(r.id)?!1:(this.eventMap.set(r.id,r),this.insertEventId(r.id),!0)}delete(r){if(!this.eventMap.delete(r))return!1;const n=this.sortedEventIds.findIndex(i=>i===r);return n===-1?!1:(this.sortedEventIds.splice(n,1),!0)}get eventIds(){return this.sortedEventIds}get(r){return this.eventMap.get(r)}events(){return this.sortedEventIds.map(r=>this.eventMap.get(r))}last(){return this.eventMap.get(this.sortedEventIds[this.sortedEventIds.length-1])}first(){return this.eventMap.get(this.sortedEventIds[0])}get size(){return this.eventMap.size}insertEventId(r){const t=this.eventMap.get(r);let n=0,i=this.sortedEventIds.length;for(;n<i;){const s=Math.floor((n+i)/2),o=this.eventMap.get(this.sortedEventIds[s]);this.compareFn(t,o)<0?i=s:n=s+1}this.sortedEventIds.splice(n,0,r)}}function NIe({events:e,displayCount:r,renderAs:t,showRepliedMsg:n,openedAt:i,settings:s}){return e.slice(0,r).map(o=>v(QP,{children:v(qo,{id:o,showRepliedMsg:n,renderAs:t,feedOpenedAt:i,showReplies:0,fullWidth:!s.showReplies},o)}))}const RIe=gi(NIe),DIe=({settings:e,onChange:r})=>{const[t,n]=Le(e);St(()=>{n(e)},[e]);const i=()=>{const l=new URL(window.location.href);t.display==="grid"?l.searchParams.set("display","grid"):l.searchParams.delete("display"),t.showReplies===!1?l.searchParams.set("showReplies","0"):l.searchParams.delete("showReplies"),t.realtime?l.searchParams.set("realtime","1"):l.searchParams.delete("realtime"),window.history.replaceState({},document.title,l.toString())},s=()=>{r(t),i()},o=[{type:"checkbox",id:"display_realtime",checked:t.realtime,label:he("realtime"),onChange:()=>n({...t,realtime:!t.realtime})},{type:"checkbox",id:"show_replies",checked:t.showReplies,name:"show_replies",label:he("show_replies"),onChange:()=>n({...t,showReplies:!t.showReplies})}],a=[{label:he("display"),name:"display",inputs:[{value:"posts",id:"display_posts",label:he("posts")},{value:"grid",id:"display_grid",label:he("grid")}],checked:t.display,onChange:l=>n({...t,display:l.target.value})},{label:he("sort_by"),name:"sortBy",inputs:[{value:"created_at",id:"sortByTime",label:he("time")},{value:"likes",id:"sortByLikes",label:he("likes")},{value:"zaps",id:"sortByZaps",label:he("zaps")}],checked:t.sortBy,onChange:l=>n({...t,sortBy:l.target.value})},{label:he("sort_direction"),name:"ordering",inputs:[{value:"desc",id:"ordering_desc",label:""},{value:"asc",id:"ordering_asc",label:""}],checked:t.sortDirection,onChange:l=>n({...t,sortDirection:l.target.value})},{label:he("timespan"),name:"timespan",inputs:[{value:"all",id:"timespanAll",label:he("All time")},{value:"day",id:"timespanDay",label:he("day")},{value:"week",id:"timespanWeek",label:he("week")},{value:"month",id:"timespanMonth",label:he("month")},{value:"year",id:"timespanYear",label:he("year")}],checked:t.timespan,onChange:l=>n({...t,timespan:l.target.value})}];return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:"display:flex;flex-direction:column",children:[v("div",{children:o.map((l,u)=>v("span",{children:[v("input",{...l}),v("label",{htmlFor:l.id,children:l.label})]},u))}),a.map((l,u)=>v("div",{style:{flexDirection:"column"},children:[v("p",{children:[l.label,":"]}),v("p",{children:l.inputs.map((f,c)=>v("span",{children:[v("input",{type:"radio",name:l.name,id:f.id,value:f.value,checked:l.checked===f.value,onChange:l.onChange}),v("label",{htmlFor:f.id,children:f.label})]},c))})]},u)),v("p",{children:v(hh,{onClick:s,children:he("save")})})]})})})};function BIe({setDisplay:e,display:r,index:t}){const n=["posts","postsAndReplies","likes"].includes(t);return v("div",{className:"flex mb-px lg:mb-1",children:[v("button",{onClick:()=>{e("posts"),Ne.get("settings").get("feed").get("display").put("posts")},className:`${r==="grid"?"hover:bg-neutral-900":"bg-neutral-800"} ${n?"isProfile_left":""} rounded-sm flex justify-center flex-1 p-3`,children:v(Nle,{width:24,height:24})}),v("button",{onClick:()=>{e("grid"),Ne.get("settings").get("feed").get("display").put("grid")},className:`${r==="grid"?"bg-neutral-800":"hover:bg-neutral-900"} ${n?"isProfile_right":""} rounded-sm flex justify-center flex-1 p-3`,children:v(sue,{width:24,height:24})})]})}const MIe=_n.div`
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 4px;
  @media (max-width: 1023px) {
    grid-gap: 1px;
  }
`;function LIe({onClick:e}){return v("button",{className:"btn btn-neutral btn-sm m-4",onClick:e,children:he("show_more")})}function FIe({onClick:e}){return v("div",{className:"fixed bottom-16 md:bottom-8 justify-center items-center z-10 flex w-full md:w-1/2 pb-safe-area",children:v("div",{className:"btn btn-sm opacity-90 hover:opacity-100 hover:bg-iris-blue bg-iris-blue text-white",onClick:e,children:he("show_n_new_messages").replace("{n} ","")})})}const Ld=10;let UV=!0;const WV=function(){UV=!1,window.removeEventListener("popstate",WV)};window.addEventListener("popstate",WV);const x8={display:"posts",realtime:!1,showReplies:!1,sortBy:"created_at",sortDirection:"desc",timespan:"all"};let jIe=class extends $n{constructor(t){super(t);ce(this,"openedAt");ce(this,"subscribeRetryTimeout");ce(this,"unsub");ce(this,"unsubLoadMore");ce(this,"twoSecondsPassed");ce(this,"sortedEventMap");ce(this,"handleScroll",()=>{if(this.state.displayCount<this.state.events.length){const t=window.scrollY||document.documentElement.scrollTop,n=document.documentElement.clientHeight,i=document.documentElement.scrollHeight;t+n>=i-1e3&&(this.setState({displayCount:this.state.displayCount+Ld}),console.log("show more events",this.state.displayCount))}else if(!this.unsubLoadMore){console.log("loadMore");const t=()=>{var i;(i=this.unsubLoadMore)==null||i.call(this),this.unsubLoadMore=void 0};let n=setTimeout(t,2e3);this.unsubLoadMore=this.getEvents(i=>{console.log("got More"),this.handleEvent(i),clearTimeout(n),n=setTimeout(t,2e3)})}});ce(this,"handleScrollKeys",t=>{const n=t.key;n==="j"&&window.scrollBy({top:document.documentElement.clientHeight/2,left:0,behavior:"smooth"}),n==="k"&&window.scrollBy({top:-document.documentElement.clientHeight/2,left:0,behavior:"smooth"})});ce(this,"replaceState",wn.debounce(()=>{window.history.replaceState({...window.history.state,state:this.state},"")},1e3,{leading:!0,trailing:!0}));let n={};Ne.get("settings").get("feed").once(i=>n=i),this.state={events:[],queuedEvents:[],displayCount:Ld,settings:this.getSettings(n)},this.openedAt=Math.floor(Date.now()/1e3),this.twoSecondsPassed=!1,this.sortedEventMap=new _8(this.state.settings.sortBy,this.state.settings.sortDirection)}getSettings(t={}){var i,s,o,a;let n={...x8};["global","follows"].includes(((i=this.props)==null?void 0:i.index)||"")&&(n=Object.assign(n,t)),((s=this.props)==null?void 0:s.index)!=="notifications"&&t.display&&(n.display=t.display),((o=this.props)==null?void 0:o.index)==="posts"&&(n.showReplies=!1),["postsAndReplies","notifications","likes"].includes(((a=this.props)==null?void 0:a.index)||"")&&(n.showReplies=!0);for(const l in n){const u=hr.getUrlParameter(l);u!==null&&(u==="1"||u==="0"?n[l]=u==="1":n[l]=u)}return this.props.keyword&&(n.showReplies=!0),n}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("keyup",this.handleScrollKeys),this.unsub&&this.unsub()}componentDidMount(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("keyup",this.handleScrollKeys),this.subscribe(),$V(this.state.settings,x8)&&Ne.get("settings").get("feed").on(this.sub(t=>{const n=this.getSettings(t);this.setState({settings:n})}))}componentWillMount(){var t;!UV&&((t=window.history.state)!=null&&t.state)&&this.setState(window.history.state.state)}subscribe(){var t,n;(t=this.unsub)==null||t.call(this),(n=this.unsubLoadMore)==null||n.call(this),clearTimeout(this.subscribeRetryTimeout),this.startTwoSecondsTimer(),this.subscribeWithRetry(i=>this.handleEvent(i))}subscribeWithRetry(t){const n=()=>{var i,s;(i=this.unsub)==null||i.call(this),(s=this.unsubLoadMore)==null||s.call(this),this.props.index==="notifications"?this.unsub=Me.notifications.subscribe(o=>{o.forEach(a=>t(Me.db.by("id",a)))}):this.subscribeToEvents(t)};n(),this.sortedEventMap.size===0&&(this.subscribeRetryTimeout=setTimeout(n,1e3))}startTwoSecondsTimer(){this.twoSecondsPassed=!1,setTimeout(()=>{this.twoSecondsPassed=!0},2e3)}update(){const t=this.state.events,n=t[Math.min(this.state.displayCount-1,t.length-1)],i=Me.db.by("id",n),s=[];this.sortedEventMap.events().forEach(o=>{o.created_at<(i==null?void 0:i.created_at)&&s.push(o.id)}),this.updateState(s)}updateState(t){this.twoSecondsPassed&&!this.state.settings.realtime&&this.state.events.length>5?this.setState({queuedEvents:[...this.state.queuedEvents,...t]}):this.setState({events:this.sortedEventMap.eventIds,queuedEvents:[]})}handleEvent(t){this.shouldIgnoreEvent(t)||(this.sortedEventMap.add(t),this.update())}shouldIgnoreEvent(t){var i;if(this.sortedEventMap.has(t.id)||tt.isBlocked(t.pubkey))return!0;const n=Me.getEventReplyingTo(t);if(n){if(!this.state.settings.showReplies)return!0;const s=(i=Me.db.by("id",n))==null?void 0:i.pubkey;if(s&&tt.isBlocked(s))return!0}return!1}subscribeToEvents(t){var o;this.unsub=this.getEvents(t);const n=vt(de.getPubKey()),i=(o=tt.followedByUser.get(n))==null?void 0:o.size,s=Bt.subscribe({authors:[de.getPubKey()],kinds:[3]},()=>{var a;i!==((a=tt.followedByUser.get(n))==null?void 0:a.size)&&(s(),this.subscribe())})}getEvents(t){return()=>{}}componentDidUpdate(t,n){var i,s,o,a;(((i=n.settings)==null?void 0:i.showReplies)!==((s=this.state.settings)==null?void 0:s.showReplies)||((o=n.settings)==null?void 0:o.display)!==((a=this.state.settings)==null?void 0:a.display))&&this.subscribe(),this.handleScroll(),this.replaceState(),(this.props.filter!==t.filter||this.props.keyword!==t.keyword)&&(this.sortedEventMap=new _8(this.state.settings.sortBy,this.state.settings.sortDirection),this.setState({events:[]}),this.componentDidMount())}oldestEventCreatedAt(){var t;return(t=this.sortedEventMap.last())==null?void 0:t.created_at}showQueuedEvents(){this.setState({events:this.sortedEventMap.eventIds,queuedEvents:[],displayCount:Ld}),window.scrollTo(0,0)}render(){if(this.unmounted)return;const{displayCount:t,settings:n,queuedEvents:i,settingsOpen:s}=this.state,{index:o,keyword:a}=this.props,l=o!=="likes"&&!a,u=i.length>0&&!s,f=n.display==="grid"?"NoteImage":null,c=v(RIe,{events:this.state.events,displayCount:t,renderAs:f,showRepliedMsg:l,openedAt:this.openedAt,settings:n});return v("div",{className:"mb-4",children:[v(dt,{when:u,children:v(FIe,{onClick:()=>this.showQueuedEvents()})}),v(dt,{when:o!=="notifications"&&this.state.settingsOpen,children:v(DIe,{settings:n,onChange:d=>this.setState({displayCount:Ld,settings:d})})}),v(dt,{when:["global","follows"].includes(o||""),children:v("div",{className:"flex items-center mx-4 my-4",children:[v("div",{className:`btn btn-sm  mr-2 ${this.state.settings.showReplies?"btn-neutral":"btn-primary"}`,onClick:()=>this.setState({settings:{...this.state.settings,showReplies:!1}}),children:he("posts")}),v("div",{className:`btn btn-sm ${this.state.settings.showReplies?"btn-primary":"btn-neutral"}`,onClick:()=>this.setState({settings:{...this.state.settings,showReplies:!0}}),children:he("posts_and_replies")})]})}),v(dt,{when:o!=="notifications",children:v(BIe,{index:o,display:n.display,setDisplay:d=>{this.setState({displayCount:Ld,settings:{...n,display:d}}),Ne.get("settings").get("feed").get("display").put(d)}})}),v(dt,{when:this.state.events.length===0,children:v("div",{className:"px-2 md:px-4 py-2",children:this.props.emptyMessage||he("no_events_yet")})}),f==="NoteImage"?v(MIe,{children:c}):c,v(dt,{when:t<this.state.events.length,children:v(LIe,{onClick:()=>this.setState({displayCount:t+Ld})})})]})}};const zIe={all:0,day:24*60*60,week:7*24*60*60,month:30*24*60*60,year:365*24*60*60};let vy=class extends jIe{addSinceUntil(r){const t=this.getSince(),n=this.oldestEventCreatedAt();return t&&(r.since=t),n&&(r.until=n),r}getSince(){if(this.state.settings.timespan!=="all")return Math.floor(Date.now()/1e3)-zIe[this.state.settings.timespan]}getCallbackForPostsIndex(r){return t=>{this.props.index==="posts"&&Me.getEventReplyingTo(t)&&!Me.isRepost(t)||r(t)}}subscribeToNostrUser(r){let t={authors:[this.props.nostrUser||""],kinds:[1,6]};return t=this.addSinceUntil(t),console.log("subscribing to nostr user",this.props.nostrUser,t),this.props.index==="likes"?(t.kinds=[7],Bt.subscribe(t,r,!1,!1)):Bt.subscribe(t,this.getCallbackForPostsIndex(r),!1,!1)}subscribeToKeyword(r){let t={keywords:[this.props.keyword.toLowerCase()],kinds:[1],limit:1e3};return t=this.addSinceUntil(t),Bt.subscribe(t,n=>{var i;return((i=n.content)==null?void 0:i.toLowerCase().includes(this.props.keyword.toLowerCase()))&&r(n)},!1)}subscribeToFollows(r){const t=de.getPubKey(),n=Array.from(tt.followedByUser.get(vt(t))||[]).map(s=>ts(s));n.push(t);let i={kinds:[1,6],limit:300};return n.length<1e3&&(i.authors=n),i=this.addSinceUntil(i),Bt.subscribe(i,s=>{(s.pubkey===t||tt.isFollowing(t,s.pubkey))&&r(s)},!0)}subscribeToGlobalFeed(r){let t={kinds:[1,6],limit:300};return t=this.addSinceUntil(t),Bt.subscribe(t,r,!0)}getEvents(r){return this.props.nostrUser?this.subscribeToNostrUser(r):this.props.keyword?this.subscribeToKeyword(r):this.props.index==="follows"?this.subscribeToFollows(r):this.subscribeToGlobalFeed(r)}};const qV=e=>{const r=`https://iris.to/${de.toNostrBech32Address(e.pub,"npub")}`;return v(Su,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:v("div",{style:{textAlign:"center",flex:1},children:[v(XP,{data:r}),v("p",{children:v(Er,{pub:e.pub})})]})})},HIe=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']],UIe=_n.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
`,WIe=_n.div`
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
`;class qIe extends $n{componentDidMount(){Ne.get("noFollowers").on(this.inject()),Ne.get("hasNostrFollowers").on(this.inject()),Ne.get("showFollowSuggestions").on(this.inject()),Ne.get("showNoIrisToAddress").on(this.inject()),Ne.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return v("div",{className:"flex flex-col flex-grow px-2 py-4 md:px-4 gap-2",children:[v("p",{className:"text-base",children:he("follow_someone_info")}),HIe.map(([r,t])=>v("div",{className:"flex items-center space-x-4",children:[v(Qt,{href:`/${r}`,className:"flex flex-grow items-center space-x-2",children:[v("div",{className:"w-10 h-10",children:v(hs,{str:r,width:40})}),v("div",{className:"flex-grow",children:[v(Er,{pub:r,placeholder:"Suggested follow"}),v("p",{className:"text-sm text-gray-500",children:t})]})]}),v(Wh,{id:r})]})),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",onClick:()=>Ne.get("showFollowSuggestions").put(!1),children:he("done")})}),v("p",{className:"text-base",children:[he("alternatively"),v("i",{children:" "}),v(Qt,{href:`/${de.toNostrBech32Address(de.getPubKey(),"npub")}`,className:"link",children:he("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return v(UIe,{children:[v(WIe,{onClick:()=>Ne.get("noFollowers").put(!1),children:v(BH,{width:24})}),v("p",{children:he("no_followers_yet")}),v("div",{className:"flex gap-2 my-2",children:[v(Ui,{className:"btn btn-neutral",text:he("copy_link"),copyStr:hr.getMyProfileLink()}),v("button",{className:"btn btn-neutral",onClick:()=>this.setState({showQrModal:!0}),children:he("show_qr_code")})]}),v("small",{children:he("no_followers_yet_info")}),this.state.showQrModal&&v(qV,{onClose:()=>this.setState({showQrModal:!1}),pub:de.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return v("div",{className:"flex flex-col gap-2 mb-2",children:[v("p",{children:"Get your own iris.to/username?"}),v("p",{className:"flex gap-2",children:[v("button",{className:"btn btn-primary",onClick:()=>_r("/settings/iris_account"),children:"Yes please"}),v("button",{className:"btn btn-neutral",onClick:()=>Ne.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let r;return this.state.showFollowSuggestions?r=this.renderFollowSuggestions():this.state.showNoIrisToAddress?r=this.renderGetIrisAddress():this.state.noFollowers&&(r=this.renderNoFollowers()),r?v("div",{class:"msg",children:v("div",{class:"msg-content",children:r})}):""}}class nS extends qh{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const r=this.props.index||"msgs";return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[v(dt,{when:!this.props.keyword,children:[v(qIe,{}),v("div",{className:"hidden md:block px-4",children:v(X_,{autofocus:!1,placeholder:he("whats_on_your_mind")})})]}),v(vy,{keyword:this.props.keyword,index:this.props.index,path:r},this.props.index||"feed")]})})}}const KIe=gi(({hexKey:e})=>{var t;const r=de.toNostrBech32Address(e,"npub")||"";return v("div",{className:"flex w-full",children:[v(Qt,{href:`/${r}`,className:"flex flex-1 gap-4",children:[v(hs,{str:r,width:49}),v("div",{children:[v(Er,{pub:r}),v("br",{}),v("span",{className:"text-neutral-500 text-sm",children:[((t=tt.followersByUser.get(vt(e)))==null?void 0:t.size)||0,v("i",{children:" "}),"followers"]})]})]}),e!==de.getPubKey()&&v(Wh,{id:r})]},r)});class E8 extends qh{constructor(){super();ce(this,"follows");ce(this,"myPub");ce(this,"updateSortedFollows",k_(()=>{const t=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),n=Array.from(this.follows).sort(t);this.setState({follows:n})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(t,n){var o,a;const i=(o=tt.profiles.get(vt(t)))==null?void 0:o.name,s=(a=tt.profiles.get(vt(n)))==null?void 0:a.name;return!i&&!s?t.localeCompare(n):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(t,n){const i=tt.followDistanceByUser.get(vt(t)),s=tt.followDistanceByUser.get(vt(n));return i===s?this.sortByName(t,n):i===void 0?1:s===void 0||i<s?-1:1}getFollows(){const t=de.toNostrHexAddress(this.props.id)||"";t&&tt.getFollowedByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const t=de.toNostrHexAddress(this.props.id)||"";t&&tt.getFollowersByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=de.toNostrBech32Address(de.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),Ne.get("contacts").on(this.inject()))}followAll(){confirm(`${he("follow_all")} (${this.state.follows.length})?`)&&tt.setFollowed(this.state.follows)}renderFollows(){return this.state.follows.map(t=>v(KIe,{hexKey:t}))}renderView(){const t=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return v("div",{className:"px-4 mb-4",children:[v("div",{className:"flex justify-between mb-4",children:[v("span",{className:"text-xl font-bold",children:[v("a",{className:"link",href:`/${this.props.id}`,children:v(Er,{pub:this.props.id})}),":",v("i",{children:" "}),v("span",{style:{flex:1},className:"ml-1",children:this.props.followers?he("followers"):he("following")})]}),v(dt,{when:t,children:v("span",{style:"text-align: right",className:"hidden md:inline",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[he("follow_all")," (",this.state.follows.length,")"]})})})]}),v(dt,{when:t,children:v("p",{style:"text-align: right",className:"inline md:hidden",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[he("follow_all")," (",this.state.follows.length,")"]})})}),v("div",{className:"flex flex-col w-full gap-4",children:[this.renderFollows(),this.state.follows.length===0?"":""]})]})}}function VIe(e){const[r,t]=Le(""),n=de.toNostrHexAddress(r),i=de.toNostrBech32Address(r,"note"),s=de.toNostrBech32Address(r,"npub"),o=de.toNostrBech32Address(r,"nsec");return v(ut,{children:[v(ku,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container mobile-padding15",children:[v("h2",{children:he("key_converter")}),v("p",{children:v("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:a=>{var l;return t((l=a.target.value)==null?void 0:l.trim())}})}),r&&n&&(r===n?v(ut,{children:[v("p",{children:[v("b",{children:"note:"})," ",i]}),v("p",{children:[v("b",{children:"npub:"})," ",s]}),v("p",{children:[v("b",{children:"nsec:"})," ",o]})]}):v("p",{children:[v("b",{children:"hex:"})," ",n]})),r&&!n&&v("p",{children:v("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const e4=2n**256n,dh=e4-0x1000003d1n,t4=e4-0x14551231950b75fc4402da1732fc9bebfn,KV=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,VV=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,GV={p:dh,n:t4,a:0n,b:7n,Gx:KV,Gy:VV},ph=32,S8=e=>Ct(Ct(e*e)*e+GV.b),ci=(e="")=>{throw new Error(e)},J_=e=>typeof e=="bigint",YV=e=>typeof e=="string",iS=e=>J_(e)&&0n<e&&e<dh,ZV=e=>J_(e)&&0n<e&&e<t4,XV=(e,r)=>!(e instanceof Uint8Array)||typeof r=="number"&&r>0&&e.length!==r?ci("Uint8Array expected"):e,Xy=e=>new Uint8Array(e),r4=(e,r)=>XV(YV(e)?Q_(e):Xy(e),r),Ct=(e,r=dh)=>{let t=e%r;return t>=0n?t:r+t},k8=e=>e instanceof Ho?e:ci("Point expected");let T8;class Ho{constructor(r,t,n){this.px=r,this.py=t,this.pz=n}static fromAffine(r){return new Ho(r.x,r.y,1n)}static fromHex(r){r=r4(r);let t;const n=r[0],i=r.subarray(1),s=I8(i,0,ph),o=r.length;if(o===33&&[2,3].includes(n)){iS(s)||ci("Point hex invalid: x not FE");let a=GIe(S8(s));const l=(a&1n)===1n;(n&1)===1!==l&&(a=Ct(-a)),t=new Ho(s,a,1n)}return o===65&&n===4&&(t=new Ho(s,I8(i,ph,2*ph),1n)),t?t.ok():ci("Point is not on curve")}static fromPrivateKey(r){return Tp.mul(hA(r))}get x(){return this.aff().x}get y(){return this.aff().y}equals(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=k8(r),l=Ct(t*a),u=Ct(s*i),f=Ct(n*a),c=Ct(o*i);return l===u&&f===c}negate(){return new Ho(this.px,Ct(-this.py),this.pz)}double(){return this.add(this)}add(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=k8(r),{a:l,b:u}=GV;let f=0n,c=0n,d=0n;const y=Ct(u*3n);let w=Ct(t*s),b=Ct(n*o),T=Ct(i*a),_=Ct(t+n),A=Ct(s+o);_=Ct(_*A),A=Ct(w+b),_=Ct(_-A),A=Ct(t+i);let x=Ct(s+a);return A=Ct(A*x),x=Ct(w+T),A=Ct(A-x),x=Ct(n+i),f=Ct(o+a),x=Ct(x*f),f=Ct(b+T),x=Ct(x-f),d=Ct(l*A),f=Ct(y*T),d=Ct(f+d),f=Ct(b-d),d=Ct(b+d),c=Ct(f*d),b=Ct(w+w),b=Ct(b+w),T=Ct(l*T),A=Ct(y*A),b=Ct(b+T),T=Ct(w-T),T=Ct(l*T),A=Ct(A+T),w=Ct(b*A),c=Ct(c+w),w=Ct(x*A),f=Ct(_*f),f=Ct(f-w),w=Ct(_*b),d=Ct(x*d),d=Ct(d+w),new Ho(f,c,d)}mul(r,t=!0){if(!t&&r===0n)return uw;if(ZV(r)||ci("invalid scalar"),this.equals(Tp))return ZIe(r).p;let n=uw,i=Tp;for(let s=this;r>0n;s=s.double(),r>>=1n)r&1n?n=n.add(s):t&&(i=i.add(s));return n}mulAddQUns(r,t,n){return this.mul(t,!1).add(r.mul(n,!1)).ok()}toAffine(){const{px:r,py:t,pz:n}=this;if(this.equals(uw))return{x:0n,y:0n};if(n===1n)return{x:r,y:t};const i=QV(n);return Ct(n*i)!==1n&&ci("invalid inverse"),{x:Ct(r*i),y:Ct(t*i)}}assertValidity(){const{x:r,y:t}=this.aff();return(!iS(r)||!iS(t))&&ci("Point invalid: x or y"),Ct(t*t)===S8(r)?this:ci("Point invalid: not on curve")}multiply(r){return this.mul(r)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(r=!0){const{x:t,y:n}=this.aff();return(r?(n&1n)===0n?"02":"03":"04")+A8(t)+(r?"":A8(n))}toRawBytes(r=!0){return Q_(this.toHex(r))}}Ho.BASE=new Ho(KV,VV,1n);Ho.ZERO=new Ho(0n,1n,0n);const{BASE:Tp,ZERO:uw}=Ho,JV=(e,r)=>e.toString(16).padStart(r,"0"),n4=e=>Array.from(e).map(r=>JV(r,2)).join(""),Q_=e=>{const r=e.length;(!YV(e)||r%2)&&ci("hex invalid 1");const t=Xy(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);(Number.isNaN(o)||o<0)&&ci("hex invalid 2"),t[n]=o}return t},ex=e=>BigInt("0x"+(n4(e)||"0")),I8=(e,r,t)=>ex(e.slice(r,t)),i4=e=>J_(e)&&e>=0n&&e<e4?Q_(JV(e,2*ph)):ci("bigint expected"),A8=e=>n4(i4(e)),O8=(...e)=>{const r=Xy(e.reduce((n,i)=>n+XV(i).length,0));let t=0;return e.forEach(n=>{r.set(n,t),t+=n.length}),r},QV=(e,r=dh)=>{(e===0n||r<=0n)&&ci("no inverse n="+e+" mod="+r);let t=Ct(e,r),n=r,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,l=i-s*o;n=t,t=a,i=s,s=l}return n===1n?Ct(i,r):ci("no inverse")},GIe=e=>{let r=1n;for(let t=e,n=(dh+1n)/4n;n>0n;n>>=1n)n&1n&&(r=r*t%dh),t=t*t%dh;return Ct(r*r)===e?r:ci("sqrt invalid")},hA=e=>(J_(e)||(e=ex(r4(e,ph))),ZV(e)?e:ci("private key out of range")),C8=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let cw;function eG(e){e=r4(e);const r=ph+8;(e.length<r||e.length>1024)&&ci("expected proper params");const t=Ct(ex(e),t4-1n)+1n;return i4(t)}const tG={hexToBytes:Q_,bytesToHex:n4,concatBytes:O8,bytesToNumberBE:ex,numberToBytesBE:i4,mod:Ct,invert:QV,hmacSha256Async:async(e,...r)=>{const t=C8();if(!t)return ci("etc.hmacSha256Async not set");const n=t.subtle,i=await n.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Xy(await n.sign("HMAC",i,O8(...r)))},hmacSha256Sync:cw,hashToPrivateKey:eG,randomBytes:e=>{const r=C8();return r||ci("crypto.getRandomValues must be defined"),r.getRandomValues(Xy(e))}},P8={normPrivateKeyToScalar:hA,isValidPrivateKey:e=>{try{return!!hA(e)}catch{return!1}},randomPrivateKey:()=>eG(tG.randomBytes(ph+8)),precompute(e=8,r=Tp){return r.multiply(3n),r}};Object.defineProperties(tG,{hmacSha256Sync:{configurable:!1,get(){return cw},set(e){cw||(cw=e)}}});const Uf=8,YIe=()=>{const e=[],r=256/Uf+1;let t=Tp,n=t;for(let i=0;i<r;i++){n=t,e.push(n);for(let s=1;s<2**(Uf-1);s++)n=n.add(t),e.push(n);t=n.double()}return e},ZIe=e=>{const r=T8||(T8=YIe()),t=(f,c)=>{let d=c.negate();return f?d:c};let n=uw,i=Tp;const s=1+256/Uf,o=2**(Uf-1),a=BigInt(2**Uf-1),l=2**Uf,u=BigInt(Uf);for(let f=0;f<s;f++){const c=f*o;let d=Number(e&a);e>>=u,d>o&&(d-=l,e+=1n);const y=c,w=c+Math.abs(d)-1,b=f%2!==0,T=d<0;d===0?i=i.add(t(b,r[y])):n=n.add(t(T,r[w]))}return{p:n,f:i}},XIe=v(ut,{children:[v("b",{children:"End User Licence Agreement"}),v("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),v("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),v("ul",{children:[v("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),v("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),v("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),v("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),v("li",{children:"illegal content related to gambling."})]}),v("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),v("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),v("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),v("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function JIe({onAccept:e,onDecline:r}){return v("div",{class:"m-1 bg-black overflow-y-scroll absolute inset-0 pb-safe-area",children:[v("div",{className:"prose",children:XIe}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-primary",onClick:e,children:"Accept"}),v("button",{className:"btn btn-default",onClick:r,children:"Decline"})]})]})}function QIe(e){const r=e.target,t=Jt(r).val();ip.indexOf(t)>=0&&(localStorage.setItem("language",t),location.reload())}const eAe=()=>v("div",{className:"flex flex-row w-full justify-center items-center",children:[v(NH,{width:24}),v("select",{className:"input rounded-full",onChange:e=>QIe(e),value:Wo,children:Object.keys(Ky).map(e=>v("option",{value:e,children:Ky[e]}))})]});class fw extends zn{constructor(){super(...arguments);ce(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const t=document.getElementById("login-form-name");t&&t.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(t){t.preventDefault();const n=await window.nostr.getPublicKey();de.login({rpub:n},this.props.fullScreen)}async onPasteKey(t){var s;const n=(s=t.target.value)==null?void 0:s.trim();if(!n.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(n)}catch{}if(!i)if(P8.isValidPrivateKey(n))i={priv:n,rpub:de.getPublicKey(n)};else try{const{data:o,prefix:a}=MT(n),l=hr.arrayToHex(o);a==="npub"?i={rpub:l}:a==="nsec"&&(i={priv:l,rpub:de.getPublicKey(l)})}catch(o){this.setState({privateKeyError:he("invalid_private_key")}),console.error(o)}i&&(await de.login(i,this.props.fullScreen),t.target.value="",hr.copyToClipboard(""))}showCreateAccount(t){t.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const t=document.getElementById("login-form-name"),n=t==null?void 0:t.value;de.loginAsNewUser(this.props.fullScreen),Ne.get("showFollowSuggestions").put(!0),n&&setTimeout(()=>{tt.setMetadata({display_name:n})},100);const i=Math.floor(Date.now()/1e3);Me.notificationsSeenTime=i}onLoginFormSubmit(t){t.preventDefault(),hr.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(t){const n=t.target.value;if(n.indexOf('"priv"')!==-1||P8.isValidPrivateKey(n)||n.startsWith("nsec")||n.startsWith("npub")){this.onPasteKey(t),t.target.value="";return}this.setState({inputStyle:n.length?"text-align: center":""})}renderExistingAccountLogin(){return v(ut,{children:[v("input",{className:"rounded-full input input-bordered centered-placeholder",id:"paste-privkey",autoFocus:!0,onInput:t=>this.onPasteKey(t),placeholder:he("paste_private_key"),type:"password"}),this.state.privateKeyError&&v("p",{className:"error",children:this.state.privateKeyError})]})}render(){return v("section",{className:`flex items-center justify-center ${this.props.fullScreen?"h-screen":""}`,children:[this.state.showEula&&v(JIe,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),v("div",{className:"w-full max-w-sm",children:this.state.showSwitchAccount?v("div",{className:"text-center shadow-md rounded px-8 pt-6 pb-8 mb-4 flex gap-2 flex-col",children:[v("p",{className:"link",children:v("a",{href:"",id:"show-create-account",onClick:t=>this.showCreateAccount(t),children:he("back")})}),this.renderExistingAccountLogin()]}):v("form",{className:"shadow-md bg-black rounded px-8 pt-6 pb-8 mb-4 gap-4 flex flex-col items-center justify-center",autocomplete:"off",onSubmit:t=>this.onLoginFormSubmit(t),children:[v("img",{className:"w-20 h-20 mx-auto",src:"/img/android-chrome-192x192.png",alt:"iris"}),v("h1",{className:"text-2xl font-bold",children:"Dpeep"}),v("input",{className:"input centered-placeholder",style:this.state.inputStyle,onInput:t=>this.onNameChange(t),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:he("whats_your_name")}),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",type:"submit",children:he("new_user_go")})}),window.nostr?v("p",{className:"text-center link",children:v("a",{href:"",onClick:t=>this.nostrExtensionLogin(t),children:he("nostr_extension_login")})}):null,v("p",{className:"text-center link",children:v("a",{href:"",id:"show-existing-account-login",onClick:t=>{t.preventDefault(),this.setState({showSwitchAccount:!0})},children:he("private_key_login")})}),v(eAe,{})]})})]})}}class tAe extends fw{render(){return this.renderExistingAccountLogin()}}function rAe(e){return v("div",{className:"px-2 md:px-4 py-8 justify-center flex flex-col items-center",children:[v("div",{className:"my-4",children:he("logout_confirmation_info")}),v("div",{className:"my-4 flex flex-row gap-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>_r("/settings"),children:he("back")}),v("button",{className:"btn btn-primary",onClick:()=>Ch.logOut(),children:he("log_out")})]})]})}class N8 extends qh{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const r=de.toNostrBech32Address(this.props.id,"note");if(r&&this.props.id!==r){_r(`/${r}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(r){r.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let r;return this.props.id==="new"?r=v("div",{className:"m-2",children:v(X_,{placeholder:he("whats_on_your_mind"),forceAutofocusMobile:!0,autofocus:!0,onSubmit:()=>_r("/")})}):r=v(qo,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),v("div",{className:"w-full",children:r})}}class nAe extends qh{constructor(){super(...arguments);ce(this,"class","public-messages-view");ce(this,"updateNotificationsLastOpened",wn.debounce(()=>{const t=Ne.get("settings").get("notifications").get("saveLastOpened");t.once(n=>{var i;if(n!==!1){const s=Math.floor(Date.now()/1e3);((i=Ch.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),t.put(!1)),Ne.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return v("div",{class:"centered-container",children:v(vy,{index:"notifications",emptyMessage:he("no_notifications_yet")},"notifications")})}}var iAe=["className","activeClass","activeClassName","path"];function sS(e){var r=e.className,t=e.activeClass,n=e.activeClassName,i=e.path,s=function(f,c){if(f==null)return{};var d,y,w={},b=Object.keys(f);for(y=0;y<b.length;y++)c.indexOf(d=b[y])>=0||(w[d]=f[d]);return w}(e,iAe),o=kle()[0],a=i&&o.path&&NT(o.path,i,{})||NT(o.url,s.href,{}),l=s.class||r||"",u=a&&(t||n)||"";return s.class=l+(l&&u&&" ")+u,Qe(Qt,s)}class sAe extends JP{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=he("report_public"),this.actionDone=he("reported"),this.hoverAction=he("unreport")}onClick(r){r.preventDefault();const t=!this.state[this.key];if(confirm(t?"Publicly report this user?":"Unreport user?")){const n=de.toNostrHexAddress(this.props.id);n&&tt.flag(n,t)}}componentDidMount(){tt.getFlaggedUsers(r=>{const t=de.toNostrHexAddress(this.props.id),n=t&&(r==null?void 0:r.has(t));this.setState({reported:n})})}}const oAe=({hexPub:e,npub:r,rawDataJson:t,isMyProfile:n})=>{async function i(a){a.preventDefault(),_r("/"),de.login({rpub:e})}const[s,o]=Le(!1);return v(ut,{children:[v(OV,{children:[v(Ui,{className:"btn btn-sm",text:he("copy_link"),copyStr:window.location.href},`${e}copyLink`),v(Ui,{className:"btn btn-sm",text:he("copy_user_ID"),copyStr:r},`${e}copyNpub`),v("button",{className:"btn btn-sm",onClick:()=>o(!0),children:he("show_qr_code")}),v(Ui,{className:"btn btn-sm",text:he("copy_raw_data"),copyStr:t},`${e}copyData`),v(dt,{when:!n&&!de.getPrivKey(),children:v("button",{className:"btn btn-sm",onClick:i,children:[he("view_as")+" ",v(Er,{pub:e,hideBadge:!0})]})}),v(dt,{when:!n,children:v(ut,{children:[v(JP,{className:"btn btn-sm",id:e}),v(sAe,{className:"btn btn-sm",id:e})]})})]}),v(dt,{when:s,children:v(qV,{pub:e,onClose:()=>o(!1)})})]})},aAe=({picture:e,onError:r})=>{const[t,n]=Le(!1),i=()=>{n(!0)},s=()=>{n(!1)};return e?v("div",{className:"rounded-full border-4 border-black",children:[v(mu,{width:128,square:!0,className:"rounded-full cursor-pointer",src:e,onError:r,onClick:i}),t&&v(Su,{centerVertically:!0,onClose:s,children:v(mu,{className:"max-w-full max-h-[90vh]",square:!0,src:e,onError:r})})]}):null},lAe=({hexPub:e})=>{const[r,t]=Le({showTrustsList:!1,trusted:!1,showDistrustsList:!1,distrusted:!1,renderTrustScore:"",renderDistrustScore:"",processing:!1}),n=Z_(vt(e));St(()=>{var u;if(!n)return;const o=(u=n.vertice)==null?void 0:u.score;if(!o)return;let a=o.isDirectTrusted(),l=o.isDirectDistrusted();t(f=>({...f,trusted:a,distrusted:l,renderTrustScore:a?o.renderTrustCount():"",renderDistrustScore:l?o.renderDistrustCount():"",processing:!1}))},[n]);function i(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!r.trusted,distrusted:!1,processing:!0}),(async()=>{let a=r.trusted?0:1;await rr.publishTrust(e,a,iu.Key)})()}function s(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!1,distrusted:!r.distrusted,processing:!0}),(async()=>{let a=r.distrusted?0:-1;await rr.publishTrust(e,a,iu.Key)})()}return v(ut,{children:v("div",{className:"flex-1 flex gap-4",children:[v("a",{className:`msg-btn trust-btn ${r.trusted?"trusted":""} cursor-pointer`,onClick:o=>i(o),title:r.trusted?"Trusted":"Trust",children:r.trusted?v(p$,{size:24,fill:"green",stroke:"currentColor"}):v(p$,{size:24,fill:"none",stroke:"currentColor"})}),v("a",{className:`msg-btn trust-btn ${r.distrusted?"distrusted":""} cursor-pointer`,onClick:o=>s(o),title:r.distrusted?"Distrusted":"Distrust",children:r.distrusted?v(d$,{size:24,fill:"red",stroke:"currentColor"}):v(d$,{size:24,fill:"none",stroke:"currentColor"})})]})})},Jy=(e,r=["red","grey","green"])=>r[e+1],uAe=(e,r=!1)=>!e||!r&&!e.hasTrustScore()?null:e.trusts.join("/"),cAe=(e,r=!1)=>!e||!r&&!e.hasDistrustScore()?null:e.distrusts.join("/"),rG=(e,r,t=!1)=>!e||!t&&!e.hasTrustScore()?null:v("a",{href:`/graph/${r}/key/in/trust/path`,className:"cursor-pointer hover:underline",title:"Trusts at degree 0/1/2",children:[uAe(e,t),"",v("span",{className:"text-neutral-500",children:"Trusts"})]}),nG=(e,r,t=!1)=>!e||!t&&!e.hasDistrustScore()?null:v("a",{href:`/graph/${r}/key/in/distrust/path`,className:"cursor-pointer hover:underline",title:"Distrusts at degree 0/1/2",children:[cAe(e,t),"",v("span",{className:"text-neutral-500",children:"Distrusts"})]}),fAe=({hexPub:e})=>{const[r]=Le(de.toNostrBech32Address(e,"npub")),[t,n]=Le(),i=Z_(vt(e),void 0,"");return St(()=>{var o;const s=(o=i.vertice)==null?void 0:o.score;s&&n(a=>({...a,score:s}))},[i]),v(ut,{children:[rG(t==null?void 0:t.score,r,!0),nG(t==null?void 0:t.score,r,!0)]})},hAe=({address:e})=>{const[r,t]=Le(0),[n,i]=Le(0),[s,o]=Le(0),[a,l]=Le(0),[u,f]=Le([]),c=de.getPubKey()===e;return St(()=>{const d=[];fetch(`https://eu.rbr.bio/${e}/info.json`).then(w=>{w.ok&&w.json().then(b=>{var T;b&&(l((T=b.following)==null?void 0:T.length),o(b.followerCount))})});const y=k_(w=>{const b=new Set;for(const T of w)tt.getFollowDistance(T)===1&&b.add(T);f(Array.from(b))},1e3);return setTimeout(()=>{d.push(tt.getFollowersByUser(e,w=>{i(w.size),y(w)})),d.push(tt.getFollowedByUser(e,w=>t(w.size)))},1e3),()=>{d.forEach(w=>w())}},[e]),v("div",{children:[v("div",{className:"text-sm flex gap-4",children:[v(Qt,{href:`/follows/${e}`,children:[v("b",{children:Math.max(r,a)}),v("span",{className:"text-neutral-500",children:[" ",he("following")]})]}),v(Qt,{href:`/followers/${e}`,children:[v("b",{children:Math.max(n,s)}),v("span",{className:"text-neutral-500",children:[" ",he("followers")]})]}),v(fAe,{hexPub:e})]}),v(dt,{when:!c&&u.length>0,children:v("div",{className:"text-neutral-500",children:v("small",{children:["Followed by"," ",u.slice(0,3).map((d,y)=>v("span",{children:[v(dt,{when:y>0,children:", "}),v(Qt,{className:"hover:underline",href:`/${de.toNostrBech32Address(d,"npub")}`,children:v(Er,{pub:d,hideBadge:!0})})," "]},d)),v(dt,{when:u.length>3,children:v("span",{children:[" ","and ",v("b",{children:u.length-3})," other users you follow"]})})]})})}),v(dt,{when:tt.isFollowing(e,de.getPubKey()),children:v("div",{className:"text-neutral-500",children:v("small",{children:he("follows_you")})})})]})},dAe=gi(hAe),pAe=e=>{var C;const{hexPub:r,npub:t}=e,[n,i]=Le(tt.profiles.get(vt(r))||{}),[s,o]=Le(""),[a,l]=Le(""),[u,f]=Le(!1),[c,d]=Le(""),[y,w]=Le(""),[b,T]=Le(!1),[_,A]=Le(!1),x=xh((g,M)=>{const B=[];return B.push(Bt.subscribe({authors:[g],kinds:[0,3]},void 0,!1,!1)),B.push(tt.getProfile(g,z=>{if(!z)return;if(!(M&&M.endsWith("@iris.to"))&&z.nip05&&z.nip05valid){const J=z.nip05,F=J.split("@"),Z=F[0],ie=F[1];let _e;ie==="iris.to"?Z==="_"?_e="iris":_e=Z:Z==="_"?_e=ie:_e=J,d(_e),_e=window.location.pathname.replace(/[^/]+/,_e);const we=window.history.state;window.history.replaceState(we,"",_e)}let ne=z.lud16||z.lud06;ne&&!ne.startsWith("lightning:")&&(ne="lightning:"+ne),o(ne);let re="";try{const J=z.website&&(z.website.match(/^https?:\/\//)?z.website:"http://"+z.website),F=new URL(J);re=F.href.endsWith("/")?F.href.slice(0,-1):F.href}catch{re=""}l(re),i(z)},!0)),()=>{B.forEach(z=>z())}},[]);St(()=>{const g=[],M=Me.db.findOne({kind:0,pubkey:r}),B=Me.db.findOne({kind:3,pubkey:r});M&&g.push(M),B&&g.push(B),w(JSON.stringify(g,null,2)),T(r===de.getPubKey()),x(r,c);const z=Ne.get("loggedIn").on(ne=>{f(ne)}),V=tt.getBlockedUsers(ne=>{A(ne.has(r))});return()=>{V(),z()}},[r]);const I=_?v(hs,{str:t,hidePicture:!0,width:128},`${t}avatar`):v(aAe,{picture:n.picture,onError:()=>null},`${r}picture`),O=()=>!u&&Ne.get("showLoginModal").put(!0);return v("div",{children:v("div",{className:"mb-2 mx-4 md:px-4 md:mx-0 flex flex-col gap-2",children:[v("div",{className:"flex flex-row",children:[v("div",{className:n.banner?"-mt-24":"",children:I}),v("div",{className:"flex-1 justify-end items-center flex gap-2",children:[v("div",{onClick:O,children:[v("a",{href:"/graph/"+t,className:"link px-2",children:"Web of Trust"}),v(dt,{when:b,children:v("a",{className:"btn btn-sm btn-neutral",href:"/profile/edit",children:he("edit_profile")})}),v(dt,{when:!b,children:[v(Wh,{id:r},`${r}follow`),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>u&&_r(`/chat/${t}`),children:he("send_message")})]})]}),v(oAe,{hexPub:r,npub:t,rawDataJson:y,isMyProfile:b})]})]}),v("div",{className:"profile-header-stuff",children:[v("div",{className:"flex-1 profile-name",children:[v("span",{className:"text-xl",children:v(Er,{pub:r})}),v(dt,{when:n.nip05&&n.nip05valid,children:[v("br",{}),v("small",{className:"text-iris-green",children:(C=n.nip05)==null?void 0:C.replace(/^_@/,"")})]})]}),v(dAe,{address:r}),v("div",{className:"py-2",children:[v("p",{className:"text-sm",children:n.about}),v("div",{className:"flex flex-1 flex-row align-center justify-center mt-4",children:[v(lAe,{hexPub:r}),v(dt,{when:s,children:v("div",{className:"flex-1",children:v("a",{className:"btn btn-sm btn-neutral",href:s,onClick:g=>hr.handleLightningLinkClick(g),children:[" ",he("tip_lightning")]})})}),v(dt,{when:a,children:v("div",{className:"flex-1",children:v("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"link",children:a==null?void 0:a.replace(/^https?:\/\//,"")})})})]})]})]})]})},`${r}details`)};class s1 extends qh{constructor(){super();ce(this,"subscriptions");ce(this,"unsub");this.state={followedUserCount:0,followerCount:0},this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers)return v("div",{className:"msg",children:v("div",{className:"msg-content",children:[v("p",{children:["Share your profile link so ",this.state.name||"this user"," can follow you:"]}),v("p",{children:v(Ui,{text:he("copy_link"),copyStr:hr.getMyProfileLink()})}),v("small",{children:he("no_followers_yet_info")})]})})}async viewAs(t){t.preventDefault(),_r("/"),de.login({rpub:this.state.hexPub})}renderTabs(){const t=window.location.pathname.split("/")[1],n=window.location.pathname,i=s=>n===s?"btn btn-sm btn-primary":"btn btn-sm btn-neutral";return v("div",{className:"flex mx-4 gap-2 mb-4 overflow-x-auto",children:[v(sS,{className:i("/"+t),href:"/"+t,children:[he("posts"),v(dt,{when:this.state.noPosts,children:" (0)"})]}),v(sS,{className:i("/"+t+"/replies"),href:"/"+t+"/replies",children:[he("posts")," & ",he("replies"),v(dt,{when:this.state.noReplies,children:" (0)"})]}),v(sS,{className:i("/"+t+"/likes"),href:"/"+t+"/likes",children:[he("likes"),v(dt,{when:this.state.noLikes,children:" (0)"})]})]})}renderTab(){return this.state.hexPub?this.props.tab==="replies"?v(vy,{index:"postsAndReplies",nostrUser:this.state.hexPub},`replies${this.state.hexPub}`):this.props.tab==="likes"?v(vy,{index:"likes",nostrUser:this.state.hexPub},`likes${this.state.hexPub}`):this.props.tab==="media"?v("div",{children:"TODO media message feed"}):v("div",{children:[this.getNotification(),v(vy,{index:"posts",nostrUser:this.state.hexPub},`posts${this.state.hexPub}`)]}):v("div",{})}renderView(){const{hexPub:t,display_name:n,name:i,profile:s,banner:o,picture:a,blocked:l}=this.state;if(!t)return v("div",{});const u=n||i||"Profile",f=`${u} | Iris`,c=`Latest posts by ${n||i||"user"}. ${(s==null?void 0:s.about)||""}`;return v(ut,{children:[v(dt,{when:o,children:v("div",{className:"mb-4 h-48 bg-cover bg-center",style:{backgroundImage:`url(${o})`}})}),v("div",{children:[v(Eh,{children:[v("title",{children:u}),v("meta",{name:"description",content:c}),v("meta",{property:"og:type",content:"profile"}),v(dt,{when:a,children:[v("meta",{property:"og:image",content:a}),v("meta",{name:"twitter:image",content:a})]}),v("meta",{property:"og:title",content:f}),v("meta",{property:"og:description",content:c})]}),v(pAe,{npub:this.state.npub,hexPub:this.state.hexPub}),v(dt,{when:!l,children:[this.renderTabs(),this.renderTab()]})]})]})}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this),Ne.get("isMyProfile").put(!1)}componentDidUpdate(t,n){var i;!n.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}loadProfile(t){const n=t===de.getPubKey();Ne.get("isMyProfile").put(n),Ne.get("noFollowers").on(this.inject()),this.subscriptions.push(tt.getProfile(t,i=>{let s;try{if(s=i.banner&&new URL(i.banner).toString(),!s)return;s=FK(s)?s:`https://imgproxy.iris.to/insecure/plain/${s}`,this.setState({banner:s})}catch{console.log("Invalid banner URL",i.banner)}}))}componentDidMount(){this.restoreScrollPosition();const t=this.props.id,n=de.toNostrBech32Address(t,"npub");if(Ne.get("loggedIn").on(this.inject()),n&&n!==t){_r(`/${n}`,!0);return}const i=de.toNostrHexAddress(t);if(!i){let s=t;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),de.getPubKeyByNip05Address(s).then(o=>{if(o){const a=de.toNostrBech32Address(o,"npub");a&&a!==o&&(this.setState({npub:a,hexPub:o}),this.loadProfile(o))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:de.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}class vAe extends $n{onLogoutClick(r){r?_r("/logout"):Ch.logOut()}async onExtensionLoginClick(r){r.preventDefault();const t=await window.nostr.getPublicKey();de.login({rpub:t})}deleteAccount(){confirm(`${he("delete_account")}?`)&&(Me.publish({kind:0,content:JSON.stringify({deleted:!0})}),Me.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{Ch.logOut()},1e3))}render(){const r=de.getPrivKey();let t;r&&(t=Mc.nsecEncode(r));const n=de.getPubKey(),i=Mc.npubEncode(n),s=!!de.getPrivKey();return v(ut,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("account")}),s?v("p",{children:[v("b",{children:he("save_backup_of_privkey_first")})," ",he("otherwise_cant_log_in_again")]}):null,v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.onLogoutClick(s),children:he("log_out")}),v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:he("switch_account")})]}),this.state.showSwitchAccount?Co`
                <p>
                  <${tAe} />
                </p>
                <p>
                  <a href="" onClick=${o=>this.onExtensionLoginClick(o)}>
                    ${he("nostr_extension_login")}
                  </a>
                </p>
              `:"",v("h3",{children:he("public_key")}),v("p",{children:v("small",{children:i})}),v("div",{className:"flex gap-2 my-2",children:[v(Ui,{className:"btn btn-neutral btn-sm",copyStr:i,text:"Copy npub"}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:n,text:"Copy hex"})]}),v("h3",{children:he("private_key")}),v("div",{className:"flex gap-2 my-2",children:r?v(ut,{children:[v(Ui,{className:"btn btn-neutral btn-sm",copyStr:t,text:"Copy nsec"}),v(Ui,{className:"btn btn-neutral btn-sm",copyStr:r,text:"Copy hex"})]}):v("p",{children:he("private_key_not_present_good")})}),r?v("p",{children:he("private_key_warning")}):"",hr.isStandalone()?v(ut,{children:[v("h3",{children:he("delete_account")}),v("p",{children:v("button",{className:"btn btn-sm btn-danger",onClick:()=>this.deleteAccount(),children:he("delete_account")})})]}):null]})})}}const gAe=()=>{const[e,r]=Le(!1);return St(()=>{var t;(t=Ch.public)==null||t.get("settings/colorScheme",()=>{}),Ne.get("showConnectedRelays").on(r)},[]),v(ut,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("appearance")}),v("p",{children:[v("input",{className:"checkbox",type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:e,onChange:t=>{Ne.get("showConnectedRelays").put(t.currentTarget.checked)}}),v("label",{htmlFor:"showConnectedRelays",children:[" ",he("show_connected_relays_in_header")]})]})]})})};class yAe extends $n{profileExportJson(){const r=de.getPubKey();let t=[];const n=Me.db.findOne({kind:0,pubkey:r}),i=Me.db.findOne({kind:3,pubkey:r});return n&&t.push(n),i&&t.push(i),t=JSON.stringify(t,null,2),t}async exportMyEvents(){console.log("exporting my events");const r=de.getPubKey(),t=[];let n=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await ll.db.events.where({pubkey:r}).each(i=>{t.push(i),n++}),this.setState({saveMessage:`Found ${n} events`,downloadMyEventsMessage:null}),JSON.stringify(t)}render(){return v(ut,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("backup")}),v("h3",{children:he("save")}),v("p",{children:[he("profile")," & ",he("follows"),":"]}),v("p",{children:[v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:he("download")}),v(Ui,{text:he("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),v("p",{children:[he("your_events"),":"]}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||he("download")})}),this.state.saveMessage&&v("p",{children:this.state.saveMessage}),this.state.saveError&&v("p",{class:"warning",children:this.state.saveError}),v("h3",{children:he("load")}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),v("p",{children:v("textarea",{className:"textarea",onInput:r=>this.import(r.target.value),placeholder:he("paste_event_json")})}),this.state.loadError&&v("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&v("p",{class:"positive",children:he("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&v(ut,{children:[v("p",{class:"positive",children:he("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(r=>v("div",{className:"profile-link-container",children:[v(Qt,{href:`/${de.toNostrBech32Address(r,"npub")}`,className:"profile-link",children:[v(hs,{str:r,width:40}),v(Er,{pub:r})]}),v(Wh,{id:r})]}))]})]})})}async onClickDownload(r,t){try{this.setState({saveMessage:null,saveError:null});const n=await t(),i="data:text/json;charset=utf-8,"+encodeURIComponent(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove()}catch(n){console.error(n),this.setState({saveError:n.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=t=>{var s;const i=(s=t.target.files)==null?void 0:s[0];if(i){const o=new FileReader;o.onload=()=>{this.import(o.result)},o.readAsText(i)}},r.click()}import(r){var t;if(!r||r.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let n=JSON.parse(r);Array.isArray(n)||(n=[n]);for(const i of n){if(!i.sig)continue;Me.publish(i);const s=de.getPubKey();if(i.pubkey===s&&i.kind===3){const o=i.tags.filter(u=>u[0]==="p").map(u=>u[1]),a=(((t=Me.db.findOne({kind:3,pubkey:s}))==null?void 0:t.tags)||[]).filter(u=>u[0]==="p").map(u=>u[1]),l=o.filter(u=>!a.includes(u));tt.setFollowed(l),this.setState({restoredFollows:l})}}this.setState({loadError:null,importedEvents:n.length})}catch(n){this.setState({loadError:n.message})}}}class mAe extends $n{constructor(){super(),this.state={settings:{}}}componentDidMount(){Ne.get("settings").on(this.inject())}render(){const r=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],t=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return v(ut,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("content")}),v("h3",{children:he("notes")}),r.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>Ne.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n)),v("h3",{children:he("media")}),t.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>Ne.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n))]})})}}class bAe extends $n{render(){const r=(n,i,s)=>v("p",{children:[v("input",{type:"checkbox",id:n,checked:this.state[n]===void 0?s:this.state[n],onChange:o=>{const a=o.target.checked;Ne.get("dev").get(n).put(a)}}),v("label",{htmlFor:n,children:i})]}),t=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexed03",label:"Use central index server for kinds 0 and 3",defaultValue:!0},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return v(ut,{children:v("div",{class:"centered-container",children:[v("h3",{children:"Developer"}),v("p",{children:"Settings intended for Dpeep developers."}),t.map(({key:n,label:i,defaultValue:s})=>r(n,i,s))]})})}componentDidMount(){Ne.get("dev").on(this.sub(r=>this.setState(r)))}}class wAe extends $n{constructor(){super(...arguments);ce(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});ce(this,"checkAvailabilityFromAPI",wn.debounce(async t=>{const n=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(t)}`);if(t===this.state.newUserName)if(n.status<500){const i=await n.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(t,n=!0){return v(ut,{children:[v("p",{children:["Username: ",v("b",{children:t})]}),v("p",{children:["Short link:"," ",n?v("a",{href:`https://iris.to/${t}`,onClick:i=>{i.preventDefault(),_r(`/${t}`)},children:["iris.to/",t]}):v(ut,{children:["iris.to/",t]})]}),v("p",{children:["Nostr address (nip05): ",v("b",{children:[t,"@iris.to"]})]})]})}render(){let t;if(this.state.irisToActive){const n=this.state.profile.nip05.split("@")[0];t=this.renderAccountName(n)}else this.state.existing&&this.state.existing.confirmed?t=v("div",{children:[v("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),v("p",{children:v(hh,{onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?t=v("div",{children:[v("p",{className:"text-iris-green",children:["Username iris.to/",v("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),v("p",{children:v(hh,{onClick:()=>this.enableReserved(),children:"Yes please"})}),v("p",{children:v(hh,{onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?t=v("div",{className:"text-iris-red",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=n=>this.register(n),t=v(ut,{children:[v("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),v("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):t=v("div",{children:[v("p",{children:"Register an Iris username (iris.to/username)"}),v("form",{onSubmit:n=>this.showChallenge(n),children:[v("div",{className:"flex gap-2",children:[v("input",{className:"input",type:"text",placeholder:"Username",value:this.state.newUserName,onInput:n=>this.onNewUserNameChange(n)}),v("button",{className:"btn btn-primary",type:"submit",children:"Register"})]}),v("p",{children:this.state.newUserNameValid?v(ut,{children:[v("span",{className:"text-iris-green",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):v("span",{className:"text-iris-red",children:this.state.invalidUsernameMessage})})]})]});return v(ut,{children:[v("h3",{children:"Iris.to account"}),t,v("p",{children:v("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})}async onNewUserNameChange(t){const n=t.target.value;if(n.length===0){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:""});return}if(n.length<8||n.length>15){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 8 and 15 characters"});return}if(!n.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:n,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(n)}showChallenge(t){t.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(t){console.log("register",t);const n=de.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};i.id=Me.getEventHash(i),i.sig=await de.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:t})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(o=>{this.setState({error:o.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const t=this.state.existing.name+"@iris.to",n=setTimeout(()=>{tt.setMetadata({nip05:t})},2e3);tt.getProfile(de.getPubKey(),i=>{i&&(clearTimeout(n),i.nip05!==t&&(i.nip05=t,tt.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const t=de.getPubKey(),n={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Me.getEventHash(n),n.sig=await de.sign(n);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});Ne.get("showNoIrisToAddress").put(!1),Ne.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const t=de.getPubKey(),n={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Me.getEventHash(n),n.sig=await de.sign(n);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const t=de.getPubKey();tt.getProfile(t,n=>{const i=n&&n.nip05&&n.nip05valid&&n.nip05.endsWith("@iris.to");this.setState({profile:n,irisToActive:i}),n&&!i&&this.checkExistingAccount(t)},!0),this.checkExistingAccount(t)}async checkExistingAccount(t){const n=await fetch(`https://api.iris.to/user/find?public_key=${t}`);if(n.status===200){const i=await n.json();this.setState({existing:i})}}}const $Ae=()=>v(ut,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("language")}),v("div",{class:"centered-container",children:Object.keys(Ky).map(e=>{let r;return e==Wo?r=v("input",{type:"radio",name:"language",id:e,onChange:t=>R8(t),value:e,checked:!0}):r=v("input",{type:"radio",name:"language",id:e,onChange:t=>R8(t),value:e}),v(ut,{children:[r,v("label",{for:e,children:[" ",Ky[e]]}),v("br",{})]},e)})})]})});function R8(e){const r=e.target.value;ip.indexOf(r)>=0&&(localStorage.setItem("language",r),location.reload())}const _Ae=()=>{const[e,r]=Le(Array.from(on.relays.values())),[t,n]=Le([]),[i,s]=Le("");St(()=>{const c=setInterval(()=>{r(Array.from(on.relays.values()))},2e3);return()=>clearInterval(c)}),St(()=>{n(on.getPopularRelays())},[]);const o=c=>{Ne.get("relays").get(c.url).put(null),on.remove(c.url)},a=c=>c.includes("://")?c:`wss://${c}`,l=(c,d)=>{const y=a(d);Ne.get("relays").get(y).put({enabled:!0,newRelayUrlWithProtocol:y}),c.preventDefault(),on.add(y),s("")},u=c=>{try{return Bt.relayPool.relayByUrl.get(c.url).status}catch{return 3}},f=c=>{switch(u(c)){case 0:return"text-iris-yellow";case 1:return"text-iris-green";case 2:return"text-iris-yellow";case 3:return"";default:return"status"}};return v("div",{className:"centered-container",children:[v("h2",{children:he("network")}),v("div",{className:"flex flex-col gap-2",children:[e.map(c=>v("div",{className:"flex gap-2 flex-row peer",children:[v("div",{className:"flex-1",children:[v("span",{className:f(c),children:" "}),c.url]},c.url),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>o(c),children:he("remove")}),v("input",{className:"checkbox",type:"checkbox",checked:c.enabled!==!1,onChange:()=>{c.enabled=c.enabled===!1,c.enabled?on.enable(c.url):on.disable(c.url)}})]})),v("div",{className:"flex flex-row peer gap-2",children:[v("div",{className:"flex-cell",children:v("input",{className:"input",id:"new-relay-url",type:"text",placeholder:he("new_relay_url"),value:i,onChange:c=>s(c.target.value)})},"new"),v("div",{className:"flex-cell no-flex",children:v("button",{className:"btn btn-neutral",onClick:c=>l(c,i),children:he("add")})})]}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>on.saveToContacts(),children:he("save_relays_publicly")}),v("button",{className:"btn btn-neutral",onClick:()=>on.restoreDefaults(),children:he("restore_defaults")})]})]}),v("h3",{children:he("popular_relays")}),v("div",{className:"flex flex-col gap-2",children:[v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:he("users")}),v("div",{className:"flex-grow",children:"URL"})]}),t.map(c=>v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:c.users}),v("div",{className:"flex-grow truncate",children:c.url}),v("div",{className:"flex-initial",children:v("button",{className:"btn btn-sm btn-neutral",onClick:d=>l(d,c.url),children:he("add")})})]},c.url))]})]})},xAe=()=>{const[e,r]=Le("USD"),[t,n]=Le(1e3);St(()=>{Ne.get("displayCurrency").on(s=>{r(s)})},[]),St(()=>{Ne.get("defaultZapAmount").on(s=>{n(s)})});const i=s=>{const a=s.target.value;Ne.get("displayCurrency").put(a)};return v(ut,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("payments")}),v("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",v("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),v("p",{children:[v("label",{for:"displayCurrency",children:he("display_currency")}),v("select",{className:"select",id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[v("option",{value:"USD",children:"USD"}),v("option",{value:"EUR",children:"EUR"}),v("option",{value:"JPY",children:"JPY"}),v("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),v("p",{children:[v("label",{for:"defaultZapAmount",children:[he("default_zap_amount")," (sats):"]}),v("input",{className:"input",type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:t,onChange:s=>{Ne.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class EAe extends $n{constructor(){super();ce(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let t=!1;const n=this.state.blockedUsers.map(s=>{const o=de.toNostrBech32Address(s,"npub");if(o)return t=!0,v("div",{children:v(Qt,{href:`/${o}`,children:v(Er,{pub:s})})},s)}),i=Array.from(tt.usersByFollowDistance.entries()).slice(1);return v(ut,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("social_network")}),v("h3",{children:"Stored on your device"}),v("p",{children:["Total size: ",i.reduce((s,o)=>s+o[1].size,0)," users"]}),v("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>v("div",{children:[s[0]||he("unknown"),": ",s[1].size," users"]})),v("p",{children:"Filter incoming events by follow distance:"}),v("select",{className:"select",value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const o=s.target;Ne.get("globalFilter").get("maxFollowDistance").put(parseInt(o.value))},children:[v("option",{value:"0",children:"Off"}),v("option",{value:"1",children:"1"}),v("option",{value:"2",children:"2"}),v("option",{value:"3",children:"3"}),v("option",{value:"4",children:"4"}),v("option",{value:"5",children:"5"}),v("option",{value:"6",children:"6"})]}),v("p",{children:"Minimum number of followers at maximum follow distance:"}),v("input",{className:"input",type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||Me.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const o=s.target;Ne.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(o.value))}}),v("h3",{children:he("blocked_users")}),!t&&he("none"),v("p",{children:v("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?he("hide"):he("show")," ",n.length]})}),this.state.showBlockedUsers&&n]})})}componentDidMount(){tt.getBlockedUsers(t=>{this.setState({blockedUsers:Array.from(t)})}),Ne.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class SAe extends $n{constructor(){super();ce(this,"content","");ce(this,"pages",{account:vAe,network:_Ae,appearance:gAe,language:$Ae,content:mAe,payments:xAe,backup:yAe,social_network:EAe,iris_account:wAe,dev:bAe});this.content="home"}render(){const t=this.pages[this.props.id]||this.pages.account;return v("div",{className:"prose",children:v(t,{})})}}const hw={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(hw.iris_account="iris.to");class kAe extends $n{menuLinkClicked(r,t){t.preventDefault(),Ne.get("toggleSettingsMenu").put(!1),Ne.get("scrollUp").put(!0),_r(`/settings/${r}`)}render(){const r=this.props.activePage||"account";return v("div",{className:`flex-col w-full md:w-48 flex-shrink-0 ${this.props.activePage?"hidden md:flex":"flex"}`,children:Object.keys(hw).map(t=>{if(hw[t])return v("a",{href:"#",className:`btn inline-flex w-auto flex items-center p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900 ${r===t&&window.innerWidth>624?"active":""}`,onClick:n=>this.menuLinkClicked(t,n),children:[v("span",{class:"text",children:he(hw[t])}),v(dt,{when:t==="language",children:v(NH,{width:16})})]},t)})})}}const TAe=e=>v(ut,{children:[v(ku,{}),v("div",{className:"flex flex-row px-2 md:px-0",children:[v(kAe,{activePage:e.page}),v("div",{className:e.page?"":"hidden md:flex",children:v(SAe,{id:e.page})})]})]});class IAe extends $n{render(){return v(ut,{children:[v(ku,{}),v("div",{className:"main-view",id:"settings",children:v("div",{className:"centered-container mobile-padding15",children:[v("h2",{children:he("subscribe")}),v("h3",{children:"Iris Supporter"}),v("p",{children:"Support open source development and get extra features!"}),v("p",{children:v("ul",{children:[v("li",{children:"Iris Supporter Badge"}),v("li",{children:"Purple checkmark on Iris"}),v("li",{children:"High-quality automatic translations (via deepl.com)"}),v("li",{children:"Iris Supporters' private group chat"}),v("li",{children:"More features to come!"})]})}),v("p",{children:[v("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),v("label",{htmlFor:"subscription_annually",children:[v("b",{children:"8  / month"})," charged annually (96  / year)"]})]}),v("p",{children:[v("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),v("label",{htmlFor:"subscription_monthly",children:[v("b",{children:"10  / month"})," charged monthly (120  / year)"]})]}),v("p",{children:v(hh,{children:"Subscribe"})}),v("h3",{children:"Iris Titan"}),v("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",v("ul",{children:[v("li",{children:"Iris Titan Badge"}),v("li",{children:"Iris Titans private group chat"}),v("li",{children:"Priority support"})]})]}),v("p",{children:[v("b",{children:"1000 "})," one-time payment."]}),v("p",{children:v(hh,{children:"Subscribe"})}),v("br",{}),v("br",{})]})})]})}}class AAe extends qh{constructor(){super(),this.class="public-messages-view"}renderView(){return Co`
      <div id="message-list" class="centered-container">
        <${Mm} standalone=${!0} showFiles=${!0} torrentId=${this.props.id} />
      </div>
    `}}function OAe(){return St(()=>{let e=de.getPubKey();return e&&rr.init(e),()=>{}},[]),null}const CAe=e=>{switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"Yes":"No";case"object":return e instanceof Date?e.toLocaleDateString():e===null?"null":Array.isArray(e)?"Array["+e.length+"]":"Object";case"undefined":return"undefined";case"function":return"function";case"symbol":return e.toString();case"bigint":return e.toString()+"n";default:return"Unknown type"}},oS=({data:e,title:r})=>v("div",{className:"flex flex-col border-2 rounded-lg border-white p-4",children:[v("div",{className:"px-4 py-2 text-left text-lg font-semibold",children:r}),e==null?void 0:e.map(t=>v("div",{className:"flex justify-between p-2",children:[v("span",{className:"whitespace-nowrap",children:t.name}),"",v("span",{className:"flex-grow text-right",children:CAe(t.value)})]}))]}),PAe=["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9","npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a","npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh"],Bo="npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m",Mo="npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",da="npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m",Lo="npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk",Lm="npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p",Ov="npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8",Fm="npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6",jm="npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",D8=[{from:Bo,to:Mo,val:1},{from:Bo,to:da,val:1},{from:Bo,to:Lo,val:1},{from:Bo,to:Lm,val:1},{from:Bo,to:Ov,val:1},{from:Bo,to:Fm,val:1},{from:Bo,to:jm,val:1}],B8=[{from:Mo,to:Bo,val:1},{from:Mo,to:da,val:1},{from:Mo,to:Lo,val:1},{from:Mo,to:Lm,val:1},{from:Mo,to:Ov,val:1},{from:Mo,to:Fm,val:1},{from:Mo,to:jm,val:1}],M8=[{from:da,to:Bo,val:1},{from:da,to:Mo,val:1},{from:da,to:Lo,val:1},{from:da,to:Lm,val:1},{from:da,to:Ov,val:1},{from:da,to:Fm,val:1},{from:da,to:jm,val:1}],L8=[{from:Lo,to:Bo,val:-1},{from:Lo,to:Mo,val:-1},{from:Lo,to:da,val:-1},{from:Lo,to:Lm,val:-1},{from:Lo,to:Ov,val:-1},{from:Lo,to:Fm,val:1},{from:Lo,to:jm,val:1}],NAe=[{from:Ov,to:Bo,val:-1}];function fa(e){let{from:r,to:t}=e;return r=de.toNostrHexAddress(r),t=de.toNostrHexAddress(t),rr.setTrust({...e,from:r,to:t},!0)}function ha(e,r,t){return{from:e,to:r,val:t,entityType:1,context:"nostr",note:"",timestamp:Kke()}}function Ul(e){Object.values(e).forEach(r=>{fa(ha(r.from,r.to,r.val))})}const RAe=e=>{const[r,t]=Le(null),[n]=Le([]),i=de.toNostrHexAddress(e.id)||de.getPubKey(),s=de.toNostrBech32Address(i,"npub");St(()=>(rr.whenReady(()=>{Wi.getProfiles(PAe,x=>{let I={};x.forEach(g=>{I[vt(g.key)]=g});let O=Object.values(rr.g.edges).length,C=Object.values(rr.g.vertices).length;t(g=>({...g,profiles:x,profileIndex:I,edgesCount:O,nodesCount:C}))}).then(x=>n.push(x))}),()=>{n.forEach(x=>x==null?void 0:x())}),[i]);function o(){let x=Object.values(rr.g.edges).length,I=Object.values(rr.g.vertices).length,O=Object.values(tt.profiles);rr.processGraph=!0,rr.processScore(),t(C=>({...C,profiles:O,edgesCount:x,nodesCount:I}))}const a=x=>{x.preventDefault(),tt.profiles=new Map,o()},l=x=>{x.preventDefault(),rr.g.vertices={},rr.g.edges={},o()},u=x=>{fwe()},f=x=>{x.preventDefault(),u(),l(x),a(x)},c=x=>{x.preventDefault(),fa(ha(i,Bo,1)),Ul(D8),o()},d=x=>{x.preventDefault(),fa(ha(i,da,1)),Ul(M8),o()},y=x=>{x.preventDefault(),fa(ha(i,Lo,1)),Ul(L8),o()},w=x=>{x.preventDefault(),fa(ha(i,Mo,1)),Ul(B8),o()},b=x=>{x.preventDefault(),fa(ha(i,Mo,1)),fa(ha(i,Lo,1)),fa(ha(i,Lm,1)),fa(ha(i,Ov,1)),fa(ha(i,Fm,1)),fa(ha(i,jm,1)),Ul(D8),Ul(M8),Ul(L8),Ul(B8),Ul(NAe),o()},T=()=>{if(!(r!=null&&r.profiles))return;let x=r.profiles.map(I=>({name:I.name,value:de.toNostrBech32Address(I.key,"npub")}));return v(oS,{data:x,title:"Profiles"})},_=()=>{if(!(r!=null&&r.edges))return;let x=r.edges.map(I=>{var O,C;return{name:I.key,value:`${(O=I.out)==null?void 0:O.id} -- ${I.val} --> ${(C=I.in)==null?void 0:C.id}`}});return v(oS,{data:x,title:"Edges"})},A=()=>{let x=[{name:"Profiles",value:r==null?void 0:r.profiles.length},{name:"Vertices",value:r==null?void 0:r.nodesCount},{name:"Edges",value:r==null?void 0:r.edgesCount}];return v(oS,{data:x,title:"Overview"})};return v(ut,{children:[v(ku,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${s}`,children:v(Er,{pub:s})}),v("span",{style:{flex:1},className:"ml-1",children:"Test Data"})]})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),"All trust data generated is solely for testing and will not be submitted to the relays. The profiles used are exclusively for demonstration purposes and do not reflect any real-life trust situations.",v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:[v(Nf,{className:"btn btn-sm",onClick:c,children:"Create Jack Graph"}),v(Nf,{className:"btn btn-sm",onClick:d,children:"Create Saylor Graph"}),v(Nf,{className:"btn btn-sm",onClick:y,children:"Create Saylor Graph"}),v(Nf,{className:"btn btn-sm",onClick:w,children:"Create Lyn Graph"}),v(Nf,{className:"btn btn-sm",onClick:b,children:"Create All Graphs"}),v(Nf,{className:"btn btn-sm",onClick:f,children:"Reset All"})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex",children:[v("div",{className:"flex flex-1 gap-4",children:A()}),v("div",{className:"flex flex-1 gap-4",children:T()}),v("div",{className:"flex flex-1 gap-4",children:_()})]})]})},DAe=({view:e,me:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v("div",{className:"flex flex-wrap gap-4",children:[v("span",{className:"text-neutral-500",children:"View:"}),v(dt,{when:!r,children:v(Qt,{href:t({view:"path"}),className:e=="path"?n:i,children:he("Path")})}),v(Qt,{href:t({view:"graph"}),className:e=="graph"?n:i,children:he("Graph")}),v(Qt,{href:t({view:"list"}),className:e=="list"?n:i,children:he("List")})]})};let iG=!0;const sG=function(){iG=!1,window.removeEventListener("popstate",sG)};window.addEventListener("popstate",sG);const BAe=e=>{const[r,t]=Le(null);let n=0;St(()=>(window.addEventListener("scroll",i),s(),()=>{r&&r.disconnect(),window.removeEventListener("scroll",i)}),[]);let i=wn.debounce(()=>{const a=window.scrollY||document.documentElement.scrollTop,u={...window.history.state,scrollPosition:a};window.history.replaceState(u,"")},100);function s(a=!0){var f,c;const l=window.history.state,u=(f=window.history.state)==null?void 0:f.previousState;if(!iG&&l!==u)a&&o(),n||(n=(c=window.history.state)==null?void 0:c.scrollPosition),n&&window.scrollTo(0,n);else{const y={...window.history.state||{},previousState:l};window.history.replaceState(y,"")}}let o=()=>{t(new ResizeObserver(a=>{a.forEach(()=>{s(!1)})})),r==null||r.observe(document.body),setTimeout(()=>{r&&r.disconnect()},1e3)};return v(ut,{children:v("div",{children:v(QP,{children:e.children})})})},MAe=({entitytype:e,dir:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v(dt,{when:r=="out",children:v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Subject:"}),v(Qt,{href:t({entitytype:"key"}),className:e=="key"?n:i,children:he("Profile")}),v(Qt,{href:t({entitytype:"item"}),className:e=="item"?n:i,children:he("Post")})]})})},oG=({dir:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:[he("Direction"),":"]}),v(Qt,{href:r({dir:"out"}),className:e=="out"?t:n,children:he("Outgoing")}),v(Qt,{href:r({dir:"in"}),className:e=="in"?t:n,children:he("Incoming")})]})},LAe=({trusttype:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Value:"}),v(Qt,{href:r({trusttype:"both"}),className:e=="both"?t:n,children:he("Both")}),v(Qt,{href:r({trusttype:"trust"}),className:e=="trust"?t:n,children:he("Trust")}),v(Qt,{href:r({trusttype:"distrust"}),className:e=="distrust"?t:n,children:he("Distrust")})]})};function FAe(e,r){return!r||e.length==0?[...e]:e.filter(n=>{var s,o;let i=Wi.getDefaultProfile(n.id);return!!((s=i==null?void 0:i.name)!=null&&s.toLowerCase().includes(r.toLowerCase())||(o=i==null?void 0:i.display_name)!=null&&o.toLowerCase().includes(r.toLowerCase()))})}function jAe(e,r){return e.degree<r.degree?-1:e.degree>r.degree?1:0}const aG=(e,r,t=!0)=>!e||!r?null:v("div",{className:"text-sm flex flex-2 gap-2",children:[rG(e,r,t),nG(e,r,t)]}),zAe=({props:e})=>{const[r,t]=Le([]),[n,i]=Le([]),[s]=Le([]);St(()=>{let u=vt(e.hexKey);if(!u)return;let f=qee(e.entitytype,1),c=X0t(e.trusttype,void 0);return o(u,e.dir,f,c),()=>{s.forEach(d=>d==null?void 0:d())}},[e.npub,e.dir,e.entitytype,e.trusttype]),St(()=>{let u=FAe(r,e.filter);u.length==0&&n.length==0||i(u)},[e.filter,r]);async function o(u,f,c,d){let y=[];f=="out"&&(y=rr.g.outTrustById(u,c,d)),e.dir=="in"&&(y=rr.g.trustedBy(u,iu.Key,d));let w=y.map(T=>ts(T.id)),b=await Wi.getProfiles(w,T=>{});s.push(b),y=y.sort(jAe),t(y)}const a=()=>{let u=vt(e.hexKey);return n.length==0?v("div",{className:"text-center",children:he("No results")}):v(ut,{children:n.map(f=>l(f,u))})},l=(u,f)=>{const c=ts(u.id),d=u.degree,y=u.score,w=de.toNostrBech32Address(c,"npub");let b="",T="";if(e.dir=="in"){const _=u.out[f];_&&(b=`text-${Jy(_.val)}-500 text-2xl`,T="")}else{const _=u.in[f];_&&(b=`text-${Jy(_.val)}-500 text-2xl`,T="")}return v("div",{className:"flex w-full py-2",children:[v("div",{className:"flex-0 self-center px-4",children:v("i",{className:b,children:T})}),v(Qt,{href:e.setSearch({npub:w}),className:"flex flex-1 gap-2",children:[v(hs,{str:w,width:49}),v("div",{children:[v(Er,{pub:w,hexKey:c})," ",v("span",{className:"text-sm",children:["ID ",u.id]}),v("br",{}),v("span",{className:"text-sm",children:["Degree ",d]})]})]}),aG(y,w)]},c)};return e.npub?v(ut,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(oG,{dir:e.dir,setSearch:e.setSearch}),v(LAe,{trusttype:e.trusttype,setSearch:e.setSearch}),v(MAe,{entitytype:e.entitytype,dir:e.dir,setSearch:e.setSearch})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-col w-full gap-4",children:v(BAe,{children:a()})})]}):null};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function tx(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var F8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v$={},HAe={get exports(){return v$},set exports(e){v$=e}},dA={},UAe={get exports(){return dA},set exports(e){dA=e}},pA={},WAe={get exports(){return pA},set exports(e){pA=e}},o1=function(e){return e&&e.Math==Math&&e},xn=o1(typeof globalThis=="object"&&globalThis)||o1(typeof window=="object"&&window)||o1(typeof self=="object"&&self)||o1(typeof F8=="object"&&F8)||function(){return this}()||Function("return this")(),kr=function(e){try{return!!e()}catch{return!0}},qAe=kr,zm=!qAe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),KAe=zm,lG=Function.prototype,j8=lG.apply,z8=lG.call,Cv=typeof Reflect=="object"&&Reflect.apply||(KAe?z8.bind(j8):function(){return z8.apply(j8,arguments)}),uG=zm,cG=Function.prototype,vA=cG.call,VAe=uG&&cG.bind.bind(vA,vA),Br=uG?VAe:function(e){return function(){return vA.apply(e,arguments)}},fG=Br,GAe=fG({}.toString),YAe=fG("".slice),Tu=function(e){return YAe(GAe(e),8,-1)},ZAe=Tu,XAe=Br,s4=function(e){if(ZAe(e)==="Function")return XAe(e)},gA=typeof document=="object"&&document.all,JAe=typeof gA>"u"&&gA!==void 0,hG={all:gA,IS_HTMLDDA:JAe},dG=hG,QAe=dG.all,En=dG.IS_HTMLDDA?function(e){return typeof e=="function"||e===QAe}:function(e){return typeof e=="function"},Kh={},eOe=kr,ni=!eOe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),tOe=zm,a1=Function.prototype.call,yi=tOe?a1.bind(a1):function(){return a1.apply(a1,arguments)},Hm={},pG={}.propertyIsEnumerable,vG=Object.getOwnPropertyDescriptor,rOe=vG&&!pG.call({1:2},1);Hm.f=rOe?function(r){var t=vG(this,r);return!!t&&t.enumerable}:pG;var Vh=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},nOe=Br,iOe=kr,sOe=Tu,aS=Object,oOe=nOe("".split),rx=iOe(function(){return!aS("z").propertyIsEnumerable(0)})?function(e){return sOe(e)=="String"?oOe(e,""):aS(e)}:aS,Um=function(e){return e==null},aOe=Um,lOe=TypeError,Wm=function(e){if(aOe(e))throw lOe("Can't call method on "+e);return e},uOe=rx,cOe=Wm,Ra=function(e){return uOe(cOe(e))},H8=En,gG=hG,fOe=gG.all,mi=gG.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:H8(e)||e===fOe}:function(e){return typeof e=="object"?e!==null:H8(e)},Kr={},lS=Kr,uS=xn,hOe=En,U8=function(e){return hOe(e)?e:void 0},ds=function(e,r){return arguments.length<2?U8(lS[e])||U8(uS[e]):lS[e]&&lS[e][r]||uS[e]&&uS[e][r]},dOe=Br,an=dOe({}.isPrototypeOf),Qc=typeof navigator<"u"&&String(navigator.userAgent)||"",yG=xn,cS=Qc,W8=yG.process,q8=yG.Deno,K8=W8&&W8.versions||q8&&q8.version,V8=K8&&K8.v8,va,g$;V8&&(va=V8.split("."),g$=va[0]>0&&va[0]<4?1:+(va[0]+va[1]));!g$&&cS&&(va=cS.match(/Edge\/(\d+)/),(!va||va[1]>=74)&&(va=cS.match(/Chrome\/(\d+)/),va&&(g$=+va[1])));var Pv=g$,G8=Pv,pOe=kr,Nv=!!Object.getOwnPropertySymbols&&!pOe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&G8&&G8<41}),vOe=Nv,mG=vOe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",gOe=ds,yOe=En,mOe=an,bOe=mG,wOe=Object,qm=bOe?function(e){return typeof e=="symbol"}:function(e){var r=gOe("Symbol");return yOe(r)&&mOe(r.prototype,wOe(e))},$Oe=String,Rv=function(e){try{return $Oe(e)}catch{return"Object"}},_Oe=En,xOe=Rv,EOe=TypeError,Ds=function(e){if(_Oe(e))return e;throw EOe(xOe(e)+" is not a function")},SOe=Ds,kOe=Um,o4=function(e,r){var t=e[r];return kOe(t)?void 0:SOe(t)},fS=yi,hS=En,dS=mi,TOe=TypeError,IOe=function(e,r){var t,n;if(r==="string"&&hS(t=e.toString)&&!dS(n=fS(t,e))||hS(t=e.valueOf)&&!dS(n=fS(t,e))||r!=="string"&&hS(t=e.toString)&&!dS(n=fS(t,e)))return n;throw TOe("Can't convert object to primitive value")},Uc={},AOe={get exports(){return Uc},set exports(e){Uc=e}},OOe=!0,Y8=xn,COe=Object.defineProperty,POe=function(e,r){try{COe(Y8,e,{value:r,configurable:!0,writable:!0})}catch{Y8[e]=r}return r},NOe=xn,ROe=POe,Z8="__core-js_shared__",DOe=NOe[Z8]||ROe(Z8,{}),a4=DOe,X8=a4;(AOe.exports=function(e,r){return X8[e]||(X8[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var BOe=Wm,MOe=Object,Bs=function(e){return MOe(BOe(e))},LOe=Br,FOe=Bs,jOe=LOe({}.hasOwnProperty),Kn=Object.hasOwn||function(r,t){return jOe(FOe(r),t)},zOe=Br,HOe=0,UOe=Math.random(),WOe=zOe(1 .toString),nx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+WOe(++HOe+UOe,36)},qOe=xn,KOe=Uc,J8=Kn,VOe=nx,GOe=Nv,YOe=mG,op=qOe.Symbol,pS=KOe("wks"),ZOe=YOe?op.for||op:op&&op.withoutSetter||VOe,ln=function(e){return J8(pS,e)||(pS[e]=GOe&&J8(op,e)?op[e]:ZOe("Symbol."+e)),pS[e]},XOe=yi,Q8=mi,eM=qm,JOe=o4,QOe=IOe,eCe=ln,tCe=TypeError,rCe=eCe("toPrimitive"),nCe=function(e,r){if(!Q8(e)||eM(e))return e;var t=JOe(e,rCe),n;if(t){if(r===void 0&&(r="default"),n=XOe(t,e,r),!Q8(n)||eM(n))return n;throw tCe("Can't convert object to primitive value")}return r===void 0&&(r="number"),QOe(e,r)},iCe=nCe,sCe=qm,ix=function(e){var r=iCe(e,"string");return sCe(r)?r:r+""},oCe=xn,tM=mi,yA=oCe.document,aCe=tM(yA)&&tM(yA.createElement),l4=function(e){return aCe?yA.createElement(e):{}},lCe=ni,uCe=kr,cCe=l4,bG=!lCe&&!uCe(function(){return Object.defineProperty(cCe("div"),"a",{get:function(){return 7}}).a!=7}),fCe=ni,hCe=yi,dCe=Hm,pCe=Vh,vCe=Ra,gCe=ix,yCe=Kn,mCe=bG,rM=Object.getOwnPropertyDescriptor;Kh.f=fCe?rM:function(r,t){if(r=vCe(r),t=gCe(t),mCe)try{return rM(r,t)}catch{}if(yCe(r,t))return pCe(!hCe(dCe.f,r,t),r[t])};var bCe=kr,wCe=En,$Ce=/#|\.prototype\./,Km=function(e,r){var t=xCe[_Ce(e)];return t==SCe?!0:t==ECe?!1:wCe(r)?bCe(r):!!r},_Ce=Km.normalize=function(e){return String(e).replace($Ce,".").toLowerCase()},xCe=Km.data={},ECe=Km.NATIVE="N",SCe=Km.POLYFILL="P",wG=Km,nM=s4,kCe=Ds,TCe=zm,ICe=nM(nM.bind),ef=function(e,r){return kCe(e),r===void 0?e:TCe?ICe(e,r):function(){return e.apply(r,arguments)}},so={},ACe=ni,OCe=kr,$G=ACe&&OCe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),CCe=mi,PCe=String,NCe=TypeError,oo=function(e){if(CCe(e))return e;throw NCe(PCe(e)+" is not an object")},RCe=ni,DCe=bG,BCe=$G,l1=oo,iM=ix,MCe=TypeError,vS=Object.defineProperty,LCe=Object.getOwnPropertyDescriptor,gS="enumerable",yS="configurable",mS="writable";so.f=RCe?BCe?function(r,t,n){if(l1(r),t=iM(t),l1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&mS in n&&!n[mS]){var i=LCe(r,t);i&&i[mS]&&(r[t]=n.value,n={configurable:yS in n?n[yS]:i[yS],enumerable:gS in n?n[gS]:i[gS],writable:!1})}return vS(r,t,n)}:vS:function(r,t,n){if(l1(r),t=iM(t),l1(n),DCe)try{return vS(r,t,n)}catch{}if("get"in n||"set"in n)throw MCe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var FCe=ni,jCe=so,zCe=Vh,Iu=FCe?function(e,r,t){return jCe.f(e,r,zCe(1,t))}:function(e,r,t){return e[r]=t,e},u1=xn,HCe=Cv,UCe=s4,WCe=En,qCe=Kh.f,KCe=wG,Fd=Kr,VCe=ef,jd=Iu,sM=Kn,GCe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return HCe(e,this,arguments)};return r.prototype=e.prototype,r},Nt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?u1:i?u1[t]:(u1[t]||{}).prototype,a=n?Fd:Fd[t]||jd(Fd,t,{})[t],l=a.prototype,u,f,c,d,y,w,b,T,_;for(d in r)u=KCe(n?d:t+(i?".":"#")+d,e.forced),f=!u&&o&&sM(o,d),w=a[d],f&&(e.dontCallGetSet?(_=qCe(o,d),b=_&&_.value):b=o[d]),y=f&&b?b:r[d],!(f&&typeof w==typeof y)&&(e.bind&&f?T=VCe(y,u1):e.wrap&&f?T=GCe(y):s&&WCe(y)?T=UCe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&jd(T,"sham",!0),jd(a,d,T),s&&(c=t+"Prototype",sM(Fd,c)||jd(Fd,c,{}),jd(Fd[c],d,y),e.real&&l&&(u||!l[d])&&jd(l,d,y)))},YCe=Nt,ZCe=ni,oM=so.f;YCe({target:"Object",stat:!0,forced:Object.defineProperty!==oM,sham:!ZCe},{defineProperty:oM});var XCe=Kr,_G=XCe.Object,JCe=WAe.exports=function(r,t,n){return _G.defineProperty(r,t,n)};_G.defineProperty.sham&&(JCe.sham=!0);var QCe=pA,xG=QCe,e5e=xG,t5e=e5e,r5e=t5e,n5e=r5e;(function(e){e.exports=n5e})(UAe);(function(e){e.exports=dA})(HAe);var sx=Vt(v$),Qy={},i5e={get exports(){return Qy},set exports(e){Qy=e}},mA={},s5e={get exports(){return mA},set exports(e){mA=e}},o5e=Tu,tf=Array.isArray||function(r){return o5e(r)=="Array"},a5e=Math.ceil,l5e=Math.floor,u5e=Math.trunc||function(r){var t=+r;return(t>0?l5e:a5e)(t)},c5e=u5e,ox=function(e){var r=+e;return r!==r||r===0?0:c5e(r)},f5e=ox,h5e=Math.min,d5e=function(e){return e>0?h5e(f5e(e),9007199254740991):0},p5e=d5e,ao=function(e){return p5e(e.length)},v5e=TypeError,g5e=9007199254740991,u4=function(e){if(e>g5e)throw v5e("Maximum allowed index exceeded");return e},y5e=ix,m5e=so,b5e=Vh,Dv=function(e,r,t){var n=y5e(r);n in e?m5e.f(e,n,b5e(0,t)):e[n]=t},w5e=ln,$5e=w5e("toStringTag"),EG={};EG[$5e]="z";var c4=String(EG)==="[object z]",_5e=c4,x5e=En,dw=Tu,E5e=ln,S5e=E5e("toStringTag"),k5e=Object,T5e=dw(function(){return arguments}())=="Arguments",I5e=function(e,r){try{return e[r]}catch{}},Au=_5e?dw:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=I5e(r=k5e(e),S5e))=="string"?t:T5e?dw(r):(n=dw(r))=="Object"&&x5e(r.callee)?"Arguments":n},A5e=Br,O5e=En,bA=a4,C5e=A5e(Function.toString);O5e(bA.inspectSource)||(bA.inspectSource=function(e){return C5e(e)});var SG=bA.inspectSource,P5e=Br,N5e=kr,kG=En,R5e=Au,D5e=ds,B5e=SG,TG=function(){},M5e=[],IG=D5e("Reflect","construct"),f4=/^\s*(?:class|function)\b/,L5e=P5e(f4.exec),F5e=!f4.exec(TG),Mg=function(r){if(!kG(r))return!1;try{return IG(TG,M5e,r),!0}catch{return!1}},AG=function(r){if(!kG(r))return!1;switch(R5e(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return F5e||!!L5e(f4,B5e(r))}catch{return!0}};AG.sham=!0;var ax=!IG||N5e(function(){var e;return Mg(Mg.call)||!Mg(Object)||!Mg(function(){e=!0})||e})?AG:Mg,aM=tf,j5e=ax,z5e=mi,H5e=ln,U5e=H5e("species"),lM=Array,W5e=function(e){var r;return aM(e)&&(r=e.constructor,j5e(r)&&(r===lM||aM(r.prototype))?r=void 0:z5e(r)&&(r=r[U5e],r===null&&(r=void 0))),r===void 0?lM:r},q5e=W5e,lx=function(e,r){return new(q5e(e))(r===0?0:r)},K5e=kr,V5e=ln,G5e=Pv,Y5e=V5e("species"),Vm=function(e){return G5e>=51||!K5e(function(){var r=[],t=r.constructor={};return t[Y5e]=function(){return{foo:1}},r[e](Boolean).foo!==1})},Z5e=Nt,X5e=kr,J5e=tf,Q5e=mi,e3e=Bs,t3e=ao,uM=u4,cM=Dv,r3e=lx,n3e=Vm,i3e=ln,s3e=Pv,OG=i3e("isConcatSpreadable"),o3e=s3e>=51||!X5e(function(){var e=[];return e[OG]=!1,e.concat()[0]!==e}),a3e=function(e){if(!Q5e(e))return!1;var r=e[OG];return r!==void 0?!!r:J5e(e)},l3e=!o3e||!n3e("concat");Z5e({target:"Array",proto:!0,arity:1,forced:l3e},{concat:function(r){var t=e3e(this),n=r3e(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],a3e(u))for(l=t3e(u),uM(i+l),o=0;o<l;o++,i++)o in u&&cM(n,i,u[o]);else uM(i+1),cM(n,i++,u);return n.length=i,n}});var u3e=Au,c3e=String,_l=function(e){if(u3e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return c3e(e)},ux={},f3e=ox,h3e=Math.max,d3e=Math.min,Gm=function(e,r){var t=f3e(e);return t<0?h3e(t+r,0):d3e(t,r)},p3e=Ra,v3e=Gm,g3e=ao,fM=function(e){return function(r,t,n){var i=p3e(r),s=g3e(i),o=v3e(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},h4={includes:fM(!0),indexOf:fM(!1)},Ym={},y3e=Br,bS=Kn,m3e=Ra,b3e=h4.indexOf,w3e=Ym,hM=y3e([].push),CG=function(e,r){var t=m3e(e),n=0,i=[],s;for(s in t)!bS(w3e,s)&&bS(t,s)&&hM(i,s);for(;r.length>n;)bS(t,s=r[n++])&&(~b3e(i,s)||hM(i,s));return i},d4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$3e=CG,_3e=d4,Zm=Object.keys||function(r){return $3e(r,_3e)},x3e=ni,E3e=$G,S3e=so,k3e=oo,T3e=Ra,I3e=Zm;ux.f=x3e&&!E3e?Object.defineProperties:function(r,t){k3e(r);for(var n=T3e(t),i=I3e(t),s=i.length,o=0,a;s>o;)S3e.f(r,a=i[o++],n[a]);return r};var A3e=ds,PG=A3e("document","documentElement"),O3e=Uc,C3e=nx,dM=O3e("keys"),cx=function(e){return dM[e]||(dM[e]=C3e(e))},P3e=oo,N3e=ux,pM=d4,R3e=Ym,D3e=PG,B3e=l4,M3e=cx,vM=">",gM="<",wA="prototype",$A="script",NG=M3e("IE_PROTO"),wS=function(){},RG=function(e){return gM+$A+vM+e+gM+"/"+$A+vM},yM=function(e){e.write(RG("")),e.close();var r=e.parentWindow.Object;return e=null,r},L3e=function(){var e=B3e("iframe"),r="java"+$A+":",t;return e.style.display="none",D3e.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(RG("document.F=Object")),t.close(),t.F},c1,pw=function(){try{c1=new ActiveXObject("htmlfile")}catch{}pw=typeof document<"u"?document.domain&&c1?yM(c1):L3e():yM(c1);for(var e=pM.length;e--;)delete pw[wA][pM[e]];return pw()};R3e[NG]=!0;var Gh=Object.create||function(r,t){var n;return r!==null?(wS[wA]=P3e(r),n=new wS,wS[wA]=null,n[NG]=r):n=pw(),t===void 0?n:N3e.f(n,t)},Xm={},F3e=CG,j3e=d4,z3e=j3e.concat("length","prototype");Xm.f=Object.getOwnPropertyNames||function(r){return F3e(r,z3e)};var p4={},mM=Gm,H3e=ao,U3e=Dv,W3e=Array,q3e=Math.max,DG=function(e,r,t){for(var n=H3e(e),i=mM(r,n),s=mM(t===void 0?n:t,n),o=W3e(q3e(s-i,0)),a=0;i<s;i++,a++)U3e(o,a,e[i]);return o.length=a,o},K3e=Tu,V3e=Ra,BG=Xm.f,G3e=DG,MG=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Y3e=function(e){try{return BG(e)}catch{return G3e(MG)}};p4.f=function(r){return MG&&K3e(r)=="Window"?Y3e(r):BG(V3e(r))};var Jm={};Jm.f=Object.getOwnPropertySymbols;var Z3e=Iu,Bv=function(e,r,t,n){return n&&n.enumerable?e[r]=t:Z3e(e,r,t),e},X3e=so,v4=function(e,r,t){return X3e.f(e,r,t)},Qm={},J3e=ln;Qm.f=J3e;var bM=Kr,Q3e=Kn,ePe=Qm,tPe=so.f,Sn=function(e){var r=bM.Symbol||(bM.Symbol={});Q3e(r,e)||tPe(r,e,{value:ePe.f(e)})},rPe=yi,nPe=ds,iPe=ln,sPe=Bv,LG=function(){var e=nPe("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=iPe("toPrimitive");r&&!r[n]&&sPe(r,n,function(i){return rPe(t,this)},{arity:1})},oPe=c4,aPe=Au,lPe=oPe?{}.toString:function(){return"[object "+aPe(this)+"]"},uPe=c4,cPe=so.f,fPe=Iu,hPe=Kn,dPe=lPe,pPe=ln,wM=pPe("toStringTag"),Yh=function(e,r,t,n){if(e){var i=t?e:e.prototype;hPe(i,wM)||cPe(i,wM,{configurable:!0,value:r}),n&&!uPe&&fPe(i,"toString",dPe)}},vPe=xn,gPe=En,$M=vPe.WeakMap,yPe=gPe($M)&&/native code/.test(String($M)),mPe=yPe,FG=xn,bPe=mi,wPe=Iu,$S=Kn,_S=a4,$Pe=cx,_Pe=Ym,_M="Object already initialized",_A=FG.TypeError,xPe=FG.WeakMap,y$,em,m$,EPe=function(e){return m$(e)?em(e):y$(e,{})},SPe=function(e){return function(r){var t;if(!bPe(r)||(t=em(r)).type!==e)throw _A("Incompatible receiver, "+e+" required");return t}};if(mPe||_S.state){var el=_S.state||(_S.state=new xPe);el.get=el.get,el.has=el.has,el.set=el.set,y$=function(e,r){if(el.has(e))throw _A(_M);return r.facade=e,el.set(e,r),r},em=function(e){return el.get(e)||{}},m$=function(e){return el.has(e)}}else{var zd=$Pe("state");_Pe[zd]=!0,y$=function(e,r){if($S(e,zd))throw _A(_M);return r.facade=e,wPe(e,zd,r),r},em=function(e){return $S(e,zd)?e[zd]:{}},m$=function(e){return $S(e,zd)}}var Mv={set:y$,get:em,has:m$,enforce:EPe,getterFor:SPe},kPe=ef,TPe=Br,IPe=rx,APe=Bs,OPe=ao,CPe=lx,xM=TPe([].push),uc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,f,c){for(var d=APe(l),y=IPe(d),w=kPe(u,f),b=OPe(y),T=0,_=c||CPe,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in y)&&(x=y[T],I=w(x,T,d),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:xM(A,x)}else switch(e){case 4:return!1;case 7:xM(A,x)}return s?-1:n||i?i:A}},Lv={forEach:uc(0),map:uc(1),filter:uc(2),some:uc(3),every:uc(4),find:uc(5),findIndex:uc(6),filterReject:uc(7)},fx=Nt,g4=xn,y4=yi,PPe=Br,ev=ni,tv=Nv,NPe=kr,fi=Kn,RPe=an,xA=oo,hx=Ra,m4=ix,DPe=_l,EA=Vh,tm=Gh,jG=Zm,BPe=Xm,zG=p4,MPe=Jm,HG=Kh,UG=so,LPe=ux,WG=Hm,EM=Bv,FPe=v4,b4=Uc,jPe=cx,qG=Ym,SM=nx,zPe=ln,HPe=Qm,UPe=Sn,WPe=LG,qPe=Yh,KG=Mv,dx=Lv.forEach,Ts=jPe("hidden"),px="Symbol",rm="prototype",KPe=KG.set,kM=KG.getterFor(px),_a=Object[rm],vh=g4.Symbol,ey=vh&&vh[rm],VPe=g4.TypeError,xS=g4.QObject,VG=HG.f,Wf=UG.f,GG=zG.f,GPe=WG.f,YG=PPe([].push),bu=b4("symbols"),eb=b4("op-symbols"),YPe=b4("wks"),SA=!xS||!xS[rm]||!xS[rm].findChild,kA=ev&&NPe(function(){return tm(Wf({},"a",{get:function(){return Wf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=VG(_a,r);n&&delete _a[r],Wf(e,r,t),n&&e!==_a&&Wf(_a,r,n)}:Wf,ES=function(e,r){var t=bu[e]=tm(ey);return KPe(t,{type:px,tag:e,description:r}),ev||(t.description=r),t},vx=function(r,t,n){r===_a&&vx(eb,t,n),xA(r);var i=m4(t);return xA(n),fi(bu,i)?(n.enumerable?(fi(r,Ts)&&r[Ts][i]&&(r[Ts][i]=!1),n=tm(n,{enumerable:EA(0,!1)})):(fi(r,Ts)||Wf(r,Ts,EA(1,{})),r[Ts][i]=!0),kA(r,i,n)):Wf(r,i,n)},w4=function(r,t){xA(r);var n=hx(t),i=jG(n).concat(QG(n));return dx(i,function(s){(!ev||y4(ZG,n,s))&&vx(r,s,n[s])}),r},ZPe=function(r,t){return t===void 0?tm(r):w4(tm(r),t)},ZG=function(r){var t=m4(r),n=y4(GPe,this,t);return this===_a&&fi(bu,t)&&!fi(eb,t)?!1:n||!fi(this,t)||!fi(bu,t)||fi(this,Ts)&&this[Ts][t]?n:!0},XG=function(r,t){var n=hx(r),i=m4(t);if(!(n===_a&&fi(bu,i)&&!fi(eb,i))){var s=VG(n,i);return s&&fi(bu,i)&&!(fi(n,Ts)&&n[Ts][i])&&(s.enumerable=!0),s}},JG=function(r){var t=GG(hx(r)),n=[];return dx(t,function(i){!fi(bu,i)&&!fi(qG,i)&&YG(n,i)}),n},QG=function(e){var r=e===_a,t=GG(r?eb:hx(e)),n=[];return dx(t,function(i){fi(bu,i)&&(!r||fi(_a,i))&&YG(n,bu[i])}),n};tv||(vh=function(){if(RPe(ey,this))throw VPe("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:DPe(arguments[0]),t=SM(r),n=function(i){this===_a&&y4(n,eb,i),fi(this,Ts)&&fi(this[Ts],t)&&(this[Ts][t]=!1),kA(this,t,EA(1,i))};return ev&&SA&&kA(_a,t,{configurable:!0,set:n}),ES(t,r)},ey=vh[rm],EM(ey,"toString",function(){return kM(this).tag}),EM(vh,"withoutSetter",function(e){return ES(SM(e),e)}),WG.f=ZG,UG.f=vx,LPe.f=w4,HG.f=XG,BPe.f=zG.f=JG,MPe.f=QG,HPe.f=function(e){return ES(zPe(e),e)},ev&&FPe(ey,"description",{configurable:!0,get:function(){return kM(this).description}}));fx({global:!0,constructor:!0,wrap:!0,forced:!tv,sham:!tv},{Symbol:vh});dx(jG(YPe),function(e){UPe(e)});fx({target:px,stat:!0,forced:!tv},{useSetter:function(){SA=!0},useSimple:function(){SA=!1}});fx({target:"Object",stat:!0,forced:!tv,sham:!ev},{create:ZPe,defineProperty:vx,defineProperties:w4,getOwnPropertyDescriptor:XG});fx({target:"Object",stat:!0,forced:!tv},{getOwnPropertyNames:JG});WPe();qPe(vh,px);qG[Ts]=!0;var XPe=Nv,eY=XPe&&!!Symbol.for&&!!Symbol.keyFor,JPe=Nt,QPe=ds,e4e=Kn,t4e=_l,tY=Uc,r4e=eY,SS=tY("string-to-symbol-registry"),n4e=tY("symbol-to-string-registry");JPe({target:"Symbol",stat:!0,forced:!r4e},{for:function(e){var r=t4e(e);if(e4e(SS,r))return SS[r];var t=QPe("Symbol")(r);return SS[r]=t,n4e[t]=r,t}});var i4e=Nt,s4e=Kn,o4e=qm,a4e=Rv,l4e=Uc,u4e=eY,TM=l4e("symbol-to-string-registry");i4e({target:"Symbol",stat:!0,forced:!u4e},{keyFor:function(r){if(!o4e(r))throw TypeError(a4e(r)+" is not a symbol");if(s4e(TM,r))return TM[r]}});var c4e=Br,tb=c4e([].slice),f4e=Br,IM=tf,h4e=En,AM=Tu,d4e=_l,OM=f4e([].push),p4e=function(e){if(h4e(e))return e;if(IM(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?OM(t,i):(typeof i=="number"||AM(i)=="Number"||AM(i)=="String")&&OM(t,d4e(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(IM(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},v4e=Nt,rY=ds,nY=Cv,g4e=yi,rb=Br,iY=kr,CM=En,PM=qm,sY=tb,y4e=p4e,m4e=Nv,b4e=String,Pc=rY("JSON","stringify"),f1=rb(/./.exec),NM=rb("".charAt),w4e=rb("".charCodeAt),$4e=rb("".replace),_4e=rb(1 .toString),x4e=/[\uD800-\uDFFF]/g,RM=/^[\uD800-\uDBFF]$/,DM=/^[\uDC00-\uDFFF]$/,BM=!m4e||iY(function(){var e=rY("Symbol")();return Pc([e])!="[null]"||Pc({a:e})!="{}"||Pc(Object(e))!="{}"}),MM=iY(function(){return Pc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Pc("\uDEAD")!=='"\\udead"'}),E4e=function(e,r){var t=sY(arguments),n=y4e(r);if(!(!CM(n)&&(e===void 0||PM(e))))return t[1]=function(i,s){if(CM(n)&&(s=g4e(n,this,b4e(i),s)),!PM(s))return s},nY(Pc,null,t)},S4e=function(e,r,t){var n=NM(t,r-1),i=NM(t,r+1);return f1(RM,e)&&!f1(DM,i)||f1(DM,e)&&!f1(RM,n)?"\\u"+_4e(w4e(e,0),16):e};Pc&&v4e({target:"JSON",stat:!0,arity:3,forced:BM||MM},{stringify:function(r,t,n){var i=sY(arguments),s=nY(BM?E4e:Pc,null,i);return MM&&typeof s=="string"?$4e(s,x4e,S4e):s}});var k4e=Nt,T4e=Nv,I4e=kr,oY=Jm,A4e=Bs,O4e=!T4e||I4e(function(){oY.f(1)});k4e({target:"Object",stat:!0,forced:O4e},{getOwnPropertySymbols:function(r){var t=oY.f;return t?t(A4e(r)):[]}});var C4e=Sn;C4e("asyncIterator");var P4e=Sn;P4e("hasInstance");var N4e=Sn;N4e("isConcatSpreadable");var R4e=Sn;R4e("iterator");var D4e=Sn;D4e("match");var B4e=Sn;B4e("matchAll");var M4e=Sn;M4e("replace");var L4e=Sn;L4e("search");var F4e=Sn;F4e("species");var j4e=Sn;j4e("split");var z4e=Sn,H4e=LG;z4e("toPrimitive");H4e();var U4e=ds,W4e=Sn,q4e=Yh;W4e("toStringTag");q4e(U4e("Symbol"),"Symbol");var K4e=Sn;K4e("unscopables");var V4e=xn,G4e=Yh;G4e(V4e.JSON,"JSON",!0);var Y4e=Kr,Z4e=Y4e.Symbol,Fv={},TA=ni,X4e=Kn,aY=Function.prototype,J4e=TA&&Object.getOwnPropertyDescriptor,$4=X4e(aY,"name"),Q4e=$4&&(function(){}).name==="something",eNe=$4&&(!TA||TA&&J4e(aY,"name").configurable),lY={EXISTS:$4,PROPER:Q4e,CONFIGURABLE:eNe},tNe=kr,uY=!tNe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),rNe=Kn,nNe=En,iNe=Bs,sNe=cx,oNe=uY,LM=sNe("IE_PROTO"),IA=Object,aNe=IA.prototype,gx=oNe?IA.getPrototypeOf:function(e){var r=iNe(e);if(rNe(r,LM))return r[LM];var t=r.constructor;return nNe(t)&&r instanceof t?t.prototype:r instanceof IA?aNe:null},lNe=kr,uNe=En,cNe=mi,fNe=Gh,FM=gx,hNe=Bv,dNe=ln,AA=dNe("iterator"),cY=!1,su,kS,TS;[].keys&&(TS=[].keys(),"next"in TS?(kS=FM(FM(TS)),kS!==Object.prototype&&(su=kS)):cY=!0);var pNe=!cNe(su)||lNe(function(){var e={};return su[AA].call(e)!==e});pNe?su={}:su=fNe(su);uNe(su[AA])||hNe(su,AA,function(){return this});var fY={IteratorPrototype:su,BUGGY_SAFARI_ITERATORS:cY},vNe=fY.IteratorPrototype,gNe=Gh,yNe=Vh,mNe=Yh,bNe=Fv,wNe=function(){return this},$Ne=function(e,r,t,n){var i=r+" Iterator";return e.prototype=gNe(vNe,{next:yNe(+!n,t)}),mNe(e,i,!1,!0),bNe[i]=wNe,e},_Ne=Br,xNe=Ds,ENe=function(e,r,t){try{return _Ne(xNe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},SNe=En,kNe=String,TNe=TypeError,INe=function(e){if(typeof e=="object"||SNe(e))return e;throw TNe("Can't set "+kNe(e)+" as a prototype")},ANe=ENe,ONe=oo,CNe=INe,hY=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=ANe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return ONe(i),CNe(s),e?t(i,s):i.__proto__=s,i}}():void 0),PNe=Nt,NNe=yi,RNe=lY,DNe=$Ne,BNe=gx,MNe=Yh,jM=Bv,LNe=ln,zM=Fv,FNe=fY,jNe=RNe.PROPER,h1=FNe.BUGGY_SAFARI_ITERATORS,IS=LNe("iterator"),HM="keys",d1="values",UM="entries",zNe=function(){return this},_4=function(e,r,t,n,i,s,o){DNe(t,r,n);var a=function(_){if(_===i&&d)return d;if(!h1&&_ in f)return f[_];switch(_){case HM:return function(){return new t(this,_)};case d1:return function(){return new t(this,_)};case UM:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,f=e.prototype,c=f[IS]||f["@@iterator"]||i&&f[i],d=!h1&&c||a(i),y=r=="Array"&&f.entries||c,w,b,T;if(y&&(w=BNe(y.call(new e)),w!==Object.prototype&&w.next&&(MNe(w,l,!0,!0),zM[l]=zNe)),jNe&&i==d1&&c&&c.name!==d1&&(u=!0,d=function(){return NNe(c,this)}),i)if(b={values:a(d1),keys:s?d:a(HM),entries:a(UM)},o)for(T in b)(h1||u||!(T in f))&&jM(f,T,b[T]);else PNe({target:r,proto:!0,forced:h1||u},b);return o&&f[IS]!==d&&jM(f,IS,d,{name:i}),zM[r]=d,b},x4=function(e,r){return{value:e,done:r}},HNe=Ra,WM=Fv,dY=Mv;so.f;var UNe=_4,p1=x4,pY="Array Iterator",WNe=dY.set,qNe=dY.getterFor(pY);UNe(Array,"Array",function(e,r){WNe(this,{type:pY,target:HNe(e),index:0,kind:r})},function(){var e=qNe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,p1(void 0,!0)):t=="keys"?p1(n,!1):t=="values"?p1(r[n],!1):p1([n,r[n]],!1)},"values");WM.Arguments=WM.Array;var KNe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},VNe=KNe,GNe=xn,YNe=Au,ZNe=Iu,qM=Fv,XNe=ln,KM=XNe("toStringTag");for(var AS in VNe){var VM=GNe[AS],OS=VM&&VM.prototype;OS&&YNe(OS)!==KM&&ZNe(OS,KM,AS),qM[AS]=qM.Array}var JNe=Z4e,vY=JNe,QNe=Sn;QNe("dispose");var eRe=vY,tRe=eRe,rRe=Sn;rRe("asyncDispose");var nRe=Nt,iRe=ds,sRe=Br,gY=iRe("Symbol"),oRe=gY.keyFor,aRe=sRe(gY.prototype.valueOf);nRe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return oRe(aRe(r))!==void 0}catch{return!1}}});var lRe=Nt,uRe=Uc,yY=ds,cRe=Br,fRe=qm,hRe=ln,b$=yY("Symbol"),GM=b$.isWellKnown,mY=yY("Object","getOwnPropertyNames"),dRe=cRe(b$.prototype.valueOf),YM=uRe("wks");for(var CS=0,ZM=mY(b$),pRe=ZM.length;CS<pRe;CS++)try{var XM=ZM[CS];fRe(b$[XM])&&hRe(XM)}catch{}lRe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(GM&&GM(r))return!0;try{for(var t=dRe(r),n=0,i=mY(YM),s=i.length;n<s;n++)if(YM[i[n]]==t)return!0}catch{}return!1}});var vRe=Sn;vRe("matcher");var gRe=Sn;gRe("metadataKey");var yRe=Sn;yRe("observable");var mRe=Sn;mRe("metadata");var bRe=Sn;bRe("patternMatch");var wRe=Sn;wRe("replaceAll");var $Re=tRe,_Re=$Re;(function(e){e.exports=_Re})(s5e);(function(e){e.exports=mA})(i5e);var ap=Vt(Qy),w$={},xRe={get exports(){return w$},set exports(e){w$=e}},OA={},ERe={get exports(){return OA},set exports(e){OA=e}},E4=Br,SRe=ox,kRe=_l,TRe=Wm,IRe=E4("".charAt),JM=E4("".charCodeAt),ARe=E4("".slice),QM=function(e){return function(r,t){var n=kRe(TRe(r)),i=SRe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=JM(n,i),o<55296||o>56319||i+1===s||(a=JM(n,i+1))<56320||a>57343?e?IRe(n,i):o:e?ARe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},ORe={codeAt:QM(!1),charAt:QM(!0)},CRe=ORe.charAt,PRe=_l,bY=Mv,NRe=_4,e7=x4,wY="String Iterator",RRe=bY.set,DRe=bY.getterFor(wY);NRe(String,"String",function(e){RRe(this,{type:wY,string:PRe(e),index:0})},function(){var r=DRe(this),t=r.string,n=r.index,i;return n>=t.length?e7(void 0,!0):(i=CRe(t,n),r.index+=i.length,e7(i,!1))});var BRe=Qm,MRe=BRe.f("iterator"),LRe=MRe,$Y=LRe,FRe=$Y,jRe=FRe,zRe=jRe,HRe=zRe;(function(e){e.exports=HRe})(ERe);(function(e){e.exports=OA})(xRe);var URe=Vt(w$);function Ai(e){"@babel/helpers - typeof";return Ai=typeof ap=="function"&&typeof URe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof ap=="function"&&r.constructor===ap&&r!==ap.prototype?"symbol":typeof r},Ai(e)}var CA={},WRe={get exports(){return CA},set exports(e){CA=e}},PA={},qRe={get exports(){return PA},set exports(e){PA=e}},KRe=Qm,VRe=KRe.f("toPrimitive"),GRe=VRe,YRe=GRe,ZRe=YRe,XRe=ZRe,JRe=XRe,QRe=JRe;(function(e){e.exports=QRe})(qRe);(function(e){e.exports=PA})(WRe);var eDe=Vt(CA);function tDe(e,r){if(Ai(e)!=="object"||e===null)return e;var t=e[eDe];if(t!==void 0){var n=t.call(e,r||"default");if(Ai(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function _Y(e){var r=tDe(e,"string");return Ai(r)==="symbol"?r:String(r)}function t7(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),sx(e,_Y(n.key),n)}}function yx(e,r,t){return r&&t7(e.prototype,r),t&&t7(e,t),sx(e,"prototype",{writable:!1}),e}function An(e,r,t){return r=_Y(r),r in e?sx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var NA={},rDe={get exports(){return NA},set exports(e){NA=e}},xY=Br,nDe=Ds,iDe=mi,sDe=Kn,r7=tb,oDe=zm,EY=Function,aDe=xY([].concat),lDe=xY([].join),PS={},uDe=function(e,r,t){if(!sDe(PS,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";PS[r]=EY("C,a","return new C("+lDe(n,",")+")")}return PS[r](e,t)},SY=oDe?EY.bind:function(r){var t=nDe(this),n=t.prototype,i=r7(arguments,1),s=function(){var a=aDe(i,r7(arguments));return this instanceof s?uDe(t,a.length,a):t.apply(r,a)};return iDe(n)&&(s.prototype=n),s},cDe=Nt,n7=SY;cDe({target:"Function",proto:!0,forced:Function.bind!==n7},{bind:n7});var fDe=Kr,Vn=function(e){return fDe[e+"Prototype"]},hDe=Vn,dDe=hDe("Function").bind,pDe=an,vDe=dDe,NS=Function.prototype,gDe=function(e){var r=e.bind;return e===NS||pDe(NS,e)&&r===NS.bind?vDe:r},yDe=gDe,kY=yDe;(function(e){e.exports=kY})(rDe);var TY=Vt(NA),RA={},mDe={get exports(){return RA},set exports(e){RA=e}},bDe=Ds,wDe=Bs,$De=rx,_De=ao,xDe=TypeError,i7=function(e){return function(r,t,n,i){bDe(t);var s=wDe(r),o=$De(s),a=_De(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw xDe("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},EDe={left:i7(!1),right:i7(!0)},SDe=kr,nb=function(e,r){var t=[][e];return!!t&&SDe(function(){t.call(null,r||function(){return 1},1)})},kDe=Tu,ib=typeof process<"u"&&kDe(process)=="process",TDe=Nt,IDe=EDe.left,ADe=nb,s7=Pv,ODe=ib,CDe=!ODe&&s7>79&&s7<83,PDe=CDe||!ADe("reduce");TDe({target:"Array",proto:!0,forced:PDe},{reduce:function(r){var t=arguments.length;return IDe(this,r,t,t>1?arguments[1]:void 0)}});var NDe=Vn,RDe=NDe("Array").reduce,DDe=an,BDe=RDe,RS=Array.prototype,MDe=function(e){var r=e.reduce;return e===RS||DDe(RS,e)&&r===RS.reduce?BDe:r},LDe=MDe,FDe=LDe;(function(e){e.exports=FDe})(mDe);var jDe=Vt(RA),DA={},zDe={get exports(){return DA},set exports(e){DA=e}},HDe=Nt,UDe=Lv.filter,WDe=Vm,qDe=WDe("filter");HDe({target:"Array",proto:!0,forced:!qDe},{filter:function(r){return UDe(this,r,arguments.length>1?arguments[1]:void 0)}});var KDe=Vn,VDe=KDe("Array").filter,GDe=an,YDe=VDe,DS=Array.prototype,ZDe=function(e){var r=e.filter;return e===DS||GDe(DS,e)&&r===DS.filter?YDe:r},XDe=ZDe,JDe=XDe;(function(e){e.exports=JDe})(zDe);var lp=Vt(DA),BA={},QDe={get exports(){return BA},set exports(e){BA=e}},eBe=Nt,tBe=Lv.map,rBe=Vm,nBe=rBe("map");eBe({target:"Array",proto:!0,forced:!nBe},{map:function(r){return tBe(this,r,arguments.length>1?arguments[1]:void 0)}});var iBe=Vn,sBe=iBe("Array").map,oBe=an,aBe=sBe,BS=Array.prototype,lBe=function(e){var r=e.map;return e===BS||oBe(BS,e)&&r===BS.map?aBe:r},uBe=lBe,cBe=uBe;(function(e){e.exports=cBe})(QDe);var ga=Vt(BA),o7={},fBe={get exports(){return o7},set exports(e){o7=e}},hBe=tf,dBe=ao,pBe=u4,vBe=ef,IY=function(e,r,t,n,i,s,o,a){for(var l=i,u=0,f=o?vBe(o,a):!1,c,d;u<n;)u in t&&(c=f?f(t[u],u,r):t[u],s>0&&hBe(c)?(d=dBe(c),l=IY(e,r,c,d,l,s-1)-1):(pBe(l+1),e[l]=c),l++),u++;return l},gBe=IY,yBe=Nt,mBe=gBe,bBe=Ds,wBe=Bs,$Be=ao,_Be=lx;yBe({target:"Array",proto:!0},{flatMap:function(r){var t=wBe(this),n=$Be(t),i;return bBe(r),i=_Be(t,0),i.length=mBe(i,t,t,n,0,1,r,arguments.length>1?arguments[1]:void 0),i}});var xBe=Vn,EBe=xBe("Array").flatMap,SBe=an,kBe=EBe,MS=Array.prototype,TBe=function(e){var r=e.flatMap;return e===MS||SBe(MS,e)&&r===MS.flatMap?kBe:r},IBe=TBe,ABe=IBe;(function(e){e.exports=ABe})(fBe);var MA={},OBe={get exports(){return MA},set exports(e){MA=e}},CBe=yi,a7=oo,PBe=o4,AY=function(e,r,t){var n,i;a7(e);try{if(n=PBe(e,"return"),!n){if(r==="throw")throw t;return t}n=CBe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return a7(n),t},NBe=oo,RBe=AY,DBe=function(e,r,t,n){try{return n?r(NBe(t)[0],t[1]):r(t)}catch(i){RBe(e,"throw",i)}},BBe=ln,MBe=Fv,LBe=BBe("iterator"),FBe=Array.prototype,OY=function(e){return e!==void 0&&(MBe.Array===e||FBe[LBe]===e)},jBe=Au,l7=o4,zBe=Um,HBe=Fv,UBe=ln,WBe=UBe("iterator"),mx=function(e){if(!zBe(e))return l7(e,WBe)||l7(e,"@@iterator")||HBe[jBe(e)]},qBe=yi,KBe=Ds,VBe=oo,GBe=Rv,YBe=mx,ZBe=TypeError,S4=function(e,r){var t=arguments.length<2?YBe(e):r;if(KBe(t))return VBe(qBe(t,e));throw ZBe(GBe(e)+" is not iterable")},XBe=ef,JBe=yi,QBe=Bs,e6e=DBe,t6e=OY,r6e=ax,n6e=ao,u7=Dv,i6e=S4,s6e=mx,c7=Array,o6e=function(r){var t=QBe(r),n=r6e(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=XBe(s,i>2?arguments[2]:void 0));var a=s6e(t),l=0,u,f,c,d,y,w;if(a&&!(this===c7&&t6e(a)))for(d=i6e(t,a),y=d.next,f=n?new this:[];!(c=JBe(y,d)).done;l++)w=o?e6e(d,s,[c.value,l],!0):c.value,u7(f,l,w);else for(u=n6e(t),f=n?new this(u):c7(u);u>l;l++)w=o?s(t[l],l):t[l],u7(f,l,w);return f.length=l,f},a6e=ln,CY=a6e("iterator"),PY=!1;try{var l6e=0,f7={next:function(){return{done:!!l6e++}},return:function(){PY=!0}};f7[CY]=function(){return this},Array.from(f7,function(){throw 2})}catch{}var NY=function(e,r){if(!r&&!PY)return!1;var t=!1;try{var n={};n[CY]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},u6e=Nt,c6e=o6e,f6e=NY,h6e=!f6e(function(e){Array.from(e)});u6e({target:"Array",stat:!0,forced:h6e},{from:c6e});var d6e=Kr,p6e=d6e.Array.from,v6e=p6e,RY=v6e;(function(e){e.exports=RY})(OBe);var k4=Vt(MA),LA={},g6e={get exports(){return LA},set exports(e){LA=e}},FA={},y6e={get exports(){return FA},set exports(e){FA=e}},m6e=mx,b6e=m6e,w6e=b6e,$6e=w6e,_6e=$6e,x6e=_6e,E6e=x6e,S6e=E6e;(function(e){e.exports=S6e})(y6e);(function(e){e.exports=FA})(g6e);var sb=Vt(LA),jA={},k6e={get exports(){return jA},set exports(e){jA=e}},T6e=Kr,I6e=T6e.Object.getOwnPropertySymbols,A6e=I6e,O6e=A6e;(function(e){e.exports=O6e})(k6e);var h7=Vt(jA),zA={},C6e={get exports(){return zA},set exports(e){zA=e}},HA={},P6e={get exports(){return HA},set exports(e){HA=e}},N6e=Nt,R6e=kr,D6e=Ra,DY=Kh.f,BY=ni,B6e=!BY||R6e(function(){DY(1)});N6e({target:"Object",stat:!0,forced:B6e,sham:!BY},{getOwnPropertyDescriptor:function(r,t){return DY(D6e(r),t)}});var M6e=Kr,MY=M6e.Object,L6e=P6e.exports=function(r,t){return MY.getOwnPropertyDescriptor(r,t)};MY.getOwnPropertyDescriptor.sham&&(L6e.sham=!0);var F6e=HA,j6e=F6e;(function(e){e.exports=j6e})(C6e);var LY=Vt(zA),UA={},z6e={get exports(){return UA},set exports(e){UA=e}},H6e=ds,U6e=Br,W6e=Xm,q6e=Jm,K6e=oo,V6e=U6e([].concat),T4=H6e("Reflect","ownKeys")||function(r){var t=W6e.f(K6e(r)),n=q6e.f;return n?V6e(t,n(r)):t},G6e=Nt,Y6e=ni,Z6e=T4,X6e=Ra,J6e=Kh,Q6e=Dv;G6e({target:"Object",stat:!0,sham:!Y6e},{getOwnPropertyDescriptors:function(r){for(var t=X6e(r),n=J6e.f,i=Z6e(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&Q6e(s,a,l);return s}});var e8e=Kr,t8e=e8e.Object.getOwnPropertyDescriptors,r8e=t8e,n8e=r8e;(function(e){e.exports=n8e})(z6e);var d7=Vt(UA),WA={},i8e={get exports(){return WA},set exports(e){WA=e}},qA={},s8e={get exports(){return qA},set exports(e){qA=e}},o8e=Nt,a8e=ni,p7=ux.f;o8e({target:"Object",stat:!0,forced:Object.defineProperties!==p7,sham:!a8e},{defineProperties:p7});var l8e=Kr,FY=l8e.Object,u8e=s8e.exports=function(r,t){return FY.defineProperties(r,t)};FY.defineProperties.sham&&(u8e.sham=!0);var c8e=qA,f8e=c8e;(function(e){e.exports=f8e})(i8e);var h8e=Vt(WA),KA={},d8e={get exports(){return KA},set exports(e){KA=e}};(function(e){e.exports=xG})(d8e);var p8e=Vt(KA),VA={},v8e={get exports(){return VA},set exports(e){VA=e}},GA={},g8e={get exports(){return GA},set exports(e){GA=e}},y8e=Nt,m8e=tf;y8e({target:"Array",stat:!0},{isArray:m8e});var b8e=Kr,w8e=b8e.Array.isArray,$8e=w8e,jY=$8e,_8e=jY,x8e=_8e,E8e=x8e,S8e=E8e;(function(e){e.exports=S8e})(g8e);(function(e){e.exports=GA})(v8e);var zY=Vt(VA);function k8e(e){if(zY(e))return e}function T8e(e,r){var t=e==null?null:typeof ap<"u"&&sb(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var $$={},I8e={get exports(){return $$},set exports(e){$$=e}},YA={},A8e={get exports(){return YA},set exports(e){YA=e}},O8e=Nt,v7=tf,C8e=ax,P8e=mi,g7=Gm,N8e=ao,R8e=Ra,D8e=Dv,B8e=ln,M8e=Vm,L8e=tb,F8e=M8e("slice"),j8e=B8e("species"),LS=Array,z8e=Math.max;O8e({target:"Array",proto:!0,forced:!F8e},{slice:function(r,t){var n=R8e(this),i=N8e(n),s=g7(r,i),o=g7(t===void 0?i:t,i),a,l,u;if(v7(n)&&(a=n.constructor,C8e(a)&&(a===LS||v7(a.prototype))?a=void 0:P8e(a)&&(a=a[j8e],a===null&&(a=void 0)),a===LS||a===void 0))return L8e(n,s,o);for(l=new(a===void 0?LS:a)(z8e(o-s,0)),u=0;s<o;s++,u++)s in n&&D8e(l,u,n[s]);return l.length=u,l}});var H8e=Vn,U8e=H8e("Array").slice,W8e=an,q8e=U8e,FS=Array.prototype,K8e=function(e){var r=e.slice;return e===FS||W8e(FS,e)&&r===FS.slice?q8e:r},V8e=K8e,HY=V8e,G8e=HY,Y8e=G8e,Z8e=Y8e,X8e=Z8e;(function(e){e.exports=X8e})(A8e);(function(e){e.exports=YA})(I8e);var J8e=Vt($$),ZA={},Q8e={get exports(){return ZA},set exports(e){ZA=e}},XA={},eMe={get exports(){return XA},set exports(e){XA=e}},tMe=RY,rMe=tMe,nMe=rMe,iMe=nMe;(function(e){e.exports=iMe})(eMe);(function(e){e.exports=XA})(Q8e);var UY=Vt(ZA);function JA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function WY(e,r){var t;if(e){if(typeof e=="string")return JA(e,r);var n=J8e(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return UY(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JA(e,r)}}function sMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(e,r){return k8e(e)||T8e(e,r)||WY(e,r)||sMe()}function oMe(e){if(zY(e))return JA(e)}function aMe(e){if(typeof ap<"u"&&sb(e)!=null||e["@@iterator"]!=null)return UY(e)}function lMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(e){return oMe(e)||aMe(e)||WY(e)||lMe()}var QA={},uMe={get exports(){return QA},set exports(e){QA=e}};(function(e){e.exports=vY})(uMe);var bx=Vt(QA),eO={},cMe={get exports(){return eO},set exports(e){eO=e}},fMe=Vn,hMe=fMe("Array").concat,dMe=an,pMe=hMe,jS=Array.prototype,vMe=function(e){var r=e.concat;return e===jS||dMe(jS,e)&&r===jS.concat?pMe:r},gMe=vMe,yMe=gMe;(function(e){e.exports=yMe})(cMe);var wx=Vt(eO),tO={},mMe={get exports(){return tO},set exports(e){tO=e}};(function(e){e.exports=HY})(mMe);var $x=Vt(tO),rO={},bMe={get exports(){return rO},set exports(e){rO=e}},wMe=Nt,$Me=T4;wMe({target:"Reflect",stat:!0},{ownKeys:$Me});var _Me=Kr,xMe=_Me.Reflect.ownKeys,EMe=xMe,SMe=EMe;(function(e){e.exports=SMe})(bMe);var kMe=Vt(rO),nO={},TMe={get exports(){return nO},set exports(e){nO=e}};(function(e){e.exports=jY})(TMe);var Vs=Vt(nO),iO={},IMe={get exports(){return iO},set exports(e){iO=e}},AMe=Nt,OMe=Bs,qY=Zm,CMe=kr,PMe=CMe(function(){qY(1)});AMe({target:"Object",stat:!0,forced:PMe},{keys:function(r){return qY(OMe(r))}});var NMe=Kr,RMe=NMe.Object.keys,DMe=RMe,BMe=DMe;(function(e){e.exports=BMe})(IMe);var I4=Vt(iO),y7={},MMe={get exports(){return y7},set exports(e){y7=e}},LMe=Nt,FMe=Br,KY=Date,jMe=FMe(KY.prototype.getTime);LMe({target:"Date",stat:!0},{now:function(){return jMe(new KY)}});var zMe=Kr,HMe=zMe.Date.now,UMe=HMe,WMe=UMe;(function(e){e.exports=WMe})(MMe);var sO={},qMe={get exports(){return sO},set exports(e){sO=e}},KMe=Lv.forEach,VMe=nb,GMe=VMe("forEach"),YMe=GMe?[].forEach:function(r){return KMe(this,r,arguments.length>1?arguments[1]:void 0)},ZMe=Nt,m7=YMe;ZMe({target:"Array",proto:!0,forced:[].forEach!=m7},{forEach:m7});var XMe=Vn,JMe=XMe("Array").forEach,QMe=JMe,e7e=QMe,t7e=Au,r7e=Kn,n7e=an,i7e=e7e,zS=Array.prototype,s7e={DOMTokenList:!0,NodeList:!0},VY=function(e){var r=e.forEach;return e===zS||n7e(zS,e)&&r===zS.forEach||r7e(s7e,t7e(e))?i7e:r};(function(e){e.exports=VY})(qMe);var Ph=Vt(sO),oO={},o7e={get exports(){return oO},set exports(e){oO=e}},a7e=Nt,l7e=Br,u7e=tf,c7e=l7e([].reverse),b7=[1,2];a7e({target:"Array",proto:!0,forced:String(b7)===String(b7.reverse())},{reverse:function(){return u7e(this)&&(this.length=this.length),c7e(this)}});var f7e=Vn,h7e=f7e("Array").reverse,d7e=an,p7e=h7e,HS=Array.prototype,v7e=function(e){var r=e.reverse;return e===HS||d7e(HS,e)&&r===HS.reverse?p7e:r},g7e=v7e,GY=g7e;(function(e){e.exports=GY})(o7e);var y7e=Vt(oO),aO={},m7e={get exports(){return aO},set exports(e){aO=e}},b7e=ni,w7e=tf,$7e=TypeError,_7e=Object.getOwnPropertyDescriptor,x7e=b7e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),E7e=x7e?function(e,r){if(w7e(e)&&!_7e(e,"length").writable)throw $7e("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},w7=Rv,S7e=TypeError,YY=function(e,r){if(!delete e[r])throw S7e("Cannot delete property "+w7(r)+" of "+w7(e))},k7e=Nt,T7e=Bs,I7e=Gm,A7e=ox,O7e=ao,C7e=E7e,P7e=u4,N7e=lx,R7e=Dv,US=YY,D7e=Vm,B7e=D7e("splice"),M7e=Math.max,L7e=Math.min;k7e({target:"Array",proto:!0,forced:!B7e},{splice:function(r,t){var n=T7e(this),i=O7e(n),s=I7e(r,i),o=arguments.length,a,l,u,f,c,d;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=L7e(M7e(A7e(t),0),i-s)),P7e(i+a-l),u=N7e(n,l),f=0;f<l;f++)c=s+f,c in n&&R7e(u,f,n[c]);if(u.length=l,a<l){for(f=s;f<i-l;f++)c=f+l,d=f+a,c in n?n[d]=n[c]:US(n,d);for(f=i;f>i-l+a;f--)US(n,f-1)}else if(a>l)for(f=i-l;f>s;f--)c=f+l-1,d=f+a-1,c in n?n[d]=n[c]:US(n,d);for(f=0;f<a;f++)n[f+s]=arguments[f+2];return C7e(n,i-l+a),u}});var F7e=Vn,j7e=F7e("Array").splice,z7e=an,H7e=j7e,WS=Array.prototype,U7e=function(e){var r=e.splice;return e===WS||z7e(WS,e)&&r===WS.splice?H7e:r},W7e=U7e,q7e=W7e;(function(e){e.exports=q7e})(m7e);var ZY=Vt(aO),lO={},K7e={get exports(){return lO},set exports(e){lO=e}},$7=ni,V7e=Br,G7e=yi,Y7e=kr,qS=Zm,Z7e=Jm,X7e=Hm,J7e=Bs,Q7e=rx,Hd=Object.assign,_7=Object.defineProperty,eLe=V7e([].concat),tLe=!Hd||Y7e(function(){if($7&&Hd({b:1},Hd(_7({},"a",{enumerable:!0,get:function(){_7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Hd({},e)[t]!=7||qS(Hd({},r)).join("")!=n})?function(r,t){for(var n=J7e(r),i=arguments.length,s=1,o=Z7e.f,a=X7e.f;i>s;)for(var l=Q7e(arguments[s++]),u=o?eLe(qS(l),o(l)):qS(l),f=u.length,c=0,d;f>c;)d=u[c++],(!$7||G7e(a,l,d))&&(n[d]=l[d]);return n}:Hd,rLe=Nt,x7=tLe;rLe({target:"Object",stat:!0,arity:2,forced:Object.assign!==x7},{assign:x7});var nLe=Kr,iLe=nLe.Object.assign,sLe=iLe,oLe=sLe;(function(e){e.exports=oLe})(K7e);var aLe=Vt(lO),E7={},lLe={get exports(){return E7},set exports(e){E7=e}},uLe=Nt,cLe=h4.includes,fLe=kr,hLe=fLe(function(){return!Array(1).includes()});uLe({target:"Array",proto:!0,forced:hLe},{includes:function(r){return cLe(this,r,arguments.length>1?arguments[1]:void 0)}});var dLe=Vn,pLe=dLe("Array").includes,vLe=mi,gLe=Tu,yLe=ln,mLe=yLe("match"),bLe=function(e){var r;return vLe(e)&&((r=e[mLe])!==void 0?!!r:gLe(e)=="RegExp")},wLe=bLe,$Le=TypeError,_Le=function(e){if(wLe(e))throw $Le("The method doesn't accept regular expressions");return e},xLe=ln,ELe=xLe("match"),SLe=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[ELe]=!1,"/./"[e](r)}catch{}}return!1},kLe=Nt,TLe=Br,ILe=_Le,ALe=Wm,S7=_l,OLe=SLe,CLe=TLe("".indexOf);kLe({target:"String",proto:!0,forced:!OLe("includes")},{includes:function(r){return!!~CLe(S7(ALe(this)),S7(ILe(r)),arguments.length>1?arguments[1]:void 0)}});var PLe=Vn,NLe=PLe("String").includes,k7=an,RLe=pLe,DLe=NLe,KS=Array.prototype,VS=String.prototype,BLe=function(e){var r=e.includes;return e===KS||k7(KS,e)&&r===KS.includes?RLe:typeof e=="string"||e===VS||k7(VS,e)&&r===VS.includes?DLe:r},MLe=BLe,LLe=MLe;(function(e){e.exports=LLe})(lLe);var T7={},FLe={get exports(){return T7},set exports(e){T7=e}},jLe=Nt,zLe=kr,HLe=Bs,XY=gx,ULe=uY,WLe=zLe(function(){XY(1)});jLe({target:"Object",stat:!0,forced:WLe,sham:!ULe},{getPrototypeOf:function(r){return XY(HLe(r))}});var qLe=Kr,KLe=qLe.Object.getPrototypeOf,VLe=KLe,JY=VLe;(function(e){e.exports=JY})(FLe);var I7={},GLe={get exports(){return I7},set exports(e){I7=e}},YLe=ni,QY=Br,ZLe=Zm,XLe=Ra,JLe=Hm.f,QLe=QY(JLe),eFe=QY([].push),A7=function(e){return function(r){for(var t=XLe(r),n=ZLe(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!YLe||QLe(t,a))&&eFe(o,e?[a,t[a]]:t[a]);return o}},tFe={entries:A7(!0),values:A7(!1)},rFe=Nt,nFe=tFe.values;rFe({target:"Object",stat:!0},{values:function(r){return nFe(r)}});var iFe=Kr,sFe=iFe.Object.values,oFe=sFe,aFe=oFe;(function(e){e.exports=aFe})(GLe);var O7={},lFe={get exports(){return O7},set exports(e){O7=e}},A4=`	
\v\f\r \u2028\u2029\uFEFF`,uFe=Br,cFe=Wm,fFe=_l,uO=A4,C7=uFe("".replace),hFe=RegExp("^["+uO+"]+"),dFe=RegExp("(^|[^"+uO+"])["+uO+"]+$"),GS=function(e){return function(r){var t=fFe(cFe(r));return e&1&&(t=C7(t,hFe,"")),e&2&&(t=C7(t,dFe,"$1")),t}},eZ={start:GS(1),end:GS(2),trim:GS(3)},tZ=xn,pFe=kr,vFe=Br,gFe=_l,yFe=eZ.trim,P7=A4,gy=tZ.parseInt,N7=tZ.Symbol,R7=N7&&N7.iterator,rZ=/^[+-]?0x/i,mFe=vFe(rZ.exec),bFe=gy(P7+"08")!==8||gy(P7+"0x16")!==22||R7&&!pFe(function(){gy(Object(R7))}),wFe=bFe?function(r,t){var n=yFe(gFe(r));return gy(n,t>>>0||(mFe(rZ,n)?16:10))}:gy,$Fe=Nt,D7=wFe;$Fe({global:!0,forced:parseInt!=D7},{parseInt:D7});var _Fe=Kr,xFe=_Fe.parseInt,EFe=xFe,SFe=EFe;(function(e){e.exports=SFe})(lFe);var B7={},kFe={get exports(){return B7},set exports(e){B7=e}},TFe=Nt,IFe=s4,AFe=h4.indexOf,OFe=nb,cO=IFe([].indexOf),nZ=!!cO&&1/cO([1],1,-0)<0,CFe=nZ||!OFe("indexOf");TFe({target:"Array",proto:!0,forced:CFe},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return nZ?cO(this,r,t)||0:AFe(this,r,t)}});var PFe=Vn,NFe=PFe("Array").indexOf,RFe=an,DFe=NFe,YS=Array.prototype,BFe=function(e){var r=e.indexOf;return e===YS||RFe(YS,e)&&r===YS.indexOf?DFe:r},MFe=BFe,LFe=MFe;(function(e){e.exports=LFe})(kFe);var M7={},FFe={get exports(){return M7},set exports(e){M7=e}},jFe=lY.PROPER,zFe=kr,L7=A4,F7="",HFe=function(e){return zFe(function(){return!!L7[e]()||F7[e]()!==F7||jFe&&L7[e].name!==e})},UFe=Nt,WFe=eZ.trim,qFe=HFe;UFe({target:"String",proto:!0,forced:qFe("trim")},{trim:function(){return WFe(this)}});var KFe=Vn,VFe=KFe("String").trim,GFe=an,YFe=VFe,ZS=String.prototype,ZFe=function(e){var r=e.trim;return typeof e=="string"||e===ZS||GFe(ZS,e)&&r===ZS.trim?YFe:r},XFe=ZFe,JFe=XFe;(function(e){e.exports=JFe})(FFe);var fO={},QFe={get exports(){return fO},set exports(e){fO=e}},e9e=Nt,t9e=ni,r9e=Gh;e9e({target:"Object",stat:!0,sham:!t9e},{create:r9e});var n9e=Kr,i9e=n9e.Object,s9e=function(r,t){return i9e.create(r,t)},o9e=s9e,iZ=o9e;(function(e){e.exports=iZ})(QFe);var a9e=Vt(fO),hO={},l9e={get exports(){return hO},set exports(e){hO=e}},dO=Kr,u9e=Cv;dO.JSON||(dO.JSON={stringify:JSON.stringify});var c9e=function(r,t,n){return u9e(dO.JSON.stringify,null,arguments)},f9e=c9e,h9e=f9e;(function(e){e.exports=h9e})(l9e);var d9e=Vt(hO),pO={},p9e={get exports(){return pO},set exports(e){pO=e}},v9e=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",g9e=TypeError,sZ=function(e,r){if(e<r)throw g9e("Not enough arguments");return e},oZ=xn,y9e=Cv,m9e=En,b9e=v9e,w9e=Qc,$9e=tb,_9e=sZ,x9e=oZ.Function,E9e=/MSIE .\./.test(w9e)||b9e&&function(){var e=oZ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),aZ=function(e,r){var t=r?2:1;return E9e?function(n,i){var s=_9e(arguments.length,1)>t,o=m9e(n)?n:x9e(n),a=s?$9e(arguments,t):[],l=s?function(){y9e(o,this,a)}:o;return r?e(l,i):e(l)}:e},S9e=Nt,lZ=xn,k9e=aZ,j7=k9e(lZ.setInterval,!0);S9e({global:!0,bind:!0,forced:lZ.setInterval!==j7},{setInterval:j7});var T9e=Nt,uZ=xn,I9e=aZ,z7=I9e(uZ.setTimeout,!0);T9e({global:!0,bind:!0,forced:uZ.setTimeout!==z7},{setTimeout:z7});var A9e=Kr,O9e=A9e.setTimeout;(function(e){e.exports=O9e})(p9e);var C9e=Vt(pO),H7={},P9e={get exports(){return H7},set exports(e){H7=e}},N9e=Bs,U7=Gm,R9e=ao,D9e=function(r){for(var t=N9e(this),n=R9e(t),i=arguments.length,s=U7(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:U7(o,n);a>s;)t[s++]=r;return t},B9e=Nt,M9e=D9e;B9e({target:"Array",proto:!0},{fill:M9e});var L9e=Vn,F9e=L9e("Array").fill,j9e=an,z9e=F9e,XS=Array.prototype,H9e=function(e){var r=e.fill;return e===XS||j9e(XS,e)&&r===XS.fill?z9e:r},U9e=H9e,W9e=U9e;(function(e){e.exports=W9e})(P9e);var vO={},q9e={get exports(){return vO},set exports(e){vO=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(q9e);var K9e=vO;/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Oa(){return Oa=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Oa.apply(this,arguments)}function Zo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function v1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gO;typeof Object.assign!="function"?gO=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:gO=Object.assign;var Nh=gO,W7=["","webkit","Moz","MS","ms","o"],V9e=typeof document>"u"?{style:{}}:document.createElement("div"),G9e="function",up=Math.round,Rh=Math.abs,O4=Date.now;function _x(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<W7.length;){if(t=W7[s],n=t?t+i:r,n in e)return n;s++}}var ou;typeof window>"u"?ou={}:ou=window;var cZ=_x(V9e.style,"touchAction"),fZ=cZ!==void 0;function Y9e(){if(!fZ)return!1;var e={},r=ou.CSS&&ou.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?ou.CSS.supports("touch-action",t):!0}),e}var hZ="compute",dZ="auto",yO="manipulation",gh="none",nm="pan-x",im="pan-y",g1=Y9e(),Z9e=/mobile|tablet|ip(ad|hone|od)|android/i,pZ="ontouchstart"in ou,X9e=_x(ou,"PointerEvent")!==void 0,J9e=pZ&&Z9e.test(navigator.userAgent),ob="touch",Q9e="pen",C4="mouse",eje="kinect",tje=25,cs=1,Zh=2,Un=4,Ns=8,_$=1,ab=2,lb=4,ub=8,rv=16,dl=ab|lb,yh=ub|rv,vZ=dl|yh,gZ=["x","y"],x$=["clientX","clientY"];function au(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function xx(e,r){return typeof e===G9e?e.apply(r&&r[0]||void 0,r):e}function th(e,r){return e.indexOf(r)>-1}function rje(e){if(th(e,gh))return gh;var r=th(e,nm),t=th(e,im);return r&&t?gh:r||t?r?nm:im:th(e,yO)?yO:dZ}var yZ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===hZ&&(n=this.compute()),fZ&&this.manager.element.style&&g1[n]&&(this.manager.element.style[cZ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return au(this.manager.recognizers,function(i){xx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),rje(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=th(o,gh)&&!g1[gh],l=th(o,im)&&!g1[im],u=th(o,nm)&&!g1[nm];if(a){var f=n.pointers.length===1,c=n.distance<2,d=n.deltaTime<250;if(f&&c&&d)return}if(!(u&&l)&&(a||l&&s&dl||u&&s&yh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function P4(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function mZ(e){var r=e.length;if(r===1)return{x:up(e[0].clientX),y:up(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:up(t/r),y:up(n/r)}}function q7(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:up(e.pointers[t].clientX),clientY:up(e.pointers[t].clientY)},t++;return{timeStamp:O4(),pointers:r,center:mZ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function E$(e,r,t){t||(t=gZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function mO(e,r,t){t||(t=gZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function bZ(e,r){return e===r?_$:Rh(e)>=Rh(r)?e<0?ab:lb:r<0?ub:rv}function nje(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===cs||s.eventType===Un)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function wZ(e,r,t){return{x:r/e||0,y:t/e||0}}function ije(e,r){return E$(r[0],r[1],x$)/E$(e[0],e[1],x$)}function sje(e,r){return mO(r[1],r[0],x$)+mO(e[1],e[0],x$)}function oje(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ns&&(n>tje||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,f=wZ(n,l,u);s=f.x,o=f.y,i=Rh(f.x)>Rh(f.y)?f.x:f.y,a=bZ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function aje(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=q7(r)),i>1&&!t.firstMultiple?t.firstMultiple=q7(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=mZ(n);r.timeStamp=O4(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=mO(a,l),r.distance=E$(a,l),nje(t,r),r.offsetDirection=bZ(r.deltaX,r.deltaY);var u=wZ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Rh(u.x)>Rh(u.y)?u.x:u.y,r.scale=o?ije(o.pointers,n):1,r.rotation=o?sje(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,oje(t,r);var f=e.element,c=r.srcEvent,d;c.composedPath?d=c.composedPath()[0]:c.path?d=c.path[0]:d=c.target,P4(d,f)&&(f=d),r.target=f}function lje(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&cs&&n-i===0,o=r&(Un|Ns)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,aje(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function sm(e){return e.trim().split(/\s+/g)}function yy(e,r,t){au(sm(r),function(n){e.addEventListener(n,t,!1)})}function my(e,r,t){au(sm(r),function(n){e.removeEventListener(n,t,!1)})}function K7(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var jv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){xx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&yy(this.element,this.evEl,this.domHandler),this.evTarget&&yy(this.target,this.evTarget,this.domHandler),this.evWin&&yy(K7(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&my(this.element,this.evEl,this.domHandler),this.evTarget&&my(this.target,this.evTarget,this.domHandler),this.evWin&&my(K7(this.element),this.evWin,this.domHandler)},e}();function Dh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var uje={pointerdown:cs,pointermove:Zh,pointerup:Un,pointercancel:Ns,pointerout:Ns},cje={2:ob,3:Q9e,4:C4,5:eje},$Z="pointerdown",_Z="pointermove pointerup pointercancel";ou.MSPointerEvent&&!ou.PointerEvent&&($Z="MSPointerDown",_Z="MSPointerMove MSPointerUp MSPointerCancel");var xZ=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evEl=$Z,i.evWin=_Z,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=uje[a],u=cje[i.pointerType]||i.pointerType,f=u===ob,c=Dh(s,i.pointerId,"pointerId");l&cs&&(i.button===0||f)?c<0&&(s.push(i),c=s.length-1):l&(Un|Ns)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(jv);function om(e){return Array.prototype.slice.call(e,0)}function N4(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Dh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var fje={touchstart:cs,touchmove:Zh,touchend:Un,touchcancel:Ns},hje="touchstart touchmove touchend touchcancel",R4=function(e){Zo(r,e);function r(){var n;return r.prototype.evTarget=hje,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=fje[i.type],o=dje.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ob,srcEvent:i})},r}(jv);function dje(e,r){var t=om(e.touches),n=this.targetIds;if(r&(cs|Zh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=om(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return P4(u.target,l)}),r===cs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Un|Ns)&&delete n[o[i].identifier],i++;if(a.length)return[N4(s.concat(a),"identifier",!0),a]}var pje={mousedown:cs,mousemove:Zh,mouseup:Un},vje="mousedown",gje="mousemove mouseup",D4=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evEl=vje,i.evWin=gje,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=pje[i.type];s&cs&&i.button===0&&(this.pressed=!0),s&Zh&&i.which!==1&&(s=Un),this.pressed&&(s&Un&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:C4,srcEvent:i}))},r}(jv),yje=2500,V7=25;function G7(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,yje)}}function mje(e,r){e&cs?(this.primaryTouch=r.changedPointers[0].identifier,G7.call(this,r)):e&(Un|Ns)&&G7.call(this,r)}function bje(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=V7&&o<=V7)return!0}return!1}var EZ=function(){var e=function(r){Zo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var f=u.pointerType===ob,c=u.pointerType===C4;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(f)mje.call(v1(v1(o)),l,u);else if(c&&bje.call(v1(v1(o)),u))return;o.callback(a,l,u)}},o.touch=new R4(o.manager,o.handler),o.mouse=new D4(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(jv);return e}();function wje(e){var r,t=e.options.inputClass;return t?r=t:X9e?r=xZ:J9e?r=R4:pZ?r=EZ:r=D4,new r(e,lje)}function cp(e,r,t){return Array.isArray(e)?(au(e,t[r],t),!0):!1}var vw=1,Ko=2,nv=4,Nc=8,lu=Nc,am=16,cl=32,$je=1;function _je(){return $je++}function y1(e,r){var t=r.manager;return t?t.get(e):e}function Y7(e){return e&am?"cancel":e&Nc?"end":e&nv?"move":e&Ko?"start":""}var cb=function(){function e(t){t===void 0&&(t={}),this.options=Oa({enable:!0},t),this.id=_je(),this.manager=null,this.state=vw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Nh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(cp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=y1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return cp(n,"dropRecognizeWith",this)?this:(n=y1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(cp(n,"requireFailure",this))return this;var i=this.requireFail;return n=y1(n,this),Dh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(cp(n,"dropRequireFailure",this))return this;n=y1(n,this);var i=Dh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Nc&&o(i.options.event+Y7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Nc&&o(i.options.event+Y7(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=cl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(cl|vw)))return!1;n++}return!0},r.recognize=function(n){var i=Nh({},n);if(!xx(this.options.enable,[this,i])){this.reset(),this.state=cl;return}this.state&(lu|am|cl)&&(this.state=vw),this.state=this.process(i),this.state&(Ko|nv|Nc|am)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),bO=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Oa({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[yO]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&cs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Un)return this.failTimeout();var f=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||E$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!f?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=lu,s.tryEmit()},o.interval),Ko):lu}return cl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=cl},this.options.interval),cl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===lu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(cb),iv=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Ko|nv),l=this.attrTest(i);return a&&(o&Ns||!l)?s|am:a||l?o&Un?s|Nc:s&Ko?s|nv:Ko:cl},r}(cb);function SZ(e){return e===rv?"down":e===ub?"up":e===ab?"left":e===lb?"right":""}var B4=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Oa({event:"pan",threshold:10,pointers:1,direction:vZ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&dl&&s.push(im),i&yh&&s.push(nm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,f=i.deltaY;return l&s.direction||(s.direction&dl?(l=u===0?_$:u<0?ab:lb,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=f===0?_$:f<0?ub:rv,o=f!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return iv.prototype.attrTest.call(this,i)&&(this.state&Ko||!(this.state&Ko)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=SZ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(iv),kZ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({event:"swipe",threshold:10,velocity:.3,direction:dl|yh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return B4.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(dl|yh)?o=i.overallVelocity:s&dl?o=i.overallVelocityX:s&yh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Rh(o)>this.options.velocity&&i.eventType&Un},t.emit=function(i){var s=SZ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(iv),TZ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[gh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Ko)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(iv),IZ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[gh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Ko)},r}(iv),AZ=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Oa({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[dZ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Un|Ns)&&!u)this.reset();else if(i.eventType&cs)this.reset(),this._timer=setTimeout(function(){s.state=lu,s.tryEmit()},o.time);else if(i.eventType&Un)return lu;return cl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===lu&&(i&&i.eventType&Un?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=O4(),this.manager.emit(this.options.event,this._input)))},r}(cb),OZ={domEvents:!1,touchAction:hZ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Z7=[[IZ,{enable:!1}],[TZ,{enable:!1},["rotate"]],[kZ,{direction:dl}],[B4,{direction:dl},["swipe"]],[bO],[bO,{event:"doubletap",taps:2},["tap"]],[AZ]],xje=1,X7=2;function J7(e,r){var t=e.element;if(t.style){var n;au(e.options.cssProps,function(i,s){n=_x(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Eje(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var Q7=function(){function e(t,n){var i=this;this.options=Nh({},OZ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=wje(this),this.touchAction=new yZ(this,this.options.touchAction),J7(this,!0),au(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Nh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?X7:xje},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&lu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==X7&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ko|nv|Nc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof cb)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(cp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(cp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Dh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return au(sm(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return au(sm(n),function(o){i?s[o]&&s[o].splice(Dh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Eje(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&J7(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),Sje={touchstart:cs,touchmove:Zh,touchend:Un,touchcancel:Ns},kje="touchstart",Tje="touchstart touchmove touchend touchcancel",Ije=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evTarget=kje,i.evWin=Tje,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=Sje[i.type];if(s===cs&&(this.started=!0),!!this.started){var o=Aje.call(this,i,s);s&(Un|Ns)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ob,srcEvent:i})}},r}(jv);function Aje(e,r){var t=om(e.touches),n=om(e.changedTouches);return r&(Un|Ns)&&(t=N4(t.concat(n),"identifier",!0)),[t,n]}function CZ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var PZ=CZ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),Oje=CZ(function(e,r){return PZ(e,r,!0)},"merge","Use `assign`.");function Cje(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Nh(i,t)}function eL(e,r){return function(){return e.apply(r,arguments)}}var Pje=function(){var e=function(t,n){return n===void 0&&(n={}),new Q7(t,Oa({recognizers:Z7.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=vZ,e.DIRECTION_DOWN=rv,e.DIRECTION_LEFT=ab,e.DIRECTION_RIGHT=lb,e.DIRECTION_UP=ub,e.DIRECTION_HORIZONTAL=dl,e.DIRECTION_VERTICAL=yh,e.DIRECTION_NONE=_$,e.DIRECTION_DOWN=rv,e.INPUT_START=cs,e.INPUT_MOVE=Zh,e.INPUT_END=Un,e.INPUT_CANCEL=Ns,e.STATE_POSSIBLE=vw,e.STATE_BEGAN=Ko,e.STATE_CHANGED=nv,e.STATE_ENDED=Nc,e.STATE_RECOGNIZED=lu,e.STATE_CANCELLED=am,e.STATE_FAILED=cl,e.Manager=Q7,e.Input=jv,e.TouchAction=yZ,e.TouchInput=R4,e.MouseInput=D4,e.PointerEventInput=xZ,e.TouchMouseInput=EZ,e.SingleTouchInput=Ije,e.Recognizer=cb,e.AttrRecognizer=iv,e.Tap=bO,e.Pan=B4,e.Swipe=kZ,e.Pinch=TZ,e.Rotate=IZ,e.Press=AZ,e.on=yy,e.off=my,e.each=au,e.merge=Oje,e.extend=PZ,e.bindFn=eL,e.assign=Nh,e.inherit=Cje,e.bindFn=eL,e.prefixed=_x,e.toArray=om,e.inArray=Dh,e.uniqueArray=N4,e.splitStr=sm,e.boolOrFn=xx,e.hasParent=P4,e.addEventListeners=yy,e.removeEventListeners=my,e.defaults=Nh({},OZ,{preset:Z7}),e}(),Nje=Pje;function NZ(e,r){var t=typeof bx<"u"&&sb(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=Rje(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Rje(e,r){var t;if(e){if(typeof e=="string")return tL(e,r);var n=$x(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return k4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tL(e,r)}}function tL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var RZ=bx("DELETE");function Dje(e){for(var r,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return DZ.apply(void 0,wx(r=[{},e]).call(r,n))}function DZ(){var e=S$.apply(void 0,arguments);return MZ(e),e}function S$(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var n;return S$.apply(void 0,wx(n=[DZ(r[0],r[1])]).call(n,Is($x(r).call(r,2))))}var i=r[0],s=r[1],o=NZ(kMe(s)),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===RZ?delete i[l]:i[l]!==null&&s[l]!==null&&Ai(i[l])==="object"&&Ai(s[l])==="object"&&!Vs(i[l])&&!Vs(s[l])?i[l]=S$(i[l],s[l]):i[l]=BZ(s[l]))}}catch(u){o.e(u)}finally{o.f()}return i}function BZ(e){return Vs(e)?ga(e).call(e,function(r){return BZ(r)}):Ai(e)==="object"&&e!==null?S$({},e):e}function MZ(e){for(var r=0,t=I4(e);r<t.length;r++){var n=t[r];e[n]===RZ?delete e[n]:Ai(e[n])==="object"&&e[n]!==null&&MZ(e[n])}}function Bje(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var Mje=typeof window<"u"?window.Hammer||Nje:function(){return Bje()};function eu(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=Mje(this._dom.overlay);n.on("tap",TY(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ph(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){Lje(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}K9e(eu.prototype);eu.current=null;eu.prototype.destroy=function(){var e,r;this.deactivate();var t=NZ(y7e(e=ZY(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};eu.prototype.activate=function(){eu.current&&eu.current.deactivate(),eu.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};eu.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};eu.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Lje(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var wO={},Fje={get exports(){return wO},set exports(e){wO=e}},jje=ax,zje=Rv,Hje=TypeError,LZ=function(e){if(jje(e))return e;throw Hje(zje(e)+" is not a constructor")},Uje=Nt,Wje=ds,JS=Cv,qje=SY,rL=LZ,Kje=oo,nL=mi,Vje=Gh,FZ=kr,M4=Wje("Reflect","construct"),Gje=Object.prototype,Yje=[].push,jZ=FZ(function(){function e(){}return!(M4(function(){},[],e)instanceof e)}),zZ=!FZ(function(){M4(function(){})}),iL=jZ||zZ;Uje({target:"Reflect",stat:!0,forced:iL,sham:iL},{construct:function(r,t){rL(r),Kje(t);var n=arguments.length<3?r:rL(arguments[2]);if(zZ&&!jZ)return M4(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return JS(Yje,i,t),new(JS(qje,r,i))}var s=n.prototype,o=Vje(nL(s)?s:Gje),a=JS(r,o,t);return nL(a)?a:o}});var Zje=Kr,Xje=Zje.Reflect.construct,Jje=Xje,Qje=Jje;(function(e){e.exports=Qje})(Fje);var gw=Vt(wO);function Rf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k$={},eze={get exports(){return k$},set exports(e){k$=e}},$O={},tze={get exports(){return $O},set exports(e){$O=e}},rze=iZ,nze=rze,ize=nze,sze=ize;(function(e){e.exports=sze})(tze);(function(e){e.exports=$O})(eze);var oze=Vt(k$),T$={},aze={get exports(){return T$},set exports(e){T$=e}},_O={},lze={get exports(){return _O},set exports(e){_O=e}},uze=Nt,cze=hY;uze({target:"Object",stat:!0},{setPrototypeOf:cze});var fze=Kr,hze=fze.Object.setPrototypeOf,dze=hze,pze=dze,vze=pze,gze=vze,yze=gze,mze=yze;(function(e){e.exports=mze})(lze);(function(e){e.exports=_O})(aze);var xO=Vt(T$),EO={},bze={get exports(){return EO},set exports(e){EO=e}},SO={},wze={get exports(){return SO},set exports(e){SO=e}},$ze=kY,_ze=$ze,xze=_ze,Eze=xze;(function(e){e.exports=Eze})(wze);(function(e){e.exports=SO})(bze);var HZ=Vt(EO);function kO(e,r){var t;return kO=xO?HZ(t=xO).call(t):function(i,s){return i.__proto__=s,i},kO(e,r)}function Sze(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=oze(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),sx(e,"prototype",{writable:!1}),r&&kO(e,r)}function kze(e,r){if(r&&(Ai(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rf(e)}var I$={},Tze={get exports(){return I$},set exports(e){I$=e}},TO={},Ize={get exports(){return TO},set exports(e){TO=e}},Aze=JY,Oze=Aze,Cze=Oze,Pze=Cze;(function(e){e.exports=Pze})(Ize);(function(e){e.exports=TO})(Tze);var sL=Vt(I$);function A$(e){var r;return A$=xO?HZ(r=sL).call(r):function(n){return n.__proto__||sL(n)},A$(e)}var IO={},Nze={get exports(){return IO},set exports(e){IO=e}},AO={},Rze={get exports(){return AO},set exports(e){AO=e}};(function(e){var r=Qy,t=w$;function n(i){"@babel/helpers - typeof";return e.exports=n=typeof r=="function"&&typeof t=="symbol"?function(s){return typeof s}:function(s){return s&&typeof r=="function"&&s.constructor===r&&s!==r.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Rze);var OO={},Dze={get exports(){return OO},set exports(e){OO=e}},CO={},Bze={get exports(){return CO},set exports(e){CO=e}},Mze=VY,Lze=Mze,Fze=Lze,jze=Fze;(function(e){e.exports=jze})(Bze);(function(e){e.exports=CO})(Dze);var PO={},zze={get exports(){return PO},set exports(e){PO=e}},NO={},Hze={get exports(){return NO},set exports(e){NO=e}},oL=Kn,Uze=T4,Wze=Kh,qze=so,Kze=function(e,r,t){for(var n=Uze(r),i=qze.f,s=Wze.f,o=0;o<n.length;o++){var a=n[o];!oL(e,a)&&!(t&&oL(t,a))&&i(e,a,s(r,a))}},Vze=mi,Gze=Iu,Yze=function(e,r){Vze(r)&&"cause"in r&&Gze(e,"cause",r.cause)},Zze=Br,UZ=Error,Xze=Zze("".replace),Jze=function(e){return String(UZ(e).stack)}("zxcasd"),WZ=/\n\s*at [^:]*:[^\n]*/,Qze=WZ.test(Jze),eHe=function(e,r){if(Qze&&typeof e=="string"&&!UZ.prepareStackTrace)for(;r--;)e=Xze(e,WZ,"");return e},tHe=kr,rHe=Vh,nHe=!tHe(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",rHe(1,7)),e.stack!==7):!0}),iHe=Iu,sHe=eHe,oHe=nHe,aL=Error.captureStackTrace,aHe=function(e,r,t,n){oHe&&(aL?aL(e,r):iHe(e,"stack",sHe(t,n)))},lHe=ef,uHe=yi,cHe=oo,fHe=Rv,hHe=OY,dHe=ao,lL=an,pHe=S4,vHe=mx,uL=AY,gHe=TypeError,yw=function(e,r){this.stopped=e,this.result=r},cL=yw.prototype,Xh=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=lHe(r,n),u,f,c,d,y,w,b,T=function(A){return u&&uL(u,"normal",A),new yw(!0,A)},_=function(A){return i?(cHe(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(f=vHe(e),!f)throw gHe(fHe(e)+" is not iterable");if(hHe(f)){for(c=0,d=dHe(e);d>c;c++)if(y=_(e[c]),y&&lL(cL,y))return y;return new yw(!1)}u=pHe(e,f)}for(w=s?e.next:u.next;!(b=uHe(w,u)).done;){try{y=_(b.value)}catch(A){uL(u,"throw",A)}if(typeof y=="object"&&y&&lL(cL,y))return y}return new yw(!1)},yHe=_l,mHe=function(e,r){return e===void 0?arguments.length<2?"":r:yHe(e)},bHe=Nt,wHe=an,$He=gx,O$=hY,_He=Kze,qZ=Gh,QS=Iu,ek=Vh,xHe=Yze,EHe=aHe,SHe=Xh,kHe=mHe,THe=ln,IHe=THe("toStringTag"),C$=Error,AHe=[].push,sv=function(r,t){var n=wHe(tk,this),i;O$?i=O$(C$(),n?$He(this):tk):(i=n?this:qZ(tk),QS(i,IHe,"Error")),t!==void 0&&QS(i,"message",kHe(t)),EHe(i,sv,i.stack,1),arguments.length>2&&xHe(i,arguments[2]);var s=[];return SHe(r,AHe,{that:s}),QS(i,"errors",s),i};O$?O$(sv,C$):_He(sv,C$,{name:!0});var tk=sv.prototype=qZ(C$.prototype,{constructor:ek(1,sv),message:ek(1,""),name:ek(1,"AggregateError")});bHe({global:!0,constructor:!0,arity:2},{AggregateError:sv});var OHe=ds,CHe=v4,PHe=ln,NHe=ni,fL=PHe("species"),KZ=function(e){var r=OHe(e);NHe&&r&&!r[fL]&&CHe(r,fL,{configurable:!0,get:function(){return this}})},RHe=an,DHe=TypeError,L4=function(e,r){if(RHe(r,e))return e;throw DHe("Incorrect invocation")},hL=oo,BHe=LZ,MHe=Um,LHe=ln,FHe=LHe("species"),VZ=function(e,r){var t=hL(e).constructor,n;return t===void 0||MHe(n=hL(t)[FHe])?r:BHe(n)},jHe=Qc,GZ=/(?:ipad|iphone|ipod).*applewebkit/i.test(jHe),eo=xn,zHe=Cv,HHe=ef,dL=En,UHe=Kn,YZ=kr,pL=PG,WHe=tb,vL=l4,qHe=sZ,KHe=GZ,VHe=ib,RO=eo.setImmediate,DO=eo.clearImmediate,GHe=eo.process,rk=eo.Dispatch,YHe=eo.Function,gL=eo.MessageChannel,ZHe=eo.String,nk=0,by={},yL="onreadystatechange",lm,Of,ik,sk;YZ(function(){lm=eo.location});var F4=function(e){if(UHe(by,e)){var r=by[e];delete by[e],r()}},ok=function(e){return function(){F4(e)}},mL=function(e){F4(e.data)},bL=function(e){eo.postMessage(ZHe(e),lm.protocol+"//"+lm.host)};(!RO||!DO)&&(RO=function(r){qHe(arguments.length,1);var t=dL(r)?r:YHe(r),n=WHe(arguments,1);return by[++nk]=function(){zHe(t,void 0,n)},Of(nk),nk},DO=function(r){delete by[r]},VHe?Of=function(e){GHe.nextTick(ok(e))}:rk&&rk.now?Of=function(e){rk.now(ok(e))}:gL&&!KHe?(ik=new gL,sk=ik.port2,ik.port1.onmessage=mL,Of=HHe(sk.postMessage,sk)):eo.addEventListener&&dL(eo.postMessage)&&!eo.importScripts&&lm&&lm.protocol!=="file:"&&!YZ(bL)?(Of=bL,eo.addEventListener("message",mL,!1)):yL in vL("script")?Of=function(e){pL.appendChild(vL("script"))[yL]=function(){pL.removeChild(this),F4(e)}}:Of=function(e){setTimeout(ok(e),0)});var ZZ={set:RO,clear:DO},XZ=function(){this.head=null,this.tail=null};XZ.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var JZ=XZ,XHe=Qc,JHe=/ipad|iphone|ipod/i.test(XHe)&&typeof Pebble<"u",QHe=Qc,eUe=/web0s(?!.*chrome)/i.test(QHe),Bh=xn,wL=ef,tUe=Kh.f,ak=ZZ.set,rUe=JZ,nUe=GZ,iUe=JHe,sUe=eUe,lk=ib,$L=Bh.MutationObserver||Bh.WebKitMutationObserver,_L=Bh.document,xL=Bh.process,m1=Bh.Promise,EL=tUe(Bh,"queueMicrotask"),BO=EL&&EL.value,Ud,uk,ck,b1,SL;if(!BO){var w1=new rUe,$1=function(){var e,r;for(lk&&(e=xL.domain)&&e.exit();r=w1.get();)try{r()}catch(t){throw w1.head&&Ud(),t}e&&e.enter()};!nUe&&!lk&&!sUe&&$L&&_L?(uk=!0,ck=_L.createTextNode(""),new $L($1).observe(ck,{characterData:!0}),Ud=function(){ck.data=uk=!uk}):!iUe&&m1&&m1.resolve?(b1=m1.resolve(void 0),b1.constructor=m1,SL=wL(b1.then,b1),Ud=function(){SL($1)}):lk?Ud=function(){xL.nextTick($1)}:(ak=wL(ak,Bh),Ud=function(){ak($1)}),BO=function(e){w1.head||Ud(),w1.add(e)}}var oUe=BO,aUe=function(e,r){try{arguments.length==1?console.error(e):console.error(e,r)}catch{}},zv=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},lUe=xn,Hv=lUe.Promise,QZ=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",uUe=QZ,cUe=ib,fUe=!uUe&&!cUe&&typeof window=="object"&&typeof document=="object",hUe=xn,wy=Hv,dUe=En,pUe=wG,vUe=SG,gUe=ln,yUe=fUe,mUe=QZ,fk=Pv,kL=wy&&wy.prototype,bUe=gUe("species"),MO=!1,eX=dUe(hUe.PromiseRejectionEvent),wUe=pUe("Promise",function(){var e=vUe(wy),r=e!==String(wy);if(!r&&fk===66||!(kL.catch&&kL.finally))return!0;if(!fk||fk<51||!/native code/.test(e)){var t=new wy(function(s){s(1)}),n=function(s){s(function(){},function(){})},i=t.constructor={};if(i[bUe]=n,MO=t.then(function(){})instanceof n,!MO)return!0}return!r&&(yUe||mUe)&&!eX}),fb={CONSTRUCTOR:wUe,REJECTION_EVENT:eX,SUBCLASSING:MO},Ou={},TL=Ds,$Ue=TypeError,_Ue=function(e){var r,t;this.promise=new e(function(n,i){if(r!==void 0||t!==void 0)throw $Ue("Bad Promise constructor");r=n,t=i}),this.resolve=TL(r),this.reject=TL(t)};Ou.f=function(e){return new _Ue(e)};var xUe=Nt,P$=ib,Wc=xn,hb=yi,EUe=Bv,SUe=Yh,kUe=KZ,TUe=Ds,LO=En,IUe=mi,AUe=L4,OUe=VZ,tX=ZZ.set,j4=oUe,CUe=aUe,PUe=zv,NUe=JZ,rX=Mv,FO=Hv,nX=fb,iX=Ou,Ex="Promise",sX=nX.CONSTRUCTOR,RUe=nX.REJECTION_EVENT,hk=rX.getterFor(Ex),DUe=rX.set,BUe=FO&&FO.prototype,fp=FO,dk=BUe,oX=Wc.TypeError,jO=Wc.document,z4=Wc.process,zO=iX.f,MUe=zO,LUe=!!(jO&&jO.createEvent&&Wc.dispatchEvent),aX="unhandledrejection",FUe="rejectionhandled",IL=0,lX=1,jUe=2,H4=1,uX=2,_1,AL,zUe,cX=function(e){var r;return IUe(e)&&LO(r=e.then)?r:!1},fX=function(e,r){var t=r.value,n=r.state==lX,i=n?e.ok:e.fail,s=e.resolve,o=e.reject,a=e.domain,l,u,f;try{i?(n||(r.rejection===uX&&UUe(r),r.rejection=H4),i===!0?l=t:(a&&a.enter(),l=i(t),a&&(a.exit(),f=!0)),l===e.promise?o(oX("Promise-chain cycle")):(u=cX(l))?hb(u,l,s,o):s(l)):o(t)}catch(c){a&&!f&&a.exit(),o(c)}},hX=function(e,r){e.notified||(e.notified=!0,j4(function(){for(var t=e.reactions,n;n=t.get();)fX(n,e);e.notified=!1,r&&!e.rejection&&HUe(e)}))},dX=function(e,r,t){var n,i;LUe?(n=jO.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Wc.dispatchEvent(n)):n={promise:r,reason:t},!RUe&&(i=Wc["on"+e])?i(n):e===aX&&CUe("Unhandled promise rejection",t)},HUe=function(e){hb(tX,Wc,function(){var r=e.facade,t=e.value,n=OL(e),i;if(n&&(i=PUe(function(){P$?z4.emit("unhandledRejection",t,r):dX(aX,r,t)}),e.rejection=P$||OL(e)?uX:H4,i.error))throw i.value})},OL=function(e){return e.rejection!==H4&&!e.parent},UUe=function(e){hb(tX,Wc,function(){var r=e.facade;P$?z4.emit("rejectionHandled",r):dX(FUe,r,e.value)})},hp=function(e,r,t){return function(n){e(r,n,t)}},Ip=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=jUe,hX(e,!0))},HO=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw oX("Promise can't be resolved itself");var n=cX(r);n?j4(function(){var i={done:!1};try{hb(n,r,hp(HO,i,e),hp(Ip,i,e))}catch(s){Ip(i,s,e)}}):(e.value=r,e.state=lX,hX(e,!1))}catch(i){Ip({done:!1},i,e)}}};sX&&(fp=function(r){AUe(this,dk),TUe(r),hb(_1,this);var t=hk(this);try{r(hp(HO,t),hp(Ip,t))}catch(n){Ip(t,n)}},dk=fp.prototype,_1=function(r){DUe(this,{type:Ex,done:!1,notified:!1,parent:!1,reactions:new NUe,rejection:!1,state:IL,value:void 0})},_1.prototype=EUe(dk,"then",function(r,t){var n=hk(this),i=zO(OUe(this,fp));return n.parent=!0,i.ok=LO(r)?r:!0,i.fail=LO(t)&&t,i.domain=P$?z4.domain:void 0,n.state==IL?n.reactions.add(i):j4(function(){fX(i,n)}),i.promise}),AL=function(){var e=new _1,r=hk(e);this.promise=e,this.resolve=hp(HO,r),this.reject=hp(Ip,r)},iX.f=zO=function(e){return e===fp||e===zUe?new AL(e):MUe(e)});xUe({global:!0,constructor:!0,wrap:!0,forced:sX},{Promise:fp});SUe(fp,Ex,!1,!0);kUe(Ex);var WUe=Hv,qUe=NY,KUe=fb.CONSTRUCTOR,Sx=KUe||!qUe(function(e){WUe.all(e).then(void 0,function(){})}),VUe=Nt,GUe=yi,YUe=Ds,ZUe=Ou,XUe=zv,JUe=Xh,QUe=Sx;VUe({target:"Promise",stat:!0,forced:QUe},{all:function(r){var t=this,n=ZUe.f(t),i=n.resolve,s=n.reject,o=XUe(function(){var a=YUe(t.resolve),l=[],u=0,f=1;JUe(r,function(c){var d=u++,y=!1;f++,GUe(a,t,c).then(function(w){y||(y=!0,l[d]=w,--f||i(l))},s)}),--f||i(l)});return o.error&&s(o.value),n.promise}});var eWe=Nt,tWe=fb.CONSTRUCTOR,CL=Hv;CL&&CL.prototype;eWe({target:"Promise",proto:!0,forced:tWe,real:!0},{catch:function(e){return this.then(void 0,e)}});var rWe=Nt,nWe=yi,iWe=Ds,sWe=Ou,oWe=zv,aWe=Xh,lWe=Sx;rWe({target:"Promise",stat:!0,forced:lWe},{race:function(r){var t=this,n=sWe.f(t),i=n.reject,s=oWe(function(){var o=iWe(t.resolve);aWe(r,function(a){nWe(o,t,a).then(n.resolve,i)})});return s.error&&i(s.value),n.promise}});var uWe=Nt,cWe=yi,fWe=Ou,hWe=fb.CONSTRUCTOR;uWe({target:"Promise",stat:!0,forced:hWe},{reject:function(r){var t=fWe.f(this);return cWe(t.reject,void 0,r),t.promise}});var dWe=oo,pWe=mi,vWe=Ou,pX=function(e,r){if(dWe(e),pWe(r)&&r.constructor===e)return r;var t=vWe.f(e),n=t.resolve;return n(r),t.promise},gWe=Nt,yWe=ds,mWe=OOe,bWe=Hv,wWe=fb.CONSTRUCTOR,$We=pX,_We=yWe("Promise"),xWe=!wWe;gWe({target:"Promise",stat:!0,forced:mWe},{resolve:function(r){return $We(xWe&&this===_We?bWe:this,r)}});var EWe=Nt,SWe=yi,kWe=Ds,TWe=Ou,IWe=zv,AWe=Xh,OWe=Sx;EWe({target:"Promise",stat:!0,forced:OWe},{allSettled:function(r){var t=this,n=TWe.f(t),i=n.resolve,s=n.reject,o=IWe(function(){var a=kWe(t.resolve),l=[],u=0,f=1;AWe(r,function(c){var d=u++,y=!1;f++,SWe(a,t,c).then(function(w){y||(y=!0,l[d]={status:"fulfilled",value:w},--f||i(l))},function(w){y||(y=!0,l[d]={status:"rejected",reason:w},--f||i(l))})}),--f||i(l)});return o.error&&s(o.value),n.promise}});var CWe=Nt,PWe=yi,NWe=Ds,RWe=ds,DWe=Ou,BWe=zv,MWe=Xh,LWe=Sx,PL="No one promise resolved";CWe({target:"Promise",stat:!0,forced:LWe},{any:function(r){var t=this,n=RWe("AggregateError"),i=DWe.f(t),s=i.resolve,o=i.reject,a=BWe(function(){var l=NWe(t.resolve),u=[],f=0,c=1,d=!1;MWe(r,function(y){var w=f++,b=!1;c++,PWe(l,t,y).then(function(T){b||d||(d=!0,s(T))},function(T){b||d||(b=!0,u[w]=T,--c||o(new n(u,PL)))})}),--c||o(new n(u,PL))});return a.error&&o(a.value),i.promise}});var FWe=Nt,UO=Hv,jWe=kr,zWe=ds,HWe=En,UWe=VZ,NL=pX,WWe=UO&&UO.prototype,qWe=!!UO&&jWe(function(){WWe.finally.call({then:function(){}},function(){})});FWe({target:"Promise",proto:!0,real:!0,forced:qWe},{finally:function(e){var r=UWe(this,zWe("Promise")),t=HWe(e);return this.then(t?function(n){return NL(r,e()).then(function(){return n})}:e,t?function(n){return NL(r,e()).then(function(){throw n})}:e)}});var KWe=Kr,VWe=KWe.Promise,GWe=VWe,YWe=GWe,ZWe=YWe,XWe=ZWe,JWe=Nt,QWe=Ou,eqe=zv;JWe({target:"Promise",stat:!0,forced:!0},{try:function(e){var r=QWe.f(this),t=eqe(e);return(t.error?r.reject:r.resolve)(t.value),r.promise}});var tqe=XWe,rqe=tqe;(function(e){e.exports=rqe})(Hze);(function(e){e.exports=NO})(zze);var WO={},nqe={get exports(){return WO},set exports(e){WO=e}},qO={},iqe={get exports(){return qO},set exports(e){qO=e}},sqe=GY,oqe=sqe,aqe=oqe,lqe=aqe;(function(e){e.exports=lqe})(iqe);(function(e){e.exports=qO})(nqe);(function(e){var r=AO.default,t=v$,n=Qy,i=k$,s=I$,o=OO,a=T$,l=PO,u=WO,f=$$;function c(){e.exports=c=function(){return d},e.exports.__esModule=!0,e.exports.default=e.exports;var d={},y=Object.prototype,w=y.hasOwnProperty,b=t||function(xe,ge,Te){xe[ge]=Te.value},T=typeof n=="function"?n:{},_=T.iterator||"@@iterator",A=T.asyncIterator||"@@asyncIterator",x=T.toStringTag||"@@toStringTag";function I(xe,ge,Te){return t(xe,ge,{value:Te,enumerable:!0,configurable:!0,writable:!0}),xe[ge]}try{I({},"")}catch{I=function(Te,je,$){return Te[je]=$}}function O(xe,ge,Te,je){var $=ge&&ge.prototype instanceof M?ge:M,S=i($.prototype),N=new He(je||[]);return b(S,"_invoke",{value:ie(xe,Te,N)}),S}function C(xe,ge,Te){try{return{type:"normal",arg:xe.call(ge,Te)}}catch(je){return{type:"throw",arg:je}}}d.wrap=O;var g={};function M(){}function B(){}function z(){}var V={};I(V,_,function(){return this});var ne=s,re=ne&&ne(ne(Ge([])));re&&re!==y&&w.call(re,_)&&(V=re);var J=z.prototype=M.prototype=i(V);function F(xe){var ge;o(ge=["next","throw","return"]).call(ge,function(Te){I(xe,Te,function(je){return this._invoke(Te,je)})})}function Z(xe,ge){function Te($,S,N,L){var j=C(xe[$],xe,S);if(j.type!=="throw"){var K=j.arg,ae=K.value;return ae&&r(ae)=="object"&&w.call(ae,"__await")?ge.resolve(ae.__await).then(function(ye){Te("next",ye,N,L)},function(ye){Te("throw",ye,N,L)}):ge.resolve(ae).then(function(ye){K.value=ye,N(K)},function(ye){return Te("throw",ye,N,L)})}L(j.arg)}var je;b(this,"_invoke",{value:function(S,N){function L(){return new ge(function(j,K){Te(S,N,j,K)})}return je=je?je.then(L,L):L()}})}function ie(xe,ge,Te){var je="suspendedStart";return function($,S){if(je==="executing")throw new Error("Generator is already running");if(je==="completed"){if($==="throw")throw S;return it()}for(Te.method=$,Te.arg=S;;){var N=Te.delegate;if(N){var L=_e(N,Te);if(L){if(L===g)continue;return L}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(je==="suspendedStart")throw je="completed",Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);je="executing";var j=C(xe,ge,Te);if(j.type==="normal"){if(je=Te.done?"completed":"suspendedYield",j.arg===g)continue;return{value:j.arg,done:Te.done}}j.type==="throw"&&(je="completed",Te.method="throw",Te.arg=j.arg)}}}function _e(xe,ge){var Te=ge.method,je=xe.iterator[Te];if(je===void 0)return ge.delegate=null,Te==="throw"&&xe.iterator.return&&(ge.method="return",ge.arg=void 0,_e(xe,ge),ge.method==="throw")||Te!=="return"&&(ge.method="throw",ge.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),g;var $=C(je,xe.iterator,ge.arg);if($.type==="throw")return ge.method="throw",ge.arg=$.arg,ge.delegate=null,g;var S=$.arg;return S?S.done?(ge[xe.resultName]=S.value,ge.next=xe.nextLoc,ge.method!=="return"&&(ge.method="next",ge.arg=void 0),ge.delegate=null,g):S:(ge.method="throw",ge.arg=new TypeError("iterator result is not an object"),ge.delegate=null,g)}function we(xe){var ge={tryLoc:xe[0]};1 in xe&&(ge.catchLoc=xe[1]),2 in xe&&(ge.finallyLoc=xe[2],ge.afterLoc=xe[3]),this.tryEntries.push(ge)}function Ce(xe){var ge=xe.completion||{};ge.type="normal",delete ge.arg,xe.completion=ge}function He(xe){this.tryEntries=[{tryLoc:"root"}],o(xe).call(xe,we,this),this.reset(!0)}function Ge(xe){if(xe){var ge=xe[_];if(ge)return ge.call(xe);if(typeof xe.next=="function")return xe;if(!isNaN(xe.length)){var Te=-1,je=function $(){for(;++Te<xe.length;)if(w.call(xe,Te))return $.value=xe[Te],$.done=!1,$;return $.value=void 0,$.done=!0,$};return je.next=je}}return{next:it}}function it(){return{value:void 0,done:!0}}return B.prototype=z,b(J,"constructor",{value:z,configurable:!0}),b(z,"constructor",{value:B,configurable:!0}),B.displayName=I(z,x,"GeneratorFunction"),d.isGeneratorFunction=function(xe){var ge=typeof xe=="function"&&xe.constructor;return!!ge&&(ge===B||(ge.displayName||ge.name)==="GeneratorFunction")},d.mark=function(xe){return a?a(xe,z):(xe.__proto__=z,I(xe,x,"GeneratorFunction")),xe.prototype=i(J),xe},d.awrap=function(xe){return{__await:xe}},F(Z.prototype),I(Z.prototype,A,function(){return this}),d.AsyncIterator=Z,d.async=function(xe,ge,Te,je,$){$===void 0&&($=l);var S=new Z(O(xe,ge,Te,je),$);return d.isGeneratorFunction(ge)?S:S.next().then(function(N){return N.done?N.value:S.next()})},F(J),I(J,x,"Generator"),I(J,_,function(){return this}),I(J,"toString",function(){return"[object Generator]"}),d.keys=function(xe){var ge=Object(xe),Te=[];for(var je in ge)Te.push(je);return u(Te).call(Te),function $(){for(;Te.length;){var S=Te.pop();if(S in ge)return $.value=S,$.done=!1,$}return $.done=!0,$}},d.values=Ge,He.prototype={constructor:He,reset:function(ge){var Te;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(Te=this.tryEntries).call(Te,Ce),!ge)for(var je in this)je.charAt(0)==="t"&&w.call(this,je)&&!isNaN(+f(je).call(je,1))&&(this[je]=void 0)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if(ge.type==="throw")throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var Te=this;function je(K,ae){return N.type="throw",N.arg=ge,Te.next=K,ae&&(Te.method="next",Te.arg=void 0),!!ae}for(var $=this.tryEntries.length-1;$>=0;--$){var S=this.tryEntries[$],N=S.completion;if(S.tryLoc==="root")return je("end");if(S.tryLoc<=this.prev){var L=w.call(S,"catchLoc"),j=w.call(S,"finallyLoc");if(L&&j){if(this.prev<S.catchLoc)return je(S.catchLoc,!0);if(this.prev<S.finallyLoc)return je(S.finallyLoc)}else if(L){if(this.prev<S.catchLoc)return je(S.catchLoc,!0)}else{if(!j)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return je(S.finallyLoc)}}}},abrupt:function(ge,Te){for(var je=this.tryEntries.length-1;je>=0;--je){var $=this.tryEntries[je];if($.tryLoc<=this.prev&&w.call($,"finallyLoc")&&this.prev<$.finallyLoc){var S=$;break}}S&&(ge==="break"||ge==="continue")&&S.tryLoc<=Te&&Te<=S.finallyLoc&&(S=null);var N=S?S.completion:{};return N.type=ge,N.arg=Te,S?(this.method="next",this.next=S.finallyLoc,g):this.complete(N)},complete:function(ge,Te){if(ge.type==="throw")throw ge.arg;return ge.type==="break"||ge.type==="continue"?this.next=ge.arg:ge.type==="return"?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):ge.type==="normal"&&Te&&(this.next=Te),g},finish:function(ge){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.finallyLoc===ge)return this.complete(je.completion,je.afterLoc),Ce(je),g}},catch:function(ge){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.tryLoc===ge){var $=je.completion;if($.type==="throw"){var S=$.arg;Ce(je)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(ge,Te,je){return this.delegate={iterator:Ge(ge),resultName:Te,nextLoc:je},this.method==="next"&&(this.arg=void 0),g}},d}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports})(Nze);var mw=IO(),Es=mw;try{regeneratorRuntime=mw}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=mw:Function("r","regeneratorRuntime = r")(mw)}var KO={},uqe={get exports(){return KO},set exports(e){KO=e}},N$={},cqe={get exports(){return N$},set exports(e){N$=e}},fqe=kr,hqe=fqe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),dqe=kr,pqe=mi,vqe=Tu,RL=hqe,bw=Object.isExtensible,gqe=dqe(function(){bw(1)}),yqe=gqe||RL?function(r){return!pqe(r)||RL&&vqe(r)=="ArrayBuffer"?!1:bw?bw(r):!0}:bw,mqe=kr,bqe=!mqe(function(){return Object.isExtensible(Object.preventExtensions({}))}),wqe=Nt,$qe=Br,_qe=Ym,xqe=mi,U4=Kn,Eqe=so.f,DL=Xm,Sqe=p4,W4=yqe,kqe=nx,Tqe=bqe,vX=!1,wu=kqe("meta"),Iqe=0,q4=function(e){Eqe(e,wu,{value:{objectID:"O"+Iqe++,weakData:{}}})},Aqe=function(e,r){if(!xqe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!U4(e,wu)){if(!W4(e))return"F";if(!r)return"E";q4(e)}return e[wu].objectID},Oqe=function(e,r){if(!U4(e,wu)){if(!W4(e))return!0;if(!r)return!1;q4(e)}return e[wu].weakData},Cqe=function(e){return Tqe&&vX&&W4(e)&&!U4(e,wu)&&q4(e),e},Pqe=function(){Nqe.enable=function(){},vX=!0;var e=DL.f,r=$qe([].splice),t={};t[wu]=1,e(t).length&&(DL.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===wu){r(i,s,1);break}return i},wqe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Sqe.f}))},Nqe=cqe.exports={enable:Pqe,fastKey:Aqe,getWeakData:Oqe,onFreeze:Cqe};_qe[wu]=!0;var Rqe=Nt,Dqe=xn,Bqe=N$,Mqe=kr,Lqe=Iu,Fqe=Xh,jqe=L4,zqe=En,Hqe=mi,Uqe=Yh,Wqe=so.f,qqe=Lv.forEach,Kqe=ni,gX=Mv,Vqe=gX.set,Gqe=gX.getterFor,yX=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=Dqe[e],a=o&&o.prototype,l={},u;if(!Kqe||!zqe(o)||!(i||a.forEach&&!Mqe(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),Bqe.enable();else{u=r(function(d,y){Vqe(jqe(d,f),{type:e,collection:new o}),y!=null&&Fqe(y,d[s],{that:d,AS_ENTRIES:n})});var f=u.prototype,c=Gqe(e);qqe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(d){var y=d=="add"||d=="set";d in a&&!(i&&d=="clear")&&Lqe(f,d,function(w,b){var T=c(this).collection;if(!y&&i&&!Hqe(w))return d=="get"?void 0:!1;var _=T[d](w===0?0:w,b);return y?this:_})}),i||Wqe(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return Uqe(u,e,!1,!0),l[e]=u,Rqe({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},Yqe=Bv,Zqe=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:Yqe(e,n,r[n],t);return e},Xqe=Gh,Jqe=v4,BL=Zqe,Qqe=ef,eKe=L4,tKe=Um,rKe=Xh,nKe=_4,x1=x4,iKe=KZ,Lg=ni,ML=N$.fastKey,mX=Mv,LL=mX.set,pk=mX.getterFor,bX={getConstructor:function(e,r,t,n){var i=e(function(u,f){eKe(u,s),LL(u,{type:r,index:Xqe(null),first:void 0,last:void 0,size:0}),Lg||(u.size=0),tKe(f)||rKe(f,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=pk(r),a=function(u,f,c){var d=o(u),y=l(u,f),w,b;return y?y.value=c:(d.last=y={index:b=ML(f,!0),key:f,value:c,previous:w=d.last,next:void 0,removed:!1},d.first||(d.first=y),w&&(w.next=y),Lg?d.size++:u.size++,b!=="F"&&(d.index[b]=y)),u},l=function(u,f){var c=o(u),d=ML(f),y;if(d!=="F")return c.index[d];for(y=c.first;y;y=y.next)if(y.key==f)return y};return BL(s,{clear:function(){for(var f=this,c=o(f),d=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete d[y.index],y=y.next;c.first=c.last=void 0,Lg?c.size=0:f.size=0},delete:function(u){var f=this,c=o(f),d=l(f,u);if(d){var y=d.next,w=d.previous;delete c.index[d.index],d.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==d&&(c.first=y),c.last==d&&(c.last=w),Lg?c.size--:f.size--}return!!d},forEach:function(f){for(var c=o(this),d=Qqe(f,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(d(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(f){return!!l(this,f)}}),BL(s,t?{get:function(f){var c=l(this,f);return c&&c.value},set:function(f,c){return a(this,f===0?0:f,c)}}:{add:function(f){return a(this,f=f===0?0:f,f)}}),Lg&&Jqe(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=pk(r),s=pk(n);nKe(e,r,function(o,a){LL(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,x1(void 0,!0)):a=="keys"?x1(l.key,!1):a=="values"?x1(l.value,!1):x1([l.key,l.value],!1)},t?"entries":"values",!t,!0),iKe(r)}},sKe=yX,oKe=bX;sKe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},oKe);var aKe=Kr,lKe=aKe.Map,uKe=lKe,cKe=uKe;(function(e){e.exports=cKe})(uqe);var wX=Vt(KO),VO={},fKe={get exports(){return VO},set exports(e){VO=e}},hKe=Nt,dKe=Lv.some,pKe=nb,vKe=pKe("some");hKe({target:"Array",proto:!0,forced:!vKe},{some:function(r){return dKe(this,r,arguments.length>1?arguments[1]:void 0)}});var gKe=Vn,yKe=gKe("Array").some,mKe=an,bKe=yKe,vk=Array.prototype,wKe=function(e){var r=e.some;return e===vk||mKe(vk,e)&&r===vk.some?bKe:r},$Ke=wKe,_Ke=$Ke;(function(e){e.exports=_Ke})(fKe);var xKe=Vt(VO),GO={},EKe={get exports(){return GO},set exports(e){GO=e}},SKe=Vn,kKe=SKe("Array").keys,TKe=kKe,IKe=TKe,AKe=Au,OKe=Kn,CKe=an,PKe=IKe,gk=Array.prototype,NKe={DOMTokenList:!0,NodeList:!0},RKe=function(e){var r=e.keys;return e===gk||CKe(gk,e)&&r===gk.keys||OKe(NKe,AKe(e))?PKe:r};(function(e){e.exports=RKe})(EKe);var Wd=Vt(GO),YO={},DKe={get exports(){return YO},set exports(e){YO=e}},FL=DG,BKe=Math.floor,ZO=function(e,r){var t=e.length,n=BKe(t/2);return t<8?MKe(e,r):LKe(e,ZO(FL(e,0,n),r),ZO(FL(e,n),r),r)},MKe=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},LKe=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},FKe=ZO,jKe=Qc,jL=jKe.match(/firefox\/(\d+)/i),zKe=!!jL&&+jL[1],HKe=Qc,UKe=/MSIE|Trident/.test(HKe),WKe=Qc,zL=WKe.match(/AppleWebKit\/(\d+)\./),qKe=!!zL&&+zL[1],KKe=Nt,$X=Br,VKe=Ds,GKe=Bs,HL=ao,YKe=YY,UL=_l,K4=kr,ZKe=FKe,XKe=nb,WL=zKe,JKe=UKe,qL=Pv,KL=qKe,Sc=[],VL=$X(Sc.sort),QKe=$X(Sc.push),eVe=K4(function(){Sc.sort(void 0)}),tVe=K4(function(){Sc.sort(null)}),rVe=XKe("sort"),_X=!K4(function(){if(qL)return qL<70;if(!(WL&&WL>3)){if(JKe)return!0;if(KL)return KL<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Sc.push({k:t+i,v:n})}for(Sc.sort(function(s,o){return o.v-s.v}),i=0;i<Sc.length;i++)t=Sc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),nVe=eVe||!tVe||!rVe||!_X,iVe=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:UL(r)>UL(t)?1:-1}};KKe({target:"Array",proto:!0,forced:nVe},{sort:function(r){r!==void 0&&VKe(r);var t=GKe(this);if(_X)return r===void 0?VL(t):VL(t,r);var n=[],i=HL(t),s,o;for(o=0;o<i;o++)o in t&&QKe(n,t[o]);for(ZKe(n,iVe(r)),s=HL(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)YKe(t,o++);return t}});var sVe=Vn,oVe=sVe("Array").sort,aVe=an,lVe=oVe,yk=Array.prototype,uVe=function(e){var r=e.sort;return e===yk||aVe(yk,e)&&r===yk.sort?lVe:r},cVe=uVe,fVe=cVe;(function(e){e.exports=fVe})(DKe);var XO=Vt(YO),JO={},hVe={get exports(){return JO},set exports(e){JO=e}},dVe=Vn,pVe=dVe("Array").values,vVe=pVe,gVe=vVe,yVe=Au,mVe=Kn,bVe=an,wVe=gVe,mk=Array.prototype,$Ve={DOMTokenList:!0,NodeList:!0},_Ve=function(e){var r=e.values;return e===mk||bVe(mk,e)&&r===mk.values||mVe($Ve,yVe(e))?wVe:r};(function(e){e.exports=_Ve})(hVe);var GL=Vt(JO),QO={},xVe={get exports(){return QO},set exports(e){QO=e}};(function(e){e.exports=$Y})(xVe);var Ap=Vt(QO),eC={},EVe={get exports(){return eC},set exports(e){eC=e}},SVe=Vn,kVe=SVe("Array").entries,TVe=kVe,IVe=TVe,AVe=Au,OVe=Kn,CVe=an,PVe=IVe,bk=Array.prototype,NVe={DOMTokenList:!0,NodeList:!0},RVe=function(e){var r=e.entries;return e===bk||CVe(bk,e)&&r===bk.entries||OVe(NVe,AVe(e))?PVe:r};(function(e){e.exports=RVe})(EVe);var DVe=Vt(eC);let E1;const BVe=new Uint8Array(16);function MVe(){if(!E1&&(E1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!E1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E1(BVe)}const Ei=[];for(let e=0;e<256;++e)Ei.push((e+256).toString(16).slice(1));function LVe(e,r=0){return(Ei[e[r+0]]+Ei[e[r+1]]+Ei[e[r+2]]+Ei[e[r+3]]+"-"+Ei[e[r+4]]+Ei[e[r+5]]+"-"+Ei[e[r+6]]+Ei[e[r+7]]+"-"+Ei[e[r+8]]+Ei[e[r+9]]+"-"+Ei[e[r+10]]+Ei[e[r+11]]+Ei[e[r+12]]+Ei[e[r+13]]+Ei[e[r+14]]+Ei[e[r+15]]).toLowerCase()}const FVe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var YL={randomUUID:FVe};function jVe(e,r,t){if(YL.randomUUID&&!r&&!e)return YL.randomUUID();e=e||{};const n=e.random||(e.rng||MVe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return LVe(n)}function ZL(e){return typeof e=="string"||typeof e=="number"}var zVe=function(){function e(r){tx(this,e),An(this,"delay",void 0),An(this,"max",void 0),An(this,"_queue",[]),An(this,"_timeout",null),An(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(r)}return yx(e,[{key:"setOptions",value:function(t){t&&typeof t.delay<"u"&&(this.delay=t.delay),t&&typeof t.max<"u"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,n=this._extended.methods,i=0;i<n.length;i++){var s=n[i];s.original?t[s.name]=s.original:delete t[s.name]}this._extended=null}}},{key:"replace",value:function(t,n){var i=this,s=t[n];if(!s)throw new Error("Method "+n+" undefined");t[n]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=C9e(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,n;Ph(t=ZY(n=this._queue).call(n,0)).call(t,function(i){i.fn.apply(i.context||i.fn,i.args||[])})}}],[{key:"extend",value:function(t,n){var i=new e(n);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var s=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];s.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:s},i}}]),e}(),HVe=function(){function e(){tx(this,e),An(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),An(this,"subscribe",e.prototype.on),An(this,"unsubscribe",e.prototype.off)}return yx(e,[{key:"_trigger",value:function(t,n,i){var s,o;if(t==="*")throw new Error("Cannot trigger event *");Ph(s=wx(o=[]).call(o,Is(this._subscribers[t]),Is(this._subscribers["*"]))).call(s,function(a){a(t,n,i??null)})}},{key:"on",value:function(t,n){typeof n=="function"&&this._subscribers[t].push(n)}},{key:"off",value:function(t,n){var i;this._subscribers[t]=lp(i=this._subscribers[t]).call(i,function(s){return s!==n})}}]),e}(),tC={},UVe={get exports(){return tC},set exports(e){tC=e}},WVe=yX,qVe=bX;WVe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},qVe);var KVe=Kr,VVe=KVe.Set,GVe=VVe,YVe=GVe;(function(e){e.exports=YVe})(UVe);var wk=Vt(tC),rC={},ZVe={get exports(){return rC},set exports(e){rC=e}},nC={},XVe={get exports(){return nC},set exports(e){nC=e}},JVe=S4,QVe=JVe,eGe=QVe,tGe=eGe,rGe=tGe,nGe=rGe,iGe=nGe,sGe=iGe;(function(e){e.exports=sGe})(XVe);(function(e){e.exports=nC})(ZVe);var $k=Vt(rC),xX;function tl(e,r){var t=typeof bx<"u"&&sb(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=oGe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function oGe(e,r){var t;if(e){if(typeof e=="string")return XL(e,r);var n=$x(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return k4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XL(e,r)}}function XL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}xX=Ap;var JL=function(){function e(r){tx(this,e),An(this,"_pairs",void 0),this._pairs=r}return yx(e,[{key:xX,value:Es.mark(function r(){var t,n,i,s,o;return Es.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=tl(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=_s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:Es.mark(function r(){var t,n,i,s,o;return Es.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=tl(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=_s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:Es.mark(function r(){var t,n,i,s;return Es.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=tl(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=_s(n.value,1),s=i[0],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:Es.mark(function r(){var t,n,i,s;return Es.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=tl(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=_s(n.value,2),s=i[1],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return ga(t=Is(this._pairs)).call(t,function(n){return n[0]})}},{key:"toItemArray",value:function(){var t;return ga(t=Is(this._pairs)).call(t,function(n){return n[1]})}},{key:"toEntryArray",value:function(){return Is(this._pairs)}},{key:"toObjectMap",value:function(){var t=a9e(null),n=tl(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=_s(i.value,2),o=s[0],a=s[1];t[o]=a}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"toMap",value:function(){return new wX(this._pairs)}},{key:"toIdSet",value:function(){return new wk(this.toIdArray())}},{key:"toItemSet",value:function(){return new wk(this.toItemArray())}},{key:"cache",value:function(){return new e(Is(this._pairs))}},{key:"distinct",value:function(t){var n=new wk,i=tl(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=_s(s.value,2),a=o[0],l=o[1];n.add(t(l,a))}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e(An({},Ap,Es.mark(function i(){var s,o,a,l,u;return Es.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=tl(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=10;break}if(a=_s(o.value,2),l=a[0],u=a[1],!t(u,l)){c.next=8;break}return c.next=8,[l,u];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),s.e(c.t0);case 15:return c.prev=15,s.f(),c.finish(15);case 18:case"end":return c.stop()}},i,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var n=tl(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=_s(i.value,2),o=s[0],a=s[1];t(a,o)}}catch(l){n.e(l)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e(An({},Ap,Es.mark(function i(){var s,o,a,l,u;return Es.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=tl(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=9;break}return a=_s(o.value,2),l=a[0],u=a[1],c.next=7,[l,t(u,l)];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),s.e(c.t0);case 14:return c.prev=14,s.f(),c.finish(14);case 17:case"end":return c.stop()}},i,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var n=$k(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=_s(i.value,2),l=a[0],u=a[1],f=t(u,l);f>o&&(o=f,s=u)}return s}},{key:"min",value:function(t){var n=$k(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=_s(i.value,2),l=a[0],u=a[1],f=t(u,l);f<o&&(o=f,s=u)}return s}},{key:"reduce",value:function(t,n){var i=tl(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=_s(s.value,2),a=o[0],l=o[1];n=t(n,l,a)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"sort",value:function(t){var n=this;return new e(An({},Ap,function(){var i;return $k(XO(i=Is(n._pairs)).call(i,function(s,o){var a=_s(s,2),l=a[0],u=a[1],f=_s(o,2),c=f[0],d=f[1];return t(u,d,l,c)}))}))}}]),e}();function QL(e,r){var t=I4(e);if(h7){var n=h7(e);r&&(n=lp(n).call(n,function(i){return LY(e,i).enumerable})),t.push.apply(t,n)}return t}function eF(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Ph(t=QL(Object(i),!0)).call(t,function(s){An(e,s,i[s])}):d7?h8e(e,d7(i)):Ph(n=QL(Object(i))).call(n,function(s){p8e(e,s,LY(i,s))})}return e}function _k(e,r){var t=typeof bx<"u"&&sb(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=aGe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function aGe(e,r){var t;if(e){if(typeof e=="string")return tF(e,r);var n=$x(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return k4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tF(e,r)}}function tF(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function lGe(e){var r=uGe();return function(){var n=A$(e),i;if(r){var s=A$(this).constructor;i=gw(n,arguments,s)}else i=n.apply(this,arguments);return kze(this,i)}}function uGe(){if(typeof Reflect>"u"||!gw||gw.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(gw(Boolean,[],function(){})),!0}catch{return!1}}function cGe(e,r){return e[r]==null&&(e[r]=jVe()),e}var xa=function(e){Sze(t,e);var r=lGe(t);function t(n,i){var s;return tx(this,t),s=r.call(this),An(Rf(s),"flush",void 0),An(Rf(s),"length",void 0),An(Rf(s),"_options",void 0),An(Rf(s),"_data",void 0),An(Rf(s),"_idProp",void 0),An(Rf(s),"_queue",null),n&&!Vs(n)&&(i=n,n=[]),s._options=i||{},s._data=new wX,s.length=0,s._idProp=s._options.fieldId||"id",n&&n.length&&s.add(n),s.setOptions(i),s}return yx(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=zVe.extend(this,{replace:["add","update","remove"]})),i.queue&&Ai(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,s){var o=this,a=[],l;if(Vs(i)){var u=ga(i).call(i,function(d){return d[o._idProp]});if(xKe(u).call(u,function(d){return o._data.has(d)}))throw new Error("A duplicate id was found in the parameter array.");for(var f=0,c=i.length;f<c;f++)l=this._addItem(i[f]),a.push(l)}else if(i&&Ai(i)==="object")l=this._addItem(i),a.push(l);else throw new Error("Unknown dataType");return a.length&&this._trigger("add",{items:a},s),a}},{key:"update",value:function(i,s){var o=this,a=[],l=[],u=[],f=[],c=this._idProp,d=function(_){var A=_[c];if(A!=null&&o._data.has(A)){var x=_,I=aLe({},o._data.get(A)),O=o._updateItem(x);l.push(O),f.push(x),u.push(I)}else{var C=o._addItem(_);a.push(C)}};if(Vs(i))for(var y=0,w=i.length;y<w;y++)i[y]&&Ai(i[y])==="object"?d(i[y]):console.warn("Ignoring input item, which is not an object at index "+y);else if(i&&Ai(i)==="object")d(i);else throw new Error("Unknown dataType");if(a.length&&this._trigger("add",{items:a},s),l.length){var b={items:l,oldData:u,data:f};this._trigger("update",b,s)}return wx(a).call(a,l)}},{key:"updateOnly",value:function(i,s){var o,a=this;Vs(i)||(i=[i]);var l=ga(o=ga(i).call(i,function(f){var c=a._data.get(f[a._idProp]);if(c==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:c,update:f}})).call(o,function(f){var c=f.oldData,d=f.update,y=c[a._idProp],w=Dje(c,d);return a._data.set(y,w),{id:y,oldData:c,updatedData:w}});if(l.length){var u={items:ga(l).call(l,function(f){return f.id}),oldData:ga(l).call(l,function(f){return f.oldData}),data:ga(l).call(l,function(f){return f.updatedData})};return this._trigger("update",u,s),u.items}else return[]}},{key:"get",value:function(i,s){var o=void 0,a=void 0,l=void 0;ZL(i)?(o=i,l=s):Vs(i)?(a=i,l=s):l=i;var u=l&&l.returnType==="Object"?"Object":"Array",f=l&&lp(l),c=[],d=void 0,y=void 0,w=void 0;if(o!=null)d=this._data.get(o),d&&f&&!f(d)&&(d=void 0);else if(a!=null)for(var b=0,T=a.length;b<T;b++)d=this._data.get(a[b]),d!=null&&(!f||f(d))&&c.push(d);else{var _;y=Is(Wd(_=this._data).call(_));for(var A=0,x=y.length;A<x;A++)w=y[A],d=this._data.get(w),d!=null&&(!f||f(d))&&c.push(d)}if(l&&l.order&&o==null&&this._sort(c,l.order),l&&l.fields){var I=l.fields;if(o!=null&&d!=null)d=this._filterFields(d,I);else for(var O=0,C=c.length;O<C;O++)c[O]=this._filterFields(c[O],I)}if(u=="Object"){for(var g={},M=0,B=c.length;M<B;M++){var z=c[M],V=z[this._idProp];g[V]=z}return g}else if(o!=null){var ne;return(ne=d)!==null&&ne!==void 0?ne:null}else return c}},{key:"getIds",value:function(i){var s=this._data,o=i&&lp(i),a=i&&i.order,l=Is(Wd(s).call(s)),u=[];if(o)if(a){for(var f=[],c=0,d=l.length;c<d;c++){var y=l[c],w=this._data.get(y);w!=null&&o(w)&&f.push(w)}this._sort(f,a);for(var b=0,T=f.length;b<T;b++)u.push(f[b][this._idProp])}else for(var _=0,A=l.length;_<A;_++){var x=l[_],I=this._data.get(x);I!=null&&o(I)&&u.push(I[this._idProp])}else if(a){for(var O=[],C=0,g=l.length;C<g;C++){var M=l[C];O.push(s.get(M))}this._sort(O,a);for(var B=0,z=O.length;B<z;B++)u.push(O[B][this._idProp])}else for(var V=0,ne=l.length;V<ne;V++){var re=l[V],J=s.get(re);J!=null&&u.push(J[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,s){var o=s&&lp(s),a=this._data,l=Is(Wd(a).call(a));if(s&&s.order)for(var u=this.get(s),f=0,c=u.length;f<c;f++){var d=u[f],y=d[this._idProp];i(d,y)}else for(var w=0,b=l.length;w<b;w++){var T=l[w],_=this._data.get(T);_!=null&&(!o||o(_))&&i(_,T)}}},{key:"map",value:function(i,s){for(var o=s&&lp(s),a=[],l=this._data,u=Is(Wd(l).call(l)),f=0,c=u.length;f<c;f++){var d=u[f],y=this._data.get(d);y!=null&&(!o||o(y))&&a.push(i(y,d))}return s&&s.order&&this._sort(a,s.order),a}},{key:"_filterFields",value:function(i,s){var o;return i&&jDe(o=Vs(s)?s:I4(s)).call(o,function(a,l){return a[l]=i[l],a},{})}},{key:"_sort",value:function(i,s){if(typeof s=="string"){var o=s;XO(i).call(i,function(a,l){var u=a[o],f=l[o];return u>f?1:u<f?-1:0})}else if(typeof s=="function")XO(i).call(i,s);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,s){for(var o=[],a=[],l=Vs(i)?i:[i],u=0,f=l.length;u<f;u++){var c=this._remove(l[u]);if(c){var d=c[this._idProp];d!=null&&(o.push(d),a.push(c))}}return o.length&&this._trigger("remove",{items:o,oldData:a},s),o}},{key:"_remove",value:function(i){var s;if(ZL(i)?s=i:i&&Ai(i)==="object"&&(s=i[this._idProp]),s!=null&&this._data.has(s)){var o=this._data.get(s)||null;return this._data.delete(s),--this.length,o}return null}},{key:"clear",value:function(i){for(var s,o=Is(Wd(s=this._data).call(s)),a=[],l=0,u=o.length;l<u;l++)a.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:a},i),o}},{key:"max",value:function(i){var s,o=null,a=null,l=_k(GL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=f[i];typeof c=="number"&&(a==null||c>a)&&(o=f,a=c)}}catch(d){l.e(d)}finally{l.f()}return o||null}},{key:"min",value:function(i){var s,o=null,a=null,l=_k(GL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=f[i];typeof c=="number"&&(a==null||c<a)&&(o=f,a=c)}}catch(d){l.e(d)}finally{l.f()}return o||null}},{key:"distinct",value:function(i){for(var s=this._data,o=Is(Wd(s).call(s)),a=[],l=0,u=0,f=o.length;u<f;u++){for(var c=o[u],d=s.get(c),y=d[i],w=!1,b=0;b<l;b++)if(a[b]==y){w=!0;break}!w&&y!==void 0&&(a[l]=y,l++)}return a}},{key:"_addItem",value:function(i){var s=cGe(i,this._idProp),o=s[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,s),++this.length,o}},{key:"_updateItem",value:function(i){var s=i[this._idProp];if(s==null)throw new Error("Cannot update item: item has no id (item: "+d9e(i)+")");var o=this._data.get(s);if(!o)throw new Error("Cannot update item: no item with id "+s+" found");return this._data.set(s,eF(eF({},o),i)),s}},{key:"stream",value:function(i){if(i){var s=this._data;return new JL(An({},Ap,Es.mark(function a(){var l,u,f,c;return Es.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:l=_k(i),y.prev=1,l.s();case 3:if((u=l.n()).done){y.next=11;break}if(f=u.value,c=s.get(f),c==null){y.next=9;break}return y.next=9,[f,c];case 9:y.next=3;break;case 11:y.next=16;break;case 13:y.prev=13,y.t0=y.catch(1),l.e(y.t0);case 16:return y.prev=16,l.f(),y.finish(16);case 19:case"end":return y.stop()}},a,null,[[1,13,16,19]])})))}else{var o;return new JL(An({},Ap,TY(o=DVe(this._data)).call(o,this._data)))}}}]),t}(HVe);function fGe(e,r){return Ai(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof Ph(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ga(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function EX(e,r){return Ai(r)==="object"&&r!==null&&e===r.idProp&&typeof Ph(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ga(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&fGe(e,r.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.6
 * @date    2023-03-23T21:31:19.223Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var iC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sC={},hGe={get exports(){return sC},set exports(e){sC=e}},S1=function(e){return e&&e.Math==Math&&e},Gn=S1(typeof globalThis=="object"&&globalThis)||S1(typeof window=="object"&&window)||S1(typeof self=="object"&&self)||S1(typeof iC=="object"&&iC)||function(){return this}()||Function("return this")(),Tr=function(e){try{return!!e()}catch{return!0}},dGe=Tr,db=!dGe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),pGe=db,SX=Function.prototype,rF=SX.apply,nF=SX.call,pb=typeof Reflect=="object"&&Reflect.apply||(pGe?nF.bind(rF):function(){return nF.apply(rF,arguments)}),kX=db,TX=Function.prototype,oC=TX.call,vGe=kX&&TX.bind.bind(oC,oC),Ir=kX?vGe:function(e){return function(){return oC.apply(e,arguments)}},IX=Ir,gGe=IX({}.toString),yGe=IX("".slice),Cu=function(e){return yGe(gGe(e),8,-1)},mGe=Cu,bGe=Ir,V4=function(e){if(mGe(e)==="Function")return bGe(e)},aC=typeof document=="object"&&document.all,wGe=typeof aC>"u"&&aC!==void 0,AX={all:aC,IS_HTMLDDA:wGe},OX=AX,$Ge=OX.all,bi=OX.IS_HTMLDDA?function(e){return typeof e=="function"||e===$Ge}:function(e){return typeof e=="function"},Uv={},_Ge=Tr,ii=!_Ge(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),xGe=db,k1=Function.prototype.call,lo=xGe?k1.bind(k1):function(){return k1.apply(k1,arguments)},vb={},CX={}.propertyIsEnumerable,PX=Object.getOwnPropertyDescriptor,EGe=PX&&!CX.call({1:2},1);vb.f=EGe?function(r){var t=PX(this,r);return!!t&&t.enumerable}:CX;var gb=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},SGe=Ir,kGe=Tr,TGe=Cu,xk=Object,IGe=SGe("".split),kx=kGe(function(){return!xk("z").propertyIsEnumerable(0)})?function(e){return TGe(e)=="String"?IGe(e,""):xk(e)}:xk,yb=function(e){return e==null},AGe=yb,OGe=TypeError,mb=function(e){if(AGe(e))throw OGe("Can't call method on "+e);return e},CGe=kx,PGe=mb,Da=function(e){return CGe(PGe(e))},iF=bi,NX=AX,NGe=NX.all,wi=NX.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:iF(e)||e===NGe}:function(e){return typeof e=="object"?e!==null:iF(e)},xr={},Ek=xr,Sk=Gn,RGe=bi,sF=function(e){return RGe(e)?e:void 0},Xo=function(e,r){return arguments.length<2?sF(Ek[e])||sF(Sk[e]):Ek[e]&&Ek[e][r]||Sk[e]&&Sk[e][r]},DGe=Ir,Bn=DGe({}.isPrototypeOf),bb=typeof navigator<"u"&&String(navigator.userAgent)||"",RX=Gn,kk=bb,oF=RX.process,aF=RX.Deno,lF=oF&&oF.versions||aF&&aF.version,uF=lF&&lF.v8,ya,R$;uF&&(ya=uF.split("."),R$=ya[0]>0&&ya[0]<4?1:+(ya[0]+ya[1]));!R$&&kk&&(ya=kk.match(/Edge\/(\d+)/),(!ya||ya[1]>=74)&&(ya=kk.match(/Chrome\/(\d+)/),ya&&(R$=+ya[1])));var wb=R$,cF=wb,BGe=Tr,Wv=!!Object.getOwnPropertySymbols&&!BGe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&cF&&cF<41}),MGe=Wv,DX=MGe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",LGe=Xo,FGe=bi,jGe=Bn,zGe=DX,HGe=Object,$b=zGe?function(e){return typeof e=="symbol"}:function(e){var r=LGe("Symbol");return FGe(r)&&jGe(r.prototype,HGe(e))},UGe=String,qv=function(e){try{return UGe(e)}catch{return"Object"}},WGe=bi,qGe=qv,KGe=TypeError,Jh=function(e){if(WGe(e))return e;throw KGe(qGe(e)+" is not a function")},VGe=Jh,GGe=yb,G4=function(e,r){var t=e[r];return GGe(t)?void 0:VGe(t)},Tk=lo,Ik=bi,Ak=wi,YGe=TypeError,ZGe=function(e,r){var t,n;if(r==="string"&&Ik(t=e.toString)&&!Ak(n=Tk(t,e))||Ik(t=e.valueOf)&&!Ak(n=Tk(t,e))||r!=="string"&&Ik(t=e.toString)&&!Ak(n=Tk(t,e)))return n;throw YGe("Can't convert object to primitive value")},qc={},XGe={get exports(){return qc},set exports(e){qc=e}},fF=Gn,JGe=Object.defineProperty,QGe=function(e,r){try{JGe(fF,e,{value:r,configurable:!0,writable:!0})}catch{fF[e]=r}return r},eYe=Gn,tYe=QGe,hF="__core-js_shared__",rYe=eYe[hF]||tYe(hF,{}),Y4=rYe,dF=Y4;(XGe.exports=function(e,r){return dF[e]||(dF[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var nYe=mb,iYe=Object,uo=function(e){return iYe(nYe(e))},sYe=Ir,oYe=uo,aYe=sYe({}.hasOwnProperty),$i=Object.hasOwn||function(r,t){return aYe(oYe(r),t)},lYe=Ir,uYe=0,cYe=Math.random(),fYe=lYe(1 .toString),Tx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+fYe(++uYe+cYe,36)},hYe=Gn,dYe=qc,pF=$i,pYe=Tx,vYe=Wv,gYe=DX,dp=hYe.Symbol,Ok=dYe("wks"),yYe=gYe?dp.for||dp:dp&&dp.withoutSetter||pYe,Mn=function(e){return pF(Ok,e)||(Ok[e]=vYe&&pF(dp,e)?dp[e]:yYe("Symbol."+e)),Ok[e]},mYe=lo,vF=wi,gF=$b,bYe=G4,wYe=ZGe,$Ye=Mn,_Ye=TypeError,xYe=$Ye("toPrimitive"),EYe=function(e,r){if(!vF(e)||gF(e))return e;var t=bYe(e,xYe),n;if(t){if(r===void 0&&(r="default"),n=mYe(t,e,r),!vF(n)||gF(n))return n;throw _Ye("Can't convert object to primitive value")}return r===void 0&&(r="number"),wYe(e,r)},SYe=EYe,kYe=$b,Ix=function(e){var r=SYe(e,"string");return kYe(r)?r:r+""},TYe=Gn,yF=wi,lC=TYe.document,IYe=yF(lC)&&yF(lC.createElement),BX=function(e){return IYe?lC.createElement(e):{}},AYe=ii,OYe=Tr,CYe=BX,MX=!AYe&&!OYe(function(){return Object.defineProperty(CYe("div"),"a",{get:function(){return 7}}).a!=7}),PYe=ii,NYe=lo,RYe=vb,DYe=gb,BYe=Da,MYe=Ix,LYe=$i,FYe=MX,mF=Object.getOwnPropertyDescriptor;Uv.f=PYe?mF:function(r,t){if(r=BYe(r),t=MYe(t),FYe)try{return mF(r,t)}catch{}if(LYe(r,t))return DYe(!NYe(RYe.f,r,t),r[t])};var jYe=Tr,zYe=bi,HYe=/#|\.prototype\./,_b=function(e,r){var t=WYe[UYe(e)];return t==KYe?!0:t==qYe?!1:zYe(r)?jYe(r):!!r},UYe=_b.normalize=function(e){return String(e).replace(HYe,".").toLowerCase()},WYe=_b.data={},qYe=_b.NATIVE="N",KYe=_b.POLYFILL="P",VYe=_b,bF=V4,GYe=Jh,YYe=db,ZYe=bF(bF.bind),xb=function(e,r){return GYe(e),r===void 0?e:YYe?ZYe(e,r):function(){return e.apply(r,arguments)}},Jo={},XYe=ii,JYe=Tr,LX=XYe&&JYe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),QYe=wi,eZe=String,tZe=TypeError,co=function(e){if(QYe(e))return e;throw tZe(eZe(e)+" is not an object")},rZe=ii,nZe=MX,iZe=LX,T1=co,wF=Ix,sZe=TypeError,Ck=Object.defineProperty,oZe=Object.getOwnPropertyDescriptor,Pk="enumerable",Nk="configurable",Rk="writable";Jo.f=rZe?iZe?function(r,t,n){if(T1(r),t=wF(t),T1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&Rk in n&&!n[Rk]){var i=oZe(r,t);i&&i[Rk]&&(r[t]=n.value,n={configurable:Nk in n?n[Nk]:i[Nk],enumerable:Pk in n?n[Pk]:i[Pk],writable:!1})}return Ck(r,t,n)}:Ck:function(r,t,n){if(T1(r),t=wF(t),T1(n),nZe)try{return Ck(r,t,n)}catch{}if("get"in n||"set"in n)throw sZe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var aZe=ii,lZe=Jo,uZe=gb,Kv=aZe?function(e,r,t){return lZe.f(e,r,uZe(1,t))}:function(e,r,t){return e[r]=t,e},I1=Gn,cZe=pb,fZe=V4,hZe=bi,dZe=Uv.f,pZe=VYe,qd=xr,vZe=xb,Kd=Kv,$F=$i,gZe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return cZe(e,this,arguments)};return r.prototype=e.prototype,r},zt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?I1:i?I1[t]:(I1[t]||{}).prototype,a=n?qd:qd[t]||Kd(qd,t,{})[t],l=a.prototype,u,f,c,d,y,w,b,T,_;for(d in r)u=pZe(n?d:t+(i?".":"#")+d,e.forced),f=!u&&o&&$F(o,d),w=a[d],f&&(e.dontCallGetSet?(_=dZe(o,d),b=_&&_.value):b=o[d]),y=f&&b?b:r[d],!(f&&typeof w==typeof y)&&(e.bind&&f?T=vZe(y,I1):e.wrap&&f?T=gZe(y):s&&hZe(y)?T=fZe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&Kd(T,"sham",!0),Kd(a,d,T),s&&(c=t+"Prototype",$F(qd,c)||Kd(qd,c,{}),Kd(qd[c],d,y),e.real&&l&&(u||!l[d])&&Kd(l,d,y)))},yZe=Math.ceil,mZe=Math.floor,bZe=Math.trunc||function(r){var t=+r;return(t>0?mZe:yZe)(t)},wZe=bZe,Ax=function(e){var r=+e;return r!==r||r===0?0:wZe(r)},$Ze=Ax,_Ze=Math.max,xZe=Math.min,Eb=function(e,r){var t=$Ze(e);return t<0?_Ze(t+r,0):xZe(t,r)},EZe=Ax,SZe=Math.min,kZe=function(e){return e>0?SZe(EZe(e),9007199254740991):0},TZe=kZe,Ba=function(e){return TZe(e.length)},IZe=Da,AZe=Eb,OZe=Ba,_F=function(e){return function(r,t,n){var i=IZe(r),s=OZe(i),o=AZe(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},Z4={includes:_F(!0),indexOf:_F(!1)},Sb={},CZe=Ir,Dk=$i,PZe=Da,NZe=Z4.indexOf,RZe=Sb,xF=CZe([].push),FX=function(e,r){var t=PZe(e),n=0,i=[],s;for(s in t)!Dk(RZe,s)&&Dk(t,s)&&xF(i,s);for(;r.length>n;)Dk(t,s=r[n++])&&(~NZe(i,s)||xF(i,s));return i},X4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],DZe=FX,BZe=X4,kb=Object.keys||function(r){return DZe(r,BZe)},Tb={};Tb.f=Object.getOwnPropertySymbols;var EF=ii,MZe=Ir,LZe=lo,FZe=Tr,Bk=kb,jZe=Tb,zZe=vb,HZe=uo,UZe=kx,Vd=Object.assign,SF=Object.defineProperty,WZe=MZe([].concat),qZe=!Vd||FZe(function(){if(EF&&Vd({b:1},Vd(SF({},"a",{enumerable:!0,get:function(){SF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Vd({},e)[t]!=7||Bk(Vd({},r)).join("")!=n})?function(r,t){for(var n=HZe(r),i=arguments.length,s=1,o=jZe.f,a=zZe.f;i>s;)for(var l=UZe(arguments[s++]),u=o?WZe(Bk(l),o(l)):Bk(l),f=u.length,c=0,d;f>c;)d=u[c++],(!EF||LZe(a,l,d))&&(n[d]=l[d]);return n}:Vd,KZe=zt,kF=qZe;KZe({target:"Object",stat:!0,arity:2,forced:Object.assign!==kF},{assign:kF});var VZe=xr,GZe=VZe.Object.assign,YZe=GZe,ZZe=YZe;(function(e){e.exports=ZZe})(hGe);var Wn=Pt(sC),uC={},XZe={get exports(){return uC},set exports(e){uC=e}},JZe=Ir,Ox=JZe([].slice),jX=Ir,QZe=Jh,eXe=wi,tXe=$i,TF=Ox,rXe=db,zX=Function,nXe=jX([].concat),iXe=jX([].join),Mk={},sXe=function(e,r,t){if(!tXe(Mk,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";Mk[r]=zX("C,a","return new C("+iXe(n,",")+")")}return Mk[r](e,t)},HX=rXe?zX.bind:function(r){var t=QZe(this),n=t.prototype,i=TF(arguments,1),s=function(){var a=nXe(i,TF(arguments));return this instanceof s?sXe(t,a.length,a):t.apply(r,a)};return eXe(n)&&(s.prototype=n),s},oXe=zt,IF=HX;oXe({target:"Function",proto:!0,forced:Function.bind!==IF},{bind:IF});var aXe=xr,_i=function(e){return aXe[e+"Prototype"]},lXe=_i,uXe=lXe("Function").bind,cXe=Bn,fXe=uXe,Lk=Function.prototype,hXe=function(e){var r=e.bind;return e===Lk||cXe(Lk,e)&&r===Lk.bind?fXe:r},dXe=hXe,UX=dXe;(function(e){e.exports=UX})(XZe);var nt=Pt(uC);function J4(e,r,t,n){e.beginPath(),e.arc(r,t,n,0,2*Math.PI,!1),e.closePath()}function pXe(e,r,t,n){e.beginPath(),e.rect(r-n,t-n,n*2,n*2),e.closePath()}function vXe(e,r,t,n){e.beginPath(),n*=1.15,t+=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t-(a-o)),e.lineTo(r+s,t+o),e.lineTo(r-s,t+o),e.lineTo(r,t-(a-o)),e.closePath()}function gXe(e,r,t,n){e.beginPath(),n*=1.15,t-=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t+(a-o)),e.lineTo(r+s,t-o),e.lineTo(r-s,t-o),e.lineTo(r,t+(a-o)),e.closePath()}function yXe(e,r,t,n){e.beginPath(),n*=.82,t+=.1*n;for(var i=0;i<10;i++){var s=i%2===0?n*1.3:n*.5;e.lineTo(r+s*Math.sin(i*2*Math.PI/10),t-s*Math.cos(i*2*Math.PI/10))}e.closePath()}function mXe(e,r,t,n){e.beginPath(),e.lineTo(r,t+n),e.lineTo(r+n,t),e.lineTo(r,t-n),e.lineTo(r-n,t),e.closePath()}function WX(e,r,t,n,i,s){var o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),e.beginPath(),e.moveTo(r+s,t),e.lineTo(r+n-s,t),e.arc(r+n-s,t+s,s,o*270,o*360,!1),e.lineTo(r+n,t+i-s),e.arc(r+n-s,t+i-s,s,0,o*90,!1),e.lineTo(r+s,t+i),e.arc(r+s,t+i-s,s,o*90,o*180,!1),e.lineTo(r,t+s),e.arc(r+s,t+s,s,o*180,o*270,!1),e.closePath()}function cC(e,r,t,n,i){var s=.5522848,o=n/2*s,a=i/2*s,l=r+n,u=t+i,f=r+n/2,c=t+i/2;e.beginPath(),e.moveTo(r,c),e.bezierCurveTo(r,c-a,f-o,t,f,t),e.bezierCurveTo(f+o,t,l,c-a,l,c),e.bezierCurveTo(l,c+a,f+o,u,f,u),e.bezierCurveTo(f-o,u,r,c+a,r,c),e.closePath()}function qX(e,r,t,n,i){var s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,f=a/2*l,c=r+o,d=t+a,y=r+o/2,w=t+a/2,b=t+(i-a/2),T=t+i;e.beginPath(),e.moveTo(c,w),e.bezierCurveTo(c,w+f,y+u,d,y,d),e.bezierCurveTo(y-u,d,r,w+f,r,w),e.bezierCurveTo(r,w-f,y-u,t,y,t),e.bezierCurveTo(y+u,t,c,w-f,c,w),e.lineTo(c,b),e.bezierCurveTo(c,b+f,y+u,T,y,T),e.bezierCurveTo(y-u,T,r,b+f,r,b),e.lineTo(r,w)}function KX(e,r,t,n,i,s){e.beginPath(),e.moveTo(r,t);for(var o=s.length,a=n-r,l=i-t,u=l/a,f=Math.sqrt(a*a+l*l),c=0,d=!0,y=0,w=+s[0];f>=.1;)w=+s[c++%o],w>f&&(w=f),y=Math.sqrt(w*w/(1+u*u)),y=a<0?-y:y,r+=y,t+=u*y,d===!0?e.lineTo(r,t):e.moveTo(r,t),f-=w,d=!d}function bXe(e,r,t,n){e.beginPath();var i=6,s=Math.PI*2/i;e.moveTo(r+n,t);for(var o=1;o<i;o++)e.lineTo(r+n*Math.cos(s*o),t+n*Math.sin(s*o));e.closePath()}var AF={circle:J4,dashedLine:KX,database:qX,diamond:mXe,ellipse:cC,ellipse_vis:cC,hexagon:bXe,roundRect:WX,square:pXe,star:yXe,triangle:vXe,triangleDown:gXe};function wXe(e){return Object.prototype.hasOwnProperty.call(AF,e)?AF[e]:function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(r,n)}}var fC={},$Xe={get exports(){return fC},set exports(e){fC=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})($Xe);var VX=fC,hC={},_Xe={get exports(){return hC},set exports(e){hC=e}},xXe=Mn,EXe=xXe("toStringTag"),GX={};GX[EXe]="z";var Q4=String(GX)==="[object z]",SXe=Q4,kXe=bi,ww=Cu,TXe=Mn,IXe=TXe("toStringTag"),AXe=Object,OXe=ww(function(){return arguments}())=="Arguments",CXe=function(e,r){try{return e[r]}catch{}},Qh=SXe?ww:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=CXe(r=AXe(e),IXe))=="string"?t:OXe?ww(r):(n=ww(r))=="Object"&&kXe(r.callee)?"Arguments":n},PXe=Qh,NXe=String,xl=function(e){if(PXe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return NXe(e)},eN=Ir,RXe=Ax,DXe=xl,BXe=mb,MXe=eN("".charAt),OF=eN("".charCodeAt),LXe=eN("".slice),CF=function(e){return function(r,t){var n=DXe(BXe(r)),i=RXe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=OF(n,i),o<55296||o>56319||i+1===s||(a=OF(n,i+1))<56320||a>57343?e?MXe(n,i):o:e?LXe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},FXe={codeAt:CF(!1),charAt:CF(!0)},jXe=Gn,zXe=bi,PF=jXe.WeakMap,YX=zXe(PF)&&/native code/.test(String(PF)),HXe=qc,UXe=Tx,NF=HXe("keys"),Cx=function(e){return NF[e]||(NF[e]=UXe(e))},WXe=YX,ZX=Gn,qXe=wi,KXe=Kv,Fk=$i,jk=Y4,VXe=Cx,GXe=Sb,RF="Object already initialized",dC=ZX.TypeError,YXe=ZX.WeakMap,D$,um,B$,ZXe=function(e){return B$(e)?um(e):D$(e,{})},XXe=function(e){return function(r){var t;if(!qXe(r)||(t=um(r)).type!==e)throw dC("Incompatible receiver, "+e+" required");return t}};if(WXe||jk.state){var rl=jk.state||(jk.state=new YXe);rl.get=rl.get,rl.has=rl.has,rl.set=rl.set,D$=function(e,r){if(rl.has(e))throw dC(RF);return r.facade=e,rl.set(e,r),r},um=function(e){return rl.get(e)||{}},B$=function(e){return rl.has(e)}}else{var Gd=VXe("state");GXe[Gd]=!0,D$=function(e,r){if(Fk(e,Gd))throw dC(RF);return r.facade=e,KXe(e,Gd,r),r},um=function(e){return Fk(e,Gd)?e[Gd]:{}},B$=function(e){return Fk(e,Gd)}}var ed={set:D$,get:um,has:B$,enforce:ZXe,getterFor:XXe},pC=ii,JXe=$i,XX=Function.prototype,QXe=pC&&Object.getOwnPropertyDescriptor,tN=JXe(XX,"name"),eJe=tN&&(function(){}).name==="something",tJe=tN&&(!pC||pC&&QXe(XX,"name").configurable),JX={EXISTS:tN,PROPER:eJe,CONFIGURABLE:tJe},Px={},rJe=ii,nJe=LX,iJe=Jo,sJe=co,oJe=Da,aJe=kb;Px.f=rJe&&!nJe?Object.defineProperties:function(r,t){sJe(r);for(var n=oJe(t),i=aJe(t),s=i.length,o=0,a;s>o;)iJe.f(r,a=i[o++],n[a]);return r};var lJe=Xo,uJe=lJe("document","documentElement"),cJe=co,fJe=Px,DF=X4,hJe=Sb,dJe=uJe,pJe=BX,vJe=Cx,BF=">",MF="<",vC="prototype",gC="script",QX=vJe("IE_PROTO"),zk=function(){},eJ=function(e){return MF+gC+BF+e+MF+"/"+gC+BF},LF=function(e){e.write(eJ("")),e.close();var r=e.parentWindow.Object;return e=null,r},gJe=function(){var e=pJe("iframe"),r="java"+gC+":",t;return e.style.display="none",dJe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(eJ("document.F=Object")),t.close(),t.F},A1,$w=function(){try{A1=new ActiveXObject("htmlfile")}catch{}$w=typeof document<"u"?document.domain&&A1?LF(A1):gJe():LF(A1);for(var e=DF.length;e--;)delete $w[vC][DF[e]];return $w()};hJe[QX]=!0;var Vv=Object.create||function(r,t){var n;return r!==null?(zk[vC]=cJe(r),n=new zk,zk[vC]=null,n[QX]=r):n=$w(),t===void 0?n:fJe.f(n,t)},yJe=Tr,tJ=!yJe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),mJe=$i,bJe=bi,wJe=uo,$Je=Cx,_Je=tJ,FF=$Je("IE_PROTO"),yC=Object,xJe=yC.prototype,Nx=_Je?yC.getPrototypeOf:function(e){var r=wJe(e);if(mJe(r,FF))return r[FF];var t=r.constructor;return bJe(t)&&r instanceof t?t.prototype:r instanceof yC?xJe:null},EJe=Kv,Ib=function(e,r,t,n){return n&&n.enumerable?e[r]=t:EJe(e,r,t),e},SJe=Tr,kJe=bi,TJe=wi,IJe=Vv,jF=Nx,AJe=Ib,OJe=Mn,mC=OJe("iterator"),rJ=!1,uu,Hk,Uk;[].keys&&(Uk=[].keys(),"next"in Uk?(Hk=jF(jF(Uk)),Hk!==Object.prototype&&(uu=Hk)):rJ=!0);var CJe=!TJe(uu)||SJe(function(){var e={};return uu[mC].call(e)!==e});CJe?uu={}:uu=IJe(uu);kJe(uu[mC])||AJe(uu,mC,function(){return this});var nJ={IteratorPrototype:uu,BUGGY_SAFARI_ITERATORS:rJ},PJe=Q4,NJe=Qh,RJe=PJe?{}.toString:function(){return"[object "+NJe(this)+"]"},DJe=Q4,BJe=Jo.f,MJe=Kv,LJe=$i,FJe=RJe,jJe=Mn,zF=jJe("toStringTag"),Gv=function(e,r,t,n){if(e){var i=t?e:e.prototype;LJe(i,zF)||BJe(i,zF,{configurable:!0,value:r}),n&&!DJe&&MJe(i,"toString",FJe)}},Yv={},zJe=nJ.IteratorPrototype,HJe=Vv,UJe=gb,WJe=Gv,qJe=Yv,KJe=function(){return this},VJe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=HJe(zJe,{next:UJe(+!n,t)}),WJe(e,i,!1,!0),qJe[i]=KJe,e},GJe=Ir,YJe=Jh,ZJe=function(e,r,t){try{return GJe(YJe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},XJe=bi,JJe=String,QJe=TypeError,eQe=function(e){if(typeof e=="object"||XJe(e))return e;throw QJe("Can't set "+JJe(e)+" as a prototype")},tQe=ZJe,rQe=co,nQe=eQe,iQe=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=tQe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return rQe(i),nQe(s),e?t(i,s):i.__proto__=s,i}}():void 0),sQe=zt,oQe=lo,aQe=JX,lQe=VJe,uQe=Nx,cQe=Gv,HF=Ib,fQe=Mn,UF=Yv,hQe=nJ,dQe=aQe.PROPER,O1=hQe.BUGGY_SAFARI_ITERATORS,Wk=fQe("iterator"),WF="keys",C1="values",qF="entries",pQe=function(){return this},rN=function(e,r,t,n,i,s,o){lQe(t,r,n);var a=function(_){if(_===i&&d)return d;if(!O1&&_ in f)return f[_];switch(_){case WF:return function(){return new t(this,_)};case C1:return function(){return new t(this,_)};case qF:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,f=e.prototype,c=f[Wk]||f["@@iterator"]||i&&f[i],d=!O1&&c||a(i),y=r=="Array"&&f.entries||c,w,b,T;if(y&&(w=uQe(y.call(new e)),w!==Object.prototype&&w.next&&(cQe(w,l,!0,!0),UF[l]=pQe)),dQe&&i==C1&&c&&c.name!==C1&&(u=!0,d=function(){return oQe(c,this)}),i)if(b={values:a(C1),keys:s?d:a(WF),entries:a(qF)},o)for(T in b)(O1||u||!(T in f))&&HF(f,T,b[T]);else sQe({target:r,proto:!0,forced:O1||u},b);return o&&f[Wk]!==d&&HF(f,Wk,d,{name:i}),UF[r]=d,b},nN=function(e,r){return{value:e,done:r}},vQe=FXe.charAt,gQe=xl,iJ=ed,yQe=rN,KF=nN,sJ="String Iterator",mQe=iJ.set,bQe=iJ.getterFor(sJ);yQe(String,"String",function(e){mQe(this,{type:sJ,string:gQe(e),index:0})},function(){var r=bQe(this),t=r.string,n=r.index,i;return n>=t.length?KF(void 0,!0):(i=vQe(t,n),r.index+=i.length,KF(i,!1))});var wQe=lo,VF=co,$Qe=G4,oJ=function(e,r,t){var n,i;VF(e);try{if(n=$Qe(e,"return"),!n){if(r==="throw")throw t;return t}n=wQe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return VF(n),t},_Qe=co,xQe=oJ,EQe=function(e,r,t,n){try{return n?r(_Qe(t)[0],t[1]):r(t)}catch(i){xQe(e,"throw",i)}},SQe=Mn,kQe=Yv,TQe=SQe("iterator"),IQe=Array.prototype,aJ=function(e){return e!==void 0&&(kQe.Array===e||IQe[TQe]===e)},AQe=Ir,OQe=bi,bC=Y4,CQe=AQe(Function.toString);OQe(bC.inspectSource)||(bC.inspectSource=function(e){return CQe(e)});var PQe=bC.inspectSource,NQe=Ir,RQe=Tr,lJ=bi,DQe=Qh,BQe=Xo,MQe=PQe,uJ=function(){},LQe=[],cJ=BQe("Reflect","construct"),iN=/^\s*(?:class|function)\b/,FQe=NQe(iN.exec),jQe=!iN.exec(uJ),Fg=function(r){if(!lJ(r))return!1;try{return cJ(uJ,LQe,r),!0}catch{return!1}},fJ=function(r){if(!lJ(r))return!1;switch(DQe(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return jQe||!!FQe(iN,MQe(r))}catch{return!0}};fJ.sham=!0;var Rx=!cJ||RQe(function(){var e;return Fg(Fg.call)||!Fg(Object)||!Fg(function(){e=!0})||e})?fJ:Fg,zQe=Ix,HQe=Jo,UQe=gb,Zv=function(e,r,t){var n=zQe(r);n in e?HQe.f(e,n,UQe(0,t)):e[n]=t},WQe=Qh,GF=G4,qQe=yb,KQe=Yv,VQe=Mn,GQe=VQe("iterator"),Dx=function(e){if(!qQe(e))return GF(e,GQe)||GF(e,"@@iterator")||KQe[WQe(e)]},YQe=lo,ZQe=Jh,XQe=co,JQe=qv,QQe=Dx,eet=TypeError,hJ=function(e,r){var t=arguments.length<2?QQe(e):r;if(ZQe(t))return XQe(YQe(t,e));throw eet(JQe(e)+" is not iterable")},tet=xb,ret=lo,net=uo,iet=EQe,set=aJ,oet=Rx,aet=Ba,YF=Zv,uet=hJ,cet=Dx,ZF=Array,fet=function(r){var t=net(r),n=oet(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=tet(s,i>2?arguments[2]:void 0));var a=cet(t),l=0,u,f,c,d,y,w;if(a&&!(this===ZF&&set(a)))for(d=uet(t,a),y=d.next,f=n?new this:[];!(c=ret(y,d)).done;l++)w=o?iet(d,s,[c.value,l],!0):c.value,YF(f,l,w);else for(u=aet(t),f=n?new this(u):ZF(u);u>l;l++)w=o?s(t[l],l):t[l],YF(f,l,w);return f.length=l,f},het=Mn,dJ=het("iterator"),pJ=!1;try{var det=0,XF={next:function(){return{done:!!det++}},return:function(){pJ=!0}};XF[dJ]=function(){return this},Array.from(XF,function(){throw 2})}catch{}var pet=function(e,r){if(!r&&!pJ)return!1;var t=!1;try{var n={};n[dJ]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},vet=zt,get=fet,yet=pet,met=!yet(function(e){Array.from(e)});vet({target:"Array",stat:!0,forced:met},{from:get});var bet=xr,wet=bet.Array.from,$et=wet,vJ=$et;(function(e){e.exports=vJ})(_Xe);var td=Pt(hC),wC={},_et={get exports(){return wC},set exports(e){wC=e}},$C={},xet={get exports(){return $C},set exports(e){$C=e}},Eet=Da,JF=Yv,gJ=ed;Jo.f;var ket=rN,P1=nN,yJ="Array Iterator",Tet=gJ.set,Iet=gJ.getterFor(yJ);ket(Array,"Array",function(e,r){Tet(this,{type:yJ,target:Eet(e),index:0,kind:r})},function(){var e=Iet(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,P1(void 0,!0)):t=="keys"?P1(n,!1):t=="values"?P1(r[n],!1):P1([n,r[n]],!1)},"values");JF.Arguments=JF.Array;var Aet=Dx,Oet=Aet,Cet={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Pet=Cet,Net=Gn,Ret=Qh,Det=Kv,QF=Yv,Bet=Mn,e9=Bet("toStringTag");for(var qk in Pet){var t9=Net[qk],Kk=t9&&t9.prototype;Kk&&Ret(Kk)!==e9&&Det(Kk,e9,qk),QF[qk]=QF.Array}var Met=Oet,Let=Met,Fet=Let,jet=Fet,zet=jet,Het=zet;(function(e){e.exports=Het})(xet);(function(e){e.exports=$C})(_et);var Pu=Pt(wC),_C={},Uet={get exports(){return _C},set exports(e){_C=e}},Ab={},Wet=FX,qet=X4,Ket=qet.concat("length","prototype");Ab.f=Object.getOwnPropertyNames||function(r){return Wet(r,Ket)};var Bx={},r9=Eb,Vet=Ba,Get=Zv,Yet=Array,Zet=Math.max,mJ=function(e,r,t){for(var n=Vet(e),i=r9(r,n),s=r9(t===void 0?n:t,n),o=Yet(Zet(s-i,0)),a=0;i<s;i++,a++)Get(o,a,e[i]);return o.length=a,o},Xet=Cu,Jet=Da,bJ=Ab.f,Qet=mJ,wJ=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ett=function(e){try{return bJ(e)}catch{return Qet(wJ)}};Bx.f=function(r){return wJ&&Xet(r)=="Window"?ett(r):bJ(Jet(r))};var ttt=Jo,sN=function(e,r,t){return ttt.f(e,r,t)},Ob={},rtt=Mn;Ob.f=rtt;var n9=xr,ntt=$i,itt=Ob,stt=Jo.f,kn=function(e){var r=n9.Symbol||(n9.Symbol={});ntt(r,e)||stt(r,e,{value:itt.f(e)})},ott=lo,att=Xo,ltt=Mn,utt=Ib,$J=function(){var e=att("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=ltt("toPrimitive");r&&!r[n]&&utt(r,n,function(i){return ott(t,this)},{arity:1})},ctt=Cu,rd=Array.isArray||function(r){return ctt(r)=="Array"},i9=rd,ftt=Rx,htt=wi,dtt=Mn,ptt=dtt("species"),s9=Array,vtt=function(e){var r;return i9(e)&&(r=e.constructor,ftt(r)&&(r===s9||i9(r.prototype))?r=void 0:htt(r)&&(r=r[ptt],r===null&&(r=void 0))),r===void 0?s9:r},gtt=vtt,oN=function(e,r){return new(gtt(e))(r===0?0:r)},ytt=xb,mtt=Ir,btt=kx,wtt=uo,$tt=Ba,_tt=oN,o9=mtt([].push),cc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,f,c){for(var d=wtt(l),y=btt(d),w=ytt(u,f),b=$tt(y),T=0,_=c||_tt,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in y)&&(x=y[T],I=w(x,T,d),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:o9(A,x)}else switch(e){case 4:return!1;case 7:o9(A,x)}return s?-1:n||i?i:A}},rf={forEach:cc(0),map:cc(1),filter:cc(2),some:cc(3),every:cc(4),find:cc(5),findIndex:cc(6),filterReject:cc(7)},Mx=zt,aN=Gn,lN=lo,xtt=Ir,ov=ii,av=Wv,Ett=Tr,hi=$i,Stt=Bn,xC=co,Lx=Da,uN=Ix,ktt=xl,EC=gb,cm=Vv,_J=kb,Ttt=Ab,xJ=Bx,Itt=Tb,EJ=Uv,SJ=Jo,Att=Px,kJ=vb,a9=Ib,Ott=sN,cN=qc,Ctt=Cx,TJ=Sb,l9=Tx,Ptt=Mn,Ntt=Ob,Rtt=kn,Dtt=$J,Btt=Gv,IJ=ed,Fx=rf.forEach,As=Ctt("hidden"),jx="Symbol",fm="prototype",Mtt=IJ.set,u9=IJ.getterFor(jx),Ea=Object[fm],mh=aN.Symbol,ty=mh&&mh[fm],Ltt=aN.TypeError,Vk=aN.QObject,AJ=EJ.f,qf=SJ.f,OJ=xJ.f,Ftt=kJ.f,CJ=xtt([].push),$u=cN("symbols"),Cb=cN("op-symbols"),jtt=cN("wks"),SC=!Vk||!Vk[fm]||!Vk[fm].findChild,kC=ov&&Ett(function(){return cm(qf({},"a",{get:function(){return qf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=AJ(Ea,r);n&&delete Ea[r],qf(e,r,t),n&&e!==Ea&&qf(Ea,r,n)}:qf,Gk=function(e,r){var t=$u[e]=cm(ty);return Mtt(t,{type:jx,tag:e,description:r}),ov||(t.description=r),t},zx=function(r,t,n){r===Ea&&zx(Cb,t,n),xC(r);var i=uN(t);return xC(n),hi($u,i)?(n.enumerable?(hi(r,As)&&r[As][i]&&(r[As][i]=!1),n=cm(n,{enumerable:EC(0,!1)})):(hi(r,As)||qf(r,As,EC(1,{})),r[As][i]=!0),kC(r,i,n)):qf(r,i,n)},fN=function(r,t){xC(r);var n=Lx(t),i=_J(n).concat(DJ(n));return Fx(i,function(s){(!ov||lN(PJ,n,s))&&zx(r,s,n[s])}),r},ztt=function(r,t){return t===void 0?cm(r):fN(cm(r),t)},PJ=function(r){var t=uN(r),n=lN(Ftt,this,t);return this===Ea&&hi($u,t)&&!hi(Cb,t)?!1:n||!hi(this,t)||!hi($u,t)||hi(this,As)&&this[As][t]?n:!0},NJ=function(r,t){var n=Lx(r),i=uN(t);if(!(n===Ea&&hi($u,i)&&!hi(Cb,i))){var s=AJ(n,i);return s&&hi($u,i)&&!(hi(n,As)&&n[As][i])&&(s.enumerable=!0),s}},RJ=function(r){var t=OJ(Lx(r)),n=[];return Fx(t,function(i){!hi($u,i)&&!hi(TJ,i)&&CJ(n,i)}),n},DJ=function(e){var r=e===Ea,t=OJ(r?Cb:Lx(e)),n=[];return Fx(t,function(i){hi($u,i)&&(!r||hi(Ea,i))&&CJ(n,$u[i])}),n};av||(mh=function(){if(Stt(ty,this))throw Ltt("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:ktt(arguments[0]),t=l9(r),n=function(i){this===Ea&&lN(n,Cb,i),hi(this,As)&&hi(this[As],t)&&(this[As][t]=!1),kC(this,t,EC(1,i))};return ov&&SC&&kC(Ea,t,{configurable:!0,set:n}),Gk(t,r)},ty=mh[fm],a9(ty,"toString",function(){return u9(this).tag}),a9(mh,"withoutSetter",function(e){return Gk(l9(e),e)}),kJ.f=PJ,SJ.f=zx,Att.f=fN,EJ.f=NJ,Ttt.f=xJ.f=RJ,Itt.f=DJ,Ntt.f=function(e){return Gk(Ptt(e),e)},ov&&Ott(ty,"description",{configurable:!0,get:function(){return u9(this).description}}));Mx({global:!0,constructor:!0,wrap:!0,forced:!av,sham:!av},{Symbol:mh});Fx(_J(jtt),function(e){Rtt(e)});Mx({target:jx,stat:!0,forced:!av},{useSetter:function(){SC=!0},useSimple:function(){SC=!1}});Mx({target:"Object",stat:!0,forced:!av,sham:!ov},{create:ztt,defineProperty:zx,defineProperties:fN,getOwnPropertyDescriptor:NJ});Mx({target:"Object",stat:!0,forced:!av},{getOwnPropertyNames:RJ});Dtt();Btt(mh,jx);TJ[As]=!0;var Htt=Wv,BJ=Htt&&!!Symbol.for&&!!Symbol.keyFor,Utt=zt,Wtt=Xo,qtt=$i,Ktt=xl,MJ=qc,Vtt=BJ,Yk=MJ("string-to-symbol-registry"),Gtt=MJ("symbol-to-string-registry");Utt({target:"Symbol",stat:!0,forced:!Vtt},{for:function(e){var r=Ktt(e);if(qtt(Yk,r))return Yk[r];var t=Wtt("Symbol")(r);return Yk[r]=t,Gtt[t]=r,t}});var Ytt=zt,Ztt=$i,Xtt=$b,Jtt=qv,Qtt=qc,ert=BJ,c9=Qtt("symbol-to-string-registry");Ytt({target:"Symbol",stat:!0,forced:!ert},{keyFor:function(r){if(!Xtt(r))throw TypeError(Jtt(r)+" is not a symbol");if(Ztt(c9,r))return c9[r]}});var trt=Ir,f9=rd,rrt=bi,h9=Cu,nrt=xl,d9=trt([].push),irt=function(e){if(rrt(e))return e;if(f9(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?d9(t,i):(typeof i=="number"||h9(i)=="Number"||h9(i)=="String")&&d9(t,nrt(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(f9(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},srt=zt,LJ=Xo,FJ=pb,ort=lo,Pb=Ir,jJ=Tr,p9=bi,v9=$b,zJ=Ox,art=irt,lrt=Wv,urt=String,Rc=LJ("JSON","stringify"),N1=Pb(/./.exec),g9=Pb("".charAt),crt=Pb("".charCodeAt),frt=Pb("".replace),hrt=Pb(1 .toString),drt=/[\uD800-\uDFFF]/g,y9=/^[\uD800-\uDBFF]$/,m9=/^[\uDC00-\uDFFF]$/,b9=!lrt||jJ(function(){var e=LJ("Symbol")();return Rc([e])!="[null]"||Rc({a:e})!="{}"||Rc(Object(e))!="{}"}),w9=jJ(function(){return Rc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Rc("\uDEAD")!=='"\\udead"'}),prt=function(e,r){var t=zJ(arguments),n=art(r);if(!(!p9(n)&&(e===void 0||v9(e))))return t[1]=function(i,s){if(p9(n)&&(s=ort(n,this,urt(i),s)),!v9(s))return s},FJ(Rc,null,t)},vrt=function(e,r,t){var n=g9(t,r-1),i=g9(t,r+1);return N1(y9,e)&&!N1(m9,i)||N1(m9,e)&&!N1(y9,n)?"\\u"+hrt(crt(e,0),16):e};Rc&&srt({target:"JSON",stat:!0,arity:3,forced:b9||w9},{stringify:function(r,t,n){var i=zJ(arguments),s=FJ(b9?prt:Rc,null,i);return w9&&typeof s=="string"?frt(s,drt,vrt):s}});var grt=zt,yrt=Wv,mrt=Tr,HJ=Tb,brt=uo,wrt=!yrt||mrt(function(){HJ.f(1)});grt({target:"Object",stat:!0,forced:wrt},{getOwnPropertySymbols:function(r){var t=HJ.f;return t?t(brt(r)):[]}});var $rt=xr,_rt=$rt.Object.getOwnPropertySymbols,xrt=_rt,Ert=xrt;(function(e){e.exports=Ert})(Uet);var Kc=Pt(_C),TC={},Srt={get exports(){return TC},set exports(e){TC=e}},IC={},krt={get exports(){return IC},set exports(e){IC=e}},Trt=zt,Irt=Tr,Art=Da,UJ=Uv.f,WJ=ii,Ort=!WJ||Irt(function(){UJ(1)});Trt({target:"Object",stat:!0,forced:Ort,sham:!WJ},{getOwnPropertyDescriptor:function(r,t){return UJ(Art(r),t)}});var Crt=xr,qJ=Crt.Object,Prt=krt.exports=function(r,t){return qJ.getOwnPropertyDescriptor(r,t)};qJ.getOwnPropertyDescriptor.sham&&(Prt.sham=!0);var Nrt=IC,KJ=Nrt;(function(e){e.exports=KJ})(Srt);var nf=Pt(TC),AC={},Rrt={get exports(){return AC},set exports(e){AC=e}},Drt=Xo,Brt=Ir,Mrt=Ab,Lrt=Tb,Frt=co,jrt=Brt([].concat),VJ=Drt("Reflect","ownKeys")||function(r){var t=Mrt.f(Frt(r)),n=Lrt.f;return n?jrt(t,n(r)):t},zrt=zt,Hrt=ii,Urt=VJ,Wrt=Da,qrt=Uv,Krt=Zv;zrt({target:"Object",stat:!0,sham:!Hrt},{getOwnPropertyDescriptors:function(r){for(var t=Wrt(r),n=qrt.f,i=Urt(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&Krt(s,a,l);return s}});var Vrt=xr,Grt=Vrt.Object.getOwnPropertyDescriptors,Yrt=Grt,Zrt=Yrt;(function(e){e.exports=Zrt})(Rrt);var Vc=Pt(AC),OC={},Xrt={get exports(){return OC},set exports(e){OC=e}},CC={},Jrt={get exports(){return CC},set exports(e){CC=e}},Qrt=zt,ent=ii,$9=Px.f;Qrt({target:"Object",stat:!0,forced:Object.defineProperties!==$9,sham:!ent},{defineProperties:$9});var tnt=xr,GJ=tnt.Object,rnt=Jrt.exports=function(r,t){return GJ.defineProperties(r,t)};GJ.defineProperties.sham&&(rnt.sham=!0);var nnt=CC,int=nnt;(function(e){e.exports=int})(Xrt);var Hx=Pt(OC),PC={},snt={get exports(){return PC},set exports(e){PC=e}},NC={},ont={get exports(){return NC},set exports(e){NC=e}},ant=zt,lnt=ii,_9=Jo.f;ant({target:"Object",stat:!0,forced:Object.defineProperty!==_9,sham:!lnt},{defineProperty:_9});var unt=xr,YJ=unt.Object,cnt=ont.exports=function(r,t,n){return YJ.defineProperty(r,t,n)};YJ.defineProperty.sham&&(cnt.sham=!0);var fnt=NC,ZJ=fnt;(function(e){e.exports=ZJ})(snt);var Ux=Pt(PC);function ft(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var RC={},hnt={get exports(){return RC},set exports(e){RC=e}},DC={},dnt={get exports(){return DC},set exports(e){DC=e}},pnt=ZJ,vnt=pnt,gnt=vnt,ynt=gnt;(function(e){e.exports=ynt})(dnt);(function(e){e.exports=DC})(hnt);var Wx=Pt(RC),BC={},mnt={get exports(){return BC},set exports(e){BC=e}},MC={},bnt={get exports(){return MC},set exports(e){MC=e}},wnt=TypeError,$nt=9007199254740991,XJ=function(e){if(e>$nt)throw wnt("Maximum allowed index exceeded");return e},_nt=Tr,xnt=Mn,Ent=wb,Snt=xnt("species"),Nb=function(e){return Ent>=51||!_nt(function(){var r=[],t=r.constructor={};return t[Snt]=function(){return{foo:1}},r[e](Boolean).foo!==1})},knt=zt,Tnt=Tr,Int=rd,Ant=wi,Ont=uo,Cnt=Ba,x9=XJ,E9=Zv,Pnt=oN,Nnt=Nb,Rnt=Mn,Dnt=wb,JJ=Rnt("isConcatSpreadable"),Bnt=Dnt>=51||!Tnt(function(){var e=[];return e[JJ]=!1,e.concat()[0]!==e}),Mnt=function(e){if(!Ant(e))return!1;var r=e[JJ];return r!==void 0?!!r:Int(e)},Lnt=!Bnt||!Nnt("concat");knt({target:"Array",proto:!0,arity:1,forced:Lnt},{concat:function(r){var t=Ont(this),n=Pnt(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],Mnt(u))for(l=Cnt(u),x9(i+l),o=0;o<l;o++,i++)o in u&&E9(n,i,u[o]);else x9(i+1),E9(n,i++,u);return n.length=i,n}});var Fnt=kn;Fnt("asyncIterator");var jnt=kn;jnt("hasInstance");var znt=kn;znt("isConcatSpreadable");var Hnt=kn;Hnt("iterator");var Unt=kn;Unt("match");var Wnt=kn;Wnt("matchAll");var qnt=kn;qnt("replace");var Knt=kn;Knt("search");var Vnt=kn;Vnt("species");var Gnt=kn;Gnt("split");var Ynt=kn,Znt=$J;Ynt("toPrimitive");Znt();var Xnt=Xo,Jnt=kn,Qnt=Gv;Jnt("toStringTag");Qnt(Xnt("Symbol"),"Symbol");var eit=kn;eit("unscopables");var tit=Gn,rit=Gv;rit(tit.JSON,"JSON",!0);var nit=xr,iit=nit.Symbol,sit=iit,QJ=sit,oit=kn;oit("dispose");var ait=QJ,lit=ait,uit=kn;uit("asyncDispose");var cit=zt,fit=Xo,hit=Ir,eQ=fit("Symbol"),dit=eQ.keyFor,pit=hit(eQ.prototype.valueOf);cit({target:"Symbol",stat:!0},{isRegistered:function(r){try{return dit(pit(r))!==void 0}catch{return!1}}});var vit=zt,git=qc,tQ=Xo,yit=Ir,mit=$b,bit=Mn,M$=tQ("Symbol"),S9=M$.isWellKnown,rQ=tQ("Object","getOwnPropertyNames"),wit=yit(M$.prototype.valueOf),k9=git("wks");for(var Zk=0,T9=rQ(M$),$it=T9.length;Zk<$it;Zk++)try{var I9=T9[Zk];mit(M$[I9])&&bit(I9)}catch{}vit({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(S9&&S9(r))return!0;try{for(var t=wit(r),n=0,i=rQ(k9),s=i.length;n<s;n++)if(k9[i[n]]==t)return!0}catch{}return!1}});var _it=kn;_it("matcher");var xit=kn;xit("metadataKey");var Eit=kn;Eit("observable");var Sit=kn;Sit("metadata");var kit=kn;kit("patternMatch");var Tit=kn;Tit("replaceAll");var Iit=lit,Ait=Iit;(function(e){e.exports=Ait})(bnt);(function(e){e.exports=MC})(mnt);var pp=Pt(BC),LC={},Oit={get exports(){return LC},set exports(e){LC=e}},FC={},Cit={get exports(){return FC},set exports(e){FC=e}},Pit=Ob,Nit=Pit.f("iterator"),Rit=Nit,Dit=Rit,Bit=Dit,Mit=Bit,Lit=Mit,Fit=Lit;(function(e){e.exports=Fit})(Cit);(function(e){e.exports=FC})(Oit);var jit=Pt(LC);function Dr(e){"@babel/helpers - typeof";return Dr=typeof pp=="function"&&typeof jit=="symbol"?function(r){return typeof r}:function(r){return r&&typeof pp=="function"&&r.constructor===pp&&r!==pp.prototype?"symbol":typeof r},Dr(e)}var jC={},zit={get exports(){return jC},set exports(e){jC=e}},zC={},Hit={get exports(){return zC},set exports(e){zC=e}},Uit=Ob,Wit=Uit.f("toPrimitive"),qit=Wit,Kit=qit,Vit=Kit,Git=Vit,Yit=Git,Zit=Yit;(function(e){e.exports=Zit})(Hit);(function(e){e.exports=zC})(zit);var Xit=Pt(jC);function Jit(e,r){if(Dr(e)!=="object"||e===null)return e;var t=e[Xit];if(t!==void 0){var n=t.call(e,r||"default");if(Dr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function nQ(e){var r=Jit(e,"string");return Dr(r)==="symbol"?r:String(r)}function A9(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Wx(e,nQ(n.key),n)}}function ht(e,r,t){return r&&A9(e.prototype,r),t&&A9(e,t),Wx(e,"prototype",{writable:!1}),e}function qx(e,r,t){return r=nQ(r),r in e?Wx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var HC={},Qit={get exports(){return HC},set exports(e){HC=e}},UC={},est={get exports(){return UC},set exports(e){UC=e}},tst=zt,rst=rd;tst({target:"Array",stat:!0},{isArray:rst});var nst=xr,ist=nst.Array.isArray,sst=ist,iQ=sst,ost=iQ,ast=ost,lst=ast,ust=lst;(function(e){e.exports=ust})(est);(function(e){e.exports=UC})(Qit);var sQ=Pt(HC);function cst(e){if(sQ(e))return e}function fst(e,r){var t=e==null?null:typeof pp<"u"&&Pu(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var WC={},hst={get exports(){return WC},set exports(e){WC=e}},qC={},dst={get exports(){return qC},set exports(e){qC=e}},pst=zt,O9=rd,vst=Rx,gst=wi,C9=Eb,yst=Ba,mst=Da,bst=Zv,wst=Mn,$st=Nb,_st=Ox,xst=$st("slice"),Est=wst("species"),Xk=Array,Sst=Math.max;pst({target:"Array",proto:!0,forced:!xst},{slice:function(r,t){var n=mst(this),i=yst(n),s=C9(r,i),o=C9(t===void 0?i:t,i),a,l,u;if(O9(n)&&(a=n.constructor,vst(a)&&(a===Xk||O9(a.prototype))?a=void 0:gst(a)&&(a=a[Est],a===null&&(a=void 0)),a===Xk||a===void 0))return _st(n,s,o);for(l=new(a===void 0?Xk:a)(Sst(o-s,0)),u=0;s<o;s++,u++)s in n&&bst(l,u,n[s]);return l.length=u,l}});var kst=_i,Tst=kst("Array").slice,Ist=Bn,Ast=Tst,Jk=Array.prototype,Ost=function(e){var r=e.slice;return e===Jk||Ist(Jk,e)&&r===Jk.slice?Ast:r},Cst=Ost,oQ=Cst,Pst=oQ,Nst=Pst,Rst=Nst,Dst=Rst;(function(e){e.exports=Dst})(dst);(function(e){e.exports=qC})(hst);var Bst=Pt(WC),KC={},Mst={get exports(){return KC},set exports(e){KC=e}},VC={},Lst={get exports(){return VC},set exports(e){VC=e}},Fst=vJ,jst=Fst,zst=jst,Hst=zst;(function(e){e.exports=Hst})(Lst);(function(e){e.exports=VC})(Mst);var aQ=Pt(KC);function GC(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function lQ(e,r){var t;if(e){if(typeof e=="string")return GC(e,r);var n=Bst(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return aQ(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GC(e,r)}}function Ust(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(e,r){return cst(e)||fst(e,r)||lQ(e,r)||Ust()}function Wst(e){if(sQ(e))return GC(e)}function qst(e){if(typeof pp<"u"&&Pu(e)!=null||e["@@iterator"]!=null)return aQ(e)}function Kst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function al(e){return Wst(e)||qst(e)||lQ(e)||Kst()}var YC={},Vst={get exports(){return YC},set exports(e){YC=e}};(function(e){e.exports=QJ})(Vst);var sf=Pt(YC),ZC={},Gst={get exports(){return ZC},set exports(e){ZC=e}},Yst=_i,Zst=Yst("Array").concat,Xst=Bn,Jst=Zst,Qk=Array.prototype,Qst=function(e){var r=e.concat;return e===Qk||Xst(Qk,e)&&r===Qk.concat?Jst:r},eot=Qst,tot=eot;(function(e){e.exports=tot})(Gst);var hN=Pt(ZC),XC={},rot={get exports(){return XC},set exports(e){XC=e}};(function(e){e.exports=oQ})(rot);var Oi=Pt(XC),P9={},not={get exports(){return P9},set exports(e){P9=e}},iot=zt,sot=VJ;iot({target:"Reflect",stat:!0},{ownKeys:sot});var oot=xr,aot=oot.Reflect.ownKeys,lot=aot,uot=lot;(function(e){e.exports=uot})(not);var JC={},cot={get exports(){return JC},set exports(e){JC=e}};(function(e){e.exports=iQ})(cot);var Lr=Pt(JC),QC={},fot={get exports(){return QC},set exports(e){QC=e}},hot=zt,dot=rf.map,pot=Nb,vot=pot("map");hot({target:"Array",proto:!0,forced:!vot},{map:function(r){return dot(this,r,arguments.length>1?arguments[1]:void 0)}});var got=_i,yot=got("Array").map,mot=Bn,bot=yot,eT=Array.prototype,wot=function(e){var r=e.map;return e===eT||mot(eT,e)&&r===eT.map?bot:r},$ot=wot,_ot=$ot;(function(e){e.exports=_ot})(fot);var lv=Pt(QC),e5={},xot={get exports(){return e5},set exports(e){e5=e}},Eot=zt,Sot=uo,uQ=kb,kot=Tr,Tot=kot(function(){uQ(1)});Eot({target:"Object",stat:!0,forced:Tot},{keys:function(r){return uQ(Sot(r))}});var Iot=xr,Aot=Iot.Object.keys,Oot=Aot,Cot=Oot;(function(e){e.exports=Cot})(xot);var mn=Pt(e5),t5={},Pot={get exports(){return t5},set exports(e){t5=e}},Not=zt,Rot=Ir,cQ=Date,Dot=Rot(cQ.prototype.getTime);Not({target:"Date",stat:!0},{now:function(){return Dot(new cQ)}});var Bot=xr,Mot=Bot.Date.now,Lot=Mot,Fot=Lot;(function(e){e.exports=Fot})(Pot);var L$=Pt(t5),r5={},jot={get exports(){return r5},set exports(e){r5=e}},zot=Tr,Xv=function(e,r){var t=[][e];return!!t&&zot(function(){t.call(null,r||function(){return 1},1)})},Hot=rf.forEach,Uot=Xv,Wot=Uot("forEach"),qot=Wot?[].forEach:function(r){return Hot(this,r,arguments.length>1?arguments[1]:void 0)},Kot=zt,N9=qot;Kot({target:"Array",proto:!0,forced:[].forEach!=N9},{forEach:N9});var Vot=_i,Got=Vot("Array").forEach,Yot=Got,Zot=Yot,Xot=Qh,Jot=$i,Qot=Bn,eat=Zot,tT=Array.prototype,tat={DOMTokenList:!0,NodeList:!0},rat=function(e){var r=e.forEach;return e===tT||Qot(tT,e)&&r===tT.forEach||Jot(tat,Xot(e))?eat:r};(function(e){e.exports=rat})(jot);var qr=Pt(r5),n5={},nat={get exports(){return n5},set exports(e){n5=e}},iat=zt,sat=Ir,oat=rd,aat=sat([].reverse),R9=[1,2];iat({target:"Array",proto:!0,forced:String(R9)===String(R9.reverse())},{reverse:function(){return oat(this)&&(this.length=this.length),aat(this)}});var lat=_i,uat=lat("Array").reverse,cat=Bn,fat=uat,rT=Array.prototype,hat=function(e){var r=e.reverse;return e===rT||cat(rT,e)&&r===rT.reverse?fat:r},dat=hat,pat=dat;(function(e){e.exports=pat})(nat);var bh=Pt(n5),i5={},vat={get exports(){return i5},set exports(e){i5=e}},gat=ii,yat=rd,mat=TypeError,bat=Object.getOwnPropertyDescriptor,wat=gat&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),$at=wat?function(e,r){if(yat(e)&&!bat(e,"length").writable)throw mat("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},D9=qv,_at=TypeError,fQ=function(e,r){if(!delete e[r])throw _at("Cannot delete property "+D9(r)+" of "+D9(e))},xat=zt,Eat=uo,Sat=Eb,kat=Ax,Tat=Ba,Iat=$at,Aat=XJ,Oat=oN,Cat=Zv,nT=fQ,Pat=Nb,Nat=Pat("splice"),Rat=Math.max,Dat=Math.min;xat({target:"Array",proto:!0,forced:!Nat},{splice:function(r,t){var n=Eat(this),i=Tat(n),s=Sat(r,i),o=arguments.length,a,l,u,f,c,d;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=Dat(Rat(kat(t),0),i-s)),Aat(i+a-l),u=Oat(n,l),f=0;f<l;f++)c=s+f,c in n&&Cat(u,f,n[c]);if(u.length=l,a<l){for(f=s;f<i-l;f++)c=f+l,d=f+a,c in n?n[d]=n[c]:nT(n,d);for(f=i;f>i-l+a;f--)nT(n,f-1)}else if(a>l)for(f=i-l;f>s;f--)c=f+l-1,d=f+a-1,c in n?n[d]=n[c]:nT(n,d);for(f=0;f<a;f++)n[f+s]=arguments[f+2];return Iat(n,i-l+a),u}});var Bat=_i,Mat=Bat("Array").splice,Lat=Bn,Fat=Mat,iT=Array.prototype,jat=function(e){var r=e.splice;return e===iT||Lat(iT,e)&&r===iT.splice?Fat:r},zat=jat,Hat=zat;(function(e){e.exports=Hat})(vat);var cu=Pt(i5),s5={},Uat={get exports(){return s5},set exports(e){s5=e}},Wat=zt,qat=Z4.includes,Kat=Tr,Vat=Kat(function(){return!Array(1).includes()});Wat({target:"Array",proto:!0,forced:Vat},{includes:function(r){return qat(this,r,arguments.length>1?arguments[1]:void 0)}});var Gat=_i,Yat=Gat("Array").includes,Zat=wi,Xat=Cu,Jat=Mn,Qat=Jat("match"),elt=function(e){var r;return Zat(e)&&((r=e[Qat])!==void 0?!!r:Xat(e)=="RegExp")},tlt=elt,rlt=TypeError,nlt=function(e){if(tlt(e))throw rlt("The method doesn't accept regular expressions");return e},ilt=Mn,slt=ilt("match"),olt=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[slt]=!1,"/./"[e](r)}catch{}}return!1},alt=zt,llt=Ir,ult=nlt,clt=mb,B9=xl,flt=olt,hlt=llt("".indexOf);alt({target:"String",proto:!0,forced:!flt("includes")},{includes:function(r){return!!~hlt(B9(clt(this)),B9(ult(r)),arguments.length>1?arguments[1]:void 0)}});var dlt=_i,plt=dlt("String").includes,M9=Bn,vlt=Yat,glt=plt,sT=Array.prototype,oT=String.prototype,ylt=function(e){var r=e.includes;return e===sT||M9(sT,e)&&r===sT.includes?vlt:typeof e=="string"||e===oT||M9(oT,e)&&r===oT.includes?glt:r},mlt=ylt,blt=mlt;(function(e){e.exports=blt})(Uat);var pl=Pt(s5),o5={},wlt={get exports(){return o5},set exports(e){o5=e}},$lt=zt,_lt=Tr,xlt=uo,hQ=Nx,Elt=tJ,Slt=_lt(function(){hQ(1)});$lt({target:"Object",stat:!0,forced:Slt,sham:!Elt},{getPrototypeOf:function(r){return hQ(xlt(r))}});var klt=xr,Tlt=klt.Object.getPrototypeOf,Ilt=Tlt,dQ=Ilt;(function(e){e.exports=dQ})(wlt);var L9=Pt(o5),a5={},Alt={get exports(){return a5},set exports(e){a5=e}},Olt=zt,Clt=rf.filter,Plt=Nb,Nlt=Plt("filter");Olt({target:"Array",proto:!0,forced:!Nlt},{filter:function(r){return Clt(this,r,arguments.length>1?arguments[1]:void 0)}});var Rlt=_i,Dlt=Rlt("Array").filter,Blt=Bn,Mlt=Dlt,aT=Array.prototype,Llt=function(e){var r=e.filter;return e===aT||Blt(aT,e)&&r===aT.filter?Mlt:r},Flt=Llt,jlt=Flt;(function(e){e.exports=jlt})(Alt);var Os=Pt(a5),F9={},zlt={get exports(){return F9},set exports(e){F9=e}},Hlt=ii,pQ=Ir,Ult=kb,Wlt=Da,qlt=vb.f,Klt=pQ(qlt),Vlt=pQ([].push),j9=function(e){return function(r){for(var t=Wlt(r),n=Ult(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!Hlt||Klt(t,a))&&Vlt(o,e?[a,t[a]]:t[a]);return o}},Glt={entries:j9(!0),values:j9(!1)},Ylt=zt,Zlt=Glt.values;Ylt({target:"Object",stat:!0},{values:function(r){return Zlt(r)}});var Xlt=xr,Jlt=Xlt.Object.values,Qlt=Jlt,eut=Qlt;(function(e){e.exports=eut})(zlt);var l5={},tut={get exports(){return l5},set exports(e){l5=e}},Kx=`	
\v\f\r \u2028\u2029\uFEFF`,rut=Ir,nut=mb,iut=xl,u5=Kx,z9=rut("".replace),sut=RegExp("^["+u5+"]+"),out=RegExp("(^|[^"+u5+"])["+u5+"]+$"),lT=function(e){return function(r){var t=iut(nut(r));return e&1&&(t=z9(t,sut,"")),e&2&&(t=z9(t,out,"$1")),t}},dN={start:lT(1),end:lT(2),trim:lT(3)},vQ=Gn,aut=Tr,lut=Ir,uut=xl,cut=dN.trim,H9=Kx,$y=vQ.parseInt,U9=vQ.Symbol,W9=U9&&U9.iterator,gQ=/^[+-]?0x/i,fut=lut(gQ.exec),hut=$y(H9+"08")!==8||$y(H9+"0x16")!==22||W9&&!aut(function(){$y(Object(W9))}),dut=hut?function(r,t){var n=cut(uut(r));return $y(n,t>>>0||(fut(gQ,n)?16:10))}:$y,put=zt,q9=dut;put({global:!0,forced:parseInt!=q9},{parseInt:q9});var vut=xr,gut=vut.parseInt,yut=gut,mut=yut;(function(e){e.exports=mut})(tut);var ma=Pt(l5),c5={},but={get exports(){return c5},set exports(e){c5=e}},wut=zt,$ut=V4,_ut=Z4.indexOf,xut=Xv,f5=$ut([].indexOf),yQ=!!f5&&1/f5([1],1,-0)<0,Eut=yQ||!xut("indexOf");wut({target:"Array",proto:!0,forced:Eut},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return yQ?f5(this,r,t)||0:_ut(this,r,t)}});var Sut=_i,kut=Sut("Array").indexOf,Tut=Bn,Iut=kut,uT=Array.prototype,Aut=function(e){var r=e.indexOf;return e===uT||Tut(uT,e)&&r===uT.indexOf?Iut:r},Out=Aut,Cut=Out;(function(e){e.exports=Cut})(but);var Sr=Pt(c5),K9={},Put={get exports(){return K9},set exports(e){K9=e}},Nut=JX.PROPER,Rut=Tr,V9=Kx,G9="",Dut=function(e){return Rut(function(){return!!V9[e]()||G9[e]()!==G9||Nut&&V9[e].name!==e})},But=zt,Mut=dN.trim,Lut=Dut;But({target:"String",proto:!0,forced:Lut("trim")},{trim:function(){return Mut(this)}});var Fut=_i,jut=Fut("String").trim,zut=Bn,Hut=jut,cT=String.prototype,Uut=function(e){var r=e.trim;return typeof e=="string"||e===cT||zut(cT,e)&&r===cT.trim?Hut:r},Wut=Uut,qut=Wut;(function(e){e.exports=qut})(Put);var h5={},Kut={get exports(){return h5},set exports(e){h5=e}},Vut=zt,Gut=ii,Yut=Vv;Vut({target:"Object",stat:!0,sham:!Gut},{create:Yut});var Zut=xr,Xut=Zut.Object,Jut=function(r,t){return Xut.create(r,t)},Qut=Jut,mQ=Qut;(function(e){e.exports=mQ})(Kut);var wh=Pt(h5),d5={},ect={get exports(){return d5},set exports(e){d5=e}},p5=xr,tct=pb;p5.JSON||(p5.JSON={stringify:JSON.stringify});var rct=function(r,t,n){return tct(p5.JSON.stringify,null,arguments)},nct=rct,ict=nct;(function(e){e.exports=ict})(ect);var Rb=Pt(d5),v5={},sct={get exports(){return v5},set exports(e){v5=e}},oct=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",act=TypeError,lct=function(e,r){if(e<r)throw act("Not enough arguments");return e},bQ=Gn,uct=pb,cct=bi,fct=oct,hct=bb,dct=Ox,pct=lct,vct=bQ.Function,gct=/MSIE .\./.test(hct)||fct&&function(){var e=bQ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),wQ=function(e,r){var t=r?2:1;return gct?function(n,i){var s=pct(arguments.length,1)>t,o=cct(n)?n:vct(n),a=s?dct(arguments,t):[],l=s?function(){uct(o,this,a)}:o;return r?e(l,i):e(l)}:e},yct=zt,$Q=Gn,mct=wQ,Y9=mct($Q.setInterval,!0);yct({global:!0,bind:!0,forced:$Q.setInterval!==Y9},{setInterval:Y9});var bct=zt,_Q=Gn,wct=wQ,Z9=wct(_Q.setTimeout,!0);bct({global:!0,bind:!0,forced:_Q.setTimeout!==Z9},{setTimeout:Z9});var $ct=xr,_ct=$ct.setTimeout;(function(e){e.exports=_ct})(sct);var vl=Pt(v5),g5={},xct={get exports(){return g5},set exports(e){g5=e}},Ect=uo,X9=Eb,Sct=Ba,kct=function(r){for(var t=Ect(this),n=Sct(t),i=arguments.length,s=X9(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:X9(o,n);a>s;)t[s++]=r;return t},Tct=zt,Ict=kct;Tct({target:"Array",proto:!0},{fill:Ict});var Act=_i,Oct=Act("Array").fill,Cct=Bn,Pct=Oct,fT=Array.prototype,Nct=function(e){var r=e.fill;return e===fT||Cct(fT,e)&&r===fT.fill?Pct:r},Rct=Nct,Dct=Rct;(function(e){e.exports=Dct})(xct);var Db=Pt(g5);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ca(){return Ca=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ca.apply(this,arguments)}function Qo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function R1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y5;typeof Object.assign!="function"?y5=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:y5=Object.assign;var Mh=y5,J9=["","webkit","Moz","MS","ms","o"],Bct=typeof document>"u"?{style:{}}:document.createElement("div"),Mct="function",vp=Math.round,Lh=Math.abs,pN=Date.now;function Vx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<J9.length;){if(t=J9[s],n=t?t+i:r,n in e)return n;s++}}var fu;typeof window>"u"?fu={}:fu=window;var xQ=Vx(Bct.style,"touchAction"),EQ=xQ!==void 0;function Lct(){if(!EQ)return!1;var e={},r=fu.CSS&&fu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?fu.CSS.supports("touch-action",t):!0}),e}var SQ="compute",kQ="auto",m5="manipulation",$h="none",hm="pan-x",dm="pan-y",D1=Lct(),Fct=/mobile|tablet|ip(ad|hone|od)|android/i,TQ="ontouchstart"in fu,jct=Vx(fu,"PointerEvent")!==void 0,zct=TQ&&Fct.test(navigator.userAgent),Bb="touch",Hct="pen",vN="mouse",Uct="kinect",Wct=25,fs=1,nd=2,qn=4,Rs=8,F$=1,Mb=2,Lb=4,Fb=8,uv=16,gl=Mb|Lb,_h=Fb|uv,IQ=gl|_h,AQ=["x","y"],j$=["clientX","clientY"];function hu(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function Gx(e,r){return typeof e===Mct?e.apply(r&&r[0]||void 0,r):e}function rh(e,r){return e.indexOf(r)>-1}function qct(e){if(rh(e,$h))return $h;var r=rh(e,hm),t=rh(e,dm);return r&&t?$h:r||t?r?hm:dm:rh(e,m5)?m5:kQ}var OQ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===SQ&&(n=this.compute()),EQ&&this.manager.element.style&&D1[n]&&(this.manager.element.style[xQ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return hu(this.manager.recognizers,function(i){Gx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),qct(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=rh(o,$h)&&!D1[$h],l=rh(o,dm)&&!D1[dm],u=rh(o,hm)&&!D1[hm];if(a){var f=n.pointers.length===1,c=n.distance<2,d=n.deltaTime<250;if(f&&c&&d)return}if(!(u&&l)&&(a||l&&s&gl||u&&s&_h))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function gN(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function CQ(e){var r=e.length;if(r===1)return{x:vp(e[0].clientX),y:vp(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:vp(t/r),y:vp(n/r)}}function Q9(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:vp(e.pointers[t].clientX),clientY:vp(e.pointers[t].clientY)},t++;return{timeStamp:pN(),pointers:r,center:CQ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function z$(e,r,t){t||(t=AQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function b5(e,r,t){t||(t=AQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function PQ(e,r){return e===r?F$:Lh(e)>=Lh(r)?e<0?Mb:Lb:r<0?Fb:uv}function Kct(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===fs||s.eventType===qn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function NQ(e,r,t){return{x:r/e||0,y:t/e||0}}function Vct(e,r){return z$(r[0],r[1],j$)/z$(e[0],e[1],j$)}function Gct(e,r){return b5(r[1],r[0],j$)+b5(e[1],e[0],j$)}function Yct(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Rs&&(n>Wct||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,f=NQ(n,l,u);s=f.x,o=f.y,i=Lh(f.x)>Lh(f.y)?f.x:f.y,a=PQ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function Zct(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=Q9(r)),i>1&&!t.firstMultiple?t.firstMultiple=Q9(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=CQ(n);r.timeStamp=pN(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=b5(a,l),r.distance=z$(a,l),Kct(t,r),r.offsetDirection=PQ(r.deltaX,r.deltaY);var u=NQ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Lh(u.x)>Lh(u.y)?u.x:u.y,r.scale=o?Vct(o.pointers,n):1,r.rotation=o?Gct(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,Yct(t,r);var f=e.element,c=r.srcEvent,d;c.composedPath?d=c.composedPath()[0]:c.path?d=c.path[0]:d=c.target,gN(d,f)&&(f=d),r.target=f}function Xct(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&fs&&n-i===0,o=r&(qn|Rs)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,Zct(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function pm(e){return e.trim().split(/\s+/g)}function _y(e,r,t){hu(pm(r),function(n){e.addEventListener(n,t,!1)})}function xy(e,r,t){hu(pm(r),function(n){e.removeEventListener(n,t,!1)})}function ej(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Jv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Gx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&_y(this.element,this.evEl,this.domHandler),this.evTarget&&_y(this.target,this.evTarget,this.domHandler),this.evWin&&_y(ej(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&xy(this.element,this.evEl,this.domHandler),this.evTarget&&xy(this.target,this.evTarget,this.domHandler),this.evWin&&xy(ej(this.element),this.evWin,this.domHandler)},e}();function Fh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var Jct={pointerdown:fs,pointermove:nd,pointerup:qn,pointercancel:Rs,pointerout:Rs},Qct={2:Bb,3:Hct,4:vN,5:Uct},RQ="pointerdown",DQ="pointermove pointerup pointercancel";fu.MSPointerEvent&&!fu.PointerEvent&&(RQ="MSPointerDown",DQ="MSPointerMove MSPointerUp MSPointerCancel");var BQ=function(e){Qo(r,e);function r(){var n,i=r.prototype;return i.evEl=RQ,i.evWin=DQ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=Jct[a],u=Qct[i.pointerType]||i.pointerType,f=u===Bb,c=Fh(s,i.pointerId,"pointerId");l&fs&&(i.button===0||f)?c<0&&(s.push(i),c=s.length-1):l&(qn|Rs)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Jv);function vm(e){return Array.prototype.slice.call(e,0)}function yN(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Fh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var eft={touchstart:fs,touchmove:nd,touchend:qn,touchcancel:Rs},tft="touchstart touchmove touchend touchcancel",mN=function(e){Qo(r,e);function r(){var n;return r.prototype.evTarget=tft,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=eft[i.type],o=rft.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Bb,srcEvent:i})},r}(Jv);function rft(e,r){var t=vm(e.touches),n=this.targetIds;if(r&(fs|nd)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=vm(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return gN(u.target,l)}),r===fs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(qn|Rs)&&delete n[o[i].identifier],i++;if(a.length)return[yN(s.concat(a),"identifier",!0),a]}var nft={mousedown:fs,mousemove:nd,mouseup:qn},ift="mousedown",sft="mousemove mouseup",bN=function(e){Qo(r,e);function r(){var n,i=r.prototype;return i.evEl=ift,i.evWin=sft,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=nft[i.type];s&fs&&i.button===0&&(this.pressed=!0),s&nd&&i.which!==1&&(s=qn),this.pressed&&(s&qn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:vN,srcEvent:i}))},r}(Jv),oft=2500,tj=25;function rj(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,oft)}}function aft(e,r){e&fs?(this.primaryTouch=r.changedPointers[0].identifier,rj.call(this,r)):e&(qn|Rs)&&rj.call(this,r)}function lft(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=tj&&o<=tj)return!0}return!1}var MQ=function(){var e=function(r){Qo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var f=u.pointerType===Bb,c=u.pointerType===vN;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(f)aft.call(R1(R1(o)),l,u);else if(c&&lft.call(R1(R1(o)),u))return;o.callback(a,l,u)}},o.touch=new mN(o.manager,o.handler),o.mouse=new bN(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Jv);return e}();function uft(e){var r,t=e.options.inputClass;return t?r=t:jct?r=BQ:zct?r=mN:TQ?r=MQ:r=bN,new r(e,Xct)}function gp(e,r,t){return Array.isArray(e)?(hu(e,t[r],t),!0):!1}var _w=1,Vo=2,cv=4,Dc=8,du=Dc,gm=16,fl=32,cft=1;function fft(){return cft++}function B1(e,r){var t=r.manager;return t?t.get(e):e}function nj(e){return e&gm?"cancel":e&Dc?"end":e&cv?"move":e&Vo?"start":""}var jb=function(){function e(t){t===void 0&&(t={}),this.options=Ca({enable:!0},t),this.id=fft(),this.manager=null,this.state=_w,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Mh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(gp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=B1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return gp(n,"dropRecognizeWith",this)?this:(n=B1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(gp(n,"requireFailure",this))return this;var i=this.requireFail;return n=B1(n,this),Fh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(gp(n,"dropRequireFailure",this))return this;n=B1(n,this);var i=Fh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Dc&&o(i.options.event+nj(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Dc&&o(i.options.event+nj(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=fl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(fl|_w)))return!1;n++}return!0},r.recognize=function(n){var i=Mh({},n);if(!Gx(this.options.enable,[this,i])){this.reset(),this.state=fl;return}this.state&(du|gm|fl)&&(this.state=_w),this.state=this.process(i),this.state&(Vo|cv|Dc|gm)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),w5=function(e){Qo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[m5]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&fs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==qn)return this.failTimeout();var f=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||z$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!f?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=du,s.tryEmit()},o.interval),Vo):du}return fl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=fl},this.options.interval),fl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===du&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(jb),fv=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Vo|cv),l=this.attrTest(i);return a&&(o&Rs||!l)?s|gm:a||l?o&qn?s|Dc:s&Vo?s|cv:Vo:fl},r}(jb);function LQ(e){return e===uv?"down":e===Fb?"up":e===Mb?"left":e===Lb?"right":""}var wN=function(e){Qo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"pan",threshold:10,pointers:1,direction:IQ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&gl&&s.push(dm),i&_h&&s.push(hm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,f=i.deltaY;return l&s.direction||(s.direction&gl?(l=u===0?F$:u<0?Mb:Lb,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=f===0?F$:f<0?Fb:uv,o=f!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return fv.prototype.attrTest.call(this,i)&&(this.state&Vo||!(this.state&Vo)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=LQ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(fv),FQ=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"swipe",threshold:10,velocity:.3,direction:gl|_h,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return wN.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(gl|_h)?o=i.overallVelocity:s&gl?o=i.overallVelocityX:s&_h&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Lh(o)>this.options.velocity&&i.eventType&qn},t.emit=function(i){var s=LQ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(fv),jQ=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[$h]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Vo)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(fv),zQ=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[$h]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Vo)},r}(fv),HQ=function(e){Qo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[kQ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(qn|Rs)&&!u)this.reset();else if(i.eventType&fs)this.reset(),this._timer=setTimeout(function(){s.state=du,s.tryEmit()},o.time);else if(i.eventType&qn)return du;return fl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===du&&(i&&i.eventType&qn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=pN(),this.manager.emit(this.options.event,this._input)))},r}(jb),UQ={domEvents:!1,touchAction:SQ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ij=[[zQ,{enable:!1}],[jQ,{enable:!1},["rotate"]],[FQ,{direction:gl}],[wN,{direction:gl},["swipe"]],[w5],[w5,{event:"doubletap",taps:2},["tap"]],[HQ]],hft=1,sj=2;function oj(e,r){var t=e.element;if(t.style){var n;hu(e.options.cssProps,function(i,s){n=Vx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function dft(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var aj=function(){function e(t,n){var i=this;this.options=Mh({},UQ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=uft(this),this.touchAction=new OQ(this,this.options.touchAction),oj(this,!0),hu(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Mh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?sj:hft},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&du)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==sj&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Vo|cv|Dc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof jb)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(gp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(gp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Fh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return hu(pm(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return hu(pm(n),function(o){i?s[o]&&s[o].splice(Fh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&dft(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&oj(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),pft={touchstart:fs,touchmove:nd,touchend:qn,touchcancel:Rs},vft="touchstart",gft="touchstart touchmove touchend touchcancel",yft=function(e){Qo(r,e);function r(){var n,i=r.prototype;return i.evTarget=vft,i.evWin=gft,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=pft[i.type];if(s===fs&&(this.started=!0),!!this.started){var o=mft.call(this,i,s);s&(qn|Rs)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Bb,srcEvent:i})}},r}(Jv);function mft(e,r){var t=vm(e.touches),n=vm(e.changedTouches);return r&(qn|Rs)&&(t=yN(t.concat(n),"identifier",!0)),[t,n]}function WQ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var qQ=WQ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),bft=WQ(function(e,r){return qQ(e,r,!0)},"merge","Use `assign`.");function wft(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Mh(i,t)}function lj(e,r){return function(){return e.apply(r,arguments)}}var KQ=function(){var e=function(t,n){return n===void 0&&(n={}),new aj(t,Ca({recognizers:ij.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=IQ,e.DIRECTION_DOWN=uv,e.DIRECTION_LEFT=Mb,e.DIRECTION_RIGHT=Lb,e.DIRECTION_UP=Fb,e.DIRECTION_HORIZONTAL=gl,e.DIRECTION_VERTICAL=_h,e.DIRECTION_NONE=F$,e.DIRECTION_DOWN=uv,e.INPUT_START=fs,e.INPUT_MOVE=nd,e.INPUT_END=qn,e.INPUT_CANCEL=Rs,e.STATE_POSSIBLE=_w,e.STATE_BEGAN=Vo,e.STATE_CHANGED=cv,e.STATE_ENDED=Dc,e.STATE_RECOGNIZED=du,e.STATE_CANCELLED=gm,e.STATE_FAILED=fl,e.Manager=aj,e.Input=Jv,e.TouchAction=OQ,e.TouchInput=mN,e.MouseInput=bN,e.PointerEventInput=BQ,e.TouchMouseInput=MQ,e.SingleTouchInput=yft,e.Recognizer=jb,e.AttrRecognizer=fv,e.Tap=w5,e.Pan=wN,e.Swipe=FQ,e.Pinch=jQ,e.Rotate=zQ,e.Press=HQ,e.on=_y,e.off=xy,e.each=hu,e.merge=bft,e.extend=qQ,e.bindFn=lj,e.assign=Mh,e.inherit=wft,e.bindFn=lj,e.prefixed=Vx,e.toArray=vm,e.inArray=Fh,e.uniqueArray=yN,e.splitStr=pm,e.boolOrFn=Gx,e.hasParent=gN,e.addEventListeners=_y,e.removeEventListeners=xy,e.defaults=Mh({},UQ,{preset:ij}),e}();KQ.defaults;var $ft=KQ;function VQ(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=_ft(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function _ft(e,r){var t;if(e){if(typeof e=="string")return uj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uj(e,r)}}function uj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}sf("DELETE");function Yx(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return xft(r.length?r:[L$()])}function xft(e){var r=Eft(e),t=bn(r,3),n=t[0],i=t[1],s=t[2],o=1,a=function(){var u=2091639*n+o*23283064365386963e-26;return n=i,i=s,s=u-(o=u|0)};return a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function Eft(){for(var e=Sft(),r=e(" "),t=e(" "),n=e(" "),i=0;i<arguments.length;i++)r-=e(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),t-=e(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=e(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[r,t,n]}function Sft(){var e=4022871197;return function(r){for(var t=r.toString(),n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function kft(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var $N=typeof window<"u"?window.Hammer||$ft:function(){return kft()};function hl(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=$N(this._dom.overlay);n.on("tap",nt(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];qr(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){Tft(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}VX(hl.prototype);hl.current=null;hl.prototype.destroy=function(){var e,r;this.deactivate();var t=VQ(bh(e=cu(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};hl.prototype.activate=function(){hl.current&&hl.current.deactivate(),hl.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};hl.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};hl.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Tft(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var Ift=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Aft=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Oft=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Cft=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function yc(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(yc(r),e.removeChild(r))}}function _c(e){return e instanceof String||typeof e=="string"}function cj(e){return Dr(e)==="object"&&e!==null}function jh(e,r,t,n){var i=!1;n===!0&&(i=r[t]===null&&e[t]!==void 0),i?delete e[t]:e[t]=r[t]}function GQ(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var n in e)if(r[n]!==void 0)if(r[n]===null||Dr(r[n])!=="object")jh(e,r,n,t);else{var i=e[n],s=r[n];cj(i)&&cj(s)&&GQ(i,s,t)}}function Qv(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Lr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var s=e[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)r[s]===void 0&&(r[s]={}),r[s].constructor===Object?Xr(r[s],t[s],!1,n):jh(r,t,s,n);else{if(Lr(t[s]))throw new TypeError("Arrays are not supported by deepExtend");jh(r,t,s,n)}}return r}function H$(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Lr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!pl(e).call(e,i))if(t[i]&&t[i].constructor===Object)r[i]===void 0&&(r[i]={}),r[i].constructor===Object?Xr(r[i],t[i]):jh(r,t,i,n);else if(Lr(t[i])){r[i]=[];for(var s=0;s<t[i].length;s++)r[i].push(t[i][s])}else jh(r,t,i,n);return r}function Xr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)||t===!0)if(Dr(r[i])==="object"&&r[i]!==null&&L9(r[i])===Object.prototype)e[i]===void 0?e[i]=Xr({},r[i],t):Dr(e[i])==="object"&&e[i]!==null&&L9(e[i])===Object.prototype?Xr(e[i],r[i],t):jh(e,r,i,n);else if(Lr(r[i])){var s;e[i]=Oi(s=r[i]).call(s)}else jh(e,r,i,n);return e}function U$(e,r){var t;return hN(t=[]).call(t,al(e),[r])}function Pft(e){return Oi(e).call(e)}function Nft(e){return e.getBoundingClientRect().left}function Rft(e){return e.getBoundingClientRect().top}function gr(e,r){if(Lr(e))for(var t=e.length,n=0;n<t;n++)r(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r(e[i],i,e)}function Dft(e,r,t,n){if(e.addEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&pl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,n)}else e.attachEvent("on"+r,t)}function Bft(e,r,t,n){if(e.removeEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&pl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,n)}else e.detachEvent("on"+r,t)}function _N(e){var r;switch(e.length){case 3:case 4:return r=Aft.exec(e),r?{r:ma(r[1]+r[1],16),g:ma(r[2]+r[2],16),b:ma(r[3]+r[3],16)}:null;case 6:case 7:return r=Ift.exec(e),r?{r:ma(r[1],16),g:ma(r[2],16),b:ma(r[3],16)}:null;default:return null}}function Uo(e,r){if(pl(e).call(e,"rgba"))return e;if(pl(e).call(e,"rgb")){var t=e.substr(Sr(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var n=_N(e);return n==null?e:"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}function YQ(e,r,t){var n;return"#"+Oi(n=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(n,1)}function $5(e,r){if(_c(e)){var t=e;if(XQ(t)){var n,i=lv(n=t.substr(4).substr(0,t.length-5).split(",")).call(n,function(d){return ma(d)});t=YQ(i[0],i[1],i[2])}if(ZQ(t)===!0){var s=Mft(t),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=_5(a.h,a.s,a.v),u=_5(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var f={background:e.background||r.background,border:e.border||r.border,highlight:_c(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:_c(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return f}else{var c={background:e.background||void 0,border:e.border||void 0,highlight:_c(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:_c(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return c}}function ry(e,r,t){e=e/255,r=r/255,t=t/255;var n=Math.min(e,Math.min(r,t)),i=Math.max(e,Math.max(r,t));if(n===i)return{h:0,s:0,v:n};var s=e===n?r-t:t===n?e-r:t-e,o=e===n?3:t===n?1:5,a=60*(o-s/(i-n))/360,l=(i-n)/i,u=i;return{h:a,s:l,v:u}}function xw(e,r,t){var n,i,s,o=Math.floor(e*6),a=e*6-o,l=t*(1-r),u=t*(1-a*r),f=t*(1-(1-a)*r);switch(o%6){case 0:n=t,i=f,s=l;break;case 1:n=u,i=t,s=l;break;case 2:n=l,i=t,s=f;break;case 3:n=l,i=u,s=t;break;case 4:n=f,i=l,s=t;break;case 5:n=t,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function _5(e,r,t){var n=xw(e,r,t);return YQ(n.r,n.g,n.b)}function Mft(e){var r=_N(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return ry(r.r,r.g,r.b)}function ZQ(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function XQ(e){return Oft.test(e)}function Lft(e){return Cft.test(e)}function Bc(e){if(e===null||Dr(e)!=="object")return null;if(e instanceof Element)return e;var r=wh(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Dr(e[t])=="object"&&(r[t]=Bc(e[t]));return r}function Fo(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=function(w){return w!=null},s=function(w){return w!==null&&Dr(w)==="object"},o=function(w){for(var b in w)if(Object.prototype.hasOwnProperty.call(w,b))return!1;return!0};if(!s(e))throw new Error("Parameter mergeTarget must be an object");if(!s(r))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(w,b,T){s(w[T])||(w[T]={});var _=b[T],A=w[T];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(A[x]=_[x])},l=r[t],u=s(n)&&!o(n),f=u?n[t]:void 0,c=f?f.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){s(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!s(e[t]))if(i(f))e[t]=wh(f);else return;if(s(l)){var d=!0;l.enabled!==void 0?d=l.enabled:c!==void 0&&(d=f.enabled),a(e,r,t),e[t].enabled=d}}}var Fft={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function mc(e,r){var t;Lr(r)||(r=[r]);var n=VQ(e),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s){t=s[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t<"u")break}}}catch(a){n.e(a)}finally{n.f()}return t}var jft={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},zft=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ft(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return ht(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return jft[t]}},{key:"setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var i,s=this._isColorString(t);if(s!==void 0&&(t=s),_c(t)===!0){if(XQ(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(Lft(t)===!0){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(ZQ(t)===!0){var l=_N(t);i={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:u}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Rb(t));this._setColor(i,n)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n===!0&&(this.previousColor=Wn({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",vl(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n===!0&&(this.initialColor=Wn({},t)),this.color=t;var i=ry(t.r,t.g,t.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var n=ry(this.color.r,this.color.g,this.color.b);n.v=t/100;var i=xw(n.h,n.s,n.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,n=ry(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-n.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Db(i).call(i),this.brightnessRange.value=100*n.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,n,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=nt(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=nt(n=this._apply).call(n,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=nt(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=nt(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new $N(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(n){n.isFirst&&t._moveSelector(n)}),this.hammer.on("tap",function(n){t._moveSelector(n)}),this.hammer.on("panstart",function(n){t._moveSelector(n)}),this.hammer.on("panmove",function(n){t._moveSelector(n)}),this.hammer.on("panend",function(n){t._moveSelector(n)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,n,i);var s,o,a,l;this.centerCoordinates={x:n*.5,y:i*.5},this.r=.49*n;var u=2*Math.PI/360,f=1/360,c=1/this.r,d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(u*a),o=this.centerCoordinates.y+l*Math.cos(u*a),d=xw(a*f,l*c,1),t.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",t.fillRect(s-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,n,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var n=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-n.left,s=t.center.y-n.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,u=s-o,f=Math.atan2(l,u),c=.98*Math.min(Math.sqrt(l*l+u*u),a),d=Math.cos(f)*c+o,y=Math.sin(f)*c+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=y-.5*this.colorPickerSelector.clientWidth+"px";var w=f/(2*Math.PI);w=w<0?w+1:w;var b=c/this.r,T=ry(this.color.r,this.color.g,this.color.b);T.h=w,T.s=b;var _=xw(T.h,T.s,T.v);_.a=this.color.a,this.color=_,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function x5(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var n=document.createElement(r[0]);return n.appendChild(x5.apply(void 0,al(Oi(r).call(r,1)))),n}var Hft=function(){function e(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ft(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Wn(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new zft(i),this.wrapper=void 0}return ht(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof t=="string")this.options.filter=t;else if(Lr(t))this.options.filter=t.join();else if(Dr(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Os(t)!==void 0&&(this.options.filter=Os(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(n=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,n=t):typeof t=="function"&&(this.options.filter=t,n=!0);Os(this.options)===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Os(this.options),n=0,i=!1;for(var s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof t=="function"?(i=t(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(t===!0||Sr(t).call(t,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,n>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var n=this.moduleOptions,i=0;i<t.length;i++)if(n[t[i]]!==void 0)n=n[t[i]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return qr(s).call(s,function(a){n.appendChild(a)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerText=t,this._makeItem([],n)}},{key:"_makeLabel",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+n.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(x5("i","b",t))}else s.innerText=t+":";return s}},{key:"_makeDropdown",value:function(t,n,i){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var o=0;n!==void 0&&Sr(t).call(t,n)!==-1&&(o=Sr(t).call(t,n));for(var a=0;a<t.length;a++){var l=document.createElement("option");l.value=t[a],a===o&&(l.selected="selected"),l.innerText=t[a],s.appendChild(l)}var u=this;s.onchange=function(){u._update(this.value,i)};var f=this._makeLabel(i[i.length-1],i);this._makeItem(i,f,s)}},{key:"_makeRange",value:function(t,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=a}catch{}u.step=l;var f="",c=0;if(n!==void 0){var d=1.2;n<0&&n*d<o?(u.min=Math.ceil(n*d),c=u.min,f="range increased"):n/d<o&&(u.min=Math.ceil(n/d),c=u.min,f="range increased"),n*d>a&&a!==1&&(u.max=Math.ceil(n*d),c=u.max,f="range increased"),u.value=n}else u.value=s;var y=document.createElement("input");y.className="vis-configuration vis-config-rangeinput",y.value=u.value;var w=this;u.onchange=function(){y.value=this.value,w._update(Number(this.value),i)},u.oninput=function(){y.value=this.value};var b=this._makeLabel(i[i.length-1],i),T=this._makeItem(i,b,u,y);f!==""&&this.popupHistory[T]!==c&&(this.popupHistory[T]=c,this._setupPopup(f,T))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=function(){t._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(t,n){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerText=t,s.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],i=n.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=vl(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=vl(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,n,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=t,n!==void 0&&(s.checked=n,n!==t&&(Dr(t)==="object"?n!==t.enabled&&this.changedOptions.push({path:i,value:n}):this.changedOptions.push({path:i,value:n})));var o=this;s.onchange=function(){o._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeTextInput",value:function(t,n,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==t&&this.changedOptions.push({path:i,value:n});var o=this;s.onchange=function(){o._update(this.value,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeColorField",value:function(t,n,i){var s=this,o=t[1],a=document.createElement("div");n=n===void 0?o:n,n!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=n):a.className="vis-configuration vis-config-colorBlock none",n=n===void 0?o:n,a.onclick=function(){s._showColorPicker(n,a,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,a)}},{key:"_showColorPicker",value:function(t,n,i){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var a="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";n.style.backgroundColor=a,s._update(a,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=Os(this.options),a=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){s=!0;var u=t[l],f=U$(n,l);if(typeof o=="function"&&(s=o(l,n),s===!1&&!Lr(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,s=this._handleObject(u,f,!0),this.allowCreation=i===!1)),s!==!1){a=!0;var c=this._getValue(f);if(Lr(u))this._handleArray(u,c,f);else if(typeof u=="string")this._makeTextInput(u,c,f);else if(typeof u=="boolean")this._makeCheckbox(u,c,f);else if(u instanceof Object){if(!this.hideOption(n,l,this.moduleOptions))if(u.enabled!==void 0){var d=U$(f,"enabled"),y=this._getValue(d);if(y===!0){var w=this._makeLabel(l,f,!0);this._makeItem(f,w),a=this._handleObject(u,f)||a}else this._makeCheckbox(u,y,f)}else{var b=this._makeLabel(l,f,!0);this._makeItem(f,b),a=this._handleObject(u,f)||a}}else console.error("dont know how to handle",u,l,f)}}return a}},{key:"_handleArray",value:function(t,n,i){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,n,i),t[1]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="string"?(this._makeDropdown(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="number"&&(this._makeRange(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:Number(n)}))}},{key:"_update",value:function(t,n){var i=this._constructOptions(t,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<n.length;o++)n[o]!=="global"&&(s[n[o]]===void 0&&(s[n[o]]={}),o!==n.length-1?s=s[n[o]]:s[n[o]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(x5("pre","const options = "+Rb(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,t);return t}}]),e}(),Uft=function(){function e(r,t){ft(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return ht(e,[{key:"setPosition",value:function(t,n){this.x=ma(t),this.y=ma(n)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var n=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"){var u=!1,f=!0;this.y-n<this.padding&&(f=!1),this.x+i>o-this.padding&&(u=!0),u?a=this.x-i:a=this.x,f?l=this.y-n:l=this.y}else l=this.y-n,l+n+this.padding>s&&(l=s-n-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),jg=!1,fj,E5="background: #FFeeee; color: #dd0000",Wft=function(){function e(){ft(this,e)}return ht(e,null,[{key:"validate",value:function(t,n,i){jg=!1,fj=n;var s=n;return i!==void 0&&(s=n[i]),e.parse(t,s,[]),jg}},{key:"parse",value:function(t,n,i){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.check(s,t,n,i)}},{key:"check",value:function(t,n,i,s){if(i[t]===void 0&&i.__any__===void 0){e.getSuggestion(t,i,s);return}var o=t,a=!0;i[t]===void 0&&i.__any__!==void 0&&(o="__any__",a=e.getType(n[t])==="object");var l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,n,i,o,l,s)}},{key:"checkFields",value:function(t,n,i,s,o,a){var l=function(d){console.error("%c"+d+e.printLocation(a,t),E5)},u=e.getType(n[t]),f=o[u];f!==void 0?e.getType(f)==="array"&&Sr(f).call(f,n[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(f)+' not "'+n[t]+'". '),jg=!0):u==="object"&&s!=="__any__"&&(a=U$(a,t),e.parse(n[t],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(mn(o))+". Received ["+u+'] "'+n[t]+'"'),jg=!0)}},{key:"getType",value:function(t){var n=Dr(t);return n==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Lr(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(t,n,i){var s=e.findInOptions(t,n,i,!1),o=e.findInOptions(t,fj,[],!0),a=8,l=4,u;s.indexMatch!==void 0?u=" in "+e.printLocation(s.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?u=" in "+e.printLocation(s.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):s.distance<=a?u='. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,t):u=". Did you mean one of these: "+e.print(mn(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+u,E5),jg=!0}},{key:"findInOptions",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],u=t.toLowerCase(),f=void 0;for(var c in n){var d=void 0;if(n[c].__type__!==void 0&&s===!0){var y=e.findInOptions(t,n[c],U$(i,c));o>y.distance&&(a=y.closestMatch,l=y.path,o=y.distance,f=y.indexMatch)}else{var w;Sr(w=c.toLowerCase()).call(w,u)!==-1&&(f=c),d=e.levenshteinDistance(t,c),o>d&&(a=c,l=Pft(i),o=d)}}return{closestMatch:a,path:l,distance:o,indexMatch:f}}},{key:"printLocation",value:function(t,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+i+`options = {
`,o=0;o<t.length;o++){for(var a=0;a<o+1;a++)s+="  ";s+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)s+="  ";s+=n+`
`;for(var u=0;u<t.length+1;u++){for(var f=0;f<t.length-u;f++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(t){return Rb(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,n){if(t.length===0)return n.length;if(n.length===0)return t.length;var i=[],s;for(s=0;s<=n.length;s++)i[s]=[s];var o;for(o=0;o<=t.length;o++)i[0][o]=o;for(s=1;s<=n.length;s++)for(o=1;o<=t.length;o++)n.charAt(s-1)==t.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[n.length][t.length]}}]),e}(),qft=hl,Kft=Hft,Op=$N,Vft=Uft,JQ=E5,Gft=Wft;function Yft(e){return kc=e,Qft()}var QQ={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},xN=wh(QQ);xN.color="color.color";xN.style="dashes";var is={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},hj={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},kc="",hv=0,fr="",jt="",ks=is.NULL;function Zft(){hv=0,fr=kc.charAt(0)}function li(){hv++,fr=kc.charAt(hv)}function Yd(){return kc.charAt(hv+1)}function dj(e){var r=e.charCodeAt(0);return r<47?r===35||r===46:r<59?r>47:r<91?r>64:r<96?r===95:r<123?r>96:!1}function Gc(e,r){if(e||(e={}),r)for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}function Xft(e,r,t){for(var n=r.split("."),i=e;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=t}}function eee(e,r){for(var t,n,i=null,s=[e],o=e;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(r.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:r.id},e.node&&(i.attr=Gc(i.attr,e.node))),t=s.length-1;t>=0;t--){var a,l=s[t];l.nodes||(l.nodes=[]),Sr(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}r.attr&&(i.attr=Gc(i.attr,r.attr))}function Jft(e,r){if(e.edges||(e.edges=[]),e.edges.push(r),e.edge){var t=Gc({},e.edge);r.attr=Gc(t,r.attr)}}function tee(e,r,t,n,i){var s={from:r,to:t,type:n};return e.edge&&(s.attr=Gc({},e.edge)),s.attr=Gc(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Jr(){for(ks=is.NULL,jt="";fr===" "||fr==="	"||fr===`
`||fr==="\r";)li();do{var e=!1;if(fr==="#"){for(var r=hv-1;kc.charAt(r)===" "||kc.charAt(r)==="	";)r--;if(kc.charAt(r)===`
`||kc.charAt(r)===""){for(;fr!=""&&fr!=`
`;)li();e=!0}}if(fr==="/"&&Yd()==="/"){for(;fr!=""&&fr!=`
`;)li();e=!0}if(fr==="/"&&Yd()==="*"){for(;fr!="";)if(fr==="*"&&Yd()==="/"){li(),li();break}else li();e=!0}for(;fr===" "||fr==="	"||fr===`
`||fr==="\r";)li()}while(e);if(fr===""){ks=is.DELIMITER;return}var t=fr+Yd();if(hj[t]){ks=is.DELIMITER,jt=t,li(),li();return}if(hj[fr]){ks=is.DELIMITER,jt=fr,li();return}if(dj(fr)||fr==="-"){for(jt+=fr,li();dj(fr);)jt+=fr,li();jt==="false"?jt=!1:jt==="true"?jt=!0:isNaN(Number(jt))||(jt=Number(jt)),ks=is.IDENTIFIER;return}if(fr==='"'){for(li();fr!=""&&(fr!='"'||fr==='"'&&Yd()==='"');)fr==='"'?(jt+=fr,li()):fr==="\\"&&Yd()==="n"?(jt+=`
`,li()):jt+=fr,li();if(fr!='"')throw ss('End of string " expected');li(),ks=is.IDENTIFIER;return}for(ks=is.UNKNOWN;fr!="";)jt+=fr,li();throw new SyntaxError('Syntax error in part "'+see(jt,30)+'"')}function Qft(){var e={};if(Zft(),Jr(),jt==="strict"&&(e.strict=!0,Jr()),(jt==="graph"||jt==="digraph")&&(e.type=jt,Jr()),ks===is.IDENTIFIER&&(e.id=jt,Jr()),jt!="{")throw ss("Angle bracket { expected");if(Jr(),ree(e),jt!="}")throw ss("Angle bracket } expected");if(Jr(),jt!=="")throw ss("End of file expected");return Jr(),delete e.node,delete e.edge,delete e.graph,e}function ree(e){for(;jt!==""&&jt!="}";)eht(e),jt===";"&&Jr()}function eht(e){var r=nee(e);if(r){iee(e,r);return}var t=tht(e);if(!t){if(ks!=is.IDENTIFIER)throw ss("Identifier expected");var n=jt;if(Jr(),jt==="="){if(Jr(),ks!=is.IDENTIFIER)throw ss("Identifier expected");e[n]=jt,Jr()}else rht(e,n)}}function nee(e){var r=null;if(jt==="subgraph"&&(r={},r.type="subgraph",Jr(),ks===is.IDENTIFIER&&(r.id=jt,Jr())),jt==="{"){if(Jr(),r||(r={}),r.parent=e,r.node=e.node,r.edge=e.edge,r.graph=e.graph,ree(r),jt!="}")throw ss("Angle bracket } expected");Jr(),delete r.node,delete r.edge,delete r.graph,delete r.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(r)}return r}function tht(e){return jt==="node"?(Jr(),e.node=Ey(),"node"):jt==="edge"?(Jr(),e.edge=Ey(),"edge"):jt==="graph"?(Jr(),e.graph=Ey(),"graph"):null}function rht(e,r){var t={id:r},n=Ey();n&&(t.attr=n),eee(e,t),iee(e,r)}function iee(e,r){for(;jt==="->"||jt==="--";){var t,n=jt;Jr();var i=nee(e);if(i)t=i;else{if(ks!=is.IDENTIFIER)throw ss("Identifier or subgraph expected");t=jt,eee(e,{id:t}),Jr()}var s=Ey(),o=tee(e,r,t,n,s);Jft(e,o),r=t}}function Ey(){for(var e,r=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;jt==="[";){for(Jr(),r={};jt!==""&&jt!="]";){if(ks!=is.IDENTIFIER)throw ss("Attribute name expected");var o=jt;if(Jr(),jt!="=")throw ss("Equal sign = expected");if(Jr(),ks!=is.IDENTIFIER)throw ss("Attribute value expected");var a=jt;o==="style"&&(a=t[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:r,name:o,value:a}),s.push(o),Jr(),jt==","&&Jr()}if(jt!="]")throw ss("Bracket ] expected");Jr()}if(pl(s).call(s,"dir")){var u={};for(u.arrows={},e=0;e<i.length;e++)if(i[e].name==="arrows")if(i[e].value.to!=null)u.arrows.to=e;else if(i[e].value.from!=null)u.arrows.from=e;else throw ss("Invalid value of arrows");else i[e].name==="dir"&&(u.dir=e);var f=i[u.dir].value;if(!pl(s).call(s,"arrows"))if(f==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(f==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(f==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(f==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw ss('Invalid dir type "'+f+'"');var c,d;if(f==="both")u.arrows.to&&u.arrows.from?(d=i[u.arrows.to].value.to.type,c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}},cu(i).call(i,u.arrows.from,1)):u.arrows.to?(d=i[u.arrows.to].value.to.type,c="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="arrow",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}});else if(f==="back")u.arrows.to&&u.arrows.from?(d="",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.to?(d="",c="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="",c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(f==="none"){var y;u.arrows.to?y=u.arrows.to:y=u.arrows.from,i[y]={attr:i[y].attr,name:i[y].name,value:""}}else if(f==="forward")u.arrows.to&&u.arrows.from?(d=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.to?(d=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="arrow",c="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw ss('Invalid dir type "'+f+'"');cu(i).call(i,u.dir,1)}var w;if(pl(s).call(s,"penwidth")){var b=[];for(w=i.length,e=0;e<w;e++)i[e].name!=="width"&&(i[e].name==="penwidth"&&(i[e].name="width"),b.push(i[e]));i=b}for(w=i.length,e=0;e<w;e++)Xft(i[e].attr,i[e].name,i[e].value);return r}function ss(e){return new SyntaxError(e+', got "'+see(jt,30)+'" (char '+hv+")")}function see(e,r){return e.length<=r?e:e.substr(0,27)+"..."}function nht(e,r,t){Lr(e)?qr(e).call(e,function(n){Lr(r)?qr(r).call(r,function(i){t(n,i)}):t(n,r)}):Lr(r)?qr(r).call(r,function(n){t(e,n)}):t(e,r)}function hT(e,r,t){for(var n=r.split("."),i=n.pop(),s=e,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=t,e}function pj(e,r){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=r[n];Lr(i)?qr(i).call(i,function(s){hT(t,s,e[n])}):typeof i=="string"?hT(t,i,e[n]):hT(t,n,e[n])}return t}function iht(e){var r=Yft(e),t={nodes:[],edges:[],options:{}};if(r.nodes){var n;qr(n=r.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};Gc(a,pj(o.attr,QQ)),a.image&&(a.shape="image"),t.nodes.push(a)})}if(r.edges){var i,s=function(a){var l={from:a.from,to:a.to};return Gc(l,pj(a.attr,xN)),l.arrows==null&&a.type==="->"&&(l.arrows="to"),l};qr(i=r.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;qr(u=o.from.edges).call(u,function(c){var d=s(c);t.edges.push(d)})}if(nht(a,l,function(c,d){var y=tee(t,c.id,d.id,o.type,o.attr),w=s(y);t.edges.push(w)}),o.to instanceof Object&&o.to.edges){var f;qr(f=o.to.edges).call(f,function(c){var d=s(c);t.edges.push(d)})}})}return r.attr&&(t.options=r.attr),t}function sht(e,r){var t,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};r!=null&&(r.fixed!=null&&(n.nodes.fixed=r.fixed),r.parseColor!=null&&(n.nodes.parseColor=r.parseColor),r.inheritColor!=null&&(n.edges.inheritColor=r.inheritColor));var i=e.edges,s=lv(i).call(i,function(a){var l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l}),o=lv(t=e.nodes).call(t,function(a){var l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l});return{nodes:o,edges:s}}var oht={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},aht={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},lht={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},uht={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},cht={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},fht={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},hht={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},dht={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},pht={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},vht={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},ght={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"},yht=Object.freeze({__proto__:null,cn:dht,cs:ght,de:aht,en:oht,es:lht,fr:vht,it:uht,nl:cht,pt:fht,ru:hht,uk:pht});function mht(e,r){try{var t=r.split(/[-_ /]/,2),n=bn(t,2),i=n[0],s=n[1],o=i!=null?i.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(o&&a){var l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(e,l))return l;var u;console.warn(hN(u="Unknown variant ".concat(a," of language ")).call(u,o,"."))}if(o){var f=o;if(Object.prototype.hasOwnProperty.call(e,f))return f;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(r,", falling back to English.")),"en"}catch(c){return console.error(c),console.warn("Unexpected error while normalizing locale ".concat(r,", falling back to English.")),"en"}}var bht=function(){function e(){ft(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return ht(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,n=this.image.height;this.width=t,this.height=n;var i=Math.floor(n/2),s=Math.floor(n/4),o=Math.floor(n/8),a=Math.floor(n/16),l=Math.floor(t/2),u=Math.floor(t/4),f=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*u,this.canvas.height=i,this.coordinates=[[0,0,l,i],[l,0,u,s],[l,s,f,o],[5*f,s,c,a]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),n=this.coordinates[0];t.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var s=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,n,i,s,o,a){if(this.initialized())if(n>2){n*=.5;for(var l=0;n>2&&l<this.NUM_ITERATIONS;)n*=.5,l+=1;l>=this.NUM_ITERATIONS&&(l=this.NUM_ITERATIONS-1);var u=this.coordinates[l];t.drawImage(this.canvas,u[0],u[1],u[2],u[3],i,s,o,a)}else t.drawImage(this.image,i,s,o,a)}}]),e}(),wht=function(){function e(r){ft(this,e),this.images={},this.imageBroken={},this.callback=r}return ht(e,[{key:"_tryloadBrokenUrl",value:function(t,n,i){if(!(t===void 0||i===void 0)){if(n===void 0){console.warn("No broken url image defined");return}i.image.onerror=function(){console.error("Could not load brokenImage:",n)},i.image.src=n}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,n){var i=this,s=this.images[t];if(s)return s;var o=new bht;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,n,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),e}(),S5={},$ht={get exports(){return S5},set exports(e){S5=e}},dv={},_ht={get exports(){return dv},set exports(e){dv=e}},xht=Tr,Eht=xht(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Sht=Tr,kht=wi,Tht=Cu,vj=Eht,Ew=Object.isExtensible,Iht=Sht(function(){Ew(1)}),Aht=Iht||vj?function(r){return!kht(r)||vj&&Tht(r)=="ArrayBuffer"?!1:Ew?Ew(r):!0}:Ew,Oht=Tr,oee=!Oht(function(){return Object.isExtensible(Object.preventExtensions({}))}),Cht=zt,Pht=Ir,Nht=Sb,Rht=wi,EN=$i,Dht=Jo.f,gj=Ab,Bht=Bx,SN=Aht,Mht=Tx,Lht=oee,aee=!1,_u=Mht("meta"),Fht=0,kN=function(e){Dht(e,_u,{value:{objectID:"O"+Fht++,weakData:{}}})},jht=function(e,r){if(!Rht(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!EN(e,_u)){if(!SN(e))return"F";if(!r)return"E";kN(e)}return e[_u].objectID},zht=function(e,r){if(!EN(e,_u)){if(!SN(e))return!0;if(!r)return!1;kN(e)}return e[_u].weakData},Hht=function(e){return Lht&&aee&&SN(e)&&!EN(e,_u)&&kN(e),e},Uht=function(){Wht.enable=function(){},aee=!0;var e=gj.f,r=Pht([].splice),t={};t[_u]=1,e(t).length&&(gj.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===_u){r(i,s,1);break}return i},Cht({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Bht.f}))},Wht=_ht.exports={enable:Uht,fastKey:jht,getWeakData:zht,onFreeze:Hht};Nht[_u]=!0;var qht=xb,Kht=lo,Vht=co,Ght=qv,Yht=aJ,Zht=Ba,yj=Bn,Xht=hJ,Jht=Dx,mj=oJ,Qht=TypeError,Sw=function(e,r){this.stopped=e,this.result=r},bj=Sw.prototype,TN=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=qht(r,n),u,f,c,d,y,w,b,T=function(A){return u&&mj(u,"normal",A),new Sw(!0,A)},_=function(A){return i?(Vht(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(f=Jht(e),!f)throw Qht(Ght(e)+" is not iterable");if(Yht(f)){for(c=0,d=Zht(e);d>c;c++)if(y=_(e[c]),y&&yj(bj,y))return y;return new Sw(!1)}u=Xht(e,f)}for(w=s?e.next:u.next;!(b=Kht(w,u)).done;){try{y=_(b.value)}catch(A){mj(u,"throw",A)}if(typeof y=="object"&&y&&yj(bj,y))return y}return new Sw(!1)},edt=Bn,tdt=TypeError,IN=function(e,r){if(edt(r,e))return e;throw tdt("Incorrect invocation")},rdt=zt,ndt=Gn,idt=dv,sdt=Tr,odt=Kv,adt=TN,ldt=IN,udt=bi,cdt=wi,fdt=Gv,hdt=Jo.f,ddt=rf.forEach,pdt=ii,lee=ed,vdt=lee.set,gdt=lee.getterFor,AN=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=ndt[e],a=o&&o.prototype,l={},u;if(!pdt||!udt(o)||!(i||a.forEach&&!sdt(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),idt.enable();else{u=r(function(d,y){vdt(ldt(d,f),{type:e,collection:new o}),y!=null&&adt(y,d[s],{that:d,AS_ENTRIES:n})});var f=u.prototype,c=gdt(e);ddt(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(d){var y=d=="add"||d=="set";d in a&&!(i&&d=="clear")&&odt(f,d,function(w,b){var T=c(this).collection;if(!y&&i&&!cdt(w))return d=="get"?void 0:!1;var _=T[d](w===0?0:w,b);return y?this:_})}),i||hdt(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return fdt(u,e,!1,!0),l[e]=u,rdt({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},ydt=Ib,ON=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:ydt(e,n,r[n],t);return e},mdt=Xo,bdt=sN,wdt=Mn,$dt=ii,wj=wdt("species"),_dt=function(e){var r=mdt(e);$dt&&r&&!r[wj]&&bdt(r,wj,{configurable:!0,get:function(){return this}})},xdt=Vv,Edt=sN,$j=ON,Sdt=xb,kdt=IN,Tdt=yb,Idt=TN,Adt=rN,M1=nN,Odt=_dt,zg=ii,_j=dv.fastKey,uee=ed,xj=uee.set,dT=uee.getterFor,cee={getConstructor:function(e,r,t,n){var i=e(function(u,f){kdt(u,s),xj(u,{type:r,index:xdt(null),first:void 0,last:void 0,size:0}),zg||(u.size=0),Tdt(f)||Idt(f,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=dT(r),a=function(u,f,c){var d=o(u),y=l(u,f),w,b;return y?y.value=c:(d.last=y={index:b=_j(f,!0),key:f,value:c,previous:w=d.last,next:void 0,removed:!1},d.first||(d.first=y),w&&(w.next=y),zg?d.size++:u.size++,b!=="F"&&(d.index[b]=y)),u},l=function(u,f){var c=o(u),d=_j(f),y;if(d!=="F")return c.index[d];for(y=c.first;y;y=y.next)if(y.key==f)return y};return $j(s,{clear:function(){for(var f=this,c=o(f),d=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete d[y.index],y=y.next;c.first=c.last=void 0,zg?c.size=0:f.size=0},delete:function(u){var f=this,c=o(f),d=l(f,u);if(d){var y=d.next,w=d.previous;delete c.index[d.index],d.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==d&&(c.first=y),c.last==d&&(c.last=w),zg?c.size--:f.size--}return!!d},forEach:function(f){for(var c=o(this),d=Sdt(f,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(d(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(f){return!!l(this,f)}}),$j(s,t?{get:function(f){var c=l(this,f);return c&&c.value},set:function(f,c){return a(this,f===0?0:f,c)}}:{add:function(f){return a(this,f=f===0?0:f,f)}}),zg&&Edt(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=dT(r),s=dT(n);Adt(e,r,function(o,a){xj(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,M1(void 0,!0)):a=="keys"?M1(l.key,!1):a=="values"?M1(l.value,!1):M1([l.key,l.value],!1)},t?"entries":"values",!t,!0),Odt(r)}},Cdt=AN,Pdt=cee;Cdt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Pdt);var Ndt=xr,Rdt=Ndt.Map,Ddt=Rdt,Bdt=Ddt;(function(e){e.exports=Bdt})($ht);var fee=Pt(S5),Mdt=function(){function e(){ft(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Wn(this.options,this.defaultOptions)}return ht(e,[{key:"setOptions",value:function(t){var n=["useDefaultGroups"];if(t!==void 0){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Sr(n).call(n,i)===-1){var s=t[i];this.add(i,s)}}}},{key:"clear",value:function(){this._groups=new fee,this._groupNames=[]}},{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._groups.get(t);if(i===void 0&&n)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var s=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[s]),this._groups.set(t,i)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}},{key:"add",value:function(t,n){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,n),n}}]),e}(),k5={},Ldt={get exports(){return k5},set exports(e){k5=e}},Fdt=zt;Fdt({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var jdt=xr,zdt=jdt.Number.isNaN,Hdt=zdt,Udt=Hdt;(function(e){e.exports=Udt})(Ldt);var T5=Pt(k5),I5={},Wdt={get exports(){return I5},set exports(e){I5=e}},qdt=Gn,Kdt=qdt.isFinite,Vdt=Number.isFinite||function(r){return typeof r=="number"&&Kdt(r)},Gdt=zt,Ydt=Vdt;Gdt({target:"Number",stat:!0},{isFinite:Ydt});var Zdt=xr,Xdt=Zdt.Number.isFinite,Jdt=Xdt,Qdt=Jdt;(function(e){e.exports=Qdt})(Wdt);var nh=Pt(I5),A5={},ept={get exports(){return A5},set exports(e){A5=e}},tpt=zt,rpt=rf.some,npt=Xv,ipt=npt("some");tpt({target:"Array",proto:!0,forced:!ipt},{some:function(r){return rpt(this,r,arguments.length>1?arguments[1]:void 0)}});var spt=_i,opt=spt("Array").some,apt=Bn,lpt=opt,pT=Array.prototype,upt=function(e){var r=e.some;return e===pT||apt(pT,e)&&r===pT.some?lpt:r},cpt=upt,fpt=cpt;(function(e){e.exports=fpt})(ept);var hpt=Pt(A5),O5={},dpt={get exports(){return O5},set exports(e){O5=e}},hee=Gn,ppt=Tr,vpt=Ir,gpt=xl,ypt=dN.trim,mpt=Kx,bpt=vpt("".charAt),W$=hee.parseFloat,Ej=hee.Symbol,Sj=Ej&&Ej.iterator,wpt=1/W$(mpt+"-0")!==-1/0||Sj&&!ppt(function(){W$(Object(Sj))}),$pt=wpt?function(r){var t=ypt(gpt(r)),n=W$(t);return n===0&&bpt(t,0)=="-"?-0:n}:W$,_pt=zt,kj=$pt;_pt({global:!0,forced:parseFloat!=kj},{parseFloat:kj});var xpt=xr,Ept=xpt.parseFloat,Spt=Ept,kpt=Spt;(function(e){e.exports=kpt})(dpt);var dee=Pt(O5),C5={},Tpt={get exports(){return C5},set exports(e){C5=e}},Ipt=zt,Apt=Tr,Opt=Bx.f,Cpt=Apt(function(){return!Object.getOwnPropertyNames(1)});Ipt({target:"Object",stat:!0,forced:Cpt},{getOwnPropertyNames:Opt});var Ppt=xr,Npt=Ppt.Object,Rpt=function(r){return Npt.getOwnPropertyNames(r)},Dpt=Rpt,Bpt=Dpt;(function(e){e.exports=Bpt})(Tpt);var Mpt=Pt(C5);function CN(e,r){var t=["node","edge","label"],n=!0,i=mc(r,"chosen");if(typeof i=="boolean")n=i;else if(Dr(i)==="object"){if(Sr(t).call(t,e)===-1)throw new Error("choosify: subOption '"+e+"' should be one of '"+t.join("', '")+"'");var s=mc(r,["chosen",e]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function P5(e,r,t){if(e.width<=0||e.height<=0)return!1;if(t!==void 0){var n={x:r.x-t.x,y:r.y-t.y};if(t.angle!==0){var i=-t.angle,s={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y};r=s}else r=n}var o=e.x+e.width,a=e.y+e.width;return e.left<r.x&&o>r.x&&e.top<r.y&&a>r.y}function q$(e){return typeof e=="string"&&e!==""}function pee(e,r,t,n){var i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){var o=n.distanceToBorder(e,r),a=Math.sin(r)*o,l=Math.cos(r)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-t):(i=n.x+t,s=n.y-n.shape.height*.5);return{x:i,y:s}}var N5={},Lpt={get exports(){return N5},set exports(e){N5=e}},Fpt=_i,jpt=Fpt("Array").values,zpt=jpt,Hpt=zpt,Upt=Qh,Wpt=$i,qpt=Bn,Kpt=Hpt,vT=Array.prototype,Vpt={DOMTokenList:!0,NodeList:!0},Gpt=function(e){var r=e.values;return e===vT||qpt(vT,e)&&r===vT.values||Wpt(Vpt,Upt(e))?Kpt:r};(function(e){e.exports=Gpt})(Lpt);var vee=Pt(N5),Ypt=function(){function e(r){ft(this,e),this.measureText=r,this.current=0,this.width=0,this.height=0,this.lines=[]}return ht(e,[{key:"_add",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});var s=n;(n===void 0||n==="")&&(s=" ");var o=this.measureText(s,i),a=Wn({},vee(o));a.text=n,a.width=o.width,a.mod=i,(n===void 0||n==="")&&(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return t===void 0?0:t.width}},{key:"append",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n)}},{key:"newLine",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var n=this.lines[t],i=0;if(n.blocks!==void 0)for(var s=0;s<n.blocks.length;s++){var o=n.blocks[s];i<o.height&&(i=o.height)}n.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,n=0,i=0;i<this.lines.length;i++){var s=this.lines[i];s.width>t&&(t=s.width),n+=s.height}this.width=t,this.height=n}},{key:"removeEmptyBlocks",value:function(){for(var t=[],n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.blocks.length!==0&&!(n===this.lines.length-1&&i.width===0)){var s={};Wn(s,i),s.blocks=[];for(var o=void 0,a=[],l=0;l<i.blocks.length;l++){var u=i.blocks[l];u.width!==0?a.push(u):o===void 0&&(o=u)}a.length===0&&o!==void 0&&a.push(o),s.blocks=a,t.push(s)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),e}(),Zpt={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},Tj=function(){function e(r){ft(this,e),this.text=r,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return ht(e,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return/[ \t]/.test(t)?(this.mono?this.add(t):this.spacing=!0,!0):!1}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,n){return!this.mono&&!this[t]&&this.match(n)?(this.setTag(t),!0):!1}},{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.prepareRegExp(t),s=bn(i,2),o=s[0],a=s[1],l=o.test(this.text.substr(this.position,a));return l&&n&&(this.position+=a-1),l}},{key:"parseEndTag",value:function(t,n,i){var s=this.mod()===t;return t==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(n)?(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0):!1}},{key:"replace",value:function(t,n){return this.match(t)?(this.add(n),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(t){var n,i;if(t instanceof RegExp)i=t,n=1;else{var s=Zpt[t];s!==void 0?i=s:i=new RegExp(t),n=t.length}return[i,n]}}]),e}(),Xpt=function(){function e(r,t,n,i){var s=this;ft(this,e),this.ctx=r,this.parent=t,this.selected=n,this.hover=i;var o=function(l,u){if(l===void 0)return 0;var f=s.parent.getFormattingValues(r,n,i,u),c=0;if(l!==""){var d=s.ctx.measureText(l);c=d.width}return{width:c,values:f}};this.lines=new Ypt(o)}return ht(e,[{key:"process",value:function(t){if(!q$(t))return this.lines.finalize();var n=this.parent.fontOptions;t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`);var i=String(t).split(`
`),s=i.length;if(n.multi)for(var o=0;o<s;o++){var a=this.splitBlocks(i[o],n.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(n.maxWdt>0)for(var l=0;l<a.length;l++){var u=a[l].mod,f=a[l].text;this.splitStringIntoLines(f,u,!0)}else for(var c=0;c<a.length;c++){var d=a[c].mod,y=a[c].text;this.lines.append(y,d)}this.lines.newLine()}}else if(n.maxWdt>0)for(var w=0;w<s;w++)this.splitStringIntoLines(i[w]);else for(var b=0;b<s;b++)this.lines.newLine(i[b]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var n="none";return t==="markdown"||t==="md"?n="markdown":(t===!0||t==="html")&&(n="html"),n}},{key:"splitHtmlBlocks",value:function(t){for(var n=new Tj(t),i=function(l){if(/&/.test(l)){var u=n.replace(n.text,"&lt;","<")||n.replace(n.text,"&amp;","&");return u||n.add("&"),!0}return!1};n.position<n.text.length;){var s=n.text.charAt(n.position),o=n.parseWS(s)||/</.test(s)&&(n.parseStartTag("bold","<b>")||n.parseStartTag("ital","<i>")||n.parseStartTag("mono","<code>")||n.parseEndTag("bold","</b>")||n.parseEndTag("ital","</i>")||n.parseEndTag("mono","</code>"))||i(s);o||n.add(s),n.position++}return n.emitBlock(),n.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var n=this,i=new Tj(t),s=!0,o=function(f){return/\\/.test(f)?(i.position<n.text.length+1&&(i.position++,f=n.text.charAt(i.position),/ \t/.test(f)?i.spacing=!0:(i.add(f),s=!1)),!0):!1};i.position<i.text.length;){var a=i.text.charAt(i.position),l=i.parseWS(a)||o(a)||(s||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono");l||(i.add(a),s=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,n){var i=this.decodeMarkupSystem(n);if(i==="none")return[{text:t,mod:"normal"}];if(i==="markdown")return this.splitMarkdownBlocks(t);if(i==="html")return this.splitHtmlBlocks(t)}},{key:"overMaxWidth",value:function(t){var n=this.ctx.measureText(t).width;return this.lines.curWidth()+n>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var n="",i=0;i<t.length;){var s=n===""?"":" ",o=n+s+t[i];if(this.overMaxWidth(o))break;n=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var n=0;n<t.length&&!this.overMaxWidth(Oi(t).call(t,0,n));)n++;return n}},{key:"splitStringIntoLines",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,n),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var s=t.split("\r");s.length>0;){var o=this.getLongestFit(s);if(o===0){var a=s[0],l=this.getLongestFitWord(a);this.lines.newLine(Oi(a).call(a,0,l),n),s[0]=Oi(a).call(a,l)}else{var u=o;s[o-1]===" "?o--:s[u]===" "&&u++;var f=Oi(s).call(s,0,o).join("");o==s.length&&i?this.lines.append(f,n):this.lines.newLine(f,n),s=Oi(s).call(s,u)}}}}]),e}(),Hg=["bold","ital","boldital","mono"],gee=function(){function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ft(this,e),this.body=r,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return ht(e,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),q$(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(Dr(t.font)==="object"){var n=t.font.size;n!==void 0&&(this.baseSize=n)}}}},{key:"initFontOptions",value:function(t){var n=this;if(gr(Hg,function(i){n.fontOptions[i]={}}),e.parseFontString(this.fontOptions,t)){this.fontOptions.vadjust=0;return}gr(t,function(i,s){i!=null&&Dr(i)!=="object"&&(n.fontOptions[s]=i)})}},{key:"constrain",value:function(t){var n={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=mc(t,"widthConstraint");if(typeof i=="number")n.maxWdt=Number(i),n.minWdt=Number(i);else if(Dr(i)==="object"){var s=mc(t,["widthConstraint","maximum"]);typeof s=="number"&&(n.maxWdt=Number(s));var o=mc(t,["widthConstraint","minimum"]);typeof o=="number"&&(n.minWdt=Number(o))}var a=mc(t,"heightConstraint");if(typeof a=="number")n.minHgt=Number(a);else if(Dr(a)==="object"){var l=mc(t,["heightConstraint","minimum"]);typeof l=="number"&&(n.minHgt=Number(l));var u=mc(t,["heightConstraint","valign"]);typeof u=="string"&&(u==="top"||u==="bottom")&&(n.valign=u)}return n}},{key:"update",value:function(t,n){this.setOptions(t,!0),this.propagateFonts(n),Xr(this.fontOptions,this.constrain(n)),this.fontOptions.chooser=CN("label",n)}},{key:"adjustSizes",value:function(t){var n=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=n,this.fontOptions.minWdt-=n);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,n){for(var i=0;i<n.length;++i)this.addFontToPile(t,n[i])}},{key:"addFontToPile",value:function(t,n){if(n!==void 0&&!(n.font===void 0||n.font===null)){var i=n.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var s=t[i],o={};e.parseFontString(o,s)&&(s=o),gr(s,function(a,l){a!==void 0&&(Object.prototype.hasOwnProperty.call(n,l)||(Sr(Hg).call(Hg,l)!==-1?n[l]={}:n[l]=a))})}return n}},{key:"getFontOption",value:function(t,n,i){for(var s,o=0;o<t.length;++o){var a=t[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(s=a[n],s==null)continue;var l={};if(e.parseFontString(l,s)&&(s=l),Object.prototype.hasOwnProperty.call(s,i))return s[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,n){for(var i={},s=["color","size","face","mod","vadjust"],o=0;o<s.length;++o){var a=s[o];i[a]=this.getFontOption(t,n,a)}return i}},{key:"propagateFonts",value:function(t){var n=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var s=function(){var l=Hg[o],u=n.fontOptions[l],f=n.getFontOptions(i,l);gr(f,function(c,d){u[d]=c}),u.size=Number(u.size),u.vadjust=Number(u.vadjust)},o=0;o<Hg.length;++o)s()}},{key:"draw",value:function(t,n,i,s,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var l=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&l<this.elementOptions.scaling.label.drawThreshold-1||(l>=this.elementOptions.scaling.label.maxVisible&&(l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,s,o,n,i,a),this._drawBackground(t),this._drawText(t,n,this.size.yLine,a,l))}}},{key:"_drawBackground",value:function(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var n=this.getSize();t.fillRect(n.left,n.top,n.width,n.height)}}},{key:"_drawText",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,a=this._setAlignment(t,n,i,s),l=bn(a,2);n=l[0],i=l[1],t.textAlign="left",n=n-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(var u=0;u<this.lineCount;u++){var f=this.lines[u];if(f&&f.blocks){var c=0;this.isEdgeLabel||this.fontOptions.align==="center"?c+=(this.size.width-f.width)/2:this.fontOptions.align==="right"&&(c+=this.size.width-f.width);for(var d=0;d<f.blocks.length;d++){var y=f.blocks[d];t.font=y.font;var w=this._getColor(y.color,o,y.strokeColor),b=bn(w,2),T=b[0],_=b[1];y.strokeWidth>0&&(t.lineWidth=y.strokeWidth,t.strokeStyle=_,t.lineJoin="round"),t.fillStyle=T,y.strokeWidth>0&&t.strokeText(y.text,n+c,i+y.vadjust),t.fillText(y.text,n+c,i+y.vadjust),c+=y.width}i+=f.height}}}},{key:"_setAlignment",value:function(t,n,i,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){n=0,i=0;var o=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*o):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*o):t.textBaseline="middle"}else t.textBaseline=s;return[n,i]}},{key:"_getColor",value:function(t,n,i){var s=t||"#000000",o=i||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));s=Uo(s,a),o=Uo(o,a)}return[s,o]}},{key:"getTextSize",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(t,n,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=2,n=this.size.left,i=this.size.top-.5*t;if(this.isEdgeLabel){var s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":n=s,i=-this.size.height*.5;break;case"top":n=s,i=-(this.size.height+t);break;case"bottom":n=s,i=t;break}}var o={left:n,top:i,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,n,i),this.size.left=s-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,n,i,s){var o=function(f,c,d){return c==="normal"?d==="mod"?"":f[d]:f[c][d]!==void 0?f[c][d]:f[d]},a={color:o(this.fontOptions,s,"color"),size:o(this.fontOptions,s,"size"),face:o(this.fontOptions,s,"face"),mod:o(this.fontOptions,s,"mod"),vadjust:o(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(n||i)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,n,i));var l="";return a.mod!==void 0&&a.mod!==""&&(l+=a.mod+" "),l+=a.size+"px "+a.face,t.font=l.replace(/"/g,""),a.font=t.font,a.height=a.size,a}},{key:"differentState",value:function(t,n){return t!==this.selectedState||n!==this.hoverState}},{key:"_processLabelText",value:function(t,n,i,s){var o=new Xpt(t,this,n,i);return o.process(s)}},{key:"_processLabel",value:function(t,n,i){if(!(this.labelDirty===!1&&!this.differentState(n,i))){var s=this._processLabelText(t,n,i,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=n,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var t=this.fontOptions.size*this.body.view.scale;return!(t<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,n){if(!n||typeof n!="string")return!1;var i=n.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),e}(),R5={},Jpt={get exports(){return R5},set exports(e){R5=e}},Qpt=Rx,evt=qv,tvt=TypeError,rvt=function(e){if(Qpt(e))return e;throw tvt(evt(e)+" is not a constructor")},nvt=zt,ivt=Xo,gT=pb,svt=HX,Ij=rvt,ovt=co,Aj=wi,avt=Vv,yee=Tr,PN=ivt("Reflect","construct"),lvt=Object.prototype,uvt=[].push,mee=yee(function(){function e(){}return!(PN(function(){},[],e)instanceof e)}),bee=!yee(function(){PN(function(){})}),Oj=mee||bee;nvt({target:"Reflect",stat:!0,forced:Oj,sham:Oj},{construct:function(r,t){Ij(r),ovt(t);var n=arguments.length<3?r:Ij(arguments[2]);if(bee&&!mee)return PN(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return gT(uvt,i,t),new(gT(svt,r,i))}var s=n.prototype,o=avt(Aj(s)?s:lvt),a=gT(r,o,t);return Aj(a)?a:o}});var cvt=xr,fvt=cvt.Reflect.construct,hvt=fvt,dvt=hvt;(function(e){e.exports=dvt})(Jpt);var qe=Pt(R5),D5={},pvt={get exports(){return D5},set exports(e){D5=e}},B5={},vvt={get exports(){return B5},set exports(e){B5=e}},gvt=mQ,yvt=gvt,mvt=yvt,bvt=mvt;(function(e){e.exports=bvt})(vvt);(function(e){e.exports=B5})(pvt);var wvt=Pt(D5),M5={},$vt={get exports(){return M5},set exports(e){M5=e}},L5={},_vt={get exports(){return L5},set exports(e){L5=e}},xvt=zt,Evt=iQe;xvt({target:"Object",stat:!0},{setPrototypeOf:Evt});var Svt=xr,kvt=Svt.Object.setPrototypeOf,Tvt=kvt,Ivt=Tvt,Avt=Ivt,Ovt=Avt,Cvt=Ovt,Pvt=Cvt;(function(e){e.exports=Pvt})(_vt);(function(e){e.exports=L5})($vt);var F5=Pt(M5),j5={},Nvt={get exports(){return j5},set exports(e){j5=e}},z5={},Rvt={get exports(){return z5},set exports(e){z5=e}},Dvt=UX,Bvt=Dvt,Mvt=Bvt,Lvt=Mvt;(function(e){e.exports=Lvt})(Rvt);(function(e){e.exports=z5})(Nvt);var NN=Pt(j5);function H5(e,r){var t;return H5=F5?NN(t=F5).call(t):function(i,s){return i.__proto__=s,i},H5(e,r)}function Or(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=wvt(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Wx(e,"prototype",{writable:!1}),r&&H5(e,r)}function Fvt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fr(e,r){if(r&&(Dr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fvt(e)}var U5={},jvt={get exports(){return U5},set exports(e){U5=e}},W5={},zvt={get exports(){return W5},set exports(e){W5=e}},Hvt=dQ,Uvt=Hvt,Wvt=Uvt,qvt=Wvt;(function(e){e.exports=qvt})(zvt);(function(e){e.exports=W5})(jvt);var Cj=Pt(U5);function Tt(e){var r;return Tt=F5?NN(r=Cj).call(r):function(n){return n.__proto__||Cj(n)},Tt(e)}var id=function(){function e(r,t,n){ft(this,e),this.body=t,this.labelModule=n,this.setOptions(r),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&(Dr(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,n){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(n)),Math.abs(this.height/2/Math.sin(n)))+i}},{key:"enableShadow",value:function(t,n){n.shadow&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,n){if(n.borderDashes!==!1)if(t.setLineDash!==void 0){var i=n.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,n){n.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1))}},{key:"needsRefresh",value:function(t,n){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,n)}},{key:"initContextForDraw",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=n.borderColor,t.fillStyle=n.color}},{key:"performStroke",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,n),t.stroke(),this.disableBorderDashes(t,n)),t.restore()}},{key:"performFill",value:function(t,n){t.save(),t.fillStyle=n.color,this.enableShadow(t,n),Db(t).call(t),this.disableShadow(t,n),t.restore(),this.performStroke(t,n)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,n,i,s,o){i!==void 0&&this.resize(i,s,o),this.left=t-this.width/2,this.top=n-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,n,i,s,o){this._updateBoundingBox(t,n,i,s,o)}},{key:"getDimensionsFromLabel",value:function(t,n,i){this.textSize=this.labelModule.getTextSize(t,n,i);var s=this.textSize.width,o=this.textSize.height,a=14;return s===0&&(s=a,o=a),{width:s,height:o}}}]),e}();function Kvt(e){var r=Vvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Vvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Gvt=function(e){Or(t,e);var r=Kvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.width=a.width+this.margin.right+this.margin.left,this.height=a.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),WX(i,this.left,this.top,this.width,this.height,u.borderRadius),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"updateBoundingBox",value:function(i,s,o,a,l){this._updateBoundingBox(i,s,o,a,l);var u=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(u)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(s)),Math.abs(this.height/2/Math.sin(s)))+o}}]),t}(id);function Yvt(e){var r=Zvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Zvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var RN=function(e){Or(t,e);var r=Yvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o.labelOffset=0,o.selected=!1,o}return ht(t,[{key:"setOptions",value:function(i,s,o){this.options=i,s===void 0&&o===void 0||this.setImages(s,o)}},{key:"setImages",value:function(i,s){s&&this.selected?(this.imageObj=s,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=s)}},{key:"switchImages",value:function(i){var s=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&s){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var i={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var s=this.options.imagePadding;Dr(s)=="object"?(i.top=s.top,i.right=s.right,i.bottom=s.bottom,i.left=s.left):(i.top=s,i.right=s,i.bottom=s,i.left=s)}return i}},{key:"_resizeImage",value:function(){var i,s;if(this.options.shapeProperties.useImageSize===!1){var o=1,a=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:a=this.imageObj.height/this.imageObj.width),i=this.options.size*2*o,s=this.options.size*2*a}else{var l=this._getImagePadding();i=this.imageObj.width+l.left+l.right,s=this.imageObj.height+l.top+l.bottom}this.width=i,this.height=s,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,s,o,a){this.initContextForDraw(i,a),J4(i,s,o,a.size),this.performFill(i,a)}},{key:"_drawImageAtPosition",value:function(i,s){if(this.imageObj.width!=0){i.globalAlpha=s.opacity!==void 0?s.opacity:1,this.enableShadow(i,s);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var a=this._getImagePadding(),l=this.left+a.left,u=this.top+a.top,f=this.width-a.left-a.right,c=this.height-a.top-a.bottom;this.imageObj.drawImageAtPosition(i,o,l,u,f,c),this.disableShadow(i,s)}}},{key:"_drawImageLabel",value:function(i,s,o,a,l){var u=0;if(this.height!==void 0){u=this.height*.5;var f=this.labelModule.getTextSize(i,a,l);f.lineCount>=1&&(u+=f.height/2)}var c=o+u;this.options.label&&(this.labelOffset=u),this.labelModule.draw(i,s,c,a,l,"hanging")}}]),t}(id);function Xvt(e){var r=Jvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Jvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Qvt=function(e){Or(t,e);var r=Xvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=Math.max(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=l/2,this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this._drawRawCircle(i,s,o,u),this.updateBoundingBox(s,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,o,a,l)}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(RN);function egt(e){var r=tgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function tgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var rgt=function(e){Or(t,e);var r=egt(t);function t(n,i,s,o,a){var l;return ft(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l,this.radius=.5*this.width;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){this.switchImages(a),this.resize();var f=s,c=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,f+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this._drawRawCircle(i,f,c,u),i.save(),i.clip(),this._drawImageAtPosition(i,u),i.restore(),this._drawImageLabel(i,f,c,a,l),this.updateBoundingBox(s,o)}},{key:"updateBoundingBox",value:function(i,s){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=s,this.boundingBox.left=i,this.boundingBox.right=i+this.options.size*2,this.boundingBox.bottom=s+this.options.size*2):(this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(RN);function ngt(e){var r=igt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function igt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var of=function(e){Or(t,e);var r=ngt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,o)){var l,u;this.labelModule.getTextSize(i,s,o);var f=2*a.size;this.width=(l=this.customSizeWidth)!==null&&l!==void 0?l:f,this.height=(u=this.customSizeHeight)!==null&&u!==void 0?u:f,this.radius=.5*this.width}}},{key:"_drawShape",value:function(i,s,o,a,l,u,f,c){var d=this;return this.resize(i,u,f,c),this.left=a-this.width/2,this.top=l-this.height/2,this.initContextForDraw(i,c),wXe(s)(i,a,l,c.size),this.performFill(i,c),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(i.font=(u?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",i.fillText(this.options.icon.code,a,l)),{drawExternalLabel:function(){if(d.options.label!==void 0){d.labelModule.calculateLabelSize(i,u,f,a,l,"hanging");var w=l+.5*d.height+.5*d.labelModule.size.height;d.labelModule.draw(i,a,w,u,f,"hanging")}d.updateBoundingBox(a,l)}}}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),t}(id);function Pj(e,r){var t=mn(e);if(Kc){var n=Kc(e);r&&(n=Os(n).call(n,function(i){return nf(e,i).enumerable})),t.push.apply(t,n)}return t}function sgt(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=Pj(Object(i),!0)).call(t,function(s){qx(e,s,i[s])}):Vc?Hx(e,Vc(i)):qr(n=Pj(Object(i))).call(n,function(s){Ux(e,s,nf(i,s))})}return e}function ogt(e){var r=agt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function agt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var lgt=function(e){Or(t,e);var r=ogt(t);function t(n,i,s,o){var a;return ft(this,t),a=r.call(this,n,i,s,o),a.ctxRenderer=o,a}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l,u),this.left=s-this.width/2,this.top=o-this.height/2,i.save();var f=this.ctxRenderer({ctx:i,id:this.options.id,x:s,y:o,state:{selected:a,hover:l},style:sgt({},u),label:this.options.label});if(f.drawNode!=null&&f.drawNode(),i.restore(),f.drawExternalLabel){var c=f.drawExternalLabel;f.drawExternalLabel=function(){i.save(),c(),i.restore()}}return f.nodeDimensions&&(this.customSizeWidth=f.nodeDimensions.width,this.customSizeHeight=f.nodeDimensions.height),f}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function ugt(e){var r=cgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function cgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var fgt=function(e){Or(t,e);var r=ugt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=a.width+this.margin.right+this.margin.left;this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),qX(i,s-this.width/2,o-this.height/2,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(id);function hgt(e){var r=dgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function dgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var pgt=function(e){Or(t,e);var r=hgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"diamond",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function vgt(e){var r=ggt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function ggt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ygt=function(e){Or(t,e);var r=vgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"circle",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.options.size}}]),t}(of);function mgt(e){var r=bgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function bgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Nj=function(e){Or(t,e);var r=mgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.height=a.height*2,this.width=a.width+a.height,this.radius=.5*this.width}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(i,u),cC(i,this.left,this.top,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,s,o,a,l)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.width*.5,a=this.height*.5,l=Math.sin(s)*o,u=Math.cos(s)*a;return o*a/Math.sqrt(l*l+u*u)}}]),t}(id);function wgt(e){var r=$gt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function $gt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var _gt=function(e){Or(t,e);var r=wgt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){var f=this;return this.resize(i,a,l),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=o-this.height/2,this._icon(i,s,o,a,l,u),{drawExternalLabel:function(){if(f.options.label!==void 0){var d=5;f.labelModule.draw(i,f.left+f.iconSize.width/2+f.margin.left,o+f.height/2+d,a)}f.updateBoundingBox(s,o)}}}},{key:"updateBoundingBox",value:function(i,s){if(this.boundingBox.top=s-this.options.icon.size*.5,this.boundingBox.left=i-this.options.icon.size*.5,this.boundingBox.right=i+this.options.icon.size*.5,this.boundingBox.bottom=s+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(i,s,o,a,l,u){var f=Number(this.options.icon.size);this.options.icon.code!==void 0?(i.font=[this.options.icon.weight!=null?this.options.icon.weight:a?"bold":"",(this.options.icon.weight!=null&&a?5:0)+f+"px",this.options.icon.face].join(" "),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",this.enableShadow(i,u),i.fillText(this.options.icon.code,s,o),this.disableShadow(i,u)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(id);function xgt(e){var r=Egt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Egt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Sgt=function(e){Or(t,e);var r=xgt(t);function t(n,i,s,o,a){var l;return ft(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){i.save(),this.switchImages(a),this.resize();var f=s,c=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,f+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var d=this.options.borderWidth,y=this.options.borderWidthSelected||2*this.options.borderWidth,w=(a?y:d)/this.body.view.scale;i.lineWidth=Math.min(this.width,w),i.beginPath();var b=a?this.options.color.highlight.border:l?this.options.color.hover.border:this.options.color.border,T=a?this.options.color.highlight.background:l?this.options.color.hover.background:this.options.color.background;u.opacity!==void 0&&(b=Uo(b,u.opacity),T=Uo(T,u.opacity)),i.strokeStyle=b,i.fillStyle=T,i.rect(this.left-.5*i.lineWidth,this.top-.5*i.lineWidth,this.width+i.lineWidth,this.height+i.lineWidth),Db(i).call(i),this.performStroke(i,u),i.closePath()}this._drawImageAtPosition(i,u),this._drawImageLabel(i,f,c,a,l),this.updateBoundingBox(s,o),i.restore()}},{key:"updateBoundingBox",value:function(i,s){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=i,this.top=s):(this.left=i-this.width/2,this.top=s-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(RN);function kgt(e){var r=Tgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Tgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Igt=function(e){Or(t,e);var r=kgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"square",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function Agt(e){var r=Ogt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ogt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Cgt=function(e){Or(t,e);var r=Agt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"hexagon",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function Pgt(e){var r=Ngt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ngt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Rgt=function(e){Or(t,e);var r=Pgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"star",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function Dgt(e){var r=Bgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Bgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Mgt=function(e){Or(t,e);var r=Dgt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.textSize=this.labelModule.getTextSize(i,s,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.enableShadow(i,u),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l),this.disableShadow(i,u),this.updateBoundingBox(s,o,i,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(id);function Lgt(e){var r=Fgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Fgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var jgt=function(e){Or(t,e);var r=Lgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangle",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function zgt(e){var r=Hgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Hgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Ugt=function(e){Or(t,e);var r=zgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangleDown",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(of);function Rj(e,r){var t=mn(e);if(Kc){var n=Kc(e);r&&(n=Os(n).call(n,function(i){return nf(e,i).enumerable})),t.push.apply(t,n)}return t}function Dj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=Rj(Object(i),!0)).call(t,function(s){qx(e,s,i[s])}):Vc?Hx(e,Vc(i)):qr(n=Rj(Object(i))).call(n,function(s){Ux(e,s,nf(i,s))})}return e}var Ks=function(){function e(r,t,n,i,s,o){ft(this,e),this.options=Bc(s),this.globalOptions=s,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new gee(this.body,this.options,!1),this.setOptions(r)}return ht(e,[{key:"attachEdge",value:function(t){var n;Sr(n=this.edges).call(n,t)===-1&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var n,i=Sr(n=this.edges).call(n,t);if(i!=-1){var s;cu(s=this.edges).call(s,i,1)}}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(typeof t.color<"u"&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");e.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ma(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ma(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=dee(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=CN("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),t.hidden!==void 0||t.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var n=this.options.opacity;t.borderColor=Uo(t.borderColor,n),t.color=Uo(t.color,n),t.shadowColor=Uo(t.shadowColor,n)}return t}},{key:"updateLabelModule",value:function(t){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),e.updateGroupOptions(this.options,Dj(Dj({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Gvt(this.options,this.body,this.labelModule);break;case"circle":this.shape=new Qvt(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new rgt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new lgt(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new fgt(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new pgt(this.options,this.body,this.labelModule);break;case"dot":this.shape=new ygt(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Nj(this.options,this.body,this.labelModule);break;case"icon":this.shape=new _gt(this.options,this.body,this.labelModule);break;case"image":this.shape=new Sgt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Igt(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new Cgt(this.options,this.body,this.labelModule);break;case"star":this.shape=new Rgt(this.options,this.body,this.labelModule);break;case"text":this.shape=new Mgt(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new jgt(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Ugt(this.options,this.body,this.labelModule);break;default:this.shape=new Nj(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,n){return this.shape.distanceToBorder(t,n)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.size=this.options.scaling.min+s*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var n=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,n)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var n=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,n)}},{key:"getItemsOnPoint",value:function(t){var n=[];return this.labelModule.visible()&&P5(this.labelModule.getSize(),t)&&n.push({nodeId:this.id,labelId:0}),P5(this.shape.boundingBox,t)&&n.push({nodeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return t===void 0||t==="center"||t==="top-left"}},{key:"updateGroupOptions",value:function(t,n,i){var s;if(i!==void 0){var o=t.group;if(n!==void 0&&n.group!==void 0&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");var a=typeof o=="number"||typeof o=="string"&&o!="";if(a){var l=i.get(o);l.opacity!==void 0&&n.opacity===void 0&&(e.checkOpacity(l.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+l.opacity),l.opacity=void 0));var u=Os(s=Mpt(n)).call(s,function(f){return n[f]!=null});u.push("font"),H$(u,t,l),t.color=$5(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(H$(a,t,n,i),e.checkMass(n),t.opacity!==void 0&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),n.opacity!==void 0&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),Fo(t,n,"shadow",s),n.color!==void 0&&n.color!==null){var l=$5(n.color);GQ(t.color,l)}else i===!0&&n.color===null&&(t.color=Bc(s.color));n.fixed!==void 0&&n.fixed!==null&&(typeof n.fixed=="boolean"?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(n.fixed.x!==void 0&&typeof n.fixed.x=="boolean"&&(t.fixed.x=n.fixed.x),n.fixed.y!==void 0&&typeof n.fixed.y=="boolean"&&(t.fixed.y=n.fixed.y))),i===!0&&n.font===null&&(t.font=Bc(s.font)),e.updateGroupOptions(t,n,o),n.scaling!==void 0&&Fo(t.scaling,n.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,n){if(t.mass!==void 0&&t.mass<=0){var i="";n!==void 0&&(i=" in node id: "+n),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",JQ),t.mass=1}}}]),e}();function Wgt(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=qgt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function qgt(e,r){var t;if(e){if(typeof e=="string")return Bj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bj(e,r)}}function Bj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Kgt=function(){function e(r,t,n,i){var s,o=this;if(ft(this,e),this.body=r,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=nt(s=this.create).call(s,this),this.nodesListeners={add:function(l,u){o.add(u.items)},update:function(l,u){o.update(u.items,u.data,u.oldData)},remove:function(l,u){o.remove(u.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(l,u,f,c){if(u===l)return .5;var d=1/(u-l);return Math.max(0,(c-l)*d)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Bc(this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t,n,i=this;this.body.emitter.on("refreshNodes",nt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",nt(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",function(){gr(i.nodesListeners,function(s,o){i.body.data.nodes&&i.body.data.nodes.off(o,s)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){if(Ks.parseOptions(this.options,t),t.opacity!==void 0&&(T5(t.opacity)||!nh(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(var n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&this.body.nodes[n].updateShape();if(typeof t.font<"u"||typeof t.widthConstraint<"u"||typeof t.heightConstraint<"u")for(var i=0,s=mn(this.body.nodes);i<s.length;i++){var o=s[i];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(t.size!==void 0)for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.body.nodes[a].needsRefresh();(t.hidden!==void 0||t.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.data.nodes;if(EX("id",t))this.body.data.nodes=t;else if(Lr(t))this.body.data.nodes=new xa,this.body.data.nodes.add(t);else if(!t)this.body.data.nodes=new xa;else throw new TypeError("Array or DataSet expected");if(i&&gr(this.nodesListeners,function(a,l){i.off(l,a)}),this.body.nodes={},this.body.data.nodes){var s=this;gr(this.nodesListeners,function(a,l){s.body.data.nodes.on(l,a)});var o=this.body.data.nodes.getIds();this.add(o,!0)}n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i,s=[],o=0;o<t.length;o++){i=t[o];var a=this.body.data.nodes.get(i),l=this.create(a);s.push(l),this.body.nodes[i]=l}this.layoutEngine.positionInitially(s),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,n,i){for(var s=this.body.nodes,o=!1,a=0;a<t.length;a++){var l=t[a],u=s[l],f=n[a];u!==void 0?u.setOptions(f)&&(o=!0):(o=!0,u=this.create(f),s[l]=u)}!o&&i!==void 0&&(o=hpt(n).call(n,function(c,d){var y=i[d];return y&&y.level!==c.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var n=this.body.nodes,i=0;i<t.length;i++){var s=t[i];delete n[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ks;return new n(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;gr(this.body.nodes,function(i,s){var o=t.body.data.nodes.get(s);o!==void 0&&(n===!0&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var n={};if(t!==void 0){if(Lr(t)===!0){for(var i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){var s=this.body.nodes[t[i]];n[t[i]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[t]!==void 0){var o=this.body.nodes[t];n[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];n[this.body.nodeIndices[a]]={x:Math.round(l.x),y:Math.round(l.y)}}return n}},{key:"getPosition",value:function(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t=[],n=this.body.data.nodes.getDataSet(),i=Wgt(n.get()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.id,l=this.body.nodes[a],u=Math.round(l.x),f=Math.round(l.y);(o.x!==u||o.y!==f)&&t.push({id:a,x:u,y:f})}}catch(c){i.e(c)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,n){var i=[];if(this.body.nodes[t]!==void 0)for(var s=this.body.nodes[t],o={},a=0;a<s.edges.length;a++){var l=s.edges[a];n!=="to"&&l.toId==s.id?o[l.fromId]===void 0&&(i.push(l.fromId),o[l.fromId]=!0):n!=="from"&&l.fromId==s.id&&o[l.toId]===void 0&&(i.push(l.toId),o[l.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var n=[];if(this.body.nodes[t]!==void 0)for(var i=this.body.nodes[t],s=0;s<i.edges.length;s++)n.push(i.edges[s].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return n}},{key:"moveNode",value:function(t,n,i){var s=this;this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(n),this.body.nodes[t].y=Number(i),vl(function(){s.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),e}(),q5={},Vgt={get exports(){return q5},set exports(e){q5=e}},K5={},Ggt={get exports(){return K5},set exports(e){K5=e}},Mj=$i,Ygt=function(e){return e!==void 0&&(Mj(e,"value")||Mj(e,"writable"))},Zgt=zt,Xgt=lo,Jgt=wi,Qgt=co,eyt=Ygt,tyt=Uv,ryt=Nx;function wee(e,r){var t=arguments.length<3?e:arguments[2],n,i;if(Qgt(e)===t)return e[r];if(n=tyt.f(e,r),n)return eyt(n)?n.value:n.get===void 0?void 0:Xgt(n.get,t);if(Jgt(i=ryt(e)))return wee(i,r,t)}Zgt({target:"Reflect",stat:!0},{get:wee});var nyt=xr,iyt=nyt.Reflect.get,syt=iyt,oyt=syt,ayt=oyt,lyt=ayt,uyt=lyt,cyt=uyt;(function(e){e.exports=cyt})(Ggt);(function(e){e.exports=K5})(Vgt);var Lj=Pt(q5),V5={},fyt={get exports(){return V5},set exports(e){V5=e}},G5={},hyt={get exports(){return G5},set exports(e){G5=e}},dyt=KJ,pyt=dyt,vyt=pyt,gyt=vyt;(function(e){e.exports=gyt})(hyt);(function(e){e.exports=G5})(fyt);var yyt=Pt(V5);function myt(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Tt(e),e!==null););return e}function kw(){if(typeof Reflect<"u"&&Lj){var e;kw=NN(e=Lj).call(e)}else kw=function(t,n,i){var s=myt(t,n);if(s){var o=yyt(s,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return kw.apply(this,arguments)}var Y5={},byt={get exports(){return Y5},set exports(e){Y5=e}},wyt=zt,Fj=Math.hypot,$yt=Math.abs,_yt=Math.sqrt,xyt=!!Fj&&Fj(1/0,NaN)!==1/0;wyt({target:"Math",stat:!0,arity:2,forced:xyt},{hypot:function(r,t){for(var n=0,i=0,s=arguments.length,o=0,a,l;i<s;)a=$yt(arguments[i++]),o<a?(l=o/a,n=n*l*l+1,o=a):a>0?(l=a/o,n+=l*l):n+=a;return o===1/0?1/0:o*_yt(n)}});var Eyt=xr,Syt=Eyt.Math.hypot,kyt=Syt,Tyt=kyt;(function(e){e.exports=Tyt})(byt);var Iyt=Pt(Y5);function $ee(e){var r=Ayt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ayt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Rn=function(){function e(){ft(this,e)}return ht(e,null,[{key:"transform",value:function(t,n){Lr(t)||(t=[t]);for(var i=n.point.x,s=n.point.y,o=n.angle,a=n.length,l=0;l<t.length;++l){var u=t[l],f=u.x*Math.cos(o)-u.y*Math.sin(o),c=u.x*Math.sin(o)+u.y*Math.cos(o);u.x=i+a*f,u.y=s+a*c}}},{key:"drawPath",value:function(t,n){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)t.lineTo(n[i].x,n[i].y);t.closePath()}}]),e}(),Oyt=function(e){Or(t,e);var r=$ee(t);function t(){return ft(this,t),r.apply(this,arguments)}return ht(t,null,[{key:"draw",value:function(i,s){if(s.image){i.save(),i.translate(s.point.x,s.point.y),i.rotate(Math.PI/2+s.angle);var o=s.imageWidth!=null?s.imageWidth:s.image.width,a=s.imageHeight!=null?s.imageHeight:s.image.height;s.image.drawImageAtPosition(i,1,-o/2,0,o,a),i.restore()}return!1}}]),t}(Rn),Cyt=function(e){Or(t,e);var r=$ee(t);function t(){return ft(this,t),r.apply(this,arguments)}return ht(t,null,[{key:"draw",value:function(i,s){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Rn.transform(o,s),Rn.drawPath(i,o),!0}}]),t}(Rn),Pyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),Nyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};Rn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle-s/2,a=n.angle+s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),Ryt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.3,y:0};Rn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle+s/2,a=n.angle+3*s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),Dyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),Byt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),Myt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};return Rn.transform(i,n),J4(t,i.x,i.y,n.length*.4),!0}}]),e}(),Lyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),Fyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),jyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),zyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),_ee=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i;switch(n.type&&(i=n.type.toLowerCase()),i){case"image":return Oyt.draw(t,n);case"circle":return Myt.draw(t,n);case"box":return Fyt.draw(t,n);case"crow":return Pyt.draw(t,n);case"curve":return Nyt.draw(t,n);case"diamond":return jyt.draw(t,n);case"inv_curve":return Ryt.draw(t,n);case"triangle":return Dyt.draw(t,n);case"inv_triangle":return Byt.draw(t,n);case"bar":return Lyt.draw(t,n);case"vee":return zyt.draw(t,n);case"arrow":default:return Cyt.draw(t,n)}}}]),e}();function jj(e,r){var t=mn(e);if(Kc){var n=Kc(e);r&&(n=Os(n).call(n,function(i){return nf(e,i).enumerable})),t.push.apply(t,n)}return t}function zj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=jj(Object(i),!0)).call(t,function(s){qx(e,s,i[s])}):Vc?Hx(e,Vc(i)):qr(n=jj(Object(i))).call(n,function(s){Ux(e,s,nf(i,s))})}return e}var xee=function(){function e(r,t,n){ft(this,e),this._body=t,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(r),this.fromPoint=this.from,this.toPoint=this.to}return ht(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,n),t.lineWidth=n.width,n.dashes!==!1?this._drawDashedLine(t,n,o):this._drawLine(t,n,o)}},{key:"_drawLine",value:function(t,n,i,s,o){if(this.from!=this.to)this._line(t,n,i,s,o);else{var a=this._getCircleData(t),l=bn(a,3),u=l[0],f=l[1],c=l[2];this._circle(t,n,u,f,c)}}},{key:"_drawDashedLine",value:function(t,n,i,s,o){t.lineCap="round";var a=Lr(n.dashes)?n.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,n,i);else{var l=this._getCircleData(t),u=bn(l,3),f=u[0],c=u[1],d=u[2];this._circle(t,n,f,c,d)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)KX(t,this.from.x,this.from.y,this.to.x,this.to.y,a);else{var y=this._getCircleData(t),w=bn(y,3),b=w[0],T=w[1],_=w[2];this._circle(t,n,b,T,_)}this.enableShadow(t,n),t.stroke(),this.disableShadow(t,n)}}},{key:"findBorderPosition",value:function(t,n,i){return this.from!=this.to?this._findBorderPosition(t,n,i):this._findBorderPositionCircle(t,n,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var n,i=Oi(n=this._getCircleData(t)).call(n,0,2),s=bn(i,2),o=s[0],a=s[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var n=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);var i=pee(t,this.options.selfReference.angle,n,this.from);return[i.x,i.y,n]}},{key:"_pointOnCircle",value:function(t,n,i,s){var o=s*2*Math.PI;return{x:t+i*Math.cos(o),y:n-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,n,i){var s=i.x,o=i.y,a=i.low,l=i.high,u=i.direction,f=10,c=this.options.selfReference.size,d=.05,y,w=(a+l)*.5,b=0;this.options.arrowStrikethrough===!0&&(u===-1?b=this.options.endPointOffset.from:u===1&&(b=this.options.endPointOffset.to));var T=0;do{w=(a+l)*.5,y=this._pointOnCircle(s,o,c,w);var _=Math.atan2(t.y-y.y,t.x-y.x),A=t.distanceToBorder(n,_)+b,x=Math.sqrt(Math.pow(y.x-t.x,2)+Math.pow(y.y-t.y,2)),I=A-x;if(Math.abs(I)<d)break;I>0?u>0?a=w:l=w:u>0?l=w:a=w,++T}while(a<=l&&T<f);return zj(zj({},y),{},{t:w})}},{key:"getLineWidth",value:function(t,n){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):n===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,n){if(n.inheritsColor!==!1){if(n.inheritsColor==="both"&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=Uo(this.from.options.color.border,n.opacity),o=Uo(this.to.options.color.border,n.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),i.addColorStop(0,s),i.addColorStop(1,o),i}return n.inheritsColor==="to"?Uo(this.to.options.color.border,n.opacity):Uo(this.from.options.color.border,n.opacity)}else return Uo(n.color,n.opacity)}},{key:"_circle",value:function(t,n,i,s,o){this.enableShadow(t,n);var a=0,l=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var u=this.options.selfReference.angle,f=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:f,direction:-1}),d=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:f,direction:1});a=Math.atan2(c.y-s,c.x-i),l=Math.atan2(d.y-s,d.x-i)}t.beginPath(),t.arc(i,s,o,a,l,!1),t.stroke(),this.disableShadow(t,n)}},{key:"getDistanceToEdge",value:function(t,n,i,s,o,a){if(this.from!=this.to)return this._getDistanceToEdge(t,n,i,s,o,a);var l=this._getCircleData(void 0),u=bn(l,3),f=u[0],c=u[1],d=u[2],y=f-o,w=c-a;return Math.abs(Math.sqrt(y*y+w*w)-d)}},{key:"_getDistanceToLine",value:function(t,n,i,s,o,a){var l=i-t,u=s-n,f=l*l+u*u,c=((o-t)*l+(a-n)*u)/f;c>1?c=1:c<0&&(c=0);var d=t+c*l,y=n+c*u,w=d-o,b=y-a;return Math.sqrt(w*w+b*b)}},{key:"getArrowData",value:function(t,n,i,s,o,a){var l,u,f,c,d,y,w,b=a.width;n==="from"?(f=this.from,c=this.to,d=a.fromArrowScale<0,y=Math.abs(a.fromArrowScale),w=a.fromArrowType):n==="to"?(f=this.to,c=this.from,d=a.toArrowScale<0,y=Math.abs(a.toArrowScale),w=a.toArrowType):(f=this.to,c=this.from,d=a.middleArrowScale<0,y=Math.abs(a.middleArrowScale),w=a.middleArrowType);var T=15*y+3*b;if(f!=c){var _=Iyt(f.x-c.x,f.y-c.y),A=T/_;if(n!=="middle")if(this.options.smooth.enabled===!0){var x=this._findBorderPosition(f,t,{via:i}),I=this.getPoint(x.t+A*(n==="from"?1:-1),i);l=Math.atan2(x.y-I.y,x.x-I.x),u=x}else l=Math.atan2(f.y-c.y,f.x-c.x),u=this._findBorderPosition(f,t);else{var O=(d?-A:A)/2,C=this.getPoint(.5+O,i),g=this.getPoint(.5-O,i);l=Math.atan2(C.y-g.y,C.x-g.x),u=this.getPoint(.5,i)}}else{var M=this._getCircleData(t),B=bn(M,3),z=B[0],V=B[1],ne=B[2];if(n==="from"){var re=this.options.selfReference.angle,J=this.options.selfReference.angle+Math.PI,F=this._findBorderPositionCircle(this.from,t,{x:z,y:V,low:re,high:J,direction:-1});l=F.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=F}else if(n==="to"){var Z=this.options.selfReference.angle,ie=this.options.selfReference.angle+Math.PI,_e=this._findBorderPositionCircle(this.from,t,{x:z,y:V,low:Z,high:ie,direction:1});l=_e.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=_e}else{var we=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(z,V,ne,we),l=we*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var Ce=u.x-T*.9*Math.cos(l),He=u.y-T*.9*Math.sin(l),Ge={x:Ce,y:He};return{point:u,core:Ge,angle:l,length:T,type:w}}},{key:"drawArrowHead",value:function(t,n,i,s,o){t.strokeStyle=this.getColor(t,n),t.fillStyle=t.strokeStyle,t.lineWidth=n.width;var a=_ee.draw(t,o);a&&(this.enableShadow(t,n),Db(t).call(t),this.disableShadow(t,n))}},{key:"enableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,n){if(n.background!==!1){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=n.backgroundColor,t.lineWidth=n.backgroundSize,this.setStrokeDashed(t,n.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,n.dashes)}}},{key:"setStrokeDashed",value:function(t,n){if(n!==!1)if(t.setLineDash!==void 0){var i=Lr(n)?n:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function Hj(e,r){var t=mn(e);if(Kc){var n=Kc(e);r&&(n=Os(n).call(n,function(i){return nf(e,i).enumerable})),t.push.apply(t,n)}return t}function Uj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=Hj(Object(i),!0)).call(t,function(s){qx(e,s,i[s])}):Vc?Hx(e,Vc(i)):qr(n=Hj(Object(i))).call(n,function(s){Ux(e,s,nf(i,s))})}return e}function Hyt(e){var r=Uyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Uyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var DN=function(e){Or(t,e);var r=Hyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_findBorderPositionBezier",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),a=10,l=.2,u=!1,f=1,c=0,d=this.to,y,w,b=this.options.endPointOffset?this.options.endPointOffset.to:0;i.id===this.from.id&&(d=this.from,u=!0,b=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(b=0);var T=0;do{w=(c+f)*.5,y=this.getPoint(w,o);var _=Math.atan2(d.y-y.y,d.x-y.x),A=d.distanceToBorder(s,_)+b,x=Math.sqrt(Math.pow(y.x-d.x,2)+Math.pow(y.y-d.y,2)),I=A-x;if(Math.abs(I)<l)break;I<0?u===!1?c=w:f=w:u===!1?f=w:c=w,++T}while(c<=f&&T<a);return Uj(Uj({},y),{},{t:w})}},{key:"_getDistanceToBezierEdge",value:function(i,s,o,a,l,u,f){var c=1e9,d,y,w,b,T,_=i,A=s;for(y=1;y<10;y++)w=.1*y,b=Math.pow(1-w,2)*i+2*w*(1-w)*f.x+Math.pow(w,2)*o,T=Math.pow(1-w,2)*s+2*w*(1-w)*f.y+Math.pow(w,2)*a,y>0&&(d=this._getDistanceToLine(_,A,b,T,l,u),c=d<c?d:c),_=b,A=T;return c}},{key:"_bezierCurve",value:function(i,s,o,a){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?a!=null&&a.x!=null?i.bezierCurveTo(o.x,o.y,a.x,a.y,this.toPoint.x,this.toPoint.y):i.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):i.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(i,s),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),t}(xee);function Wyt(e){var r=qyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function qyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Wj=function(e){Or(t,e);var r=Wyt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return ht(t,[{key:"setOptions",value:function(i){kw(Tt(t.prototype),"setOptions",this).call(this,i);var s=!1;this.options.physics!==i.physics&&(s=!0),this.options=i,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),s===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var i="edgeId:"+this.id,s=this._body.functions.createNode({id:i,shape:"circle",physics:!0,hidden:!0});this._body.nodes[i]=s,this.via=s,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),a=bn(o,3),l=a[0],u=a[1],f=a[2],c=2*Math.PI*(1-i);return{x:l+f*Math.sin(c),y:u+f-f*(1-Math.cos(c))}}else return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*s.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*s.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s,this.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToBezierEdge(i,s,o,a,l,u,this.via)}}]),t}(DN);function Kyt(e){var r=Vyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Vyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var qj=function(e){Or(t,e);var r=Kyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var i=this.options.smooth.roundness,s=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),a=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){var l,u;o<=a?l=u=i*a:l=u=i*o,this.from.x>this.to.x&&(l=-l),this.from.y>=this.to.y&&(u=-u);var f=this.from.x+l,c=this.from.y+u;return s==="discrete"&&(o<=a?f=o<i*a?this.from.x:f:c=a<i*o?this.from.y:c),{x:f,y:c}}else if(s==="straightCross"){var d=(1-i)*o,y=(1-i)*a;return o<=a?(d=0,this.from.y<this.to.y&&(y=-y)):(this.from.x<this.to.x&&(d=-d),y=0),{x:this.to.x+d,y:this.to.y+y}}else if(s==="horizontal"){var w=(1-i)*o;return this.from.x<this.to.x&&(w=-w),{x:this.to.x+w,y:this.from.y}}else if(s==="vertical"){var b=(1-i)*a;return this.from.y<this.to.y&&(b=-b),{x:this.from.x,y:this.to.y+b}}else if(s==="curvedCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var T=Math.sqrt(o*o+a*a),_=Math.PI,A=Math.atan2(a,o),x=(A+(i*.5+.5)*_)%(2*_);return{x:this.from.x+(i*.5+.5)*T*Math.sin(x),y:this.from.y+(i*.5+.5)*T*Math.cos(x)}}else if(s==="curvedCCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var I=Math.sqrt(o*o+a*a),O=Math.PI,C=Math.atan2(a,o),g=(C+(-i*.5+.5)*O)%(2*O);return{x:this.from.x+(i*.5+.5)*I*Math.sin(g),y:this.from.y+(i*.5+.5)*I*Math.cos(g)}}else{var M,B;o<=a?M=B=i*a:M=B=i*o,this.from.x>this.to.x&&(M=-M),this.from.y>=this.to.y&&(B=-B);var z=this.from.x+M,V=this.from.y+B;return o<=a?this.from.x<=this.to.x?z=this.to.x<z?this.to.x:z:z=this.to.x>z?this.to.x:z:this.from.y>=this.to.y?V=this.to.y>V?this.to.y:V:V=this.to.y<V?this.to.y:V,{x:z,y:V}}}},{key:"_findBorderPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(i,s,o.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(i,s,o,a,l,u,f)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=i,a=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*s.x+Math.pow(o,2)*this.toPoint.x,l=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*s.y+Math.pow(o,2)*this.toPoint.y;return{x:a,y:l}}}]),t}(DN);function Gyt(e){var r=Yyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Yyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Zyt=function(e){Or(t,e);var r=Gyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_getDistanceToBezierEdge2",value:function(i,s,o,a,l,u,f,c){for(var d=1e9,y=i,w=s,b=[0,0,0,0],T=1;T<10;T++){var _=.1*T;b[0]=Math.pow(1-_,3),b[1]=3*_*Math.pow(1-_,2),b[2]=3*Math.pow(_,2)*(1-_),b[3]=Math.pow(_,3);var A=b[0]*i+b[1]*f.x+b[2]*c.x+b[3]*o,x=b[0]*s+b[1]*f.y+b[2]*c.y+b[3]*a;if(T>0){var I=this._getDistanceToLine(y,w,A,x,l,u);d=I<d?I:d}y=A,w=x}return d}}]),t}(DN);function Xyt(e){var r=Jyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Jyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Kj=function(e){Or(t,e);var r=Xyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s,o){var a=o[0],l=o[1];this._bezierCurve(i,s,a,l)}},{key:"_getViaCoordinates",value:function(){var i=this.from.x-this.to.x,s=this.from.y-this.to.y,o,a,l,u,f=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(a=this.from.y,u=this.to.y,o=this.from.x-f*i,l=this.to.x+f*i):(a=this.from.y-f*s,u=this.to.y+f*s,o=this.from.x,l=this.to.x),[{x:o,y:a},{x:l,y:u}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),c=bn(f,2),d=c[0],y=c[1];return this._getDistanceToBezierEdge2(i,s,o,a,l,u,d,y)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=bn(s,2),a=o[0],l=o[1],u=i,f=[Math.pow(1-u,3),3*u*Math.pow(1-u,2),3*Math.pow(u,2)*(1-u),Math.pow(u,3)],c=f[0]*this.fromPoint.x+f[1]*a.x+f[2]*l.x+f[3]*this.toPoint.x,d=f[0]*this.fromPoint.y+f[1]*a.y+f[2]*l.y+f[3]*this.toPoint.y;return{x:c,y:d}}}]),t}(Zyt);function Qyt(e){var r=emt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function emt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Vj=function(e){Or(t,e);var r=Qyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),i.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(i){return{x:(1-i)*this.fromPoint.x+i*this.toPoint.x,y:(1-i)*this.fromPoint.y+i*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){var o=this.to,a=this.from;i.id===this.from.id&&(o=this.from,a=this.to);var l=Math.atan2(o.y-a.y,o.x-a.x),u=o.x-a.x,f=o.y-a.y,c=Math.sqrt(u*u+f*f),d=i.distanceToBorder(s,l),y=(c-d)/c;return{x:(1-y)*a.x+y*o.x,y:(1-y)*a.y+y*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToLine(i,s,o,a,l,u)}}]),t}(xee),Cp=function(){function e(r,t,n,i,s){if(ft(this,e),t===void 0)throw new Error("No body provided");this.options=Bc(i),this.globalOptions=i,this.defaultOptions=s,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new gee(this.body,this.options,!0),this.setOptions(r)}return ht(e,[{key:"setOptions",value:function(t){if(t){var n=typeof t.physics<"u"&&this.options.physics!==t.physics||typeof t.hidden<"u"&&(this.options.hidden||!1)!==(t.hidden||!1)||typeof t.from<"u"&&this.options.from!==t.from||typeof t.to<"u"&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=dee(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=CN("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,n=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:n,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var a=this.options.selectionWidth;typeof a=="function"?o.width=a(o.width):typeof a=="number"&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var l=this.options.hoverWidth;typeof l=="function"?o.width=l(o.width):typeof l=="number"&&(o.width+=l),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var n=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,n=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof Wj&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof Kj&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof qj&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof Vj&&t.type.enabled===!1)&&(i=!1),i===!0&&(n=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(n=!0,this.edgeType=new Wj(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new Kj(this.options,this.body,this.labelModule):this.edgeType=new qj(this.options,this.body,this.labelModule):this.edgeType=new Vj(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),n}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.width=this.options.scaling.min+s*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,n,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,n.fromArrow&&(s.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),n.fromArrowSrc&&(s.from.image=this.imagelist.load(n.fromArrowSrc)),n.fromArrowImageWidth&&(s.from.imageWidth=n.fromArrowImageWidth),n.fromArrowImageHeight&&(s.from.imageHeight=n.fromArrowImageHeight)),n.toArrow&&(s.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),n.toArrowSrc&&(s.to.image=this.imagelist.load(n.toArrowSrc)),n.toArrowImageWidth&&(s.to.imageWidth=n.toArrowImageWidth),n.toArrowImageHeight&&(s.to.imageHeight=n.toArrowImageHeight)),n.middleArrow&&(s.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,n),n.middleArrowSrc&&(s.middle.image=this.imagelist.load(n.middleArrowSrc)),n.middleArrowImageWidth&&(s.middle.imageWidth=n.middleArrowImageWidth),n.middleArrowImageHeight&&(s.middle.imageHeight=n.middleArrowImageHeight)),n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.to)}}},{key:"drawLabel",value:function(t,n){if(this.options.label!==void 0){var i=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover);var o;if(i.id!=s.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,n),t.save();var a=this._getRotation(t);a.angle!=0&&(t.translate(a.x,a.y),t.rotate(a.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var l=pee(t,this.options.selfReference.angle,this.options.selfReference.size,i);o=this._pointOnCircle(l.x,l.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var n=[];if(this.labelModule.visible()){var i=this._getRotation();P5(this.labelModule.getSize(),t,i)&&n.push({edgeId:this.id,labelId:0})}var s={left:t.x,top:t.y};return this.isOverlappingWith(s)&&n.push({edgeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){if(this.connected){var n=10,i=this.from.x,s=this.from.y,o=this.to.x,a=this.to.y,l=t.left,u=t.top,f=this.edgeType.getDistanceToEdge(i,s,o,a,l,u);return f<n}else return!1}},{key:"_getRotation",value:function(t){var n=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,n);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var s={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;var o=this.from.y-this.to.y,a=this.from.x-this.to.x,l=Math.atan2(o,a);return(l<-1&&a<0||l>0&&a<0)&&(l+=Math.PI),s.angle=l,s}},{key:"_pointOnCircle",value:function(t,n,i,s){return{x:t+i*Math.cos(s),y:n-i*Math.sin(s)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(Qv(a,t,n,i),n.endPointOffset!==void 0&&n.endPointOffset.from!==void 0&&(nh(n.endPointOffset.from)?t.endPointOffset.from=n.endPointOffset.from:(t.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),n.endPointOffset!==void 0&&n.endPointOffset.to!==void 0&&(nh(n.endPointOffset.to)?t.endPointOffset.to=n.endPointOffset.to:(t.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),q$(n.label)?t.label=n.label:q$(t.label)||(t.label=void 0),Fo(t,n,"smooth",s),Fo(t,n,"shadow",s),Fo(t,n,"background",s),n.dashes!==void 0&&n.dashes!==null?t.dashes=n.dashes:i===!0&&n.dashes===null&&(t.dashes=wh(s.dashes)),n.scaling!==void 0&&n.scaling!==null?(n.scaling.min!==void 0&&(t.scaling.min=n.scaling.min),n.scaling.max!==void 0&&(t.scaling.max=n.scaling.max),Fo(t.scaling,n.scaling,"label",s.scaling)):i===!0&&n.scaling===null&&(t.scaling=wh(s.scaling)),n.arrows!==void 0&&n.arrows!==null)if(typeof n.arrows=="string"){var l=n.arrows.toLowerCase();t.arrows.to.enabled=Sr(l).call(l,"to")!=-1,t.arrows.middle.enabled=Sr(l).call(l,"middle")!=-1,t.arrows.from.enabled=Sr(l).call(l,"from")!=-1}else if(Dr(n.arrows)==="object")Fo(t.arrows,n.arrows,"to",s.arrows),Fo(t.arrows,n.arrows,"middle",s.arrows),Fo(t.arrows,n.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Rb(n.arrows));else i===!0&&n.arrows===null&&(t.arrows=wh(s.arrows));if(n.color!==void 0&&n.color!==null){var u=_c(n.color)?{color:n.color,highlight:n.color,hover:n.color,inherit:!1,opacity:1}:n.color,f=t.color;if(o)Xr(f,s.color,!1,i);else for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&delete f[c];if(_c(f))f.color=f,f.highlight=f,f.hover=f,f.inherit=!1,u.opacity===void 0&&(f.opacity=1);else{var d=!1;u.color!==void 0&&(f.color=u.color,d=!0),u.highlight!==void 0&&(f.highlight=u.highlight,d=!0),u.hover!==void 0&&(f.hover=u.hover,d=!0),u.inherit!==void 0&&(f.inherit=u.inherit),u.opacity!==void 0&&(f.opacity=Math.min(1,Math.max(0,u.opacity))),d===!0?f.inherit=!1:f.inherit===void 0&&(f.inherit="from")}}else i===!0&&n.color===null&&(t.color=Bc(s.color));i===!0&&n.font===null&&(t.font=Bc(s.font)),Object.prototype.hasOwnProperty.call(n,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=n.selfReferenceSize)}}]),e}(),tmt=function(){function e(r,t,n){var i,s=this;ft(this,e),this.body=r,this.images=t,this.groups=n,this.body.functions.createEdge=nt(i=this.create).call(i,this),this.edgesListeners={add:function(a,l){s.add(l.items)},update:function(a,l){s.update(l.items)},remove:function(a,l){s.remove(l.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,l,u,f){if(l===a)return .5;var c=1/(l-a);return Math.max(0,(f-a)*c)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Xr(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n,i;this.body.emitter.on("_forceDisableDynamicCurves",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");var a=!1;for(var l in t.body.edges)if(Object.prototype.hasOwnProperty.call(t.body.edges,l)){var u=t.body.edges[l],f=t.body.data.edges.get(l);if(f!=null){var c=f.smooth;c!==void 0&&c.enabled===!0&&c.type==="dynamic"&&(s===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:s}}),a=!0)}}o===!0&&a===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",nt(n=this.refresh).call(n,this)),this.body.emitter.on("refresh",nt(i=this.refresh).call(i,this)),this.body.emitter.on("destroy",function(){gr(t.edgesListeners,function(s,o){t.body.data.edges&&t.body.data.edges.off(o,s)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){Cp.parseOptions(this.options,t,!0,this.defaultOptions,!0);var n=!1;if(t.smooth!==void 0)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(n=this.body.edges[i].updateEdgeType()||n);if(t.font!==void 0)for(var s in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,s)&&this.body.edges[s].updateLabelModule();(t.hidden!==void 0||t.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.body.data.edges;if(EX("id",t))this.body.data.edges=t;else if(Lr(t))this.body.data.edges=new xa,this.body.data.edges.add(t);else if(!t)this.body.data.edges=new xa;else throw new TypeError("Array or DataSet expected");if(s&&gr(this.edgesListeners,function(a,l){s.off(l,a)}),this.body.edges={},this.body.data.edges){gr(this.edgesListeners,function(a,l){n.body.data.edges.on(l,a)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.edges,s=this.body.data.edges,o=0;o<t.length;o++){var a=t[o],l=i[a];l&&l.disconnect();var u=s.get(a,{showInternalIds:!0});i[a]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var n=this.body.edges,i=this.body.data.edges,s=!1,o=0;o<t.length;o++){var a=t[o],l=i.get(a),u=n[a];u!==void 0?(u.disconnect(),s=u.setOptions(l)||s,u.connect()):(this.body.edges[a]=this.create(l),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.length!==0){var i=this.body.edges;gr(t,function(s){var o=i[s];o!==void 0&&o.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;gr(this.body.edges,function(n,i){var s=t.body.data.edges.get(i);s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(t){return new Cp(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,n=this.body.nodes,i=this.body.edges;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var s=i[t];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(t){var n=[];if(this.body.edges[t]!==void 0){var i=this.body.edges[t];i.fromId!==void 0&&n.push(i.fromId),i.toId!==void 0&&n.push(i.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,n=[];gr(this.body.edges,function(i,s){var o=t.body.nodes[i.toId],a=t.body.nodes[i.fromId];o!==void 0&&o.isCluster===!0||a!==void 0&&a.isCluster===!0||(o===void 0||a===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(t!=null){var n=this.body.edges,i=[];qr(t).call(t,function(s,o){var a=n[o];a===void 0&&i.push(o)}),this.add(i,!0)}}}]),e}(),Eee=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=Yx("BARNES HUT SOLVER")}return ht(e,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t,n=this.body.nodes,i=this.physicsBody.physicsNodeIndices,s=i.length,o=this._formBarnesHutTree(n,i);this.barnesHutTree=o;for(var a=0;a<s;a++)t=n[i[a]],t.options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,n){this._getForceContribution(t.children.NW,n),this._getForceContribution(t.children.NE,n),this._getForceContribution(t.children.SW,n),this._getForceContribution(t.children.SE,n)}},{key:"_getForceContribution",value:function(t,n){if(t.childrenCount>0){var i=t.centerOfMass.x-n.x,s=t.centerOfMass.y-n.y,o=Math.sqrt(i*i+s*s);o*t.calcSize>this.thetaInversed?this._calculateForces(o,i,s,n,t):t.childrenCount===4?this._getForceContributions(t,n):t.children.data.id!=n.id&&this._calculateForces(o,i,s,n,t)}}},{key:"_calculateForces",value:function(t,n,i,s,o){t===0&&(t=.1,n=t),this.overlapAvoidanceFactor<1&&s.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius));var a=this.options.gravitationalConstant*o.mass*s.options.mass/Math.pow(t,3),l=n*a,u=i*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}},{key:"_formBarnesHutTree",value:function(t,n){for(var i,s=n.length,o=t[n[0]].x,a=t[n[0]].y,l=t[n[0]].x,u=t[n[0]].y,f=1;f<s;f++){var c=t[n[f]],d=c.x,y=c.y;c.options.mass>0&&(d<o&&(o=d),d>l&&(l=d),y<a&&(a=y),y>u&&(u=y))}var w=Math.abs(l-o)-Math.abs(u-a);w>0?(a-=.5*w,u+=.5*w):(o+=.5*w,l-=.5*w);var b=1e-5,T=Math.max(b,Math.abs(l-o)),_=.5*T,A=.5*(o+l),x=.5*(a+u),I={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:A-_,maxX:A+_,minY:x-_,maxY:x+_},size:T,calcSize:1/T,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(I.root);for(var O=0;O<s;O++)i=t[n[O]],i.options.mass>0&&this._placeInTree(I.root,i);return I}},{key:"_updateBranchMass",value:function(t,n){var i=t.centerOfMass,s=t.mass+n.options.mass,o=1/s;i.x=i.x*t.mass+n.x*n.options.mass,i.x*=o,i.y=i.y*t.mass+n.y*n.options.mass,i.y*=o,t.mass=s;var a=Math.max(Math.max(n.height,n.radius),n.width);t.maxWidth=t.maxWidth<a?a:t.maxWidth}},{key:"_placeInTree",value:function(t,n,i){(i!=!0||i===void 0)&&this._updateBranchMass(t,n);var s=t.children.NW.range,o;s.maxX>n.x?s.maxY>n.y?o="NW":o="SW":s.maxY>n.y?o="NE":o="SE",this._placeInRegion(t,n,o)}},{key:"_placeInRegion",value:function(t,n,i){var s=t.children[i];switch(s.childrenCount){case 0:s.children.data=n,s.childrenCount=1,this._updateBranchMass(s,n);break;case 1:s.children.data.x===n.x&&s.children.data.y===n.y?(n.x+=this._rng(),n.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,n));break;case 4:this._placeInTree(s,n);break}}},{key:"_splitBranch",value:function(t){var n=null;t.childrenCount===1&&(n=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),n!=null&&this._placeInTree(t,n)}},{key:"_insertRegion",value:function(t,n){var i,s,o,a,l=.5*t.size;switch(n){case"NW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY,a=t.range.minY+l;break;case"NE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY,a=t.range.minY+l;break;case"SW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY+l,a=t.range.maxY;break;case"SE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY+l,a=t.range.maxY;break}t.children[n]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:s,minY:o,maxY:a},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,n){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,n))}},{key:"_drawBranch",value:function(t,n,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,n),this._drawBranch(t.children.NE,n),this._drawBranch(t.children.SE,n),this._drawBranch(t.children.SW,n)),n.strokeStyle=i,n.beginPath(),n.moveTo(t.range.minX,t.range.minY),n.lineTo(t.range.maxX,t.range.minY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.minY),n.lineTo(t.range.maxX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.maxY),n.lineTo(t.range.minX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.minX,t.range.maxY),n.lineTo(t.range.minX,t.range.minY),n.stroke()}}]),e}(),rmt=function(){function e(r,t,n){ft(this,e),this._rng=Yx("REPULSION SOLVER"),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,f=this.body.nodes,c=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,y=this.options.nodeDistance,w=-2/3/y,b=4/3,T=0;T<c.length-1;T++){l=f[c[T]];for(var _=T+1;_<c.length;_++)u=f[c[_]],t=u.x-l.x,n=u.y-l.y,i=Math.sqrt(t*t+n*n),i===0&&(i=.1*this._rng(),t=i),i<2*y&&(i<.5*y?a=1:a=w*i+b,a=a/i,s=t*a,o=n*a,d[l.id].x-=s,d[l.id].y-=o,d[u.id].x+=s,d[u.id].y+=o)}}}]),e}(),nmt=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,s=this.options.nodeDistance,o=0;o<n.length-1;o++)for(var a=t[n[o]],l=o+1;l<n.length;l++){var u=t[n[l]];if(a.level===u.level){var f=s+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(u.shape.radius||0)/2),c=u.x-a.x,d=u.y-a.y,y=Math.sqrt(c*c+d*d),w=.05,b=void 0;y<f?b=-Math.pow(w*y,2)+Math.pow(w*f,2):b=0,y!==0&&(b=b/y);var T=c*b,_=d*b;i[a.id].x-=T,i[a.id].y-=_,i[u.id].x+=T,i[u.id].y+=_}}}}]),e}(),yT=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i=this.physicsBody.physicsEdgeIndices,s=this.body.edges,o,a,l,u=0;u<i.length;u++)n=s[i[u]],n.connected===!0&&n.toId!==n.fromId&&this.body.nodes[n.toId]!==void 0&&this.body.nodes[n.fromId]!==void 0&&(n.edgeType.via!==void 0?(t=n.options.length===void 0?this.options.springLength:n.options.length,o=n.to,a=n.edgeType.via,l=n.from,this._calculateSpringForce(o,a,.5*t),this._calculateSpringForce(a,l,.5*t)):(t=n.options.length===void 0?this.options.springLength*1.5:n.options.length,this._calculateSpringForce(n.from,n.to,t)))}},{key:"_calculateSpringForce",value:function(t,n,i){var s=t.x-n.x,o=t.y-n.y,a=Math.max(Math.sqrt(s*s+o*o),.01),l=this.options.springConstant*(i-a)/a,u=s*l,f=o*l;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=u,this.physicsBody.forces[t.id].y+=f),this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x-=u,this.physicsBody.forces[n.id].y-=f)}}]),e}(),imt=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,f=this.body.edges,c=.5,d=this.physicsBody.physicsEdgeIndices,y=this.physicsBody.physicsNodeIndices,w=this.physicsBody.forces,b=0;b<y.length;b++){var T=y[b];w[T].springFx=0,w[T].springFy=0}for(var _=0;_<d.length;_++)n=f[d[_]],n.connected===!0&&(t=n.options.length===void 0?this.options.springLength:n.options.length,i=n.from.x-n.to.x,s=n.from.y-n.to.y,u=Math.sqrt(i*i+s*s),u=u===0?.01:u,l=this.options.springConstant*(t-u)/u,o=i*l,a=s*l,n.to.level!=n.from.level?(w[n.toId]!==void 0&&(w[n.toId].springFx-=o,w[n.toId].springFy-=a),w[n.fromId]!==void 0&&(w[n.fromId].springFx+=o,w[n.fromId].springFy+=a)):(w[n.toId]!==void 0&&(w[n.toId].x-=c*o,w[n.toId].y-=c*a),w[n.fromId]!==void 0&&(w[n.fromId].x+=c*o,w[n.fromId].y+=c*a)));l=1;for(var A,x,I=0;I<y.length;I++){var O=y[I];A=Math.min(l,Math.max(-l,w[O].springFx)),x=Math.min(l,Math.max(-l,w[O].springFy)),w[O].x+=A,w[O].y+=x}for(var C=0,g=0,M=0;M<y.length;M++){var B=y[M];C+=w[B].x,g+=w[B].y}for(var z=C/y.length,V=g/y.length,ne=0;ne<y.length;ne++){var re=y[ne];w[re].x-=z,w[re].y-=V}}}]),e}(),Tw=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o=this.body.nodes,a=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,u=0;u<a.length;u++){var f=a[u];s=o[f],t=-s.x,n=-s.y,i=Math.sqrt(t*t+n*n),this._calculateForces(i,t,n,l,s)}}},{key:"_calculateForces",value:function(t,n,i,s,o){var a=t===0?0:this.options.centralGravity/t;s[o.id].x=n*a,s[o.id].y=i*a}}]),e}();function smt(e){var r=omt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function omt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var amt=function(e){Or(t,e);var r=smt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._rng=Yx("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return ht(t,[{key:"_calculateForces",value:function(i,s,o,a,l){i===0&&(i=.1*this._rng(),s=i),this.overlapAvoidanceFactor<1&&a.shape.radius&&(i=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,i-a.shape.radius));var u=a.edges.length+1,f=this.options.gravitationalConstant*l.mass*a.options.mass*u/Math.pow(i,2),c=s*f,d=o*f;this.physicsBody.forces[a.id].x+=c,this.physicsBody.forces[a.id].y+=d}}]),t}(Eee);function lmt(e){var r=umt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function umt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var cmt=function(e){Or(t,e);var r=lmt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_calculateForces",value:function(i,s,o,a,l){if(i>0){var u=l.edges.length+1,f=this.options.centralGravity*u*l.options.mass;a[l.id].x=s*f,a[l.id].y=o*f}}}]),t}(Tw),fmt=function(){function e(r){ft(this,e),this.body=r,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Wn(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,H$(["stabilization"],this.options,t),Fo(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var n=this.options.wind;n&&((typeof n.x!="number"||T5(n.x))&&(n.x=0),(typeof n.y!="number"||T5(n.y))&&(n.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new amt(this.body,this.physicsBody,t),this.edgesSolver=new yT(this.body,this.physicsBody,t),this.gravitySolver=new cmt(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new rmt(this.body,this.physicsBody,t),this.edgesSolver=new yT(this.body,this.physicsBody,t),this.gravitySolver=new Tw(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new nmt(this.body,this.physicsBody,t),this.edgesSolver=new imt(this.body,this.physicsBody,t),this.gravitySolver=new Tw(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new Eee(this.body,this.physicsBody,t),this.edgesSolver=new yT(this.body,this.physicsBody,t),this.gravitySolver=new Tw(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var t;this.viewFunction=nt(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=L$();this.physicsTick();var n=L$()-t;(n<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&vl(function(){t.body.emitter.emit("stabilized",{iterations:n}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var t=1.2;this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=this.adaptiveCounter%this.adaptiveInterval===0;t?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,n=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&n[s].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(n[s].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[a]={x:0,y:0},this.physicsBody.velocities[a]===void 0&&(this.physicsBody.velocities[a]={x:0,y:0})}for(var l in this.physicsBody.velocities)t[l]===void 0&&delete this.physicsBody.velocities[l]}},{key:"revert",value:function(){var t=mn(this.previousStates),n=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var s=0;s<t.length;s++){var o=t[s];n[o]!==void 0?n[o].options.physics===!0&&(this.referenceState[o]={positions:{x:n[o].x,y:n[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,n[o].x=this.previousStates[o].x,n[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t,n,i,s=this.body.nodes,o=this.referenceState,a=.3;for(var l in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,l)&&s[l]!==void 0&&(t=s[l].x-o[l].positions.x,n=s[l].y-o[l].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i>a))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,n=0,i=0,s=5,o=0;o<t.length;o++){var a=t[o],l=this._performStep(a);n=Math.max(n,l),i+=l}this.adaptiveTimestepEnabled=i/t.length<s,this.stabilized=n<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,n,i){var s=this.modelOptions.damping*t,o=(n-s)/i;t+=o*this.timestep;var a=this.options.maxVelocity||1e9;return Math.abs(t)>a&&(t=t>0?a:-a),t}},{key:"_performStep",value:function(t){var n=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var s=this.physicsBody.velocities[t];this.previousStates[t]={x:n.x,y:n.y,vx:s.x,vy:s.y},n.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,i.x,n.options.mass),n.x+=s.x*this.timestep):(i.x=0,s.x=0),n.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,i.y,n.options.mass),n.y+=s.y*this.timestep):(i.y=0,s.y=0);var o=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return o}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].x&&t[n].y){var i=t[n].options.fixed;this.freezeCache[n]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.freezeCache[n]!==void 0&&(t[n].options.fixed.x=this.freezeCache[n].x,t[n].options.fixed.y=this.freezeCache[n].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof n!="number"&&(n=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",n)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=n,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,vl(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,n=function(){return t.stabilized===!1&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var s=0;n()&&s<this.options.stabilization.updateInterval;)this.physicsTick(),s++;if(i(),n()){var o;vl(nt(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var i=this.physicsBody.physicsNodeIndices[n],s=this.body.nodes[i],o=this.physicsBody.forces[i],a=20,l=.03,u=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),f=Math.min(Math.max(5,u),15),c=3*f,d=_5((180-Math.min(1,Math.max(0,l*u))*180)/360,1,1),y={x:s.x+a*o.x,y:s.y+a*o.y};t.lineWidth=f,t.strokeStyle=d,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(y.x,y.y),t.stroke();var w=Math.atan2(o.y,o.x);t.fillStyle=d,_ee.draw(t,{type:"arrow",point:y,angle:w,length:c}),Db(t).call(t)}}}]),e}();let L1;const hmt=new Uint8Array(16);function dmt(){if(!L1&&(L1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!L1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return L1(hmt)}const Si=[];for(let e=0;e<256;++e)Si.push((e+256).toString(16).slice(1));function pmt(e,r=0){return(Si[e[r+0]]+Si[e[r+1]]+Si[e[r+2]]+Si[e[r+3]]+"-"+Si[e[r+4]]+Si[e[r+5]]+"-"+Si[e[r+6]]+Si[e[r+7]]+"-"+Si[e[r+8]]+Si[e[r+9]]+"-"+Si[e[r+10]]+Si[e[r+11]]+Si[e[r+12]]+Si[e[r+13]]+Si[e[r+14]]+Si[e[r+15]]).toLowerCase()}const vmt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Gj={randomUUID:vmt};function Sy(e,r,t){if(Gj.randomUUID&&!r&&!e)return Gj.randomUUID();e=e||{};const n=e.random||(e.rng||dmt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return pmt(n)}var os=function(){function e(){ft(this,e)}return ht(e,null,[{key:"getRange",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.shape.boundingBox.left&&(o=l.shape.boundingBox.left),a<l.shape.boundingBox.right&&(a=l.shape.boundingBox.right),i>l.shape.boundingBox.top&&(i=l.shape.boundingBox.top),s<l.shape.boundingBox.bottom&&(s=l.shape.boundingBox.bottom);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"getRangeCore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.x&&(o=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),s<l.y&&(s=l.y);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,n){var i={};return n===void 0||n==="node"?(Xr(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Xr(i,t.options,!0),i}}]),e}();function gmt(e){var r=ymt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function ymt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var mmt=function(e){Or(t,e);var r=gmt(t);function t(n,i,s,o,a,l){var u;return ft(this,t),u=r.call(this,n,i,s,o,a,l),u.isCluster=!0,u.containedNodes={},u.containedEdges={},u}return ht(t,[{key:"_openChildCluster",value:function(i){var s=this,o=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],gr(o.edges,function(a){delete s.containedEdges[a.id]}),gr(o.containedNodes,function(a,l){s.containedNodes[l]=a}),o.containedNodes={},gr(o.containedEdges,function(a,l){s.containedEdges[l]=a}),o.containedEdges={},gr(o.edges,function(a){gr(s.edges,function(l){var u,f,c=Sr(u=l.clusteringEdgeReplacingIds).call(u,a.id);c!==-1&&(gr(a.clusteringEdgeReplacingIds,function(d){l.clusteringEdgeReplacingIds.push(d),s.body.edges[d].edgeReplacedById=l.id}),cu(f=l.clusteringEdgeReplacingIds).call(f,c,1))})}),o.edges=[]}}]),t}(Ks),bmt=function(){function e(r){var t=this;ft(this,e),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Wn(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}return ht(e,[{key:"clusterByHubsize",value:function(t,n){t===void 0?t=this._getHubSize():Dr(t)==="object"&&(n=this._checkOptions(t),t=this._getHubSize());for(var i=[],s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodes[this.body.nodeIndices[s]];o.edges.length>=t&&i.push(o.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],n,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");n=this._checkOptions(n);var s={},o={};gr(this.body.nodes,function(a,l){a.options&&n.joinCondition(a.options)===!0&&(s[l]=a,gr(a.edges,function(u){t.clusteredEdges[u.id]===void 0&&(o[u.id]=u)}))}),this._cluster(s,o,n,i)}},{key:"clusterByEdgeCount",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=this._checkOptions(n);for(var o=[],a={},l,u,f,c=function(){var b={},T={},_=i.body.nodeIndices[d],A=i.body.nodes[_];if(a[_]===void 0){f=0,u=[];for(var x=0;x<A.edges.length;x++)l=A.edges[x],i.clusteredEdges[l.id]===void 0&&(l.toId!==l.fromId&&f++,u.push(l));if(f===t){for(var I=function(re){if(n.joinCondition===void 0||n.joinCondition===null)return!0;var J=os.cloneOptions(re);return n.joinCondition(J)},O=!0,C=0;C<u.length;C++){l=u[C];var g=i._getConnectedId(l,_);if(I(A))T[l.id]=l,b[_]=A,b[g]=i.body.nodes[g],a[_]=!0;else{O=!1;break}}if(mn(b).length>0&&mn(T).length>0&&O===!0){var M=function(){for(var re=0;re<o.length;++re)for(var J in b)if(o[re].nodes[J]!==void 0)return o[re]},B=M();if(B!==void 0){for(var z in b)B.nodes[z]===void 0&&(B.nodes[z]=b[z]);for(var V in T)B.edges[V]===void 0&&(B.edges[V]=T[V])}else o.push({nodes:b,edges:T})}}}},d=0;d<this.body.nodeIndices.length;d++)c();for(var y=0;y<o.length;y++)this._cluster(o[y].nodes,o[y].edges,n,!1);s===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,t,n)}},{key:"clusterBridges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,t,n)}},{key:"clusterByConnection",value:function(t,n){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];n=this._checkOptions(n,o),n.clusterNodeProperties.x===void 0&&(n.clusterNodeProperties.x=o.x),n.clusterNodeProperties.y===void 0&&(n.clusterNodeProperties.y=o.y),n.clusterNodeProperties.fixed===void 0&&(n.clusterNodeProperties.fixed={},n.clusterNodeProperties.fixed.x=o.options.fixed.x,n.clusterNodeProperties.fixed.y=o.options.fixed.y);var a={},l={},u=o.id,f=os.cloneOptions(o);a[u]=o;for(var c=0;c<o.edges.length;c++){var d=o.edges[c];if(this.clusteredEdges[d.id]===void 0){var y=this._getConnectedId(d,u);if(this.clusteredNodes[y]===void 0)if(y!==u)if(n.joinCondition===void 0)l[d.id]=d,a[y]=this.body.nodes[y];else{var w=os.cloneOptions(this.body.nodes[y]);n.joinCondition(f,w)===!0&&(l[d.id]=d,a[y]=this.body.nodes[y])}else l[d.id]=d}}var b=lv(i=mn(a)).call(i,function(I){return a[I].id});for(var T in a)if(Object.prototype.hasOwnProperty.call(a,T))for(var _=a[T],A=0;A<_.edges.length;A++){var x=_.edges[A];Sr(b).call(b,this._getConnectedId(x,_.id))>-1&&(l[x.id]=x)}this._cluster(a,l,n,s)}},{key:"_createClusterEdges",value:function(t,n,i,s){for(var o,a,l,u,f,c,d=mn(t),y=[],w=0;w<d.length;w++){a=d[w],l=t[a];for(var b=0;b<l.edges.length;b++)o=l.edges[b],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?n[o.id]=o:o.toId==a?(u=i.id,f=o.fromId,c=f):(u=o.toId,f=i.id,c=u),t[c]===void 0&&y.push({edge:o,fromId:f,toId:u}))}for(var T=[],_=function(g){for(var M=0;M<T.length;M++){var B=T[M],z=g.fromId===B.fromId&&g.toId===B.toId,V=g.fromId===B.toId&&g.toId===B.fromId;if(z||V)return B}return null},A=0;A<y.length;A++){var x=y[A],I=x.edge,O=_(x);O===null?(O=this._createClusteredEdge(x.fromId,x.toId,I,s),T.push(O)):O.clusteringEdgeReplacingIds.push(I.id),this.body.edges[I.id].edgeReplacedById=O.id,this._backupEdgeOptions(I),I.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.clusteredNodes[a]!==void 0&&o.push(a);for(var l=0;l<o.length;++l)delete t[o[l]];if(mn(t).length!=0&&!(mn(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=!0)){var u=Xr({},i.clusterNodeProperties);if(i.processProperties!==void 0){var f=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var d=os.cloneOptions(t[c]);f.push(d)}var y=[];for(var w in n)if(Object.prototype.hasOwnProperty.call(n,w)&&w.substr(0,12)!=="clusterEdge:"){var b=os.cloneOptions(n[w],"edge");y.push(b)}if(u=i.processProperties(u,f,y),!u)throw new Error("The processProperties function does not return properties!")}u.id===void 0&&(u.id="cluster:"+Sy());var T=u.id;u.label===void 0&&(u.label="cluster");var _=void 0;u.x===void 0&&(_=this._getClusterPosition(t),u.x=_.x),u.y===void 0&&(_===void 0&&(_=this._getClusterPosition(t)),u.y=_.y),u.id=T;var A=this.body.functions.createNode(u,mmt);A.containedNodes=t,A.containedEdges=n,A.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[u.id]=A,this._clusterEdges(t,n,u,i.clusterEdgeProperties),u.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var n=this.clusteredEdges[t.id];n!==void 0&&(t.setOptions({physics:n.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var n=mn(t),i=t[n[0]].x,s=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,l,u=1;u<n.length;u++)l=t[n[u]],i=l.x<i?l.x:i,s=l.x>s?l.x:s,o=l.y<o?l.y:o,a=l.y>a?l.y:a;return{x:.5*(i+s),y:.5*(o+a)}}},{key:"openCluster",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var s=this.body.nodes[t];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),a=Sr(o).call(o,t)-1;if(a>=0){var l=o[a],u=this.body.nodes[l];u._openChildCluster(t),delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged");return}var f=s.containedNodes,c=s.containedEdges;if(n!==void 0&&n.releaseFunction!==void 0&&typeof n.releaseFunction=="function"){var d={},y={x:s.x,y:s.y};for(var w in f)if(Object.prototype.hasOwnProperty.call(f,w)){var b=this.body.nodes[w];d[w]={x:b.x,y:b.y}}var T=n.releaseFunction(y,d);for(var _ in f)if(Object.prototype.hasOwnProperty.call(f,_)){var A=this.body.nodes[_];T[_]!==void 0&&(A.x=T[_].x===void 0?s.x:T[_].x,A.y=T[_].y===void 0?s.y:T[_].y)}}else gr(f,function(_e){_e.options.fixed.x===!1&&(_e.x=s.x),_e.options.fixed.y===!1&&(_e.y=s.y)});for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var I=this.body.nodes[x];I.vx=s.vx,I.vy=s.vy,I.setOptions({physics:!0}),delete this.clusteredNodes[x]}for(var O=[],C=0;C<s.edges.length;C++)O.push(s.edges[C]);for(var g=0;g<O.length;g++){for(var M=O[g],B=this._getConnectedId(M,t),z=this.clusteredNodes[B],V=0;V<M.clusteringEdgeReplacingIds.length;V++){var ne=M.clusteringEdgeReplacingIds[V],re=this.body.edges[ne];if(re!==void 0)if(z!==void 0){var J=this.body.nodes[z.clusterId];J.containedEdges[re.id]=re,delete c[re.id];var F=re.fromId,Z=re.toId;re.toId==B?Z=z.clusterId:F=z.clusterId,this._createClusteredEdge(F,Z,re,J.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(re)}M.remove()}for(var ie in c)Object.prototype.hasOwnProperty.call(c,ie)&&this._restoreEdge(c[ie]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var n=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(this.body.nodes[s].id)}return n}},{key:"findNode",value:function(t){for(var n=[],i=100,s=0,o;this.clusteredNodes[t]!==void 0&&s<i;){if(o=this.body.nodes[t],o===void 0)return[];n.push(o.id),t=this.clusteredNodes[t].clusterId,s++}return o=this.body.nodes[t],o===void 0?[]:(n.push(o.id),bh(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,n){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(n===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(n),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,n){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(n===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),s=0;s<i.length;s++){var o=this.body.edges[i[s]];o.setOptions(n)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var n=[],i=100,s=0;t!==void 0&&this.body.edges[t]!==void 0&&s<i;)n.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,s++;return bh(n).call(n),n}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var n=[t],i=[],s=[],o=100,a=0;n.length>0&&a<o;){var l=n.pop();if(l!==void 0){var u=this.body.edges[l];if(u!==void 0){a++;var f=u.clusteringEdgeReplacingIds;if(f===void 0)s.push(l);else for(var c=0;c<f.length;++c){var d=f[c];Sr(n).call(n,f)!==-1||Sr(i).call(i,f)!==-1||n.push(d)}i.push(l)}}}return s}},{key:"_getConnectedId",value:function(t,n){return t.toId!=n?t.toId:(t.fromId!=n,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,n=0,i=0,s=0,o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];a.edges.length>s&&(s=a.edges.length),t+=a.edges.length,n+=Math.pow(a.edges.length,2),i+=1}t=t/i,n=n/i;var l=n-Math.pow(t,2),u=Math.sqrt(l),f=Math.floor(t+2*u);return f>s&&(f=s),f}},{key:"_createClusteredEdge",value:function(t,n,i,s,o){var a=os.cloneOptions(i,"edge");Xr(a,s),a.from=t,a.to=n,a.id="clusterEdge:"+Sy(),o!==void 0&&Xr(a,o);var l=this.body.functions.createEdge(a);return l.clusteringEdgeReplacingIds=[i.id],l.connect(),this.body.edges[l.id]=l,l}},{key:"_clusterEdges",value:function(t,n,i,s){if(n instanceof Cp){var o=n,a={};a[o.id]=o,n=a}if(t instanceof Ks){var l=t,u={};u[l.id]=l,t=u}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=i.clusterEdgeProperties),this._createClusterEdges(t,n,i,s);for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)&&this.body.edges[f]!==void 0){var c=this.body.edges[f];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(this.clusteredNodes[d]={clusterId:i.id,node:this.body.nodes[d]},this.body.nodes[d].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(t!==void 0){var n=this.clusteredNodes[t];if(n!==void 0){var i=n.clusterId;if(i!==void 0)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,n){var i=[];return gr(t,function(s){n(s)&&i.push(s)}),i}},{key:"_updateState",value:function(){var t=this,n,i=[],s={},o=function(w){gr(t.body.nodes,function(b){b.isCluster===!0&&w(b)})};for(n in this.clusteredNodes)if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,n)){var a=this.body.nodes[n];a===void 0&&i.push(n)}o(function(y){for(var w=0;w<i.length;w++)delete y.containedNodes[i[w]]});for(var l=0;l<i.length;l++)delete this.clusteredNodes[i[l]];gr(this.clusteredEdges,function(y){var w=t.body.edges[y];(w===void 0||!w.endPointsValid())&&(s[y]=y)}),o(function(y){gr(y.containedEdges,function(w,b){!w.endPointsValid()&&!s[b]&&(s[b]=b)})}),gr(this.body.edges,function(y,w){var b=!0,T=y.clusteringEdgeReplacingIds;if(T!==void 0){var _=0;gr(T,function(A){var x=t.body.edges[A];x!==void 0&&x.endPointsValid()&&(_+=1)}),b=_>0}(!y.endPointsValid()||!b)&&(s[w]=w)}),o(function(y){gr(s,function(w){delete y.containedEdges[w],gr(y.edges,function(b,T){if(b.id===w){y.edges[T]=null;return}b.clusteringEdgeReplacingIds=t._filter(b.clusteringEdgeReplacingIds,function(_){return!s[_]})}),y.edges=t._filter(y.edges,function(b){return b!==null})})}),gr(s,function(y){delete t.clusteredEdges[y]}),gr(s,function(y){delete t.body.edges[y]});var u=mn(this.body.edges);gr(u,function(y){var w=t.body.edges[y],b=t._isClusteredNode(w.fromId)||t._isClusteredNode(w.toId);if(b!==t._isClusteredEdge(w.id))if(b){var T=t._getClusterNodeForNode(w.fromId);T!==void 0&&t._clusterEdges(t.body.nodes[w.fromId],w,T);var _=t._getClusterNodeForNode(w.toId);_!==void 0&&t._clusterEdges(t.body.nodes[w.toId],w,_)}else delete t._clusterEdges[y],t._restoreEdge(w)});for(var f=!1,c=!0,d=function(){var w=[];o(function(T){var _=mn(T.containedNodes).length,A=T.options.allowSingleNodeCluster===!0;(A&&_<1||!A&&_<2)&&w.push(T.id)});for(var b=0;b<w.length;++b)t.openCluster(w[b],{},!1);c=w.length>0,f=f||c};c;)d();f&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return this.clusteredNodes[t]!==void 0}},{key:"_isClusteredEdge",value:function(t){return this.clusteredEdges[t]!==void 0}}]),e}();function wmt(){var e;window!==void 0&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),e===void 0?window.requestAnimationFrame=function(r){r()}:window.requestAnimationFrame=e}var $mt=function(){function e(r,t){ft(this,e),wmt(),this.body=r,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Wn(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=vl(function(){var i;t.zooming=!1,nt(i=t._requestRedraw).call(i,t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",nt(n=this._requestRedraw).call(n,this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];Qv(n,this.options,t)}}},{key:"_requestNextFrame",value:function(t,n){if(!(typeof window>"u")){var i,s=window;return this.requiresTimeout===!0?i=vl(t,n):s.requestAnimationFrame&&(i=s.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var t;this.renderTimer=this._requestNextFrame(nt(t=this._renderStep).call(t,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var n={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,s,o),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var a=this._drawNodes(i,t),l=a.drawExternalLabels;n.drawExternalLabels=l}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),n.drawExternalLabels!=null&&n.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,s,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var n=this.body.nodes,i;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=n[s],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.nodes,s=this.body.nodeIndices,o,a=[],l=[],u=20,f=this.canvas.DOMtoCanvas({x:-u,y:-u}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),d={top:f.y,left:f.x,bottom:c.y,right:c.x},y=[],w=0;w<s.length;w++)if(o=i[s[w]],o.hover)l.push(s[w]);else if(o.isSelected())a.push(s[w]);else if(n===!0){var b=o.draw(t);b.drawExternalLabel!=null&&y.push(b.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(d)===!0){var T=o.draw(t);T.drawExternalLabel!=null&&y.push(T.drawExternalLabel)}else o.updateBoundingBox(t,o.selected);var _,A=a.length,x=l.length;for(_=0;_<A;_++){o=i[a[_]];var I=o.draw(t);I.drawExternalLabel!=null&&y.push(I.drawExternalLabel)}for(_=0;_<x;_++){o=i[l[_]];var O=o.draw(t);O.drawExternalLabel!=null&&y.push(O.drawExternalLabel)}return{drawExternalLabels:function(){for(var g=0,M=y;g<M.length;g++){var B=M[g];B()}}}}},{key:"_drawEdges",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.draw(t)}}},{key:"_drawArrows",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,Sr(t).call(t,"msie 9.0")!=-1?this.requiresTimeout=!0:Sr(t).call(t,"safari")!=-1&&Sr(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var n=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),e}(),Z5={},_mt={get exports(){return Z5},set exports(e){Z5=e}},xmt=xr,Emt=xmt.setInterval;(function(e){e.exports=Emt})(_mt);var Smt=Pt(Z5);function K$(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function See(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}var kmt=function(){function e(r){ft(this,e),this.body=r,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Wn(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.once("resize",function(i){i.width!==0&&(t.body.view.translation.x=i.width*.5),i.height!==0&&(t.body.view.translation.y=i.height*.5)}),this.body.emitter.on("setSize",nt(n=this.setSize).call(n,this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var n=this;if(t!==void 0){var i=["width","height","autoResize"];Qv(i,this.options,t)}if(this._cleanUp(),this.options.autoResize===!0){var s;if(window.ResizeObserver){var o=new ResizeObserver(function(){var f=n.setSize();f===!0&&n.body.emitter.emit("_requestRedraw")}),a=this.frame;o.observe(a),this._cleanupCallbacks.push(function(){o.unobserve(a)})}else{var l=Smt(function(){var f=n.setSize();f===!0&&n.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(l)})}var u=nt(s=this._onResize).call(s,this);Dft(window,"resize",u),this._cleanupCallbacks.push(function(){Bft(window,"resize",u)})}}},{key:"_cleanUp",value:function(){var t,n,i;qr(t=bh(n=cu(i=this._cleanupCallbacks).call(i,0)).call(n)).call(t,function(s){try{s()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;t!=1&&n!=1?i=this.cameraState.scale*.5*(t+n):t!=1?i=this.cameraState.scale*t:n!=1&&(i=this.cameraState.scale*n),this.body.view.scale=i;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(Sr(t).call(t,"%")!==-1||Sr(t).call(t,"px")!==-1)return t;if(Sr(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Op(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Op.DIRECTION_ALL}),K$(this.hammer,function(n){t.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){t.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){t.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){t.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){t.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){t.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){t.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){t.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("wheel",function(n){t.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){t.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){t.body.eventListeners.onContext(n)}),this.hammerFrame=new Op(this.frame),See(this.hammerFrame,function(n){t.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),n=this._prepareValue(n);var i=!1,s=this.frame.canvas.width,o=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||n!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=t,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==l||this.frame.canvas.height!==u)&&this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,i=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),e}();function Tmt(e,r){var t=Wn({nodes:r,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},e??{});if(!Lr(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=r),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}var Imt=function(){function e(r,t){var n,i=this,s;ft(this,e),this.body=r,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",nt(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",nt(s=this.releaseNode).call(s,this))}return ht(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=Tmt(t,this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight,o,a;if(i===0||s===0)a=1,o=os.getRange(this.body.nodes,t.nodes);else if(n===!0){var l=0;for(var u in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,u)){var f=this.body.nodes[u];f.predefinedPosition===!0&&(l+=1)}if(l>.5*this.body.nodeIndices.length){this.fit(t,!1);return}o=os.getRange(this.body.nodes,t.nodes);var c=this.body.nodeIndices.length;a=12.662/(c+7.4147)+.0964822;var d=Math.min(i/600,s/600);a*=d}else{this.body.emitter.emit("_resizeNodes"),o=os.getRange(this.body.nodes,t.nodes);var y=Math.abs(o.maxX-o.minX)*1.1,w=Math.abs(o.maxY-o.minY)*1.1,b=i/y,T=s/w;a=b<=T?b:T}a>t.maxZoomLevel?a=t.maxZoomLevel:a<t.minZoomLevel&&(a=t.minZoomLevel);var _=os.findCenter(o),A={position:_,scale:a,animation:t.animation};this.moveTo(A)}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};n.position=i,n.lockedOnNode=t,this.moveTo(n)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(t===void 0){t={};return}if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!nh(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!nh(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!nh(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!nh(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(t!==void 0){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.position.x,y:n.y-t.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},t.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=nt(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=nt(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.x,y:n.y-t.y},s=this.body.view.translation,o={x:s.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var n=Fft[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var i;this.viewFunction=nt(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function Yj(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(f){u(f,"keydown")},l=function(f){u(f,"keyup")},u=function(f,c){if(i[c][f.keyCode]!==void 0){for(var d=i[c][f.keyCode],y=0;y<d.length;y++)(d[y].shift===void 0||d[y].shift==!0&&f.shiftKey==!0||d[y].shift==!1&&f.shiftKey==!1)&&d[y].fn(f);r==!0&&f.preventDefault()}};return n.bind=function(f,c,d){if(d===void 0&&(d="keydown"),s[f]===void 0)throw new Error("unsupported key: "+f);i[d][s[f].code]===void 0&&(i[d][s[f].code]=[]),i[d][s[f].code].push({fn:c,shift:s[f].shift})},n.bindAll=function(f,c){c===void 0&&(c="keydown");for(var d in s)s.hasOwnProperty(d)&&n.bind(d,f,c)},n.getKey=function(f){for(var c in s)if(s.hasOwnProperty(c)){if(f.shiftKey==!0&&s[c].shift==!0&&f.keyCode==s[c].code)return c;if(f.shiftKey==!1&&s[c].shift==!1&&f.keyCode==s[c].code)return c;if(f.keyCode==s[c].code&&c=="shift")return c}return"unknown key, currently not supported"},n.unbind=function(f,c,d){if(d===void 0&&(d="keydown"),s[f]===void 0)throw new Error("unsupported key: "+f);if(c!==void 0){var y=[],w=i[d][s[f].code];if(w!==void 0)for(var b=0;b<w.length;b++)w[b].fn==c&&w[b].shift==s[f].shift||y.push(i[d][s[f].code][b]);i[d][s[f].code]=y}else i[d][s[f].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",a,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",a,!0),t.addEventListener("keyup",l,!0),n}var Amt=function(){function e(r,t){var n=this;ft(this,e),this.body=r,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return ht(e,[{key:"setOptions",value:function(t){t!==void 0&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var n=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var s=0;s<n.length;s++){this.navigationDOM[n[s]]=document.createElement("div"),this.navigationDOM[n[s]].className="vis-button vis-"+n[s],this.navigationDOM.wrapper.appendChild(this.navigationDOM[n[s]]);var o=new Op(this.navigationDOM[n[s]]);if(i[s]==="_fit"){var a;K$(o,nt(a=this._fit).call(a,this))}else{var l;K$(o,nt(l=this.bindToRedraw).call(l,this,i[s]))}this.navigationHammers.push(o)}var u=new Op(this.canvas.frame);See(u,function(){t._stopMovement()}),this.navigationHammers.push(u),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){if(this.boundFunctions[t]===void 0){var n;this.boundFunctions[t]=nt(n=this[t]).call(n,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,n=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,n=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=Yj({container:window,preventDefault:!0}):this.keycharm=Yj({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A,x,I,O,C,g,M,B,z;nt(n=this.keycharm).call(n,"up",function(){t.bindToRedraw("_moveUp")},"keydown"),nt(i=this.keycharm).call(i,"down",function(){t.bindToRedraw("_moveDown")},"keydown"),nt(s=this.keycharm).call(s,"left",function(){t.bindToRedraw("_moveLeft")},"keydown"),nt(o=this.keycharm).call(o,"right",function(){t.bindToRedraw("_moveRight")},"keydown"),nt(a=this.keycharm).call(a,"=",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(l=this.keycharm).call(l,"num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(u=this.keycharm).call(u,"num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(f=this.keycharm).call(f,"-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(c=this.keycharm).call(c,"[",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(d=this.keycharm).call(d,"]",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(y=this.keycharm).call(y,"pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(w=this.keycharm).call(w,"pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(b=this.keycharm).call(b,"up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),nt(T=this.keycharm).call(T,"down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),nt(_=this.keycharm).call(_,"left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),nt(A=this.keycharm).call(A,"right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),nt(x=this.keycharm).call(x,"=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(I=this.keycharm).call(I,"num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(O=this.keycharm).call(O,"num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(C=this.keycharm).call(C,"-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(g=this.keycharm).call(g,"[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(M=this.keycharm).call(M,"]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(B=this.keycharm).call(B,"pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(z=this.keycharm).call(z,"pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}]),e}();function Omt(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Cmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Cmt(e,r){var t;if(e){if(typeof e=="string")return Zj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zj(e,r)}}function Zj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Pmt=function(){function e(r,t,n){var i,s,o,a,l,u,f,c,d,y,w,b,T;ft(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new Amt(r,t),this.body.eventListeners.onTap=nt(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=nt(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=nt(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=nt(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=nt(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=nt(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=nt(f=this.onDragEnd).call(f,this),this.body.eventListeners.onMouseWheel=nt(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=nt(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=nt(y=this.onMouseMove).call(y,this),this.body.eventListeners.onRelease=nt(w=this.onRelease).call(w,this),this.body.eventListeners.onContext=nt(b=this.onContext).call(b,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=nt(T=this.getPointer).call(T,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Wn(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];H$(n,this.options,t),Fo(this.options,t,"keyboard"),t.tooltip&&(Wn(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=$5(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-Nft(this.canvas.frame.canvas),y:t.y-Rft(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n)}},{key:"onDoubleTap",value:function(t){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,n)}},{key:"onHold",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n),this.selectionHandler.generateClickEvent("hold",t,n)}},{key:"onRelease",value:function(t){if(new Date().valueOf()-this.touchTime>10){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,n),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(t){var n=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,n)}},{key:"checkSelectionChanges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,n){var i=function(o,a){for(var l=[],u=0;u<o.length;u++){var f=o[u];Sr(a).call(a,f)===-1&&l.push(f)}return l};return{nodes:i(t.nodes,n.nodes),edges:i(t.edges,n.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(t);var n=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Wn({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(n!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=n.id,n.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[n.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var s=Omt(this.selectionHandler.getSelectedNodes()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l={id:a.id,node:a,x:a.x,y:a.y,xFixed:a.options.fixed.x,yFixed:a.options.fixed.y};a.options.fixed.x=!0,a.options.fixed.y=!0,this.drag.selection.push(l)}}catch(u){s.e(u)}finally{s.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var n=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;qr(s).call(s,function(f){var c=f.node;f.xFixed===!1&&(c.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(f.x)+o)),f.yFixed===!1&&(c.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(f.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}var l=i.x-this.drag.pointer.x,u=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+l,y:this.drag.translation.y+u},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var n=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var s=this.body.selectionBox.position,o={minX:Math.min(s.start.x,s.end.x),minY:Math.min(s.start.y,s.end.y),maxX:Math.max(s.start.x,s.end.x),maxY:Math.max(s.start.y,s.end.y)},a=Os(i=this.body.nodeIndices).call(i,function(f){var c=n.body.nodes[f];return c.x>=o.minX&&c.x<=o.maxX&&c.y>=o.minY&&c.y<=o.maxY});qr(a).call(a,function(f){return n.selectionHandler.selectObject(n.body.nodes[f])});var l=this.getPointer(t.center);this.selectionHandler.commitAndEmit(l,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var u=this.drag.selection;u&&u.length?(qr(u).call(u,function(f){f.node.options.fixed.x=f.xFixed,f.node.options.fixed.y=f.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var n=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,n)}},{key:"zoom",value:function(t,n){if(this.options.zoomView===!0){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var s=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,a=t/i,l=(1-a)*n.x+o.x*a,u=(1-a)*n.y+o.y*a;if(this.body.view.scale=t,this.body.view.translation={x:l,y:u},s!=null){var f=this.canvas.canvasToDOM(s);this.drag.pointer.x=f.x,this.drag.pointer.y=f.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:n}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:n})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){if(t.deltaY!==0){var n=this.body.view.scale;n*=1+(t.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var n=this,i=this.getPointer({x:t.clientX,y:t.clientY}),s=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(s=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),s===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=vl(function(){return n._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var n=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),s={left:n,top:i,right:n,bottom:i},o=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,l="node";if(this.popupObj===void 0){for(var u=this.body.nodeIndices,f=this.body.nodes,c,d=[],y=0;y<u.length;y++)c=f[u[y]],c.isOverlappingWith(s)===!0&&(a=!0,c.getTitle()!==void 0&&d.push(u[y]));d.length>0&&(this.popupObj=f[d[d.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var w=this.body.edgeIndices,b=this.body.edges,T,_=[],A=0;A<w.length;A++)T=b[w[A]],T.isOverlappingWith(s)===!0&&T.connected===!0&&T.getTitle()!==void 0&&_.push(w[A]);_.length>0&&(this.popupObj=b[_[_.length-1]],l="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new Vft(this.canvas.frame)),this.popup.popupTargetType=l,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var n=this.selectionHandler._pointerToPositionObject(t),i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(n),i===!0)){var s=this.selectionHandler.getNodeAt(t);i=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(n));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),X5={},Nmt={get exports(){return X5},set exports(e){X5=e}},Rmt=AN,Dmt=cee;Rmt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Dmt);var Bmt=xr,Mmt=Bmt.Set,Lmt=Mmt,Fmt=Lmt;(function(e){e.exports=Fmt})(Nmt);var Kf=Pt(X5),J5={},jmt={get exports(){return J5},set exports(e){J5=e}},zmt=Ir,Xj=ON,F1=dv.getWeakData,Hmt=IN,Umt=co,Wmt=yb,mT=wi,qmt=TN,kee=rf,Jj=$i,Tee=ed,Kmt=Tee.set,Vmt=Tee.getterFor,Gmt=kee.find,Ymt=kee.findIndex,Zmt=zmt([].splice),Xmt=0,j1=function(e){return e.frozen||(e.frozen=new Iee)},Iee=function(){this.entries=[]},bT=function(e,r){return Gmt(e.entries,function(t){return t[0]===r})};Iee.prototype={get:function(e){var r=bT(this,e);if(r)return r[1]},has:function(e){return!!bT(this,e)},set:function(e,r){var t=bT(this,e);t?t[1]=r:this.entries.push([e,r])},delete:function(e){var r=Ymt(this.entries,function(t){return t[0]===e});return~r&&Zmt(this.entries,r,1),!!~r}};var Jmt={getConstructor:function(e,r,t,n){var i=e(function(l,u){Hmt(l,s),Kmt(l,{type:r,id:Xmt++,frozen:void 0}),Wmt(u)||qmt(u,l[n],{that:l,AS_ENTRIES:t})}),s=i.prototype,o=Vmt(r),a=function(l,u,f){var c=o(l),d=F1(Umt(u),!0);return d===!0?j1(c).set(u,f):d[c.id]=f,l};return Xj(s,{delete:function(l){var u=o(this);if(!mT(l))return!1;var f=F1(l);return f===!0?j1(u).delete(l):f&&Jj(f,u.id)&&delete f[u.id]},has:function(u){var f=o(this);if(!mT(u))return!1;var c=F1(u);return c===!0?j1(f).has(u):c&&Jj(c,f.id)}}),Xj(s,t?{get:function(u){var f=o(this);if(mT(u)){var c=F1(u);return c===!0?j1(f).get(u):c?c[f.id]:void 0}},set:function(u,f){return a(this,u,f)}}:{add:function(u){return a(this,u,!0)}}),i}},Qmt=oee,Qj=Gn,Iw=Ir,ez=ON,ebt=dv,tbt=AN,Aee=Jmt,z1=wi,H1=ed.enforce,rbt=Tr,nbt=YX,zb=Object,ibt=Array.isArray,U1=zb.isExtensible,Oee=zb.isFrozen,sbt=zb.isSealed,Cee=zb.freeze,obt=zb.seal,tz={},rz={},abt=!Qj.ActiveXObject&&"ActiveXObject"in Qj,Ug,Pee=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Nee=tbt("WeakMap",Pee,Aee),ep=Nee.prototype,Aw=Iw(ep.set),lbt=function(){return Qmt&&rbt(function(){var e=Cee([]);return Aw(new Nee,e,1),!Oee(e)})};if(nbt)if(abt){Ug=Aee.getConstructor(Pee,"WeakMap",!0),ebt.enable();var nz=Iw(ep.delete),W1=Iw(ep.has),iz=Iw(ep.get);ez(ep,{delete:function(e){if(z1(e)&&!U1(e)){var r=H1(this);return r.frozen||(r.frozen=new Ug),nz(this,e)||r.frozen.delete(e)}return nz(this,e)},has:function(r){if(z1(r)&&!U1(r)){var t=H1(this);return t.frozen||(t.frozen=new Ug),W1(this,r)||t.frozen.has(r)}return W1(this,r)},get:function(r){if(z1(r)&&!U1(r)){var t=H1(this);return t.frozen||(t.frozen=new Ug),W1(this,r)?iz(this,r):t.frozen.get(r)}return iz(this,r)},set:function(r,t){if(z1(r)&&!U1(r)){var n=H1(this);n.frozen||(n.frozen=new Ug),W1(this,r)?Aw(this,r,t):n.frozen.set(r,t)}else Aw(this,r,t);return this}})}else lbt()&&ez(ep,{set:function(r,t){var n;return ibt(r)&&(Oee(r)?n=tz:sbt(r)&&(n=rz)),Aw(this,r,t),n==tz&&Cee(r),n==rz&&obt(r),this}});var ubt=xr,cbt=ubt.WeakMap,fbt=cbt,hbt=fbt;(function(e){e.exports=hbt})(jmt);var ky=Pt(J5);function Zr(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function Q5(e,r,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,t):i?i.value=t:r.set(e,t),t}function e3(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=dbt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function dbt(e,r){var t;if(e){if(typeof e=="string")return sz(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sz(e,r)}}function sz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Df,Oo,dc,pc,Ow;function oz(e,r){var t=new Kf,n=e3(r),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e.has(s)||t.add(s)}}catch(o){n.e(o)}finally{n.f()}return t}var az=function(){function e(){ft(this,e),Df.set(this,new Kf),Oo.set(this,new Kf)}return ht(e,[{key:"size",get:function(){return Zr(this,Oo,"f").size}},{key:"add",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Zr(this,Oo,"f").add(a)}}},{key:"delete",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Zr(this,Oo,"f").delete(a)}}},{key:"clear",value:function(){Zr(this,Oo,"f").clear()}},{key:"getSelection",value:function(){return al(Zr(this,Oo,"f"))}},{key:"getChanges",value:function(){return{added:al(oz(Zr(this,Df,"f"),Zr(this,Oo,"f"))),deleted:al(oz(Zr(this,Oo,"f"),Zr(this,Df,"f"))),previous:al(new Kf(Zr(this,Df,"f"))),current:al(new Kf(Zr(this,Oo,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();Q5(this,Df,Zr(this,Oo,"f"),"f"),Q5(this,Oo,new Kf(Zr(this,Df,"f")),"f");var n=e3(t.added),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s.select()}}catch(u){n.e(u)}finally{n.f()}var o=e3(t.deleted),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.unselect()}}catch(u){o.e(u)}finally{o.f()}return t}}]),e}();Df=new ky,Oo=new ky;var pbt=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ft(this,e),dc.set(this,new az),pc.set(this,new az),Ow.set(this,void 0),Q5(this,Ow,r,"f")}return ht(e,[{key:"sizeNodes",get:function(){return Zr(this,dc,"f").size}},{key:"sizeEdges",get:function(){return Zr(this,pc,"f").size}},{key:"getNodes",value:function(){return Zr(this,dc,"f").getSelection()}},{key:"getEdges",value:function(){return Zr(this,pc,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=Zr(this,dc,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=Zr(this,pc,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){Zr(this,dc,"f").delete(t)}},{key:"deleteEdges",value:function(t){Zr(this,pc,"f").delete(t)}},{key:"clear",value:function(){Zr(this,dc,"f").clear(),Zr(this,pc,"f").clear()}},{key:"commit",value:function(){for(var t,n,i={nodes:Zr(this,dc,"f").commit(),edges:Zr(this,pc,"f").commit()},s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(t=Zr(this,Ow,"f")).call.apply(t,hN(n=[this,i]).call(n,o)),i}}]),e}();dc=new ky,pc=new ky,Ow=new ky;function lz(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=vbt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function vbt(e,r){var t;if(e){if(typeof e=="string")return uz(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uz(e,r)}}function uz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var gbt=function(){function e(r,t){var n=this;ft(this,e),this.body=r,this.canvas=t,this._selectionAccumulator=new pbt,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Wn(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return ht(e,[{key:"setOptions",value:function(t){if(t!==void 0){var n=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];Qv(n,this.options,t)}}},{key:"selectOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(n=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return n}},{key:"selectAdditionalOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(n=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return n}},{key:"_initBaseEvent",value:function(t,n){var i={};return i.pointer={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)},i.event=t,i}},{key:"generateClickEvent",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this._initBaseEvent(n,i);if(o===!0)a.nodes=[],a.edges=[];else{var l=this.getSelection();a.nodes=l.nodes,a.edges=l.edges}s!==void 0&&(a.previousSelection=s),t=="click"&&(a.items=this.getClickedItems(i)),n.controlEdge!==void 0&&(a.controlEdge=n.controlEdge),this.body.emitter.emit(t,a)}},{key:"selectObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(t!==void 0){if(t instanceof Ks){if(n===!0){var i;(i=this._selectionAccumulator).addEdges.apply(i,al(t.edges))}this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var n=[],i=this.body.nodes,s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}return n}},{key:"_pointerToPositionObject",value:function(t){var n=this.canvas.DOMtoCanvas(t);return{left:n.x-1,top:n.y+1,right:n.x+1,bottom:n.y-1}}},{key:"getNodeAt",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._pointerToPositionObject(t),s=this._getAllNodesOverlappingWith(i);if(s.length>0)return n===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}},{key:"_getEdgesOverlappingWith",value:function(t,n){for(var i=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var o=this.body.edgeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var n=[];return this._getEdgesOverlappingWith(t,n),n}},{key:"getEdgeAt",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.canvas.DOMtoCanvas(t),s=10,o=null,a=this.body.edges,l=0;l<this.body.edgeIndices.length;l++){var u=this.body.edgeIndices[l],f=a[u];if(f.connected){var c=f.from.x,d=f.from.y,y=f.to.x,w=f.to.y,b=f.edgeType.getDistanceToEdge(c,d,y,w,i.x,i.y);b<s&&(o=u,s=b)}}if(o!==null)return n===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(t){t instanceof Ks?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){if(t instanceof Ks){var n;this._selectionAccumulator.deleteNodes(t),(n=this._selectionAccumulator).deleteEdges.apply(n,al(t.edges))}else this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n);i.hover===!0&&(i.hover=!1,i instanceof Ks?(s.node=i.id,this.body.emitter.emit("blurNode",s)):(s.edge=i.id,this.body.emitter.emit("blurEdge",s)))}},{key:"emitHoverEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n),o=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof Ks?(s.node=i.id,this.body.emitter.emit("hoverNode",s)):(s.edge=i.id,this.body.emitter.emit("hoverEdge",s))),o}},{key:"hoverObject",value:function(t,n){var i=this.getNodeAt(n);i===void 0&&(i=this.getEdgeAt(n));var s=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(i===void 0||i instanceof Ks&&i.id!=o||i instanceof Cp)&&(this.emitBlurEvent(t,n,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],s=!0);for(var a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(s===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(i===void 0||i instanceof Cp&&i.id!=a||i instanceof Ks&&!i.hover)&&(this.emitBlurEvent(t,n,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],s=!0));if(i!==void 0){var l=mn(this.hoverObj.edges).length,u=mn(this.hoverObj.nodes).length,f=i instanceof Cp&&l===0&&u===0,c=i instanceof Ks&&l===0&&u===0;(s||f||c)&&(s=this.emitHoverEvent(t,n,i)),i instanceof Ks&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}s===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,n){var i=!1,s=this._selectionAccumulator.commit(),o={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",n,t,o),i=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",n,t,o),i=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",n,t),i=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",n,t),i=!0),i===!0&&this.generateClickEvent("select",n,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return lv(t=this._selectionAccumulator.getNodes()).call(t,function(n){return n.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return lv(t=this._selectionAccumulator.getEdges()).call(t,function(n){return n.id})}},{key:"setSelection",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((n.unselectAll||n.unselectAll===void 0)&&this.unselectAll(),t.nodes){var i=lz(t.nodes),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.body.nodes[o];if(!a)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(a,n.highlightEdges)}}catch(d){i.e(d)}finally{i.f()}}if(t.edges){var l=lz(t.edges),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=this.body.edges[f];if(!c)throw new RangeError('Edge with id "'+f+'" not found');this.selectObject(c)}}catch(d){l.e(d)}finally{l.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:n})}},{key:"selectEdges",value:function(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var n in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,n.id)||this._selectionAccumulator.deleteEdges(n)}},{key:"getClickedItems",value:function(t){for(var n=this.canvas.DOMtoCanvas(t),i=[],s=this.body.nodeIndices,o=this.body.nodes,a=s.length-1;a>=0;a--){var l=o[s[a]],u=l.getItemsOnPoint(n);i.push.apply(i,u)}for(var f=this.body.edgeIndices,c=this.body.edges,d=f.length-1;d>=0;d--){var y=c[f[d]],w=y.getItemsOnPoint(n);i.push.apply(i,w)}return i}}]),e}(),t3={},ybt={get exports(){return t3},set exports(e){t3=e}},cz=mJ,mbt=Math.floor,r3=function(e,r){var t=e.length,n=mbt(t/2);return t<8?bbt(e,r):wbt(e,r3(cz(e,0,n),r),r3(cz(e,n),r),r)},bbt=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},wbt=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},$bt=r3,_bt=bb,fz=_bt.match(/firefox\/(\d+)/i),xbt=!!fz&&+fz[1],Ebt=bb,Sbt=/MSIE|Trident/.test(Ebt),kbt=bb,hz=kbt.match(/AppleWebKit\/(\d+)\./),Tbt=!!hz&&+hz[1],Ibt=zt,Ree=Ir,Abt=Jh,Obt=uo,dz=Ba,Cbt=fQ,pz=xl,BN=Tr,Pbt=$bt,Nbt=Xv,vz=xbt,Rbt=Sbt,gz=wb,yz=Tbt,Tc=[],mz=Ree(Tc.sort),Dbt=Ree(Tc.push),Bbt=BN(function(){Tc.sort(void 0)}),Mbt=BN(function(){Tc.sort(null)}),Lbt=Nbt("sort"),Dee=!BN(function(){if(gz)return gz<70;if(!(vz&&vz>3)){if(Rbt)return!0;if(yz)return yz<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Tc.push({k:t+i,v:n})}for(Tc.sort(function(s,o){return o.v-s.v}),i=0;i<Tc.length;i++)t=Tc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),Fbt=Bbt||!Mbt||!Lbt||!Dee,jbt=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:pz(r)>pz(t)?1:-1}};Ibt({target:"Array",proto:!0,forced:Fbt},{sort:function(r){r!==void 0&&Abt(r);var t=Obt(this);if(Dee)return r===void 0?mz(t):mz(t,r);var n=[],i=dz(t),s,o;for(o=0;o<i;o++)o in t&&Dbt(n,t[o]);for(Pbt(n,jbt(r)),s=dz(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)Cbt(t,o++);return t}});var zbt=_i,Hbt=zbt("Array").sort,Ubt=Bn,Wbt=Hbt,wT=Array.prototype,qbt=function(e){var r=e.sort;return e===wT||Ubt(wT,e)&&r===wT.sort?Wbt:r},Kbt=qbt,Vbt=Kbt;(function(e){e.exports=Vbt})(ybt);var $T=Pt(t3),n3={},Gbt={get exports(){return n3},set exports(e){n3=e}},Ybt=Jh,Zbt=uo,Xbt=kx,Jbt=Ba,Qbt=TypeError,bz=function(e){return function(r,t,n,i){Ybt(t);var s=Zbt(r),o=Xbt(s),a=Jbt(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw Qbt("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},e0t={left:bz(!1),right:bz(!0)},t0t=Cu,r0t=typeof process<"u"&&t0t(process)=="process",n0t=zt,i0t=e0t.left,s0t=Xv,wz=wb,o0t=r0t,a0t=!o0t&&wz>79&&wz<83,l0t=a0t||!s0t("reduce");n0t({target:"Array",proto:!0,forced:l0t},{reduce:function(r){var t=arguments.length;return i0t(this,r,t,t>1?arguments[1]:void 0)}});var u0t=_i,c0t=u0t("Array").reduce,f0t=Bn,h0t=c0t,_T=Array.prototype,d0t=function(e){var r=e.reduce;return e===_T||f0t(_T,e)&&r===_T.reduce?h0t:r},p0t=d0t,v0t=p0t;(function(e){e.exports=v0t})(Gbt);var Bee=Pt(n3),ym={},g0t={get exports(){return ym},set exports(e){ym=e}},Mee={};(function(e){(function(r,t){t(e)})(iC,function(r){r.__esModule=!0,r.sort=T;function t(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var n=32,i=7,s=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(_){return _<1e5?_<100?_<10?0:1:_<1e4?_<1e3?2:3:4:_<1e7?_<1e6?5:6:_<1e9?_<1e8?7:8:9}function l(_,A){if(_===A)return 0;if(~~_===_&&~~A===A){if(_===0||A===0)return _<A?-1:1;if(_<0||A<0){if(A>=0)return-1;if(_>=0)return 1;_=-_,A=-A}var x=a(_),I=a(A),O=0;return x<I?(_*=o[I-x-1],A/=10,O=-1):x>I&&(A*=o[x-I-1],_/=10,O=1),_===A?O:_<A?-1:1}var C=String(_),g=String(A);return C===g?0:C<g?-1:1}function u(_){for(var A=0;_>=n;)A|=_&1,_>>=1;return _+A}function f(_,A,x,I){var O=A+1;if(O===x)return 1;if(I(_[O++],_[A])<0){for(;O<x&&I(_[O],_[O-1])<0;)O++;c(_,A,O)}else for(;O<x&&I(_[O],_[O-1])>=0;)O++;return O-A}function c(_,A,x){for(x--;A<x;){var I=_[A];_[A++]=_[x],_[x--]=I}}function d(_,A,x,I,O){for(I===A&&I++;I<x;I++){for(var C=_[I],g=A,M=I;g<M;){var B=g+M>>>1;O(C,_[B])<0?M=B:g=B+1}var z=I-g;switch(z){case 3:_[g+3]=_[g+2];case 2:_[g+2]=_[g+1];case 1:_[g+1]=_[g];break;default:for(;z>0;)_[g+z]=_[g+z-1],z--}_[g]=C}}function y(_,A,x,I,O,C){var g=0,M=0,B=1;if(C(_,A[x+O])>0){for(M=I-O;B<M&&C(_,A[x+O+B])>0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M),g+=O,B+=O}else{for(M=O+1;B<M&&C(_,A[x+O-B])<=0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M);var z=g;g=O-B,B=O-z}for(g++;g<B;){var V=g+(B-g>>>1);C(_,A[x+V])>0?g=V+1:B=V}return B}function w(_,A,x,I,O,C){var g=0,M=0,B=1;if(C(_,A[x+O])<0){for(M=O+1;B<M&&C(_,A[x+O-B])<0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M);var z=g;g=O-B,B=O-z}else{for(M=I-O;B<M&&C(_,A[x+O+B])>=0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M),g+=O,B+=O}for(g++;g<B;){var V=g+(B-g>>>1);C(_,A[x+V])<0?B=V:g=V+1}return B}var b=function(){function _(A,x){t(this,_),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=s,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=A,this.compare=x,this.length=A.length,this.length<2*s&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return _.prototype.pushRun=function(x,I){this.runStart[this.stackSize]=x,this.runLength[this.stackSize]=I,this.stackSize+=1},_.prototype.mergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;if(x>=1&&this.runLength[x-1]<=this.runLength[x]+this.runLength[x+1]||x>=2&&this.runLength[x-2]<=this.runLength[x]+this.runLength[x-1])this.runLength[x-1]<this.runLength[x+1]&&x--;else if(this.runLength[x]>this.runLength[x+1])break;this.mergeAt(x)}},_.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;x>0&&this.runLength[x-1]<this.runLength[x+1]&&x--,this.mergeAt(x)}},_.prototype.mergeAt=function(x){var I=this.compare,O=this.array,C=this.runStart[x],g=this.runLength[x],M=this.runStart[x+1],B=this.runLength[x+1];this.runLength[x]=g+B,x===this.stackSize-3&&(this.runStart[x+1]=this.runStart[x+2],this.runLength[x+1]=this.runLength[x+2]),this.stackSize--;var z=w(O[M],O,C,g,0,I);C+=z,g-=z,g!==0&&(B=y(O[C+g-1],O,M,B,B-1,I),B!==0&&(g<=B?this.mergeLow(C,g,M,B):this.mergeHigh(C,g,M,B)))},_.prototype.mergeLow=function(x,I,O,C){var g=this.compare,M=this.array,B=this.tmp,z=0;for(z=0;z<I;z++)B[z]=M[x+z];var V=0,ne=O,re=x;if(M[re++]=M[ne++],--C===0){for(z=0;z<I;z++)M[re+z]=B[V+z];return}if(I===1){for(z=0;z<C;z++)M[re+z]=M[ne+z];M[re+C]=B[V];return}for(var J=this.minGallop;;){var F=0,Z=0,ie=!1;do if(g(M[ne],B[V])<0){if(M[re++]=M[ne++],Z++,F=0,--C===0){ie=!0;break}}else if(M[re++]=B[V++],F++,Z=0,--I===1){ie=!0;break}while((F|Z)<J);if(ie)break;do{if(F=w(M[ne],B,V,I,0,g),F!==0){for(z=0;z<F;z++)M[re+z]=B[V+z];if(re+=F,V+=F,I-=F,I<=1){ie=!0;break}}if(M[re++]=M[ne++],--C===0){ie=!0;break}if(Z=y(B[V],M,ne,C,0,g),Z!==0){for(z=0;z<Z;z++)M[re+z]=M[ne+z];if(re+=Z,ne+=Z,C-=Z,C===0){ie=!0;break}}if(M[re++]=B[V++],--I===1){ie=!0;break}J--}while(F>=i||Z>=i);if(ie)break;J<0&&(J=0),J+=2}if(this.minGallop=J,J<1&&(this.minGallop=1),I===1){for(z=0;z<C;z++)M[re+z]=M[ne+z];M[re+C]=B[V]}else{if(I===0)throw new Error("mergeLow preconditions were not respected");for(z=0;z<I;z++)M[re+z]=B[V+z]}},_.prototype.mergeHigh=function(x,I,O,C){var g=this.compare,M=this.array,B=this.tmp,z=0;for(z=0;z<C;z++)B[z]=M[O+z];var V=x+I-1,ne=C-1,re=O+C-1,J=0,F=0;if(M[re--]=M[V--],--I===0){for(J=re-(C-1),z=0;z<C;z++)M[J+z]=B[z];return}if(C===1){for(re-=I,V-=I,F=re+1,J=V+1,z=I-1;z>=0;z--)M[F+z]=M[J+z];M[re]=B[ne];return}for(var Z=this.minGallop;;){var ie=0,_e=0,we=!1;do if(g(B[ne],M[V])<0){if(M[re--]=M[V--],ie++,_e=0,--I===0){we=!0;break}}else if(M[re--]=B[ne--],_e++,ie=0,--C===1){we=!0;break}while((ie|_e)<Z);if(we)break;do{if(ie=I-w(B[ne],M,x,I,I-1,g),ie!==0){for(re-=ie,V-=ie,I-=ie,F=re+1,J=V+1,z=ie-1;z>=0;z--)M[F+z]=M[J+z];if(I===0){we=!0;break}}if(M[re--]=B[ne--],--C===1){we=!0;break}if(_e=C-y(M[V],B,0,C,C-1,g),_e!==0){for(re-=_e,ne-=_e,C-=_e,F=re+1,J=ne+1,z=0;z<_e;z++)M[F+z]=B[J+z];if(C<=1){we=!0;break}}if(M[re--]=M[V--],--I===0){we=!0;break}Z--}while(ie>=i||_e>=i);if(we)break;Z<0&&(Z=0),Z+=2}if(this.minGallop=Z,Z<1&&(this.minGallop=1),C===1){for(re-=I,V-=I,F=re+1,J=V+1,z=I-1;z>=0;z--)M[F+z]=M[J+z];M[re]=B[ne]}else{if(C===0)throw new Error("mergeHigh preconditions were not respected");for(J=re-(C-1),z=0;z<C;z++)M[J+z]=B[z]}},_}();function T(_,A,x,I){if(!Array.isArray(_))throw new TypeError("Can only sort arrays");A?typeof A!="function"&&(I=x,x=A,A=l):A=l,x||(x=0),I||(I=_.length);var O=I-x;if(!(O<2)){var C=0;if(O<n){C=f(_,x,I,A),d(_,x,I,x+C,A);return}var g=new b(_,A),M=u(O);do{if(C=f(_,x,I,A),C<M){var B=O;B>M&&(B=M),d(_,x,x+B,x+C,A),C=B}g.pushRun(x,C),g.mergeRuns(),O-=C,x+=C}while(O!==0);g.forceMergeRuns()}}})})(Mee);(function(e){e.exports=Mee})(g0t);var $z=Pt(ym);function Lee(e){var r=y0t();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function y0t(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Fee=function(){function e(){ft(this,e)}return ht(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,n,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,n){this.fake_use(t,n),this.abstract()}},{key:"shift",value:function(t,n){this.fake_use(t,n),this.abstract()}}]),e}(),m0t=function(e){Or(t,e);var r=Lee(t);function t(n){var i;return ft(this,t),i=r.call(this),i.layout=n,i}return ht(t,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.x=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_x,max:s.max_x}}},{key:"sort",value:function(i){ym.sort(i,function(s,o){return s.x-o.x})}},{key:"fix",value:function(i,s){i.y=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.y=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].x+=s}}]),t}(Fee),b0t=function(e){Or(t,e);var r=Lee(t);function t(n){var i;return ft(this,t),i=r.call(this),i.layout=n,i}return ht(t,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.y=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_y,max:s.max_y}}},{key:"sort",value:function(i){ym.sort(i,function(s,o){return s.y-o.y})}},{key:"fix",value:function(i,s){i.x=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.x=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].y+=s}}]),t}(Fee),i3={},w0t={get exports(){return i3},set exports(e){i3=e}},$0t=zt,_0t=rf.every,x0t=Xv,E0t=x0t("every");$0t({target:"Array",proto:!0,forced:!E0t},{every:function(r){return _0t(this,r,arguments.length>1?arguments[1]:void 0)}});var S0t=_i,k0t=S0t("Array").every,T0t=Bn,I0t=k0t,xT=Array.prototype,A0t=function(e){var r=e.every;return e===xT||T0t(xT,e)&&r===xT.every?I0t:r},O0t=A0t,C0t=O0t;(function(e){e.exports=C0t})(w0t);var jee=Pt(i3);function P0t(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=N0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function N0t(e,r){var t;if(e){if(typeof e=="string")return _z(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _z(e,r)}}function _z(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function R0t(e,r){var t=new Kf;return qr(e).call(e,function(n){var i;qr(i=n.edges).call(i,function(s){s.connected&&t.add(s)})}),qr(t).call(t,function(n){var i=n.from.id,s=n.to.id;r[i]==null&&(r[i]=0),(r[s]==null||r[i]>=r[s])&&(r[s]=r[i]+1)}),r}function D0t(e){return zee(function(r){var t,n;return jee(t=Os(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.to===r})},function(r,t){return t>r},"from",e)}function B0t(e){return zee(function(r){var t,n;return jee(t=Os(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.from===r})},function(r,t){return t<r},"to",e)}function zee(e,r,t,n){var i,s=wh(null),o=Bee(i=al(vee(n).call(n))).call(i,function(y,w){return y+1+w.edges.length},0),a=t+"Id",l=t==="to"?1:-1,u=P0t(n),f;try{var c=function(){var w=bn(f.value,2),b=w[0],T=w[1];if(!n.has(b)||!e(T))return"continue";s[b]=0;for(var _=[T],A=0,x,I=function(){var g,M;if(!n.has(b))return"continue";var B=s[x.id]+l;if(qr(g=Os(M=x.edges).call(M,function(z){return z.connected&&z.to!==z.from&&z[t]!==x&&n.has(z.toId)&&n.has(z.fromId)})).call(g,function(z){var V=z[a],ne=s[V];(ne==null||r(B,ne))&&(s[V]=B,_.push(z[t]))}),A>o)return{v:{v:R0t(n,s)}};++A};x=_.pop();){var O=I();if(O!=="continue"&&Dr(O)==="object")return O.v}};for(u.s();!(f=u.n()).done;){var d=c();if(d!=="continue"&&Dr(d)==="object")return d.v}}catch(y){u.e(y)}finally{u.f()}return s}var M0t=function(){function e(){ft(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return ht(e,[{key:"addRelation",value:function(t,n){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(n),this.parentReference[n]===void 0&&(this.parentReference[n]=[]),this.parentReference[n].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,n){n!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=n,this.treeIndex=Math.max(n,this.treeIndex))}},{key:"ensureLevel",value:function(t){this.levels[t]===void 0&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var n=this,i={},s=function o(a){if(i[a]!==void 0)return i[a];var l=n.levels[a];if(n.childrenReference[a]){var u=n.childrenReference[a];if(u.length>0)for(var f=0;f<u.length;f++)l=Math.max(l,o(u[f]))}return i[a]=l,l};return s(t)}},{key:"levelDownstream",value:function(t,n){this.levels[n.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[n.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var n=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.levels[i]!==void 0&&(n=Math.min(this.levels[i],n));for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.levels[s]!==void 0&&(this.levels[s]-=n)}},{key:"getTreeSize",value:function(t,n){var i=1e9,s=-1e9,o=1e9,a=-1e9;for(var l in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,l)&&this.trees[l]===n){var u=t[l];i=Math.min(u.x,i),s=Math.max(u.x,s),o=Math.min(u.y,o),a=Math.max(u.y,a)}return{min_x:i,max_x:s,min_y:o,max_y:a}}},{key:"hasSameParent",value:function(t,n){var i=this.parentReference[t.id],s=this.parentReference[n.id];if(i===void 0||s===void 0)return!1;for(var o=0;o<i.length;o++)for(var a=0;a<s.length;a++)if(i[o]==s[a])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,n){return this.trees[t.id]===this.trees[n.id]}},{key:"getLevels",value:function(){return mn(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,n){this.distributionOrdering[n]===void 0&&(this.distributionOrdering[n]=[]);var i=!1,s=this.distributionOrdering[n];for(var o in s)if(s[o]===t){i=!0;break}i||(this.distributionOrdering[n].push(t),this.distributionIndex[t.id]=this.distributionOrdering[n].length-1)}}]),e}(),L0t=function(){function e(r){ft(this,e),this.body=r,this._resetRNG(Math.random()+":"+L$()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Wn(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(t.options.hierarchical.enabled===!0){var n=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",n,!1)}})}},{key:"setOptions",value:function(t,n){if(t!==void 0){var i=this.options.hierarchical,s=i.enabled;if(Qv(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Fo(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(n);if(s===!0)return this.body.emitter.emit("refresh"),Xr(n,this.optionsBackup)}return n}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Yx(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){var n=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:n.enabled===void 0?!0:n.enabled,solver:"hierarchicalRepulsion"},n.enabled=n.enabled===void 0?!0:n.enabled,n.solver=n.solver||"barnesHut"):Dr(t.physics)==="object"?(n.enabled=t.physics.enabled===void 0?!0:t.physics.enabled,n.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(n.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var s=t.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(i=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},t.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:i,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var n=t.length+50,i=0;i<t.length;i++){var s=t[i],o=2*Math.PI*this._rng();s.x===void 0&&(s.x=n*Math.cos(o)),s.y===void 0&&(s.y=n*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=this.body.nodeIndices,n=0,i=0;i<t.length;i++){var s=this.body.nodes[t[i]];s.predefinedPosition===!0&&(n+=1)}if(n<.5*t.length){var o=10,a=0,l=this.options.clusterThreshold,u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>l){for(var f=t.length;t.length>l&&a<=o;){a+=1;var c=t.length;a%3===0?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);var d=t.length;if(c==d&&a%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*f)})}a>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var y=70,w=0;w<t.length;w++){var b=this.body.nodes[t[w]];b.predefinedPosition===!1&&(b.x+=(.5-this._rng())*y,b.y+=(.5-this._rng())*y)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=os.getRangeCore(this.body.nodes,this.body.nodeIndices),n=os.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var s=this.body.nodes[this.body.nodeIndices[i]];s.x-=n.x,s.y-=n.y}}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var n=0;n<this.body.nodeIndices.length;n++)this.body.nodes[this.body.nodeIndices[n]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[n],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t,n,i=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new M0t;for(n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&(t=this.body.nodes[n],t.options.level!==void 0?(i=!0,this.hierarchical.levels[n]=t.options.level):s=!0);if(s===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(s===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);var l=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(l),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,n=!1,i={},s=function(){for(var x=a(),I=0,O=0;O<x.length-1;O++){var C=x[O].max-x[O+1].min;I+=C+t.options.hierarchical.treeSpacing,o(O+1,I)}},o=function(x,I){var O=t.hierarchical.trees;for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&O[C]===x&&t.direction.shift(C,I)},a=function(){for(var x=[],I=0;I<t.hierarchical.numTrees();I++)x.push(t.direction.getTreeSize(I));return x},l=function A(x,I){if(!I[x.id]&&(I[x.id]=!0,t.hierarchical.childrenReference[x.id])){var O=t.hierarchical.childrenReference[x.id];if(O.length>0)for(var C=0;C<O.length;C++)A(t.body.nodes[O[C]],I)}},u=function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,O=1e9,C=1e9,g=1e9,M=-1e9;for(var B in x)if(Object.prototype.hasOwnProperty.call(x,B)){var z=t.body.nodes[B],V=t.hierarchical.levels[z.id],ne=t.direction.getPosition(z),re=t._getSpaceAroundNode(z,x),J=bn(re,2),F=J[0],Z=J[1];O=Math.min(F,O),C=Math.min(Z,C),V<=I&&(g=Math.min(ne,g),M=Math.max(ne,M))}return[g,M,O,C]},f=function(x,I){var O=t.hierarchical.getMaxLevel(x.id),C=t.hierarchical.getMaxLevel(I.id);return Math.min(O,C)},c=function(x,I,O){for(var C=t.hierarchical,g=0;g<I.length;g++){var M=I[g],B=C.distributionOrdering[M];if(B.length>1)for(var z=0;z<B.length-1;z++){var V=B[z],ne=B[z+1];C.hasSameParent(V,ne)&&C.inSameSubNetwork(V,ne)&&x(V,ne,O)}}},d=function(x,I){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=t.direction.getPosition(x),g=t.direction.getPosition(I),M=Math.abs(g-C),B=t.options.hierarchical.nodeSpacing;if(M>B){var z={},V={};l(x,z),l(I,V);var ne=f(x,I),re=u(z,ne),J=u(V,ne),F=re[1],Z=J[0],ie=J[2],_e=Math.abs(F-Z);if(_e>B){var we=F-Z+B;we<-ie+B&&(we=-ie+B),we<0&&(t._shiftBlock(I.id,we),n=!0,O===!0&&t._centerParent(I))}}},y=function(x,I){for(var O=I.id,C=I.edges,g=t.hierarchical.levels[I.id],M=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,B={},z=[],V=0;V<C.length;V++){var ne=C[V];if(ne.toId!=ne.fromId){var re=ne.toId==O?ne.from:ne.to;B[C[V].id]=re,t.hierarchical.levels[re.id]<g&&z.push(ne)}}var J=function(He,Ge){for(var it=0,xe=0;xe<Ge.length;xe++)if(B[Ge[xe].id]!==void 0){var ge=t.direction.getPosition(B[Ge[xe].id])-He;it+=ge/Math.sqrt(ge*ge+M)}return it},F=function(He,Ge){for(var it=0,xe=0;xe<Ge.length;xe++)if(B[Ge[xe].id]!==void 0){var ge=t.direction.getPosition(B[Ge[xe].id])-He;it-=M*Math.pow(ge*ge+M,-1.5)}return it},Z=function(He,Ge){for(var it=t.direction.getPosition(I),xe={},ge=0;ge<He;ge++){var Te=J(it,Ge),je=F(it,Ge),$=40,S=Math.max(-$,Math.min($,Math.round(Te/je)));if(it=it-S,xe[it]!==void 0)break;xe[it]=ge}return it},ie=function(He){var Ge=t.direction.getPosition(I);if(i[I.id]===void 0){var it={};l(I,it),i[I.id]=it}var xe=u(i[I.id]),ge=xe[2],Te=xe[3],je=He-Ge,$=0;je>0?$=Math.min(je,Te-t.options.hierarchical.nodeSpacing):je<0&&($=-Math.min(-je,ge-t.options.hierarchical.nodeSpacing)),$!=0&&(t._shiftBlock(I.id,$),n=!0)},_e=function(He){var Ge=t.direction.getPosition(I),it=t._getSpaceAroundNode(I),xe=bn(it,2),ge=xe[0],Te=xe[1],je=He-Ge,$=Ge;je>0?$=Math.min(Ge+(Te-t.options.hierarchical.nodeSpacing),He):je<0&&($=Math.max(Ge-(ge-t.options.hierarchical.nodeSpacing),He)),$!==Ge&&(t.direction.setPosition(I,$),n=!0)},we=Z(x,z);ie(we),we=Z(x,C),_e(we)},w=function(x){var I=t.hierarchical.getLevels();I=bh(I).call(I);for(var O=0;O<x;O++){n=!1;for(var C=0;C<I.length;C++)for(var g=I[C],M=t.hierarchical.distributionOrdering[g],B=0;B<M.length;B++)y(1e3,M[B]);if(n!==!0)break}},b=function(x){var I=t.hierarchical.getLevels();I=bh(I).call(I);for(var O=0;O<x&&(n=!1,c(d,I,!0),n===!0);O++);},T=function(){for(var x in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,x)&&t._centerParent(t.body.nodes[x])},_=function(){var x=t.hierarchical.getLevels();x=bh(x).call(x);for(var I=0;I<x.length;I++)for(var O=x[I],C=t.hierarchical.distributionOrdering[O],g=0;g<C.length;g++)t._centerParent(C[g])};this.options.hierarchical.blockShifting===!0&&(b(5),T()),this.options.hierarchical.edgeMinimization===!0&&w(20),this.options.hierarchical.parentCentralization===!0&&_(),s()}},{key:"_getSpaceAroundNode",value:function(t,n){var i=!0;n===void 0&&(i=!1);var s=this.hierarchical.levels[t.id];if(s!==void 0){var o=this.hierarchical.distributionIndex[t.id],a=this.direction.getPosition(t),l=this.hierarchical.distributionOrdering[s],u=1e9,f=1e9;if(o!==0){var c=l[o-1];if(i===!0&&n[c.id]===void 0||i===!1){var d=this.direction.getPosition(c);u=a-d}}if(o!=l.length-1){var y=l[o+1];if(i===!0&&n[y.id]===void 0||i===!1){var w=this.direction.getPosition(y);f=Math.min(f,w-a)}}return[u,f]}else return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var n=this.hierarchical.parentReference[t.id],i=0;i<n.length;i++){var s=n[i],o=this.body.nodes[s],a=this.hierarchical.childrenReference[s];if(a!==void 0){var l=this._getCenterPosition(a),u=this.direction.getPosition(o),f=this._getSpaceAroundNode(o),c=bn(f,2),d=c[0],y=c[1],w=u-l;(w<0&&Math.abs(w)<y-this.options.hierarchical.nodeSpacing||w>0&&Math.abs(w)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,l)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,s=mn(t[n]);s=this._indexArrayToNodes(s),$T(i=this.direction).call(i,s);for(var o=0,a=0;a<s.length;a++){var l=s[a];if(this.positionedNodes[l.id]===void 0){var u=this.options.hierarchical.nodeSpacing,f=u*o;o>0&&(f=this.direction.getPosition(s[a-1])+u),this.direction.setPosition(l,f,n),this._validatePositionAndContinue(l,n,f),o++}}}}},{key:"_placeBranchNodes",value:function(t,n){var i,s=this.hierarchical.childrenReference[t];if(s!==void 0){for(var o=[],a=0;a<s.length;a++)o.push(this.body.nodes[s[a]]);$T(i=this.direction).call(i,o);for(var l=0;l<o.length;l++){var u=o[l],f=this.hierarchical.levels[u.id];if(f>n&&this.positionedNodes[u.id]===void 0){var c=this.options.hierarchical.nodeSpacing,d=void 0;l===0?d=this.direction.getPosition(this.body.nodes[t]):d=this.direction.getPosition(o[l-1])+c,this.direction.setPosition(u,d,f),this._validatePositionAndContinue(u,f,d)}else return}var y=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[t],y,n)}}},{key:"_validatePositionAndContinue",value:function(t,n,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[n]!==void 0){var s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[n]]);if(i-s<this.options.hierarchical.nodeSpacing){var o=s+this.options.hierarchical.nodeSpacing-i,a=this._findCommonParent(this.lastNodeOnLevel[n],t.id);this._shiftBlock(a.withChild,o)}}this.lastNodeOnLevel[n]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,n)}}},{key:"_indexArrayToNodes",value:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.body.nodes[t[i]]);return n}},{key:"_getDistribution",value:function(){var t={},n,i;for(n in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,n)){i=this.body.nodes[n];var s=this.hierarchical.levels[n]===void 0?0:this.hierarchical.levels[n];this.direction.fix(i,s),t[s]===void 0&&(t[s]={}),t[s][n]=i}return t}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return gr(t.edges,function(s){var o;Sr(o=n.body.edgeIndices).call(o,s.id)!==-1&&i.push(s)}),i}},{key:"_getHubSizes",value:function(){var t=this,n={},i=this.body.nodeIndices;gr(i,function(o){var a=t.body.nodes[o],l=t._getActiveEdges(a).length;n[l]=!0});var s=[];return gr(n,function(o){s.push(Number(o))}),$T($z).call($z,s,function(o,a){return a-o}),s}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,n=function(u,f){t.hierarchical.levelDownstream(u,f)},i=this._getHubSizes(),s=function(){var u=i[o];if(u===0)return"break";gr(t.body.nodeIndices,function(f){var c=t.body.nodes[f];u===t._getActiveEdges(c).length&&t._crawlNetwork(n,f)})},o=0;o<i.length;++o){var a=s();if(a==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,n=1e5,i=function(a,l,u){},s=function(a,l,u){var f=t.hierarchical.levels[a.id];f===void 0&&(f=t.hierarchical.levels[a.id]=n);var c=i(os.cloneOptions(a,"node"),os.cloneOptions(l,"node"),os.cloneOptions(u,"edge"));t.hierarchical.levels[l.id]=f+c};this._crawlNetwork(s),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,i=Bee(t=this.body.nodeIndices).call(t,function(s,o){return s.set(o,n.body.nodes[o]),s},new fee);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=B0t(i):this.hierarchical.levels=D0t(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,n=function(s,o){t.hierarchical.levels[o.id]>t.hierarchical.levels[s.id]&&t.hierarchical.addRelation(s.id,o.id)};this._crawlNetwork(n),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,s={},o=function d(y,w){if(s[y.id]===void 0){t.hierarchical.setTreeIndex(y,w),s[y.id]=!0;for(var b,T=t._getActiveEdges(y),_=0;_<T.length;_++){var A=T[_];A.connected===!0&&(A.toId==y.id?b=A.from:b=A.to,y.id!=b.id&&(n(y,b,A),d(b,w)))}}};if(i===void 0)for(var a=0,l=0;l<this.body.nodeIndices.length;l++){var u=this.body.nodeIndices[l];if(s[u]===void 0){var f=this.body.nodes[u];o(f,a),a+=1}}else{var c=this.body.nodes[i];if(c===void 0){console.error("Node not found:",i);return}o(c)}}},{key:"_shiftBlock",value:function(t,n){var i=this,s={},o=function a(l){if(!s[l]){s[l]=!0,i.direction.shift(l,n);var u=i.hierarchical.childrenReference[l];if(u!==void 0)for(var f=0;f<u.length;f++)a(u[f])}};o(t)}},{key:"_findCommonParent",value:function(t,n){var i=this,s={},o=function l(u,f){var c=i.hierarchical.parentReference[f];if(c!==void 0)for(var d=0;d<c.length;d++){var y=c[d];u[y]=!0,l(u,y)}},a=function l(u,f){var c=i.hierarchical.parentReference[f];if(c!==void 0)for(var d=0;d<c.length;d++){var y=c[d];if(u[y]!==void 0)return{foundParent:y,withChild:f};var w=l(u,y);if(w.foundParent!==null)return w}return{foundParent:null,withChild:f}};return o(s,t),a(s,n)}},{key:"setDirectionStrategy",value:function(){var t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";t?this.direction=new m0t(this):this.direction=new b0t(this)}},{key:"_getCenterPosition",value:function(t){for(var n=1e9,i=-1e9,s=0;s<t.length;s++){var o=void 0;if(t[s].id!==void 0)o=t[s];else{var a=t[s];o=this.body.nodes[a]}var l=this.direction.getPosition(o);n=Math.min(n,l),i=Math.max(i,l)}return .5*(n+i)}}]),e}();function F0t(e,r){var t=typeof sf<"u"&&Pu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=j0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function j0t(e,r){var t;if(e){if(typeof e=="string")return xz(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xz(e,r)}}function xz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var z0t=function(){function e(r,t,n,i){var s=this,o,a;ft(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Wn(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",nt(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",nt(a=this._restore).call(a,this))}return ht(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,n,i){n!==void 0&&(n.locale!==void 0?this.options.locale=n.locale:this.options.locale=i.locale,n.locales!==void 0?this.options.locales=n.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,Xr(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,n;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),o=i+s,a=this.options.locales[this.options.locale],l=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),l=!0),this.options.addEdge!==!1&&(l===!0?this._createSeperator(1):l=!0,this._createAddEdgeButton(a)),i===1&&typeof this.options.editNode=="function"?(l===!0?this._createSeperator(2):l=!0,this._createEditNodeButton(a)):s===1&&i===0&&this.options.editEdge!==!1&&(l===!0?this._createSeperator(3):l=!0,this._createEditEdgeButton(a)),o!==0&&(i>0&&this.options.deleteNode!==!1?(l===!0&&this._createSeperator(4),this._createDeleteButton(a)):i===0&&this.options.deleteEdge!==!1&&(l===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,nt(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",nt(n=this.showManipulatorToolbar).call(n,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}this._temporaryBindEvent("click",nt(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var n=this.selectionHandler.getSelectedNodes()[0];if(n!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(n.isCluster!==!0){var i=Xr({},n.options,!1);if(i.x=n.x,i.y=n.y,this.options.editNode.length===2)this.options.editNode(i,function(s){s!=null&&t.inMode==="editNode"&&t.body.data.nodes.getDataSet().update(s),t.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,n,i,s,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a,l=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(l),this._createSeperator(),this._createDescription(l.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,nt(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",nt(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",nt(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDrag",nt(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",nt(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",nt(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",Dr(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from.id,t.to.id);return}if(this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var s,o,a,l,u=this.body.edges[this.edgeBeingEditedId],f=this._getNewTargetNode(u.from.x,u.from.y),c=this._getNewTargetNode(u.to.x,u.to.y);this.temporaryIds.nodes.push(f.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[f.id]=f,this.body.nodeIndices.push(f.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",nt(s=this._controlNodeTouch).call(s,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",nt(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",nt(a=this._controlNodeDrag).call(a,this)),this._temporaryBindUI("onDragEnd",nt(l=this._controlNodeDragEnd).call(l,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(d){var y=u.edgeType.findBorderPositions(d);f.selected===!1&&(f.x=y.from.x,f.y=y.from.y),c.selected===!1&&(c.x=y.to.x,c.y=y.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var n=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),s=void 0;if(n.length>0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(s=this.options.deleteNode)}else i.length>0&&typeof this.options.deleteEdge=="function"&&(s=this.options.deleteEdge);if(typeof s=="function"){var a={nodes:n,edges:i};if(s.length===2)s(a,function(l){l!=null&&t.inMode==="delete"?(t.body.data.edges.getDataSet().remove(l.edges),t.body.data.nodes.getDataSet().remove(l.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(n),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var t,n;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(n=this.options.locales[this.options.locale])===null||n===void 0?void 0:n.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(t,n){var i=Xr({},this.options.controlNodeStyle);i.id="targetNode"+Sy(),i.hidden=!1,i.physics=!1,i.x=t,i.y=n;var s=this.body.functions.createNode(i);return s.shape.boundingBox={left:t,right:t,top:n,bottom:n},s}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},yc(this.editModeDiv);var n=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",n.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,nt(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(yc(this.editModeDiv),yc(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,n=F0t(cu(t=this._domEventListenerCleanupQueue).call(t,0)),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),yc(this.manipulationDiv),yc(this.editModeDiv),yc(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var n,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addNodeMode).call(n,this))}},{key:"_createAddEdgeButton",value:function(t){var n,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addEdgeMode).call(n,this))}},{key:"_createEditNodeButton",value:function(t){var n,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editNode).call(n,this))}},{key:"_createEditEdgeButton",value:function(t){var n,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editEdgeMode).call(n,this))}},{key:"_createDeleteButton",value:function(t){var n,i;this.options.rtl?i="vis-delete-rtl":i="vis-delete";var s=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,nt(n=this.deleteSelected).call(n,this))}},{key:"_createBackButton",value:function(t){var n,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.showManipulatorToolbar).call(n,this))}},{key:"_createButton",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+n,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=s,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,n){this.temporaryEventFunctions.push({event:t,boundFunction:n}),this.body.emitter.on(t,n)}},{key:"_temporaryBindUI",value:function(t,n){if(this.body.eventListeners[t]!==void 0)this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=n;else throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Rb(mn(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var n=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(n,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,n){var i=new Op(t,{});K$(i,n),this._domEventListenerCleanupQueue.push(function(){i.destroy()});var s=function(a){var l=a.keyCode,u=a.key;(u==="Enter"||u===" "||l===13||l===32)&&n()};t.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(function(){t.removeEventListener("keyup",s,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var n;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i=Sr(n=this.body.edgeIndices).call(n,this.temporaryIds.edges[t]);if(i!==-1){var s;cu(s=this.body.edgeIndices).call(s,i,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var a;delete this.body.nodes[this.temporaryIds.nodes[o]];var l=Sr(a=this.body.nodeIndices).call(a,this.temporaryIds.nodes[o]);if(l!==-1){var u;cu(u=this.body.nodeIndices).call(u,l,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Wn({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),l=s.isOverlappingWith(n);a===!0?(this.selectedControlNode=i,o.edgeType.from=i):l===!0&&(this.selectedControlNode=s,o.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var n=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(n);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--)if(o[l]!==this.selectedControlNode.id){a=this.body.nodes[o[l]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var u=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===u.id?this._performEditEdge(a.id,s.to.id):this._performEditEdge(s.from.id,a.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Wn({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var n=this.lastTouch,i=this.selectionHandler.getNodeAt(n);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this._getNewTargetNode(i.x,i.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);var o=this.body.functions.createEdge({id:"connectionEdge"+Sy(),from:i.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Sr(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}if(t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,n),this.temporaryIds.nodes[0]!==void 0){var f=this.body.nodes[this.temporaryIds.nodes[0]];f.x=this.canvas._XconvertDOMtoCanvas(n.x),f.y=this.canvas._YconvertDOMtoCanvas(n.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Sr(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(s,a.id)),t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,n),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var n=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,n,void 0,!0)}},{key:"_performAddNode",value:function(t){var n=this,i={id:Sy(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(i,function(s){s!=null&&n.inMode==="addNode"&&n.body.data.nodes.getDataSet().add(s),n.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,n){var i=this,s={from:t,to:n};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(s,function(o){o!=null&&i.inMode==="addEdge"&&(i.body.data.edges.getDataSet().add(o),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,n){var i=this,s={id:this.edgeBeingEditedId,from:t,to:n,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(Dr(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(s,function(a){a==null||i.inMode!=="editEdge"?(i.body.edges[s.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(a),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),lt="string",rt="boolean",Re="number",ny="array",Ot="object",Hee="dom",H0t="any",ET=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],ST={borderWidth:{number:Re},borderWidthSelected:{number:Re,undefined:"undefined"},brokenImage:{string:lt,undefined:"undefined"},chosen:{label:{boolean:rt,function:"function"},node:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{border:{string:lt},background:{string:lt},highlight:{border:{string:lt},background:{string:lt},__type__:{object:Ot,string:lt}},hover:{border:{string:lt},background:{string:lt},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},opacity:{number:Re,undefined:"undefined"},fixed:{x:{boolean:rt},y:{boolean:rt},__type__:{object:Ot,boolean:rt}},font:{align:{string:lt},color:{string:lt},size:{number:Re},face:{string:lt},background:{string:lt},strokeWidth:{number:Re},strokeColor:{string:lt},vadjust:{number:Re},multi:{boolean:rt,string:lt},bold:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},boldital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},ital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},mono:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},group:{string:lt,number:Re,undefined:"undefined"},heightConstraint:{minimum:{number:Re},valign:{string:lt},__type__:{object:Ot,boolean:rt,number:Re}},hidden:{boolean:rt},icon:{face:{string:lt},code:{string:lt},size:{number:Re},color:{string:lt},weight:{string:lt,number:Re},__type__:{object:Ot}},id:{string:lt,number:Re},image:{selected:{string:lt,undefined:"undefined"},unselected:{string:lt,undefined:"undefined"},__type__:{object:Ot,string:lt}},imagePadding:{top:{number:Re},right:{number:Re},bottom:{number:Re},left:{number:Re},__type__:{object:Ot,number:Re}},label:{string:lt,undefined:"undefined"},labelHighlightBold:{boolean:rt},level:{number:Re,undefined:"undefined"},margin:{top:{number:Re},right:{number:Re},bottom:{number:Re},left:{number:Re},__type__:{object:Ot,number:Re}},mass:{number:Re},physics:{boolean:rt},scaling:{min:{number:Re},max:{number:Re},label:{enabled:{boolean:rt},min:{number:Re},max:{number:Re},maxVisible:{number:Re},drawThreshold:{number:Re},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:lt},size:{number:Re},x:{number:Re},y:{number:Re},__type__:{object:Ot,boolean:rt}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:rt,array:ny},borderRadius:{number:Re},interpolation:{boolean:rt},useImageSize:{boolean:rt},useBorderWithImage:{boolean:rt},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ot}},size:{number:Re},title:{string:lt,dom:Hee,undefined:"undefined"},value:{number:Re,undefined:"undefined"},widthConstraint:{minimum:{number:Re},maximum:{number:Re},__type__:{object:Ot,boolean:rt,number:Re}},x:{number:Re},y:{number:Re},__type__:{object:Ot}},U0t={configure:{enabled:{boolean:rt},filter:{boolean:rt,string:lt,array:ny,function:"function"},container:{dom:Hee},showButton:{boolean:rt},__type__:{object:Ot,boolean:rt,string:lt,array:ny,function:"function"}},edges:{arrows:{to:{enabled:{boolean:rt},scaleFactor:{number:Re},type:{string:ET},imageHeight:{number:Re},imageWidth:{number:Re},src:{string:lt},__type__:{object:Ot,boolean:rt}},middle:{enabled:{boolean:rt},scaleFactor:{number:Re},type:{string:ET},imageWidth:{number:Re},imageHeight:{number:Re},src:{string:lt},__type__:{object:Ot,boolean:rt}},from:{enabled:{boolean:rt},scaleFactor:{number:Re},type:{string:ET},imageWidth:{number:Re},imageHeight:{number:Re},src:{string:lt},__type__:{object:Ot,boolean:rt}},__type__:{string:["from","to","middle"],object:Ot}},endPointOffset:{from:{number:Re},to:{number:Re},__type__:{object:Ot,number:Re}},arrowStrikethrough:{boolean:rt},background:{enabled:{boolean:rt},color:{string:lt},size:{number:Re},dashes:{boolean:rt,array:ny},__type__:{object:Ot,boolean:rt}},chosen:{label:{boolean:rt,function:"function"},edge:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{color:{string:lt},highlight:{string:lt},hover:{string:lt},inherit:{string:["from","to","both"],boolean:rt},opacity:{number:Re},__type__:{object:Ot,string:lt}},dashes:{boolean:rt,array:ny},font:{color:{string:lt},size:{number:Re},face:{string:lt},background:{string:lt},strokeWidth:{number:Re},strokeColor:{string:lt},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Re},multi:{boolean:rt,string:lt},bold:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},boldital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},ital:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},mono:{color:{string:lt},size:{number:Re},face:{string:lt},mod:{string:lt},vadjust:{number:Re},__type__:{object:Ot,string:lt}},__type__:{object:Ot,string:lt}},hidden:{boolean:rt},hoverWidth:{function:"function",number:Re},label:{string:lt,undefined:"undefined"},labelHighlightBold:{boolean:rt},length:{number:Re,undefined:"undefined"},physics:{boolean:rt},scaling:{min:{number:Re},max:{number:Re},label:{enabled:{boolean:rt},min:{number:Re},max:{number:Re},maxVisible:{number:Re},drawThreshold:{number:Re},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},selectionWidth:{function:"function",number:Re},selfReferenceSize:{number:Re},selfReference:{size:{number:Re},angle:{number:Re},renderBehindTheNode:{boolean:rt},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:lt},size:{number:Re},x:{number:Re},y:{number:Re},__type__:{object:Ot,boolean:rt}},smooth:{enabled:{boolean:rt},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Re},forceDirection:{string:["horizontal","vertical","none"],boolean:rt},__type__:{object:Ot,boolean:rt}},title:{string:lt,undefined:"undefined"},width:{number:Re},widthConstraint:{maximum:{number:Re},__type__:{object:Ot,boolean:rt,number:Re}},value:{number:Re,undefined:"undefined"},__type__:{object:Ot}},groups:{useDefaultGroups:{boolean:rt},__any__:ST,__type__:{object:Ot}},interaction:{dragNodes:{boolean:rt},dragView:{boolean:rt},hideEdgesOnDrag:{boolean:rt},hideEdgesOnZoom:{boolean:rt},hideNodesOnDrag:{boolean:rt},hover:{boolean:rt},keyboard:{enabled:{boolean:rt},speed:{x:{number:Re},y:{number:Re},zoom:{number:Re},__type__:{object:Ot}},bindToWindow:{boolean:rt},autoFocus:{boolean:rt},__type__:{object:Ot,boolean:rt}},multiselect:{boolean:rt},navigationButtons:{boolean:rt},selectable:{boolean:rt},selectConnectedEdges:{boolean:rt},hoverConnectedEdges:{boolean:rt},tooltipDelay:{number:Re},zoomView:{boolean:rt},zoomSpeed:{number:Re},__type__:{object:Ot}},layout:{randomSeed:{undefined:"undefined",number:Re,string:lt},improvedLayout:{boolean:rt},clusterThreshold:{number:Re},hierarchical:{enabled:{boolean:rt},levelSeparation:{number:Re},nodeSpacing:{number:Re},treeSpacing:{number:Re},blockShifting:{boolean:rt},edgeMinimization:{boolean:rt},parentCentralization:{boolean:rt},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ot,boolean:rt}},__type__:{object:Ot}},manipulation:{enabled:{boolean:rt},initiallyActive:{boolean:rt},addNode:{boolean:rt,function:"function"},addEdge:{boolean:rt,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ot,boolean:rt,function:"function"}},deleteNode:{boolean:rt,function:"function"},deleteEdge:{boolean:rt,function:"function"},controlNodeStyle:ST,__type__:{object:Ot,boolean:rt}},nodes:ST,physics:{enabled:{boolean:rt},barnesHut:{theta:{number:Re},gravitationalConstant:{number:Re},centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},damping:{number:Re},avoidOverlap:{number:Re},__type__:{object:Ot}},forceAtlas2Based:{theta:{number:Re},gravitationalConstant:{number:Re},centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},damping:{number:Re},avoidOverlap:{number:Re},__type__:{object:Ot}},repulsion:{centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},nodeDistance:{number:Re},damping:{number:Re},__type__:{object:Ot}},hierarchicalRepulsion:{centralGravity:{number:Re},springLength:{number:Re},springConstant:{number:Re},nodeDistance:{number:Re},damping:{number:Re},avoidOverlap:{number:Re},__type__:{object:Ot}},maxVelocity:{number:Re},minVelocity:{number:Re},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:rt},iterations:{number:Re},updateInterval:{number:Re},onlyDynamicEdges:{boolean:rt},fit:{boolean:rt},__type__:{object:Ot,boolean:rt}},timestep:{number:Re},adaptiveTimestep:{boolean:rt},wind:{x:{number:Re},y:{number:Re},__type__:{object:Ot}},__type__:{object:Ot,boolean:rt}},autoResize:{boolean:rt},clickToUse:{boolean:rt},locale:{string:lt},locales:{__any__:{any:H0t},__type__:{object:Ot}},height:{string:lt},width:{string:lt},__type__:{object:Ot}},Uee={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},W0t=function(r,t,n){var i;return!!(pl(r).call(r,"physics")&&pl(i=Uee.physics.solver).call(i,t)&&n.physics.solver!==t&&t!=="wind")},q0t=function(){function e(){ft(this,e)}return ht(e,[{key:"getDistances",value:function(t,n,i){for(var s={},o=t.edges,a=0;a<n.length;a++){var l=n[a],u={};s[l]=u;for(var f=0;f<n.length;f++)u[n[f]]=a==f?0:1e9}for(var c=0;c<i.length;c++){var d=o[i[c]];d.connected===!0&&s[d.fromId]!==void 0&&s[d.toId]!==void 0&&(s[d.fromId][d.toId]=1,s[d.toId][d.fromId]=1)}for(var y=n.length,w=0;w<y;w++)for(var b=n[w],T=s[b],_=0;_<y-1;_++)for(var A=n[_],x=s[A],I=_+1;I<y;I++){var O=n[I],C=s[O],g=Math.min(x[O],x[b]+T[O]);x[O]=g,C[A]=g}return s}}]),e}(),K0t=function(){function e(r,t,n){ft(this,e),this.body=r,this.springLength=t,this.springConstant=n,this.distanceSolver=new q0t}return ht(e,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.distanceSolver.getDistances(this.body,t,n);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();for(var o=.01,a=1,l=0,u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),f=5,c=1e9,d=0,y=0,w=0,b=0,T=0;c>o&&l<u;){l+=1;var _=this._getHighestEnergyNode(i),A=bn(_,4);for(d=A[0],c=A[1],y=A[2],w=A[3],b=c,T=0;b>a&&T<f;){T+=1,this._moveNode(d,y,w);var x=this._getEnergy(d),I=bn(x,3);b=I[0],y=I[1],w=I[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=0,o=n[0],a=0,l=0,u=0;u<n.length;u++){var f=n[u];if(i[f].predefinedPosition!==!0||i[f].isCluster===!0&&t===!0||i[f].options.fixed.x!==!0||i[f].options.fixed.y!==!0){var c=this._getEnergy(f),d=bn(c,3),y=d[0],w=d[1],b=d[2];s<y&&(s=y,o=f,a=w,l=b)}}return[o,s,a,l]}},{key:"_getEnergy",value:function(t){var n=bn(this.E_sums[t],2),i=n[0],s=n[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));return[o,i,s]}},{key:"_moveNode",value:function(t,n,i){for(var s=this.body.nodeIndices,o=this.body.nodes,a=0,l=0,u=0,f=o[t].x,c=o[t].y,d=this.K_matrix[t],y=this.L_matrix[t],w=0;w<s.length;w++){var b=s[w];if(b!==t){var T=o[b].x,_=o[b].y,A=d[b],x=y[b],I=1/Math.pow(Math.pow(f-T,2)+Math.pow(c-_,2),1.5);a+=A*(1-x*Math.pow(c-_,2)*I),l+=A*(x*(f-T)*(c-_)*I),u+=A*(1-x*Math.pow(f-T,2)*I)}}var O=a,C=l,g=n,M=u,B=i,z=(g/O+B/C)/(C/O-M/C),V=-(C*z+g)/O;o[t].x+=V,o[t].y+=z,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var s=0;s<n.length;s++){this.L_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.L_matrix[n[s]][n[o]]=i*t[n[s]][n[o]]}}},{key:"_createK_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var s=0;s<n.length;s++){this.K_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.K_matrix[n[s]][n[o]]=i*Math.pow(t[n[s]][n[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var s=0;s<t.length;s++){for(var o=t[s],a=n[o].x,l=n[o].y,u=0,f=0,c=s;c<t.length;c++){var d=t[c];if(d!==o){var y=n[d].x,w=n[d].y,b=1/Math.sqrt(Math.pow(a-y,2)+Math.pow(l-w,2));this.E_matrix[o][c]=[this.K_matrix[o][d]*(a-y-this.L_matrix[o][d]*(a-y)*b),this.K_matrix[o][d]*(l-w-this.L_matrix[o][d]*(l-w)*b)],this.E_matrix[d][s]=this.E_matrix[o][c],u+=this.E_matrix[o][c][0],f+=this.E_matrix[o][c][1]}}this.E_sums[o]=[u,f]}}},{key:"_updateE_matrix",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=this.E_matrix[t],o=this.K_matrix[t],a=this.L_matrix[t],l=i[t].x,u=i[t].y,f=0,c=0,d=0;d<n.length;d++){var y=n[d];if(y!==t){var w=s[d],b=w[0],T=w[1],_=i[y].x,A=i[y].y,x=1/Math.sqrt(Math.pow(l-_,2)+Math.pow(u-A,2)),I=o[y]*(l-_-a[y]*(l-_)*x),O=o[y]*(u-A-a[y]*(u-A)*x);s[d]=[I,O],f+=I,c+=O;var C=this.E_sums[y];C[0]+=I-b,C[1]+=O-T}}this.E_sums[t]=[f,c]}}]),e}();function kt(e,r,t){var n,i,s,o,a=this;if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:yht,clickToUse:!1},Wn(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:nt(n=this.on).call(n,this),off:nt(i=this.off).call(i,this),emit:nt(s=this.emit).call(s,this),once:nt(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new wht(function(){return a.body.emitter.emit("_requestRedraw")}),this.groups=new Mdt,this.canvas=new kmt(this.body),this.selectionHandler=new gbt(this.body,this.canvas),this.interactionHandler=new Pmt(this.body,this.canvas,this.selectionHandler),this.view=new Imt(this.body,this.canvas),this.renderer=new $mt(this.body,this.canvas),this.physics=new fmt(this.body),this.layoutEngine=new L0t(this.body),this.clustering=new bmt(this.body),this.manipulation=new z0t(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Kgt(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new tmt(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new K0t(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(r)}VX(kt.prototype);kt.prototype.setOptions=function(e){var r=this;if(e===null&&(e=void 0),e!==void 0){var t=Gft.validate(e,U0t);t===!0&&console.error("%cErrors have been found in the supplied options object.",JQ);var n=["locale","locales","clickToUse"];if(Qv(n,this.options,e),e.locale!==void 0&&(e.locale=mht(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),e.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new Kft(this,this.body.container,Uee,this.canvas.pixelRatio,W0t)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Xr(i.nodes,this.nodesHandler.options),Xr(i.edges,this.edgesHandler.options),Xr(i.layout,this.layoutEngine.options),Xr(i.interaction,this.selectionHandler.options),Xr(i.interaction,this.renderer.options),Xr(i.interaction,this.interactionHandler.options),Xr(i.manipulation,this.manipulation.options),Xr(i.physics,this.physics.options),Xr(i.global,this.canvas.options),Xr(i.global,this.options),this.configurator.setModuleOptions(i)}e.clickToUse!==void 0?e.clickToUse===!0?this.activator===void 0&&(this.activator=new qft(this.canvas.frame),this.activator.on("change",function(){r.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};kt.prototype._updateVisibleIndices=function(){var e=this.body.nodes,r=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&!this.clustering._isClusteredNode(t)&&e[t].options.hidden===!1&&this.body.nodeIndices.push(e[t].id);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n],s=e[i.fromId],o=e[i.toId],a=s!==void 0&&o!==void 0,l=!this.clustering._isClusteredEdge(n)&&i.options.hidden===!1&&a&&s.options.hidden===!1&&o.options.hidden===!1;l&&this.body.edgeIndices.push(i.id)}};kt.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})};kt.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var r=iht(e.dot);this.setData(r);return}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var t=sht(e.gephi);this.setData(t);return}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};kt.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];yc(this.body.container)};kt.prototype._updateValueRange=function(e){var r,t=void 0,n=void 0,i=0;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r].getValue();s!==void 0&&(t=t===void 0?s:Math.min(s,t),n=n===void 0?s:Math.max(s,n),i+=s)}if(t!==void 0&&n!==void 0)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].setValueRange(t,n,i)};kt.prototype.isActive=function(){return!this.activator||this.activator.active};kt.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};kt.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};kt.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};kt.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};kt.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};kt.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};kt.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};kt.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};kt.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};kt.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};kt.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};kt.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};kt.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};kt.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};kt.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};kt.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};kt.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};kt.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};kt.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};kt.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};kt.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};kt.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};kt.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};kt.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};kt.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};kt.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};kt.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};kt.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};kt.prototype.getConnectedNodes=function(e){return this.body.nodes[e]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};kt.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};kt.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};kt.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};kt.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};kt.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};kt.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};kt.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};kt.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};kt.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};kt.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};kt.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};kt.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};kt.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};kt.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};kt.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};kt.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};kt.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};function Wee(){const e=ro(!1);return St(()=>(e.current=!0,()=>{e.current=!1}),[]),xh(()=>e.current,[])}const V0t={layout:{improvedLayout:!0},physics:{solver:"barnesHut",barnesHut:{springLength:200}},autoResize:!1,nodes:{borderWidth:1,size:30,color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"},shadow:!0},edges:{smooth:!1,color:"lightgray",width:1,shadow:!0,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function yp(e,r,t,n){e.length!=0&&e.forEach(function(i){var a,l;let s=r.get(i.id);if(!t){s||r.add(i);return}if(n!=null&&n.has(i.id)){s||r.add(i);return}let o=Wi.getDefaultProfile(i.id);if((a=o==null?void 0:o.name)!=null&&a.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}if((l=o==null?void 0:o.display_name)!=null&&l.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}s&&r.remove(i.id)})}const G0t=({props:e})=>{const r=ro(null),t=ro(),n=Wee(),[i,s]=Le(null),[o]=Le(new xa),[a]=Le(new xa),[l]=Le(new xa),[u]=Le([]),[f,c]=Le(e.dir||"in"),[d,y]=Le(e.entitytype);St(()=>{if(r.current){var T={nodes:a,edges:l};return t.current=r.current&&new kt(r.current,T,V0t),t.current.on("click",function(_){if(_.nodes.length==0||!n())return;const A=_.nodes[0];e.setNpub(Gp(A)),w(A).then(x=>{let I=new Set([vt(e.hexKey),A]);x&&yp(x,a,e.filter,I)})}),()=>{var _,A;(_=t.current)==null||_.off("click"),(A=t.current)==null||A.destroy()}}},[r]),St(()=>{let T=vt(e.hexKey);if(T)return s(T),(e.dir!=f||e.entitytype!=d)&&(l.clear(),o.clear(),a.clear(),c(e.dir),y(e.entitytype)),w(T).then(_=>{if(!n())return;let A=new Set([vt(e.hexKey)]);_&&yp(_,a,e.filter,A)}),()=>{u.forEach(_=>_==null?void 0:_())}},[e.npub,e.dir,e.entitytype]),St(()=>{if(o.length==0&&a.length==0)return;let T=new Set([vt(e.hexKey)]);yp(o,a,e.filter,T)},[e.filter]);async function w(T){let _=rr.g.vertices[T];if(!_)return;let A={};if(A[T]=_,e.dir=="in")for(const M in _.in){const B=_.in[M];if(!B||!B.out||B.val==0)continue;A[B.out.id]=B.out;let z=Jy(B.val),V=B.out.degree>pa;l.get(B.key)||l.add({id:B.key,from:B.out.id,to:T,color:z,dashes:V})}let x=qee(e.entitytype);if(e.dir=="out")for(const M in _.out){const B=_.out[M];if(!B||B.val==0||!B.in||B.in.entityType!=x)continue;A[B.in.id]=B.in;let z=Jy(B.val);l.get(B.key)||l.add({id:B.key,from:T,to:B.in.id,color:z})}let I=Object.values(A),O=I.map(M=>ts(M.id)),C=await Wi.getProfiles(O,M=>{n()});u.push(C);let g=new xa;for(const M of I){if(o.get(M.id))continue;const B=tt.profiles.get(M.id);let z=Wi.ensurePicture(B),V={id:M.id,label:B.name+" (D:"+M.degree+")",image:z,shape:"circularImage"};o.add(V),g.add(V)}return g}const b=T=>{let _=T||i;if(!_)return;a.clear(),o.clear(),l.clear(),w(_).then(x=>{if(!n())return;let I=new Set([vt(e.hexKey)]);x&&yp(x,a,e.filter,I)});const A=Gp(_);A!=e.npub&&e.setNpub(A)};return e.npub?v(ut,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(oG,{dir:e.dir,setSearch:e.setSearch}),v("div",{className:"flex gap-4",children:""}),v("div",{className:"flex gap-4",children:v("button",{className:"btn btn-primary btn-sm",onClick:()=>{var T;return b((T=t.current)==null?void 0:T.getSelectedNodes()[0])},children:he("Focus")})}),v("div",{className:"flex gap-4",children:v(Qt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"path"}),children:he("Path")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null},Y0t={layout:{randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!0,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"roots"}},physics:{stabilization:!1},autoResize:!1,nodes:{borderWidth:1,size:30,color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"}},edges:{smooth:!1,color:"lightgray",width:1,arrows:{to:{enabled:!0,scaleFactor:.5}}}},Z0t=({props:e})=>{const r=ro(null),t=ro(),n=Wee(),[i,s]=Le(null),[o]=Le(new xa),[a]=Le(new xa),[l]=Le(new xa),[u]=Le([]);St(()=>{if(r.current){var y={nodes:a,edges:l};return t.current=r.current&&new kt(r.current,y,Y0t),t.current.on("click",function(w){if(w.nodes.length==0)return;const b=w.nodes[0];e.setNpub(Gp(b))}),()=>{var w,b;(w=t.current)==null||w.off("click"),(b=t.current)==null||b.destroy()}}},[]),St(()=>{let y=vt(e.hexKey),w=rr.g.vertices[y],b=w==null?void 0:w.score,T=rr.g.getPaths(y),_=Object.create(null);for(let I of T)I!=null&&I.in&&(_[I.in.id]=I.in),I!=null&&I.out&&(_[I.out.id]=I.out);let A=Object.values(_),x=A.map(I=>ts(I.id));return Wi.getProfiles(x,I=>{var O;n()&&(f(A,T),(O=t.current)==null||O.redraw())}).then(I=>{n()?u.push(I):I()}),s(I=>({...I,vId:y,score:b})),()=>{u.forEach(I=>I==null?void 0:I())}},[e.npub]);function f(y,w){var T,_;for(let A of y){let x=tt.profiles.get(A.id),I=Wi.ensurePicture(x),O=o.get(A.id);if(O){O.label!=x.name+` (ID: ${A.id})`&&(O.label=x.name+` (ID: ${A.id})`),O.image!=I&&(O.image=I);continue}o.add({id:A.id,label:x.name+` (ID: ${A.id})`,image:I,shape:"circularImage"})}for(let A of w){let x=Jy(A.val);l.get(A.key)||l.add({id:A.key,from:(T=A.out)==null?void 0:T.id,to:(_=A.in)==null?void 0:_.id,color:x})}let b=new Set([vt(e.hexKey)]);yp(o,a,e.filter,b)}St(()=>{var w;if(o.length==0&&a.length==0)return;let y=new Set([vt(e.hexKey),vt(de.getPubKey())]);yp(o,a,e.filter,y),(w=t.current)==null||w.redraw()},[e.filter]);const c=y=>{let w=y==null?void 0:y.values();return w?w.join("/"):null},d=y=>{if(!y||!(y==null?void 0:y.resolve()))return null;let{val:b,degree:T,count:_,hasScore:A}=y.resolve(),x=Math.round((b+_)*100/(_*2));return v(ut,{children:A?v(ut,{children:[v("span",{children:["Trust score is ",b]}),v("span",{children:[" from ",_==1?`${_} claim`:`a total of ${_} claims`]}),v("span",{children:[" at degree ",T]}),v("span",{children:[" resulting in ",x,"% trust"]})]}):v("span",{children:"No Score"})})};return e.npub?v(ut,{children:[v("div",{className:"flex flex-col gap-4",children:[v("div",{children:["Aggregated result of score is ",c(i==null?void 0:i.score)]}),v("div",{children:d(i==null?void 0:i.score)})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:v(Qt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"graph"}),children:he("Focus")})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null};function X0t(e,r){let t=e==null?void 0:e.toLocaleLowerCase();return t=="trust"?1:t=="distrust"?-1:r}function qee(e,r=1){let t=e==null?void 0:e.toLocaleLowerCase();return t=="key"?1:t=="item"?2:r}const J0t=e=>{const[r,t]=Le({ready:!1}),[n,i]=Le(e.npub||de.toNostrBech32Address(de.getPubKey(),"npub")),[s,o]=Le(e.entitytype||"key"),[a,l]=Le(e.trusttype||"trust"),[u,f]=Le(e.dir||"out"),[c,d]=Le(e.view||"graph"),[y,w]=Le(e.filter||""),[b,T]=Le(null),[_]=Le([]),A=de.toNostrHexAddress(n),x=A==de.getPubKey(),I=wn.debounce(B=>w(B),500,{trailing:!0});St(()=>(rr.whenReady(()=>{T(rr.g.vertices[vt(n)]),t(B=>({...B,ready:!0}))}),()=>{_.forEach(B=>B==null?void 0:B())}),[]);const O=xh(B=>{T(rr.g.vertices[vt(B)]),i(B)},[]);St(()=>{e.npub!=n&&O(e.npub||de.toNostrBech32Address(de.getPubKey(),"npub")),e.entitytype!=s&&o(e.entitytype||"key"),e.trusttype!=a&&l(e.trusttype||"trust"),e.dir!=u&&f(e.dir||"out"),e.view!=c&&d(e.view||"graph"),e.filter!=y&&w(e.filter||"")},[e.npub,e.entitytype,e.trusttype,e.dir,e.view,e.filter]);function C(B){const z={npub:n,entitytype:s,trusttype:a,dir:u,view:c,filter:y,...B};return`/graph/${z.npub}/${z.entitytype}/${z.dir}/${z.trusttype}/${z.view}${z.filter?"/"+z.filter:""}`}const g=xh(B=>{},[]),M=()=>{let B={npub:n,hexKey:A,entitytype:s,trusttype:a,dir:u,view:c,filter:y,setNpub:O,route:g,setSearch:C};return c=="path"?v(Z0t,{props:B}):c=="list"?v(zAe,{props:B}):v(G0t,{props:B})};return r.ready?v(ut,{children:[v(ku,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${n}`,children:v(Er,{pub:n})}),v("span",{style:{flex:1},className:"ml-1",children:c})]})}),aG(b==null?void 0:b.score,n,!0),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-8",children:[v(DAe,{view:c,setSearch:C,me:x}),v("form",{children:v("label",{children:v("input",{type:"text",placeholder:he("Filter"),tabIndex:1,onInput:B=>{var z;return I((z=B==null?void 0:B.target)==null?void 0:z.value)},className:"input-bordered border-neutral-500 input input-sm w-full"})})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),M()]}):null};Ch.init({autologin:!1,autofollow:!1});class Q0t extends $n{componentDidMount(){window.onload=()=>{Ne.get("loggedIn").on(this.inject())},Ne.get("unseenMsgsTotal").on(this.inject()),RK.then(()=>this.setState({translationLoaded:!0})),Ne.get("showLoginModal").on(this.inject())}handleRoute(r){const t=r.url;this.setState({activeRoute:t}),Ne.get("activeRoute").put(t)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}electronCmd(r){console.log(r)}render(){let r="";const t=this.state;t.activeRoute&&t.activeRoute.length>1&&(r=hr.capitalize(t.activeRoute.replace("/","").split("?")[0]));const n=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) %s | Dpeep`:"%s | Dpeep",i=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) Dpeep`:"Dpeep";if(!t.translationLoaded)return v("div",{});if(!t.loggedIn&&window.location.pathname.length<=1)return v(fw,{fullScreen:!0});const s=o=>{var a;return(a=o.id)!=null&&a.startsWith("note")?v(N8,{id:o.id}):v(s1,{id:o.id,tab:"posts",path:o.path})};return v("div",{className:"flex justify-center",children:[v("section",{className:"flex w-full max-w-screen-xl justify-between relative",children:[v(dt,{when:t.loggedIn,children:v(lIe,{})}),v(Eh,{titleTemplate:n,defaultTitle:i,children:[v("title",{children:r}),v("meta",{name:"description",content:"Connecting People"}),v("meta",{property:"og:type",content:"website"}),v("meta",{property:"og:title",content:r}),v("meta",{property:"og:description",content:"Connecting People"}),v("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),v("meta",{name:"twitter:card",content:"summary_large_image"}),v("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),v("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),v("div",{className:"pb-16 md:pb-0 relative flex h-full flex-grow flex-col w-1/2",children:v(kH,{onChange:o=>this.handleRoute(o),children:[v(nS,{path:"/",index:"follows"}),v(LV,{path:"/search",focus:!0}),v(VIe,{path:"/key"}),v(nS,{path:"/global",index:"global"}),v(nS,{path:"/search/:keyword"}),v(fw,{path:"/login",fullScreen:!0}),v(nAe,{path:"/notifications"}),v(b8,{path:"/chat/hashtag/:hashtag?"}),v(b8,{path:"/chat/:id?"}),v(N8,{path:"/post/:id+"}),v(AAe,{path:"/torrent/:id+"}),v(hIe,{path:"/about"}),v(TAe,{path:"/settings/:page?"}),v(rAe,{path:"/logout"}),v($8,{path:"/explorer/:path?"}),v($8,{path:"/explorer/:path+"}),v(PIe,{path:"/profile/edit"}),v(IAe,{path:"/subscribe"}),v(s1,{path:"/profile/:id",tab:"posts"}),v(s1,{path:"/:id/replies",tab:"replies"}),v(s1,{path:"/:id/likes",tab:"likes"}),v(E8,{path:"/follows/:id"}),v(E8,{followers:!0,path:"/followers/:id"}),v(J0t,{path:"/graph/:npub?/:entitytype?/:dir?/:trusttype?/:view?/:filter?"}),v(RAe,{path:"/diagnostics/:id/:entitytype?/:dir?/:trust1?/:view?/:filter?"}),v(s,{path:"/:id"})]})}),t.loggedIn?v(OAe,{}):null,v(oIe,{}),v(iIe,{})]}),v(dt,{when:t.showLoginModal,children:v(Su,{centerVertically:!0,showContainer:!0,onClose:()=>Ne.get("showLoginModal").put(!1),children:v(fw,{})})})]})}}hr.showConsoleWarning();Rp(v(Q0t,{}),document.getElementById("app"));export{On as c,io as g,oge as r};
