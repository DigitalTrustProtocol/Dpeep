var eae=Object.defineProperty;var tae=(e,r,t)=>r in e?eae(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var oe=(e,r,t)=>(tae(e,typeof r!="symbol"?r+"":r,t),t),fE=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var Fn=(e,r,t)=>(fE(e,r,"read from private field"),t?t.call(e):r.get(e)),Zr=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},ko=(e,r,t,n)=>(fE(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var ei=(e,r,t)=>(fE(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var $m,at,CH,Df,OD,PH,RT,NH,wp={},RH=[],rae=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y_=Array.isArray;function tu(e,r){for(var t in r)e[t]=r[t];return e}function DH(e){var r=e.parentNode;r&&r.removeChild(e)}function Qe(e,r,t){var n,i,s,o={};for(s in r)s=="key"?n=r[s]:s=="ref"?i=r[s]:o[s]=r[s];if(arguments.length>2&&(o.children=arguments.length>3?$m.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return ay(e,o,n,i,null)}function ay(e,r,t,n,i){var s={type:e,props:r,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++CH};return i==null&&at.vnode!=null&&at.vnode(s),s}function _m(){return{current:null}}function lt(e){return e.children}function zn(e,r){this.props=e,this.context=r}function Dw(e,r){if(r==null)return e.__?Dw(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?Dw(e):null}function BH(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return BH(e)}}function DT(e){(!e.__d&&(e.__d=!0)&&Df.push(e)&&!Bw.__r++||OD!==at.debounceRendering)&&((OD=at.debounceRendering)||PH)(Bw)}function Bw(){var e,r,t,n,i,s,o,a,l;for(Df.sort(RT);e=Df.shift();)e.__d&&(r=Df.length,n=void 0,i=void 0,s=void 0,a=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],i=[],(s=tu({},o)).__v=o.__v+1,d3(l,o,s,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??Dw(o),o.__h,i),jH(n,o,i),o.__e!=a&&BH(o)),Df.length>r&&Df.sort(RT));Bw.__r=0}function MH(e,r,t,n,i,s,o,a,l,u,f){var c,p,y,w,b,T,_,A,x,I,O=0,C=n&&n.__k||RH,g=C.length,M=g,B=r.length;for(t.__k=[],c=0;c<B;c++)(w=t.__k[c]=(w=r[c])==null||typeof w=="boolean"||typeof w=="function"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?ay(null,w,null,null,w):y_(w)?ay(lt,{children:w},null,null,null):w.__b>0?ay(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null&&(w.__=t,w.__b=t.__b+1,(A=nae(w,C,_=c+O,M))===-1?y=wp:(y=C[A]||wp,C[A]=void 0,M--),d3(e,w,y,i,s,o,a,l,u,f),b=w.__e,(p=w.ref)&&y.ref!=p&&(y.ref&&p3(y.ref,null,w),f.push(p,w.__c||b,w)),b!=null&&(T==null&&(T=b),I=!(x=y===wp||y.__v===null)&&A===_,x?A==-1&&O--:A!==_&&(A===_+1?(O++,I=!0):A>_?M>B-_?(O+=A-_,I=!0):O--:O=A<_&&A==_-1?A-_:0),_=c+O,I=I||A==c&&!x,typeof w.type!="function"||A===_&&y.__k!==w.__k?typeof w.type=="function"||I?w.__d!==void 0?(l=w.__d,w.__d=void 0):l=b.nextSibling:l=FH(e,b,l):l=LH(w,l,e),typeof t.type=="function"&&(t.__d=l)));for(t.__e=T,c=g;c--;)C[c]!=null&&(typeof t.type=="function"&&C[c].__e!=null&&C[c].__e==t.__d&&(t.__d=C[c].__e.nextSibling),HH(C[c],C[c]))}function LH(e,r,t){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,r=typeof n.type=="function"?LH(n,r,t):FH(t,n.__e,r));return r}function ka(e,r){return r=r||[],e==null||typeof e=="boolean"||(y_(e)?e.some(function(t){ka(t,r)}):r.push(e)),r}function FH(e,r,t){return t==null||t.parentNode!==e?e.insertBefore(r,null):r==t&&r.parentNode!=null||e.insertBefore(r,t),r.nextSibling}function nae(e,r,t,n){var i=e.key,s=e.type,o=t-1,a=t+1,l=r[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<r.length;){if(o>=0){if((l=r[o])&&i==l.key&&s===l.type)return o;o--}if(a<r.length){if((l=r[a])&&i==l.key&&s===l.type)return a;a++}}return-1}function iae(e,r,t,n,i){var s;for(s in t)s==="children"||s==="key"||s in r||Mw(e,s,null,t[s],n);for(s in r)i&&typeof r[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===r[s]||Mw(e,s,r[s],t[s],n)}function CD(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||rae.test(r)?t:t+"px"}function Mw(e,r,t,n,i){var s;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(r in n)t&&r in t||CD(e.style,r,"");if(t)for(r in t)n&&t[r]===n[r]||CD(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")s=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+s]=t,t?n||e.addEventListener(r,s?ND:PD,s):e.removeEventListener(r,s?ND:PD,s);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function PD(e){return this.l[e.type+!1](at.event?at.event(e):e)}function ND(e){return this.l[e.type+!0](at.event?at.event(e):e)}function d3(e,r,t,n,i,s,o,a,l,u){var f,c,p,y,w,b,T,_,A,x,I,O,C,g,M,B=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=r.__e=t.__e,r.__h=null,s=[a]),(f=at.__b)&&f(r);try{e:if(typeof B=="function"){if(_=r.props,A=(f=B.contextType)&&n[f.__c],x=f?A?A.props.value:f.__:n,t.__c?T=(c=r.__c=t.__c).__=c.__E:("prototype"in B&&B.prototype.render?r.__c=c=new B(_,x):(r.__c=c=new zn(_,x),c.constructor=B,c.render=oae),A&&A.sub(c),c.props=_,c.state||(c.state={}),c.context=x,c.__n=n,p=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),B.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=tu({},c.__s)),tu(c.__s,B.getDerivedStateFromProps(_,c.__s))),y=c.props,w=c.state,c.__v=r,p)B.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(B.getDerivedStateFromProps==null&&_!==y&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(_,x),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(_,c.__s,x)===!1||r.__v===t.__v)){for(r.__v!==t.__v&&(c.props=_,c.state=c.__s,c.__d=!1),r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(L){L&&(L.__=r)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(_,c.__s,x),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(y,w,b)})}if(c.context=x,c.props=_,c.__P=e,c.__e=!1,O=at.__r,C=0,"prototype"in B&&B.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(r),f=c.render(c.props,c.state,c.context),g=0;g<c._sb.length;g++)c.__h.push(c._sb[g]);c._sb=[]}else do c.__d=!1,O&&O(r),f=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++C<25);c.state=c.__s,c.getChildContext!=null&&(n=tu(tu({},n),c.getChildContext())),p||c.getSnapshotBeforeUpdate==null||(b=c.getSnapshotBeforeUpdate(y,w)),MH(e,y_(M=f!=null&&f.type===lt&&f.key==null?f.props.children:f)?M:[M],r,t,n,i,s,o,a,l,u),c.base=r.__e,r.__h=null,c.__h.length&&o.push(c),T&&(c.__E=c.__=null)}else s==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=sae(t.__e,r,t,n,i,s,o,l,u);(f=at.diffed)&&f(r)}catch(L){r.__v=null,(l||s!=null)&&(r.__e=a,r.__h=!!l,s[s.indexOf(a)]=null),at.__e(L,r,t)}}function jH(e,r,t){for(var n=0;n<t.length;n++)p3(t[n],t[++n],t[++n]);at.__c&&at.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){at.__e(s,i.__v)}})}function sae(e,r,t,n,i,s,o,a,l){var u,f,c,p=t.props,y=r.props,w=r.type,b=0;if(w==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!w&&(w?u.localName===w:u.nodeType===3)){e=u,s[b]=null;break}}if(e==null){if(w===null)return document.createTextNode(y);e=i?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,y.is&&y),s=null,a=!1}if(w===null)p===y||a&&e.data===y||(e.data=y);else{if(s=s&&$m.call(e.childNodes),f=(p=t.props||wp).dangerouslySetInnerHTML,c=y.dangerouslySetInnerHTML,!a){if(s!=null)for(p={},b=0;b<e.attributes.length;b++)p[e.attributes[b].name]=e.attributes[b].value;(c||f)&&(c&&(f&&c.__html==f.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(iae(e,y,p,i,a),c)r.__k=[];else if(MH(e,y_(b=r.props.children)?b:[b],r,t,n,i&&w!=="foreignObject",s,o,s?s[0]:t.__k&&Dw(t,0),a,l),s!=null)for(b=s.length;b--;)s[b]!=null&&DH(s[b]);a||("value"in y&&(b=y.value)!==void 0&&(b!==e.value||w==="progress"&&!b||w==="option"&&b!==p.value)&&Mw(e,"value",b,p.value,!1),"checked"in y&&(b=y.checked)!==void 0&&b!==e.checked&&Mw(e,"checked",b,p.checked,!1))}return e}function p3(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(n){at.__e(n,t)}}function HH(e,r,t){var n,i;if(at.unmount&&at.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||p3(n,null,r)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){at.__e(s,r)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&HH(n[i],r,t||typeof e.type!="function");t||e.__e==null||DH(e.__e),e.__=e.__e=e.__d=void 0}function oae(e,r,t){return this.constructor(e,t)}function Bp(e,r,t){var n,i,s,o;at.__&&at.__(e,r),i=(n=typeof t=="function")?null:t&&t.__k||r.__k,s=[],o=[],d3(r,e=(!n&&t||r).__k=Qe(lt,null,[e]),i||wp,wp,r.ownerSVGElement!==void 0,!n&&t?[t]:i?null:r.firstChild?$m.call(r.childNodes):null,s,!n&&t?t:i?i.__e:r.firstChild,n,o),jH(s,e,o)}function zH(e,r){Bp(e,r,zH)}function UH(e,r,t){var n,i,s,o,a=tu({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),r)s=="key"?n=r[s]:s=="ref"?i=r[s]:a[s]=r[s]===void 0&&o!==void 0?o[s]:r[s];return arguments.length>2&&(a.children=arguments.length>3?$m.call(arguments,2):t),ay(e.type,a,n||e.key,i||e.ref,null)}function v3(e,r){var t={__c:r="__cC"+NH++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[r]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,DT(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}$m=RH.slice,at={__e:function(e,r,t,n){for(var i,s,o;r=r.__;)if((i=r.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},CH=0,zn.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=tu({},this.state),typeof e=="function"&&(e=e(tu({},t),this.props)),e&&tu(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),DT(this))},zn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),DT(this))},zn.prototype.render=lt,Df=[],PH=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,RT=function(e,r){return e.__v.__b-r.__v.__b},Bw.__r=0,NH=0;typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.16.0",at,{Fragment:lt,Component:zn});function RD(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function aae(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(i,s){if(i){if(typeof i=="string")return RD(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?RD(i,s):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DD={};function Vl(e){return e.type===lt?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var ly=[],Pd=[];function WH(){return ly.length>0?ly[ly.length-1]:null}var BD=!1;function hE(e){return typeof e.type=="function"&&e.type!=lt}function rs(e){for(var r=[e],t=e;t.__o!=null;)r.push(t.__o),t=t.__o;return r.reduce(function(n,i){n+="  in "+Vl(i);var s=i.__source;return s?n+=" (at "+s.fileName+":"+s.lineNumber+")":BD||(BD=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var lae=typeof WeakMap=="function";function qH(e){return e?typeof e.type=="function"?e.__===null?e.__e!==null&&e.__e.parentNode!==null?e.__e.parentNode.localName:"":qH(e.__):e.type:""}var uae=zn.prototype.setState;zn.prototype.setState=function(e,r){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+rs(WH())),uae.call(this,e,r)};var cae=zn.prototype.forceUpdate;function zl(e){var r=e.props,t=Vl(e),n="";for(var i in r)if(r.hasOwnProperty(i)&&i!=="children"){var s=r[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),n+=" "+i+"="+JSON.stringify(s)}var o=r.children;return"<"+t+n+(o&&o.length?">..</"+t+">":" />")}zn.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+rs(WH())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+rs(this.__v)),cae.call(this,e)},function(){(function(){var b=at.__b,T=at.diffed,_=at.__,A=at.vnode,x=at.__r;at.diffed=function(I){hE(I)&&Pd.pop(),ly.pop(),T&&T(I)},at.__b=function(I){hE(I)&&ly.push(I),b&&b(I)},at.__=function(I,O){Pd=[],_&&_(I,O)},at.vnode=function(I){I.__o=Pd.length>0?Pd[Pd.length-1]:null,A&&A(I)},at.__r=function(I){hE(I)&&Pd.push(I),x&&x(I)}})();var e=!1,r=at.__b,t=at.diffed,n=at.vnode,i=at.__r,s=at.__e,o=at.__,a=at.__h,l=at.__c,u=lae?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,f=[],c=[];at.__e=function(b,T,_,A){if(T&&T.__c&&typeof b.then=="function"){var x=b;b=new Error("Missing Suspense. The throwing component was: "+Vl(T));for(var I=T;I;I=I.__)if(I.__c&&I.__c.__c){b=x;break}if(b instanceof Error)throw b}try{(A=A||{}).componentStack=rs(T),s(b,T,_,A),typeof b.then!="function"&&setTimeout(function(){throw b})}catch(O){throw O}},at.__=function(b,T){if(!T)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var _;switch(T.nodeType){case 1:case 11:case 9:_=!0;break;default:_=!1}if(!_){var A=Vl(b);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+T+" instead: render(<"+A+" />, "+T+");")}o&&o(b,T)},at.__b=function(b){var T=b.type;if(typeof T!="string"||T!=="thead"&&T!=="tfoot"&&T!=="tbody"&&T!=="tr"&&T!=="td"&&T!=="th"||c.push(b),e=!0,T===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+zl(b)+`

`+rs(b));if(T!=null&&typeof T=="object")throw T.__k!==void 0&&T.__e!==void 0?new Error("Invalid type passed to createElement(): "+T+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+Vl(b)+" = "+zl(T)+`;
  let vnode = <My`+Vl(b)+` />;

This usually happens when you export a JSX literal and not the component.

`+rs(b)):new Error("Invalid type passed to createElement(): "+(Array.isArray(T)?"array":T));if(b.ref!==void 0&&typeof b.ref!="function"&&typeof b.ref!="object"&&!("$$typeof"in b))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof b.ref+`] instead
`+zl(b)+`

`+rs(b));if(typeof b.type=="string"){for(var _ in b.props)if(_[0]==="o"&&_[1]==="n"&&typeof b.props[_]!="function"&&b.props[_]!=null)throw new Error(`Component's "`+_+'" property should be a function, but got ['+typeof b.props[_]+`] instead
`+zl(b)+`

`+rs(b))}if(typeof b.type=="function"&&b.type.propTypes){if(b.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(b.type)){var A="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var x=b.type();u.lazyPropTypes.set(b.type,!0),console.warn(A+"Component wrapped in lazy() is "+Vl(x))}catch{console.warn(A+"We will log the wrapped component's name once it is loaded.")}}var I=b.props;b.type.__f&&delete(I=function(O,C){for(var g in C)O[g]=C[g];return O}({},I)).ref,function(O,C,g,M,B){Object.keys(O).forEach(function(L){var q;try{q=O[L](C,L,M,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Q){q=Q}q&&!(q.message in DD)&&(DD[q.message]=!0,console.error("Failed prop type: "+q.message+(B&&`
`+B()||"")))})}(b.type.propTypes,I,0,Vl(b),function(){return rs(b)})}r&&r(b)},at.__r=function(b){i&&i(b),e=!0},at.__h=function(b,T,_){if(!b||!e)throw new Error("Hook can only be invoked from render methods.");a&&a(b,T,_)};var p=function(b,T){return{get:function(){var _="get"+b+T;f&&f.indexOf(_)<0&&(f.push(_),console.warn("getting vnode."+b+" is deprecated, "+T))},set:function(){var _="set"+b+T;f&&f.indexOf(_)<0&&(f.push(_),console.warn("setting vnode."+b+" is not allowed, "+T))}}},y={nodeName:p("nodeName","use vnode.type"),attributes:p("attributes","use vnode.props"),children:p("children","use vnode.props.children")},w=Object.create({},y);at.vnode=function(b){var T=b.props;if(b.type!==null&&T!=null&&("__source"in T||"__self"in T)){var _=b.props={};for(var A in T){var x=T[A];A==="__source"?b.__source=x:A==="__self"?b.__self=x:_[A]=x}}b.__proto__=w,n&&n(b)},at.diffed=function(b){if(b.__k&&b.__k.forEach(function(q){if(typeof q=="object"&&q&&q.type===void 0){var Q=Object.keys(q).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+Q+`}.

`+rs(b))}}),e=!1,t&&t(b),b.__k!=null)for(var T=[],_=0;_<b.__k.length;_++){var A=b.__k[_];if(A&&A.key!=null){var x=A.key;if(T.indexOf(x)!==-1){console.error('Following component has two or more children with the same key attribute: "'+x+`". This may cause glitches and misbehavior in rendering process. Component: 

`+zl(b)+`

`+rs(b));break}T.push(x)}}if(b.__c!=null&&b.__c.__H!=null){var I=b.__c.__H.__;if(I)for(var O=0;O<I.length;O+=1){var C=I[O];if(C.__H){for(var g,M=aae(C.__H);!(g=M()).done;)if((L=g.value)!=L){var B=Vl(b);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+O+" in component "+B+" was called with NaN.")}}}}var L},at.__c=function(b,T){for(var _=0;_<c.length;_++){var A=c[_],x=A.type,I=qH(A.__);x!=="thead"&&x!=="tfoot"&&x!=="tbody"||I==="table"?x==="tr"&&I!=="thead"&&I!=="tfoot"&&I!=="tbody"&&I!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+zl(A)+`

`+rs(A)):x==="td"&&I!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+zl(A)+`

`+rs(A)):x==="th"&&I!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+zl(A)+`

`+rs(A)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+zl(A)+`

`+rs(A))}c=[],l&&l(b,T)}}();var Cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function io(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vv(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var KH={exports:{}},fae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hae=fae,dae=hae;function VH(){}function GH(){}GH.resetWarningCache=VH;var pae=function(){function e(n,i,s,o,a,l){if(l!==dae){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:GH,resetWarningCache:VH};return t.PropTypes=t,t};KH.exports=pae();var vae=KH.exports;const nn=io(vae);var yu,qr,dE,MD,Mp=0,YH=[],G1=[],LD=at.__b,FD=at.__r,jD=at.diffed,HD=at.__c,zD=at.unmount;function zh(e,r){at.__h&&at.__h(qr,e,Mp||r),Mp=0;var t=qr.__H||(qr.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:G1}),t.__[e]}function He(e){return Mp=1,g3(QH,e)}function g3(e,r,t){var n=zh(yu++,2);if(n.t=e,!n.__c&&(n.__=[t?t(r):QH(void 0,r),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=qr,!qr.u)){var i=function(a,l,u){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(p){return p.__c});if(f.every(function(p){return!p.__N}))return!s||s.call(this,a,l,u);var c=!1;return f.forEach(function(p){if(p.__N){var y=p.__[0];p.__=p.__N,p.__N=void 0,y!==p.__[0]&&(c=!0)}}),!(!c&&n.__c.props===a)&&(!s||s.call(this,a,l,u))};qr.u=!0;var s=qr.shouldComponentUpdate,o=qr.componentWillUpdate;qr.componentWillUpdate=function(a,l,u){if(this.__e){var f=s;s=void 0,i(a,l,u),s=f}o&&o.call(this,a,l,u)},qr.shouldComponentUpdate=i}return n.__N||n.__}function kt(e,r){var t=zh(yu++,3);!at.__s&&y3(t.__H,r)&&(t.__=e,t.i=r,qr.__H.__h.push(t))}function xm(e,r){var t=zh(yu++,4);!at.__s&&y3(t.__H,r)&&(t.__=e,t.i=r,qr.__h.push(t))}function ro(e){return Mp=5,mu(function(){return{current:e}},[])}function ZH(e,r,t){Mp=6,xm(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function mu(e,r){var t=zh(yu++,7);return y3(t.__H,r)?(t.__V=e(),t.i=r,t.__h=e,t.__V):t.__}function Eh(e,r){return Mp=8,mu(function(){return e},r)}function m_(e){var r=qr.context[e.__c],t=zh(yu++,9);return t.c=e,r?(t.__==null&&(t.__=!0,r.sub(qr)),r.props.value):e.__}function XH(e,r){at.useDebugValue&&at.useDebugValue(r?r(e):e)}function gae(e){var r=zh(yu++,10),t=He();return r.__=e,qr.componentDidCatch||(qr.componentDidCatch=function(n,i){r.__&&r.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function JH(){var e=zh(yu++,11);if(!e.__){for(var r=qr.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var t=r.__m||(r.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function yae(){for(var e;e=YH.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Y1),e.__H.__h.forEach(BT),e.__H.__h=[]}catch(r){e.__H.__h=[],at.__e(r,e.__v)}}at.__b=function(e){qr=null,LD&&LD(e)},at.__r=function(e){FD&&FD(e),yu=0;var r=(qr=e.__c).__H;r&&(dE===qr?(r.__h=[],qr.__h=[],r.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=G1,t.__N=t.i=void 0})):(r.__h.forEach(Y1),r.__h.forEach(BT),r.__h=[],yu=0)),dE=qr},at.diffed=function(e){jD&&jD(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(YH.push(r)!==1&&MD===at.requestAnimationFrame||((MD=at.requestAnimationFrame)||mae)(yae)),r.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==G1&&(t.__=t.__V),t.i=void 0,t.__V=G1})),dE=qr=null},at.__c=function(e,r){r.some(function(t){try{t.__h.forEach(Y1),t.__h=t.__h.filter(function(n){return!n.__||BT(n)})}catch(n){r.some(function(i){i.__h&&(i.__h=[])}),r=[],at.__e(n,t.__v)}}),HD&&HD(e,r)},at.unmount=function(e){zD&&zD(e);var r,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{Y1(n)}catch(i){r=i}}),t.__H=void 0,r&&at.__e(r,t.__v))};var UD=typeof requestAnimationFrame=="function";function mae(e){var r,t=function(){clearTimeout(n),UD&&cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100);UD&&(r=requestAnimationFrame(t))}function Y1(e){var r=qr,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),qr=r}function BT(e){var r=qr;e.__c=e.__(),qr=r}function y3(e,r){return!e||e.length!==r.length||r.some(function(t,n){return t!==e[n]})}function QH(e,r){return typeof r=="function"?r(e):r}function ez(e,r){for(var t in r)e[t]=r[t];return e}function MT(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var n in r)if(n!=="__source"&&e[n]!==r[n])return!0;return!1}function pE(e,r){return e===r&&(e!==0||1/e==1/r)||e!=e&&r!=r}function Oy(e){this.props=e}function Ni(e,r){function t(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),r?!r(this.props,i)||!o:MT(this.props,i)}function n(i){return this.shouldComponentUpdate=t,Qe(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Oy.prototype=new zn).isPureReactComponent=!0,Oy.prototype.shouldComponentUpdate=function(e,r){return MT(this.props,e)||MT(this.state,r)};var WD=at.__b;at.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),WD&&WD(e)};var bae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ur(e){function r(t){var n=ez({},t);return delete n.ref,e(n,t.ref||null)}return r.$$typeof=bae,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var qD=function(e,r){return e==null?null:ka(ka(e).map(r))},tz={map:qD,forEach:qD,count:function(e){return e?ka(e).length:0},only:function(e){var r=ka(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:ka},wae=at.__e;at.__e=function(e,r,t,n){if(e.then){for(var i,s=r;s=s.__;)if((i=s.__c)&&i.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),i.__c(e,r)}wae(e,r,t,n)};var KD=at.unmount;function rz(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=ez({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return rz(n,r,t)})),e}function nz(e,r,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return nz(n,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function uy(){this.__u=0,this.t=null,this.__b=null}function iz(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function sz(e){var r,t,n;function i(s){if(r||(r=e()).then(function(o){t=o.default||o},function(o){n=o}),n)throw n;if(!t)throw r;return Qe(t,s)}return i.displayName="Lazy",i.__f=!0,i}function rp(){this.u=null,this.o=null}at.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&e.__h===!0&&(e.type=null),KD&&KD(e)},(uy.prototype=new zn).__c=function(e,r){var t=r.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=iz(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=nz(u,u.__c.__P,u.__c.__O)}var f;for(n.setState({__a:n.__b=null});f=n.t.pop();)f.forceUpdate()}},l=r.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},uy.prototype.componentWillUnmount=function(){this.t=[]},uy.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=rz(this.__b,t,n.__O=n.__P)}this.__b=null}var i=r.__a&&Qe(lt,null,e.fallback);return i&&(i.__h=null),[Qe(lt,null,r.__a?null:e.children),i]};var VD=function(e,r,t){if(++t[1]===t[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function $ae(e){return this.getChildContext=function(){return e.context},e.children}function _ae(e){var r=this,t=e.i;r.componentWillUnmount=function(){Bp(null,r.l),r.l=null,r.i=null},r.i&&r.i!==t&&r.componentWillUnmount(),e.__v?(r.l||(r.i=t,r.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),r.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),r.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),r.i.removeChild(n)}}),Bp(Qe($ae,{context:r.context},e.__v),r.l)):r.l&&r.componentWillUnmount()}function oz(e,r){var t=Qe(_ae,{__v:e,i:r});return t.containerInfo=r,t}(rp.prototype=new zn).__a=function(e){var r=this,t=iz(r.__v),n=r.o.get(e);return n[0]++,function(i){var s=function(){r.props.revealOrder?(n.push(i),VD(r,e,n)):i()};t?t(s):s()}},rp.prototype.render=function(e){this.u=null,this.o=new Map;var r=ka(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.o.set(r[t],this.u=[1,0,this.u]);return e.children},rp.prototype.componentDidUpdate=rp.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,t){VD(e,t,r)})};var az=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,xae=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Eae=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Sae=/[A-Z0-9]/g,kae=typeof document<"u",Tae=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function lz(e,r,t){return r.__k==null&&(r.textContent=""),Bp(e,r),typeof t=="function"&&t(),e?e.__c:null}function uz(e,r,t){return zH(e,r),typeof t=="function"&&t(),e?e.__c:null}zn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(zn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var GD=at.event;function Iae(){}function Aae(){return this.cancelBubble}function Oae(){return this.defaultPrevented}at.event=function(e){return GD&&(e=GD(e)),e.persist=Iae,e.isPropagationStopped=Aae,e.isDefaultPrevented=Oae,e.nativeEvent=e};var m3,Cae={enumerable:!1,configurable:!0,get:function(){return this.class}},YD=at.vnode;at.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,n=r.type,i={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||kae&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||Tae(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":Eae.test(s)?s=a:n.indexOf("-")===-1&&xae.test(s)?s=s.replace(Sae,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ka(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=ka(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",Cae)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),r.props=i}(e),e.$$typeof=az,YD&&YD(e)};var ZD=at.__r;at.__r=function(e){ZD&&ZD(e),m3=e.__c};var XD=at.diffed;at.diffed=function(e){XD&&XD(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value),m3=null};var cz={ReactCurrentDispatcher:{current:{readContext:function(e){return m3.__n[e.__c].props.value}}}},Pae="17.0.2";function fz(e){return Qe.bind(null,e)}function b3(e){return!!e&&e.$$typeof===az}function hz(e){return b3(e)?UH.apply(null,arguments):e}function dz(e){return!!e.__k&&(Bp(null,e),!0)}function pz(e){return e&&(e.base||e.nodeType===1&&e)||null}var vz=function(e,r){return e(r)},gz=function(e,r){return e(r)},yz=lt;function w3(e){e()}function mz(e){return e}function bz(){return[!1,w3]}var wz=xm;function $z(e,r){var t=r(),n=He({h:{__:t,v:r}}),i=n[0].h,s=n[1];return xm(function(){i.__=t,i.v=r,pE(i.__,r())||s({h:i})},[e,t,r]),kt(function(){return pE(i.__,i.v())||s({h:i}),e(function(){pE(i.__,i.v())||s({h:i})})},[e]),t}var Ta={useState:He,useId:JH,useReducer:g3,useEffect:kt,useLayoutEffect:xm,useInsertionEffect:wz,useTransition:bz,useDeferredValue:mz,useSyncExternalStore:$z,startTransition:w3,useRef:ro,useImperativeHandle:ZH,useMemo:mu,useCallback:Eh,useContext:m_,useDebugValue:XH,version:"17.0.2",Children:tz,render:lz,hydrate:uz,unmountComponentAtNode:dz,createPortal:oz,createElement:Qe,createContext:v3,createFactory:fz,cloneElement:hz,createRef:_m,Fragment:lt,isValidElement:b3,findDOMNode:pz,Component:zn,PureComponent:Oy,memo:Ni,forwardRef:Ur,flushSync:gz,unstable_batchedUpdates:vz,StrictMode:yz,Suspense:uy,SuspenseList:rp,lazy:sz,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:cz};const Nae=Object.freeze(Object.defineProperty({__proto__:null,Children:tz,Component:zn,Fragment:lt,PureComponent:Oy,StrictMode:yz,Suspense:uy,SuspenseList:rp,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:cz,cloneElement:hz,createContext:v3,createElement:Qe,createFactory:fz,createPortal:oz,createRef:_m,default:Ta,findDOMNode:pz,flushSync:gz,forwardRef:Ur,hydrate:uz,isValidElement:b3,lazy:sz,memo:Ni,render:lz,startTransition:w3,unmountComponentAtNode:dz,unstable_batchedUpdates:vz,useCallback:Eh,useContext:m_,useDebugValue:XH,useDeferredValue:mz,useEffect:kt,useErrorBoundary:gae,useId:JH,useImperativeHandle:ZH,useInsertionEffect:wz,useLayoutEffect:xm,useMemo:mu,useReducer:g3,useRef:ro,useState:He,useSyncExternalStore:$z,useTransition:bz,version:Pae},Symbol.toStringTag,{value:"Module"})),Rae=vv(Nae);function Dae(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var _z=Rae,Bae=Dae(_z);function JD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Mae(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var Lae=!!(typeof window<"u"&&window.document&&window.document.createElement);function Fae(e,r,t){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof r!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=e(o.map(function(f){return f.props})),u.canUseDOM?r(a):t&&(a=t(a))}var u=function(f){Mae(c,f);function c(){return f.apply(this,arguments)||this}c.peek=function(){return a},c.rewind=function(){if(c.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var w=a;return a=void 0,o=[],w};var p=c.prototype;return p.UNSAFE_componentWillMount=function(){o.push(this),l()},p.componentDidUpdate=function(){l()},p.componentWillUnmount=function(){var w=o.indexOf(this);o.splice(w,1),l()},p.render=function(){return Bae.createElement(s,this.props)},c}(_z.PureComponent);return JD(u,"displayName","SideEffect("+n(s)+")"),JD(u,"canUseDOM",Lae),u}}var jae=Fae;const Hae=io(jae);var zae=typeof Element<"u",Uae=typeof Map=="function",Wae=typeof Set=="function",qae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Z1(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,n,i;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(!Z1(e[n],r[n]))return!1;return!0}var s;if(Uae&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!Z1(n.value[1],r.get(n.value[0])))return!1;return!0}if(Wae&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(qae&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof r.valueOf=="function")return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof r.toString=="function")return e.toString()===r.toString();if(i=Object.keys(e),t=i.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;if(zae&&e instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!Z1(e[i[n]],r[i[n]]))return!1;return!0}return e!==e&&r!==r}var Kae=function(r,t){try{return Z1(r,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Vae=io(Kae);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var QD=Object.getOwnPropertySymbols,Gae=Object.prototype.hasOwnProperty,Yae=Object.prototype.propertyIsEnumerable;function Zae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Xae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Jae=Xae()?Object.assign:function(e,r){for(var t,n=Zae(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)Gae.call(t,o)&&(n[o]=t[o]);if(QD){i=QD(t);for(var a=0;a<i.length;a++)Yae.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};const Qae=io(Jae);var ih={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Xt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Xt).map(function(e){return Xt[e]});var sn={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Lw={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Cy={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},ele=Object.keys(Lw).reduce(function(e,r){return e[Lw[r]]=r,e},{}),tle=[Xt.NOSCRIPT,Xt.SCRIPT,Xt.STYLE],_a="data-react-helmet",rle=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nle=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},ile=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),xs=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},sle=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},eB=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ole=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e},LT=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},ale=function(r){var t=$p(r,Xt.TITLE),n=$p(r,Cy.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=$p(r,Cy.DEFAULT_TITLE);return t||i||void 0},lle=function(r){return $p(r,Cy.ON_CHANGE_CLIENT_STATE)||function(){}},vE=function(r,t){return t.filter(function(n){return typeof n[r]<"u"}).map(function(n){return n[r]}).reduce(function(n,i){return xs({},n,i)},{})},ule=function(r,t){return t.filter(function(n){return typeof n[Xt.BASE]<"u"}).map(function(n){return n[Xt.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(r.indexOf(l)!==-1&&i[l])return n.concat(i)}return n},[])},Ng=function(r,t,n){var i={};return n.filter(function(s){return Array.isArray(s[r])?!0:(typeof s[r]<"u"&&dle("Helmet: "+r+' should be of type "Array". Instead found type "'+rle(s[r])+'"'),!1)}).map(function(s){return s[r]}).reverse().reduce(function(s,o){var a={};o.filter(function(p){for(var y=void 0,w=Object.keys(p),b=0;b<w.length;b++){var T=w[b],_=T.toLowerCase();t.indexOf(_)!==-1&&!(y===sn.REL&&p[y].toLowerCase()==="canonical")&&!(_===sn.REL&&p[_].toLowerCase()==="stylesheet")&&(y=_),t.indexOf(T)!==-1&&(T===sn.INNER_HTML||T===sn.CSS_TEXT||T===sn.ITEM_PROP)&&(y=T)}if(!y||!p[y])return!1;var A=p[y].toLowerCase();return i[y]||(i[y]={}),a[y]||(a[y]={}),i[y][A]?!1:(a[y][A]=!0,!0)}).reverse().forEach(function(p){return s.push(p)});for(var l=Object.keys(a),u=0;u<l.length;u++){var f=l[u],c=Qae({},i[f],a[f]);i[f]=c}return s},[]).reverse()},$p=function(r,t){for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.hasOwnProperty(t))return i[t]}return null},cle=function(r){return{baseTag:ule([sn.HREF,sn.TARGET],r),bodyAttributes:vE(ih.BODY,r),defer:$p(r,Cy.DEFER),encode:$p(r,Cy.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:vE(ih.HTML,r),linkTags:Ng(Xt.LINK,[sn.REL,sn.HREF],r),metaTags:Ng(Xt.META,[sn.NAME,sn.CHARSET,sn.HTTPEQUIV,sn.PROPERTY,sn.ITEM_PROP],r),noscriptTags:Ng(Xt.NOSCRIPT,[sn.INNER_HTML],r),onChangeClientState:lle(r),scriptTags:Ng(Xt.SCRIPT,[sn.SRC,sn.INNER_HTML],r),styleTags:Ng(Xt.STYLE,[sn.CSS_TEXT],r),title:ale(r),titleAttributes:vE(ih.TITLE,r)}},FT=function(){var e=Date.now();return function(r){var t=Date.now();t-e>16?(e=t,r(t)):setTimeout(function(){FT(r)},0)}}(),tB=function(r){return clearTimeout(r)},fle=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||FT:global.requestAnimationFrame||FT,hle=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||tB:global.cancelAnimationFrame||tB,dle=function(r){return console&&typeof console.warn=="function"&&console.warn(r)},Rg=null,ple=function(r){Rg&&hle(Rg),r.defer?Rg=fle(function(){rB(r,function(){Rg=null})}):(rB(r),Rg=null)},rB=function(r,t){var n=r.baseTag,i=r.bodyAttributes,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.onChangeClientState,f=r.scriptTags,c=r.styleTags,p=r.title,y=r.titleAttributes;jT(Xt.BODY,i),jT(Xt.HTML,s),vle(p,y);var w={baseTag:Nd(Xt.BASE,n),linkTags:Nd(Xt.LINK,o),metaTags:Nd(Xt.META,a),noscriptTags:Nd(Xt.NOSCRIPT,l),scriptTags:Nd(Xt.SCRIPT,f),styleTags:Nd(Xt.STYLE,c)},b={},T={};Object.keys(w).forEach(function(_){var A=w[_],x=A.newTags,I=A.oldTags;x.length&&(b[_]=x),I.length&&(T[_]=w[_].oldTags)}),t&&t(),u(r,b,T)},xz=function(r){return Array.isArray(r)?r.join(""):r},vle=function(r,t){typeof r<"u"&&document.title!==r&&(document.title=xz(r)),jT(Xt.TITLE,t)},jT=function(r,t){var n=document.getElementsByTagName(r)[0];if(n){for(var i=n.getAttribute(_a),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],f=t[u]||"";n.getAttribute(u)!==f&&n.setAttribute(u,f),s.indexOf(u)===-1&&s.push(u);var c=o.indexOf(u);c!==-1&&o.splice(c,1)}for(var p=o.length-1;p>=0;p--)n.removeAttribute(o[p]);s.length===o.length?n.removeAttribute(_a):n.getAttribute(_a)!==a.join(",")&&n.setAttribute(_a,a.join(","))}},Nd=function(r,t){var n=document.head||document.querySelector(Xt.HEAD),i=n.querySelectorAll(r+"["+_a+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(r);for(var f in l)if(l.hasOwnProperty(f))if(f===sn.INNER_HTML)u.innerHTML=l.innerHTML;else if(f===sn.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var c=typeof l[f]>"u"?"":l[f];u.setAttribute(f,c)}u.setAttribute(_a,"true"),s.some(function(p,y){return a=y,u.isEqualNode(p)})?s.splice(a,1):o.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:o}},Ez=function(r){return Object.keys(r).reduce(function(t,n){var i=typeof r[n]<"u"?n+'="'+r[n]+'"':""+n;return t?t+" "+i:i},"")},gle=function(r,t,n,i){var s=Ez(n),o=xz(t);return s?"<"+r+" "+_a+'="true" '+s+">"+LT(o,i)+"</"+r+">":"<"+r+" "+_a+'="true">'+LT(o,i)+"</"+r+">"},yle=function(r,t,n){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(u){return!(u===sn.INNER_HTML||u===sn.CSS_TEXT)}).reduce(function(u,f){var c=typeof s[f]>"u"?f:f+'="'+LT(s[f],n)+'"';return u?u+" "+c:c},""),a=s.innerHTML||s.cssText||"",l=tle.indexOf(r)===-1;return i+"<"+r+" "+_a+'="true" '+o+(l?"/>":">"+a+"</"+r+">")},"")},Sz=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Lw[i]||i]=r[i],n},t)},mle=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[ele[i]||i]=r[i],n},t)},ble=function(r,t,n){var i,s=(i={key:t},i[_a]=!0,i),o=Sz(n,s);return[Ta.createElement(Xt.TITLE,o,t)]},wle=function(r,t){return t.map(function(n,i){var s,o=(s={key:i},s[_a]=!0,s);return Object.keys(n).forEach(function(a){var l=Lw[a]||a;if(l===sn.INNER_HTML||l===sn.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=n[a]}),Ta.createElement(r,o)})},Ul=function(r,t,n){switch(r){case Xt.TITLE:return{toComponent:function(){return ble(r,t.title,t.titleAttributes)},toString:function(){return gle(r,t.title,t.titleAttributes,n)}};case ih.BODY:case ih.HTML:return{toComponent:function(){return Sz(t)},toString:function(){return Ez(t)}};default:return{toComponent:function(){return wle(r,t)},toString:function(){return yle(r,t,n)}}}},kz=function(r){var t=r.baseTag,n=r.bodyAttributes,i=r.encode,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.scriptTags,f=r.styleTags,c=r.title,p=c===void 0?"":c,y=r.titleAttributes;return{base:Ul(Xt.BASE,t,i),bodyAttributes:Ul(ih.BODY,n,i),htmlAttributes:Ul(ih.HTML,s,i),link:Ul(Xt.LINK,o,i),meta:Ul(Xt.META,a,i),noscript:Ul(Xt.NOSCRIPT,l,i),script:Ul(Xt.SCRIPT,u,i),style:Ul(Xt.STYLE,f,i),title:Ul(Xt.TITLE,{title:p,titleAttributes:y},i)}},$le=function(r){var t,n;return n=t=function(i){sle(s,i);function s(){return nle(this,s),ole(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!Vae(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Xt.SCRIPT:case Xt.NOSCRIPT:return{innerHTML:l};case Xt.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,f=a.arrayTypeChildren,c=a.newChildProps,p=a.nestedChildren;return xs({},f,(l={},l[u.type]=[].concat(f[u.type]||[],[xs({},c,this.mapNestedChildrenToProps(u,p))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,u,f=a.child,c=a.newProps,p=a.newChildProps,y=a.nestedChildren;switch(f.type){case Xt.TITLE:return xs({},c,(l={},l[f.type]=y,l.titleAttributes=xs({},p),l));case Xt.BODY:return xs({},c,{bodyAttributes:xs({},p)});case Xt.HTML:return xs({},c,{htmlAttributes:xs({},p)})}return xs({},c,(u={},u[f.type]=xs({},p),u))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=xs({},l);return Object.keys(a).forEach(function(f){var c;u=xs({},u,(c={},c[f]=a[f],c))}),u},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var u=this,f={};return Ta.Children.forEach(a,function(c){if(!(!c||!c.props)){var p=c.props,y=p.children,w=eB(p,["children"]),b=mle(w);switch(u.warnOnInvalidChildren(c,y),c.type){case Xt.LINK:case Xt.META:case Xt.NOSCRIPT:case Xt.SCRIPT:case Xt.STYLE:f=u.flattenArrayTypeChildren({child:c,arrayTypeChildren:f,newChildProps:b,nestedChildren:y});break;default:l=u.mapObjectTypeChildren({child:c,newProps:l,newChildProps:b,nestedChildren:y});break}}}),l=this.mapArrayTypeChildrenToProps(f,l),l},s.prototype.render=function(){var a=this.props,l=a.children,u=eB(a,["children"]),f=xs({},u);return l&&(f=this.mapChildrenToProps(l,f)),Ta.createElement(r,f)},ile(s,null,[{key:"canUseDOM",set:function(a){r.canUseDOM=a}}]),s}(Ta.Component),t.propTypes={base:nn.object,bodyAttributes:nn.object,children:nn.oneOfType([nn.arrayOf(nn.node),nn.node]),defaultTitle:nn.string,defer:nn.bool,encodeSpecialCharacters:nn.bool,htmlAttributes:nn.object,link:nn.arrayOf(nn.object),meta:nn.arrayOf(nn.object),noscript:nn.arrayOf(nn.object),onChangeClientState:nn.func,script:nn.arrayOf(nn.object),style:nn.arrayOf(nn.object),title:nn.string,titleAttributes:nn.object,titleTemplate:nn.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=r.peek,t.rewind=function(){var i=r.rewind();return i||(i=kz({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},_le=function(){return null},xle=Hae(cle,ple,kz)(_le),Sh=$le(xle);Sh.renderStatic=Sh.rewind;var Ele={};function Vg(e,r){for(var t in r)e[t]=r[t];return e}function HT(e,r,t){var n,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),o={};if(s&&s[1])for(var a=s[1].split("&"),l=0;l<a.length;l++){var u=a[l].split("=");o[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=zT(e.replace(i,"")),r=zT(r||"");for(var f=Math.max(e.length,r.length),c=0;c<f;c++)if(r[c]&&r[c].charAt(0)===":"){var p=r[c].replace(/(^:|[+*?]+$)/g,""),y=(r[c].match(/[+*?]+$/)||Ele)[0]||"",w=~y.indexOf("+"),b=~y.indexOf("*"),T=e[c]||"";if(!T&&!b&&(y.indexOf("?")<0||w)){n=!1;break}if(o[p]=decodeURIComponent(T),w||b){o[p]=e.slice(c).map(decodeURIComponent).join("/");break}}else if(r[c]!==e[c]){n=!1;break}return(t.default===!0||n!==!1)&&o}function Sle(e,r){return e.rank<r.rank?1:e.rank>r.rank?-1:e.index-r.index}function kle(e,r){return e.index=r,e.rank=function(t){return t.props.default?0:zT(t.props.path).map(Tle).join("")}(e),e.props}function zT(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Tle(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Ile={},sh=[],cy=[],Gs=null,$3={url:_3()},Tz=v3($3);function Ale(){var e=m_(Tz);if(e===$3){var r=He()[1];kt(function(){return cy.push(r),function(){return cy.splice(cy.indexOf(r),1)}},[])}return[e,xr]}function _3(){var e;return""+((e=Gs&&Gs.location?Gs.location:Gs&&Gs.getCurrentLocation?Gs.getCurrentLocation():typeof location<"u"?location:Ile).pathname||"")+(e.search||"")}function xr(e,r){return r===void 0&&(r=!1),typeof e!="string"&&e.url&&(r=e.replace,e=e.url),function(t){for(var n=sh.length;n--;)if(sh[n].canRoute(t))return!0;return!1}(e)&&function(t,n){n===void 0&&(n="push"),Gs&&Gs[n]?Gs[n](t):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,t)}(e,r?"replace":"push"),Iz(e)}function Iz(e){for(var r=!1,t=0;t<sh.length;t++)sh[t].routeTo(e)&&(r=!0);return r}function Ole(e){if(e&&e.getAttribute){var r=e.getAttribute("href"),t=e.getAttribute("target");if(r&&r.match(/^\//g)&&(!t||t.match(/^_?self$/i)))return xr(r)}}function Cle(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Az(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var r=e.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(Ole(r))return Cle(e)}while(r=r.parentNode)}}var nB=!1;function Oz(e){e.history&&(Gs=e.history),this.state={url:e.url||_3()}}Vg(Oz.prototype=new zn,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var r=ka(this.props.children);return this.g(r,e)!==void 0},routeTo:function(e){this.setState({url:e});var r=this.canRoute(e);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;nB||(nB=!0,Gs||addEventListener("popstate",function(){Iz(_3())}),addEventListener("click",Az)),sh.push(this),Gs&&(this.u=Gs.listen(function(r){var t=r.location||r;e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),sh.splice(sh.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,r){e=e.filter(kle).sort(Sle);for(var t=0;t<e.length;t++){var n=e[t],i=HT(r,n.props.path,n.props);if(i)return[n,i]}},render:function(e,r){var t,n,i=e.onChange,s=r.url,o=this.c,a=this.g(ka(e.children),s);if(a&&(n=UH(a[0],Vg(Vg({url:s,matches:t=a[1]},t),{key:void 0,ref:void 0}))),s!==(o&&o.url)){Vg($3,o=this.c={url:s,previous:o&&o.url,current:n,path:n?n.props.path:null,matches:t}),o.router=this,o.active=n?[n]:[];for(var l=cy.length;l--;)cy[l]({});typeof i=="function"&&i(o)}return Qe(Tz.Provider,{value:o},n)}});var Jt=function(e){return Qe("a",Vg({onClick:Az},e))};function Ple({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Nle=Ur(Ple),Cz=Nle;function Rle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Dle=Ur(Rle),Ble=Dle;function Mle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}const Lle=Ur(Mle),Fle=Lle;function jle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))}const Hle=Ur(jle),zle=Hle;function Ule({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Wle=Ur(Ule),qle=Wle;function Kle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Vle=Ur(Kle),Pz=Vle;function Gle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Yle=Ur(Gle),Nz=Yle;function Zle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Xle=Ur(Zle),Rz=Xle;function Jle({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Qle=Ur(Jle),eue=Qle;function tue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const rue=Ur(tue),x3=rue;function nue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const iue=Ur(nue),sue=iue;function oue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"}))}const aue=Ur(oue),lue=aue;function uue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const cue=Ur(uue),Dz=cue;function fue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z",clipRule:"evenodd"}))}const hue=Ur(fue),due=hue;function pue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const vue=Ur(pue),gue=vue;function yue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))}const mue=Ur(yue),bue=mue;function wue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const $ue=Ur(wue),E3=$ue;function _ue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),Qe("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const xue=Ur(_ue),Bz=xue;function Eue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const Sue=Ur(Eue),kue=Sue;function Tue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z",clipRule:"evenodd"}))}const Iue=Ur(Tue),Mz=Iue;function Aue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}))}const Oue=Ur(Aue),Lz=Oue;function Cue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const Pue=Ur(Cue),S3=Pue;function Nue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const Rue=Ur(Nue),Due=Rue;function Bue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const Mue=Ur(Bue),Fz=Mue;function Lue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z",clipRule:"evenodd"}))}const Fue=Ur(Lue),jue=Fue;function Hue({title:e,titleId:r,...t},n){return Qe("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Qe("title",{id:r},e):null,Qe("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const zue=Ur(Hue),jz=zue;var Uue=0;function v(e,r,t,n,i,s){var o,a,l={};for(a in r)a=="ref"?o=r[a]:l[a]=r[a];var u={type:e,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Uue,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return at.vnode&&at.vnode(u),u}const to={video:v("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:v("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),magnifyingGlassBold:({width:e})=>v("svg",{fill:"none",width:e,viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),close:v("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:v("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:v("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[v("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),v("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:v("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[v("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),v("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),v("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),newFollower:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:v("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),search:v("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:v("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:v("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),network:v("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:v("g",{children:[v("g",{children:[v("g",{children:v("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),v("g",{children:v("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),v("g",{children:v("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),v("g",{children:v("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),v("g",{children:v("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),v("g",{children:v("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),checkmark:v("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:v("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})})};function Gg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hz={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,r){(function(t){e.exports=t()})(function(){return function t(n,i,s){function o(u,f){if(!i[u]){if(!n[u]){var c=typeof Gg=="function"&&Gg;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(w){var b=n[u][1][w];return o(b||w)},y,y.exports,t,n,i,s)}return i[u].exports}for(var a=typeof Gg=="function"&&Gg,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(w),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),a=function(){f.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:a=function(){setTimeout(w,0)};var p,y=[];function w(){p=!0;for(var T,_,A=y.length;A;){for(_=y,y=[],T=-1;++T<A;)_[T]();A=y.length}p=!1}n.exports=b;function b(T){y.push(T)===1&&!p&&a()}}).call(this,typeof Cn<"u"?Cn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];n.exports=c;function c(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,O!==o&&b(this,O)}c.prototype.catch=function(O){return this.then(null,O)},c.prototype.then=function(O,C){if(typeof O!="function"&&this.state===u||typeof C!="function"&&this.state===l)return this;var g=new this.constructor(o);if(this.state!==f){var M=this.state===u?O:C;y(g,M,this.outcome)}else this.queue.push(new p(g,O,C));return g};function p(O,C,g){this.promise=O,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(O){a.resolve(this.promise,O)},p.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},p.prototype.callRejected=function(O){a.reject(this.promise,O)},p.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)};function y(O,C,g){s(function(){var M;try{M=C(g)}catch(B){return a.reject(O,B)}M===O?a.reject(O,new TypeError("Cannot resolve promise with itself")):a.resolve(O,M)})}a.resolve=function(O,C){var g=T(w,C);if(g.status==="error")return a.reject(O,g.value);var M=g.value;if(M)b(O,M);else{O.state=u,O.outcome=C;for(var B=-1,L=O.queue.length;++B<L;)O.queue[B].callFulfilled(C)}return O},a.reject=function(O,C){O.state=l,O.outcome=C;for(var g=-1,M=O.queue.length;++g<M;)O.queue[g].callRejected(C);return O};function w(O){var C=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof C=="function")return function(){C.apply(O,arguments)}}function b(O,C){var g=!1;function M(Q){g||(g=!0,a.reject(O,Q))}function B(Q){g||(g=!0,a.resolve(O,Q))}function L(){C(B,M)}var q=T(L);q.status==="error"&&M(q.value)}function T(O,C){var g={};try{g.value=O(C),g.status="success"}catch(M){g.status="error",g.value=M}return g}c.resolve=_;function _(O){return O instanceof this?O:a.resolve(new this(o),O)}c.reject=A;function A(O){var C=new this(o);return a.reject(C,O)}c.all=x;function x(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,M=!1;if(!g)return this.resolve([]);for(var B=new Array(g),L=0,q=-1,Q=new this(o);++q<g;)te(O[q],q);return Q;function te(X,j){C.resolve(X).then(Z,function(ie){M||(M=!0,a.reject(Q,ie))});function Z(ie){B[j]=ie,++L===g&&!M&&(M=!0,a.resolve(Q,B))}}}c.race=I;function I(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,M=!1;if(!g)return this.resolve([]);for(var B=-1,L=new this(o);++B<g;)q(O[B]);return L;function q(Q){C.resolve(Q).then(function(te){M||(M=!0,a.resolve(L,te))},function(te){M||(M=!0,a.reject(L,te))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Cn<"u"?Cn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,ue){if(!(Y instanceof ue))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ue=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||ue)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(Y,ue){Y=Y||[],ue=ue||{};try{return new Blob(Y,ue)}catch(be){if(be.name!=="TypeError")throw be;for(var re=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$e=new re,Se=0;Se<Y.length;Se+=1)$e.append(Y[Se]);return $e.getBlob(ue.type)}}typeof Promise>"u"&&t(3);var c=Promise;function p(Y,ue){ue&&Y.then(function(re){ue(null,re)},function(re){ue(re)})}function y(Y,ue,re){typeof ue=="function"&&Y.then(ue),typeof re=="function"&&Y.catch(re)}function w(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",_=void 0,A={},x=Object.prototype.toString,I="readonly",O="readwrite";function C(Y){for(var ue=Y.length,re=new ArrayBuffer(ue),$e=new Uint8Array(re),Se=0;Se<ue;Se++)$e[Se]=Y.charCodeAt(Se);return re}function g(Y){return new c(function(ue){var re=Y.transaction(T,O),$e=f([""]);re.objectStore(T).put($e,"key"),re.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),ue(!1)},re.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),be=navigator.userAgent.match(/Edge\//);ue(be||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function M(Y){return typeof _=="boolean"?c.resolve(_):g(Y).then(function(ue){return _=ue,_})}function B(Y){var ue=A[Y.name],re={};re.promise=new c(function($e,Se){re.resolve=$e,re.reject=Se}),ue.deferredOperations.push(re),ue.dbReady?ue.dbReady=ue.dbReady.then(function(){return re.promise}):ue.dbReady=re.promise}function L(Y){var ue=A[Y.name],re=ue.deferredOperations.pop();if(re)return re.resolve(),re.promise}function q(Y,ue){var re=A[Y.name],$e=re.deferredOperations.pop();if($e)return $e.reject(ue),$e.promise}function Q(Y,ue){return new c(function(re,$e){if(A[Y.name]=A[Y.name]||Ge(),Y.db)if(ue)B(Y),Y.db.close();else return re(Y.db);var Se=[Y.name];ue&&Se.push(Y.version);var be=l.open.apply(l,Se);ue&&(be.onupgradeneeded=function(Le){var Ye=be.result;try{Ye.createObjectStore(Y.storeName),Le.oldVersion<=1&&Ye.createObjectStore(T)}catch(Je){if(Je.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Je}}),be.onerror=function(Le){Le.preventDefault(),$e(be.error)},be.onsuccess=function(){var Le=be.result;Le.onversionchange=function(Ye){Ye.target.close()},re(Le),L(Y)}})}function te(Y){return Q(Y,!1)}function X(Y){return Q(Y,!0)}function j(Y,ue){if(!Y.db)return!0;var re=!Y.db.objectStoreNames.contains(Y.storeName),$e=Y.version<Y.db.version,Se=Y.version>Y.db.version;if($e&&(Y.version!==ue&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),Se||re){if(re){var be=Y.db.version+1;be>Y.version&&(Y.version=be)}return!0}return!1}function Z(Y){return new c(function(ue,re){var $e=new FileReader;$e.onerror=re,$e.onloadend=function(Se){var be=btoa(Se.target.result||"");ue({__local_forage_encoded_blob:!0,data:be,type:Y.type})},$e.readAsBinaryString(Y)})}function ie(Y){var ue=C(atob(Y.data));return f([ue],{type:Y.type})}function _e(Y){return Y&&Y.__local_forage_encoded_blob}function we(Y){var ue=this,re=ue._initReady().then(function(){var $e=A[ue._dbInfo.name];if($e&&$e.dbReady)return $e.dbReady});return y(re,Y,Y),re}function Ce(Y){B(Y);for(var ue=A[Y.name],re=ue.forages,$e=0;$e<re.length;$e++){var Se=re[$e];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return Y.db=null,te(Y).then(function(be){return Y.db=be,j(Y)?X(Y):be}).then(function(be){Y.db=ue.db=be;for(var Le=0;Le<re.length;Le++)re[Le]._dbInfo.db=be}).catch(function(be){throw q(Y,be),be})}function ze(Y,ue,re,$e){$e===void 0&&($e=1);try{var Se=Y.db.transaction(Y.storeName,ue);re(null,Se)}catch(be){if($e>0&&(!Y.db||be.name==="InvalidStateError"||be.name==="NotFoundError"))return c.resolve().then(function(){if(!Y.db||be.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),X(Y)}).then(function(){return Ce(Y).then(function(){ze(Y,ue,re,$e-1)})}).catch(re);re(be)}}function Ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function it(Y){var ue=this,re={db:null};if(Y)for(var $e in Y)re[$e]=Y[$e];var Se=A[re.name];Se||(Se=Ge(),A[re.name]=Se),Se.forages.push(ue),ue._initReady||(ue._initReady=ue.ready,ue.ready=we);var be=[];function Le(){return c.resolve()}for(var Ye=0;Ye<Se.forages.length;Ye++){var Je=Se.forages[Ye];Je!==ue&&be.push(Je._initReady().catch(Le))}var et=Se.forages.slice(0);return c.all(be).then(function(){return re.db=Se.db,te(re)}).then(function(ot){return re.db=ot,j(re,ue._defaultConfig.version)?X(re):ot}).then(function(ot){re.db=Se.db=ot,ue._dbInfo=re;for(var xt=0;xt<et.length;xt++){var Lt=et[xt];Lt!==ue&&(Lt._dbInfo.db=re.db,Lt._dbInfo.version=re.version)}})}function xe(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,be){re.ready().then(function(){ze(re._dbInfo,I,function(Le,Ye){if(Le)return be(Le);try{var Je=Ye.objectStore(re._dbInfo.storeName),et=Je.get(Y);et.onsuccess=function(){var ot=et.result;ot===void 0&&(ot=null),_e(ot)&&(ot=ie(ot)),Se(ot)},et.onerror=function(){be(et.error)}}catch(ot){be(ot)}})}).catch(be)});return p($e,ue),$e}function ge(Y,ue){var re=this,$e=new c(function(Se,be){re.ready().then(function(){ze(re._dbInfo,I,function(Le,Ye){if(Le)return be(Le);try{var Je=Ye.objectStore(re._dbInfo.storeName),et=Je.openCursor(),ot=1;et.onsuccess=function(){var xt=et.result;if(xt){var Lt=xt.value;_e(Lt)&&(Lt=ie(Lt));var mr=Y(Lt,xt.key,ot++);mr!==void 0?Se(mr):xt.continue()}else Se()},et.onerror=function(){be(et.error)}}catch(xt){be(xt)}})}).catch(be)});return p($e,ue),$e}function Te(Y,ue,re){var $e=this;Y=w(Y);var Se=new c(function(be,Le){var Ye;$e.ready().then(function(){return Ye=$e._dbInfo,x.call(ue)==="[object Blob]"?M(Ye.db).then(function(Je){return Je?ue:Z(ue)}):ue}).then(function(Je){ze($e._dbInfo,O,function(et,ot){if(et)return Le(et);try{var xt=ot.objectStore($e._dbInfo.storeName);Je===null&&(Je=void 0);var Lt=xt.put(Je,Y);ot.oncomplete=function(){Je===void 0&&(Je=null),be(Je)},ot.onabort=ot.onerror=function(){var mr=Lt.error?Lt.error:Lt.transaction.error;Le(mr)}}catch(mr){Le(mr)}})}).catch(Le)});return p(Se,re),Se}function Fe(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,be){re.ready().then(function(){ze(re._dbInfo,O,function(Le,Ye){if(Le)return be(Le);try{var Je=Ye.objectStore(re._dbInfo.storeName),et=Je.delete(Y);Ye.oncomplete=function(){Se()},Ye.onerror=function(){be(et.error)},Ye.onabort=function(){var ot=et.error?et.error:et.transaction.error;be(ot)}}catch(ot){be(ot)}})}).catch(be)});return p($e,ue),$e}function $(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){ze(ue._dbInfo,O,function(be,Le){if(be)return Se(be);try{var Ye=Le.objectStore(ue._dbInfo.storeName),Je=Ye.clear();Le.oncomplete=function(){$e()},Le.onabort=Le.onerror=function(){var et=Je.error?Je.error:Je.transaction.error;Se(et)}}catch(et){Se(et)}})}).catch(Se)});return p(re,Y),re}function S(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){ze(ue._dbInfo,I,function(be,Le){if(be)return Se(be);try{var Ye=Le.objectStore(ue._dbInfo.storeName),Je=Ye.count();Je.onsuccess=function(){$e(Je.result)},Je.onerror=function(){Se(Je.error)}}catch(et){Se(et)}})}).catch(Se)});return p(re,Y),re}function N(Y,ue){var re=this,$e=new c(function(Se,be){if(Y<0){Se(null);return}re.ready().then(function(){ze(re._dbInfo,I,function(Le,Ye){if(Le)return be(Le);try{var Je=Ye.objectStore(re._dbInfo.storeName),et=!1,ot=Je.openKeyCursor();ot.onsuccess=function(){var xt=ot.result;if(!xt){Se(null);return}Y===0||et?Se(xt.key):(et=!0,xt.advance(Y))},ot.onerror=function(){be(ot.error)}}catch(xt){be(xt)}})}).catch(be)});return p($e,ue),$e}function F(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){ze(ue._dbInfo,I,function(be,Le){if(be)return Se(be);try{var Ye=Le.objectStore(ue._dbInfo.storeName),Je=Ye.openKeyCursor(),et=[];Je.onsuccess=function(){var ot=Je.result;if(!ot){$e(et);return}et.push(ot.key),ot.continue()},Je.onerror=function(){Se(Je.error)}}catch(ot){Se(ot)}})}).catch(Se)});return p(re,Y),re}function H(Y,ue){ue=b.apply(this,arguments);var re=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||re.name,Y.storeName=Y.storeName||re.storeName);var $e=this,Se;if(!Y.name)Se=c.reject("Invalid arguments");else{var be=Y.name===re.name&&$e._dbInfo.db,Le=be?c.resolve($e._dbInfo.db):te(Y).then(function(Ye){var Je=A[Y.name],et=Je.forages;Je.db=Ye;for(var ot=0;ot<et.length;ot++)et[ot]._dbInfo.db=Ye;return Ye});Y.storeName?Se=Le.then(function(Ye){if(Ye.objectStoreNames.contains(Y.storeName)){var Je=Ye.version+1;B(Y);var et=A[Y.name],ot=et.forages;Ye.close();for(var xt=0;xt<ot.length;xt++){var Lt=ot[xt];Lt._dbInfo.db=null,Lt._dbInfo.version=Je}var mr=new c(function(lr,Yr){var Cr=l.open(Y.name,Je);Cr.onerror=function(cn){var Li=Cr.result;Li.close(),Yr(cn)},Cr.onupgradeneeded=function(){var cn=Cr.result;cn.deleteObjectStore(Y.storeName)},Cr.onsuccess=function(){var cn=Cr.result;cn.close(),lr(cn)}});return mr.then(function(lr){et.db=lr;for(var Yr=0;Yr<ot.length;Yr++){var Cr=ot[Yr];Cr._dbInfo.db=lr,L(Cr._dbInfo)}}).catch(function(lr){throw(q(Y,lr)||c.resolve()).catch(function(){}),lr})}}):Se=Le.then(function(Ye){B(Y);var Je=A[Y.name],et=Je.forages;Ye.close();for(var ot=0;ot<et.length;ot++){var xt=et[ot];xt._dbInfo.db=null}var Lt=new c(function(mr,lr){var Yr=l.deleteDatabase(Y.name);Yr.onerror=function(){var Cr=Yr.result;Cr&&Cr.close(),lr(Yr.error)},Yr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Yr.onsuccess=function(){var Cr=Yr.result;Cr&&Cr.close(),mr(Cr)}});return Lt.then(function(mr){Je.db=mr;for(var lr=0;lr<et.length;lr++){var Yr=et[lr];L(Yr._dbInfo)}}).catch(function(mr){throw(q(Y,mr)||c.resolve()).catch(function(){}),mr})})}return p(Se,ue),Se}var V={_driver:"asyncStorage",_initStorage:it,_support:u(),iterate:ge,getItem:xe,setItem:Te,removeItem:Fe,clear:$,length:S,key:N,keys:F,dropInstance:H};function le(){return typeof openDatabase=="function"}var ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",je=/^~~local_forage_type~([^~]+)~/,st="__lfsc__:",wt=st.length,mt="arbf",vt="blob",Rt="si08",dr="ui08",Gr="uic8",ct="si16",It="si32",gn="ur16",Di="ui32",Gi="fl32",yn="fl64",ps=wt+mt.length,fo=Object.prototype.toString;function Bi(Y){var ue=Y.length*.75,re=Y.length,$e,Se=0,be,Le,Ye,Je;Y[Y.length-1]==="="&&(ue--,Y[Y.length-2]==="="&&ue--);var et=new ArrayBuffer(ue),ot=new Uint8Array(et);for($e=0;$e<re;$e+=4)be=ye.indexOf(Y[$e]),Le=ye.indexOf(Y[$e+1]),Ye=ye.indexOf(Y[$e+2]),Je=ye.indexOf(Y[$e+3]),ot[Se++]=be<<2|Le>>4,ot[Se++]=(Le&15)<<4|Ye>>2,ot[Se++]=(Ye&3)<<6|Je&63;return et}function Yi(Y){var ue=new Uint8Array(Y),re="",$e;for($e=0;$e<ue.length;$e+=3)re+=ye[ue[$e]>>2],re+=ye[(ue[$e]&3)<<4|ue[$e+1]>>4],re+=ye[(ue[$e+1]&15)<<2|ue[$e+2]>>6],re+=ye[ue[$e+2]&63];return ue.length%3===2?re=re.substring(0,re.length-1)+"=":ue.length%3===1&&(re=re.substring(0,re.length-2)+"=="),re}function ho(Y,ue){var re="";if(Y&&(re=fo.call(Y)),Y&&(re==="[object ArrayBuffer]"||Y.buffer&&fo.call(Y.buffer)==="[object ArrayBuffer]")){var $e,Se=st;Y instanceof ArrayBuffer?($e=Y,Se+=mt):($e=Y.buffer,re==="[object Int8Array]"?Se+=Rt:re==="[object Uint8Array]"?Se+=dr:re==="[object Uint8ClampedArray]"?Se+=Gr:re==="[object Int16Array]"?Se+=ct:re==="[object Uint16Array]"?Se+=gn:re==="[object Int32Array]"?Se+=It:re==="[object Uint32Array]"?Se+=Di:re==="[object Float32Array]"?Se+=Gi:re==="[object Float64Array]"?Se+=yn:ue(new Error("Failed to get type for BinaryArray"))),ue(Se+Yi($e))}else if(re==="[object Blob]"){var be=new FileReader;be.onload=function(){var Le=Ue+Y.type+"~"+Yi(this.result);ue(st+vt+Le)},be.readAsArrayBuffer(Y)}else try{ue(JSON.stringify(Y))}catch(Le){console.error("Couldn't convert value into a JSON string: ",Y),ue(null,Le)}}function of(Y){if(Y.substring(0,wt)!==st)return JSON.parse(Y);var ue=Y.substring(ps),re=Y.substring(wt,ps),$e;if(re===vt&&je.test(ue)){var Se=ue.match(je);$e=Se[1],ue=ue.substring(Se[0].length)}var be=Bi(ue);switch(re){case mt:return be;case vt:return f([be],{type:$e});case Rt:return new Int8Array(be);case dr:return new Uint8Array(be);case Gr:return new Uint8ClampedArray(be);case ct:return new Int16Array(be);case gn:return new Uint16Array(be);case It:return new Int32Array(be);case Di:return new Uint32Array(be);case Gi:return new Float32Array(be);case yn:return new Float64Array(be);default:throw new Error("Unkown type: "+re)}}var po={serialize:ho,deserialize:of,stringToBuffer:Bi,bufferToString:Yi};function af(Y,ue,re,$e){Y.executeSql("CREATE TABLE IF NOT EXISTS "+ue.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],re,$e)}function sd(Y){var ue=this,re={db:null};if(Y)for(var $e in Y)re[$e]=typeof Y[$e]!="string"?Y[$e].toString():Y[$e];var Se=new c(function(be,Le){try{re.db=openDatabase(re.name,String(re.version),re.description,re.size)}catch(Ye){return Le(Ye)}re.db.transaction(function(Ye){af(Ye,re,function(){ue._dbInfo=re,be()},function(Je,et){Le(et)})},Le)});return re.serializer=po,Se}function vo(Y,ue,re,$e,Se,be){Y.executeSql(re,$e,Se,function(Le,Ye){Ye.code===Ye.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ue.storeName],function(Je,et){et.rows.length?be(Je,Ye):af(Je,ue,function(){Je.executeSql(re,$e,Se,be)},be)},be):be(Le,Ye)},be)}function ta(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,be){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ye){vo(Ye,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[Y],function(Je,et){var ot=et.rows.length?et.rows.item(0).value:null;ot&&(ot=Le.serializer.deserialize(ot)),Se(ot)},function(Je,et){be(et)})})}).catch(be)});return p($e,ue),$e}function La(Y,ue){var re=this,$e=new c(function(Se,be){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ye){vo(Ye,Le,"SELECT * FROM "+Le.storeName,[],function(Je,et){for(var ot=et.rows,xt=ot.length,Lt=0;Lt<xt;Lt++){var mr=ot.item(Lt),lr=mr.value;if(lr&&(lr=Le.serializer.deserialize(lr)),lr=Y(lr,mr.key,Lt+1),lr!==void 0){Se(lr);return}}Se()},function(Je,et){be(et)})})}).catch(be)});return p($e,ue),$e}function lf(Y,ue,re,$e){var Se=this;Y=w(Y);var be=new c(function(Le,Ye){Se.ready().then(function(){ue===void 0&&(ue=null);var Je=ue,et=Se._dbInfo;et.serializer.serialize(ue,function(ot,xt){xt?Ye(xt):et.db.transaction(function(Lt){vo(Lt,et,"INSERT OR REPLACE INTO "+et.storeName+" (key, value) VALUES (?, ?)",[Y,ot],function(){Le(Je)},function(mr,lr){Ye(lr)})},function(Lt){if(Lt.code===Lt.QUOTA_ERR){if($e>0){Le(lf.apply(Se,[Y,Je,re,$e-1]));return}Ye(Lt)}})})}).catch(Ye)});return p(be,re),be}function od(Y,ue,re){return lf.apply(this,[Y,ue,re,1])}function Mi(Y,ue){var re=this;Y=w(Y);var $e=new c(function(Se,be){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ye){vo(Ye,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[Y],function(){Se()},function(Je,et){be(et)})})}).catch(be)});return p($e,ue),$e}function ai(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){var be=ue._dbInfo;be.db.transaction(function(Le){vo(Le,be,"DELETE FROM "+be.storeName,[],function(){$e()},function(Ye,Je){Se(Je)})})}).catch(Se)});return p(re,Y),re}function Du(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){var be=ue._dbInfo;be.db.transaction(function(Le){vo(Le,be,"SELECT COUNT(key) as c FROM "+be.storeName,[],function(Ye,Je){var et=Je.rows.item(0).c;$e(et)},function(Ye,Je){Se(Je)})})}).catch(Se)});return p(re,Y),re}function rg(Y,ue){var re=this,$e=new c(function(Se,be){re.ready().then(function(){var Le=re._dbInfo;Le.db.transaction(function(Ye){vo(Ye,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Je,et){var ot=et.rows.length?et.rows.item(0).key:null;Se(ot)},function(Je,et){be(et)})})}).catch(be)});return p($e,ue),$e}function ad(Y){var ue=this,re=new c(function($e,Se){ue.ready().then(function(){var be=ue._dbInfo;be.db.transaction(function(Le){vo(Le,be,"SELECT key FROM "+be.storeName,[],function(Ye,Je){for(var et=[],ot=0;ot<Je.rows.length;ot++)et.push(Je.rows.item(ot).key);$e(et)},function(Ye,Je){Se(Je)})})}).catch(Se)});return p(re,Y),re}function ld(Y){return new c(function(ue,re){Y.transaction(function($e){$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,be){for(var Le=[],Ye=0;Ye<be.rows.length;Ye++)Le.push(be.rows.item(Ye).name);ue({db:Y,storeNames:Le})},function(Se,be){re(be)})},function($e){re($e)})})}function go(Y,ue){ue=b.apply(this,arguments);var re=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||re.name,Y.storeName=Y.storeName||re.storeName);var $e=this,Se;return Y.name?Se=new c(function(be){var Le;Y.name===re.name?Le=$e._dbInfo.db:Le=openDatabase(Y.name,"","",0),Y.storeName?be({db:Le,storeNames:[Y.storeName]}):be(ld(Le))}).then(function(be){return new c(function(Le,Ye){be.db.transaction(function(Je){function et(mr){return new c(function(lr,Yr){Je.executeSql("DROP TABLE IF EXISTS "+mr,[],function(){lr()},function(Cr,cn){Yr(cn)})})}for(var ot=[],xt=0,Lt=be.storeNames.length;xt<Lt;xt++)ot.push(et(be.storeNames[xt]));c.all(ot).then(function(){Le()}).catch(function(mr){Ye(mr)})},function(Je){Ye(Je)})})}):Se=c.reject("Invalid arguments"),p(Se,ue),Se}var Fa={_driver:"webSQLStorage",_initStorage:sd,_support:le(),iterate:La,getItem:ta,setItem:od,removeItem:Mi,clear:ai,length:Du,key:rg,keys:ad,dropInstance:go};function Tl(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Il(Y,ue){var re=Y.name+"/";return Y.storeName!==ue.storeName&&(re+=Y.storeName+"/"),re}function ng(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ig(){return!ng()||localStorage.length>0}function sg(Y){var ue=this,re={};if(Y)for(var $e in Y)re[$e]=Y[$e];return re.keyPrefix=Il(Y,ue._defaultConfig),ig()?(ue._dbInfo=re,re.serializer=po,c.resolve()):c.reject()}function ud(Y){var ue=this,re=ue.ready().then(function(){for(var $e=ue._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var be=localStorage.key(Se);be.indexOf($e)===0&&localStorage.removeItem(be)}});return p(re,Y),re}function og(Y,ue){var re=this;Y=w(Y);var $e=re.ready().then(function(){var Se=re._dbInfo,be=localStorage.getItem(Se.keyPrefix+Y);return be&&(be=Se.serializer.deserialize(be)),be});return p($e,ue),$e}function ag(Y,ue){var re=this,$e=re.ready().then(function(){for(var Se=re._dbInfo,be=Se.keyPrefix,Le=be.length,Ye=localStorage.length,Je=1,et=0;et<Ye;et++){var ot=localStorage.key(et);if(ot.indexOf(be)===0){var xt=localStorage.getItem(ot);if(xt&&(xt=Se.serializer.deserialize(xt)),xt=Y(xt,ot.substring(Le),Je++),xt!==void 0)return xt}}});return p($e,ue),$e}function cd(Y,ue){var re=this,$e=re.ready().then(function(){var Se=re._dbInfo,be;try{be=localStorage.key(Y)}catch{be=null}return be&&(be=be.substring(Se.keyPrefix.length)),be});return p($e,ue),$e}function fd(Y){var ue=this,re=ue.ready().then(function(){for(var $e=ue._dbInfo,Se=localStorage.length,be=[],Le=0;Le<Se;Le++){var Ye=localStorage.key(Le);Ye.indexOf($e.keyPrefix)===0&&be.push(Ye.substring($e.keyPrefix.length))}return be});return p(re,Y),re}function ja(Y){var ue=this,re=ue.keys().then(function($e){return $e.length});return p(re,Y),re}function hd(Y,ue){var re=this;Y=w(Y);var $e=re.ready().then(function(){var Se=re._dbInfo;localStorage.removeItem(Se.keyPrefix+Y)});return p($e,ue),$e}function uf(Y,ue,re){var $e=this;Y=w(Y);var Se=$e.ready().then(function(){ue===void 0&&(ue=null);var be=ue;return new c(function(Le,Ye){var Je=$e._dbInfo;Je.serializer.serialize(ue,function(et,ot){if(ot)Ye(ot);else try{localStorage.setItem(Je.keyPrefix+Y,et),Le(be)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ye(xt),Ye(xt)}})})});return p(Se,re),Se}function cf(Y,ue){if(ue=b.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var re=this.config();Y.name=Y.name||re.name,Y.storeName=Y.storeName||re.storeName}var $e=this,Se;return Y.name?Se=new c(function(be){Y.storeName?be(Il(Y,$e._defaultConfig)):be(Y.name+"/")}).then(function(be){for(var Le=localStorage.length-1;Le>=0;Le--){var Ye=localStorage.key(Le);Ye.indexOf(be)===0&&localStorage.removeItem(Ye)}}):Se=c.reject("Invalid arguments"),p(Se,ue),Se}var Bu={_driver:"localStorageWrapper",_initStorage:sg,_support:Tl(),iterate:ag,getItem:og,setItem:uf,removeItem:hd,clear:ud,length:ja,key:cd,keys:fd,dropInstance:cf},dd=function(ue,re){return ue===re||typeof ue=="number"&&typeof re=="number"&&isNaN(ue)&&isNaN(re)},Mu=function(ue,re){for(var $e=ue.length,Se=0;Se<$e;){if(dd(ue[Se],re))return!0;Se++}return!1},Ha=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ms={},ff={},ra={INDEXEDDB:V,WEBSQL:Fa,LOCALSTORAGE:Bu},pd=[ra.INDEXEDDB._driver,ra.WEBSQL._driver,ra.LOCALSTORAGE._driver],Al=["dropInstance"],za=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Al),vd={description:"",driver:pd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function lg(Y,ue){Y[ue]=function(){var re=arguments;return Y.ready().then(function(){return Y[ue].apply(Y,re)})}}function Lu(){for(var Y=1;Y<arguments.length;Y++){var ue=arguments[Y];if(ue)for(var re in ue)ue.hasOwnProperty(re)&&(Ha(ue[re])?arguments[0][re]=ue[re].slice():arguments[0][re]=ue[re])}return arguments[0]}var gd=function(){function Y(ue){o(this,Y);for(var re in ra)if(ra.hasOwnProperty(re)){var $e=ra[re],Se=$e._driver;this[re]=Se,Ms[Se]||this.defineDriver($e)}this._defaultConfig=Lu({},vd),this._config=Lu({},this._defaultConfig,ue),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(re){if((typeof re>"u"?"undefined":s(re))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $e in re){if($e==="storeName"&&(re[$e]=re[$e].replace(/\W/g,"_")),$e==="version"&&typeof re[$e]!="number")return new Error("Database version must be a number.");this._config[$e]=re[$e]}return"driver"in re&&re.driver?this.setDriver(this._config.driver):!0}else return typeof re=="string"?this._config[re]:this._config},Y.prototype.defineDriver=function(re,$e,Se){var be=new c(function(Le,Ye){try{var Je=re._driver,et=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!re._driver){Ye(et);return}for(var ot=za.concat("_initStorage"),xt=0,Lt=ot.length;xt<Lt;xt++){var mr=ot[xt],lr=!Mu(Al,mr);if((lr||re[mr])&&typeof re[mr]!="function"){Ye(et);return}}var Yr=function(){for(var Li=function(Fu){return function(){var bd=new Error("Method "+Fu+" is not implemented by the current driver"),df=c.reject(bd);return p(df,arguments[arguments.length-1]),df}},Ol=0,yd=Al.length;Ol<yd;Ol++){var yo=Al[Ol];re[yo]||(re[yo]=Li(yo))}};Yr();var Cr=function(Li){Ms[Je]&&console.info("Redefining LocalForage driver: "+Je),Ms[Je]=re,ff[Je]=Li,Le()};"_support"in re?re._support&&typeof re._support=="function"?re._support().then(Cr,Ye):Cr(!!re._support):Cr(!0)}catch(cn){Ye(cn)}});return y(be,$e,Se),be},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(re,$e,Se){var be=Ms[re]?c.resolve(Ms[re]):c.reject(new Error("Driver not found."));return y(be,$e,Se),be},Y.prototype.getSerializer=function(re){var $e=c.resolve(po);return y($e,re),$e},Y.prototype.ready=function(re){var $e=this,Se=$e._driverSet.then(function(){return $e._ready===null&&($e._ready=$e._initDriver()),$e._ready});return y(Se,re,re),Se},Y.prototype.setDriver=function(re,$e,Se){var be=this;Ha(re)||(re=[re]);var Le=this._getSupportedDrivers(re);function Ye(){be._config.driver=be.driver()}function Je(xt){return be._extend(xt),Ye(),be._ready=be._initStorage(be._config),be._ready}function et(xt){return function(){var Lt=0;function mr(){for(;Lt<xt.length;){var lr=xt[Lt];return Lt++,be._dbInfo=null,be._ready=null,be.getDriver(lr).then(Je).catch(mr)}Ye();var Yr=new Error("No available storage method found.");return be._driverSet=c.reject(Yr),be._driverSet}return mr()}}var ot=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=ot.then(function(){var xt=Le[0];return be._dbInfo=null,be._ready=null,be.getDriver(xt).then(function(Lt){be._driver=Lt._driver,Ye(),be._wrapLibraryMethodsWithReady(),be._initDriver=et(Le)})}).catch(function(){Ye();var xt=new Error("No available storage method found.");return be._driverSet=c.reject(xt),be._driverSet}),y(this._driverSet,$e,Se),this._driverSet},Y.prototype.supports=function(re){return!!ff[re]},Y.prototype._extend=function(re){Lu(this,re)},Y.prototype._getSupportedDrivers=function(re){for(var $e=[],Se=0,be=re.length;Se<be;Se++){var Le=re[Se];this.supports(Le)&&$e.push(Le)}return $e},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var re=0,$e=za.length;re<$e;re++)lg(this,za[re])},Y.prototype.createInstance=function(re){return new Y(re)},Y}(),hf=new gd;n.exports=hf},{3:3}]},{},[4])(4)})})(Hz);var Wue=Hz.exports;const vn=io(Wue);var Fw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Fw.exports;(function(e,r){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",c=1,p=2,y=4,w=1,b=2,T=1,_=2,A=4,x=8,I=16,O=32,C=64,g=128,M=256,B=512,L=30,q="...",Q=800,te=16,X=1,j=2,Z=3,ie=1/0,_e=9007199254740991,we=17976931348623157e292,Ce=0/0,ze=4294967295,Ge=ze-1,it=ze>>>1,xe=[["ary",g],["bind",T],["bindKey",_],["curry",x],["curryRight",I],["flip",B],["partial",O],["partialRight",C],["rearg",M]],ge="[object Arguments]",Te="[object Array]",Fe="[object AsyncFunction]",$="[object Boolean]",S="[object Date]",N="[object DOMException]",F="[object Error]",H="[object Function]",V="[object GeneratorFunction]",le="[object Map]",ye="[object Number]",Ue="[object Null]",je="[object Object]",st="[object Promise]",wt="[object Proxy]",mt="[object RegExp]",vt="[object Set]",Rt="[object String]",dr="[object Symbol]",Gr="[object Undefined]",ct="[object WeakMap]",It="[object WeakSet]",gn="[object ArrayBuffer]",Di="[object DataView]",Gi="[object Float32Array]",yn="[object Float64Array]",ps="[object Int8Array]",fo="[object Int16Array]",Bi="[object Int32Array]",Yi="[object Uint8Array]",ho="[object Uint8ClampedArray]",of="[object Uint16Array]",po="[object Uint32Array]",af=/\b__p \+= '';/g,sd=/\b(__p \+=) '' \+/g,vo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ta=/&(?:amp|lt|gt|quot|#39);/g,La=/[&<>"']/g,lf=RegExp(ta.source),od=RegExp(La.source),Mi=/<%-([\s\S]+?)%>/g,ai=/<%([\s\S]+?)%>/g,Du=/<%=([\s\S]+?)%>/g,rg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ad=/^\w*$/,ld=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,go=/[\\^$.*+?()[\]{}|]/g,Fa=RegExp(go.source),Tl=/^\s+/,Il=/\s/,ng=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ig=/\{\n\/\* \[wrapped with (.+)\] \*/,sg=/,? & /,ud=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,og=/[()=,{}\[\]\/\s]/,ag=/\\(\\)?/g,cd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fd=/\w*$/,ja=/^[-+]0x[0-9a-f]+$/i,hd=/^0b[01]+$/i,uf=/^\[object .+?Constructor\]$/,cf=/^0o[0-7]+$/i,Bu=/^(?:0|[1-9]\d*)$/,dd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mu=/($^)/,Ha=/['\n\r\u2028\u2029\\]/g,Ms="\\ud800-\\udfff",ff="\\u0300-\\u036f",ra="\\ufe20-\\ufe2f",pd="\\u20d0-\\u20ff",Al=ff+ra+pd,za="\\u2700-\\u27bf",vd="a-z\\xdf-\\xf6\\xf8-\\xff",lg="\\xac\\xb1\\xd7\\xf7",Lu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gd="\\u2000-\\u206f",hf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",ue="\\ufe0e\\ufe0f",re=lg+Lu+gd+hf,$e="['’]",Se="["+Ms+"]",be="["+re+"]",Le="["+Al+"]",Ye="\\d+",Je="["+za+"]",et="["+vd+"]",ot="[^"+Ms+re+Ye+za+vd+Y+"]",xt="\\ud83c[\\udffb-\\udfff]",Lt="(?:"+Le+"|"+xt+")",mr="[^"+Ms+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Yr="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="["+Y+"]",cn="\\u200d",Li="(?:"+et+"|"+ot+")",Ol="(?:"+Cr+"|"+ot+")",yd="(?:"+$e+"(?:d|ll|m|re|s|t|ve))?",yo="(?:"+$e+"(?:D|LL|M|RE|S|T|VE))?",md=Lt+"?",Fu="["+ue+"]?",bd="(?:"+cn+"(?:"+[mr,lr,Yr].join("|")+")"+Fu+md+")*",df="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ug=Fu+md+bd,s2="(?:"+[Je,lr,Yr].join("|")+")"+ug,o2="(?:"+[mr+Le+"?",Le,lr,Yr,Se].join("|")+")",cg=RegExp($e,"g"),a2=RegExp(Le,"g"),fg=RegExp(xt+"(?="+xt+")|"+o2+ug,"g"),l2=RegExp([Cr+"?"+et+"+"+yd+"(?="+[be,Cr,"$"].join("|")+")",Ol+"+"+yo+"(?="+[be,Cr+Li,"$"].join("|")+")",Cr+"?"+Li+"+"+yd,Cr+"+"+yo,i2,df,Ye,s2].join("|"),"g"),u2=RegExp("["+cn+Ms+Al+ue+"]"),c2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,f2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],h2=-1,Hr={};Hr[Gi]=Hr[yn]=Hr[ps]=Hr[fo]=Hr[Bi]=Hr[Yi]=Hr[ho]=Hr[of]=Hr[po]=!0,Hr[ge]=Hr[Te]=Hr[gn]=Hr[$]=Hr[Di]=Hr[S]=Hr[F]=Hr[H]=Hr[le]=Hr[ye]=Hr[je]=Hr[mt]=Hr[vt]=Hr[Rt]=Hr[ct]=!1;var Pr={};Pr[ge]=Pr[Te]=Pr[gn]=Pr[Di]=Pr[$]=Pr[S]=Pr[Gi]=Pr[yn]=Pr[ps]=Pr[fo]=Pr[Bi]=Pr[le]=Pr[ye]=Pr[je]=Pr[mt]=Pr[vt]=Pr[Rt]=Pr[dr]=Pr[Yi]=Pr[ho]=Pr[of]=Pr[po]=!0,Pr[F]=Pr[H]=Pr[ct]=!1;var qb={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},hg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dg=parseFloat,d2=parseInt,Gb=typeof Cn=="object"&&Cn&&Cn.Object===Object&&Cn,p2=typeof self=="object"&&self&&self.Object===Object&&self,fn=Gb||p2||Function("return this")(),wd=r&&!r.nodeType&&r,na=wd&&!0&&e&&!e.nodeType&&e,Yb=na&&na.exports===wd,pg=Yb&&Gb.process,vs=function(){try{var ee=na&&na.require&&na.require("util").types;return ee||pg&&pg.binding&&pg.binding("util")}catch{}}(),m=vs&&vs.isArrayBuffer,k=vs&&vs.isDate,P=vs&&vs.isMap,D=vs&&vs.isRegExp,z=vs&&vs.isSet,U=vs&&vs.isTypedArray;function K(ee,pe,fe){switch(fe.length){case 0:return ee.call(pe);case 1:return ee.call(pe,fe[0]);case 2:return ee.call(pe,fe[0],fe[1]);case 3:return ee.call(pe,fe[0],fe[1],fe[2])}return ee.apply(pe,fe)}function ce(ee,pe,fe,Be){for(var We=-1,$t=ee==null?0:ee.length;++We<$t;){var _t=ee[We];pe(Be,_t,fe(_t),ee)}return Be}function se(ee,pe){for(var fe=-1,Be=ee==null?0:ee.length;++fe<Be&&pe(ee[fe],fe,ee)!==!1;);return ee}function Ee(ee,pe){for(var fe=ee==null?0:ee.length;fe--&&pe(ee[fe],fe,ee)!==!1;);return ee}function Pe(ee,pe){for(var fe=-1,Be=ee==null?0:ee.length;++fe<Be;)if(!pe(ee[fe],fe,ee))return!1;return!0}function De(ee,pe){for(var fe=-1,Be=ee==null?0:ee.length,We=0,$t=[];++fe<Be;){var _t=ee[fe];pe(_t,fe,ee)&&($t[We++]=_t)}return $t}function Ae(ee,pe){var fe=ee==null?0:ee.length;return!!fe&&Mr(ee,pe,0)>-1}function Xe(ee,pe,fe){for(var Be=-1,We=ee==null?0:ee.length;++Be<We;)if(fe(pe,ee[Be]))return!0;return!1}function bt(ee,pe){for(var fe=-1,Be=ee==null?0:ee.length,We=Array(Be);++fe<Be;)We[fe]=pe(ee[fe],fe,ee);return We}function Yt(ee,pe){for(var fe=-1,Be=pe.length,We=ee.length;++fe<Be;)ee[We+fe]=pe[fe];return ee}function Gt(ee,pe,fe,Be){var We=-1,$t=ee==null?0:ee.length;for(Be&&$t&&(fe=ee[++We]);++We<$t;)fe=pe(fe,ee[We],We,ee);return fe}function Zn(ee,pe,fe,Be){var We=ee==null?0:ee.length;for(Be&&We&&(fe=ee[--We]);We--;)fe=pe(fe,ee[We],We,ee);return fe}function hn(ee,pe){for(var fe=-1,Be=ee==null?0:ee.length;++fe<Be;)if(pe(ee[fe],fe,ee))return!0;return!1}var mo=Cl("length");function bo(ee){return ee.split("")}function pr(ee){return ee.match(ud)||[]}function Ua(ee,pe,fe){var Be;return fe(ee,function(We,$t,_t){if(pe(We,$t,_t))return Be=$t,!1}),Be}function vr(ee,pe,fe,Be){for(var We=ee.length,$t=fe+(Be?1:-1);Be?$t--:++$t<We;)if(pe(ee[$t],$t,ee))return $t;return-1}function Mr(ee,pe,fe){return pe===pe?y2(ee,pe,fe):vr(ee,$d,fe)}function pf(ee,pe,fe,Be){for(var We=fe-1,$t=ee.length;++We<$t;)if(Be(ee[We],pe))return We;return-1}function $d(ee){return ee!==ee}function Ls(ee,pe){var fe=ee==null?0:ee.length;return fe?Fi(ee,pe)/fe:Ce}function Cl(ee){return function(pe){return pe==null?t:pe[ee]}}function gs(ee){return function(pe){return ee==null?t:ee[pe]}}function ia(ee,pe,fe,Be,We){return We(ee,function($t,_t,yt){fe=Be?(Be=!1,$t):pe(fe,$t,_t,yt)}),fe}function Wa(ee,pe){var fe=ee.length;for(ee.sort(pe);fe--;)ee[fe]=ee[fe].value;return ee}function Fi(ee,pe){for(var fe,Be=-1,We=ee.length;++Be<We;){var $t=pe(ee[Be]);$t!==t&&(fe=fe===t?$t:fe+$t)}return fe}function vf(ee,pe){for(var fe=-1,Be=Array(ee);++fe<ee;)Be[fe]=pe(fe);return Be}function sa(ee,pe){return bt(pe,function(fe){return[fe,ee[fe]]})}function wo(ee){return ee&&ee.slice(0,Xb(ee)+1).replace(Tl,"")}function Zi(ee){return function(pe){return ee(pe)}}function vg(ee,pe){return bt(pe,function(fe){return ee[fe]})}function gf(ee,pe){return ee.has(pe)}function Ar(ee,pe){for(var fe=-1,Be=ee.length;++fe<Be&&Mr(pe,ee[fe],0)>-1;);return fe}function yf(ee,pe){for(var fe=ee.length;fe--&&Mr(pe,ee[fe],0)>-1;);return fe}function Fs(ee,pe){for(var fe=ee.length,Be=0;fe--;)ee[fe]===pe&&++Be;return Be}var ju=gs(qb),v2=gs(hg);function g2(ee){return"\\"+Vb[ee]}function Zb(ee,pe){return ee==null?t:ee[pe]}function ys(ee){return u2.test(ee)}function gg(ee){return c2.test(ee)}function qa(ee){for(var pe,fe=[];!(pe=ee.next()).done;)fe.push(pe.value);return fe}function _d(ee){var pe=-1,fe=Array(ee.size);return ee.forEach(function(Be,We){fe[++pe]=[We,Be]}),fe}function mf(ee,pe){return function(fe){return ee(pe(fe))}}function js(ee,pe){for(var fe=-1,Be=ee.length,We=0,$t=[];++fe<Be;){var _t=ee[fe];(_t===pe||_t===f)&&(ee[fe]=f,$t[We++]=fe)}return $t}function Pl(ee){var pe=-1,fe=Array(ee.size);return ee.forEach(function(Be){fe[++pe]=Be}),fe}function yg(ee){var pe=-1,fe=Array(ee.size);return ee.forEach(function(Be){fe[++pe]=[Be,Be]}),fe}function y2(ee,pe,fe){for(var Be=fe-1,We=ee.length;++Be<We;)if(ee[Be]===pe)return Be;return-1}function xd(ee,pe,fe){for(var Be=fe+1;Be--;)if(ee[Be]===pe)return Be;return Be}function Ka(ee){return ys(ee)?Jb(ee):mo(ee)}function Xi(ee){return ys(ee)?ne(ee):bo(ee)}function Xb(ee){for(var pe=ee.length;pe--&&Il.test(ee.charAt(pe)););return pe}var mg=gs(Kb);function Jb(ee){for(var pe=fg.lastIndex=0;fg.test(ee);)++pe;return pe}function ne(ee){return ee.match(fg)||[]}function me(ee){return ee.match(l2)||[]}var Ie=function ee(pe){pe=pe==null?fn:Oe.defaults(fn.Object(),pe,Oe.pick(fn,f2));var fe=pe.Array,Be=pe.Date,We=pe.Error,$t=pe.Function,_t=pe.Math,yt=pe.Object,tr=pe.RegExp,Dt=pe.String,ur=pe.TypeError,Xn=fe.prototype,li=$t.prototype,Jn=yt.prototype,Ji=pe["__core-js_shared__"],oa=li.toString,qt=Jn.hasOwnProperty,Yee=0,HN=function(){var h=/[^.]+$/.exec(Ji&&Ji.keys&&Ji.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Qb=Jn.toString,Zee=oa.call(yt),Xee=fn._,Jee=tr("^"+oa.call(qt).replace(go,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e0=Yb?pe.Buffer:t,Hu=pe.Symbol,t0=pe.Uint8Array,zN=e0?e0.allocUnsafe:t,r0=mf(yt.getPrototypeOf,yt),UN=yt.create,WN=Jn.propertyIsEnumerable,n0=Xn.splice,qN=Hu?Hu.isConcatSpreadable:t,bg=Hu?Hu.iterator:t,bf=Hu?Hu.toStringTag:t,i0=function(){try{var h=Ef(yt,"defineProperty");return h({},"",{}),h}catch{}}(),Qee=pe.clearTimeout!==fn.clearTimeout&&pe.clearTimeout,ete=Be&&Be.now!==fn.Date.now&&Be.now,tte=pe.setTimeout!==fn.setTimeout&&pe.setTimeout,s0=_t.ceil,o0=_t.floor,m2=yt.getOwnPropertySymbols,rte=e0?e0.isBuffer:t,KN=pe.isFinite,nte=Xn.join,ite=mf(yt.keys,yt),Qn=_t.max,ji=_t.min,ste=Be.now,ote=pe.parseInt,VN=_t.random,ate=Xn.reverse,b2=Ef(pe,"DataView"),wg=Ef(pe,"Map"),w2=Ef(pe,"Promise"),Ed=Ef(pe,"Set"),$g=Ef(pe,"WeakMap"),_g=Ef(yt,"create"),a0=$g&&new $g,Sd={},lte=Sf(b2),ute=Sf(wg),cte=Sf(w2),fte=Sf(Ed),hte=Sf($g),l0=Hu?Hu.prototype:t,xg=l0?l0.valueOf:t,GN=l0?l0.toString:t;function G(h){if(mn(h)&&!Zt(h)&&!(h instanceof br)){if(h instanceof $o)return h;if(qt.call(h,"__wrapped__"))return YR(h)}return new $o(h)}var kd=function(){function h(){}return function(d){if(!dn(d))return{};if(UN)return UN(d);h.prototype=d;var E=new h;return h.prototype=t,E}}();function u0(){}function $o(h,d){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=t}G.templateSettings={escape:Mi,evaluate:ai,interpolate:Du,variable:"",imports:{_:G}},G.prototype=u0.prototype,G.prototype.constructor=G,$o.prototype=kd(u0.prototype),$o.prototype.constructor=$o;function br(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function dte(){var h=new br(this.__wrapped__);return h.__actions__=ms(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=ms(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=ms(this.__views__),h}function pte(){if(this.__filtered__){var h=new br(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function vte(){var h=this.__wrapped__.value(),d=this.__dir__,E=Zt(h),R=d<0,W=E?h.length:0,J=Tre(0,W,this.__views__),ae=J.start,ve=J.end,ke=ve-ae,Ke=R?ve:ae-1,Ve=this.__iteratees__,Ze=Ve.length,gt=0,At=ji(ke,this.__takeCount__);if(!E||!R&&W==ke&&At==ke)return mR(h,this.__actions__);var zt=[];e:for(;ke--&&gt<At;){Ke+=d;for(var nr=-1,Ut=h[Ke];++nr<Ze;){var yr=Ve[nr],wr=yr.iteratee,Us=yr.type,ts=wr(Ut);if(Us==j)Ut=ts;else if(!ts){if(Us==X)continue e;break e}}zt[gt++]=Ut}return zt}br.prototype=kd(u0.prototype),br.prototype.constructor=br;function wf(h){var d=-1,E=h==null?0:h.length;for(this.clear();++d<E;){var R=h[d];this.set(R[0],R[1])}}function gte(){this.__data__=_g?_g(null):{},this.size=0}function yte(h){var d=this.has(h)&&delete this.__data__[h];return this.size-=d?1:0,d}function mte(h){var d=this.__data__;if(_g){var E=d[h];return E===l?t:E}return qt.call(d,h)?d[h]:t}function bte(h){var d=this.__data__;return _g?d[h]!==t:qt.call(d,h)}function wte(h,d){var E=this.__data__;return this.size+=this.has(h)?0:1,E[h]=_g&&d===t?l:d,this}wf.prototype.clear=gte,wf.prototype.delete=yte,wf.prototype.get=mte,wf.prototype.has=bte,wf.prototype.set=wte;function Nl(h){var d=-1,E=h==null?0:h.length;for(this.clear();++d<E;){var R=h[d];this.set(R[0],R[1])}}function $te(){this.__data__=[],this.size=0}function _te(h){var d=this.__data__,E=c0(d,h);if(E<0)return!1;var R=d.length-1;return E==R?d.pop():n0.call(d,E,1),--this.size,!0}function xte(h){var d=this.__data__,E=c0(d,h);return E<0?t:d[E][1]}function Ete(h){return c0(this.__data__,h)>-1}function Ste(h,d){var E=this.__data__,R=c0(E,h);return R<0?(++this.size,E.push([h,d])):E[R][1]=d,this}Nl.prototype.clear=$te,Nl.prototype.delete=_te,Nl.prototype.get=xte,Nl.prototype.has=Ete,Nl.prototype.set=Ste;function Rl(h){var d=-1,E=h==null?0:h.length;for(this.clear();++d<E;){var R=h[d];this.set(R[0],R[1])}}function kte(){this.size=0,this.__data__={hash:new wf,map:new(wg||Nl),string:new wf}}function Tte(h){var d=_0(this,h).delete(h);return this.size-=d?1:0,d}function Ite(h){return _0(this,h).get(h)}function Ate(h){return _0(this,h).has(h)}function Ote(h,d){var E=_0(this,h),R=E.size;return E.set(h,d),this.size+=E.size==R?0:1,this}Rl.prototype.clear=kte,Rl.prototype.delete=Tte,Rl.prototype.get=Ite,Rl.prototype.has=Ate,Rl.prototype.set=Ote;function $f(h){var d=-1,E=h==null?0:h.length;for(this.__data__=new Rl;++d<E;)this.add(h[d])}function Cte(h){return this.__data__.set(h,l),this}function Pte(h){return this.__data__.has(h)}$f.prototype.add=$f.prototype.push=Cte,$f.prototype.has=Pte;function aa(h){var d=this.__data__=new Nl(h);this.size=d.size}function Nte(){this.__data__=new Nl,this.size=0}function Rte(h){var d=this.__data__,E=d.delete(h);return this.size=d.size,E}function Dte(h){return this.__data__.get(h)}function Bte(h){return this.__data__.has(h)}function Mte(h,d){var E=this.__data__;if(E instanceof Nl){var R=E.__data__;if(!wg||R.length<i-1)return R.push([h,d]),this.size=++E.size,this;E=this.__data__=new Rl(R)}return E.set(h,d),this.size=E.size,this}aa.prototype.clear=Nte,aa.prototype.delete=Rte,aa.prototype.get=Dte,aa.prototype.has=Bte,aa.prototype.set=Mte;function YN(h,d){var E=Zt(h),R=!E&&kf(h),W=!E&&!R&&Ku(h),J=!E&&!R&&!W&&Od(h),ae=E||R||W||J,ve=ae?vf(h.length,Dt):[],ke=ve.length;for(var Ke in h)(d||qt.call(h,Ke))&&!(ae&&(Ke=="length"||W&&(Ke=="offset"||Ke=="parent")||J&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Ll(Ke,ke)))&&ve.push(Ke);return ve}function ZN(h){var d=h.length;return d?h[C2(0,d-1)]:t}function Lte(h,d){return x0(ms(h),_f(d,0,h.length))}function Fte(h){return x0(ms(h))}function $2(h,d,E){(E!==t&&!la(h[d],E)||E===t&&!(d in h))&&Dl(h,d,E)}function Eg(h,d,E){var R=h[d];(!(qt.call(h,d)&&la(R,E))||E===t&&!(d in h))&&Dl(h,d,E)}function c0(h,d){for(var E=h.length;E--;)if(la(h[E][0],d))return E;return-1}function jte(h,d,E,R){return zu(h,function(W,J,ae){d(R,W,E(W),ae)}),R}function XN(h,d){return h&&Ga(d,ui(d),h)}function Hte(h,d){return h&&Ga(d,ws(d),h)}function Dl(h,d,E){d=="__proto__"&&i0?i0(h,d,{configurable:!0,enumerable:!0,value:E,writable:!0}):h[d]=E}function _2(h,d){for(var E=-1,R=d.length,W=fe(R),J=h==null;++E<R;)W[E]=J?t:rE(h,d[E]);return W}function _f(h,d,E){return h===h&&(E!==t&&(h=h<=E?h:E),d!==t&&(h=h>=d?h:d)),h}function _o(h,d,E,R,W,J){var ae,ve=d&c,ke=d&p,Ke=d&y;if(E&&(ae=W?E(h,R,W,J):E(h)),ae!==t)return ae;if(!dn(h))return h;var Ve=Zt(h);if(Ve){if(ae=Are(h),!ve)return ms(h,ae)}else{var Ze=Hi(h),gt=Ze==H||Ze==V;if(Ku(h))return $R(h,ve);if(Ze==je||Ze==ge||gt&&!W){if(ae=ke||gt?{}:jR(h),!ve)return ke?mre(h,Hte(ae,h)):yre(h,XN(ae,h))}else{if(!Pr[Ze])return W?h:{};ae=Ore(h,Ze,ve)}}J||(J=new aa);var At=J.get(h);if(At)return At;J.set(h,ae),vD(h)?h.forEach(function(Ut){ae.add(_o(Ut,d,E,Ut,h,J))}):dD(h)&&h.forEach(function(Ut,yr){ae.set(yr,_o(Ut,d,E,yr,h,J))});var zt=Ke?ke?z2:H2:ke?ws:ui,nr=Ve?t:zt(h);return se(nr||h,function(Ut,yr){nr&&(yr=Ut,Ut=h[yr]),Eg(ae,yr,_o(Ut,d,E,yr,h,J))}),ae}function zte(h){var d=ui(h);return function(E){return JN(E,h,d)}}function JN(h,d,E){var R=E.length;if(h==null)return!R;for(h=yt(h);R--;){var W=E[R],J=d[W],ae=h[W];if(ae===t&&!(W in h)||!J(ae))return!1}return!0}function QN(h,d,E){if(typeof h!="function")throw new ur(o);return Cg(function(){h.apply(t,E)},d)}function Sg(h,d,E,R){var W=-1,J=Ae,ae=!0,ve=h.length,ke=[],Ke=d.length;if(!ve)return ke;E&&(d=bt(d,Zi(E))),R?(J=Xe,ae=!1):d.length>=i&&(J=gf,ae=!1,d=new $f(d));e:for(;++W<ve;){var Ve=h[W],Ze=E==null?Ve:E(Ve);if(Ve=R||Ve!==0?Ve:0,ae&&Ze===Ze){for(var gt=Ke;gt--;)if(d[gt]===Ze)continue e;ke.push(Ve)}else J(d,Ze,R)||ke.push(Ve)}return ke}var zu=kR(Va),eR=kR(E2,!0);function Ute(h,d){var E=!0;return zu(h,function(R,W,J){return E=!!d(R,W,J),E}),E}function f0(h,d,E){for(var R=-1,W=h.length;++R<W;){var J=h[R],ae=d(J);if(ae!=null&&(ve===t?ae===ae&&!zs(ae):E(ae,ve)))var ve=ae,ke=J}return ke}function Wte(h,d,E,R){var W=h.length;for(E=rr(E),E<0&&(E=-E>W?0:W+E),R=R===t||R>W?W:rr(R),R<0&&(R+=W),R=E>R?0:yD(R);E<R;)h[E++]=d;return h}function tR(h,d){var E=[];return zu(h,function(R,W,J){d(R,W,J)&&E.push(R)}),E}function Si(h,d,E,R,W){var J=-1,ae=h.length;for(E||(E=Pre),W||(W=[]);++J<ae;){var ve=h[J];d>0&&E(ve)?d>1?Si(ve,d-1,E,R,W):Yt(W,ve):R||(W[W.length]=ve)}return W}var x2=TR(),rR=TR(!0);function Va(h,d){return h&&x2(h,d,ui)}function E2(h,d){return h&&rR(h,d,ui)}function h0(h,d){return De(d,function(E){return Fl(h[E])})}function xf(h,d){d=Wu(d,h);for(var E=0,R=d.length;h!=null&&E<R;)h=h[Ya(d[E++])];return E&&E==R?h:t}function nR(h,d,E){var R=d(h);return Zt(h)?R:Yt(R,E(h))}function Qi(h){return h==null?h===t?Gr:Ue:bf&&bf in yt(h)?kre(h):Fre(h)}function S2(h,d){return h>d}function qte(h,d){return h!=null&&qt.call(h,d)}function Kte(h,d){return h!=null&&d in yt(h)}function Vte(h,d,E){return h>=ji(d,E)&&h<Qn(d,E)}function k2(h,d,E){for(var R=E?Xe:Ae,W=h[0].length,J=h.length,ae=J,ve=fe(J),ke=1/0,Ke=[];ae--;){var Ve=h[ae];ae&&d&&(Ve=bt(Ve,Zi(d))),ke=ji(Ve.length,ke),ve[ae]=!E&&(d||W>=120&&Ve.length>=120)?new $f(ae&&Ve):t}Ve=h[0];var Ze=-1,gt=ve[0];e:for(;++Ze<W&&Ke.length<ke;){var At=Ve[Ze],zt=d?d(At):At;if(At=E||At!==0?At:0,!(gt?gf(gt,zt):R(Ke,zt,E))){for(ae=J;--ae;){var nr=ve[ae];if(!(nr?gf(nr,zt):R(h[ae],zt,E)))continue e}gt&&gt.push(zt),Ke.push(At)}}return Ke}function Gte(h,d,E,R){return Va(h,function(W,J,ae){d(R,E(W),J,ae)}),R}function kg(h,d,E){d=Wu(d,h),h=WR(h,d);var R=h==null?h:h[Ya(Eo(d))];return R==null?t:K(R,h,E)}function iR(h){return mn(h)&&Qi(h)==ge}function Yte(h){return mn(h)&&Qi(h)==gn}function Zte(h){return mn(h)&&Qi(h)==S}function Tg(h,d,E,R,W){return h===d?!0:h==null||d==null||!mn(h)&&!mn(d)?h!==h&&d!==d:Xte(h,d,E,R,Tg,W)}function Xte(h,d,E,R,W,J){var ae=Zt(h),ve=Zt(d),ke=ae?Te:Hi(h),Ke=ve?Te:Hi(d);ke=ke==ge?je:ke,Ke=Ke==ge?je:Ke;var Ve=ke==je,Ze=Ke==je,gt=ke==Ke;if(gt&&Ku(h)){if(!Ku(d))return!1;ae=!0,Ve=!1}if(gt&&!Ve)return J||(J=new aa),ae||Od(h)?MR(h,d,E,R,W,J):Ere(h,d,ke,E,R,W,J);if(!(E&w)){var At=Ve&&qt.call(h,"__wrapped__"),zt=Ze&&qt.call(d,"__wrapped__");if(At||zt){var nr=At?h.value():h,Ut=zt?d.value():d;return J||(J=new aa),W(nr,Ut,E,R,J)}}return gt?(J||(J=new aa),Sre(h,d,E,R,W,J)):!1}function Jte(h){return mn(h)&&Hi(h)==le}function T2(h,d,E,R){var W=E.length,J=W,ae=!R;if(h==null)return!J;for(h=yt(h);W--;){var ve=E[W];if(ae&&ve[2]?ve[1]!==h[ve[0]]:!(ve[0]in h))return!1}for(;++W<J;){ve=E[W];var ke=ve[0],Ke=h[ke],Ve=ve[1];if(ae&&ve[2]){if(Ke===t&&!(ke in h))return!1}else{var Ze=new aa;if(R)var gt=R(Ke,Ve,ke,h,d,Ze);if(!(gt===t?Tg(Ve,Ke,w|b,R,Ze):gt))return!1}}return!0}function sR(h){if(!dn(h)||Rre(h))return!1;var d=Fl(h)?Jee:uf;return d.test(Sf(h))}function Qte(h){return mn(h)&&Qi(h)==mt}function ere(h){return mn(h)&&Hi(h)==vt}function tre(h){return mn(h)&&A0(h.length)&&!!Hr[Qi(h)]}function oR(h){return typeof h=="function"?h:h==null?$s:typeof h=="object"?Zt(h)?uR(h[0],h[1]):lR(h):ID(h)}function I2(h){if(!Og(h))return ite(h);var d=[];for(var E in yt(h))qt.call(h,E)&&E!="constructor"&&d.push(E);return d}function rre(h){if(!dn(h))return Lre(h);var d=Og(h),E=[];for(var R in h)R=="constructor"&&(d||!qt.call(h,R))||E.push(R);return E}function A2(h,d){return h<d}function aR(h,d){var E=-1,R=bs(h)?fe(h.length):[];return zu(h,function(W,J,ae){R[++E]=d(W,J,ae)}),R}function lR(h){var d=W2(h);return d.length==1&&d[0][2]?zR(d[0][0],d[0][1]):function(E){return E===h||T2(E,h,d)}}function uR(h,d){return K2(h)&&HR(d)?zR(Ya(h),d):function(E){var R=rE(E,h);return R===t&&R===d?nE(E,h):Tg(d,R,w|b)}}function d0(h,d,E,R,W){h!==d&&x2(d,function(J,ae){if(W||(W=new aa),dn(J))nre(h,d,ae,E,d0,R,W);else{var ve=R?R(G2(h,ae),J,ae+"",h,d,W):t;ve===t&&(ve=J),$2(h,ae,ve)}},ws)}function nre(h,d,E,R,W,J,ae){var ve=G2(h,E),ke=G2(d,E),Ke=ae.get(ke);if(Ke){$2(h,E,Ke);return}var Ve=J?J(ve,ke,E+"",h,d,ae):t,Ze=Ve===t;if(Ze){var gt=Zt(ke),At=!gt&&Ku(ke),zt=!gt&&!At&&Od(ke);Ve=ke,gt||At||zt?Zt(ve)?Ve=ve:In(ve)?Ve=ms(ve):At?(Ze=!1,Ve=$R(ke,!0)):zt?(Ze=!1,Ve=_R(ke,!0)):Ve=[]:Pg(ke)||kf(ke)?(Ve=ve,kf(ve)?Ve=mD(ve):(!dn(ve)||Fl(ve))&&(Ve=jR(ke))):Ze=!1}Ze&&(ae.set(ke,Ve),W(Ve,ke,R,J,ae),ae.delete(ke)),$2(h,E,Ve)}function cR(h,d){var E=h.length;if(E)return d+=d<0?E:0,Ll(d,E)?h[d]:t}function fR(h,d,E){d.length?d=bt(d,function(J){return Zt(J)?function(ae){return xf(ae,J.length===1?J[0]:J)}:J}):d=[$s];var R=-1;d=bt(d,Zi(Ft()));var W=aR(h,function(J,ae,ve){var ke=bt(d,function(Ke){return Ke(J)});return{criteria:ke,index:++R,value:J}});return Wa(W,function(J,ae){return gre(J,ae,E)})}function ire(h,d){return hR(h,d,function(E,R){return nE(h,R)})}function hR(h,d,E){for(var R=-1,W=d.length,J={};++R<W;){var ae=d[R],ve=xf(h,ae);E(ve,ae)&&Ig(J,Wu(ae,h),ve)}return J}function sre(h){return function(d){return xf(d,h)}}function O2(h,d,E,R){var W=R?pf:Mr,J=-1,ae=d.length,ve=h;for(h===d&&(d=ms(d)),E&&(ve=bt(h,Zi(E)));++J<ae;)for(var ke=0,Ke=d[J],Ve=E?E(Ke):Ke;(ke=W(ve,Ve,ke,R))>-1;)ve!==h&&n0.call(ve,ke,1),n0.call(h,ke,1);return h}function dR(h,d){for(var E=h?d.length:0,R=E-1;E--;){var W=d[E];if(E==R||W!==J){var J=W;Ll(W)?n0.call(h,W,1):R2(h,W)}}return h}function C2(h,d){return h+o0(VN()*(d-h+1))}function ore(h,d,E,R){for(var W=-1,J=Qn(s0((d-h)/(E||1)),0),ae=fe(J);J--;)ae[R?J:++W]=h,h+=E;return ae}function P2(h,d){var E="";if(!h||d<1||d>_e)return E;do d%2&&(E+=h),d=o0(d/2),d&&(h+=h);while(d);return E}function cr(h,d){return Y2(UR(h,d,$s),h+"")}function are(h){return ZN(Cd(h))}function lre(h,d){var E=Cd(h);return x0(E,_f(d,0,E.length))}function Ig(h,d,E,R){if(!dn(h))return h;d=Wu(d,h);for(var W=-1,J=d.length,ae=J-1,ve=h;ve!=null&&++W<J;){var ke=Ya(d[W]),Ke=E;if(ke==="__proto__"||ke==="constructor"||ke==="prototype")return h;if(W!=ae){var Ve=ve[ke];Ke=R?R(Ve,ke,ve):t,Ke===t&&(Ke=dn(Ve)?Ve:Ll(d[W+1])?[]:{})}Eg(ve,ke,Ke),ve=ve[ke]}return h}var pR=a0?function(h,d){return a0.set(h,d),h}:$s,ure=i0?function(h,d){return i0(h,"toString",{configurable:!0,enumerable:!1,value:sE(d),writable:!0})}:$s;function cre(h){return x0(Cd(h))}function xo(h,d,E){var R=-1,W=h.length;d<0&&(d=-d>W?0:W+d),E=E>W?W:E,E<0&&(E+=W),W=d>E?0:E-d>>>0,d>>>=0;for(var J=fe(W);++R<W;)J[R]=h[R+d];return J}function fre(h,d){var E;return zu(h,function(R,W,J){return E=d(R,W,J),!E}),!!E}function p0(h,d,E){var R=0,W=h==null?R:h.length;if(typeof d=="number"&&d===d&&W<=it){for(;R<W;){var J=R+W>>>1,ae=h[J];ae!==null&&!zs(ae)&&(E?ae<=d:ae<d)?R=J+1:W=J}return W}return N2(h,d,$s,E)}function N2(h,d,E,R){var W=0,J=h==null?0:h.length;if(J===0)return 0;d=E(d);for(var ae=d!==d,ve=d===null,ke=zs(d),Ke=d===t;W<J;){var Ve=o0((W+J)/2),Ze=E(h[Ve]),gt=Ze!==t,At=Ze===null,zt=Ze===Ze,nr=zs(Ze);if(ae)var Ut=R||zt;else Ke?Ut=zt&&(R||gt):ve?Ut=zt&&gt&&(R||!At):ke?Ut=zt&&gt&&!At&&(R||!nr):At||nr?Ut=!1:Ut=R?Ze<=d:Ze<d;Ut?W=Ve+1:J=Ve}return ji(J,Ge)}function vR(h,d){for(var E=-1,R=h.length,W=0,J=[];++E<R;){var ae=h[E],ve=d?d(ae):ae;if(!E||!la(ve,ke)){var ke=ve;J[W++]=ae===0?0:ae}}return J}function gR(h){return typeof h=="number"?h:zs(h)?Ce:+h}function Hs(h){if(typeof h=="string")return h;if(Zt(h))return bt(h,Hs)+"";if(zs(h))return GN?GN.call(h):"";var d=h+"";return d=="0"&&1/h==-ie?"-0":d}function Uu(h,d,E){var R=-1,W=Ae,J=h.length,ae=!0,ve=[],ke=ve;if(E)ae=!1,W=Xe;else if(J>=i){var Ke=d?null:_re(h);if(Ke)return Pl(Ke);ae=!1,W=gf,ke=new $f}else ke=d?[]:ve;e:for(;++R<J;){var Ve=h[R],Ze=d?d(Ve):Ve;if(Ve=E||Ve!==0?Ve:0,ae&&Ze===Ze){for(var gt=ke.length;gt--;)if(ke[gt]===Ze)continue e;d&&ke.push(Ze),ve.push(Ve)}else W(ke,Ze,E)||(ke!==ve&&ke.push(Ze),ve.push(Ve))}return ve}function R2(h,d){return d=Wu(d,h),h=WR(h,d),h==null||delete h[Ya(Eo(d))]}function yR(h,d,E,R){return Ig(h,d,E(xf(h,d)),R)}function v0(h,d,E,R){for(var W=h.length,J=R?W:-1;(R?J--:++J<W)&&d(h[J],J,h););return E?xo(h,R?0:J,R?J+1:W):xo(h,R?J+1:0,R?W:J)}function mR(h,d){var E=h;return E instanceof br&&(E=E.value()),Gt(d,function(R,W){return W.func.apply(W.thisArg,Yt([R],W.args))},E)}function D2(h,d,E){var R=h.length;if(R<2)return R?Uu(h[0]):[];for(var W=-1,J=fe(R);++W<R;)for(var ae=h[W],ve=-1;++ve<R;)ve!=W&&(J[W]=Sg(J[W]||ae,h[ve],d,E));return Uu(Si(J,1),d,E)}function bR(h,d,E){for(var R=-1,W=h.length,J=d.length,ae={};++R<W;){var ve=R<J?d[R]:t;E(ae,h[R],ve)}return ae}function B2(h){return In(h)?h:[]}function M2(h){return typeof h=="function"?h:$s}function Wu(h,d){return Zt(h)?h:K2(h,d)?[h]:GR(Nr(h))}var hre=cr;function qu(h,d,E){var R=h.length;return E=E===t?R:E,!d&&E>=R?h:xo(h,d,E)}var wR=Qee||function(h){return fn.clearTimeout(h)};function $R(h,d){if(d)return h.slice();var E=h.length,R=zN?zN(E):new h.constructor(E);return h.copy(R),R}function L2(h){var d=new h.constructor(h.byteLength);return new t0(d).set(new t0(h)),d}function dre(h,d){var E=d?L2(h.buffer):h.buffer;return new h.constructor(E,h.byteOffset,h.byteLength)}function pre(h){var d=new h.constructor(h.source,fd.exec(h));return d.lastIndex=h.lastIndex,d}function vre(h){return xg?yt(xg.call(h)):{}}function _R(h,d){var E=d?L2(h.buffer):h.buffer;return new h.constructor(E,h.byteOffset,h.length)}function xR(h,d){if(h!==d){var E=h!==t,R=h===null,W=h===h,J=zs(h),ae=d!==t,ve=d===null,ke=d===d,Ke=zs(d);if(!ve&&!Ke&&!J&&h>d||J&&ae&&ke&&!ve&&!Ke||R&&ae&&ke||!E&&ke||!W)return 1;if(!R&&!J&&!Ke&&h<d||Ke&&E&&W&&!R&&!J||ve&&E&&W||!ae&&W||!ke)return-1}return 0}function gre(h,d,E){for(var R=-1,W=h.criteria,J=d.criteria,ae=W.length,ve=E.length;++R<ae;){var ke=xR(W[R],J[R]);if(ke){if(R>=ve)return ke;var Ke=E[R];return ke*(Ke=="desc"?-1:1)}}return h.index-d.index}function ER(h,d,E,R){for(var W=-1,J=h.length,ae=E.length,ve=-1,ke=d.length,Ke=Qn(J-ae,0),Ve=fe(ke+Ke),Ze=!R;++ve<ke;)Ve[ve]=d[ve];for(;++W<ae;)(Ze||W<J)&&(Ve[E[W]]=h[W]);for(;Ke--;)Ve[ve++]=h[W++];return Ve}function SR(h,d,E,R){for(var W=-1,J=h.length,ae=-1,ve=E.length,ke=-1,Ke=d.length,Ve=Qn(J-ve,0),Ze=fe(Ve+Ke),gt=!R;++W<Ve;)Ze[W]=h[W];for(var At=W;++ke<Ke;)Ze[At+ke]=d[ke];for(;++ae<ve;)(gt||W<J)&&(Ze[At+E[ae]]=h[W++]);return Ze}function ms(h,d){var E=-1,R=h.length;for(d||(d=fe(R));++E<R;)d[E]=h[E];return d}function Ga(h,d,E,R){var W=!E;E||(E={});for(var J=-1,ae=d.length;++J<ae;){var ve=d[J],ke=R?R(E[ve],h[ve],ve,E,h):t;ke===t&&(ke=h[ve]),W?Dl(E,ve,ke):Eg(E,ve,ke)}return E}function yre(h,d){return Ga(h,q2(h),d)}function mre(h,d){return Ga(h,LR(h),d)}function g0(h,d){return function(E,R){var W=Zt(E)?ce:jte,J=d?d():{};return W(E,h,Ft(R,2),J)}}function Td(h){return cr(function(d,E){var R=-1,W=E.length,J=W>1?E[W-1]:t,ae=W>2?E[2]:t;for(J=h.length>3&&typeof J=="function"?(W--,J):t,ae&&es(E[0],E[1],ae)&&(J=W<3?t:J,W=1),d=yt(d);++R<W;){var ve=E[R];ve&&h(d,ve,R,J)}return d})}function kR(h,d){return function(E,R){if(E==null)return E;if(!bs(E))return h(E,R);for(var W=E.length,J=d?W:-1,ae=yt(E);(d?J--:++J<W)&&R(ae[J],J,ae)!==!1;);return E}}function TR(h){return function(d,E,R){for(var W=-1,J=yt(d),ae=R(d),ve=ae.length;ve--;){var ke=ae[h?ve:++W];if(E(J[ke],ke,J)===!1)break}return d}}function bre(h,d,E){var R=d&T,W=Ag(h);function J(){var ae=this&&this!==fn&&this instanceof J?W:h;return ae.apply(R?E:this,arguments)}return J}function IR(h){return function(d){d=Nr(d);var E=ys(d)?Xi(d):t,R=E?E[0]:d.charAt(0),W=E?qu(E,1).join(""):d.slice(1);return R[h]()+W}}function Id(h){return function(d){return Gt(kD(SD(d).replace(cg,"")),h,"")}}function Ag(h){return function(){var d=arguments;switch(d.length){case 0:return new h;case 1:return new h(d[0]);case 2:return new h(d[0],d[1]);case 3:return new h(d[0],d[1],d[2]);case 4:return new h(d[0],d[1],d[2],d[3]);case 5:return new h(d[0],d[1],d[2],d[3],d[4]);case 6:return new h(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new h(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var E=kd(h.prototype),R=h.apply(E,d);return dn(R)?R:E}}function wre(h,d,E){var R=Ag(h);function W(){for(var J=arguments.length,ae=fe(J),ve=J,ke=Ad(W);ve--;)ae[ve]=arguments[ve];var Ke=J<3&&ae[0]!==ke&&ae[J-1]!==ke?[]:js(ae,ke);if(J-=Ke.length,J<E)return NR(h,d,y0,W.placeholder,t,ae,Ke,t,t,E-J);var Ve=this&&this!==fn&&this instanceof W?R:h;return K(Ve,this,ae)}return W}function AR(h){return function(d,E,R){var W=yt(d);if(!bs(d)){var J=Ft(E,3);d=ui(d),E=function(ve){return J(W[ve],ve,W)}}var ae=h(d,E,R);return ae>-1?W[J?d[ae]:ae]:t}}function OR(h){return Ml(function(d){var E=d.length,R=E,W=$o.prototype.thru;for(h&&d.reverse();R--;){var J=d[R];if(typeof J!="function")throw new ur(o);if(W&&!ae&&$0(J)=="wrapper")var ae=new $o([],!0)}for(R=ae?R:E;++R<E;){J=d[R];var ve=$0(J),ke=ve=="wrapper"?U2(J):t;ke&&V2(ke[0])&&ke[1]==(g|x|O|M)&&!ke[4].length&&ke[9]==1?ae=ae[$0(ke[0])].apply(ae,ke[3]):ae=J.length==1&&V2(J)?ae[ve]():ae.thru(J)}return function(){var Ke=arguments,Ve=Ke[0];if(ae&&Ke.length==1&&Zt(Ve))return ae.plant(Ve).value();for(var Ze=0,gt=E?d[Ze].apply(this,Ke):Ve;++Ze<E;)gt=d[Ze].call(this,gt);return gt}})}function y0(h,d,E,R,W,J,ae,ve,ke,Ke){var Ve=d&g,Ze=d&T,gt=d&_,At=d&(x|I),zt=d&B,nr=gt?t:Ag(h);function Ut(){for(var yr=arguments.length,wr=fe(yr),Us=yr;Us--;)wr[Us]=arguments[Us];if(At)var ts=Ad(Ut),Ws=Fs(wr,ts);if(R&&(wr=ER(wr,R,W,At)),J&&(wr=SR(wr,J,ae,At)),yr-=Ws,At&&yr<Ke){var An=js(wr,ts);return NR(h,d,y0,Ut.placeholder,E,wr,An,ve,ke,Ke-yr)}var ua=Ze?E:this,Hl=gt?ua[h]:h;return yr=wr.length,ve?wr=jre(wr,ve):zt&&yr>1&&wr.reverse(),Ve&&ke<yr&&(wr.length=ke),this&&this!==fn&&this instanceof Ut&&(Hl=nr||Ag(Hl)),Hl.apply(ua,wr)}return Ut}function CR(h,d){return function(E,R){return Gte(E,h,d(R),{})}}function m0(h,d){return function(E,R){var W;if(E===t&&R===t)return d;if(E!==t&&(W=E),R!==t){if(W===t)return R;typeof E=="string"||typeof R=="string"?(E=Hs(E),R=Hs(R)):(E=gR(E),R=gR(R)),W=h(E,R)}return W}}function F2(h){return Ml(function(d){return d=bt(d,Zi(Ft())),cr(function(E){var R=this;return h(d,function(W){return K(W,R,E)})})})}function b0(h,d){d=d===t?" ":Hs(d);var E=d.length;if(E<2)return E?P2(d,h):d;var R=P2(d,s0(h/Ka(d)));return ys(d)?qu(Xi(R),0,h).join(""):R.slice(0,h)}function $re(h,d,E,R){var W=d&T,J=Ag(h);function ae(){for(var ve=-1,ke=arguments.length,Ke=-1,Ve=R.length,Ze=fe(Ve+ke),gt=this&&this!==fn&&this instanceof ae?J:h;++Ke<Ve;)Ze[Ke]=R[Ke];for(;ke--;)Ze[Ke++]=arguments[++ve];return K(gt,W?E:this,Ze)}return ae}function PR(h){return function(d,E,R){return R&&typeof R!="number"&&es(d,E,R)&&(E=R=t),d=jl(d),E===t?(E=d,d=0):E=jl(E),R=R===t?d<E?1:-1:jl(R),ore(d,E,R,h)}}function w0(h){return function(d,E){return typeof d=="string"&&typeof E=="string"||(d=So(d),E=So(E)),h(d,E)}}function NR(h,d,E,R,W,J,ae,ve,ke,Ke){var Ve=d&x,Ze=Ve?ae:t,gt=Ve?t:ae,At=Ve?J:t,zt=Ve?t:J;d|=Ve?O:C,d&=~(Ve?C:O),d&A||(d&=~(T|_));var nr=[h,d,W,At,Ze,zt,gt,ve,ke,Ke],Ut=E.apply(t,nr);return V2(h)&&qR(Ut,nr),Ut.placeholder=R,KR(Ut,h,d)}function j2(h){var d=_t[h];return function(E,R){if(E=So(E),R=R==null?0:ji(rr(R),292),R&&KN(E)){var W=(Nr(E)+"e").split("e"),J=d(W[0]+"e"+(+W[1]+R));return W=(Nr(J)+"e").split("e"),+(W[0]+"e"+(+W[1]-R))}return d(E)}}var _re=Ed&&1/Pl(new Ed([,-0]))[1]==ie?function(h){return new Ed(h)}:lE;function RR(h){return function(d){var E=Hi(d);return E==le?_d(d):E==vt?yg(d):sa(d,h(d))}}function Bl(h,d,E,R,W,J,ae,ve){var ke=d&_;if(!ke&&typeof h!="function")throw new ur(o);var Ke=R?R.length:0;if(Ke||(d&=~(O|C),R=W=t),ae=ae===t?ae:Qn(rr(ae),0),ve=ve===t?ve:rr(ve),Ke-=W?W.length:0,d&C){var Ve=R,Ze=W;R=W=t}var gt=ke?t:U2(h),At=[h,d,E,R,W,Ve,Ze,J,ae,ve];if(gt&&Mre(At,gt),h=At[0],d=At[1],E=At[2],R=At[3],W=At[4],ve=At[9]=At[9]===t?ke?0:h.length:Qn(At[9]-Ke,0),!ve&&d&(x|I)&&(d&=~(x|I)),!d||d==T)var zt=bre(h,d,E);else d==x||d==I?zt=wre(h,d,ve):(d==O||d==(T|O))&&!W.length?zt=$re(h,d,E,R):zt=y0.apply(t,At);var nr=gt?pR:qR;return KR(nr(zt,At),h,d)}function DR(h,d,E,R){return h===t||la(h,Jn[E])&&!qt.call(R,E)?d:h}function BR(h,d,E,R,W,J){return dn(h)&&dn(d)&&(J.set(d,h),d0(h,d,t,BR,J),J.delete(d)),h}function xre(h){return Pg(h)?t:h}function MR(h,d,E,R,W,J){var ae=E&w,ve=h.length,ke=d.length;if(ve!=ke&&!(ae&&ke>ve))return!1;var Ke=J.get(h),Ve=J.get(d);if(Ke&&Ve)return Ke==d&&Ve==h;var Ze=-1,gt=!0,At=E&b?new $f:t;for(J.set(h,d),J.set(d,h);++Ze<ve;){var zt=h[Ze],nr=d[Ze];if(R)var Ut=ae?R(nr,zt,Ze,d,h,J):R(zt,nr,Ze,h,d,J);if(Ut!==t){if(Ut)continue;gt=!1;break}if(At){if(!hn(d,function(yr,wr){if(!gf(At,wr)&&(zt===yr||W(zt,yr,E,R,J)))return At.push(wr)})){gt=!1;break}}else if(!(zt===nr||W(zt,nr,E,R,J))){gt=!1;break}}return J.delete(h),J.delete(d),gt}function Ere(h,d,E,R,W,J,ae){switch(E){case Di:if(h.byteLength!=d.byteLength||h.byteOffset!=d.byteOffset)return!1;h=h.buffer,d=d.buffer;case gn:return!(h.byteLength!=d.byteLength||!J(new t0(h),new t0(d)));case $:case S:case ye:return la(+h,+d);case F:return h.name==d.name&&h.message==d.message;case mt:case Rt:return h==d+"";case le:var ve=_d;case vt:var ke=R&w;if(ve||(ve=Pl),h.size!=d.size&&!ke)return!1;var Ke=ae.get(h);if(Ke)return Ke==d;R|=b,ae.set(h,d);var Ve=MR(ve(h),ve(d),R,W,J,ae);return ae.delete(h),Ve;case dr:if(xg)return xg.call(h)==xg.call(d)}return!1}function Sre(h,d,E,R,W,J){var ae=E&w,ve=H2(h),ke=ve.length,Ke=H2(d),Ve=Ke.length;if(ke!=Ve&&!ae)return!1;for(var Ze=ke;Ze--;){var gt=ve[Ze];if(!(ae?gt in d:qt.call(d,gt)))return!1}var At=J.get(h),zt=J.get(d);if(At&&zt)return At==d&&zt==h;var nr=!0;J.set(h,d),J.set(d,h);for(var Ut=ae;++Ze<ke;){gt=ve[Ze];var yr=h[gt],wr=d[gt];if(R)var Us=ae?R(wr,yr,gt,d,h,J):R(yr,wr,gt,h,d,J);if(!(Us===t?yr===wr||W(yr,wr,E,R,J):Us)){nr=!1;break}Ut||(Ut=gt=="constructor")}if(nr&&!Ut){var ts=h.constructor,Ws=d.constructor;ts!=Ws&&"constructor"in h&&"constructor"in d&&!(typeof ts=="function"&&ts instanceof ts&&typeof Ws=="function"&&Ws instanceof Ws)&&(nr=!1)}return J.delete(h),J.delete(d),nr}function Ml(h){return Y2(UR(h,t,JR),h+"")}function H2(h){return nR(h,ui,q2)}function z2(h){return nR(h,ws,LR)}var U2=a0?function(h){return a0.get(h)}:lE;function $0(h){for(var d=h.name+"",E=Sd[d],R=qt.call(Sd,d)?E.length:0;R--;){var W=E[R],J=W.func;if(J==null||J==h)return W.name}return d}function Ad(h){var d=qt.call(G,"placeholder")?G:h;return d.placeholder}function Ft(){var h=G.iteratee||oE;return h=h===oE?oR:h,arguments.length?h(arguments[0],arguments[1]):h}function _0(h,d){var E=h.__data__;return Nre(d)?E[typeof d=="string"?"string":"hash"]:E.map}function W2(h){for(var d=ui(h),E=d.length;E--;){var R=d[E],W=h[R];d[E]=[R,W,HR(W)]}return d}function Ef(h,d){var E=Zb(h,d);return sR(E)?E:t}function kre(h){var d=qt.call(h,bf),E=h[bf];try{h[bf]=t;var R=!0}catch{}var W=Qb.call(h);return R&&(d?h[bf]=E:delete h[bf]),W}var q2=m2?function(h){return h==null?[]:(h=yt(h),De(m2(h),function(d){return WN.call(h,d)}))}:uE,LR=m2?function(h){for(var d=[];h;)Yt(d,q2(h)),h=r0(h);return d}:uE,Hi=Qi;(b2&&Hi(new b2(new ArrayBuffer(1)))!=Di||wg&&Hi(new wg)!=le||w2&&Hi(w2.resolve())!=st||Ed&&Hi(new Ed)!=vt||$g&&Hi(new $g)!=ct)&&(Hi=function(h){var d=Qi(h),E=d==je?h.constructor:t,R=E?Sf(E):"";if(R)switch(R){case lte:return Di;case ute:return le;case cte:return st;case fte:return vt;case hte:return ct}return d});function Tre(h,d,E){for(var R=-1,W=E.length;++R<W;){var J=E[R],ae=J.size;switch(J.type){case"drop":h+=ae;break;case"dropRight":d-=ae;break;case"take":d=ji(d,h+ae);break;case"takeRight":h=Qn(h,d-ae);break}}return{start:h,end:d}}function Ire(h){var d=h.match(ig);return d?d[1].split(sg):[]}function FR(h,d,E){d=Wu(d,h);for(var R=-1,W=d.length,J=!1;++R<W;){var ae=Ya(d[R]);if(!(J=h!=null&&E(h,ae)))break;h=h[ae]}return J||++R!=W?J:(W=h==null?0:h.length,!!W&&A0(W)&&Ll(ae,W)&&(Zt(h)||kf(h)))}function Are(h){var d=h.length,E=new h.constructor(d);return d&&typeof h[0]=="string"&&qt.call(h,"index")&&(E.index=h.index,E.input=h.input),E}function jR(h){return typeof h.constructor=="function"&&!Og(h)?kd(r0(h)):{}}function Ore(h,d,E){var R=h.constructor;switch(d){case gn:return L2(h);case $:case S:return new R(+h);case Di:return dre(h,E);case Gi:case yn:case ps:case fo:case Bi:case Yi:case ho:case of:case po:return _R(h,E);case le:return new R;case ye:case Rt:return new R(h);case mt:return pre(h);case vt:return new R;case dr:return vre(h)}}function Cre(h,d){var E=d.length;if(!E)return h;var R=E-1;return d[R]=(E>1?"& ":"")+d[R],d=d.join(E>2?", ":" "),h.replace(ng,`{
/* [wrapped with `+d+`] */
`)}function Pre(h){return Zt(h)||kf(h)||!!(qN&&h&&h[qN])}function Ll(h,d){var E=typeof h;return d=d??_e,!!d&&(E=="number"||E!="symbol"&&Bu.test(h))&&h>-1&&h%1==0&&h<d}function es(h,d,E){if(!dn(E))return!1;var R=typeof d;return(R=="number"?bs(E)&&Ll(d,E.length):R=="string"&&d in E)?la(E[d],h):!1}function K2(h,d){if(Zt(h))return!1;var E=typeof h;return E=="number"||E=="symbol"||E=="boolean"||h==null||zs(h)?!0:ad.test(h)||!rg.test(h)||d!=null&&h in yt(d)}function Nre(h){var d=typeof h;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?h!=="__proto__":h===null}function V2(h){var d=$0(h),E=G[d];if(typeof E!="function"||!(d in br.prototype))return!1;if(h===E)return!0;var R=U2(E);return!!R&&h===R[0]}function Rre(h){return!!HN&&HN in h}var Dre=Ji?Fl:cE;function Og(h){var d=h&&h.constructor,E=typeof d=="function"&&d.prototype||Jn;return h===E}function HR(h){return h===h&&!dn(h)}function zR(h,d){return function(E){return E==null?!1:E[h]===d&&(d!==t||h in yt(E))}}function Bre(h){var d=T0(h,function(R){return E.size===u&&E.clear(),R}),E=d.cache;return d}function Mre(h,d){var E=h[1],R=d[1],W=E|R,J=W<(T|_|g),ae=R==g&&E==x||R==g&&E==M&&h[7].length<=d[8]||R==(g|M)&&d[7].length<=d[8]&&E==x;if(!(J||ae))return h;R&T&&(h[2]=d[2],W|=E&T?0:A);var ve=d[3];if(ve){var ke=h[3];h[3]=ke?ER(ke,ve,d[4]):ve,h[4]=ke?js(h[3],f):d[4]}return ve=d[5],ve&&(ke=h[5],h[5]=ke?SR(ke,ve,d[6]):ve,h[6]=ke?js(h[5],f):d[6]),ve=d[7],ve&&(h[7]=ve),R&g&&(h[8]=h[8]==null?d[8]:ji(h[8],d[8])),h[9]==null&&(h[9]=d[9]),h[0]=d[0],h[1]=W,h}function Lre(h){var d=[];if(h!=null)for(var E in yt(h))d.push(E);return d}function Fre(h){return Qb.call(h)}function UR(h,d,E){return d=Qn(d===t?h.length-1:d,0),function(){for(var R=arguments,W=-1,J=Qn(R.length-d,0),ae=fe(J);++W<J;)ae[W]=R[d+W];W=-1;for(var ve=fe(d+1);++W<d;)ve[W]=R[W];return ve[d]=E(ae),K(h,this,ve)}}function WR(h,d){return d.length<2?h:xf(h,xo(d,0,-1))}function jre(h,d){for(var E=h.length,R=ji(d.length,E),W=ms(h);R--;){var J=d[R];h[R]=Ll(J,E)?W[J]:t}return h}function G2(h,d){if(!(d==="constructor"&&typeof h[d]=="function")&&d!="__proto__")return h[d]}var qR=VR(pR),Cg=tte||function(h,d){return fn.setTimeout(h,d)},Y2=VR(ure);function KR(h,d,E){var R=d+"";return Y2(h,Cre(R,Hre(Ire(R),E)))}function VR(h){var d=0,E=0;return function(){var R=ste(),W=te-(R-E);if(E=R,W>0){if(++d>=Q)return arguments[0]}else d=0;return h.apply(t,arguments)}}function x0(h,d){var E=-1,R=h.length,W=R-1;for(d=d===t?R:d;++E<d;){var J=C2(E,W),ae=h[J];h[J]=h[E],h[E]=ae}return h.length=d,h}var GR=Bre(function(h){var d=[];return h.charCodeAt(0)===46&&d.push(""),h.replace(ld,function(E,R,W,J){d.push(W?J.replace(ag,"$1"):R||E)}),d});function Ya(h){if(typeof h=="string"||zs(h))return h;var d=h+"";return d=="0"&&1/h==-ie?"-0":d}function Sf(h){if(h!=null){try{return oa.call(h)}catch{}try{return h+""}catch{}}return""}function Hre(h,d){return se(xe,function(E){var R="_."+E[0];d&E[1]&&!Ae(h,R)&&h.push(R)}),h.sort()}function YR(h){if(h instanceof br)return h.clone();var d=new $o(h.__wrapped__,h.__chain__);return d.__actions__=ms(h.__actions__),d.__index__=h.__index__,d.__values__=h.__values__,d}function zre(h,d,E){(E?es(h,d,E):d===t)?d=1:d=Qn(rr(d),0);var R=h==null?0:h.length;if(!R||d<1)return[];for(var W=0,J=0,ae=fe(s0(R/d));W<R;)ae[J++]=xo(h,W,W+=d);return ae}function Ure(h){for(var d=-1,E=h==null?0:h.length,R=0,W=[];++d<E;){var J=h[d];J&&(W[R++]=J)}return W}function Wre(){var h=arguments.length;if(!h)return[];for(var d=fe(h-1),E=arguments[0],R=h;R--;)d[R-1]=arguments[R];return Yt(Zt(E)?ms(E):[E],Si(d,1))}var qre=cr(function(h,d){return In(h)?Sg(h,Si(d,1,In,!0)):[]}),Kre=cr(function(h,d){var E=Eo(d);return In(E)&&(E=t),In(h)?Sg(h,Si(d,1,In,!0),Ft(E,2)):[]}),Vre=cr(function(h,d){var E=Eo(d);return In(E)&&(E=t),In(h)?Sg(h,Si(d,1,In,!0),t,E):[]});function Gre(h,d,E){var R=h==null?0:h.length;return R?(d=E||d===t?1:rr(d),xo(h,d<0?0:d,R)):[]}function Yre(h,d,E){var R=h==null?0:h.length;return R?(d=E||d===t?1:rr(d),d=R-d,xo(h,0,d<0?0:d)):[]}function Zre(h,d){return h&&h.length?v0(h,Ft(d,3),!0,!0):[]}function Xre(h,d){return h&&h.length?v0(h,Ft(d,3),!0):[]}function Jre(h,d,E,R){var W=h==null?0:h.length;return W?(E&&typeof E!="number"&&es(h,d,E)&&(E=0,R=W),Wte(h,d,E,R)):[]}function ZR(h,d,E){var R=h==null?0:h.length;if(!R)return-1;var W=E==null?0:rr(E);return W<0&&(W=Qn(R+W,0)),vr(h,Ft(d,3),W)}function XR(h,d,E){var R=h==null?0:h.length;if(!R)return-1;var W=R-1;return E!==t&&(W=rr(E),W=E<0?Qn(R+W,0):ji(W,R-1)),vr(h,Ft(d,3),W,!0)}function JR(h){var d=h==null?0:h.length;return d?Si(h,1):[]}function Qre(h){var d=h==null?0:h.length;return d?Si(h,ie):[]}function ene(h,d){var E=h==null?0:h.length;return E?(d=d===t?1:rr(d),Si(h,d)):[]}function tne(h){for(var d=-1,E=h==null?0:h.length,R={};++d<E;){var W=h[d];R[W[0]]=W[1]}return R}function QR(h){return h&&h.length?h[0]:t}function rne(h,d,E){var R=h==null?0:h.length;if(!R)return-1;var W=E==null?0:rr(E);return W<0&&(W=Qn(R+W,0)),Mr(h,d,W)}function nne(h){var d=h==null?0:h.length;return d?xo(h,0,-1):[]}var ine=cr(function(h){var d=bt(h,B2);return d.length&&d[0]===h[0]?k2(d):[]}),sne=cr(function(h){var d=Eo(h),E=bt(h,B2);return d===Eo(E)?d=t:E.pop(),E.length&&E[0]===h[0]?k2(E,Ft(d,2)):[]}),one=cr(function(h){var d=Eo(h),E=bt(h,B2);return d=typeof d=="function"?d:t,d&&E.pop(),E.length&&E[0]===h[0]?k2(E,t,d):[]});function ane(h,d){return h==null?"":nte.call(h,d)}function Eo(h){var d=h==null?0:h.length;return d?h[d-1]:t}function lne(h,d,E){var R=h==null?0:h.length;if(!R)return-1;var W=R;return E!==t&&(W=rr(E),W=W<0?Qn(R+W,0):ji(W,R-1)),d===d?xd(h,d,W):vr(h,$d,W,!0)}function une(h,d){return h&&h.length?cR(h,rr(d)):t}var cne=cr(eD);function eD(h,d){return h&&h.length&&d&&d.length?O2(h,d):h}function fne(h,d,E){return h&&h.length&&d&&d.length?O2(h,d,Ft(E,2)):h}function hne(h,d,E){return h&&h.length&&d&&d.length?O2(h,d,t,E):h}var dne=Ml(function(h,d){var E=h==null?0:h.length,R=_2(h,d);return dR(h,bt(d,function(W){return Ll(W,E)?+W:W}).sort(xR)),R});function pne(h,d){var E=[];if(!(h&&h.length))return E;var R=-1,W=[],J=h.length;for(d=Ft(d,3);++R<J;){var ae=h[R];d(ae,R,h)&&(E.push(ae),W.push(R))}return dR(h,W),E}function Z2(h){return h==null?h:ate.call(h)}function vne(h,d,E){var R=h==null?0:h.length;return R?(E&&typeof E!="number"&&es(h,d,E)?(d=0,E=R):(d=d==null?0:rr(d),E=E===t?R:rr(E)),xo(h,d,E)):[]}function gne(h,d){return p0(h,d)}function yne(h,d,E){return N2(h,d,Ft(E,2))}function mne(h,d){var E=h==null?0:h.length;if(E){var R=p0(h,d);if(R<E&&la(h[R],d))return R}return-1}function bne(h,d){return p0(h,d,!0)}function wne(h,d,E){return N2(h,d,Ft(E,2),!0)}function $ne(h,d){var E=h==null?0:h.length;if(E){var R=p0(h,d,!0)-1;if(la(h[R],d))return R}return-1}function _ne(h){return h&&h.length?vR(h):[]}function xne(h,d){return h&&h.length?vR(h,Ft(d,2)):[]}function Ene(h){var d=h==null?0:h.length;return d?xo(h,1,d):[]}function Sne(h,d,E){return h&&h.length?(d=E||d===t?1:rr(d),xo(h,0,d<0?0:d)):[]}function kne(h,d,E){var R=h==null?0:h.length;return R?(d=E||d===t?1:rr(d),d=R-d,xo(h,d<0?0:d,R)):[]}function Tne(h,d){return h&&h.length?v0(h,Ft(d,3),!1,!0):[]}function Ine(h,d){return h&&h.length?v0(h,Ft(d,3)):[]}var Ane=cr(function(h){return Uu(Si(h,1,In,!0))}),One=cr(function(h){var d=Eo(h);return In(d)&&(d=t),Uu(Si(h,1,In,!0),Ft(d,2))}),Cne=cr(function(h){var d=Eo(h);return d=typeof d=="function"?d:t,Uu(Si(h,1,In,!0),t,d)});function Pne(h){return h&&h.length?Uu(h):[]}function Nne(h,d){return h&&h.length?Uu(h,Ft(d,2)):[]}function Rne(h,d){return d=typeof d=="function"?d:t,h&&h.length?Uu(h,t,d):[]}function X2(h){if(!(h&&h.length))return[];var d=0;return h=De(h,function(E){if(In(E))return d=Qn(E.length,d),!0}),vf(d,function(E){return bt(h,Cl(E))})}function tD(h,d){if(!(h&&h.length))return[];var E=X2(h);return d==null?E:bt(E,function(R){return K(d,t,R)})}var Dne=cr(function(h,d){return In(h)?Sg(h,d):[]}),Bne=cr(function(h){return D2(De(h,In))}),Mne=cr(function(h){var d=Eo(h);return In(d)&&(d=t),D2(De(h,In),Ft(d,2))}),Lne=cr(function(h){var d=Eo(h);return d=typeof d=="function"?d:t,D2(De(h,In),t,d)}),Fne=cr(X2);function jne(h,d){return bR(h||[],d||[],Eg)}function Hne(h,d){return bR(h||[],d||[],Ig)}var zne=cr(function(h){var d=h.length,E=d>1?h[d-1]:t;return E=typeof E=="function"?(h.pop(),E):t,tD(h,E)});function rD(h){var d=G(h);return d.__chain__=!0,d}function Une(h,d){return d(h),h}function E0(h,d){return d(h)}var Wne=Ml(function(h){var d=h.length,E=d?h[0]:0,R=this.__wrapped__,W=function(J){return _2(J,h)};return d>1||this.__actions__.length||!(R instanceof br)||!Ll(E)?this.thru(W):(R=R.slice(E,+E+(d?1:0)),R.__actions__.push({func:E0,args:[W],thisArg:t}),new $o(R,this.__chain__).thru(function(J){return d&&!J.length&&J.push(t),J}))});function qne(){return rD(this)}function Kne(){return new $o(this.value(),this.__chain__)}function Vne(){this.__values__===t&&(this.__values__=gD(this.value()));var h=this.__index__>=this.__values__.length,d=h?t:this.__values__[this.__index__++];return{done:h,value:d}}function Gne(){return this}function Yne(h){for(var d,E=this;E instanceof u0;){var R=YR(E);R.__index__=0,R.__values__=t,d?W.__wrapped__=R:d=R;var W=R;E=E.__wrapped__}return W.__wrapped__=h,d}function Zne(){var h=this.__wrapped__;if(h instanceof br){var d=h;return this.__actions__.length&&(d=new br(this)),d=d.reverse(),d.__actions__.push({func:E0,args:[Z2],thisArg:t}),new $o(d,this.__chain__)}return this.thru(Z2)}function Xne(){return mR(this.__wrapped__,this.__actions__)}var Jne=g0(function(h,d,E){qt.call(h,E)?++h[E]:Dl(h,E,1)});function Qne(h,d,E){var R=Zt(h)?Pe:Ute;return E&&es(h,d,E)&&(d=t),R(h,Ft(d,3))}function eie(h,d){var E=Zt(h)?De:tR;return E(h,Ft(d,3))}var tie=AR(ZR),rie=AR(XR);function nie(h,d){return Si(S0(h,d),1)}function iie(h,d){return Si(S0(h,d),ie)}function sie(h,d,E){return E=E===t?1:rr(E),Si(S0(h,d),E)}function nD(h,d){var E=Zt(h)?se:zu;return E(h,Ft(d,3))}function iD(h,d){var E=Zt(h)?Ee:eR;return E(h,Ft(d,3))}var oie=g0(function(h,d,E){qt.call(h,E)?h[E].push(d):Dl(h,E,[d])});function aie(h,d,E,R){h=bs(h)?h:Cd(h),E=E&&!R?rr(E):0;var W=h.length;return E<0&&(E=Qn(W+E,0)),O0(h)?E<=W&&h.indexOf(d,E)>-1:!!W&&Mr(h,d,E)>-1}var lie=cr(function(h,d,E){var R=-1,W=typeof d=="function",J=bs(h)?fe(h.length):[];return zu(h,function(ae){J[++R]=W?K(d,ae,E):kg(ae,d,E)}),J}),uie=g0(function(h,d,E){Dl(h,E,d)});function S0(h,d){var E=Zt(h)?bt:aR;return E(h,Ft(d,3))}function cie(h,d,E,R){return h==null?[]:(Zt(d)||(d=d==null?[]:[d]),E=R?t:E,Zt(E)||(E=E==null?[]:[E]),fR(h,d,E))}var fie=g0(function(h,d,E){h[E?0:1].push(d)},function(){return[[],[]]});function hie(h,d,E){var R=Zt(h)?Gt:ia,W=arguments.length<3;return R(h,Ft(d,4),E,W,zu)}function die(h,d,E){var R=Zt(h)?Zn:ia,W=arguments.length<3;return R(h,Ft(d,4),E,W,eR)}function pie(h,d){var E=Zt(h)?De:tR;return E(h,I0(Ft(d,3)))}function vie(h){var d=Zt(h)?ZN:are;return d(h)}function gie(h,d,E){(E?es(h,d,E):d===t)?d=1:d=rr(d);var R=Zt(h)?Lte:lre;return R(h,d)}function yie(h){var d=Zt(h)?Fte:cre;return d(h)}function mie(h){if(h==null)return 0;if(bs(h))return O0(h)?Ka(h):h.length;var d=Hi(h);return d==le||d==vt?h.size:I2(h).length}function bie(h,d,E){var R=Zt(h)?hn:fre;return E&&es(h,d,E)&&(d=t),R(h,Ft(d,3))}var wie=cr(function(h,d){if(h==null)return[];var E=d.length;return E>1&&es(h,d[0],d[1])?d=[]:E>2&&es(d[0],d[1],d[2])&&(d=[d[0]]),fR(h,Si(d,1),[])}),k0=ete||function(){return fn.Date.now()};function $ie(h,d){if(typeof d!="function")throw new ur(o);return h=rr(h),function(){if(--h<1)return d.apply(this,arguments)}}function sD(h,d,E){return d=E?t:d,d=h&&d==null?h.length:d,Bl(h,g,t,t,t,t,d)}function oD(h,d){var E;if(typeof d!="function")throw new ur(o);return h=rr(h),function(){return--h>0&&(E=d.apply(this,arguments)),h<=1&&(d=t),E}}var J2=cr(function(h,d,E){var R=T;if(E.length){var W=js(E,Ad(J2));R|=O}return Bl(h,R,d,E,W)}),aD=cr(function(h,d,E){var R=T|_;if(E.length){var W=js(E,Ad(aD));R|=O}return Bl(d,R,h,E,W)});function lD(h,d,E){d=E?t:d;var R=Bl(h,x,t,t,t,t,t,d);return R.placeholder=lD.placeholder,R}function uD(h,d,E){d=E?t:d;var R=Bl(h,I,t,t,t,t,t,d);return R.placeholder=uD.placeholder,R}function cD(h,d,E){var R,W,J,ae,ve,ke,Ke=0,Ve=!1,Ze=!1,gt=!0;if(typeof h!="function")throw new ur(o);d=So(d)||0,dn(E)&&(Ve=!!E.leading,Ze="maxWait"in E,J=Ze?Qn(So(E.maxWait)||0,d):J,gt="trailing"in E?!!E.trailing:gt);function At(An){var ua=R,Hl=W;return R=W=t,Ke=An,ae=h.apply(Hl,ua),ae}function zt(An){return Ke=An,ve=Cg(yr,d),Ve?At(An):ae}function nr(An){var ua=An-ke,Hl=An-Ke,AD=d-ua;return Ze?ji(AD,J-Hl):AD}function Ut(An){var ua=An-ke,Hl=An-Ke;return ke===t||ua>=d||ua<0||Ze&&Hl>=J}function yr(){var An=k0();if(Ut(An))return wr(An);ve=Cg(yr,nr(An))}function wr(An){return ve=t,gt&&R?At(An):(R=W=t,ae)}function Us(){ve!==t&&wR(ve),Ke=0,R=ke=W=ve=t}function ts(){return ve===t?ae:wr(k0())}function Ws(){var An=k0(),ua=Ut(An);if(R=arguments,W=this,ke=An,ua){if(ve===t)return zt(ke);if(Ze)return wR(ve),ve=Cg(yr,d),At(ke)}return ve===t&&(ve=Cg(yr,d)),ae}return Ws.cancel=Us,Ws.flush=ts,Ws}var _ie=cr(function(h,d){return QN(h,1,d)}),xie=cr(function(h,d,E){return QN(h,So(d)||0,E)});function Eie(h){return Bl(h,B)}function T0(h,d){if(typeof h!="function"||d!=null&&typeof d!="function")throw new ur(o);var E=function(){var R=arguments,W=d?d.apply(this,R):R[0],J=E.cache;if(J.has(W))return J.get(W);var ae=h.apply(this,R);return E.cache=J.set(W,ae)||J,ae};return E.cache=new(T0.Cache||Rl),E}T0.Cache=Rl;function I0(h){if(typeof h!="function")throw new ur(o);return function(){var d=arguments;switch(d.length){case 0:return!h.call(this);case 1:return!h.call(this,d[0]);case 2:return!h.call(this,d[0],d[1]);case 3:return!h.call(this,d[0],d[1],d[2])}return!h.apply(this,d)}}function Sie(h){return oD(2,h)}var kie=hre(function(h,d){d=d.length==1&&Zt(d[0])?bt(d[0],Zi(Ft())):bt(Si(d,1),Zi(Ft()));var E=d.length;return cr(function(R){for(var W=-1,J=ji(R.length,E);++W<J;)R[W]=d[W].call(this,R[W]);return K(h,this,R)})}),Q2=cr(function(h,d){var E=js(d,Ad(Q2));return Bl(h,O,t,d,E)}),fD=cr(function(h,d){var E=js(d,Ad(fD));return Bl(h,C,t,d,E)}),Tie=Ml(function(h,d){return Bl(h,M,t,t,t,d)});function Iie(h,d){if(typeof h!="function")throw new ur(o);return d=d===t?d:rr(d),cr(h,d)}function Aie(h,d){if(typeof h!="function")throw new ur(o);return d=d==null?0:Qn(rr(d),0),cr(function(E){var R=E[d],W=qu(E,0,d);return R&&Yt(W,R),K(h,this,W)})}function Oie(h,d,E){var R=!0,W=!0;if(typeof h!="function")throw new ur(o);return dn(E)&&(R="leading"in E?!!E.leading:R,W="trailing"in E?!!E.trailing:W),cD(h,d,{leading:R,maxWait:d,trailing:W})}function Cie(h){return sD(h,1)}function Pie(h,d){return Q2(M2(d),h)}function Nie(){if(!arguments.length)return[];var h=arguments[0];return Zt(h)?h:[h]}function Rie(h){return _o(h,y)}function Die(h,d){return d=typeof d=="function"?d:t,_o(h,y,d)}function Bie(h){return _o(h,c|y)}function Mie(h,d){return d=typeof d=="function"?d:t,_o(h,c|y,d)}function Lie(h,d){return d==null||JN(h,d,ui(d))}function la(h,d){return h===d||h!==h&&d!==d}var Fie=w0(S2),jie=w0(function(h,d){return h>=d}),kf=iR(function(){return arguments}())?iR:function(h){return mn(h)&&qt.call(h,"callee")&&!WN.call(h,"callee")},Zt=fe.isArray,Hie=m?Zi(m):Yte;function bs(h){return h!=null&&A0(h.length)&&!Fl(h)}function In(h){return mn(h)&&bs(h)}function zie(h){return h===!0||h===!1||mn(h)&&Qi(h)==$}var Ku=rte||cE,Uie=k?Zi(k):Zte;function Wie(h){return mn(h)&&h.nodeType===1&&!Pg(h)}function qie(h){if(h==null)return!0;if(bs(h)&&(Zt(h)||typeof h=="string"||typeof h.splice=="function"||Ku(h)||Od(h)||kf(h)))return!h.length;var d=Hi(h);if(d==le||d==vt)return!h.size;if(Og(h))return!I2(h).length;for(var E in h)if(qt.call(h,E))return!1;return!0}function Kie(h,d){return Tg(h,d)}function Vie(h,d,E){E=typeof E=="function"?E:t;var R=E?E(h,d):t;return R===t?Tg(h,d,t,E):!!R}function eE(h){if(!mn(h))return!1;var d=Qi(h);return d==F||d==N||typeof h.message=="string"&&typeof h.name=="string"&&!Pg(h)}function Gie(h){return typeof h=="number"&&KN(h)}function Fl(h){if(!dn(h))return!1;var d=Qi(h);return d==H||d==V||d==Fe||d==wt}function hD(h){return typeof h=="number"&&h==rr(h)}function A0(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=_e}function dn(h){var d=typeof h;return h!=null&&(d=="object"||d=="function")}function mn(h){return h!=null&&typeof h=="object"}var dD=P?Zi(P):Jte;function Yie(h,d){return h===d||T2(h,d,W2(d))}function Zie(h,d,E){return E=typeof E=="function"?E:t,T2(h,d,W2(d),E)}function Xie(h){return pD(h)&&h!=+h}function Jie(h){if(Dre(h))throw new We(s);return sR(h)}function Qie(h){return h===null}function ese(h){return h==null}function pD(h){return typeof h=="number"||mn(h)&&Qi(h)==ye}function Pg(h){if(!mn(h)||Qi(h)!=je)return!1;var d=r0(h);if(d===null)return!0;var E=qt.call(d,"constructor")&&d.constructor;return typeof E=="function"&&E instanceof E&&oa.call(E)==Zee}var tE=D?Zi(D):Qte;function tse(h){return hD(h)&&h>=-_e&&h<=_e}var vD=z?Zi(z):ere;function O0(h){return typeof h=="string"||!Zt(h)&&mn(h)&&Qi(h)==Rt}function zs(h){return typeof h=="symbol"||mn(h)&&Qi(h)==dr}var Od=U?Zi(U):tre;function rse(h){return h===t}function nse(h){return mn(h)&&Hi(h)==ct}function ise(h){return mn(h)&&Qi(h)==It}var sse=w0(A2),ose=w0(function(h,d){return h<=d});function gD(h){if(!h)return[];if(bs(h))return O0(h)?Xi(h):ms(h);if(bg&&h[bg])return qa(h[bg]());var d=Hi(h),E=d==le?_d:d==vt?Pl:Cd;return E(h)}function jl(h){if(!h)return h===0?h:0;if(h=So(h),h===ie||h===-ie){var d=h<0?-1:1;return d*we}return h===h?h:0}function rr(h){var d=jl(h),E=d%1;return d===d?E?d-E:d:0}function yD(h){return h?_f(rr(h),0,ze):0}function So(h){if(typeof h=="number")return h;if(zs(h))return Ce;if(dn(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=dn(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=wo(h);var E=hd.test(h);return E||cf.test(h)?d2(h.slice(2),E?2:8):ja.test(h)?Ce:+h}function mD(h){return Ga(h,ws(h))}function ase(h){return h?_f(rr(h),-_e,_e):h===0?h:0}function Nr(h){return h==null?"":Hs(h)}var lse=Td(function(h,d){if(Og(d)||bs(d)){Ga(d,ui(d),h);return}for(var E in d)qt.call(d,E)&&Eg(h,E,d[E])}),bD=Td(function(h,d){Ga(d,ws(d),h)}),C0=Td(function(h,d,E,R){Ga(d,ws(d),h,R)}),use=Td(function(h,d,E,R){Ga(d,ui(d),h,R)}),cse=Ml(_2);function fse(h,d){var E=kd(h);return d==null?E:XN(E,d)}var hse=cr(function(h,d){h=yt(h);var E=-1,R=d.length,W=R>2?d[2]:t;for(W&&es(d[0],d[1],W)&&(R=1);++E<R;)for(var J=d[E],ae=ws(J),ve=-1,ke=ae.length;++ve<ke;){var Ke=ae[ve],Ve=h[Ke];(Ve===t||la(Ve,Jn[Ke])&&!qt.call(h,Ke))&&(h[Ke]=J[Ke])}return h}),dse=cr(function(h){return h.push(t,BR),K(wD,t,h)});function pse(h,d){return Ua(h,Ft(d,3),Va)}function vse(h,d){return Ua(h,Ft(d,3),E2)}function gse(h,d){return h==null?h:x2(h,Ft(d,3),ws)}function yse(h,d){return h==null?h:rR(h,Ft(d,3),ws)}function mse(h,d){return h&&Va(h,Ft(d,3))}function bse(h,d){return h&&E2(h,Ft(d,3))}function wse(h){return h==null?[]:h0(h,ui(h))}function $se(h){return h==null?[]:h0(h,ws(h))}function rE(h,d,E){var R=h==null?t:xf(h,d);return R===t?E:R}function _se(h,d){return h!=null&&FR(h,d,qte)}function nE(h,d){return h!=null&&FR(h,d,Kte)}var xse=CR(function(h,d,E){d!=null&&typeof d.toString!="function"&&(d=Qb.call(d)),h[d]=E},sE($s)),Ese=CR(function(h,d,E){d!=null&&typeof d.toString!="function"&&(d=Qb.call(d)),qt.call(h,d)?h[d].push(E):h[d]=[E]},Ft),Sse=cr(kg);function ui(h){return bs(h)?YN(h):I2(h)}function ws(h){return bs(h)?YN(h,!0):rre(h)}function kse(h,d){var E={};return d=Ft(d,3),Va(h,function(R,W,J){Dl(E,d(R,W,J),R)}),E}function Tse(h,d){var E={};return d=Ft(d,3),Va(h,function(R,W,J){Dl(E,W,d(R,W,J))}),E}var Ise=Td(function(h,d,E){d0(h,d,E)}),wD=Td(function(h,d,E,R){d0(h,d,E,R)}),Ase=Ml(function(h,d){var E={};if(h==null)return E;var R=!1;d=bt(d,function(J){return J=Wu(J,h),R||(R=J.length>1),J}),Ga(h,z2(h),E),R&&(E=_o(E,c|p|y,xre));for(var W=d.length;W--;)R2(E,d[W]);return E});function Ose(h,d){return $D(h,I0(Ft(d)))}var Cse=Ml(function(h,d){return h==null?{}:ire(h,d)});function $D(h,d){if(h==null)return{};var E=bt(z2(h),function(R){return[R]});return d=Ft(d),hR(h,E,function(R,W){return d(R,W[0])})}function Pse(h,d,E){d=Wu(d,h);var R=-1,W=d.length;for(W||(W=1,h=t);++R<W;){var J=h==null?t:h[Ya(d[R])];J===t&&(R=W,J=E),h=Fl(J)?J.call(h):J}return h}function Nse(h,d,E){return h==null?h:Ig(h,d,E)}function Rse(h,d,E,R){return R=typeof R=="function"?R:t,h==null?h:Ig(h,d,E,R)}var _D=RR(ui),xD=RR(ws);function Dse(h,d,E){var R=Zt(h),W=R||Ku(h)||Od(h);if(d=Ft(d,4),E==null){var J=h&&h.constructor;W?E=R?new J:[]:dn(h)?E=Fl(J)?kd(r0(h)):{}:E={}}return(W?se:Va)(h,function(ae,ve,ke){return d(E,ae,ve,ke)}),E}function Bse(h,d){return h==null?!0:R2(h,d)}function Mse(h,d,E){return h==null?h:yR(h,d,M2(E))}function Lse(h,d,E,R){return R=typeof R=="function"?R:t,h==null?h:yR(h,d,M2(E),R)}function Cd(h){return h==null?[]:vg(h,ui(h))}function Fse(h){return h==null?[]:vg(h,ws(h))}function jse(h,d,E){return E===t&&(E=d,d=t),E!==t&&(E=So(E),E=E===E?E:0),d!==t&&(d=So(d),d=d===d?d:0),_f(So(h),d,E)}function Hse(h,d,E){return d=jl(d),E===t?(E=d,d=0):E=jl(E),h=So(h),Vte(h,d,E)}function zse(h,d,E){if(E&&typeof E!="boolean"&&es(h,d,E)&&(d=E=t),E===t&&(typeof d=="boolean"?(E=d,d=t):typeof h=="boolean"&&(E=h,h=t)),h===t&&d===t?(h=0,d=1):(h=jl(h),d===t?(d=h,h=0):d=jl(d)),h>d){var R=h;h=d,d=R}if(E||h%1||d%1){var W=VN();return ji(h+W*(d-h+dg("1e-"+((W+"").length-1))),d)}return C2(h,d)}var Use=Id(function(h,d,E){return d=d.toLowerCase(),h+(E?ED(d):d)});function ED(h){return iE(Nr(h).toLowerCase())}function SD(h){return h=Nr(h),h&&h.replace(dd,ju).replace(a2,"")}function Wse(h,d,E){h=Nr(h),d=Hs(d);var R=h.length;E=E===t?R:_f(rr(E),0,R);var W=E;return E-=d.length,E>=0&&h.slice(E,W)==d}function qse(h){return h=Nr(h),h&&od.test(h)?h.replace(La,v2):h}function Kse(h){return h=Nr(h),h&&Fa.test(h)?h.replace(go,"\\$&"):h}var Vse=Id(function(h,d,E){return h+(E?"-":"")+d.toLowerCase()}),Gse=Id(function(h,d,E){return h+(E?" ":"")+d.toLowerCase()}),Yse=IR("toLowerCase");function Zse(h,d,E){h=Nr(h),d=rr(d);var R=d?Ka(h):0;if(!d||R>=d)return h;var W=(d-R)/2;return b0(o0(W),E)+h+b0(s0(W),E)}function Xse(h,d,E){h=Nr(h),d=rr(d);var R=d?Ka(h):0;return d&&R<d?h+b0(d-R,E):h}function Jse(h,d,E){h=Nr(h),d=rr(d);var R=d?Ka(h):0;return d&&R<d?b0(d-R,E)+h:h}function Qse(h,d,E){return E||d==null?d=0:d&&(d=+d),ote(Nr(h).replace(Tl,""),d||0)}function eoe(h,d,E){return(E?es(h,d,E):d===t)?d=1:d=rr(d),P2(Nr(h),d)}function toe(){var h=arguments,d=Nr(h[0]);return h.length<3?d:d.replace(h[1],h[2])}var roe=Id(function(h,d,E){return h+(E?"_":"")+d.toLowerCase()});function noe(h,d,E){return E&&typeof E!="number"&&es(h,d,E)&&(d=E=t),E=E===t?ze:E>>>0,E?(h=Nr(h),h&&(typeof d=="string"||d!=null&&!tE(d))&&(d=Hs(d),!d&&ys(h))?qu(Xi(h),0,E):h.split(d,E)):[]}var ioe=Id(function(h,d,E){return h+(E?" ":"")+iE(d)});function soe(h,d,E){return h=Nr(h),E=E==null?0:_f(rr(E),0,h.length),d=Hs(d),h.slice(E,E+d.length)==d}function ooe(h,d,E){var R=G.templateSettings;E&&es(h,d,E)&&(d=t),h=Nr(h),d=C0({},d,R,DR);var W=C0({},d.imports,R.imports,DR),J=ui(W),ae=vg(W,J),ve,ke,Ke=0,Ve=d.interpolate||Mu,Ze="__p += '",gt=tr((d.escape||Mu).source+"|"+Ve.source+"|"+(Ve===Du?cd:Mu).source+"|"+(d.evaluate||Mu).source+"|$","g"),At="//# sourceURL="+(qt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++h2+"]")+`
`;h.replace(gt,function(Ut,yr,wr,Us,ts,Ws){return wr||(wr=Us),Ze+=h.slice(Ke,Ws).replace(Ha,g2),yr&&(ve=!0,Ze+=`' +
__e(`+yr+`) +
'`),ts&&(ke=!0,Ze+=`';
`+ts+`;
__p += '`),wr&&(Ze+=`' +
((__t = (`+wr+`)) == null ? '' : __t) +
'`),Ke=Ws+Ut.length,Ut}),Ze+=`';
`;var zt=qt.call(d,"variable")&&d.variable;if(!zt)Ze=`with (obj) {
`+Ze+`
}
`;else if(og.test(zt))throw new We(a);Ze=(ke?Ze.replace(af,""):Ze).replace(sd,"$1").replace(vo,"$1;"),Ze="function("+(zt||"obj")+`) {
`+(zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var nr=TD(function(){return $t(J,At+"return "+Ze).apply(t,ae)});if(nr.source=Ze,eE(nr))throw nr;return nr}function aoe(h){return Nr(h).toLowerCase()}function loe(h){return Nr(h).toUpperCase()}function uoe(h,d,E){if(h=Nr(h),h&&(E||d===t))return wo(h);if(!h||!(d=Hs(d)))return h;var R=Xi(h),W=Xi(d),J=Ar(R,W),ae=yf(R,W)+1;return qu(R,J,ae).join("")}function coe(h,d,E){if(h=Nr(h),h&&(E||d===t))return h.slice(0,Xb(h)+1);if(!h||!(d=Hs(d)))return h;var R=Xi(h),W=yf(R,Xi(d))+1;return qu(R,0,W).join("")}function foe(h,d,E){if(h=Nr(h),h&&(E||d===t))return h.replace(Tl,"");if(!h||!(d=Hs(d)))return h;var R=Xi(h),W=Ar(R,Xi(d));return qu(R,W).join("")}function hoe(h,d){var E=L,R=q;if(dn(d)){var W="separator"in d?d.separator:W;E="length"in d?rr(d.length):E,R="omission"in d?Hs(d.omission):R}h=Nr(h);var J=h.length;if(ys(h)){var ae=Xi(h);J=ae.length}if(E>=J)return h;var ve=E-Ka(R);if(ve<1)return R;var ke=ae?qu(ae,0,ve).join(""):h.slice(0,ve);if(W===t)return ke+R;if(ae&&(ve+=ke.length-ve),tE(W)){if(h.slice(ve).search(W)){var Ke,Ve=ke;for(W.global||(W=tr(W.source,Nr(fd.exec(W))+"g")),W.lastIndex=0;Ke=W.exec(Ve);)var Ze=Ke.index;ke=ke.slice(0,Ze===t?ve:Ze)}}else if(h.indexOf(Hs(W),ve)!=ve){var gt=ke.lastIndexOf(W);gt>-1&&(ke=ke.slice(0,gt))}return ke+R}function doe(h){return h=Nr(h),h&&lf.test(h)?h.replace(ta,mg):h}var poe=Id(function(h,d,E){return h+(E?" ":"")+d.toUpperCase()}),iE=IR("toUpperCase");function kD(h,d,E){return h=Nr(h),d=E?t:d,d===t?gg(h)?me(h):pr(h):h.match(d)||[]}var TD=cr(function(h,d){try{return K(h,t,d)}catch(E){return eE(E)?E:new We(E)}}),voe=Ml(function(h,d){return se(d,function(E){E=Ya(E),Dl(h,E,J2(h[E],h))}),h});function goe(h){var d=h==null?0:h.length,E=Ft();return h=d?bt(h,function(R){if(typeof R[1]!="function")throw new ur(o);return[E(R[0]),R[1]]}):[],cr(function(R){for(var W=-1;++W<d;){var J=h[W];if(K(J[0],this,R))return K(J[1],this,R)}})}function yoe(h){return zte(_o(h,c))}function sE(h){return function(){return h}}function moe(h,d){return h==null||h!==h?d:h}var boe=OR(),woe=OR(!0);function $s(h){return h}function oE(h){return oR(typeof h=="function"?h:_o(h,c))}function $oe(h){return lR(_o(h,c))}function _oe(h,d){return uR(h,_o(d,c))}var xoe=cr(function(h,d){return function(E){return kg(E,h,d)}}),Eoe=cr(function(h,d){return function(E){return kg(h,E,d)}});function aE(h,d,E){var R=ui(d),W=h0(d,R);E==null&&!(dn(d)&&(W.length||!R.length))&&(E=d,d=h,h=this,W=h0(d,ui(d)));var J=!(dn(E)&&"chain"in E)||!!E.chain,ae=Fl(h);return se(W,function(ve){var ke=d[ve];h[ve]=ke,ae&&(h.prototype[ve]=function(){var Ke=this.__chain__;if(J||Ke){var Ve=h(this.__wrapped__),Ze=Ve.__actions__=ms(this.__actions__);return Ze.push({func:ke,args:arguments,thisArg:h}),Ve.__chain__=Ke,Ve}return ke.apply(h,Yt([this.value()],arguments))})}),h}function Soe(){return fn._===this&&(fn._=Xee),this}function lE(){}function koe(h){return h=rr(h),cr(function(d){return cR(d,h)})}var Toe=F2(bt),Ioe=F2(Pe),Aoe=F2(hn);function ID(h){return K2(h)?Cl(Ya(h)):sre(h)}function Ooe(h){return function(d){return h==null?t:xf(h,d)}}var Coe=PR(),Poe=PR(!0);function uE(){return[]}function cE(){return!1}function Noe(){return{}}function Roe(){return""}function Doe(){return!0}function Boe(h,d){if(h=rr(h),h<1||h>_e)return[];var E=ze,R=ji(h,ze);d=Ft(d),h-=ze;for(var W=vf(R,d);++E<h;)d(E);return W}function Moe(h){return Zt(h)?bt(h,Ya):zs(h)?[h]:ms(GR(Nr(h)))}function Loe(h){var d=++Yee;return Nr(h)+d}var Foe=m0(function(h,d){return h+d},0),joe=j2("ceil"),Hoe=m0(function(h,d){return h/d},1),zoe=j2("floor");function Uoe(h){return h&&h.length?f0(h,$s,S2):t}function Woe(h,d){return h&&h.length?f0(h,Ft(d,2),S2):t}function qoe(h){return Ls(h,$s)}function Koe(h,d){return Ls(h,Ft(d,2))}function Voe(h){return h&&h.length?f0(h,$s,A2):t}function Goe(h,d){return h&&h.length?f0(h,Ft(d,2),A2):t}var Yoe=m0(function(h,d){return h*d},1),Zoe=j2("round"),Xoe=m0(function(h,d){return h-d},0);function Joe(h){return h&&h.length?Fi(h,$s):0}function Qoe(h,d){return h&&h.length?Fi(h,Ft(d,2)):0}return G.after=$ie,G.ary=sD,G.assign=lse,G.assignIn=bD,G.assignInWith=C0,G.assignWith=use,G.at=cse,G.before=oD,G.bind=J2,G.bindAll=voe,G.bindKey=aD,G.castArray=Nie,G.chain=rD,G.chunk=zre,G.compact=Ure,G.concat=Wre,G.cond=goe,G.conforms=yoe,G.constant=sE,G.countBy=Jne,G.create=fse,G.curry=lD,G.curryRight=uD,G.debounce=cD,G.defaults=hse,G.defaultsDeep=dse,G.defer=_ie,G.delay=xie,G.difference=qre,G.differenceBy=Kre,G.differenceWith=Vre,G.drop=Gre,G.dropRight=Yre,G.dropRightWhile=Zre,G.dropWhile=Xre,G.fill=Jre,G.filter=eie,G.flatMap=nie,G.flatMapDeep=iie,G.flatMapDepth=sie,G.flatten=JR,G.flattenDeep=Qre,G.flattenDepth=ene,G.flip=Eie,G.flow=boe,G.flowRight=woe,G.fromPairs=tne,G.functions=wse,G.functionsIn=$se,G.groupBy=oie,G.initial=nne,G.intersection=ine,G.intersectionBy=sne,G.intersectionWith=one,G.invert=xse,G.invertBy=Ese,G.invokeMap=lie,G.iteratee=oE,G.keyBy=uie,G.keys=ui,G.keysIn=ws,G.map=S0,G.mapKeys=kse,G.mapValues=Tse,G.matches=$oe,G.matchesProperty=_oe,G.memoize=T0,G.merge=Ise,G.mergeWith=wD,G.method=xoe,G.methodOf=Eoe,G.mixin=aE,G.negate=I0,G.nthArg=koe,G.omit=Ase,G.omitBy=Ose,G.once=Sie,G.orderBy=cie,G.over=Toe,G.overArgs=kie,G.overEvery=Ioe,G.overSome=Aoe,G.partial=Q2,G.partialRight=fD,G.partition=fie,G.pick=Cse,G.pickBy=$D,G.property=ID,G.propertyOf=Ooe,G.pull=cne,G.pullAll=eD,G.pullAllBy=fne,G.pullAllWith=hne,G.pullAt=dne,G.range=Coe,G.rangeRight=Poe,G.rearg=Tie,G.reject=pie,G.remove=pne,G.rest=Iie,G.reverse=Z2,G.sampleSize=gie,G.set=Nse,G.setWith=Rse,G.shuffle=yie,G.slice=vne,G.sortBy=wie,G.sortedUniq=_ne,G.sortedUniqBy=xne,G.split=noe,G.spread=Aie,G.tail=Ene,G.take=Sne,G.takeRight=kne,G.takeRightWhile=Tne,G.takeWhile=Ine,G.tap=Une,G.throttle=Oie,G.thru=E0,G.toArray=gD,G.toPairs=_D,G.toPairsIn=xD,G.toPath=Moe,G.toPlainObject=mD,G.transform=Dse,G.unary=Cie,G.union=Ane,G.unionBy=One,G.unionWith=Cne,G.uniq=Pne,G.uniqBy=Nne,G.uniqWith=Rne,G.unset=Bse,G.unzip=X2,G.unzipWith=tD,G.update=Mse,G.updateWith=Lse,G.values=Cd,G.valuesIn=Fse,G.without=Dne,G.words=kD,G.wrap=Pie,G.xor=Bne,G.xorBy=Mne,G.xorWith=Lne,G.zip=Fne,G.zipObject=jne,G.zipObjectDeep=Hne,G.zipWith=zne,G.entries=_D,G.entriesIn=xD,G.extend=bD,G.extendWith=C0,aE(G,G),G.add=Foe,G.attempt=TD,G.camelCase=Use,G.capitalize=ED,G.ceil=joe,G.clamp=jse,G.clone=Rie,G.cloneDeep=Bie,G.cloneDeepWith=Mie,G.cloneWith=Die,G.conformsTo=Lie,G.deburr=SD,G.defaultTo=moe,G.divide=Hoe,G.endsWith=Wse,G.eq=la,G.escape=qse,G.escapeRegExp=Kse,G.every=Qne,G.find=tie,G.findIndex=ZR,G.findKey=pse,G.findLast=rie,G.findLastIndex=XR,G.findLastKey=vse,G.floor=zoe,G.forEach=nD,G.forEachRight=iD,G.forIn=gse,G.forInRight=yse,G.forOwn=mse,G.forOwnRight=bse,G.get=rE,G.gt=Fie,G.gte=jie,G.has=_se,G.hasIn=nE,G.head=QR,G.identity=$s,G.includes=aie,G.indexOf=rne,G.inRange=Hse,G.invoke=Sse,G.isArguments=kf,G.isArray=Zt,G.isArrayBuffer=Hie,G.isArrayLike=bs,G.isArrayLikeObject=In,G.isBoolean=zie,G.isBuffer=Ku,G.isDate=Uie,G.isElement=Wie,G.isEmpty=qie,G.isEqual=Kie,G.isEqualWith=Vie,G.isError=eE,G.isFinite=Gie,G.isFunction=Fl,G.isInteger=hD,G.isLength=A0,G.isMap=dD,G.isMatch=Yie,G.isMatchWith=Zie,G.isNaN=Xie,G.isNative=Jie,G.isNil=ese,G.isNull=Qie,G.isNumber=pD,G.isObject=dn,G.isObjectLike=mn,G.isPlainObject=Pg,G.isRegExp=tE,G.isSafeInteger=tse,G.isSet=vD,G.isString=O0,G.isSymbol=zs,G.isTypedArray=Od,G.isUndefined=rse,G.isWeakMap=nse,G.isWeakSet=ise,G.join=ane,G.kebabCase=Vse,G.last=Eo,G.lastIndexOf=lne,G.lowerCase=Gse,G.lowerFirst=Yse,G.lt=sse,G.lte=ose,G.max=Uoe,G.maxBy=Woe,G.mean=qoe,G.meanBy=Koe,G.min=Voe,G.minBy=Goe,G.stubArray=uE,G.stubFalse=cE,G.stubObject=Noe,G.stubString=Roe,G.stubTrue=Doe,G.multiply=Yoe,G.nth=une,G.noConflict=Soe,G.noop=lE,G.now=k0,G.pad=Zse,G.padEnd=Xse,G.padStart=Jse,G.parseInt=Qse,G.random=zse,G.reduce=hie,G.reduceRight=die,G.repeat=eoe,G.replace=toe,G.result=Pse,G.round=Zoe,G.runInContext=ee,G.sample=vie,G.size=mie,G.snakeCase=roe,G.some=bie,G.sortedIndex=gne,G.sortedIndexBy=yne,G.sortedIndexOf=mne,G.sortedLastIndex=bne,G.sortedLastIndexBy=wne,G.sortedLastIndexOf=$ne,G.startCase=ioe,G.startsWith=soe,G.subtract=Xoe,G.sum=Joe,G.sumBy=Qoe,G.template=ooe,G.times=Boe,G.toFinite=jl,G.toInteger=rr,G.toLength=yD,G.toLower=aoe,G.toNumber=So,G.toSafeInteger=ase,G.toString=Nr,G.toUpper=loe,G.trim=uoe,G.trimEnd=coe,G.trimStart=foe,G.truncate=hoe,G.unescape=doe,G.uniqueId=Loe,G.upperCase=poe,G.upperFirst=iE,G.each=nD,G.eachRight=iD,G.first=QR,aE(G,function(){var h={};return Va(G,function(d,E){qt.call(G.prototype,E)||(h[E]=d)}),h}(),{chain:!1}),G.VERSION=n,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){G[h].placeholder=G}),se(["drop","take"],function(h,d){br.prototype[h]=function(E){E=E===t?1:Qn(rr(E),0);var R=this.__filtered__&&!d?new br(this):this.clone();return R.__filtered__?R.__takeCount__=ji(E,R.__takeCount__):R.__views__.push({size:ji(E,ze),type:h+(R.__dir__<0?"Right":"")}),R},br.prototype[h+"Right"]=function(E){return this.reverse()[h](E).reverse()}}),se(["filter","map","takeWhile"],function(h,d){var E=d+1,R=E==X||E==Z;br.prototype[h]=function(W){var J=this.clone();return J.__iteratees__.push({iteratee:Ft(W,3),type:E}),J.__filtered__=J.__filtered__||R,J}}),se(["head","last"],function(h,d){var E="take"+(d?"Right":"");br.prototype[h]=function(){return this[E](1).value()[0]}}),se(["initial","tail"],function(h,d){var E="drop"+(d?"":"Right");br.prototype[h]=function(){return this.__filtered__?new br(this):this[E](1)}}),br.prototype.compact=function(){return this.filter($s)},br.prototype.find=function(h){return this.filter(h).head()},br.prototype.findLast=function(h){return this.reverse().find(h)},br.prototype.invokeMap=cr(function(h,d){return typeof h=="function"?new br(this):this.map(function(E){return kg(E,h,d)})}),br.prototype.reject=function(h){return this.filter(I0(Ft(h)))},br.prototype.slice=function(h,d){h=rr(h);var E=this;return E.__filtered__&&(h>0||d<0)?new br(E):(h<0?E=E.takeRight(-h):h&&(E=E.drop(h)),d!==t&&(d=rr(d),E=d<0?E.dropRight(-d):E.take(d-h)),E)},br.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},br.prototype.toArray=function(){return this.take(ze)},Va(br.prototype,function(h,d){var E=/^(?:filter|find|map|reject)|While$/.test(d),R=/^(?:head|last)$/.test(d),W=G[R?"take"+(d=="last"?"Right":""):d],J=R||/^find/.test(d);W&&(G.prototype[d]=function(){var ae=this.__wrapped__,ve=R?[1]:arguments,ke=ae instanceof br,Ke=ve[0],Ve=ke||Zt(ae),Ze=function(yr){var wr=W.apply(G,Yt([yr],ve));return R&&gt?wr[0]:wr};Ve&&E&&typeof Ke=="function"&&Ke.length!=1&&(ke=Ve=!1);var gt=this.__chain__,At=!!this.__actions__.length,zt=J&&!gt,nr=ke&&!At;if(!J&&Ve){ae=nr?ae:new br(this);var Ut=h.apply(ae,ve);return Ut.__actions__.push({func:E0,args:[Ze],thisArg:t}),new $o(Ut,gt)}return zt&&nr?h.apply(this,ve):(Ut=this.thru(Ze),zt?R?Ut.value()[0]:Ut.value():Ut)})}),se(["pop","push","shift","sort","splice","unshift"],function(h){var d=Xn[h],E=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",R=/^(?:pop|shift)$/.test(h);G.prototype[h]=function(){var W=arguments;if(R&&!this.__chain__){var J=this.value();return d.apply(Zt(J)?J:[],W)}return this[E](function(ae){return d.apply(Zt(ae)?ae:[],W)})}}),Va(br.prototype,function(h,d){var E=G[d];if(E){var R=E.name+"";qt.call(Sd,R)||(Sd[R]=[]),Sd[R].push({name:d,func:E})}}),Sd[y0(t,_).name]=[{name:"wrapper",func:t}],br.prototype.clone=dte,br.prototype.reverse=pte,br.prototype.value=vte,G.prototype.at=Wne,G.prototype.chain=qne,G.prototype.commit=Kne,G.prototype.next=Vne,G.prototype.plant=Yne,G.prototype.reverse=Zne,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Xne,G.prototype.first=G.prototype.head,bg&&(G.prototype[bg]=Gne),G},Oe=Ie();na?((na.exports=Oe)._=Oe,wd._=Oe):fn._=Oe}).call(Cn)})(Fw,Fw.exports);var $n=Fw.exports;const np=io($n),iB="c2fc1ad0-f76f-11ec-b939-0242ac120002",sB=new Set;vn.config({driver:[vn.LOCALSTORAGE,vn.INDEXEDDB,vn.WEBSQL]});let que=class zz{constructor(r="",t=null){oe(this,"id");oe(this,"parent");oe(this,"children",new Map);oe(this,"on_subscriptions",new Map);oe(this,"map_subscriptions",new Map);oe(this,"value");oe(this,"counter",0);oe(this,"loaded",!1);oe(this,"saveLocalForage",np.throttle(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const r=Array.from(this.children.keys());await vn.setItem(this.id,r)}else this.value===void 0?await vn.removeItem(this.id):await vn.setItem(this.id,this.value===null?iB:this.value)},500));oe(this,"loadLocalForage",np.throttle(async()=>{if(sB.has(this.id))return;let r=await vn.getItem(this.id);if(r===null)r=void 0,sB.add(this.id);else if(r===iB)r=null;else if(Array.isArray(r)){const t={};await Promise.all(r.map(async n=>{t[n]=await this.get(n).once()})),r=t}else this.value=r;return this.loaded=!0,r},500));oe(this,"doCallbacks",np.debounce(()=>{for(const[r,t]of this.on_subscriptions){const n=()=>this.on_subscriptions.delete(r);this.once(t,n,!1)}if(this.parent){this.parent.doCallbacks();for(const[r,t]of this.parent.map_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(r)};this.once(t,n,!1)}}},20,{maxWait:40}));this.id=r,this.parent=t}get(r){const t=this.children.get(r);if(t)return t;const n=new zz(`${this.id}/${r}`,this);return this.children.set(r,n),this.saveLocalForage(),n}async put(r){if(Array.isArray(r))throw new Error("Sorry, we don't deal with arrays");return typeof r=="object"&&r!==null?(this.value=void 0,await Promise.all(np.map(r,(t,n)=>this.get(n).put(t)))):(this.children=new Map,this.value=r),this.doCallbacks(),this.saveLocalForage()}async once(r,t,n=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,t)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||n)return r&&r(i,this.id.slice(this.id.lastIndexOf("/")+1),t||(()=>{})),i}on(r){const t=this.counter++;this.on_subscriptions.set(t,r);const n=()=>this.on_subscriptions.delete(t);return this.once(r,n,!1),n}map(r){var s;const t=this.counter++;this.map_subscriptions.set(t,r);const n=()=>this.map_subscriptions.delete(t),i=()=>{for(const o of this.children.values())o.once(r,n,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),n}};const Re=new que;var ku={},gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.createBitArray=Kue;gv.fromBits=Gue;gv.toBits=Vue;function Kue(e){return new Uint8Array(e)}function Uz(e,r,t,n,i){var s=(1<<n)-1,o=0,a=0,l=0;if(e.forEach(function(u){for(o=(o<<r)+u,a+=r;a>=n;)a-=n,t[l]=o>>a&s,l+=1}),i)a>0&&(t[l]=o<<n-a&s);else{if(a>=r)throw new Error("Excessive padding: ".concat(a," (max ").concat(r-1," allowed)"));if(o%(1<<a)!==0)throw new Error("Non-zero padding")}}function Vue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return Uz(e,8,t,r,!0),t}function Gue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return Uz(e,r,t,8,!1),t}var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.CHECKSUM_LENGTH=void 0;Na.createChecksum=Jue;Na.decode=Gz;Na.decodeWithPrefix=ece;Na.detectCase=tce;Na.encode=Que;Na.expandPrefix=Vz;Na.verifyChecksum=Xue;var Wz=gv,UT="qpzry9x8gf2tvdw0s3jn54khce6mua7l",qz=734539939,oB=33,aB=126,WT=6;Na.CHECKSUM_LENGTH=WT;var Yue=function(){for(var e=new Map,r=0;r<UT.length;r+=1)e.set(UT[r],r);return e}(),Zue=[996825010,642813549,513874426,1027748829,705979059];function Kz(e){return e.reduce(function(r,t){var n=r>>25,i=(r&33554431)<<5^t;return Zue.reduce(function(s,o,a){return n>>a&1?s^o:s},i)},1)}function Vz(e,r){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);r[t]=n>>5,r[t+e.length+1]=n&31}r[e.length]=0}function Xue(e){switch(Kz(e)){case 1:return"bech32";case qz:return"bech32m";default:return}}function Jue(e,r){var t;switch(r){case"bech32":t=1;break;case"bech32m":t=qz;break;default:throw Error("Invalid encoding value: ".concat(r,"; expected bech32 or bech32m"))}for(var n=Kz(e)^t,i=0;i<WT;i+=1){var s=5*(5-i);e[e.length-WT+i]=n>>s&31}}function Que(e){return e.reduce(function(r,t){return r+UT[t]},"")}function Gz(e,r){for(var t=r||(0,Wz.createBitArray)(e.length),n=0;n<e.length;n+=1){var i=Yue.get(e[n]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[n]));t[n]=i}return t}function ece(e,r){var t=r.length+2*e.length+1,n=(0,Wz.createBitArray)(t);return Vz(e,n.subarray(0,2*e.length+1)),Gz(r,n.subarray(2*e.length+1)),n}function tce(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",t=!1,n=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<oB||s>aB)throw new TypeError("Invalid char in ".concat(r,": ").concat(s,"; ")+"should be in ASCII range ".concat(oB,"-").concat(aB));n=n||s>=65&&s<=90,t=t||s>=97&&s<=122}if(t&&n)throw new TypeError("Mixed-case ".concat(r));return n?"upper":t?"lower":null}Object.defineProperty(ku,"__esModule",{value:!0});ku.BitcoinAddress=void 0;var qT=ku.decode=sce;ku.decodeTo5BitArray=A3;var lB=ku.encode=ice;ku.encode5BitArray=I3;ku.from5BitArray=T3;ku.to5BitArray=k3;var Py=gv,jo=Na;function rce(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function uB(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nce(e,r,t){return r&&uB(e.prototype,r),t&&uB(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var jw=90;function k3(e,r){var t=Math.ceil(e.length*8/5),n=r||(0,Py.createBitArray)(t);return(0,Py.toBits)(e,5,n)}function T3(e,r){var t=Math.floor(e.length*5/8),n=r||new Uint8Array(t);return(0,Py.fromBits)(e,5,n)}function I3(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+r.length+jo.CHECKSUM_LENGTH;if(i-e.length>jw)throw new Error("Message to be produced is too long (max ".concat(jw," supported)"));var s=(t=(0,jo.detectCase)(e,"prefix"))!==null&&t!==void 0?t:"lower",o=(0,Py.createBitArray)(i);(0,jo.expandPrefix)(e.toLowerCase(),o.subarray(0,2*e.length+1));var a=o.subarray(2*e.length+1,o.length-jo.CHECKSUM_LENGTH);a.set(r),(0,jo.createChecksum)(o,n);var l=(0,jo.encode)(o.subarray(2*e.length+1));return s==="upper"&&(l=l.toUpperCase()),"".concat(e,"1").concat(l)}function ice(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return I3(e,k3(r),t)}function A3(e){if(e.length>jw)throw new TypeError("Message too long; max ".concat(jw," expected"));(0,jo.detectCase)(e);var r=e.toLowerCase(),t=r.lastIndexOf("1");if(t<0)throw new Error('No separator char ("1") found');if(t>e.length-jo.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(jo.CHECKSUM_LENGTH," chars expected)"));var n=r.substring(0,t),i=(0,jo.decodeWithPrefix)(n,r.substring(t+1)),s=(0,jo.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:n,encoding:s,data:i.subarray(2*n.length+1,i.length-jo.CHECKSUM_LENGTH)}}function sce(e){var r=A3(e),t=r.prefix,n=r.encoding,i=r.data;return{prefix:t,encoding:n,data:T3(i)}}var oce=function(){function e(r,t,n){if(rce(this,e),r!=="bc"&&r!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(t<0||t>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(n.length<2||n.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(t===0&&n.length!==20&&n.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=r,this.scriptVersion=t,this.data=n}return nce(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var t=Math.ceil(this.data.length*8/5),n=(0,Py.createBitArray)(t+1);n[0]=this.scriptVersion,k3(this.data,n.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return I3(this.prefix,n,i)}}],[{key:"decode",value:function(t){var n=A3(t),i=n.prefix,s=n.data,o=n.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var a=s[0];if(a===0&&o!=="bech32")throw Error("Unexpected encoding ".concat(o," used for version 0 script"));if(a>0&&o!=="bech32m")throw Error("Unexpected encoding ".concat(o," used for version ").concat(a," script"));return new this(i,a,T3(s.subarray(1)))}}]),e}();ku.BitcoinAddress=oce;function KT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ace(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Yz(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function lce(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");KT(e.outputLen),KT(e.blockLen)}function uce(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function cce(e,r){Yz(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Kf={number:KT,bool:ace,bytes:Yz,hash:lce,exists:uce,output:cce},gE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const O3=e=>e instanceof Uint8Array,yE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Za=(e,r)=>e<<32-r|e>>>r,fce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!fce)throw new Error("Non little-endian hardware is not supported");const hce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Ho(e){if(!O3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=hce[e[t]];return r}function Lp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function dce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function C3(e){if(typeof e=="string"&&(e=dce(e)),!O3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Zz(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!O3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let Xz=class{clone(){return this._cloneInto()}};function Jz(e){const r=n=>e().update(C3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function P3(e=32){if(gE&&typeof gE.getRandomValues=="function")return gE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function pce(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let vce=class extends Xz{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=yE(this.buffer)}update(r){Kf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=C3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=yE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Kf.exists(this),Kf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;pce(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=yE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const gce=(e,r,t)=>e&r^~e&t,yce=(e,r,t)=>e&r^e&t^r&t,mce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gu=new Uint32Array(64);let Qz=class extends vce{constructor(){super(64,32,8,!1),this.A=Vu[0]|0,this.B=Vu[1]|0,this.C=Vu[2]|0,this.D=Vu[3]|0,this.E=Vu[4]|0,this.F=Vu[5]|0,this.G=Vu[6]|0,this.H=Vu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Gu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Gu[c-15],y=Gu[c-2],w=Za(p,7)^Za(p,18)^p>>>3,b=Za(y,17)^Za(y,19)^y>>>10;Gu[c]=b+Gu[c-7]+w+Gu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const p=Za(a,6)^Za(a,11)^Za(a,25),y=f+p+gce(a,l,u)+mce[c]+Gu[c]|0,b=(Za(n,2)^Za(n,13)^Za(n,22))+yce(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Gu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},bce=class extends Qz{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Fp=Jz(()=>new Qz);Jz(()=>new bce);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eU=BigInt(0),b_=BigInt(1),wce=BigInt(2),w_=e=>e instanceof Uint8Array,$ce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function jp(e){if(!w_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=$ce[e[t]];return r}function tU(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function N3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Hp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Ps(e){return N3(jp(e))}function R3(e){if(!w_(e))throw new Error("Uint8Array expected");return N3(jp(Uint8Array.from(e).reverse()))}function Ic(e,r){return Hp(e.toString(16).padStart(r*2,"0"))}function rU(e,r){return Ic(e,r).reverse()}function _ce(e){return Hp(tU(e))}function Ii(e,r,t){let n;if(typeof r=="string")try{n=Hp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(w_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function kh(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!w_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function xce(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Ece(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Sce(e){let r;for(r=0;e>eU;e>>=b_,r+=1);return r}function kce(e,r){return e>>BigInt(r)&b_}const Tce=(e,r,t)=>e|(t?b_:eU)<<BigInt(r),D3=e=>(wce<<BigInt(e-1))-b_,mE=e=>new Uint8Array(e),cB=e=>Uint8Array.from(e);function nU(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=mE(e),i=mE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=mE())=>{i=a(cB([0]),c),n=a(),c.length!==0&&(i=a(cB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const p=[];for(;c<r;){n=a();const y=n.slice();p.push(y),c+=n.length}return kh(...p)};return(c,p)=>{o(),l(c);let y;for(;!(y=p(u()));)l();return o(),y}}const Ice={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Em(e,r,t={}){const n=(i,s,o)=>{const a=Ice[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Ace=Object.freeze(Object.defineProperty({__proto__:null,bitGet:kce,bitLen:Sce,bitMask:D3,bitSet:Tce,bytesToHex:jp,bytesToNumberBE:Ps,bytesToNumberLE:R3,concatBytes:kh,createHmacDrbg:nU,ensureBytes:Ii,equalBytes:xce,hexToBytes:Hp,hexToNumber:N3,numberToBytesBE:Ic,numberToBytesLE:rU,numberToHexUnpadded:tU,numberToVarBytesBE:_ce,utf8ToBytes:Ece,validateObject:Em},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gi=BigInt(0),Pn=BigInt(1),Bf=BigInt(2),Oce=BigInt(3),VT=BigInt(4),fB=BigInt(5),hB=BigInt(8);BigInt(9);BigInt(16);function Oi(e,r){const t=e%r;return t>=gi?t:r+t}function Cce(e,r,t){if(t<=gi||r<gi)throw new Error("Expected power/modulo > 0");if(t===Pn)return gi;let n=Pn;for(;r>gi;)r&Pn&&(n=n*e%t),e=e*e%t,r>>=Pn;return n}function To(e,r,t){let n=e;for(;r-- >gi;)n*=n,n%=t;return n}function GT(e,r){if(e===gi||r<=gi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=Oi(e,r),n=r,i=gi,s=Pn;for(;t!==gi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Pn)throw new Error("invert: does not exist");return Oi(i,r)}function Pce(e){const r=(e-Pn)/Bf;let t,n,i;for(t=e-Pn,n=0;t%Bf===gi;t/=Bf,n++);for(i=Bf;i<e&&Cce(i,r,e)!==e-Pn;i++);if(n===1){const o=(e+Pn)/VT;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Pn)/Bf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(p);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Pn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),p=a.mul(p,f),u=y}return c}}function Nce(e){if(e%VT===Oce){const r=(e+Pn)/VT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%hB===fB){const r=(e-fB)/hB;return function(n,i){const s=n.mul(i,Bf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Bf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Pce(e)}const Rce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dce(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Rce.reduce((n,i)=>(n[i]="function",n),r);return Em(e,t)}function Bce(e,r,t){if(t<gi)throw new Error("Expected power > 0");if(t===gi)return e.ONE;if(t===Pn)return r;let n=e.ONE,i=r;for(;t>gi;)t&Pn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Pn;return n}function Mce(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function B3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Lce(e,r,t=!1,n={}){if(e<=gi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=B3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Nce(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:D3(i),ZERO:gi,ONE:Pn,create:l=>Oi(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return gi<=l&&l<e},is0:l=>l===gi,isOdd:l=>(l&Pn)===Pn,neg:l=>Oi(-l,e),eql:(l,u)=>l===u,sqr:l=>Oi(l*l,e),add:(l,u)=>Oi(l+u,e),sub:(l,u)=>Oi(l-u,e),mul:(l,u)=>Oi(l*u,e),pow:(l,u)=>Bce(a,l,u),div:(l,u)=>Oi(l*GT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>GT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Mce(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?rU(l,s):Ic(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?R3(l):Ps(l)}});return Object.freeze(a)}function Fce(e,r,t=!1){e=Ii("privateHash",e);const n=e.length,i=B3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?R3(e):Ps(e);return Oi(s,r-Pn)+Pn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jce=BigInt(0),bE=BigInt(1);function Hce(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>jce;)s&bE&&(o=o.add(a)),a=a.double(),s>>=bE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let p=1;p<a;p++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=p,o+=bE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function iU(e){return Dce(e.Fp),Em(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...B3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zce(e){const r=iU(e);Em(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Uce,hexToBytes:Wce}=Ace,Vf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Vf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Uce(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Vf,t=typeof e=="string"?Wce(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Vf._parseInt(t.subarray(2)),{d:o,l:a}=Vf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Xl=BigInt(0),No=BigInt(1);BigInt(2);const dB=BigInt(3);BigInt(4);function qce(e){const r=zce(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return kh(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Xl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=jp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:Ps(Ii("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=Oi(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ii("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,dB),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),L=t.mul(I,I),q=t.mul(A,x);return q=t.add(q,q),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,L),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(q,O),g=t.mul(_,g),L=t.mul(b,L),q=t.sub(M,L),q=t.mul(b,q),q=t.add(q,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,L),M=t.mul(M,q),C=t.add(C,M),L=t.mul(x,I),L=t.add(L,L),M=t.mul(L,q),O=t.sub(O,M),g=t.mul(L,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,L=t.mul(r.b,dB);let q=t.mul(T,x),Q=t.mul(_,I),te=t.mul(A,O),X=t.add(T,_),j=t.add(x,I);X=t.mul(X,j),j=t.add(q,Q),X=t.sub(X,j),j=t.add(T,A);let Z=t.add(x,O);return j=t.mul(j,Z),Z=t.add(q,te),j=t.sub(j,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(Q,te),Z=t.sub(Z,C),M=t.mul(B,j),C=t.mul(L,te),M=t.add(C,M),C=t.sub(Q,M),M=t.add(Q,M),g=t.mul(C,M),Q=t.add(q,q),Q=t.add(Q,q),te=t.mul(B,te),j=t.mul(L,j),Q=t.add(Q,te),te=t.sub(q,te),te=t.mul(B,te),j=t.add(j,te),q=t.mul(Q,j),g=t.add(g,q),q=t.mul(Z,j),C=t.mul(X,C),C=t.sub(C,q),q=t.mul(X,Q),M=t.mul(Z,M),M=t.add(M,q),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Xl)return T;if(a(b),b===No)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>Xl||O>Xl;)x&No&&(C=C.add(M)),O&No&&(g=g.add(M)),M=M.double(),x>>=No,O>>=No;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:L,f:q}=this.wNAF(g);M=y.constTimeNegate(I,M),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,x.beta),L.py,L.pz),_=M.add(L),A=B.add(q)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Xl||C===No||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===No)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===No?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return jp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const p=r.nBitLength,y=Hce(c,r.endo?Math.ceil(p/2):p);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Kce(e){const r=iU(e);return Em(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Vce(e){const r=Kce(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Xl<j&&j<t.ORDER}function a(j){return Oi(j,n)}function l(j){return GT(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:p}=qce({...r,toBytes(j,Z,ie){const _e=Z.toAffine(),we=t.toBytes(_e.x),Ce=kh;return ie?Ce(Uint8Array.from([Z.hasEvenY()?2:3]),we):Ce(Uint8Array.from([4]),we,t.toBytes(_e.y))},fromBytes(j){const Z=j.length,ie=j[0],_e=j.subarray(1);if(Z===i&&(ie===2||ie===3)){const we=Ps(_e);if(!o(we))throw new Error("Point is not on curve");const Ce=c(we);let ze=t.sqrt(Ce);const Ge=(ze&No)===No;return(ie&1)===1!==Ge&&(ze=t.neg(ze)),{x:we,y:ze}}else if(Z===s&&ie===4){const we=t.fromBytes(_e.subarray(0,t.BYTES)),Ce=t.fromBytes(_e.subarray(t.BYTES,2*t.BYTES));return{x:we,y:Ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>jp(Ic(j,r.nByteLength));function w(j){const Z=n>>No;return j>Z}function b(j){return w(j)?a(-j):j}const T=(j,Z,ie)=>Ps(j.slice(Z,ie));class _{constructor(Z,ie,_e){this.r=Z,this.s=ie,this.recovery=_e,this.assertValidity()}static fromCompact(Z){const ie=r.nByteLength;return Z=Ii("compactSignature",Z,ie*2),new _(T(Z,0,ie),T(Z,ie,2*ie))}static fromDER(Z){const{r:ie,s:_e}=Vf.toSig(Ii("DER",Z));return new _(ie,_e)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:ie,s:_e,recovery:we}=this,Ce=g(Ii("msgHash",Z));if(we==null||![0,1,2,3].includes(we))throw new Error("recovery id invalid");const ze=we===2||we===3?ie+r.n:ie;if(ze>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=we&1?"03":"02",it=u.fromHex(Ge+y(ze)),xe=l(ze),ge=a(-Ce*xe),Te=a(_e*xe),Fe=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!Fe)throw new Error("point at infinify");return Fe.assertValidity(),Fe}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Hp(this.toDERHex())}toDERHex(){return Vf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Hp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),Z=Fce(j,n);return Ic(Z,r.nByteLength)},precompute(j=8,Z=u.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function x(j,Z=!0){return u.fromPrivateKey(j).toRawBytes(Z)}function I(j){const Z=j instanceof Uint8Array,ie=typeof j=="string",_e=(Z||ie)&&j.length;return Z?_e===i||_e===s:ie?_e===2*i||_e===2*s:j instanceof u}function O(j,Z,ie=!0){if(I(j))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(f(j)).toRawBytes(ie)}const C=r.bits2int||function(j){const Z=Ps(j),ie=j.length*8-r.nBitLength;return ie>0?Z>>BigInt(ie):Z},g=r.bits2int_modN||function(j){return a(C(j))},M=D3(r.nBitLength);function B(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Xl<=j&&j<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Ic(j,r.nByteLength)}function L(j,Z,ie=q){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:_e,randomBytes:we}=r;let{lowS:Ce,prehash:ze,extraEntropy:Ge}=ie;Ce==null&&(Ce=!0),j=Ii("msgHash",j),ze&&(j=Ii("prehashed msgHash",_e(j)));const it=g(j),xe=f(Z),ge=[B(xe),B(it)];if(Ge!=null){const S=Ge===!0?we(t.BYTES):Ge;ge.push(Ii("extraEntropy",S,t.BYTES))}const Te=kh(...ge),Fe=it;function $(S){const N=C(S);if(!p(N))return;const F=l(N),H=u.BASE.multiply(N).toAffine(),V=a(H.x);if(V===Xl)return;const le=a(F*a(Fe+V*xe));if(le===Xl)return;let ye=(H.x===V?0:2)|Number(H.y&No),Ue=le;return Ce&&w(le)&&(Ue=b(le),ye^=1),new _(V,Ue,ye)}return{seed:Te,k2sig:$}}const q={lowS:r.lowS,prehash:!1},Q={lowS:r.lowS,prehash:!1};function te(j,Z,ie=q){const{seed:_e,k2sig:we}=L(j,Z,ie),Ce=r;return nU(Ce.hash.outputLen,Ce.nByteLength,Ce.hmac)(_e,we)}u.BASE._setWindowSize(8);function X(j,Z,ie,_e=Q){var H;const we=j;if(Z=Ii("msgHash",Z),ie=Ii("publicKey",ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:ze}=_e;let Ge,it;try{if(typeof we=="string"||we instanceof Uint8Array)try{Ge=_.fromDER(we)}catch(V){if(!(V instanceof Vf.Err))throw V;Ge=_.fromCompact(we)}else if(typeof we=="object"&&typeof we.r=="bigint"&&typeof we.s=="bigint"){const{r:V,s:le}=we;Ge=new _(V,le)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&Ge.hasHighS())return!1;ze&&(Z=r.hash(Z));const{r:xe,s:ge}=Ge,Te=g(Z),Fe=l(ge),$=a(Te*Fe),S=a(xe*Fe),N=(H=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:H.toAffine();return N?a(N.x)===xe:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:te,verify:X,ProjectivePoint:u,Signature:_,utils:A}}let sU=class extends Xz{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Kf.hash(r);const n=C3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Kf.exists(this),this.iHash.update(r),this}digestInto(r){Kf.exists(this),Kf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const oU=(e,r,t)=>new sU(e,r).update(t).digest();oU.create=(e,r)=>new sU(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gce(e){return{hash:e,hmac:(r,...t)=>oU(e,r,Zz(...t)),randomBytes:P3}}function Yce(e,r){const t=n=>Vce({...e,...Gce(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Hw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aU=BigInt(1),zw=BigInt(2),pB=(e,r)=>(e+r/zw)/r;function lU(e){const r=$_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=To(f,t,r)*f%r,p=To(c,t,r)*f%r,y=To(p,zw,r)*u%r,w=To(y,i,r)*y%r,b=To(w,s,r)*w%r,T=To(b,a,r)*b%r,_=To(T,l,r)*T%r,A=To(_,a,r)*b%r,x=To(A,t,r)*f%r,I=To(x,o,r)*w%r,O=To(I,n,r)*u%r,C=To(O,zw,r);if(!YT.eql(YT.sqr(C),e))throw new Error("Cannot find square root");return C}const YT=Lce($_,void 0,void 0,{sqrt:lU}),Sm=Yce({a:BigInt(0),b:BigInt(7),Fp:YT,n:Hw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Hw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-aU*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=pB(s*e,r),l=pB(-n*e,r);let u=Oi(e-a*t-l*i,r),f=Oi(-a*n-l*s,r);const c=u>o,p=f>o;if(c&&(u=r-u),p&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:p,k2:f}}}},Fp),__=BigInt(0),uU=e=>typeof e=="bigint"&&__<e&&e<$_,Zce=e=>typeof e=="bigint"&&__<e&&e<Hw,vB={};function Uw(e,...r){let t=vB[e];if(t===void 0){const n=Fp(Uint8Array.from(e,i=>i.charCodeAt(0)));t=kh(n,n),vB[e]=t}return Fp(kh(t,...r))}const M3=e=>e.toRawBytes(!0).slice(1),ZT=e=>Ic(e,32),wE=e=>Oi(e,$_),Ny=e=>Oi(e,Hw),L3=Sm.ProjectivePoint,Xce=(e,r,t)=>L3.BASE.multiplyAndAddUnsafe(e,r,t);function XT(e){let r=Sm.utils.normPrivateKeyToScalar(e),t=L3.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ny(-r),bytes:M3(t)}}function cU(e){if(!uU(e))throw new Error("bad x: need 0 < x < p");const r=wE(e*e),t=wE(r*e+BigInt(7));let n=lU(t);n%zw!==__&&(n=wE(-n));const i=new L3(e,n,aU);return i.assertValidity(),i}function fU(...e){return Ny(Ps(Uw("BIP0340/challenge",...e)))}function Jce(e){return XT(e).bytes}function Qce(e,r,t=P3(32)){const n=Ii("message",e),{bytes:i,scalar:s}=XT(r),o=Ii("auxRand",t,32),a=ZT(s^Ps(Uw("BIP0340/aux",o))),l=Uw("BIP0340/nonce",a,i,n),u=Ny(Ps(l));if(u===__)throw new Error("sign failed: k is zero");const{bytes:f,scalar:c}=XT(u),p=fU(f,i,n),y=new Uint8Array(64);if(y.set(f,0),y.set(ZT(Ny(c+p*s)),32),!hU(y,n,i))throw new Error("sign: Invalid signature produced");return y}function hU(e,r,t){const n=Ii("signature",e,64),i=Ii("message",r),s=Ii("publicKey",t,32);try{const o=cU(Ps(s)),a=Ps(n.subarray(0,32));if(!uU(a))return!1;const l=Ps(n.subarray(32,64));if(!Zce(l))return!1;const u=fU(ZT(a),M3(o),i),f=Xce(o,l,Ny(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const yv=(()=>({getPublicKey:Jce,sign:Qce,verify:hU,utils:{randomPrivateKey:Sm.utils.randomPrivateKey,lift_x:cU,pointToBytes:M3,numberToBytesBE:Ic,bytesToNumberBE:Ps,taggedHash:Uw,mod:Oi}}))();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Ra(...e){const r=(i,s)=>o=>i(s(o)),t=Array.from(e).reverse().reduce((i,s)=>i?r(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?r(i,s.decode):s.decode,void 0);return{encode:t,decode:n}}function wl(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return r.map(t=>{if(Zc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("alphabet.decode input should be array of strings");return r.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})}}}function $l(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of r)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return r.join(e)},decode:r=>{if(typeof r!="string")throw new Error("join.decode input should be string");return r.split(e)}}}function km(e,r="="){if(Zc(e),typeof r!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function dU(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:r=>r,decode:r=>e(r)}}function gB(e,r,t){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(Zc(o),o<0||o>=r)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let l=n;l<s.length;l++){const u=s[l],f=r*o+u;if(!Number.isSafeInteger(f)||r*o/r!==o||f-u!==r*o)throw new Error("convertRadix: carry overflow");if(o=f%t,s[l]=Math.floor(f/t),!Number.isSafeInteger(s[l])||s[l]*t+o!==f)throw new Error("convertRadix: carry overflow");if(a)s[l]?a=!1:n=l;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const pU=(e,r)=>r?pU(r,e%r):e,Ww=(e,r)=>e+(r-pU(e,r));function JT(e,r,t,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Ww(r,t)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${t} carryBits=${Ww(r,t)}`);let i=0,s=0;const o=2**t-1,a=[];for(const l of e){if(Zc(l),l>=2**r)throw new Error(`convertRadix2: invalid data word=${l} from=${r}`);if(i=i<<r|l,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=t;s-=t)a.push((i>>s-t&o)>>>0);i&=2**s-1}if(i=i<<t-s&o,!n&&s>=r)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function vU(e){return Zc(e),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return gB(Array.from(r),2**8,e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(gB(r,e,2**8))}}}function Tu(e,r=!1){if(Zc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ww(8,e)>32||Ww(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return JT(Array.from(t),8,e,!r)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(JT(t,e,8,r))}}}function yB(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...r){try{return e.apply(null,r)}catch{}}}function gU(e,r){if(Zc(e),typeof r!="function")throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=r(t).slice(0,e),i=new Uint8Array(t.length+e);return i.set(t),i.set(n,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-e),i=r(n).slice(0,e),s=t.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}const Yg={alphabet:wl,chain:Ra,checksum:gU,radix:vU,radix2:Tu,join:$l,padding:km},yU=Ra(Tu(4),wl("0123456789ABCDEF"),$l("")),mU=Ra(Tu(5),wl("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),km(5),$l("")),efe=Ra(Tu(5),wl("0123456789ABCDEFGHIJKLMNOPQRSTUV"),km(5),$l("")),tfe=Ra(Tu(5),wl("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),$l(""),dU(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Yo=Ra(Tu(6),wl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),km(6),$l("")),bU=Ra(Tu(6),wl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),km(6),$l("")),F3=e=>Ra(vU(58),wl(e),$l("")),Ry=F3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),rfe=F3("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),nfe=F3("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),mB=[0,2,3,5,6,7,9,10,11],wU={encode(e){let r="";for(let t=0;t<e.length;t+=8){const n=e.subarray(t,t+8);r+=Ry.encode(n).padStart(mB[n.length],"1")}return r},decode(e){let r=[];for(let t=0;t<e.length;t+=11){const n=e.slice(t,t+11),i=mB.indexOf(n.length),s=Ry.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},j3=e=>Ra(gU(4,r=>e(e(r))),Ry),QT=Ra(wl("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),$l("")),bB=[996825010,642813549,513874426,1027748829,705979059];function Dg(e){const r=e>>25;let t=(e&33554431)<<5;for(let n=0;n<bB.length;n++)(r>>n&1)===1&&(t^=bB[n]);return t}function wB(e,r,t=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Dg(i)^o>>5}i=Dg(i);for(let s=0;s<n;s++)i=Dg(i)^e.charCodeAt(s)&31;for(let s of r)i=Dg(i)^s;for(let s=0;s<6;s++)i=Dg(i);return i^=t,QT.encode(JT([i%2**30],30,5,!1))}function $U(e){const r=e==="bech32"?1:734539939,t=Tu(5),n=t.decode,i=t.encode,s=yB(n);function o(f,c,p=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof c}`);const y=f.length+7+c.length;if(p!==!1&&y>p)throw new TypeError(`Length ${y} exceeds limit ${p}`);return f=f.toLowerCase(),`${f}1${QT.encode(c)}${wB(f,c,r)}`}function a(f,c=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||c!==!1&&f.length>c)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${c})`);const p=f.toLowerCase();if(f!==p&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=p;const y=f.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=f.slice(0,y),b=f.slice(y+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");const T=QT.decode(b).slice(0,-6),_=wB(w,T,r);if(!b.endsWith(_))throw new Error(`Invalid checksum in ${f}: expected "${_}"`);return{prefix:w,words:T}}const l=yB(a);function u(f){const{prefix:c,words:p}=a(f,!1);return{prefix:c,words:p,bytes:n(p)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const Bn=$U("bech32"),ife=$U("bech32m"),_U={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},xU=Ra(Tu(4),wl("0123456789abcdef"),$l(""),dU(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Dy={utf8:_U,hex:xU,base16:yU,base32:mU,base64:Yo,base64url:bU,base58:Ry,base58xmr:wU},EU=`Invalid encoding type. Available types: ${Object.keys(Dy).join(", ")}`,SU=(e,r)=>{if(typeof e!="string"||!Dy.hasOwnProperty(e))throw new TypeError(EU);if(!(r instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Dy[e].encode(r)},sfe=SU,kU=(e,r)=>{if(!Dy.hasOwnProperty(e))throw new TypeError(EU);if(typeof r!="string")throw new TypeError("stringToBytes() expects string");return Dy[e].decode(r)},ofe=kU,afe=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Zc,base16:yU,base32:mU,base32crockford:tfe,base32hex:efe,base58:Ry,base58check:j3,base58flickr:rfe,base58xmr:wU,base58xrp:nfe,base64:Yo,base64url:bU,bech32:Bn,bech32m:ife,bytes:ofe,bytesToString:SU,hex:xU,str:sfe,stringToBytes:kU,utf8:_U,utils:Yg},Symbol.toStringTag,{value:"Module"})),TU=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);function eI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function lfe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function IU(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function ufe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");eI(e.outputLen),eI(e.blockLen)}function cfe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ffe(e,r){IU(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Qs={number:eI,bool:lfe,bytes:IU,hash:ufe,exists:cfe,output:ffe},$E=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xa=(e,r)=>e<<32-r|e>>>r,hfe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!hfe)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function dfe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function By(e){if(typeof e=="string"&&(e=dfe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let AU=class{clone(){return this._cloneInto()}};const pfe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function vfe(e,r){if(r!==void 0&&(typeof r!="object"||!pfe(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function mv(e){const r=n=>e().update(By(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function gfe(e=32){if($E&&typeof $E.getRandomValues=="function")return $E.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let OU=class extends AU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Qs.hash(r);const n=By(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Qs.exists(this),this.iHash.update(r),this}digestInto(r){Qs.exists(this),Qs.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CU=(e,r,t)=>new OU(e,r).update(t).digest();CU.create=(e,r)=>new OU(e,r);function yfe(e,r,t,n){Qs.hash(e);const i=vfe({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Qs.number(s),Qs.number(o),Qs.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=By(r),u=By(t),f=new Uint8Array(o),c=CU.create(e,l),p=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:c,PRFSalt:p}}function mfe(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function bfe(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=yfe(e,r,t,n);let u;const f=new Uint8Array(4),c=X1(f),p=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(f).digestInto(p),b.set(p.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(p).digestInto(p);for(let _=0;_<b.length;_++)b[_]^=p[_]}}return mfe(a,l,o,u,p)}function wfe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let PU=class extends AU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=X1(this.buffer)}update(r){Qs.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=By(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=X1(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Qs.exists(this),Qs.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;wfe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=X1(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const $fe=(e,r,t)=>e&r^~e&t,_fe=(e,r,t)=>e&r^e&t^r&t,xfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zu=new Uint32Array(64);let NU=class extends PU{constructor(){super(64,32,8,!1),this.A=Yu[0]|0,this.B=Yu[1]|0,this.C=Yu[2]|0,this.D=Yu[3]|0,this.E=Yu[4]|0,this.F=Yu[5]|0,this.G=Yu[6]|0,this.H=Yu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Zu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=Zu[c-15],y=Zu[c-2],w=Xa(p,7)^Xa(p,18)^p>>>3,b=Xa(y,17)^Xa(y,19)^y>>>10;Zu[c]=b+Zu[c-7]+w+Zu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const p=Xa(a,6)^Xa(a,11)^Xa(a,25),y=f+p+$fe(a,l,u)+xfe[c]+Zu[c]|0,b=(Xa(n,2)^Xa(n,13)^Xa(n,22))+_fe(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Zu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Efe=class extends NU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Sfe=mv(()=>new NU);mv(()=>new Efe);const P0=BigInt(2**32-1),tI=BigInt(32);function RU(e,r=!1){return r?{h:Number(e&P0),l:Number(e>>tI&P0)}:{h:Number(e>>tI&P0)|0,l:Number(e&P0)|0}}function kfe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=RU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Tfe=(e,r)=>BigInt(e>>>0)<<tI|BigInt(r>>>0),Ife=(e,r,t)=>e>>>t,Afe=(e,r,t)=>e<<32-t|r>>>t,Ofe=(e,r,t)=>e>>>t|r<<32-t,Cfe=(e,r,t)=>e<<32-t|r>>>t,Pfe=(e,r,t)=>e<<64-t|r>>>t-32,Nfe=(e,r,t)=>e>>>t-32|r<<64-t,Rfe=(e,r)=>r,Dfe=(e,r)=>e,Bfe=(e,r,t)=>e<<t|r>>>32-t,Mfe=(e,r,t)=>r<<t|e>>>32-t,Lfe=(e,r,t)=>r<<t-32|e>>>64-t,Ffe=(e,r,t)=>e<<t-32|r>>>64-t;function jfe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Hfe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),zfe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Ufe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Wfe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,qfe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Kfe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,ir={fromBig:RU,split:kfe,toBig:Tfe,shrSH:Ife,shrSL:Afe,rotrSH:Ofe,rotrSL:Cfe,rotrBH:Pfe,rotrBL:Nfe,rotr32H:Rfe,rotr32L:Dfe,rotlSH:Bfe,rotlSL:Mfe,rotlBH:Lfe,rotlBL:Ffe,add:jfe,add3L:Hfe,add3H:zfe,add4L:Ufe,add4H:Wfe,add5H:Kfe,add5L:qfe},[Vfe,Gfe]=ir.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Xu=new Uint32Array(80),Ju=new Uint32Array(80);let x_=class extends PU{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:p,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,p,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,p,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=p|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Xu[x]=r.getUint32(t),Ju[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Xu[x-15]|0,O=Ju[x-15]|0,C=ir.rotrSH(I,O,1)^ir.rotrSH(I,O,8)^ir.shrSH(I,O,7),g=ir.rotrSL(I,O,1)^ir.rotrSL(I,O,8)^ir.shrSL(I,O,7),M=Xu[x-2]|0,B=Ju[x-2]|0,L=ir.rotrSH(M,B,19)^ir.rotrBH(M,B,61)^ir.shrSH(M,B,6),q=ir.rotrSL(M,B,19)^ir.rotrBL(M,B,61)^ir.shrSL(M,B,6),Q=ir.add4L(g,q,Ju[x-7],Ju[x-16]),te=ir.add4H(Q,C,L,Xu[x-7],Xu[x-16]);Xu[x]=te|0,Ju[x]=Q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:p,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=ir.rotrSH(c,p,14)^ir.rotrSH(c,p,18)^ir.rotrBH(c,p,41),O=ir.rotrSL(c,p,14)^ir.rotrSL(c,p,18)^ir.rotrBL(c,p,41),C=c&y^~c&b,g=p&w^~p&T,M=ir.add5L(A,O,g,Gfe[x],Ju[x]),B=ir.add5H(M,_,I,C,Vfe[x],Xu[x]),L=M|0,q=ir.rotrSH(n,i,28)^ir.rotrBH(n,i,34)^ir.rotrBH(n,i,39),Q=ir.rotrSL(n,i,28)^ir.rotrBL(n,i,34)^ir.rotrBL(n,i,39),te=n&s^n&a^s&a,X=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=p|0,{h:c,l:p}=ir.add(u|0,f|0,B|0,L|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=ir.add3L(L,Q,X);n=ir.add3H(j,B,q,te),i=j|0}({h:n,l:i}=ir.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ir.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ir.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=ir.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:p}=ir.add(this.Eh|0,this.El|0,c|0,p|0),{h:y,l:w}=ir.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=ir.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=ir.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,p,y,w,b,T,_,A)}roundClean(){Xu.fill(0),Ju.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Yfe=class extends x_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Zfe=class extends x_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Xfe=class extends x_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Jfe=mv(()=>new x_);mv(()=>new Yfe);mv(()=>new Zfe);mv(()=>new Xfe);const Qfe=e=>e[0]==="あいこくしん";function DU(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function BU(e){const r=DU(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function MU(e){Qs.bytes(e,16,20,24,28,32)}function ehe(e,r=128){if(Qs.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return nhe(gfe(r/8),e)}const the=e=>{const r=8-e.length/4;return new Uint8Array([Sfe(e)[0]>>r<<r])};function LU(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),Yg.chain(Yg.checksum(1,the),Yg.radix2(11,!0),Yg.alphabet(e))}function rhe(e,r){const{words:t}=BU(e),n=LU(r).decode(t);return MU(n),n}function nhe(e,r){return MU(e),LU(r).encode(e).join(Qfe(r)?"　":" ")}function ihe(e,r){try{rhe(e,r)}catch{return!1}return!0}const she=e=>DU(`mnemonic${e}`);function ohe(e,r=""){return bfe(Jfe,BU(e).nfkd,she(r),{c:2048,dkLen:64})}function rI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ahe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Mf(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function lhe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rI(e.outputLen),rI(e.blockLen)}function uhe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function che(e,r){Mf(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Gf={number:rI,bool:ahe,bytes:Mf,hash:lhe,exists:uhe,output:che},_E=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const H3=e=>e instanceof Uint8Array,_p=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ja=(e,r)=>e<<32-r|e>>>r,fhe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!fhe)throw new Error("Non little-endian hardware is not supported");const hhe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function dhe(e){if(!H3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=hhe[e[t]];return r}function phe(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function FU(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function z3(e){if(typeof e=="string"&&(e=FU(e)),!H3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Zg(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!H3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let jU=class{clone(){return this._cloneInto()}};function Uh(e){const r=n=>e().update(z3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function vhe(e=32){if(_E&&typeof _E.getRandomValues=="function")return _E.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let HU=class extends jU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Gf.hash(r);const n=z3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Gf.exists(this),this.iHash.update(r),this}digestInto(r){Gf.exists(this),Gf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const qw=(e,r,t)=>new HU(e,r).update(t).digest();qw.create=(e,r)=>new HU(e,r);function ghe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let U3=class extends jU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=_p(this.buffer)}update(r){Gf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=z3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=_p(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Gf.exists(this),Gf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;ghe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=_p(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const yhe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),zU=Uint8Array.from({length:16},(e,r)=>r),mhe=zU.map(e=>(9*e+5)%16);let W3=[zU],q3=[mhe];for(let e=0;e<4;e++)for(let r of[W3,q3])r.push(r[e].map(t=>yhe[t]));const UU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),bhe=W3.map((e,r)=>e.map(t=>UU[r][t])),whe=q3.map((e,r)=>e.map(t=>UU[r][t])),$he=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),_he=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),N0=(e,r)=>e<<r|e>>>32-r;function $B(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const R0=new Uint32Array(16);let xhe=class extends U3{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)R0[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,f=u,c=this.h4|0,p=c;for(let y=0;y<5;y++){const w=4-y,b=$he[y],T=_he[y],_=W3[y],A=q3[y],x=bhe[y],I=whe[y];for(let O=0;O<16;O++){const C=N0(n+$B(y,s,a,u)+R0[_[O]]+b,x[O])+c|0;n=c,c=u,u=N0(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=N0(i+$B(w,o,l,f)+R0[A[O]]+T,I[O])+p|0;i=p,p=f,f=N0(l,10)|0,l=o,o=C}}this.set(this.h1+a+f|0,this.h2+u+p|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){R0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const Ehe=Uh(()=>new xhe),She=(e,r,t)=>e&r^~e&t,khe=(e,r,t)=>e&r^e&t^r&t,The=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ec=new Uint32Array(64);let WU=class extends U3{constructor(){super(64,32,8,!1),this.A=Qu[0]|0,this.B=Qu[1]|0,this.C=Qu[2]|0,this.D=Qu[3]|0,this.E=Qu[4]|0,this.F=Qu[5]|0,this.G=Qu[6]|0,this.H=Qu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)ec[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=ec[c-15],y=ec[c-2],w=Ja(p,7)^Ja(p,18)^p>>>3,b=Ja(y,17)^Ja(y,19)^y>>>10;ec[c]=b+ec[c-7]+w+ec[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const p=Ja(a,6)^Ja(a,11)^Ja(a,25),y=f+p+She(a,l,u)+The[c]+ec[c]|0,b=(Ja(n,2)^Ja(n,13)^Ja(n,22))+khe(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){ec.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Ihe=class extends WU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const K3=Uh(()=>new WU);Uh(()=>new Ihe);const D0=BigInt(2**32-1),nI=BigInt(32);function qU(e,r=!1){return r?{h:Number(e&D0),l:Number(e>>nI&D0)}:{h:Number(e>>nI&D0)|0,l:Number(e&D0)|0}}function Ahe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=qU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const Ohe=(e,r)=>BigInt(e>>>0)<<nI|BigInt(r>>>0),Che=(e,r,t)=>e>>>t,Phe=(e,r,t)=>e<<32-t|r>>>t,Nhe=(e,r,t)=>e>>>t|r<<32-t,Rhe=(e,r,t)=>e<<32-t|r>>>t,Dhe=(e,r,t)=>e<<64-t|r>>>t-32,Bhe=(e,r,t)=>e>>>t-32|r<<64-t,Mhe=(e,r)=>r,Lhe=(e,r)=>e,Fhe=(e,r,t)=>e<<t|r>>>32-t,jhe=(e,r,t)=>r<<t|e>>>32-t,Hhe=(e,r,t)=>r<<t-32|e>>>64-t,zhe=(e,r,t)=>e<<t-32|r>>>64-t;function Uhe(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Whe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),qhe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Khe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Vhe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Ghe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Yhe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,sr={fromBig:qU,split:Ahe,toBig:Ohe,shrSH:Che,shrSL:Phe,rotrSH:Nhe,rotrSL:Rhe,rotrBH:Dhe,rotrBL:Bhe,rotr32H:Mhe,rotr32L:Lhe,rotlSH:Fhe,rotlSL:jhe,rotlBH:Hhe,rotlBL:zhe,add:Uhe,add3L:Whe,add3H:qhe,add4L:Khe,add4H:Vhe,add5H:Yhe,add5L:Ghe},[Zhe,Xhe]=sr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),tc=new Uint32Array(80),rc=new Uint32Array(80);let E_=class extends U3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:p,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,p,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,p,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=p|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)tc[x]=r.getUint32(t),rc[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=tc[x-15]|0,O=rc[x-15]|0,C=sr.rotrSH(I,O,1)^sr.rotrSH(I,O,8)^sr.shrSH(I,O,7),g=sr.rotrSL(I,O,1)^sr.rotrSL(I,O,8)^sr.shrSL(I,O,7),M=tc[x-2]|0,B=rc[x-2]|0,L=sr.rotrSH(M,B,19)^sr.rotrBH(M,B,61)^sr.shrSH(M,B,6),q=sr.rotrSL(M,B,19)^sr.rotrBL(M,B,61)^sr.shrSL(M,B,6),Q=sr.add4L(g,q,rc[x-7],rc[x-16]),te=sr.add4H(Q,C,L,tc[x-7],tc[x-16]);tc[x]=te|0,rc[x]=Q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:p,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=sr.rotrSH(c,p,14)^sr.rotrSH(c,p,18)^sr.rotrBH(c,p,41),O=sr.rotrSL(c,p,14)^sr.rotrSL(c,p,18)^sr.rotrBL(c,p,41),C=c&y^~c&b,g=p&w^~p&T,M=sr.add5L(A,O,g,Xhe[x],rc[x]),B=sr.add5H(M,_,I,C,Zhe[x],tc[x]),L=M|0,q=sr.rotrSH(n,i,28)^sr.rotrBH(n,i,34)^sr.rotrBH(n,i,39),Q=sr.rotrSL(n,i,28)^sr.rotrBL(n,i,34)^sr.rotrBL(n,i,39),te=n&s^n&a^s&a,X=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=p|0,{h:c,l:p}=sr.add(u|0,f|0,B|0,L|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=sr.add3L(L,Q,X);n=sr.add3H(j,B,q,te),i=j|0}({h:n,l:i}=sr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=sr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=sr.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=sr.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:p}=sr.add(this.Eh|0,this.El|0,c|0,p|0),{h:y,l:w}=sr.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=sr.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=sr.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,p,y,w,b,T,_,A)}roundClean(){tc.fill(0),rc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Jhe=class extends E_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Qhe=class extends E_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},ede=class extends E_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const _B=Uh(()=>new E_);Uh(()=>new Jhe);Uh(()=>new Qhe);Uh(()=>new ede);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const KU=BigInt(0),S_=BigInt(1),tde=BigInt(2),k_=e=>e instanceof Uint8Array,rde=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function zp(e){if(!k_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=rde[e[t]];return r}function VU(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function V3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Up(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function oh(e){return V3(zp(e))}function G3(e){if(!k_(e))throw new Error("Uint8Array expected");return V3(zp(Uint8Array.from(e).reverse()))}function xp(e,r){return Up(e.toString(16).padStart(r*2,"0"))}function GU(e,r){return xp(e,r).reverse()}function nde(e){return Up(VU(e))}function Ro(e,r,t){let n;if(typeof r=="string")try{n=Up(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(k_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function My(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!k_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function ide(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function sde(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ode(e){let r;for(r=0;e>KU;e>>=S_,r+=1);return r}function ade(e,r){return e>>BigInt(r)&S_}const lde=(e,r,t)=>e|(t?S_:KU)<<BigInt(r),Y3=e=>(tde<<BigInt(e-1))-S_,xE=e=>new Uint8Array(e),xB=e=>Uint8Array.from(e);function YU(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=xE(e),i=xE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=xE())=>{i=a(xB([0]),c),n=a(),c.length!==0&&(i=a(xB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const p=[];for(;c<r;){n=a();const y=n.slice();p.push(y),c+=n.length}return My(...p)};return(c,p)=>{o(),l(c);let y;for(;!(y=p(u()));)l();return o(),y}}const ude={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Tm(e,r,t={}){const n=(i,s,o)=>{const a=ude[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const cde=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ade,bitLen:ode,bitMask:Y3,bitSet:lde,bytesToHex:zp,bytesToNumberBE:oh,bytesToNumberLE:G3,concatBytes:My,createHmacDrbg:YU,ensureBytes:Ro,equalBytes:ide,hexToBytes:Up,hexToNumber:V3,numberToBytesBE:xp,numberToBytesLE:GU,numberToHexUnpadded:VU,numberToVarBytesBE:nde,utf8ToBytes:sde,validateObject:Tm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yi=BigInt(0),Nn=BigInt(1),Lf=BigInt(2),fde=BigInt(3),iI=BigInt(4),EB=BigInt(5),SB=BigInt(8);BigInt(9);BigInt(16);function is(e,r){const t=e%r;return t>=yi?t:r+t}function hde(e,r,t){if(t<=yi||r<yi)throw new Error("Expected power/modulo > 0");if(t===Nn)return yi;let n=Nn;for(;r>yi;)r&Nn&&(n=n*e%t),e=e*e%t,r>>=Nn;return n}function Io(e,r,t){let n=e;for(;r-- >yi;)n*=n,n%=t;return n}function sI(e,r){if(e===yi||r<=yi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=is(e,r),n=r,i=yi,s=Nn;for(;t!==yi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Nn)throw new Error("invert: does not exist");return is(i,r)}function dde(e){const r=(e-Nn)/Lf;let t,n,i;for(t=e-Nn,n=0;t%Lf===yi;t/=Lf,n++);for(i=Lf;i<e&&hde(i,r,e)!==e-Nn;i++);if(n===1){const o=(e+Nn)/iI;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Nn)/Lf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(p);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Nn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),p=a.mul(p,f),u=y}return c}}function pde(e){if(e%iI===fde){const r=(e+Nn)/iI;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%SB===EB){const r=(e-EB)/SB;return function(n,i){const s=n.mul(i,Lf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Lf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return dde(e)}const vde=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gde(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=vde.reduce((n,i)=>(n[i]="function",n),r);return Tm(e,t)}function yde(e,r,t){if(t<yi)throw new Error("Expected power > 0");if(t===yi)return e.ONE;if(t===Nn)return r;let n=e.ONE,i=r;for(;t>yi;)t&Nn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Nn;return n}function mde(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function Z3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function bde(e,r,t=!1,n={}){if(e<=yi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=Z3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=pde(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:Y3(i),ZERO:yi,ONE:Nn,create:l=>is(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return yi<=l&&l<e},is0:l=>l===yi,isOdd:l=>(l&Nn)===Nn,neg:l=>is(-l,e),eql:(l,u)=>l===u,sqr:l=>is(l*l,e),add:(l,u)=>is(l+u,e),sub:(l,u)=>is(l-u,e),mul:(l,u)=>is(l*u,e),pow:(l,u)=>yde(a,l,u),div:(l,u)=>is(l*sI(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>sI(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>mde(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?GU(l,s):xp(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?G3(l):oh(l)}});return Object.freeze(a)}function wde(e,r,t=!1){e=Ro("privateHash",e);const n=e.length,i=Z3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?G3(e):oh(e);return is(s,r-Nn)+Nn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $de=BigInt(0),EE=BigInt(1);function _de(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>$de;)s&EE&&(o=o.add(a)),a=a.double(),s>>=EE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let p=1;p<a;p++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=p,o+=EE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function ZU(e){return gde(e.Fp),Tm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Z3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xde(e){const r=ZU(e);Tm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Ede,hexToBytes:Sde}=cde,Yf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Yf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Ede(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Yf,t=typeof e=="string"?Sde(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Yf._parseInt(t.subarray(2)),{d:o,l:a}=Yf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Jl=BigInt(0),Do=BigInt(1);BigInt(2);const kB=BigInt(3);BigInt(4);function kde(e){const r=xde(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return My(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Jl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=zp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:oh(Ro("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=is(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ro("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,kB),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),L=t.mul(I,I),q=t.mul(A,x);return q=t.add(q,q),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,L),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(q,O),g=t.mul(_,g),L=t.mul(b,L),q=t.sub(M,L),q=t.mul(b,q),q=t.add(q,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,L),M=t.mul(M,q),C=t.add(C,M),L=t.mul(x,I),L=t.add(L,L),M=t.mul(L,q),O=t.sub(O,M),g=t.mul(L,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,L=t.mul(r.b,kB);let q=t.mul(T,x),Q=t.mul(_,I),te=t.mul(A,O),X=t.add(T,_),j=t.add(x,I);X=t.mul(X,j),j=t.add(q,Q),X=t.sub(X,j),j=t.add(T,A);let Z=t.add(x,O);return j=t.mul(j,Z),Z=t.add(q,te),j=t.sub(j,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(Q,te),Z=t.sub(Z,C),M=t.mul(B,j),C=t.mul(L,te),M=t.add(C,M),C=t.sub(Q,M),M=t.add(Q,M),g=t.mul(C,M),Q=t.add(q,q),Q=t.add(Q,q),te=t.mul(B,te),j=t.mul(L,j),Q=t.add(Q,te),te=t.sub(q,te),te=t.mul(B,te),j=t.add(j,te),q=t.mul(Q,j),g=t.add(g,q),q=t.mul(Z,j),C=t.mul(X,C),C=t.sub(C,q),q=t.mul(X,Q),M=t.mul(Z,M),M=t.add(M,q),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Jl)return T;if(a(b),b===Do)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>Jl||O>Jl;)x&Do&&(C=C.add(M)),O&Do&&(g=g.add(M)),M=M.double(),x>>=Do,O>>=Do;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:L,f:q}=this.wNAF(g);M=y.constTimeNegate(I,M),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,x.beta),L.py,L.pz),_=M.add(L),A=B.add(q)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Jl||C===Do||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Do)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Do?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return zp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const p=r.nBitLength,y=_de(c,r.endo?Math.ceil(p/2):p);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Tde(e){const r=ZU(e);return Tm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Ide(e){const r=Tde(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Jl<j&&j<t.ORDER}function a(j){return is(j,n)}function l(j){return sI(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:p}=kde({...r,toBytes(j,Z,ie){const _e=Z.toAffine(),we=t.toBytes(_e.x),Ce=My;return ie?Ce(Uint8Array.from([Z.hasEvenY()?2:3]),we):Ce(Uint8Array.from([4]),we,t.toBytes(_e.y))},fromBytes(j){const Z=j.length,ie=j[0],_e=j.subarray(1);if(Z===i&&(ie===2||ie===3)){const we=oh(_e);if(!o(we))throw new Error("Point is not on curve");const Ce=c(we);let ze=t.sqrt(Ce);const Ge=(ze&Do)===Do;return(ie&1)===1!==Ge&&(ze=t.neg(ze)),{x:we,y:ze}}else if(Z===s&&ie===4){const we=t.fromBytes(_e.subarray(0,t.BYTES)),Ce=t.fromBytes(_e.subarray(t.BYTES,2*t.BYTES));return{x:we,y:Ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>zp(xp(j,r.nByteLength));function w(j){const Z=n>>Do;return j>Z}function b(j){return w(j)?a(-j):j}const T=(j,Z,ie)=>oh(j.slice(Z,ie));class _{constructor(Z,ie,_e){this.r=Z,this.s=ie,this.recovery=_e,this.assertValidity()}static fromCompact(Z){const ie=r.nByteLength;return Z=Ro("compactSignature",Z,ie*2),new _(T(Z,0,ie),T(Z,ie,2*ie))}static fromDER(Z){const{r:ie,s:_e}=Yf.toSig(Ro("DER",Z));return new _(ie,_e)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:ie,s:_e,recovery:we}=this,Ce=g(Ro("msgHash",Z));if(we==null||![0,1,2,3].includes(we))throw new Error("recovery id invalid");const ze=we===2||we===3?ie+r.n:ie;if(ze>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=we&1?"03":"02",it=u.fromHex(Ge+y(ze)),xe=l(ze),ge=a(-Ce*xe),Te=a(_e*xe),Fe=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!Fe)throw new Error("point at infinify");return Fe.assertValidity(),Fe}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Up(this.toDERHex())}toDERHex(){return Yf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Up(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),Z=wde(j,n);return xp(Z,r.nByteLength)},precompute(j=8,Z=u.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function x(j,Z=!0){return u.fromPrivateKey(j).toRawBytes(Z)}function I(j){const Z=j instanceof Uint8Array,ie=typeof j=="string",_e=(Z||ie)&&j.length;return Z?_e===i||_e===s:ie?_e===2*i||_e===2*s:j instanceof u}function O(j,Z,ie=!0){if(I(j))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(f(j)).toRawBytes(ie)}const C=r.bits2int||function(j){const Z=oh(j),ie=j.length*8-r.nBitLength;return ie>0?Z>>BigInt(ie):Z},g=r.bits2int_modN||function(j){return a(C(j))},M=Y3(r.nBitLength);function B(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Jl<=j&&j<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return xp(j,r.nByteLength)}function L(j,Z,ie=q){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:_e,randomBytes:we}=r;let{lowS:Ce,prehash:ze,extraEntropy:Ge}=ie;Ce==null&&(Ce=!0),j=Ro("msgHash",j),ze&&(j=Ro("prehashed msgHash",_e(j)));const it=g(j),xe=f(Z),ge=[B(xe),B(it)];if(Ge!=null){const S=Ge===!0?we(t.BYTES):Ge;ge.push(Ro("extraEntropy",S,t.BYTES))}const Te=My(...ge),Fe=it;function $(S){const N=C(S);if(!p(N))return;const F=l(N),H=u.BASE.multiply(N).toAffine(),V=a(H.x);if(V===Jl)return;const le=a(F*a(Fe+V*xe));if(le===Jl)return;let ye=(H.x===V?0:2)|Number(H.y&Do),Ue=le;return Ce&&w(le)&&(Ue=b(le),ye^=1),new _(V,Ue,ye)}return{seed:Te,k2sig:$}}const q={lowS:r.lowS,prehash:!1},Q={lowS:r.lowS,prehash:!1};function te(j,Z,ie=q){const{seed:_e,k2sig:we}=L(j,Z,ie),Ce=r;return YU(Ce.hash.outputLen,Ce.nByteLength,Ce.hmac)(_e,we)}u.BASE._setWindowSize(8);function X(j,Z,ie,_e=Q){var H;const we=j;if(Z=Ro("msgHash",Z),ie=Ro("publicKey",ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:ze}=_e;let Ge,it;try{if(typeof we=="string"||we instanceof Uint8Array)try{Ge=_.fromDER(we)}catch(V){if(!(V instanceof Yf.Err))throw V;Ge=_.fromCompact(we)}else if(typeof we=="object"&&typeof we.r=="bigint"&&typeof we.s=="bigint"){const{r:V,s:le}=we;Ge=new _(V,le)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&Ge.hasHighS())return!1;ze&&(Z=r.hash(Z));const{r:xe,s:ge}=Ge,Te=g(Z),Fe=l(ge),$=a(Te*Fe),S=a(xe*Fe),N=(H=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:H.toAffine();return N?a(N.x)===xe:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:te,verify:X,ProjectivePoint:u,Signature:_,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ade(e){return{hash:e,hmac:(r,...t)=>qw(e,r,Zg(...t)),randomBytes:vhe}}function Ode(e,r){const t=n=>Ide({...e,...Ade(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),TB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cde=BigInt(1),oI=BigInt(2),IB=(e,r)=>(e+r/oI)/r;function Pde(e){const r=XU,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=Io(f,t,r)*f%r,p=Io(c,t,r)*f%r,y=Io(p,oI,r)*u%r,w=Io(y,i,r)*y%r,b=Io(w,s,r)*w%r,T=Io(b,a,r)*b%r,_=Io(T,l,r)*T%r,A=Io(_,a,r)*b%r,x=Io(A,t,r)*f%r,I=Io(x,o,r)*w%r,O=Io(I,n,r)*u%r,C=Io(O,oI,r);if(!aI.eql(aI.sqr(C),e))throw new Error("Cannot find square root");return C}const aI=bde(XU,void 0,void 0,{sqrt:Pde}),il=Ode({a:BigInt(0),b:BigInt(7),Fp:aI,n:TB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=TB,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Cde*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=IB(s*e,r),l=IB(-n*e,r);let u=is(e-a*t-l*i,r),f=is(-a*n-l*s,r);const c=u>o,p=f>o;if(c&&(u=r-u),p&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:p,k2:f}}}},K3);BigInt(0);il.ProjectivePoint;const B0=il.ProjectivePoint,SE=j3(K3);function AB(e){return BigInt(`0x${dhe(e)}`)}function Nde(e){return phe(e.toString(16).padStart(64,"0"))}const Rde=FU("Bitcoin seed"),kE={private:76066276,public:76067358},TE=2147483648,Dde=e=>Ehe(K3(e)),Bde=e=>_p(e).getUint32(0,!1),M0=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return _p(r).setUint32(0,e,!1),r};let Mde=class Zd{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Bde(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return SE.encode(this.serialize(this.versions.private,Zg(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return SE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=kE){if(Mf(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=qw(_B,Rde,r);return new Zd({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=kE){const n=SE.decode(r),i=_p(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Zd({...o,privateKey:a.slice(1)}):new Zd({...o,publicKey:a})}static fromJSON(r){return Zd.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||kE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!il.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:AB(r.privateKey),this.privKeyBytes=Nde(this.privKey),this.pubKey=il.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=B0.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Dde(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=TE)throw new Error("Invalid index");s[2]==="'"&&(o+=TE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=M0(r);if(r>=TE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Zg(new Uint8Array([0]),a,t)}else t=Zg(this.pubKey,t);const n=qw(_B,this.chainCode,t),i=AB(n.slice(0,32)),s=n.slice(32);if(!il.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=is(this.privKey+i,il.CURVE.n);if(!il.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=B0.fromHex(this.pubKey).add(B0.fromPrivateKey(i));if(a.equals(B0.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Zd(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Mf(r,32),il.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Mf(r,32),Mf(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=il.Signature.fromCompact(t)}catch{return!1}return il.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Mf(t,33),Zg(M0(r),new Uint8Array([this.depth]),M0(this.parentFingerprint),M0(this.index),this.chainCode,t)}};var Lde=Object.defineProperty,Ri=(e,r)=>{for(var t in r)Lde(e,t,{get:r[t],enumerable:!0})};function X3(){return Ho(yv.utils.randomPrivateKey())}function Th(e){return Ho(yv.getPublicKey(e))}var Fde={};Ri(Fde,{MessageNode:()=>JU,MessageQueue:()=>Ude,insertEventIntoAscendingList:()=>zde,insertEventIntoDescendingList:()=>Hde,normalizeURL:()=>jde,utf8Decoder:()=>Ql,utf8Encoder:()=>Oa});var Ql=new TextDecoder("utf-8"),Oa=new TextEncoder;function jde(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Hde(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function zde(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var JU=class{constructor(e){oe(this,"_value");oe(this,"_next");this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},Ude=class{constructor(){oe(this,"_first");oe(this,"_last");oe(this,"_size");this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const r=new JU(e);return this._size===0||!this._last?(this._first=r,this._last=r):(this._last.next=r,this._last=r),this._size++,!0}dequeue(){if(this._size===0||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function Wde(e=255){return{kind:e,content:"",tags:[],created_at:0}}function QU(e,r){let t=e;return t.pubkey=Th(r),t.id=Ih(t),t.sig=J3(t,r),t}function qde(e){if(!Ly(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Ih(e){let r=Fp(Oa.encode(qde(e)));return Ho(r)}var Kde=e=>e instanceof Object;function Ly(e){if(!Kde(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function Wp(e){try{return yv.verify(e.sig,Ih(e),e.pubkey)}catch{return!1}}function eW(e,r){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),J3(e,r)}function J3(e,r){return Ho(yv.sign(Ih(e),r))}function Q3(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>e.until)}var Vde={};Ri(Vde,{getHex64:()=>eP,getInt:()=>tW,getSubscriptionId:()=>Gde,matchEventId:()=>Yde,matchEventKind:()=>Xde,matchEventPubkey:()=>Zde});function eP(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function tW(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Gde(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Yde(e,r){return r===eP(e,"id")}function Zde(e,r){return r===eP(e,"pubkey")}function Xde(e,r){return r===tW(e,"kind")}var Mc={};Ri(Mc,{BECH32_REGEX:()=>nW,decode:()=>T_,naddrEncode:()=>npe,neventEncode:()=>rpe,noteEncode:()=>epe,nprofileEncode:()=>tpe,npubEncode:()=>Qde,nrelayEncode:()=>ipe,nsecEncode:()=>Jde});var rW=5e3,nW=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function T_(e){var i,s,o,a,l,u,f;let{prefix:r,words:t}=Bn.decode(e,rW),n=new Uint8Array(Bn.fromWords(t));switch(r){case"nprofile":{let c=L0(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ho(c[0][0]),relays:c[1]?c[1].map(p=>Ql.decode(p)):[]}}}case"nevent":{let c=L0(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Ho(c[0][0]),relays:c[1]?c[1].map(p=>Ql.decode(p)):[],author:(o=c[2])!=null&&o[0]?Ho(c[2][0]):void 0}}}case"naddr":{let c=L0(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ql.decode(c[0][0]),pubkey:Ho(c[2][0]),kind:parseInt(Ho(c[3][0]),16),relays:c[1]?c[1].map(p=>Ql.decode(p)):[]}}}case"nrelay":{let c=L0(n);if(!((f=c[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ql.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Ho(n)};default:throw new Error(`unknown prefix ${r}`)}}function L0(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1];if(!i)throw new Error(`malformed TLV ${n}`);let s=t.slice(2,2+i);if(t=t.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${n}`);r[n]=r[n]||[],r[n].push(s)}return r}function Jde(e){return tP("nsec",e)}function Qde(e){return tP("npub",e)}function epe(e){return tP("note",e)}function Im(e,r){let t=Bn.toWords(r);return Bn.encode(e,t,rW)}function tP(e,r){let t=Lp(r);return Im(e,t)}function tpe(e){let r=I_({0:[Lp(e.pubkey)],1:(e.relays||[]).map(t=>Oa.encode(t))});return Im("nprofile",r)}function rpe(e){let r=I_({0:[Lp(e.id)],1:(e.relays||[]).map(t=>Oa.encode(t)),2:e.author?[Lp(e.author)]:[]});return Im("nevent",r)}function npe(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=I_({0:[Oa.encode(e.identifier)],1:(e.relays||[]).map(n=>Oa.encode(n)),2:[Lp(e.pubkey)],3:[new Uint8Array(r)]});return Im("naddr",t)}function ipe(e){let r=I_({0:[Oa.encode(e)]});return Im("nrelay",r)}function I_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),Zz(...r)}var Ah={};Ri(Ah,{decrypt:()=>ope,encrypt:()=>spe});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function spe(e,r,t){const n=Sm.getSharedSecret(e,"02"+r),i=iW(n);let s=Uint8Array.from(P3(16)),o=Oa.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Yo.encode(new Uint8Array(l)),f=Yo.encode(new Uint8Array(s.buffer));return`${u}?iv=${f}`}async function ope(e,r,t){let[n,i]=t.split("?iv="),s=Sm.getSharedSecret(e,"02"+r),o=iW(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Yo.decode(n),u=Yo.decode(i),f=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return Ql.decode(f)}function iW(e){return e.slice(1,33)}var ape={};Ri(ape,{NIP05_REGEX:()=>sW,queryProfile:()=>cpe,searchDomain:()=>upe,useFetchImplementation:()=>lpe});var sW=/^(?:([\w.+-]+)@)?([\w.-]+)$/,A_;try{A_=fetch}catch{}function lpe(e){A_=e}async function upe(e,r=""){try{return(await(await A_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function cpe(e){const r=e.match(sW);if(!r)return null;const[t,n="_",i]=r;try{const s=await A_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=fpe(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function fpe(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var hpe={};Ri(hpe,{generateSeedWords:()=>ppe,privateKeyFromSeedWords:()=>dpe,validateWords:()=>vpe});function dpe(e,r){let n=Mde.fromMasterSeed(ohe(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Ho(n)}function ppe(){return ehe(TU)}function vpe(e){return ihe(e,TU)}var gpe={};Ri(gpe,{parse:()=>ype});function ype(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},f=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(f){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var mpe={};Ri(mpe,{getPow:()=>bpe});function bpe(e){return wpe(Lp(e))}function wpe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=$pe(e[t]),r+=n,n===8);t++);return r}function $pe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var _pe={};Ri(_pe,{finishRepostEvent:()=>xpe,getRepostedEvent:()=>Epe,getRepostedEventPointer:()=>oW});function xpe(e,r,t,n){return QU({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function oW(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function Epe(e,{skipVerification:r}={}){const t=oW(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!Wp(n)))return n}var Spe={};Ri(Spe,{NOSTR_URI_REGEX:()=>O_,parse:()=>Tpe,test:()=>kpe});var O_=new RegExp(`nostr:(${nW.source})`);function kpe(e){return typeof e=="string"&&new RegExp(`^${O_.source}$`).test(e)}function Tpe(e){const r=e.match(new RegExp(`^${O_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:T_(r[1])}}var Ipe={};Ri(Ipe,{finishReactionEvent:()=>Ape,getReactedEventPointer:()=>Ope});function Ape(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return QU({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function Ope(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var Cpe={};Ri(Cpe,{createDelegation:()=>Ppe,getDelegator:()=>Npe});function Ppe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=Fp(Oa.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Ho(yv.sign(i,e));return{from:Th(e),to:r.pubkey,cond:n,sig:s}}function Npe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,f]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(f))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(f))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(f))continue;return null}}let o=Fp(Oa.encode(`nostr:delegation:${e.pubkey}:${n}`));return yv.verify(i,o,t)?t:null}var Rpe={};Ri(Rpe,{matchAll:()=>Dpe,regex:()=>rP,replaceAll:()=>Bpe});var rP=()=>new RegExp(`\\b${O_.source}\\b`,"g");function*Dpe(e){const r=e.matchAll(rP());for(const t of r)try{const[n,i]=t;yield{uri:n,value:i,decoded:T_(i),start:t.index,end:t.index+n.length}}catch{}}function Bpe(e,r){return e.replaceAll(rP(),(t,n)=>r({uri:t,value:n,decoded:T_(n)}))}var Mpe={};Ri(Mpe,{useFetchImplementation:()=>Lpe,validateGithub:()=>Fpe});var nP;try{nP=fetch}catch{}function Lpe(e){nP=e}async function Fpe(e,r,t){try{return await(await nP(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var aW={};Ri(aW,{authenticate:()=>jpe});var jpe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Hpe={};Ri(Hpe,{getZapEndpoint:()=>Upe,makeZapReceipt:()=>Kpe,makeZapRequest:()=>Wpe,useFetchImplementation:()=>zpe,validateZapRequest:()=>qpe});var iP;try{iP=fetch}catch{}function zpe(e){iP=e}async function Upe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Bn.decode(t,1e3),a=Bn.fromWords(o);r=Ql.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await iP(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Wpe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function qpe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Ly(r))return"Zap request is not a valid Nostr event.";if(!Wp(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Kpe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Vpe={};Ri(Vpe,{getToken:()=>Gpe,validateToken:()=>Ype});var lW="Nostr ";async function Gpe(e,r,t,n=!1){if(!e||!r)throw new Error("Missing loginUrl or httpMethod");if(r!=="get"&&r!=="post")throw new Error("Unknown httpMethod");const i=Wde(27235);i.tags=[["u",e],["method",r]],i.created_at=Math.round(new Date().getTime()/1e3);const s=await t(i);return(n?lW:"")+Yo.encode(Oa.encode(JSON.stringify(s)))}async function Ype(e,r,t){if(!e)throw new Error("Missing token");e=e.replace(lW,"");const n=Ql.decode(Yo.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");const i=JSON.parse(n);if(!i)throw new Error("Invalid nostr event");if(!Wp(i))throw new Error("Invalid nostr event, signature invalid");if(i.kind!==27235)throw new Error("Invalid nostr event, kind invalid");if(!i.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round(new Date().getTime()/1e3)-i.created_at>60)throw new Error("Invalid nostr event, expired");const s=i.tags.find(a=>a[0]==="u");if((s==null?void 0:s.length)!==1&&(s==null?void 0:s[1])!==r)throw new Error("Invalid nostr event, url tag invalid");const o=i.tags.find(a=>a[0]==="method");if((o==null?void 0:o.length)!==1&&(o==null?void 0:o[1].toLowerCase())!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var Zpe=function(e){return e instanceof RegExp},Xpe=function(r){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return r&&n.test(r)?r.replace(t,"\\$&"):r},uW=function(e){return typeof e=="string"},Jpe=function(e){var r=[];return e.forEach(function(t){Array.isArray(t)?r=r.concat(t):r.push(t)}),r};function Qpe(e,r,t){var n=0,i=0;if(e==="")return e;if(!e||!uW(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=r;Zpe(s)||(s=new RegExp("("+Xpe(s)+")","gi"));for(var o=e.split(s),a=1,l=o.length;a<l;a+=2){if(o[a]===void 0||o[a-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=o[a].length,n+=o[a-1].length,o[a]=t(o[a],a,n),n+=i}return o}var eve=function(r,t,n){return Array.isArray(r)||(r=[r]),Jpe(r.map(function(i){return uW(i)?Qpe(i,t,n):i}))};const zr=io(eve);var Fy={};Object.defineProperty(Fy,"__esModule",{value:!0});Fy.bech32m=lI=Fy.bech32=void 0;const Kw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",cW={};for(let e=0;e<Kw.length;e++){const r=Kw.charAt(e);cW[r]=e}function Ep(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function OB(e){let r=1;for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=Ep(r)^n>>5}r=Ep(r);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r=Ep(r)^n&31}return r}function sP(e,r,t,n){let i=0,s=0;const o=(1<<t)-1,a=[];for(let l=0;l<e.length;++l)for(i=i<<r|e[l],s+=r;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=r)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function tve(e){return sP(e,8,5,!0)}function rve(e){const r=sP(e,5,8,!1);if(Array.isArray(r))return r}function nve(e){const r=sP(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function fW(e){let r;e==="bech32"?r=1:r=734539939;function t(o,a,l){if(l=l||90,o.length+7+a.length>l)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let u=OB(o);if(typeof u=="string")throw new Error(u);let f=o+"1";for(let c=0;c<a.length;++c){const p=a[c];if(p>>5)throw new Error("Non 5-bit word");u=Ep(u)^p,f+=Kw.charAt(p)}for(let c=0;c<6;++c)u=Ep(u);u^=r;for(let c=0;c<6;++c){const p=u>>(5-c)*5&31;f+=Kw.charAt(p)}return f}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const l=o.toLowerCase(),u=o.toUpperCase();if(o!==l&&o!==u)return"Mixed-case string "+o;o=l;const f=o.lastIndexOf("1");if(f===-1)return"No separator character for "+o;if(f===0)return"Missing prefix for "+o;const c=o.slice(0,f),p=o.slice(f+1);if(p.length<6)return"Data too short";let y=OB(c);if(typeof y=="string")return y;const w=[];for(let b=0;b<p.length;++b){const T=p.charAt(b),_=cW[T];if(_===void 0)return"Unknown character "+T;y=Ep(y)^_,!(b+6>=p.length)&&w.push(_)}return y!==r?"Invalid checksum for "+o:{prefix:c,words:w}}function i(o,a){const l=n(o,a);if(typeof l=="object")return l}function s(o,a){const l=n(o,a);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:i,decode:s,encode:t,toWords:tve,fromWordsUnsafe:rve,fromWords:nve}}var lI=Fy.bech32=fW("bech32");Fy.bech32m=fW("bech32m");var hW={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(r,t){e.exports=r.document?t(r,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:Cn,function(r,t){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(m){return n.flat.call(m)}:function(m){return n.concat.apply([],m)},a=n.push,l=n.indexOf,u={},f=u.toString,c=u.hasOwnProperty,p=c.toString,y=p.call(Object),w={},b=function(k){return typeof k=="function"&&typeof k.nodeType!="number"&&typeof k.item!="function"},T=function(k){return k!=null&&k===k.window},_=r.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function x(m,k,P){P=P||_;var D,z,U=P.createElement("script");if(U.text=m,k)for(D in A)z=k[D]||k.getAttribute&&k.getAttribute(D),z&&U.setAttribute(D,z);P.head.appendChild(U).parentNode.removeChild(U)}function I(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?u[f.call(m)]||"object":typeof m}var O="3.7.0",C=/HTML$/i,g=function(m,k){return new g.fn.init(m,k)};g.fn=g.prototype={jquery:O,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(m){return m==null?s.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var k=g.merge(this.constructor(),m);return k.prevObject=this,k},each:function(m){return g.each(this,m)},map:function(m){return this.pushStack(g.map(this,function(k,P){return m.call(k,P,k)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(m,k){return(k+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(m,k){return k%2}))},eq:function(m){var k=this.length,P=+m+(m<0?k:0);return this.pushStack(P>=0&&P<k?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var m,k,P,D,z,U,K=arguments[0]||{},ce=1,se=arguments.length,Ee=!1;for(typeof K=="boolean"&&(Ee=K,K=arguments[ce]||{},ce++),typeof K!="object"&&!b(K)&&(K={}),ce===se&&(K=this,ce--);ce<se;ce++)if((m=arguments[ce])!=null)for(k in m)D=m[k],!(k==="__proto__"||K===D)&&(Ee&&D&&(g.isPlainObject(D)||(z=Array.isArray(D)))?(P=K[k],z&&!Array.isArray(P)?U=[]:!z&&!g.isPlainObject(P)?U={}:U=P,z=!1,K[k]=g.extend(Ee,U,D)):D!==void 0&&(K[k]=D));return K},g.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var k,P;return!m||f.call(m)!=="[object Object]"?!1:(k=i(m),k?(P=c.call(k,"constructor")&&k.constructor,typeof P=="function"&&p.call(P)===y):!0)},isEmptyObject:function(m){var k;for(k in m)return!1;return!0},globalEval:function(m,k,P){x(m,{nonce:k&&k.nonce},P)},each:function(m,k){var P,D=0;if(M(m))for(P=m.length;D<P&&k.call(m[D],D,m[D])!==!1;D++);else for(D in m)if(k.call(m[D],D,m[D])===!1)break;return m},text:function(m){var k,P="",D=0,z=m.nodeType;if(z){if(z===1||z===9||z===11)return m.textContent;if(z===3||z===4)return m.nodeValue}else for(;k=m[D++];)P+=g.text(k);return P},makeArray:function(m,k){var P=k||[];return m!=null&&(M(Object(m))?g.merge(P,typeof m=="string"?[m]:m):a.call(P,m)),P},inArray:function(m,k,P){return k==null?-1:l.call(k,m,P)},isXMLDoc:function(m){var k=m&&m.namespaceURI,P=m&&(m.ownerDocument||m).documentElement;return!C.test(k||P&&P.nodeName||"HTML")},merge:function(m,k){for(var P=+k.length,D=0,z=m.length;D<P;D++)m[z++]=k[D];return m.length=z,m},grep:function(m,k,P){for(var D,z=[],U=0,K=m.length,ce=!P;U<K;U++)D=!k(m[U],U),D!==ce&&z.push(m[U]);return z},map:function(m,k,P){var D,z,U=0,K=[];if(M(m))for(D=m.length;U<D;U++)z=k(m[U],U,P),z!=null&&K.push(z);else for(U in m)z=k(m[U],U,P),z!=null&&K.push(z);return o(K)},guid:1,support:w}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,k){u["[object "+k+"]"]=k.toLowerCase()});function M(m){var k=!!m&&"length"in m&&m.length,P=I(m);return b(m)||T(m)?!1:P==="array"||k===0||typeof k=="number"&&k>0&&k-1 in m}function B(m,k){return m.nodeName&&m.nodeName.toLowerCase()===k.toLowerCase()}var L=n.pop,q=n.sort,Q=n.splice,te="[\\x20\\t\\r\\n\\f]",X=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g");g.contains=function(m,k){var P=k&&k.parentNode;return m===P||!!(P&&P.nodeType===1&&(m.contains?m.contains(P):m.compareDocumentPosition&&m.compareDocumentPosition(P)&16))};var j=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Z(m,k){return k?m==="\0"?"�":m.slice(0,-1)+"\\"+m.charCodeAt(m.length-1).toString(16)+" ":"\\"+m}g.escapeSelector=function(m){return(m+"").replace(j,Z)};var ie=_,_e=a;(function(){var m,k,P,D,z,U=_e,K,ce,se,Ee,Pe,De=g.expando,Ae=0,Xe=0,bt=yf(),Yt=yf(),Gt=yf(),Zn=yf(),hn=function(ne,me){return ne===me&&(z=!0),0},mo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",bo="(?:\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",pr="\\["+te+"*("+bo+")(?:"+te+"*([*^$|!~]?=)"+te+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+bo+"))|)"+te+"*\\]",Ua=":("+bo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+pr+")*)|.*)\\)|)",vr=new RegExp(te+"+","g"),Mr=new RegExp("^"+te+"*,"+te+"*"),pf=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),$d=new RegExp(te+"|>"),Ls=new RegExp(Ua),Cl=new RegExp("^"+bo+"$"),gs={ID:new RegExp("^#("+bo+")"),CLASS:new RegExp("^\\.("+bo+")"),TAG:new RegExp("^("+bo+"|[*])"),ATTR:new RegExp("^"+pr),PSEUDO:new RegExp("^"+Ua),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+mo+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},ia=/^(?:input|select|textarea|button)$/i,Wa=/^h\d$/i,Fi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vf=/[+~]/,sa=new RegExp("\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\([^\\r\\n\\f])","g"),wo=function(ne,me){var Ie="0x"+ne.slice(1)-65536;return me||(Ie<0?String.fromCharCode(Ie+65536):String.fromCharCode(Ie>>10|55296,Ie&1023|56320))},Zi=function(){qa()},vg=Pl(function(ne){return ne.disabled===!0&&B(ne,"fieldset")},{dir:"parentNode",next:"legend"});function gf(){try{return K.activeElement}catch{}}try{U.apply(n=s.call(ie.childNodes),ie.childNodes),n[ie.childNodes.length].nodeType}catch{U={apply:function(me,Ie){_e.apply(me,s.call(Ie))},call:function(me){_e.apply(me,s.call(arguments,1))}}}function Ar(ne,me,Ie,Oe){var ee,pe,fe,Be,We,$t,_t,yt=me&&me.ownerDocument,tr=me?me.nodeType:9;if(Ie=Ie||[],typeof ne!="string"||!ne||tr!==1&&tr!==9&&tr!==11)return Ie;if(!Oe&&(qa(me),me=me||K,se)){if(tr!==11&&(We=Fi.exec(ne)))if(ee=We[1]){if(tr===9)if(fe=me.getElementById(ee)){if(fe.id===ee)return U.call(Ie,fe),Ie}else return Ie;else if(yt&&(fe=yt.getElementById(ee))&&Ar.contains(me,fe)&&fe.id===ee)return U.call(Ie,fe),Ie}else{if(We[2])return U.apply(Ie,me.getElementsByTagName(ne)),Ie;if((ee=We[3])&&me.getElementsByClassName)return U.apply(Ie,me.getElementsByClassName(ee)),Ie}if(!Zn[ne+" "]&&(!Ee||!Ee.test(ne))){if(_t=ne,yt=me,tr===1&&($d.test(ne)||pf.test(ne))){for(yt=vf.test(ne)&&gg(me.parentNode)||me,(yt!=me||!w.scope)&&((Be=me.getAttribute("id"))?Be=g.escapeSelector(Be):me.setAttribute("id",Be=De)),$t=mf(ne),pe=$t.length;pe--;)$t[pe]=(Be?"#"+Be:":scope")+" "+js($t[pe]);_t=$t.join(",")}try{return U.apply(Ie,yt.querySelectorAll(_t)),Ie}catch{Zn(ne,!0)}finally{Be===De&&me.removeAttribute("id")}}}return Jb(ne.replace(X,"$1"),me,Ie,Oe)}function yf(){var ne=[];function me(Ie,Oe){return ne.push(Ie+" ")>k.cacheLength&&delete me[ne.shift()],me[Ie+" "]=Oe}return me}function Fs(ne){return ne[De]=!0,ne}function ju(ne){var me=K.createElement("fieldset");try{return!!ne(me)}catch{return!1}finally{me.parentNode&&me.parentNode.removeChild(me),me=null}}function v2(ne){return function(me){return B(me,"input")&&me.type===ne}}function g2(ne){return function(me){return(B(me,"input")||B(me,"button"))&&me.type===ne}}function Zb(ne){return function(me){return"form"in me?me.parentNode&&me.disabled===!1?"label"in me?"label"in me.parentNode?me.parentNode.disabled===ne:me.disabled===ne:me.isDisabled===ne||me.isDisabled!==!ne&&vg(me)===ne:me.disabled===ne:"label"in me?me.disabled===ne:!1}}function ys(ne){return Fs(function(me){return me=+me,Fs(function(Ie,Oe){for(var ee,pe=ne([],Ie.length,me),fe=pe.length;fe--;)Ie[ee=pe[fe]]&&(Ie[ee]=!(Oe[ee]=Ie[ee]))})})}function gg(ne){return ne&&typeof ne.getElementsByTagName<"u"&&ne}function qa(ne){var me,Ie=ne?ne.ownerDocument||ne:ie;return Ie==K||Ie.nodeType!==9||!Ie.documentElement||(K=Ie,ce=K.documentElement,se=!g.isXMLDoc(K),Pe=ce.matches||ce.webkitMatchesSelector||ce.msMatchesSelector,ie!=K&&(me=K.defaultView)&&me.top!==me&&me.addEventListener("unload",Zi),w.getById=ju(function(Oe){return ce.appendChild(Oe).id=g.expando,!K.getElementsByName||!K.getElementsByName(g.expando).length}),w.disconnectedMatch=ju(function(Oe){return Pe.call(Oe,"*")}),w.scope=ju(function(){return K.querySelectorAll(":scope")}),w.cssHas=ju(function(){try{return K.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(k.filter.ID=function(Oe){var ee=Oe.replace(sa,wo);return function(pe){return pe.getAttribute("id")===ee}},k.find.ID=function(Oe,ee){if(typeof ee.getElementById<"u"&&se){var pe=ee.getElementById(Oe);return pe?[pe]:[]}}):(k.filter.ID=function(Oe){var ee=Oe.replace(sa,wo);return function(pe){var fe=typeof pe.getAttributeNode<"u"&&pe.getAttributeNode("id");return fe&&fe.value===ee}},k.find.ID=function(Oe,ee){if(typeof ee.getElementById<"u"&&se){var pe,fe,Be,We=ee.getElementById(Oe);if(We){if(pe=We.getAttributeNode("id"),pe&&pe.value===Oe)return[We];for(Be=ee.getElementsByName(Oe),fe=0;We=Be[fe++];)if(pe=We.getAttributeNode("id"),pe&&pe.value===Oe)return[We]}return[]}}),k.find.TAG=function(Oe,ee){return typeof ee.getElementsByTagName<"u"?ee.getElementsByTagName(Oe):ee.querySelectorAll(Oe)},k.find.CLASS=function(Oe,ee){if(typeof ee.getElementsByClassName<"u"&&se)return ee.getElementsByClassName(Oe)},Ee=[],ju(function(Oe){var ee;ce.appendChild(Oe).innerHTML="<a id='"+De+"' href='' disabled='disabled'></a><select id='"+De+"-\r\\' disabled='disabled'><option selected=''></option></select>",Oe.querySelectorAll("[selected]").length||Ee.push("\\["+te+"*(?:value|"+mo+")"),Oe.querySelectorAll("[id~="+De+"-]").length||Ee.push("~="),Oe.querySelectorAll("a#"+De+"+*").length||Ee.push(".#.+[+~]"),Oe.querySelectorAll(":checked").length||Ee.push(":checked"),ee=K.createElement("input"),ee.setAttribute("type","hidden"),Oe.appendChild(ee).setAttribute("name","D"),ce.appendChild(Oe).disabled=!0,Oe.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),ee=K.createElement("input"),ee.setAttribute("name",""),Oe.appendChild(ee),Oe.querySelectorAll("[name='']").length||Ee.push("\\["+te+"*name"+te+"*="+te+`*(?:''|"")`)}),w.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),hn=function(Oe,ee){if(Oe===ee)return z=!0,0;var pe=!Oe.compareDocumentPosition-!ee.compareDocumentPosition;return pe||(pe=(Oe.ownerDocument||Oe)==(ee.ownerDocument||ee)?Oe.compareDocumentPosition(ee):1,pe&1||!w.sortDetached&&ee.compareDocumentPosition(Oe)===pe?Oe===K||Oe.ownerDocument==ie&&Ar.contains(ie,Oe)?-1:ee===K||ee.ownerDocument==ie&&Ar.contains(ie,ee)?1:D?l.call(D,Oe)-l.call(D,ee):0:pe&4?-1:1)}),K}Ar.matches=function(ne,me){return Ar(ne,null,null,me)},Ar.matchesSelector=function(ne,me){if(qa(ne),se&&!Zn[me+" "]&&(!Ee||!Ee.test(me)))try{var Ie=Pe.call(ne,me);if(Ie||w.disconnectedMatch||ne.document&&ne.document.nodeType!==11)return Ie}catch{Zn(me,!0)}return Ar(me,K,null,[ne]).length>0},Ar.contains=function(ne,me){return(ne.ownerDocument||ne)!=K&&qa(ne),g.contains(ne,me)},Ar.attr=function(ne,me){(ne.ownerDocument||ne)!=K&&qa(ne);var Ie=k.attrHandle[me.toLowerCase()],Oe=Ie&&c.call(k.attrHandle,me.toLowerCase())?Ie(ne,me,!se):void 0;return Oe!==void 0?Oe:ne.getAttribute(me)},Ar.error=function(ne){throw new Error("Syntax error, unrecognized expression: "+ne)},g.uniqueSort=function(ne){var me,Ie=[],Oe=0,ee=0;if(z=!w.sortStable,D=!w.sortStable&&s.call(ne,0),q.call(ne,hn),z){for(;me=ne[ee++];)me===ne[ee]&&(Oe=Ie.push(ee));for(;Oe--;)Q.call(ne,Ie[Oe],1)}return D=null,ne},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(s.apply(this)))},k=g.expr={cacheLength:50,createPseudo:Fs,match:gs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ne){return ne[1]=ne[1].replace(sa,wo),ne[3]=(ne[3]||ne[4]||ne[5]||"").replace(sa,wo),ne[2]==="~="&&(ne[3]=" "+ne[3]+" "),ne.slice(0,4)},CHILD:function(ne){return ne[1]=ne[1].toLowerCase(),ne[1].slice(0,3)==="nth"?(ne[3]||Ar.error(ne[0]),ne[4]=+(ne[4]?ne[5]+(ne[6]||1):2*(ne[3]==="even"||ne[3]==="odd")),ne[5]=+(ne[7]+ne[8]||ne[3]==="odd")):ne[3]&&Ar.error(ne[0]),ne},PSEUDO:function(ne){var me,Ie=!ne[6]&&ne[2];return gs.CHILD.test(ne[0])?null:(ne[3]?ne[2]=ne[4]||ne[5]||"":Ie&&Ls.test(Ie)&&(me=mf(Ie,!0))&&(me=Ie.indexOf(")",Ie.length-me)-Ie.length)&&(ne[0]=ne[0].slice(0,me),ne[2]=Ie.slice(0,me)),ne.slice(0,3))}},filter:{TAG:function(ne){var me=ne.replace(sa,wo).toLowerCase();return ne==="*"?function(){return!0}:function(Ie){return B(Ie,me)}},CLASS:function(ne){var me=bt[ne+" "];return me||(me=new RegExp("(^|"+te+")"+ne+"("+te+"|$)"))&&bt(ne,function(Ie){return me.test(typeof Ie.className=="string"&&Ie.className||typeof Ie.getAttribute<"u"&&Ie.getAttribute("class")||"")})},ATTR:function(ne,me,Ie){return function(Oe){var ee=Ar.attr(Oe,ne);return ee==null?me==="!=":me?(ee+="",me==="="?ee===Ie:me==="!="?ee!==Ie:me==="^="?Ie&&ee.indexOf(Ie)===0:me==="*="?Ie&&ee.indexOf(Ie)>-1:me==="$="?Ie&&ee.slice(-Ie.length)===Ie:me==="~="?(" "+ee.replace(vr," ")+" ").indexOf(Ie)>-1:me==="|="?ee===Ie||ee.slice(0,Ie.length+1)===Ie+"-":!1):!0}},CHILD:function(ne,me,Ie,Oe,ee){var pe=ne.slice(0,3)!=="nth",fe=ne.slice(-4)!=="last",Be=me==="of-type";return Oe===1&&ee===0?function(We){return!!We.parentNode}:function(We,$t,_t){var yt,tr,Dt,ur,Xn,li=pe!==fe?"nextSibling":"previousSibling",Jn=We.parentNode,Ji=Be&&We.nodeName.toLowerCase(),oa=!_t&&!Be,qt=!1;if(Jn){if(pe){for(;li;){for(Dt=We;Dt=Dt[li];)if(Be?B(Dt,Ji):Dt.nodeType===1)return!1;Xn=li=ne==="only"&&!Xn&&"nextSibling"}return!0}if(Xn=[fe?Jn.firstChild:Jn.lastChild],fe&&oa){for(tr=Jn[De]||(Jn[De]={}),yt=tr[ne]||[],ur=yt[0]===Ae&&yt[1],qt=ur&&yt[2],Dt=ur&&Jn.childNodes[ur];Dt=++ur&&Dt&&Dt[li]||(qt=ur=0)||Xn.pop();)if(Dt.nodeType===1&&++qt&&Dt===We){tr[ne]=[Ae,ur,qt];break}}else if(oa&&(tr=We[De]||(We[De]={}),yt=tr[ne]||[],ur=yt[0]===Ae&&yt[1],qt=ur),qt===!1)for(;(Dt=++ur&&Dt&&Dt[li]||(qt=ur=0)||Xn.pop())&&!((Be?B(Dt,Ji):Dt.nodeType===1)&&++qt&&(oa&&(tr=Dt[De]||(Dt[De]={}),tr[ne]=[Ae,qt]),Dt===We)););return qt-=ee,qt===Oe||qt%Oe===0&&qt/Oe>=0}}},PSEUDO:function(ne,me){var Ie,Oe=k.pseudos[ne]||k.setFilters[ne.toLowerCase()]||Ar.error("unsupported pseudo: "+ne);return Oe[De]?Oe(me):Oe.length>1?(Ie=[ne,ne,"",me],k.setFilters.hasOwnProperty(ne.toLowerCase())?Fs(function(ee,pe){for(var fe,Be=Oe(ee,me),We=Be.length;We--;)fe=l.call(ee,Be[We]),ee[fe]=!(pe[fe]=Be[We])}):function(ee){return Oe(ee,0,Ie)}):Oe}},pseudos:{not:Fs(function(ne){var me=[],Ie=[],Oe=mg(ne.replace(X,"$1"));return Oe[De]?Fs(function(ee,pe,fe,Be){for(var We,$t=Oe(ee,null,Be,[]),_t=ee.length;_t--;)(We=$t[_t])&&(ee[_t]=!(pe[_t]=We))}):function(ee,pe,fe){return me[0]=ee,Oe(me,null,fe,Ie),me[0]=null,!Ie.pop()}}),has:Fs(function(ne){return function(me){return Ar(ne,me).length>0}}),contains:Fs(function(ne){return ne=ne.replace(sa,wo),function(me){return(me.textContent||g.text(me)).indexOf(ne)>-1}}),lang:Fs(function(ne){return Cl.test(ne||"")||Ar.error("unsupported lang: "+ne),ne=ne.replace(sa,wo).toLowerCase(),function(me){var Ie;do if(Ie=se?me.lang:me.getAttribute("xml:lang")||me.getAttribute("lang"))return Ie=Ie.toLowerCase(),Ie===ne||Ie.indexOf(ne+"-")===0;while((me=me.parentNode)&&me.nodeType===1);return!1}}),target:function(ne){var me=r.location&&r.location.hash;return me&&me.slice(1)===ne.id},root:function(ne){return ne===ce},focus:function(ne){return ne===gf()&&K.hasFocus()&&!!(ne.type||ne.href||~ne.tabIndex)},enabled:Zb(!1),disabled:Zb(!0),checked:function(ne){return B(ne,"input")&&!!ne.checked||B(ne,"option")&&!!ne.selected},selected:function(ne){return ne.parentNode&&ne.parentNode.selectedIndex,ne.selected===!0},empty:function(ne){for(ne=ne.firstChild;ne;ne=ne.nextSibling)if(ne.nodeType<6)return!1;return!0},parent:function(ne){return!k.pseudos.empty(ne)},header:function(ne){return Wa.test(ne.nodeName)},input:function(ne){return ia.test(ne.nodeName)},button:function(ne){return B(ne,"input")&&ne.type==="button"||B(ne,"button")},text:function(ne){var me;return B(ne,"input")&&ne.type==="text"&&((me=ne.getAttribute("type"))==null||me.toLowerCase()==="text")},first:ys(function(){return[0]}),last:ys(function(ne,me){return[me-1]}),eq:ys(function(ne,me,Ie){return[Ie<0?Ie+me:Ie]}),even:ys(function(ne,me){for(var Ie=0;Ie<me;Ie+=2)ne.push(Ie);return ne}),odd:ys(function(ne,me){for(var Ie=1;Ie<me;Ie+=2)ne.push(Ie);return ne}),lt:ys(function(ne,me,Ie){var Oe;for(Ie<0?Oe=Ie+me:Ie>me?Oe=me:Oe=Ie;--Oe>=0;)ne.push(Oe);return ne}),gt:ys(function(ne,me,Ie){for(var Oe=Ie<0?Ie+me:Ie;++Oe<me;)ne.push(Oe);return ne})}},k.pseudos.nth=k.pseudos.eq;for(m in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[m]=v2(m);for(m in{submit:!0,reset:!0})k.pseudos[m]=g2(m);function _d(){}_d.prototype=k.filters=k.pseudos,k.setFilters=new _d;function mf(ne,me){var Ie,Oe,ee,pe,fe,Be,We,$t=Yt[ne+" "];if($t)return me?0:$t.slice(0);for(fe=ne,Be=[],We=k.preFilter;fe;){(!Ie||(Oe=Mr.exec(fe)))&&(Oe&&(fe=fe.slice(Oe[0].length)||fe),Be.push(ee=[])),Ie=!1,(Oe=pf.exec(fe))&&(Ie=Oe.shift(),ee.push({value:Ie,type:Oe[0].replace(X," ")}),fe=fe.slice(Ie.length));for(pe in k.filter)(Oe=gs[pe].exec(fe))&&(!We[pe]||(Oe=We[pe](Oe)))&&(Ie=Oe.shift(),ee.push({value:Ie,type:pe,matches:Oe}),fe=fe.slice(Ie.length));if(!Ie)break}return me?fe.length:fe?Ar.error(ne):Yt(ne,Be).slice(0)}function js(ne){for(var me=0,Ie=ne.length,Oe="";me<Ie;me++)Oe+=ne[me].value;return Oe}function Pl(ne,me,Ie){var Oe=me.dir,ee=me.next,pe=ee||Oe,fe=Ie&&pe==="parentNode",Be=Xe++;return me.first?function(We,$t,_t){for(;We=We[Oe];)if(We.nodeType===1||fe)return ne(We,$t,_t);return!1}:function(We,$t,_t){var yt,tr,Dt=[Ae,Be];if(_t){for(;We=We[Oe];)if((We.nodeType===1||fe)&&ne(We,$t,_t))return!0}else for(;We=We[Oe];)if(We.nodeType===1||fe)if(tr=We[De]||(We[De]={}),ee&&B(We,ee))We=We[Oe]||We;else{if((yt=tr[pe])&&yt[0]===Ae&&yt[1]===Be)return Dt[2]=yt[2];if(tr[pe]=Dt,Dt[2]=ne(We,$t,_t))return!0}return!1}}function yg(ne){return ne.length>1?function(me,Ie,Oe){for(var ee=ne.length;ee--;)if(!ne[ee](me,Ie,Oe))return!1;return!0}:ne[0]}function y2(ne,me,Ie){for(var Oe=0,ee=me.length;Oe<ee;Oe++)Ar(ne,me[Oe],Ie);return Ie}function xd(ne,me,Ie,Oe,ee){for(var pe,fe=[],Be=0,We=ne.length,$t=me!=null;Be<We;Be++)(pe=ne[Be])&&(!Ie||Ie(pe,Oe,ee))&&(fe.push(pe),$t&&me.push(Be));return fe}function Ka(ne,me,Ie,Oe,ee,pe){return Oe&&!Oe[De]&&(Oe=Ka(Oe)),ee&&!ee[De]&&(ee=Ka(ee,pe)),Fs(function(fe,Be,We,$t){var _t,yt,tr,Dt,ur=[],Xn=[],li=Be.length,Jn=fe||y2(me||"*",We.nodeType?[We]:We,[]),Ji=ne&&(fe||!me)?xd(Jn,ur,ne,We,$t):Jn;if(Ie?(Dt=ee||(fe?ne:li||Oe)?[]:Be,Ie(Ji,Dt,We,$t)):Dt=Ji,Oe)for(_t=xd(Dt,Xn),Oe(_t,[],We,$t),yt=_t.length;yt--;)(tr=_t[yt])&&(Dt[Xn[yt]]=!(Ji[Xn[yt]]=tr));if(fe){if(ee||ne){if(ee){for(_t=[],yt=Dt.length;yt--;)(tr=Dt[yt])&&_t.push(Ji[yt]=tr);ee(null,Dt=[],_t,$t)}for(yt=Dt.length;yt--;)(tr=Dt[yt])&&(_t=ee?l.call(fe,tr):ur[yt])>-1&&(fe[_t]=!(Be[_t]=tr))}}else Dt=xd(Dt===Be?Dt.splice(li,Dt.length):Dt),ee?ee(null,Be,Dt,$t):U.apply(Be,Dt)})}function Xi(ne){for(var me,Ie,Oe,ee=ne.length,pe=k.relative[ne[0].type],fe=pe||k.relative[" "],Be=pe?1:0,We=Pl(function(yt){return yt===me},fe,!0),$t=Pl(function(yt){return l.call(me,yt)>-1},fe,!0),_t=[function(yt,tr,Dt){var ur=!pe&&(Dt||tr!=P)||((me=tr).nodeType?We(yt,tr,Dt):$t(yt,tr,Dt));return me=null,ur}];Be<ee;Be++)if(Ie=k.relative[ne[Be].type])_t=[Pl(yg(_t),Ie)];else{if(Ie=k.filter[ne[Be].type].apply(null,ne[Be].matches),Ie[De]){for(Oe=++Be;Oe<ee&&!k.relative[ne[Oe].type];Oe++);return Ka(Be>1&&yg(_t),Be>1&&js(ne.slice(0,Be-1).concat({value:ne[Be-2].type===" "?"*":""})).replace(X,"$1"),Ie,Be<Oe&&Xi(ne.slice(Be,Oe)),Oe<ee&&Xi(ne=ne.slice(Oe)),Oe<ee&&js(ne))}_t.push(Ie)}return yg(_t)}function Xb(ne,me){var Ie=me.length>0,Oe=ne.length>0,ee=function(pe,fe,Be,We,$t){var _t,yt,tr,Dt=0,ur="0",Xn=pe&&[],li=[],Jn=P,Ji=pe||Oe&&k.find.TAG("*",$t),oa=Ae+=Jn==null?1:Math.random()||.1,qt=Ji.length;for($t&&(P=fe==K||fe||$t);ur!==qt&&(_t=Ji[ur])!=null;ur++){if(Oe&&_t){for(yt=0,!fe&&_t.ownerDocument!=K&&(qa(_t),Be=!se);tr=ne[yt++];)if(tr(_t,fe||K,Be)){U.call(We,_t);break}$t&&(Ae=oa)}Ie&&((_t=!tr&&_t)&&Dt--,pe&&Xn.push(_t))}if(Dt+=ur,Ie&&ur!==Dt){for(yt=0;tr=me[yt++];)tr(Xn,li,fe,Be);if(pe){if(Dt>0)for(;ur--;)Xn[ur]||li[ur]||(li[ur]=L.call(We));li=xd(li)}U.apply(We,li),$t&&!pe&&li.length>0&&Dt+me.length>1&&g.uniqueSort(We)}return $t&&(Ae=oa,P=Jn),Xn};return Ie?Fs(ee):ee}function mg(ne,me){var Ie,Oe=[],ee=[],pe=Gt[ne+" "];if(!pe){for(me||(me=mf(ne)),Ie=me.length;Ie--;)pe=Xi(me[Ie]),pe[De]?Oe.push(pe):ee.push(pe);pe=Gt(ne,Xb(ee,Oe)),pe.selector=ne}return pe}function Jb(ne,me,Ie,Oe){var ee,pe,fe,Be,We,$t=typeof ne=="function"&&ne,_t=!Oe&&mf(ne=$t.selector||ne);if(Ie=Ie||[],_t.length===1){if(pe=_t[0]=_t[0].slice(0),pe.length>2&&(fe=pe[0]).type==="ID"&&me.nodeType===9&&se&&k.relative[pe[1].type]){if(me=(k.find.ID(fe.matches[0].replace(sa,wo),me)||[])[0],me)$t&&(me=me.parentNode);else return Ie;ne=ne.slice(pe.shift().value.length)}for(ee=gs.needsContext.test(ne)?0:pe.length;ee--&&(fe=pe[ee],!k.relative[Be=fe.type]);)if((We=k.find[Be])&&(Oe=We(fe.matches[0].replace(sa,wo),vf.test(pe[0].type)&&gg(me.parentNode)||me))){if(pe.splice(ee,1),ne=Oe.length&&js(pe),!ne)return U.apply(Ie,Oe),Ie;break}}return($t||mg(ne,_t))(Oe,me,!se,Ie,!me||vf.test(ne)&&gg(me.parentNode)||me),Ie}w.sortStable=De.split("").sort(hn).join("")===De,qa(),w.sortDetached=ju(function(ne){return ne.compareDocumentPosition(K.createElement("fieldset"))&1}),g.find=Ar,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,Ar.compile=mg,Ar.select=Jb,Ar.setDocument=qa,Ar.escape=g.escapeSelector,Ar.getText=g.text,Ar.isXML=g.isXMLDoc,Ar.selectors=g.expr,Ar.support=g.support,Ar.uniqueSort=g.uniqueSort})();var we=function(m,k,P){for(var D=[],z=P!==void 0;(m=m[k])&&m.nodeType!==9;)if(m.nodeType===1){if(z&&g(m).is(P))break;D.push(m)}return D},Ce=function(m,k){for(var P=[];m;m=m.nextSibling)m.nodeType===1&&m!==k&&P.push(m);return P},ze=g.expr.match.needsContext,Ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function it(m,k,P){return b(k)?g.grep(m,function(D,z){return!!k.call(D,z,D)!==P}):k.nodeType?g.grep(m,function(D){return D===k!==P}):typeof k!="string"?g.grep(m,function(D){return l.call(k,D)>-1!==P}):g.filter(k,m,P)}g.filter=function(m,k,P){var D=k[0];return P&&(m=":not("+m+")"),k.length===1&&D.nodeType===1?g.find.matchesSelector(D,m)?[D]:[]:g.find.matches(m,g.grep(k,function(z){return z.nodeType===1}))},g.fn.extend({find:function(m){var k,P,D=this.length,z=this;if(typeof m!="string")return this.pushStack(g(m).filter(function(){for(k=0;k<D;k++)if(g.contains(z[k],this))return!0}));for(P=this.pushStack([]),k=0;k<D;k++)g.find(m,z[k],P);return D>1?g.uniqueSort(P):P},filter:function(m){return this.pushStack(it(this,m||[],!1))},not:function(m){return this.pushStack(it(this,m||[],!0))},is:function(m){return!!it(this,typeof m=="string"&&ze.test(m)?g(m):m||[],!1).length}});var xe,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=g.fn.init=function(m,k,P){var D,z;if(!m)return this;if(P=P||xe,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?D=[null,m,null]:D=ge.exec(m),D&&(D[1]||!k))if(D[1]){if(k=k instanceof g?k[0]:k,g.merge(this,g.parseHTML(D[1],k&&k.nodeType?k.ownerDocument||k:_,!0)),Ge.test(D[1])&&g.isPlainObject(k))for(D in k)b(this[D])?this[D](k[D]):this.attr(D,k[D]);return this}else return z=_.getElementById(D[2]),z&&(this[0]=z,this.length=1),this;else return!k||k.jquery?(k||P).find(m):this.constructor(k).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(b(m))return P.ready!==void 0?P.ready(m):m(g)}return g.makeArray(m,this)};Te.prototype=g.fn,xe=g(_);var Fe=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(m){var k=g(m,this),P=k.length;return this.filter(function(){for(var D=0;D<P;D++)if(g.contains(this,k[D]))return!0})},closest:function(m,k){var P,D=0,z=this.length,U=[],K=typeof m!="string"&&g(m);if(!ze.test(m)){for(;D<z;D++)for(P=this[D];P&&P!==k;P=P.parentNode)if(P.nodeType<11&&(K?K.index(P)>-1:P.nodeType===1&&g.find.matchesSelector(P,m))){U.push(P);break}}return this.pushStack(U.length>1?g.uniqueSort(U):U)},index:function(m){return m?typeof m=="string"?l.call(g(m),this[0]):l.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,k){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(m,k))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function S(m,k){for(;(m=m[k])&&m.nodeType!==1;);return m}g.each({parent:function(m){var k=m.parentNode;return k&&k.nodeType!==11?k:null},parents:function(m){return we(m,"parentNode")},parentsUntil:function(m,k,P){return we(m,"parentNode",P)},next:function(m){return S(m,"nextSibling")},prev:function(m){return S(m,"previousSibling")},nextAll:function(m){return we(m,"nextSibling")},prevAll:function(m){return we(m,"previousSibling")},nextUntil:function(m,k,P){return we(m,"nextSibling",P)},prevUntil:function(m,k,P){return we(m,"previousSibling",P)},siblings:function(m){return Ce((m.parentNode||{}).firstChild,m)},children:function(m){return Ce(m.firstChild)},contents:function(m){return m.contentDocument!=null&&i(m.contentDocument)?m.contentDocument:(B(m,"template")&&(m=m.content||m),g.merge([],m.childNodes))}},function(m,k){g.fn[m]=function(P,D){var z=g.map(this,k,P);return m.slice(-5)!=="Until"&&(D=P),D&&typeof D=="string"&&(z=g.filter(D,z)),this.length>1&&($[m]||g.uniqueSort(z),Fe.test(m)&&z.reverse()),this.pushStack(z)}});var N=/[^\x20\t\r\n\f]+/g;function F(m){var k={};return g.each(m.match(N)||[],function(P,D){k[D]=!0}),k}g.Callbacks=function(m){m=typeof m=="string"?F(m):g.extend({},m);var k,P,D,z,U=[],K=[],ce=-1,se=function(){for(z=z||m.once,D=k=!0;K.length;ce=-1)for(P=K.shift();++ce<U.length;)U[ce].apply(P[0],P[1])===!1&&m.stopOnFalse&&(ce=U.length,P=!1);m.memory||(P=!1),k=!1,z&&(P?U=[]:U="")},Ee={add:function(){return U&&(P&&!k&&(ce=U.length-1,K.push(P)),function Pe(De){g.each(De,function(Ae,Xe){b(Xe)?(!m.unique||!Ee.has(Xe))&&U.push(Xe):Xe&&Xe.length&&I(Xe)!=="string"&&Pe(Xe)})}(arguments),P&&!k&&se()),this},remove:function(){return g.each(arguments,function(Pe,De){for(var Ae;(Ae=g.inArray(De,U,Ae))>-1;)U.splice(Ae,1),Ae<=ce&&ce--}),this},has:function(Pe){return Pe?g.inArray(Pe,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return z=K=[],U=P="",this},disabled:function(){return!U},lock:function(){return z=K=[],!P&&!k&&(U=P=""),this},locked:function(){return!!z},fireWith:function(Pe,De){return z||(De=De||[],De=[Pe,De.slice?De.slice():De],K.push(De),k||se()),this},fire:function(){return Ee.fireWith(this,arguments),this},fired:function(){return!!D}};return Ee};function H(m){return m}function V(m){throw m}function le(m,k,P,D){var z;try{m&&b(z=m.promise)?z.call(m).done(k).fail(P):m&&b(z=m.then)?z.call(m,k,P):k.apply(void 0,[m].slice(D))}catch(U){P.apply(void 0,[U])}}g.extend({Deferred:function(m){var k=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],P="pending",D={state:function(){return P},always:function(){return z.done(arguments).fail(arguments),this},catch:function(U){return D.then(null,U)},pipe:function(){var U=arguments;return g.Deferred(function(K){g.each(k,function(ce,se){var Ee=b(U[se[4]])&&U[se[4]];z[se[1]](function(){var Pe=Ee&&Ee.apply(this,arguments);Pe&&b(Pe.promise)?Pe.promise().progress(K.notify).done(K.resolve).fail(K.reject):K[se[0]+"With"](this,Ee?[Pe]:arguments)})}),U=null}).promise()},then:function(U,K,ce){var se=0;function Ee(Pe,De,Ae,Xe){return function(){var bt=this,Yt=arguments,Gt=function(){var hn,mo;if(!(Pe<se)){if(hn=Ae.apply(bt,Yt),hn===De.promise())throw new TypeError("Thenable self-resolution");mo=hn&&(typeof hn=="object"||typeof hn=="function")&&hn.then,b(mo)?Xe?mo.call(hn,Ee(se,De,H,Xe),Ee(se,De,V,Xe)):(se++,mo.call(hn,Ee(se,De,H,Xe),Ee(se,De,V,Xe),Ee(se,De,H,De.notifyWith))):(Ae!==H&&(bt=void 0,Yt=[hn]),(Xe||De.resolveWith)(bt,Yt))}},Zn=Xe?Gt:function(){try{Gt()}catch(hn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(hn,Zn.error),Pe+1>=se&&(Ae!==V&&(bt=void 0,Yt=[hn]),De.rejectWith(bt,Yt))}};Pe?Zn():(g.Deferred.getErrorHook?Zn.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(Zn.error=g.Deferred.getStackHook()),r.setTimeout(Zn))}}return g.Deferred(function(Pe){k[0][3].add(Ee(0,Pe,b(ce)?ce:H,Pe.notifyWith)),k[1][3].add(Ee(0,Pe,b(U)?U:H)),k[2][3].add(Ee(0,Pe,b(K)?K:V))}).promise()},promise:function(U){return U!=null?g.extend(U,D):D}},z={};return g.each(k,function(U,K){var ce=K[2],se=K[5];D[K[1]]=ce.add,se&&ce.add(function(){P=se},k[3-U][2].disable,k[3-U][3].disable,k[0][2].lock,k[0][3].lock),ce.add(K[3].fire),z[K[0]]=function(){return z[K[0]+"With"](this===z?void 0:this,arguments),this},z[K[0]+"With"]=ce.fireWith}),D.promise(z),m&&m.call(z,z),z},when:function(m){var k=arguments.length,P=k,D=Array(P),z=s.call(arguments),U=g.Deferred(),K=function(ce){return function(se){D[ce]=this,z[ce]=arguments.length>1?s.call(arguments):se,--k||U.resolveWith(D,z)}};if(k<=1&&(le(m,U.done(K(P)).resolve,U.reject,!k),U.state()==="pending"||b(z[P]&&z[P].then)))return U.then();for(;P--;)le(z[P],K(P),U.reject);return U.promise()}});var ye=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(m,k){r.console&&r.console.warn&&m&&ye.test(m.name)&&r.console.warn("jQuery.Deferred exception: "+m.message,m.stack,k)},g.readyException=function(m){r.setTimeout(function(){throw m})};var Ue=g.Deferred();g.fn.ready=function(m){return Ue.then(m).catch(function(k){g.readyException(k)}),this},g.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(m!==!0&&--g.readyWait>0)&&Ue.resolveWith(_,[g]))}}),g.ready.then=Ue.then;function je(){_.removeEventListener("DOMContentLoaded",je),r.removeEventListener("load",je),g.ready()}_.readyState==="complete"||_.readyState!=="loading"&&!_.documentElement.doScroll?r.setTimeout(g.ready):(_.addEventListener("DOMContentLoaded",je),r.addEventListener("load",je));var st=function(m,k,P,D,z,U,K){var ce=0,se=m.length,Ee=P==null;if(I(P)==="object"){z=!0;for(ce in P)st(m,k,ce,P[ce],!0,U,K)}else if(D!==void 0&&(z=!0,b(D)||(K=!0),Ee&&(K?(k.call(m,D),k=null):(Ee=k,k=function(Pe,De,Ae){return Ee.call(g(Pe),Ae)})),k))for(;ce<se;ce++)k(m[ce],P,K?D:D.call(m[ce],ce,k(m[ce],P)));return z?m:Ee?k.call(m):se?k(m[0],P):U},wt=/^-ms-/,mt=/-([a-z])/g;function vt(m,k){return k.toUpperCase()}function Rt(m){return m.replace(wt,"ms-").replace(mt,vt)}var dr=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function Gr(){this.expando=g.expando+Gr.uid++}Gr.uid=1,Gr.prototype={cache:function(m){var k=m[this.expando];return k||(k={},dr(m)&&(m.nodeType?m[this.expando]=k:Object.defineProperty(m,this.expando,{value:k,configurable:!0}))),k},set:function(m,k,P){var D,z=this.cache(m);if(typeof k=="string")z[Rt(k)]=P;else for(D in k)z[Rt(D)]=k[D];return z},get:function(m,k){return k===void 0?this.cache(m):m[this.expando]&&m[this.expando][Rt(k)]},access:function(m,k,P){return k===void 0||k&&typeof k=="string"&&P===void 0?this.get(m,k):(this.set(m,k,P),P!==void 0?P:k)},remove:function(m,k){var P,D=m[this.expando];if(D!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(Rt):(k=Rt(k),k=k in D?[k]:k.match(N)||[]),P=k.length;P--;)delete D[k[P]];(k===void 0||g.isEmptyObject(D))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var k=m[this.expando];return k!==void 0&&!g.isEmptyObject(k)}};var ct=new Gr,It=new Gr,gn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Di=/[A-Z]/g;function Gi(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:gn.test(m)?JSON.parse(m):m}function yn(m,k,P){var D;if(P===void 0&&m.nodeType===1)if(D="data-"+k.replace(Di,"-$&").toLowerCase(),P=m.getAttribute(D),typeof P=="string"){try{P=Gi(P)}catch{}It.set(m,k,P)}else P=void 0;return P}g.extend({hasData:function(m){return It.hasData(m)||ct.hasData(m)},data:function(m,k,P){return It.access(m,k,P)},removeData:function(m,k){It.remove(m,k)},_data:function(m,k,P){return ct.access(m,k,P)},_removeData:function(m,k){ct.remove(m,k)}}),g.fn.extend({data:function(m,k){var P,D,z,U=this[0],K=U&&U.attributes;if(m===void 0){if(this.length&&(z=It.get(U),U.nodeType===1&&!ct.get(U,"hasDataAttrs"))){for(P=K.length;P--;)K[P]&&(D=K[P].name,D.indexOf("data-")===0&&(D=Rt(D.slice(5)),yn(U,D,z[D])));ct.set(U,"hasDataAttrs",!0)}return z}return typeof m=="object"?this.each(function(){It.set(this,m)}):st(this,function(ce){var se;if(U&&ce===void 0)return se=It.get(U,m),se!==void 0||(se=yn(U,m),se!==void 0)?se:void 0;this.each(function(){It.set(this,m,ce)})},null,k,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){It.remove(this,m)})}}),g.extend({queue:function(m,k,P){var D;if(m)return k=(k||"fx")+"queue",D=ct.get(m,k),P&&(!D||Array.isArray(P)?D=ct.access(m,k,g.makeArray(P)):D.push(P)),D||[]},dequeue:function(m,k){k=k||"fx";var P=g.queue(m,k),D=P.length,z=P.shift(),U=g._queueHooks(m,k),K=function(){g.dequeue(m,k)};z==="inprogress"&&(z=P.shift(),D--),z&&(k==="fx"&&P.unshift("inprogress"),delete U.stop,z.call(m,K,U)),!D&&U&&U.empty.fire()},_queueHooks:function(m,k){var P=k+"queueHooks";return ct.get(m,P)||ct.access(m,P,{empty:g.Callbacks("once memory").add(function(){ct.remove(m,[k+"queue",P])})})}}),g.fn.extend({queue:function(m,k){var P=2;return typeof m!="string"&&(k=m,m="fx",P--),arguments.length<P?g.queue(this[0],m):k===void 0?this:this.each(function(){var D=g.queue(this,m,k);g._queueHooks(this,m),m==="fx"&&D[0]!=="inprogress"&&g.dequeue(this,m)})},dequeue:function(m){return this.each(function(){g.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,k){var P,D=1,z=g.Deferred(),U=this,K=this.length,ce=function(){--D||z.resolveWith(U,[U])};for(typeof m!="string"&&(k=m,m=void 0),m=m||"fx";K--;)P=ct.get(U[K],m+"queueHooks"),P&&P.empty&&(D++,P.empty.add(ce));return ce(),z.promise(k)}});var ps=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fo=new RegExp("^(?:([+-])=|)("+ps+")([a-z%]*)$","i"),Bi=["Top","Right","Bottom","Left"],Yi=_.documentElement,ho=function(m){return g.contains(m.ownerDocument,m)},of={composed:!0};Yi.getRootNode&&(ho=function(m){return g.contains(m.ownerDocument,m)||m.getRootNode(of)===m.ownerDocument});var po=function(m,k){return m=k||m,m.style.display==="none"||m.style.display===""&&ho(m)&&g.css(m,"display")==="none"};function af(m,k,P,D){var z,U,K=20,ce=D?function(){return D.cur()}:function(){return g.css(m,k,"")},se=ce(),Ee=P&&P[3]||(g.cssNumber[k]?"":"px"),Pe=m.nodeType&&(g.cssNumber[k]||Ee!=="px"&&+se)&&fo.exec(g.css(m,k));if(Pe&&Pe[3]!==Ee){for(se=se/2,Ee=Ee||Pe[3],Pe=+se||1;K--;)g.style(m,k,Pe+Ee),(1-U)*(1-(U=ce()/se||.5))<=0&&(K=0),Pe=Pe/U;Pe=Pe*2,g.style(m,k,Pe+Ee),P=P||[]}return P&&(Pe=+Pe||+se||0,z=P[1]?Pe+(P[1]+1)*P[2]:+P[2],D&&(D.unit=Ee,D.start=Pe,D.end=z)),z}var sd={};function vo(m){var k,P=m.ownerDocument,D=m.nodeName,z=sd[D];return z||(k=P.body.appendChild(P.createElement(D)),z=g.css(k,"display"),k.parentNode.removeChild(k),z==="none"&&(z="block"),sd[D]=z,z)}function ta(m,k){for(var P,D,z=[],U=0,K=m.length;U<K;U++)D=m[U],D.style&&(P=D.style.display,k?(P==="none"&&(z[U]=ct.get(D,"display")||null,z[U]||(D.style.display="")),D.style.display===""&&po(D)&&(z[U]=vo(D))):P!=="none"&&(z[U]="none",ct.set(D,"display",P)));for(U=0;U<K;U++)z[U]!=null&&(m[U].style.display=z[U]);return m}g.fn.extend({show:function(){return ta(this,!0)},hide:function(){return ta(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){po(this)?g(this).show():g(this).hide()})}});var La=/^(?:checkbox|radio)$/i,lf=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,od=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=_.createDocumentFragment(),k=m.appendChild(_.createElement("div")),P=_.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),k.appendChild(P),w.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,k.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!k.cloneNode(!0).lastChild.defaultValue,k.innerHTML="<option></option>",w.option=!!k.lastChild})();var Mi={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Mi.tbody=Mi.tfoot=Mi.colgroup=Mi.caption=Mi.thead,Mi.th=Mi.td,w.option||(Mi.optgroup=Mi.option=[1,"<select multiple='multiple'>","</select>"]);function ai(m,k){var P;return typeof m.getElementsByTagName<"u"?P=m.getElementsByTagName(k||"*"):typeof m.querySelectorAll<"u"?P=m.querySelectorAll(k||"*"):P=[],k===void 0||k&&B(m,k)?g.merge([m],P):P}function Du(m,k){for(var P=0,D=m.length;P<D;P++)ct.set(m[P],"globalEval",!k||ct.get(k[P],"globalEval"))}var rg=/<|&#?\w+;/;function ad(m,k,P,D,z){for(var U,K,ce,se,Ee,Pe,De=k.createDocumentFragment(),Ae=[],Xe=0,bt=m.length;Xe<bt;Xe++)if(U=m[Xe],U||U===0)if(I(U)==="object")g.merge(Ae,U.nodeType?[U]:U);else if(!rg.test(U))Ae.push(k.createTextNode(U));else{for(K=K||De.appendChild(k.createElement("div")),ce=(lf.exec(U)||["",""])[1].toLowerCase(),se=Mi[ce]||Mi._default,K.innerHTML=se[1]+g.htmlPrefilter(U)+se[2],Pe=se[0];Pe--;)K=K.lastChild;g.merge(Ae,K.childNodes),K=De.firstChild,K.textContent=""}for(De.textContent="",Xe=0;U=Ae[Xe++];){if(D&&g.inArray(U,D)>-1){z&&z.push(U);continue}if(Ee=ho(U),K=ai(De.appendChild(U),"script"),Ee&&Du(K),P)for(Pe=0;U=K[Pe++];)od.test(U.type||"")&&P.push(U)}return De}var ld=/^([^.]*)(?:\.(.+)|)/;function go(){return!0}function Fa(){return!1}function Tl(m,k,P,D,z,U){var K,ce;if(typeof k=="object"){typeof P!="string"&&(D=D||P,P=void 0);for(ce in k)Tl(m,ce,P,D,k[ce],U);return m}if(D==null&&z==null?(z=P,D=P=void 0):z==null&&(typeof P=="string"?(z=D,D=void 0):(z=D,D=P,P=void 0)),z===!1)z=Fa;else if(!z)return m;return U===1&&(K=z,z=function(se){return g().off(se),K.apply(this,arguments)},z.guid=K.guid||(K.guid=g.guid++)),m.each(function(){g.event.add(this,k,z,D,P)})}g.event={global:{},add:function(m,k,P,D,z){var U,K,ce,se,Ee,Pe,De,Ae,Xe,bt,Yt,Gt=ct.get(m);if(dr(m))for(P.handler&&(U=P,P=U.handler,z=U.selector),z&&g.find.matchesSelector(Yi,z),P.guid||(P.guid=g.guid++),(se=Gt.events)||(se=Gt.events=Object.create(null)),(K=Gt.handle)||(K=Gt.handle=function(Zn){return typeof g<"u"&&g.event.triggered!==Zn.type?g.event.dispatch.apply(m,arguments):void 0}),k=(k||"").match(N)||[""],Ee=k.length;Ee--;)ce=ld.exec(k[Ee])||[],Xe=Yt=ce[1],bt=(ce[2]||"").split(".").sort(),Xe&&(De=g.event.special[Xe]||{},Xe=(z?De.delegateType:De.bindType)||Xe,De=g.event.special[Xe]||{},Pe=g.extend({type:Xe,origType:Yt,data:D,handler:P,guid:P.guid,selector:z,needsContext:z&&g.expr.match.needsContext.test(z),namespace:bt.join(".")},U),(Ae=se[Xe])||(Ae=se[Xe]=[],Ae.delegateCount=0,(!De.setup||De.setup.call(m,D,bt,K)===!1)&&m.addEventListener&&m.addEventListener(Xe,K)),De.add&&(De.add.call(m,Pe),Pe.handler.guid||(Pe.handler.guid=P.guid)),z?Ae.splice(Ae.delegateCount++,0,Pe):Ae.push(Pe),g.event.global[Xe]=!0)},remove:function(m,k,P,D,z){var U,K,ce,se,Ee,Pe,De,Ae,Xe,bt,Yt,Gt=ct.hasData(m)&&ct.get(m);if(!(!Gt||!(se=Gt.events))){for(k=(k||"").match(N)||[""],Ee=k.length;Ee--;){if(ce=ld.exec(k[Ee])||[],Xe=Yt=ce[1],bt=(ce[2]||"").split(".").sort(),!Xe){for(Xe in se)g.event.remove(m,Xe+k[Ee],P,D,!0);continue}for(De=g.event.special[Xe]||{},Xe=(D?De.delegateType:De.bindType)||Xe,Ae=se[Xe]||[],ce=ce[2]&&new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"),K=U=Ae.length;U--;)Pe=Ae[U],(z||Yt===Pe.origType)&&(!P||P.guid===Pe.guid)&&(!ce||ce.test(Pe.namespace))&&(!D||D===Pe.selector||D==="**"&&Pe.selector)&&(Ae.splice(U,1),Pe.selector&&Ae.delegateCount--,De.remove&&De.remove.call(m,Pe));K&&!Ae.length&&((!De.teardown||De.teardown.call(m,bt,Gt.handle)===!1)&&g.removeEvent(m,Xe,Gt.handle),delete se[Xe])}g.isEmptyObject(se)&&ct.remove(m,"handle events")}},dispatch:function(m){var k,P,D,z,U,K,ce=new Array(arguments.length),se=g.event.fix(m),Ee=(ct.get(this,"events")||Object.create(null))[se.type]||[],Pe=g.event.special[se.type]||{};for(ce[0]=se,k=1;k<arguments.length;k++)ce[k]=arguments[k];if(se.delegateTarget=this,!(Pe.preDispatch&&Pe.preDispatch.call(this,se)===!1)){for(K=g.event.handlers.call(this,se,Ee),k=0;(z=K[k++])&&!se.isPropagationStopped();)for(se.currentTarget=z.elem,P=0;(U=z.handlers[P++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||U.namespace===!1||se.rnamespace.test(U.namespace))&&(se.handleObj=U,se.data=U.data,D=((g.event.special[U.origType]||{}).handle||U.handler).apply(z.elem,ce),D!==void 0&&(se.result=D)===!1&&(se.preventDefault(),se.stopPropagation()));return Pe.postDispatch&&Pe.postDispatch.call(this,se),se.result}},handlers:function(m,k){var P,D,z,U,K,ce=[],se=k.delegateCount,Ee=m.target;if(se&&Ee.nodeType&&!(m.type==="click"&&m.button>=1)){for(;Ee!==this;Ee=Ee.parentNode||this)if(Ee.nodeType===1&&!(m.type==="click"&&Ee.disabled===!0)){for(U=[],K={},P=0;P<se;P++)D=k[P],z=D.selector+" ",K[z]===void 0&&(K[z]=D.needsContext?g(z,this).index(Ee)>-1:g.find(z,this,null,[Ee]).length),K[z]&&U.push(D);U.length&&ce.push({elem:Ee,handlers:U})}}return Ee=this,se<k.length&&ce.push({elem:Ee,handlers:k.slice(se)}),ce},addProp:function(m,k){Object.defineProperty(g.Event.prototype,m,{enumerable:!0,configurable:!0,get:b(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(P){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(m){return m[g.expando]?m:new g.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var k=this||m;return La.test(k.type)&&k.click&&B(k,"input")&&Il(k,"click",!0),!1},trigger:function(m){var k=this||m;return La.test(k.type)&&k.click&&B(k,"input")&&Il(k,"click"),!0},_default:function(m){var k=m.target;return La.test(k.type)&&k.click&&B(k,"input")&&ct.get(k,"click")||B(k,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function Il(m,k,P){if(!P){ct.get(m,k)===void 0&&g.event.add(m,k,go);return}ct.set(m,k,!1),g.event.add(m,k,{namespace:!1,handler:function(D){var z,U=ct.get(this,k);if(D.isTrigger&1&&this[k]){if(U)(g.event.special[k]||{}).delegateType&&D.stopPropagation();else if(U=s.call(arguments),ct.set(this,k,U),this[k](),z=ct.get(this,k),ct.set(this,k,!1),U!==z)return D.stopImmediatePropagation(),D.preventDefault(),z}else U&&(ct.set(this,k,g.event.trigger(U[0],U.slice(1),this)),D.stopPropagation(),D.isImmediatePropagationStopped=go)}})}g.removeEvent=function(m,k,P){m.removeEventListener&&m.removeEventListener(k,P)},g.Event=function(m,k){if(!(this instanceof g.Event))return new g.Event(m,k);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?go:Fa,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,k&&g.extend(this,k),this.timeStamp=m&&m.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Fa,isPropagationStopped:Fa,isImmediatePropagationStopped:Fa,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=go,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=go,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=go,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(m,k){function P(D){if(_.documentMode){var z=ct.get(this,"handle"),U=g.event.fix(D);U.type=D.type==="focusin"?"focus":"blur",U.isSimulated=!0,z(D),U.target===U.currentTarget&&z(U)}else g.event.simulate(k,D.target,g.event.fix(D))}g.event.special[m]={setup:function(){var D;if(Il(this,m,!0),_.documentMode)D=ct.get(this,k),D||this.addEventListener(k,P),ct.set(this,k,(D||0)+1);else return!1},trigger:function(){return Il(this,m),!0},teardown:function(){var D;if(_.documentMode)D=ct.get(this,k)-1,D?ct.set(this,k,D):(this.removeEventListener(k,P),ct.remove(this,k));else return!1},_default:function(D){return ct.get(D.target,m)},delegateType:k},g.event.special[k]={setup:function(){var D=this.ownerDocument||this.document||this,z=_.documentMode?this:D,U=ct.get(z,k);U||(_.documentMode?this.addEventListener(k,P):D.addEventListener(m,P,!0)),ct.set(z,k,(U||0)+1)},teardown:function(){var D=this.ownerDocument||this.document||this,z=_.documentMode?this:D,U=ct.get(z,k)-1;U?ct.set(z,k,U):(_.documentMode?this.removeEventListener(k,P):D.removeEventListener(m,P,!0),ct.remove(z,k))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,k){g.event.special[m]={delegateType:k,bindType:k,handle:function(P){var D,z=this,U=P.relatedTarget,K=P.handleObj;return(!U||U!==z&&!g.contains(z,U))&&(P.type=K.origType,D=K.handler.apply(this,arguments),P.type=k),D}}}),g.fn.extend({on:function(m,k,P,D){return Tl(this,m,k,P,D)},one:function(m,k,P,D){return Tl(this,m,k,P,D,1)},off:function(m,k,P){var D,z;if(m&&m.preventDefault&&m.handleObj)return D=m.handleObj,g(m.delegateTarget).off(D.namespace?D.origType+"."+D.namespace:D.origType,D.selector,D.handler),this;if(typeof m=="object"){for(z in m)this.off(z,k,m[z]);return this}return(k===!1||typeof k=="function")&&(P=k,k=void 0),P===!1&&(P=Fa),this.each(function(){g.event.remove(this,m,P,k)})}});var ng=/<script|<style|<link/i,ig=/checked\s*(?:[^=]|=\s*.checked.)/i,sg=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ud(m,k){return B(m,"table")&&B(k.nodeType!==11?k:k.firstChild,"tr")&&g(m).children("tbody")[0]||m}function og(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function ag(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function cd(m,k){var P,D,z,U,K,ce,se;if(k.nodeType===1){if(ct.hasData(m)&&(U=ct.get(m),se=U.events,se)){ct.remove(k,"handle events");for(z in se)for(P=0,D=se[z].length;P<D;P++)g.event.add(k,z,se[z][P])}It.hasData(m)&&(K=It.access(m),ce=g.extend({},K),It.set(k,ce))}}function fd(m,k){var P=k.nodeName.toLowerCase();P==="input"&&La.test(m.type)?k.checked=m.checked:(P==="input"||P==="textarea")&&(k.defaultValue=m.defaultValue)}function ja(m,k,P,D){k=o(k);var z,U,K,ce,se,Ee,Pe=0,De=m.length,Ae=De-1,Xe=k[0],bt=b(Xe);if(bt||De>1&&typeof Xe=="string"&&!w.checkClone&&ig.test(Xe))return m.each(function(Yt){var Gt=m.eq(Yt);bt&&(k[0]=Xe.call(this,Yt,Gt.html())),ja(Gt,k,P,D)});if(De&&(z=ad(k,m[0].ownerDocument,!1,m,D),U=z.firstChild,z.childNodes.length===1&&(z=U),U||D)){for(K=g.map(ai(z,"script"),og),ce=K.length;Pe<De;Pe++)se=z,Pe!==Ae&&(se=g.clone(se,!0,!0),ce&&g.merge(K,ai(se,"script"))),P.call(m[Pe],se,Pe);if(ce)for(Ee=K[K.length-1].ownerDocument,g.map(K,ag),Pe=0;Pe<ce;Pe++)se=K[Pe],od.test(se.type||"")&&!ct.access(se,"globalEval")&&g.contains(Ee,se)&&(se.src&&(se.type||"").toLowerCase()!=="module"?g._evalUrl&&!se.noModule&&g._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},Ee):x(se.textContent.replace(sg,""),se,Ee))}return m}function hd(m,k,P){for(var D,z=k?g.filter(k,m):m,U=0;(D=z[U])!=null;U++)!P&&D.nodeType===1&&g.cleanData(ai(D)),D.parentNode&&(P&&ho(D)&&Du(ai(D,"script")),D.parentNode.removeChild(D));return m}g.extend({htmlPrefilter:function(m){return m},clone:function(m,k,P){var D,z,U,K,ce=m.cloneNode(!0),se=ho(m);if(!w.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!g.isXMLDoc(m))for(K=ai(ce),U=ai(m),D=0,z=U.length;D<z;D++)fd(U[D],K[D]);if(k)if(P)for(U=U||ai(m),K=K||ai(ce),D=0,z=U.length;D<z;D++)cd(U[D],K[D]);else cd(m,ce);return K=ai(ce,"script"),K.length>0&&Du(K,!se&&ai(m,"script")),ce},cleanData:function(m){for(var k,P,D,z=g.event.special,U=0;(P=m[U])!==void 0;U++)if(dr(P)){if(k=P[ct.expando]){if(k.events)for(D in k.events)z[D]?g.event.remove(P,D):g.removeEvent(P,D,k.handle);P[ct.expando]=void 0}P[It.expando]&&(P[It.expando]=void 0)}}}),g.fn.extend({detach:function(m){return hd(this,m,!0)},remove:function(m){return hd(this,m)},text:function(m){return st(this,function(k){return k===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,m,arguments.length)},append:function(){return ja(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=ud(this,m);k.appendChild(m)}})},prepend:function(){return ja(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=ud(this,m);k.insertBefore(m,k.firstChild)}})},before:function(){return ja(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return ja(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,k=0;(m=this[k])!=null;k++)m.nodeType===1&&(g.cleanData(ai(m,!1)),m.textContent="");return this},clone:function(m,k){return m=m??!1,k=k??m,this.map(function(){return g.clone(this,m,k)})},html:function(m){return st(this,function(k){var P=this[0]||{},D=0,z=this.length;if(k===void 0&&P.nodeType===1)return P.innerHTML;if(typeof k=="string"&&!ng.test(k)&&!Mi[(lf.exec(k)||["",""])[1].toLowerCase()]){k=g.htmlPrefilter(k);try{for(;D<z;D++)P=this[D]||{},P.nodeType===1&&(g.cleanData(ai(P,!1)),P.innerHTML=k);P=0}catch{}}P&&this.empty().append(k)},null,m,arguments.length)},replaceWith:function(){var m=[];return ja(this,arguments,function(k){var P=this.parentNode;g.inArray(this,m)<0&&(g.cleanData(ai(this)),P&&P.replaceChild(k,this))},m)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,k){g.fn[m]=function(P){for(var D,z=[],U=g(P),K=U.length-1,ce=0;ce<=K;ce++)D=ce===K?this:this.clone(!0),g(U[ce])[k](D),a.apply(z,D.get());return this.pushStack(z)}});var uf=new RegExp("^("+ps+")(?!px)[a-z%]+$","i"),cf=/^--/,Bu=function(m){var k=m.ownerDocument.defaultView;return(!k||!k.opener)&&(k=r),k.getComputedStyle(m)},dd=function(m,k,P){var D,z,U={};for(z in k)U[z]=m.style[z],m.style[z]=k[z];D=P.call(m);for(z in k)m.style[z]=U[z];return D},Mu=new RegExp(Bi.join("|"),"i");(function(){function m(){if(Ee){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Yi.appendChild(se).appendChild(Ee);var Pe=r.getComputedStyle(Ee);P=Pe.top!=="1%",ce=k(Pe.marginLeft)===12,Ee.style.right="60%",U=k(Pe.right)===36,D=k(Pe.width)===36,Ee.style.position="absolute",z=k(Ee.offsetWidth/3)===12,Yi.removeChild(se),Ee=null}}function k(Pe){return Math.round(parseFloat(Pe))}var P,D,z,U,K,ce,se=_.createElement("div"),Ee=_.createElement("div");Ee.style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=Ee.style.backgroundClip==="content-box",g.extend(w,{boxSizingReliable:function(){return m(),D},pixelBoxStyles:function(){return m(),U},pixelPosition:function(){return m(),P},reliableMarginLeft:function(){return m(),ce},scrollboxSize:function(){return m(),z},reliableTrDimensions:function(){var Pe,De,Ae,Xe;return K==null&&(Pe=_.createElement("table"),De=_.createElement("tr"),Ae=_.createElement("div"),Pe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",De.style.cssText="border:1px solid",De.style.height="1px",Ae.style.height="9px",Ae.style.display="block",Yi.appendChild(Pe).appendChild(De).appendChild(Ae),Xe=r.getComputedStyle(De),K=parseInt(Xe.height,10)+parseInt(Xe.borderTopWidth,10)+parseInt(Xe.borderBottomWidth,10)===De.offsetHeight,Yi.removeChild(Pe)),K}}))})();function Ha(m,k,P){var D,z,U,K,ce=cf.test(k),se=m.style;return P=P||Bu(m),P&&(K=P.getPropertyValue(k)||P[k],ce&&K&&(K=K.replace(X,"$1")||void 0),K===""&&!ho(m)&&(K=g.style(m,k)),!w.pixelBoxStyles()&&uf.test(K)&&Mu.test(k)&&(D=se.width,z=se.minWidth,U=se.maxWidth,se.minWidth=se.maxWidth=se.width=K,K=P.width,se.width=D,se.minWidth=z,se.maxWidth=U)),K!==void 0?K+"":K}function Ms(m,k){return{get:function(){if(m()){delete this.get;return}return(this.get=k).apply(this,arguments)}}}var ff=["Webkit","Moz","ms"],ra=_.createElement("div").style,pd={};function Al(m){for(var k=m[0].toUpperCase()+m.slice(1),P=ff.length;P--;)if(m=ff[P]+k,m in ra)return m}function za(m){var k=g.cssProps[m]||pd[m];return k||(m in ra?m:pd[m]=Al(m)||m)}var vd=/^(none|table(?!-c[ea]).+)/,lg={position:"absolute",visibility:"hidden",display:"block"},Lu={letterSpacing:"0",fontWeight:"400"};function gd(m,k,P){var D=fo.exec(k);return D?Math.max(0,D[2]-(P||0))+(D[3]||"px"):k}function hf(m,k,P,D,z,U){var K=k==="width"?1:0,ce=0,se=0,Ee=0;if(P===(D?"border":"content"))return 0;for(;K<4;K+=2)P==="margin"&&(Ee+=g.css(m,P+Bi[K],!0,z)),D?(P==="content"&&(se-=g.css(m,"padding"+Bi[K],!0,z)),P!=="margin"&&(se-=g.css(m,"border"+Bi[K]+"Width",!0,z))):(se+=g.css(m,"padding"+Bi[K],!0,z),P!=="padding"?se+=g.css(m,"border"+Bi[K]+"Width",!0,z):ce+=g.css(m,"border"+Bi[K]+"Width",!0,z));return!D&&U>=0&&(se+=Math.max(0,Math.ceil(m["offset"+k[0].toUpperCase()+k.slice(1)]-U-se-ce-.5))||0),se+Ee}function Y(m,k,P){var D=Bu(m),z=!w.boxSizingReliable()||P,U=z&&g.css(m,"boxSizing",!1,D)==="border-box",K=U,ce=Ha(m,k,D),se="offset"+k[0].toUpperCase()+k.slice(1);if(uf.test(ce)){if(!P)return ce;ce="auto"}return(!w.boxSizingReliable()&&U||!w.reliableTrDimensions()&&B(m,"tr")||ce==="auto"||!parseFloat(ce)&&g.css(m,"display",!1,D)==="inline")&&m.getClientRects().length&&(U=g.css(m,"boxSizing",!1,D)==="border-box",K=se in m,K&&(ce=m[se])),ce=parseFloat(ce)||0,ce+hf(m,k,P||(U?"border":"content"),K,D,ce)+"px"}g.extend({cssHooks:{opacity:{get:function(m,k){if(k){var P=Ha(m,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(m,k,P,D){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var z,U,K,ce=Rt(k),se=cf.test(k),Ee=m.style;if(se||(k=za(ce)),K=g.cssHooks[k]||g.cssHooks[ce],P!==void 0){if(U=typeof P,U==="string"&&(z=fo.exec(P))&&z[1]&&(P=af(m,k,z),U="number"),P==null||P!==P)return;U==="number"&&!se&&(P+=z&&z[3]||(g.cssNumber[ce]?"":"px")),!w.clearCloneStyle&&P===""&&k.indexOf("background")===0&&(Ee[k]="inherit"),(!K||!("set"in K)||(P=K.set(m,P,D))!==void 0)&&(se?Ee.setProperty(k,P):Ee[k]=P)}else return K&&"get"in K&&(z=K.get(m,!1,D))!==void 0?z:Ee[k]}},css:function(m,k,P,D){var z,U,K,ce=Rt(k),se=cf.test(k);return se||(k=za(ce)),K=g.cssHooks[k]||g.cssHooks[ce],K&&"get"in K&&(z=K.get(m,!0,P)),z===void 0&&(z=Ha(m,k,D)),z==="normal"&&k in Lu&&(z=Lu[k]),P===""||P?(U=parseFloat(z),P===!0||isFinite(U)?U||0:z):z}}),g.each(["height","width"],function(m,k){g.cssHooks[k]={get:function(P,D,z){if(D)return vd.test(g.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?dd(P,lg,function(){return Y(P,k,z)}):Y(P,k,z)},set:function(P,D,z){var U,K=Bu(P),ce=!w.scrollboxSize()&&K.position==="absolute",se=ce||z,Ee=se&&g.css(P,"boxSizing",!1,K)==="border-box",Pe=z?hf(P,k,z,Ee,K):0;return Ee&&ce&&(Pe-=Math.ceil(P["offset"+k[0].toUpperCase()+k.slice(1)]-parseFloat(K[k])-hf(P,k,"border",!1,K)-.5)),Pe&&(U=fo.exec(D))&&(U[3]||"px")!=="px"&&(P.style[k]=D,D=g.css(P,k)),gd(P,D,Pe)}}}),g.cssHooks.marginLeft=Ms(w.reliableMarginLeft,function(m,k){if(k)return(parseFloat(Ha(m,"marginLeft"))||m.getBoundingClientRect().left-dd(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(m,k){g.cssHooks[m+k]={expand:function(P){for(var D=0,z={},U=typeof P=="string"?P.split(" "):[P];D<4;D++)z[m+Bi[D]+k]=U[D]||U[D-2]||U[0];return z}},m!=="margin"&&(g.cssHooks[m+k].set=gd)}),g.fn.extend({css:function(m,k){return st(this,function(P,D,z){var U,K,ce={},se=0;if(Array.isArray(D)){for(U=Bu(P),K=D.length;se<K;se++)ce[D[se]]=g.css(P,D[se],!1,U);return ce}return z!==void 0?g.style(P,D,z):g.css(P,D)},m,k,arguments.length>1)}});function ue(m,k,P,D,z){return new ue.prototype.init(m,k,P,D,z)}g.Tween=ue,ue.prototype={constructor:ue,init:function(m,k,P,D,z,U){this.elem=m,this.prop=P,this.easing=z||g.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=D,this.unit=U||(g.cssNumber[P]?"":"px")},cur:function(){var m=ue.propHooks[this.prop];return m&&m.get?m.get(this):ue.propHooks._default.get(this)},run:function(m){var k,P=ue.propHooks[this.prop];return this.options.duration?this.pos=k=g.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=k=m,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):ue.propHooks._default.set(this),this}},ue.prototype.init.prototype=ue.prototype,ue.propHooks={_default:{get:function(m){var k;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(k=g.css(m.elem,m.prop,""),!k||k==="auto"?0:k)},set:function(m){g.fx.step[m.prop]?g.fx.step[m.prop](m):m.elem.nodeType===1&&(g.cssHooks[m.prop]||m.elem.style[za(m.prop)]!=null)?g.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},ue.propHooks.scrollTop=ue.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},g.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},g.fx=ue.prototype.init,g.fx.step={};var re,$e,Se=/^(?:toggle|show|hide)$/,be=/queueHooks$/;function Le(){$e&&(_.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Le):r.setTimeout(Le,g.fx.interval),g.fx.tick())}function Ye(){return r.setTimeout(function(){re=void 0}),re=Date.now()}function Je(m,k){var P,D=0,z={height:m};for(k=k?1:0;D<4;D+=2-k)P=Bi[D],z["margin"+P]=z["padding"+P]=m;return k&&(z.opacity=z.width=m),z}function et(m,k,P){for(var D,z=(Lt.tweeners[k]||[]).concat(Lt.tweeners["*"]),U=0,K=z.length;U<K;U++)if(D=z[U].call(P,k,m))return D}function ot(m,k,P){var D,z,U,K,ce,se,Ee,Pe,De="width"in k||"height"in k,Ae=this,Xe={},bt=m.style,Yt=m.nodeType&&po(m),Gt=ct.get(m,"fxshow");P.queue||(K=g._queueHooks(m,"fx"),K.unqueued==null&&(K.unqueued=0,ce=K.empty.fire,K.empty.fire=function(){K.unqueued||ce()}),K.unqueued++,Ae.always(function(){Ae.always(function(){K.unqueued--,g.queue(m,"fx").length||K.empty.fire()})}));for(D in k)if(z=k[D],Se.test(z)){if(delete k[D],U=U||z==="toggle",z===(Yt?"hide":"show"))if(z==="show"&&Gt&&Gt[D]!==void 0)Yt=!0;else continue;Xe[D]=Gt&&Gt[D]||g.style(m,D)}if(se=!g.isEmptyObject(k),!(!se&&g.isEmptyObject(Xe))){De&&m.nodeType===1&&(P.overflow=[bt.overflow,bt.overflowX,bt.overflowY],Ee=Gt&&Gt.display,Ee==null&&(Ee=ct.get(m,"display")),Pe=g.css(m,"display"),Pe==="none"&&(Ee?Pe=Ee:(ta([m],!0),Ee=m.style.display||Ee,Pe=g.css(m,"display"),ta([m]))),(Pe==="inline"||Pe==="inline-block"&&Ee!=null)&&g.css(m,"float")==="none"&&(se||(Ae.done(function(){bt.display=Ee}),Ee==null&&(Pe=bt.display,Ee=Pe==="none"?"":Pe)),bt.display="inline-block")),P.overflow&&(bt.overflow="hidden",Ae.always(function(){bt.overflow=P.overflow[0],bt.overflowX=P.overflow[1],bt.overflowY=P.overflow[2]})),se=!1;for(D in Xe)se||(Gt?"hidden"in Gt&&(Yt=Gt.hidden):Gt=ct.access(m,"fxshow",{display:Ee}),U&&(Gt.hidden=!Yt),Yt&&ta([m],!0),Ae.done(function(){Yt||ta([m]),ct.remove(m,"fxshow");for(D in Xe)g.style(m,D,Xe[D])})),se=et(Yt?Gt[D]:0,D,Ae),D in Gt||(Gt[D]=se.start,Yt&&(se.end=se.start,se.start=0))}}function xt(m,k){var P,D,z,U,K;for(P in m)if(D=Rt(P),z=k[D],U=m[P],Array.isArray(U)&&(z=U[1],U=m[P]=U[0]),P!==D&&(m[D]=U,delete m[P]),K=g.cssHooks[D],K&&"expand"in K){U=K.expand(U),delete m[D];for(P in U)P in m||(m[P]=U[P],k[P]=z)}else k[D]=z}function Lt(m,k,P){var D,z,U=0,K=Lt.prefilters.length,ce=g.Deferred().always(function(){delete se.elem}),se=function(){if(z)return!1;for(var De=re||Ye(),Ae=Math.max(0,Ee.startTime+Ee.duration-De),Xe=Ae/Ee.duration||0,bt=1-Xe,Yt=0,Gt=Ee.tweens.length;Yt<Gt;Yt++)Ee.tweens[Yt].run(bt);return ce.notifyWith(m,[Ee,bt,Ae]),bt<1&&Gt?Ae:(Gt||ce.notifyWith(m,[Ee,1,0]),ce.resolveWith(m,[Ee]),!1)},Ee=ce.promise({elem:m,props:g.extend({},k),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},P),originalProperties:k,originalOptions:P,startTime:re||Ye(),duration:P.duration,tweens:[],createTween:function(De,Ae){var Xe=g.Tween(m,Ee.opts,De,Ae,Ee.opts.specialEasing[De]||Ee.opts.easing);return Ee.tweens.push(Xe),Xe},stop:function(De){var Ae=0,Xe=De?Ee.tweens.length:0;if(z)return this;for(z=!0;Ae<Xe;Ae++)Ee.tweens[Ae].run(1);return De?(ce.notifyWith(m,[Ee,1,0]),ce.resolveWith(m,[Ee,De])):ce.rejectWith(m,[Ee,De]),this}}),Pe=Ee.props;for(xt(Pe,Ee.opts.specialEasing);U<K;U++)if(D=Lt.prefilters[U].call(Ee,m,Pe,Ee.opts),D)return b(D.stop)&&(g._queueHooks(Ee.elem,Ee.opts.queue).stop=D.stop.bind(D)),D;return g.map(Pe,et,Ee),b(Ee.opts.start)&&Ee.opts.start.call(m,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),g.fx.timer(g.extend(se,{elem:m,anim:Ee,queue:Ee.opts.queue})),Ee}g.Animation=g.extend(Lt,{tweeners:{"*":[function(m,k){var P=this.createTween(m,k);return af(P.elem,m,fo.exec(k),P),P}]},tweener:function(m,k){b(m)?(k=m,m=["*"]):m=m.match(N);for(var P,D=0,z=m.length;D<z;D++)P=m[D],Lt.tweeners[P]=Lt.tweeners[P]||[],Lt.tweeners[P].unshift(k)},prefilters:[ot],prefilter:function(m,k){k?Lt.prefilters.unshift(m):Lt.prefilters.push(m)}}),g.speed=function(m,k,P){var D=m&&typeof m=="object"?g.extend({},m):{complete:P||!P&&k||b(m)&&m,duration:m,easing:P&&k||k&&!b(k)&&k};return g.fx.off?D.duration=0:typeof D.duration!="number"&&(D.duration in g.fx.speeds?D.duration=g.fx.speeds[D.duration]:D.duration=g.fx.speeds._default),(D.queue==null||D.queue===!0)&&(D.queue="fx"),D.old=D.complete,D.complete=function(){b(D.old)&&D.old.call(this),D.queue&&g.dequeue(this,D.queue)},D},g.fn.extend({fadeTo:function(m,k,P,D){return this.filter(po).css("opacity",0).show().end().animate({opacity:k},m,P,D)},animate:function(m,k,P,D){var z=g.isEmptyObject(m),U=g.speed(k,P,D),K=function(){var ce=Lt(this,g.extend({},m),U);(z||ct.get(this,"finish"))&&ce.stop(!0)};return K.finish=K,z||U.queue===!1?this.each(K):this.queue(U.queue,K)},stop:function(m,k,P){var D=function(z){var U=z.stop;delete z.stop,U(P)};return typeof m!="string"&&(P=k,k=m,m=void 0),k&&this.queue(m||"fx",[]),this.each(function(){var z=!0,U=m!=null&&m+"queueHooks",K=g.timers,ce=ct.get(this);if(U)ce[U]&&ce[U].stop&&D(ce[U]);else for(U in ce)ce[U]&&ce[U].stop&&be.test(U)&&D(ce[U]);for(U=K.length;U--;)K[U].elem===this&&(m==null||K[U].queue===m)&&(K[U].anim.stop(P),z=!1,K.splice(U,1));(z||!P)&&g.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var k,P=ct.get(this),D=P[m+"queue"],z=P[m+"queueHooks"],U=g.timers,K=D?D.length:0;for(P.finish=!0,g.queue(this,m,[]),z&&z.stop&&z.stop.call(this,!0),k=U.length;k--;)U[k].elem===this&&U[k].queue===m&&(U[k].anim.stop(!0),U.splice(k,1));for(k=0;k<K;k++)D[k]&&D[k].finish&&D[k].finish.call(this);delete P.finish})}}),g.each(["toggle","show","hide"],function(m,k){var P=g.fn[k];g.fn[k]=function(D,z,U){return D==null||typeof D=="boolean"?P.apply(this,arguments):this.animate(Je(k,!0),D,z,U)}}),g.each({slideDown:Je("show"),slideUp:Je("hide"),slideToggle:Je("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,k){g.fn[m]=function(P,D,z){return this.animate(k,P,D,z)}}),g.timers=[],g.fx.tick=function(){var m,k=0,P=g.timers;for(re=Date.now();k<P.length;k++)m=P[k],!m()&&P[k]===m&&P.splice(k--,1);P.length||g.fx.stop(),re=void 0},g.fx.timer=function(m){g.timers.push(m),g.fx.start()},g.fx.interval=13,g.fx.start=function(){$e||($e=!0,Le())},g.fx.stop=function(){$e=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(m,k){return m=g.fx&&g.fx.speeds[m]||m,k=k||"fx",this.queue(k,function(P,D){var z=r.setTimeout(P,m);D.stop=function(){r.clearTimeout(z)}})},function(){var m=_.createElement("input"),k=_.createElement("select"),P=k.appendChild(_.createElement("option"));m.type="checkbox",w.checkOn=m.value!=="",w.optSelected=P.selected,m=_.createElement("input"),m.value="t",m.type="radio",w.radioValue=m.value==="t"}();var mr,lr=g.expr.attrHandle;g.fn.extend({attr:function(m,k){return st(this,g.attr,m,k,arguments.length>1)},removeAttr:function(m){return this.each(function(){g.removeAttr(this,m)})}}),g.extend({attr:function(m,k,P){var D,z,U=m.nodeType;if(!(U===3||U===8||U===2)){if(typeof m.getAttribute>"u")return g.prop(m,k,P);if((U!==1||!g.isXMLDoc(m))&&(z=g.attrHooks[k.toLowerCase()]||(g.expr.match.bool.test(k)?mr:void 0)),P!==void 0){if(P===null){g.removeAttr(m,k);return}return z&&"set"in z&&(D=z.set(m,P,k))!==void 0?D:(m.setAttribute(k,P+""),P)}return z&&"get"in z&&(D=z.get(m,k))!==null?D:(D=g.find.attr(m,k),D??void 0)}},attrHooks:{type:{set:function(m,k){if(!w.radioValue&&k==="radio"&&B(m,"input")){var P=m.value;return m.setAttribute("type",k),P&&(m.value=P),k}}}},removeAttr:function(m,k){var P,D=0,z=k&&k.match(N);if(z&&m.nodeType===1)for(;P=z[D++];)m.removeAttribute(P)}}),mr={set:function(m,k,P){return k===!1?g.removeAttr(m,P):m.setAttribute(P,P),P}},g.each(g.expr.match.bool.source.match(/\w+/g),function(m,k){var P=lr[k]||g.find.attr;lr[k]=function(D,z,U){var K,ce,se=z.toLowerCase();return U||(ce=lr[se],lr[se]=K,K=P(D,z,U)!=null?se:null,lr[se]=ce),K}});var Yr=/^(?:input|select|textarea|button)$/i,Cr=/^(?:a|area)$/i;g.fn.extend({prop:function(m,k){return st(this,g.prop,m,k,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[g.propFix[m]||m]})}}),g.extend({prop:function(m,k,P){var D,z,U=m.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!g.isXMLDoc(m))&&(k=g.propFix[k]||k,z=g.propHooks[k]),P!==void 0?z&&"set"in z&&(D=z.set(m,P,k))!==void 0?D:m[k]=P:z&&"get"in z&&(D=z.get(m,k))!==null?D:m[k]},propHooks:{tabIndex:{get:function(m){var k=g.find.attr(m,"tabindex");return k?parseInt(k,10):Yr.test(m.nodeName)||Cr.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(g.propHooks.selected={get:function(m){var k=m.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(m){var k=m.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function cn(m){var k=m.match(N)||[];return k.join(" ")}function Li(m){return m.getAttribute&&m.getAttribute("class")||""}function Ol(m){return Array.isArray(m)?m:typeof m=="string"?m.match(N)||[]:[]}g.fn.extend({addClass:function(m){var k,P,D,z,U,K;return b(m)?this.each(function(ce){g(this).addClass(m.call(this,ce,Li(this)))}):(k=Ol(m),k.length?this.each(function(){if(D=Li(this),P=this.nodeType===1&&" "+cn(D)+" ",P){for(U=0;U<k.length;U++)z=k[U],P.indexOf(" "+z+" ")<0&&(P+=z+" ");K=cn(P),D!==K&&this.setAttribute("class",K)}}):this)},removeClass:function(m){var k,P,D,z,U,K;return b(m)?this.each(function(ce){g(this).removeClass(m.call(this,ce,Li(this)))}):arguments.length?(k=Ol(m),k.length?this.each(function(){if(D=Li(this),P=this.nodeType===1&&" "+cn(D)+" ",P){for(U=0;U<k.length;U++)for(z=k[U];P.indexOf(" "+z+" ")>-1;)P=P.replace(" "+z+" "," ");K=cn(P),D!==K&&this.setAttribute("class",K)}}):this):this.attr("class","")},toggleClass:function(m,k){var P,D,z,U,K=typeof m,ce=K==="string"||Array.isArray(m);return b(m)?this.each(function(se){g(this).toggleClass(m.call(this,se,Li(this),k),k)}):typeof k=="boolean"&&ce?k?this.addClass(m):this.removeClass(m):(P=Ol(m),this.each(function(){if(ce)for(U=g(this),z=0;z<P.length;z++)D=P[z],U.hasClass(D)?U.removeClass(D):U.addClass(D);else(m===void 0||K==="boolean")&&(D=Li(this),D&&ct.set(this,"__className__",D),this.setAttribute&&this.setAttribute("class",D||m===!1?"":ct.get(this,"__className__")||""))}))},hasClass:function(m){var k,P,D=0;for(k=" "+m+" ";P=this[D++];)if(P.nodeType===1&&(" "+cn(Li(P))+" ").indexOf(k)>-1)return!0;return!1}});var yd=/\r/g;g.fn.extend({val:function(m){var k,P,D,z=this[0];return arguments.length?(D=b(m),this.each(function(U){var K;this.nodeType===1&&(D?K=m.call(this,U,g(this).val()):K=m,K==null?K="":typeof K=="number"?K+="":Array.isArray(K)&&(K=g.map(K,function(ce){return ce==null?"":ce+""})),k=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,K,"value")===void 0)&&(this.value=K))})):z?(k=g.valHooks[z.type]||g.valHooks[z.nodeName.toLowerCase()],k&&"get"in k&&(P=k.get(z,"value"))!==void 0?P:(P=z.value,typeof P=="string"?P.replace(yd,""):P??"")):void 0}}),g.extend({valHooks:{option:{get:function(m){var k=g.find.attr(m,"value");return k??cn(g.text(m))}},select:{get:function(m){var k,P,D,z=m.options,U=m.selectedIndex,K=m.type==="select-one",ce=K?null:[],se=K?U+1:z.length;for(U<0?D=se:D=K?U:0;D<se;D++)if(P=z[D],(P.selected||D===U)&&!P.disabled&&(!P.parentNode.disabled||!B(P.parentNode,"optgroup"))){if(k=g(P).val(),K)return k;ce.push(k)}return ce},set:function(m,k){for(var P,D,z=m.options,U=g.makeArray(k),K=z.length;K--;)D=z[K],(D.selected=g.inArray(g.valHooks.option.get(D),U)>-1)&&(P=!0);return P||(m.selectedIndex=-1),U}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(m,k){if(Array.isArray(k))return m.checked=g.inArray(g(m).val(),k)>-1}},w.checkOn||(g.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})});var yo=r.location,md={guid:Date.now()},Fu=/\?/;g.parseXML=function(m){var k,P;if(!m||typeof m!="string")return null;try{k=new r.DOMParser().parseFromString(m,"text/xml")}catch{}return P=k&&k.getElementsByTagName("parsererror")[0],(!k||P)&&g.error("Invalid XML: "+(P?g.map(P.childNodes,function(D){return D.textContent}).join(`
`):m)),k};var bd=/^(?:focusinfocus|focusoutblur)$/,df=function(m){m.stopPropagation()};g.extend(g.event,{trigger:function(m,k,P,D){var z,U,K,ce,se,Ee,Pe,De,Ae=[P||_],Xe=c.call(m,"type")?m.type:m,bt=c.call(m,"namespace")?m.namespace.split("."):[];if(U=De=K=P=P||_,!(P.nodeType===3||P.nodeType===8)&&!bd.test(Xe+g.event.triggered)&&(Xe.indexOf(".")>-1&&(bt=Xe.split("."),Xe=bt.shift(),bt.sort()),se=Xe.indexOf(":")<0&&"on"+Xe,m=m[g.expando]?m:new g.Event(Xe,typeof m=="object"&&m),m.isTrigger=D?2:3,m.namespace=bt.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=P),k=k==null?[m]:g.makeArray(k,[m]),Pe=g.event.special[Xe]||{},!(!D&&Pe.trigger&&Pe.trigger.apply(P,k)===!1))){if(!D&&!Pe.noBubble&&!T(P)){for(ce=Pe.delegateType||Xe,bd.test(ce+Xe)||(U=U.parentNode);U;U=U.parentNode)Ae.push(U),K=U;K===(P.ownerDocument||_)&&Ae.push(K.defaultView||K.parentWindow||r)}for(z=0;(U=Ae[z++])&&!m.isPropagationStopped();)De=U,m.type=z>1?ce:Pe.bindType||Xe,Ee=(ct.get(U,"events")||Object.create(null))[m.type]&&ct.get(U,"handle"),Ee&&Ee.apply(U,k),Ee=se&&U[se],Ee&&Ee.apply&&dr(U)&&(m.result=Ee.apply(U,k),m.result===!1&&m.preventDefault());return m.type=Xe,!D&&!m.isDefaultPrevented()&&(!Pe._default||Pe._default.apply(Ae.pop(),k)===!1)&&dr(P)&&se&&b(P[Xe])&&!T(P)&&(K=P[se],K&&(P[se]=null),g.event.triggered=Xe,m.isPropagationStopped()&&De.addEventListener(Xe,df),P[Xe](),m.isPropagationStopped()&&De.removeEventListener(Xe,df),g.event.triggered=void 0,K&&(P[se]=K)),m.result}},simulate:function(m,k,P){var D=g.extend(new g.Event,P,{type:m,isSimulated:!0});g.event.trigger(D,null,k)}}),g.fn.extend({trigger:function(m,k){return this.each(function(){g.event.trigger(m,k,this)})},triggerHandler:function(m,k){var P=this[0];if(P)return g.event.trigger(m,k,P,!0)}});var i2=/\[\]$/,ug=/\r?\n/g,s2=/^(?:submit|button|image|reset|file)$/i,o2=/^(?:input|select|textarea|keygen)/i;function cg(m,k,P,D){var z;if(Array.isArray(k))g.each(k,function(U,K){P||i2.test(m)?D(m,K):cg(m+"["+(typeof K=="object"&&K!=null?U:"")+"]",K,P,D)});else if(!P&&I(k)==="object")for(z in k)cg(m+"["+z+"]",k[z],P,D);else D(m,k)}g.param=function(m,k){var P,D=[],z=function(U,K){var ce=b(K)?K():K;D[D.length]=encodeURIComponent(U)+"="+encodeURIComponent(ce??"")};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!g.isPlainObject(m))g.each(m,function(){z(this.name,this.value)});else for(P in m)cg(P,m[P],k,z);return D.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=g.prop(this,"elements");return m?g.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!g(this).is(":disabled")&&o2.test(this.nodeName)&&!s2.test(m)&&(this.checked||!La.test(m))}).map(function(m,k){var P=g(this).val();return P==null?null:Array.isArray(P)?g.map(P,function(D){return{name:k.name,value:D.replace(ug,`\r
`)}}):{name:k.name,value:P.replace(ug,`\r
`)}}).get()}});var a2=/%20/g,fg=/#.*$/,l2=/([?&])_=[^&]*/,u2=/^(.*?):[ \t]*([^\r\n]*)$/mg,c2=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,f2=/^(?:GET|HEAD)$/,h2=/^\/\//,Hr={},Pr={},qb="*/".concat("*"),hg=_.createElement("a");hg.href=yo.href;function Kb(m){return function(k,P){typeof k!="string"&&(P=k,k="*");var D,z=0,U=k.toLowerCase().match(N)||[];if(b(P))for(;D=U[z++];)D[0]==="+"?(D=D.slice(1)||"*",(m[D]=m[D]||[]).unshift(P)):(m[D]=m[D]||[]).push(P)}}function Vb(m,k,P,D){var z={},U=m===Pr;function K(ce){var se;return z[ce]=!0,g.each(m[ce]||[],function(Ee,Pe){var De=Pe(k,P,D);if(typeof De=="string"&&!U&&!z[De])return k.dataTypes.unshift(De),K(De),!1;if(U)return!(se=De)}),se}return K(k.dataTypes[0])||!z["*"]&&K("*")}function dg(m,k){var P,D,z=g.ajaxSettings.flatOptions||{};for(P in k)k[P]!==void 0&&((z[P]?m:D||(D={}))[P]=k[P]);return D&&g.extend(!0,m,D),m}function d2(m,k,P){for(var D,z,U,K,ce=m.contents,se=m.dataTypes;se[0]==="*";)se.shift(),D===void 0&&(D=m.mimeType||k.getResponseHeader("Content-Type"));if(D){for(z in ce)if(ce[z]&&ce[z].test(D)){se.unshift(z);break}}if(se[0]in P)U=se[0];else{for(z in P){if(!se[0]||m.converters[z+" "+se[0]]){U=z;break}K||(K=z)}U=U||K}if(U)return U!==se[0]&&se.unshift(U),P[U]}function Gb(m,k,P,D){var z,U,K,ce,se,Ee={},Pe=m.dataTypes.slice();if(Pe[1])for(K in m.converters)Ee[K.toLowerCase()]=m.converters[K];for(U=Pe.shift();U;)if(m.responseFields[U]&&(P[m.responseFields[U]]=k),!se&&D&&m.dataFilter&&(k=m.dataFilter(k,m.dataType)),se=U,U=Pe.shift(),U){if(U==="*")U=se;else if(se!=="*"&&se!==U){if(K=Ee[se+" "+U]||Ee["* "+U],!K){for(z in Ee)if(ce=z.split(" "),ce[1]===U&&(K=Ee[se+" "+ce[0]]||Ee["* "+ce[0]],K)){K===!0?K=Ee[z]:Ee[z]!==!0&&(U=ce[0],Pe.unshift(ce[1]));break}}if(K!==!0)if(K&&m.throws)k=K(k);else try{k=K(k)}catch(De){return{state:"parsererror",error:K?De:"No conversion from "+se+" to "+U}}}}return{state:"success",data:k}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yo.href,type:"GET",isLocal:c2.test(yo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,k){return k?dg(dg(m,g.ajaxSettings),k):dg(g.ajaxSettings,m)},ajaxPrefilter:Kb(Hr),ajaxTransport:Kb(Pr),ajax:function(m,k){typeof m=="object"&&(k=m,m=void 0),k=k||{};var P,D,z,U,K,ce,se,Ee,Pe,De,Ae=g.ajaxSetup({},k),Xe=Ae.context||Ae,bt=Ae.context&&(Xe.nodeType||Xe.jquery)?g(Xe):g.event,Yt=g.Deferred(),Gt=g.Callbacks("once memory"),Zn=Ae.statusCode||{},hn={},mo={},bo="canceled",pr={readyState:0,getResponseHeader:function(vr){var Mr;if(se){if(!U)for(U={};Mr=u2.exec(z);)U[Mr[1].toLowerCase()+" "]=(U[Mr[1].toLowerCase()+" "]||[]).concat(Mr[2]);Mr=U[vr.toLowerCase()+" "]}return Mr==null?null:Mr.join(", ")},getAllResponseHeaders:function(){return se?z:null},setRequestHeader:function(vr,Mr){return se==null&&(vr=mo[vr.toLowerCase()]=mo[vr.toLowerCase()]||vr,hn[vr]=Mr),this},overrideMimeType:function(vr){return se==null&&(Ae.mimeType=vr),this},statusCode:function(vr){var Mr;if(vr)if(se)pr.always(vr[pr.status]);else for(Mr in vr)Zn[Mr]=[Zn[Mr],vr[Mr]];return this},abort:function(vr){var Mr=vr||bo;return P&&P.abort(Mr),Ua(0,Mr),this}};if(Yt.promise(pr),Ae.url=((m||Ae.url||yo.href)+"").replace(h2,yo.protocol+"//"),Ae.type=k.method||k.type||Ae.method||Ae.type,Ae.dataTypes=(Ae.dataType||"*").toLowerCase().match(N)||[""],Ae.crossDomain==null){ce=_.createElement("a");try{ce.href=Ae.url,ce.href=ce.href,Ae.crossDomain=hg.protocol+"//"+hg.host!=ce.protocol+"//"+ce.host}catch{Ae.crossDomain=!0}}if(Ae.data&&Ae.processData&&typeof Ae.data!="string"&&(Ae.data=g.param(Ae.data,Ae.traditional)),Vb(Hr,Ae,k,pr),se)return pr;Ee=g.event&&Ae.global,Ee&&g.active++===0&&g.event.trigger("ajaxStart"),Ae.type=Ae.type.toUpperCase(),Ae.hasContent=!f2.test(Ae.type),D=Ae.url.replace(fg,""),Ae.hasContent?Ae.data&&Ae.processData&&(Ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ae.data=Ae.data.replace(a2,"+")):(De=Ae.url.slice(D.length),Ae.data&&(Ae.processData||typeof Ae.data=="string")&&(D+=(Fu.test(D)?"&":"?")+Ae.data,delete Ae.data),Ae.cache===!1&&(D=D.replace(l2,"$1"),De=(Fu.test(D)?"&":"?")+"_="+md.guid+++De),Ae.url=D+De),Ae.ifModified&&(g.lastModified[D]&&pr.setRequestHeader("If-Modified-Since",g.lastModified[D]),g.etag[D]&&pr.setRequestHeader("If-None-Match",g.etag[D])),(Ae.data&&Ae.hasContent&&Ae.contentType!==!1||k.contentType)&&pr.setRequestHeader("Content-Type",Ae.contentType),pr.setRequestHeader("Accept",Ae.dataTypes[0]&&Ae.accepts[Ae.dataTypes[0]]?Ae.accepts[Ae.dataTypes[0]]+(Ae.dataTypes[0]!=="*"?", "+qb+"; q=0.01":""):Ae.accepts["*"]);for(Pe in Ae.headers)pr.setRequestHeader(Pe,Ae.headers[Pe]);if(Ae.beforeSend&&(Ae.beforeSend.call(Xe,pr,Ae)===!1||se))return pr.abort();if(bo="abort",Gt.add(Ae.complete),pr.done(Ae.success),pr.fail(Ae.error),P=Vb(Pr,Ae,k,pr),!P)Ua(-1,"No Transport");else{if(pr.readyState=1,Ee&&bt.trigger("ajaxSend",[pr,Ae]),se)return pr;Ae.async&&Ae.timeout>0&&(K=r.setTimeout(function(){pr.abort("timeout")},Ae.timeout));try{se=!1,P.send(hn,Ua)}catch(vr){if(se)throw vr;Ua(-1,vr)}}function Ua(vr,Mr,pf,$d){var Ls,Cl,gs,ia,Wa,Fi=Mr;se||(se=!0,K&&r.clearTimeout(K),P=void 0,z=$d||"",pr.readyState=vr>0?4:0,Ls=vr>=200&&vr<300||vr===304,pf&&(ia=d2(Ae,pr,pf)),!Ls&&g.inArray("script",Ae.dataTypes)>-1&&g.inArray("json",Ae.dataTypes)<0&&(Ae.converters["text script"]=function(){}),ia=Gb(Ae,ia,pr,Ls),Ls?(Ae.ifModified&&(Wa=pr.getResponseHeader("Last-Modified"),Wa&&(g.lastModified[D]=Wa),Wa=pr.getResponseHeader("etag"),Wa&&(g.etag[D]=Wa)),vr===204||Ae.type==="HEAD"?Fi="nocontent":vr===304?Fi="notmodified":(Fi=ia.state,Cl=ia.data,gs=ia.error,Ls=!gs)):(gs=Fi,(vr||!Fi)&&(Fi="error",vr<0&&(vr=0))),pr.status=vr,pr.statusText=(Mr||Fi)+"",Ls?Yt.resolveWith(Xe,[Cl,Fi,pr]):Yt.rejectWith(Xe,[pr,Fi,gs]),pr.statusCode(Zn),Zn=void 0,Ee&&bt.trigger(Ls?"ajaxSuccess":"ajaxError",[pr,Ae,Ls?Cl:gs]),Gt.fireWith(Xe,[pr,Fi]),Ee&&(bt.trigger("ajaxComplete",[pr,Ae]),--g.active||g.event.trigger("ajaxStop")))}return pr},getJSON:function(m,k,P){return g.get(m,k,P,"json")},getScript:function(m,k){return g.get(m,void 0,k,"script")}}),g.each(["get","post"],function(m,k){g[k]=function(P,D,z,U){return b(D)&&(U=U||z,z=D,D=void 0),g.ajax(g.extend({url:P,type:k,dataType:U,data:D,success:z},g.isPlainObject(P)&&P))}}),g.ajaxPrefilter(function(m){var k;for(k in m.headers)k.toLowerCase()==="content-type"&&(m.contentType=m.headers[k]||"")}),g._evalUrl=function(m,k,P){return g.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(D){g.globalEval(D,k,P)}})},g.fn.extend({wrapAll:function(m){var k;return this[0]&&(b(m)&&(m=m.call(this[0])),k=g(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(m){return b(m)?this.each(function(k){g(this).wrapInner(m.call(this,k))}):this.each(function(){var k=g(this),P=k.contents();P.length?P.wrapAll(m):k.append(m)})},wrap:function(m){var k=b(m);return this.each(function(P){g(this).wrapAll(k?m.call(this,P):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(m){return!g.expr.pseudos.visible(m)},g.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var p2={0:200,1223:204},fn=g.ajaxSettings.xhr();w.cors=!!fn&&"withCredentials"in fn,w.ajax=fn=!!fn,g.ajaxTransport(function(m){var k,P;if(w.cors||fn&&!m.crossDomain)return{send:function(D,z){var U,K=m.xhr();if(K.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(U in m.xhrFields)K[U]=m.xhrFields[U];m.mimeType&&K.overrideMimeType&&K.overrideMimeType(m.mimeType),!m.crossDomain&&!D["X-Requested-With"]&&(D["X-Requested-With"]="XMLHttpRequest");for(U in D)K.setRequestHeader(U,D[U]);k=function(ce){return function(){k&&(k=P=K.onload=K.onerror=K.onabort=K.ontimeout=K.onreadystatechange=null,ce==="abort"?K.abort():ce==="error"?typeof K.status!="number"?z(0,"error"):z(K.status,K.statusText):z(p2[K.status]||K.status,K.statusText,(K.responseType||"text")!=="text"||typeof K.responseText!="string"?{binary:K.response}:{text:K.responseText},K.getAllResponseHeaders()))}},K.onload=k(),P=K.onerror=K.ontimeout=k("error"),K.onabort!==void 0?K.onabort=P:K.onreadystatechange=function(){K.readyState===4&&r.setTimeout(function(){k&&P()})},k=k("abort");try{K.send(m.hasContent&&m.data||null)}catch(ce){if(k)throw ce}},abort:function(){k&&k()}}}),g.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return g.globalEval(m),m}}}),g.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),g.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var k,P;return{send:function(D,z){k=g("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",P=function(U){k.remove(),P=null,U&&z(U.type==="error"?404:200,U.type)}),_.head.appendChild(k[0])},abort:function(){P&&P()}}}});var wd=[],na=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=wd.pop()||g.expando+"_"+md.guid++;return this[m]=!0,m}}),g.ajaxPrefilter("json jsonp",function(m,k,P){var D,z,U,K=m.jsonp!==!1&&(na.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&na.test(m.data)&&"data");if(K||m.dataTypes[0]==="jsonp")return D=m.jsonpCallback=b(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,K?m[K]=m[K].replace(na,"$1"+D):m.jsonp!==!1&&(m.url+=(Fu.test(m.url)?"&":"?")+m.jsonp+"="+D),m.converters["script json"]=function(){return U||g.error(D+" was not called"),U[0]},m.dataTypes[0]="json",z=r[D],r[D]=function(){U=arguments},P.always(function(){z===void 0?g(r).removeProp(D):r[D]=z,m[D]&&(m.jsonpCallback=k.jsonpCallback,wd.push(D)),U&&b(z)&&z(U[0]),U=z=void 0}),"script"}),w.createHTMLDocument=function(){var m=_.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),g.parseHTML=function(m,k,P){if(typeof m!="string")return[];typeof k=="boolean"&&(P=k,k=!1);var D,z,U;return k||(w.createHTMLDocument?(k=_.implementation.createHTMLDocument(""),D=k.createElement("base"),D.href=_.location.href,k.head.appendChild(D)):k=_),z=Ge.exec(m),U=!P&&[],z?[k.createElement(z[1])]:(z=ad([m],k,U),U&&U.length&&g(U).remove(),g.merge([],z.childNodes))},g.fn.load=function(m,k,P){var D,z,U,K=this,ce=m.indexOf(" ");return ce>-1&&(D=cn(m.slice(ce)),m=m.slice(0,ce)),b(k)?(P=k,k=void 0):k&&typeof k=="object"&&(z="POST"),K.length>0&&g.ajax({url:m,type:z||"GET",dataType:"html",data:k}).done(function(se){U=arguments,K.html(D?g("<div>").append(g.parseHTML(se)).find(D):se)}).always(P&&function(se,Ee){K.each(function(){P.apply(this,U||[se.responseText,Ee,se])})}),this},g.expr.pseudos.animated=function(m){return g.grep(g.timers,function(k){return m===k.elem}).length},g.offset={setOffset:function(m,k,P){var D,z,U,K,ce,se,Ee,Pe=g.css(m,"position"),De=g(m),Ae={};Pe==="static"&&(m.style.position="relative"),ce=De.offset(),U=g.css(m,"top"),se=g.css(m,"left"),Ee=(Pe==="absolute"||Pe==="fixed")&&(U+se).indexOf("auto")>-1,Ee?(D=De.position(),K=D.top,z=D.left):(K=parseFloat(U)||0,z=parseFloat(se)||0),b(k)&&(k=k.call(m,P,g.extend({},ce))),k.top!=null&&(Ae.top=k.top-ce.top+K),k.left!=null&&(Ae.left=k.left-ce.left+z),"using"in k?k.using.call(m,Ae):De.css(Ae)}},g.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(z){g.offset.setOffset(this,m,z)});var k,P,D=this[0];if(D)return D.getClientRects().length?(k=D.getBoundingClientRect(),P=D.ownerDocument.defaultView,{top:k.top+P.pageYOffset,left:k.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var m,k,P,D=this[0],z={top:0,left:0};if(g.css(D,"position")==="fixed")k=D.getBoundingClientRect();else{for(k=this.offset(),P=D.ownerDocument,m=D.offsetParent||P.documentElement;m&&(m===P.body||m===P.documentElement)&&g.css(m,"position")==="static";)m=m.parentNode;m&&m!==D&&m.nodeType===1&&(z=g(m).offset(),z.top+=g.css(m,"borderTopWidth",!0),z.left+=g.css(m,"borderLeftWidth",!0))}return{top:k.top-z.top-g.css(D,"marginTop",!0),left:k.left-z.left-g.css(D,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&g.css(m,"position")==="static";)m=m.offsetParent;return m||Yi})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,k){var P=k==="pageYOffset";g.fn[m]=function(D){return st(this,function(z,U,K){var ce;if(T(z)?ce=z:z.nodeType===9&&(ce=z.defaultView),K===void 0)return ce?ce[k]:z[U];ce?ce.scrollTo(P?ce.pageXOffset:K,P?K:ce.pageYOffset):z[U]=K},m,D,arguments.length)}}),g.each(["top","left"],function(m,k){g.cssHooks[k]=Ms(w.pixelPosition,function(P,D){if(D)return D=Ha(P,k),uf.test(D)?g(P).position()[k]+"px":D})}),g.each({Height:"height",Width:"width"},function(m,k){g.each({padding:"inner"+m,content:k,"":"outer"+m},function(P,D){g.fn[D]=function(z,U){var K=arguments.length&&(P||typeof z!="boolean"),ce=P||(z===!0||U===!0?"margin":"border");return st(this,function(se,Ee,Pe){var De;return T(se)?D.indexOf("outer")===0?se["inner"+m]:se.document.documentElement["client"+m]:se.nodeType===9?(De=se.documentElement,Math.max(se.body["scroll"+m],De["scroll"+m],se.body["offset"+m],De["offset"+m],De["client"+m])):Pe===void 0?g.css(se,Ee,ce):g.style(se,Ee,Pe,ce)},k,K?z:void 0,K)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,k){g.fn[k]=function(P){return this.on(k,P)}}),g.fn.extend({bind:function(m,k,P){return this.on(m,null,k,P)},unbind:function(m,k){return this.off(m,null,k)},delegate:function(m,k,P,D){return this.on(k,m,P,D)},undelegate:function(m,k,P){return arguments.length===1?this.off(m,"**"):this.off(k,m||"**",P)},hover:function(m,k){return this.mouseenter(m).mouseleave(k||m)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,k){g.fn[k]=function(P,D){return arguments.length>0?this.on(k,null,P,D):this.trigger(k)}});var Yb=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(m,k){var P,D,z;if(typeof k=="string"&&(P=m[k],k=m,m=P),!!b(m))return D=s.call(arguments,2),z=function(){return m.apply(k||this,D.concat(s.call(arguments)))},z.guid=m.guid=m.guid||g.guid++,z},g.holdReady=function(m){m?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=B,g.isFunction=b,g.isWindow=T,g.camelCase=Rt,g.type=I,g.now=Date.now,g.isNumeric=function(m){var k=g.type(m);return(k==="number"||k==="string")&&!isNaN(m-parseFloat(m))},g.trim=function(m){return m==null?"":(m+"").replace(Yb,"$1")};var pg=r.jQuery,vs=r.$;return g.noConflict=function(m){return r.$===g&&(r.$=vs),m&&r.jQuery===g&&(r.jQuery=pg),g},typeof t>"u"&&(r.jQuery=r.$=g),g})})(hW);var ive=hW.exports;const Qt=io(ive);function sve(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Am=sve,ove=typeof Cn=="object"&&Cn&&Cn.Object===Object&&Cn,dW=ove,ave=dW,lve=typeof self=="object"&&self&&self.Object===Object&&self,uve=ave||lve||Function("return this")(),_l=uve,cve=_l,fve=function(){return cve.Date.now()},hve=fve,dve=/\s/;function pve(e){for(var r=e.length;r--&&dve.test(e.charAt(r)););return r}var vve=pve,gve=vve,yve=/^\s+/;function mve(e){return e&&e.slice(0,gve(e)+1).replace(yve,"")}var bve=mve,wve=_l,$ve=wve.Symbol,oP=$ve,CB=oP,pW=Object.prototype,_ve=pW.hasOwnProperty,xve=pW.toString,Bg=CB?CB.toStringTag:void 0;function Eve(e){var r=_ve.call(e,Bg),t=e[Bg];try{e[Bg]=void 0;var n=!0}catch{}var i=xve.call(e);return n&&(r?e[Bg]=t:delete e[Bg]),i}var Sve=Eve,kve=Object.prototype,Tve=kve.toString;function Ive(e){return Tve.call(e)}var Ave=Ive,PB=oP,Ove=Sve,Cve=Ave,Pve="[object Null]",Nve="[object Undefined]",NB=PB?PB.toStringTag:void 0;function Rve(e){return e==null?e===void 0?Nve:Pve:NB&&NB in Object(e)?Ove(e):Cve(e)}var Om=Rve;function Dve(e){return e!=null&&typeof e=="object"}var Cm=Dve,Bve=Om,Mve=Cm,Lve="[object Symbol]";function Fve(e){return typeof e=="symbol"||Mve(e)&&Bve(e)==Lve}var jve=Fve,Hve=bve,RB=Am,zve=jve,DB=0/0,Uve=/^[-+]0x[0-9a-f]+$/i,Wve=/^0b[01]+$/i,qve=/^0o[0-7]+$/i,Kve=parseInt;function Vve(e){if(typeof e=="number")return e;if(zve(e))return DB;if(RB(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=RB(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Hve(e);var t=Wve.test(e);return t||qve.test(e)?Kve(e.slice(2),t?2:8):Uve.test(e)?DB:+e}var Gve=Vve,Yve=Am,IE=hve,BB=Gve,Zve="Expected a function",Xve=Math.max,Jve=Math.min;function Qve(e,r,t){var n,i,s,o,a,l,u=0,f=!1,c=!1,p=!0;if(typeof e!="function")throw new TypeError(Zve);r=BB(r)||0,Yve(t)&&(f=!!t.leading,c="maxWait"in t,s=c?Xve(BB(t.maxWait)||0,r):s,p="trailing"in t?!!t.trailing:p);function y(C){var g=n,M=i;return n=i=void 0,u=C,o=e.apply(M,g),o}function w(C){return u=C,a=setTimeout(_,r),f?y(C):o}function b(C){var g=C-l,M=C-u,B=r-g;return c?Jve(B,s-M):B}function T(C){var g=C-l,M=C-u;return l===void 0||g>=r||g<0||c&&M>=s}function _(){var C=IE();if(T(C))return A(C);a=setTimeout(_,b(C))}function A(C){return a=void 0,p&&n?y(C):(n=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,n=l=i=a=void 0}function I(){return a===void 0?o:A(IE())}function O(){var C=IE(),g=T(C);if(n=arguments,i=this,l=C,g){if(a===void 0)return w(l);if(c)return clearTimeout(a),a=setTimeout(_,r),y(l)}return a===void 0&&(a=setTimeout(_,r)),o}return O.cancel=x,O.flush=I,O}var ege=Qve,tge=ege,rge=Am,nge="Expected a function";function ige(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(nge);return rge(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),tge(e,r,{leading:n,maxWait:r,trailing:i})}var sge=ige;const C_=io(sge);var vW={exports:{}},AE={exports:{}},MB;function oge(){return MB||(MB=1,function(e,r){(function(t,n){e.exports=n()})(Cn,function(){return function(){function t(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},t.prototype.loadDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.loadDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){if(typeof s=="function"){if(l.id===0){s(null);return}s(l.val)}else console.log(l.val)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(i,s,o){var a=this.app,l=this;function u(f){f&&f.success===!0?o(null):o(new Error("Error saving database")),l.options.closeAfterSave&&l.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(f){l.saveDatabase(i,s,u)});return}this.catalog.setAppKey(a,i,s,u)},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.deleteDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){var u=l.id;u!==0?a.catalog.deleteAppKey(u,s):typeof s=="function"&&s({success:!0})})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(o){o.forEach(function(a){a.startsWith(i)&&s.deleteDatabase(a)})})},t.prototype.getDatabaseList=function(i){var s=this.app,o=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(a){o.catalog=a,o.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(a){for(var l=[],u=0;u<a.length;u++)l.push(a[u].key);typeof i=="function"?i(l):l.forEach(function(f){console.log(f)})})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(o){s.catalog=o,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(o){for(var a=[],l,u,f,c,p,y=0;y<o.length;y++)l=o[y],f=l.app||"",c=l.key||"",p=l.val||"",u=f.length*2+c.length*2+p.length+1,a.push({app:l.app,key:l.key,size:u});typeof i=="function"?i(a):a.forEach(function(w){console.log(w)})})};function n(i){this.db=null,this.initializeLokiCatalog(i)}return n.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),o=this;s.onupgradeneeded=function(a){var l=a.target.result;if(l.objectStoreNames.contains("LokiAKV")&&l.deleteObjectStore("LokiAKV"),!l.objectStoreNames.contains("LokiAKV")){var u=l.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});u.createIndex("app","app",{unique:!1}),u.createIndex("key","key",{unique:!1}),u.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(a){o.db=a.target.result,typeof i=="function"&&i(o)},s.onerror=function(a){throw a}},n.prototype.getAppKey=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.index("appkey"),f=i+","+s,c=u.get(f);c.onsuccess=function(p){return function(y){var w=y.target.result;(w===null||typeof w>"u")&&(w={id:0,success:!1}),typeof p=="function"?p(w):console.log(w)}}(o),c.onerror=function(p){return function(y){if(typeof p=="function")p({id:0,success:!1});else throw y}}(o)},n.prototype.getAppKeyById=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.get(i);u.onsuccess=function(f,c){return function(p){typeof c=="function"?c(p.target.result,f):console.log(p.target.result)}}(o,s)},n.prototype.setAppKey=function(i,s,o,a){var l=this.db.transaction(["LokiAKV"],"readwrite"),u=l.objectStore("LokiAKV"),f=u.index("appkey"),c=i+","+s,p=f.get(c);p.onsuccess=function(y){var w=y.target.result;w==null?w={app:i,key:s,appkey:i+","+s,val:o}:w.val=o;var b=u.put(w);b.onerror=function(T){return function(_){typeof T=="function"?T({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(p.error))}}(a),b.onsuccess=function(T){return function(_){typeof T=="function"&&T({success:!0})}}(a)},p.onerror=function(y){return function(w){typeof y=="function"?y({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(p.error))}}(a)},n.prototype.deleteAppKey=function(i,s){var o=this.db.transaction(["LokiAKV"],"readwrite"),a=o.objectStore("LokiAKV"),l=a.delete(i);l.onsuccess=function(u){return function(f){typeof u=="function"&&u({success:!0})}}(s),l.onerror=function(u){return function(f){typeof u=="function"?u({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(l.error))}}(s)},n.prototype.getAppKeys=function(i,s){var o=this.db.transaction(["LokiAKV"],"readonly"),a=o.objectStore("LokiAKV"),l=a.index("app"),u=IDBKeyRange.only(i),f=l.openCursor(u),c=[];f.onsuccess=function(p,y){return function(w){var b=w.target.result;if(b){var T=b.value;p.push(T),b.continue()}else typeof y=="function"?y(p):console.log(p)}}(c,s),f.onerror=function(p){return function(y){typeof p=="function"?p(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(y))}}(s)},n.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),o=s.objectStore("LokiAKV"),a=o.openCursor(),l=[];a.onsuccess=function(u,f){return function(c){var p=c.target.result;if(p){var y=p.value;u.push(y),p.continue()}else typeof f=="function"?f(u):console.log(u)}}(l,i),a.onerror=function(u){return function(f){typeof u=="function"&&u(null)}}(i)},t}()})}(AE)),AE.exports}const age={},lge=Object.freeze(Object.defineProperty({__proto__:null,default:age},Symbol.toStringTag,{value:"Module"})),uge=vv(lge);(function(e,r){(function(t,n){e.exports=n()})(Cn,function(){return function(){var t=Object.prototype.hasOwnProperty;function n($){var S,N;if(Array.isArray($)){for(N=0;N<$.length;N++)n($[N]);i($)}else if($!==null&&typeof $=="object"){for(S in $)$.hasOwnProperty(S)&&n($[S]);i($)}}function i($){Object.isFrozen($)||Object.freeze($)}function s($){return Object.isFrozen($)?x($,"shallow"):$}var o={copyProperties:function($,S){var N;for(N in $)S[N]=$[N]},resolveTransformObject:function($,S,N){var F,H;if(typeof N!="number"&&(N=0),++N>=10)return $;for(F in $)typeof $[F]=="string"&&$[F].indexOf("[%lktxp]")===0?(H=$[F].substring(8),S.hasOwnProperty(H)&&($[F]=S[H])):typeof $[F]=="object"&&($[F]=o.resolveTransformObject($[F],S,N));return $},resolveTransformParams:function($,S){var N,F,H=[];if(typeof S>"u")return $;for(N=0;N<$.length;N++)F=x($[N],"shallow-recurse-objects"),H.push(o.resolveTransformObject(F,S));return H},getIn:function($,S,N){if($!=null){if(!N)return $[S];if(typeof S=="string"&&(S=S.split(".")),!Array.isArray(S))throw new Error("path must be a string or array. Found "+typeof S);for(var F=0,H=S.length;$!=null&&F<H;)$=$[S[F++]];return F&&F==H?$:void 0}}},a={aeq:l,lt:u,gt:f};function l($,S){var N,F,H,V;if($===S)return!0;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:H=1;break;case null:H=1;break;case!1:H=3;break;case!0:H=4;break;case"":H=5;break;default:H=$===$?9:0;break}switch(S){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=S===S?9:0;break}if(H!==9||V!==9)return H===V}return N=Number($),F=Number(S),N===N||F===F?N===F:(N=$.toString(),F=S.toString(),N==F)}function u($,S,N){var F,H,V,le;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=$===$?9:0;break}switch(S){case void 0:le=1;break;case null:le=1;break;case!1:le=3;break;case!0:le=4;break;case"":le=5;break;default:le=S===S?9:0;break}if(V!==9||le!==9)return V===le?N:V<le}return F=Number($),H=Number(S),F===F&&H===H?F<H?!0:F>H?!1:N:F===F&&H!==H?!0:H===H&&F!==F?!1:$<S?!0:$>S?!1:$==S?N:(F=$.toString(),H=S.toString(),F<H?!0:F==H?N:!1)}function f($,S,N){var F,H,V,le;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=$===$?9:0;break}switch(S){case void 0:le=1;break;case null:le=1;break;case!1:le=3;break;case!0:le=4;break;case"":le=5;break;default:le=S===S?9:0;break}if(V!==9||le!==9)return V===le?N:V>le}return F=Number($),H=Number(S),F===F&&H===H?F>H?!0:F<H?!1:N:F===F&&H!==H?!1:H===H&&F!==F||$>S?!0:$<S?!1:$==S?N:(F=$.toString(),H=S.toString(),F>H?!0:F==H?N:!1)}function c($,S,N){return a.aeq($,S)?0:a.lt($,S,!1)?N?1:-1:a.gt($,S,!1)?N?-1:1:0}function p($,S,N){for(var F=0,H,V,le,ye,Ue,je=0,st=$.length;je<st;je++)if(H=$[je],V=H[0],~V.indexOf(".")?(Ue=V.split("."),le=o.getIn(S,Ue,!0),ye=o.getIn(N,Ue,!0)):(le=S[V],ye=N[V]),F=c(le,ye,H[1]),F!==0)return F;return 0}function y($,S,N,F,H,V){var le=V||0,ye=S[le],Ue=!1,je;if(typeof $=="object"&&ye in $&&(je=$[ye]),le+1>=S.length)Ue=N(je,F,H);else if(Array.isArray(je))for(var st=0,wt=je.length;st<wt&&(Ue=y(je[st],S,N,F,H,le+1),Ue!==!0);st+=1);else Ue=y(je,S,N,F,H,le+1);return Ue}function w($){return typeof $=="string"||Array.isArray($)?function(S){return $.indexOf(S)!==-1}:typeof $=="object"&&$!==null?function(S){return t.call($,S)}:null}function b($,S,N){for(var F in S)if(t.call(S,F))return T[F]($,S[F],N);return!1}var T={$eq:function($,S){return $===S},$aeq:function($,S){return $==S},$ne:function($,S){return S!==S?$===$:$!==S},$dteq:function($,S){return a.aeq($,S)},$gt:function($,S){return a.gt($,S,!1)},$gte:function($,S){return a.gt($,S,!0)},$lt:function($,S){return a.lt($,S,!1)},$lte:function($,S){return a.lt($,S,!0)},$jgt:function($,S){return $>S},$jgte:function($,S){return $>=S},$jlt:function($,S){return $<S},$jlte:function($,S){return $<=S},$between:function($,S){return $==null?!1:a.gt($,S[0],!0)&&a.lt($,S[1],!0)},$jbetween:function($,S){return $==null?!1:$>=S[0]&&$<=S[1]},$in:function($,S){return S.indexOf($)!==-1},$inSet:function($,S){return S.has($)},$nin:function($,S){return S.indexOf($)===-1},$keyin:function($,S){return $ in S},$nkeyin:function($,S){return!($ in S)},$definedin:function($,S){return S[$]!==void 0},$undefinedin:function($,S){return S[$]===void 0},$regex:function($,S){return S.test($)},$containsString:function($,S){return typeof $=="string"&&$.indexOf(S)!==-1},$containsNone:function($,S){return!T.$containsAny($,S)},$containsAny:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.some(N):N(S):!1},$contains:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.every(N):N(S):!1},$elemMatch:function($,S){return Array.isArray($)?$.some(function(N){return Object.keys(S).every(function(F){var H=S[F];return typeof H=="object"&&H||(H={$eq:H}),F.indexOf(".")!==-1?y(N,F.split("."),b,S[F],N):b(N[F],H,N)})}):!1},$type:function($,S,N){var F=typeof $;return F==="object"&&(Array.isArray($)?F="array":$ instanceof Date&&(F="date")),typeof S!="object"?F===S:b(F,S,N)},$finite:function($,S){return S===isFinite($)},$size:function($,S,N){return Array.isArray($)?typeof S!="object"?$.length===S:b($.length,S,N):!1},$len:function($,S,N){return typeof $=="string"?typeof S!="object"?$.length===S:b($.length,S,N):!1},$where:function($,S){return S($)===!0},$not:function($,S,N){return!b($,S,N)},$and:function($,S,N){for(var F=0,H=S.length;F<H;F+=1)if(!b($,S[F],N))return!1;return!0},$or:function($,S,N){for(var F=0,H=S.length;F<H;F+=1)if(b($,S[F],N))return!0;return!1},$exists:function($,S){return S?$!==void 0:$===void 0}},_=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];_.forEach(function($){var S=T[$];T["$"+$]=function(N,F,H){if(typeof F=="string")return S(N,H[F]);if(typeof F=="function")return S(N,F(H));throw new Error("Invalid argument to $$ matcher")}});var A={$eq:T.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function x($,S){if($==null)return null;var N=S||"parse-stringify",F;switch(N){case"parse-stringify":F=JSON.parse(JSON.stringify($));break;case"jquery-extend-deep":F=jQuery.extend(!0,{},$);break;case"shallow":F=Object.create($.constructor.prototype),Object.keys($).map(function(V){F[V]=$[V]});break;case"shallow-assign":F=Object.create($.constructor.prototype),Object.assign(F,$);break;case"shallow-recurse-objects":F=x($,"shallow");var H=Object.keys($);H.forEach(function(V){typeof $[V]=="object"&&$[V].constructor.name==="Object"?F[V]=x($[V],"shallow-recurse-objects"):Array.isArray($[V])&&(F[V]=I($[V],"shallow-recurse-objects"))});break}return F}function I($,S){if(S=="parse-stringify")return x($,S);for(var N=[],F=0,H=$.length;F<H;F++)N[F]=x($[F],S);return N}function O(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function C(){}C.prototype.events={},C.prototype.asyncListeners=!1,C.prototype.on=function($,S){var N,F=this;return Array.isArray($)?($.forEach(function(H){F.on(H,S)}),S):(N=this.events[$],N||(N=this.events[$]=[]),N.push(S),S)},C.prototype.emit=function($){var S=this,N;if($&&this.events[$])this.events[$].length&&(N=Array.prototype.slice.call(arguments,1),this.events[$].forEach(function(F){S.asyncListeners?setTimeout(function(){F.apply(S,N)},1):F.apply(S,N)}));else throw new Error("No event "+$+" defined")},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function($,S){var N=this;if(Array.isArray($)){$.forEach(function(H){N.removeListener(H,S)});return}if(this.events[$]){var F=this.events[$];F.splice(F.indexOf(S),1)}};function g($,S){this.filename=$||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=S&&S.hasOwnProperty("verbose")?S.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var N=function(){return typeof Cn<"u"&&(Cn.android||Cn.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof Cn<"u"&&Cn.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};S&&S.hasOwnProperty("env")?this.ENV=S.env:this.ENV=N(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(S,!0),this.on("init",this.clearChanges)}g.prototype=new C,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){var $;return typeof Gg=="function"&&($=oge()),$},g.prototype.configureOptions=function($,S){var N={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},F={fs:L,localStorage:q,memory:M};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof $<"u"){if(this.options=$,this.options.hasOwnProperty("persistenceMethod")&&typeof F[$.persistenceMethod]=="function"&&(this.persistenceMethod=$.persistenceMethod,this.persistenceAdapter=new F[$.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=$.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),$.autoload&&S){var H=this;setTimeout(function(){H.loadDatabase($,$.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable($,$.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=N[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new F[this.persistenceMethod]))},g.prototype.copy=function($){var S=new g(this.filename,{env:"NA"}),N,F;if($=$||{},S.loadJSONObject(this,{retainDirtyFlags:!0}),$.hasOwnProperty("removeNonSerializable")&&$.removeNonSerializable===!0)for(S.autosaveHandle=null,S.persistenceAdapter=null,N=S.collections.length,F=0;F<N;F++)S.collections[F].constraints=null,S.collections[F].ttl=null;return S},g.prototype.addCollection=function($,S){var N,F=this.collections.length;if(S&&S.disableMeta===!0){if(S.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(S.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof S.ttl=="number"&&S.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(N=0;N<F;N+=1)if(this.collections[N].name===$)return this.collections[N];var H=new j($,S);return H.isIncremental=this.isIncremental,this.collections.push(H),this.verbose&&(H.lokiConsoleWrapper=console),H},g.prototype.loadCollection=function($){if(!$.name)throw new Error("Collection must have a name property to be loaded");this.collections.push($)},g.prototype.getCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$)return this.collections[S];return this.emit("warning","collection "+$+" not found"),null},g.prototype.renameCollection=function($,S){var N=this.getCollection($);return N&&(N.name=S),N},g.prototype.listCollections=function(){for(var $=this.collections.length,S=[];$--;)S.push({name:this.collections[$].name,type:this.collections[$].objType,count:this.collections[$].data.length});return S},g.prototype.removeCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$){var F=new j($,{}),H=this.collections[S];for(var V in H)H.hasOwnProperty(V)&&F.hasOwnProperty(V)&&(H[V]=F[V]);this.collections.splice(S,1);return}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function($,S){switch($){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return S}},g.prototype.serialize=function($){switch($=$||{},$.hasOwnProperty("serializationMethod")||($.serializationMethod=this.options.serializationMethod),$.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function($){var S,N,F,H,V=[],le;if($=$||{},$.hasOwnProperty("partitioned")||($.partitioned=!1),$.hasOwnProperty("delimited")||($.delimited=!0),$.hasOwnProperty("delimiter")||($.delimiter=this.options.destructureDelimiter),$.partitioned===!0&&$.hasOwnProperty("partition")&&$.partition>=0)return this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:$.partition});for(le=new g(this.filename),le.loadJSONObject(this),S=0;S<le.collections.length;S++)le.collections[S].data=[];if($.partitioned===!0&&$.partition===-1)return le.serialize({serializationMethod:"normal"});for(V.push(le.serialize({serializationMethod:"normal"})),le=null,S=0;S<this.collections.length;S++)if(F=this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:S}),$.partitioned===!1&&$.delimited===!1){if(!Array.isArray(F))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(H=F.length,N=0;N<H;N++)V.push(F[N]),F[N]=null;V.push("")}else V.push(F);return $.partitioned?($.delimited,V):$.delimited?(V.push(""),V.join($.delimiter)):(V.push(""),V)},g.prototype.serializeCollection=function($){var S,N,F=[];if($=$||{},$.hasOwnProperty("delimited")||($.delimited=!0),!$.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(S=this.collections[$.collectionIndex].data.length,F=[],N=0;N<S;N++)F.push(JSON.stringify(this.collections[$.collectionIndex].data[N]));return $.delimited?(F.push(""),F.join($.delimiter)):F},g.prototype.deserializeDestructured=function($,S){var N=[],F,H,V=0,le,ye=1,Ue=!1,je;if(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.partitioned){if(S.hasOwnProperty("partition"))return S.partition===-1?(H=JSON.parse($[0]),H):this.deserializeCollection($[S.partition+1],S);for(H=JSON.parse($[0]),le=H.collections.length,V=0;V<le;V++)H.collections[V].data=this.deserializeCollection($[V+1],S);return H}if(S.delimited){if(N=$.split(S.delimiter),$=null,F=N.length,F===0)return null}else N=$;for(H=JSON.parse(N[0]),le=H.collections.length,N[0]=null;!Ue;)N[ye],N[ye]===""?++V>le&&(Ue=!0):(je=JSON.parse(N[ye]),H.collections[V].data.push(je)),N[ye++]=null;return H},g.prototype.deserializeCollection=function($,S){var N=[],F,H;for(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.delimited?(N=$.split(S.delimiter),N.pop()):N=$,H=N.length,F=0;F<H;F++)N[F]=JSON.parse(N[F]);return N},g.prototype.loadJSON=function($,S){var N;if($.length===0)N={};else switch(this.options.serializationMethod){case"normal":case"pretty":N=JSON.parse($);break;case"destructured":N=this.deserializeDestructured($);break;default:N=JSON.parse($);break}this.loadJSONObject(N,S)},g.prototype.loadJSONObject=function($,S){var N=0,F=$.collections?$.collections.length:0,H,V,le,ye,Ue,je;this.name=$.name,$.hasOwnProperty("throttledSaves")&&S&&!S.hasOwnProperty("throttledSaves")&&(this.throttledSaves=$.throttledSaves),this.collections=[];function st(Rt){var dr=S[Rt.name],Gr;return dr.proto?(Gr=dr.inflate||o.copyProperties,function(ct){var It=new dr.proto;return Gr(ct,It),It}):dr.inflate}for(N;N<F;N+=1){if(H=$.collections[N],V=this.addCollection(H.name,{disableChangesApi:H.disableChangesApi,disableDeltaChangesApi:H.disableDeltaChangesApi,disableMeta:H.disableMeta,disableFreeze:H.hasOwnProperty("disableFreeze")?H.disableFreeze:!0}),V.adaptiveBinaryIndices=H.hasOwnProperty("adaptiveBinaryIndices")?H.adaptiveBinaryIndices===!0:!1,V.transactional=H.transactional,V.asyncListeners=H.asyncListeners,V.cloneObjects=H.cloneObjects,V.cloneMethod=H.cloneMethod||"parse-stringify",V.autoupdate=H.autoupdate,V.changes=H.changes,V.dirtyIds=H.dirtyIds||[],S&&S.retainDirtyFlags===!0?V.dirty=H.dirty:V.dirty=!1,le=H.data.length,ye=0,S&&S.hasOwnProperty(H.name))for(Ue=st(H),ye;ye<le;ye++)je=Ue(H.data[ye]),V.data[ye]=je,V.addAutoUpdateObserver(je),V.disableFreeze||n(V.data[ye]);else for(ye;ye<le;ye++)V.data[ye]=H.data[ye],V.addAutoUpdateObserver(V.data[ye]),V.disableFreeze||n(V.data[ye]);if(V.maxId=typeof H.maxId>"u"?0:H.maxId,typeof H.binaryIndices<"u"&&(V.binaryIndices=H.binaryIndices),typeof H.transforms<"u"&&(V.transforms=H.transforms),V.uniqueNames=[],H.hasOwnProperty("uniqueNames")&&(V.uniqueNames=H.uniqueNames),!(typeof H.DynamicViews>"u")){for(var wt=0;wt<H.DynamicViews.length;wt++){var mt=H.DynamicViews[wt],vt=V.addDynamicView(mt.name,mt.options);vt.resultdata=mt.resultdata,vt.resultsdirty=mt.resultsdirty,vt.filterPipeline=mt.filterPipeline,vt.sortCriteriaSimple=mt.sortCriteriaSimple,vt.sortCriteria=mt.sortCriteria,vt.sortFunction=null,vt.sortDirty=mt.sortDirty,V.disableFreeze||(n(vt.filterPipeline),vt.sortCriteriaSimple?n(vt.sortCriteriaSimple):vt.sortCriteria&&n(vt.sortCriteria)),vt.resultset.filteredrows=mt.resultset.filteredrows,vt.resultset.filterInitialized=mt.resultset.filterInitialized,vt.rematerialize({removeWhereFilters:!0})}$.databaseVersion<1.5&&(V.ensureAllIndexes(!0),V.dirty=!0)}}},g.prototype.close=function($){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase($),$=void 0)),$&&this.on("close",$),this.emit("close")},g.prototype.generateChangesNotification=function($){function S(H){return H.name}var N=[],F=$||this.collections.map(S);return this.collections.forEach(function(H){F.indexOf(S(H))!==-1&&(N=N.concat(H.getChanges()))}),N},g.prototype.serializeChanges=function($){return JSON.stringify(this.generateChangesNotification($))},g.prototype.clearChanges=function(){this.collections.forEach(function($){$.flushChanges&&$.flushChanges()})};function M($){this.hashStore={},this.options=$||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}M.prototype.loadDatabase=function($,S){var N=this;this.options.asyncResponses?setTimeout(function(){N.hashStore.hasOwnProperty($)?S(N.hashStore[$].value):S(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty($)?S(this.hashStore[$].value):S(null)},M.prototype.saveDatabase=function($,S,N){var F=this,H;this.options.asyncResponses?setTimeout(function(){H=F.hashStore.hasOwnProperty($)?F.hashStore[$].savecount:0,F.hashStore[$]={savecount:H+1,lastsave:new Date,value:S},N()},this.options.asyncTimeout):(H=this.hashStore.hasOwnProperty($)?this.hashStore[$].savecount:0,this.hashStore[$]={savecount:H+1,lastsave:new Date,value:S},N())},M.prototype.deleteDatabase=function($,S){this.hashStore.hasOwnProperty($)&&delete this.hashStore[$],typeof S=="function"&&S()};function B($,S){if(this.mode="reference",this.adapter=null,this.options=S||{},this.dbref=null,this.dbname="",this.pageIterator={},$){if($.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=$}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}B.prototype.loadDatabase=function($,S){var N=this;this.dbname=$,this.dbref=new g($),this.adapter.loadDatabase($,function(F){if(!F){S(F);return}typeof F!="string"&&S(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var H=JSON.parse(F);if(N.dbref.loadJSONObject(H),H=null,N.dbref.collections.length,N.dbref.collections.length===0){S(N.dbref);return}N.pageIterator={collection:0,pageIndex:0},N.loadNextPartition(0,function(){S(N.dbref)})})},B.prototype.loadNextPartition=function($,S){var N=this.dbname+"."+$,F=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(S);return}this.adapter.loadDatabase(N,function(H){var V=F.dbref.deserializeCollection(H,{delimited:!0,collectionIndex:$});F.dbref.collections[$].data=V,++$<F.dbref.collections.length?F.loadNextPartition($,S):S()})},B.prototype.loadNextPage=function($){var S=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,N=this;this.adapter.loadDatabase(S,function(F){var H=F.split(N.options.delimiter);F="";var V=H.length,le,ye=H[V-1]==="";for(ye&&(H.pop(),V=H.length,H[V-1]===""&&V===1&&(H.pop(),V=H.length)),le=0;le<V;le++)N.dbref.collections[N.pageIterator.collection].data.push(JSON.parse(H[le])),H[le]=null;H=[],ye?++N.pageIterator.collection<N.dbref.collections.length?N.loadNextPartition(N.pageIterator.collection,$):$():(N.pageIterator.pageIndex++,N.loadNextPage($))})},B.prototype.exportDatabase=function($,S,N){var F,H=S.collections.length;for(this.dbref=S,this.dbname=$,this.dirtyPartitions=[-1],F=0;F<H;F++)S.collections[F].dirty&&this.dirtyPartitions.push(F);this.saveNextPartition(function(V){N(V)})},B.prototype.saveNextPartition=function($){var S=this,N=this.dirtyPartitions.shift(),F=this.dbname+(N===-1?"":"."+N);if(this.options.paging&&N!==-1){this.pageIterator={collection:N,docIndex:0,pageIndex:0},this.saveNextPage(function(V){S.dirtyPartitions.length===0?$(V):S.saveNextPartition($)});return}var H=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:N});this.adapter.saveDatabase(F,H,function(V){if(V){$(V);return}S.dirtyPartitions.length===0?$(null):S.saveNextPartition($)})},B.prototype.saveNextPage=function($){var S=this,N=this.dbref.collections[this.pageIterator.collection],F=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,H=0,V=N.data.length,le=this.options.delimiter.length,ye="",Ue="",je=!1,st=!1,wt=function(mt){Ue="",mt&&$(mt),je?$(null):(S.pageIterator.pageIndex++,S.saveNextPage($))};for(N.data.length===0&&(je=!0);;)if(je||(ye=JSON.stringify(N.data[this.pageIterator.docIndex]),Ue+=ye,H+=ye.length,++this.pageIterator.docIndex>=V&&(je=!0)),H>=this.options.pageSize&&(st=!0),(!st||je)&&(Ue+=this.options.delimiter,H+=le),je||st){this.adapter.saveDatabase(F,Ue,wt);return}};function L(){try{this.fs=uge}catch{this.fs=null}}L.prototype.loadDatabase=function(S,N){var F=this;this.fs.stat(S,function(H,V){!H&&V.isFile()?F.fs.readFile(S,{encoding:"utf8"},function(ye,Ue){N(ye?new Error(ye):Ue)}):N(null)})},L.prototype.saveDatabase=function(S,N,F){var H=this,V=S+"~";this.fs.writeFile(V,N,function(ye){ye?F(new Error(ye)):H.fs.rename(V,S,F)})},L.prototype.deleteDatabase=function(S,N){this.fs.unlink(S,function(H){H?N(new Error(H)):N()})};function q(){}q.prototype.loadDatabase=function(S,N){O()?N(localStorage.getItem(S)):N(new Error("localStorage is not available"))},q.prototype.saveDatabase=function(S,N,F){O()?(localStorage.setItem(S,N),F(null)):F(new Error("localStorage is not available"))},q.prototype.deleteDatabase=function(S,N){O()?(localStorage.removeItem(S),N(null)):N(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function($,S){var N=this,F=new Date().getTime();if(this.throttledSaves||$(!0),S=S||{},S.hasOwnProperty("recursiveWait")||(S.recursiveWait=!0),S.hasOwnProperty("recursiveWaitLimit")||(S.recursiveWaitLimit=!1),S.hasOwnProperty("recursiveWaitLimitDuration")||(S.recursiveWaitLimitDuration=2e3),S.hasOwnProperty("started")||(S.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(S.recursiveWait)this.throttledCallbacks.push(function(){if(N.throttledSavePending){if(S.recursiveWaitLimit&&F-S.started>S.recursiveWaitLimitDuration){$(!1);return}N.throttledSaveDrain($,S);return}else{$(!0);return}});else{this.throttledCallbacks.push($);return}else $(!0)},g.prototype.loadDatabaseInternal=function($,S){var N=S||function(H,V){if(H)throw H},F=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(V){if(typeof V=="string"){var le=!1;try{F.loadJSON(V,$||{}),le=!0}catch(ye){N(ye)}le&&(N(null),F.emit("loaded","database "+F.filename+" loaded"))}else{if(!V){N(null),F.emit("loaded","empty database "+F.filename+" loaded");return}if(V instanceof Error){N(V);return}if(typeof V=="object"){F.loadJSONObject(V,$||{}),N(null),F.emit("loaded","database "+F.filename+" loaded");return}N("unexpected adapter response : "+V)}}):N(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function($,S){var N=this;if(!this.throttledSaves){this.loadDatabaseInternal($,S);return}this.throttledSaveDrain(function(F){if(F){N.throttledSavePending=!0,N.loadDatabaseInternal($,function(H){N.throttledCallbacks.length===0?N.throttledSavePending=!1:N.saveDatabase(),typeof S=="function"&&S(H)});return}else typeof S=="function"&&S(new Error("Unable to pause save throttling long enough to read database"))},$)},g.prototype.saveDatabaseInternal=function($){var S=$||function(H){if(H)throw H},N=this;if(!this.persistenceAdapter){S(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var F;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(N.ignoreAutosave=!1,F){S(new Error("adapter error - getLokiCopy called more than once"));return}var V=N.copy({removeNonSerializable:!0});return F=N.collections.map(function(le){return[le.dirty,le.dirtyIds]}),N.collections.forEach(function(le){le.dirty=!1,le.dirtyIds=[]}),V},function(V){N.ignoreAutosave=!1,V&&F&&N.collections.forEach(function(le,ye){var Ue=F[ye];le.dirty=le.dirty||Ue[0],le.dirtyIds=le.dirtyIds.concat(Ue[1])}),S(V)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(V){N.autosaveClearFlags(),S(V)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(V){S(V)}))},g.prototype.saveDatabase=function($){if(!this.throttledSaves){this.saveDatabaseInternal($);return}if(this.throttledSavePending){this.throttledCallbacks.push($);return}var S=this.throttledCallbacks;this.throttledCallbacks=[],S.unshift($),this.throttledSavePending=!0;var N=this;this.saveDatabaseInternal(function(F){N.throttledSavePending=!1,S.forEach(function(H){typeof H=="function"&&setTimeout(function(){H(F)},1)}),N.throttledCallbacks.length>0&&N.saveDatabase()})},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function($,S){var N=S||function(F,H){if(F)throw F};typeof $=="function"&&!S&&(N=$),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(H){N(H)}):N(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var $=0;$<this.collections.length;$++)if(this.collections[$].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var $=0;$<this.collections.length;$++)this.collections[$].dirty=!1},g.prototype.autosaveEnable=function($,S){this.autosave=!0;var N=5e3,F=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(N=this.autosaveInterval),this.autosaveHandle=setInterval(function(){F.autosaveDirty()&&!F.ignoreAutosave&&F.saveDatabase(S)},N)},g.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function Q($,S){return this.collection=$,this.filteredrows=[],this.filterInitialized=!1,this}Q.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},Q.prototype.toJSON=function(){var $=this.copy();return $.collection=null,$},Q.prototype.limit=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new Q(this.collection);return S.filteredrows=this.filteredrows.slice(0,$),S.filterInitialized=!0,S},Q.prototype.offset=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new Q(this.collection);return S.filteredrows=this.filteredrows.slice($),S.filterInitialized=!0,S},Q.prototype.copy=function(){var $=new Q(this.collection);return this.filteredrows.length>0&&($.filteredrows=this.filteredrows.slice()),$.filterInitialized=this.filterInitialized,$},Q.prototype.branch=Q.prototype.copy,Q.prototype.transform=function($,S){var N,F,H=this;if(typeof $=="string"&&this.collection.transforms.hasOwnProperty($)&&($=this.collection.transforms[$]),typeof $!="object"||!Array.isArray($))throw new Error("Invalid transform");for(typeof S<"u"&&($=o.resolveTransformParams($,S)),N=0;N<$.length;N++)switch(F=$[N],F.type){case"find":H.find(F.value);break;case"where":H.where(F.value);break;case"simplesort":H.simplesort(F.property,F.desc||F.options);break;case"compoundsort":H.compoundsort(F.value);break;case"sort":H.sort(F.value);break;case"limit":H=H.limit(F.value);break;case"offset":H=H.offset(F.value);break;case"map":H=H.map(F.value,F.dataOptions);break;case"eqJoin":H=H.eqJoin(F.joinData,F.leftJoinKey,F.rightJoinKey,F.mapFun,F.dataOptions);break;case"mapReduce":H=H.mapReduce(F.mapFunction,F.reduceFunction);break;case"update":H.update(F.value);break;case"remove":H.remove();break}return H},Q.prototype.sort=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=function(N,F){return function(H,V){return N(F[H],F[V])}}($,this.collection.data);return this.filteredrows.sort(S),this},Q.prototype.simplesort=function($,S){var N,F=10,H=this.collection.data.length,V=this.filteredrows.length,le=this.collection.binaryIndices.hasOwnProperty($);if((typeof S>"u"||S===!1)&&(S={desc:!1}),S===!0&&(S={desc:!0}),V===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty($))return this.collection.ensureIndex($),this.filteredrows=this.collection.binaryIndices[$].values.slice(0),S.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!S.disableIndexIntersect&&le&&(N=H/V,S.useJavascriptSorting&&(F=6),N<=F||S.forceIndexIntersect)){var ye,Ue=this.filteredrows,je={};for(ye=0;ye<V;ye++)je[Ue[ye]]=!0;var st=this.collection.binaryIndices[$].values;return this.filteredrows=st.filter(function(mt){return je[mt]}),S.desc&&this.filteredrows.reverse(),this}if(S.useJavascriptSorting)return this.sort(function(mt,vt){if(mt[$]===vt[$])return 0;if(mt[$]>vt[$])return 1;if(mt[$]<vt[$])return-1});var wt=function(mt,vt,Rt){var dr,Gr,ct;return function(It,gn){return~mt.indexOf(".")?(ct=mt.split("."),dr=o.getIn(Rt[It],ct,!0),Gr=o.getIn(Rt[gn],ct,!0)):(dr=Rt[It][mt],Gr=Rt[gn][mt]),c(dr,Gr,vt)}}($,S.desc,this.collection.data);return this.filteredrows.sort(wt),this},Q.prototype.compoundsort=function($){if($.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var S;if($.length===1)return S=$[0],Array.isArray(S)?this.simplesort(S[0],S[1]):this.simplesort(S,!1);for(var N=0,F=$.length;N<F;N+=1)S=$[N],Array.isArray(S)||($[N]=[S,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var H=function(V,le){return function(ye,Ue){return p(V,le[ye],le[Ue])}}($,this.collection.data);return this.filteredrows.sort(H),this},Q.prototype.findOr=function($){var S=null,N=0,F=0,H=[],V=[],le=0;this.count();for(var ye=0,Ue=$.length;ye<Ue;ye++)for(S=this.branch().find($[ye]).filteredrows,F=S.length,N=0;N<F;N++)le=S[N],V[le]===void 0&&(V[le]=!0,H.push(le));return this.filteredrows=H,this.filterInitialized=!0,this},Q.prototype.$or=Q.prototype.findOr;function te($,S){if($==="$regex")Array.isArray(S)?S=new RegExp(S[0],S[1]):S instanceof RegExp||(S=new RegExp(S));else if(typeof S=="object")for(var N in S)(N==="$regex"||typeof S[N]=="object")&&(S[N]=te(N,S[N]));return S}Q.prototype.findAnd=function($){for(var S=0,N=$.length;S<N;S++){if(this.count()===0)return this;this.find($[S])}return this},Q.prototype.$and=Q.prototype.findAnd,Q.prototype.find=function($,S){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var N=$||"getAll",F,H,V,le,ye,Ue,je,st=!1,wt=[],mt=[],vt=null;if(S=S||!1,typeof N=="object"){for(F in N)le={},le[F]=N[F],mt.push(le),t.call(N,F)&&(H=F,V=N[F]);if(mt.length>1)return this.find({$and:mt},S)}if(!H||N==="getAll")return S&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(H==="$and"||H==="$or")return this[H](V),S&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(V===null||typeof V!="object"||V instanceof Date)ye="$eq",Ue=V;else if(typeof V=="object"){for(je in V)if(t.call(V,je)){ye=je,Ue=V[je];break}}else throw new Error("Do not know what you want to do.");(ye==="$regex"||typeof Ue=="object")&&(Ue=te(ye,Ue));var Rt=H.indexOf(".")!==-1,dr=!this.filterInitialized;dr&&this.collection.binaryIndices[H]&&A[ye]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(H),st=!0,vt=this.collection.binaryIndices[H]),!st&&ye==="$in"&&Array.isArray(Ue)&&typeof Set<"u"&&(Ue=new Set(Ue),ye="$inSet");var Gr=T[ye],ct=this.collection.data,It=0,gn=0,Di,Gi=0,yn;if(this.filterInitialized){if(Di=this.filteredrows,gn=Di.length,Rt){for(H=H.split("."),It=0;It<gn;It++)if(Gi=Di[It],yn=ct[Gi],y(yn,H,Gr,Ue,yn)&&(wt.push(Gi),S))return this.filteredrows=wt,this}else for(It=0;It<gn;It++)if(Gi=Di[It],yn=ct[Gi],Gr(yn[H],Ue,yn)&&(wt.push(Gi),S))return this.filteredrows=wt,this}else if(st){var ps=this.collection.calculateRange(ye,H,Ue);if(ye!=="$in"){for(It=ps[0];It<=ps[1];It++)if(A[ye]!==!0){if(A[ye](o.getIn(ct[vt.values[It]],H,Rt),Ue)&&(wt.push(vt.values[It]),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else if(wt.push(vt.values[It]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0,gn=ps.length;It<gn;It++)if(wt.push(vt.values[ps[It]]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else if(gn=ct.length,Rt){for(H=H.split("."),It=0;It<gn;It++)if(yn=ct[It],y(yn,H,Gr,Ue,yn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0;It<gn;It++)if(yn=ct[It],Gr(yn[H],Ue,yn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this;return this.filteredrows=wt,this.filterInitialized=!0,this},Q.prototype.where=function($){var S,N=[];if(typeof $=="function")S=$;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var F=this.filteredrows.length;F--;)S(this.collection.data[this.filteredrows[F]])===!0&&N.push(this.filteredrows[F]);return this.filteredrows=N,this}else{for(var H=this.collection.data.length;H--;)S(this.collection.data[H])===!0&&N.push(H);return this.filteredrows=N,this.filterInitialized=!0,this}}catch(V){throw V}},Q.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},Q.prototype.data=function($){var S=[],N=this.collection.data,F,H,V,le;if($=$||{},$.removeMeta&&!$.forceClones&&($.forceClones=!0,$.forceCloneMethod=$.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&($.forceClones=!0,$.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||$.forceClones){for(H=N.length,le=$.forceCloneMethod||this.collection.cloneMethod,V=0;V<H;V++)F=x(N[V],le),$.removeMeta&&(delete F.$loki,delete F.meta),S.push(F);return S}else return N.slice();else this.filterInitialized=!0;var ye=this.filteredrows;if(H=ye.length,this.collection.cloneObjects||$.forceClones)for(le=$.forceCloneMethod||this.collection.cloneMethod,V=0;V<H;V++)F=x(N[ye[V]],le),$.removeMeta&&(delete F.$loki,delete F.meta),S.push(F);else for(V=0;V<H;V++)S.push(N[ye[V]]);return S},Q.prototype.update=function($){if(typeof $!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var S,N=this.filteredrows.length,F=this.collection.data,H=0;H<N;H++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(S=x(F[this.filteredrows[H]],this.collection.cloneMethod),$(S),this.collection.update(S)):($(F[this.filteredrows[H]]),this.collection.update(F[this.filteredrows[H]]));return this},Q.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},Q.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}},Q.prototype.eqJoin=function($,S,N,F,H){var V=[],le,ye=[],Ue,je,st=[],wt=typeof S=="function",mt=typeof N=="function",vt={};if(V=this.data(H),le=V.length,$ instanceof j)ye=$.chain().data(H);else if($ instanceof Q)ye=$.data(H);else if(Array.isArray($))ye=$;else throw new TypeError("joinData needs to be an array or result set");Ue=ye.length;for(var Rt=0;Rt<Ue;Rt++)je=mt?N(ye[Rt]):ye[Rt][N],vt[je]=ye[Rt];F||(F=function(Gr,ct){return{left:Gr,right:ct}});for(var dr=0;dr<le;dr++)je=wt?S(V[dr]):V[dr][S],st.push(F(V[dr],vt[je]||{}));return this.collection=new j("joinData"),this.collection.insert(st),this.filteredrows=[],this.filterInitialized=!1,this},Q.prototype.map=function($,S){var N=this.data(S).map($);return this.collection=new j("mappedData"),this.collection.insert(N),this.filteredrows=[],this.filterInitialized=!1,this};function X($,S,N){this.collection=$,this.name=S,this.rebuildPending=!1,this.options=N||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new Q($),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}X.prototype=new C,X.prototype.constructor=X,X.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},X.prototype.rematerialize=function($){var S,N,F;$=$||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new Q(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var H=Object.isFrozen(this.filterPipeline);if($.hasOwnProperty("removeWhereFilters"))for(H&&(this.filterPipeline=this.filterPipeline.slice()),S=this.filterPipeline.length,N=S;N--;)this.filterPipeline[N].type==="where"&&(N!==this.filterPipeline.length-1&&(this.filterPipeline[N]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var V=this.filterPipeline;for(this.filterPipeline=[],S=V.length,F=0;F<S;F++)this.applyFind(V[F].val,V[F].uid);return H&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},X.prototype.branchResultset=function($,S){var N=this.resultset.branch();return typeof $>"u"?N:N.transform($,S)},X.prototype.toJSON=function(){var $=new X(this.collection,this.name,this.options);return $.resultset=this.resultset,$.resultdata=[],$.resultsdirty=!0,$.filterPipeline=this.filterPipeline,$.sortFunction=this.sortFunction,$.sortCriteria=this.sortCriteria,$.sortCriteriaSimple=this.sortCriteriaSimple||null,$.sortDirty=this.sortDirty,$.collection=null,$},X.prototype.removeFilters=function($){$=$||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var S=Object.isFrozen(this.filterPipeline),N=this.filterPipeline.length>0;this.filterPipeline=[],S&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,$.queueSortPhase===!0&&this.queueSortPhase(),N&&this.emit("filter")},X.prototype.applySort=function($){return this.sortFunction=$,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},X.prototype.applySimpleSort=function($,S){return this.sortCriteriaSimple={propname:$,options:S||!1},this.collection.disableFreeze||n(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},X.prototype.applySortCriteria=function($){return this.sortCriteria=$,this.collection.disableFreeze||n(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},X.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},X.prototype.commit=function(){return this.cachedresultset=null,this},X.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},X.prototype._indexOfFilterWithId=function($){if(typeof $=="string"||typeof $=="number"){for(var S=0,N=this.filterPipeline.length;S<N;S+=1)if($===this.filterPipeline[S].uid)return S}return-1},X.prototype._addFilter=function($){var S=Object.isFrozen(this.filterPipeline);S&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||n($),this.filterPipeline.push($),S&&Object.freeze(this.filterPipeline),this.resultset[$.type]($.val)},X.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var $=this.filterPipeline,S=Object.isFrozen($);this.filterPipeline=[];for(var N=0,F=$.length;N<F;N+=1)this._addFilter($[N]);return S&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},X.prototype.applyFilter=function($){var S=this._indexOfFilterWithId($.uid);if(S>=0){var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[S]=$,N&&(i($),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter($),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},X.prototype.applyFind=function($,S){return this.applyFilter({type:"find",val:$,uid:S}),this},X.prototype.applyWhere=function($,S){return this.applyFilter({type:"where",val:$,uid:S}),this},X.prototype.removeFilter=function($){var S=this._indexOfFilterWithId($);if(S<0)throw new Error("Dynamic view does not contain a filter with ID: "+$);var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(S,1),N&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},X.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},X.prototype.data=function($){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data($)},X.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var $=this;setTimeout(function(){$.rebuildPending&&($.rebuildPending=!1,$.emit("rebuild",$))},this.options.minRebuildInterval)}},X.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var $=this;this.options.sortPriority==="active"?setTimeout(function(){$.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},X.prototype.performSortPhase=function($){!this.sortDirty&&!this.resultsdirty||($=$||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),$.suppressRebuildEvent||this.emit("rebuild",this))},X.prototype.evaluateDocument=function($,S){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var N=this.resultset.filteredrows,F=S?-1:N.indexOf(+$),H=N.length,V=new Q(this.collection);V.filteredrows=[$],V.filterInitialized=!0;for(var le,ye=0,Ue=this.filterPipeline.length;ye<Ue;ye++)le=this.filterPipeline[ye],V[le.type](le.val);var je=V.filteredrows.length===0?-1:0;if(!(F===-1&&je===-1)){if(F===-1&&je!==-1){N.push($),this.options.persistent&&this.resultdata.push(this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(F!==-1&&je===-1){F<H-1?(N.splice(F,1),this.options.persistent&&this.resultdata.splice(F,1)):(N.length=H-1,this.options.persistent&&(this.resultdata.length=H-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(F!==-1&&je!==-1){this.options.persistent&&(this.resultdata[F]=this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},X.prototype.removeDocument=function($){var S,N,F,H={},V={},le=[],ye=this.resultset,Ue=this.resultset.filteredrows,je=Ue.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray($)||($=[$]),F=$.length,N=0;N<F;N++)H[$[N]]=!0;for(S=0;S<je;S++)H[Ue[S]]&&(V[S]=!0);Object.keys(V).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(wt,mt){return!V[mt]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(wt,mt){return!V[mt]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var st=function(wt){return function(mt){return mt<ye.filteredrows[wt]}};for(je=ye.filteredrows.length,S=0;S<je;S++)le=$.filter(st(S)),ye.filteredrows[S]-=le.length},X.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}};function j($,S){this.name=$,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=$,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var N=this;S=S||{},S.hasOwnProperty("unique")&&(Array.isArray(S.unique)||(S.unique=[S.unique]),S.unique.forEach(function(je){N.uniqueNames.push(je)})),S.hasOwnProperty("exact")&&S.exact.forEach(function(je){N.constraints.exact[je]=new Fe(je)}),this.adaptiveBinaryIndices=S.hasOwnProperty("adaptiveBinaryIndices")?S.adaptiveBinaryIndices:!0,this.transactional=S.hasOwnProperty("transactional")?S.transactional:!1,this.cloneObjects=S.hasOwnProperty("clone")?S.clone:!1,this.cloneMethod=S.hasOwnProperty("cloneMethod")?S.cloneMethod:"parse-stringify",this.asyncListeners=S.hasOwnProperty("asyncListeners")?S.asyncListeners:!1,this.disableMeta=S.hasOwnProperty("disableMeta")?S.disableMeta:!1,this.disableChangesApi=S.hasOwnProperty("disableChangesApi")?S.disableChangesApi:!0,this.disableDeltaChangesApi=S.hasOwnProperty("disableDeltaChangesApi")?S.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=S.hasOwnProperty("autoupdate")?S.autoupdate:!1,this.serializableIndices=S.hasOwnProperty("serializableIndices")?S.serializableIndices:!0,this.disableFreeze=S.hasOwnProperty("disableFreeze")?S.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(S.ttl||-1,S.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var F=[];if(S&&S.indices)if(Object.prototype.toString.call(S.indices)==="[object Array]")F=S.indices;else if(typeof S.indices=="string")F=[S.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var H=0;H<F.length;H++)this.ensureIndex(F[H]);function V(je){var st=typeof Set=="function"?new Set:[];st.add||(st.add=function(wt){return this.indexOf(wt)===-1&&this.push(wt),this}),je.forEach(function(wt){st.add(wt.object)}),st.forEach(function(wt){if(!t.call(wt,"$loki"))return N.removeAutoUpdateObserver(wt);try{N.update(wt)}catch{}})}this.observerCallback=V;function le(je,st){return st?ye(st,je):JSON.parse(JSON.stringify(je))}this.getChangeDelta=le;function ye(je,st){var wt=st!==null&&typeof st=="object"?Object.keys(st):null;if(wt&&wt.length&&["string","boolean","number"].indexOf(typeof st)<0){for(var mt={},vt=0;vt<wt.length;vt++){var Rt=wt[vt];if(st.hasOwnProperty(Rt))if(!je.hasOwnProperty(Rt)||N.uniqueNames.indexOf(Rt)>=0||Rt=="$loki"||Rt=="meta")mt[Rt]=st[Rt];else{var dr=ye(je[Rt],st[Rt]);typeof dr<"u"&&dr!={}&&(mt[Rt]=dr)}}return Object.keys(mt).length===0?void 0:mt}else return je===st?void 0:st}this.getObjectDelta=ye;function Ue(){N.changes=[]}this.getChanges=function(){return N.changes},this.flushChanges=Ue,this.setChangesApi=function(je){N.disableChangesApi=!je,je||(N.disableDeltaChangesApi=!1)},this.on("delete",function(st){N.disableChangesApi||N.createChange(N.name,"R",st)}),this.on("warning",function(je){N.lokiConsoleWrapper.warn(je)}),Ue()}j.prototype=new C,j.prototype.contructor=j,j.prototype.createChange=function($,S,N,F){this.changes.push({name:$,operation:S,obj:S=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(N,F):JSON.parse(JSON.stringify(N))})},j.prototype.insertMeta=function($){var S,N;if(!(this.disableMeta||!$)){if(Array.isArray($)){for(S=$.length,N=0;N<S;N++)$[N].hasOwnProperty("meta")||($[N].meta={}),$[N].meta.created=new Date().getTime(),$[N].meta.revision=0;return}$.meta||($.meta={}),$.meta.created=new Date().getTime(),$.meta.revision=0}},j.prototype.updateMeta=function($){return this.disableMeta||!$||(this.disableFreeze||($=s($),$.meta=s($.meta)),$.meta.updated=new Date().getTime(),$.meta.revision+=1),$},j.prototype.createInsertChange=function($){this.createChange(this.name,"I",$)},j.prototype.createUpdateChange=function($,S){this.createChange(this.name,"U",$,S)},j.prototype.insertMetaWithChange=function($){this.insertMeta($),this.createInsertChange($)},j.prototype.updateMetaWithChange=function($,S,N){return $=this.updateMeta($,N),this.createUpdateChange($,S),$},j.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},j.prototype.addAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.observe($,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},j.prototype.removeAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve($,this.observerCallback)},j.prototype.addTransform=function($,S){if(this.transforms.hasOwnProperty($))throw new Error("a transform by that name already exists");this.transforms[$]=S},j.prototype.getTransform=function($){return this.transforms[$]},j.prototype.setTransform=function($,S){this.transforms[$]=S},j.prototype.removeTransform=function($){delete this.transforms[$]},j.prototype.byExample=function($){var S,N,F;F=[];for(S in $)$.hasOwnProperty(S)&&F.push((N={},N[S]=$[S],N));return{$and:F}},j.prototype.findObject=function($){return this.findOne(this.byExample($))},j.prototype.findObjects=function($){return this.find(this.byExample($))},j.prototype.ttlDaemonFuncGen=function(){var $=this,S=this.ttl.age;return function(){var F=Date.now(),H=$.chain().where(function(le){var ye=le.meta.updated||le.meta.created,Ue=F-ye;return S<Ue});H.remove()}},j.prototype.setTTL=function($,S){$<0?clearInterval(this.ttl.daemon):(this.ttl.age=$,this.ttl.ttlInterval=S,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),S))},j.prototype.prepareFullDocIndex=function(){for(var $=this.data.length,S=new Array($),N=0;N<$;N+=1)S[N]=N;return S},j.prototype.configureOptions=function($){$=$||{},$.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=$.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},j.prototype.ensureIndex=function($,S){if(typeof S>"u"&&(S=!1),$==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[$]&&!S&&!this.binaryIndices[$].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty($)&&!S)){var N={name:$,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[$]=N;var F=function(H,V){var le,ye,Ue=~H.indexOf(".")?H.split("."):!1;return function(je,st){if(Ue?(le=o.getIn(V[je],Ue,!0),ye=o.getIn(V[st],Ue,!0)):(le=V[je][H],ye=V[st][H]),le!==ye){if(a.lt(le,ye,!1))return-1;if(a.gt(le,ye,!1))return 1}return 0}}($,this.data);N.values.sort(F),N.dirty=!1,this.dirty=!0}},j.prototype.checkAllIndexes=function($){var S,N=this.binaryIndices,F=[],H;for(S in N)t.call(N,S)&&(H=this.checkIndex(S,$),H||F.push(S));return F},j.prototype.checkIndex=function($,S){S=S||{},S.randomSamplingFactor&&S.randomSampling!==!1&&(S.randomSampling=!0),S.randomSamplingFactor=S.randomSamplingFactor||.1,(S.randomSamplingFactor<0||S.randomSamplingFactor>1)&&(S.randomSamplingFactor=.1);var N=!0,F,H,V,le,ye;if(!this.binaryIndices.hasOwnProperty($))throw new Error("called checkIndex on property without an index: "+$);if(this.adaptiveBinaryIndices||this.ensureIndex($),ye=this.binaryIndices[$].values,le=ye.length,le!==this.data.length)return S.repair&&this.ensureIndex($,!0),!1;if(le===0)return!0;var Ue=$.indexOf(".")!==-1;if(le===1)N=ye[0]===0;else if(S.randomSampling){if(T.$lte(o.getIn(this.data[ye[0]],$,Ue),o.getIn(this.data[ye[1]],$,Ue))||(N=!1),T.$lte(o.getIn(this.data[ye[le-2]],$,Ue),o.getIn(this.data[ye[le-1]],$,Ue))||(N=!1),N){for(H=Math.floor((le-1)*S.randomSamplingFactor),F=0;F<H-1;F++)if(V=Math.floor(Math.random()*(le-1)),!T.$lte(o.getIn(this.data[ye[V]],$,Ue),o.getIn(this.data[ye[V+1]],$,Ue))){N=!1;break}}}else for(F=0;F<le-1;F++)if(!T.$lte(o.getIn(this.data[ye[F]],$,Ue),o.getIn(this.data[ye[F+1]],$,Ue))){N=!1;break}return!N&&S.repair&&this.ensureIndex($,!0),N},j.prototype.getBinaryIndexValues=function($){var S,N=this.binaryIndices[$].values,F=[];for(S=0;S<N.length;S++)F.push(o.getIn(this.data[N[S]],$,!0));return F},j.prototype.getUniqueIndex=function($,S){var N=this.constraints.unique[$];return!N&&S?this.ensureUniqueIndex($):N},j.prototype.ensureUniqueIndex=function($){var S=this.constraints.unique[$];return S||this.uniqueNames.indexOf($)==-1&&this.uniqueNames.push($),this.constraints.unique[$]=S=new Te($),this.data.forEach(function(N){S.set(N)}),S},j.prototype.ensureAllIndexes=function($){var S,N=this.binaryIndices;for(S in N)t.call(N,S)&&this.ensureIndex(S,$)},j.prototype.flagBinaryIndexesDirty=function(){var $,S=this.binaryIndices;for($ in S)t.call(S,$)&&(S[$].dirty=!0)},j.prototype.flagBinaryIndexDirty=function($){this.binaryIndices[$]&&(this.binaryIndices[$].dirty=!0)},j.prototype.count=function($){return $?this.chain().find($).filteredrows.length:this.data.length},j.prototype.ensureId=function(){if(!this.idIndex){var $=this.data,S=0,N=$.length,F=new Array(N);for(S;S<N;S++)F[S]=$[S].$loki;this.idIndex=F}},j.prototype.ensureIdAsync=function($){this.async(function(){this.ensureId()},$)},j.prototype.addDynamicView=function($,S){var N=new X(this,$,S);return this.DynamicViews.push(N),N},j.prototype.removeDynamicView=function($){this.DynamicViews=this.DynamicViews.filter(function(S){return S.name!==$})},j.prototype.getDynamicView=function($){for(var S=0;S<this.DynamicViews.length;S++)if(this.DynamicViews[S].name===$)return this.DynamicViews[S];return null},j.prototype.findAndUpdate=function($,S){typeof $=="function"?this.updateWhere($,S):this.chain().find($).update(S)},j.prototype.findAndRemove=function($){this.chain().find($).remove()},j.prototype.insert=function($,S){if(!Array.isArray($))return this.insertOne($);var N,F=[],H=S&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;H&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",$);for(var V=0,le=$.length;V<le;V++){if(N=this.insertOne($[V],!0),!N)return;F.push(N)}}finally{H&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",F),F=this.cloneObjects?x(F,this.cloneMethod):F,F.length===1?F[0]:F},j.prototype.insertOne=function($,S){var N=null,F;if(typeof $!="object"?N=new TypeError("Document needs to be an object"):$===null&&(N=new TypeError("Object cannot be null")),N!==null)throw this.emit("error",N),N;var H=this.cloneObjects?x($,this.cloneMethod):$;if(this.disableFreeze||(H=s(H)),this.disableMeta||(typeof H.meta>"u"?H.meta={revision:0,created:0}:this.disableFreeze||(H.meta=s(H.meta))),S||this.emit("pre-insert",H),!!this.add(H))return this.disableChangesApi?this.insertMeta(H):this.insertMetaWithChange(H),this.disableFreeze||n(H),F=this.cloneObjects?x(H,this.cloneMethod):H,S||this.emit("insert",F),this.addAutoUpdateObserver(F),F},j.prototype.clear=function($){var S=this;if($=$||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},$.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var N=Object.keys(this.binaryIndices);N.forEach(function(F){S.binaryIndices[F].dirty=!1,S.binaryIndices[F].values=[]})}},j.prototype.update=function($){var S,N,F;if(Array.isArray($)){F=$.length,S=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,S&&(this.adaptiveBinaryIndices=!1);try{for(N=0;N<F;N+=1)this.update($[N])}finally{S&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!t.call($,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var H=this.get($.$loki,!0),V,le,ye,Ue=this;if(!H)throw new Error("Trying to update a document not in collection.");V=H[0],ye=H[1],le=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?x($,this.cloneMethod):$,this.emit("pre-update",$),this.uniqueNames.forEach(function(vt){Ue.getUniqueIndex(vt,!0).update(V,le)}),this.data[ye]=le,le!==$&&this.addAutoUpdateObserver($);for(var je=0;je<this.DynamicViews.length;je++)this.DynamicViews[je].evaluateDocument(ye,!1);var st;if(this.adaptiveBinaryIndices){var wt=this.binaryIndices;for(st in wt)this.adaptiveBinaryIndexUpdate(ye,st)}else this.flagBinaryIndexesDirty();this.idIndex[ye]=le.$loki,this.isIncremental&&this.dirtyIds.push(le.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?le=this.updateMeta(le):le=this.updateMetaWithChange(le,V),this.disableFreeze||n(le);var mt;return this.cloneObjects?mt=x(le,this.cloneMethod):mt=le,this.emit("update",mt,V),mt}catch(vt){throw this.rollback(),this.lokiConsoleWrapper.error(vt.message),this.emit("error",vt),vt}},j.prototype.add=function($){if(typeof $!="object")throw new TypeError("Object being added needs to be an object");if(typeof $.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var S=this.maxId;$.$loki=S,this.disableMeta||($.meta.version=0);for(var N=0,F=this.uniqueNames.length;N<F;N++)this.getUniqueIndex(this.uniqueNames[N],!0).set($);this.idIndex&&this.idIndex.push(S),this.isIncremental&&this.dirtyIds.push(S),this.data.push($);var H=this.data.length-1,V=this.DynamicViews.length;for(N=0;N<V;N++)this.DynamicViews[N].evaluateDocument(H,!0);if(this.adaptiveBinaryIndices){var le=this.binaryIndices;for(var ye in le)this.adaptiveBinaryIndexInsert(H,ye)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?x($,this.cloneMethod):$}catch(Ue){throw this.rollback(),this.lokiConsoleWrapper.error(Ue.message),this.emit("error",Ue),Ue}},j.prototype.updateWhere=function($,S){var N=this.where($),F=0,H;try{for(F;F<N.length;F++)H=S(N[F]),this.update(H)}catch(V){this.rollback(),this.lokiConsoleWrapper.error(V.message)}},j.prototype.removeWhere=function($){var S;typeof $=="function"?(S=this.data.filter($),this.remove(S)):this.chain().find($).remove()},j.prototype.removeDataOnly=function(){this.remove(this.data.slice())},j.prototype.removeBatchByPositions=function($){var S=$.length,N={},F,H,V,le=Object.keys(this.binaryIndices).length,ye=Object.keys(this.constraints.unique).length,Ue=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,je,st=this;try{for(this.startTransaction(),this.ensureId(),V=0;V<S;V++)N[this.idIndex[$[V]]]=!0;if(F=this.DynamicViews.length,F>0||le>0||ye>0){if(F>0)for(H=0;H<F;H++)this.DynamicViews[H].removeDocument($);if(this.adaptiveBinaryIndices&&!Ue){var wt,mt=this.binaryIndices;for(wt in mt)this.adaptiveBinaryIndexRemove($,wt)}else this.flagBinaryIndexesDirty();ye&&this.uniqueNames.forEach(function(vt){var Rt=st.getUniqueIndex(vt);if(Rt)for(V=0;V<S;V++)je=st.data[$[V]],je[vt]!==null&&je[vt]!==void 0&&Rt.remove(je[vt])})}if(!this.disableChangesApi||this.events.delete.length>1)for(V=0;V<S;V++)this.emit("delete",this.data[$[V]]);if(this.data=this.data.filter(function(vt){return!N[vt.$loki]}),this.isIncremental)for(V=0;V<S;V++)this.dirtyIds.push(this.idIndex[$[V]]);this.idIndex=this.idIndex.filter(function(vt){return!N[vt]}),this.adaptiveBinaryIndices&&Ue&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(vt){return this.rollback(),Ue&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(vt.message),this.emit("error",vt),null}},j.prototype.removeBatch=function($){var S=$.length,N=this.data.length,F,H={},V=[];for(F=0;F<N;F++)H[this.data[F].$loki]=F;for(F=0;F<S;F++)typeof $[F]=="object"?V.push(H[$[F].$loki]):V.push(H[$[F]]);this.removeBatchByPositions(V)},j.prototype.remove=function($){if(typeof $=="number"&&($=this.get($)),typeof $!="object")throw new Error("Parameter is not an object");if(Array.isArray($)){this.removeBatch($);return}if(!t.call($,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var S=this.get($.$loki,!0),N=S[1],F=this;this.uniqueNames.forEach(function(ye){if($[ye]!==null&&typeof $[ye]<"u"){var Ue=F.getUniqueIndex(ye);Ue&&Ue.remove($[ye])}});for(var H=0;H<this.DynamicViews.length;H++)this.DynamicViews[H].removeDocument(N);if(this.adaptiveBinaryIndices){var V,le=this.binaryIndices;for(V in le)this.adaptiveBinaryIndexRemove(N,V)}else this.flagBinaryIndexesDirty();return this.data.splice(N,1),this.removeAutoUpdateObserver($),this.idIndex.splice(N,1),this.isIncremental&&this.dirtyIds.push($.$loki),this.commit(),this.dirty=!0,this.emit("delete",S[0]),this.disableFreeze||($=s($)),delete $.$loki,delete $.meta,this.disableFreeze||i($),$}catch(ye){return this.rollback(),this.lokiConsoleWrapper.error(ye.message),this.emit("error",ye),null}},j.prototype.get=function($,S){this.idIndex||this.ensureId();var N=S||!1,F=this.idIndex,H=F.length-1,V=0,le=V+H>>1;if($=typeof $=="number"?$:parseInt($,10),isNaN($))throw new TypeError("Passed id is not an integer");for(;F[V]<F[H];)le=V+H>>1,F[le]<$?V=le+1:H=le;return H===V&&F[V]===$?N?[this.data[V],V]:this.data[V]:null},j.prototype.getBinaryIndexPosition=function($,S){var N=o.getIn(this.data[$],S,!0),F=this.binaryIndices[S].values,H=this.calculateRange("$eq",S,N);if(H[0]===0&&H[1]===-1)return null;for(var V=H[0],le=H[1],ye=V;ye<=le;ye++)if(F[ye]===$)return ye;return null},j.prototype.adaptiveBinaryIndexInsert=function($,S){var N=S.indexOf(".")!==-1,F=this.binaryIndices[S].values,H=o.getIn(this.data[$],S,N);this.serializableIndices===!0&&H instanceof Date&&(this.data[$][S]=H.getTime(),H=o.getIn(this.data[$],S));var V=F.length===0?0:this.calculateRangeStart(S,H,!0,N);this.binaryIndices[S].values.splice(V,0,$)},j.prototype.adaptiveBinaryIndexUpdate=function($,S){var N,F=this.binaryIndices[S].values,H=F.length;for(N=0;N<H&&F[N]!==$;N++);this.binaryIndices[S].values.splice(N,1),this.adaptiveBinaryIndexInsert($,S)},j.prototype.adaptiveBinaryIndexRemove=function($,S,N){var F=this.binaryIndices[S],H,V,le,ye,Ue={},je,st,wt;if(Array.isArray($))if(ye=$.length,ye===1)$=$[0];else{for(le=0;le<ye;le++)Ue[$[le]]=!0;if(F.values=F.values.filter(function(vt){return!Ue[vt]}),N===!0)return;var mt=$.slice();for(mt.sort(function(vt,Rt){return vt-Rt}),H=F.values.length,V=0;V<H;V++){for(je=F.values[V],st=0,le=0;le<ye&&je>mt[le];le++)st++;F.values[V]-=st}return}if(wt=this.getBinaryIndexPosition($,S),wt===null)return null;if(F.values.splice(wt,1),N!==!0)for(H=F.values.length,V=0;V<H;V++)F.values[V]>$&&F.values[V]--},j.prototype.calculateRangeStart=function($,S,N,F){var H=this.data,V=this.binaryIndices[$].values,le=0,ye=V.length-1,Ue=0;if(V.length===0)return-1;for(o.getIn(H[V[le]],$,F),o.getIn(H[V[ye]],$,F);le<ye;)Ue=le+ye>>1,a.lt(o.getIn(H[V[Ue]],$,F),S,!1)?le=Ue+1:ye=Ue;var je=le;return a.aeq(S,o.getIn(H[V[je]],$,F))?je:a.lt(S,o.getIn(H[V[je]],$,F),!1)?N?je:je-1:N?je+1:je},j.prototype.calculateRangeEnd=function($,S,N){var F=this.data,H=this.binaryIndices[$].values,V=0,le=H.length-1,ye=0;if(H.length===0)return-1;for(o.getIn(F[H[V]],$,N),o.getIn(F[H[le]],$,N);V<le;)ye=V+le>>1,a.lt(S,o.getIn(F[H[ye]],$,N),!1)?le=ye:V=ye+1;var Ue=le;return a.aeq(S,o.getIn(F[H[Ue]],$,N))?Ue:a.gt(S,o.getIn(F[H[Ue]],$,N),!1)?Ue+1:a.aeq(S,o.getIn(F[H[Ue-1]],$,N))?Ue-1:Ue},j.prototype.calculateRange=function($,S,N){var F=this.data,H=this.binaryIndices[S].values,V=0,le=H.length-1,ye,Ue,je;if(F.length===0)return[0,-1];var st=S.indexOf(".")!==-1,wt=o.getIn(F[H[V]],S,st),mt=o.getIn(F[H[le]],S,st);switch($){case"$eq":case"$aeq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$dteq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$gt":if(a.gt(N,mt,!0))return[0,-1];if(a.gt(wt,N,!1))return[V,le];break;case"$gte":if(a.gt(N,mt,!1))return[0,-1];if(a.gt(wt,N,!0))return[V,le];break;case"$lt":if(a.lt(N,wt,!0))return[0,-1];if(a.lt(mt,N,!1))return[V,le];break;case"$lte":if(a.lt(N,wt,!1))return[0,-1];if(a.lt(mt,N,!0))return[V,le];break;case"$between":return a.gt(N[0],mt,!1)?[0,-1]:a.lt(N[1],wt,!1)?[0,-1]:(ye=this.calculateRangeStart(S,N[0],!1,st),je=this.calculateRangeEnd(S,N[1],st),ye<0&&ye++,je>le&&je--,a.gt(o.getIn(F[H[ye]],S,st),N[0],!0)||ye++,a.lt(o.getIn(F[H[je]],S,st),N[1],!0)||je--,je<ye?[0,-1]:[ye,je]);case"$in":for(var vt=[],Rt=[],dr=0,Gr=N.length;dr<Gr;dr++)for(var ct=this.calculateRange("$eq",S,N[dr]),It=ct[0];It<=ct[1];It++)vt[It]===void 0&&(vt[It]=!0,Rt.push(It));return Rt}switch($){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":ye=this.calculateRangeStart(S,N,!1,st),Ue=o.getIn(F[H[ye]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":je=this.calculateRangeEnd(S,N,st),o.getIn(F[H[je]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":return a.aeq(Ue,N)?[ye,je]:[0,-1];case"$gt":return a.aeq(o.getIn(F[H[je]],S,st),N)?[je+1,le]:[je,le];case"$gte":return a.aeq(o.getIn(F[H[ye]],S,st),N)?[ye,le]:[ye+1,le];case"$lt":return a.aeq(o.getIn(F[H[ye]],S,st),N)?[V,ye-1]:[V,ye];case"$lte":return a.aeq(o.getIn(F[H[je]],S,st),N)?[V,je]:[V,je-1];default:return[0,F.length-1]}},j.prototype.by=function($,S){var N;if(S===void 0)return N=this,function(H){return N.by($,H)};var F=this.getUniqueIndex($,!0).get(S);return this.cloneObjects?x(F,this.cloneMethod):F},j.prototype.findOne=function($){$=$||{};var S=this.chain().find($,!0).data();return Array.isArray(S)&&S.length===0?null:this.cloneObjects?x(S[0],this.cloneMethod):S[0]},j.prototype.chain=function($,S){var N=new Q(this);return typeof $>"u"?N:N.transform($,S)},j.prototype.find=function($){return this.chain().find($).data()},j.prototype.findOneUnindexed=function($,S){for(var N=this.data.length,F;N--;)if(o.getIn(this.data[N],$,!0)===S)return F=this.data[N],F;return null},j.prototype.startTransaction=function(){if(this.transactional){this.cachedData=x(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].startTransaction()}},j.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].commit()}},j.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].rollback()}},j.prototype.async=function($,S){setTimeout(function(){if(typeof $=="function")$(),S();else throw new TypeError("Argument passed for async execution is not a function")},0)},j.prototype.where=function($){return this.chain().where($).data()},j.prototype.mapReduce=function($,S){try{return S(this.data.map($))}catch(N){throw N}},j.prototype.eqJoin=function($,S,N,F,H){return new Q(this).eqJoin($,S,N,F,H)},j.prototype.stages={},j.prototype.getStage=function($){return this.stages[$]||(this.stages[$]={}),this.stages[$]},j.prototype.commitLog=[],j.prototype.stage=function($,S){var N=JSON.parse(JSON.stringify(S));return this.getStage($)[S.$loki]=N,N},j.prototype.commitStage=function($,S){var N=this.getStage($),F,H=new Date().getTime();for(F in N)this.update(N[F]),this.commitLog.push({timestamp:H,message:S,data:JSON.parse(JSON.stringify(N[F]))});this.stages[$]={}},j.prototype.no_op=function(){},j.prototype.extract=function($){var S=0,N=this.data.length,F=Z($),H=[];for(S;S<N;S+=1)H.push(Ge(this.data[S],$,F));return H},j.prototype.max=function($){return Math.max.apply(null,this.extract($))},j.prototype.min=function($){return Math.min.apply(null,this.extract($))},j.prototype.maxRecord=function($){var S=0,N=this.data.length,F=Z($),H={index:0,value:void 0},V;for(S;S<N;S+=1)V!==void 0?V<Ge(this.data[S],$,F)&&(V=Ge(this.data[S],$,F),H.index=this.data[S].$loki):(V=Ge(this.data[S],$,F),H.index=this.data[S].$loki);return H.value=V,H},j.prototype.minRecord=function($){var S=0,N=this.data.length,F=Z($),H={index:0,value:void 0},V;for(S;S<N;S+=1)V!==void 0?V>Ge(this.data[S],$,F)&&(V=Ge(this.data[S],$,F),H.index=this.data[S].$loki):(V=Ge(this.data[S],$,F),H.index=this.data[S].$loki);return H.value=V,H},j.prototype.extractNumerical=function($){return this.extract($).map(ie).filter(Number).filter(function(S){return!isNaN(S)})},j.prototype.avg=function($){return Ce(this.extractNumerical($))},j.prototype.stdDev=function($){return ze(this.extractNumerical($))},j.prototype.mode=function($){var S={},N=this.extract($);N.forEach(function(le){S[le]?S[le]+=1:S[le]=1});var F,H,V;for(H in S)F?F<S[H]&&(V=H):(V=H,F=S[H]);return V},j.prototype.median=function($){var S=this.extractNumerical($);S.sort(we);var N=Math.floor(S.length/2);return S.length%2?S[N]:(S[N-1]+S[N])/2};function Z($){return $.indexOf(".")!==-1}function ie($){return parseFloat($,10)}function _e($,S){return $+S}function we($,S){return $-S}function Ce($){return $.reduce(_e,0)/$.length}function ze($){var S=Ce($),N=$.map(function(V){var le=V-S,ye=le*le;return ye}),F=Ce(N),H=Math.sqrt(F);return H}function Ge($,S,N){if(N===!1)return $[S];for(var F=S.split("."),H=$;F.length>0;)H=H[F.shift()];return H}function it($,S,N){for(var F=0,H=$.length,V,le;F<H;){if(le=F+H>>1,V=N.apply(null,[S,$[le]]),V===0)return{found:!0,index:le};V<0?H=le:F=le+1}return{found:!1,index:H}}function xe($){return function(S,N){return it(S,N,$)}}function ge(){}ge.prototype={keys:[],values:[],sort:function($,S){return $<S?-1:$>S?1:0},setSort:function($){this.bs=new xe($)},bs:function(){return new xe(this.sort)},set:function($,S){var N=this.bs(this.keys,$);N.found?this.values[N.index]=S:(this.keys.splice(N.index,0,$),this.values.splice(N.index,0,S))},get:function($){return this.values[it(this.keys,$,this.sort).index]}};function Te($){this.field=$,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}Te.prototype.keyMap={},Te.prototype.lokiMap={},Te.prototype.set=function($){var S=$[this.field];if(S!==null&&typeof S<"u"){if(this.keyMap[S])throw new Error("Duplicate key for property "+this.field+": "+S);this.keyMap[S]=$,this.lokiMap[$.$loki]=S}},Te.prototype.get=function($){return this.keyMap[$]},Te.prototype.byId=function($){return this.keyMap[this.lokiMap[$]]},Te.prototype.update=function($,S){if(this.lokiMap[$.$loki]!==S[this.field]){var N=this.lokiMap[$.$loki];this.set(S),this.keyMap[N]=void 0}else this.keyMap[$[this.field]]=S},Te.prototype.remove=function($){var S=this.keyMap[$];if(S!==null&&typeof S<"u")this.keyMap[$]=void 0,this.lokiMap[S.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},Te.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function Fe($){this.index=Object.create(null),this.field=$}return Fe.prototype={set:function(S,N){this.index[S]?this.index[S].push(N):this.index[S]=[N]},remove:function(S,N){var F=this.index[S];for(var H in F)F[H]==N&&F.splice(H,1);F.length<1&&(this.index[S]=void 0)},get:function(S){return this.index[S]},clear:function(S){this.index={}}},g.deepFreeze=n,g.freeze=i,g.unFreeze=s,g.LokiOps=T,g.Collection=j,g.DynamicView=X,g.Resultset=Q,g.KeyValueStore=ge,g.LokiMemoryAdapter=M,g.LokiPartitioningAdapter=B,g.LokiLocalStorageAdapter=q,g.LokiFsAdapter=L,g.persistenceAdapters={fs:L,localStorage:q},g.aeq=l,g.lt=u,g.gt=f,g.Comparators=a,g}()})})(vW);var cge=vW.exports;const fge=io(cge);class aP{constructor(r,t){oe(this,"map");oe(this,"sortedKeys");oe(this,"compare");this.map=new Map,this.sortedKeys=[],r?typeof r=="string"?this.compare=(n,i)=>t==="desc"?n.value[r]>i.value[r]?-1:n.value[r]<i.value[r]?1:0:n.value[r]>i.value[r]?1:n.value[r]<i.value[r]?-1:0:this.compare=r:this.compare=(n,i)=>n.key>i.key?1:n.key<i.key?-1:0}set(r,t){if(this.map.has(r)){const s=this.sortedKeys.indexOf(r);s!==-1&&this.sortedKeys.splice(s,1)}this.map.set(r,t);let n=0,i=this.sortedKeys.length;for(;n<i;){const s=Math.floor((n+i)/2);this.compare({key:r,value:t},{key:this.sortedKeys[s],value:this.map.get(this.sortedKeys[s])})<0?i=s:n=s+1}this.sortedKeys.splice(n,0,r)}get(r){return this.map.get(r)}*[Symbol.iterator](){for(const r of this.sortedKeys)yield{key:r,value:this.map.get(r)}}*reverse(){for(let r=this.sortedKeys.length-1;r>=0;r--){const t=this.sortedKeys[r];yield{key:t,value:this.map.get(t)}}}*keys(){for(const r of this.sortedKeys)yield r}*values(){for(const r of this.sortedKeys)yield this.map.get(r)}*entries(){for(const r of this.sortedKeys)yield[r,this.map.get(r)]}has(r){return this.map.has(r)}delete(r){if(this.map.delete(r)){const t=this.sortedKeys.indexOf(r);return t!==-1&&this.sortedKeys.splice(t,1),!0}return!1}get size(){return this.map.size}}function uI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function hge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function gW(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function dge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");uI(e.outputLen),uI(e.blockLen)}function pge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function vge(e,r){gW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const OE={number:uI,bool:hge,bytes:gW,hash:dge,exists:pge,output:vge};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yW=e=>e instanceof Uint8Array,CE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Qa=(e,r)=>e<<32-r|e>>>r,gge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!gge)throw new Error("Non little-endian hardware is not supported");const yge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function cI(e){if(!yW(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=yge[e[t]];return r}function mge(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function mW(e){if(typeof e=="string"&&(e=mge(e)),!yW(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let bge=class{clone(){return this._cloneInto()}};function bW(e){const r=n=>e().update(mW(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function wge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let $ge=class extends bge{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=CE(this.buffer)}update(r){OE.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=mW(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=CE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){OE.exists(this),OE.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;wge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=CE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const _ge=(e,r,t)=>e&r^~e&t,xge=(e,r,t)=>e&r^e&t^r&t,Ege=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ic=new Uint32Array(64);let wW=class extends $ge{constructor(){super(64,32,8,!1),this.A=nc[0]|0,this.B=nc[1]|0,this.C=nc[2]|0,this.D=nc[3]|0,this.E=nc[4]|0,this.F=nc[5]|0,this.G=nc[6]|0,this.H=nc[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)ic[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=ic[c-15],y=ic[c-2],w=Qa(p,7)^Qa(p,18)^p>>>3,b=Qa(y,17)^Qa(y,19)^y>>>10;ic[c]=b+ic[c-7]+w+ic[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const p=Qa(a,6)^Qa(a,11)^Qa(a,25),y=f+p+_ge(a,l,u)+Ege[c]+ic[c]|0,b=(Qa(n,2)^Qa(n,13)^Qa(n,22))+xge(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){ic.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Sge=class extends wW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const P_=bW(()=>new wW);bW(()=>new Sge);const LB=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],FB=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function jB(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function kge(e){if(!e)throw new Error("No seed provided");const r=P_(e),t=FB[r[0]%FB.length],n=LB[r[1]%LB.length];return`${jB(t)} ${jB(n)}`}let Tf;const Tge=()=>Tf||(Tf=Me.db.addDynamicView("latest_by_follows",{persist:!0}),Tf.applyFind({kind:1}),Tf.applySimpleSort("created_at",{desc:!0}),Tf.applyWhere(e=>tt.getFollowDistance(e.pubkey)<=1),Tf);let Rd;const Ige=()=>Rd||(Rd=Me.db.addDynamicView("latest_by_everyone",{persist:!0}),Rd.applyFind({kind:1}),Rd.applySimpleSort("created_at",{desc:!0}),Rd),Vw={loaded:!1,saveEvents:$n.throttle(()=>{const e=Tge().data().slice(0,50),r=Ige().data().slice(0,50),t=Me.notifications.eventIds.map(s=>Me.db.by("id",s)).slice(0,50);let n=[];for(const s of Me.directMessagesByUser.values())s.eventIds.forEach(o=>{n.push(Me.db.by("id",o))});n=n.slice(0,100);const i=Array.from(Me.keyValueEvents.values()).slice(0,50);vn.setItem("latestMsgs",e),vn.setItem("latestMsgsByEveryone",r),vn.setItem("notificationEvents",t),vn.setItem("dms",n),vn.setItem("keyValueEvents",i),console.log("saved latestMsgs",e.length),console.log("saved latestMsgsByEveryone",r.length)},5e3),saveProfilesAndFollows:$n.debounce(()=>{const e=de.getPubKey(),r=[Me.db.find({kind:0,pubkey:e}),...Me.db.find({kind:0})],t=Me.db.find({kind:3}).filter(s=>s.pubkey===e||tt.isFollowing(e,s.pubkey)),n=[Me.db.findOne({kind:3,pubkey:e})];let i=0;for(const s of t.map(o=>[JSON.stringify(o).length,o]).sort((o,a)=>o[0]-a[0]))i+s[0]<5e5&&(i+=s[0],n.push(s[1]));vn.setItem("profileEvents",r.slice(0,50)),vn.setItem("followEvents",n.slice(0,50))},5e3),loadEvents:async function(){const e=await vn.getItem("latestMsgs"),r=await vn.getItem("latestMsgsByEveryone"),t=await vn.getItem("followEvents"),n=await vn.getItem("profileEvents"),i=await vn.getItem("notificationEvents"),s=await vn.getItem("dms"),o=await vn.getItem("keyValueEvents");this.loaded=!0,Array.isArray(t)&&t.forEach(a=>Me.handle(a)),Array.isArray(n)&&n.forEach(a=>Me.handle(a)),Array.isArray(e)&&e.forEach(a=>{Me.handle(a)}),Array.isArray(r)&&r.forEach(a=>{Me.handle(a)}),Array.isArray(i)&&i.forEach(a=>{Me.handle(a)}),Array.isArray(s)&&s.forEach(a=>{Me.handle(a)}),Array.isArray(o)&&o.forEach(a=>{Me.handle(a)})}};var fI={exports:{}};(function(e,r){const{hasOwnProperty:t}=Object.prototype,n=T();n.configure=T,n.stringify=n,n.default=n,r.stringify=n,r.configure=T,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(_){return _.length<5e3&&!i.test(_)?`"${_}"`:JSON.stringify(_)}function o(_){if(_.length>200)return _.sort();for(let A=1;A<_.length;A++){const x=_[A];let I=A;for(;I!==0&&_[I-1]>x;)_[I]=_[I-1],I--;_[I]=x}return _}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(_){return a.call(_)!==void 0&&_.length!==0}function u(_,A,x){_.length<x&&(x=_.length);const I=A===","?"":" ";let O=`"0":${I}${_[0]}`;for(let C=1;C<x;C++)O+=`${A}"${C}":${I}${_[C]}`;return O}function f(_){if(t.call(_,"circularValue")){const A=_.circularValue;if(typeof A=="string")return`"${A}"`;if(A==null)return A;if(A===Error||A===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function c(_,A){let x;if(t.call(_,A)&&(x=_[A],typeof x!="boolean"))throw new TypeError(`The "${A}" argument must be of type boolean`);return x===void 0?!0:x}function p(_,A){let x;if(t.call(_,A)){if(x=_[A],typeof x!="number")throw new TypeError(`The "${A}" argument must be of type number`);if(!Number.isInteger(x))throw new TypeError(`The "${A}" argument must be an integer`);if(x<1)throw new RangeError(`The "${A}" argument must be >= 1`)}return x===void 0?1/0:x}function y(_){return _===1?"1 item":`${_} items`}function w(_){const A=new Set;for(const x of _)(typeof x=="string"||typeof x=="number")&&A.add(String(x));return A}function b(_){if(t.call(_,"strict")){const A=_.strict;if(typeof A!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(A)return x=>{let I=`Object can not safely be stringified. Received type ${typeof x}`;throw typeof x!="function"&&(I+=` (${x.toString()})`),new Error(I)}}}function T(_){_={..._};const A=b(_);A&&(_.bigint===void 0&&(_.bigint=!1),"circularValue"in _||(_.circularValue=Error));const x=f(_),I=c(_,"bigint"),O=c(_,"deterministic"),C=p(_,"maximumDepth"),g=p(_,"maximumBreadth");function M(te,X,j,Z,ie,_e){let we=X[te];switch(typeof we=="object"&&we!==null&&typeof we.toJSON=="function"&&(we=we.toJSON(te)),we=Z.call(X,te,we),typeof we){case"string":return s(we);case"object":{if(we===null)return"null";if(j.indexOf(we)!==-1)return x;let Ce="",ze=",";const Ge=_e;if(Array.isArray(we)){if(we.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(we),ie!==""&&(_e+=ie,Ce+=`
${_e}`,ze=`,
${_e}`);const $=Math.min(we.length,g);let S=0;for(;S<$-1;S++){const F=M(String(S),we,j,Z,ie,_e);Ce+=F!==void 0?F:"null",Ce+=ze}const N=M(String(S),we,j,Z,ie,_e);if(Ce+=N!==void 0?N:"null",we.length-1>g){const F=we.length-g-1;Ce+=`${ze}"... ${y(F)} not stringified"`}return ie!==""&&(Ce+=`
${Ge}`),j.pop(),`[${Ce}]`}let it=Object.keys(we);const xe=it.length;if(xe===0)return"{}";if(C<j.length+1)return'"[Object]"';let ge="",Te="";ie!==""&&(_e+=ie,ze=`,
${_e}`,ge=" ");const Fe=Math.min(xe,g);O&&!l(we)&&(it=o(it)),j.push(we);for(let $=0;$<Fe;$++){const S=it[$],N=M(S,we,j,Z,ie,_e);N!==void 0&&(Ce+=`${Te}${s(S)}:${ge}${N}`,Te=ze)}if(xe>g){const $=xe-g;Ce+=`${Te}"...":${ge}"${y($)} not stringified"`,Te=ze}return ie!==""&&Te.length>1&&(Ce=`
${_e}${Ce}
${Ge}`),j.pop(),`{${Ce}}`}case"number":return isFinite(we)?String(we):A?A(we):"null";case"boolean":return we===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(we);default:return A?A(we):void 0}}function B(te,X,j,Z,ie,_e){switch(typeof X=="object"&&X!==null&&typeof X.toJSON=="function"&&(X=X.toJSON(te)),typeof X){case"string":return s(X);case"object":{if(X===null)return"null";if(j.indexOf(X)!==-1)return x;const we=_e;let Ce="",ze=",";if(Array.isArray(X)){if(X.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(X),ie!==""&&(_e+=ie,Ce+=`
${_e}`,ze=`,
${_e}`);const xe=Math.min(X.length,g);let ge=0;for(;ge<xe-1;ge++){const Fe=B(String(ge),X[ge],j,Z,ie,_e);Ce+=Fe!==void 0?Fe:"null",Ce+=ze}const Te=B(String(ge),X[ge],j,Z,ie,_e);if(Ce+=Te!==void 0?Te:"null",X.length-1>g){const Fe=X.length-g-1;Ce+=`${ze}"... ${y(Fe)} not stringified"`}return ie!==""&&(Ce+=`
${we}`),j.pop(),`[${Ce}]`}j.push(X);let Ge="";ie!==""&&(_e+=ie,ze=`,
${_e}`,Ge=" ");let it="";for(const xe of Z){const ge=B(xe,X[xe],j,Z,ie,_e);ge!==void 0&&(Ce+=`${it}${s(xe)}:${Ge}${ge}`,it=ze)}return ie!==""&&it.length>1&&(Ce=`
${_e}${Ce}
${we}`),j.pop(),`{${Ce}}`}case"number":return isFinite(X)?String(X):A?A(X):"null";case"boolean":return X===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(X);default:return A?A(X):void 0}}function L(te,X,j,Z,ie){switch(typeof X){case"string":return s(X);case"object":{if(X===null)return"null";if(typeof X.toJSON=="function"){if(X=X.toJSON(te),typeof X!="object")return L(te,X,j,Z,ie);if(X===null)return"null"}if(j.indexOf(X)!==-1)return x;const _e=ie;if(Array.isArray(X)){if(X.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(X),ie+=Z;let ge=`
${ie}`;const Te=`,
${ie}`,Fe=Math.min(X.length,g);let $=0;for(;$<Fe-1;$++){const N=L(String($),X[$],j,Z,ie);ge+=N!==void 0?N:"null",ge+=Te}const S=L(String($),X[$],j,Z,ie);if(ge+=S!==void 0?S:"null",X.length-1>g){const N=X.length-g-1;ge+=`${Te}"... ${y(N)} not stringified"`}return ge+=`
${_e}`,j.pop(),`[${ge}]`}let we=Object.keys(X);const Ce=we.length;if(Ce===0)return"{}";if(C<j.length+1)return'"[Object]"';ie+=Z;const ze=`,
${ie}`;let Ge="",it="",xe=Math.min(Ce,g);l(X)&&(Ge+=u(X,ze,g),we=we.slice(X.length),xe-=X.length,it=ze),O&&(we=o(we)),j.push(X);for(let ge=0;ge<xe;ge++){const Te=we[ge],Fe=L(Te,X[Te],j,Z,ie);Fe!==void 0&&(Ge+=`${it}${s(Te)}: ${Fe}`,it=ze)}if(Ce>g){const ge=Ce-g;Ge+=`${it}"...": "${y(ge)} not stringified"`,it=ze}return it!==""&&(Ge=`
${ie}${Ge}
${_e}`),j.pop(),`{${Ge}}`}case"number":return isFinite(X)?String(X):A?A(X):"null";case"boolean":return X===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(X);default:return A?A(X):void 0}}function q(te,X,j){switch(typeof X){case"string":return s(X);case"object":{if(X===null)return"null";if(typeof X.toJSON=="function"){if(X=X.toJSON(te),typeof X!="object")return q(te,X,j);if(X===null)return"null"}if(j.indexOf(X)!==-1)return x;let Z="";if(Array.isArray(X)){if(X.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(X);const ze=Math.min(X.length,g);let Ge=0;for(;Ge<ze-1;Ge++){const xe=q(String(Ge),X[Ge],j);Z+=xe!==void 0?xe:"null",Z+=","}const it=q(String(Ge),X[Ge],j);if(Z+=it!==void 0?it:"null",X.length-1>g){const xe=X.length-g-1;Z+=`,"... ${y(xe)} not stringified"`}return j.pop(),`[${Z}]`}let ie=Object.keys(X);const _e=ie.length;if(_e===0)return"{}";if(C<j.length+1)return'"[Object]"';let we="",Ce=Math.min(_e,g);l(X)&&(Z+=u(X,",",g),ie=ie.slice(X.length),Ce-=X.length,we=","),O&&(ie=o(ie)),j.push(X);for(let ze=0;ze<Ce;ze++){const Ge=ie[ze],it=q(Ge,X[Ge],j);it!==void 0&&(Z+=`${we}${s(Ge)}:${it}`,we=",")}if(_e>g){const ze=_e-g;Z+=`${we}"...":"${y(ze)} not stringified"`}return j.pop(),`{${Z}}`}case"number":return isFinite(X)?String(X):A?A(X):"null";case"boolean":return X===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(X);default:return A?A(X):void 0}}function Q(te,X,j){if(arguments.length>1){let Z="";if(typeof j=="number"?Z=" ".repeat(Math.min(j,10)):typeof j=="string"&&(Z=j.slice(0,10)),X!=null){if(typeof X=="function")return M("",{"":te},[],X,Z,"");if(Array.isArray(X))return B("",te,[],w(X),Z,"")}if(Z.length!==0)return L("",te,[],Z,"")}return q("",te,[])}return Q}})(fI,fI.exports);var Age=fI.exports;const $W=io(Age);$W.configure;const Oge=$W;function hI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Cge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function _W(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Pge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hI(e.outputLen),hI(e.blockLen)}function Nge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Rge(e,r){_W(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Zf={number:hI,bool:Cge,bytes:_W,hash:Pge,exists:Nge,output:Rge},PE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),el=(e,r)=>e<<32-r|e>>>r,Dge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Dge)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Bge(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function lP(e){if(typeof e=="string"&&(e=Bge(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Mge(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let xW=class{clone(){return this._cloneInto()}};function EW(e){const r=n=>e().update(lP(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function SW(e=32){if(PE&&typeof PE.getRandomValues=="function")return PE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Lge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let Fge=class extends xW{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=NE(this.buffer)}update(r){Zf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=lP(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=NE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Zf.exists(this),Zf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Lge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=NE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const jge=(e,r,t)=>e&r^~e&t,Hge=(e,r,t)=>e&r^e&t^r&t,zge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),oc=new Uint32Array(64);let kW=class extends Fge{constructor(){super(64,32,8,!1),this.A=sc[0]|0,this.B=sc[1]|0,this.C=sc[2]|0,this.D=sc[3]|0,this.E=sc[4]|0,this.F=sc[5]|0,this.G=sc[6]|0,this.H=sc[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)oc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=oc[c-15],y=oc[c-2],w=el(p,7)^el(p,18)^p>>>3,b=el(y,17)^el(y,19)^y>>>10;oc[c]=b+oc[c-7]+w+oc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const p=el(a,6)^el(a,11)^el(a,25),y=f+p+jge(a,l,u)+zge[c]+oc[c]|0,b=(el(n,2)^el(n,13)^el(n,22))+Hge(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){oc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Uge=class extends kW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Gw=EW(()=>new kW);EW(()=>new Uge);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TW=BigInt(0),N_=BigInt(1),Wge=BigInt(2),R_=e=>e instanceof Uint8Array,qge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function qp(e){if(!R_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=qge[e[t]];return r}function IW(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function uP(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Kp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");r[t]=s}return r}function us(e){return uP(qp(e))}function cP(e){if(!R_(e))throw new Error("Uint8Array expected");return uP(qp(Uint8Array.from(e).reverse()))}const Ac=(e,r)=>Kp(e.toString(16).padStart(r*2,"0")),AW=(e,r)=>Ac(e,r).reverse(),Kge=e=>Kp(IW(e));function Ai(e,r,t){let n;if(typeof r=="string")try{n=Kp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(R_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Ys(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!R_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Vge(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function D_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Gge(e){let r;for(r=0;e>TW;e>>=N_,r+=1);return r}const Yge=(e,r)=>e>>BigInt(r)&N_,Zge=(e,r,t)=>e|(t?N_:TW)<<BigInt(r),fP=e=>(Wge<<BigInt(e-1))-N_,RE=e=>new Uint8Array(e),HB=e=>Uint8Array.from(e);function OW(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=RE(e),i=RE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=RE())=>{i=a(HB([0]),c),n=a(),c.length!==0&&(i=a(HB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const p=[];for(;c<r;){n=a();const y=n.slice();p.push(y),c+=n.length}return Ys(...p)};return(c,p)=>{o(),l(c);let y;for(;!(y=p(u()));)l();return o(),y}}const Xge={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function bv(e,r,t={}){const n=(i,s,o)=>{const a=Xge[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Jge=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Yge,bitLen:Gge,bitMask:fP,bitSet:Zge,bytesToHex:qp,bytesToNumberBE:us,bytesToNumberLE:cP,concatBytes:Ys,createHmacDrbg:OW,ensureBytes:Ai,equalBytes:Vge,hexToBytes:Kp,hexToNumber:uP,numberToBytesBE:Ac,numberToBytesLE:AW,numberToHexUnpadded:IW,numberToVarBytesBE:Kge,utf8ToBytes:D_,validateObject:bv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mi=BigInt(0),Rn=BigInt(1),Ff=BigInt(2),Qge=BigInt(3),dI=BigInt(4),zB=BigInt(5),UB=BigInt(8);BigInt(9);BigInt(16);function ni(e,r){const t=e%r;return t>=mi?t:r+t}function eye(e,r,t){if(t<=mi||r<mi)throw new Error("Expected power/modulo > 0");if(t===Rn)return mi;let n=Rn;for(;r>mi;)r&Rn&&(n=n*e%t),e=e*e%t,r>>=Rn;return n}function Ao(e,r,t){let n=e;for(;r-- >mi;)n*=n,n%=t;return n}function pI(e,r){if(e===mi||r<=mi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ni(e,r),n=r,i=mi,s=Rn;for(;t!==mi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Rn)throw new Error("invert: does not exist");return ni(i,r)}function tye(e){const r=(e-Rn)/Ff;let t,n,i;for(t=e-Rn,n=0;t%Ff===mi;t/=Ff,n++);for(i=Ff;i<e&&eye(i,r,e)!==e-Rn;i++);if(n===1){const o=(e+Rn)/dI;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Rn)/Ff;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(p);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Rn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),p=a.mul(p,f),u=y}return c}}function rye(e){if(e%dI===Qge){const r=(e+Rn)/dI;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%UB===zB){const r=(e-zB)/UB;return function(n,i){const s=n.mul(i,Ff),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Ff),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return tye(e)}const nye=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function CW(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=nye.reduce((n,i)=>(n[i]="function",n),r);return bv(e,t)}function iye(e,r,t){if(t<mi)throw new Error("Expected power > 0");if(t===mi)return e.ONE;if(t===Rn)return r;let n=e.ONE,i=r;for(;t>mi;)t&Rn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Rn;return n}function sye(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function hP(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function oye(e,r,t=!1,n={}){if(e<=mi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=hP(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=rye(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:fP(i),ZERO:mi,ONE:Rn,create:l=>ni(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return mi<=l&&l<e},is0:l=>l===mi,isOdd:l=>(l&Rn)===Rn,neg:l=>ni(-l,e),eql:(l,u)=>l===u,sqr:l=>ni(l*l,e),add:(l,u)=>ni(l+u,e),sub:(l,u)=>ni(l-u,e),mul:(l,u)=>ni(l*u,e),pow:(l,u)=>iye(a,l,u),div:(l,u)=>ni(l*pI(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>pI(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>sye(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?AW(l,s):Ac(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?cP(l):us(l)}});return Object.freeze(a)}function aye(e,r,t=!1){e=Ai("privateHash",e);const n=e.length,i=hP(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?cP(e):us(e);return ni(s,r-Rn)+Rn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lye=BigInt(0),DE=BigInt(1);function uye(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>lye;)s&DE&&(o=o.add(a)),a=a.double(),s>>=DE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let p=1;p<a;p++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=p,o+=DE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function PW(e){return CW(e.Fp),bv(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hP(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cye(e){const r=PW(e);bv(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:fye,hexToBytes:hye}=Jge,Xf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Xf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:fye(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Xf,t=typeof e=="string"?hye(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Xf._parseInt(t.subarray(2)),{d:o,l:a}=Xf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},wa=BigInt(0),jn=BigInt(1),Wl=BigInt(2),Yw=BigInt(3),WB=BigInt(4);function dye(e){const r=cye(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Ys(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&wa<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=qp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:us(Ai("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=ni(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ai("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,Yw),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),L=t.mul(I,I),q=t.mul(A,x);return q=t.add(q,q),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,L),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(q,O),g=t.mul(_,g),L=t.mul(b,L),q=t.sub(M,L),q=t.mul(b,q),q=t.add(q,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,L),M=t.mul(M,q),C=t.add(C,M),L=t.mul(x,I),L=t.add(L,L),M=t.mul(L,q),O=t.sub(O,M),g=t.mul(L,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,L=t.mul(r.b,Yw);let q=t.mul(T,x),Q=t.mul(_,I),te=t.mul(A,O),X=t.add(T,_),j=t.add(x,I);X=t.mul(X,j),j=t.add(q,Q),X=t.sub(X,j),j=t.add(T,A);let Z=t.add(x,O);return j=t.mul(j,Z),Z=t.add(q,te),j=t.sub(j,Z),Z=t.add(_,A),C=t.add(I,O),Z=t.mul(Z,C),C=t.add(Q,te),Z=t.sub(Z,C),M=t.mul(B,j),C=t.mul(L,te),M=t.add(C,M),C=t.sub(Q,M),M=t.add(Q,M),g=t.mul(C,M),Q=t.add(q,q),Q=t.add(Q,q),te=t.mul(B,te),j=t.mul(L,j),Q=t.add(Q,te),te=t.sub(q,te),te=t.mul(B,te),j=t.add(j,te),q=t.mul(Q,j),g=t.add(g,q),q=t.mul(Z,j),C=t.mul(X,C),C=t.sub(C,q),q=t.mul(X,Q),M=t.mul(Z,M),M=t.add(M,q),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===wa)return T;if(a(b),b===jn)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>wa||O>wa;)x&jn&&(C=C.add(M)),O&jn&&(g=g.add(M)),M=M.double(),x>>=jn,O>>=jn;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:L,f:q}=this.wNAF(g);M=y.constTimeNegate(I,M),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,x.beta),L.py,L.pz),_=M.add(L),A=B.add(q)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===wa||C===jn||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===jn)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===jn?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return qp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const p=r.nBitLength,y=uye(c,r.endo?Math.ceil(p/2):p);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function pye(e){const r=PW(e);return bv(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function vye(e){const r=pye(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return wa<j&&j<t.ORDER}function a(j){return ni(j,n)}function l(j){return pI(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:p}=dye({...r,toBytes(j,Z,ie){const _e=Z.toAffine(),we=t.toBytes(_e.x),Ce=Ys;return ie?Ce(Uint8Array.from([Z.hasEvenY()?2:3]),we):Ce(Uint8Array.from([4]),we,t.toBytes(_e.y))},fromBytes(j){const Z=j.length,ie=j[0],_e=j.subarray(1);if(Z===i&&(ie===2||ie===3)){const we=us(_e);if(!o(we))throw new Error("Point is not on curve");const Ce=c(we);let ze=t.sqrt(Ce);const Ge=(ze&jn)===jn;return(ie&1)===1!==Ge&&(ze=t.neg(ze)),{x:we,y:ze}}else if(Z===s&&ie===4){const we=t.fromBytes(_e.subarray(0,t.BYTES)),Ce=t.fromBytes(_e.subarray(t.BYTES,2*t.BYTES));return{x:we,y:Ce}}else throw new Error(`Point of length ${Z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>qp(Ac(j,r.nByteLength));function w(j){const Z=n>>jn;return j>Z}function b(j){return w(j)?a(-j):j}const T=(j,Z,ie)=>us(j.slice(Z,ie));class _{constructor(Z,ie,_e){this.r=Z,this.s=ie,this.recovery=_e,this.assertValidity()}static fromCompact(Z){const ie=r.nByteLength;return Z=Ai("compactSignature",Z,ie*2),new _(T(Z,0,ie),T(Z,ie,2*ie))}static fromDER(Z){const{r:ie,s:_e}=Xf.toSig(Ai("DER",Z));return new _(ie,_e)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new _(this.r,this.s,Z)}recoverPublicKey(Z){const{r:ie,s:_e,recovery:we}=this,Ce=g(Ai("msgHash",Z));if(we==null||![0,1,2,3].includes(we))throw new Error("recovery id invalid");const ze=we===2||we===3?ie+r.n:ie;if(ze>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ge=we&1?"03":"02",it=u.fromHex(Ge+y(ze)),xe=l(ze),ge=a(-Ce*xe),Te=a(_e*xe),Fe=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!Fe)throw new Error("point at infinify");return Fe.assertValidity(),Fe}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Kp(this.toDERHex())}toDERHex(){return Xf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Kp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),Z=aye(j,n);return Ac(Z,r.nByteLength)},precompute(j=8,Z=u.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function x(j,Z=!0){return u.fromPrivateKey(j).toRawBytes(Z)}function I(j){const Z=j instanceof Uint8Array,ie=typeof j=="string",_e=(Z||ie)&&j.length;return Z?_e===i||_e===s:ie?_e===2*i||_e===2*s:j instanceof u}function O(j,Z,ie=!0){if(I(j))throw new Error("first arg must be private key");if(!I(Z))throw new Error("second arg must be public key");return u.fromHex(Z).multiply(f(j)).toRawBytes(ie)}const C=r.bits2int||function(j){const Z=us(j),ie=j.length*8-r.nBitLength;return ie>0?Z>>BigInt(ie):Z},g=r.bits2int_modN||function(j){return a(C(j))},M=fP(r.nBitLength);function B(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(wa<=j&&j<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Ac(j,r.nByteLength)}function L(j,Z,ie=q){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:_e,randomBytes:we}=r;let{lowS:Ce,prehash:ze,extraEntropy:Ge}=ie;Ce==null&&(Ce=!0),j=Ai("msgHash",j),ze&&(j=Ai("prehashed msgHash",_e(j)));const it=g(j),xe=f(Z),ge=[B(xe),B(it)];if(Ge!=null){const S=Ge===!0?we(t.BYTES):Ge;ge.push(Ai("extraEntropy",S,t.BYTES))}const Te=Ys(...ge),Fe=it;function $(S){const N=C(S);if(!p(N))return;const F=l(N),H=u.BASE.multiply(N).toAffine(),V=a(H.x);if(V===wa)return;const le=a(F*a(Fe+V*xe));if(le===wa)return;let ye=(H.x===V?0:2)|Number(H.y&jn),Ue=le;return Ce&&w(le)&&(Ue=b(le),ye^=1),new _(V,Ue,ye)}return{seed:Te,k2sig:$}}const q={lowS:r.lowS,prehash:!1},Q={lowS:r.lowS,prehash:!1};function te(j,Z,ie=q){const{seed:_e,k2sig:we}=L(j,Z,ie);return OW(r.hash.outputLen,r.nByteLength,r.hmac)(_e,we)}u.BASE._setWindowSize(8);function X(j,Z,ie,_e=Q){var H;const we=j;if(Z=Ai("msgHash",Z),ie=Ai("publicKey",ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:ze}=_e;let Ge,it;try{if(typeof we=="string"||we instanceof Uint8Array)try{Ge=_.fromDER(we)}catch(V){if(!(V instanceof Xf.Err))throw V;Ge=_.fromCompact(we)}else if(typeof we=="object"&&typeof we.r=="bigint"&&typeof we.s=="bigint"){const{r:V,s:le}=we;Ge=new _(V,le)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&Ge.hasHighS())return!1;ze&&(Z=r.hash(Z));const{r:xe,s:ge}=Ge,Te=g(Z),Fe=l(ge),$=a(Te*Fe),S=a(xe*Fe),N=(H=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:H.toAffine();return N?a(N.x)===xe:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:te,verify:X,ProjectivePoint:u,Signature:_,utils:A}}function gye(e,r){const t=e.ORDER;let n=wa;for(let p=t-jn;p%Wl===wa;p/=Wl)n+=jn;const i=n,s=(t-jn)/Wl**i,o=(s-jn)/Wl,a=Wl**i-jn,l=Wl**(i-jn),u=e.pow(r,s),f=e.pow(r,(s+jn)/Wl);let c=(p,y)=>{let w=u,b=e.pow(y,a),T=e.sqr(b);T=e.mul(T,y);let _=e.mul(p,T);_=e.pow(_,o),_=e.mul(_,b),b=e.mul(_,y),T=e.mul(_,p);let A=e.mul(T,b);_=e.pow(A,l);let x=e.eql(_,e.ONE);b=e.mul(T,f),_=e.mul(A,w),T=e.cmov(b,T,x),A=e.cmov(_,A,x);for(let I=i;I>jn;I--){let O=Wl**(I-Wl),C=e.pow(A,O);const g=e.eql(C,e.ONE);b=e.mul(T,w),w=e.mul(w,w),C=e.mul(A,w),T=e.cmov(b,T,g),A=e.cmov(C,A,g)}return{isValid:x,value:T}};if(e.ORDER%WB===Yw){const p=(e.ORDER-Yw)/WB,y=e.sqrt(e.neg(r));c=(w,b)=>{let T=e.sqr(b);const _=e.mul(w,b);T=e.mul(T,_);let A=e.pow(T,p);A=e.mul(A,_);const x=e.mul(A,y),I=e.mul(e.sqr(A),b),O=e.eql(I,w);let C=e.cmov(x,A,O);return{isValid:O,value:C}}}return c}function yye(e,r){if(CW(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=gye(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,f,c;i=e.sqr(n),i=e.mul(i,r.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,r.B),a=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,r.A),s=e.sqr(o),u=e.sqr(a),l=e.mul(u,r.A),s=e.add(s,l),s=e.mul(s,o),u=e.mul(u,a),l=e.mul(u,r.B),s=e.add(s,l),f=e.mul(i,o);const{isValid:p,value:y}=t(s,u);c=e.mul(i,n),c=e.mul(c,y),f=e.cmov(f,o,p),c=e.cmov(c,y,p);const w=e.isOdd(n)===e.isOdd(c);return c=e.cmov(e.neg(c),c,w),f=e.div(f,a),{x:f,y:c}}}function mye(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return D_(e);throw new Error("DST must be Uint8Array or string")}const bye=us;function yc(e,r){if(e<0||e>=1<<8*r)throw new Error(`bad I2OSP call: value=${e} length=${r}`);const t=Array.from({length:r}).fill(0);for(let n=r-1;n>=0;n--)t[n]=e&255,e>>>=8;return new Uint8Array(t)}function wye(e,r){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function jy(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function dP(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function $ye(e,r,t,n){jy(e),jy(r),dP(t),r.length>255&&(r=n(Ys(D_("H2C-OVERSIZE-DST-"),r)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(t/i);if(o>255)throw new Error("Invalid xmd length");const a=Ys(r,yc(r.length,1)),l=yc(0,s),u=yc(t,2),f=new Array(o),c=n(Ys(l,e,u,yc(0,1),a));f[0]=n(Ys(c,yc(1,1),a));for(let y=1;y<=o;y++){const w=[wye(c,f[y-1]),yc(y+1,1),a];f[y]=n(Ys(...w))}return Ys(...f).slice(0,t)}function _ye(e,r,t,n,i){if(jy(e),jy(r),dP(t),r.length>255){const s=Math.ceil(2*n/8);r=i.create({dkLen:s}).update(D_("H2C-OVERSIZE-DST-")).update(r).digest()}if(t>65535||r.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(e).update(yc(t,2)).update(r).update(yc(r.length,1)).digest()}function qB(e,r,t){bv(t,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:l}=t;jy(e),dP(r);const u=mye(l),f=n.toString(2).length,c=Math.ceil((f+i)/8),p=r*s*c;let y;if(a==="xmd")y=$ye(e,u,p,o);else if(a==="xof")y=_ye(e,u,p,i,o);else if(a==="_internal_pass")y=e;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(r);for(let b=0;b<r;b++){const T=new Array(s);for(let _=0;_<s;_++){const A=c*(_+b*s),x=y.subarray(A,A+c);T[_]=ni(bye(x),n)}w[b]=T}return w}function xye(e,r){const t=r.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,l]=t.map(u=>u.reduce((f,c)=>e.add(e.mul(f,n),c)));return n=e.div(s,o),i=e.mul(i,e.div(a,l)),{x:n,y:i}}}function Eye(e,r,t){if(typeof r!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=qB(n,2,{...t,DST:t.DST,...i}),o=e.fromAffine(r(s[0])),a=e.fromAffine(r(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=qB(n,1,{...t,DST:t.encodeDST,...i}),o=e.fromAffine(r(s[0])).clearCofactor();return o.assertValidity(),o}}}let NW=class extends xW{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Zf.hash(r);const n=lP(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Zf.exists(this),this.iHash.update(r),this}digestInto(r){Zf.exists(this),Zf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const RW=(e,r,t)=>new NW(e,r).update(t).digest();RW.create=(e,r)=>new NW(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sye(e){return{hash:e,hmac:(r,...t)=>RW(e,r,Mge(...t)),randomBytes:SW}}function kye(e,r){const t=n=>vye({...e,...Sye(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),DW=BigInt(1),Xw=BigInt(2),KB=(e,r)=>(e+r/Xw)/r;function BW(e){const r=B_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=Ao(f,t,r)*f%r,p=Ao(c,t,r)*f%r,y=Ao(p,Xw,r)*u%r,w=Ao(y,i,r)*y%r,b=Ao(w,s,r)*w%r,T=Ao(b,a,r)*b%r,_=Ao(T,l,r)*T%r,A=Ao(_,a,r)*b%r,x=Ao(A,t,r)*f%r,I=Ao(x,o,r)*w%r,O=Ao(I,n,r)*u%r,C=Ao(O,Xw,r);if(!Lc.eql(Lc.sqr(C),e))throw new Error("Cannot find square root");return C}const Lc=oye(B_,void 0,void 0,{sqrt:BW}),ns=kye({a:BigInt(0),b:BigInt(7),Fp:Lc,n:Zw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Zw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-DW*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=KB(s*e,r),l=KB(-n*e,r);let u=ni(e-a*t-l*i,r),f=ni(-a*n-l*s,r);const c=u>o,p=f>o;if(c&&(u=r-u),p&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:p,k2:f}}}},Gw),M_=BigInt(0),MW=e=>typeof e=="bigint"&&M_<e&&e<B_,Tye=e=>typeof e=="bigint"&&M_<e&&e<Zw,VB={};function Jw(e,...r){let t=VB[e];if(t===void 0){const n=Gw(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Ys(n,n),VB[e]=t}return Gw(Ys(t,...r))}const pP=e=>e.toRawBytes(!0).slice(1),vI=e=>Ac(e,32),BE=e=>ni(e,B_),Hy=e=>ni(e,Zw),vP=ns.ProjectivePoint,Iye=(e,r,t)=>vP.BASE.multiplyAndAddUnsafe(e,r,t);function gI(e){let r=ns.utils.normPrivateKeyToScalar(e),t=vP.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Hy(-r),bytes:pP(t)}}function LW(e){if(!MW(e))throw new Error("bad x: need 0 < x < p");const r=BE(e*e),t=BE(r*e+BigInt(7));let n=BW(t);n%Xw!==M_&&(n=BE(-n));const i=new vP(e,n,DW);return i.assertValidity(),i}function FW(...e){return Hy(us(Jw("BIP0340/challenge",...e)))}function Aye(e){return gI(e).bytes}function Oye(e,r,t=SW(32)){const n=Ai("message",e),{bytes:i,scalar:s}=gI(r),o=Ai("auxRand",t,32),a=vI(s^us(Jw("BIP0340/aux",o))),l=Jw("BIP0340/nonce",a,i,n),u=Hy(us(l));if(u===M_)throw new Error("sign failed: k is zero");const{bytes:f,scalar:c}=gI(u),p=FW(f,i,n),y=new Uint8Array(64);if(y.set(f,0),y.set(vI(Hy(c+p*s)),32),!jW(y,n,i))throw new Error("sign: Invalid signature produced");return y}function jW(e,r,t){const n=Ai("signature",e,64),i=Ai("message",r),s=Ai("publicKey",t,32);try{const o=LW(us(s)),a=us(n.subarray(0,32));if(!MW(a))return!1;const l=us(n.subarray(32,64));if(!Tye(l))return!1;const u=FW(vI(a),pP(o),i),f=Iye(o,l,Hy(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const Pm={getPublicKey:Aye,sign:Oye,verify:jW,utils:{randomPrivateKey:ns.utils.randomPrivateKey,lift_x:LW,pointToBytes:pP,numberToBytesBE:Ac,bytesToNumberBE:us,taggedHash:Jw,mod:ni}},Cye=xye(Lc,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(r=>BigInt(r)))),Pye=yye(Lc,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Lc.create(BigInt("-11"))});Eye(ns.ProjectivePoint,e=>{const{x:r,y:t}=Pye(Lc.create(e[0]));return Cye(r,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Lc.ORDER,m:1,k:128,expand:"xmd",hash:Gw});const J1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Nye=Object.freeze(Object.defineProperty({__proto__:null,crypto:J1},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rye=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Dye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ah=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),fa=(e,r)=>e<<32-r|e>>>r,HW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!HW)throw new Error("Non little-endian hardware is not supported");const Bye=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Zs(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Bye[e[t]];return r}function Fc(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}const zW=async()=>{};async function Mye(e,r,t){let n=Date.now();for(let i=0;i<e;i++){t(i);const s=Date.now()-n;s>=0&&s<r||(await zW(),n+=s)}}function gP(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Nm(e){if(typeof e=="string"&&(e=gP(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function ip(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let yP=class{clone(){return this._cloneInto()}};const Lye=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function Fye(e,r){if(r!==void 0&&(typeof r!="object"||!Lye(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function L_(e){const r=n=>e().update(Nm(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function jye(e){const r=(n,i)=>e(i).update(Nm(n)).digest(),t=e({});return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=n=>e(n),r}function UW(e=32){if(J1&&typeof J1.getRandomValues=="function")return J1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Hye=Object.freeze(Object.defineProperty({__proto__:null,Hash:yP,asyncLoop:Mye,bytesToHex:Zs,checkOpts:Fye,concatBytes:ip,createView:ah,hexToBytes:Fc,isLE:HW,nextTick:zW,randomBytes:UW,rotr:fa,toBytes:Nm,u32:Dye,u8:Rye,utf8ToBytes:gP,wrapConstructor:L_,wrapConstructorWithOpts:jye},Symbol.toStringTag,{value:"Module"}));function yI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function zye(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function WW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Uye(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");yI(e.outputLen),yI(e.blockLen)}function Wye(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function qye(e,r){WW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Jf={number:yI,bool:zye,bytes:WW,hash:Uye,exists:Wye,output:qye};function Kye(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let qW=class extends yP{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=ah(this.buffer)}update(r){Jf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Nm(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=ah(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Jf.exists(this),Jf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Kye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=ah(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Vye=(e,r,t)=>e&r^~e&t,Gye=(e,r,t)=>e&r^e&t^r&t,Yye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ac=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lc=new Uint32Array(64);class KW extends qW{constructor(){super(64,32,8,!1),this.A=ac[0]|0,this.B=ac[1]|0,this.C=ac[2]|0,this.D=ac[3]|0,this.E=ac[4]|0,this.F=ac[5]|0,this.G=ac[6]|0,this.H=ac[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)lc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const p=lc[c-15],y=lc[c-2],w=fa(p,7)^fa(p,18)^p>>>3,b=fa(y,17)^fa(y,19)^y>>>10;lc[c]=b+lc[c-7]+w+lc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const p=fa(a,6)^fa(a,11)^fa(a,25),y=f+p+Vye(a,l,u)+Yye[c]+lc[c]|0,b=(fa(n,2)^fa(n,13)^fa(n,22))+Gye(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){lc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Zye extends KW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const wv=L_(()=>new KW),Xye=L_(()=>new Zye),Jye=Object.freeze(Object.defineProperty({__proto__:null,sha224:Xye,sha256:wv},Symbol.toStringTag,{value:"Module"}));var mP={};Object.defineProperty(mP,"__esModule",{value:!0});var bP=mP.wordlist=void 0;bP=mP.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Xs={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.output=hi.exists=hi.hash=Xd=hi.bytes=hi.bool=hi.number=void 0;function Qw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}hi.number=Qw;function VW(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}hi.bool=VW;function wP(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}var Xd=hi.bytes=wP;function GW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qw(e.outputLen),Qw(e.blockLen)}hi.hash=GW;function YW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}hi.exists=YW;function ZW(e,r){wP(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}hi.output=ZW;const Qye={number:Qw,bool:VW,bytes:wP,hash:GW,exists:YW,output:ZW};hi.default=Qye;var Vp={},XW={},Rm={};const eme=vv(Nye);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=eme,t=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);e.u8=t;const n=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));e.u32=n;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);e.createView=i;const s=(I,O)=>I<<32-O|I>>>O;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(I,O)=>O.toString(16).padStart(2,"0"));function a(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let O="";for(let C=0;C<I.length;C++)O+=o[I[C]];return O}e.bytesToHex=a;function l(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const O=new Uint8Array(I.length/2);for(let C=0;C<O.length;C++){const g=C*2,M=I.slice(g,g+2),B=Number.parseInt(M,16);if(Number.isNaN(B)||B<0)throw new Error("Invalid byte sequence");O[C]=B}return O}e.hexToBytes=l;const u=async()=>{};e.nextTick=u;async function f(I,O,C){let g=Date.now();for(let M=0;M<I;M++){C(M);const B=Date.now()-g;B>=0&&B<O||(await(0,e.nextTick)(),g+=B)}}e.asyncLoop=f;function c(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}e.utf8ToBytes=c;function p(I){if(typeof I=="string"&&(I=c(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}e.toBytes=p;function y(...I){if(!I.every(g=>g instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const O=I.reduce((g,M)=>g+M.length,0),C=new Uint8Array(O);for(let g=0,M=0;g<I.length;g++){const B=I[g];C.set(B,M),M+=B.length}return C}e.concatBytes=y;class w{clone(){return this._cloneInto()}}e.Hash=w;const b=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function T(I,O){if(O!==void 0&&(typeof O!="object"||!b(O)))throw new TypeError("Options should be object or undefined");return Object.assign(I,O)}e.checkOpts=T;function _(I){const O=g=>I().update(p(g)).digest(),C=I();return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=()=>I(),O}e.wrapConstructor=_;function A(I){const O=(g,M)=>I(M).update(p(g)).digest(),C=I({});return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=g=>I(g),O}e.wrapConstructorWithOpts=A;function x(I=32){if(r.crypto&&typeof r.crypto.getRandomValues=="function")return r.crypto.getRandomValues(new Uint8Array(I));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=x})(Rm);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const r=hi,t=Rm;class n extends t.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,r.default.hash(o);const l=(0,t.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,f=new Uint8Array(u);f.set(l.length>u?o.create().update(l).digest():l);for(let c=0;c<f.length;c++)f[c]^=54;this.iHash.update(f),this.oHash=o.create();for(let c=0;c<f.length;c++)f[c]^=106;this.oHash.update(f),f.fill(0)}update(o){return r.default.exists(this),this.iHash.update(o),this}digestInto(o){r.default.exists(this),r.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:l,finished:u,destroyed:f,blockLen:c,outputLen:p}=this;return o=o,o.finished=u,o.destroyed=f,o.blockLen=c,o.outputLen=p,o.oHash=a._cloneInto(o.oHash),o.iHash=l._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new n(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new n(s,o)})(XW);Object.defineProperty(Vp,"__esModule",{value:!0});Vp.pbkdf2Async=Vp.pbkdf2=void 0;const F0=hi,tme=XW,Sp=Rm;function JW(e,r,t,n){F0.default.hash(e);const i=(0,Sp.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(F0.default.number(s),F0.default.number(o),F0.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,Sp.toBytes)(r),u=(0,Sp.toBytes)(t),f=new Uint8Array(o),c=tme.hmac.create(e,l),p=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:c,PRFSalt:p}}function QW(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function rme(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=JW(e,r,t,n);let u;const f=new Uint8Array(4),c=(0,Sp.createView)(f),p=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(f).digestInto(p),b.set(p.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(p).digestInto(p);for(let _=0;_<b.length;_++)b[_]^=p[_]}}return QW(a,l,o,u,p)}Vp.pbkdf2=rme;async function nme(e,r,t,n){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:l,PRFSalt:u}=JW(e,r,t,n);let f;const c=new Uint8Array(4),p=(0,Sp.createView)(c),y=new Uint8Array(l.outputLen);for(let w=1,b=0;b<s;w++,b+=l.outputLen){const T=a.subarray(b,b+l.outputLen);p.setInt32(0,w,!1),(f=u._cloneInto(f)).update(c).digestInto(y),T.set(y.subarray(0,T.length)),await(0,Sp.asyncLoop)(i-1,o,_=>{l._cloneInto(f).update(y).digestInto(y);for(let A=0;A<T.length;A++)T[A]^=y[A]})}return QW(l,u,a,f,y)}Vp.pbkdf2Async=nme;const ime=vv(Jye);var zo={},F_={};Object.defineProperty(F_,"__esModule",{value:!0});F_.SHA2=void 0;const ME=hi,Mg=Rm;function sme(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}class ome extends Mg.Hash{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=(0,Mg.createView)(this.buffer)}update(r){ME.default.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=(0,Mg.toBytes)(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=(0,Mg.createView)(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){ME.default.exists(this),ME.default.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;sme(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=(0,Mg.createView)(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}}F_.SHA2=ome;var eq={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const r=BigInt(2**32-1),t=BigInt(32);function n(L,q=!1){return q?{h:Number(L&r),l:Number(L>>t&r)}:{h:Number(L>>t&r)|0,l:Number(L&r)|0}}e.fromBig=n;function i(L,q=!1){let Q=new Uint32Array(L.length),te=new Uint32Array(L.length);for(let X=0;X<L.length;X++){const{h:j,l:Z}=n(L[X],q);[Q[X],te[X]]=[j,Z]}return[Q,te]}e.split=i;const s=(L,q)=>BigInt(L>>>0)<<t|BigInt(q>>>0);e.toBig=s;const o=(L,q,Q)=>L>>>Q,a=(L,q,Q)=>L<<32-Q|q>>>Q,l=(L,q,Q)=>L>>>Q|q<<32-Q,u=(L,q,Q)=>L<<32-Q|q>>>Q,f=(L,q,Q)=>L<<64-Q|q>>>Q-32,c=(L,q,Q)=>L>>>Q-32|q<<64-Q,p=(L,q)=>q,y=(L,q)=>L,w=(L,q,Q)=>L<<Q|q>>>32-Q,b=(L,q,Q)=>q<<Q|L>>>32-Q,T=(L,q,Q)=>q<<Q-32|L>>>64-Q,_=(L,q,Q)=>L<<Q-32|q>>>64-Q;function A(L,q,Q,te){const X=(q>>>0)+(te>>>0);return{h:L+Q+(X/2**32|0)|0,l:X|0}}e.add=A;const x=(L,q,Q)=>(L>>>0)+(q>>>0)+(Q>>>0),I=(L,q,Q,te)=>q+Q+te+(L/2**32|0)|0,O=(L,q,Q,te)=>(L>>>0)+(q>>>0)+(Q>>>0)+(te>>>0),C=(L,q,Q,te,X)=>q+Q+te+X+(L/2**32|0)|0,g=(L,q,Q,te,X)=>(L>>>0)+(q>>>0)+(Q>>>0)+(te>>>0)+(X>>>0),M=(L,q,Q,te,X,j)=>q+Q+te+X+j+(L/2**32|0)|0,B={fromBig:n,split:i,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:l,rotrSL:u,rotrBH:f,rotrBL:c,rotr32H:p,rotr32L:y,rotlSH:w,rotlSL:b,rotlBH:T,rotlBL:_,add:A,add3L:x,add3H:I,add4L:O,add4H:C,add5H:M,add5L:g};e.default=B})(eq);Object.defineProperty(zo,"__esModule",{value:!0});zo.sha384=zo.sha512_256=zo.sha512_224=mI=zo.sha512=zo.SHA512=void 0;const ame=F_,or=eq,j_=Rm,[lme,ume]=or.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),uc=new Uint32Array(80),cc=new Uint32Array(80);class Dm extends ame.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:p,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,p,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,p,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=p|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)uc[x]=r.getUint32(t),cc[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=uc[x-15]|0,O=cc[x-15]|0,C=or.default.rotrSH(I,O,1)^or.default.rotrSH(I,O,8)^or.default.shrSH(I,O,7),g=or.default.rotrSL(I,O,1)^or.default.rotrSL(I,O,8)^or.default.shrSL(I,O,7),M=uc[x-2]|0,B=cc[x-2]|0,L=or.default.rotrSH(M,B,19)^or.default.rotrBH(M,B,61)^or.default.shrSH(M,B,6),q=or.default.rotrSL(M,B,19)^or.default.rotrBL(M,B,61)^or.default.shrSL(M,B,6),Q=or.default.add4L(g,q,cc[x-7],cc[x-16]),te=or.default.add4H(Q,C,L,uc[x-7],uc[x-16]);uc[x]=te|0,cc[x]=Q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:p,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=or.default.rotrSH(c,p,14)^or.default.rotrSH(c,p,18)^or.default.rotrBH(c,p,41),O=or.default.rotrSL(c,p,14)^or.default.rotrSL(c,p,18)^or.default.rotrBL(c,p,41),C=c&y^~c&b,g=p&w^~p&T,M=or.default.add5L(A,O,g,ume[x],cc[x]),B=or.default.add5H(M,_,I,C,lme[x],uc[x]),L=M|0,q=or.default.rotrSH(n,i,28)^or.default.rotrBH(n,i,34)^or.default.rotrBH(n,i,39),Q=or.default.rotrSL(n,i,28)^or.default.rotrBL(n,i,34)^or.default.rotrBL(n,i,39),te=n&s^n&a^s&a,X=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=p|0,{h:c,l:p}=or.default.add(u|0,f|0,B|0,L|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=or.default.add3L(L,Q,X);n=or.default.add3H(j,B,q,te),i=j|0}({h:n,l:i}=or.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=or.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=or.default.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=or.default.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:p}=or.default.add(this.Eh|0,this.El|0,c|0,p|0),{h:y,l:w}=or.default.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=or.default.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=or.default.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,p,y,w,b,T,_,A)}roundClean(){uc.fill(0),cc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}zo.SHA512=Dm;class cme extends Dm{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class fme extends Dm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class hme extends Dm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}var mI=zo.sha512=(0,j_.wrapConstructor)(()=>new Dm);zo.sha512_224=(0,j_.wrapConstructor)(()=>new cme);zo.sha512_256=(0,j_.wrapConstructor)(()=>new fme);zo.sha384=(0,j_.wrapConstructor)(()=>new hme);const dme=vv(Hye),tq=vv(afe);Object.defineProperty(Xs,"__esModule",{value:!0});var rq=Xs.mnemonicToSeedSync=Xs.mnemonicToSeed=hq=Xs.validateMnemonic=Xs.entropyToMnemonic=Xs.mnemonicToEntropy=lq=Xs.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const nq=hi,iq=Vp,pme=ime,sq=zo,vme=dme,j0=tq,gme=e=>e[0]==="あいこくしん";function oq(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function $P(e){const r=oq(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function aq(e){nq.default.bytes(e,16,20,24,28,32)}function yme(e,r=128){if(nq.default.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return fq((0,vme.randomBytes)(r/8),e)}var lq=Xs.generateMnemonic=yme;const mme=e=>{const r=8-e.length/4;return new Uint8Array([(0,pme.sha256)(e)[0]>>r<<r])};function uq(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),j0.utils.chain(j0.utils.checksum(1,mme),j0.utils.radix2(11,!0),j0.utils.alphabet(e))}function cq(e,r){const{words:t}=$P(e),n=uq(r).decode(t);return aq(n),n}Xs.mnemonicToEntropy=cq;function fq(e,r){return aq(e),uq(r).encode(e).join(gme(r)?"　":" ")}Xs.entropyToMnemonic=fq;function bme(e,r){try{cq(e,r)}catch{return!1}return!0}var hq=Xs.validateMnemonic=bme;const dq=e=>oq(`mnemonic${e}`);function wme(e,r=""){return(0,iq.pbkdf2Async)(sq.sha512,$P(e).nfkd,dq(r),{c:2048,dkLen:64})}Xs.mnemonicToSeed=wme;function $me(e,r=""){return(0,iq.pbkdf2)(sq.sha512,$P(e).nfkd,dq(r),{c:2048,dkLen:64})}rq=Xs.mnemonicToSeedSync=$me;class pq extends yP{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Jf.hash(r);const n=Nm(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Jf.exists(this),this.iHash.update(r),this}digestInto(r){Jf.exists(this),Jf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const bI=(e,r,t)=>new pq(e,r).update(t).digest();bI.create=(e,r)=>new pq(e,r);const _me=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),vq=Uint8Array.from({length:16},(e,r)=>r),xme=vq.map(e=>(9*e+5)%16);let _P=[vq],xP=[xme];for(let e=0;e<4;e++)for(let r of[_P,xP])r.push(r[e].map(t=>_me[t]));const gq=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Eme=_P.map((e,r)=>e.map(t=>gq[r][t])),Sme=xP.map((e,r)=>e.map(t=>gq[r][t])),kme=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Tme=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),H0=(e,r)=>e<<r|e>>>32-r;function GB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const z0=new Uint32Array(16);class Ime extends qW{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)z0[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,f=u,c=this.h4|0,p=c;for(let y=0;y<5;y++){const w=4-y,b=kme[y],T=Tme[y],_=_P[y],A=xP[y],x=Eme[y],I=Sme[y];for(let O=0;O<16;O++){const C=H0(n+GB(y,s,a,u)+z0[_[O]]+b,x[O])+c|0;n=c,c=u,u=H0(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=H0(i+GB(w,o,l,f)+z0[A[O]]+T,I[O])+p|0;i=p,p=f,f=H0(l,10)|0,l=o,o=C}}this.set(this.h1+a+f|0,this.h2+u+p|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){z0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ame=L_(()=>new Ime),U0=ns.ProjectivePoint,LE=j3(wv);function YB(e){return BigInt(`0x${Zs(e)}`)}function Ome(e){return Fc(e.toString(16).padStart(64,"0"))}const Cme=gP("Bitcoin seed"),FE={private:76066276,public:76067358},jE=2147483648,Pme=e=>Ame(wv(e)),Nme=e=>ah(e).getUint32(0,!1),W0=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return ah(r).setUint32(0,e,!1),r};class jf{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Nme(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return LE.encode(this.serialize(this.versions.private,ip(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return LE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=FE){if(Xd(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=bI(mI,Cme,r);return new jf({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=FE){const n=LE.decode(r),i=ah(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new jf({...o,privateKey:a.slice(1)}):new jf({...o,publicKey:a})}static fromJSON(r){return jf.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||FE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!ns.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:YB(r.privateKey),this.privKeyBytes=Ome(this.privKey),this.pubKey=ns.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=U0.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Pme(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=jE)throw new Error("Invalid index");s[2]==="'"&&(o+=jE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=W0(r);if(r>=jE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=ip(new Uint8Array([0]),a,t)}else t=ip(this.pubKey,t);const n=bI(mI,this.chainCode,t),i=YB(n.slice(0,32)),s=n.slice(32);if(!ns.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ni(this.privKey+i,ns.CURVE.n);if(!ns.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=U0.fromHex(this.pubKey).add(U0.fromPrivateKey(i));if(a.equals(U0.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new jf(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Xd(r,32),ns.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Xd(r,32),Xd(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=ns.Signature.fromCompact(t)}catch{return!1}return ns.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Xd(t,33),ip(W0(r),new Uint8Array([this.depth]),W0(this.parentFingerprint),W0(this.index),this.chainCode,t)}}var Rme=Object.defineProperty,Vi=(e,r)=>{for(var t in r)Rme(e,t,{get:r[t],enumerable:!0})};function yq(e){return Zs(Pm.getPublicKey(e))}var Dme={};Vi(Dme,{insertEventIntoAscendingList:()=>Lme,insertEventIntoDescendingList:()=>Mme,normalizeURL:()=>Bme,utf8Decoder:()=>$c,utf8Encoder:()=>bl});var $c=new TextDecoder("utf-8"),bl=new TextEncoder;function Bme(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Mme(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Lme(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var ri=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(ri||{});function mq(e,r){let t=e;return t.pubkey=yq(r),t.id=EP(t),t.sig=Hme(t,r),t}function Fme(e){if(!SP(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function EP(e){let r=wv(bl.encode(Fme(e)));return Zs(r)}var jme=e=>e instanceof Object;function SP(e){if(!jme(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function kP(e){try{return Pm.verify(e.sig,EP(e),e.pubkey)}catch{return!1}}function Hme(e,r){return Zs(Pm.sign(EP(e),r))}function bq(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>=e.until)}function zme(e,r){for(let t=0;t<e.length;t++)if(bq(e[t],r))return!0;return!1}var Ume={};Vi(Ume,{getHex64:()=>TP,getInt:()=>wq,getSubscriptionId:()=>Wme,matchEventId:()=>qme,matchEventKind:()=>Vme,matchEventPubkey:()=>Kme});function TP(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function wq(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Wme(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function qme(e,r){return r===TP(e,"id")}function Kme(e,r){return r===TP(e,"pubkey")}function Vme(e,r){return r===wq(e,"kind")}var Gme={};Vi(Gme,{BECH32_REGEX:()=>$q,decode:()=>H_,naddrEncode:()=>ebe,neventEncode:()=>Qme,noteEncode:()=>Xme,nprofileEncode:()=>Jme,npubEncode:()=>Zme,nrelayEncode:()=>tbe,nsecEncode:()=>Yme});var $v=5e3,$q=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function H_(e){var i,s,o,a,l,u,f;let{prefix:r,words:t}=Bn.decode(e,$v),n=new Uint8Array(Bn.fromWords(t));switch(r){case"nprofile":{let c=q0(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Zs(c[0][0]),relays:c[1]?c[1].map(p=>$c.decode(p)):[]}}}case"nevent":{let c=q0(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Zs(c[0][0]),relays:c[1]?c[1].map(p=>$c.decode(p)):[],author:(o=c[2])!=null&&o[0]?Zs(c[2][0]):void 0}}}case"naddr":{let c=q0(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:$c.decode(c[0][0]),pubkey:Zs(c[2][0]),kind:parseInt(Zs(c[3][0]),16),relays:c[1]?c[1].map(p=>$c.decode(p)):[]}}}case"nrelay":{let c=q0(n);if(!((f=c[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:$c.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Zs(n)};default:throw new Error(`unknown prefix ${r}`)}}function q0(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1],s=t.slice(2,2+i);t=t.slice(2+i),!(s.length<i)&&(r[n]=r[n]||[],r[n].push(s))}return r}function Yme(e){return IP("nsec",e)}function Zme(e){return IP("npub",e)}function Xme(e){return IP("note",e)}function IP(e,r){let t=Fc(r),n=Bn.toWords(t);return Bn.encode(e,n,$v)}function Jme(e){let r=z_({0:[Fc(e.pubkey)],1:(e.relays||[]).map(n=>bl.encode(n))}),t=Bn.toWords(r);return Bn.encode("nprofile",t,$v)}function Qme(e){let r=z_({0:[Fc(e.id)],1:(e.relays||[]).map(n=>bl.encode(n)),2:e.author?[Fc(e.author)]:[]}),t=Bn.toWords(r);return Bn.encode("nevent",t,$v)}function ebe(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=z_({0:[bl.encode(e.identifier)],1:(e.relays||[]).map(i=>bl.encode(i)),2:[Fc(e.pubkey)],3:[new Uint8Array(r)]}),n=Bn.toWords(t);return Bn.encode("naddr",n,$v)}function tbe(e){let r=z_({0:[bl.encode(e)]}),t=Bn.toWords(r);return Bn.encode("nrelay",t,$v)}function z_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),ip(...r)}var rbe={};Vi(rbe,{decrypt:()=>ibe,encrypt:()=>nbe});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function nbe(e,r,t){const n=ns.getSharedSecret(e,"02"+r),i=_q(n);let s=Uint8Array.from(UW(16)),o=bl.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Yo.encode(new Uint8Array(l)),f=Yo.encode(new Uint8Array(s.buffer));return`${u}?iv=${f}`}async function ibe(e,r,t){let[n,i]=t.split("?iv="),s=ns.getSharedSecret(e,"02"+r),o=_q(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Yo.decode(n),u=Yo.decode(i),f=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return $c.decode(f)}function _q(e){return e.slice(1,33)}var sbe={};Vi(sbe,{NIP05_REGEX:()=>xq,queryProfile:()=>lbe,searchDomain:()=>abe,useFetchImplementation:()=>obe});var xq=/^(?:([\w.+-]+)@)?([\w.-]+)$/,U_;try{U_=fetch}catch{}function obe(e){U_=e}async function abe(e,r=""){try{return(await(await U_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function lbe(e){const r=e.match(xq);if(!r)return null;const[t,n="_",i]=r;try{const s=await U_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=ube(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function ube(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var cbe={};Vi(cbe,{generateSeedWords:()=>hbe,privateKeyFromSeedWords:()=>fbe,validateWords:()=>dbe});function fbe(e,r){let n=jf.fromMasterSeed(rq(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Zs(n)}function hbe(){return lq(bP)}function dbe(e){return hq(e,bP)}var pbe={};Vi(pbe,{parse:()=>vbe});function vbe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},f=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(f){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var gbe={};Vi(gbe,{getPow:()=>ybe});function ybe(e){return mbe(Fc(e))}function mbe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=bbe(e[t]),r+=n,n===8);t++);return r}function bbe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var wbe={};Vi(wbe,{finishRepostEvent:()=>$be,getRepostedEvent:()=>_be,getRepostedEventPointer:()=>Eq});function $be(e,r,t,n){return mq({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function Eq(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function _be(e,{skipVerification:r}={}){const t=Eq(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!kP(n)))return n}var xbe={};Vi(xbe,{NOSTR_URI_REGEX:()=>W_,parse:()=>Sbe,test:()=>Ebe});var W_=new RegExp(`nostr:(${$q.source})`);function Ebe(e){return typeof e=="string"&&new RegExp(`^${W_.source}$`).test(e)}function Sbe(e){const r=e.match(new RegExp(`^${W_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:H_(r[1])}}var kbe={};Vi(kbe,{finishReactionEvent:()=>Tbe,getReactedEventPointer:()=>Ibe});function Tbe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return mq({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function Ibe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var Abe={};Vi(Abe,{createDelegation:()=>Obe,getDelegator:()=>Cbe});function Obe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=wv(bl.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Zs(Pm.sign(i,e));return{from:yq(e),to:r.pubkey,cond:n,sig:s}}function Cbe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,f]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(f))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(f))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(f))continue;return null}}let o=wv(bl.encode(`nostr:delegation:${e.pubkey}:${n}`));return Pm.verify(i,o,t)?t:null}var Pbe={};Vi(Pbe,{matchAll:()=>Nbe,regex:()=>AP,replaceAll:()=>Rbe});var AP=()=>new RegExp(`\\b${W_.source}\\b`,"g");function*Nbe(e){const r=e.matchAll(AP());for(const t of r){const[n,i]=t;yield{uri:n,value:i,decoded:H_(i),start:t.index,end:t.index+n.length}}}function Rbe(e,r){return e.replaceAll(AP(),(t,n)=>r({uri:t,value:n,decoded:H_(n)}))}var Dbe={};Vi(Dbe,{useFetchImplementation:()=>Bbe,validateGithub:()=>Mbe});var OP;try{OP=fetch}catch{}function Bbe(e){OP=e}async function Mbe(e,r,t){try{return await(await OP(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var Lbe={};Vi(Lbe,{authenticate:()=>Fbe});var Fbe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},jbe={};Vi(jbe,{getZapEndpoint:()=>zbe,makeZapReceipt:()=>qbe,makeZapRequest:()=>Ube,useFetchImplementation:()=>Hbe,validateZapRequest:()=>Wbe});var CP;try{CP=fetch}catch{}function Hbe(e){CP=e}async function zbe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Bn.decode(t,1e3),a=Bn.fromWords(o);r=$c.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await CP(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Ube({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Wbe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!SP(r))return"Zap request is not a valid Nostr event.";if(!kP(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function qbe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Jd=null;typeof WebSocket<"u"?Jd=WebSocket:typeof MozWebSocket<"u"?Jd=MozWebSocket:typeof global<"u"?Jd=global.WebSocket||global.MozWebSocket:typeof window<"u"?Jd=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Jd=self.WebSocket||self.MozWebSocket);const Kbe=Jd;function HE(e,r){let t={...e};return delete t[r],r+Oge(t)}function Q1(e){let r=[],t=new Map,n=[];for(let i of e){let s=!1;for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){if(i[o].length===0){s=!0;break}let a=HE(i,o),l=t.get(a);if(l!==void 0){let u=r[l];for(let f in u)if(f!==o){let c=HE(u,f);t.delete(c)}if(r[l][o]instanceof Set)for(let f of i[o])r[l][o].add(f);else r[l][o]=new Set(r[l][o].concat(i[o])),n.push([l,o]);s=!0;break}}if(!s){for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){let a=HE(i,o);t.set(a,r.length)}r.push({...i})}}for(let[i,s]of n)r[i][s]=Array.from(r[i][s]);return r}function Vbe(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function Gbe(e){let r=e.indexOf('"EVENT"')+7,t=e.slice(r),n=t.indexOf('"')+1,i=t.slice(n);return i.slice(0,i.indexOf('"'))}function Ybe(e,r,t){return new Zbe(e,r,t).relayInit()}var J$,Sq,Q$,kq,e_,Tq,t_,Iq,r_,Aq,n_,Oq,IH,Zbe=(IH=class{constructor(e,r,t){Zr(this,J$);Zr(this,Q$);Zr(this,e_);Zr(this,t_);Zr(this,r_);Zr(this,n_);oe(this,"url");oe(this,"alreadyHaveEvent");oe(this,"logging",!1);oe(this,"autoReconnect");oe(this,"ws");oe(this,"sendOnConnect",[]);oe(this,"openSubs",{});oe(this,"closedByClient",!1);oe(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});oe(this,"subListeners",{});oe(this,"pubListeners",{});oe(this,"incomingMessageQueue",[]);oe(this,"handleNextInterval");oe(this,"resolveClose");oe(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=r,this.autoReconnect=t}async trySend(e){var t;const r=JSON.stringify(e);this.connected?(t=this.ws)==null||t.send(r):this.sendOnConnect.push(r)}async connectRelay(){return new Promise((e,r)=>{try{const t=new Kbe(this.url);this.ws=t}catch(t){r(t);return}this.ws.onopen=ei(this,n_,Oq).bind(this,e),this.ws.onerror=t=>{this.listeners.error.forEach(n=>n()),r(t)},this.ws.onclose=ei(this,Q$,kq).bind(this),this.ws.onmessage=ei(this,t_,Iq).bind(this)})}async connect(){var e,r;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((r=this.ws)==null?void 0:r.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(r=>{this.resolveClose=r})}on(e,r){var t;this.listeners[e].push(r),e==="connect"&&((t=this.ws)==null?void 0:t.readyState)===1&&r()}off(e,r){const t=this.listeners[e].indexOf(r);t!==-1&&this.listeners[e].splice(t,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,r){const t=this;if(!e.id)throw new Error(`event ${e} has no id`);const n=e.id;let i=!1,s=!1;t.trySend([r,e]).then(()=>{i=!0,s&&(o(),s=!1)}).catch(()=>{});const o=()=>{const a=this.sub([{ids:[n]}],{id:`monitor-${n.slice(0,5)}`}),l=setTimeout(()=>{var u;(((u=t.pubListeners[n])==null?void 0:u.failed)||[]).forEach(f=>f("event not seen after 5 seconds")),a.unsub()},5e3);a.on("event",()=>{var u;clearTimeout(l),(((u=t.pubListeners[n])==null?void 0:u.seen)||[]).forEach(f=>f())})};return{on:(a,l)=>{t.pubListeners[n]=t.pubListeners[n]||{ok:[],seen:[],failed:[]},t.pubListeners[n][a].push(l),a==="seen"&&(i?o():s=!0)},off:(a,l)=>{const u=t.pubListeners[n];if(!u)return;const f=u[a].indexOf(l);f>=0&&u[a].splice(f,1)}}}sub(e,r={}){const t=this,n=r.id||Math.random().toString().slice(2),i=r.skipVerification||!1;return t.openSubs[n]={id:n,filters:e,skipVerification:i},t.connected&&(this.logging&&console.log("REQ2",this.url,n,...e),t.trySend(["REQ",n,...e])),{sub:(s,o={})=>this.sub(s||e,{skipVerification:o.skipVerification||i,id:n}),unsub:()=>{delete t.openSubs[n],delete t.subListeners[n],t.connected&&(t.logging&&console.log("CLOSE",this.url,n),t.trySend(["CLOSE",n]))},on:(s,o)=>{t.subListeners[n]=t.subListeners[n]||{event:[],eose:[]},t.subListeners[n][s].push(o)},off:(s,o)=>{const a=t.subListeners[n];if(!a)return;const l=a[s].indexOf(o);l>=0&&a[s].splice(l,1)}}}},J$=new WeakSet,Sq=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}ei(this,r_,Aq).call(this,{data:this.incomingMessageQueue.shift()})},Q$=new WeakSet,kq=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&ei(this,e_,Tq).call(this)},e_=new WeakSet,Tq=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},t_=new WeakSet,Iq=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>ei(this,J$,Sq).call(this),0))},r_=new WeakSet,Aq=async function(e){var s,o,a,l,u,f,c;let r,t=e.data.toString();if(!t)return;let n=Vbe(t,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,n);if(i){const p=this.subListeners[Gbe(t)];return p?p.event.forEach(y=>y(i)):void 0}try{r=JSON.parse(t)}catch{r=e.data}if(r.length>=1)switch(r[0]){case"EVENT":if(this.logging&&console.log(r),r.length!==3)return;const p=r[1],y=r[2];if(!this.openSubs[p]||(o=this.openSubs[p].eventIds)!=null&&o.has(n))return;(a=this.openSubs[p].eventIds)==null||a.add(n),SP(y)&&this.openSubs[p]&&(this.openSubs[p].skipVerification||kP(y))&&zme(this.openSubs[p].filters,y)&&(this.openSubs[p],(((l=this.subListeners[p])==null?void 0:l.event)||[]).forEach(T=>T(y)));return;case"EOSE":{if(r.length!==2)return;const T=r[1];this.logging&&console.log("EOSE",this.url,T),(((u=this.subListeners[T])==null?void 0:u.eose)||[]).forEach(_=>_());return}case"OK":{if(r.length<3)return;const T=r[1],_=r[2],A=r[3]||"";_?(f=this.pubListeners[T])==null||f.ok.forEach(x=>x()):(c=this.pubListeners[T])==null||c.failed.forEach(x=>x(A));return}case"NOTICE":if(r.length!==2)return;const w=r[1];this.listeners.notice.forEach(T=>T(w));return;case"AUTH":if(r.length!==2)return;const b=r[1];this.listeners.auth.forEach(T=>T(b));return}},n_=new WeakSet,Oq=function(e){var r;if(this.resolveClose){this.resolveClose();return}for(const t in this.openSubs)this.logging&&console.log("REQ",this.url,t,...this.openSubs[t].filters),this.trySend(["REQ",t,...this.openSubs[t].filters]);for(const t of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,t),(r=this.ws)==null||r.send(t);this.sendOnConnect=[],this.listeners.connect.forEach(t=>t()),e()},IH),i_,Cq,s_,Pq,h3,Jbe,o_,Nq,a_,Rq,l_,Dq,AH,Xbe=(AH=class{constructor(){Zr(this,i_);Zr(this,s_);Zr(this,h3);Zr(this,o_);Zr(this,a_);Zr(this,l_);oe(this,"eventsById",new Map);oe(this,"metadataByPubKey",new Map);oe(this,"contactsByPubKey",new Map);oe(this,"authorsKindsByPubKey",new Map);oe(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===ri.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===ri.Contacts&&this.contactsByPubKey.set(e.pubkey,e),ei(this,i_,Cq).call(this,e),ei(this,s_,Pq).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,r){const t=new Set,n=[];for(const i of e){const s=ei(this,l_,Dq).call(this,i)||ei(this,o_,Nq).call(this,i)||ei(this,a_,Rq).call(this,i)||{filter:i,events:[]};for(const o of s.events)t.add(o);n.push(s.filter)}return{filters:n,events:[...t]}}},i_=new WeakSet,Cq=function(e){const r=this.authorsKindsByPubKey.get(e.pubkey);if(!r)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const t=r.get(e.kind);t?e.kind===ri.Metadata||e.kind===ri.Contacts?e.created_at>t[0].created_at&&(t[0]=e):t.push(e):r.set(e.kind,[e])}},s_=new WeakSet,Pq=function(e){for(const r of e.tags){let t=r[0]+":"+r[1];const n=this.eventsByTags.get(t);n?n.push(e):this.eventsByTags.set(t,[e])}},h3=new WeakSet,Jbe=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(n=>n!==ri.Contacts&&n!==ri.Metadata)!==void 0)return;const r=[],t=new Set;for(const n of e.authors){let i;if(e.kinds.includes(ri.Contacts)&&(i=this.contactsByPubKey.get(n),!i)){r.push(n);continue}let s;if(e.kinds.includes(ri.Metadata)&&(s=this.metadataByPubKey.get(n),!s)){r.push(n);continue}i&&t.add(i),s&&t.add(s)}return{filter:{...e,authors:r},events:t}},o_=new WeakSet,Nq=function(e){if(e.noCache||!e.authors)return;const r=new Set;for(const t of e.authors)if(e.kinds){const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of e.kinds){const s=n.get(i);if(s)for(const o of s)r.add(o)}}else{const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of n.values())for(const s of i)r.add(s)}return{filter:e,events:r}},a_=new WeakSet,Rq=function(e){if(e.noCache)return;const r=new Set;for(const t in e){if(t[0]!=="#")continue;let n=t.slice(1)+":"+e[t][0];const i=this.eventsByTags.get(n);if(i)for(const s of i)r.add(s)}return{filter:e,events:r}},l_=new WeakSet,Dq=function(e){if(!e.ids)return;const r=new Set,t=[];for(const n of e.ids){const i=this.getEventById(n);i?r.add(i):t.push(n)}return{filter:{...e,ids:t},events:r}},AH),Bq=class{constructor(r,t,n){oe(this,"pubkey");oe(this,"relayPool");oe(this,"relays");this.pubkey=n,this.relayPool=r,this.relays=t}metaData(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ri.Metadata]}],this.relays,r,t)}subscribe(r,t,n){return this.relayPool.subscribeEventObject(r.map(i=>({authors:[this.pubkey],...i})),this.relays,t,n)}followsPubkeys(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ri.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)s[0]==="p"&&i.push(s[1]);r(i)},t)}follows(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[ri.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)if(s[0]==="p"){let o=this.relays;s[1]&&(o=[s[1],...this.relays||[]]),i.push(new Bq(this.relayPool,o,s[1]))}r(i)},t)}secondFollows(r,t,n=!0){return this.followsPubkeys(i=>{let s=new Map;for(const o of i)this.relayPool.subscribeEventObject([{authors:[o],kinds:[ri.Contacts]}],this.relays,a=>{let l=1/a.tags.length;for(const u of a.tags)if(u[0]==="p"){let f=s.get(u[1]);f?f+=l:f=l,s.set(u[1],f)}if(n)for(const u of i)s.delete(u);r(Array.from(s.entries()).sort((u,f)=>f[1]-u[1]))},t)},t)}allEvents(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,r,n)}referenced(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,r,n)}followers(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[ri.Contacts],limit:t}],this.relays,r,n)}sentAndRecievedDMs(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ri.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[ri.EncryptedDirectMessage],limit:t}],this.relays,r,n)}text(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[ri.Text],limit:t}],this.relays,r,n)}},wI=class{constructor(e,r,t){oe(this,"id");oe(this,"kind");oe(this,"pubkey");oe(this,"tags");oe(this,"created_at");oe(this,"content");oe(this,"relayPool");oe(this,"relays");oe(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=r,this.relays=t,this.sig=e.sig}referencedAuthors(){const e=[];for(const r of this.tags)r[0]==="p"&&e.push(new Bq(this.relayPool,void 0,r[1]));return e}referencedEvents(e){const r=[];for(const t of this.tags)if(t[0]==="e"){let n=this.relays;t[2]&&(n=[t[2],...n||[]]),r.push(this.relayPool.getEventById(t[1],n,e).then(i=>new wI(i,this.relayPool,this.relays)))}return r}thread(e,r){let t=this.relays,n=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(t=[i[2],...t||[]]),n.push(i[1]));return this.relayPool.subscribe([{ids:n},{"#e":n}],t,e,r)}};function Qbe(e){let r=new Set;return(t,n,i)=>{r.has(t.id)||(r.add(t.id),e(t,n,i))}}function e0e(e){let r=new Map;return(t,n,i)=>{if(t.kind===ri.Metadata||t.kind===ri.Contacts){let s=t.pubkey+" "+t.kind;if((r.get(s)||0)>t.created_at)return;r.set(s,t.created_at)}e(t,n,i)}}function t0e(e,r){return(t,n,i)=>{for(let s of r)if(bq(s,t)){e(t,n,i);break}}}var r0e=class{constructor(e){oe(this,"subs",[]);oe(this,"events",[]);oe(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(r=>r(...e))}sub(e){return this.events.forEach(r=>e(...r)),this.subs.push(e),()=>{var r;this.subs=this.subs.filter(t=>t!==e),this.subs.length===0&&((r=this.onunsub)==null||r.call(this),this.onunsub=void 0)}}},n0e=e=>[...new Set(e)];function i0e(e,r,t,n={},i){let s=[];if(i){const a=i.getCachedEventsWithUpdatedFilters(e,r);e=a.filters,s=a.events}if(n.logAllEvents){const a=t;t=(l,u,f)=>{a(l,u,f)}}n.allowDuplicateEvents||(t=Qbe(t)),n.allowOlderEvents||(t=e0e(t));for(const a of s)t(a,!1,void 0);e=Q1(e),t=t0e(t,e),r=n0e(r);const o=s0e(e,r);return[t,o]}function s0e(e,r){const t=new Map,n=[];for(const i of e){const s=i.relay;if(s){const o=t.get(s);o?o.push(ZB(i)):t.set(s,[ZB(i)])}else n.push(i)}if(n.length>0)for(const i of r){const s=t.get(i);s?t.set(i,s.concat(n)):t.set(i,n)}return t}function ZB(e){return e={...e},delete e.relay,e}function o0e(e,r){const t=new Map,n=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},o=()=>{};for(const[l,u,f,c,p]of e){if(!f.unsubcb)continue;for(const[w,b]of u){const T=t.get(w);T?t.set(w,T.concat(b)):t.set(w,b)}let y=(w,b,T)=>{f.unsubcb&&l(w,b,T)};if(r&&p){const w=new r0e(o);n.push((T,_,A)=>{w.event(T,_,A)});let b=w.sub(y);r.set(p,w),f.unsubcb=()=>{f.unsubcb=void 0,b(),c||i--}}else n.push(y),f.unsubcb=()=>{f.unsubcb=void 0,c||i--};c||i++}i===0&&setTimeout(()=>{},0);const a=(l,u,f)=>{for(const c of n)c(l,u,f)};return e.length=0,[a,t,s]}var zE=class{constructor(e,r,t,n){oe(this,"data");oe(this,"promises");oe(this,"relays");oe(this,"kind");oe(this,"relayPool");oe(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=r,this.relays=t||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=n||!1}async get(e){let r=this.data.get(e);if(r)return Promise.resolve(r);const t=this.promises.get(e);return t||new Promise((n,i)=>{let s=0;const o=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},a=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([o],this.relays,l=>{this.data.set(e,l),this.promises.delete(e),n(l)},void 0,l=>{this.relays.includes(l)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=a})}},XB=e=>[...new Set(e)];function a0e(e){if(e)return JSON.parse(e)}var u_,Mq,c_,Lq,f_,Fq,h_,jq,d_,Hq,p_,zq,OH,l0e=(OH=class{constructor(e,r={}){Zr(this,u_);Zr(this,c_);Zr(this,f_);Zr(this,h_);Zr(this,d_);Zr(this,p_);oe(this,"relayByUrl",new Map);oe(this,"noticecbs",[]);oe(this,"errorcbs",[]);oe(this,"authcbs",[]);oe(this,"eventCache");oe(this,"minMaxDelayms",1/0);oe(this,"filtersToSubscribe",[]);oe(this,"timer");oe(this,"externalGetEventById");oe(this,"logSubscriptions",!1);oe(this,"autoReconnect",!1);oe(this,"startTime",new Date().getTime());oe(this,"deleteSignatures");oe(this,"subscriptionCache");oe(this,"skipVerification");oe(this,"writeRelays");oe(this,"metadataCache");oe(this,"contactListCache");oe(this,"logErrorsAndNotices");oe(this,"errorsAndNoticesInterval");oe(this,"errorsAndNotices",[]);if(this.externalGetEventById=r.externalGetEventById,this.logSubscriptions=r.logSubscriptions,this.autoReconnect=r.autoReconnect,this.deleteSignatures=r.deleteSignatures,this.skipVerification=r.skipVerification,this.writeRelays=new zE(10003,this,void 0,!0),this.metadataCache=new zE(0,this),this.contactListCache=new zE(3,this),r.useEventCache&&(this.eventCache=new Xbe),r.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const t of XB(e))this.addOrGetRelay(t);this.logErrorsAndNotices=r.logErrorsAndNotices||!0,this.onnotice((t,n)=>{this.errorsAndNotices.push({type:"notice",url:t,msg:n,time:Date.now()-this.startTime})}),this.onerror((t,n)=>{this.errorsAndNotices.push({type:"error",url:t,msg:n,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>ei(this,u_,Mq).call(this),1e3*10)}addOrGetRelay(e){const r=this.relayByUrl.get(e);if(r)return r;const t=Ybe(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?n=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(n)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,t),t.connect().then(n=>{t==null||t.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),t==null||t.on("auth",i=>{this.authcbs.forEach(s=>s(t,i))})},n=>{this.errorcbs.forEach(i=>i(e,n))}),t}async close(){const e=[];for(const r of this.relayByUrl.values())e.push(r.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const r=this.relayByUrl.get(e);r&&(r.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,r){clearTimeout(this.timer),this.timer=void 0;let t=this.minMaxDelayms;this.minMaxDelayms=1/0;const[n,i,s]=o0e(r||this.filtersToSubscribe,this.subscriptionCache);return ei(this,h_,jq).call(this,i,n,e,s,t)}subscribeEventObject(e,r,t,n,i,s={}){return this.subscribe(e,r,(o,a,l)=>t(new wI(o,this,r),a,l))}subscribe(e,r,t,n,i,s={}){var c;if(n!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(r===void 0){const p=ei(this,p_,zq).call(this,e,t,n,i,s);return()=>{p.then(y=>{y()})}}let o;if(s.unsubscribeOnEose&&!i){o=JSON.stringify([e,r]);const p=(c=this.subscriptionCache)==null?void 0:c.get(o);if(p)return p.sub(t)}const[a,l]=i0e(e,r,t,s,this.eventCache);let u={unsubcb:()=>{}};n===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const f=[a,l,u,s.unsubscribeOnEose,o,n];return s.dontSendOtherFilters?this.sendSubscriptions(i,[f]):(this.filtersToSubscribe.push(f),n===void 0?this.sendSubscriptions(i):(ei(this,d_,Hq).call(this,n),()=>{var p;(p=u.unsubcb)==null||p.call(u),delete u.unsubcb}))}async getEventObjectById(e,r,t){return this.getEventById(e,r,t).then(n=>new wI(n,this,r))}async getEventById(e,r,t){return new Promise((n,i)=>{this.subscribe([{ids:[e]}],r,s=>{n(s)},t,void 0)})}publish(e,r){for(const t of XB(r))this.addOrGetRelay(t).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((r,t)=>r.on("error",n=>e(t,n))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((r,t)=>r.on("disconnect",n=>e(t,n)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,r])=>[e,r.status]).sort()}setWriteRelaysForPubKey(e,r,t){const n={created_at:t,pubkey:"",id:"",sig:"",content:JSON.stringify(r),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,n)}setCachedMetadata(e,r){this.metadataCache.data.set(e,r)}setCachedContactList(e,r){this.contactListCache.data.set(e,r)}subscribeReferencedEvents(e,r,t,n,i={}){let s=[],o=[];for(const a of e.tags){if(a[0]==="p"){const l=a[1];if(l.length!==64){console.log("bad pubkey",l,a);continue}o.push(l)}if(a[0]==="e"){const l=a[1];s.push(l)}}return s.length===0?()=>{}:o.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,r,t,n,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:o}],void 0,r,t,n,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${r}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${r}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,r,t,n,i={}){for(const s of e.tags)if(s[0]==="p"){const o=s[1];if(o.length!==64){console.log("bad pubkey",o,s);continue}this.fetchAndCacheMetadata(o).catch(a=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${o}: ${a}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,r,t,n,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(r=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${r}`,time:Date.now()-this.startTime,url:e.url})})})}},u_=new WeakSet,Mq=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},c_=new WeakSet,Lq=function(e,r,t,n,i){const s=Q1(r);if(s.length===0)return;const a=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let l=!1,u=1/0;return a.on("event",f=>{var p;f.created_at<u&&(u=f.created_at);let c=f;this.deleteSignatures||(c.sig=f.sig),(p=this.eventCache)==null||p.addEvent(c),t(c,l,e)}),a.on("eose",()=>{n==null||n(e,u),l=!0}),a},f_=new WeakSet,Fq=function(e){const r=new Map;for(const[t,n]of e){const i=Q1(Q1(n));i.length>0&&r.set(t,i)}return r},h_=new WeakSet,jq=function(e,r,t,n={},i){var u,f;if(e.size===0)return()=>{};if(e=ei(this,f_,Fq).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const c={};for(const[p,y]of e){let w=0;for(const b of y){const T={...b};T.authors&&(T.authors=T.authors.join(),T["authors.length"]=(u=b==null?void 0:b.authors)==null?void 0:u.length),T.kinds&&(T.kinds=T.kinds.join()),T.ids&&(T.ids=T.ids.join(),T["ids.length"]=(f=b==null?void 0:b.ids)==null?void 0:f.length),T["#e"]&&(T["#e"]=T["#e"].join(),T["#e.length"]=b["#e"].length),T["#p"]&&(T["#p"]=T["#p"].join(),T["#p.length"]=b["#p"].length),c[p+" "+w]=T,w++}}Object.keys(c).length>3&&console.groupCollapsed(Object.keys(c).length+" filters to "+e.size+" relays"),console.table(c),Object.keys(c).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let o=!1,a=[];n.unsuboneosecb=()=>{o=!0,a.forEach(c=>c.unsub())};for(const[c,p]of e){let y={};const w=(_,A)=>{var x;t&&t(_,A),o?(x=y.sub)==null||x.unsub():y.sub&&a.push(y.sub)},b=new Set,T=ei(this,c_,Lq).call(this,c,p,r,w,b);T&&(y.sub=T,s.push(T))}const l=()=>s.forEach(c=>c.unsub());return n.unsubcb=()=>{l(),delete n.unsubcb},l},d_=new WeakSet,Hq=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},p_=new WeakSet,zq=async function(e,r,t,n,i={}){var c;const s=new Set;for(const p of e)if(p.authors)for(const y of p.authors)s.add(y);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const o=[],a=[];for(const p of s)o.push((c=this.writeRelays)==null?void 0:c.get(p).then(y=>a0e(y==null?void 0:y.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),a.push(p);const l=new Set;let u=0;for(const p of o){const y=a[u];u+=1;let w=await p;if(!Array.isArray(w)){console.error("Couldn't load relays for author ",y);continue}for(let b of w)l.add(b)}let f=Array.from(l);return f.length===0&&i.defaultRelays&&(f=i.defaultRelays),this.subscribe(e,f,r,t,n,i)},OH);const rn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Un=Object.keys,Wi=Array.isArray;function cs(e,r){return typeof r!="object"||Un(r).forEach(function(t){e[t]=r[t]}),e}typeof Promise>"u"||rn.Promise||(rn.Promise=Promise);const zy=Object.getPrototypeOf,u0e={}.hasOwnProperty;function no(e,r){return u0e.call(e,r)}function Gp(e,r){typeof r=="function"&&(r=r(zy(e))),(typeof Reflect>"u"?Un:Reflect.ownKeys)(r).forEach(t=>{iu(e,t,r[t])})}const Uq=Object.defineProperty;function iu(e,r,t,n){Uq(e,r,cs(t&&no(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},n))}function kp(e){return{from:function(r){return e.prototype=Object.create(r.prototype),iu(e.prototype,"constructor",e),{extend:Gp.bind(null,e.prototype)}}}}const c0e=Object.getOwnPropertyDescriptor;function PP(e,r){let t;return c0e(e,r)||(t=zy(e))&&PP(t,r)}const f0e=[].slice;function e$(e,r,t){return f0e.call(e,r,t)}function Wq(e,r){return r(e)}function Xg(e){if(!e)throw new Error("Assertion Failed")}function qq(e){rn.setImmediate?setImmediate(e):setTimeout(e,0)}function Kq(e,r){return e.reduce((t,n,i)=>{var s=r(n,i);return s&&(t[s[0]]=s[1]),t},{})}function su(e,r){if(no(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var t=[],n=0,i=r.length;n<i;++n){var s=su(e,r[n]);t.push(s)}return t}var o=r.indexOf(".");if(o!==-1){var a=e[r.substr(0,o)];return a===void 0?void 0:su(a,r.substr(o+1))}}function Ia(e,r,t){if(e&&r!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){Xg(typeof t!="string"&&"length"in t);for(var n=0,i=r.length;n<i;++n)Ia(e,r[n],t[n])}else{var s=r.indexOf(".");if(s!==-1){var o=r.substr(0,s),a=r.substr(s+1);if(a==="")t===void 0?Wi(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var l=e[o];l&&no(e,o)||(l=e[o]={}),Ia(l,a,t)}}else t===void 0?Wi(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=t}}function Vq(e){var r={};for(var t in e)no(e,t)&&(r[t]=e[t]);return r}const h0e=[].concat;function Gq(e){return h0e.apply([],e)}const Yq="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Gq([8,16,32,64].map(e=>["Int","Uint","Float"].map(r=>r+e+"Array")))).filter(e=>rn[e]),d0e=Yq.map(e=>rn[e]);Kq(Yq,e=>[e,!0]);let mc=null;function Bm(e){mc=typeof WeakMap<"u"&&new WeakMap;const r=$I(e);return mc=null,r}function $I(e){if(!e||typeof e!="object")return e;let r=mc&&mc.get(e);if(r)return r;if(Wi(e)){r=[],mc&&mc.set(e,r);for(var t=0,n=e.length;t<n;++t)r.push($I(e[t]))}else if(d0e.indexOf(e.constructor)>=0)r=e;else{const s=zy(e);for(var i in r=s===Object.prototype?{}:Object.create(s),mc&&mc.set(e,r),e)no(e,i)&&(r[i]=$I(e[i]))}return r}const{toString:p0e}={};function _I(e){return p0e.call(e).slice(8,-1)}const xI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",v0e=typeof xI=="symbol"?function(e){var r;return e!=null&&(r=e[xI])&&r.apply(e)}:function(){return null},Qd={};function eu(e){var r,t,n,i;if(arguments.length===1){if(Wi(e))return e.slice();if(this===Qd&&typeof e=="string")return[e];if(i=v0e(e)){for(t=[];!(n=i.next()).done;)t.push(n.value);return t}if(e==null)return[e];if(typeof(r=e.length)=="number"){for(t=new Array(r);r--;)t[r]=e[r];return t}return[e]}for(r=arguments.length,t=new Array(r);r--;)t[r]=arguments[r];return t}const NP=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var xl=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zq(e,r){xl=e,Xq=r}var Xq=()=>!0;const g0e=!new Error("").stack;function Wh(){if(g0e)try{throw Wh.arguments,new Error}catch(e){return e}return new Error}function EI(e,r){var t=e.stack;return t?(r=r||0,t.indexOf(e.name)===0&&(r+=(e.name+e.message).split(`
`).length),t.split(`
`).slice(r).filter(Xq).map(n=>`
`+n).join("")):""}var Jq=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],RP=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Jq),y0e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Tp(e,r){this._e=Wh(),this.name=e,this.message=r}function Qq(e,r){return e+". Errors: "+Object.keys(r).map(t=>r[t].toString()).filter((t,n,i)=>i.indexOf(t)===n).join(`
`)}function t$(e,r,t,n){this._e=Wh(),this.failures=r,this.failedKeys=n,this.successCount=t,this.message=Qq(e,r)}function fy(e,r){this._e=Wh(),this.name="BulkError",this.failures=Object.keys(r).map(t=>r[t]),this.failuresByPos=r,this.message=Qq(e,r)}kp(Tp).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+EI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),kp(t$).from(Tp),kp(fy).from(Tp);var DP=RP.reduce((e,r)=>(e[r]=r+"Error",e),{});const m0e=Tp;var Wt=RP.reduce((e,r)=>{var t=r+"Error";function n(i,s){this._e=Wh(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=y0e[r]||t,this.inner=null)}return kp(n).from(m0e),e[r]=n,e},{});Wt.Syntax=SyntaxError,Wt.Type=TypeError,Wt.Range=RangeError;var JB=Jq.reduce((e,r)=>(e[r+"Error"]=Wt[r],e),{}),ew=RP.reduce((e,r)=>(["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=Wt[r]),e),{});function Wr(){}function Uy(e){return e}function b0e(e,r){return e==null||e===Uy?r:function(t){return r(e(t))}}function Oh(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function w0e(e,r){return e===Wr?r:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=r.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Oh(n,this.onsuccess):n),i&&(this.onerror=this.onerror?Oh(i,this.onerror):i),s!==void 0?s:t}}function $0e(e,r){return e===Wr?r:function(){e.apply(this,arguments);var t=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Oh(t,this.onsuccess):t),n&&(this.onerror=this.onerror?Oh(n,this.onerror):n)}}function _0e(e,r){return e===Wr?r:function(t){var n=e.apply(this,arguments);cs(t,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=r.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Oh(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Oh(s,this.onerror):s),n===void 0?o===void 0?void 0:o:cs(n,o)}}function x0e(e,r){return e===Wr?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function BP(e,r){return e===Wr?r:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return r.apply(n,s)})}return r.apply(this,arguments)}}ew.ModifyError=t$,ew.DexieError=Tp,ew.BulkError=fy;var Wy={};const eK=100,[SI,r$,kI]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,zy(e),e];const r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,zy(r),e]})(),tK=r$&&r$.then,tw=SI&&SI.constructor,MP=!!kI;var TI=!1,E0e=kI?()=>{kI.then(K0)}:rn.setImmediate?setImmediate.bind(null,K0):rn.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{K0(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(K0,0)},hy=function(e,r){Jg.push([e,r]),n$&&(E0e(),n$=!1)},II=!0,n$=!0,lh=[],rw=[],AI=null,OI=Uy,Ip={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:t6,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{t6(e[0],e[1])}catch{}})}},Mt=Ip,Jg=[],uh=0,nw=[];function Et(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Wr,this._lib=!1;var r=this._PSD=Mt;if(xl&&(this._stackHolder=Wh(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Wy)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&PI(this,this._value))}this._state=null,this._value=null,++r.ref,nK(this,e)}const CI={get:function(){var e=Mt,r=i$;function t(n,i){var s=!e.global&&(e!==Mt||r!==i$);const o=s&&!bu();var a=new Et((l,u)=>{LP(this,new rK(s$(n,e,s,o),s$(i,e,s,o),l,u,e))});return xl&&oK(a,this),a}return t.prototype=Wy,t},set:function(e){iu(this,"then",e&&e.prototype===Wy?CI:{get:function(){return e},set:CI.set})}};function rK(e,r,t,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=t,this.reject=n,this.psd=i}function nK(e,r){try{r(t=>{if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Mm();t&&typeof t.then=="function"?nK(e,(i,s)=>{t instanceof Et?t._then(i,s):t.then(i,s)}):(e._state=!0,e._value=t,iK(e)),n&&Lm()}},PI.bind(null,e))}catch(t){PI(e,t)}}function PI(e,r){if(rw.push(r),e._state===null){var t=e._lib&&Mm();r=OI(r),e._state=!1,e._value=r,xl&&r!==null&&typeof r=="object"&&!r._promise&&function(n,i,s){try{n.apply(null,s)}catch(o){i&&i(o)}}(()=>{var n=PP(r,"stack");r._promise=e,iu(r,"stack",{get:()=>TI?n&&(n.get?n.get.apply(r):n.value):e.stack})}),function(n){lh.some(i=>i._value===n._value)||lh.push(n)}(e),iK(e),t&&Lm()}}function iK(e){var r=e._listeners;e._listeners=[];for(var t=0,n=r.length;t<n;++t)LP(e,r[t]);var i=e._PSD;--i.ref||i.finalize(),uh===0&&(++uh,hy(()=>{--uh==0&&FP()},[]))}function LP(e,r){if(e._state!==null){var t=e._state?r.onFulfilled:r.onRejected;if(t===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++uh,hy(S0e,[t,e,r])}else e._listeners.push(r)}function S0e(e,r,t){try{AI=r;var n,i=r._value;r._state?n=e(i):(rw.length&&(rw=[]),n=e(i),rw.indexOf(i)===-1&&function(s){for(var o=lh.length;o;)if(lh[--o]._value===s._value)return void lh.splice(o,1)}(r)),t.resolve(n)}catch(s){t.reject(s)}finally{AI=null,--uh==0&&FP(),--t.psd.ref||t.psd.finalize()}}function sK(e,r,t){if(r.length===t)return r;var n="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,n=EI(o,0)):(i=o,s=""),r.push(i+(s?": "+s:"")+n)}return xl&&((n=EI(e._stackHolder,2))&&r.indexOf(n)===-1&&r.push(n),e._prev&&sK(e._prev,r,t)),r}function oK(e,r){var t=r?r._numPrev+1:0;t<100&&(e._prev=r,e._numPrev=t)}function K0(){Mm()&&Lm()}function Mm(){var e=II;return II=!1,n$=!1,e}function Lm(){var e,r,t;do for(;Jg.length>0;)for(e=Jg,Jg=[],t=e.length,r=0;r<t;++r){var n=e[r];n[0].apply(null,n[1])}while(Jg.length>0);II=!0,n$=!0}function FP(){var e=lh;lh=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var r=nw.slice(0),t=r.length;t;)r[--t]()}function V0(e){return new Et(Wy,!1,e)}function on(e,r){var t=Mt;return function(){var n=Mm(),i=Mt;try{return Hc(t,!0),e.apply(this,arguments)}catch(s){r&&r(s)}finally{Hc(i,!1),n&&Lm()}}}Gp(Et.prototype,{then:CI,_then:function(e,r){LP(this,new rK(null,null,e,r,Mt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=arguments[0],t=arguments[1];return typeof r=="function"?this.then(null,n=>n instanceof r?t(n):V0(n)):this.then(null,n=>n&&n.name===r?t(n):V0(n))},finally:function(e){return this.then(r=>(e(),r),r=>(e(),V0(r)))},stack:{get:function(){if(this._stack)return this._stack;try{TI=!0;var e=sK(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{TI=!1}}},timeout:function(e,r){return e<1/0?new Et((t,n)=>{var i=setTimeout(()=>n(new Wt.Timeout(r)),e);this.then(t,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&iu(Et.prototype,Symbol.toStringTag,"Dexie.Promise"),Ip.env=aK(),Gp(Et,{all:function(){var e=eu.apply(null,arguments).map(G0);return new Et(function(r,t){e.length===0&&r([]);var n=e.length;e.forEach((i,s)=>Et.resolve(i).then(o=>{e[s]=o,--n||r(e)},t))})},resolve:e=>{if(e instanceof Et)return e;if(e&&typeof e.then=="function")return new Et((t,n)=>{e.then(t,n)});var r=new Et(Wy,!0,e);return oK(r,AI),r},reject:V0,race:function(){var e=eu.apply(null,arguments).map(G0);return new Et((r,t)=>{e.map(n=>Et.resolve(n).then(r,t))})},PSD:{get:()=>Mt,set:e=>Mt=e},totalEchoes:{get:()=>i$},newPSD:jc,usePSD:xv,scheduler:{get:()=>hy,set:e=>{hy=e}},rejectionMapper:{get:()=>OI,set:e=>{OI=e}},follow:(e,r)=>new Et((t,n)=>jc((i,s)=>{var o=Mt;o.unhandleds=[],o.onunhandled=s,o.finalize=Oh(function(){(function(a){function l(){a(),nw.splice(nw.indexOf(l),1)}nw.push(l),++uh,hy(()=>{--uh==0&&FP()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},r,t,n))}),tw&&(tw.allSettled&&iu(Et,"allSettled",function(){const e=eu.apply(null,arguments).map(G0);return new Et(r=>{e.length===0&&r([]);let t=e.length;const n=new Array(t);e.forEach((i,s)=>Et.resolve(i).then(o=>n[s]={status:"fulfilled",value:o},o=>n[s]={status:"rejected",reason:o}).then(()=>--t||r(n)))})}),tw.any&&typeof AggregateError<"u"&&iu(Et,"any",function(){const e=eu.apply(null,arguments).map(G0);return new Et((r,t)=>{e.length===0&&t(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((s,o)=>Et.resolve(s).then(a=>r(a),a=>{i[o]=a,--n||t(new AggregateError(i))}))})}));const Ui={awaits:0,echoes:0,id:0};var k0e=0,iw=[],UE=0,i$=0,T0e=0;function jc(e,r,t,n){var i=Mt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++T0e;var o=Ip.env;s.env=MP?{Promise:Et,PromiseProp:{value:Et,configurable:!0,writable:!0},all:Et.all,race:Et.race,allSettled:Et.allSettled,any:Et.any,resolve:Et.resolve,reject:Et.reject,nthen:QB(o.nthen,s),gthen:QB(o.gthen,s)}:{},r&&cs(s,r),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=xv(s,e,t,n);return s.ref===0&&s.finalize(),a}function _v(){return Ui.id||(Ui.id=++k0e),++Ui.awaits,Ui.echoes+=eK,Ui.id}function bu(){return!!Ui.awaits&&(--Ui.awaits==0&&(Ui.id=0),Ui.echoes=Ui.awaits*eK,!0)}function G0(e){return Ui.echoes&&e&&e.constructor===tw?(_v(),e.then(r=>(bu(),r),r=>(bu(),ii(r)))):e}function I0e(e){++i$,Ui.echoes&&--Ui.echoes!=0||(Ui.echoes=Ui.id=0),iw.push(Mt),Hc(e,!0)}function A0e(){var e=iw[iw.length-1];iw.pop(),Hc(e,!1)}function Hc(e,r){var t=Mt;if((r?!Ui.echoes||UE++&&e===Mt:!UE||--UE&&e===Mt)||lK(r?I0e.bind(null,e):A0e),e!==Mt&&(Mt=e,t===Ip&&(Ip.env=aK()),MP)){var n=Ip.env.Promise,i=e.env;r$.then=i.nthen,n.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty(rn,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function aK(){var e=rn.Promise;return MP?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(rn,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:r$.then,gthen:e.prototype.then}:{}}function xv(e,r,t,n,i){var s=Mt;try{return Hc(e,!0),r(t,n,i)}finally{Hc(s,!1)}}function lK(e){tK.call(SI,e)}function s$(e,r,t,n){return typeof e!="function"?e:function(){var i=Mt;t&&_v(),Hc(r,!0);try{return e.apply(this,arguments)}finally{Hc(i,!1),n&&lK(bu)}}}function QB(e,r){return function(t,n){return e.call(this,s$(t,r),s$(n,r))}}(""+tK).indexOf("[native code]")===-1&&(_v=bu=Wr);const e6="unhandledrejection";function t6(e,r){var t;try{t=r.onuncatched(e)}catch{}if(t!==!1)try{var n,i={promise:r,reason:e};if(rn.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(e6,!0,!0),cs(n,i)):rn.CustomEvent&&cs(n=new CustomEvent(e6,{detail:i}),i),n&&rn.dispatchEvent&&(dispatchEvent(n),!rn.PromiseRejectionEvent&&rn.onunhandledrejection))try{rn.onunhandledrejection(n)}catch{}xl&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ii=Et.reject;function NI(e,r,t,n){if(e.idbdb&&(e._state.openComplete||Mt.letThrough||e._vip)){var i=e._createTransaction(r,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===DP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>NI(e,r,t,n))):ii(s)}return i._promise(r,(s,o)=>jc(()=>(Mt.trans=i,n(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ii(new Wt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ii(new Wt.DatabaseClosed);e.open().catch(Wr)}return e._state.dbReadyPromise.then(()=>NI(e,r,t,n))}const r6="3.2.4",Qf=String.fromCharCode(65535),RI=-1/0,ql="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",uK="String expected.",dy=[],q_=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),O0e=q_,C0e=q_,cK=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),K_="__dbnames",WE="readonly",qE="readwrite";function Ch(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}const fK={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Y0(e){return typeof e!="string"||/\./.test(e)?r=>r:r=>(r[e]===void 0&&e in r&&delete(r=Bm(r))[e],r)}class P0e{_trans(r,t,n){const i=this._tx||Mt.trans,s=this.name;function o(l,u,f){if(!f.schema[s])throw new Wt.NotFound("Table "+s+" not part of transaction");return t(f.idbtrans,f)}const a=Mm();try{return i&&i.db===this.db?i===Mt.trans?i._promise(r,o,n):jc(()=>i._promise(r,o,n),{trans:i,transless:Mt.transless||Mt}):NI(this.db,r,[this.name],o)}finally{a&&Lm()}}get(r,t){return r&&r.constructor===Object?this.where(r).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:r}).then(i=>this.hook.reading.fire(i))).then(t)}where(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(Wi(r))return new this.db.WhereClause(this,`[${r.join("+")}]`);const t=Un(r);if(t.length===1)return this.where(t[0]).equals(r[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&t.every(f=>u.keyPath.indexOf(f)>=0)&&u.keyPath.every(f=>t.indexOf(f)>=0))[0];if(n&&this.db._maxKey!==Qf)return this.where(n.name).equals(n.keyPath.map(u=>r[u]));!n&&xl&&console.warn(`The query ${JSON.stringify(r)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,f){try{return s.cmp(u,f)===0}catch{return!1}}const[a,l]=t.reduce(([u,f],c)=>{const p=i[c],y=r[c];return[u||p,u||!p?Ch(f,p&&p.multi?w=>{const b=su(w,c);return Wi(b)&&b.some(T=>o(y,T))}:w=>o(y,su(w,c))):f]},[null,null]);return a?this.where(a.name).equals(r[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(r){return this.toCollection().and(r)}count(r){return this.toCollection().count(r)}offset(r){return this.toCollection().offset(r)}limit(r){return this.toCollection().limit(r)}each(r){return this.toCollection().each(r)}toArray(r){return this.toCollection().toArray(r)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(r){return new this.db.Collection(new this.db.WhereClause(this,Wi(r)?`[${r.join("+")}]`:r))}reverse(){return this.toCollection().reverse()}mapToClass(r){this.schema.mappedClass=r;const t=n=>{if(!n)return n;const i=Object.create(r.prototype);for(var s in n)if(no(n,s))try{i[s]=n[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),r}defineClass(){return this.mapToClass(function(r){cs(this,r)})}add(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Y0(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Ia(r,i,o)}catch{}return o})}update(r,t){if(typeof r!="object"||Wi(r))return this.where(":id").equals(r).modify(t);{const n=su(r,this.schema.primKey.keyPath);if(n===void 0)return ii(new Wt.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?Un(t).forEach(i=>{Ia(r,i,t[i])}):t(r,{value:r,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}}put(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=Y0(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Ia(r,i,o)}catch{}return o})}delete(r){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[r]})).then(t=>t.numFailures?Et.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"deleteRange",range:fK})).then(r=>r.numFailures?Et.reject(r.failures[0]):void 0)}bulkGet(r){return this._trans("readonly",t=>this.core.getMany({keys:r,trans:t}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let f=l&&a?r.map(Y0(l)):r;return this.core.mutate({trans:o,type:"add",keys:i,values:f,wantResults:s}).then(({numFailures:c,results:p,lastResult:y,failures:w})=>{if(c===0)return s?p:y;throw new fy(`${this.name}.bulkAdd(): ${c} of ${u} operations failed`,w)})})}bulkPut(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let f=l&&a?r.map(Y0(l)):r;return this.core.mutate({trans:o,type:"put",keys:i,values:f,wantResults:s}).then(({numFailures:c,results:p,lastResult:y,failures:w})=>{if(c===0)return s?p:y;throw new fy(`${this.name}.bulkPut(): ${c} of ${u} operations failed`,w)})})}bulkDelete(r){const t=r.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:r})).then(({numFailures:n,lastResult:i,failures:s})=>{if(n===0)return i;throw new fy(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,s)})}}function py(e){var r={},t=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return r[o].subscribe.apply(null,u),e}if(typeof o=="string")return r[o]};t.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return t;function s(o,a,l){if(typeof o!="object"){var u;a||(a=x0e),l||(l=Wr);var f={subscribers:[],fire:l,subscribe:function(c){f.subscribers.indexOf(c)===-1&&(f.subscribers.push(c),f.fire=a(f.fire,c))},unsubscribe:function(c){f.subscribers=f.subscribers.filter(function(p){return p!==c}),f.fire=f.subscribers.reduce(a,l)}};return r[o]=t[o]=f,f}Un(u=o).forEach(function(c){var p=u[c];if(Wi(p))s(c,u[c][0],u[c][1]);else{if(p!=="asap")throw new Wt.InvalidArgument("Invalid event config");var y=s(c,Uy,function(){for(var w=arguments.length,b=new Array(w);w--;)b[w]=arguments[w];y.subscribers.forEach(function(T){qq(function(){T.apply(null,b)})})})}})}}function Lg(e,r){return kp(r).from({prototype:e}),r}function Dd(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function KE(e,r){e.filter=Ch(e.filter,r)}function VE(e,r,t){var n=e.replayFilter;e.replayFilter=n?()=>Ch(n(),r()):r,e.justLimit=t&&!n}function sw(e,r){if(e.isPrimKey)return r.primaryKey;const t=r.getIndexByKeyPath(e.index);if(!t)throw new Wt.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return t}function n6(e,r,t){const n=sw(e,r.schema);return r.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function Z0(e,r,t,n){const i=e.replayFilter?Ch(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,p=>l.stop(p),p=>l.fail(p))){var f=l.primaryKey,c=""+f;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(f)),no(s,c)||(s[c]=!0,r(a,l,u))}};return Promise.all([e.or._iterate(o,t),i6(n6(e,n,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return i6(n6(e,n,t),Ch(e.algorithm,i),r,!e.keysOnly&&e.valueMapper)}function i6(e,r,t,n){var i=on(n?(s,o,a)=>t(n(s),o,a):t);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();r&&!r(s,a=>o=a,a=>{s.stop(a),o=Wr},a=>{s.fail(a),o=Wr})||i(s.value,s,a=>o=a),o()})})}function ls(e,r){try{const t=s6(e),n=s6(r);if(t!==n)return t==="Array"?1:n==="Array"?-1:t==="binary"?1:n==="binary"?-1:t==="string"?1:n==="string"?-1:t==="Date"?1:n!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>r?1:e<r?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(o6(e),o6(r));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const f=ls(i[u],s[u]);if(f!==0)return f}return o===a?0:o<a?-1:1}(e,r)}}catch{}return NaN}function s6(e){const r=typeof e;if(r!=="object")return r;if(ArrayBuffer.isView(e))return"binary";const t=_I(e);return t==="ArrayBuffer"?"binary":t}function o6(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class N0e{_read(r,t){var n=this._ctx;return n.error?n.table._trans(null,ii.bind(null,n.error)):n.table._trans("readonly",r).then(t)}_write(r){var t=this._ctx;return t.error?t.table._trans(null,ii.bind(null,t.error)):t.table._trans("readwrite",r,"locked")}_addAlgorithm(r){var t=this._ctx;t.algorithm=Ch(t.algorithm,r)}_iterate(r,t){return Z0(this._ctx,r,t,this._ctx.table.core)}clone(r){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return r&&cs(n,r),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(r){var t=this._ctx;return this._read(n=>Z0(t,r,n,t.table.core))}count(r){return this._read(t=>{const n=this._ctx,i=n.table.core;if(Dd(n,!0))return i.count({trans:t,query:{index:sw(n,i.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var s=0;return Z0(n,()=>(++s,!1),t,i).then(()=>s)}).then(r)}sortBy(r,t){const n=r.split(".").reverse(),i=n[0],s=n.length-1;function o(u,f){return f?o(u[n[f]],f-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,f){var c=o(u,s),p=o(f,s);return c<p?-a:c>p?a:0}return this.toArray(function(u){return u.sort(l)}).then(t)}toArray(r){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&Dd(n,!0)&&n.limit>0){const{valueMapper:i}=n,s=sw(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Z0(n,s=>i.push(s),t,n.table.core).then(()=>i)}},r)}offset(r){var t=this._ctx;return r<=0||(t.offset+=r,Dd(t)?VE(t,()=>{var n=r;return(i,s)=>n===0||(n===1?(--n,!1):(s(()=>{i.advance(n),n=0}),!1))}):VE(t,()=>{var n=r;return()=>--n<0})),this}limit(r){return this._ctx.limit=Math.min(this._ctx.limit,r),VE(this._ctx,()=>{var t=r;return function(n,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(r,t){return KE(this._ctx,function(n,i,s){return!r(n.value)||(i(s),t)}),this}first(r){return this.limit(1).toArray(function(t){return t[0]}).then(r)}last(r){return this.reverse().first(r)}filter(r){var t,n;return KE(this._ctx,function(i){return r(i.value)}),t=this._ctx,n=r,t.isMatch=Ch(t.isMatch,n),this}and(r){return this.filter(r)}or(r){return new this.db.WhereClause(this._ctx.table,r,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.key,i)})}eachUniqueKey(r){return this._ctx.unique="unique",this.eachKey(r)}eachPrimaryKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.primaryKey,i)})}keys(r){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.key)}).then(function(){return n}).then(r)}primaryKeys(r){var t=this._ctx;if(t.dir==="next"&&Dd(t,!0)&&t.limit>0)return this._read(i=>{var s=sw(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(r);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.primaryKey)}).then(function(){return n}).then(r)}uniqueKeys(r){return this._ctx.unique="unique",this.keys(r)}firstKey(r){return this.limit(1).keys(function(t){return t[0]}).then(r)}lastKey(r){return this.reverse().firstKey(r)}distinct(){var r=this._ctx,t=r.index&&r.table.schema.idxByName[r.index];if(!t||!t.multi)return this;var n={};return KE(this._ctx,function(i){var s=i.primaryKey.toString(),o=no(n,s);return n[s]=!0,!o}),this}modify(r){var t=this._ctx;return this._write(n=>{var i;if(typeof r=="function")i=r;else{var s=Un(r),o=s.length;i=function(b){for(var T=!1,_=0;_<o;++_){var A=s[_],x=r[A];su(b,A)!==x&&(Ia(b,A,x),T=!0)}return T}}const a=t.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,f=this.db._options.modifyChunkSize||200,c=[];let p=0;const y=[],w=(b,T)=>{const{failures:_,numFailures:A}=T;p+=b-A;for(let x of Un(_))c.push(_[x])};return this.clone().primaryKeys().then(b=>{const T=_=>{const A=Math.min(f,b.length-_);return a.getMany({trans:n,keys:b.slice(_,_+A),cache:"immutable"}).then(x=>{const I=[],O=[],C=l?[]:null,g=[];for(let B=0;B<A;++B){const L=x[B],q={value:Bm(L),primKey:b[_+B]};i.call(q,q.value,q)!==!1&&(q.value==null?g.push(b[_+B]):l||ls(u(L),u(q.value))===0?(O.push(q.value),l&&C.push(b[_+B])):(g.push(b[_+B]),I.push(q.value)))}const M=Dd(t)&&t.limit===1/0&&(typeof r!="function"||r===GE)&&{index:t.index,range:t.range};return Promise.resolve(I.length>0&&a.mutate({trans:n,type:"add",values:I}).then(B=>{for(let L in B.failures)g.splice(parseInt(L),1);w(I.length,B)})).then(()=>(O.length>0||M&&typeof r=="object")&&a.mutate({trans:n,type:"put",keys:C,values:O,criteria:M,changeSpec:typeof r!="function"&&r}).then(B=>w(O.length,B))).then(()=>(g.length>0||M&&r===GE)&&a.mutate({trans:n,type:"delete",keys:g,criteria:M}).then(B=>w(g.length,B))).then(()=>b.length>_+A&&T(_+f))})};return T(0).then(()=>{if(c.length>0)throw new t$("Error modifying one or more objects",c,p,y);return b.length})})})}delete(){var r=this._ctx,t=r.range;return Dd(r)&&(r.isPrimKey&&!C0e||t.type===3)?this._write(n=>{const{primaryKey:i}=r.table.core.schema,s=t;return r.table.core.count({trans:n,query:{index:i,range:s}}).then(o=>r.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:f})=>{if(f)throw new t$("Could not delete some values",Object.keys(a).map(c=>a[c]),o-f);return o-f}))}):this.modify(GE)}}const GE=(e,r)=>r.value=null;function R0e(e,r){return e<r?-1:e===r?0:1}function D0e(e,r){return e>r?-1:e===r?0:1}function qs(e,r,t){var n=e instanceof dK?new e.Collection(e):e;return n._ctx.error=t?new t(r):new TypeError(r),n}function Bd(e){return new e.Collection(e,()=>hK("")).limit(0)}function B0e(e,r,t,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=r[l];if(u!==n[l])return i(e[l],t[l])<0?e.substr(0,l)+t[l]+t.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+t.substr(l+1):a>=0?e.substr(0,a)+r[a]+t.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&s==="next"?e+t.substr(e.length):o<e.length&&s==="prev"?e.substr(0,t.length):a<0?null:e.substr(0,a)+n[a]+t.substr(a+1)}function X0(e,r,t,n){var i,s,o,a,l,u,f,c=t.length;if(!t.every(b=>typeof b=="string"))return qs(e,uK);function p(b){i=function(_){return _==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),s=function(_){return _==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),o=b==="next"?R0e:D0e;var T=t.map(function(_){return{lower:s(_),upper:i(_)}}).sort(function(_,A){return o(_.lower,A.lower)});a=T.map(function(_){return _.upper}),l=T.map(function(_){return _.lower}),u=b,f=b==="next"?"":n}p("next");var y=new e.Collection(e,()=>dc(a[0],l[c-1]+n));y._ondirectionchange=function(b){p(b)};var w=0;return y._addAlgorithm(function(b,T,_){var A=b.key;if(typeof A!="string")return!1;var x=s(A);if(r(x,l,w))return!0;for(var I=null,O=w;O<c;++O){var C=B0e(A,x,a[O],l[O],o,u);C===null&&I===null?w=O+1:(I===null||o(I,C)>0)&&(I=C)}return T(I!==null?function(){b.continue(I+f)}:_),!1}),y}function dc(e,r,t,n){return{type:2,lower:e,upper:r,lowerOpen:t,upperOpen:n}}function hK(e){return{type:1,lower:e,upper:e}}let dK=class{get Collection(){return this._ctx.table.db.Collection}between(r,t,n,i){n=n!==!1,i=i===!0;try{return this._cmp(r,t)>0||this._cmp(r,t)===0&&(n||i)&&(!n||!i)?Bd(this):new this.Collection(this,()=>dc(r,t,!n,!i))}catch{return qs(this,ql)}}equals(r){return r==null?qs(this,ql):new this.Collection(this,()=>hK(r))}above(r){return r==null?qs(this,ql):new this.Collection(this,()=>dc(r,void 0,!0))}aboveOrEqual(r){return r==null?qs(this,ql):new this.Collection(this,()=>dc(r,void 0,!1))}below(r){return r==null?qs(this,ql):new this.Collection(this,()=>dc(void 0,r,!1,!0))}belowOrEqual(r){return r==null?qs(this,ql):new this.Collection(this,()=>dc(void 0,r))}startsWith(r){return typeof r!="string"?qs(this,uK):this.between(r,r+Qf,!0,!0)}startsWithIgnoreCase(r){return r===""?this.startsWith(r):X0(this,(t,n)=>t.indexOf(n[0])===0,[r],Qf)}equalsIgnoreCase(r){return X0(this,(t,n)=>t===n[0],[r],"")}anyOfIgnoreCase(){var r=eu.apply(Qd,arguments);return r.length===0?Bd(this):X0(this,(t,n)=>n.indexOf(t)!==-1,r,"")}startsWithAnyOfIgnoreCase(){var r=eu.apply(Qd,arguments);return r.length===0?Bd(this):X0(this,(t,n)=>n.some(i=>t.indexOf(i)===0),r,Qf)}anyOf(){const r=eu.apply(Qd,arguments);let t=this._cmp;try{r.sort(t)}catch{return qs(this,ql)}if(r.length===0)return Bd(this);const n=new this.Collection(this,()=>dc(r[0],r[r.length-1]));n._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,r.sort(t)};let i=0;return n._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,r[i])>0;)if(++i,i===r.length)return o(a),!1;return t(l,r[i])===0||(o(()=>{s.continue(r[i])}),!1)}),n}notEqual(r){return this.inAnyRange([[RI,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const r=eu.apply(Qd,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return qs(this,ql)}const t=r.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[RI,i]],null);return t.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(r,t){const n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(r.length===0)return Bd(this);if(!r.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return qs(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Wt.InvalidArgument);const l=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;let f,c=i;function p(A,x){return c(A[0],x[0])}try{f=r.reduce(function(A,x){let I=0,O=A.length;for(;I<O;++I){const C=A[I];if(n(x[0],C[1])<0&&n(x[1],C[0])>0){C[0]=o(C[0],x[0]),C[1]=a(C[1],x[1]);break}}return I===O&&A.push(x),A},[]),f.sort(p)}catch{return qs(this,ql)}let y=0;const w=u?A=>i(A,f[y][1])>0:A=>i(A,f[y][1])>=0,b=l?A=>s(A,f[y][0])>0:A=>s(A,f[y][0])>=0;let T=w;const _=new this.Collection(this,()=>dc(f[0][0],f[f.length-1][1],!l,!u));return _._ondirectionchange=A=>{A==="next"?(T=w,c=i):(T=b,c=s),f.sort(p)},_._addAlgorithm((A,x,I)=>{for(var O=A.key;T(O);)if(++y,y===f.length)return x(I),!1;return!!function(C){return!w(C)&&!b(C)}(O)||(this._cmp(O,f[y][1])===0||this._cmp(O,f[y][0])===0||x(()=>{c===i?A.continue(f[y][0]):A.continue(f[y][1])}),!1)}),_}startsWithAnyOf(){const r=eu.apply(Qd,arguments);return r.every(t=>typeof t=="string")?r.length===0?Bd(this):this.inAnyRange(r.map(t=>[t,t+Qf])):qs(this,"startsWithAnyOf() only works with strings")}};function sl(e){return on(function(r){return qy(r),e(r.target.error),!1})}function qy(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Ky="storagemutated",_c="x-storagemutated-1",zc=py(null,Ky);class M0e{_lock(){return Xg(!Mt.global),++this._reculock,this._reculock!==1||Mt.global||(Mt.lockOwnerFor=this),this}_unlock(){if(Xg(!Mt.global),--this._reculock==0)for(Mt.global||(Mt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{xv(r[1],r[0])}catch{}}return this}_locked(){return this._reculock&&Mt.lockOwnerFor!==this}create(r){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Xg(!this.idbtrans),!r&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Wt.DatabaseClosed(n);case"MissingAPIError":throw new Wt.MissingAPI(n.message,n);default:throw new Wt.OpenFailed(n)}if(!this.active)throw new Wt.TransactionInactive;return Xg(this._completion._state===null),(r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=on(i=>{qy(i),this._reject(r.error)}),r.onabort=on(i=>{qy(i),this.active&&this._reject(new Wt.Abort(r.error)),this.active=!1,this.on("abort").fire(i)}),r.oncomplete=on(()=>{this.active=!1,this._resolve(),"mutatedParts"in r&&zc.storagemutated.fire(r.mutatedParts)}),this}_promise(r,t,n){if(r==="readwrite"&&this.mode!=="readwrite")return ii(new Wt.ReadOnly("Transaction is readonly"));if(!this.active)return ii(new Wt.TransactionInactive);if(this._locked())return new Et((s,o)=>{this._blockedFuncs.push([()=>{this._promise(r,t,n).then(s,o)},Mt])});if(n)return jc(()=>{var s=new Et((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Et((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(r){var t=this._root();const n=Et.resolve(r);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Et((o,a)=>{n.then(l=>t._waitingQueue.push(on(o.bind(null,l))),l=>t._waitingQueue.push(on(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Wt.Abort))}table(r){const t=this._memoizedTables||(this._memoizedTables={});if(no(t,r))return t[r];const n=this.schema[r];if(!n)throw new Wt.NotFound("Table "+r+" not part of transaction");const i=new this.db.Table(r,n,this);return i.core=this.db.core.table(r),t[r]=i,i}}function DI(e,r,t,n,i,s,o){return{name:e,keyPath:r,unique:t,multi:n,auto:i,compound:s,src:(t&&!o?"&":"")+(n?"*":"")+(i?"++":"")+pK(r)}}function pK(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function vK(e,r,t){return{name:e,primKey:r,indexes:t,mappedClass:null,idxByName:Kq(t,n=>[n.name,n])}}let Vy=e=>{try{return e.only([[]]),Vy=()=>[[]],[[]]}catch{return Vy=()=>Qf,Qf}};function BI(e){return e==null?()=>{}:typeof e=="string"?function(r){return r.split(".").length===1?n=>n[r]:n=>su(n,r)}(e):r=>su(r,e)}function a6(e){return[].slice.call(e)}let L0e=0;function vy(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function F0e(e,r,t){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:f,lowerOpen:c,upperOpen:p}=l;return u===void 0?f===void 0?null:r.upperBound(f,!!p):f===void 0?r.lowerBound(u,!!c):r.bound(u,f,!!c,!!p)}const{schema:i,hasGetAll:s}=function(l,u){const f=a6(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(c=>u.objectStore(c)).map(c=>{const{keyPath:p,autoIncrement:y}=c,w=Wi(p),b=p==null,T={},_={name:c.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:p,autoIncrement:y,unique:!0,extractKey:BI(p)},indexes:a6(c.indexNames).map(A=>c.index(A)).map(A=>{const{name:x,unique:I,multiEntry:O,keyPath:C}=A,g={name:x,compound:Wi(C),keyPath:C,unique:I,multiEntry:O,extractKey:BI(C)};return T[vy(C)]=g,g}),getIndexByKeyPath:A=>T[vy(A)]};return T[":id"]=_.primaryKey,p!=null&&(T[vy(p)]=_.primaryKey),_})},hasGetAll:f.length>0&&"getAll"in u.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=i.tables.map(l=>function(u){const f=u.name;return{name:f,schema:u,mutate:function({trans:c,type:p,keys:y,values:w,range:b}){return new Promise((T,_)=>{T=on(T);const A=c.objectStore(f),x=A.keyPath==null,I=p==="put"||p==="add";if(!I&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:O}=y||w||{length:1};if(y&&w&&y.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const g=[],M=[];let B=0;const L=Q=>{++B,qy(Q)};if(p==="deleteRange"){if(b.type===4)return T({numFailures:B,failures:M,results:[],lastResult:void 0});b.type===3?g.push(C=A.clear()):g.push(C=A.delete(n(b)))}else{const[Q,te]=I?x?[w,y]:[w,null]:[y,null];if(I)for(let X=0;X<O;++X)g.push(C=te&&te[X]!==void 0?A[p](Q[X],te[X]):A[p](Q[X])),C.onerror=L;else for(let X=0;X<O;++X)g.push(C=A[p](Q[X])),C.onerror=L}const q=Q=>{const te=Q.target.result;g.forEach((X,j)=>X.error!=null&&(M[j]=X.error)),T({numFailures:B,failures:M,results:p==="delete"?y:g.map(X=>X.result),lastResult:te})};C.onerror=Q=>{L(Q),q(Q)},C.onsuccess=q})},getMany:({trans:c,keys:p})=>new Promise((y,w)=>{y=on(y);const b=c.objectStore(f),T=p.length,_=new Array(T);let A,x=0,I=0;const O=g=>{const M=g.target;_[M._pos]=M.result,++I===x&&y(_)},C=sl(w);for(let g=0;g<T;++g)p[g]!=null&&(A=b.get(p[g]),A._pos=g,A.onsuccess=O,A.onerror=C,++x);x===0&&y(_)}),get:({trans:c,key:p})=>new Promise((y,w)=>{y=on(y);const b=c.objectStore(f).get(p);b.onsuccess=T=>y(T.target.result),b.onerror=sl(w)}),query:function(c){return p=>new Promise((y,w)=>{y=on(y);const{trans:b,values:T,limit:_,query:A}=p,x=_===1/0?void 0:_,{index:I,range:O}=A,C=b.objectStore(f),g=I.isPrimaryKey?C:C.index(I.name),M=n(O);if(_===0)return y({result:[]});if(c){const B=T?g.getAll(M,x):g.getAllKeys(M,x);B.onsuccess=L=>y({result:L.target.result}),B.onerror=sl(w)}else{let B=0;const L=T||!("openKeyCursor"in g)?g.openCursor(M):g.openKeyCursor(M),q=[];L.onsuccess=Q=>{const te=L.result;return te?(q.push(T?te.value:te.primaryKey),++B===_?y({result:q}):void te.continue()):y({result:q})},L.onerror=sl(w)}})}(s),openCursor:function({trans:c,values:p,query:y,reverse:w,unique:b}){return new Promise((T,_)=>{T=on(T);const{index:A,range:x}=y,I=c.objectStore(f),O=A.isPrimaryKey?I:I.index(A.name),C=w?b?"prevunique":"prev":b?"nextunique":"next",g=p||!("openKeyCursor"in O)?O.openCursor(n(x),C):O.openKeyCursor(n(x),C);g.onerror=sl(_),g.onsuccess=on(M=>{const B=g.result;if(!B)return void T(null);B.___id=++L0e,B.done=!1;const L=B.continue.bind(B);let q=B.continuePrimaryKey;q&&(q=q.bind(B));const Q=B.advance.bind(B),te=()=>{throw new Error("Cursor not stopped")};B.trans=c,B.stop=B.continue=B.continuePrimaryKey=B.advance=()=>{throw new Error("Cursor not started")},B.fail=on(_),B.next=function(){let X=1;return this.start(()=>X--?this.continue():this.stop()).then(()=>this)},B.start=X=>{const j=new Promise((ie,_e)=>{ie=on(ie),g.onerror=sl(_e),B.fail=_e,B.stop=we=>{B.stop=B.continue=B.continuePrimaryKey=B.advance=te,ie(we)}}),Z=()=>{if(g.result)try{X()}catch(ie){B.fail(ie)}else B.done=!0,B.start=()=>{throw new Error("Cursor behind last entry")},B.stop()};return g.onsuccess=on(ie=>{g.onsuccess=Z,Z()}),B.continue=L,B.continuePrimaryKey=q,B.advance=Q,Z(),j},T(B)},_)})},count({query:c,trans:p}){const{index:y,range:w}=c;return new Promise((b,T)=>{const _=p.objectStore(f),A=y.isPrimaryKey?_:_.index(y.name),x=n(w),I=x?A.count(x):A.count();I.onsuccess=on(O=>b(O.target.result)),I.onerror=sl(T)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Vy(r),schema:i}}function MI({_novip:e},r){const t=r.db,n=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(f,c){return c.reduce((p,{create:y})=>({...p,...y(p)}),f)}(F0e(s,o,l),i.dbcore)}}(e._middlewares,t,e._deps,r);e.core=n.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function o$({_novip:e},r,t,n){t.forEach(i=>{const s=n[i];r.forEach(o=>{const a=PP(o,i);(!a||"value"in a&&a.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?iu(o,i,{get(){return this.table(i)},set(l){Uq(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function LI({_novip:e},r){r.forEach(t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]})}function j0e(e,r){return e._cfg.version-r._cfg.version}function H0e(e,r,t,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(t),s._completion.catch(n);const o=s._reject.bind(s),a=Mt.transless||Mt;jc(()=>{Mt.trans=s,Mt.transless=a,r===0?(Un(i).forEach(l=>{YE(t,l,i[l].primKey,i[l].indexes)}),MI(e,t),Et.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,f,c){const p=[],y=l._versions;let w=l._dbSchema=jI(l,l.idbdb,c),b=!1;const T=y.filter(A=>A._cfg.version>=u);function _(){return p.length?Et.resolve(p.shift()(f.idbtrans)).then(_):Et.resolve()}return T.forEach(A=>{p.push(()=>{const x=w,I=A._cfg.dbschema;HI(l,x,c),HI(l,I,c),w=l._dbSchema=I;const O=gK(x,I);O.add.forEach(g=>{YE(c,g[0],g[1].primKey,g[1].indexes)}),O.change.forEach(g=>{if(g.recreate)throw new Wt.Upgrade("Not yet support for changing primary key");{const M=c.objectStore(g.name);g.add.forEach(B=>FI(M,B)),g.change.forEach(B=>{M.deleteIndex(B.name),FI(M,B)}),g.del.forEach(B=>M.deleteIndex(B))}});const C=A._cfg.contentUpgrade;if(C&&A._cfg.version>u){MI(l,c),f._memoizedTables={},b=!0;let g=Vq(I);O.del.forEach(q=>{g[q]=x[q]}),LI(l,[l.Transaction.prototype]),o$(l,[l.Transaction.prototype],Un(g),g),f.schema=g;const M=NP(C);let B;M&&_v();const L=Et.follow(()=>{if(B=C(f),B&&M){var q=bu.bind(null,null);B.then(q,q)}});return B&&typeof B.then=="function"?Et.resolve(B):L.then(()=>B)}}),p.push(x=>{(!b||!O0e)&&function(I,O){[].slice.call(O.db.objectStoreNames).forEach(C=>I[C]==null&&O.db.deleteObjectStore(C))}(A._cfg.dbschema,x),LI(l,[l.Transaction.prototype]),o$(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),_().then(()=>{var A,x;x=c,Un(A=w).forEach(I=>{x.db.objectStoreNames.contains(I)||YE(x,I,A[I].primKey,A[I].indexes)})})}(e,r,s,t).catch(o)})}function gK(e,r){const t={del:[],add:[],change:[]};let n;for(n in e)r[n]||t.del.push(n);for(n in r){const i=e[n],s=r[n];if(i){const o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!q_)o.recreate=!0,t.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const f=a[u],c=l[u];f?f.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([n,s])}return t}function YE(e,r,t,n){const i=e.db.createObjectStore(r,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return n.forEach(s=>FI(i,s)),i}function FI(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function jI(e,r,t){const n={};return e$(r.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const a=DI(pK(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let f=0;f<s.indexNames.length;++f){const c=s.index(s.indexNames[f]);o=c.keyPath;var u=DI(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}n[i]=vK(i,a,l)}),n}function HI({_novip:e},r,t){const n=t.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=t.objectStore(s);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,f=typeof u=="string"?u:"["+e$(u).join("+")+"]";if(r[s]){const c=r[s].idxByName[f];c&&(c.name=l,delete r[s].idxByName[f],r[s].idxByName[l]=c)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&rn.WorkerGlobalScope&&rn instanceof rn.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class z0e{_parseStoresSpec(r,t){Un(r).forEach(n=>{if(r[n]!==null){var i=r[n].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return DI(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Wi(u),a===0)}),s=i.shift();if(s.multi)throw new Wt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Wt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Wt.Schema("Index must have a name and cannot be an empty string")}),t[n]=vK(n,s,i)}})}stores(r){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?cs(this._cfg.storesSource,r):r;const n=t._versions,i={};let s={};return n.forEach(o=>{cs(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,LI(t,[t._allTables,t,t.Transaction.prototype]),o$(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Un(s),s),t._storeNames=Un(s),this}upgrade(r){return this._cfg.contentUpgrade=BP(this._cfg.contentUpgrade||Wr,r),this}}function jP(e,r){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new ou(K_,{addons:[],indexedDB:e,IDBKeyRange:r}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function HP(e){return e&&typeof e.databases=="function"}function zI(e){return jc(function(){return Mt.letThrough=!0,e()})}function U0e(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(r){var t=function(){return indexedDB.databases().finally(r)};e=setInterval(t,100),t()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function W0e(e){const r=e._state,{indexedDB:t}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?ii(r.dbOpenError):e);xl&&(r.openCanceller._stackHolder=Wh()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const n=r.openCanceller;function i(){if(r.openCanceller!==n)throw new Wt.DatabaseClosed("db.open() was cancelled")}let s=r.dbReadyResolve,o=null,a=!1;return Et.race([n,(typeof navigator>"u"?Et.resolve():U0e()).then(()=>new Et((l,u)=>{if(i(),!t)throw new Wt.MissingAPI;const f=e.name,c=r.autoSchema?t.open(f):t.open(f,Math.round(10*e.verno));if(!c)throw new Wt.MissingAPI;c.onerror=sl(u),c.onblocked=on(e._fireOnBlocked),c.onupgradeneeded=on(p=>{if(o=c.transaction,r.autoSchema&&!e._options.allowEmptyDB){c.onerror=qy,o.abort(),c.result.close();const w=t.deleteDatabase(f);w.onsuccess=w.onerror=on(()=>{u(new Wt.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{o.onerror=sl(u);var y=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;a=y<1,e._novip.idbdb=c.result,H0e(e,y/10,o,u)}},u),c.onsuccess=on(()=>{o=null;const p=e._novip.idbdb=c.result,y=e$(p.objectStoreNames);if(y.length>0)try{const b=p.transaction((w=y).length===1?w[0]:w,"readonly");r.autoSchema?function({_novip:T},_,A){T.verno=_.version/10;const x=T._dbSchema=jI(0,_,A);T._storeNames=e$(_.objectStoreNames,0),o$(T,[T._allTables],Un(x),x)}(e,p,b):(HI(e,e._dbSchema,b),function(T,_){const A=gK(jI(0,T.idbdb,_),T._dbSchema);return!(A.add.length||A.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),MI(e,b)}catch{}var w;dy.push(e),p.onversionchange=on(b=>{r.vcFired=!0,e.on("versionchange").fire(b)}),p.onclose=on(b=>{e.on("close").fire(b)}),a&&function({indexedDB:b,IDBKeyRange:T},_){!HP(b)&&_!==K_&&jP(b,T).put({name:_}).catch(Wr)}(e._deps,f),l()},u)}))]).then(()=>(i(),r.onReadyBeingFired=[],Et.resolve(zI(()=>e.on.ready.fire(e.vip))).then(function l(){if(r.onReadyBeingFired.length>0){let u=r.onReadyBeingFired.reduce(BP,Wr);return r.onReadyBeingFired=[],Et.resolve(zI(()=>u(e.vip))).then(l)}}))).finally(()=>{r.onReadyBeingFired=null,r.isBeingOpened=!1}).then(()=>e).catch(l=>{r.dbOpenError=l;try{o&&o.abort()}catch{}return n===r.openCanceller&&e._close(),ii(l)}).finally(()=>{r.openComplete=!0,s()})}function UI(e){var r=s=>e.next(s),t=i(r),n=i(s=>e.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(t,n):Wi(l)?Promise.all(l).then(t,n):t(l)}}return i(r)()}function q0e(e,r,t){var n=arguments.length;if(n<2)throw new Wt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return t=i.pop(),[e,Gq(i),t]}function yK(e,r,t,n,i){return Et.resolve().then(()=>{const s=Mt.transless||Mt,o=e._createTransaction(r,t,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===DP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>yK(e,r,t,null,i))):ii(c)}const l=NP(i);let u;l&&_v();const f=Et.follow(()=>{if(u=i.call(o,o),u)if(l){var c=bu.bind(null,null);u.then(c,c)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=UI(u))},a);return(u&&typeof u.then=="function"?Et.resolve(u).then(c=>o.active?c:ii(new Wt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>u)).then(c=>(n&&o._resolve(),o._completion.then(()=>c))).catch(c=>(o._reject(c),ii(c)))})}function J0(e,r,t){const n=Wi(e)?e.slice():[e];for(let i=0;i<t;++i)n.push(r);return n}const K0e={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(r){const t=e.table(r),{schema:n}=t,i={},s=[];function o(f,c,p){const y=vy(f),w=i[y]=i[y]||[],b=f==null?0:typeof f=="string"?1:f.length,T=c>0,_={...p,isVirtual:T,keyTail:c,keyLength:b,extractKey:BI(f),unique:!T&&p.unique};return w.push(_),_.isPrimaryKey||s.push(_),b>1&&o(b===2?f[0]:f.slice(0,b-1),c+1,p),w.sort((A,x)=>A.keyTail-x.keyTail),_}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const f of n.indexes)o(f.keyPath,0,f);function l(f){const c=f.query.index;return c.isVirtual?{...f,query:{index:c,range:(p=f.query.range,y=c.keyTail,{type:p.type===1?2:p.type,lower:J0(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:J0(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}:f;var p,y}return{...t,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(f){const c=i[vy(f)];return c&&c[0]}},count:f=>t.count(l(f)),query:f=>t.query(l(f)),openCursor(f){const{keyTail:c,isVirtual:p,keyLength:y}=f.query.index;return p?t.openCursor(l(f)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(_){_!=null?b.continue(J0(_,f.reverse?e.MAX_KEY:e.MIN_KEY,c)):f.unique?b.continue(b.key.slice(0,y).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,c)):b.continue()}},continuePrimaryKey:{value(_,A){b.continuePrimaryKey(J0(_,e.MAX_KEY,c),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const _=b.key;return y===1?_[0]:_.slice(0,y)}},value:{get:()=>b.value}})}(w)):t.openCursor(f)}}}}}};function zP(e,r,t,n){return t=t||{},n=n||"",Un(e).forEach(i=>{if(no(r,i)){var s=e[i],o=r[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=_I(s);a!==_I(o)?t[n+i]=r[i]:a==="Object"?zP(s,o,t,n+i+"."):s!==o&&(t[n+i]=r[i])}else s!==o&&(t[n+i]=r[i])}else t[n+i]=void 0}),Un(r).forEach(i=>{no(e,i)||(t[n+i]=r[i])}),t}const V0e={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(r){const t=e.table(r),{primaryKey:n}=t.schema;return{...t,mutate(s){const o=Mt.trans,{deleting:a,creating:l,updating:u}=o.table(r).hook;switch(s.type){case"add":if(l.fire===Wr)break;return o._promise("readwrite",()=>f(s),!0);case"put":if(l.fire===Wr&&u.fire===Wr)break;return o._promise("readwrite",()=>f(s),!0);case"delete":if(a.fire===Wr)break;return o._promise("readwrite",()=>f(s),!0);case"deleteRange":if(a.fire===Wr)break;return o._promise("readwrite",()=>function(p){return c(p.trans,p.range,1e4)}(s),!0)}return t.mutate(s);function f(p){const y=Mt.trans,w=p.keys||function(b,T){return T.type==="delete"?T.keys:T.keys||T.values.map(b.extractKey)}(n,p);if(!w)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:w}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(b,T,_){return T.type==="add"?Promise.resolve([]):b.getMany({trans:T.trans,keys:_,cache:"immutable"})}(t,p,w).then(b=>{const T=w.map((_,A)=>{const x=b[A],I={onerror:null,onsuccess:null};if(p.type==="delete")a.fire.call(I,_,x,y);else if(p.type==="add"||x===void 0){const O=l.fire.call(I,_,p.values[A],y);_==null&&O!=null&&(_=O,p.keys[A]=_,n.outbound||Ia(p.values[A],n.keyPath,_))}else{const O=zP(x,p.values[A]),C=u.fire.call(I,O,_,x,y);if(C){const g=p.values[A];Object.keys(C).forEach(M=>{no(g,M)?g[M]=C[M]:Ia(g,M,C[M])})}}return I});return t.mutate(p).then(({failures:_,results:A,numFailures:x,lastResult:I})=>{for(let O=0;O<w.length;++O){const C=A?A[O]:w[O],g=T[O];C==null?g.onerror&&g.onerror(_[O]):g.onsuccess&&g.onsuccess(p.type==="put"&&b[O]?p.values[O]:C)}return{failures:_,results:A,numFailures:x,lastResult:I}}).catch(_=>(T.forEach(A=>A.onerror&&A.onerror(_)),Promise.reject(_)))})}function c(p,y,w){return t.query({trans:p,values:!1,query:{index:n,range:y},limit:w}).then(({result:b})=>f({type:"delete",keys:b,trans:p}).then(T=>T.numFailures>0?Promise.reject(T.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:c(p,{...y,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function mK(e,r,t){try{if(!r||r.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<r.keys.length&&s<e.length;++i)ls(r.keys[i],e[s])===0&&(n.push(t?Bm(r.values[i]):r.values[i]),++s);return n.length===e.length?n:null}catch{return null}}const G0e={stack:"dbcore",level:-1,create:e=>({table:r=>{const t=e.table(r);return{...t,getMany:n=>{if(!n.cache)return t.getMany(n);const i=mK(n.keys,n.trans._cache,n.cache==="clone");return i?Et.resolve(i):t.getMany(n).then(s=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Bm(s):s},s))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),t.mutate(n))}}})};function UP(e){return!("from"in e)}const Yl=function(e,r){if(!this){const t=new Yl;return e&&"d"in e&&cs(t,e),t}cs(this,arguments.length?{d:1,from:e,to:arguments.length>1?r:e}:{d:0})};function Gy(e,r,t){const n=ls(r,t);if(isNaN(n))return;if(n>0)throw RangeError();if(UP(e))return cs(e,{from:r,to:t,d:1});const i=e.l,s=e.r;if(ls(t,e.from)<0)return i?Gy(i,r,t):e.l={from:r,to:t,d:1,l:null,r:null},l6(e);if(ls(r,e.to)>0)return s?Gy(s,r,t):e.r={from:r,to:t,d:1,l:null,r:null},l6(e);ls(r,e.from)<0&&(e.from=r,e.l=null,e.d=s?s.d+1:1),ls(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&a$(e,i),s&&o&&a$(e,s)}function a$(e,r){UP(r)||function t(n,{from:i,to:s,l:o,r:a}){Gy(n,i,s),o&&t(n,o),a&&t(n,a)}(e,r)}function Y0e(e,r){const t=WI(r);let n=t.next();if(n.done)return!1;let i=n.value;const s=WI(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(ls(a.from,i.to)<=0&&ls(a.to,i.from)>=0)return!0;ls(i.from,a.from)<0?i=(n=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function WI(e){let r=UP(e)?null:{s:0,n:e};return{next(t){const n=arguments.length>0;for(;r;)switch(r.s){case 0:if(r.s=1,n)for(;r.n.l&&ls(t,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!n||ls(t,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function l6(e){var r,t;const n=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],o[i]=a[s],e[s]=o,o.d=u6(o)}e.d=u6(e)}function u6({r:e,l:r}){return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}Gp(Yl.prototype,{add(e){return a$(this,e),this},addKey(e){return Gy(this,e,e),this},addKeys(e){return e.forEach(r=>Gy(this,r,r)),this},[xI](){return WI(this)}});const Z0e={stack:"dbcore",level:0,create:e=>{const r=e.schema.name,t=new Yl(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:p=>{const y=p.trans,w=y.mutatedParts||(y.mutatedParts={}),b=C=>{const g=`idb://${r}/${n}/${C}`;return w[g]||(w[g]=new Yl)},T=b(""),_=b(":dels"),{type:A}=p;let[x,I]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const O=p.trans._cache;return i.mutate(p).then(C=>{if(Wi(x)){A!=="delete"&&(x=C.results),T.addKeys(x);const g=mK(x,O);g||A==="add"||_.addKeys(x),(g||I)&&function(M,B,L,q){function Q(te){const X=M(te.name||"");function j(ie){return ie!=null?te.extractKey(ie):null}const Z=ie=>te.multiEntry&&Wi(ie)?ie.forEach(_e=>X.addKey(_e)):X.addKey(ie);(L||q).forEach((ie,_e)=>{const we=L&&j(L[_e]),Ce=q&&j(q[_e]);ls(we,Ce)!==0&&(we!=null&&Z(we),Ce!=null&&Z(Ce))})}B.indexes.forEach(Q)}(b,s,g,I)}else if(x){const g={from:x.lower,to:x.upper};_.add(g),T.add(g)}else T.add(t),_.add(t),s.indexes.forEach(g=>b(g.name).add(t));return C})}},f=({query:{index:p,range:y}})=>{var w,b;return[p,new Yl((w=y.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=y.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},c={get:p=>[o,new Yl(p.key)],getMany:p=>[o,new Yl().addKeys(p.keys)],count:f,query:f,openCursor:f};return Un(c).forEach(p=>{u[p]=function(y){const{subscr:w}=Mt;if(w){const b=I=>{const O=`idb://${r}/${n}/${I}`;return w[O]||(w[O]=new Yl)},T=b(""),_=b(":dels"),[A,x]=c[p](y);if(b(A.name||"").add(x),!A.isPrimaryKey){if(p!=="count"){const I=p==="query"&&l&&y.values&&i.query({...y,values:!1});return i[p].apply(this,arguments).then(O=>{if(p==="query"){if(l&&y.values)return I.then(({result:g})=>(T.addKeys(g),O));const C=y.values?O.result.map(a):O.result;y.values?T.addKeys(C):_.addKeys(C)}else if(p==="openCursor"){const C=O,g=y.values;return C&&Object.create(C,{key:{get:()=>(_.addKey(C.primaryKey),C.key)},primaryKey:{get(){const M=C.primaryKey;return _.addKey(M),M}},value:{get:()=>(g&&T.addKey(C.primaryKey),C.value)}})}return O})}_.add(t)}}return i[p].apply(this,arguments)}}),u}}}};class ou{constructor(r,t){this._middlewares={},this.verno=0;const n=ou.dependencies;this._options=t={addons:ou.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Wr,dbReadyPromise:null,cancelOpen:Wr,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new Et(a=>{s.dbReadyResolve=a}),s.openCanceller=new Et((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=r,this.on=py(this,"populate","blocked","versionchange","close",{ready:[BP,Wr]}),this.on.ready.subscribe=Wq(this.on.ready.subscribe,a=>(l,u)=>{ou.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||Et.resolve().then(l),u&&a(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),u&&a(l);else{a(l);const c=this;u||a(function p(){c.on.ready.unsubscribe(l),c.on.ready.unsubscribe(p)})}})}),this.Collection=(o=this,Lg(N0e.prototype,function(a,l){this.db=o;let u=fK,f=null;if(l)try{u=l()}catch(w){f=w}const c=a._ctx,p=c.table,y=p.hook.reading.fire;this._ctx={table:p,index:c.index,isPrimKey:!c.index||p.schema.primKey.keyPath&&c.index===p.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:c.or,valueMapper:y!==Uy?y:null}})),this.Table=function(a){return Lg(P0e.prototype,function(l,u,f){this.db=a,this._tx=f,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:py(null,{creating:[w0e,Wr],reading:[b0e,Uy],updating:[_0e,Wr],deleting:[$0e,Wr]})})}(this),this.Transaction=function(a){return Lg(M0e.prototype,function(l,u,f,c,p){this.db=a,this.mode=l,this.storeNames=u,this.schema=f,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=py(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Et((y,w)=>{this._resolve=y,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},y=>{var w=this.active;return this.active=!1,this.on.error.fire(y),this.parent?this.parent._reject(y):w&&this.idbtrans&&this.idbtrans.abort(),ii(y)})})}(this),this.Version=function(a){return Lg(z0e.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Lg(dK.prototype,function(l,u,f){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:f};const c=a._deps.indexedDB;if(!c)throw new Wt.MissingAPI;this._cmp=this._ascending=c.cmp.bind(c),this._descending=(p,y)=>c.cmp(y,p),this._max=(p,y)=>c.cmp(p,y)>0?p:y,this._min=(p,y)=>c.cmp(p,y)<0?p:y,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Vy(t.IDBKeyRange),this._createTransaction=(a,l,u,f)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,f),this._fireOnBlocked=a=>{this.on("blocked").fire(a),dy.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(K0e),this.use(V0e),this.use(Z0e),this.use(G0e),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(r){if(isNaN(r)||r<.1)throw new Wt.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new Wt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);const t=this._versions;var n=t.filter(i=>i._cfg.version===r)[0];return n||(n=new this.Version(r),t.push(n),t.sort(j0e),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(r){return this.idbdb&&(this._state.openComplete||Mt.letThrough||this._vip)?r():new Et((t,n)=>{if(this._state.openComplete)return n(new Wt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new Wt.DatabaseClosed);this.open().catch(Wr)}this._state.dbReadyPromise.then(t,n)}).then(r)}use({stack:r,create:t,level:n,name:i}){i&&this.unuse({stack:r,name:i});const s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:t,level:n??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:r,name:t,create:n}){return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(i=>n?i.create!==n:!!t&&i.name!==t)),this}open(){return W0e(this)}_close(){const r=this._state,t=dy.indexOf(this);if(t>=0&&dy.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}r.dbReadyPromise=new Et(n=>{r.dbReadyResolve=n}),r.openCanceller=new Et((n,i)=>{r.cancelOpen=i})}close(){this._close();const r=this._state;this._options.autoOpen=!1,r.dbOpenError=new Wt.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError)}delete(){const r=arguments.length>0,t=this._state;return new Et((n,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=on(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!HP(a)&&u!==K_&&jP(a,l).delete(u).catch(Wr)})(this._deps,this.name),n()}),o.onerror=sl(i),o.onblocked=this._fireOnBlocked};if(r)throw new Wt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Un(this._allTables).map(r=>this._allTables[r])}transaction(){const r=q0e.apply(this,arguments);return this._transaction.apply(this,r)}_transaction(r,t,n){let i=Mt.trans;i&&i.db===this&&r.indexOf("!")===-1||(i=null);const s=r.indexOf("?")!==-1;let o,a;r=r.replace("!","").replace("?","");try{if(a=t.map(u=>{var f=u instanceof this.Table?u.name:u;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),r=="r"||r===WE)o=WE;else{if(r!="rw"&&r!=qE)throw new Wt.InvalidArgument("Invalid transaction mode: "+r);o=qE}if(i){if(i.mode===WE&&o===qE){if(!s)throw new Wt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new Wt.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(f,c)=>{c(u)}):ii(u)}const l=yK.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Mt.trans?xv(Mt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(r){if(!no(this._allTables,r))throw new Wt.InvalidTable(`Table ${r} does not exist`);return this._allTables[r]}}const X0e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class J0e{constructor(r){this._subscribe=r}subscribe(r,t,n){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:t,complete:n})}[X0e](){return this}}function bK(e,r){return Un(r).forEach(t=>{a$(e[t]||(e[t]=new Yl),r[t])}),e}function Q0e(e){let r,t=!1;const n=new J0e(i=>{const s=NP(e);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,zc.storagemutated.unsubscribe(y)}};i.start&&i.start(u);let f=!1,c=!1;function p(){return Un(l).some(b=>a[b]&&Y0e(a[b],l[b]))}const y=b=>{bK(a,b),p()&&w()},w=()=>{if(f||o)return;a={};const b={},T=function(_){s&&_v();const A=()=>jc(e,{subscr:_,trans:null}),x=Mt.trans?xv(Mt.transless,A):A();return s&&x.then(bu,bu),x}(b);c||(zc(Ky,y),c=!0),f=!0,Promise.resolve(T).then(_=>{t=!0,r=_,f=!1,o||(p()?w():(a={},l=b,i.next&&i.next(_)))},_=>{f=!1,t=!1,i.error&&i.error(_),u.unsubscribe()})};return w(),u});return n.hasValue=()=>t,n.getValue=()=>r,n}let qI;try{qI={indexedDB:rn.indexedDB||rn.mozIndexedDB||rn.webkitIndexedDB||rn.msIndexedDB,IDBKeyRange:rn.IDBKeyRange||rn.webkitIDBKeyRange}}catch{qI={indexedDB:null,IDBKeyRange:null}}const If=ou;function ow(e){let r=ru;try{ru=!0,zc.storagemutated.fire(e)}finally{ru=r}}Gp(If,{...ew,delete:e=>new If(e,{addons:[]}).delete(),exists:e=>new If(e,{addons:[]}).open().then(r=>(r.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:r,IDBKeyRange:t}){return HP(r)?Promise.resolve(r.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==K_)):jP(r,t).toCollection().primaryKeys()}(If.dependencies).then(e)}catch{return ii(new Wt.MissingAPI)}},defineClass:()=>function(e){cs(this,e)},ignoreTransaction:e=>Mt.trans?xv(Mt.transless,e):e(),vip:zI,async:function(e){return function(){try{var r=UI(e.apply(this,arguments));return r&&typeof r.then=="function"?r:Et.resolve(r)}catch(t){return ii(t)}}},spawn:function(e,r,t){try{var n=UI(e.apply(t,r||[]));return n&&typeof n.then=="function"?n:Et.resolve(n)}catch(i){return ii(i)}},currentTransaction:{get:()=>Mt.trans||null},waitFor:function(e,r){const t=Et.resolve(typeof e=="function"?If.ignoreTransaction(e):e).timeout(r||6e4);return Mt.trans?Mt.trans.waitFor(t):t},Promise:Et,debug:{get:()=>xl,set:e=>{Zq(e,e==="dexie"?()=>!0:cK)}},derive:kp,extend:cs,props:Gp,override:Wq,Events:py,on:zc,liveQuery:Q0e,extendObservabilitySet:bK,getByKeyPath:su,setByKeyPath:Ia,delByKeyPath:function(e,r){typeof r=="string"?Ia(e,r,void 0):"length"in r&&[].map.call(r,function(t){Ia(e,t,void 0)})},shallowClone:Vq,deepClone:Bm,getObjectDiff:zP,cmp:ls,asap:qq,minKey:RI,addons:[],connections:dy,errnames:DP,dependencies:qI,semVer:r6,version:r6.split(".").map(e=>parseInt(e)).reduce((e,r,t)=>e+r/Math.pow(10,2*t))}),If.maxKey=Vy(If.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zc(Ky,e=>{if(!ru){let r;q_?(r=document.createEvent("CustomEvent"),r.initCustomEvent(_c,!0,!0,e)):r=new CustomEvent(_c,{detail:e}),ru=!0,dispatchEvent(r),ru=!1}}),addEventListener(_c,({detail:e})=>{ru||ow(e)}));let ru=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(_c);typeof e.unref=="function"&&e.unref(),zc(Ky,r=>{ru||e.postMessage(r)}),e.onmessage=r=>{r.data&&ow(r.data)}}else if(typeof self<"u"&&typeof navigator<"u"){zc(Ky,r=>{try{ru||(typeof localStorage<"u"&&localStorage.setItem(_c,JSON.stringify({trig:Math.random(),changedParts:r})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:_c,changedParts:r})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",r=>{if(r.key===_c){const t=JSON.parse(r.newValue);t&&ow(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:r}){r&&r.type===_c&&ow(r.changedParts)})}Et.rejectionMapper=function(e,r){if(!e||e instanceof Tp||e instanceof TypeError||e instanceof SyntaxError||!e.name||!JB[e.name])return e;var t=new JB[e.name](r||e.message,e);return"stack"in e&&iu(t,"stack",{get:function(){return this.inner.stack}}),t},Zq(xl,cK);class e1e extends ou{constructor(){super("iris");oe(this,"events");this.version(2).stores({events:"id, pubkey, kind, created_at"})}}const ca=new e1e,ul={db:ca,subscribedEventIds:new Set,subscribedAuthors:new Set,seenFilters:new Set,saveQueue:[],clear(){return ca.delete()},save:$n.throttle(e=>{const r=e.saveQueue;e.saveQueue=[],ca.events.bulkAdd(r).catch(()=>{})},500),saveEvent(e){this.saveQueue.push(e),this.save(this)},init(){const e=de.getPubKey();ca.events.where({pubkey:e}).each(r=>{Me.handle(r,!1,!1)}).then(()=>ca.events.where({kind:3}).each(r=>{Me.handle(r,!1,!1)})).then(()=>ca.events.where({kind:0}).each(r=>{Me.handle(r,!1,!1)})).then(()=>ca.events.where({kind:4}).each(r=>{Me.handle(r,!1,!1)})).then(()=>ca.events.orderBy("created_at").reverse().filter(r=>r.kind===1).limit(5e3).each(r=>{Me.handle(r,!1,!1)}))},subscribeToAuthors:$n.throttle(e=>{const r=Array.from(ul.subscribedAuthors.values());ul.subscribedAuthors.clear(),ca.events.where("pubkey").anyOf(r).limit(e||1e3).each(t=>{Me.handle(t,!1,!1)})},1e3),subscribeToEventIds:$n.throttle(()=>{const e=Array.from(ul.subscribedEventIds.values());ul.subscribedEventIds.clear(),ca.events.where("id").anyOf(e).each(r=>{Me.handle(r,!1,!1)})},1e3),subscribe(e){var t,n;if(!e||e["#e"]||e["#p"])return;let r=ca.events;if((t=e.ids)!=null&&t.length){e.ids.forEach(i=>{this.subscribedEventIds.add(i)}),this.subscribeToEventIds();return}else if((n=e.authors)!=null&&n.length){e.authors.forEach(i=>{this.subscribedAuthors.add(i)}),this.subscribeToAuthors();return}else{const i=JSON.stringify(e);if(this.seenFilters.has(i))return;this.seenFilters.add(i),e.kinds&&(r=r.where?r.where("kind").anyOf(e.kinds):r.and(s=>{var o;return(o=e.kinds)==null?void 0:o.includes(s.kind)})),e.limit&&(r=r.limit(e.limit))}r.each(i=>{Me.handle(i,!1,!1)})}};let Fg={};const ZE=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi"],c6=["wss://relay.nostr.band"],an={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:ZE,init(){this.relays=new Map(ZE.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(c6.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(r=>r.enabled).map(r=>r.url)},getSubscriptionIdForName(e){return hr.arrayToHex(P_(e)).slice(0,8)},getUrlsFromFollowEvent(e){const r=new Map;if(e.content)try{const t=JSON.parse(e.content);for(const n in t)try{const i=new URL(n).toString().replace(/\/$/,"");r.set(i,t[n])}catch{console.log("invalid relay url",n,e)}}catch{console.log("failed to parse relay urls",e)}return r},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return Me.db.find({kind:3}).forEach(t=>{if(t.content)try{const n=JSON.parse(t.content);for(const i in n)try{const s=new URL(i).toString().replace(/\/$/,""),o=e.get(s)||0;e.set(s,o+1)}catch{console.log("invalid relay url",i,t)}}catch{console.log("failed to parse relay urls",t)}}),Array.from(e.entries()).filter(([t])=>!this.relays.has(t)).sort((t,n)=>n[1]-t[1]).map(t=>({url:t[0],users:t[1]}))},getConnectedRelayCount:function(){var r;let e=0;for(const t of this.relays.keys())((r=Bt.relayPool.relayByUrl.get(t))==null?void 0:r.status)===1&&e++;return e},getUserRelays(e){let r=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const t=Me.db.findOne({kind:3,pubkey:e});return t&&(r=this.getUrlsFromFollowEvent(t)),Array.from(r.entries())},manage:function(){Re.get("relays").put({}),Re.get("relays").on(e=>{if(e){Fg=e;for(const r of this.relays.keys())if(Fg[r]===null)this.remove(r);else if(Fg[r]&&Fg[r].enabled===!1){const t=this.relays.get(r);t&&(t.enabled=!1,this.relays.set(r,t),Bt.relayPool.removeRelay(r))}for(const[r,t]of Object.entries(Fg))if(t)this.relays.has(r)||(this.relays.set(r,{url:r,enabled:!!t.enabled}),t.enabled&&Bt.relayPool.addOrGetRelay(r));else{this.relays.has(r)&&this.remove(r);continue}}})},add(e){if(this.relays.has(e))return;const r={enabled:!0,url:e};this.relays.set(e,r),Bt.relayPool.addOrGetRelay(e)},remove(e){try{Bt.relayPool.removeRelay(e)}catch(r){console.log("error closing relay",r)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),Bt.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),Bt.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const r of ZE)this.add(r);this.saveToContacts();for(const r of c6)this.relays.has(r)||this.add(r);const e={};for(const[r,t]of this.relays.entries())e[r]={enabled:t.enabled,url:r};Re.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const r=Me.db.findOne({kind:3,pubkey:de.getPubKey()}),n={kind:3,content:JSON.stringify(e),tags:(r==null?void 0:r.tags)||[]};Me.publish(n)},updateLastSeen:$n.throttle(e=>{const r=Math.floor(Date.now()/1e3);Re.get("relays").get(e).get("lastSeen").put(r)},5*1e3,{leading:!0}),groupFilter(e){var r;return e.authors&&((r=e.kinds)==null?void 0:r.length)===1&&e.kinds[0]===0?(e.authors.forEach(t=>{this.subscribedProfiles.add(t)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(Bt.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(t=>{this.subscribedEventTags.add(t)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&an.init();const{authenticate:t1e}=aW;let f6=0,l$={logSubscriptions:!1,indexed03:!0};const Oc=new l0e(an.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>Me.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0});Oc.onnotice((e,r)=>{console.log("notice",r," from relay ",e)});const r1e=(e,r)=>new URL(e).host===new URL(r).host;Oc.onauth(async(e,r)=>{if(an.enabledRelays().some(t=>r1e(t,e.url)))try{await t1e({relay:e,challenge:r,sign:Me.sign})}catch(t){console.log("error: authenticate to relay:",t),Oc.removeRelay(e.url),an.disable(e.url)}});Re.get("dev").on(e=>{l$=e,Oc.logSubscriptions=l$.logSubscriptions});let wK=0;Re.get("lastOpened").once(e=>{wK=e,Re.get("lastOpened").put(Math.floor(Date.now()/1e3))});let h6=Date.now();const $K=()=>{Date.now()-h6>60*1e3*1&&(h6=Date.now(),Oc.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&$K()});document.addEventListener("online",()=>{$K()});const n1e={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:Oc,log:$n.throttle((...e)=>{console.log(...e)},1e3),subscribe:function(e,r,t=!1,n=!0){let i;if(r&&(i=f6++,this.subscriptions.set(++f6,{filter:e,callback:r})),this.log("subscriptions",this.subscriptions.size,"subscribedEventIds",this.subscribedEventIds.size,"subscribedAuthors",this.subscribedAuthors.size),e.authors&&e.authors.forEach(o=>{this.subscribedAuthors.add(o)}),r&&Me.find(e,r),e.ids){if(e.ids=e.ids.filter(o=>!Me.seen.has(o)),!e.ids.length)return()=>{};e.ids.forEach(o=>{this.subscribedEventIds.add(o)})}l$.indexedDbLoad!==!1&&ul.subscribe(e);const s=this.subscribeRelayPool(e,t,n);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){const r=Array.from(an.enabledRelays());Oc.publish(e,r)},handle(e){var r;for(const t of this.subscriptions.values())t.filter&&Q3(t.filter,e)&&((r=t.callback)==null||r.call(t,e))},subscribeRelayPool(e,r,t){var s,o;let n;e.keywords?n=Array.from(an.searchRelays.keys()):(t||((s=e.authors)==null?void 0:s.length)!==1)&&(n=an.enabledRelays()),l$.indexed03!==!1&&((o=e.kinds)!=null&&o.every(a=>a===0||a===3))&&(n=["wss://us.rbr.bio","wss://eu.rbr.bio"]),r&&(e.since=wK);const i=an.enabledRelays();return Oc.subscribe([e],n,(a,l,u)=>{setTimeout(()=>{Me.handle(a),u&&Me.handleEventMetadata({url:u,event:a})},0)},t?100:0,void 0,{defaultRelays:i})}},Bt=n1e,Po=class Po{static id(r){if(r.startsWith("npub")&&(r=de.toNostrHexAddress(r)||"",!r))throw new Error("addFollower: invalid pubKey "+r);const t=Po.pubKeyToUserId.get(r);if(t)return t;const n=Po.currentUserId++;return Po.pubKeyToUserId.set(r,n),Po.UserIdToPubKey.set(n,r),n}static pub(r){const t=Po.UserIdToPubKey.get(r);if(!t)throw new Error("pub: invalid id "+r);return t}static bech32(r){return de.toNostrBech32Address(Po.pub(r),"npub")||""}static has(r){return Po.pubKeyToUserId.has(r)}};oe(Po,"pubKeyToUserId",new Map),oe(Po,"UserIdToPubKey",new Map),oe(Po,"currentUserId",0);let Yp=Po;const ti=Yp.pub,u$=Yp.bech32,dt=Yp.id;function wu(e){return Array.isArray?Array.isArray(e):EK(e)==="[object Array]"}const i1e=1/0;function s1e(e){if(typeof e=="string")return e;let r=e+"";return r=="0"&&1/e==-i1e?"-0":r}function o1e(e){return e==null?"":s1e(e)}function cl(e){return typeof e=="string"}function _K(e){return typeof e=="number"}function a1e(e){return e===!0||e===!1||l1e(e)&&EK(e)=="[object Boolean]"}function xK(e){return typeof e=="object"}function l1e(e){return xK(e)&&e!==null}function Js(e){return e!=null}function XE(e){return!e.trim().length}function EK(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const u1e="Incorrect 'index' type",c1e=e=>`Invalid value for key ${e}`,f1e=e=>`Pattern length exceeds max of ${e}.`,h1e=e=>`Missing ${e} property in key`,d1e=e=>`Property 'weight' in key '${e}' must be a positive integer`,d6=Object.prototype.hasOwnProperty;class p1e{constructor(r){this._keys=[],this._keyMap={};let t=0;r.forEach(n=>{let i=SK(n);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(r){return this._keyMap[r]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function SK(e){let r=null,t=null,n=null,i=1,s=null;if(cl(e)||wu(e))n=e,r=p6(e),t=KI(e);else{if(!d6.call(e,"name"))throw new Error(h1e("name"));const o=e.name;if(n=o,d6.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(d1e(o));r=p6(o),t=KI(o),s=e.getFn}return{path:r,id:t,weight:i,src:n,getFn:s}}function p6(e){return wu(e)?e:e.split(".")}function KI(e){return wu(e)?e.join("."):e}function v1e(e,r){let t=[],n=!1;const i=(s,o,a)=>{if(Js(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Js(u))return;if(a===o.length-1&&(cl(u)||_K(u)||a1e(u)))t.push(o1e(u));else if(wu(u)){n=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,cl(r)?r.split("."):r,0),n?t:t[0]}const g1e={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},y1e={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,r)=>e.score===r.score?e.idx<r.idx?-1:1:e.score<r.score?-1:1},m1e={location:0,threshold:.6,distance:100},b1e={useExtendedSearch:!1,getFn:v1e,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Kt={...y1e,...g1e,...m1e,...b1e};const w1e=/[^ ]+/g;function $1e(e=1,r=3){const t=new Map,n=Math.pow(10,r);return{get(i){const s=i.match(w1e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class WP{constructor({getFn:r=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){this.norm=$1e(t,3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}setSources(r=[]){this.docs=r}setIndexRecords(r=[]){this.records=r}setKeys(r=[]){this.keys=r,this._keysMap={},r.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,cl(this.docs[0])?this.docs.forEach((r,t)=>{this._addString(r,t)}):this.docs.forEach((r,t)=>{this._addObject(r,t)}),this.norm.clear())}add(r){const t=this.size();cl(r)?this._addString(r,t):this._addObject(r,t)}removeAt(r){this.records.splice(r,1);for(let t=r,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(r,t){return r[this._keysMap[t]]}size(){return this.records.length}_addString(r,t){if(!Js(r)||XE(r))return;let n={v:r,i:t,n:this.norm.get(r)};this.records.push(n)}_addObject(r,t){let n={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(r):this.getFn(r,i.path);if(Js(o)){if(wu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Js(f))if(cl(f)&&!XE(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else wu(f)&&f.forEach((c,p)=>{l.push({nestedArrIndex:p,value:c})})}n.$[s]=a}else if(cl(o)&&!XE(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function kK(e,r,{getFn:t=Kt.getFn,fieldNormWeight:n=Kt.fieldNormWeight}={}){const i=new WP({getFn:t,fieldNormWeight:n});return i.setKeys(e.map(SK)),i.setSources(r),i.create(),i}function _1e(e,{getFn:r=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new WP({getFn:r,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(i),s}function Q0(e,{errors:r=0,currentLocation:t=0,expectedLocation:n=0,distance:i=Kt.distance,ignoreLocation:s=Kt.ignoreLocation}={}){const o=r/e.length;if(s)return o;const a=Math.abs(n-t);return i?o+a/i:a?1:o}function x1e(e=[],r=Kt.minMatchCharLength){let t=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=r&&t.push([n,i]),n=-1)}return e[s-1]&&s-n>=r&&t.push([n,s-1]),t}const Hf=32;function E1e(e,r,t,{location:n=Kt.location,distance:i=Kt.distance,threshold:s=Kt.threshold,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,includeMatches:l=Kt.includeMatches,ignoreLocation:u=Kt.ignoreLocation}={}){if(r.length>Hf)throw new Error(f1e(Hf));const f=r.length,c=e.length,p=Math.max(0,Math.min(n,c));let y=s,w=p;const b=a>1||l,T=b?Array(c):[];let _;for(;(_=e.indexOf(r,w))>-1;){let g=Q0(r,{currentLocation:_,expectedLocation:p,distance:i,ignoreLocation:u});if(y=Math.min(g,y),w=_+f,b){let M=0;for(;M<f;)T[_+M]=1,M+=1}}w=-1;let A=[],x=1,I=f+c;const O=1<<f-1;for(let g=0;g<f;g+=1){let M=0,B=I;for(;M<B;)Q0(r,{errors:g,currentLocation:p+B,expectedLocation:p,distance:i,ignoreLocation:u})<=y?M=B:I=B,B=Math.floor((I-M)/2+M);I=B;let L=Math.max(1,p-B+1),q=o?c:Math.min(p+B,c)+f,Q=Array(q+2);Q[q+1]=(1<<g)-1;for(let X=q;X>=L;X-=1){let j=X-1,Z=t[e.charAt(j)];if(b&&(T[j]=+!!Z),Q[X]=(Q[X+1]<<1|1)&Z,g&&(Q[X]|=(A[X+1]|A[X])<<1|1|A[X+1]),Q[X]&O&&(x=Q0(r,{errors:g,currentLocation:j,expectedLocation:p,distance:i,ignoreLocation:u}),x<=y)){if(y=x,w=j,w<=p)break;L=Math.max(1,2*p-w)}}if(Q0(r,{errors:g+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:u})>y)break;A=Q}const C={isMatch:w>=0,score:Math.max(.001,x)};if(b){const g=x1e(T,a);g.length?l&&(C.indices=g):C.isMatch=!1}return C}function S1e(e){let r={};for(let t=0,n=e.length;t<n;t+=1){const i=e.charAt(t);r[i]=(r[i]||0)|1<<n-t-1}return r}class TK{constructor(r,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:u=Kt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?r:r.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(p,y)=>{this.chunks.push({pattern:p,alphabet:S1e(p),startIndex:y})},c=this.pattern.length;if(c>Hf){let p=0;const y=c%Hf,w=c-y;for(;p<w;)f(this.pattern.substr(p,Hf),p),p+=Hf;if(y){const b=c-Hf;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(r){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(r=r.toLowerCase()),this.pattern===r){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,r.length-1]]),w}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],c=0,p=!1;this.chunks.forEach(({pattern:w,alphabet:b,startIndex:T})=>{const{isMatch:_,score:A,indices:x}=E1e(r,w,b,{location:i+T,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});_&&(p=!0),c+=A,_&&x&&(f=[...f,...x])});let y={isMatch:p,score:p?c/this.chunks.length:1};return p&&n&&(y.indices=f),y}}class Xc{constructor(r){this.pattern=r}static isMultiMatch(r){return v6(r,this.multiRegex)}static isSingleMatch(r){return v6(r,this.singleRegex)}search(){}}function v6(e,r){const t=e.match(r);return t?t[1]:null}class k1e extends Xc{constructor(r){super(r)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(r){const t=r===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class T1e extends Xc{constructor(r){super(r)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(r){const n=r.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,r.length-1]}}}class I1e extends Xc{constructor(r){super(r)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(r){const t=r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class A1e extends Xc{constructor(r){super(r)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(r){const t=!r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class O1e extends Xc{constructor(r){super(r)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(r){const t=r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[r.length-this.pattern.length,r.length-1]}}}class C1e extends Xc{constructor(r){super(r)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(r){const t=!r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class IK extends Xc{constructor(r,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:u=Kt.ignoreLocation}={}){super(r),this._bitapSearch=new TK(r,{location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(r){return this._bitapSearch.searchIn(r)}}class AK extends Xc{constructor(r){super(r)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(r){let t=0,n;const i=[],s=this.pattern.length;for(;(n=r.indexOf(this.pattern,t))>-1;)t=n+s,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const VI=[k1e,AK,I1e,A1e,C1e,O1e,T1e,IK],g6=VI.length,P1e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,N1e="|";function R1e(e,r={}){return e.split(N1e).map(t=>{let n=t.trim().split(P1e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<g6;){const f=VI[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,r)),l=!0)}if(!l)for(u=-1;++u<g6;){const f=VI[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,r));break}}}return i})}const D1e=new Set([IK.type,AK.type]);class B1e{constructor(r,{isCaseSensitive:t=Kt.isCaseSensitive,includeMatches:n=Kt.includeMatches,minMatchCharLength:i=Kt.minMatchCharLength,ignoreLocation:s=Kt.ignoreLocation,findAllMatches:o=Kt.findAllMatches,location:a=Kt.location,threshold:l=Kt.threshold,distance:u=Kt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?r:r.toLowerCase(),this.query=R1e(this.pattern,this.options)}static condition(r,t){return t.useExtendedSearch}searchIn(r){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;r=i?r:r.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const f=t[l];o.length=0,s=0;for(let c=0,p=f.length;c<p;c+=1){const y=f[c],{isMatch:w,indices:b,score:T}=y.search(r);if(w){if(s+=1,a+=T,n){const _=y.constructor.type;D1e.has(_)?o=[...o,...b]:o.push(b)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return n&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const GI=[];function M1e(...e){GI.push(...e)}function YI(e,r){for(let t=0,n=GI.length;t<n;t+=1){let i=GI[t];if(i.condition(e,r))return new i(e,r)}return new TK(e,r)}const c$={AND:"$and",OR:"$or"},ZI={PATH:"$path",PATTERN:"$val"},XI=e=>!!(e[c$.AND]||e[c$.OR]),L1e=e=>!!e[ZI.PATH],F1e=e=>!wu(e)&&xK(e)&&!XI(e),y6=e=>({[c$.AND]:Object.keys(e).map(r=>({[r]:e[r]}))});function OK(e,r,{auto:t=!0}={}){const n=i=>{let s=Object.keys(i);const o=L1e(i);if(!o&&s.length>1&&!XI(i))return n(y6(i));if(F1e(i)){const l=o?i[ZI.PATH]:s[0],u=o?i[ZI.PATTERN]:i[l];if(!cl(u))throw new Error(c1e(l));const f={keyId:KI(l),pattern:u};return t&&(f.searcher=YI(u,r)),f}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];wu(u)&&u.forEach(f=>{a.children.push(n(f))})}),a};return XI(e)||(e=y6(e)),n(e)}function j1e(e,{ignoreFieldNorm:r=Kt.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(r?1:s))}),t.score=n})}function H1e(e,r){const t=e.matches;r.matches=[],Js(t)&&t.forEach(n=>{if(!Js(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),r.matches.push(o)})}function z1e(e,r){r.score=e.score}function U1e(e,r,{includeMatches:t=Kt.includeMatches,includeScore:n=Kt.includeScore}={}){const i=[];return t&&i.push(H1e),n&&i.push(z1e),e.map(s=>{const{idx:o}=s,a={item:r[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class Ev{constructor(r,t={},n){this.options={...Kt,...t},this.options.useExtendedSearch,this._keyStore=new p1e(this.options.keys),this.setCollection(r,n)}setCollection(r,t){if(this._docs=r,t&&!(t instanceof WP))throw new Error(u1e);this._myIndex=t||kK(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(r){Js(r)&&(this._docs.push(r),this._myIndex.add(r))}remove(r=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];r(s,n)&&(this.removeAt(n),n-=1,i-=1,t.push(s))}return t}removeAt(r){this._docs.splice(r,1),this._myIndex.removeAt(r)}getIndex(){return this._myIndex}search(r,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=cl(r)?cl(this._docs[0])?this._searchStringList(r):this._searchObjectList(r):this._searchLogical(r);return j1e(l,{ignoreFieldNorm:a}),s&&l.sort(o),_K(t)&&t>-1&&(l=l.slice(0,t)),U1e(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(r){const t=YI(r,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Js(s))return;const{isMatch:l,score:u,indices:f}=t.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:f}]})}),i}_searchLogical(r){const t=OK(r,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:p}=a,y=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:p});return y&&y.length?[{idx:u,item:l,matches:y}]:[]}const f=[];for(let c=0,p=a.children.length;c<p;c+=1){const y=a.children[c],w=n(y,l,u);if(w.length)f.push(...w);else if(a.operator===c$.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Js(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:f})=>{s[l].matches.push(...f)}))}}),o}_searchObjectList(r){const t=YI(r,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Js(o))return;let l=[];n.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:o[f],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:r,value:t,searcher:n}){if(!Js(t))return[];let i=[];if(wu(t))t.forEach(({v:s,i:o,n:a})=>{if(!Js(s))return;const{isMatch:l,score:u,indices:f}=n.searchIn(s);l&&i.push({score:u,key:r,value:s,idx:o,norm:a,indices:f})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&i.push({score:l,key:r,value:s,norm:o,indices:u})}return i}}Ev.version="6.6.2";Ev.createIndex=kK;Ev.parseIndex=_1e;Ev.config=Kt;Ev.parseQuery=OK;M1e(B1e);const W1e={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},m6=np.throttle(()=>{Re.get("searchIndexUpdated").put(!0)},2e3),CK={index:new Ev([],W1e),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),m6())},remove(e){this.keys.delete(e),this.index.remove(r=>r.key===e),m6()},search(e){return this.index.search(e)}};class q1e{constructor(){oe(this,"key","");oe(this,"name","");oe(this,"username","");oe(this,"displayName");oe(this,"display_name");oe(this,"description");oe(this,"avatar");oe(this,"picture");oe(this,"cover");oe(this,"location");oe(this,"website");oe(this,"email");oe(this,"nip05");oe(this,"lud16");oe(this,"lud06");oe(this,"about");oe(this,"created_at",0);oe(this,"isDefault",!1)}}var PK={exports:{}},JE={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var b6;function K1e(){return b6||(b6=1,function(e){(function(){function r(o,a){for(var l=2;l<arguments.length;l++)for(var u=0;u<arguments[l].length;u++)o[a++]=arguments[l].charAt(u)}function t(o){return String.fromCharCode(o>>8&255,o&255)}function n(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function i(o){return String.fromCharCode(o&255,o>>8&255)}var s=function(o,a,l){this.width=o,this.height=a,this.depth=l,this.pix_size=a*(o+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*l+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+l+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var u=new Array,f=0;f<this.buffer_size;f++)this.buffer[f]="\0";r(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(o),n(a),"\b"),r(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var c=8+112<<8|192;c+=31-c%31,r(this.buffer,this.idat_offs+8,t(c));for(var f=0;(f<<16)-1<this.pix_size;f++){var p,y;f+65535<this.pix_size?(p=65535,y="\0"):(p=this.pix_size-(f<<16)-f,y=""),r(this.buffer,this.idat_offs+8+2+(f<<16)+(f<<2),y,i(p),i(~p))}for(var f=0;f<256;f++){for(var w=f,b=0;b<8;b++)w&1?w=-306674912^w>>1&2147483647:w=w>>1&2147483647;u[f]=w}this.index=function(T,_){var A=_*(this.width+1)+T+1,x=this.idat_offs+8+2+5*Math.floor(A/65535+1)+A;return x},this.color=function(T,_,A,x){x=x>=0?x:255;var I=((x<<8|T)<<8|_)<<8|A;if(typeof this.palette[I]>"u"){if(this.pindex==this.depth)return"\0";var O=this.plte_offs+8+3*this.pindex;this.buffer[O+0]=String.fromCharCode(T),this.buffer[O+1]=String.fromCharCode(_),this.buffer[O+2]=String.fromCharCode(A),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(x),this.palette[I]=String.fromCharCode(this.pindex++)}return this.palette[I]},this.getBase64=function(){var T=this.getDump(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A,x,I,O,C,g,M,B=T.length,L=0,q="";do A=T.charCodeAt(L),O=A>>2,x=T.charCodeAt(L+1),C=(A&3)<<4|x>>4,I=T.charCodeAt(L+2),B<L+2?g=64:g=(x&15)<<2|I>>6,B<L+3?M=64:M=I&63,q+=_.charAt(O)+_.charAt(C)+_.charAt(g)+_.charAt(M);while((L+=3)<B);return q},this.getDump=function(){for(var T=65521,_=5552,A=1,x=0,I=_,O=0;O<this.height;O++)for(var C=-1;C<this.width;C++)A+=this.buffer[this.index(C,O)].charCodeAt(0),x+=A,(I-=1)==0&&(A%=T,x%=T,I=_);A%=T,x%=T,r(this.buffer,this.idat_offs+this.idat_size-8,n(x<<16|A));function g(M,B,L){for(var q=-1,Q=4;Q<L-4;Q+=1)q=u[(q^M[B+Q].charCodeAt(0))&255]^q>>8&16777215;r(M,B+L-4,n(q^-1))}return g(this.buffer,this.ihdr_offs,this.ihdr_size),g(this.buffer,this.plte_offs,this.plte_size),g(this.buffer,this.trns_offs,this.trns_size),g(this.buffer,this.idat_offs,this.idat_size),g(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(JE)),JE.exports}(function(e){(function(){var r;r=K1e();var t=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var o=parseInt(this.hash.substr(-7),16)/268435455,a=this.options.saturation||this.defaults.saturation,l=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(o,a,l)};t.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new n(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,o=Math.floor(s*this.margin),a=Math.floor((s-o*2)/5),l=Math.floor((s-a*5)/2),u=i.color.apply(i,this.background),f=i.color.apply(i,this.foreground),c,p;for(c=0;c<15;c++)p=parseInt(this.hash.charAt(c),16)%2?u:f,c<5?this.rectangle(2*a+l,c*a+l,a,a,p,i):c<10?(this.rectangle(1*a+l,(c-5)*a+l,a,a,p,i),this.rectangle(3*a+l,(c-5)*a+l,a,a,p,i)):c<15&&(this.rectangle(0*a+l,(c-10)*a+l,a,a,p,i),this.rectangle(4*a+l,(c-10)*a+l,a,a,p,i));return i},rectangle:function(i,s,o,a,l,u){if(this.isSvg())u.rectangles.push({x:i,y:s,w:o,h:a,color:l});else{var f,c;for(f=i;f<i+o;f++)for(c=s;c<s+a;c++)u.buffer[u.index(f,c)]=l}},hsl2rgb:function(i,s,o){return i*=6,s=[o+=s*=o<.5?o:1-o,o-i%1*s*2,o-=s*=2,o,o+i%1*s,o+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var n=function(i,s,o){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,o),this.rectangles=[]};n.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,o,a){var l=[i,s,o].map(Math.round);return l.push(a>=0&&a<=255?a/255:1),"rgba("+l.join(",")+")"},getDump:function(){var i,s,o,a=this.foreground,l=this.background,u=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+l+";'><g style='fill:"+a+"; stroke:"+a+"; stroke-width:"+u+";'>",i=0;i<this.rectangles.length;i++)o=this.rectangles[i],o.color!=l&&(s+="<rect  x='"+o.x+"' y='"+o.y+"' width='"+o.w+"' height='"+o.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=t})()})(PK);var V1e=PK.exports;const G1e=io(V1e);let e1={};async function w6(e,r){return e1[e]||(e1[e]=r().finally(()=>{delete e1[e]})),e1[e]}const NK="DWoTR";class JI extends ou{constructor(){super(NK);oe(this,"edges");oe(this,"profiles");this.version(2).stores({edges:"key, outKey, inKey",profiles:"key"})}}let Qg=new JI;function Y1e(){return Qg.transaction("rw",Qg.edges,Qg.profiles,async()=>{await Promise.all(Qg.tables.map(e=>e.clear()))})}var Zl,wm;class Z1e{constructor(){Zr(this,Zl,null);Zr(this,wm,!1)}get profiles(){return this.db.profiles}get edges(){return this.db.edges}get db(){if(!Fn(this,Zl))try{ko(this,Zl,new JI),Fn(this,Zl).open().catch(r=>{console.log("Error opening database",r),this.recreateDB()})}catch(r){console.log("Error opening database",r),this.recreateDB()}return Fn(this,Zl)}recreateDB(){if(Fn(this,wm))return;ko(this,wm,!0),this.deleteDB().then(()=>{ko(this,Zl,new JI)}),(t=>{const n=Date.now();let i;do i=Date.now();while(i-n<t||!Fn(this,Zl))})(5e3)}async deleteDB(){await ou.delete(NK),console.log("Database deleted")}}Zl=new WeakMap,wm=new WeakMap;const t1=new Z1e,X1e="profileEvent";class fl extends CustomEvent{constructor(r,t){super(fl.getEventId(r),{detail:t})}static getEventId(r){return X1e+r}static dispatch(r,t){document.dispatchEvent(new fl(r,t))}static add(r,t){document.addEventListener(fl.getEventId(r),t)}static remove(r,t){document.removeEventListener(fl.getEventId(r),t)}}const RK=e=>{console.log("useProfile.address",e);const[r,t]=He(()=>Lr.getMemoryProfile(dt(e)));return kt(()=>{if(!e)return;let n=Lr.getMemoryProfile(dt(e));r.created_at!=n.created_at&&t(n);const i=o=>{let a=o.detail;t(l=>!a||a.created_at<=l.created_at?l:a)};fl.add(dt(e),i);let s=Lr.subscribe(e);return()=>{fl.remove(dt(e),i),s==null||s()}},[e]),r};new TextDecoder("utf-8");const J1e=new TextEncoder;function Q1e(e){let r=P_(J1e.encode(e));return cI(r)}function ewe(e=Date.now()){return Math.floor(e/1e3)}function twe(e){return e.slice(0,4)+"..."+e.slice(-4)}var Rp,Dp;class rwe{constructor(){oe(this,"loaded",!1);Zr(this,Rp,[]);Zr(this,Dp,!1);oe(this,"prefixHistory","");oe(this,"history",{});oe(this,"saveBulk",$n.throttle(()=>{if(Fn(this,Dp)){this.saveBulk();return}ko(this,Dp,!0);const r=Fn(this,Rp);ko(this,Rp,[]),t1.profiles.bulkPut(r).finally(()=>{ko(this,Dp,!1)})},500));oe(this,"subscriptions",new Map)}async init(){this.loaded=!0}recordHistory(r,t){this.prefixHistory=""}async fetchProfile(r){try{this.recordHistory(r,"fetchProfile");let t=`https://api.iris.to/profile/${r}`,{data:n}=await w6(t,async()=>{let i=await fetch(t);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);if(i&&i.status===200){let s=await i.json();return this.recordHistory(r,"fetchProfile->Dataloaded"),{res:i,data:s}}return{res:i,data:void 0}});return n}catch(t){console.log("There was a problem with the fetch operation: "+t.message)}}async loadProfiles(r){return await t1.profiles.where("key").anyOf(Array.from(r)).toArray()}async loadProfile(r){this.recordHistory(r,"loadProfile");let t=await w6(`loadProfile${r}`,async()=>(this.recordHistory(r,"loadProfile->Storage loading data now"),t1.profiles.get({key:r})));if(this.recordHistory(r,"loadProfile->Dataloaded"),t!=null&&t.isDefault){this.recordHistory(r,"Dataloaded with default profile :(");return}return t}getProfile(r,t,n=!1){const i=de.toNostrHexAddress(r),s=dt(i);this.prefixHistory="getProfile";const o=()=>{t==null||t(tt.profiles.get(s),i)};let a=tt.profiles.get(s);return a&&!a.isDefault?(o(),n&&a.nip05&&!a.nip05valid&&de.verifyNip05Address(a.nip05,r).then(l=>{console.log("NIP05 address is valid?",l,a.nip05,r),a.nip05valid=l,this.dispatchProfile(a),o()})):this.loadProfile(i).then(l=>{if(l)this.isProfileNewer(l)&&this.addProfileToMemory(l),o();else{sp.fetchProfile(i).then(u=>{u&&(this.isProfileNewer(u)&&(this.prefixHistory="getProfile->fetchProfile->isProfileNewer"),this.addProfileEvent(u),o())});return}}),a&&a.isDefault&&o(),a||(a=this.createDefaultProfile(i),tt.profiles.set(s,a),o()),Bt.subscribe({kinds:[0],authors:[i]},o,!1)}async getProfiles(r,t){if(!r||r.length===0)return()=>{};let n=[],i=[],s=[];for(const u of r){if(!u)continue;const f=de.toNostrHexAddress(u),c=tt.profiles.get(dt(f));c?n.push(c):i.push(f),s.push(f)}let o=new Set(i);const a=await this.loadProfiles(o);if(a&&a.length>0){n=n.concat(a);for(const u of a)u&&o.delete(u.key)}if(o.size>0&&o.size<=100){const u=await Promise.all(Array.from(o).map(f=>this.fetchProfile(de.toNostrHexAddress(f))));if(u&&u.length>0)for(const f of u)f&&(Me.handle(f),n.push(f),o.delete(f.key))}for(const u of o){let f=this.createDefaultProfile(u);tt.profiles.set(dt(f.key),f),n.push(f)}for(const u of n)!u||!this.isProfileNewer(u)||this.addProfileToMemory(u);n.length>0&&(t==null||t(n));const l=u=>{const f=dt(u.pubkey);let c=tt.profiles.get(f);t==null||t([c])};return Bt.subscribe({kinds:[0],authors:s},l,!1)}saveProfile(r){r!=null&&r.isDefault&&(Fn(this,Rp).push(r),this.saveBulk())}async loadAllProfiles(){console.time("Loading profiles from DWoTRDB");const r=await t1.profiles.toArray();if(r){for(const t of r)this.addProfileToMemory(t);console.timeEnd("Loading profiles from DWoTRDB"),console.log("Loaded profiles from DWoTRDB - "+r.length+" profiles")}}sanitizeProfile(r,t){var y,w,b,T,_,A,x,I;if(!r)return this.createDefaultProfile(t);let n=r.name||r.username||r.display_name||r.displayName||r.nip05||r.lud16||r.lud06;n=((y=r.name)==null?void 0:y.trim().slice(0,100))||"";let i=r.display_name||r.displayName;i=(w=r.display_name)==null?void 0:w.trim().slice(0,200);let s=r.about.trim().slice(0,1e4),o=(b=r.picture)==null?void 0:b.trim().slice(0,4096),a=(T=r.banner)==null?void 0:T.trim().slice(0,4096),l=(_=r.website)==null?void 0:_.trim().slice(0,4096),u=(A=r.nip05)==null?void 0:A.trim().slice(0,4096),f=(x=r.lud06)==null?void 0:x.trim().slice(0,4096),c=(I=r.lud16)==null?void 0:I.trim().slice(0,4096);return{...r,key:t,name:n,display_name:i,about:s,picture:o,banner:a,website:l,nip05:u,lud06:f,lud16:c}}createDefaultProfile(r){let t=new q1e;return t.key=r,t.name=twe(r),t.isDefault=!0,t}getDefaultProfile(r){if(!r)return;const t=tt.profiles.get(r);return t||this.createDefaultProfile(ti(r))}quickProfile(r){const t=dt(r),n=tt.profiles.get(t);return n||this.createDefaultProfile(ti(t))}isProfileNewer(r){if(!(r!=null&&r.key))return!1;const t=tt.profiles.get(dt(r.key));return!t||r.isDefault===!1&&r.created_at>t.created_at}addProfileToMemory(r){if(r)return this.recordHistory(r.key,"addProfileToMemory"),tt.profiles.set(dt(r.key),r),CK.add({key:r.key,name:r.name,display_name:r.display_name,followers:tt.followersByUser.get(dt(r.key))??new Set}),r}addProfileEvent(r){if(!(!r||!r.pubkey||!r.content)){this.recordHistory(r.pubkey,"addProfileEvent");try{const t=JSON.parse(r.content);if(!t)return;t.created_at=r.created_at;let n=this.sanitizeProfile(t,r.pubkey);return this.saveProfile(n),this.prefixHistory="addProfileEvent",this.addProfileToMemory(n)}catch(t){r.id&&ul.db.events.delete(r.id),console.error(t);return}}}createImageUrl(r,t=30,n=30){return`data:image/svg+xml;base64,${new G1e(r,{width:t,height:n,format:"svg"}).toString()}`}ensurePicture(r){return r.picture||(r.picture=this.createImageUrl(r.key)),r.picture}subscriptionCallback(r){sp.recordHistory(r.pubkey,"subscriptionCallback");let t=tt.profiles.get(dt(r.pubkey));sp.dispatchProfile(t)}subscribe(r){const t=de.toNostrHexAddress(r),n=dt(t);let i=tt.profiles.get(n);return(!i||i.isDefault)&&(this.prefixHistory="subscribe()",this.loadProfile(t).then(o=>{o?(this.prefixHistory="subscribe() -> loadProfile()",this.dispatchProfile(o)):(this.prefixHistory="subscribe()",sp.fetchProfile(t).then(a=>{if(!a)return;this.prefixHistory="subscribe() -> fetchProfile() -> addProfileEvent()";let l=this.addProfileEvent(a);l&&(this.prefixHistory="subscribe() -> fetchProfile() -> dispatchProfileIfNewer()",this.dispatchProfile(l))}))})),Bt.subscribe({kinds:[0],authors:[t]},this.subscriptionCallback,!1)}dispatchProfile(r){r&&(this.prefixHistory+="dispatchProfileIfNewer()",this.isProfileNewer(r)&&this.addProfileToMemory(r),fl.dispatch(dt(r.key),r))}getMemoryProfile(r){if(!r)return;const t=tt.profiles.get(r);return t||this.createDefaultProfile(ti(r))}}Rp=new WeakMap,Dp=new WeakMap;const sp=new rwe;sp.init();const Lr=sp,tt={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,isFollowing:function(e,r){var i;const t=dt(r),n=dt(e);return!!((i=this.followedByUser.get(n))!=null&&i.has(t))},isBlocked:function(e){const r=dt(e);return this.blockedUsers.has(r)},getFollowDistance:function(e){const r=dt(e),t=this.followDistanceByUser.get(r);return t===void 0?1e3:t},setFollowed:function(e,r=!0){const t=de.getPubKey(),n=dt(t);typeof e=="string"&&(e=[e]),e.forEach(o=>{o=de.toNostrHexAddress(o)||"";const a=dt(o);r&&o&&o!==t?this.addFollower(a,n):this.removeFollower(a,n)});const i=Me.db.findOne({kind:3,pubkey:t}),s={kind:3,content:(i==null?void 0:i.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(o=>["p",ti(o)])};Me.publish(s)},setBlocked:function(e,r=!0){const t=dt(e),n=dt(de.getPubKey());r?(this.blockedUsers.add(t),this.removeFollower(t,n),Me.directMessagesByUser.delete(e)):this.blockedUsers.delete(t)},addUserByFollowDistance(e,r){var t,n;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=Bt.subscribe({authors:[ti(r)],kinds:[0]},()=>i==null?void 0:i(),!0)}(t=this.usersByFollowDistance.get(e))==null||t.add(r);for(const i of this.usersByFollowDistance.keys())i>e&&((n=this.usersByFollowDistance.get(i))==null||n.delete(r))},addFollower:function(e,r){var n,i,s,o;if(typeof e!="number"||typeof r!="number")throw new Error("Invalid user id");this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(n=this.followersByUser.get(e))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set);const t=dt(de.getPubKey());if(e!==t){let a;if(r===t)a=1,this.addUserByFollowDistance(a,e),this.followDistanceByUser.set(e,a);else{const l=this.followDistanceByUser.get(e),u=this.followDistanceByUser.get(r);a=u&&u+1,(l===void 0||a<l)&&(this.followDistanceByUser.set(e,a),this.addUserByFollowDistance(a,e))}}(i=this.followedByUser.get(r))==null||i.add(e),e===t&&((s=this.followersByUser.get(e))==null?void 0:s.size)===1&&Re.get("hasNostrFollowers").put(!0),(o=this.followedByUser.get(t))!=null&&o.has(r)&&(Bt.subscribedAuthors.has(ti(e))||setTimeout(()=>{Bt.subscribe({authors:[ti(e)]},void 0,!0)},0))},removeFollower:function(e,r){var i,s,o;if((i=this.followersByUser.get(e))==null||i.delete(r),(s=this.followedByUser.get(r))==null||s.delete(e),e===dt(de.getPubKey()))return;let t=1/0;for(const a of this.followersByUser.get(e)||[]){const l=this.followDistanceByUser.get(a);l!==void 0&&l+1<t&&(t=l+1)}t===1/0?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,t),(this.blockedUsers.has(e)||((o=this.followersByUser.get(e))==null?void 0:o.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),Bt.subscribedAuthors.delete(ti(e))),Vw.saveEvents()},followerCount:function(e){var t;const r=dt(e);return((t=this.followersByUser.get(r))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var i;let r=0;const t=dt(de.getPubKey()),n=dt(e);for(const s of this.followersByUser.get(n)??[])(i=this.followedByUser.get(t))!=null&&i.has(s)&&r++;return r},block:async function(e,r){r?this.blockedUsers.add(dt(e)):this.blockedUsers.delete(dt(e));let t=JSON.stringify(Array.from(this.blockedUsers));t=await de.encrypt(t),Me.publish({kind:16462,content:t})},flag:function(e,r){r?this.flaggedUsers.add(dt(e)):this.flaggedUsers.delete(dt(e)),Me.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.blockedUsers)n.add(ti(i));e(n)}};r();const t=de.getPubKey();return Bt.subscribe({kinds:[16462],authors:[t]},r)},getFlaggedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.flaggedUsers)n.add(ti(i));e(n)}};r();const t=de.getPubKey();return Bt.subscribe({kinds:[16463],authors:[t]},r)},getFollowedByUser:function(e,r){const t=dt(e),n=()=>{if(r){const i=new Set;for(const s of this.followedByUser.get(t)||[])i.add(ti(s));r(i)}};return this.followedByUser.has(t)&&n(),Bt.subscribe({kinds:[3],authors:[e]},n)},getFollowersByUser:function(e,r){const t=dt(e),n=()=>{if(r){const i=new Set;for(const s of this.followersByUser.get(t)||[])i.add(ti(s));r(i)}};return this.followersByUser.has(t)&&n(),Bt.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,r,t=!1){const n=dt(e),i=ti(n),s=()=>{r==null||r(this.profiles.get(n),e)},o=this.profiles.get(n);return o?(s(),t&&o.nip05&&!o.nip05valid&&de.verifyNip05Address(o.nip05,e).then(a=>{console.log("NIP05 address is valid?",a,o.nip05,e),o.nip05valid=a,Lr.prefixHistory="SocialNetwork.getProfile()->Key.verifyNip05Address",Lr.recordHistory(i,"this.profiles.set(id, profile)"),Lr.dispatchProfile(o),s()})):(Lr.prefixHistory="SocialNetwork.getProfile()",Lr.loadProfile(i).then(a=>{a?(Lr.prefixHistory="SocialNetwork.getProfile()->loadProfile()",Lr.recordHistory(i,"this.profiles.set(id, profile)"),Lr.dispatchProfile(a),s()):(Lr.prefixHistory="SocialNetwork.getProfile()",Lr.fetchProfile(i).then(l=>{l&&(Lr.prefixHistory="SocialNetwork.getProfile() -> fetchProfile()",Me.handle(l),s())}))})),Bt.subscribe({kinds:[0],authors:[e]},s,!1)},setMetadata(e){const r={kind:0,content:JSON.stringify(e)};Me.publish(r)}},nwe="modulepreload",iwe=function(e){return"/"+e},$6={},_r=function(r,t,n){if(!t||t.length===0)return r();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=iwe(s),s in $6)return;$6[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const c=i[f];if(c.href===s&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":nwe,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((f,c)=>{u.addEventListener("load",f),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},DK={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who and when you're chatting with.",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},swe=Object.freeze(Object.defineProperty({__proto__:null,default:DK},Symbol.toStringTag,{value:"Module"})),Yy={en:"English","zh-cn":"简体中文","zh-tw":"繁體中文",es:"Español",ru:"Русский",de:"Deutsch",fr:"Français",it:"Italiano",ja:"日本語",ko:"한국어",ar:"العربية",id:"Indonesia","pt-BR":"Português (Brasil)",tr:"Türkçe",vt:"Tiếng Việt",bn:"বাংলা",th:"ไทย",hi:"हिन्दी",fa:"فارسی",ur:"اردو",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"עברית",sv:"Svenska",fi:"Suomi","cs-CZ":"Čeština",bg:"Български",as:"অসমীয়া",sk:"Slovenčina",lt:"Lietuvių","el-GR":"Ελληνικά"},owe=Object.assign({"./languages/ar.mjs":()=>_r(()=>import("./ar-b05107c0.js"),[]),"./languages/as.mjs":()=>_r(()=>import("./as-825421ff.js"),[]),"./languages/bg.mjs":()=>_r(()=>import("./bg-262cfc4e.js"),[]),"./languages/bn.mjs":()=>_r(()=>import("./bn-542e2fe5.js"),[]),"./languages/cs-CZ.mjs":()=>_r(()=>import("./cs-CZ-ad8d06ab.js"),[]),"./languages/de.mjs":()=>_r(()=>import("./de-e254045b.js"),[]),"./languages/el-GR.mjs":()=>_r(()=>import("./el-GR-dd662a28.js"),[]),"./languages/en.mjs":()=>_r(()=>Promise.resolve().then(()=>swe),void 0),"./languages/es.mjs":()=>_r(()=>import("./es-9ed73c18.js"),[]),"./languages/fa.mjs":()=>_r(()=>import("./fa-b92e5c69.js"),[]),"./languages/fi.mjs":()=>_r(()=>import("./fi-1b81d3e2.js"),[]),"./languages/fr.mjs":()=>_r(()=>import("./fr-084a88bb.js"),[]),"./languages/he.mjs":()=>_r(()=>import("./he-f8f630eb.js"),[]),"./languages/hi.mjs":()=>_r(()=>import("./hi-21492224.js"),[]),"./languages/hu.mjs":()=>_r(()=>import("./hu-272cee10.js"),[]),"./languages/id.mjs":()=>_r(()=>import("./id-879a045d.js"),[]),"./languages/it.mjs":()=>_r(()=>import("./it-570c4004.js"),[]),"./languages/ja.mjs":()=>_r(()=>import("./ja-ca2ddcd8.js"),[]),"./languages/ko.mjs":()=>_r(()=>import("./ko-20dade51.js"),[]),"./languages/lt.mjs":()=>_r(()=>import("./lt-9d42b6bf.js"),[]),"./languages/nl.mjs":()=>_r(()=>import("./nl-e18021b9.js"),[]),"./languages/pl.mjs":()=>_r(()=>import("./pl-c71aa6e1.js"),[]),"./languages/pt-BR.mjs":()=>_r(()=>import("./pt-BR-f6e074f5.js"),[]),"./languages/ru.mjs":()=>_r(()=>import("./ru-a4f155c7.js"),[]),"./languages/sk.mjs":()=>_r(()=>import("./sk-baed6548.js"),[]),"./languages/sv.mjs":()=>_r(()=>import("./sv-6a12b090.js"),[]),"./languages/th.mjs":()=>_r(()=>import("./th-77251d86.js"),[]),"./languages/tr.mjs":()=>_r(()=>import("./tr-5c13f72f.js"),[]),"./languages/ur.mjs":()=>_r(()=>import("./ur-da5400bf.js"),[]),"./languages/vt.mjs":()=>_r(()=>import("./vt-ed0b9062.js"),[]),"./languages/zh-cn.mjs":()=>_r(()=>import("./zh-cn-8db267de.js"),[]),"./languages/zh-tw.mjs":()=>_r(()=>import("./zh-tw-27ec4fa0.js"),[])});let op=Object.keys(Yy),qo,aw,BK;qo=localStorage.getItem("language")||navigator.language||"en";if(op.indexOf(qo)===-1){const e=qo.slice(0,2);qo="en";for(let r=0;r<op.length;r++)if(op[r].slice(0,2)===e){qo=op[r];break}}BK=owe[`./languages/${qo}.mjs`]().then(e=>{console.log("loaded translation",qo,`./languages/${qo}.mjs`),aw=e.default,qo!=="en"&&(aw={...DK,...aw})}).catch(e=>{console.error("failed to load translation",e)});function awe(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function he(e,r){const n=(e&&(aw[e]||awe(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return n.forEach(s=>{s.startsWith("<b>")?i.push(Qe("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(Qe("a",{key:i.length,...r},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}const MK=(e,r)=>{let t;const n=tt.getProfile(r,i=>{t=i.name});setTimeout(()=>{t=t||kge(de.toNostrBech32Address(r,"npub")||""),Re.get("groups").get(LK(e)).put({name:t}),n()},1e3)},LK=e=>{const r=P_(e);return Array.from(r,t=>t.toString(16).padStart(2,"0")).join("").slice(0,12)},V_=(e,r=!0,t=null,n=void 0)=>{const i=LK(e),s=Re.get("groups").get(i).put({key:e,inviter:t,name:n});return r&&s.then(()=>xr(`/chat/${i}`)),i},FK=(e,r=void 0)=>{if(e.indexOf("#")>-1&&(e=e.split("#")[1]),e.startsWith("nsec")){const t=de.toNostrHexAddress(e);t&&V_(t,!0,void 0,r)}},jK=(e=void 0)=>{const r=X3();return[V_(r,!0,void 0,e),r]},lwe=async e=>{const r=jK()[1],t=de.toNostrBech32Address(r,"nsec"),n=X3(),i=4,s=Math.floor(Date.now()/1e3),o=`This is an invitation to a secret chat. Use ${t} or go to https://iris.to/chat/#${t}`;let a={kind:i,created_at:s,pubkey:de.getPubKey(),tags:[["p",e]],content:o};a=await Me.sign(a);const l=await Ah.encrypt(n,e,`${o}

${JSON.stringify(a)}`),u={kind:i,created_at:s,pubkey:Th(n),tags:[["p",e]],content:l};u.id=Ih(u),u.sig=eW(u,n),Me.publish(u),Re.get("chatInvites").get(e).put({priv:r}),MK(r,e)};function uwe(){const[e,r]=He(""),[t,n]=He(""),i=o=>{r(o.target.value),FK(o.target.value,t)};return v("div",{className:"flex flex-1 flex-col items-center justify-center h-full",children:[v("div",{className:"flex flex-row gap-2",children:[v("input",{type:"text",className:"input rounded-full input-bordered",placeholder:"Group name",onChange:o=>{n(o.target.value)}}),v("button",{className:"btn btn-primary",onClick:()=>jK(t),children:he("start_new_group")})]}),v("div",{className:"my-4",children:he("or")}),v("div",{className:"my-4 flex gap-2 justify-center items-center",children:v("input",{placeholder:"Paste nsec or chat link",type:"password",id:"pasteLink",className:"text-center input input-bordered rounded-full p-2",onChange:i,value:e})})]})}class cwe{constructor(){oe(this,"_data",new Map)}upsert(r,t){var s;const n=this._data.get(r),i=(n==null?void 0:n.relays)||new Set;return(s=t.relays)==null||s.forEach(o=>i.add(this._normalizeURL(o))),this._data.set(r,{relays:i}),this}get(r){if(r)return this._data.get(r)}getRelays(r){var t;return r?Array.from(((t=this.get(r))==null?void 0:t.relays)||[]):[]}_normalizeURL(r){return r.trim().replace(/\/$/,"")}}const v_=class v_{constructor(r,t=!0){oe(this,"events");oe(this,"eventIdSet");oe(this,"maxSize");oe(this,"descending");oe(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=r,this.descending=t,this.subscriptions=new Map}get size(){return this.events.length}first(){var r;return(r=this.events[0])==null?void 0:r.id}has(r){return this.eventIdSet.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(r.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:r.id,created_at:r.created_at});else if(r.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:r.id,created_at:r.created_at},this.eventIdSet.add(r.id);else return!1;return this.eventIdSet.add(r.id),this.events.sort((t,n)=>this.descending?n.created_at-t.created_at:t.created_at-n.created_at),this.subscriptions.forEach(t=>t(this.eventIds)),!0}delete(r){if(!this.eventIdSet.delete(r))return!1;const n=this.events.findIndex(i=>i.id===r);return n===-1?!1:(this.events.splice(n,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(r=>r.id)}values(){return this.events.map(r=>r.id)}subscribe(r){const t=v_.subscriptionId++;return this.subscriptions.set(t,r),r(this.eventIds),()=>this.subscriptions.delete(t)}};oe(v_,"subscriptionId",0);let gy=v_;const fwe=Date.now()/1e3,hwe=500,dwe=1e3,pwe=new fge("iris"),vwe=pwe.addCollection("events",{indices:["created_at","pubkey","kind"],unique:["id"]});let ey;Re.get("mutedNotes").on(e=>{ey=e});const QI={maxFollowDistance:3,minFollowersAtMaxDistance:5};let ty=QI;Re.get("globalFilter").on(e=>{ty=e});let eA={};Re.get("dev").on(e=>{eA=e});const gwe=(e,r)=>{const t=zi.db.by("id",e),n=zi.db.by("id",r);return t?!n||t.created_at>n.created_at?-1:t.created_at<n.created_at?1:0:1},zi={DEFAULT_GLOBAL_FILTER:QI,getEventHash:Ih,db:vwe,eventsMetaDb:new cwe,seen:new Set,deletedEvents:new Set,directMessagesByUser:new aP((e,r)=>{const t=e.value.eventIds[0],n=r.value.eventIds[0];return t?n?gwe(t,n):-1:1}),latestNotificationByTargetAndKind:new Map,notifications:new gy(hwe),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,directRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new gy(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s,o;this.db.by("id",e.id)||this.insert(e);const t=this.isRepost(e),n=!t&&this.getNoteReplyingTo(e),i=de.getPubKey();if(n&&!t){this.directRepliesByMessageId.has(n)||this.directRepliesByMessageId.set(n,new Set),(s=this.directRepliesByMessageId.get(n))==null||s.add(e.id);const a=e.tags.filter(l=>l[0]==="e").map(l=>l[1]).slice(0,2);for(const l of a)e.created_at>fwe||e.pubkey===i||tt.isFollowing(i,e.pubkey),this.threadRepliesByMessageId.has(l)||this.threadRepliesByMessageId.set(l,new Set),(o=this.threadRepliesByMessageId.get(l))==null||o.add(e.id)}},getRepostedEventId(e){var t,n,i;let r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:n[1];return r||(r=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],r)},getOriginalPostEventId(e){return zi.isRepost(e)?zi.getRepostedEventId(e):e.id},getNoteReplyingTo:function(e){if(e.kind===1)return this.getEventReplyingTo(e)},getEventReplyingTo:function(e){var n,i;const r=(n=e.tags)==null?void 0:n.filter(s=>s[0]==="e"&&s[3]!=="mention");if(r.length===1)return r[0][1];const t=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(t)return t[1];if(r.length>1)return r[1][1]},handleRepost(e){var t,n;const r=this.getRepostedEventId(e);r&&(this.repostsByMessageId.has(r)||this.repostsByMessageId.set(r,new Set),(t=this.repostsByMessageId.get(r))!=null&&t.has(e.pubkey)||((n=this.repostsByMessageId.get(r))==null||n.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var t,n,i;const r=(n=(t=e.tags)==null?void 0:t.reverse().find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.likesByMessageId.has(r)||this.likesByMessageId.set(r,new Set),(i=this.likesByMessageId.get(r))==null||i.add(e.pubkey),this.insert(e))},handleFollow(e){var n,i,s,o;const r=zi.db.findOne({kind:3,pubkey:e.pubkey});if(r&&r.created_at>=e.created_at)return;r&&this.db.findAndRemove({kind:3,pubkey:e.pubkey}),this.insert(e);const t=de.getPubKey();if((e.pubkey===t||tt.isFollowing(t,e.pubkey))&&Vw.loaded&&Vw.saveProfilesAndFollows(),e.tags){for(const a of e.tags)if(Array.isArray(a)&&a[0]==="p"){const l=a[1];l.length===64&&/^[0-9a-f]+$/.test(l)&&tt.addFollower(dt(a[1]),dt(e.pubkey))}}if(tt.followedByUser.has(dt(e.pubkey)))for(const a of tt.followedByUser.get(dt(e.pubkey))||[])(!e.tags||!((n=e.tags)!=null&&n.find(l=>l[0]==="p"&&l[1]===ti(a))))&&tt.removeFollower(a,dt(e.pubkey));if(e.pubkey===t&&((i=e.tags)!=null&&i.length)&&(((s=tt.followedByUser.get(dt(t)))==null?void 0:s.size)||0)>10&&Re.get("showFollowSuggestions").put(!1),e.pubkey===t&&((o=e.content)!=null&&o.length))try{const a=JSON.parse(e.content),l=Object.keys(a);if(l.length){console.log("setting relays from your contacs list",l);for(const u of an.relays.keys())l.includes(u)||an.remove(u);for(const u of l)an.add(u)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var t;if((((t=this.myBlockEvent)==null?void 0:t.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const r=de.getPubKey();if(e.pubkey===r){let n;try{n=await de.decrypt(e.content);const i=JSON.parse(n),s=new Set;for(const o of i)s.add(dt(o));tt.blockedUsers=s}catch{console.log("failed to parse your block list",n,e)}}},handleFlagList(e){var t;if((((t=this.myFlagEvent)==null?void 0:t.created_at)||0)>e.created_at)return;const r=de.getPubKey();if(e.pubkey===r)try{const n=JSON.parse(e.content);tt.flaggedUsers=new Set(n)}catch{console.log("failed to parse your flagged users list",e)}},insert(e){try{delete e.$loki,this.db.insert(e)}catch{}},handleMetadata(e){var r;if(!((r=e.content)!=null&&r.length))return!1;try{if(Lr.prefixHistory="Events.handleMetadata",Lr.addProfileEvent(e))return!0}catch(t){console.log("error parsing nostr profile",t,e)}return!1},handleDelete(e){var n,i;const r=(i=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:i[1],t=de.getPubKey();if(r){const s=this.db.by("id",r);s&&[e.pubkey,t].includes(s.pubkey)&&this.db.findAndRemove({id:r})}},handleZap(e){var t,n,i;this.insert(e);const r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.zapsByNote.has(r)||this.zapsByNote.set(r,new gy(dwe)),(i=this.zapsByNote.get(r))==null||i.add(e))},async saveDMToLocalState(e,r){const t=r.get("latest"),n=await t.once();(!n||!n.created_at||n.created_at<e.created_at)&&t.put({id:e.id,created_at:e.created_at,text:e.text})},async handleDirectMessage(e){var i,s,o,a,l,u;const r=de.getPubKey();let t,n=!1;if(e.pubkey===r)t=((s=(i=e.tags)==null?void 0:i.find(f=>f[0]==="p"))==null?void 0:s[1])||t;else if(t=e.pubkey,!((o=e.tags)==null?void 0:o.some(c=>c[0]==="p"&&c[1]===r))&&(n=((a=e.tags)==null?void 0:a.length)===1&&((l=e.tags)==null?void 0:l.some(c=>c[0]==="p"&&c[1]===e.pubkey)),!n))return;try{const f=await de.decrypt(e.content,e.pubkey);f&&(e.text=f,this.decryptedMessages.set(e.id,f));const c=JSON.parse(f.slice(f.indexOf("{")));if(Ly(c)&&Wp(c)){console.log("innerEvent",c);const p=(u=c.content.match(/nsec1[023456789acdefghjklmnpqrstuvwxyz]{6,}/gi))==null?void 0:u[0];if(p){const y=de.toNostrHexAddress(p);if(y){console.log("nsec & hexpriv"),V_(y,!1,c.pubkey),MK(y,c.pubkey),Re.get("chatInvites").get(c.pubkey).put({priv:y});return}}}}catch{}this.insert(e),n||this.saveDMToLocalState(e,Re.get("chats").get(t))},getEventFromText(e){try{const r=e.slice(e.indexOf("{")),t=JSON.parse(r);if(Ly(t)&&Wp(t))return t}catch{}},subscribeGroups(){Re.get("groups").map((e,r)=>{if(e.key){const t=Th(e.key);t&&Bt.subscribe({authors:[t],kinds:[4],"#p":[t]},async n=>{const i=await Ah.decrypt(e.key,t,n.content),s=this.getEventFromText(i);s&&s.tags.length===1&&s.tags[0][0]==="p"&&s.tags[0][1]===t&&(s.text=s.content,this.saveDMToLocalState(s,Re.get("groups").get(r)))})}})},handleKeyValue(e){var t,n;if(e.pubkey!==de.getPubKey())return;const r=(n=(t=e.tags)==null?void 0:t.find(i=>i[0]==="d"))==null?void 0:n[1];if(r){const i=this.keyValueEvents.get(r);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(r,e)}},isRepost(e){var t;if(e.kind===6)return!0;const r=(t=e.tags)==null?void 0:t.findIndex(n=>n[0]==="e"&&n[3]==="mention");return e.kind===1&&e.content===`#[${r}]`},acceptEvent(e){var r,t,n;if(ty.maxFollowDistance&&de.getPubKey()){if(e.kind===4)return!0;if(!Bt.subscribedAuthors.has(e.pubkey)&&!Bt.subscribedEventIds.has(e.id)){if(!e.pubkey)return console.log("what",e),!1;if(Yp.has(e.pubkey)&&tt.getFollowDistance(e.pubkey)){const i=tt.followDistanceByUser.get(dt(e.pubkey));if(i&&i>ty.maxFollowDistance||i===ty.maxFollowDistance&&(((r=tt.followersByUser.get(dt(e.pubkey)))==null?void 0:r.size)||0)<(ty.minFollowersAtMaxDistance||QI.minFollowersAtMaxDistance))return!1}else{const i=((t=zi.likesByMessageId.get(e.id))==null?void 0:t.size)||0,s=((n=zi.repostsByMessageId.get(e.id))==null?void 0:n.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}}}return!0},find(e,r){const t={};e.authors&&(t.pubkey={$in:e.authors}),e.kinds&&(t.kind={$in:e.kinds}),this.db.chain().find(t).where(n=>Q3(e,n)).simplesort("created_at",{desc:!0}).limit(e.limit||1/0).data().forEach(n=>{r(n)})},handle(e,r=!1,t=!0,n=2){var i;if(!e||!r&&this.seen.has(e.id))return!1;if(!r&&!this.acceptEvent(e))return n&&setTimeout(()=>{this.handle(e,r,t,n-1)},3e3),!1;if(tt.isBlocked(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&this.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,Bt.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),this.isRepost(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:if(((i=zi.db.findOne({kind:3,pubkey:e.pubkey}))==null?void 0:i.created_at)>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break;case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(t){const s=tt.followDistanceByUser.get(dt(e.pubkey))||1/0;s<=1?eA.indexedDbSave!==!1&&ul.saveEvent(e):s<=4&&[0,3,4].includes(e.kind)&&eA.indexedDbSave!==!1&&ul.saveEvent(e)}return Bt.handle(e),!0},handleEventMetadata({url:e,event:r}){const t=this.getOriginalPostEventId(r);t&&this.eventsMetaDb.upsert(t,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),r=this.db.by("id",e);r&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(r.id),this.handle(r,!0),this.handleNextFutureEvent()},(r.created_at-Date.now()/1e3)*1e3))},isMuted(e){let r=!1;if(ey&&(r=ey[e.id],!r)){for(const t of e.tags)if(t[0]==="e"&&ey[t[1]]&&(r=ey[t[1]],r))return!0}return r},getEventRoot(e){var t,n,i,s;const r=(n=(t=e==null?void 0:e.tags)==null?void 0:t.find(o=>o[0]==="e"&&o[3]==="root"))==null?void 0:n[1];return r||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(o=>o[0]==="e"))==null?void 0:s[1])},maybeAddNotification(e){var t,n;if(((t=e.tags)==null?void 0:t.filter(i=>i[0]==="p").length)>10)return;const r=de.getPubKey();if(e.pubkey!==r&&((n=e.tags)!=null&&n.some(i=>i[0]==="p"&&i[1]===r))){if(e.kind===3){const i=tt.followedByUser.get(dt(e.pubkey));if(!i||i.has(dt(r)))return}if(!this.isMuted(e)){this.insert(e);const i=this.getEventRoot(e)||this.getEventReplyingTo(e)||e.id,s=`${e.kind}-${i}`,o=this.latestNotificationByTargetAndKind.get(s),a=o&&this.db.by("id",o);(!o||a.created_at<e.created_at)&&(o&&this.notifications.delete(o),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:$n.debounce(()=>{if(!zi.notificationsSeenTime)return;let e=0;for(const r of zi.notifications.eventIds){const t=zi.db.by("id",r);if((t==null?void 0:t.created_at)>zi.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",zi.notificationsSeenTime,"count",e),Re.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var t;if(delete e.$loki,delete e.meta,e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");Bt.publish(e),console.log("publishing event",e),this.handle(e,!0);const r=(t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").reverse().slice(0,10);for(const n of r||[]){const i=this.db.by("id",n[1]);i&&(delete i.meta,delete i.$loki,Bt.publish(i))}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=de.getPubKey(),e.id=Ih(e),e.sig=await de.sign(e),e},getZappingUser(e){var i,s,o;const r=(o=(s=(i=zi.db.by("id",e))==null?void 0:i.tags)==null?void 0:s.find(a=>a[0]==="description"))==null?void 0:o[1];if(!r)return null;let t;try{t=JSON.parse(r)}catch{return null}return de.toNostrBech32Address(t.pubkey,"npub")},getReplies(e,r){const t=()=>{r==null||r(this.directRepliesByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[1]},t,!1)},getLikes(e,r){const t=()=>{r==null||r(this.likesByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[7]},t,!1)},getThreadRepliesCount(e,r){const t=()=>{var n;r==null||r(((n=this.threadRepliesByMessageId.get(e))==null?void 0:n.size)??0)};return t(),Bt.subscribe({"#e":[e],kinds:[1]},t,!1)},getReposts(e,r){const t=()=>{r==null||r(this.repostsByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[1,6]},t,!1)},getZaps(e,r){const t=()=>{r==null||r(this.zapsByNote.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[9735]},t,!1)},getEventById(e,r=!1,t){const n=this.db.by("id",e);if(t&&n){t(n);return}if(r){const i=setTimeout(()=>{Bt.subscribe({ids:[e]},s=>t==null?void 0:t(s))},300);fetch(`https://api.iris.to/event/${e}`).then(s=>{s.status===200&&s.json().then(o=>{o&&o.id===e&&(clearTimeout(i),zi.handle(o,!0),t==null||t(o))})})}else Bt.subscribe({ids:[e]},t,!1)}},Me=zi,ywe=({each:e,children:r})=>e.map((t,n)=>r(t,n)),pt=e=>e.when?e.children:null;class _n extends Oy{constructor(){super(...arguments);oe(this,"unmounted");oe(this,"unsubscribes",{})}sub(t,n){return(s,o,a,l)=>{if(this.unmounted){a==null||a();return}this.unsubscribes[n??o]=a,t(s,o,a,l)}}inject(t,n){return this.sub((i,s)=>{const o={};o[t??s]=i,this.setState(o)},n)}unsubscribe(){Object.keys(this.unsubscribes).forEach(t=>{const n=this.unsubscribes[t];n==null||n(),delete this.unsubscribes[t]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}const mwe=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],HK=e=>mwe.some(r=>e.startsWith(r)),bwe=e=>{let r=e.onError,t=e.src,n=!1;if(e.src&&!e.src.startsWith("data:image")&&(!HK(e.src)||e.width)){const o=e.src;if(e.width){const l=e.width*2;t=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${l}:${l}/plain/${o}`}else t=`https://imgproxy.iris.to/insecure/plain/${o}`;const a=e.onError;r=()=>{n?(console.log("original source failed too",o),a&&a()):(console.log("image proxy failed",t,"trying original source",o),n=!0,s(o))}}const[i,s]=He(t);return v("img",{src:i,onError:r,onClick:e.onClick,className:e.className,style:e.style,width:e.width,height:e.width,alt:e.alt})},$u=bwe;class Ki extends _n{constructor(){super(...arguments);oe(this,"activityTimeout");oe(this,"unsub");oe(this,"handleEvent")}componentDidMount(){const t=this.props.str;if(!t)return;let n=dt(t);this.handleEvent=s=>{let o=s.detail,a=this.state.created_at||0;!o||o.created_at<=a||this.setState({picture:o.picture,name:o.name,created_at:o.created_at})},fl.add(n,this.handleEvent);let i=Lr.getMemoryProfile(n);this.setState({picture:i.picture,name:i.name,avatar:Lr.createImageUrl(t,this.props.width)}),this.unsub=Lr.subscribe(t),this.setState({activity:null})}componentWillUnmount(){var n;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout);const t=this.props.str;t&&(fl.remove(dt(t),this.handleEvent),(n=this.unsub)==null||n.call(this))}render(){const t=this.props.width,n=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!tt.isBlocked(this.props.str),s=i?"has-picture":"",o=this.props.showTooltip?"tooltip":"";return v("div",{style:{maxWidth:`${t}px`,maxHeight:`${t}px`,cursor:this.props.onClick?"pointer":void 0},className:`inline-flex flex-col flex-shrink-0 items-center justify-center relative select-none ${s} ${o} ${n}`,onClick:this.props.onClick,children:[v("div",{children:[v(pt,{when:i,children:v($u,{className:"object-cover rounded-full",src:this.state.picture,width:t,square:!0,onError:()=>this.setState({hasError:!0})})}),v(pt,{when:!i,children:v("img",{width:t,className:"max-w-full rounded-full",src:this.state.avatar||""})})]}),v(pt,{when:this.props.showTooltip&&this.state.name,children:v("span",{className:"tooltiptext",children:this.state.name})})]})}}const zK=({event:e,isQuote:r,standalone:t,fullWidth:n})=>v("span",{className:`flex flex-col items-center flex-shrink-0 ${n?"mr-2":"mr-4"}`,children:[v(pt,{when:e.pubkey,children:v(Jt,{href:`/${e.pubkey}`,children:v(Ki,{str:de.toNostrBech32Address(e.pubkey,"npub"),width:40})})}),v(pt,{when:r&&!t,children:v("div",{className:"border-l-2 border-neutral-700 h-full"})})]});var Cs=function(){return Cs=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Cs.apply(this,arguments)};function Zy(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,s;n<i;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return e.concat(s||Array.prototype.slice.call(r))}var en="-ms-",yy="-moz-",Rr="-webkit-",UK="comm",G_="rule",qP="decl",wwe="@import",WK="@keyframes",$we="@layer",_we=Math.abs,KP=String.fromCharCode,tA=Object.assign;function xwe(e,r){return fi(e,0)^45?(((r<<2^fi(e,0))<<2^fi(e,1))<<2^fi(e,2))<<2^fi(e,3):0}function qK(e){return e.trim()}function Gl(e,r){return(e=r.exec(e))?e[0]:e}function ar(e,r,t){return e.replace(r,t)}function lw(e,r){return e.indexOf(r)}function fi(e,r){return e.charCodeAt(r)|0}function Zp(e,r,t){return e.slice(r,t)}function ol(e){return e.length}function KK(e){return e.length}function ry(e,r){return r.push(e),e}function Ewe(e,r){return e.map(r).join("")}function _6(e,r){return e.filter(function(t){return!Gl(t,r)})}var Y_=1,Xp=1,VK=0,Zo=0,Hn=0,Sv="";function Z_(e,r,t,n,i,s,o,a){return{value:e,root:r,parent:t,type:n,props:i,children:s,line:Y_,column:Xp,length:o,return:"",siblings:a}}function pc(e,r){return tA(Z_("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},r)}function Md(e){for(;e.root;)e=pc(e.root,{children:[e]});ry(e,e.siblings)}function Swe(){return Hn}function kwe(){return Hn=Zo>0?fi(Sv,--Zo):0,Xp--,Hn===10&&(Xp=1,Y_--),Hn}function Aa(){return Hn=Zo<VK?fi(Sv,Zo++):0,Xp++,Hn===10&&(Xp=1,Y_++),Hn}function ch(){return fi(Sv,Zo)}function uw(){return Zo}function X_(e,r){return Zp(Sv,e,r)}function rA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Twe(e){return Y_=Xp=1,VK=ol(Sv=e),Zo=0,[]}function Iwe(e){return Sv="",e}function QE(e){return qK(X_(Zo-1,nA(e===91?e+2:e===40?e+1:e)))}function Awe(e){for(;(Hn=ch())&&Hn<33;)Aa();return rA(e)>2||rA(Hn)>3?"":" "}function Owe(e,r){for(;--r&&Aa()&&!(Hn<48||Hn>102||Hn>57&&Hn<65||Hn>70&&Hn<97););return X_(e,uw()+(r<6&&ch()==32&&Aa()==32))}function nA(e){for(;Aa();)switch(Hn){case e:return Zo;case 34:case 39:e!==34&&e!==39&&nA(Hn);break;case 40:e===41&&nA(e);break;case 92:Aa();break}return Zo}function Cwe(e,r){for(;Aa()&&e+Hn!==47+10;)if(e+Hn===42+42&&ch()===47)break;return"/*"+X_(r,Zo-1)+"*"+KP(e===47?e:Aa())}function Pwe(e){for(;!rA(ch());)Aa();return X_(e,Zo)}function Nwe(e){return Iwe(cw("",null,null,null,[""],e=Twe(e),0,[0],e))}function cw(e,r,t,n,i,s,o,a,l){for(var u=0,f=0,c=o,p=0,y=0,w=0,b=1,T=1,_=1,A=0,x="",I=i,O=s,C=n,g=x;T;)switch(w=A,A=Aa()){case 40:if(w!=108&&fi(g,c-1)==58){lw(g+=ar(QE(A),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:g+=QE(A);break;case 9:case 10:case 13:case 32:g+=Awe(w);break;case 92:g+=Owe(uw()-1,7);continue;case 47:switch(ch()){case 42:case 47:ry(Rwe(Cwe(Aa(),uw()),r,t,l),l);break;default:g+="/"}break;case 123*b:a[u++]=ol(g)*_;case 125*b:case 59:case 0:switch(A){case 0:case 125:T=0;case 59+f:_==-1&&(g=ar(g,/\f/g,"")),y>0&&ol(g)-c&&ry(y>32?E6(g+";",n,t,c-1,l):E6(ar(g," ","")+";",n,t,c-2,l),l);break;case 59:g+=";";default:if(ry(C=x6(g,r,t,u,f,i,a,x,I=[],O=[],c,s),s),A===123)if(f===0)cw(g,r,C,C,I,s,c,a,O);else switch(p===99&&fi(g,3)===110?100:p){case 100:case 108:case 109:case 115:cw(e,C,C,n&&ry(x6(e,C,C,0,0,i,a,x,i,I=[],c,O),O),i,O,c,a,n?I:O);break;default:cw(g,C,C,C,[""],O,0,a,O)}}u=f=y=0,b=_=1,x=g="",c=o;break;case 58:c=1+ol(g),y=w;default:if(b<1){if(A==123)--b;else if(A==125&&b++==0&&kwe()==125)continue}switch(g+=KP(A),A*b){case 38:_=f>0?1:(g+="\f",-1);break;case 44:a[u++]=(ol(g)-1)*_,_=1;break;case 64:ch()===45&&(g+=QE(Aa())),p=ch(),f=c=ol(x=g+=Pwe(uw())),A++;break;case 45:w===45&&ol(g)==2&&(b=0)}}return s}function x6(e,r,t,n,i,s,o,a,l,u,f,c){for(var p=i-1,y=i===0?s:[""],w=KK(y),b=0,T=0,_=0;b<n;++b)for(var A=0,x=Zp(e,p+1,p=_we(T=o[b])),I=e;A<w;++A)(I=qK(T>0?y[A]+" "+x:ar(x,/&\f/g,y[A])))&&(l[_++]=I);return Z_(e,r,t,i===0?G_:a,l,u,f,c)}function Rwe(e,r,t,n){return Z_(e,r,t,UK,KP(Swe()),Zp(e,2,-2),0,n)}function E6(e,r,t,n,i){return Z_(e,r,t,qP,Zp(e,0,n),Zp(e,n+1,-1),n,i)}function GK(e,r,t){switch(xwe(e,r)){case 5103:return Rr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rr+e+e;case 4789:return yy+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rr+e+yy+e+en+e+e;case 5936:switch(fi(e,r+11)){case 114:return Rr+e+en+ar(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rr+e+en+ar(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rr+e+en+ar(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Rr+e+en+e+e;case 6165:return Rr+e+en+"flex-"+e+e;case 5187:return Rr+e+ar(e,/(\w+).+(:[^]+)/,Rr+"box-$1$2"+en+"flex-$1$2")+e;case 5443:return Rr+e+en+"flex-item-"+ar(e,/flex-|-self/g,"")+(Gl(e,/flex-|baseline/)?"":en+"grid-row-"+ar(e,/flex-|-self/g,""))+e;case 4675:return Rr+e+en+"flex-line-pack"+ar(e,/align-content|flex-|-self/g,"")+e;case 5548:return Rr+e+en+ar(e,"shrink","negative")+e;case 5292:return Rr+e+en+ar(e,"basis","preferred-size")+e;case 6060:return Rr+"box-"+ar(e,"-grow","")+Rr+e+en+ar(e,"grow","positive")+e;case 4554:return Rr+ar(e,/([^-])(transform)/g,"$1"+Rr+"$2")+e;case 6187:return ar(ar(ar(e,/(zoom-|grab)/,Rr+"$1"),/(image-set)/,Rr+"$1"),e,"")+e;case 5495:case 3959:return ar(e,/(image-set\([^]*)/,Rr+"$1$`$1");case 4968:return ar(ar(e,/(.+:)(flex-)?(.*)/,Rr+"box-pack:$3"+en+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rr+e+e;case 4200:if(!Gl(e,/flex-|baseline/))return en+"grid-column-align"+Zp(e,r)+e;break;case 2592:case 3360:return en+ar(e,"template-","")+e;case 4384:case 3616:return t&&t.some(function(n,i){return r=i,Gl(n.props,/grid-\w+-end/)})?~lw(e+(t=t[r].value),"span")?e:en+ar(e,"-start","")+e+en+"grid-row-span:"+(~lw(t,"span")?Gl(t,/\d+/):+Gl(t,/\d+/)-+Gl(e,/\d+/))+";":en+ar(e,"-start","")+e;case 4896:case 4128:return t&&t.some(function(n){return Gl(n.props,/grid-\w+-start/)})?e:en+ar(ar(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ar(e,/(.+)-inline(.+)/,Rr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ol(e)-1-r>6)switch(fi(e,r+1)){case 109:if(fi(e,r+4)!==45)break;case 102:return ar(e,/(.+:)(.+)-([^]+)/,"$1"+Rr+"$2-$3$1"+yy+(fi(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~lw(e,"stretch")?GK(ar(e,"stretch","fill-available"),r,t)+e:e}break;case 5152:case 5920:return ar(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,s,o,a,l,u){return en+i+":"+s+u+(o?en+i+"-span:"+(a?l:+l-+s)+u:"")+e});case 4949:if(fi(e,r+6)===121)return ar(e,":",":"+Rr)+e;break;case 6444:switch(fi(e,fi(e,14)===45?18:11)){case 120:return ar(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Rr+(fi(e,14)===45?"inline-":"")+"box$3$1"+Rr+"$2$3$1"+en+"$2box$3")+e;case 100:return ar(e,":",":"+en)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ar(e,"scroll-","scroll-snap-")+e}return e}function f$(e,r){for(var t="",n=0;n<e.length;n++)t+=r(e[n],n,e,r)||"";return t}function Dwe(e,r,t,n){switch(e.type){case $we:if(e.children.length)break;case wwe:case qP:return e.return=e.return||e.value;case UK:return"";case WK:return e.return=e.value+"{"+f$(e.children,n)+"}";case G_:if(!ol(e.value=e.props.join(",")))return""}return ol(t=f$(e.children,n))?e.return=e.value+"{"+t+"}":""}function Bwe(e){var r=KK(e);return function(t,n,i,s){for(var o="",a=0;a<r;a++)o+=e[a](t,n,i,s)||"";return o}}function Mwe(e){return function(r){r.root||(r=r.return)&&e(r)}}function Lwe(e,r,t,n){if(e.length>-1&&!e.return)switch(e.type){case qP:e.return=GK(e.value,e.length,t);return;case WK:return f$([pc(e,{value:ar(e.value,"@","@"+Rr)})],n);case G_:if(e.length)return Ewe(t=e.props,function(i){switch(Gl(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Md(pc(e,{props:[ar(i,/:(read-\w+)/,":"+yy+"$1")]})),Md(pc(e,{props:[i]})),tA(e,{props:_6(t,n)});break;case"::placeholder":Md(pc(e,{props:[ar(i,/:(plac\w+)/,":"+Rr+"input-$1")]})),Md(pc(e,{props:[ar(i,/:(plac\w+)/,":"+yy+"$1")]})),Md(pc(e,{props:[ar(i,/:(plac\w+)/,en+"input-$1")]})),Md(pc(e,{props:[i]})),tA(e,{props:_6(t,n)});break}return""})}}var Fwe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jp=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",VP=typeof window<"u"&&"HTMLElement"in window,jwe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),J_=Object.freeze([]),Qp=Object.freeze({});function Hwe(e,r,t){return t===void 0&&(t=Qp),e.theme!==t.theme&&e.theme||r||t.theme}var YK=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),zwe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Uwe=/(^-|-$)/g;function S6(e){return e.replace(zwe,"-").replace(Uwe,"")}var Wwe=/(a)(d)/gi,k6=function(e){return String.fromCharCode(e+(e>25?39:97))};function iA(e){var r,t="";for(r=Math.abs(e);r>52;r=r/52|0)t=k6(r%52)+t;return(k6(r%52)+t).replace(Wwe,"$1-$2")}var eS,ap=function(e,r){for(var t=r.length;t;)e=33*e^r.charCodeAt(--t);return e},ZK=function(e){return ap(5381,e)};function XK(e){return iA(ZK(e)>>>0)}function qwe(e){return e.displayName||e.name||"Component"}function tS(e){return typeof e=="string"&&!0}var JK=typeof Symbol=="function"&&Symbol.for,QK=JK?Symbol.for("react.memo"):60115,Kwe=JK?Symbol.for("react.forward_ref"):60112,Vwe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Gwe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},eV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ywe=((eS={})[Kwe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eS[QK]=eV,eS);function T6(e){return("type"in(r=e)&&r.type.$$typeof)===QK?eV:"$$typeof"in e?Ywe[e.$$typeof]:Vwe;var r}var Zwe=Object.defineProperty,Xwe=Object.getOwnPropertyNames,I6=Object.getOwnPropertySymbols,Jwe=Object.getOwnPropertyDescriptor,Qwe=Object.getPrototypeOf,A6=Object.prototype;function tV(e,r,t){if(typeof r!="string"){if(A6){var n=Qwe(r);n&&n!==A6&&tV(e,n,t)}var i=Xwe(r);I6&&(i=i.concat(I6(r)));for(var s=T6(e),o=T6(r),a=0;a<i.length;++a){var l=i[a];if(!(l in Gwe||t&&t[l]||o&&l in o||s&&l in s)){var u=Jwe(r,l);try{Zwe(e,l,u)}catch{}}}}return e}function ev(e){return typeof e=="function"}function GP(e){return typeof e=="object"&&"styledComponentId"in e}function eh(e,r){return e&&r?"".concat(e," ").concat(r):e||r||""}function sA(e,r){if(e.length===0)return"";for(var t=e[0],n=1;n<e.length;n++)t+=r?r+e[n]:e[n];return t}function Xy(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function oA(e,r,t){if(t===void 0&&(t=!1),!t&&!Xy(e)&&!Array.isArray(e))return r;if(Array.isArray(r))for(var n=0;n<r.length;n++)e[n]=oA(e[n],r[n]);else if(Xy(r))for(var n in r)e[n]=oA(e[n],r[n]);return e}function YP(e,r){Object.defineProperty(e,"toString",{value:r})}function Fm(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(r.length>0?" Args: ".concat(r.join(", ")):""))}var e$e=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}return e.prototype.indexOfGroup=function(r){for(var t=0,n=0;n<r;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(r,t){if(r>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,s=i;r>=s;)if((s<<=1)<0)throw Fm(16,"".concat(r));this.groupSizes=new Uint32Array(s),this.groupSizes.set(n),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(r+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[r]++,a++)},e.prototype.clearGroup=function(r){if(r<this.length){var t=this.groupSizes[r],n=this.indexOfGroup(r),i=n+t;this.groupSizes[r]=0;for(var s=n;s<i;s++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(r){var t="";if(r>=this.length||this.groupSizes[r]===0)return t;for(var n=this.groupSizes[r],i=this.indexOfGroup(r),s=i+n,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return t},e}(),fw=new Map,h$=new Map,rS=1,r1=function(e){if(fw.has(e))return fw.get(e);for(;h$.has(rS);)rS++;var r=rS++;return fw.set(e,r),h$.set(r,e),r},t$e=function(e,r){fw.set(e,r),h$.set(r,e)},r$e="style[".concat(Jp,"][").concat("data-styled-version",'="').concat("6.0.5",'"]'),n$e=new RegExp("^".concat(Jp,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),i$e=function(e,r,t){for(var n,i=t.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&e.registerName(r,n)},s$e=function(e,r){for(var t,n=((t=r.textContent)!==null&&t!==void 0?t:"").split(`/*!sc*/
`),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var l=a.match(n$e);if(l){var u=0|parseInt(l[1],10),f=l[2];u!==0&&(t$e(f,u),i$e(e,f,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(a)}}};function o$e(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var rV=function(e){var r=document.head,t=e||r,n=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Jp,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;n.setAttribute(Jp,"active"),n.setAttribute("data-styled-version","6.0.5");var o=o$e();return o&&n.setAttribute("nonce",o),t.insertBefore(n,s),n},a$e=function(){function e(r){this.element=rV(r),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,s=n.length;i<s;i++){var o=n[i];if(o.ownerNode===t)return o}throw Fm(17)}(this.element),this.length=0}return e.prototype.insertRule=function(r,t){try{return this.sheet.insertRule(t,r),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},e.prototype.getRule=function(r){var t=this.sheet.cssRules[r];return t&&t.cssText?t.cssText:""},e}(),l$e=function(){function e(r){this.element=rV(r),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(r,t){if(r<=this.length&&r>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[r]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},e.prototype.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),u$e=function(){function e(r){this.rules=[],this.length=0}return e.prototype.insertRule=function(r,t){return r<=this.length&&(this.rules.splice(r,0,t),this.length++,!0)},e.prototype.deleteRule=function(r){this.rules.splice(r,1),this.length--},e.prototype.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),O6=VP,c$e={isServer:!VP,useCSSOMInjection:!jwe},nV=function(){function e(r,t,n){r===void 0&&(r=Qp),t===void 0&&(t={});var i=this;this.options=Cs(Cs({},c$e),r),this.gs=t,this.names=new Map(n),this.server=!!r.isServer,!this.server&&VP&&O6&&(O6=!1,function(s){for(var o=document.querySelectorAll(r$e),a=0,l=o.length;a<l;a++){var u=o[a];u&&u.getAttribute(Jp)!=="active"&&(s$e(s,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),YP(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(c){var p=function(_){return h$.get(_)}(c);if(p===void 0)return"continue";var y=s.names.get(p),w=o.getGroup(c);if(y===void 0||w.length===0)return"continue";var b="".concat(Jp,".g").concat(c,'[id="').concat(p,'"]'),T="";y!==void 0&&y.forEach(function(_){_.length>0&&(T+="".concat(_,","))}),l+="".concat(w).concat(b,'{content:"').concat(T,'"}').concat(`/*!sc*/
`)},f=0;f<a;f++)u(f);return l}(i)})}return e.registerId=function(r){return r1(r)},e.prototype.reconstructWithOptions=function(r,t){return t===void 0&&(t=!0),new e(Cs(Cs({},this.options),r),this.gs,t&&this.names||void 0)},e.prototype.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(r=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new u$e(i):n?new a$e(i):new l$e(i)}(this.options),new e$e(r)));var r},e.prototype.hasNameForId=function(r,t){return this.names.has(r)&&this.names.get(r).has(t)},e.prototype.registerName=function(r,t){if(r1(r),this.names.has(r))this.names.get(r).add(t);else{var n=new Set;n.add(t),this.names.set(r,n)}},e.prototype.insertRules=function(r,t,n){this.registerName(r,t),this.getTag().insertRules(r1(r),n)},e.prototype.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},e.prototype.clearRules=function(r){this.getTag().clearGroup(r1(r)),this.clearNames(r)},e.prototype.clearTag=function(){this.tag=void 0},e}(),f$e=/&/g,h$e=/^\s*\/\/.*$/gm;function iV(e,r){return e.map(function(t){return t.type==="rule"&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(n){return"".concat(r," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=iV(t.children,r)),t})}function d$e(e){var r,t,n,i=e===void 0?Qp:e,s=i.options,o=s===void 0?Qp:s,a=i.plugins,l=a===void 0?J_:a,u=function(p,y,w){return w===t||w.startsWith(t)&&w.endsWith(t)&&w.replaceAll(t,"").length>0?".".concat(r):p},f=l.slice();f.push(function(p){p.type===G_&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(f$e,t).replace(n,u))}),o.prefix&&f.push(Lwe),f.push(Dwe);var c=function(p,y,w,b){y===void 0&&(y=""),w===void 0&&(w=""),b===void 0&&(b="&"),r=b,t=y,n=new RegExp("\\".concat(t,"\\b"),"g");var T=p.replace(h$e,""),_=Nwe(w||y?"".concat(w," ").concat(y," { ").concat(T," }"):T);o.namespace&&(_=iV(_,o.namespace));var A=[];return f$(_,Bwe(f.concat(Mwe(function(x){return A.push(x)})))),A};return c.hash=l.length?l.reduce(function(p,y){return y.name||Fm(15),ap(p,y.name)},5381).toString():"",c}var p$e=new nV,aA=d$e(),sV=Ta.createContext({shouldForwardProp:void 0,styleSheet:p$e,stylis:aA});sV.Consumer;Ta.createContext(void 0);function C6(){return m_(sV)}var oV=function(){function e(r,t){var n=this;this.inject=function(i,s){s===void 0&&(s=aA);var o=n.name+s.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,s(n.rules,o,"@keyframes"))},this.name=r,this.id="sc-keyframes-".concat(r),this.rules=t,YP(this,function(){throw Fm(12,String(n.name))})}return e.prototype.getName=function(r){return r===void 0&&(r=aA),this.name+r.hash},e}(),v$e=function(e){return e>="A"&&e<="Z"};function P6(e){for(var r="",t=0;t<e.length;t++){var n=e[t];if(t===1&&n==="-"&&e[0]==="-")return e;v$e(n)?r+="-"+n.toLowerCase():r+=n}return r.startsWith("ms-")?"-"+r:r}var aV=function(e){return e==null||e===!1||e===""},lV=function(e){var r,t,n=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!aV(s)&&(Array.isArray(s)&&s.isCss||ev(s)?n.push("".concat(P6(i),":"),s,";"):Xy(s)?n.push.apply(n,Zy(Zy(["".concat(i," {")],lV(s),!1),["}"],!1)):n.push("".concat(P6(i),": ").concat((r=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||r in Fwe||r.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function fh(e,r,t,n){if(aV(e))return[];if(GP(e))return[".".concat(e.styledComponentId)];if(ev(e)){if(!ev(s=e)||s.prototype&&s.prototype.isReactComponent||!r)return[e];var i=e(r);return fh(i,r,t,n)}var s;return e instanceof oV?t?(e.inject(t,n),[e.getName(n)]):[e]:Xy(e)?lV(e):Array.isArray(e)?Array.prototype.concat.apply(J_,e.map(function(o){return fh(o,r,t,n)})):[e.toString()]}function g$e(e){for(var r=0;r<e.length;r+=1){var t=e[r];if(ev(t)&&!GP(t))return!1}return!0}var y$e=ZK("6.0.5"),m$e=function(){function e(r,t,n){this.rules=r,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&g$e(r),this.componentId=t,this.baseHash=ap(y$e,t),this.baseStyle=n,nV.registerId(t)}return e.prototype.generateAndInjectStyles=function(r,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(r,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=eh(i,this.staticRulesId);else{var s=sA(fh(this.rules,r,t,n)),o=iA(ap(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=eh(i,o),this.staticRulesId=o}else{for(var l=ap(this.baseHash,n.hash),u="",f=0;f<this.rules.length;f++){var c=this.rules[f];if(typeof c=="string")u+=c;else if(c){var p=sA(fh(c,r,t,n));l=ap(l,p),u+=p}}if(u){var y=iA(l>>>0);t.hasNameForId(this.componentId,y)||t.insertRules(this.componentId,y,n(u,".".concat(y),void 0,this.componentId)),i=eh(i,y)}}return i},e}(),uV=Ta.createContext(void 0);uV.Consumer;var nS={};function b$e(e,r,t){var n=GP(e),i=e,s=!tS(e),o=r.attrs,a=o===void 0?J_:o,l=r.componentId,u=l===void 0?function(x,I){var O=typeof x!="string"?"sc":S6(x);nS[O]=(nS[O]||0)+1;var C="".concat(O,"-").concat(XK("6.0.5"+O+nS[O]));return I?"".concat(I,"-").concat(C):C}(r.displayName,r.parentComponentId):l,f=r.displayName;f===void 0&&function(x){return tS(x)?"styled.".concat(x):"Styled(".concat(qwe(x),")")}(e);var c=r.displayName&&r.componentId?"".concat(S6(r.displayName),"-").concat(r.componentId):r.componentId||u,p=n&&i.attrs?i.attrs.concat(a).filter(Boolean):a,y=r.shouldForwardProp;if(n&&i.shouldForwardProp){var w=i.shouldForwardProp;if(r.shouldForwardProp){var b=r.shouldForwardProp;y=function(x,I){return w(x,I)&&b(x,I)}}else y=w}var T=new m$e(t,c,n?i.componentStyle:void 0);function _(x,I){return function(O,C,g){var M=O.attrs,B=O.componentStyle,L=O.defaultProps,q=O.foldedComponentIds,Q=O.styledComponentId,te=O.target,X=Ta.useContext(uV),j=C6(),Z=O.shouldForwardProp||j.shouldForwardProp,ie=function(it,xe,ge){for(var Te,Fe=Cs(Cs({},xe),{className:void 0,theme:ge}),$=0;$<it.length;$+=1){var S=ev(Te=it[$])?Te(Fe):Te;for(var N in S)Fe[N]=N==="className"?eh(Fe[N],S[N]):N==="style"?Cs(Cs({},Fe[N]),S[N]):S[N]}return xe.className&&(Fe.className=eh(Fe.className,xe.className)),Fe}(M,C,Hwe(C,X,L)||Qp),_e=ie.as||te,we={};for(var Ce in ie)ie[Ce]===void 0||Ce[0]==="$"||Ce==="as"||Ce==="theme"||(Ce==="forwardedAs"?we.as=ie.forwardedAs:Z&&!Z(Ce,_e)||(we[Ce]=ie[Ce]));var ze=function(it,xe){var ge=C6(),Te=it.generateAndInjectStyles(xe,ge.styleSheet,ge.stylis);return Te}(B,ie),Ge=eh(q,Q);return ze&&(Ge+=" "+ze),ie.className&&(Ge+=" "+ie.className),we[tS(_e)&&!YK.has(_e)?"class":"className"]=Ge,we.ref=g,Qe(_e,we)}(A,x,I)}var A=Ta.forwardRef(_);return A.attrs=p,A.componentStyle=T,A.shouldForwardProp=y,A.foldedComponentIds=n?eh(i.foldedComponentIds,i.styledComponentId):"",A.styledComponentId=c,A.target=n?i.target:e,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=n?function(I){for(var O=[],C=1;C<arguments.length;C++)O[C-1]=arguments[C];for(var g=0,M=O;g<M.length;g++)oA(I,M[g],!0);return I}({},i.defaultProps,x):x}}),YP(A,function(){return".".concat(A.styledComponentId)}),s&&tV(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function N6(e,r){for(var t=[e[0]],n=0,i=r.length;n<i;n+=1)t.push(r[n],e[n+1]);return t}var R6=function(e){return Object.assign(e,{isCss:!0})};function ZP(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(ev(e)||Xy(e)){var n=e;return R6(fh(N6(J_,Zy([n],r,!0))))}var i=e;return r.length===0&&i.length===1&&typeof i[0]=="string"?fh(i):R6(fh(N6(i,r)))}function lA(e,r,t){if(t===void 0&&(t=Qp),!r)throw Fm(1,r);var n=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return e(r,t,ZP.apply(void 0,Zy([i],s,!1)))};return n.attrs=function(i){return lA(e,r,Cs(Cs({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return lA(e,r,Cs(Cs({},t),i))},n}var cV=function(e){return lA(b$e,e)},xn=cV;YK.forEach(function(e){xn[e]=cV(e)});function w$e(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=sA(ZP.apply(void 0,Zy([e],r,!1))),i=XK(n);return new oV(i,n)}const $$e=xn.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  justify-content: ${e=>e.centerVertically?"center":e.justifyContent||"flex-start"};
  align-items: center;
  overflow-y: auto;
  overflow-x: hidden;
`,_$e=xn.div`
  width: ${e=>e.width||"auto"};
  height: ${e=>e.height||"auto"};
  max-height: calc(100% - 40px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Iu=({width:e,height:r,centerVertically:t,showContainer:n,children:i,onClose:s})=>{const o=f=>{f.key==="Escape"&&(s==null||s())},a=f=>{f.stopPropagation(),s==null||s()},l=f=>{f.stopPropagation()};kt(()=>(document.body.style.overflow="hidden",window.addEventListener("keydown",o),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",o)}),[o]);const u=n?v("div",{className:"p-8 border-neutral-500 border-2 bg-black rounded-lg shadow-lg",style:{width:"600px","max-width":"calc(100vw - 40px)"},onClick:f=>l(f),children:i}):i;return v($$e,{centerVertically:t,onClick:a,children:v(_$e,{width:e,height:r,children:u})})},x$e=xn.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 20px;
`,E$e=e=>{var r;return v(Iu,{centerVertically:((r=e.images)==null?void 0:r.length)===1,onClose:e.onClose,children:v(x$e,{children:e.images.map(t=>v("p",{children:v($u,{className:"rounded-sm",style:{maxHeight:"90vh",maxWidth:"90vw"},src:t})}))})})};var fV=function(e,r,t,n){var i;r[0]=0;for(var s=1;s<r.length;s++){var o=r[s++],a=r[s]?(r[0]|=o?1:2,t[r[s++]]):r[++s];o===3?n[0]=a:o===4?n[1]=Object.assign(n[1]||{},a):o===5?(n[1]=n[1]||{})[r[++s]]=a:o===6?n[1][r[++s]]+=a+"":o?(i=e.apply(a,fV(e,a,t,["",null])),n.push(i),a[0]?r[0]|=2:(r[s-2]=0,r[s]=i)):n.push(a)}return n},D6=new Map;function S$e(e){var r=D6.get(this);return r||(r=new Map,D6.set(this,r)),(r=fV(this,r.get(e)||(r.set(e,r=function(t){for(var n,i,s=1,o="",a="",l=[0],u=function(p){s===1&&(p||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,p,o):s===3&&(p||o)?(l.push(3,p,o),s=2):s===2&&o==="..."&&p?l.push(4,p,0):s===2&&o&&!p?l.push(5,0,!0,o):s>=5&&((o||!p&&s===5)&&(l.push(s,0,o,i),s=6),p&&(l.push(s,p,0,i),s=6)),o=""},f=0;f<t.length;f++){f&&(s===1&&u(),u(f));for(var c=0;c<t[f].length;c++)n=t[f][c],s===1?n==="<"?(u(),l=[l],s=3):o+=n:s===4?o==="--"&&n===">"?(s=1,o=""):o=n+o[0]:a?n===a?a="":o+=n:n==='"'||n==="'"?a=n:n===">"?(u(),s=1):s&&(n==="="?(s=5,i=o,o=""):n==="/"&&(s<5||t[f][c+1]===">")?(u(),s===3&&(l=l[0]),s=l,(l=l[0]).push(2,0,s),s=0):n===" "||n==="	"||n===`
`||n==="\r"?(u(),s=2):o+=n),s===3&&o==="!--"&&(s=4,l=l[0])}return u(),l}(e)),r),arguments,[])).length>1?r:r[0]}var Co=S$e.bind(Qe);function k$e(){this.__data__=[],this.size=0}var T$e=k$e;function I$e(e,r){return e===r||e!==e&&r!==r}var hV=I$e,A$e=hV;function O$e(e,r){for(var t=e.length;t--;)if(A$e(e[t][0],r))return t;return-1}var Q_=O$e,C$e=Q_,P$e=Array.prototype,N$e=P$e.splice;function R$e(e){var r=this.__data__,t=C$e(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():N$e.call(r,t,1),--this.size,!0}var D$e=R$e,B$e=Q_;function M$e(e){var r=this.__data__,t=B$e(r,e);return t<0?void 0:r[t][1]}var L$e=M$e,F$e=Q_;function j$e(e){return F$e(this.__data__,e)>-1}var H$e=j$e,z$e=Q_;function U$e(e,r){var t=this.__data__,n=z$e(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}var W$e=U$e,q$e=T$e,K$e=D$e,V$e=L$e,G$e=H$e,Y$e=W$e;function kv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}kv.prototype.clear=q$e;kv.prototype.delete=K$e;kv.prototype.get=V$e;kv.prototype.has=G$e;kv.prototype.set=Y$e;var ex=kv,Z$e=ex;function X$e(){this.__data__=new Z$e,this.size=0}var J$e=X$e;function Q$e(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var e_e=Q$e;function t_e(e){return this.__data__.get(e)}var r_e=t_e;function n_e(e){return this.__data__.has(e)}var i_e=n_e,s_e=Om,o_e=Am,a_e="[object AsyncFunction]",l_e="[object Function]",u_e="[object GeneratorFunction]",c_e="[object Proxy]";function f_e(e){if(!o_e(e))return!1;var r=s_e(e);return r==l_e||r==u_e||r==a_e||r==c_e}var dV=f_e,h_e=_l,d_e=h_e["__core-js_shared__"],p_e=d_e,iS=p_e,B6=function(){var e=/[^.]+$/.exec(iS&&iS.keys&&iS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function v_e(e){return!!B6&&B6 in e}var g_e=v_e,y_e=Function.prototype,m_e=y_e.toString;function b_e(e){if(e!=null){try{return m_e.call(e)}catch{}try{return e+""}catch{}}return""}var pV=b_e,w_e=dV,$_e=g_e,__e=Am,x_e=pV,E_e=/[\\^$.*+?()[\]{}|]/g,S_e=/^\[object .+?Constructor\]$/,k_e=Function.prototype,T_e=Object.prototype,I_e=k_e.toString,A_e=T_e.hasOwnProperty,O_e=RegExp("^"+I_e.call(A_e).replace(E_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function C_e(e){if(!__e(e)||$_e(e))return!1;var r=w_e(e)?O_e:S_e;return r.test(x_e(e))}var P_e=C_e;function N_e(e,r){return e==null?void 0:e[r]}var R_e=N_e,D_e=P_e,B_e=R_e;function M_e(e,r){var t=B_e(e,r);return D_e(t)?t:void 0}var Tv=M_e,L_e=Tv,F_e=_l,j_e=L_e(F_e,"Map"),XP=j_e,H_e=Tv,z_e=H_e(Object,"create"),tx=z_e,M6=tx;function U_e(){this.__data__=M6?M6(null):{},this.size=0}var W_e=U_e;function q_e(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var K_e=q_e,V_e=tx,G_e="__lodash_hash_undefined__",Y_e=Object.prototype,Z_e=Y_e.hasOwnProperty;function X_e(e){var r=this.__data__;if(V_e){var t=r[e];return t===G_e?void 0:t}return Z_e.call(r,e)?r[e]:void 0}var J_e=X_e,Q_e=tx,exe=Object.prototype,txe=exe.hasOwnProperty;function rxe(e){var r=this.__data__;return Q_e?r[e]!==void 0:txe.call(r,e)}var nxe=rxe,ixe=tx,sxe="__lodash_hash_undefined__";function oxe(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=ixe&&r===void 0?sxe:r,this}var axe=oxe,lxe=W_e,uxe=K_e,cxe=J_e,fxe=nxe,hxe=axe;function Iv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Iv.prototype.clear=lxe;Iv.prototype.delete=uxe;Iv.prototype.get=cxe;Iv.prototype.has=fxe;Iv.prototype.set=hxe;var dxe=Iv,L6=dxe,pxe=ex,vxe=XP;function gxe(){this.size=0,this.__data__={hash:new L6,map:new(vxe||pxe),string:new L6}}var yxe=gxe;function mxe(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var bxe=mxe,wxe=bxe;function $xe(e,r){var t=e.__data__;return wxe(r)?t[typeof r=="string"?"string":"hash"]:t.map}var rx=$xe,_xe=rx;function xxe(e){var r=_xe(this,e).delete(e);return this.size-=r?1:0,r}var Exe=xxe,Sxe=rx;function kxe(e){return Sxe(this,e).get(e)}var Txe=kxe,Ixe=rx;function Axe(e){return Ixe(this,e).has(e)}var Oxe=Axe,Cxe=rx;function Pxe(e,r){var t=Cxe(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}var Nxe=Pxe,Rxe=yxe,Dxe=Exe,Bxe=Txe,Mxe=Oxe,Lxe=Nxe;function Av(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Av.prototype.clear=Rxe;Av.prototype.delete=Dxe;Av.prototype.get=Bxe;Av.prototype.has=Mxe;Av.prototype.set=Lxe;var vV=Av,Fxe=ex,jxe=XP,Hxe=vV,zxe=200;function Uxe(e,r){var t=this.__data__;if(t instanceof Fxe){var n=t.__data__;if(!jxe||n.length<zxe-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Hxe(n)}return t.set(e,r),this.size=t.size,this}var Wxe=Uxe,qxe=ex,Kxe=J$e,Vxe=e_e,Gxe=r_e,Yxe=i_e,Zxe=Wxe;function Ov(e){var r=this.__data__=new qxe(e);this.size=r.size}Ov.prototype.clear=Kxe;Ov.prototype.delete=Vxe;Ov.prototype.get=Gxe;Ov.prototype.has=Yxe;Ov.prototype.set=Zxe;var Xxe=Ov,Jxe="__lodash_hash_undefined__";function Qxe(e){return this.__data__.set(e,Jxe),this}var e2e=Qxe;function t2e(e){return this.__data__.has(e)}var r2e=t2e,n2e=vV,i2e=e2e,s2e=r2e;function d$(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new n2e;++r<t;)this.add(e[r])}d$.prototype.add=d$.prototype.push=i2e;d$.prototype.has=s2e;var o2e=d$;function a2e(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}var l2e=a2e;function u2e(e,r){return e.has(r)}var c2e=u2e,f2e=o2e,h2e=l2e,d2e=c2e,p2e=1,v2e=2;function g2e(e,r,t,n,i,s){var o=t&p2e,a=e.length,l=r.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),f=s.get(r);if(u&&f)return u==r&&f==e;var c=-1,p=!0,y=t&v2e?new f2e:void 0;for(s.set(e,r),s.set(r,e);++c<a;){var w=e[c],b=r[c];if(n)var T=o?n(b,w,c,r,e,s):n(w,b,c,e,r,s);if(T!==void 0){if(T)continue;p=!1;break}if(y){if(!h2e(r,function(_,A){if(!d2e(y,A)&&(w===_||i(w,_,t,n,s)))return y.push(A)})){p=!1;break}}else if(!(w===b||i(w,b,t,n,s))){p=!1;break}}return s.delete(e),s.delete(r),p}var gV=g2e,y2e=_l,m2e=y2e.Uint8Array,b2e=m2e;function w2e(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}var $2e=w2e;function _2e(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var x2e=_2e,F6=oP,j6=b2e,E2e=hV,S2e=gV,k2e=$2e,T2e=x2e,I2e=1,A2e=2,O2e="[object Boolean]",C2e="[object Date]",P2e="[object Error]",N2e="[object Map]",R2e="[object Number]",D2e="[object RegExp]",B2e="[object Set]",M2e="[object String]",L2e="[object Symbol]",F2e="[object ArrayBuffer]",j2e="[object DataView]",H6=F6?F6.prototype:void 0,sS=H6?H6.valueOf:void 0;function H2e(e,r,t,n,i,s,o){switch(t){case j2e:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case F2e:return!(e.byteLength!=r.byteLength||!s(new j6(e),new j6(r)));case O2e:case C2e:case R2e:return E2e(+e,+r);case P2e:return e.name==r.name&&e.message==r.message;case D2e:case M2e:return e==r+"";case N2e:var a=k2e;case B2e:var l=n&I2e;if(a||(a=T2e),e.size!=r.size&&!l)return!1;var u=o.get(e);if(u)return u==r;n|=A2e,o.set(e,r);var f=S2e(a(e),a(r),n,i,s,o);return o.delete(e),f;case L2e:if(sS)return sS.call(e)==sS.call(r)}return!1}var z2e=H2e;function U2e(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var W2e=U2e,q2e=Array.isArray,JP=q2e,K2e=W2e,V2e=JP;function G2e(e,r,t){var n=r(e);return V2e(e)?n:K2e(n,t(e))}var Y2e=G2e;function Z2e(e,r){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var o=e[t];r(o,t,e)&&(s[i++]=o)}return s}var X2e=Z2e;function J2e(){return[]}var Q2e=J2e,eEe=X2e,tEe=Q2e,rEe=Object.prototype,nEe=rEe.propertyIsEnumerable,z6=Object.getOwnPropertySymbols,iEe=z6?function(e){return e==null?[]:(e=Object(e),eEe(z6(e),function(r){return nEe.call(e,r)}))}:tEe,sEe=iEe;function oEe(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var aEe=oEe,lEe=Om,uEe=Cm,cEe="[object Arguments]";function fEe(e){return uEe(e)&&lEe(e)==cEe}var hEe=fEe,U6=hEe,dEe=Cm,yV=Object.prototype,pEe=yV.hasOwnProperty,vEe=yV.propertyIsEnumerable,gEe=U6(function(){return arguments}())?U6:function(e){return dEe(e)&&pEe.call(e,"callee")&&!vEe.call(e,"callee")},yEe=gEe,p$={exports:{}};function mEe(){return!1}var bEe=mEe;p$.exports;(function(e,r){var t=_l,n=bEe,i=r&&!r.nodeType&&r,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;e.exports=u})(p$,p$.exports);var mV=p$.exports,wEe=9007199254740991,$Ee=/^(?:0|[1-9]\d*)$/;function _Ee(e,r){var t=typeof e;return r=r??wEe,!!r&&(t=="number"||t!="symbol"&&$Ee.test(e))&&e>-1&&e%1==0&&e<r}var xEe=_Ee,EEe=9007199254740991;function SEe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=EEe}var bV=SEe,kEe=Om,TEe=bV,IEe=Cm,AEe="[object Arguments]",OEe="[object Array]",CEe="[object Boolean]",PEe="[object Date]",NEe="[object Error]",REe="[object Function]",DEe="[object Map]",BEe="[object Number]",MEe="[object Object]",LEe="[object RegExp]",FEe="[object Set]",jEe="[object String]",HEe="[object WeakMap]",zEe="[object ArrayBuffer]",UEe="[object DataView]",WEe="[object Float32Array]",qEe="[object Float64Array]",KEe="[object Int8Array]",VEe="[object Int16Array]",GEe="[object Int32Array]",YEe="[object Uint8Array]",ZEe="[object Uint8ClampedArray]",XEe="[object Uint16Array]",JEe="[object Uint32Array]",tn={};tn[WEe]=tn[qEe]=tn[KEe]=tn[VEe]=tn[GEe]=tn[YEe]=tn[ZEe]=tn[XEe]=tn[JEe]=!0;tn[AEe]=tn[OEe]=tn[zEe]=tn[CEe]=tn[UEe]=tn[PEe]=tn[NEe]=tn[REe]=tn[DEe]=tn[BEe]=tn[MEe]=tn[LEe]=tn[FEe]=tn[jEe]=tn[HEe]=!1;function QEe(e){return IEe(e)&&TEe(e.length)&&!!tn[kEe(e)]}var eSe=QEe;function tSe(e){return function(r){return e(r)}}var rSe=tSe,v$={exports:{}};v$.exports;(function(e,r){var t=dW,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(v$,v$.exports);var nSe=v$.exports,iSe=eSe,sSe=rSe,W6=nSe,q6=W6&&W6.isTypedArray,oSe=q6?sSe(q6):iSe,wV=oSe,aSe=aEe,lSe=yEe,uSe=JP,cSe=mV,fSe=xEe,hSe=wV,dSe=Object.prototype,pSe=dSe.hasOwnProperty;function vSe(e,r){var t=uSe(e),n=!t&&lSe(e),i=!t&&!n&&cSe(e),s=!t&&!n&&!i&&hSe(e),o=t||n||i||s,a=o?aSe(e.length,String):[],l=a.length;for(var u in e)(r||pSe.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||fSe(u,l)))&&a.push(u);return a}var gSe=vSe,ySe=Object.prototype;function mSe(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||ySe;return e===t}var bSe=mSe;function wSe(e,r){return function(t){return e(r(t))}}var $Se=wSe,_Se=$Se,xSe=_Se(Object.keys,Object),ESe=xSe,SSe=bSe,kSe=ESe,TSe=Object.prototype,ISe=TSe.hasOwnProperty;function ASe(e){if(!SSe(e))return kSe(e);var r=[];for(var t in Object(e))ISe.call(e,t)&&t!="constructor"&&r.push(t);return r}var OSe=ASe,CSe=dV,PSe=bV;function NSe(e){return e!=null&&PSe(e.length)&&!CSe(e)}var RSe=NSe,DSe=gSe,BSe=OSe,MSe=RSe;function LSe(e){return MSe(e)?DSe(e):BSe(e)}var FSe=LSe,jSe=Y2e,HSe=sEe,zSe=FSe;function USe(e){return jSe(e,zSe,HSe)}var WSe=USe,K6=WSe,qSe=1,KSe=Object.prototype,VSe=KSe.hasOwnProperty;function GSe(e,r,t,n,i,s){var o=t&qSe,a=K6(e),l=a.length,u=K6(r),f=u.length;if(l!=f&&!o)return!1;for(var c=l;c--;){var p=a[c];if(!(o?p in r:VSe.call(r,p)))return!1}var y=s.get(e),w=s.get(r);if(y&&w)return y==r&&w==e;var b=!0;s.set(e,r),s.set(r,e);for(var T=o;++c<l;){p=a[c];var _=e[p],A=r[p];if(n)var x=o?n(A,_,p,r,e,s):n(_,A,p,e,r,s);if(!(x===void 0?_===A||i(_,A,t,n,s):x)){b=!1;break}T||(T=p=="constructor")}if(b&&!T){var I=e.constructor,O=r.constructor;I!=O&&"constructor"in e&&"constructor"in r&&!(typeof I=="function"&&I instanceof I&&typeof O=="function"&&O instanceof O)&&(b=!1)}return s.delete(e),s.delete(r),b}var YSe=GSe,ZSe=Tv,XSe=_l,JSe=ZSe(XSe,"DataView"),QSe=JSe,eke=Tv,tke=_l,rke=eke(tke,"Promise"),nke=rke,ike=Tv,ske=_l,oke=ike(ske,"Set"),ake=oke,lke=Tv,uke=_l,cke=lke(uke,"WeakMap"),fke=cke,uA=QSe,cA=XP,fA=nke,hA=ake,dA=fke,$V=Om,Cv=pV,V6="[object Map]",hke="[object Object]",G6="[object Promise]",Y6="[object Set]",Z6="[object WeakMap]",X6="[object DataView]",dke=Cv(uA),pke=Cv(cA),vke=Cv(fA),gke=Cv(hA),yke=Cv(dA),Of=$V;(uA&&Of(new uA(new ArrayBuffer(1)))!=X6||cA&&Of(new cA)!=V6||fA&&Of(fA.resolve())!=G6||hA&&Of(new hA)!=Y6||dA&&Of(new dA)!=Z6)&&(Of=function(e){var r=$V(e),t=r==hke?e.constructor:void 0,n=t?Cv(t):"";if(n)switch(n){case dke:return X6;case pke:return V6;case vke:return G6;case gke:return Y6;case yke:return Z6}return r});var mke=Of,oS=Xxe,bke=gV,wke=z2e,$ke=YSe,J6=mke,Q6=JP,e8=mV,_ke=wV,xke=1,t8="[object Arguments]",r8="[object Array]",n1="[object Object]",Eke=Object.prototype,n8=Eke.hasOwnProperty;function Ske(e,r,t,n,i,s){var o=Q6(e),a=Q6(r),l=o?r8:J6(e),u=a?r8:J6(r);l=l==t8?n1:l,u=u==t8?n1:u;var f=l==n1,c=u==n1,p=l==u;if(p&&e8(e)){if(!e8(r))return!1;o=!0,f=!1}if(p&&!f)return s||(s=new oS),o||_ke(e)?bke(e,r,t,n,i,s):wke(e,r,l,t,n,i,s);if(!(t&xke)){var y=f&&n8.call(e,"__wrapped__"),w=c&&n8.call(r,"__wrapped__");if(y||w){var b=y?e.value():e,T=w?r.value():r;return s||(s=new oS),i(b,T,t,n,s)}}return p?(s||(s=new oS),$ke(e,r,t,n,i,s)):!1}var kke=Ske,Tke=kke,i8=Cm;function _V(e,r,t,n,i){return e===r?!0:e==null||r==null||!i8(e)&&!i8(r)?e!==e&&r!==r:Tke(e,r,t,n,_V,i)}var Ike=_V,Ake=Ike;function Oke(e,r){return Ake(e,r)}var Cke=Oke;const xV=io(Cke);function Pke(e){const r=de.getPubKey(),t=de.toNostrHexAddress(e.pub);if(t===r)return v("span",{class:"mx-2 text-iris-blue tooltip","data-tip":he("you"),children:to.checkmark});if(!t)return null;if(tt.isFollowing(r,t))return v("span",{class:"ml-2 text-iris-blue tooltip","data-tip":he("following"),children:to.checkmark});{const i=tt.followedByFriendsCount(t);if(i>0){const s=i>10?"text-iris-orange":"";return v("span",{class:`${s} tooltip ml-2`,"data-tip":`${i} ${he("friends_following")}`,children:to.checkmark})}else return null}}const va=2;class pA{constructor(){oe(this,"trusts",Array(va+1).fill(0));oe(this,"distrusts",Array(va+1).fill(0))}addValue(r,t){r>0&&this.trusts[t]++,r<0&&this.distrusts[t]++}count(r){return this.trusts[r]+this.distrusts[r]}value(r){return this.trusts[r]-this.distrusts[r]}values(){let r=Array(va+1).fill(0);for(let t=0;t<=va;t++)r[t]=this.value(t);return r}isDirectTrusted(){return this.isTrusted(0)}isTrusted(r){return this.value(r)>0}isDirectDistrusted(){return this.isDistrusted(0)}isDistrusted(r){return this.value(r)<0}resolve(){let r={val:0,degree:0,count:0,hasScore:!1},t=0;for(;t<=va;t++)if(!(this.trusts[t]==0&&this.distrusts[t]==0)&&(r.hasScore=!0,this.value(t)!=0)){r.val=this.value(t);break}return r.count=this.count(t),r.degree=t,r}clone(){const r=Object.create(Object.getPrototypeOf(this));return r.trusts=this.trusts.slice(),r.distrusts=this.distrusts.slice(),r}equals(r){for(let t=0;t<=va;t++)if(this.trusts[t]!=r.trusts[t]||this.distrusts[t]!=r.distrusts[t])return!1;return!0}hasTrustScore(){return this.trusts.some(r=>r>0)}hasDistrustScore(){return this.distrusts.some(r=>r>0)}renderTrustCount(r=!1){return!this.hasTrustScore()&&!r?"":this.trusts.join("/")}renderDistrustCount(r=!1){return!this.hasDistrustScore()&&!r?"":this.distrusts.join("/")}}var au=(e=>(e[e.Key=1]="Key",e[e.Item=2]="Item",e[e.Unknown=3]="Unknown",e))(au||{});const g$=99;class EV{constructor(r,t=g$){oe(this,"id",0);oe(this,"out",Object.create(null));oe(this,"in",Object.create(null));oe(this,"degree",g$);oe(this,"entityType",1);oe(this,"timestamp",0);oe(this,"subscribed",0);oe(this,"score",new pA);oe(this,"profile");this.id=r,this.degree=t}}let SV=class{constructor(){oe(this,"key","");oe(this,"type",1);oe(this,"val");oe(this,"entityType",1);oe(this,"context","");oe(this,"note","");oe(this,"timestamp",0)}},kV=class TV extends SV{constructor(){super(...arguments);oe(this,"out");oe(this,"in");oe(this,"partial",!0)}static partialFrom(t){let n=new TV;return n.key=t.key,n.type=t.type,n.val=t.val,n.timestamp=t.timestamp,n}static key(t,n,i,s){let o=`${t}|${n}|${i}|${s}`;return Q1e(o)}fill(t){this.val=t.val,this.context=t.context,this.note=t.note,this.timestamp=t.timestamp,this.partial=!1}};class Nke extends SV{constructor(){super(...arguments);oe(this,"from","");oe(this,"to","")}}class Rke{constructor(){oe(this,"vertices",{});oe(this,"edges",{})}addVertice(r){return this.vertices[r]||(this.vertices[r]=new EV(r))}addEdge(r,t=!1){let n=this.edges[r.key];return n||(n=kV.partialFrom(r),this.edges[r.key]=n,n.out=this.addVertice(dt(r.from)),n.in=this.addVertice(dt(r.to)),n.out.out[n.in.id]=n,n.in.in[n.out.id]=n),t?n.fill(r):(n.val=r.val,n.timestamp=r.timestamp),n}removeEdge(r){const t=r.out,n=r.in;t&&delete t.out[n.id],n&&delete n.in[t.id],delete this.edges[r.key]}getVertice(r){const t=this.getVerticeId(r);if(t!=null)return this.vertices[t]}getEdge(r){return this.edges[r]}getVerticeId(r){return r?dt(r):void 0}calculateScore(r,t){let n=[],i=Object.create(null),s=this.vertices[r];if(!s)return;this.resetScore();let o=s.degree=0;for(n.push(s);n.length>0&&o<=t;){for(let a of n){if(o>0&&!a.score.isTrusted(o-1))continue;let l=o+1;for(const u in a.out){const f=this.vertices[u],c=a.out[u];!c||c.val===0||(f.score.addValue(c.val,o),!(o>=f.degree)&&(f.degree=l,f.entityType=c.entityType,o<t&&f.entityType===1&&!i[u]&&(i[u]=f)))}}n=Object.values(i),i=Object.create(null),o++}}calculateItemScore(r){let t=this.vertices[r];t.score=new pA;let n=g$;for(const i in t.in){const s=this.vertices[i],o=t.in[i];!o||o.val==0||(s.degree<n&&(n=s.degree),t.score.addValue(o.val,s.degree))}t.degree=n+1}resetScore(){for(let r in this.vertices){const t=this.vertices[r];t.score=new pA,t.degree=g$}}wotNetwork(r,t=va+1){let n=[];for(const i in this.vertices){const s=this.vertices[i];s.degree<=t&&s.degree>0&&(!r||s.entityType===r)&&n.push(s)}return n}inOutTrustById(r,t,n){const i=this.vertices[r];if(!i)return[];let s=Object.create(null);for(const o in i.in){const a=this.vertices[o];if(!a||a.degree>va)continue;const l=i.in[o];!l||l.val==0||n&&l.val!=n||(s[o]=a)}for(const o in i.out){const a=i.out[o];if(!a||a.val==0||n&&a.val!=n)continue;const l=this.vertices[o];(!t||l.entityType===t)&&(s[o]=l)}return Object.values(s)}outTrustById(r,t,n){let i=[];const s=this.vertices[r];for(const o in s.out){const a=this.vertices[o],l=s.out[o];!l||l.val==0||n&&l.val!=n||(!t||a.entityType===t)&&i.push(a)}return i}trustedBy(r,t,n,i=va){let s=[];const o=this.vertices[r];for(const a in o.in){const l=this.vertices[a];if(!l||l.degree>i)continue;const u=o.in[a];!u||u.val==0||n&&u.val!=n||(!t||l.entityType===t)&&s.push(l)}return s}getPaths(r){let t=[];const n=this.vertices[r];if(!n)return t;let i=[],s=[];for(i.push(n);i.length>0;){for(let o of i)if(o.degree!=0)for(const a in o.in){const l=o.in[a];if(!l||l.val===0)continue;const u=l.out;!u||u.degree>=o.degree||(t.push(l),s.push(u))}i=s,s=[]}return t}getUnsubscribedVertices(r){let t=new Array;for(const n in this.vertices){const i=this.vertices[n];i.degree<=r&&i.subscribed==0&&i.entityType==1&&(i.degree==0||i.score.isTrusted(i.degree-1))&&t.push(i)}return t}}const s8=32010,Dke={PubSub:Bt,unsubs:new Map,subscribeTrust(e,r,t){let n=an.enabledRelays(),i={kinds:[s8],authors:e,since:r};return Bt.relayPool.subscribe([i],n,(o,a,l)=>{setTimeout(()=>{t(o,a,l)},0)},0,void 0,{})},async publishTrust(e,r,t,n,i,s){let o=de.toNostrBech32Address(e,"npub");const a=`${o}|nostr`,l={kind:s8,content:t||"",created_at:s||this.getTimestamp(),tags:[["p",o],["d",a],["c",n||"nostr"],["v",r.toString()],["t",i.toString()]]};await this.sign(l),Bt.publish(l)},async sign(e){if(e.sig||await Me.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event")},getTimestamp(e=Date.now()){return Math.floor(e/1e3)},loadProfiles(e){let r=e.filter(n=>!tt.profiles.has(dt(n))),t=n=>{if(!n.content||tt.profiles.get(dt(n.pubkey)))return;let s=JSON.parse(n.content);Lr.addProfileToMemory(s)};return Bt.subscribe({kinds:[0],authors:r},t,!1)}};class nx{constructor(r){oe(this,"id",0);oe(this,"oldScore");oe(this,"oldDegree",0);oe(this,"counter",0);this.id=r}hasChanged(r){return!this.oldScore||!this.oldScore.equals(r.score)||this.oldDegree!=r.degree}clone(){var t;let r=new nx(this.id);return r.oldScore=(t=this.oldScore)==null?void 0:t.clone(),r.oldDegree=this.oldDegree,r.counter=this.counter,r}setScore(r){this.oldScore=r==null?void 0:r.score.clone(),this.oldDegree=(r==null?void 0:r.degree)||0}}const Bke="trustScoreEvent";class hh extends CustomEvent{constructor(r,t){super(hh.getEventId(r),{detail:t})}static getEventId(r){return Bke+r}static registerEvent(r,t){let n=hh.getEventId(r);document.addEventListener(n,t)}static unregisterEvent(r,t){let n=hh.getEventId(r);document.removeEventListener(n,t)}}const Mke="trust1";class Lke{constructor(r,t){oe(this,"db");oe(this,"localDataLoaded",!1);oe(this,"g",new Rke);oe(this,"sourceKey");oe(this,"sourceId",-1);oe(this,"wotPubSub");oe(this,"unsubs",{});oe(this,"subscriptionsCounter",0);oe(this,"verticeMonitor",Object.create(null));oe(this,"maxDegree",va);oe(this,"readyCallbacks",[]);oe(this,"processItems",{});oe(this,"processGraph",!1);oe(this,"processScoreDebounce",$n.debounce(this.processScore,1e3,{trailing:!0}));oe(this,"submitTrustIndex",{});oe(this,"profilesLoaded",!1);this.wotPubSub=r,this.db=t}async init(r){if(this.sourceKey=r,!this.localDataLoaded){this.sourceId=dt(this.sourceKey),this.g.addVertice(this.sourceId),await this.db.edges.each(t=>{this.g.addEdge(t,!1)}),console.info("Graph: "+Object.entries(this.g.vertices).length+" vertices and "+Object.entries(this.g.edges).length+" edges"),this.processGraph=!0,this.processScore(),this.localDataLoaded=!0;for(let t of this.readyCallbacks)t();this.readyCallbacks=[]}}whenReady(r){this.localDataLoaded?r():this.readyCallbacks.push(r)}async publishTrust(r,t=0,n=au.Key,i,s="nostr"){var y;const o=(y=this.wotPubSub)==null?void 0:y.getTimestamp(),a={from:this.sourceKey,to:r,val:t,entityType:n,context:s,note:i,timestamp:o},{outV:l,inV:u,preVal:f}=await this.setTrust(a,!1);this.addToProcessScoreQueue(l,u),this.processScore();let c=Mke+this.sourceKey+r+s,p=this.submitTrustIndex[c];p||(p=$n.debounce(async w=>{var b;f!=w&&(await((b=er.wotPubSub)==null?void 0:b.publishTrust(r,w,i,s,n,o)),delete this.submitTrustIndex[c])},3e3),this.submitTrustIndex[c]=p),p(t)}addToProcessScoreQueue(r,t){r.degree>this.maxDegree||(r.degree==this.maxDegree?this.processItems[t.id]=!0:t.entityType==au.Key?t.degree==this.maxDegree?this.processGraph=!0:this.processGraph=!0:this.processItems[t.id]=!0)}processScore(){let r=this.processGraph;if(this.processGraph)er.g.calculateScore(er.sourceId,this.maxDegree);else for(const t in er.processItems)er.g.calculateItemScore(parseInt(t)),r=!0;if(r){for(const t in er.verticeMonitor)er.callMonitor(parseInt(t));this.processGraph&&er.updateSubscriptions(),this.processGraph=!1,this.processItems={}}}callMonitor(r){let t=er.verticeMonitor[r];if(!t)return;let n=this.g.vertices[r];if(!n||!t.hasChanged(n))return;let i=t.clone();t.setScore(n),document.dispatchEvent(new hh(r,i))}addVerticeMonitor(r){let t=this.verticeMonitor[r];t||(t=new nx(r),this.verticeMonitor[r]=t),t.counter++}removeVerticeMonitor(r){let t=this.verticeMonitor[r];t&&(t.counter--,t.counter<=0&&delete this.verticeMonitor[r])}updateSubscriptions(){let r=this.g.getUnsubscribedVertices(this.maxDegree);this.subscribeToTrustEvents(r)}async setTrust(r,t){let{edge:n,preVal:i,change:s}=await this.putEdge(r,t),o=n.out,a=n.in;return{outV:o,inV:a,edge:n,preVal:i,change:s}}async putEdge(r,t){let{from:n,to:i,val:s,entityType:o,context:a,note:l,timestamp:u}=r,f=1,c,p=!1,y=kV.key(f,n,i,a),w=this.g.edges[y];if(w){if(c=w.val,w.timestamp<u||w.val!=s&&w.timestamp==u){let b={timestamp:0};w.val!=s&&(w.val=b.val=s),w.context!=a&&(w.context=b.context=a),w.note!=l&&(w.note=b.note=l),w.timestamp=b.timestamp=u,w.val==0&&t?(await this.db.edges.delete(y),this.g.removeEdge(w),w=void 0):await this.db.edges.update(y,b),p=!0}}else{if(s==0&&t)return{edge:w,preVal:c,change:p};let b=new Nke;b.type=f,b.key=y,b.from=n,b.to=i,b.val=s,b.entityType=o,b.context=a,b.note=l,b.timestamp=u,await this.db.edges.put(b),w=this.g.addEdge(b,!1),p=!0}return{edge:w,preVal:c,change:p}}subscribeToTrustEvents(r){if(r.length==0)return;let t=this,n=this.subscriptionsCounter++,i=0;const s=new Array;for(let o of r)i<o.timestamp&&(i=o.timestamp),s.push(u$(o.id));r.forEach(o=>o.subscribed=n),setTimeout(()=>{var o;console.time("Subscribing to trust events"),t.unsubs[n]=(o=t.wotPubSub)==null?void 0:o.subscribeTrust(s,i,t.trustEvent),console.timeEnd("Subscribing to trust events")},1)}unsubscribeAll(){var r,t;for(let n in this.unsubs)(t=(r=this.unsubs)[n])==null||t.call(r)}async trustEvent(r){let t,n,i,s,o,a,l=r.pubkey;if(r.tags)for(const u of r.tags)switch(u[0]){case"p":t=u[1];break;case"c":n=u[1];break;case"d":i=u[1];break;case"v":s=u[1];break;case"t":o=u[1];break}if(a=r.content,t&&i&&s){let u=parseInt(s);if(isNaN(u)||u<-1||u>1)return;console.info(`Trust Event: ${l} -> ${t} = ${u} (${a})`);let f=o?parseInt(o):au.Item,c=de.toNostrHexAddress(l),p=de.toNostrHexAddress(t),{outV:y,inV:w,change:b}=await er.setTrust({from:c,to:p,val:u,note:a,context:n,entityType:f,timestamp:r.created_at},!0);b&&(er.addToProcessScoreQueue(y,w),er.processScoreDebounce())}}findOption(r,t){if(!t||t.length===0||r.degree==0)return;let n=r.score,{val:i,degree:s,count:o,hasScore:a}=n.resolve();if(!a)return;if(s===1)return i>0?t[t.length-1]:i<0?t[0]:void 0;let l=(i+o)*100/(o*2),u=Math.ceil(l/(100/t.length));return u=u===0?1:u>t.length?t.length:u,t[u-1]}getTrustList(r,t){if(!r)return[];let n=new Array;for(const i in r.in){const s=this.g.getEdge(r.in[i]);let o=this.g.vertices[i];o&&s.val==t&&n.push({outV:o,edge:s})}return n}}const er=new Lke(Dke,Qg),ix=(e,r,t)=>{const[n,i]=He({id:e,options:r,option:t});return kt(()=>{if(!e)return;let s=hh.getEventId(e);function o(u){let f=er.g.vertices[u.id];if(!f)return;let c=er.findOption(f,r);i(p=>({...p,...u,option:c,vertice:f}))}const a=u=>{let f=u.detail;f.id==e&&o(f)};er.addVerticeMonitor(e),document.addEventListener(s,a);let l=new hh(e,new nx(e));return l!=null&&l.detail&&o(l.detail),()=>{er.removeVerticeMonitor(e),document.removeEventListener(s,a)}},[e]),n},Fke=e=>{const r=RK(e.pub),t=ix(dt(e.pub),["badName","neutralName","goodName"],"");return v(lt,{children:[v("span",{className:(r.isDefault?"text-neutral-500":"")+" "+(t==null?void 0:t.option),children:r.name||r.display_name||e.placeholder}),e.hideBadge?"":v(Pke,{pub:e.pub})]})},$r=Fke,jke=5;class QP extends _n{constructor(){super();oe(this,"searchFromServer",$n.debounce(t=>{fetch(`https://eu.rbr.bio/search/${t}.json`).then(n=>{n.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{Me.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(t){if(t.keyCode===38||t.keyCode===40){t.preventDefault();const n=this.state.selected;let i=t.keyCode===40?n+1:n-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){Qt(this.base).find("input").val(""),this.setState({results:[],query:""})}componentDidMount(){var t;Re.get("showFollowSuggestions").on(this.inject()),Re.get("searchIndexUpdated").on(this.sub(()=>this.search())),Re.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),Qt(document).off("keydown").on("keydown",n=>{var i;n.key==="Tab"&&((i=document.activeElement)==null?void 0:i.tagName)==="BODY"?(n.preventDefault(),Qt(this.base).find("input").focus()):n.key==="Escape"&&(this.close(),Qt(this.base).find("input").blur())}),this.props.focus&&((t=Qt(this.base).find("input"))==null||t.focus())}componentDidUpdate(t,n){this.adjustResultsPosition(),t.focus!==this.props.focus&&Qt(this.base).find("input:visible").focus(),t.query!==this.props.query&&this.search(),this.state.selected>=0&&!xV(this.state.results.slice(0,this.state.selected+1),n.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){Qt(document).off("keyup")}adjustResultsPosition(){const t=Qt(this.base).find("input");t.length&&this.setState({offsetLeft:t[0].offsetLeft})}onSubmit(t){t.preventDefault();const n=Qt(this.base).find("input");n.val(""),n.trigger("blur");const i=Qt(this.base).find(".result.selected");i.length&&i[0].click()}preventUpDownDefault(t){(t.keyCode===38||t.keyCode===40)&&t.preventDefault()}search(){let t=this.props.query||Qt(this.base).find("input").first().val()||"";if(t=t.toString().trim().toLowerCase(),!t){this.close();return}if(t.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){Qt(this.base).find("input").first().val("");return}if(this.props.onSelect){if(t.match(/.+@.+\..+/)&&de.getPubKeyByNip05Address(t).then(o=>{var a,l;o&&t===String(this.props.query||Qt(this.base).find("input").first().val())&&((l=(a=this.props).onSelect)==null||l.call(a,{key:o}))}),t.startsWith("https://iris.to/")){const o=t.replace("https://iris.to","");xr(o);return}const n=t.match(/note[a-zA-Z0-9]{59,60}/gi);if(n){xr("/"+n[0]);return}const i=t.match(/npub[a-zA-Z0-9]{59,60}/gi);if(i){xr("/"+i[0]);return}const s=t.split("/profile/");if(s.length>1)return this.props.onSelect({key:s[1]});if(de.toNostrHexAddress(t))return this.props.onSelect({key:t})}if(this.searchFromServer(t),t){const n=CK.search(t).slice(0,jke);this.setState({results:n,query:t})}else this.setState({results:[],query:t})}onClick(t,n){this.props.onSelect&&(t.preventDefault(),t.stopPropagation(),this.props.onSelect(n)),this.close()}onResultFocus(t,n){this.setState({selected:n})}render(){return v("div",{className:`relative ${this.props.class}`,children:[this.props.resultsOnly?"":v("form",{onSubmit:t=>this.onSubmit(t),children:v("label",{children:v("input",{type:"text",onKeyPress:t=>this.preventUpDownDefault(t),onKeyDown:t=>this.preventUpDownDefault(t),onKeyUp:t=>this.onKeyUp(t),placeholder:he("search"),tabIndex:1,onInput:()=>this.onInput(),className:"input-bordered border-neutral-500 input input-sm w-full"})})}),v("div",{onKeyUp:t=>this.onKeyUp(t),className:`${this.state.query?"":"hidden"} absolute z-20 left-0 mt-2 w-full bg-black border border-neutral-700 rounded shadow-lg`,children:[this.state.query&&!this.props.resultsOnly?v("a",{onFocus:t=>this.onResultFocus(t,-1),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(this.state.selected===-1?"selected bg-neutral-700":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[v("div",{class:"avatar-container",children:v("div",{style:"font-size: 1.5em; width: 40px",children:"🔍"})}),v("div",{children:[v("span",{children:this.state.query}),v("br",{}),v("small",{children:he("search_posts")})]})]}):"",this.state.results.map((t,n)=>{const i=t.item;let s="";i.followers&&(i.followDistance===0?s=he("you"):i.followDistance===1?s=he("following"):s=`${i.followers.size} ${he("followers")}`);const o=de.toNostrBech32Address(i.key,"npub");return v("a",{onFocus:a=>this.onResultFocus(a,n),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(n===this.state.selected?"selected bg-neutral-700":""),href:`/${o}`,onClick:a=>this.onClick(a,i),children:[i.picture?v($u,{src:i.picture,className:"rounded-full",width:40}):v(Ki,{str:o,width:40},`${o}ic`),v("div",{children:[v($r,{pub:i.key},i.key+"searchResult"),v("br",{}),v("small",{children:s})]})]})})]})]})}}const e4=(e,r)=>r.indexOf(e.name.slice(-4))!==-1,aS=e=>e4(e,["webm",".mp4",".ogg"]),lS=e=>e4(e,[".mp3",".wav",".m4a"]),o8=e=>e4(e,[".jpg","jpeg",".gif",".png"]);class jm extends _n{constructor(){super(...arguments);oe(this,"coverRef",_m());oe(this,"state",{settings:{},player:{},activeFilePath:"",torrent:{},isAudioOpen:!1,showFiles:!1,torrenting:!1,hasNext:!1,splitPath:null,ogImageUrl:""});oe(this,"player");oe(this,"torrent");oe(this,"observer")}componentDidMount(){console.log("componentDidMount torrent"),Re.get("player").on(this.sub(n=>{if(this.player=n,this.setState({player:n}),this.torrent&&this.player&&this.player.filePath!==this.state.activeFilePath){const i=this.getActiveFile(this.torrent);i&&this.openFile(i)}}));const t=this.props.showFiles;t&&this.setState({showFiles:t}),Re.get("settings").on(this.inject()),(async()=>(this.props.standalone||await Re.get("settings").get("enableWebtorrent").once())&&this.startTorrenting())()}componentWillUnmount(){super.componentWillUnmount(),this.observer&&this.observer.disconnect(),delete this.observer}onPlay(t){t.target.muted||Re.get("player").get("paused").put(!0)}async startTorrenting(t){this.setState({torrenting:!0});const n=this.props.torrentId,{default:i}=await _r(()=>import("./index-132ce8f3.js").then(a=>a.i),[]),s=new i,o=s.get(n);o?this.onTorrent(o,t):s.add(n,(a,l)=>l&&!a&&this.onTorrent(l,t))}playAudio(t,n){n&&n.preventDefault(),Re.get("player").put({torrentId:this.props.torrentId,filePath:t,paused:!1})}pauseAudio(t){t&&t.preventDefault(),Re.get("player").put({paused:!0})}openFile(t,n){const i=this.base,s=aS(t),o=!s&&lS(t);if(this.state.activeFilePath===t.path){if(s){const y=i.querySelector("video");y&&y.play()}else o&&Re.get("player").get("paused").put(!1);return}let a;s||(a=t.path.split("/")),this.setState({activeFilePath:t.path,splitPath:a,isAudioOpen:o});let l,u;n?(l=!0,u=!1):(l=s&&this.state.settings.autoplayVideos,u=l);const f=i==null?void 0:i.querySelector(".player");if(f&&(f.innerHTML=""),o&&n&&this.playAudio(t.path),o||t.appendTo(f,{autoplay:l,muted:u}),s&&this.props.autopause){const y=i.querySelector("video"),w=T=>{T.forEach(_=>{_.isIntersecting?l&&(y==null||y.play()):y==null||y.pause()})},b={rootMargin:"0px",threshold:[.25,.75]};this.observer=new IntersectionObserver(w,b),this.observer.observe(y)}const c=i.querySelector(".info");c&&(c.style.display=s?"none":"block");const p=i.querySelector("video, audio");p&&(p.addEventListener("ended",()=>{const y=p.tagName==="VIDEO"?aS:lS;this.openNextFile(y)}),p.onplay=p.onvolumechange=this.onPlay)}getNextIndex(t){const n=this.state.torrent.files,i=n.findIndex(o=>o.path===this.state.activeFilePath);let s=n.findIndex((o,a)=>a>i&&t(o));return s===-1&&(s=n.findIndex(o=>t(o))),s===-1&&(s=i),s}openNextFile(t){const n=this.getNextIndex(t);this.openFile(this.state.torrent.files[n],!0)}getActiveFile(t){const n=this.player;let i;return n&&n.torrentId===this.props.torrentId&&(i=t.files.find(s=>s.path===n.filePath)),i}onTorrent(t,n){if(console.log("onTorrent",this.props.torrentId,t),!this.coverRef.current)return;this.torrent=t;const i=setInterval(()=>{if(!t.files){console.log("no files found in torrent:",t);return}clearInterval(i);const s=t.files.find(f=>aS(f)),o=t.files.find(f=>lS(f)),a=t.files.find(f=>o8(f)),l=this.getActiveFile(t)||s||o||a||t.files[0];this.setState({torrent:t,cover:a}),l&&this.openFile(l,n);let u=t.files.find(f=>o8(f)&&(f.name.indexOf("cover")>-1||f.name.indexOf("poster")>-1));u=u||a,u&&u.appendTo(this.coverRef.current)},1e3)}showFilesClicked(t){t.preventDefault(),this.setState({showFiles:!this.state.showFiles})}openTorrentClicked(t){t.preventDefault(),this.startTorrenting(!0)}renderLoadingTorrent(){const t=this.state,n=t.torrent,i=t.player,s=i&&i.torrentId===this.props.torrentId&&!i.paused;let o="";return t.isAudioOpen&&(o=s?v("a",{href:"#",onClick:a=>this.pauseAudio(a),children:to.pause}):v("a",{href:"#",onClick:a=>this.playAudio(t.activeFilePath,a),children:to.play})),v(lt,{children:[t.torrenting&&!t.torrent?v("p",{children:"Loading attachment..."}):null,v("div",{className:"cover",ref:this.coverRef,style:t.isAudioOpen?{}:{display:"none"}}),v("div",{className:"info",children:t.splitPath?t.splitPath.map((a,l)=>l===t.splitPath.length-1?(t.isAudioOpen&&(a=a.split(".").slice(0,-1).join(".")),v("p",{children:v("b",{children:a})})):v("p",{children:a})):null}),t.hasNext?v("b",{children:"prev"}):null,v("div",{className:"player",children:o}),t.hasNext?v("b",{children:"next"}):null,this.props.standalone||this.props.preview?v(lt,{children:[v("a",{href:this.props.torrentId,children:"Magnet link"}),n&&n.files?v("a",{href:"",style:{marginLeft:"30px"},onClick:a=>this.showFilesClicked(a),children:he(t.showFiles?"hide_files":"show_files")}):null]}):v(Jt,{href:`/torrent/${encodeURIComponent(this.props.torrentId)}`,children:he("show_files")}),t.showFiles&&n&&n.files?v(lt,{children:[v("p",{children:[he("peers"),": ",n.numPeers]}),v("div",{className:"flex-table details",children:n.files.map(a=>v("div",{onClick:()=>this.openFile(a,!0),className:`flex-row ${t.activeFilePath===a.path?"active":""}`,children:[v("div",{className:"flex-cell",children:a.name}),v("div",{className:"flex-cell no-flex",children:hr.formatBytes(a.length)})]},a.path))})]}):null]})}renderMeta(){const t=this.state,n=t.splitPath&&t.splitPath[t.splitPath.length-1].split(".").slice(0,-1).join(".")||"File sharing",i=`${n} | Iris`,s="Shared files",o=t.isAudioOpen?"music:song":"video.movie";return v(Sh,{children:[v("title",{children:n}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:o}),v("meta",{property:"og:title",content:i}),v("meta",{property:"og:description",content:s}),t.ogImageUrl?v("meta",{property:"og:image",content:t.ogImageUrl}):null]})}render(){return v("div",{className:"torrent",children:[this.props.standalone?this.renderMeta():null,!this.state.settings.enableWebtorrent&&!this.state.settings.torrenting&&!this.props.standalone?v("a",{href:"",onClick:t=>this.openTorrentClicked(t),children:he("show_attachment")}):this.renderLoadingTorrent()]})}}const a8=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/;class sx extends _n{constructor(){super(...arguments);oe(this,"newMsgRef",_m())}componentDidMount(){const t=Qt(this.newMsgRef.current);if((!hr.isMobile||this.props.forceAutofocusMobile==!0)&&this.props.autofocus!==!1&&t.focus(),!this.props.replyingTo)Re.get("channels").get("public").get("msgDraft").once(n=>!t.val()&&t.val(n));else{const n=window.history.state;n&&n["replyTo"+this.props.replyingTo]&&t.val(n["replyTo"+this.props.replyingTo])}}onMsgFormSubmit(t){t.preventDefault(),this.submit()}async submit(){this.props.replyingTo||Re.get("channels").get("public").get("msgDraft").put(null);const t=Qt(this.newMsgRef.current),n=t.val();if(!n.length)return;const i={text:n};this.props.replyingTo&&(i.replyingTo=this.props.replyingTo),this.state.attachments&&(i.attachments=this.state.attachments),await this.sendNostr(i),this.props.onSubmit&&this.props.onSubmit(i),this.setState({attachments:void 0,torrentId:void 0}),t.val(""),t.height(""),this.saveDraftToHistory()}setTextareaHeight(t){t.style.height="",t.style.height=`${t.scrollHeight}px`}onMsgTextPaste(t){const n=(t.clipboardData||window.clipboardData).getData("text"),s=/(magnet:\?xt=urn:btih:.*)/gi.exec(n);console.log("magnet match",s),s&&this.setState({torrentId:s[0]})}onKeyUp(t){[37,38,39,40].indexOf(t.keyCode)!=-1&&this.checkMention(t)}onKeyDown(t){(t.metaKey||t.ctrlKey)&&t.key==="Enter"&&this.submit()}saveDraftToHistory(){const t=Qt(this.newMsgRef.current).val(),i={...window.history.state};i["replyTo"+this.props.replyingTo]=t,window.history.replaceState(i,"")}onMsgTextInput(t){this.setTextareaHeight(t.target),this.props.replyingTo||Re.get("channels").get("public").get("msgDraft").put(Qt(t.target).val()),this.checkMention(t),this.saveDraftToHistory()}attachFileClicked(t){t.stopPropagation(),t.preventDefault(),Qt(this.base).find(".attachment-input").click()}attachmentsChanged(t){const n=t.target.files||t.dataTransfer.files;if(n){for(let i=0;i<n.length;i++){const s=new FormData;s.append("fileToUpload",n[i]);const o=this.state.attachments||[];o[i]=o[i]||{type:n[i].type},hr.getBase64(n[i]).then(a=>{o[i].data=a,this.setState({attachments:o})}),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:s}).then(async a=>{const l=await a.json();if(console.log("upload response",l),l){o[i].url=l,this.setState({attachments:o});const u=Qt(this.newMsgRef.current),f=u.val();f?u.val(f+`

`+l):u.val(l)}}).catch(a=>{console.error("upload error",a),o[i].error="upload failed",this.setState({attachments:o})})}Qt(t.target).val(null),Qt(this.newMsgRef.current).focus()}}onSelectMention(t){const n=Qt(this.base).find("textarea").get(0),i=n.selectionStart,s=[n.value.slice(0,i).replace(a8,"nostr:"),t.key,n.value.slice(i)].join("");n.value=`${s} `,n.focus(),n.selectionStart=n.selectionEnd=i+t.key.length}render(){const t=this.props.placeholder||(this.props.index==="media"?"type_a_message_or_paste_a_magnet_link":"type_a_message");return Co`<form
      autocomplete="off"
      class="message-form ${this.props.class||""} public"
      onSubmit=${n=>this.onMsgFormSubmit(n)}
    >
      <input
        name="attachment-input"
        type="file"
        class="hidden attachment-input"
        accept="image/*, video/*, audio/*"
        multiple
        onChange=${n=>this.attachmentsChanged(n)}
      />
      <textarea
        onDragOver=${n=>{n.preventDefault(),n.stopPropagation()}}
        onDrop=${n=>{n.preventDefault(),n.stopPropagation(),this.attachmentsChanged(n)}}
        onKeyUp=${n=>this.onKeyUp(n)}
        onKeyDown=${n=>this.onKeyDown(n)}
        onPaste=${n=>this.onMsgTextPaste(n)}
        onInput=${n=>this.onMsgTextInput(n)}
        onFocus=${()=>this.setState({focused:!0})}
        ref=${this.newMsgRef}
        className="p-2 mt-1 w-full h-12 bg-black focus:ring-blue-500 focus:border-blue-500 block w-full text-lg border-gray-700 rounded-md text-white"
        type="text"
        placeholder="${he(t)}"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="sentences"
        spellcheck="off"
      />
      ${this.state.mentioning?Co`
            <${QP}
              resultsOnly=${!0}
              query=${this.state.mentioning}
              onSelect=${n=>this.onSelectMention(n)}
            />
          `:""}
      ${this.props.waitForFocus&&!this.state.focused?"":Co`
            <div className="flex items-center justify-between mt-4">
              <button
                type="button"
                class="attach-file-btn btn"
                onClick=${n=>this.attachFileClicked(n)}
              >
                ${to.attach}
              </button>
              <button type="submit" className="btn btn-primary">${he("post")}</button>
            </div>
          `}

      <div class="attachment-preview">
        ${this.state.torrentId?Co` <${jm} preview=${!0} torrentId=${this.state.torrentId} /> `:""}
        ${this.state.attachments&&this.state.attachments.length?Co`
              <p>
                <a
                  href=""
                  onClick=${n=>{n.preventDefault(),this.setState({attachments:void 0})}}
                  >${he("remove_attachment")}</a
                >
              </p>
            `:""}
        ${this.state.attachments&&this.state.attachments.map(n=>{var s,o,a;const i=Co` ${n.error?Co`<span class="error">${n.error}</span>`:n.url||"uploading..."}`;return(s=n.type)!=null&&s.startsWith("audio")?Co`
              ${i}
              <audio controls>
                <source src=${n.data} />
              </audio>
            `:(o=n.type)!=null&&o.startsWith("video")?Co`
              ${i}
              <video controls loop=${!0} autoplay=${!0} muted=${!0}>
                <source src=${n.data} />
              </video>
            `:(a=n.type)!=null&&a.startsWith("image")?Co`${i} <${$u} src=${n.data} /> `:"unknown attachment type"})}
      </div>
    </form>`}async sendNostr(t){var o,a,l,u;const n={kind:1,content:t.text};if(t.replyingTo){const f=de.toNostrHexAddress(t.replyingTo);if(!f)throw new Error("invalid replyingTo");const c=await new Promise(y=>{Me.getEventById(f,!0,w=>y(w))});n.tags=c.tags.filter(y=>y[0]==="p");let p=(o=c.tags)==null?void 0:o.find(y=>y[0]==="e"&&y[3]==="root");p||(p=(a=c.tags)==null?void 0:a.find(y=>y[0]==="e")),p?(n.tags.unshift(["e",f,"","reply"]),n.tags.unshift(["e",p[1],"","root"])):n.tags.unshift(["e",f,"","root"]),(l=n.tags)!=null&&l.find(y=>y[0]==="p"&&y[1]===c.pubkey)||n.tags.push(["p",c.pubkey])}function i(f,c){var y,w;const p=[...t.text.matchAll(f)].map(b=>b[0]).filter((b,T,_)=>_.indexOf(b)===T);if(p){n.tags=n.tags||[];for(const b of p){const T=(y=b.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:y[0],_=T&&de.toNostrHexAddress(T);if(!_)continue;const A=[c,_,"","mention"];(w=n.tags)!=null&&w.find(x=>x[0]===A[0]&&x[1]===A[1])||n.tags.push(A)}}}i(hr.pubKeyRegex,"p"),i(hr.noteRegex,"e");const s=[...t.text.matchAll(hr.hashtagRegex)].map(f=>f[0].slice(1));if(s.length){n.tags=n.tags||[];for(const f of s)(u=n.tags)!=null&&u.find(c=>c[0]==="t"&&c[1]===f)||n.tags.push(["t",f])}return console.log("sending event",n),Me.publish(n)}checkMention(t){const i=t.target.value.slice(0,t.target.selectionStart).match(a8);if(i){const s=i[0].slice(1);de.toNostrHexAddress(s)||this.setState({mentioning:s})}else this.state.mentioning&&this.setState({mentioning:void 0})}}const{bech32:al,hex:$a,utf8:Hke}=tq,l8={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},u8={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c8={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},f8={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},i1=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],zke={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},Uke=BigInt("2100000000000000000"),h8=BigInt(1e11),vA={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},IV={};for(let e=0,r=Object.keys(vA);e<r.length;e++){const t=r[e],n=vA[r[e]].toString();IV[n]=t}const Wke={1:e=>$a.encode(al.fromWordsUnsafe(e)),16:e=>$a.encode(al.fromWordsUnsafe(e)),13:e=>Hke.encode(al.fromWordsUnsafe(e)),19:e=>$a.encode(al.fromWordsUnsafe(e)),23:e=>$a.encode(al.fromWordsUnsafe(e)),27:e=>$a.encode(al.fromWordsUnsafe(e)),6:y$,24:y$,3:Kke,5:Vke};function qke(e){return r=>({tagCode:parseInt(e),words:al.encode("unknown",r,Number.MAX_SAFE_INTEGER)})}function y$(e){return e.reverse().reduce((r,t,n)=>r+t*Math.pow(32,n),0)}function Kke(e){const r=[];let t,n,i,s,o,a=al.fromWordsUnsafe(e);for(;a.length>0;)t=$a.encode(a.slice(0,33)),n=$a.encode(a.slice(33,41)),i=parseInt($a.encode(a.slice(41,45)),16),s=parseInt($a.encode(a.slice(45,49)),16),o=parseInt($a.encode(a.slice(49,51)),16),a=a.slice(51),r.push({pubkey:t,short_channel_id:n,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return r}function Vke(e){const r=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;r.length<i1.length*2;)r.push(!1);const t={};i1.forEach((i,s)=>{let o;r[s*2]?o="required":r[s*2+1]?o="supported":o="unsupported",t[i]=o});const n=r.slice(i1.length*2);return t.extra_bits={start_bit:i1.length*2,bits:n,has_required:n.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},t}function AV(e,r){let t,n;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(n),s=t?i*h8/zke[t]:i*h8;if(t==="p"&&i%BigInt(10)!==BigInt(0)||s>Uke)throw new Error("Amount is outside of valid range");return r?s.toString():s}function Gke(e,r){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const t=[],n=al.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=n.prefix;let s=n.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});const u=l[1];let f;if(r){if(r.bech32===void 0||r.pubKeyHash===void 0||r.scriptHash===void 0||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");f=r}else switch(u){case l8.bech32:f=l8;break;case u8.bech32:f=u8;break;case c8.bech32:f=c8;break;case f8.bech32:f=f8;break}if(!f||f.bech32!==u)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:u,value:f});const c=l[2];let p;if(c){const I=l[3];p=AV(c+I,!0),t.push({name:"amount",letters:l[2]+l[3],value:p})}else p=null;t.push({name:"separator",letters:"1"});const y=y$(s.slice(0,7));s=s.slice(7),t.push({name:"timestamp",letters:o.slice(0,7),value:y}),o=o.slice(7);let w,b,T,_;for(;s.length>0;){const I=s[0].toString();w=IV[I]||"unknown_tag",b=Wke[I]||qke(I),s=s.slice(1),T=y$(s.slice(0,2)),s=s.slice(2),_=s.slice(0,T),s=s.slice(T),t.push({name:w,tag:o[0],letters:o.slice(0,1+2+T),value:b(_)}),o=o.slice(1+2+T)}t.push({name:"signature",letters:o.slice(0,104),value:$a.encode(al.fromWordsUnsafe(a))}),o=o.slice(104),t.push({name:"checksum",letters:o});let A={paymentRequest:e,sections:t,get expiry(){let I=t.find(O=>O.name==="expiry");if(I)return x("timestamp")+I.value},get route_hints(){return t.filter(I=>I.name==="route_hint").map(I=>I.value)}};for(let I in vA)I!=="route_hint"&&Object.defineProperty(A,I,{get(){return x(I)}});return A;function x(I){let O=t.find(C=>C.name===I);return O?O.value:void 0}}var Yke={decode:Gke,hrpToMillisat:AV};let Jy;const Zke={USD:"$",EUR:"€",JPY:"¥",SATS:""};let Cc="USD";const d8=navigator.language,Xke=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];Xke.some(e=>d8.startsWith(e))?Cc="EUR":d8.startsWith("ja")&&(Cc="JPY");const OV=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+Cc).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var r,t,n;Jy=parseFloat((n=(t=(r=e==null?void 0:e.result)==null?void 0:r["XXBTZ"+Cc])==null?void 0:t.c)==null?void 0:n[0]),console.log("lastBitcoinPrice",Jy,Cc)}).catch(e=>{console.error("Error:",e)})};Re.get("displayCurrency").on(e=>{Cc=e,OV()});setTimeout(()=>{Jy||OV()},1e3);function CV(e){var r,t,n;try{const i=Yke.decode(e),s=i.sections.find(b=>b.name==="amount"),o=s?Number(s.value):void 0,a=i.sections.find(b=>b.name==="timestamp"),l=a?Number(a.value):void 0,u=i.sections.find(b=>b.name==="expiry"),f=u?Number(u.value):void 0,c=(r=i.sections.find(b=>b.name==="description"))==null?void 0:r.value,p=new Uint8Array((t=i.sections.find(b=>b.name==="description_hash"))==null?void 0:t.value),y=new Uint8Array((n=i.sections.find(b=>b.name==="payment_hash"))==null?void 0:n.value),w={amount:o,expire:l&&f?l+f:void 0,timestamp:l,description:c,descriptionHash:p?cI(p):void 0,paymentHash:y?cI(y):void 0,expired:!1};return w.expire&&(w.expired=w.expire<new Date().getTime()/1e3),w}catch(i){console.error(i)}}function Jke(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function Qke(e){let r;e>=1||e>=.01?r=2:r=4;const t=Math.pow(10,r);return e=Math.round(e*t)/t,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:r})}function gA(e){if(Jy&&Cc!=="SATS"){const r=e/1e8*Jy,t=Qke(r);return Zke[Cc]+" "+t}else return Jke(e)}const eTe=Ni(({data:e})=>{const r=e.pubkey.startsWith("npub")?e.pubkey:Mc.npubEncode(e.pubkey);return v(Jt,{href:`/${r}`,className:"flex items-center gap-4",children:[v(Ki,{str:e.pubkey,width:40}),v("div",{className:"flex flex-col",children:[v($r,{pub:e.pubkey}),e.text&&v("small",{className:"text-neutral-500",children:e.text})]})]})}),tTe=({event:e,wot:r})=>{var A;const[t,n]=He(new Set),[i,s]=He(new Set),[o,a]=He(new Map),[l,u]=He(""),[f,c]=He([]),[p,y]=He(""),w=(A=r==null?void 0:r.vertice)==null?void 0:A.score,b=w==null?void 0:w.hasTrustScore(),T=w==null?void 0:w.hasDistrustScore();return kt(()=>{const x=[],I=g=>{n(new Set(g))},O=g=>{s(new Set(g))},C=g=>{const M=new Map;let B=0;Array.from(g==null?void 0:g.values()).map(q=>Me.db.by("id",q)).forEach(q=>{const Q=q==null?void 0:q.tags.find(Z=>Z[0]==="bolt11")[1];if(!Q){console.log("Invalid zap, missing bolt11 tag");return}const te=CV(Q),X=((te==null?void 0:te.amount)||0)/1e3;B+=X;const j=Me.getZappingUser(q.id);if(j){const Z=M.get(j)||0;M.set(j,Z+X)}}),a(M),u(B>0?gA(B):"")};return x.push(Me.getLikes(e.id,I)),x.push(Me.getReposts(e.id,O)),x.push(Me.getZaps(e.id,C)),()=>{x.forEach(g=>g())}},[e]),t.size>0||i.size>0||o.size>0?v(lt,{children:[v("hr",{className:"-mx-2 opacity-10 mt-2"}),f.length>0&&v(Iu,{showContainer:!0,onClose:()=>c([]),children:[v("div",{className:"flex items-center justify-between mb-4",children:v("h2",{className:"text-xl font-bold",children:p})}),v("div",{className:"flex flex-col gap-4 overflow-y-scroll max-h-[50vh] w-96",children:f.map(x=>v(eTe,{data:x},x.pubkey))})]}),v("div",{className:"flex items-center gap-4 py-2",children:[t.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(t).map(I=>({pubkey:I}));c(x),y("Liked by")},className:"cursor-pointer hover:underline",children:[t.size," ",v("span",{className:"text-neutral-500",children:"Likes"})]})}),i.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(i).map(I=>({pubkey:I}));c(x),y("Reposted by")},className:"cursor-pointer hover:underline",children:[i.size," ",v("span",{className:"text-neutral-500",children:"Reposts"})]})}),(o==null?void 0:o.size)>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=[],I=[...o.entries()].sort((O,C)=>C[1]-O[1]);for(const[O,C]of I)x.push({pubkey:O,text:gA(C)});c(x),y("Zapped by")},className:"cursor-pointer hover:underline",children:[o.size," ",v("span",{className:"text-neutral-500",children:"Zaps"}),l&&v("small",{className:"text-neutral-500",children:[" (",l,")"]})]})}),b&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:v("a",{onClick:()=>{const I=er.getTrustList(r==null?void 0:r.vertice,1).map(({outV:O,edge:C})=>({pubkey:O.key,text:C.note}));c(I),y("Trusted by")},className:"cursor-pointer hover:underline",children:[w.renderTrustCount()," ",v("span",{className:"text-neutral-500",children:"Trusts"})]})}),T&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:v("a",{onClick:()=>{const I=er.getTrustList(r==null?void 0:r.vertice,-1).map(({outV:O,edge:C})=>({pubkey:O.key,text:C.note}));c(I),y("Distrusted by")},className:"cursor-pointer hover:underline",children:[w.renderDistrustCount()," ",v("span",{className:"text-neutral-500",children:"Distrusts"})]})})]}),v("hr",{className:"-mx-2 opacity-10 mb-2"})]}):null};function m$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M19.42 4.44994C19.3203 4.38116 19.2053 4.3379 19.085 4.32395C18.9647 4.31 18.8428 4.32579 18.73 4.36994C17.5425 4.8846 16.2857 5.22155 15 5.36994C14.1879 5.15273 13.4127 4.81569 12.7 4.36994C11.7802 3.80143 10.763 3.40813 9.7 3.20994C8.41 3.08994 5.34 4.09994 4.7 4.30994C4.55144 4.36012 4.42234 4.4556 4.33086 4.58295C4.23938 4.71031 4.19012 4.86314 4.19 5.01994V19.9999C4.19 20.1989 4.26902 20.3896 4.40967 20.5303C4.55032 20.6709 4.74109 20.7499 4.94 20.7499C5.13891 20.7499 5.32968 20.6709 5.47033 20.5303C5.61098 20.3896 5.69 20.1989 5.69 19.9999V14.1399C6.93659 13.6982 8.23315 13.4127 9.55 13.2899C10.3967 13.4978 11.2062 13.8351 11.95 14.2899C12.8201 14.8218 13.7734 15.2038 14.77 15.4199H15C16.4474 15.2326 17.8633 14.8526 19.21 14.2899C19.3506 14.2342 19.4713 14.1379 19.5568 14.0132C19.6423 13.8885 19.6887 13.7411 19.69 13.5899V5.06994C19.6975 4.95258 19.6769 4.83512 19.63 4.7273C19.583 4.61947 19.511 4.5244 19.42 4.44994Z"})})}function b$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[v("g",{"clip-path":"url(#clip0)",children:[v("path",{d:"M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 20L26 28L41 7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]}),v("defs",{children:v("clipPath",{id:"clip0",children:v("rect",{width:"48",height:"48",fill:"white"})})})]})}const rTe=({event:e})=>{const[r,t]=He({likes:0,liked:!1,likedBy:new Set});kt(()=>{const o=tt.getProfile(e.pubkey,l=>{}),a=Me.getLikes(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=de.getPubKey();t(l=>({...l,likes:o.size,liked:o.has(a),likedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.liked)},s=(o=!0)=>{if(o){const a=e.pubkey,l=de.toNostrHexAddress(e.id);l&&Me.publish({kind:7,content:"+",tags:[["e",l],["p",a]]})}};return v("a",{className:`btn-ghost btn-sm justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${r.liked?"text-iris-red":"hover:text-iris-red text-neutral-500"}`,onClick:o=>i(o),children:[r.liked?v(E3,{width:18}):v(Nz,{width:18}),r.likes||""]})},nTe=({event:e})=>{const[r,t]=He({reposts:0,reposted:!1,repostedBy:new Set});kt(()=>{const o=tt.getProfile(e.pubkey,l=>{}),a=Me.getReposts(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=de.getPubKey();t(l=>({...l,reposts:o.size,reposted:o.has(a),repostedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.reposted)},s=(o=!0)=>{if(o){const a=e.pubkey,l=de.toNostrHexAddress(e.id);l&&Me.publish({kind:6,tags:[["e",l,"","mention"],["p",a]],content:""})}};return v("a",{className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none ${r.reposted?"text-iris-green":"hover:text-iris-green text-neutral-500"}`,onClick:o=>i(o),children:[v(Cz,{width:18}),r.reposts||""]})},iTe="payRequest";var yA=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(yA||{});class Cf extends Error{constructor(t,n){super(n);oe(this,"code");this.code=t}}var Ec,Ss,g_,PV;class sTe{constructor(r){Zr(this,g_);Zr(this,Ec,void 0);Zr(this,Ss,void 0);if(r=r.toLowerCase().trim(),r.startsWith("lnurl")){const t=hr.bech32ToText(r);if(!t.startsWith("http"))throw new Cf(2,"Not a url");ko(this,Ec,new URL(t))}else if(r.match(/[\w.-]+@[\w.-]/)){const[t,n]=r.split("@");ko(this,Ec,new URL(`https://${n}/.well-known/lnurlp/${t}`))}else if(r.startsWith("https:"))ko(this,Ec,new URL(r));else if(r.startsWith("lnurlp:")){const t=new URL(r);t.protocol="https:",ko(this,Ec,t)}else throw new Cf(2,"Could not determine service url")}async load(){const r=await fetch(Fn(this,Ec).toString());r.ok&&(ko(this,Ss,await r.json()),ei(this,g_,PV).call(this))}async getInvoice(r,t,n){var l,u,f;const i=new URL(hr.unwrap((l=Fn(this,Ss))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(c=>{const p=c.split("=");s.set(p[0],p[1])}),s.set("amount",Math.floor(r*1e3).toString()),t&&((u=Fn(this,Ss))!=null&&u.commentAllowed)&&s.set("comment",t),(f=Fn(this,Ss))!=null&&f.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(c=>`${c[0]}=${encodeURIComponent(c[1])}`).join("&");try{const c=await fetch(`${o}?${a}`);if(c.ok){const p=await c.json();if(console.debug("[LNURL]: ",p),p.status==="ERROR")throw new Error(p.reason);return p}else throw new Cf(1,`Failed to fetch invoice (${c.statusText})`)}catch{throw new Cf(1,"Failed to load callback")}}get canZap(){var r;return!!((r=Fn(this,Ss))!=null&&r.nostrPubkey)}get zapperPubkey(){var r;return(r=Fn(this,Ss))==null?void 0:r.nostrPubkey}get maxCommentLength(){var r;return((r=Fn(this,Ss))==null?void 0:r.commentAllowed)??0}get min(){var r;return((r=Fn(this,Ss))==null?void 0:r.minSendable)??1e3}get max(){var r;return((r=Fn(this,Ss))==null?void 0:r.maxSendable)??1e11}}Ec=new WeakMap,Ss=new WeakMap,g_=new WeakSet,PV=function(){var r,t;if(((r=Fn(this,Ss))==null?void 0:r.tag)!==iTe)throw new Cf(2,"Only LNURLp is supported");if(!((t=Fn(this,Ss))!=null&&t.callback))throw new Cf(2,"No callback url")};const qi=({copyStr:e,text:r,className:t})=>{const[n,i]=He(!1),[s,o]=He(void 0),[a,l]=He(void 0),u=(p,y)=>{if(p.target===null)return;hr.copyToClipboard(y);const w=p.target,b=w.offsetWidth;b!==void 0&&(o(s||b+1),w.style.width=`${s}px`,i(!0),a!==void 0&&clearTimeout(a),l(setTimeout(()=>i(!1),2e3)))},f=p=>{p.preventDefault();const y=typeof e=="function"?e():e;u(p,y)};kt(()=>()=>{a&&clearTimeout(a)},[a]);const c=n?he("copied"):r||he("copy");return v("button",{className:t||"btn",onClick:p=>f(p),children:c})};var ep;(function(){function e(x){this.mode=u.MODE_8BIT_BYTE,this.data=x,this.parsedData=[];for(var I=[],O=0,C=this.data.length;C>O;O++){var g=this.data.charCodeAt(O);g>65536?(I[0]=240|(1835008&g)>>>18,I[1]=128|(258048&g)>>>12,I[2]=128|(4032&g)>>>6,I[3]=128|63&g):g>2048?(I[0]=224|(61440&g)>>>12,I[1]=128|(4032&g)>>>6,I[2]=128|63&g):g>128?(I[0]=192|(1984&g)>>>6,I[1]=128|63&g):I[0]=g,this.parsedData=this.parsedData.concat(I)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(x,I){this.typeNumber=x,this.errorCorrectLevel=I,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function t(x,I){if(x.length==null)throw new Error(x.length+"/"+I);for(var O=0;O<x.length&&x[O]==0;)O++;this.num=new Array(x.length-O+I);for(var C=0;C<x.length-O;C++)this.num[C]=x[C+O]}function n(x,I){this.totalCount=x,this.dataCount=I}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function o(){var x=!1,I=navigator.userAgent,O;return/android/i.test(I)&&(x=!0,O=I.toString().match(/android ([0-9]\.[0-9])/i),O&&O[1]&&(x=parseFloat(O[1]))),x}function a(x,I){for(var O=1,C=l(x),g=0,M=b.length;M>=g;g++){var B=0;switch(I){case f.L:B=b[g][0];break;case f.M:B=b[g][1];break;case f.Q:B=b[g][2];break;case f.H:B=b[g][3]}if(B>=C)break;O++}if(O>b.length)throw new Error("Too long data");return O}function l(x){var I=encodeURI(x).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return I.length+(I.length!=x?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(x){for(var I=0,O=this.parsedData.length;O>I;I++)x.put(this.parsedData[I],8)}},r.prototype={addData:function(x){var I=new e(x);this.dataList.push(I),this.dataCache=null},isDark:function(x,I){if(0>x||this.moduleCount<=x||0>I||this.moduleCount<=I)throw new Error(x+","+I);return this.modules[x][I]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(x,I){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var O=0;O<this.moduleCount;O++){this.modules[O]=new Array(this.moduleCount);for(var C=0;C<this.moduleCount;C++)this.modules[O][C]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(x,I),this.typeNumber>=7&&this.setupTypeNumber(x),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,I)},setupPositionProbePattern:function(x,I){for(var O=-1;7>=O;O++)if(!(-1>=x+O||this.moduleCount<=x+O))for(var C=-1;7>=C;C++)-1>=I+C||this.moduleCount<=I+C||(this.modules[x+O][I+C]=O>=0&&6>=O&&(C==0||C==6)||C>=0&&6>=C&&(O==0||O==6)||O>=2&&4>=O&&C>=2&&4>=C)},getBestMaskPattern:function(){for(var x=0,I=0,O=0;8>O;O++){this.makeImpl(!0,O);var C=p.getLostPoint(this);(O==0||x>C)&&(x=C,I=O)}return I},createMovieClip:function(x,I,O){var C=x.createEmptyMovieClip(I,O),g=1;this.make();for(var M=0;M<this.modules.length;M++)for(var B=M*g,L=0;L<this.modules[M].length;L++){var q=L*g,Q=this.modules[M][L];Q&&(C.beginFill(0,100),C.moveTo(q,B),C.lineTo(q+g,B),C.lineTo(q+g,B+g),C.lineTo(q,B+g),C.endFill())}return C},setupTimingPattern:function(){for(var x=8;x<this.moduleCount-8;x++)this.modules[x][6]==null&&(this.modules[x][6]=x%2==0);for(var I=8;I<this.moduleCount-8;I++)this.modules[6][I]==null&&(this.modules[6][I]=I%2==0)},setupPositionAdjustPattern:function(){for(var x=p.getPatternPosition(this.typeNumber),I=0;I<x.length;I++)for(var O=0;O<x.length;O++){var C=x[I],g=x[O];if(this.modules[C][g]==null)for(var M=-2;2>=M;M++)for(var B=-2;2>=B;B++)this.modules[C+M][g+B]=M==-2||M==2||B==-2||B==2||M==0&&B==0}},setupTypeNumber:function(x){for(var I=p.getBCHTypeNumber(this.typeNumber),O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[Math.floor(O/3)][O%3+this.moduleCount-8-3]=C}for(var O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[O%3+this.moduleCount-8-3][Math.floor(O/3)]=C}},setupTypeInfo:function(x,I){for(var O=this.errorCorrectLevel<<3|I,C=p.getBCHTypeInfo(O),g=0;15>g;g++){var M=!x&&(1&C>>g)==1;6>g?this.modules[g][8]=M:8>g?this.modules[g+1][8]=M:this.modules[this.moduleCount-15+g][8]=M}for(var g=0;15>g;g++){var M=!x&&(1&C>>g)==1;8>g?this.modules[8][this.moduleCount-g-1]=M:9>g?this.modules[8][15-g-1+1]=M:this.modules[8][15-g-1]=M}this.modules[this.moduleCount-8][8]=!x},mapData:function(x,I){for(var O=-1,C=this.moduleCount-1,g=7,M=0,B=this.moduleCount-1;B>0;B-=2)for(B==6&&B--;;){for(var L=0;2>L;L++)if(this.modules[C][B-L]==null){var q=!1;M<x.length&&(q=(1&x[M]>>>g)==1);var Q=p.getMask(I,C,B-L);Q&&(q=!q),this.modules[C][B-L]=q,g--,g==-1&&(M++,g=7)}if(C+=O,0>C||this.moduleCount<=C){C-=O,O=-O;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(x,I,O){for(var C=n.getRSBlocks(x,I),g=new i,M=0;M<O.length;M++){var B=O[M];g.put(B.mode,4),g.put(B.getLength(),p.getLengthInBits(B.mode,x)),B.write(g)}for(var L=0,M=0;M<C.length;M++)L+=C[M].dataCount;if(g.getLengthInBits()>8*L)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*L+")");for(g.getLengthInBits()+4<=8*L&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*L||(g.put(r.PAD0,8),g.getLengthInBits()>=8*L));)g.put(r.PAD1,8);return r.createBytes(g,C)},r.createBytes=function(x,I){for(var O=0,C=0,g=0,M=new Array(I.length),B=new Array(I.length),L=0;L<I.length;L++){var q=I[L].dataCount,Q=I[L].totalCount-q;C=Math.max(C,q),g=Math.max(g,Q),M[L]=new Array(q);for(var te=0;te<M[L].length;te++)M[L][te]=255&x.buffer[te+O];O+=q;var X=p.getErrorCorrectPolynomial(Q),j=new t(M[L],X.getLength()-1),Z=j.mod(X);B[L]=new Array(X.getLength()-1);for(var te=0;te<B[L].length;te++){var ie=te+Z.getLength()-B[L].length;B[L][te]=ie>=0?Z.get(ie):0}}for(var _e=0,te=0;te<I.length;te++)_e+=I[te].totalCount;for(var we=new Array(_e),Ce=0,te=0;C>te;te++)for(var L=0;L<I.length;L++)te<M[L].length&&(we[Ce++]=M[L][te]);for(var te=0;g>te;te++)for(var L=0;L<I.length;L++)te<B[L].length&&(we[Ce++]=B[L][te]);return we};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},f={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(x){for(var I=x<<10;p.getBCHDigit(I)-p.getBCHDigit(p.G15)>=0;)I^=p.G15<<p.getBCHDigit(I)-p.getBCHDigit(p.G15);return(x<<10|I)^p.G15_MASK},getBCHTypeNumber:function(x){for(var I=x<<12;p.getBCHDigit(I)-p.getBCHDigit(p.G18)>=0;)I^=p.G18<<p.getBCHDigit(I)-p.getBCHDigit(p.G18);return x<<12|I},getBCHDigit:function(x){for(var I=0;x!=0;)I++,x>>>=1;return I},getPatternPosition:function(x){return p.PATTERN_POSITION_TABLE[x-1]},getMask:function(x,I,O){switch(x){case c.PATTERN000:return(I+O)%2==0;case c.PATTERN001:return I%2==0;case c.PATTERN010:return O%3==0;case c.PATTERN011:return(I+O)%3==0;case c.PATTERN100:return(Math.floor(I/2)+Math.floor(O/3))%2==0;case c.PATTERN101:return I*O%2+I*O%3==0;case c.PATTERN110:return(I*O%2+I*O%3)%2==0;case c.PATTERN111:return(I*O%3+(I+O)%2)%2==0;default:throw new Error("bad maskPattern:"+x)}},getErrorCorrectPolynomial:function(x){for(var I=new t([1],0),O=0;x>O;O++)I=I.multiply(new t([1,y.gexp(O)],0));return I},getLengthInBits:function(x,I){if(I>=1&&10>I)switch(x){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+x)}else if(27>I)switch(x){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+x)}else{if(!(41>I))throw new Error("type:"+I);switch(x){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+x)}}},getLostPoint:function(x){for(var I=x.getModuleCount(),O=0,C=0;I>C;C++)for(var g=0;I>g;g++){for(var M=0,B=x.isDark(C,g),L=-1;1>=L;L++)if(!(0>C+L||C+L>=I))for(var q=-1;1>=q;q++)0>g+q||g+q>=I||(L!=0||q!=0)&&B==x.isDark(C+L,g+q)&&M++;M>5&&(O+=3+M-5)}for(var C=0;I-1>C;C++)for(var g=0;I-1>g;g++){var Q=0;x.isDark(C,g)&&Q++,x.isDark(C+1,g)&&Q++,x.isDark(C,g+1)&&Q++,x.isDark(C+1,g+1)&&Q++,(Q==0||Q==4)&&(O+=3)}for(var C=0;I>C;C++)for(var g=0;I-6>g;g++)x.isDark(C,g)&&!x.isDark(C,g+1)&&x.isDark(C,g+2)&&x.isDark(C,g+3)&&x.isDark(C,g+4)&&!x.isDark(C,g+5)&&x.isDark(C,g+6)&&(O+=40);for(var g=0;I>g;g++)for(var C=0;I-6>C;C++)x.isDark(C,g)&&!x.isDark(C+1,g)&&x.isDark(C+2,g)&&x.isDark(C+3,g)&&x.isDark(C+4,g)&&!x.isDark(C+5,g)&&x.isDark(C+6,g)&&(O+=40);for(var te=0,g=0;I>g;g++)for(var C=0;I>C;C++)x.isDark(C,g)&&te++;var X=Math.abs(100*te/I/I-50)/5;return O+=10*X}},y={glog:function(x){if(1>x)throw new Error("glog("+x+")");return y.LOG_TABLE[x]},gexp:function(x){for(;0>x;)x+=255;for(;x>=256;)x-=255;return y.EXP_TABLE[x]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},w=0;8>w;w++)y.EXP_TABLE[w]=1<<w;for(var w=8;256>w;w++)y.EXP_TABLE[w]=y.EXP_TABLE[w-4]^y.EXP_TABLE[w-5]^y.EXP_TABLE[w-6]^y.EXP_TABLE[w-8];for(var w=0;255>w;w++)y.LOG_TABLE[y.EXP_TABLE[w]]=w;t.prototype={get:function(x){return this.num[x]},getLength:function(){return this.num.length},multiply:function(x){for(var I=new Array(this.getLength()+x.getLength()-1),O=0;O<this.getLength();O++)for(var C=0;C<x.getLength();C++)I[O+C]^=y.gexp(y.glog(this.get(O))+y.glog(x.get(C)));return new t(I,0)},mod:function(x){if(this.getLength()-x.getLength()<0)return this;for(var I=y.glog(this.get(0))-y.glog(x.get(0)),O=new Array(this.getLength()),C=0;C<this.getLength();C++)O[C]=this.get(C);for(var C=0;C<x.getLength();C++)O[C]^=y.gexp(y.glog(x.get(C))+I);return new t(O,0).mod(x)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(x,I){var O=n.getRsBlockTable(x,I);if(O==null)throw new Error("bad rs block @ typeNumber:"+x+"/errorCorrectLevel:"+I);for(var C=O.length/3,g=[],M=0;C>M;M++)for(var B=O[3*M+0],L=O[3*M+1],q=O[3*M+2],Q=0;B>Q;Q++)g.push(new n(L,q));return g},n.getRsBlockTable=function(x,I){switch(I){case f.L:return n.RS_BLOCK_TABLE[4*(x-1)+0];case f.M:return n.RS_BLOCK_TABLE[4*(x-1)+1];case f.Q:return n.RS_BLOCK_TABLE[4*(x-1)+2];case f.H:return n.RS_BLOCK_TABLE[4*(x-1)+3];default:return}},i.prototype={get:function(x){var I=Math.floor(x/8);return(1&this.buffer[I]>>>7-x%8)==1},put:function(x,I){for(var O=0;I>O;O++)this.putBit((1&x>>>I-O-1)==1)},getLengthInBits:function(){return this.length},putBit:function(x){var I=Math.floor(this.length/8);this.buffer.length<=I&&this.buffer.push(0),x&&(this.buffer[I]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],T=function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){function O(te,X){var j=document.createElementNS("http://www.w3.org/2000/svg",te);for(var Z in X)X.hasOwnProperty(Z)&&j.setAttribute(Z,X[Z]);return j}var C=this._htOption,g=this._el,M=I.getModuleCount();Math.floor(C.width/M),Math.floor(C.height/M),this.clear();var B=O("svg",{viewBox:"0 0 "+String(M)+" "+String(M),width:"100%",height:"100%",fill:C.colorLight});B.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),g.appendChild(B),B.appendChild(O("rect",{fill:C.colorDark,width:"1",height:"1",id:"template"}));for(var L=0;M>L;L++)for(var q=0;M>q;q++)if(I.isDark(L,q)){var Q=O("use",{x:String(L),y:String(q)});Q.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),B.appendChild(Q)}},x.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},x}(),_=document.documentElement.tagName.toLowerCase()==="svg",A=_?T:s()?function(){function x(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function I(M,B){var L=this;if(L._fFail=B,L._fSuccess=M,L._bSupportDataURI===null){var q=document.createElement("img"),Q=function(){L._bSupportDataURI=!1,L._fFail&&_fFail.call(L)},te=function(){L._bSupportDataURI=!0,L._fSuccess&&L._fSuccess.call(L)};return q.onabort=Q,q.onerror=Q,q.onload=te,q.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}L._bSupportDataURI===!0&&L._fSuccess?L._fSuccess.call(L):L._bSupportDataURI===!1&&L._fFail&&L._fFail.call(L)}if(this&&this._android&&this._android<=2.1){var O=1/window.devicePixelRatio,C=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(M,B,L,q,Q,te,X,j){if("nodeName"in M&&/img/i.test(M.nodeName))for(var Z=arguments.length-1;Z>=1;Z--)arguments[Z]=arguments[Z]*O;else typeof j>"u"&&(arguments[1]*=O,arguments[2]*=O,arguments[3]*=O,arguments[4]*=O);C.apply(this,arguments)}}var g=function(M,B){this._bIsPainted=!1,this._android=o(),this._htOption=B,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=B.width,this._elCanvas.height=B.height,M.appendChild(this._elCanvas),this._el=M,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return g.prototype.draw=function(M){var B=this._elImage,L=this._oContext,q=this._htOption,Q=M.getModuleCount(),te=q.width/Q,X=q.height/Q,j=Math.round(te),Z=Math.round(X);B.style.display="none",this.clear();for(var ie=0;Q>ie;ie++)for(var _e=0;Q>_e;_e++){var we=M.isDark(ie,_e),Ce=_e*te,ze=ie*X;L.strokeStyle=we?q.colorDark:q.colorLight,L.lineWidth=1,L.fillStyle=we?q.colorDark:q.colorLight,L.fillRect(Ce,ze,te,X),L.strokeRect(Math.floor(Ce)+.5,Math.floor(ze)+.5,j,Z),L.strokeRect(Math.ceil(Ce)-.5,Math.ceil(ze)-.5,j,Z)}this._bIsPainted=!0},g.prototype.makeImage=function(){this._bIsPainted&&I.call(this,x)},g.prototype.isPainted=function(){return this._bIsPainted},g.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},g.prototype.round=function(M){return M&&Math.floor(1e3*M)/1e3},g}():function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){for(var O=this._htOption,C=this._el,g=I.getModuleCount(),M=Math.floor(O.width/g),B=Math.floor(O.height/g),L=['<table style="border:0;border-collapse:collapse;">'],q=0;g>q;q++){L.push("<tr>");for(var Q=0;g>Q;Q++)L.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+B+"px;background-color:"+(I.isDark(q,Q)?O.colorDark:O.colorLight)+';"></td>');L.push("</tr>")}L.push("</table>"),C.innerHTML=L.join("");var te=C.childNodes[0],X=(O.width-te.offsetWidth)/2,j=(O.height-te.offsetHeight)/2;X>0&&j>0&&(te.style.margin=j+"px "+X+"px")},x.prototype.clear=function(){this._el.innerHTML=""},x}();ep=function(x,I){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.H},typeof I=="string"&&(I={text:I}),I)for(var O in I)this._htOption[O]=I[O];typeof x=="string"&&(x=document.getElementById(x)),this._android=o(),this._el=x,this._oQRCode=null,this._oDrawing=new A(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},ep.prototype.makeCode=function(x){this._oQRCode=new r(a(x,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(x),this._oQRCode.make(),this._el.title=x,this._oDrawing.draw(this._oQRCode),this.makeImage()},ep.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},ep.prototype.clear=function(){this._oDrawing.clear()},ep.CorrectLevel=f})();const p8=ep;function t4(e){const r=_m();return kt(()=>{r.current&&new p8(r.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:p8.CorrectLevel.H})},[e.data]),v("div",{style:"border: 5px solid white; display: inline-block;",ref:r})}function oTe(e,r){const t=[];let n=0,i=e.length/r;for(;i>0;)t.push(e.slice(n,n+r)),n+=r,i-=1;return t}const aTe=xn.span`
  color: var(--text-color);
  display: inline-block;
  cursor: pointer;
  padding: 10px;
  border-radius: 100px;
  margin: 5px;
  border: 1px solid transparent;
  background: var(--body-bg);
  &.active {
    background: var(--notify);
  }
`,lTe=xn.div`
  background-color: var(--msg-content-background);
  border-radius: 8px;
  padding: 30px;
  width: 400px;
  color: var(--text-color);
  position: relative;
`,uTe=xn.div`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: var(--text-color);
`;function cTe(e){const r=e.onClose||(()=>{}),{note:t,recipient:n}=e,i=1e3,s=[i,5e3,1e4,2e4,5e4,1e5,1e6],o={1e3:"👍",5e3:"💜",1e4:"😍",2e4:"🤩",5e4:"🔥",1e5:"🚀",1e6:"🤯"},[a,l]=He(),[u,f]=He(e.invoice),[c,p]=He(i),[y,w]=He(),[b,T]=He(),[_,A]=He(),[x,I]=He(),[O,C]=He(1),[g,M]=He(!1),[B,L]=He(!1),q=a?B&&O!==4||a.maxCommentLength>0:!1;kt(()=>{Re.get("defaultZapAmount").on(xe=>{const ge=parseInt(xe);p(ge),w(ge),console.log("defaultZapAmount",ge)})}),kt(()=>{e.show&&(I(void 0),p(i),T(void 0),C(1),f(void 0),A(void 0))},[e.show]),kt(()=>{_&&!_.url&&setTimeout(()=>{r()},1e3)},[_]),kt(()=>{if(e.lnurl&&e.show)try{const xe=new sTe(e.lnurl);l(xe),xe.load().then(()=>{L(xe.canZap)}).catch(ge=>Z(ge,"ln url error"))}catch(xe){xe instanceof Error&&I(xe.message)}},[e.lnurl,e.show]);const Q=mu(()=>{if(a){const xe=a.min/1e3,ge=a.max/1e3;return s.filter(Te=>Te>=xe&&Te<=ge)}return[]},[a]),te=mu(()=>oTe(Q,3),[Q]),X=xe=>{I(void 0),p(xe)};async function j(){if(!c||!a)return null;let xe;if(n&&O!==4){let ge={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:de.getPubKey(),content:b||"",tags:[["e",t],["p",n],["relays",...an.relays.keys()]]};const Te=Me.getEventHash(ge);ge.id=Te;const Fe=await de.sign(ge);ge={...ge,sig:Fe},console.log("loadInvoice",ge),ge&&(xe=ge)}try{const ge=await a.getInvoice(c,b,xe);ge.pr&&(f(ge.pr),await _e(ge))}catch(ge){Z(ge,"invoice fail")}}function Z(xe,ge){if(console.error("lnurl error",xe),xe instanceof Cf)switch(xe.code){case yA.ServiceUnavailable:{I("messages.LNURLFail");return}case yA.InvalidLNURL:{I("messages.InvalidLNURL");return}}I(ge)}function ie(){if(!a)return null;const xe=a.min/1e3,ge=a.max/1e3;return v("div",{className:"custom-amount flex",children:[v("input",{type:"number",min:xe,max:ge,className:"f-grow mr-10 input",placeholder:"Custom",value:y,onChange:Te=>w(parseInt(Te.target.value))}),v("button",{className:"btn btn-neutral",type:"button",disabled:!y,onClick:()=>X(y??0),children:"Confirm"})]})}async function _e(xe){var ge;try{if(window.webln){M(!0),await window.webln.enable();const Te=await((ge=window.webln)==null?void 0:ge.sendPayment((xe==null?void 0:xe.pr)??""));console.log(Te),A((xe==null?void 0:xe.successAction)??{})}}catch(Te){console.warn(Te),Te instanceof Error&&I(Te.toString())}finally{M(!1)}}function we(xe,ge){return v("div",{className:"amounts",children:ge.map(Te=>v(aTe,{className:xe===Te?"active":"",onClick:()=>X(Te),children:[o[Te]&&v(lt,{children:[o[Te]," "]}),hr.formatAmount(Te,0)]},Te))})}function Ce(){return!a||u?null:v(lt,{children:[v("h3",{children:"Zap amount in sats"}),te.map(xe=>we(c,xe)),ie(),v("div",{className:"flex",children:q&&v("input",{className:"input",type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:B&&O!==4?250:a.maxCommentLength,onChange:xe=>T(xe.target.value)})}),(c??0)>0&&v("div",{style:"margin-top: 10px;",children:v("button",{class:"btn btn-primary",width:"100%",onClick:()=>j(),children:["Send ",hr.formatAmount(c,0)," sats"]})})]})}function ze(){return _||!u?null:v(lt,{children:v("div",{className:"invoice",children:[e.notice&&v("b",{className:"error",children:e.notice}),g?v("h4",{children:"Paying"}):"",v("div",{className:"actions",children:u&&v(lt,{children:[v(t4,{data:u,link:`lightning:${u}`}),v("div",{style:"margin-top: 15px",children:[v(qi,{copyStr:u,text:"Copy invoice"}),v("a",{className:"button",href:`lightning:${u}`,children:"Open wallet"})]})]})})]})})}function Ge(){return _?v("div",{className:"success-action",children:[v("p",{className:"paid",children:(_==null?void 0:_.description)??"Paid"}),_.url&&v("p",{children:v("a",{href:_.url,rel:"noreferrer",target:"_blank",children:_.url})})]}):null}const it=a!=null&&a.canZap?"Send zap to ":"Send sats to ";return e.show??!1?v(Iu,{showContainer:!0,centerVertically:!0,onClose:r,children:v(lTe,{children:v("div",{className:"lnurl-tip",onClick:xe=>xe.stopPropagation(),children:[v(uTe,{className:"close",onClick:r,children:v(jz,{width:20,height:20})}),v("div",{className:"lnurl-header",children:v("h2",{children:[e.title||it,v($r,{pub:n||""})]})}),Ce(),x&&v("p",{className:"error",children:x}),ze(),Ge()]})})}):null}const fTe=({event:e})=>{const[r,t]=He({totalZapAmount:0,formattedZapAmount:"",zapped:!1,showZapModal:!1,lightning:void 0});kt(()=>{const i=tt.getProfile(e.pubkey,o=>{if(!o)return;const a=o.lud16||o.lud06;t(l=>({...l,lightning:a}))}),s=Me.getZaps(e.id,n);return()=>{i(),s()}},[e]);const n=$n.debounce(i=>{const s=Array.from(i==null?void 0:i.values()).map(a=>Me.db.by("id",a));let o=0;s.forEach(a=>{const l=a==null?void 0:a.tags.find(c=>c[0]==="bolt11")[1];if(!l){console.log("Invalid zap, missing bolt11 tag");return}const u=CV(l),f=((u==null?void 0:u.amount)||0)/1e3;o+=f}),t(a=>({...a,totalZapAmount:o,formattedZapAmount:o&&gA(o)||""}))},1e3,{leading:!0});return r.lightning?v(lt,{children:[v("a",{onClick:i=>{i.preventDefault(),i.stopPropagation(),t(s=>({...s,showZapModal:!0}))},className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none
          ${r.zapped?"text-iris-orange":"text-neutral-500 hover:text-iris-orange"}`,children:[v(Fle,{width:18}),r.formattedZapAmount]}),r.showZapModal&&v(cTe,{show:!0,lnurl:r.lightning,note:e.id,recipient:e.pubkey,onClose:()=>t(i=>({...i,showZapModal:!1}))})]}):null},hTe=e=>{const[r,t]=He({replyCount:0}),[n,i]=He({trusted:!1,distrusted:!1}),s=e.event,o=e.wot;kt(()=>Me.getThreadRepliesCount(s.id,u),[s]),kt(()=>{const p=o==null?void 0:o.vertice,y=p==null?void 0:p.score;i(w=>({...w,trusted:y==null?void 0:y.isDirectTrusted(),distrusted:y==null?void 0:y.isDirectDistrusted()}))},[o]);function a(p){p.preventDefault(),p.stopPropagation(),i(y=>{let w=y.trusted?0:1;return er.publishTrust(s.id,w,au.Item),{...y,trusted:!y.trusted,distrusted:!1}})}function l(p){p.preventDefault(),p.stopPropagation(),i(y=>{let w=y.distrusted?0:-1;return er.publishTrust(s.id,w,au.Item),{...y,trusted:!1,distrusted:!y.distrusted}})}const u=p=>{t(y=>({...y,replyCount:p}))};function f(){e.standalone?Qt(document).find("textarea").focus():xr(`/${de.toNostrBech32Address(e.event.id,"note")}`)}function c(){var p,y,w,b;return v(lt,{children:[v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.trusted?"trusted":"hover:trusted text-neutral-500"}`,onClick:T=>a(T),title:n.trusted?"Trusted":"Trust",children:[n.trusted?v(b$,{size:18,fill:"green",stroke:"currentColor"}):v(b$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((y=(p=o==null?void 0:o.vertice)==null?void 0:p.score)==null?void 0:y.renderTrustCount())||""]}),v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.distrusted?"distrusted":"hover:distrusted text-neutral-500"}`,onClick:T=>l(T),title:n.distrusted?"Distrusted":"Distrust",children:[n.distrusted?v(m$,{size:18,fill:"red",stroke:"currentColor"}):v(m$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((b=(w=o==null?void 0:o.vertice)==null?void 0:w.score)==null?void 0:b.renderDistrustCount())||""]})]})}return v(lt,{children:[e.standalone&&v(tTe,{event:e.event,wot:o}),v("div",{className:"flex gap-4",children:[v("a",{className:"btn-ghost btn-sm hover:bg-transparent hover:text-iris-blue btn content-center gap-2 rounded-none text-neutral-500",onClick:()=>f(),children:[v(zle,{width:18}),v("span",{children:r.replyCount||""})]}),v(nTe,{event:e.event}),v(rTe,{event:e.event}),v(fTe,{event:e.event}),c()]})]})},dTe=Ni(hTe);class r4 extends _n{constructor(){super();oe(this,"key");oe(this,"cls");oe(this,"actionDone");oe(this,"action");oe(this,"activeClass");oe(this,"hoverAction");oe(this,"handleMouseEnter",()=>{this.setState({hover:!0})});oe(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.cls="block-btn",this.key="blocked",this.activeClass="blocked",this.action=he("block"),this.actionDone=he("blocked"),this.hoverAction=he("unblock"),this.state={...this.state,hover:!1}}onClick(t){var s,o;t.preventDefault();const n=!this.state[this.key],i=de.toNostrHexAddress(this.props.id);i&&tt.block(i,n),(o=(s=this.props).onClick)==null||o.call(s,t)}componentDidMount(){tt.getBlockedUsers(t=>{const n=t==null?void 0:t.has(de.toNostrHexAddress(this.props.id));this.setState({blocked:n})})}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`${this.cls||this.key} ${t?this.activeClass:""} ${this.props.className||""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:v("span",{children:[he(i)," ",this.props.showName?v($r,{pub:this.props.id,hideBadge:!0}):""]})})}}const Pf=xn.button`
  background: var(--button-bg);
  color: var(--button-color);
  border: var(--button-border);
  font-weight: bold;
  cursor: pointer;
  transition: all 0.25s ease;
  width: ${e=>e.width||"auto"};

  ${e=>e.small&&`
    padding: 5px 20px;
  `}

  &:hover,
  &:focus,
  &:active {
    background: var(--button-bg-hover);
    color: var(--button-color-hover);
  }
`,dh=xn(Pf)`
  background: var(--button-primary-bg);
  color: var(--button-primary-color);
  border: var(--button-primary-border);

  &:hover,
  &:focus,
  &:active {
    background: var(--button-primary-bg-hover);
    color: var(--button-primary-color-hover);
  }
`;let Uc=class extends _n{constructor(){super();oe(this,"key");oe(this,"cls");oe(this,"actionDone");oe(this,"action");oe(this,"activeClass");oe(this,"hoverAction");oe(this,"handleMouseEnter",()=>{this.setState({hover:!0})});oe(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.key="follow",this.activeClass="following",this.action=he("follow_btn"),this.actionDone=he("following_btn"),this.hoverAction=he("unfollow_btn"),this.state={...this.state,hover:!1}}onClick(t){t.preventDefault();const n=!this.state[this.key],i=de.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){tt.setFollowed(i,n);return}this.key==="block"&&tt.setBlocked(i,n)}}componentDidMount(){if(this.key==="follow"){tt.getFollowedByUser(de.getPubKey(),t=>{const n=de.toNostrHexAddress(this.props.id),i=n&&(t==null?void 0:t.has(n));this.setState({follow:i})});return}}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`btn ${this.props.className||this.key} ${t?this.activeClass:""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:he(i)})}};const NV=({children:e})=>{const[r,t]=He(!1),n=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),t(s))};return kt(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&t(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),v("div",{className:"relative",onClick:i=>n(i,!r),onMouseEnter:i=>n(i,!0),onMouseLeave:i=>n(i,!1),children:[v("button",{className:"dropbtn btn btn-circle btn-sm btn-ghost text-neutral-500 pb-2",children:"…"}),v(pt,{when:r,children:v("div",{className:"absolute z-10 p-2 flex flex-col gap-2 right-0 w-56 rounded-md shadow-lg bg-black border-neutral-500 border-2",children:e})})]})},pTe=xn.div`
  display: flex;
  flex-direction: column;

  & ul > li {
    font-size: large;
  }
  & ul > li:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,vTe=xn.pre`
  overflow: auto;
  background-color: hsl(0, 0%, 16%);
  [data-theme='light'] & {
    background-color: hsl(0, 0%, 88%);
  }
  max-height: 400px;
  border-radius: 4px;
  padding: 0.7rem;
  font-family: monospace;
`,gTe=({event:e})=>{const[r,t]=He(null);kt(()=>{if(!(e!=null&&e.id))return;const i=Me.getOriginalPostEventId(e),s=i&&Me.eventsMetaDb.get(i);s&&t(s)},[e]);const n=Array.from((r==null?void 0:r.relays)||[]);return v(pTe,{children:[v("h2",{children:he("event_detail")}),v("p",{children:he("seen_on")}),n.length===0?v("p",{children:he("iris_api_source")}):v("ul",{children:n.map(i=>v("li",{children:i}))}),v(vTe,{children:v("code",{children:JSON.stringify({...e,meta:void 0,$loki:void 0},null,2)})})]})},yTe=xn.div`
  text-align: left;
  max-width: 100%;
  user-select: text;
`,RV=e=>{const{event:r,id:t}=e,[n]=He(!1),[i,s]=He(!1),o=()=>s(!1),a=()=>{},l=w=>{if(w.preventDefault(),confirm("Delete message?")){const b=de.toNostrHexAddress(t);b&&Me.publish({kind:5,content:"deleted",tags:[["e",b]]})}},u=w=>{w.preventDefault(),Re.get("mutedNotes").get(e.id).put(!n)},f=w=>{if(w.preventDefault(),confirm("Publicly report and hide message?")){const b=de.toNostrHexAddress(e.id);b&&e.event&&Me.publish({kind:5,content:"reported",tags:[["e",b],["p",e.event.pubkey]]})}},c=w=>{w.preventDefault(),e.event&&hr.translateText(e.event.content).then(b=>{var T;(T=e.onTranslate)==null||T.call(e,b)})},p=w=>{w.preventDefault();const b=de.toNostrHexAddress(t);if(b){const T=Me.db.by("id",b);T&&(console.log("broadcasting",b,T),Me.publish(T))}},y=`https://iris.to/${de.toNostrBech32Address(t,"note")}`;return v("div",{children:[v(NV,{children:[v(qi,{className:"btn btn-sm",text:he("copy_link"),copyStr:y},`${t}copy_link`),v(qi,{className:"btn btn-sm",text:he("copy_note_ID"),copyStr:de.toNostrBech32Address(t,"note")||""},`${t}copy_id`),v("a",{className:"btn btn-sm",href:"#",onClick:u,children:he(n?"unmute_notifications":"mute_notifications")}),r?v(lt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:p,children:he("resend_to_relays")}),v("a",{className:"btn btn-sm",href:"#",onClick:c,children:he("translate")}),v(qi,{className:"btn btn-sm",text:he("copy_raw_data"),copyStr:JSON.stringify(r,null,2)},`${t}copyRaw`),r.pubkey===de.getPubKey()?v("a",{className:"btn btn-sm",href:"#",onClick:l,children:he("delete")}):v(lt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:f,children:he("report_public")}),v(Uc,{className:"btn btn-sm",id:r==null?void 0:r.pubkey}),v(r4,{className:"btn btn-sm",onClick:a,id:r==null?void 0:r.pubkey,showName:!0})]}),v("a",{className:"btn btn-sm",href:"#",onClick:w=>{w.preventDefault(),s(!0)},children:he("event_detail")})]}):v(lt,{})]}),r&&i&&v(Iu,{showContainer:!0,onClose:o,children:v(yTe,{children:[v(gTe,{event:r}),v(dh,{onClick:o,children:he("done")})]})})]})},mTe=({event:e,fullWidth:r,isQuote:t,standalone:n,setTranslatedText:i})=>{const{time:s,dateStr:o,timeStr:a}=mu(()=>{const l=new Date(e.created_at*1e3),u=l.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),f=l.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});return{time:l,dateStr:u,timeStr:f}},[e.created_at]);return v("div",{className:"flex items-center gap-2 justify-between",children:[v(pt,{when:r,children:v(zK,{event:e,isQuote:t,standalone:n,fullWidth:r})}),v("div",{className:"flex flex-col",children:v("div",{children:[v(Jt,{href:`/${de.toNostrBech32Address(e.pubkey,"npub")}`,className:"font-bold",children:v($r,{pub:e.pubkey})}),v("small",{className:"text-neutral-500",children:[v("span",{className:"mx-2",children:"·"}),v(Jt,{href:`/${de.toNostrBech32Address(e.id,"note")}`,className:"tooltip","data-tip":`${o} ${a}`,children:s&&hr.getRelativeTimeText(s)})]})]})}),v(pt,{when:!t,children:v("div",{className:"flex-1 flex items-center justify-end",children:v(RV,{id:e.id,event:e,onTranslate:i})})})]})},bTe=({attachments:e,name:r,text:t})=>{var a;const n=(a=e==null?void 0:e.find(l=>l.type==="image"))==null?void 0:a.data,s=`"${t.length>128?`${t.slice(0,128)}...`:t}"`,o=`${r||"User"} on Iris`;return v(Sh,{titleTemplate:"%s",children:[v("title",{children:`${o}: ${s}`}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:"article"}),n?v("meta",{property:"og:image",content:n}):null,v("meta",{property:"og:title",content:o}),v("meta",{property:"og:description",content:s})]})},wTe=Ni(bTe);let mA=!0,DV=!0,BV=!0,MV=!0;Re.get("settings").on(e=>{mA=e.loadReactions!==!1,DV=e.showLikes!==!1,BV=e.showZaps!==!1,MV=e.showReposts!==!1});const uS=500,cS=8,$Te=({standalone:e,isQuote:r,fullWidth:t,asInlineQuote:n,event:i,meta:s,wot:o})=>{var C;const[a,l]=He(""),[u,f]=He(!1),[c,p]=He(""),[y,w]=He(!1);kt(()=>{if(e)return tt.getProfile(i.pubkey,g=>{p((g==null?void 0:g.display_name)||(g==null?void 0:g.name)||"")})},[i.pubkey]);const b=((C=i.content)==null?void 0:C.length)===2&&hr.isEmoji(i.content);let T=i.content||"";const _=[],A=T.match(/(https?:\/\/[^\s]+)/g);A&&A.forEach(g=>{let M;try{M=new URL(g)}catch{console.log("invalid url",g);return}M.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&_.push({type:"image",data:`${M.href}`})}),T=T.length>uS&&!u&&!e?`${T.slice(0,uS)}...`:T;const x=T.split(`
`);T=x.length>cS&&!u&&!e?`${x.slice(0,cS).join(`
`)}...`:T,T=hr.highlightEverything(T.trim(),i,{showMentionedMessages:!n,onImageClick:g=>I(g)});function I(g){g.preventDefault(),w(!0)}function O(){var g;return(_==null?void 0:_.length)>1||((g=i.content)==null?void 0:g.length)>uS||i.content.split(`
`).length>cS}return v("div",{className:"flex-grow",children:[v(mTe,{standalone:e,event:i,isQuote:r,fullWidth:t,setTranslatedText:l}),v(pt,{when:e,children:v(wTe,{name:c,text:T,attachments:_})}),v(pt,{when:s.torrentId,children:v(jm,{torrentId:s.torrentId,autopause:!e})}),v(pt,{when:(T==null?void 0:T.length)>0,children:v("div",{className:`preformatted-wrap pb-1 ${b&&"text-2xl"} ${o==null?void 0:o.option}`,children:[T,v(pt,{when:a,children:v("p",{children:v("i",{children:a})})})]})}),v(pt,{when:!n&&!e&&O(),children:v("a",{className:"text-sm link mb-2",onClick:g=>{g.preventDefault(),f(!u)},children:he(`show_${u?"less":"more"}`)})}),v(pt,{when:!n&&mA,children:v(dTe,{settings:{showLikes:DV,showZaps:BV,showReposts:MV},standalone:e,event:i,wot:o},i.id+"reactions")}),v(pt,{when:r&&!mA,children:v("div",{style:{marginBottom:"15px"}})}),v(pt,{when:e,children:[v("hr",{className:"-mx-2 opacity-10 my-2"}),v(sx,{waitForFocus:!0,autofocus:!e,replyingTo:i.id,placeholder:he("write_your_reply")})]}),v(pt,{when:y,children:v(E$e,{images:_==null?void 0:_.map(g=>g.data),onClose:()=>w(!1)})})]})},_Te=Ni($Te),v8=({event:e,meta:r={},asInlineQuote:t=!1,isReply:n=!1,isQuote:i=!1,isQuoting:s=!1,showReplies:o=0,showRepliedMsg:a,standalone:l=!1,fullWidth:u})=>{const[f,c]=He([]);!l&&o&&f.length&&(i=!0),r.replyingTo&&a&&(s=!0),a===void 0&&(a=l),u===void 0&&(u=!n&&!s&&!i&&!t);const p=ix(dt(e.id),["badMessage","neutralMessage","goodMessage"],""),y=mu(()=>{const A=[];return l?A.push(""):A.push("cursor-pointer transition-all ease-in-out duration-200 hover:bg-neutral-999"),i&&A.push("quote pb-2"),s?A.push("quoting pt-0"):A.push("pt-4"),t&&A.push("inline-quote border-2 border-neutral-900 rounded-lg my-2"),u&&A.push("full-width"),A.join(" ")},[l,i,s,t,u]);kt(()=>{if(o)return Me.getReplies(e.id,$n.debounce(A=>{const x=Array.from(A).slice(0,o);x.sort((I,O)=>{const C=Me.db.by("id",I),g=Me.db.by("id",O);return C.created_at-g.created_at}),c(x)},500,{leading:!0,trailing:!0}))},[e.id,o]);let w=Me.getEventRoot(e);w||(w=r.replyingTo);function b(A){var x,I;if(!l&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(O=>A.target.closest(O))&&!((x=window.getSelection())!=null&&x.toString())){if(A.stopPropagation(),e.kind===7){const O=(I=e.tags)==null?void 0:I.reverse().find(C=>C[0]==="e")[1];return xr(`/${O}`)}xr(`/${de.toNostrBech32Address(e.id,"note")}`)}}const T=v(pt,{when:r.replyingTo&&a,children:v(Ko,{id:r.replyingTo,isQuote:!0,showReplies:0},e.id+r.replyingTo)}),_=v(pt,{when:!l&&!n&&!s&&w,children:v(Jt,{className:"text-iris-blue text-sm block mb-2",href:`/${de.toNostrBech32Address(w||"","note")}`,children:he("show_thread")})});return v(lt,{children:[T,v("div",{className:`px-2 md:px-4 pb-2 ${y}`,onClick:A=>b(A),children:[_,v("div",{className:"flex flex-row",onClick:A=>b(A),children:[v(pt,{when:!u,children:v(zK,{event:e,isQuote:i,standalone:l,fullWidth:u})}),v(_Te,{event:e,meta:r,standalone:l,isQuote:i,asInlineQuote:t,fullWidth:u,wot:p})]})]},e.id+"note"),v(pt,{when:!(i||t),children:v("hr",{className:"opacity-10"})}),v(ywe,{each:f,children:A=>v(Ko,{id:A,isReply:!0,isQuoting:!l,showReplies:1},A)})]})};function xTe(e){var n;const t=((n=e.event.tags)==null?void 0:n.some(i=>i[0]==="p"&&i[1]===de.getPubKey()))?"started following you":"updated their following list";return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:{display:"flex",alignItems:"center"},children:[v("i",{className:"repost-btn reposted",style:{marginRight:15},children:to.newFollower}),v(Jt,{href:`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v($r,{pub:e.event.pubkey})}),v("span",{className:"mar-left5",children:[" ",t]})]})})})}const ETe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),xr(`/${de.toNostrBech32Address(r,"note")}`))};function STe(e){var u;const[r,t]=He([]),n=Me.getEventReplyingTo(e.event),i=Me.db.by("id",n),s=(i==null?void 0:i.pubkey)===de.getPubKey(),o=(u=i==null?void 0:i.tags)==null?void 0:u.find(f=>f[0]==="p"&&f[1]===de.getPubKey()),a=s?"liked your note":o?"liked a note where you were mentioned":"liked a note";if(kt(()=>{if(n)return Me.getLikes(n,f=>{t(Array.from(f))})},[n]),!n)return null;const l=`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`;return v("div",{children:v("div",{onClick:f=>ETe(f,n),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"like-btn text-iris-red",children:v(E3,{width:18})}),v("span",{children:[v("a",{href:l,children:v($r,{pub:e.event.pubkey})}),r.length>1&&v(lt,{children:[" and ",r.length-1," others "]})," ",a]})]}),v(Ko,{id:n,fullWidth:!1},n+e.event.id)]})},e.event.id)}const kTe=xn.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: black;
  border: 1px solid #333;
  border-radius: 4px;
`,TTe=xn.div`
  flex: 1;
  max-width: 70%;
  display: flex;
  background: var(--main-color);
  justify-content: center;

  @media (max-width: 625px) {
    max-width: 100%;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
`,ITe=xn.div`
  flex: 1;
  max-width: 30%;
  overflow-y: auto;
  background: var(--msg-content-background);

  @media (max-width: 625px) {
    display: none;
  }
`,ATe=({event:e,onClose:r,attachment:t})=>v(Iu,{width:"90%",height:"90%",centerVertically:!0,onClose:r,children:v(kTe,{children:[v(TTe,{children:t.type==="image"?v($u,{className:"rounded-sm",src:t.url}):v("video",{loop:!0,autoPlay:!0,src:t.url,controls:!0,poster:`https://imgproxy.iris.to/thumbnail/428/${t.url}`})}),v(ITe,{children:v(Ko,{id:e.id,standalone:!0,showReplies:1/0})})]})}),OTe=w$e`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`;function CTe({attachment:e}){return e.type==="video"?v("div",{style:{position:"absolute",top:"8px",right:"8px"},children:to.video}):v(lt,{})}const PTe=xn.img`
  display: none;
`,NTe=xn.a`
  position: relative;
  aspect-ratio: 1;
  color: white;
  background-size: cover;
  background-position: center;
  background-color: #ccc;
  background-image: url(${e=>{var r;return((r=e.attachment)==null?void 0:r.type)==="video"?`https://imgproxy.iris.to/thumbnail/428/${e.attachment.url}`:e.proxyError?`${e.attachment.url}`:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${e.attachment.url}`}});
  & .dropdown {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
  }
  & .dropbtn {
    padding-top: 0px;
    margin-top: -5px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
    color: white;
    user-select: none;
  }
  &:hover {
    opacity: 0.8;
  }

  & svg {
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
  }

  opacity: ${e=>e.fadeIn?0:1};
  animation: ${e=>e.fadeIn?ZP`
          ${OTe} 0.5s ease-in-out forwards
        `:"none"};
`;function RTe(e){var u;const[r,t]=He(-1),[n,i]=He([]),s=f=>{i(c=>{const p=[...c];return p[f]=!0,p})};if(e.event.kind!==1){const f=Me.getEventReplyingTo(e.event);return f?v(Ko,{id:f,renderAs:"NoteImage"}):null}const o=[],a=(u=e.event.content)==null?void 0:u.match(/(https?:\/\/[^\s]+)/g);a&&a.forEach(f=>{let c;try{c=new URL(f)}catch{console.log("invalid url",f);return}c.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&o.push({type:"image",url:c.href}),c.pathname.toLowerCase().match(/\.(mp4|mkv|avi|flv|wmv|mov|webm)$/)&&o.push({type:"video",url:c.href})});const l=(f,c)=>{window.innerWidth>625&&(f.preventDefault(),f.stopPropagation(),t(c))};return v(lt,{children:o.map((f,c)=>v(lt,{children:[v(NTe,{href:`/${de.toNostrBech32Address(e.event.id,"note")}`,onClick:p=>l(p,c),attachment:f,fadeIn:e.fadeIn,proxyError:n[c],children:v(CTe,{attachment:f})},e.event.id+c),f.type==="image"&&v(PTe,{src:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${f.url}`,onError:()=>s(c)}),r===c&&v(ATe,{attachment:f,onClose:()=>t(-1),event:e.event})]}))})}const DTe=Ni(RTe);function g8(e){var i;const[r,t]=He([]),n=Me.getRepostedEventId(e.event)||"";return kt(()=>{if(e.notification){const s=Me.getReposts(n,o=>{t(Array.from(o))});return()=>s()}},[e.notification,n]),v("div",{children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{children:v(Cz,{width:18})}),v(Jt,{href:`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v($r,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),v("span",{children:[r.length>1&&`and ${r.length-1} others`," ",he("reposted")]})]}),v(Ko,{id:n,fullWidth:e.fullWidth},n+e.event.id)]})}const BTe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),xr(`/${de.toNostrBech32Address(r,"note")}`))};function MTe(e){var f;const[r,t]=He([]),n=Me.getEventReplyingTo(e.event),i=Me.db.by("id",n),s=(i==null?void 0:i.pubkey)===de.getPubKey(),o=(f=i==null?void 0:i.tags)==null?void 0:f.find(c=>c[0]==="p"&&c[1]===de.getPubKey()),a=s?"zapped your note":o?"zapped a note where you were mentioned":"zapped a note";if(kt(()=>n?Me.getZaps(n,c=>{t(Array.from(c.values()))}):()=>null,[n]),!n)return null;let l=null;try{l=Me.getZappingUser(e.event.id)}catch(c){return console.error("no zapping user found for event",e.event.id,c),""}const u=`/${l}`;return v("div",{children:v("div",{onClick:c=>BTe(c,n||""),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"zap-btn text-iris-orange",children:v(due,{width:18,height:18})}),v("div",{children:[v("a",{href:u,children:v($r,{pub:l||""})}),r.length>1&&v("span",{children:[" and ",r.length-1," others "]})," ",a]})]}),v(Ko,{id:n,fullWidth:!1},n+e.event.id)]})})}const LTe=e=>{const[r,t]=He({sortedReplies:[],meta:{},event:Me.db.by("id",de.toNostrHexAddress(e.id))}),n=ro(),i=ro(!1),s=u=>{if(clearTimeout(n.current),i.current)return;r.retrieving&&t(p=>({...p,retrieving:!1}));const f=Me.getNoteReplyingTo(u),c={npub:de.toNostrBech32Address(u.pubkey,"npub"),noteId:de.toNostrBech32Address(u.id,"note"),time:u.created_at*1e3,isMine:de.getPubKey()===u.pubkey,attachments:[],replyingTo:f};t(p=>({...p,event:u,meta:c}))};kt(()=>{if(!e.id){console.log("error: no id",e);return}i.current=!1;const u=de.toNostrHexAddress(e.id);return n.current=setTimeout(()=>{t(f=>({...f,retrieving:!0}))},1e3),u&&Me.getEventById(u,!0,f=>s(f)),()=>{i.current=!0}},[]),kt(()=>{e.standalone&&!r.msg&&r.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const o=()=>e.asInlineQuote?null:v(RV,{id:e.id||"",event:r.event}),a=()=>{var c;let u="msg";return e.standalone&&(u+=" standalone"),(e.isQuote||e.showReplies&&((c=r.sortedReplies)==null?void 0:c.length))&&(u+=" quote"),u};return e.id?r.event?tt.isBlocked(r.event.pubkey)?e.standalone||e.isQuote?v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("p",{style:{display:"flex",alignItems:"center"},children:[v("i",{style:{marginRight:"15px"},children:to.newFollower}),v("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var f,c,p;let u=v8;if(r.event.kind===1){const y=(c=(f=r.event)==null?void 0:f.tags)==null?void 0:c.findIndex(w=>w[0]==="e"&&w[3]==="mention");((p=r.event)==null?void 0:p.content)===`#[${y}]`&&(u=g8)}else u={1:v8,3:xTe,6:g8,7:STe,9735:MTe}[r.event.kind];return e.renderAs==="NoteImage"&&(u=DTe),u?v(u,{className:a(),event:r.event,meta:r.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<r.event.created_at,...e},e.id):(console.error("unknown event kind",r.event),null)})():e.renderAs==="NoteImage"?null:v("div",{className:a(),children:v("div",{className:`msg-content retrieving ${r.retrieving?"opacity-100":"opacity-0"} transition-opacity duration-700 ease-in-out`,style:{display:"flex",alignItems:"center"},children:[v("div",{className:"text",children:he("looking_up_message")}),v("div",{children:o()})]})},e.id):(console.error("no id on event",e),null)},Ko=Ni(LTe),y8=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,m8=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,fS=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,FTe=/\bnostr:(n(?:event|profile)1\w+)\b/g,b8=/(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;let pn={};Re.get("settings").on(e=>pn=e);let LV={};Re.get("settings").put({});Re.get("existingIrisToAddress").on(e=>LV=e);const jTe=navigator.userAgent.toLowerCase(),HTe=jTe.indexOf(" electron/")>-1,hr={wtClient:void 0,formatAmount(e,r=2){return typeof e!="number"?"":e<1e3?e.toFixed(r):e<1e6?(e/1e3).toFixed(r)+"K":e<1e9?(e/1e6).toFixed(r)+"M":(e/1e9).toFixed(r)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(y8)!==null},async translateText(e){const t=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:qo.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return t==null?void 0:t.translatedText},handleLightningLinkClick(e){e.preventDefault();const r=e.target.closest("A").href;r.startsWith("lightning:")&&window.open(r,"_self")},highlightEverything(e,r,t={showMentionedMessages:!0}){let n=zr(e,y8,(s,o)=>v("span",{className:"emoji",children:s},s+o));return t.showMentionedMessages&&(n=zr(n,fS,(s,o)=>v(Ko,{id:de.toNostrHexAddress(s)||"",asInlineQuote:!0},s+o))),pn.enableTwitter!==!1&&(n=zr(n,/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,(o,a)=>v("iframe",{style:{"max-width":"350px",height:"450px","background-color":"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(o)}`},o+a))),pn.enableVideos!==!1&&(n=zr(n,/(https?:\/\/[^?\s]+\/[^?\s]+\.(?:mp4|mkv|avi|flv|wmv|mov|webm)(?:\?\S*)?)\b/gi,(o,a)=>v("video",{className:"py-2 rounded max-h-[70vh] md:max-h-96 max-w-full",src:o,poster:`https://imgproxy.iris.to/thumbnail/428/${o}`,muted:!this.isMobile&&pn.autoplayVideos!==!1,autoPlay:!this.isMobile&&pn.autoplayVideos!==!1,playsInline:!0,controls:!0,loop:!0,onLoadedData:l=>{!this.isMobile&&pn.autoplayVideos&&l.target.play()}},o+a))),pn.enableAudio!==!1&&(n=zr(n,/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,(o,a)=>v("audio",{src:o,controls:!0,loop:!0},o+a))),pn.enableYoutube!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,(o,a)=>v("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableInstagram!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,(o,a)=>v("iframe",{class:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${o}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableSoundCloud!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,(o,a)=>(console.log("match: "+o),console.log("match 0: "+o[0]),console.log("match 1: "+o[1]),console.log("match 2: "+o[2]),v("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${o}`,frameBorder:"0",allow:"encrypted-media"},o+a)))),pn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${o}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${o}`,frameBorder:"0",allow:"encrypted-media"},o+a))),pn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/playlist\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/playlist/${o}`,frameBorder:"0",allow:"encrypted-media"},o+a))),pn.enableAppleMusic!==!1&&(n=zr(n,/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,(o,a)=>v("iframe",{class:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableAppleMusic!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(podcasts\.apple\.com\/.*)/g,(o,a)=>{console.log("embed url: "+o);const l=o.includes("?i=")?"applepodcast-small":"applepodcast-large";return v("iframe",{class:l,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a)})),pn.enableTidal!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${o}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableTiktok!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,(o,a)=>v("iframe",{class:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${o}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableTwitch!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,(o,a)=>v("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${o}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableTwitch!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,(o,a)=>v("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${o}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),pn.enableWavlake!==!1&&(n=zr(n,/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,(o,a)=>v("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${o}`,frameBorder:"0",loading:"lazy"},o+a))),pn.enableTorrent!==!1&&(n=zr(n,/(magnet:\?xt=urn:btih:.*)/gi,(o,a)=>(console.log("magnet link",o),v(jm,{preview:!0,torrentId:o},o+a)))),pn.enableImages!==!1&&(n=zr(n,/(https?:\/\/[^\s]*\.(?:jpg|jpeg|gif|png|webp)(\?[^\s]*)?( |$|\n))/gi,(o,a)=>v($u,{className:"py-2 md:rounded max-h-[70vh] md:max-h-96 max-w-full cursor-pointer",onClick:t.onImageClick,src:o},o+a))),n=this.highlightText(n,r,t),n=zr(n,/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,s=>(s.startsWith("lightning:")||(s=`lightning:${s}`),v("a",{href:s,onClick:o=>this.handleLightningLinkClick(o),children:"⚡ Pay with lightning"}))),n},isMobile:function(){let e=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),highlightText(e,r,t={}){return e=zr(e,m8,(n,i)=>{n=n.replace(/@/g,"");const s=`/${n}`;return v(lt,{children:[" ",v("a",{href:s,className:"link",children:["@",v($r,{pub:n,hideBadge:!0},n+i)]})]})}),e=zr(e,FTe,(n,i)=>{try{const{type:s,data:o}=Mc.decode(n);if(s==="nprofile")return v(lt,{children:[" ",v(Jt,{href:`/${o.pubkey}`,className:"link",children:["@",v($r,{pub:o.pubkey,hideBadge:!0},n+i)]})]});if(s==="nevent")return v(Ko,{id:o.id,asInlineQuote:!0},n+i)}catch(s){return console.log(s),n}}),e=zr(e,fS,n=>{n=n.replace(/@/g,"");const i=`/${n}`;return v(lt,{children:[" ",v("a",{href:i,className:"link",children:n})]})}),e=zr(e,/((?:https?:\/\/\S*[^.?,)\s])|(?:iris\.to\/\S*[^.?,)\s]))/gi,(n,i)=>{const s=n.replace(/^(https:\/\/)?iris.to/,""),o=s!==n;return v("a",{className:"link",target:"_blank",onClick:a=>{o&&(a.preventDefault(),xr(s))},href:s,children:n.replace(/^https?:\/\//,"").replace(/\/$/,"")},n+i)}),r!=null&&r.tags&&(e=zr(e,/#\[(\d+)\]/g,(n,i)=>{const s=r.tags[parseInt(n,10)];if(s){const o=s[1].replace("@","");if(s[0]==="p"){const a=`/${de.toNostrBech32Address(o,"npub")}`;return v("a",{href:a,children:["@",v($r,{pub:o,hideBadge:!0},o+i)]})}else if(s[0]==="e")return t.showMentionedMessages?v(Ko,{id:o,asInlineQuote:!0},o+i):v(Jt,{className:"link",href:`/${de.toNostrBech32Address(o,"note")}`,children:s[1]})}return n})),e=zr(e,b8,n=>v(Jt,{className:"link",href:`/search/${encodeURIComponent(n)}`,children:n})),e=e.map(n=>typeof n=="string"?n.replace(/^\n+|\n+$/g,""):n),e},copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const r=document.createElement("textarea");r.textContent=e,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}finally{document.body.removeChild(r)}}return!1},showConsoleWarning(){const e="Stop!",r=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const t="font-family:helvetica; font-size:20px; ";[[e,`${t}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[r,t],["",""]].map(n=>{setTimeout(console.log.bind(console,`
%c${n[0]}`,n[1]))})}},formatTime(e){const r=e.toLocaleTimeString(void 0,{timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},formatDate(e){const r=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,r,t,n){if(t||(t=new Date,n=t.toLocaleDateString(void 0,{dateStyle:"short"})),r===n)return"today";const i=Math.round((t.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):r},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const r=lI.decode(e,1e3),t=lI.fromWords(r.words);return new TextDecoder().decode(Uint8Array.from(t))}catch(r){return console.error("bech32ToText failed",r),""}},getRelativeTimeText(e){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;return t<n?he("now"):t<i?Math.floor(t/n)+"m":t<s?Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},formatBytes(e,r=2){if(e===0)return"0 Bytes";const t=1024,n=r<0?0:r,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,s)).toFixed(n))} ${i[s]}`},download(e,r,t,n,i){n===null&&(n="utf-8");const s=document.createElement("a");s.href=i||`data:${t};charset=${n},${encodeURI(r)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const r=new FileReader;return r.readAsDataURL(e),new Promise((t,n)=>{r.onload=function(){t(r.result)},r.onerror=function(i){n(`Error: ${i}`)}})},scrollToMessageListBottom:C_(()=>{Qt("#message-view")[0]&&Qt("#message-view").scrollTop(Qt("#message-view")[0].scrollHeight-Qt("#message-view")[0].clientHeight)},100),getMyProfileLink(){const e=LV.name||de.toNostrBech32Address(de.getPubKey(),"npub");return this.buildURL(e)},buildURL(e,r={},t=""){const n=new URL(window.location.origin);return n.pathname=e,r&&np.forEach(r,(i,s)=>{n.searchParams.append(s,i)}),t&&(n.hash=t),n.toString()},arrayToHex(e){return Array.from(e,r=>("0"+(r&255).toString(16)).slice(-2)).join("")},isElectron:HTe,pubKeyRegex:m8,noteRegex:fS,hashtagRegex:b8},de={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:Th,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,r=!1){const t=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),t&&location.reload(),Re.get("loggedIn").put(!0),r&&setTimeout(()=>{xr("/following")}),Re.get("showLoginModal").put(!1)},generateKey(){const e=X3();return{priv:e,rpub:Th(e)}},getOrCreate(e){let r=localStorage.getItem("iris.myKey");return r||(r=localStorage.getItem("chatKeyPair")),r?(this.key=JSON.parse(r),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),Re.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),Re.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return((e=this.key)==null?void 0:e.rpub)||""},getPrivKey(){var e;return((e=this.key)==null?void 0:e.priv)||""},encrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?Ah.encrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"encrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},decrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?Ah.decrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"decrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},sign:async function(e){const r=this.getPrivKey();return r?eW(e,r):window.nostr?new Promise(t=>{this.processWindowNostr({op:"sign",data:e,callback:t})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:r,pub:t,callback:n}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(t,r),n):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(t,r),n):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(r),s=>n(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,r){return e.then(t=>{r(t)}).catch(t=>{console.error(t),r(null)})},async decryptMessage(e,r){var n,i;const t=Me.decryptedMessages.get(e.id);if(t){r(t);return}try{const s=this.getPubKey(),o=e.pubkey===s?(i=(n=e.tags)==null?void 0:n.find(l=>l[0]==="p"))==null?void 0:i[1]:e.pubkey;if(!(e&&o))return;let a=await this.decrypt(e.content,o);a!=null&&a.content&&(a=a.content),Me.decryptedMessages.set(e.id,a),r(a)}catch(s){console.error(s)}},async getPubKeyByNip05Address(e){try{const[r,t]=e.split("@"),n=`https://${t}/.well-known/nostr.json?name=${r}`;return(await(await fetch(n)).json()).names[r]||null}catch(r){return console.error(r),null}},async verifyNip05Address(e,r){try{const[t,n]=e.split("@"),i=`https://${n}/.well-known/nostr.json?name=${t}`,a=(await(await fetch(i)).json()).names;return a[t]===r||a[t.toLowerCase()]===r}catch{return!1}},toNostrBech32Address:function(e,r){if(!e)return null;if(!r)throw new Error("prefix is required");try{const n=qT(e);return r!==n.prefix?null:lB(r,n.data)}catch{}const t=e.match(/^[0-9a-fA-F]{64}$/);if(t!==null){const n=t[0].match(/.{1,2}/g);if(n!==null){const i=new Uint8Array(n.map(s=>parseInt(s,16)));return lB(r,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:r}=qT(e);return hr.arrayToHex(r)}catch{}return null}},zTe=[{url:"/",icon:Rz,activeIcon:Bz},{url:"/chat",icon:x3,activeIcon:S3},{url:"/post/new",icon:sue,activeIcon:Due},{url:"/search",icon:Lz,activeIcon:to.magnifyingGlassBold}],UTe=()=>{const[e,r]=He(!1),[t,n]=He("/"),[i,s]=He(null);kt(()=>{Re.get("isMyProfile").on(u=>r(u)),Re.get("activeRoute").on(u=>{const f=u.replace("/chat/new","").replace("/chat/",""),c=f.length<u.length?f:null;n(u),s(c)})},[]);const o=u=>{u&&window.scrollTo({top:0})},a=(u,f,c)=>{const p=new RegExp(`^${u}(/|$)`).test(t);return v(Jt,{href:u,className:`btn flex-grow ${p?"active":""}`,onClick:()=>o(p),children:[v(pt,{when:p,children:v(c,{width:24})}),v(pt,{when:!p,children:v(f,{width:24})})]})},l=de.toNostrBech32Address(de.getPubKey(),"npub");return v(pt,{when:l&&!i,children:v("footer",{className:"fixed md:hidden bottom-0 z-10 w-full bg-base-200 pb-safe-area",children:v("div",{className:"flex",children:[zTe.map(u=>a(u.url,u.icon,u.activeIcon)),v(Jt,{href:`/${l}`,onClick:()=>o(e),className:"rounded-full btn flex flex-grow",children:v("span",{className:`${e?"border-white":"border-black"} flex rounded-full border-2`,children:v(Ki,{str:l,width:28})})})]})})})},WTe=(e,r)=>r.indexOf(e.slice(-4))!==-1,w8=e=>WTe(e.name,[".jpg","jpeg",".gif",".png"]);class qTe extends zn{constructor(){super(...arguments);oe(this,"torrentId");oe(this,"filePath");oe(this,"torrent")}componentDidMount(){Re.get("player").on(t=>{const n=t&&t.torrentId,i=t&&t.filePath;n!==this.torrentId?(this.filePath=i,this.torrentId=n,this.setState({torrentId:n,isOpen:!!t,splitPath:i&&i.split("/")}),n&&this.startTorrenting()):i&&i!==this.filePath&&(this.filePath=i,this.setState({splitPath:i&&i.split("/")}),this.openFile())}),Re.get("player").get("paused").on(t=>this.setPaused(t))}setPaused(t){const i=this.base.querySelector("audio");i&&(t?i.pause():i.play())}onTorrent(t){this.torrent=t;const n=t.files.find(a=>w8(a));let i=t.files.find(a=>w8(a)&&(a.name.indexOf("cover")>-1||a.name.indexOf("poster")>-1));i=i||n;const o=this.base.querySelector(".cover");o.innerHTML="",i&&o.appendChild(i.appendTo()),this.setState({isOpen:!0}),this.openFile()}openFile(){if(this.torrent){const t=this.torrent.files.find(o=>o.path===this.filePath),i=this.base.querySelector(".player");i.innerHTML="",t&&i.appendChild(t.appendTo({autoplay:!0,muted:!1}));const s=i.querySelector("audio");s&&(s.onpause=s.onplay=o=>{const a=o.target;Re.get("player").get("paused").put(!!a.paused)})}}async startTorrenting(){const{default:t}=await _r(()=>import("./index-132ce8f3.js").then(s=>s.i),[]),n=new t,i=n.get(this.torrentId);i?this.onTorrent(i):n.add(this.torrentId,(s,o)=>this.onTorrent(o))}closeClicked(){this.setPaused(!0),Re.get("player").put(null)}render(){const t=this.state;return v(lt,{children:v("div",{className:"media-player",style:{display:t.isOpen?"":"none"},children:[v("div",{className:"player"}),v("div",{className:"cover"}),v(Jt,{href:`/torrent/${encodeURIComponent(this.state.torrentId??"")}`,className:"info",children:t.splitPath?t.splitPath.map((n,i)=>{var s;return i===(((s=t.splitPath)==null?void 0:s.length)||0)-1?(n=n.split(".").slice(0,-1).join("."),v("p",{children:v("b",{children:n})})):v("p",{children:n})}):""}),v("div",{className:"close",onClick:()=>this.closeClicked(),children:to.close})]})})}}const KTe=[{url:"/",text:"home",icon:Rz,activeIcon:Bz},{url:"/search",text:"search",icon:Lz,activeIcon:to.magnifyingGlassBold},{url:"/chat",text:"messages",icon:x3,activeIcon:S3},{url:"/settings",text:"settings",icon:Pz,activeIcon:gue},{url:"/about",text:"about",icon:eue,activeIcon:kue}];function VTe(){const[e,r]=He(0),[t,n]=He(""),[i,s]=He(!1);kt(()=>{const f=Re.get("unseenMsgsTotal").on(r),c=Re.get("activeRoute").on(n);return()=>{f(),c()}},[]),mu(()=>{const f=new Date;return f.getMonth()===2&&f.getDate()===17},[]);const o=()=>{Re.get("scrollUp").put(!0),window.scrollTo(0,0)},a=()=>v(Iu,{centerVertically:!0,showContainer:!0,onClose:()=>s(!1),children:v(sx,{onSubmit:()=>s(!1),placeholder:he("whats_on_your_mind"),autofocus:!0})}),l=()=>{const f=de.getPubKey(),c=de.toNostrBech32Address(f,"npub");return v("div",{className:"flex justify-center xl:justify-start",children:v(Jt,{href:`/${c}`,className:"btn btn-ghost md:max-xl:btn-circle",children:[v(Ki,{str:f,width:34}),v("div",{className:"hidden xl:block ml-2",children:v($r,{pub:f,hideBadge:!0})})]})})},u=f=>{const c=new RegExp(`^${f.url}(/|$)`).test(t),p=c?f.activeIcon:f.icon;return v("div",{children:v("a",{onClick:()=>o(),className:`${c?"active":""} inline-flex w-auto flex items-center space-x-4 p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900`,href:f.url,children:[v(pt,{when:f.text==="messages"&&e,children:v("span",{class:"unseen unseen-total",children:e})}),v(p,{width:26}),v("span",{className:"hidden xl:flex pr-2",children:he(f.text)})]})})};return v("div",{className:"sticky border-r border-neutral-900 top-0 z-20 h-screen max-h-screen hidden md:flex xl:w-56 flex-col px-2 py-4 flex-shrink-0",children:[v("a",{className:"flex items-center gap-3 px-2 mb-4",tabIndex:3,href:"/",onClick:()=>o(),children:[v("img",{src:"/img/dwotr/logo30.png",width:"30",height:"30"}),v("h1",{className:"hidden xl:flex text-3xl",children:"Dpeep"})]}),v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation/blob/main/Trust.md",target:"_blank",children:v("small",{className:"pl-3",children:"Iris clone with DWoTR"})}),v("div",{className:"flex flex-col gap-2",children:KTe.map(f=>u(f))}),v("div",{class:"py-2 flex-1",children:[v("button",{className:"btn btn-primary md:max-xl:btn-circle mt-2",onClick:()=>s(!i),children:[v(Fz,{width:26}),v("span",{className:"hidden xl:flex",children:he("new_post")})]}),v(pt,{when:i,children:a()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),l()]})}const GTe={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const r=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(r.status===200){const n=await r.json();console.log("existingIrisToAddress",n),Re.get("existingIrisToAddress").put(n);const i=setTimeout(()=>{n!=null&&n.confirmed||Re.get("showNoIrisToAddress").put(!0)},1e3);return Re.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:n}}const t=setTimeout(()=>{Re.get("showNoIrisToAddress").put(!0)},2e3);Re.get("showNoIrisToAddress").on(n=>{n||clearTimeout(t)})},setAsPrimary(e){const r=e+"@iris.to",t=setTimeout(()=>{tt.setMetadata({nip05:r})},2e3);tt.getProfile(de.getPubKey(),n=>{n&&(clearTimeout(t),n.nip05!==r&&(n.nip05=r,tt.setMetadata(n)))})},async enableReserved(e){const r=de.getPubKey(),t={content:`iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Me.getEventHash(t),t.sig=await de.sign(t);const n=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").put({confirmed:!0,name:e}),n.status===200)return{error:null,existing:{confirmed:!0,name:e}};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const r=de.getPubKey(),t={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Me.getEventHash(t),t.sig=await de.sign(t);const n=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.status===200)return Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},$8=3e4;function FV(e){var r,t;return(t=(r=e.tags)==null?void 0:r.find(([n])=>n==="d"))==null?void 0:t[1]}function YTe(e){var r;return(r=e["#d"])==null?void 0:r[0]}class ZTe{constructor(){oe(this,"eventsByPathAndAuthor",new Map)}set(r){const t=FV(r);if(!t)return!1;this.eventsByPathAndAuthor.has(t)||this.eventsByPathAndAuthor.set(t,new Map);let n=this.eventsByPathAndAuthor.get(t);n||(n=new Map,this.eventsByPathAndAuthor.set(t,n));const i=n==null?void 0:n.get(r.pubkey);return i&&i.created_at>r.created_at?!1:(n.set(r.pubkey,r),!0)}get(r,t){const n=YTe(r);if(!n)throw new Error(`filter has no #d tag: ${JSON.stringify(r)}`);const i=this.eventsByPathAndAuthor.get(n);if(i)for(const[s,o]of i)(!r.authors||r.authors.indexOf(s)!==-1)&&t(o)}}class _8{constructor(r,t,n,i,s,o){oe(this,"store");oe(this,"listeners");oe(this,"publish");oe(this,"subscribe");oe(this,"unsubscribe");oe(this,"filter");oe(this,"encrypt");oe(this,"decrypt");this.publish=r,this.subscribe=t,this.unsubscribe=n,this.filter=i,this.encrypt=s,this.decrypt=o,this.store=new ZTe,this.listeners=new Map}async publishSetEvent(r,t){let n;if(this.encrypt){const i=JSON.stringify(t);if(n=await this.encrypt(i),i===n)throw new Error(`Encryption failed: ${i} === ${n}`)}else n=JSON.stringify(t);return this.publish({kind:$8,tags:[["d",r]],content:n,created_at:Math.floor(Date.now()/1e3)})}async set(r,t){try{const n=await this.publishSetEvent(r,t);if(n)return this.store.set(n)&&this.notifyListeners(n),!0}catch(n){console.error(n)}return!1}async getEventValue(r){let t=this.decrypt?await this.decrypt(r.content):r.content;try{t=JSON.parse(t)}catch{throw new Error(`Failed to parse event content: ${t}`)}return t}get(r,t,n={}){n=Object.assign({},n,this.filter,{"#d":[r],kinds:[$8]});const i=this.addListener(n,t);return this.store.get(n,s=>this.callbackFromEvent(s,t)),this.subscribe([n],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(r,t){const n=Math.random().toString(36).substr(2,9),i={filter:r,callback:t,off:()=>{this.listeners.delete(n),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(n,i),i}removeListener(r){const t=this.listeners.get(r);t&&t.off()}callbackFromEvent(r,t){const n=FV(r);if(!n)throw new Error(`event has no d tag: ${JSON.stringify(r)}`);this.getEventValue(r).then(i=>{t(i,n,r)})}async notifyListeners(r){for(const t of this.listeners.values())Q3(t.filter,r)&&this.callbackFromEvent(r,t.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}const Ph={public:void 0,private:void 0,async logOut(){var e;if(xr("/"),navigator.serviceWorker){const r=await navigator.serviceWorker.getRegistration();r&&r.pushManager&&((e=r.active)==null||e.postMessage({key:null}),await r.pushManager.getSubscription())}ul.clear(),localStorage.clear(),vn.clear().then(()=>{location.reload()})},unsubscribe(){},onLoggedIn(){const e=de.getPubKey(),r=dt(e);tt.followDistanceByUser.set(r,0),tt.followersByUser.set(r,new Set),tt.usersByFollowDistance.set(0,new Set([r]));const t=(s,o)=>{var u;const l=(u=s[0]["#d"])==null?void 0:u[0];if(l){const f=Me.keyValueEvents.get(l);f&&o(f)}return Bt.subscribe(s[0],o,!0),"0"};Re.get("globalFilter").once(s=>{s||Re.get("globalFilter").put(Me.DEFAULT_GLOBAL_FILTER)}),this.private=new _8((...s)=>Me.publish(...s),t,()=>this.unsubscribe(),{authors:[e]},(...s)=>de.encrypt(...s),(...s)=>de.decrypt(...s)),this.public=new _8((...s)=>Me.publish(...s),t,()=>this.unsubscribe(),{authors:[e]}),this.public.get("notifications/lastOpened",s=>{s!==Me.notificationsSeenTime&&(Me.notificationsSeenTime=s,Me.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",s=>{if(s==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(s==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),an.init(),Vw.loadEvents();const n=setTimeout(()=>{GTe.checkExistingAccount(e)},1e3);tt.getProfile(e,async s=>{s&&s.nip05&&s.nip05.endsWith("@iris.to")&&(Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").get("name").put(s.nip05.replace("@iris.to","")),clearTimeout(n))});const i=tt.getFollowersByUser(e,s=>{s!=null&&s.size?(Re.get("noFollowers").put(!1),i()):Re.get("noFollowers").put(!0)});setTimeout(()=>{Bt.subscribe({authors:[e]},void 0,!0),Bt.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),Bt.subscribe({"#p":[e],kinds:[4]},void 0,!1,!1),Bt.subscribe({authors:[e],kinds:[4]},void 0,!1,!1),Me.subscribeGroups()},200),setInterval(()=>{console.log("handled msgs per second",Math.round(Me.handledMsgsPerSecond/5)),Me.handledMsgsPerSecond=0},5e3)},init:function(e){de.getOrCreate(e),Re.get("loggedIn").on(()=>this.onLoggedIn())}};let El=class extends _n{constructor(){super();oe(this,"userId",null);oe(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(t){t.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}setTitle(t){let n=t.split("/")[1]||he("home");n.startsWith("note")?n=he("post"):n.startsWith("npub")?(this.userId=n,n=v($r,{pub:this.userId||""},`${this.userId}title`)):n=n.charAt(0).toUpperCase()+n.slice(1);const i=t.replace("/chat/new","").replace("/chat/","");if(t.indexOf("/chat/")===0&&t.indexOf("/chat/new")!==0&&(this.userId=i.length<t.length?i:null,t.indexOf("/chat/")===0&&this.userId===de.getPubKey()?n=v(lt,{children:[v("b",{className:"mr-5",children:"📝"})," ",v("b",{children:he("note_to_self")})]}):n=v($r,{pub:this.userId||""},`${this.userId}title`)),t.indexOf("/search/")===0){let s=t.replace("/search/","");s.indexOf("?")!==-1&&(s=s.substring(0,s.indexOf("?"))),n=`${he("search")}: ${decodeURIComponent(s)}`}this.setState({title:n})}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),Re.get("showParticipants").on(this.inject()),Re.get("unseenMsgsTotal").on(this.inject()),Re.get("unseenNotificationCount").on(this.inject()),Re.get("showConnectedRelays").on(this.inject()),Re.get("isMyProfile").on(this.inject()),Re.get("activeRoute").on(this.sub(t=>{this.setState({about:null,activeRoute:t,showMobileSearch:!1}),this.setTitle(t)})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){window.scrollTo(0,0),this.userId&&this.userId.indexOf("hashtag")===-1&&xr("/"+this.userId)}updateRelayCount(){this.setState({connectedRelays:an.getConnectedRelayCount()})}renderSearchBox(){return this.userId?"":v(QP,{onSelect:t=>xr(`/${t.key}`)})}renderConnectedRelays(){return v("a",{href:"/settings/network",className:`ml-2 tooltip tooltip-bottom mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,"data-tip":he("connected_relays"),children:v("small",{className:"flex items-center gap-2",children:[v("span",{class:"icon",children:to.network}),v("span",{children:this.state.connectedRelays})]})})}renderTitle(){const t=this.state.activeRoute==="/";return v("div",{className:`flex-1 text-center ${t?"invisible md:visible":""}`,onClick:()=>this.onTitleClicked(),children:this.state.title})}renderNotifications(){return v(lt,{children:[v(pt,{when:this.state.isMyProfile,children:v(Jt,{href:"/settings",className:"md:hidden",children:v(Pz,{width:28})})}),v("a",{href:"/notifications",className:`relative inline-block ${this.state.isMyProfile?"hidden md:flex":""}`,children:[this.state.activeRoute==="/notifications"?v(E3,{width:28}):v(Nz,{width:28}),v(pt,{when:this.state.unseenNotificationCount,children:v("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-iris-purple text-white text-sm rounded-full h-5 w-5 flex items-center justify-center",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount})})]})]})}renderLoginBtns(){return v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>Re.get("showLoginModal").put(!0),children:he("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>Re.get("showLoginModal").put(!0),children:he("sign_up")})]})}renderBackBtnOrLogo(){return this.state.activeRoute==="/"?v(lt,{children:v("div",{className:"flex flex-row items-center gap-2 md:hidden",children:[v("img",{src:"/img/dwotr/logo30.png",style:"padding-top:5px"}),v("h1",{className:"text-3xl",children:"Dpeep"})]})}):v(Dz,{width:24,onClick:()=>this.backButtonClicked()})}render(){const n=!!de.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[this.renderBackBtnOrLogo(),v(pt,{when:n&&this.state.showConnectedRelays,children:this.renderConnectedRelays()}),this.renderTitle(),v(pt,{when:n,children:this.renderNotifications()}),v(pt,{when:!n,children:this.renderLoginBtns()})]})})})}};const s1="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8",o1="npub1srpfc36pes9urzcnmrev38c9ypewahmggqc56dj7czr4k6zd4qcs4m5mn8";class XTe extends _n{render(){return v(lt,{children:[v(El,{}),v("div",{className:"main-view prose",id:"settings",children:v("div",{className:"px-2 md:px-4 py-2",children:[v("h2",{className:"mt-0",children:he("about")}),v("p",{children:["Dpeep, building upon the code by ",v("b",{children:"Iris.to"})," (",v("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"), introduces a transformative experience in social networking by seamlessly integrating the Decentralized Web of Trust Reputation system:"]}),v("ul",{children:[v("li",{children:["Features the ",v("b",{children:"Decentralized Web of Trust Reputation"})," system: a decentralized network that evaluates and displays trust based on each user's unique perspective."]}),v("li",{children:[v("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),v("li",{children:[v("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),v("li",{children:[v("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!hr.isStandalone()&&v(lt,{children:[v("h3",{children:"Versions"}),v("p",{children:v("ul",{children:v("li",{children:[v("a",{target:"_blank",href:"https://iris.to",children:"dpeep.com"})," ","(web)"]})})})]}),v("h3",{children:"Docs"}),v("p",{children:["Visit Iris ",v("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),v("p",{children:["Visit Dpeep ",v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation",children:"docs"})," explanations on the Decentralized Web of Trust Reputation system."]}),v("h3",{children:"Privacy"}),v("p",{children:he("application_security_warning")}),v("h3",{children:"Follow"}),v("div",{className:"flex flex-row items-center w-full justify-between",children:[v(Jt,{href:`/${s1}`,className:"flex flex-row items-center gap-2",children:[v(Ki,{str:s1,width:40}),v($r,{pub:s1,placeholder:"Iris"})]}),v(Uc,{className:"btn btn-neutral btn-sm",id:s1})]}),v("div",{className:"flex flex-row items-center w-full justify-between py-5",children:[v(Jt,{href:`/${o1}`,className:"flex flex-row items-center gap-2",children:[v(Ki,{str:o1,width:40}),v($r,{pub:o1,placeholder:"Iris"})]}),v(Uc,{className:"btn btn-neutral btn-sm",id:o1})]}),v("h3",{children:"Released under MIT license"}),v("p",{children:["Dpeep code: ",v("a",{href:"https://github.com/DigitalTrustProtocol/Dpeep",children:"Github"}),"."]}),v("br",{})]})})]})}}class n4 extends zn{constructor(){super(...arguments);oe(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t.message}}componentDidCatch(t){console.error(t),this.setState({error:t.message})}render(){return this.state.error?v("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}const JTe=e=>e;function QTe({date:e}){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;let o="";return t<n?o=JTe("now"):t<i?o=Math.floor(t/n)+"m":t<s?o=Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?o=e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):o=e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),v(lt,{children:o})}const eIe=Ni(({event:e})=>{var r,t;return v("div",{className:"flex gap-4 w-full break-words",children:[v("div",{className:"flex-shrink-0",children:v(Jt,{href:`/${Mc.npubEncode(e.pubkey)}`,children:v(Ki,{str:e.pubkey,width:30})})}),v(Jt,{href:`/${Mc.noteEncode(e.id)}`,className:"w-full",children:[v("b",{children:v($r,{pub:e.pubkey})})," | ",v("span",{className:"text-neutral-400",children:[v(QTe,{date:new Date(e.created_at*1e3)}),v("br",{}),((r=e.content)==null?void 0:r.length)>80?`${(t=e.content)==null?void 0:t.slice(0,80)}...`:e.content]})]})]},e.id)}),tIe=({events:e})=>{const r=[];return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:[v(bue,{width:20,className:"text-iris-orange"}),"Trending 24h"]}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-6 text-xs overflow-x-hidden",children:e.filter(t=>!r[t.pubkey]).map(t=>v(eIe,{event:t}))})]})},rIe=Ni(tIe),jV=(e,r,t=n=>n)=>{const n=localStorage.getItem(r),i=n?JSON.parse(n).data:[],[s,o]=He(i);return kt(()=>{const a=()=>{fetch(e).then(l=>l.json()).then(l=>{const u=t(l);o(u),localStorage.setItem(r,JSON.stringify({data:u,timestamp:new Date().getTime()}))}).catch(()=>{if(n){const{data:l}=JSON.parse(n);o(l)}})};if(n){const{timestamp:l}=JSON.parse(n);(new Date().getTime()-l)/1e3/60>=15&&a()}else a()},[e,r,t]),s},nIe=Ni(({pubkey:e})=>{var t,n;const r=RK(e);return v(Jt,{href:`/${Mc.npubEncode(e)}`,className:"flex flex-row gap-4 w-full break-words",children:[v("span",{className:"flex-shrink-0",children:v(Ki,{str:e,width:30})}),v("span",{className:"flex-1",children:[v("b",{children:v($r,{pub:e})}),v("br",{}),v("span",{className:"text-neutral-400",children:[(t=r==null?void 0:r.about)==null?void 0:t.slice(0,100),((n=r==null?void 0:r.about)==null?void 0:n.length)>100?"...":""]})]}),v("span",{className:"flex-shrink-0",children:v(Uc,{className:"btn btn-sm",id:e})})]},e)}),iIe=Ni(()=>{const e=`https://api.nostr.band/v0/suggested/profiles/${de.getPubKey()}`,r=jV(e,"followSuggestions",n=>n.profiles||[]);if(!r.length)return null;const t=r.sort(()=>.5-Math.random()).slice(0,8).map(n=>n.pubkey);return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:"Follow suggestions"}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-4 items-center text-xs overflow-x-hidden",children:t.map(n=>v(nIe,{pubkey:n},n))})]})}),HV=e=>{const n=jV("https://api.nostr.band/v0/trending/notes","trendingNotes",i=>{const s=i.notes.map(o=>o.event);return s.forEach(o=>{Me.handle(o)}),s});return v("div",{class:"sticky border-l border-neutral-900 top-0 right-0 px-4 py-2 mx-2 md:mx-0 flex flex-col gap-4 h-screen",children:[v(QP,{focus:e.focus,onSelect:({key:i})=>{xr("/"+i)}}),v("div",{className:"max-h-[50vh] overflow-y-scroll",children:v(rIe,{events:n})}),v("div",{className:"max-h-[50vh] overflow-y-scroll",children:v(iIe,{})})]})};let zV=!0;const UV=function(){zV=!1,window.removeEventListener("popstate",UV)};window.addEventListener("popstate",UV);let qh=class extends _n{constructor(){super(...arguments);oe(this,"class","");oe(this,"id","");oe(this,"observer",null);oe(this,"scrollPosition",0);oe(this,"hideSideBar",!1);oe(this,"hideHeader",!1);oe(this,"saveScrollPosition",$n.debounce(()=>{const t=window.scrollY||document.documentElement.scrollTop,i={...window.history.state,scrollPosition:t};window.history.replaceState(i,"")},100));oe(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(t=>{t.forEach(()=>{this.restoreScrollPosition(!1)})}),this.observer.observe(document.body),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3)})}render(){return v("div",{className:"flex flex-row h-full w-full",children:[v("div",{className:`flex flex-col w-full h-full ${this.hideSideBar?"":"lg:w-2/3"}`,children:[v(pt,{when:!this.hideHeader,children:v(El,{})}),v("div",{class:this.class,id:this.id,className:"h-full",children:v(n4,{children:this.renderView()})})]}),v(pt,{when:!this.hideSideBar,children:v("div",{className:"flex-col hidden lg:flex lg:w-1/3",children:v(HV,{focus:!1})})})]})}componentDidMount(){window.addEventListener("scroll",this.saveScrollPosition),this.restoreScrollPosition()}restoreScrollPosition(t=!0){var s,o;const n=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!zV&&n!==i)t&&this.observeScrollElement(),this.scrollPosition||(this.scrollPosition=(o=window.history.state)==null?void 0:o.scrollPosition),this.scrollPosition&&window.scrollTo(0,this.scrollPosition);else{const l={...window.history.state||{},previousState:n};window.history.replaceState(l,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect(),window.removeEventListener("scroll",this.saveScrollPosition)}};const sIe=({chat:e,active:r=!1,latestMsg:t={},name:n})=>{const i=a=>{a.keyCode===13&&a.target.click()},s=t.created_at&&hr.getRelativeTimeText(new Date(t.created_at*1e3))||"",o=de.toNostrBech32Address(e,"npub");return v("div",{onKeyUp:i,role:"button",tabIndex:0,className:`p-2 ${r?"bg-neutral-800":"hover:bg-neutral-900"}`,onClick:()=>xr(`/chat/${o||e}`),children:v("div",{className:"flex gap-4 overflow-x-hidden",children:[v(Ki,{str:o||e,width:49}),v("div",{className:"flex flex-col",children:[v("span",{className:"name",children:[v(pt,{when:n,children:n}),v(pt,{when:!n,children:[v(pt,{when:e===de.getPubKey(),children:v("span",{className:"font-bold italic",children:["📝 ",he("note_to_self")]})}),v(pt,{when:e!==de.getPubKey(),children:v($r,{pub:e})}),v("small",{className:"ml-2 latest-time text-neutral-500",children:s})]})]}),v("small",{className:"text-neutral-500 truncate",children:t.text})]})]})})},oIe=Ni(sIe),aIe=({active:e})=>v("div",{role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 h-16 items-center cursor-pointer hover:bg-neutral-900 ${e?"bg-neutral-700":""}`,onClick:()=>xr("/chat/new"),children:[v("div",{className:"flex justify-center items-center w-12 h-12 rounded-full",children:v(Fz,{className:"w-6 h-6"})}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:v("span",{className:"name",children:he("new_chat")})})})]}),lIe=(e,r)=>{const t=e.value.latest,n=r.value.latest;return t?n?n.created_at-t.created_at:-1:1},uIe=({activeChat:e,className:r})=>{const[t,n]=He(new aP(lIe)),[i,s]=He(0),o=ro(null),a=()=>{Notification&&Notification.requestPermission().then(u=>{(u==="granted"||u==="denied")&&Qt("#enable-notifications-prompt").slideUp()})};kt(()=>{const u=[],f=(c,p)=>{n(y=>(y.set(p,{...c}),y)),s(y=>y+1)};return u.push(Re.get("chats").map(f)),u.push(Re.get("groups").map(f)),u.push(Re.get("scrollUp").on(()=>{window.scrollTo(0,0),o.current&&(o.current.scrollTop=0)})),()=>u.forEach(c=>c())},[]);const l=e&&de.toNostrHexAddress(e)||e;return v("section",{className:`md:border-r flex flex-shrink-0 border-neutral-800 overflow-x-hidden overflow-y-auto md:px-0 w-full md:w-64 ${r}`,ref:o,children:[v("div",{id:"enable-notifications-prompt",className:"hidden",onClick:a,children:[v("div",{className:"title",children:he("get_notified_new_messages")}),v("div",{children:v("a",{children:he("turn_on_desktop_notifications")})})]}),v("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[v(aIe,{active:l==="new"}),Array.from(t.entries()).map(([u,f])=>v(oIe,{active:u===l,chat:u,latestMsg:f==null?void 0:f.latest,name:f==null?void 0:f.name},u))]})]})},WV=({event:e,selfAuthored:r,showName:t,torrentId:n})=>{const[i,s]=He(e.text||""),[o,a]=He(null),[l,u]=He(!1);kt(()=>{Qt("a").click(I=>{const O=Qt(I.target).attr("href");O&&O.indexOf("https://iris.to/")===0&&(I.preventDefault(),xr(O.replace("https://iris.to/","")))});let x=i;x?f(x):de.decryptMessage(e,I=>{x=I,f(x)})},[e.id,i]);const f=x=>{try{const I=x.slice(x.indexOf("{")),O=JSON.parse(I);if(Ly(O)&&Wp(O)&&(console.log(111,O.tags.length===1,O.tags[0][0]==="p",O.tags[0][1]===O.pubkey),O.tags.length===1&&O.tags[0][0]==="p"&&O.tags[0][1]===e.pubkey)){O.text=O.content,a(O);return}}catch{}u(!0),s(x)};if(o)return v(WV,{event:o,showName:!0,selfAuthored:o.pubkey===de.getPubKey()});if(!l)return null;const c=()=>{xr(`/${de.toNostrBech32Address(e.pubkey,"npub")}`)},p=i&&i.length===2&&hr.isEmoji(i),y=hr.highlightEverything(i||""),w=typeof e.created_at=="object"?e.created_at:new Date(e.created_at*1e3),b="",T=b.seen?"text-green-500":"text-neutral-500",_=b.delivered?"border-green-500":"border-neutral-500";return v("div",{className:`p-2 w-full md:w-2/3 rounded-xl mb-1 ${r?"self-end bg-iris-blue text-white":"self-start bg-neutral-700 text-white"} ${T} ${_} flex flex-col items-start`,children:v("div",{className:"w-full",children:[v("div",{className:"mb-2",children:t&&v("small",{onClick:c,className:"cursor-pointer text-xs",children:v($r,{pub:e.pubkey},e.pubkey)})}),n&&v(jm,{torrentId:n}),v("div",{className:`preformatted-wrap text-base ${p?"text-4xl":""}`,children:y}),v("div",{className:`${r?"text-right":"text-left"} text-xs text-white`,children:e.id?hr.getRelativeTimeText(w):hr.formatTime(w)})]})})},cIe=Ni(WV),fIe=({activeChat:e,class:r,autofocus:t,onSubmit:n,keyPair:i})=>{const[s,o]=He(""),a=ro(null);kt(()=>{var p;!hr.isMobile&&t!==!1&&((p=a.current)==null||p.focus())},[t]);const l=p=>{try{const y=de.toNostrHexAddress(e);if(!y)throw new Error("invalid public key "+y);return de.encrypt(p,y)}catch(y){console.error(y)}},u=async p=>{if(p.preventDefault(),!s.length)return;const y=4,w=Math.floor(Date.now()/1e3),b={kind:y,created_at:w};if(i){let T={kind:y,created_at:w,content:s,tags:[["p",i.pubKey]]};T=await Me.sign(T),b.content=await Ah.encrypt(i.privKey,i.pubKey,`${s}

${JSON.stringify(T)}`),b.pubkey=i.pubKey,b.tags=[["p",i.pubKey]],console.log("event",b),b.id=Ih(b),b.sig=J3(b,i.privKey)}else{const T=de.toNostrHexAddress(e);if(b.content=await l(s),b.tags=[["p",T]],!T)throw new Error("invalid public key "+T)}Me.publish(b),o(""),n==null||n()},f=p=>{const y=p.target.value;o(y),Re.get("channels").get(e).get("msgDraft").put(y)},c=p=>{(p.metaKey||p.ctrlKey)&&p.key==="Enter"&&u(p)};return v("form",{autoComplete:"off",className:`flex flex-none flex-row gap-2 p-2 message-form sticky w-full bottom-0 w-96 max-w-screen bg-black ${r||""}`,onSubmit:u,children:[v("input",{ref:a,className:"input input-sm flex-1 new-msg bg-neutral-700 text-white",onInput:f,onKeyDown:c,type:"text",placeholder:"Type a message",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0,value:s}),v("button",{className:`btn btn-sm ${s.length>0?"text-white bg-iris-blue":""}`,style:{marginRight:"0"},disabled:s.length===0,children:v(x3,{width:"24"})})]})};function hIe({id:e}){const r=ro(null),t=ro(new aP("created_at")),[n,i]=He([]),[s,o]=He(!0),[a,l]=He(""),[u,f]=He(!1),[c,p]=He(void 0),[y,w]=He(!1),b=[];let T;const _=()=>{let B=Qt(".day-separator").last(),L=B.position();for(;B&&L&&L.top-55>0;)B=B.prevAll(".day-separator").first(),L=B.position();const q=B.clone(),Q=Qt("<div>").css({position:"fixed",top:70,"text-align":"center"}).attr("id","floating-day-separator").width(Qt("#message-view").width()).append(q);Qt("#floating-day-separator").remove(),setTimeout(()=>q.fadeOut(),2e3),Qt("#message-view").prepend(Q)},A=()=>{const B=de.toNostrHexAddress(e);lwe(B)},x=()=>{const B=Qt("#message-view");B[0].scrollHeight-B.scrollTop()<=B.outerHeight()+200?Qt("#scroll-down-btn:visible").fadeOut(150):Qt("#scroll-down-btn:not(:visible)").fadeIn(150)},I=Eh(()=>(c==null?void 0:c.privKey)&&de.toNostrBech32Address(c.privKey,"nsec")||"",[c]),O=()=>{T=T||C_(()=>{Qt("#attachment-preview:visible").length||(_(),x())},200),T()},C=()=>{hr.scrollToMessageListBottom();const B=document.getElementById("message-list");B&&(B.style.paddingBottom="0")},g=()=>{let B;const L=de.getPubKey(),q=new Date,Q=q.toLocaleDateString();let te,X;const j=[];return e&&e.length>4&&(n.forEach(Z=>{if(!Z)return null;const ie=new Date(Z.created_at*1e3);let _e;if(ie){const Ce=ie.toLocaleDateString();if(Ce!==te){_e=!0;const ze=hr.getDaySeparatorText(ie,Ce,q,Q);j.push(v("div",{className:"px-2 mt-3 mb-4 py-1 inline-block day-separator bg-black opacity-50 text-white rounded-full",children:he(ze.toLowerCase())}))}te=Ce}let we=_e;!_e&&X&&Z.pubkey!==X&&(j.push(v("div",{className:"m-2"})),we=!0),X=Z.pubkey,j.push(v(cIe,{event:Z,showName:we,selfAuthored:Z.pubkey===L},`${Z.created_at}${Z.pubkey}`))}),B=v("div",{className:"main-view p-2 overflow-y-auto overflow-x-hidden flex flex-col flex-grow h-full",id:"message-view",onScroll:()=>O(),children:[v("div",{id:"message-list",className:"w-full flex flex-col items-center justify-end",children:[j,v("div",{className:"italic my-2 text-neutral-500 w-full text-center justify-self-center",children:[v(pt,{when:y&&c,children:[v("div",{children:he("secret_chat")}),v("div",{className:"flex gap-2 flex-1 items-center justify-center mt-4",children:[v("button",{className:"btn btn-neutral btn-sm",onClick:()=>f(Z=>!Z),children:[v(jue,{width:"20"}),he("show_qr_code")]}),v(qi,{className:"btn btn-neutral btn-sm",copyStr:I(),text:"Copy nsec"}),v(qi,{className:"btn btn-neutral btn-sm",copyStr:hr.buildURL("chat",void 0,I()),text:he("copy_link")})]}),v(pt,{when:u,children:v(t4,{data:"nostr:"+I()})})]}),v(pt,{when:!y&&de.toNostrHexAddress(e)!==L,children:[v("div",{children:he("dm_privacy_warning")}),v("div",{className:"mt-4 flex gap-2 justify-center",children:[v(pt,{when:a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:()=>V_(a),children:"Go to secret chat"})}),v(pt,{when:!a,children:v("button",{className:"btn btn-neutral btn-sm",onClick:A,children:"Invite to secret chat"})})]})]})]})]}),v("div",{id:"attachment-preview",className:"attachment-preview",style:{display:"none"}})]})),B},M=()=>v(lt,{children:[v("div",{className:"relative",children:v("div",{id:"scroll-down-btn",style:{display:"none"},className:"absolute bottom-1 left-2 p-1.5 rounded-3xl bg-neutral-900 opacity-85 hover:cursor-pointer",onClick:()=>C(),children:v(qle,{width:"24"})})}),v(fIe,{activeChat:e,onSubmit:()=>C(),keyPair:c},e)]});return kt(()=>{const B=de.toNostrHexAddress(e),L=te=>{const X=j=>{t.current.set(j.id,j),i(Array.from(t.current.values()))};b.push(Bt.subscribe({kinds:[4],"#p":[de.getPubKey()],authors:[te]},X)),te!==de.getPubKey()&&b.push(Bt.subscribe({kinds:[4],"#p":[te],authors:[de.getPubKey()]},X))};Re.get("chatInvites").get(B).once(te=>{te!=null&&te.priv&&l(te.priv)});const q=()=>{const te=Re.get("groups").get(e);te.on(X=>{const j=X.key,Z=Th(j);p({privKey:j,pubKey:Z}),b.push(Bt.subscribe({kinds:[4],"#p":[Z],authors:[Z]},async ie=>{const _e=await Ah.decrypt(j,Z,ie.content);t.current.set(ie.id,{...ie,text:_e}),i(Array.from(t.current.values()));const we=te.get("latest"),Ce=await we.once();(!Ce||!Ce.created_at||Ce.created_at<ie.created_at)&&we.put({id:ie.id,created_at:ie.created_at,text:_e.slice(0,_e.indexOf("{"))})}))})};if(B?L(B):(w(!0),q()),document.getElementById("message-list")){const te=Qt("#message-view");te.off("scroll").on("scroll",()=>{const X=te[0].scrollHeight-te.scrollTop()==te.outerHeight();s&&!X?o(!1):!s&&X&&o(!0)})}return()=>{b.forEach(te=>te())}},[e]),kt(()=>{s&&hr.scrollToMessageListBottom(),Qt(".msg-content img").off("load").on("load",()=>s&&hr.scrollToMessageListBottom())},[s]),v(lt,{children:[v(Sh,{children:v("title",{children:"Messages"})}),v("div",{id:"chat-main",ref:r,className:`${e?"":"hidden"} flex flex-1 flex-col`,children:[g(),v(pt,{when:e&&e.length>4,children:M()})]})]})}const dIe=({activeChat:e})=>{const r=()=>{window.history.back()},t=()=>{window.scrollTo(0,0),e&&e.length>15&&xr("/"+de.toNostrBech32Address(e,"npub"))},n=()=>v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>Re.get("showLoginModal").put(!0),children:he("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>Re.get("showLoginModal").put(!0),children:he("sign_up")})]}),s=!!de.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",onClick:t,children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[v(Dz,{width:24,onClick:r}),v(pt,{when:e,children:v("div",{className:"flex flex-row gap-2 items-center",children:[v(Ki,{width:30,str:e}),v($r,{pub:e})]})}),v(pt,{when:!e,children:v("div",{className:"flex flex-row gap-2 items-center",children:he("chat")})}),v(pt,{when:s,children:v("div",{})}),v(pt,{when:!s,children:n()})]})})})};class x8 extends qh{constructor(){super();oe(this,"id");oe(this,"renderContent",t=>t==="new"?v(uwe,{}):t?v(hIe,{id:t},t):v("div",{className:"hidden md:flex flex-col items-center justify-center flex-1",children:[v("div",{className:"my-4",children:v(S3,{className:"w-24 h-24 text-neutral-400"})}),v("div",{className:"text-neutral-400",children:he("dm_privacy_warning")})]}));this.id="chat-view",this.hideSideBar=!0,this.hideHeader=!0}componentDidMount(){super.componentDidMount();const t=window.location.hash.substr(1);t&&t.startsWith("nsec")&&(window.history.replaceState({},document.title,window.location.pathname),de.getPubKey()||de.loginAsNewUser(),FK(t))}renderView(){const{id:t}=this.props;return v("div",{className:"flex flex-col h-full max-h-screen",children:[v(dIe,{activeChat:t},t),v("div",{className:"flex flex-row flex-grow overflow-hidden",children:[v("div",{className:`flex-shrink-0 ${t?"hidden md:flex overflow-y-auto":"flex overflow-y-auto"}`,children:v(uIe,{activeChat:t,className:t?"hidden md:flex":"flex"})}),v("div",{className:`flex-grow overflow-y-auto ${t?"flex":"hidden md:flex"}`,children:this.renderContent(t)},`chat-content-${t}`)]})]})}}const pIe=e=>{const[r,t]=He("");return v(lt,{children:[v("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;if(s&&s.length){const o=new FormData;o.append("fileToUpload",s[0]),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:o}).then(async a=>{const l=await a.json();l&&e.onUrl&&e.onUrl(l)}).catch(a=>{console.error("upload error",a),t("upload failed: "+JSON.stringify(a))})}}}),r?v("p",{children:r}):null]})},vIe={lud16:"Bitcoin lightning address ⚡ (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class gIe extends _n{constructor(t){super(t);oe(this,"saveOnChange",$n.debounce(()=>{const t=this.state.profile;Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n]=t[n].trim())}),tt.setMetadata(t)},2e3));oe(this,"setProfileAttribute",(t,n)=>{t=t.trim();const i=Object.assign({},this.state.profile);n?i[t]=n:delete i[t],this.setState({profile:i,edited:!0}),this.saveOnChange()});oe(this,"handleSubmit",t=>{t.preventDefault(),tt.setMetadata(this.state.profile);const n=de.toNostrBech32Address(de.getPubKey(),"npub");xr("/"+n)});oe(this,"handleAddField",t=>{t.preventDefault();const n=this.state.newFieldName,i=this.state.newFieldValue;n&&i&&(this.setProfileAttribute(n,i),this.setState({newFieldName:"",newFieldValue:""}),tt.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){tt.getProfile(de.getPubKey(),t=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete t.created_at,this.setState({profile:t}))})}render(){const t=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(n=>{t.includes(n)||t.push(n)}),v(lt,{children:[v(El,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container prose",children:[v("h3",{children:he("edit_profile")}),v("form",{onSubmit:n=>this.handleSubmit(n),children:[t.map(n=>{const i=this.state.profile[n],s=typeof i=="string"||typeof i>"u";return v("p",{children:[v("label",{htmlFor:n,children:[vIe[n]||n,":"]}),v("br",{}),v("input",{className:"input w-full",type:"text",id:n,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:o=>s&&this.setProfileAttribute(n,o.target.value)}),n==="lud16"&&!i&&v("p",{children:v("small",{children:he("install_lightning_wallet_prompt")})}),n==="picture"||n==="banner"?v(lt,{children:[v("p",{children:v(pIe,{onUrl:o=>this.setProfileAttribute(n,o)})}),i&&v("p",{children:v($u,{src:i})})]}):null]})}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Save"})})]}),v("h4",{children:"Add new field"}),v("form",{onSubmit:n=>this.handleAddField(n),children:[v("p",{children:[v("label",{htmlFor:"newFieldName",children:"Field name:"}),v("br",{}),v("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",className:"input w-full",placeholder:he("field_name"),onInput:n=>this.setState({newFieldName:n.target.value})})]}),v("p",{children:[v("label",{htmlFor:"newFieldValue",children:"Field value:"}),v("br",{}),v("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",className:"input w-full",placeholder:he("field_value"),onInput:n=>this.setState({newFieldValue:n.target.value})})]}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Add new attribute"})})]})]})})]})}}const E8=xn.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;

  &:nth-child(odd) {
    background-color: var(--zebra-stripe-bg);
  }
`,a1=xn.div`
  flex: 1;
  padding: 0 10px;

  &:first-of-type {
    flex: none;
  }
`,qV=({path:e})=>{const[r,t]=He(void 0);return kt(()=>{var i;const n=(i=Ph.public)==null?void 0:i.get(e,t);return()=>n==null?void 0:n.off()}),typeof r=="object"&&r!==null?v(E8,{children:[v(a1,{children:e}),v(a1,{children:Object.keys(r).map(n=>v(qV,{path:`${e}/${n}`}))})]}):v(E8,{class:"node",children:[v(a1,{children:e}),v(a1,{children:JSON.stringify(r)})]})};function S8({path:e}){return e=e||"/",v(lt,{children:[v(El,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container",children:[v("h2",{children:[he("explorer")," ",e]}),v("div",{class:"explorer",children:v(qV,{path:e})})]})})]})}class k8{constructor(r="created_at",t="desc"){oe(this,"eventMap");oe(this,"sortedEventIds");oe(this,"sortBy");oe(this,"sortDirection");this.sortBy=r,this.sortDirection=t,this.eventMap=new Map,this.sortedEventIds=[]}compareFn(r,t){var s,o,a,l;let n,i;return!r||!t?0:r&&!t?-1:!r&&t?1:(this.sortBy==="created_at"?(n=r.created_at,i=t.created_at):this.sortBy==="likes"?(n=((s=Me.likesByMessageId.get(r.id))==null?void 0:s.size)||0,i=((o=Me.likesByMessageId.get(t.id))==null?void 0:o.size)||0):this.sortBy==="zaps"&&(n=((a=Me.zapsByNote.get(r.id))==null?void 0:a.size)||0,i=((l=Me.zapsByNote.get(t.id))==null?void 0:l.size)||0),this.sortDirection==="desc"?i-n:n-i)}has(r){return this.eventMap.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");return this.eventMap.has(r.id)?!1:(this.eventMap.set(r.id,r),this.insertEventId(r.id),!0)}delete(r){if(!this.eventMap.delete(r))return!1;const n=this.sortedEventIds.findIndex(i=>i===r);return n===-1?!1:(this.sortedEventIds.splice(n,1),!0)}get eventIds(){return this.sortedEventIds}get(r){return this.eventMap.get(r)}events(){return this.sortedEventIds.map(r=>this.eventMap.get(r))}last(){return this.eventMap.get(this.sortedEventIds[this.sortedEventIds.length-1])}first(){return this.eventMap.get(this.sortedEventIds[0])}get size(){return this.eventMap.size}insertEventId(r){const t=this.eventMap.get(r);let n=0,i=this.sortedEventIds.length;for(;n<i;){const s=Math.floor((n+i)/2),o=this.eventMap.get(this.sortedEventIds[s]);this.compareFn(t,o)<0?i=s:n=s+1}this.sortedEventIds.splice(n,0,r)}}function yIe({events:e,displayCount:r,renderAs:t,showRepliedMsg:n,openedAt:i,settings:s}){return e.slice(0,r).map(o=>v(n4,{children:v(Ko,{id:o,showRepliedMsg:n,renderAs:t,feedOpenedAt:i,showReplies:0,fullWidth:!s.showReplies},o)}))}const mIe=Ni(yIe),bIe=({settings:e,onChange:r})=>{const[t,n]=He(e);kt(()=>{n(e)},[e]);const i=()=>{const l=new URL(window.location.href);t.display==="grid"?l.searchParams.set("display","grid"):l.searchParams.delete("display"),t.showReplies===!1?l.searchParams.set("showReplies","0"):l.searchParams.delete("showReplies"),t.realtime?l.searchParams.set("realtime","1"):l.searchParams.delete("realtime"),window.history.replaceState({},document.title,l.toString())},s=()=>{r(t),i()},o=[{type:"checkbox",id:"display_realtime",checked:t.realtime,label:he("realtime"),onChange:()=>n({...t,realtime:!t.realtime})},{type:"checkbox",id:"show_replies",checked:t.showReplies,name:"show_replies",label:he("show_replies"),onChange:()=>n({...t,showReplies:!t.showReplies})}],a=[{label:he("display"),name:"display",inputs:[{value:"posts",id:"display_posts",label:he("posts")},{value:"grid",id:"display_grid",label:he("grid")}],checked:t.display,onChange:l=>n({...t,display:l.target.value})},{label:he("sort_by"),name:"sortBy",inputs:[{value:"created_at",id:"sortByTime",label:he("time")},{value:"likes",id:"sortByLikes",label:he("likes")},{value:"zaps",id:"sortByZaps",label:he("zaps")}],checked:t.sortBy,onChange:l=>n({...t,sortBy:l.target.value})},{label:he("sort_direction"),name:"ordering",inputs:[{value:"desc",id:"ordering_desc",label:"▼"},{value:"asc",id:"ordering_asc",label:"▲"}],checked:t.sortDirection,onChange:l=>n({...t,sortDirection:l.target.value})},{label:he("timespan"),name:"timespan",inputs:[{value:"all",id:"timespanAll",label:he("All time")},{value:"day",id:"timespanDay",label:he("day")},{value:"week",id:"timespanWeek",label:he("week")},{value:"month",id:"timespanMonth",label:he("month")},{value:"year",id:"timespanYear",label:he("year")}],checked:t.timespan,onChange:l=>n({...t,timespan:l.target.value})}];return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:"display:flex;flex-direction:column",children:[v("div",{children:o.map((l,u)=>v("span",{children:[v("input",{...l}),v("label",{htmlFor:l.id,children:l.label})]},u))}),a.map((l,u)=>v("div",{style:{flexDirection:"column"},children:[v("p",{children:[l.label,":"]}),v("p",{children:l.inputs.map((f,c)=>v("span",{children:[v("input",{type:"radio",name:l.name,id:f.id,value:f.value,checked:l.checked===f.value,onChange:l.onChange}),v("label",{htmlFor:f.id,children:f.label})]},c))})]},u)),v("p",{children:v(dh,{onClick:s,children:he("save")})})]})})})};function wIe({setDisplay:e,display:r,index:t}){const n=["posts","postsAndReplies","likes"].includes(t);return v("div",{className:"flex mb-px lg:mb-1",children:[v("button",{onClick:()=>{e("posts"),Re.get("settings").get("feed").get("display").put("posts")},className:`${r==="grid"?"hover:bg-neutral-900":"bg-neutral-800"} ${n?"isProfile_left":""} rounded-sm flex justify-center flex-1 p-3`,children:v(Ble,{width:24,height:24})}),v("button",{onClick:()=>{e("grid"),Re.get("settings").get("feed").get("display").put("grid")},className:`${r==="grid"?"bg-neutral-800":"hover:bg-neutral-900"} ${n?"isProfile_right":""} rounded-sm flex justify-center flex-1 p-3`,children:v(lue,{width:24,height:24})})]})}const $Ie=xn.div`
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 4px;
  @media (max-width: 1023px) {
    grid-gap: 1px;
  }
`;function _Ie({onClick:e}){return v("button",{className:"btn btn-neutral btn-sm m-4",onClick:e,children:he("show_more")})}function xIe({onClick:e}){return v("div",{className:"fixed bottom-16 md:bottom-8 justify-center items-center z-10 flex w-full md:w-1/2 pb-safe-area",children:v("div",{className:"btn btn-sm opacity-90 hover:opacity-100 hover:bg-iris-blue bg-iris-blue text-white",onClick:e,children:he("show_n_new_messages").replace("{n} ","")})})}const Ld=10;let KV=!0;const VV=function(){KV=!1,window.removeEventListener("popstate",VV)};window.addEventListener("popstate",VV);const T8={display:"posts",realtime:!1,showReplies:!1,sortBy:"created_at",sortDirection:"desc",timespan:"all"};let EIe=class extends _n{constructor(t){super(t);oe(this,"openedAt");oe(this,"subscribeRetryTimeout");oe(this,"unsub");oe(this,"unsubLoadMore");oe(this,"twoSecondsPassed");oe(this,"sortedEventMap");oe(this,"handleScroll",()=>{if(this.state.displayCount<this.state.events.length){const t=window.scrollY||document.documentElement.scrollTop,n=document.documentElement.clientHeight,i=document.documentElement.scrollHeight;t+n>=i-1e3&&(this.setState({displayCount:this.state.displayCount+Ld}),console.log("show more events",this.state.displayCount))}else if(!this.unsubLoadMore){console.log("loadMore");const t=()=>{var i;(i=this.unsubLoadMore)==null||i.call(this),this.unsubLoadMore=void 0};let n=setTimeout(t,2e3);this.unsubLoadMore=this.getEvents(i=>{console.log("got More"),this.handleEvent(i),clearTimeout(n),n=setTimeout(t,2e3)})}});oe(this,"handleScrollKeys",t=>{const n=t.key;n==="j"&&window.scrollBy({top:document.documentElement.clientHeight/2,left:0,behavior:"smooth"}),n==="k"&&window.scrollBy({top:-document.documentElement.clientHeight/2,left:0,behavior:"smooth"})});oe(this,"replaceState",$n.debounce(()=>{window.history.replaceState({...window.history.state,state:this.state},"")},1e3,{leading:!0,trailing:!0}));let n={};Re.get("settings").get("feed").once(i=>n=i),this.state={events:[],queuedEvents:[],displayCount:Ld,settings:this.getSettings(n)},this.openedAt=Math.floor(Date.now()/1e3),this.twoSecondsPassed=!1,this.sortedEventMap=new k8(this.state.settings.sortBy,this.state.settings.sortDirection)}getSettings(t={}){var i,s,o,a;let n={...T8};["global","follows"].includes(((i=this.props)==null?void 0:i.index)||"")&&(n=Object.assign(n,t)),((s=this.props)==null?void 0:s.index)!=="notifications"&&t.display&&(n.display=t.display),((o=this.props)==null?void 0:o.index)==="posts"&&(n.showReplies=!1),["postsAndReplies","notifications","likes"].includes(((a=this.props)==null?void 0:a.index)||"")&&(n.showReplies=!0);for(const l in n){const u=hr.getUrlParameter(l);u!==null&&(u==="1"||u==="0"?n[l]=u==="1":n[l]=u)}return this.props.keyword&&(n.showReplies=!0),n}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("keyup",this.handleScrollKeys),this.unsub&&this.unsub()}componentDidMount(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("keyup",this.handleScrollKeys),this.subscribe(),xV(this.state.settings,T8)&&Re.get("settings").get("feed").on(this.sub(t=>{const n=this.getSettings(t);this.setState({settings:n})}))}componentWillMount(){var t;!KV&&((t=window.history.state)!=null&&t.state)&&this.setState(window.history.state.state)}subscribe(){var t,n;(t=this.unsub)==null||t.call(this),(n=this.unsubLoadMore)==null||n.call(this),clearTimeout(this.subscribeRetryTimeout),this.startTwoSecondsTimer(),this.subscribeWithRetry(i=>this.handleEvent(i))}subscribeWithRetry(t){const n=()=>{var i,s;(i=this.unsub)==null||i.call(this),(s=this.unsubLoadMore)==null||s.call(this),this.props.index==="notifications"?this.unsub=Me.notifications.subscribe(o=>{o.forEach(a=>t(Me.db.by("id",a)))}):this.subscribeToEvents(t)};n(),this.sortedEventMap.size===0&&(this.subscribeRetryTimeout=setTimeout(n,1e3))}startTwoSecondsTimer(){this.twoSecondsPassed=!1,setTimeout(()=>{this.twoSecondsPassed=!0},2e3)}update(){const t=this.state.events,n=t[Math.min(this.state.displayCount-1,t.length-1)],i=Me.db.by("id",n),s=[];this.sortedEventMap.events().forEach(o=>{o.created_at<(i==null?void 0:i.created_at)&&s.push(o.id)}),this.updateState(s)}updateState(t){this.twoSecondsPassed&&!this.state.settings.realtime&&this.state.events.length>5?this.setState({queuedEvents:[...this.state.queuedEvents,...t]}):this.setState({events:this.sortedEventMap.eventIds,queuedEvents:[]})}handleEvent(t){this.shouldIgnoreEvent(t)||(this.sortedEventMap.add(t),this.update())}shouldIgnoreEvent(t){var i;if(this.sortedEventMap.has(t.id)||tt.isBlocked(t.pubkey))return!0;const n=Me.getEventReplyingTo(t);if(n){if(!this.state.settings.showReplies)return!0;const s=(i=Me.db.by("id",n))==null?void 0:i.pubkey;if(s&&tt.isBlocked(s))return!0}return!1}subscribeToEvents(t){var o;this.unsub=this.getEvents(t);const n=dt(de.getPubKey()),i=(o=tt.followedByUser.get(n))==null?void 0:o.size,s=Bt.subscribe({authors:[de.getPubKey()],kinds:[3]},()=>{var a;i!==((a=tt.followedByUser.get(n))==null?void 0:a.size)&&(s(),this.subscribe())})}getEvents(t){return()=>{}}componentDidUpdate(t,n){var i,s,o,a;(((i=n.settings)==null?void 0:i.showReplies)!==((s=this.state.settings)==null?void 0:s.showReplies)||((o=n.settings)==null?void 0:o.display)!==((a=this.state.settings)==null?void 0:a.display))&&this.subscribe(),this.handleScroll(),this.replaceState(),(this.props.filter!==t.filter||this.props.keyword!==t.keyword)&&(this.sortedEventMap=new k8(this.state.settings.sortBy,this.state.settings.sortDirection),this.setState({events:[]}),this.componentDidMount())}oldestEventCreatedAt(){var t;return(t=this.sortedEventMap.last())==null?void 0:t.created_at}showQueuedEvents(){this.setState({events:this.sortedEventMap.eventIds,queuedEvents:[],displayCount:Ld}),window.scrollTo(0,0)}render(){if(this.unmounted)return;const{displayCount:t,settings:n,queuedEvents:i,settingsOpen:s}=this.state,{index:o,keyword:a}=this.props,l=o!=="likes"&&!a,u=i.length>0&&!s,f=n.display==="grid"?"NoteImage":null,c=v(mIe,{events:this.state.events,displayCount:t,renderAs:f,showRepliedMsg:l,openedAt:this.openedAt,settings:n});return v("div",{className:"mb-4",children:[v(pt,{when:u,children:v(xIe,{onClick:()=>this.showQueuedEvents()})}),v(pt,{when:o!=="notifications"&&this.state.settingsOpen,children:v(bIe,{settings:n,onChange:p=>this.setState({displayCount:Ld,settings:p})})}),v(pt,{when:["global","follows"].includes(o||""),children:v("div",{className:"flex items-center mx-4 my-4",children:[v("div",{className:`btn btn-sm  mr-2 ${this.state.settings.showReplies?"btn-neutral":"btn-primary"}`,onClick:()=>this.setState({settings:{...this.state.settings,showReplies:!1}}),children:he("posts")}),v("div",{className:`btn btn-sm ${this.state.settings.showReplies?"btn-primary":"btn-neutral"}`,onClick:()=>this.setState({settings:{...this.state.settings,showReplies:!0}}),children:he("posts_and_replies")})]})}),v(pt,{when:o!=="notifications",children:v(wIe,{index:o,display:n.display,setDisplay:p=>{this.setState({displayCount:Ld,settings:{...n,display:p}}),Re.get("settings").get("feed").get("display").put(p)}})}),v(pt,{when:this.state.events.length===0,children:v("div",{className:"px-2 md:px-4 py-2",children:this.props.emptyMessage||he("no_events_yet")})}),f==="NoteImage"?v($Ie,{children:c}):c,v(pt,{when:t<this.state.events.length,children:v(_Ie,{onClick:()=>this.setState({displayCount:t+Ld})})})]})}};const SIe={all:0,day:24*60*60,week:7*24*60*60,month:30*24*60*60,year:365*24*60*60};let my=class extends EIe{addSinceUntil(r){const t=this.getSince(),n=this.oldestEventCreatedAt();return t&&(r.since=t),n&&(r.until=n),r}getSince(){if(this.state.settings.timespan!=="all")return Math.floor(Date.now()/1e3)-SIe[this.state.settings.timespan]}getCallbackForPostsIndex(r){return t=>{this.props.index==="posts"&&Me.getEventReplyingTo(t)&&!Me.isRepost(t)||r(t)}}subscribeToNostrUser(r){let t={authors:[this.props.nostrUser||""],kinds:[1,6]};return t=this.addSinceUntil(t),console.log("subscribing to nostr user",this.props.nostrUser,t),this.props.index==="likes"?(t.kinds=[7],Bt.subscribe(t,r,!1,!1)):Bt.subscribe(t,this.getCallbackForPostsIndex(r),!1,!1)}subscribeToKeyword(r){let t={keywords:[this.props.keyword.toLowerCase()],kinds:[1],limit:1e3};return t=this.addSinceUntil(t),Bt.subscribe(t,n=>{var i;return((i=n.content)==null?void 0:i.toLowerCase().includes(this.props.keyword.toLowerCase()))&&r(n)},!1)}subscribeToFollows(r){const t=de.getPubKey(),n=Array.from(tt.followedByUser.get(dt(t))||[]).map(s=>ti(s));n.push(t);let i={kinds:[1,6],limit:300};return n.length<1e3&&(i.authors=n),i=this.addSinceUntil(i),Bt.subscribe(i,s=>{(s.pubkey===t||tt.isFollowing(t,s.pubkey))&&r(s)},!0)}subscribeToGlobalFeed(r){let t={kinds:[1,6],limit:300};return t=this.addSinceUntil(t),Bt.subscribe(t,r,!0)}getEvents(r){return this.props.nostrUser?this.subscribeToNostrUser(r):this.props.keyword?this.subscribeToKeyword(r):this.props.index==="follows"?this.subscribeToFollows(r):this.subscribeToGlobalFeed(r)}};const GV=e=>{const r=`https://iris.to/${de.toNostrBech32Address(e.pub,"npub")}`;return v(Iu,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:v("div",{style:{textAlign:"center",flex:1},children:[v(t4,{data:r}),v("p",{children:v($r,{pub:e.pub})})]})})},kIe=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']],TIe=xn.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
`,IIe=xn.div`
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
`;class AIe extends _n{componentDidMount(){Re.get("noFollowers").on(this.inject()),Re.get("hasNostrFollowers").on(this.inject()),Re.get("showFollowSuggestions").on(this.inject()),Re.get("showNoIrisToAddress").on(this.inject()),Re.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return v("div",{className:"flex flex-col flex-grow px-2 py-4 md:px-4 gap-2",children:[v("p",{className:"text-base",children:he("follow_someone_info")}),kIe.map(([r,t])=>v("div",{className:"flex items-center space-x-4",children:[v(Jt,{href:`/${r}`,className:"flex flex-grow items-center space-x-2",children:[v("div",{className:"w-10 h-10",children:v(Ki,{str:r,width:40})}),v("div",{className:"flex-grow",children:[v($r,{pub:r,placeholder:"Suggested follow"}),v("p",{className:"text-sm text-gray-500",children:t})]})]}),v(Uc,{id:r})]})),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",onClick:()=>Re.get("showFollowSuggestions").put(!1),children:he("done")})}),v("p",{className:"text-base",children:[he("alternatively"),v("i",{children:" "}),v(Jt,{href:`/${de.toNostrBech32Address(de.getPubKey(),"npub")}`,className:"link",children:he("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return v(TIe,{children:[v(IIe,{onClick:()=>Re.get("noFollowers").put(!1),children:v(jz,{width:24})}),v("p",{children:he("no_followers_yet")}),v("div",{className:"flex gap-2 my-2",children:[v(qi,{className:"btn btn-neutral",text:he("copy_link"),copyStr:hr.getMyProfileLink()}),v("button",{className:"btn btn-neutral",onClick:()=>this.setState({showQrModal:!0}),children:he("show_qr_code")})]}),v("small",{children:he("no_followers_yet_info")}),this.state.showQrModal&&v(GV,{onClose:()=>this.setState({showQrModal:!1}),pub:de.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return v("div",{className:"flex flex-col gap-2 mb-2",children:[v("p",{children:"Get your own iris.to/username?"}),v("p",{className:"flex gap-2",children:[v("button",{className:"btn btn-primary",onClick:()=>xr("/settings/iris_account"),children:"Yes please"}),v("button",{className:"btn btn-neutral",onClick:()=>Re.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let r;return this.state.showFollowSuggestions?r=this.renderFollowSuggestions():this.state.showNoIrisToAddress?r=this.renderGetIrisAddress():this.state.noFollowers&&(r=this.renderNoFollowers()),r?v("div",{class:"msg",children:v("div",{class:"msg-content",children:r})}):""}}class hS extends qh{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const r=this.props.index||"msgs";return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[v(pt,{when:!this.props.keyword,children:[v(AIe,{}),v("div",{className:"hidden md:block px-4",children:v(sx,{autofocus:!1,placeholder:he("whats_on_your_mind")})})]}),v(my,{keyword:this.props.keyword,index:this.props.index,path:r},this.props.index||"feed")]})})}}const OIe=Ni(({hexKey:e})=>{var t;const r=de.toNostrBech32Address(e,"npub")||"";return v("div",{className:"flex w-full",children:[v(Jt,{href:`/${r}`,className:"flex flex-1 gap-4",children:[v(Ki,{str:r,width:49}),v("div",{children:[v($r,{pub:r}),v("br",{}),v("span",{className:"text-neutral-500 text-sm",children:[((t=tt.followersByUser.get(dt(e)))==null?void 0:t.size)||0,v("i",{children:" "}),"followers"]})]})]}),e!==de.getPubKey()&&v(Uc,{id:r})]},r)});class I8 extends qh{constructor(){super();oe(this,"follows");oe(this,"myPub");oe(this,"updateSortedFollows",C_(()=>{const t=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),n=Array.from(this.follows).sort(t);this.setState({follows:n})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(t,n){var o,a;const i=(o=tt.profiles.get(dt(t)))==null?void 0:o.name,s=(a=tt.profiles.get(dt(n)))==null?void 0:a.name;return!i&&!s?t.localeCompare(n):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(t,n){const i=tt.followDistanceByUser.get(dt(t)),s=tt.followDistanceByUser.get(dt(n));return i===s?this.sortByName(t,n):i===void 0?1:s===void 0||i<s?-1:1}getFollows(){const t=de.toNostrHexAddress(this.props.id)||"";t&&tt.getFollowedByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const t=de.toNostrHexAddress(this.props.id)||"";t&&tt.getFollowersByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=de.toNostrBech32Address(de.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),Re.get("contacts").on(this.inject()))}followAll(){confirm(`${he("follow_all")} (${this.state.follows.length})?`)&&tt.setFollowed(this.state.follows)}renderFollows(){return this.state.follows.map(t=>v(OIe,{hexKey:t}))}renderView(){const t=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return v("div",{className:"px-4 mb-4",children:[v("div",{className:"flex justify-between mb-4",children:[v("span",{className:"text-xl font-bold",children:[v("a",{className:"link",href:`/${this.props.id}`,children:v($r,{pub:this.props.id})}),":",v("i",{children:" "}),v("span",{style:{flex:1},className:"ml-1",children:this.props.followers?he("followers"):he("following")})]}),v(pt,{when:t,children:v("span",{style:"text-align: right",className:"hidden md:inline",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[he("follow_all")," (",this.state.follows.length,")"]})})})]}),v(pt,{when:t,children:v("p",{style:"text-align: right",className:"inline md:hidden",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[he("follow_all")," (",this.state.follows.length,")"]})})}),v("div",{className:"flex flex-col w-full gap-4",children:[this.renderFollows(),this.state.follows.length===0?"—":""]})]})}}function CIe(e){const[r,t]=He(""),n=de.toNostrHexAddress(r),i=de.toNostrBech32Address(r,"note"),s=de.toNostrBech32Address(r,"npub"),o=de.toNostrBech32Address(r,"nsec");return v(lt,{children:[v(El,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container mobile-padding15",children:[v("h2",{children:he("key_converter")}),v("p",{children:v("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:a=>{var l;return t((l=a.target.value)==null?void 0:l.trim())}})}),r&&n&&(r===n?v(lt,{children:[v("p",{children:[v("b",{children:"note:"})," ",i]}),v("p",{children:[v("b",{children:"npub:"})," ",s]}),v("p",{children:[v("b",{children:"nsec:"})," ",o]})]}):v("p",{children:[v("b",{children:"hex:"})," ",n]})),r&&!n&&v("p",{children:v("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const i4=2n**256n,ph=i4-0x1000003d1n,s4=i4-0x14551231950b75fc4402da1732fc9bebfn,YV=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,ZV=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,XV={p:ph,n:s4,a:0n,b:7n,Gx:YV,Gy:ZV},vh=32,A8=e=>Ct(Ct(e*e)*e+XV.b),di=(e="")=>{throw new Error(e)},ox=e=>typeof e=="bigint",JV=e=>typeof e=="string",dS=e=>ox(e)&&0n<e&&e<ph,QV=e=>ox(e)&&0n<e&&e<s4,eG=(e,r)=>!(e instanceof Uint8Array)||typeof r=="number"&&r>0&&e.length!==r?di("Uint8Array expected"):e,Qy=e=>new Uint8Array(e),o4=(e,r)=>eG(JV(e)?ax(e):Qy(e),r),Ct=(e,r=ph)=>{let t=e%r;return t>=0n?t:r+t},O8=e=>e instanceof Uo?e:di("Point expected");let C8;class Uo{constructor(r,t,n){this.px=r,this.py=t,this.pz=n}static fromAffine(r){return new Uo(r.x,r.y,1n)}static fromHex(r){r=o4(r);let t;const n=r[0],i=r.subarray(1),s=P8(i,0,vh),o=r.length;if(o===33&&[2,3].includes(n)){dS(s)||di("Point hex invalid: x not FE");let a=PIe(A8(s));const l=(a&1n)===1n;(n&1)===1!==l&&(a=Ct(-a)),t=new Uo(s,a,1n)}return o===65&&n===4&&(t=new Uo(s,P8(i,vh,2*vh),1n)),t?t.ok():di("Point is not on curve")}static fromPrivateKey(r){return Ap.mul(bA(r))}get x(){return this.aff().x}get y(){return this.aff().y}equals(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=O8(r),l=Ct(t*a),u=Ct(s*i),f=Ct(n*a),c=Ct(o*i);return l===u&&f===c}negate(){return new Uo(this.px,Ct(-this.py),this.pz)}double(){return this.add(this)}add(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=O8(r),{a:l,b:u}=XV;let f=0n,c=0n,p=0n;const y=Ct(u*3n);let w=Ct(t*s),b=Ct(n*o),T=Ct(i*a),_=Ct(t+n),A=Ct(s+o);_=Ct(_*A),A=Ct(w+b),_=Ct(_-A),A=Ct(t+i);let x=Ct(s+a);return A=Ct(A*x),x=Ct(w+T),A=Ct(A-x),x=Ct(n+i),f=Ct(o+a),x=Ct(x*f),f=Ct(b+T),x=Ct(x-f),p=Ct(l*A),f=Ct(y*T),p=Ct(f+p),f=Ct(b-p),p=Ct(b+p),c=Ct(f*p),b=Ct(w+w),b=Ct(b+w),T=Ct(l*T),A=Ct(y*A),b=Ct(b+T),T=Ct(w-T),T=Ct(l*T),A=Ct(A+T),w=Ct(b*A),c=Ct(c+w),w=Ct(x*A),f=Ct(_*f),f=Ct(f-w),w=Ct(_*b),p=Ct(x*p),p=Ct(p+w),new Uo(f,c,p)}mul(r,t=!0){if(!t&&r===0n)return hw;if(QV(r)||di("invalid scalar"),this.equals(Ap))return RIe(r).p;let n=hw,i=Ap;for(let s=this;r>0n;s=s.double(),r>>=1n)r&1n?n=n.add(s):t&&(i=i.add(s));return n}mulAddQUns(r,t,n){return this.mul(t,!1).add(r.mul(n,!1)).ok()}toAffine(){const{px:r,py:t,pz:n}=this;if(this.equals(hw))return{x:0n,y:0n};if(n===1n)return{x:r,y:t};const i=rG(n);return Ct(n*i)!==1n&&di("invalid inverse"),{x:Ct(r*i),y:Ct(t*i)}}assertValidity(){const{x:r,y:t}=this.aff();return(!dS(r)||!dS(t))&&di("Point invalid: x or y"),Ct(t*t)===A8(r)?this:di("Point invalid: not on curve")}multiply(r){return this.mul(r)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(r=!0){const{x:t,y:n}=this.aff();return(r?(n&1n)===0n?"02":"03":"04")+N8(t)+(r?"":N8(n))}toRawBytes(r=!0){return ax(this.toHex(r))}}Uo.BASE=new Uo(YV,ZV,1n);Uo.ZERO=new Uo(0n,1n,0n);const{BASE:Ap,ZERO:hw}=Uo,tG=(e,r)=>e.toString(16).padStart(r,"0"),a4=e=>Array.from(e).map(r=>tG(r,2)).join(""),ax=e=>{const r=e.length;(!JV(e)||r%2)&&di("hex invalid 1");const t=Qy(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);(Number.isNaN(o)||o<0)&&di("hex invalid 2"),t[n]=o}return t},lx=e=>BigInt("0x"+(a4(e)||"0")),P8=(e,r,t)=>lx(e.slice(r,t)),l4=e=>ox(e)&&e>=0n&&e<i4?ax(tG(e,2*vh)):di("bigint expected"),N8=e=>a4(l4(e)),R8=(...e)=>{const r=Qy(e.reduce((n,i)=>n+eG(i).length,0));let t=0;return e.forEach(n=>{r.set(n,t),t+=n.length}),r},rG=(e,r=ph)=>{(e===0n||r<=0n)&&di("no inverse n="+e+" mod="+r);let t=Ct(e,r),n=r,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,l=i-s*o;n=t,t=a,i=s,s=l}return n===1n?Ct(i,r):di("no inverse")},PIe=e=>{let r=1n;for(let t=e,n=(ph+1n)/4n;n>0n;n>>=1n)n&1n&&(r=r*t%ph),t=t*t%ph;return Ct(r*r)===e?r:di("sqrt invalid")},bA=e=>(ox(e)||(e=lx(o4(e,vh))),QV(e)?e:di("private key out of range")),D8=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let dw;function nG(e){e=o4(e);const r=vh+8;(e.length<r||e.length>1024)&&di("expected proper params");const t=Ct(lx(e),s4-1n)+1n;return l4(t)}const iG={hexToBytes:ax,bytesToHex:a4,concatBytes:R8,bytesToNumberBE:lx,numberToBytesBE:l4,mod:Ct,invert:rG,hmacSha256Async:async(e,...r)=>{const t=D8();if(!t)return di("etc.hmacSha256Async not set");const n=t.subtle,i=await n.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Qy(await n.sign("HMAC",i,R8(...r)))},hmacSha256Sync:dw,hashToPrivateKey:nG,randomBytes:e=>{const r=D8();return r||di("crypto.getRandomValues must be defined"),r.getRandomValues(Qy(e))}},B8={normPrivateKeyToScalar:bA,isValidPrivateKey:e=>{try{return!!bA(e)}catch{return!1}},randomPrivateKey:()=>nG(iG.randomBytes(vh+8)),precompute(e=8,r=Ap){return r.multiply(3n),r}};Object.defineProperties(iG,{hmacSha256Sync:{configurable:!1,get(){return dw},set(e){dw||(dw=e)}}});const zf=8,NIe=()=>{const e=[],r=256/zf+1;let t=Ap,n=t;for(let i=0;i<r;i++){n=t,e.push(n);for(let s=1;s<2**(zf-1);s++)n=n.add(t),e.push(n);t=n.double()}return e},RIe=e=>{const r=C8||(C8=NIe()),t=(f,c)=>{let p=c.negate();return f?p:c};let n=hw,i=Ap;const s=1+256/zf,o=2**(zf-1),a=BigInt(2**zf-1),l=2**zf,u=BigInt(zf);for(let f=0;f<s;f++){const c=f*o;let p=Number(e&a);e>>=u,p>o&&(p-=l,e+=1n);const y=c,w=c+Math.abs(p)-1,b=f%2!==0,T=p<0;p===0?i=i.add(t(b,r[y])):n=n.add(t(T,r[w]))}return{p:n,f:i}},DIe=v(lt,{children:[v("b",{children:"End User Licence Agreement"}),v("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),v("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),v("ul",{children:[v("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),v("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),v("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),v("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),v("li",{children:"illegal content related to gambling."})]}),v("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),v("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),v("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),v("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function BIe({onAccept:e,onDecline:r}){return v("div",{class:"m-1 bg-black overflow-y-scroll absolute inset-0 pb-safe-area",children:[v("div",{className:"prose",children:DIe}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-primary",onClick:e,children:"Accept"}),v("button",{className:"btn btn-default",onClick:r,children:"Decline"})]})]})}function MIe(e){const r=e.target,t=Qt(r).val();op.indexOf(t)>=0&&(localStorage.setItem("language",t),location.reload())}const LIe=()=>v("div",{className:"flex flex-row w-full justify-center items-center",children:[v(Mz,{width:24}),v("select",{className:"input rounded-full",onChange:e=>MIe(e),value:qo,children:Object.keys(Yy).map(e=>v("option",{value:e,children:Yy[e]}))})]});class pw extends zn{constructor(){super(...arguments);oe(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const t=document.getElementById("login-form-name");t&&t.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(t){t.preventDefault();const n=await window.nostr.getPublicKey();de.login({rpub:n},this.props.fullScreen)}async onPasteKey(t){var s;const n=(s=t.target.value)==null?void 0:s.trim();if(!n.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(n)}catch{}if(!i)if(B8.isValidPrivateKey(n))i={priv:n,rpub:de.getPublicKey(n)};else try{const{data:o,prefix:a}=qT(n),l=hr.arrayToHex(o);a==="npub"?i={rpub:l}:a==="nsec"&&(i={priv:l,rpub:de.getPublicKey(l)})}catch(o){this.setState({privateKeyError:he("invalid_private_key")}),console.error(o)}i&&(await de.login(i,this.props.fullScreen),t.target.value="",hr.copyToClipboard(""))}showCreateAccount(t){t.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const t=document.getElementById("login-form-name"),n=t==null?void 0:t.value;de.loginAsNewUser(this.props.fullScreen),Re.get("showFollowSuggestions").put(!0),n&&setTimeout(()=>{tt.setMetadata({display_name:n})},100);const i=Math.floor(Date.now()/1e3);Me.notificationsSeenTime=i}onLoginFormSubmit(t){t.preventDefault(),hr.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(t){const n=t.target.value;if(n.indexOf('"priv"')!==-1||B8.isValidPrivateKey(n)||n.startsWith("nsec")||n.startsWith("npub")){this.onPasteKey(t),t.target.value="";return}this.setState({inputStyle:n.length?"text-align: center":""})}renderExistingAccountLogin(){return v(lt,{children:[v("input",{className:"rounded-full input input-bordered centered-placeholder",id:"paste-privkey",autoFocus:!0,onInput:t=>this.onPasteKey(t),placeholder:he("paste_private_key"),type:"password"}),this.state.privateKeyError&&v("p",{className:"error",children:this.state.privateKeyError})]})}render(){return v("section",{className:`flex items-center justify-center ${this.props.fullScreen?"h-screen":""}`,children:[this.state.showEula&&v(BIe,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),v("div",{className:"w-full max-w-sm",children:this.state.showSwitchAccount?v("div",{className:"text-center shadow-md rounded px-8 pt-6 pb-8 mb-4 flex gap-2 flex-col",children:[v("p",{className:"link",children:v("a",{href:"",id:"show-create-account",onClick:t=>this.showCreateAccount(t),children:he("back")})}),this.renderExistingAccountLogin()]}):v("form",{className:"shadow-md bg-black rounded px-8 pt-6 pb-8 mb-4 gap-4 flex flex-col items-center justify-center",autocomplete:"off",onSubmit:t=>this.onLoginFormSubmit(t),children:[v("img",{className:"w-20 h-20 mx-auto",src:"/img/android-chrome-192x192.png",alt:"iris"}),v("h1",{className:"text-2xl font-bold",children:"Dpeep"}),v("input",{className:"input centered-placeholder",style:this.state.inputStyle,onInput:t=>this.onNameChange(t),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:he("whats_your_name")}),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",type:"submit",children:he("new_user_go")})}),window.nostr?v("p",{className:"text-center link",children:v("a",{href:"",onClick:t=>this.nostrExtensionLogin(t),children:he("nostr_extension_login")})}):null,v("p",{className:"text-center link",children:v("a",{href:"",id:"show-existing-account-login",onClick:t=>{t.preventDefault(),this.setState({showSwitchAccount:!0})},children:he("private_key_login")})}),v(LIe,{})]})})]})}}class FIe extends pw{render(){return this.renderExistingAccountLogin()}}function jIe(e){return v("div",{className:"px-2 md:px-4 py-8 justify-center flex flex-col items-center",children:[v("div",{className:"my-4",children:he("logout_confirmation_info")}),v("div",{className:"my-4 flex flex-row gap-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>xr("/settings"),children:he("back")}),v("button",{className:"btn btn-primary",onClick:()=>Ph.logOut(),children:he("log_out")})]})]})}class M8 extends qh{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const r=de.toNostrBech32Address(this.props.id,"note");if(r&&this.props.id!==r){xr(`/${r}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(r){r.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let r;return this.props.id==="new"?r=v("div",{className:"m-2",children:v(sx,{placeholder:he("whats_on_your_mind"),forceAutofocusMobile:!0,autofocus:!0,onSubmit:()=>xr("/")})}):r=v(Ko,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),v("div",{className:"w-full",children:r})}}class HIe extends qh{constructor(){super(...arguments);oe(this,"class","public-messages-view");oe(this,"updateNotificationsLastOpened",$n.debounce(()=>{const t=Re.get("settings").get("notifications").get("saveLastOpened");t.once(n=>{var i;if(n!==!1){const s=Math.floor(Date.now()/1e3);((i=Ph.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),t.put(!1)),Re.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return v("div",{class:"centered-container",children:v(my,{index:"notifications",emptyMessage:he("no_notifications_yet")},"notifications")})}}var zIe=["className","activeClass","activeClassName","path"];function pS(e){var r=e.className,t=e.activeClass,n=e.activeClassName,i=e.path,s=function(f,c){if(f==null)return{};var p,y,w={},b=Object.keys(f);for(y=0;y<b.length;y++)c.indexOf(p=b[y])>=0||(w[p]=f[p]);return w}(e,zIe),o=Ale()[0],a=i&&o.path&&HT(o.path,i,{})||HT(o.url,s.href,{}),l=s.class||r||"",u=a&&(t||n)||"";return s.class=l+(l&&u&&" ")+u,Qe(Jt,s)}class UIe extends r4{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=he("report_public"),this.actionDone=he("reported"),this.hoverAction=he("unreport")}onClick(r){r.preventDefault();const t=!this.state[this.key];if(confirm(t?"Publicly report this user?":"Unreport user?")){const n=de.toNostrHexAddress(this.props.id);n&&tt.flag(n,t)}}componentDidMount(){tt.getFlaggedUsers(r=>{const t=de.toNostrHexAddress(this.props.id),n=t&&(r==null?void 0:r.has(t));this.setState({reported:n})})}}const WIe=({hexPub:e,npub:r,rawDataJson:t,isMyProfile:n})=>{async function i(a){a.preventDefault(),xr("/"),de.login({rpub:e})}const[s,o]=He(!1);return v(lt,{children:[v(NV,{children:[v(qi,{className:"btn btn-sm",text:he("copy_link"),copyStr:window.location.href},`${e}copyLink`),v(qi,{className:"btn btn-sm",text:he("copy_user_ID"),copyStr:r},`${e}copyNpub`),v("button",{className:"btn btn-sm",onClick:()=>o(!0),children:he("show_qr_code")}),v(qi,{className:"btn btn-sm",text:he("copy_raw_data"),copyStr:t},`${e}copyData`),v(pt,{when:!n&&!de.getPrivKey(),children:v("button",{className:"btn btn-sm",onClick:i,children:[he("view_as")+" ",v($r,{pub:e,hideBadge:!0})]})}),v(pt,{when:!n,children:v(lt,{children:[v(r4,{className:"btn btn-sm",id:e}),v(UIe,{className:"btn btn-sm",id:e})]})})]}),v(pt,{when:s,children:v(GV,{pub:e,onClose:()=>o(!1)})})]})},qIe=({picture:e,onError:r})=>{const[t,n]=He(!1),i=()=>{n(!0)},s=()=>{n(!1)};return e?v("div",{className:"rounded-full border-4 border-black",children:[v($u,{width:128,square:!0,className:"rounded-full cursor-pointer",src:e,onError:r,onClick:i}),t&&v(Iu,{centerVertically:!0,onClose:s,children:v($u,{className:"max-w-full max-h-[90vh]",square:!0,src:e,onError:r})})]}):null},KIe=({hexPub:e})=>{const[r,t]=He({showTrustsList:!1,trusted:!1,showDistrustsList:!1,distrusted:!1,renderTrustScore:"",renderDistrustScore:"",processing:!1}),n=ix(dt(e));kt(()=>{var u;if(!n)return;const o=(u=n.vertice)==null?void 0:u.score;if(!o)return;let a=o.isDirectTrusted(),l=o.isDirectDistrusted();t(f=>({...f,trusted:a,distrusted:l,renderTrustScore:a?o.renderTrustCount():"",renderDistrustScore:l?o.renderDistrustCount():"",processing:!1}))},[n]);function i(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!r.trusted,distrusted:!1,processing:!0}),(async()=>{let a=r.trusted?0:1;await er.publishTrust(e,a,au.Key)})()}function s(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!1,distrusted:!r.distrusted,processing:!0}),(async()=>{let a=r.distrusted?0:-1;await er.publishTrust(e,a,au.Key)})()}return v(lt,{children:v("div",{className:"flex-1 flex gap-4",children:[v("a",{className:`msg-btn trust-btn ${r.trusted?"trusted":""} cursor-pointer`,onClick:o=>i(o),title:r.trusted?"Trusted":"Trust",children:r.trusted?v(b$,{size:24,fill:"green",stroke:"currentColor"}):v(b$,{size:24,fill:"none",stroke:"currentColor"})}),v("a",{className:`msg-btn trust-btn ${r.distrusted?"distrusted":""} cursor-pointer`,onClick:o=>s(o),title:r.distrusted?"Distrusted":"Distrust",children:r.distrusted?v(m$,{size:24,fill:"red",stroke:"currentColor"}):v(m$,{size:24,fill:"none",stroke:"currentColor"})})]})})},em=(e,r=["red","grey","green"])=>r[e+1],VIe=(e,r=!1)=>!e||!r&&!e.hasTrustScore()?null:e.trusts.join("/"),GIe=(e,r=!1)=>!e||!r&&!e.hasDistrustScore()?null:e.distrusts.join("/"),sG=(e,r,t=!1)=>!e||!t&&!e.hasTrustScore()?null:v("a",{href:`/graph/${r}/key/in/trust/path`,className:"cursor-pointer hover:underline",title:"Trusts at degree 0/1/2",children:[VIe(e,t)," ",v("span",{className:"text-neutral-500",children:"Trusts"})]}),oG=(e,r,t=!1)=>!e||!t&&!e.hasDistrustScore()?null:v("a",{href:`/graph/${r}/key/in/distrust/path`,className:"cursor-pointer hover:underline",title:"Distrusts at degree 0/1/2",children:[GIe(e,t)," ",v("span",{className:"text-neutral-500",children:"Distrusts"})]}),YIe=({hexPub:e})=>{const[r]=He(de.toNostrBech32Address(e,"npub")),[t,n]=He(),i=ix(dt(e),void 0,"");return kt(()=>{var o;const s=(o=i.vertice)==null?void 0:o.score;s&&n(a=>({...a,score:s}))},[i]),v(lt,{children:[sG(t==null?void 0:t.score,r,!0),oG(t==null?void 0:t.score,r,!0)]})},ZIe=({address:e})=>{const[r,t]=He(0),[n,i]=He(0),[s,o]=He(0),[a,l]=He(0),[u,f]=He([]),c=de.getPubKey()===e;return kt(()=>{const p=[];fetch(`https://eu.rbr.bio/${e}/info.json`).then(w=>{w.ok&&w.json().then(b=>{var T;b&&(l((T=b.following)==null?void 0:T.length),o(b.followerCount))})});const y=C_(w=>{const b=new Set;for(const T of w)tt.getFollowDistance(T)===1&&b.add(T);f(Array.from(b))},1e3);return setTimeout(()=>{p.push(tt.getFollowersByUser(e,w=>{i(w.size),y(w)})),p.push(tt.getFollowedByUser(e,w=>t(w.size)))},1e3),()=>{p.forEach(w=>w())}},[e]),v("div",{children:[v("div",{className:"text-sm flex gap-4",children:[v(Jt,{href:`/follows/${e}`,children:[v("b",{children:Math.max(r,a)}),v("span",{className:"text-neutral-500",children:[" ",he("following")]})]}),v(Jt,{href:`/followers/${e}`,children:[v("b",{children:Math.max(n,s)}),v("span",{className:"text-neutral-500",children:[" ",he("followers")]})]}),v(YIe,{hexPub:e})]}),v(pt,{when:!c&&u.length>0,children:v("div",{className:"text-neutral-500",children:v("small",{children:["Followed by"," ",u.slice(0,3).map((p,y)=>v("span",{children:[v(pt,{when:y>0,children:", "}),v(Jt,{className:"hover:underline",href:`/${de.toNostrBech32Address(p,"npub")}`,children:v($r,{pub:p,hideBadge:!0})})," "]},p)),v(pt,{when:u.length>3,children:v("span",{children:[" ","and ",v("b",{children:u.length-3})," other users you follow"]})})]})})}),v(pt,{when:tt.isFollowing(e,de.getPubKey()),children:v("div",{className:"text-neutral-500",children:v("small",{children:he("follows_you")})})})]})},XIe=Ni(ZIe),JIe=e=>{var C;const{hexPub:r,npub:t}=e,[n,i]=He(tt.profiles.get(dt(r))||{}),[s,o]=He(""),[a,l]=He(""),[u,f]=He(!1),[c,p]=He(""),[y,w]=He(""),[b,T]=He(!1),[_,A]=He(!1),x=Eh((g,M)=>{const B=[];return B.push(Bt.subscribe({authors:[g],kinds:[0,3]},void 0,!1,!1)),B.push(tt.getProfile(g,L=>{if(!L)return;if(!(M&&M.endsWith("@iris.to"))&&L.nip05&&L.nip05valid){const X=L.nip05,j=X.split("@"),Z=j[0],ie=j[1];let _e;ie==="iris.to"?Z==="_"?_e="iris":_e=Z:Z==="_"?_e=ie:_e=X,p(_e),_e=window.location.pathname.replace(/[^/]+/,_e);const we=window.history.state;window.history.replaceState(we,"",_e)}let Q=L.lud16||L.lud06;Q&&!Q.startsWith("lightning:")&&(Q="lightning:"+Q),o(Q);let te="";try{const X=L.website&&(L.website.match(/^https?:\/\//)?L.website:"http://"+L.website),j=new URL(X);te=j.href.endsWith("/")?j.href.slice(0,-1):j.href}catch{te=""}l(te),i(L)},!0)),()=>{B.forEach(L=>L())}},[]);kt(()=>{const g=[],M=Me.db.findOne({kind:0,pubkey:r}),B=Me.db.findOne({kind:3,pubkey:r});M&&g.push(M),B&&g.push(B),w(JSON.stringify(g,null,2)),T(r===de.getPubKey()),x(r,c);const L=Re.get("loggedIn").on(Q=>{f(Q)}),q=tt.getBlockedUsers(Q=>{A(Q.has(r))});return()=>{q(),L()}},[r]);const I=_?v(Ki,{str:t,hidePicture:!0,width:128},`${t}avatar`):v(qIe,{picture:n.picture,onError:()=>null},`${r}picture`),O=()=>!u&&Re.get("showLoginModal").put(!0);return v("div",{children:v("div",{className:"mb-2 mx-4 md:px-4 md:mx-0 flex flex-col gap-2",children:[v("div",{className:"flex flex-row",children:[v("div",{className:n.banner?"-mt-24":"",children:I}),v("div",{className:"flex-1 justify-end items-center flex gap-2",children:[v("div",{onClick:O,children:[v("a",{href:"/graph/"+t,className:"link px-2",children:"Web of Trust"}),v(pt,{when:b,children:v("a",{className:"btn btn-sm btn-neutral",href:"/profile/edit",children:he("edit_profile")})}),v(pt,{when:!b,children:[v(Uc,{id:r},`${r}follow`),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>u&&xr(`/chat/${t}`),children:he("send_message")})]})]}),v(WIe,{hexPub:r,npub:t,rawDataJson:y,isMyProfile:b})]})]}),v("div",{className:"profile-header-stuff",children:[v("div",{className:"flex-1 profile-name",children:[v("span",{className:"text-xl",children:v($r,{pub:r})}),v(pt,{when:n.nip05&&n.nip05valid,children:[v("br",{}),v("small",{className:"text-iris-green",children:(C=n.nip05)==null?void 0:C.replace(/^_@/,"")})]})]}),v(XIe,{address:r}),v("div",{className:"py-2",children:[v("p",{className:"text-sm",children:n.about}),v("div",{className:"flex flex-1 flex-row align-center justify-center mt-4",children:[v(pt,{when:!b,children:v(KIe,{hexPub:r})}),v(pt,{when:s,children:v("div",{className:"flex-1",children:v("a",{className:"btn btn-sm btn-neutral",href:s,onClick:g=>hr.handleLightningLinkClick(g),children:["⚡ ",he("tip_lightning")]})})}),v(pt,{when:a,children:v("div",{className:"flex-1",children:v("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"link",children:a==null?void 0:a.replace(/^https?:\/\//,"")})})})]})]})]})]})},`${r}details`)};class l1 extends qh{constructor(){super();oe(this,"subscriptions");oe(this,"unsub");this.state={followedUserCount:0,followerCount:0},this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers)return v("div",{className:"msg",children:v("div",{className:"msg-content",children:[v("p",{children:["Share your profile link so ",this.state.name||"this user"," can follow you:"]}),v("p",{children:v(qi,{text:he("copy_link"),copyStr:hr.getMyProfileLink()})}),v("small",{children:he("no_followers_yet_info")})]})})}async viewAs(t){t.preventDefault(),xr("/"),de.login({rpub:this.state.hexPub})}renderTabs(){const t=window.location.pathname.split("/")[1],n=window.location.pathname,i=s=>n===s?"btn btn-sm btn-primary":"btn btn-sm btn-neutral";return v("div",{className:"flex mx-4 gap-2 mb-4 overflow-x-auto",children:[v(pS,{className:i("/"+t),href:"/"+t,children:[he("posts"),v(pt,{when:this.state.noPosts,children:" (0)"})]}),v(pS,{className:i("/"+t+"/replies"),href:"/"+t+"/replies",children:[he("posts")," & ",he("replies"),v(pt,{when:this.state.noReplies,children:" (0)"})]}),v(pS,{className:i("/"+t+"/likes"),href:"/"+t+"/likes",children:[he("likes"),v(pt,{when:this.state.noLikes,children:" (0)"})]})]})}renderTab(){return this.state.hexPub?this.props.tab==="replies"?v(my,{index:"postsAndReplies",nostrUser:this.state.hexPub},`replies${this.state.hexPub}`):this.props.tab==="likes"?v(my,{index:"likes",nostrUser:this.state.hexPub},`likes${this.state.hexPub}`):this.props.tab==="media"?v("div",{children:"TODO media message feed"}):v("div",{children:[this.getNotification(),v(my,{index:"posts",nostrUser:this.state.hexPub},`posts${this.state.hexPub}`)]}):v("div",{})}renderView(){const{hexPub:t,display_name:n,name:i,profile:s,banner:o,picture:a,blocked:l}=this.state;if(!t)return v("div",{});const u=n||i||"Profile",f=`${u} | Iris`,c=`Latest posts by ${n||i||"user"}. ${(s==null?void 0:s.about)||""}`;return v(lt,{children:[v(pt,{when:o,children:v("div",{className:"mb-4 h-48 bg-cover bg-center",style:{backgroundImage:`url(${o})`}})}),v("div",{children:[v(Sh,{children:[v("title",{children:u}),v("meta",{name:"description",content:c}),v("meta",{property:"og:type",content:"profile"}),v(pt,{when:a,children:[v("meta",{property:"og:image",content:a}),v("meta",{name:"twitter:image",content:a})]}),v("meta",{property:"og:title",content:f}),v("meta",{property:"og:description",content:c})]}),v(JIe,{npub:this.state.npub,hexPub:this.state.hexPub}),v(pt,{when:!l,children:[this.renderTabs(),this.renderTab()]})]})]})}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this),Re.get("isMyProfile").put(!1)}componentDidUpdate(t,n){var i;!n.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}loadProfile(t){const n=t===de.getPubKey();Re.get("isMyProfile").put(n),Re.get("noFollowers").on(this.inject()),this.subscriptions.push(tt.getProfile(t,i=>{let s;try{if(s=i.banner&&new URL(i.banner).toString(),!s)return;s=HK(s)?s:`https://imgproxy.iris.to/insecure/plain/${s}`,this.setState({banner:s})}catch{console.log("Invalid banner URL",i.banner)}}))}componentDidMount(){this.restoreScrollPosition();const t=this.props.id,n=de.toNostrBech32Address(t,"npub");if(Re.get("loggedIn").on(this.inject()),n&&n!==t){xr(`/${n}`,!0);return}const i=de.toNostrHexAddress(t);if(!i){let s=t;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),de.getPubKeyByNip05Address(s).then(o=>{if(o){const a=de.toNostrBech32Address(o,"npub");a&&a!==o&&(this.setState({npub:a,hexPub:o}),this.loadProfile(o))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:de.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}class QIe extends _n{onLogoutClick(r){r?xr("/logout"):Ph.logOut()}async onExtensionLoginClick(r){r.preventDefault();const t=await window.nostr.getPublicKey();de.login({rpub:t})}deleteAccount(){confirm(`${he("delete_account")}?`)&&(Me.publish({kind:0,content:JSON.stringify({deleted:!0})}),Me.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{Ph.logOut()},1e3))}render(){const r=de.getPrivKey();let t;r&&(t=Mc.nsecEncode(r));const n=de.getPubKey(),i=Mc.npubEncode(n),s=!!de.getPrivKey();return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("account")}),s?v("p",{children:[v("b",{children:he("save_backup_of_privkey_first")})," ",he("otherwise_cant_log_in_again")]}):null,v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.onLogoutClick(s),children:he("log_out")}),v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:he("switch_account")})]}),this.state.showSwitchAccount?Co`
                <p>
                  <${FIe} />
                </p>
                <p>
                  <a href="" onClick=${o=>this.onExtensionLoginClick(o)}>
                    ${he("nostr_extension_login")}
                  </a>
                </p>
              `:"",v("h3",{children:he("public_key")}),v("p",{children:v("small",{children:i})}),v("div",{className:"flex gap-2 my-2",children:[v(qi,{className:"btn btn-neutral btn-sm",copyStr:i,text:"Copy npub"}),v(qi,{className:"btn btn-neutral btn-sm",copyStr:n,text:"Copy hex"})]}),v("h3",{children:he("private_key")}),v("div",{className:"flex gap-2 my-2",children:r?v(lt,{children:[v(qi,{className:"btn btn-neutral btn-sm",copyStr:t,text:"Copy nsec"}),v(qi,{className:"btn btn-neutral btn-sm",copyStr:r,text:"Copy hex"})]}):v("p",{children:he("private_key_not_present_good")})}),r?v("p",{children:he("private_key_warning")}):"",hr.isStandalone()?v(lt,{children:[v("h3",{children:he("delete_account")}),v("p",{children:v("button",{className:"btn btn-sm btn-danger",onClick:()=>this.deleteAccount(),children:he("delete_account")})})]}):null]})})}}const eAe=()=>{const[e,r]=He(!1);return kt(()=>{var t;(t=Ph.public)==null||t.get("settings/colorScheme",()=>{}),Re.get("showConnectedRelays").on(r)},[]),v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("appearance")}),v("p",{children:[v("input",{className:"checkbox",type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:e,onChange:t=>{Re.get("showConnectedRelays").put(t.currentTarget.checked)}}),v("label",{htmlFor:"showConnectedRelays",children:[" ",he("show_connected_relays_in_header")]})]})]})})};class tAe extends _n{profileExportJson(){const r=de.getPubKey();let t=[];const n=Me.db.findOne({kind:0,pubkey:r}),i=Me.db.findOne({kind:3,pubkey:r});return n&&t.push(n),i&&t.push(i),t=JSON.stringify(t,null,2),t}async exportMyEvents(){console.log("exporting my events");const r=de.getPubKey(),t=[];let n=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await ul.db.events.where({pubkey:r}).each(i=>{t.push(i),n++}),this.setState({saveMessage:`Found ${n} events`,downloadMyEventsMessage:null}),JSON.stringify(t)}render(){return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("backup")}),v("h3",{children:he("save")}),v("p",{children:[he("profile")," & ",he("follows"),":"]}),v("p",{children:[v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:he("download")}),v(qi,{text:he("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),v("p",{children:[he("your_events"),":"]}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||he("download")})}),this.state.saveMessage&&v("p",{children:this.state.saveMessage}),this.state.saveError&&v("p",{class:"warning",children:this.state.saveError}),v("h3",{children:he("load")}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),v("p",{children:v("textarea",{className:"textarea",onInput:r=>this.import(r.target.value),placeholder:he("paste_event_json")})}),this.state.loadError&&v("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&v("p",{class:"positive",children:he("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&v(lt,{children:[v("p",{class:"positive",children:he("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(r=>v("div",{className:"profile-link-container",children:[v(Jt,{href:`/${de.toNostrBech32Address(r,"npub")}`,className:"profile-link",children:[v(Ki,{str:r,width:40}),v($r,{pub:r})]}),v(Uc,{id:r})]}))]})]})})}async onClickDownload(r,t){try{this.setState({saveMessage:null,saveError:null});const n=await t(),i="data:text/json;charset=utf-8,"+encodeURIComponent(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove()}catch(n){console.error(n),this.setState({saveError:n.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=t=>{var s;const i=(s=t.target.files)==null?void 0:s[0];if(i){const o=new FileReader;o.onload=()=>{this.import(o.result)},o.readAsText(i)}},r.click()}import(r){var t;if(!r||r.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let n=JSON.parse(r);Array.isArray(n)||(n=[n]);for(const i of n){if(!i.sig)continue;Me.publish(i);const s=de.getPubKey();if(i.pubkey===s&&i.kind===3){const o=i.tags.filter(u=>u[0]==="p").map(u=>u[1]),a=(((t=Me.db.findOne({kind:3,pubkey:s}))==null?void 0:t.tags)||[]).filter(u=>u[0]==="p").map(u=>u[1]),l=o.filter(u=>!a.includes(u));tt.setFollowed(l),this.setState({restoredFollows:l})}}this.setState({loadError:null,importedEvents:n.length})}catch(n){this.setState({loadError:n.message})}}}class rAe extends _n{constructor(){super(),this.state={settings:{}}}componentDidMount(){Re.get("settings").on(this.inject())}render(){const r=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],t=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("content")}),v("h3",{children:he("notes")}),r.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>Re.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n)),v("h3",{children:he("media")}),t.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>Re.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n))]})})}}class nAe extends _n{render(){const r=(n,i,s)=>v("p",{children:[v("input",{type:"checkbox",id:n,checked:this.state[n]===void 0?s:this.state[n],onChange:o=>{const a=o.target.checked;Re.get("dev").get(n).put(a)}}),v("label",{htmlFor:n,children:i})]}),t=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexed03",label:"Use central index server for kinds 0 and 3",defaultValue:!0},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:"Developer"}),v("p",{children:"Settings intended for Dpeep developers."}),t.map(({key:n,label:i,defaultValue:s})=>r(n,i,s))]})})}componentDidMount(){Re.get("dev").on(this.sub(r=>this.setState(r)))}}class iAe extends _n{constructor(){super(...arguments);oe(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});oe(this,"checkAvailabilityFromAPI",$n.debounce(async t=>{const n=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(t)}`);if(t===this.state.newUserName)if(n.status<500){const i=await n.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(t,n=!0){return v(lt,{children:[v("p",{children:["Username: ",v("b",{children:t})]}),v("p",{children:["Short link:"," ",n?v("a",{href:`https://iris.to/${t}`,onClick:i=>{i.preventDefault(),xr(`/${t}`)},children:["iris.to/",t]}):v(lt,{children:["iris.to/",t]})]}),v("p",{children:["Nostr address (nip05): ",v("b",{children:[t,"@iris.to"]})]})]})}render(){let t;if(this.state.irisToActive){const n=this.state.profile.nip05.split("@")[0];t=this.renderAccountName(n)}else this.state.existing&&this.state.existing.confirmed?t=v("div",{children:[v("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),v("p",{children:v(dh,{onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?t=v("div",{children:[v("p",{className:"text-iris-green",children:["Username iris.to/",v("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),v("p",{children:v(dh,{onClick:()=>this.enableReserved(),children:"Yes please"})}),v("p",{children:v(dh,{onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?t=v("div",{className:"text-iris-red",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=n=>this.register(n),t=v(lt,{children:[v("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),v("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):t=v("div",{children:[v("p",{children:"Register an Iris username (iris.to/username)"}),v("form",{onSubmit:n=>this.showChallenge(n),children:[v("div",{className:"flex gap-2",children:[v("input",{className:"input",type:"text",placeholder:"Username",value:this.state.newUserName,onInput:n=>this.onNewUserNameChange(n)}),v("button",{className:"btn btn-primary",type:"submit",children:"Register"})]}),v("p",{children:this.state.newUserNameValid?v(lt,{children:[v("span",{className:"text-iris-green",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):v("span",{className:"text-iris-red",children:this.state.invalidUsernameMessage})})]})]});return v(lt,{children:[v("h3",{children:"Iris.to account"}),t,v("p",{children:v("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})}async onNewUserNameChange(t){const n=t.target.value;if(n.length===0){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:""});return}if(n.length<8||n.length>15){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 8 and 15 characters"});return}if(!n.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:n,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(n)}showChallenge(t){t.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(t){console.log("register",t);const n=de.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};i.id=Me.getEventHash(i),i.sig=await de.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:t})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(o=>{this.setState({error:o.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const t=this.state.existing.name+"@iris.to",n=setTimeout(()=>{tt.setMetadata({nip05:t})},2e3);tt.getProfile(de.getPubKey(),i=>{i&&(clearTimeout(n),i.nip05!==t&&(i.nip05=t,tt.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const t=de.getPubKey(),n={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Me.getEventHash(n),n.sig=await de.sign(n);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});Re.get("showNoIrisToAddress").put(!1),Re.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const t=de.getPubKey(),n={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Me.getEventHash(n),n.sig=await de.sign(n);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const t=de.getPubKey();tt.getProfile(t,n=>{const i=n&&n.nip05&&n.nip05valid&&n.nip05.endsWith("@iris.to");this.setState({profile:n,irisToActive:i}),n&&!i&&this.checkExistingAccount(t)},!0),this.checkExistingAccount(t)}async checkExistingAccount(t){const n=await fetch(`https://api.iris.to/user/find?public_key=${t}`);if(n.status===200){const i=await n.json();this.setState({existing:i})}}}const sAe=()=>v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("language")}),v("div",{class:"centered-container",children:Object.keys(Yy).map(e=>{let r;return e==qo?r=v("input",{type:"radio",name:"language",id:e,onChange:t=>L8(t),value:e,checked:!0}):r=v("input",{type:"radio",name:"language",id:e,onChange:t=>L8(t),value:e}),v(lt,{children:[r,v("label",{for:e,children:[" ",Yy[e]]}),v("br",{})]},e)})})]})});function L8(e){const r=e.target.value;op.indexOf(r)>=0&&(localStorage.setItem("language",r),location.reload())}const oAe=()=>{const[e,r]=He(Array.from(an.relays.values())),[t,n]=He([]),[i,s]=He("");kt(()=>{const c=setInterval(()=>{r(Array.from(an.relays.values()))},2e3);return()=>clearInterval(c)}),kt(()=>{n(an.getPopularRelays())},[]);const o=c=>{Re.get("relays").get(c.url).put(null),an.remove(c.url)},a=c=>c.includes("://")?c:`wss://${c}`,l=(c,p)=>{const y=a(p);Re.get("relays").get(y).put({enabled:!0,newRelayUrlWithProtocol:y}),c.preventDefault(),an.add(y),s("")},u=c=>{try{return Bt.relayPool.relayByUrl.get(c.url).status}catch{return 3}},f=c=>{switch(u(c)){case 0:return"text-iris-yellow";case 1:return"text-iris-green";case 2:return"text-iris-yellow";case 3:return"";default:return"status"}};return v("div",{className:"centered-container",children:[v("h2",{children:he("network")}),v("div",{className:"flex flex-col gap-2",children:[e.map(c=>v("div",{className:"flex gap-2 flex-row peer",children:[v("div",{className:"flex-1",children:[v("span",{className:f(c),children:"⬤ "}),c.url]},c.url),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>o(c),children:he("remove")}),v("input",{className:"checkbox",type:"checkbox",checked:c.enabled!==!1,onChange:()=>{c.enabled=c.enabled===!1,c.enabled?an.enable(c.url):an.disable(c.url)}})]})),v("div",{className:"flex flex-row peer gap-2",children:[v("div",{className:"flex-cell",children:v("input",{className:"input",id:"new-relay-url",type:"text",placeholder:he("new_relay_url"),value:i,onChange:c=>s(c.target.value)})},"new"),v("div",{className:"flex-cell no-flex",children:v("button",{className:"btn btn-neutral",onClick:c=>l(c,i),children:he("add")})})]}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>an.saveToContacts(),children:he("save_relays_publicly")}),v("button",{className:"btn btn-neutral",onClick:()=>an.restoreDefaults(),children:he("restore_defaults")})]})]}),v("h3",{children:he("popular_relays")}),v("div",{className:"flex flex-col gap-2",children:[v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:he("users")}),v("div",{className:"flex-grow",children:"URL"})]}),t.map(c=>v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:c.users}),v("div",{className:"flex-grow truncate",children:c.url}),v("div",{className:"flex-initial",children:v("button",{className:"btn btn-sm btn-neutral",onClick:p=>l(p,c.url),children:he("add")})})]},c.url))]})]})},aAe=()=>{const[e,r]=He("USD"),[t,n]=He(1e3);kt(()=>{Re.get("displayCurrency").on(s=>{r(s)})},[]),kt(()=>{Re.get("defaultZapAmount").on(s=>{n(s)})});const i=s=>{const a=s.target.value;Re.get("displayCurrency").put(a)};return v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("payments")}),v("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",v("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),v("p",{children:[v("label",{for:"displayCurrency",children:he("display_currency")}),v("select",{className:"select",id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[v("option",{value:"USD",children:"USD"}),v("option",{value:"EUR",children:"EUR"}),v("option",{value:"JPY",children:"JPY"}),v("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),v("p",{children:[v("label",{for:"defaultZapAmount",children:[he("default_zap_amount")," (sats):"]}),v("input",{className:"input",type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:t,onChange:s=>{Re.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class lAe extends _n{constructor(){super();oe(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let t=!1;const n=this.state.blockedUsers.map(s=>{const o=de.toNostrBech32Address(s,"npub");if(o)return t=!0,v("div",{children:v(Jt,{href:`/${o}`,children:v($r,{pub:s})})},s)}),i=Array.from(tt.usersByFollowDistance.entries()).slice(1);return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("social_network")}),v("h3",{children:"Stored on your device"}),v("p",{children:["Total size: ",i.reduce((s,o)=>s+o[1].size,0)," users"]}),v("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>v("div",{children:[s[0]||he("unknown"),": ",s[1].size," users"]})),v("p",{children:"Filter incoming events by follow distance:"}),v("select",{className:"select",value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const o=s.target;Re.get("globalFilter").get("maxFollowDistance").put(parseInt(o.value))},children:[v("option",{value:"0",children:"Off"}),v("option",{value:"1",children:"1"}),v("option",{value:"2",children:"2"}),v("option",{value:"3",children:"3"}),v("option",{value:"4",children:"4"}),v("option",{value:"5",children:"5"}),v("option",{value:"6",children:"6"})]}),v("p",{children:"Minimum number of followers at maximum follow distance:"}),v("input",{className:"input",type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||Me.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const o=s.target;Re.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(o.value))}}),v("h3",{children:he("blocked_users")}),!t&&he("none"),v("p",{children:v("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?he("hide"):he("show")," ",n.length]})}),this.state.showBlockedUsers&&n]})})}componentDidMount(){tt.getBlockedUsers(t=>{this.setState({blockedUsers:Array.from(t)})}),Re.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class uAe extends _n{constructor(){super();oe(this,"content","");oe(this,"pages",{account:QIe,network:oAe,appearance:eAe,language:sAe,content:rAe,payments:aAe,backup:tAe,social_network:lAe,iris_account:iAe,dev:nAe});this.content="home"}render(){const t=this.pages[this.props.id]||this.pages.account;return v("div",{className:"prose",children:v(t,{})})}}const vw={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(vw.iris_account="iris.to");class cAe extends _n{menuLinkClicked(r,t){t.preventDefault(),Re.get("toggleSettingsMenu").put(!1),Re.get("scrollUp").put(!0),xr(`/settings/${r}`)}render(){const r=this.props.activePage||"account";return v("div",{className:`flex-col w-full md:w-48 flex-shrink-0 ${this.props.activePage?"hidden md:flex":"flex"}`,children:Object.keys(vw).map(t=>{if(vw[t])return v("a",{href:"#",className:`btn inline-flex w-auto flex items-center p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900 ${r===t&&window.innerWidth>624?"active":""}`,onClick:n=>this.menuLinkClicked(t,n),children:[v("span",{class:"text",children:he(vw[t])}),v(pt,{when:t==="language",children:v(Mz,{width:16})})]},t)})})}}const fAe=e=>v(lt,{children:[v(El,{}),v("div",{className:"flex flex-row px-2 md:px-0",children:[v(cAe,{activePage:e.page}),v("div",{className:e.page?"":"hidden md:flex",children:v(uAe,{id:e.page})})]})]});class hAe extends _n{render(){return v(lt,{children:[v(El,{}),v("div",{className:"main-view",id:"settings",children:v("div",{className:"centered-container mobile-padding15",children:[v("h2",{children:he("subscribe")}),v("h3",{children:"Iris Supporter"}),v("p",{children:"Support open source development and get extra features!"}),v("p",{children:v("ul",{children:[v("li",{children:"Iris Supporter Badge"}),v("li",{children:"Purple checkmark on Iris"}),v("li",{children:"High-quality automatic translations (via deepl.com)"}),v("li",{children:"Iris Supporters' private group chat"}),v("li",{children:"More features to come!"})]})}),v("p",{children:[v("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),v("label",{htmlFor:"subscription_annually",children:[v("b",{children:"8 € / month"})," charged annually (96 € / year)"]})]}),v("p",{children:[v("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),v("label",{htmlFor:"subscription_monthly",children:[v("b",{children:"10 € / month"})," charged monthly (120 € / year)"]})]}),v("p",{children:v(dh,{children:"Subscribe"})}),v("h3",{children:"Iris Titan"}),v("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",v("ul",{children:[v("li",{children:"Iris Titan Badge"}),v("li",{children:"Iris Titans private group chat"}),v("li",{children:"Priority support"})]})]}),v("p",{children:[v("b",{children:"1000 €"})," one-time payment."]}),v("p",{children:v(dh,{children:"Subscribe"})}),v("br",{}),v("br",{})]})})]})}}class dAe extends qh{constructor(){super(),this.class="public-messages-view"}renderView(){return Co`
      <div id="message-list" class="centered-container">
        <${jm} standalone=${!0} showFiles=${!0} torrentId=${this.props.id} />
      </div>
    `}}function pAe(){return kt(()=>{let e=de.getPubKey();return e&&er.init(e),()=>{}},[]),null}const vAe=e=>{switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"Yes":"No";case"object":return e instanceof Date?e.toLocaleDateString():e===null?"null":Array.isArray(e)?"Array["+e.length+"]":"Object";case"undefined":return"undefined";case"function":return"function";case"symbol":return e.toString();case"bigint":return e.toString()+"n";default:return"Unknown type"}},gw=({data:e,title:r})=>v("div",{className:"flex flex-col border-2 rounded-lg border-white p-4",children:[v("div",{className:"px-4 py-2 text-left text-lg font-semibold",children:r}),e==null?void 0:e.map(t=>v("div",{className:"flex justify-between p-2",children:[v("span",{className:"whitespace-nowrap",children:t.name})," ",v("span",{className:"flex-grow text-right",children:vAe(t.value)})]}))]}),gAe=["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9","npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a","npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh"],Bo="npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m",Mo="npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",pa="npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m",Lo="npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk",Hm="npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p",Pv="npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8",zm="npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6",Um="npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",F8=[{from:Bo,to:Mo,val:1},{from:Bo,to:pa,val:1},{from:Bo,to:Lo,val:1},{from:Bo,to:Hm,val:1},{from:Bo,to:Pv,val:1},{from:Bo,to:zm,val:1},{from:Bo,to:Um,val:1}],j8=[{from:Mo,to:Bo,val:1},{from:Mo,to:pa,val:1},{from:Mo,to:Lo,val:1},{from:Mo,to:Hm,val:1},{from:Mo,to:Pv,val:1},{from:Mo,to:zm,val:1},{from:Mo,to:Um,val:1}],H8=[{from:pa,to:Bo,val:1},{from:pa,to:Mo,val:1},{from:pa,to:Lo,val:1},{from:pa,to:Hm,val:1},{from:pa,to:Pv,val:1},{from:pa,to:zm,val:1},{from:pa,to:Um,val:1}],z8=[{from:Lo,to:Bo,val:-1},{from:Lo,to:Mo,val:-1},{from:Lo,to:pa,val:-1},{from:Lo,to:Hm,val:-1},{from:Lo,to:Pv,val:-1},{from:Lo,to:zm,val:1},{from:Lo,to:Um,val:1}],yAe=[{from:Pv,to:Bo,val:-1}];function ha(e){let{from:r,to:t}=e;return r=de.toNostrHexAddress(r),t=de.toNostrHexAddress(t),er.setTrust({...e,from:r,to:t},!0)}function da(e,r,t){return{from:e,to:r,val:t,entityType:1,context:"nostr",note:"",timestamp:ewe()}}function Kl(e){Object.values(e).forEach(r=>{ha(da(r.from,r.to,r.val))})}const mAe=e=>{const[r,t]=He(null),[n]=He([]),i=de.toNostrHexAddress(e.id)||de.getPubKey(),s=de.toNostrBech32Address(i,"npub");kt(()=>(er.whenReady(()=>{Lr.getProfiles(gAe,x=>{let I={};x.forEach(g=>{I[dt(g.key)]=g});let O=Object.values(er.g.edges).length,C=Object.values(er.g.vertices).length;t(g=>({...g,profiles:x,profileIndex:I,edgesCount:O,nodesCount:C}))}).then(x=>n.push(x))}),()=>{n.forEach(x=>x==null?void 0:x())}),[i]);function o(){let x=Object.values(er.g.edges).length,I=Object.values(er.g.vertices).length,O=Object.values(tt.profiles);er.processGraph=!0,er.processScore(),t(C=>({...C,profiles:O,edgesCount:x,nodesCount:I}))}const a=x=>{x.preventDefault(),tt.profiles=new Map,o()},l=x=>{x.preventDefault(),er.g.vertices={},er.g.edges={},o()},u=x=>{Y1e()},f=x=>{x.preventDefault(),u(),l(x),a(x)},c=x=>{x.preventDefault(),ha(da(i,Bo,1)),Kl(F8),o()},p=x=>{x.preventDefault(),ha(da(i,pa,1)),Kl(H8),o()},y=x=>{x.preventDefault(),ha(da(i,Lo,1)),Kl(z8),o()},w=x=>{x.preventDefault(),ha(da(i,Mo,1)),Kl(j8),o()},b=x=>{x.preventDefault(),ha(da(i,Mo,1)),ha(da(i,Lo,1)),ha(da(i,Hm,1)),ha(da(i,Pv,1)),ha(da(i,zm,1)),ha(da(i,Um,1)),Kl(F8),Kl(H8),Kl(z8),Kl(j8),Kl(yAe),o()},T=()=>{if(!(r!=null&&r.profiles))return;let x=r.profiles.map(I=>({name:I.name,value:de.toNostrBech32Address(I.key,"npub")}));return v(gw,{data:x,title:"Profiles"})},_=()=>{if(!(r!=null&&r.edges))return;let x=r.edges.map(I=>{var O,C;return{name:I.key,value:`${(O=I.out)==null?void 0:O.id} -- ${I.val} --> ${(C=I.in)==null?void 0:C.id}`}});return v(gw,{data:x,title:"Edges"})},A=()=>{let x=[{name:"Profiles",value:r==null?void 0:r.profiles.length},{name:"Vertices",value:r==null?void 0:r.nodesCount},{name:"Edges",value:r==null?void 0:r.edgesCount}];return v(gw,{data:x,title:"Overview"})};return v(lt,{children:[v(El,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${s}`,children:v($r,{pub:s})}),v("span",{style:{flex:1},className:"ml-1",children:"Test Data"})]})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),"All trust data generated is solely for testing and will not be submitted to the relays. The profiles used are exclusively for demonstration purposes and do not reflect any real-life trust situations.",v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:[v(Pf,{className:"btn btn-sm",onClick:c,children:"Create Jack Graph"}),v(Pf,{className:"btn btn-sm",onClick:p,children:"Create Saylor Graph"}),v(Pf,{className:"btn btn-sm",onClick:y,children:"Create Saylor Graph"}),v(Pf,{className:"btn btn-sm",onClick:w,children:"Create Lyn Graph"}),v(Pf,{className:"btn btn-sm",onClick:b,children:"Create All Graphs"}),v(Pf,{className:"btn btn-sm",onClick:f,children:"Reset All"})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex",children:[v("div",{className:"flex flex-1 gap-4",children:A()}),v("div",{className:"flex flex-1 gap-4",children:T()}),v("div",{className:"flex flex-1 gap-4",children:_()})]})]})},bAe=({view:e,me:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v("div",{className:"flex flex-wrap gap-4",children:[v("span",{className:"text-neutral-500",children:"View:"}),v(pt,{when:!r,children:v(Jt,{href:t({view:"path"}),className:e=="path"?n:i,children:he("Path")})}),v(Jt,{href:t({view:"graph"}),className:e=="graph"?n:i,children:he("Graph")}),v(Jt,{href:t({view:"list"}),className:e=="list"?n:i,children:he("List")})]})};let aG=!0;const lG=function(){aG=!1,window.removeEventListener("popstate",lG)};window.addEventListener("popstate",lG);const wAe=e=>{const[r,t]=He(null);let n=0;kt(()=>(window.addEventListener("scroll",i),s(),()=>{r&&r.disconnect(),window.removeEventListener("scroll",i)}),[]);let i=$n.debounce(()=>{const a=window.scrollY||document.documentElement.scrollTop,u={...window.history.state,scrollPosition:a};window.history.replaceState(u,"")},100);function s(a=!0){var f,c;const l=window.history.state,u=(f=window.history.state)==null?void 0:f.previousState;if(!aG&&l!==u)a&&o(),n||(n=(c=window.history.state)==null?void 0:c.scrollPosition),n&&window.scrollTo(0,n);else{const y={...window.history.state||{},previousState:l};window.history.replaceState(y,"")}}let o=()=>{t(new ResizeObserver(a=>{a.forEach(()=>{s(!1)})})),r==null||r.observe(document.body),setTimeout(()=>{r&&r.disconnect()},1e3)};return v(lt,{children:v("div",{children:v(n4,{children:e.children})})})},$Ae=({entitytype:e,dir:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v(pt,{when:r=="out",children:v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Subject:"}),v(Jt,{href:t({entitytype:"key"}),className:e=="key"?n:i,children:he("Profile")}),v(Jt,{href:t({entitytype:"item"}),className:e=="item"?n:i,children:he("Post")})]})})},uG=({dir:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:[he("Direction"),":"]}),v(Jt,{href:r({dir:"out"}),className:e=="out"?t:n,children:he("Outgoing")}),v(Jt,{href:r({dir:"in"}),className:e=="in"?t:n,children:he("Incoming")})]})},_Ae=({trusttype:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Value:"}),v(Jt,{href:r({trusttype:"both"}),className:e=="both"?t:n,children:he("Both")}),v(Jt,{href:r({trusttype:"trust"}),className:e=="trust"?t:n,children:he("Trust")}),v(Jt,{href:r({trusttype:"distrust"}),className:e=="distrust"?t:n,children:he("Distrust")})]})};function xAe(e,r){return!r||e.length==0?[...e]:e.filter(n=>{var s,o;let i=Lr.getDefaultProfile(n.id);return!!((s=i==null?void 0:i.name)!=null&&s.toLowerCase().includes(r.toLowerCase())||(o=i==null?void 0:i.display_name)!=null&&o.toLowerCase().includes(r.toLowerCase()))})}function EAe(e,r){return e.degree<r.degree?-1:e.degree>r.degree?1:0}const cG=(e,r,t=!0)=>!e||!r?null:v("div",{className:"text-sm flex flex-2 gap-2",children:[sG(e,r,t),oG(e,r,t)]}),SAe=({props:e})=>{const[r,t]=He([]),[n,i]=He([]),[s]=He([]);kt(()=>{let u=dt(e.hexKey);if(!u)return;let f=Gee(e.entitytype,1),c=D0t(e.trusttype,void 0);return o(u,e.dir,f,c),()=>{s.forEach(p=>p==null?void 0:p())}},[e.npub,e.dir,e.entitytype,e.trusttype]),kt(()=>{let u=xAe(r,e.filter);u.length==0&&n.length==0||i(u)},[e.filter,r]);async function o(u,f,c,p){let y=[];f=="out"&&(y=er.g.outTrustById(u,c,p)),e.dir=="in"&&(y=er.g.trustedBy(u,au.Key,p));let w=y.map(T=>ti(T.id)),b=await Lr.getProfiles(w,T=>{});s.push(b),y=y.sort(EAe),t(y)}const a=()=>{let u=dt(e.hexKey);return n.length==0?v("div",{className:"text-center",children:he("No results")}):v(lt,{children:n.map(f=>l(f,u))})},l=(u,f)=>{const c=ti(u.id),p=u.degree,y=u.score,w=de.toNostrBech32Address(c,"npub");let b="",T="";if(e.dir=="in"){const _=u.out[f];_&&(b=`text-${em(_.val)}-500 text-2xl`,T="←")}else{const _=u.in[f];_&&(b=`text-${em(_.val)}-500 text-2xl`,T="→")}return v("div",{className:"flex w-full py-2",children:[v("div",{className:"flex-0 self-center px-4",children:v("i",{className:b,children:T})}),v(Jt,{href:e.setSearch({npub:w}),className:"flex flex-1 gap-2",children:[v(Ki,{str:w,width:49}),v("div",{children:[v($r,{pub:w,hexKey:c}),v("br",{}),v("span",{className:"text-sm",children:["Degree ",p]})]})]}),cG(y,w)]},c)};return e.npub?v(lt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(uG,{dir:e.dir,setSearch:e.setSearch}),v(_Ae,{trusttype:e.trusttype,setSearch:e.setSearch}),v($Ae,{entitytype:e.entitytype,dir:e.dir,setSearch:e.setSearch})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-col w-full gap-4",children:v(wAe,{children:a()})})]}):null};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function ux(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var U8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w$={},kAe={get exports(){return w$},set exports(e){w$=e}},wA={},TAe={get exports(){return wA},set exports(e){wA=e}},$A={},IAe={get exports(){return $A},set exports(e){$A=e}},u1=function(e){return e&&e.Math==Math&&e},En=u1(typeof globalThis=="object"&&globalThis)||u1(typeof window=="object"&&window)||u1(typeof self=="object"&&self)||u1(typeof U8=="object"&&U8)||function(){return this}()||Function("return this")(),kr=function(e){try{return!!e()}catch{return!0}},AAe=kr,Wm=!AAe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),OAe=Wm,fG=Function.prototype,W8=fG.apply,q8=fG.call,Nv=typeof Reflect=="object"&&Reflect.apply||(OAe?q8.bind(W8):function(){return q8.apply(W8,arguments)}),hG=Wm,dG=Function.prototype,_A=dG.call,CAe=hG&&dG.bind.bind(_A,_A),Br=hG?CAe:function(e){return function(){return _A.apply(e,arguments)}},pG=Br,PAe=pG({}.toString),NAe=pG("".slice),Au=function(e){return NAe(PAe(e),8,-1)},RAe=Au,DAe=Br,u4=function(e){if(RAe(e)==="Function")return DAe(e)},xA=typeof document=="object"&&document.all,BAe=typeof xA>"u"&&xA!==void 0,vG={all:xA,IS_HTMLDDA:BAe},gG=vG,MAe=gG.all,Sn=gG.IS_HTMLDDA?function(e){return typeof e=="function"||e===MAe}:function(e){return typeof e=="function"},Kh={},LAe=kr,si=!LAe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),FAe=Wm,c1=Function.prototype.call,bi=FAe?c1.bind(c1):function(){return c1.apply(c1,arguments)},qm={},yG={}.propertyIsEnumerable,mG=Object.getOwnPropertyDescriptor,jAe=mG&&!yG.call({1:2},1);qm.f=jAe?function(r){var t=mG(this,r);return!!t&&t.enumerable}:yG;var Vh=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},HAe=Br,zAe=kr,UAe=Au,vS=Object,WAe=HAe("".split),cx=zAe(function(){return!vS("z").propertyIsEnumerable(0)})?function(e){return UAe(e)=="String"?WAe(e,""):vS(e)}:vS,Km=function(e){return e==null},qAe=Km,KAe=TypeError,Vm=function(e){if(qAe(e))throw KAe("Can't call method on "+e);return e},VAe=cx,GAe=Vm,Da=function(e){return VAe(GAe(e))},K8=Sn,bG=vG,YAe=bG.all,wi=bG.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:K8(e)||e===YAe}:function(e){return typeof e=="object"?e!==null:K8(e)},Vr={},gS=Vr,yS=En,ZAe=Sn,V8=function(e){return ZAe(e)?e:void 0},ds=function(e,r){return arguments.length<2?V8(gS[e])||V8(yS[e]):gS[e]&&gS[e][r]||yS[e]&&yS[e][r]},XAe=Br,ln=XAe({}.isPrototypeOf),Jc=typeof navigator<"u"&&String(navigator.userAgent)||"",wG=En,mS=Jc,G8=wG.process,Y8=wG.Deno,Z8=G8&&G8.versions||Y8&&Y8.version,X8=Z8&&Z8.v8,ga,$$;X8&&(ga=X8.split("."),$$=ga[0]>0&&ga[0]<4?1:+(ga[0]+ga[1]));!$$&&mS&&(ga=mS.match(/Edge\/(\d+)/),(!ga||ga[1]>=74)&&(ga=mS.match(/Chrome\/(\d+)/),ga&&($$=+ga[1])));var Rv=$$,J8=Rv,JAe=kr,Dv=!!Object.getOwnPropertySymbols&&!JAe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&J8&&J8<41}),QAe=Dv,$G=QAe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",eOe=ds,tOe=Sn,rOe=ln,nOe=$G,iOe=Object,Gm=nOe?function(e){return typeof e=="symbol"}:function(e){var r=eOe("Symbol");return tOe(r)&&rOe(r.prototype,iOe(e))},sOe=String,Bv=function(e){try{return sOe(e)}catch{return"Object"}},oOe=Sn,aOe=Bv,lOe=TypeError,Ds=function(e){if(oOe(e))return e;throw lOe(aOe(e)+" is not a function")},uOe=Ds,cOe=Km,c4=function(e,r){var t=e[r];return cOe(t)?void 0:uOe(t)},bS=bi,wS=Sn,$S=wi,fOe=TypeError,hOe=function(e,r){var t,n;if(r==="string"&&wS(t=e.toString)&&!$S(n=bS(t,e))||wS(t=e.valueOf)&&!$S(n=bS(t,e))||r!=="string"&&wS(t=e.toString)&&!$S(n=bS(t,e)))return n;throw fOe("Can't convert object to primitive value")},Wc={},dOe={get exports(){return Wc},set exports(e){Wc=e}},pOe=!0,Q8=En,vOe=Object.defineProperty,gOe=function(e,r){try{vOe(Q8,e,{value:r,configurable:!0,writable:!0})}catch{Q8[e]=r}return r},yOe=En,mOe=gOe,eM="__core-js_shared__",bOe=yOe[eM]||mOe(eM,{}),f4=bOe,tM=f4;(dOe.exports=function(e,r){return tM[e]||(tM[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var wOe=Vm,$Oe=Object,Bs=function(e){return $Oe(wOe(e))},_Oe=Br,xOe=Bs,EOe=_Oe({}.hasOwnProperty),Vn=Object.hasOwn||function(r,t){return EOe(xOe(r),t)},SOe=Br,kOe=0,TOe=Math.random(),IOe=SOe(1 .toString),fx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+IOe(++kOe+TOe,36)},AOe=En,OOe=Wc,rM=Vn,COe=fx,POe=Dv,NOe=$G,lp=AOe.Symbol,_S=OOe("wks"),ROe=NOe?lp.for||lp:lp&&lp.withoutSetter||COe,un=function(e){return rM(_S,e)||(_S[e]=POe&&rM(lp,e)?lp[e]:ROe("Symbol."+e)),_S[e]},DOe=bi,nM=wi,iM=Gm,BOe=c4,MOe=hOe,LOe=un,FOe=TypeError,jOe=LOe("toPrimitive"),HOe=function(e,r){if(!nM(e)||iM(e))return e;var t=BOe(e,jOe),n;if(t){if(r===void 0&&(r="default"),n=DOe(t,e,r),!nM(n)||iM(n))return n;throw FOe("Can't convert object to primitive value")}return r===void 0&&(r="number"),MOe(e,r)},zOe=HOe,UOe=Gm,hx=function(e){var r=zOe(e,"string");return UOe(r)?r:r+""},WOe=En,sM=wi,EA=WOe.document,qOe=sM(EA)&&sM(EA.createElement),h4=function(e){return qOe?EA.createElement(e):{}},KOe=si,VOe=kr,GOe=h4,_G=!KOe&&!VOe(function(){return Object.defineProperty(GOe("div"),"a",{get:function(){return 7}}).a!=7}),YOe=si,ZOe=bi,XOe=qm,JOe=Vh,QOe=Da,eCe=hx,tCe=Vn,rCe=_G,oM=Object.getOwnPropertyDescriptor;Kh.f=YOe?oM:function(r,t){if(r=QOe(r),t=eCe(t),rCe)try{return oM(r,t)}catch{}if(tCe(r,t))return JOe(!ZOe(XOe.f,r,t),r[t])};var nCe=kr,iCe=Sn,sCe=/#|\.prototype\./,Ym=function(e,r){var t=aCe[oCe(e)];return t==uCe?!0:t==lCe?!1:iCe(r)?nCe(r):!!r},oCe=Ym.normalize=function(e){return String(e).replace(sCe,".").toLowerCase()},aCe=Ym.data={},lCe=Ym.NATIVE="N",uCe=Ym.POLYFILL="P",xG=Ym,aM=u4,cCe=Ds,fCe=Wm,hCe=aM(aM.bind),Qc=function(e,r){return cCe(e),r===void 0?e:fCe?hCe(e,r):function(){return e.apply(r,arguments)}},so={},dCe=si,pCe=kr,EG=dCe&&pCe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),vCe=wi,gCe=String,yCe=TypeError,oo=function(e){if(vCe(e))return e;throw yCe(gCe(e)+" is not an object")},mCe=si,bCe=_G,wCe=EG,f1=oo,lM=hx,$Ce=TypeError,xS=Object.defineProperty,_Ce=Object.getOwnPropertyDescriptor,ES="enumerable",SS="configurable",kS="writable";so.f=mCe?wCe?function(r,t,n){if(f1(r),t=lM(t),f1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&kS in n&&!n[kS]){var i=_Ce(r,t);i&&i[kS]&&(r[t]=n.value,n={configurable:SS in n?n[SS]:i[SS],enumerable:ES in n?n[ES]:i[ES],writable:!1})}return xS(r,t,n)}:xS:function(r,t,n){if(f1(r),t=lM(t),f1(n),bCe)try{return xS(r,t,n)}catch{}if("get"in n||"set"in n)throw $Ce("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var xCe=si,ECe=so,SCe=Vh,Ou=xCe?function(e,r,t){return ECe.f(e,r,SCe(1,t))}:function(e,r,t){return e[r]=t,e},h1=En,kCe=Nv,TCe=u4,ICe=Sn,ACe=Kh.f,OCe=xG,Fd=Vr,CCe=Qc,jd=Ou,uM=Vn,PCe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return kCe(e,this,arguments)};return r.prototype=e.prototype,r},Nt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?h1:i?h1[t]:(h1[t]||{}).prototype,a=n?Fd:Fd[t]||jd(Fd,t,{})[t],l=a.prototype,u,f,c,p,y,w,b,T,_;for(p in r)u=OCe(n?p:t+(i?".":"#")+p,e.forced),f=!u&&o&&uM(o,p),w=a[p],f&&(e.dontCallGetSet?(_=ACe(o,p),b=_&&_.value):b=o[p]),y=f&&b?b:r[p],!(f&&typeof w==typeof y)&&(e.bind&&f?T=CCe(y,h1):e.wrap&&f?T=PCe(y):s&&ICe(y)?T=TCe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&jd(T,"sham",!0),jd(a,p,T),s&&(c=t+"Prototype",uM(Fd,c)||jd(Fd,c,{}),jd(Fd[c],p,y),e.real&&l&&(u||!l[p])&&jd(l,p,y)))},NCe=Nt,RCe=si,cM=so.f;NCe({target:"Object",stat:!0,forced:Object.defineProperty!==cM,sham:!RCe},{defineProperty:cM});var DCe=Vr,SG=DCe.Object,BCe=IAe.exports=function(r,t,n){return SG.defineProperty(r,t,n)};SG.defineProperty.sham&&(BCe.sham=!0);var MCe=$A,kG=MCe,LCe=kG,FCe=LCe,jCe=FCe,HCe=jCe;(function(e){e.exports=HCe})(TAe);(function(e){e.exports=wA})(kAe);var dx=Vt(w$),tm={},zCe={get exports(){return tm},set exports(e){tm=e}},SA={},UCe={get exports(){return SA},set exports(e){SA=e}},WCe=Au,ef=Array.isArray||function(r){return WCe(r)=="Array"},qCe=Math.ceil,KCe=Math.floor,VCe=Math.trunc||function(r){var t=+r;return(t>0?KCe:qCe)(t)},GCe=VCe,px=function(e){var r=+e;return r!==r||r===0?0:GCe(r)},YCe=px,ZCe=Math.min,XCe=function(e){return e>0?ZCe(YCe(e),9007199254740991):0},JCe=XCe,ao=function(e){return JCe(e.length)},QCe=TypeError,e5e=9007199254740991,d4=function(e){if(e>e5e)throw QCe("Maximum allowed index exceeded");return e},t5e=hx,r5e=so,n5e=Vh,Mv=function(e,r,t){var n=t5e(r);n in e?r5e.f(e,n,n5e(0,t)):e[n]=t},i5e=un,s5e=i5e("toStringTag"),TG={};TG[s5e]="z";var p4=String(TG)==="[object z]",o5e=p4,a5e=Sn,yw=Au,l5e=un,u5e=l5e("toStringTag"),c5e=Object,f5e=yw(function(){return arguments}())=="Arguments",h5e=function(e,r){try{return e[r]}catch{}},Cu=o5e?yw:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=h5e(r=c5e(e),u5e))=="string"?t:f5e?yw(r):(n=yw(r))=="Object"&&a5e(r.callee)?"Arguments":n},d5e=Br,p5e=Sn,kA=f4,v5e=d5e(Function.toString);p5e(kA.inspectSource)||(kA.inspectSource=function(e){return v5e(e)});var IG=kA.inspectSource,g5e=Br,y5e=kr,AG=Sn,m5e=Cu,b5e=ds,w5e=IG,OG=function(){},$5e=[],CG=b5e("Reflect","construct"),v4=/^\s*(?:class|function)\b/,_5e=g5e(v4.exec),x5e=!v4.exec(OG),jg=function(r){if(!AG(r))return!1;try{return CG(OG,$5e,r),!0}catch{return!1}},PG=function(r){if(!AG(r))return!1;switch(m5e(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return x5e||!!_5e(v4,w5e(r))}catch{return!0}};PG.sham=!0;var vx=!CG||y5e(function(){var e;return jg(jg.call)||!jg(Object)||!jg(function(){e=!0})||e})?PG:jg,fM=ef,E5e=vx,S5e=wi,k5e=un,T5e=k5e("species"),hM=Array,I5e=function(e){var r;return fM(e)&&(r=e.constructor,E5e(r)&&(r===hM||fM(r.prototype))?r=void 0:S5e(r)&&(r=r[T5e],r===null&&(r=void 0))),r===void 0?hM:r},A5e=I5e,gx=function(e,r){return new(A5e(e))(r===0?0:r)},O5e=kr,C5e=un,P5e=Rv,N5e=C5e("species"),Zm=function(e){return P5e>=51||!O5e(function(){var r=[],t=r.constructor={};return t[N5e]=function(){return{foo:1}},r[e](Boolean).foo!==1})},R5e=Nt,D5e=kr,B5e=ef,M5e=wi,L5e=Bs,F5e=ao,dM=d4,pM=Mv,j5e=gx,H5e=Zm,z5e=un,U5e=Rv,NG=z5e("isConcatSpreadable"),W5e=U5e>=51||!D5e(function(){var e=[];return e[NG]=!1,e.concat()[0]!==e}),q5e=function(e){if(!M5e(e))return!1;var r=e[NG];return r!==void 0?!!r:B5e(e)},K5e=!W5e||!H5e("concat");R5e({target:"Array",proto:!0,arity:1,forced:K5e},{concat:function(r){var t=L5e(this),n=j5e(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],q5e(u))for(l=F5e(u),dM(i+l),o=0;o<l;o++,i++)o in u&&pM(n,i,u[o]);else dM(i+1),pM(n,i++,u);return n.length=i,n}});var V5e=Cu,G5e=String,Sl=function(e){if(V5e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return G5e(e)},yx={},Y5e=px,Z5e=Math.max,X5e=Math.min,Xm=function(e,r){var t=Y5e(e);return t<0?Z5e(t+r,0):X5e(t,r)},J5e=Da,Q5e=Xm,e3e=ao,vM=function(e){return function(r,t,n){var i=J5e(r),s=e3e(i),o=Q5e(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},g4={includes:vM(!0),indexOf:vM(!1)},Jm={},t3e=Br,TS=Vn,r3e=Da,n3e=g4.indexOf,i3e=Jm,gM=t3e([].push),RG=function(e,r){var t=r3e(e),n=0,i=[],s;for(s in t)!TS(i3e,s)&&TS(t,s)&&gM(i,s);for(;r.length>n;)TS(t,s=r[n++])&&(~n3e(i,s)||gM(i,s));return i},y4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],s3e=RG,o3e=y4,Qm=Object.keys||function(r){return s3e(r,o3e)},a3e=si,l3e=EG,u3e=so,c3e=oo,f3e=Da,h3e=Qm;yx.f=a3e&&!l3e?Object.defineProperties:function(r,t){c3e(r);for(var n=f3e(t),i=h3e(t),s=i.length,o=0,a;s>o;)u3e.f(r,a=i[o++],n[a]);return r};var d3e=ds,DG=d3e("document","documentElement"),p3e=Wc,v3e=fx,yM=p3e("keys"),mx=function(e){return yM[e]||(yM[e]=v3e(e))},g3e=oo,y3e=yx,mM=y4,m3e=Jm,b3e=DG,w3e=h4,$3e=mx,bM=">",wM="<",TA="prototype",IA="script",BG=$3e("IE_PROTO"),IS=function(){},MG=function(e){return wM+IA+bM+e+wM+"/"+IA+bM},$M=function(e){e.write(MG("")),e.close();var r=e.parentWindow.Object;return e=null,r},_3e=function(){var e=w3e("iframe"),r="java"+IA+":",t;return e.style.display="none",b3e.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(MG("document.F=Object")),t.close(),t.F},d1,mw=function(){try{d1=new ActiveXObject("htmlfile")}catch{}mw=typeof document<"u"?document.domain&&d1?$M(d1):_3e():$M(d1);for(var e=mM.length;e--;)delete mw[TA][mM[e]];return mw()};m3e[BG]=!0;var Gh=Object.create||function(r,t){var n;return r!==null?(IS[TA]=g3e(r),n=new IS,IS[TA]=null,n[BG]=r):n=mw(),t===void 0?n:y3e.f(n,t)},eb={},x3e=RG,E3e=y4,S3e=E3e.concat("length","prototype");eb.f=Object.getOwnPropertyNames||function(r){return x3e(r,S3e)};var m4={},_M=Xm,k3e=ao,T3e=Mv,I3e=Array,A3e=Math.max,LG=function(e,r,t){for(var n=k3e(e),i=_M(r,n),s=_M(t===void 0?n:t,n),o=I3e(A3e(s-i,0)),a=0;i<s;i++,a++)T3e(o,a,e[i]);return o.length=a,o},O3e=Au,C3e=Da,FG=eb.f,P3e=LG,jG=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],N3e=function(e){try{return FG(e)}catch{return P3e(jG)}};m4.f=function(r){return jG&&O3e(r)=="Window"?N3e(r):FG(C3e(r))};var tb={};tb.f=Object.getOwnPropertySymbols;var R3e=Ou,Lv=function(e,r,t,n){return n&&n.enumerable?e[r]=t:R3e(e,r,t),e},D3e=so,b4=function(e,r,t){return D3e.f(e,r,t)},rb={},B3e=un;rb.f=B3e;var xM=Vr,M3e=Vn,L3e=rb,F3e=so.f,kn=function(e){var r=xM.Symbol||(xM.Symbol={});M3e(r,e)||F3e(r,e,{value:L3e.f(e)})},j3e=bi,H3e=ds,z3e=un,U3e=Lv,HG=function(){var e=H3e("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=z3e("toPrimitive");r&&!r[n]&&U3e(r,n,function(i){return j3e(t,this)},{arity:1})},W3e=p4,q3e=Cu,K3e=W3e?{}.toString:function(){return"[object "+q3e(this)+"]"},V3e=p4,G3e=so.f,Y3e=Ou,Z3e=Vn,X3e=K3e,J3e=un,EM=J3e("toStringTag"),Yh=function(e,r,t,n){if(e){var i=t?e:e.prototype;Z3e(i,EM)||G3e(i,EM,{configurable:!0,value:r}),n&&!V3e&&Y3e(i,"toString",X3e)}},Q3e=En,ePe=Sn,SM=Q3e.WeakMap,tPe=ePe(SM)&&/native code/.test(String(SM)),rPe=tPe,zG=En,nPe=wi,iPe=Ou,AS=Vn,OS=f4,sPe=mx,oPe=Jm,kM="Object already initialized",AA=zG.TypeError,aPe=zG.WeakMap,_$,rm,x$,lPe=function(e){return x$(e)?rm(e):_$(e,{})},uPe=function(e){return function(r){var t;if(!nPe(r)||(t=rm(r)).type!==e)throw AA("Incompatible receiver, "+e+" required");return t}};if(rPe||OS.state){var tl=OS.state||(OS.state=new aPe);tl.get=tl.get,tl.has=tl.has,tl.set=tl.set,_$=function(e,r){if(tl.has(e))throw AA(kM);return r.facade=e,tl.set(e,r),r},rm=function(e){return tl.get(e)||{}},x$=function(e){return tl.has(e)}}else{var Hd=sPe("state");oPe[Hd]=!0,_$=function(e,r){if(AS(e,Hd))throw AA(kM);return r.facade=e,iPe(e,Hd,r),r},rm=function(e){return AS(e,Hd)?e[Hd]:{}},x$=function(e){return AS(e,Hd)}}var Fv={set:_$,get:rm,has:x$,enforce:lPe,getterFor:uPe},cPe=Qc,fPe=Br,hPe=cx,dPe=Bs,pPe=ao,vPe=gx,TM=fPe([].push),fc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,f,c){for(var p=dPe(l),y=hPe(p),w=cPe(u,f),b=pPe(y),T=0,_=c||vPe,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in y)&&(x=y[T],I=w(x,T,p),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:TM(A,x)}else switch(e){case 4:return!1;case 7:TM(A,x)}return s?-1:n||i?i:A}},jv={forEach:fc(0),map:fc(1),filter:fc(2),some:fc(3),every:fc(4),find:fc(5),findIndex:fc(6),filterReject:fc(7)},bx=Nt,w4=En,$4=bi,gPe=Br,tv=si,rv=Dv,yPe=kr,pi=Vn,mPe=ln,OA=oo,wx=Da,_4=hx,bPe=Sl,CA=Vh,nm=Gh,UG=Qm,wPe=eb,WG=m4,$Pe=tb,qG=Kh,KG=so,_Pe=yx,VG=qm,IM=Lv,xPe=b4,x4=Wc,EPe=mx,GG=Jm,AM=fx,SPe=un,kPe=rb,TPe=kn,IPe=HG,APe=Yh,YG=Fv,$x=jv.forEach,Ts=EPe("hidden"),_x="Symbol",im="prototype",OPe=YG.set,OM=YG.getterFor(_x),xa=Object[im],gh=w4.Symbol,ny=gh&&gh[im],CPe=w4.TypeError,CS=w4.QObject,ZG=qG.f,Uf=KG.f,XG=WG.f,PPe=VG.f,JG=gPe([].push),_u=x4("symbols"),nb=x4("op-symbols"),NPe=x4("wks"),PA=!CS||!CS[im]||!CS[im].findChild,NA=tv&&yPe(function(){return nm(Uf({},"a",{get:function(){return Uf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=ZG(xa,r);n&&delete xa[r],Uf(e,r,t),n&&e!==xa&&Uf(xa,r,n)}:Uf,PS=function(e,r){var t=_u[e]=nm(ny);return OPe(t,{type:_x,tag:e,description:r}),tv||(t.description=r),t},xx=function(r,t,n){r===xa&&xx(nb,t,n),OA(r);var i=_4(t);return OA(n),pi(_u,i)?(n.enumerable?(pi(r,Ts)&&r[Ts][i]&&(r[Ts][i]=!1),n=nm(n,{enumerable:CA(0,!1)})):(pi(r,Ts)||Uf(r,Ts,CA(1,{})),r[Ts][i]=!0),NA(r,i,n)):Uf(r,i,n)},E4=function(r,t){OA(r);var n=wx(t),i=UG(n).concat(rY(n));return $x(i,function(s){(!tv||$4(QG,n,s))&&xx(r,s,n[s])}),r},RPe=function(r,t){return t===void 0?nm(r):E4(nm(r),t)},QG=function(r){var t=_4(r),n=$4(PPe,this,t);return this===xa&&pi(_u,t)&&!pi(nb,t)?!1:n||!pi(this,t)||!pi(_u,t)||pi(this,Ts)&&this[Ts][t]?n:!0},eY=function(r,t){var n=wx(r),i=_4(t);if(!(n===xa&&pi(_u,i)&&!pi(nb,i))){var s=ZG(n,i);return s&&pi(_u,i)&&!(pi(n,Ts)&&n[Ts][i])&&(s.enumerable=!0),s}},tY=function(r){var t=XG(wx(r)),n=[];return $x(t,function(i){!pi(_u,i)&&!pi(GG,i)&&JG(n,i)}),n},rY=function(e){var r=e===xa,t=XG(r?nb:wx(e)),n=[];return $x(t,function(i){pi(_u,i)&&(!r||pi(xa,i))&&JG(n,_u[i])}),n};rv||(gh=function(){if(mPe(ny,this))throw CPe("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:bPe(arguments[0]),t=AM(r),n=function(i){this===xa&&$4(n,nb,i),pi(this,Ts)&&pi(this[Ts],t)&&(this[Ts][t]=!1),NA(this,t,CA(1,i))};return tv&&PA&&NA(xa,t,{configurable:!0,set:n}),PS(t,r)},ny=gh[im],IM(ny,"toString",function(){return OM(this).tag}),IM(gh,"withoutSetter",function(e){return PS(AM(e),e)}),VG.f=QG,KG.f=xx,_Pe.f=E4,qG.f=eY,wPe.f=WG.f=tY,$Pe.f=rY,kPe.f=function(e){return PS(SPe(e),e)},tv&&xPe(ny,"description",{configurable:!0,get:function(){return OM(this).description}}));bx({global:!0,constructor:!0,wrap:!0,forced:!rv,sham:!rv},{Symbol:gh});$x(UG(NPe),function(e){TPe(e)});bx({target:_x,stat:!0,forced:!rv},{useSetter:function(){PA=!0},useSimple:function(){PA=!1}});bx({target:"Object",stat:!0,forced:!rv,sham:!tv},{create:RPe,defineProperty:xx,defineProperties:E4,getOwnPropertyDescriptor:eY});bx({target:"Object",stat:!0,forced:!rv},{getOwnPropertyNames:tY});IPe();APe(gh,_x);GG[Ts]=!0;var DPe=Dv,nY=DPe&&!!Symbol.for&&!!Symbol.keyFor,BPe=Nt,MPe=ds,LPe=Vn,FPe=Sl,iY=Wc,jPe=nY,NS=iY("string-to-symbol-registry"),HPe=iY("symbol-to-string-registry");BPe({target:"Symbol",stat:!0,forced:!jPe},{for:function(e){var r=FPe(e);if(LPe(NS,r))return NS[r];var t=MPe("Symbol")(r);return NS[r]=t,HPe[t]=r,t}});var zPe=Nt,UPe=Vn,WPe=Gm,qPe=Bv,KPe=Wc,VPe=nY,CM=KPe("symbol-to-string-registry");zPe({target:"Symbol",stat:!0,forced:!VPe},{keyFor:function(r){if(!WPe(r))throw TypeError(qPe(r)+" is not a symbol");if(UPe(CM,r))return CM[r]}});var GPe=Br,ib=GPe([].slice),YPe=Br,PM=ef,ZPe=Sn,NM=Au,XPe=Sl,RM=YPe([].push),JPe=function(e){if(ZPe(e))return e;if(PM(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?RM(t,i):(typeof i=="number"||NM(i)=="Number"||NM(i)=="String")&&RM(t,XPe(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(PM(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},QPe=Nt,sY=ds,oY=Nv,e4e=bi,sb=Br,aY=kr,DM=Sn,BM=Gm,lY=ib,t4e=JPe,r4e=Dv,n4e=String,Pc=sY("JSON","stringify"),p1=sb(/./.exec),MM=sb("".charAt),i4e=sb("".charCodeAt),s4e=sb("".replace),o4e=sb(1 .toString),a4e=/[\uD800-\uDFFF]/g,LM=/^[\uD800-\uDBFF]$/,FM=/^[\uDC00-\uDFFF]$/,jM=!r4e||aY(function(){var e=sY("Symbol")();return Pc([e])!="[null]"||Pc({a:e})!="{}"||Pc(Object(e))!="{}"}),HM=aY(function(){return Pc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Pc("\uDEAD")!=='"\\udead"'}),l4e=function(e,r){var t=lY(arguments),n=t4e(r);if(!(!DM(n)&&(e===void 0||BM(e))))return t[1]=function(i,s){if(DM(n)&&(s=e4e(n,this,n4e(i),s)),!BM(s))return s},oY(Pc,null,t)},u4e=function(e,r,t){var n=MM(t,r-1),i=MM(t,r+1);return p1(LM,e)&&!p1(FM,i)||p1(FM,e)&&!p1(LM,n)?"\\u"+o4e(i4e(e,0),16):e};Pc&&QPe({target:"JSON",stat:!0,arity:3,forced:jM||HM},{stringify:function(r,t,n){var i=lY(arguments),s=oY(jM?l4e:Pc,null,i);return HM&&typeof s=="string"?s4e(s,a4e,u4e):s}});var c4e=Nt,f4e=Dv,h4e=kr,uY=tb,d4e=Bs,p4e=!f4e||h4e(function(){uY.f(1)});c4e({target:"Object",stat:!0,forced:p4e},{getOwnPropertySymbols:function(r){var t=uY.f;return t?t(d4e(r)):[]}});var v4e=kn;v4e("asyncIterator");var g4e=kn;g4e("hasInstance");var y4e=kn;y4e("isConcatSpreadable");var m4e=kn;m4e("iterator");var b4e=kn;b4e("match");var w4e=kn;w4e("matchAll");var $4e=kn;$4e("replace");var _4e=kn;_4e("search");var x4e=kn;x4e("species");var E4e=kn;E4e("split");var S4e=kn,k4e=HG;S4e("toPrimitive");k4e();var T4e=ds,I4e=kn,A4e=Yh;I4e("toStringTag");A4e(T4e("Symbol"),"Symbol");var O4e=kn;O4e("unscopables");var C4e=En,P4e=Yh;P4e(C4e.JSON,"JSON",!0);var N4e=Vr,R4e=N4e.Symbol,Hv={},RA=si,D4e=Vn,cY=Function.prototype,B4e=RA&&Object.getOwnPropertyDescriptor,S4=D4e(cY,"name"),M4e=S4&&(function(){}).name==="something",L4e=S4&&(!RA||RA&&B4e(cY,"name").configurable),fY={EXISTS:S4,PROPER:M4e,CONFIGURABLE:L4e},F4e=kr,hY=!F4e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),j4e=Vn,H4e=Sn,z4e=Bs,U4e=mx,W4e=hY,zM=U4e("IE_PROTO"),DA=Object,q4e=DA.prototype,Ex=W4e?DA.getPrototypeOf:function(e){var r=z4e(e);if(j4e(r,zM))return r[zM];var t=r.constructor;return H4e(t)&&r instanceof t?t.prototype:r instanceof DA?q4e:null},K4e=kr,V4e=Sn,G4e=wi,Y4e=Gh,UM=Ex,Z4e=Lv,X4e=un,BA=X4e("iterator"),dY=!1,lu,RS,DS;[].keys&&(DS=[].keys(),"next"in DS?(RS=UM(UM(DS)),RS!==Object.prototype&&(lu=RS)):dY=!0);var J4e=!G4e(lu)||K4e(function(){var e={};return lu[BA].call(e)!==e});J4e?lu={}:lu=Y4e(lu);V4e(lu[BA])||Z4e(lu,BA,function(){return this});var pY={IteratorPrototype:lu,BUGGY_SAFARI_ITERATORS:dY},Q4e=pY.IteratorPrototype,eNe=Gh,tNe=Vh,rNe=Yh,nNe=Hv,iNe=function(){return this},sNe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=eNe(Q4e,{next:tNe(+!n,t)}),rNe(e,i,!1,!0),nNe[i]=iNe,e},oNe=Br,aNe=Ds,lNe=function(e,r,t){try{return oNe(aNe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},uNe=Sn,cNe=String,fNe=TypeError,hNe=function(e){if(typeof e=="object"||uNe(e))return e;throw fNe("Can't set "+cNe(e)+" as a prototype")},dNe=lNe,pNe=oo,vNe=hNe,vY=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=dNe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return pNe(i),vNe(s),e?t(i,s):i.__proto__=s,i}}():void 0),gNe=Nt,yNe=bi,mNe=fY,bNe=sNe,wNe=Ex,$Ne=Yh,WM=Lv,_Ne=un,qM=Hv,xNe=pY,ENe=mNe.PROPER,v1=xNe.BUGGY_SAFARI_ITERATORS,BS=_Ne("iterator"),KM="keys",g1="values",VM="entries",SNe=function(){return this},k4=function(e,r,t,n,i,s,o){bNe(t,r,n);var a=function(_){if(_===i&&p)return p;if(!v1&&_ in f)return f[_];switch(_){case KM:return function(){return new t(this,_)};case g1:return function(){return new t(this,_)};case VM:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,f=e.prototype,c=f[BS]||f["@@iterator"]||i&&f[i],p=!v1&&c||a(i),y=r=="Array"&&f.entries||c,w,b,T;if(y&&(w=wNe(y.call(new e)),w!==Object.prototype&&w.next&&($Ne(w,l,!0,!0),qM[l]=SNe)),ENe&&i==g1&&c&&c.name!==g1&&(u=!0,p=function(){return yNe(c,this)}),i)if(b={values:a(g1),keys:s?p:a(KM),entries:a(VM)},o)for(T in b)(v1||u||!(T in f))&&WM(f,T,b[T]);else gNe({target:r,proto:!0,forced:v1||u},b);return o&&f[BS]!==p&&WM(f,BS,p,{name:i}),qM[r]=p,b},T4=function(e,r){return{value:e,done:r}},kNe=Da,GM=Hv,gY=Fv;so.f;var TNe=k4,y1=T4,yY="Array Iterator",INe=gY.set,ANe=gY.getterFor(yY);TNe(Array,"Array",function(e,r){INe(this,{type:yY,target:kNe(e),index:0,kind:r})},function(){var e=ANe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,y1(void 0,!0)):t=="keys"?y1(n,!1):t=="values"?y1(r[n],!1):y1([n,r[n]],!1)},"values");GM.Arguments=GM.Array;var ONe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},CNe=ONe,PNe=En,NNe=Cu,RNe=Ou,YM=Hv,DNe=un,ZM=DNe("toStringTag");for(var MS in CNe){var XM=PNe[MS],LS=XM&&XM.prototype;LS&&NNe(LS)!==ZM&&RNe(LS,ZM,MS),YM[MS]=YM.Array}var BNe=R4e,mY=BNe,MNe=kn;MNe("dispose");var LNe=mY,FNe=LNe,jNe=kn;jNe("asyncDispose");var HNe=Nt,zNe=ds,UNe=Br,bY=zNe("Symbol"),WNe=bY.keyFor,qNe=UNe(bY.prototype.valueOf);HNe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return WNe(qNe(r))!==void 0}catch{return!1}}});var KNe=Nt,VNe=Wc,wY=ds,GNe=Br,YNe=Gm,ZNe=un,E$=wY("Symbol"),JM=E$.isWellKnown,$Y=wY("Object","getOwnPropertyNames"),XNe=GNe(E$.prototype.valueOf),QM=VNe("wks");for(var FS=0,e7=$Y(E$),JNe=e7.length;FS<JNe;FS++)try{var t7=e7[FS];YNe(E$[t7])&&ZNe(t7)}catch{}KNe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(JM&&JM(r))return!0;try{for(var t=XNe(r),n=0,i=$Y(QM),s=i.length;n<s;n++)if(QM[i[n]]==t)return!0}catch{}return!1}});var QNe=kn;QNe("matcher");var eRe=kn;eRe("metadataKey");var tRe=kn;tRe("observable");var rRe=kn;rRe("metadata");var nRe=kn;nRe("patternMatch");var iRe=kn;iRe("replaceAll");var sRe=FNe,oRe=sRe;(function(e){e.exports=oRe})(UCe);(function(e){e.exports=SA})(zCe);var up=Vt(tm),S$={},aRe={get exports(){return S$},set exports(e){S$=e}},MA={},lRe={get exports(){return MA},set exports(e){MA=e}},I4=Br,uRe=px,cRe=Sl,fRe=Vm,hRe=I4("".charAt),r7=I4("".charCodeAt),dRe=I4("".slice),n7=function(e){return function(r,t){var n=cRe(fRe(r)),i=uRe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=r7(n,i),o<55296||o>56319||i+1===s||(a=r7(n,i+1))<56320||a>57343?e?hRe(n,i):o:e?dRe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},pRe={codeAt:n7(!1),charAt:n7(!0)},vRe=pRe.charAt,gRe=Sl,_Y=Fv,yRe=k4,i7=T4,xY="String Iterator",mRe=_Y.set,bRe=_Y.getterFor(xY);yRe(String,"String",function(e){mRe(this,{type:xY,string:gRe(e),index:0})},function(){var r=bRe(this),t=r.string,n=r.index,i;return n>=t.length?i7(void 0,!0):(i=vRe(t,n),r.index+=i.length,i7(i,!1))});var wRe=rb,$Re=wRe.f("iterator"),_Re=$Re,EY=_Re,xRe=EY,ERe=xRe,SRe=ERe,kRe=SRe;(function(e){e.exports=kRe})(lRe);(function(e){e.exports=MA})(aRe);var TRe=Vt(S$);function Ci(e){"@babel/helpers - typeof";return Ci=typeof up=="function"&&typeof TRe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof up=="function"&&r.constructor===up&&r!==up.prototype?"symbol":typeof r},Ci(e)}var LA={},IRe={get exports(){return LA},set exports(e){LA=e}},FA={},ARe={get exports(){return FA},set exports(e){FA=e}},ORe=rb,CRe=ORe.f("toPrimitive"),PRe=CRe,NRe=PRe,RRe=NRe,DRe=RRe,BRe=DRe,MRe=BRe;(function(e){e.exports=MRe})(ARe);(function(e){e.exports=FA})(IRe);var LRe=Vt(LA);function FRe(e,r){if(Ci(e)!=="object"||e===null)return e;var t=e[LRe];if(t!==void 0){var n=t.call(e,r||"default");if(Ci(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function SY(e){var r=FRe(e,"string");return Ci(r)==="symbol"?r:String(r)}function s7(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),dx(e,SY(n.key),n)}}function Sx(e,r,t){return r&&s7(e.prototype,r),t&&s7(e,t),dx(e,"prototype",{writable:!1}),e}function On(e,r,t){return r=SY(r),r in e?dx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var jA={},jRe={get exports(){return jA},set exports(e){jA=e}},kY=Br,HRe=Ds,zRe=wi,URe=Vn,o7=ib,WRe=Wm,TY=Function,qRe=kY([].concat),KRe=kY([].join),jS={},VRe=function(e,r,t){if(!URe(jS,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";jS[r]=TY("C,a","return new C("+KRe(n,",")+")")}return jS[r](e,t)},IY=WRe?TY.bind:function(r){var t=HRe(this),n=t.prototype,i=o7(arguments,1),s=function(){var a=qRe(i,o7(arguments));return this instanceof s?VRe(t,a.length,a):t.apply(r,a)};return zRe(n)&&(s.prototype=n),s},GRe=Nt,a7=IY;GRe({target:"Function",proto:!0,forced:Function.bind!==a7},{bind:a7});var YRe=Vr,Gn=function(e){return YRe[e+"Prototype"]},ZRe=Gn,XRe=ZRe("Function").bind,JRe=ln,QRe=XRe,HS=Function.prototype,eDe=function(e){var r=e.bind;return e===HS||JRe(HS,e)&&r===HS.bind?QRe:r},tDe=eDe,AY=tDe;(function(e){e.exports=AY})(jRe);var OY=Vt(jA),HA={},rDe={get exports(){return HA},set exports(e){HA=e}},nDe=Ds,iDe=Bs,sDe=cx,oDe=ao,aDe=TypeError,l7=function(e){return function(r,t,n,i){nDe(t);var s=iDe(r),o=sDe(s),a=oDe(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw aDe("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},lDe={left:l7(!1),right:l7(!0)},uDe=kr,ob=function(e,r){var t=[][e];return!!t&&uDe(function(){t.call(null,r||function(){return 1},1)})},cDe=Au,ab=typeof process<"u"&&cDe(process)=="process",fDe=Nt,hDe=lDe.left,dDe=ob,u7=Rv,pDe=ab,vDe=!pDe&&u7>79&&u7<83,gDe=vDe||!dDe("reduce");fDe({target:"Array",proto:!0,forced:gDe},{reduce:function(r){var t=arguments.length;return hDe(this,r,t,t>1?arguments[1]:void 0)}});var yDe=Gn,mDe=yDe("Array").reduce,bDe=ln,wDe=mDe,zS=Array.prototype,$De=function(e){var r=e.reduce;return e===zS||bDe(zS,e)&&r===zS.reduce?wDe:r},_De=$De,xDe=_De;(function(e){e.exports=xDe})(rDe);var EDe=Vt(HA),zA={},SDe={get exports(){return zA},set exports(e){zA=e}},kDe=Nt,TDe=jv.filter,IDe=Zm,ADe=IDe("filter");kDe({target:"Array",proto:!0,forced:!ADe},{filter:function(r){return TDe(this,r,arguments.length>1?arguments[1]:void 0)}});var ODe=Gn,CDe=ODe("Array").filter,PDe=ln,NDe=CDe,US=Array.prototype,RDe=function(e){var r=e.filter;return e===US||PDe(US,e)&&r===US.filter?NDe:r},DDe=RDe,BDe=DDe;(function(e){e.exports=BDe})(SDe);var cp=Vt(zA),UA={},MDe={get exports(){return UA},set exports(e){UA=e}},LDe=Nt,FDe=jv.map,jDe=Zm,HDe=jDe("map");LDe({target:"Array",proto:!0,forced:!HDe},{map:function(r){return FDe(this,r,arguments.length>1?arguments[1]:void 0)}});var zDe=Gn,UDe=zDe("Array").map,WDe=ln,qDe=UDe,WS=Array.prototype,KDe=function(e){var r=e.map;return e===WS||WDe(WS,e)&&r===WS.map?qDe:r},VDe=KDe,GDe=VDe;(function(e){e.exports=GDe})(MDe);var ya=Vt(UA),c7={},YDe={get exports(){return c7},set exports(e){c7=e}},ZDe=ef,XDe=ao,JDe=d4,QDe=Qc,CY=function(e,r,t,n,i,s,o,a){for(var l=i,u=0,f=o?QDe(o,a):!1,c,p;u<n;)u in t&&(c=f?f(t[u],u,r):t[u],s>0&&ZDe(c)?(p=XDe(c),l=CY(e,r,c,p,l,s-1)-1):(JDe(l+1),e[l]=c),l++),u++;return l},eBe=CY,tBe=Nt,rBe=eBe,nBe=Ds,iBe=Bs,sBe=ao,oBe=gx;tBe({target:"Array",proto:!0},{flatMap:function(r){var t=iBe(this),n=sBe(t),i;return nBe(r),i=oBe(t,0),i.length=rBe(i,t,t,n,0,1,r,arguments.length>1?arguments[1]:void 0),i}});var aBe=Gn,lBe=aBe("Array").flatMap,uBe=ln,cBe=lBe,qS=Array.prototype,fBe=function(e){var r=e.flatMap;return e===qS||uBe(qS,e)&&r===qS.flatMap?cBe:r},hBe=fBe,dBe=hBe;(function(e){e.exports=dBe})(YDe);var WA={},pBe={get exports(){return WA},set exports(e){WA=e}},vBe=bi,f7=oo,gBe=c4,PY=function(e,r,t){var n,i;f7(e);try{if(n=gBe(e,"return"),!n){if(r==="throw")throw t;return t}n=vBe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return f7(n),t},yBe=oo,mBe=PY,bBe=function(e,r,t,n){try{return n?r(yBe(t)[0],t[1]):r(t)}catch(i){mBe(e,"throw",i)}},wBe=un,$Be=Hv,_Be=wBe("iterator"),xBe=Array.prototype,NY=function(e){return e!==void 0&&($Be.Array===e||xBe[_Be]===e)},EBe=Cu,h7=c4,SBe=Km,kBe=Hv,TBe=un,IBe=TBe("iterator"),kx=function(e){if(!SBe(e))return h7(e,IBe)||h7(e,"@@iterator")||kBe[EBe(e)]},ABe=bi,OBe=Ds,CBe=oo,PBe=Bv,NBe=kx,RBe=TypeError,A4=function(e,r){var t=arguments.length<2?NBe(e):r;if(OBe(t))return CBe(ABe(t,e));throw RBe(PBe(e)+" is not iterable")},DBe=Qc,BBe=bi,MBe=Bs,LBe=bBe,FBe=NY,jBe=vx,HBe=ao,d7=Mv,zBe=A4,UBe=kx,p7=Array,WBe=function(r){var t=MBe(r),n=jBe(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=DBe(s,i>2?arguments[2]:void 0));var a=UBe(t),l=0,u,f,c,p,y,w;if(a&&!(this===p7&&FBe(a)))for(p=zBe(t,a),y=p.next,f=n?new this:[];!(c=BBe(y,p)).done;l++)w=o?LBe(p,s,[c.value,l],!0):c.value,d7(f,l,w);else for(u=HBe(t),f=n?new this(u):p7(u);u>l;l++)w=o?s(t[l],l):t[l],d7(f,l,w);return f.length=l,f},qBe=un,RY=qBe("iterator"),DY=!1;try{var KBe=0,v7={next:function(){return{done:!!KBe++}},return:function(){DY=!0}};v7[RY]=function(){return this},Array.from(v7,function(){throw 2})}catch{}var BY=function(e,r){if(!r&&!DY)return!1;var t=!1;try{var n={};n[RY]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},VBe=Nt,GBe=WBe,YBe=BY,ZBe=!YBe(function(e){Array.from(e)});VBe({target:"Array",stat:!0,forced:ZBe},{from:GBe});var XBe=Vr,JBe=XBe.Array.from,QBe=JBe,MY=QBe;(function(e){e.exports=MY})(pBe);var O4=Vt(WA),qA={},e6e={get exports(){return qA},set exports(e){qA=e}},KA={},t6e={get exports(){return KA},set exports(e){KA=e}},r6e=kx,n6e=r6e,i6e=n6e,s6e=i6e,o6e=s6e,a6e=o6e,l6e=a6e,u6e=l6e;(function(e){e.exports=u6e})(t6e);(function(e){e.exports=KA})(e6e);var lb=Vt(qA),VA={},c6e={get exports(){return VA},set exports(e){VA=e}},f6e=Vr,h6e=f6e.Object.getOwnPropertySymbols,d6e=h6e,p6e=d6e;(function(e){e.exports=p6e})(c6e);var g7=Vt(VA),GA={},v6e={get exports(){return GA},set exports(e){GA=e}},YA={},g6e={get exports(){return YA},set exports(e){YA=e}},y6e=Nt,m6e=kr,b6e=Da,LY=Kh.f,FY=si,w6e=!FY||m6e(function(){LY(1)});y6e({target:"Object",stat:!0,forced:w6e,sham:!FY},{getOwnPropertyDescriptor:function(r,t){return LY(b6e(r),t)}});var $6e=Vr,jY=$6e.Object,_6e=g6e.exports=function(r,t){return jY.getOwnPropertyDescriptor(r,t)};jY.getOwnPropertyDescriptor.sham&&(_6e.sham=!0);var x6e=YA,E6e=x6e;(function(e){e.exports=E6e})(v6e);var HY=Vt(GA),ZA={},S6e={get exports(){return ZA},set exports(e){ZA=e}},k6e=ds,T6e=Br,I6e=eb,A6e=tb,O6e=oo,C6e=T6e([].concat),C4=k6e("Reflect","ownKeys")||function(r){var t=I6e.f(O6e(r)),n=A6e.f;return n?C6e(t,n(r)):t},P6e=Nt,N6e=si,R6e=C4,D6e=Da,B6e=Kh,M6e=Mv;P6e({target:"Object",stat:!0,sham:!N6e},{getOwnPropertyDescriptors:function(r){for(var t=D6e(r),n=B6e.f,i=R6e(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&M6e(s,a,l);return s}});var L6e=Vr,F6e=L6e.Object.getOwnPropertyDescriptors,j6e=F6e,H6e=j6e;(function(e){e.exports=H6e})(S6e);var y7=Vt(ZA),XA={},z6e={get exports(){return XA},set exports(e){XA=e}},JA={},U6e={get exports(){return JA},set exports(e){JA=e}},W6e=Nt,q6e=si,m7=yx.f;W6e({target:"Object",stat:!0,forced:Object.defineProperties!==m7,sham:!q6e},{defineProperties:m7});var K6e=Vr,zY=K6e.Object,V6e=U6e.exports=function(r,t){return zY.defineProperties(r,t)};zY.defineProperties.sham&&(V6e.sham=!0);var G6e=JA,Y6e=G6e;(function(e){e.exports=Y6e})(z6e);var Z6e=Vt(XA),QA={},X6e={get exports(){return QA},set exports(e){QA=e}};(function(e){e.exports=kG})(X6e);var J6e=Vt(QA),eO={},Q6e={get exports(){return eO},set exports(e){eO=e}},tO={},e8e={get exports(){return tO},set exports(e){tO=e}},t8e=Nt,r8e=ef;t8e({target:"Array",stat:!0},{isArray:r8e});var n8e=Vr,i8e=n8e.Array.isArray,s8e=i8e,UY=s8e,o8e=UY,a8e=o8e,l8e=a8e,u8e=l8e;(function(e){e.exports=u8e})(e8e);(function(e){e.exports=tO})(Q6e);var WY=Vt(eO);function c8e(e){if(WY(e))return e}function f8e(e,r){var t=e==null?null:typeof up<"u"&&lb(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var k$={},h8e={get exports(){return k$},set exports(e){k$=e}},rO={},d8e={get exports(){return rO},set exports(e){rO=e}},p8e=Nt,b7=ef,v8e=vx,g8e=wi,w7=Xm,y8e=ao,m8e=Da,b8e=Mv,w8e=un,$8e=Zm,_8e=ib,x8e=$8e("slice"),E8e=w8e("species"),KS=Array,S8e=Math.max;p8e({target:"Array",proto:!0,forced:!x8e},{slice:function(r,t){var n=m8e(this),i=y8e(n),s=w7(r,i),o=w7(t===void 0?i:t,i),a,l,u;if(b7(n)&&(a=n.constructor,v8e(a)&&(a===KS||b7(a.prototype))?a=void 0:g8e(a)&&(a=a[E8e],a===null&&(a=void 0)),a===KS||a===void 0))return _8e(n,s,o);for(l=new(a===void 0?KS:a)(S8e(o-s,0)),u=0;s<o;s++,u++)s in n&&b8e(l,u,n[s]);return l.length=u,l}});var k8e=Gn,T8e=k8e("Array").slice,I8e=ln,A8e=T8e,VS=Array.prototype,O8e=function(e){var r=e.slice;return e===VS||I8e(VS,e)&&r===VS.slice?A8e:r},C8e=O8e,qY=C8e,P8e=qY,N8e=P8e,R8e=N8e,D8e=R8e;(function(e){e.exports=D8e})(d8e);(function(e){e.exports=rO})(h8e);var B8e=Vt(k$),nO={},M8e={get exports(){return nO},set exports(e){nO=e}},iO={},L8e={get exports(){return iO},set exports(e){iO=e}},F8e=MY,j8e=F8e,H8e=j8e,z8e=H8e;(function(e){e.exports=z8e})(L8e);(function(e){e.exports=iO})(M8e);var KY=Vt(nO);function sO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function VY(e,r){var t;if(e){if(typeof e=="string")return sO(e,r);var n=B8e(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return KY(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(e,r)}}function U8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(e,r){return c8e(e)||f8e(e,r)||VY(e,r)||U8e()}function W8e(e){if(WY(e))return sO(e)}function q8e(e){if(typeof up<"u"&&lb(e)!=null||e["@@iterator"]!=null)return KY(e)}function K8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(e){return W8e(e)||q8e(e)||VY(e)||K8e()}var oO={},V8e={get exports(){return oO},set exports(e){oO=e}};(function(e){e.exports=mY})(V8e);var Tx=Vt(oO),aO={},G8e={get exports(){return aO},set exports(e){aO=e}},Y8e=Gn,Z8e=Y8e("Array").concat,X8e=ln,J8e=Z8e,GS=Array.prototype,Q8e=function(e){var r=e.concat;return e===GS||X8e(GS,e)&&r===GS.concat?J8e:r},eMe=Q8e,tMe=eMe;(function(e){e.exports=tMe})(G8e);var Ix=Vt(aO),lO={},rMe={get exports(){return lO},set exports(e){lO=e}};(function(e){e.exports=qY})(rMe);var Ax=Vt(lO),uO={},nMe={get exports(){return uO},set exports(e){uO=e}},iMe=Nt,sMe=C4;iMe({target:"Reflect",stat:!0},{ownKeys:sMe});var oMe=Vr,aMe=oMe.Reflect.ownKeys,lMe=aMe,uMe=lMe;(function(e){e.exports=uMe})(nMe);var cMe=Vt(uO),cO={},fMe={get exports(){return cO},set exports(e){cO=e}};(function(e){e.exports=UY})(fMe);var Vs=Vt(cO),fO={},hMe={get exports(){return fO},set exports(e){fO=e}},dMe=Nt,pMe=Bs,GY=Qm,vMe=kr,gMe=vMe(function(){GY(1)});dMe({target:"Object",stat:!0,forced:gMe},{keys:function(r){return GY(pMe(r))}});var yMe=Vr,mMe=yMe.Object.keys,bMe=mMe,wMe=bMe;(function(e){e.exports=wMe})(hMe);var P4=Vt(fO),$7={},$Me={get exports(){return $7},set exports(e){$7=e}},_Me=Nt,xMe=Br,YY=Date,EMe=xMe(YY.prototype.getTime);_Me({target:"Date",stat:!0},{now:function(){return EMe(new YY)}});var SMe=Vr,kMe=SMe.Date.now,TMe=kMe,IMe=TMe;(function(e){e.exports=IMe})($Me);var hO={},AMe={get exports(){return hO},set exports(e){hO=e}},OMe=jv.forEach,CMe=ob,PMe=CMe("forEach"),NMe=PMe?[].forEach:function(r){return OMe(this,r,arguments.length>1?arguments[1]:void 0)},RMe=Nt,_7=NMe;RMe({target:"Array",proto:!0,forced:[].forEach!=_7},{forEach:_7});var DMe=Gn,BMe=DMe("Array").forEach,MMe=BMe,LMe=MMe,FMe=Cu,jMe=Vn,HMe=ln,zMe=LMe,YS=Array.prototype,UMe={DOMTokenList:!0,NodeList:!0},ZY=function(e){var r=e.forEach;return e===YS||HMe(YS,e)&&r===YS.forEach||jMe(UMe,FMe(e))?zMe:r};(function(e){e.exports=ZY})(AMe);var Nh=Vt(hO),dO={},WMe={get exports(){return dO},set exports(e){dO=e}},qMe=Nt,KMe=Br,VMe=ef,GMe=KMe([].reverse),x7=[1,2];qMe({target:"Array",proto:!0,forced:String(x7)===String(x7.reverse())},{reverse:function(){return VMe(this)&&(this.length=this.length),GMe(this)}});var YMe=Gn,ZMe=YMe("Array").reverse,XMe=ln,JMe=ZMe,ZS=Array.prototype,QMe=function(e){var r=e.reverse;return e===ZS||XMe(ZS,e)&&r===ZS.reverse?JMe:r},e7e=QMe,XY=e7e;(function(e){e.exports=XY})(WMe);var t7e=Vt(dO),pO={},r7e={get exports(){return pO},set exports(e){pO=e}},n7e=si,i7e=ef,s7e=TypeError,o7e=Object.getOwnPropertyDescriptor,a7e=n7e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),l7e=a7e?function(e,r){if(i7e(e)&&!o7e(e,"length").writable)throw s7e("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},E7=Bv,u7e=TypeError,JY=function(e,r){if(!delete e[r])throw u7e("Cannot delete property "+E7(r)+" of "+E7(e))},c7e=Nt,f7e=Bs,h7e=Xm,d7e=px,p7e=ao,v7e=l7e,g7e=d4,y7e=gx,m7e=Mv,XS=JY,b7e=Zm,w7e=b7e("splice"),$7e=Math.max,_7e=Math.min;c7e({target:"Array",proto:!0,forced:!w7e},{splice:function(r,t){var n=f7e(this),i=p7e(n),s=h7e(r,i),o=arguments.length,a,l,u,f,c,p;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=_7e($7e(d7e(t),0),i-s)),g7e(i+a-l),u=y7e(n,l),f=0;f<l;f++)c=s+f,c in n&&m7e(u,f,n[c]);if(u.length=l,a<l){for(f=s;f<i-l;f++)c=f+l,p=f+a,c in n?n[p]=n[c]:XS(n,p);for(f=i;f>i-l+a;f--)XS(n,f-1)}else if(a>l)for(f=i-l;f>s;f--)c=f+l-1,p=f+a-1,c in n?n[p]=n[c]:XS(n,p);for(f=0;f<a;f++)n[f+s]=arguments[f+2];return v7e(n,i-l+a),u}});var x7e=Gn,E7e=x7e("Array").splice,S7e=ln,k7e=E7e,JS=Array.prototype,T7e=function(e){var r=e.splice;return e===JS||S7e(JS,e)&&r===JS.splice?k7e:r},I7e=T7e,A7e=I7e;(function(e){e.exports=A7e})(r7e);var QY=Vt(pO),vO={},O7e={get exports(){return vO},set exports(e){vO=e}},S7=si,C7e=Br,P7e=bi,N7e=kr,QS=Qm,R7e=tb,D7e=qm,B7e=Bs,M7e=cx,zd=Object.assign,k7=Object.defineProperty,L7e=C7e([].concat),F7e=!zd||N7e(function(){if(S7&&zd({b:1},zd(k7({},"a",{enumerable:!0,get:function(){k7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),zd({},e)[t]!=7||QS(zd({},r)).join("")!=n})?function(r,t){for(var n=B7e(r),i=arguments.length,s=1,o=R7e.f,a=D7e.f;i>s;)for(var l=M7e(arguments[s++]),u=o?L7e(QS(l),o(l)):QS(l),f=u.length,c=0,p;f>c;)p=u[c++],(!S7||P7e(a,l,p))&&(n[p]=l[p]);return n}:zd,j7e=Nt,T7=F7e;j7e({target:"Object",stat:!0,arity:2,forced:Object.assign!==T7},{assign:T7});var H7e=Vr,z7e=H7e.Object.assign,U7e=z7e,W7e=U7e;(function(e){e.exports=W7e})(O7e);var q7e=Vt(vO),I7={},K7e={get exports(){return I7},set exports(e){I7=e}},V7e=Nt,G7e=g4.includes,Y7e=kr,Z7e=Y7e(function(){return!Array(1).includes()});V7e({target:"Array",proto:!0,forced:Z7e},{includes:function(r){return G7e(this,r,arguments.length>1?arguments[1]:void 0)}});var X7e=Gn,J7e=X7e("Array").includes,Q7e=wi,eLe=Au,tLe=un,rLe=tLe("match"),nLe=function(e){var r;return Q7e(e)&&((r=e[rLe])!==void 0?!!r:eLe(e)=="RegExp")},iLe=nLe,sLe=TypeError,oLe=function(e){if(iLe(e))throw sLe("The method doesn't accept regular expressions");return e},aLe=un,lLe=aLe("match"),uLe=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[lLe]=!1,"/./"[e](r)}catch{}}return!1},cLe=Nt,fLe=Br,hLe=oLe,dLe=Vm,A7=Sl,pLe=uLe,vLe=fLe("".indexOf);cLe({target:"String",proto:!0,forced:!pLe("includes")},{includes:function(r){return!!~vLe(A7(dLe(this)),A7(hLe(r)),arguments.length>1?arguments[1]:void 0)}});var gLe=Gn,yLe=gLe("String").includes,O7=ln,mLe=J7e,bLe=yLe,ek=Array.prototype,tk=String.prototype,wLe=function(e){var r=e.includes;return e===ek||O7(ek,e)&&r===ek.includes?mLe:typeof e=="string"||e===tk||O7(tk,e)&&r===tk.includes?bLe:r},$Le=wLe,_Le=$Le;(function(e){e.exports=_Le})(K7e);var C7={},xLe={get exports(){return C7},set exports(e){C7=e}},ELe=Nt,SLe=kr,kLe=Bs,eZ=Ex,TLe=hY,ILe=SLe(function(){eZ(1)});ELe({target:"Object",stat:!0,forced:ILe,sham:!TLe},{getPrototypeOf:function(r){return eZ(kLe(r))}});var ALe=Vr,OLe=ALe.Object.getPrototypeOf,CLe=OLe,tZ=CLe;(function(e){e.exports=tZ})(xLe);var P7={},PLe={get exports(){return P7},set exports(e){P7=e}},NLe=si,rZ=Br,RLe=Qm,DLe=Da,BLe=qm.f,MLe=rZ(BLe),LLe=rZ([].push),N7=function(e){return function(r){for(var t=DLe(r),n=RLe(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!NLe||MLe(t,a))&&LLe(o,e?[a,t[a]]:t[a]);return o}},FLe={entries:N7(!0),values:N7(!1)},jLe=Nt,HLe=FLe.values;jLe({target:"Object",stat:!0},{values:function(r){return HLe(r)}});var zLe=Vr,ULe=zLe.Object.values,WLe=ULe,qLe=WLe;(function(e){e.exports=qLe})(PLe);var R7={},KLe={get exports(){return R7},set exports(e){R7=e}},N4=`	
\v\f\r                　\u2028\u2029\uFEFF`,VLe=Br,GLe=Vm,YLe=Sl,gO=N4,D7=VLe("".replace),ZLe=RegExp("^["+gO+"]+"),XLe=RegExp("(^|[^"+gO+"])["+gO+"]+$"),rk=function(e){return function(r){var t=YLe(GLe(r));return e&1&&(t=D7(t,ZLe,"")),e&2&&(t=D7(t,XLe,"$1")),t}},nZ={start:rk(1),end:rk(2),trim:rk(3)},iZ=En,JLe=kr,QLe=Br,eFe=Sl,tFe=nZ.trim,B7=N4,by=iZ.parseInt,M7=iZ.Symbol,L7=M7&&M7.iterator,sZ=/^[+-]?0x/i,rFe=QLe(sZ.exec),nFe=by(B7+"08")!==8||by(B7+"0x16")!==22||L7&&!JLe(function(){by(Object(L7))}),iFe=nFe?function(r,t){var n=tFe(eFe(r));return by(n,t>>>0||(rFe(sZ,n)?16:10))}:by,sFe=Nt,F7=iFe;sFe({global:!0,forced:parseInt!=F7},{parseInt:F7});var oFe=Vr,aFe=oFe.parseInt,lFe=aFe,uFe=lFe;(function(e){e.exports=uFe})(KLe);var j7={},cFe={get exports(){return j7},set exports(e){j7=e}},fFe=Nt,hFe=u4,dFe=g4.indexOf,pFe=ob,yO=hFe([].indexOf),oZ=!!yO&&1/yO([1],1,-0)<0,vFe=oZ||!pFe("indexOf");fFe({target:"Array",proto:!0,forced:vFe},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return oZ?yO(this,r,t)||0:dFe(this,r,t)}});var gFe=Gn,yFe=gFe("Array").indexOf,mFe=ln,bFe=yFe,nk=Array.prototype,wFe=function(e){var r=e.indexOf;return e===nk||mFe(nk,e)&&r===nk.indexOf?bFe:r},$Fe=wFe,_Fe=$Fe;(function(e){e.exports=_Fe})(cFe);var H7={},xFe={get exports(){return H7},set exports(e){H7=e}},EFe=fY.PROPER,SFe=kr,z7=N4,U7="​᠎",kFe=function(e){return SFe(function(){return!!z7[e]()||U7[e]()!==U7||EFe&&z7[e].name!==e})},TFe=Nt,IFe=nZ.trim,AFe=kFe;TFe({target:"String",proto:!0,forced:AFe("trim")},{trim:function(){return IFe(this)}});var OFe=Gn,CFe=OFe("String").trim,PFe=ln,NFe=CFe,ik=String.prototype,RFe=function(e){var r=e.trim;return typeof e=="string"||e===ik||PFe(ik,e)&&r===ik.trim?NFe:r},DFe=RFe,BFe=DFe;(function(e){e.exports=BFe})(xFe);var mO={},MFe={get exports(){return mO},set exports(e){mO=e}},LFe=Nt,FFe=si,jFe=Gh;LFe({target:"Object",stat:!0,sham:!FFe},{create:jFe});var HFe=Vr,zFe=HFe.Object,UFe=function(r,t){return zFe.create(r,t)},WFe=UFe,aZ=WFe;(function(e){e.exports=aZ})(MFe);var qFe=Vt(mO),bO={},KFe={get exports(){return bO},set exports(e){bO=e}},wO=Vr,VFe=Nv;wO.JSON||(wO.JSON={stringify:JSON.stringify});var GFe=function(r,t,n){return VFe(wO.JSON.stringify,null,arguments)},YFe=GFe,ZFe=YFe;(function(e){e.exports=ZFe})(KFe);var XFe=Vt(bO),$O={},JFe={get exports(){return $O},set exports(e){$O=e}},QFe=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",e9e=TypeError,lZ=function(e,r){if(e<r)throw e9e("Not enough arguments");return e},uZ=En,t9e=Nv,r9e=Sn,n9e=QFe,i9e=Jc,s9e=ib,o9e=lZ,a9e=uZ.Function,l9e=/MSIE .\./.test(i9e)||n9e&&function(){var e=uZ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),cZ=function(e,r){var t=r?2:1;return l9e?function(n,i){var s=o9e(arguments.length,1)>t,o=r9e(n)?n:a9e(n),a=s?s9e(arguments,t):[],l=s?function(){t9e(o,this,a)}:o;return r?e(l,i):e(l)}:e},u9e=Nt,fZ=En,c9e=cZ,W7=c9e(fZ.setInterval,!0);u9e({global:!0,bind:!0,forced:fZ.setInterval!==W7},{setInterval:W7});var f9e=Nt,hZ=En,h9e=cZ,q7=h9e(hZ.setTimeout,!0);f9e({global:!0,bind:!0,forced:hZ.setTimeout!==q7},{setTimeout:q7});var d9e=Vr,p9e=d9e.setTimeout;(function(e){e.exports=p9e})(JFe);var v9e=Vt($O),K7={},g9e={get exports(){return K7},set exports(e){K7=e}},y9e=Bs,V7=Xm,m9e=ao,b9e=function(r){for(var t=y9e(this),n=m9e(t),i=arguments.length,s=V7(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:V7(o,n);a>s;)t[s++]=r;return t},w9e=Nt,$9e=b9e;w9e({target:"Array",proto:!0},{fill:$9e});var _9e=Gn,x9e=_9e("Array").fill,E9e=ln,S9e=x9e,sk=Array.prototype,k9e=function(e){var r=e.fill;return e===sk||E9e(sk,e)&&r===sk.fill?S9e:r},T9e=k9e,I9e=T9e;(function(e){e.exports=I9e})(g9e);var _O={},A9e={get exports(){return _O},set exports(e){_O=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(A9e);var O9e=_O;/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ca(){return Ca=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ca.apply(this,arguments)}function Xo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function m1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xO;typeof Object.assign!="function"?xO=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:xO=Object.assign;var Rh=xO,G7=["","webkit","Moz","MS","ms","o"],C9e=typeof document>"u"?{style:{}}:document.createElement("div"),P9e="function",fp=Math.round,Dh=Math.abs,R4=Date.now;function Ox(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<G7.length;){if(t=G7[s],n=t?t+i:r,n in e)return n;s++}}var uu;typeof window>"u"?uu={}:uu=window;var dZ=Ox(C9e.style,"touchAction"),pZ=dZ!==void 0;function N9e(){if(!pZ)return!1;var e={},r=uu.CSS&&uu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?uu.CSS.supports("touch-action",t):!0}),e}var vZ="compute",gZ="auto",EO="manipulation",yh="none",sm="pan-x",om="pan-y",b1=N9e(),R9e=/mobile|tablet|ip(ad|hone|od)|android/i,yZ="ontouchstart"in uu,D9e=Ox(uu,"PointerEvent")!==void 0,B9e=yZ&&R9e.test(navigator.userAgent),ub="touch",M9e="pen",D4="mouse",L9e="kinect",F9e=25,fs=1,Zh=2,Wn=4,Ns=8,T$=1,cb=2,fb=4,hb=8,nv=16,vl=cb|fb,mh=hb|nv,mZ=vl|mh,bZ=["x","y"],I$=["clientX","clientY"];function cu(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function Cx(e,r){return typeof e===P9e?e.apply(r&&r[0]||void 0,r):e}function th(e,r){return e.indexOf(r)>-1}function j9e(e){if(th(e,yh))return yh;var r=th(e,sm),t=th(e,om);return r&&t?yh:r||t?r?sm:om:th(e,EO)?EO:gZ}var wZ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===vZ&&(n=this.compute()),pZ&&this.manager.element.style&&b1[n]&&(this.manager.element.style[dZ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return cu(this.manager.recognizers,function(i){Cx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),j9e(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=th(o,yh)&&!b1[yh],l=th(o,om)&&!b1[om],u=th(o,sm)&&!b1[sm];if(a){var f=n.pointers.length===1,c=n.distance<2,p=n.deltaTime<250;if(f&&c&&p)return}if(!(u&&l)&&(a||l&&s&vl||u&&s&mh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function B4(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function $Z(e){var r=e.length;if(r===1)return{x:fp(e[0].clientX),y:fp(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:fp(t/r),y:fp(n/r)}}function Y7(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:fp(e.pointers[t].clientX),clientY:fp(e.pointers[t].clientY)},t++;return{timeStamp:R4(),pointers:r,center:$Z(r),deltaX:e.deltaX,deltaY:e.deltaY}}function A$(e,r,t){t||(t=bZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function SO(e,r,t){t||(t=bZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function _Z(e,r){return e===r?T$:Dh(e)>=Dh(r)?e<0?cb:fb:r<0?hb:nv}function H9e(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===fs||s.eventType===Wn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function xZ(e,r,t){return{x:r/e||0,y:t/e||0}}function z9e(e,r){return A$(r[0],r[1],I$)/A$(e[0],e[1],I$)}function U9e(e,r){return SO(r[1],r[0],I$)+SO(e[1],e[0],I$)}function W9e(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ns&&(n>F9e||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,f=xZ(n,l,u);s=f.x,o=f.y,i=Dh(f.x)>Dh(f.y)?f.x:f.y,a=_Z(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function q9e(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=Y7(r)),i>1&&!t.firstMultiple?t.firstMultiple=Y7(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=$Z(n);r.timeStamp=R4(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=SO(a,l),r.distance=A$(a,l),H9e(t,r),r.offsetDirection=_Z(r.deltaX,r.deltaY);var u=xZ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Dh(u.x)>Dh(u.y)?u.x:u.y,r.scale=o?z9e(o.pointers,n):1,r.rotation=o?U9e(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,W9e(t,r);var f=e.element,c=r.srcEvent,p;c.composedPath?p=c.composedPath()[0]:c.path?p=c.path[0]:p=c.target,B4(p,f)&&(f=p),r.target=f}function K9e(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&fs&&n-i===0,o=r&(Wn|Ns)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,q9e(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function am(e){return e.trim().split(/\s+/g)}function wy(e,r,t){cu(am(r),function(n){e.addEventListener(n,t,!1)})}function $y(e,r,t){cu(am(r),function(n){e.removeEventListener(n,t,!1)})}function Z7(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var zv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Cx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&wy(this.element,this.evEl,this.domHandler),this.evTarget&&wy(this.target,this.evTarget,this.domHandler),this.evWin&&wy(Z7(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&$y(this.element,this.evEl,this.domHandler),this.evTarget&&$y(this.target,this.evTarget,this.domHandler),this.evWin&&$y(Z7(this.element),this.evWin,this.domHandler)},e}();function Bh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var V9e={pointerdown:fs,pointermove:Zh,pointerup:Wn,pointercancel:Ns,pointerout:Ns},G9e={2:ub,3:M9e,4:D4,5:L9e},EZ="pointerdown",SZ="pointermove pointerup pointercancel";uu.MSPointerEvent&&!uu.PointerEvent&&(EZ="MSPointerDown",SZ="MSPointerMove MSPointerUp MSPointerCancel");var kZ=function(e){Xo(r,e);function r(){var n,i=r.prototype;return i.evEl=EZ,i.evWin=SZ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=V9e[a],u=G9e[i.pointerType]||i.pointerType,f=u===ub,c=Bh(s,i.pointerId,"pointerId");l&fs&&(i.button===0||f)?c<0&&(s.push(i),c=s.length-1):l&(Wn|Ns)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(zv);function lm(e){return Array.prototype.slice.call(e,0)}function M4(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Bh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var Y9e={touchstart:fs,touchmove:Zh,touchend:Wn,touchcancel:Ns},Z9e="touchstart touchmove touchend touchcancel",L4=function(e){Xo(r,e);function r(){var n;return r.prototype.evTarget=Z9e,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=Y9e[i.type],o=X9e.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ub,srcEvent:i})},r}(zv);function X9e(e,r){var t=lm(e.touches),n=this.targetIds;if(r&(fs|Zh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=lm(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return B4(u.target,l)}),r===fs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Wn|Ns)&&delete n[o[i].identifier],i++;if(a.length)return[M4(s.concat(a),"identifier",!0),a]}var J9e={mousedown:fs,mousemove:Zh,mouseup:Wn},Q9e="mousedown",eje="mousemove mouseup",F4=function(e){Xo(r,e);function r(){var n,i=r.prototype;return i.evEl=Q9e,i.evWin=eje,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=J9e[i.type];s&fs&&i.button===0&&(this.pressed=!0),s&Zh&&i.which!==1&&(s=Wn),this.pressed&&(s&Wn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:D4,srcEvent:i}))},r}(zv),tje=2500,X7=25;function J7(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,tje)}}function rje(e,r){e&fs?(this.primaryTouch=r.changedPointers[0].identifier,J7.call(this,r)):e&(Wn|Ns)&&J7.call(this,r)}function nje(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=X7&&o<=X7)return!0}return!1}var TZ=function(){var e=function(r){Xo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var f=u.pointerType===ub,c=u.pointerType===D4;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(f)rje.call(m1(m1(o)),l,u);else if(c&&nje.call(m1(m1(o)),u))return;o.callback(a,l,u)}},o.touch=new L4(o.manager,o.handler),o.mouse=new F4(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(zv);return e}();function ije(e){var r,t=e.options.inputClass;return t?r=t:D9e?r=kZ:B9e?r=L4:yZ?r=TZ:r=F4,new r(e,K9e)}function hp(e,r,t){return Array.isArray(e)?(cu(e,t[r],t),!0):!1}var bw=1,Vo=2,iv=4,Nc=8,fu=Nc,um=16,hl=32,sje=1;function oje(){return sje++}function w1(e,r){var t=r.manager;return t?t.get(e):e}function Q7(e){return e&um?"cancel":e&Nc?"end":e&iv?"move":e&Vo?"start":""}var db=function(){function e(t){t===void 0&&(t={}),this.options=Ca({enable:!0},t),this.id=oje(),this.manager=null,this.state=bw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Rh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(hp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=w1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return hp(n,"dropRecognizeWith",this)?this:(n=w1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(hp(n,"requireFailure",this))return this;var i=this.requireFail;return n=w1(n,this),Bh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(hp(n,"dropRequireFailure",this))return this;n=w1(n,this);var i=Bh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Nc&&o(i.options.event+Q7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Nc&&o(i.options.event+Q7(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=hl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(hl|bw)))return!1;n++}return!0},r.recognize=function(n){var i=Rh({},n);if(!Cx(this.options.enable,[this,i])){this.reset(),this.state=hl;return}this.state&(fu|um|hl)&&(this.state=bw),this.state=this.process(i),this.state&(Vo|iv|Nc|um)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),kO=function(e){Xo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[EO]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&fs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Wn)return this.failTimeout();var f=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||A$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!f?this.count=1:this.count+=1,this._input=i;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=fu,s.tryEmit()},o.interval),Vo):fu}return hl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=hl},this.options.interval),hl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===fu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(db),sv=function(e){Xo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Vo|iv),l=this.attrTest(i);return a&&(o&Ns||!l)?s|um:a||l?o&Wn?s|Nc:s&Vo?s|iv:Vo:hl},r}(db);function IZ(e){return e===nv?"down":e===hb?"up":e===cb?"left":e===fb?"right":""}var j4=function(e){Xo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"pan",threshold:10,pointers:1,direction:mZ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&vl&&s.push(om),i&mh&&s.push(sm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,f=i.deltaY;return l&s.direction||(s.direction&vl?(l=u===0?T$:u<0?cb:fb,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=f===0?T$:f<0?hb:nv,o=f!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return sv.prototype.attrTest.call(this,i)&&(this.state&Vo||!(this.state&Vo)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=IZ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(sv),AZ=function(e){Xo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"swipe",threshold:10,velocity:.3,direction:vl|mh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return j4.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(vl|mh)?o=i.overallVelocity:s&vl?o=i.overallVelocityX:s&mh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Dh(o)>this.options.velocity&&i.eventType&Wn},t.emit=function(i){var s=IZ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(sv),OZ=function(e){Xo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[yh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Vo)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(sv),CZ=function(e){Xo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[yh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Vo)},r}(sv),PZ=function(e){Xo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[gZ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Wn|Ns)&&!u)this.reset();else if(i.eventType&fs)this.reset(),this._timer=setTimeout(function(){s.state=fu,s.tryEmit()},o.time);else if(i.eventType&Wn)return fu;return hl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===fu&&(i&&i.eventType&Wn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=R4(),this.manager.emit(this.options.event,this._input)))},r}(db),NZ={domEvents:!1,touchAction:vZ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},eL=[[CZ,{enable:!1}],[OZ,{enable:!1},["rotate"]],[AZ,{direction:vl}],[j4,{direction:vl},["swipe"]],[kO],[kO,{event:"doubletap",taps:2},["tap"]],[PZ]],aje=1,tL=2;function rL(e,r){var t=e.element;if(t.style){var n;cu(e.options.cssProps,function(i,s){n=Ox(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function lje(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var nL=function(){function e(t,n){var i=this;this.options=Rh({},NZ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=ije(this),this.touchAction=new wZ(this,this.options.touchAction),rL(this,!0),cu(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Rh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?tL:aje},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&fu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==tL&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Vo|iv|Nc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof db)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(hp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(hp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Bh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return cu(am(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return cu(am(n),function(o){i?s[o]&&s[o].splice(Bh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&lje(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&rL(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),uje={touchstart:fs,touchmove:Zh,touchend:Wn,touchcancel:Ns},cje="touchstart",fje="touchstart touchmove touchend touchcancel",hje=function(e){Xo(r,e);function r(){var n,i=r.prototype;return i.evTarget=cje,i.evWin=fje,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=uje[i.type];if(s===fs&&(this.started=!0),!!this.started){var o=dje.call(this,i,s);s&(Wn|Ns)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ub,srcEvent:i})}},r}(zv);function dje(e,r){var t=lm(e.touches),n=lm(e.changedTouches);return r&(Wn|Ns)&&(t=M4(t.concat(n),"identifier",!0)),[t,n]}function RZ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var DZ=RZ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),pje=RZ(function(e,r){return DZ(e,r,!0)},"merge","Use `assign`.");function vje(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Rh(i,t)}function iL(e,r){return function(){return e.apply(r,arguments)}}var gje=function(){var e=function(t,n){return n===void 0&&(n={}),new nL(t,Ca({recognizers:eL.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=mZ,e.DIRECTION_DOWN=nv,e.DIRECTION_LEFT=cb,e.DIRECTION_RIGHT=fb,e.DIRECTION_UP=hb,e.DIRECTION_HORIZONTAL=vl,e.DIRECTION_VERTICAL=mh,e.DIRECTION_NONE=T$,e.DIRECTION_DOWN=nv,e.INPUT_START=fs,e.INPUT_MOVE=Zh,e.INPUT_END=Wn,e.INPUT_CANCEL=Ns,e.STATE_POSSIBLE=bw,e.STATE_BEGAN=Vo,e.STATE_CHANGED=iv,e.STATE_ENDED=Nc,e.STATE_RECOGNIZED=fu,e.STATE_CANCELLED=um,e.STATE_FAILED=hl,e.Manager=nL,e.Input=zv,e.TouchAction=wZ,e.TouchInput=L4,e.MouseInput=F4,e.PointerEventInput=kZ,e.TouchMouseInput=TZ,e.SingleTouchInput=hje,e.Recognizer=db,e.AttrRecognizer=sv,e.Tap=kO,e.Pan=j4,e.Swipe=AZ,e.Pinch=OZ,e.Rotate=CZ,e.Press=PZ,e.on=wy,e.off=$y,e.each=cu,e.merge=pje,e.extend=DZ,e.bindFn=iL,e.assign=Rh,e.inherit=vje,e.bindFn=iL,e.prefixed=Ox,e.toArray=lm,e.inArray=Bh,e.uniqueArray=M4,e.splitStr=am,e.boolOrFn=Cx,e.hasParent=B4,e.addEventListeners=wy,e.removeEventListeners=$y,e.defaults=Rh({},NZ,{preset:eL}),e}(),yje=gje;function BZ(e,r){var t=typeof Tx<"u"&&lb(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=mje(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function mje(e,r){var t;if(e){if(typeof e=="string")return sL(e,r);var n=Ax(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return O4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sL(e,r)}}function sL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var MZ=Tx("DELETE");function bje(e){for(var r,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return LZ.apply(void 0,Ix(r=[{},e]).call(r,n))}function LZ(){var e=O$.apply(void 0,arguments);return jZ(e),e}function O$(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var n;return O$.apply(void 0,Ix(n=[LZ(r[0],r[1])]).call(n,Is(Ax(r).call(r,2))))}var i=r[0],s=r[1],o=BZ(cMe(s)),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===MZ?delete i[l]:i[l]!==null&&s[l]!==null&&Ci(i[l])==="object"&&Ci(s[l])==="object"&&!Vs(i[l])&&!Vs(s[l])?i[l]=O$(i[l],s[l]):i[l]=FZ(s[l]))}}catch(u){o.e(u)}finally{o.f()}return i}function FZ(e){return Vs(e)?ya(e).call(e,function(r){return FZ(r)}):Ci(e)==="object"&&e!==null?O$({},e):e}function jZ(e){for(var r=0,t=P4(e);r<t.length;r++){var n=t[r];e[n]===MZ?delete e[n]:Ci(e[n])==="object"&&e[n]!==null&&jZ(e[n])}}function wje(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var $je=typeof window<"u"?window.Hammer||yje:function(){return wje()};function nu(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=$je(this._dom.overlay);n.on("tap",OY(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Nh(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){_je(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}O9e(nu.prototype);nu.current=null;nu.prototype.destroy=function(){var e,r;this.deactivate();var t=BZ(t7e(e=QY(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};nu.prototype.activate=function(){nu.current&&nu.current.deactivate(),nu.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};nu.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};nu.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function _je(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var TO={},xje={get exports(){return TO},set exports(e){TO=e}},Eje=vx,Sje=Bv,kje=TypeError,HZ=function(e){if(Eje(e))return e;throw kje(Sje(e)+" is not a constructor")},Tje=Nt,Ije=ds,ok=Nv,Aje=IY,oL=HZ,Oje=oo,aL=wi,Cje=Gh,zZ=kr,H4=Ije("Reflect","construct"),Pje=Object.prototype,Nje=[].push,UZ=zZ(function(){function e(){}return!(H4(function(){},[],e)instanceof e)}),WZ=!zZ(function(){H4(function(){})}),lL=UZ||WZ;Tje({target:"Reflect",stat:!0,forced:lL,sham:lL},{construct:function(r,t){oL(r),Oje(t);var n=arguments.length<3?r:oL(arguments[2]);if(WZ&&!UZ)return H4(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return ok(Nje,i,t),new(ok(Aje,r,i))}var s=n.prototype,o=Cje(aL(s)?s:Pje),a=ok(r,o,t);return aL(a)?a:o}});var Rje=Vr,Dje=Rje.Reflect.construct,Bje=Dje,Mje=Bje;(function(e){e.exports=Mje})(xje);var ww=Vt(TO);function Nf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C$={},Lje={get exports(){return C$},set exports(e){C$=e}},IO={},Fje={get exports(){return IO},set exports(e){IO=e}},jje=aZ,Hje=jje,zje=Hje,Uje=zje;(function(e){e.exports=Uje})(Fje);(function(e){e.exports=IO})(Lje);var Wje=Vt(C$),P$={},qje={get exports(){return P$},set exports(e){P$=e}},AO={},Kje={get exports(){return AO},set exports(e){AO=e}},Vje=Nt,Gje=vY;Vje({target:"Object",stat:!0},{setPrototypeOf:Gje});var Yje=Vr,Zje=Yje.Object.setPrototypeOf,Xje=Zje,Jje=Xje,Qje=Jje,eHe=Qje,tHe=eHe,rHe=tHe;(function(e){e.exports=rHe})(Kje);(function(e){e.exports=AO})(qje);var OO=Vt(P$),CO={},nHe={get exports(){return CO},set exports(e){CO=e}},PO={},iHe={get exports(){return PO},set exports(e){PO=e}},sHe=AY,oHe=sHe,aHe=oHe,lHe=aHe;(function(e){e.exports=lHe})(iHe);(function(e){e.exports=PO})(nHe);var qZ=Vt(CO);function NO(e,r){var t;return NO=OO?qZ(t=OO).call(t):function(i,s){return i.__proto__=s,i},NO(e,r)}function uHe(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Wje(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),dx(e,"prototype",{writable:!1}),r&&NO(e,r)}function cHe(e,r){if(r&&(Ci(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nf(e)}var N$={},fHe={get exports(){return N$},set exports(e){N$=e}},RO={},hHe={get exports(){return RO},set exports(e){RO=e}},dHe=tZ,pHe=dHe,vHe=pHe,gHe=vHe;(function(e){e.exports=gHe})(hHe);(function(e){e.exports=RO})(fHe);var uL=Vt(N$);function R$(e){var r;return R$=OO?qZ(r=uL).call(r):function(n){return n.__proto__||uL(n)},R$(e)}var DO={},yHe={get exports(){return DO},set exports(e){DO=e}},BO={},mHe={get exports(){return BO},set exports(e){BO=e}};(function(e){var r=tm,t=S$;function n(i){"@babel/helpers - typeof";return e.exports=n=typeof r=="function"&&typeof t=="symbol"?function(s){return typeof s}:function(s){return s&&typeof r=="function"&&s.constructor===r&&s!==r.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(mHe);var MO={},bHe={get exports(){return MO},set exports(e){MO=e}},LO={},wHe={get exports(){return LO},set exports(e){LO=e}},$He=ZY,_He=$He,xHe=_He,EHe=xHe;(function(e){e.exports=EHe})(wHe);(function(e){e.exports=LO})(bHe);var FO={},SHe={get exports(){return FO},set exports(e){FO=e}},jO={},kHe={get exports(){return jO},set exports(e){jO=e}},cL=Vn,THe=C4,IHe=Kh,AHe=so,OHe=function(e,r,t){for(var n=THe(r),i=AHe.f,s=IHe.f,o=0;o<n.length;o++){var a=n[o];!cL(e,a)&&!(t&&cL(t,a))&&i(e,a,s(r,a))}},CHe=wi,PHe=Ou,NHe=function(e,r){CHe(r)&&"cause"in r&&PHe(e,"cause",r.cause)},RHe=Br,KZ=Error,DHe=RHe("".replace),BHe=function(e){return String(KZ(e).stack)}("zxcasd"),VZ=/\n\s*at [^:]*:[^\n]*/,MHe=VZ.test(BHe),LHe=function(e,r){if(MHe&&typeof e=="string"&&!KZ.prepareStackTrace)for(;r--;)e=DHe(e,VZ,"");return e},FHe=kr,jHe=Vh,HHe=!FHe(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",jHe(1,7)),e.stack!==7):!0}),zHe=Ou,UHe=LHe,WHe=HHe,fL=Error.captureStackTrace,qHe=function(e,r,t,n){WHe&&(fL?fL(e,r):zHe(e,"stack",UHe(t,n)))},KHe=Qc,VHe=bi,GHe=oo,YHe=Bv,ZHe=NY,XHe=ao,hL=ln,JHe=A4,QHe=kx,dL=PY,eze=TypeError,$w=function(e,r){this.stopped=e,this.result=r},pL=$w.prototype,Xh=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=KHe(r,n),u,f,c,p,y,w,b,T=function(A){return u&&dL(u,"normal",A),new $w(!0,A)},_=function(A){return i?(GHe(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(f=QHe(e),!f)throw eze(YHe(e)+" is not iterable");if(ZHe(f)){for(c=0,p=XHe(e);p>c;c++)if(y=_(e[c]),y&&hL(pL,y))return y;return new $w(!1)}u=JHe(e,f)}for(w=s?e.next:u.next;!(b=VHe(w,u)).done;){try{y=_(b.value)}catch(A){dL(u,"throw",A)}if(typeof y=="object"&&y&&hL(pL,y))return y}return new $w(!1)},tze=Sl,rze=function(e,r){return e===void 0?arguments.length<2?"":r:tze(e)},nze=Nt,ize=ln,sze=Ex,D$=vY,oze=OHe,GZ=Gh,ak=Ou,lk=Vh,aze=NHe,lze=qHe,uze=Xh,cze=rze,fze=un,hze=fze("toStringTag"),B$=Error,dze=[].push,ov=function(r,t){var n=ize(uk,this),i;D$?i=D$(B$(),n?sze(this):uk):(i=n?this:GZ(uk),ak(i,hze,"Error")),t!==void 0&&ak(i,"message",cze(t)),lze(i,ov,i.stack,1),arguments.length>2&&aze(i,arguments[2]);var s=[];return uze(r,dze,{that:s}),ak(i,"errors",s),i};D$?D$(ov,B$):oze(ov,B$,{name:!0});var uk=ov.prototype=GZ(B$.prototype,{constructor:lk(1,ov),message:lk(1,""),name:lk(1,"AggregateError")});nze({global:!0,constructor:!0,arity:2},{AggregateError:ov});var pze=ds,vze=b4,gze=un,yze=si,vL=gze("species"),YZ=function(e){var r=pze(e);yze&&r&&!r[vL]&&vze(r,vL,{configurable:!0,get:function(){return this}})},mze=ln,bze=TypeError,z4=function(e,r){if(mze(r,e))return e;throw bze("Incorrect invocation")},gL=oo,wze=HZ,$ze=Km,_ze=un,xze=_ze("species"),ZZ=function(e,r){var t=gL(e).constructor,n;return t===void 0||$ze(n=gL(t)[xze])?r:wze(n)},Eze=Jc,XZ=/(?:ipad|iphone|ipod).*applewebkit/i.test(Eze),eo=En,Sze=Nv,kze=Qc,yL=Sn,Tze=Vn,JZ=kr,mL=DG,Ize=ib,bL=h4,Aze=lZ,Oze=XZ,Cze=ab,HO=eo.setImmediate,zO=eo.clearImmediate,Pze=eo.process,ck=eo.Dispatch,Nze=eo.Function,wL=eo.MessageChannel,Rze=eo.String,fk=0,_y={},$L="onreadystatechange",cm,Af,hk,dk;JZ(function(){cm=eo.location});var U4=function(e){if(Tze(_y,e)){var r=_y[e];delete _y[e],r()}},pk=function(e){return function(){U4(e)}},_L=function(e){U4(e.data)},xL=function(e){eo.postMessage(Rze(e),cm.protocol+"//"+cm.host)};(!HO||!zO)&&(HO=function(r){Aze(arguments.length,1);var t=yL(r)?r:Nze(r),n=Ize(arguments,1);return _y[++fk]=function(){Sze(t,void 0,n)},Af(fk),fk},zO=function(r){delete _y[r]},Cze?Af=function(e){Pze.nextTick(pk(e))}:ck&&ck.now?Af=function(e){ck.now(pk(e))}:wL&&!Oze?(hk=new wL,dk=hk.port2,hk.port1.onmessage=_L,Af=kze(dk.postMessage,dk)):eo.addEventListener&&yL(eo.postMessage)&&!eo.importScripts&&cm&&cm.protocol!=="file:"&&!JZ(xL)?(Af=xL,eo.addEventListener("message",_L,!1)):$L in bL("script")?Af=function(e){mL.appendChild(bL("script"))[$L]=function(){mL.removeChild(this),U4(e)}}:Af=function(e){setTimeout(pk(e),0)});var QZ={set:HO,clear:zO},eX=function(){this.head=null,this.tail=null};eX.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var tX=eX,Dze=Jc,Bze=/ipad|iphone|ipod/i.test(Dze)&&typeof Pebble<"u",Mze=Jc,Lze=/web0s(?!.*chrome)/i.test(Mze),Mh=En,EL=Qc,Fze=Kh.f,vk=QZ.set,jze=tX,Hze=XZ,zze=Bze,Uze=Lze,gk=ab,SL=Mh.MutationObserver||Mh.WebKitMutationObserver,kL=Mh.document,TL=Mh.process,$1=Mh.Promise,IL=Fze(Mh,"queueMicrotask"),UO=IL&&IL.value,Ud,yk,mk,_1,AL;if(!UO){var x1=new jze,E1=function(){var e,r;for(gk&&(e=TL.domain)&&e.exit();r=x1.get();)try{r()}catch(t){throw x1.head&&Ud(),t}e&&e.enter()};!Hze&&!gk&&!Uze&&SL&&kL?(yk=!0,mk=kL.createTextNode(""),new SL(E1).observe(mk,{characterData:!0}),Ud=function(){mk.data=yk=!yk}):!zze&&$1&&$1.resolve?(_1=$1.resolve(void 0),_1.constructor=$1,AL=EL(_1.then,_1),Ud=function(){AL(E1)}):gk?Ud=function(){TL.nextTick(E1)}:(vk=EL(vk,Mh),Ud=function(){vk(E1)}),UO=function(e){x1.head||Ud(),x1.add(e)}}var Wze=UO,qze=function(e,r){try{arguments.length==1?console.error(e):console.error(e,r)}catch{}},Uv=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},Kze=En,Wv=Kze.Promise,rX=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",Vze=rX,Gze=ab,Yze=!Vze&&!Gze&&typeof window=="object"&&typeof document=="object",Zze=En,xy=Wv,Xze=Sn,Jze=xG,Qze=IG,eUe=un,tUe=Yze,rUe=rX,bk=Rv,OL=xy&&xy.prototype,nUe=eUe("species"),WO=!1,nX=Xze(Zze.PromiseRejectionEvent),iUe=Jze("Promise",function(){var e=Qze(xy),r=e!==String(xy);if(!r&&bk===66||!(OL.catch&&OL.finally))return!0;if(!bk||bk<51||!/native code/.test(e)){var t=new xy(function(s){s(1)}),n=function(s){s(function(){},function(){})},i=t.constructor={};if(i[nUe]=n,WO=t.then(function(){})instanceof n,!WO)return!0}return!r&&(tUe||rUe)&&!nX}),pb={CONSTRUCTOR:iUe,REJECTION_EVENT:nX,SUBCLASSING:WO},Pu={},CL=Ds,sUe=TypeError,oUe=function(e){var r,t;this.promise=new e(function(n,i){if(r!==void 0||t!==void 0)throw sUe("Bad Promise constructor");r=n,t=i}),this.resolve=CL(r),this.reject=CL(t)};Pu.f=function(e){return new oUe(e)};var aUe=Nt,M$=ab,qc=En,vb=bi,lUe=Lv,uUe=Yh,cUe=YZ,fUe=Ds,qO=Sn,hUe=wi,dUe=z4,pUe=ZZ,iX=QZ.set,W4=Wze,vUe=qze,gUe=Uv,yUe=tX,sX=Fv,KO=Wv,oX=pb,aX=Pu,Px="Promise",lX=oX.CONSTRUCTOR,mUe=oX.REJECTION_EVENT,wk=sX.getterFor(Px),bUe=sX.set,wUe=KO&&KO.prototype,dp=KO,$k=wUe,uX=qc.TypeError,VO=qc.document,q4=qc.process,GO=aX.f,$Ue=GO,_Ue=!!(VO&&VO.createEvent&&qc.dispatchEvent),cX="unhandledrejection",xUe="rejectionhandled",PL=0,fX=1,EUe=2,K4=1,hX=2,S1,NL,SUe,dX=function(e){var r;return hUe(e)&&qO(r=e.then)?r:!1},pX=function(e,r){var t=r.value,n=r.state==fX,i=n?e.ok:e.fail,s=e.resolve,o=e.reject,a=e.domain,l,u,f;try{i?(n||(r.rejection===hX&&TUe(r),r.rejection=K4),i===!0?l=t:(a&&a.enter(),l=i(t),a&&(a.exit(),f=!0)),l===e.promise?o(uX("Promise-chain cycle")):(u=dX(l))?vb(u,l,s,o):s(l)):o(t)}catch(c){a&&!f&&a.exit(),o(c)}},vX=function(e,r){e.notified||(e.notified=!0,W4(function(){for(var t=e.reactions,n;n=t.get();)pX(n,e);e.notified=!1,r&&!e.rejection&&kUe(e)}))},gX=function(e,r,t){var n,i;_Ue?(n=VO.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),qc.dispatchEvent(n)):n={promise:r,reason:t},!mUe&&(i=qc["on"+e])?i(n):e===cX&&vUe("Unhandled promise rejection",t)},kUe=function(e){vb(iX,qc,function(){var r=e.facade,t=e.value,n=RL(e),i;if(n&&(i=gUe(function(){M$?q4.emit("unhandledRejection",t,r):gX(cX,r,t)}),e.rejection=M$||RL(e)?hX:K4,i.error))throw i.value})},RL=function(e){return e.rejection!==K4&&!e.parent},TUe=function(e){vb(iX,qc,function(){var r=e.facade;M$?q4.emit("rejectionHandled",r):gX(xUe,r,e.value)})},pp=function(e,r,t){return function(n){e(r,n,t)}},Op=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=EUe,vX(e,!0))},YO=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw uX("Promise can't be resolved itself");var n=dX(r);n?W4(function(){var i={done:!1};try{vb(n,r,pp(YO,i,e),pp(Op,i,e))}catch(s){Op(i,s,e)}}):(e.value=r,e.state=fX,vX(e,!1))}catch(i){Op({done:!1},i,e)}}};lX&&(dp=function(r){dUe(this,$k),fUe(r),vb(S1,this);var t=wk(this);try{r(pp(YO,t),pp(Op,t))}catch(n){Op(t,n)}},$k=dp.prototype,S1=function(r){bUe(this,{type:Px,done:!1,notified:!1,parent:!1,reactions:new yUe,rejection:!1,state:PL,value:void 0})},S1.prototype=lUe($k,"then",function(r,t){var n=wk(this),i=GO(pUe(this,dp));return n.parent=!0,i.ok=qO(r)?r:!0,i.fail=qO(t)&&t,i.domain=M$?q4.domain:void 0,n.state==PL?n.reactions.add(i):W4(function(){pX(i,n)}),i.promise}),NL=function(){var e=new S1,r=wk(e);this.promise=e,this.resolve=pp(YO,r),this.reject=pp(Op,r)},aX.f=GO=function(e){return e===dp||e===SUe?new NL(e):$Ue(e)});aUe({global:!0,constructor:!0,wrap:!0,forced:lX},{Promise:dp});uUe(dp,Px,!1,!0);cUe(Px);var IUe=Wv,AUe=BY,OUe=pb.CONSTRUCTOR,Nx=OUe||!AUe(function(e){IUe.all(e).then(void 0,function(){})}),CUe=Nt,PUe=bi,NUe=Ds,RUe=Pu,DUe=Uv,BUe=Xh,MUe=Nx;CUe({target:"Promise",stat:!0,forced:MUe},{all:function(r){var t=this,n=RUe.f(t),i=n.resolve,s=n.reject,o=DUe(function(){var a=NUe(t.resolve),l=[],u=0,f=1;BUe(r,function(c){var p=u++,y=!1;f++,PUe(a,t,c).then(function(w){y||(y=!0,l[p]=w,--f||i(l))},s)}),--f||i(l)});return o.error&&s(o.value),n.promise}});var LUe=Nt,FUe=pb.CONSTRUCTOR,DL=Wv;DL&&DL.prototype;LUe({target:"Promise",proto:!0,forced:FUe,real:!0},{catch:function(e){return this.then(void 0,e)}});var jUe=Nt,HUe=bi,zUe=Ds,UUe=Pu,WUe=Uv,qUe=Xh,KUe=Nx;jUe({target:"Promise",stat:!0,forced:KUe},{race:function(r){var t=this,n=UUe.f(t),i=n.reject,s=WUe(function(){var o=zUe(t.resolve);qUe(r,function(a){HUe(o,t,a).then(n.resolve,i)})});return s.error&&i(s.value),n.promise}});var VUe=Nt,GUe=bi,YUe=Pu,ZUe=pb.CONSTRUCTOR;VUe({target:"Promise",stat:!0,forced:ZUe},{reject:function(r){var t=YUe.f(this);return GUe(t.reject,void 0,r),t.promise}});var XUe=oo,JUe=wi,QUe=Pu,yX=function(e,r){if(XUe(e),JUe(r)&&r.constructor===e)return r;var t=QUe.f(e),n=t.resolve;return n(r),t.promise},eWe=Nt,tWe=ds,rWe=pOe,nWe=Wv,iWe=pb.CONSTRUCTOR,sWe=yX,oWe=tWe("Promise"),aWe=!iWe;eWe({target:"Promise",stat:!0,forced:rWe},{resolve:function(r){return sWe(aWe&&this===oWe?nWe:this,r)}});var lWe=Nt,uWe=bi,cWe=Ds,fWe=Pu,hWe=Uv,dWe=Xh,pWe=Nx;lWe({target:"Promise",stat:!0,forced:pWe},{allSettled:function(r){var t=this,n=fWe.f(t),i=n.resolve,s=n.reject,o=hWe(function(){var a=cWe(t.resolve),l=[],u=0,f=1;dWe(r,function(c){var p=u++,y=!1;f++,uWe(a,t,c).then(function(w){y||(y=!0,l[p]={status:"fulfilled",value:w},--f||i(l))},function(w){y||(y=!0,l[p]={status:"rejected",reason:w},--f||i(l))})}),--f||i(l)});return o.error&&s(o.value),n.promise}});var vWe=Nt,gWe=bi,yWe=Ds,mWe=ds,bWe=Pu,wWe=Uv,$We=Xh,_We=Nx,BL="No one promise resolved";vWe({target:"Promise",stat:!0,forced:_We},{any:function(r){var t=this,n=mWe("AggregateError"),i=bWe.f(t),s=i.resolve,o=i.reject,a=wWe(function(){var l=yWe(t.resolve),u=[],f=0,c=1,p=!1;$We(r,function(y){var w=f++,b=!1;c++,gWe(l,t,y).then(function(T){b||p||(p=!0,s(T))},function(T){b||p||(b=!0,u[w]=T,--c||o(new n(u,BL)))})}),--c||o(new n(u,BL))});return a.error&&o(a.value),i.promise}});var xWe=Nt,ZO=Wv,EWe=kr,SWe=ds,kWe=Sn,TWe=ZZ,ML=yX,IWe=ZO&&ZO.prototype,AWe=!!ZO&&EWe(function(){IWe.finally.call({then:function(){}},function(){})});xWe({target:"Promise",proto:!0,real:!0,forced:AWe},{finally:function(e){var r=TWe(this,SWe("Promise")),t=kWe(e);return this.then(t?function(n){return ML(r,e()).then(function(){return n})}:e,t?function(n){return ML(r,e()).then(function(){throw n})}:e)}});var OWe=Vr,CWe=OWe.Promise,PWe=CWe,NWe=PWe,RWe=NWe,DWe=RWe,BWe=Nt,MWe=Pu,LWe=Uv;BWe({target:"Promise",stat:!0,forced:!0},{try:function(e){var r=MWe.f(this),t=LWe(e);return(t.error?r.reject:r.resolve)(t.value),r.promise}});var FWe=DWe,jWe=FWe;(function(e){e.exports=jWe})(kHe);(function(e){e.exports=jO})(SHe);var XO={},HWe={get exports(){return XO},set exports(e){XO=e}},JO={},zWe={get exports(){return JO},set exports(e){JO=e}},UWe=XY,WWe=UWe,qWe=WWe,KWe=qWe;(function(e){e.exports=KWe})(zWe);(function(e){e.exports=JO})(HWe);(function(e){var r=BO.default,t=w$,n=tm,i=C$,s=N$,o=MO,a=P$,l=FO,u=XO,f=k$;function c(){e.exports=c=function(){return p},e.exports.__esModule=!0,e.exports.default=e.exports;var p={},y=Object.prototype,w=y.hasOwnProperty,b=t||function(xe,ge,Te){xe[ge]=Te.value},T=typeof n=="function"?n:{},_=T.iterator||"@@iterator",A=T.asyncIterator||"@@asyncIterator",x=T.toStringTag||"@@toStringTag";function I(xe,ge,Te){return t(xe,ge,{value:Te,enumerable:!0,configurable:!0,writable:!0}),xe[ge]}try{I({},"")}catch{I=function(Te,Fe,$){return Te[Fe]=$}}function O(xe,ge,Te,Fe){var $=ge&&ge.prototype instanceof M?ge:M,S=i($.prototype),N=new ze(Fe||[]);return b(S,"_invoke",{value:ie(xe,Te,N)}),S}function C(xe,ge,Te){try{return{type:"normal",arg:xe.call(ge,Te)}}catch(Fe){return{type:"throw",arg:Fe}}}p.wrap=O;var g={};function M(){}function B(){}function L(){}var q={};I(q,_,function(){return this});var Q=s,te=Q&&Q(Q(Ge([])));te&&te!==y&&w.call(te,_)&&(q=te);var X=L.prototype=M.prototype=i(q);function j(xe){var ge;o(ge=["next","throw","return"]).call(ge,function(Te){I(xe,Te,function(Fe){return this._invoke(Te,Fe)})})}function Z(xe,ge){function Te($,S,N,F){var H=C(xe[$],xe,S);if(H.type!=="throw"){var V=H.arg,le=V.value;return le&&r(le)=="object"&&w.call(le,"__await")?ge.resolve(le.__await).then(function(ye){Te("next",ye,N,F)},function(ye){Te("throw",ye,N,F)}):ge.resolve(le).then(function(ye){V.value=ye,N(V)},function(ye){return Te("throw",ye,N,F)})}F(H.arg)}var Fe;b(this,"_invoke",{value:function(S,N){function F(){return new ge(function(H,V){Te(S,N,H,V)})}return Fe=Fe?Fe.then(F,F):F()}})}function ie(xe,ge,Te){var Fe="suspendedStart";return function($,S){if(Fe==="executing")throw new Error("Generator is already running");if(Fe==="completed"){if($==="throw")throw S;return it()}for(Te.method=$,Te.arg=S;;){var N=Te.delegate;if(N){var F=_e(N,Te);if(F){if(F===g)continue;return F}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(Fe==="suspendedStart")throw Fe="completed",Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);Fe="executing";var H=C(xe,ge,Te);if(H.type==="normal"){if(Fe=Te.done?"completed":"suspendedYield",H.arg===g)continue;return{value:H.arg,done:Te.done}}H.type==="throw"&&(Fe="completed",Te.method="throw",Te.arg=H.arg)}}}function _e(xe,ge){var Te=ge.method,Fe=xe.iterator[Te];if(Fe===void 0)return ge.delegate=null,Te==="throw"&&xe.iterator.return&&(ge.method="return",ge.arg=void 0,_e(xe,ge),ge.method==="throw")||Te!=="return"&&(ge.method="throw",ge.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),g;var $=C(Fe,xe.iterator,ge.arg);if($.type==="throw")return ge.method="throw",ge.arg=$.arg,ge.delegate=null,g;var S=$.arg;return S?S.done?(ge[xe.resultName]=S.value,ge.next=xe.nextLoc,ge.method!=="return"&&(ge.method="next",ge.arg=void 0),ge.delegate=null,g):S:(ge.method="throw",ge.arg=new TypeError("iterator result is not an object"),ge.delegate=null,g)}function we(xe){var ge={tryLoc:xe[0]};1 in xe&&(ge.catchLoc=xe[1]),2 in xe&&(ge.finallyLoc=xe[2],ge.afterLoc=xe[3]),this.tryEntries.push(ge)}function Ce(xe){var ge=xe.completion||{};ge.type="normal",delete ge.arg,xe.completion=ge}function ze(xe){this.tryEntries=[{tryLoc:"root"}],o(xe).call(xe,we,this),this.reset(!0)}function Ge(xe){if(xe){var ge=xe[_];if(ge)return ge.call(xe);if(typeof xe.next=="function")return xe;if(!isNaN(xe.length)){var Te=-1,Fe=function $(){for(;++Te<xe.length;)if(w.call(xe,Te))return $.value=xe[Te],$.done=!1,$;return $.value=void 0,$.done=!0,$};return Fe.next=Fe}}return{next:it}}function it(){return{value:void 0,done:!0}}return B.prototype=L,b(X,"constructor",{value:L,configurable:!0}),b(L,"constructor",{value:B,configurable:!0}),B.displayName=I(L,x,"GeneratorFunction"),p.isGeneratorFunction=function(xe){var ge=typeof xe=="function"&&xe.constructor;return!!ge&&(ge===B||(ge.displayName||ge.name)==="GeneratorFunction")},p.mark=function(xe){return a?a(xe,L):(xe.__proto__=L,I(xe,x,"GeneratorFunction")),xe.prototype=i(X),xe},p.awrap=function(xe){return{__await:xe}},j(Z.prototype),I(Z.prototype,A,function(){return this}),p.AsyncIterator=Z,p.async=function(xe,ge,Te,Fe,$){$===void 0&&($=l);var S=new Z(O(xe,ge,Te,Fe),$);return p.isGeneratorFunction(ge)?S:S.next().then(function(N){return N.done?N.value:S.next()})},j(X),I(X,x,"Generator"),I(X,_,function(){return this}),I(X,"toString",function(){return"[object Generator]"}),p.keys=function(xe){var ge=Object(xe),Te=[];for(var Fe in ge)Te.push(Fe);return u(Te).call(Te),function $(){for(;Te.length;){var S=Te.pop();if(S in ge)return $.value=S,$.done=!1,$}return $.done=!0,$}},p.values=Ge,ze.prototype={constructor:ze,reset:function(ge){var Te;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(Te=this.tryEntries).call(Te,Ce),!ge)for(var Fe in this)Fe.charAt(0)==="t"&&w.call(this,Fe)&&!isNaN(+f(Fe).call(Fe,1))&&(this[Fe]=void 0)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if(ge.type==="throw")throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var Te=this;function Fe(V,le){return N.type="throw",N.arg=ge,Te.next=V,le&&(Te.method="next",Te.arg=void 0),!!le}for(var $=this.tryEntries.length-1;$>=0;--$){var S=this.tryEntries[$],N=S.completion;if(S.tryLoc==="root")return Fe("end");if(S.tryLoc<=this.prev){var F=w.call(S,"catchLoc"),H=w.call(S,"finallyLoc");if(F&&H){if(this.prev<S.catchLoc)return Fe(S.catchLoc,!0);if(this.prev<S.finallyLoc)return Fe(S.finallyLoc)}else if(F){if(this.prev<S.catchLoc)return Fe(S.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return Fe(S.finallyLoc)}}}},abrupt:function(ge,Te){for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var $=this.tryEntries[Fe];if($.tryLoc<=this.prev&&w.call($,"finallyLoc")&&this.prev<$.finallyLoc){var S=$;break}}S&&(ge==="break"||ge==="continue")&&S.tryLoc<=Te&&Te<=S.finallyLoc&&(S=null);var N=S?S.completion:{};return N.type=ge,N.arg=Te,S?(this.method="next",this.next=S.finallyLoc,g):this.complete(N)},complete:function(ge,Te){if(ge.type==="throw")throw ge.arg;return ge.type==="break"||ge.type==="continue"?this.next=ge.arg:ge.type==="return"?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):ge.type==="normal"&&Te&&(this.next=Te),g},finish:function(ge){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Fe=this.tryEntries[Te];if(Fe.finallyLoc===ge)return this.complete(Fe.completion,Fe.afterLoc),Ce(Fe),g}},catch:function(ge){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Fe=this.tryEntries[Te];if(Fe.tryLoc===ge){var $=Fe.completion;if($.type==="throw"){var S=$.arg;Ce(Fe)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(ge,Te,Fe){return this.delegate={iterator:Ge(ge),resultName:Te,nextLoc:Fe},this.method==="next"&&(this.arg=void 0),g}},p}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports})(yHe);var _w=DO(),Es=_w;try{regeneratorRuntime=_w}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=_w:Function("r","regeneratorRuntime = r")(_w)}var QO={},VWe={get exports(){return QO},set exports(e){QO=e}},L$={},GWe={get exports(){return L$},set exports(e){L$=e}},YWe=kr,ZWe=YWe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),XWe=kr,JWe=wi,QWe=Au,LL=ZWe,xw=Object.isExtensible,eqe=XWe(function(){xw(1)}),tqe=eqe||LL?function(r){return!JWe(r)||LL&&QWe(r)=="ArrayBuffer"?!1:xw?xw(r):!0}:xw,rqe=kr,nqe=!rqe(function(){return Object.isExtensible(Object.preventExtensions({}))}),iqe=Nt,sqe=Br,oqe=Jm,aqe=wi,V4=Vn,lqe=so.f,FL=eb,uqe=m4,G4=tqe,cqe=fx,fqe=nqe,mX=!1,xu=cqe("meta"),hqe=0,Y4=function(e){lqe(e,xu,{value:{objectID:"O"+hqe++,weakData:{}}})},dqe=function(e,r){if(!aqe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!V4(e,xu)){if(!G4(e))return"F";if(!r)return"E";Y4(e)}return e[xu].objectID},pqe=function(e,r){if(!V4(e,xu)){if(!G4(e))return!0;if(!r)return!1;Y4(e)}return e[xu].weakData},vqe=function(e){return fqe&&mX&&G4(e)&&!V4(e,xu)&&Y4(e),e},gqe=function(){yqe.enable=function(){},mX=!0;var e=FL.f,r=sqe([].splice),t={};t[xu]=1,e(t).length&&(FL.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===xu){r(i,s,1);break}return i},iqe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:uqe.f}))},yqe=GWe.exports={enable:gqe,fastKey:dqe,getWeakData:pqe,onFreeze:vqe};oqe[xu]=!0;var mqe=Nt,bqe=En,wqe=L$,$qe=kr,_qe=Ou,xqe=Xh,Eqe=z4,Sqe=Sn,kqe=wi,Tqe=Yh,Iqe=so.f,Aqe=jv.forEach,Oqe=si,bX=Fv,Cqe=bX.set,Pqe=bX.getterFor,wX=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=bqe[e],a=o&&o.prototype,l={},u;if(!Oqe||!Sqe(o)||!(i||a.forEach&&!$qe(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),wqe.enable();else{u=r(function(p,y){Cqe(Eqe(p,f),{type:e,collection:new o}),y!=null&&xqe(y,p[s],{that:p,AS_ENTRIES:n})});var f=u.prototype,c=Pqe(e);Aqe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var y=p=="add"||p=="set";p in a&&!(i&&p=="clear")&&_qe(f,p,function(w,b){var T=c(this).collection;if(!y&&i&&!kqe(w))return p=="get"?void 0:!1;var _=T[p](w===0?0:w,b);return y?this:_})}),i||Iqe(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return Tqe(u,e,!1,!0),l[e]=u,mqe({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},Nqe=Lv,Rqe=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:Nqe(e,n,r[n],t);return e},Dqe=Gh,Bqe=b4,jL=Rqe,Mqe=Qc,Lqe=z4,Fqe=Km,jqe=Xh,Hqe=k4,k1=T4,zqe=YZ,Hg=si,HL=L$.fastKey,$X=Fv,zL=$X.set,_k=$X.getterFor,_X={getConstructor:function(e,r,t,n){var i=e(function(u,f){Lqe(u,s),zL(u,{type:r,index:Dqe(null),first:void 0,last:void 0,size:0}),Hg||(u.size=0),Fqe(f)||jqe(f,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=_k(r),a=function(u,f,c){var p=o(u),y=l(u,f),w,b;return y?y.value=c:(p.last=y={index:b=HL(f,!0),key:f,value:c,previous:w=p.last,next:void 0,removed:!1},p.first||(p.first=y),w&&(w.next=y),Hg?p.size++:u.size++,b!=="F"&&(p.index[b]=y)),u},l=function(u,f){var c=o(u),p=HL(f),y;if(p!=="F")return c.index[p];for(y=c.first;y;y=y.next)if(y.key==f)return y};return jL(s,{clear:function(){for(var f=this,c=o(f),p=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete p[y.index],y=y.next;c.first=c.last=void 0,Hg?c.size=0:f.size=0},delete:function(u){var f=this,c=o(f),p=l(f,u);if(p){var y=p.next,w=p.previous;delete c.index[p.index],p.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==p&&(c.first=y),c.last==p&&(c.last=w),Hg?c.size--:f.size--}return!!p},forEach:function(f){for(var c=o(this),p=Mqe(f,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(p(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(f){return!!l(this,f)}}),jL(s,t?{get:function(f){var c=l(this,f);return c&&c.value},set:function(f,c){return a(this,f===0?0:f,c)}}:{add:function(f){return a(this,f=f===0?0:f,f)}}),Hg&&Bqe(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=_k(r),s=_k(n);Hqe(e,r,function(o,a){zL(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,k1(void 0,!0)):a=="keys"?k1(l.key,!1):a=="values"?k1(l.value,!1):k1([l.key,l.value],!1)},t?"entries":"values",!t,!0),zqe(r)}},Uqe=wX,Wqe=_X;Uqe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Wqe);var qqe=Vr,Kqe=qqe.Map,Vqe=Kqe,Gqe=Vqe;(function(e){e.exports=Gqe})(VWe);var xX=Vt(QO),eC={},Yqe={get exports(){return eC},set exports(e){eC=e}},Zqe=Nt,Xqe=jv.some,Jqe=ob,Qqe=Jqe("some");Zqe({target:"Array",proto:!0,forced:!Qqe},{some:function(r){return Xqe(this,r,arguments.length>1?arguments[1]:void 0)}});var eKe=Gn,tKe=eKe("Array").some,rKe=ln,nKe=tKe,xk=Array.prototype,iKe=function(e){var r=e.some;return e===xk||rKe(xk,e)&&r===xk.some?nKe:r},sKe=iKe,oKe=sKe;(function(e){e.exports=oKe})(Yqe);var aKe=Vt(eC),tC={},lKe={get exports(){return tC},set exports(e){tC=e}},uKe=Gn,cKe=uKe("Array").keys,fKe=cKe,hKe=fKe,dKe=Cu,pKe=Vn,vKe=ln,gKe=hKe,Ek=Array.prototype,yKe={DOMTokenList:!0,NodeList:!0},mKe=function(e){var r=e.keys;return e===Ek||vKe(Ek,e)&&r===Ek.keys||pKe(yKe,dKe(e))?gKe:r};(function(e){e.exports=mKe})(lKe);var Wd=Vt(tC),rC={},bKe={get exports(){return rC},set exports(e){rC=e}},UL=LG,wKe=Math.floor,nC=function(e,r){var t=e.length,n=wKe(t/2);return t<8?$Ke(e,r):_Ke(e,nC(UL(e,0,n),r),nC(UL(e,n),r),r)},$Ke=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},_Ke=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},xKe=nC,EKe=Jc,WL=EKe.match(/firefox\/(\d+)/i),SKe=!!WL&&+WL[1],kKe=Jc,TKe=/MSIE|Trident/.test(kKe),IKe=Jc,qL=IKe.match(/AppleWebKit\/(\d+)\./),AKe=!!qL&&+qL[1],OKe=Nt,EX=Br,CKe=Ds,PKe=Bs,KL=ao,NKe=JY,VL=Sl,Z4=kr,RKe=xKe,DKe=ob,GL=SKe,BKe=TKe,YL=Rv,ZL=AKe,Sc=[],XL=EX(Sc.sort),MKe=EX(Sc.push),LKe=Z4(function(){Sc.sort(void 0)}),FKe=Z4(function(){Sc.sort(null)}),jKe=DKe("sort"),SX=!Z4(function(){if(YL)return YL<70;if(!(GL&&GL>3)){if(BKe)return!0;if(ZL)return ZL<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Sc.push({k:t+i,v:n})}for(Sc.sort(function(s,o){return o.v-s.v}),i=0;i<Sc.length;i++)t=Sc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),HKe=LKe||!FKe||!jKe||!SX,zKe=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:VL(r)>VL(t)?1:-1}};OKe({target:"Array",proto:!0,forced:HKe},{sort:function(r){r!==void 0&&CKe(r);var t=PKe(this);if(SX)return r===void 0?XL(t):XL(t,r);var n=[],i=KL(t),s,o;for(o=0;o<i;o++)o in t&&MKe(n,t[o]);for(RKe(n,zKe(r)),s=KL(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)NKe(t,o++);return t}});var UKe=Gn,WKe=UKe("Array").sort,qKe=ln,KKe=WKe,Sk=Array.prototype,VKe=function(e){var r=e.sort;return e===Sk||qKe(Sk,e)&&r===Sk.sort?KKe:r},GKe=VKe,YKe=GKe;(function(e){e.exports=YKe})(bKe);var iC=Vt(rC),sC={},ZKe={get exports(){return sC},set exports(e){sC=e}},XKe=Gn,JKe=XKe("Array").values,QKe=JKe,eVe=QKe,tVe=Cu,rVe=Vn,nVe=ln,iVe=eVe,kk=Array.prototype,sVe={DOMTokenList:!0,NodeList:!0},oVe=function(e){var r=e.values;return e===kk||nVe(kk,e)&&r===kk.values||rVe(sVe,tVe(e))?iVe:r};(function(e){e.exports=oVe})(ZKe);var JL=Vt(sC),oC={},aVe={get exports(){return oC},set exports(e){oC=e}};(function(e){e.exports=EY})(aVe);var Cp=Vt(oC),aC={},lVe={get exports(){return aC},set exports(e){aC=e}},uVe=Gn,cVe=uVe("Array").entries,fVe=cVe,hVe=fVe,dVe=Cu,pVe=Vn,vVe=ln,gVe=hVe,Tk=Array.prototype,yVe={DOMTokenList:!0,NodeList:!0},mVe=function(e){var r=e.entries;return e===Tk||vVe(Tk,e)&&r===Tk.entries||pVe(yVe,dVe(e))?gVe:r};(function(e){e.exports=mVe})(lVe);var bVe=Vt(aC);let T1;const wVe=new Uint8Array(16);function $Ve(){if(!T1&&(T1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!T1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return T1(wVe)}const ki=[];for(let e=0;e<256;++e)ki.push((e+256).toString(16).slice(1));function _Ve(e,r=0){return(ki[e[r+0]]+ki[e[r+1]]+ki[e[r+2]]+ki[e[r+3]]+"-"+ki[e[r+4]]+ki[e[r+5]]+"-"+ki[e[r+6]]+ki[e[r+7]]+"-"+ki[e[r+8]]+ki[e[r+9]]+"-"+ki[e[r+10]]+ki[e[r+11]]+ki[e[r+12]]+ki[e[r+13]]+ki[e[r+14]]+ki[e[r+15]]).toLowerCase()}const xVe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var QL={randomUUID:xVe};function EVe(e,r,t){if(QL.randomUUID&&!r&&!e)return QL.randomUUID();e=e||{};const n=e.random||(e.rng||$Ve)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return _Ve(n)}function eF(e){return typeof e=="string"||typeof e=="number"}var SVe=function(){function e(r){ux(this,e),On(this,"delay",void 0),On(this,"max",void 0),On(this,"_queue",[]),On(this,"_timeout",null),On(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(r)}return Sx(e,[{key:"setOptions",value:function(t){t&&typeof t.delay<"u"&&(this.delay=t.delay),t&&typeof t.max<"u"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,n=this._extended.methods,i=0;i<n.length;i++){var s=n[i];s.original?t[s.name]=s.original:delete t[s.name]}this._extended=null}}},{key:"replace",value:function(t,n){var i=this,s=t[n];if(!s)throw new Error("Method "+n+" undefined");t[n]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=v9e(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,n;Nh(t=QY(n=this._queue).call(n,0)).call(t,function(i){i.fn.apply(i.context||i.fn,i.args||[])})}}],[{key:"extend",value:function(t,n){var i=new e(n);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var s=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];s.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:s},i}}]),e}(),kVe=function(){function e(){ux(this,e),On(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),On(this,"subscribe",e.prototype.on),On(this,"unsubscribe",e.prototype.off)}return Sx(e,[{key:"_trigger",value:function(t,n,i){var s,o;if(t==="*")throw new Error("Cannot trigger event *");Nh(s=Ix(o=[]).call(o,Is(this._subscribers[t]),Is(this._subscribers["*"]))).call(s,function(a){a(t,n,i??null)})}},{key:"on",value:function(t,n){typeof n=="function"&&this._subscribers[t].push(n)}},{key:"off",value:function(t,n){var i;this._subscribers[t]=cp(i=this._subscribers[t]).call(i,function(s){return s!==n})}}]),e}(),lC={},TVe={get exports(){return lC},set exports(e){lC=e}},IVe=wX,AVe=_X;IVe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},AVe);var OVe=Vr,CVe=OVe.Set,PVe=CVe,NVe=PVe;(function(e){e.exports=NVe})(TVe);var Ik=Vt(lC),uC={},RVe={get exports(){return uC},set exports(e){uC=e}},cC={},DVe={get exports(){return cC},set exports(e){cC=e}},BVe=A4,MVe=BVe,LVe=MVe,FVe=LVe,jVe=FVe,HVe=jVe,zVe=HVe,UVe=zVe;(function(e){e.exports=UVe})(DVe);(function(e){e.exports=cC})(RVe);var Ak=Vt(uC),kX;function rl(e,r){var t=typeof Tx<"u"&&lb(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=WVe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function WVe(e,r){var t;if(e){if(typeof e=="string")return tF(e,r);var n=Ax(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return O4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tF(e,r)}}function tF(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}kX=Cp;var rF=function(){function e(r){ux(this,e),On(this,"_pairs",void 0),this._pairs=r}return Sx(e,[{key:kX,value:Es.mark(function r(){var t,n,i,s,o;return Es.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=rl(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=_s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:Es.mark(function r(){var t,n,i,s,o;return Es.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=rl(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=_s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:Es.mark(function r(){var t,n,i,s;return Es.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=rl(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=_s(n.value,1),s=i[0],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:Es.mark(function r(){var t,n,i,s;return Es.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=rl(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=_s(n.value,2),s=i[1],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return ya(t=Is(this._pairs)).call(t,function(n){return n[0]})}},{key:"toItemArray",value:function(){var t;return ya(t=Is(this._pairs)).call(t,function(n){return n[1]})}},{key:"toEntryArray",value:function(){return Is(this._pairs)}},{key:"toObjectMap",value:function(){var t=qFe(null),n=rl(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=_s(i.value,2),o=s[0],a=s[1];t[o]=a}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"toMap",value:function(){return new xX(this._pairs)}},{key:"toIdSet",value:function(){return new Ik(this.toIdArray())}},{key:"toItemSet",value:function(){return new Ik(this.toItemArray())}},{key:"cache",value:function(){return new e(Is(this._pairs))}},{key:"distinct",value:function(t){var n=new Ik,i=rl(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=_s(s.value,2),a=o[0],l=o[1];n.add(t(l,a))}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e(On({},Cp,Es.mark(function i(){var s,o,a,l,u;return Es.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=rl(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=10;break}if(a=_s(o.value,2),l=a[0],u=a[1],!t(u,l)){c.next=8;break}return c.next=8,[l,u];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),s.e(c.t0);case 15:return c.prev=15,s.f(),c.finish(15);case 18:case"end":return c.stop()}},i,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var n=rl(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=_s(i.value,2),o=s[0],a=s[1];t(a,o)}}catch(l){n.e(l)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e(On({},Cp,Es.mark(function i(){var s,o,a,l,u;return Es.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=rl(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=9;break}return a=_s(o.value,2),l=a[0],u=a[1],c.next=7,[l,t(u,l)];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),s.e(c.t0);case 14:return c.prev=14,s.f(),c.finish(14);case 17:case"end":return c.stop()}},i,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var n=Ak(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=_s(i.value,2),l=a[0],u=a[1],f=t(u,l);f>o&&(o=f,s=u)}return s}},{key:"min",value:function(t){var n=Ak(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=_s(i.value,2),l=a[0],u=a[1],f=t(u,l);f<o&&(o=f,s=u)}return s}},{key:"reduce",value:function(t,n){var i=rl(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=_s(s.value,2),a=o[0],l=o[1];n=t(n,l,a)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"sort",value:function(t){var n=this;return new e(On({},Cp,function(){var i;return Ak(iC(i=Is(n._pairs)).call(i,function(s,o){var a=_s(s,2),l=a[0],u=a[1],f=_s(o,2),c=f[0],p=f[1];return t(u,p,l,c)}))}))}}]),e}();function nF(e,r){var t=P4(e);if(g7){var n=g7(e);r&&(n=cp(n).call(n,function(i){return HY(e,i).enumerable})),t.push.apply(t,n)}return t}function iF(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Nh(t=nF(Object(i),!0)).call(t,function(s){On(e,s,i[s])}):y7?Z6e(e,y7(i)):Nh(n=nF(Object(i))).call(n,function(s){J6e(e,s,HY(i,s))})}return e}function Ok(e,r){var t=typeof Tx<"u"&&lb(e)||e["@@iterator"];if(!t){if(Vs(e)||(t=qVe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function qVe(e,r){var t;if(e){if(typeof e=="string")return sF(e,r);var n=Ax(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return O4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sF(e,r)}}function sF(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function KVe(e){var r=VVe();return function(){var n=R$(e),i;if(r){var s=R$(this).constructor;i=ww(n,arguments,s)}else i=n.apply(this,arguments);return cHe(this,i)}}function VVe(){if(typeof Reflect>"u"||!ww||ww.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ww(Boolean,[],function(){})),!0}catch{return!1}}function GVe(e,r){return e[r]==null&&(e[r]=EVe()),e}var Ea=function(e){uHe(t,e);var r=KVe(t);function t(n,i){var s;return ux(this,t),s=r.call(this),On(Nf(s),"flush",void 0),On(Nf(s),"length",void 0),On(Nf(s),"_options",void 0),On(Nf(s),"_data",void 0),On(Nf(s),"_idProp",void 0),On(Nf(s),"_queue",null),n&&!Vs(n)&&(i=n,n=[]),s._options=i||{},s._data=new xX,s.length=0,s._idProp=s._options.fieldId||"id",n&&n.length&&s.add(n),s.setOptions(i),s}return Sx(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=SVe.extend(this,{replace:["add","update","remove"]})),i.queue&&Ci(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,s){var o=this,a=[],l;if(Vs(i)){var u=ya(i).call(i,function(p){return p[o._idProp]});if(aKe(u).call(u,function(p){return o._data.has(p)}))throw new Error("A duplicate id was found in the parameter array.");for(var f=0,c=i.length;f<c;f++)l=this._addItem(i[f]),a.push(l)}else if(i&&Ci(i)==="object")l=this._addItem(i),a.push(l);else throw new Error("Unknown dataType");return a.length&&this._trigger("add",{items:a},s),a}},{key:"update",value:function(i,s){var o=this,a=[],l=[],u=[],f=[],c=this._idProp,p=function(_){var A=_[c];if(A!=null&&o._data.has(A)){var x=_,I=q7e({},o._data.get(A)),O=o._updateItem(x);l.push(O),f.push(x),u.push(I)}else{var C=o._addItem(_);a.push(C)}};if(Vs(i))for(var y=0,w=i.length;y<w;y++)i[y]&&Ci(i[y])==="object"?p(i[y]):console.warn("Ignoring input item, which is not an object at index "+y);else if(i&&Ci(i)==="object")p(i);else throw new Error("Unknown dataType");if(a.length&&this._trigger("add",{items:a},s),l.length){var b={items:l,oldData:u,data:f};this._trigger("update",b,s)}return Ix(a).call(a,l)}},{key:"updateOnly",value:function(i,s){var o,a=this;Vs(i)||(i=[i]);var l=ya(o=ya(i).call(i,function(f){var c=a._data.get(f[a._idProp]);if(c==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:c,update:f}})).call(o,function(f){var c=f.oldData,p=f.update,y=c[a._idProp],w=bje(c,p);return a._data.set(y,w),{id:y,oldData:c,updatedData:w}});if(l.length){var u={items:ya(l).call(l,function(f){return f.id}),oldData:ya(l).call(l,function(f){return f.oldData}),data:ya(l).call(l,function(f){return f.updatedData})};return this._trigger("update",u,s),u.items}else return[]}},{key:"get",value:function(i,s){var o=void 0,a=void 0,l=void 0;eF(i)?(o=i,l=s):Vs(i)?(a=i,l=s):l=i;var u=l&&l.returnType==="Object"?"Object":"Array",f=l&&cp(l),c=[],p=void 0,y=void 0,w=void 0;if(o!=null)p=this._data.get(o),p&&f&&!f(p)&&(p=void 0);else if(a!=null)for(var b=0,T=a.length;b<T;b++)p=this._data.get(a[b]),p!=null&&(!f||f(p))&&c.push(p);else{var _;y=Is(Wd(_=this._data).call(_));for(var A=0,x=y.length;A<x;A++)w=y[A],p=this._data.get(w),p!=null&&(!f||f(p))&&c.push(p)}if(l&&l.order&&o==null&&this._sort(c,l.order),l&&l.fields){var I=l.fields;if(o!=null&&p!=null)p=this._filterFields(p,I);else for(var O=0,C=c.length;O<C;O++)c[O]=this._filterFields(c[O],I)}if(u=="Object"){for(var g={},M=0,B=c.length;M<B;M++){var L=c[M],q=L[this._idProp];g[q]=L}return g}else if(o!=null){var Q;return(Q=p)!==null&&Q!==void 0?Q:null}else return c}},{key:"getIds",value:function(i){var s=this._data,o=i&&cp(i),a=i&&i.order,l=Is(Wd(s).call(s)),u=[];if(o)if(a){for(var f=[],c=0,p=l.length;c<p;c++){var y=l[c],w=this._data.get(y);w!=null&&o(w)&&f.push(w)}this._sort(f,a);for(var b=0,T=f.length;b<T;b++)u.push(f[b][this._idProp])}else for(var _=0,A=l.length;_<A;_++){var x=l[_],I=this._data.get(x);I!=null&&o(I)&&u.push(I[this._idProp])}else if(a){for(var O=[],C=0,g=l.length;C<g;C++){var M=l[C];O.push(s.get(M))}this._sort(O,a);for(var B=0,L=O.length;B<L;B++)u.push(O[B][this._idProp])}else for(var q=0,Q=l.length;q<Q;q++){var te=l[q],X=s.get(te);X!=null&&u.push(X[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,s){var o=s&&cp(s),a=this._data,l=Is(Wd(a).call(a));if(s&&s.order)for(var u=this.get(s),f=0,c=u.length;f<c;f++){var p=u[f],y=p[this._idProp];i(p,y)}else for(var w=0,b=l.length;w<b;w++){var T=l[w],_=this._data.get(T);_!=null&&(!o||o(_))&&i(_,T)}}},{key:"map",value:function(i,s){for(var o=s&&cp(s),a=[],l=this._data,u=Is(Wd(l).call(l)),f=0,c=u.length;f<c;f++){var p=u[f],y=this._data.get(p);y!=null&&(!o||o(y))&&a.push(i(y,p))}return s&&s.order&&this._sort(a,s.order),a}},{key:"_filterFields",value:function(i,s){var o;return i&&EDe(o=Vs(s)?s:P4(s)).call(o,function(a,l){return a[l]=i[l],a},{})}},{key:"_sort",value:function(i,s){if(typeof s=="string"){var o=s;iC(i).call(i,function(a,l){var u=a[o],f=l[o];return u>f?1:u<f?-1:0})}else if(typeof s=="function")iC(i).call(i,s);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,s){for(var o=[],a=[],l=Vs(i)?i:[i],u=0,f=l.length;u<f;u++){var c=this._remove(l[u]);if(c){var p=c[this._idProp];p!=null&&(o.push(p),a.push(c))}}return o.length&&this._trigger("remove",{items:o,oldData:a},s),o}},{key:"_remove",value:function(i){var s;if(eF(i)?s=i:i&&Ci(i)==="object"&&(s=i[this._idProp]),s!=null&&this._data.has(s)){var o=this._data.get(s)||null;return this._data.delete(s),--this.length,o}return null}},{key:"clear",value:function(i){for(var s,o=Is(Wd(s=this._data).call(s)),a=[],l=0,u=o.length;l<u;l++)a.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:a},i),o}},{key:"max",value:function(i){var s,o=null,a=null,l=Ok(JL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=f[i];typeof c=="number"&&(a==null||c>a)&&(o=f,a=c)}}catch(p){l.e(p)}finally{l.f()}return o||null}},{key:"min",value:function(i){var s,o=null,a=null,l=Ok(JL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=f[i];typeof c=="number"&&(a==null||c<a)&&(o=f,a=c)}}catch(p){l.e(p)}finally{l.f()}return o||null}},{key:"distinct",value:function(i){for(var s=this._data,o=Is(Wd(s).call(s)),a=[],l=0,u=0,f=o.length;u<f;u++){for(var c=o[u],p=s.get(c),y=p[i],w=!1,b=0;b<l;b++)if(a[b]==y){w=!0;break}!w&&y!==void 0&&(a[l]=y,l++)}return a}},{key:"_addItem",value:function(i){var s=GVe(i,this._idProp),o=s[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,s),++this.length,o}},{key:"_updateItem",value:function(i){var s=i[this._idProp];if(s==null)throw new Error("Cannot update item: item has no id (item: "+XFe(i)+")");var o=this._data.get(s);if(!o)throw new Error("Cannot update item: no item with id "+s+" found");return this._data.set(s,iF(iF({},o),i)),s}},{key:"stream",value:function(i){if(i){var s=this._data;return new rF(On({},Cp,Es.mark(function a(){var l,u,f,c;return Es.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:l=Ok(i),y.prev=1,l.s();case 3:if((u=l.n()).done){y.next=11;break}if(f=u.value,c=s.get(f),c==null){y.next=9;break}return y.next=9,[f,c];case 9:y.next=3;break;case 11:y.next=16;break;case 13:y.prev=13,y.t0=y.catch(1),l.e(y.t0);case 16:return y.prev=16,l.f(),y.finish(16);case 19:case"end":return y.stop()}},a,null,[[1,13,16,19]])})))}else{var o;return new rF(On({},Cp,OY(o=bVe(this._data)).call(o,this._data)))}}}]),t}(kVe);function YVe(e,r){return Ci(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof Nh(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ya(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function TX(e,r){return Ci(r)==="object"&&r!==null&&e===r.idProp&&typeof Nh(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ya(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&YVe(e,r.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.6
 * @date    2023-03-23T21:31:19.223Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var fC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hC={},ZVe={get exports(){return hC},set exports(e){hC=e}},I1=function(e){return e&&e.Math==Math&&e},Yn=I1(typeof globalThis=="object"&&globalThis)||I1(typeof window=="object"&&window)||I1(typeof self=="object"&&self)||I1(typeof fC=="object"&&fC)||function(){return this}()||Function("return this")(),Tr=function(e){try{return!!e()}catch{return!0}},XVe=Tr,gb=!XVe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),JVe=gb,IX=Function.prototype,oF=IX.apply,aF=IX.call,yb=typeof Reflect=="object"&&Reflect.apply||(JVe?aF.bind(oF):function(){return aF.apply(oF,arguments)}),AX=gb,OX=Function.prototype,dC=OX.call,QVe=AX&&OX.bind.bind(dC,dC),Ir=AX?QVe:function(e){return function(){return dC.apply(e,arguments)}},CX=Ir,eGe=CX({}.toString),tGe=CX("".slice),Nu=function(e){return tGe(eGe(e),8,-1)},rGe=Nu,nGe=Ir,X4=function(e){if(rGe(e)==="Function")return nGe(e)},pC=typeof document=="object"&&document.all,iGe=typeof pC>"u"&&pC!==void 0,PX={all:pC,IS_HTMLDDA:iGe},NX=PX,sGe=NX.all,$i=NX.IS_HTMLDDA?function(e){return typeof e=="function"||e===sGe}:function(e){return typeof e=="function"},qv={},oGe=Tr,oi=!oGe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),aGe=gb,A1=Function.prototype.call,lo=aGe?A1.bind(A1):function(){return A1.apply(A1,arguments)},mb={},RX={}.propertyIsEnumerable,DX=Object.getOwnPropertyDescriptor,lGe=DX&&!RX.call({1:2},1);mb.f=lGe?function(r){var t=DX(this,r);return!!t&&t.enumerable}:RX;var bb=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},uGe=Ir,cGe=Tr,fGe=Nu,Ck=Object,hGe=uGe("".split),Rx=cGe(function(){return!Ck("z").propertyIsEnumerable(0)})?function(e){return fGe(e)=="String"?hGe(e,""):Ck(e)}:Ck,wb=function(e){return e==null},dGe=wb,pGe=TypeError,$b=function(e){if(dGe(e))throw pGe("Can't call method on "+e);return e},vGe=Rx,gGe=$b,Ba=function(e){return vGe(gGe(e))},lF=$i,BX=PX,yGe=BX.all,_i=BX.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:lF(e)||e===yGe}:function(e){return typeof e=="object"?e!==null:lF(e)},Er={},Pk=Er,Nk=Yn,mGe=$i,uF=function(e){return mGe(e)?e:void 0},Jo=function(e,r){return arguments.length<2?uF(Pk[e])||uF(Nk[e]):Pk[e]&&Pk[e][r]||Nk[e]&&Nk[e][r]},bGe=Ir,Mn=bGe({}.isPrototypeOf),_b=typeof navigator<"u"&&String(navigator.userAgent)||"",MX=Yn,Rk=_b,cF=MX.process,fF=MX.Deno,hF=cF&&cF.versions||fF&&fF.version,dF=hF&&hF.v8,ma,F$;dF&&(ma=dF.split("."),F$=ma[0]>0&&ma[0]<4?1:+(ma[0]+ma[1]));!F$&&Rk&&(ma=Rk.match(/Edge\/(\d+)/),(!ma||ma[1]>=74)&&(ma=Rk.match(/Chrome\/(\d+)/),ma&&(F$=+ma[1])));var xb=F$,pF=xb,wGe=Tr,Kv=!!Object.getOwnPropertySymbols&&!wGe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&pF&&pF<41}),$Ge=Kv,LX=$Ge&&!Symbol.sham&&typeof Symbol.iterator=="symbol",_Ge=Jo,xGe=$i,EGe=Mn,SGe=LX,kGe=Object,Eb=SGe?function(e){return typeof e=="symbol"}:function(e){var r=_Ge("Symbol");return xGe(r)&&EGe(r.prototype,kGe(e))},TGe=String,Vv=function(e){try{return TGe(e)}catch{return"Object"}},IGe=$i,AGe=Vv,OGe=TypeError,Jh=function(e){if(IGe(e))return e;throw OGe(AGe(e)+" is not a function")},CGe=Jh,PGe=wb,J4=function(e,r){var t=e[r];return PGe(t)?void 0:CGe(t)},Dk=lo,Bk=$i,Mk=_i,NGe=TypeError,RGe=function(e,r){var t,n;if(r==="string"&&Bk(t=e.toString)&&!Mk(n=Dk(t,e))||Bk(t=e.valueOf)&&!Mk(n=Dk(t,e))||r!=="string"&&Bk(t=e.toString)&&!Mk(n=Dk(t,e)))return n;throw NGe("Can't convert object to primitive value")},Kc={},DGe={get exports(){return Kc},set exports(e){Kc=e}},vF=Yn,BGe=Object.defineProperty,MGe=function(e,r){try{BGe(vF,e,{value:r,configurable:!0,writable:!0})}catch{vF[e]=r}return r},LGe=Yn,FGe=MGe,gF="__core-js_shared__",jGe=LGe[gF]||FGe(gF,{}),Q4=jGe,yF=Q4;(DGe.exports=function(e,r){return yF[e]||(yF[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var HGe=$b,zGe=Object,uo=function(e){return zGe(HGe(e))},UGe=Ir,WGe=uo,qGe=UGe({}.hasOwnProperty),xi=Object.hasOwn||function(r,t){return qGe(WGe(r),t)},KGe=Ir,VGe=0,GGe=Math.random(),YGe=KGe(1 .toString),Dx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+YGe(++VGe+GGe,36)},ZGe=Yn,XGe=Kc,mF=xi,JGe=Dx,QGe=Kv,eYe=LX,vp=ZGe.Symbol,Lk=XGe("wks"),tYe=eYe?vp.for||vp:vp&&vp.withoutSetter||JGe,Ln=function(e){return mF(Lk,e)||(Lk[e]=QGe&&mF(vp,e)?vp[e]:tYe("Symbol."+e)),Lk[e]},rYe=lo,bF=_i,wF=Eb,nYe=J4,iYe=RGe,sYe=Ln,oYe=TypeError,aYe=sYe("toPrimitive"),lYe=function(e,r){if(!bF(e)||wF(e))return e;var t=nYe(e,aYe),n;if(t){if(r===void 0&&(r="default"),n=rYe(t,e,r),!bF(n)||wF(n))return n;throw oYe("Can't convert object to primitive value")}return r===void 0&&(r="number"),iYe(e,r)},uYe=lYe,cYe=Eb,Bx=function(e){var r=uYe(e,"string");return cYe(r)?r:r+""},fYe=Yn,$F=_i,vC=fYe.document,hYe=$F(vC)&&$F(vC.createElement),FX=function(e){return hYe?vC.createElement(e):{}},dYe=oi,pYe=Tr,vYe=FX,jX=!dYe&&!pYe(function(){return Object.defineProperty(vYe("div"),"a",{get:function(){return 7}}).a!=7}),gYe=oi,yYe=lo,mYe=mb,bYe=bb,wYe=Ba,$Ye=Bx,_Ye=xi,xYe=jX,_F=Object.getOwnPropertyDescriptor;qv.f=gYe?_F:function(r,t){if(r=wYe(r),t=$Ye(t),xYe)try{return _F(r,t)}catch{}if(_Ye(r,t))return bYe(!yYe(mYe.f,r,t),r[t])};var EYe=Tr,SYe=$i,kYe=/#|\.prototype\./,Sb=function(e,r){var t=IYe[TYe(e)];return t==OYe?!0:t==AYe?!1:SYe(r)?EYe(r):!!r},TYe=Sb.normalize=function(e){return String(e).replace(kYe,".").toLowerCase()},IYe=Sb.data={},AYe=Sb.NATIVE="N",OYe=Sb.POLYFILL="P",CYe=Sb,xF=X4,PYe=Jh,NYe=gb,RYe=xF(xF.bind),kb=function(e,r){return PYe(e),r===void 0?e:NYe?RYe(e,r):function(){return e.apply(r,arguments)}},Qo={},DYe=oi,BYe=Tr,HX=DYe&&BYe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),MYe=_i,LYe=String,FYe=TypeError,co=function(e){if(MYe(e))return e;throw FYe(LYe(e)+" is not an object")},jYe=oi,HYe=jX,zYe=HX,O1=co,EF=Bx,UYe=TypeError,Fk=Object.defineProperty,WYe=Object.getOwnPropertyDescriptor,jk="enumerable",Hk="configurable",zk="writable";Qo.f=jYe?zYe?function(r,t,n){if(O1(r),t=EF(t),O1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&zk in n&&!n[zk]){var i=WYe(r,t);i&&i[zk]&&(r[t]=n.value,n={configurable:Hk in n?n[Hk]:i[Hk],enumerable:jk in n?n[jk]:i[jk],writable:!1})}return Fk(r,t,n)}:Fk:function(r,t,n){if(O1(r),t=EF(t),O1(n),HYe)try{return Fk(r,t,n)}catch{}if("get"in n||"set"in n)throw UYe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var qYe=oi,KYe=Qo,VYe=bb,Gv=qYe?function(e,r,t){return KYe.f(e,r,VYe(1,t))}:function(e,r,t){return e[r]=t,e},C1=Yn,GYe=yb,YYe=X4,ZYe=$i,XYe=qv.f,JYe=CYe,qd=Er,QYe=kb,Kd=Gv,SF=xi,eZe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return GYe(e,this,arguments)};return r.prototype=e.prototype,r},Ht=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?C1:i?C1[t]:(C1[t]||{}).prototype,a=n?qd:qd[t]||Kd(qd,t,{})[t],l=a.prototype,u,f,c,p,y,w,b,T,_;for(p in r)u=JYe(n?p:t+(i?".":"#")+p,e.forced),f=!u&&o&&SF(o,p),w=a[p],f&&(e.dontCallGetSet?(_=XYe(o,p),b=_&&_.value):b=o[p]),y=f&&b?b:r[p],!(f&&typeof w==typeof y)&&(e.bind&&f?T=QYe(y,C1):e.wrap&&f?T=eZe(y):s&&ZYe(y)?T=YYe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&Kd(T,"sham",!0),Kd(a,p,T),s&&(c=t+"Prototype",SF(qd,c)||Kd(qd,c,{}),Kd(qd[c],p,y),e.real&&l&&(u||!l[p])&&Kd(l,p,y)))},tZe=Math.ceil,rZe=Math.floor,nZe=Math.trunc||function(r){var t=+r;return(t>0?rZe:tZe)(t)},iZe=nZe,Mx=function(e){var r=+e;return r!==r||r===0?0:iZe(r)},sZe=Mx,oZe=Math.max,aZe=Math.min,Tb=function(e,r){var t=sZe(e);return t<0?oZe(t+r,0):aZe(t,r)},lZe=Mx,uZe=Math.min,cZe=function(e){return e>0?uZe(lZe(e),9007199254740991):0},fZe=cZe,Ma=function(e){return fZe(e.length)},hZe=Ba,dZe=Tb,pZe=Ma,kF=function(e){return function(r,t,n){var i=hZe(r),s=pZe(i),o=dZe(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},eN={includes:kF(!0),indexOf:kF(!1)},Ib={},vZe=Ir,Uk=xi,gZe=Ba,yZe=eN.indexOf,mZe=Ib,TF=vZe([].push),zX=function(e,r){var t=gZe(e),n=0,i=[],s;for(s in t)!Uk(mZe,s)&&Uk(t,s)&&TF(i,s);for(;r.length>n;)Uk(t,s=r[n++])&&(~yZe(i,s)||TF(i,s));return i},tN=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bZe=zX,wZe=tN,Ab=Object.keys||function(r){return bZe(r,wZe)},Ob={};Ob.f=Object.getOwnPropertySymbols;var IF=oi,$Ze=Ir,_Ze=lo,xZe=Tr,Wk=Ab,EZe=Ob,SZe=mb,kZe=uo,TZe=Rx,Vd=Object.assign,AF=Object.defineProperty,IZe=$Ze([].concat),AZe=!Vd||xZe(function(){if(IF&&Vd({b:1},Vd(AF({},"a",{enumerable:!0,get:function(){AF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Vd({},e)[t]!=7||Wk(Vd({},r)).join("")!=n})?function(r,t){for(var n=kZe(r),i=arguments.length,s=1,o=EZe.f,a=SZe.f;i>s;)for(var l=TZe(arguments[s++]),u=o?IZe(Wk(l),o(l)):Wk(l),f=u.length,c=0,p;f>c;)p=u[c++],(!IF||_Ze(a,l,p))&&(n[p]=l[p]);return n}:Vd,OZe=Ht,OF=AZe;OZe({target:"Object",stat:!0,arity:2,forced:Object.assign!==OF},{assign:OF});var CZe=Er,PZe=CZe.Object.assign,NZe=PZe,RZe=NZe;(function(e){e.exports=RZe})(ZVe);var qn=Pt(hC),gC={},DZe={get exports(){return gC},set exports(e){gC=e}},BZe=Ir,Lx=BZe([].slice),UX=Ir,MZe=Jh,LZe=_i,FZe=xi,CF=Lx,jZe=gb,WX=Function,HZe=UX([].concat),zZe=UX([].join),qk={},UZe=function(e,r,t){if(!FZe(qk,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";qk[r]=WX("C,a","return new C("+zZe(n,",")+")")}return qk[r](e,t)},qX=jZe?WX.bind:function(r){var t=MZe(this),n=t.prototype,i=CF(arguments,1),s=function(){var a=HZe(i,CF(arguments));return this instanceof s?UZe(t,a.length,a):t.apply(r,a)};return LZe(n)&&(s.prototype=n),s},WZe=Ht,PF=qX;WZe({target:"Function",proto:!0,forced:Function.bind!==PF},{bind:PF});var qZe=Er,Ei=function(e){return qZe[e+"Prototype"]},KZe=Ei,VZe=KZe("Function").bind,GZe=Mn,YZe=VZe,Kk=Function.prototype,ZZe=function(e){var r=e.bind;return e===Kk||GZe(Kk,e)&&r===Kk.bind?YZe:r},XZe=ZZe,KX=XZe;(function(e){e.exports=KX})(DZe);var nt=Pt(gC);function rN(e,r,t,n){e.beginPath(),e.arc(r,t,n,0,2*Math.PI,!1),e.closePath()}function JZe(e,r,t,n){e.beginPath(),e.rect(r-n,t-n,n*2,n*2),e.closePath()}function QZe(e,r,t,n){e.beginPath(),n*=1.15,t+=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t-(a-o)),e.lineTo(r+s,t+o),e.lineTo(r-s,t+o),e.lineTo(r,t-(a-o)),e.closePath()}function eXe(e,r,t,n){e.beginPath(),n*=1.15,t-=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t+(a-o)),e.lineTo(r+s,t-o),e.lineTo(r-s,t-o),e.lineTo(r,t+(a-o)),e.closePath()}function tXe(e,r,t,n){e.beginPath(),n*=.82,t+=.1*n;for(var i=0;i<10;i++){var s=i%2===0?n*1.3:n*.5;e.lineTo(r+s*Math.sin(i*2*Math.PI/10),t-s*Math.cos(i*2*Math.PI/10))}e.closePath()}function rXe(e,r,t,n){e.beginPath(),e.lineTo(r,t+n),e.lineTo(r+n,t),e.lineTo(r,t-n),e.lineTo(r-n,t),e.closePath()}function VX(e,r,t,n,i,s){var o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),e.beginPath(),e.moveTo(r+s,t),e.lineTo(r+n-s,t),e.arc(r+n-s,t+s,s,o*270,o*360,!1),e.lineTo(r+n,t+i-s),e.arc(r+n-s,t+i-s,s,0,o*90,!1),e.lineTo(r+s,t+i),e.arc(r+s,t+i-s,s,o*90,o*180,!1),e.lineTo(r,t+s),e.arc(r+s,t+s,s,o*180,o*270,!1),e.closePath()}function yC(e,r,t,n,i){var s=.5522848,o=n/2*s,a=i/2*s,l=r+n,u=t+i,f=r+n/2,c=t+i/2;e.beginPath(),e.moveTo(r,c),e.bezierCurveTo(r,c-a,f-o,t,f,t),e.bezierCurveTo(f+o,t,l,c-a,l,c),e.bezierCurveTo(l,c+a,f+o,u,f,u),e.bezierCurveTo(f-o,u,r,c+a,r,c),e.closePath()}function GX(e,r,t,n,i){var s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,f=a/2*l,c=r+o,p=t+a,y=r+o/2,w=t+a/2,b=t+(i-a/2),T=t+i;e.beginPath(),e.moveTo(c,w),e.bezierCurveTo(c,w+f,y+u,p,y,p),e.bezierCurveTo(y-u,p,r,w+f,r,w),e.bezierCurveTo(r,w-f,y-u,t,y,t),e.bezierCurveTo(y+u,t,c,w-f,c,w),e.lineTo(c,b),e.bezierCurveTo(c,b+f,y+u,T,y,T),e.bezierCurveTo(y-u,T,r,b+f,r,b),e.lineTo(r,w)}function YX(e,r,t,n,i,s){e.beginPath(),e.moveTo(r,t);for(var o=s.length,a=n-r,l=i-t,u=l/a,f=Math.sqrt(a*a+l*l),c=0,p=!0,y=0,w=+s[0];f>=.1;)w=+s[c++%o],w>f&&(w=f),y=Math.sqrt(w*w/(1+u*u)),y=a<0?-y:y,r+=y,t+=u*y,p===!0?e.lineTo(r,t):e.moveTo(r,t),f-=w,p=!p}function nXe(e,r,t,n){e.beginPath();var i=6,s=Math.PI*2/i;e.moveTo(r+n,t);for(var o=1;o<i;o++)e.lineTo(r+n*Math.cos(s*o),t+n*Math.sin(s*o));e.closePath()}var NF={circle:rN,dashedLine:YX,database:GX,diamond:rXe,ellipse:yC,ellipse_vis:yC,hexagon:nXe,roundRect:VX,square:JZe,star:tXe,triangle:QZe,triangleDown:eXe};function iXe(e){return Object.prototype.hasOwnProperty.call(NF,e)?NF[e]:function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(r,n)}}var mC={},sXe={get exports(){return mC},set exports(e){mC=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(sXe);var ZX=mC,bC={},oXe={get exports(){return bC},set exports(e){bC=e}},aXe=Ln,lXe=aXe("toStringTag"),XX={};XX[lXe]="z";var nN=String(XX)==="[object z]",uXe=nN,cXe=$i,Ew=Nu,fXe=Ln,hXe=fXe("toStringTag"),dXe=Object,pXe=Ew(function(){return arguments}())=="Arguments",vXe=function(e,r){try{return e[r]}catch{}},Qh=uXe?Ew:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=vXe(r=dXe(e),hXe))=="string"?t:pXe?Ew(r):(n=Ew(r))=="Object"&&cXe(r.callee)?"Arguments":n},gXe=Qh,yXe=String,kl=function(e){if(gXe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return yXe(e)},iN=Ir,mXe=Mx,bXe=kl,wXe=$b,$Xe=iN("".charAt),RF=iN("".charCodeAt),_Xe=iN("".slice),DF=function(e){return function(r,t){var n=bXe(wXe(r)),i=mXe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=RF(n,i),o<55296||o>56319||i+1===s||(a=RF(n,i+1))<56320||a>57343?e?$Xe(n,i):o:e?_Xe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},xXe={codeAt:DF(!1),charAt:DF(!0)},EXe=Yn,SXe=$i,BF=EXe.WeakMap,JX=SXe(BF)&&/native code/.test(String(BF)),kXe=Kc,TXe=Dx,MF=kXe("keys"),Fx=function(e){return MF[e]||(MF[e]=TXe(e))},IXe=JX,QX=Yn,AXe=_i,OXe=Gv,Vk=xi,Gk=Q4,CXe=Fx,PXe=Ib,LF="Object already initialized",wC=QX.TypeError,NXe=QX.WeakMap,j$,fm,H$,RXe=function(e){return H$(e)?fm(e):j$(e,{})},DXe=function(e){return function(r){var t;if(!AXe(r)||(t=fm(r)).type!==e)throw wC("Incompatible receiver, "+e+" required");return t}};if(IXe||Gk.state){var nl=Gk.state||(Gk.state=new NXe);nl.get=nl.get,nl.has=nl.has,nl.set=nl.set,j$=function(e,r){if(nl.has(e))throw wC(LF);return r.facade=e,nl.set(e,r),r},fm=function(e){return nl.get(e)||{}},H$=function(e){return nl.has(e)}}else{var Gd=CXe("state");PXe[Gd]=!0,j$=function(e,r){if(Vk(e,Gd))throw wC(LF);return r.facade=e,OXe(e,Gd,r),r},fm=function(e){return Vk(e,Gd)?e[Gd]:{}},H$=function(e){return Vk(e,Gd)}}var ed={set:j$,get:fm,has:H$,enforce:RXe,getterFor:DXe},$C=oi,BXe=xi,eJ=Function.prototype,MXe=$C&&Object.getOwnPropertyDescriptor,sN=BXe(eJ,"name"),LXe=sN&&(function(){}).name==="something",FXe=sN&&(!$C||$C&&MXe(eJ,"name").configurable),tJ={EXISTS:sN,PROPER:LXe,CONFIGURABLE:FXe},jx={},jXe=oi,HXe=HX,zXe=Qo,UXe=co,WXe=Ba,qXe=Ab;jx.f=jXe&&!HXe?Object.defineProperties:function(r,t){UXe(r);for(var n=WXe(t),i=qXe(t),s=i.length,o=0,a;s>o;)zXe.f(r,a=i[o++],n[a]);return r};var KXe=Jo,VXe=KXe("document","documentElement"),GXe=co,YXe=jx,FF=tN,ZXe=Ib,XXe=VXe,JXe=FX,QXe=Fx,jF=">",HF="<",_C="prototype",xC="script",rJ=QXe("IE_PROTO"),Yk=function(){},nJ=function(e){return HF+xC+jF+e+HF+"/"+xC+jF},zF=function(e){e.write(nJ("")),e.close();var r=e.parentWindow.Object;return e=null,r},eJe=function(){var e=JXe("iframe"),r="java"+xC+":",t;return e.style.display="none",XXe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(nJ("document.F=Object")),t.close(),t.F},P1,Sw=function(){try{P1=new ActiveXObject("htmlfile")}catch{}Sw=typeof document<"u"?document.domain&&P1?zF(P1):eJe():zF(P1);for(var e=FF.length;e--;)delete Sw[_C][FF[e]];return Sw()};ZXe[rJ]=!0;var Yv=Object.create||function(r,t){var n;return r!==null?(Yk[_C]=GXe(r),n=new Yk,Yk[_C]=null,n[rJ]=r):n=Sw(),t===void 0?n:YXe.f(n,t)},tJe=Tr,iJ=!tJe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),rJe=xi,nJe=$i,iJe=uo,sJe=Fx,oJe=iJ,UF=sJe("IE_PROTO"),EC=Object,aJe=EC.prototype,Hx=oJe?EC.getPrototypeOf:function(e){var r=iJe(e);if(rJe(r,UF))return r[UF];var t=r.constructor;return nJe(t)&&r instanceof t?t.prototype:r instanceof EC?aJe:null},lJe=Gv,Cb=function(e,r,t,n){return n&&n.enumerable?e[r]=t:lJe(e,r,t),e},uJe=Tr,cJe=$i,fJe=_i,hJe=Yv,WF=Hx,dJe=Cb,pJe=Ln,SC=pJe("iterator"),sJ=!1,hu,Zk,Xk;[].keys&&(Xk=[].keys(),"next"in Xk?(Zk=WF(WF(Xk)),Zk!==Object.prototype&&(hu=Zk)):sJ=!0);var vJe=!fJe(hu)||uJe(function(){var e={};return hu[SC].call(e)!==e});vJe?hu={}:hu=hJe(hu);cJe(hu[SC])||dJe(hu,SC,function(){return this});var oJ={IteratorPrototype:hu,BUGGY_SAFARI_ITERATORS:sJ},gJe=nN,yJe=Qh,mJe=gJe?{}.toString:function(){return"[object "+yJe(this)+"]"},bJe=nN,wJe=Qo.f,$Je=Gv,_Je=xi,xJe=mJe,EJe=Ln,qF=EJe("toStringTag"),Zv=function(e,r,t,n){if(e){var i=t?e:e.prototype;_Je(i,qF)||wJe(i,qF,{configurable:!0,value:r}),n&&!bJe&&$Je(i,"toString",xJe)}},Xv={},SJe=oJ.IteratorPrototype,kJe=Yv,TJe=bb,IJe=Zv,AJe=Xv,OJe=function(){return this},CJe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=kJe(SJe,{next:TJe(+!n,t)}),IJe(e,i,!1,!0),AJe[i]=OJe,e},PJe=Ir,NJe=Jh,RJe=function(e,r,t){try{return PJe(NJe(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},DJe=$i,BJe=String,MJe=TypeError,LJe=function(e){if(typeof e=="object"||DJe(e))return e;throw MJe("Can't set "+BJe(e)+" as a prototype")},FJe=RJe,jJe=co,HJe=LJe,zJe=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=FJe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return jJe(i),HJe(s),e?t(i,s):i.__proto__=s,i}}():void 0),UJe=Ht,WJe=lo,qJe=tJ,KJe=CJe,VJe=Hx,GJe=Zv,KF=Cb,YJe=Ln,VF=Xv,ZJe=oJ,XJe=qJe.PROPER,N1=ZJe.BUGGY_SAFARI_ITERATORS,Jk=YJe("iterator"),GF="keys",R1="values",YF="entries",JJe=function(){return this},oN=function(e,r,t,n,i,s,o){KJe(t,r,n);var a=function(_){if(_===i&&p)return p;if(!N1&&_ in f)return f[_];switch(_){case GF:return function(){return new t(this,_)};case R1:return function(){return new t(this,_)};case YF:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,f=e.prototype,c=f[Jk]||f["@@iterator"]||i&&f[i],p=!N1&&c||a(i),y=r=="Array"&&f.entries||c,w,b,T;if(y&&(w=VJe(y.call(new e)),w!==Object.prototype&&w.next&&(GJe(w,l,!0,!0),VF[l]=JJe)),XJe&&i==R1&&c&&c.name!==R1&&(u=!0,p=function(){return WJe(c,this)}),i)if(b={values:a(R1),keys:s?p:a(GF),entries:a(YF)},o)for(T in b)(N1||u||!(T in f))&&KF(f,T,b[T]);else UJe({target:r,proto:!0,forced:N1||u},b);return o&&f[Jk]!==p&&KF(f,Jk,p,{name:i}),VF[r]=p,b},aN=function(e,r){return{value:e,done:r}},QJe=xXe.charAt,eQe=kl,aJ=ed,tQe=oN,ZF=aN,lJ="String Iterator",rQe=aJ.set,nQe=aJ.getterFor(lJ);tQe(String,"String",function(e){rQe(this,{type:lJ,string:eQe(e),index:0})},function(){var r=nQe(this),t=r.string,n=r.index,i;return n>=t.length?ZF(void 0,!0):(i=QJe(t,n),r.index+=i.length,ZF(i,!1))});var iQe=lo,XF=co,sQe=J4,uJ=function(e,r,t){var n,i;XF(e);try{if(n=sQe(e,"return"),!n){if(r==="throw")throw t;return t}n=iQe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return XF(n),t},oQe=co,aQe=uJ,lQe=function(e,r,t,n){try{return n?r(oQe(t)[0],t[1]):r(t)}catch(i){aQe(e,"throw",i)}},uQe=Ln,cQe=Xv,fQe=uQe("iterator"),hQe=Array.prototype,cJ=function(e){return e!==void 0&&(cQe.Array===e||hQe[fQe]===e)},dQe=Ir,pQe=$i,kC=Q4,vQe=dQe(Function.toString);pQe(kC.inspectSource)||(kC.inspectSource=function(e){return vQe(e)});var gQe=kC.inspectSource,yQe=Ir,mQe=Tr,fJ=$i,bQe=Qh,wQe=Jo,$Qe=gQe,hJ=function(){},_Qe=[],dJ=wQe("Reflect","construct"),lN=/^\s*(?:class|function)\b/,xQe=yQe(lN.exec),EQe=!lN.exec(hJ),zg=function(r){if(!fJ(r))return!1;try{return dJ(hJ,_Qe,r),!0}catch{return!1}},pJ=function(r){if(!fJ(r))return!1;switch(bQe(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return EQe||!!xQe(lN,$Qe(r))}catch{return!0}};pJ.sham=!0;var zx=!dJ||mQe(function(){var e;return zg(zg.call)||!zg(Object)||!zg(function(){e=!0})||e})?pJ:zg,SQe=Bx,kQe=Qo,TQe=bb,Jv=function(e,r,t){var n=SQe(r);n in e?kQe.f(e,n,TQe(0,t)):e[n]=t},IQe=Qh,JF=J4,AQe=wb,OQe=Xv,CQe=Ln,PQe=CQe("iterator"),Ux=function(e){if(!AQe(e))return JF(e,PQe)||JF(e,"@@iterator")||OQe[IQe(e)]},NQe=lo,RQe=Jh,DQe=co,BQe=Vv,MQe=Ux,LQe=TypeError,vJ=function(e,r){var t=arguments.length<2?MQe(e):r;if(RQe(t))return DQe(NQe(t,e));throw LQe(BQe(e)+" is not iterable")},FQe=kb,jQe=lo,HQe=uo,zQe=lQe,UQe=cJ,WQe=zx,qQe=Ma,QF=Jv,KQe=vJ,VQe=Ux,e9=Array,GQe=function(r){var t=HQe(r),n=WQe(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=FQe(s,i>2?arguments[2]:void 0));var a=VQe(t),l=0,u,f,c,p,y,w;if(a&&!(this===e9&&UQe(a)))for(p=KQe(t,a),y=p.next,f=n?new this:[];!(c=jQe(y,p)).done;l++)w=o?zQe(p,s,[c.value,l],!0):c.value,QF(f,l,w);else for(u=qQe(t),f=n?new this(u):e9(u);u>l;l++)w=o?s(t[l],l):t[l],QF(f,l,w);return f.length=l,f},YQe=Ln,gJ=YQe("iterator"),yJ=!1;try{var ZQe=0,t9={next:function(){return{done:!!ZQe++}},return:function(){yJ=!0}};t9[gJ]=function(){return this},Array.from(t9,function(){throw 2})}catch{}var XQe=function(e,r){if(!r&&!yJ)return!1;var t=!1;try{var n={};n[gJ]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},JQe=Ht,QQe=GQe,eet=XQe,tet=!eet(function(e){Array.from(e)});JQe({target:"Array",stat:!0,forced:tet},{from:QQe});var ret=Er,net=ret.Array.from,iet=net,mJ=iet;(function(e){e.exports=mJ})(oXe);var td=Pt(bC),TC={},set={get exports(){return TC},set exports(e){TC=e}},IC={},oet={get exports(){return IC},set exports(e){IC=e}},aet=Ba,r9=Xv,bJ=ed;Qo.f;var uet=oN,D1=aN,wJ="Array Iterator",cet=bJ.set,fet=bJ.getterFor(wJ);uet(Array,"Array",function(e,r){cet(this,{type:wJ,target:aet(e),index:0,kind:r})},function(){var e=fet(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,D1(void 0,!0)):t=="keys"?D1(n,!1):t=="values"?D1(r[n],!1):D1([n,r[n]],!1)},"values");r9.Arguments=r9.Array;var het=Ux,det=het,pet={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},vet=pet,get=Yn,yet=Qh,met=Gv,n9=Xv,bet=Ln,i9=bet("toStringTag");for(var Qk in vet){var s9=get[Qk],eT=s9&&s9.prototype;eT&&yet(eT)!==i9&&met(eT,i9,Qk),n9[Qk]=n9.Array}var wet=det,$et=wet,_et=$et,xet=_et,Eet=xet,ket=Eet;(function(e){e.exports=ket})(oet);(function(e){e.exports=IC})(set);var Ru=Pt(TC),AC={},Tet={get exports(){return AC},set exports(e){AC=e}},Pb={},Iet=zX,Aet=tN,Oet=Aet.concat("length","prototype");Pb.f=Object.getOwnPropertyNames||function(r){return Iet(r,Oet)};var Wx={},o9=Tb,Cet=Ma,Pet=Jv,Net=Array,Ret=Math.max,$J=function(e,r,t){for(var n=Cet(e),i=o9(r,n),s=o9(t===void 0?n:t,n),o=Net(Ret(s-i,0)),a=0;i<s;i++,a++)Pet(o,a,e[i]);return o.length=a,o},Det=Nu,Bet=Ba,_J=Pb.f,Met=$J,xJ=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Let=function(e){try{return _J(e)}catch{return Met(xJ)}};Wx.f=function(r){return xJ&&Det(r)=="Window"?Let(r):_J(Bet(r))};var Fet=Qo,uN=function(e,r,t){return Fet.f(e,r,t)},Nb={},jet=Ln;Nb.f=jet;var a9=Er,Het=xi,zet=Nb,Uet=Qo.f,Tn=function(e){var r=a9.Symbol||(a9.Symbol={});Het(r,e)||Uet(r,e,{value:zet.f(e)})},Wet=lo,qet=Jo,Ket=Ln,Vet=Cb,EJ=function(){var e=qet("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=Ket("toPrimitive");r&&!r[n]&&Vet(r,n,function(i){return Wet(t,this)},{arity:1})},Get=Nu,rd=Array.isArray||function(r){return Get(r)=="Array"},l9=rd,Yet=zx,Zet=_i,Xet=Ln,Jet=Xet("species"),u9=Array,Qet=function(e){var r;return l9(e)&&(r=e.constructor,Yet(r)&&(r===u9||l9(r.prototype))?r=void 0:Zet(r)&&(r=r[Jet],r===null&&(r=void 0))),r===void 0?u9:r},ett=Qet,cN=function(e,r){return new(ett(e))(r===0?0:r)},ttt=kb,rtt=Ir,ntt=Rx,itt=uo,stt=Ma,ott=cN,c9=rtt([].push),hc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,f,c){for(var p=itt(l),y=ntt(p),w=ttt(u,f),b=stt(y),T=0,_=c||ott,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in y)&&(x=y[T],I=w(x,T,p),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:c9(A,x)}else switch(e){case 4:return!1;case 7:c9(A,x)}return s?-1:n||i?i:A}},tf={forEach:hc(0),map:hc(1),filter:hc(2),some:hc(3),every:hc(4),find:hc(5),findIndex:hc(6),filterReject:hc(7)},qx=Ht,fN=Yn,hN=lo,att=Ir,av=oi,lv=Kv,ltt=Tr,vi=xi,utt=Mn,OC=co,Kx=Ba,dN=Bx,ctt=kl,CC=bb,hm=Yv,SJ=Ab,ftt=Pb,kJ=Wx,htt=Ob,TJ=qv,IJ=Qo,dtt=jx,AJ=mb,f9=Cb,ptt=uN,pN=Kc,vtt=Fx,OJ=Ib,h9=Dx,gtt=Ln,ytt=Nb,mtt=Tn,btt=EJ,wtt=Zv,CJ=ed,Vx=tf.forEach,As=vtt("hidden"),Gx="Symbol",dm="prototype",$tt=CJ.set,d9=CJ.getterFor(Gx),Sa=Object[dm],bh=fN.Symbol,iy=bh&&bh[dm],_tt=fN.TypeError,tT=fN.QObject,PJ=TJ.f,Wf=IJ.f,NJ=kJ.f,xtt=AJ.f,RJ=att([].push),Eu=pN("symbols"),Rb=pN("op-symbols"),Ett=pN("wks"),PC=!tT||!tT[dm]||!tT[dm].findChild,NC=av&&ltt(function(){return hm(Wf({},"a",{get:function(){return Wf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=PJ(Sa,r);n&&delete Sa[r],Wf(e,r,t),n&&e!==Sa&&Wf(Sa,r,n)}:Wf,rT=function(e,r){var t=Eu[e]=hm(iy);return $tt(t,{type:Gx,tag:e,description:r}),av||(t.description=r),t},Yx=function(r,t,n){r===Sa&&Yx(Rb,t,n),OC(r);var i=dN(t);return OC(n),vi(Eu,i)?(n.enumerable?(vi(r,As)&&r[As][i]&&(r[As][i]=!1),n=hm(n,{enumerable:CC(0,!1)})):(vi(r,As)||Wf(r,As,CC(1,{})),r[As][i]=!0),NC(r,i,n)):Wf(r,i,n)},vN=function(r,t){OC(r);var n=Kx(t),i=SJ(n).concat(LJ(n));return Vx(i,function(s){(!av||hN(DJ,n,s))&&Yx(r,s,n[s])}),r},Stt=function(r,t){return t===void 0?hm(r):vN(hm(r),t)},DJ=function(r){var t=dN(r),n=hN(xtt,this,t);return this===Sa&&vi(Eu,t)&&!vi(Rb,t)?!1:n||!vi(this,t)||!vi(Eu,t)||vi(this,As)&&this[As][t]?n:!0},BJ=function(r,t){var n=Kx(r),i=dN(t);if(!(n===Sa&&vi(Eu,i)&&!vi(Rb,i))){var s=PJ(n,i);return s&&vi(Eu,i)&&!(vi(n,As)&&n[As][i])&&(s.enumerable=!0),s}},MJ=function(r){var t=NJ(Kx(r)),n=[];return Vx(t,function(i){!vi(Eu,i)&&!vi(OJ,i)&&RJ(n,i)}),n},LJ=function(e){var r=e===Sa,t=NJ(r?Rb:Kx(e)),n=[];return Vx(t,function(i){vi(Eu,i)&&(!r||vi(Sa,i))&&RJ(n,Eu[i])}),n};lv||(bh=function(){if(utt(iy,this))throw _tt("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:ctt(arguments[0]),t=h9(r),n=function(i){this===Sa&&hN(n,Rb,i),vi(this,As)&&vi(this[As],t)&&(this[As][t]=!1),NC(this,t,CC(1,i))};return av&&PC&&NC(Sa,t,{configurable:!0,set:n}),rT(t,r)},iy=bh[dm],f9(iy,"toString",function(){return d9(this).tag}),f9(bh,"withoutSetter",function(e){return rT(h9(e),e)}),AJ.f=DJ,IJ.f=Yx,dtt.f=vN,TJ.f=BJ,ftt.f=kJ.f=MJ,htt.f=LJ,ytt.f=function(e){return rT(gtt(e),e)},av&&ptt(iy,"description",{configurable:!0,get:function(){return d9(this).description}}));qx({global:!0,constructor:!0,wrap:!0,forced:!lv,sham:!lv},{Symbol:bh});Vx(SJ(Ett),function(e){mtt(e)});qx({target:Gx,stat:!0,forced:!lv},{useSetter:function(){PC=!0},useSimple:function(){PC=!1}});qx({target:"Object",stat:!0,forced:!lv,sham:!av},{create:Stt,defineProperty:Yx,defineProperties:vN,getOwnPropertyDescriptor:BJ});qx({target:"Object",stat:!0,forced:!lv},{getOwnPropertyNames:MJ});btt();wtt(bh,Gx);OJ[As]=!0;var ktt=Kv,FJ=ktt&&!!Symbol.for&&!!Symbol.keyFor,Ttt=Ht,Itt=Jo,Att=xi,Ott=kl,jJ=Kc,Ctt=FJ,nT=jJ("string-to-symbol-registry"),Ptt=jJ("symbol-to-string-registry");Ttt({target:"Symbol",stat:!0,forced:!Ctt},{for:function(e){var r=Ott(e);if(Att(nT,r))return nT[r];var t=Itt("Symbol")(r);return nT[r]=t,Ptt[t]=r,t}});var Ntt=Ht,Rtt=xi,Dtt=Eb,Btt=Vv,Mtt=Kc,Ltt=FJ,p9=Mtt("symbol-to-string-registry");Ntt({target:"Symbol",stat:!0,forced:!Ltt},{keyFor:function(r){if(!Dtt(r))throw TypeError(Btt(r)+" is not a symbol");if(Rtt(p9,r))return p9[r]}});var Ftt=Ir,v9=rd,jtt=$i,g9=Nu,Htt=kl,y9=Ftt([].push),ztt=function(e){if(jtt(e))return e;if(v9(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?y9(t,i):(typeof i=="number"||g9(i)=="Number"||g9(i)=="String")&&y9(t,Htt(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(v9(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},Utt=Ht,HJ=Jo,zJ=yb,Wtt=lo,Db=Ir,UJ=Tr,m9=$i,b9=Eb,WJ=Lx,qtt=ztt,Ktt=Kv,Vtt=String,Rc=HJ("JSON","stringify"),B1=Db(/./.exec),w9=Db("".charAt),Gtt=Db("".charCodeAt),Ytt=Db("".replace),Ztt=Db(1 .toString),Xtt=/[\uD800-\uDFFF]/g,$9=/^[\uD800-\uDBFF]$/,_9=/^[\uDC00-\uDFFF]$/,x9=!Ktt||UJ(function(){var e=HJ("Symbol")();return Rc([e])!="[null]"||Rc({a:e})!="{}"||Rc(Object(e))!="{}"}),E9=UJ(function(){return Rc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Rc("\uDEAD")!=='"\\udead"'}),Jtt=function(e,r){var t=WJ(arguments),n=qtt(r);if(!(!m9(n)&&(e===void 0||b9(e))))return t[1]=function(i,s){if(m9(n)&&(s=Wtt(n,this,Vtt(i),s)),!b9(s))return s},zJ(Rc,null,t)},Qtt=function(e,r,t){var n=w9(t,r-1),i=w9(t,r+1);return B1($9,e)&&!B1(_9,i)||B1(_9,e)&&!B1($9,n)?"\\u"+Ztt(Gtt(e,0),16):e};Rc&&Utt({target:"JSON",stat:!0,arity:3,forced:x9||E9},{stringify:function(r,t,n){var i=WJ(arguments),s=zJ(x9?Jtt:Rc,null,i);return E9&&typeof s=="string"?Ytt(s,Xtt,Qtt):s}});var ert=Ht,trt=Kv,rrt=Tr,qJ=Ob,nrt=uo,irt=!trt||rrt(function(){qJ.f(1)});ert({target:"Object",stat:!0,forced:irt},{getOwnPropertySymbols:function(r){var t=qJ.f;return t?t(nrt(r)):[]}});var srt=Er,ort=srt.Object.getOwnPropertySymbols,art=ort,lrt=art;(function(e){e.exports=lrt})(Tet);var Vc=Pt(AC),RC={},urt={get exports(){return RC},set exports(e){RC=e}},DC={},crt={get exports(){return DC},set exports(e){DC=e}},frt=Ht,hrt=Tr,drt=Ba,KJ=qv.f,VJ=oi,prt=!VJ||hrt(function(){KJ(1)});frt({target:"Object",stat:!0,forced:prt,sham:!VJ},{getOwnPropertyDescriptor:function(r,t){return KJ(drt(r),t)}});var vrt=Er,GJ=vrt.Object,grt=crt.exports=function(r,t){return GJ.getOwnPropertyDescriptor(r,t)};GJ.getOwnPropertyDescriptor.sham&&(grt.sham=!0);var yrt=DC,YJ=yrt;(function(e){e.exports=YJ})(urt);var rf=Pt(RC),BC={},mrt={get exports(){return BC},set exports(e){BC=e}},brt=Jo,wrt=Ir,$rt=Pb,_rt=Ob,xrt=co,Ert=wrt([].concat),ZJ=brt("Reflect","ownKeys")||function(r){var t=$rt.f(xrt(r)),n=_rt.f;return n?Ert(t,n(r)):t},Srt=Ht,krt=oi,Trt=ZJ,Irt=Ba,Art=qv,Ort=Jv;Srt({target:"Object",stat:!0,sham:!krt},{getOwnPropertyDescriptors:function(r){for(var t=Irt(r),n=Art.f,i=Trt(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&Ort(s,a,l);return s}});var Crt=Er,Prt=Crt.Object.getOwnPropertyDescriptors,Nrt=Prt,Rrt=Nrt;(function(e){e.exports=Rrt})(mrt);var Gc=Pt(BC),MC={},Drt={get exports(){return MC},set exports(e){MC=e}},LC={},Brt={get exports(){return LC},set exports(e){LC=e}},Mrt=Ht,Lrt=oi,S9=jx.f;Mrt({target:"Object",stat:!0,forced:Object.defineProperties!==S9,sham:!Lrt},{defineProperties:S9});var Frt=Er,XJ=Frt.Object,jrt=Brt.exports=function(r,t){return XJ.defineProperties(r,t)};XJ.defineProperties.sham&&(jrt.sham=!0);var Hrt=LC,zrt=Hrt;(function(e){e.exports=zrt})(Drt);var Zx=Pt(MC),FC={},Urt={get exports(){return FC},set exports(e){FC=e}},jC={},Wrt={get exports(){return jC},set exports(e){jC=e}},qrt=Ht,Krt=oi,k9=Qo.f;qrt({target:"Object",stat:!0,forced:Object.defineProperty!==k9,sham:!Krt},{defineProperty:k9});var Vrt=Er,JJ=Vrt.Object,Grt=Wrt.exports=function(r,t,n){return JJ.defineProperty(r,t,n)};JJ.defineProperty.sham&&(Grt.sham=!0);var Yrt=jC,QJ=Yrt;(function(e){e.exports=QJ})(Urt);var Xx=Pt(FC);function ft(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var HC={},Zrt={get exports(){return HC},set exports(e){HC=e}},zC={},Xrt={get exports(){return zC},set exports(e){zC=e}},Jrt=QJ,Qrt=Jrt,ent=Qrt,tnt=ent;(function(e){e.exports=tnt})(Xrt);(function(e){e.exports=zC})(Zrt);var Jx=Pt(HC),UC={},rnt={get exports(){return UC},set exports(e){UC=e}},WC={},nnt={get exports(){return WC},set exports(e){WC=e}},int=TypeError,snt=9007199254740991,eQ=function(e){if(e>snt)throw int("Maximum allowed index exceeded");return e},ont=Tr,ant=Ln,lnt=xb,unt=ant("species"),Bb=function(e){return lnt>=51||!ont(function(){var r=[],t=r.constructor={};return t[unt]=function(){return{foo:1}},r[e](Boolean).foo!==1})},cnt=Ht,fnt=Tr,hnt=rd,dnt=_i,pnt=uo,vnt=Ma,T9=eQ,I9=Jv,gnt=cN,ynt=Bb,mnt=Ln,bnt=xb,tQ=mnt("isConcatSpreadable"),wnt=bnt>=51||!fnt(function(){var e=[];return e[tQ]=!1,e.concat()[0]!==e}),$nt=function(e){if(!dnt(e))return!1;var r=e[tQ];return r!==void 0?!!r:hnt(e)},_nt=!wnt||!ynt("concat");cnt({target:"Array",proto:!0,arity:1,forced:_nt},{concat:function(r){var t=pnt(this),n=gnt(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],$nt(u))for(l=vnt(u),T9(i+l),o=0;o<l;o++,i++)o in u&&I9(n,i,u[o]);else T9(i+1),I9(n,i++,u);return n.length=i,n}});var xnt=Tn;xnt("asyncIterator");var Ent=Tn;Ent("hasInstance");var Snt=Tn;Snt("isConcatSpreadable");var knt=Tn;knt("iterator");var Tnt=Tn;Tnt("match");var Int=Tn;Int("matchAll");var Ant=Tn;Ant("replace");var Ont=Tn;Ont("search");var Cnt=Tn;Cnt("species");var Pnt=Tn;Pnt("split");var Nnt=Tn,Rnt=EJ;Nnt("toPrimitive");Rnt();var Dnt=Jo,Bnt=Tn,Mnt=Zv;Bnt("toStringTag");Mnt(Dnt("Symbol"),"Symbol");var Lnt=Tn;Lnt("unscopables");var Fnt=Yn,jnt=Zv;jnt(Fnt.JSON,"JSON",!0);var Hnt=Er,znt=Hnt.Symbol,Unt=znt,rQ=Unt,Wnt=Tn;Wnt("dispose");var qnt=rQ,Knt=qnt,Vnt=Tn;Vnt("asyncDispose");var Gnt=Ht,Ynt=Jo,Znt=Ir,nQ=Ynt("Symbol"),Xnt=nQ.keyFor,Jnt=Znt(nQ.prototype.valueOf);Gnt({target:"Symbol",stat:!0},{isRegistered:function(r){try{return Xnt(Jnt(r))!==void 0}catch{return!1}}});var Qnt=Ht,eit=Kc,iQ=Jo,tit=Ir,rit=Eb,nit=Ln,z$=iQ("Symbol"),A9=z$.isWellKnown,sQ=iQ("Object","getOwnPropertyNames"),iit=tit(z$.prototype.valueOf),O9=eit("wks");for(var iT=0,C9=sQ(z$),sit=C9.length;iT<sit;iT++)try{var P9=C9[iT];rit(z$[P9])&&nit(P9)}catch{}Qnt({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(A9&&A9(r))return!0;try{for(var t=iit(r),n=0,i=sQ(O9),s=i.length;n<s;n++)if(O9[i[n]]==t)return!0}catch{}return!1}});var oit=Tn;oit("matcher");var ait=Tn;ait("metadataKey");var lit=Tn;lit("observable");var uit=Tn;uit("metadata");var cit=Tn;cit("patternMatch");var fit=Tn;fit("replaceAll");var hit=Knt,dit=hit;(function(e){e.exports=dit})(nnt);(function(e){e.exports=WC})(rnt);var gp=Pt(UC),qC={},pit={get exports(){return qC},set exports(e){qC=e}},KC={},vit={get exports(){return KC},set exports(e){KC=e}},git=Nb,yit=git.f("iterator"),mit=yit,bit=mit,wit=bit,$it=wit,_it=$it,xit=_it;(function(e){e.exports=xit})(vit);(function(e){e.exports=KC})(pit);var Eit=Pt(qC);function Dr(e){"@babel/helpers - typeof";return Dr=typeof gp=="function"&&typeof Eit=="symbol"?function(r){return typeof r}:function(r){return r&&typeof gp=="function"&&r.constructor===gp&&r!==gp.prototype?"symbol":typeof r},Dr(e)}var VC={},Sit={get exports(){return VC},set exports(e){VC=e}},GC={},kit={get exports(){return GC},set exports(e){GC=e}},Tit=Nb,Iit=Tit.f("toPrimitive"),Ait=Iit,Oit=Ait,Cit=Oit,Pit=Cit,Nit=Pit,Rit=Nit;(function(e){e.exports=Rit})(kit);(function(e){e.exports=GC})(Sit);var Dit=Pt(VC);function Bit(e,r){if(Dr(e)!=="object"||e===null)return e;var t=e[Dit];if(t!==void 0){var n=t.call(e,r||"default");if(Dr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function oQ(e){var r=Bit(e,"string");return Dr(r)==="symbol"?r:String(r)}function N9(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Jx(e,oQ(n.key),n)}}function ht(e,r,t){return r&&N9(e.prototype,r),t&&N9(e,t),Jx(e,"prototype",{writable:!1}),e}function Qx(e,r,t){return r=oQ(r),r in e?Jx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var YC={},Mit={get exports(){return YC},set exports(e){YC=e}},ZC={},Lit={get exports(){return ZC},set exports(e){ZC=e}},Fit=Ht,jit=rd;Fit({target:"Array",stat:!0},{isArray:jit});var Hit=Er,zit=Hit.Array.isArray,Uit=zit,aQ=Uit,Wit=aQ,qit=Wit,Kit=qit,Vit=Kit;(function(e){e.exports=Vit})(Lit);(function(e){e.exports=ZC})(Mit);var lQ=Pt(YC);function Git(e){if(lQ(e))return e}function Yit(e,r){var t=e==null?null:typeof gp<"u"&&Ru(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var XC={},Zit={get exports(){return XC},set exports(e){XC=e}},JC={},Xit={get exports(){return JC},set exports(e){JC=e}},Jit=Ht,R9=rd,Qit=zx,est=_i,D9=Tb,tst=Ma,rst=Ba,nst=Jv,ist=Ln,sst=Bb,ost=Lx,ast=sst("slice"),lst=ist("species"),sT=Array,ust=Math.max;Jit({target:"Array",proto:!0,forced:!ast},{slice:function(r,t){var n=rst(this),i=tst(n),s=D9(r,i),o=D9(t===void 0?i:t,i),a,l,u;if(R9(n)&&(a=n.constructor,Qit(a)&&(a===sT||R9(a.prototype))?a=void 0:est(a)&&(a=a[lst],a===null&&(a=void 0)),a===sT||a===void 0))return ost(n,s,o);for(l=new(a===void 0?sT:a)(ust(o-s,0)),u=0;s<o;s++,u++)s in n&&nst(l,u,n[s]);return l.length=u,l}});var cst=Ei,fst=cst("Array").slice,hst=Mn,dst=fst,oT=Array.prototype,pst=function(e){var r=e.slice;return e===oT||hst(oT,e)&&r===oT.slice?dst:r},vst=pst,uQ=vst,gst=uQ,yst=gst,mst=yst,bst=mst;(function(e){e.exports=bst})(Xit);(function(e){e.exports=JC})(Zit);var wst=Pt(XC),QC={},$st={get exports(){return QC},set exports(e){QC=e}},e5={},_st={get exports(){return e5},set exports(e){e5=e}},xst=mJ,Est=xst,Sst=Est,kst=Sst;(function(e){e.exports=kst})(_st);(function(e){e.exports=e5})($st);var cQ=Pt(QC);function t5(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function fQ(e,r){var t;if(e){if(typeof e=="string")return t5(e,r);var n=wst(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return cQ(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t5(e,r)}}function Tst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wn(e,r){return Git(e)||Yit(e,r)||fQ(e,r)||Tst()}function Ist(e){if(lQ(e))return t5(e)}function Ast(e){if(typeof gp<"u"&&Ru(e)!=null||e["@@iterator"]!=null)return cQ(e)}function Ost(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ll(e){return Ist(e)||Ast(e)||fQ(e)||Ost()}var r5={},Cst={get exports(){return r5},set exports(e){r5=e}};(function(e){e.exports=rQ})(Cst);var nf=Pt(r5),n5={},Pst={get exports(){return n5},set exports(e){n5=e}},Nst=Ei,Rst=Nst("Array").concat,Dst=Mn,Bst=Rst,aT=Array.prototype,Mst=function(e){var r=e.concat;return e===aT||Dst(aT,e)&&r===aT.concat?Bst:r},Lst=Mst,Fst=Lst;(function(e){e.exports=Fst})(Pst);var gN=Pt(n5),i5={},jst={get exports(){return i5},set exports(e){i5=e}};(function(e){e.exports=uQ})(jst);var Pi=Pt(i5),B9={},Hst={get exports(){return B9},set exports(e){B9=e}},zst=Ht,Ust=ZJ;zst({target:"Reflect",stat:!0},{ownKeys:Ust});var Wst=Er,qst=Wst.Reflect.ownKeys,Kst=qst,Vst=Kst;(function(e){e.exports=Vst})(Hst);var s5={},Gst={get exports(){return s5},set exports(e){s5=e}};(function(e){e.exports=aQ})(Gst);var Fr=Pt(s5),o5={},Yst={get exports(){return o5},set exports(e){o5=e}},Zst=Ht,Xst=tf.map,Jst=Bb,Qst=Jst("map");Zst({target:"Array",proto:!0,forced:!Qst},{map:function(r){return Xst(this,r,arguments.length>1?arguments[1]:void 0)}});var eot=Ei,tot=eot("Array").map,rot=Mn,not=tot,lT=Array.prototype,iot=function(e){var r=e.map;return e===lT||rot(lT,e)&&r===lT.map?not:r},sot=iot,oot=sot;(function(e){e.exports=oot})(Yst);var uv=Pt(o5),a5={},aot={get exports(){return a5},set exports(e){a5=e}},lot=Ht,uot=uo,hQ=Ab,cot=Tr,fot=cot(function(){hQ(1)});lot({target:"Object",stat:!0,forced:fot},{keys:function(r){return hQ(uot(r))}});var hot=Er,dot=hot.Object.keys,pot=dot,vot=pot;(function(e){e.exports=vot})(aot);var bn=Pt(a5),l5={},got={get exports(){return l5},set exports(e){l5=e}},yot=Ht,mot=Ir,dQ=Date,bot=mot(dQ.prototype.getTime);yot({target:"Date",stat:!0},{now:function(){return bot(new dQ)}});var wot=Er,$ot=wot.Date.now,_ot=$ot,xot=_ot;(function(e){e.exports=xot})(got);var U$=Pt(l5),u5={},Eot={get exports(){return u5},set exports(e){u5=e}},Sot=Tr,Qv=function(e,r){var t=[][e];return!!t&&Sot(function(){t.call(null,r||function(){return 1},1)})},kot=tf.forEach,Tot=Qv,Iot=Tot("forEach"),Aot=Iot?[].forEach:function(r){return kot(this,r,arguments.length>1?arguments[1]:void 0)},Oot=Ht,M9=Aot;Oot({target:"Array",proto:!0,forced:[].forEach!=M9},{forEach:M9});var Cot=Ei,Pot=Cot("Array").forEach,Not=Pot,Rot=Not,Dot=Qh,Bot=xi,Mot=Mn,Lot=Rot,uT=Array.prototype,Fot={DOMTokenList:!0,NodeList:!0},jot=function(e){var r=e.forEach;return e===uT||Mot(uT,e)&&r===uT.forEach||Bot(Fot,Dot(e))?Lot:r};(function(e){e.exports=jot})(Eot);var Kr=Pt(u5),c5={},Hot={get exports(){return c5},set exports(e){c5=e}},zot=Ht,Uot=Ir,Wot=rd,qot=Uot([].reverse),L9=[1,2];zot({target:"Array",proto:!0,forced:String(L9)===String(L9.reverse())},{reverse:function(){return Wot(this)&&(this.length=this.length),qot(this)}});var Kot=Ei,Vot=Kot("Array").reverse,Got=Mn,Yot=Vot,cT=Array.prototype,Zot=function(e){var r=e.reverse;return e===cT||Got(cT,e)&&r===cT.reverse?Yot:r},Xot=Zot,Jot=Xot;(function(e){e.exports=Jot})(Hot);var wh=Pt(c5),f5={},Qot={get exports(){return f5},set exports(e){f5=e}},eat=oi,tat=rd,rat=TypeError,nat=Object.getOwnPropertyDescriptor,iat=eat&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),sat=iat?function(e,r){if(tat(e)&&!nat(e,"length").writable)throw rat("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},F9=Vv,oat=TypeError,pQ=function(e,r){if(!delete e[r])throw oat("Cannot delete property "+F9(r)+" of "+F9(e))},aat=Ht,lat=uo,uat=Tb,cat=Mx,fat=Ma,hat=sat,dat=eQ,pat=cN,vat=Jv,fT=pQ,gat=Bb,yat=gat("splice"),mat=Math.max,bat=Math.min;aat({target:"Array",proto:!0,forced:!yat},{splice:function(r,t){var n=lat(this),i=fat(n),s=uat(r,i),o=arguments.length,a,l,u,f,c,p;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=bat(mat(cat(t),0),i-s)),dat(i+a-l),u=pat(n,l),f=0;f<l;f++)c=s+f,c in n&&vat(u,f,n[c]);if(u.length=l,a<l){for(f=s;f<i-l;f++)c=f+l,p=f+a,c in n?n[p]=n[c]:fT(n,p);for(f=i;f>i-l+a;f--)fT(n,f-1)}else if(a>l)for(f=i-l;f>s;f--)c=f+l-1,p=f+a-1,c in n?n[p]=n[c]:fT(n,p);for(f=0;f<a;f++)n[f+s]=arguments[f+2];return hat(n,i-l+a),u}});var wat=Ei,$at=wat("Array").splice,_at=Mn,xat=$at,hT=Array.prototype,Eat=function(e){var r=e.splice;return e===hT||_at(hT,e)&&r===hT.splice?xat:r},Sat=Eat,kat=Sat;(function(e){e.exports=kat})(Qot);var du=Pt(f5),h5={},Tat={get exports(){return h5},set exports(e){h5=e}},Iat=Ht,Aat=eN.includes,Oat=Tr,Cat=Oat(function(){return!Array(1).includes()});Iat({target:"Array",proto:!0,forced:Cat},{includes:function(r){return Aat(this,r,arguments.length>1?arguments[1]:void 0)}});var Pat=Ei,Nat=Pat("Array").includes,Rat=_i,Dat=Nu,Bat=Ln,Mat=Bat("match"),Lat=function(e){var r;return Rat(e)&&((r=e[Mat])!==void 0?!!r:Dat(e)=="RegExp")},Fat=Lat,jat=TypeError,Hat=function(e){if(Fat(e))throw jat("The method doesn't accept regular expressions");return e},zat=Ln,Uat=zat("match"),Wat=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[Uat]=!1,"/./"[e](r)}catch{}}return!1},qat=Ht,Kat=Ir,Vat=Hat,Gat=$b,j9=kl,Yat=Wat,Zat=Kat("".indexOf);qat({target:"String",proto:!0,forced:!Yat("includes")},{includes:function(r){return!!~Zat(j9(Gat(this)),j9(Vat(r)),arguments.length>1?arguments[1]:void 0)}});var Xat=Ei,Jat=Xat("String").includes,H9=Mn,Qat=Nat,elt=Jat,dT=Array.prototype,pT=String.prototype,tlt=function(e){var r=e.includes;return e===dT||H9(dT,e)&&r===dT.includes?Qat:typeof e=="string"||e===pT||H9(pT,e)&&r===pT.includes?elt:r},rlt=tlt,nlt=rlt;(function(e){e.exports=nlt})(Tat);var gl=Pt(h5),d5={},ilt={get exports(){return d5},set exports(e){d5=e}},slt=Ht,olt=Tr,alt=uo,vQ=Hx,llt=iJ,ult=olt(function(){vQ(1)});slt({target:"Object",stat:!0,forced:ult,sham:!llt},{getPrototypeOf:function(r){return vQ(alt(r))}});var clt=Er,flt=clt.Object.getPrototypeOf,hlt=flt,gQ=hlt;(function(e){e.exports=gQ})(ilt);var z9=Pt(d5),p5={},dlt={get exports(){return p5},set exports(e){p5=e}},plt=Ht,vlt=tf.filter,glt=Bb,ylt=glt("filter");plt({target:"Array",proto:!0,forced:!ylt},{filter:function(r){return vlt(this,r,arguments.length>1?arguments[1]:void 0)}});var mlt=Ei,blt=mlt("Array").filter,wlt=Mn,$lt=blt,vT=Array.prototype,_lt=function(e){var r=e.filter;return e===vT||wlt(vT,e)&&r===vT.filter?$lt:r},xlt=_lt,Elt=xlt;(function(e){e.exports=Elt})(dlt);var Os=Pt(p5),U9={},Slt={get exports(){return U9},set exports(e){U9=e}},klt=oi,yQ=Ir,Tlt=Ab,Ilt=Ba,Alt=mb.f,Olt=yQ(Alt),Clt=yQ([].push),W9=function(e){return function(r){for(var t=Ilt(r),n=Tlt(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!klt||Olt(t,a))&&Clt(o,e?[a,t[a]]:t[a]);return o}},Plt={entries:W9(!0),values:W9(!1)},Nlt=Ht,Rlt=Plt.values;Nlt({target:"Object",stat:!0},{values:function(r){return Rlt(r)}});var Dlt=Er,Blt=Dlt.Object.values,Mlt=Blt,Llt=Mlt;(function(e){e.exports=Llt})(Slt);var v5={},Flt={get exports(){return v5},set exports(e){v5=e}},e2=`	
\v\f\r                　\u2028\u2029\uFEFF`,jlt=Ir,Hlt=$b,zlt=kl,g5=e2,q9=jlt("".replace),Ult=RegExp("^["+g5+"]+"),Wlt=RegExp("(^|[^"+g5+"])["+g5+"]+$"),gT=function(e){return function(r){var t=zlt(Hlt(r));return e&1&&(t=q9(t,Ult,"")),e&2&&(t=q9(t,Wlt,"$1")),t}},yN={start:gT(1),end:gT(2),trim:gT(3)},mQ=Yn,qlt=Tr,Klt=Ir,Vlt=kl,Glt=yN.trim,K9=e2,Ey=mQ.parseInt,V9=mQ.Symbol,G9=V9&&V9.iterator,bQ=/^[+-]?0x/i,Ylt=Klt(bQ.exec),Zlt=Ey(K9+"08")!==8||Ey(K9+"0x16")!==22||G9&&!qlt(function(){Ey(Object(G9))}),Xlt=Zlt?function(r,t){var n=Glt(Vlt(r));return Ey(n,t>>>0||(Ylt(bQ,n)?16:10))}:Ey,Jlt=Ht,Y9=Xlt;Jlt({global:!0,forced:parseInt!=Y9},{parseInt:Y9});var Qlt=Er,eut=Qlt.parseInt,tut=eut,rut=tut;(function(e){e.exports=rut})(Flt);var ba=Pt(v5),y5={},nut={get exports(){return y5},set exports(e){y5=e}},iut=Ht,sut=X4,out=eN.indexOf,aut=Qv,m5=sut([].indexOf),wQ=!!m5&&1/m5([1],1,-0)<0,lut=wQ||!aut("indexOf");iut({target:"Array",proto:!0,forced:lut},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return wQ?m5(this,r,t)||0:out(this,r,t)}});var uut=Ei,cut=uut("Array").indexOf,fut=Mn,hut=cut,yT=Array.prototype,dut=function(e){var r=e.indexOf;return e===yT||fut(yT,e)&&r===yT.indexOf?hut:r},put=dut,vut=put;(function(e){e.exports=vut})(nut);var Sr=Pt(y5),Z9={},gut={get exports(){return Z9},set exports(e){Z9=e}},yut=tJ.PROPER,mut=Tr,X9=e2,J9="​᠎",but=function(e){return mut(function(){return!!X9[e]()||J9[e]()!==J9||yut&&X9[e].name!==e})},wut=Ht,$ut=yN.trim,_ut=but;wut({target:"String",proto:!0,forced:_ut("trim")},{trim:function(){return $ut(this)}});var xut=Ei,Eut=xut("String").trim,Sut=Mn,kut=Eut,mT=String.prototype,Tut=function(e){var r=e.trim;return typeof e=="string"||e===mT||Sut(mT,e)&&r===mT.trim?kut:r},Iut=Tut,Aut=Iut;(function(e){e.exports=Aut})(gut);var b5={},Out={get exports(){return b5},set exports(e){b5=e}},Cut=Ht,Put=oi,Nut=Yv;Cut({target:"Object",stat:!0,sham:!Put},{create:Nut});var Rut=Er,Dut=Rut.Object,But=function(r,t){return Dut.create(r,t)},Mut=But,$Q=Mut;(function(e){e.exports=$Q})(Out);var $h=Pt(b5),w5={},Lut={get exports(){return w5},set exports(e){w5=e}},$5=Er,Fut=yb;$5.JSON||($5.JSON={stringify:JSON.stringify});var jut=function(r,t,n){return Fut($5.JSON.stringify,null,arguments)},Hut=jut,zut=Hut;(function(e){e.exports=zut})(Lut);var Mb=Pt(w5),_5={},Uut={get exports(){return _5},set exports(e){_5=e}},Wut=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",qut=TypeError,Kut=function(e,r){if(e<r)throw qut("Not enough arguments");return e},_Q=Yn,Vut=yb,Gut=$i,Yut=Wut,Zut=_b,Xut=Lx,Jut=Kut,Qut=_Q.Function,ect=/MSIE .\./.test(Zut)||Yut&&function(){var e=_Q.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),xQ=function(e,r){var t=r?2:1;return ect?function(n,i){var s=Jut(arguments.length,1)>t,o=Gut(n)?n:Qut(n),a=s?Xut(arguments,t):[],l=s?function(){Vut(o,this,a)}:o;return r?e(l,i):e(l)}:e},tct=Ht,EQ=Yn,rct=xQ,Q9=rct(EQ.setInterval,!0);tct({global:!0,bind:!0,forced:EQ.setInterval!==Q9},{setInterval:Q9});var nct=Ht,SQ=Yn,ict=xQ,ej=ict(SQ.setTimeout,!0);nct({global:!0,bind:!0,forced:SQ.setTimeout!==ej},{setTimeout:ej});var sct=Er,oct=sct.setTimeout;(function(e){e.exports=oct})(Uut);var yl=Pt(_5),x5={},act={get exports(){return x5},set exports(e){x5=e}},lct=uo,tj=Tb,uct=Ma,cct=function(r){for(var t=lct(this),n=uct(t),i=arguments.length,s=tj(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:tj(o,n);a>s;)t[s++]=r;return t},fct=Ht,hct=cct;fct({target:"Array",proto:!0},{fill:hct});var dct=Ei,pct=dct("Array").fill,vct=Mn,gct=pct,bT=Array.prototype,yct=function(e){var r=e.fill;return e===bT||vct(bT,e)&&r===bT.fill?gct:r},mct=yct,bct=mct;(function(e){e.exports=bct})(act);var Lb=Pt(x5);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Pa(){return Pa=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Pa.apply(this,arguments)}function ea(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function M1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E5;typeof Object.assign!="function"?E5=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:E5=Object.assign;var Lh=E5,rj=["","webkit","Moz","MS","ms","o"],wct=typeof document>"u"?{style:{}}:document.createElement("div"),$ct="function",yp=Math.round,Fh=Math.abs,mN=Date.now;function t2(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<rj.length;){if(t=rj[s],n=t?t+i:r,n in e)return n;s++}}var pu;typeof window>"u"?pu={}:pu=window;var kQ=t2(wct.style,"touchAction"),TQ=kQ!==void 0;function _ct(){if(!TQ)return!1;var e={},r=pu.CSS&&pu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?pu.CSS.supports("touch-action",t):!0}),e}var IQ="compute",AQ="auto",S5="manipulation",_h="none",pm="pan-x",vm="pan-y",L1=_ct(),xct=/mobile|tablet|ip(ad|hone|od)|android/i,OQ="ontouchstart"in pu,Ect=t2(pu,"PointerEvent")!==void 0,Sct=OQ&&xct.test(navigator.userAgent),Fb="touch",kct="pen",bN="mouse",Tct="kinect",Ict=25,hs=1,nd=2,Kn=4,Rs=8,W$=1,jb=2,Hb=4,zb=8,cv=16,ml=jb|Hb,xh=zb|cv,CQ=ml|xh,PQ=["x","y"],q$=["clientX","clientY"];function vu(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function r2(e,r){return typeof e===$ct?e.apply(r&&r[0]||void 0,r):e}function rh(e,r){return e.indexOf(r)>-1}function Act(e){if(rh(e,_h))return _h;var r=rh(e,pm),t=rh(e,vm);return r&&t?_h:r||t?r?pm:vm:rh(e,S5)?S5:AQ}var NQ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===IQ&&(n=this.compute()),TQ&&this.manager.element.style&&L1[n]&&(this.manager.element.style[kQ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return vu(this.manager.recognizers,function(i){r2(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),Act(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=rh(o,_h)&&!L1[_h],l=rh(o,vm)&&!L1[vm],u=rh(o,pm)&&!L1[pm];if(a){var f=n.pointers.length===1,c=n.distance<2,p=n.deltaTime<250;if(f&&c&&p)return}if(!(u&&l)&&(a||l&&s&ml||u&&s&xh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function wN(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function RQ(e){var r=e.length;if(r===1)return{x:yp(e[0].clientX),y:yp(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:yp(t/r),y:yp(n/r)}}function nj(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:yp(e.pointers[t].clientX),clientY:yp(e.pointers[t].clientY)},t++;return{timeStamp:mN(),pointers:r,center:RQ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function K$(e,r,t){t||(t=PQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function k5(e,r,t){t||(t=PQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function DQ(e,r){return e===r?W$:Fh(e)>=Fh(r)?e<0?jb:Hb:r<0?zb:cv}function Oct(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===hs||s.eventType===Kn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function BQ(e,r,t){return{x:r/e||0,y:t/e||0}}function Cct(e,r){return K$(r[0],r[1],q$)/K$(e[0],e[1],q$)}function Pct(e,r){return k5(r[1],r[0],q$)+k5(e[1],e[0],q$)}function Nct(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Rs&&(n>Ict||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,f=BQ(n,l,u);s=f.x,o=f.y,i=Fh(f.x)>Fh(f.y)?f.x:f.y,a=DQ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function Rct(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=nj(r)),i>1&&!t.firstMultiple?t.firstMultiple=nj(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=RQ(n);r.timeStamp=mN(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=k5(a,l),r.distance=K$(a,l),Oct(t,r),r.offsetDirection=DQ(r.deltaX,r.deltaY);var u=BQ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Fh(u.x)>Fh(u.y)?u.x:u.y,r.scale=o?Cct(o.pointers,n):1,r.rotation=o?Pct(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,Nct(t,r);var f=e.element,c=r.srcEvent,p;c.composedPath?p=c.composedPath()[0]:c.path?p=c.path[0]:p=c.target,wN(p,f)&&(f=p),r.target=f}function Dct(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&hs&&n-i===0,o=r&(Kn|Rs)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,Rct(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function gm(e){return e.trim().split(/\s+/g)}function Sy(e,r,t){vu(gm(r),function(n){e.addEventListener(n,t,!1)})}function ky(e,r,t){vu(gm(r),function(n){e.removeEventListener(n,t,!1)})}function ij(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var eg=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){r2(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&Sy(this.element,this.evEl,this.domHandler),this.evTarget&&Sy(this.target,this.evTarget,this.domHandler),this.evWin&&Sy(ij(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&ky(this.element,this.evEl,this.domHandler),this.evTarget&&ky(this.target,this.evTarget,this.domHandler),this.evWin&&ky(ij(this.element),this.evWin,this.domHandler)},e}();function jh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var Bct={pointerdown:hs,pointermove:nd,pointerup:Kn,pointercancel:Rs,pointerout:Rs},Mct={2:Fb,3:kct,4:bN,5:Tct},MQ="pointerdown",LQ="pointermove pointerup pointercancel";pu.MSPointerEvent&&!pu.PointerEvent&&(MQ="MSPointerDown",LQ="MSPointerMove MSPointerUp MSPointerCancel");var FQ=function(e){ea(r,e);function r(){var n,i=r.prototype;return i.evEl=MQ,i.evWin=LQ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=Bct[a],u=Mct[i.pointerType]||i.pointerType,f=u===Fb,c=jh(s,i.pointerId,"pointerId");l&hs&&(i.button===0||f)?c<0&&(s.push(i),c=s.length-1):l&(Kn|Rs)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(eg);function ym(e){return Array.prototype.slice.call(e,0)}function $N(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];jh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var Lct={touchstart:hs,touchmove:nd,touchend:Kn,touchcancel:Rs},Fct="touchstart touchmove touchend touchcancel",_N=function(e){ea(r,e);function r(){var n;return r.prototype.evTarget=Fct,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=Lct[i.type],o=jct.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Fb,srcEvent:i})},r}(eg);function jct(e,r){var t=ym(e.touches),n=this.targetIds;if(r&(hs|nd)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=ym(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return wN(u.target,l)}),r===hs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Kn|Rs)&&delete n[o[i].identifier],i++;if(a.length)return[$N(s.concat(a),"identifier",!0),a]}var Hct={mousedown:hs,mousemove:nd,mouseup:Kn},zct="mousedown",Uct="mousemove mouseup",xN=function(e){ea(r,e);function r(){var n,i=r.prototype;return i.evEl=zct,i.evWin=Uct,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=Hct[i.type];s&hs&&i.button===0&&(this.pressed=!0),s&nd&&i.which!==1&&(s=Kn),this.pressed&&(s&Kn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:bN,srcEvent:i}))},r}(eg),Wct=2500,sj=25;function oj(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Wct)}}function qct(e,r){e&hs?(this.primaryTouch=r.changedPointers[0].identifier,oj.call(this,r)):e&(Kn|Rs)&&oj.call(this,r)}function Kct(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=sj&&o<=sj)return!0}return!1}var jQ=function(){var e=function(r){ea(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var f=u.pointerType===Fb,c=u.pointerType===bN;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(f)qct.call(M1(M1(o)),l,u);else if(c&&Kct.call(M1(M1(o)),u))return;o.callback(a,l,u)}},o.touch=new _N(o.manager,o.handler),o.mouse=new xN(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(eg);return e}();function Vct(e){var r,t=e.options.inputClass;return t?r=t:Ect?r=FQ:Sct?r=_N:OQ?r=jQ:r=xN,new r(e,Dct)}function mp(e,r,t){return Array.isArray(e)?(vu(e,t[r],t),!0):!1}var kw=1,Go=2,fv=4,Dc=8,gu=Dc,mm=16,dl=32,Gct=1;function Yct(){return Gct++}function F1(e,r){var t=r.manager;return t?t.get(e):e}function aj(e){return e&mm?"cancel":e&Dc?"end":e&fv?"move":e&Go?"start":""}var Ub=function(){function e(t){t===void 0&&(t={}),this.options=Pa({enable:!0},t),this.id=Yct(),this.manager=null,this.state=kw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Lh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(mp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=F1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return mp(n,"dropRecognizeWith",this)?this:(n=F1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(mp(n,"requireFailure",this))return this;var i=this.requireFail;return n=F1(n,this),jh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(mp(n,"dropRequireFailure",this))return this;n=F1(n,this);var i=jh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Dc&&o(i.options.event+aj(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Dc&&o(i.options.event+aj(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=dl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(dl|kw)))return!1;n++}return!0},r.recognize=function(n){var i=Lh({},n);if(!r2(this.options.enable,[this,i])){this.reset(),this.state=dl;return}this.state&(gu|mm|dl)&&(this.state=kw),this.state=this.process(i),this.state&(Go|fv|Dc|mm)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),T5=function(e){ea(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Pa({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[S5]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&hs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Kn)return this.failTimeout();var f=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||K$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!f?this.count=1:this.count+=1,this._input=i;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=gu,s.tryEmit()},o.interval),Go):gu}return dl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=dl},this.options.interval),dl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===gu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Ub),hv=function(e){ea(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Pa({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Go|fv),l=this.attrTest(i);return a&&(o&Rs||!l)?s|mm:a||l?o&Kn?s|Dc:s&Go?s|fv:Go:dl},r}(Ub);function HQ(e){return e===cv?"down":e===zb?"up":e===jb?"left":e===Hb?"right":""}var EN=function(e){ea(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Pa({event:"pan",threshold:10,pointers:1,direction:CQ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&ml&&s.push(vm),i&xh&&s.push(pm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,f=i.deltaY;return l&s.direction||(s.direction&ml?(l=u===0?W$:u<0?jb:Hb,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=f===0?W$:f<0?zb:cv,o=f!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return hv.prototype.attrTest.call(this,i)&&(this.state&Go||!(this.state&Go)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=HQ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(hv),zQ=function(e){ea(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Pa({event:"swipe",threshold:10,velocity:.3,direction:ml|xh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return EN.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(ml|xh)?o=i.overallVelocity:s&ml?o=i.overallVelocityX:s&xh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Fh(o)>this.options.velocity&&i.eventType&Kn},t.emit=function(i){var s=HQ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(hv),UQ=function(e){ea(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Pa({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[_h]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Go)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(hv),WQ=function(e){ea(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Pa({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[_h]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Go)},r}(hv),qQ=function(e){ea(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Pa({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[AQ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Kn|Rs)&&!u)this.reset();else if(i.eventType&hs)this.reset(),this._timer=setTimeout(function(){s.state=gu,s.tryEmit()},o.time);else if(i.eventType&Kn)return gu;return dl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===gu&&(i&&i.eventType&Kn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=mN(),this.manager.emit(this.options.event,this._input)))},r}(Ub),KQ={domEvents:!1,touchAction:IQ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},lj=[[WQ,{enable:!1}],[UQ,{enable:!1},["rotate"]],[zQ,{direction:ml}],[EN,{direction:ml},["swipe"]],[T5],[T5,{event:"doubletap",taps:2},["tap"]],[qQ]],Zct=1,uj=2;function cj(e,r){var t=e.element;if(t.style){var n;vu(e.options.cssProps,function(i,s){n=t2(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Xct(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var fj=function(){function e(t,n){var i=this;this.options=Lh({},KQ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Vct(this),this.touchAction=new NQ(this,this.options.touchAction),cj(this,!0),vu(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Lh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?uj:Zct},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&gu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==uj&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Go|fv|Dc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof Ub)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(mp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(mp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=jh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return vu(gm(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return vu(gm(n),function(o){i?s[o]&&s[o].splice(jh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Xct(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&cj(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),Jct={touchstart:hs,touchmove:nd,touchend:Kn,touchcancel:Rs},Qct="touchstart",eft="touchstart touchmove touchend touchcancel",tft=function(e){ea(r,e);function r(){var n,i=r.prototype;return i.evTarget=Qct,i.evWin=eft,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=Jct[i.type];if(s===hs&&(this.started=!0),!!this.started){var o=rft.call(this,i,s);s&(Kn|Rs)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Fb,srcEvent:i})}},r}(eg);function rft(e,r){var t=ym(e.touches),n=ym(e.changedTouches);return r&(Kn|Rs)&&(t=$N(t.concat(n),"identifier",!0)),[t,n]}function VQ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var GQ=VQ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),nft=VQ(function(e,r){return GQ(e,r,!0)},"merge","Use `assign`.");function ift(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Lh(i,t)}function hj(e,r){return function(){return e.apply(r,arguments)}}var YQ=function(){var e=function(t,n){return n===void 0&&(n={}),new fj(t,Pa({recognizers:lj.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=CQ,e.DIRECTION_DOWN=cv,e.DIRECTION_LEFT=jb,e.DIRECTION_RIGHT=Hb,e.DIRECTION_UP=zb,e.DIRECTION_HORIZONTAL=ml,e.DIRECTION_VERTICAL=xh,e.DIRECTION_NONE=W$,e.DIRECTION_DOWN=cv,e.INPUT_START=hs,e.INPUT_MOVE=nd,e.INPUT_END=Kn,e.INPUT_CANCEL=Rs,e.STATE_POSSIBLE=kw,e.STATE_BEGAN=Go,e.STATE_CHANGED=fv,e.STATE_ENDED=Dc,e.STATE_RECOGNIZED=gu,e.STATE_CANCELLED=mm,e.STATE_FAILED=dl,e.Manager=fj,e.Input=eg,e.TouchAction=NQ,e.TouchInput=_N,e.MouseInput=xN,e.PointerEventInput=FQ,e.TouchMouseInput=jQ,e.SingleTouchInput=tft,e.Recognizer=Ub,e.AttrRecognizer=hv,e.Tap=T5,e.Pan=EN,e.Swipe=zQ,e.Pinch=UQ,e.Rotate=WQ,e.Press=qQ,e.on=Sy,e.off=ky,e.each=vu,e.merge=nft,e.extend=GQ,e.bindFn=hj,e.assign=Lh,e.inherit=ift,e.bindFn=hj,e.prefixed=t2,e.toArray=ym,e.inArray=jh,e.uniqueArray=$N,e.splitStr=gm,e.boolOrFn=r2,e.hasParent=wN,e.addEventListeners=Sy,e.removeEventListeners=ky,e.defaults=Lh({},KQ,{preset:lj}),e}();YQ.defaults;var sft=YQ;function ZQ(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=oft(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function oft(e,r){var t;if(e){if(typeof e=="string")return dj(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dj(e,r)}}function dj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}nf("DELETE");function n2(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return aft(r.length?r:[U$()])}function aft(e){var r=lft(e),t=wn(r,3),n=t[0],i=t[1],s=t[2],o=1,a=function(){var u=2091639*n+o*23283064365386963e-26;return n=i,i=s,s=u-(o=u|0)};return a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function lft(){for(var e=uft(),r=e(" "),t=e(" "),n=e(" "),i=0;i<arguments.length;i++)r-=e(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),t-=e(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=e(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[r,t,n]}function uft(){var e=4022871197;return function(r){for(var t=r.toString(),n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function cft(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var SN=typeof window<"u"?window.Hammer||sft:function(){return cft()};function pl(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=SN(this._dom.overlay);n.on("tap",nt(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Kr(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){fft(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}ZX(pl.prototype);pl.current=null;pl.prototype.destroy=function(){var e,r;this.deactivate();var t=ZQ(wh(e=du(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};pl.prototype.activate=function(){pl.current&&pl.current.deactivate(),pl.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};pl.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};pl.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function fft(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var hft=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,dft=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pft=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,vft=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function bc(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(bc(r),e.removeChild(r))}}function xc(e){return e instanceof String||typeof e=="string"}function pj(e){return Dr(e)==="object"&&e!==null}function Hh(e,r,t,n){var i=!1;n===!0&&(i=r[t]===null&&e[t]!==void 0),i?delete e[t]:e[t]=r[t]}function XQ(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var n in e)if(r[n]!==void 0)if(r[n]===null||Dr(r[n])!=="object")Hh(e,r,n,t);else{var i=e[n],s=r[n];pj(i)&&pj(s)&&XQ(i,s,t)}}function tg(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Fr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var s=e[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)r[s]===void 0&&(r[s]={}),r[s].constructor===Object?Jr(r[s],t[s],!1,n):Hh(r,t,s,n);else{if(Fr(t[s]))throw new TypeError("Arrays are not supported by deepExtend");Hh(r,t,s,n)}}return r}function V$(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Fr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!gl(e).call(e,i))if(t[i]&&t[i].constructor===Object)r[i]===void 0&&(r[i]={}),r[i].constructor===Object?Jr(r[i],t[i]):Hh(r,t,i,n);else if(Fr(t[i])){r[i]=[];for(var s=0;s<t[i].length;s++)r[i].push(t[i][s])}else Hh(r,t,i,n);return r}function Jr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)||t===!0)if(Dr(r[i])==="object"&&r[i]!==null&&z9(r[i])===Object.prototype)e[i]===void 0?e[i]=Jr({},r[i],t):Dr(e[i])==="object"&&e[i]!==null&&z9(e[i])===Object.prototype?Jr(e[i],r[i],t):Hh(e,r,i,n);else if(Fr(r[i])){var s;e[i]=Pi(s=r[i]).call(s)}else Hh(e,r,i,n);return e}function G$(e,r){var t;return gN(t=[]).call(t,ll(e),[r])}function gft(e){return Pi(e).call(e)}function yft(e){return e.getBoundingClientRect().left}function mft(e){return e.getBoundingClientRect().top}function gr(e,r){if(Fr(e))for(var t=e.length,n=0;n<t;n++)r(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r(e[i],i,e)}function bft(e,r,t,n){if(e.addEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&gl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,n)}else e.attachEvent("on"+r,t)}function wft(e,r,t,n){if(e.removeEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&gl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,n)}else e.detachEvent("on"+r,t)}function kN(e){var r;switch(e.length){case 3:case 4:return r=dft.exec(e),r?{r:ba(r[1]+r[1],16),g:ba(r[2]+r[2],16),b:ba(r[3]+r[3],16)}:null;case 6:case 7:return r=hft.exec(e),r?{r:ba(r[1],16),g:ba(r[2],16),b:ba(r[3],16)}:null;default:return null}}function Wo(e,r){if(gl(e).call(e,"rgba"))return e;if(gl(e).call(e,"rgb")){var t=e.substr(Sr(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var n=kN(e);return n==null?e:"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}function JQ(e,r,t){var n;return"#"+Pi(n=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(n,1)}function I5(e,r){if(xc(e)){var t=e;if(eee(t)){var n,i=uv(n=t.substr(4).substr(0,t.length-5).split(",")).call(n,function(p){return ba(p)});t=JQ(i[0],i[1],i[2])}if(QQ(t)===!0){var s=$ft(t),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=A5(a.h,a.s,a.v),u=A5(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var f={background:e.background||r.background,border:e.border||r.border,highlight:xc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:xc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return f}else{var c={background:e.background||void 0,border:e.border||void 0,highlight:xc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:xc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return c}}function sy(e,r,t){e=e/255,r=r/255,t=t/255;var n=Math.min(e,Math.min(r,t)),i=Math.max(e,Math.max(r,t));if(n===i)return{h:0,s:0,v:n};var s=e===n?r-t:t===n?e-r:t-e,o=e===n?3:t===n?1:5,a=60*(o-s/(i-n))/360,l=(i-n)/i,u=i;return{h:a,s:l,v:u}}function Tw(e,r,t){var n,i,s,o=Math.floor(e*6),a=e*6-o,l=t*(1-r),u=t*(1-a*r),f=t*(1-(1-a)*r);switch(o%6){case 0:n=t,i=f,s=l;break;case 1:n=u,i=t,s=l;break;case 2:n=l,i=t,s=f;break;case 3:n=l,i=u,s=t;break;case 4:n=f,i=l,s=t;break;case 5:n=t,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function A5(e,r,t){var n=Tw(e,r,t);return JQ(n.r,n.g,n.b)}function $ft(e){var r=kN(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return sy(r.r,r.g,r.b)}function QQ(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function eee(e){return pft.test(e)}function _ft(e){return vft.test(e)}function Bc(e){if(e===null||Dr(e)!=="object")return null;if(e instanceof Element)return e;var r=$h(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Dr(e[t])=="object"&&(r[t]=Bc(e[t]));return r}function Fo(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=function(w){return w!=null},s=function(w){return w!==null&&Dr(w)==="object"},o=function(w){for(var b in w)if(Object.prototype.hasOwnProperty.call(w,b))return!1;return!0};if(!s(e))throw new Error("Parameter mergeTarget must be an object");if(!s(r))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(w,b,T){s(w[T])||(w[T]={});var _=b[T],A=w[T];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(A[x]=_[x])},l=r[t],u=s(n)&&!o(n),f=u?n[t]:void 0,c=f?f.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){s(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!s(e[t]))if(i(f))e[t]=$h(f);else return;if(s(l)){var p=!0;l.enabled!==void 0?p=l.enabled:c!==void 0&&(p=f.enabled),a(e,r,t),e[t].enabled=p}}}var xft={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function wc(e,r){var t;Fr(r)||(r=[r]);var n=ZQ(e),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s){t=s[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t<"u")break}}}catch(a){n.e(a)}finally{n.f()}return t}var Eft={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Sft=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ft(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return ht(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return Eft[t]}},{key:"setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var i,s=this._isColorString(t);if(s!==void 0&&(t=s),xc(t)===!0){if(eee(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(_ft(t)===!0){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(QQ(t)===!0){var l=kN(t);i={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:u}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Mb(t));this._setColor(i,n)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n===!0&&(this.previousColor=qn({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",yl(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n===!0&&(this.initialColor=qn({},t)),this.color=t;var i=sy(t.r,t.g,t.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var n=sy(this.color.r,this.color.g,this.color.b);n.v=t/100;var i=Tw(n.h,n.s,n.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,n=sy(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-n.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Lb(i).call(i),this.brightnessRange.value=100*n.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,n,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=nt(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=nt(n=this._apply).call(n,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=nt(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=nt(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new SN(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(n){n.isFirst&&t._moveSelector(n)}),this.hammer.on("tap",function(n){t._moveSelector(n)}),this.hammer.on("panstart",function(n){t._moveSelector(n)}),this.hammer.on("panmove",function(n){t._moveSelector(n)}),this.hammer.on("panend",function(n){t._moveSelector(n)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,n,i);var s,o,a,l;this.centerCoordinates={x:n*.5,y:i*.5},this.r=.49*n;var u=2*Math.PI/360,f=1/360,c=1/this.r,p;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(u*a),o=this.centerCoordinates.y+l*Math.cos(u*a),p=Tw(a*f,l*c,1),t.fillStyle="rgb("+p.r+","+p.g+","+p.b+")",t.fillRect(s-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,n,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var n=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-n.left,s=t.center.y-n.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,u=s-o,f=Math.atan2(l,u),c=.98*Math.min(Math.sqrt(l*l+u*u),a),p=Math.cos(f)*c+o,y=Math.sin(f)*c+a;this.colorPickerSelector.style.top=p-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=y-.5*this.colorPickerSelector.clientWidth+"px";var w=f/(2*Math.PI);w=w<0?w+1:w;var b=c/this.r,T=sy(this.color.r,this.color.g,this.color.b);T.h=w,T.s=b;var _=Tw(T.h,T.s,T.v);_.a=this.color.a,this.color=_,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function O5(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var n=document.createElement(r[0]);return n.appendChild(O5.apply(void 0,ll(Pi(r).call(r,1)))),n}var kft=function(){function e(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ft(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},qn(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Sft(i),this.wrapper=void 0}return ht(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof t=="string")this.options.filter=t;else if(Fr(t))this.options.filter=t.join();else if(Dr(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Os(t)!==void 0&&(this.options.filter=Os(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(n=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,n=t):typeof t=="function"&&(this.options.filter=t,n=!0);Os(this.options)===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Os(this.options),n=0,i=!1;for(var s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof t=="function"?(i=t(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(t===!0||Sr(t).call(t,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,n>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var n=this.moduleOptions,i=0;i<t.length;i++)if(n[t[i]]!==void 0)n=n[t[i]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return Kr(s).call(s,function(a){n.appendChild(a)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerText=t,this._makeItem([],n)}},{key:"_makeLabel",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+n.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(O5("i","b",t))}else s.innerText=t+":";return s}},{key:"_makeDropdown",value:function(t,n,i){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var o=0;n!==void 0&&Sr(t).call(t,n)!==-1&&(o=Sr(t).call(t,n));for(var a=0;a<t.length;a++){var l=document.createElement("option");l.value=t[a],a===o&&(l.selected="selected"),l.innerText=t[a],s.appendChild(l)}var u=this;s.onchange=function(){u._update(this.value,i)};var f=this._makeLabel(i[i.length-1],i);this._makeItem(i,f,s)}},{key:"_makeRange",value:function(t,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=a}catch{}u.step=l;var f="",c=0;if(n!==void 0){var p=1.2;n<0&&n*p<o?(u.min=Math.ceil(n*p),c=u.min,f="range increased"):n/p<o&&(u.min=Math.ceil(n/p),c=u.min,f="range increased"),n*p>a&&a!==1&&(u.max=Math.ceil(n*p),c=u.max,f="range increased"),u.value=n}else u.value=s;var y=document.createElement("input");y.className="vis-configuration vis-config-rangeinput",y.value=u.value;var w=this;u.onchange=function(){y.value=this.value,w._update(Number(this.value),i)},u.oninput=function(){y.value=this.value};var b=this._makeLabel(i[i.length-1],i),T=this._makeItem(i,b,u,y);f!==""&&this.popupHistory[T]!==c&&(this.popupHistory[T]=c,this._setupPopup(f,T))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=function(){t._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(t,n){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerText=t,s.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],i=n.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=yl(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=yl(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,n,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=t,n!==void 0&&(s.checked=n,n!==t&&(Dr(t)==="object"?n!==t.enabled&&this.changedOptions.push({path:i,value:n}):this.changedOptions.push({path:i,value:n})));var o=this;s.onchange=function(){o._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeTextInput",value:function(t,n,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==t&&this.changedOptions.push({path:i,value:n});var o=this;s.onchange=function(){o._update(this.value,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeColorField",value:function(t,n,i){var s=this,o=t[1],a=document.createElement("div");n=n===void 0?o:n,n!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=n):a.className="vis-configuration vis-config-colorBlock none",n=n===void 0?o:n,a.onclick=function(){s._showColorPicker(n,a,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,a)}},{key:"_showColorPicker",value:function(t,n,i){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var a="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";n.style.backgroundColor=a,s._update(a,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=Os(this.options),a=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){s=!0;var u=t[l],f=G$(n,l);if(typeof o=="function"&&(s=o(l,n),s===!1&&!Fr(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,s=this._handleObject(u,f,!0),this.allowCreation=i===!1)),s!==!1){a=!0;var c=this._getValue(f);if(Fr(u))this._handleArray(u,c,f);else if(typeof u=="string")this._makeTextInput(u,c,f);else if(typeof u=="boolean")this._makeCheckbox(u,c,f);else if(u instanceof Object){if(!this.hideOption(n,l,this.moduleOptions))if(u.enabled!==void 0){var p=G$(f,"enabled"),y=this._getValue(p);if(y===!0){var w=this._makeLabel(l,f,!0);this._makeItem(f,w),a=this._handleObject(u,f)||a}else this._makeCheckbox(u,y,f)}else{var b=this._makeLabel(l,f,!0);this._makeItem(f,b),a=this._handleObject(u,f)||a}}else console.error("dont know how to handle",u,l,f)}}return a}},{key:"_handleArray",value:function(t,n,i){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,n,i),t[1]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="string"?(this._makeDropdown(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="number"&&(this._makeRange(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:Number(n)}))}},{key:"_update",value:function(t,n){var i=this._constructOptions(t,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<n.length;o++)n[o]!=="global"&&(s[n[o]]===void 0&&(s[n[o]]={}),o!==n.length-1?s=s[n[o]]:s[n[o]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(O5("pre","const options = "+Mb(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,t);return t}}]),e}(),Tft=function(){function e(r,t){ft(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return ht(e,[{key:"setPosition",value:function(t,n){this.x=ba(t),this.y=ba(n)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var n=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"){var u=!1,f=!0;this.y-n<this.padding&&(f=!1),this.x+i>o-this.padding&&(u=!0),u?a=this.x-i:a=this.x,f?l=this.y-n:l=this.y}else l=this.y-n,l+n+this.padding>s&&(l=s-n-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Ug=!1,vj,C5="background: #FFeeee; color: #dd0000",Ift=function(){function e(){ft(this,e)}return ht(e,null,[{key:"validate",value:function(t,n,i){Ug=!1,vj=n;var s=n;return i!==void 0&&(s=n[i]),e.parse(t,s,[]),Ug}},{key:"parse",value:function(t,n,i){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.check(s,t,n,i)}},{key:"check",value:function(t,n,i,s){if(i[t]===void 0&&i.__any__===void 0){e.getSuggestion(t,i,s);return}var o=t,a=!0;i[t]===void 0&&i.__any__!==void 0&&(o="__any__",a=e.getType(n[t])==="object");var l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,n,i,o,l,s)}},{key:"checkFields",value:function(t,n,i,s,o,a){var l=function(p){console.error("%c"+p+e.printLocation(a,t),C5)},u=e.getType(n[t]),f=o[u];f!==void 0?e.getType(f)==="array"&&Sr(f).call(f,n[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(f)+' not "'+n[t]+'". '),Ug=!0):u==="object"&&s!=="__any__"&&(a=G$(a,t),e.parse(n[t],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(bn(o))+". Received ["+u+'] "'+n[t]+'"'),Ug=!0)}},{key:"getType",value:function(t){var n=Dr(t);return n==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Fr(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(t,n,i){var s=e.findInOptions(t,n,i,!1),o=e.findInOptions(t,vj,[],!0),a=8,l=4,u;s.indexMatch!==void 0?u=" in "+e.printLocation(s.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?u=" in "+e.printLocation(s.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):s.distance<=a?u='. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,t):u=". Did you mean one of these: "+e.print(bn(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+u,C5),Ug=!0}},{key:"findInOptions",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],u=t.toLowerCase(),f=void 0;for(var c in n){var p=void 0;if(n[c].__type__!==void 0&&s===!0){var y=e.findInOptions(t,n[c],G$(i,c));o>y.distance&&(a=y.closestMatch,l=y.path,o=y.distance,f=y.indexMatch)}else{var w;Sr(w=c.toLowerCase()).call(w,u)!==-1&&(f=c),p=e.levenshteinDistance(t,c),o>p&&(a=c,l=gft(i),o=p)}}return{closestMatch:a,path:l,distance:o,indexMatch:f}}},{key:"printLocation",value:function(t,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+i+`options = {
`,o=0;o<t.length;o++){for(var a=0;a<o+1;a++)s+="  ";s+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)s+="  ";s+=n+`
`;for(var u=0;u<t.length+1;u++){for(var f=0;f<t.length-u;f++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(t){return Mb(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,n){if(t.length===0)return n.length;if(n.length===0)return t.length;var i=[],s;for(s=0;s<=n.length;s++)i[s]=[s];var o;for(o=0;o<=t.length;o++)i[0][o]=o;for(s=1;s<=n.length;s++)for(o=1;o<=t.length;o++)n.charAt(s-1)==t.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[n.length][t.length]}}]),e}(),Aft=pl,Oft=kft,Pp=SN,Cft=Tft,tee=C5,Pft=Ift;function Nft(e){return kc=e,Mft()}var ree={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},TN=$h(ree);TN.color="color.color";TN.style="dashes";var ss={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},gj={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},kc="",dv=0,fr="",jt="",ks=ss.NULL;function Rft(){dv=0,fr=kc.charAt(0)}function ci(){dv++,fr=kc.charAt(dv)}function Yd(){return kc.charAt(dv+1)}function yj(e){var r=e.charCodeAt(0);return r<47?r===35||r===46:r<59?r>47:r<91?r>64:r<96?r===95:r<123?r>96:!1}function Yc(e,r){if(e||(e={}),r)for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}function Dft(e,r,t){for(var n=r.split("."),i=e;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=t}}function nee(e,r){for(var t,n,i=null,s=[e],o=e;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(r.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:r.id},e.node&&(i.attr=Yc(i.attr,e.node))),t=s.length-1;t>=0;t--){var a,l=s[t];l.nodes||(l.nodes=[]),Sr(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}r.attr&&(i.attr=Yc(i.attr,r.attr))}function Bft(e,r){if(e.edges||(e.edges=[]),e.edges.push(r),e.edge){var t=Yc({},e.edge);r.attr=Yc(t,r.attr)}}function iee(e,r,t,n,i){var s={from:r,to:t,type:n};return e.edge&&(s.attr=Yc({},e.edge)),s.attr=Yc(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Qr(){for(ks=ss.NULL,jt="";fr===" "||fr==="	"||fr===`
`||fr==="\r";)ci();do{var e=!1;if(fr==="#"){for(var r=dv-1;kc.charAt(r)===" "||kc.charAt(r)==="	";)r--;if(kc.charAt(r)===`
`||kc.charAt(r)===""){for(;fr!=""&&fr!=`
`;)ci();e=!0}}if(fr==="/"&&Yd()==="/"){for(;fr!=""&&fr!=`
`;)ci();e=!0}if(fr==="/"&&Yd()==="*"){for(;fr!="";)if(fr==="*"&&Yd()==="/"){ci(),ci();break}else ci();e=!0}for(;fr===" "||fr==="	"||fr===`
`||fr==="\r";)ci()}while(e);if(fr===""){ks=ss.DELIMITER;return}var t=fr+Yd();if(gj[t]){ks=ss.DELIMITER,jt=t,ci(),ci();return}if(gj[fr]){ks=ss.DELIMITER,jt=fr,ci();return}if(yj(fr)||fr==="-"){for(jt+=fr,ci();yj(fr);)jt+=fr,ci();jt==="false"?jt=!1:jt==="true"?jt=!0:isNaN(Number(jt))||(jt=Number(jt)),ks=ss.IDENTIFIER;return}if(fr==='"'){for(ci();fr!=""&&(fr!='"'||fr==='"'&&Yd()==='"');)fr==='"'?(jt+=fr,ci()):fr==="\\"&&Yd()==="n"?(jt+=`
`,ci()):jt+=fr,ci();if(fr!='"')throw os('End of string " expected');ci(),ks=ss.IDENTIFIER;return}for(ks=ss.UNKNOWN;fr!="";)jt+=fr,ci();throw new SyntaxError('Syntax error in part "'+lee(jt,30)+'"')}function Mft(){var e={};if(Rft(),Qr(),jt==="strict"&&(e.strict=!0,Qr()),(jt==="graph"||jt==="digraph")&&(e.type=jt,Qr()),ks===ss.IDENTIFIER&&(e.id=jt,Qr()),jt!="{")throw os("Angle bracket { expected");if(Qr(),see(e),jt!="}")throw os("Angle bracket } expected");if(Qr(),jt!=="")throw os("End of file expected");return Qr(),delete e.node,delete e.edge,delete e.graph,e}function see(e){for(;jt!==""&&jt!="}";)Lft(e),jt===";"&&Qr()}function Lft(e){var r=oee(e);if(r){aee(e,r);return}var t=Fft(e);if(!t){if(ks!=ss.IDENTIFIER)throw os("Identifier expected");var n=jt;if(Qr(),jt==="="){if(Qr(),ks!=ss.IDENTIFIER)throw os("Identifier expected");e[n]=jt,Qr()}else jft(e,n)}}function oee(e){var r=null;if(jt==="subgraph"&&(r={},r.type="subgraph",Qr(),ks===ss.IDENTIFIER&&(r.id=jt,Qr())),jt==="{"){if(Qr(),r||(r={}),r.parent=e,r.node=e.node,r.edge=e.edge,r.graph=e.graph,see(r),jt!="}")throw os("Angle bracket } expected");Qr(),delete r.node,delete r.edge,delete r.graph,delete r.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(r)}return r}function Fft(e){return jt==="node"?(Qr(),e.node=Ty(),"node"):jt==="edge"?(Qr(),e.edge=Ty(),"edge"):jt==="graph"?(Qr(),e.graph=Ty(),"graph"):null}function jft(e,r){var t={id:r},n=Ty();n&&(t.attr=n),nee(e,t),aee(e,r)}function aee(e,r){for(;jt==="->"||jt==="--";){var t,n=jt;Qr();var i=oee(e);if(i)t=i;else{if(ks!=ss.IDENTIFIER)throw os("Identifier or subgraph expected");t=jt,nee(e,{id:t}),Qr()}var s=Ty(),o=iee(e,r,t,n,s);Bft(e,o),r=t}}function Ty(){for(var e,r=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;jt==="[";){for(Qr(),r={};jt!==""&&jt!="]";){if(ks!=ss.IDENTIFIER)throw os("Attribute name expected");var o=jt;if(Qr(),jt!="=")throw os("Equal sign = expected");if(Qr(),ks!=ss.IDENTIFIER)throw os("Attribute value expected");var a=jt;o==="style"&&(a=t[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:r,name:o,value:a}),s.push(o),Qr(),jt==","&&Qr()}if(jt!="]")throw os("Bracket ] expected");Qr()}if(gl(s).call(s,"dir")){var u={};for(u.arrows={},e=0;e<i.length;e++)if(i[e].name==="arrows")if(i[e].value.to!=null)u.arrows.to=e;else if(i[e].value.from!=null)u.arrows.from=e;else throw os("Invalid value of arrows");else i[e].name==="dir"&&(u.dir=e);var f=i[u.dir].value;if(!gl(s).call(s,"arrows"))if(f==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(f==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(f==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(f==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw os('Invalid dir type "'+f+'"');var c,p;if(f==="both")u.arrows.to&&u.arrows.from?(p=i[u.arrows.to].value.to.type,c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}},du(i).call(i,u.arrows.from,1)):u.arrows.to?(p=i[u.arrows.to].value.to.type,c="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.from&&(p="arrow",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}});else if(f==="back")u.arrows.to&&u.arrows.from?(p="",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.to?(p="",c="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.from&&(p="",c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(f==="none"){var y;u.arrows.to?y=u.arrows.to:y=u.arrows.from,i[y]={attr:i[y].attr,name:i[y].name,value:""}}else if(f==="forward")u.arrows.to&&u.arrows.from?(p=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.to?(p=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}):u.arrows.from&&(p="arrow",c="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:p},from:{enabled:!0,type:c}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw os('Invalid dir type "'+f+'"');du(i).call(i,u.dir,1)}var w;if(gl(s).call(s,"penwidth")){var b=[];for(w=i.length,e=0;e<w;e++)i[e].name!=="width"&&(i[e].name==="penwidth"&&(i[e].name="width"),b.push(i[e]));i=b}for(w=i.length,e=0;e<w;e++)Dft(i[e].attr,i[e].name,i[e].value);return r}function os(e){return new SyntaxError(e+', got "'+lee(jt,30)+'" (char '+dv+")")}function lee(e,r){return e.length<=r?e:e.substr(0,27)+"..."}function Hft(e,r,t){Fr(e)?Kr(e).call(e,function(n){Fr(r)?Kr(r).call(r,function(i){t(n,i)}):t(n,r)}):Fr(r)?Kr(r).call(r,function(n){t(e,n)}):t(e,r)}function wT(e,r,t){for(var n=r.split("."),i=n.pop(),s=e,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=t,e}function mj(e,r){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=r[n];Fr(i)?Kr(i).call(i,function(s){wT(t,s,e[n])}):typeof i=="string"?wT(t,i,e[n]):wT(t,n,e[n])}return t}function zft(e){var r=Nft(e),t={nodes:[],edges:[],options:{}};if(r.nodes){var n;Kr(n=r.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};Yc(a,mj(o.attr,ree)),a.image&&(a.shape="image"),t.nodes.push(a)})}if(r.edges){var i,s=function(a){var l={from:a.from,to:a.to};return Yc(l,mj(a.attr,TN)),l.arrows==null&&a.type==="->"&&(l.arrows="to"),l};Kr(i=r.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;Kr(u=o.from.edges).call(u,function(c){var p=s(c);t.edges.push(p)})}if(Hft(a,l,function(c,p){var y=iee(t,c.id,p.id,o.type,o.attr),w=s(y);t.edges.push(w)}),o.to instanceof Object&&o.to.edges){var f;Kr(f=o.to.edges).call(f,function(c){var p=s(c);t.edges.push(p)})}})}return r.attr&&(t.options=r.attr),t}function Uft(e,r){var t,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};r!=null&&(r.fixed!=null&&(n.nodes.fixed=r.fixed),r.parseColor!=null&&(n.nodes.parseColor=r.parseColor),r.inheritColor!=null&&(n.edges.inheritColor=r.inheritColor));var i=e.edges,s=uv(i).call(i,function(a){var l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l}),o=uv(t=e.nodes).call(t,function(a){var l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l});return{nodes:o,edges:s}}var Wft={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},qft={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",close:"Schließen",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},Kft={addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},Vft={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},Gft={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},Yft={addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",close:"Fechar",createEdgeError:"Não foi possível linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},Zft={addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",close:"Закрывать",createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},Xft={addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",addNode:"添加节点",back:"返回",close:"關閉",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},Jft={addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",close:"Закрити",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"},Qft={addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de créer un lien vers un cluster.",del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},eht={addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",addNode:"Přidat vrchol",back:"Zpět",close:"Zavřít",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"},tht=Object.freeze({__proto__:null,cn:Xft,cs:eht,de:qft,en:Wft,es:Kft,fr:Qft,it:Vft,nl:Gft,pt:Yft,ru:Zft,uk:Jft});function rht(e,r){try{var t=r.split(/[-_ /]/,2),n=wn(t,2),i=n[0],s=n[1],o=i!=null?i.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(o&&a){var l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(e,l))return l;var u;console.warn(gN(u="Unknown variant ".concat(a," of language ")).call(u,o,"."))}if(o){var f=o;if(Object.prototype.hasOwnProperty.call(e,f))return f;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(r,", falling back to English.")),"en"}catch(c){return console.error(c),console.warn("Unexpected error while normalizing locale ".concat(r,", falling back to English.")),"en"}}var nht=function(){function e(){ft(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return ht(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,n=this.image.height;this.width=t,this.height=n;var i=Math.floor(n/2),s=Math.floor(n/4),o=Math.floor(n/8),a=Math.floor(n/16),l=Math.floor(t/2),u=Math.floor(t/4),f=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*u,this.canvas.height=i,this.coordinates=[[0,0,l,i],[l,0,u,s],[l,s,f,o],[5*f,s,c,a]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),n=this.coordinates[0];t.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var s=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,n,i,s,o,a){if(this.initialized())if(n>2){n*=.5;for(var l=0;n>2&&l<this.NUM_ITERATIONS;)n*=.5,l+=1;l>=this.NUM_ITERATIONS&&(l=this.NUM_ITERATIONS-1);var u=this.coordinates[l];t.drawImage(this.canvas,u[0],u[1],u[2],u[3],i,s,o,a)}else t.drawImage(this.image,i,s,o,a)}}]),e}(),iht=function(){function e(r){ft(this,e),this.images={},this.imageBroken={},this.callback=r}return ht(e,[{key:"_tryloadBrokenUrl",value:function(t,n,i){if(!(t===void 0||i===void 0)){if(n===void 0){console.warn("No broken url image defined");return}i.image.onerror=function(){console.error("Could not load brokenImage:",n)},i.image.src=n}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,n){var i=this,s=this.images[t];if(s)return s;var o=new nht;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,n,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),e}(),P5={},sht={get exports(){return P5},set exports(e){P5=e}},pv={},oht={get exports(){return pv},set exports(e){pv=e}},aht=Tr,lht=aht(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),uht=Tr,cht=_i,fht=Nu,bj=lht,Iw=Object.isExtensible,hht=uht(function(){Iw(1)}),dht=hht||bj?function(r){return!cht(r)||bj&&fht(r)=="ArrayBuffer"?!1:Iw?Iw(r):!0}:Iw,pht=Tr,uee=!pht(function(){return Object.isExtensible(Object.preventExtensions({}))}),vht=Ht,ght=Ir,yht=Ib,mht=_i,IN=xi,bht=Qo.f,wj=Pb,wht=Wx,AN=dht,$ht=Dx,_ht=uee,cee=!1,Su=$ht("meta"),xht=0,ON=function(e){bht(e,Su,{value:{objectID:"O"+xht++,weakData:{}}})},Eht=function(e,r){if(!mht(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!IN(e,Su)){if(!AN(e))return"F";if(!r)return"E";ON(e)}return e[Su].objectID},Sht=function(e,r){if(!IN(e,Su)){if(!AN(e))return!0;if(!r)return!1;ON(e)}return e[Su].weakData},kht=function(e){return _ht&&cee&&AN(e)&&!IN(e,Su)&&ON(e),e},Tht=function(){Iht.enable=function(){},cee=!0;var e=wj.f,r=ght([].splice),t={};t[Su]=1,e(t).length&&(wj.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===Su){r(i,s,1);break}return i},vht({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wht.f}))},Iht=oht.exports={enable:Tht,fastKey:Eht,getWeakData:Sht,onFreeze:kht};yht[Su]=!0;var Aht=kb,Oht=lo,Cht=co,Pht=Vv,Nht=cJ,Rht=Ma,$j=Mn,Dht=vJ,Bht=Ux,_j=uJ,Mht=TypeError,Aw=function(e,r){this.stopped=e,this.result=r},xj=Aw.prototype,CN=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=Aht(r,n),u,f,c,p,y,w,b,T=function(A){return u&&_j(u,"normal",A),new Aw(!0,A)},_=function(A){return i?(Cht(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(f=Bht(e),!f)throw Mht(Pht(e)+" is not iterable");if(Nht(f)){for(c=0,p=Rht(e);p>c;c++)if(y=_(e[c]),y&&$j(xj,y))return y;return new Aw(!1)}u=Dht(e,f)}for(w=s?e.next:u.next;!(b=Oht(w,u)).done;){try{y=_(b.value)}catch(A){_j(u,"throw",A)}if(typeof y=="object"&&y&&$j(xj,y))return y}return new Aw(!1)},Lht=Mn,Fht=TypeError,PN=function(e,r){if(Lht(r,e))return e;throw Fht("Incorrect invocation")},jht=Ht,Hht=Yn,zht=pv,Uht=Tr,Wht=Gv,qht=CN,Kht=PN,Vht=$i,Ght=_i,Yht=Zv,Zht=Qo.f,Xht=tf.forEach,Jht=oi,fee=ed,Qht=fee.set,edt=fee.getterFor,NN=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=Hht[e],a=o&&o.prototype,l={},u;if(!Jht||!Vht(o)||!(i||a.forEach&&!Uht(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),zht.enable();else{u=r(function(p,y){Qht(Kht(p,f),{type:e,collection:new o}),y!=null&&qht(y,p[s],{that:p,AS_ENTRIES:n})});var f=u.prototype,c=edt(e);Xht(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var y=p=="add"||p=="set";p in a&&!(i&&p=="clear")&&Wht(f,p,function(w,b){var T=c(this).collection;if(!y&&i&&!Ght(w))return p=="get"?void 0:!1;var _=T[p](w===0?0:w,b);return y?this:_})}),i||Zht(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return Yht(u,e,!1,!0),l[e]=u,jht({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},tdt=Cb,RN=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:tdt(e,n,r[n],t);return e},rdt=Jo,ndt=uN,idt=Ln,sdt=oi,Ej=idt("species"),odt=function(e){var r=rdt(e);sdt&&r&&!r[Ej]&&ndt(r,Ej,{configurable:!0,get:function(){return this}})},adt=Yv,ldt=uN,Sj=RN,udt=kb,cdt=PN,fdt=wb,hdt=CN,ddt=oN,j1=aN,pdt=odt,Wg=oi,kj=pv.fastKey,hee=ed,Tj=hee.set,$T=hee.getterFor,dee={getConstructor:function(e,r,t,n){var i=e(function(u,f){cdt(u,s),Tj(u,{type:r,index:adt(null),first:void 0,last:void 0,size:0}),Wg||(u.size=0),fdt(f)||hdt(f,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=$T(r),a=function(u,f,c){var p=o(u),y=l(u,f),w,b;return y?y.value=c:(p.last=y={index:b=kj(f,!0),key:f,value:c,previous:w=p.last,next:void 0,removed:!1},p.first||(p.first=y),w&&(w.next=y),Wg?p.size++:u.size++,b!=="F"&&(p.index[b]=y)),u},l=function(u,f){var c=o(u),p=kj(f),y;if(p!=="F")return c.index[p];for(y=c.first;y;y=y.next)if(y.key==f)return y};return Sj(s,{clear:function(){for(var f=this,c=o(f),p=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete p[y.index],y=y.next;c.first=c.last=void 0,Wg?c.size=0:f.size=0},delete:function(u){var f=this,c=o(f),p=l(f,u);if(p){var y=p.next,w=p.previous;delete c.index[p.index],p.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==p&&(c.first=y),c.last==p&&(c.last=w),Wg?c.size--:f.size--}return!!p},forEach:function(f){for(var c=o(this),p=udt(f,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(p(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(f){return!!l(this,f)}}),Sj(s,t?{get:function(f){var c=l(this,f);return c&&c.value},set:function(f,c){return a(this,f===0?0:f,c)}}:{add:function(f){return a(this,f=f===0?0:f,f)}}),Wg&&ldt(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=$T(r),s=$T(n);ddt(e,r,function(o,a){Tj(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,j1(void 0,!0)):a=="keys"?j1(l.key,!1):a=="values"?j1(l.value,!1):j1([l.key,l.value],!1)},t?"entries":"values",!t,!0),pdt(r)}},vdt=NN,gdt=dee;vdt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},gdt);var ydt=Er,mdt=ydt.Map,bdt=mdt,wdt=bdt;(function(e){e.exports=wdt})(sht);var pee=Pt(P5),$dt=function(){function e(){ft(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},qn(this.options,this.defaultOptions)}return ht(e,[{key:"setOptions",value:function(t){var n=["useDefaultGroups"];if(t!==void 0){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Sr(n).call(n,i)===-1){var s=t[i];this.add(i,s)}}}},{key:"clear",value:function(){this._groups=new pee,this._groupNames=[]}},{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._groups.get(t);if(i===void 0&&n)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var s=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[s]),this._groups.set(t,i)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}},{key:"add",value:function(t,n){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,n),n}}]),e}(),N5={},_dt={get exports(){return N5},set exports(e){N5=e}},xdt=Ht;xdt({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var Edt=Er,Sdt=Edt.Number.isNaN,kdt=Sdt,Tdt=kdt;(function(e){e.exports=Tdt})(_dt);var R5=Pt(N5),D5={},Idt={get exports(){return D5},set exports(e){D5=e}},Adt=Yn,Odt=Adt.isFinite,Cdt=Number.isFinite||function(r){return typeof r=="number"&&Odt(r)},Pdt=Ht,Ndt=Cdt;Pdt({target:"Number",stat:!0},{isFinite:Ndt});var Rdt=Er,Ddt=Rdt.Number.isFinite,Bdt=Ddt,Mdt=Bdt;(function(e){e.exports=Mdt})(Idt);var nh=Pt(D5),B5={},Ldt={get exports(){return B5},set exports(e){B5=e}},Fdt=Ht,jdt=tf.some,Hdt=Qv,zdt=Hdt("some");Fdt({target:"Array",proto:!0,forced:!zdt},{some:function(r){return jdt(this,r,arguments.length>1?arguments[1]:void 0)}});var Udt=Ei,Wdt=Udt("Array").some,qdt=Mn,Kdt=Wdt,_T=Array.prototype,Vdt=function(e){var r=e.some;return e===_T||qdt(_T,e)&&r===_T.some?Kdt:r},Gdt=Vdt,Ydt=Gdt;(function(e){e.exports=Ydt})(Ldt);var Zdt=Pt(B5),M5={},Xdt={get exports(){return M5},set exports(e){M5=e}},vee=Yn,Jdt=Tr,Qdt=Ir,ept=kl,tpt=yN.trim,rpt=e2,npt=Qdt("".charAt),Y$=vee.parseFloat,Ij=vee.Symbol,Aj=Ij&&Ij.iterator,ipt=1/Y$(rpt+"-0")!==-1/0||Aj&&!Jdt(function(){Y$(Object(Aj))}),spt=ipt?function(r){var t=tpt(ept(r)),n=Y$(t);return n===0&&npt(t,0)=="-"?-0:n}:Y$,opt=Ht,Oj=spt;opt({global:!0,forced:parseFloat!=Oj},{parseFloat:Oj});var apt=Er,lpt=apt.parseFloat,upt=lpt,cpt=upt;(function(e){e.exports=cpt})(Xdt);var gee=Pt(M5),L5={},fpt={get exports(){return L5},set exports(e){L5=e}},hpt=Ht,dpt=Tr,ppt=Wx.f,vpt=dpt(function(){return!Object.getOwnPropertyNames(1)});hpt({target:"Object",stat:!0,forced:vpt},{getOwnPropertyNames:ppt});var gpt=Er,ypt=gpt.Object,mpt=function(r){return ypt.getOwnPropertyNames(r)},bpt=mpt,wpt=bpt;(function(e){e.exports=wpt})(fpt);var $pt=Pt(L5);function DN(e,r){var t=["node","edge","label"],n=!0,i=wc(r,"chosen");if(typeof i=="boolean")n=i;else if(Dr(i)==="object"){if(Sr(t).call(t,e)===-1)throw new Error("choosify: subOption '"+e+"' should be one of '"+t.join("', '")+"'");var s=wc(r,["chosen",e]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function F5(e,r,t){if(e.width<=0||e.height<=0)return!1;if(t!==void 0){var n={x:r.x-t.x,y:r.y-t.y};if(t.angle!==0){var i=-t.angle,s={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y};r=s}else r=n}var o=e.x+e.width,a=e.y+e.width;return e.left<r.x&&o>r.x&&e.top<r.y&&a>r.y}function Z$(e){return typeof e=="string"&&e!==""}function yee(e,r,t,n){var i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){var o=n.distanceToBorder(e,r),a=Math.sin(r)*o,l=Math.cos(r)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-t):(i=n.x+t,s=n.y-n.shape.height*.5);return{x:i,y:s}}var j5={},_pt={get exports(){return j5},set exports(e){j5=e}},xpt=Ei,Ept=xpt("Array").values,Spt=Ept,kpt=Spt,Tpt=Qh,Ipt=xi,Apt=Mn,Opt=kpt,xT=Array.prototype,Cpt={DOMTokenList:!0,NodeList:!0},Ppt=function(e){var r=e.values;return e===xT||Apt(xT,e)&&r===xT.values||Ipt(Cpt,Tpt(e))?Opt:r};(function(e){e.exports=Ppt})(_pt);var mee=Pt(j5),Npt=function(){function e(r){ft(this,e),this.measureText=r,this.current=0,this.width=0,this.height=0,this.lines=[]}return ht(e,[{key:"_add",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});var s=n;(n===void 0||n==="")&&(s=" ");var o=this.measureText(s,i),a=qn({},mee(o));a.text=n,a.width=o.width,a.mod=i,(n===void 0||n==="")&&(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return t===void 0?0:t.width}},{key:"append",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n)}},{key:"newLine",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var n=this.lines[t],i=0;if(n.blocks!==void 0)for(var s=0;s<n.blocks.length;s++){var o=n.blocks[s];i<o.height&&(i=o.height)}n.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,n=0,i=0;i<this.lines.length;i++){var s=this.lines[i];s.width>t&&(t=s.width),n+=s.height}this.width=t,this.height=n}},{key:"removeEmptyBlocks",value:function(){for(var t=[],n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.blocks.length!==0&&!(n===this.lines.length-1&&i.width===0)){var s={};qn(s,i),s.blocks=[];for(var o=void 0,a=[],l=0;l<i.blocks.length;l++){var u=i.blocks[l];u.width!==0?a.push(u):o===void 0&&(o=u)}a.length===0&&o!==void 0&&a.push(o),s.blocks=a,t.push(s)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),e}(),Rpt={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},Cj=function(){function e(r){ft(this,e),this.text=r,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return ht(e,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return/[ \t]/.test(t)?(this.mono?this.add(t):this.spacing=!0,!0):!1}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,n){return!this.mono&&!this[t]&&this.match(n)?(this.setTag(t),!0):!1}},{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.prepareRegExp(t),s=wn(i,2),o=s[0],a=s[1],l=o.test(this.text.substr(this.position,a));return l&&n&&(this.position+=a-1),l}},{key:"parseEndTag",value:function(t,n,i){var s=this.mod()===t;return t==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(n)?(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0):!1}},{key:"replace",value:function(t,n){return this.match(t)?(this.add(n),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(t){var n,i;if(t instanceof RegExp)i=t,n=1;else{var s=Rpt[t];s!==void 0?i=s:i=new RegExp(t),n=t.length}return[i,n]}}]),e}(),Dpt=function(){function e(r,t,n,i){var s=this;ft(this,e),this.ctx=r,this.parent=t,this.selected=n,this.hover=i;var o=function(l,u){if(l===void 0)return 0;var f=s.parent.getFormattingValues(r,n,i,u),c=0;if(l!==""){var p=s.ctx.measureText(l);c=p.width}return{width:c,values:f}};this.lines=new Npt(o)}return ht(e,[{key:"process",value:function(t){if(!Z$(t))return this.lines.finalize();var n=this.parent.fontOptions;t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`);var i=String(t).split(`
`),s=i.length;if(n.multi)for(var o=0;o<s;o++){var a=this.splitBlocks(i[o],n.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(n.maxWdt>0)for(var l=0;l<a.length;l++){var u=a[l].mod,f=a[l].text;this.splitStringIntoLines(f,u,!0)}else for(var c=0;c<a.length;c++){var p=a[c].mod,y=a[c].text;this.lines.append(y,p)}this.lines.newLine()}}else if(n.maxWdt>0)for(var w=0;w<s;w++)this.splitStringIntoLines(i[w]);else for(var b=0;b<s;b++)this.lines.newLine(i[b]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var n="none";return t==="markdown"||t==="md"?n="markdown":(t===!0||t==="html")&&(n="html"),n}},{key:"splitHtmlBlocks",value:function(t){for(var n=new Cj(t),i=function(l){if(/&/.test(l)){var u=n.replace(n.text,"&lt;","<")||n.replace(n.text,"&amp;","&");return u||n.add("&"),!0}return!1};n.position<n.text.length;){var s=n.text.charAt(n.position),o=n.parseWS(s)||/</.test(s)&&(n.parseStartTag("bold","<b>")||n.parseStartTag("ital","<i>")||n.parseStartTag("mono","<code>")||n.parseEndTag("bold","</b>")||n.parseEndTag("ital","</i>")||n.parseEndTag("mono","</code>"))||i(s);o||n.add(s),n.position++}return n.emitBlock(),n.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var n=this,i=new Cj(t),s=!0,o=function(f){return/\\/.test(f)?(i.position<n.text.length+1&&(i.position++,f=n.text.charAt(i.position),/ \t/.test(f)?i.spacing=!0:(i.add(f),s=!1)),!0):!1};i.position<i.text.length;){var a=i.text.charAt(i.position),l=i.parseWS(a)||o(a)||(s||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono");l||(i.add(a),s=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,n){var i=this.decodeMarkupSystem(n);if(i==="none")return[{text:t,mod:"normal"}];if(i==="markdown")return this.splitMarkdownBlocks(t);if(i==="html")return this.splitHtmlBlocks(t)}},{key:"overMaxWidth",value:function(t){var n=this.ctx.measureText(t).width;return this.lines.curWidth()+n>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var n="",i=0;i<t.length;){var s=n===""?"":" ",o=n+s+t[i];if(this.overMaxWidth(o))break;n=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var n=0;n<t.length&&!this.overMaxWidth(Pi(t).call(t,0,n));)n++;return n}},{key:"splitStringIntoLines",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,n),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var s=t.split("\r");s.length>0;){var o=this.getLongestFit(s);if(o===0){var a=s[0],l=this.getLongestFitWord(a);this.lines.newLine(Pi(a).call(a,0,l),n),s[0]=Pi(a).call(a,l)}else{var u=o;s[o-1]===" "?o--:s[u]===" "&&u++;var f=Pi(s).call(s,0,o).join("");o==s.length&&i?this.lines.append(f,n):this.lines.newLine(f,n),s=Pi(s).call(s,u)}}}}]),e}(),qg=["bold","ital","boldital","mono"],bee=function(){function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ft(this,e),this.body=r,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return ht(e,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),Z$(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(Dr(t.font)==="object"){var n=t.font.size;n!==void 0&&(this.baseSize=n)}}}},{key:"initFontOptions",value:function(t){var n=this;if(gr(qg,function(i){n.fontOptions[i]={}}),e.parseFontString(this.fontOptions,t)){this.fontOptions.vadjust=0;return}gr(t,function(i,s){i!=null&&Dr(i)!=="object"&&(n.fontOptions[s]=i)})}},{key:"constrain",value:function(t){var n={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=wc(t,"widthConstraint");if(typeof i=="number")n.maxWdt=Number(i),n.minWdt=Number(i);else if(Dr(i)==="object"){var s=wc(t,["widthConstraint","maximum"]);typeof s=="number"&&(n.maxWdt=Number(s));var o=wc(t,["widthConstraint","minimum"]);typeof o=="number"&&(n.minWdt=Number(o))}var a=wc(t,"heightConstraint");if(typeof a=="number")n.minHgt=Number(a);else if(Dr(a)==="object"){var l=wc(t,["heightConstraint","minimum"]);typeof l=="number"&&(n.minHgt=Number(l));var u=wc(t,["heightConstraint","valign"]);typeof u=="string"&&(u==="top"||u==="bottom")&&(n.valign=u)}return n}},{key:"update",value:function(t,n){this.setOptions(t,!0),this.propagateFonts(n),Jr(this.fontOptions,this.constrain(n)),this.fontOptions.chooser=DN("label",n)}},{key:"adjustSizes",value:function(t){var n=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=n,this.fontOptions.minWdt-=n);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,n){for(var i=0;i<n.length;++i)this.addFontToPile(t,n[i])}},{key:"addFontToPile",value:function(t,n){if(n!==void 0&&!(n.font===void 0||n.font===null)){var i=n.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var s=t[i],o={};e.parseFontString(o,s)&&(s=o),gr(s,function(a,l){a!==void 0&&(Object.prototype.hasOwnProperty.call(n,l)||(Sr(qg).call(qg,l)!==-1?n[l]={}:n[l]=a))})}return n}},{key:"getFontOption",value:function(t,n,i){for(var s,o=0;o<t.length;++o){var a=t[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(s=a[n],s==null)continue;var l={};if(e.parseFontString(l,s)&&(s=l),Object.prototype.hasOwnProperty.call(s,i))return s[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,n){for(var i={},s=["color","size","face","mod","vadjust"],o=0;o<s.length;++o){var a=s[o];i[a]=this.getFontOption(t,n,a)}return i}},{key:"propagateFonts",value:function(t){var n=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var s=function(){var l=qg[o],u=n.fontOptions[l],f=n.getFontOptions(i,l);gr(f,function(c,p){u[p]=c}),u.size=Number(u.size),u.vadjust=Number(u.vadjust)},o=0;o<qg.length;++o)s()}},{key:"draw",value:function(t,n,i,s,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var l=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&l<this.elementOptions.scaling.label.drawThreshold-1||(l>=this.elementOptions.scaling.label.maxVisible&&(l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,s,o,n,i,a),this._drawBackground(t),this._drawText(t,n,this.size.yLine,a,l))}}},{key:"_drawBackground",value:function(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var n=this.getSize();t.fillRect(n.left,n.top,n.width,n.height)}}},{key:"_drawText",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,a=this._setAlignment(t,n,i,s),l=wn(a,2);n=l[0],i=l[1],t.textAlign="left",n=n-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(var u=0;u<this.lineCount;u++){var f=this.lines[u];if(f&&f.blocks){var c=0;this.isEdgeLabel||this.fontOptions.align==="center"?c+=(this.size.width-f.width)/2:this.fontOptions.align==="right"&&(c+=this.size.width-f.width);for(var p=0;p<f.blocks.length;p++){var y=f.blocks[p];t.font=y.font;var w=this._getColor(y.color,o,y.strokeColor),b=wn(w,2),T=b[0],_=b[1];y.strokeWidth>0&&(t.lineWidth=y.strokeWidth,t.strokeStyle=_,t.lineJoin="round"),t.fillStyle=T,y.strokeWidth>0&&t.strokeText(y.text,n+c,i+y.vadjust),t.fillText(y.text,n+c,i+y.vadjust),c+=y.width}i+=f.height}}}},{key:"_setAlignment",value:function(t,n,i,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){n=0,i=0;var o=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*o):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*o):t.textBaseline="middle"}else t.textBaseline=s;return[n,i]}},{key:"_getColor",value:function(t,n,i){var s=t||"#000000",o=i||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));s=Wo(s,a),o=Wo(o,a)}return[s,o]}},{key:"getTextSize",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(t,n,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=2,n=this.size.left,i=this.size.top-.5*t;if(this.isEdgeLabel){var s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":n=s,i=-this.size.height*.5;break;case"top":n=s,i=-(this.size.height+t);break;case"bottom":n=s,i=t;break}}var o={left:n,top:i,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,n,i),this.size.left=s-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,n,i,s){var o=function(f,c,p){return c==="normal"?p==="mod"?"":f[p]:f[c][p]!==void 0?f[c][p]:f[p]},a={color:o(this.fontOptions,s,"color"),size:o(this.fontOptions,s,"size"),face:o(this.fontOptions,s,"face"),mod:o(this.fontOptions,s,"mod"),vadjust:o(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(n||i)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,n,i));var l="";return a.mod!==void 0&&a.mod!==""&&(l+=a.mod+" "),l+=a.size+"px "+a.face,t.font=l.replace(/"/g,""),a.font=t.font,a.height=a.size,a}},{key:"differentState",value:function(t,n){return t!==this.selectedState||n!==this.hoverState}},{key:"_processLabelText",value:function(t,n,i,s){var o=new Dpt(t,this,n,i);return o.process(s)}},{key:"_processLabel",value:function(t,n,i){if(!(this.labelDirty===!1&&!this.differentState(n,i))){var s=this._processLabelText(t,n,i,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=n,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var t=this.fontOptions.size*this.body.view.scale;return!(t<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,n){if(!n||typeof n!="string")return!1;var i=n.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),e}(),H5={},Bpt={get exports(){return H5},set exports(e){H5=e}},Mpt=zx,Lpt=Vv,Fpt=TypeError,jpt=function(e){if(Mpt(e))return e;throw Fpt(Lpt(e)+" is not a constructor")},Hpt=Ht,zpt=Jo,ET=yb,Upt=qX,Pj=jpt,Wpt=co,Nj=_i,qpt=Yv,wee=Tr,BN=zpt("Reflect","construct"),Kpt=Object.prototype,Vpt=[].push,$ee=wee(function(){function e(){}return!(BN(function(){},[],e)instanceof e)}),_ee=!wee(function(){BN(function(){})}),Rj=$ee||_ee;Hpt({target:"Reflect",stat:!0,forced:Rj,sham:Rj},{construct:function(r,t){Pj(r),Wpt(t);var n=arguments.length<3?r:Pj(arguments[2]);if(_ee&&!$ee)return BN(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return ET(Vpt,i,t),new(ET(Upt,r,i))}var s=n.prototype,o=qpt(Nj(s)?s:Kpt),a=ET(r,o,t);return Nj(a)?a:o}});var Gpt=Er,Ypt=Gpt.Reflect.construct,Zpt=Ypt,Xpt=Zpt;(function(e){e.exports=Xpt})(Bpt);var qe=Pt(H5),z5={},Jpt={get exports(){return z5},set exports(e){z5=e}},U5={},Qpt={get exports(){return U5},set exports(e){U5=e}},evt=$Q,tvt=evt,rvt=tvt,nvt=rvt;(function(e){e.exports=nvt})(Qpt);(function(e){e.exports=U5})(Jpt);var ivt=Pt(z5),W5={},svt={get exports(){return W5},set exports(e){W5=e}},q5={},ovt={get exports(){return q5},set exports(e){q5=e}},avt=Ht,lvt=zJe;avt({target:"Object",stat:!0},{setPrototypeOf:lvt});var uvt=Er,cvt=uvt.Object.setPrototypeOf,fvt=cvt,hvt=fvt,dvt=hvt,pvt=dvt,vvt=pvt,gvt=vvt;(function(e){e.exports=gvt})(ovt);(function(e){e.exports=q5})(svt);var K5=Pt(W5),V5={},yvt={get exports(){return V5},set exports(e){V5=e}},G5={},mvt={get exports(){return G5},set exports(e){G5=e}},bvt=KX,wvt=bvt,$vt=wvt,_vt=$vt;(function(e){e.exports=_vt})(mvt);(function(e){e.exports=G5})(yvt);var MN=Pt(V5);function Y5(e,r){var t;return Y5=K5?MN(t=K5).call(t):function(i,s){return i.__proto__=s,i},Y5(e,r)}function Or(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=ivt(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Jx(e,"prototype",{writable:!1}),r&&Y5(e,r)}function xvt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jr(e,r){if(r&&(Dr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xvt(e)}var Z5={},Evt={get exports(){return Z5},set exports(e){Z5=e}},X5={},Svt={get exports(){return X5},set exports(e){X5=e}},kvt=gQ,Tvt=kvt,Ivt=Tvt,Avt=Ivt;(function(e){e.exports=Avt})(Svt);(function(e){e.exports=X5})(Evt);var Dj=Pt(Z5);function Tt(e){var r;return Tt=K5?MN(r=Dj).call(r):function(n){return n.__proto__||Dj(n)},Tt(e)}var id=function(){function e(r,t,n){ft(this,e),this.body=t,this.labelModule=n,this.setOptions(r),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&(Dr(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,n){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(n)),Math.abs(this.height/2/Math.sin(n)))+i}},{key:"enableShadow",value:function(t,n){n.shadow&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,n){if(n.borderDashes!==!1)if(t.setLineDash!==void 0){var i=n.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,n){n.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1))}},{key:"needsRefresh",value:function(t,n){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,n)}},{key:"initContextForDraw",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=n.borderColor,t.fillStyle=n.color}},{key:"performStroke",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,n),t.stroke(),this.disableBorderDashes(t,n)),t.restore()}},{key:"performFill",value:function(t,n){t.save(),t.fillStyle=n.color,this.enableShadow(t,n),Lb(t).call(t),this.disableShadow(t,n),t.restore(),this.performStroke(t,n)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,n,i,s,o){i!==void 0&&this.resize(i,s,o),this.left=t-this.width/2,this.top=n-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,n,i,s,o){this._updateBoundingBox(t,n,i,s,o)}},{key:"getDimensionsFromLabel",value:function(t,n,i){this.textSize=this.labelModule.getTextSize(t,n,i);var s=this.textSize.width,o=this.textSize.height,a=14;return s===0&&(s=a,o=a),{width:s,height:o}}}]),e}();function Ovt(e){var r=Cvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Cvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Pvt=function(e){Or(t,e);var r=Ovt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.width=a.width+this.margin.right+this.margin.left,this.height=a.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),VX(i,this.left,this.top,this.width,this.height,u.borderRadius),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"updateBoundingBox",value:function(i,s,o,a,l){this._updateBoundingBox(i,s,o,a,l);var u=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(u)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(s)),Math.abs(this.height/2/Math.sin(s)))+o}}]),t}(id);function Nvt(e){var r=Rvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Rvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var LN=function(e){Or(t,e);var r=Nvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o.labelOffset=0,o.selected=!1,o}return ht(t,[{key:"setOptions",value:function(i,s,o){this.options=i,s===void 0&&o===void 0||this.setImages(s,o)}},{key:"setImages",value:function(i,s){s&&this.selected?(this.imageObj=s,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=s)}},{key:"switchImages",value:function(i){var s=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&s){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var i={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var s=this.options.imagePadding;Dr(s)=="object"?(i.top=s.top,i.right=s.right,i.bottom=s.bottom,i.left=s.left):(i.top=s,i.right=s,i.bottom=s,i.left=s)}return i}},{key:"_resizeImage",value:function(){var i,s;if(this.options.shapeProperties.useImageSize===!1){var o=1,a=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:a=this.imageObj.height/this.imageObj.width),i=this.options.size*2*o,s=this.options.size*2*a}else{var l=this._getImagePadding();i=this.imageObj.width+l.left+l.right,s=this.imageObj.height+l.top+l.bottom}this.width=i,this.height=s,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,s,o,a){this.initContextForDraw(i,a),rN(i,s,o,a.size),this.performFill(i,a)}},{key:"_drawImageAtPosition",value:function(i,s){if(this.imageObj.width!=0){i.globalAlpha=s.opacity!==void 0?s.opacity:1,this.enableShadow(i,s);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var a=this._getImagePadding(),l=this.left+a.left,u=this.top+a.top,f=this.width-a.left-a.right,c=this.height-a.top-a.bottom;this.imageObj.drawImageAtPosition(i,o,l,u,f,c),this.disableShadow(i,s)}}},{key:"_drawImageLabel",value:function(i,s,o,a,l){var u=0;if(this.height!==void 0){u=this.height*.5;var f=this.labelModule.getTextSize(i,a,l);f.lineCount>=1&&(u+=f.height/2)}var c=o+u;this.options.label&&(this.labelOffset=u),this.labelModule.draw(i,s,c,a,l,"hanging")}}]),t}(id);function Dvt(e){var r=Bvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Bvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Mvt=function(e){Or(t,e);var r=Dvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=Math.max(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=l/2,this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this._drawRawCircle(i,s,o,u),this.updateBoundingBox(s,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,o,a,l)}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(LN);function Lvt(e){var r=Fvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Fvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var jvt=function(e){Or(t,e);var r=Lvt(t);function t(n,i,s,o,a){var l;return ft(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l,this.radius=.5*this.width;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){this.switchImages(a),this.resize();var f=s,c=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,f+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this._drawRawCircle(i,f,c,u),i.save(),i.clip(),this._drawImageAtPosition(i,u),i.restore(),this._drawImageLabel(i,f,c,a,l),this.updateBoundingBox(s,o)}},{key:"updateBoundingBox",value:function(i,s){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=s,this.boundingBox.left=i,this.boundingBox.right=i+this.options.size*2,this.boundingBox.bottom=s+this.options.size*2):(this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(LN);function Hvt(e){var r=zvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function zvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var sf=function(e){Or(t,e);var r=Hvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,o)){var l,u;this.labelModule.getTextSize(i,s,o);var f=2*a.size;this.width=(l=this.customSizeWidth)!==null&&l!==void 0?l:f,this.height=(u=this.customSizeHeight)!==null&&u!==void 0?u:f,this.radius=.5*this.width}}},{key:"_drawShape",value:function(i,s,o,a,l,u,f,c){var p=this;return this.resize(i,u,f,c),this.left=a-this.width/2,this.top=l-this.height/2,this.initContextForDraw(i,c),iXe(s)(i,a,l,c.size),this.performFill(i,c),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(i.font=(u?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",i.fillText(this.options.icon.code,a,l)),{drawExternalLabel:function(){if(p.options.label!==void 0){p.labelModule.calculateLabelSize(i,u,f,a,l,"hanging");var w=l+.5*p.height+.5*p.labelModule.size.height;p.labelModule.draw(i,a,w,u,f,"hanging")}p.updateBoundingBox(a,l)}}}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),t}(id);function Bj(e,r){var t=bn(e);if(Vc){var n=Vc(e);r&&(n=Os(n).call(n,function(i){return rf(e,i).enumerable})),t.push.apply(t,n)}return t}function Uvt(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Kr(t=Bj(Object(i),!0)).call(t,function(s){Qx(e,s,i[s])}):Gc?Zx(e,Gc(i)):Kr(n=Bj(Object(i))).call(n,function(s){Xx(e,s,rf(i,s))})}return e}function Wvt(e){var r=qvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function qvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Kvt=function(e){Or(t,e);var r=Wvt(t);function t(n,i,s,o){var a;return ft(this,t),a=r.call(this,n,i,s,o),a.ctxRenderer=o,a}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l,u),this.left=s-this.width/2,this.top=o-this.height/2,i.save();var f=this.ctxRenderer({ctx:i,id:this.options.id,x:s,y:o,state:{selected:a,hover:l},style:Uvt({},u),label:this.options.label});if(f.drawNode!=null&&f.drawNode(),i.restore(),f.drawExternalLabel){var c=f.drawExternalLabel;f.drawExternalLabel=function(){i.save(),c(),i.restore()}}return f.nodeDimensions&&(this.customSizeWidth=f.nodeDimensions.width,this.customSizeHeight=f.nodeDimensions.height),f}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function Vvt(e){var r=Gvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Gvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Yvt=function(e){Or(t,e);var r=Vvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=a.width+this.margin.right+this.margin.left;this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),GX(i,s-this.width/2,o-this.height/2,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(id);function Zvt(e){var r=Xvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Xvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Jvt=function(e){Or(t,e);var r=Zvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"diamond",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function Qvt(e){var r=egt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function egt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var tgt=function(e){Or(t,e);var r=Qvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"circle",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.options.size}}]),t}(sf);function rgt(e){var r=ngt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function ngt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Mj=function(e){Or(t,e);var r=rgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.height=a.height*2,this.width=a.width+a.height,this.radius=.5*this.width}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(i,u),yC(i,this.left,this.top,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,s,o,a,l)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.width*.5,a=this.height*.5,l=Math.sin(s)*o,u=Math.cos(s)*a;return o*a/Math.sqrt(l*l+u*u)}}]),t}(id);function igt(e){var r=sgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function sgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ogt=function(e){Or(t,e);var r=igt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){var f=this;return this.resize(i,a,l),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=o-this.height/2,this._icon(i,s,o,a,l,u),{drawExternalLabel:function(){if(f.options.label!==void 0){var p=5;f.labelModule.draw(i,f.left+f.iconSize.width/2+f.margin.left,o+f.height/2+p,a)}f.updateBoundingBox(s,o)}}}},{key:"updateBoundingBox",value:function(i,s){if(this.boundingBox.top=s-this.options.icon.size*.5,this.boundingBox.left=i-this.options.icon.size*.5,this.boundingBox.right=i+this.options.icon.size*.5,this.boundingBox.bottom=s+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(i,s,o,a,l,u){var f=Number(this.options.icon.size);this.options.icon.code!==void 0?(i.font=[this.options.icon.weight!=null?this.options.icon.weight:a?"bold":"",(this.options.icon.weight!=null&&a?5:0)+f+"px",this.options.icon.face].join(" "),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",this.enableShadow(i,u),i.fillText(this.options.icon.code,s,o),this.disableShadow(i,u)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(id);function agt(e){var r=lgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function lgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ugt=function(e){Or(t,e);var r=agt(t);function t(n,i,s,o,a){var l;return ft(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){i.save(),this.switchImages(a),this.resize();var f=s,c=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,f+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var p=this.options.borderWidth,y=this.options.borderWidthSelected||2*this.options.borderWidth,w=(a?y:p)/this.body.view.scale;i.lineWidth=Math.min(this.width,w),i.beginPath();var b=a?this.options.color.highlight.border:l?this.options.color.hover.border:this.options.color.border,T=a?this.options.color.highlight.background:l?this.options.color.hover.background:this.options.color.background;u.opacity!==void 0&&(b=Wo(b,u.opacity),T=Wo(T,u.opacity)),i.strokeStyle=b,i.fillStyle=T,i.rect(this.left-.5*i.lineWidth,this.top-.5*i.lineWidth,this.width+i.lineWidth,this.height+i.lineWidth),Lb(i).call(i),this.performStroke(i,u),i.closePath()}this._drawImageAtPosition(i,u),this._drawImageLabel(i,f,c,a,l),this.updateBoundingBox(s,o),i.restore()}},{key:"updateBoundingBox",value:function(i,s){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=i,this.top=s):(this.left=i-this.width/2,this.top=s-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(LN);function cgt(e){var r=fgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function fgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var hgt=function(e){Or(t,e);var r=cgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"square",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function dgt(e){var r=pgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function pgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var vgt=function(e){Or(t,e);var r=dgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"hexagon",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function ggt(e){var r=ygt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function ygt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var mgt=function(e){Or(t,e);var r=ggt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"star",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function bgt(e){var r=wgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function wgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var $gt=function(e){Or(t,e);var r=bgt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.textSize=this.labelModule.getTextSize(i,s,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.enableShadow(i,u),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l),this.disableShadow(i,u),this.updateBoundingBox(s,o,i,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(id);function _gt(e){var r=xgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function xgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Egt=function(e){Or(t,e);var r=_gt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangle",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function Sgt(e){var r=kgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function kgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Tgt=function(e){Or(t,e);var r=Sgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangleDown",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(sf);function Lj(e,r){var t=bn(e);if(Vc){var n=Vc(e);r&&(n=Os(n).call(n,function(i){return rf(e,i).enumerable})),t.push.apply(t,n)}return t}function Fj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Kr(t=Lj(Object(i),!0)).call(t,function(s){Qx(e,s,i[s])}):Gc?Zx(e,Gc(i)):Kr(n=Lj(Object(i))).call(n,function(s){Xx(e,s,rf(i,s))})}return e}var Ks=function(){function e(r,t,n,i,s,o){ft(this,e),this.options=Bc(s),this.globalOptions=s,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new bee(this.body,this.options,!1),this.setOptions(r)}return ht(e,[{key:"attachEdge",value:function(t){var n;Sr(n=this.edges).call(n,t)===-1&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var n,i=Sr(n=this.edges).call(n,t);if(i!=-1){var s;du(s=this.edges).call(s,i,1)}}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(typeof t.color<"u"&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");e.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ba(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ba(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=gee(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=DN("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),t.hidden!==void 0||t.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var n=this.options.opacity;t.borderColor=Wo(t.borderColor,n),t.color=Wo(t.color,n),t.shadowColor=Wo(t.shadowColor,n)}return t}},{key:"updateLabelModule",value:function(t){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),e.updateGroupOptions(this.options,Fj(Fj({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Pvt(this.options,this.body,this.labelModule);break;case"circle":this.shape=new Mvt(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new jvt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new Kvt(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new Yvt(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Jvt(this.options,this.body,this.labelModule);break;case"dot":this.shape=new tgt(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Mj(this.options,this.body,this.labelModule);break;case"icon":this.shape=new ogt(this.options,this.body,this.labelModule);break;case"image":this.shape=new ugt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new hgt(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new vgt(this.options,this.body,this.labelModule);break;case"star":this.shape=new mgt(this.options,this.body,this.labelModule);break;case"text":this.shape=new $gt(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Egt(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Tgt(this.options,this.body,this.labelModule);break;default:this.shape=new Mj(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,n){return this.shape.distanceToBorder(t,n)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.size=this.options.scaling.min+s*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var n=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,n)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var n=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,n)}},{key:"getItemsOnPoint",value:function(t){var n=[];return this.labelModule.visible()&&F5(this.labelModule.getSize(),t)&&n.push({nodeId:this.id,labelId:0}),F5(this.shape.boundingBox,t)&&n.push({nodeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return t===void 0||t==="center"||t==="top-left"}},{key:"updateGroupOptions",value:function(t,n,i){var s;if(i!==void 0){var o=t.group;if(n!==void 0&&n.group!==void 0&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");var a=typeof o=="number"||typeof o=="string"&&o!="";if(a){var l=i.get(o);l.opacity!==void 0&&n.opacity===void 0&&(e.checkOpacity(l.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+l.opacity),l.opacity=void 0));var u=Os(s=$pt(n)).call(s,function(f){return n[f]!=null});u.push("font"),V$(u,t,l),t.color=I5(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(V$(a,t,n,i),e.checkMass(n),t.opacity!==void 0&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),n.opacity!==void 0&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),Fo(t,n,"shadow",s),n.color!==void 0&&n.color!==null){var l=I5(n.color);XQ(t.color,l)}else i===!0&&n.color===null&&(t.color=Bc(s.color));n.fixed!==void 0&&n.fixed!==null&&(typeof n.fixed=="boolean"?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(n.fixed.x!==void 0&&typeof n.fixed.x=="boolean"&&(t.fixed.x=n.fixed.x),n.fixed.y!==void 0&&typeof n.fixed.y=="boolean"&&(t.fixed.y=n.fixed.y))),i===!0&&n.font===null&&(t.font=Bc(s.font)),e.updateGroupOptions(t,n,o),n.scaling!==void 0&&Fo(t.scaling,n.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,n){if(t.mass!==void 0&&t.mass<=0){var i="";n!==void 0&&(i=" in node id: "+n),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",tee),t.mass=1}}}]),e}();function Igt(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=Agt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Agt(e,r){var t;if(e){if(typeof e=="string")return jj(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jj(e,r)}}function jj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Ogt=function(){function e(r,t,n,i){var s,o=this;if(ft(this,e),this.body=r,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=nt(s=this.create).call(s,this),this.nodesListeners={add:function(l,u){o.add(u.items)},update:function(l,u){o.update(u.items,u.data,u.oldData)},remove:function(l,u){o.remove(u.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(l,u,f,c){if(u===l)return .5;var p=1/(u-l);return Math.max(0,(c-l)*p)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Bc(this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t,n,i=this;this.body.emitter.on("refreshNodes",nt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",nt(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",function(){gr(i.nodesListeners,function(s,o){i.body.data.nodes&&i.body.data.nodes.off(o,s)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){if(Ks.parseOptions(this.options,t),t.opacity!==void 0&&(R5(t.opacity)||!nh(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(var n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&this.body.nodes[n].updateShape();if(typeof t.font<"u"||typeof t.widthConstraint<"u"||typeof t.heightConstraint<"u")for(var i=0,s=bn(this.body.nodes);i<s.length;i++){var o=s[i];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(t.size!==void 0)for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.body.nodes[a].needsRefresh();(t.hidden!==void 0||t.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.data.nodes;if(TX("id",t))this.body.data.nodes=t;else if(Fr(t))this.body.data.nodes=new Ea,this.body.data.nodes.add(t);else if(!t)this.body.data.nodes=new Ea;else throw new TypeError("Array or DataSet expected");if(i&&gr(this.nodesListeners,function(a,l){i.off(l,a)}),this.body.nodes={},this.body.data.nodes){var s=this;gr(this.nodesListeners,function(a,l){s.body.data.nodes.on(l,a)});var o=this.body.data.nodes.getIds();this.add(o,!0)}n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i,s=[],o=0;o<t.length;o++){i=t[o];var a=this.body.data.nodes.get(i),l=this.create(a);s.push(l),this.body.nodes[i]=l}this.layoutEngine.positionInitially(s),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,n,i){for(var s=this.body.nodes,o=!1,a=0;a<t.length;a++){var l=t[a],u=s[l],f=n[a];u!==void 0?u.setOptions(f)&&(o=!0):(o=!0,u=this.create(f),s[l]=u)}!o&&i!==void 0&&(o=Zdt(n).call(n,function(c,p){var y=i[p];return y&&y.level!==c.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var n=this.body.nodes,i=0;i<t.length;i++){var s=t[i];delete n[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ks;return new n(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;gr(this.body.nodes,function(i,s){var o=t.body.data.nodes.get(s);o!==void 0&&(n===!0&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var n={};if(t!==void 0){if(Fr(t)===!0){for(var i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){var s=this.body.nodes[t[i]];n[t[i]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[t]!==void 0){var o=this.body.nodes[t];n[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];n[this.body.nodeIndices[a]]={x:Math.round(l.x),y:Math.round(l.y)}}return n}},{key:"getPosition",value:function(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t=[],n=this.body.data.nodes.getDataSet(),i=Igt(n.get()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.id,l=this.body.nodes[a],u=Math.round(l.x),f=Math.round(l.y);(o.x!==u||o.y!==f)&&t.push({id:a,x:u,y:f})}}catch(c){i.e(c)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,n){var i=[];if(this.body.nodes[t]!==void 0)for(var s=this.body.nodes[t],o={},a=0;a<s.edges.length;a++){var l=s.edges[a];n!=="to"&&l.toId==s.id?o[l.fromId]===void 0&&(i.push(l.fromId),o[l.fromId]=!0):n!=="from"&&l.fromId==s.id&&o[l.toId]===void 0&&(i.push(l.toId),o[l.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var n=[];if(this.body.nodes[t]!==void 0)for(var i=this.body.nodes[t],s=0;s<i.edges.length;s++)n.push(i.edges[s].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return n}},{key:"moveNode",value:function(t,n,i){var s=this;this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(n),this.body.nodes[t].y=Number(i),yl(function(){s.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),e}(),J5={},Cgt={get exports(){return J5},set exports(e){J5=e}},Q5={},Pgt={get exports(){return Q5},set exports(e){Q5=e}},Hj=xi,Ngt=function(e){return e!==void 0&&(Hj(e,"value")||Hj(e,"writable"))},Rgt=Ht,Dgt=lo,Bgt=_i,Mgt=co,Lgt=Ngt,Fgt=qv,jgt=Hx;function xee(e,r){var t=arguments.length<3?e:arguments[2],n,i;if(Mgt(e)===t)return e[r];if(n=Fgt.f(e,r),n)return Lgt(n)?n.value:n.get===void 0?void 0:Dgt(n.get,t);if(Bgt(i=jgt(e)))return xee(i,r,t)}Rgt({target:"Reflect",stat:!0},{get:xee});var Hgt=Er,zgt=Hgt.Reflect.get,Ugt=zgt,Wgt=Ugt,qgt=Wgt,Kgt=qgt,Vgt=Kgt,Ggt=Vgt;(function(e){e.exports=Ggt})(Pgt);(function(e){e.exports=Q5})(Cgt);var zj=Pt(J5),e3={},Ygt={get exports(){return e3},set exports(e){e3=e}},t3={},Zgt={get exports(){return t3},set exports(e){t3=e}},Xgt=YJ,Jgt=Xgt,Qgt=Jgt,eyt=Qgt;(function(e){e.exports=eyt})(Zgt);(function(e){e.exports=t3})(Ygt);var tyt=Pt(e3);function ryt(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Tt(e),e!==null););return e}function Ow(){if(typeof Reflect<"u"&&zj){var e;Ow=MN(e=zj).call(e)}else Ow=function(t,n,i){var s=ryt(t,n);if(s){var o=tyt(s,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return Ow.apply(this,arguments)}var r3={},nyt={get exports(){return r3},set exports(e){r3=e}},iyt=Ht,Uj=Math.hypot,syt=Math.abs,oyt=Math.sqrt,ayt=!!Uj&&Uj(1/0,NaN)!==1/0;iyt({target:"Math",stat:!0,arity:2,forced:ayt},{hypot:function(r,t){for(var n=0,i=0,s=arguments.length,o=0,a,l;i<s;)a=syt(arguments[i++]),o<a?(l=o/a,n=n*l*l+1,o=a):a>0?(l=a/o,n+=l*l):n+=a;return o===1/0?1/0:o*oyt(n)}});var lyt=Er,uyt=lyt.Math.hypot,cyt=uyt,fyt=cyt;(function(e){e.exports=fyt})(nyt);var hyt=Pt(r3);function Eee(e){var r=dyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function dyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Dn=function(){function e(){ft(this,e)}return ht(e,null,[{key:"transform",value:function(t,n){Fr(t)||(t=[t]);for(var i=n.point.x,s=n.point.y,o=n.angle,a=n.length,l=0;l<t.length;++l){var u=t[l],f=u.x*Math.cos(o)-u.y*Math.sin(o),c=u.x*Math.sin(o)+u.y*Math.cos(o);u.x=i+a*f,u.y=s+a*c}}},{key:"drawPath",value:function(t,n){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)t.lineTo(n[i].x,n[i].y);t.closePath()}}]),e}(),pyt=function(e){Or(t,e);var r=Eee(t);function t(){return ft(this,t),r.apply(this,arguments)}return ht(t,null,[{key:"draw",value:function(i,s){if(s.image){i.save(),i.translate(s.point.x,s.point.y),i.rotate(Math.PI/2+s.angle);var o=s.imageWidth!=null?s.imageWidth:s.image.width,a=s.imageHeight!=null?s.imageHeight:s.image.height;s.image.drawImageAtPosition(i,1,-o/2,0,o,a),i.restore()}return!1}}]),t}(Dn),vyt=function(e){Or(t,e);var r=Eee(t);function t(){return ft(this,t),r.apply(this,arguments)}return ht(t,null,[{key:"draw",value:function(i,s){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Dn.transform(o,s),Dn.drawPath(i,o),!0}}]),t}(Dn),gyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),yyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};Dn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle-s/2,a=n.angle+s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),myt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.3,y:0};Dn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle+s/2,a=n.angle+3*s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),byt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),wyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),$yt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};return Dn.transform(i,n),rN(t,i.x,i.y,n.length*.4),!0}}]),e}(),_yt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),xyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),Eyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),Syt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Dn.transform(i,n),Dn.drawPath(t,i),!0}}]),e}(),See=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i;switch(n.type&&(i=n.type.toLowerCase()),i){case"image":return pyt.draw(t,n);case"circle":return $yt.draw(t,n);case"box":return xyt.draw(t,n);case"crow":return gyt.draw(t,n);case"curve":return yyt.draw(t,n);case"diamond":return Eyt.draw(t,n);case"inv_curve":return myt.draw(t,n);case"triangle":return byt.draw(t,n);case"inv_triangle":return wyt.draw(t,n);case"bar":return _yt.draw(t,n);case"vee":return Syt.draw(t,n);case"arrow":default:return vyt.draw(t,n)}}}]),e}();function Wj(e,r){var t=bn(e);if(Vc){var n=Vc(e);r&&(n=Os(n).call(n,function(i){return rf(e,i).enumerable})),t.push.apply(t,n)}return t}function qj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Kr(t=Wj(Object(i),!0)).call(t,function(s){Qx(e,s,i[s])}):Gc?Zx(e,Gc(i)):Kr(n=Wj(Object(i))).call(n,function(s){Xx(e,s,rf(i,s))})}return e}var kee=function(){function e(r,t,n){ft(this,e),this._body=t,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(r),this.fromPoint=this.from,this.toPoint=this.to}return ht(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,n),t.lineWidth=n.width,n.dashes!==!1?this._drawDashedLine(t,n,o):this._drawLine(t,n,o)}},{key:"_drawLine",value:function(t,n,i,s,o){if(this.from!=this.to)this._line(t,n,i,s,o);else{var a=this._getCircleData(t),l=wn(a,3),u=l[0],f=l[1],c=l[2];this._circle(t,n,u,f,c)}}},{key:"_drawDashedLine",value:function(t,n,i,s,o){t.lineCap="round";var a=Fr(n.dashes)?n.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,n,i);else{var l=this._getCircleData(t),u=wn(l,3),f=u[0],c=u[1],p=u[2];this._circle(t,n,f,c,p)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)YX(t,this.from.x,this.from.y,this.to.x,this.to.y,a);else{var y=this._getCircleData(t),w=wn(y,3),b=w[0],T=w[1],_=w[2];this._circle(t,n,b,T,_)}this.enableShadow(t,n),t.stroke(),this.disableShadow(t,n)}}},{key:"findBorderPosition",value:function(t,n,i){return this.from!=this.to?this._findBorderPosition(t,n,i):this._findBorderPositionCircle(t,n,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var n,i=Pi(n=this._getCircleData(t)).call(n,0,2),s=wn(i,2),o=s[0],a=s[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var n=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);var i=yee(t,this.options.selfReference.angle,n,this.from);return[i.x,i.y,n]}},{key:"_pointOnCircle",value:function(t,n,i,s){var o=s*2*Math.PI;return{x:t+i*Math.cos(o),y:n-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,n,i){var s=i.x,o=i.y,a=i.low,l=i.high,u=i.direction,f=10,c=this.options.selfReference.size,p=.05,y,w=(a+l)*.5,b=0;this.options.arrowStrikethrough===!0&&(u===-1?b=this.options.endPointOffset.from:u===1&&(b=this.options.endPointOffset.to));var T=0;do{w=(a+l)*.5,y=this._pointOnCircle(s,o,c,w);var _=Math.atan2(t.y-y.y,t.x-y.x),A=t.distanceToBorder(n,_)+b,x=Math.sqrt(Math.pow(y.x-t.x,2)+Math.pow(y.y-t.y,2)),I=A-x;if(Math.abs(I)<p)break;I>0?u>0?a=w:l=w:u>0?l=w:a=w,++T}while(a<=l&&T<f);return qj(qj({},y),{},{t:w})}},{key:"getLineWidth",value:function(t,n){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):n===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,n){if(n.inheritsColor!==!1){if(n.inheritsColor==="both"&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=Wo(this.from.options.color.border,n.opacity),o=Wo(this.to.options.color.border,n.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),i.addColorStop(0,s),i.addColorStop(1,o),i}return n.inheritsColor==="to"?Wo(this.to.options.color.border,n.opacity):Wo(this.from.options.color.border,n.opacity)}else return Wo(n.color,n.opacity)}},{key:"_circle",value:function(t,n,i,s,o){this.enableShadow(t,n);var a=0,l=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var u=this.options.selfReference.angle,f=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:f,direction:-1}),p=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:f,direction:1});a=Math.atan2(c.y-s,c.x-i),l=Math.atan2(p.y-s,p.x-i)}t.beginPath(),t.arc(i,s,o,a,l,!1),t.stroke(),this.disableShadow(t,n)}},{key:"getDistanceToEdge",value:function(t,n,i,s,o,a){if(this.from!=this.to)return this._getDistanceToEdge(t,n,i,s,o,a);var l=this._getCircleData(void 0),u=wn(l,3),f=u[0],c=u[1],p=u[2],y=f-o,w=c-a;return Math.abs(Math.sqrt(y*y+w*w)-p)}},{key:"_getDistanceToLine",value:function(t,n,i,s,o,a){var l=i-t,u=s-n,f=l*l+u*u,c=((o-t)*l+(a-n)*u)/f;c>1?c=1:c<0&&(c=0);var p=t+c*l,y=n+c*u,w=p-o,b=y-a;return Math.sqrt(w*w+b*b)}},{key:"getArrowData",value:function(t,n,i,s,o,a){var l,u,f,c,p,y,w,b=a.width;n==="from"?(f=this.from,c=this.to,p=a.fromArrowScale<0,y=Math.abs(a.fromArrowScale),w=a.fromArrowType):n==="to"?(f=this.to,c=this.from,p=a.toArrowScale<0,y=Math.abs(a.toArrowScale),w=a.toArrowType):(f=this.to,c=this.from,p=a.middleArrowScale<0,y=Math.abs(a.middleArrowScale),w=a.middleArrowType);var T=15*y+3*b;if(f!=c){var _=hyt(f.x-c.x,f.y-c.y),A=T/_;if(n!=="middle")if(this.options.smooth.enabled===!0){var x=this._findBorderPosition(f,t,{via:i}),I=this.getPoint(x.t+A*(n==="from"?1:-1),i);l=Math.atan2(x.y-I.y,x.x-I.x),u=x}else l=Math.atan2(f.y-c.y,f.x-c.x),u=this._findBorderPosition(f,t);else{var O=(p?-A:A)/2,C=this.getPoint(.5+O,i),g=this.getPoint(.5-O,i);l=Math.atan2(C.y-g.y,C.x-g.x),u=this.getPoint(.5,i)}}else{var M=this._getCircleData(t),B=wn(M,3),L=B[0],q=B[1],Q=B[2];if(n==="from"){var te=this.options.selfReference.angle,X=this.options.selfReference.angle+Math.PI,j=this._findBorderPositionCircle(this.from,t,{x:L,y:q,low:te,high:X,direction:-1});l=j.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=j}else if(n==="to"){var Z=this.options.selfReference.angle,ie=this.options.selfReference.angle+Math.PI,_e=this._findBorderPositionCircle(this.from,t,{x:L,y:q,low:Z,high:ie,direction:1});l=_e.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=_e}else{var we=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(L,q,Q,we),l=we*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var Ce=u.x-T*.9*Math.cos(l),ze=u.y-T*.9*Math.sin(l),Ge={x:Ce,y:ze};return{point:u,core:Ge,angle:l,length:T,type:w}}},{key:"drawArrowHead",value:function(t,n,i,s,o){t.strokeStyle=this.getColor(t,n),t.fillStyle=t.strokeStyle,t.lineWidth=n.width;var a=See.draw(t,o);a&&(this.enableShadow(t,n),Lb(t).call(t),this.disableShadow(t,n))}},{key:"enableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,n){if(n.background!==!1){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=n.backgroundColor,t.lineWidth=n.backgroundSize,this.setStrokeDashed(t,n.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,n.dashes)}}},{key:"setStrokeDashed",value:function(t,n){if(n!==!1)if(t.setLineDash!==void 0){var i=Fr(n)?n:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function Kj(e,r){var t=bn(e);if(Vc){var n=Vc(e);r&&(n=Os(n).call(n,function(i){return rf(e,i).enumerable})),t.push.apply(t,n)}return t}function Vj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Kr(t=Kj(Object(i),!0)).call(t,function(s){Qx(e,s,i[s])}):Gc?Zx(e,Gc(i)):Kr(n=Kj(Object(i))).call(n,function(s){Xx(e,s,rf(i,s))})}return e}function kyt(e){var r=Tyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Tyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var FN=function(e){Or(t,e);var r=kyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_findBorderPositionBezier",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),a=10,l=.2,u=!1,f=1,c=0,p=this.to,y,w,b=this.options.endPointOffset?this.options.endPointOffset.to:0;i.id===this.from.id&&(p=this.from,u=!0,b=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(b=0);var T=0;do{w=(c+f)*.5,y=this.getPoint(w,o);var _=Math.atan2(p.y-y.y,p.x-y.x),A=p.distanceToBorder(s,_)+b,x=Math.sqrt(Math.pow(y.x-p.x,2)+Math.pow(y.y-p.y,2)),I=A-x;if(Math.abs(I)<l)break;I<0?u===!1?c=w:f=w:u===!1?f=w:c=w,++T}while(c<=f&&T<a);return Vj(Vj({},y),{},{t:w})}},{key:"_getDistanceToBezierEdge",value:function(i,s,o,a,l,u,f){var c=1e9,p,y,w,b,T,_=i,A=s;for(y=1;y<10;y++)w=.1*y,b=Math.pow(1-w,2)*i+2*w*(1-w)*f.x+Math.pow(w,2)*o,T=Math.pow(1-w,2)*s+2*w*(1-w)*f.y+Math.pow(w,2)*a,y>0&&(p=this._getDistanceToLine(_,A,b,T,l,u),c=p<c?p:c),_=b,A=T;return c}},{key:"_bezierCurve",value:function(i,s,o,a){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?a!=null&&a.x!=null?i.bezierCurveTo(o.x,o.y,a.x,a.y,this.toPoint.x,this.toPoint.y):i.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):i.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(i,s),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),t}(kee);function Iyt(e){var r=Ayt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Ayt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Gj=function(e){Or(t,e);var r=Iyt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return ht(t,[{key:"setOptions",value:function(i){Ow(Tt(t.prototype),"setOptions",this).call(this,i);var s=!1;this.options.physics!==i.physics&&(s=!0),this.options=i,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),s===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var i="edgeId:"+this.id,s=this._body.functions.createNode({id:i,shape:"circle",physics:!0,hidden:!0});this._body.nodes[i]=s,this.via=s,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),a=wn(o,3),l=a[0],u=a[1],f=a[2],c=2*Math.PI*(1-i);return{x:l+f*Math.sin(c),y:u+f-f*(1-Math.cos(c))}}else return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*s.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*s.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s,this.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToBezierEdge(i,s,o,a,l,u,this.via)}}]),t}(FN);function Oyt(e){var r=Cyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Cyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Yj=function(e){Or(t,e);var r=Oyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var i=this.options.smooth.roundness,s=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),a=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){var l,u;o<=a?l=u=i*a:l=u=i*o,this.from.x>this.to.x&&(l=-l),this.from.y>=this.to.y&&(u=-u);var f=this.from.x+l,c=this.from.y+u;return s==="discrete"&&(o<=a?f=o<i*a?this.from.x:f:c=a<i*o?this.from.y:c),{x:f,y:c}}else if(s==="straightCross"){var p=(1-i)*o,y=(1-i)*a;return o<=a?(p=0,this.from.y<this.to.y&&(y=-y)):(this.from.x<this.to.x&&(p=-p),y=0),{x:this.to.x+p,y:this.to.y+y}}else if(s==="horizontal"){var w=(1-i)*o;return this.from.x<this.to.x&&(w=-w),{x:this.to.x+w,y:this.from.y}}else if(s==="vertical"){var b=(1-i)*a;return this.from.y<this.to.y&&(b=-b),{x:this.from.x,y:this.to.y+b}}else if(s==="curvedCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var T=Math.sqrt(o*o+a*a),_=Math.PI,A=Math.atan2(a,o),x=(A+(i*.5+.5)*_)%(2*_);return{x:this.from.x+(i*.5+.5)*T*Math.sin(x),y:this.from.y+(i*.5+.5)*T*Math.cos(x)}}else if(s==="curvedCCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var I=Math.sqrt(o*o+a*a),O=Math.PI,C=Math.atan2(a,o),g=(C+(-i*.5+.5)*O)%(2*O);return{x:this.from.x+(i*.5+.5)*I*Math.sin(g),y:this.from.y+(i*.5+.5)*I*Math.cos(g)}}else{var M,B;o<=a?M=B=i*a:M=B=i*o,this.from.x>this.to.x&&(M=-M),this.from.y>=this.to.y&&(B=-B);var L=this.from.x+M,q=this.from.y+B;return o<=a?this.from.x<=this.to.x?L=this.to.x<L?this.to.x:L:L=this.to.x>L?this.to.x:L:this.from.y>=this.to.y?q=this.to.y>q?this.to.y:q:q=this.to.y<q?this.to.y:q,{x:L,y:q}}}},{key:"_findBorderPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(i,s,o.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(i,s,o,a,l,u,f)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=i,a=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*s.x+Math.pow(o,2)*this.toPoint.x,l=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*s.y+Math.pow(o,2)*this.toPoint.y;return{x:a,y:l}}}]),t}(FN);function Pyt(e){var r=Nyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Nyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Ryt=function(e){Or(t,e);var r=Pyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_getDistanceToBezierEdge2",value:function(i,s,o,a,l,u,f,c){for(var p=1e9,y=i,w=s,b=[0,0,0,0],T=1;T<10;T++){var _=.1*T;b[0]=Math.pow(1-_,3),b[1]=3*_*Math.pow(1-_,2),b[2]=3*Math.pow(_,2)*(1-_),b[3]=Math.pow(_,3);var A=b[0]*i+b[1]*f.x+b[2]*c.x+b[3]*o,x=b[0]*s+b[1]*f.y+b[2]*c.y+b[3]*a;if(T>0){var I=this._getDistanceToLine(y,w,A,x,l,u);p=I<p?I:p}y=A,w=x}return p}}]),t}(FN);function Dyt(e){var r=Byt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Byt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Zj=function(e){Or(t,e);var r=Dyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s,o){var a=o[0],l=o[1];this._bezierCurve(i,s,a,l)}},{key:"_getViaCoordinates",value:function(){var i=this.from.x-this.to.x,s=this.from.y-this.to.y,o,a,l,u,f=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(a=this.from.y,u=this.to.y,o=this.from.x-f*i,l=this.to.x+f*i):(a=this.from.y-f*s,u=this.to.y+f*s,o=this.from.x,l=this.to.x),[{x:o,y:a},{x:l,y:u}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),c=wn(f,2),p=c[0],y=c[1];return this._getDistanceToBezierEdge2(i,s,o,a,l,u,p,y)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=wn(s,2),a=o[0],l=o[1],u=i,f=[Math.pow(1-u,3),3*u*Math.pow(1-u,2),3*Math.pow(u,2)*(1-u),Math.pow(u,3)],c=f[0]*this.fromPoint.x+f[1]*a.x+f[2]*l.x+f[3]*this.toPoint.x,p=f[0]*this.fromPoint.y+f[1]*a.y+f[2]*l.y+f[3]*this.toPoint.y;return{x:c,y:p}}}]),t}(Ryt);function Myt(e){var r=Lyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Lyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Xj=function(e){Or(t,e);var r=Myt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),i.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(i){return{x:(1-i)*this.fromPoint.x+i*this.toPoint.x,y:(1-i)*this.fromPoint.y+i*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){var o=this.to,a=this.from;i.id===this.from.id&&(o=this.from,a=this.to);var l=Math.atan2(o.y-a.y,o.x-a.x),u=o.x-a.x,f=o.y-a.y,c=Math.sqrt(u*u+f*f),p=i.distanceToBorder(s,l),y=(c-p)/c;return{x:(1-y)*a.x+y*o.x,y:(1-y)*a.y+y*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToLine(i,s,o,a,l,u)}}]),t}(kee),Np=function(){function e(r,t,n,i,s){if(ft(this,e),t===void 0)throw new Error("No body provided");this.options=Bc(i),this.globalOptions=i,this.defaultOptions=s,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new bee(this.body,this.options,!0),this.setOptions(r)}return ht(e,[{key:"setOptions",value:function(t){if(t){var n=typeof t.physics<"u"&&this.options.physics!==t.physics||typeof t.hidden<"u"&&(this.options.hidden||!1)!==(t.hidden||!1)||typeof t.from<"u"&&this.options.from!==t.from||typeof t.to<"u"&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=gee(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=DN("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,n=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:n,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var a=this.options.selectionWidth;typeof a=="function"?o.width=a(o.width):typeof a=="number"&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var l=this.options.hoverWidth;typeof l=="function"?o.width=l(o.width):typeof l=="number"&&(o.width+=l),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var n=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,n=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof Gj&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof Zj&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof Yj&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof Xj&&t.type.enabled===!1)&&(i=!1),i===!0&&(n=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(n=!0,this.edgeType=new Gj(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new Zj(this.options,this.body,this.labelModule):this.edgeType=new Yj(this.options,this.body,this.labelModule):this.edgeType=new Xj(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),n}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.width=this.options.scaling.min+s*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,n,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,n.fromArrow&&(s.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),n.fromArrowSrc&&(s.from.image=this.imagelist.load(n.fromArrowSrc)),n.fromArrowImageWidth&&(s.from.imageWidth=n.fromArrowImageWidth),n.fromArrowImageHeight&&(s.from.imageHeight=n.fromArrowImageHeight)),n.toArrow&&(s.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),n.toArrowSrc&&(s.to.image=this.imagelist.load(n.toArrowSrc)),n.toArrowImageWidth&&(s.to.imageWidth=n.toArrowImageWidth),n.toArrowImageHeight&&(s.to.imageHeight=n.toArrowImageHeight)),n.middleArrow&&(s.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,n),n.middleArrowSrc&&(s.middle.image=this.imagelist.load(n.middleArrowSrc)),n.middleArrowImageWidth&&(s.middle.imageWidth=n.middleArrowImageWidth),n.middleArrowImageHeight&&(s.middle.imageHeight=n.middleArrowImageHeight)),n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.to)}}},{key:"drawLabel",value:function(t,n){if(this.options.label!==void 0){var i=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover);var o;if(i.id!=s.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,n),t.save();var a=this._getRotation(t);a.angle!=0&&(t.translate(a.x,a.y),t.rotate(a.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var l=yee(t,this.options.selfReference.angle,this.options.selfReference.size,i);o=this._pointOnCircle(l.x,l.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var n=[];if(this.labelModule.visible()){var i=this._getRotation();F5(this.labelModule.getSize(),t,i)&&n.push({edgeId:this.id,labelId:0})}var s={left:t.x,top:t.y};return this.isOverlappingWith(s)&&n.push({edgeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){if(this.connected){var n=10,i=this.from.x,s=this.from.y,o=this.to.x,a=this.to.y,l=t.left,u=t.top,f=this.edgeType.getDistanceToEdge(i,s,o,a,l,u);return f<n}else return!1}},{key:"_getRotation",value:function(t){var n=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,n);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var s={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;var o=this.from.y-this.to.y,a=this.from.x-this.to.x,l=Math.atan2(o,a);return(l<-1&&a<0||l>0&&a<0)&&(l+=Math.PI),s.angle=l,s}},{key:"_pointOnCircle",value:function(t,n,i,s){return{x:t+i*Math.cos(s),y:n-i*Math.sin(s)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(tg(a,t,n,i),n.endPointOffset!==void 0&&n.endPointOffset.from!==void 0&&(nh(n.endPointOffset.from)?t.endPointOffset.from=n.endPointOffset.from:(t.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),n.endPointOffset!==void 0&&n.endPointOffset.to!==void 0&&(nh(n.endPointOffset.to)?t.endPointOffset.to=n.endPointOffset.to:(t.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Z$(n.label)?t.label=n.label:Z$(t.label)||(t.label=void 0),Fo(t,n,"smooth",s),Fo(t,n,"shadow",s),Fo(t,n,"background",s),n.dashes!==void 0&&n.dashes!==null?t.dashes=n.dashes:i===!0&&n.dashes===null&&(t.dashes=$h(s.dashes)),n.scaling!==void 0&&n.scaling!==null?(n.scaling.min!==void 0&&(t.scaling.min=n.scaling.min),n.scaling.max!==void 0&&(t.scaling.max=n.scaling.max),Fo(t.scaling,n.scaling,"label",s.scaling)):i===!0&&n.scaling===null&&(t.scaling=$h(s.scaling)),n.arrows!==void 0&&n.arrows!==null)if(typeof n.arrows=="string"){var l=n.arrows.toLowerCase();t.arrows.to.enabled=Sr(l).call(l,"to")!=-1,t.arrows.middle.enabled=Sr(l).call(l,"middle")!=-1,t.arrows.from.enabled=Sr(l).call(l,"from")!=-1}else if(Dr(n.arrows)==="object")Fo(t.arrows,n.arrows,"to",s.arrows),Fo(t.arrows,n.arrows,"middle",s.arrows),Fo(t.arrows,n.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Mb(n.arrows));else i===!0&&n.arrows===null&&(t.arrows=$h(s.arrows));if(n.color!==void 0&&n.color!==null){var u=xc(n.color)?{color:n.color,highlight:n.color,hover:n.color,inherit:!1,opacity:1}:n.color,f=t.color;if(o)Jr(f,s.color,!1,i);else for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&delete f[c];if(xc(f))f.color=f,f.highlight=f,f.hover=f,f.inherit=!1,u.opacity===void 0&&(f.opacity=1);else{var p=!1;u.color!==void 0&&(f.color=u.color,p=!0),u.highlight!==void 0&&(f.highlight=u.highlight,p=!0),u.hover!==void 0&&(f.hover=u.hover,p=!0),u.inherit!==void 0&&(f.inherit=u.inherit),u.opacity!==void 0&&(f.opacity=Math.min(1,Math.max(0,u.opacity))),p===!0?f.inherit=!1:f.inherit===void 0&&(f.inherit="from")}}else i===!0&&n.color===null&&(t.color=Bc(s.color));i===!0&&n.font===null&&(t.font=Bc(s.font)),Object.prototype.hasOwnProperty.call(n,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=n.selfReferenceSize)}}]),e}(),Fyt=function(){function e(r,t,n){var i,s=this;ft(this,e),this.body=r,this.images=t,this.groups=n,this.body.functions.createEdge=nt(i=this.create).call(i,this),this.edgesListeners={add:function(a,l){s.add(l.items)},update:function(a,l){s.update(l.items)},remove:function(a,l){s.remove(l.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,l,u,f){if(l===a)return .5;var c=1/(l-a);return Math.max(0,(f-a)*c)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Jr(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n,i;this.body.emitter.on("_forceDisableDynamicCurves",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");var a=!1;for(var l in t.body.edges)if(Object.prototype.hasOwnProperty.call(t.body.edges,l)){var u=t.body.edges[l],f=t.body.data.edges.get(l);if(f!=null){var c=f.smooth;c!==void 0&&c.enabled===!0&&c.type==="dynamic"&&(s===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:s}}),a=!0)}}o===!0&&a===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",nt(n=this.refresh).call(n,this)),this.body.emitter.on("refresh",nt(i=this.refresh).call(i,this)),this.body.emitter.on("destroy",function(){gr(t.edgesListeners,function(s,o){t.body.data.edges&&t.body.data.edges.off(o,s)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){Np.parseOptions(this.options,t,!0,this.defaultOptions,!0);var n=!1;if(t.smooth!==void 0)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(n=this.body.edges[i].updateEdgeType()||n);if(t.font!==void 0)for(var s in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,s)&&this.body.edges[s].updateLabelModule();(t.hidden!==void 0||t.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.body.data.edges;if(TX("id",t))this.body.data.edges=t;else if(Fr(t))this.body.data.edges=new Ea,this.body.data.edges.add(t);else if(!t)this.body.data.edges=new Ea;else throw new TypeError("Array or DataSet expected");if(s&&gr(this.edgesListeners,function(a,l){s.off(l,a)}),this.body.edges={},this.body.data.edges){gr(this.edgesListeners,function(a,l){n.body.data.edges.on(l,a)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.edges,s=this.body.data.edges,o=0;o<t.length;o++){var a=t[o],l=i[a];l&&l.disconnect();var u=s.get(a,{showInternalIds:!0});i[a]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var n=this.body.edges,i=this.body.data.edges,s=!1,o=0;o<t.length;o++){var a=t[o],l=i.get(a),u=n[a];u!==void 0?(u.disconnect(),s=u.setOptions(l)||s,u.connect()):(this.body.edges[a]=this.create(l),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.length!==0){var i=this.body.edges;gr(t,function(s){var o=i[s];o!==void 0&&o.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;gr(this.body.edges,function(n,i){var s=t.body.data.edges.get(i);s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(t){return new Np(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,n=this.body.nodes,i=this.body.edges;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var s=i[t];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(t){var n=[];if(this.body.edges[t]!==void 0){var i=this.body.edges[t];i.fromId!==void 0&&n.push(i.fromId),i.toId!==void 0&&n.push(i.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,n=[];gr(this.body.edges,function(i,s){var o=t.body.nodes[i.toId],a=t.body.nodes[i.fromId];o!==void 0&&o.isCluster===!0||a!==void 0&&a.isCluster===!0||(o===void 0||a===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(t!=null){var n=this.body.edges,i=[];Kr(t).call(t,function(s,o){var a=n[o];a===void 0&&i.push(o)}),this.add(i,!0)}}}]),e}(),Tee=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=n2("BARNES HUT SOLVER")}return ht(e,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t,n=this.body.nodes,i=this.physicsBody.physicsNodeIndices,s=i.length,o=this._formBarnesHutTree(n,i);this.barnesHutTree=o;for(var a=0;a<s;a++)t=n[i[a]],t.options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,n){this._getForceContribution(t.children.NW,n),this._getForceContribution(t.children.NE,n),this._getForceContribution(t.children.SW,n),this._getForceContribution(t.children.SE,n)}},{key:"_getForceContribution",value:function(t,n){if(t.childrenCount>0){var i=t.centerOfMass.x-n.x,s=t.centerOfMass.y-n.y,o=Math.sqrt(i*i+s*s);o*t.calcSize>this.thetaInversed?this._calculateForces(o,i,s,n,t):t.childrenCount===4?this._getForceContributions(t,n):t.children.data.id!=n.id&&this._calculateForces(o,i,s,n,t)}}},{key:"_calculateForces",value:function(t,n,i,s,o){t===0&&(t=.1,n=t),this.overlapAvoidanceFactor<1&&s.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius));var a=this.options.gravitationalConstant*o.mass*s.options.mass/Math.pow(t,3),l=n*a,u=i*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}},{key:"_formBarnesHutTree",value:function(t,n){for(var i,s=n.length,o=t[n[0]].x,a=t[n[0]].y,l=t[n[0]].x,u=t[n[0]].y,f=1;f<s;f++){var c=t[n[f]],p=c.x,y=c.y;c.options.mass>0&&(p<o&&(o=p),p>l&&(l=p),y<a&&(a=y),y>u&&(u=y))}var w=Math.abs(l-o)-Math.abs(u-a);w>0?(a-=.5*w,u+=.5*w):(o+=.5*w,l-=.5*w);var b=1e-5,T=Math.max(b,Math.abs(l-o)),_=.5*T,A=.5*(o+l),x=.5*(a+u),I={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:A-_,maxX:A+_,minY:x-_,maxY:x+_},size:T,calcSize:1/T,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(I.root);for(var O=0;O<s;O++)i=t[n[O]],i.options.mass>0&&this._placeInTree(I.root,i);return I}},{key:"_updateBranchMass",value:function(t,n){var i=t.centerOfMass,s=t.mass+n.options.mass,o=1/s;i.x=i.x*t.mass+n.x*n.options.mass,i.x*=o,i.y=i.y*t.mass+n.y*n.options.mass,i.y*=o,t.mass=s;var a=Math.max(Math.max(n.height,n.radius),n.width);t.maxWidth=t.maxWidth<a?a:t.maxWidth}},{key:"_placeInTree",value:function(t,n,i){(i!=!0||i===void 0)&&this._updateBranchMass(t,n);var s=t.children.NW.range,o;s.maxX>n.x?s.maxY>n.y?o="NW":o="SW":s.maxY>n.y?o="NE":o="SE",this._placeInRegion(t,n,o)}},{key:"_placeInRegion",value:function(t,n,i){var s=t.children[i];switch(s.childrenCount){case 0:s.children.data=n,s.childrenCount=1,this._updateBranchMass(s,n);break;case 1:s.children.data.x===n.x&&s.children.data.y===n.y?(n.x+=this._rng(),n.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,n));break;case 4:this._placeInTree(s,n);break}}},{key:"_splitBranch",value:function(t){var n=null;t.childrenCount===1&&(n=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),n!=null&&this._placeInTree(t,n)}},{key:"_insertRegion",value:function(t,n){var i,s,o,a,l=.5*t.size;switch(n){case"NW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY,a=t.range.minY+l;break;case"NE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY,a=t.range.minY+l;break;case"SW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY+l,a=t.range.maxY;break;case"SE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY+l,a=t.range.maxY;break}t.children[n]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:s,minY:o,maxY:a},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,n){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,n))}},{key:"_drawBranch",value:function(t,n,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,n),this._drawBranch(t.children.NE,n),this._drawBranch(t.children.SE,n),this._drawBranch(t.children.SW,n)),n.strokeStyle=i,n.beginPath(),n.moveTo(t.range.minX,t.range.minY),n.lineTo(t.range.maxX,t.range.minY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.minY),n.lineTo(t.range.maxX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.maxY),n.lineTo(t.range.minX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.minX,t.range.maxY),n.lineTo(t.range.minX,t.range.minY),n.stroke()}}]),e}(),jyt=function(){function e(r,t,n){ft(this,e),this._rng=n2("REPULSION SOLVER"),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,f=this.body.nodes,c=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces,y=this.options.nodeDistance,w=-2/3/y,b=4/3,T=0;T<c.length-1;T++){l=f[c[T]];for(var _=T+1;_<c.length;_++)u=f[c[_]],t=u.x-l.x,n=u.y-l.y,i=Math.sqrt(t*t+n*n),i===0&&(i=.1*this._rng(),t=i),i<2*y&&(i<.5*y?a=1:a=w*i+b,a=a/i,s=t*a,o=n*a,p[l.id].x-=s,p[l.id].y-=o,p[u.id].x+=s,p[u.id].y+=o)}}}]),e}(),Hyt=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,s=this.options.nodeDistance,o=0;o<n.length-1;o++)for(var a=t[n[o]],l=o+1;l<n.length;l++){var u=t[n[l]];if(a.level===u.level){var f=s+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(u.shape.radius||0)/2),c=u.x-a.x,p=u.y-a.y,y=Math.sqrt(c*c+p*p),w=.05,b=void 0;y<f?b=-Math.pow(w*y,2)+Math.pow(w*f,2):b=0,y!==0&&(b=b/y);var T=c*b,_=p*b;i[a.id].x-=T,i[a.id].y-=_,i[u.id].x+=T,i[u.id].y+=_}}}}]),e}(),ST=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i=this.physicsBody.physicsEdgeIndices,s=this.body.edges,o,a,l,u=0;u<i.length;u++)n=s[i[u]],n.connected===!0&&n.toId!==n.fromId&&this.body.nodes[n.toId]!==void 0&&this.body.nodes[n.fromId]!==void 0&&(n.edgeType.via!==void 0?(t=n.options.length===void 0?this.options.springLength:n.options.length,o=n.to,a=n.edgeType.via,l=n.from,this._calculateSpringForce(o,a,.5*t),this._calculateSpringForce(a,l,.5*t)):(t=n.options.length===void 0?this.options.springLength*1.5:n.options.length,this._calculateSpringForce(n.from,n.to,t)))}},{key:"_calculateSpringForce",value:function(t,n,i){var s=t.x-n.x,o=t.y-n.y,a=Math.max(Math.sqrt(s*s+o*o),.01),l=this.options.springConstant*(i-a)/a,u=s*l,f=o*l;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=u,this.physicsBody.forces[t.id].y+=f),this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x-=u,this.physicsBody.forces[n.id].y-=f)}}]),e}(),zyt=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,f=this.body.edges,c=.5,p=this.physicsBody.physicsEdgeIndices,y=this.physicsBody.physicsNodeIndices,w=this.physicsBody.forces,b=0;b<y.length;b++){var T=y[b];w[T].springFx=0,w[T].springFy=0}for(var _=0;_<p.length;_++)n=f[p[_]],n.connected===!0&&(t=n.options.length===void 0?this.options.springLength:n.options.length,i=n.from.x-n.to.x,s=n.from.y-n.to.y,u=Math.sqrt(i*i+s*s),u=u===0?.01:u,l=this.options.springConstant*(t-u)/u,o=i*l,a=s*l,n.to.level!=n.from.level?(w[n.toId]!==void 0&&(w[n.toId].springFx-=o,w[n.toId].springFy-=a),w[n.fromId]!==void 0&&(w[n.fromId].springFx+=o,w[n.fromId].springFy+=a)):(w[n.toId]!==void 0&&(w[n.toId].x-=c*o,w[n.toId].y-=c*a),w[n.fromId]!==void 0&&(w[n.fromId].x+=c*o,w[n.fromId].y+=c*a)));l=1;for(var A,x,I=0;I<y.length;I++){var O=y[I];A=Math.min(l,Math.max(-l,w[O].springFx)),x=Math.min(l,Math.max(-l,w[O].springFy)),w[O].x+=A,w[O].y+=x}for(var C=0,g=0,M=0;M<y.length;M++){var B=y[M];C+=w[B].x,g+=w[B].y}for(var L=C/y.length,q=g/y.length,Q=0;Q<y.length;Q++){var te=y[Q];w[te].x-=L,w[te].y-=q}}}]),e}(),Cw=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o=this.body.nodes,a=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,u=0;u<a.length;u++){var f=a[u];s=o[f],t=-s.x,n=-s.y,i=Math.sqrt(t*t+n*n),this._calculateForces(i,t,n,l,s)}}},{key:"_calculateForces",value:function(t,n,i,s,o){var a=t===0?0:this.options.centralGravity/t;s[o.id].x=n*a,s[o.id].y=i*a}}]),e}();function Uyt(e){var r=Wyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Wyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var qyt=function(e){Or(t,e);var r=Uyt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._rng=n2("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return ht(t,[{key:"_calculateForces",value:function(i,s,o,a,l){i===0&&(i=.1*this._rng(),s=i),this.overlapAvoidanceFactor<1&&a.shape.radius&&(i=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,i-a.shape.radius));var u=a.edges.length+1,f=this.options.gravitationalConstant*l.mass*a.options.mass*u/Math.pow(i,2),c=s*f,p=o*f;this.physicsBody.forces[a.id].x+=c,this.physicsBody.forces[a.id].y+=p}}]),t}(Tee);function Kyt(e){var r=Vyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function Vyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Gyt=function(e){Or(t,e);var r=Kyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_calculateForces",value:function(i,s,o,a,l){if(i>0){var u=l.edges.length+1,f=this.options.centralGravity*u*l.options.mass;a[l.id].x=s*f,a[l.id].y=o*f}}}]),t}(Cw),Yyt=function(){function e(r){ft(this,e),this.body=r,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},qn(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,V$(["stabilization"],this.options,t),Fo(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var n=this.options.wind;n&&((typeof n.x!="number"||R5(n.x))&&(n.x=0),(typeof n.y!="number"||R5(n.y))&&(n.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new qyt(this.body,this.physicsBody,t),this.edgesSolver=new ST(this.body,this.physicsBody,t),this.gravitySolver=new Gyt(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new jyt(this.body,this.physicsBody,t),this.edgesSolver=new ST(this.body,this.physicsBody,t),this.gravitySolver=new Cw(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new Hyt(this.body,this.physicsBody,t),this.edgesSolver=new zyt(this.body,this.physicsBody,t),this.gravitySolver=new Cw(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new Tee(this.body,this.physicsBody,t),this.edgesSolver=new ST(this.body,this.physicsBody,t),this.gravitySolver=new Cw(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var t;this.viewFunction=nt(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=U$();this.physicsTick();var n=U$()-t;(n<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&yl(function(){t.body.emitter.emit("stabilized",{iterations:n}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var t=1.2;this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=this.adaptiveCounter%this.adaptiveInterval===0;t?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,n=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&n[s].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(n[s].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[a]={x:0,y:0},this.physicsBody.velocities[a]===void 0&&(this.physicsBody.velocities[a]={x:0,y:0})}for(var l in this.physicsBody.velocities)t[l]===void 0&&delete this.physicsBody.velocities[l]}},{key:"revert",value:function(){var t=bn(this.previousStates),n=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var s=0;s<t.length;s++){var o=t[s];n[o]!==void 0?n[o].options.physics===!0&&(this.referenceState[o]={positions:{x:n[o].x,y:n[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,n[o].x=this.previousStates[o].x,n[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t,n,i,s=this.body.nodes,o=this.referenceState,a=.3;for(var l in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,l)&&s[l]!==void 0&&(t=s[l].x-o[l].positions.x,n=s[l].y-o[l].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i>a))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,n=0,i=0,s=5,o=0;o<t.length;o++){var a=t[o],l=this._performStep(a);n=Math.max(n,l),i+=l}this.adaptiveTimestepEnabled=i/t.length<s,this.stabilized=n<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,n,i){var s=this.modelOptions.damping*t,o=(n-s)/i;t+=o*this.timestep;var a=this.options.maxVelocity||1e9;return Math.abs(t)>a&&(t=t>0?a:-a),t}},{key:"_performStep",value:function(t){var n=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var s=this.physicsBody.velocities[t];this.previousStates[t]={x:n.x,y:n.y,vx:s.x,vy:s.y},n.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,i.x,n.options.mass),n.x+=s.x*this.timestep):(i.x=0,s.x=0),n.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,i.y,n.options.mass),n.y+=s.y*this.timestep):(i.y=0,s.y=0);var o=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return o}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].x&&t[n].y){var i=t[n].options.fixed;this.freezeCache[n]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.freezeCache[n]!==void 0&&(t[n].options.fixed.x=this.freezeCache[n].x,t[n].options.fixed.y=this.freezeCache[n].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof n!="number"&&(n=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",n)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=n,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,yl(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,n=function(){return t.stabilized===!1&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var s=0;n()&&s<this.options.stabilization.updateInterval;)this.physicsTick(),s++;if(i(),n()){var o;yl(nt(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var i=this.physicsBody.physicsNodeIndices[n],s=this.body.nodes[i],o=this.physicsBody.forces[i],a=20,l=.03,u=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),f=Math.min(Math.max(5,u),15),c=3*f,p=A5((180-Math.min(1,Math.max(0,l*u))*180)/360,1,1),y={x:s.x+a*o.x,y:s.y+a*o.y};t.lineWidth=f,t.strokeStyle=p,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(y.x,y.y),t.stroke();var w=Math.atan2(o.y,o.x);t.fillStyle=p,See.draw(t,{type:"arrow",point:y,angle:w,length:c}),Lb(t).call(t)}}}]),e}();let H1;const Zyt=new Uint8Array(16);function Xyt(){if(!H1&&(H1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!H1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H1(Zyt)}const Ti=[];for(let e=0;e<256;++e)Ti.push((e+256).toString(16).slice(1));function Jyt(e,r=0){return(Ti[e[r+0]]+Ti[e[r+1]]+Ti[e[r+2]]+Ti[e[r+3]]+"-"+Ti[e[r+4]]+Ti[e[r+5]]+"-"+Ti[e[r+6]]+Ti[e[r+7]]+"-"+Ti[e[r+8]]+Ti[e[r+9]]+"-"+Ti[e[r+10]]+Ti[e[r+11]]+Ti[e[r+12]]+Ti[e[r+13]]+Ti[e[r+14]]+Ti[e[r+15]]).toLowerCase()}const Qyt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Jj={randomUUID:Qyt};function Iy(e,r,t){if(Jj.randomUUID&&!r&&!e)return Jj.randomUUID();e=e||{};const n=e.random||(e.rng||Xyt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return Jyt(n)}var as=function(){function e(){ft(this,e)}return ht(e,null,[{key:"getRange",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.shape.boundingBox.left&&(o=l.shape.boundingBox.left),a<l.shape.boundingBox.right&&(a=l.shape.boundingBox.right),i>l.shape.boundingBox.top&&(i=l.shape.boundingBox.top),s<l.shape.boundingBox.bottom&&(s=l.shape.boundingBox.bottom);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"getRangeCore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.x&&(o=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),s<l.y&&(s=l.y);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,n){var i={};return n===void 0||n==="node"?(Jr(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Jr(i,t.options,!0),i}}]),e}();function emt(e){var r=tmt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function tmt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var rmt=function(e){Or(t,e);var r=emt(t);function t(n,i,s,o,a,l){var u;return ft(this,t),u=r.call(this,n,i,s,o,a,l),u.isCluster=!0,u.containedNodes={},u.containedEdges={},u}return ht(t,[{key:"_openChildCluster",value:function(i){var s=this,o=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],gr(o.edges,function(a){delete s.containedEdges[a.id]}),gr(o.containedNodes,function(a,l){s.containedNodes[l]=a}),o.containedNodes={},gr(o.containedEdges,function(a,l){s.containedEdges[l]=a}),o.containedEdges={},gr(o.edges,function(a){gr(s.edges,function(l){var u,f,c=Sr(u=l.clusteringEdgeReplacingIds).call(u,a.id);c!==-1&&(gr(a.clusteringEdgeReplacingIds,function(p){l.clusteringEdgeReplacingIds.push(p),s.body.edges[p].edgeReplacedById=l.id}),du(f=l.clusteringEdgeReplacingIds).call(f,c,1))})}),o.edges=[]}}]),t}(Ks),nmt=function(){function e(r){var t=this;ft(this,e),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},qn(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}return ht(e,[{key:"clusterByHubsize",value:function(t,n){t===void 0?t=this._getHubSize():Dr(t)==="object"&&(n=this._checkOptions(t),t=this._getHubSize());for(var i=[],s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodes[this.body.nodeIndices[s]];o.edges.length>=t&&i.push(o.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],n,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");n=this._checkOptions(n);var s={},o={};gr(this.body.nodes,function(a,l){a.options&&n.joinCondition(a.options)===!0&&(s[l]=a,gr(a.edges,function(u){t.clusteredEdges[u.id]===void 0&&(o[u.id]=u)}))}),this._cluster(s,o,n,i)}},{key:"clusterByEdgeCount",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=this._checkOptions(n);for(var o=[],a={},l,u,f,c=function(){var b={},T={},_=i.body.nodeIndices[p],A=i.body.nodes[_];if(a[_]===void 0){f=0,u=[];for(var x=0;x<A.edges.length;x++)l=A.edges[x],i.clusteredEdges[l.id]===void 0&&(l.toId!==l.fromId&&f++,u.push(l));if(f===t){for(var I=function(te){if(n.joinCondition===void 0||n.joinCondition===null)return!0;var X=as.cloneOptions(te);return n.joinCondition(X)},O=!0,C=0;C<u.length;C++){l=u[C];var g=i._getConnectedId(l,_);if(I(A))T[l.id]=l,b[_]=A,b[g]=i.body.nodes[g],a[_]=!0;else{O=!1;break}}if(bn(b).length>0&&bn(T).length>0&&O===!0){var M=function(){for(var te=0;te<o.length;++te)for(var X in b)if(o[te].nodes[X]!==void 0)return o[te]},B=M();if(B!==void 0){for(var L in b)B.nodes[L]===void 0&&(B.nodes[L]=b[L]);for(var q in T)B.edges[q]===void 0&&(B.edges[q]=T[q])}else o.push({nodes:b,edges:T})}}}},p=0;p<this.body.nodeIndices.length;p++)c();for(var y=0;y<o.length;y++)this._cluster(o[y].nodes,o[y].edges,n,!1);s===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,t,n)}},{key:"clusterBridges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,t,n)}},{key:"clusterByConnection",value:function(t,n){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];n=this._checkOptions(n,o),n.clusterNodeProperties.x===void 0&&(n.clusterNodeProperties.x=o.x),n.clusterNodeProperties.y===void 0&&(n.clusterNodeProperties.y=o.y),n.clusterNodeProperties.fixed===void 0&&(n.clusterNodeProperties.fixed={},n.clusterNodeProperties.fixed.x=o.options.fixed.x,n.clusterNodeProperties.fixed.y=o.options.fixed.y);var a={},l={},u=o.id,f=as.cloneOptions(o);a[u]=o;for(var c=0;c<o.edges.length;c++){var p=o.edges[c];if(this.clusteredEdges[p.id]===void 0){var y=this._getConnectedId(p,u);if(this.clusteredNodes[y]===void 0)if(y!==u)if(n.joinCondition===void 0)l[p.id]=p,a[y]=this.body.nodes[y];else{var w=as.cloneOptions(this.body.nodes[y]);n.joinCondition(f,w)===!0&&(l[p.id]=p,a[y]=this.body.nodes[y])}else l[p.id]=p}}var b=uv(i=bn(a)).call(i,function(I){return a[I].id});for(var T in a)if(Object.prototype.hasOwnProperty.call(a,T))for(var _=a[T],A=0;A<_.edges.length;A++){var x=_.edges[A];Sr(b).call(b,this._getConnectedId(x,_.id))>-1&&(l[x.id]=x)}this._cluster(a,l,n,s)}},{key:"_createClusterEdges",value:function(t,n,i,s){for(var o,a,l,u,f,c,p=bn(t),y=[],w=0;w<p.length;w++){a=p[w],l=t[a];for(var b=0;b<l.edges.length;b++)o=l.edges[b],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?n[o.id]=o:o.toId==a?(u=i.id,f=o.fromId,c=f):(u=o.toId,f=i.id,c=u),t[c]===void 0&&y.push({edge:o,fromId:f,toId:u}))}for(var T=[],_=function(g){for(var M=0;M<T.length;M++){var B=T[M],L=g.fromId===B.fromId&&g.toId===B.toId,q=g.fromId===B.toId&&g.toId===B.fromId;if(L||q)return B}return null},A=0;A<y.length;A++){var x=y[A],I=x.edge,O=_(x);O===null?(O=this._createClusteredEdge(x.fromId,x.toId,I,s),T.push(O)):O.clusteringEdgeReplacingIds.push(I.id),this.body.edges[I.id].edgeReplacedById=O.id,this._backupEdgeOptions(I),I.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.clusteredNodes[a]!==void 0&&o.push(a);for(var l=0;l<o.length;++l)delete t[o[l]];if(bn(t).length!=0&&!(bn(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=!0)){var u=Jr({},i.clusterNodeProperties);if(i.processProperties!==void 0){var f=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var p=as.cloneOptions(t[c]);f.push(p)}var y=[];for(var w in n)if(Object.prototype.hasOwnProperty.call(n,w)&&w.substr(0,12)!=="clusterEdge:"){var b=as.cloneOptions(n[w],"edge");y.push(b)}if(u=i.processProperties(u,f,y),!u)throw new Error("The processProperties function does not return properties!")}u.id===void 0&&(u.id="cluster:"+Iy());var T=u.id;u.label===void 0&&(u.label="cluster");var _=void 0;u.x===void 0&&(_=this._getClusterPosition(t),u.x=_.x),u.y===void 0&&(_===void 0&&(_=this._getClusterPosition(t)),u.y=_.y),u.id=T;var A=this.body.functions.createNode(u,rmt);A.containedNodes=t,A.containedEdges=n,A.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[u.id]=A,this._clusterEdges(t,n,u,i.clusterEdgeProperties),u.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var n=this.clusteredEdges[t.id];n!==void 0&&(t.setOptions({physics:n.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var n=bn(t),i=t[n[0]].x,s=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,l,u=1;u<n.length;u++)l=t[n[u]],i=l.x<i?l.x:i,s=l.x>s?l.x:s,o=l.y<o?l.y:o,a=l.y>a?l.y:a;return{x:.5*(i+s),y:.5*(o+a)}}},{key:"openCluster",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var s=this.body.nodes[t];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),a=Sr(o).call(o,t)-1;if(a>=0){var l=o[a],u=this.body.nodes[l];u._openChildCluster(t),delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged");return}var f=s.containedNodes,c=s.containedEdges;if(n!==void 0&&n.releaseFunction!==void 0&&typeof n.releaseFunction=="function"){var p={},y={x:s.x,y:s.y};for(var w in f)if(Object.prototype.hasOwnProperty.call(f,w)){var b=this.body.nodes[w];p[w]={x:b.x,y:b.y}}var T=n.releaseFunction(y,p);for(var _ in f)if(Object.prototype.hasOwnProperty.call(f,_)){var A=this.body.nodes[_];T[_]!==void 0&&(A.x=T[_].x===void 0?s.x:T[_].x,A.y=T[_].y===void 0?s.y:T[_].y)}}else gr(f,function(_e){_e.options.fixed.x===!1&&(_e.x=s.x),_e.options.fixed.y===!1&&(_e.y=s.y)});for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var I=this.body.nodes[x];I.vx=s.vx,I.vy=s.vy,I.setOptions({physics:!0}),delete this.clusteredNodes[x]}for(var O=[],C=0;C<s.edges.length;C++)O.push(s.edges[C]);for(var g=0;g<O.length;g++){for(var M=O[g],B=this._getConnectedId(M,t),L=this.clusteredNodes[B],q=0;q<M.clusteringEdgeReplacingIds.length;q++){var Q=M.clusteringEdgeReplacingIds[q],te=this.body.edges[Q];if(te!==void 0)if(L!==void 0){var X=this.body.nodes[L.clusterId];X.containedEdges[te.id]=te,delete c[te.id];var j=te.fromId,Z=te.toId;te.toId==B?Z=L.clusterId:j=L.clusterId,this._createClusteredEdge(j,Z,te,X.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(te)}M.remove()}for(var ie in c)Object.prototype.hasOwnProperty.call(c,ie)&&this._restoreEdge(c[ie]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var n=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(this.body.nodes[s].id)}return n}},{key:"findNode",value:function(t){for(var n=[],i=100,s=0,o;this.clusteredNodes[t]!==void 0&&s<i;){if(o=this.body.nodes[t],o===void 0)return[];n.push(o.id),t=this.clusteredNodes[t].clusterId,s++}return o=this.body.nodes[t],o===void 0?[]:(n.push(o.id),wh(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,n){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(n===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(n),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,n){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(n===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),s=0;s<i.length;s++){var o=this.body.edges[i[s]];o.setOptions(n)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var n=[],i=100,s=0;t!==void 0&&this.body.edges[t]!==void 0&&s<i;)n.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,s++;return wh(n).call(n),n}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var n=[t],i=[],s=[],o=100,a=0;n.length>0&&a<o;){var l=n.pop();if(l!==void 0){var u=this.body.edges[l];if(u!==void 0){a++;var f=u.clusteringEdgeReplacingIds;if(f===void 0)s.push(l);else for(var c=0;c<f.length;++c){var p=f[c];Sr(n).call(n,f)!==-1||Sr(i).call(i,f)!==-1||n.push(p)}i.push(l)}}}return s}},{key:"_getConnectedId",value:function(t,n){return t.toId!=n?t.toId:(t.fromId!=n,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,n=0,i=0,s=0,o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];a.edges.length>s&&(s=a.edges.length),t+=a.edges.length,n+=Math.pow(a.edges.length,2),i+=1}t=t/i,n=n/i;var l=n-Math.pow(t,2),u=Math.sqrt(l),f=Math.floor(t+2*u);return f>s&&(f=s),f}},{key:"_createClusteredEdge",value:function(t,n,i,s,o){var a=as.cloneOptions(i,"edge");Jr(a,s),a.from=t,a.to=n,a.id="clusterEdge:"+Iy(),o!==void 0&&Jr(a,o);var l=this.body.functions.createEdge(a);return l.clusteringEdgeReplacingIds=[i.id],l.connect(),this.body.edges[l.id]=l,l}},{key:"_clusterEdges",value:function(t,n,i,s){if(n instanceof Np){var o=n,a={};a[o.id]=o,n=a}if(t instanceof Ks){var l=t,u={};u[l.id]=l,t=u}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=i.clusterEdgeProperties),this._createClusterEdges(t,n,i,s);for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)&&this.body.edges[f]!==void 0){var c=this.body.edges[f];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(this.clusteredNodes[p]={clusterId:i.id,node:this.body.nodes[p]},this.body.nodes[p].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(t!==void 0){var n=this.clusteredNodes[t];if(n!==void 0){var i=n.clusterId;if(i!==void 0)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,n){var i=[];return gr(t,function(s){n(s)&&i.push(s)}),i}},{key:"_updateState",value:function(){var t=this,n,i=[],s={},o=function(w){gr(t.body.nodes,function(b){b.isCluster===!0&&w(b)})};for(n in this.clusteredNodes)if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,n)){var a=this.body.nodes[n];a===void 0&&i.push(n)}o(function(y){for(var w=0;w<i.length;w++)delete y.containedNodes[i[w]]});for(var l=0;l<i.length;l++)delete this.clusteredNodes[i[l]];gr(this.clusteredEdges,function(y){var w=t.body.edges[y];(w===void 0||!w.endPointsValid())&&(s[y]=y)}),o(function(y){gr(y.containedEdges,function(w,b){!w.endPointsValid()&&!s[b]&&(s[b]=b)})}),gr(this.body.edges,function(y,w){var b=!0,T=y.clusteringEdgeReplacingIds;if(T!==void 0){var _=0;gr(T,function(A){var x=t.body.edges[A];x!==void 0&&x.endPointsValid()&&(_+=1)}),b=_>0}(!y.endPointsValid()||!b)&&(s[w]=w)}),o(function(y){gr(s,function(w){delete y.containedEdges[w],gr(y.edges,function(b,T){if(b.id===w){y.edges[T]=null;return}b.clusteringEdgeReplacingIds=t._filter(b.clusteringEdgeReplacingIds,function(_){return!s[_]})}),y.edges=t._filter(y.edges,function(b){return b!==null})})}),gr(s,function(y){delete t.clusteredEdges[y]}),gr(s,function(y){delete t.body.edges[y]});var u=bn(this.body.edges);gr(u,function(y){var w=t.body.edges[y],b=t._isClusteredNode(w.fromId)||t._isClusteredNode(w.toId);if(b!==t._isClusteredEdge(w.id))if(b){var T=t._getClusterNodeForNode(w.fromId);T!==void 0&&t._clusterEdges(t.body.nodes[w.fromId],w,T);var _=t._getClusterNodeForNode(w.toId);_!==void 0&&t._clusterEdges(t.body.nodes[w.toId],w,_)}else delete t._clusterEdges[y],t._restoreEdge(w)});for(var f=!1,c=!0,p=function(){var w=[];o(function(T){var _=bn(T.containedNodes).length,A=T.options.allowSingleNodeCluster===!0;(A&&_<1||!A&&_<2)&&w.push(T.id)});for(var b=0;b<w.length;++b)t.openCluster(w[b],{},!1);c=w.length>0,f=f||c};c;)p();f&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return this.clusteredNodes[t]!==void 0}},{key:"_isClusteredEdge",value:function(t){return this.clusteredEdges[t]!==void 0}}]),e}();function imt(){var e;window!==void 0&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),e===void 0?window.requestAnimationFrame=function(r){r()}:window.requestAnimationFrame=e}var smt=function(){function e(r,t){ft(this,e),imt(),this.body=r,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},qn(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=yl(function(){var i;t.zooming=!1,nt(i=t._requestRedraw).call(i,t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",nt(n=this._requestRedraw).call(n,this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];tg(n,this.options,t)}}},{key:"_requestNextFrame",value:function(t,n){if(!(typeof window>"u")){var i,s=window;return this.requiresTimeout===!0?i=yl(t,n):s.requestAnimationFrame&&(i=s.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var t;this.renderTimer=this._requestNextFrame(nt(t=this._renderStep).call(t,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var n={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,s,o),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var a=this._drawNodes(i,t),l=a.drawExternalLabels;n.drawExternalLabels=l}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),n.drawExternalLabels!=null&&n.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,s,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var n=this.body.nodes,i;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=n[s],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.nodes,s=this.body.nodeIndices,o,a=[],l=[],u=20,f=this.canvas.DOMtoCanvas({x:-u,y:-u}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),p={top:f.y,left:f.x,bottom:c.y,right:c.x},y=[],w=0;w<s.length;w++)if(o=i[s[w]],o.hover)l.push(s[w]);else if(o.isSelected())a.push(s[w]);else if(n===!0){var b=o.draw(t);b.drawExternalLabel!=null&&y.push(b.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(p)===!0){var T=o.draw(t);T.drawExternalLabel!=null&&y.push(T.drawExternalLabel)}else o.updateBoundingBox(t,o.selected);var _,A=a.length,x=l.length;for(_=0;_<A;_++){o=i[a[_]];var I=o.draw(t);I.drawExternalLabel!=null&&y.push(I.drawExternalLabel)}for(_=0;_<x;_++){o=i[l[_]];var O=o.draw(t);O.drawExternalLabel!=null&&y.push(O.drawExternalLabel)}return{drawExternalLabels:function(){for(var g=0,M=y;g<M.length;g++){var B=M[g];B()}}}}},{key:"_drawEdges",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.draw(t)}}},{key:"_drawArrows",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,Sr(t).call(t,"msie 9.0")!=-1?this.requiresTimeout=!0:Sr(t).call(t,"safari")!=-1&&Sr(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var n=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),e}(),n3={},omt={get exports(){return n3},set exports(e){n3=e}},amt=Er,lmt=amt.setInterval;(function(e){e.exports=lmt})(omt);var umt=Pt(n3);function X$(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function Iee(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}var cmt=function(){function e(r){ft(this,e),this.body=r,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},qn(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.once("resize",function(i){i.width!==0&&(t.body.view.translation.x=i.width*.5),i.height!==0&&(t.body.view.translation.y=i.height*.5)}),this.body.emitter.on("setSize",nt(n=this.setSize).call(n,this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var n=this;if(t!==void 0){var i=["width","height","autoResize"];tg(i,this.options,t)}if(this._cleanUp(),this.options.autoResize===!0){var s;if(window.ResizeObserver){var o=new ResizeObserver(function(){var f=n.setSize();f===!0&&n.body.emitter.emit("_requestRedraw")}),a=this.frame;o.observe(a),this._cleanupCallbacks.push(function(){o.unobserve(a)})}else{var l=umt(function(){var f=n.setSize();f===!0&&n.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(l)})}var u=nt(s=this._onResize).call(s,this);bft(window,"resize",u),this._cleanupCallbacks.push(function(){wft(window,"resize",u)})}}},{key:"_cleanUp",value:function(){var t,n,i;Kr(t=wh(n=du(i=this._cleanupCallbacks).call(i,0)).call(n)).call(t,function(s){try{s()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;t!=1&&n!=1?i=this.cameraState.scale*.5*(t+n):t!=1?i=this.cameraState.scale*t:n!=1&&(i=this.cameraState.scale*n),this.body.view.scale=i;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(Sr(t).call(t,"%")!==-1||Sr(t).call(t,"px")!==-1)return t;if(Sr(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Pp(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Pp.DIRECTION_ALL}),X$(this.hammer,function(n){t.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){t.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){t.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){t.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){t.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){t.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){t.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){t.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("wheel",function(n){t.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){t.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){t.body.eventListeners.onContext(n)}),this.hammerFrame=new Pp(this.frame),Iee(this.hammerFrame,function(n){t.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),n=this._prepareValue(n);var i=!1,s=this.frame.canvas.width,o=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||n!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=t,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==l||this.frame.canvas.height!==u)&&this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,i=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),e}();function fmt(e,r){var t=qn({nodes:r,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},e??{});if(!Fr(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=r),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}var hmt=function(){function e(r,t){var n,i=this,s;ft(this,e),this.body=r,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",nt(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",nt(s=this.releaseNode).call(s,this))}return ht(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=fmt(t,this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight,o,a;if(i===0||s===0)a=1,o=as.getRange(this.body.nodes,t.nodes);else if(n===!0){var l=0;for(var u in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,u)){var f=this.body.nodes[u];f.predefinedPosition===!0&&(l+=1)}if(l>.5*this.body.nodeIndices.length){this.fit(t,!1);return}o=as.getRange(this.body.nodes,t.nodes);var c=this.body.nodeIndices.length;a=12.662/(c+7.4147)+.0964822;var p=Math.min(i/600,s/600);a*=p}else{this.body.emitter.emit("_resizeNodes"),o=as.getRange(this.body.nodes,t.nodes);var y=Math.abs(o.maxX-o.minX)*1.1,w=Math.abs(o.maxY-o.minY)*1.1,b=i/y,T=s/w;a=b<=T?b:T}a>t.maxZoomLevel?a=t.maxZoomLevel:a<t.minZoomLevel&&(a=t.minZoomLevel);var _=as.findCenter(o),A={position:_,scale:a,animation:t.animation};this.moveTo(A)}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};n.position=i,n.lockedOnNode=t,this.moveTo(n)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(t===void 0){t={};return}if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!nh(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!nh(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!nh(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!nh(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(t!==void 0){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.position.x,y:n.y-t.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},t.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=nt(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=nt(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.x,y:n.y-t.y},s=this.body.view.translation,o={x:s.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var n=xft[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var i;this.viewFunction=nt(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function Qj(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(f){u(f,"keydown")},l=function(f){u(f,"keyup")},u=function(f,c){if(i[c][f.keyCode]!==void 0){for(var p=i[c][f.keyCode],y=0;y<p.length;y++)(p[y].shift===void 0||p[y].shift==!0&&f.shiftKey==!0||p[y].shift==!1&&f.shiftKey==!1)&&p[y].fn(f);r==!0&&f.preventDefault()}};return n.bind=function(f,c,p){if(p===void 0&&(p="keydown"),s[f]===void 0)throw new Error("unsupported key: "+f);i[p][s[f].code]===void 0&&(i[p][s[f].code]=[]),i[p][s[f].code].push({fn:c,shift:s[f].shift})},n.bindAll=function(f,c){c===void 0&&(c="keydown");for(var p in s)s.hasOwnProperty(p)&&n.bind(p,f,c)},n.getKey=function(f){for(var c in s)if(s.hasOwnProperty(c)){if(f.shiftKey==!0&&s[c].shift==!0&&f.keyCode==s[c].code)return c;if(f.shiftKey==!1&&s[c].shift==!1&&f.keyCode==s[c].code)return c;if(f.keyCode==s[c].code&&c=="shift")return c}return"unknown key, currently not supported"},n.unbind=function(f,c,p){if(p===void 0&&(p="keydown"),s[f]===void 0)throw new Error("unsupported key: "+f);if(c!==void 0){var y=[],w=i[p][s[f].code];if(w!==void 0)for(var b=0;b<w.length;b++)w[b].fn==c&&w[b].shift==s[f].shift||y.push(i[p][s[f].code][b]);i[p][s[f].code]=y}else i[p][s[f].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",a,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",a,!0),t.addEventListener("keyup",l,!0),n}var dmt=function(){function e(r,t){var n=this;ft(this,e),this.body=r,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return ht(e,[{key:"setOptions",value:function(t){t!==void 0&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var n=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var s=0;s<n.length;s++){this.navigationDOM[n[s]]=document.createElement("div"),this.navigationDOM[n[s]].className="vis-button vis-"+n[s],this.navigationDOM.wrapper.appendChild(this.navigationDOM[n[s]]);var o=new Pp(this.navigationDOM[n[s]]);if(i[s]==="_fit"){var a;X$(o,nt(a=this._fit).call(a,this))}else{var l;X$(o,nt(l=this.bindToRedraw).call(l,this,i[s]))}this.navigationHammers.push(o)}var u=new Pp(this.canvas.frame);Iee(u,function(){t._stopMovement()}),this.navigationHammers.push(u),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){if(this.boundFunctions[t]===void 0){var n;this.boundFunctions[t]=nt(n=this[t]).call(n,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,n=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,n=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=Qj({container:window,preventDefault:!0}):this.keycharm=Qj({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var n,i,s,o,a,l,u,f,c,p,y,w,b,T,_,A,x,I,O,C,g,M,B,L;nt(n=this.keycharm).call(n,"up",function(){t.bindToRedraw("_moveUp")},"keydown"),nt(i=this.keycharm).call(i,"down",function(){t.bindToRedraw("_moveDown")},"keydown"),nt(s=this.keycharm).call(s,"left",function(){t.bindToRedraw("_moveLeft")},"keydown"),nt(o=this.keycharm).call(o,"right",function(){t.bindToRedraw("_moveRight")},"keydown"),nt(a=this.keycharm).call(a,"=",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(l=this.keycharm).call(l,"num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(u=this.keycharm).call(u,"num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(f=this.keycharm).call(f,"-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(c=this.keycharm).call(c,"[",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(p=this.keycharm).call(p,"]",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(y=this.keycharm).call(y,"pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(w=this.keycharm).call(w,"pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(b=this.keycharm).call(b,"up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),nt(T=this.keycharm).call(T,"down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),nt(_=this.keycharm).call(_,"left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),nt(A=this.keycharm).call(A,"right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),nt(x=this.keycharm).call(x,"=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(I=this.keycharm).call(I,"num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(O=this.keycharm).call(O,"num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(C=this.keycharm).call(C,"-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(g=this.keycharm).call(g,"[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(M=this.keycharm).call(M,"]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(B=this.keycharm).call(B,"pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(L=this.keycharm).call(L,"pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}]),e}();function pmt(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=vmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function vmt(e,r){var t;if(e){if(typeof e=="string")return eH(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eH(e,r)}}function eH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var gmt=function(){function e(r,t,n){var i,s,o,a,l,u,f,c,p,y,w,b,T;ft(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new dmt(r,t),this.body.eventListeners.onTap=nt(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=nt(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=nt(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=nt(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=nt(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=nt(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=nt(f=this.onDragEnd).call(f,this),this.body.eventListeners.onMouseWheel=nt(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=nt(p=this.onPinch).call(p,this),this.body.eventListeners.onMouseMove=nt(y=this.onMouseMove).call(y,this),this.body.eventListeners.onRelease=nt(w=this.onRelease).call(w,this),this.body.eventListeners.onContext=nt(b=this.onContext).call(b,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=nt(T=this.getPointer).call(T,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},qn(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];V$(n,this.options,t),Fo(this.options,t,"keyboard"),t.tooltip&&(qn(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=I5(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-yft(this.canvas.frame.canvas),y:t.y-mft(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n)}},{key:"onDoubleTap",value:function(t){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,n)}},{key:"onHold",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n),this.selectionHandler.generateClickEvent("hold",t,n)}},{key:"onRelease",value:function(t){if(new Date().valueOf()-this.touchTime>10){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,n),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(t){var n=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,n)}},{key:"checkSelectionChanges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,n){var i=function(o,a){for(var l=[],u=0;u<o.length;u++){var f=o[u];Sr(a).call(a,f)===-1&&l.push(f)}return l};return{nodes:i(t.nodes,n.nodes),edges:i(t.edges,n.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(t);var n=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=qn({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(n!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=n.id,n.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[n.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var s=pmt(this.selectionHandler.getSelectedNodes()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l={id:a.id,node:a,x:a.x,y:a.y,xFixed:a.options.fixed.x,yFixed:a.options.fixed.y};a.options.fixed.x=!0,a.options.fixed.y=!0,this.drag.selection.push(l)}}catch(u){s.e(u)}finally{s.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var n=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;Kr(s).call(s,function(f){var c=f.node;f.xFixed===!1&&(c.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(f.x)+o)),f.yFixed===!1&&(c.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(f.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}var l=i.x-this.drag.pointer.x,u=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+l,y:this.drag.translation.y+u},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var n=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var s=this.body.selectionBox.position,o={minX:Math.min(s.start.x,s.end.x),minY:Math.min(s.start.y,s.end.y),maxX:Math.max(s.start.x,s.end.x),maxY:Math.max(s.start.y,s.end.y)},a=Os(i=this.body.nodeIndices).call(i,function(f){var c=n.body.nodes[f];return c.x>=o.minX&&c.x<=o.maxX&&c.y>=o.minY&&c.y<=o.maxY});Kr(a).call(a,function(f){return n.selectionHandler.selectObject(n.body.nodes[f])});var l=this.getPointer(t.center);this.selectionHandler.commitAndEmit(l,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var u=this.drag.selection;u&&u.length?(Kr(u).call(u,function(f){f.node.options.fixed.x=f.xFixed,f.node.options.fixed.y=f.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var n=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,n)}},{key:"zoom",value:function(t,n){if(this.options.zoomView===!0){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var s=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,a=t/i,l=(1-a)*n.x+o.x*a,u=(1-a)*n.y+o.y*a;if(this.body.view.scale=t,this.body.view.translation={x:l,y:u},s!=null){var f=this.canvas.canvasToDOM(s);this.drag.pointer.x=f.x,this.drag.pointer.y=f.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:n}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:n})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){if(t.deltaY!==0){var n=this.body.view.scale;n*=1+(t.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var n=this,i=this.getPointer({x:t.clientX,y:t.clientY}),s=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(s=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),s===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=yl(function(){return n._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var n=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),s={left:n,top:i,right:n,bottom:i},o=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,l="node";if(this.popupObj===void 0){for(var u=this.body.nodeIndices,f=this.body.nodes,c,p=[],y=0;y<u.length;y++)c=f[u[y]],c.isOverlappingWith(s)===!0&&(a=!0,c.getTitle()!==void 0&&p.push(u[y]));p.length>0&&(this.popupObj=f[p[p.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var w=this.body.edgeIndices,b=this.body.edges,T,_=[],A=0;A<w.length;A++)T=b[w[A]],T.isOverlappingWith(s)===!0&&T.connected===!0&&T.getTitle()!==void 0&&_.push(w[A]);_.length>0&&(this.popupObj=b[_[_.length-1]],l="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new Cft(this.canvas.frame)),this.popup.popupTargetType=l,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var n=this.selectionHandler._pointerToPositionObject(t),i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(n),i===!0)){var s=this.selectionHandler.getNodeAt(t);i=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(n));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),i3={},ymt={get exports(){return i3},set exports(e){i3=e}},mmt=NN,bmt=dee;mmt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},bmt);var wmt=Er,$mt=wmt.Set,_mt=$mt,xmt=_mt;(function(e){e.exports=xmt})(ymt);var qf=Pt(i3),s3={},Emt={get exports(){return s3},set exports(e){s3=e}},Smt=Ir,tH=RN,z1=pv.getWeakData,kmt=PN,Tmt=co,Imt=wb,kT=_i,Amt=CN,Aee=tf,rH=xi,Oee=ed,Omt=Oee.set,Cmt=Oee.getterFor,Pmt=Aee.find,Nmt=Aee.findIndex,Rmt=Smt([].splice),Dmt=0,U1=function(e){return e.frozen||(e.frozen=new Cee)},Cee=function(){this.entries=[]},TT=function(e,r){return Pmt(e.entries,function(t){return t[0]===r})};Cee.prototype={get:function(e){var r=TT(this,e);if(r)return r[1]},has:function(e){return!!TT(this,e)},set:function(e,r){var t=TT(this,e);t?t[1]=r:this.entries.push([e,r])},delete:function(e){var r=Nmt(this.entries,function(t){return t[0]===e});return~r&&Rmt(this.entries,r,1),!!~r}};var Bmt={getConstructor:function(e,r,t,n){var i=e(function(l,u){kmt(l,s),Omt(l,{type:r,id:Dmt++,frozen:void 0}),Imt(u)||Amt(u,l[n],{that:l,AS_ENTRIES:t})}),s=i.prototype,o=Cmt(r),a=function(l,u,f){var c=o(l),p=z1(Tmt(u),!0);return p===!0?U1(c).set(u,f):p[c.id]=f,l};return tH(s,{delete:function(l){var u=o(this);if(!kT(l))return!1;var f=z1(l);return f===!0?U1(u).delete(l):f&&rH(f,u.id)&&delete f[u.id]},has:function(u){var f=o(this);if(!kT(u))return!1;var c=z1(u);return c===!0?U1(f).has(u):c&&rH(c,f.id)}}),tH(s,t?{get:function(u){var f=o(this);if(kT(u)){var c=z1(u);return c===!0?U1(f).get(u):c?c[f.id]:void 0}},set:function(u,f){return a(this,u,f)}}:{add:function(u){return a(this,u,!0)}}),i}},Mmt=uee,nH=Yn,Pw=Ir,iH=RN,Lmt=pv,Fmt=NN,Pee=Bmt,W1=_i,q1=ed.enforce,jmt=Tr,Hmt=JX,Wb=Object,zmt=Array.isArray,K1=Wb.isExtensible,Nee=Wb.isFrozen,Umt=Wb.isSealed,Ree=Wb.freeze,Wmt=Wb.seal,sH={},oH={},qmt=!nH.ActiveXObject&&"ActiveXObject"in nH,Kg,Dee=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Bee=Fmt("WeakMap",Dee,Pee),tp=Bee.prototype,Nw=Pw(tp.set),Kmt=function(){return Mmt&&jmt(function(){var e=Ree([]);return Nw(new Bee,e,1),!Nee(e)})};if(Hmt)if(qmt){Kg=Pee.getConstructor(Dee,"WeakMap",!0),Lmt.enable();var aH=Pw(tp.delete),V1=Pw(tp.has),lH=Pw(tp.get);iH(tp,{delete:function(e){if(W1(e)&&!K1(e)){var r=q1(this);return r.frozen||(r.frozen=new Kg),aH(this,e)||r.frozen.delete(e)}return aH(this,e)},has:function(r){if(W1(r)&&!K1(r)){var t=q1(this);return t.frozen||(t.frozen=new Kg),V1(this,r)||t.frozen.has(r)}return V1(this,r)},get:function(r){if(W1(r)&&!K1(r)){var t=q1(this);return t.frozen||(t.frozen=new Kg),V1(this,r)?lH(this,r):t.frozen.get(r)}return lH(this,r)},set:function(r,t){if(W1(r)&&!K1(r)){var n=q1(this);n.frozen||(n.frozen=new Kg),V1(this,r)?Nw(this,r,t):n.frozen.set(r,t)}else Nw(this,r,t);return this}})}else Kmt()&&iH(tp,{set:function(r,t){var n;return zmt(r)&&(Nee(r)?n=sH:Umt(r)&&(n=oH)),Nw(this,r,t),n==sH&&Ree(r),n==oH&&Wmt(r),this}});var Vmt=Er,Gmt=Vmt.WeakMap,Ymt=Gmt,Zmt=Ymt;(function(e){e.exports=Zmt})(Emt);var Ay=Pt(s3);function Xr(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function o3(e,r,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,t):i?i.value=t:r.set(e,t),t}function a3(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=Xmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Xmt(e,r){var t;if(e){if(typeof e=="string")return uH(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uH(e,r)}}function uH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Rf,Oo,vc,gc,Rw;function cH(e,r){var t=new qf,n=a3(r),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e.has(s)||t.add(s)}}catch(o){n.e(o)}finally{n.f()}return t}var fH=function(){function e(){ft(this,e),Rf.set(this,new qf),Oo.set(this,new qf)}return ht(e,[{key:"size",get:function(){return Xr(this,Oo,"f").size}},{key:"add",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Xr(this,Oo,"f").add(a)}}},{key:"delete",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Xr(this,Oo,"f").delete(a)}}},{key:"clear",value:function(){Xr(this,Oo,"f").clear()}},{key:"getSelection",value:function(){return ll(Xr(this,Oo,"f"))}},{key:"getChanges",value:function(){return{added:ll(cH(Xr(this,Rf,"f"),Xr(this,Oo,"f"))),deleted:ll(cH(Xr(this,Oo,"f"),Xr(this,Rf,"f"))),previous:ll(new qf(Xr(this,Rf,"f"))),current:ll(new qf(Xr(this,Oo,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();o3(this,Rf,Xr(this,Oo,"f"),"f"),o3(this,Oo,new qf(Xr(this,Rf,"f")),"f");var n=a3(t.added),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s.select()}}catch(u){n.e(u)}finally{n.f()}var o=a3(t.deleted),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.unselect()}}catch(u){o.e(u)}finally{o.f()}return t}}]),e}();Rf=new Ay,Oo=new Ay;var Jmt=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ft(this,e),vc.set(this,new fH),gc.set(this,new fH),Rw.set(this,void 0),o3(this,Rw,r,"f")}return ht(e,[{key:"sizeNodes",get:function(){return Xr(this,vc,"f").size}},{key:"sizeEdges",get:function(){return Xr(this,gc,"f").size}},{key:"getNodes",value:function(){return Xr(this,vc,"f").getSelection()}},{key:"getEdges",value:function(){return Xr(this,gc,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=Xr(this,vc,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=Xr(this,gc,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){Xr(this,vc,"f").delete(t)}},{key:"deleteEdges",value:function(t){Xr(this,gc,"f").delete(t)}},{key:"clear",value:function(){Xr(this,vc,"f").clear(),Xr(this,gc,"f").clear()}},{key:"commit",value:function(){for(var t,n,i={nodes:Xr(this,vc,"f").commit(),edges:Xr(this,gc,"f").commit()},s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(t=Xr(this,Rw,"f")).call.apply(t,gN(n=[this,i]).call(n,o)),i}}]),e}();vc=new Ay,gc=new Ay,Rw=new Ay;function hH(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=Qmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Qmt(e,r){var t;if(e){if(typeof e=="string")return dH(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dH(e,r)}}function dH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var ebt=function(){function e(r,t){var n=this;ft(this,e),this.body=r,this.canvas=t,this._selectionAccumulator=new Jmt,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},qn(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return ht(e,[{key:"setOptions",value:function(t){if(t!==void 0){var n=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];tg(n,this.options,t)}}},{key:"selectOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(n=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return n}},{key:"selectAdditionalOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(n=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return n}},{key:"_initBaseEvent",value:function(t,n){var i={};return i.pointer={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)},i.event=t,i}},{key:"generateClickEvent",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this._initBaseEvent(n,i);if(o===!0)a.nodes=[],a.edges=[];else{var l=this.getSelection();a.nodes=l.nodes,a.edges=l.edges}s!==void 0&&(a.previousSelection=s),t=="click"&&(a.items=this.getClickedItems(i)),n.controlEdge!==void 0&&(a.controlEdge=n.controlEdge),this.body.emitter.emit(t,a)}},{key:"selectObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(t!==void 0){if(t instanceof Ks){if(n===!0){var i;(i=this._selectionAccumulator).addEdges.apply(i,ll(t.edges))}this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var n=[],i=this.body.nodes,s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}return n}},{key:"_pointerToPositionObject",value:function(t){var n=this.canvas.DOMtoCanvas(t);return{left:n.x-1,top:n.y+1,right:n.x+1,bottom:n.y-1}}},{key:"getNodeAt",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._pointerToPositionObject(t),s=this._getAllNodesOverlappingWith(i);if(s.length>0)return n===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}},{key:"_getEdgesOverlappingWith",value:function(t,n){for(var i=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var o=this.body.edgeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var n=[];return this._getEdgesOverlappingWith(t,n),n}},{key:"getEdgeAt",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.canvas.DOMtoCanvas(t),s=10,o=null,a=this.body.edges,l=0;l<this.body.edgeIndices.length;l++){var u=this.body.edgeIndices[l],f=a[u];if(f.connected){var c=f.from.x,p=f.from.y,y=f.to.x,w=f.to.y,b=f.edgeType.getDistanceToEdge(c,p,y,w,i.x,i.y);b<s&&(o=u,s=b)}}if(o!==null)return n===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(t){t instanceof Ks?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){if(t instanceof Ks){var n;this._selectionAccumulator.deleteNodes(t),(n=this._selectionAccumulator).deleteEdges.apply(n,ll(t.edges))}else this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n);i.hover===!0&&(i.hover=!1,i instanceof Ks?(s.node=i.id,this.body.emitter.emit("blurNode",s)):(s.edge=i.id,this.body.emitter.emit("blurEdge",s)))}},{key:"emitHoverEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n),o=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof Ks?(s.node=i.id,this.body.emitter.emit("hoverNode",s)):(s.edge=i.id,this.body.emitter.emit("hoverEdge",s))),o}},{key:"hoverObject",value:function(t,n){var i=this.getNodeAt(n);i===void 0&&(i=this.getEdgeAt(n));var s=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(i===void 0||i instanceof Ks&&i.id!=o||i instanceof Np)&&(this.emitBlurEvent(t,n,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],s=!0);for(var a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(s===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(i===void 0||i instanceof Np&&i.id!=a||i instanceof Ks&&!i.hover)&&(this.emitBlurEvent(t,n,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],s=!0));if(i!==void 0){var l=bn(this.hoverObj.edges).length,u=bn(this.hoverObj.nodes).length,f=i instanceof Np&&l===0&&u===0,c=i instanceof Ks&&l===0&&u===0;(s||f||c)&&(s=this.emitHoverEvent(t,n,i)),i instanceof Ks&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}s===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,n){var i=!1,s=this._selectionAccumulator.commit(),o={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",n,t,o),i=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",n,t,o),i=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",n,t),i=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",n,t),i=!0),i===!0&&this.generateClickEvent("select",n,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return uv(t=this._selectionAccumulator.getNodes()).call(t,function(n){return n.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return uv(t=this._selectionAccumulator.getEdges()).call(t,function(n){return n.id})}},{key:"setSelection",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((n.unselectAll||n.unselectAll===void 0)&&this.unselectAll(),t.nodes){var i=hH(t.nodes),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.body.nodes[o];if(!a)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(a,n.highlightEdges)}}catch(p){i.e(p)}finally{i.f()}}if(t.edges){var l=hH(t.edges),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=this.body.edges[f];if(!c)throw new RangeError('Edge with id "'+f+'" not found');this.selectObject(c)}}catch(p){l.e(p)}finally{l.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:n})}},{key:"selectEdges",value:function(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var n in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,n.id)||this._selectionAccumulator.deleteEdges(n)}},{key:"getClickedItems",value:function(t){for(var n=this.canvas.DOMtoCanvas(t),i=[],s=this.body.nodeIndices,o=this.body.nodes,a=s.length-1;a>=0;a--){var l=o[s[a]],u=l.getItemsOnPoint(n);i.push.apply(i,u)}for(var f=this.body.edgeIndices,c=this.body.edges,p=f.length-1;p>=0;p--){var y=c[f[p]],w=y.getItemsOnPoint(n);i.push.apply(i,w)}return i}}]),e}(),l3={},tbt={get exports(){return l3},set exports(e){l3=e}},pH=$J,rbt=Math.floor,u3=function(e,r){var t=e.length,n=rbt(t/2);return t<8?nbt(e,r):ibt(e,u3(pH(e,0,n),r),u3(pH(e,n),r),r)},nbt=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},ibt=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},sbt=u3,obt=_b,vH=obt.match(/firefox\/(\d+)/i),abt=!!vH&&+vH[1],lbt=_b,ubt=/MSIE|Trident/.test(lbt),cbt=_b,gH=cbt.match(/AppleWebKit\/(\d+)\./),fbt=!!gH&&+gH[1],hbt=Ht,Mee=Ir,dbt=Jh,pbt=uo,yH=Ma,vbt=pQ,mH=kl,jN=Tr,gbt=sbt,ybt=Qv,bH=abt,mbt=ubt,wH=xb,$H=fbt,Tc=[],_H=Mee(Tc.sort),bbt=Mee(Tc.push),wbt=jN(function(){Tc.sort(void 0)}),$bt=jN(function(){Tc.sort(null)}),_bt=ybt("sort"),Lee=!jN(function(){if(wH)return wH<70;if(!(bH&&bH>3)){if(mbt)return!0;if($H)return $H<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Tc.push({k:t+i,v:n})}for(Tc.sort(function(s,o){return o.v-s.v}),i=0;i<Tc.length;i++)t=Tc[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),xbt=wbt||!$bt||!_bt||!Lee,Ebt=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:mH(r)>mH(t)?1:-1}};hbt({target:"Array",proto:!0,forced:xbt},{sort:function(r){r!==void 0&&dbt(r);var t=pbt(this);if(Lee)return r===void 0?_H(t):_H(t,r);var n=[],i=yH(t),s,o;for(o=0;o<i;o++)o in t&&bbt(n,t[o]);for(gbt(n,Ebt(r)),s=yH(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)vbt(t,o++);return t}});var Sbt=Ei,kbt=Sbt("Array").sort,Tbt=Mn,Ibt=kbt,IT=Array.prototype,Abt=function(e){var r=e.sort;return e===IT||Tbt(IT,e)&&r===IT.sort?Ibt:r},Obt=Abt,Cbt=Obt;(function(e){e.exports=Cbt})(tbt);var AT=Pt(l3),c3={},Pbt={get exports(){return c3},set exports(e){c3=e}},Nbt=Jh,Rbt=uo,Dbt=Rx,Bbt=Ma,Mbt=TypeError,xH=function(e){return function(r,t,n,i){Nbt(t);var s=Rbt(r),o=Dbt(s),a=Bbt(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw Mbt("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},Lbt={left:xH(!1),right:xH(!0)},Fbt=Nu,jbt=typeof process<"u"&&Fbt(process)=="process",Hbt=Ht,zbt=Lbt.left,Ubt=Qv,EH=xb,Wbt=jbt,qbt=!Wbt&&EH>79&&EH<83,Kbt=qbt||!Ubt("reduce");Hbt({target:"Array",proto:!0,forced:Kbt},{reduce:function(r){var t=arguments.length;return zbt(this,r,t,t>1?arguments[1]:void 0)}});var Vbt=Ei,Gbt=Vbt("Array").reduce,Ybt=Mn,Zbt=Gbt,OT=Array.prototype,Xbt=function(e){var r=e.reduce;return e===OT||Ybt(OT,e)&&r===OT.reduce?Zbt:r},Jbt=Xbt,Qbt=Jbt;(function(e){e.exports=Qbt})(Pbt);var Fee=Pt(c3),bm={},e0t={get exports(){return bm},set exports(e){bm=e}},jee={};(function(e){(function(r,t){t(e)})(fC,function(r){r.__esModule=!0,r.sort=T;function t(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var n=32,i=7,s=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(_){return _<1e5?_<100?_<10?0:1:_<1e4?_<1e3?2:3:4:_<1e7?_<1e6?5:6:_<1e9?_<1e8?7:8:9}function l(_,A){if(_===A)return 0;if(~~_===_&&~~A===A){if(_===0||A===0)return _<A?-1:1;if(_<0||A<0){if(A>=0)return-1;if(_>=0)return 1;_=-_,A=-A}var x=a(_),I=a(A),O=0;return x<I?(_*=o[I-x-1],A/=10,O=-1):x>I&&(A*=o[x-I-1],_/=10,O=1),_===A?O:_<A?-1:1}var C=String(_),g=String(A);return C===g?0:C<g?-1:1}function u(_){for(var A=0;_>=n;)A|=_&1,_>>=1;return _+A}function f(_,A,x,I){var O=A+1;if(O===x)return 1;if(I(_[O++],_[A])<0){for(;O<x&&I(_[O],_[O-1])<0;)O++;c(_,A,O)}else for(;O<x&&I(_[O],_[O-1])>=0;)O++;return O-A}function c(_,A,x){for(x--;A<x;){var I=_[A];_[A++]=_[x],_[x--]=I}}function p(_,A,x,I,O){for(I===A&&I++;I<x;I++){for(var C=_[I],g=A,M=I;g<M;){var B=g+M>>>1;O(C,_[B])<0?M=B:g=B+1}var L=I-g;switch(L){case 3:_[g+3]=_[g+2];case 2:_[g+2]=_[g+1];case 1:_[g+1]=_[g];break;default:for(;L>0;)_[g+L]=_[g+L-1],L--}_[g]=C}}function y(_,A,x,I,O,C){var g=0,M=0,B=1;if(C(_,A[x+O])>0){for(M=I-O;B<M&&C(_,A[x+O+B])>0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M),g+=O,B+=O}else{for(M=O+1;B<M&&C(_,A[x+O-B])<=0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M);var L=g;g=O-B,B=O-L}for(g++;g<B;){var q=g+(B-g>>>1);C(_,A[x+q])>0?g=q+1:B=q}return B}function w(_,A,x,I,O,C){var g=0,M=0,B=1;if(C(_,A[x+O])<0){for(M=O+1;B<M&&C(_,A[x+O-B])<0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M);var L=g;g=O-B,B=O-L}else{for(M=I-O;B<M&&C(_,A[x+O+B])>=0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M),g+=O,B+=O}for(g++;g<B;){var q=g+(B-g>>>1);C(_,A[x+q])<0?B=q:g=q+1}return B}var b=function(){function _(A,x){t(this,_),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=s,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=A,this.compare=x,this.length=A.length,this.length<2*s&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return _.prototype.pushRun=function(x,I){this.runStart[this.stackSize]=x,this.runLength[this.stackSize]=I,this.stackSize+=1},_.prototype.mergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;if(x>=1&&this.runLength[x-1]<=this.runLength[x]+this.runLength[x+1]||x>=2&&this.runLength[x-2]<=this.runLength[x]+this.runLength[x-1])this.runLength[x-1]<this.runLength[x+1]&&x--;else if(this.runLength[x]>this.runLength[x+1])break;this.mergeAt(x)}},_.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;x>0&&this.runLength[x-1]<this.runLength[x+1]&&x--,this.mergeAt(x)}},_.prototype.mergeAt=function(x){var I=this.compare,O=this.array,C=this.runStart[x],g=this.runLength[x],M=this.runStart[x+1],B=this.runLength[x+1];this.runLength[x]=g+B,x===this.stackSize-3&&(this.runStart[x+1]=this.runStart[x+2],this.runLength[x+1]=this.runLength[x+2]),this.stackSize--;var L=w(O[M],O,C,g,0,I);C+=L,g-=L,g!==0&&(B=y(O[C+g-1],O,M,B,B-1,I),B!==0&&(g<=B?this.mergeLow(C,g,M,B):this.mergeHigh(C,g,M,B)))},_.prototype.mergeLow=function(x,I,O,C){var g=this.compare,M=this.array,B=this.tmp,L=0;for(L=0;L<I;L++)B[L]=M[x+L];var q=0,Q=O,te=x;if(M[te++]=M[Q++],--C===0){for(L=0;L<I;L++)M[te+L]=B[q+L];return}if(I===1){for(L=0;L<C;L++)M[te+L]=M[Q+L];M[te+C]=B[q];return}for(var X=this.minGallop;;){var j=0,Z=0,ie=!1;do if(g(M[Q],B[q])<0){if(M[te++]=M[Q++],Z++,j=0,--C===0){ie=!0;break}}else if(M[te++]=B[q++],j++,Z=0,--I===1){ie=!0;break}while((j|Z)<X);if(ie)break;do{if(j=w(M[Q],B,q,I,0,g),j!==0){for(L=0;L<j;L++)M[te+L]=B[q+L];if(te+=j,q+=j,I-=j,I<=1){ie=!0;break}}if(M[te++]=M[Q++],--C===0){ie=!0;break}if(Z=y(B[q],M,Q,C,0,g),Z!==0){for(L=0;L<Z;L++)M[te+L]=M[Q+L];if(te+=Z,Q+=Z,C-=Z,C===0){ie=!0;break}}if(M[te++]=B[q++],--I===1){ie=!0;break}X--}while(j>=i||Z>=i);if(ie)break;X<0&&(X=0),X+=2}if(this.minGallop=X,X<1&&(this.minGallop=1),I===1){for(L=0;L<C;L++)M[te+L]=M[Q+L];M[te+C]=B[q]}else{if(I===0)throw new Error("mergeLow preconditions were not respected");for(L=0;L<I;L++)M[te+L]=B[q+L]}},_.prototype.mergeHigh=function(x,I,O,C){var g=this.compare,M=this.array,B=this.tmp,L=0;for(L=0;L<C;L++)B[L]=M[O+L];var q=x+I-1,Q=C-1,te=O+C-1,X=0,j=0;if(M[te--]=M[q--],--I===0){for(X=te-(C-1),L=0;L<C;L++)M[X+L]=B[L];return}if(C===1){for(te-=I,q-=I,j=te+1,X=q+1,L=I-1;L>=0;L--)M[j+L]=M[X+L];M[te]=B[Q];return}for(var Z=this.minGallop;;){var ie=0,_e=0,we=!1;do if(g(B[Q],M[q])<0){if(M[te--]=M[q--],ie++,_e=0,--I===0){we=!0;break}}else if(M[te--]=B[Q--],_e++,ie=0,--C===1){we=!0;break}while((ie|_e)<Z);if(we)break;do{if(ie=I-w(B[Q],M,x,I,I-1,g),ie!==0){for(te-=ie,q-=ie,I-=ie,j=te+1,X=q+1,L=ie-1;L>=0;L--)M[j+L]=M[X+L];if(I===0){we=!0;break}}if(M[te--]=B[Q--],--C===1){we=!0;break}if(_e=C-y(M[q],B,0,C,C-1,g),_e!==0){for(te-=_e,Q-=_e,C-=_e,j=te+1,X=Q+1,L=0;L<_e;L++)M[j+L]=B[X+L];if(C<=1){we=!0;break}}if(M[te--]=M[q--],--I===0){we=!0;break}Z--}while(ie>=i||_e>=i);if(we)break;Z<0&&(Z=0),Z+=2}if(this.minGallop=Z,Z<1&&(this.minGallop=1),C===1){for(te-=I,q-=I,j=te+1,X=q+1,L=I-1;L>=0;L--)M[j+L]=M[X+L];M[te]=B[Q]}else{if(C===0)throw new Error("mergeHigh preconditions were not respected");for(X=te-(C-1),L=0;L<C;L++)M[X+L]=B[L]}},_}();function T(_,A,x,I){if(!Array.isArray(_))throw new TypeError("Can only sort arrays");A?typeof A!="function"&&(I=x,x=A,A=l):A=l,x||(x=0),I||(I=_.length);var O=I-x;if(!(O<2)){var C=0;if(O<n){C=f(_,x,I,A),p(_,x,I,x+C,A);return}var g=new b(_,A),M=u(O);do{if(C=f(_,x,I,A),C<M){var B=O;B>M&&(B=M),p(_,x,x+B,x+C,A),C=B}g.pushRun(x,C),g.mergeRuns(),O-=C,x+=C}while(O!==0);g.forceMergeRuns()}}})})(jee);(function(e){e.exports=jee})(e0t);var SH=Pt(bm);function Hee(e){var r=t0t();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return jr(this,i)}}function t0t(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var zee=function(){function e(){ft(this,e)}return ht(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,n,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,n){this.fake_use(t,n),this.abstract()}},{key:"shift",value:function(t,n){this.fake_use(t,n),this.abstract()}}]),e}(),r0t=function(e){Or(t,e);var r=Hee(t);function t(n){var i;return ft(this,t),i=r.call(this),i.layout=n,i}return ht(t,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.x=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_x,max:s.max_x}}},{key:"sort",value:function(i){bm.sort(i,function(s,o){return s.x-o.x})}},{key:"fix",value:function(i,s){i.y=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.y=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].x+=s}}]),t}(zee),n0t=function(e){Or(t,e);var r=Hee(t);function t(n){var i;return ft(this,t),i=r.call(this),i.layout=n,i}return ht(t,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.y=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_y,max:s.max_y}}},{key:"sort",value:function(i){bm.sort(i,function(s,o){return s.y-o.y})}},{key:"fix",value:function(i,s){i.x=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.x=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].y+=s}}]),t}(zee),f3={},i0t={get exports(){return f3},set exports(e){f3=e}},s0t=Ht,o0t=tf.every,a0t=Qv,l0t=a0t("every");s0t({target:"Array",proto:!0,forced:!l0t},{every:function(r){return o0t(this,r,arguments.length>1?arguments[1]:void 0)}});var u0t=Ei,c0t=u0t("Array").every,f0t=Mn,h0t=c0t,CT=Array.prototype,d0t=function(e){var r=e.every;return e===CT||f0t(CT,e)&&r===CT.every?h0t:r},p0t=d0t,v0t=p0t;(function(e){e.exports=v0t})(i0t);var Uee=Pt(f3);function g0t(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=y0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function y0t(e,r){var t;if(e){if(typeof e=="string")return kH(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kH(e,r)}}function kH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function m0t(e,r){var t=new qf;return Kr(e).call(e,function(n){var i;Kr(i=n.edges).call(i,function(s){s.connected&&t.add(s)})}),Kr(t).call(t,function(n){var i=n.from.id,s=n.to.id;r[i]==null&&(r[i]=0),(r[s]==null||r[i]>=r[s])&&(r[s]=r[i]+1)}),r}function b0t(e){return Wee(function(r){var t,n;return Uee(t=Os(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.to===r})},function(r,t){return t>r},"from",e)}function w0t(e){return Wee(function(r){var t,n;return Uee(t=Os(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.from===r})},function(r,t){return t<r},"to",e)}function Wee(e,r,t,n){var i,s=$h(null),o=Fee(i=ll(mee(n).call(n))).call(i,function(y,w){return y+1+w.edges.length},0),a=t+"Id",l=t==="to"?1:-1,u=g0t(n),f;try{var c=function(){var w=wn(f.value,2),b=w[0],T=w[1];if(!n.has(b)||!e(T))return"continue";s[b]=0;for(var _=[T],A=0,x,I=function(){var g,M;if(!n.has(b))return"continue";var B=s[x.id]+l;if(Kr(g=Os(M=x.edges).call(M,function(L){return L.connected&&L.to!==L.from&&L[t]!==x&&n.has(L.toId)&&n.has(L.fromId)})).call(g,function(L){var q=L[a],Q=s[q];(Q==null||r(B,Q))&&(s[q]=B,_.push(L[t]))}),A>o)return{v:{v:m0t(n,s)}};++A};x=_.pop();){var O=I();if(O!=="continue"&&Dr(O)==="object")return O.v}};for(u.s();!(f=u.n()).done;){var p=c();if(p!=="continue"&&Dr(p)==="object")return p.v}}catch(y){u.e(y)}finally{u.f()}return s}var $0t=function(){function e(){ft(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return ht(e,[{key:"addRelation",value:function(t,n){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(n),this.parentReference[n]===void 0&&(this.parentReference[n]=[]),this.parentReference[n].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,n){n!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=n,this.treeIndex=Math.max(n,this.treeIndex))}},{key:"ensureLevel",value:function(t){this.levels[t]===void 0&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var n=this,i={},s=function o(a){if(i[a]!==void 0)return i[a];var l=n.levels[a];if(n.childrenReference[a]){var u=n.childrenReference[a];if(u.length>0)for(var f=0;f<u.length;f++)l=Math.max(l,o(u[f]))}return i[a]=l,l};return s(t)}},{key:"levelDownstream",value:function(t,n){this.levels[n.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[n.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var n=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.levels[i]!==void 0&&(n=Math.min(this.levels[i],n));for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.levels[s]!==void 0&&(this.levels[s]-=n)}},{key:"getTreeSize",value:function(t,n){var i=1e9,s=-1e9,o=1e9,a=-1e9;for(var l in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,l)&&this.trees[l]===n){var u=t[l];i=Math.min(u.x,i),s=Math.max(u.x,s),o=Math.min(u.y,o),a=Math.max(u.y,a)}return{min_x:i,max_x:s,min_y:o,max_y:a}}},{key:"hasSameParent",value:function(t,n){var i=this.parentReference[t.id],s=this.parentReference[n.id];if(i===void 0||s===void 0)return!1;for(var o=0;o<i.length;o++)for(var a=0;a<s.length;a++)if(i[o]==s[a])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,n){return this.trees[t.id]===this.trees[n.id]}},{key:"getLevels",value:function(){return bn(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,n){this.distributionOrdering[n]===void 0&&(this.distributionOrdering[n]=[]);var i=!1,s=this.distributionOrdering[n];for(var o in s)if(s[o]===t){i=!0;break}i||(this.distributionOrdering[n].push(t),this.distributionIndex[t.id]=this.distributionOrdering[n].length-1)}}]),e}(),_0t=function(){function e(r){ft(this,e),this.body=r,this._resetRNG(Math.random()+":"+U$()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},qn(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(t.options.hierarchical.enabled===!0){var n=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",n,!1)}})}},{key:"setOptions",value:function(t,n){if(t!==void 0){var i=this.options.hierarchical,s=i.enabled;if(tg(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Fo(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(n);if(s===!0)return this.body.emitter.emit("refresh"),Jr(n,this.optionsBackup)}return n}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=n2(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){var n=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:n.enabled===void 0?!0:n.enabled,solver:"hierarchicalRepulsion"},n.enabled=n.enabled===void 0?!0:n.enabled,n.solver=n.solver||"barnesHut"):Dr(t.physics)==="object"?(n.enabled=t.physics.enabled===void 0?!0:t.physics.enabled,n.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(n.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var s=t.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(i=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},t.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:i,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var n=t.length+50,i=0;i<t.length;i++){var s=t[i],o=2*Math.PI*this._rng();s.x===void 0&&(s.x=n*Math.cos(o)),s.y===void 0&&(s.y=n*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=this.body.nodeIndices,n=0,i=0;i<t.length;i++){var s=this.body.nodes[t[i]];s.predefinedPosition===!0&&(n+=1)}if(n<.5*t.length){var o=10,a=0,l=this.options.clusterThreshold,u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>l){for(var f=t.length;t.length>l&&a<=o;){a+=1;var c=t.length;a%3===0?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);var p=t.length;if(c==p&&a%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*f)})}a>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var y=70,w=0;w<t.length;w++){var b=this.body.nodes[t[w]];b.predefinedPosition===!1&&(b.x+=(.5-this._rng())*y,b.y+=(.5-this._rng())*y)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=as.getRangeCore(this.body.nodes,this.body.nodeIndices),n=as.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var s=this.body.nodes[this.body.nodeIndices[i]];s.x-=n.x,s.y-=n.y}}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var n=0;n<this.body.nodeIndices.length;n++)this.body.nodes[this.body.nodeIndices[n]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[n],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t,n,i=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new $0t;for(n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&(t=this.body.nodes[n],t.options.level!==void 0?(i=!0,this.hierarchical.levels[n]=t.options.level):s=!0);if(s===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(s===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);var l=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(l),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,n=!1,i={},s=function(){for(var x=a(),I=0,O=0;O<x.length-1;O++){var C=x[O].max-x[O+1].min;I+=C+t.options.hierarchical.treeSpacing,o(O+1,I)}},o=function(x,I){var O=t.hierarchical.trees;for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&O[C]===x&&t.direction.shift(C,I)},a=function(){for(var x=[],I=0;I<t.hierarchical.numTrees();I++)x.push(t.direction.getTreeSize(I));return x},l=function A(x,I){if(!I[x.id]&&(I[x.id]=!0,t.hierarchical.childrenReference[x.id])){var O=t.hierarchical.childrenReference[x.id];if(O.length>0)for(var C=0;C<O.length;C++)A(t.body.nodes[O[C]],I)}},u=function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,O=1e9,C=1e9,g=1e9,M=-1e9;for(var B in x)if(Object.prototype.hasOwnProperty.call(x,B)){var L=t.body.nodes[B],q=t.hierarchical.levels[L.id],Q=t.direction.getPosition(L),te=t._getSpaceAroundNode(L,x),X=wn(te,2),j=X[0],Z=X[1];O=Math.min(j,O),C=Math.min(Z,C),q<=I&&(g=Math.min(Q,g),M=Math.max(Q,M))}return[g,M,O,C]},f=function(x,I){var O=t.hierarchical.getMaxLevel(x.id),C=t.hierarchical.getMaxLevel(I.id);return Math.min(O,C)},c=function(x,I,O){for(var C=t.hierarchical,g=0;g<I.length;g++){var M=I[g],B=C.distributionOrdering[M];if(B.length>1)for(var L=0;L<B.length-1;L++){var q=B[L],Q=B[L+1];C.hasSameParent(q,Q)&&C.inSameSubNetwork(q,Q)&&x(q,Q,O)}}},p=function(x,I){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=t.direction.getPosition(x),g=t.direction.getPosition(I),M=Math.abs(g-C),B=t.options.hierarchical.nodeSpacing;if(M>B){var L={},q={};l(x,L),l(I,q);var Q=f(x,I),te=u(L,Q),X=u(q,Q),j=te[1],Z=X[0],ie=X[2],_e=Math.abs(j-Z);if(_e>B){var we=j-Z+B;we<-ie+B&&(we=-ie+B),we<0&&(t._shiftBlock(I.id,we),n=!0,O===!0&&t._centerParent(I))}}},y=function(x,I){for(var O=I.id,C=I.edges,g=t.hierarchical.levels[I.id],M=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,B={},L=[],q=0;q<C.length;q++){var Q=C[q];if(Q.toId!=Q.fromId){var te=Q.toId==O?Q.from:Q.to;B[C[q].id]=te,t.hierarchical.levels[te.id]<g&&L.push(Q)}}var X=function(ze,Ge){for(var it=0,xe=0;xe<Ge.length;xe++)if(B[Ge[xe].id]!==void 0){var ge=t.direction.getPosition(B[Ge[xe].id])-ze;it+=ge/Math.sqrt(ge*ge+M)}return it},j=function(ze,Ge){for(var it=0,xe=0;xe<Ge.length;xe++)if(B[Ge[xe].id]!==void 0){var ge=t.direction.getPosition(B[Ge[xe].id])-ze;it-=M*Math.pow(ge*ge+M,-1.5)}return it},Z=function(ze,Ge){for(var it=t.direction.getPosition(I),xe={},ge=0;ge<ze;ge++){var Te=X(it,Ge),Fe=j(it,Ge),$=40,S=Math.max(-$,Math.min($,Math.round(Te/Fe)));if(it=it-S,xe[it]!==void 0)break;xe[it]=ge}return it},ie=function(ze){var Ge=t.direction.getPosition(I);if(i[I.id]===void 0){var it={};l(I,it),i[I.id]=it}var xe=u(i[I.id]),ge=xe[2],Te=xe[3],Fe=ze-Ge,$=0;Fe>0?$=Math.min(Fe,Te-t.options.hierarchical.nodeSpacing):Fe<0&&($=-Math.min(-Fe,ge-t.options.hierarchical.nodeSpacing)),$!=0&&(t._shiftBlock(I.id,$),n=!0)},_e=function(ze){var Ge=t.direction.getPosition(I),it=t._getSpaceAroundNode(I),xe=wn(it,2),ge=xe[0],Te=xe[1],Fe=ze-Ge,$=Ge;Fe>0?$=Math.min(Ge+(Te-t.options.hierarchical.nodeSpacing),ze):Fe<0&&($=Math.max(Ge-(ge-t.options.hierarchical.nodeSpacing),ze)),$!==Ge&&(t.direction.setPosition(I,$),n=!0)},we=Z(x,L);ie(we),we=Z(x,C),_e(we)},w=function(x){var I=t.hierarchical.getLevels();I=wh(I).call(I);for(var O=0;O<x;O++){n=!1;for(var C=0;C<I.length;C++)for(var g=I[C],M=t.hierarchical.distributionOrdering[g],B=0;B<M.length;B++)y(1e3,M[B]);if(n!==!0)break}},b=function(x){var I=t.hierarchical.getLevels();I=wh(I).call(I);for(var O=0;O<x&&(n=!1,c(p,I,!0),n===!0);O++);},T=function(){for(var x in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,x)&&t._centerParent(t.body.nodes[x])},_=function(){var x=t.hierarchical.getLevels();x=wh(x).call(x);for(var I=0;I<x.length;I++)for(var O=x[I],C=t.hierarchical.distributionOrdering[O],g=0;g<C.length;g++)t._centerParent(C[g])};this.options.hierarchical.blockShifting===!0&&(b(5),T()),this.options.hierarchical.edgeMinimization===!0&&w(20),this.options.hierarchical.parentCentralization===!0&&_(),s()}},{key:"_getSpaceAroundNode",value:function(t,n){var i=!0;n===void 0&&(i=!1);var s=this.hierarchical.levels[t.id];if(s!==void 0){var o=this.hierarchical.distributionIndex[t.id],a=this.direction.getPosition(t),l=this.hierarchical.distributionOrdering[s],u=1e9,f=1e9;if(o!==0){var c=l[o-1];if(i===!0&&n[c.id]===void 0||i===!1){var p=this.direction.getPosition(c);u=a-p}}if(o!=l.length-1){var y=l[o+1];if(i===!0&&n[y.id]===void 0||i===!1){var w=this.direction.getPosition(y);f=Math.min(f,w-a)}}return[u,f]}else return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var n=this.hierarchical.parentReference[t.id],i=0;i<n.length;i++){var s=n[i],o=this.body.nodes[s],a=this.hierarchical.childrenReference[s];if(a!==void 0){var l=this._getCenterPosition(a),u=this.direction.getPosition(o),f=this._getSpaceAroundNode(o),c=wn(f,2),p=c[0],y=c[1],w=u-l;(w<0&&Math.abs(w)<y-this.options.hierarchical.nodeSpacing||w>0&&Math.abs(w)<p-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,l)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,s=bn(t[n]);s=this._indexArrayToNodes(s),AT(i=this.direction).call(i,s);for(var o=0,a=0;a<s.length;a++){var l=s[a];if(this.positionedNodes[l.id]===void 0){var u=this.options.hierarchical.nodeSpacing,f=u*o;o>0&&(f=this.direction.getPosition(s[a-1])+u),this.direction.setPosition(l,f,n),this._validatePositionAndContinue(l,n,f),o++}}}}},{key:"_placeBranchNodes",value:function(t,n){var i,s=this.hierarchical.childrenReference[t];if(s!==void 0){for(var o=[],a=0;a<s.length;a++)o.push(this.body.nodes[s[a]]);AT(i=this.direction).call(i,o);for(var l=0;l<o.length;l++){var u=o[l],f=this.hierarchical.levels[u.id];if(f>n&&this.positionedNodes[u.id]===void 0){var c=this.options.hierarchical.nodeSpacing,p=void 0;l===0?p=this.direction.getPosition(this.body.nodes[t]):p=this.direction.getPosition(o[l-1])+c,this.direction.setPosition(u,p,f),this._validatePositionAndContinue(u,f,p)}else return}var y=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[t],y,n)}}},{key:"_validatePositionAndContinue",value:function(t,n,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[n]!==void 0){var s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[n]]);if(i-s<this.options.hierarchical.nodeSpacing){var o=s+this.options.hierarchical.nodeSpacing-i,a=this._findCommonParent(this.lastNodeOnLevel[n],t.id);this._shiftBlock(a.withChild,o)}}this.lastNodeOnLevel[n]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,n)}}},{key:"_indexArrayToNodes",value:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.body.nodes[t[i]]);return n}},{key:"_getDistribution",value:function(){var t={},n,i;for(n in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,n)){i=this.body.nodes[n];var s=this.hierarchical.levels[n]===void 0?0:this.hierarchical.levels[n];this.direction.fix(i,s),t[s]===void 0&&(t[s]={}),t[s][n]=i}return t}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return gr(t.edges,function(s){var o;Sr(o=n.body.edgeIndices).call(o,s.id)!==-1&&i.push(s)}),i}},{key:"_getHubSizes",value:function(){var t=this,n={},i=this.body.nodeIndices;gr(i,function(o){var a=t.body.nodes[o],l=t._getActiveEdges(a).length;n[l]=!0});var s=[];return gr(n,function(o){s.push(Number(o))}),AT(SH).call(SH,s,function(o,a){return a-o}),s}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,n=function(u,f){t.hierarchical.levelDownstream(u,f)},i=this._getHubSizes(),s=function(){var u=i[o];if(u===0)return"break";gr(t.body.nodeIndices,function(f){var c=t.body.nodes[f];u===t._getActiveEdges(c).length&&t._crawlNetwork(n,f)})},o=0;o<i.length;++o){var a=s();if(a==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,n=1e5,i=function(a,l,u){},s=function(a,l,u){var f=t.hierarchical.levels[a.id];f===void 0&&(f=t.hierarchical.levels[a.id]=n);var c=i(as.cloneOptions(a,"node"),as.cloneOptions(l,"node"),as.cloneOptions(u,"edge"));t.hierarchical.levels[l.id]=f+c};this._crawlNetwork(s),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,i=Fee(t=this.body.nodeIndices).call(t,function(s,o){return s.set(o,n.body.nodes[o]),s},new pee);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=w0t(i):this.hierarchical.levels=b0t(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,n=function(s,o){t.hierarchical.levels[o.id]>t.hierarchical.levels[s.id]&&t.hierarchical.addRelation(s.id,o.id)};this._crawlNetwork(n),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,s={},o=function p(y,w){if(s[y.id]===void 0){t.hierarchical.setTreeIndex(y,w),s[y.id]=!0;for(var b,T=t._getActiveEdges(y),_=0;_<T.length;_++){var A=T[_];A.connected===!0&&(A.toId==y.id?b=A.from:b=A.to,y.id!=b.id&&(n(y,b,A),p(b,w)))}}};if(i===void 0)for(var a=0,l=0;l<this.body.nodeIndices.length;l++){var u=this.body.nodeIndices[l];if(s[u]===void 0){var f=this.body.nodes[u];o(f,a),a+=1}}else{var c=this.body.nodes[i];if(c===void 0){console.error("Node not found:",i);return}o(c)}}},{key:"_shiftBlock",value:function(t,n){var i=this,s={},o=function a(l){if(!s[l]){s[l]=!0,i.direction.shift(l,n);var u=i.hierarchical.childrenReference[l];if(u!==void 0)for(var f=0;f<u.length;f++)a(u[f])}};o(t)}},{key:"_findCommonParent",value:function(t,n){var i=this,s={},o=function l(u,f){var c=i.hierarchical.parentReference[f];if(c!==void 0)for(var p=0;p<c.length;p++){var y=c[p];u[y]=!0,l(u,y)}},a=function l(u,f){var c=i.hierarchical.parentReference[f];if(c!==void 0)for(var p=0;p<c.length;p++){var y=c[p];if(u[y]!==void 0)return{foundParent:y,withChild:f};var w=l(u,y);if(w.foundParent!==null)return w}return{foundParent:null,withChild:f}};return o(s,t),a(s,n)}},{key:"setDirectionStrategy",value:function(){var t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";t?this.direction=new r0t(this):this.direction=new n0t(this)}},{key:"_getCenterPosition",value:function(t){for(var n=1e9,i=-1e9,s=0;s<t.length;s++){var o=void 0;if(t[s].id!==void 0)o=t[s];else{var a=t[s];o=this.body.nodes[a]}var l=this.direction.getPosition(o);n=Math.min(n,l),i=Math.max(i,l)}return .5*(n+i)}}]),e}();function x0t(e,r){var t=typeof nf<"u"&&Ru(e)||e["@@iterator"];if(!t){if(Fr(e)||(t=E0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function E0t(e,r){var t;if(e){if(typeof e=="string")return TH(e,r);var n=Pi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return td(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TH(e,r)}}function TH(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var S0t=function(){function e(r,t,n,i){var s=this,o,a;ft(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},qn(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",nt(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",nt(a=this._restore).call(a,this))}return ht(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,n,i){n!==void 0&&(n.locale!==void 0?this.options.locale=n.locale:this.options.locale=i.locale,n.locales!==void 0?this.options.locales=n.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,Jr(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,n;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),o=i+s,a=this.options.locales[this.options.locale],l=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),l=!0),this.options.addEdge!==!1&&(l===!0?this._createSeperator(1):l=!0,this._createAddEdgeButton(a)),i===1&&typeof this.options.editNode=="function"?(l===!0?this._createSeperator(2):l=!0,this._createEditNodeButton(a)):s===1&&i===0&&this.options.editEdge!==!1&&(l===!0?this._createSeperator(3):l=!0,this._createEditEdgeButton(a)),o!==0&&(i>0&&this.options.deleteNode!==!1?(l===!0&&this._createSeperator(4),this._createDeleteButton(a)):i===0&&this.options.deleteEdge!==!1&&(l===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,nt(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",nt(n=this.showManipulatorToolbar).call(n,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}this._temporaryBindEvent("click",nt(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var n=this.selectionHandler.getSelectedNodes()[0];if(n!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(n.isCluster!==!0){var i=Jr({},n.options,!1);if(i.x=n.x,i.y=n.y,this.options.editNode.length===2)this.options.editNode(i,function(s){s!=null&&t.inMode==="editNode"&&t.body.data.nodes.getDataSet().update(s),t.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,n,i,s,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a,l=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(l),this._createSeperator(),this._createDescription(l.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,nt(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",nt(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",nt(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDrag",nt(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",nt(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",nt(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",Dr(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from.id,t.to.id);return}if(this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var s,o,a,l,u=this.body.edges[this.edgeBeingEditedId],f=this._getNewTargetNode(u.from.x,u.from.y),c=this._getNewTargetNode(u.to.x,u.to.y);this.temporaryIds.nodes.push(f.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[f.id]=f,this.body.nodeIndices.push(f.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",nt(s=this._controlNodeTouch).call(s,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",nt(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",nt(a=this._controlNodeDrag).call(a,this)),this._temporaryBindUI("onDragEnd",nt(l=this._controlNodeDragEnd).call(l,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(p){var y=u.edgeType.findBorderPositions(p);f.selected===!1&&(f.x=y.from.x,f.y=y.from.y),c.selected===!1&&(c.x=y.to.x,c.y=y.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var n=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),s=void 0;if(n.length>0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(s=this.options.deleteNode)}else i.length>0&&typeof this.options.deleteEdge=="function"&&(s=this.options.deleteEdge);if(typeof s=="function"){var a={nodes:n,edges:i};if(s.length===2)s(a,function(l){l!=null&&t.inMode==="delete"?(t.body.data.edges.getDataSet().remove(l.edges),t.body.data.nodes.getDataSet().remove(l.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(n),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var t,n;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(n=this.options.locales[this.options.locale])===null||n===void 0?void 0:n.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(t,n){var i=Jr({},this.options.controlNodeStyle);i.id="targetNode"+Iy(),i.hidden=!1,i.physics=!1,i.x=t,i.y=n;var s=this.body.functions.createNode(i);return s.shape.boundingBox={left:t,right:t,top:n,bottom:n},s}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},bc(this.editModeDiv);var n=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",n.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,nt(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(bc(this.editModeDiv),bc(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,n=x0t(du(t=this._domEventListenerCleanupQueue).call(t,0)),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),bc(this.manipulationDiv),bc(this.editModeDiv),bc(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var n,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addNodeMode).call(n,this))}},{key:"_createAddEdgeButton",value:function(t){var n,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addEdgeMode).call(n,this))}},{key:"_createEditNodeButton",value:function(t){var n,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editNode).call(n,this))}},{key:"_createEditEdgeButton",value:function(t){var n,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editEdgeMode).call(n,this))}},{key:"_createDeleteButton",value:function(t){var n,i;this.options.rtl?i="vis-delete-rtl":i="vis-delete";var s=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,nt(n=this.deleteSelected).call(n,this))}},{key:"_createBackButton",value:function(t){var n,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.showManipulatorToolbar).call(n,this))}},{key:"_createButton",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+n,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=s,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,n){this.temporaryEventFunctions.push({event:t,boundFunction:n}),this.body.emitter.on(t,n)}},{key:"_temporaryBindUI",value:function(t,n){if(this.body.eventListeners[t]!==void 0)this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=n;else throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Mb(bn(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var n=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(n,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,n){var i=new Pp(t,{});X$(i,n),this._domEventListenerCleanupQueue.push(function(){i.destroy()});var s=function(a){var l=a.keyCode,u=a.key;(u==="Enter"||u===" "||l===13||l===32)&&n()};t.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(function(){t.removeEventListener("keyup",s,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var n;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i=Sr(n=this.body.edgeIndices).call(n,this.temporaryIds.edges[t]);if(i!==-1){var s;du(s=this.body.edgeIndices).call(s,i,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var a;delete this.body.nodes[this.temporaryIds.nodes[o]];var l=Sr(a=this.body.nodeIndices).call(a,this.temporaryIds.nodes[o]);if(l!==-1){var u;du(u=this.body.nodeIndices).call(u,l,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=qn({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),l=s.isOverlappingWith(n);a===!0?(this.selectedControlNode=i,o.edgeType.from=i):l===!0&&(this.selectedControlNode=s,o.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var n=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(n);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--)if(o[l]!==this.selectedControlNode.id){a=this.body.nodes[o[l]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var u=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===u.id?this._performEditEdge(a.id,s.to.id):this._performEditEdge(s.from.id,a.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=qn({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var n=this.lastTouch,i=this.selectionHandler.getNodeAt(n);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this._getNewTargetNode(i.x,i.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);var o=this.body.functions.createEdge({id:"connectionEdge"+Iy(),from:i.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Sr(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}if(t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,n),this.temporaryIds.nodes[0]!==void 0){var f=this.body.nodes[this.temporaryIds.nodes[0]];f.x=this.canvas._XconvertDOMtoCanvas(n.x),f.y=this.canvas._YconvertDOMtoCanvas(n.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Sr(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(s,a.id)),t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,n),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var n=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,n,void 0,!0)}},{key:"_performAddNode",value:function(t){var n=this,i={id:Iy(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(i,function(s){s!=null&&n.inMode==="addNode"&&n.body.data.nodes.getDataSet().add(s),n.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,n){var i=this,s={from:t,to:n};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(s,function(o){o!=null&&i.inMode==="addEdge"&&(i.body.data.edges.getDataSet().add(o),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,n){var i=this,s={id:this.edgeBeingEditedId,from:t,to:n,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(Dr(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(s,function(a){a==null||i.inMode!=="editEdge"?(i.body.edges[s.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(a),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),ut="string",rt="boolean",Ne="number",oy="array",Ot="object",qee="dom",k0t="any",PT=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],NT={borderWidth:{number:Ne},borderWidthSelected:{number:Ne,undefined:"undefined"},brokenImage:{string:ut,undefined:"undefined"},chosen:{label:{boolean:rt,function:"function"},node:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{border:{string:ut},background:{string:ut},highlight:{border:{string:ut},background:{string:ut},__type__:{object:Ot,string:ut}},hover:{border:{string:ut},background:{string:ut},__type__:{object:Ot,string:ut}},__type__:{object:Ot,string:ut}},opacity:{number:Ne,undefined:"undefined"},fixed:{x:{boolean:rt},y:{boolean:rt},__type__:{object:Ot,boolean:rt}},font:{align:{string:ut},color:{string:ut},size:{number:Ne},face:{string:ut},background:{string:ut},strokeWidth:{number:Ne},strokeColor:{string:ut},vadjust:{number:Ne},multi:{boolean:rt,string:ut},bold:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},boldital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},ital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},mono:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},__type__:{object:Ot,string:ut}},group:{string:ut,number:Ne,undefined:"undefined"},heightConstraint:{minimum:{number:Ne},valign:{string:ut},__type__:{object:Ot,boolean:rt,number:Ne}},hidden:{boolean:rt},icon:{face:{string:ut},code:{string:ut},size:{number:Ne},color:{string:ut},weight:{string:ut,number:Ne},__type__:{object:Ot}},id:{string:ut,number:Ne},image:{selected:{string:ut,undefined:"undefined"},unselected:{string:ut,undefined:"undefined"},__type__:{object:Ot,string:ut}},imagePadding:{top:{number:Ne},right:{number:Ne},bottom:{number:Ne},left:{number:Ne},__type__:{object:Ot,number:Ne}},label:{string:ut,undefined:"undefined"},labelHighlightBold:{boolean:rt},level:{number:Ne,undefined:"undefined"},margin:{top:{number:Ne},right:{number:Ne},bottom:{number:Ne},left:{number:Ne},__type__:{object:Ot,number:Ne}},mass:{number:Ne},physics:{boolean:rt},scaling:{min:{number:Ne},max:{number:Ne},label:{enabled:{boolean:rt},min:{number:Ne},max:{number:Ne},maxVisible:{number:Ne},drawThreshold:{number:Ne},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:ut},size:{number:Ne},x:{number:Ne},y:{number:Ne},__type__:{object:Ot,boolean:rt}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:rt,array:oy},borderRadius:{number:Ne},interpolation:{boolean:rt},useImageSize:{boolean:rt},useBorderWithImage:{boolean:rt},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ot}},size:{number:Ne},title:{string:ut,dom:qee,undefined:"undefined"},value:{number:Ne,undefined:"undefined"},widthConstraint:{minimum:{number:Ne},maximum:{number:Ne},__type__:{object:Ot,boolean:rt,number:Ne}},x:{number:Ne},y:{number:Ne},__type__:{object:Ot}},T0t={configure:{enabled:{boolean:rt},filter:{boolean:rt,string:ut,array:oy,function:"function"},container:{dom:qee},showButton:{boolean:rt},__type__:{object:Ot,boolean:rt,string:ut,array:oy,function:"function"}},edges:{arrows:{to:{enabled:{boolean:rt},scaleFactor:{number:Ne},type:{string:PT},imageHeight:{number:Ne},imageWidth:{number:Ne},src:{string:ut},__type__:{object:Ot,boolean:rt}},middle:{enabled:{boolean:rt},scaleFactor:{number:Ne},type:{string:PT},imageWidth:{number:Ne},imageHeight:{number:Ne},src:{string:ut},__type__:{object:Ot,boolean:rt}},from:{enabled:{boolean:rt},scaleFactor:{number:Ne},type:{string:PT},imageWidth:{number:Ne},imageHeight:{number:Ne},src:{string:ut},__type__:{object:Ot,boolean:rt}},__type__:{string:["from","to","middle"],object:Ot}},endPointOffset:{from:{number:Ne},to:{number:Ne},__type__:{object:Ot,number:Ne}},arrowStrikethrough:{boolean:rt},background:{enabled:{boolean:rt},color:{string:ut},size:{number:Ne},dashes:{boolean:rt,array:oy},__type__:{object:Ot,boolean:rt}},chosen:{label:{boolean:rt,function:"function"},edge:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{color:{string:ut},highlight:{string:ut},hover:{string:ut},inherit:{string:["from","to","both"],boolean:rt},opacity:{number:Ne},__type__:{object:Ot,string:ut}},dashes:{boolean:rt,array:oy},font:{color:{string:ut},size:{number:Ne},face:{string:ut},background:{string:ut},strokeWidth:{number:Ne},strokeColor:{string:ut},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Ne},multi:{boolean:rt,string:ut},bold:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},boldital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},ital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},mono:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},__type__:{object:Ot,string:ut}},hidden:{boolean:rt},hoverWidth:{function:"function",number:Ne},label:{string:ut,undefined:"undefined"},labelHighlightBold:{boolean:rt},length:{number:Ne,undefined:"undefined"},physics:{boolean:rt},scaling:{min:{number:Ne},max:{number:Ne},label:{enabled:{boolean:rt},min:{number:Ne},max:{number:Ne},maxVisible:{number:Ne},drawThreshold:{number:Ne},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},selectionWidth:{function:"function",number:Ne},selfReferenceSize:{number:Ne},selfReference:{size:{number:Ne},angle:{number:Ne},renderBehindTheNode:{boolean:rt},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:ut},size:{number:Ne},x:{number:Ne},y:{number:Ne},__type__:{object:Ot,boolean:rt}},smooth:{enabled:{boolean:rt},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Ne},forceDirection:{string:["horizontal","vertical","none"],boolean:rt},__type__:{object:Ot,boolean:rt}},title:{string:ut,undefined:"undefined"},width:{number:Ne},widthConstraint:{maximum:{number:Ne},__type__:{object:Ot,boolean:rt,number:Ne}},value:{number:Ne,undefined:"undefined"},__type__:{object:Ot}},groups:{useDefaultGroups:{boolean:rt},__any__:NT,__type__:{object:Ot}},interaction:{dragNodes:{boolean:rt},dragView:{boolean:rt},hideEdgesOnDrag:{boolean:rt},hideEdgesOnZoom:{boolean:rt},hideNodesOnDrag:{boolean:rt},hover:{boolean:rt},keyboard:{enabled:{boolean:rt},speed:{x:{number:Ne},y:{number:Ne},zoom:{number:Ne},__type__:{object:Ot}},bindToWindow:{boolean:rt},autoFocus:{boolean:rt},__type__:{object:Ot,boolean:rt}},multiselect:{boolean:rt},navigationButtons:{boolean:rt},selectable:{boolean:rt},selectConnectedEdges:{boolean:rt},hoverConnectedEdges:{boolean:rt},tooltipDelay:{number:Ne},zoomView:{boolean:rt},zoomSpeed:{number:Ne},__type__:{object:Ot}},layout:{randomSeed:{undefined:"undefined",number:Ne,string:ut},improvedLayout:{boolean:rt},clusterThreshold:{number:Ne},hierarchical:{enabled:{boolean:rt},levelSeparation:{number:Ne},nodeSpacing:{number:Ne},treeSpacing:{number:Ne},blockShifting:{boolean:rt},edgeMinimization:{boolean:rt},parentCentralization:{boolean:rt},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ot,boolean:rt}},__type__:{object:Ot}},manipulation:{enabled:{boolean:rt},initiallyActive:{boolean:rt},addNode:{boolean:rt,function:"function"},addEdge:{boolean:rt,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ot,boolean:rt,function:"function"}},deleteNode:{boolean:rt,function:"function"},deleteEdge:{boolean:rt,function:"function"},controlNodeStyle:NT,__type__:{object:Ot,boolean:rt}},nodes:NT,physics:{enabled:{boolean:rt},barnesHut:{theta:{number:Ne},gravitationalConstant:{number:Ne},centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},forceAtlas2Based:{theta:{number:Ne},gravitationalConstant:{number:Ne},centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},repulsion:{centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},nodeDistance:{number:Ne},damping:{number:Ne},__type__:{object:Ot}},hierarchicalRepulsion:{centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},nodeDistance:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},maxVelocity:{number:Ne},minVelocity:{number:Ne},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:rt},iterations:{number:Ne},updateInterval:{number:Ne},onlyDynamicEdges:{boolean:rt},fit:{boolean:rt},__type__:{object:Ot,boolean:rt}},timestep:{number:Ne},adaptiveTimestep:{boolean:rt},wind:{x:{number:Ne},y:{number:Ne},__type__:{object:Ot}},__type__:{object:Ot,boolean:rt}},autoResize:{boolean:rt},clickToUse:{boolean:rt},locale:{string:ut},locales:{__any__:{any:k0t},__type__:{object:Ot}},height:{string:ut},width:{string:ut},__type__:{object:Ot}},Kee={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},I0t=function(r,t,n){var i;return!!(gl(r).call(r,"physics")&&gl(i=Kee.physics.solver).call(i,t)&&n.physics.solver!==t&&t!=="wind")},A0t=function(){function e(){ft(this,e)}return ht(e,[{key:"getDistances",value:function(t,n,i){for(var s={},o=t.edges,a=0;a<n.length;a++){var l=n[a],u={};s[l]=u;for(var f=0;f<n.length;f++)u[n[f]]=a==f?0:1e9}for(var c=0;c<i.length;c++){var p=o[i[c]];p.connected===!0&&s[p.fromId]!==void 0&&s[p.toId]!==void 0&&(s[p.fromId][p.toId]=1,s[p.toId][p.fromId]=1)}for(var y=n.length,w=0;w<y;w++)for(var b=n[w],T=s[b],_=0;_<y-1;_++)for(var A=n[_],x=s[A],I=_+1;I<y;I++){var O=n[I],C=s[O],g=Math.min(x[O],x[b]+T[O]);x[O]=g,C[A]=g}return s}}]),e}(),O0t=function(){function e(r,t,n){ft(this,e),this.body=r,this.springLength=t,this.springConstant=n,this.distanceSolver=new A0t}return ht(e,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.distanceSolver.getDistances(this.body,t,n);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();for(var o=.01,a=1,l=0,u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),f=5,c=1e9,p=0,y=0,w=0,b=0,T=0;c>o&&l<u;){l+=1;var _=this._getHighestEnergyNode(i),A=wn(_,4);for(p=A[0],c=A[1],y=A[2],w=A[3],b=c,T=0;b>a&&T<f;){T+=1,this._moveNode(p,y,w);var x=this._getEnergy(p),I=wn(x,3);b=I[0],y=I[1],w=I[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=0,o=n[0],a=0,l=0,u=0;u<n.length;u++){var f=n[u];if(i[f].predefinedPosition!==!0||i[f].isCluster===!0&&t===!0||i[f].options.fixed.x!==!0||i[f].options.fixed.y!==!0){var c=this._getEnergy(f),p=wn(c,3),y=p[0],w=p[1],b=p[2];s<y&&(s=y,o=f,a=w,l=b)}}return[o,s,a,l]}},{key:"_getEnergy",value:function(t){var n=wn(this.E_sums[t],2),i=n[0],s=n[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));return[o,i,s]}},{key:"_moveNode",value:function(t,n,i){for(var s=this.body.nodeIndices,o=this.body.nodes,a=0,l=0,u=0,f=o[t].x,c=o[t].y,p=this.K_matrix[t],y=this.L_matrix[t],w=0;w<s.length;w++){var b=s[w];if(b!==t){var T=o[b].x,_=o[b].y,A=p[b],x=y[b],I=1/Math.pow(Math.pow(f-T,2)+Math.pow(c-_,2),1.5);a+=A*(1-x*Math.pow(c-_,2)*I),l+=A*(x*(f-T)*(c-_)*I),u+=A*(1-x*Math.pow(f-T,2)*I)}}var O=a,C=l,g=n,M=u,B=i,L=(g/O+B/C)/(C/O-M/C),q=-(C*L+g)/O;o[t].x+=q,o[t].y+=L,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var s=0;s<n.length;s++){this.L_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.L_matrix[n[s]][n[o]]=i*t[n[s]][n[o]]}}},{key:"_createK_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var s=0;s<n.length;s++){this.K_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.K_matrix[n[s]][n[o]]=i*Math.pow(t[n[s]][n[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var s=0;s<t.length;s++){for(var o=t[s],a=n[o].x,l=n[o].y,u=0,f=0,c=s;c<t.length;c++){var p=t[c];if(p!==o){var y=n[p].x,w=n[p].y,b=1/Math.sqrt(Math.pow(a-y,2)+Math.pow(l-w,2));this.E_matrix[o][c]=[this.K_matrix[o][p]*(a-y-this.L_matrix[o][p]*(a-y)*b),this.K_matrix[o][p]*(l-w-this.L_matrix[o][p]*(l-w)*b)],this.E_matrix[p][s]=this.E_matrix[o][c],u+=this.E_matrix[o][c][0],f+=this.E_matrix[o][c][1]}}this.E_sums[o]=[u,f]}}},{key:"_updateE_matrix",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=this.E_matrix[t],o=this.K_matrix[t],a=this.L_matrix[t],l=i[t].x,u=i[t].y,f=0,c=0,p=0;p<n.length;p++){var y=n[p];if(y!==t){var w=s[p],b=w[0],T=w[1],_=i[y].x,A=i[y].y,x=1/Math.sqrt(Math.pow(l-_,2)+Math.pow(u-A,2)),I=o[y]*(l-_-a[y]*(l-_)*x),O=o[y]*(u-A-a[y]*(u-A)*x);s[p]=[I,O],f+=I,c+=O;var C=this.E_sums[y];C[0]+=I-b,C[1]+=O-T}}this.E_sums[t]=[f,c]}}]),e}();function St(e,r,t){var n,i,s,o,a=this;if(!(this instanceof St))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:tht,clickToUse:!1},qn(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:nt(n=this.on).call(n,this),off:nt(i=this.off).call(i,this),emit:nt(s=this.emit).call(s,this),once:nt(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new iht(function(){return a.body.emitter.emit("_requestRedraw")}),this.groups=new $dt,this.canvas=new cmt(this.body),this.selectionHandler=new ebt(this.body,this.canvas),this.interactionHandler=new gmt(this.body,this.canvas,this.selectionHandler),this.view=new hmt(this.body,this.canvas),this.renderer=new smt(this.body,this.canvas),this.physics=new Yyt(this.body),this.layoutEngine=new _0t(this.body),this.clustering=new nmt(this.body),this.manipulation=new S0t(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Ogt(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new Fyt(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new O0t(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(r)}ZX(St.prototype);St.prototype.setOptions=function(e){var r=this;if(e===null&&(e=void 0),e!==void 0){var t=Pft.validate(e,T0t);t===!0&&console.error("%cErrors have been found in the supplied options object.",tee);var n=["locale","locales","clickToUse"];if(tg(n,this.options,e),e.locale!==void 0&&(e.locale=rht(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),e.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new Oft(this,this.body.container,Kee,this.canvas.pixelRatio,I0t)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Jr(i.nodes,this.nodesHandler.options),Jr(i.edges,this.edgesHandler.options),Jr(i.layout,this.layoutEngine.options),Jr(i.interaction,this.selectionHandler.options),Jr(i.interaction,this.renderer.options),Jr(i.interaction,this.interactionHandler.options),Jr(i.manipulation,this.manipulation.options),Jr(i.physics,this.physics.options),Jr(i.global,this.canvas.options),Jr(i.global,this.options),this.configurator.setModuleOptions(i)}e.clickToUse!==void 0?e.clickToUse===!0?this.activator===void 0&&(this.activator=new Aft(this.canvas.frame),this.activator.on("change",function(){r.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};St.prototype._updateVisibleIndices=function(){var e=this.body.nodes,r=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&!this.clustering._isClusteredNode(t)&&e[t].options.hidden===!1&&this.body.nodeIndices.push(e[t].id);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n],s=e[i.fromId],o=e[i.toId],a=s!==void 0&&o!==void 0,l=!this.clustering._isClusteredEdge(n)&&i.options.hidden===!1&&a&&s.options.hidden===!1&&o.options.hidden===!1;l&&this.body.edgeIndices.push(i.id)}};St.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})};St.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var r=zft(e.dot);this.setData(r);return}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var t=Uft(e.gephi);this.setData(t);return}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};St.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];bc(this.body.container)};St.prototype._updateValueRange=function(e){var r,t=void 0,n=void 0,i=0;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r].getValue();s!==void 0&&(t=t===void 0?s:Math.min(s,t),n=n===void 0?s:Math.max(s,n),i+=s)}if(t!==void 0&&n!==void 0)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].setValueRange(t,n,i)};St.prototype.isActive=function(){return!this.activator||this.activator.active};St.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};St.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};St.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};St.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};St.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};St.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};St.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};St.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};St.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};St.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};St.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};St.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};St.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};St.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};St.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};St.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};St.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};St.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};St.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};St.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};St.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};St.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};St.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};St.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};St.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};St.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};St.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};St.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};St.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};St.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};St.prototype.getConnectedNodes=function(e){return this.body.nodes[e]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};St.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};St.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};St.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};St.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};St.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};St.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};St.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};St.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};St.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};St.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};St.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};St.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};St.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};St.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};St.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};St.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};St.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};St.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};St.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};St.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};St.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};function Vee(){const e=ro(!1);return kt(()=>(e.current=!0,()=>{e.current=!1}),[]),Eh(()=>e.current,[])}const C0t={layout:{improvedLayout:!0},physics:{solver:"barnesHut",barnesHut:{springLength:200}},autoResize:!1,nodes:{borderWidth:1,size:30,color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"},shadow:!0},edges:{smooth:!1,color:"lightgray",width:1,shadow:!0,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function bp(e,r,t,n){e.length!=0&&e.forEach(function(i){var a,l;let s=r.get(i.id);if(!t){s||r.add(i);return}if(n!=null&&n.has(i.id)){s||r.add(i);return}let o=Lr.getDefaultProfile(i.id);if((a=o==null?void 0:o.name)!=null&&a.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}if((l=o==null?void 0:o.display_name)!=null&&l.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}s&&r.remove(i.id)})}const P0t=({props:e})=>{const r=ro(null),t=ro(),n=Vee(),[i,s]=He(null),[o]=He(new Ea),[a]=He(new Ea),[l]=He(new Ea),[u]=He([]),[f,c]=He(e.dir||"in"),[p,y]=He(e.entitytype);kt(()=>{if(r.current){var T={nodes:a,edges:l};return t.current=r.current&&new St(r.current,T,C0t),t.current.on("click",function(_){if(_.nodes.length==0||!n())return;const A=_.nodes[0];e.setNpub(u$(A)),w(A).then(x=>{let I=new Set([dt(e.hexKey),A]);x&&bp(x,a,e.filter,I)})}),()=>{var _,A;(_=t.current)==null||_.off("click"),(A=t.current)==null||A.destroy()}}},[r]),kt(()=>{let T=dt(e.hexKey);return s(T),(e.dir!=f||e.entitytype!=p)&&(l.clear(),o.clear(),a.clear(),c(e.dir),y(e.entitytype)),w(T).then(_=>{if(!n())return;let A=new Set([dt(e.hexKey)]);_&&bp(_,a,e.filter,A)}),()=>{u.forEach(_=>_==null?void 0:_())}},[e.npub,e.dir,e.entitytype]),kt(()=>{if(o.length==0&&a.length==0)return;let T=new Set([dt(e.hexKey)]);bp(o,a,e.filter,T)},[e.filter]);async function w(T){let _=er.g.vertices[T];_||(_=new EV(T,0));let A={};if(A[T]=_,e.dir=="in")for(const M in _.in){const B=_.in[M];if(!B||!B.out||B.val==0)continue;A[B.out.id]=B.out;let L=em(B.val),q=B.out.degree>va;l.get(B.key)||l.add({id:B.key,from:B.out.id,to:T,color:L,dashes:q})}let x=Gee(e.entitytype);if(e.dir=="out")for(const M in _.out){const B=_.out[M];if(!B||B.val==0||!B.in||B.in.entityType!=x)continue;A[B.in.id]=B.in;let L=em(B.val);l.get(B.key)||l.add({id:B.key,from:T,to:B.in.id,color:L})}let I=Object.values(A),O=I.map(M=>ti(M.id)),C=await Lr.getProfiles(O,M=>{n()});u.push(C);let g=new Ea;for(const M of I){if(o.get(M.id))continue;const B=tt.profiles.get(M.id);let L=Lr.ensurePicture(B),q={id:M.id,label:B.name,image:L,shape:"circularImage"};o.add(q),g.add(q)}return g}const b=T=>{let _=T||i;if(!_)return;a.clear(),o.clear(),l.clear(),w(_).then(x=>{if(!n())return;let I=new Set([dt(e.hexKey)]);x&&bp(x,a,e.filter,I)});const A=u$(_);A!=e.npub&&e.setNpub(A)};return e.npub?v(lt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(uG,{dir:e.dir,setSearch:e.setSearch}),v("div",{className:"flex gap-4",children:" "}),v("div",{className:"flex gap-4",children:v("button",{className:"btn btn-primary btn-sm",onClick:()=>{var T;return b((T=t.current)==null?void 0:T.getSelectedNodes()[0])},children:he("Focus")})}),v("div",{className:"flex gap-4",children:v(Jt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"path"}),children:he("Path")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null},N0t={layout:{randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!0,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"roots"}},physics:{stabilization:!1},autoResize:!1,nodes:{borderWidth:1,size:30,color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"}},edges:{smooth:!1,color:"lightgray",width:1,arrows:{to:{enabled:!0,scaleFactor:.5}}}},R0t=({props:e})=>{const r=ro(null),t=ro(),n=Vee(),[i,s]=He(null),[o]=He(new Ea),[a]=He(new Ea),[l]=He(new Ea),[u]=He([]);kt(()=>{if(r.current){var y={nodes:a,edges:l};return t.current=r.current&&new St(r.current,y,N0t),t.current.on("click",function(w){if(w.nodes.length==0)return;const b=w.nodes[0];e.setNpub(u$(b))}),()=>{var w,b;(w=t.current)==null||w.off("click"),(b=t.current)==null||b.destroy()}}},[]),kt(()=>{let y=dt(e.hexKey),w=er.g.vertices[y],b=w==null?void 0:w.score,T=er.g.getPaths(y),_=Object.create(null);for(let I of T)I!=null&&I.in&&(_[I.in.id]=I.in),I!=null&&I.out&&(_[I.out.id]=I.out);let A=Object.values(_),x=A.map(I=>ti(I.id));return Lr.getProfiles(x,I=>{var O;n()&&(f(A,T),(O=t.current)==null||O.redraw())}).then(I=>{n()?u.push(I):I()}),s(I=>({...I,vId:y,score:b})),()=>{u.forEach(I=>I==null?void 0:I())}},[e.npub]);function f(y,w){var T,_;for(let A of y){let x=tt.profiles.get(A.id),I=Lr.ensurePicture(x),O=o.get(A.id);if(O){O.label!=x.name+` (ID: ${A.id})`&&(O.label=x.name+` (ID: ${A.id})`),O.image!=I&&(O.image=I);continue}o.add({id:A.id,label:x.name,image:I,shape:"circularImage"})}for(let A of w){let x=em(A.val);l.get(A.key)||l.add({id:A.key,from:(T=A.out)==null?void 0:T.id,to:(_=A.in)==null?void 0:_.id,color:x})}let b=new Set([dt(e.hexKey)]);bp(o,a,e.filter,b)}kt(()=>{var w;if(o.length==0&&a.length==0)return;let y=new Set([dt(e.hexKey),dt(de.getPubKey())]);bp(o,a,e.filter,y),(w=t.current)==null||w.redraw()},[e.filter]);const c=y=>{let w=y==null?void 0:y.values();return w?w.join("/"):null},p=y=>{if(!y||!(y==null?void 0:y.resolve()))return null;let{val:b,degree:T,count:_,hasScore:A}=y.resolve(),x=Math.round((b+_)*100/(_*2));return v(lt,{children:A?v(lt,{children:[v("span",{children:["Trust score is ",b]}),v("span",{children:[" from ",_==1?`${_} claim`:`a total of ${_} claims`]}),v("span",{children:[" at degree ",T]}),v("span",{children:[" resulting in ",x,"% trust"]})]}):v("span",{children:"No Score"})})};return e.npub?v(lt,{children:[v("div",{className:"flex flex-col gap-4",children:[v("div",{children:["Aggregated result of score is ",c(i==null?void 0:i.score)]}),v("div",{children:p(i==null?void 0:i.score)})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:v(Jt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"graph"}),children:he("Focus")})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null};function D0t(e,r){let t=e==null?void 0:e.toLocaleLowerCase();return t=="trust"?1:t=="distrust"?-1:r}function Gee(e,r=1){let t=e==null?void 0:e.toLocaleLowerCase();return t=="key"?1:t=="item"?2:r}const B0t=e=>{const[r,t]=He({ready:!1}),[n,i]=He(e.npub||de.toNostrBech32Address(de.getPubKey(),"npub")),[s,o]=He(e.entitytype||"key"),[a,l]=He(e.trusttype||"trust"),[u,f]=He(e.dir||"out"),[c,p]=He(e.view||"graph"),[y,w]=He(e.filter||""),[b,T]=He(null),[_]=He([]),A=de.toNostrHexAddress(n),x=A==de.getPubKey(),I=$n.debounce(B=>w(B),500,{trailing:!0});kt(()=>(er.whenReady(()=>{T(er.g.vertices[dt(n)]),t(B=>({...B,ready:!0}))}),()=>{_.forEach(B=>B==null?void 0:B())}),[]);const O=Eh(B=>{T(er.g.vertices[dt(B)]),i(B)},[]);kt(()=>{e.npub!=n&&O(e.npub||de.toNostrBech32Address(de.getPubKey(),"npub")),e.entitytype!=s&&o(e.entitytype||"key"),e.trusttype!=a&&l(e.trusttype||"trust"),e.dir!=u&&f(e.dir||"out"),e.view!=c&&p(e.view||"graph"),e.filter!=y&&w(e.filter||"")},[e.npub,e.entitytype,e.trusttype,e.dir,e.view,e.filter]);function C(B){const L={npub:n,entitytype:s,trusttype:a,dir:u,view:c,filter:y,...B};return`/graph/${L.npub}/${L.entitytype}/${L.dir}/${L.trusttype}/${L.view}${L.filter?"/"+L.filter:""}`}const g=Eh(B=>{},[]),M=()=>{let B={npub:n,hexKey:A,entitytype:s,trusttype:a,dir:u,view:c,filter:y,setNpub:O,route:g,setSearch:C};return c=="path"?v(R0t,{props:B}):c=="list"?v(SAe,{props:B}):v(P0t,{props:B})};return r.ready?v(lt,{children:[v(El,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${n}`,children:v($r,{pub:n})}),v("span",{style:{flex:1},className:"ml-1",children:c})]})}),cG(b==null?void 0:b.score,n,!0),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-8",children:[v(bAe,{view:c,setSearch:C,me:x}),v("form",{children:v("label",{children:v("input",{type:"text",placeholder:he("Filter"),tabIndex:1,onInput:B=>{var L;return I((L=B==null?void 0:B.target)==null?void 0:L.value)},className:"input-bordered border-neutral-500 input input-sm w-full"})})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),M()]}):null},M0t=e=>{const[r,t]=He(null),n=de.toNostrHexAddress(e.id)||de.getPubKey(),i=de.toNostrBech32Address(n,"npub");kt(()=>{er.whenReady(()=>{let o=Lr.history[n]||[];t({history:o})})},[n]);const s=()=>{if(!(r!=null&&r.history))return;let o=r.history.map(a=>({name:a.name,value:a.isProfileLoaded}));return v(gw,{data:o,title:"Profiles"})};return v(lt,{children:[v(El,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${i}`,children:v($r,{pub:i})}),v("span",{style:{flex:1},className:"ml-1",children:"History"})]})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),"History of a profile load",v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex",children:s()})]})};Ph.init({autologin:!1,autofollow:!1});class L0t extends _n{componentDidMount(){window.onload=()=>{Re.get("loggedIn").on(this.inject())},Re.get("unseenMsgsTotal").on(this.inject()),BK.then(()=>this.setState({translationLoaded:!0})),Re.get("showLoginModal").on(this.inject())}handleRoute(r){const t=r.url;this.setState({activeRoute:t}),Re.get("activeRoute").put(t)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}electronCmd(r){console.log(r)}render(){let r="";const t=this.state;t.activeRoute&&t.activeRoute.length>1&&(r=hr.capitalize(t.activeRoute.replace("/","").split("?")[0]));const n=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) %s | Dpeep`:"%s | Dpeep",i=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) Dpeep`:"Dpeep";if(!t.translationLoaded)return v("div",{});if(!t.loggedIn&&window.location.pathname.length<=1)return v(pw,{fullScreen:!0});const s=o=>{var a;return(a=o.id)!=null&&a.startsWith("note")?v(M8,{id:o.id}):v(l1,{id:o.id,tab:"posts",path:o.path})};return v("div",{className:"flex justify-center",children:[v("section",{className:"flex w-full max-w-screen-xl justify-between relative",children:[v(pt,{when:t.loggedIn,children:v(VTe,{})}),v(Sh,{titleTemplate:n,defaultTitle:i,children:[v("title",{children:r}),v("meta",{name:"description",content:"Connecting People"}),v("meta",{property:"og:type",content:"website"}),v("meta",{property:"og:title",content:r}),v("meta",{property:"og:description",content:"Connecting People"}),v("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),v("meta",{name:"twitter:card",content:"summary_large_image"}),v("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),v("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),v("div",{className:"pb-16 md:pb-0 relative flex h-full flex-grow flex-col w-1/2",children:v(Oz,{onChange:o=>this.handleRoute(o),children:[v(hS,{path:"/",index:"follows"}),v(HV,{path:"/search",focus:!0}),v(CIe,{path:"/key"}),v(hS,{path:"/global",index:"global"}),v(hS,{path:"/search/:keyword"}),v(pw,{path:"/login",fullScreen:!0}),v(HIe,{path:"/notifications"}),v(x8,{path:"/chat/hashtag/:hashtag?"}),v(x8,{path:"/chat/:id?"}),v(M8,{path:"/post/:id+"}),v(dAe,{path:"/torrent/:id+"}),v(XTe,{path:"/about"}),v(fAe,{path:"/settings/:page?"}),v(jIe,{path:"/logout"}),v(S8,{path:"/explorer/:path?"}),v(S8,{path:"/explorer/:path+"}),v(gIe,{path:"/profile/edit"}),v(hAe,{path:"/subscribe"}),v(l1,{path:"/profile/:id",tab:"posts"}),v(l1,{path:"/:id/replies",tab:"replies"}),v(l1,{path:"/:id/likes",tab:"likes"}),v(I8,{path:"/follows/:id"}),v(I8,{followers:!0,path:"/followers/:id"}),v(B0t,{path:"/graph/:npub?/:entitytype?/:dir?/:trusttype?/:view?/:filter?"}),v(mAe,{path:"/diagnostics/:id/:entitytype?/:dir?/:trust1?/:view?/:filter?"}),v(M0t,{path:"/history/:id?"}),v(s,{path:"/:id"})]})}),t.loggedIn?v(pAe,{}):null,v(qTe,{}),v(UTe,{})]}),v(pt,{when:t.showLoginModal,children:v(Iu,{centerVertically:!0,showContainer:!0,onClose:()=>Re.get("showLoginModal").put(!1),children:v(pw,{})})})]})}}hr.showConsoleWarning();Bp(v(L0t,{}),document.getElementById("app"));export{Cn as c,io as g,uge as r};
