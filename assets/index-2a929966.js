var Hoe=Object.defineProperty;var Uoe=(e,r,t)=>r in e?Hoe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var ce=(e,r,t)=>(Uoe(e,typeof r!="symbol"?r+"":r,t),t),tE=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var Eo=(e,r,t)=>(tE(e,r,"read from private field"),t?t.call(e):r.get(e)),yn=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},Id=(e,r,t,n)=>(tE(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var Jn=(e,r,t)=>(tE(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var pm,at,$z,Pf,$D,_z,ST,xz,gp={},Ez=[],Woe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,o_=Array.isArray;function Jl(e,r){for(var t in r)e[t]=r[t];return e}function Sz(e){var r=e.parentNode;r&&r.removeChild(e)}function Je(e,r,t){var n,i,s,o={};for(s in r)s=="key"?n=r[s]:s=="ref"?i=r[s]:o[s]=r[s];if(arguments.length>2&&(o.children=arguments.length>3?pm.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return ry(e,o,n,i,null)}function ry(e,r,t,n,i){var s={type:e,props:r,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++$z};return i==null&&at.vnode!=null&&at.vnode(s),s}function vm(){return{current:null}}function lt(e){return e.children}function jn(e,r){this.props=e,this.context=r}function kw(e,r){if(r==null)return e.__?kw(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?kw(e):null}function kz(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return kz(e)}}function kT(e){(!e.__d&&(e.__d=!0)&&Pf.push(e)&&!Tw.__r++||$D!==at.debounceRendering)&&(($D=at.debounceRendering)||_z)(Tw)}function Tw(){var e,r,t,n,i,s,o,a,l;for(Pf.sort(ST);e=Pf.shift();)e.__d&&(r=Pf.length,n=void 0,i=void 0,s=void 0,a=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],i=[],(s=Jl({},o)).__v=o.__v+1,i3(l,o,s,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??kw(o),o.__h,i),Oz(n,o,i),o.__e!=a&&kz(o)),Pf.length>r&&Pf.sort(ST));Tw.__r=0}function Tz(e,r,t,n,i,s,o,a,l,u,f){var c,d,y,w,b,T,_,A,x,I,O=0,C=n&&n.__k||Ez,g=C.length,M=g,B=r.length;for(t.__k=[],c=0;c<B;c++)(w=t.__k[c]=(w=r[c])==null||typeof w=="boolean"||typeof w=="function"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?ry(null,w,null,null,w):o_(w)?ry(lt,{children:w},null,null,null):w.__b>0?ry(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null&&(w.__=t,w.__b=t.__b+1,(A=qoe(w,C,_=c+O,M))===-1?y=gp:(y=C[A]||gp,C[A]=void 0,M--),i3(e,w,y,i,s,o,a,l,u,f),b=w.__e,(d=w.ref)&&y.ref!=d&&(y.ref&&s3(y.ref,null,w),f.push(d,w.__c||b,w)),b!=null&&(T==null&&(T=b),I=!(x=y===gp||y.__v===null)&&A===_,x?A==-1&&O--:A!==_&&(A===_+1?(O++,I=!0):A>_?M>B-_?(O+=A-_,I=!0):O--:O=A<_&&A==_-1?A-_:0),_=c+O,I=I||A==c&&!x,typeof w.type!="function"||A===_&&y.__k!==w.__k?typeof w.type=="function"||I?w.__d!==void 0?(l=w.__d,w.__d=void 0):l=b.nextSibling:l=Az(e,b,l):l=Iz(w,l,e),typeof t.type=="function"&&(t.__d=l)));for(t.__e=T,c=g;c--;)C[c]!=null&&(typeof t.type=="function"&&C[c].__e!=null&&C[c].__e==t.__d&&(t.__d=C[c].__e.nextSibling),Cz(C[c],C[c]))}function Iz(e,r,t){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,r=typeof n.type=="function"?Iz(n,r,t):Az(t,n.__e,r));return r}function Sa(e,r){return r=r||[],e==null||typeof e=="boolean"||(o_(e)?e.some(function(t){Sa(t,r)}):r.push(e)),r}function Az(e,r,t){return t==null||t.parentNode!==e?e.insertBefore(r,null):r==t&&r.parentNode!=null||e.insertBefore(r,t),r.nextSibling}function qoe(e,r,t,n){var i=e.key,s=e.type,o=t-1,a=t+1,l=r[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<r.length;){if(o>=0){if((l=r[o])&&i==l.key&&s===l.type)return o;o--}if(a<r.length){if((l=r[a])&&i==l.key&&s===l.type)return a;a++}}return-1}function Koe(e,r,t,n,i){var s;for(s in t)s==="children"||s==="key"||s in r||Iw(e,s,null,t[s],n);for(s in r)i&&typeof r[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===r[s]||Iw(e,s,r[s],t[s],n)}function _D(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||Woe.test(r)?t:t+"px"}function Iw(e,r,t,n,i){var s;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(r in n)t&&r in t||_D(e.style,r,"");if(t)for(r in t)n&&t[r]===n[r]||_D(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")s=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+s]=t,t?n||e.addEventListener(r,s?ED:xD,s):e.removeEventListener(r,s?ED:xD,s);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function xD(e){return this.l[e.type+!1](at.event?at.event(e):e)}function ED(e){return this.l[e.type+!0](at.event?at.event(e):e)}function i3(e,r,t,n,i,s,o,a,l,u){var f,c,d,y,w,b,T,_,A,x,I,O,C,g,M,B=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=r.__e=t.__e,r.__h=null,s=[a]),(f=at.__b)&&f(r);try{e:if(typeof B=="function"){if(_=r.props,A=(f=B.contextType)&&n[f.__c],x=f?A?A.props.value:f.__:n,t.__c?T=(c=r.__c=t.__c).__=c.__E:("prototype"in B&&B.prototype.render?r.__c=c=new B(_,x):(r.__c=c=new jn(_,x),c.constructor=B,c.render=Goe),A&&A.sub(c),c.props=_,c.state||(c.state={}),c.context=x,c.__n=n,d=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),B.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Jl({},c.__s)),Jl(c.__s,B.getDerivedStateFromProps(_,c.__s))),y=c.props,w=c.state,c.__v=r,d)B.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(B.getDerivedStateFromProps==null&&_!==y&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(_,x),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(_,c.__s,x)===!1||r.__v===t.__v)){for(r.__v!==t.__v&&(c.props=_,c.state=c.__s,c.__d=!1),r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(L){L&&(L.__=r)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(_,c.__s,x),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(y,w,b)})}if(c.context=x,c.props=_,c.__P=e,c.__e=!1,O=at.__r,C=0,"prototype"in B&&B.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(r),f=c.render(c.props,c.state,c.context),g=0;g<c._sb.length;g++)c.__h.push(c._sb[g]);c._sb=[]}else do c.__d=!1,O&&O(r),f=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++C<25);c.state=c.__s,c.getChildContext!=null&&(n=Jl(Jl({},n),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(b=c.getSnapshotBeforeUpdate(y,w)),Tz(e,o_(M=f!=null&&f.type===lt&&f.key==null?f.props.children:f)?M:[M],r,t,n,i,s,o,a,l,u),c.base=r.__e,r.__h=null,c.__h.length&&o.push(c),T&&(c.__E=c.__=null)}else s==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=Voe(t.__e,r,t,n,i,s,o,l,u);(f=at.diffed)&&f(r)}catch(L){r.__v=null,(l||s!=null)&&(r.__e=a,r.__h=!!l,s[s.indexOf(a)]=null),at.__e(L,r,t)}}function Oz(e,r,t){for(var n=0;n<t.length;n++)s3(t[n],t[++n],t[++n]);at.__c&&at.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){at.__e(s,i.__v)}})}function Voe(e,r,t,n,i,s,o,a,l){var u,f,c,d=t.props,y=r.props,w=r.type,b=0;if(w==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!w&&(w?u.localName===w:u.nodeType===3)){e=u,s[b]=null;break}}if(e==null){if(w===null)return document.createTextNode(y);e=i?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,y.is&&y),s=null,a=!1}if(w===null)d===y||a&&e.data===y||(e.data=y);else{if(s=s&&pm.call(e.childNodes),f=(d=t.props||gp).dangerouslySetInnerHTML,c=y.dangerouslySetInnerHTML,!a){if(s!=null)for(d={},b=0;b<e.attributes.length;b++)d[e.attributes[b].name]=e.attributes[b].value;(c||f)&&(c&&(f&&c.__html==f.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(Koe(e,y,d,i,a),c)r.__k=[];else if(Tz(e,o_(b=r.props.children)?b:[b],r,t,n,i&&w!=="foreignObject",s,o,s?s[0]:t.__k&&kw(t,0),a,l),s!=null)for(b=s.length;b--;)s[b]!=null&&Sz(s[b]);a||("value"in y&&(b=y.value)!==void 0&&(b!==e.value||w==="progress"&&!b||w==="option"&&b!==d.value)&&Iw(e,"value",b,d.value,!1),"checked"in y&&(b=y.checked)!==void 0&&b!==e.checked&&Iw(e,"checked",b,d.checked,!1))}return e}function s3(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(n){at.__e(n,t)}}function Cz(e,r,t){var n,i;if(at.unmount&&at.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||s3(n,null,r)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){at.__e(s,r)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Cz(n[i],r,t||typeof e.type!="function");t||e.__e==null||Sz(e.__e),e.__=e.__e=e.__d=void 0}function Goe(e,r,t){return this.constructor(e,t)}function Op(e,r,t){var n,i,s,o;at.__&&at.__(e,r),i=(n=typeof t=="function")?null:t&&t.__k||r.__k,s=[],o=[],i3(r,e=(!n&&t||r).__k=Je(lt,null,[e]),i||gp,gp,r.ownerSVGElement!==void 0,!n&&t?[t]:i?null:r.firstChild?pm.call(r.childNodes):null,s,!n&&t?t:i?i.__e:r.firstChild,n,o),Oz(s,e,o)}function Pz(e,r){Op(e,r,Pz)}function Nz(e,r,t){var n,i,s,o,a=Jl({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),r)s=="key"?n=r[s]:s=="ref"?i=r[s]:a[s]=r[s]===void 0&&o!==void 0?o[s]:r[s];return arguments.length>2&&(a.children=arguments.length>3?pm.call(arguments,2):t),ry(e.type,a,n||e.key,i||e.ref,null)}function o3(e,r){var t={__c:r="__cC"+xz++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[r]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,kT(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}pm=Ez.slice,at={__e:function(e,r,t,n){for(var i,s,o;r=r.__;)if((i=r.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},$z=0,jn.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Jl({},this.state),typeof e=="function"&&(e=e(Jl({},t),this.props)),e&&Jl(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),kT(this))},jn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),kT(this))},jn.prototype.render=lt,Pf=[],_z=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ST=function(e,r){return e.__v.__b-r.__v.__b},Tw.__r=0,xz=0;typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.16.0",at,{Fragment:lt,Component:jn});function SD(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Yoe(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(i,s){if(i){if(typeof i=="string")return SD(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?SD(i,s):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kD={};function ql(e){return e.type===lt?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var ny=[],Ad=[];function Rz(){return ny.length>0?ny[ny.length-1]:null}var TD=!1;function rE(e){return typeof e.type=="function"&&e.type!=lt}function Ji(e){for(var r=[e],t=e;t.__o!=null;)r.push(t.__o),t=t.__o;return r.reduce(function(n,i){n+="  in "+ql(i);var s=i.__source;return s?n+=" (at "+s.fileName+":"+s.lineNumber+")":TD||(TD=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var Zoe=typeof WeakMap=="function";function Dz(e){return e?typeof e.type=="function"?e.__===null?e.__e!==null&&e.__e.parentNode!==null?e.__e.parentNode.localName:"":Dz(e.__):e.type:""}var Xoe=jn.prototype.setState;jn.prototype.setState=function(e,r){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+Ji(Rz())),Xoe.call(this,e,r)};var Joe=jn.prototype.forceUpdate;function jl(e){var r=e.props,t=ql(e),n="";for(var i in r)if(r.hasOwnProperty(i)&&i!=="children"){var s=r[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),n+=" "+i+"="+JSON.stringify(s)}var o=r.children;return"<"+t+n+(o&&o.length?">..</"+t+">":" />")}jn.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+Ji(Rz())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+Ji(this.__v)),Joe.call(this,e)},function(){(function(){var b=at.__b,T=at.diffed,_=at.__,A=at.vnode,x=at.__r;at.diffed=function(I){rE(I)&&Ad.pop(),ny.pop(),T&&T(I)},at.__b=function(I){rE(I)&&ny.push(I),b&&b(I)},at.__=function(I,O){Ad=[],_&&_(I,O)},at.vnode=function(I){I.__o=Ad.length>0?Ad[Ad.length-1]:null,A&&A(I)},at.__r=function(I){rE(I)&&Ad.push(I),x&&x(I)}})();var e=!1,r=at.__b,t=at.diffed,n=at.vnode,i=at.__r,s=at.__e,o=at.__,a=at.__h,l=at.__c,u=Zoe?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,f=[],c=[];at.__e=function(b,T,_,A){if(T&&T.__c&&typeof b.then=="function"){var x=b;b=new Error("Missing Suspense. The throwing component was: "+ql(T));for(var I=T;I;I=I.__)if(I.__c&&I.__c.__c){b=x;break}if(b instanceof Error)throw b}try{(A=A||{}).componentStack=Ji(T),s(b,T,_,A),typeof b.then!="function"&&setTimeout(function(){throw b})}catch(O){throw O}},at.__=function(b,T){if(!T)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var _;switch(T.nodeType){case 1:case 11:case 9:_=!0;break;default:_=!1}if(!_){var A=ql(b);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+T+" instead: render(<"+A+" />, "+T+");")}o&&o(b,T)},at.__b=function(b){var T=b.type;if(typeof T!="string"||T!=="thead"&&T!=="tfoot"&&T!=="tbody"&&T!=="tr"&&T!=="td"&&T!=="th"||c.push(b),e=!0,T===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+jl(b)+`

`+Ji(b));if(T!=null&&typeof T=="object")throw T.__k!==void 0&&T.__e!==void 0?new Error("Invalid type passed to createElement(): "+T+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+ql(b)+" = "+jl(T)+`;
  let vnode = <My`+ql(b)+` />;

This usually happens when you export a JSX literal and not the component.

`+Ji(b)):new Error("Invalid type passed to createElement(): "+(Array.isArray(T)?"array":T));if(b.ref!==void 0&&typeof b.ref!="function"&&typeof b.ref!="object"&&!("$$typeof"in b))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof b.ref+`] instead
`+jl(b)+`

`+Ji(b));if(typeof b.type=="string"){for(var _ in b.props)if(_[0]==="o"&&_[1]==="n"&&typeof b.props[_]!="function"&&b.props[_]!=null)throw new Error(`Component's "`+_+'" property should be a function, but got ['+typeof b.props[_]+`] instead
`+jl(b)+`

`+Ji(b))}if(typeof b.type=="function"&&b.type.propTypes){if(b.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(b.type)){var A="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var x=b.type();u.lazyPropTypes.set(b.type,!0),console.warn(A+"Component wrapped in lazy() is "+ql(x))}catch{console.warn(A+"We will log the wrapped component's name once it is loaded.")}}var I=b.props;b.type.__f&&delete(I=function(O,C){for(var g in C)O[g]=C[g];return O}({},I)).ref,function(O,C,g,M,B){Object.keys(O).forEach(function(L){var q;try{q=O[L](C,L,M,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Q){q=Q}q&&!(q.message in kD)&&(kD[q.message]=!0,console.error("Failed prop type: "+q.message+(B&&`
`+B()||"")))})}(b.type.propTypes,I,0,ql(b),function(){return Ji(b)})}r&&r(b)},at.__r=function(b){i&&i(b),e=!0},at.__h=function(b,T,_){if(!b||!e)throw new Error("Hook can only be invoked from render methods.");a&&a(b,T,_)};var d=function(b,T){return{get:function(){var _="get"+b+T;f&&f.indexOf(_)<0&&(f.push(_),console.warn("getting vnode."+b+" is deprecated, "+T))},set:function(){var _="set"+b+T;f&&f.indexOf(_)<0&&(f.push(_),console.warn("setting vnode."+b+" is not allowed, "+T))}}},y={nodeName:d("nodeName","use vnode.type"),attributes:d("attributes","use vnode.props"),children:d("children","use vnode.props.children")},w=Object.create({},y);at.vnode=function(b){var T=b.props;if(b.type!==null&&T!=null&&("__source"in T||"__self"in T)){var _=b.props={};for(var A in T){var x=T[A];A==="__source"?b.__source=x:A==="__self"?b.__self=x:_[A]=x}}b.__proto__=w,n&&n(b)},at.diffed=function(b){if(b.__k&&b.__k.forEach(function(q){if(typeof q=="object"&&q&&q.type===void 0){var Q=Object.keys(q).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+Q+`}.

`+Ji(b))}}),e=!1,t&&t(b),b.__k!=null)for(var T=[],_=0;_<b.__k.length;_++){var A=b.__k[_];if(A&&A.key!=null){var x=A.key;if(T.indexOf(x)!==-1){console.error('Following component has two or more children with the same key attribute: "'+x+`". This may cause glitches and misbehavior in rendering process. Component: 

`+jl(b)+`

`+Ji(b));break}T.push(x)}}if(b.__c!=null&&b.__c.__H!=null){var I=b.__c.__H.__;if(I)for(var O=0;O<I.length;O+=1){var C=I[O];if(C.__H){for(var g,M=Yoe(C.__H);!(g=M()).done;)if((L=g.value)!=L){var B=ql(b);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+O+" in component "+B+" was called with NaN.")}}}}var L},at.__c=function(b,T){for(var _=0;_<c.length;_++){var A=c[_],x=A.type,I=Dz(A.__);x!=="thead"&&x!=="tfoot"&&x!=="tbody"||I==="table"?x==="tr"&&I!=="thead"&&I!=="tfoot"&&I!=="tbody"&&I!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+jl(A)+`

`+Ji(A)):x==="td"&&I!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+jl(A)+`

`+Ji(A)):x==="th"&&I!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+jl(A)+`

`+Ji(A)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+jl(A)+`

`+Ji(A))}c=[],l&&l(b,T)}}();var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fv(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var Bz={exports:{}},Qoe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eae=Qoe,tae=eae;function Mz(){}function Lz(){}Lz.resetWarningCache=Mz;var rae=function(){function e(n,i,s,o,a,l){if(l!==tae){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Lz,resetWarningCache:Mz};return t.PropTypes=t,t};Bz.exports=rae();var nae=Bz.exports;const tn=ro(nae);var du,Wr,nE,ID,Cp=0,Fz=[],j1=[],AD=at.__b,OD=at.__r,CD=at.diffed,PD=at.__c,ND=at.unmount;function Mh(e,r){at.__h&&at.__h(Wr,e,Cp||r),Cp=0;var t=Wr.__H||(Wr.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:j1}),t.__[e]}function Me(e){return Cp=1,a3(Uz,e)}function a3(e,r,t){var n=Mh(du++,2);if(n.t=e,!n.__c&&(n.__=[t?t(r):Uz(void 0,r),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=Wr,!Wr.u)){var i=function(a,l,u){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(d){return d.__c});if(f.every(function(d){return!d.__N}))return!s||s.call(this,a,l,u);var c=!1;return f.forEach(function(d){if(d.__N){var y=d.__[0];d.__=d.__N,d.__N=void 0,y!==d.__[0]&&(c=!0)}}),!(!c&&n.__c.props===a)&&(!s||s.call(this,a,l,u))};Wr.u=!0;var s=Wr.shouldComponentUpdate,o=Wr.componentWillUpdate;Wr.componentWillUpdate=function(a,l,u){if(this.__e){var f=s;s=void 0,i(a,l,u),s=f}o&&o.call(this,a,l,u)},Wr.shouldComponentUpdate=i}return n.__N||n.__}function St(e,r){var t=Mh(du++,3);!at.__s&&l3(t.__H,r)&&(t.__=e,t.i=r,Wr.__H.__h.push(t))}function gm(e,r){var t=Mh(du++,4);!at.__s&&l3(t.__H,r)&&(t.__=e,t.i=r,Wr.__h.push(t))}function Vo(e){return Cp=5,pu(function(){return{current:e}},[])}function jz(e,r,t){Cp=6,gm(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function pu(e,r){var t=Mh(du++,7);return l3(t.__H,r)?(t.__V=e(),t.i=r,t.__h=e,t.__V):t.__}function $h(e,r){return Cp=8,pu(function(){return e},r)}function a_(e){var r=Wr.context[e.__c],t=Mh(du++,9);return t.c=e,r?(t.__==null&&(t.__=!0,r.sub(Wr)),r.props.value):e.__}function zz(e,r){at.useDebugValue&&at.useDebugValue(r?r(e):e)}function iae(e){var r=Mh(du++,10),t=Me();return r.__=e,Wr.componentDidCatch||(Wr.componentDidCatch=function(n,i){r.__&&r.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function Hz(){var e=Mh(du++,11);if(!e.__){for(var r=Wr.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var t=r.__m||(r.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function sae(){for(var e;e=Fz.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(z1),e.__H.__h.forEach(TT),e.__H.__h=[]}catch(r){e.__H.__h=[],at.__e(r,e.__v)}}at.__b=function(e){Wr=null,AD&&AD(e)},at.__r=function(e){OD&&OD(e),du=0;var r=(Wr=e.__c).__H;r&&(nE===Wr?(r.__h=[],Wr.__h=[],r.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=j1,t.__N=t.i=void 0})):(r.__h.forEach(z1),r.__h.forEach(TT),r.__h=[],du=0)),nE=Wr},at.diffed=function(e){CD&&CD(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(Fz.push(r)!==1&&ID===at.requestAnimationFrame||((ID=at.requestAnimationFrame)||oae)(sae)),r.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==j1&&(t.__=t.__V),t.i=void 0,t.__V=j1})),nE=Wr=null},at.__c=function(e,r){r.some(function(t){try{t.__h.forEach(z1),t.__h=t.__h.filter(function(n){return!n.__||TT(n)})}catch(n){r.some(function(i){i.__h&&(i.__h=[])}),r=[],at.__e(n,t.__v)}}),PD&&PD(e,r)},at.unmount=function(e){ND&&ND(e);var r,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{z1(n)}catch(i){r=i}}),t.__H=void 0,r&&at.__e(r,t.__v))};var RD=typeof requestAnimationFrame=="function";function oae(e){var r,t=function(){clearTimeout(n),RD&&cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100);RD&&(r=requestAnimationFrame(t))}function z1(e){var r=Wr,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),Wr=r}function TT(e){var r=Wr;e.__c=e.__(),Wr=r}function l3(e,r){return!e||e.length!==r.length||r.some(function(t,n){return t!==e[n]})}function Uz(e,r){return typeof r=="function"?r(e):r}function Wz(e,r){for(var t in r)e[t]=r[t];return e}function IT(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var n in r)if(n!=="__source"&&e[n]!==r[n])return!0;return!1}function iE(e,r){return e===r&&(e!==0||1/e==1/r)||e!=e&&r!=r}function Ey(e){this.props=e}function gi(e,r){function t(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),r?!r(this.props,i)||!o:IT(this.props,i)}function n(i){return this.shouldComponentUpdate=t,Je(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Ey.prototype=new jn).isPureReactComponent=!0,Ey.prototype.shouldComponentUpdate=function(e,r){return IT(this.props,e)||IT(this.state,r)};var DD=at.__b;at.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),DD&&DD(e)};var aae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Hr(e){function r(t){var n=Wz({},t);return delete n.ref,e(n,t.ref||null)}return r.$$typeof=aae,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var BD=function(e,r){return e==null?null:Sa(Sa(e).map(r))},qz={map:BD,forEach:BD,count:function(e){return e?Sa(e).length:0},only:function(e){var r=Sa(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:Sa},lae=at.__e;at.__e=function(e,r,t,n){if(e.then){for(var i,s=r;s=s.__;)if((i=s.__c)&&i.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),i.__c(e,r)}lae(e,r,t,n)};var MD=at.unmount;function Kz(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Wz({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Kz(n,r,t)})),e}function Vz(e,r,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Vz(n,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function iy(){this.__u=0,this.t=null,this.__b=null}function Gz(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function Yz(e){var r,t,n;function i(s){if(r||(r=e()).then(function(o){t=o.default||o},function(o){n=o}),n)throw n;if(!t)throw r;return Je(t,s)}return i.displayName="Lazy",i.__f=!0,i}function Qd(){this.u=null,this.o=null}at.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&e.__h===!0&&(e.type=null),MD&&MD(e)},(iy.prototype=new jn).__c=function(e,r){var t=r.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=Gz(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=Vz(u,u.__c.__P,u.__c.__O)}var f;for(n.setState({__a:n.__b=null});f=n.t.pop();)f.forceUpdate()}},l=r.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},iy.prototype.componentWillUnmount=function(){this.t=[]},iy.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Kz(this.__b,t,n.__O=n.__P)}this.__b=null}var i=r.__a&&Je(lt,null,e.fallback);return i&&(i.__h=null),[Je(lt,null,r.__a?null:e.children),i]};var LD=function(e,r,t){if(++t[1]===t[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function uae(e){return this.getChildContext=function(){return e.context},e.children}function cae(e){var r=this,t=e.i;r.componentWillUnmount=function(){Op(null,r.l),r.l=null,r.i=null},r.i&&r.i!==t&&r.componentWillUnmount(),e.__v?(r.l||(r.i=t,r.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),r.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),r.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),r.i.removeChild(n)}}),Op(Je(uae,{context:r.context},e.__v),r.l)):r.l&&r.componentWillUnmount()}function Zz(e,r){var t=Je(cae,{__v:e,i:r});return t.containerInfo=r,t}(Qd.prototype=new jn).__a=function(e){var r=this,t=Gz(r.__v),n=r.o.get(e);return n[0]++,function(i){var s=function(){r.props.revealOrder?(n.push(i),LD(r,e,n)):i()};t?t(s):s()}},Qd.prototype.render=function(e){this.u=null,this.o=new Map;var r=Sa(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.o.set(r[t],this.u=[1,0,this.u]);return e.children},Qd.prototype.componentDidUpdate=Qd.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,t){LD(e,t,r)})};var Xz=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,fae=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,hae=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,dae=/[A-Z0-9]/g,pae=typeof document<"u",vae=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Jz(e,r,t){return r.__k==null&&(r.textContent=""),Op(e,r),typeof t=="function"&&t(),e?e.__c:null}function Qz(e,r,t){return Pz(e,r),typeof t=="function"&&t(),e?e.__c:null}jn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(jn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var FD=at.event;function gae(){}function yae(){return this.cancelBubble}function mae(){return this.defaultPrevented}at.event=function(e){return FD&&(e=FD(e)),e.persist=gae,e.isPropagationStopped=yae,e.isDefaultPrevented=mae,e.nativeEvent=e};var u3,bae={enumerable:!1,configurable:!0,get:function(){return this.class}},jD=at.vnode;at.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,n=r.type,i={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||pae&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||vae(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":hae.test(s)?s=a:n.indexOf("-")===-1&&fae.test(s)?s=s.replace(dae,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Sa(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Sa(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",bae)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),r.props=i}(e),e.$$typeof=Xz,jD&&jD(e)};var zD=at.__r;at.__r=function(e){zD&&zD(e),u3=e.__c};var HD=at.diffed;at.diffed=function(e){HD&&HD(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value),u3=null};var eH={ReactCurrentDispatcher:{current:{readContext:function(e){return u3.__n[e.__c].props.value}}}},wae="17.0.2";function tH(e){return Je.bind(null,e)}function c3(e){return!!e&&e.$$typeof===Xz}function rH(e){return c3(e)?Nz.apply(null,arguments):e}function nH(e){return!!e.__k&&(Op(null,e),!0)}function iH(e){return e&&(e.base||e.nodeType===1&&e)||null}var sH=function(e,r){return e(r)},oH=function(e,r){return e(r)},aH=lt;function f3(e){e()}function lH(e){return e}function uH(){return[!1,f3]}var cH=gm;function fH(e,r){var t=r(),n=Me({h:{__:t,v:r}}),i=n[0].h,s=n[1];return gm(function(){i.__=t,i.v=r,iE(i.__,r())||s({h:i})},[e,t,r]),St(function(){return iE(i.__,i.v())||s({h:i}),e(function(){iE(i.__,i.v())||s({h:i})})},[e]),t}var ka={useState:Me,useId:Hz,useReducer:a3,useEffect:St,useLayoutEffect:gm,useInsertionEffect:cH,useTransition:uH,useDeferredValue:lH,useSyncExternalStore:fH,startTransition:f3,useRef:Vo,useImperativeHandle:jz,useMemo:pu,useCallback:$h,useContext:a_,useDebugValue:zz,version:"17.0.2",Children:qz,render:Jz,hydrate:Qz,unmountComponentAtNode:nH,createPortal:Zz,createElement:Je,createContext:o3,createFactory:tH,cloneElement:rH,createRef:vm,Fragment:lt,isValidElement:c3,findDOMNode:iH,Component:jn,PureComponent:Ey,memo:gi,forwardRef:Hr,flushSync:oH,unstable_batchedUpdates:sH,StrictMode:aH,Suspense:iy,SuspenseList:Qd,lazy:Yz,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:eH};const $ae=Object.freeze(Object.defineProperty({__proto__:null,Children:qz,Component:jn,Fragment:lt,PureComponent:Ey,StrictMode:aH,Suspense:iy,SuspenseList:Qd,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:eH,cloneElement:rH,createContext:o3,createElement:Je,createFactory:tH,createPortal:Zz,createRef:vm,default:ka,findDOMNode:iH,flushSync:oH,forwardRef:Hr,hydrate:Qz,isValidElement:c3,lazy:Yz,memo:gi,render:Jz,startTransition:f3,unmountComponentAtNode:nH,unstable_batchedUpdates:sH,useCallback:$h,useContext:a_,useDebugValue:zz,useDeferredValue:lH,useEffect:St,useErrorBoundary:iae,useId:Hz,useImperativeHandle:jz,useInsertionEffect:cH,useLayoutEffect:gm,useMemo:pu,useReducer:a3,useRef:Vo,useState:Me,useSyncExternalStore:fH,useTransition:uH,version:wae},Symbol.toStringTag,{value:"Module"})),_ae=fv($ae);function xae(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var hH=_ae,Eae=xae(hH);function UD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Sae(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var kae=!!(typeof window<"u"&&window.document&&window.document.createElement);function Tae(e,r,t){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof r!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=e(o.map(function(f){return f.props})),u.canUseDOM?r(a):t&&(a=t(a))}var u=function(f){Sae(c,f);function c(){return f.apply(this,arguments)||this}c.peek=function(){return a},c.rewind=function(){if(c.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var w=a;return a=void 0,o=[],w};var d=c.prototype;return d.UNSAFE_componentWillMount=function(){o.push(this),l()},d.componentDidUpdate=function(){l()},d.componentWillUnmount=function(){var w=o.indexOf(this);o.splice(w,1),l()},d.render=function(){return Eae.createElement(s,this.props)},c}(hH.PureComponent);return UD(u,"displayName","SideEffect("+n(s)+")"),UD(u,"canUseDOM",kae),u}}var Iae=Tae;const Aae=ro(Iae);var Oae=typeof Element<"u",Cae=typeof Map=="function",Pae=typeof Set=="function",Nae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function H1(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,n,i;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(!H1(e[n],r[n]))return!1;return!0}var s;if(Cae&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!H1(n.value[1],r.get(n.value[0])))return!1;return!0}if(Pae&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(Nae&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(n=t;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof r.valueOf=="function")return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof r.toString=="function")return e.toString()===r.toString();if(i=Object.keys(e),t=i.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;if(Oae&&e instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!H1(e[i[n]],r[i[n]]))return!1;return!0}return e!==e&&r!==r}var Rae=function(r,t){try{return H1(r,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Dae=ro(Rae);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var WD=Object.getOwnPropertySymbols,Bae=Object.prototype.hasOwnProperty,Mae=Object.prototype.propertyIsEnumerable;function Lae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Fae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var jae=Fae()?Object.assign:function(e,r){for(var t,n=Lae(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)Bae.call(t,o)&&(n[o]=t[o]);if(WD){i=WD(t);for(var a=0;a<i.length;a++)Mae.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};const zae=ro(jae);var rh={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Xt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Xt).map(function(e){return Xt[e]});var rn={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Aw={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Sy={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Hae=Object.keys(Aw).reduce(function(e,r){return e[Aw[r]]=r,e},{}),Uae=[Xt.NOSCRIPT,Xt.SCRIPT,Xt.STYLE],$a="data-react-helmet",Wae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qae=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},Kae=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Vae=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},qD=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Gae=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e},AT=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Yae=function(r){var t=yp(r,Xt.TITLE),n=yp(r,Sy.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=yp(r,Sy.DEFAULT_TITLE);return t||i||void 0},Zae=function(r){return yp(r,Sy.ON_CHANGE_CLIENT_STATE)||function(){}},sE=function(r,t){return t.filter(function(n){return typeof n[r]<"u"}).map(function(n){return n[r]}).reduce(function(n,i){return _s({},n,i)},{})},Xae=function(r,t){return t.filter(function(n){return typeof n[Xt.BASE]<"u"}).map(function(n){return n[Xt.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(r.indexOf(l)!==-1&&i[l])return n.concat(i)}return n},[])},Ag=function(r,t,n){var i={};return n.filter(function(s){return Array.isArray(s[r])?!0:(typeof s[r]<"u"&&tle("Helmet: "+r+' should be of type "Array". Instead found type "'+Wae(s[r])+'"'),!1)}).map(function(s){return s[r]}).reverse().reduce(function(s,o){var a={};o.filter(function(d){for(var y=void 0,w=Object.keys(d),b=0;b<w.length;b++){var T=w[b],_=T.toLowerCase();t.indexOf(_)!==-1&&!(y===rn.REL&&d[y].toLowerCase()==="canonical")&&!(_===rn.REL&&d[_].toLowerCase()==="stylesheet")&&(y=_),t.indexOf(T)!==-1&&(T===rn.INNER_HTML||T===rn.CSS_TEXT||T===rn.ITEM_PROP)&&(y=T)}if(!y||!d[y])return!1;var A=d[y].toLowerCase();return i[y]||(i[y]={}),a[y]||(a[y]={}),i[y][A]?!1:(a[y][A]=!0,!0)}).reverse().forEach(function(d){return s.push(d)});for(var l=Object.keys(a),u=0;u<l.length;u++){var f=l[u],c=zae({},i[f],a[f]);i[f]=c}return s},[]).reverse()},yp=function(r,t){for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.hasOwnProperty(t))return i[t]}return null},Jae=function(r){return{baseTag:Xae([rn.HREF,rn.TARGET],r),bodyAttributes:sE(rh.BODY,r),defer:yp(r,Sy.DEFER),encode:yp(r,Sy.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:sE(rh.HTML,r),linkTags:Ag(Xt.LINK,[rn.REL,rn.HREF],r),metaTags:Ag(Xt.META,[rn.NAME,rn.CHARSET,rn.HTTPEQUIV,rn.PROPERTY,rn.ITEM_PROP],r),noscriptTags:Ag(Xt.NOSCRIPT,[rn.INNER_HTML],r),onChangeClientState:Zae(r),scriptTags:Ag(Xt.SCRIPT,[rn.SRC,rn.INNER_HTML],r),styleTags:Ag(Xt.STYLE,[rn.CSS_TEXT],r),title:Yae(r),titleAttributes:sE(rh.TITLE,r)}},OT=function(){var e=Date.now();return function(r){var t=Date.now();t-e>16?(e=t,r(t)):setTimeout(function(){OT(r)},0)}}(),KD=function(r){return clearTimeout(r)},Qae=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||OT:global.requestAnimationFrame||OT,ele=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||KD:global.cancelAnimationFrame||KD,tle=function(r){return console&&typeof console.warn=="function"&&console.warn(r)},Og=null,rle=function(r){Og&&ele(Og),r.defer?Og=Qae(function(){VD(r,function(){Og=null})}):(VD(r),Og=null)},VD=function(r,t){var n=r.baseTag,i=r.bodyAttributes,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.onChangeClientState,f=r.scriptTags,c=r.styleTags,d=r.title,y=r.titleAttributes;CT(Xt.BODY,i),CT(Xt.HTML,s),nle(d,y);var w={baseTag:Od(Xt.BASE,n),linkTags:Od(Xt.LINK,o),metaTags:Od(Xt.META,a),noscriptTags:Od(Xt.NOSCRIPT,l),scriptTags:Od(Xt.SCRIPT,f),styleTags:Od(Xt.STYLE,c)},b={},T={};Object.keys(w).forEach(function(_){var A=w[_],x=A.newTags,I=A.oldTags;x.length&&(b[_]=x),I.length&&(T[_]=w[_].oldTags)}),t&&t(),u(r,b,T)},dH=function(r){return Array.isArray(r)?r.join(""):r},nle=function(r,t){typeof r<"u"&&document.title!==r&&(document.title=dH(r)),CT(Xt.TITLE,t)},CT=function(r,t){var n=document.getElementsByTagName(r)[0];if(n){for(var i=n.getAttribute($a),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],f=t[u]||"";n.getAttribute(u)!==f&&n.setAttribute(u,f),s.indexOf(u)===-1&&s.push(u);var c=o.indexOf(u);c!==-1&&o.splice(c,1)}for(var d=o.length-1;d>=0;d--)n.removeAttribute(o[d]);s.length===o.length?n.removeAttribute($a):n.getAttribute($a)!==a.join(",")&&n.setAttribute($a,a.join(","))}},Od=function(r,t){var n=document.head||document.querySelector(Xt.HEAD),i=n.querySelectorAll(r+"["+$a+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(r);for(var f in l)if(l.hasOwnProperty(f))if(f===rn.INNER_HTML)u.innerHTML=l.innerHTML;else if(f===rn.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var c=typeof l[f]>"u"?"":l[f];u.setAttribute(f,c)}u.setAttribute($a,"true"),s.some(function(d,y){return a=y,u.isEqualNode(d)})?s.splice(a,1):o.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:o}},pH=function(r){return Object.keys(r).reduce(function(t,n){var i=typeof r[n]<"u"?n+'="'+r[n]+'"':""+n;return t?t+" "+i:i},"")},ile=function(r,t,n,i){var s=pH(n),o=dH(t);return s?"<"+r+" "+$a+'="true" '+s+">"+AT(o,i)+"</"+r+">":"<"+r+" "+$a+'="true">'+AT(o,i)+"</"+r+">"},sle=function(r,t,n){return t.reduce(function(i,s){var o=Object.keys(s).filter(function(u){return!(u===rn.INNER_HTML||u===rn.CSS_TEXT)}).reduce(function(u,f){var c=typeof s[f]>"u"?f:f+'="'+AT(s[f],n)+'"';return u?u+" "+c:c},""),a=s.innerHTML||s.cssText||"",l=Uae.indexOf(r)===-1;return i+"<"+r+" "+$a+'="true" '+o+(l?"/>":">"+a+"</"+r+">")},"")},vH=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Aw[i]||i]=r[i],n},t)},ole=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(r).reduce(function(n,i){return n[Hae[i]||i]=r[i],n},t)},ale=function(r,t,n){var i,s=(i={key:t},i[$a]=!0,i),o=vH(n,s);return[ka.createElement(Xt.TITLE,o,t)]},lle=function(r,t){return t.map(function(n,i){var s,o=(s={key:i},s[$a]=!0,s);return Object.keys(n).forEach(function(a){var l=Aw[a]||a;if(l===rn.INNER_HTML||l===rn.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=n[a]}),ka.createElement(r,o)})},zl=function(r,t,n){switch(r){case Xt.TITLE:return{toComponent:function(){return ale(r,t.title,t.titleAttributes)},toString:function(){return ile(r,t.title,t.titleAttributes,n)}};case rh.BODY:case rh.HTML:return{toComponent:function(){return vH(t)},toString:function(){return pH(t)}};default:return{toComponent:function(){return lle(r,t)},toString:function(){return sle(r,t,n)}}}},gH=function(r){var t=r.baseTag,n=r.bodyAttributes,i=r.encode,s=r.htmlAttributes,o=r.linkTags,a=r.metaTags,l=r.noscriptTags,u=r.scriptTags,f=r.styleTags,c=r.title,d=c===void 0?"":c,y=r.titleAttributes;return{base:zl(Xt.BASE,t,i),bodyAttributes:zl(rh.BODY,n,i),htmlAttributes:zl(rh.HTML,s,i),link:zl(Xt.LINK,o,i),meta:zl(Xt.META,a,i),noscript:zl(Xt.NOSCRIPT,l,i),script:zl(Xt.SCRIPT,u,i),style:zl(Xt.STYLE,f,i),title:zl(Xt.TITLE,{title:d,titleAttributes:y},i)}},ule=function(r){var t,n;return n=t=function(i){Vae(s,i);function s(){return qae(this,s),Gae(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!Dae(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Xt.SCRIPT:case Xt.NOSCRIPT:return{innerHTML:l};case Xt.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,f=a.arrayTypeChildren,c=a.newChildProps,d=a.nestedChildren;return _s({},f,(l={},l[u.type]=[].concat(f[u.type]||[],[_s({},c,this.mapNestedChildrenToProps(u,d))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,u,f=a.child,c=a.newProps,d=a.newChildProps,y=a.nestedChildren;switch(f.type){case Xt.TITLE:return _s({},c,(l={},l[f.type]=y,l.titleAttributes=_s({},d),l));case Xt.BODY:return _s({},c,{bodyAttributes:_s({},d)});case Xt.HTML:return _s({},c,{htmlAttributes:_s({},d)})}return _s({},c,(u={},u[f.type]=_s({},d),u))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=_s({},l);return Object.keys(a).forEach(function(f){var c;u=_s({},u,(c={},c[f]=a[f],c))}),u},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var u=this,f={};return ka.Children.forEach(a,function(c){if(!(!c||!c.props)){var d=c.props,y=d.children,w=qD(d,["children"]),b=ole(w);switch(u.warnOnInvalidChildren(c,y),c.type){case Xt.LINK:case Xt.META:case Xt.NOSCRIPT:case Xt.SCRIPT:case Xt.STYLE:f=u.flattenArrayTypeChildren({child:c,arrayTypeChildren:f,newChildProps:b,nestedChildren:y});break;default:l=u.mapObjectTypeChildren({child:c,newProps:l,newChildProps:b,nestedChildren:y});break}}}),l=this.mapArrayTypeChildrenToProps(f,l),l},s.prototype.render=function(){var a=this.props,l=a.children,u=qD(a,["children"]),f=_s({},u);return l&&(f=this.mapChildrenToProps(l,f)),ka.createElement(r,f)},Kae(s,null,[{key:"canUseDOM",set:function(a){r.canUseDOM=a}}]),s}(ka.Component),t.propTypes={base:tn.object,bodyAttributes:tn.object,children:tn.oneOfType([tn.arrayOf(tn.node),tn.node]),defaultTitle:tn.string,defer:tn.bool,encodeSpecialCharacters:tn.bool,htmlAttributes:tn.object,link:tn.arrayOf(tn.object),meta:tn.arrayOf(tn.object),noscript:tn.arrayOf(tn.object),onChangeClientState:tn.func,script:tn.arrayOf(tn.object),style:tn.arrayOf(tn.object),title:tn.string,titleAttributes:tn.object,titleTemplate:tn.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=r.peek,t.rewind=function(){var i=r.rewind();return i||(i=gH({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},cle=function(){return null},fle=Aae(Jae,rle,gH)(cle),_h=ule(fle);_h.renderStatic=_h.rewind;var hle={};function Ug(e,r){for(var t in r)e[t]=r[t];return e}function PT(e,r,t){var n,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),o={};if(s&&s[1])for(var a=s[1].split("&"),l=0;l<a.length;l++){var u=a[l].split("=");o[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=NT(e.replace(i,"")),r=NT(r||"");for(var f=Math.max(e.length,r.length),c=0;c<f;c++)if(r[c]&&r[c].charAt(0)===":"){var d=r[c].replace(/(^:|[+*?]+$)/g,""),y=(r[c].match(/[+*?]+$/)||hle)[0]||"",w=~y.indexOf("+"),b=~y.indexOf("*"),T=e[c]||"";if(!T&&!b&&(y.indexOf("?")<0||w)){n=!1;break}if(o[d]=decodeURIComponent(T),w||b){o[d]=e.slice(c).map(decodeURIComponent).join("/");break}}else if(r[c]!==e[c]){n=!1;break}return(t.default===!0||n!==!1)&&o}function dle(e,r){return e.rank<r.rank?1:e.rank>r.rank?-1:e.index-r.index}function ple(e,r){return e.index=r,e.rank=function(t){return t.props.default?0:NT(t.props.path).map(vle).join("")}(e),e.props}function NT(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function vle(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var gle={},nh=[],sy=[],Vs=null,h3={url:d3()},yH=o3(h3);function yle(){var e=a_(yH);if(e===h3){var r=Me()[1];St(function(){return sy.push(r),function(){return sy.splice(sy.indexOf(r),1)}},[])}return[e,_r]}function d3(){var e;return""+((e=Vs&&Vs.location?Vs.location:Vs&&Vs.getCurrentLocation?Vs.getCurrentLocation():typeof location<"u"?location:gle).pathname||"")+(e.search||"")}function _r(e,r){return r===void 0&&(r=!1),typeof e!="string"&&e.url&&(r=e.replace,e=e.url),function(t){for(var n=nh.length;n--;)if(nh[n].canRoute(t))return!0;return!1}(e)&&function(t,n){n===void 0&&(n="push"),Vs&&Vs[n]?Vs[n](t):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,t)}(e,r?"replace":"push"),mH(e)}function mH(e){for(var r=!1,t=0;t<nh.length;t++)nh[t].routeTo(e)&&(r=!0);return r}function mle(e){if(e&&e.getAttribute){var r=e.getAttribute("href"),t=e.getAttribute("target");if(r&&r.match(/^\//g)&&(!t||t.match(/^_?self$/i)))return _r(r)}}function ble(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function bH(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var r=e.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(mle(r))return ble(e)}while(r=r.parentNode)}}var GD=!1;function wH(e){e.history&&(Vs=e.history),this.state={url:e.url||d3()}}Ug(wH.prototype=new jn,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var r=Sa(this.props.children);return this.g(r,e)!==void 0},routeTo:function(e){this.setState({url:e});var r=this.canRoute(e);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;GD||(GD=!0,Vs||addEventListener("popstate",function(){mH(d3())}),addEventListener("click",bH)),nh.push(this),Vs&&(this.u=Vs.listen(function(r){var t=r.location||r;e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),nh.splice(nh.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,r){e=e.filter(ple).sort(dle);for(var t=0;t<e.length;t++){var n=e[t],i=PT(r,n.props.path,n.props);if(i)return[n,i]}},render:function(e,r){var t,n,i=e.onChange,s=r.url,o=this.c,a=this.g(Sa(e.children),s);if(a&&(n=Nz(a[0],Ug(Ug({url:s,matches:t=a[1]},t),{key:void 0,ref:void 0}))),s!==(o&&o.url)){Ug(h3,o=this.c={url:s,previous:o&&o.url,current:n,path:n?n.props.path:null,matches:t}),o.router=this,o.active=n?[n]:[];for(var l=sy.length;l--;)sy[l]({});typeof i=="function"&&i(o)}return Je(yH.Provider,{value:o},n)}});var Qt=function(e){return Je("a",Ug({onClick:bH},e))};function wle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const $le=Hr(wle),$H=$le;function _le({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const xle=Hr(_le),Ele=xle;function Sle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}const kle=Hr(Sle),Tle=kle;function Ile({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))}const Ale=Hr(Ile),Ole=Ale;function Cle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Ple=Hr(Cle),Nle=Ple;function Rle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Dle=Hr(Rle),_H=Dle;function Ble({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Mle=Hr(Ble),xH=Mle;function Lle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Fle=Hr(Lle),EH=Fle;function jle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const zle=Hr(jle),Hle=zle;function Ule({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const Wle=Hr(Ule),p3=Wle;function qle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Kle=Hr(qle),Vle=Kle;function Gle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"}))}const Yle=Hr(Gle),Zle=Yle;function Xle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const Jle=Hr(Xle),SH=Jle;function Qle({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z",clipRule:"evenodd"}))}const eue=Hr(Qle),tue=eue;function rue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const nue=Hr(rue),iue=nue;function sue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))}const oue=Hr(sue),aue=oue;function lue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const uue=Hr(lue),v3=uue;function cue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),Je("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const fue=Hr(cue),kH=fue;function hue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const due=Hr(hue),pue=due;function vue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z",clipRule:"evenodd"}))}const gue=Hr(vue),TH=gue;function yue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}))}const mue=Hr(yue),IH=mue;function bue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const wue=Hr(bue),g3=wue;function $ue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const _ue=Hr($ue),xue=_ue;function Eue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const Sue=Hr(Eue),AH=Sue;function kue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z",clipRule:"evenodd"}))}const Tue=Hr(kue),Iue=Tue;function Aue({title:e,titleId:r,...t},n){return Je("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":r},t),e?Je("title",{id:r},e):null,Je("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const Oue=Hr(Aue),OH=Oue;var Cue=0;function v(e,r,t,n,i,s){var o,a,l={};for(a in r)a=="ref"?o=r[a]:l[a]=r[a];var u={type:e,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Cue,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return at.vnode&&at.vnode(u),u}const eo={video:v("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:v("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),magnifyingGlassBold:({width:e})=>v("svg",{fill:"none",width:e,viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),close:v("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:v("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:v("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[v("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),v("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:v("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[v("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),v("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),v("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),newFollower:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:v("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:v("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),search:v("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:v("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:v("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),network:v("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:v("g",{children:[v("g",{children:[v("g",{children:v("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),v("g",{children:v("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),v("g",{children:v("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),v("g",{children:v("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),v("g",{children:v("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),v("g",{children:v("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),checkmark:v("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:v("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})})};function Wg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CH={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,r){(function(t){e.exports=t()})(function(){return function t(n,i,s){function o(u,f){if(!i[u]){if(!n[u]){var c=typeof Wg=="function"&&Wg;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(w){var b=n[u][1][w];return o(b||w)},y,y.exports,t,n,i,s)}return i[u].exports}for(var a=typeof Wg=="function"&&Wg,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(w),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),a=function(){f.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:a=function(){setTimeout(w,0)};var d,y=[];function w(){d=!0;for(var T,_,A=y.length;A;){for(_=y,y=[],T=-1;++T<A;)_[T]();A=y.length}d=!1}n.exports=b;function b(T){y.push(T)===1&&!d&&a()}}).call(this,typeof On<"u"?On:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];n.exports=c;function c(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,O!==o&&b(this,O)}c.prototype.catch=function(O){return this.then(null,O)},c.prototype.then=function(O,C){if(typeof O!="function"&&this.state===u||typeof C!="function"&&this.state===l)return this;var g=new this.constructor(o);if(this.state!==f){var M=this.state===u?O:C;y(g,M,this.outcome)}else this.queue.push(new d(g,O,C));return g};function d(O,C,g){this.promise=O,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(O){a.resolve(this.promise,O)},d.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},d.prototype.callRejected=function(O){a.reject(this.promise,O)},d.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)};function y(O,C,g){s(function(){var M;try{M=C(g)}catch(B){return a.reject(O,B)}M===O?a.reject(O,new TypeError("Cannot resolve promise with itself")):a.resolve(O,M)})}a.resolve=function(O,C){var g=T(w,C);if(g.status==="error")return a.reject(O,g.value);var M=g.value;if(M)b(O,M);else{O.state=u,O.outcome=C;for(var B=-1,L=O.queue.length;++B<L;)O.queue[B].callFulfilled(C)}return O},a.reject=function(O,C){O.state=l,O.outcome=C;for(var g=-1,M=O.queue.length;++g<M;)O.queue[g].callRejected(C);return O};function w(O){var C=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof C=="function")return function(){C.apply(O,arguments)}}function b(O,C){var g=!1;function M(Q){g||(g=!0,a.reject(O,Q))}function B(Q){g||(g=!0,a.resolve(O,Q))}function L(){C(B,M)}var q=T(L);q.status==="error"&&M(q.value)}function T(O,C){var g={};try{g.value=O(C),g.status="success"}catch(M){g.status="error",g.value=M}return g}c.resolve=_;function _(O){return O instanceof this?O:a.resolve(new this(o),O)}c.reject=A;function A(O){var C=new this(o);return a.reject(C,O)}c.all=x;function x(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,M=!1;if(!g)return this.resolve([]);for(var B=new Array(g),L=0,q=-1,Q=new this(o);++q<g;)re(O[q],q);return Q;function re(Z,j){C.resolve(Z).then(X,function(ie){M||(M=!0,a.reject(Q,ie))});function X(ie){B[j]=ie,++L===g&&!M&&(M=!0,a.resolve(Q,B))}}}c.race=I;function I(O){var C=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=O.length,M=!1;if(!g)return this.resolve([]);for(var B=-1,L=new this(o);++B<g;)q(O[B]);return L;function q(Q){C.resolve(Q).then(function(re){M||(M=!0,a.resolve(L,re))},function(re){M||(M=!0,a.reject(L,re))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof On<"u"?On:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,le){if(!(Y instanceof le))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),le=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||le)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(Y,le){Y=Y||[],le=le||{};try{return new Blob(Y,le)}catch(be){if(be.name!=="TypeError")throw be;for(var te=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,we=new te,Se=0;Se<Y.length;Se+=1)we.append(Y[Se]);return we.getBlob(le.type)}}typeof Promise>"u"&&t(3);var c=Promise;function d(Y,le){le&&Y.then(function(te){le(null,te)},function(te){le(te)})}function y(Y,le,te){typeof le=="function"&&Y.then(le),typeof te=="function"&&Y.catch(te)}function w(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",_=void 0,A={},x=Object.prototype.toString,I="readonly",O="readwrite";function C(Y){for(var le=Y.length,te=new ArrayBuffer(le),we=new Uint8Array(te),Se=0;Se<le;Se++)we[Se]=Y.charCodeAt(Se);return te}function g(Y){return new c(function(le){var te=Y.transaction(T,O),we=f([""]);te.objectStore(T).put(we,"key"),te.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),le(!1)},te.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),be=navigator.userAgent.match(/Edge\//);le(be||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function M(Y){return typeof _=="boolean"?c.resolve(_):g(Y).then(function(le){return _=le,_})}function B(Y){var le=A[Y.name],te={};te.promise=new c(function(we,Se){te.resolve=we,te.reject=Se}),le.deferredOperations.push(te),le.dbReady?le.dbReady=le.dbReady.then(function(){return te.promise}):le.dbReady=te.promise}function L(Y){var le=A[Y.name],te=le.deferredOperations.pop();if(te)return te.resolve(),te.promise}function q(Y,le){var te=A[Y.name],we=te.deferredOperations.pop();if(we)return we.reject(le),we.promise}function Q(Y,le){return new c(function(te,we){if(A[Y.name]=A[Y.name]||Ve(),Y.db)if(le)B(Y),Y.db.close();else return te(Y.db);var Se=[Y.name];le&&Se.push(Y.version);var be=l.open.apply(l,Se);le&&(be.onupgradeneeded=function(Fe){var Ye=be.result;try{Ye.createObjectStore(Y.storeName),Fe.oldVersion<=1&&Ye.createObjectStore(T)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Fe.oldVersion+" to version "+Fe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Qe}}),be.onerror=function(Fe){Fe.preventDefault(),we(be.error)},be.onsuccess=function(){var Fe=be.result;Fe.onversionchange=function(Ye){Ye.target.close()},te(Fe),L(Y)}})}function re(Y){return Q(Y,!1)}function Z(Y){return Q(Y,!0)}function j(Y,le){if(!Y.db)return!0;var te=!Y.db.objectStoreNames.contains(Y.storeName),we=Y.version<Y.db.version,Se=Y.version>Y.db.version;if(we&&(Y.version!==le&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),Se||te){if(te){var be=Y.db.version+1;be>Y.version&&(Y.version=be)}return!0}return!1}function X(Y){return new c(function(le,te){var we=new FileReader;we.onerror=te,we.onloadend=function(Se){var be=btoa(Se.target.result||"");le({__local_forage_encoded_blob:!0,data:be,type:Y.type})},we.readAsBinaryString(Y)})}function ie(Y){var le=C(atob(Y.data));return f([le],{type:Y.type})}function Ee(Y){return Y&&Y.__local_forage_encoded_blob}function $e(Y){var le=this,te=le._initReady().then(function(){var we=A[le._dbInfo.name];if(we&&we.dbReady)return we.dbReady});return y(te,Y,Y),te}function Pe(Y){B(Y);for(var le=A[Y.name],te=le.forages,we=0;we<te.length;we++){var Se=te[we];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return Y.db=null,re(Y).then(function(be){return Y.db=be,j(Y)?Z(Y):be}).then(function(be){Y.db=le.db=be;for(var Fe=0;Fe<te.length;Fe++)te[Fe]._dbInfo.db=be}).catch(function(be){throw q(Y,be),be})}function He(Y,le,te,we){we===void 0&&(we=1);try{var Se=Y.db.transaction(Y.storeName,le);te(null,Se)}catch(be){if(we>0&&(!Y.db||be.name==="InvalidStateError"||be.name==="NotFoundError"))return c.resolve().then(function(){if(!Y.db||be.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),Z(Y)}).then(function(){return Pe(Y).then(function(){He(Y,le,te,we-1)})}).catch(te);te(be)}}function Ve(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function it(Y){var le=this,te={db:null};if(Y)for(var we in Y)te[we]=Y[we];var Se=A[te.name];Se||(Se=Ve(),A[te.name]=Se),Se.forages.push(le),le._initReady||(le._initReady=le.ready,le.ready=$e);var be=[];function Fe(){return c.resolve()}for(var Ye=0;Ye<Se.forages.length;Ye++){var Qe=Se.forages[Ye];Qe!==le&&be.push(Qe._initReady().catch(Fe))}var tt=Se.forages.slice(0);return c.all(be).then(function(){return te.db=Se.db,re(te)}).then(function(ot){return te.db=ot,j(te,le._defaultConfig.version)?Z(te):ot}).then(function(ot){te.db=Se.db=ot,le._dbInfo=te;for(var xt=0;xt<tt.length;xt++){var Lt=tt[xt];Lt!==le&&(Lt._dbInfo.db=te.db,Lt._dbInfo.version=te.version)}})}function _e(Y,le){var te=this;Y=w(Y);var we=new c(function(Se,be){te.ready().then(function(){He(te._dbInfo,I,function(Fe,Ye){if(Fe)return be(Fe);try{var Qe=Ye.objectStore(te._dbInfo.storeName),tt=Qe.get(Y);tt.onsuccess=function(){var ot=tt.result;ot===void 0&&(ot=null),Ee(ot)&&(ot=ie(ot)),Se(ot)},tt.onerror=function(){be(tt.error)}}catch(ot){be(ot)}})}).catch(be)});return d(we,le),we}function ge(Y,le){var te=this,we=new c(function(Se,be){te.ready().then(function(){He(te._dbInfo,I,function(Fe,Ye){if(Fe)return be(Fe);try{var Qe=Ye.objectStore(te._dbInfo.storeName),tt=Qe.openCursor(),ot=1;tt.onsuccess=function(){var xt=tt.result;if(xt){var Lt=xt.value;Ee(Lt)&&(Lt=ie(Lt));var mr=Y(Lt,xt.key,ot++);mr!==void 0?Se(mr):xt.continue()}else Se()},tt.onerror=function(){be(tt.error)}}catch(xt){be(xt)}})}).catch(be)});return d(we,le),we}function Te(Y,le,te){var we=this;Y=w(Y);var Se=new c(function(be,Fe){var Ye;we.ready().then(function(){return Ye=we._dbInfo,x.call(le)==="[object Blob]"?M(Ye.db).then(function(Qe){return Qe?le:X(le)}):le}).then(function(Qe){He(we._dbInfo,O,function(tt,ot){if(tt)return Fe(tt);try{var xt=ot.objectStore(we._dbInfo.storeName);Qe===null&&(Qe=void 0);var Lt=xt.put(Qe,Y);ot.oncomplete=function(){Qe===void 0&&(Qe=null),be(Qe)},ot.onabort=ot.onerror=function(){var mr=Lt.error?Lt.error:Lt.transaction.error;Fe(mr)}}catch(mr){Fe(mr)}})}).catch(Fe)});return d(Se,te),Se}function je(Y,le){var te=this;Y=w(Y);var we=new c(function(Se,be){te.ready().then(function(){He(te._dbInfo,O,function(Fe,Ye){if(Fe)return be(Fe);try{var Qe=Ye.objectStore(te._dbInfo.storeName),tt=Qe.delete(Y);Ye.oncomplete=function(){Se()},Ye.onerror=function(){be(tt.error)},Ye.onabort=function(){var ot=tt.error?tt.error:tt.transaction.error;be(ot)}}catch(ot){be(ot)}})}).catch(be)});return d(we,le),we}function $(Y){var le=this,te=new c(function(we,Se){le.ready().then(function(){He(le._dbInfo,O,function(be,Fe){if(be)return Se(be);try{var Ye=Fe.objectStore(le._dbInfo.storeName),Qe=Ye.clear();Fe.oncomplete=function(){we()},Fe.onabort=Fe.onerror=function(){var tt=Qe.error?Qe.error:Qe.transaction.error;Se(tt)}}catch(tt){Se(tt)}})}).catch(Se)});return d(te,Y),te}function S(Y){var le=this,te=new c(function(we,Se){le.ready().then(function(){He(le._dbInfo,I,function(be,Fe){if(be)return Se(be);try{var Ye=Fe.objectStore(le._dbInfo.storeName),Qe=Ye.count();Qe.onsuccess=function(){we(Qe.result)},Qe.onerror=function(){Se(Qe.error)}}catch(tt){Se(tt)}})}).catch(Se)});return d(te,Y),te}function N(Y,le){var te=this,we=new c(function(Se,be){if(Y<0){Se(null);return}te.ready().then(function(){He(te._dbInfo,I,function(Fe,Ye){if(Fe)return be(Fe);try{var Qe=Ye.objectStore(te._dbInfo.storeName),tt=!1,ot=Qe.openKeyCursor();ot.onsuccess=function(){var xt=ot.result;if(!xt){Se(null);return}Y===0||tt?Se(xt.key):(tt=!0,xt.advance(Y))},ot.onerror=function(){be(ot.error)}}catch(xt){be(xt)}})}).catch(be)});return d(we,le),we}function F(Y){var le=this,te=new c(function(we,Se){le.ready().then(function(){He(le._dbInfo,I,function(be,Fe){if(be)return Se(be);try{var Ye=Fe.objectStore(le._dbInfo.storeName),Qe=Ye.openKeyCursor(),tt=[];Qe.onsuccess=function(){var ot=Qe.result;if(!ot){we(tt);return}tt.push(ot.key),ot.continue()},Qe.onerror=function(){Se(Qe.error)}}catch(ot){Se(ot)}})}).catch(Se)});return d(te,Y),te}function z(Y,le){le=b.apply(this,arguments);var te=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||te.name,Y.storeName=Y.storeName||te.storeName);var we=this,Se;if(!Y.name)Se=c.reject("Invalid arguments");else{var be=Y.name===te.name&&we._dbInfo.db,Fe=be?c.resolve(we._dbInfo.db):re(Y).then(function(Ye){var Qe=A[Y.name],tt=Qe.forages;Qe.db=Ye;for(var ot=0;ot<tt.length;ot++)tt[ot]._dbInfo.db=Ye;return Ye});Y.storeName?Se=Fe.then(function(Ye){if(Ye.objectStoreNames.contains(Y.storeName)){var Qe=Ye.version+1;B(Y);var tt=A[Y.name],ot=tt.forages;Ye.close();for(var xt=0;xt<ot.length;xt++){var Lt=ot[xt];Lt._dbInfo.db=null,Lt._dbInfo.version=Qe}var mr=new c(function(lr,Gr){var Cr=l.open(Y.name,Qe);Cr.onerror=function(ln){var Di=Cr.result;Di.close(),Gr(ln)},Cr.onupgradeneeded=function(){var ln=Cr.result;ln.deleteObjectStore(Y.storeName)},Cr.onsuccess=function(){var ln=Cr.result;ln.close(),lr(ln)}});return mr.then(function(lr){tt.db=lr;for(var Gr=0;Gr<ot.length;Gr++){var Cr=ot[Gr];Cr._dbInfo.db=lr,L(Cr._dbInfo)}}).catch(function(lr){throw(q(Y,lr)||c.resolve()).catch(function(){}),lr})}}):Se=Fe.then(function(Ye){B(Y);var Qe=A[Y.name],tt=Qe.forages;Ye.close();for(var ot=0;ot<tt.length;ot++){var xt=tt[ot];xt._dbInfo.db=null}var Lt=new c(function(mr,lr){var Gr=l.deleteDatabase(Y.name);Gr.onerror=function(){var Cr=Gr.result;Cr&&Cr.close(),lr(Gr.error)},Gr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Gr.onsuccess=function(){var Cr=Gr.result;Cr&&Cr.close(),mr(Cr)}});return Lt.then(function(mr){Qe.db=mr;for(var lr=0;lr<tt.length;lr++){var Gr=tt[lr];L(Gr._dbInfo)}}).catch(function(mr){throw(q(Y,mr)||c.resolve()).catch(function(){}),mr})})}return d(Se,le),Se}var V={_driver:"asyncStorage",_initStorage:it,_support:u(),iterate:ge,getItem:_e,setItem:Te,removeItem:je,clear:$,length:S,key:N,keys:F,dropInstance:z};function ae(){return typeof openDatabase=="function"}var ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",ze=/^~~local_forage_type~([^~]+)~/,st="__lfsc__:",wt=st.length,mt="arbf",pt="blob",Rt="si08",dr="ui08",Vr="uic8",ct="si16",It="si32",pn="ur16",Pi="ui32",Wi="fl32",vn="fl64",ds=wt+mt.length,uo=Object.prototype.toString;function Ni(Y){var le=Y.length*.75,te=Y.length,we,Se=0,be,Fe,Ye,Qe;Y[Y.length-1]==="="&&(le--,Y[Y.length-2]==="="&&le--);var tt=new ArrayBuffer(le),ot=new Uint8Array(tt);for(we=0;we<te;we+=4)be=ye.indexOf(Y[we]),Fe=ye.indexOf(Y[we+1]),Ye=ye.indexOf(Y[we+2]),Qe=ye.indexOf(Y[we+3]),ot[Se++]=be<<2|Fe>>4,ot[Se++]=(Fe&15)<<4|Ye>>2,ot[Se++]=(Ye&3)<<6|Qe&63;return tt}function qi(Y){var le=new Uint8Array(Y),te="",we;for(we=0;we<le.length;we+=3)te+=ye[le[we]>>2],te+=ye[(le[we]&3)<<4|le[we+1]>>4],te+=ye[(le[we+1]&15)<<2|le[we+2]>>6],te+=ye[le[we+2]&63];return le.length%3===2?te=te.substring(0,te.length-1)+"=":le.length%3===1&&(te=te.substring(0,te.length-2)+"=="),te}function co(Y,le){var te="";if(Y&&(te=uo.call(Y)),Y&&(te==="[object ArrayBuffer]"||Y.buffer&&uo.call(Y.buffer)==="[object ArrayBuffer]")){var we,Se=st;Y instanceof ArrayBuffer?(we=Y,Se+=mt):(we=Y.buffer,te==="[object Int8Array]"?Se+=Rt:te==="[object Uint8Array]"?Se+=dr:te==="[object Uint8ClampedArray]"?Se+=Vr:te==="[object Int16Array]"?Se+=ct:te==="[object Uint16Array]"?Se+=pn:te==="[object Int32Array]"?Se+=It:te==="[object Uint32Array]"?Se+=Pi:te==="[object Float32Array]"?Se+=Wi:te==="[object Float64Array]"?Se+=vn:le(new Error("Failed to get type for BinaryArray"))),le(Se+qi(we))}else if(te==="[object Blob]"){var be=new FileReader;be.onload=function(){var Fe=Ue+Y.type+"~"+qi(this.result);le(st+pt+Fe)},be.readAsArrayBuffer(Y)}else try{le(JSON.stringify(Y))}catch(Fe){console.error("Couldn't convert value into a JSON string: ",Y),le(null,Fe)}}function rf(Y){if(Y.substring(0,wt)!==st)return JSON.parse(Y);var le=Y.substring(ds),te=Y.substring(wt,ds),we;if(te===pt&&ze.test(le)){var Se=le.match(ze);we=Se[1],le=le.substring(Se[0].length)}var be=Ni(le);switch(te){case mt:return be;case pt:return f([be],{type:we});case Rt:return new Int8Array(be);case dr:return new Uint8Array(be);case Vr:return new Uint8ClampedArray(be);case ct:return new Int16Array(be);case pn:return new Uint16Array(be);case It:return new Int32Array(be);case Pi:return new Uint32Array(be);case Wi:return new Float32Array(be);case vn:return new Float64Array(be);default:throw new Error("Unkown type: "+te)}}var fo={serialize:co,deserialize:rf,stringToBuffer:Ni,bufferToString:qi};function nf(Y,le,te,we){Y.executeSql("CREATE TABLE IF NOT EXISTS "+le.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],te,we)}function td(Y){var le=this,te={db:null};if(Y)for(var we in Y)te[we]=typeof Y[we]!="string"?Y[we].toString():Y[we];var Se=new c(function(be,Fe){try{te.db=openDatabase(te.name,String(te.version),te.description,te.size)}catch(Ye){return Fe(Ye)}te.db.transaction(function(Ye){nf(Ye,te,function(){le._dbInfo=te,be()},function(Qe,tt){Fe(tt)})},Fe)});return te.serializer=fo,Se}function ho(Y,le,te,we,Se,be){Y.executeSql(te,we,Se,function(Fe,Ye){Ye.code===Ye.SYNTAX_ERR?Fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[le.storeName],function(Qe,tt){tt.rows.length?be(Qe,Ye):nf(Qe,le,function(){Qe.executeSql(te,we,Se,be)},be)},be):be(Fe,Ye)},be)}function ea(Y,le){var te=this;Y=w(Y);var we=new c(function(Se,be){te.ready().then(function(){var Fe=te._dbInfo;Fe.db.transaction(function(Ye){ho(Ye,Fe,"SELECT * FROM "+Fe.storeName+" WHERE key = ? LIMIT 1",[Y],function(Qe,tt){var ot=tt.rows.length?tt.rows.item(0).value:null;ot&&(ot=Fe.serializer.deserialize(ot)),Se(ot)},function(Qe,tt){be(tt)})})}).catch(be)});return d(we,le),we}function Ma(Y,le){var te=this,we=new c(function(Se,be){te.ready().then(function(){var Fe=te._dbInfo;Fe.db.transaction(function(Ye){ho(Ye,Fe,"SELECT * FROM "+Fe.storeName,[],function(Qe,tt){for(var ot=tt.rows,xt=ot.length,Lt=0;Lt<xt;Lt++){var mr=ot.item(Lt),lr=mr.value;if(lr&&(lr=Fe.serializer.deserialize(lr)),lr=Y(lr,mr.key,Lt+1),lr!==void 0){Se(lr);return}}Se()},function(Qe,tt){be(tt)})})}).catch(be)});return d(we,le),we}function sf(Y,le,te,we){var Se=this;Y=w(Y);var be=new c(function(Fe,Ye){Se.ready().then(function(){le===void 0&&(le=null);var Qe=le,tt=Se._dbInfo;tt.serializer.serialize(le,function(ot,xt){xt?Ye(xt):tt.db.transaction(function(Lt){ho(Lt,tt,"INSERT OR REPLACE INTO "+tt.storeName+" (key, value) VALUES (?, ?)",[Y,ot],function(){Fe(Qe)},function(mr,lr){Ye(lr)})},function(Lt){if(Lt.code===Lt.QUOTA_ERR){if(we>0){Fe(sf.apply(Se,[Y,Qe,te,we-1]));return}Ye(Lt)}})})}).catch(Ye)});return d(be,te),be}function rd(Y,le,te){return sf.apply(this,[Y,le,te,1])}function Ri(Y,le){var te=this;Y=w(Y);var we=new c(function(Se,be){te.ready().then(function(){var Fe=te._dbInfo;Fe.db.transaction(function(Ye){ho(Ye,Fe,"DELETE FROM "+Fe.storeName+" WHERE key = ?",[Y],function(){Se()},function(Qe,tt){be(tt)})})}).catch(be)});return d(we,le),we}function ii(Y){var le=this,te=new c(function(we,Se){le.ready().then(function(){var be=le._dbInfo;be.db.transaction(function(Fe){ho(Fe,be,"DELETE FROM "+be.storeName,[],function(){we()},function(Ye,Qe){Se(Qe)})})}).catch(Se)});return d(te,Y),te}function Pu(Y){var le=this,te=new c(function(we,Se){le.ready().then(function(){var be=le._dbInfo;be.db.transaction(function(Fe){ho(Fe,be,"SELECT COUNT(key) as c FROM "+be.storeName,[],function(Ye,Qe){var tt=Qe.rows.item(0).c;we(tt)},function(Ye,Qe){Se(Qe)})})}).catch(Se)});return d(te,Y),te}function Jv(Y,le){var te=this,we=new c(function(Se,be){te.ready().then(function(){var Fe=te._dbInfo;Fe.db.transaction(function(Ye){ho(Ye,Fe,"SELECT key FROM "+Fe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Qe,tt){var ot=tt.rows.length?tt.rows.item(0).key:null;Se(ot)},function(Qe,tt){be(tt)})})}).catch(be)});return d(we,le),we}function nd(Y){var le=this,te=new c(function(we,Se){le.ready().then(function(){var be=le._dbInfo;be.db.transaction(function(Fe){ho(Fe,be,"SELECT key FROM "+be.storeName,[],function(Ye,Qe){for(var tt=[],ot=0;ot<Qe.rows.length;ot++)tt.push(Qe.rows.item(ot).key);we(tt)},function(Ye,Qe){Se(Qe)})})}).catch(Se)});return d(te,Y),te}function id(Y){return new c(function(le,te){Y.transaction(function(we){we.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,be){for(var Fe=[],Ye=0;Ye<be.rows.length;Ye++)Fe.push(be.rows.item(Ye).name);le({db:Y,storeNames:Fe})},function(Se,be){te(be)})},function(we){te(we)})})}function po(Y,le){le=b.apply(this,arguments);var te=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||te.name,Y.storeName=Y.storeName||te.storeName);var we=this,Se;return Y.name?Se=new c(function(be){var Fe;Y.name===te.name?Fe=we._dbInfo.db:Fe=openDatabase(Y.name,"","",0),Y.storeName?be({db:Fe,storeNames:[Y.storeName]}):be(id(Fe))}).then(function(be){return new c(function(Fe,Ye){be.db.transaction(function(Qe){function tt(mr){return new c(function(lr,Gr){Qe.executeSql("DROP TABLE IF EXISTS "+mr,[],function(){lr()},function(Cr,ln){Gr(ln)})})}for(var ot=[],xt=0,Lt=be.storeNames.length;xt<Lt;xt++)ot.push(tt(be.storeNames[xt]));c.all(ot).then(function(){Fe()}).catch(function(mr){Ye(mr)})},function(Qe){Ye(Qe)})})}):Se=c.reject("Invalid arguments"),d(Se,le),Se}var La={_driver:"webSQLStorage",_initStorage:td,_support:ae(),iterate:Ma,getItem:ea,setItem:rd,removeItem:Ri,clear:ii,length:Pu,key:Jv,keys:nd,dropInstance:po};function Sl(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function kl(Y,le){var te=Y.name+"/";return Y.storeName!==le.storeName&&(te+=Y.storeName+"/"),te}function Qv(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function eg(){return!Qv()||localStorage.length>0}function tg(Y){var le=this,te={};if(Y)for(var we in Y)te[we]=Y[we];return te.keyPrefix=kl(Y,le._defaultConfig),eg()?(le._dbInfo=te,te.serializer=fo,c.resolve()):c.reject()}function sd(Y){var le=this,te=le.ready().then(function(){for(var we=le._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var be=localStorage.key(Se);be.indexOf(we)===0&&localStorage.removeItem(be)}});return d(te,Y),te}function rg(Y,le){var te=this;Y=w(Y);var we=te.ready().then(function(){var Se=te._dbInfo,be=localStorage.getItem(Se.keyPrefix+Y);return be&&(be=Se.serializer.deserialize(be)),be});return d(we,le),we}function ng(Y,le){var te=this,we=te.ready().then(function(){for(var Se=te._dbInfo,be=Se.keyPrefix,Fe=be.length,Ye=localStorage.length,Qe=1,tt=0;tt<Ye;tt++){var ot=localStorage.key(tt);if(ot.indexOf(be)===0){var xt=localStorage.getItem(ot);if(xt&&(xt=Se.serializer.deserialize(xt)),xt=Y(xt,ot.substring(Fe),Qe++),xt!==void 0)return xt}}});return d(we,le),we}function od(Y,le){var te=this,we=te.ready().then(function(){var Se=te._dbInfo,be;try{be=localStorage.key(Y)}catch{be=null}return be&&(be=be.substring(Se.keyPrefix.length)),be});return d(we,le),we}function ad(Y){var le=this,te=le.ready().then(function(){for(var we=le._dbInfo,Se=localStorage.length,be=[],Fe=0;Fe<Se;Fe++){var Ye=localStorage.key(Fe);Ye.indexOf(we.keyPrefix)===0&&be.push(Ye.substring(we.keyPrefix.length))}return be});return d(te,Y),te}function Fa(Y){var le=this,te=le.keys().then(function(we){return we.length});return d(te,Y),te}function ld(Y,le){var te=this;Y=w(Y);var we=te.ready().then(function(){var Se=te._dbInfo;localStorage.removeItem(Se.keyPrefix+Y)});return d(we,le),we}function of(Y,le,te){var we=this;Y=w(Y);var Se=we.ready().then(function(){le===void 0&&(le=null);var be=le;return new c(function(Fe,Ye){var Qe=we._dbInfo;Qe.serializer.serialize(le,function(tt,ot){if(ot)Ye(ot);else try{localStorage.setItem(Qe.keyPrefix+Y,tt),Fe(be)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ye(xt),Ye(xt)}})})});return d(Se,te),Se}function af(Y,le){if(le=b.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var te=this.config();Y.name=Y.name||te.name,Y.storeName=Y.storeName||te.storeName}var we=this,Se;return Y.name?Se=new c(function(be){Y.storeName?be(kl(Y,we._defaultConfig)):be(Y.name+"/")}).then(function(be){for(var Fe=localStorage.length-1;Fe>=0;Fe--){var Ye=localStorage.key(Fe);Ye.indexOf(be)===0&&localStorage.removeItem(Ye)}}):Se=c.reject("Invalid arguments"),d(Se,le),Se}var Nu={_driver:"localStorageWrapper",_initStorage:tg,_support:Sl(),iterate:ng,getItem:rg,setItem:of,removeItem:ld,clear:sd,length:Fa,key:od,keys:ad,dropInstance:af},ud=function(le,te){return le===te||typeof le=="number"&&typeof te=="number"&&isNaN(le)&&isNaN(te)},Ru=function(le,te){for(var we=le.length,Se=0;Se<we;){if(ud(le[Se],te))return!0;Se++}return!1},ja=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Bs={},lf={},ta={INDEXEDDB:V,WEBSQL:La,LOCALSTORAGE:Nu},cd=[ta.INDEXEDDB._driver,ta.WEBSQL._driver,ta.LOCALSTORAGE._driver],Tl=["dropInstance"],za=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Tl),fd={description:"",driver:cd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ig(Y,le){Y[le]=function(){var te=arguments;return Y.ready().then(function(){return Y[le].apply(Y,te)})}}function Du(){for(var Y=1;Y<arguments.length;Y++){var le=arguments[Y];if(le)for(var te in le)le.hasOwnProperty(te)&&(ja(le[te])?arguments[0][te]=le[te].slice():arguments[0][te]=le[te])}return arguments[0]}var hd=function(){function Y(le){o(this,Y);for(var te in ta)if(ta.hasOwnProperty(te)){var we=ta[te],Se=we._driver;this[te]=Se,Bs[Se]||this.defineDriver(we)}this._defaultConfig=Du({},fd),this._config=Du({},this._defaultConfig,le),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(te){if((typeof te>"u"?"undefined":s(te))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var we in te){if(we==="storeName"&&(te[we]=te[we].replace(/\W/g,"_")),we==="version"&&typeof te[we]!="number")return new Error("Database version must be a number.");this._config[we]=te[we]}return"driver"in te&&te.driver?this.setDriver(this._config.driver):!0}else return typeof te=="string"?this._config[te]:this._config},Y.prototype.defineDriver=function(te,we,Se){var be=new c(function(Fe,Ye){try{var Qe=te._driver,tt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!te._driver){Ye(tt);return}for(var ot=za.concat("_initStorage"),xt=0,Lt=ot.length;xt<Lt;xt++){var mr=ot[xt],lr=!Ru(Tl,mr);if((lr||te[mr])&&typeof te[mr]!="function"){Ye(tt);return}}var Gr=function(){for(var Di=function(Bu){return function(){var vd=new Error("Method "+Bu+" is not implemented by the current driver"),cf=c.reject(vd);return d(cf,arguments[arguments.length-1]),cf}},Il=0,dd=Tl.length;Il<dd;Il++){var vo=Tl[Il];te[vo]||(te[vo]=Di(vo))}};Gr();var Cr=function(Di){Bs[Qe]&&console.info("Redefining LocalForage driver: "+Qe),Bs[Qe]=te,lf[Qe]=Di,Fe()};"_support"in te?te._support&&typeof te._support=="function"?te._support().then(Cr,Ye):Cr(!!te._support):Cr(!0)}catch(ln){Ye(ln)}});return y(be,we,Se),be},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(te,we,Se){var be=Bs[te]?c.resolve(Bs[te]):c.reject(new Error("Driver not found."));return y(be,we,Se),be},Y.prototype.getSerializer=function(te){var we=c.resolve(fo);return y(we,te),we},Y.prototype.ready=function(te){var we=this,Se=we._driverSet.then(function(){return we._ready===null&&(we._ready=we._initDriver()),we._ready});return y(Se,te,te),Se},Y.prototype.setDriver=function(te,we,Se){var be=this;ja(te)||(te=[te]);var Fe=this._getSupportedDrivers(te);function Ye(){be._config.driver=be.driver()}function Qe(xt){return be._extend(xt),Ye(),be._ready=be._initStorage(be._config),be._ready}function tt(xt){return function(){var Lt=0;function mr(){for(;Lt<xt.length;){var lr=xt[Lt];return Lt++,be._dbInfo=null,be._ready=null,be.getDriver(lr).then(Qe).catch(mr)}Ye();var Gr=new Error("No available storage method found.");return be._driverSet=c.reject(Gr),be._driverSet}return mr()}}var ot=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=ot.then(function(){var xt=Fe[0];return be._dbInfo=null,be._ready=null,be.getDriver(xt).then(function(Lt){be._driver=Lt._driver,Ye(),be._wrapLibraryMethodsWithReady(),be._initDriver=tt(Fe)})}).catch(function(){Ye();var xt=new Error("No available storage method found.");return be._driverSet=c.reject(xt),be._driverSet}),y(this._driverSet,we,Se),this._driverSet},Y.prototype.supports=function(te){return!!lf[te]},Y.prototype._extend=function(te){Du(this,te)},Y.prototype._getSupportedDrivers=function(te){for(var we=[],Se=0,be=te.length;Se<be;Se++){var Fe=te[Se];this.supports(Fe)&&we.push(Fe)}return we},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var te=0,we=za.length;te<we;te++)ig(this,za[te])},Y.prototype.createInstance=function(te){return new Y(te)},Y}(),uf=new hd;n.exports=uf},{3:3}]},{},[4])(4)})})(CH);var Pue=CH.exports;const dn=ro(Pue);var Ow={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ow.exports;(function(e,r){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",c=1,d=2,y=4,w=1,b=2,T=1,_=2,A=4,x=8,I=16,O=32,C=64,g=128,M=256,B=512,L=30,q="...",Q=800,re=16,Z=1,j=2,X=3,ie=1/0,Ee=9007199254740991,$e=17976931348623157e292,Pe=0/0,He=4294967295,Ve=He-1,it=He>>>1,_e=[["ary",g],["bind",T],["bindKey",_],["curry",x],["curryRight",I],["flip",B],["partial",O],["partialRight",C],["rearg",M]],ge="[object Arguments]",Te="[object Array]",je="[object AsyncFunction]",$="[object Boolean]",S="[object Date]",N="[object DOMException]",F="[object Error]",z="[object Function]",V="[object GeneratorFunction]",ae="[object Map]",ye="[object Number]",Ue="[object Null]",ze="[object Object]",st="[object Promise]",wt="[object Proxy]",mt="[object RegExp]",pt="[object Set]",Rt="[object String]",dr="[object Symbol]",Vr="[object Undefined]",ct="[object WeakMap]",It="[object WeakSet]",pn="[object ArrayBuffer]",Pi="[object DataView]",Wi="[object Float32Array]",vn="[object Float64Array]",ds="[object Int8Array]",uo="[object Int16Array]",Ni="[object Int32Array]",qi="[object Uint8Array]",co="[object Uint8ClampedArray]",rf="[object Uint16Array]",fo="[object Uint32Array]",nf=/\b__p \+= '';/g,td=/\b(__p \+=) '' \+/g,ho=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ea=/&(?:amp|lt|gt|quot|#39);/g,Ma=/[&<>"']/g,sf=RegExp(ea.source),rd=RegExp(Ma.source),Ri=/<%-([\s\S]+?)%>/g,ii=/<%([\s\S]+?)%>/g,Pu=/<%=([\s\S]+?)%>/g,Jv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nd=/^\w*$/,id=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,po=/[\\^$.*+?()[\]{}|]/g,La=RegExp(po.source),Sl=/^\s+/,kl=/\s/,Qv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eg=/\{\n\/\* \[wrapped with (.+)\] \*/,tg=/,? & /,sd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rg=/[()=,{}\[\]\/\s]/,ng=/\\(\\)?/g,od=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ad=/\w*$/,Fa=/^[-+]0x[0-9a-f]+$/i,ld=/^0b[01]+$/i,of=/^\[object .+?Constructor\]$/,af=/^0o[0-7]+$/i,Nu=/^(?:0|[1-9]\d*)$/,ud=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ru=/($^)/,ja=/['\n\r\u2028\u2029\\]/g,Bs="\\ud800-\\udfff",lf="\\u0300-\\u036f",ta="\\ufe20-\\ufe2f",cd="\\u20d0-\\u20ff",Tl=lf+ta+cd,za="\\u2700-\\u27bf",fd="a-z\\xdf-\\xf6\\xf8-\\xff",ig="\\xac\\xb1\\xd7\\xf7",Du="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hd="\\u2000-\\u206f",uf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",le="\\ufe0e\\ufe0f",te=ig+Du+hd+uf,we="['’]",Se="["+Bs+"]",be="["+te+"]",Fe="["+Tl+"]",Ye="\\d+",Qe="["+za+"]",tt="["+fd+"]",ot="[^"+Bs+te+Ye+za+fd+Y+"]",xt="\\ud83c[\\udffb-\\udfff]",Lt="(?:"+Fe+"|"+xt+")",mr="[^"+Bs+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="["+Y+"]",ln="\\u200d",Di="(?:"+tt+"|"+ot+")",Il="(?:"+Cr+"|"+ot+")",dd="(?:"+we+"(?:d|ll|m|re|s|t|ve))?",vo="(?:"+we+"(?:D|LL|M|RE|S|T|VE))?",pd=Lt+"?",Bu="["+le+"]?",vd="(?:"+ln+"(?:"+[mr,lr,Gr].join("|")+")"+Bu+pd+")*",cf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sg=Bu+pd+vd,Yx="(?:"+[Qe,lr,Gr].join("|")+")"+sg,Zx="(?:"+[mr+Fe+"?",Fe,lr,Gr,Se].join("|")+")",og=RegExp(we,"g"),Xx=RegExp(Fe,"g"),ag=RegExp(xt+"(?="+xt+")|"+Zx+sg,"g"),Jx=RegExp([Cr+"?"+tt+"+"+dd+"(?="+[be,Cr,"$"].join("|")+")",Il+"+"+vo+"(?="+[be,Cr+Di,"$"].join("|")+")",Cr+"?"+Di+"+"+dd,Cr+"+"+vo,Gx,cf,Ye,Yx].join("|"),"g"),Qx=RegExp("["+ln+Bs+Tl+le+"]"),e2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,t2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],r2=-1,jr={};jr[Wi]=jr[vn]=jr[ds]=jr[uo]=jr[Ni]=jr[qi]=jr[co]=jr[rf]=jr[fo]=!0,jr[ge]=jr[Te]=jr[pn]=jr[$]=jr[Pi]=jr[S]=jr[F]=jr[z]=jr[ae]=jr[ye]=jr[ze]=jr[mt]=jr[pt]=jr[Rt]=jr[ct]=!1;var Pr={};Pr[ge]=Pr[Te]=Pr[pn]=Pr[Pi]=Pr[$]=Pr[S]=Pr[Wi]=Pr[vn]=Pr[ds]=Pr[uo]=Pr[Ni]=Pr[ae]=Pr[ye]=Pr[ze]=Pr[mt]=Pr[pt]=Pr[Rt]=Pr[dr]=Pr[qi]=Pr[co]=Pr[rf]=Pr[fo]=!0,Pr[F]=Pr[z]=Pr[ct]=!1;var Fb={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},lg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ug=parseFloat,n2=parseInt,Hb=typeof On=="object"&&On&&On.Object===Object&&On,i2=typeof self=="object"&&self&&self.Object===Object&&self,un=Hb||i2||Function("return this")(),gd=r&&!r.nodeType&&r,ra=gd&&!0&&e&&!e.nodeType&&e,Ub=ra&&ra.exports===gd,cg=Ub&&Hb.process,ps=function(){try{var ee=ra&&ra.require&&ra.require("util").types;return ee||cg&&cg.binding&&cg.binding("util")}catch{}}(),m=ps&&ps.isArrayBuffer,k=ps&&ps.isDate,P=ps&&ps.isMap,D=ps&&ps.isRegExp,H=ps&&ps.isSet,U=ps&&ps.isTypedArray;function K(ee,pe,fe){switch(fe.length){case 0:return ee.call(pe);case 1:return ee.call(pe,fe[0]);case 2:return ee.call(pe,fe[0],fe[1]);case 3:return ee.call(pe,fe[0],fe[1],fe[2])}return ee.apply(pe,fe)}function ue(ee,pe,fe,Le){for(var We=-1,$t=ee==null?0:ee.length;++We<$t;){var _t=ee[We];pe(Le,_t,fe(_t),ee)}return Le}function se(ee,pe){for(var fe=-1,Le=ee==null?0:ee.length;++fe<Le&&pe(ee[fe],fe,ee)!==!1;);return ee}function xe(ee,pe){for(var fe=ee==null?0:ee.length;fe--&&pe(ee[fe],fe,ee)!==!1;);return ee}function Ce(ee,pe){for(var fe=-1,Le=ee==null?0:ee.length;++fe<Le;)if(!pe(ee[fe],fe,ee))return!1;return!0}function Be(ee,pe){for(var fe=-1,Le=ee==null?0:ee.length,We=0,$t=[];++fe<Le;){var _t=ee[fe];pe(_t,fe,ee)&&($t[We++]=_t)}return $t}function Ae(ee,pe){var fe=ee==null?0:ee.length;return!!fe&&Mr(ee,pe,0)>-1}function Xe(ee,pe,fe){for(var Le=-1,We=ee==null?0:ee.length;++Le<We;)if(fe(pe,ee[Le]))return!0;return!1}function bt(ee,pe){for(var fe=-1,Le=ee==null?0:ee.length,We=Array(Le);++fe<Le;)We[fe]=pe(ee[fe],fe,ee);return We}function Yt(ee,pe){for(var fe=-1,Le=pe.length,We=ee.length;++fe<Le;)ee[We+fe]=pe[fe];return ee}function Gt(ee,pe,fe,Le){var We=-1,$t=ee==null?0:ee.length;for(Le&&$t&&(fe=ee[++We]);++We<$t;)fe=pe(fe,ee[We],We,ee);return fe}function Gn(ee,pe,fe,Le){var We=ee==null?0:ee.length;for(Le&&We&&(fe=ee[--We]);We--;)fe=pe(fe,ee[We],We,ee);return fe}function cn(ee,pe){for(var fe=-1,Le=ee==null?0:ee.length;++fe<Le;)if(pe(ee[fe],fe,ee))return!0;return!1}var go=Al("length");function yo(ee){return ee.split("")}function pr(ee){return ee.match(sd)||[]}function Ha(ee,pe,fe){var Le;return fe(ee,function(We,$t,_t){if(pe(We,$t,_t))return Le=$t,!1}),Le}function vr(ee,pe,fe,Le){for(var We=ee.length,$t=fe+(Le?1:-1);Le?$t--:++$t<We;)if(pe(ee[$t],$t,ee))return $t;return-1}function Mr(ee,pe,fe){return pe===pe?a2(ee,pe,fe):vr(ee,yd,fe)}function ff(ee,pe,fe,Le){for(var We=fe-1,$t=ee.length;++We<$t;)if(Le(ee[We],pe))return We;return-1}function yd(ee){return ee!==ee}function Ms(ee,pe){var fe=ee==null?0:ee.length;return fe?Bi(ee,pe)/fe:Pe}function Al(ee){return function(pe){return pe==null?t:pe[ee]}}function vs(ee){return function(pe){return ee==null?t:ee[pe]}}function na(ee,pe,fe,Le,We){return We(ee,function($t,_t,yt){fe=Le?(Le=!1,$t):pe(fe,$t,_t,yt)}),fe}function Ua(ee,pe){var fe=ee.length;for(ee.sort(pe);fe--;)ee[fe]=ee[fe].value;return ee}function Bi(ee,pe){for(var fe,Le=-1,We=ee.length;++Le<We;){var $t=pe(ee[Le]);$t!==t&&(fe=fe===t?$t:fe+$t)}return fe}function hf(ee,pe){for(var fe=-1,Le=Array(ee);++fe<ee;)Le[fe]=pe(fe);return Le}function ia(ee,pe){return bt(pe,function(fe){return[fe,ee[fe]]})}function mo(ee){return ee&&ee.slice(0,qb(ee)+1).replace(Sl,"")}function Ki(ee){return function(pe){return ee(pe)}}function fg(ee,pe){return bt(pe,function(fe){return ee[fe]})}function df(ee,pe){return ee.has(pe)}function Ar(ee,pe){for(var fe=-1,Le=ee.length;++fe<Le&&Mr(pe,ee[fe],0)>-1;);return fe}function pf(ee,pe){for(var fe=ee.length;fe--&&Mr(pe,ee[fe],0)>-1;);return fe}function Ls(ee,pe){for(var fe=ee.length,Le=0;fe--;)ee[fe]===pe&&++Le;return Le}var Mu=vs(Fb),s2=vs(lg);function o2(ee){return"\\"+zb[ee]}function Wb(ee,pe){return ee==null?t:ee[pe]}function gs(ee){return Qx.test(ee)}function hg(ee){return e2.test(ee)}function Wa(ee){for(var pe,fe=[];!(pe=ee.next()).done;)fe.push(pe.value);return fe}function md(ee){var pe=-1,fe=Array(ee.size);return ee.forEach(function(Le,We){fe[++pe]=[We,Le]}),fe}function vf(ee,pe){return function(fe){return ee(pe(fe))}}function Fs(ee,pe){for(var fe=-1,Le=ee.length,We=0,$t=[];++fe<Le;){var _t=ee[fe];(_t===pe||_t===f)&&(ee[fe]=f,$t[We++]=fe)}return $t}function Ol(ee){var pe=-1,fe=Array(ee.size);return ee.forEach(function(Le){fe[++pe]=Le}),fe}function dg(ee){var pe=-1,fe=Array(ee.size);return ee.forEach(function(Le){fe[++pe]=[Le,Le]}),fe}function a2(ee,pe,fe){for(var Le=fe-1,We=ee.length;++Le<We;)if(ee[Le]===pe)return Le;return-1}function bd(ee,pe,fe){for(var Le=fe+1;Le--;)if(ee[Le]===pe)return Le;return Le}function qa(ee){return gs(ee)?Kb(ee):go(ee)}function Vi(ee){return gs(ee)?ne(ee):yo(ee)}function qb(ee){for(var pe=ee.length;pe--&&kl.test(ee.charAt(pe)););return pe}var pg=vs(jb);function Kb(ee){for(var pe=ag.lastIndex=0;ag.test(ee);)++pe;return pe}function ne(ee){return ee.match(ag)||[]}function me(ee){return ee.match(Jx)||[]}var Ie=function ee(pe){pe=pe==null?un:Oe.defaults(un.Object(),pe,Oe.pick(un,t2));var fe=pe.Array,Le=pe.Date,We=pe.Error,$t=pe.Function,_t=pe.Math,yt=pe.Object,er=pe.RegExp,Dt=pe.String,ur=pe.TypeError,Yn=fe.prototype,si=$t.prototype,Zn=yt.prototype,Gi=pe["__core-js_shared__"],sa=si.toString,qt=Zn.hasOwnProperty,Mee=0,PN=function(){var h=/[^.]+$/.exec(Gi&&Gi.keys&&Gi.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Vb=Zn.toString,Lee=sa.call(yt),Fee=un._,jee=er("^"+sa.call(qt).replace(po,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gb=Ub?pe.Buffer:t,Lu=pe.Symbol,Yb=pe.Uint8Array,NN=Gb?Gb.allocUnsafe:t,Zb=vf(yt.getPrototypeOf,yt),RN=yt.create,DN=Zn.propertyIsEnumerable,Xb=Yn.splice,BN=Lu?Lu.isConcatSpreadable:t,vg=Lu?Lu.iterator:t,gf=Lu?Lu.toStringTag:t,Jb=function(){try{var h=$f(yt,"defineProperty");return h({},"",{}),h}catch{}}(),zee=pe.clearTimeout!==un.clearTimeout&&pe.clearTimeout,Hee=Le&&Le.now!==un.Date.now&&Le.now,Uee=pe.setTimeout!==un.setTimeout&&pe.setTimeout,Qb=_t.ceil,e0=_t.floor,l2=yt.getOwnPropertySymbols,Wee=Gb?Gb.isBuffer:t,MN=pe.isFinite,qee=Yn.join,Kee=vf(yt.keys,yt),Xn=_t.max,Mi=_t.min,Vee=Le.now,Gee=pe.parseInt,LN=_t.random,Yee=Yn.reverse,u2=$f(pe,"DataView"),gg=$f(pe,"Map"),c2=$f(pe,"Promise"),wd=$f(pe,"Set"),yg=$f(pe,"WeakMap"),mg=$f(yt,"create"),t0=yg&&new yg,$d={},Zee=_f(u2),Xee=_f(gg),Jee=_f(c2),Qee=_f(wd),ete=_f(yg),r0=Lu?Lu.prototype:t,bg=r0?r0.valueOf:t,FN=r0?r0.toString:t;function G(h){if(gn(h)&&!Zt(h)&&!(h instanceof br)){if(h instanceof bo)return h;if(qt.call(h,"__wrapped__"))return jR(h)}return new bo(h)}var _d=function(){function h(){}return function(p){if(!fn(p))return{};if(RN)return RN(p);h.prototype=p;var E=new h;return h.prototype=t,E}}();function n0(){}function bo(h,p){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}G.templateSettings={escape:Ri,evaluate:ii,interpolate:Pu,variable:"",imports:{_:G}},G.prototype=n0.prototype,G.prototype.constructor=G,bo.prototype=_d(n0.prototype),bo.prototype.constructor=bo;function br(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function tte(){var h=new br(this.__wrapped__);return h.__actions__=ys(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=ys(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=ys(this.__views__),h}function rte(){if(this.__filtered__){var h=new br(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function nte(){var h=this.__wrapped__.value(),p=this.__dir__,E=Zt(h),R=p<0,W=E?h.length:0,J=vre(0,W,this.__views__),oe=J.start,ve=J.end,ke=ve-oe,Ke=R?ve:oe-1,Ge=this.__iteratees__,Ze=Ge.length,gt=0,At=Mi(ke,this.__takeCount__);if(!E||!R&&W==ke&&At==ke)return uR(h,this.__actions__);var Ht=[];e:for(;ke--&&gt<At;){Ke+=p;for(var nr=-1,Ut=h[Ke];++nr<Ze;){var yr=Ge[nr],wr=yr.iteratee,Hs=yr.type,Xi=wr(Ut);if(Hs==j)Ut=Xi;else if(!Xi){if(Hs==Z)continue e;break e}}Ht[gt++]=Ut}return Ht}br.prototype=_d(n0.prototype),br.prototype.constructor=br;function yf(h){var p=-1,E=h==null?0:h.length;for(this.clear();++p<E;){var R=h[p];this.set(R[0],R[1])}}function ite(){this.__data__=mg?mg(null):{},this.size=0}function ste(h){var p=this.has(h)&&delete this.__data__[h];return this.size-=p?1:0,p}function ote(h){var p=this.__data__;if(mg){var E=p[h];return E===l?t:E}return qt.call(p,h)?p[h]:t}function ate(h){var p=this.__data__;return mg?p[h]!==t:qt.call(p,h)}function lte(h,p){var E=this.__data__;return this.size+=this.has(h)?0:1,E[h]=mg&&p===t?l:p,this}yf.prototype.clear=ite,yf.prototype.delete=ste,yf.prototype.get=ote,yf.prototype.has=ate,yf.prototype.set=lte;function Cl(h){var p=-1,E=h==null?0:h.length;for(this.clear();++p<E;){var R=h[p];this.set(R[0],R[1])}}function ute(){this.__data__=[],this.size=0}function cte(h){var p=this.__data__,E=i0(p,h);if(E<0)return!1;var R=p.length-1;return E==R?p.pop():Xb.call(p,E,1),--this.size,!0}function fte(h){var p=this.__data__,E=i0(p,h);return E<0?t:p[E][1]}function hte(h){return i0(this.__data__,h)>-1}function dte(h,p){var E=this.__data__,R=i0(E,h);return R<0?(++this.size,E.push([h,p])):E[R][1]=p,this}Cl.prototype.clear=ute,Cl.prototype.delete=cte,Cl.prototype.get=fte,Cl.prototype.has=hte,Cl.prototype.set=dte;function Pl(h){var p=-1,E=h==null?0:h.length;for(this.clear();++p<E;){var R=h[p];this.set(R[0],R[1])}}function pte(){this.size=0,this.__data__={hash:new yf,map:new(gg||Cl),string:new yf}}function vte(h){var p=g0(this,h).delete(h);return this.size-=p?1:0,p}function gte(h){return g0(this,h).get(h)}function yte(h){return g0(this,h).has(h)}function mte(h,p){var E=g0(this,h),R=E.size;return E.set(h,p),this.size+=E.size==R?0:1,this}Pl.prototype.clear=pte,Pl.prototype.delete=vte,Pl.prototype.get=gte,Pl.prototype.has=yte,Pl.prototype.set=mte;function mf(h){var p=-1,E=h==null?0:h.length;for(this.__data__=new Pl;++p<E;)this.add(h[p])}function bte(h){return this.__data__.set(h,l),this}function wte(h){return this.__data__.has(h)}mf.prototype.add=mf.prototype.push=bte,mf.prototype.has=wte;function oa(h){var p=this.__data__=new Cl(h);this.size=p.size}function $te(){this.__data__=new Cl,this.size=0}function _te(h){var p=this.__data__,E=p.delete(h);return this.size=p.size,E}function xte(h){return this.__data__.get(h)}function Ete(h){return this.__data__.has(h)}function Ste(h,p){var E=this.__data__;if(E instanceof Cl){var R=E.__data__;if(!gg||R.length<i-1)return R.push([h,p]),this.size=++E.size,this;E=this.__data__=new Pl(R)}return E.set(h,p),this.size=E.size,this}oa.prototype.clear=$te,oa.prototype.delete=_te,oa.prototype.get=xte,oa.prototype.has=Ete,oa.prototype.set=Ste;function jN(h,p){var E=Zt(h),R=!E&&xf(h),W=!E&&!R&&Uu(h),J=!E&&!R&&!W&&kd(h),oe=E||R||W||J,ve=oe?hf(h.length,Dt):[],ke=ve.length;for(var Ke in h)(p||qt.call(h,Ke))&&!(oe&&(Ke=="length"||W&&(Ke=="offset"||Ke=="parent")||J&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Bl(Ke,ke)))&&ve.push(Ke);return ve}function zN(h){var p=h.length;return p?h[$2(0,p-1)]:t}function kte(h,p){return y0(ys(h),bf(p,0,h.length))}function Tte(h){return y0(ys(h))}function f2(h,p,E){(E!==t&&!aa(h[p],E)||E===t&&!(p in h))&&Nl(h,p,E)}function wg(h,p,E){var R=h[p];(!(qt.call(h,p)&&aa(R,E))||E===t&&!(p in h))&&Nl(h,p,E)}function i0(h,p){for(var E=h.length;E--;)if(aa(h[E][0],p))return E;return-1}function Ite(h,p,E,R){return Fu(h,function(W,J,oe){p(R,W,E(W),oe)}),R}function HN(h,p){return h&&Va(p,oi(p),h)}function Ate(h,p){return h&&Va(p,bs(p),h)}function Nl(h,p,E){p=="__proto__"&&Jb?Jb(h,p,{configurable:!0,enumerable:!0,value:E,writable:!0}):h[p]=E}function h2(h,p){for(var E=-1,R=p.length,W=fe(R),J=h==null;++E<R;)W[E]=J?t:K2(h,p[E]);return W}function bf(h,p,E){return h===h&&(E!==t&&(h=h<=E?h:E),p!==t&&(h=h>=p?h:p)),h}function wo(h,p,E,R,W,J){var oe,ve=p&c,ke=p&d,Ke=p&y;if(E&&(oe=W?E(h,R,W,J):E(h)),oe!==t)return oe;if(!fn(h))return h;var Ge=Zt(h);if(Ge){if(oe=yre(h),!ve)return ys(h,oe)}else{var Ze=Li(h),gt=Ze==z||Ze==V;if(Uu(h))return hR(h,ve);if(Ze==ze||Ze==ge||gt&&!W){if(oe=ke||gt?{}:CR(h),!ve)return ke?ore(h,Ate(oe,h)):sre(h,HN(oe,h))}else{if(!Pr[Ze])return W?h:{};oe=mre(h,Ze,ve)}}J||(J=new oa);var At=J.get(h);if(At)return At;J.set(h,oe),oD(h)?h.forEach(function(Ut){oe.add(wo(Ut,p,E,Ut,h,J))}):iD(h)&&h.forEach(function(Ut,yr){oe.set(yr,wo(Ut,p,E,yr,h,J))});var Ht=Ke?ke?P2:C2:ke?bs:oi,nr=Ge?t:Ht(h);return se(nr||h,function(Ut,yr){nr&&(yr=Ut,Ut=h[yr]),wg(oe,yr,wo(Ut,p,E,yr,h,J))}),oe}function Ote(h){var p=oi(h);return function(E){return UN(E,h,p)}}function UN(h,p,E){var R=E.length;if(h==null)return!R;for(h=yt(h);R--;){var W=E[R],J=p[W],oe=h[W];if(oe===t&&!(W in h)||!J(oe))return!1}return!0}function WN(h,p,E){if(typeof h!="function")throw new ur(o);return Tg(function(){h.apply(t,E)},p)}function $g(h,p,E,R){var W=-1,J=Ae,oe=!0,ve=h.length,ke=[],Ke=p.length;if(!ve)return ke;E&&(p=bt(p,Ki(E))),R?(J=Xe,oe=!1):p.length>=i&&(J=df,oe=!1,p=new mf(p));e:for(;++W<ve;){var Ge=h[W],Ze=E==null?Ge:E(Ge);if(Ge=R||Ge!==0?Ge:0,oe&&Ze===Ze){for(var gt=Ke;gt--;)if(p[gt]===Ze)continue e;ke.push(Ge)}else J(p,Ze,R)||ke.push(Ge)}return ke}var Fu=yR(Ka),qN=yR(p2,!0);function Cte(h,p){var E=!0;return Fu(h,function(R,W,J){return E=!!p(R,W,J),E}),E}function s0(h,p,E){for(var R=-1,W=h.length;++R<W;){var J=h[R],oe=p(J);if(oe!=null&&(ve===t?oe===oe&&!zs(oe):E(oe,ve)))var ve=oe,ke=J}return ke}function Pte(h,p,E,R){var W=h.length;for(E=tr(E),E<0&&(E=-E>W?0:W+E),R=R===t||R>W?W:tr(R),R<0&&(R+=W),R=E>R?0:lD(R);E<R;)h[E++]=p;return h}function KN(h,p){var E=[];return Fu(h,function(R,W,J){p(R,W,J)&&E.push(R)}),E}function xi(h,p,E,R,W){var J=-1,oe=h.length;for(E||(E=wre),W||(W=[]);++J<oe;){var ve=h[J];p>0&&E(ve)?p>1?xi(ve,p-1,E,R,W):Yt(W,ve):R||(W[W.length]=ve)}return W}var d2=mR(),VN=mR(!0);function Ka(h,p){return h&&d2(h,p,oi)}function p2(h,p){return h&&VN(h,p,oi)}function o0(h,p){return Be(p,function(E){return Ml(h[E])})}function wf(h,p){p=zu(p,h);for(var E=0,R=p.length;h!=null&&E<R;)h=h[Ga(p[E++])];return E&&E==R?h:t}function GN(h,p,E){var R=p(h);return Zt(h)?R:Yt(R,E(h))}function Yi(h){return h==null?h===t?Vr:Ue:gf&&gf in yt(h)?pre(h):Tre(h)}function v2(h,p){return h>p}function Nte(h,p){return h!=null&&qt.call(h,p)}function Rte(h,p){return h!=null&&p in yt(h)}function Dte(h,p,E){return h>=Mi(p,E)&&h<Xn(p,E)}function g2(h,p,E){for(var R=E?Xe:Ae,W=h[0].length,J=h.length,oe=J,ve=fe(J),ke=1/0,Ke=[];oe--;){var Ge=h[oe];oe&&p&&(Ge=bt(Ge,Ki(p))),ke=Mi(Ge.length,ke),ve[oe]=!E&&(p||W>=120&&Ge.length>=120)?new mf(oe&&Ge):t}Ge=h[0];var Ze=-1,gt=ve[0];e:for(;++Ze<W&&Ke.length<ke;){var At=Ge[Ze],Ht=p?p(At):At;if(At=E||At!==0?At:0,!(gt?df(gt,Ht):R(Ke,Ht,E))){for(oe=J;--oe;){var nr=ve[oe];if(!(nr?df(nr,Ht):R(h[oe],Ht,E)))continue e}gt&&gt.push(Ht),Ke.push(At)}}return Ke}function Bte(h,p,E,R){return Ka(h,function(W,J,oe){p(R,E(W),J,oe)}),R}function _g(h,p,E){p=zu(p,h),h=DR(h,p);var R=h==null?h:h[Ga(_o(p))];return R==null?t:K(R,h,E)}function YN(h){return gn(h)&&Yi(h)==ge}function Mte(h){return gn(h)&&Yi(h)==pn}function Lte(h){return gn(h)&&Yi(h)==S}function xg(h,p,E,R,W){return h===p?!0:h==null||p==null||!gn(h)&&!gn(p)?h!==h&&p!==p:Fte(h,p,E,R,xg,W)}function Fte(h,p,E,R,W,J){var oe=Zt(h),ve=Zt(p),ke=oe?Te:Li(h),Ke=ve?Te:Li(p);ke=ke==ge?ze:ke,Ke=Ke==ge?ze:Ke;var Ge=ke==ze,Ze=Ke==ze,gt=ke==Ke;if(gt&&Uu(h)){if(!Uu(p))return!1;oe=!0,Ge=!1}if(gt&&!Ge)return J||(J=new oa),oe||kd(h)?IR(h,p,E,R,W,J):hre(h,p,ke,E,R,W,J);if(!(E&w)){var At=Ge&&qt.call(h,"__wrapped__"),Ht=Ze&&qt.call(p,"__wrapped__");if(At||Ht){var nr=At?h.value():h,Ut=Ht?p.value():p;return J||(J=new oa),W(nr,Ut,E,R,J)}}return gt?(J||(J=new oa),dre(h,p,E,R,W,J)):!1}function jte(h){return gn(h)&&Li(h)==ae}function y2(h,p,E,R){var W=E.length,J=W,oe=!R;if(h==null)return!J;for(h=yt(h);W--;){var ve=E[W];if(oe&&ve[2]?ve[1]!==h[ve[0]]:!(ve[0]in h))return!1}for(;++W<J;){ve=E[W];var ke=ve[0],Ke=h[ke],Ge=ve[1];if(oe&&ve[2]){if(Ke===t&&!(ke in h))return!1}else{var Ze=new oa;if(R)var gt=R(Ke,Ge,ke,h,p,Ze);if(!(gt===t?xg(Ge,Ke,w|b,R,Ze):gt))return!1}}return!0}function ZN(h){if(!fn(h)||_re(h))return!1;var p=Ml(h)?jee:of;return p.test(_f(h))}function zte(h){return gn(h)&&Yi(h)==mt}function Hte(h){return gn(h)&&Li(h)==pt}function Ute(h){return gn(h)&&x0(h.length)&&!!jr[Yi(h)]}function XN(h){return typeof h=="function"?h:h==null?ws:typeof h=="object"?Zt(h)?eR(h[0],h[1]):QN(h):bD(h)}function m2(h){if(!kg(h))return Kee(h);var p=[];for(var E in yt(h))qt.call(h,E)&&E!="constructor"&&p.push(E);return p}function Wte(h){if(!fn(h))return kre(h);var p=kg(h),E=[];for(var R in h)R=="constructor"&&(p||!qt.call(h,R))||E.push(R);return E}function b2(h,p){return h<p}function JN(h,p){var E=-1,R=ms(h)?fe(h.length):[];return Fu(h,function(W,J,oe){R[++E]=p(W,J,oe)}),R}function QN(h){var p=R2(h);return p.length==1&&p[0][2]?NR(p[0][0],p[0][1]):function(E){return E===h||y2(E,h,p)}}function eR(h,p){return B2(h)&&PR(p)?NR(Ga(h),p):function(E){var R=K2(E,h);return R===t&&R===p?V2(E,h):xg(p,R,w|b)}}function a0(h,p,E,R,W){h!==p&&d2(p,function(J,oe){if(W||(W=new oa),fn(J))qte(h,p,oe,E,a0,R,W);else{var ve=R?R(L2(h,oe),J,oe+"",h,p,W):t;ve===t&&(ve=J),f2(h,oe,ve)}},bs)}function qte(h,p,E,R,W,J,oe){var ve=L2(h,E),ke=L2(p,E),Ke=oe.get(ke);if(Ke){f2(h,E,Ke);return}var Ge=J?J(ve,ke,E+"",h,p,oe):t,Ze=Ge===t;if(Ze){var gt=Zt(ke),At=!gt&&Uu(ke),Ht=!gt&&!At&&kd(ke);Ge=ke,gt||At||Ht?Zt(ve)?Ge=ve:Tn(ve)?Ge=ys(ve):At?(Ze=!1,Ge=hR(ke,!0)):Ht?(Ze=!1,Ge=dR(ke,!0)):Ge=[]:Ig(ke)||xf(ke)?(Ge=ve,xf(ve)?Ge=uD(ve):(!fn(ve)||Ml(ve))&&(Ge=CR(ke))):Ze=!1}Ze&&(oe.set(ke,Ge),W(Ge,ke,R,J,oe),oe.delete(ke)),f2(h,E,Ge)}function tR(h,p){var E=h.length;if(E)return p+=p<0?E:0,Bl(p,E)?h[p]:t}function rR(h,p,E){p.length?p=bt(p,function(J){return Zt(J)?function(oe){return wf(oe,J.length===1?J[0]:J)}:J}):p=[ws];var R=-1;p=bt(p,Ki(Ft()));var W=JN(h,function(J,oe,ve){var ke=bt(p,function(Ke){return Ke(J)});return{criteria:ke,index:++R,value:J}});return Ua(W,function(J,oe){return ire(J,oe,E)})}function Kte(h,p){return nR(h,p,function(E,R){return V2(h,R)})}function nR(h,p,E){for(var R=-1,W=p.length,J={};++R<W;){var oe=p[R],ve=wf(h,oe);E(ve,oe)&&Eg(J,zu(oe,h),ve)}return J}function Vte(h){return function(p){return wf(p,h)}}function w2(h,p,E,R){var W=R?ff:Mr,J=-1,oe=p.length,ve=h;for(h===p&&(p=ys(p)),E&&(ve=bt(h,Ki(E)));++J<oe;)for(var ke=0,Ke=p[J],Ge=E?E(Ke):Ke;(ke=W(ve,Ge,ke,R))>-1;)ve!==h&&Xb.call(ve,ke,1),Xb.call(h,ke,1);return h}function iR(h,p){for(var E=h?p.length:0,R=E-1;E--;){var W=p[E];if(E==R||W!==J){var J=W;Bl(W)?Xb.call(h,W,1):E2(h,W)}}return h}function $2(h,p){return h+e0(LN()*(p-h+1))}function Gte(h,p,E,R){for(var W=-1,J=Xn(Qb((p-h)/(E||1)),0),oe=fe(J);J--;)oe[R?J:++W]=h,h+=E;return oe}function _2(h,p){var E="";if(!h||p<1||p>Ee)return E;do p%2&&(E+=h),p=e0(p/2),p&&(h+=h);while(p);return E}function cr(h,p){return F2(RR(h,p,ws),h+"")}function Yte(h){return zN(Td(h))}function Zte(h,p){var E=Td(h);return y0(E,bf(p,0,E.length))}function Eg(h,p,E,R){if(!fn(h))return h;p=zu(p,h);for(var W=-1,J=p.length,oe=J-1,ve=h;ve!=null&&++W<J;){var ke=Ga(p[W]),Ke=E;if(ke==="__proto__"||ke==="constructor"||ke==="prototype")return h;if(W!=oe){var Ge=ve[ke];Ke=R?R(Ge,ke,ve):t,Ke===t&&(Ke=fn(Ge)?Ge:Bl(p[W+1])?[]:{})}wg(ve,ke,Ke),ve=ve[ke]}return h}var sR=t0?function(h,p){return t0.set(h,p),h}:ws,Xte=Jb?function(h,p){return Jb(h,"toString",{configurable:!0,enumerable:!1,value:Y2(p),writable:!0})}:ws;function Jte(h){return y0(Td(h))}function $o(h,p,E){var R=-1,W=h.length;p<0&&(p=-p>W?0:W+p),E=E>W?W:E,E<0&&(E+=W),W=p>E?0:E-p>>>0,p>>>=0;for(var J=fe(W);++R<W;)J[R]=h[R+p];return J}function Qte(h,p){var E;return Fu(h,function(R,W,J){return E=p(R,W,J),!E}),!!E}function l0(h,p,E){var R=0,W=h==null?R:h.length;if(typeof p=="number"&&p===p&&W<=it){for(;R<W;){var J=R+W>>>1,oe=h[J];oe!==null&&!zs(oe)&&(E?oe<=p:oe<p)?R=J+1:W=J}return W}return x2(h,p,ws,E)}function x2(h,p,E,R){var W=0,J=h==null?0:h.length;if(J===0)return 0;p=E(p);for(var oe=p!==p,ve=p===null,ke=zs(p),Ke=p===t;W<J;){var Ge=e0((W+J)/2),Ze=E(h[Ge]),gt=Ze!==t,At=Ze===null,Ht=Ze===Ze,nr=zs(Ze);if(oe)var Ut=R||Ht;else Ke?Ut=Ht&&(R||gt):ve?Ut=Ht&&gt&&(R||!At):ke?Ut=Ht&&gt&&!At&&(R||!nr):At||nr?Ut=!1:Ut=R?Ze<=p:Ze<p;Ut?W=Ge+1:J=Ge}return Mi(J,Ve)}function oR(h,p){for(var E=-1,R=h.length,W=0,J=[];++E<R;){var oe=h[E],ve=p?p(oe):oe;if(!E||!aa(ve,ke)){var ke=ve;J[W++]=oe===0?0:oe}}return J}function aR(h){return typeof h=="number"?h:zs(h)?Pe:+h}function js(h){if(typeof h=="string")return h;if(Zt(h))return bt(h,js)+"";if(zs(h))return FN?FN.call(h):"";var p=h+"";return p=="0"&&1/h==-ie?"-0":p}function ju(h,p,E){var R=-1,W=Ae,J=h.length,oe=!0,ve=[],ke=ve;if(E)oe=!1,W=Xe;else if(J>=i){var Ke=p?null:cre(h);if(Ke)return Ol(Ke);oe=!1,W=df,ke=new mf}else ke=p?[]:ve;e:for(;++R<J;){var Ge=h[R],Ze=p?p(Ge):Ge;if(Ge=E||Ge!==0?Ge:0,oe&&Ze===Ze){for(var gt=ke.length;gt--;)if(ke[gt]===Ze)continue e;p&&ke.push(Ze),ve.push(Ge)}else W(ke,Ze,E)||(ke!==ve&&ke.push(Ze),ve.push(Ge))}return ve}function E2(h,p){return p=zu(p,h),h=DR(h,p),h==null||delete h[Ga(_o(p))]}function lR(h,p,E,R){return Eg(h,p,E(wf(h,p)),R)}function u0(h,p,E,R){for(var W=h.length,J=R?W:-1;(R?J--:++J<W)&&p(h[J],J,h););return E?$o(h,R?0:J,R?J+1:W):$o(h,R?J+1:0,R?W:J)}function uR(h,p){var E=h;return E instanceof br&&(E=E.value()),Gt(p,function(R,W){return W.func.apply(W.thisArg,Yt([R],W.args))},E)}function S2(h,p,E){var R=h.length;if(R<2)return R?ju(h[0]):[];for(var W=-1,J=fe(R);++W<R;)for(var oe=h[W],ve=-1;++ve<R;)ve!=W&&(J[W]=$g(J[W]||oe,h[ve],p,E));return ju(xi(J,1),p,E)}function cR(h,p,E){for(var R=-1,W=h.length,J=p.length,oe={};++R<W;){var ve=R<J?p[R]:t;E(oe,h[R],ve)}return oe}function k2(h){return Tn(h)?h:[]}function T2(h){return typeof h=="function"?h:ws}function zu(h,p){return Zt(h)?h:B2(h,p)?[h]:FR(Nr(h))}var ere=cr;function Hu(h,p,E){var R=h.length;return E=E===t?R:E,!p&&E>=R?h:$o(h,p,E)}var fR=zee||function(h){return un.clearTimeout(h)};function hR(h,p){if(p)return h.slice();var E=h.length,R=NN?NN(E):new h.constructor(E);return h.copy(R),R}function I2(h){var p=new h.constructor(h.byteLength);return new Yb(p).set(new Yb(h)),p}function tre(h,p){var E=p?I2(h.buffer):h.buffer;return new h.constructor(E,h.byteOffset,h.byteLength)}function rre(h){var p=new h.constructor(h.source,ad.exec(h));return p.lastIndex=h.lastIndex,p}function nre(h){return bg?yt(bg.call(h)):{}}function dR(h,p){var E=p?I2(h.buffer):h.buffer;return new h.constructor(E,h.byteOffset,h.length)}function pR(h,p){if(h!==p){var E=h!==t,R=h===null,W=h===h,J=zs(h),oe=p!==t,ve=p===null,ke=p===p,Ke=zs(p);if(!ve&&!Ke&&!J&&h>p||J&&oe&&ke&&!ve&&!Ke||R&&oe&&ke||!E&&ke||!W)return 1;if(!R&&!J&&!Ke&&h<p||Ke&&E&&W&&!R&&!J||ve&&E&&W||!oe&&W||!ke)return-1}return 0}function ire(h,p,E){for(var R=-1,W=h.criteria,J=p.criteria,oe=W.length,ve=E.length;++R<oe;){var ke=pR(W[R],J[R]);if(ke){if(R>=ve)return ke;var Ke=E[R];return ke*(Ke=="desc"?-1:1)}}return h.index-p.index}function vR(h,p,E,R){for(var W=-1,J=h.length,oe=E.length,ve=-1,ke=p.length,Ke=Xn(J-oe,0),Ge=fe(ke+Ke),Ze=!R;++ve<ke;)Ge[ve]=p[ve];for(;++W<oe;)(Ze||W<J)&&(Ge[E[W]]=h[W]);for(;Ke--;)Ge[ve++]=h[W++];return Ge}function gR(h,p,E,R){for(var W=-1,J=h.length,oe=-1,ve=E.length,ke=-1,Ke=p.length,Ge=Xn(J-ve,0),Ze=fe(Ge+Ke),gt=!R;++W<Ge;)Ze[W]=h[W];for(var At=W;++ke<Ke;)Ze[At+ke]=p[ke];for(;++oe<ve;)(gt||W<J)&&(Ze[At+E[oe]]=h[W++]);return Ze}function ys(h,p){var E=-1,R=h.length;for(p||(p=fe(R));++E<R;)p[E]=h[E];return p}function Va(h,p,E,R){var W=!E;E||(E={});for(var J=-1,oe=p.length;++J<oe;){var ve=p[J],ke=R?R(E[ve],h[ve],ve,E,h):t;ke===t&&(ke=h[ve]),W?Nl(E,ve,ke):wg(E,ve,ke)}return E}function sre(h,p){return Va(h,D2(h),p)}function ore(h,p){return Va(h,AR(h),p)}function c0(h,p){return function(E,R){var W=Zt(E)?ue:Ite,J=p?p():{};return W(E,h,Ft(R,2),J)}}function xd(h){return cr(function(p,E){var R=-1,W=E.length,J=W>1?E[W-1]:t,oe=W>2?E[2]:t;for(J=h.length>3&&typeof J=="function"?(W--,J):t,oe&&Zi(E[0],E[1],oe)&&(J=W<3?t:J,W=1),p=yt(p);++R<W;){var ve=E[R];ve&&h(p,ve,R,J)}return p})}function yR(h,p){return function(E,R){if(E==null)return E;if(!ms(E))return h(E,R);for(var W=E.length,J=p?W:-1,oe=yt(E);(p?J--:++J<W)&&R(oe[J],J,oe)!==!1;);return E}}function mR(h){return function(p,E,R){for(var W=-1,J=yt(p),oe=R(p),ve=oe.length;ve--;){var ke=oe[h?ve:++W];if(E(J[ke],ke,J)===!1)break}return p}}function are(h,p,E){var R=p&T,W=Sg(h);function J(){var oe=this&&this!==un&&this instanceof J?W:h;return oe.apply(R?E:this,arguments)}return J}function bR(h){return function(p){p=Nr(p);var E=gs(p)?Vi(p):t,R=E?E[0]:p.charAt(0),W=E?Hu(E,1).join(""):p.slice(1);return R[h]()+W}}function Ed(h){return function(p){return Gt(yD(gD(p).replace(og,"")),h,"")}}function Sg(h){return function(){var p=arguments;switch(p.length){case 0:return new h;case 1:return new h(p[0]);case 2:return new h(p[0],p[1]);case 3:return new h(p[0],p[1],p[2]);case 4:return new h(p[0],p[1],p[2],p[3]);case 5:return new h(p[0],p[1],p[2],p[3],p[4]);case 6:return new h(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new h(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var E=_d(h.prototype),R=h.apply(E,p);return fn(R)?R:E}}function lre(h,p,E){var R=Sg(h);function W(){for(var J=arguments.length,oe=fe(J),ve=J,ke=Sd(W);ve--;)oe[ve]=arguments[ve];var Ke=J<3&&oe[0]!==ke&&oe[J-1]!==ke?[]:Fs(oe,ke);if(J-=Ke.length,J<E)return ER(h,p,f0,W.placeholder,t,oe,Ke,t,t,E-J);var Ge=this&&this!==un&&this instanceof W?R:h;return K(Ge,this,oe)}return W}function wR(h){return function(p,E,R){var W=yt(p);if(!ms(p)){var J=Ft(E,3);p=oi(p),E=function(ve){return J(W[ve],ve,W)}}var oe=h(p,E,R);return oe>-1?W[J?p[oe]:oe]:t}}function $R(h){return Dl(function(p){var E=p.length,R=E,W=bo.prototype.thru;for(h&&p.reverse();R--;){var J=p[R];if(typeof J!="function")throw new ur(o);if(W&&!oe&&v0(J)=="wrapper")var oe=new bo([],!0)}for(R=oe?R:E;++R<E;){J=p[R];var ve=v0(J),ke=ve=="wrapper"?N2(J):t;ke&&M2(ke[0])&&ke[1]==(g|x|O|M)&&!ke[4].length&&ke[9]==1?oe=oe[v0(ke[0])].apply(oe,ke[3]):oe=J.length==1&&M2(J)?oe[ve]():oe.thru(J)}return function(){var Ke=arguments,Ge=Ke[0];if(oe&&Ke.length==1&&Zt(Ge))return oe.plant(Ge).value();for(var Ze=0,gt=E?p[Ze].apply(this,Ke):Ge;++Ze<E;)gt=p[Ze].call(this,gt);return gt}})}function f0(h,p,E,R,W,J,oe,ve,ke,Ke){var Ge=p&g,Ze=p&T,gt=p&_,At=p&(x|I),Ht=p&B,nr=gt?t:Sg(h);function Ut(){for(var yr=arguments.length,wr=fe(yr),Hs=yr;Hs--;)wr[Hs]=arguments[Hs];if(At)var Xi=Sd(Ut),Us=Ls(wr,Xi);if(R&&(wr=vR(wr,R,W,At)),J&&(wr=gR(wr,J,oe,At)),yr-=Us,At&&yr<Ke){var In=Fs(wr,Xi);return ER(h,p,f0,Ut.placeholder,E,wr,In,ve,ke,Ke-yr)}var la=Ze?E:this,Fl=gt?la[h]:h;return yr=wr.length,ve?wr=Ire(wr,ve):Ht&&yr>1&&wr.reverse(),Ge&&ke<yr&&(wr.length=ke),this&&this!==un&&this instanceof Ut&&(Fl=nr||Sg(Fl)),Fl.apply(la,wr)}return Ut}function _R(h,p){return function(E,R){return Bte(E,h,p(R),{})}}function h0(h,p){return function(E,R){var W;if(E===t&&R===t)return p;if(E!==t&&(W=E),R!==t){if(W===t)return R;typeof E=="string"||typeof R=="string"?(E=js(E),R=js(R)):(E=aR(E),R=aR(R)),W=h(E,R)}return W}}function A2(h){return Dl(function(p){return p=bt(p,Ki(Ft())),cr(function(E){var R=this;return h(p,function(W){return K(W,R,E)})})})}function d0(h,p){p=p===t?" ":js(p);var E=p.length;if(E<2)return E?_2(p,h):p;var R=_2(p,Qb(h/qa(p)));return gs(p)?Hu(Vi(R),0,h).join(""):R.slice(0,h)}function ure(h,p,E,R){var W=p&T,J=Sg(h);function oe(){for(var ve=-1,ke=arguments.length,Ke=-1,Ge=R.length,Ze=fe(Ge+ke),gt=this&&this!==un&&this instanceof oe?J:h;++Ke<Ge;)Ze[Ke]=R[Ke];for(;ke--;)Ze[Ke++]=arguments[++ve];return K(gt,W?E:this,Ze)}return oe}function xR(h){return function(p,E,R){return R&&typeof R!="number"&&Zi(p,E,R)&&(E=R=t),p=Ll(p),E===t?(E=p,p=0):E=Ll(E),R=R===t?p<E?1:-1:Ll(R),Gte(p,E,R,h)}}function p0(h){return function(p,E){return typeof p=="string"&&typeof E=="string"||(p=xo(p),E=xo(E)),h(p,E)}}function ER(h,p,E,R,W,J,oe,ve,ke,Ke){var Ge=p&x,Ze=Ge?oe:t,gt=Ge?t:oe,At=Ge?J:t,Ht=Ge?t:J;p|=Ge?O:C,p&=~(Ge?C:O),p&A||(p&=~(T|_));var nr=[h,p,W,At,Ze,Ht,gt,ve,ke,Ke],Ut=E.apply(t,nr);return M2(h)&&BR(Ut,nr),Ut.placeholder=R,MR(Ut,h,p)}function O2(h){var p=_t[h];return function(E,R){if(E=xo(E),R=R==null?0:Mi(tr(R),292),R&&MN(E)){var W=(Nr(E)+"e").split("e"),J=p(W[0]+"e"+(+W[1]+R));return W=(Nr(J)+"e").split("e"),+(W[0]+"e"+(+W[1]-R))}return p(E)}}var cre=wd&&1/Ol(new wd([,-0]))[1]==ie?function(h){return new wd(h)}:J2;function SR(h){return function(p){var E=Li(p);return E==ae?md(p):E==pt?dg(p):ia(p,h(p))}}function Rl(h,p,E,R,W,J,oe,ve){var ke=p&_;if(!ke&&typeof h!="function")throw new ur(o);var Ke=R?R.length:0;if(Ke||(p&=~(O|C),R=W=t),oe=oe===t?oe:Xn(tr(oe),0),ve=ve===t?ve:tr(ve),Ke-=W?W.length:0,p&C){var Ge=R,Ze=W;R=W=t}var gt=ke?t:N2(h),At=[h,p,E,R,W,Ge,Ze,J,oe,ve];if(gt&&Sre(At,gt),h=At[0],p=At[1],E=At[2],R=At[3],W=At[4],ve=At[9]=At[9]===t?ke?0:h.length:Xn(At[9]-Ke,0),!ve&&p&(x|I)&&(p&=~(x|I)),!p||p==T)var Ht=are(h,p,E);else p==x||p==I?Ht=lre(h,p,ve):(p==O||p==(T|O))&&!W.length?Ht=ure(h,p,E,R):Ht=f0.apply(t,At);var nr=gt?sR:BR;return MR(nr(Ht,At),h,p)}function kR(h,p,E,R){return h===t||aa(h,Zn[E])&&!qt.call(R,E)?p:h}function TR(h,p,E,R,W,J){return fn(h)&&fn(p)&&(J.set(p,h),a0(h,p,t,TR,J),J.delete(p)),h}function fre(h){return Ig(h)?t:h}function IR(h,p,E,R,W,J){var oe=E&w,ve=h.length,ke=p.length;if(ve!=ke&&!(oe&&ke>ve))return!1;var Ke=J.get(h),Ge=J.get(p);if(Ke&&Ge)return Ke==p&&Ge==h;var Ze=-1,gt=!0,At=E&b?new mf:t;for(J.set(h,p),J.set(p,h);++Ze<ve;){var Ht=h[Ze],nr=p[Ze];if(R)var Ut=oe?R(nr,Ht,Ze,p,h,J):R(Ht,nr,Ze,h,p,J);if(Ut!==t){if(Ut)continue;gt=!1;break}if(At){if(!cn(p,function(yr,wr){if(!df(At,wr)&&(Ht===yr||W(Ht,yr,E,R,J)))return At.push(wr)})){gt=!1;break}}else if(!(Ht===nr||W(Ht,nr,E,R,J))){gt=!1;break}}return J.delete(h),J.delete(p),gt}function hre(h,p,E,R,W,J,oe){switch(E){case Pi:if(h.byteLength!=p.byteLength||h.byteOffset!=p.byteOffset)return!1;h=h.buffer,p=p.buffer;case pn:return!(h.byteLength!=p.byteLength||!J(new Yb(h),new Yb(p)));case $:case S:case ye:return aa(+h,+p);case F:return h.name==p.name&&h.message==p.message;case mt:case Rt:return h==p+"";case ae:var ve=md;case pt:var ke=R&w;if(ve||(ve=Ol),h.size!=p.size&&!ke)return!1;var Ke=oe.get(h);if(Ke)return Ke==p;R|=b,oe.set(h,p);var Ge=IR(ve(h),ve(p),R,W,J,oe);return oe.delete(h),Ge;case dr:if(bg)return bg.call(h)==bg.call(p)}return!1}function dre(h,p,E,R,W,J){var oe=E&w,ve=C2(h),ke=ve.length,Ke=C2(p),Ge=Ke.length;if(ke!=Ge&&!oe)return!1;for(var Ze=ke;Ze--;){var gt=ve[Ze];if(!(oe?gt in p:qt.call(p,gt)))return!1}var At=J.get(h),Ht=J.get(p);if(At&&Ht)return At==p&&Ht==h;var nr=!0;J.set(h,p),J.set(p,h);for(var Ut=oe;++Ze<ke;){gt=ve[Ze];var yr=h[gt],wr=p[gt];if(R)var Hs=oe?R(wr,yr,gt,p,h,J):R(yr,wr,gt,h,p,J);if(!(Hs===t?yr===wr||W(yr,wr,E,R,J):Hs)){nr=!1;break}Ut||(Ut=gt=="constructor")}if(nr&&!Ut){var Xi=h.constructor,Us=p.constructor;Xi!=Us&&"constructor"in h&&"constructor"in p&&!(typeof Xi=="function"&&Xi instanceof Xi&&typeof Us=="function"&&Us instanceof Us)&&(nr=!1)}return J.delete(h),J.delete(p),nr}function Dl(h){return F2(RR(h,t,UR),h+"")}function C2(h){return GN(h,oi,D2)}function P2(h){return GN(h,bs,AR)}var N2=t0?function(h){return t0.get(h)}:J2;function v0(h){for(var p=h.name+"",E=$d[p],R=qt.call($d,p)?E.length:0;R--;){var W=E[R],J=W.func;if(J==null||J==h)return W.name}return p}function Sd(h){var p=qt.call(G,"placeholder")?G:h;return p.placeholder}function Ft(){var h=G.iteratee||Z2;return h=h===Z2?XN:h,arguments.length?h(arguments[0],arguments[1]):h}function g0(h,p){var E=h.__data__;return $re(p)?E[typeof p=="string"?"string":"hash"]:E.map}function R2(h){for(var p=oi(h),E=p.length;E--;){var R=p[E],W=h[R];p[E]=[R,W,PR(W)]}return p}function $f(h,p){var E=Wb(h,p);return ZN(E)?E:t}function pre(h){var p=qt.call(h,gf),E=h[gf];try{h[gf]=t;var R=!0}catch{}var W=Vb.call(h);return R&&(p?h[gf]=E:delete h[gf]),W}var D2=l2?function(h){return h==null?[]:(h=yt(h),Be(l2(h),function(p){return DN.call(h,p)}))}:Q2,AR=l2?function(h){for(var p=[];h;)Yt(p,D2(h)),h=Zb(h);return p}:Q2,Li=Yi;(u2&&Li(new u2(new ArrayBuffer(1)))!=Pi||gg&&Li(new gg)!=ae||c2&&Li(c2.resolve())!=st||wd&&Li(new wd)!=pt||yg&&Li(new yg)!=ct)&&(Li=function(h){var p=Yi(h),E=p==ze?h.constructor:t,R=E?_f(E):"";if(R)switch(R){case Zee:return Pi;case Xee:return ae;case Jee:return st;case Qee:return pt;case ete:return ct}return p});function vre(h,p,E){for(var R=-1,W=E.length;++R<W;){var J=E[R],oe=J.size;switch(J.type){case"drop":h+=oe;break;case"dropRight":p-=oe;break;case"take":p=Mi(p,h+oe);break;case"takeRight":h=Xn(h,p-oe);break}}return{start:h,end:p}}function gre(h){var p=h.match(eg);return p?p[1].split(tg):[]}function OR(h,p,E){p=zu(p,h);for(var R=-1,W=p.length,J=!1;++R<W;){var oe=Ga(p[R]);if(!(J=h!=null&&E(h,oe)))break;h=h[oe]}return J||++R!=W?J:(W=h==null?0:h.length,!!W&&x0(W)&&Bl(oe,W)&&(Zt(h)||xf(h)))}function yre(h){var p=h.length,E=new h.constructor(p);return p&&typeof h[0]=="string"&&qt.call(h,"index")&&(E.index=h.index,E.input=h.input),E}function CR(h){return typeof h.constructor=="function"&&!kg(h)?_d(Zb(h)):{}}function mre(h,p,E){var R=h.constructor;switch(p){case pn:return I2(h);case $:case S:return new R(+h);case Pi:return tre(h,E);case Wi:case vn:case ds:case uo:case Ni:case qi:case co:case rf:case fo:return dR(h,E);case ae:return new R;case ye:case Rt:return new R(h);case mt:return rre(h);case pt:return new R;case dr:return nre(h)}}function bre(h,p){var E=p.length;if(!E)return h;var R=E-1;return p[R]=(E>1?"& ":"")+p[R],p=p.join(E>2?", ":" "),h.replace(Qv,`{
/* [wrapped with `+p+`] */
`)}function wre(h){return Zt(h)||xf(h)||!!(BN&&h&&h[BN])}function Bl(h,p){var E=typeof h;return p=p??Ee,!!p&&(E=="number"||E!="symbol"&&Nu.test(h))&&h>-1&&h%1==0&&h<p}function Zi(h,p,E){if(!fn(E))return!1;var R=typeof p;return(R=="number"?ms(E)&&Bl(p,E.length):R=="string"&&p in E)?aa(E[p],h):!1}function B2(h,p){if(Zt(h))return!1;var E=typeof h;return E=="number"||E=="symbol"||E=="boolean"||h==null||zs(h)?!0:nd.test(h)||!Jv.test(h)||p!=null&&h in yt(p)}function $re(h){var p=typeof h;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?h!=="__proto__":h===null}function M2(h){var p=v0(h),E=G[p];if(typeof E!="function"||!(p in br.prototype))return!1;if(h===E)return!0;var R=N2(E);return!!R&&h===R[0]}function _re(h){return!!PN&&PN in h}var xre=Gi?Ml:eE;function kg(h){var p=h&&h.constructor,E=typeof p=="function"&&p.prototype||Zn;return h===E}function PR(h){return h===h&&!fn(h)}function NR(h,p){return function(E){return E==null?!1:E[h]===p&&(p!==t||h in yt(E))}}function Ere(h){var p=$0(h,function(R){return E.size===u&&E.clear(),R}),E=p.cache;return p}function Sre(h,p){var E=h[1],R=p[1],W=E|R,J=W<(T|_|g),oe=R==g&&E==x||R==g&&E==M&&h[7].length<=p[8]||R==(g|M)&&p[7].length<=p[8]&&E==x;if(!(J||oe))return h;R&T&&(h[2]=p[2],W|=E&T?0:A);var ve=p[3];if(ve){var ke=h[3];h[3]=ke?vR(ke,ve,p[4]):ve,h[4]=ke?Fs(h[3],f):p[4]}return ve=p[5],ve&&(ke=h[5],h[5]=ke?gR(ke,ve,p[6]):ve,h[6]=ke?Fs(h[5],f):p[6]),ve=p[7],ve&&(h[7]=ve),R&g&&(h[8]=h[8]==null?p[8]:Mi(h[8],p[8])),h[9]==null&&(h[9]=p[9]),h[0]=p[0],h[1]=W,h}function kre(h){var p=[];if(h!=null)for(var E in yt(h))p.push(E);return p}function Tre(h){return Vb.call(h)}function RR(h,p,E){return p=Xn(p===t?h.length-1:p,0),function(){for(var R=arguments,W=-1,J=Xn(R.length-p,0),oe=fe(J);++W<J;)oe[W]=R[p+W];W=-1;for(var ve=fe(p+1);++W<p;)ve[W]=R[W];return ve[p]=E(oe),K(h,this,ve)}}function DR(h,p){return p.length<2?h:wf(h,$o(p,0,-1))}function Ire(h,p){for(var E=h.length,R=Mi(p.length,E),W=ys(h);R--;){var J=p[R];h[R]=Bl(J,E)?W[J]:t}return h}function L2(h,p){if(!(p==="constructor"&&typeof h[p]=="function")&&p!="__proto__")return h[p]}var BR=LR(sR),Tg=Uee||function(h,p){return un.setTimeout(h,p)},F2=LR(Xte);function MR(h,p,E){var R=p+"";return F2(h,bre(R,Are(gre(R),E)))}function LR(h){var p=0,E=0;return function(){var R=Vee(),W=re-(R-E);if(E=R,W>0){if(++p>=Q)return arguments[0]}else p=0;return h.apply(t,arguments)}}function y0(h,p){var E=-1,R=h.length,W=R-1;for(p=p===t?R:p;++E<p;){var J=$2(E,W),oe=h[J];h[J]=h[E],h[E]=oe}return h.length=p,h}var FR=Ere(function(h){var p=[];return h.charCodeAt(0)===46&&p.push(""),h.replace(id,function(E,R,W,J){p.push(W?J.replace(ng,"$1"):R||E)}),p});function Ga(h){if(typeof h=="string"||zs(h))return h;var p=h+"";return p=="0"&&1/h==-ie?"-0":p}function _f(h){if(h!=null){try{return sa.call(h)}catch{}try{return h+""}catch{}}return""}function Are(h,p){return se(_e,function(E){var R="_."+E[0];p&E[1]&&!Ae(h,R)&&h.push(R)}),h.sort()}function jR(h){if(h instanceof br)return h.clone();var p=new bo(h.__wrapped__,h.__chain__);return p.__actions__=ys(h.__actions__),p.__index__=h.__index__,p.__values__=h.__values__,p}function Ore(h,p,E){(E?Zi(h,p,E):p===t)?p=1:p=Xn(tr(p),0);var R=h==null?0:h.length;if(!R||p<1)return[];for(var W=0,J=0,oe=fe(Qb(R/p));W<R;)oe[J++]=$o(h,W,W+=p);return oe}function Cre(h){for(var p=-1,E=h==null?0:h.length,R=0,W=[];++p<E;){var J=h[p];J&&(W[R++]=J)}return W}function Pre(){var h=arguments.length;if(!h)return[];for(var p=fe(h-1),E=arguments[0],R=h;R--;)p[R-1]=arguments[R];return Yt(Zt(E)?ys(E):[E],xi(p,1))}var Nre=cr(function(h,p){return Tn(h)?$g(h,xi(p,1,Tn,!0)):[]}),Rre=cr(function(h,p){var E=_o(p);return Tn(E)&&(E=t),Tn(h)?$g(h,xi(p,1,Tn,!0),Ft(E,2)):[]}),Dre=cr(function(h,p){var E=_o(p);return Tn(E)&&(E=t),Tn(h)?$g(h,xi(p,1,Tn,!0),t,E):[]});function Bre(h,p,E){var R=h==null?0:h.length;return R?(p=E||p===t?1:tr(p),$o(h,p<0?0:p,R)):[]}function Mre(h,p,E){var R=h==null?0:h.length;return R?(p=E||p===t?1:tr(p),p=R-p,$o(h,0,p<0?0:p)):[]}function Lre(h,p){return h&&h.length?u0(h,Ft(p,3),!0,!0):[]}function Fre(h,p){return h&&h.length?u0(h,Ft(p,3),!0):[]}function jre(h,p,E,R){var W=h==null?0:h.length;return W?(E&&typeof E!="number"&&Zi(h,p,E)&&(E=0,R=W),Pte(h,p,E,R)):[]}function zR(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=E==null?0:tr(E);return W<0&&(W=Xn(R+W,0)),vr(h,Ft(p,3),W)}function HR(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=R-1;return E!==t&&(W=tr(E),W=E<0?Xn(R+W,0):Mi(W,R-1)),vr(h,Ft(p,3),W,!0)}function UR(h){var p=h==null?0:h.length;return p?xi(h,1):[]}function zre(h){var p=h==null?0:h.length;return p?xi(h,ie):[]}function Hre(h,p){var E=h==null?0:h.length;return E?(p=p===t?1:tr(p),xi(h,p)):[]}function Ure(h){for(var p=-1,E=h==null?0:h.length,R={};++p<E;){var W=h[p];R[W[0]]=W[1]}return R}function WR(h){return h&&h.length?h[0]:t}function Wre(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=E==null?0:tr(E);return W<0&&(W=Xn(R+W,0)),Mr(h,p,W)}function qre(h){var p=h==null?0:h.length;return p?$o(h,0,-1):[]}var Kre=cr(function(h){var p=bt(h,k2);return p.length&&p[0]===h[0]?g2(p):[]}),Vre=cr(function(h){var p=_o(h),E=bt(h,k2);return p===_o(E)?p=t:E.pop(),E.length&&E[0]===h[0]?g2(E,Ft(p,2)):[]}),Gre=cr(function(h){var p=_o(h),E=bt(h,k2);return p=typeof p=="function"?p:t,p&&E.pop(),E.length&&E[0]===h[0]?g2(E,t,p):[]});function Yre(h,p){return h==null?"":qee.call(h,p)}function _o(h){var p=h==null?0:h.length;return p?h[p-1]:t}function Zre(h,p,E){var R=h==null?0:h.length;if(!R)return-1;var W=R;return E!==t&&(W=tr(E),W=W<0?Xn(R+W,0):Mi(W,R-1)),p===p?bd(h,p,W):vr(h,yd,W,!0)}function Xre(h,p){return h&&h.length?tR(h,tr(p)):t}var Jre=cr(qR);function qR(h,p){return h&&h.length&&p&&p.length?w2(h,p):h}function Qre(h,p,E){return h&&h.length&&p&&p.length?w2(h,p,Ft(E,2)):h}function ene(h,p,E){return h&&h.length&&p&&p.length?w2(h,p,t,E):h}var tne=Dl(function(h,p){var E=h==null?0:h.length,R=h2(h,p);return iR(h,bt(p,function(W){return Bl(W,E)?+W:W}).sort(pR)),R});function rne(h,p){var E=[];if(!(h&&h.length))return E;var R=-1,W=[],J=h.length;for(p=Ft(p,3);++R<J;){var oe=h[R];p(oe,R,h)&&(E.push(oe),W.push(R))}return iR(h,W),E}function j2(h){return h==null?h:Yee.call(h)}function nne(h,p,E){var R=h==null?0:h.length;return R?(E&&typeof E!="number"&&Zi(h,p,E)?(p=0,E=R):(p=p==null?0:tr(p),E=E===t?R:tr(E)),$o(h,p,E)):[]}function ine(h,p){return l0(h,p)}function sne(h,p,E){return x2(h,p,Ft(E,2))}function one(h,p){var E=h==null?0:h.length;if(E){var R=l0(h,p);if(R<E&&aa(h[R],p))return R}return-1}function ane(h,p){return l0(h,p,!0)}function lne(h,p,E){return x2(h,p,Ft(E,2),!0)}function une(h,p){var E=h==null?0:h.length;if(E){var R=l0(h,p,!0)-1;if(aa(h[R],p))return R}return-1}function cne(h){return h&&h.length?oR(h):[]}function fne(h,p){return h&&h.length?oR(h,Ft(p,2)):[]}function hne(h){var p=h==null?0:h.length;return p?$o(h,1,p):[]}function dne(h,p,E){return h&&h.length?(p=E||p===t?1:tr(p),$o(h,0,p<0?0:p)):[]}function pne(h,p,E){var R=h==null?0:h.length;return R?(p=E||p===t?1:tr(p),p=R-p,$o(h,p<0?0:p,R)):[]}function vne(h,p){return h&&h.length?u0(h,Ft(p,3),!1,!0):[]}function gne(h,p){return h&&h.length?u0(h,Ft(p,3)):[]}var yne=cr(function(h){return ju(xi(h,1,Tn,!0))}),mne=cr(function(h){var p=_o(h);return Tn(p)&&(p=t),ju(xi(h,1,Tn,!0),Ft(p,2))}),bne=cr(function(h){var p=_o(h);return p=typeof p=="function"?p:t,ju(xi(h,1,Tn,!0),t,p)});function wne(h){return h&&h.length?ju(h):[]}function $ne(h,p){return h&&h.length?ju(h,Ft(p,2)):[]}function _ne(h,p){return p=typeof p=="function"?p:t,h&&h.length?ju(h,t,p):[]}function z2(h){if(!(h&&h.length))return[];var p=0;return h=Be(h,function(E){if(Tn(E))return p=Xn(E.length,p),!0}),hf(p,function(E){return bt(h,Al(E))})}function KR(h,p){if(!(h&&h.length))return[];var E=z2(h);return p==null?E:bt(E,function(R){return K(p,t,R)})}var xne=cr(function(h,p){return Tn(h)?$g(h,p):[]}),Ene=cr(function(h){return S2(Be(h,Tn))}),Sne=cr(function(h){var p=_o(h);return Tn(p)&&(p=t),S2(Be(h,Tn),Ft(p,2))}),kne=cr(function(h){var p=_o(h);return p=typeof p=="function"?p:t,S2(Be(h,Tn),t,p)}),Tne=cr(z2);function Ine(h,p){return cR(h||[],p||[],wg)}function Ane(h,p){return cR(h||[],p||[],Eg)}var One=cr(function(h){var p=h.length,E=p>1?h[p-1]:t;return E=typeof E=="function"?(h.pop(),E):t,KR(h,E)});function VR(h){var p=G(h);return p.__chain__=!0,p}function Cne(h,p){return p(h),h}function m0(h,p){return p(h)}var Pne=Dl(function(h){var p=h.length,E=p?h[0]:0,R=this.__wrapped__,W=function(J){return h2(J,h)};return p>1||this.__actions__.length||!(R instanceof br)||!Bl(E)?this.thru(W):(R=R.slice(E,+E+(p?1:0)),R.__actions__.push({func:m0,args:[W],thisArg:t}),new bo(R,this.__chain__).thru(function(J){return p&&!J.length&&J.push(t),J}))});function Nne(){return VR(this)}function Rne(){return new bo(this.value(),this.__chain__)}function Dne(){this.__values__===t&&(this.__values__=aD(this.value()));var h=this.__index__>=this.__values__.length,p=h?t:this.__values__[this.__index__++];return{done:h,value:p}}function Bne(){return this}function Mne(h){for(var p,E=this;E instanceof n0;){var R=jR(E);R.__index__=0,R.__values__=t,p?W.__wrapped__=R:p=R;var W=R;E=E.__wrapped__}return W.__wrapped__=h,p}function Lne(){var h=this.__wrapped__;if(h instanceof br){var p=h;return this.__actions__.length&&(p=new br(this)),p=p.reverse(),p.__actions__.push({func:m0,args:[j2],thisArg:t}),new bo(p,this.__chain__)}return this.thru(j2)}function Fne(){return uR(this.__wrapped__,this.__actions__)}var jne=c0(function(h,p,E){qt.call(h,E)?++h[E]:Nl(h,E,1)});function zne(h,p,E){var R=Zt(h)?Ce:Cte;return E&&Zi(h,p,E)&&(p=t),R(h,Ft(p,3))}function Hne(h,p){var E=Zt(h)?Be:KN;return E(h,Ft(p,3))}var Une=wR(zR),Wne=wR(HR);function qne(h,p){return xi(b0(h,p),1)}function Kne(h,p){return xi(b0(h,p),ie)}function Vne(h,p,E){return E=E===t?1:tr(E),xi(b0(h,p),E)}function GR(h,p){var E=Zt(h)?se:Fu;return E(h,Ft(p,3))}function YR(h,p){var E=Zt(h)?xe:qN;return E(h,Ft(p,3))}var Gne=c0(function(h,p,E){qt.call(h,E)?h[E].push(p):Nl(h,E,[p])});function Yne(h,p,E,R){h=ms(h)?h:Td(h),E=E&&!R?tr(E):0;var W=h.length;return E<0&&(E=Xn(W+E,0)),E0(h)?E<=W&&h.indexOf(p,E)>-1:!!W&&Mr(h,p,E)>-1}var Zne=cr(function(h,p,E){var R=-1,W=typeof p=="function",J=ms(h)?fe(h.length):[];return Fu(h,function(oe){J[++R]=W?K(p,oe,E):_g(oe,p,E)}),J}),Xne=c0(function(h,p,E){Nl(h,E,p)});function b0(h,p){var E=Zt(h)?bt:JN;return E(h,Ft(p,3))}function Jne(h,p,E,R){return h==null?[]:(Zt(p)||(p=p==null?[]:[p]),E=R?t:E,Zt(E)||(E=E==null?[]:[E]),rR(h,p,E))}var Qne=c0(function(h,p,E){h[E?0:1].push(p)},function(){return[[],[]]});function eie(h,p,E){var R=Zt(h)?Gt:na,W=arguments.length<3;return R(h,Ft(p,4),E,W,Fu)}function tie(h,p,E){var R=Zt(h)?Gn:na,W=arguments.length<3;return R(h,Ft(p,4),E,W,qN)}function rie(h,p){var E=Zt(h)?Be:KN;return E(h,_0(Ft(p,3)))}function nie(h){var p=Zt(h)?zN:Yte;return p(h)}function iie(h,p,E){(E?Zi(h,p,E):p===t)?p=1:p=tr(p);var R=Zt(h)?kte:Zte;return R(h,p)}function sie(h){var p=Zt(h)?Tte:Jte;return p(h)}function oie(h){if(h==null)return 0;if(ms(h))return E0(h)?qa(h):h.length;var p=Li(h);return p==ae||p==pt?h.size:m2(h).length}function aie(h,p,E){var R=Zt(h)?cn:Qte;return E&&Zi(h,p,E)&&(p=t),R(h,Ft(p,3))}var lie=cr(function(h,p){if(h==null)return[];var E=p.length;return E>1&&Zi(h,p[0],p[1])?p=[]:E>2&&Zi(p[0],p[1],p[2])&&(p=[p[0]]),rR(h,xi(p,1),[])}),w0=Hee||function(){return un.Date.now()};function uie(h,p){if(typeof p!="function")throw new ur(o);return h=tr(h),function(){if(--h<1)return p.apply(this,arguments)}}function ZR(h,p,E){return p=E?t:p,p=h&&p==null?h.length:p,Rl(h,g,t,t,t,t,p)}function XR(h,p){var E;if(typeof p!="function")throw new ur(o);return h=tr(h),function(){return--h>0&&(E=p.apply(this,arguments)),h<=1&&(p=t),E}}var H2=cr(function(h,p,E){var R=T;if(E.length){var W=Fs(E,Sd(H2));R|=O}return Rl(h,R,p,E,W)}),JR=cr(function(h,p,E){var R=T|_;if(E.length){var W=Fs(E,Sd(JR));R|=O}return Rl(p,R,h,E,W)});function QR(h,p,E){p=E?t:p;var R=Rl(h,x,t,t,t,t,t,p);return R.placeholder=QR.placeholder,R}function eD(h,p,E){p=E?t:p;var R=Rl(h,I,t,t,t,t,t,p);return R.placeholder=eD.placeholder,R}function tD(h,p,E){var R,W,J,oe,ve,ke,Ke=0,Ge=!1,Ze=!1,gt=!0;if(typeof h!="function")throw new ur(o);p=xo(p)||0,fn(E)&&(Ge=!!E.leading,Ze="maxWait"in E,J=Ze?Xn(xo(E.maxWait)||0,p):J,gt="trailing"in E?!!E.trailing:gt);function At(In){var la=R,Fl=W;return R=W=t,Ke=In,oe=h.apply(Fl,la),oe}function Ht(In){return Ke=In,ve=Tg(yr,p),Ge?At(In):oe}function nr(In){var la=In-ke,Fl=In-Ke,wD=p-la;return Ze?Mi(wD,J-Fl):wD}function Ut(In){var la=In-ke,Fl=In-Ke;return ke===t||la>=p||la<0||Ze&&Fl>=J}function yr(){var In=w0();if(Ut(In))return wr(In);ve=Tg(yr,nr(In))}function wr(In){return ve=t,gt&&R?At(In):(R=W=t,oe)}function Hs(){ve!==t&&fR(ve),Ke=0,R=ke=W=ve=t}function Xi(){return ve===t?oe:wr(w0())}function Us(){var In=w0(),la=Ut(In);if(R=arguments,W=this,ke=In,la){if(ve===t)return Ht(ke);if(Ze)return fR(ve),ve=Tg(yr,p),At(ke)}return ve===t&&(ve=Tg(yr,p)),oe}return Us.cancel=Hs,Us.flush=Xi,Us}var cie=cr(function(h,p){return WN(h,1,p)}),fie=cr(function(h,p,E){return WN(h,xo(p)||0,E)});function hie(h){return Rl(h,B)}function $0(h,p){if(typeof h!="function"||p!=null&&typeof p!="function")throw new ur(o);var E=function(){var R=arguments,W=p?p.apply(this,R):R[0],J=E.cache;if(J.has(W))return J.get(W);var oe=h.apply(this,R);return E.cache=J.set(W,oe)||J,oe};return E.cache=new($0.Cache||Pl),E}$0.Cache=Pl;function _0(h){if(typeof h!="function")throw new ur(o);return function(){var p=arguments;switch(p.length){case 0:return!h.call(this);case 1:return!h.call(this,p[0]);case 2:return!h.call(this,p[0],p[1]);case 3:return!h.call(this,p[0],p[1],p[2])}return!h.apply(this,p)}}function die(h){return XR(2,h)}var pie=ere(function(h,p){p=p.length==1&&Zt(p[0])?bt(p[0],Ki(Ft())):bt(xi(p,1),Ki(Ft()));var E=p.length;return cr(function(R){for(var W=-1,J=Mi(R.length,E);++W<J;)R[W]=p[W].call(this,R[W]);return K(h,this,R)})}),U2=cr(function(h,p){var E=Fs(p,Sd(U2));return Rl(h,O,t,p,E)}),rD=cr(function(h,p){var E=Fs(p,Sd(rD));return Rl(h,C,t,p,E)}),vie=Dl(function(h,p){return Rl(h,M,t,t,t,p)});function gie(h,p){if(typeof h!="function")throw new ur(o);return p=p===t?p:tr(p),cr(h,p)}function yie(h,p){if(typeof h!="function")throw new ur(o);return p=p==null?0:Xn(tr(p),0),cr(function(E){var R=E[p],W=Hu(E,0,p);return R&&Yt(W,R),K(h,this,W)})}function mie(h,p,E){var R=!0,W=!0;if(typeof h!="function")throw new ur(o);return fn(E)&&(R="leading"in E?!!E.leading:R,W="trailing"in E?!!E.trailing:W),tD(h,p,{leading:R,maxWait:p,trailing:W})}function bie(h){return ZR(h,1)}function wie(h,p){return U2(T2(p),h)}function $ie(){if(!arguments.length)return[];var h=arguments[0];return Zt(h)?h:[h]}function _ie(h){return wo(h,y)}function xie(h,p){return p=typeof p=="function"?p:t,wo(h,y,p)}function Eie(h){return wo(h,c|y)}function Sie(h,p){return p=typeof p=="function"?p:t,wo(h,c|y,p)}function kie(h,p){return p==null||UN(h,p,oi(p))}function aa(h,p){return h===p||h!==h&&p!==p}var Tie=p0(v2),Iie=p0(function(h,p){return h>=p}),xf=YN(function(){return arguments}())?YN:function(h){return gn(h)&&qt.call(h,"callee")&&!DN.call(h,"callee")},Zt=fe.isArray,Aie=m?Ki(m):Mte;function ms(h){return h!=null&&x0(h.length)&&!Ml(h)}function Tn(h){return gn(h)&&ms(h)}function Oie(h){return h===!0||h===!1||gn(h)&&Yi(h)==$}var Uu=Wee||eE,Cie=k?Ki(k):Lte;function Pie(h){return gn(h)&&h.nodeType===1&&!Ig(h)}function Nie(h){if(h==null)return!0;if(ms(h)&&(Zt(h)||typeof h=="string"||typeof h.splice=="function"||Uu(h)||kd(h)||xf(h)))return!h.length;var p=Li(h);if(p==ae||p==pt)return!h.size;if(kg(h))return!m2(h).length;for(var E in h)if(qt.call(h,E))return!1;return!0}function Rie(h,p){return xg(h,p)}function Die(h,p,E){E=typeof E=="function"?E:t;var R=E?E(h,p):t;return R===t?xg(h,p,t,E):!!R}function W2(h){if(!gn(h))return!1;var p=Yi(h);return p==F||p==N||typeof h.message=="string"&&typeof h.name=="string"&&!Ig(h)}function Bie(h){return typeof h=="number"&&MN(h)}function Ml(h){if(!fn(h))return!1;var p=Yi(h);return p==z||p==V||p==je||p==wt}function nD(h){return typeof h=="number"&&h==tr(h)}function x0(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=Ee}function fn(h){var p=typeof h;return h!=null&&(p=="object"||p=="function")}function gn(h){return h!=null&&typeof h=="object"}var iD=P?Ki(P):jte;function Mie(h,p){return h===p||y2(h,p,R2(p))}function Lie(h,p,E){return E=typeof E=="function"?E:t,y2(h,p,R2(p),E)}function Fie(h){return sD(h)&&h!=+h}function jie(h){if(xre(h))throw new We(s);return ZN(h)}function zie(h){return h===null}function Hie(h){return h==null}function sD(h){return typeof h=="number"||gn(h)&&Yi(h)==ye}function Ig(h){if(!gn(h)||Yi(h)!=ze)return!1;var p=Zb(h);if(p===null)return!0;var E=qt.call(p,"constructor")&&p.constructor;return typeof E=="function"&&E instanceof E&&sa.call(E)==Lee}var q2=D?Ki(D):zte;function Uie(h){return nD(h)&&h>=-Ee&&h<=Ee}var oD=H?Ki(H):Hte;function E0(h){return typeof h=="string"||!Zt(h)&&gn(h)&&Yi(h)==Rt}function zs(h){return typeof h=="symbol"||gn(h)&&Yi(h)==dr}var kd=U?Ki(U):Ute;function Wie(h){return h===t}function qie(h){return gn(h)&&Li(h)==ct}function Kie(h){return gn(h)&&Yi(h)==It}var Vie=p0(b2),Gie=p0(function(h,p){return h<=p});function aD(h){if(!h)return[];if(ms(h))return E0(h)?Vi(h):ys(h);if(vg&&h[vg])return Wa(h[vg]());var p=Li(h),E=p==ae?md:p==pt?Ol:Td;return E(h)}function Ll(h){if(!h)return h===0?h:0;if(h=xo(h),h===ie||h===-ie){var p=h<0?-1:1;return p*$e}return h===h?h:0}function tr(h){var p=Ll(h),E=p%1;return p===p?E?p-E:p:0}function lD(h){return h?bf(tr(h),0,He):0}function xo(h){if(typeof h=="number")return h;if(zs(h))return Pe;if(fn(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=fn(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=mo(h);var E=ld.test(h);return E||af.test(h)?n2(h.slice(2),E?2:8):Fa.test(h)?Pe:+h}function uD(h){return Va(h,bs(h))}function Yie(h){return h?bf(tr(h),-Ee,Ee):h===0?h:0}function Nr(h){return h==null?"":js(h)}var Zie=xd(function(h,p){if(kg(p)||ms(p)){Va(p,oi(p),h);return}for(var E in p)qt.call(p,E)&&wg(h,E,p[E])}),cD=xd(function(h,p){Va(p,bs(p),h)}),S0=xd(function(h,p,E,R){Va(p,bs(p),h,R)}),Xie=xd(function(h,p,E,R){Va(p,oi(p),h,R)}),Jie=Dl(h2);function Qie(h,p){var E=_d(h);return p==null?E:HN(E,p)}var ese=cr(function(h,p){h=yt(h);var E=-1,R=p.length,W=R>2?p[2]:t;for(W&&Zi(p[0],p[1],W)&&(R=1);++E<R;)for(var J=p[E],oe=bs(J),ve=-1,ke=oe.length;++ve<ke;){var Ke=oe[ve],Ge=h[Ke];(Ge===t||aa(Ge,Zn[Ke])&&!qt.call(h,Ke))&&(h[Ke]=J[Ke])}return h}),tse=cr(function(h){return h.push(t,TR),K(fD,t,h)});function rse(h,p){return Ha(h,Ft(p,3),Ka)}function nse(h,p){return Ha(h,Ft(p,3),p2)}function ise(h,p){return h==null?h:d2(h,Ft(p,3),bs)}function sse(h,p){return h==null?h:VN(h,Ft(p,3),bs)}function ose(h,p){return h&&Ka(h,Ft(p,3))}function ase(h,p){return h&&p2(h,Ft(p,3))}function lse(h){return h==null?[]:o0(h,oi(h))}function use(h){return h==null?[]:o0(h,bs(h))}function K2(h,p,E){var R=h==null?t:wf(h,p);return R===t?E:R}function cse(h,p){return h!=null&&OR(h,p,Nte)}function V2(h,p){return h!=null&&OR(h,p,Rte)}var fse=_R(function(h,p,E){p!=null&&typeof p.toString!="function"&&(p=Vb.call(p)),h[p]=E},Y2(ws)),hse=_R(function(h,p,E){p!=null&&typeof p.toString!="function"&&(p=Vb.call(p)),qt.call(h,p)?h[p].push(E):h[p]=[E]},Ft),dse=cr(_g);function oi(h){return ms(h)?jN(h):m2(h)}function bs(h){return ms(h)?jN(h,!0):Wte(h)}function pse(h,p){var E={};return p=Ft(p,3),Ka(h,function(R,W,J){Nl(E,p(R,W,J),R)}),E}function vse(h,p){var E={};return p=Ft(p,3),Ka(h,function(R,W,J){Nl(E,W,p(R,W,J))}),E}var gse=xd(function(h,p,E){a0(h,p,E)}),fD=xd(function(h,p,E,R){a0(h,p,E,R)}),yse=Dl(function(h,p){var E={};if(h==null)return E;var R=!1;p=bt(p,function(J){return J=zu(J,h),R||(R=J.length>1),J}),Va(h,P2(h),E),R&&(E=wo(E,c|d|y,fre));for(var W=p.length;W--;)E2(E,p[W]);return E});function mse(h,p){return hD(h,_0(Ft(p)))}var bse=Dl(function(h,p){return h==null?{}:Kte(h,p)});function hD(h,p){if(h==null)return{};var E=bt(P2(h),function(R){return[R]});return p=Ft(p),nR(h,E,function(R,W){return p(R,W[0])})}function wse(h,p,E){p=zu(p,h);var R=-1,W=p.length;for(W||(W=1,h=t);++R<W;){var J=h==null?t:h[Ga(p[R])];J===t&&(R=W,J=E),h=Ml(J)?J.call(h):J}return h}function $se(h,p,E){return h==null?h:Eg(h,p,E)}function _se(h,p,E,R){return R=typeof R=="function"?R:t,h==null?h:Eg(h,p,E,R)}var dD=SR(oi),pD=SR(bs);function xse(h,p,E){var R=Zt(h),W=R||Uu(h)||kd(h);if(p=Ft(p,4),E==null){var J=h&&h.constructor;W?E=R?new J:[]:fn(h)?E=Ml(J)?_d(Zb(h)):{}:E={}}return(W?se:Ka)(h,function(oe,ve,ke){return p(E,oe,ve,ke)}),E}function Ese(h,p){return h==null?!0:E2(h,p)}function Sse(h,p,E){return h==null?h:lR(h,p,T2(E))}function kse(h,p,E,R){return R=typeof R=="function"?R:t,h==null?h:lR(h,p,T2(E),R)}function Td(h){return h==null?[]:fg(h,oi(h))}function Tse(h){return h==null?[]:fg(h,bs(h))}function Ise(h,p,E){return E===t&&(E=p,p=t),E!==t&&(E=xo(E),E=E===E?E:0),p!==t&&(p=xo(p),p=p===p?p:0),bf(xo(h),p,E)}function Ase(h,p,E){return p=Ll(p),E===t?(E=p,p=0):E=Ll(E),h=xo(h),Dte(h,p,E)}function Ose(h,p,E){if(E&&typeof E!="boolean"&&Zi(h,p,E)&&(p=E=t),E===t&&(typeof p=="boolean"?(E=p,p=t):typeof h=="boolean"&&(E=h,h=t)),h===t&&p===t?(h=0,p=1):(h=Ll(h),p===t?(p=h,h=0):p=Ll(p)),h>p){var R=h;h=p,p=R}if(E||h%1||p%1){var W=LN();return Mi(h+W*(p-h+ug("1e-"+((W+"").length-1))),p)}return $2(h,p)}var Cse=Ed(function(h,p,E){return p=p.toLowerCase(),h+(E?vD(p):p)});function vD(h){return G2(Nr(h).toLowerCase())}function gD(h){return h=Nr(h),h&&h.replace(ud,Mu).replace(Xx,"")}function Pse(h,p,E){h=Nr(h),p=js(p);var R=h.length;E=E===t?R:bf(tr(E),0,R);var W=E;return E-=p.length,E>=0&&h.slice(E,W)==p}function Nse(h){return h=Nr(h),h&&rd.test(h)?h.replace(Ma,s2):h}function Rse(h){return h=Nr(h),h&&La.test(h)?h.replace(po,"\\$&"):h}var Dse=Ed(function(h,p,E){return h+(E?"-":"")+p.toLowerCase()}),Bse=Ed(function(h,p,E){return h+(E?" ":"")+p.toLowerCase()}),Mse=bR("toLowerCase");function Lse(h,p,E){h=Nr(h),p=tr(p);var R=p?qa(h):0;if(!p||R>=p)return h;var W=(p-R)/2;return d0(e0(W),E)+h+d0(Qb(W),E)}function Fse(h,p,E){h=Nr(h),p=tr(p);var R=p?qa(h):0;return p&&R<p?h+d0(p-R,E):h}function jse(h,p,E){h=Nr(h),p=tr(p);var R=p?qa(h):0;return p&&R<p?d0(p-R,E)+h:h}function zse(h,p,E){return E||p==null?p=0:p&&(p=+p),Gee(Nr(h).replace(Sl,""),p||0)}function Hse(h,p,E){return(E?Zi(h,p,E):p===t)?p=1:p=tr(p),_2(Nr(h),p)}function Use(){var h=arguments,p=Nr(h[0]);return h.length<3?p:p.replace(h[1],h[2])}var Wse=Ed(function(h,p,E){return h+(E?"_":"")+p.toLowerCase()});function qse(h,p,E){return E&&typeof E!="number"&&Zi(h,p,E)&&(p=E=t),E=E===t?He:E>>>0,E?(h=Nr(h),h&&(typeof p=="string"||p!=null&&!q2(p))&&(p=js(p),!p&&gs(h))?Hu(Vi(h),0,E):h.split(p,E)):[]}var Kse=Ed(function(h,p,E){return h+(E?" ":"")+G2(p)});function Vse(h,p,E){return h=Nr(h),E=E==null?0:bf(tr(E),0,h.length),p=js(p),h.slice(E,E+p.length)==p}function Gse(h,p,E){var R=G.templateSettings;E&&Zi(h,p,E)&&(p=t),h=Nr(h),p=S0({},p,R,kR);var W=S0({},p.imports,R.imports,kR),J=oi(W),oe=fg(W,J),ve,ke,Ke=0,Ge=p.interpolate||Ru,Ze="__p += '",gt=er((p.escape||Ru).source+"|"+Ge.source+"|"+(Ge===Pu?od:Ru).source+"|"+(p.evaluate||Ru).source+"|$","g"),At="//# sourceURL="+(qt.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++r2+"]")+`
`;h.replace(gt,function(Ut,yr,wr,Hs,Xi,Us){return wr||(wr=Hs),Ze+=h.slice(Ke,Us).replace(ja,o2),yr&&(ve=!0,Ze+=`' +
__e(`+yr+`) +
'`),Xi&&(ke=!0,Ze+=`';
`+Xi+`;
__p += '`),wr&&(Ze+=`' +
((__t = (`+wr+`)) == null ? '' : __t) +
'`),Ke=Us+Ut.length,Ut}),Ze+=`';
`;var Ht=qt.call(p,"variable")&&p.variable;if(!Ht)Ze=`with (obj) {
`+Ze+`
}
`;else if(rg.test(Ht))throw new We(a);Ze=(ke?Ze.replace(nf,""):Ze).replace(td,"$1").replace(ho,"$1;"),Ze="function("+(Ht||"obj")+`) {
`+(Ht?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var nr=mD(function(){return $t(J,At+"return "+Ze).apply(t,oe)});if(nr.source=Ze,W2(nr))throw nr;return nr}function Yse(h){return Nr(h).toLowerCase()}function Zse(h){return Nr(h).toUpperCase()}function Xse(h,p,E){if(h=Nr(h),h&&(E||p===t))return mo(h);if(!h||!(p=js(p)))return h;var R=Vi(h),W=Vi(p),J=Ar(R,W),oe=pf(R,W)+1;return Hu(R,J,oe).join("")}function Jse(h,p,E){if(h=Nr(h),h&&(E||p===t))return h.slice(0,qb(h)+1);if(!h||!(p=js(p)))return h;var R=Vi(h),W=pf(R,Vi(p))+1;return Hu(R,0,W).join("")}function Qse(h,p,E){if(h=Nr(h),h&&(E||p===t))return h.replace(Sl,"");if(!h||!(p=js(p)))return h;var R=Vi(h),W=Ar(R,Vi(p));return Hu(R,W).join("")}function eoe(h,p){var E=L,R=q;if(fn(p)){var W="separator"in p?p.separator:W;E="length"in p?tr(p.length):E,R="omission"in p?js(p.omission):R}h=Nr(h);var J=h.length;if(gs(h)){var oe=Vi(h);J=oe.length}if(E>=J)return h;var ve=E-qa(R);if(ve<1)return R;var ke=oe?Hu(oe,0,ve).join(""):h.slice(0,ve);if(W===t)return ke+R;if(oe&&(ve+=ke.length-ve),q2(W)){if(h.slice(ve).search(W)){var Ke,Ge=ke;for(W.global||(W=er(W.source,Nr(ad.exec(W))+"g")),W.lastIndex=0;Ke=W.exec(Ge);)var Ze=Ke.index;ke=ke.slice(0,Ze===t?ve:Ze)}}else if(h.indexOf(js(W),ve)!=ve){var gt=ke.lastIndexOf(W);gt>-1&&(ke=ke.slice(0,gt))}return ke+R}function toe(h){return h=Nr(h),h&&sf.test(h)?h.replace(ea,pg):h}var roe=Ed(function(h,p,E){return h+(E?" ":"")+p.toUpperCase()}),G2=bR("toUpperCase");function yD(h,p,E){return h=Nr(h),p=E?t:p,p===t?hg(h)?me(h):pr(h):h.match(p)||[]}var mD=cr(function(h,p){try{return K(h,t,p)}catch(E){return W2(E)?E:new We(E)}}),noe=Dl(function(h,p){return se(p,function(E){E=Ga(E),Nl(h,E,H2(h[E],h))}),h});function ioe(h){var p=h==null?0:h.length,E=Ft();return h=p?bt(h,function(R){if(typeof R[1]!="function")throw new ur(o);return[E(R[0]),R[1]]}):[],cr(function(R){for(var W=-1;++W<p;){var J=h[W];if(K(J[0],this,R))return K(J[1],this,R)}})}function soe(h){return Ote(wo(h,c))}function Y2(h){return function(){return h}}function ooe(h,p){return h==null||h!==h?p:h}var aoe=$R(),loe=$R(!0);function ws(h){return h}function Z2(h){return XN(typeof h=="function"?h:wo(h,c))}function uoe(h){return QN(wo(h,c))}function coe(h,p){return eR(h,wo(p,c))}var foe=cr(function(h,p){return function(E){return _g(E,h,p)}}),hoe=cr(function(h,p){return function(E){return _g(h,E,p)}});function X2(h,p,E){var R=oi(p),W=o0(p,R);E==null&&!(fn(p)&&(W.length||!R.length))&&(E=p,p=h,h=this,W=o0(p,oi(p)));var J=!(fn(E)&&"chain"in E)||!!E.chain,oe=Ml(h);return se(W,function(ve){var ke=p[ve];h[ve]=ke,oe&&(h.prototype[ve]=function(){var Ke=this.__chain__;if(J||Ke){var Ge=h(this.__wrapped__),Ze=Ge.__actions__=ys(this.__actions__);return Ze.push({func:ke,args:arguments,thisArg:h}),Ge.__chain__=Ke,Ge}return ke.apply(h,Yt([this.value()],arguments))})}),h}function doe(){return un._===this&&(un._=Fee),this}function J2(){}function poe(h){return h=tr(h),cr(function(p){return tR(p,h)})}var voe=A2(bt),goe=A2(Ce),yoe=A2(cn);function bD(h){return B2(h)?Al(Ga(h)):Vte(h)}function moe(h){return function(p){return h==null?t:wf(h,p)}}var boe=xR(),woe=xR(!0);function Q2(){return[]}function eE(){return!1}function $oe(){return{}}function _oe(){return""}function xoe(){return!0}function Eoe(h,p){if(h=tr(h),h<1||h>Ee)return[];var E=He,R=Mi(h,He);p=Ft(p),h-=He;for(var W=hf(R,p);++E<h;)p(E);return W}function Soe(h){return Zt(h)?bt(h,Ga):zs(h)?[h]:ys(FR(Nr(h)))}function koe(h){var p=++Mee;return Nr(h)+p}var Toe=h0(function(h,p){return h+p},0),Ioe=O2("ceil"),Aoe=h0(function(h,p){return h/p},1),Ooe=O2("floor");function Coe(h){return h&&h.length?s0(h,ws,v2):t}function Poe(h,p){return h&&h.length?s0(h,Ft(p,2),v2):t}function Noe(h){return Ms(h,ws)}function Roe(h,p){return Ms(h,Ft(p,2))}function Doe(h){return h&&h.length?s0(h,ws,b2):t}function Boe(h,p){return h&&h.length?s0(h,Ft(p,2),b2):t}var Moe=h0(function(h,p){return h*p},1),Loe=O2("round"),Foe=h0(function(h,p){return h-p},0);function joe(h){return h&&h.length?Bi(h,ws):0}function zoe(h,p){return h&&h.length?Bi(h,Ft(p,2)):0}return G.after=uie,G.ary=ZR,G.assign=Zie,G.assignIn=cD,G.assignInWith=S0,G.assignWith=Xie,G.at=Jie,G.before=XR,G.bind=H2,G.bindAll=noe,G.bindKey=JR,G.castArray=$ie,G.chain=VR,G.chunk=Ore,G.compact=Cre,G.concat=Pre,G.cond=ioe,G.conforms=soe,G.constant=Y2,G.countBy=jne,G.create=Qie,G.curry=QR,G.curryRight=eD,G.debounce=tD,G.defaults=ese,G.defaultsDeep=tse,G.defer=cie,G.delay=fie,G.difference=Nre,G.differenceBy=Rre,G.differenceWith=Dre,G.drop=Bre,G.dropRight=Mre,G.dropRightWhile=Lre,G.dropWhile=Fre,G.fill=jre,G.filter=Hne,G.flatMap=qne,G.flatMapDeep=Kne,G.flatMapDepth=Vne,G.flatten=UR,G.flattenDeep=zre,G.flattenDepth=Hre,G.flip=hie,G.flow=aoe,G.flowRight=loe,G.fromPairs=Ure,G.functions=lse,G.functionsIn=use,G.groupBy=Gne,G.initial=qre,G.intersection=Kre,G.intersectionBy=Vre,G.intersectionWith=Gre,G.invert=fse,G.invertBy=hse,G.invokeMap=Zne,G.iteratee=Z2,G.keyBy=Xne,G.keys=oi,G.keysIn=bs,G.map=b0,G.mapKeys=pse,G.mapValues=vse,G.matches=uoe,G.matchesProperty=coe,G.memoize=$0,G.merge=gse,G.mergeWith=fD,G.method=foe,G.methodOf=hoe,G.mixin=X2,G.negate=_0,G.nthArg=poe,G.omit=yse,G.omitBy=mse,G.once=die,G.orderBy=Jne,G.over=voe,G.overArgs=pie,G.overEvery=goe,G.overSome=yoe,G.partial=U2,G.partialRight=rD,G.partition=Qne,G.pick=bse,G.pickBy=hD,G.property=bD,G.propertyOf=moe,G.pull=Jre,G.pullAll=qR,G.pullAllBy=Qre,G.pullAllWith=ene,G.pullAt=tne,G.range=boe,G.rangeRight=woe,G.rearg=vie,G.reject=rie,G.remove=rne,G.rest=gie,G.reverse=j2,G.sampleSize=iie,G.set=$se,G.setWith=_se,G.shuffle=sie,G.slice=nne,G.sortBy=lie,G.sortedUniq=cne,G.sortedUniqBy=fne,G.split=qse,G.spread=yie,G.tail=hne,G.take=dne,G.takeRight=pne,G.takeRightWhile=vne,G.takeWhile=gne,G.tap=Cne,G.throttle=mie,G.thru=m0,G.toArray=aD,G.toPairs=dD,G.toPairsIn=pD,G.toPath=Soe,G.toPlainObject=uD,G.transform=xse,G.unary=bie,G.union=yne,G.unionBy=mne,G.unionWith=bne,G.uniq=wne,G.uniqBy=$ne,G.uniqWith=_ne,G.unset=Ese,G.unzip=z2,G.unzipWith=KR,G.update=Sse,G.updateWith=kse,G.values=Td,G.valuesIn=Tse,G.without=xne,G.words=yD,G.wrap=wie,G.xor=Ene,G.xorBy=Sne,G.xorWith=kne,G.zip=Tne,G.zipObject=Ine,G.zipObjectDeep=Ane,G.zipWith=One,G.entries=dD,G.entriesIn=pD,G.extend=cD,G.extendWith=S0,X2(G,G),G.add=Toe,G.attempt=mD,G.camelCase=Cse,G.capitalize=vD,G.ceil=Ioe,G.clamp=Ise,G.clone=_ie,G.cloneDeep=Eie,G.cloneDeepWith=Sie,G.cloneWith=xie,G.conformsTo=kie,G.deburr=gD,G.defaultTo=ooe,G.divide=Aoe,G.endsWith=Pse,G.eq=aa,G.escape=Nse,G.escapeRegExp=Rse,G.every=zne,G.find=Une,G.findIndex=zR,G.findKey=rse,G.findLast=Wne,G.findLastIndex=HR,G.findLastKey=nse,G.floor=Ooe,G.forEach=GR,G.forEachRight=YR,G.forIn=ise,G.forInRight=sse,G.forOwn=ose,G.forOwnRight=ase,G.get=K2,G.gt=Tie,G.gte=Iie,G.has=cse,G.hasIn=V2,G.head=WR,G.identity=ws,G.includes=Yne,G.indexOf=Wre,G.inRange=Ase,G.invoke=dse,G.isArguments=xf,G.isArray=Zt,G.isArrayBuffer=Aie,G.isArrayLike=ms,G.isArrayLikeObject=Tn,G.isBoolean=Oie,G.isBuffer=Uu,G.isDate=Cie,G.isElement=Pie,G.isEmpty=Nie,G.isEqual=Rie,G.isEqualWith=Die,G.isError=W2,G.isFinite=Bie,G.isFunction=Ml,G.isInteger=nD,G.isLength=x0,G.isMap=iD,G.isMatch=Mie,G.isMatchWith=Lie,G.isNaN=Fie,G.isNative=jie,G.isNil=Hie,G.isNull=zie,G.isNumber=sD,G.isObject=fn,G.isObjectLike=gn,G.isPlainObject=Ig,G.isRegExp=q2,G.isSafeInteger=Uie,G.isSet=oD,G.isString=E0,G.isSymbol=zs,G.isTypedArray=kd,G.isUndefined=Wie,G.isWeakMap=qie,G.isWeakSet=Kie,G.join=Yre,G.kebabCase=Dse,G.last=_o,G.lastIndexOf=Zre,G.lowerCase=Bse,G.lowerFirst=Mse,G.lt=Vie,G.lte=Gie,G.max=Coe,G.maxBy=Poe,G.mean=Noe,G.meanBy=Roe,G.min=Doe,G.minBy=Boe,G.stubArray=Q2,G.stubFalse=eE,G.stubObject=$oe,G.stubString=_oe,G.stubTrue=xoe,G.multiply=Moe,G.nth=Xre,G.noConflict=doe,G.noop=J2,G.now=w0,G.pad=Lse,G.padEnd=Fse,G.padStart=jse,G.parseInt=zse,G.random=Ose,G.reduce=eie,G.reduceRight=tie,G.repeat=Hse,G.replace=Use,G.result=wse,G.round=Loe,G.runInContext=ee,G.sample=nie,G.size=oie,G.snakeCase=Wse,G.some=aie,G.sortedIndex=ine,G.sortedIndexBy=sne,G.sortedIndexOf=one,G.sortedLastIndex=ane,G.sortedLastIndexBy=lne,G.sortedLastIndexOf=une,G.startCase=Kse,G.startsWith=Vse,G.subtract=Foe,G.sum=joe,G.sumBy=zoe,G.template=Gse,G.times=Eoe,G.toFinite=Ll,G.toInteger=tr,G.toLength=lD,G.toLower=Yse,G.toNumber=xo,G.toSafeInteger=Yie,G.toString=Nr,G.toUpper=Zse,G.trim=Xse,G.trimEnd=Jse,G.trimStart=Qse,G.truncate=eoe,G.unescape=toe,G.uniqueId=koe,G.upperCase=roe,G.upperFirst=G2,G.each=GR,G.eachRight=YR,G.first=WR,X2(G,function(){var h={};return Ka(G,function(p,E){qt.call(G.prototype,E)||(h[E]=p)}),h}(),{chain:!1}),G.VERSION=n,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){G[h].placeholder=G}),se(["drop","take"],function(h,p){br.prototype[h]=function(E){E=E===t?1:Xn(tr(E),0);var R=this.__filtered__&&!p?new br(this):this.clone();return R.__filtered__?R.__takeCount__=Mi(E,R.__takeCount__):R.__views__.push({size:Mi(E,He),type:h+(R.__dir__<0?"Right":"")}),R},br.prototype[h+"Right"]=function(E){return this.reverse()[h](E).reverse()}}),se(["filter","map","takeWhile"],function(h,p){var E=p+1,R=E==Z||E==X;br.prototype[h]=function(W){var J=this.clone();return J.__iteratees__.push({iteratee:Ft(W,3),type:E}),J.__filtered__=J.__filtered__||R,J}}),se(["head","last"],function(h,p){var E="take"+(p?"Right":"");br.prototype[h]=function(){return this[E](1).value()[0]}}),se(["initial","tail"],function(h,p){var E="drop"+(p?"":"Right");br.prototype[h]=function(){return this.__filtered__?new br(this):this[E](1)}}),br.prototype.compact=function(){return this.filter(ws)},br.prototype.find=function(h){return this.filter(h).head()},br.prototype.findLast=function(h){return this.reverse().find(h)},br.prototype.invokeMap=cr(function(h,p){return typeof h=="function"?new br(this):this.map(function(E){return _g(E,h,p)})}),br.prototype.reject=function(h){return this.filter(_0(Ft(h)))},br.prototype.slice=function(h,p){h=tr(h);var E=this;return E.__filtered__&&(h>0||p<0)?new br(E):(h<0?E=E.takeRight(-h):h&&(E=E.drop(h)),p!==t&&(p=tr(p),E=p<0?E.dropRight(-p):E.take(p-h)),E)},br.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},br.prototype.toArray=function(){return this.take(He)},Ka(br.prototype,function(h,p){var E=/^(?:filter|find|map|reject)|While$/.test(p),R=/^(?:head|last)$/.test(p),W=G[R?"take"+(p=="last"?"Right":""):p],J=R||/^find/.test(p);W&&(G.prototype[p]=function(){var oe=this.__wrapped__,ve=R?[1]:arguments,ke=oe instanceof br,Ke=ve[0],Ge=ke||Zt(oe),Ze=function(yr){var wr=W.apply(G,Yt([yr],ve));return R&&gt?wr[0]:wr};Ge&&E&&typeof Ke=="function"&&Ke.length!=1&&(ke=Ge=!1);var gt=this.__chain__,At=!!this.__actions__.length,Ht=J&&!gt,nr=ke&&!At;if(!J&&Ge){oe=nr?oe:new br(this);var Ut=h.apply(oe,ve);return Ut.__actions__.push({func:m0,args:[Ze],thisArg:t}),new bo(Ut,gt)}return Ht&&nr?h.apply(this,ve):(Ut=this.thru(Ze),Ht?R?Ut.value()[0]:Ut.value():Ut)})}),se(["pop","push","shift","sort","splice","unshift"],function(h){var p=Yn[h],E=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",R=/^(?:pop|shift)$/.test(h);G.prototype[h]=function(){var W=arguments;if(R&&!this.__chain__){var J=this.value();return p.apply(Zt(J)?J:[],W)}return this[E](function(oe){return p.apply(Zt(oe)?oe:[],W)})}}),Ka(br.prototype,function(h,p){var E=G[p];if(E){var R=E.name+"";qt.call($d,R)||($d[R]=[]),$d[R].push({name:p,func:E})}}),$d[f0(t,_).name]=[{name:"wrapper",func:t}],br.prototype.clone=tte,br.prototype.reverse=rte,br.prototype.value=nte,G.prototype.at=Pne,G.prototype.chain=Nne,G.prototype.commit=Rne,G.prototype.next=Dne,G.prototype.plant=Mne,G.prototype.reverse=Lne,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Fne,G.prototype.first=G.prototype.head,vg&&(G.prototype[vg]=Bne),G},Oe=Ie();ra?((ra.exports=Oe)._=Oe,gd._=Oe):un._=Oe}).call(On)})(Ow,Ow.exports);var wn=Ow.exports;const ep=ro(wn),YD="c2fc1ad0-f76f-11ec-b939-0242ac120002",ZD=new Set;dn.config({driver:[dn.LOCALSTORAGE,dn.INDEXEDDB,dn.WEBSQL]});let Nue=class PH{constructor(r="",t=null){ce(this,"id");ce(this,"parent");ce(this,"children",new Map);ce(this,"on_subscriptions",new Map);ce(this,"map_subscriptions",new Map);ce(this,"value");ce(this,"counter",0);ce(this,"loaded",!1);ce(this,"saveLocalForage",ep.throttle(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const r=Array.from(this.children.keys());await dn.setItem(this.id,r)}else this.value===void 0?await dn.removeItem(this.id):await dn.setItem(this.id,this.value===null?YD:this.value)},500));ce(this,"loadLocalForage",ep.throttle(async()=>{if(ZD.has(this.id))return;let r=await dn.getItem(this.id);if(r===null)r=void 0,ZD.add(this.id);else if(r===YD)r=null;else if(Array.isArray(r)){const t={};await Promise.all(r.map(async n=>{t[n]=await this.get(n).once()})),r=t}else this.value=r;return this.loaded=!0,r},500));ce(this,"doCallbacks",ep.debounce(()=>{for(const[r,t]of this.on_subscriptions){const n=()=>this.on_subscriptions.delete(r);this.once(t,n,!1)}if(this.parent){for(const[r,t]of this.parent.on_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.on_subscriptions.delete(r)};this.parent.once(t,n,!1)}for(const[r,t]of this.parent.map_subscriptions){const n=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(r)};this.once(t,n,!1)}}},20,{maxWait:40}));this.id=r,this.parent=t}get(r){const t=this.children.get(r);if(t)return t;const n=new PH(`${this.id}/${r}`,this);return this.children.set(r,n),this.saveLocalForage(),n}async put(r){if(Array.isArray(r))throw new Error("Sorry, we don't deal with arrays");return typeof r=="object"&&r!==null?(this.value=void 0,await Promise.all(ep.map(r,(t,n)=>this.get(n).put(t)))):(this.children=new Map,this.value=r),this.doCallbacks(),this.saveLocalForage()}async once(r,t,n=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,t)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||n)return r&&r(i,this.id.slice(this.id.lastIndexOf("/")+1),t||(()=>{})),i}on(r){const t=this.counter++;this.on_subscriptions.set(t,r);const n=()=>this.on_subscriptions.delete(t);return this.once(r,n,!1),n}map(r){var s;const t=this.counter++;this.map_subscriptions.set(t,r);const n=()=>this.map_subscriptions.delete(t),i=()=>{for(const o of this.children.values())o.once(r,n,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),n}};const De=new Nue;var _u={},hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.createBitArray=Rue;hv.fromBits=Bue;hv.toBits=Due;function Rue(e){return new Uint8Array(e)}function NH(e,r,t,n,i){var s=(1<<n)-1,o=0,a=0,l=0;if(e.forEach(function(u){for(o=(o<<r)+u,a+=r;a>=n;)a-=n,t[l]=o>>a&s,l+=1}),i)a>0&&(t[l]=o<<n-a&s);else{if(a>=r)throw new Error("Excessive padding: ".concat(a," (max ").concat(r-1," allowed)"));if(o%(1<<a)!==0)throw new Error("Non-zero padding")}}function Due(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return NH(e,8,t,r,!0),t}function Bue(e,r,t){if(r>8||r<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return NH(e,r,t,8,!1),t}var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.CHECKSUM_LENGTH=void 0;Pa.createChecksum=jue;Pa.decode=LH;Pa.decodeWithPrefix=Hue;Pa.detectCase=Uue;Pa.encode=zue;Pa.expandPrefix=MH;Pa.verifyChecksum=Fue;var RH=hv,RT="qpzry9x8gf2tvdw0s3jn54khce6mua7l",DH=734539939,XD=33,JD=126,DT=6;Pa.CHECKSUM_LENGTH=DT;var Mue=function(){for(var e=new Map,r=0;r<RT.length;r+=1)e.set(RT[r],r);return e}(),Lue=[996825010,642813549,513874426,1027748829,705979059];function BH(e){return e.reduce(function(r,t){var n=r>>25,i=(r&33554431)<<5^t;return Lue.reduce(function(s,o,a){return n>>a&1?s^o:s},i)},1)}function MH(e,r){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);r[t]=n>>5,r[t+e.length+1]=n&31}r[e.length]=0}function Fue(e){switch(BH(e)){case 1:return"bech32";case DH:return"bech32m";default:return}}function jue(e,r){var t;switch(r){case"bech32":t=1;break;case"bech32m":t=DH;break;default:throw Error("Invalid encoding value: ".concat(r,"; expected bech32 or bech32m"))}for(var n=BH(e)^t,i=0;i<DT;i+=1){var s=5*(5-i);e[e.length-DT+i]=n>>s&31}}function zue(e){return e.reduce(function(r,t){return r+RT[t]},"")}function LH(e,r){for(var t=r||(0,RH.createBitArray)(e.length),n=0;n<e.length;n+=1){var i=Mue.get(e[n]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[n]));t[n]=i}return t}function Hue(e,r){var t=r.length+2*e.length+1,n=(0,RH.createBitArray)(t);return MH(e,n.subarray(0,2*e.length+1)),LH(r,n.subarray(2*e.length+1)),n}function Uue(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",t=!1,n=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<XD||s>JD)throw new TypeError("Invalid char in ".concat(r,": ").concat(s,"; ")+"should be in ASCII range ".concat(XD,"-").concat(JD));n=n||s>=65&&s<=90,t=t||s>=97&&s<=122}if(t&&n)throw new TypeError("Mixed-case ".concat(r));return n?"upper":t?"lower":null}Object.defineProperty(_u,"__esModule",{value:!0});_u.BitcoinAddress=void 0;var BT=_u.decode=Vue;_u.decodeTo5BitArray=w3;var QD=_u.encode=Kue;_u.encode5BitArray=b3;_u.from5BitArray=m3;_u.to5BitArray=y3;var ky=hv,Lo=Pa;function Wue(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function eB(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function que(e,r,t){return r&&eB(e.prototype,r),t&&eB(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Cw=90;function y3(e,r){var t=Math.ceil(e.length*8/5),n=r||(0,ky.createBitArray)(t);return(0,ky.toBits)(e,5,n)}function m3(e,r){var t=Math.floor(e.length*5/8),n=r||new Uint8Array(t);return(0,ky.fromBits)(e,5,n)}function b3(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+r.length+Lo.CHECKSUM_LENGTH;if(i-e.length>Cw)throw new Error("Message to be produced is too long (max ".concat(Cw," supported)"));var s=(t=(0,Lo.detectCase)(e,"prefix"))!==null&&t!==void 0?t:"lower",o=(0,ky.createBitArray)(i);(0,Lo.expandPrefix)(e.toLowerCase(),o.subarray(0,2*e.length+1));var a=o.subarray(2*e.length+1,o.length-Lo.CHECKSUM_LENGTH);a.set(r),(0,Lo.createChecksum)(o,n);var l=(0,Lo.encode)(o.subarray(2*e.length+1));return s==="upper"&&(l=l.toUpperCase()),"".concat(e,"1").concat(l)}function Kue(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return b3(e,y3(r),t)}function w3(e){if(e.length>Cw)throw new TypeError("Message too long; max ".concat(Cw," expected"));(0,Lo.detectCase)(e);var r=e.toLowerCase(),t=r.lastIndexOf("1");if(t<0)throw new Error('No separator char ("1") found');if(t>e.length-Lo.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(Lo.CHECKSUM_LENGTH," chars expected)"));var n=r.substring(0,t),i=(0,Lo.decodeWithPrefix)(n,r.substring(t+1)),s=(0,Lo.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:n,encoding:s,data:i.subarray(2*n.length+1,i.length-Lo.CHECKSUM_LENGTH)}}function Vue(e){var r=w3(e),t=r.prefix,n=r.encoding,i=r.data;return{prefix:t,encoding:n,data:m3(i)}}var Gue=function(){function e(r,t,n){if(Wue(this,e),r!=="bc"&&r!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(t<0||t>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(n.length<2||n.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(t===0&&n.length!==20&&n.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=r,this.scriptVersion=t,this.data=n}return que(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var t=Math.ceil(this.data.length*8/5),n=(0,ky.createBitArray)(t+1);n[0]=this.scriptVersion,y3(this.data,n.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return b3(this.prefix,n,i)}}],[{key:"decode",value:function(t){var n=w3(t),i=n.prefix,s=n.data,o=n.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var a=s[0];if(a===0&&o!=="bech32")throw Error("Unexpected encoding ".concat(o," used for version 0 script"));if(a>0&&o!=="bech32m")throw Error("Unexpected encoding ".concat(o," used for version ").concat(a," script"));return new this(i,a,m3(s.subarray(1)))}}]),e}();_u.BitcoinAddress=Gue;function MT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Yue(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function FH(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Zue(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");MT(e.outputLen),MT(e.blockLen)}function Xue(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Jue(e,r){FH(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Wf={number:MT,bool:Yue,bytes:FH,hash:Zue,exists:Xue,output:Jue},oE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $3=e=>e instanceof Uint8Array,aE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ya=(e,r)=>e<<32-r|e>>>r,Que=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Que)throw new Error("Non little-endian hardware is not supported");const ece=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Fo(e){if(!$3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=ece[e[t]];return r}function Pp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function tce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function _3(e){if(typeof e=="string"&&(e=tce(e)),!$3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function jH(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!$3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let zH=class{clone(){return this._cloneInto()}};function HH(e){const r=n=>e().update(_3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function x3(e=32){if(oE&&typeof oE.getRandomValues=="function")return oE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function rce(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let nce=class extends zH{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=aE(this.buffer)}update(r){Wf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=_3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=aE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Wf.exists(this),Wf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;rce(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=aE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const ice=(e,r,t)=>e&r^~e&t,sce=(e,r,t)=>e&r^e&t^r&t,oce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qu=new Uint32Array(64);let UH=class extends nce{constructor(){super(64,32,8,!1),this.A=Wu[0]|0,this.B=Wu[1]|0,this.C=Wu[2]|0,this.D=Wu[3]|0,this.E=Wu[4]|0,this.F=Wu[5]|0,this.G=Wu[6]|0,this.H=Wu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)qu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=qu[c-15],y=qu[c-2],w=Ya(d,7)^Ya(d,18)^d>>>3,b=Ya(y,17)^Ya(y,19)^y>>>10;qu[c]=b+qu[c-7]+w+qu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Ya(a,6)^Ya(a,11)^Ya(a,25),y=f+d+ice(a,l,u)+oce[c]+qu[c]|0,b=(Ya(n,2)^Ya(n,13)^Ya(n,22))+sce(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){qu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ace=class extends UH{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Np=HH(()=>new UH);HH(()=>new ace);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const WH=BigInt(0),l_=BigInt(1),lce=BigInt(2),u_=e=>e instanceof Uint8Array,uce=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Rp(e){if(!u_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=uce[e[t]];return r}function qH(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function E3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Dp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Cs(e){return E3(Rp(e))}function S3(e){if(!u_(e))throw new Error("Uint8Array expected");return E3(Rp(Uint8Array.from(e).reverse()))}function Sc(e,r){return Dp(e.toString(16).padStart(r*2,"0"))}function KH(e,r){return Sc(e,r).reverse()}function cce(e){return Dp(qH(e))}function ki(e,r,t){let n;if(typeof r=="string")try{n=Dp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(u_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function xh(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!u_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function fce(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function hce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function dce(e){let r;for(r=0;e>WH;e>>=l_,r+=1);return r}function pce(e,r){return e>>BigInt(r)&l_}const vce=(e,r,t)=>e|(t?l_:WH)<<BigInt(r),k3=e=>(lce<<BigInt(e-1))-l_,lE=e=>new Uint8Array(e),tB=e=>Uint8Array.from(e);function VH(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=lE(e),i=lE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=lE())=>{i=a(tB([0]),c),n=a(),c.length!==0&&(i=a(tB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return xh(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const gce={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ym(e,r,t={}){const n=(i,s,o)=>{const a=gce[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const yce=Object.freeze(Object.defineProperty({__proto__:null,bitGet:pce,bitLen:dce,bitMask:k3,bitSet:vce,bytesToHex:Rp,bytesToNumberBE:Cs,bytesToNumberLE:S3,concatBytes:xh,createHmacDrbg:VH,ensureBytes:ki,equalBytes:fce,hexToBytes:Dp,hexToNumber:E3,numberToBytesBE:Sc,numberToBytesLE:KH,numberToHexUnpadded:qH,numberToVarBytesBE:cce,utf8ToBytes:hce,validateObject:ym},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const di=BigInt(0),Cn=BigInt(1),Nf=BigInt(2),mce=BigInt(3),LT=BigInt(4),rB=BigInt(5),nB=BigInt(8);BigInt(9);BigInt(16);function Ii(e,r){const t=e%r;return t>=di?t:r+t}function bce(e,r,t){if(t<=di||r<di)throw new Error("Expected power/modulo > 0");if(t===Cn)return di;let n=Cn;for(;r>di;)r&Cn&&(n=n*e%t),e=e*e%t,r>>=Cn;return n}function So(e,r,t){let n=e;for(;r-- >di;)n*=n,n%=t;return n}function FT(e,r){if(e===di||r<=di)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=Ii(e,r),n=r,i=di,s=Cn;for(;t!==di;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Cn)throw new Error("invert: does not exist");return Ii(i,r)}function wce(e){const r=(e-Cn)/Nf;let t,n,i;for(t=e-Cn,n=0;t%Nf===di;t/=Nf,n++);for(i=Nf;i<e&&bce(i,r,e)!==e-Cn;i++);if(n===1){const o=(e+Cn)/LT;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Cn)/Nf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Cn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),d=a.mul(d,f),u=y}return c}}function $ce(e){if(e%LT===mce){const r=(e+Cn)/LT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%nB===rB){const r=(e-rB)/nB;return function(n,i){const s=n.mul(i,Nf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Nf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return wce(e)}const _ce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xce(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=_ce.reduce((n,i)=>(n[i]="function",n),r);return ym(e,t)}function Ece(e,r,t){if(t<di)throw new Error("Expected power > 0");if(t===di)return e.ONE;if(t===Cn)return r;let n=e.ONE,i=r;for(;t>di;)t&Cn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Cn;return n}function Sce(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function T3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function kce(e,r,t=!1,n={}){if(e<=di)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=T3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=$ce(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:k3(i),ZERO:di,ONE:Cn,create:l=>Ii(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return di<=l&&l<e},is0:l=>l===di,isOdd:l=>(l&Cn)===Cn,neg:l=>Ii(-l,e),eql:(l,u)=>l===u,sqr:l=>Ii(l*l,e),add:(l,u)=>Ii(l+u,e),sub:(l,u)=>Ii(l-u,e),mul:(l,u)=>Ii(l*u,e),pow:(l,u)=>Ece(a,l,u),div:(l,u)=>Ii(l*FT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>FT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Sce(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?KH(l,s):Sc(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?S3(l):Cs(l)}});return Object.freeze(a)}function Tce(e,r,t=!1){e=ki("privateHash",e);const n=e.length,i=T3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?S3(e):Cs(e);return Ii(s,r-Cn)+Cn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ice=BigInt(0),uE=BigInt(1);function Ace(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>Ice;)s&uE&&(o=o.add(a)),a=a.double(),s>>=uE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let d=1;d<a;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=uE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function GH(e){return xce(e.Fp),ym(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...T3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Oce(e){const r=GH(e);ym(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Cce,hexToBytes:Pce}=yce,qf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=qf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Cce(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=qf,t=typeof e=="string"?Pce(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=qf._parseInt(t.subarray(2)),{d:o,l:a}=qf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Gl=BigInt(0),Co=BigInt(1);BigInt(2);const iB=BigInt(3);BigInt(4);function Nce(e){const r=Oce(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return xh(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Gl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Rp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:Cs(ki("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=Ii(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(ki("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,iB),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),L=t.mul(I,I),q=t.mul(A,x);return q=t.add(q,q),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,L),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(q,O),g=t.mul(_,g),L=t.mul(b,L),q=t.sub(M,L),q=t.mul(b,q),q=t.add(q,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,L),M=t.mul(M,q),C=t.add(C,M),L=t.mul(x,I),L=t.add(L,L),M=t.mul(L,q),O=t.sub(O,M),g=t.mul(L,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,L=t.mul(r.b,iB);let q=t.mul(T,x),Q=t.mul(_,I),re=t.mul(A,O),Z=t.add(T,_),j=t.add(x,I);Z=t.mul(Z,j),j=t.add(q,Q),Z=t.sub(Z,j),j=t.add(T,A);let X=t.add(x,O);return j=t.mul(j,X),X=t.add(q,re),j=t.sub(j,X),X=t.add(_,A),C=t.add(I,O),X=t.mul(X,C),C=t.add(Q,re),X=t.sub(X,C),M=t.mul(B,j),C=t.mul(L,re),M=t.add(C,M),C=t.sub(Q,M),M=t.add(Q,M),g=t.mul(C,M),Q=t.add(q,q),Q=t.add(Q,q),re=t.mul(B,re),j=t.mul(L,j),Q=t.add(Q,re),re=t.sub(q,re),re=t.mul(B,re),j=t.add(j,re),q=t.mul(Q,j),g=t.add(g,q),q=t.mul(X,j),C=t.mul(Z,C),C=t.sub(C,q),q=t.mul(Z,Q),M=t.mul(X,M),M=t.add(M,q),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Gl)return T;if(a(b),b===Co)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>Gl||O>Gl;)x&Co&&(C=C.add(M)),O&Co&&(g=g.add(M)),M=M.double(),x>>=Co,O>>=Co;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:L,f:q}=this.wNAF(g);M=y.constTimeNegate(I,M),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,x.beta),L.py,L.pz),_=M.add(L),A=B.add(q)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Gl||C===Co||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Co)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Co?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Rp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=Ace(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Rce(e){const r=GH(e);return ym(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Dce(e){const r=Rce(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Gl<j&&j<t.ORDER}function a(j){return Ii(j,n)}function l(j){return FT(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=Nce({...r,toBytes(j,X,ie){const Ee=X.toAffine(),$e=t.toBytes(Ee.x),Pe=xh;return ie?Pe(Uint8Array.from([X.hasEvenY()?2:3]),$e):Pe(Uint8Array.from([4]),$e,t.toBytes(Ee.y))},fromBytes(j){const X=j.length,ie=j[0],Ee=j.subarray(1);if(X===i&&(ie===2||ie===3)){const $e=Cs(Ee);if(!o($e))throw new Error("Point is not on curve");const Pe=c($e);let He=t.sqrt(Pe);const Ve=(He&Co)===Co;return(ie&1)===1!==Ve&&(He=t.neg(He)),{x:$e,y:He}}else if(X===s&&ie===4){const $e=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:$e,y:Pe}}else throw new Error(`Point of length ${X} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>Rp(Sc(j,r.nByteLength));function w(j){const X=n>>Co;return j>X}function b(j){return w(j)?a(-j):j}const T=(j,X,ie)=>Cs(j.slice(X,ie));class _{constructor(X,ie,Ee){this.r=X,this.s=ie,this.recovery=Ee,this.assertValidity()}static fromCompact(X){const ie=r.nByteLength;return X=ki("compactSignature",X,ie*2),new _(T(X,0,ie),T(X,ie,2*ie))}static fromDER(X){const{r:ie,s:Ee}=qf.toSig(ki("DER",X));return new _(ie,Ee)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(X){return new _(this.r,this.s,X)}recoverPublicKey(X){const{r:ie,s:Ee,recovery:$e}=this,Pe=g(ki("msgHash",X));if($e==null||![0,1,2,3].includes($e))throw new Error("recovery id invalid");const He=$e===2||$e===3?ie+r.n:ie;if(He>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ve=$e&1?"03":"02",it=u.fromHex(Ve+y(He)),_e=l(He),ge=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Dp(this.toDERHex())}toDERHex(){return qf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),X=Tce(j,n);return Sc(X,r.nByteLength)},precompute(j=8,X=u.BASE){return X._setWindowSize(j),X.multiply(BigInt(3)),X}};function x(j,X=!0){return u.fromPrivateKey(j).toRawBytes(X)}function I(j){const X=j instanceof Uint8Array,ie=typeof j=="string",Ee=(X||ie)&&j.length;return X?Ee===i||Ee===s:ie?Ee===2*i||Ee===2*s:j instanceof u}function O(j,X,ie=!0){if(I(j))throw new Error("first arg must be private key");if(!I(X))throw new Error("second arg must be public key");return u.fromHex(X).multiply(f(j)).toRawBytes(ie)}const C=r.bits2int||function(j){const X=Cs(j),ie=j.length*8-r.nBitLength;return ie>0?X>>BigInt(ie):X},g=r.bits2int_modN||function(j){return a(C(j))},M=k3(r.nBitLength);function B(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Gl<=j&&j<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Sc(j,r.nByteLength)}function L(j,X,ie=q){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:$e}=r;let{lowS:Pe,prehash:He,extraEntropy:Ve}=ie;Pe==null&&(Pe=!0),j=ki("msgHash",j),He&&(j=ki("prehashed msgHash",Ee(j)));const it=g(j),_e=f(X),ge=[B(_e),B(it)];if(Ve!=null){const S=Ve===!0?$e(t.BYTES):Ve;ge.push(ki("extraEntropy",S,t.BYTES))}const Te=xh(...ge),je=it;function $(S){const N=C(S);if(!d(N))return;const F=l(N),z=u.BASE.multiply(N).toAffine(),V=a(z.x);if(V===Gl)return;const ae=a(F*a(je+V*_e));if(ae===Gl)return;let ye=(z.x===V?0:2)|Number(z.y&Co),Ue=ae;return Pe&&w(ae)&&(Ue=b(ae),ye^=1),new _(V,Ue,ye)}return{seed:Te,k2sig:$}}const q={lowS:r.lowS,prehash:!1},Q={lowS:r.lowS,prehash:!1};function re(j,X,ie=q){const{seed:Ee,k2sig:$e}=L(j,X,ie),Pe=r;return VH(Pe.hash.outputLen,Pe.nByteLength,Pe.hmac)(Ee,$e)}u.BASE._setWindowSize(8);function Z(j,X,ie,Ee=Q){var z;const $e=j;if(X=ki("msgHash",X),ie=ki("publicKey",ie),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:He}=Ee;let Ve,it;try{if(typeof $e=="string"||$e instanceof Uint8Array)try{Ve=_.fromDER($e)}catch(V){if(!(V instanceof qf.Err))throw V;Ve=_.fromCompact($e)}else if(typeof $e=="object"&&typeof $e.r=="bigint"&&typeof $e.s=="bigint"){const{r:V,s:ae}=$e;Ve=new _(V,ae)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ve.hasHighS())return!1;He&&(X=r.hash(X));const{r:_e,s:ge}=Ve,Te=g(X),je=l(ge),$=a(Te*je),S=a(_e*je),N=(z=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:z.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:Z,ProjectivePoint:u,Signature:_,utils:A}}let YH=class extends zH{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Wf.hash(r);const n=_3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Wf.exists(this),this.iHash.update(r),this}digestInto(r){Wf.exists(this),Wf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ZH=(e,r,t)=>new YH(e,r).update(t).digest();ZH.create=(e,r)=>new YH(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bce(e){return{hash:e,hmac:(r,...t)=>ZH(e,r,jH(...t)),randomBytes:x3}}function Mce(e,r){const t=n=>Dce({...e,...Bce(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),XH=BigInt(1),Nw=BigInt(2),sB=(e,r)=>(e+r/Nw)/r;function JH(e){const r=c_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=So(f,t,r)*f%r,d=So(c,t,r)*f%r,y=So(d,Nw,r)*u%r,w=So(y,i,r)*y%r,b=So(w,s,r)*w%r,T=So(b,a,r)*b%r,_=So(T,l,r)*T%r,A=So(_,a,r)*b%r,x=So(A,t,r)*f%r,I=So(x,o,r)*w%r,O=So(I,n,r)*u%r,C=So(O,Nw,r);if(!jT.eql(jT.sqr(C),e))throw new Error("Cannot find square root");return C}const jT=kce(c_,void 0,void 0,{sqrt:JH}),mm=Mce({a:BigInt(0),b:BigInt(7),Fp:jT,n:Pw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Pw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-XH*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=sB(s*e,r),l=sB(-n*e,r);let u=Ii(e-a*t-l*i,r),f=Ii(-a*n-l*s,r);const c=u>o,d=f>o;if(c&&(u=r-u),d&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:f}}}},Np),f_=BigInt(0),QH=e=>typeof e=="bigint"&&f_<e&&e<c_,Lce=e=>typeof e=="bigint"&&f_<e&&e<Pw,oB={};function Rw(e,...r){let t=oB[e];if(t===void 0){const n=Np(Uint8Array.from(e,i=>i.charCodeAt(0)));t=xh(n,n),oB[e]=t}return Np(xh(t,...r))}const I3=e=>e.toRawBytes(!0).slice(1),zT=e=>Sc(e,32),cE=e=>Ii(e,c_),Ty=e=>Ii(e,Pw),A3=mm.ProjectivePoint,Fce=(e,r,t)=>A3.BASE.multiplyAndAddUnsafe(e,r,t);function HT(e){let r=mm.utils.normPrivateKeyToScalar(e),t=A3.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ty(-r),bytes:I3(t)}}function eU(e){if(!QH(e))throw new Error("bad x: need 0 < x < p");const r=cE(e*e),t=cE(r*e+BigInt(7));let n=JH(t);n%Nw!==f_&&(n=cE(-n));const i=new A3(e,n,XH);return i.assertValidity(),i}function tU(...e){return Ty(Cs(Rw("BIP0340/challenge",...e)))}function jce(e){return HT(e).bytes}function zce(e,r,t=x3(32)){const n=ki("message",e),{bytes:i,scalar:s}=HT(r),o=ki("auxRand",t,32),a=zT(s^Cs(Rw("BIP0340/aux",o))),l=Rw("BIP0340/nonce",a,i,n),u=Ty(Cs(l));if(u===f_)throw new Error("sign failed: k is zero");const{bytes:f,scalar:c}=HT(u),d=tU(f,i,n),y=new Uint8Array(64);if(y.set(f,0),y.set(zT(Ty(c+d*s)),32),!rU(y,n,i))throw new Error("sign: Invalid signature produced");return y}function rU(e,r,t){const n=ki("signature",e,64),i=ki("message",r),s=ki("publicKey",t,32);try{const o=eU(Cs(s)),a=Cs(n.subarray(0,32));if(!QH(a))return!1;const l=Cs(n.subarray(32,64));if(!Lce(l))return!1;const u=tU(zT(a),I3(o),i),f=Fce(o,l,Ty(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const dv=(()=>({getPublicKey:jce,sign:zce,verify:rU,utils:{randomPrivateKey:mm.utils.randomPrivateKey,lift_x:eU,pointToBytes:I3,numberToBytesBE:Sc,bytesToNumberBE:Cs,taggedHash:Rw,mod:Ii}}))();/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Na(...e){const r=(i,s)=>o=>i(s(o)),t=Array.from(e).reverse().reduce((i,s)=>i?r(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?r(i,s.decode):s.decode,void 0);return{encode:t,decode:n}}function bl(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return r.map(t=>{if(Vc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("alphabet.decode input should be array of strings");return r.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})}}}function wl(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of r)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return r.join(e)},decode:r=>{if(typeof r!="string")throw new Error("join.decode input should be string");return r.split(e)}}}function bm(e,r="="){if(Vc(e),typeof r!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function nU(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:r=>r,decode:r=>e(r)}}function aB(e,r,t){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(Vc(o),o<0||o>=r)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let l=n;l<s.length;l++){const u=s[l],f=r*o+u;if(!Number.isSafeInteger(f)||r*o/r!==o||f-u!==r*o)throw new Error("convertRadix: carry overflow");if(o=f%t,s[l]=Math.floor(f/t),!Number.isSafeInteger(s[l])||s[l]*t+o!==f)throw new Error("convertRadix: carry overflow");if(a)s[l]?a=!1:n=l;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const iU=(e,r)=>r?iU(r,e%r):e,Dw=(e,r)=>e+(r-iU(e,r));function UT(e,r,t,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Dw(r,t)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${t} carryBits=${Dw(r,t)}`);let i=0,s=0;const o=2**t-1,a=[];for(const l of e){if(Vc(l),l>=2**r)throw new Error(`convertRadix2: invalid data word=${l} from=${r}`);if(i=i<<r|l,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=t;s-=t)a.push((i>>s-t&o)>>>0);i&=2**s-1}if(i=i<<t-s&o,!n&&s>=r)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function sU(e){return Vc(e),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return aB(Array.from(r),2**8,e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(aB(r,e,2**8))}}}function xu(e,r=!1){if(Vc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Dw(8,e)>32||Dw(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return UT(Array.from(t),8,e,!r)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(UT(t,e,8,r))}}}function lB(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...r){try{return e.apply(null,r)}catch{}}}function oU(e,r){if(Vc(e),typeof r!="function")throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=r(t).slice(0,e),i=new Uint8Array(t.length+e);return i.set(t),i.set(n,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-e),i=r(n).slice(0,e),s=t.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}const qg={alphabet:bl,chain:Na,checksum:oU,radix:sU,radix2:xu,join:wl,padding:bm},aU=Na(xu(4),bl("0123456789ABCDEF"),wl("")),lU=Na(xu(5),bl("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),bm(5),wl("")),Hce=Na(xu(5),bl("0123456789ABCDEFGHIJKLMNOPQRSTUV"),bm(5),wl("")),Uce=Na(xu(5),bl("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),wl(""),nU(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Go=Na(xu(6),bl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),bm(6),wl("")),uU=Na(xu(6),bl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),bm(6),wl("")),O3=e=>Na(sU(58),bl(e),wl("")),Iy=O3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Wce=O3("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),qce=O3("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),uB=[0,2,3,5,6,7,9,10,11],cU={encode(e){let r="";for(let t=0;t<e.length;t+=8){const n=e.subarray(t,t+8);r+=Iy.encode(n).padStart(uB[n.length],"1")}return r},decode(e){let r=[];for(let t=0;t<e.length;t+=11){const n=e.slice(t,t+11),i=uB.indexOf(n.length),s=Iy.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},C3=e=>Na(oU(4,r=>e(e(r))),Iy),WT=Na(bl("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),wl("")),cB=[996825010,642813549,513874426,1027748829,705979059];function Cg(e){const r=e>>25;let t=(e&33554431)<<5;for(let n=0;n<cB.length;n++)(r>>n&1)===1&&(t^=cB[n]);return t}function fB(e,r,t=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Cg(i)^o>>5}i=Cg(i);for(let s=0;s<n;s++)i=Cg(i)^e.charCodeAt(s)&31;for(let s of r)i=Cg(i)^s;for(let s=0;s<6;s++)i=Cg(i);return i^=t,WT.encode(UT([i%2**30],30,5,!1))}function fU(e){const r=e==="bech32"?1:734539939,t=xu(5),n=t.decode,i=t.encode,s=lB(n);function o(f,c,d=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof c}`);const y=f.length+7+c.length;if(d!==!1&&y>d)throw new TypeError(`Length ${y} exceeds limit ${d}`);return f=f.toLowerCase(),`${f}1${WT.encode(c)}${fB(f,c,r)}`}function a(f,c=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||c!==!1&&f.length>c)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${c})`);const d=f.toLowerCase();if(f!==d&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=d;const y=f.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=f.slice(0,y),b=f.slice(y+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");const T=WT.decode(b).slice(0,-6),_=fB(w,T,r);if(!b.endsWith(_))throw new Error(`Invalid checksum in ${f}: expected "${_}"`);return{prefix:w,words:T}}const l=lB(a);function u(f){const{prefix:c,words:d}=a(f,!1);return{prefix:c,words:d,bytes:n(d)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const Dn=fU("bech32"),Kce=fU("bech32m"),hU={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},dU=Na(xu(4),bl("0123456789abcdef"),wl(""),nU(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Ay={utf8:hU,hex:dU,base16:aU,base32:lU,base64:Go,base64url:uU,base58:Iy,base58xmr:cU},pU=`Invalid encoding type. Available types: ${Object.keys(Ay).join(", ")}`,vU=(e,r)=>{if(typeof e!="string"||!Ay.hasOwnProperty(e))throw new TypeError(pU);if(!(r instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Ay[e].encode(r)},Vce=vU,gU=(e,r)=>{if(!Ay.hasOwnProperty(e))throw new TypeError(pU);if(typeof r!="string")throw new TypeError("stringToBytes() expects string");return Ay[e].decode(r)},Gce=gU,Yce=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Vc,base16:aU,base32:lU,base32crockford:Uce,base32hex:Hce,base58:Iy,base58check:C3,base58flickr:Wce,base58xmr:cU,base58xrp:qce,base64:Go,base64url:uU,bech32:Dn,bech32m:Kce,bytes:Gce,bytesToString:vU,hex:dU,str:Vce,stringToBytes:gU,utf8:hU,utils:qg},Symbol.toStringTag,{value:"Module"})),yU=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);function qT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Zce(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function mU(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Xce(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qT(e.outputLen),qT(e.blockLen)}function Jce(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Qce(e,r){mU(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Js={number:qT,bool:Zce,bytes:mU,hash:Xce,exists:Jce,output:Qce},fE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const U1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Za=(e,r)=>e<<32-r|e>>>r,efe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!efe)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function tfe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Oy(e){if(typeof e=="string"&&(e=tfe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let bU=class{clone(){return this._cloneInto()}};const rfe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function nfe(e,r){if(r!==void 0&&(typeof r!="object"||!rfe(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function pv(e){const r=n=>e().update(Oy(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function ife(e=32){if(fE&&typeof fE.getRandomValues=="function")return fE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let wU=class extends bU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Js.hash(r);const n=Oy(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Js.exists(this),this.iHash.update(r),this}digestInto(r){Js.exists(this),Js.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const $U=(e,r,t)=>new wU(e,r).update(t).digest();$U.create=(e,r)=>new wU(e,r);function sfe(e,r,t,n){Js.hash(e);const i=nfe({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Js.number(s),Js.number(o),Js.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Oy(r),u=Oy(t),f=new Uint8Array(o),c=$U.create(e,l),d=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:c,PRFSalt:d}}function ofe(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function afe(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=sfe(e,r,t,n);let u;const f=new Uint8Array(4),c=U1(f),d=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(f).digestInto(d),b.set(d.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(d).digestInto(d);for(let _=0;_<b.length;_++)b[_]^=d[_]}}return ofe(a,l,o,u,d)}function lfe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let _U=class extends bU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=U1(this.buffer)}update(r){Js.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Oy(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=U1(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Js.exists(this),Js.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;lfe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=U1(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const ufe=(e,r,t)=>e&r^~e&t,cfe=(e,r,t)=>e&r^e&t^r&t,ffe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ku=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vu=new Uint32Array(64);let xU=class extends _U{constructor(){super(64,32,8,!1),this.A=Ku[0]|0,this.B=Ku[1]|0,this.C=Ku[2]|0,this.D=Ku[3]|0,this.E=Ku[4]|0,this.F=Ku[5]|0,this.G=Ku[6]|0,this.H=Ku[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Vu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Vu[c-15],y=Vu[c-2],w=Za(d,7)^Za(d,18)^d>>>3,b=Za(y,17)^Za(y,19)^y>>>10;Vu[c]=b+Vu[c-7]+w+Vu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Za(a,6)^Za(a,11)^Za(a,25),y=f+d+ufe(a,l,u)+ffe[c]+Vu[c]|0,b=(Za(n,2)^Za(n,13)^Za(n,22))+cfe(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Vu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},hfe=class extends xU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const dfe=pv(()=>new xU);pv(()=>new hfe);const k0=BigInt(2**32-1),KT=BigInt(32);function EU(e,r=!1){return r?{h:Number(e&k0),l:Number(e>>KT&k0)}:{h:Number(e>>KT&k0)|0,l:Number(e&k0)|0}}function pfe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=EU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const vfe=(e,r)=>BigInt(e>>>0)<<KT|BigInt(r>>>0),gfe=(e,r,t)=>e>>>t,yfe=(e,r,t)=>e<<32-t|r>>>t,mfe=(e,r,t)=>e>>>t|r<<32-t,bfe=(e,r,t)=>e<<32-t|r>>>t,wfe=(e,r,t)=>e<<64-t|r>>>t-32,$fe=(e,r,t)=>e>>>t-32|r<<64-t,_fe=(e,r)=>r,xfe=(e,r)=>e,Efe=(e,r,t)=>e<<t|r>>>32-t,Sfe=(e,r,t)=>r<<t|e>>>32-t,kfe=(e,r,t)=>r<<t-32|e>>>64-t,Tfe=(e,r,t)=>e<<t-32|r>>>64-t;function Ife(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Afe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Ofe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Cfe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Pfe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Nfe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Rfe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,ir={fromBig:EU,split:pfe,toBig:vfe,shrSH:gfe,shrSL:yfe,rotrSH:mfe,rotrSL:bfe,rotrBH:wfe,rotrBL:$fe,rotr32H:_fe,rotr32L:xfe,rotlSH:Efe,rotlSL:Sfe,rotlBH:kfe,rotlBL:Tfe,add:Ife,add3L:Afe,add3H:Ofe,add4L:Cfe,add4H:Pfe,add5H:Rfe,add5L:Nfe},[Dfe,Bfe]=ir.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Gu=new Uint32Array(80),Yu=new Uint32Array(80);let h_=class extends _U{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Gu[x]=r.getUint32(t),Yu[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Gu[x-15]|0,O=Yu[x-15]|0,C=ir.rotrSH(I,O,1)^ir.rotrSH(I,O,8)^ir.shrSH(I,O,7),g=ir.rotrSL(I,O,1)^ir.rotrSL(I,O,8)^ir.shrSL(I,O,7),M=Gu[x-2]|0,B=Yu[x-2]|0,L=ir.rotrSH(M,B,19)^ir.rotrBH(M,B,61)^ir.shrSH(M,B,6),q=ir.rotrSL(M,B,19)^ir.rotrBL(M,B,61)^ir.shrSL(M,B,6),Q=ir.add4L(g,q,Yu[x-7],Yu[x-16]),re=ir.add4H(Q,C,L,Gu[x-7],Gu[x-16]);Gu[x]=re|0,Yu[x]=Q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=ir.rotrSH(c,d,14)^ir.rotrSH(c,d,18)^ir.rotrBH(c,d,41),O=ir.rotrSL(c,d,14)^ir.rotrSL(c,d,18)^ir.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,M=ir.add5L(A,O,g,Bfe[x],Yu[x]),B=ir.add5H(M,_,I,C,Dfe[x],Gu[x]),L=M|0,q=ir.rotrSH(n,i,28)^ir.rotrBH(n,i,34)^ir.rotrBH(n,i,39),Q=ir.rotrSL(n,i,28)^ir.rotrBL(n,i,34)^ir.rotrBL(n,i,39),re=n&s^n&a^s&a,Z=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=ir.add(u|0,f|0,B|0,L|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=ir.add3L(L,Q,Z);n=ir.add3H(j,B,q,re),i=j|0}({h:n,l:i}=ir.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ir.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ir.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=ir.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:d}=ir.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=ir.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=ir.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=ir.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A)}roundClean(){Gu.fill(0),Yu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Mfe=class extends h_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Lfe=class extends h_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Ffe=class extends h_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const jfe=pv(()=>new h_);pv(()=>new Mfe);pv(()=>new Lfe);pv(()=>new Ffe);const zfe=e=>e[0]==="あいこくしん";function SU(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function kU(e){const r=SU(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function TU(e){Js.bytes(e,16,20,24,28,32)}function Hfe(e,r=128){if(Js.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return qfe(ife(r/8),e)}const Ufe=e=>{const r=8-e.length/4;return new Uint8Array([dfe(e)[0]>>r<<r])};function IU(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),qg.chain(qg.checksum(1,Ufe),qg.radix2(11,!0),qg.alphabet(e))}function Wfe(e,r){const{words:t}=kU(e),n=IU(r).decode(t);return TU(n),n}function qfe(e,r){return TU(e),IU(r).encode(e).join(zfe(r)?"　":" ")}function Kfe(e,r){try{Wfe(e,r)}catch{return!1}return!0}const Vfe=e=>SU(`mnemonic${e}`);function Gfe(e,r=""){return afe(jfe,kU(e).nfkd,Vfe(r),{c:2048,dkLen:64})}function VT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Yfe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Rf(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Zfe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");VT(e.outputLen),VT(e.blockLen)}function Xfe(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Jfe(e,r){Rf(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Kf={number:VT,bool:Yfe,bytes:Rf,hash:Zfe,exists:Xfe,output:Jfe},hE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P3=e=>e instanceof Uint8Array,mp=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xa=(e,r)=>e<<32-r|e>>>r,Qfe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Qfe)throw new Error("Non little-endian hardware is not supported");const ehe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function the(e){if(!P3(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=ehe[e[t]];return r}function rhe(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function AU(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function N3(e){if(typeof e=="string"&&(e=AU(e)),!P3(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Kg(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!P3(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}let OU=class{clone(){return this._cloneInto()}};function Lh(e){const r=n=>e().update(N3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function nhe(e=32){if(hE&&typeof hE.getRandomValues=="function")return hE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let CU=class extends OU{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Kf.hash(r);const n=N3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Kf.exists(this),this.iHash.update(r),this}digestInto(r){Kf.exists(this),Kf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Bw=(e,r,t)=>new CU(e,r).update(t).digest();Bw.create=(e,r)=>new CU(e,r);function ihe(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let R3=class extends OU{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=mp(this.buffer)}update(r){Kf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=N3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=mp(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Kf.exists(this),Kf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;ihe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=mp(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const she=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),PU=Uint8Array.from({length:16},(e,r)=>r),ohe=PU.map(e=>(9*e+5)%16);let D3=[PU],B3=[ohe];for(let e=0;e<4;e++)for(let r of[D3,B3])r.push(r[e].map(t=>she[t]));const NU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),ahe=D3.map((e,r)=>e.map(t=>NU[r][t])),lhe=B3.map((e,r)=>e.map(t=>NU[r][t])),uhe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),che=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),T0=(e,r)=>e<<r|e>>>32-r;function hB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const I0=new Uint32Array(16);let fhe=class extends R3{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)I0[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,f=u,c=this.h4|0,d=c;for(let y=0;y<5;y++){const w=4-y,b=uhe[y],T=che[y],_=D3[y],A=B3[y],x=ahe[y],I=lhe[y];for(let O=0;O<16;O++){const C=T0(n+hB(y,s,a,u)+I0[_[O]]+b,x[O])+c|0;n=c,c=u,u=T0(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=T0(i+hB(w,o,l,f)+I0[A[O]]+T,I[O])+d|0;i=d,d=f,f=T0(l,10)|0,l=o,o=C}}this.set(this.h1+a+f|0,this.h2+u+d|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){I0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const hhe=Lh(()=>new fhe),dhe=(e,r,t)=>e&r^~e&t,phe=(e,r,t)=>e&r^e&t^r&t,vhe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xu=new Uint32Array(64);let RU=class extends R3{constructor(){super(64,32,8,!1),this.A=Zu[0]|0,this.B=Zu[1]|0,this.C=Zu[2]|0,this.D=Zu[3]|0,this.E=Zu[4]|0,this.F=Zu[5]|0,this.G=Zu[6]|0,this.H=Zu[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)Xu[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=Xu[c-15],y=Xu[c-2],w=Xa(d,7)^Xa(d,18)^d>>>3,b=Xa(y,17)^Xa(y,19)^y>>>10;Xu[c]=b+Xu[c-7]+w+Xu[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Xa(a,6)^Xa(a,11)^Xa(a,25),y=f+d+dhe(a,l,u)+vhe[c]+Xu[c]|0,b=(Xa(n,2)^Xa(n,13)^Xa(n,22))+phe(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){Xu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ghe=class extends RU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const M3=Lh(()=>new RU);Lh(()=>new ghe);const A0=BigInt(2**32-1),GT=BigInt(32);function DU(e,r=!1){return r?{h:Number(e&A0),l:Number(e>>GT&A0)}:{h:Number(e>>GT&A0)|0,l:Number(e&A0)|0}}function yhe(e,r=!1){let t=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=DU(e[i],r);[t[i],n[i]]=[s,o]}return[t,n]}const mhe=(e,r)=>BigInt(e>>>0)<<GT|BigInt(r>>>0),bhe=(e,r,t)=>e>>>t,whe=(e,r,t)=>e<<32-t|r>>>t,$he=(e,r,t)=>e>>>t|r<<32-t,_he=(e,r,t)=>e<<32-t|r>>>t,xhe=(e,r,t)=>e<<64-t|r>>>t-32,Ehe=(e,r,t)=>e>>>t-32|r<<64-t,She=(e,r)=>r,khe=(e,r)=>e,The=(e,r,t)=>e<<t|r>>>32-t,Ihe=(e,r,t)=>r<<t|e>>>32-t,Ahe=(e,r,t)=>r<<t-32|e>>>64-t,Ohe=(e,r,t)=>e<<t-32|r>>>64-t;function Che(e,r,t,n){const i=(r>>>0)+(n>>>0);return{h:e+t+(i/2**32|0)|0,l:i|0}}const Phe=(e,r,t)=>(e>>>0)+(r>>>0)+(t>>>0),Nhe=(e,r,t,n)=>r+t+n+(e/2**32|0)|0,Rhe=(e,r,t,n)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0),Dhe=(e,r,t,n,i)=>r+t+n+i+(e/2**32|0)|0,Bhe=(e,r,t,n,i)=>(e>>>0)+(r>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Mhe=(e,r,t,n,i,s)=>r+t+n+i+s+(e/2**32|0)|0,sr={fromBig:DU,split:yhe,toBig:mhe,shrSH:bhe,shrSL:whe,rotrSH:$he,rotrSL:_he,rotrBH:xhe,rotrBL:Ehe,rotr32H:She,rotr32L:khe,rotlSH:The,rotlSL:Ihe,rotlBH:Ahe,rotlBL:Ohe,add:Che,add3L:Phe,add3H:Nhe,add4L:Rhe,add4H:Dhe,add5H:Mhe,add5L:Bhe},[Lhe,Fhe]=sr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ju=new Uint32Array(80),Qu=new Uint32Array(80);let d_=class extends R3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)Ju[x]=r.getUint32(t),Qu[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=Ju[x-15]|0,O=Qu[x-15]|0,C=sr.rotrSH(I,O,1)^sr.rotrSH(I,O,8)^sr.shrSH(I,O,7),g=sr.rotrSL(I,O,1)^sr.rotrSL(I,O,8)^sr.shrSL(I,O,7),M=Ju[x-2]|0,B=Qu[x-2]|0,L=sr.rotrSH(M,B,19)^sr.rotrBH(M,B,61)^sr.shrSH(M,B,6),q=sr.rotrSL(M,B,19)^sr.rotrBL(M,B,61)^sr.shrSL(M,B,6),Q=sr.add4L(g,q,Qu[x-7],Qu[x-16]),re=sr.add4H(Q,C,L,Ju[x-7],Ju[x-16]);Ju[x]=re|0,Qu[x]=Q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=sr.rotrSH(c,d,14)^sr.rotrSH(c,d,18)^sr.rotrBH(c,d,41),O=sr.rotrSL(c,d,14)^sr.rotrSL(c,d,18)^sr.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,M=sr.add5L(A,O,g,Fhe[x],Qu[x]),B=sr.add5H(M,_,I,C,Lhe[x],Ju[x]),L=M|0,q=sr.rotrSH(n,i,28)^sr.rotrBH(n,i,34)^sr.rotrBH(n,i,39),Q=sr.rotrSL(n,i,28)^sr.rotrBL(n,i,34)^sr.rotrBL(n,i,39),re=n&s^n&a^s&a,Z=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=sr.add(u|0,f|0,B|0,L|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=sr.add3L(L,Q,Z);n=sr.add3H(j,B,q,re),i=j|0}({h:n,l:i}=sr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=sr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=sr.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=sr.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:d}=sr.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=sr.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=sr.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=sr.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A)}roundClean(){Ju.fill(0),Qu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},jhe=class extends d_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},zhe=class extends d_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Hhe=class extends d_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const dB=Lh(()=>new d_);Lh(()=>new jhe);Lh(()=>new zhe);Lh(()=>new Hhe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const BU=BigInt(0),p_=BigInt(1),Uhe=BigInt(2),v_=e=>e instanceof Uint8Array,Whe=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Bp(e){if(!v_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Whe[e[t]];return r}function MU(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function L3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Mp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const t=new Uint8Array(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ih(e){return L3(Bp(e))}function F3(e){if(!v_(e))throw new Error("Uint8Array expected");return L3(Bp(Uint8Array.from(e).reverse()))}function bp(e,r){return Mp(e.toString(16).padStart(r*2,"0"))}function LU(e,r){return bp(e,r).reverse()}function qhe(e){return Mp(MU(e))}function Po(e,r,t){let n;if(typeof r=="string")try{n=Mp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(v_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Cy(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!v_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Khe(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Vhe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ghe(e){let r;for(r=0;e>BU;e>>=p_,r+=1);return r}function Yhe(e,r){return e>>BigInt(r)&p_}const Zhe=(e,r,t)=>e|(t?p_:BU)<<BigInt(r),j3=e=>(Uhe<<BigInt(e-1))-p_,dE=e=>new Uint8Array(e),pB=e=>Uint8Array.from(e);function FU(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=dE(e),i=dE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=dE())=>{i=a(pB([0]),c),n=a(),c.length!==0&&(i=a(pB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Cy(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const Xhe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function wm(e,r,t={}){const n=(i,s,o)=>{const a=Xhe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const Jhe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Yhe,bitLen:Ghe,bitMask:j3,bitSet:Zhe,bytesToHex:Bp,bytesToNumberBE:ih,bytesToNumberLE:F3,concatBytes:Cy,createHmacDrbg:FU,ensureBytes:Po,equalBytes:Khe,hexToBytes:Mp,hexToNumber:L3,numberToBytesBE:bp,numberToBytesLE:LU,numberToHexUnpadded:MU,numberToVarBytesBE:qhe,utf8ToBytes:Vhe,validateObject:wm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pi=BigInt(0),Pn=BigInt(1),Df=BigInt(2),Qhe=BigInt(3),YT=BigInt(4),vB=BigInt(5),gB=BigInt(8);BigInt(9);BigInt(16);function ts(e,r){const t=e%r;return t>=pi?t:r+t}function ede(e,r,t){if(t<=pi||r<pi)throw new Error("Expected power/modulo > 0");if(t===Pn)return pi;let n=Pn;for(;r>pi;)r&Pn&&(n=n*e%t),e=e*e%t,r>>=Pn;return n}function ko(e,r,t){let n=e;for(;r-- >pi;)n*=n,n%=t;return n}function ZT(e,r){if(e===pi||r<=pi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ts(e,r),n=r,i=pi,s=Pn;for(;t!==pi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Pn)throw new Error("invert: does not exist");return ts(i,r)}function tde(e){const r=(e-Pn)/Df;let t,n,i;for(t=e-Pn,n=0;t%Df===pi;t/=Df,n++);for(i=Df;i<e&&ede(i,r,e)!==e-Pn;i++);if(n===1){const o=(e+Pn)/YT;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Pn)/Df;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Pn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),d=a.mul(d,f),u=y}return c}}function rde(e){if(e%YT===Qhe){const r=(e+Pn)/YT;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%gB===vB){const r=(e-vB)/gB;return function(n,i){const s=n.mul(i,Df),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Df),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return tde(e)}const nde=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ide(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=nde.reduce((n,i)=>(n[i]="function",n),r);return wm(e,t)}function sde(e,r,t){if(t<pi)throw new Error("Expected power > 0");if(t===pi)return e.ONE;if(t===Pn)return r;let n=e.ONE,i=r;for(;t>pi;)t&Pn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Pn;return n}function ode(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function z3(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function ade(e,r,t=!1,n={}){if(e<=pi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=z3(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=rde(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:j3(i),ZERO:pi,ONE:Pn,create:l=>ts(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return pi<=l&&l<e},is0:l=>l===pi,isOdd:l=>(l&Pn)===Pn,neg:l=>ts(-l,e),eql:(l,u)=>l===u,sqr:l=>ts(l*l,e),add:(l,u)=>ts(l+u,e),sub:(l,u)=>ts(l-u,e),mul:(l,u)=>ts(l*u,e),pow:(l,u)=>sde(a,l,u),div:(l,u)=>ts(l*ZT(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>ZT(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>ode(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?LU(l,s):bp(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?F3(l):ih(l)}});return Object.freeze(a)}function lde(e,r,t=!1){e=Po("privateHash",e);const n=e.length,i=z3(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?F3(e):ih(e);return ts(s,r-Pn)+Pn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ude=BigInt(0),pE=BigInt(1);function cde(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>ude;)s&pE&&(o=o.add(a)),a=a.double(),s>>=pE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let d=1;d<a;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=pE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function jU(e){return ide(e.Fp),wm(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...z3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fde(e){const r=jU(e);wm(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:hde,hexToBytes:dde}=Jhe,Vf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Vf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:hde(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Vf,t=typeof e=="string"?dde(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Vf._parseInt(t.subarray(2)),{d:o,l:a}=Vf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},Yl=BigInt(0),No=BigInt(1);BigInt(2);const yB=BigInt(3);BigInt(4);function pde(e){const r=fde(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Cy(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Yl<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Bp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:ih(Po("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=ts(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Po("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,yB),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),L=t.mul(I,I),q=t.mul(A,x);return q=t.add(q,q),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,L),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(q,O),g=t.mul(_,g),L=t.mul(b,L),q=t.sub(M,L),q=t.mul(b,q),q=t.add(q,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,L),M=t.mul(M,q),C=t.add(C,M),L=t.mul(x,I),L=t.add(L,L),M=t.mul(L,q),O=t.sub(O,M),g=t.mul(L,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,L=t.mul(r.b,yB);let q=t.mul(T,x),Q=t.mul(_,I),re=t.mul(A,O),Z=t.add(T,_),j=t.add(x,I);Z=t.mul(Z,j),j=t.add(q,Q),Z=t.sub(Z,j),j=t.add(T,A);let X=t.add(x,O);return j=t.mul(j,X),X=t.add(q,re),j=t.sub(j,X),X=t.add(_,A),C=t.add(I,O),X=t.mul(X,C),C=t.add(Q,re),X=t.sub(X,C),M=t.mul(B,j),C=t.mul(L,re),M=t.add(C,M),C=t.sub(Q,M),M=t.add(Q,M),g=t.mul(C,M),Q=t.add(q,q),Q=t.add(Q,q),re=t.mul(B,re),j=t.mul(L,j),Q=t.add(Q,re),re=t.sub(q,re),re=t.mul(B,re),j=t.add(j,re),q=t.mul(Q,j),g=t.add(g,q),q=t.mul(X,j),C=t.mul(Z,C),C=t.sub(C,q),q=t.mul(Z,Q),M=t.mul(X,M),M=t.add(M,q),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===Yl)return T;if(a(b),b===No)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>Yl||O>Yl;)x&No&&(C=C.add(M)),O&No&&(g=g.add(M)),M=M.double(),x>>=No,O>>=No;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:L,f:q}=this.wNAF(g);M=y.constTimeNegate(I,M),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,x.beta),L.py,L.pz),_=M.add(L),A=B.add(q)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===Yl||C===No||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===No)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===No?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return Bp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=cde(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function vde(e){const r=jU(e);return wm(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function gde(e){const r=vde(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Yl<j&&j<t.ORDER}function a(j){return ts(j,n)}function l(j){return ZT(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=pde({...r,toBytes(j,X,ie){const Ee=X.toAffine(),$e=t.toBytes(Ee.x),Pe=Cy;return ie?Pe(Uint8Array.from([X.hasEvenY()?2:3]),$e):Pe(Uint8Array.from([4]),$e,t.toBytes(Ee.y))},fromBytes(j){const X=j.length,ie=j[0],Ee=j.subarray(1);if(X===i&&(ie===2||ie===3)){const $e=ih(Ee);if(!o($e))throw new Error("Point is not on curve");const Pe=c($e);let He=t.sqrt(Pe);const Ve=(He&No)===No;return(ie&1)===1!==Ve&&(He=t.neg(He)),{x:$e,y:He}}else if(X===s&&ie===4){const $e=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:$e,y:Pe}}else throw new Error(`Point of length ${X} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>Bp(bp(j,r.nByteLength));function w(j){const X=n>>No;return j>X}function b(j){return w(j)?a(-j):j}const T=(j,X,ie)=>ih(j.slice(X,ie));class _{constructor(X,ie,Ee){this.r=X,this.s=ie,this.recovery=Ee,this.assertValidity()}static fromCompact(X){const ie=r.nByteLength;return X=Po("compactSignature",X,ie*2),new _(T(X,0,ie),T(X,ie,2*ie))}static fromDER(X){const{r:ie,s:Ee}=Vf.toSig(Po("DER",X));return new _(ie,Ee)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(X){return new _(this.r,this.s,X)}recoverPublicKey(X){const{r:ie,s:Ee,recovery:$e}=this,Pe=g(Po("msgHash",X));if($e==null||![0,1,2,3].includes($e))throw new Error("recovery id invalid");const He=$e===2||$e===3?ie+r.n:ie;if(He>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ve=$e&1?"03":"02",it=u.fromHex(Ve+y(He)),_e=l(He),ge=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Mp(this.toDERHex())}toDERHex(){return Vf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Mp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),X=lde(j,n);return bp(X,r.nByteLength)},precompute(j=8,X=u.BASE){return X._setWindowSize(j),X.multiply(BigInt(3)),X}};function x(j,X=!0){return u.fromPrivateKey(j).toRawBytes(X)}function I(j){const X=j instanceof Uint8Array,ie=typeof j=="string",Ee=(X||ie)&&j.length;return X?Ee===i||Ee===s:ie?Ee===2*i||Ee===2*s:j instanceof u}function O(j,X,ie=!0){if(I(j))throw new Error("first arg must be private key");if(!I(X))throw new Error("second arg must be public key");return u.fromHex(X).multiply(f(j)).toRawBytes(ie)}const C=r.bits2int||function(j){const X=ih(j),ie=j.length*8-r.nBitLength;return ie>0?X>>BigInt(ie):X},g=r.bits2int_modN||function(j){return a(C(j))},M=j3(r.nBitLength);function B(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Yl<=j&&j<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return bp(j,r.nByteLength)}function L(j,X,ie=q){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:$e}=r;let{lowS:Pe,prehash:He,extraEntropy:Ve}=ie;Pe==null&&(Pe=!0),j=Po("msgHash",j),He&&(j=Po("prehashed msgHash",Ee(j)));const it=g(j),_e=f(X),ge=[B(_e),B(it)];if(Ve!=null){const S=Ve===!0?$e(t.BYTES):Ve;ge.push(Po("extraEntropy",S,t.BYTES))}const Te=Cy(...ge),je=it;function $(S){const N=C(S);if(!d(N))return;const F=l(N),z=u.BASE.multiply(N).toAffine(),V=a(z.x);if(V===Yl)return;const ae=a(F*a(je+V*_e));if(ae===Yl)return;let ye=(z.x===V?0:2)|Number(z.y&No),Ue=ae;return Pe&&w(ae)&&(Ue=b(ae),ye^=1),new _(V,Ue,ye)}return{seed:Te,k2sig:$}}const q={lowS:r.lowS,prehash:!1},Q={lowS:r.lowS,prehash:!1};function re(j,X,ie=q){const{seed:Ee,k2sig:$e}=L(j,X,ie),Pe=r;return FU(Pe.hash.outputLen,Pe.nByteLength,Pe.hmac)(Ee,$e)}u.BASE._setWindowSize(8);function Z(j,X,ie,Ee=Q){var z;const $e=j;if(X=Po("msgHash",X),ie=Po("publicKey",ie),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:He}=Ee;let Ve,it;try{if(typeof $e=="string"||$e instanceof Uint8Array)try{Ve=_.fromDER($e)}catch(V){if(!(V instanceof Vf.Err))throw V;Ve=_.fromCompact($e)}else if(typeof $e=="object"&&typeof $e.r=="bigint"&&typeof $e.s=="bigint"){const{r:V,s:ae}=$e;Ve=new _(V,ae)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ve.hasHighS())return!1;He&&(X=r.hash(X));const{r:_e,s:ge}=Ve,Te=g(X),je=l(ge),$=a(Te*je),S=a(_e*je),N=(z=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:z.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:Z,ProjectivePoint:u,Signature:_,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yde(e){return{hash:e,hmac:(r,...t)=>Bw(e,r,Kg(...t)),randomBytes:nhe}}function mde(e,r){const t=n=>gde({...e,...yde(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bde=BigInt(1),XT=BigInt(2),bB=(e,r)=>(e+r/XT)/r;function wde(e){const r=zU,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=ko(f,t,r)*f%r,d=ko(c,t,r)*f%r,y=ko(d,XT,r)*u%r,w=ko(y,i,r)*y%r,b=ko(w,s,r)*w%r,T=ko(b,a,r)*b%r,_=ko(T,l,r)*T%r,A=ko(_,a,r)*b%r,x=ko(A,t,r)*f%r,I=ko(x,o,r)*w%r,O=ko(I,n,r)*u%r,C=ko(O,XT,r);if(!JT.eql(JT.sqr(C),e))throw new Error("Cannot find square root");return C}const JT=ade(zU,void 0,void 0,{sqrt:wde}),nl=mde({a:BigInt(0),b:BigInt(7),Fp:JT,n:mB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=mB,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-bde*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=bB(s*e,r),l=bB(-n*e,r);let u=ts(e-a*t-l*i,r),f=ts(-a*n-l*s,r);const c=u>o,d=f>o;if(c&&(u=r-u),d&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:f}}}},M3);BigInt(0);nl.ProjectivePoint;const O0=nl.ProjectivePoint,vE=C3(M3);function wB(e){return BigInt(`0x${the(e)}`)}function $de(e){return rhe(e.toString(16).padStart(64,"0"))}const _de=AU("Bitcoin seed"),gE={private:76066276,public:76067358},yE=2147483648,xde=e=>hhe(M3(e)),Ede=e=>mp(e).getUint32(0,!1),C0=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return mp(r).setUint32(0,e,!1),r};let Sde=class Vd{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Ede(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return vE.encode(this.serialize(this.versions.private,Kg(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return vE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=gE){if(Rf(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=Bw(dB,_de,r);return new Vd({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=gE){const n=vE.decode(r),i=mp(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Vd({...o,privateKey:a.slice(1)}):new Vd({...o,publicKey:a})}static fromJSON(r){return Vd.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||gE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!nl.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:wB(r.privateKey),this.privKeyBytes=$de(this.privKey),this.pubKey=nl.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=O0.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=xde(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=yE)throw new Error("Invalid index");s[2]==="'"&&(o+=yE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=C0(r);if(r>=yE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=Kg(new Uint8Array([0]),a,t)}else t=Kg(this.pubKey,t);const n=Bw(dB,this.chainCode,t),i=wB(n.slice(0,32)),s=n.slice(32);if(!nl.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ts(this.privKey+i,nl.CURVE.n);if(!nl.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=O0.fromHex(this.pubKey).add(O0.fromPrivateKey(i));if(a.equals(O0.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Vd(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Rf(r,32),nl.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Rf(r,32),Rf(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=nl.Signature.fromCompact(t)}catch{return!1}return nl.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Rf(t,33),Kg(C0(r),new Uint8Array([this.depth]),C0(this.parentFingerprint),C0(this.index),this.chainCode,t)}};var kde=Object.defineProperty,Ci=(e,r)=>{for(var t in r)kde(e,t,{get:r[t],enumerable:!0})};function H3(){return Fo(dv.utils.randomPrivateKey())}function Lp(e){return Fo(dv.getPublicKey(e))}var Tde={};Ci(Tde,{MessageNode:()=>HU,MessageQueue:()=>Cde,insertEventIntoAscendingList:()=>Ode,insertEventIntoDescendingList:()=>Ade,normalizeURL:()=>Ide,utf8Decoder:()=>Zl,utf8Encoder:()=>Aa});var Zl=new TextDecoder("utf-8"),Aa=new TextEncoder;function Ide(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Ade(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function Ode(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var HU=class{constructor(e){ce(this,"_value");ce(this,"_next");this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},Cde=class{constructor(){ce(this,"_first");ce(this,"_last");ce(this,"_size");this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const r=new HU(e);return this._size===0||!this._last?(this._first=r,this._last=r):(this._last.next=r,this._last=r),this._size++,!0}dequeue(){if(this._size===0||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function Pde(e=255){return{kind:e,content:"",tags:[],created_at:0}}function UU(e,r){let t=e;return t.pubkey=Lp(r),t.id=Eh(t),t.sig=U3(t,r),t}function Nde(e){if(!g_(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Eh(e){let r=Np(Aa.encode(Nde(e)));return Fo(r)}var Rde=e=>e instanceof Object;function g_(e){if(!Rde(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function $m(e){try{return dv.verify(e.sig,Eh(e),e.pubkey)}catch{return!1}}function WU(e,r){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),U3(e,r)}function U3(e,r){return Fo(dv.sign(Eh(e),r))}function W3(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>e.until)}var Dde={};Ci(Dde,{getHex64:()=>q3,getInt:()=>qU,getSubscriptionId:()=>Bde,matchEventId:()=>Mde,matchEventKind:()=>Fde,matchEventPubkey:()=>Lde});function q3(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function qU(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Bde(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Mde(e,r){return r===q3(e,"id")}function Lde(e,r){return r===q3(e,"pubkey")}function Fde(e,r){return r===qU(e,"kind")}var Dc={};Ci(Dc,{BECH32_REGEX:()=>VU,decode:()=>y_,naddrEncode:()=>qde,neventEncode:()=>Wde,noteEncode:()=>Hde,nprofileEncode:()=>Ude,npubEncode:()=>zde,nrelayEncode:()=>Kde,nsecEncode:()=>jde});var KU=5e3,VU=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function y_(e){var i,s,o,a,l,u,f;let{prefix:r,words:t}=Dn.decode(e,KU),n=new Uint8Array(Dn.fromWords(t));switch(r){case"nprofile":{let c=P0(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Fo(c[0][0]),relays:c[1]?c[1].map(d=>Zl.decode(d)):[]}}}case"nevent":{let c=P0(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Fo(c[0][0]),relays:c[1]?c[1].map(d=>Zl.decode(d)):[],author:(o=c[2])!=null&&o[0]?Fo(c[2][0]):void 0}}}case"naddr":{let c=P0(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Zl.decode(c[0][0]),pubkey:Fo(c[2][0]),kind:parseInt(Fo(c[3][0]),16),relays:c[1]?c[1].map(d=>Zl.decode(d)):[]}}}case"nrelay":{let c=P0(n);if(!((f=c[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Zl.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Fo(n)};default:throw new Error(`unknown prefix ${r}`)}}function P0(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1];if(!i)throw new Error(`malformed TLV ${n}`);let s=t.slice(2,2+i);if(t=t.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${n}`);r[n]=r[n]||[],r[n].push(s)}return r}function jde(e){return K3("nsec",e)}function zde(e){return K3("npub",e)}function Hde(e){return K3("note",e)}function _m(e,r){let t=Dn.toWords(r);return Dn.encode(e,t,KU)}function K3(e,r){let t=Pp(r);return _m(e,t)}function Ude(e){let r=m_({0:[Pp(e.pubkey)],1:(e.relays||[]).map(t=>Aa.encode(t))});return _m("nprofile",r)}function Wde(e){let r=m_({0:[Pp(e.id)],1:(e.relays||[]).map(t=>Aa.encode(t)),2:e.author?[Pp(e.author)]:[]});return _m("nevent",r)}function qde(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=m_({0:[Aa.encode(e.identifier)],1:(e.relays||[]).map(n=>Aa.encode(n)),2:[Pp(e.pubkey)],3:[new Uint8Array(r)]});return _m("naddr",t)}function Kde(e){let r=m_({0:[Aa.encode(e)]});return _m("nrelay",r)}function m_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),jH(...r)}var Fp={};Ci(Fp,{decrypt:()=>Gde,encrypt:()=>Vde});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function Vde(e,r,t){const n=mm.getSharedSecret(e,"02"+r),i=GU(n);let s=Uint8Array.from(x3(16)),o=Aa.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Go.encode(new Uint8Array(l)),f=Go.encode(new Uint8Array(s.buffer));return`${u}?iv=${f}`}async function Gde(e,r,t){let[n,i]=t.split("?iv="),s=mm.getSharedSecret(e,"02"+r),o=GU(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Go.decode(n),u=Go.decode(i),f=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return Zl.decode(f)}function GU(e){return e.slice(1,33)}var Yde={};Ci(Yde,{NIP05_REGEX:()=>YU,queryProfile:()=>Jde,searchDomain:()=>Xde,useFetchImplementation:()=>Zde});var YU=/^(?:([\w.+-]+)@)?([\w.-]+)$/,b_;try{b_=fetch}catch{}function Zde(e){b_=e}async function Xde(e,r=""){try{return(await(await b_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function Jde(e){const r=e.match(YU);if(!r)return null;const[t,n="_",i]=r;try{const s=await b_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=Qde(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function Qde(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var epe={};Ci(epe,{generateSeedWords:()=>rpe,privateKeyFromSeedWords:()=>tpe,validateWords:()=>npe});function tpe(e,r){let n=Sde.fromMasterSeed(Gfe(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Fo(n)}function rpe(){return Hfe(yU)}function npe(e){return Kfe(e,yU)}var ipe={};Ci(ipe,{parse:()=>spe});function spe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},f=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(f){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var ope={};Ci(ope,{getPow:()=>ape});function ape(e){return lpe(Pp(e))}function lpe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=upe(e[t]),r+=n,n===8);t++);return r}function upe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var cpe={};Ci(cpe,{finishRepostEvent:()=>fpe,getRepostedEvent:()=>hpe,getRepostedEventPointer:()=>ZU});function fpe(e,r,t,n){return UU({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function ZU(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function hpe(e,{skipVerification:r}={}){const t=ZU(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!$m(n)))return n}var dpe={};Ci(dpe,{NOSTR_URI_REGEX:()=>w_,parse:()=>vpe,test:()=>ppe});var w_=new RegExp(`nostr:(${VU.source})`);function ppe(e){return typeof e=="string"&&new RegExp(`^${w_.source}$`).test(e)}function vpe(e){const r=e.match(new RegExp(`^${w_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:y_(r[1])}}var gpe={};Ci(gpe,{finishReactionEvent:()=>ype,getReactedEventPointer:()=>mpe});function ype(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return UU({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function mpe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var bpe={};Ci(bpe,{createDelegation:()=>wpe,getDelegator:()=>$pe});function wpe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=Np(Aa.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Fo(dv.sign(i,e));return{from:Lp(e),to:r.pubkey,cond:n,sig:s}}function $pe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,f]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(f))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(f))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(f))continue;return null}}let o=Np(Aa.encode(`nostr:delegation:${e.pubkey}:${n}`));return dv.verify(i,o,t)?t:null}var _pe={};Ci(_pe,{matchAll:()=>xpe,regex:()=>V3,replaceAll:()=>Epe});var V3=()=>new RegExp(`\\b${w_.source}\\b`,"g");function*xpe(e){const r=e.matchAll(V3());for(const t of r)try{const[n,i]=t;yield{uri:n,value:i,decoded:y_(i),start:t.index,end:t.index+n.length}}catch{}}function Epe(e,r){return e.replaceAll(V3(),(t,n)=>r({uri:t,value:n,decoded:y_(n)}))}var Spe={};Ci(Spe,{useFetchImplementation:()=>kpe,validateGithub:()=>Tpe});var G3;try{G3=fetch}catch{}function kpe(e){G3=e}async function Tpe(e,r,t){try{return await(await G3(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var XU={};Ci(XU,{authenticate:()=>Ipe});var Ipe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Ape={};Ci(Ape,{getZapEndpoint:()=>Cpe,makeZapReceipt:()=>Rpe,makeZapRequest:()=>Ppe,useFetchImplementation:()=>Ope,validateZapRequest:()=>Npe});var Y3;try{Y3=fetch}catch{}function Ope(e){Y3=e}async function Cpe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Dn.decode(t,1e3),a=Dn.fromWords(o);r=Zl.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await Y3(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Ppe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Npe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!g_(r))return"Zap request is not a valid Nostr event.";if(!$m(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Rpe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Dpe={};Ci(Dpe,{getToken:()=>Bpe,validateToken:()=>Mpe});var JU="Nostr ";async function Bpe(e,r,t,n=!1){if(!e||!r)throw new Error("Missing loginUrl or httpMethod");if(r!=="get"&&r!=="post")throw new Error("Unknown httpMethod");const i=Pde(27235);i.tags=[["u",e],["method",r]],i.created_at=Math.round(new Date().getTime()/1e3);const s=await t(i);return(n?JU:"")+Go.encode(Aa.encode(JSON.stringify(s)))}async function Mpe(e,r,t){if(!e)throw new Error("Missing token");e=e.replace(JU,"");const n=Zl.decode(Go.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");const i=JSON.parse(n);if(!i)throw new Error("Invalid nostr event");if(!$m(i))throw new Error("Invalid nostr event, signature invalid");if(i.kind!==27235)throw new Error("Invalid nostr event, kind invalid");if(!i.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round(new Date().getTime()/1e3)-i.created_at>60)throw new Error("Invalid nostr event, expired");const s=i.tags.find(a=>a[0]==="u");if((s==null?void 0:s.length)!==1&&(s==null?void 0:s[1])!==r)throw new Error("Invalid nostr event, url tag invalid");const o=i.tags.find(a=>a[0]==="method");if((o==null?void 0:o.length)!==1&&(o==null?void 0:o[1].toLowerCase())!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var Lpe=function(e){return e instanceof RegExp},Fpe=function(r){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return r&&n.test(r)?r.replace(t,"\\$&"):r},QU=function(e){return typeof e=="string"},jpe=function(e){var r=[];return e.forEach(function(t){Array.isArray(t)?r=r.concat(t):r.push(t)}),r};function zpe(e,r,t){var n=0,i=0;if(e==="")return e;if(!e||!QU(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=r;Lpe(s)||(s=new RegExp("("+Fpe(s)+")","gi"));for(var o=e.split(s),a=1,l=o.length;a<l;a+=2){if(o[a]===void 0||o[a-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=o[a].length,n+=o[a-1].length,o[a]=t(o[a],a,n),n+=i}return o}var Hpe=function(r,t,n){return Array.isArray(r)||(r=[r]),jpe(r.map(function(i){return QU(i)?zpe(i,t,n):i}))};const zr=ro(Hpe);var Py={};Object.defineProperty(Py,"__esModule",{value:!0});Py.bech32m=QT=Py.bech32=void 0;const Mw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",eW={};for(let e=0;e<Mw.length;e++){const r=Mw.charAt(e);eW[r]=e}function wp(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function $B(e){let r=1;for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=wp(r)^n>>5}r=wp(r);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r=wp(r)^n&31}return r}function Z3(e,r,t,n){let i=0,s=0;const o=(1<<t)-1,a=[];for(let l=0;l<e.length;++l)for(i=i<<r|e[l],s+=r;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=r)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function Upe(e){return Z3(e,8,5,!0)}function Wpe(e){const r=Z3(e,5,8,!1);if(Array.isArray(r))return r}function qpe(e){const r=Z3(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function tW(e){let r;e==="bech32"?r=1:r=734539939;function t(o,a,l){if(l=l||90,o.length+7+a.length>l)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let u=$B(o);if(typeof u=="string")throw new Error(u);let f=o+"1";for(let c=0;c<a.length;++c){const d=a[c];if(d>>5)throw new Error("Non 5-bit word");u=wp(u)^d,f+=Mw.charAt(d)}for(let c=0;c<6;++c)u=wp(u);u^=r;for(let c=0;c<6;++c){const d=u>>(5-c)*5&31;f+=Mw.charAt(d)}return f}function n(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const l=o.toLowerCase(),u=o.toUpperCase();if(o!==l&&o!==u)return"Mixed-case string "+o;o=l;const f=o.lastIndexOf("1");if(f===-1)return"No separator character for "+o;if(f===0)return"Missing prefix for "+o;const c=o.slice(0,f),d=o.slice(f+1);if(d.length<6)return"Data too short";let y=$B(c);if(typeof y=="string")return y;const w=[];for(let b=0;b<d.length;++b){const T=d.charAt(b),_=eW[T];if(_===void 0)return"Unknown character "+T;y=wp(y)^_,!(b+6>=d.length)&&w.push(_)}return y!==r?"Invalid checksum for "+o:{prefix:c,words:w}}function i(o,a){const l=n(o,a);if(typeof l=="object")return l}function s(o,a){const l=n(o,a);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:i,decode:s,encode:t,toWords:Upe,fromWordsUnsafe:Wpe,fromWords:qpe}}var QT=Py.bech32=tW("bech32");Py.bech32m=tW("bech32m");var rW={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(r,t){e.exports=r.document?t(r,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:On,function(r,t){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(m){return n.flat.call(m)}:function(m){return n.concat.apply([],m)},a=n.push,l=n.indexOf,u={},f=u.toString,c=u.hasOwnProperty,d=c.toString,y=d.call(Object),w={},b=function(k){return typeof k=="function"&&typeof k.nodeType!="number"&&typeof k.item!="function"},T=function(k){return k!=null&&k===k.window},_=r.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function x(m,k,P){P=P||_;var D,H,U=P.createElement("script");if(U.text=m,k)for(D in A)H=k[D]||k.getAttribute&&k.getAttribute(D),H&&U.setAttribute(D,H);P.head.appendChild(U).parentNode.removeChild(U)}function I(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?u[f.call(m)]||"object":typeof m}var O="3.7.0",C=/HTML$/i,g=function(m,k){return new g.fn.init(m,k)};g.fn=g.prototype={jquery:O,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(m){return m==null?s.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var k=g.merge(this.constructor(),m);return k.prevObject=this,k},each:function(m){return g.each(this,m)},map:function(m){return this.pushStack(g.map(this,function(k,P){return m.call(k,P,k)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(m,k){return(k+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(m,k){return k%2}))},eq:function(m){var k=this.length,P=+m+(m<0?k:0);return this.pushStack(P>=0&&P<k?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var m,k,P,D,H,U,K=arguments[0]||{},ue=1,se=arguments.length,xe=!1;for(typeof K=="boolean"&&(xe=K,K=arguments[ue]||{},ue++),typeof K!="object"&&!b(K)&&(K={}),ue===se&&(K=this,ue--);ue<se;ue++)if((m=arguments[ue])!=null)for(k in m)D=m[k],!(k==="__proto__"||K===D)&&(xe&&D&&(g.isPlainObject(D)||(H=Array.isArray(D)))?(P=K[k],H&&!Array.isArray(P)?U=[]:!H&&!g.isPlainObject(P)?U={}:U=P,H=!1,K[k]=g.extend(xe,U,D)):D!==void 0&&(K[k]=D));return K},g.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var k,P;return!m||f.call(m)!=="[object Object]"?!1:(k=i(m),k?(P=c.call(k,"constructor")&&k.constructor,typeof P=="function"&&d.call(P)===y):!0)},isEmptyObject:function(m){var k;for(k in m)return!1;return!0},globalEval:function(m,k,P){x(m,{nonce:k&&k.nonce},P)},each:function(m,k){var P,D=0;if(M(m))for(P=m.length;D<P&&k.call(m[D],D,m[D])!==!1;D++);else for(D in m)if(k.call(m[D],D,m[D])===!1)break;return m},text:function(m){var k,P="",D=0,H=m.nodeType;if(H){if(H===1||H===9||H===11)return m.textContent;if(H===3||H===4)return m.nodeValue}else for(;k=m[D++];)P+=g.text(k);return P},makeArray:function(m,k){var P=k||[];return m!=null&&(M(Object(m))?g.merge(P,typeof m=="string"?[m]:m):a.call(P,m)),P},inArray:function(m,k,P){return k==null?-1:l.call(k,m,P)},isXMLDoc:function(m){var k=m&&m.namespaceURI,P=m&&(m.ownerDocument||m).documentElement;return!C.test(k||P&&P.nodeName||"HTML")},merge:function(m,k){for(var P=+k.length,D=0,H=m.length;D<P;D++)m[H++]=k[D];return m.length=H,m},grep:function(m,k,P){for(var D,H=[],U=0,K=m.length,ue=!P;U<K;U++)D=!k(m[U],U),D!==ue&&H.push(m[U]);return H},map:function(m,k,P){var D,H,U=0,K=[];if(M(m))for(D=m.length;U<D;U++)H=k(m[U],U,P),H!=null&&K.push(H);else for(U in m)H=k(m[U],U,P),H!=null&&K.push(H);return o(K)},guid:1,support:w}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,k){u["[object "+k+"]"]=k.toLowerCase()});function M(m){var k=!!m&&"length"in m&&m.length,P=I(m);return b(m)||T(m)?!1:P==="array"||k===0||typeof k=="number"&&k>0&&k-1 in m}function B(m,k){return m.nodeName&&m.nodeName.toLowerCase()===k.toLowerCase()}var L=n.pop,q=n.sort,Q=n.splice,re="[\\x20\\t\\r\\n\\f]",Z=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g");g.contains=function(m,k){var P=k&&k.parentNode;return m===P||!!(P&&P.nodeType===1&&(m.contains?m.contains(P):m.compareDocumentPosition&&m.compareDocumentPosition(P)&16))};var j=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function X(m,k){return k?m==="\0"?"�":m.slice(0,-1)+"\\"+m.charCodeAt(m.length-1).toString(16)+" ":"\\"+m}g.escapeSelector=function(m){return(m+"").replace(j,X)};var ie=_,Ee=a;(function(){var m,k,P,D,H,U=Ee,K,ue,se,xe,Ce,Be=g.expando,Ae=0,Xe=0,bt=pf(),Yt=pf(),Gt=pf(),Gn=pf(),cn=function(ne,me){return ne===me&&(H=!0),0},go="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yo="(?:\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",pr="\\["+re+"*("+yo+")(?:"+re+"*([*^$|!~]?=)"+re+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+yo+"))|)"+re+"*\\]",Ha=":("+yo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+pr+")*)|.*)\\)|)",vr=new RegExp(re+"+","g"),Mr=new RegExp("^"+re+"*,"+re+"*"),ff=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),yd=new RegExp(re+"|>"),Ms=new RegExp(Ha),Al=new RegExp("^"+yo+"$"),vs={ID:new RegExp("^#("+yo+")"),CLASS:new RegExp("^\\.("+yo+")"),TAG:new RegExp("^("+yo+"|[*])"),ATTR:new RegExp("^"+pr),PSEUDO:new RegExp("^"+Ha),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+go+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},na=/^(?:input|select|textarea|button)$/i,Ua=/^h\d$/i,Bi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,hf=/[+~]/,ia=new RegExp("\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\([^\\r\\n\\f])","g"),mo=function(ne,me){var Ie="0x"+ne.slice(1)-65536;return me||(Ie<0?String.fromCharCode(Ie+65536):String.fromCharCode(Ie>>10|55296,Ie&1023|56320))},Ki=function(){Wa()},fg=Ol(function(ne){return ne.disabled===!0&&B(ne,"fieldset")},{dir:"parentNode",next:"legend"});function df(){try{return K.activeElement}catch{}}try{U.apply(n=s.call(ie.childNodes),ie.childNodes),n[ie.childNodes.length].nodeType}catch{U={apply:function(me,Ie){Ee.apply(me,s.call(Ie))},call:function(me){Ee.apply(me,s.call(arguments,1))}}}function Ar(ne,me,Ie,Oe){var ee,pe,fe,Le,We,$t,_t,yt=me&&me.ownerDocument,er=me?me.nodeType:9;if(Ie=Ie||[],typeof ne!="string"||!ne||er!==1&&er!==9&&er!==11)return Ie;if(!Oe&&(Wa(me),me=me||K,se)){if(er!==11&&(We=Bi.exec(ne)))if(ee=We[1]){if(er===9)if(fe=me.getElementById(ee)){if(fe.id===ee)return U.call(Ie,fe),Ie}else return Ie;else if(yt&&(fe=yt.getElementById(ee))&&Ar.contains(me,fe)&&fe.id===ee)return U.call(Ie,fe),Ie}else{if(We[2])return U.apply(Ie,me.getElementsByTagName(ne)),Ie;if((ee=We[3])&&me.getElementsByClassName)return U.apply(Ie,me.getElementsByClassName(ee)),Ie}if(!Gn[ne+" "]&&(!xe||!xe.test(ne))){if(_t=ne,yt=me,er===1&&(yd.test(ne)||ff.test(ne))){for(yt=hf.test(ne)&&hg(me.parentNode)||me,(yt!=me||!w.scope)&&((Le=me.getAttribute("id"))?Le=g.escapeSelector(Le):me.setAttribute("id",Le=Be)),$t=vf(ne),pe=$t.length;pe--;)$t[pe]=(Le?"#"+Le:":scope")+" "+Fs($t[pe]);_t=$t.join(",")}try{return U.apply(Ie,yt.querySelectorAll(_t)),Ie}catch{Gn(ne,!0)}finally{Le===Be&&me.removeAttribute("id")}}}return Kb(ne.replace(Z,"$1"),me,Ie,Oe)}function pf(){var ne=[];function me(Ie,Oe){return ne.push(Ie+" ")>k.cacheLength&&delete me[ne.shift()],me[Ie+" "]=Oe}return me}function Ls(ne){return ne[Be]=!0,ne}function Mu(ne){var me=K.createElement("fieldset");try{return!!ne(me)}catch{return!1}finally{me.parentNode&&me.parentNode.removeChild(me),me=null}}function s2(ne){return function(me){return B(me,"input")&&me.type===ne}}function o2(ne){return function(me){return(B(me,"input")||B(me,"button"))&&me.type===ne}}function Wb(ne){return function(me){return"form"in me?me.parentNode&&me.disabled===!1?"label"in me?"label"in me.parentNode?me.parentNode.disabled===ne:me.disabled===ne:me.isDisabled===ne||me.isDisabled!==!ne&&fg(me)===ne:me.disabled===ne:"label"in me?me.disabled===ne:!1}}function gs(ne){return Ls(function(me){return me=+me,Ls(function(Ie,Oe){for(var ee,pe=ne([],Ie.length,me),fe=pe.length;fe--;)Ie[ee=pe[fe]]&&(Ie[ee]=!(Oe[ee]=Ie[ee]))})})}function hg(ne){return ne&&typeof ne.getElementsByTagName<"u"&&ne}function Wa(ne){var me,Ie=ne?ne.ownerDocument||ne:ie;return Ie==K||Ie.nodeType!==9||!Ie.documentElement||(K=Ie,ue=K.documentElement,se=!g.isXMLDoc(K),Ce=ue.matches||ue.webkitMatchesSelector||ue.msMatchesSelector,ie!=K&&(me=K.defaultView)&&me.top!==me&&me.addEventListener("unload",Ki),w.getById=Mu(function(Oe){return ue.appendChild(Oe).id=g.expando,!K.getElementsByName||!K.getElementsByName(g.expando).length}),w.disconnectedMatch=Mu(function(Oe){return Ce.call(Oe,"*")}),w.scope=Mu(function(){return K.querySelectorAll(":scope")}),w.cssHas=Mu(function(){try{return K.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(k.filter.ID=function(Oe){var ee=Oe.replace(ia,mo);return function(pe){return pe.getAttribute("id")===ee}},k.find.ID=function(Oe,ee){if(typeof ee.getElementById<"u"&&se){var pe=ee.getElementById(Oe);return pe?[pe]:[]}}):(k.filter.ID=function(Oe){var ee=Oe.replace(ia,mo);return function(pe){var fe=typeof pe.getAttributeNode<"u"&&pe.getAttributeNode("id");return fe&&fe.value===ee}},k.find.ID=function(Oe,ee){if(typeof ee.getElementById<"u"&&se){var pe,fe,Le,We=ee.getElementById(Oe);if(We){if(pe=We.getAttributeNode("id"),pe&&pe.value===Oe)return[We];for(Le=ee.getElementsByName(Oe),fe=0;We=Le[fe++];)if(pe=We.getAttributeNode("id"),pe&&pe.value===Oe)return[We]}return[]}}),k.find.TAG=function(Oe,ee){return typeof ee.getElementsByTagName<"u"?ee.getElementsByTagName(Oe):ee.querySelectorAll(Oe)},k.find.CLASS=function(Oe,ee){if(typeof ee.getElementsByClassName<"u"&&se)return ee.getElementsByClassName(Oe)},xe=[],Mu(function(Oe){var ee;ue.appendChild(Oe).innerHTML="<a id='"+Be+"' href='' disabled='disabled'></a><select id='"+Be+"-\r\\' disabled='disabled'><option selected=''></option></select>",Oe.querySelectorAll("[selected]").length||xe.push("\\["+re+"*(?:value|"+go+")"),Oe.querySelectorAll("[id~="+Be+"-]").length||xe.push("~="),Oe.querySelectorAll("a#"+Be+"+*").length||xe.push(".#.+[+~]"),Oe.querySelectorAll(":checked").length||xe.push(":checked"),ee=K.createElement("input"),ee.setAttribute("type","hidden"),Oe.appendChild(ee).setAttribute("name","D"),ue.appendChild(Oe).disabled=!0,Oe.querySelectorAll(":disabled").length!==2&&xe.push(":enabled",":disabled"),ee=K.createElement("input"),ee.setAttribute("name",""),Oe.appendChild(ee),Oe.querySelectorAll("[name='']").length||xe.push("\\["+re+"*name"+re+"*="+re+`*(?:''|"")`)}),w.cssHas||xe.push(":has"),xe=xe.length&&new RegExp(xe.join("|")),cn=function(Oe,ee){if(Oe===ee)return H=!0,0;var pe=!Oe.compareDocumentPosition-!ee.compareDocumentPosition;return pe||(pe=(Oe.ownerDocument||Oe)==(ee.ownerDocument||ee)?Oe.compareDocumentPosition(ee):1,pe&1||!w.sortDetached&&ee.compareDocumentPosition(Oe)===pe?Oe===K||Oe.ownerDocument==ie&&Ar.contains(ie,Oe)?-1:ee===K||ee.ownerDocument==ie&&Ar.contains(ie,ee)?1:D?l.call(D,Oe)-l.call(D,ee):0:pe&4?-1:1)}),K}Ar.matches=function(ne,me){return Ar(ne,null,null,me)},Ar.matchesSelector=function(ne,me){if(Wa(ne),se&&!Gn[me+" "]&&(!xe||!xe.test(me)))try{var Ie=Ce.call(ne,me);if(Ie||w.disconnectedMatch||ne.document&&ne.document.nodeType!==11)return Ie}catch{Gn(me,!0)}return Ar(me,K,null,[ne]).length>0},Ar.contains=function(ne,me){return(ne.ownerDocument||ne)!=K&&Wa(ne),g.contains(ne,me)},Ar.attr=function(ne,me){(ne.ownerDocument||ne)!=K&&Wa(ne);var Ie=k.attrHandle[me.toLowerCase()],Oe=Ie&&c.call(k.attrHandle,me.toLowerCase())?Ie(ne,me,!se):void 0;return Oe!==void 0?Oe:ne.getAttribute(me)},Ar.error=function(ne){throw new Error("Syntax error, unrecognized expression: "+ne)},g.uniqueSort=function(ne){var me,Ie=[],Oe=0,ee=0;if(H=!w.sortStable,D=!w.sortStable&&s.call(ne,0),q.call(ne,cn),H){for(;me=ne[ee++];)me===ne[ee]&&(Oe=Ie.push(ee));for(;Oe--;)Q.call(ne,Ie[Oe],1)}return D=null,ne},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(s.apply(this)))},k=g.expr={cacheLength:50,createPseudo:Ls,match:vs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ne){return ne[1]=ne[1].replace(ia,mo),ne[3]=(ne[3]||ne[4]||ne[5]||"").replace(ia,mo),ne[2]==="~="&&(ne[3]=" "+ne[3]+" "),ne.slice(0,4)},CHILD:function(ne){return ne[1]=ne[1].toLowerCase(),ne[1].slice(0,3)==="nth"?(ne[3]||Ar.error(ne[0]),ne[4]=+(ne[4]?ne[5]+(ne[6]||1):2*(ne[3]==="even"||ne[3]==="odd")),ne[5]=+(ne[7]+ne[8]||ne[3]==="odd")):ne[3]&&Ar.error(ne[0]),ne},PSEUDO:function(ne){var me,Ie=!ne[6]&&ne[2];return vs.CHILD.test(ne[0])?null:(ne[3]?ne[2]=ne[4]||ne[5]||"":Ie&&Ms.test(Ie)&&(me=vf(Ie,!0))&&(me=Ie.indexOf(")",Ie.length-me)-Ie.length)&&(ne[0]=ne[0].slice(0,me),ne[2]=Ie.slice(0,me)),ne.slice(0,3))}},filter:{TAG:function(ne){var me=ne.replace(ia,mo).toLowerCase();return ne==="*"?function(){return!0}:function(Ie){return B(Ie,me)}},CLASS:function(ne){var me=bt[ne+" "];return me||(me=new RegExp("(^|"+re+")"+ne+"("+re+"|$)"))&&bt(ne,function(Ie){return me.test(typeof Ie.className=="string"&&Ie.className||typeof Ie.getAttribute<"u"&&Ie.getAttribute("class")||"")})},ATTR:function(ne,me,Ie){return function(Oe){var ee=Ar.attr(Oe,ne);return ee==null?me==="!=":me?(ee+="",me==="="?ee===Ie:me==="!="?ee!==Ie:me==="^="?Ie&&ee.indexOf(Ie)===0:me==="*="?Ie&&ee.indexOf(Ie)>-1:me==="$="?Ie&&ee.slice(-Ie.length)===Ie:me==="~="?(" "+ee.replace(vr," ")+" ").indexOf(Ie)>-1:me==="|="?ee===Ie||ee.slice(0,Ie.length+1)===Ie+"-":!1):!0}},CHILD:function(ne,me,Ie,Oe,ee){var pe=ne.slice(0,3)!=="nth",fe=ne.slice(-4)!=="last",Le=me==="of-type";return Oe===1&&ee===0?function(We){return!!We.parentNode}:function(We,$t,_t){var yt,er,Dt,ur,Yn,si=pe!==fe?"nextSibling":"previousSibling",Zn=We.parentNode,Gi=Le&&We.nodeName.toLowerCase(),sa=!_t&&!Le,qt=!1;if(Zn){if(pe){for(;si;){for(Dt=We;Dt=Dt[si];)if(Le?B(Dt,Gi):Dt.nodeType===1)return!1;Yn=si=ne==="only"&&!Yn&&"nextSibling"}return!0}if(Yn=[fe?Zn.firstChild:Zn.lastChild],fe&&sa){for(er=Zn[Be]||(Zn[Be]={}),yt=er[ne]||[],ur=yt[0]===Ae&&yt[1],qt=ur&&yt[2],Dt=ur&&Zn.childNodes[ur];Dt=++ur&&Dt&&Dt[si]||(qt=ur=0)||Yn.pop();)if(Dt.nodeType===1&&++qt&&Dt===We){er[ne]=[Ae,ur,qt];break}}else if(sa&&(er=We[Be]||(We[Be]={}),yt=er[ne]||[],ur=yt[0]===Ae&&yt[1],qt=ur),qt===!1)for(;(Dt=++ur&&Dt&&Dt[si]||(qt=ur=0)||Yn.pop())&&!((Le?B(Dt,Gi):Dt.nodeType===1)&&++qt&&(sa&&(er=Dt[Be]||(Dt[Be]={}),er[ne]=[Ae,qt]),Dt===We)););return qt-=ee,qt===Oe||qt%Oe===0&&qt/Oe>=0}}},PSEUDO:function(ne,me){var Ie,Oe=k.pseudos[ne]||k.setFilters[ne.toLowerCase()]||Ar.error("unsupported pseudo: "+ne);return Oe[Be]?Oe(me):Oe.length>1?(Ie=[ne,ne,"",me],k.setFilters.hasOwnProperty(ne.toLowerCase())?Ls(function(ee,pe){for(var fe,Le=Oe(ee,me),We=Le.length;We--;)fe=l.call(ee,Le[We]),ee[fe]=!(pe[fe]=Le[We])}):function(ee){return Oe(ee,0,Ie)}):Oe}},pseudos:{not:Ls(function(ne){var me=[],Ie=[],Oe=pg(ne.replace(Z,"$1"));return Oe[Be]?Ls(function(ee,pe,fe,Le){for(var We,$t=Oe(ee,null,Le,[]),_t=ee.length;_t--;)(We=$t[_t])&&(ee[_t]=!(pe[_t]=We))}):function(ee,pe,fe){return me[0]=ee,Oe(me,null,fe,Ie),me[0]=null,!Ie.pop()}}),has:Ls(function(ne){return function(me){return Ar(ne,me).length>0}}),contains:Ls(function(ne){return ne=ne.replace(ia,mo),function(me){return(me.textContent||g.text(me)).indexOf(ne)>-1}}),lang:Ls(function(ne){return Al.test(ne||"")||Ar.error("unsupported lang: "+ne),ne=ne.replace(ia,mo).toLowerCase(),function(me){var Ie;do if(Ie=se?me.lang:me.getAttribute("xml:lang")||me.getAttribute("lang"))return Ie=Ie.toLowerCase(),Ie===ne||Ie.indexOf(ne+"-")===0;while((me=me.parentNode)&&me.nodeType===1);return!1}}),target:function(ne){var me=r.location&&r.location.hash;return me&&me.slice(1)===ne.id},root:function(ne){return ne===ue},focus:function(ne){return ne===df()&&K.hasFocus()&&!!(ne.type||ne.href||~ne.tabIndex)},enabled:Wb(!1),disabled:Wb(!0),checked:function(ne){return B(ne,"input")&&!!ne.checked||B(ne,"option")&&!!ne.selected},selected:function(ne){return ne.parentNode&&ne.parentNode.selectedIndex,ne.selected===!0},empty:function(ne){for(ne=ne.firstChild;ne;ne=ne.nextSibling)if(ne.nodeType<6)return!1;return!0},parent:function(ne){return!k.pseudos.empty(ne)},header:function(ne){return Ua.test(ne.nodeName)},input:function(ne){return na.test(ne.nodeName)},button:function(ne){return B(ne,"input")&&ne.type==="button"||B(ne,"button")},text:function(ne){var me;return B(ne,"input")&&ne.type==="text"&&((me=ne.getAttribute("type"))==null||me.toLowerCase()==="text")},first:gs(function(){return[0]}),last:gs(function(ne,me){return[me-1]}),eq:gs(function(ne,me,Ie){return[Ie<0?Ie+me:Ie]}),even:gs(function(ne,me){for(var Ie=0;Ie<me;Ie+=2)ne.push(Ie);return ne}),odd:gs(function(ne,me){for(var Ie=1;Ie<me;Ie+=2)ne.push(Ie);return ne}),lt:gs(function(ne,me,Ie){var Oe;for(Ie<0?Oe=Ie+me:Ie>me?Oe=me:Oe=Ie;--Oe>=0;)ne.push(Oe);return ne}),gt:gs(function(ne,me,Ie){for(var Oe=Ie<0?Ie+me:Ie;++Oe<me;)ne.push(Oe);return ne})}},k.pseudos.nth=k.pseudos.eq;for(m in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[m]=s2(m);for(m in{submit:!0,reset:!0})k.pseudos[m]=o2(m);function md(){}md.prototype=k.filters=k.pseudos,k.setFilters=new md;function vf(ne,me){var Ie,Oe,ee,pe,fe,Le,We,$t=Yt[ne+" "];if($t)return me?0:$t.slice(0);for(fe=ne,Le=[],We=k.preFilter;fe;){(!Ie||(Oe=Mr.exec(fe)))&&(Oe&&(fe=fe.slice(Oe[0].length)||fe),Le.push(ee=[])),Ie=!1,(Oe=ff.exec(fe))&&(Ie=Oe.shift(),ee.push({value:Ie,type:Oe[0].replace(Z," ")}),fe=fe.slice(Ie.length));for(pe in k.filter)(Oe=vs[pe].exec(fe))&&(!We[pe]||(Oe=We[pe](Oe)))&&(Ie=Oe.shift(),ee.push({value:Ie,type:pe,matches:Oe}),fe=fe.slice(Ie.length));if(!Ie)break}return me?fe.length:fe?Ar.error(ne):Yt(ne,Le).slice(0)}function Fs(ne){for(var me=0,Ie=ne.length,Oe="";me<Ie;me++)Oe+=ne[me].value;return Oe}function Ol(ne,me,Ie){var Oe=me.dir,ee=me.next,pe=ee||Oe,fe=Ie&&pe==="parentNode",Le=Xe++;return me.first?function(We,$t,_t){for(;We=We[Oe];)if(We.nodeType===1||fe)return ne(We,$t,_t);return!1}:function(We,$t,_t){var yt,er,Dt=[Ae,Le];if(_t){for(;We=We[Oe];)if((We.nodeType===1||fe)&&ne(We,$t,_t))return!0}else for(;We=We[Oe];)if(We.nodeType===1||fe)if(er=We[Be]||(We[Be]={}),ee&&B(We,ee))We=We[Oe]||We;else{if((yt=er[pe])&&yt[0]===Ae&&yt[1]===Le)return Dt[2]=yt[2];if(er[pe]=Dt,Dt[2]=ne(We,$t,_t))return!0}return!1}}function dg(ne){return ne.length>1?function(me,Ie,Oe){for(var ee=ne.length;ee--;)if(!ne[ee](me,Ie,Oe))return!1;return!0}:ne[0]}function a2(ne,me,Ie){for(var Oe=0,ee=me.length;Oe<ee;Oe++)Ar(ne,me[Oe],Ie);return Ie}function bd(ne,me,Ie,Oe,ee){for(var pe,fe=[],Le=0,We=ne.length,$t=me!=null;Le<We;Le++)(pe=ne[Le])&&(!Ie||Ie(pe,Oe,ee))&&(fe.push(pe),$t&&me.push(Le));return fe}function qa(ne,me,Ie,Oe,ee,pe){return Oe&&!Oe[Be]&&(Oe=qa(Oe)),ee&&!ee[Be]&&(ee=qa(ee,pe)),Ls(function(fe,Le,We,$t){var _t,yt,er,Dt,ur=[],Yn=[],si=Le.length,Zn=fe||a2(me||"*",We.nodeType?[We]:We,[]),Gi=ne&&(fe||!me)?bd(Zn,ur,ne,We,$t):Zn;if(Ie?(Dt=ee||(fe?ne:si||Oe)?[]:Le,Ie(Gi,Dt,We,$t)):Dt=Gi,Oe)for(_t=bd(Dt,Yn),Oe(_t,[],We,$t),yt=_t.length;yt--;)(er=_t[yt])&&(Dt[Yn[yt]]=!(Gi[Yn[yt]]=er));if(fe){if(ee||ne){if(ee){for(_t=[],yt=Dt.length;yt--;)(er=Dt[yt])&&_t.push(Gi[yt]=er);ee(null,Dt=[],_t,$t)}for(yt=Dt.length;yt--;)(er=Dt[yt])&&(_t=ee?l.call(fe,er):ur[yt])>-1&&(fe[_t]=!(Le[_t]=er))}}else Dt=bd(Dt===Le?Dt.splice(si,Dt.length):Dt),ee?ee(null,Le,Dt,$t):U.apply(Le,Dt)})}function Vi(ne){for(var me,Ie,Oe,ee=ne.length,pe=k.relative[ne[0].type],fe=pe||k.relative[" "],Le=pe?1:0,We=Ol(function(yt){return yt===me},fe,!0),$t=Ol(function(yt){return l.call(me,yt)>-1},fe,!0),_t=[function(yt,er,Dt){var ur=!pe&&(Dt||er!=P)||((me=er).nodeType?We(yt,er,Dt):$t(yt,er,Dt));return me=null,ur}];Le<ee;Le++)if(Ie=k.relative[ne[Le].type])_t=[Ol(dg(_t),Ie)];else{if(Ie=k.filter[ne[Le].type].apply(null,ne[Le].matches),Ie[Be]){for(Oe=++Le;Oe<ee&&!k.relative[ne[Oe].type];Oe++);return qa(Le>1&&dg(_t),Le>1&&Fs(ne.slice(0,Le-1).concat({value:ne[Le-2].type===" "?"*":""})).replace(Z,"$1"),Ie,Le<Oe&&Vi(ne.slice(Le,Oe)),Oe<ee&&Vi(ne=ne.slice(Oe)),Oe<ee&&Fs(ne))}_t.push(Ie)}return dg(_t)}function qb(ne,me){var Ie=me.length>0,Oe=ne.length>0,ee=function(pe,fe,Le,We,$t){var _t,yt,er,Dt=0,ur="0",Yn=pe&&[],si=[],Zn=P,Gi=pe||Oe&&k.find.TAG("*",$t),sa=Ae+=Zn==null?1:Math.random()||.1,qt=Gi.length;for($t&&(P=fe==K||fe||$t);ur!==qt&&(_t=Gi[ur])!=null;ur++){if(Oe&&_t){for(yt=0,!fe&&_t.ownerDocument!=K&&(Wa(_t),Le=!se);er=ne[yt++];)if(er(_t,fe||K,Le)){U.call(We,_t);break}$t&&(Ae=sa)}Ie&&((_t=!er&&_t)&&Dt--,pe&&Yn.push(_t))}if(Dt+=ur,Ie&&ur!==Dt){for(yt=0;er=me[yt++];)er(Yn,si,fe,Le);if(pe){if(Dt>0)for(;ur--;)Yn[ur]||si[ur]||(si[ur]=L.call(We));si=bd(si)}U.apply(We,si),$t&&!pe&&si.length>0&&Dt+me.length>1&&g.uniqueSort(We)}return $t&&(Ae=sa,P=Zn),Yn};return Ie?Ls(ee):ee}function pg(ne,me){var Ie,Oe=[],ee=[],pe=Gt[ne+" "];if(!pe){for(me||(me=vf(ne)),Ie=me.length;Ie--;)pe=Vi(me[Ie]),pe[Be]?Oe.push(pe):ee.push(pe);pe=Gt(ne,qb(ee,Oe)),pe.selector=ne}return pe}function Kb(ne,me,Ie,Oe){var ee,pe,fe,Le,We,$t=typeof ne=="function"&&ne,_t=!Oe&&vf(ne=$t.selector||ne);if(Ie=Ie||[],_t.length===1){if(pe=_t[0]=_t[0].slice(0),pe.length>2&&(fe=pe[0]).type==="ID"&&me.nodeType===9&&se&&k.relative[pe[1].type]){if(me=(k.find.ID(fe.matches[0].replace(ia,mo),me)||[])[0],me)$t&&(me=me.parentNode);else return Ie;ne=ne.slice(pe.shift().value.length)}for(ee=vs.needsContext.test(ne)?0:pe.length;ee--&&(fe=pe[ee],!k.relative[Le=fe.type]);)if((We=k.find[Le])&&(Oe=We(fe.matches[0].replace(ia,mo),hf.test(pe[0].type)&&hg(me.parentNode)||me))){if(pe.splice(ee,1),ne=Oe.length&&Fs(pe),!ne)return U.apply(Ie,Oe),Ie;break}}return($t||pg(ne,_t))(Oe,me,!se,Ie,!me||hf.test(ne)&&hg(me.parentNode)||me),Ie}w.sortStable=Be.split("").sort(cn).join("")===Be,Wa(),w.sortDetached=Mu(function(ne){return ne.compareDocumentPosition(K.createElement("fieldset"))&1}),g.find=Ar,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,Ar.compile=pg,Ar.select=Kb,Ar.setDocument=Wa,Ar.escape=g.escapeSelector,Ar.getText=g.text,Ar.isXML=g.isXMLDoc,Ar.selectors=g.expr,Ar.support=g.support,Ar.uniqueSort=g.uniqueSort})();var $e=function(m,k,P){for(var D=[],H=P!==void 0;(m=m[k])&&m.nodeType!==9;)if(m.nodeType===1){if(H&&g(m).is(P))break;D.push(m)}return D},Pe=function(m,k){for(var P=[];m;m=m.nextSibling)m.nodeType===1&&m!==k&&P.push(m);return P},He=g.expr.match.needsContext,Ve=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function it(m,k,P){return b(k)?g.grep(m,function(D,H){return!!k.call(D,H,D)!==P}):k.nodeType?g.grep(m,function(D){return D===k!==P}):typeof k!="string"?g.grep(m,function(D){return l.call(k,D)>-1!==P}):g.filter(k,m,P)}g.filter=function(m,k,P){var D=k[0];return P&&(m=":not("+m+")"),k.length===1&&D.nodeType===1?g.find.matchesSelector(D,m)?[D]:[]:g.find.matches(m,g.grep(k,function(H){return H.nodeType===1}))},g.fn.extend({find:function(m){var k,P,D=this.length,H=this;if(typeof m!="string")return this.pushStack(g(m).filter(function(){for(k=0;k<D;k++)if(g.contains(H[k],this))return!0}));for(P=this.pushStack([]),k=0;k<D;k++)g.find(m,H[k],P);return D>1?g.uniqueSort(P):P},filter:function(m){return this.pushStack(it(this,m||[],!1))},not:function(m){return this.pushStack(it(this,m||[],!0))},is:function(m){return!!it(this,typeof m=="string"&&He.test(m)?g(m):m||[],!1).length}});var _e,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=g.fn.init=function(m,k,P){var D,H;if(!m)return this;if(P=P||_e,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?D=[null,m,null]:D=ge.exec(m),D&&(D[1]||!k))if(D[1]){if(k=k instanceof g?k[0]:k,g.merge(this,g.parseHTML(D[1],k&&k.nodeType?k.ownerDocument||k:_,!0)),Ve.test(D[1])&&g.isPlainObject(k))for(D in k)b(this[D])?this[D](k[D]):this.attr(D,k[D]);return this}else return H=_.getElementById(D[2]),H&&(this[0]=H,this.length=1),this;else return!k||k.jquery?(k||P).find(m):this.constructor(k).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(b(m))return P.ready!==void 0?P.ready(m):m(g)}return g.makeArray(m,this)};Te.prototype=g.fn,_e=g(_);var je=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(m){var k=g(m,this),P=k.length;return this.filter(function(){for(var D=0;D<P;D++)if(g.contains(this,k[D]))return!0})},closest:function(m,k){var P,D=0,H=this.length,U=[],K=typeof m!="string"&&g(m);if(!He.test(m)){for(;D<H;D++)for(P=this[D];P&&P!==k;P=P.parentNode)if(P.nodeType<11&&(K?K.index(P)>-1:P.nodeType===1&&g.find.matchesSelector(P,m))){U.push(P);break}}return this.pushStack(U.length>1?g.uniqueSort(U):U)},index:function(m){return m?typeof m=="string"?l.call(g(m),this[0]):l.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,k){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(m,k))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function S(m,k){for(;(m=m[k])&&m.nodeType!==1;);return m}g.each({parent:function(m){var k=m.parentNode;return k&&k.nodeType!==11?k:null},parents:function(m){return $e(m,"parentNode")},parentsUntil:function(m,k,P){return $e(m,"parentNode",P)},next:function(m){return S(m,"nextSibling")},prev:function(m){return S(m,"previousSibling")},nextAll:function(m){return $e(m,"nextSibling")},prevAll:function(m){return $e(m,"previousSibling")},nextUntil:function(m,k,P){return $e(m,"nextSibling",P)},prevUntil:function(m,k,P){return $e(m,"previousSibling",P)},siblings:function(m){return Pe((m.parentNode||{}).firstChild,m)},children:function(m){return Pe(m.firstChild)},contents:function(m){return m.contentDocument!=null&&i(m.contentDocument)?m.contentDocument:(B(m,"template")&&(m=m.content||m),g.merge([],m.childNodes))}},function(m,k){g.fn[m]=function(P,D){var H=g.map(this,k,P);return m.slice(-5)!=="Until"&&(D=P),D&&typeof D=="string"&&(H=g.filter(D,H)),this.length>1&&($[m]||g.uniqueSort(H),je.test(m)&&H.reverse()),this.pushStack(H)}});var N=/[^\x20\t\r\n\f]+/g;function F(m){var k={};return g.each(m.match(N)||[],function(P,D){k[D]=!0}),k}g.Callbacks=function(m){m=typeof m=="string"?F(m):g.extend({},m);var k,P,D,H,U=[],K=[],ue=-1,se=function(){for(H=H||m.once,D=k=!0;K.length;ue=-1)for(P=K.shift();++ue<U.length;)U[ue].apply(P[0],P[1])===!1&&m.stopOnFalse&&(ue=U.length,P=!1);m.memory||(P=!1),k=!1,H&&(P?U=[]:U="")},xe={add:function(){return U&&(P&&!k&&(ue=U.length-1,K.push(P)),function Ce(Be){g.each(Be,function(Ae,Xe){b(Xe)?(!m.unique||!xe.has(Xe))&&U.push(Xe):Xe&&Xe.length&&I(Xe)!=="string"&&Ce(Xe)})}(arguments),P&&!k&&se()),this},remove:function(){return g.each(arguments,function(Ce,Be){for(var Ae;(Ae=g.inArray(Be,U,Ae))>-1;)U.splice(Ae,1),Ae<=ue&&ue--}),this},has:function(Ce){return Ce?g.inArray(Ce,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return H=K=[],U=P="",this},disabled:function(){return!U},lock:function(){return H=K=[],!P&&!k&&(U=P=""),this},locked:function(){return!!H},fireWith:function(Ce,Be){return H||(Be=Be||[],Be=[Ce,Be.slice?Be.slice():Be],K.push(Be),k||se()),this},fire:function(){return xe.fireWith(this,arguments),this},fired:function(){return!!D}};return xe};function z(m){return m}function V(m){throw m}function ae(m,k,P,D){var H;try{m&&b(H=m.promise)?H.call(m).done(k).fail(P):m&&b(H=m.then)?H.call(m,k,P):k.apply(void 0,[m].slice(D))}catch(U){P.apply(void 0,[U])}}g.extend({Deferred:function(m){var k=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],P="pending",D={state:function(){return P},always:function(){return H.done(arguments).fail(arguments),this},catch:function(U){return D.then(null,U)},pipe:function(){var U=arguments;return g.Deferred(function(K){g.each(k,function(ue,se){var xe=b(U[se[4]])&&U[se[4]];H[se[1]](function(){var Ce=xe&&xe.apply(this,arguments);Ce&&b(Ce.promise)?Ce.promise().progress(K.notify).done(K.resolve).fail(K.reject):K[se[0]+"With"](this,xe?[Ce]:arguments)})}),U=null}).promise()},then:function(U,K,ue){var se=0;function xe(Ce,Be,Ae,Xe){return function(){var bt=this,Yt=arguments,Gt=function(){var cn,go;if(!(Ce<se)){if(cn=Ae.apply(bt,Yt),cn===Be.promise())throw new TypeError("Thenable self-resolution");go=cn&&(typeof cn=="object"||typeof cn=="function")&&cn.then,b(go)?Xe?go.call(cn,xe(se,Be,z,Xe),xe(se,Be,V,Xe)):(se++,go.call(cn,xe(se,Be,z,Xe),xe(se,Be,V,Xe),xe(se,Be,z,Be.notifyWith))):(Ae!==z&&(bt=void 0,Yt=[cn]),(Xe||Be.resolveWith)(bt,Yt))}},Gn=Xe?Gt:function(){try{Gt()}catch(cn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(cn,Gn.error),Ce+1>=se&&(Ae!==V&&(bt=void 0,Yt=[cn]),Be.rejectWith(bt,Yt))}};Ce?Gn():(g.Deferred.getErrorHook?Gn.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(Gn.error=g.Deferred.getStackHook()),r.setTimeout(Gn))}}return g.Deferred(function(Ce){k[0][3].add(xe(0,Ce,b(ue)?ue:z,Ce.notifyWith)),k[1][3].add(xe(0,Ce,b(U)?U:z)),k[2][3].add(xe(0,Ce,b(K)?K:V))}).promise()},promise:function(U){return U!=null?g.extend(U,D):D}},H={};return g.each(k,function(U,K){var ue=K[2],se=K[5];D[K[1]]=ue.add,se&&ue.add(function(){P=se},k[3-U][2].disable,k[3-U][3].disable,k[0][2].lock,k[0][3].lock),ue.add(K[3].fire),H[K[0]]=function(){return H[K[0]+"With"](this===H?void 0:this,arguments),this},H[K[0]+"With"]=ue.fireWith}),D.promise(H),m&&m.call(H,H),H},when:function(m){var k=arguments.length,P=k,D=Array(P),H=s.call(arguments),U=g.Deferred(),K=function(ue){return function(se){D[ue]=this,H[ue]=arguments.length>1?s.call(arguments):se,--k||U.resolveWith(D,H)}};if(k<=1&&(ae(m,U.done(K(P)).resolve,U.reject,!k),U.state()==="pending"||b(H[P]&&H[P].then)))return U.then();for(;P--;)ae(H[P],K(P),U.reject);return U.promise()}});var ye=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(m,k){r.console&&r.console.warn&&m&&ye.test(m.name)&&r.console.warn("jQuery.Deferred exception: "+m.message,m.stack,k)},g.readyException=function(m){r.setTimeout(function(){throw m})};var Ue=g.Deferred();g.fn.ready=function(m){return Ue.then(m).catch(function(k){g.readyException(k)}),this},g.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(m!==!0&&--g.readyWait>0)&&Ue.resolveWith(_,[g]))}}),g.ready.then=Ue.then;function ze(){_.removeEventListener("DOMContentLoaded",ze),r.removeEventListener("load",ze),g.ready()}_.readyState==="complete"||_.readyState!=="loading"&&!_.documentElement.doScroll?r.setTimeout(g.ready):(_.addEventListener("DOMContentLoaded",ze),r.addEventListener("load",ze));var st=function(m,k,P,D,H,U,K){var ue=0,se=m.length,xe=P==null;if(I(P)==="object"){H=!0;for(ue in P)st(m,k,ue,P[ue],!0,U,K)}else if(D!==void 0&&(H=!0,b(D)||(K=!0),xe&&(K?(k.call(m,D),k=null):(xe=k,k=function(Ce,Be,Ae){return xe.call(g(Ce),Ae)})),k))for(;ue<se;ue++)k(m[ue],P,K?D:D.call(m[ue],ue,k(m[ue],P)));return H?m:xe?k.call(m):se?k(m[0],P):U},wt=/^-ms-/,mt=/-([a-z])/g;function pt(m,k){return k.toUpperCase()}function Rt(m){return m.replace(wt,"ms-").replace(mt,pt)}var dr=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function Vr(){this.expando=g.expando+Vr.uid++}Vr.uid=1,Vr.prototype={cache:function(m){var k=m[this.expando];return k||(k={},dr(m)&&(m.nodeType?m[this.expando]=k:Object.defineProperty(m,this.expando,{value:k,configurable:!0}))),k},set:function(m,k,P){var D,H=this.cache(m);if(typeof k=="string")H[Rt(k)]=P;else for(D in k)H[Rt(D)]=k[D];return H},get:function(m,k){return k===void 0?this.cache(m):m[this.expando]&&m[this.expando][Rt(k)]},access:function(m,k,P){return k===void 0||k&&typeof k=="string"&&P===void 0?this.get(m,k):(this.set(m,k,P),P!==void 0?P:k)},remove:function(m,k){var P,D=m[this.expando];if(D!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(Rt):(k=Rt(k),k=k in D?[k]:k.match(N)||[]),P=k.length;P--;)delete D[k[P]];(k===void 0||g.isEmptyObject(D))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var k=m[this.expando];return k!==void 0&&!g.isEmptyObject(k)}};var ct=new Vr,It=new Vr,pn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pi=/[A-Z]/g;function Wi(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:pn.test(m)?JSON.parse(m):m}function vn(m,k,P){var D;if(P===void 0&&m.nodeType===1)if(D="data-"+k.replace(Pi,"-$&").toLowerCase(),P=m.getAttribute(D),typeof P=="string"){try{P=Wi(P)}catch{}It.set(m,k,P)}else P=void 0;return P}g.extend({hasData:function(m){return It.hasData(m)||ct.hasData(m)},data:function(m,k,P){return It.access(m,k,P)},removeData:function(m,k){It.remove(m,k)},_data:function(m,k,P){return ct.access(m,k,P)},_removeData:function(m,k){ct.remove(m,k)}}),g.fn.extend({data:function(m,k){var P,D,H,U=this[0],K=U&&U.attributes;if(m===void 0){if(this.length&&(H=It.get(U),U.nodeType===1&&!ct.get(U,"hasDataAttrs"))){for(P=K.length;P--;)K[P]&&(D=K[P].name,D.indexOf("data-")===0&&(D=Rt(D.slice(5)),vn(U,D,H[D])));ct.set(U,"hasDataAttrs",!0)}return H}return typeof m=="object"?this.each(function(){It.set(this,m)}):st(this,function(ue){var se;if(U&&ue===void 0)return se=It.get(U,m),se!==void 0||(se=vn(U,m),se!==void 0)?se:void 0;this.each(function(){It.set(this,m,ue)})},null,k,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){It.remove(this,m)})}}),g.extend({queue:function(m,k,P){var D;if(m)return k=(k||"fx")+"queue",D=ct.get(m,k),P&&(!D||Array.isArray(P)?D=ct.access(m,k,g.makeArray(P)):D.push(P)),D||[]},dequeue:function(m,k){k=k||"fx";var P=g.queue(m,k),D=P.length,H=P.shift(),U=g._queueHooks(m,k),K=function(){g.dequeue(m,k)};H==="inprogress"&&(H=P.shift(),D--),H&&(k==="fx"&&P.unshift("inprogress"),delete U.stop,H.call(m,K,U)),!D&&U&&U.empty.fire()},_queueHooks:function(m,k){var P=k+"queueHooks";return ct.get(m,P)||ct.access(m,P,{empty:g.Callbacks("once memory").add(function(){ct.remove(m,[k+"queue",P])})})}}),g.fn.extend({queue:function(m,k){var P=2;return typeof m!="string"&&(k=m,m="fx",P--),arguments.length<P?g.queue(this[0],m):k===void 0?this:this.each(function(){var D=g.queue(this,m,k);g._queueHooks(this,m),m==="fx"&&D[0]!=="inprogress"&&g.dequeue(this,m)})},dequeue:function(m){return this.each(function(){g.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,k){var P,D=1,H=g.Deferred(),U=this,K=this.length,ue=function(){--D||H.resolveWith(U,[U])};for(typeof m!="string"&&(k=m,m=void 0),m=m||"fx";K--;)P=ct.get(U[K],m+"queueHooks"),P&&P.empty&&(D++,P.empty.add(ue));return ue(),H.promise(k)}});var ds=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,uo=new RegExp("^(?:([+-])=|)("+ds+")([a-z%]*)$","i"),Ni=["Top","Right","Bottom","Left"],qi=_.documentElement,co=function(m){return g.contains(m.ownerDocument,m)},rf={composed:!0};qi.getRootNode&&(co=function(m){return g.contains(m.ownerDocument,m)||m.getRootNode(rf)===m.ownerDocument});var fo=function(m,k){return m=k||m,m.style.display==="none"||m.style.display===""&&co(m)&&g.css(m,"display")==="none"};function nf(m,k,P,D){var H,U,K=20,ue=D?function(){return D.cur()}:function(){return g.css(m,k,"")},se=ue(),xe=P&&P[3]||(g.cssNumber[k]?"":"px"),Ce=m.nodeType&&(g.cssNumber[k]||xe!=="px"&&+se)&&uo.exec(g.css(m,k));if(Ce&&Ce[3]!==xe){for(se=se/2,xe=xe||Ce[3],Ce=+se||1;K--;)g.style(m,k,Ce+xe),(1-U)*(1-(U=ue()/se||.5))<=0&&(K=0),Ce=Ce/U;Ce=Ce*2,g.style(m,k,Ce+xe),P=P||[]}return P&&(Ce=+Ce||+se||0,H=P[1]?Ce+(P[1]+1)*P[2]:+P[2],D&&(D.unit=xe,D.start=Ce,D.end=H)),H}var td={};function ho(m){var k,P=m.ownerDocument,D=m.nodeName,H=td[D];return H||(k=P.body.appendChild(P.createElement(D)),H=g.css(k,"display"),k.parentNode.removeChild(k),H==="none"&&(H="block"),td[D]=H,H)}function ea(m,k){for(var P,D,H=[],U=0,K=m.length;U<K;U++)D=m[U],D.style&&(P=D.style.display,k?(P==="none"&&(H[U]=ct.get(D,"display")||null,H[U]||(D.style.display="")),D.style.display===""&&fo(D)&&(H[U]=ho(D))):P!=="none"&&(H[U]="none",ct.set(D,"display",P)));for(U=0;U<K;U++)H[U]!=null&&(m[U].style.display=H[U]);return m}g.fn.extend({show:function(){return ea(this,!0)},hide:function(){return ea(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){fo(this)?g(this).show():g(this).hide()})}});var Ma=/^(?:checkbox|radio)$/i,sf=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,rd=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=_.createDocumentFragment(),k=m.appendChild(_.createElement("div")),P=_.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),k.appendChild(P),w.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,k.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!k.cloneNode(!0).lastChild.defaultValue,k.innerHTML="<option></option>",w.option=!!k.lastChild})();var Ri={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ri.tbody=Ri.tfoot=Ri.colgroup=Ri.caption=Ri.thead,Ri.th=Ri.td,w.option||(Ri.optgroup=Ri.option=[1,"<select multiple='multiple'>","</select>"]);function ii(m,k){var P;return typeof m.getElementsByTagName<"u"?P=m.getElementsByTagName(k||"*"):typeof m.querySelectorAll<"u"?P=m.querySelectorAll(k||"*"):P=[],k===void 0||k&&B(m,k)?g.merge([m],P):P}function Pu(m,k){for(var P=0,D=m.length;P<D;P++)ct.set(m[P],"globalEval",!k||ct.get(k[P],"globalEval"))}var Jv=/<|&#?\w+;/;function nd(m,k,P,D,H){for(var U,K,ue,se,xe,Ce,Be=k.createDocumentFragment(),Ae=[],Xe=0,bt=m.length;Xe<bt;Xe++)if(U=m[Xe],U||U===0)if(I(U)==="object")g.merge(Ae,U.nodeType?[U]:U);else if(!Jv.test(U))Ae.push(k.createTextNode(U));else{for(K=K||Be.appendChild(k.createElement("div")),ue=(sf.exec(U)||["",""])[1].toLowerCase(),se=Ri[ue]||Ri._default,K.innerHTML=se[1]+g.htmlPrefilter(U)+se[2],Ce=se[0];Ce--;)K=K.lastChild;g.merge(Ae,K.childNodes),K=Be.firstChild,K.textContent=""}for(Be.textContent="",Xe=0;U=Ae[Xe++];){if(D&&g.inArray(U,D)>-1){H&&H.push(U);continue}if(xe=co(U),K=ii(Be.appendChild(U),"script"),xe&&Pu(K),P)for(Ce=0;U=K[Ce++];)rd.test(U.type||"")&&P.push(U)}return Be}var id=/^([^.]*)(?:\.(.+)|)/;function po(){return!0}function La(){return!1}function Sl(m,k,P,D,H,U){var K,ue;if(typeof k=="object"){typeof P!="string"&&(D=D||P,P=void 0);for(ue in k)Sl(m,ue,P,D,k[ue],U);return m}if(D==null&&H==null?(H=P,D=P=void 0):H==null&&(typeof P=="string"?(H=D,D=void 0):(H=D,D=P,P=void 0)),H===!1)H=La;else if(!H)return m;return U===1&&(K=H,H=function(se){return g().off(se),K.apply(this,arguments)},H.guid=K.guid||(K.guid=g.guid++)),m.each(function(){g.event.add(this,k,H,D,P)})}g.event={global:{},add:function(m,k,P,D,H){var U,K,ue,se,xe,Ce,Be,Ae,Xe,bt,Yt,Gt=ct.get(m);if(dr(m))for(P.handler&&(U=P,P=U.handler,H=U.selector),H&&g.find.matchesSelector(qi,H),P.guid||(P.guid=g.guid++),(se=Gt.events)||(se=Gt.events=Object.create(null)),(K=Gt.handle)||(K=Gt.handle=function(Gn){return typeof g<"u"&&g.event.triggered!==Gn.type?g.event.dispatch.apply(m,arguments):void 0}),k=(k||"").match(N)||[""],xe=k.length;xe--;)ue=id.exec(k[xe])||[],Xe=Yt=ue[1],bt=(ue[2]||"").split(".").sort(),Xe&&(Be=g.event.special[Xe]||{},Xe=(H?Be.delegateType:Be.bindType)||Xe,Be=g.event.special[Xe]||{},Ce=g.extend({type:Xe,origType:Yt,data:D,handler:P,guid:P.guid,selector:H,needsContext:H&&g.expr.match.needsContext.test(H),namespace:bt.join(".")},U),(Ae=se[Xe])||(Ae=se[Xe]=[],Ae.delegateCount=0,(!Be.setup||Be.setup.call(m,D,bt,K)===!1)&&m.addEventListener&&m.addEventListener(Xe,K)),Be.add&&(Be.add.call(m,Ce),Ce.handler.guid||(Ce.handler.guid=P.guid)),H?Ae.splice(Ae.delegateCount++,0,Ce):Ae.push(Ce),g.event.global[Xe]=!0)},remove:function(m,k,P,D,H){var U,K,ue,se,xe,Ce,Be,Ae,Xe,bt,Yt,Gt=ct.hasData(m)&&ct.get(m);if(!(!Gt||!(se=Gt.events))){for(k=(k||"").match(N)||[""],xe=k.length;xe--;){if(ue=id.exec(k[xe])||[],Xe=Yt=ue[1],bt=(ue[2]||"").split(".").sort(),!Xe){for(Xe in se)g.event.remove(m,Xe+k[xe],P,D,!0);continue}for(Be=g.event.special[Xe]||{},Xe=(D?Be.delegateType:Be.bindType)||Xe,Ae=se[Xe]||[],ue=ue[2]&&new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"),K=U=Ae.length;U--;)Ce=Ae[U],(H||Yt===Ce.origType)&&(!P||P.guid===Ce.guid)&&(!ue||ue.test(Ce.namespace))&&(!D||D===Ce.selector||D==="**"&&Ce.selector)&&(Ae.splice(U,1),Ce.selector&&Ae.delegateCount--,Be.remove&&Be.remove.call(m,Ce));K&&!Ae.length&&((!Be.teardown||Be.teardown.call(m,bt,Gt.handle)===!1)&&g.removeEvent(m,Xe,Gt.handle),delete se[Xe])}g.isEmptyObject(se)&&ct.remove(m,"handle events")}},dispatch:function(m){var k,P,D,H,U,K,ue=new Array(arguments.length),se=g.event.fix(m),xe=(ct.get(this,"events")||Object.create(null))[se.type]||[],Ce=g.event.special[se.type]||{};for(ue[0]=se,k=1;k<arguments.length;k++)ue[k]=arguments[k];if(se.delegateTarget=this,!(Ce.preDispatch&&Ce.preDispatch.call(this,se)===!1)){for(K=g.event.handlers.call(this,se,xe),k=0;(H=K[k++])&&!se.isPropagationStopped();)for(se.currentTarget=H.elem,P=0;(U=H.handlers[P++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||U.namespace===!1||se.rnamespace.test(U.namespace))&&(se.handleObj=U,se.data=U.data,D=((g.event.special[U.origType]||{}).handle||U.handler).apply(H.elem,ue),D!==void 0&&(se.result=D)===!1&&(se.preventDefault(),se.stopPropagation()));return Ce.postDispatch&&Ce.postDispatch.call(this,se),se.result}},handlers:function(m,k){var P,D,H,U,K,ue=[],se=k.delegateCount,xe=m.target;if(se&&xe.nodeType&&!(m.type==="click"&&m.button>=1)){for(;xe!==this;xe=xe.parentNode||this)if(xe.nodeType===1&&!(m.type==="click"&&xe.disabled===!0)){for(U=[],K={},P=0;P<se;P++)D=k[P],H=D.selector+" ",K[H]===void 0&&(K[H]=D.needsContext?g(H,this).index(xe)>-1:g.find(H,this,null,[xe]).length),K[H]&&U.push(D);U.length&&ue.push({elem:xe,handlers:U})}}return xe=this,se<k.length&&ue.push({elem:xe,handlers:k.slice(se)}),ue},addProp:function(m,k){Object.defineProperty(g.Event.prototype,m,{enumerable:!0,configurable:!0,get:b(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(P){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(m){return m[g.expando]?m:new g.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var k=this||m;return Ma.test(k.type)&&k.click&&B(k,"input")&&kl(k,"click",!0),!1},trigger:function(m){var k=this||m;return Ma.test(k.type)&&k.click&&B(k,"input")&&kl(k,"click"),!0},_default:function(m){var k=m.target;return Ma.test(k.type)&&k.click&&B(k,"input")&&ct.get(k,"click")||B(k,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function kl(m,k,P){if(!P){ct.get(m,k)===void 0&&g.event.add(m,k,po);return}ct.set(m,k,!1),g.event.add(m,k,{namespace:!1,handler:function(D){var H,U=ct.get(this,k);if(D.isTrigger&1&&this[k]){if(U)(g.event.special[k]||{}).delegateType&&D.stopPropagation();else if(U=s.call(arguments),ct.set(this,k,U),this[k](),H=ct.get(this,k),ct.set(this,k,!1),U!==H)return D.stopImmediatePropagation(),D.preventDefault(),H}else U&&(ct.set(this,k,g.event.trigger(U[0],U.slice(1),this)),D.stopPropagation(),D.isImmediatePropagationStopped=po)}})}g.removeEvent=function(m,k,P){m.removeEventListener&&m.removeEventListener(k,P)},g.Event=function(m,k){if(!(this instanceof g.Event))return new g.Event(m,k);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?po:La,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,k&&g.extend(this,k),this.timeStamp=m&&m.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:La,isPropagationStopped:La,isImmediatePropagationStopped:La,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=po,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=po,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=po,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(m,k){function P(D){if(_.documentMode){var H=ct.get(this,"handle"),U=g.event.fix(D);U.type=D.type==="focusin"?"focus":"blur",U.isSimulated=!0,H(D),U.target===U.currentTarget&&H(U)}else g.event.simulate(k,D.target,g.event.fix(D))}g.event.special[m]={setup:function(){var D;if(kl(this,m,!0),_.documentMode)D=ct.get(this,k),D||this.addEventListener(k,P),ct.set(this,k,(D||0)+1);else return!1},trigger:function(){return kl(this,m),!0},teardown:function(){var D;if(_.documentMode)D=ct.get(this,k)-1,D?ct.set(this,k,D):(this.removeEventListener(k,P),ct.remove(this,k));else return!1},_default:function(D){return ct.get(D.target,m)},delegateType:k},g.event.special[k]={setup:function(){var D=this.ownerDocument||this.document||this,H=_.documentMode?this:D,U=ct.get(H,k);U||(_.documentMode?this.addEventListener(k,P):D.addEventListener(m,P,!0)),ct.set(H,k,(U||0)+1)},teardown:function(){var D=this.ownerDocument||this.document||this,H=_.documentMode?this:D,U=ct.get(H,k)-1;U?ct.set(H,k,U):(_.documentMode?this.removeEventListener(k,P):D.removeEventListener(m,P,!0),ct.remove(H,k))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,k){g.event.special[m]={delegateType:k,bindType:k,handle:function(P){var D,H=this,U=P.relatedTarget,K=P.handleObj;return(!U||U!==H&&!g.contains(H,U))&&(P.type=K.origType,D=K.handler.apply(this,arguments),P.type=k),D}}}),g.fn.extend({on:function(m,k,P,D){return Sl(this,m,k,P,D)},one:function(m,k,P,D){return Sl(this,m,k,P,D,1)},off:function(m,k,P){var D,H;if(m&&m.preventDefault&&m.handleObj)return D=m.handleObj,g(m.delegateTarget).off(D.namespace?D.origType+"."+D.namespace:D.origType,D.selector,D.handler),this;if(typeof m=="object"){for(H in m)this.off(H,k,m[H]);return this}return(k===!1||typeof k=="function")&&(P=k,k=void 0),P===!1&&(P=La),this.each(function(){g.event.remove(this,m,P,k)})}});var Qv=/<script|<style|<link/i,eg=/checked\s*(?:[^=]|=\s*.checked.)/i,tg=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function sd(m,k){return B(m,"table")&&B(k.nodeType!==11?k:k.firstChild,"tr")&&g(m).children("tbody")[0]||m}function rg(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function ng(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function od(m,k){var P,D,H,U,K,ue,se;if(k.nodeType===1){if(ct.hasData(m)&&(U=ct.get(m),se=U.events,se)){ct.remove(k,"handle events");for(H in se)for(P=0,D=se[H].length;P<D;P++)g.event.add(k,H,se[H][P])}It.hasData(m)&&(K=It.access(m),ue=g.extend({},K),It.set(k,ue))}}function ad(m,k){var P=k.nodeName.toLowerCase();P==="input"&&Ma.test(m.type)?k.checked=m.checked:(P==="input"||P==="textarea")&&(k.defaultValue=m.defaultValue)}function Fa(m,k,P,D){k=o(k);var H,U,K,ue,se,xe,Ce=0,Be=m.length,Ae=Be-1,Xe=k[0],bt=b(Xe);if(bt||Be>1&&typeof Xe=="string"&&!w.checkClone&&eg.test(Xe))return m.each(function(Yt){var Gt=m.eq(Yt);bt&&(k[0]=Xe.call(this,Yt,Gt.html())),Fa(Gt,k,P,D)});if(Be&&(H=nd(k,m[0].ownerDocument,!1,m,D),U=H.firstChild,H.childNodes.length===1&&(H=U),U||D)){for(K=g.map(ii(H,"script"),rg),ue=K.length;Ce<Be;Ce++)se=H,Ce!==Ae&&(se=g.clone(se,!0,!0),ue&&g.merge(K,ii(se,"script"))),P.call(m[Ce],se,Ce);if(ue)for(xe=K[K.length-1].ownerDocument,g.map(K,ng),Ce=0;Ce<ue;Ce++)se=K[Ce],rd.test(se.type||"")&&!ct.access(se,"globalEval")&&g.contains(xe,se)&&(se.src&&(se.type||"").toLowerCase()!=="module"?g._evalUrl&&!se.noModule&&g._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},xe):x(se.textContent.replace(tg,""),se,xe))}return m}function ld(m,k,P){for(var D,H=k?g.filter(k,m):m,U=0;(D=H[U])!=null;U++)!P&&D.nodeType===1&&g.cleanData(ii(D)),D.parentNode&&(P&&co(D)&&Pu(ii(D,"script")),D.parentNode.removeChild(D));return m}g.extend({htmlPrefilter:function(m){return m},clone:function(m,k,P){var D,H,U,K,ue=m.cloneNode(!0),se=co(m);if(!w.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!g.isXMLDoc(m))for(K=ii(ue),U=ii(m),D=0,H=U.length;D<H;D++)ad(U[D],K[D]);if(k)if(P)for(U=U||ii(m),K=K||ii(ue),D=0,H=U.length;D<H;D++)od(U[D],K[D]);else od(m,ue);return K=ii(ue,"script"),K.length>0&&Pu(K,!se&&ii(m,"script")),ue},cleanData:function(m){for(var k,P,D,H=g.event.special,U=0;(P=m[U])!==void 0;U++)if(dr(P)){if(k=P[ct.expando]){if(k.events)for(D in k.events)H[D]?g.event.remove(P,D):g.removeEvent(P,D,k.handle);P[ct.expando]=void 0}P[It.expando]&&(P[It.expando]=void 0)}}}),g.fn.extend({detach:function(m){return ld(this,m,!0)},remove:function(m){return ld(this,m)},text:function(m){return st(this,function(k){return k===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,m,arguments.length)},append:function(){return Fa(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=sd(this,m);k.appendChild(m)}})},prepend:function(){return Fa(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=sd(this,m);k.insertBefore(m,k.firstChild)}})},before:function(){return Fa(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return Fa(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,k=0;(m=this[k])!=null;k++)m.nodeType===1&&(g.cleanData(ii(m,!1)),m.textContent="");return this},clone:function(m,k){return m=m??!1,k=k??m,this.map(function(){return g.clone(this,m,k)})},html:function(m){return st(this,function(k){var P=this[0]||{},D=0,H=this.length;if(k===void 0&&P.nodeType===1)return P.innerHTML;if(typeof k=="string"&&!Qv.test(k)&&!Ri[(sf.exec(k)||["",""])[1].toLowerCase()]){k=g.htmlPrefilter(k);try{for(;D<H;D++)P=this[D]||{},P.nodeType===1&&(g.cleanData(ii(P,!1)),P.innerHTML=k);P=0}catch{}}P&&this.empty().append(k)},null,m,arguments.length)},replaceWith:function(){var m=[];return Fa(this,arguments,function(k){var P=this.parentNode;g.inArray(this,m)<0&&(g.cleanData(ii(this)),P&&P.replaceChild(k,this))},m)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,k){g.fn[m]=function(P){for(var D,H=[],U=g(P),K=U.length-1,ue=0;ue<=K;ue++)D=ue===K?this:this.clone(!0),g(U[ue])[k](D),a.apply(H,D.get());return this.pushStack(H)}});var of=new RegExp("^("+ds+")(?!px)[a-z%]+$","i"),af=/^--/,Nu=function(m){var k=m.ownerDocument.defaultView;return(!k||!k.opener)&&(k=r),k.getComputedStyle(m)},ud=function(m,k,P){var D,H,U={};for(H in k)U[H]=m.style[H],m.style[H]=k[H];D=P.call(m);for(H in k)m.style[H]=U[H];return D},Ru=new RegExp(Ni.join("|"),"i");(function(){function m(){if(xe){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",xe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",qi.appendChild(se).appendChild(xe);var Ce=r.getComputedStyle(xe);P=Ce.top!=="1%",ue=k(Ce.marginLeft)===12,xe.style.right="60%",U=k(Ce.right)===36,D=k(Ce.width)===36,xe.style.position="absolute",H=k(xe.offsetWidth/3)===12,qi.removeChild(se),xe=null}}function k(Ce){return Math.round(parseFloat(Ce))}var P,D,H,U,K,ue,se=_.createElement("div"),xe=_.createElement("div");xe.style&&(xe.style.backgroundClip="content-box",xe.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=xe.style.backgroundClip==="content-box",g.extend(w,{boxSizingReliable:function(){return m(),D},pixelBoxStyles:function(){return m(),U},pixelPosition:function(){return m(),P},reliableMarginLeft:function(){return m(),ue},scrollboxSize:function(){return m(),H},reliableTrDimensions:function(){var Ce,Be,Ae,Xe;return K==null&&(Ce=_.createElement("table"),Be=_.createElement("tr"),Ae=_.createElement("div"),Ce.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Be.style.cssText="border:1px solid",Be.style.height="1px",Ae.style.height="9px",Ae.style.display="block",qi.appendChild(Ce).appendChild(Be).appendChild(Ae),Xe=r.getComputedStyle(Be),K=parseInt(Xe.height,10)+parseInt(Xe.borderTopWidth,10)+parseInt(Xe.borderBottomWidth,10)===Be.offsetHeight,qi.removeChild(Ce)),K}}))})();function ja(m,k,P){var D,H,U,K,ue=af.test(k),se=m.style;return P=P||Nu(m),P&&(K=P.getPropertyValue(k)||P[k],ue&&K&&(K=K.replace(Z,"$1")||void 0),K===""&&!co(m)&&(K=g.style(m,k)),!w.pixelBoxStyles()&&of.test(K)&&Ru.test(k)&&(D=se.width,H=se.minWidth,U=se.maxWidth,se.minWidth=se.maxWidth=se.width=K,K=P.width,se.width=D,se.minWidth=H,se.maxWidth=U)),K!==void 0?K+"":K}function Bs(m,k){return{get:function(){if(m()){delete this.get;return}return(this.get=k).apply(this,arguments)}}}var lf=["Webkit","Moz","ms"],ta=_.createElement("div").style,cd={};function Tl(m){for(var k=m[0].toUpperCase()+m.slice(1),P=lf.length;P--;)if(m=lf[P]+k,m in ta)return m}function za(m){var k=g.cssProps[m]||cd[m];return k||(m in ta?m:cd[m]=Tl(m)||m)}var fd=/^(none|table(?!-c[ea]).+)/,ig={position:"absolute",visibility:"hidden",display:"block"},Du={letterSpacing:"0",fontWeight:"400"};function hd(m,k,P){var D=uo.exec(k);return D?Math.max(0,D[2]-(P||0))+(D[3]||"px"):k}function uf(m,k,P,D,H,U){var K=k==="width"?1:0,ue=0,se=0,xe=0;if(P===(D?"border":"content"))return 0;for(;K<4;K+=2)P==="margin"&&(xe+=g.css(m,P+Ni[K],!0,H)),D?(P==="content"&&(se-=g.css(m,"padding"+Ni[K],!0,H)),P!=="margin"&&(se-=g.css(m,"border"+Ni[K]+"Width",!0,H))):(se+=g.css(m,"padding"+Ni[K],!0,H),P!=="padding"?se+=g.css(m,"border"+Ni[K]+"Width",!0,H):ue+=g.css(m,"border"+Ni[K]+"Width",!0,H));return!D&&U>=0&&(se+=Math.max(0,Math.ceil(m["offset"+k[0].toUpperCase()+k.slice(1)]-U-se-ue-.5))||0),se+xe}function Y(m,k,P){var D=Nu(m),H=!w.boxSizingReliable()||P,U=H&&g.css(m,"boxSizing",!1,D)==="border-box",K=U,ue=ja(m,k,D),se="offset"+k[0].toUpperCase()+k.slice(1);if(of.test(ue)){if(!P)return ue;ue="auto"}return(!w.boxSizingReliable()&&U||!w.reliableTrDimensions()&&B(m,"tr")||ue==="auto"||!parseFloat(ue)&&g.css(m,"display",!1,D)==="inline")&&m.getClientRects().length&&(U=g.css(m,"boxSizing",!1,D)==="border-box",K=se in m,K&&(ue=m[se])),ue=parseFloat(ue)||0,ue+uf(m,k,P||(U?"border":"content"),K,D,ue)+"px"}g.extend({cssHooks:{opacity:{get:function(m,k){if(k){var P=ja(m,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(m,k,P,D){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var H,U,K,ue=Rt(k),se=af.test(k),xe=m.style;if(se||(k=za(ue)),K=g.cssHooks[k]||g.cssHooks[ue],P!==void 0){if(U=typeof P,U==="string"&&(H=uo.exec(P))&&H[1]&&(P=nf(m,k,H),U="number"),P==null||P!==P)return;U==="number"&&!se&&(P+=H&&H[3]||(g.cssNumber[ue]?"":"px")),!w.clearCloneStyle&&P===""&&k.indexOf("background")===0&&(xe[k]="inherit"),(!K||!("set"in K)||(P=K.set(m,P,D))!==void 0)&&(se?xe.setProperty(k,P):xe[k]=P)}else return K&&"get"in K&&(H=K.get(m,!1,D))!==void 0?H:xe[k]}},css:function(m,k,P,D){var H,U,K,ue=Rt(k),se=af.test(k);return se||(k=za(ue)),K=g.cssHooks[k]||g.cssHooks[ue],K&&"get"in K&&(H=K.get(m,!0,P)),H===void 0&&(H=ja(m,k,D)),H==="normal"&&k in Du&&(H=Du[k]),P===""||P?(U=parseFloat(H),P===!0||isFinite(U)?U||0:H):H}}),g.each(["height","width"],function(m,k){g.cssHooks[k]={get:function(P,D,H){if(D)return fd.test(g.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?ud(P,ig,function(){return Y(P,k,H)}):Y(P,k,H)},set:function(P,D,H){var U,K=Nu(P),ue=!w.scrollboxSize()&&K.position==="absolute",se=ue||H,xe=se&&g.css(P,"boxSizing",!1,K)==="border-box",Ce=H?uf(P,k,H,xe,K):0;return xe&&ue&&(Ce-=Math.ceil(P["offset"+k[0].toUpperCase()+k.slice(1)]-parseFloat(K[k])-uf(P,k,"border",!1,K)-.5)),Ce&&(U=uo.exec(D))&&(U[3]||"px")!=="px"&&(P.style[k]=D,D=g.css(P,k)),hd(P,D,Ce)}}}),g.cssHooks.marginLeft=Bs(w.reliableMarginLeft,function(m,k){if(k)return(parseFloat(ja(m,"marginLeft"))||m.getBoundingClientRect().left-ud(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(m,k){g.cssHooks[m+k]={expand:function(P){for(var D=0,H={},U=typeof P=="string"?P.split(" "):[P];D<4;D++)H[m+Ni[D]+k]=U[D]||U[D-2]||U[0];return H}},m!=="margin"&&(g.cssHooks[m+k].set=hd)}),g.fn.extend({css:function(m,k){return st(this,function(P,D,H){var U,K,ue={},se=0;if(Array.isArray(D)){for(U=Nu(P),K=D.length;se<K;se++)ue[D[se]]=g.css(P,D[se],!1,U);return ue}return H!==void 0?g.style(P,D,H):g.css(P,D)},m,k,arguments.length>1)}});function le(m,k,P,D,H){return new le.prototype.init(m,k,P,D,H)}g.Tween=le,le.prototype={constructor:le,init:function(m,k,P,D,H,U){this.elem=m,this.prop=P,this.easing=H||g.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=D,this.unit=U||(g.cssNumber[P]?"":"px")},cur:function(){var m=le.propHooks[this.prop];return m&&m.get?m.get(this):le.propHooks._default.get(this)},run:function(m){var k,P=le.propHooks[this.prop];return this.options.duration?this.pos=k=g.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=k=m,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):le.propHooks._default.set(this),this}},le.prototype.init.prototype=le.prototype,le.propHooks={_default:{get:function(m){var k;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(k=g.css(m.elem,m.prop,""),!k||k==="auto"?0:k)},set:function(m){g.fx.step[m.prop]?g.fx.step[m.prop](m):m.elem.nodeType===1&&(g.cssHooks[m.prop]||m.elem.style[za(m.prop)]!=null)?g.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},le.propHooks.scrollTop=le.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},g.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},g.fx=le.prototype.init,g.fx.step={};var te,we,Se=/^(?:toggle|show|hide)$/,be=/queueHooks$/;function Fe(){we&&(_.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Fe):r.setTimeout(Fe,g.fx.interval),g.fx.tick())}function Ye(){return r.setTimeout(function(){te=void 0}),te=Date.now()}function Qe(m,k){var P,D=0,H={height:m};for(k=k?1:0;D<4;D+=2-k)P=Ni[D],H["margin"+P]=H["padding"+P]=m;return k&&(H.opacity=H.width=m),H}function tt(m,k,P){for(var D,H=(Lt.tweeners[k]||[]).concat(Lt.tweeners["*"]),U=0,K=H.length;U<K;U++)if(D=H[U].call(P,k,m))return D}function ot(m,k,P){var D,H,U,K,ue,se,xe,Ce,Be="width"in k||"height"in k,Ae=this,Xe={},bt=m.style,Yt=m.nodeType&&fo(m),Gt=ct.get(m,"fxshow");P.queue||(K=g._queueHooks(m,"fx"),K.unqueued==null&&(K.unqueued=0,ue=K.empty.fire,K.empty.fire=function(){K.unqueued||ue()}),K.unqueued++,Ae.always(function(){Ae.always(function(){K.unqueued--,g.queue(m,"fx").length||K.empty.fire()})}));for(D in k)if(H=k[D],Se.test(H)){if(delete k[D],U=U||H==="toggle",H===(Yt?"hide":"show"))if(H==="show"&&Gt&&Gt[D]!==void 0)Yt=!0;else continue;Xe[D]=Gt&&Gt[D]||g.style(m,D)}if(se=!g.isEmptyObject(k),!(!se&&g.isEmptyObject(Xe))){Be&&m.nodeType===1&&(P.overflow=[bt.overflow,bt.overflowX,bt.overflowY],xe=Gt&&Gt.display,xe==null&&(xe=ct.get(m,"display")),Ce=g.css(m,"display"),Ce==="none"&&(xe?Ce=xe:(ea([m],!0),xe=m.style.display||xe,Ce=g.css(m,"display"),ea([m]))),(Ce==="inline"||Ce==="inline-block"&&xe!=null)&&g.css(m,"float")==="none"&&(se||(Ae.done(function(){bt.display=xe}),xe==null&&(Ce=bt.display,xe=Ce==="none"?"":Ce)),bt.display="inline-block")),P.overflow&&(bt.overflow="hidden",Ae.always(function(){bt.overflow=P.overflow[0],bt.overflowX=P.overflow[1],bt.overflowY=P.overflow[2]})),se=!1;for(D in Xe)se||(Gt?"hidden"in Gt&&(Yt=Gt.hidden):Gt=ct.access(m,"fxshow",{display:xe}),U&&(Gt.hidden=!Yt),Yt&&ea([m],!0),Ae.done(function(){Yt||ea([m]),ct.remove(m,"fxshow");for(D in Xe)g.style(m,D,Xe[D])})),se=tt(Yt?Gt[D]:0,D,Ae),D in Gt||(Gt[D]=se.start,Yt&&(se.end=se.start,se.start=0))}}function xt(m,k){var P,D,H,U,K;for(P in m)if(D=Rt(P),H=k[D],U=m[P],Array.isArray(U)&&(H=U[1],U=m[P]=U[0]),P!==D&&(m[D]=U,delete m[P]),K=g.cssHooks[D],K&&"expand"in K){U=K.expand(U),delete m[D];for(P in U)P in m||(m[P]=U[P],k[P]=H)}else k[D]=H}function Lt(m,k,P){var D,H,U=0,K=Lt.prefilters.length,ue=g.Deferred().always(function(){delete se.elem}),se=function(){if(H)return!1;for(var Be=te||Ye(),Ae=Math.max(0,xe.startTime+xe.duration-Be),Xe=Ae/xe.duration||0,bt=1-Xe,Yt=0,Gt=xe.tweens.length;Yt<Gt;Yt++)xe.tweens[Yt].run(bt);return ue.notifyWith(m,[xe,bt,Ae]),bt<1&&Gt?Ae:(Gt||ue.notifyWith(m,[xe,1,0]),ue.resolveWith(m,[xe]),!1)},xe=ue.promise({elem:m,props:g.extend({},k),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},P),originalProperties:k,originalOptions:P,startTime:te||Ye(),duration:P.duration,tweens:[],createTween:function(Be,Ae){var Xe=g.Tween(m,xe.opts,Be,Ae,xe.opts.specialEasing[Be]||xe.opts.easing);return xe.tweens.push(Xe),Xe},stop:function(Be){var Ae=0,Xe=Be?xe.tweens.length:0;if(H)return this;for(H=!0;Ae<Xe;Ae++)xe.tweens[Ae].run(1);return Be?(ue.notifyWith(m,[xe,1,0]),ue.resolveWith(m,[xe,Be])):ue.rejectWith(m,[xe,Be]),this}}),Ce=xe.props;for(xt(Ce,xe.opts.specialEasing);U<K;U++)if(D=Lt.prefilters[U].call(xe,m,Ce,xe.opts),D)return b(D.stop)&&(g._queueHooks(xe.elem,xe.opts.queue).stop=D.stop.bind(D)),D;return g.map(Ce,tt,xe),b(xe.opts.start)&&xe.opts.start.call(m,xe),xe.progress(xe.opts.progress).done(xe.opts.done,xe.opts.complete).fail(xe.opts.fail).always(xe.opts.always),g.fx.timer(g.extend(se,{elem:m,anim:xe,queue:xe.opts.queue})),xe}g.Animation=g.extend(Lt,{tweeners:{"*":[function(m,k){var P=this.createTween(m,k);return nf(P.elem,m,uo.exec(k),P),P}]},tweener:function(m,k){b(m)?(k=m,m=["*"]):m=m.match(N);for(var P,D=0,H=m.length;D<H;D++)P=m[D],Lt.tweeners[P]=Lt.tweeners[P]||[],Lt.tweeners[P].unshift(k)},prefilters:[ot],prefilter:function(m,k){k?Lt.prefilters.unshift(m):Lt.prefilters.push(m)}}),g.speed=function(m,k,P){var D=m&&typeof m=="object"?g.extend({},m):{complete:P||!P&&k||b(m)&&m,duration:m,easing:P&&k||k&&!b(k)&&k};return g.fx.off?D.duration=0:typeof D.duration!="number"&&(D.duration in g.fx.speeds?D.duration=g.fx.speeds[D.duration]:D.duration=g.fx.speeds._default),(D.queue==null||D.queue===!0)&&(D.queue="fx"),D.old=D.complete,D.complete=function(){b(D.old)&&D.old.call(this),D.queue&&g.dequeue(this,D.queue)},D},g.fn.extend({fadeTo:function(m,k,P,D){return this.filter(fo).css("opacity",0).show().end().animate({opacity:k},m,P,D)},animate:function(m,k,P,D){var H=g.isEmptyObject(m),U=g.speed(k,P,D),K=function(){var ue=Lt(this,g.extend({},m),U);(H||ct.get(this,"finish"))&&ue.stop(!0)};return K.finish=K,H||U.queue===!1?this.each(K):this.queue(U.queue,K)},stop:function(m,k,P){var D=function(H){var U=H.stop;delete H.stop,U(P)};return typeof m!="string"&&(P=k,k=m,m=void 0),k&&this.queue(m||"fx",[]),this.each(function(){var H=!0,U=m!=null&&m+"queueHooks",K=g.timers,ue=ct.get(this);if(U)ue[U]&&ue[U].stop&&D(ue[U]);else for(U in ue)ue[U]&&ue[U].stop&&be.test(U)&&D(ue[U]);for(U=K.length;U--;)K[U].elem===this&&(m==null||K[U].queue===m)&&(K[U].anim.stop(P),H=!1,K.splice(U,1));(H||!P)&&g.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var k,P=ct.get(this),D=P[m+"queue"],H=P[m+"queueHooks"],U=g.timers,K=D?D.length:0;for(P.finish=!0,g.queue(this,m,[]),H&&H.stop&&H.stop.call(this,!0),k=U.length;k--;)U[k].elem===this&&U[k].queue===m&&(U[k].anim.stop(!0),U.splice(k,1));for(k=0;k<K;k++)D[k]&&D[k].finish&&D[k].finish.call(this);delete P.finish})}}),g.each(["toggle","show","hide"],function(m,k){var P=g.fn[k];g.fn[k]=function(D,H,U){return D==null||typeof D=="boolean"?P.apply(this,arguments):this.animate(Qe(k,!0),D,H,U)}}),g.each({slideDown:Qe("show"),slideUp:Qe("hide"),slideToggle:Qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,k){g.fn[m]=function(P,D,H){return this.animate(k,P,D,H)}}),g.timers=[],g.fx.tick=function(){var m,k=0,P=g.timers;for(te=Date.now();k<P.length;k++)m=P[k],!m()&&P[k]===m&&P.splice(k--,1);P.length||g.fx.stop(),te=void 0},g.fx.timer=function(m){g.timers.push(m),g.fx.start()},g.fx.interval=13,g.fx.start=function(){we||(we=!0,Fe())},g.fx.stop=function(){we=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(m,k){return m=g.fx&&g.fx.speeds[m]||m,k=k||"fx",this.queue(k,function(P,D){var H=r.setTimeout(P,m);D.stop=function(){r.clearTimeout(H)}})},function(){var m=_.createElement("input"),k=_.createElement("select"),P=k.appendChild(_.createElement("option"));m.type="checkbox",w.checkOn=m.value!=="",w.optSelected=P.selected,m=_.createElement("input"),m.value="t",m.type="radio",w.radioValue=m.value==="t"}();var mr,lr=g.expr.attrHandle;g.fn.extend({attr:function(m,k){return st(this,g.attr,m,k,arguments.length>1)},removeAttr:function(m){return this.each(function(){g.removeAttr(this,m)})}}),g.extend({attr:function(m,k,P){var D,H,U=m.nodeType;if(!(U===3||U===8||U===2)){if(typeof m.getAttribute>"u")return g.prop(m,k,P);if((U!==1||!g.isXMLDoc(m))&&(H=g.attrHooks[k.toLowerCase()]||(g.expr.match.bool.test(k)?mr:void 0)),P!==void 0){if(P===null){g.removeAttr(m,k);return}return H&&"set"in H&&(D=H.set(m,P,k))!==void 0?D:(m.setAttribute(k,P+""),P)}return H&&"get"in H&&(D=H.get(m,k))!==null?D:(D=g.find.attr(m,k),D??void 0)}},attrHooks:{type:{set:function(m,k){if(!w.radioValue&&k==="radio"&&B(m,"input")){var P=m.value;return m.setAttribute("type",k),P&&(m.value=P),k}}}},removeAttr:function(m,k){var P,D=0,H=k&&k.match(N);if(H&&m.nodeType===1)for(;P=H[D++];)m.removeAttribute(P)}}),mr={set:function(m,k,P){return k===!1?g.removeAttr(m,P):m.setAttribute(P,P),P}},g.each(g.expr.match.bool.source.match(/\w+/g),function(m,k){var P=lr[k]||g.find.attr;lr[k]=function(D,H,U){var K,ue,se=H.toLowerCase();return U||(ue=lr[se],lr[se]=K,K=P(D,H,U)!=null?se:null,lr[se]=ue),K}});var Gr=/^(?:input|select|textarea|button)$/i,Cr=/^(?:a|area)$/i;g.fn.extend({prop:function(m,k){return st(this,g.prop,m,k,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[g.propFix[m]||m]})}}),g.extend({prop:function(m,k,P){var D,H,U=m.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!g.isXMLDoc(m))&&(k=g.propFix[k]||k,H=g.propHooks[k]),P!==void 0?H&&"set"in H&&(D=H.set(m,P,k))!==void 0?D:m[k]=P:H&&"get"in H&&(D=H.get(m,k))!==null?D:m[k]},propHooks:{tabIndex:{get:function(m){var k=g.find.attr(m,"tabindex");return k?parseInt(k,10):Gr.test(m.nodeName)||Cr.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(g.propHooks.selected={get:function(m){var k=m.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(m){var k=m.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function ln(m){var k=m.match(N)||[];return k.join(" ")}function Di(m){return m.getAttribute&&m.getAttribute("class")||""}function Il(m){return Array.isArray(m)?m:typeof m=="string"?m.match(N)||[]:[]}g.fn.extend({addClass:function(m){var k,P,D,H,U,K;return b(m)?this.each(function(ue){g(this).addClass(m.call(this,ue,Di(this)))}):(k=Il(m),k.length?this.each(function(){if(D=Di(this),P=this.nodeType===1&&" "+ln(D)+" ",P){for(U=0;U<k.length;U++)H=k[U],P.indexOf(" "+H+" ")<0&&(P+=H+" ");K=ln(P),D!==K&&this.setAttribute("class",K)}}):this)},removeClass:function(m){var k,P,D,H,U,K;return b(m)?this.each(function(ue){g(this).removeClass(m.call(this,ue,Di(this)))}):arguments.length?(k=Il(m),k.length?this.each(function(){if(D=Di(this),P=this.nodeType===1&&" "+ln(D)+" ",P){for(U=0;U<k.length;U++)for(H=k[U];P.indexOf(" "+H+" ")>-1;)P=P.replace(" "+H+" "," ");K=ln(P),D!==K&&this.setAttribute("class",K)}}):this):this.attr("class","")},toggleClass:function(m,k){var P,D,H,U,K=typeof m,ue=K==="string"||Array.isArray(m);return b(m)?this.each(function(se){g(this).toggleClass(m.call(this,se,Di(this),k),k)}):typeof k=="boolean"&&ue?k?this.addClass(m):this.removeClass(m):(P=Il(m),this.each(function(){if(ue)for(U=g(this),H=0;H<P.length;H++)D=P[H],U.hasClass(D)?U.removeClass(D):U.addClass(D);else(m===void 0||K==="boolean")&&(D=Di(this),D&&ct.set(this,"__className__",D),this.setAttribute&&this.setAttribute("class",D||m===!1?"":ct.get(this,"__className__")||""))}))},hasClass:function(m){var k,P,D=0;for(k=" "+m+" ";P=this[D++];)if(P.nodeType===1&&(" "+ln(Di(P))+" ").indexOf(k)>-1)return!0;return!1}});var dd=/\r/g;g.fn.extend({val:function(m){var k,P,D,H=this[0];return arguments.length?(D=b(m),this.each(function(U){var K;this.nodeType===1&&(D?K=m.call(this,U,g(this).val()):K=m,K==null?K="":typeof K=="number"?K+="":Array.isArray(K)&&(K=g.map(K,function(ue){return ue==null?"":ue+""})),k=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,K,"value")===void 0)&&(this.value=K))})):H?(k=g.valHooks[H.type]||g.valHooks[H.nodeName.toLowerCase()],k&&"get"in k&&(P=k.get(H,"value"))!==void 0?P:(P=H.value,typeof P=="string"?P.replace(dd,""):P??"")):void 0}}),g.extend({valHooks:{option:{get:function(m){var k=g.find.attr(m,"value");return k??ln(g.text(m))}},select:{get:function(m){var k,P,D,H=m.options,U=m.selectedIndex,K=m.type==="select-one",ue=K?null:[],se=K?U+1:H.length;for(U<0?D=se:D=K?U:0;D<se;D++)if(P=H[D],(P.selected||D===U)&&!P.disabled&&(!P.parentNode.disabled||!B(P.parentNode,"optgroup"))){if(k=g(P).val(),K)return k;ue.push(k)}return ue},set:function(m,k){for(var P,D,H=m.options,U=g.makeArray(k),K=H.length;K--;)D=H[K],(D.selected=g.inArray(g.valHooks.option.get(D),U)>-1)&&(P=!0);return P||(m.selectedIndex=-1),U}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(m,k){if(Array.isArray(k))return m.checked=g.inArray(g(m).val(),k)>-1}},w.checkOn||(g.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})});var vo=r.location,pd={guid:Date.now()},Bu=/\?/;g.parseXML=function(m){var k,P;if(!m||typeof m!="string")return null;try{k=new r.DOMParser().parseFromString(m,"text/xml")}catch{}return P=k&&k.getElementsByTagName("parsererror")[0],(!k||P)&&g.error("Invalid XML: "+(P?g.map(P.childNodes,function(D){return D.textContent}).join(`
`):m)),k};var vd=/^(?:focusinfocus|focusoutblur)$/,cf=function(m){m.stopPropagation()};g.extend(g.event,{trigger:function(m,k,P,D){var H,U,K,ue,se,xe,Ce,Be,Ae=[P||_],Xe=c.call(m,"type")?m.type:m,bt=c.call(m,"namespace")?m.namespace.split("."):[];if(U=Be=K=P=P||_,!(P.nodeType===3||P.nodeType===8)&&!vd.test(Xe+g.event.triggered)&&(Xe.indexOf(".")>-1&&(bt=Xe.split("."),Xe=bt.shift(),bt.sort()),se=Xe.indexOf(":")<0&&"on"+Xe,m=m[g.expando]?m:new g.Event(Xe,typeof m=="object"&&m),m.isTrigger=D?2:3,m.namespace=bt.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+bt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=P),k=k==null?[m]:g.makeArray(k,[m]),Ce=g.event.special[Xe]||{},!(!D&&Ce.trigger&&Ce.trigger.apply(P,k)===!1))){if(!D&&!Ce.noBubble&&!T(P)){for(ue=Ce.delegateType||Xe,vd.test(ue+Xe)||(U=U.parentNode);U;U=U.parentNode)Ae.push(U),K=U;K===(P.ownerDocument||_)&&Ae.push(K.defaultView||K.parentWindow||r)}for(H=0;(U=Ae[H++])&&!m.isPropagationStopped();)Be=U,m.type=H>1?ue:Ce.bindType||Xe,xe=(ct.get(U,"events")||Object.create(null))[m.type]&&ct.get(U,"handle"),xe&&xe.apply(U,k),xe=se&&U[se],xe&&xe.apply&&dr(U)&&(m.result=xe.apply(U,k),m.result===!1&&m.preventDefault());return m.type=Xe,!D&&!m.isDefaultPrevented()&&(!Ce._default||Ce._default.apply(Ae.pop(),k)===!1)&&dr(P)&&se&&b(P[Xe])&&!T(P)&&(K=P[se],K&&(P[se]=null),g.event.triggered=Xe,m.isPropagationStopped()&&Be.addEventListener(Xe,cf),P[Xe](),m.isPropagationStopped()&&Be.removeEventListener(Xe,cf),g.event.triggered=void 0,K&&(P[se]=K)),m.result}},simulate:function(m,k,P){var D=g.extend(new g.Event,P,{type:m,isSimulated:!0});g.event.trigger(D,null,k)}}),g.fn.extend({trigger:function(m,k){return this.each(function(){g.event.trigger(m,k,this)})},triggerHandler:function(m,k){var P=this[0];if(P)return g.event.trigger(m,k,P,!0)}});var Gx=/\[\]$/,sg=/\r?\n/g,Yx=/^(?:submit|button|image|reset|file)$/i,Zx=/^(?:input|select|textarea|keygen)/i;function og(m,k,P,D){var H;if(Array.isArray(k))g.each(k,function(U,K){P||Gx.test(m)?D(m,K):og(m+"["+(typeof K=="object"&&K!=null?U:"")+"]",K,P,D)});else if(!P&&I(k)==="object")for(H in k)og(m+"["+H+"]",k[H],P,D);else D(m,k)}g.param=function(m,k){var P,D=[],H=function(U,K){var ue=b(K)?K():K;D[D.length]=encodeURIComponent(U)+"="+encodeURIComponent(ue??"")};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!g.isPlainObject(m))g.each(m,function(){H(this.name,this.value)});else for(P in m)og(P,m[P],k,H);return D.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=g.prop(this,"elements");return m?g.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!g(this).is(":disabled")&&Zx.test(this.nodeName)&&!Yx.test(m)&&(this.checked||!Ma.test(m))}).map(function(m,k){var P=g(this).val();return P==null?null:Array.isArray(P)?g.map(P,function(D){return{name:k.name,value:D.replace(sg,`\r
`)}}):{name:k.name,value:P.replace(sg,`\r
`)}}).get()}});var Xx=/%20/g,ag=/#.*$/,Jx=/([?&])_=[^&]*/,Qx=/^(.*?):[ \t]*([^\r\n]*)$/mg,e2=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,t2=/^(?:GET|HEAD)$/,r2=/^\/\//,jr={},Pr={},Fb="*/".concat("*"),lg=_.createElement("a");lg.href=vo.href;function jb(m){return function(k,P){typeof k!="string"&&(P=k,k="*");var D,H=0,U=k.toLowerCase().match(N)||[];if(b(P))for(;D=U[H++];)D[0]==="+"?(D=D.slice(1)||"*",(m[D]=m[D]||[]).unshift(P)):(m[D]=m[D]||[]).push(P)}}function zb(m,k,P,D){var H={},U=m===Pr;function K(ue){var se;return H[ue]=!0,g.each(m[ue]||[],function(xe,Ce){var Be=Ce(k,P,D);if(typeof Be=="string"&&!U&&!H[Be])return k.dataTypes.unshift(Be),K(Be),!1;if(U)return!(se=Be)}),se}return K(k.dataTypes[0])||!H["*"]&&K("*")}function ug(m,k){var P,D,H=g.ajaxSettings.flatOptions||{};for(P in k)k[P]!==void 0&&((H[P]?m:D||(D={}))[P]=k[P]);return D&&g.extend(!0,m,D),m}function n2(m,k,P){for(var D,H,U,K,ue=m.contents,se=m.dataTypes;se[0]==="*";)se.shift(),D===void 0&&(D=m.mimeType||k.getResponseHeader("Content-Type"));if(D){for(H in ue)if(ue[H]&&ue[H].test(D)){se.unshift(H);break}}if(se[0]in P)U=se[0];else{for(H in P){if(!se[0]||m.converters[H+" "+se[0]]){U=H;break}K||(K=H)}U=U||K}if(U)return U!==se[0]&&se.unshift(U),P[U]}function Hb(m,k,P,D){var H,U,K,ue,se,xe={},Ce=m.dataTypes.slice();if(Ce[1])for(K in m.converters)xe[K.toLowerCase()]=m.converters[K];for(U=Ce.shift();U;)if(m.responseFields[U]&&(P[m.responseFields[U]]=k),!se&&D&&m.dataFilter&&(k=m.dataFilter(k,m.dataType)),se=U,U=Ce.shift(),U){if(U==="*")U=se;else if(se!=="*"&&se!==U){if(K=xe[se+" "+U]||xe["* "+U],!K){for(H in xe)if(ue=H.split(" "),ue[1]===U&&(K=xe[se+" "+ue[0]]||xe["* "+ue[0]],K)){K===!0?K=xe[H]:xe[H]!==!0&&(U=ue[0],Ce.unshift(ue[1]));break}}if(K!==!0)if(K&&m.throws)k=K(k);else try{k=K(k)}catch(Be){return{state:"parsererror",error:K?Be:"No conversion from "+se+" to "+U}}}}return{state:"success",data:k}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vo.href,type:"GET",isLocal:e2.test(vo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,k){return k?ug(ug(m,g.ajaxSettings),k):ug(g.ajaxSettings,m)},ajaxPrefilter:jb(jr),ajaxTransport:jb(Pr),ajax:function(m,k){typeof m=="object"&&(k=m,m=void 0),k=k||{};var P,D,H,U,K,ue,se,xe,Ce,Be,Ae=g.ajaxSetup({},k),Xe=Ae.context||Ae,bt=Ae.context&&(Xe.nodeType||Xe.jquery)?g(Xe):g.event,Yt=g.Deferred(),Gt=g.Callbacks("once memory"),Gn=Ae.statusCode||{},cn={},go={},yo="canceled",pr={readyState:0,getResponseHeader:function(vr){var Mr;if(se){if(!U)for(U={};Mr=Qx.exec(H);)U[Mr[1].toLowerCase()+" "]=(U[Mr[1].toLowerCase()+" "]||[]).concat(Mr[2]);Mr=U[vr.toLowerCase()+" "]}return Mr==null?null:Mr.join(", ")},getAllResponseHeaders:function(){return se?H:null},setRequestHeader:function(vr,Mr){return se==null&&(vr=go[vr.toLowerCase()]=go[vr.toLowerCase()]||vr,cn[vr]=Mr),this},overrideMimeType:function(vr){return se==null&&(Ae.mimeType=vr),this},statusCode:function(vr){var Mr;if(vr)if(se)pr.always(vr[pr.status]);else for(Mr in vr)Gn[Mr]=[Gn[Mr],vr[Mr]];return this},abort:function(vr){var Mr=vr||yo;return P&&P.abort(Mr),Ha(0,Mr),this}};if(Yt.promise(pr),Ae.url=((m||Ae.url||vo.href)+"").replace(r2,vo.protocol+"//"),Ae.type=k.method||k.type||Ae.method||Ae.type,Ae.dataTypes=(Ae.dataType||"*").toLowerCase().match(N)||[""],Ae.crossDomain==null){ue=_.createElement("a");try{ue.href=Ae.url,ue.href=ue.href,Ae.crossDomain=lg.protocol+"//"+lg.host!=ue.protocol+"//"+ue.host}catch{Ae.crossDomain=!0}}if(Ae.data&&Ae.processData&&typeof Ae.data!="string"&&(Ae.data=g.param(Ae.data,Ae.traditional)),zb(jr,Ae,k,pr),se)return pr;xe=g.event&&Ae.global,xe&&g.active++===0&&g.event.trigger("ajaxStart"),Ae.type=Ae.type.toUpperCase(),Ae.hasContent=!t2.test(Ae.type),D=Ae.url.replace(ag,""),Ae.hasContent?Ae.data&&Ae.processData&&(Ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ae.data=Ae.data.replace(Xx,"+")):(Be=Ae.url.slice(D.length),Ae.data&&(Ae.processData||typeof Ae.data=="string")&&(D+=(Bu.test(D)?"&":"?")+Ae.data,delete Ae.data),Ae.cache===!1&&(D=D.replace(Jx,"$1"),Be=(Bu.test(D)?"&":"?")+"_="+pd.guid+++Be),Ae.url=D+Be),Ae.ifModified&&(g.lastModified[D]&&pr.setRequestHeader("If-Modified-Since",g.lastModified[D]),g.etag[D]&&pr.setRequestHeader("If-None-Match",g.etag[D])),(Ae.data&&Ae.hasContent&&Ae.contentType!==!1||k.contentType)&&pr.setRequestHeader("Content-Type",Ae.contentType),pr.setRequestHeader("Accept",Ae.dataTypes[0]&&Ae.accepts[Ae.dataTypes[0]]?Ae.accepts[Ae.dataTypes[0]]+(Ae.dataTypes[0]!=="*"?", "+Fb+"; q=0.01":""):Ae.accepts["*"]);for(Ce in Ae.headers)pr.setRequestHeader(Ce,Ae.headers[Ce]);if(Ae.beforeSend&&(Ae.beforeSend.call(Xe,pr,Ae)===!1||se))return pr.abort();if(yo="abort",Gt.add(Ae.complete),pr.done(Ae.success),pr.fail(Ae.error),P=zb(Pr,Ae,k,pr),!P)Ha(-1,"No Transport");else{if(pr.readyState=1,xe&&bt.trigger("ajaxSend",[pr,Ae]),se)return pr;Ae.async&&Ae.timeout>0&&(K=r.setTimeout(function(){pr.abort("timeout")},Ae.timeout));try{se=!1,P.send(cn,Ha)}catch(vr){if(se)throw vr;Ha(-1,vr)}}function Ha(vr,Mr,ff,yd){var Ms,Al,vs,na,Ua,Bi=Mr;se||(se=!0,K&&r.clearTimeout(K),P=void 0,H=yd||"",pr.readyState=vr>0?4:0,Ms=vr>=200&&vr<300||vr===304,ff&&(na=n2(Ae,pr,ff)),!Ms&&g.inArray("script",Ae.dataTypes)>-1&&g.inArray("json",Ae.dataTypes)<0&&(Ae.converters["text script"]=function(){}),na=Hb(Ae,na,pr,Ms),Ms?(Ae.ifModified&&(Ua=pr.getResponseHeader("Last-Modified"),Ua&&(g.lastModified[D]=Ua),Ua=pr.getResponseHeader("etag"),Ua&&(g.etag[D]=Ua)),vr===204||Ae.type==="HEAD"?Bi="nocontent":vr===304?Bi="notmodified":(Bi=na.state,Al=na.data,vs=na.error,Ms=!vs)):(vs=Bi,(vr||!Bi)&&(Bi="error",vr<0&&(vr=0))),pr.status=vr,pr.statusText=(Mr||Bi)+"",Ms?Yt.resolveWith(Xe,[Al,Bi,pr]):Yt.rejectWith(Xe,[pr,Bi,vs]),pr.statusCode(Gn),Gn=void 0,xe&&bt.trigger(Ms?"ajaxSuccess":"ajaxError",[pr,Ae,Ms?Al:vs]),Gt.fireWith(Xe,[pr,Bi]),xe&&(bt.trigger("ajaxComplete",[pr,Ae]),--g.active||g.event.trigger("ajaxStop")))}return pr},getJSON:function(m,k,P){return g.get(m,k,P,"json")},getScript:function(m,k){return g.get(m,void 0,k,"script")}}),g.each(["get","post"],function(m,k){g[k]=function(P,D,H,U){return b(D)&&(U=U||H,H=D,D=void 0),g.ajax(g.extend({url:P,type:k,dataType:U,data:D,success:H},g.isPlainObject(P)&&P))}}),g.ajaxPrefilter(function(m){var k;for(k in m.headers)k.toLowerCase()==="content-type"&&(m.contentType=m.headers[k]||"")}),g._evalUrl=function(m,k,P){return g.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(D){g.globalEval(D,k,P)}})},g.fn.extend({wrapAll:function(m){var k;return this[0]&&(b(m)&&(m=m.call(this[0])),k=g(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(m){return b(m)?this.each(function(k){g(this).wrapInner(m.call(this,k))}):this.each(function(){var k=g(this),P=k.contents();P.length?P.wrapAll(m):k.append(m)})},wrap:function(m){var k=b(m);return this.each(function(P){g(this).wrapAll(k?m.call(this,P):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(m){return!g.expr.pseudos.visible(m)},g.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var i2={0:200,1223:204},un=g.ajaxSettings.xhr();w.cors=!!un&&"withCredentials"in un,w.ajax=un=!!un,g.ajaxTransport(function(m){var k,P;if(w.cors||un&&!m.crossDomain)return{send:function(D,H){var U,K=m.xhr();if(K.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(U in m.xhrFields)K[U]=m.xhrFields[U];m.mimeType&&K.overrideMimeType&&K.overrideMimeType(m.mimeType),!m.crossDomain&&!D["X-Requested-With"]&&(D["X-Requested-With"]="XMLHttpRequest");for(U in D)K.setRequestHeader(U,D[U]);k=function(ue){return function(){k&&(k=P=K.onload=K.onerror=K.onabort=K.ontimeout=K.onreadystatechange=null,ue==="abort"?K.abort():ue==="error"?typeof K.status!="number"?H(0,"error"):H(K.status,K.statusText):H(i2[K.status]||K.status,K.statusText,(K.responseType||"text")!=="text"||typeof K.responseText!="string"?{binary:K.response}:{text:K.responseText},K.getAllResponseHeaders()))}},K.onload=k(),P=K.onerror=K.ontimeout=k("error"),K.onabort!==void 0?K.onabort=P:K.onreadystatechange=function(){K.readyState===4&&r.setTimeout(function(){k&&P()})},k=k("abort");try{K.send(m.hasContent&&m.data||null)}catch(ue){if(k)throw ue}},abort:function(){k&&k()}}}),g.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return g.globalEval(m),m}}}),g.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),g.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var k,P;return{send:function(D,H){k=g("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",P=function(U){k.remove(),P=null,U&&H(U.type==="error"?404:200,U.type)}),_.head.appendChild(k[0])},abort:function(){P&&P()}}}});var gd=[],ra=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=gd.pop()||g.expando+"_"+pd.guid++;return this[m]=!0,m}}),g.ajaxPrefilter("json jsonp",function(m,k,P){var D,H,U,K=m.jsonp!==!1&&(ra.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ra.test(m.data)&&"data");if(K||m.dataTypes[0]==="jsonp")return D=m.jsonpCallback=b(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,K?m[K]=m[K].replace(ra,"$1"+D):m.jsonp!==!1&&(m.url+=(Bu.test(m.url)?"&":"?")+m.jsonp+"="+D),m.converters["script json"]=function(){return U||g.error(D+" was not called"),U[0]},m.dataTypes[0]="json",H=r[D],r[D]=function(){U=arguments},P.always(function(){H===void 0?g(r).removeProp(D):r[D]=H,m[D]&&(m.jsonpCallback=k.jsonpCallback,gd.push(D)),U&&b(H)&&H(U[0]),U=H=void 0}),"script"}),w.createHTMLDocument=function(){var m=_.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),g.parseHTML=function(m,k,P){if(typeof m!="string")return[];typeof k=="boolean"&&(P=k,k=!1);var D,H,U;return k||(w.createHTMLDocument?(k=_.implementation.createHTMLDocument(""),D=k.createElement("base"),D.href=_.location.href,k.head.appendChild(D)):k=_),H=Ve.exec(m),U=!P&&[],H?[k.createElement(H[1])]:(H=nd([m],k,U),U&&U.length&&g(U).remove(),g.merge([],H.childNodes))},g.fn.load=function(m,k,P){var D,H,U,K=this,ue=m.indexOf(" ");return ue>-1&&(D=ln(m.slice(ue)),m=m.slice(0,ue)),b(k)?(P=k,k=void 0):k&&typeof k=="object"&&(H="POST"),K.length>0&&g.ajax({url:m,type:H||"GET",dataType:"html",data:k}).done(function(se){U=arguments,K.html(D?g("<div>").append(g.parseHTML(se)).find(D):se)}).always(P&&function(se,xe){K.each(function(){P.apply(this,U||[se.responseText,xe,se])})}),this},g.expr.pseudos.animated=function(m){return g.grep(g.timers,function(k){return m===k.elem}).length},g.offset={setOffset:function(m,k,P){var D,H,U,K,ue,se,xe,Ce=g.css(m,"position"),Be=g(m),Ae={};Ce==="static"&&(m.style.position="relative"),ue=Be.offset(),U=g.css(m,"top"),se=g.css(m,"left"),xe=(Ce==="absolute"||Ce==="fixed")&&(U+se).indexOf("auto")>-1,xe?(D=Be.position(),K=D.top,H=D.left):(K=parseFloat(U)||0,H=parseFloat(se)||0),b(k)&&(k=k.call(m,P,g.extend({},ue))),k.top!=null&&(Ae.top=k.top-ue.top+K),k.left!=null&&(Ae.left=k.left-ue.left+H),"using"in k?k.using.call(m,Ae):Be.css(Ae)}},g.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(H){g.offset.setOffset(this,m,H)});var k,P,D=this[0];if(D)return D.getClientRects().length?(k=D.getBoundingClientRect(),P=D.ownerDocument.defaultView,{top:k.top+P.pageYOffset,left:k.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var m,k,P,D=this[0],H={top:0,left:0};if(g.css(D,"position")==="fixed")k=D.getBoundingClientRect();else{for(k=this.offset(),P=D.ownerDocument,m=D.offsetParent||P.documentElement;m&&(m===P.body||m===P.documentElement)&&g.css(m,"position")==="static";)m=m.parentNode;m&&m!==D&&m.nodeType===1&&(H=g(m).offset(),H.top+=g.css(m,"borderTopWidth",!0),H.left+=g.css(m,"borderLeftWidth",!0))}return{top:k.top-H.top-g.css(D,"marginTop",!0),left:k.left-H.left-g.css(D,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&g.css(m,"position")==="static";)m=m.offsetParent;return m||qi})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,k){var P=k==="pageYOffset";g.fn[m]=function(D){return st(this,function(H,U,K){var ue;if(T(H)?ue=H:H.nodeType===9&&(ue=H.defaultView),K===void 0)return ue?ue[k]:H[U];ue?ue.scrollTo(P?ue.pageXOffset:K,P?K:ue.pageYOffset):H[U]=K},m,D,arguments.length)}}),g.each(["top","left"],function(m,k){g.cssHooks[k]=Bs(w.pixelPosition,function(P,D){if(D)return D=ja(P,k),of.test(D)?g(P).position()[k]+"px":D})}),g.each({Height:"height",Width:"width"},function(m,k){g.each({padding:"inner"+m,content:k,"":"outer"+m},function(P,D){g.fn[D]=function(H,U){var K=arguments.length&&(P||typeof H!="boolean"),ue=P||(H===!0||U===!0?"margin":"border");return st(this,function(se,xe,Ce){var Be;return T(se)?D.indexOf("outer")===0?se["inner"+m]:se.document.documentElement["client"+m]:se.nodeType===9?(Be=se.documentElement,Math.max(se.body["scroll"+m],Be["scroll"+m],se.body["offset"+m],Be["offset"+m],Be["client"+m])):Ce===void 0?g.css(se,xe,ue):g.style(se,xe,Ce,ue)},k,K?H:void 0,K)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,k){g.fn[k]=function(P){return this.on(k,P)}}),g.fn.extend({bind:function(m,k,P){return this.on(m,null,k,P)},unbind:function(m,k){return this.off(m,null,k)},delegate:function(m,k,P,D){return this.on(k,m,P,D)},undelegate:function(m,k,P){return arguments.length===1?this.off(m,"**"):this.off(k,m||"**",P)},hover:function(m,k){return this.mouseenter(m).mouseleave(k||m)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,k){g.fn[k]=function(P,D){return arguments.length>0?this.on(k,null,P,D):this.trigger(k)}});var Ub=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(m,k){var P,D,H;if(typeof k=="string"&&(P=m[k],k=m,m=P),!!b(m))return D=s.call(arguments,2),H=function(){return m.apply(k||this,D.concat(s.call(arguments)))},H.guid=m.guid=m.guid||g.guid++,H},g.holdReady=function(m){m?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=B,g.isFunction=b,g.isWindow=T,g.camelCase=Rt,g.type=I,g.now=Date.now,g.isNumeric=function(m){var k=g.type(m);return(k==="number"||k==="string")&&!isNaN(m-parseFloat(m))},g.trim=function(m){return m==null?"":(m+"").replace(Ub,"$1")};var cg=r.jQuery,ps=r.$;return g.noConflict=function(m){return r.$===g&&(r.$=ps),m&&r.jQuery===g&&(r.jQuery=cg),g},typeof t>"u"&&(r.jQuery=r.$=g),g})})(rW);var Kpe=rW.exports;const Jt=ro(Kpe);function Vpe(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var xm=Vpe,Gpe=typeof On=="object"&&On&&On.Object===Object&&On,nW=Gpe,Ype=nW,Zpe=typeof self=="object"&&self&&self.Object===Object&&self,Xpe=Ype||Zpe||Function("return this")(),$l=Xpe,Jpe=$l,Qpe=function(){return Jpe.Date.now()},eve=Qpe,tve=/\s/;function rve(e){for(var r=e.length;r--&&tve.test(e.charAt(r)););return r}var nve=rve,ive=nve,sve=/^\s+/;function ove(e){return e&&e.slice(0,ive(e)+1).replace(sve,"")}var ave=ove,lve=$l,uve=lve.Symbol,X3=uve,_B=X3,iW=Object.prototype,cve=iW.hasOwnProperty,fve=iW.toString,Pg=_B?_B.toStringTag:void 0;function hve(e){var r=cve.call(e,Pg),t=e[Pg];try{e[Pg]=void 0;var n=!0}catch{}var i=fve.call(e);return n&&(r?e[Pg]=t:delete e[Pg]),i}var dve=hve,pve=Object.prototype,vve=pve.toString;function gve(e){return vve.call(e)}var yve=gve,xB=X3,mve=dve,bve=yve,wve="[object Null]",$ve="[object Undefined]",EB=xB?xB.toStringTag:void 0;function _ve(e){return e==null?e===void 0?$ve:wve:EB&&EB in Object(e)?mve(e):bve(e)}var Em=_ve;function xve(e){return e!=null&&typeof e=="object"}var Sm=xve,Eve=Em,Sve=Sm,kve="[object Symbol]";function Tve(e){return typeof e=="symbol"||Sve(e)&&Eve(e)==kve}var Ive=Tve,Ave=ave,SB=xm,Ove=Ive,kB=0/0,Cve=/^[-+]0x[0-9a-f]+$/i,Pve=/^0b[01]+$/i,Nve=/^0o[0-7]+$/i,Rve=parseInt;function Dve(e){if(typeof e=="number")return e;if(Ove(e))return kB;if(SB(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=SB(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Ave(e);var t=Pve.test(e);return t||Nve.test(e)?Rve(e.slice(2),t?2:8):Cve.test(e)?kB:+e}var Bve=Dve,Mve=xm,mE=eve,TB=Bve,Lve="Expected a function",Fve=Math.max,jve=Math.min;function zve(e,r,t){var n,i,s,o,a,l,u=0,f=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(Lve);r=TB(r)||0,Mve(t)&&(f=!!t.leading,c="maxWait"in t,s=c?Fve(TB(t.maxWait)||0,r):s,d="trailing"in t?!!t.trailing:d);function y(C){var g=n,M=i;return n=i=void 0,u=C,o=e.apply(M,g),o}function w(C){return u=C,a=setTimeout(_,r),f?y(C):o}function b(C){var g=C-l,M=C-u,B=r-g;return c?jve(B,s-M):B}function T(C){var g=C-l,M=C-u;return l===void 0||g>=r||g<0||c&&M>=s}function _(){var C=mE();if(T(C))return A(C);a=setTimeout(_,b(C))}function A(C){return a=void 0,d&&n?y(C):(n=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,n=l=i=a=void 0}function I(){return a===void 0?o:A(mE())}function O(){var C=mE(),g=T(C);if(n=arguments,i=this,l=C,g){if(a===void 0)return w(l);if(c)return clearTimeout(a),a=setTimeout(_,r),y(l)}return a===void 0&&(a=setTimeout(_,r)),o}return O.cancel=x,O.flush=I,O}var Hve=zve,Uve=Hve,Wve=xm,qve="Expected a function";function Kve(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(qve);return Wve(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),Uve(e,r,{leading:n,maxWait:r,trailing:i})}var Vve=Kve;const $_=ro(Vve);var sW={exports:{}},bE={exports:{}},IB;function Gve(){return IB||(IB=1,function(e,r){(function(t,n){e.exports=n()})(On,function(){return function(){function t(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},t.prototype.loadDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.loadDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){if(typeof s=="function"){if(l.id===0){s(null);return}s(l.val)}else console.log(l.val)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(i,s,o){var a=this.app,l=this;function u(f){f&&f.success===!0?o(null):o(new Error("Error saving database")),l.options.closeAfterSave&&l.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(f){l.saveDatabase(i,s,u)});return}this.catalog.setAppKey(a,i,s,u)},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(i,s){var o=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(l){a.catalog=l,a.deleteDatabase(i,s)});return}this.catalog.getAppKey(o,i,function(l){var u=l.id;u!==0?a.catalog.deleteAppKey(u,s):typeof s=="function"&&s({success:!0})})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(o){o.forEach(function(a){a.startsWith(i)&&s.deleteDatabase(a)})})},t.prototype.getDatabaseList=function(i){var s=this.app,o=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(a){o.catalog=a,o.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(a){for(var l=[],u=0;u<a.length;u++)l.push(a[u].key);typeof i=="function"?i(l):l.forEach(function(f){console.log(f)})})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new n(function(o){s.catalog=o,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(o){for(var a=[],l,u,f,c,d,y=0;y<o.length;y++)l=o[y],f=l.app||"",c=l.key||"",d=l.val||"",u=f.length*2+c.length*2+d.length+1,a.push({app:l.app,key:l.key,size:u});typeof i=="function"?i(a):a.forEach(function(w){console.log(w)})})};function n(i){this.db=null,this.initializeLokiCatalog(i)}return n.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),o=this;s.onupgradeneeded=function(a){var l=a.target.result;if(l.objectStoreNames.contains("LokiAKV")&&l.deleteObjectStore("LokiAKV"),!l.objectStoreNames.contains("LokiAKV")){var u=l.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});u.createIndex("app","app",{unique:!1}),u.createIndex("key","key",{unique:!1}),u.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(a){o.db=a.target.result,typeof i=="function"&&i(o)},s.onerror=function(a){throw a}},n.prototype.getAppKey=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.index("appkey"),f=i+","+s,c=u.get(f);c.onsuccess=function(d){return function(y){var w=y.target.result;(w===null||typeof w>"u")&&(w={id:0,success:!1}),typeof d=="function"?d(w):console.log(w)}}(o),c.onerror=function(d){return function(y){if(typeof d=="function")d({id:0,success:!1});else throw y}}(o)},n.prototype.getAppKeyById=function(i,s,o){var a=this.db.transaction(["LokiAKV"],"readonly"),l=a.objectStore("LokiAKV"),u=l.get(i);u.onsuccess=function(f,c){return function(d){typeof c=="function"?c(d.target.result,f):console.log(d.target.result)}}(o,s)},n.prototype.setAppKey=function(i,s,o,a){var l=this.db.transaction(["LokiAKV"],"readwrite"),u=l.objectStore("LokiAKV"),f=u.index("appkey"),c=i+","+s,d=f.get(c);d.onsuccess=function(y){var w=y.target.result;w==null?w={app:i,key:s,appkey:i+","+s,val:o}:w.val=o;var b=u.put(w);b.onerror=function(T){return function(_){typeof T=="function"?T({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(d.error))}}(a),b.onsuccess=function(T){return function(_){typeof T=="function"&&T({success:!0})}}(a)},d.onerror=function(y){return function(w){typeof y=="function"?y({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(d.error))}}(a)},n.prototype.deleteAppKey=function(i,s){var o=this.db.transaction(["LokiAKV"],"readwrite"),a=o.objectStore("LokiAKV"),l=a.delete(i);l.onsuccess=function(u){return function(f){typeof u=="function"&&u({success:!0})}}(s),l.onerror=function(u){return function(f){typeof u=="function"?u({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(l.error))}}(s)},n.prototype.getAppKeys=function(i,s){var o=this.db.transaction(["LokiAKV"],"readonly"),a=o.objectStore("LokiAKV"),l=a.index("app"),u=IDBKeyRange.only(i),f=l.openCursor(u),c=[];f.onsuccess=function(d,y){return function(w){var b=w.target.result;if(b){var T=b.value;d.push(T),b.continue()}else typeof y=="function"?y(d):console.log(d)}}(c,s),f.onerror=function(d){return function(y){typeof d=="function"?d(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(y))}}(s)},n.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),o=s.objectStore("LokiAKV"),a=o.openCursor(),l=[];a.onsuccess=function(u,f){return function(c){var d=c.target.result;if(d){var y=d.value;u.push(y),d.continue()}else typeof f=="function"?f(u):console.log(u)}}(l,i),a.onerror=function(u){return function(f){typeof u=="function"&&u(null)}}(i)},t}()})}(bE)),bE.exports}const Yve={},Zve=Object.freeze(Object.defineProperty({__proto__:null,default:Yve},Symbol.toStringTag,{value:"Module"})),Xve=fv(Zve);(function(e,r){(function(t,n){e.exports=n()})(On,function(){return function(){var t=Object.prototype.hasOwnProperty;function n($){var S,N;if(Array.isArray($)){for(N=0;N<$.length;N++)n($[N]);i($)}else if($!==null&&typeof $=="object"){for(S in $)$.hasOwnProperty(S)&&n($[S]);i($)}}function i($){Object.isFrozen($)||Object.freeze($)}function s($){return Object.isFrozen($)?x($,"shallow"):$}var o={copyProperties:function($,S){var N;for(N in $)S[N]=$[N]},resolveTransformObject:function($,S,N){var F,z;if(typeof N!="number"&&(N=0),++N>=10)return $;for(F in $)typeof $[F]=="string"&&$[F].indexOf("[%lktxp]")===0?(z=$[F].substring(8),S.hasOwnProperty(z)&&($[F]=S[z])):typeof $[F]=="object"&&($[F]=o.resolveTransformObject($[F],S,N));return $},resolveTransformParams:function($,S){var N,F,z=[];if(typeof S>"u")return $;for(N=0;N<$.length;N++)F=x($[N],"shallow-recurse-objects"),z.push(o.resolveTransformObject(F,S));return z},getIn:function($,S,N){if($!=null){if(!N)return $[S];if(typeof S=="string"&&(S=S.split(".")),!Array.isArray(S))throw new Error("path must be a string or array. Found "+typeof S);for(var F=0,z=S.length;$!=null&&F<z;)$=$[S[F++]];return F&&F==z?$:void 0}}},a={aeq:l,lt:u,gt:f};function l($,S){var N,F,z,V;if($===S)return!0;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:z=1;break;case null:z=1;break;case!1:z=3;break;case!0:z=4;break;case"":z=5;break;default:z=$===$?9:0;break}switch(S){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=S===S?9:0;break}if(z!==9||V!==9)return z===V}return N=Number($),F=Number(S),N===N||F===F?N===F:(N=$.toString(),F=S.toString(),N==F)}function u($,S,N){var F,z,V,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(V!==9||ae!==9)return V===ae?N:V<ae}return F=Number($),z=Number(S),F===F&&z===z?F<z?!0:F>z?!1:N:F===F&&z!==z?!0:z===z&&F!==F?!1:$<S?!0:$>S?!1:$==S?N:(F=$.toString(),z=S.toString(),F<z?!0:F==z?N:!1)}function f($,S,N){var F,z,V,ae;if(!$||!S||$===!0||S===!0||$!==$||S!==S){switch($){case void 0:V=1;break;case null:V=1;break;case!1:V=3;break;case!0:V=4;break;case"":V=5;break;default:V=$===$?9:0;break}switch(S){case void 0:ae=1;break;case null:ae=1;break;case!1:ae=3;break;case!0:ae=4;break;case"":ae=5;break;default:ae=S===S?9:0;break}if(V!==9||ae!==9)return V===ae?N:V>ae}return F=Number($),z=Number(S),F===F&&z===z?F>z?!0:F<z?!1:N:F===F&&z!==z?!1:z===z&&F!==F||$>S?!0:$<S?!1:$==S?N:(F=$.toString(),z=S.toString(),F>z?!0:F==z?N:!1)}function c($,S,N){return a.aeq($,S)?0:a.lt($,S,!1)?N?1:-1:a.gt($,S,!1)?N?-1:1:0}function d($,S,N){for(var F=0,z,V,ae,ye,Ue,ze=0,st=$.length;ze<st;ze++)if(z=$[ze],V=z[0],~V.indexOf(".")?(Ue=V.split("."),ae=o.getIn(S,Ue,!0),ye=o.getIn(N,Ue,!0)):(ae=S[V],ye=N[V]),F=c(ae,ye,z[1]),F!==0)return F;return 0}function y($,S,N,F,z,V){var ae=V||0,ye=S[ae],Ue=!1,ze;if(typeof $=="object"&&ye in $&&(ze=$[ye]),ae+1>=S.length)Ue=N(ze,F,z);else if(Array.isArray(ze))for(var st=0,wt=ze.length;st<wt&&(Ue=y(ze[st],S,N,F,z,ae+1),Ue!==!0);st+=1);else Ue=y(ze,S,N,F,z,ae+1);return Ue}function w($){return typeof $=="string"||Array.isArray($)?function(S){return $.indexOf(S)!==-1}:typeof $=="object"&&$!==null?function(S){return t.call($,S)}:null}function b($,S,N){for(var F in S)if(t.call(S,F))return T[F]($,S[F],N);return!1}var T={$eq:function($,S){return $===S},$aeq:function($,S){return $==S},$ne:function($,S){return S!==S?$===$:$!==S},$dteq:function($,S){return a.aeq($,S)},$gt:function($,S){return a.gt($,S,!1)},$gte:function($,S){return a.gt($,S,!0)},$lt:function($,S){return a.lt($,S,!1)},$lte:function($,S){return a.lt($,S,!0)},$jgt:function($,S){return $>S},$jgte:function($,S){return $>=S},$jlt:function($,S){return $<S},$jlte:function($,S){return $<=S},$between:function($,S){return $==null?!1:a.gt($,S[0],!0)&&a.lt($,S[1],!0)},$jbetween:function($,S){return $==null?!1:$>=S[0]&&$<=S[1]},$in:function($,S){return S.indexOf($)!==-1},$inSet:function($,S){return S.has($)},$nin:function($,S){return S.indexOf($)===-1},$keyin:function($,S){return $ in S},$nkeyin:function($,S){return!($ in S)},$definedin:function($,S){return S[$]!==void 0},$undefinedin:function($,S){return S[$]===void 0},$regex:function($,S){return S.test($)},$containsString:function($,S){return typeof $=="string"&&$.indexOf(S)!==-1},$containsNone:function($,S){return!T.$containsAny($,S)},$containsAny:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.some(N):N(S):!1},$contains:function($,S){var N=w($);return N!==null?Array.isArray(S)?S.every(N):N(S):!1},$elemMatch:function($,S){return Array.isArray($)?$.some(function(N){return Object.keys(S).every(function(F){var z=S[F];return typeof z=="object"&&z||(z={$eq:z}),F.indexOf(".")!==-1?y(N,F.split("."),b,S[F],N):b(N[F],z,N)})}):!1},$type:function($,S,N){var F=typeof $;return F==="object"&&(Array.isArray($)?F="array":$ instanceof Date&&(F="date")),typeof S!="object"?F===S:b(F,S,N)},$finite:function($,S){return S===isFinite($)},$size:function($,S,N){return Array.isArray($)?typeof S!="object"?$.length===S:b($.length,S,N):!1},$len:function($,S,N){return typeof $=="string"?typeof S!="object"?$.length===S:b($.length,S,N):!1},$where:function($,S){return S($)===!0},$not:function($,S,N){return!b($,S,N)},$and:function($,S,N){for(var F=0,z=S.length;F<z;F+=1)if(!b($,S[F],N))return!1;return!0},$or:function($,S,N){for(var F=0,z=S.length;F<z;F+=1)if(b($,S[F],N))return!0;return!1},$exists:function($,S){return S?$!==void 0:$===void 0}},_=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];_.forEach(function($){var S=T[$];T["$"+$]=function(N,F,z){if(typeof F=="string")return S(N,z[F]);if(typeof F=="function")return S(N,F(z));throw new Error("Invalid argument to $$ matcher")}});var A={$eq:T.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function x($,S){if($==null)return null;var N=S||"parse-stringify",F;switch(N){case"parse-stringify":F=JSON.parse(JSON.stringify($));break;case"jquery-extend-deep":F=jQuery.extend(!0,{},$);break;case"shallow":F=Object.create($.constructor.prototype),Object.keys($).map(function(V){F[V]=$[V]});break;case"shallow-assign":F=Object.create($.constructor.prototype),Object.assign(F,$);break;case"shallow-recurse-objects":F=x($,"shallow");var z=Object.keys($);z.forEach(function(V){typeof $[V]=="object"&&$[V].constructor.name==="Object"?F[V]=x($[V],"shallow-recurse-objects"):Array.isArray($[V])&&(F[V]=I($[V],"shallow-recurse-objects"))});break}return F}function I($,S){if(S=="parse-stringify")return x($,S);for(var N=[],F=0,z=$.length;F<z;F++)N[F]=x($[F],S);return N}function O(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function C(){}C.prototype.events={},C.prototype.asyncListeners=!1,C.prototype.on=function($,S){var N,F=this;return Array.isArray($)?($.forEach(function(z){F.on(z,S)}),S):(N=this.events[$],N||(N=this.events[$]=[]),N.push(S),S)},C.prototype.emit=function($){var S=this,N;if($&&this.events[$])this.events[$].length&&(N=Array.prototype.slice.call(arguments,1),this.events[$].forEach(function(F){S.asyncListeners?setTimeout(function(){F.apply(S,N)},1):F.apply(S,N)}));else throw new Error("No event "+$+" defined")},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function($,S){var N=this;if(Array.isArray($)){$.forEach(function(z){N.removeListener(z,S)});return}if(this.events[$]){var F=this.events[$];F.splice(F.indexOf(S),1)}};function g($,S){this.filename=$||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=S&&S.hasOwnProperty("verbose")?S.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var N=function(){return typeof On<"u"&&(On.android||On.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof On<"u"&&On.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};S&&S.hasOwnProperty("env")?this.ENV=S.env:this.ENV=N(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(S,!0),this.on("init",this.clearChanges)}g.prototype=new C,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){var $;return typeof Wg=="function"&&($=Gve()),$},g.prototype.configureOptions=function($,S){var N={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},F={fs:L,localStorage:q,memory:M};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof $<"u"){if(this.options=$,this.options.hasOwnProperty("persistenceMethod")&&typeof F[$.persistenceMethod]=="function"&&(this.persistenceMethod=$.persistenceMethod,this.persistenceAdapter=new F[$.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=$.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),$.autoload&&S){var z=this;setTimeout(function(){z.loadDatabase($,$.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable($,$.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=N[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new F[this.persistenceMethod]))},g.prototype.copy=function($){var S=new g(this.filename,{env:"NA"}),N,F;if($=$||{},S.loadJSONObject(this,{retainDirtyFlags:!0}),$.hasOwnProperty("removeNonSerializable")&&$.removeNonSerializable===!0)for(S.autosaveHandle=null,S.persistenceAdapter=null,N=S.collections.length,F=0;F<N;F++)S.collections[F].constraints=null,S.collections[F].ttl=null;return S},g.prototype.addCollection=function($,S){var N,F=this.collections.length;if(S&&S.disableMeta===!0){if(S.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(S.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof S.ttl=="number"&&S.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(N=0;N<F;N+=1)if(this.collections[N].name===$)return this.collections[N];var z=new j($,S);return z.isIncremental=this.isIncremental,this.collections.push(z),this.verbose&&(z.lokiConsoleWrapper=console),z},g.prototype.loadCollection=function($){if(!$.name)throw new Error("Collection must have a name property to be loaded");this.collections.push($)},g.prototype.getCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$)return this.collections[S];return this.emit("warning","collection "+$+" not found"),null},g.prototype.renameCollection=function($,S){var N=this.getCollection($);return N&&(N.name=S),N},g.prototype.listCollections=function(){for(var $=this.collections.length,S=[];$--;)S.push({name:this.collections[$].name,type:this.collections[$].objType,count:this.collections[$].data.length});return S},g.prototype.removeCollection=function($){var S,N=this.collections.length;for(S=0;S<N;S+=1)if(this.collections[S].name===$){var F=new j($,{}),z=this.collections[S];for(var V in z)z.hasOwnProperty(V)&&F.hasOwnProperty(V)&&(z[V]=F[V]);this.collections.splice(S,1);return}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function($,S){switch($){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return S}},g.prototype.serialize=function($){switch($=$||{},$.hasOwnProperty("serializationMethod")||($.serializationMethod=this.options.serializationMethod),$.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function($){var S,N,F,z,V=[],ae;if($=$||{},$.hasOwnProperty("partitioned")||($.partitioned=!1),$.hasOwnProperty("delimited")||($.delimited=!0),$.hasOwnProperty("delimiter")||($.delimiter=this.options.destructureDelimiter),$.partitioned===!0&&$.hasOwnProperty("partition")&&$.partition>=0)return this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:$.partition});for(ae=new g(this.filename),ae.loadJSONObject(this),S=0;S<ae.collections.length;S++)ae.collections[S].data=[];if($.partitioned===!0&&$.partition===-1)return ae.serialize({serializationMethod:"normal"});for(V.push(ae.serialize({serializationMethod:"normal"})),ae=null,S=0;S<this.collections.length;S++)if(F=this.serializeCollection({delimited:$.delimited,delimiter:$.delimiter,collectionIndex:S}),$.partitioned===!1&&$.delimited===!1){if(!Array.isArray(F))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(z=F.length,N=0;N<z;N++)V.push(F[N]),F[N]=null;V.push("")}else V.push(F);return $.partitioned?($.delimited,V):$.delimited?(V.push(""),V.join($.delimiter)):(V.push(""),V)},g.prototype.serializeCollection=function($){var S,N,F=[];if($=$||{},$.hasOwnProperty("delimited")||($.delimited=!0),!$.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(S=this.collections[$.collectionIndex].data.length,F=[],N=0;N<S;N++)F.push(JSON.stringify(this.collections[$.collectionIndex].data[N]));return $.delimited?(F.push(""),F.join($.delimiter)):F},g.prototype.deserializeDestructured=function($,S){var N=[],F,z,V=0,ae,ye=1,Ue=!1,ze;if(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.partitioned){if(S.hasOwnProperty("partition"))return S.partition===-1?(z=JSON.parse($[0]),z):this.deserializeCollection($[S.partition+1],S);for(z=JSON.parse($[0]),ae=z.collections.length,V=0;V<ae;V++)z.collections[V].data=this.deserializeCollection($[V+1],S);return z}if(S.delimited){if(N=$.split(S.delimiter),$=null,F=N.length,F===0)return null}else N=$;for(z=JSON.parse(N[0]),ae=z.collections.length,N[0]=null;!Ue;)N[ye],N[ye]===""?++V>ae&&(Ue=!0):(ze=JSON.parse(N[ye]),z.collections[V].data.push(ze)),N[ye++]=null;return z},g.prototype.deserializeCollection=function($,S){var N=[],F,z;for(S=S||{},S.hasOwnProperty("partitioned")||(S.partitioned=!1),S.hasOwnProperty("delimited")||(S.delimited=!0),S.hasOwnProperty("delimiter")||(S.delimiter=this.options.destructureDelimiter),S.delimited?(N=$.split(S.delimiter),N.pop()):N=$,z=N.length,F=0;F<z;F++)N[F]=JSON.parse(N[F]);return N},g.prototype.loadJSON=function($,S){var N;if($.length===0)N={};else switch(this.options.serializationMethod){case"normal":case"pretty":N=JSON.parse($);break;case"destructured":N=this.deserializeDestructured($);break;default:N=JSON.parse($);break}this.loadJSONObject(N,S)},g.prototype.loadJSONObject=function($,S){var N=0,F=$.collections?$.collections.length:0,z,V,ae,ye,Ue,ze;this.name=$.name,$.hasOwnProperty("throttledSaves")&&S&&!S.hasOwnProperty("throttledSaves")&&(this.throttledSaves=$.throttledSaves),this.collections=[];function st(Rt){var dr=S[Rt.name],Vr;return dr.proto?(Vr=dr.inflate||o.copyProperties,function(ct){var It=new dr.proto;return Vr(ct,It),It}):dr.inflate}for(N;N<F;N+=1){if(z=$.collections[N],V=this.addCollection(z.name,{disableChangesApi:z.disableChangesApi,disableDeltaChangesApi:z.disableDeltaChangesApi,disableMeta:z.disableMeta,disableFreeze:z.hasOwnProperty("disableFreeze")?z.disableFreeze:!0}),V.adaptiveBinaryIndices=z.hasOwnProperty("adaptiveBinaryIndices")?z.adaptiveBinaryIndices===!0:!1,V.transactional=z.transactional,V.asyncListeners=z.asyncListeners,V.cloneObjects=z.cloneObjects,V.cloneMethod=z.cloneMethod||"parse-stringify",V.autoupdate=z.autoupdate,V.changes=z.changes,V.dirtyIds=z.dirtyIds||[],S&&S.retainDirtyFlags===!0?V.dirty=z.dirty:V.dirty=!1,ae=z.data.length,ye=0,S&&S.hasOwnProperty(z.name))for(Ue=st(z),ye;ye<ae;ye++)ze=Ue(z.data[ye]),V.data[ye]=ze,V.addAutoUpdateObserver(ze),V.disableFreeze||n(V.data[ye]);else for(ye;ye<ae;ye++)V.data[ye]=z.data[ye],V.addAutoUpdateObserver(V.data[ye]),V.disableFreeze||n(V.data[ye]);if(V.maxId=typeof z.maxId>"u"?0:z.maxId,typeof z.binaryIndices<"u"&&(V.binaryIndices=z.binaryIndices),typeof z.transforms<"u"&&(V.transforms=z.transforms),V.uniqueNames=[],z.hasOwnProperty("uniqueNames")&&(V.uniqueNames=z.uniqueNames),!(typeof z.DynamicViews>"u")){for(var wt=0;wt<z.DynamicViews.length;wt++){var mt=z.DynamicViews[wt],pt=V.addDynamicView(mt.name,mt.options);pt.resultdata=mt.resultdata,pt.resultsdirty=mt.resultsdirty,pt.filterPipeline=mt.filterPipeline,pt.sortCriteriaSimple=mt.sortCriteriaSimple,pt.sortCriteria=mt.sortCriteria,pt.sortFunction=null,pt.sortDirty=mt.sortDirty,V.disableFreeze||(n(pt.filterPipeline),pt.sortCriteriaSimple?n(pt.sortCriteriaSimple):pt.sortCriteria&&n(pt.sortCriteria)),pt.resultset.filteredrows=mt.resultset.filteredrows,pt.resultset.filterInitialized=mt.resultset.filterInitialized,pt.rematerialize({removeWhereFilters:!0})}$.databaseVersion<1.5&&(V.ensureAllIndexes(!0),V.dirty=!0)}}},g.prototype.close=function($){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase($),$=void 0)),$&&this.on("close",$),this.emit("close")},g.prototype.generateChangesNotification=function($){function S(z){return z.name}var N=[],F=$||this.collections.map(S);return this.collections.forEach(function(z){F.indexOf(S(z))!==-1&&(N=N.concat(z.getChanges()))}),N},g.prototype.serializeChanges=function($){return JSON.stringify(this.generateChangesNotification($))},g.prototype.clearChanges=function(){this.collections.forEach(function($){$.flushChanges&&$.flushChanges()})};function M($){this.hashStore={},this.options=$||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}M.prototype.loadDatabase=function($,S){var N=this;this.options.asyncResponses?setTimeout(function(){N.hashStore.hasOwnProperty($)?S(N.hashStore[$].value):S(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty($)?S(this.hashStore[$].value):S(null)},M.prototype.saveDatabase=function($,S,N){var F=this,z;this.options.asyncResponses?setTimeout(function(){z=F.hashStore.hasOwnProperty($)?F.hashStore[$].savecount:0,F.hashStore[$]={savecount:z+1,lastsave:new Date,value:S},N()},this.options.asyncTimeout):(z=this.hashStore.hasOwnProperty($)?this.hashStore[$].savecount:0,this.hashStore[$]={savecount:z+1,lastsave:new Date,value:S},N())},M.prototype.deleteDatabase=function($,S){this.hashStore.hasOwnProperty($)&&delete this.hashStore[$],typeof S=="function"&&S()};function B($,S){if(this.mode="reference",this.adapter=null,this.options=S||{},this.dbref=null,this.dbname="",this.pageIterator={},$){if($.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=$}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}B.prototype.loadDatabase=function($,S){var N=this;this.dbname=$,this.dbref=new g($),this.adapter.loadDatabase($,function(F){if(!F){S(F);return}typeof F!="string"&&S(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var z=JSON.parse(F);if(N.dbref.loadJSONObject(z),z=null,N.dbref.collections.length,N.dbref.collections.length===0){S(N.dbref);return}N.pageIterator={collection:0,pageIndex:0},N.loadNextPartition(0,function(){S(N.dbref)})})},B.prototype.loadNextPartition=function($,S){var N=this.dbname+"."+$,F=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(S);return}this.adapter.loadDatabase(N,function(z){var V=F.dbref.deserializeCollection(z,{delimited:!0,collectionIndex:$});F.dbref.collections[$].data=V,++$<F.dbref.collections.length?F.loadNextPartition($,S):S()})},B.prototype.loadNextPage=function($){var S=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,N=this;this.adapter.loadDatabase(S,function(F){var z=F.split(N.options.delimiter);F="";var V=z.length,ae,ye=z[V-1]==="";for(ye&&(z.pop(),V=z.length,z[V-1]===""&&V===1&&(z.pop(),V=z.length)),ae=0;ae<V;ae++)N.dbref.collections[N.pageIterator.collection].data.push(JSON.parse(z[ae])),z[ae]=null;z=[],ye?++N.pageIterator.collection<N.dbref.collections.length?N.loadNextPartition(N.pageIterator.collection,$):$():(N.pageIterator.pageIndex++,N.loadNextPage($))})},B.prototype.exportDatabase=function($,S,N){var F,z=S.collections.length;for(this.dbref=S,this.dbname=$,this.dirtyPartitions=[-1],F=0;F<z;F++)S.collections[F].dirty&&this.dirtyPartitions.push(F);this.saveNextPartition(function(V){N(V)})},B.prototype.saveNextPartition=function($){var S=this,N=this.dirtyPartitions.shift(),F=this.dbname+(N===-1?"":"."+N);if(this.options.paging&&N!==-1){this.pageIterator={collection:N,docIndex:0,pageIndex:0},this.saveNextPage(function(V){S.dirtyPartitions.length===0?$(V):S.saveNextPartition($)});return}var z=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:N});this.adapter.saveDatabase(F,z,function(V){if(V){$(V);return}S.dirtyPartitions.length===0?$(null):S.saveNextPartition($)})},B.prototype.saveNextPage=function($){var S=this,N=this.dbref.collections[this.pageIterator.collection],F=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,z=0,V=N.data.length,ae=this.options.delimiter.length,ye="",Ue="",ze=!1,st=!1,wt=function(mt){Ue="",mt&&$(mt),ze?$(null):(S.pageIterator.pageIndex++,S.saveNextPage($))};for(N.data.length===0&&(ze=!0);;)if(ze||(ye=JSON.stringify(N.data[this.pageIterator.docIndex]),Ue+=ye,z+=ye.length,++this.pageIterator.docIndex>=V&&(ze=!0)),z>=this.options.pageSize&&(st=!0),(!st||ze)&&(Ue+=this.options.delimiter,z+=ae),ze||st){this.adapter.saveDatabase(F,Ue,wt);return}};function L(){try{this.fs=Xve}catch{this.fs=null}}L.prototype.loadDatabase=function(S,N){var F=this;this.fs.stat(S,function(z,V){!z&&V.isFile()?F.fs.readFile(S,{encoding:"utf8"},function(ye,Ue){N(ye?new Error(ye):Ue)}):N(null)})},L.prototype.saveDatabase=function(S,N,F){var z=this,V=S+"~";this.fs.writeFile(V,N,function(ye){ye?F(new Error(ye)):z.fs.rename(V,S,F)})},L.prototype.deleteDatabase=function(S,N){this.fs.unlink(S,function(z){z?N(new Error(z)):N()})};function q(){}q.prototype.loadDatabase=function(S,N){O()?N(localStorage.getItem(S)):N(new Error("localStorage is not available"))},q.prototype.saveDatabase=function(S,N,F){O()?(localStorage.setItem(S,N),F(null)):F(new Error("localStorage is not available"))},q.prototype.deleteDatabase=function(S,N){O()?(localStorage.removeItem(S),N(null)):N(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function($,S){var N=this,F=new Date().getTime();if(this.throttledSaves||$(!0),S=S||{},S.hasOwnProperty("recursiveWait")||(S.recursiveWait=!0),S.hasOwnProperty("recursiveWaitLimit")||(S.recursiveWaitLimit=!1),S.hasOwnProperty("recursiveWaitLimitDuration")||(S.recursiveWaitLimitDuration=2e3),S.hasOwnProperty("started")||(S.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(S.recursiveWait)this.throttledCallbacks.push(function(){if(N.throttledSavePending){if(S.recursiveWaitLimit&&F-S.started>S.recursiveWaitLimitDuration){$(!1);return}N.throttledSaveDrain($,S);return}else{$(!0);return}});else{this.throttledCallbacks.push($);return}else $(!0)},g.prototype.loadDatabaseInternal=function($,S){var N=S||function(z,V){if(z)throw z},F=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(V){if(typeof V=="string"){var ae=!1;try{F.loadJSON(V,$||{}),ae=!0}catch(ye){N(ye)}ae&&(N(null),F.emit("loaded","database "+F.filename+" loaded"))}else{if(!V){N(null),F.emit("loaded","empty database "+F.filename+" loaded");return}if(V instanceof Error){N(V);return}if(typeof V=="object"){F.loadJSONObject(V,$||{}),N(null),F.emit("loaded","database "+F.filename+" loaded");return}N("unexpected adapter response : "+V)}}):N(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function($,S){var N=this;if(!this.throttledSaves){this.loadDatabaseInternal($,S);return}this.throttledSaveDrain(function(F){if(F){N.throttledSavePending=!0,N.loadDatabaseInternal($,function(z){N.throttledCallbacks.length===0?N.throttledSavePending=!1:N.saveDatabase(),typeof S=="function"&&S(z)});return}else typeof S=="function"&&S(new Error("Unable to pause save throttling long enough to read database"))},$)},g.prototype.saveDatabaseInternal=function($){var S=$||function(z){if(z)throw z},N=this;if(!this.persistenceAdapter){S(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var F;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(N.ignoreAutosave=!1,F){S(new Error("adapter error - getLokiCopy called more than once"));return}var V=N.copy({removeNonSerializable:!0});return F=N.collections.map(function(ae){return[ae.dirty,ae.dirtyIds]}),N.collections.forEach(function(ae){ae.dirty=!1,ae.dirtyIds=[]}),V},function(V){N.ignoreAutosave=!1,V&&F&&N.collections.forEach(function(ae,ye){var Ue=F[ye];ae.dirty=ae.dirty||Ue[0],ae.dirtyIds=ae.dirtyIds.concat(Ue[1])}),S(V)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(V){N.autosaveClearFlags(),S(V)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(V){S(V)}))},g.prototype.saveDatabase=function($){if(!this.throttledSaves){this.saveDatabaseInternal($);return}if(this.throttledSavePending){this.throttledCallbacks.push($);return}var S=this.throttledCallbacks;this.throttledCallbacks=[],S.unshift($),this.throttledSavePending=!0;var N=this;this.saveDatabaseInternal(function(F){N.throttledSavePending=!1,S.forEach(function(z){typeof z=="function"&&setTimeout(function(){z(F)},1)}),N.throttledCallbacks.length>0&&N.saveDatabase()})},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function($,S){var N=S||function(F,z){if(F)throw F};typeof $=="function"&&!S&&(N=$),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(z){N(z)}):N(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var $=0;$<this.collections.length;$++)if(this.collections[$].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var $=0;$<this.collections.length;$++)this.collections[$].dirty=!1},g.prototype.autosaveEnable=function($,S){this.autosave=!0;var N=5e3,F=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(N=this.autosaveInterval),this.autosaveHandle=setInterval(function(){F.autosaveDirty()&&!F.ignoreAutosave&&F.saveDatabase(S)},N)},g.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function Q($,S){return this.collection=$,this.filteredrows=[],this.filterInitialized=!1,this}Q.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},Q.prototype.toJSON=function(){var $=this.copy();return $.collection=null,$},Q.prototype.limit=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new Q(this.collection);return S.filteredrows=this.filteredrows.slice(0,$),S.filterInitialized=!0,S},Q.prototype.offset=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=new Q(this.collection);return S.filteredrows=this.filteredrows.slice($),S.filterInitialized=!0,S},Q.prototype.copy=function(){var $=new Q(this.collection);return this.filteredrows.length>0&&($.filteredrows=this.filteredrows.slice()),$.filterInitialized=this.filterInitialized,$},Q.prototype.branch=Q.prototype.copy,Q.prototype.transform=function($,S){var N,F,z=this;if(typeof $=="string"&&this.collection.transforms.hasOwnProperty($)&&($=this.collection.transforms[$]),typeof $!="object"||!Array.isArray($))throw new Error("Invalid transform");for(typeof S<"u"&&($=o.resolveTransformParams($,S)),N=0;N<$.length;N++)switch(F=$[N],F.type){case"find":z.find(F.value);break;case"where":z.where(F.value);break;case"simplesort":z.simplesort(F.property,F.desc||F.options);break;case"compoundsort":z.compoundsort(F.value);break;case"sort":z.sort(F.value);break;case"limit":z=z.limit(F.value);break;case"offset":z=z.offset(F.value);break;case"map":z=z.map(F.value,F.dataOptions);break;case"eqJoin":z=z.eqJoin(F.joinData,F.leftJoinKey,F.rightJoinKey,F.mapFun,F.dataOptions);break;case"mapReduce":z=z.mapReduce(F.mapFunction,F.reduceFunction);break;case"update":z.update(F.value);break;case"remove":z.remove();break}return z},Q.prototype.sort=function($){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var S=function(N,F){return function(z,V){return N(F[z],F[V])}}($,this.collection.data);return this.filteredrows.sort(S),this},Q.prototype.simplesort=function($,S){var N,F=10,z=this.collection.data.length,V=this.filteredrows.length,ae=this.collection.binaryIndices.hasOwnProperty($);if((typeof S>"u"||S===!1)&&(S={desc:!1}),S===!0&&(S={desc:!0}),V===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty($))return this.collection.ensureIndex($),this.filteredrows=this.collection.binaryIndices[$].values.slice(0),S.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!S.disableIndexIntersect&&ae&&(N=z/V,S.useJavascriptSorting&&(F=6),N<=F||S.forceIndexIntersect)){var ye,Ue=this.filteredrows,ze={};for(ye=0;ye<V;ye++)ze[Ue[ye]]=!0;var st=this.collection.binaryIndices[$].values;return this.filteredrows=st.filter(function(mt){return ze[mt]}),S.desc&&this.filteredrows.reverse(),this}if(S.useJavascriptSorting)return this.sort(function(mt,pt){if(mt[$]===pt[$])return 0;if(mt[$]>pt[$])return 1;if(mt[$]<pt[$])return-1});var wt=function(mt,pt,Rt){var dr,Vr,ct;return function(It,pn){return~mt.indexOf(".")?(ct=mt.split("."),dr=o.getIn(Rt[It],ct,!0),Vr=o.getIn(Rt[pn],ct,!0)):(dr=Rt[It][mt],Vr=Rt[pn][mt]),c(dr,Vr,pt)}}($,S.desc,this.collection.data);return this.filteredrows.sort(wt),this},Q.prototype.compoundsort=function($){if($.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var S;if($.length===1)return S=$[0],Array.isArray(S)?this.simplesort(S[0],S[1]):this.simplesort(S,!1);for(var N=0,F=$.length;N<F;N+=1)S=$[N],Array.isArray(S)||($[N]=[S,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var z=function(V,ae){return function(ye,Ue){return d(V,ae[ye],ae[Ue])}}($,this.collection.data);return this.filteredrows.sort(z),this},Q.prototype.findOr=function($){var S=null,N=0,F=0,z=[],V=[],ae=0;this.count();for(var ye=0,Ue=$.length;ye<Ue;ye++)for(S=this.branch().find($[ye]).filteredrows,F=S.length,N=0;N<F;N++)ae=S[N],V[ae]===void 0&&(V[ae]=!0,z.push(ae));return this.filteredrows=z,this.filterInitialized=!0,this},Q.prototype.$or=Q.prototype.findOr;function re($,S){if($==="$regex")Array.isArray(S)?S=new RegExp(S[0],S[1]):S instanceof RegExp||(S=new RegExp(S));else if(typeof S=="object")for(var N in S)(N==="$regex"||typeof S[N]=="object")&&(S[N]=re(N,S[N]));return S}Q.prototype.findAnd=function($){for(var S=0,N=$.length;S<N;S++){if(this.count()===0)return this;this.find($[S])}return this},Q.prototype.$and=Q.prototype.findAnd,Q.prototype.find=function($,S){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var N=$||"getAll",F,z,V,ae,ye,Ue,ze,st=!1,wt=[],mt=[],pt=null;if(S=S||!1,typeof N=="object"){for(F in N)ae={},ae[F]=N[F],mt.push(ae),t.call(N,F)&&(z=F,V=N[F]);if(mt.length>1)return this.find({$and:mt},S)}if(!z||N==="getAll")return S&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(z==="$and"||z==="$or")return this[z](V),S&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(V===null||typeof V!="object"||V instanceof Date)ye="$eq",Ue=V;else if(typeof V=="object"){for(ze in V)if(t.call(V,ze)){ye=ze,Ue=V[ze];break}}else throw new Error("Do not know what you want to do.");(ye==="$regex"||typeof Ue=="object")&&(Ue=re(ye,Ue));var Rt=z.indexOf(".")!==-1,dr=!this.filterInitialized;dr&&this.collection.binaryIndices[z]&&A[ye]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(z),st=!0,pt=this.collection.binaryIndices[z]),!st&&ye==="$in"&&Array.isArray(Ue)&&typeof Set<"u"&&(Ue=new Set(Ue),ye="$inSet");var Vr=T[ye],ct=this.collection.data,It=0,pn=0,Pi,Wi=0,vn;if(this.filterInitialized){if(Pi=this.filteredrows,pn=Pi.length,Rt){for(z=z.split("."),It=0;It<pn;It++)if(Wi=Pi[It],vn=ct[Wi],y(vn,z,Vr,Ue,vn)&&(wt.push(Wi),S))return this.filteredrows=wt,this}else for(It=0;It<pn;It++)if(Wi=Pi[It],vn=ct[Wi],Vr(vn[z],Ue,vn)&&(wt.push(Wi),S))return this.filteredrows=wt,this}else if(st){var ds=this.collection.calculateRange(ye,z,Ue);if(ye!=="$in"){for(It=ds[0];It<=ds[1];It++)if(A[ye]!==!0){if(A[ye](o.getIn(ct[pt.values[It]],z,Rt),Ue)&&(wt.push(pt.values[It]),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else if(wt.push(pt.values[It]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0,pn=ds.length;It<pn;It++)if(wt.push(pt.values[ds[It]]),S)return this.filteredrows=wt,this.filterInitialized=!0,this}else if(pn=ct.length,Rt){for(z=z.split("."),It=0;It<pn;It++)if(vn=ct[It],y(vn,z,Vr,Ue,vn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this}else for(It=0;It<pn;It++)if(vn=ct[It],Vr(vn[z],Ue,vn)&&(wt.push(It),S))return this.filteredrows=wt,this.filterInitialized=!0,this;return this.filteredrows=wt,this.filterInitialized=!0,this},Q.prototype.where=function($){var S,N=[];if(typeof $=="function")S=$;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var F=this.filteredrows.length;F--;)S(this.collection.data[this.filteredrows[F]])===!0&&N.push(this.filteredrows[F]);return this.filteredrows=N,this}else{for(var z=this.collection.data.length;z--;)S(this.collection.data[z])===!0&&N.push(z);return this.filteredrows=N,this.filterInitialized=!0,this}}catch(V){throw V}},Q.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},Q.prototype.data=function($){var S=[],N=this.collection.data,F,z,V,ae;if($=$||{},$.removeMeta&&!$.forceClones&&($.forceClones=!0,$.forceCloneMethod=$.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&($.forceClones=!0,$.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||$.forceClones){for(z=N.length,ae=$.forceCloneMethod||this.collection.cloneMethod,V=0;V<z;V++)F=x(N[V],ae),$.removeMeta&&(delete F.$loki,delete F.meta),S.push(F);return S}else return N.slice();else this.filterInitialized=!0;var ye=this.filteredrows;if(z=ye.length,this.collection.cloneObjects||$.forceClones)for(ae=$.forceCloneMethod||this.collection.cloneMethod,V=0;V<z;V++)F=x(N[ye[V]],ae),$.removeMeta&&(delete F.$loki,delete F.meta),S.push(F);else for(V=0;V<z;V++)S.push(N[ye[V]]);return S},Q.prototype.update=function($){if(typeof $!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var S,N=this.filteredrows.length,F=this.collection.data,z=0;z<N;z++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(S=x(F[this.filteredrows[z]],this.collection.cloneMethod),$(S),this.collection.update(S)):($(F[this.filteredrows[z]]),this.collection.update(F[this.filteredrows[z]]));return this},Q.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},Q.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}},Q.prototype.eqJoin=function($,S,N,F,z){var V=[],ae,ye=[],Ue,ze,st=[],wt=typeof S=="function",mt=typeof N=="function",pt={};if(V=this.data(z),ae=V.length,$ instanceof j)ye=$.chain().data(z);else if($ instanceof Q)ye=$.data(z);else if(Array.isArray($))ye=$;else throw new TypeError("joinData needs to be an array or result set");Ue=ye.length;for(var Rt=0;Rt<Ue;Rt++)ze=mt?N(ye[Rt]):ye[Rt][N],pt[ze]=ye[Rt];F||(F=function(Vr,ct){return{left:Vr,right:ct}});for(var dr=0;dr<ae;dr++)ze=wt?S(V[dr]):V[dr][S],st.push(F(V[dr],pt[ze]||{}));return this.collection=new j("joinData"),this.collection.insert(st),this.filteredrows=[],this.filterInitialized=!1,this},Q.prototype.map=function($,S){var N=this.data(S).map($);return this.collection=new j("mappedData"),this.collection.insert(N),this.filteredrows=[],this.filterInitialized=!1,this};function Z($,S,N){this.collection=$,this.name=S,this.rebuildPending=!1,this.options=N||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new Q($),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}Z.prototype=new C,Z.prototype.constructor=Z,Z.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},Z.prototype.rematerialize=function($){var S,N,F;$=$||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new Q(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var z=Object.isFrozen(this.filterPipeline);if($.hasOwnProperty("removeWhereFilters"))for(z&&(this.filterPipeline=this.filterPipeline.slice()),S=this.filterPipeline.length,N=S;N--;)this.filterPipeline[N].type==="where"&&(N!==this.filterPipeline.length-1&&(this.filterPipeline[N]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var V=this.filterPipeline;for(this.filterPipeline=[],S=V.length,F=0;F<S;F++)this.applyFind(V[F].val,V[F].uid);return z&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},Z.prototype.branchResultset=function($,S){var N=this.resultset.branch();return typeof $>"u"?N:N.transform($,S)},Z.prototype.toJSON=function(){var $=new Z(this.collection,this.name,this.options);return $.resultset=this.resultset,$.resultdata=[],$.resultsdirty=!0,$.filterPipeline=this.filterPipeline,$.sortFunction=this.sortFunction,$.sortCriteria=this.sortCriteria,$.sortCriteriaSimple=this.sortCriteriaSimple||null,$.sortDirty=this.sortDirty,$.collection=null,$},Z.prototype.removeFilters=function($){$=$||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var S=Object.isFrozen(this.filterPipeline),N=this.filterPipeline.length>0;this.filterPipeline=[],S&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,$.queueSortPhase===!0&&this.queueSortPhase(),N&&this.emit("filter")},Z.prototype.applySort=function($){return this.sortFunction=$,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},Z.prototype.applySimpleSort=function($,S){return this.sortCriteriaSimple={propname:$,options:S||!1},this.collection.disableFreeze||n(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},Z.prototype.applySortCriteria=function($){return this.sortCriteria=$,this.collection.disableFreeze||n(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},Z.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},Z.prototype.commit=function(){return this.cachedresultset=null,this},Z.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},Z.prototype._indexOfFilterWithId=function($){if(typeof $=="string"||typeof $=="number"){for(var S=0,N=this.filterPipeline.length;S<N;S+=1)if($===this.filterPipeline[S].uid)return S}return-1},Z.prototype._addFilter=function($){var S=Object.isFrozen(this.filterPipeline);S&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||n($),this.filterPipeline.push($),S&&Object.freeze(this.filterPipeline),this.resultset[$.type]($.val)},Z.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var $=this.filterPipeline,S=Object.isFrozen($);this.filterPipeline=[];for(var N=0,F=$.length;N<F;N+=1)this._addFilter($[N]);return S&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},Z.prototype.applyFilter=function($){var S=this._indexOfFilterWithId($.uid);if(S>=0){var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[S]=$,N&&(i($),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter($),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},Z.prototype.applyFind=function($,S){return this.applyFilter({type:"find",val:$,uid:S}),this},Z.prototype.applyWhere=function($,S){return this.applyFilter({type:"where",val:$,uid:S}),this},Z.prototype.removeFilter=function($){var S=this._indexOfFilterWithId($);if(S<0)throw new Error("Dynamic view does not contain a filter with ID: "+$);var N=Object.isFrozen(this.filterPipeline);return N&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(S,1),N&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},Z.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},Z.prototype.data=function($){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data($)},Z.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var $=this;setTimeout(function(){$.rebuildPending&&($.rebuildPending=!1,$.emit("rebuild",$))},this.options.minRebuildInterval)}},Z.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var $=this;this.options.sortPriority==="active"?setTimeout(function(){$.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},Z.prototype.performSortPhase=function($){!this.sortDirty&&!this.resultsdirty||($=$||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),$.suppressRebuildEvent||this.emit("rebuild",this))},Z.prototype.evaluateDocument=function($,S){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var N=this.resultset.filteredrows,F=S?-1:N.indexOf(+$),z=N.length,V=new Q(this.collection);V.filteredrows=[$],V.filterInitialized=!0;for(var ae,ye=0,Ue=this.filterPipeline.length;ye<Ue;ye++)ae=this.filterPipeline[ye],V[ae.type](ae.val);var ze=V.filteredrows.length===0?-1:0;if(!(F===-1&&ze===-1)){if(F===-1&&ze!==-1){N.push($),this.options.persistent&&this.resultdata.push(this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(F!==-1&&ze===-1){F<z-1?(N.splice(F,1),this.options.persistent&&this.resultdata.splice(F,1)):(N.length=z-1,this.options.persistent&&(this.resultdata.length=z-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(F!==-1&&ze!==-1){this.options.persistent&&(this.resultdata[F]=this.collection.data[$]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},Z.prototype.removeDocument=function($){var S,N,F,z={},V={},ae=[],ye=this.resultset,Ue=this.resultset.filteredrows,ze=Ue.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray($)||($=[$]),F=$.length,N=0;N<F;N++)z[$[N]]=!0;for(S=0;S<ze;S++)z[Ue[S]]&&(V[S]=!0);Object.keys(V).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(wt,mt){return!V[mt]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(wt,mt){return!V[mt]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var st=function(wt){return function(mt){return mt<ye.filteredrows[wt]}};for(ze=ye.filteredrows.length,S=0;S<ze;S++)ae=$.filter(st(S)),ye.filteredrows[S]-=ae.length},Z.prototype.mapReduce=function($,S){try{return S(this.data().map($))}catch(N){throw N}};function j($,S){this.name=$,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=$,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var N=this;S=S||{},S.hasOwnProperty("unique")&&(Array.isArray(S.unique)||(S.unique=[S.unique]),S.unique.forEach(function(ze){N.uniqueNames.push(ze)})),S.hasOwnProperty("exact")&&S.exact.forEach(function(ze){N.constraints.exact[ze]=new je(ze)}),this.adaptiveBinaryIndices=S.hasOwnProperty("adaptiveBinaryIndices")?S.adaptiveBinaryIndices:!0,this.transactional=S.hasOwnProperty("transactional")?S.transactional:!1,this.cloneObjects=S.hasOwnProperty("clone")?S.clone:!1,this.cloneMethod=S.hasOwnProperty("cloneMethod")?S.cloneMethod:"parse-stringify",this.asyncListeners=S.hasOwnProperty("asyncListeners")?S.asyncListeners:!1,this.disableMeta=S.hasOwnProperty("disableMeta")?S.disableMeta:!1,this.disableChangesApi=S.hasOwnProperty("disableChangesApi")?S.disableChangesApi:!0,this.disableDeltaChangesApi=S.hasOwnProperty("disableDeltaChangesApi")?S.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=S.hasOwnProperty("autoupdate")?S.autoupdate:!1,this.serializableIndices=S.hasOwnProperty("serializableIndices")?S.serializableIndices:!0,this.disableFreeze=S.hasOwnProperty("disableFreeze")?S.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(S.ttl||-1,S.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var F=[];if(S&&S.indices)if(Object.prototype.toString.call(S.indices)==="[object Array]")F=S.indices;else if(typeof S.indices=="string")F=[S.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var z=0;z<F.length;z++)this.ensureIndex(F[z]);function V(ze){var st=typeof Set=="function"?new Set:[];st.add||(st.add=function(wt){return this.indexOf(wt)===-1&&this.push(wt),this}),ze.forEach(function(wt){st.add(wt.object)}),st.forEach(function(wt){if(!t.call(wt,"$loki"))return N.removeAutoUpdateObserver(wt);try{N.update(wt)}catch{}})}this.observerCallback=V;function ae(ze,st){return st?ye(st,ze):JSON.parse(JSON.stringify(ze))}this.getChangeDelta=ae;function ye(ze,st){var wt=st!==null&&typeof st=="object"?Object.keys(st):null;if(wt&&wt.length&&["string","boolean","number"].indexOf(typeof st)<0){for(var mt={},pt=0;pt<wt.length;pt++){var Rt=wt[pt];if(st.hasOwnProperty(Rt))if(!ze.hasOwnProperty(Rt)||N.uniqueNames.indexOf(Rt)>=0||Rt=="$loki"||Rt=="meta")mt[Rt]=st[Rt];else{var dr=ye(ze[Rt],st[Rt]);typeof dr<"u"&&dr!={}&&(mt[Rt]=dr)}}return Object.keys(mt).length===0?void 0:mt}else return ze===st?void 0:st}this.getObjectDelta=ye;function Ue(){N.changes=[]}this.getChanges=function(){return N.changes},this.flushChanges=Ue,this.setChangesApi=function(ze){N.disableChangesApi=!ze,ze||(N.disableDeltaChangesApi=!1)},this.on("delete",function(st){N.disableChangesApi||N.createChange(N.name,"R",st)}),this.on("warning",function(ze){N.lokiConsoleWrapper.warn(ze)}),Ue()}j.prototype=new C,j.prototype.contructor=j,j.prototype.createChange=function($,S,N,F){this.changes.push({name:$,operation:S,obj:S=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(N,F):JSON.parse(JSON.stringify(N))})},j.prototype.insertMeta=function($){var S,N;if(!(this.disableMeta||!$)){if(Array.isArray($)){for(S=$.length,N=0;N<S;N++)$[N].hasOwnProperty("meta")||($[N].meta={}),$[N].meta.created=new Date().getTime(),$[N].meta.revision=0;return}$.meta||($.meta={}),$.meta.created=new Date().getTime(),$.meta.revision=0}},j.prototype.updateMeta=function($){return this.disableMeta||!$||(this.disableFreeze||($=s($),$.meta=s($.meta)),$.meta.updated=new Date().getTime(),$.meta.revision+=1),$},j.prototype.createInsertChange=function($){this.createChange(this.name,"I",$)},j.prototype.createUpdateChange=function($,S){this.createChange(this.name,"U",$,S)},j.prototype.insertMetaWithChange=function($){this.insertMeta($),this.createInsertChange($)},j.prototype.updateMetaWithChange=function($,S,N){return $=this.updateMeta($,N),this.createUpdateChange($,S),$},j.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},j.prototype.addAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.observe($,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},j.prototype.removeAutoUpdateObserver=function($){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve($,this.observerCallback)},j.prototype.addTransform=function($,S){if(this.transforms.hasOwnProperty($))throw new Error("a transform by that name already exists");this.transforms[$]=S},j.prototype.getTransform=function($){return this.transforms[$]},j.prototype.setTransform=function($,S){this.transforms[$]=S},j.prototype.removeTransform=function($){delete this.transforms[$]},j.prototype.byExample=function($){var S,N,F;F=[];for(S in $)$.hasOwnProperty(S)&&F.push((N={},N[S]=$[S],N));return{$and:F}},j.prototype.findObject=function($){return this.findOne(this.byExample($))},j.prototype.findObjects=function($){return this.find(this.byExample($))},j.prototype.ttlDaemonFuncGen=function(){var $=this,S=this.ttl.age;return function(){var F=Date.now(),z=$.chain().where(function(ae){var ye=ae.meta.updated||ae.meta.created,Ue=F-ye;return S<Ue});z.remove()}},j.prototype.setTTL=function($,S){$<0?clearInterval(this.ttl.daemon):(this.ttl.age=$,this.ttl.ttlInterval=S,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),S))},j.prototype.prepareFullDocIndex=function(){for(var $=this.data.length,S=new Array($),N=0;N<$;N+=1)S[N]=N;return S},j.prototype.configureOptions=function($){$=$||{},$.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=$.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},j.prototype.ensureIndex=function($,S){if(typeof S>"u"&&(S=!1),$==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[$]&&!S&&!this.binaryIndices[$].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty($)&&!S)){var N={name:$,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[$]=N;var F=function(z,V){var ae,ye,Ue=~z.indexOf(".")?z.split("."):!1;return function(ze,st){if(Ue?(ae=o.getIn(V[ze],Ue,!0),ye=o.getIn(V[st],Ue,!0)):(ae=V[ze][z],ye=V[st][z]),ae!==ye){if(a.lt(ae,ye,!1))return-1;if(a.gt(ae,ye,!1))return 1}return 0}}($,this.data);N.values.sort(F),N.dirty=!1,this.dirty=!0}},j.prototype.checkAllIndexes=function($){var S,N=this.binaryIndices,F=[],z;for(S in N)t.call(N,S)&&(z=this.checkIndex(S,$),z||F.push(S));return F},j.prototype.checkIndex=function($,S){S=S||{},S.randomSamplingFactor&&S.randomSampling!==!1&&(S.randomSampling=!0),S.randomSamplingFactor=S.randomSamplingFactor||.1,(S.randomSamplingFactor<0||S.randomSamplingFactor>1)&&(S.randomSamplingFactor=.1);var N=!0,F,z,V,ae,ye;if(!this.binaryIndices.hasOwnProperty($))throw new Error("called checkIndex on property without an index: "+$);if(this.adaptiveBinaryIndices||this.ensureIndex($),ye=this.binaryIndices[$].values,ae=ye.length,ae!==this.data.length)return S.repair&&this.ensureIndex($,!0),!1;if(ae===0)return!0;var Ue=$.indexOf(".")!==-1;if(ae===1)N=ye[0]===0;else if(S.randomSampling){if(T.$lte(o.getIn(this.data[ye[0]],$,Ue),o.getIn(this.data[ye[1]],$,Ue))||(N=!1),T.$lte(o.getIn(this.data[ye[ae-2]],$,Ue),o.getIn(this.data[ye[ae-1]],$,Ue))||(N=!1),N){for(z=Math.floor((ae-1)*S.randomSamplingFactor),F=0;F<z-1;F++)if(V=Math.floor(Math.random()*(ae-1)),!T.$lte(o.getIn(this.data[ye[V]],$,Ue),o.getIn(this.data[ye[V+1]],$,Ue))){N=!1;break}}}else for(F=0;F<ae-1;F++)if(!T.$lte(o.getIn(this.data[ye[F]],$,Ue),o.getIn(this.data[ye[F+1]],$,Ue))){N=!1;break}return!N&&S.repair&&this.ensureIndex($,!0),N},j.prototype.getBinaryIndexValues=function($){var S,N=this.binaryIndices[$].values,F=[];for(S=0;S<N.length;S++)F.push(o.getIn(this.data[N[S]],$,!0));return F},j.prototype.getUniqueIndex=function($,S){var N=this.constraints.unique[$];return!N&&S?this.ensureUniqueIndex($):N},j.prototype.ensureUniqueIndex=function($){var S=this.constraints.unique[$];return S||this.uniqueNames.indexOf($)==-1&&this.uniqueNames.push($),this.constraints.unique[$]=S=new Te($),this.data.forEach(function(N){S.set(N)}),S},j.prototype.ensureAllIndexes=function($){var S,N=this.binaryIndices;for(S in N)t.call(N,S)&&this.ensureIndex(S,$)},j.prototype.flagBinaryIndexesDirty=function(){var $,S=this.binaryIndices;for($ in S)t.call(S,$)&&(S[$].dirty=!0)},j.prototype.flagBinaryIndexDirty=function($){this.binaryIndices[$]&&(this.binaryIndices[$].dirty=!0)},j.prototype.count=function($){return $?this.chain().find($).filteredrows.length:this.data.length},j.prototype.ensureId=function(){if(!this.idIndex){var $=this.data,S=0,N=$.length,F=new Array(N);for(S;S<N;S++)F[S]=$[S].$loki;this.idIndex=F}},j.prototype.ensureIdAsync=function($){this.async(function(){this.ensureId()},$)},j.prototype.addDynamicView=function($,S){var N=new Z(this,$,S);return this.DynamicViews.push(N),N},j.prototype.removeDynamicView=function($){this.DynamicViews=this.DynamicViews.filter(function(S){return S.name!==$})},j.prototype.getDynamicView=function($){for(var S=0;S<this.DynamicViews.length;S++)if(this.DynamicViews[S].name===$)return this.DynamicViews[S];return null},j.prototype.findAndUpdate=function($,S){typeof $=="function"?this.updateWhere($,S):this.chain().find($).update(S)},j.prototype.findAndRemove=function($){this.chain().find($).remove()},j.prototype.insert=function($,S){if(!Array.isArray($))return this.insertOne($);var N,F=[],z=S&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;z&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",$);for(var V=0,ae=$.length;V<ae;V++){if(N=this.insertOne($[V],!0),!N)return;F.push(N)}}finally{z&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",F),F=this.cloneObjects?x(F,this.cloneMethod):F,F.length===1?F[0]:F},j.prototype.insertOne=function($,S){var N=null,F;if(typeof $!="object"?N=new TypeError("Document needs to be an object"):$===null&&(N=new TypeError("Object cannot be null")),N!==null)throw this.emit("error",N),N;var z=this.cloneObjects?x($,this.cloneMethod):$;if(this.disableFreeze||(z=s(z)),this.disableMeta||(typeof z.meta>"u"?z.meta={revision:0,created:0}:this.disableFreeze||(z.meta=s(z.meta))),S||this.emit("pre-insert",z),!!this.add(z))return this.disableChangesApi?this.insertMeta(z):this.insertMetaWithChange(z),this.disableFreeze||n(z),F=this.cloneObjects?x(z,this.cloneMethod):z,S||this.emit("insert",F),this.addAutoUpdateObserver(F),F},j.prototype.clear=function($){var S=this;if($=$||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},$.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var N=Object.keys(this.binaryIndices);N.forEach(function(F){S.binaryIndices[F].dirty=!1,S.binaryIndices[F].values=[]})}},j.prototype.update=function($){var S,N,F;if(Array.isArray($)){F=$.length,S=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,S&&(this.adaptiveBinaryIndices=!1);try{for(N=0;N<F;N+=1)this.update($[N])}finally{S&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!t.call($,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var z=this.get($.$loki,!0),V,ae,ye,Ue=this;if(!z)throw new Error("Trying to update a document not in collection.");V=z[0],ye=z[1],ae=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?x($,this.cloneMethod):$,this.emit("pre-update",$),this.uniqueNames.forEach(function(pt){Ue.getUniqueIndex(pt,!0).update(V,ae)}),this.data[ye]=ae,ae!==$&&this.addAutoUpdateObserver($);for(var ze=0;ze<this.DynamicViews.length;ze++)this.DynamicViews[ze].evaluateDocument(ye,!1);var st;if(this.adaptiveBinaryIndices){var wt=this.binaryIndices;for(st in wt)this.adaptiveBinaryIndexUpdate(ye,st)}else this.flagBinaryIndexesDirty();this.idIndex[ye]=ae.$loki,this.isIncremental&&this.dirtyIds.push(ae.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?ae=this.updateMeta(ae):ae=this.updateMetaWithChange(ae,V),this.disableFreeze||n(ae);var mt;return this.cloneObjects?mt=x(ae,this.cloneMethod):mt=ae,this.emit("update",mt,V),mt}catch(pt){throw this.rollback(),this.lokiConsoleWrapper.error(pt.message),this.emit("error",pt),pt}},j.prototype.add=function($){if(typeof $!="object")throw new TypeError("Object being added needs to be an object");if(typeof $.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var S=this.maxId;$.$loki=S,this.disableMeta||($.meta.version=0);for(var N=0,F=this.uniqueNames.length;N<F;N++)this.getUniqueIndex(this.uniqueNames[N],!0).set($);this.idIndex&&this.idIndex.push(S),this.isIncremental&&this.dirtyIds.push(S),this.data.push($);var z=this.data.length-1,V=this.DynamicViews.length;for(N=0;N<V;N++)this.DynamicViews[N].evaluateDocument(z,!0);if(this.adaptiveBinaryIndices){var ae=this.binaryIndices;for(var ye in ae)this.adaptiveBinaryIndexInsert(z,ye)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?x($,this.cloneMethod):$}catch(Ue){throw this.rollback(),this.lokiConsoleWrapper.error(Ue.message),this.emit("error",Ue),Ue}},j.prototype.updateWhere=function($,S){var N=this.where($),F=0,z;try{for(F;F<N.length;F++)z=S(N[F]),this.update(z)}catch(V){this.rollback(),this.lokiConsoleWrapper.error(V.message)}},j.prototype.removeWhere=function($){var S;typeof $=="function"?(S=this.data.filter($),this.remove(S)):this.chain().find($).remove()},j.prototype.removeDataOnly=function(){this.remove(this.data.slice())},j.prototype.removeBatchByPositions=function($){var S=$.length,N={},F,z,V,ae=Object.keys(this.binaryIndices).length,ye=Object.keys(this.constraints.unique).length,Ue=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,ze,st=this;try{for(this.startTransaction(),this.ensureId(),V=0;V<S;V++)N[this.idIndex[$[V]]]=!0;if(F=this.DynamicViews.length,F>0||ae>0||ye>0){if(F>0)for(z=0;z<F;z++)this.DynamicViews[z].removeDocument($);if(this.adaptiveBinaryIndices&&!Ue){var wt,mt=this.binaryIndices;for(wt in mt)this.adaptiveBinaryIndexRemove($,wt)}else this.flagBinaryIndexesDirty();ye&&this.uniqueNames.forEach(function(pt){var Rt=st.getUniqueIndex(pt);if(Rt)for(V=0;V<S;V++)ze=st.data[$[V]],ze[pt]!==null&&ze[pt]!==void 0&&Rt.remove(ze[pt])})}if(!this.disableChangesApi||this.events.delete.length>1)for(V=0;V<S;V++)this.emit("delete",this.data[$[V]]);if(this.data=this.data.filter(function(pt){return!N[pt.$loki]}),this.isIncremental)for(V=0;V<S;V++)this.dirtyIds.push(this.idIndex[$[V]]);this.idIndex=this.idIndex.filter(function(pt){return!N[pt]}),this.adaptiveBinaryIndices&&Ue&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(pt){return this.rollback(),Ue&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(pt.message),this.emit("error",pt),null}},j.prototype.removeBatch=function($){var S=$.length,N=this.data.length,F,z={},V=[];for(F=0;F<N;F++)z[this.data[F].$loki]=F;for(F=0;F<S;F++)typeof $[F]=="object"?V.push(z[$[F].$loki]):V.push(z[$[F]]);this.removeBatchByPositions(V)},j.prototype.remove=function($){if(typeof $=="number"&&($=this.get($)),typeof $!="object")throw new Error("Parameter is not an object");if(Array.isArray($)){this.removeBatch($);return}if(!t.call($,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var S=this.get($.$loki,!0),N=S[1],F=this;this.uniqueNames.forEach(function(ye){if($[ye]!==null&&typeof $[ye]<"u"){var Ue=F.getUniqueIndex(ye);Ue&&Ue.remove($[ye])}});for(var z=0;z<this.DynamicViews.length;z++)this.DynamicViews[z].removeDocument(N);if(this.adaptiveBinaryIndices){var V,ae=this.binaryIndices;for(V in ae)this.adaptiveBinaryIndexRemove(N,V)}else this.flagBinaryIndexesDirty();return this.data.splice(N,1),this.removeAutoUpdateObserver($),this.idIndex.splice(N,1),this.isIncremental&&this.dirtyIds.push($.$loki),this.commit(),this.dirty=!0,this.emit("delete",S[0]),this.disableFreeze||($=s($)),delete $.$loki,delete $.meta,this.disableFreeze||i($),$}catch(ye){return this.rollback(),this.lokiConsoleWrapper.error(ye.message),this.emit("error",ye),null}},j.prototype.get=function($,S){this.idIndex||this.ensureId();var N=S||!1,F=this.idIndex,z=F.length-1,V=0,ae=V+z>>1;if($=typeof $=="number"?$:parseInt($,10),isNaN($))throw new TypeError("Passed id is not an integer");for(;F[V]<F[z];)ae=V+z>>1,F[ae]<$?V=ae+1:z=ae;return z===V&&F[V]===$?N?[this.data[V],V]:this.data[V]:null},j.prototype.getBinaryIndexPosition=function($,S){var N=o.getIn(this.data[$],S,!0),F=this.binaryIndices[S].values,z=this.calculateRange("$eq",S,N);if(z[0]===0&&z[1]===-1)return null;for(var V=z[0],ae=z[1],ye=V;ye<=ae;ye++)if(F[ye]===$)return ye;return null},j.prototype.adaptiveBinaryIndexInsert=function($,S){var N=S.indexOf(".")!==-1,F=this.binaryIndices[S].values,z=o.getIn(this.data[$],S,N);this.serializableIndices===!0&&z instanceof Date&&(this.data[$][S]=z.getTime(),z=o.getIn(this.data[$],S));var V=F.length===0?0:this.calculateRangeStart(S,z,!0,N);this.binaryIndices[S].values.splice(V,0,$)},j.prototype.adaptiveBinaryIndexUpdate=function($,S){var N,F=this.binaryIndices[S].values,z=F.length;for(N=0;N<z&&F[N]!==$;N++);this.binaryIndices[S].values.splice(N,1),this.adaptiveBinaryIndexInsert($,S)},j.prototype.adaptiveBinaryIndexRemove=function($,S,N){var F=this.binaryIndices[S],z,V,ae,ye,Ue={},ze,st,wt;if(Array.isArray($))if(ye=$.length,ye===1)$=$[0];else{for(ae=0;ae<ye;ae++)Ue[$[ae]]=!0;if(F.values=F.values.filter(function(pt){return!Ue[pt]}),N===!0)return;var mt=$.slice();for(mt.sort(function(pt,Rt){return pt-Rt}),z=F.values.length,V=0;V<z;V++){for(ze=F.values[V],st=0,ae=0;ae<ye&&ze>mt[ae];ae++)st++;F.values[V]-=st}return}if(wt=this.getBinaryIndexPosition($,S),wt===null)return null;if(F.values.splice(wt,1),N!==!0)for(z=F.values.length,V=0;V<z;V++)F.values[V]>$&&F.values[V]--},j.prototype.calculateRangeStart=function($,S,N,F){var z=this.data,V=this.binaryIndices[$].values,ae=0,ye=V.length-1,Ue=0;if(V.length===0)return-1;for(o.getIn(z[V[ae]],$,F),o.getIn(z[V[ye]],$,F);ae<ye;)Ue=ae+ye>>1,a.lt(o.getIn(z[V[Ue]],$,F),S,!1)?ae=Ue+1:ye=Ue;var ze=ae;return a.aeq(S,o.getIn(z[V[ze]],$,F))?ze:a.lt(S,o.getIn(z[V[ze]],$,F),!1)?N?ze:ze-1:N?ze+1:ze},j.prototype.calculateRangeEnd=function($,S,N){var F=this.data,z=this.binaryIndices[$].values,V=0,ae=z.length-1,ye=0;if(z.length===0)return-1;for(o.getIn(F[z[V]],$,N),o.getIn(F[z[ae]],$,N);V<ae;)ye=V+ae>>1,a.lt(S,o.getIn(F[z[ye]],$,N),!1)?ae=ye:V=ye+1;var Ue=ae;return a.aeq(S,o.getIn(F[z[Ue]],$,N))?Ue:a.gt(S,o.getIn(F[z[Ue]],$,N),!1)?Ue+1:a.aeq(S,o.getIn(F[z[Ue-1]],$,N))?Ue-1:Ue},j.prototype.calculateRange=function($,S,N){var F=this.data,z=this.binaryIndices[S].values,V=0,ae=z.length-1,ye,Ue,ze;if(F.length===0)return[0,-1];var st=S.indexOf(".")!==-1,wt=o.getIn(F[z[V]],S,st),mt=o.getIn(F[z[ae]],S,st);switch($){case"$eq":case"$aeq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$dteq":if(a.lt(N,wt,!1)||a.gt(N,mt,!1))return[0,-1];break;case"$gt":if(a.gt(N,mt,!0))return[0,-1];if(a.gt(wt,N,!1))return[V,ae];break;case"$gte":if(a.gt(N,mt,!1))return[0,-1];if(a.gt(wt,N,!0))return[V,ae];break;case"$lt":if(a.lt(N,wt,!0))return[0,-1];if(a.lt(mt,N,!1))return[V,ae];break;case"$lte":if(a.lt(N,wt,!1))return[0,-1];if(a.lt(mt,N,!0))return[V,ae];break;case"$between":return a.gt(N[0],mt,!1)?[0,-1]:a.lt(N[1],wt,!1)?[0,-1]:(ye=this.calculateRangeStart(S,N[0],!1,st),ze=this.calculateRangeEnd(S,N[1],st),ye<0&&ye++,ze>ae&&ze--,a.gt(o.getIn(F[z[ye]],S,st),N[0],!0)||ye++,a.lt(o.getIn(F[z[ze]],S,st),N[1],!0)||ze--,ze<ye?[0,-1]:[ye,ze]);case"$in":for(var pt=[],Rt=[],dr=0,Vr=N.length;dr<Vr;dr++)for(var ct=this.calculateRange("$eq",S,N[dr]),It=ct[0];It<=ct[1];It++)pt[It]===void 0&&(pt[It]=!0,Rt.push(It));return Rt}switch($){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":ye=this.calculateRangeStart(S,N,!1,st),Ue=o.getIn(F[z[ye]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":ze=this.calculateRangeEnd(S,N,st),o.getIn(F[z[ze]],S,st);break}switch($){case"$eq":case"$aeq":case"$dteq":return a.aeq(Ue,N)?[ye,ze]:[0,-1];case"$gt":return a.aeq(o.getIn(F[z[ze]],S,st),N)?[ze+1,ae]:[ze,ae];case"$gte":return a.aeq(o.getIn(F[z[ye]],S,st),N)?[ye,ae]:[ye+1,ae];case"$lt":return a.aeq(o.getIn(F[z[ye]],S,st),N)?[V,ye-1]:[V,ye];case"$lte":return a.aeq(o.getIn(F[z[ze]],S,st),N)?[V,ze]:[V,ze-1];default:return[0,F.length-1]}},j.prototype.by=function($,S){var N;if(S===void 0)return N=this,function(z){return N.by($,z)};var F=this.getUniqueIndex($,!0).get(S);return this.cloneObjects?x(F,this.cloneMethod):F},j.prototype.findOne=function($){$=$||{};var S=this.chain().find($,!0).data();return Array.isArray(S)&&S.length===0?null:this.cloneObjects?x(S[0],this.cloneMethod):S[0]},j.prototype.chain=function($,S){var N=new Q(this);return typeof $>"u"?N:N.transform($,S)},j.prototype.find=function($){return this.chain().find($).data()},j.prototype.findOneUnindexed=function($,S){for(var N=this.data.length,F;N--;)if(o.getIn(this.data[N],$,!0)===S)return F=this.data[N],F;return null},j.prototype.startTransaction=function(){if(this.transactional){this.cachedData=x(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].startTransaction()}},j.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].commit()}},j.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var $=0;$<this.DynamicViews.length;$++)this.DynamicViews[$].rollback()}},j.prototype.async=function($,S){setTimeout(function(){if(typeof $=="function")$(),S();else throw new TypeError("Argument passed for async execution is not a function")},0)},j.prototype.where=function($){return this.chain().where($).data()},j.prototype.mapReduce=function($,S){try{return S(this.data.map($))}catch(N){throw N}},j.prototype.eqJoin=function($,S,N,F,z){return new Q(this).eqJoin($,S,N,F,z)},j.prototype.stages={},j.prototype.getStage=function($){return this.stages[$]||(this.stages[$]={}),this.stages[$]},j.prototype.commitLog=[],j.prototype.stage=function($,S){var N=JSON.parse(JSON.stringify(S));return this.getStage($)[S.$loki]=N,N},j.prototype.commitStage=function($,S){var N=this.getStage($),F,z=new Date().getTime();for(F in N)this.update(N[F]),this.commitLog.push({timestamp:z,message:S,data:JSON.parse(JSON.stringify(N[F]))});this.stages[$]={}},j.prototype.no_op=function(){},j.prototype.extract=function($){var S=0,N=this.data.length,F=X($),z=[];for(S;S<N;S+=1)z.push(Ve(this.data[S],$,F));return z},j.prototype.max=function($){return Math.max.apply(null,this.extract($))},j.prototype.min=function($){return Math.min.apply(null,this.extract($))},j.prototype.maxRecord=function($){var S=0,N=this.data.length,F=X($),z={index:0,value:void 0},V;for(S;S<N;S+=1)V!==void 0?V<Ve(this.data[S],$,F)&&(V=Ve(this.data[S],$,F),z.index=this.data[S].$loki):(V=Ve(this.data[S],$,F),z.index=this.data[S].$loki);return z.value=V,z},j.prototype.minRecord=function($){var S=0,N=this.data.length,F=X($),z={index:0,value:void 0},V;for(S;S<N;S+=1)V!==void 0?V>Ve(this.data[S],$,F)&&(V=Ve(this.data[S],$,F),z.index=this.data[S].$loki):(V=Ve(this.data[S],$,F),z.index=this.data[S].$loki);return z.value=V,z},j.prototype.extractNumerical=function($){return this.extract($).map(ie).filter(Number).filter(function(S){return!isNaN(S)})},j.prototype.avg=function($){return Pe(this.extractNumerical($))},j.prototype.stdDev=function($){return He(this.extractNumerical($))},j.prototype.mode=function($){var S={},N=this.extract($);N.forEach(function(ae){S[ae]?S[ae]+=1:S[ae]=1});var F,z,V;for(z in S)F?F<S[z]&&(V=z):(V=z,F=S[z]);return V},j.prototype.median=function($){var S=this.extractNumerical($);S.sort($e);var N=Math.floor(S.length/2);return S.length%2?S[N]:(S[N-1]+S[N])/2};function X($){return $.indexOf(".")!==-1}function ie($){return parseFloat($,10)}function Ee($,S){return $+S}function $e($,S){return $-S}function Pe($){return $.reduce(Ee,0)/$.length}function He($){var S=Pe($),N=$.map(function(V){var ae=V-S,ye=ae*ae;return ye}),F=Pe(N),z=Math.sqrt(F);return z}function Ve($,S,N){if(N===!1)return $[S];for(var F=S.split("."),z=$;F.length>0;)z=z[F.shift()];return z}function it($,S,N){for(var F=0,z=$.length,V,ae;F<z;){if(ae=F+z>>1,V=N.apply(null,[S,$[ae]]),V===0)return{found:!0,index:ae};V<0?z=ae:F=ae+1}return{found:!1,index:z}}function _e($){return function(S,N){return it(S,N,$)}}function ge(){}ge.prototype={keys:[],values:[],sort:function($,S){return $<S?-1:$>S?1:0},setSort:function($){this.bs=new _e($)},bs:function(){return new _e(this.sort)},set:function($,S){var N=this.bs(this.keys,$);N.found?this.values[N.index]=S:(this.keys.splice(N.index,0,$),this.values.splice(N.index,0,S))},get:function($){return this.values[it(this.keys,$,this.sort).index]}};function Te($){this.field=$,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}Te.prototype.keyMap={},Te.prototype.lokiMap={},Te.prototype.set=function($){var S=$[this.field];if(S!==null&&typeof S<"u"){if(this.keyMap[S])throw new Error("Duplicate key for property "+this.field+": "+S);this.keyMap[S]=$,this.lokiMap[$.$loki]=S}},Te.prototype.get=function($){return this.keyMap[$]},Te.prototype.byId=function($){return this.keyMap[this.lokiMap[$]]},Te.prototype.update=function($,S){if(this.lokiMap[$.$loki]!==S[this.field]){var N=this.lokiMap[$.$loki];this.set(S),this.keyMap[N]=void 0}else this.keyMap[$[this.field]]=S},Te.prototype.remove=function($){var S=this.keyMap[$];if(S!==null&&typeof S<"u")this.keyMap[$]=void 0,this.lokiMap[S.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},Te.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function je($){this.index=Object.create(null),this.field=$}return je.prototype={set:function(S,N){this.index[S]?this.index[S].push(N):this.index[S]=[N]},remove:function(S,N){var F=this.index[S];for(var z in F)F[z]==N&&F.splice(z,1);F.length<1&&(this.index[S]=void 0)},get:function(S){return this.index[S]},clear:function(S){this.index={}}},g.deepFreeze=n,g.freeze=i,g.unFreeze=s,g.LokiOps=T,g.Collection=j,g.DynamicView=Z,g.Resultset=Q,g.KeyValueStore=ge,g.LokiMemoryAdapter=M,g.LokiPartitioningAdapter=B,g.LokiLocalStorageAdapter=q,g.LokiFsAdapter=L,g.persistenceAdapters={fs:L,localStorage:q},g.aeq=l,g.lt=u,g.gt=f,g.Comparators=a,g}()})})(sW);var Jve=sW.exports;const Qve=ro(Jve);class ege{constructor(r){ce(this,"map");ce(this,"sortedKeys");ce(this,"compare");this.map=new Map,this.sortedKeys=[],this.compare=r??((t,n)=>t.key>n.key?1:t.key<n.key?-1:0)}set(r,t){if(this.map.has(r)){const s=this.sortedKeys.indexOf(r);s!==-1&&this.sortedKeys.splice(s,1)}this.map.set(r,t);let n=0,i=this.sortedKeys.length;for(;n<i;){const s=Math.floor((n+i)/2);this.compare({key:r,value:t},{key:this.sortedKeys[s],value:this.map.get(this.sortedKeys[s])})<0?i=s:n=s+1}this.sortedKeys.splice(n,0,r)}get(r){return this.map.get(r)}*[Symbol.iterator](){for(const r of this.sortedKeys)yield{key:r,value:this.map.get(r)}}*reverse(){for(let r=this.sortedKeys.length-1;r>=0;r--){const t=this.sortedKeys[r];yield{key:t,value:this.map.get(t)}}}*keys(){for(const r of this.sortedKeys)yield r}*values(){for(const r of this.sortedKeys)yield this.map.get(r)}has(r){return this.map.has(r)}delete(r){if(this.map.delete(r)){const t=this.sortedKeys.indexOf(r);return t!==-1&&this.sortedKeys.splice(t,1),!0}return!1}get size(){return this.map.size}}function eI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function tge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function oW(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function rge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");eI(e.outputLen),eI(e.blockLen)}function nge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ige(e,r){oW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const wE={number:eI,bool:tge,bytes:oW,hash:rge,exists:nge,output:ige};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aW=e=>e instanceof Uint8Array,$E=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ja=(e,r)=>e<<32-r|e>>>r,sge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!sge)throw new Error("Non little-endian hardware is not supported");const oge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function tI(e){if(!aW(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=oge[e[t]];return r}function age(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function lW(e){if(typeof e=="string"&&(e=age(e)),!aW(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let lge=class{clone(){return this._cloneInto()}};function uW(e){const r=n=>e().update(lW(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function uge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let cge=class extends lge{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=$E(this.buffer)}update(r){wE.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=lW(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=$E(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){wE.exists(this),wE.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;uge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=$E(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const fge=(e,r,t)=>e&r^~e&t,hge=(e,r,t)=>e&r^e&t^r&t,dge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ec=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tc=new Uint32Array(64);let cW=class extends cge{constructor(){super(64,32,8,!1),this.A=ec[0]|0,this.B=ec[1]|0,this.C=ec[2]|0,this.D=ec[3]|0,this.E=ec[4]|0,this.F=ec[5]|0,this.G=ec[6]|0,this.H=ec[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)tc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=tc[c-15],y=tc[c-2],w=Ja(d,7)^Ja(d,18)^d>>>3,b=Ja(y,17)^Ja(y,19)^y>>>10;tc[c]=b+tc[c-7]+w+tc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Ja(a,6)^Ja(a,11)^Ja(a,25),y=f+d+fge(a,l,u)+dge[c]+tc[c]|0,b=(Ja(n,2)^Ja(n,13)^Ja(n,22))+hge(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){tc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},pge=class extends cW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const __=uW(()=>new cW);uW(()=>new pge);const AB=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],OB=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function CB(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function fW(e){if(!e)throw new Error("No seed provided");const r=__(e),t=OB[r[0]%OB.length],n=AB[r[1]%AB.length];return`${CB(t)} ${CB(n)}`}let Ef;const vge=()=>Ef||(Ef=Re.db.addDynamicView("latest_by_follows",{persist:!0}),Ef.applyFind({kind:1}),Ef.applySimpleSort("created_at",{desc:!0}),Ef.applyWhere(e=>et.getFollowDistance(e.pubkey)<=1),Ef);let Cd;const gge=()=>Cd||(Cd=Re.db.addDynamicView("latest_by_everyone",{persist:!0}),Cd.applyFind({kind:1}),Cd.applySimpleSort("created_at",{desc:!0}),Cd),Lw={loaded:!1,saveEvents:wn.throttle(()=>{const e=vge().data().slice(0,50),r=gge().data().slice(0,50),t=Re.notifications.eventIds.map(s=>Re.db.by("id",s)).slice(0,50);let n=[];for(const s of Re.directMessagesByUser.values())s.eventIds.forEach(o=>{n.push(Re.db.by("id",o))});n=n.slice(0,100);const i=Array.from(Re.keyValueEvents.values()).slice(0,50);dn.setItem("latestMsgs",e),dn.setItem("latestMsgsByEveryone",r),dn.setItem("notificationEvents",t),dn.setItem("dms",n),dn.setItem("keyValueEvents",i),console.log("saved latestMsgs",e.length),console.log("saved latestMsgsByEveryone",r.length)},5e3),saveProfilesAndFollows:wn.debounce(()=>{const e=de.getPubKey(),r=[Re.db.find({kind:0,pubkey:e}),...Re.db.find({kind:0})],t=Re.db.find({kind:3}).filter(s=>s.pubkey===e||et.isFollowing(e,s.pubkey)),n=[Re.db.findOne({kind:3,pubkey:e})];let i=0;for(const s of t.map(o=>[JSON.stringify(o).length,o]).sort((o,a)=>o[0]-a[0]))i+s[0]<5e5&&(i+=s[0],n.push(s[1]));dn.setItem("profileEvents",r.slice(0,50)),dn.setItem("followEvents",n.slice(0,50))},5e3),loadEvents:async function(){const e=await dn.getItem("latestMsgs"),r=await dn.getItem("latestMsgsByEveryone"),t=await dn.getItem("followEvents"),n=await dn.getItem("profileEvents"),i=await dn.getItem("notificationEvents"),s=await dn.getItem("dms"),o=await dn.getItem("keyValueEvents");this.loaded=!0,Array.isArray(t)&&t.forEach(a=>Re.handle(a)),Array.isArray(n)&&n.forEach(a=>Re.handle(a)),Array.isArray(e)&&e.forEach(a=>{Re.handle(a)}),Array.isArray(r)&&r.forEach(a=>{Re.handle(a)}),Array.isArray(i)&&i.forEach(a=>{Re.handle(a)}),Array.isArray(s)&&s.forEach(a=>{Re.handle(a)}),Array.isArray(o)&&o.forEach(a=>{Re.handle(a)})}};var rI={exports:{}};(function(e,r){const{hasOwnProperty:t}=Object.prototype,n=T();n.configure=T,n.stringify=n,n.default=n,r.stringify=n,r.configure=T,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(_){return _.length<5e3&&!i.test(_)?`"${_}"`:JSON.stringify(_)}function o(_){if(_.length>200)return _.sort();for(let A=1;A<_.length;A++){const x=_[A];let I=A;for(;I!==0&&_[I-1]>x;)_[I]=_[I-1],I--;_[I]=x}return _}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(_){return a.call(_)!==void 0&&_.length!==0}function u(_,A,x){_.length<x&&(x=_.length);const I=A===","?"":" ";let O=`"0":${I}${_[0]}`;for(let C=1;C<x;C++)O+=`${A}"${C}":${I}${_[C]}`;return O}function f(_){if(t.call(_,"circularValue")){const A=_.circularValue;if(typeof A=="string")return`"${A}"`;if(A==null)return A;if(A===Error||A===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function c(_,A){let x;if(t.call(_,A)&&(x=_[A],typeof x!="boolean"))throw new TypeError(`The "${A}" argument must be of type boolean`);return x===void 0?!0:x}function d(_,A){let x;if(t.call(_,A)){if(x=_[A],typeof x!="number")throw new TypeError(`The "${A}" argument must be of type number`);if(!Number.isInteger(x))throw new TypeError(`The "${A}" argument must be an integer`);if(x<1)throw new RangeError(`The "${A}" argument must be >= 1`)}return x===void 0?1/0:x}function y(_){return _===1?"1 item":`${_} items`}function w(_){const A=new Set;for(const x of _)(typeof x=="string"||typeof x=="number")&&A.add(String(x));return A}function b(_){if(t.call(_,"strict")){const A=_.strict;if(typeof A!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(A)return x=>{let I=`Object can not safely be stringified. Received type ${typeof x}`;throw typeof x!="function"&&(I+=` (${x.toString()})`),new Error(I)}}}function T(_){_={..._};const A=b(_);A&&(_.bigint===void 0&&(_.bigint=!1),"circularValue"in _||(_.circularValue=Error));const x=f(_),I=c(_,"bigint"),O=c(_,"deterministic"),C=d(_,"maximumDepth"),g=d(_,"maximumBreadth");function M(re,Z,j,X,ie,Ee){let $e=Z[re];switch(typeof $e=="object"&&$e!==null&&typeof $e.toJSON=="function"&&($e=$e.toJSON(re)),$e=X.call(Z,re,$e),typeof $e){case"string":return s($e);case"object":{if($e===null)return"null";if(j.indexOf($e)!==-1)return x;let Pe="",He=",";const Ve=Ee;if(Array.isArray($e)){if($e.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push($e),ie!==""&&(Ee+=ie,Pe+=`
${Ee}`,He=`,
${Ee}`);const $=Math.min($e.length,g);let S=0;for(;S<$-1;S++){const F=M(String(S),$e,j,X,ie,Ee);Pe+=F!==void 0?F:"null",Pe+=He}const N=M(String(S),$e,j,X,ie,Ee);if(Pe+=N!==void 0?N:"null",$e.length-1>g){const F=$e.length-g-1;Pe+=`${He}"... ${y(F)} not stringified"`}return ie!==""&&(Pe+=`
${Ve}`),j.pop(),`[${Pe}]`}let it=Object.keys($e);const _e=it.length;if(_e===0)return"{}";if(C<j.length+1)return'"[Object]"';let ge="",Te="";ie!==""&&(Ee+=ie,He=`,
${Ee}`,ge=" ");const je=Math.min(_e,g);O&&!l($e)&&(it=o(it)),j.push($e);for(let $=0;$<je;$++){const S=it[$],N=M(S,$e,j,X,ie,Ee);N!==void 0&&(Pe+=`${Te}${s(S)}:${ge}${N}`,Te=He)}if(_e>g){const $=_e-g;Pe+=`${Te}"...":${ge}"${y($)} not stringified"`,Te=He}return ie!==""&&Te.length>1&&(Pe=`
${Ee}${Pe}
${Ve}`),j.pop(),`{${Pe}}`}case"number":return isFinite($e)?String($e):A?A($e):"null";case"boolean":return $e===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String($e);default:return A?A($e):void 0}}function B(re,Z,j,X,ie,Ee){switch(typeof Z=="object"&&Z!==null&&typeof Z.toJSON=="function"&&(Z=Z.toJSON(re)),typeof Z){case"string":return s(Z);case"object":{if(Z===null)return"null";if(j.indexOf(Z)!==-1)return x;const $e=Ee;let Pe="",He=",";if(Array.isArray(Z)){if(Z.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(Z),ie!==""&&(Ee+=ie,Pe+=`
${Ee}`,He=`,
${Ee}`);const _e=Math.min(Z.length,g);let ge=0;for(;ge<_e-1;ge++){const je=B(String(ge),Z[ge],j,X,ie,Ee);Pe+=je!==void 0?je:"null",Pe+=He}const Te=B(String(ge),Z[ge],j,X,ie,Ee);if(Pe+=Te!==void 0?Te:"null",Z.length-1>g){const je=Z.length-g-1;Pe+=`${He}"... ${y(je)} not stringified"`}return ie!==""&&(Pe+=`
${$e}`),j.pop(),`[${Pe}]`}j.push(Z);let Ve="";ie!==""&&(Ee+=ie,He=`,
${Ee}`,Ve=" ");let it="";for(const _e of X){const ge=B(_e,Z[_e],j,X,ie,Ee);ge!==void 0&&(Pe+=`${it}${s(_e)}:${Ve}${ge}`,it=He)}return ie!==""&&it.length>1&&(Pe=`
${Ee}${Pe}
${$e}`),j.pop(),`{${Pe}}`}case"number":return isFinite(Z)?String(Z):A?A(Z):"null";case"boolean":return Z===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(Z);default:return A?A(Z):void 0}}function L(re,Z,j,X,ie){switch(typeof Z){case"string":return s(Z);case"object":{if(Z===null)return"null";if(typeof Z.toJSON=="function"){if(Z=Z.toJSON(re),typeof Z!="object")return L(re,Z,j,X,ie);if(Z===null)return"null"}if(j.indexOf(Z)!==-1)return x;const Ee=ie;if(Array.isArray(Z)){if(Z.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(Z),ie+=X;let ge=`
${ie}`;const Te=`,
${ie}`,je=Math.min(Z.length,g);let $=0;for(;$<je-1;$++){const N=L(String($),Z[$],j,X,ie);ge+=N!==void 0?N:"null",ge+=Te}const S=L(String($),Z[$],j,X,ie);if(ge+=S!==void 0?S:"null",Z.length-1>g){const N=Z.length-g-1;ge+=`${Te}"... ${y(N)} not stringified"`}return ge+=`
${Ee}`,j.pop(),`[${ge}]`}let $e=Object.keys(Z);const Pe=$e.length;if(Pe===0)return"{}";if(C<j.length+1)return'"[Object]"';ie+=X;const He=`,
${ie}`;let Ve="",it="",_e=Math.min(Pe,g);l(Z)&&(Ve+=u(Z,He,g),$e=$e.slice(Z.length),_e-=Z.length,it=He),O&&($e=o($e)),j.push(Z);for(let ge=0;ge<_e;ge++){const Te=$e[ge],je=L(Te,Z[Te],j,X,ie);je!==void 0&&(Ve+=`${it}${s(Te)}: ${je}`,it=He)}if(Pe>g){const ge=Pe-g;Ve+=`${it}"...": "${y(ge)} not stringified"`,it=He}return it!==""&&(Ve=`
${ie}${Ve}
${Ee}`),j.pop(),`{${Ve}}`}case"number":return isFinite(Z)?String(Z):A?A(Z):"null";case"boolean":return Z===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(Z);default:return A?A(Z):void 0}}function q(re,Z,j){switch(typeof Z){case"string":return s(Z);case"object":{if(Z===null)return"null";if(typeof Z.toJSON=="function"){if(Z=Z.toJSON(re),typeof Z!="object")return q(re,Z,j);if(Z===null)return"null"}if(j.indexOf(Z)!==-1)return x;let X="";if(Array.isArray(Z)){if(Z.length===0)return"[]";if(C<j.length+1)return'"[Array]"';j.push(Z);const He=Math.min(Z.length,g);let Ve=0;for(;Ve<He-1;Ve++){const _e=q(String(Ve),Z[Ve],j);X+=_e!==void 0?_e:"null",X+=","}const it=q(String(Ve),Z[Ve],j);if(X+=it!==void 0?it:"null",Z.length-1>g){const _e=Z.length-g-1;X+=`,"... ${y(_e)} not stringified"`}return j.pop(),`[${X}]`}let ie=Object.keys(Z);const Ee=ie.length;if(Ee===0)return"{}";if(C<j.length+1)return'"[Object]"';let $e="",Pe=Math.min(Ee,g);l(Z)&&(X+=u(Z,",",g),ie=ie.slice(Z.length),Pe-=Z.length,$e=","),O&&(ie=o(ie)),j.push(Z);for(let He=0;He<Pe;He++){const Ve=ie[He],it=q(Ve,Z[Ve],j);it!==void 0&&(X+=`${$e}${s(Ve)}:${it}`,$e=",")}if(Ee>g){const He=Ee-g;X+=`${$e}"...":"${y(He)} not stringified"`}return j.pop(),`{${X}}`}case"number":return isFinite(Z)?String(Z):A?A(Z):"null";case"boolean":return Z===!0?"true":"false";case"undefined":return;case"bigint":if(I)return String(Z);default:return A?A(Z):void 0}}function Q(re,Z,j){if(arguments.length>1){let X="";if(typeof j=="number"?X=" ".repeat(Math.min(j,10)):typeof j=="string"&&(X=j.slice(0,10)),Z!=null){if(typeof Z=="function")return M("",{"":re},[],Z,X,"");if(Array.isArray(Z))return B("",re,[],w(Z),X,"")}if(X.length!==0)return L("",re,[],X,"")}return q("",re,[])}return Q}})(rI,rI.exports);var yge=rI.exports;const hW=ro(yge);hW.configure;const mge=hW;function nI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bge(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function dW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function wge(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nI(e.outputLen),nI(e.blockLen)}function $ge(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function _ge(e,r){dW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Gf={number:nI,bool:bge,bytes:dW,hash:wge,exists:$ge,output:_ge},_E=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Qa=(e,r)=>e<<32-r|e>>>r,xge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xge)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Ege(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function J3(e){if(typeof e=="string"&&(e=Ege(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function Sge(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let pW=class{clone(){return this._cloneInto()}};function vW(e){const r=n=>e().update(J3(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function gW(e=32){if(_E&&typeof _E.getRandomValues=="function")return _E.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function kge(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let Tge=class extends pW{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=xE(this.buffer)}update(r){Gf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=J3(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=xE(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Gf.exists(this),Gf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;kge(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=xE(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Ige=(e,r,t)=>e&r^~e&t,Age=(e,r,t)=>e&r^e&t^r&t,Oge=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nc=new Uint32Array(64);let yW=class extends Tge{constructor(){super(64,32,8,!1),this.A=rc[0]|0,this.B=rc[1]|0,this.C=rc[2]|0,this.D=rc[3]|0,this.E=rc[4]|0,this.F=rc[5]|0,this.G=rc[6]|0,this.H=rc[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)nc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=nc[c-15],y=nc[c-2],w=Qa(d,7)^Qa(d,18)^d>>>3,b=Qa(y,17)^Qa(y,19)^y>>>10;nc[c]=b+nc[c-7]+w+nc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=Qa(a,6)^Qa(a,11)^Qa(a,25),y=f+d+Ige(a,l,u)+Oge[c]+nc[c]|0,b=(Qa(n,2)^Qa(n,13)^Qa(n,22))+Age(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){nc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Cge=class extends yW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Fw=vW(()=>new yW);vW(()=>new Cge);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mW=BigInt(0),x_=BigInt(1),Pge=BigInt(2),E_=e=>e instanceof Uint8Array,Nge=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function jp(e){if(!E_(e))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Nge[e[t]];return r}function bW(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function Q3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function zp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");r[t]=s}return r}function os(e){return Q3(jp(e))}function eP(e){if(!E_(e))throw new Error("Uint8Array expected");return Q3(jp(Uint8Array.from(e).reverse()))}const kc=(e,r)=>zp(e.toString(16).padStart(r*2,"0")),wW=(e,r)=>kc(e,r).reverse(),Rge=e=>zp(bW(e));function Ti(e,r,t){let n;if(typeof r=="string")try{n=zp(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(E_(r))n=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${e} expected ${t} bytes, got ${i}`);return n}function Gs(...e){const r=new Uint8Array(e.reduce((n,i)=>n+i.length,0));let t=0;return e.forEach(n=>{if(!E_(n))throw new Error("Uint8Array expected");r.set(n,t),t+=n.length}),r}function Dge(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function S_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Bge(e){let r;for(r=0;e>mW;e>>=x_,r+=1);return r}const Mge=(e,r)=>e>>BigInt(r)&x_,Lge=(e,r,t)=>e|(t?x_:mW)<<BigInt(r),tP=e=>(Pge<<BigInt(e-1))-x_,EE=e=>new Uint8Array(e),PB=e=>Uint8Array.from(e);function $W(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=EE(e),i=EE(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...c)=>t(i,n,...c),l=(c=EE())=>{i=a(PB([0]),c),n=a(),c.length!==0&&(i=a(PB([1]),c),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let c=0;const d=[];for(;c<r;){n=a();const y=n.slice();d.push(y),c+=n.length}return Gs(...d)};return(c,d)=>{o(),l(c);let y;for(;!(y=d(u()));)l();return o(),y}}const Fge={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function vv(e,r,t={}){const n=(i,s,o)=>{const a=Fge[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(r))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return e}const jge=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Mge,bitLen:Bge,bitMask:tP,bitSet:Lge,bytesToHex:jp,bytesToNumberBE:os,bytesToNumberLE:eP,concatBytes:Gs,createHmacDrbg:$W,ensureBytes:Ti,equalBytes:Dge,hexToBytes:zp,hexToNumber:Q3,numberToBytesBE:kc,numberToBytesLE:wW,numberToHexUnpadded:bW,numberToVarBytesBE:Rge,utf8ToBytes:S_,validateObject:vv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vi=BigInt(0),Nn=BigInt(1),Bf=BigInt(2),zge=BigInt(3),iI=BigInt(4),NB=BigInt(5),RB=BigInt(8);BigInt(9);BigInt(16);function ei(e,r){const t=e%r;return t>=vi?t:r+t}function Hge(e,r,t){if(t<=vi||r<vi)throw new Error("Expected power/modulo > 0");if(t===Nn)return vi;let n=Nn;for(;r>vi;)r&Nn&&(n=n*e%t),e=e*e%t,r>>=Nn;return n}function To(e,r,t){let n=e;for(;r-- >vi;)n*=n,n%=t;return n}function sI(e,r){if(e===vi||r<=vi)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ei(e,r),n=r,i=vi,s=Nn;for(;t!==vi;){const a=n/t,l=n%t,u=i-s*a;n=t,t=l,i=s,s=u}if(n!==Nn)throw new Error("invert: does not exist");return ei(i,r)}function Uge(e){const r=(e-Nn)/Bf;let t,n,i;for(t=e-Nn,n=0;t%Bf===vi;t/=Bf,n++);for(i=Bf;i<e&&Hge(i,r,e)!==e-Nn;i++);if(n===1){const o=(e+Nn)/iI;return function(l,u){const f=l.pow(u,o);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+Nn)/Bf;return function(a,l){if(a.pow(l,r)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),t),c=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let y=1;for(let b=a.sqr(d);y<u&&!a.eql(b,a.ONE);y++)b=a.sqr(b);const w=a.pow(f,Nn<<BigInt(u-y-1));f=a.sqr(w),c=a.mul(c,w),d=a.mul(d,f),u=y}return c}}function Wge(e){if(e%iI===zge){const r=(e+Nn)/iI;return function(n,i){const s=n.pow(i,r);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%RB===NB){const r=(e-NB)/RB;return function(n,i){const s=n.mul(i,Bf),o=n.pow(s,r),a=n.mul(i,o),l=n.mul(n.mul(a,Bf),o),u=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Uge(e)}const qge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _W(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=qge.reduce((n,i)=>(n[i]="function",n),r);return vv(e,t)}function Kge(e,r,t){if(t<vi)throw new Error("Expected power > 0");if(t===vi)return e.ONE;if(t===Nn)return r;let n=e.ONE,i=r;for(;t>vi;)t&Nn&&(n=e.mul(n,i)),i=e.sqr(i),t>>=Nn;return n}function Vge(e,r){const t=new Array(r.length),n=r.reduce((s,o,a)=>e.is0(o)?s:(t[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return r.reduceRight((s,o,a)=>e.is0(o)?s:(t[a]=e.mul(s,t[a]),e.mul(s,o)),i),t}function rP(e,r){const t=r!==void 0?r:e.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Gge(e,r,t=!1,n={}){if(e<=vi)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=rP(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Wge(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:tP(i),ZERO:vi,ONE:Nn,create:l=>ei(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return vi<=l&&l<e},is0:l=>l===vi,isOdd:l=>(l&Nn)===Nn,neg:l=>ei(-l,e),eql:(l,u)=>l===u,sqr:l=>ei(l*l,e),add:(l,u)=>ei(l+u,e),sub:(l,u)=>ei(l-u,e),mul:(l,u)=>ei(l*u,e),pow:(l,u)=>Kge(a,l,u),div:(l,u)=>ei(l*sI(u,e),e),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>sI(l,e),sqrt:n.sqrt||(l=>o(a,l)),invertBatch:l=>Vge(a,l),cmov:(l,u,f)=>f?u:l,toBytes:l=>t?wW(l,s):kc(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?eP(l):os(l)}});return Object.freeze(a)}function Yge(e,r,t=!1){e=Ti("privateHash",e);const n=e.length,i=rP(r).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=t?eP(e):os(e);return ei(s,r-Nn)+Nn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zge=BigInt(0),SE=BigInt(1);function Xge(e,r){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(r/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>Zge;)s&SE&&(o=o.add(a)),a=a.double(),s>>=SE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),l=[];let u=i,f=u;for(let c=0;c<o;c++){f=u,l.push(f);for(let d=1;d<a;d++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=n(i);let u=e.ZERO,f=e.BASE;const c=BigInt(2**i-1),d=2**i,y=BigInt(i);for(let w=0;w<a;w++){const b=w*l;let T=Number(o&c);o>>=y,T>l&&(T-=d,o+=SE);const _=b,A=b+Math.abs(T)-1,x=w%2!==0,I=T<0;T===0?f=f.add(t(x,s[_])):u=u.add(t(I,s[A]))}return{p:u,f}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&s.set(i,a(u))),this.wNAF(l,u,o)}}}function xW(e){return _W(e.Fp),vv(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rP(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jge(e){const r=xW(e);vv(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=r;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Qge,hexToBytes:eye}=jge,Yf={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(e){const{Err:r}=Yf;if(e.length<2||e[0]!==2)throw new r("Invalid signature integer tag");const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new r("Invalid signature integer: wrong length");if(n[0]&128)throw new r("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Qge(n),l:e.subarray(t+2)}},toSig(e){const{Err:r}=Yf,t=typeof e=="string"?eye(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new r("Invalid signature tag");if(t[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:i,l:s}=Yf._parseInt(t.subarray(2)),{d:o,l:a}=Yf._parseInt(s);if(a.length)throw new r("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const r=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=r(t(e.s)),i=r(t(e.r)),s=n.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${n}`}},ba=BigInt(0),Ln=BigInt(1),Hl=BigInt(2),jw=BigInt(3),DB=BigInt(4);function tye(e){const r=Jge(e),{Fp:t}=r,n=r.toBytes||((w,b,T)=>{const _=b.toAffine();return Gs(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),i=r.fromBytes||(w=>{const b=w.subarray(1),T=t.fromBytes(b.subarray(0,t.BYTES)),_=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:T,y:_}});function s(w){const{a:b,b:T}=r,_=t.sqr(w),A=t.mul(_,w);return t.add(t.add(A,t.mul(w,b)),T)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&ba<w&&w<r.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:b,nByteLength:T,wrapPrivateKey:_,n:A}=r;if(b&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=jp(w)),typeof w!="string"||!b.includes(w.length))throw new Error("Invalid key");w=w.padStart(T*2,"0")}let x;try{x=typeof w=="bigint"?w:os(Ti("private key",w,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof w}`)}return _&&(x=ei(x,A)),a(x),x}const u=new Map;function f(w){if(!(w instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(b,T,_){if(this.px=b,this.py=T,this.pz=_,b==null||!t.isValid(b))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(b){const{x:T,y:_}=b||{};if(!b||!t.isValid(T)||!t.isValid(_))throw new Error("invalid affine point");if(b instanceof c)throw new Error("projective point not allowed");const A=x=>t.eql(x,t.ZERO);return A(T)&&A(_)?c.ZERO:new c(T,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const T=t.invertBatch(b.map(_=>_.pz));return b.map((_,A)=>_.toAffine(T[A])).map(c.fromAffine)}static fromHex(b){const T=c.fromAffine(i(Ti("pointHex",b)));return T.assertValidity(),T}static fromPrivateKey(b){return c.BASE.multiply(l(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:b,y:T}=this.toAffine();if(!t.isValid(b)||!t.isValid(T))throw new Error("bad point: x or y not FE");const _=t.sqr(T),A=s(b);if(!t.eql(_,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b,C=t.eql(t.mul(T,O),t.mul(x,A)),g=t.eql(t.mul(_,O),t.mul(I,A));return C&&g}negate(){return new c(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:T}=r,_=t.mul(T,jw),{px:A,py:x,pz:I}=this;let O=t.ZERO,C=t.ZERO,g=t.ZERO,M=t.mul(A,A),B=t.mul(x,x),L=t.mul(I,I),q=t.mul(A,x);return q=t.add(q,q),g=t.mul(A,I),g=t.add(g,g),O=t.mul(b,g),C=t.mul(_,L),C=t.add(O,C),O=t.sub(B,C),C=t.add(B,C),C=t.mul(O,C),O=t.mul(q,O),g=t.mul(_,g),L=t.mul(b,L),q=t.sub(M,L),q=t.mul(b,q),q=t.add(q,g),g=t.add(M,M),M=t.add(g,M),M=t.add(M,L),M=t.mul(M,q),C=t.add(C,M),L=t.mul(x,I),L=t.add(L,L),M=t.mul(L,q),O=t.sub(O,M),g=t.mul(L,B),g=t.add(g,g),g=t.add(g,g),new c(O,C,g)}add(b){f(b);const{px:T,py:_,pz:A}=this,{px:x,py:I,pz:O}=b;let C=t.ZERO,g=t.ZERO,M=t.ZERO;const B=r.a,L=t.mul(r.b,jw);let q=t.mul(T,x),Q=t.mul(_,I),re=t.mul(A,O),Z=t.add(T,_),j=t.add(x,I);Z=t.mul(Z,j),j=t.add(q,Q),Z=t.sub(Z,j),j=t.add(T,A);let X=t.add(x,O);return j=t.mul(j,X),X=t.add(q,re),j=t.sub(j,X),X=t.add(_,A),C=t.add(I,O),X=t.mul(X,C),C=t.add(Q,re),X=t.sub(X,C),M=t.mul(B,j),C=t.mul(L,re),M=t.add(C,M),C=t.sub(Q,M),M=t.add(Q,M),g=t.mul(C,M),Q=t.add(q,q),Q=t.add(Q,q),re=t.mul(B,re),j=t.mul(L,j),Q=t.add(Q,re),re=t.sub(q,re),re=t.mul(B,re),j=t.add(j,re),q=t.mul(Q,j),g=t.add(g,q),q=t.mul(X,j),C=t.mul(Z,C),C=t.sub(C,q),q=t.mul(Z,Q),M=t.mul(X,M),M=t.add(M,q),new c(C,g,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(c.ZERO)}wNAF(b){return y.wNAFCached(this,u,b,T=>{const _=t.invertBatch(T.map(A=>A.pz));return T.map((A,x)=>A.toAffine(_[x])).map(c.fromAffine)})}multiplyUnsafe(b){const T=c.ZERO;if(b===ba)return T;if(a(b),b===Ln)return this;const{endo:_}=r;if(!_)return y.unsafeLadder(this,b);let{k1neg:A,k1:x,k2neg:I,k2:O}=_.splitScalar(b),C=T,g=T,M=this;for(;x>ba||O>ba;)x&Ln&&(C=C.add(M)),O&Ln&&(g=g.add(M)),M=M.double(),x>>=Ln,O>>=Ln;return A&&(C=C.negate()),I&&(g=g.negate()),g=new c(t.mul(g.px,_.beta),g.py,g.pz),C.add(g)}multiply(b){a(b);let T=b,_,A;const{endo:x}=r;if(x){const{k1neg:I,k1:O,k2neg:C,k2:g}=x.splitScalar(T);let{p:M,f:B}=this.wNAF(O),{p:L,f:q}=this.wNAF(g);M=y.constTimeNegate(I,M),L=y.constTimeNegate(C,L),L=new c(t.mul(L.px,x.beta),L.py,L.pz),_=M.add(L),A=B.add(q)}else{const{p:I,f:O}=this.wNAF(T);_=I,A=O}return c.normalizeZ([_,A])[0]}multiplyAndAddUnsafe(b,T,_){const A=c.BASE,x=(O,C)=>C===ba||C===Ln||!O.equals(A)?O.multiplyUnsafe(C):O.multiply(C),I=x(this,T).add(x(b,_));return I.is0()?void 0:I}toAffine(b){const{px:T,py:_,pz:A}=this,x=this.is0();b==null&&(b=x?t.ONE:t.inv(A));const I=t.mul(T,b),O=t.mul(_,b),C=t.mul(A,b);if(x)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:I,y:O}}isTorsionFree(){const{h:b,isTorsionFree:T}=r;if(b===Ln)return!0;if(T)return T(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:T}=r;return b===Ln?this:T?T(c,this):this.multiplyUnsafe(r.h)}toRawBytes(b=!0){return this.assertValidity(),n(c,this,b)}toHex(b=!0){return jp(this.toRawBytes(b))}}c.BASE=new c(r.Gx,r.Gy,t.ONE),c.ZERO=new c(t.ZERO,t.ONE,t.ZERO);const d=r.nBitLength,y=Xge(c,r.endo?Math.ceil(d/2):d);return{CURVE:r,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function rye(e){const r=xW(e);return vv(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function nye(e){const r=rye(e),{Fp:t,n}=r,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return ba<j&&j<t.ORDER}function a(j){return ei(j,n)}function l(j){return sI(j,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=tye({...r,toBytes(j,X,ie){const Ee=X.toAffine(),$e=t.toBytes(Ee.x),Pe=Gs;return ie?Pe(Uint8Array.from([X.hasEvenY()?2:3]),$e):Pe(Uint8Array.from([4]),$e,t.toBytes(Ee.y))},fromBytes(j){const X=j.length,ie=j[0],Ee=j.subarray(1);if(X===i&&(ie===2||ie===3)){const $e=os(Ee);if(!o($e))throw new Error("Point is not on curve");const Pe=c($e);let He=t.sqrt(Pe);const Ve=(He&Ln)===Ln;return(ie&1)===1!==Ve&&(He=t.neg(He)),{x:$e,y:He}}else if(X===s&&ie===4){const $e=t.fromBytes(Ee.subarray(0,t.BYTES)),Pe=t.fromBytes(Ee.subarray(t.BYTES,2*t.BYTES));return{x:$e,y:Pe}}else throw new Error(`Point of length ${X} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=j=>jp(kc(j,r.nByteLength));function w(j){const X=n>>Ln;return j>X}function b(j){return w(j)?a(-j):j}const T=(j,X,ie)=>os(j.slice(X,ie));class _{constructor(X,ie,Ee){this.r=X,this.s=ie,this.recovery=Ee,this.assertValidity()}static fromCompact(X){const ie=r.nByteLength;return X=Ti("compactSignature",X,ie*2),new _(T(X,0,ie),T(X,ie,2*ie))}static fromDER(X){const{r:ie,s:Ee}=Yf.toSig(Ti("DER",X));return new _(ie,Ee)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(X){return new _(this.r,this.s,X)}recoverPublicKey(X){const{r:ie,s:Ee,recovery:$e}=this,Pe=g(Ti("msgHash",X));if($e==null||![0,1,2,3].includes($e))throw new Error("recovery id invalid");const He=$e===2||$e===3?ie+r.n:ie;if(He>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ve=$e&1?"03":"02",it=u.fromHex(Ve+y(He)),_e=l(He),ge=a(-Pe*_e),Te=a(Ee*_e),je=u.BASE.multiplyAndAddUnsafe(it,ge,Te);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return zp(this.toDERHex())}toDERHex(){return Yf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zp(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const A={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=r.randomBytes(t.BYTES+8),X=Yge(j,n);return kc(X,r.nByteLength)},precompute(j=8,X=u.BASE){return X._setWindowSize(j),X.multiply(BigInt(3)),X}};function x(j,X=!0){return u.fromPrivateKey(j).toRawBytes(X)}function I(j){const X=j instanceof Uint8Array,ie=typeof j=="string",Ee=(X||ie)&&j.length;return X?Ee===i||Ee===s:ie?Ee===2*i||Ee===2*s:j instanceof u}function O(j,X,ie=!0){if(I(j))throw new Error("first arg must be private key");if(!I(X))throw new Error("second arg must be public key");return u.fromHex(X).multiply(f(j)).toRawBytes(ie)}const C=r.bits2int||function(j){const X=os(j),ie=j.length*8-r.nBitLength;return ie>0?X>>BigInt(ie):X},g=r.bits2int_modN||function(j){return a(C(j))},M=tP(r.nBitLength);function B(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(ba<=j&&j<M))throw new Error(`bigint expected < 2^${r.nBitLength}`);return kc(j,r.nByteLength)}function L(j,X,ie=q){if(["recovered","canonical"].some(S=>S in ie))throw new Error("sign() legacy options not supported");const{hash:Ee,randomBytes:$e}=r;let{lowS:Pe,prehash:He,extraEntropy:Ve}=ie;Pe==null&&(Pe=!0),j=Ti("msgHash",j),He&&(j=Ti("prehashed msgHash",Ee(j)));const it=g(j),_e=f(X),ge=[B(_e),B(it)];if(Ve!=null){const S=Ve===!0?$e(t.BYTES):Ve;ge.push(Ti("extraEntropy",S,t.BYTES))}const Te=Gs(...ge),je=it;function $(S){const N=C(S);if(!d(N))return;const F=l(N),z=u.BASE.multiply(N).toAffine(),V=a(z.x);if(V===ba)return;const ae=a(F*a(je+V*_e));if(ae===ba)return;let ye=(z.x===V?0:2)|Number(z.y&Ln),Ue=ae;return Pe&&w(ae)&&(Ue=b(ae),ye^=1),new _(V,Ue,ye)}return{seed:Te,k2sig:$}}const q={lowS:r.lowS,prehash:!1},Q={lowS:r.lowS,prehash:!1};function re(j,X,ie=q){const{seed:Ee,k2sig:$e}=L(j,X,ie);return $W(r.hash.outputLen,r.nByteLength,r.hmac)(Ee,$e)}u.BASE._setWindowSize(8);function Z(j,X,ie,Ee=Q){var z;const $e=j;if(X=Ti("msgHash",X),ie=Ti("publicKey",ie),"strict"in Ee)throw new Error("options.strict was renamed to lowS");const{lowS:Pe,prehash:He}=Ee;let Ve,it;try{if(typeof $e=="string"||$e instanceof Uint8Array)try{Ve=_.fromDER($e)}catch(V){if(!(V instanceof Yf.Err))throw V;Ve=_.fromCompact($e)}else if(typeof $e=="object"&&typeof $e.r=="bigint"&&typeof $e.s=="bigint"){const{r:V,s:ae}=$e;Ve=new _(V,ae)}else throw new Error("PARSE");it=u.fromHex(ie)}catch(V){if(V.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Pe&&Ve.hasHighS())return!1;He&&(X=r.hash(X));const{r:_e,s:ge}=Ve,Te=g(X),je=l(ge),$=a(Te*je),S=a(_e*je),N=(z=u.BASE.multiplyAndAddUnsafe(it,$,S))==null?void 0:z.toAffine();return N?a(N.x)===_e:!1}return{CURVE:r,getPublicKey:x,getSharedSecret:O,sign:re,verify:Z,ProjectivePoint:u,Signature:_,utils:A}}function iye(e,r){const t=e.ORDER;let n=ba;for(let d=t-Ln;d%Hl===ba;d/=Hl)n+=Ln;const i=n,s=(t-Ln)/Hl**i,o=(s-Ln)/Hl,a=Hl**i-Ln,l=Hl**(i-Ln),u=e.pow(r,s),f=e.pow(r,(s+Ln)/Hl);let c=(d,y)=>{let w=u,b=e.pow(y,a),T=e.sqr(b);T=e.mul(T,y);let _=e.mul(d,T);_=e.pow(_,o),_=e.mul(_,b),b=e.mul(_,y),T=e.mul(_,d);let A=e.mul(T,b);_=e.pow(A,l);let x=e.eql(_,e.ONE);b=e.mul(T,f),_=e.mul(A,w),T=e.cmov(b,T,x),A=e.cmov(_,A,x);for(let I=i;I>Ln;I--){let O=Hl**(I-Hl),C=e.pow(A,O);const g=e.eql(C,e.ONE);b=e.mul(T,w),w=e.mul(w,w),C=e.mul(A,w),T=e.cmov(b,T,g),A=e.cmov(C,A,g)}return{isValid:x,value:T}};if(e.ORDER%DB===jw){const d=(e.ORDER-jw)/DB,y=e.sqrt(e.neg(r));c=(w,b)=>{let T=e.sqr(b);const _=e.mul(w,b);T=e.mul(T,_);let A=e.pow(T,d);A=e.mul(A,_);const x=e.mul(A,y),I=e.mul(e.sqr(A),b),O=e.eql(I,w);let C=e.cmov(x,A,O);return{isValid:O,value:C}}}return c}function sye(e,r){if(_W(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=iye(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,f,c;i=e.sqr(n),i=e.mul(i,r.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,r.B),a=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,r.A),s=e.sqr(o),u=e.sqr(a),l=e.mul(u,r.A),s=e.add(s,l),s=e.mul(s,o),u=e.mul(u,a),l=e.mul(u,r.B),s=e.add(s,l),f=e.mul(i,o);const{isValid:d,value:y}=t(s,u);c=e.mul(i,n),c=e.mul(c,y),f=e.cmov(f,o,d),c=e.cmov(c,y,d);const w=e.isOdd(n)===e.isOdd(c);return c=e.cmov(e.neg(c),c,w),f=e.div(f,a),{x:f,y:c}}}function oye(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return S_(e);throw new Error("DST must be Uint8Array or string")}const aye=os;function pc(e,r){if(e<0||e>=1<<8*r)throw new Error(`bad I2OSP call: value=${e} length=${r}`);const t=Array.from({length:r}).fill(0);for(let n=r-1;n>=0;n--)t[n]=e&255,e>>>=8;return new Uint8Array(t)}function lye(e,r){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function Ny(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function nP(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function uye(e,r,t,n){Ny(e),Ny(r),nP(t),r.length>255&&(r=n(Gs(S_("H2C-OVERSIZE-DST-"),r)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(t/i);if(o>255)throw new Error("Invalid xmd length");const a=Gs(r,pc(r.length,1)),l=pc(0,s),u=pc(t,2),f=new Array(o),c=n(Gs(l,e,u,pc(0,1),a));f[0]=n(Gs(c,pc(1,1),a));for(let y=1;y<=o;y++){const w=[lye(c,f[y-1]),pc(y+1,1),a];f[y]=n(Gs(...w))}return Gs(...f).slice(0,t)}function cye(e,r,t,n,i){if(Ny(e),Ny(r),nP(t),r.length>255){const s=Math.ceil(2*n/8);r=i.create({dkLen:s}).update(S_("H2C-OVERSIZE-DST-")).update(r).digest()}if(t>65535||r.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(e).update(pc(t,2)).update(r).update(pc(r.length,1)).digest()}function BB(e,r,t){vv(t,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:l}=t;Ny(e),nP(r);const u=oye(l),f=n.toString(2).length,c=Math.ceil((f+i)/8),d=r*s*c;let y;if(a==="xmd")y=uye(e,u,d,o);else if(a==="xof")y=cye(e,u,d,i,o);else if(a==="_internal_pass")y=e;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(r);for(let b=0;b<r;b++){const T=new Array(s);for(let _=0;_<s;_++){const A=c*(_+b*s),x=y.subarray(A,A+c);T[_]=ei(aye(x),n)}w[b]=T}return w}function fye(e,r){const t=r.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,l]=t.map(u=>u.reduce((f,c)=>e.add(e.mul(f,n),c)));return n=e.div(s,o),i=e.mul(i,e.div(a,l)),{x:n,y:i}}}function hye(e,r,t){if(typeof r!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=BB(n,2,{...t,DST:t.DST,...i}),o=e.fromAffine(r(s[0])),a=e.fromAffine(r(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=BB(n,1,{...t,DST:t.encodeDST,...i}),o=e.fromAffine(r(s[0])).clearCofactor();return o.assertValidity(),o}}}let EW=class extends pW{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Gf.hash(r);const n=J3(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Gf.exists(this),this.iHash.update(r),this}digestInto(r){Gf.exists(this),Gf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const SW=(e,r,t)=>new EW(e,r).update(t).digest();SW.create=(e,r)=>new EW(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dye(e){return{hash:e,hmac:(r,...t)=>SW(e,r,Sge(...t)),randomBytes:gW}}function pye(e,r){const t=n=>nye({...e,...dye(n)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kW=BigInt(1),Hw=BigInt(2),MB=(e,r)=>(e+r/Hw)/r;function TW(e){const r=k_,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%r,f=u*u*e%r,c=To(f,t,r)*f%r,d=To(c,t,r)*f%r,y=To(d,Hw,r)*u%r,w=To(y,i,r)*y%r,b=To(w,s,r)*w%r,T=To(b,a,r)*b%r,_=To(T,l,r)*T%r,A=To(_,a,r)*b%r,x=To(A,t,r)*f%r,I=To(x,o,r)*w%r,O=To(I,n,r)*u%r,C=To(O,Hw,r);if(!Bc.eql(Bc.sqr(C),e))throw new Error("Cannot find square root");return C}const Bc=Gge(k_,void 0,void 0,{sqrt:TW}),es=pye({a:BigInt(0),b:BigInt(7),Fp:Bc,n:zw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=zw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-kW*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=MB(s*e,r),l=MB(-n*e,r);let u=ei(e-a*t-l*i,r),f=ei(-a*n-l*s,r);const c=u>o,d=f>o;if(c&&(u=r-u),d&&(f=r-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:f}}}},Fw),T_=BigInt(0),IW=e=>typeof e=="bigint"&&T_<e&&e<k_,vye=e=>typeof e=="bigint"&&T_<e&&e<zw,LB={};function Uw(e,...r){let t=LB[e];if(t===void 0){const n=Fw(Uint8Array.from(e,i=>i.charCodeAt(0)));t=Gs(n,n),LB[e]=t}return Fw(Gs(t,...r))}const iP=e=>e.toRawBytes(!0).slice(1),oI=e=>kc(e,32),kE=e=>ei(e,k_),Ry=e=>ei(e,zw),sP=es.ProjectivePoint,gye=(e,r,t)=>sP.BASE.multiplyAndAddUnsafe(e,r,t);function aI(e){let r=es.utils.normPrivateKeyToScalar(e),t=sP.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ry(-r),bytes:iP(t)}}function AW(e){if(!IW(e))throw new Error("bad x: need 0 < x < p");const r=kE(e*e),t=kE(r*e+BigInt(7));let n=TW(t);n%Hw!==T_&&(n=kE(-n));const i=new sP(e,n,kW);return i.assertValidity(),i}function OW(...e){return Ry(os(Uw("BIP0340/challenge",...e)))}function yye(e){return aI(e).bytes}function mye(e,r,t=gW(32)){const n=Ti("message",e),{bytes:i,scalar:s}=aI(r),o=Ti("auxRand",t,32),a=oI(s^os(Uw("BIP0340/aux",o))),l=Uw("BIP0340/nonce",a,i,n),u=Ry(os(l));if(u===T_)throw new Error("sign failed: k is zero");const{bytes:f,scalar:c}=aI(u),d=OW(f,i,n),y=new Uint8Array(64);if(y.set(f,0),y.set(oI(Ry(c+d*s)),32),!CW(y,n,i))throw new Error("sign: Invalid signature produced");return y}function CW(e,r,t){const n=Ti("signature",e,64),i=Ti("message",r),s=Ti("publicKey",t,32);try{const o=AW(os(s)),a=os(n.subarray(0,32));if(!IW(a))return!1;const l=os(n.subarray(32,64));if(!vye(l))return!1;const u=OW(oI(a),iP(o),i),f=gye(o,l,Ry(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const km={getPublicKey:yye,sign:mye,verify:CW,utils:{randomPrivateKey:es.utils.randomPrivateKey,lift_x:AW,pointToBytes:iP,numberToBytesBE:kc,bytesToNumberBE:os,taggedHash:Uw,mod:ei}},bye=fye(Bc,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(r=>BigInt(r)))),wye=sye(Bc,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Bc.create(BigInt("-11"))});hye(es.ProjectivePoint,e=>{const{x:r,y:t}=wye(Bc.create(e[0]));return bye(r,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Bc.ORDER,m:1,k:128,expand:"xmd",hash:Fw});const W1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,$ye=Object.freeze(Object.defineProperty({__proto__:null,crypto:W1},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _ye=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),xye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),sh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ca=(e,r)=>e<<32-r|e>>>r,PW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!PW)throw new Error("Non little-endian hardware is not supported");const Eye=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function Ys(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let t=0;t<e.length;t++)r+=Eye[e[t]];return r}function Mc(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=t*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}const NW=async()=>{};async function Sye(e,r,t){let n=Date.now();for(let i=0;i<e;i++){t(i);const s=Date.now()-n;s>=0&&s<r||(await NW(),n+=s)}}function oP(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Tm(e){if(typeof e=="string"&&(e=oP(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function tp(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const r=e.reduce((n,i)=>n+i.length,0),t=new Uint8Array(r);for(let n=0,i=0;n<e.length;n++){const s=e[n];t.set(s,i),i+=s.length}return t}let aP=class{clone(){return this._cloneInto()}};const kye=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function Tye(e,r){if(r!==void 0&&(typeof r!="object"||!kye(r)))throw new TypeError("Options should be object or undefined");return Object.assign(e,r)}function I_(e){const r=n=>e().update(Tm(n)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Iye(e){const r=(n,i)=>e(i).update(Tm(n)).digest(),t=e({});return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=n=>e(n),r}function RW(e=32){if(W1&&typeof W1.getRandomValues=="function")return W1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Aye=Object.freeze(Object.defineProperty({__proto__:null,Hash:aP,asyncLoop:Sye,bytesToHex:Ys,checkOpts:Tye,concatBytes:tp,createView:sh,hexToBytes:Mc,isLE:PW,nextTick:NW,randomBytes:RW,rotr:ca,toBytes:Tm,u32:xye,u8:_ye,utf8ToBytes:oP,wrapConstructor:I_,wrapConstructorWithOpts:Iye},Symbol.toStringTag,{value:"Module"}));function lI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Oye(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function DW(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Cye(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lI(e.outputLen),lI(e.blockLen)}function Pye(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function Nye(e,r){DW(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Zf={number:lI,bool:Oye,bytes:DW,hash:Cye,exists:Pye,output:Nye};function Rye(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}let BW=class extends aP{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=sh(this.buffer)}update(r){Zf.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=Tm(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=sh(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Zf.exists(this),Zf.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Rye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=sh(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}};const Dye=(e,r,t)=>e&r^~e&t,Bye=(e,r,t)=>e&r^e&t^r&t,Mye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ic=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sc=new Uint32Array(64);class MW extends BW{constructor(){super(64,32,8,!1),this.A=ic[0]|0,this.B=ic[1]|0,this.C=ic[2]|0,this.D=ic[3]|0,this.E=ic[4]|0,this.F=ic[5]|0,this.G=ic[6]|0,this.H=ic[7]|0}get(){const{A:r,B:t,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[r,t,n,i,s,o,a,l]}set(r,t,n,i,s,o,a,l){this.A=r|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(r,t){for(let c=0;c<16;c++,t+=4)sc[c]=r.getUint32(t,!1);for(let c=16;c<64;c++){const d=sc[c-15],y=sc[c-2],w=ca(d,7)^ca(d,18)^d>>>3,b=ca(y,17)^ca(y,19)^y>>>10;sc[c]=b+sc[c-7]+w+sc[c-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:f}=this;for(let c=0;c<64;c++){const d=ca(a,6)^ca(a,11)^ca(a,25),y=f+d+Dye(a,l,u)+Mye[c]+sc[c]|0,b=(ca(n,2)^ca(n,13)^ca(n,22))+Bye(n,i,s)|0;f=u,u=l,l=a,a=o+y|0,o=s,s=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,l,u,f)}roundClean(){sc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Lye extends MW{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const gv=I_(()=>new MW),Fye=I_(()=>new Lye),jye=Object.freeze(Object.defineProperty({__proto__:null,sha224:Fye,sha256:gv},Symbol.toStringTag,{value:"Module"}));var lP={};Object.defineProperty(lP,"__esModule",{value:!0});var uP=lP.wordlist=void 0;uP=lP.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Zs={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.output=ui.exists=ui.hash=Gd=ui.bytes=ui.bool=ui.number=void 0;function Ww(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ui.number=Ww;function LW(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ui.bool=LW;function cP(e,...r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}var Gd=ui.bytes=cP;function FW(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ww(e.outputLen),Ww(e.blockLen)}ui.hash=FW;function jW(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}ui.exists=jW;function zW(e,r){cP(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}ui.output=zW;const zye={number:Ww,bool:LW,bytes:cP,hash:FW,exists:jW,output:zW};ui.default=zye;var Hp={},HW={},Im={};const Hye=fv($ye);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=Hye,t=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);e.u8=t;const n=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));e.u32=n;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);e.createView=i;const s=(I,O)=>I<<32-O|I>>>O;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(I,O)=>O.toString(16).padStart(2,"0"));function a(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let O="";for(let C=0;C<I.length;C++)O+=o[I[C]];return O}e.bytesToHex=a;function l(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const O=new Uint8Array(I.length/2);for(let C=0;C<O.length;C++){const g=C*2,M=I.slice(g,g+2),B=Number.parseInt(M,16);if(Number.isNaN(B)||B<0)throw new Error("Invalid byte sequence");O[C]=B}return O}e.hexToBytes=l;const u=async()=>{};e.nextTick=u;async function f(I,O,C){let g=Date.now();for(let M=0;M<I;M++){C(M);const B=Date.now()-g;B>=0&&B<O||(await(0,e.nextTick)(),g+=B)}}e.asyncLoop=f;function c(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}e.utf8ToBytes=c;function d(I){if(typeof I=="string"&&(I=c(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}e.toBytes=d;function y(...I){if(!I.every(g=>g instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const O=I.reduce((g,M)=>g+M.length,0),C=new Uint8Array(O);for(let g=0,M=0;g<I.length;g++){const B=I[g];C.set(B,M),M+=B.length}return C}e.concatBytes=y;class w{clone(){return this._cloneInto()}}e.Hash=w;const b=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function T(I,O){if(O!==void 0&&(typeof O!="object"||!b(O)))throw new TypeError("Options should be object or undefined");return Object.assign(I,O)}e.checkOpts=T;function _(I){const O=g=>I().update(d(g)).digest(),C=I();return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=()=>I(),O}e.wrapConstructor=_;function A(I){const O=(g,M)=>I(M).update(d(g)).digest(),C=I({});return O.outputLen=C.outputLen,O.blockLen=C.blockLen,O.create=g=>I(g),O}e.wrapConstructorWithOpts=A;function x(I=32){if(r.crypto&&typeof r.crypto.getRandomValues=="function")return r.crypto.getRandomValues(new Uint8Array(I));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=x})(Im);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const r=ui,t=Im;class n extends t.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,r.default.hash(o);const l=(0,t.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,f=new Uint8Array(u);f.set(l.length>u?o.create().update(l).digest():l);for(let c=0;c<f.length;c++)f[c]^=54;this.iHash.update(f),this.oHash=o.create();for(let c=0;c<f.length;c++)f[c]^=106;this.oHash.update(f),f.fill(0)}update(o){return r.default.exists(this),this.iHash.update(o),this}digestInto(o){r.default.exists(this),r.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:l,finished:u,destroyed:f,blockLen:c,outputLen:d}=this;return o=o,o.finished=u,o.destroyed=f,o.blockLen=c,o.outputLen=d,o.oHash=a._cloneInto(o.oHash),o.iHash=l._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,o,a)=>new n(s,o).update(a).digest();e.hmac=i,e.hmac.create=(s,o)=>new n(s,o)})(HW);Object.defineProperty(Hp,"__esModule",{value:!0});Hp.pbkdf2Async=Hp.pbkdf2=void 0;const N0=ui,Uye=HW,$p=Im;function UW(e,r,t,n){N0.default.hash(e);const i=(0,$p.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(N0.default.number(s),N0.default.number(o),N0.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,$p.toBytes)(r),u=(0,$p.toBytes)(t),f=new Uint8Array(o),c=Uye.hmac.create(e,l),d=c._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:c,PRFSalt:d}}function WW(e,r,t,n,i){return e.destroy(),r.destroy(),n&&n.destroy(),i.fill(0),t}function Wye(e,r,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=UW(e,r,t,n);let u;const f=new Uint8Array(4),c=(0,$p.createView)(f),d=new Uint8Array(a.outputLen);for(let y=1,w=0;w<s;y++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);c.setInt32(0,y,!1),(u=l._cloneInto(u)).update(f).digestInto(d),b.set(d.subarray(0,b.length));for(let T=1;T<i;T++){a._cloneInto(u).update(d).digestInto(d);for(let _=0;_<b.length;_++)b[_]^=d[_]}}return WW(a,l,o,u,d)}Hp.pbkdf2=Wye;async function qye(e,r,t,n){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:l,PRFSalt:u}=UW(e,r,t,n);let f;const c=new Uint8Array(4),d=(0,$p.createView)(c),y=new Uint8Array(l.outputLen);for(let w=1,b=0;b<s;w++,b+=l.outputLen){const T=a.subarray(b,b+l.outputLen);d.setInt32(0,w,!1),(f=u._cloneInto(f)).update(c).digestInto(y),T.set(y.subarray(0,T.length)),await(0,$p.asyncLoop)(i-1,o,_=>{l._cloneInto(f).update(y).digestInto(y);for(let A=0;A<T.length;A++)T[A]^=y[A]})}return WW(l,u,a,f,y)}Hp.pbkdf2Async=qye;const Kye=fv(jye);var jo={},A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.SHA2=void 0;const TE=ui,Ng=Im;function Vye(e,r,t,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=n?4:0,u=n?0:4;e.setUint32(r+l,o,n),e.setUint32(r+u,a,n)}class Gye extends Ng.Hash{constructor(r,t,n,i){super(),this.blockLen=r,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=(0,Ng.createView)(this.buffer)}update(r){TE.default.exists(this);const{view:t,buffer:n,blockLen:i}=this;r=(0,Ng.toBytes)(r);const s=r.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=(0,Ng.createView)(r);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(r.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){TE.default.exists(this),TE.default.output(r,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)t[c]=0;Vye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=(0,Ng.createView)(r),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,f[c],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const n=r.slice(0,t);return this.destroy(),n}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return r.length=i,r.pos=a,r.finished=s,r.destroyed=o,i%t&&r.buffer.set(n),r}}A_.SHA2=Gye;var qW={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const r=BigInt(2**32-1),t=BigInt(32);function n(L,q=!1){return q?{h:Number(L&r),l:Number(L>>t&r)}:{h:Number(L>>t&r)|0,l:Number(L&r)|0}}e.fromBig=n;function i(L,q=!1){let Q=new Uint32Array(L.length),re=new Uint32Array(L.length);for(let Z=0;Z<L.length;Z++){const{h:j,l:X}=n(L[Z],q);[Q[Z],re[Z]]=[j,X]}return[Q,re]}e.split=i;const s=(L,q)=>BigInt(L>>>0)<<t|BigInt(q>>>0);e.toBig=s;const o=(L,q,Q)=>L>>>Q,a=(L,q,Q)=>L<<32-Q|q>>>Q,l=(L,q,Q)=>L>>>Q|q<<32-Q,u=(L,q,Q)=>L<<32-Q|q>>>Q,f=(L,q,Q)=>L<<64-Q|q>>>Q-32,c=(L,q,Q)=>L>>>Q-32|q<<64-Q,d=(L,q)=>q,y=(L,q)=>L,w=(L,q,Q)=>L<<Q|q>>>32-Q,b=(L,q,Q)=>q<<Q|L>>>32-Q,T=(L,q,Q)=>q<<Q-32|L>>>64-Q,_=(L,q,Q)=>L<<Q-32|q>>>64-Q;function A(L,q,Q,re){const Z=(q>>>0)+(re>>>0);return{h:L+Q+(Z/2**32|0)|0,l:Z|0}}e.add=A;const x=(L,q,Q)=>(L>>>0)+(q>>>0)+(Q>>>0),I=(L,q,Q,re)=>q+Q+re+(L/2**32|0)|0,O=(L,q,Q,re)=>(L>>>0)+(q>>>0)+(Q>>>0)+(re>>>0),C=(L,q,Q,re,Z)=>q+Q+re+Z+(L/2**32|0)|0,g=(L,q,Q,re,Z)=>(L>>>0)+(q>>>0)+(Q>>>0)+(re>>>0)+(Z>>>0),M=(L,q,Q,re,Z,j)=>q+Q+re+Z+j+(L/2**32|0)|0,B={fromBig:n,split:i,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:l,rotrSL:u,rotrBH:f,rotrBL:c,rotr32H:d,rotr32L:y,rotlSH:w,rotlSL:b,rotlBH:T,rotlBL:_,add:A,add3L:x,add3H:I,add4L:O,add4H:C,add5H:M,add5L:g};e.default=B})(qW);Object.defineProperty(jo,"__esModule",{value:!0});jo.sha384=jo.sha512_256=jo.sha512_224=uI=jo.sha512=jo.SHA512=void 0;const Yye=A_,or=qW,O_=Im,[Zye,Xye]=or.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),oc=new Uint32Array(80),ac=new Uint32Array(80);class Am extends Yye.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:f,Fh:c,Fl:d,Gh:y,Gl:w,Hh:b,Hl:T}=this;return[r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T]}set(r,t,n,i,s,o,a,l,u,f,c,d,y,w,b,T){this.Ah=r|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=f|0,this.Fh=c|0,this.Fl=d|0,this.Gh=y|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(r,t){for(let x=0;x<16;x++,t+=4)oc[x]=r.getUint32(t),ac[x]=r.getUint32(t+=4);for(let x=16;x<80;x++){const I=oc[x-15]|0,O=ac[x-15]|0,C=or.default.rotrSH(I,O,1)^or.default.rotrSH(I,O,8)^or.default.shrSH(I,O,7),g=or.default.rotrSL(I,O,1)^or.default.rotrSL(I,O,8)^or.default.shrSL(I,O,7),M=oc[x-2]|0,B=ac[x-2]|0,L=or.default.rotrSH(M,B,19)^or.default.rotrBH(M,B,61)^or.default.shrSH(M,B,6),q=or.default.rotrSL(M,B,19)^or.default.rotrBL(M,B,61)^or.default.shrSL(M,B,6),Q=or.default.add4L(g,q,ac[x-7],ac[x-16]),re=or.default.add4H(Q,C,L,oc[x-7],oc[x-16]);oc[x]=re|0,ac[x]=Q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:f,Eh:c,El:d,Fh:y,Fl:w,Gh:b,Gl:T,Hh:_,Hl:A}=this;for(let x=0;x<80;x++){const I=or.default.rotrSH(c,d,14)^or.default.rotrSH(c,d,18)^or.default.rotrBH(c,d,41),O=or.default.rotrSL(c,d,14)^or.default.rotrSL(c,d,18)^or.default.rotrBL(c,d,41),C=c&y^~c&b,g=d&w^~d&T,M=or.default.add5L(A,O,g,Xye[x],ac[x]),B=or.default.add5H(M,_,I,C,Zye[x],oc[x]),L=M|0,q=or.default.rotrSH(n,i,28)^or.default.rotrBH(n,i,34)^or.default.rotrBH(n,i,39),Q=or.default.rotrSL(n,i,28)^or.default.rotrBL(n,i,34)^or.default.rotrBL(n,i,39),re=n&s^n&a^s&a,Z=i&o^i&l^o&l;_=b|0,A=T|0,b=y|0,T=w|0,y=c|0,w=d|0,{h:c,l:d}=or.default.add(u|0,f|0,B|0,L|0),u=a|0,f=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const j=or.default.add3L(L,Q,Z);n=or.default.add3H(j,B,q,re),i=j|0}({h:n,l:i}=or.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=or.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=or.default.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:f}=or.default.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:c,l:d}=or.default.add(this.Eh|0,this.El|0,c|0,d|0),{h:y,l:w}=or.default.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:b,l:T}=or.default.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:_,l:A}=or.default.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A)}roundClean(){oc.fill(0),ac.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}jo.SHA512=Am;class Jye extends Am{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Qye extends Am{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class eme extends Am{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}var uI=jo.sha512=(0,O_.wrapConstructor)(()=>new Am);jo.sha512_224=(0,O_.wrapConstructor)(()=>new Jye);jo.sha512_256=(0,O_.wrapConstructor)(()=>new Qye);jo.sha384=(0,O_.wrapConstructor)(()=>new eme);const tme=fv(Aye),KW=fv(Yce);Object.defineProperty(Zs,"__esModule",{value:!0});var VW=Zs.mnemonicToSeedSync=Zs.mnemonicToSeed=nq=Zs.validateMnemonic=Zs.entropyToMnemonic=Zs.mnemonicToEntropy=QW=Zs.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const GW=ui,YW=Hp,rme=Kye,ZW=jo,nme=tme,R0=KW,ime=e=>e[0]==="あいこくしん";function XW(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function fP(e){const r=XW(e),t=r.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:r,words:t}}function JW(e){GW.default.bytes(e,16,20,24,28,32)}function sme(e,r=128){if(GW.default.number(r),r%32!==0||r>256)throw new TypeError("Invalid entropy");return rq((0,nme.randomBytes)(r/8),e)}var QW=Zs.generateMnemonic=sme;const ome=e=>{const r=8-e.length/4;return new Uint8Array([(0,rme.sha256)(e)[0]>>r<<r])};function eq(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(r=>{if(typeof r!="string")throw new Error(`Wordlist: non-string element: ${r}`)}),R0.utils.chain(R0.utils.checksum(1,ome),R0.utils.radix2(11,!0),R0.utils.alphabet(e))}function tq(e,r){const{words:t}=fP(e),n=eq(r).decode(t);return JW(n),n}Zs.mnemonicToEntropy=tq;function rq(e,r){return JW(e),eq(r).encode(e).join(ime(r)?"　":" ")}Zs.entropyToMnemonic=rq;function ame(e,r){try{tq(e,r)}catch{return!1}return!0}var nq=Zs.validateMnemonic=ame;const iq=e=>XW(`mnemonic${e}`);function lme(e,r=""){return(0,YW.pbkdf2Async)(ZW.sha512,fP(e).nfkd,iq(r),{c:2048,dkLen:64})}Zs.mnemonicToSeed=lme;function ume(e,r=""){return(0,YW.pbkdf2)(ZW.sha512,fP(e).nfkd,iq(r),{c:2048,dkLen:64})}VW=Zs.mnemonicToSeedSync=ume;class sq extends aP{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Zf.hash(r);const n=Tm(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?r.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=r.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(r){return Zf.exists(this),this.iHash.update(r),this}digestInto(r){Zf.exists(this),Zf.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return r=r,r.finished=i,r.destroyed=s,r.blockLen=o,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=n._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cI=(e,r,t)=>new sq(e,r).update(t).digest();cI.create=(e,r)=>new sq(e,r);const cme=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),oq=Uint8Array.from({length:16},(e,r)=>r),fme=oq.map(e=>(9*e+5)%16);let hP=[oq],dP=[fme];for(let e=0;e<4;e++)for(let r of[hP,dP])r.push(r[e].map(t=>cme[t]));const aq=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),hme=hP.map((e,r)=>e.map(t=>aq[r][t])),dme=dP.map((e,r)=>e.map(t=>aq[r][t])),pme=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),vme=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),D0=(e,r)=>e<<r|e>>>32-r;function FB(e,r,t,n){return e===0?r^t^n:e===1?r&t|~r&n:e===2?(r|~t)^n:e===3?r&n|t&~n:r^(t|~n)}const B0=new Uint32Array(16);class gme extends BW{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:r,h1:t,h2:n,h3:i,h4:s}=this;return[r,t,n,i,s]}set(r,t,n,i,s){this.h0=r|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(r,t){for(let y=0;y<16;y++,t+=4)B0[y]=r.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,l=a,u=this.h3|0,f=u,c=this.h4|0,d=c;for(let y=0;y<5;y++){const w=4-y,b=pme[y],T=vme[y],_=hP[y],A=dP[y],x=hme[y],I=dme[y];for(let O=0;O<16;O++){const C=D0(n+FB(y,s,a,u)+B0[_[O]]+b,x[O])+c|0;n=c,c=u,u=D0(a,10)|0,a=s,s=C}for(let O=0;O<16;O++){const C=D0(i+FB(w,o,l,f)+B0[A[O]]+T,I[O])+d|0;i=d,d=f,f=D0(l,10)|0,l=o,o=C}}this.set(this.h1+a+f|0,this.h2+u+d|0,this.h3+c+i|0,this.h4+n+o|0,this.h0+s+l|0)}roundClean(){B0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const yme=I_(()=>new gme),M0=es.ProjectivePoint,IE=C3(gv);function jB(e){return BigInt(`0x${Ys(e)}`)}function mme(e){return Mc(e.toString(16).padStart(64,"0"))}const bme=oP("Bitcoin seed"),AE={private:76066276,public:76067358},OE=2147483648,wme=e=>yme(gv(e)),$me=e=>sh(e).getUint32(0,!1),L0=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const r=new Uint8Array(4);return sh(r).setUint32(0,e,!1),r};class Mf{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return $me(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const r=this.privateKey;if(!r)throw new Error("No private key");return IE.encode(this.serialize(this.versions.private,tp(new Uint8Array([0]),r)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return IE.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(r,t=AE){if(Gd(r),8*r.length<128||8*r.length>512)throw new Error(`HDKey: wrong seed length=${r.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=cI(uI,bme,r);return new Mf({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(r,t=AE){const n=IE.decode(r),i=sh(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),l=a[0]===0;if(s!==t[l?"private":"public"])throw new Error("Version mismatch");return l?new Mf({...o,privateKey:a.slice(1)}):new Mf({...o,publicKey:a})}static fromJSON(r){return Mf.fromExtendedKey(r.xpriv)}constructor(r){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!r||typeof r!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=r.versions||AE,this.depth=r.depth||0,this.chainCode=r.chainCode,this.index=r.index||0,this.parentFingerprint=r.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(r.publicKey&&r.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(r.privateKey){if(!es.utils.isValidPrivateKey(r.privateKey))throw new Error("Invalid private key");this.privKey=typeof r.privateKey=="bigint"?r.privateKey:jB(r.privateKey),this.privKeyBytes=mme(this.privKey),this.pubKey=es.getPublicKey(r.privateKey,!0)}else if(r.publicKey)this.pubKey=M0.fromHex(r.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=wme(this.pubKey)}derive(r){if(!/^[mM]'?/.test(r))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(r))return this;const t=r.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let o=+s[1];if(!Number.isSafeInteger(o)||o>=OE)throw new Error("Invalid index");s[2]==="'"&&(o+=OE),n=n.deriveChild(o)}return n}deriveChild(r){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=L0(r);if(r>=OE){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=tp(new Uint8Array([0]),a,t)}else t=tp(this.pubKey,t);const n=cI(uI,this.chainCode,t),i=jB(n.slice(0,32)),s=n.slice(32);if(!es.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:r};try{if(this.privateKey){const a=ei(this.privKey+i,es.CURVE.n);if(!es.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=M0.fromHex(this.pubKey).add(M0.fromPrivateKey(i));if(a.equals(M0.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Mf(o)}catch{return this.deriveChild(r+1)}}sign(r){if(!this.privateKey)throw new Error("No privateKey set!");return Gd(r,32),es.sign(r,this.privKey).toCompactRawBytes()}verify(r,t){if(Gd(r,32),Gd(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=es.Signature.fromCompact(t)}catch{return!1}return es.verify(n,r,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(r,t){if(!this.chainCode)throw new Error("No chainCode set");return Gd(t,33),tp(L0(r),new Uint8Array([this.depth]),L0(this.parentFingerprint),L0(this.index),this.chainCode,t)}}var _me=Object.defineProperty,Ui=(e,r)=>{for(var t in r)_me(e,t,{get:r[t],enumerable:!0})};function lq(e){return Ys(km.getPublicKey(e))}var xme={};Ui(xme,{insertEventIntoAscendingList:()=>kme,insertEventIntoDescendingList:()=>Sme,normalizeURL:()=>Eme,utf8Decoder:()=>mc,utf8Encoder:()=>ml});var mc=new TextDecoder("utf-8"),ml=new TextEncoder;function Eme(e){let r=new URL(e);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),(r.port==="80"&&r.protocol==="ws:"||r.port==="443"&&r.protocol==="wss:")&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Sme(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at<e[n].created_at)s=n+1;else if(r.created_at>=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at>r.created_at)t=i;else if(e[i].created_at<r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}function kme(e,r){var o;let t=0,n=e.length-1,i,s=t;if(n<0)s=0;else if(r.created_at>e[n].created_at)s=n+1;else if(r.created_at<=e[t].created_at)s=t;else for(;;){if(n<=t+1){s=n;break}if(i=Math.floor(t+(n-t)/2),e[i].created_at<r.created_at)t=i;else if(e[i].created_at>r.created_at)n=i;else{s=i;break}}return((o=e[s])==null?void 0:o.id)!==r.id?[...e.slice(0,s),r,...e.slice(s)]:e}var Qn=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(Qn||{});function uq(e,r){let t=e;return t.pubkey=lq(r),t.id=pP(t),t.sig=Ame(t,r),t}function Tme(e){if(!vP(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function pP(e){let r=gv(ml.encode(Tme(e)));return Ys(r)}var Ime=e=>e instanceof Object;function vP(e){if(!Ime(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let r=0;r<e.tags.length;r++){let t=e.tags[r];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if(typeof t[n]=="object")return!1}return!0}function gP(e){try{return km.verify(e.sig,pP(e),e.pubkey)}catch{return!1}}function Ame(e,r){return Ys(km.sign(pP(e),r))}function cq(e,r){if(e.ids&&e.ids.indexOf(r.id)===-1&&!e.ids.some(t=>r.id.startsWith(t))||e.kinds&&e.kinds.indexOf(r.kind)===-1||e.authors&&e.authors.indexOf(r.pubkey)===-1&&!e.authors.some(t=>r.pubkey.startsWith(t)))return!1;for(let t in e)if(t[0]==="#"){let n=t.slice(1),i=e[`#${n}`];if(i&&!r.tags.find(([s,o])=>s===t.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&r.created_at<e.since||e.until&&r.created_at>=e.until)}function Ome(e,r){for(let t=0;t<e.length;t++)if(cq(e[t],r))return!0;return!1}var Cme={};Ui(Cme,{getHex64:()=>yP,getInt:()=>fq,getSubscriptionId:()=>Pme,matchEventId:()=>Nme,matchEventKind:()=>Dme,matchEventPubkey:()=>Rme});function yP(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function fq(e,r){let t=r.length,n=e.indexOf(`"${r}":`)+t+3,i=e.slice(n),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Pme(e){let r=e.slice(0,22).indexOf('"EVENT"');if(r===-1)return null;let t=e.slice(r+7+1).indexOf('"');if(t===-1)return null;let n=r+7+1+t,i=e.slice(n+1,80).indexOf('"');if(i===-1)return null;let s=n+1+i;return e.slice(n+1,s)}function Nme(e,r){return r===yP(e,"id")}function Rme(e,r){return r===yP(e,"pubkey")}function Dme(e,r){return r===fq(e,"kind")}var Bme={};Ui(Bme,{BECH32_REGEX:()=>hq,decode:()=>C_,naddrEncode:()=>Hme,neventEncode:()=>zme,noteEncode:()=>Fme,nprofileEncode:()=>jme,npubEncode:()=>Lme,nrelayEncode:()=>Ume,nsecEncode:()=>Mme});var yv=5e3,hq=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function C_(e){var i,s,o,a,l,u,f;let{prefix:r,words:t}=Dn.decode(e,yv),n=new Uint8Array(Dn.fromWords(t));switch(r){case"nprofile":{let c=F0(n);if(!((i=c[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ys(c[0][0]),relays:c[1]?c[1].map(d=>mc.decode(d)):[]}}}case"nevent":{let c=F0(n);if(!((s=c[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(c[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(c[2]&&c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:Ys(c[0][0]),relays:c[1]?c[1].map(d=>mc.decode(d)):[],author:(o=c[2])!=null&&o[0]?Ys(c[2][0]):void 0}}}case"naddr":{let c=F0(n);if(!((a=c[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((l=c[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(c[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=c[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(c[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:mc.decode(c[0][0]),pubkey:Ys(c[2][0]),kind:parseInt(Ys(c[3][0]),16),relays:c[1]?c[1].map(d=>mc.decode(d)):[]}}}case"nrelay":{let c=F0(n);if(!((f=c[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:mc.decode(c[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:Ys(n)};default:throw new Error(`unknown prefix ${r}`)}}function F0(e){let r={},t=e;for(;t.length>0;){let n=t[0],i=t[1],s=t.slice(2,2+i);t=t.slice(2+i),!(s.length<i)&&(r[n]=r[n]||[],r[n].push(s))}return r}function Mme(e){return mP("nsec",e)}function Lme(e){return mP("npub",e)}function Fme(e){return mP("note",e)}function mP(e,r){let t=Mc(r),n=Dn.toWords(t);return Dn.encode(e,n,yv)}function jme(e){let r=P_({0:[Mc(e.pubkey)],1:(e.relays||[]).map(n=>ml.encode(n))}),t=Dn.toWords(r);return Dn.encode("nprofile",t,yv)}function zme(e){let r=P_({0:[Mc(e.id)],1:(e.relays||[]).map(n=>ml.encode(n)),2:e.author?[Mc(e.author)]:[]}),t=Dn.toWords(r);return Dn.encode("nevent",t,yv)}function Hme(e){let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e.kind,!1);let t=P_({0:[ml.encode(e.identifier)],1:(e.relays||[]).map(i=>ml.encode(i)),2:[Mc(e.pubkey)],3:[new Uint8Array(r)]}),n=Dn.toWords(t);return Dn.encode("naddr",n,yv)}function Ume(e){let r=P_({0:[ml.encode(e)]}),t=Dn.toWords(r);return Dn.encode("nrelay",t,yv)}function P_(e){let r=[];return Object.entries(e).forEach(([t,n])=>{n.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(t)],0),s.set([i.length],1),s.set(i,2),r.push(s)})}),tp(...r)}var Wme={};Ui(Wme,{decrypt:()=>Kme,encrypt:()=>qme});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function qme(e,r,t){const n=es.getSharedSecret(e,"02"+r),i=dq(n);let s=Uint8Array.from(RW(16)),o=ml.encode(t),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},a,o),u=Go.encode(new Uint8Array(l)),f=Go.encode(new Uint8Array(s.buffer));return`${u}?iv=${f}`}async function Kme(e,r,t){let[n,i]=t.split("?iv="),s=es.getSharedSecret(e,"02"+r),o=dq(s),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),l=Go.decode(n),u=Go.decode(i),f=await crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,l);return mc.decode(f)}function dq(e){return e.slice(1,33)}var Vme={};Ui(Vme,{NIP05_REGEX:()=>pq,queryProfile:()=>Zme,searchDomain:()=>Yme,useFetchImplementation:()=>Gme});var pq=/^(?:([\w.+-]+)@)?([\w.-]+)$/,N_;try{N_=fetch}catch{}function Gme(e){N_=e}async function Yme(e,r=""){try{return(await(await N_(`https://${e}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}}async function Zme(e){const r=e.match(pq);if(!r)return null;const[t,n="_",i]=r;try{const s=await N_(`https://${i}/.well-known/nostr.json?name=${n}`),{names:o,relays:a}=Xme(await s.json()),l=o[n];return l?{pubkey:l,relays:a==null?void 0:a[l]}:null}catch{return null}}function Xme(e){const r={names:{}};for(const[t,n]of Object.entries(e.names))typeof t=="string"&&typeof n=="string"&&(r.names[t]=n);if(e.relays){r.relays={};for(const[t,n]of Object.entries(e.relays))typeof t=="string"&&Array.isArray(n)&&(r.relays[t]=n.filter(i=>typeof i=="string"))}return r}var Jme={};Ui(Jme,{generateSeedWords:()=>ebe,privateKeyFromSeedWords:()=>Qme,validateWords:()=>tbe});function Qme(e,r){let n=Mf.fromMasterSeed(VW(e,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return Ys(n)}function ebe(){return QW(uP)}function tbe(e){return nq(e,uP)}var rbe={};Ui(rbe,{parse:()=>nbe});function nbe(e){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const n of e.tags)n[0]==="e"&&n[1]&&t.push(n),n[0]==="p"&&n[1]&&r.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<t.length;n++){const i=t[n],[s,o,a,l]=i,u={id:o,relays:a?[a]:[]},f=n===0,c=n===t.length-1;if(l==="root"){r.root=u;continue}if(l==="reply"){r.reply=u;continue}if(l==="mention"){r.mentions.push(u);continue}if(f){r.root=u;continue}if(c){r.reply=u;continue}r.mentions.push(u)}return r}var ibe={};Ui(ibe,{getPow:()=>sbe});function sbe(e){return obe(Mc(e))}function obe(e){let r,t,n;for(t=0,r=0;t<e.length&&(n=abe(e[t]),r+=n,n===8);t++);return r}function abe(e){let r=0;if(e===0)return 8;for(;e>>=1;)r++;return 7-r}var lbe={};Ui(lbe,{finishRepostEvent:()=>ube,getRepostedEvent:()=>cbe,getRepostedEventPointer:()=>vq});function ube(e,r,t,n){return uq({kind:6,tags:[...e.tags??[],["e",r.id,t],["p",r.pubkey]],content:e.content===""?"":JSON.stringify(r),created_at:e.created_at},n)}function vq(e){if(e.kind!==6)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(r!==void 0)return{id:r[1],relays:[r[2],t==null?void 0:t[2]].filter(n=>typeof n=="string"),author:t==null?void 0:t[1]}}function cbe(e,{skipVerification:r}={}){const t=vq(e);if(t===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===t.id&&!(!r&&!gP(n)))return n}var fbe={};Ui(fbe,{NOSTR_URI_REGEX:()=>R_,parse:()=>dbe,test:()=>hbe});var R_=new RegExp(`nostr:(${hq.source})`);function hbe(e){return typeof e=="string"&&new RegExp(`^${R_.source}$`).test(e)}function dbe(e){const r=e.match(new RegExp(`^${R_.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:r[0],value:r[1],decoded:C_(r[1])}}var pbe={};Ui(pbe,{finishReactionEvent:()=>vbe,getReactedEventPointer:()=>gbe});function vbe(e,r,t){const n=r.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return uq({...e,kind:7,tags:[...e.tags??[],...n,["e",r.id],["p",r.pubkey]],content:e.content??"+"},t)}function gbe(e){if(e.kind!==7)return;let r,t;for(let n=e.tags.length-1;n>=0&&(r===void 0||t===void 0);n--){const i=e.tags[n];i.length>=2&&(i[0]==="e"&&r===void 0?r=i:i[0]==="p"&&t===void 0&&(t=i))}if(!(r===void 0||t===void 0))return{id:r[1],relays:[r[2],t[2]].filter(n=>n!==void 0),author:t[1]}}var ybe={};Ui(ybe,{createDelegation:()=>mbe,getDelegator:()=>bbe});function mbe(e,r){let t=[];(r.kind||-1)>=0&&t.push(`kind=${r.kind}`),r.until&&t.push(`created_at<${r.until}`),r.since&&t.push(`created_at>${r.since}`);let n=t.join("&");if(n==="")throw new Error("refusing to create a delegation without any conditions");let i=gv(ml.encode(`nostr:delegation:${r.pubkey}:${n}`)),s=Ys(km.sign(i,e));return{from:lq(e),to:r.pubkey,cond:n,sig:s}}function bbe(e){let r=e.tags.find(a=>a[0]==="delegation"&&a.length>=4);if(!r)return null;let t=r[1],n=r[2],i=r[3],s=n.split("&");for(let a=0;a<s.length;a++){let[l,u,f]=s[a].split(/\b/);if(!(l==="kind"&&u==="="&&e.kind===parseInt(f))){if(l==="created_at"&&u==="<"&&e.created_at<parseInt(f))continue;if(l==="created_at"&&u===">"&&e.created_at>parseInt(f))continue;return null}}let o=gv(ml.encode(`nostr:delegation:${e.pubkey}:${n}`));return km.verify(i,o,t)?t:null}var wbe={};Ui(wbe,{matchAll:()=>$be,regex:()=>bP,replaceAll:()=>_be});var bP=()=>new RegExp(`\\b${R_.source}\\b`,"g");function*$be(e){const r=e.matchAll(bP());for(const t of r){const[n,i]=t;yield{uri:n,value:i,decoded:C_(i),start:t.index,end:t.index+n.length}}}function _be(e,r){return e.replaceAll(bP(),(t,n)=>r({uri:t,value:n,decoded:C_(n)}))}var xbe={};Ui(xbe,{useFetchImplementation:()=>Ebe,validateGithub:()=>Sbe});var wP;try{wP=fetch}catch{}function Ebe(e){wP=e}async function Sbe(e,r,t){try{return await(await wP(`https://gist.github.com/${r}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var kbe={};Ui(kbe,{authenticate:()=>Tbe});var Tbe=async({challenge:e,relay:r,sign:t})=>{const n={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r.url],["challenge",e]],content:""},i=r.auth(await t(n));return new Promise((s,o)=>{i.on("ok",function a(){i.off("ok",a),s()}),i.on("failed",function a(l){i.off("failed",a),o(l)})})},Ibe={};Ui(Ibe,{getZapEndpoint:()=>Obe,makeZapReceipt:()=>Nbe,makeZapRequest:()=>Cbe,useFetchImplementation:()=>Abe,validateZapRequest:()=>Pbe});var $P;try{$P=fetch}catch{}function Abe(e){$P=e}async function Obe(e){try{let r="",{lud06:t,lud16:n}=JSON.parse(e.content);if(t){let{words:o}=Dn.decode(t,1e3),a=Dn.fromWords(o);r=mc.decode(a)}else if(n){let[o,a]=n.split("@");r=`https://${a}/.well-known/lnurlp/${o}`}else return null;let s=await(await $P(r)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Cbe({profile:e,event:r,amount:t,relays:n,comment:i=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",t.toString()],["relays",...n]]};return r&&s.tags.push(["e",r]),s}function Pbe(e){let r;try{r=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!vP(r))return"Zap request is not a valid Nostr event.";if(!gP(r))return"Invalid signature on zap request.";let t=r.tags.find(([s,o])=>s==="p"&&o);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=r.tags.find(([s,o])=>s==="e"&&o);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([s,o])=>s==="relays"&&o)?null:"Zap request doesn't have a 'relays' tag."}function Nbe({zapRequest:e,preimage:r,bolt11:t,paidAt:n}){let s=JSON.parse(e).tags.filter(([a])=>a==="e"||a==="p"||a==="a"),o={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...s,["bolt11",t],["description",e]]};return r&&o.tags.push(["preimage",r]),o}var Yd=null;typeof WebSocket<"u"?Yd=WebSocket:typeof MozWebSocket<"u"?Yd=MozWebSocket:typeof global<"u"?Yd=global.WebSocket||global.MozWebSocket:typeof window<"u"?Yd=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Yd=self.WebSocket||self.MozWebSocket);const Rbe=Yd;function CE(e,r){let t={...e};return delete t[r],r+mge(t)}function q1(e){let r=[],t=new Map,n=[];for(let i of e){let s=!1;for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){if(i[o].length===0){s=!0;break}let a=CE(i,o),l=t.get(a);if(l!==void 0){let u=r[l];for(let f in u)if(f!==o){let c=CE(u,f);t.delete(c)}if(r[l][o]instanceof Set)for(let f of i[o])r[l][o].add(f);else r[l][o]=new Set(r[l][o].concat(i[o])),n.push([l,o]);s=!0;break}}if(!s){for(let o in i)if(i[o]&&(["ids","authors","kinds"].includes(o)||o.startsWith("#"))){let a=CE(i,o);t.set(a,r.length)}r.push({...i})}}for(let[i,s]of n)r[i][s]=Array.from(r[i][s]);return r}function Dbe(e,r){let t=r.length+3,n=e.indexOf(`"${r}":`)+t,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function Bbe(e){let r=e.indexOf('"EVENT"')+7,t=e.slice(r),n=t.indexOf('"')+1,i=t.slice(n);return i.slice(0,i.indexOf('"'))}function Mbe(e,r,t){return new Lbe(e,r,t).relayInit()}var z$,gq,H$,yq,U$,mq,W$,bq,q$,wq,K$,$q,mz,Lbe=(mz=class{constructor(e,r,t){yn(this,z$);yn(this,H$);yn(this,U$);yn(this,W$);yn(this,q$);yn(this,K$);ce(this,"url");ce(this,"alreadyHaveEvent");ce(this,"logging",!1);ce(this,"autoReconnect");ce(this,"ws");ce(this,"sendOnConnect",[]);ce(this,"openSubs",{});ce(this,"closedByClient",!1);ce(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});ce(this,"subListeners",{});ce(this,"pubListeners",{});ce(this,"incomingMessageQueue",[]);ce(this,"handleNextInterval");ce(this,"resolveClose");ce(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=r,this.autoReconnect=t}async trySend(e){var t;const r=JSON.stringify(e);this.connected?(t=this.ws)==null||t.send(r):this.sendOnConnect.push(r)}async connectRelay(){return new Promise((e,r)=>{try{const t=new Rbe(this.url);this.ws=t}catch(t){r(t);return}this.ws.onopen=Jn(this,K$,$q).bind(this,e),this.ws.onerror=t=>{this.listeners.error.forEach(n=>n()),r(t)},this.ws.onclose=Jn(this,H$,yq).bind(this),this.ws.onmessage=Jn(this,W$,bq).bind(this)})}async connect(){var e,r;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((r=this.ws)==null?void 0:r.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(r=>{this.resolveClose=r})}on(e,r){var t;this.listeners[e].push(r),e==="connect"&&((t=this.ws)==null?void 0:t.readyState)===1&&r()}off(e,r){const t=this.listeners[e].indexOf(r);t!==-1&&this.listeners[e].splice(t,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,r){const t=this;if(!e.id)throw new Error(`event ${e} has no id`);const n=e.id;let i=!1,s=!1;t.trySend([r,e]).then(()=>{i=!0,s&&(o(),s=!1)}).catch(()=>{});const o=()=>{const a=this.sub([{ids:[n]}],{id:`monitor-${n.slice(0,5)}`}),l=setTimeout(()=>{var u;(((u=t.pubListeners[n])==null?void 0:u.failed)||[]).forEach(f=>f("event not seen after 5 seconds")),a.unsub()},5e3);a.on("event",()=>{var u;clearTimeout(l),(((u=t.pubListeners[n])==null?void 0:u.seen)||[]).forEach(f=>f())})};return{on:(a,l)=>{t.pubListeners[n]=t.pubListeners[n]||{ok:[],seen:[],failed:[]},t.pubListeners[n][a].push(l),a==="seen"&&(i?o():s=!0)},off:(a,l)=>{const u=t.pubListeners[n];if(!u)return;const f=u[a].indexOf(l);f>=0&&u[a].splice(f,1)}}}sub(e,r={}){const t=this,n=r.id||Math.random().toString().slice(2),i=r.skipVerification||!1;return t.openSubs[n]={id:n,filters:e,skipVerification:i},t.connected&&(this.logging&&console.log("REQ2",this.url,n,...e),t.trySend(["REQ",n,...e])),{sub:(s,o={})=>this.sub(s||e,{skipVerification:o.skipVerification||i,id:n}),unsub:()=>{delete t.openSubs[n],delete t.subListeners[n],t.connected&&(t.logging&&console.log("CLOSE",this.url,n),t.trySend(["CLOSE",n]))},on:(s,o)=>{t.subListeners[n]=t.subListeners[n]||{event:[],eose:[]},t.subListeners[n][s].push(o)},off:(s,o)=>{const a=t.subListeners[n];if(!a)return;const l=a[s].indexOf(o);l>=0&&a[s].splice(l,1)}}}},z$=new WeakSet,gq=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}Jn(this,q$,wq).call(this,{data:this.incomingMessageQueue.shift()})},H$=new WeakSet,yq=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&Jn(this,U$,mq).call(this)},U$=new WeakSet,mq=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},W$=new WeakSet,bq=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>Jn(this,z$,gq).call(this),0))},q$=new WeakSet,wq=async function(e){var s,o,a,l,u,f,c;let r,t=e.data.toString();if(!t)return;let n=Dbe(t,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,n);if(i){const d=this.subListeners[Bbe(t)];return d?d.event.forEach(y=>y(i)):void 0}try{r=JSON.parse(t)}catch{r=e.data}if(r.length>=1)switch(r[0]){case"EVENT":if(this.logging&&console.log(r),r.length!==3)return;const d=r[1],y=r[2];if(!this.openSubs[d]||(o=this.openSubs[d].eventIds)!=null&&o.has(n))return;(a=this.openSubs[d].eventIds)==null||a.add(n),vP(y)&&this.openSubs[d]&&(this.openSubs[d].skipVerification||gP(y))&&Ome(this.openSubs[d].filters,y)&&(this.openSubs[d],(((l=this.subListeners[d])==null?void 0:l.event)||[]).forEach(T=>T(y)));return;case"EOSE":{if(r.length!==2)return;const T=r[1];this.logging&&console.log("EOSE",this.url,T),(((u=this.subListeners[T])==null?void 0:u.eose)||[]).forEach(_=>_());return}case"OK":{if(r.length<3)return;const T=r[1],_=r[2],A=r[3]||"";_?(f=this.pubListeners[T])==null||f.ok.forEach(x=>x()):(c=this.pubListeners[T])==null||c.failed.forEach(x=>x(A));return}case"NOTICE":if(r.length!==2)return;const w=r[1];this.listeners.notice.forEach(T=>T(w));return;case"AUTH":if(r.length!==2)return;const b=r[1];this.listeners.auth.forEach(T=>T(b));return}},K$=new WeakSet,$q=function(e){var r;if(this.resolveClose){this.resolveClose();return}for(const t in this.openSubs)this.logging&&console.log("REQ",this.url,t,...this.openSubs[t].filters),this.trySend(["REQ",t,...this.openSubs[t].filters]);for(const t of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,t),(r=this.ws)==null||r.send(t);this.sendOnConnect=[],this.listeners.connect.forEach(t=>t()),e()},mz),V$,_q,G$,xq,n3,jbe,Y$,Eq,Z$,Sq,X$,kq,bz,Fbe=(bz=class{constructor(){yn(this,V$);yn(this,G$);yn(this,n3);yn(this,Y$);yn(this,Z$);yn(this,X$);ce(this,"eventsById",new Map);ce(this,"metadataByPubKey",new Map);ce(this,"contactsByPubKey",new Map);ce(this,"authorsKindsByPubKey",new Map);ce(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===Qn.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===Qn.Contacts&&this.contactsByPubKey.set(e.pubkey,e),Jn(this,V$,_q).call(this,e),Jn(this,G$,xq).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,r){const t=new Set,n=[];for(const i of e){const s=Jn(this,X$,kq).call(this,i)||Jn(this,Y$,Eq).call(this,i)||Jn(this,Z$,Sq).call(this,i)||{filter:i,events:[]};for(const o of s.events)t.add(o);n.push(s.filter)}return{filters:n,events:[...t]}}},V$=new WeakSet,_q=function(e){const r=this.authorsKindsByPubKey.get(e.pubkey);if(!r)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const t=r.get(e.kind);t?e.kind===Qn.Metadata||e.kind===Qn.Contacts?e.created_at>t[0].created_at&&(t[0]=e):t.push(e):r.set(e.kind,[e])}},G$=new WeakSet,xq=function(e){for(const r of e.tags){let t=r[0]+":"+r[1];const n=this.eventsByTags.get(t);n?n.push(e):this.eventsByTags.set(t,[e])}},n3=new WeakSet,jbe=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(n=>n!==Qn.Contacts&&n!==Qn.Metadata)!==void 0)return;const r=[],t=new Set;for(const n of e.authors){let i;if(e.kinds.includes(Qn.Contacts)&&(i=this.contactsByPubKey.get(n),!i)){r.push(n);continue}let s;if(e.kinds.includes(Qn.Metadata)&&(s=this.metadataByPubKey.get(n),!s)){r.push(n);continue}i&&t.add(i),s&&t.add(s)}return{filter:{...e,authors:r},events:t}},Y$=new WeakSet,Eq=function(e){if(e.noCache||!e.authors)return;const r=new Set;for(const t of e.authors)if(e.kinds){const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of e.kinds){const s=n.get(i);if(s)for(const o of s)r.add(o)}}else{const n=this.authorsKindsByPubKey.get(t);if(n)for(const i of n.values())for(const s of i)r.add(s)}return{filter:e,events:r}},Z$=new WeakSet,Sq=function(e){if(e.noCache)return;const r=new Set;for(const t in e){if(t[0]!=="#")continue;let n=t.slice(1)+":"+e[t][0];const i=this.eventsByTags.get(n);if(i)for(const s of i)r.add(s)}return{filter:e,events:r}},X$=new WeakSet,kq=function(e){if(!e.ids)return;const r=new Set,t=[];for(const n of e.ids){const i=this.getEventById(n);i?r.add(i):t.push(n)}return{filter:{...e,ids:t},events:r}},bz),Tq=class{constructor(r,t,n){ce(this,"pubkey");ce(this,"relayPool");ce(this,"relays");this.pubkey=n,this.relayPool=r,this.relays=t}metaData(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[Qn.Metadata]}],this.relays,r,t)}subscribe(r,t,n){return this.relayPool.subscribeEventObject(r.map(i=>({authors:[this.pubkey],...i})),this.relays,t,n)}followsPubkeys(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[Qn.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)s[0]==="p"&&i.push(s[1]);r(i)},t)}follows(r,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[Qn.Contacts]}],this.relays,n=>{let i=[];for(const s of n.tags)if(s[0]==="p"){let o=this.relays;s[1]&&(o=[s[1],...this.relays||[]]),i.push(new Tq(this.relayPool,o,s[1]))}r(i)},t)}secondFollows(r,t,n=!0){return this.followsPubkeys(i=>{let s=new Map;for(const o of i)this.relayPool.subscribeEventObject([{authors:[o],kinds:[Qn.Contacts]}],this.relays,a=>{let l=1/a.tags.length;for(const u of a.tags)if(u[0]==="p"){let f=s.get(u[1]);f?f+=l:f=l,s.set(u[1],f)}if(n)for(const u of i)s.delete(u);r(Array.from(s.entries()).sort((u,f)=>f[1]-u[1]))},t)},t)}allEvents(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,r,n)}referenced(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,r,n)}followers(r,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[Qn.Contacts],limit:t}],this.relays,r,n)}sentAndRecievedDMs(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[Qn.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[Qn.EncryptedDirectMessage],limit:t}],this.relays,r,n)}text(r,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[Qn.Text],limit:t}],this.relays,r,n)}},fI=class{constructor(e,r,t){ce(this,"id");ce(this,"kind");ce(this,"pubkey");ce(this,"tags");ce(this,"created_at");ce(this,"content");ce(this,"relayPool");ce(this,"relays");ce(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=r,this.relays=t,this.sig=e.sig}referencedAuthors(){const e=[];for(const r of this.tags)r[0]==="p"&&e.push(new Tq(this.relayPool,void 0,r[1]));return e}referencedEvents(e){const r=[];for(const t of this.tags)if(t[0]==="e"){let n=this.relays;t[2]&&(n=[t[2],...n||[]]),r.push(this.relayPool.getEventById(t[1],n,e).then(i=>new fI(i,this.relayPool,this.relays)))}return r}thread(e,r){let t=this.relays,n=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(t=[i[2],...t||[]]),n.push(i[1]));return this.relayPool.subscribe([{ids:n},{"#e":n}],t,e,r)}};function zbe(e){let r=new Set;return(t,n,i)=>{r.has(t.id)||(r.add(t.id),e(t,n,i))}}function Hbe(e){let r=new Map;return(t,n,i)=>{if(t.kind===Qn.Metadata||t.kind===Qn.Contacts){let s=t.pubkey+" "+t.kind;if((r.get(s)||0)>t.created_at)return;r.set(s,t.created_at)}e(t,n,i)}}function Ube(e,r){return(t,n,i)=>{for(let s of r)if(cq(s,t)){e(t,n,i);break}}}var Wbe=class{constructor(e){ce(this,"subs",[]);ce(this,"events",[]);ce(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(r=>r(...e))}sub(e){return this.events.forEach(r=>e(...r)),this.subs.push(e),()=>{var r;this.subs=this.subs.filter(t=>t!==e),this.subs.length===0&&((r=this.onunsub)==null||r.call(this),this.onunsub=void 0)}}},qbe=e=>[...new Set(e)];function Kbe(e,r,t,n={},i){let s=[];if(i){const a=i.getCachedEventsWithUpdatedFilters(e,r);e=a.filters,s=a.events}if(n.logAllEvents){const a=t;t=(l,u,f)=>{a(l,u,f)}}n.allowDuplicateEvents||(t=zbe(t)),n.allowOlderEvents||(t=Hbe(t));for(const a of s)t(a,!1,void 0);e=q1(e),t=Ube(t,e),r=qbe(r);const o=Vbe(e,r);return[t,o]}function Vbe(e,r){const t=new Map,n=[];for(const i of e){const s=i.relay;if(s){const o=t.get(s);o?o.push(zB(i)):t.set(s,[zB(i)])}else n.push(i)}if(n.length>0)for(const i of r){const s=t.get(i);s?t.set(i,s.concat(n)):t.set(i,n)}return t}function zB(e){return e={...e},delete e.relay,e}function Gbe(e,r){const t=new Map,n=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},o=()=>{};for(const[l,u,f,c,d]of e){if(!f.unsubcb)continue;for(const[w,b]of u){const T=t.get(w);T?t.set(w,T.concat(b)):t.set(w,b)}let y=(w,b,T)=>{f.unsubcb&&l(w,b,T)};if(r&&d){const w=new Wbe(o);n.push((T,_,A)=>{w.event(T,_,A)});let b=w.sub(y);r.set(d,w),f.unsubcb=()=>{f.unsubcb=void 0,b(),c||i--}}else n.push(y),f.unsubcb=()=>{f.unsubcb=void 0,c||i--};c||i++}i===0&&setTimeout(()=>{},0);const a=(l,u,f)=>{for(const c of n)c(l,u,f)};return e.length=0,[a,t,s]}var PE=class{constructor(e,r,t,n){ce(this,"data");ce(this,"promises");ce(this,"relays");ce(this,"kind");ce(this,"relayPool");ce(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=r,this.relays=t||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=n||!1}async get(e){let r=this.data.get(e);if(r)return Promise.resolve(r);const t=this.promises.get(e);return t||new Promise((n,i)=>{let s=0;const o=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},a=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([o],this.relays,l=>{this.data.set(e,l),this.promises.delete(e),n(l)},void 0,l=>{this.relays.includes(l)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=a})}},HB=e=>[...new Set(e)];function Ybe(e){if(e)return JSON.parse(e)}var J$,Iq,Q$,Aq,e_,Oq,t_,Cq,r_,Pq,n_,Nq,wz,Zbe=(wz=class{constructor(e,r={}){yn(this,J$);yn(this,Q$);yn(this,e_);yn(this,t_);yn(this,r_);yn(this,n_);ce(this,"relayByUrl",new Map);ce(this,"noticecbs",[]);ce(this,"errorcbs",[]);ce(this,"authcbs",[]);ce(this,"eventCache");ce(this,"minMaxDelayms",1/0);ce(this,"filtersToSubscribe",[]);ce(this,"timer");ce(this,"externalGetEventById");ce(this,"logSubscriptions",!1);ce(this,"autoReconnect",!1);ce(this,"startTime",new Date().getTime());ce(this,"deleteSignatures");ce(this,"subscriptionCache");ce(this,"skipVerification");ce(this,"writeRelays");ce(this,"metadataCache");ce(this,"contactListCache");ce(this,"logErrorsAndNotices");ce(this,"errorsAndNoticesInterval");ce(this,"errorsAndNotices",[]);if(this.externalGetEventById=r.externalGetEventById,this.logSubscriptions=r.logSubscriptions,this.autoReconnect=r.autoReconnect,this.deleteSignatures=r.deleteSignatures,this.skipVerification=r.skipVerification,this.writeRelays=new PE(10003,this,void 0,!0),this.metadataCache=new PE(0,this),this.contactListCache=new PE(3,this),r.useEventCache&&(this.eventCache=new Fbe),r.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const t of HB(e))this.addOrGetRelay(t);this.logErrorsAndNotices=r.logErrorsAndNotices||!0,this.onnotice((t,n)=>{this.errorsAndNotices.push({type:"notice",url:t,msg:n,time:Date.now()-this.startTime})}),this.onerror((t,n)=>{this.errorsAndNotices.push({type:"error",url:t,msg:n,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>Jn(this,J$,Iq).call(this),1e3*10)}addOrGetRelay(e){const r=this.relayByUrl.get(e);if(r)return r;const t=Mbe(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?n=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(n)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,t),t.connect().then(n=>{t==null||t.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),t==null||t.on("auth",i=>{this.authcbs.forEach(s=>s(t,i))})},n=>{this.errorcbs.forEach(i=>i(e,n))}),t}async close(){const e=[];for(const r of this.relayByUrl.values())e.push(r.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const r=this.relayByUrl.get(e);r&&(r.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,r){clearTimeout(this.timer),this.timer=void 0;let t=this.minMaxDelayms;this.minMaxDelayms=1/0;const[n,i,s]=Gbe(r||this.filtersToSubscribe,this.subscriptionCache);return Jn(this,t_,Cq).call(this,i,n,e,s,t)}subscribeEventObject(e,r,t,n,i,s={}){return this.subscribe(e,r,(o,a,l)=>t(new fI(o,this,r),a,l))}subscribe(e,r,t,n,i,s={}){var c;if(n!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(r===void 0){const d=Jn(this,n_,Nq).call(this,e,t,n,i,s);return()=>{d.then(y=>{y()})}}let o;if(s.unsubscribeOnEose&&!i){o=JSON.stringify([e,r]);const d=(c=this.subscriptionCache)==null?void 0:c.get(o);if(d)return d.sub(t)}const[a,l]=Kbe(e,r,t,s,this.eventCache);let u={unsubcb:()=>{}};n===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const f=[a,l,u,s.unsubscribeOnEose,o,n];return s.dontSendOtherFilters?this.sendSubscriptions(i,[f]):(this.filtersToSubscribe.push(f),n===void 0?this.sendSubscriptions(i):(Jn(this,r_,Pq).call(this,n),()=>{var d;(d=u.unsubcb)==null||d.call(u),delete u.unsubcb}))}async getEventObjectById(e,r,t){return this.getEventById(e,r,t).then(n=>new fI(n,this,r))}async getEventById(e,r,t){return new Promise((n,i)=>{this.subscribe([{ids:[e]}],r,s=>{n(s)},t,void 0)})}publish(e,r){for(const t of HB(r))this.addOrGetRelay(t).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((r,t)=>r.on("error",n=>e(t,n))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((r,t)=>r.on("disconnect",n=>e(t,n)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,r])=>[e,r.status]).sort()}setWriteRelaysForPubKey(e,r,t){const n={created_at:t,pubkey:"",id:"",sig:"",content:JSON.stringify(r),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,n)}setCachedMetadata(e,r){this.metadataCache.data.set(e,r)}setCachedContactList(e,r){this.contactListCache.data.set(e,r)}subscribeReferencedEvents(e,r,t,n,i={}){let s=[],o=[];for(const a of e.tags){if(a[0]==="p"){const l=a[1];if(l.length!==64){console.log("bad pubkey",l,a);continue}o.push(l)}if(a[0]==="e"){const l=a[1];s.push(l)}}return s.length===0?()=>{}:o.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,r,t,n,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:o}],void 0,r,t,n,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${r}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(r=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${r}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${r}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,r,t,n,i={}){for(const s of e.tags)if(s[0]==="p"){const o=s[1];if(o.length!==64){console.log("bad pubkey",o,s);continue}this.fetchAndCacheMetadata(o).catch(a=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${o}: ${a}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,r,t,n,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(r=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${r}`,time:Date.now()-this.startTime,url:e.url})})})}},J$=new WeakSet,Iq=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},Q$=new WeakSet,Aq=function(e,r,t,n,i){const s=q1(r);if(s.length===0)return;const a=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let l=!1,u=1/0;return a.on("event",f=>{var d;f.created_at<u&&(u=f.created_at);let c=f;this.deleteSignatures||(c.sig=f.sig),(d=this.eventCache)==null||d.addEvent(c),t(c,l,e)}),a.on("eose",()=>{n==null||n(e,u),l=!0}),a},e_=new WeakSet,Oq=function(e){const r=new Map;for(const[t,n]of e){const i=q1(q1(n));i.length>0&&r.set(t,i)}return r},t_=new WeakSet,Cq=function(e,r,t,n={},i){var u,f;if(e.size===0)return()=>{};if(e=Jn(this,e_,Oq).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const c={};for(const[d,y]of e){let w=0;for(const b of y){const T={...b};T.authors&&(T.authors=T.authors.join(),T["authors.length"]=(u=b==null?void 0:b.authors)==null?void 0:u.length),T.kinds&&(T.kinds=T.kinds.join()),T.ids&&(T.ids=T.ids.join(),T["ids.length"]=(f=b==null?void 0:b.ids)==null?void 0:f.length),T["#e"]&&(T["#e"]=T["#e"].join(),T["#e.length"]=b["#e"].length),T["#p"]&&(T["#p"]=T["#p"].join(),T["#p.length"]=b["#p"].length),c[d+" "+w]=T,w++}}Object.keys(c).length>3&&console.groupCollapsed(Object.keys(c).length+" filters to "+e.size+" relays"),console.table(c),Object.keys(c).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let o=!1,a=[];n.unsuboneosecb=()=>{o=!0,a.forEach(c=>c.unsub())};for(const[c,d]of e){let y={};const w=(_,A)=>{var x;t&&t(_,A),o?(x=y.sub)==null||x.unsub():y.sub&&a.push(y.sub)},b=new Set,T=Jn(this,Q$,Aq).call(this,c,d,r,w,b);T&&(y.sub=T,s.push(T))}const l=()=>s.forEach(c=>c.unsub());return n.unsubcb=()=>{l(),delete n.unsubcb},l},r_=new WeakSet,Pq=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},n_=new WeakSet,Nq=async function(e,r,t,n,i={}){var c;const s=new Set;for(const d of e)if(d.authors)for(const y of d.authors)s.add(y);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const o=[],a=[];for(const d of s)o.push((c=this.writeRelays)==null?void 0:c.get(d).then(y=>Ybe(y==null?void 0:y.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),a.push(d);const l=new Set;let u=0;for(const d of o){const y=a[u];u+=1;let w=await d;if(!Array.isArray(w)){console.error("Couldn't load relays for author ",y);continue}for(let b of w)l.add(b)}let f=Array.from(l);return f.length===0&&i.defaultRelays&&(f=i.defaultRelays),this.subscribe(e,f,r,t,n,i)},wz);const en=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zn=Object.keys,zi=Array.isArray;function as(e,r){return typeof r!="object"||zn(r).forEach(function(t){e[t]=r[t]}),e}typeof Promise>"u"||en.Promise||(en.Promise=Promise);const Dy=Object.getPrototypeOf,Xbe={}.hasOwnProperty;function to(e,r){return Xbe.call(e,r)}function Up(e,r){typeof r=="function"&&(r=r(Dy(e))),(typeof Reflect>"u"?zn:Reflect.ownKeys)(r).forEach(t=>{tu(e,t,r[t])})}const Rq=Object.defineProperty;function tu(e,r,t,n){Rq(e,r,as(t&&to(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},n))}function _p(e){return{from:function(r){return e.prototype=Object.create(r.prototype),tu(e.prototype,"constructor",e),{extend:Up.bind(null,e.prototype)}}}}const Jbe=Object.getOwnPropertyDescriptor;function _P(e,r){let t;return Jbe(e,r)||(t=Dy(e))&&_P(t,r)}const Qbe=[].slice;function qw(e,r,t){return Qbe.call(e,r,t)}function Dq(e,r){return r(e)}function Vg(e){if(!e)throw new Error("Assertion Failed")}function Bq(e){en.setImmediate?setImmediate(e):setTimeout(e,0)}function Mq(e,r){return e.reduce((t,n,i)=>{var s=r(n,i);return s&&(t[s[0]]=s[1]),t},{})}function ru(e,r){if(to(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var t=[],n=0,i=r.length;n<i;++n){var s=ru(e,r[n]);t.push(s)}return t}var o=r.indexOf(".");if(o!==-1){var a=e[r.substr(0,o)];return a===void 0?void 0:ru(a,r.substr(o+1))}}function Ta(e,r,t){if(e&&r!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){Vg(typeof t!="string"&&"length"in t);for(var n=0,i=r.length;n<i;++n)Ta(e,r[n],t[n])}else{var s=r.indexOf(".");if(s!==-1){var o=r.substr(0,s),a=r.substr(s+1);if(a==="")t===void 0?zi(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var l=e[o];l&&to(e,o)||(l=e[o]={}),Ta(l,a,t)}}else t===void 0?zi(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=t}}function Lq(e){var r={};for(var t in e)to(e,t)&&(r[t]=e[t]);return r}const e0e=[].concat;function Fq(e){return e0e.apply([],e)}const jq="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Fq([8,16,32,64].map(e=>["Int","Uint","Float"].map(r=>r+e+"Array")))).filter(e=>en[e]),t0e=jq.map(e=>en[e]);Mq(jq,e=>[e,!0]);let vc=null;function Om(e){vc=typeof WeakMap<"u"&&new WeakMap;const r=hI(e);return vc=null,r}function hI(e){if(!e||typeof e!="object")return e;let r=vc&&vc.get(e);if(r)return r;if(zi(e)){r=[],vc&&vc.set(e,r);for(var t=0,n=e.length;t<n;++t)r.push(hI(e[t]))}else if(t0e.indexOf(e.constructor)>=0)r=e;else{const s=Dy(e);for(var i in r=s===Object.prototype?{}:Object.create(s),vc&&vc.set(e,r),e)to(e,i)&&(r[i]=hI(e[i]))}return r}const{toString:r0e}={};function dI(e){return r0e.call(e).slice(8,-1)}const pI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",n0e=typeof pI=="symbol"?function(e){var r;return e!=null&&(r=e[pI])&&r.apply(e)}:function(){return null},Zd={};function Xl(e){var r,t,n,i;if(arguments.length===1){if(zi(e))return e.slice();if(this===Zd&&typeof e=="string")return[e];if(i=n0e(e)){for(t=[];!(n=i.next()).done;)t.push(n.value);return t}if(e==null)return[e];if(typeof(r=e.length)=="number"){for(t=new Array(r);r--;)t[r]=e[r];return t}return[e]}for(r=arguments.length,t=new Array(r);r--;)t[r]=arguments[r];return t}const xP=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var _l=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zq(e,r){_l=e,Hq=r}var Hq=()=>!0;const i0e=!new Error("").stack;function Fh(){if(i0e)try{throw Fh.arguments,new Error}catch(e){return e}return new Error}function vI(e,r){var t=e.stack;return t?(r=r||0,t.indexOf(e.name)===0&&(r+=(e.name+e.message).split(`
`).length),t.split(`
`).slice(r).filter(Hq).map(n=>`
`+n).join("")):""}var Uq=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],EP=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Uq),s0e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xp(e,r){this._e=Fh(),this.name=e,this.message=r}function Wq(e,r){return e+". Errors: "+Object.keys(r).map(t=>r[t].toString()).filter((t,n,i)=>i.indexOf(t)===n).join(`
`)}function Kw(e,r,t,n){this._e=Fh(),this.failures=r,this.failedKeys=n,this.successCount=t,this.message=Wq(e,r)}function oy(e,r){this._e=Fh(),this.name="BulkError",this.failures=Object.keys(r).map(t=>r[t]),this.failuresByPos=r,this.message=Wq(e,r)}_p(xp).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+vI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),_p(Kw).from(xp),_p(oy).from(xp);var SP=EP.reduce((e,r)=>(e[r]=r+"Error",e),{});const o0e=xp;var Wt=EP.reduce((e,r)=>{var t=r+"Error";function n(i,s){this._e=Fh(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=s0e[r]||t,this.inner=null)}return _p(n).from(o0e),e[r]=n,e},{});Wt.Syntax=SyntaxError,Wt.Type=TypeError,Wt.Range=RangeError;var UB=Uq.reduce((e,r)=>(e[r+"Error"]=Wt[r],e),{}),K1=EP.reduce((e,r)=>(["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=Wt[r]),e),{});function Ur(){}function By(e){return e}function a0e(e,r){return e==null||e===By?r:function(t){return r(e(t))}}function Sh(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function l0e(e,r){return e===Ur?r:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=r.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Sh(n,this.onsuccess):n),i&&(this.onerror=this.onerror?Sh(i,this.onerror):i),s!==void 0?s:t}}function u0e(e,r){return e===Ur?r:function(){e.apply(this,arguments);var t=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Sh(t,this.onsuccess):t),n&&(this.onerror=this.onerror?Sh(n,this.onerror):n)}}function c0e(e,r){return e===Ur?r:function(t){var n=e.apply(this,arguments);as(t,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=r.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Sh(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Sh(s,this.onerror):s),n===void 0?o===void 0?void 0:o:as(n,o)}}function f0e(e,r){return e===Ur?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function kP(e,r){return e===Ur?r:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return r.apply(n,s)})}return r.apply(this,arguments)}}K1.ModifyError=Kw,K1.DexieError=xp,K1.BulkError=oy;var My={};const qq=100,[gI,Vw,yI]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Dy(e),e];const r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,Dy(r),e]})(),Kq=Vw&&Vw.then,V1=gI&&gI.constructor,TP=!!yI;var mI=!1,h0e=yI?()=>{yI.then(j0)}:en.setImmediate?setImmediate.bind(null,j0):en.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{j0(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(j0,0)},ay=function(e,r){Gg.push([e,r]),Gw&&(h0e(),Gw=!1)},bI=!0,Gw=!0,oh=[],G1=[],wI=null,$I=By,Ep={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:KB,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{KB(e[0],e[1])}catch{}})}},Mt=Ep,Gg=[],ah=0,Y1=[];function Et(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ur,this._lib=!1;var r=this._PSD=Mt;if(_l&&(this._stackHolder=Fh(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==My)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xI(this,this._value))}this._state=null,this._value=null,++r.ref,Gq(this,e)}const _I={get:function(){var e=Mt,r=Yw;function t(n,i){var s=!e.global&&(e!==Mt||r!==Yw);const o=s&&!vu();var a=new Et((l,u)=>{IP(this,new Vq(Zw(n,e,s,o),Zw(i,e,s,o),l,u,e))});return _l&&Xq(a,this),a}return t.prototype=My,t},set:function(e){tu(this,"then",e&&e.prototype===My?_I:{get:function(){return e},set:_I.set})}};function Vq(e,r,t,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=t,this.reject=n,this.psd=i}function Gq(e,r){try{r(t=>{if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Cm();t&&typeof t.then=="function"?Gq(e,(i,s)=>{t instanceof Et?t._then(i,s):t.then(i,s)}):(e._state=!0,e._value=t,Yq(e)),n&&Pm()}},xI.bind(null,e))}catch(t){xI(e,t)}}function xI(e,r){if(G1.push(r),e._state===null){var t=e._lib&&Cm();r=$I(r),e._state=!1,e._value=r,_l&&r!==null&&typeof r=="object"&&!r._promise&&function(n,i,s){try{n.apply(null,s)}catch(o){i&&i(o)}}(()=>{var n=_P(r,"stack");r._promise=e,tu(r,"stack",{get:()=>mI?n&&(n.get?n.get.apply(r):n.value):e.stack})}),function(n){oh.some(i=>i._value===n._value)||oh.push(n)}(e),Yq(e),t&&Pm()}}function Yq(e){var r=e._listeners;e._listeners=[];for(var t=0,n=r.length;t<n;++t)IP(e,r[t]);var i=e._PSD;--i.ref||i.finalize(),ah===0&&(++ah,ay(()=>{--ah==0&&AP()},[]))}function IP(e,r){if(e._state!==null){var t=e._state?r.onFulfilled:r.onRejected;if(t===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++ah,ay(d0e,[t,e,r])}else e._listeners.push(r)}function d0e(e,r,t){try{wI=r;var n,i=r._value;r._state?n=e(i):(G1.length&&(G1=[]),n=e(i),G1.indexOf(i)===-1&&function(s){for(var o=oh.length;o;)if(oh[--o]._value===s._value)return void oh.splice(o,1)}(r)),t.resolve(n)}catch(s){t.reject(s)}finally{wI=null,--ah==0&&AP(),--t.psd.ref||t.psd.finalize()}}function Zq(e,r,t){if(r.length===t)return r;var n="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,n=vI(o,0)):(i=o,s=""),r.push(i+(s?": "+s:"")+n)}return _l&&((n=vI(e._stackHolder,2))&&r.indexOf(n)===-1&&r.push(n),e._prev&&Zq(e._prev,r,t)),r}function Xq(e,r){var t=r?r._numPrev+1:0;t<100&&(e._prev=r,e._numPrev=t)}function j0(){Cm()&&Pm()}function Cm(){var e=bI;return bI=!1,Gw=!1,e}function Pm(){var e,r,t;do for(;Gg.length>0;)for(e=Gg,Gg=[],t=e.length,r=0;r<t;++r){var n=e[r];n[0].apply(null,n[1])}while(Gg.length>0);bI=!0,Gw=!0}function AP(){var e=oh;oh=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var r=Y1.slice(0),t=r.length;t;)r[--t]()}function z0(e){return new Et(My,!1,e)}function nn(e,r){var t=Mt;return function(){var n=Cm(),i=Mt;try{return Fc(t,!0),e.apply(this,arguments)}catch(s){r&&r(s)}finally{Fc(i,!1),n&&Pm()}}}Up(Et.prototype,{then:_I,_then:function(e,r){IP(this,new Vq(null,null,e,r,Mt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=arguments[0],t=arguments[1];return typeof r=="function"?this.then(null,n=>n instanceof r?t(n):z0(n)):this.then(null,n=>n&&n.name===r?t(n):z0(n))},finally:function(e){return this.then(r=>(e(),r),r=>(e(),z0(r)))},stack:{get:function(){if(this._stack)return this._stack;try{mI=!0;var e=Zq(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{mI=!1}}},timeout:function(e,r){return e<1/0?new Et((t,n)=>{var i=setTimeout(()=>n(new Wt.Timeout(r)),e);this.then(t,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&tu(Et.prototype,Symbol.toStringTag,"Dexie.Promise"),Ep.env=Jq(),Up(Et,{all:function(){var e=Xl.apply(null,arguments).map(H0);return new Et(function(r,t){e.length===0&&r([]);var n=e.length;e.forEach((i,s)=>Et.resolve(i).then(o=>{e[s]=o,--n||r(e)},t))})},resolve:e=>{if(e instanceof Et)return e;if(e&&typeof e.then=="function")return new Et((t,n)=>{e.then(t,n)});var r=new Et(My,!0,e);return Xq(r,wI),r},reject:z0,race:function(){var e=Xl.apply(null,arguments).map(H0);return new Et((r,t)=>{e.map(n=>Et.resolve(n).then(r,t))})},PSD:{get:()=>Mt,set:e=>Mt=e},totalEchoes:{get:()=>Yw},newPSD:Lc,usePSD:bv,scheduler:{get:()=>ay,set:e=>{ay=e}},rejectionMapper:{get:()=>$I,set:e=>{$I=e}},follow:(e,r)=>new Et((t,n)=>Lc((i,s)=>{var o=Mt;o.unhandleds=[],o.onunhandled=s,o.finalize=Sh(function(){(function(a){function l(){a(),Y1.splice(Y1.indexOf(l),1)}Y1.push(l),++ah,ay(()=>{--ah==0&&AP()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},r,t,n))}),V1&&(V1.allSettled&&tu(Et,"allSettled",function(){const e=Xl.apply(null,arguments).map(H0);return new Et(r=>{e.length===0&&r([]);let t=e.length;const n=new Array(t);e.forEach((i,s)=>Et.resolve(i).then(o=>n[s]={status:"fulfilled",value:o},o=>n[s]={status:"rejected",reason:o}).then(()=>--t||r(n)))})}),V1.any&&typeof AggregateError<"u"&&tu(Et,"any",function(){const e=Xl.apply(null,arguments).map(H0);return new Et((r,t)=>{e.length===0&&t(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((s,o)=>Et.resolve(s).then(a=>r(a),a=>{i[o]=a,--n||t(new AggregateError(i))}))})}));const ji={awaits:0,echoes:0,id:0};var p0e=0,Z1=[],NE=0,Yw=0,v0e=0;function Lc(e,r,t,n){var i=Mt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++v0e;var o=Ep.env;s.env=TP?{Promise:Et,PromiseProp:{value:Et,configurable:!0,writable:!0},all:Et.all,race:Et.race,allSettled:Et.allSettled,any:Et.any,resolve:Et.resolve,reject:Et.reject,nthen:WB(o.nthen,s),gthen:WB(o.gthen,s)}:{},r&&as(s,r),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=bv(s,e,t,n);return s.ref===0&&s.finalize(),a}function mv(){return ji.id||(ji.id=++p0e),++ji.awaits,ji.echoes+=qq,ji.id}function vu(){return!!ji.awaits&&(--ji.awaits==0&&(ji.id=0),ji.echoes=ji.awaits*qq,!0)}function H0(e){return ji.echoes&&e&&e.constructor===V1?(mv(),e.then(r=>(vu(),r),r=>(vu(),ti(r)))):e}function g0e(e){++Yw,ji.echoes&&--ji.echoes!=0||(ji.echoes=ji.id=0),Z1.push(Mt),Fc(e,!0)}function y0e(){var e=Z1[Z1.length-1];Z1.pop(),Fc(e,!1)}function Fc(e,r){var t=Mt;if((r?!ji.echoes||NE++&&e===Mt:!NE||--NE&&e===Mt)||Qq(r?g0e.bind(null,e):y0e),e!==Mt&&(Mt=e,t===Ep&&(Ep.env=Jq()),TP)){var n=Ep.env.Promise,i=e.env;Vw.then=i.nthen,n.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty(en,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function Jq(){var e=en.Promise;return TP?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(en,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Vw.then,gthen:e.prototype.then}:{}}function bv(e,r,t,n,i){var s=Mt;try{return Fc(e,!0),r(t,n,i)}finally{Fc(s,!1)}}function Qq(e){Kq.call(gI,e)}function Zw(e,r,t,n){return typeof e!="function"?e:function(){var i=Mt;t&&mv(),Fc(r,!0);try{return e.apply(this,arguments)}finally{Fc(i,!1),n&&Qq(vu)}}}function WB(e,r){return function(t,n){return e.call(this,Zw(t,r),Zw(n,r))}}(""+Kq).indexOf("[native code]")===-1&&(mv=vu=Ur);const qB="unhandledrejection";function KB(e,r){var t;try{t=r.onuncatched(e)}catch{}if(t!==!1)try{var n,i={promise:r,reason:e};if(en.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(qB,!0,!0),as(n,i)):en.CustomEvent&&as(n=new CustomEvent(qB,{detail:i}),i),n&&en.dispatchEvent&&(dispatchEvent(n),!en.PromiseRejectionEvent&&en.onunhandledrejection))try{en.onunhandledrejection(n)}catch{}_l&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ti=Et.reject;function EI(e,r,t,n){if(e.idbdb&&(e._state.openComplete||Mt.letThrough||e._vip)){var i=e._createTransaction(r,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===SP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>EI(e,r,t,n))):ti(s)}return i._promise(r,(s,o)=>Lc(()=>(Mt.trans=i,n(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ti(new Wt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ti(new Wt.DatabaseClosed);e.open().catch(Ur)}return e._state.dbReadyPromise.then(()=>EI(e,r,t,n))}const VB="3.2.4",Xf=String.fromCharCode(65535),SI=-1/0,Ul="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eK="String expected.",ly=[],D_=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),m0e=D_,b0e=D_,tK=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),B_="__dbnames",RE="readonly",DE="readwrite";function kh(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}const rK={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function U0(e){return typeof e!="string"||/\./.test(e)?r=>r:r=>(r[e]===void 0&&e in r&&delete(r=Om(r))[e],r)}class w0e{_trans(r,t,n){const i=this._tx||Mt.trans,s=this.name;function o(l,u,f){if(!f.schema[s])throw new Wt.NotFound("Table "+s+" not part of transaction");return t(f.idbtrans,f)}const a=Cm();try{return i&&i.db===this.db?i===Mt.trans?i._promise(r,o,n):Lc(()=>i._promise(r,o,n),{trans:i,transless:Mt.transless||Mt}):EI(this.db,r,[this.name],o)}finally{a&&Pm()}}get(r,t){return r&&r.constructor===Object?this.where(r).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:r}).then(i=>this.hook.reading.fire(i))).then(t)}where(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(zi(r))return new this.db.WhereClause(this,`[${r.join("+")}]`);const t=zn(r);if(t.length===1)return this.where(t[0]).equals(r[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&t.every(f=>u.keyPath.indexOf(f)>=0)&&u.keyPath.every(f=>t.indexOf(f)>=0))[0];if(n&&this.db._maxKey!==Xf)return this.where(n.name).equals(n.keyPath.map(u=>r[u]));!n&&_l&&console.warn(`The query ${JSON.stringify(r)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,f){try{return s.cmp(u,f)===0}catch{return!1}}const[a,l]=t.reduce(([u,f],c)=>{const d=i[c],y=r[c];return[u||d,u||!d?kh(f,d&&d.multi?w=>{const b=ru(w,c);return zi(b)&&b.some(T=>o(y,T))}:w=>o(y,ru(w,c))):f]},[null,null]);return a?this.where(a.name).equals(r[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(r){return this.toCollection().and(r)}count(r){return this.toCollection().count(r)}offset(r){return this.toCollection().offset(r)}limit(r){return this.toCollection().limit(r)}each(r){return this.toCollection().each(r)}toArray(r){return this.toCollection().toArray(r)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(r){return new this.db.Collection(new this.db.WhereClause(this,zi(r)?`[${r.join("+")}]`:r))}reverse(){return this.toCollection().reverse()}mapToClass(r){this.schema.mappedClass=r;const t=n=>{if(!n)return n;const i=Object.create(r.prototype);for(var s in n)if(to(n,s))try{i[s]=n[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),r}defineClass(){return this.mapToClass(function(r){as(this,r)})}add(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=U0(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Ta(r,i,o)}catch{}return o})}update(r,t){if(typeof r!="object"||zi(r))return this.where(":id").equals(r).modify(t);{const n=ru(r,this.schema.primKey.keyPath);if(n===void 0)return ti(new Wt.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?zn(t).forEach(i=>{Ta(r,i,t[i])}):t(r,{value:r,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}}put(r,t){const{auto:n,keyPath:i}=this.schema.primKey;let s=r;return i&&n&&(s=U0(i)(r)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?Et.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Ta(r,i,o)}catch{}return o})}delete(r){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[r]})).then(t=>t.numFailures?Et.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"deleteRange",range:rK})).then(r=>r.numFailures?Et.reject(r.failures[0]):void 0)}bulkGet(r){return this._trans("readonly",t=>this.core.getMany({keys:r,trans:t}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let f=l&&a?r.map(U0(l)):r;return this.core.mutate({trans:o,type:"add",keys:i,values:f,wantResults:s}).then(({numFailures:c,results:d,lastResult:y,failures:w})=>{if(c===0)return s?d:y;throw new oy(`${this.name}.bulkAdd(): ${c} of ${u} operations failed`,w)})})}bulkPut(r,t,n){const i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Wt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==r.length)throw new Wt.InvalidArgument("Arguments objects and keys must have the same length");const u=r.length;let f=l&&a?r.map(U0(l)):r;return this.core.mutate({trans:o,type:"put",keys:i,values:f,wantResults:s}).then(({numFailures:c,results:d,lastResult:y,failures:w})=>{if(c===0)return s?d:y;throw new oy(`${this.name}.bulkPut(): ${c} of ${u} operations failed`,w)})})}bulkDelete(r){const t=r.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:r})).then(({numFailures:n,lastResult:i,failures:s})=>{if(n===0)return i;throw new oy(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,s)})}}function uy(e){var r={},t=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return r[o].subscribe.apply(null,u),e}if(typeof o=="string")return r[o]};t.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return t;function s(o,a,l){if(typeof o!="object"){var u;a||(a=f0e),l||(l=Ur);var f={subscribers:[],fire:l,subscribe:function(c){f.subscribers.indexOf(c)===-1&&(f.subscribers.push(c),f.fire=a(f.fire,c))},unsubscribe:function(c){f.subscribers=f.subscribers.filter(function(d){return d!==c}),f.fire=f.subscribers.reduce(a,l)}};return r[o]=t[o]=f,f}zn(u=o).forEach(function(c){var d=u[c];if(zi(d))s(c,u[c][0],u[c][1]);else{if(d!=="asap")throw new Wt.InvalidArgument("Invalid event config");var y=s(c,By,function(){for(var w=arguments.length,b=new Array(w);w--;)b[w]=arguments[w];y.subscribers.forEach(function(T){Bq(function(){T.apply(null,b)})})})}})}}function Rg(e,r){return _p(r).from({prototype:e}),r}function Pd(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function BE(e,r){e.filter=kh(e.filter,r)}function ME(e,r,t){var n=e.replayFilter;e.replayFilter=n?()=>kh(n(),r()):r,e.justLimit=t&&!n}function X1(e,r){if(e.isPrimKey)return r.primaryKey;const t=r.getIndexByKeyPath(e.index);if(!t)throw new Wt.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return t}function GB(e,r,t){const n=X1(e,r.schema);return r.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function W0(e,r,t,n){const i=e.replayFilter?kh(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,d=>l.stop(d),d=>l.fail(d))){var f=l.primaryKey,c=""+f;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(f)),to(s,c)||(s[c]=!0,r(a,l,u))}};return Promise.all([e.or._iterate(o,t),YB(GB(e,n,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return YB(GB(e,n,t),kh(e.algorithm,i),r,!e.keysOnly&&e.valueMapper)}function YB(e,r,t,n){var i=nn(n?(s,o,a)=>t(n(s),o,a):t);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();r&&!r(s,a=>o=a,a=>{s.stop(a),o=Ur},a=>{s.fail(a),o=Ur})||i(s.value,s,a=>o=a),o()})})}function ss(e,r){try{const t=ZB(e),n=ZB(r);if(t!==n)return t==="Array"?1:n==="Array"?-1:t==="binary"?1:n==="binary"?-1:t==="string"?1:n==="string"?-1:t==="Date"?1:n!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>r?1:e<r?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(XB(e),XB(r));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const f=ss(i[u],s[u]);if(f!==0)return f}return o===a?0:o<a?-1:1}(e,r)}}catch{}return NaN}function ZB(e){const r=typeof e;if(r!=="object")return r;if(ArrayBuffer.isView(e))return"binary";const t=dI(e);return t==="ArrayBuffer"?"binary":t}function XB(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class $0e{_read(r,t){var n=this._ctx;return n.error?n.table._trans(null,ti.bind(null,n.error)):n.table._trans("readonly",r).then(t)}_write(r){var t=this._ctx;return t.error?t.table._trans(null,ti.bind(null,t.error)):t.table._trans("readwrite",r,"locked")}_addAlgorithm(r){var t=this._ctx;t.algorithm=kh(t.algorithm,r)}_iterate(r,t){return W0(this._ctx,r,t,this._ctx.table.core)}clone(r){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return r&&as(n,r),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(r){var t=this._ctx;return this._read(n=>W0(t,r,n,t.table.core))}count(r){return this._read(t=>{const n=this._ctx,i=n.table.core;if(Pd(n,!0))return i.count({trans:t,query:{index:X1(n,i.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var s=0;return W0(n,()=>(++s,!1),t,i).then(()=>s)}).then(r)}sortBy(r,t){const n=r.split(".").reverse(),i=n[0],s=n.length-1;function o(u,f){return f?o(u[n[f]],f-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,f){var c=o(u,s),d=o(f,s);return c<d?-a:c>d?a:0}return this.toArray(function(u){return u.sort(l)}).then(t)}toArray(r){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&Pd(n,!0)&&n.limit>0){const{valueMapper:i}=n,s=X1(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return W0(n,s=>i.push(s),t,n.table.core).then(()=>i)}},r)}offset(r){var t=this._ctx;return r<=0||(t.offset+=r,Pd(t)?ME(t,()=>{var n=r;return(i,s)=>n===0||(n===1?(--n,!1):(s(()=>{i.advance(n),n=0}),!1))}):ME(t,()=>{var n=r;return()=>--n<0})),this}limit(r){return this._ctx.limit=Math.min(this._ctx.limit,r),ME(this._ctx,()=>{var t=r;return function(n,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(r,t){return BE(this._ctx,function(n,i,s){return!r(n.value)||(i(s),t)}),this}first(r){return this.limit(1).toArray(function(t){return t[0]}).then(r)}last(r){return this.reverse().first(r)}filter(r){var t,n;return BE(this._ctx,function(i){return r(i.value)}),t=this._ctx,n=r,t.isMatch=kh(t.isMatch,n),this}and(r){return this.filter(r)}or(r){return new this.db.WhereClause(this._ctx.table,r,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.key,i)})}eachUniqueKey(r){return this._ctx.unique="unique",this.eachKey(r)}eachPrimaryKey(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){r(i.primaryKey,i)})}keys(r){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.key)}).then(function(){return n}).then(r)}primaryKeys(r){var t=this._ctx;if(t.dir==="next"&&Pd(t,!0)&&t.limit>0)return this._read(i=>{var s=X1(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(r);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,s){n.push(s.primaryKey)}).then(function(){return n}).then(r)}uniqueKeys(r){return this._ctx.unique="unique",this.keys(r)}firstKey(r){return this.limit(1).keys(function(t){return t[0]}).then(r)}lastKey(r){return this.reverse().firstKey(r)}distinct(){var r=this._ctx,t=r.index&&r.table.schema.idxByName[r.index];if(!t||!t.multi)return this;var n={};return BE(this._ctx,function(i){var s=i.primaryKey.toString(),o=to(n,s);return n[s]=!0,!o}),this}modify(r){var t=this._ctx;return this._write(n=>{var i;if(typeof r=="function")i=r;else{var s=zn(r),o=s.length;i=function(b){for(var T=!1,_=0;_<o;++_){var A=s[_],x=r[A];ru(b,A)!==x&&(Ta(b,A,x),T=!0)}return T}}const a=t.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,f=this.db._options.modifyChunkSize||200,c=[];let d=0;const y=[],w=(b,T)=>{const{failures:_,numFailures:A}=T;d+=b-A;for(let x of zn(_))c.push(_[x])};return this.clone().primaryKeys().then(b=>{const T=_=>{const A=Math.min(f,b.length-_);return a.getMany({trans:n,keys:b.slice(_,_+A),cache:"immutable"}).then(x=>{const I=[],O=[],C=l?[]:null,g=[];for(let B=0;B<A;++B){const L=x[B],q={value:Om(L),primKey:b[_+B]};i.call(q,q.value,q)!==!1&&(q.value==null?g.push(b[_+B]):l||ss(u(L),u(q.value))===0?(O.push(q.value),l&&C.push(b[_+B])):(g.push(b[_+B]),I.push(q.value)))}const M=Pd(t)&&t.limit===1/0&&(typeof r!="function"||r===LE)&&{index:t.index,range:t.range};return Promise.resolve(I.length>0&&a.mutate({trans:n,type:"add",values:I}).then(B=>{for(let L in B.failures)g.splice(parseInt(L),1);w(I.length,B)})).then(()=>(O.length>0||M&&typeof r=="object")&&a.mutate({trans:n,type:"put",keys:C,values:O,criteria:M,changeSpec:typeof r!="function"&&r}).then(B=>w(O.length,B))).then(()=>(g.length>0||M&&r===LE)&&a.mutate({trans:n,type:"delete",keys:g,criteria:M}).then(B=>w(g.length,B))).then(()=>b.length>_+A&&T(_+f))})};return T(0).then(()=>{if(c.length>0)throw new Kw("Error modifying one or more objects",c,d,y);return b.length})})})}delete(){var r=this._ctx,t=r.range;return Pd(r)&&(r.isPrimKey&&!b0e||t.type===3)?this._write(n=>{const{primaryKey:i}=r.table.core.schema,s=t;return r.table.core.count({trans:n,query:{index:i,range:s}}).then(o=>r.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:f})=>{if(f)throw new Kw("Could not delete some values",Object.keys(a).map(c=>a[c]),o-f);return o-f}))}):this.modify(LE)}}const LE=(e,r)=>r.value=null;function _0e(e,r){return e<r?-1:e===r?0:1}function x0e(e,r){return e>r?-1:e===r?0:1}function Ws(e,r,t){var n=e instanceof iK?new e.Collection(e):e;return n._ctx.error=t?new t(r):new TypeError(r),n}function Nd(e){return new e.Collection(e,()=>nK("")).limit(0)}function E0e(e,r,t,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=r[l];if(u!==n[l])return i(e[l],t[l])<0?e.substr(0,l)+t[l]+t.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+t.substr(l+1):a>=0?e.substr(0,a)+r[a]+t.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&s==="next"?e+t.substr(e.length):o<e.length&&s==="prev"?e.substr(0,t.length):a<0?null:e.substr(0,a)+n[a]+t.substr(a+1)}function q0(e,r,t,n){var i,s,o,a,l,u,f,c=t.length;if(!t.every(b=>typeof b=="string"))return Ws(e,eK);function d(b){i=function(_){return _==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),s=function(_){return _==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),o=b==="next"?_0e:x0e;var T=t.map(function(_){return{lower:s(_),upper:i(_)}}).sort(function(_,A){return o(_.lower,A.lower)});a=T.map(function(_){return _.upper}),l=T.map(function(_){return _.lower}),u=b,f=b==="next"?"":n}d("next");var y=new e.Collection(e,()=>cc(a[0],l[c-1]+n));y._ondirectionchange=function(b){d(b)};var w=0;return y._addAlgorithm(function(b,T,_){var A=b.key;if(typeof A!="string")return!1;var x=s(A);if(r(x,l,w))return!0;for(var I=null,O=w;O<c;++O){var C=E0e(A,x,a[O],l[O],o,u);C===null&&I===null?w=O+1:(I===null||o(I,C)>0)&&(I=C)}return T(I!==null?function(){b.continue(I+f)}:_),!1}),y}function cc(e,r,t,n){return{type:2,lower:e,upper:r,lowerOpen:t,upperOpen:n}}function nK(e){return{type:1,lower:e,upper:e}}let iK=class{get Collection(){return this._ctx.table.db.Collection}between(r,t,n,i){n=n!==!1,i=i===!0;try{return this._cmp(r,t)>0||this._cmp(r,t)===0&&(n||i)&&(!n||!i)?Nd(this):new this.Collection(this,()=>cc(r,t,!n,!i))}catch{return Ws(this,Ul)}}equals(r){return r==null?Ws(this,Ul):new this.Collection(this,()=>nK(r))}above(r){return r==null?Ws(this,Ul):new this.Collection(this,()=>cc(r,void 0,!0))}aboveOrEqual(r){return r==null?Ws(this,Ul):new this.Collection(this,()=>cc(r,void 0,!1))}below(r){return r==null?Ws(this,Ul):new this.Collection(this,()=>cc(void 0,r,!1,!0))}belowOrEqual(r){return r==null?Ws(this,Ul):new this.Collection(this,()=>cc(void 0,r))}startsWith(r){return typeof r!="string"?Ws(this,eK):this.between(r,r+Xf,!0,!0)}startsWithIgnoreCase(r){return r===""?this.startsWith(r):q0(this,(t,n)=>t.indexOf(n[0])===0,[r],Xf)}equalsIgnoreCase(r){return q0(this,(t,n)=>t===n[0],[r],"")}anyOfIgnoreCase(){var r=Xl.apply(Zd,arguments);return r.length===0?Nd(this):q0(this,(t,n)=>n.indexOf(t)!==-1,r,"")}startsWithAnyOfIgnoreCase(){var r=Xl.apply(Zd,arguments);return r.length===0?Nd(this):q0(this,(t,n)=>n.some(i=>t.indexOf(i)===0),r,Xf)}anyOf(){const r=Xl.apply(Zd,arguments);let t=this._cmp;try{r.sort(t)}catch{return Ws(this,Ul)}if(r.length===0)return Nd(this);const n=new this.Collection(this,()=>cc(r[0],r[r.length-1]));n._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,r.sort(t)};let i=0;return n._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,r[i])>0;)if(++i,i===r.length)return o(a),!1;return t(l,r[i])===0||(o(()=>{s.continue(r[i])}),!1)}),n}notEqual(r){return this.inAnyRange([[SI,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const r=Xl.apply(Zd,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ws(this,Ul)}const t=r.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[SI,i]],null);return t.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(r,t){const n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(r.length===0)return Nd(this);if(!r.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return Ws(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Wt.InvalidArgument);const l=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;let f,c=i;function d(A,x){return c(A[0],x[0])}try{f=r.reduce(function(A,x){let I=0,O=A.length;for(;I<O;++I){const C=A[I];if(n(x[0],C[1])<0&&n(x[1],C[0])>0){C[0]=o(C[0],x[0]),C[1]=a(C[1],x[1]);break}}return I===O&&A.push(x),A},[]),f.sort(d)}catch{return Ws(this,Ul)}let y=0;const w=u?A=>i(A,f[y][1])>0:A=>i(A,f[y][1])>=0,b=l?A=>s(A,f[y][0])>0:A=>s(A,f[y][0])>=0;let T=w;const _=new this.Collection(this,()=>cc(f[0][0],f[f.length-1][1],!l,!u));return _._ondirectionchange=A=>{A==="next"?(T=w,c=i):(T=b,c=s),f.sort(d)},_._addAlgorithm((A,x,I)=>{for(var O=A.key;T(O);)if(++y,y===f.length)return x(I),!1;return!!function(C){return!w(C)&&!b(C)}(O)||(this._cmp(O,f[y][1])===0||this._cmp(O,f[y][0])===0||x(()=>{c===i?A.continue(f[y][0]):A.continue(f[y][1])}),!1)}),_}startsWithAnyOf(){const r=Xl.apply(Zd,arguments);return r.every(t=>typeof t=="string")?r.length===0?Nd(this):this.inAnyRange(r.map(t=>[t,t+Xf])):Ws(this,"startsWithAnyOf() only works with strings")}};function il(e){return nn(function(r){return Ly(r),e(r.target.error),!1})}function Ly(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Fy="storagemutated",bc="x-storagemutated-1",jc=uy(null,Fy);class S0e{_lock(){return Vg(!Mt.global),++this._reculock,this._reculock!==1||Mt.global||(Mt.lockOwnerFor=this),this}_unlock(){if(Vg(!Mt.global),--this._reculock==0)for(Mt.global||(Mt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{bv(r[1],r[0])}catch{}}return this}_locked(){return this._reculock&&Mt.lockOwnerFor!==this}create(r){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Vg(!this.idbtrans),!r&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Wt.DatabaseClosed(n);case"MissingAPIError":throw new Wt.MissingAPI(n.message,n);default:throw new Wt.OpenFailed(n)}if(!this.active)throw new Wt.TransactionInactive;return Vg(this._completion._state===null),(r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=nn(i=>{Ly(i),this._reject(r.error)}),r.onabort=nn(i=>{Ly(i),this.active&&this._reject(new Wt.Abort(r.error)),this.active=!1,this.on("abort").fire(i)}),r.oncomplete=nn(()=>{this.active=!1,this._resolve(),"mutatedParts"in r&&jc.storagemutated.fire(r.mutatedParts)}),this}_promise(r,t,n){if(r==="readwrite"&&this.mode!=="readwrite")return ti(new Wt.ReadOnly("Transaction is readonly"));if(!this.active)return ti(new Wt.TransactionInactive);if(this._locked())return new Et((s,o)=>{this._blockedFuncs.push([()=>{this._promise(r,t,n).then(s,o)},Mt])});if(n)return Lc(()=>{var s=new Et((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Et((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(r){var t=this._root();const n=Et.resolve(r);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Et((o,a)=>{n.then(l=>t._waitingQueue.push(nn(o.bind(null,l))),l=>t._waitingQueue.push(nn(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Wt.Abort))}table(r){const t=this._memoizedTables||(this._memoizedTables={});if(to(t,r))return t[r];const n=this.schema[r];if(!n)throw new Wt.NotFound("Table "+r+" not part of transaction");const i=new this.db.Table(r,n,this);return i.core=this.db.core.table(r),t[r]=i,i}}function kI(e,r,t,n,i,s,o){return{name:e,keyPath:r,unique:t,multi:n,auto:i,compound:s,src:(t&&!o?"&":"")+(n?"*":"")+(i?"++":"")+sK(r)}}function sK(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function oK(e,r,t){return{name:e,primKey:r,indexes:t,mappedClass:null,idxByName:Mq(t,n=>[n.name,n])}}let jy=e=>{try{return e.only([[]]),jy=()=>[[]],[[]]}catch{return jy=()=>Xf,Xf}};function TI(e){return e==null?()=>{}:typeof e=="string"?function(r){return r.split(".").length===1?n=>n[r]:n=>ru(n,r)}(e):r=>ru(r,e)}function JB(e){return[].slice.call(e)}let k0e=0;function cy(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function T0e(e,r,t){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:f,lowerOpen:c,upperOpen:d}=l;return u===void 0?f===void 0?null:r.upperBound(f,!!d):f===void 0?r.lowerBound(u,!!c):r.bound(u,f,!!c,!!d)}const{schema:i,hasGetAll:s}=function(l,u){const f=JB(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(c=>u.objectStore(c)).map(c=>{const{keyPath:d,autoIncrement:y}=c,w=zi(d),b=d==null,T={},_={name:c.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:d,autoIncrement:y,unique:!0,extractKey:TI(d)},indexes:JB(c.indexNames).map(A=>c.index(A)).map(A=>{const{name:x,unique:I,multiEntry:O,keyPath:C}=A,g={name:x,compound:zi(C),keyPath:C,unique:I,multiEntry:O,extractKey:TI(C)};return T[cy(C)]=g,g}),getIndexByKeyPath:A=>T[cy(A)]};return T[":id"]=_.primaryKey,d!=null&&(T[cy(d)]=_.primaryKey),_})},hasGetAll:f.length>0&&"getAll"in u.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=i.tables.map(l=>function(u){const f=u.name;return{name:f,schema:u,mutate:function({trans:c,type:d,keys:y,values:w,range:b}){return new Promise((T,_)=>{T=nn(T);const A=c.objectStore(f),x=A.keyPath==null,I=d==="put"||d==="add";if(!I&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:O}=y||w||{length:1};if(y&&w&&y.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const g=[],M=[];let B=0;const L=Q=>{++B,Ly(Q)};if(d==="deleteRange"){if(b.type===4)return T({numFailures:B,failures:M,results:[],lastResult:void 0});b.type===3?g.push(C=A.clear()):g.push(C=A.delete(n(b)))}else{const[Q,re]=I?x?[w,y]:[w,null]:[y,null];if(I)for(let Z=0;Z<O;++Z)g.push(C=re&&re[Z]!==void 0?A[d](Q[Z],re[Z]):A[d](Q[Z])),C.onerror=L;else for(let Z=0;Z<O;++Z)g.push(C=A[d](Q[Z])),C.onerror=L}const q=Q=>{const re=Q.target.result;g.forEach((Z,j)=>Z.error!=null&&(M[j]=Z.error)),T({numFailures:B,failures:M,results:d==="delete"?y:g.map(Z=>Z.result),lastResult:re})};C.onerror=Q=>{L(Q),q(Q)},C.onsuccess=q})},getMany:({trans:c,keys:d})=>new Promise((y,w)=>{y=nn(y);const b=c.objectStore(f),T=d.length,_=new Array(T);let A,x=0,I=0;const O=g=>{const M=g.target;_[M._pos]=M.result,++I===x&&y(_)},C=il(w);for(let g=0;g<T;++g)d[g]!=null&&(A=b.get(d[g]),A._pos=g,A.onsuccess=O,A.onerror=C,++x);x===0&&y(_)}),get:({trans:c,key:d})=>new Promise((y,w)=>{y=nn(y);const b=c.objectStore(f).get(d);b.onsuccess=T=>y(T.target.result),b.onerror=il(w)}),query:function(c){return d=>new Promise((y,w)=>{y=nn(y);const{trans:b,values:T,limit:_,query:A}=d,x=_===1/0?void 0:_,{index:I,range:O}=A,C=b.objectStore(f),g=I.isPrimaryKey?C:C.index(I.name),M=n(O);if(_===0)return y({result:[]});if(c){const B=T?g.getAll(M,x):g.getAllKeys(M,x);B.onsuccess=L=>y({result:L.target.result}),B.onerror=il(w)}else{let B=0;const L=T||!("openKeyCursor"in g)?g.openCursor(M):g.openKeyCursor(M),q=[];L.onsuccess=Q=>{const re=L.result;return re?(q.push(T?re.value:re.primaryKey),++B===_?y({result:q}):void re.continue()):y({result:q})},L.onerror=il(w)}})}(s),openCursor:function({trans:c,values:d,query:y,reverse:w,unique:b}){return new Promise((T,_)=>{T=nn(T);const{index:A,range:x}=y,I=c.objectStore(f),O=A.isPrimaryKey?I:I.index(A.name),C=w?b?"prevunique":"prev":b?"nextunique":"next",g=d||!("openKeyCursor"in O)?O.openCursor(n(x),C):O.openKeyCursor(n(x),C);g.onerror=il(_),g.onsuccess=nn(M=>{const B=g.result;if(!B)return void T(null);B.___id=++k0e,B.done=!1;const L=B.continue.bind(B);let q=B.continuePrimaryKey;q&&(q=q.bind(B));const Q=B.advance.bind(B),re=()=>{throw new Error("Cursor not stopped")};B.trans=c,B.stop=B.continue=B.continuePrimaryKey=B.advance=()=>{throw new Error("Cursor not started")},B.fail=nn(_),B.next=function(){let Z=1;return this.start(()=>Z--?this.continue():this.stop()).then(()=>this)},B.start=Z=>{const j=new Promise((ie,Ee)=>{ie=nn(ie),g.onerror=il(Ee),B.fail=Ee,B.stop=$e=>{B.stop=B.continue=B.continuePrimaryKey=B.advance=re,ie($e)}}),X=()=>{if(g.result)try{Z()}catch(ie){B.fail(ie)}else B.done=!0,B.start=()=>{throw new Error("Cursor behind last entry")},B.stop()};return g.onsuccess=nn(ie=>{g.onsuccess=X,X()}),B.continue=L,B.continuePrimaryKey=q,B.advance=Q,X(),j},T(B)},_)})},count({query:c,trans:d}){const{index:y,range:w}=c;return new Promise((b,T)=>{const _=d.objectStore(f),A=y.isPrimaryKey?_:_.index(y.name),x=n(w),I=x?A.count(x):A.count();I.onsuccess=nn(O=>b(O.target.result)),I.onerror=il(T)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:jy(r),schema:i}}function II({_novip:e},r){const t=r.db,n=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(f,c){return c.reduce((d,{create:y})=>({...d,...y(d)}),f)}(T0e(s,o,l),i.dbcore)}}(e._middlewares,t,e._deps,r);e.core=n.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Xw({_novip:e},r,t,n){t.forEach(i=>{const s=n[i];r.forEach(o=>{const a=_P(o,i);(!a||"value"in a&&a.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?tu(o,i,{get(){return this.table(i)},set(l){Rq(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function AI({_novip:e},r){r.forEach(t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]})}function I0e(e,r){return e._cfg.version-r._cfg.version}function A0e(e,r,t,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(t),s._completion.catch(n);const o=s._reject.bind(s),a=Mt.transless||Mt;Lc(()=>{Mt.trans=s,Mt.transless=a,r===0?(zn(i).forEach(l=>{FE(t,l,i[l].primKey,i[l].indexes)}),II(e,t),Et.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,f,c){const d=[],y=l._versions;let w=l._dbSchema=CI(l,l.idbdb,c),b=!1;const T=y.filter(A=>A._cfg.version>=u);function _(){return d.length?Et.resolve(d.shift()(f.idbtrans)).then(_):Et.resolve()}return T.forEach(A=>{d.push(()=>{const x=w,I=A._cfg.dbschema;PI(l,x,c),PI(l,I,c),w=l._dbSchema=I;const O=aK(x,I);O.add.forEach(g=>{FE(c,g[0],g[1].primKey,g[1].indexes)}),O.change.forEach(g=>{if(g.recreate)throw new Wt.Upgrade("Not yet support for changing primary key");{const M=c.objectStore(g.name);g.add.forEach(B=>OI(M,B)),g.change.forEach(B=>{M.deleteIndex(B.name),OI(M,B)}),g.del.forEach(B=>M.deleteIndex(B))}});const C=A._cfg.contentUpgrade;if(C&&A._cfg.version>u){II(l,c),f._memoizedTables={},b=!0;let g=Lq(I);O.del.forEach(q=>{g[q]=x[q]}),AI(l,[l.Transaction.prototype]),Xw(l,[l.Transaction.prototype],zn(g),g),f.schema=g;const M=xP(C);let B;M&&mv();const L=Et.follow(()=>{if(B=C(f),B&&M){var q=vu.bind(null,null);B.then(q,q)}});return B&&typeof B.then=="function"?Et.resolve(B):L.then(()=>B)}}),d.push(x=>{(!b||!m0e)&&function(I,O){[].slice.call(O.db.objectStoreNames).forEach(C=>I[C]==null&&O.db.deleteObjectStore(C))}(A._cfg.dbschema,x),AI(l,[l.Transaction.prototype]),Xw(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),_().then(()=>{var A,x;x=c,zn(A=w).forEach(I=>{x.db.objectStoreNames.contains(I)||FE(x,I,A[I].primKey,A[I].indexes)})})}(e,r,s,t).catch(o)})}function aK(e,r){const t={del:[],add:[],change:[]};let n;for(n in e)r[n]||t.del.push(n);for(n in r){const i=e[n],s=r[n];if(i){const o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!D_)o.recreate=!0,t.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const f=a[u],c=l[u];f?f.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([n,s])}return t}function FE(e,r,t,n){const i=e.db.createObjectStore(r,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return n.forEach(s=>OI(i,s)),i}function OI(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function CI(e,r,t){const n={};return qw(r.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const a=kI(sK(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let f=0;f<s.indexNames.length;++f){const c=s.index(s.indexNames[f]);o=c.keyPath;var u=kI(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}n[i]=oK(i,a,l)}),n}function PI({_novip:e},r,t){const n=t.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=t.objectStore(s);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,f=typeof u=="string"?u:"["+qw(u).join("+")+"]";if(r[s]){const c=r[s].idxByName[f];c&&(c.name=l,delete r[s].idxByName[f],r[s].idxByName[l]=c)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&en.WorkerGlobalScope&&en instanceof en.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class O0e{_parseStoresSpec(r,t){zn(r).forEach(n=>{if(r[n]!==null){var i=r[n].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return kI(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),zi(u),a===0)}),s=i.shift();if(s.multi)throw new Wt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Wt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Wt.Schema("Index must have a name and cannot be an empty string")}),t[n]=oK(n,s,i)}})}stores(r){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?as(this._cfg.storesSource,r):r;const n=t._versions,i={};let s={};return n.forEach(o=>{as(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,AI(t,[t._allTables,t,t.Transaction.prototype]),Xw(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],zn(s),s),t._storeNames=zn(s),this}upgrade(r){return this._cfg.contentUpgrade=kP(this._cfg.contentUpgrade||Ur,r),this}}function OP(e,r){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new Tc(B_,{addons:[],indexedDB:e,IDBKeyRange:r}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function CP(e){return e&&typeof e.databases=="function"}function NI(e){return Lc(function(){return Mt.letThrough=!0,e()})}function C0e(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(r){var t=function(){return indexedDB.databases().finally(r)};e=setInterval(t,100),t()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function P0e(e){const r=e._state,{indexedDB:t}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?ti(r.dbOpenError):e);_l&&(r.openCanceller._stackHolder=Fh()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const n=r.openCanceller;function i(){if(r.openCanceller!==n)throw new Wt.DatabaseClosed("db.open() was cancelled")}let s=r.dbReadyResolve,o=null,a=!1;return Et.race([n,(typeof navigator>"u"?Et.resolve():C0e()).then(()=>new Et((l,u)=>{if(i(),!t)throw new Wt.MissingAPI;const f=e.name,c=r.autoSchema?t.open(f):t.open(f,Math.round(10*e.verno));if(!c)throw new Wt.MissingAPI;c.onerror=il(u),c.onblocked=nn(e._fireOnBlocked),c.onupgradeneeded=nn(d=>{if(o=c.transaction,r.autoSchema&&!e._options.allowEmptyDB){c.onerror=Ly,o.abort(),c.result.close();const w=t.deleteDatabase(f);w.onsuccess=w.onerror=nn(()=>{u(new Wt.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{o.onerror=il(u);var y=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=y<1,e._novip.idbdb=c.result,A0e(e,y/10,o,u)}},u),c.onsuccess=nn(()=>{o=null;const d=e._novip.idbdb=c.result,y=qw(d.objectStoreNames);if(y.length>0)try{const b=d.transaction((w=y).length===1?w[0]:w,"readonly");r.autoSchema?function({_novip:T},_,A){T.verno=_.version/10;const x=T._dbSchema=CI(0,_,A);T._storeNames=qw(_.objectStoreNames,0),Xw(T,[T._allTables],zn(x),x)}(e,d,b):(PI(e,e._dbSchema,b),function(T,_){const A=aK(CI(0,T.idbdb,_),T._dbSchema);return!(A.add.length||A.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),II(e,b)}catch{}var w;ly.push(e),d.onversionchange=nn(b=>{r.vcFired=!0,e.on("versionchange").fire(b)}),d.onclose=nn(b=>{e.on("close").fire(b)}),a&&function({indexedDB:b,IDBKeyRange:T},_){!CP(b)&&_!==B_&&OP(b,T).put({name:_}).catch(Ur)}(e._deps,f),l()},u)}))]).then(()=>(i(),r.onReadyBeingFired=[],Et.resolve(NI(()=>e.on.ready.fire(e.vip))).then(function l(){if(r.onReadyBeingFired.length>0){let u=r.onReadyBeingFired.reduce(kP,Ur);return r.onReadyBeingFired=[],Et.resolve(NI(()=>u(e.vip))).then(l)}}))).finally(()=>{r.onReadyBeingFired=null,r.isBeingOpened=!1}).then(()=>e).catch(l=>{r.dbOpenError=l;try{o&&o.abort()}catch{}return n===r.openCanceller&&e._close(),ti(l)}).finally(()=>{r.openComplete=!0,s()})}function RI(e){var r=s=>e.next(s),t=i(r),n=i(s=>e.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(t,n):zi(l)?Promise.all(l).then(t,n):t(l)}}return i(r)()}function N0e(e,r,t){var n=arguments.length;if(n<2)throw new Wt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return t=i.pop(),[e,Fq(i),t]}function lK(e,r,t,n,i){return Et.resolve().then(()=>{const s=Mt.transless||Mt,o=e._createTransaction(r,t,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===SP.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>lK(e,r,t,null,i))):ti(c)}const l=xP(i);let u;l&&mv();const f=Et.follow(()=>{if(u=i.call(o,o),u)if(l){var c=vu.bind(null,null);u.then(c,c)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=RI(u))},a);return(u&&typeof u.then=="function"?Et.resolve(u).then(c=>o.active?c:ti(new Wt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>u)).then(c=>(n&&o._resolve(),o._completion.then(()=>c))).catch(c=>(o._reject(c),ti(c)))})}function K0(e,r,t){const n=zi(e)?e.slice():[e];for(let i=0;i<t;++i)n.push(r);return n}const R0e={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(r){const t=e.table(r),{schema:n}=t,i={},s=[];function o(f,c,d){const y=cy(f),w=i[y]=i[y]||[],b=f==null?0:typeof f=="string"?1:f.length,T=c>0,_={...d,isVirtual:T,keyTail:c,keyLength:b,extractKey:TI(f),unique:!T&&d.unique};return w.push(_),_.isPrimaryKey||s.push(_),b>1&&o(b===2?f[0]:f.slice(0,b-1),c+1,d),w.sort((A,x)=>A.keyTail-x.keyTail),_}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const f of n.indexes)o(f.keyPath,0,f);function l(f){const c=f.query.index;return c.isVirtual?{...f,query:{index:c,range:(d=f.query.range,y=c.keyTail,{type:d.type===1?2:d.type,lower:K0(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:K0(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}:f;var d,y}return{...t,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(f){const c=i[cy(f)];return c&&c[0]}},count:f=>t.count(l(f)),query:f=>t.query(l(f)),openCursor(f){const{keyTail:c,isVirtual:d,keyLength:y}=f.query.index;return d?t.openCursor(l(f)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(_){_!=null?b.continue(K0(_,f.reverse?e.MAX_KEY:e.MIN_KEY,c)):f.unique?b.continue(b.key.slice(0,y).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,c)):b.continue()}},continuePrimaryKey:{value(_,A){b.continuePrimaryKey(K0(_,e.MAX_KEY,c),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const _=b.key;return y===1?_[0]:_.slice(0,y)}},value:{get:()=>b.value}})}(w)):t.openCursor(f)}}}}}};function PP(e,r,t,n){return t=t||{},n=n||"",zn(e).forEach(i=>{if(to(r,i)){var s=e[i],o=r[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=dI(s);a!==dI(o)?t[n+i]=r[i]:a==="Object"?PP(s,o,t,n+i+"."):s!==o&&(t[n+i]=r[i])}else s!==o&&(t[n+i]=r[i])}else t[n+i]=void 0}),zn(r).forEach(i=>{to(e,i)||(t[n+i]=r[i])}),t}const D0e={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(r){const t=e.table(r),{primaryKey:n}=t.schema;return{...t,mutate(s){const o=Mt.trans,{deleting:a,creating:l,updating:u}=o.table(r).hook;switch(s.type){case"add":if(l.fire===Ur)break;return o._promise("readwrite",()=>f(s),!0);case"put":if(l.fire===Ur&&u.fire===Ur)break;return o._promise("readwrite",()=>f(s),!0);case"delete":if(a.fire===Ur)break;return o._promise("readwrite",()=>f(s),!0);case"deleteRange":if(a.fire===Ur)break;return o._promise("readwrite",()=>function(d){return c(d.trans,d.range,1e4)}(s),!0)}return t.mutate(s);function f(d){const y=Mt.trans,w=d.keys||function(b,T){return T.type==="delete"?T.keys:T.keys||T.values.map(b.extractKey)}(n,d);if(!w)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:w}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(b,T,_){return T.type==="add"?Promise.resolve([]):b.getMany({trans:T.trans,keys:_,cache:"immutable"})}(t,d,w).then(b=>{const T=w.map((_,A)=>{const x=b[A],I={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(I,_,x,y);else if(d.type==="add"||x===void 0){const O=l.fire.call(I,_,d.values[A],y);_==null&&O!=null&&(_=O,d.keys[A]=_,n.outbound||Ta(d.values[A],n.keyPath,_))}else{const O=PP(x,d.values[A]),C=u.fire.call(I,O,_,x,y);if(C){const g=d.values[A];Object.keys(C).forEach(M=>{to(g,M)?g[M]=C[M]:Ta(g,M,C[M])})}}return I});return t.mutate(d).then(({failures:_,results:A,numFailures:x,lastResult:I})=>{for(let O=0;O<w.length;++O){const C=A?A[O]:w[O],g=T[O];C==null?g.onerror&&g.onerror(_[O]):g.onsuccess&&g.onsuccess(d.type==="put"&&b[O]?d.values[O]:C)}return{failures:_,results:A,numFailures:x,lastResult:I}}).catch(_=>(T.forEach(A=>A.onerror&&A.onerror(_)),Promise.reject(_)))})}function c(d,y,w){return t.query({trans:d,values:!1,query:{index:n,range:y},limit:w}).then(({result:b})=>f({type:"delete",keys:b,trans:d}).then(T=>T.numFailures>0?Promise.reject(T.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:c(d,{...y,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function uK(e,r,t){try{if(!r||r.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<r.keys.length&&s<e.length;++i)ss(r.keys[i],e[s])===0&&(n.push(t?Om(r.values[i]):r.values[i]),++s);return n.length===e.length?n:null}catch{return null}}const B0e={stack:"dbcore",level:-1,create:e=>({table:r=>{const t=e.table(r);return{...t,getMany:n=>{if(!n.cache)return t.getMany(n);const i=uK(n.keys,n.trans._cache,n.cache==="clone");return i?Et.resolve(i):t.getMany(n).then(s=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Om(s):s},s))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),t.mutate(n))}}})};function NP(e){return!("from"in e)}const Vl=function(e,r){if(!this){const t=new Vl;return e&&"d"in e&&as(t,e),t}as(this,arguments.length?{d:1,from:e,to:arguments.length>1?r:e}:{d:0})};function zy(e,r,t){const n=ss(r,t);if(isNaN(n))return;if(n>0)throw RangeError();if(NP(e))return as(e,{from:r,to:t,d:1});const i=e.l,s=e.r;if(ss(t,e.from)<0)return i?zy(i,r,t):e.l={from:r,to:t,d:1,l:null,r:null},QB(e);if(ss(r,e.to)>0)return s?zy(s,r,t):e.r={from:r,to:t,d:1,l:null,r:null},QB(e);ss(r,e.from)<0&&(e.from=r,e.l=null,e.d=s?s.d+1:1),ss(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Jw(e,i),s&&o&&Jw(e,s)}function Jw(e,r){NP(r)||function t(n,{from:i,to:s,l:o,r:a}){zy(n,i,s),o&&t(n,o),a&&t(n,a)}(e,r)}function M0e(e,r){const t=DI(r);let n=t.next();if(n.done)return!1;let i=n.value;const s=DI(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(ss(a.from,i.to)<=0&&ss(a.to,i.from)>=0)return!0;ss(i.from,a.from)<0?i=(n=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function DI(e){let r=NP(e)?null:{s:0,n:e};return{next(t){const n=arguments.length>0;for(;r;)switch(r.s){case 0:if(r.s=1,n)for(;r.n.l&&ss(t,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!n||ss(t,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function QB(e){var r,t;const n=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],o[i]=a[s],e[s]=o,o.d=e6(o)}e.d=e6(e)}function e6({r:e,l:r}){return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}Up(Vl.prototype,{add(e){return Jw(this,e),this},addKey(e){return zy(this,e,e),this},addKeys(e){return e.forEach(r=>zy(this,r,r)),this},[pI](){return DI(this)}});const L0e={stack:"dbcore",level:0,create:e=>{const r=e.schema.name,t=new Vl(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:d=>{const y=d.trans,w=y.mutatedParts||(y.mutatedParts={}),b=C=>{const g=`idb://${r}/${n}/${C}`;return w[g]||(w[g]=new Vl)},T=b(""),_=b(":dels"),{type:A}=d;let[x,I]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const O=d.trans._cache;return i.mutate(d).then(C=>{if(zi(x)){A!=="delete"&&(x=C.results),T.addKeys(x);const g=uK(x,O);g||A==="add"||_.addKeys(x),(g||I)&&function(M,B,L,q){function Q(re){const Z=M(re.name||"");function j(ie){return ie!=null?re.extractKey(ie):null}const X=ie=>re.multiEntry&&zi(ie)?ie.forEach(Ee=>Z.addKey(Ee)):Z.addKey(ie);(L||q).forEach((ie,Ee)=>{const $e=L&&j(L[Ee]),Pe=q&&j(q[Ee]);ss($e,Pe)!==0&&($e!=null&&X($e),Pe!=null&&X(Pe))})}B.indexes.forEach(Q)}(b,s,g,I)}else if(x){const g={from:x.lower,to:x.upper};_.add(g),T.add(g)}else T.add(t),_.add(t),s.indexes.forEach(g=>b(g.name).add(t));return C})}},f=({query:{index:d,range:y}})=>{var w,b;return[d,new Vl((w=y.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=y.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},c={get:d=>[o,new Vl(d.key)],getMany:d=>[o,new Vl().addKeys(d.keys)],count:f,query:f,openCursor:f};return zn(c).forEach(d=>{u[d]=function(y){const{subscr:w}=Mt;if(w){const b=I=>{const O=`idb://${r}/${n}/${I}`;return w[O]||(w[O]=new Vl)},T=b(""),_=b(":dels"),[A,x]=c[d](y);if(b(A.name||"").add(x),!A.isPrimaryKey){if(d!=="count"){const I=d==="query"&&l&&y.values&&i.query({...y,values:!1});return i[d].apply(this,arguments).then(O=>{if(d==="query"){if(l&&y.values)return I.then(({result:g})=>(T.addKeys(g),O));const C=y.values?O.result.map(a):O.result;y.values?T.addKeys(C):_.addKeys(C)}else if(d==="openCursor"){const C=O,g=y.values;return C&&Object.create(C,{key:{get:()=>(_.addKey(C.primaryKey),C.key)},primaryKey:{get(){const M=C.primaryKey;return _.addKey(M),M}},value:{get:()=>(g&&T.addKey(C.primaryKey),C.value)}})}return O})}_.add(t)}}return i[d].apply(this,arguments)}}),u}}}};class Tc{constructor(r,t){this._middlewares={},this.verno=0;const n=Tc.dependencies;this._options=t={addons:Tc.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ur,dbReadyPromise:null,cancelOpen:Ur,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new Et(a=>{s.dbReadyResolve=a}),s.openCanceller=new Et((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=r,this.on=uy(this,"populate","blocked","versionchange","close",{ready:[kP,Ur]}),this.on.ready.subscribe=Dq(this.on.ready.subscribe,a=>(l,u)=>{Tc.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||Et.resolve().then(l),u&&a(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),u&&a(l);else{a(l);const c=this;u||a(function d(){c.on.ready.unsubscribe(l),c.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,Rg($0e.prototype,function(a,l){this.db=o;let u=rK,f=null;if(l)try{u=l()}catch(w){f=w}const c=a._ctx,d=c.table,y=d.hook.reading.fire;this._ctx={table:d,index:c.index,isPrimKey:!c.index||d.schema.primKey.keyPath&&c.index===d.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:c.or,valueMapper:y!==By?y:null}})),this.Table=function(a){return Rg(w0e.prototype,function(l,u,f){this.db=a,this._tx=f,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:uy(null,{creating:[l0e,Ur],reading:[a0e,By],updating:[c0e,Ur],deleting:[u0e,Ur]})})}(this),this.Transaction=function(a){return Rg(S0e.prototype,function(l,u,f,c,d){this.db=a,this.mode=l,this.storeNames=u,this.schema=f,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=uy(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Et((y,w)=>{this._resolve=y,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},y=>{var w=this.active;return this.active=!1,this.on.error.fire(y),this.parent?this.parent._reject(y):w&&this.idbtrans&&this.idbtrans.abort(),ti(y)})})}(this),this.Version=function(a){return Rg(O0e.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Rg(iK.prototype,function(l,u,f){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:f};const c=a._deps.indexedDB;if(!c)throw new Wt.MissingAPI;this._cmp=this._ascending=c.cmp.bind(c),this._descending=(d,y)=>c.cmp(y,d),this._max=(d,y)=>c.cmp(d,y)>0?d:y,this._min=(d,y)=>c.cmp(d,y)<0?d:y,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=jy(t.IDBKeyRange),this._createTransaction=(a,l,u,f)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,f),this._fireOnBlocked=a=>{this.on("blocked").fire(a),ly.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(R0e),this.use(D0e),this.use(L0e),this.use(B0e),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(r){if(isNaN(r)||r<.1)throw new Wt.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new Wt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);const t=this._versions;var n=t.filter(i=>i._cfg.version===r)[0];return n||(n=new this.Version(r),t.push(n),t.sort(I0e),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(r){return this.idbdb&&(this._state.openComplete||Mt.letThrough||this._vip)?r():new Et((t,n)=>{if(this._state.openComplete)return n(new Wt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new Wt.DatabaseClosed);this.open().catch(Ur)}this._state.dbReadyPromise.then(t,n)}).then(r)}use({stack:r,create:t,level:n,name:i}){i&&this.unuse({stack:r,name:i});const s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:t,level:n??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:r,name:t,create:n}){return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(i=>n?i.create!==n:!!t&&i.name!==t)),this}open(){return P0e(this)}_close(){const r=this._state,t=ly.indexOf(this);if(t>=0&&ly.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}r.dbReadyPromise=new Et(n=>{r.dbReadyResolve=n}),r.openCanceller=new Et((n,i)=>{r.cancelOpen=i})}close(){this._close();const r=this._state;this._options.autoOpen=!1,r.dbOpenError=new Wt.DatabaseClosed,r.isBeingOpened&&r.cancelOpen(r.dbOpenError)}delete(){const r=arguments.length>0,t=this._state;return new Et((n,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=nn(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!CP(a)&&u!==B_&&OP(a,l).delete(u).catch(Ur)})(this._deps,this.name),n()}),o.onerror=il(i),o.onblocked=this._fireOnBlocked};if(r)throw new Wt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return zn(this._allTables).map(r=>this._allTables[r])}transaction(){const r=N0e.apply(this,arguments);return this._transaction.apply(this,r)}_transaction(r,t,n){let i=Mt.trans;i&&i.db===this&&r.indexOf("!")===-1||(i=null);const s=r.indexOf("?")!==-1;let o,a;r=r.replace("!","").replace("?","");try{if(a=t.map(u=>{var f=u instanceof this.Table?u.name:u;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),r=="r"||r===RE)o=RE;else{if(r!="rw"&&r!=DE)throw new Wt.InvalidArgument("Invalid transaction mode: "+r);o=DE}if(i){if(i.mode===RE&&o===DE){if(!s)throw new Wt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new Wt.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(f,c)=>{c(u)}):ti(u)}const l=lK.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Mt.trans?bv(Mt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(r){if(!to(this._allTables,r))throw new Wt.InvalidTable(`Table ${r} does not exist`);return this._allTables[r]}}const F0e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class j0e{constructor(r){this._subscribe=r}subscribe(r,t,n){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:t,complete:n})}[F0e](){return this}}function cK(e,r){return zn(r).forEach(t=>{Jw(e[t]||(e[t]=new Vl),r[t])}),e}function z0e(e){let r,t=!1;const n=new j0e(i=>{const s=xP(e);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,jc.storagemutated.unsubscribe(y)}};i.start&&i.start(u);let f=!1,c=!1;function d(){return zn(l).some(b=>a[b]&&M0e(a[b],l[b]))}const y=b=>{cK(a,b),d()&&w()},w=()=>{if(f||o)return;a={};const b={},T=function(_){s&&mv();const A=()=>Lc(e,{subscr:_,trans:null}),x=Mt.trans?bv(Mt.transless,A):A();return s&&x.then(vu,vu),x}(b);c||(jc(Fy,y),c=!0),f=!0,Promise.resolve(T).then(_=>{t=!0,r=_,f=!1,o||(d()?w():(a={},l=b,i.next&&i.next(_)))},_=>{f=!1,t=!1,i.error&&i.error(_),u.unsubscribe()})};return w(),u});return n.hasValue=()=>t,n.getValue=()=>r,n}let BI;try{BI={indexedDB:en.indexedDB||en.mozIndexedDB||en.webkitIndexedDB||en.msIndexedDB,IDBKeyRange:en.IDBKeyRange||en.webkitIDBKeyRange}}catch{BI={indexedDB:null,IDBKeyRange:null}}const Sf=Tc;function J1(e){let r=Ql;try{Ql=!0,jc.storagemutated.fire(e)}finally{Ql=r}}Up(Sf,{...K1,delete:e=>new Sf(e,{addons:[]}).delete(),exists:e=>new Sf(e,{addons:[]}).open().then(r=>(r.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:r,IDBKeyRange:t}){return CP(r)?Promise.resolve(r.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==B_)):OP(r,t).toCollection().primaryKeys()}(Sf.dependencies).then(e)}catch{return ti(new Wt.MissingAPI)}},defineClass:()=>function(e){as(this,e)},ignoreTransaction:e=>Mt.trans?bv(Mt.transless,e):e(),vip:NI,async:function(e){return function(){try{var r=RI(e.apply(this,arguments));return r&&typeof r.then=="function"?r:Et.resolve(r)}catch(t){return ti(t)}}},spawn:function(e,r,t){try{var n=RI(e.apply(t,r||[]));return n&&typeof n.then=="function"?n:Et.resolve(n)}catch(i){return ti(i)}},currentTransaction:{get:()=>Mt.trans||null},waitFor:function(e,r){const t=Et.resolve(typeof e=="function"?Sf.ignoreTransaction(e):e).timeout(r||6e4);return Mt.trans?Mt.trans.waitFor(t):t},Promise:Et,debug:{get:()=>_l,set:e=>{zq(e,e==="dexie"?()=>!0:tK)}},derive:_p,extend:as,props:Up,override:Dq,Events:uy,on:jc,liveQuery:z0e,extendObservabilitySet:cK,getByKeyPath:ru,setByKeyPath:Ta,delByKeyPath:function(e,r){typeof r=="string"?Ta(e,r,void 0):"length"in r&&[].map.call(r,function(t){Ta(e,t,void 0)})},shallowClone:Lq,deepClone:Om,getObjectDiff:PP,cmp:ss,asap:Bq,minKey:SI,addons:[],connections:ly,errnames:SP,dependencies:BI,semVer:VB,version:VB.split(".").map(e=>parseInt(e)).reduce((e,r,t)=>e+r/Math.pow(10,2*t))}),Sf.maxKey=jy(Sf.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(jc(Fy,e=>{if(!Ql){let r;D_?(r=document.createEvent("CustomEvent"),r.initCustomEvent(bc,!0,!0,e)):r=new CustomEvent(bc,{detail:e}),Ql=!0,dispatchEvent(r),Ql=!1}}),addEventListener(bc,({detail:e})=>{Ql||J1(e)}));let Ql=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(bc);typeof e.unref=="function"&&e.unref(),jc(Fy,r=>{Ql||e.postMessage(r)}),e.onmessage=r=>{r.data&&J1(r.data)}}else if(typeof self<"u"&&typeof navigator<"u"){jc(Fy,r=>{try{Ql||(typeof localStorage<"u"&&localStorage.setItem(bc,JSON.stringify({trig:Math.random(),changedParts:r})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:bc,changedParts:r})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",r=>{if(r.key===bc){const t=JSON.parse(r.newValue);t&&J1(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:r}){r&&r.type===bc&&J1(r.changedParts)})}Et.rejectionMapper=function(e,r){if(!e||e instanceof xp||e instanceof TypeError||e instanceof SyntaxError||!e.name||!UB[e.name])return e;var t=new UB[e.name](r||e.message,e);return"stack"in e&&tu(t,"stack",{get:function(){return this.inner.stack}}),t},zq(_l,tK);class H0e extends Tc{constructor(){super("iris");ce(this,"events");this.version(2).stores({events:"id, pubkey, kind, created_at"})}}const ua=new H0e,ul={db:ua,subscribedEventIds:new Set,subscribedAuthors:new Set,seenFilters:new Set,saveQueue:[],clear(){return ua.delete()},save:wn.throttle(e=>{const r=e.saveQueue;e.saveQueue=[],ua.events.bulkAdd(r).catch(()=>{})},500),saveEvent(e){this.saveQueue.push(e),this.save(this)},init(){const e=de.getPubKey();ua.events.where({pubkey:e}).each(r=>{Re.handle(r,!1,!1)}).then(()=>ua.events.where({kind:3}).each(r=>{Re.handle(r,!1,!1)})).then(()=>ua.events.where({kind:0}).each(r=>{Re.handle(r,!1,!1)})).then(()=>ua.events.where({kind:4}).each(r=>{Re.handle(r,!1,!1)})).then(()=>ua.events.orderBy("created_at").reverse().filter(r=>r.kind===1).limit(5e3).each(r=>{Re.handle(r,!1,!1)}))},subscribeToAuthors:wn.throttle(e=>{const r=Array.from(ul.subscribedAuthors.values());ul.subscribedAuthors.clear(),ua.events.where("pubkey").anyOf(r).limit(e||1e3).each(t=>{Re.handle(t,!1,!1)})},1e3),subscribeToEventIds:wn.throttle(()=>{const e=Array.from(ul.subscribedEventIds.values());ul.subscribedEventIds.clear(),ua.events.where("id").anyOf(e).each(r=>{Re.handle(r,!1,!1)})},1e3),subscribe(e){var t,n;if(!e||e["#e"]||e["#p"])return;let r=ua.events;if((t=e.ids)!=null&&t.length){e.ids.forEach(i=>{this.subscribedEventIds.add(i)}),this.subscribeToEventIds();return}else if((n=e.authors)!=null&&n.length){e.authors.forEach(i=>{this.subscribedAuthors.add(i)}),this.subscribeToAuthors();return}else{const i=JSON.stringify(e);if(this.seenFilters.has(i))return;this.seenFilters.add(i),e.kinds&&(r=r.where?r.where("kind").anyOf(e.kinds):r.and(s=>{var o;return(o=e.kinds)==null?void 0:o.includes(s.kind)})),e.limit&&(r=r.limit(e.limit))}r.each(i=>{Re.handle(i,!1,!1)})}};let Dg={};const jE=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi"],t6=["wss://relay.nostr.band"],sn={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:jE,init(){this.relays=new Map(jE.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(t6.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(r=>r.enabled).map(r=>r.url)},getSubscriptionIdForName(e){return hr.arrayToHex(__(e)).slice(0,8)},getUrlsFromFollowEvent(e){const r=new Map;if(e.content)try{const t=JSON.parse(e.content);for(const n in t)try{const i=new URL(n).toString().replace(/\/$/,"");r.set(i,t[n])}catch{console.log("invalid relay url",n,e)}}catch{console.log("failed to parse relay urls",e)}return r},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return Re.db.find({kind:3}).forEach(t=>{if(t.content)try{const n=JSON.parse(t.content);for(const i in n)try{const s=new URL(i).toString().replace(/\/$/,""),o=e.get(s)||0;e.set(s,o+1)}catch{console.log("invalid relay url",i,t)}}catch{console.log("failed to parse relay urls",t)}}),Array.from(e.entries()).filter(([t])=>!this.relays.has(t)).sort((t,n)=>n[1]-t[1]).map(t=>({url:t[0],users:t[1]}))},getConnectedRelayCount:function(){var r;let e=0;for(const t of this.relays.keys())((r=Bt.relayPool.relayByUrl.get(t))==null?void 0:r.status)===1&&e++;return e},getUserRelays(e){let r=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const t=Re.db.findOne({kind:3,pubkey:e});return t&&(r=this.getUrlsFromFollowEvent(t)),Array.from(r.entries())},manage:function(){De.get("relays").put({}),De.get("relays").on(e=>{if(e){Dg=e;for(const r of this.relays.keys())if(Dg[r]===null)this.remove(r);else if(Dg[r]&&Dg[r].enabled===!1){const t=this.relays.get(r);t&&(t.enabled=!1,this.relays.set(r,t),Bt.relayPool.removeRelay(r))}for(const[r,t]of Object.entries(Dg))if(t)this.relays.has(r)||(this.relays.set(r,{url:r,enabled:!!t.enabled}),t.enabled&&Bt.relayPool.addOrGetRelay(r));else{this.relays.has(r)&&this.remove(r);continue}}})},add(e){if(this.relays.has(e))return;const r={enabled:!0,url:e};this.relays.set(e,r),Bt.relayPool.addOrGetRelay(e)},remove(e){try{Bt.relayPool.removeRelay(e)}catch(r){console.log("error closing relay",r)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),Bt.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),Bt.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const r of jE)this.add(r);this.saveToContacts();for(const r of t6)this.relays.has(r)||this.add(r);const e={};for(const[r,t]of this.relays.entries())e[r]={enabled:t.enabled,url:r};De.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const r=Re.db.findOne({kind:3,pubkey:de.getPubKey()}),n={kind:3,content:JSON.stringify(e),tags:(r==null?void 0:r.tags)||[]};Re.publish(n)},updateLastSeen:wn.throttle(e=>{const r=Math.floor(Date.now()/1e3);De.get("relays").get(e).get("lastSeen").put(r)},5*1e3,{leading:!0}),groupFilter(e){var r;return e.authors&&((r=e.kinds)==null?void 0:r.length)===1&&e.kinds[0]===0?(e.authors.forEach(t=>{this.subscribedProfiles.add(t)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(Bt.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(t=>{this.subscribedEventTags.add(t)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&sn.init();const{authenticate:U0e}=XU;let r6=0,Qw={logSubscriptions:!1,indexed03:!0};const Ic=new Zbe(sn.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>Re.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0});Ic.onnotice((e,r)=>{console.log("notice",r," from relay ",e)});const W0e=(e,r)=>new URL(e).host===new URL(r).host;Ic.onauth(async(e,r)=>{if(sn.enabledRelays().some(t=>W0e(t,e.url)))try{await U0e({relay:e,challenge:r,sign:Re.sign})}catch(t){console.log("error: authenticate to relay:",t),Ic.removeRelay(e.url),sn.disable(e.url)}});De.get("dev").on(e=>{Qw=e,Ic.logSubscriptions=Qw.logSubscriptions});let fK=0;De.get("lastOpened").once(e=>{fK=e,De.get("lastOpened").put(Math.floor(Date.now()/1e3))});let n6=Date.now();const hK=()=>{Date.now()-n6>60*1e3*1&&(n6=Date.now(),Ic.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&hK()});document.addEventListener("online",()=>{hK()});const q0e={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:Ic,log:wn.throttle((...e)=>{console.log(...e)},1e3),subscribe:function(e,r,t=!1,n=!0){let i;if(r&&(i=r6++,this.subscriptions.set(++r6,{filter:e,callback:r})),this.log("subscriptions",this.subscriptions.size,"subscribedEventIds",this.subscribedEventIds.size,"subscribedAuthors",this.subscribedAuthors.size),e.authors&&e.authors.forEach(o=>{this.subscribedAuthors.add(o)}),r&&Re.find(e,r),e.ids){if(e.ids=e.ids.filter(o=>!Re.seen.has(o)),!e.ids.length)return()=>{};e.ids.forEach(o=>{this.subscribedEventIds.add(o)})}Qw.indexedDbLoad!==!1&&ul.subscribe(e);const s=this.subscribeRelayPool(e,t,n);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){const r=Array.from(sn.enabledRelays());Ic.publish(e,r)},handle(e){var r;for(const t of this.subscriptions.values())t.filter&&W3(t.filter,e)&&((r=t.callback)==null||r.call(t,e))},subscribeRelayPool(e,r,t){var s,o;let n;e.keywords?n=Array.from(sn.searchRelays.keys()):(t||((s=e.authors)==null?void 0:s.length)!==1)&&(n=sn.enabledRelays()),Qw.indexed03!==!1&&((o=e.kinds)!=null&&o.every(a=>a===0||a===3))&&(n=["wss://us.rbr.bio","wss://eu.rbr.bio"]),r&&(e.since=fK);const i=sn.enabledRelays();return Ic.subscribe([e],n,(a,l,u)=>{setTimeout(()=>{Re.handle(a),u&&Re.handleEventMetadata({url:u,event:a})},0)},t?100:0,void 0,{defaultRelays:i})}},Bt=q0e,Oo=class Oo{static id(r){if(r.startsWith("npub")&&(r=de.toNostrHexAddress(r)||"",!r))throw new Error("addFollower: invalid pubKey "+r);const t=Oo.pubKeyToUserId.get(r);if(t)return t;const n=Oo.currentUserId++;return Oo.pubKeyToUserId.set(r,n),Oo.UserIdToPubKey.set(n,r),n}static pub(r){const t=Oo.UserIdToPubKey.get(r);if(!t)throw new Error("pub: invalid id "+r);return t}static bech32(r){return de.toNostrBech32Address(Oo.pub(r),"npub")||""}static has(r){return Oo.pubKeyToUserId.has(r)}};ce(Oo,"pubKeyToUserId",new Map),ce(Oo,"UserIdToPubKey",new Map),ce(Oo,"currentUserId",0);let Wp=Oo;const Qi=Wp.pub,qp=Wp.bech32,vt=Wp.id;function gu(e){return Array.isArray?Array.isArray(e):vK(e)==="[object Array]"}const K0e=1/0;function V0e(e){if(typeof e=="string")return e;let r=e+"";return r=="0"&&1/e==-K0e?"-0":r}function G0e(e){return e==null?"":V0e(e)}function cl(e){return typeof e=="string"}function dK(e){return typeof e=="number"}function Y0e(e){return e===!0||e===!1||Z0e(e)&&vK(e)=="[object Boolean]"}function pK(e){return typeof e=="object"}function Z0e(e){return pK(e)&&e!==null}function Xs(e){return e!=null}function zE(e){return!e.trim().length}function vK(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const X0e="Incorrect 'index' type",J0e=e=>`Invalid value for key ${e}`,Q0e=e=>`Pattern length exceeds max of ${e}.`,e1e=e=>`Missing ${e} property in key`,t1e=e=>`Property 'weight' in key '${e}' must be a positive integer`,i6=Object.prototype.hasOwnProperty;class r1e{constructor(r){this._keys=[],this._keyMap={};let t=0;r.forEach(n=>{let i=gK(n);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(r){return this._keyMap[r]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function gK(e){let r=null,t=null,n=null,i=1,s=null;if(cl(e)||gu(e))n=e,r=s6(e),t=MI(e);else{if(!i6.call(e,"name"))throw new Error(e1e("name"));const o=e.name;if(n=o,i6.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(t1e(o));r=s6(o),t=MI(o),s=e.getFn}return{path:r,id:t,weight:i,src:n,getFn:s}}function s6(e){return gu(e)?e:e.split(".")}function MI(e){return gu(e)?e.join("."):e}function n1e(e,r){let t=[],n=!1;const i=(s,o,a)=>{if(Xs(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Xs(u))return;if(a===o.length-1&&(cl(u)||dK(u)||Y0e(u)))t.push(G0e(u));else if(gu(u)){n=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,cl(r)?r.split("."):r,0),n?t:t[0]}const i1e={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},s1e={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,r)=>e.score===r.score?e.idx<r.idx?-1:1:e.score<r.score?-1:1},o1e={location:0,threshold:.6,distance:100},a1e={useExtendedSearch:!1,getFn:n1e,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Kt={...s1e,...i1e,...o1e,...a1e};const l1e=/[^ ]+/g;function u1e(e=1,r=3){const t=new Map,n=Math.pow(10,r);return{get(i){const s=i.match(l1e).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class RP{constructor({getFn:r=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){this.norm=u1e(t,3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}setSources(r=[]){this.docs=r}setIndexRecords(r=[]){this.records=r}setKeys(r=[]){this.keys=r,this._keysMap={},r.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,cl(this.docs[0])?this.docs.forEach((r,t)=>{this._addString(r,t)}):this.docs.forEach((r,t)=>{this._addObject(r,t)}),this.norm.clear())}add(r){const t=this.size();cl(r)?this._addString(r,t):this._addObject(r,t)}removeAt(r){this.records.splice(r,1);for(let t=r,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(r,t){return r[this._keysMap[t]]}size(){return this.records.length}_addString(r,t){if(!Xs(r)||zE(r))return;let n={v:r,i:t,n:this.norm.get(r)};this.records.push(n)}_addObject(r,t){let n={i:t,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(r):this.getFn(r,i.path);if(Xs(o)){if(gu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Xs(f))if(cl(f)&&!zE(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else gu(f)&&f.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}n.$[s]=a}else if(cl(o)&&!zE(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function yK(e,r,{getFn:t=Kt.getFn,fieldNormWeight:n=Kt.fieldNormWeight}={}){const i=new RP({getFn:t,fieldNormWeight:n});return i.setKeys(e.map(gK)),i.setSources(r),i.create(),i}function c1e(e,{getFn:r=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new RP({getFn:r,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(i),s}function V0(e,{errors:r=0,currentLocation:t=0,expectedLocation:n=0,distance:i=Kt.distance,ignoreLocation:s=Kt.ignoreLocation}={}){const o=r/e.length;if(s)return o;const a=Math.abs(n-t);return i?o+a/i:a?1:o}function f1e(e=[],r=Kt.minMatchCharLength){let t=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=r&&t.push([n,i]),n=-1)}return e[s-1]&&s-n>=r&&t.push([n,s-1]),t}const Lf=32;function h1e(e,r,t,{location:n=Kt.location,distance:i=Kt.distance,threshold:s=Kt.threshold,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,includeMatches:l=Kt.includeMatches,ignoreLocation:u=Kt.ignoreLocation}={}){if(r.length>Lf)throw new Error(Q0e(Lf));const f=r.length,c=e.length,d=Math.max(0,Math.min(n,c));let y=s,w=d;const b=a>1||l,T=b?Array(c):[];let _;for(;(_=e.indexOf(r,w))>-1;){let g=V0(r,{currentLocation:_,expectedLocation:d,distance:i,ignoreLocation:u});if(y=Math.min(g,y),w=_+f,b){let M=0;for(;M<f;)T[_+M]=1,M+=1}}w=-1;let A=[],x=1,I=f+c;const O=1<<f-1;for(let g=0;g<f;g+=1){let M=0,B=I;for(;M<B;)V0(r,{errors:g,currentLocation:d+B,expectedLocation:d,distance:i,ignoreLocation:u})<=y?M=B:I=B,B=Math.floor((I-M)/2+M);I=B;let L=Math.max(1,d-B+1),q=o?c:Math.min(d+B,c)+f,Q=Array(q+2);Q[q+1]=(1<<g)-1;for(let Z=q;Z>=L;Z-=1){let j=Z-1,X=t[e.charAt(j)];if(b&&(T[j]=+!!X),Q[Z]=(Q[Z+1]<<1|1)&X,g&&(Q[Z]|=(A[Z+1]|A[Z])<<1|1|A[Z+1]),Q[Z]&O&&(x=V0(r,{errors:g,currentLocation:j,expectedLocation:d,distance:i,ignoreLocation:u}),x<=y)){if(y=x,w=j,w<=d)break;L=Math.max(1,2*d-w)}}if(V0(r,{errors:g+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>y)break;A=Q}const C={isMatch:w>=0,score:Math.max(.001,x)};if(b){const g=f1e(T,a);g.length?l&&(C.indices=g):C.isMatch=!1}return C}function d1e(e){let r={};for(let t=0,n=e.length;t<n;t+=1){const i=e.charAt(t);r[i]=(r[i]||0)|1<<n-t-1}return r}class mK{constructor(r,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:u=Kt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?r:r.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(d,y)=>{this.chunks.push({pattern:d,alphabet:d1e(d),startIndex:y})},c=this.pattern.length;if(c>Lf){let d=0;const y=c%Lf,w=c-y;for(;d<w;)f(this.pattern.substr(d,Lf),d),d+=Lf;if(y){const b=c-Lf;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(r){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(r=r.toLowerCase()),this.pattern===r){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,r.length-1]]),w}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],c=0,d=!1;this.chunks.forEach(({pattern:w,alphabet:b,startIndex:T})=>{const{isMatch:_,score:A,indices:x}=h1e(r,w,b,{location:i+T,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});_&&(d=!0),c+=A,_&&x&&(f=[...f,...x])});let y={isMatch:d,score:d?c/this.chunks.length:1};return d&&n&&(y.indices=f),y}}class Gc{constructor(r){this.pattern=r}static isMultiMatch(r){return o6(r,this.multiRegex)}static isSingleMatch(r){return o6(r,this.singleRegex)}search(){}}function o6(e,r){const t=e.match(r);return t?t[1]:null}class p1e extends Gc{constructor(r){super(r)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(r){const t=r===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class v1e extends Gc{constructor(r){super(r)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(r){const n=r.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,r.length-1]}}}class g1e extends Gc{constructor(r){super(r)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(r){const t=r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class y1e extends Gc{constructor(r){super(r)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(r){const t=!r.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class m1e extends Gc{constructor(r){super(r)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(r){const t=r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[r.length-this.pattern.length,r.length-1]}}}class b1e extends Gc{constructor(r){super(r)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(r){const t=!r.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,r.length-1]}}}class bK extends Gc{constructor(r,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:o=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:u=Kt.ignoreLocation}={}){super(r),this._bitapSearch=new mK(r,{location:t,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(r){return this._bitapSearch.searchIn(r)}}class wK extends Gc{constructor(r){super(r)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(r){let t=0,n;const i=[],s=this.pattern.length;for(;(n=r.indexOf(this.pattern,t))>-1;)t=n+s,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const LI=[p1e,wK,g1e,y1e,b1e,m1e,v1e,bK],a6=LI.length,w1e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$1e="|";function _1e(e,r={}){return e.split($1e).map(t=>{let n=t.trim().split(w1e).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<a6;){const f=LI[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,r)),l=!0)}if(!l)for(u=-1;++u<a6;){const f=LI[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,r));break}}}return i})}const x1e=new Set([bK.type,wK.type]);class E1e{constructor(r,{isCaseSensitive:t=Kt.isCaseSensitive,includeMatches:n=Kt.includeMatches,minMatchCharLength:i=Kt.minMatchCharLength,ignoreLocation:s=Kt.ignoreLocation,findAllMatches:o=Kt.findAllMatches,location:a=Kt.location,threshold:l=Kt.threshold,distance:u=Kt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?r:r.toLowerCase(),this.query=_1e(this.pattern,this.options)}static condition(r,t){return t.useExtendedSearch}searchIn(r){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;r=i?r:r.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const f=t[l];o.length=0,s=0;for(let c=0,d=f.length;c<d;c+=1){const y=f[c],{isMatch:w,indices:b,score:T}=y.search(r);if(w){if(s+=1,a+=T,n){const _=y.constructor.type;x1e.has(_)?o=[...o,...b]:o.push(b)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return n&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const FI=[];function S1e(...e){FI.push(...e)}function jI(e,r){for(let t=0,n=FI.length;t<n;t+=1){let i=FI[t];if(i.condition(e,r))return new i(e,r)}return new mK(e,r)}const e$={AND:"$and",OR:"$or"},zI={PATH:"$path",PATTERN:"$val"},HI=e=>!!(e[e$.AND]||e[e$.OR]),k1e=e=>!!e[zI.PATH],T1e=e=>!gu(e)&&pK(e)&&!HI(e),l6=e=>({[e$.AND]:Object.keys(e).map(r=>({[r]:e[r]}))});function $K(e,r,{auto:t=!0}={}){const n=i=>{let s=Object.keys(i);const o=k1e(i);if(!o&&s.length>1&&!HI(i))return n(l6(i));if(T1e(i)){const l=o?i[zI.PATH]:s[0],u=o?i[zI.PATTERN]:i[l];if(!cl(u))throw new Error(J0e(l));const f={keyId:MI(l),pattern:u};return t&&(f.searcher=jI(u,r)),f}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];gu(u)&&u.forEach(f=>{a.children.push(n(f))})}),a};return HI(e)||(e=l6(e)),n(e)}function I1e(e,{ignoreFieldNorm:r=Kt.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(r?1:s))}),t.score=n})}function A1e(e,r){const t=e.matches;r.matches=[],Xs(t)&&t.forEach(n=>{if(!Xs(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),r.matches.push(o)})}function O1e(e,r){r.score=e.score}function C1e(e,r,{includeMatches:t=Kt.includeMatches,includeScore:n=Kt.includeScore}={}){const i=[];return t&&i.push(A1e),n&&i.push(O1e),e.map(s=>{const{idx:o}=s,a={item:r[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class wv{constructor(r,t={},n){this.options={...Kt,...t},this.options.useExtendedSearch,this._keyStore=new r1e(this.options.keys),this.setCollection(r,n)}setCollection(r,t){if(this._docs=r,t&&!(t instanceof RP))throw new Error(X0e);this._myIndex=t||yK(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(r){Xs(r)&&(this._docs.push(r),this._myIndex.add(r))}remove(r=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];r(s,n)&&(this.removeAt(n),n-=1,i-=1,t.push(s))}return t}removeAt(r){this._docs.splice(r,1),this._myIndex.removeAt(r)}getIndex(){return this._myIndex}search(r,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=cl(r)?cl(this._docs[0])?this._searchStringList(r):this._searchObjectList(r):this._searchLogical(r);return I1e(l,{ignoreFieldNorm:a}),s&&l.sort(o),dK(t)&&t>-1&&(l=l.slice(0,t)),C1e(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(r){const t=jI(r,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Xs(s))return;const{isMatch:l,score:u,indices:f}=t.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:f}]})}),i}_searchLogical(r){const t=$K(r,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,y=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return y&&y.length?[{idx:u,item:l,matches:y}]:[]}const f=[];for(let c=0,d=a.children.length;c<d;c+=1){const y=a.children[c],w=n(y,l,u);if(w.length)f.push(...w);else if(a.operator===e$.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Xs(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:f})=>{s[l].matches.push(...f)}))}}),o}_searchObjectList(r){const t=jI(r,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Xs(o))return;let l=[];n.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:o[f],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:r,value:t,searcher:n}){if(!Xs(t))return[];let i=[];if(gu(t))t.forEach(({v:s,i:o,n:a})=>{if(!Xs(s))return;const{isMatch:l,score:u,indices:f}=n.searchIn(s);l&&i.push({score:u,key:r,value:s,idx:o,norm:a,indices:f})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&i.push({score:l,key:r,value:s,norm:o,indices:u})}return i}}wv.version="6.6.2";wv.createIndex=yK;wv.parseIndex=c1e;wv.config=Kt;wv.parseQuery=$K;S1e(E1e);const P1e={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},u6=ep.throttle(()=>{De.get("searchIndexUpdated").put(!0)},2e3),_K={index:new wv([],P1e),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),u6())},remove(e){this.keys.delete(e),this.index.remove(r=>r.key===e),u6()},search(e){return this.index.search(e)}};class N1e extends Tc{constructor(){super("DWoTR");ce(this,"vertices");ce(this,"edges");ce(this,"profiles");this.version(2).stores({edges:"key, outKey, inKey",profiles:"key"})}}const al=new N1e;function R1e(){return al.transaction("rw",al.vertices,al.edges,al.profiles,async()=>{await Promise.all(al.tables.map(e=>e.clear()))})}var xK={exports:{}},HE={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var c6;function D1e(){return c6||(c6=1,function(e){(function(){function r(o,a){for(var l=2;l<arguments.length;l++)for(var u=0;u<arguments[l].length;u++)o[a++]=arguments[l].charAt(u)}function t(o){return String.fromCharCode(o>>8&255,o&255)}function n(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function i(o){return String.fromCharCode(o&255,o>>8&255)}var s=function(o,a,l){this.width=o,this.height=a,this.depth=l,this.pix_size=a*(o+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*l+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+l+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var u=new Array,f=0;f<this.buffer_size;f++)this.buffer[f]="\0";r(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(o),n(a),"\b"),r(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var c=8+112<<8|192;c+=31-c%31,r(this.buffer,this.idat_offs+8,t(c));for(var f=0;(f<<16)-1<this.pix_size;f++){var d,y;f+65535<this.pix_size?(d=65535,y="\0"):(d=this.pix_size-(f<<16)-f,y=""),r(this.buffer,this.idat_offs+8+2+(f<<16)+(f<<2),y,i(d),i(~d))}for(var f=0;f<256;f++){for(var w=f,b=0;b<8;b++)w&1?w=-306674912^w>>1&2147483647:w=w>>1&2147483647;u[f]=w}this.index=function(T,_){var A=_*(this.width+1)+T+1,x=this.idat_offs+8+2+5*Math.floor(A/65535+1)+A;return x},this.color=function(T,_,A,x){x=x>=0?x:255;var I=((x<<8|T)<<8|_)<<8|A;if(typeof this.palette[I]>"u"){if(this.pindex==this.depth)return"\0";var O=this.plte_offs+8+3*this.pindex;this.buffer[O+0]=String.fromCharCode(T),this.buffer[O+1]=String.fromCharCode(_),this.buffer[O+2]=String.fromCharCode(A),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(x),this.palette[I]=String.fromCharCode(this.pindex++)}return this.palette[I]},this.getBase64=function(){var T=this.getDump(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A,x,I,O,C,g,M,B=T.length,L=0,q="";do A=T.charCodeAt(L),O=A>>2,x=T.charCodeAt(L+1),C=(A&3)<<4|x>>4,I=T.charCodeAt(L+2),B<L+2?g=64:g=(x&15)<<2|I>>6,B<L+3?M=64:M=I&63,q+=_.charAt(O)+_.charAt(C)+_.charAt(g)+_.charAt(M);while((L+=3)<B);return q},this.getDump=function(){for(var T=65521,_=5552,A=1,x=0,I=_,O=0;O<this.height;O++)for(var C=-1;C<this.width;C++)A+=this.buffer[this.index(C,O)].charCodeAt(0),x+=A,(I-=1)==0&&(A%=T,x%=T,I=_);A%=T,x%=T,r(this.buffer,this.idat_offs+this.idat_size-8,n(x<<16|A));function g(M,B,L){for(var q=-1,Q=4;Q<L-4;Q+=1)q=u[(q^M[B+Q].charCodeAt(0))&255]^q>>8&16777215;r(M,B+L-4,n(q^-1))}return g(this.buffer,this.ihdr_offs,this.ihdr_size),g(this.buffer,this.plte_offs,this.plte_size),g(this.buffer,this.trns_offs,this.trns_size),g(this.buffer,this.idat_offs,this.idat_size),g(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(HE)),HE.exports}(function(e){(function(){var r;r=D1e();var t=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var o=parseInt(this.hash.substr(-7),16)/268435455,a=this.options.saturation||this.defaults.saturation,l=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(o,a,l)};t.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new n(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,o=Math.floor(s*this.margin),a=Math.floor((s-o*2)/5),l=Math.floor((s-a*5)/2),u=i.color.apply(i,this.background),f=i.color.apply(i,this.foreground),c,d;for(c=0;c<15;c++)d=parseInt(this.hash.charAt(c),16)%2?u:f,c<5?this.rectangle(2*a+l,c*a+l,a,a,d,i):c<10?(this.rectangle(1*a+l,(c-5)*a+l,a,a,d,i),this.rectangle(3*a+l,(c-5)*a+l,a,a,d,i)):c<15&&(this.rectangle(0*a+l,(c-10)*a+l,a,a,d,i),this.rectangle(4*a+l,(c-10)*a+l,a,a,d,i));return i},rectangle:function(i,s,o,a,l,u){if(this.isSvg())u.rectangles.push({x:i,y:s,w:o,h:a,color:l});else{var f,c;for(f=i;f<i+o;f++)for(c=s;c<s+a;c++)u.buffer[u.index(f,c)]=l}},hsl2rgb:function(i,s,o){return i*=6,s=[o+=s*=o<.5?o:1-o,o-i%1*s*2,o-=s*=2,o,o+i%1*s,o+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var n=function(i,s,o){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,o),this.rectangles=[]};n.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,o,a){var l=[i,s,o].map(Math.round);return l.push(a>=0&&a<=255?a/255:1),"rgba("+l.join(",")+")"},getDump:function(){var i,s,o,a=this.foreground,l=this.background,u=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+l+";'><g style='fill:"+a+"; stroke:"+a+"; stroke-width:"+u+";'>",i=0;i<this.rectangles.length;i++)o=this.rectangles[i],o.color!=l&&(s+="<rect  x='"+o.x+"' y='"+o.y+"' width='"+o.w+"' height='"+o.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=t})()})(xK);var B1e=xK.exports;const M1e=ro(B1e);let G0={};async function L1e(e,r){if(G0[e])return G0[e];const t=new Promise(async(i,s)=>{try{const o=await r();i(o)}catch(o){s(o)}});G0[e]=t;const n=await t;return G0[e]=void 0,n}class F1e{constructor(){ce(this,"loaded",!1);ce(this,"saveQueue",[]);ce(this,"save",wn.throttle(r=>{r&&this.saveQueue.push(r);const t=this.saveQueue;this.saveQueue=[],al.profiles.bulkPut(t).catch(()=>{})},500))}async init(){this.loaded=!0}async fetchProfile(r){console.log("fetchProfile disabled. CORS issue. Requested address:",r)}getProfile(r,t,n=!1){const i=de.toNostrHexAddress(r),s=de.toNostrBech32Address(r,"npub"),o=vt(i),a=()=>{t==null||t(et.profiles.get(o),i)};let l=et.profiles.get(o);return l?(a(),n&&l.nip05&&l.nip05valid):this.loadProfile(i).then(u=>{if(u)this.isProfileNewer(u)&&this.addProfileToMemory(u),a();else{DP.fetchProfile(s).then(f=>{f&&(this.isProfileNewer(f)&&this.addProfileEvent(f),a())});return}}),l||(l=this.createDefaultProfile(s),et.profiles.set(o,l),a()),Bt.subscribe({kinds:[0],authors:[s]},a,!1)}async getProfiles(r,t){if(!r||r.length===0)return()=>{};let n=[],i=[],s=[];for(const u of r){if(!u)continue;const f=de.toNostrHexAddress(u),c=et.profiles.get(vt(f));c?n.push(c):i.push(f),s.push(de.toNostrBech32Address(u,"npub"))}let o=new Set(i);const a=await this.loadProfiles(o);if(a&&a.length>0){n=n.concat(a);for(const u of a)u&&o.delete(u.key)}if(o.size>0&&o.size<=100){const u=await Promise.all(Array.from(o).map(f=>this.fetchProfile(de.toNostrBech32Address(f,"npub"))));if(u&&u.length>0)for(const f of u)f&&(Re.handle(f),n.push(f),o.delete(f.key))}for(const u of o){let f=this.createDefaultProfile(u);et.profiles.set(vt(f.key),f),n.push(f)}for(const u of n)!u||!this.isProfileNewer(u)||this.addProfileToMemory(u);n.length>0&&(t==null||t(n));const l=u=>{const f=vt(u.pubkey);let c=et.profiles.get(f);t==null||t([c])};return Bt.subscribe({kinds:[0],authors:s},l,!1)}async loadProfiles(r){return await al.profiles.where("key").anyOf(Array.from(r)).toArray()}async loadProfile(r){return await L1e(`loadProfile${r}`,async()=>al.profiles.get({key:r}))}saveProfile(r){this.saveQueue.push(r),this.save()}async loadAllProfiles(){console.time("Loading profiles from DWoTRDB");const r=await al.profiles.toArray();if(r){for(const t of r)this.addProfileToMemory(t);console.timeEnd("Loading profiles from DWoTRDB"),console.log("Loaded profiles from DWoTRDB - "+r.length+" profiles")}}sanitizeProfile(r,t){var l,u;r||(r={name:"",displayName:"",default:!1});let n=((l=r.name)==null?void 0:l.trim().slice(0,100))||"",i=!(r.name||r.display_name),s=r.picture;n||(n=fW(de.toNostrBech32Address(t,"npub")||t));let o=((u=r.display_name)==null?void 0:u.trim().slice(0,100))||n;return{...r,key:t,name:n,displayName:o,picture:s,isDefault:i}}createDefaultProfile(r){return this.sanitizeProfile({},r)}getDefaultProfile(r){if(!r)return;const t=et.profiles.get(r);return t||this.createDefaultProfile(qp(r))}quickProfile(r){const t=vt(r),n=et.profiles.get(t);return n||this.createDefaultProfile(qp(t))}isProfileNewer(r){const t=et.profiles.get(vt(r.key));return!(t&&t.created_at>r.created_at)}addProfileToMemory(r){if(r)return et.profiles.set(vt(r.key),r),_K.add({key:r.key,name:r.name,display_name:r.display_name,followers:et.followersByUser.get(vt(r.key))??new Set}),r}addProfileEvent(r){try{const t=JSON.parse(r.content);t.created_at=r.created_at;let n=this.sanitizeProfile(t,r.pubkey);return this.save(n),this.addProfileToMemory(n)}catch(t){r.id&&ul.db.events.delete(r.id),console.error(t);return}}createImageUrl(r,t=30,n=30){return`data:image/svg+xml;base64,${new M1e(r,{width:t,height:n,format:"svg"}).toString()}`}ensurePicture(r){return r.picture||(r.picture=this.createImageUrl(r.key)),r.picture}}const DP=new F1e;DP.init();const ls=DP,et={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,isFollowing:function(e,r){var i;const t=vt(r),n=vt(e);return!!((i=this.followedByUser.get(n))!=null&&i.has(t))},isBlocked:function(e){const r=vt(e);return this.blockedUsers.has(r)},getFollowDistance:function(e){const r=vt(e),t=this.followDistanceByUser.get(r);return t===void 0?1e3:t},setFollowed:function(e,r=!0){const t=de.getPubKey(),n=vt(t);typeof e=="string"&&(e=[e]),e.forEach(o=>{o=de.toNostrHexAddress(o)||"";const a=vt(o);r&&o&&o!==t?this.addFollower(a,n):this.removeFollower(a,n)});const i=Re.db.findOne({kind:3,pubkey:t}),s={kind:3,content:(i==null?void 0:i.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(o=>["p",Qi(o)])};Re.publish(s)},setBlocked:function(e,r=!0){const t=vt(e),n=vt(de.getPubKey());r?(this.blockedUsers.add(t),this.removeFollower(t,n),Re.directMessagesByUser.delete(e)):this.blockedUsers.delete(t)},addUserByFollowDistance(e,r){var t,n;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=Bt.subscribe({authors:[Qi(r)],kinds:[0]},()=>i==null?void 0:i(),!0)}(t=this.usersByFollowDistance.get(e))==null||t.add(r);for(const i of this.usersByFollowDistance.keys())i>e&&((n=this.usersByFollowDistance.get(i))==null||n.delete(r))},addFollower:function(e,r){var n,i,s,o;if(typeof e!="number"||typeof r!="number")throw new Error("Invalid user id");this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(n=this.followersByUser.get(e))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set);const t=vt(de.getPubKey());if(e!==t){let a;if(r===t)a=1,this.addUserByFollowDistance(a,e),this.followDistanceByUser.set(e,a);else{const l=this.followDistanceByUser.get(e),u=this.followDistanceByUser.get(r);a=u&&u+1,(l===void 0||a<l)&&(this.followDistanceByUser.set(e,a),this.addUserByFollowDistance(a,e))}}(i=this.followedByUser.get(r))==null||i.add(e),e===t&&((s=this.followersByUser.get(e))==null?void 0:s.size)===1&&De.get("hasNostrFollowers").put(!0),(o=this.followedByUser.get(t))!=null&&o.has(r)&&(Bt.subscribedAuthors.has(Qi(e))||setTimeout(()=>{Bt.subscribe({authors:[Qi(e)]},void 0,!0)},0))},removeFollower:function(e,r){var i,s,o;if((i=this.followersByUser.get(e))==null||i.delete(r),(s=this.followedByUser.get(r))==null||s.delete(e),e===vt(de.getPubKey()))return;let t=1/0;for(const a of this.followersByUser.get(e)||[]){const l=this.followDistanceByUser.get(a);l!==void 0&&l+1<t&&(t=l+1)}t===1/0?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,t),(this.blockedUsers.has(e)||((o=this.followersByUser.get(e))==null?void 0:o.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),Bt.subscribedAuthors.delete(Qi(e))),Lw.saveEvents()},followerCount:function(e){var t;const r=vt(e);return((t=this.followersByUser.get(r))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var i;let r=0;const t=vt(de.getPubKey()),n=vt(e);for(const s of this.followersByUser.get(n)??[])(i=this.followedByUser.get(t))!=null&&i.has(s)&&r++;return r},block:async function(e,r){r?this.blockedUsers.add(vt(e)):this.blockedUsers.delete(vt(e));let t=JSON.stringify(Array.from(this.blockedUsers));t=await de.encrypt(t),Re.publish({kind:16462,content:t})},flag:function(e,r){r?this.flaggedUsers.add(vt(e)):this.flaggedUsers.delete(vt(e)),Re.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.blockedUsers)n.add(Qi(i));e(n)}};r();const t=de.getPubKey();return Bt.subscribe({kinds:[16462],authors:[t]},r)},getFlaggedUsers(e){const r=()=>{if(e){const n=new Set;for(const i of this.flaggedUsers)n.add(Qi(i));e(n)}};r();const t=de.getPubKey();return Bt.subscribe({kinds:[16463],authors:[t]},r)},getFollowedByUser:function(e,r){const t=vt(e),n=()=>{if(r){const i=new Set;for(const s of this.followedByUser.get(t)||[])i.add(Qi(s));r(i)}};return this.followedByUser.has(t)&&n(),Bt.subscribe({kinds:[3],authors:[e]},n)},getFollowersByUser:function(e,r){const t=vt(e),n=()=>{if(r){const i=new Set;for(const s of this.followersByUser.get(t)||[])i.add(Qi(s));r(i)}};return this.followersByUser.has(t)&&n(),Bt.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,r,t=!1){const n=vt(e),i=()=>{r==null||r(this.profiles.get(n),e)},s=this.profiles.get(n);return s?(i(),t&&s.nip05&&!s.nip05valid&&de.verifyNip05Address(s.nip05,e).then(o=>{console.log("NIP05 address is valid?",o,s.nip05,e),s.nip05valid=o,this.profiles.set(n,s),i()})):ls.fetchProfile(e).then(o=>{o&&(Re.handle(o),i())}),Bt.subscribe({kinds:[0],authors:[e]},i,!1)},setMetadata(e){const r={kind:0,content:JSON.stringify(e)};Re.publish(r)}},j1e="modulepreload",z1e=function(e){return"/"+e},f6={},$r=function(r,t,n){if(!t||t.length===0)return r();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=z1e(s),s in f6)return;f6[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const c=i[f];if(c.href===s&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":j1e,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((f,c)=>{u.addEventListener("load",f),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},EK={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who and when you're chatting with.",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},H1e=Object.freeze(Object.defineProperty({__proto__:null,default:EK},Symbol.toStringTag,{value:"Module"})),Hy={en:"English","zh-cn":"简体中文","zh-tw":"繁體中文",es:"Español",ru:"Русский",de:"Deutsch",fr:"Français",it:"Italiano",ja:"日本語",ko:"한국어",ar:"العربية",id:"Indonesia","pt-BR":"Português (Brasil)",tr:"Türkçe",vt:"Tiếng Việt",bn:"বাংলা",th:"ไทย",hi:"हिन्दी",fa:"فارسی",ur:"اردو",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"עברית",sv:"Svenska",fi:"Suomi","cs-CZ":"Čeština",bg:"Български",as:"অসমীয়া",sk:"Slovenčina",lt:"Lietuvių","el-GR":"Ελληνικά"},U1e=Object.assign({"./languages/ar.mjs":()=>$r(()=>import("./ar-b05107c0.js"),[]),"./languages/as.mjs":()=>$r(()=>import("./as-825421ff.js"),[]),"./languages/bg.mjs":()=>$r(()=>import("./bg-262cfc4e.js"),[]),"./languages/bn.mjs":()=>$r(()=>import("./bn-542e2fe5.js"),[]),"./languages/cs-CZ.mjs":()=>$r(()=>import("./cs-CZ-ad8d06ab.js"),[]),"./languages/de.mjs":()=>$r(()=>import("./de-e254045b.js"),[]),"./languages/el-GR.mjs":()=>$r(()=>import("./el-GR-dd662a28.js"),[]),"./languages/en.mjs":()=>$r(()=>Promise.resolve().then(()=>H1e),void 0),"./languages/es.mjs":()=>$r(()=>import("./es-9ed73c18.js"),[]),"./languages/fa.mjs":()=>$r(()=>import("./fa-b92e5c69.js"),[]),"./languages/fi.mjs":()=>$r(()=>import("./fi-1b81d3e2.js"),[]),"./languages/fr.mjs":()=>$r(()=>import("./fr-084a88bb.js"),[]),"./languages/he.mjs":()=>$r(()=>import("./he-f8f630eb.js"),[]),"./languages/hi.mjs":()=>$r(()=>import("./hi-21492224.js"),[]),"./languages/hu.mjs":()=>$r(()=>import("./hu-272cee10.js"),[]),"./languages/id.mjs":()=>$r(()=>import("./id-879a045d.js"),[]),"./languages/it.mjs":()=>$r(()=>import("./it-570c4004.js"),[]),"./languages/ja.mjs":()=>$r(()=>import("./ja-ca2ddcd8.js"),[]),"./languages/ko.mjs":()=>$r(()=>import("./ko-20dade51.js"),[]),"./languages/lt.mjs":()=>$r(()=>import("./lt-9d42b6bf.js"),[]),"./languages/nl.mjs":()=>$r(()=>import("./nl-e18021b9.js"),[]),"./languages/pl.mjs":()=>$r(()=>import("./pl-c71aa6e1.js"),[]),"./languages/pt-BR.mjs":()=>$r(()=>import("./pt-BR-f6e074f5.js"),[]),"./languages/ru.mjs":()=>$r(()=>import("./ru-a4f155c7.js"),[]),"./languages/sk.mjs":()=>$r(()=>import("./sk-baed6548.js"),[]),"./languages/sv.mjs":()=>$r(()=>import("./sv-6a12b090.js"),[]),"./languages/th.mjs":()=>$r(()=>import("./th-77251d86.js"),[]),"./languages/tr.mjs":()=>$r(()=>import("./tr-5c13f72f.js"),[]),"./languages/ur.mjs":()=>$r(()=>import("./ur-da5400bf.js"),[]),"./languages/vt.mjs":()=>$r(()=>import("./vt-ed0b9062.js"),[]),"./languages/zh-cn.mjs":()=>$r(()=>import("./zh-cn-8db267de.js"),[]),"./languages/zh-tw.mjs":()=>$r(()=>import("./zh-tw-27ec4fa0.js"),[])});let rp=Object.keys(Hy),Uo,Q1,SK;Uo=localStorage.getItem("language")||navigator.language||"en";if(rp.indexOf(Uo)===-1){const e=Uo.slice(0,2);Uo="en";for(let r=0;r<rp.length;r++)if(rp[r].slice(0,2)===e){Uo=rp[r];break}}SK=U1e[`./languages/${Uo}.mjs`]().then(e=>{console.log("loaded translation",Uo,`./languages/${Uo}.mjs`),Q1=e.default,Uo!=="en"&&(Q1={...EK,...Q1})}).catch(e=>{console.error("failed to load translation",e)});function W1e(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function he(e,r){const n=(e&&(Q1[e]||W1e(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return n.forEach(s=>{s.startsWith("<b>")?i.push(Je("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(Je("a",{key:i.length,...r},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}const kK=(e,r)=>{let t;const n=et.getProfile(r,i=>{t=i.name});setTimeout(()=>{t=t||fW(de.toNostrBech32Address(r,"npub")||""),De.get("groups").get(TK(e)).put({name:t}),n()},1e3)},TK=e=>{const r=__(e);return Array.from(r,t=>t.toString(16).padStart(2,"0")).join("").slice(0,12)},M_=(e,r=!0,t=null,n=void 0)=>{const i=TK(e),s=De.get("groups").get(i).put({key:e,inviter:t,name:n});return r&&s.then(()=>_r(`/chat/${i}`)),i},IK=(e,r=void 0)=>{if(e.indexOf("#")>-1&&(e=e.split("#")[1]),e.startsWith("nsec")){const t=de.toNostrHexAddress(e);t&&M_(t,!0,void 0,r)}},AK=(e=void 0)=>{const r=H3();return[M_(r,!0,void 0,e),r]},q1e=async e=>{const r=AK()[1],t=de.toNostrBech32Address(r,"nsec"),n=H3(),i=4,s=Math.floor(Date.now()/1e3),o=`This is an invitation to a secret chat. Use ${t} or go to https://iris.to/chat/#${t}`;let a={kind:i,created_at:s,pubkey:de.getPubKey(),tags:[["p",e]],content:o};a=await Re.sign(a);const l=await Fp.encrypt(n,e,`${o}

${JSON.stringify(a)}`),u={kind:i,created_at:s,pubkey:Lp(n),tags:[["p",e]],content:l};u.id=Eh(u),u.sig=WU(u,n),Re.publish(u),De.get("chatInvites").get(e).put({priv:r}),kK(r,e)};function K1e(){const[e,r]=Me(""),[t,n]=Me(""),i=o=>{r(o.target.value),IK(o.target.value,t)};return v("div",{className:"flex flex-1 flex-col items-center justify-center h-full",children:[v("div",{className:"flex flex-row gap-2",children:[v("input",{type:"text",className:"input rounded-full input-bordered",placeholder:"Group name",onChange:o=>{n(o.target.value)}}),v("button",{className:"btn btn-primary",onClick:()=>AK(t),children:he("start_new_group")})]}),v("div",{className:"my-4",children:he("or")}),v("div",{className:"my-4 flex gap-2 justify-center items-center",children:v("input",{placeholder:"Paste nsec or chat link",type:"password",id:"pasteLink",className:"text-center input input-bordered rounded-full p-2",onChange:i,value:e})})]})}class V1e{constructor(){ce(this,"_data",new Map)}upsert(r,t){var s;const n=this._data.get(r),i=(n==null?void 0:n.relays)||new Set;return(s=t.relays)==null||s.forEach(o=>i.add(this._normalizeURL(o))),this._data.set(r,{relays:i}),this}get(r){if(r)return this._data.get(r)}getRelays(r){var t;return r?Array.from(((t=this.get(r))==null?void 0:t.relays)||[]):[]}_normalizeURL(r){return r.trim().replace(/\/$/,"")}}const i_=class i_{constructor(r,t=!0){ce(this,"events");ce(this,"eventIdSet");ce(this,"maxSize");ce(this,"descending");ce(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=r,this.descending=t,this.subscriptions=new Map}get size(){return this.events.length}first(){var r;return(r=this.events[0])==null?void 0:r.id}has(r){return this.eventIdSet.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(r.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:r.id,created_at:r.created_at});else if(r.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:r.id,created_at:r.created_at},this.eventIdSet.add(r.id);else return!1;return this.eventIdSet.add(r.id),this.events.sort((t,n)=>this.descending?n.created_at-t.created_at:t.created_at-n.created_at),this.subscriptions.forEach(t=>t(this.eventIds)),!0}delete(r){if(!this.eventIdSet.delete(r))return!1;const n=this.events.findIndex(i=>i.id===r);return n===-1?!1:(this.events.splice(n,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(r=>r.id)}values(){return this.events.map(r=>r.id)}subscribe(r){const t=i_.subscriptionId++;return this.subscriptions.set(t,r),r(this.eventIds),()=>this.subscriptions.delete(t)}};ce(i_,"subscriptionId",0);let Ff=i_;const G1e=Date.now()/1e3,Y1e=500,Z1e=1e3,X1e=new Qve("iris"),J1e=X1e.addCollection("events",{indices:["created_at","pubkey","kind"],unique:["id"]});let Yg;De.get("mutedNotes").on(e=>{Yg=e});const UI={maxFollowDistance:3,minFollowersAtMaxDistance:5};let Zg=UI;De.get("globalFilter").on(e=>{Zg=e});let WI={};De.get("dev").on(e=>{WI=e});const Q1e=(e,r)=>{const t=Fi.db.by("id",e),n=Fi.db.by("id",r);return t?!n||t.created_at>n.created_at?-1:t.created_at<n.created_at?1:0:1},Fi={DEFAULT_GLOBAL_FILTER:UI,getEventHash:Eh,db:J1e,eventsMetaDb:new V1e,seen:new Set,deletedEvents:new Set,directMessagesByUser:new ege((e,r)=>{const t=e.value.eventIds[0],n=r.value.eventIds[0];return t?n?Q1e(t,n):-1:1}),latestNotificationByTargetAndKind:new Map,notifications:new Ff(Y1e),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,directRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new Ff(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s,o;this.db.by("id",e.id)||this.insert(e);const t=this.isRepost(e),n=!t&&this.getNoteReplyingTo(e),i=de.getPubKey();if(n&&!t){this.directRepliesByMessageId.has(n)||this.directRepliesByMessageId.set(n,new Set),(s=this.directRepliesByMessageId.get(n))==null||s.add(e.id);const a=e.tags.filter(l=>l[0]==="e").map(l=>l[1]).slice(0,2);for(const l of a)e.created_at>G1e||e.pubkey===i||et.isFollowing(i,e.pubkey),this.threadRepliesByMessageId.has(l)||this.threadRepliesByMessageId.set(l,new Set),(o=this.threadRepliesByMessageId.get(l))==null||o.add(e.id)}},getRepostedEventId(e){var t,n,i;let r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:n[1];return r||(r=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],r)},getOriginalPostEventId(e){return Fi.isRepost(e)?Fi.getRepostedEventId(e):e.id},getNoteReplyingTo:function(e){if(e.kind===1)return this.getEventReplyingTo(e)},getEventReplyingTo:function(e){var n,i;const r=(n=e.tags)==null?void 0:n.filter(s=>s[0]==="e"&&s[3]!=="mention");if(r.length===1)return r[0][1];const t=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(t)return t[1];if(r.length>1)return r[1][1]},handleRepost(e){var t,n;const r=this.getRepostedEventId(e);r&&(this.repostsByMessageId.has(r)||this.repostsByMessageId.set(r,new Set),(t=this.repostsByMessageId.get(r))!=null&&t.has(e.pubkey)||((n=this.repostsByMessageId.get(r))==null||n.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var t,n,i;const r=(n=(t=e.tags)==null?void 0:t.reverse().find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.likesByMessageId.has(r)||this.likesByMessageId.set(r,new Set),(i=this.likesByMessageId.get(r))==null||i.add(e.pubkey),this.insert(e))},handleFollow(e){var n,i,s,o;const r=Fi.db.findOne({kind:3,pubkey:e.pubkey});if(r&&r.created_at>=e.created_at)return;r&&this.db.findAndRemove({kind:3,pubkey:e.pubkey}),this.insert(e);const t=de.getPubKey();if((e.pubkey===t||et.isFollowing(t,e.pubkey))&&Lw.loaded&&Lw.saveProfilesAndFollows(),e.tags){for(const a of e.tags)if(Array.isArray(a)&&a[0]==="p"){const l=a[1];l.length===64&&/^[0-9a-f]+$/.test(l)&&et.addFollower(vt(a[1]),vt(e.pubkey))}}if(et.followedByUser.has(vt(e.pubkey)))for(const a of et.followedByUser.get(vt(e.pubkey))||[])(!e.tags||!((n=e.tags)!=null&&n.find(l=>l[0]==="p"&&l[1]===Qi(a))))&&et.removeFollower(a,vt(e.pubkey));if(e.pubkey===t&&((i=e.tags)!=null&&i.length)&&(((s=et.followedByUser.get(vt(t)))==null?void 0:s.size)||0)>10&&De.get("showFollowSuggestions").put(!1),e.pubkey===t&&((o=e.content)!=null&&o.length))try{const a=JSON.parse(e.content),l=Object.keys(a);if(l.length){console.log("setting relays from your contacs list",l);for(const u of sn.relays.keys())l.includes(u)||sn.remove(u);for(const u of l)sn.add(u)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var t;if((((t=this.myBlockEvent)==null?void 0:t.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const r=de.getPubKey();if(e.pubkey===r){let n;try{n=await de.decrypt(e.content);const i=JSON.parse(n),s=new Set;for(const o of i)s.add(vt(o));et.blockedUsers=s}catch{console.log("failed to parse your block list",n,e)}}},handleFlagList(e){var t;if((((t=this.myFlagEvent)==null?void 0:t.created_at)||0)>e.created_at)return;const r=de.getPubKey();if(e.pubkey===r)try{const n=JSON.parse(e.content);et.flaggedUsers=new Set(n)}catch{console.log("failed to parse your flagged users list",e)}},insert(e){try{delete e.$loki,this.db.insert(e)}catch{}},handleMetadata(e){var r;if((r=e.content)!=null&&r.length)try{const t=et.profiles.get(vt(e.pubkey));if((t==null?void 0:t.created_at)>=e.created_at)return!1;ls.addProfileEvent(e)}catch(t){console.log("error parsing nostr profile",t,e)}},handleDelete(e){var n,i;const r=(i=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:i[1],t=de.getPubKey();if(r){const s=this.db.by("id",r);s&&[e.pubkey,t].includes(s.pubkey)&&this.db.findAndRemove({id:r})}},handleZap(e){var t,n,i;this.insert(e);const r=(n=(t=e.tags)==null?void 0:t.find(s=>s[0]==="e"))==null?void 0:n[1];r&&(this.zapsByNote.has(r)||this.zapsByNote.set(r,new Ff(Z1e)),(i=this.zapsByNote.get(r))==null||i.add(e))},async handleDirectMessage(e){var i,s,o,a;const r=de.getPubKey();let t=e.pubkey;if(e.pubkey===r)t=((s=(i=e.tags)==null?void 0:i.find(l=>l[0]==="p"))==null?void 0:s[1])||t;else if(!((o=e.tags)==null?void 0:o.some(u=>u[0]==="p"&&u[1]===r)))return;try{const l=await de.decrypt(e.content,e.pubkey),u=JSON.parse(l.slice(l.indexOf("{")));if(g_(u)&&$m(u)){const f=(a=u.content.match(/nsec1[023456789acdefghjklmnpqrstuvwxyz]{6,}/gi))==null?void 0:a[0];if(f){const c=de.toNostrHexAddress(f);if(c){M_(c,!1,u.pubkey),kK(c,u.pubkey),De.get("chatInvites").get(u.pubkey).put({priv:c});return}}}}catch{}this.insert(e);const n=this.directMessagesByUser.get(t)??new Ff(500);n.add(e),this.directMessagesByUser.set(t,n)},handleKeyValue(e){var t,n;if(e.pubkey!==de.getPubKey())return;const r=(n=(t=e.tags)==null?void 0:t.find(i=>i[0]==="d"))==null?void 0:n[1];if(r){const i=this.keyValueEvents.get(r);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(r,e)}},isRepost(e){var t;if(e.kind===6)return!0;const r=(t=e.tags)==null?void 0:t.findIndex(n=>n[0]==="e"&&n[3]==="mention");return e.kind===1&&e.content===`#[${r}]`},acceptEvent(e){var r,t,n;if(Zg.maxFollowDistance&&de.getPubKey()){if(e.kind===4)return!0;if(!Bt.subscribedAuthors.has(e.pubkey)&&!Bt.subscribedEventIds.has(e.id)){if(!e.pubkey)return console.log("what",e),!1;if(Wp.has(e.pubkey)&&et.getFollowDistance(e.pubkey)){const i=et.followDistanceByUser.get(vt(e.pubkey));if(i&&i>Zg.maxFollowDistance||i===Zg.maxFollowDistance&&(((r=et.followersByUser.get(vt(e.pubkey)))==null?void 0:r.size)||0)<(Zg.minFollowersAtMaxDistance||UI.minFollowersAtMaxDistance))return!1}else{const i=((t=Fi.likesByMessageId.get(e.id))==null?void 0:t.size)||0,s=((n=Fi.repostsByMessageId.get(e.id))==null?void 0:n.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}}}return!0},find(e,r){const t={};e.authors&&(t.pubkey={$in:e.authors}),e.kinds&&(t.kind={$in:e.kinds}),this.db.chain().find(t).where(n=>W3(e,n)).simplesort("created_at",{desc:!0}).limit(e.limit||1/0).data().forEach(n=>{r(n)})},handle(e,r=!1,t=!0,n=2){var i;if(!e||!r&&this.seen.has(e.id))return!1;if(!r&&!this.acceptEvent(e))return n&&setTimeout(()=>{this.handle(e,r,t,n-1)},3e3),!1;if(et.isBlocked(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&this.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,Bt.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),this.isRepost(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:if(((i=Fi.db.findOne({kind:3,pubkey:e.pubkey}))==null?void 0:i.created_at)>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break;case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(t){const s=et.followDistanceByUser.get(vt(e.pubkey))||1/0;s<=1?WI.indexedDbSave!==!1&&ul.saveEvent(e):s<=4&&[0,3,4].includes(e.kind)&&WI.indexedDbSave!==!1&&ul.saveEvent(e)}return Bt.handle(e),!0},handleEventMetadata({url:e,event:r}){const t=this.getOriginalPostEventId(r);t&&this.eventsMetaDb.upsert(t,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),r=this.db.by("id",e);r&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(r.id),this.handle(r,!0),this.handleNextFutureEvent()},(r.created_at-Date.now()/1e3)*1e3))},isMuted(e){let r=!1;if(Yg&&(r=Yg[e.id],!r)){for(const t of e.tags)if(t[0]==="e"&&Yg[t[1]]&&(r=Yg[t[1]],r))return!0}return r},getEventRoot(e){var t,n,i,s;const r=(n=(t=e==null?void 0:e.tags)==null?void 0:t.find(o=>o[0]==="e"&&o[3]==="root"))==null?void 0:n[1];return r||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(o=>o[0]==="e"))==null?void 0:s[1])},maybeAddNotification(e){var t,n;if(((t=e.tags)==null?void 0:t.filter(i=>i[0]==="p").length)>10)return;const r=de.getPubKey();if(e.pubkey!==r&&((n=e.tags)!=null&&n.some(i=>i[0]==="p"&&i[1]===r))){if(e.kind===3){const i=et.followedByUser.get(vt(e.pubkey));if(!i||i.has(vt(r)))return}if(!this.isMuted(e)){this.insert(e);const i=this.getEventRoot(e)||this.getEventReplyingTo(e)||e.id,s=`${e.kind}-${i}`,o=this.latestNotificationByTargetAndKind.get(s),a=o&&this.db.by("id",o);(!o||a.created_at<e.created_at)&&(o&&this.notifications.delete(o),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:wn.debounce(()=>{if(!Fi.notificationsSeenTime)return;let e=0;for(const r of Fi.notifications.eventIds){const t=Fi.db.by("id",r);if((t==null?void 0:t.created_at)>Fi.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",Fi.notificationsSeenTime,"count",e),De.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var t;if(delete e.$loki,delete e.meta,e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");Bt.publish(e),console.log("publishing event",e),this.handle(e,!0);const r=(t=e.tags)==null?void 0:t.filter(n=>n[0]==="e").reverse().slice(0,10);for(const n of r||[]){const i=this.db.by("id",n[1]);i&&(delete i.meta,delete i.$loki,Bt.publish(i))}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=de.getPubKey(),e.id=Eh(e),e.sig=await de.sign(e),e},getZappingUser(e){var i,s,o;const r=(o=(s=(i=Fi.db.by("id",e))==null?void 0:i.tags)==null?void 0:s.find(a=>a[0]==="description"))==null?void 0:o[1];if(!r)return null;let t;try{t=JSON.parse(r)}catch{return null}return de.toNostrBech32Address(t.pubkey,"npub")},getReplies(e,r){const t=()=>{r==null||r(this.directRepliesByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[1]},t,!1)},getLikes(e,r){const t=()=>{r==null||r(this.likesByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[7]},t,!1)},getThreadRepliesCount(e,r){const t=()=>{var n;r==null||r(((n=this.threadRepliesByMessageId.get(e))==null?void 0:n.size)??0)};return t(),Bt.subscribe({"#e":[e],kinds:[1]},t,!1)},getReposts(e,r){const t=()=>{r==null||r(this.repostsByMessageId.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[1,6]},t,!1)},getZaps(e,r){const t=()=>{r==null||r(this.zapsByNote.get(e)??new Set)};return t(),Bt.subscribe({"#e":[e],kinds:[9735]},t,!1)},getEventById(e,r=!1,t){const n=this.db.by("id",e);if(t&&n){t(n);return}if(r){const i=setTimeout(()=>{Bt.subscribe({ids:[e]},s=>t==null?void 0:t(s))},300);fetch(`https://api.iris.to/event/${e}`).then(s=>{s.status===200&&s.json().then(o=>{o&&o.id===e&&(clearTimeout(i),Fi.handle(o,!0),t==null||t(o))})})}else Bt.subscribe({ids:[e]},t,!1)},getDirectMessagesByUser(e,r){const t=()=>{var o;r==null||r(((o=this.directMessagesByUser.get(e))==null?void 0:o.eventIds)??[])};this.directMessagesByUser.has(e)&&t();const n=de.getPubKey(),i=Bt.subscribe({kinds:[4],"#p":[e],authors:[n]},t),s=Bt.subscribe({kinds:[4],"#p":[n],authors:[e]},t);return()=>{i(),s()}},getDirectMessages(e){const r=()=>{const i=this.directMessagesByUser??new Map;i.size===0&&i.set(de.getPubKey(),new Ff(500)),e==null||e(i)};r();const t=Bt.subscribe({kinds:[4],"#p":[de.getPubKey()]},r),n=Bt.subscribe({kinds:[4],authors:[de.getPubKey()]},r);return()=>{t(),n()}}},Re=Fi,ewe=({each:e,children:r})=>e.map((t,n)=>r(t,n)),dt=e=>e.when?e.children:null;class $n extends Ey{constructor(){super(...arguments);ce(this,"unmounted");ce(this,"unsubscribes",{})}sub(t,n){return(s,o,a,l)=>{if(this.unmounted){a==null||a();return}this.unsubscribes[n??o]=a,t(s,o,a,l)}}inject(t,n){return this.sub((i,s)=>{const o={};o[t??s]=i,this.setState(o)},n)}unsubscribe(){Object.keys(this.unsubscribes).forEach(t=>{const n=this.unsubscribes[t];n==null||n(),delete this.unsubscribes[t]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}const twe=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],OK=e=>twe.some(r=>e.startsWith(r)),rwe=e=>{let r=e.onError,t=e.src,n=!1;if(e.src&&!e.src.startsWith("data:image")&&(!OK(e.src)||e.width)){const o=e.src;if(e.width){const l=e.width*2;t=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${l}:${l}/plain/${o}`}else t=`https://imgproxy.iris.to/insecure/plain/${o}`;const a=e.onError;r=()=>{n?(console.log("original source failed too",o),a&&a()):(console.log("image proxy failed",t,"trying original source",o),n=!0,s(o))}}const[i,s]=Me(t);return v("img",{src:i,onError:r,onClick:e.onClick,className:e.className,style:e.style,width:e.width,height:e.width,alt:e.alt})},yu=rwe;class fs extends $n{constructor(){super(...arguments);ce(this,"activityTimeout");ce(this,"unsub")}updateAvatar(){this.setState({avatar:ls.createImageUrl(this.props.str,this.props.width)})}componentDidMount(){const t=this.props.str;if(!t)return;this.updateAvatar();const n=de.toNostrHexAddress(t);n&&(this.unsub=et.getProfile(n,i=>{i&&this.setState({picture:i.picture,name:i.name})})),this.setState({activity:null})}componentWillUnmount(){var t;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout),(t=this.unsub)==null||t.call(this)}render(){const t=this.props.width,n=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!et.isBlocked(this.props.str),s=i?"has-picture":"",o=this.props.showTooltip?"tooltip":"";return v("div",{style:{maxWidth:`${t}px`,maxHeight:`${t}px`,cursor:this.props.onClick?"pointer":void 0},className:`inline-flex flex-col items-center justify-center relative select-none ${s} ${o} ${n}`,onClick:this.props.onClick,children:[v("div",{children:[v(dt,{when:i,children:v(yu,{className:"object-cover rounded-full",src:this.state.picture,width:t,square:!0,onError:()=>this.setState({hasError:!0})})}),v(dt,{when:!i,children:v("img",{width:t,className:"max-w-full rounded-full",src:this.state.avatar||""})})]}),v(dt,{when:this.props.showTooltip&&this.state.name,children:v("span",{className:"tooltiptext",children:this.state.name})})]})}}const CK=({event:e,isQuote:r,standalone:t,fullWidth:n})=>v("span",{className:`flex flex-col items-center flex-shrink-0 ${n?"mr-2":"mr-4"}`,children:[v(dt,{when:e.pubkey,children:v(Qt,{href:`/${e.pubkey}`,children:v(fs,{str:de.toNostrBech32Address(e.pubkey,"npub"),width:40})})}),v(dt,{when:r&&!t,children:v("div",{className:"border-l-2 border-neutral-700 h-full"})})]});var Os=function(){return Os=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Os.apply(this,arguments)};function Uy(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,s;n<i;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return e.concat(s||Array.prototype.slice.call(r))}var Jr="-ms-",fy="-moz-",Rr="-webkit-",PK="comm",L_="rule",BP="decl",nwe="@import",NK="@keyframes",iwe="@layer",swe=Math.abs,MP=String.fromCharCode,qI=Object.assign;function owe(e,r){return li(e,0)^45?(((r<<2^li(e,0))<<2^li(e,1))<<2^li(e,2))<<2^li(e,3):0}function RK(e){return e.trim()}function Kl(e,r){return(e=r.exec(e))?e[0]:e}function ar(e,r,t){return e.replace(r,t)}function ew(e,r){return e.indexOf(r)}function li(e,r){return e.charCodeAt(r)|0}function Kp(e,r,t){return e.slice(r,t)}function sl(e){return e.length}function DK(e){return e.length}function Xg(e,r){return r.push(e),e}function awe(e,r){return e.map(r).join("")}function h6(e,r){return e.filter(function(t){return!Kl(t,r)})}var F_=1,Vp=1,BK=0,Yo=0,Fn=0,$v="";function j_(e,r,t,n,i,s,o,a){return{value:e,root:r,parent:t,type:n,props:i,children:s,line:F_,column:Vp,length:o,return:"",siblings:a}}function fc(e,r){return qI(j_("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},r)}function Rd(e){for(;e.root;)e=fc(e.root,{children:[e]});Xg(e,e.siblings)}function lwe(){return Fn}function uwe(){return Fn=Yo>0?li($v,--Yo):0,Vp--,Fn===10&&(Vp=1,F_--),Fn}function Ia(){return Fn=Yo<BK?li($v,Yo++):0,Vp++,Fn===10&&(Vp=1,F_++),Fn}function lh(){return li($v,Yo)}function tw(){return Yo}function z_(e,r){return Kp($v,e,r)}function KI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cwe(e){return F_=Vp=1,BK=sl($v=e),Yo=0,[]}function fwe(e){return $v="",e}function UE(e){return RK(z_(Yo-1,VI(e===91?e+2:e===40?e+1:e)))}function hwe(e){for(;(Fn=lh())&&Fn<33;)Ia();return KI(e)>2||KI(Fn)>3?"":" "}function dwe(e,r){for(;--r&&Ia()&&!(Fn<48||Fn>102||Fn>57&&Fn<65||Fn>70&&Fn<97););return z_(e,tw()+(r<6&&lh()==32&&Ia()==32))}function VI(e){for(;Ia();)switch(Fn){case e:return Yo;case 34:case 39:e!==34&&e!==39&&VI(Fn);break;case 40:e===41&&VI(e);break;case 92:Ia();break}return Yo}function pwe(e,r){for(;Ia()&&e+Fn!==47+10;)if(e+Fn===42+42&&lh()===47)break;return"/*"+z_(r,Yo-1)+"*"+MP(e===47?e:Ia())}function vwe(e){for(;!KI(lh());)Ia();return z_(e,Yo)}function gwe(e){return fwe(rw("",null,null,null,[""],e=cwe(e),0,[0],e))}function rw(e,r,t,n,i,s,o,a,l){for(var u=0,f=0,c=o,d=0,y=0,w=0,b=1,T=1,_=1,A=0,x="",I=i,O=s,C=n,g=x;T;)switch(w=A,A=Ia()){case 40:if(w!=108&&li(g,c-1)==58){ew(g+=ar(UE(A),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:g+=UE(A);break;case 9:case 10:case 13:case 32:g+=hwe(w);break;case 92:g+=dwe(tw()-1,7);continue;case 47:switch(lh()){case 42:case 47:Xg(ywe(pwe(Ia(),tw()),r,t,l),l);break;default:g+="/"}break;case 123*b:a[u++]=sl(g)*_;case 125*b:case 59:case 0:switch(A){case 0:case 125:T=0;case 59+f:_==-1&&(g=ar(g,/\f/g,"")),y>0&&sl(g)-c&&Xg(y>32?p6(g+";",n,t,c-1,l):p6(ar(g," ","")+";",n,t,c-2,l),l);break;case 59:g+=";";default:if(Xg(C=d6(g,r,t,u,f,i,a,x,I=[],O=[],c,s),s),A===123)if(f===0)rw(g,r,C,C,I,s,c,a,O);else switch(d===99&&li(g,3)===110?100:d){case 100:case 108:case 109:case 115:rw(e,C,C,n&&Xg(d6(e,C,C,0,0,i,a,x,i,I=[],c,O),O),i,O,c,a,n?I:O);break;default:rw(g,C,C,C,[""],O,0,a,O)}}u=f=y=0,b=_=1,x=g="",c=o;break;case 58:c=1+sl(g),y=w;default:if(b<1){if(A==123)--b;else if(A==125&&b++==0&&uwe()==125)continue}switch(g+=MP(A),A*b){case 38:_=f>0?1:(g+="\f",-1);break;case 44:a[u++]=(sl(g)-1)*_,_=1;break;case 64:lh()===45&&(g+=UE(Ia())),d=lh(),f=c=sl(x=g+=vwe(tw())),A++;break;case 45:w===45&&sl(g)==2&&(b=0)}}return s}function d6(e,r,t,n,i,s,o,a,l,u,f,c){for(var d=i-1,y=i===0?s:[""],w=DK(y),b=0,T=0,_=0;b<n;++b)for(var A=0,x=Kp(e,d+1,d=swe(T=o[b])),I=e;A<w;++A)(I=RK(T>0?y[A]+" "+x:ar(x,/&\f/g,y[A])))&&(l[_++]=I);return j_(e,r,t,i===0?L_:a,l,u,f,c)}function ywe(e,r,t,n){return j_(e,r,t,PK,MP(lwe()),Kp(e,2,-2),0,n)}function p6(e,r,t,n,i){return j_(e,r,t,BP,Kp(e,0,n),Kp(e,n+1,-1),n,i)}function MK(e,r,t){switch(owe(e,r)){case 5103:return Rr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rr+e+e;case 4789:return fy+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rr+e+fy+e+Jr+e+e;case 5936:switch(li(e,r+11)){case 114:return Rr+e+Jr+ar(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rr+e+Jr+ar(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rr+e+Jr+ar(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Rr+e+Jr+e+e;case 6165:return Rr+e+Jr+"flex-"+e+e;case 5187:return Rr+e+ar(e,/(\w+).+(:[^]+)/,Rr+"box-$1$2"+Jr+"flex-$1$2")+e;case 5443:return Rr+e+Jr+"flex-item-"+ar(e,/flex-|-self/g,"")+(Kl(e,/flex-|baseline/)?"":Jr+"grid-row-"+ar(e,/flex-|-self/g,""))+e;case 4675:return Rr+e+Jr+"flex-line-pack"+ar(e,/align-content|flex-|-self/g,"")+e;case 5548:return Rr+e+Jr+ar(e,"shrink","negative")+e;case 5292:return Rr+e+Jr+ar(e,"basis","preferred-size")+e;case 6060:return Rr+"box-"+ar(e,"-grow","")+Rr+e+Jr+ar(e,"grow","positive")+e;case 4554:return Rr+ar(e,/([^-])(transform)/g,"$1"+Rr+"$2")+e;case 6187:return ar(ar(ar(e,/(zoom-|grab)/,Rr+"$1"),/(image-set)/,Rr+"$1"),e,"")+e;case 5495:case 3959:return ar(e,/(image-set\([^]*)/,Rr+"$1$`$1");case 4968:return ar(ar(e,/(.+:)(flex-)?(.*)/,Rr+"box-pack:$3"+Jr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rr+e+e;case 4200:if(!Kl(e,/flex-|baseline/))return Jr+"grid-column-align"+Kp(e,r)+e;break;case 2592:case 3360:return Jr+ar(e,"template-","")+e;case 4384:case 3616:return t&&t.some(function(n,i){return r=i,Kl(n.props,/grid-\w+-end/)})?~ew(e+(t=t[r].value),"span")?e:Jr+ar(e,"-start","")+e+Jr+"grid-row-span:"+(~ew(t,"span")?Kl(t,/\d+/):+Kl(t,/\d+/)-+Kl(e,/\d+/))+";":Jr+ar(e,"-start","")+e;case 4896:case 4128:return t&&t.some(function(n){return Kl(n.props,/grid-\w+-start/)})?e:Jr+ar(ar(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ar(e,/(.+)-inline(.+)/,Rr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(sl(e)-1-r>6)switch(li(e,r+1)){case 109:if(li(e,r+4)!==45)break;case 102:return ar(e,/(.+:)(.+)-([^]+)/,"$1"+Rr+"$2-$3$1"+fy+(li(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~ew(e,"stretch")?MK(ar(e,"stretch","fill-available"),r,t)+e:e}break;case 5152:case 5920:return ar(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,s,o,a,l,u){return Jr+i+":"+s+u+(o?Jr+i+"-span:"+(a?l:+l-+s)+u:"")+e});case 4949:if(li(e,r+6)===121)return ar(e,":",":"+Rr)+e;break;case 6444:switch(li(e,li(e,14)===45?18:11)){case 120:return ar(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Rr+(li(e,14)===45?"inline-":"")+"box$3$1"+Rr+"$2$3$1"+Jr+"$2box$3")+e;case 100:return ar(e,":",":"+Jr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ar(e,"scroll-","scroll-snap-")+e}return e}function t$(e,r){for(var t="",n=0;n<e.length;n++)t+=r(e[n],n,e,r)||"";return t}function mwe(e,r,t,n){switch(e.type){case iwe:if(e.children.length)break;case nwe:case BP:return e.return=e.return||e.value;case PK:return"";case NK:return e.return=e.value+"{"+t$(e.children,n)+"}";case L_:if(!sl(e.value=e.props.join(",")))return""}return sl(t=t$(e.children,n))?e.return=e.value+"{"+t+"}":""}function bwe(e){var r=DK(e);return function(t,n,i,s){for(var o="",a=0;a<r;a++)o+=e[a](t,n,i,s)||"";return o}}function wwe(e){return function(r){r.root||(r=r.return)&&e(r)}}function $we(e,r,t,n){if(e.length>-1&&!e.return)switch(e.type){case BP:e.return=MK(e.value,e.length,t);return;case NK:return t$([fc(e,{value:ar(e.value,"@","@"+Rr)})],n);case L_:if(e.length)return awe(t=e.props,function(i){switch(Kl(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Rd(fc(e,{props:[ar(i,/:(read-\w+)/,":"+fy+"$1")]})),Rd(fc(e,{props:[i]})),qI(e,{props:h6(t,n)});break;case"::placeholder":Rd(fc(e,{props:[ar(i,/:(plac\w+)/,":"+Rr+"input-$1")]})),Rd(fc(e,{props:[ar(i,/:(plac\w+)/,":"+fy+"$1")]})),Rd(fc(e,{props:[ar(i,/:(plac\w+)/,Jr+"input-$1")]})),Rd(fc(e,{props:[i]})),qI(e,{props:h6(t,n)});break}return""})}}var _we={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gp=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",LP=typeof window<"u"&&"HTMLElement"in window,xwe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),H_=Object.freeze([]),Yp=Object.freeze({});function Ewe(e,r,t){return t===void 0&&(t=Yp),e.theme!==t.theme&&e.theme||r||t.theme}var LK=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Swe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,kwe=/(^-|-$)/g;function v6(e){return e.replace(Swe,"-").replace(kwe,"")}var Twe=/(a)(d)/gi,g6=function(e){return String.fromCharCode(e+(e>25?39:97))};function GI(e){var r,t="";for(r=Math.abs(e);r>52;r=r/52|0)t=g6(r%52)+t;return(g6(r%52)+t).replace(Twe,"$1-$2")}var WE,np=function(e,r){for(var t=r.length;t;)e=33*e^r.charCodeAt(--t);return e},FK=function(e){return np(5381,e)};function jK(e){return GI(FK(e)>>>0)}function Iwe(e){return e.displayName||e.name||"Component"}function qE(e){return typeof e=="string"&&!0}var zK=typeof Symbol=="function"&&Symbol.for,HK=zK?Symbol.for("react.memo"):60115,Awe=zK?Symbol.for("react.forward_ref"):60112,Owe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Cwe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},UK={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Pwe=((WE={})[Awe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WE[HK]=UK,WE);function y6(e){return("type"in(r=e)&&r.type.$$typeof)===HK?UK:"$$typeof"in e?Pwe[e.$$typeof]:Owe;var r}var Nwe=Object.defineProperty,Rwe=Object.getOwnPropertyNames,m6=Object.getOwnPropertySymbols,Dwe=Object.getOwnPropertyDescriptor,Bwe=Object.getPrototypeOf,b6=Object.prototype;function WK(e,r,t){if(typeof r!="string"){if(b6){var n=Bwe(r);n&&n!==b6&&WK(e,n,t)}var i=Rwe(r);m6&&(i=i.concat(m6(r)));for(var s=y6(e),o=y6(r),a=0;a<i.length;++a){var l=i[a];if(!(l in Cwe||t&&t[l]||o&&l in o||s&&l in s)){var u=Dwe(r,l);try{Nwe(e,l,u)}catch{}}}}return e}function Zp(e){return typeof e=="function"}function FP(e){return typeof e=="object"&&"styledComponentId"in e}function Jf(e,r){return e&&r?"".concat(e," ").concat(r):e||r||""}function YI(e,r){if(e.length===0)return"";for(var t=e[0],n=1;n<e.length;n++)t+=r?r+e[n]:e[n];return t}function Wy(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function ZI(e,r,t){if(t===void 0&&(t=!1),!t&&!Wy(e)&&!Array.isArray(e))return r;if(Array.isArray(r))for(var n=0;n<r.length;n++)e[n]=ZI(e[n],r[n]);else if(Wy(r))for(var n in r)e[n]=ZI(e[n],r[n]);return e}function jP(e,r){Object.defineProperty(e,"toString",{value:r})}function Nm(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(r.length>0?" Args: ".concat(r.join(", ")):""))}var Mwe=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}return e.prototype.indexOfGroup=function(r){for(var t=0,n=0;n<r;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(r,t){if(r>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,s=i;r>=s;)if((s<<=1)<0)throw Nm(16,"".concat(r));this.groupSizes=new Uint32Array(s),this.groupSizes.set(n),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(r+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[r]++,a++)},e.prototype.clearGroup=function(r){if(r<this.length){var t=this.groupSizes[r],n=this.indexOfGroup(r),i=n+t;this.groupSizes[r]=0;for(var s=n;s<i;s++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(r){var t="";if(r>=this.length||this.groupSizes[r]===0)return t;for(var n=this.groupSizes[r],i=this.indexOfGroup(r),s=i+n,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return t},e}(),nw=new Map,r$=new Map,KE=1,Y0=function(e){if(nw.has(e))return nw.get(e);for(;r$.has(KE);)KE++;var r=KE++;return nw.set(e,r),r$.set(r,e),r},Lwe=function(e,r){nw.set(e,r),r$.set(r,e)},Fwe="style[".concat(Gp,"][").concat("data-styled-version",'="').concat("6.0.5",'"]'),jwe=new RegExp("^".concat(Gp,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),zwe=function(e,r,t){for(var n,i=t.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&e.registerName(r,n)},Hwe=function(e,r){for(var t,n=((t=r.textContent)!==null&&t!==void 0?t:"").split(`/*!sc*/
`),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var l=a.match(jwe);if(l){var u=0|parseInt(l[1],10),f=l[2];u!==0&&(Lwe(f,u),zwe(e,f,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(a)}}};function Uwe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var qK=function(e){var r=document.head,t=e||r,n=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Gp,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;n.setAttribute(Gp,"active"),n.setAttribute("data-styled-version","6.0.5");var o=Uwe();return o&&n.setAttribute("nonce",o),t.insertBefore(n,s),n},Wwe=function(){function e(r){this.element=qK(r),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,s=n.length;i<s;i++){var o=n[i];if(o.ownerNode===t)return o}throw Nm(17)}(this.element),this.length=0}return e.prototype.insertRule=function(r,t){try{return this.sheet.insertRule(t,r),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},e.prototype.getRule=function(r){var t=this.sheet.cssRules[r];return t&&t.cssText?t.cssText:""},e}(),qwe=function(){function e(r){this.element=qK(r),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(r,t){if(r<=this.length&&r>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[r]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},e.prototype.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),Kwe=function(){function e(r){this.rules=[],this.length=0}return e.prototype.insertRule=function(r,t){return r<=this.length&&(this.rules.splice(r,0,t),this.length++,!0)},e.prototype.deleteRule=function(r){this.rules.splice(r,1),this.length--},e.prototype.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),w6=LP,Vwe={isServer:!LP,useCSSOMInjection:!xwe},KK=function(){function e(r,t,n){r===void 0&&(r=Yp),t===void 0&&(t={});var i=this;this.options=Os(Os({},Vwe),r),this.gs=t,this.names=new Map(n),this.server=!!r.isServer,!this.server&&LP&&w6&&(w6=!1,function(s){for(var o=document.querySelectorAll(Fwe),a=0,l=o.length;a<l;a++){var u=o[a];u&&u.getAttribute(Gp)!=="active"&&(Hwe(s,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),jP(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(c){var d=function(_){return r$.get(_)}(c);if(d===void 0)return"continue";var y=s.names.get(d),w=o.getGroup(c);if(y===void 0||w.length===0)return"continue";var b="".concat(Gp,".g").concat(c,'[id="').concat(d,'"]'),T="";y!==void 0&&y.forEach(function(_){_.length>0&&(T+="".concat(_,","))}),l+="".concat(w).concat(b,'{content:"').concat(T,'"}').concat(`/*!sc*/
`)},f=0;f<a;f++)u(f);return l}(i)})}return e.registerId=function(r){return Y0(r)},e.prototype.reconstructWithOptions=function(r,t){return t===void 0&&(t=!0),new e(Os(Os({},this.options),r),this.gs,t&&this.names||void 0)},e.prototype.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(r=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new Kwe(i):n?new Wwe(i):new qwe(i)}(this.options),new Mwe(r)));var r},e.prototype.hasNameForId=function(r,t){return this.names.has(r)&&this.names.get(r).has(t)},e.prototype.registerName=function(r,t){if(Y0(r),this.names.has(r))this.names.get(r).add(t);else{var n=new Set;n.add(t),this.names.set(r,n)}},e.prototype.insertRules=function(r,t,n){this.registerName(r,t),this.getTag().insertRules(Y0(r),n)},e.prototype.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},e.prototype.clearRules=function(r){this.getTag().clearGroup(Y0(r)),this.clearNames(r)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Gwe=/&/g,Ywe=/^\s*\/\/.*$/gm;function VK(e,r){return e.map(function(t){return t.type==="rule"&&(t.value="".concat(r," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(r," ")),t.props=t.props.map(function(n){return"".concat(r," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=VK(t.children,r)),t})}function Zwe(e){var r,t,n,i=e===void 0?Yp:e,s=i.options,o=s===void 0?Yp:s,a=i.plugins,l=a===void 0?H_:a,u=function(d,y,w){return w===t||w.startsWith(t)&&w.endsWith(t)&&w.replaceAll(t,"").length>0?".".concat(r):d},f=l.slice();f.push(function(d){d.type===L_&&d.value.includes("&")&&(d.props[0]=d.props[0].replace(Gwe,t).replace(n,u))}),o.prefix&&f.push($we),f.push(mwe);var c=function(d,y,w,b){y===void 0&&(y=""),w===void 0&&(w=""),b===void 0&&(b="&"),r=b,t=y,n=new RegExp("\\".concat(t,"\\b"),"g");var T=d.replace(Ywe,""),_=gwe(w||y?"".concat(w," ").concat(y," { ").concat(T," }"):T);o.namespace&&(_=VK(_,o.namespace));var A=[];return t$(_,bwe(f.concat(wwe(function(x){return A.push(x)})))),A};return c.hash=l.length?l.reduce(function(d,y){return y.name||Nm(15),np(d,y.name)},5381).toString():"",c}var Xwe=new KK,XI=Zwe(),GK=ka.createContext({shouldForwardProp:void 0,styleSheet:Xwe,stylis:XI});GK.Consumer;ka.createContext(void 0);function $6(){return a_(GK)}var YK=function(){function e(r,t){var n=this;this.inject=function(i,s){s===void 0&&(s=XI);var o=n.name+s.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,s(n.rules,o,"@keyframes"))},this.name=r,this.id="sc-keyframes-".concat(r),this.rules=t,jP(this,function(){throw Nm(12,String(n.name))})}return e.prototype.getName=function(r){return r===void 0&&(r=XI),this.name+r.hash},e}(),Jwe=function(e){return e>="A"&&e<="Z"};function _6(e){for(var r="",t=0;t<e.length;t++){var n=e[t];if(t===1&&n==="-"&&e[0]==="-")return e;Jwe(n)?r+="-"+n.toLowerCase():r+=n}return r.startsWith("ms-")?"-"+r:r}var ZK=function(e){return e==null||e===!1||e===""},XK=function(e){var r,t,n=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!ZK(s)&&(Array.isArray(s)&&s.isCss||Zp(s)?n.push("".concat(_6(i),":"),s,";"):Wy(s)?n.push.apply(n,Uy(Uy(["".concat(i," {")],XK(s),!1),["}"],!1)):n.push("".concat(_6(i),": ").concat((r=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||r in _we||r.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function uh(e,r,t,n){if(ZK(e))return[];if(FP(e))return[".".concat(e.styledComponentId)];if(Zp(e)){if(!Zp(s=e)||s.prototype&&s.prototype.isReactComponent||!r)return[e];var i=e(r);return uh(i,r,t,n)}var s;return e instanceof YK?t?(e.inject(t,n),[e.getName(n)]):[e]:Wy(e)?XK(e):Array.isArray(e)?Array.prototype.concat.apply(H_,e.map(function(o){return uh(o,r,t,n)})):[e.toString()]}function Qwe(e){for(var r=0;r<e.length;r+=1){var t=e[r];if(Zp(t)&&!FP(t))return!1}return!0}var e$e=FK("6.0.5"),t$e=function(){function e(r,t,n){this.rules=r,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&Qwe(r),this.componentId=t,this.baseHash=np(e$e,t),this.baseStyle=n,KK.registerId(t)}return e.prototype.generateAndInjectStyles=function(r,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(r,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Jf(i,this.staticRulesId);else{var s=YI(uh(this.rules,r,t,n)),o=GI(np(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=Jf(i,o),this.staticRulesId=o}else{for(var l=np(this.baseHash,n.hash),u="",f=0;f<this.rules.length;f++){var c=this.rules[f];if(typeof c=="string")u+=c;else if(c){var d=YI(uh(c,r,t,n));l=np(l,d),u+=d}}if(u){var y=GI(l>>>0);t.hasNameForId(this.componentId,y)||t.insertRules(this.componentId,y,n(u,".".concat(y),void 0,this.componentId)),i=Jf(i,y)}}return i},e}(),JK=ka.createContext(void 0);JK.Consumer;var VE={};function r$e(e,r,t){var n=FP(e),i=e,s=!qE(e),o=r.attrs,a=o===void 0?H_:o,l=r.componentId,u=l===void 0?function(x,I){var O=typeof x!="string"?"sc":v6(x);VE[O]=(VE[O]||0)+1;var C="".concat(O,"-").concat(jK("6.0.5"+O+VE[O]));return I?"".concat(I,"-").concat(C):C}(r.displayName,r.parentComponentId):l,f=r.displayName;f===void 0&&function(x){return qE(x)?"styled.".concat(x):"Styled(".concat(Iwe(x),")")}(e);var c=r.displayName&&r.componentId?"".concat(v6(r.displayName),"-").concat(r.componentId):r.componentId||u,d=n&&i.attrs?i.attrs.concat(a).filter(Boolean):a,y=r.shouldForwardProp;if(n&&i.shouldForwardProp){var w=i.shouldForwardProp;if(r.shouldForwardProp){var b=r.shouldForwardProp;y=function(x,I){return w(x,I)&&b(x,I)}}else y=w}var T=new t$e(t,c,n?i.componentStyle:void 0);function _(x,I){return function(O,C,g){var M=O.attrs,B=O.componentStyle,L=O.defaultProps,q=O.foldedComponentIds,Q=O.styledComponentId,re=O.target,Z=ka.useContext(JK),j=$6(),X=O.shouldForwardProp||j.shouldForwardProp,ie=function(it,_e,ge){for(var Te,je=Os(Os({},_e),{className:void 0,theme:ge}),$=0;$<it.length;$+=1){var S=Zp(Te=it[$])?Te(je):Te;for(var N in S)je[N]=N==="className"?Jf(je[N],S[N]):N==="style"?Os(Os({},je[N]),S[N]):S[N]}return _e.className&&(je.className=Jf(je.className,_e.className)),je}(M,C,Ewe(C,Z,L)||Yp),Ee=ie.as||re,$e={};for(var Pe in ie)ie[Pe]===void 0||Pe[0]==="$"||Pe==="as"||Pe==="theme"||(Pe==="forwardedAs"?$e.as=ie.forwardedAs:X&&!X(Pe,Ee)||($e[Pe]=ie[Pe]));var He=function(it,_e){var ge=$6(),Te=it.generateAndInjectStyles(_e,ge.styleSheet,ge.stylis);return Te}(B,ie),Ve=Jf(q,Q);return He&&(Ve+=" "+He),ie.className&&(Ve+=" "+ie.className),$e[qE(Ee)&&!LK.has(Ee)?"class":"className"]=Ve,$e.ref=g,Je(Ee,$e)}(A,x,I)}var A=ka.forwardRef(_);return A.attrs=d,A.componentStyle=T,A.shouldForwardProp=y,A.foldedComponentIds=n?Jf(i.foldedComponentIds,i.styledComponentId):"",A.styledComponentId=c,A.target=n?i.target:e,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=n?function(I){for(var O=[],C=1;C<arguments.length;C++)O[C-1]=arguments[C];for(var g=0,M=O;g<M.length;g++)ZI(I,M[g],!0);return I}({},i.defaultProps,x):x}}),jP(A,function(){return".".concat(A.styledComponentId)}),s&&WK(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function x6(e,r){for(var t=[e[0]],n=0,i=r.length;n<i;n+=1)t.push(r[n],e[n+1]);return t}var E6=function(e){return Object.assign(e,{isCss:!0})};function zP(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(Zp(e)||Wy(e)){var n=e;return E6(uh(x6(H_,Uy([n],r,!0))))}var i=e;return r.length===0&&i.length===1&&typeof i[0]=="string"?uh(i):E6(uh(x6(i,r)))}function JI(e,r,t){if(t===void 0&&(t=Yp),!r)throw Nm(1,r);var n=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return e(r,t,zP.apply(void 0,Uy([i],s,!1)))};return n.attrs=function(i){return JI(e,r,Os(Os({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return JI(e,r,Os(Os({},t),i))},n}var QK=function(e){return JI(r$e,e)},_n=QK;LK.forEach(function(e){_n[e]=QK(e)});function n$e(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=YI(zP.apply(void 0,Uy([e],r,!1))),i=jK(n);return new YK(i,n)}const i$e=_n.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  justify-content: ${e=>e.centerVertically?"center":e.justifyContent||"flex-start"};
  align-items: center;
  overflow-y: auto;
  overflow-x: hidden;
`,s$e=_n.div`
  width: ${e=>e.width||"auto"};
  height: ${e=>e.height||"auto"};
  max-height: calc(100% - 40px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Eu=({width:e,height:r,centerVertically:t,showContainer:n,children:i,onClose:s})=>{const o=f=>{f.key==="Escape"&&(s==null||s())},a=f=>{f.stopPropagation(),s==null||s()},l=f=>{f.stopPropagation()};St(()=>(document.body.style.overflow="hidden",window.addEventListener("keydown",o),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",o)}),[o]);const u=n?v("div",{className:"p-8 border-neutral-500 border-2 bg-black rounded-lg shadow-lg",style:{width:"600px","max-width":"calc(100vw - 40px)"},onClick:f=>l(f),children:i}):i;return v(i$e,{centerVertically:t,onClick:a,children:v(s$e,{width:e,height:r,children:u})})},o$e=_n.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 20px;
`,a$e=e=>{var r;return v(Eu,{centerVertically:((r=e.images)==null?void 0:r.length)===1,onClose:e.onClose,children:v(o$e,{children:e.images.map(t=>v("p",{children:v(yu,{className:"rounded-sm",style:{maxHeight:"90vh",maxWidth:"90vw"},src:t})}))})})};var eV=function(e,r,t,n){var i;r[0]=0;for(var s=1;s<r.length;s++){var o=r[s++],a=r[s]?(r[0]|=o?1:2,t[r[s++]]):r[++s];o===3?n[0]=a:o===4?n[1]=Object.assign(n[1]||{},a):o===5?(n[1]=n[1]||{})[r[++s]]=a:o===6?n[1][r[++s]]+=a+"":o?(i=e.apply(a,eV(e,a,t,["",null])),n.push(i),a[0]?r[0]|=2:(r[s-2]=0,r[s]=i)):n.push(a)}return n},S6=new Map;function l$e(e){var r=S6.get(this);return r||(r=new Map,S6.set(this,r)),(r=eV(this,r.get(e)||(r.set(e,r=function(t){for(var n,i,s=1,o="",a="",l=[0],u=function(d){s===1&&(d||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,d,o):s===3&&(d||o)?(l.push(3,d,o),s=2):s===2&&o==="..."&&d?l.push(4,d,0):s===2&&o&&!d?l.push(5,0,!0,o):s>=5&&((o||!d&&s===5)&&(l.push(s,0,o,i),s=6),d&&(l.push(s,d,0,i),s=6)),o=""},f=0;f<t.length;f++){f&&(s===1&&u(),u(f));for(var c=0;c<t[f].length;c++)n=t[f][c],s===1?n==="<"?(u(),l=[l],s=3):o+=n:s===4?o==="--"&&n===">"?(s=1,o=""):o=n+o[0]:a?n===a?a="":o+=n:n==='"'||n==="'"?a=n:n===">"?(u(),s=1):s&&(n==="="?(s=5,i=o,o=""):n==="/"&&(s<5||t[f][c+1]===">")?(u(),s===3&&(l=l[0]),s=l,(l=l[0]).push(2,0,s),s=0):n===" "||n==="	"||n===`
`||n==="\r"?(u(),s=2):o+=n),s===3&&o==="!--"&&(s=4,l=l[0])}return u(),l}(e)),r),arguments,[])).length>1?r:r[0]}var Ao=l$e.bind(Je);function u$e(){this.__data__=[],this.size=0}var c$e=u$e;function f$e(e,r){return e===r||e!==e&&r!==r}var tV=f$e,h$e=tV;function d$e(e,r){for(var t=e.length;t--;)if(h$e(e[t][0],r))return t;return-1}var U_=d$e,p$e=U_,v$e=Array.prototype,g$e=v$e.splice;function y$e(e){var r=this.__data__,t=p$e(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():g$e.call(r,t,1),--this.size,!0}var m$e=y$e,b$e=U_;function w$e(e){var r=this.__data__,t=b$e(r,e);return t<0?void 0:r[t][1]}var $$e=w$e,_$e=U_;function x$e(e){return _$e(this.__data__,e)>-1}var E$e=x$e,S$e=U_;function k$e(e,r){var t=this.__data__,n=S$e(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}var T$e=k$e,I$e=c$e,A$e=m$e,O$e=$$e,C$e=E$e,P$e=T$e;function _v(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}_v.prototype.clear=I$e;_v.prototype.delete=A$e;_v.prototype.get=O$e;_v.prototype.has=C$e;_v.prototype.set=P$e;var W_=_v,N$e=W_;function R$e(){this.__data__=new N$e,this.size=0}var D$e=R$e;function B$e(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var M$e=B$e;function L$e(e){return this.__data__.get(e)}var F$e=L$e;function j$e(e){return this.__data__.has(e)}var z$e=j$e,H$e=Em,U$e=xm,W$e="[object AsyncFunction]",q$e="[object Function]",K$e="[object GeneratorFunction]",V$e="[object Proxy]";function G$e(e){if(!U$e(e))return!1;var r=H$e(e);return r==q$e||r==K$e||r==W$e||r==V$e}var rV=G$e,Y$e=$l,Z$e=Y$e["__core-js_shared__"],X$e=Z$e,GE=X$e,k6=function(){var e=/[^.]+$/.exec(GE&&GE.keys&&GE.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function J$e(e){return!!k6&&k6 in e}var Q$e=J$e,e_e=Function.prototype,t_e=e_e.toString;function r_e(e){if(e!=null){try{return t_e.call(e)}catch{}try{return e+""}catch{}}return""}var nV=r_e,n_e=rV,i_e=Q$e,s_e=xm,o_e=nV,a_e=/[\\^$.*+?()[\]{}|]/g,l_e=/^\[object .+?Constructor\]$/,u_e=Function.prototype,c_e=Object.prototype,f_e=u_e.toString,h_e=c_e.hasOwnProperty,d_e=RegExp("^"+f_e.call(h_e).replace(a_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p_e(e){if(!s_e(e)||i_e(e))return!1;var r=n_e(e)?d_e:l_e;return r.test(o_e(e))}var v_e=p_e;function g_e(e,r){return e==null?void 0:e[r]}var y_e=g_e,m_e=v_e,b_e=y_e;function w_e(e,r){var t=b_e(e,r);return m_e(t)?t:void 0}var xv=w_e,$_e=xv,__e=$l,x_e=$_e(__e,"Map"),HP=x_e,E_e=xv,S_e=E_e(Object,"create"),q_=S_e,T6=q_;function k_e(){this.__data__=T6?T6(null):{},this.size=0}var T_e=k_e;function I_e(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var A_e=I_e,O_e=q_,C_e="__lodash_hash_undefined__",P_e=Object.prototype,N_e=P_e.hasOwnProperty;function R_e(e){var r=this.__data__;if(O_e){var t=r[e];return t===C_e?void 0:t}return N_e.call(r,e)?r[e]:void 0}var D_e=R_e,B_e=q_,M_e=Object.prototype,L_e=M_e.hasOwnProperty;function F_e(e){var r=this.__data__;return B_e?r[e]!==void 0:L_e.call(r,e)}var j_e=F_e,z_e=q_,H_e="__lodash_hash_undefined__";function U_e(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=z_e&&r===void 0?H_e:r,this}var W_e=U_e,q_e=T_e,K_e=A_e,V_e=D_e,G_e=j_e,Y_e=W_e;function Ev(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Ev.prototype.clear=q_e;Ev.prototype.delete=K_e;Ev.prototype.get=V_e;Ev.prototype.has=G_e;Ev.prototype.set=Y_e;var Z_e=Ev,I6=Z_e,X_e=W_,J_e=HP;function Q_e(){this.size=0,this.__data__={hash:new I6,map:new(J_e||X_e),string:new I6}}var exe=Q_e;function txe(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var rxe=txe,nxe=rxe;function ixe(e,r){var t=e.__data__;return nxe(r)?t[typeof r=="string"?"string":"hash"]:t.map}var K_=ixe,sxe=K_;function oxe(e){var r=sxe(this,e).delete(e);return this.size-=r?1:0,r}var axe=oxe,lxe=K_;function uxe(e){return lxe(this,e).get(e)}var cxe=uxe,fxe=K_;function hxe(e){return fxe(this,e).has(e)}var dxe=hxe,pxe=K_;function vxe(e,r){var t=pxe(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}var gxe=vxe,yxe=exe,mxe=axe,bxe=cxe,wxe=dxe,$xe=gxe;function Sv(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Sv.prototype.clear=yxe;Sv.prototype.delete=mxe;Sv.prototype.get=bxe;Sv.prototype.has=wxe;Sv.prototype.set=$xe;var iV=Sv,_xe=W_,xxe=HP,Exe=iV,Sxe=200;function kxe(e,r){var t=this.__data__;if(t instanceof _xe){var n=t.__data__;if(!xxe||n.length<Sxe-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Exe(n)}return t.set(e,r),this.size=t.size,this}var Txe=kxe,Ixe=W_,Axe=D$e,Oxe=M$e,Cxe=F$e,Pxe=z$e,Nxe=Txe;function kv(e){var r=this.__data__=new Ixe(e);this.size=r.size}kv.prototype.clear=Axe;kv.prototype.delete=Oxe;kv.prototype.get=Cxe;kv.prototype.has=Pxe;kv.prototype.set=Nxe;var Rxe=kv,Dxe="__lodash_hash_undefined__";function Bxe(e){return this.__data__.set(e,Dxe),this}var Mxe=Bxe;function Lxe(e){return this.__data__.has(e)}var Fxe=Lxe,jxe=iV,zxe=Mxe,Hxe=Fxe;function n$(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new jxe;++r<t;)this.add(e[r])}n$.prototype.add=n$.prototype.push=zxe;n$.prototype.has=Hxe;var Uxe=n$;function Wxe(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}var qxe=Wxe;function Kxe(e,r){return e.has(r)}var Vxe=Kxe,Gxe=Uxe,Yxe=qxe,Zxe=Vxe,Xxe=1,Jxe=2;function Qxe(e,r,t,n,i,s){var o=t&Xxe,a=e.length,l=r.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),f=s.get(r);if(u&&f)return u==r&&f==e;var c=-1,d=!0,y=t&Jxe?new Gxe:void 0;for(s.set(e,r),s.set(r,e);++c<a;){var w=e[c],b=r[c];if(n)var T=o?n(b,w,c,r,e,s):n(w,b,c,e,r,s);if(T!==void 0){if(T)continue;d=!1;break}if(y){if(!Yxe(r,function(_,A){if(!Zxe(y,A)&&(w===_||i(w,_,t,n,s)))return y.push(A)})){d=!1;break}}else if(!(w===b||i(w,b,t,n,s))){d=!1;break}}return s.delete(e),s.delete(r),d}var sV=Qxe,e2e=$l,t2e=e2e.Uint8Array,r2e=t2e;function n2e(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}var i2e=n2e;function s2e(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var o2e=s2e,A6=X3,O6=r2e,a2e=tV,l2e=sV,u2e=i2e,c2e=o2e,f2e=1,h2e=2,d2e="[object Boolean]",p2e="[object Date]",v2e="[object Error]",g2e="[object Map]",y2e="[object Number]",m2e="[object RegExp]",b2e="[object Set]",w2e="[object String]",$2e="[object Symbol]",_2e="[object ArrayBuffer]",x2e="[object DataView]",C6=A6?A6.prototype:void 0,YE=C6?C6.valueOf:void 0;function E2e(e,r,t,n,i,s,o){switch(t){case x2e:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case _2e:return!(e.byteLength!=r.byteLength||!s(new O6(e),new O6(r)));case d2e:case p2e:case y2e:return a2e(+e,+r);case v2e:return e.name==r.name&&e.message==r.message;case m2e:case w2e:return e==r+"";case g2e:var a=u2e;case b2e:var l=n&f2e;if(a||(a=c2e),e.size!=r.size&&!l)return!1;var u=o.get(e);if(u)return u==r;n|=h2e,o.set(e,r);var f=l2e(a(e),a(r),n,i,s,o);return o.delete(e),f;case $2e:if(YE)return YE.call(e)==YE.call(r)}return!1}var S2e=E2e;function k2e(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var T2e=k2e,I2e=Array.isArray,UP=I2e,A2e=T2e,O2e=UP;function C2e(e,r,t){var n=r(e);return O2e(e)?n:A2e(n,t(e))}var P2e=C2e;function N2e(e,r){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var o=e[t];r(o,t,e)&&(s[i++]=o)}return s}var R2e=N2e;function D2e(){return[]}var B2e=D2e,M2e=R2e,L2e=B2e,F2e=Object.prototype,j2e=F2e.propertyIsEnumerable,P6=Object.getOwnPropertySymbols,z2e=P6?function(e){return e==null?[]:(e=Object(e),M2e(P6(e),function(r){return j2e.call(e,r)}))}:L2e,H2e=z2e;function U2e(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var W2e=U2e,q2e=Em,K2e=Sm,V2e="[object Arguments]";function G2e(e){return K2e(e)&&q2e(e)==V2e}var Y2e=G2e,N6=Y2e,Z2e=Sm,oV=Object.prototype,X2e=oV.hasOwnProperty,J2e=oV.propertyIsEnumerable,Q2e=N6(function(){return arguments}())?N6:function(e){return Z2e(e)&&X2e.call(e,"callee")&&!J2e.call(e,"callee")},eEe=Q2e,i$={exports:{}};function tEe(){return!1}var rEe=tEe;i$.exports;(function(e,r){var t=$l,n=rEe,i=r&&!r.nodeType&&r,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;e.exports=u})(i$,i$.exports);var aV=i$.exports,nEe=9007199254740991,iEe=/^(?:0|[1-9]\d*)$/;function sEe(e,r){var t=typeof e;return r=r??nEe,!!r&&(t=="number"||t!="symbol"&&iEe.test(e))&&e>-1&&e%1==0&&e<r}var oEe=sEe,aEe=9007199254740991;function lEe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=aEe}var lV=lEe,uEe=Em,cEe=lV,fEe=Sm,hEe="[object Arguments]",dEe="[object Array]",pEe="[object Boolean]",vEe="[object Date]",gEe="[object Error]",yEe="[object Function]",mEe="[object Map]",bEe="[object Number]",wEe="[object Object]",$Ee="[object RegExp]",_Ee="[object Set]",xEe="[object String]",EEe="[object WeakMap]",SEe="[object ArrayBuffer]",kEe="[object DataView]",TEe="[object Float32Array]",IEe="[object Float64Array]",AEe="[object Int8Array]",OEe="[object Int16Array]",CEe="[object Int32Array]",PEe="[object Uint8Array]",NEe="[object Uint8ClampedArray]",REe="[object Uint16Array]",DEe="[object Uint32Array]",Qr={};Qr[TEe]=Qr[IEe]=Qr[AEe]=Qr[OEe]=Qr[CEe]=Qr[PEe]=Qr[NEe]=Qr[REe]=Qr[DEe]=!0;Qr[hEe]=Qr[dEe]=Qr[SEe]=Qr[pEe]=Qr[kEe]=Qr[vEe]=Qr[gEe]=Qr[yEe]=Qr[mEe]=Qr[bEe]=Qr[wEe]=Qr[$Ee]=Qr[_Ee]=Qr[xEe]=Qr[EEe]=!1;function BEe(e){return fEe(e)&&cEe(e.length)&&!!Qr[uEe(e)]}var MEe=BEe;function LEe(e){return function(r){return e(r)}}var FEe=LEe,s$={exports:{}};s$.exports;(function(e,r){var t=nW,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(s$,s$.exports);var jEe=s$.exports,zEe=MEe,HEe=FEe,R6=jEe,D6=R6&&R6.isTypedArray,UEe=D6?HEe(D6):zEe,uV=UEe,WEe=W2e,qEe=eEe,KEe=UP,VEe=aV,GEe=oEe,YEe=uV,ZEe=Object.prototype,XEe=ZEe.hasOwnProperty;function JEe(e,r){var t=KEe(e),n=!t&&qEe(e),i=!t&&!n&&VEe(e),s=!t&&!n&&!i&&YEe(e),o=t||n||i||s,a=o?WEe(e.length,String):[],l=a.length;for(var u in e)(r||XEe.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||GEe(u,l)))&&a.push(u);return a}var QEe=JEe,eSe=Object.prototype;function tSe(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||eSe;return e===t}var rSe=tSe;function nSe(e,r){return function(t){return e(r(t))}}var iSe=nSe,sSe=iSe,oSe=sSe(Object.keys,Object),aSe=oSe,lSe=rSe,uSe=aSe,cSe=Object.prototype,fSe=cSe.hasOwnProperty;function hSe(e){if(!lSe(e))return uSe(e);var r=[];for(var t in Object(e))fSe.call(e,t)&&t!="constructor"&&r.push(t);return r}var dSe=hSe,pSe=rV,vSe=lV;function gSe(e){return e!=null&&vSe(e.length)&&!pSe(e)}var ySe=gSe,mSe=QEe,bSe=dSe,wSe=ySe;function $Se(e){return wSe(e)?mSe(e):bSe(e)}var _Se=$Se,xSe=P2e,ESe=H2e,SSe=_Se;function kSe(e){return xSe(e,SSe,ESe)}var TSe=kSe,B6=TSe,ISe=1,ASe=Object.prototype,OSe=ASe.hasOwnProperty;function CSe(e,r,t,n,i,s){var o=t&ISe,a=B6(e),l=a.length,u=B6(r),f=u.length;if(l!=f&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in r:OSe.call(r,d)))return!1}var y=s.get(e),w=s.get(r);if(y&&w)return y==r&&w==e;var b=!0;s.set(e,r),s.set(r,e);for(var T=o;++c<l;){d=a[c];var _=e[d],A=r[d];if(n)var x=o?n(A,_,d,r,e,s):n(_,A,d,e,r,s);if(!(x===void 0?_===A||i(_,A,t,n,s):x)){b=!1;break}T||(T=d=="constructor")}if(b&&!T){var I=e.constructor,O=r.constructor;I!=O&&"constructor"in e&&"constructor"in r&&!(typeof I=="function"&&I instanceof I&&typeof O=="function"&&O instanceof O)&&(b=!1)}return s.delete(e),s.delete(r),b}var PSe=CSe,NSe=xv,RSe=$l,DSe=NSe(RSe,"DataView"),BSe=DSe,MSe=xv,LSe=$l,FSe=MSe(LSe,"Promise"),jSe=FSe,zSe=xv,HSe=$l,USe=zSe(HSe,"Set"),WSe=USe,qSe=xv,KSe=$l,VSe=qSe(KSe,"WeakMap"),GSe=VSe,QI=BSe,eA=HP,tA=jSe,rA=WSe,nA=GSe,cV=Em,Tv=nV,M6="[object Map]",YSe="[object Object]",L6="[object Promise]",F6="[object Set]",j6="[object WeakMap]",z6="[object DataView]",ZSe=Tv(QI),XSe=Tv(eA),JSe=Tv(tA),QSe=Tv(rA),eke=Tv(nA),Tf=cV;(QI&&Tf(new QI(new ArrayBuffer(1)))!=z6||eA&&Tf(new eA)!=M6||tA&&Tf(tA.resolve())!=L6||rA&&Tf(new rA)!=F6||nA&&Tf(new nA)!=j6)&&(Tf=function(e){var r=cV(e),t=r==YSe?e.constructor:void 0,n=t?Tv(t):"";if(n)switch(n){case ZSe:return z6;case XSe:return M6;case JSe:return L6;case QSe:return F6;case eke:return j6}return r});var tke=Tf,ZE=Rxe,rke=sV,nke=S2e,ike=PSe,H6=tke,U6=UP,W6=aV,ske=uV,oke=1,q6="[object Arguments]",K6="[object Array]",Z0="[object Object]",ake=Object.prototype,V6=ake.hasOwnProperty;function lke(e,r,t,n,i,s){var o=U6(e),a=U6(r),l=o?K6:H6(e),u=a?K6:H6(r);l=l==q6?Z0:l,u=u==q6?Z0:u;var f=l==Z0,c=u==Z0,d=l==u;if(d&&W6(e)){if(!W6(r))return!1;o=!0,f=!1}if(d&&!f)return s||(s=new ZE),o||ske(e)?rke(e,r,t,n,i,s):nke(e,r,l,t,n,i,s);if(!(t&oke)){var y=f&&V6.call(e,"__wrapped__"),w=c&&V6.call(r,"__wrapped__");if(y||w){var b=y?e.value():e,T=w?r.value():r;return s||(s=new ZE),i(b,T,t,n,s)}}return d?(s||(s=new ZE),ike(e,r,t,n,i,s)):!1}var uke=lke,cke=uke,G6=Sm;function fV(e,r,t,n,i){return e===r?!0:e==null||r==null||!G6(e)&&!G6(r)?e!==e&&r!==r:cke(e,r,t,n,fV,i)}var fke=fV,hke=fke;function dke(e,r){return hke(e,r)}var pke=dke;const hV=ro(pke);function vke(e){const r=de.getPubKey(),t=de.toNostrHexAddress(e.pub);if(t===r)return v("span",{class:"mx-2 text-iris-blue tooltip","data-tip":he("you"),children:eo.checkmark});if(!t)return null;if(et.isFollowing(r,t))return v("span",{class:"ml-2 text-iris-blue tooltip","data-tip":he("following"),children:eo.checkmark});{const i=et.followedByFriendsCount(t);if(i>0){const s=i>10?"text-iris-orange":"";return v("span",{class:`${s} tooltip ml-2`,"data-tip":`${i} ${he("friends_following")}`,children:eo.checkmark})}else return null}}new TextDecoder("utf-8");const gke=new TextEncoder;function yke(e){let r=__(gke.encode(e));return tI(r)}function mke(e=Date.now()){return Math.floor(e/1e3)}const pa=2;class iA{constructor(){ce(this,"trusts",Array(pa+1).fill(0));ce(this,"distrusts",Array(pa+1).fill(0))}addValue(r,t){r>0&&this.trusts[t]++,r<0&&this.distrusts[t]++}count(r){return this.trusts[r]+this.distrusts[r]}value(r){return this.trusts[r]-this.distrusts[r]}values(){let r=Array(pa+1).fill(0);for(let t=0;t<=pa;t++)r[t]=this.value(t);return r}isDirectTrusted(){return this.isTrusted(0)}isTrusted(r){return this.value(r)>0}isDirectDistrusted(){return this.isDistrusted(0)}isDistrusted(r){return this.value(r)<0}resolve(){let r={val:0,degree:0,count:0,hasScore:!1},t=0;for(;t<=pa;t++)if(!(this.trusts[t]==0&&this.distrusts[t]==0)&&(r.hasScore=!0,this.value(t)!=0)){r.val=this.value(t);break}return r.count=this.count(t),r.degree=t,r}clone(){const r=Object.create(Object.getPrototypeOf(this));return r.trusts=this.trusts.slice(),r.distrusts=this.distrusts.slice(),r}equals(r){for(let t=0;t<=pa;t++)if(this.trusts[t]!=r.trusts[t]||this.distrusts[t]!=r.distrusts[t])return!1;return!0}hasTrustScore(){return this.trusts.some(r=>r>0)}hasDistrustScore(){return this.distrusts.some(r=>r>0)}renderTrustCount(r=!1){return!this.hasTrustScore()&&!r?"":this.trusts.join("/")}renderDistrustCount(r=!1){return!this.hasDistrustScore()&&!r?"":this.distrusts.join("/")}}var nu=(e=>(e[e.Key=1]="Key",e[e.Item=2]="Item",e[e.Unknown=3]="Unknown",e))(nu||{});const sA=99;class bke{constructor(r){ce(this,"id",0);ce(this,"out",Object.create(null));ce(this,"in",Object.create(null));ce(this,"degree",sA);ce(this,"entityType",1);ce(this,"timestamp",0);ce(this,"subscribed",0);ce(this,"score",new iA);ce(this,"profile");this.id=r}}let dV=class{constructor(){ce(this,"key","");ce(this,"type",1);ce(this,"val");ce(this,"entityType",1);ce(this,"context","");ce(this,"note","");ce(this,"timestamp",0)}},pV=class vV extends dV{constructor(){super(...arguments);ce(this,"out");ce(this,"in");ce(this,"partial",!0)}static partialFrom(t){let n=new vV;return n.key=t.key,n.type=t.type,n.val=t.val,n.timestamp=t.timestamp,n}static key(t,n,i,s){let o=`${t}|${n}|${i}|${s}`;return yke(o)}fill(t){this.val=t.val,this.context=t.context,this.note=t.note,this.timestamp=t.timestamp,this.partial=!1}};class wke extends dV{constructor(){super(...arguments);ce(this,"from","");ce(this,"to","")}}class $ke{constructor(){ce(this,"vertices",{});ce(this,"edges",{})}addVertice(r){return this.vertices[r]||(this.vertices[r]=new bke(r))}addEdge(r,t=!1){let n=this.edges[r.key];return n||(n=pV.partialFrom(r),this.edges[r.key]=n,n.out=this.addVertice(vt(r.from)),n.in=this.addVertice(vt(r.to)),n.out.out[n.in.id]=n,n.in.in[n.out.id]=n),t?n.fill(r):(n.val=r.val,n.timestamp=r.timestamp),n}removeEdge(r){const t=r.out,n=r.in;t&&delete t.out[n.id],n&&delete n.in[t.id],delete this.edges[r.key]}getVertice(r){const t=this.getVerticeId(r);if(t!=null)return this.vertices[t]}getEdge(r){return this.edges[r]}getVerticeId(r){return r?vt(r):void 0}calculateScore(r,t){let n=[],i=Object.create(null),s=this.vertices[r];if(!s)return;this.resetScore();let o=s.degree=0;for(n.push(s);n.length>0&&o<=t;){for(let a of n){if(o>0&&!a.score.isTrusted(o-1))continue;let l=o+1;for(const u in a.out){const f=this.vertices[u],c=a.out[u];!c||c.val===0||(f.score.addValue(c.val,o),!(o>=f.degree)&&(f.degree=l,f.entityType=c.entityType,o<t&&f.entityType===1&&!i[u]&&(i[u]=f)))}}n=Object.values(i),i=Object.create(null),o++}}calculateItemScore(r){let t=this.vertices[r];t.score=new iA;let n=sA;for(const i in t.in){const s=this.vertices[i],o=t.in[i];!o||o.val==0||(s.degree<n&&(n=s.degree),t.score.addValue(o.val,s.degree))}t.degree=n+1}resetScore(){for(let r in this.vertices){const t=this.vertices[r];t.score=new iA,t.degree=sA}}wotNetwork(r,t=pa+1){let n=[];for(const i in this.vertices){const s=this.vertices[i];s.degree<=t&&s.degree>0&&(!r||s.entityType===r)&&n.push(s)}return n}inOutTrustById(r,t,n){const i=this.vertices[r];if(!i)return[];let s=Object.create(null);for(const o in i.in){const a=this.vertices[o];if(!a||a.degree>pa)continue;const l=i.in[o];!l||l.val==0||n&&l.val!=n||(s[o]=a)}for(const o in i.out){const a=i.out[o];if(!a||a.val==0||n&&a.val!=n)continue;const l=this.vertices[o];(!t||l.entityType===t)&&(s[o]=l)}return Object.values(s)}outTrustById(r,t,n){let i=[];const s=this.vertices[r];for(const o in s.out){const a=this.vertices[o],l=s.out[o];!l||l.val==0||n&&l.val!=n||(!t||a.entityType===t)&&i.push(a)}return i}trustedBy(r,t,n,i=pa){let s=[];const o=this.vertices[r];for(const a in o.in){const l=this.vertices[a];if(!l||l.degree>i)continue;const u=o.in[a];!u||u.val==0||n&&u.val!=n||(!t||l.entityType===t)&&s.push(l)}return s}getPaths(r){let t=[];const n=this.vertices[r];if(!n)return t;let i=[],s=[];for(i.push(n);i.length>0;){for(let o of i)if(o.degree!=0)for(const a in o.in){const l=o.in[a];if(!l||l.val===0)continue;const u=l.out;!u||u.degree>=o.degree||(t.push(l),s.push(u))}i=s,s=[]}return t}getUnsubscribedVertices(r){let t=new Array;for(const n in this.vertices){const i=this.vertices[n];i.degree<=r&&i.subscribed==0&&i.entityType==1&&(i.degree==0||i.score.isTrusted(i.degree-1))&&t.push(i)}return t}}const Y6=32010,_ke={PubSub:Bt,unsubs:new Map,subscribeTrust(e,r,t){let n=sn.enabledRelays(),i={kinds:[Y6],authors:e,since:r};return Bt.relayPool.subscribe([i],n,(o,a,l)=>{setTimeout(()=>{t(o,a,l)},0)},0,void 0,{})},async publishTrust(e,r,t,n,i,s){let o=de.toNostrBech32Address(e,"npub");const a=`${o}|nostr`,l={kind:Y6,content:t||"",created_at:s||this.getTimestamp(),tags:[["p",o],["d",a],["c",n||"nostr"],["v",r.toString()],["t",i.toString()]]};await this.sign(l),Bt.publish(l)},async sign(e){if(e.sig||await Re.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event")},getTimestamp(e=Date.now()){return Math.floor(e/1e3)},loadProfiles(e){let r=e.filter(n=>!et.profiles.has(vt(n))),t=n=>{if(!n.content||et.profiles.get(vt(n.pubkey)))return;let s=JSON.parse(n.content);et.profiles.set(vt(n.pubkey),s)};return Bt.subscribe({kinds:[0],authors:r},t,!1)}};class V_{constructor(r){ce(this,"id",0);ce(this,"oldScore");ce(this,"oldDegree",0);ce(this,"counter",0);this.id=r}hasChanged(r){return!this.oldScore||!this.oldScore.equals(r.score)||this.oldDegree!=r.degree}clone(){var t;let r=new V_(this.id);return r.oldScore=(t=this.oldScore)==null?void 0:t.clone(),r.oldDegree=this.oldDegree,r.counter=this.counter,r}setScore(r){this.oldScore=r==null?void 0:r.score.clone(),this.oldDegree=(r==null?void 0:r.degree)||0}}const xke="trustScoreEvent";class qy extends CustomEvent{constructor(r,t){super(qy.getEventId(r),{detail:t})}static getEventId(r){return xke+r}}const Eke="trust1";class Ske{constructor(r,t){ce(this,"db");ce(this,"localDataLoaded",!1);ce(this,"g",new $ke);ce(this,"sourceKey");ce(this,"sourceId",-1);ce(this,"wotPubSub");ce(this,"unsubs",{});ce(this,"subscriptionsCounter",0);ce(this,"verticeMonitor",Object.create(null));ce(this,"maxDegree",pa);ce(this,"readyCallbacks",[]);ce(this,"processItems",{});ce(this,"processGraph",!1);ce(this,"processScoreDebounce",wn.debounce(this.processScore,1e3,{trailing:!0}));ce(this,"submitTrustIndex",{});ce(this,"profilesLoaded",!1);this.wotPubSub=r,this.db=t}async init(r){if(this.sourceKey=r,!this.localDataLoaded){this.sourceId=vt(this.sourceKey),this.g.addVertice(this.sourceId),await this.db.edges.each(t=>{this.g.addEdge(t,!1)}),console.info("Graph: "+Object.entries(this.g.vertices).length+" vertices and "+Object.entries(this.g.edges).length+" edges"),this.processGraph=!0,this.processScore(),this.localDataLoaded=!0;for(let t of this.readyCallbacks)t();this.readyCallbacks=[]}}whenReady(r){this.localDataLoaded?r():this.readyCallbacks.push(r)}async publishTrust(r,t=0,n=nu.Key,i,s="nostr"){var y;const o=(y=this.wotPubSub)==null?void 0:y.getTimestamp(),a={from:this.sourceKey,to:r,val:t,entityType:n,context:s,note:i,timestamp:o},{outV:l,inV:u,preVal:f}=await this.setTrust(a,!1);this.addToProcessScoreQueue(l,u),this.processScore();let c=Eke+this.sourceKey+r+s,d=this.submitTrustIndex[c];d||(d=wn.debounce(async w=>{var b;f!=w&&(await((b=rr.wotPubSub)==null?void 0:b.publishTrust(r,w,i,s,n,o)),delete this.submitTrustIndex[c])},3e3),this.submitTrustIndex[c]=d),d(t)}addToProcessScoreQueue(r,t){r.degree>this.maxDegree||(r.degree==this.maxDegree?this.processItems[t.id]=!0:t.entityType==nu.Key?t.degree==this.maxDegree?this.processGraph=!0:this.processGraph=!0:this.processItems[t.id]=!0)}processScore(){let r=this.processGraph;if(this.processGraph)rr.g.calculateScore(rr.sourceId,this.maxDegree);else for(const t in rr.processItems)rr.g.calculateItemScore(parseInt(t)),r=!0;if(r){for(const t in rr.verticeMonitor)rr.callMonitor(parseInt(t));this.processGraph&&rr.updateSubscriptions(),this.processGraph=!1,this.processItems={}}}callMonitor(r){let t=rr.verticeMonitor[r];if(!t)return;let n=this.g.vertices[r];if(!n||!t.hasChanged(n))return;let i=t.clone();t.setScore(n),document.dispatchEvent(new qy(r,i))}addVerticeMonitor(r){let t=this.verticeMonitor[r];t||(t=new V_(r),this.verticeMonitor[r]=t),t.counter++}removeVerticeMonitor(r){let t=this.verticeMonitor[r];t&&(t.counter--,t.counter<=0&&delete this.verticeMonitor[r])}updateSubscriptions(){let r=this.g.getUnsubscribedVertices(this.maxDegree);this.subscribeToTrustEvents(r)}async setTrust(r,t){let{edge:n,preVal:i,change:s}=await this.putEdge(r,t),o=n.out,a=n.in;return{outV:o,inV:a,edge:n,preVal:i,change:s}}async putEdge(r,t){let{from:n,to:i,val:s,entityType:o,context:a,note:l,timestamp:u}=r,f=1,c,d=!1,y=pV.key(f,n,i,a),w=this.g.edges[y];if(w){if(c=w.val,w.timestamp<u||w.val!=s&&w.timestamp==u){let b={timestamp:0};w.val!=s&&(w.val=b.val=s),w.context!=a&&(w.context=b.context=a),w.note!=l&&(w.note=b.note=l),w.timestamp=b.timestamp=u,w.val==0&&t?(await this.db.edges.delete(y),this.g.removeEdge(w),w=void 0):await this.db.edges.update(y,b),d=!0}}else{if(s==0&&t)return{edge:w,preVal:c,change:d};let b=new wke;b.type=f,b.key=y,b.from=n,b.to=i,b.val=s,b.entityType=o,b.context=a,b.note=l,b.timestamp=u,await this.db.edges.put(b),w=this.g.addEdge(b,!1),d=!0}return{edge:w,preVal:c,change:d}}subscribeToTrustEvents(r){if(r.length==0)return;let t=this,n=this.subscriptionsCounter++,i=0;const s=new Array;for(let o of r)i<o.timestamp&&(i=o.timestamp),s.push(qp(o.id));r.forEach(o=>o.subscribed=n),setTimeout(()=>{var o;console.time("Subscribing to trust events"),t.unsubs[n]=(o=t.wotPubSub)==null?void 0:o.subscribeTrust(s,i,t.trustEvent),console.timeEnd("Subscribing to trust events")},1)}unsubscribeAll(){var r,t;for(let n in this.unsubs)(t=(r=this.unsubs)[n])==null||t.call(r)}async trustEvent(r){let t,n,i,s,o,a,l=r.pubkey;if(r.tags)for(const u of r.tags)switch(u[0]){case"p":t=u[1];break;case"c":n=u[1];break;case"d":i=u[1];break;case"v":s=u[1];break;case"t":o=u[1];break}if(a=r.content,t&&i&&s){let u=parseInt(s);if(isNaN(u)||u<-1||u>1)return;console.info(`Trust Event: ${l} -> ${t} = ${u} (${a})`);let f=o?parseInt(o):nu.Item,c=de.toNostrHexAddress(l),d=de.toNostrHexAddress(t),{outV:y,inV:w,change:b}=await rr.setTrust({from:c,to:d,val:u,note:a,context:n,entityType:f,timestamp:r.created_at},!0);b&&(rr.addToProcessScoreQueue(y,w),rr.processScoreDebounce())}}findOption(r,t){if(!t||t.length===0||r.degree==0)return;let n=r.score,{val:i,degree:s,count:o,hasScore:a}=n.resolve();if(!a)return;if(s===1)return i>0?t[t.length-1]:i<0?t[0]:void 0;let l=(i+o)*100/(o*2),u=Math.ceil(l/(100/t.length));return u=u===0?1:u>t.length?t.length:u,t[u-1]}getTrustList(r,t){if(!r)return[];let n=new Array;for(const i in r.in){const s=this.g.getEdge(r.in[i]);let o=this.g.vertices[i];o&&s.val==t&&n.push({outV:o,edge:s})}return n}}const rr=new Ske(_ke,al),G_=(e,r,t)=>{const[n,i]=Me({id:e,options:r,option:t});return St(()=>{if(!e)return;let s=qy.getEventId(e);function o(u){let f=rr.g.vertices[u.id];if(!f)return;let c=rr.findOption(f,r);i(d=>({...d,...u,option:c,vertice:f}))}const a=u=>{let f=u.detail;f.id==e&&o(f)};rr.addVerticeMonitor(e),document.addEventListener(s,a);let l=new qy(e,new V_(e));return l!=null&&l.detail&&o(l.detail),()=>{rr.removeVerticeMonitor(e),document.removeEventListener(s,a)}},[e]),n},kke=e=>{const r=e.hexKey||de.toNostrHexAddress(e.pub)||"",[t,n]=Me(()=>ls.quickProfile(r)),i=G_(vt(r),["badName","neutralName","goodName"],"");return St(()=>ls.getProfile(r,s=>{n(s)}),[e.pub,e.hexKey]),v(lt,{children:[v("span",{className:(t.isDefault?"text-neutral-500":"")+" "+(i==null?void 0:i.option),children:t.name||t.displayName||e.placeholder}),e.hideBadge?"":v(vke,{pub:e.pub,hexKey:r})]})},Er=gi(kke),Tke=5;class WP extends $n{constructor(){super();ce(this,"searchFromServer",wn.debounce(t=>{fetch(`https://eu.rbr.bio/search/${t}.json`).then(n=>{n.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{Re.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(t){if(t.keyCode===38||t.keyCode===40){t.preventDefault();const n=this.state.selected;let i=t.keyCode===40?n+1:n-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){Jt(this.base).find("input").val(""),this.setState({results:[],query:""})}componentDidMount(){var t;De.get("showFollowSuggestions").on(this.inject()),De.get("searchIndexUpdated").on(this.sub(()=>this.search())),De.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),Jt(document).off("keydown").on("keydown",n=>{var i;n.key==="Tab"&&((i=document.activeElement)==null?void 0:i.tagName)==="BODY"?(n.preventDefault(),Jt(this.base).find("input").focus()):n.key==="Escape"&&(this.close(),Jt(this.base).find("input").blur())}),this.props.focus&&((t=Jt(this.base).find("input"))==null||t.focus())}componentDidUpdate(t,n){this.adjustResultsPosition(),t.focus!==this.props.focus&&Jt(this.base).find("input:visible").focus(),t.query!==this.props.query&&this.search(),this.state.selected>=0&&!hV(this.state.results.slice(0,this.state.selected+1),n.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){Jt(document).off("keyup")}adjustResultsPosition(){const t=Jt(this.base).find("input");t.length&&this.setState({offsetLeft:t[0].offsetLeft})}onSubmit(t){t.preventDefault();const n=Jt(this.base).find("input");n.val(""),n.trigger("blur");const i=Jt(this.base).find(".result.selected");i.length&&i[0].click()}preventUpDownDefault(t){(t.keyCode===38||t.keyCode===40)&&t.preventDefault()}search(){let t=this.props.query||Jt(this.base).find("input").first().val()||"";if(t=t.toString().trim().toLowerCase(),!t){this.close();return}if(t.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){Jt(this.base).find("input").first().val("");return}if(this.props.onSelect){if(t.match(/.+@.+\..+/)&&de.getPubKeyByNip05Address(t).then(o=>{var a,l;o&&t===String(this.props.query||Jt(this.base).find("input").first().val())&&((l=(a=this.props).onSelect)==null||l.call(a,{key:o}))}),t.startsWith("https://iris.to/")){const o=t.replace("https://iris.to","");_r(o);return}const n=t.match(/note[a-zA-Z0-9]{59,60}/gi);if(n){_r("/"+n[0]);return}const i=t.match(/npub[a-zA-Z0-9]{59,60}/gi);if(i){_r("/"+i[0]);return}const s=t.split("/profile/");if(s.length>1)return this.props.onSelect({key:s[1]});if(de.toNostrHexAddress(t))return this.props.onSelect({key:t})}if(this.searchFromServer(t),t){const n=_K.search(t).slice(0,Tke);this.setState({results:n,query:t})}else this.setState({results:[],query:t})}onClick(t,n){this.props.onSelect&&(t.preventDefault(),t.stopPropagation(),this.props.onSelect(n)),this.close()}onResultFocus(t,n){this.setState({selected:n})}render(){return v("div",{className:`relative ${this.props.class}`,children:[this.props.resultsOnly?"":v("form",{onSubmit:t=>this.onSubmit(t),children:v("label",{children:v("input",{type:"text",onKeyPress:t=>this.preventUpDownDefault(t),onKeyDown:t=>this.preventUpDownDefault(t),onKeyUp:t=>this.onKeyUp(t),placeholder:he("search"),tabIndex:1,onInput:()=>this.onInput(),className:"input-bordered border-neutral-500 input input-sm w-full"})})}),v("div",{onKeyUp:t=>this.onKeyUp(t),className:`${this.state.query?"":"hidden"} absolute z-20 left-0 mt-2 w-full bg-black border border-neutral-700 rounded shadow-lg`,children:[this.state.query&&!this.props.resultsOnly?v("a",{onFocus:t=>this.onResultFocus(t,-1),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(this.state.selected===-1?"selected bg-neutral-700":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[v("div",{class:"avatar-container",children:v("div",{style:"font-size: 1.5em; width: 40px",children:"🔍"})}),v("div",{children:[v("span",{children:this.state.query}),v("br",{}),v("small",{children:he("search_posts")})]})]}):"",this.state.results.map((t,n)=>{const i=t.item;let s="";i.followers&&(i.followDistance===0?s=he("you"):i.followDistance===1?s=he("following"):s=`${i.followers.size} ${he("followers")}`);const o=de.toNostrBech32Address(i.key,"npub");return v("a",{onFocus:a=>this.onResultFocus(a,n),tabIndex:2,className:"p-2 cursor-pointer flex gap-2 items-center result "+(n===this.state.selected?"selected bg-neutral-700":""),href:`/${o}`,onClick:a=>this.onClick(a,i),children:[i.picture?v(yu,{src:i.picture,className:"rounded-full",width:40}):v(fs,{str:o,width:40},`${o}ic`),v("div",{children:[v(Er,{pub:i.key},i.key+"searchResult"),v("br",{}),v("small",{children:s})]})]})})]})]})}}const qP=(e,r)=>r.indexOf(e.name.slice(-4))!==-1,XE=e=>qP(e,["webm",".mp4",".ogg"]),JE=e=>qP(e,[".mp3",".wav",".m4a"]),Z6=e=>qP(e,[".jpg","jpeg",".gif",".png"]);class Rm extends $n{constructor(){super(...arguments);ce(this,"coverRef",vm());ce(this,"state",{settings:{},player:{},activeFilePath:"",torrent:{},isAudioOpen:!1,showFiles:!1,torrenting:!1,hasNext:!1,splitPath:null,ogImageUrl:""});ce(this,"player");ce(this,"torrent");ce(this,"observer")}componentDidMount(){console.log("componentDidMount torrent"),De.get("player").on(this.sub(n=>{if(this.player=n,this.setState({player:n}),this.torrent&&this.player&&this.player.filePath!==this.state.activeFilePath){const i=this.getActiveFile(this.torrent);i&&this.openFile(i)}}));const t=this.props.showFiles;t&&this.setState({showFiles:t}),De.get("settings").on(this.inject()),(async()=>(this.props.standalone||await De.get("settings").get("enableWebtorrent").once())&&this.startTorrenting())()}componentWillUnmount(){super.componentWillUnmount(),this.observer&&this.observer.disconnect(),delete this.observer}onPlay(t){t.target.muted||De.get("player").get("paused").put(!0)}async startTorrenting(t){this.setState({torrenting:!0});const n=this.props.torrentId,{default:i}=await $r(()=>import("./index-3b8a4aab.js").then(a=>a.i),[]),s=new i,o=s.get(n);o?this.onTorrent(o,t):s.add(n,(a,l)=>l&&!a&&this.onTorrent(l,t))}playAudio(t,n){n&&n.preventDefault(),De.get("player").put({torrentId:this.props.torrentId,filePath:t,paused:!1})}pauseAudio(t){t&&t.preventDefault(),De.get("player").put({paused:!0})}openFile(t,n){const i=this.base,s=XE(t),o=!s&&JE(t);if(this.state.activeFilePath===t.path){if(s){const y=i.querySelector("video");y&&y.play()}else o&&De.get("player").get("paused").put(!1);return}let a;s||(a=t.path.split("/")),this.setState({activeFilePath:t.path,splitPath:a,isAudioOpen:o});let l,u;n?(l=!0,u=!1):(l=s&&this.state.settings.autoplayVideos,u=l);const f=i==null?void 0:i.querySelector(".player");if(f&&(f.innerHTML=""),o&&n&&this.playAudio(t.path),o||t.appendTo(f,{autoplay:l,muted:u}),s&&this.props.autopause){const y=i.querySelector("video"),w=T=>{T.forEach(_=>{_.isIntersecting?l&&(y==null||y.play()):y==null||y.pause()})},b={rootMargin:"0px",threshold:[.25,.75]};this.observer=new IntersectionObserver(w,b),this.observer.observe(y)}const c=i.querySelector(".info");c&&(c.style.display=s?"none":"block");const d=i.querySelector("video, audio");d&&(d.addEventListener("ended",()=>{const y=d.tagName==="VIDEO"?XE:JE;this.openNextFile(y)}),d.onplay=d.onvolumechange=this.onPlay)}getNextIndex(t){const n=this.state.torrent.files,i=n.findIndex(o=>o.path===this.state.activeFilePath);let s=n.findIndex((o,a)=>a>i&&t(o));return s===-1&&(s=n.findIndex(o=>t(o))),s===-1&&(s=i),s}openNextFile(t){const n=this.getNextIndex(t);this.openFile(this.state.torrent.files[n],!0)}getActiveFile(t){const n=this.player;let i;return n&&n.torrentId===this.props.torrentId&&(i=t.files.find(s=>s.path===n.filePath)),i}onTorrent(t,n){if(console.log("onTorrent",this.props.torrentId,t),!this.coverRef.current)return;this.torrent=t;const i=setInterval(()=>{if(!t.files){console.log("no files found in torrent:",t);return}clearInterval(i);const s=t.files.find(f=>XE(f)),o=t.files.find(f=>JE(f)),a=t.files.find(f=>Z6(f)),l=this.getActiveFile(t)||s||o||a||t.files[0];this.setState({torrent:t,cover:a}),l&&this.openFile(l,n);let u=t.files.find(f=>Z6(f)&&(f.name.indexOf("cover")>-1||f.name.indexOf("poster")>-1));u=u||a,u&&u.appendTo(this.coverRef.current)},1e3)}showFilesClicked(t){t.preventDefault(),this.setState({showFiles:!this.state.showFiles})}openTorrentClicked(t){t.preventDefault(),this.startTorrenting(!0)}renderLoadingTorrent(){const t=this.state,n=t.torrent,i=t.player,s=i&&i.torrentId===this.props.torrentId&&!i.paused;let o="";return t.isAudioOpen&&(o=s?v("a",{href:"#",onClick:a=>this.pauseAudio(a),children:eo.pause}):v("a",{href:"#",onClick:a=>this.playAudio(t.activeFilePath,a),children:eo.play})),v(lt,{children:[t.torrenting&&!t.torrent?v("p",{children:"Loading attachment..."}):null,v("div",{className:"cover",ref:this.coverRef,style:t.isAudioOpen?{}:{display:"none"}}),v("div",{className:"info",children:t.splitPath?t.splitPath.map((a,l)=>l===t.splitPath.length-1?(t.isAudioOpen&&(a=a.split(".").slice(0,-1).join(".")),v("p",{children:v("b",{children:a})})):v("p",{children:a})):null}),t.hasNext?v("b",{children:"prev"}):null,v("div",{className:"player",children:o}),t.hasNext?v("b",{children:"next"}):null,this.props.standalone||this.props.preview?v(lt,{children:[v("a",{href:this.props.torrentId,children:"Magnet link"}),n&&n.files?v("a",{href:"",style:{marginLeft:"30px"},onClick:a=>this.showFilesClicked(a),children:he(t.showFiles?"hide_files":"show_files")}):null]}):v(Qt,{href:`/torrent/${encodeURIComponent(this.props.torrentId)}`,children:he("show_files")}),t.showFiles&&n&&n.files?v(lt,{children:[v("p",{children:[he("peers"),": ",n.numPeers]}),v("div",{className:"flex-table details",children:n.files.map(a=>v("div",{onClick:()=>this.openFile(a,!0),className:`flex-row ${t.activeFilePath===a.path?"active":""}`,children:[v("div",{className:"flex-cell",children:a.name}),v("div",{className:"flex-cell no-flex",children:hr.formatBytes(a.length)})]},a.path))})]}):null]})}renderMeta(){const t=this.state,n=t.splitPath&&t.splitPath[t.splitPath.length-1].split(".").slice(0,-1).join(".")||"File sharing",i=`${n} | Iris`,s="Shared files",o=t.isAudioOpen?"music:song":"video.movie";return v(_h,{children:[v("title",{children:n}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:o}),v("meta",{property:"og:title",content:i}),v("meta",{property:"og:description",content:s}),t.ogImageUrl?v("meta",{property:"og:image",content:t.ogImageUrl}):null]})}render(){return v("div",{className:"torrent",children:[this.props.standalone?this.renderMeta():null,!this.state.settings.enableWebtorrent&&!this.state.settings.torrenting&&!this.props.standalone?v("a",{href:"",onClick:t=>this.openTorrentClicked(t),children:he("show_attachment")}):this.renderLoadingTorrent()]})}}const X6=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/;class Y_ extends $n{constructor(){super(...arguments);ce(this,"newMsgRef",vm())}componentDidMount(){const t=Jt(this.newMsgRef.current);if((!hr.isMobile||this.props.forceAutofocusMobile==!0)&&this.props.autofocus!==!1&&t.focus(),!this.props.replyingTo)De.get("channels").get("public").get("msgDraft").once(n=>!t.val()&&t.val(n));else{const n=window.history.state;n&&n["replyTo"+this.props.replyingTo]&&t.val(n["replyTo"+this.props.replyingTo])}}onMsgFormSubmit(t){t.preventDefault(),this.submit()}async submit(){this.props.replyingTo||De.get("channels").get("public").get("msgDraft").put(null);const t=Jt(this.newMsgRef.current),n=t.val();if(!n.length)return;const i={text:n};this.props.replyingTo&&(i.replyingTo=this.props.replyingTo),this.state.attachments&&(i.attachments=this.state.attachments),await this.sendNostr(i),this.props.onSubmit&&this.props.onSubmit(i),this.setState({attachments:void 0,torrentId:void 0}),t.val(""),t.height(""),this.saveDraftToHistory()}setTextareaHeight(t){t.style.height="",t.style.height=`${t.scrollHeight}px`}onMsgTextPaste(t){const n=(t.clipboardData||window.clipboardData).getData("text"),s=/(magnet:\?xt=urn:btih:.*)/gi.exec(n);console.log("magnet match",s),s&&this.setState({torrentId:s[0]})}onKeyUp(t){[37,38,39,40].indexOf(t.keyCode)!=-1&&this.checkMention(t)}onKeyDown(t){(t.metaKey||t.ctrlKey)&&t.key==="Enter"&&this.submit()}saveDraftToHistory(){const t=Jt(this.newMsgRef.current).val(),i={...window.history.state};i["replyTo"+this.props.replyingTo]=t,window.history.replaceState(i,"")}onMsgTextInput(t){this.setTextareaHeight(t.target),this.props.replyingTo||De.get("channels").get("public").get("msgDraft").put(Jt(t.target).val()),this.checkMention(t),this.saveDraftToHistory()}attachFileClicked(t){t.stopPropagation(),t.preventDefault(),Jt(this.base).find(".attachment-input").click()}attachmentsChanged(t){const n=t.target.files||t.dataTransfer.files;if(n){for(let i=0;i<n.length;i++){const s=new FormData;s.append("fileToUpload",n[i]);const o=this.state.attachments||[];o[i]=o[i]||{type:n[i].type},hr.getBase64(n[i]).then(a=>{o[i].data=a,this.setState({attachments:o})}),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:s}).then(async a=>{const l=await a.json();if(console.log("upload response",l),l){o[i].url=l,this.setState({attachments:o});const u=Jt(this.newMsgRef.current),f=u.val();f?u.val(f+`

`+l):u.val(l)}}).catch(a=>{console.error("upload error",a),o[i].error="upload failed",this.setState({attachments:o})})}Jt(t.target).val(null),Jt(this.newMsgRef.current).focus()}}onSelectMention(t){const n=Jt(this.base).find("textarea").get(0),i=n.selectionStart,s=[n.value.slice(0,i).replace(X6,"nostr:"),t.key,n.value.slice(i)].join("");n.value=`${s} `,n.focus(),n.selectionStart=n.selectionEnd=i+t.key.length}render(){const t=this.props.placeholder||(this.props.index==="media"?"type_a_message_or_paste_a_magnet_link":"type_a_message");return Ao`<form
      autocomplete="off"
      class="message-form ${this.props.class||""} public"
      onSubmit=${n=>this.onMsgFormSubmit(n)}
    >
      <input
        name="attachment-input"
        type="file"
        class="hidden attachment-input"
        accept="image/*, video/*, audio/*"
        multiple
        onChange=${n=>this.attachmentsChanged(n)}
      />
      <textarea
        onDragOver=${n=>{n.preventDefault(),n.stopPropagation()}}
        onDrop=${n=>{n.preventDefault(),n.stopPropagation(),this.attachmentsChanged(n)}}
        onKeyUp=${n=>this.onKeyUp(n)}
        onKeyDown=${n=>this.onKeyDown(n)}
        onPaste=${n=>this.onMsgTextPaste(n)}
        onInput=${n=>this.onMsgTextInput(n)}
        onFocus=${()=>this.setState({focused:!0})}
        ref=${this.newMsgRef}
        className="p-2 mt-1 w-full h-12 bg-black focus:ring-blue-500 focus:border-blue-500 block w-full text-lg border-gray-700 rounded-md text-white"
        type="text"
        placeholder="${he(t)}"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="sentences"
        spellcheck="off"
      />
      ${this.state.mentioning?Ao`
            <${WP}
              resultsOnly=${!0}
              query=${this.state.mentioning}
              onSelect=${n=>this.onSelectMention(n)}
            />
          `:""}
      ${this.props.waitForFocus&&!this.state.focused?"":Ao`
            <div className="flex items-center justify-between mt-4">
              <button
                type="button"
                class="attach-file-btn btn"
                onClick=${n=>this.attachFileClicked(n)}
              >
                ${eo.attach}
              </button>
              <button type="submit" className="btn btn-primary">${he("post")}</button>
            </div>
          `}

      <div class="attachment-preview">
        ${this.state.torrentId?Ao` <${Rm} preview=${!0} torrentId=${this.state.torrentId} /> `:""}
        ${this.state.attachments&&this.state.attachments.length?Ao`
              <p>
                <a
                  href=""
                  onClick=${n=>{n.preventDefault(),this.setState({attachments:void 0})}}
                  >${he("remove_attachment")}</a
                >
              </p>
            `:""}
        ${this.state.attachments&&this.state.attachments.map(n=>{var s,o,a;const i=Ao` ${n.error?Ao`<span class="error">${n.error}</span>`:n.url||"uploading..."}`;return(s=n.type)!=null&&s.startsWith("audio")?Ao`
              ${i}
              <audio controls>
                <source src=${n.data} />
              </audio>
            `:(o=n.type)!=null&&o.startsWith("video")?Ao`
              ${i}
              <video controls loop=${!0} autoplay=${!0} muted=${!0}>
                <source src=${n.data} />
              </video>
            `:(a=n.type)!=null&&a.startsWith("image")?Ao`${i} <${yu} src=${n.data} /> `:"unknown attachment type"})}
      </div>
    </form>`}async sendNostr(t){var o,a,l,u;const n={kind:1,content:t.text};if(t.replyingTo){const f=de.toNostrHexAddress(t.replyingTo);if(!f)throw new Error("invalid replyingTo");const c=await new Promise(y=>{Re.getEventById(f,!0,w=>y(w))});n.tags=c.tags.filter(y=>y[0]==="p");let d=(o=c.tags)==null?void 0:o.find(y=>y[0]==="e"&&y[3]==="root");d||(d=(a=c.tags)==null?void 0:a.find(y=>y[0]==="e")),d?(n.tags.unshift(["e",f,"","reply"]),n.tags.unshift(["e",d[1],"","root"])):n.tags.unshift(["e",f,"","root"]),(l=n.tags)!=null&&l.find(y=>y[0]==="p"&&y[1]===c.pubkey)||n.tags.push(["p",c.pubkey])}function i(f,c){var y,w;const d=[...t.text.matchAll(f)].map(b=>b[0]).filter((b,T,_)=>_.indexOf(b)===T);if(d){n.tags=n.tags||[];for(const b of d){const T=(y=b.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:y[0],_=T&&de.toNostrHexAddress(T);if(!_)continue;const A=[c,_,"","mention"];(w=n.tags)!=null&&w.find(x=>x[0]===A[0]&&x[1]===A[1])||n.tags.push(A)}}}i(hr.pubKeyRegex,"p"),i(hr.noteRegex,"e");const s=[...t.text.matchAll(hr.hashtagRegex)].map(f=>f[0].slice(1));if(s.length){n.tags=n.tags||[];for(const f of s)(u=n.tags)!=null&&u.find(c=>c[0]==="t"&&c[1]===f)||n.tags.push(["t",f])}return console.log("sending event",n),Re.publish(n)}checkMention(t){const i=t.target.value.slice(0,t.target.selectionStart).match(X6);if(i){const s=i[0].slice(1);de.toNostrHexAddress(s)||this.setState({mentioning:s})}else this.state.mentioning&&this.setState({mentioning:void 0})}}const{bech32:ol,hex:wa,utf8:Ike}=KW,J6={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},Q6={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},e8={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},t8={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},X0=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],Ake={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},Oke=BigInt("2100000000000000000"),r8=BigInt(1e11),oA={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},gV={};for(let e=0,r=Object.keys(oA);e<r.length;e++){const t=r[e],n=oA[r[e]].toString();gV[n]=t}const Cke={1:e=>wa.encode(ol.fromWordsUnsafe(e)),16:e=>wa.encode(ol.fromWordsUnsafe(e)),13:e=>Ike.encode(ol.fromWordsUnsafe(e)),19:e=>wa.encode(ol.fromWordsUnsafe(e)),23:e=>wa.encode(ol.fromWordsUnsafe(e)),27:e=>wa.encode(ol.fromWordsUnsafe(e)),6:o$,24:o$,3:Nke,5:Rke};function Pke(e){return r=>({tagCode:parseInt(e),words:ol.encode("unknown",r,Number.MAX_SAFE_INTEGER)})}function o$(e){return e.reverse().reduce((r,t,n)=>r+t*Math.pow(32,n),0)}function Nke(e){const r=[];let t,n,i,s,o,a=ol.fromWordsUnsafe(e);for(;a.length>0;)t=wa.encode(a.slice(0,33)),n=wa.encode(a.slice(33,41)),i=parseInt(wa.encode(a.slice(41,45)),16),s=parseInt(wa.encode(a.slice(45,49)),16),o=parseInt(wa.encode(a.slice(49,51)),16),a=a.slice(51),r.push({pubkey:t,short_channel_id:n,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return r}function Rke(e){const r=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;r.length<X0.length*2;)r.push(!1);const t={};X0.forEach((i,s)=>{let o;r[s*2]?o="required":r[s*2+1]?o="supported":o="unsupported",t[i]=o});const n=r.slice(X0.length*2);return t.extra_bits={start_bit:X0.length*2,bits:n,has_required:n.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},t}function yV(e,r){let t,n;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(n),s=t?i*r8/Ake[t]:i*r8;if(t==="p"&&i%BigInt(10)!==BigInt(0)||s>Oke)throw new Error("Amount is outside of valid range");return r?s.toString():s}function Dke(e,r){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const t=[],n=ol.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=n.prefix;let s=n.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});const u=l[1];let f;if(r){if(r.bech32===void 0||r.pubKeyHash===void 0||r.scriptHash===void 0||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");f=r}else switch(u){case J6.bech32:f=J6;break;case Q6.bech32:f=Q6;break;case e8.bech32:f=e8;break;case t8.bech32:f=t8;break}if(!f||f.bech32!==u)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:u,value:f});const c=l[2];let d;if(c){const I=l[3];d=yV(c+I,!0),t.push({name:"amount",letters:l[2]+l[3],value:d})}else d=null;t.push({name:"separator",letters:"1"});const y=o$(s.slice(0,7));s=s.slice(7),t.push({name:"timestamp",letters:o.slice(0,7),value:y}),o=o.slice(7);let w,b,T,_;for(;s.length>0;){const I=s[0].toString();w=gV[I]||"unknown_tag",b=Cke[I]||Pke(I),s=s.slice(1),T=o$(s.slice(0,2)),s=s.slice(2),_=s.slice(0,T),s=s.slice(T),t.push({name:w,tag:o[0],letters:o.slice(0,1+2+T),value:b(_)}),o=o.slice(1+2+T)}t.push({name:"signature",letters:o.slice(0,104),value:wa.encode(ol.fromWordsUnsafe(a))}),o=o.slice(104),t.push({name:"checksum",letters:o});let A={paymentRequest:e,sections:t,get expiry(){let I=t.find(O=>O.name==="expiry");if(I)return x("timestamp")+I.value},get route_hints(){return t.filter(I=>I.name==="route_hint").map(I=>I.value)}};for(let I in oA)I!=="route_hint"&&Object.defineProperty(A,I,{get(){return x(I)}});return A;function x(I){let O=t.find(C=>C.name===I);return O?O.value:void 0}}var Bke={decode:Dke,hrpToMillisat:yV};let Ky;const Mke={USD:"$",EUR:"€",JPY:"¥",SATS:""};let Ac="USD";const n8=navigator.language,Lke=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];Lke.some(e=>n8.startsWith(e))?Ac="EUR":n8.startsWith("ja")&&(Ac="JPY");const mV=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+Ac).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var r,t,n;Ky=parseFloat((n=(t=(r=e==null?void 0:e.result)==null?void 0:r["XXBTZ"+Ac])==null?void 0:t.c)==null?void 0:n[0]),console.log("lastBitcoinPrice",Ky,Ac)}).catch(e=>{console.error("Error:",e)})};De.get("displayCurrency").on(e=>{Ac=e,mV()});setTimeout(()=>{Ky||mV()},1e3);function bV(e){var r,t,n;try{const i=Bke.decode(e),s=i.sections.find(b=>b.name==="amount"),o=s?Number(s.value):void 0,a=i.sections.find(b=>b.name==="timestamp"),l=a?Number(a.value):void 0,u=i.sections.find(b=>b.name==="expiry"),f=u?Number(u.value):void 0,c=(r=i.sections.find(b=>b.name==="description"))==null?void 0:r.value,d=new Uint8Array((t=i.sections.find(b=>b.name==="description_hash"))==null?void 0:t.value),y=new Uint8Array((n=i.sections.find(b=>b.name==="payment_hash"))==null?void 0:n.value),w={amount:o,expire:l&&f?l+f:void 0,timestamp:l,description:c,descriptionHash:d?tI(d):void 0,paymentHash:y?tI(y):void 0,expired:!1};return w.expire&&(w.expired=w.expire<new Date().getTime()/1e3),w}catch(i){console.error(i)}}function Fke(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function jke(e){let r;e>=1||e>=.01?r=2:r=4;const t=Math.pow(10,r);return e=Math.round(e*t)/t,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:r})}function aA(e){if(Ky&&Ac!=="SATS"){const r=e/1e8*Ky,t=jke(r);return Mke[Ac]+" "+t}else return Fke(e)}const zke=gi(({data:e})=>{const r=e.pubkey.startsWith("npub")?e.pubkey:Dc.npubEncode(e.pubkey);return v(Qt,{href:`/${r}`,className:"flex items-center gap-4",children:[v(fs,{str:e.pubkey,width:40}),v("div",{className:"flex flex-col",children:[v(Er,{pub:e.pubkey}),e.text&&v("small",{className:"text-neutral-500",children:e.text})]})]})}),Hke=({event:e,wot:r})=>{var A;const[t,n]=Me(new Set),[i,s]=Me(new Set),[o,a]=Me(new Map),[l,u]=Me(""),[f,c]=Me([]),[d,y]=Me(""),w=(A=r==null?void 0:r.vertice)==null?void 0:A.score,b=w==null?void 0:w.hasTrustScore(),T=w==null?void 0:w.hasDistrustScore();return St(()=>{const x=[],I=g=>{n(new Set(g))},O=g=>{s(new Set(g))},C=g=>{const M=new Map;let B=0;Array.from(g==null?void 0:g.values()).map(q=>Re.db.by("id",q)).forEach(q=>{const Q=q==null?void 0:q.tags.find(X=>X[0]==="bolt11")[1];if(!Q){console.log("Invalid zap, missing bolt11 tag");return}const re=bV(Q),Z=((re==null?void 0:re.amount)||0)/1e3;B+=Z;const j=Re.getZappingUser(q.id);if(j){const X=M.get(j)||0;M.set(j,X+Z)}}),a(M),u(B>0?aA(B):"")};return x.push(Re.getLikes(e.id,I)),x.push(Re.getReposts(e.id,O)),x.push(Re.getZaps(e.id,C)),()=>{x.forEach(g=>g())}},[e]),t.size>0||i.size>0||o.size>0?v(lt,{children:[v("hr",{className:"-mx-2 opacity-10 mt-2"}),f.length>0&&v(Eu,{showContainer:!0,onClose:()=>c([]),children:[v("div",{className:"flex items-center justify-between mb-4",children:v("h2",{className:"text-xl font-bold",children:d})}),v("div",{className:"flex flex-col gap-4 overflow-y-scroll max-h-[50vh] w-96",children:f.map(x=>v(zke,{data:x},x.pubkey))})]}),v("div",{className:"flex items-center gap-4 py-2",children:[t.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(t).map(I=>({pubkey:I}));c(x),y("Liked by")},className:"cursor-pointer hover:underline",children:[t.size," ",v("span",{className:"text-neutral-500",children:"Likes"})]})}),i.size>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=Array.from(i).map(I=>({pubkey:I}));c(x),y("Reposted by")},className:"cursor-pointer hover:underline",children:[i.size," ",v("span",{className:"text-neutral-500",children:"Reposts"})]})}),(o==null?void 0:o.size)>0&&v("div",{className:"flex-shrink-0",children:v("a",{onClick:()=>{const x=[],I=[...o.entries()].sort((O,C)=>C[1]-O[1]);for(const[O,C]of I)x.push({pubkey:O,text:aA(C)});c(x),y("Zapped by")},className:"cursor-pointer hover:underline",children:[o.size," ",v("span",{className:"text-neutral-500",children:"Zaps"}),l&&v("small",{className:"text-neutral-500",children:[" (",l,")"]})]})}),b&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:v("a",{onClick:()=>{const I=rr.getTrustList(r==null?void 0:r.vertice,1).map(({outV:O,edge:C})=>({pubkey:O.key,text:C.note}));c(I),y("Trusted by")},className:"cursor-pointer hover:underline",children:[w.renderTrustCount()," ",v("span",{className:"text-neutral-500",children:"Trusts"})]})}),T&&v("div",{className:"flex-shrink-0",title:"Degree 0/1/2",children:v("a",{onClick:()=>{const I=rr.getTrustList(r==null?void 0:r.vertice,-1).map(({outV:O,edge:C})=>({pubkey:O.key,text:C.note}));c(I),y("Distrusted by")},className:"cursor-pointer hover:underline",children:[w.renderDistrustCount()," ",v("span",{className:"text-neutral-500",children:"Distrusts"})]})})]}),v("hr",{className:"-mx-2 opacity-10 mb-2"})]}):null};function a$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M19.42 4.44994C19.3203 4.38116 19.2053 4.3379 19.085 4.32395C18.9647 4.31 18.8428 4.32579 18.73 4.36994C17.5425 4.8846 16.2857 5.22155 15 5.36994C14.1879 5.15273 13.4127 4.81569 12.7 4.36994C11.7802 3.80143 10.763 3.40813 9.7 3.20994C8.41 3.08994 5.34 4.09994 4.7 4.30994C4.55144 4.36012 4.42234 4.4556 4.33086 4.58295C4.23938 4.71031 4.19012 4.86314 4.19 5.01994V19.9999C4.19 20.1989 4.26902 20.3896 4.40967 20.5303C4.55032 20.6709 4.74109 20.7499 4.94 20.7499C5.13891 20.7499 5.32968 20.6709 5.47033 20.5303C5.61098 20.3896 5.69 20.1989 5.69 19.9999V14.1399C6.93659 13.6982 8.23315 13.4127 9.55 13.2899C10.3967 13.4978 11.2062 13.8351 11.95 14.2899C12.8201 14.8218 13.7734 15.2038 14.77 15.4199H15C16.4474 15.2326 17.8633 14.8526 19.21 14.2899C19.3506 14.2342 19.4713 14.1379 19.5568 14.0132C19.6423 13.8885 19.6887 13.7411 19.69 13.5899V5.06994C19.6975 4.95258 19.6769 4.83512 19.63 4.7273C19.583 4.61947 19.511 4.5244 19.42 4.44994Z"})})}function l$({size:e=18,fill:r="none",stroke:t="black"}){return v("svg",{height:e,width:e,fill:r,stroke:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[v("g",{"clip-path":"url(#clip0)",children:[v("path",{d:"M42 20V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6H30","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 20L26 28L41 7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]}),v("defs",{children:v("clipPath",{id:"clip0",children:v("rect",{width:"48",height:"48",fill:"white"})})})]})}const Uke=({event:e})=>{const[r,t]=Me({likes:0,liked:!1,likedBy:new Set});St(()=>{const o=et.getProfile(e.pubkey,l=>{}),a=Re.getLikes(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=de.getPubKey();t(l=>({...l,likes:o.size,liked:o.has(a),likedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.liked)},s=(o=!0)=>{if(o){const a=e.pubkey,l=de.toNostrHexAddress(e.id);l&&Re.publish({kind:7,content:"+",tags:[["e",l],["p",a]]})}};return v("a",{className:`btn-ghost btn-sm justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${r.liked?"text-iris-red":"hover:text-iris-red text-neutral-500"}`,onClick:o=>i(o),children:[r.liked?v(v3,{width:18}):v(xH,{width:18}),r.likes||""]})},Wke=({event:e})=>{const[r,t]=Me({reposts:0,reposted:!1,repostedBy:new Set});St(()=>{const o=et.getProfile(e.pubkey,l=>{}),a=Re.getReposts(e.id,n);return()=>{o(),a()}},[e]);const n=o=>{const a=de.getPubKey();t(l=>({...l,reposts:o.size,reposted:o.has(a),repostedBy:o}))},i=o=>{o.preventDefault(),o.stopPropagation(),s(!r.reposted)},s=(o=!0)=>{if(o){const a=e.pubkey,l=de.toNostrHexAddress(e.id);l&&Re.publish({kind:6,tags:[["e",l,"","mention"],["p",a]],content:""})}};return v("a",{className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none ${r.reposted?"text-iris-green":"hover:text-iris-green text-neutral-500"}`,onClick:o=>i(o),children:[v($H,{width:18}),r.reposts||""]})},qke="payRequest";var lA=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(lA||{});class If extends Error{constructor(t,n){super(n);ce(this,"code");this.code=t}}var $c,Es,s_,wV;class Kke{constructor(r){yn(this,s_);yn(this,$c,void 0);yn(this,Es,void 0);if(r=r.toLowerCase().trim(),r.startsWith("lnurl")){const t=hr.bech32ToText(r);if(!t.startsWith("http"))throw new If(2,"Not a url");Id(this,$c,new URL(t))}else if(r.match(/[\w.-]+@[\w.-]/)){const[t,n]=r.split("@");Id(this,$c,new URL(`https://${n}/.well-known/lnurlp/${t}`))}else if(r.startsWith("https:"))Id(this,$c,new URL(r));else if(r.startsWith("lnurlp:")){const t=new URL(r);t.protocol="https:",Id(this,$c,t)}else throw new If(2,"Could not determine service url")}async load(){const r=await fetch(Eo(this,$c).toString());r.ok&&(Id(this,Es,await r.json()),Jn(this,s_,wV).call(this))}async getInvoice(r,t,n){var l,u,f;const i=new URL(hr.unwrap((l=Eo(this,Es))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(c=>{const d=c.split("=");s.set(d[0],d[1])}),s.set("amount",Math.floor(r*1e3).toString()),t&&((u=Eo(this,Es))!=null&&u.commentAllowed)&&s.set("comment",t),(f=Eo(this,Es))!=null&&f.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(c=>`${c[0]}=${encodeURIComponent(c[1])}`).join("&");try{const c=await fetch(`${o}?${a}`);if(c.ok){const d=await c.json();if(console.debug("[LNURL]: ",d),d.status==="ERROR")throw new Error(d.reason);return d}else throw new If(1,`Failed to fetch invoice (${c.statusText})`)}catch{throw new If(1,"Failed to load callback")}}get canZap(){var r;return!!((r=Eo(this,Es))!=null&&r.nostrPubkey)}get zapperPubkey(){var r;return(r=Eo(this,Es))==null?void 0:r.nostrPubkey}get maxCommentLength(){var r;return((r=Eo(this,Es))==null?void 0:r.commentAllowed)??0}get min(){var r;return((r=Eo(this,Es))==null?void 0:r.minSendable)??1e3}get max(){var r;return((r=Eo(this,Es))==null?void 0:r.maxSendable)??1e11}}$c=new WeakMap,Es=new WeakMap,s_=new WeakSet,wV=function(){var r,t;if(((r=Eo(this,Es))==null?void 0:r.tag)!==qke)throw new If(2,"Only LNURLp is supported");if(!((t=Eo(this,Es))!=null&&t.callback))throw new If(2,"No callback url")};const Hi=({copyStr:e,text:r,className:t})=>{const[n,i]=Me(!1),[s,o]=Me(void 0),[a,l]=Me(void 0),u=(d,y)=>{if(d.target===null)return;hr.copyToClipboard(y);const w=d.target,b=w.offsetWidth;b!==void 0&&(o(s||b+1),w.style.width=`${s}px`,i(!0),a!==void 0&&clearTimeout(a),l(setTimeout(()=>i(!1),2e3)))},f=d=>{d.preventDefault();const y=typeof e=="function"?e():e;u(d,y)};St(()=>()=>{a&&clearTimeout(a)},[a]);const c=n?he("copied"):r||he("copy");return v("button",{className:t||"btn",onClick:d=>f(d),children:c})};var Xd;(function(){function e(x){this.mode=u.MODE_8BIT_BYTE,this.data=x,this.parsedData=[];for(var I=[],O=0,C=this.data.length;C>O;O++){var g=this.data.charCodeAt(O);g>65536?(I[0]=240|(1835008&g)>>>18,I[1]=128|(258048&g)>>>12,I[2]=128|(4032&g)>>>6,I[3]=128|63&g):g>2048?(I[0]=224|(61440&g)>>>12,I[1]=128|(4032&g)>>>6,I[2]=128|63&g):g>128?(I[0]=192|(1984&g)>>>6,I[1]=128|63&g):I[0]=g,this.parsedData=this.parsedData.concat(I)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(x,I){this.typeNumber=x,this.errorCorrectLevel=I,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function t(x,I){if(x.length==null)throw new Error(x.length+"/"+I);for(var O=0;O<x.length&&x[O]==0;)O++;this.num=new Array(x.length-O+I);for(var C=0;C<x.length-O;C++)this.num[C]=x[C+O]}function n(x,I){this.totalCount=x,this.dataCount=I}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function o(){var x=!1,I=navigator.userAgent,O;return/android/i.test(I)&&(x=!0,O=I.toString().match(/android ([0-9]\.[0-9])/i),O&&O[1]&&(x=parseFloat(O[1]))),x}function a(x,I){for(var O=1,C=l(x),g=0,M=b.length;M>=g;g++){var B=0;switch(I){case f.L:B=b[g][0];break;case f.M:B=b[g][1];break;case f.Q:B=b[g][2];break;case f.H:B=b[g][3]}if(B>=C)break;O++}if(O>b.length)throw new Error("Too long data");return O}function l(x){var I=encodeURI(x).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return I.length+(I.length!=x?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(x){for(var I=0,O=this.parsedData.length;O>I;I++)x.put(this.parsedData[I],8)}},r.prototype={addData:function(x){var I=new e(x);this.dataList.push(I),this.dataCache=null},isDark:function(x,I){if(0>x||this.moduleCount<=x||0>I||this.moduleCount<=I)throw new Error(x+","+I);return this.modules[x][I]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(x,I){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var O=0;O<this.moduleCount;O++){this.modules[O]=new Array(this.moduleCount);for(var C=0;C<this.moduleCount;C++)this.modules[O][C]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(x,I),this.typeNumber>=7&&this.setupTypeNumber(x),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,I)},setupPositionProbePattern:function(x,I){for(var O=-1;7>=O;O++)if(!(-1>=x+O||this.moduleCount<=x+O))for(var C=-1;7>=C;C++)-1>=I+C||this.moduleCount<=I+C||(this.modules[x+O][I+C]=O>=0&&6>=O&&(C==0||C==6)||C>=0&&6>=C&&(O==0||O==6)||O>=2&&4>=O&&C>=2&&4>=C)},getBestMaskPattern:function(){for(var x=0,I=0,O=0;8>O;O++){this.makeImpl(!0,O);var C=d.getLostPoint(this);(O==0||x>C)&&(x=C,I=O)}return I},createMovieClip:function(x,I,O){var C=x.createEmptyMovieClip(I,O),g=1;this.make();for(var M=0;M<this.modules.length;M++)for(var B=M*g,L=0;L<this.modules[M].length;L++){var q=L*g,Q=this.modules[M][L];Q&&(C.beginFill(0,100),C.moveTo(q,B),C.lineTo(q+g,B),C.lineTo(q+g,B+g),C.lineTo(q,B+g),C.endFill())}return C},setupTimingPattern:function(){for(var x=8;x<this.moduleCount-8;x++)this.modules[x][6]==null&&(this.modules[x][6]=x%2==0);for(var I=8;I<this.moduleCount-8;I++)this.modules[6][I]==null&&(this.modules[6][I]=I%2==0)},setupPositionAdjustPattern:function(){for(var x=d.getPatternPosition(this.typeNumber),I=0;I<x.length;I++)for(var O=0;O<x.length;O++){var C=x[I],g=x[O];if(this.modules[C][g]==null)for(var M=-2;2>=M;M++)for(var B=-2;2>=B;B++)this.modules[C+M][g+B]=M==-2||M==2||B==-2||B==2||M==0&&B==0}},setupTypeNumber:function(x){for(var I=d.getBCHTypeNumber(this.typeNumber),O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[Math.floor(O/3)][O%3+this.moduleCount-8-3]=C}for(var O=0;18>O;O++){var C=!x&&(1&I>>O)==1;this.modules[O%3+this.moduleCount-8-3][Math.floor(O/3)]=C}},setupTypeInfo:function(x,I){for(var O=this.errorCorrectLevel<<3|I,C=d.getBCHTypeInfo(O),g=0;15>g;g++){var M=!x&&(1&C>>g)==1;6>g?this.modules[g][8]=M:8>g?this.modules[g+1][8]=M:this.modules[this.moduleCount-15+g][8]=M}for(var g=0;15>g;g++){var M=!x&&(1&C>>g)==1;8>g?this.modules[8][this.moduleCount-g-1]=M:9>g?this.modules[8][15-g-1+1]=M:this.modules[8][15-g-1]=M}this.modules[this.moduleCount-8][8]=!x},mapData:function(x,I){for(var O=-1,C=this.moduleCount-1,g=7,M=0,B=this.moduleCount-1;B>0;B-=2)for(B==6&&B--;;){for(var L=0;2>L;L++)if(this.modules[C][B-L]==null){var q=!1;M<x.length&&(q=(1&x[M]>>>g)==1);var Q=d.getMask(I,C,B-L);Q&&(q=!q),this.modules[C][B-L]=q,g--,g==-1&&(M++,g=7)}if(C+=O,0>C||this.moduleCount<=C){C-=O,O=-O;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(x,I,O){for(var C=n.getRSBlocks(x,I),g=new i,M=0;M<O.length;M++){var B=O[M];g.put(B.mode,4),g.put(B.getLength(),d.getLengthInBits(B.mode,x)),B.write(g)}for(var L=0,M=0;M<C.length;M++)L+=C[M].dataCount;if(g.getLengthInBits()>8*L)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*L+")");for(g.getLengthInBits()+4<=8*L&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*L||(g.put(r.PAD0,8),g.getLengthInBits()>=8*L));)g.put(r.PAD1,8);return r.createBytes(g,C)},r.createBytes=function(x,I){for(var O=0,C=0,g=0,M=new Array(I.length),B=new Array(I.length),L=0;L<I.length;L++){var q=I[L].dataCount,Q=I[L].totalCount-q;C=Math.max(C,q),g=Math.max(g,Q),M[L]=new Array(q);for(var re=0;re<M[L].length;re++)M[L][re]=255&x.buffer[re+O];O+=q;var Z=d.getErrorCorrectPolynomial(Q),j=new t(M[L],Z.getLength()-1),X=j.mod(Z);B[L]=new Array(Z.getLength()-1);for(var re=0;re<B[L].length;re++){var ie=re+X.getLength()-B[L].length;B[L][re]=ie>=0?X.get(ie):0}}for(var Ee=0,re=0;re<I.length;re++)Ee+=I[re].totalCount;for(var $e=new Array(Ee),Pe=0,re=0;C>re;re++)for(var L=0;L<I.length;L++)re<M[L].length&&($e[Pe++]=M[L][re]);for(var re=0;g>re;re++)for(var L=0;L<I.length;L++)re<B[L].length&&($e[Pe++]=B[L][re]);return $e};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},f={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(x){for(var I=x<<10;d.getBCHDigit(I)-d.getBCHDigit(d.G15)>=0;)I^=d.G15<<d.getBCHDigit(I)-d.getBCHDigit(d.G15);return(x<<10|I)^d.G15_MASK},getBCHTypeNumber:function(x){for(var I=x<<12;d.getBCHDigit(I)-d.getBCHDigit(d.G18)>=0;)I^=d.G18<<d.getBCHDigit(I)-d.getBCHDigit(d.G18);return x<<12|I},getBCHDigit:function(x){for(var I=0;x!=0;)I++,x>>>=1;return I},getPatternPosition:function(x){return d.PATTERN_POSITION_TABLE[x-1]},getMask:function(x,I,O){switch(x){case c.PATTERN000:return(I+O)%2==0;case c.PATTERN001:return I%2==0;case c.PATTERN010:return O%3==0;case c.PATTERN011:return(I+O)%3==0;case c.PATTERN100:return(Math.floor(I/2)+Math.floor(O/3))%2==0;case c.PATTERN101:return I*O%2+I*O%3==0;case c.PATTERN110:return(I*O%2+I*O%3)%2==0;case c.PATTERN111:return(I*O%3+(I+O)%2)%2==0;default:throw new Error("bad maskPattern:"+x)}},getErrorCorrectPolynomial:function(x){for(var I=new t([1],0),O=0;x>O;O++)I=I.multiply(new t([1,y.gexp(O)],0));return I},getLengthInBits:function(x,I){if(I>=1&&10>I)switch(x){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+x)}else if(27>I)switch(x){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+x)}else{if(!(41>I))throw new Error("type:"+I);switch(x){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+x)}}},getLostPoint:function(x){for(var I=x.getModuleCount(),O=0,C=0;I>C;C++)for(var g=0;I>g;g++){for(var M=0,B=x.isDark(C,g),L=-1;1>=L;L++)if(!(0>C+L||C+L>=I))for(var q=-1;1>=q;q++)0>g+q||g+q>=I||(L!=0||q!=0)&&B==x.isDark(C+L,g+q)&&M++;M>5&&(O+=3+M-5)}for(var C=0;I-1>C;C++)for(var g=0;I-1>g;g++){var Q=0;x.isDark(C,g)&&Q++,x.isDark(C+1,g)&&Q++,x.isDark(C,g+1)&&Q++,x.isDark(C+1,g+1)&&Q++,(Q==0||Q==4)&&(O+=3)}for(var C=0;I>C;C++)for(var g=0;I-6>g;g++)x.isDark(C,g)&&!x.isDark(C,g+1)&&x.isDark(C,g+2)&&x.isDark(C,g+3)&&x.isDark(C,g+4)&&!x.isDark(C,g+5)&&x.isDark(C,g+6)&&(O+=40);for(var g=0;I>g;g++)for(var C=0;I-6>C;C++)x.isDark(C,g)&&!x.isDark(C+1,g)&&x.isDark(C+2,g)&&x.isDark(C+3,g)&&x.isDark(C+4,g)&&!x.isDark(C+5,g)&&x.isDark(C+6,g)&&(O+=40);for(var re=0,g=0;I>g;g++)for(var C=0;I>C;C++)x.isDark(C,g)&&re++;var Z=Math.abs(100*re/I/I-50)/5;return O+=10*Z}},y={glog:function(x){if(1>x)throw new Error("glog("+x+")");return y.LOG_TABLE[x]},gexp:function(x){for(;0>x;)x+=255;for(;x>=256;)x-=255;return y.EXP_TABLE[x]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},w=0;8>w;w++)y.EXP_TABLE[w]=1<<w;for(var w=8;256>w;w++)y.EXP_TABLE[w]=y.EXP_TABLE[w-4]^y.EXP_TABLE[w-5]^y.EXP_TABLE[w-6]^y.EXP_TABLE[w-8];for(var w=0;255>w;w++)y.LOG_TABLE[y.EXP_TABLE[w]]=w;t.prototype={get:function(x){return this.num[x]},getLength:function(){return this.num.length},multiply:function(x){for(var I=new Array(this.getLength()+x.getLength()-1),O=0;O<this.getLength();O++)for(var C=0;C<x.getLength();C++)I[O+C]^=y.gexp(y.glog(this.get(O))+y.glog(x.get(C)));return new t(I,0)},mod:function(x){if(this.getLength()-x.getLength()<0)return this;for(var I=y.glog(this.get(0))-y.glog(x.get(0)),O=new Array(this.getLength()),C=0;C<this.getLength();C++)O[C]=this.get(C);for(var C=0;C<x.getLength();C++)O[C]^=y.gexp(y.glog(x.get(C))+I);return new t(O,0).mod(x)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(x,I){var O=n.getRsBlockTable(x,I);if(O==null)throw new Error("bad rs block @ typeNumber:"+x+"/errorCorrectLevel:"+I);for(var C=O.length/3,g=[],M=0;C>M;M++)for(var B=O[3*M+0],L=O[3*M+1],q=O[3*M+2],Q=0;B>Q;Q++)g.push(new n(L,q));return g},n.getRsBlockTable=function(x,I){switch(I){case f.L:return n.RS_BLOCK_TABLE[4*(x-1)+0];case f.M:return n.RS_BLOCK_TABLE[4*(x-1)+1];case f.Q:return n.RS_BLOCK_TABLE[4*(x-1)+2];case f.H:return n.RS_BLOCK_TABLE[4*(x-1)+3];default:return}},i.prototype={get:function(x){var I=Math.floor(x/8);return(1&this.buffer[I]>>>7-x%8)==1},put:function(x,I){for(var O=0;I>O;O++)this.putBit((1&x>>>I-O-1)==1)},getLengthInBits:function(){return this.length},putBit:function(x){var I=Math.floor(this.length/8);this.buffer.length<=I&&this.buffer.push(0),x&&(this.buffer[I]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],T=function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){function O(re,Z){var j=document.createElementNS("http://www.w3.org/2000/svg",re);for(var X in Z)Z.hasOwnProperty(X)&&j.setAttribute(X,Z[X]);return j}var C=this._htOption,g=this._el,M=I.getModuleCount();Math.floor(C.width/M),Math.floor(C.height/M),this.clear();var B=O("svg",{viewBox:"0 0 "+String(M)+" "+String(M),width:"100%",height:"100%",fill:C.colorLight});B.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),g.appendChild(B),B.appendChild(O("rect",{fill:C.colorDark,width:"1",height:"1",id:"template"}));for(var L=0;M>L;L++)for(var q=0;M>q;q++)if(I.isDark(L,q)){var Q=O("use",{x:String(L),y:String(q)});Q.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),B.appendChild(Q)}},x.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},x}(),_=document.documentElement.tagName.toLowerCase()==="svg",A=_?T:s()?function(){function x(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function I(M,B){var L=this;if(L._fFail=B,L._fSuccess=M,L._bSupportDataURI===null){var q=document.createElement("img"),Q=function(){L._bSupportDataURI=!1,L._fFail&&_fFail.call(L)},re=function(){L._bSupportDataURI=!0,L._fSuccess&&L._fSuccess.call(L)};return q.onabort=Q,q.onerror=Q,q.onload=re,q.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}L._bSupportDataURI===!0&&L._fSuccess?L._fSuccess.call(L):L._bSupportDataURI===!1&&L._fFail&&L._fFail.call(L)}if(this&&this._android&&this._android<=2.1){var O=1/window.devicePixelRatio,C=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(M,B,L,q,Q,re,Z,j){if("nodeName"in M&&/img/i.test(M.nodeName))for(var X=arguments.length-1;X>=1;X--)arguments[X]=arguments[X]*O;else typeof j>"u"&&(arguments[1]*=O,arguments[2]*=O,arguments[3]*=O,arguments[4]*=O);C.apply(this,arguments)}}var g=function(M,B){this._bIsPainted=!1,this._android=o(),this._htOption=B,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=B.width,this._elCanvas.height=B.height,M.appendChild(this._elCanvas),this._el=M,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return g.prototype.draw=function(M){var B=this._elImage,L=this._oContext,q=this._htOption,Q=M.getModuleCount(),re=q.width/Q,Z=q.height/Q,j=Math.round(re),X=Math.round(Z);B.style.display="none",this.clear();for(var ie=0;Q>ie;ie++)for(var Ee=0;Q>Ee;Ee++){var $e=M.isDark(ie,Ee),Pe=Ee*re,He=ie*Z;L.strokeStyle=$e?q.colorDark:q.colorLight,L.lineWidth=1,L.fillStyle=$e?q.colorDark:q.colorLight,L.fillRect(Pe,He,re,Z),L.strokeRect(Math.floor(Pe)+.5,Math.floor(He)+.5,j,X),L.strokeRect(Math.ceil(Pe)-.5,Math.ceil(He)-.5,j,X)}this._bIsPainted=!0},g.prototype.makeImage=function(){this._bIsPainted&&I.call(this,x)},g.prototype.isPainted=function(){return this._bIsPainted},g.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},g.prototype.round=function(M){return M&&Math.floor(1e3*M)/1e3},g}():function(){var x=function(I,O){this._el=I,this._htOption=O};return x.prototype.draw=function(I){for(var O=this._htOption,C=this._el,g=I.getModuleCount(),M=Math.floor(O.width/g),B=Math.floor(O.height/g),L=['<table style="border:0;border-collapse:collapse;">'],q=0;g>q;q++){L.push("<tr>");for(var Q=0;g>Q;Q++)L.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+B+"px;background-color:"+(I.isDark(q,Q)?O.colorDark:O.colorLight)+';"></td>');L.push("</tr>")}L.push("</table>"),C.innerHTML=L.join("");var re=C.childNodes[0],Z=(O.width-re.offsetWidth)/2,j=(O.height-re.offsetHeight)/2;Z>0&&j>0&&(re.style.margin=j+"px "+Z+"px")},x.prototype.clear=function(){this._el.innerHTML=""},x}();Xd=function(x,I){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.H},typeof I=="string"&&(I={text:I}),I)for(var O in I)this._htOption[O]=I[O];typeof x=="string"&&(x=document.getElementById(x)),this._android=o(),this._el=x,this._oQRCode=null,this._oDrawing=new A(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},Xd.prototype.makeCode=function(x){this._oQRCode=new r(a(x,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(x),this._oQRCode.make(),this._el.title=x,this._oDrawing.draw(this._oQRCode),this.makeImage()},Xd.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},Xd.prototype.clear=function(){this._oDrawing.clear()},Xd.CorrectLevel=f})();const i8=Xd;function KP(e){const r=vm();return St(()=>{r.current&&new i8(r.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i8.CorrectLevel.H})},[e.data]),v("div",{style:"border: 5px solid white; display: inline-block;",ref:r})}function Vke(e,r){const t=[];let n=0,i=e.length/r;for(;i>0;)t.push(e.slice(n,n+r)),n+=r,i-=1;return t}const Gke=_n.span`
  color: var(--text-color);
  display: inline-block;
  cursor: pointer;
  padding: 10px;
  border-radius: 100px;
  margin: 5px;
  border: 1px solid transparent;
  background: var(--body-bg);
  &.active {
    background: var(--notify);
  }
`,Yke=_n.div`
  background-color: var(--msg-content-background);
  border-radius: 8px;
  padding: 30px;
  width: 400px;
  color: var(--text-color);
  position: relative;
`,Zke=_n.div`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: var(--text-color);
`;function Xke(e){const r=e.onClose||(()=>{}),{note:t,recipient:n}=e,i=1e3,s=[i,5e3,1e4,2e4,5e4,1e5,1e6],o={1e3:"👍",5e3:"💜",1e4:"😍",2e4:"🤩",5e4:"🔥",1e5:"🚀",1e6:"🤯"},[a,l]=Me(),[u,f]=Me(e.invoice),[c,d]=Me(i),[y,w]=Me(),[b,T]=Me(),[_,A]=Me(),[x,I]=Me(),[O,C]=Me(1),[g,M]=Me(!1),[B,L]=Me(!1),q=a?B&&O!==4||a.maxCommentLength>0:!1;St(()=>{De.get("defaultZapAmount").on(_e=>{const ge=parseInt(_e);d(ge),w(ge),console.log("defaultZapAmount",ge)})}),St(()=>{e.show&&(I(void 0),d(i),T(void 0),C(1),f(void 0),A(void 0))},[e.show]),St(()=>{_&&!_.url&&setTimeout(()=>{r()},1e3)},[_]),St(()=>{if(e.lnurl&&e.show)try{const _e=new Kke(e.lnurl);l(_e),_e.load().then(()=>{L(_e.canZap)}).catch(ge=>X(ge,"ln url error"))}catch(_e){_e instanceof Error&&I(_e.message)}},[e.lnurl,e.show]);const Q=pu(()=>{if(a){const _e=a.min/1e3,ge=a.max/1e3;return s.filter(Te=>Te>=_e&&Te<=ge)}return[]},[a]),re=pu(()=>Vke(Q,3),[Q]),Z=_e=>{I(void 0),d(_e)};async function j(){if(!c||!a)return null;let _e;if(n&&O!==4){let ge={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:de.getPubKey(),content:b||"",tags:[["e",t],["p",n],["relays",...sn.relays.keys()]]};const Te=Re.getEventHash(ge);ge.id=Te;const je=await de.sign(ge);ge={...ge,sig:je},console.log("loadInvoice",ge),ge&&(_e=ge)}try{const ge=await a.getInvoice(c,b,_e);ge.pr&&(f(ge.pr),await Ee(ge))}catch(ge){X(ge,"invoice fail")}}function X(_e,ge){if(console.error("lnurl error",_e),_e instanceof If)switch(_e.code){case lA.ServiceUnavailable:{I("messages.LNURLFail");return}case lA.InvalidLNURL:{I("messages.InvalidLNURL");return}}I(ge)}function ie(){if(!a)return null;const _e=a.min/1e3,ge=a.max/1e3;return v("div",{className:"custom-amount flex",children:[v("input",{type:"number",min:_e,max:ge,className:"f-grow mr-10 input",placeholder:"Custom",value:y,onChange:Te=>w(parseInt(Te.target.value))}),v("button",{className:"btn btn-neutral",type:"button",disabled:!y,onClick:()=>Z(y??0),children:"Confirm"})]})}async function Ee(_e){var ge;try{if(window.webln){M(!0),await window.webln.enable();const Te=await((ge=window.webln)==null?void 0:ge.sendPayment((_e==null?void 0:_e.pr)??""));console.log(Te),A((_e==null?void 0:_e.successAction)??{})}}catch(Te){console.warn(Te),Te instanceof Error&&I(Te.toString())}finally{M(!1)}}function $e(_e,ge){return v("div",{className:"amounts",children:ge.map(Te=>v(Gke,{className:_e===Te?"active":"",onClick:()=>Z(Te),children:[o[Te]&&v(lt,{children:[o[Te]," "]}),hr.formatAmount(Te,0)]},Te))})}function Pe(){return!a||u?null:v(lt,{children:[v("h3",{children:"Zap amount in sats"}),re.map(_e=>$e(c,_e)),ie(),v("div",{className:"flex",children:q&&v("input",{className:"input",type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:B&&O!==4?250:a.maxCommentLength,onChange:_e=>T(_e.target.value)})}),(c??0)>0&&v("div",{style:"margin-top: 10px;",children:v("button",{class:"btn btn-primary",width:"100%",onClick:()=>j(),children:["Send ",hr.formatAmount(c,0)," sats"]})})]})}function He(){return _||!u?null:v(lt,{children:v("div",{className:"invoice",children:[e.notice&&v("b",{className:"error",children:e.notice}),g?v("h4",{children:"Paying"}):"",v("div",{className:"actions",children:u&&v(lt,{children:[v(KP,{data:u,link:`lightning:${u}`}),v("div",{style:"margin-top: 15px",children:[v(Hi,{copyStr:u,text:"Copy invoice"}),v("a",{className:"button",href:`lightning:${u}`,children:"Open wallet"})]})]})})]})})}function Ve(){return _?v("div",{className:"success-action",children:[v("p",{className:"paid",children:(_==null?void 0:_.description)??"Paid"}),_.url&&v("p",{children:v("a",{href:_.url,rel:"noreferrer",target:"_blank",children:_.url})})]}):null}const it=a!=null&&a.canZap?"Send zap to ":"Send sats to ";return e.show??!1?v(Eu,{showContainer:!0,centerVertically:!0,onClose:r,children:v(Yke,{children:v("div",{className:"lnurl-tip",onClick:_e=>_e.stopPropagation(),children:[v(Zke,{className:"close",onClick:r,children:v(OH,{width:20,height:20})}),v("div",{className:"lnurl-header",children:v("h2",{children:[e.title||it,v(Er,{pub:n||""})]})}),Pe(),x&&v("p",{className:"error",children:x}),He(),Ve()]})})}):null}const Jke=({event:e})=>{const[r,t]=Me({totalZapAmount:0,formattedZapAmount:"",zapped:!1,showZapModal:!1,lightning:void 0});St(()=>{const i=et.getProfile(e.pubkey,o=>{if(!o)return;const a=o.lud16||o.lud06;t(l=>({...l,lightning:a}))}),s=Re.getZaps(e.id,n);return()=>{i(),s()}},[e]);const n=wn.debounce(i=>{const s=Array.from(i==null?void 0:i.values()).map(a=>Re.db.by("id",a));let o=0;s.forEach(a=>{const l=a==null?void 0:a.tags.find(c=>c[0]==="bolt11")[1];if(!l){console.log("Invalid zap, missing bolt11 tag");return}const u=bV(l),f=((u==null?void 0:u.amount)||0)/1e3;o+=f}),t(a=>({...a,totalZapAmount:o,formattedZapAmount:o&&aA(o)||""}))},1e3,{leading:!0});return r.lightning?v(lt,{children:[v("a",{onClick:i=>{i.preventDefault(),i.stopPropagation(),t(s=>({...s,showZapModal:!0}))},className:`btn-ghost btn-sm hover:bg-transparent btn content-center gap-2 rounded-none
          ${r.zapped?"text-iris-orange":"text-neutral-500 hover:text-iris-orange"}`,children:[v(Tle,{width:18}),r.formattedZapAmount]}),r.showZapModal&&v(Xke,{show:!0,lnurl:r.lightning,note:e.id,recipient:e.pubkey,onClose:()=>t(i=>({...i,showZapModal:!1}))})]}):null},Qke=e=>{const[r,t]=Me({replyCount:0}),[n,i]=Me({trusted:!1,distrusted:!1}),s=e.event,o=e.wot;St(()=>Re.getThreadRepliesCount(s.id,u),[s]),St(()=>{const d=o==null?void 0:o.vertice,y=d==null?void 0:d.score;i(w=>({...w,trusted:y==null?void 0:y.isDirectTrusted(),distrusted:y==null?void 0:y.isDirectDistrusted()}))},[o]);function a(d){d.preventDefault(),d.stopPropagation(),i(y=>{let w=y.trusted?0:1;return rr.publishTrust(s.id,w,nu.Item),{...y,trusted:!y.trusted,distrusted:!1}})}function l(d){d.preventDefault(),d.stopPropagation(),i(y=>{let w=y.distrusted?0:-1;return rr.publishTrust(s.id,w,nu.Item),{...y,trusted:!1,distrusted:!y.distrusted}})}const u=d=>{t(y=>({...y,replyCount:d}))};function f(){e.standalone?Jt(document).find("textarea").focus():_r(`/${de.toNostrBech32Address(e.event.id,"note")}`)}function c(){var d,y,w,b;return v(lt,{children:[v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.trusted?"trusted":"hover:trusted text-neutral-500"}`,onClick:T=>a(T),title:n.trusted?"Trusted":"Trust",children:[n.trusted?v(l$,{size:18,fill:"green",stroke:"currentColor"}):v(l$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((y=(d=o==null?void 0:o.vertice)==null?void 0:d.score)==null?void 0:y.renderTrustCount())||""]}),v("a",{className:`btn-ghost trust-btn btn-sm flex-1 justify-center hover:bg-transparent btn content-center gap-2 rounded-none ${n.distrusted?"distrusted":"hover:distrusted text-neutral-500"}`,onClick:T=>l(T),title:n.distrusted?"Distrusted":"Distrust",children:[n.distrusted?v(a$,{size:18,fill:"red",stroke:"currentColor"}):v(a$,{size:18,fill:"none",stroke:"currentColor"}),!e.standalone&&((b=(w=o==null?void 0:o.vertice)==null?void 0:w.score)==null?void 0:b.renderDistrustCount())||""]})]})}return v(lt,{children:[e.standalone&&v(Hke,{event:e.event,wot:o}),v("div",{className:"flex gap-4",children:[v("a",{className:"btn-ghost btn-sm hover:bg-transparent hover:text-iris-blue btn content-center gap-2 rounded-none text-neutral-500",onClick:()=>f(),children:[v(Ole,{width:18}),v("span",{children:r.replyCount||""})]}),v(Wke,{event:e.event}),v(Uke,{event:e.event}),v(Jke,{event:e.event}),c()]})]})},eTe=gi(Qke);class VP extends $n{constructor(){super();ce(this,"key");ce(this,"cls");ce(this,"actionDone");ce(this,"action");ce(this,"activeClass");ce(this,"hoverAction");ce(this,"handleMouseEnter",()=>{this.setState({hover:!0})});ce(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.cls="block-btn",this.key="blocked",this.activeClass="blocked",this.action=he("block"),this.actionDone=he("blocked"),this.hoverAction=he("unblock"),this.state={...this.state,hover:!1}}onClick(t){var s,o;t.preventDefault();const n=!this.state[this.key],i=de.toNostrHexAddress(this.props.id);i&&et.block(i,n),(o=(s=this.props).onClick)==null||o.call(s,t)}componentDidMount(){et.getBlockedUsers(t=>{const n=t==null?void 0:t.has(de.toNostrHexAddress(this.props.id));this.setState({blocked:n})})}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`${this.cls||this.key} ${t?this.activeClass:""} ${this.props.className||""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:v("span",{children:[he(i)," ",this.props.showName?v(Er,{pub:this.props.id,hideBadge:!0}):""]})})}}const Af=_n.button`
  background: var(--button-bg);
  color: var(--button-color);
  border: var(--button-border);
  font-weight: bold;
  cursor: pointer;
  transition: all 0.25s ease;
  width: ${e=>e.width||"auto"};

  ${e=>e.small&&`
    padding: 5px 20px;
  `}

  &:hover,
  &:focus,
  &:active {
    background: var(--button-bg-hover);
    color: var(--button-color-hover);
  }
`,ch=_n(Af)`
  background: var(--button-primary-bg);
  color: var(--button-primary-color);
  border: var(--button-primary-border);

  &:hover,
  &:focus,
  &:active {
    background: var(--button-primary-bg-hover);
    color: var(--button-primary-color-hover);
  }
`;let jh=class extends $n{constructor(){super();ce(this,"key");ce(this,"cls");ce(this,"actionDone");ce(this,"action");ce(this,"activeClass");ce(this,"hoverAction");ce(this,"handleMouseEnter",()=>{this.setState({hover:!0})});ce(this,"handleMouseLeave",()=>{this.setState({hover:!1})});this.key="follow",this.activeClass="following",this.action=he("follow_btn"),this.actionDone=he("following_btn"),this.hoverAction=he("unfollow_btn"),this.state={...this.state,hover:!1}}onClick(t){t.preventDefault();const n=!this.state[this.key],i=de.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){et.setFollowed(i,n);return}this.key==="block"&&et.setBlocked(i,n)}}componentDidMount(){if(this.key==="follow"){et.getFollowedByUser(de.getPubKey(),t=>{const n=de.toNostrHexAddress(this.props.id),i=n&&(t==null?void 0:t.has(n));this.setState({follow:i})});return}}render(){const t=this.state[this.key],n=this.state.hover;let i;return t&&n?i=this.hoverAction:t&&!n?i=this.actionDone:i=this.action,v("button",{className:`btn ${this.props.className||this.key} ${t?this.activeClass:""}`,onClick:s=>this.onClick(s),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:he(i)})}};const $V=({children:e})=>{const[r,t]=Me(!1),n=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),t(s))};return St(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&t(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),v("div",{className:"relative",onClick:i=>n(i,!r),onMouseEnter:i=>n(i,!0),onMouseLeave:i=>n(i,!1),children:[v("button",{className:"dropbtn btn btn-circle btn-sm btn-ghost text-neutral-500 pb-2",children:"…"}),v(dt,{when:r,children:v("div",{className:"absolute z-10 p-2 flex flex-col gap-2 right-0 w-56 rounded-md shadow-lg bg-black border-neutral-500 border-2",children:e})})]})},tTe=_n.div`
  display: flex;
  flex-direction: column;

  & ul > li {
    font-size: large;
  }
  & ul > li:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,rTe=_n.pre`
  overflow: auto;
  background-color: hsl(0, 0%, 16%);
  [data-theme='light'] & {
    background-color: hsl(0, 0%, 88%);
  }
  max-height: 400px;
  border-radius: 4px;
  padding: 0.7rem;
  font-family: monospace;
`,nTe=({event:e})=>{const[r,t]=Me(null);St(()=>{if(!(e!=null&&e.id))return;const i=Re.getOriginalPostEventId(e),s=i&&Re.eventsMetaDb.get(i);s&&t(s)},[e]);const n=Array.from((r==null?void 0:r.relays)||[]);return v(tTe,{children:[v("h2",{children:he("event_detail")}),v("p",{children:he("seen_on")}),n.length===0?v("p",{children:he("iris_api_source")}):v("ul",{children:n.map(i=>v("li",{children:i}))}),v(rTe,{children:v("code",{children:JSON.stringify({...e,meta:void 0,$loki:void 0},null,2)})})]})},iTe=_n.div`
  text-align: left;
  max-width: 100%;
  user-select: text;
`,_V=e=>{const{event:r,id:t}=e,[n]=Me(!1),[i,s]=Me(!1),o=()=>s(!1),a=()=>{},l=w=>{if(w.preventDefault(),confirm("Delete message?")){const b=de.toNostrHexAddress(t);b&&Re.publish({kind:5,content:"deleted",tags:[["e",b]]})}},u=w=>{w.preventDefault(),De.get("mutedNotes").get(e.id).put(!n)},f=w=>{if(w.preventDefault(),confirm("Publicly report and hide message?")){const b=de.toNostrHexAddress(e.id);b&&e.event&&Re.publish({kind:5,content:"reported",tags:[["e",b],["p",e.event.pubkey]]})}},c=w=>{w.preventDefault(),e.event&&hr.translateText(e.event.content).then(b=>{var T;(T=e.onTranslate)==null||T.call(e,b)})},d=w=>{w.preventDefault();const b=de.toNostrHexAddress(t);if(b){const T=Re.db.by("id",b);T&&(console.log("broadcasting",b,T),Re.publish(T))}},y=`https://iris.to/${de.toNostrBech32Address(t,"note")}`;return v("div",{children:[v($V,{children:[v(Hi,{className:"btn btn-sm",text:he("copy_link"),copyStr:y},`${t}copy_link`),v(Hi,{className:"btn btn-sm",text:he("copy_note_ID"),copyStr:de.toNostrBech32Address(t,"note")||""},`${t}copy_id`),v("a",{className:"btn btn-sm",href:"#",onClick:u,children:he(n?"unmute_notifications":"mute_notifications")}),r?v(lt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:d,children:he("resend_to_relays")}),v("a",{className:"btn btn-sm",href:"#",onClick:c,children:he("translate")}),v(Hi,{className:"btn btn-sm",text:he("copy_raw_data"),copyStr:JSON.stringify(r,null,2)},`${t}copyRaw`),r.pubkey===de.getPubKey()?v("a",{className:"btn btn-sm",href:"#",onClick:l,children:he("delete")}):v(lt,{children:[v("a",{className:"btn btn-sm",href:"#",onClick:f,children:he("report_public")}),v(jh,{className:"btn btn-sm",id:r==null?void 0:r.pubkey}),v(VP,{className:"btn btn-sm",onClick:a,id:r==null?void 0:r.pubkey,showName:!0})]}),v("a",{className:"btn btn-sm",href:"#",onClick:w=>{w.preventDefault(),s(!0)},children:he("event_detail")})]}):v(lt,{})]}),r&&i&&v(Eu,{showContainer:!0,onClose:o,children:v(iTe,{children:[v(nTe,{event:r}),v(ch,{onClick:o,children:he("done")})]})})]})},sTe=({event:e,fullWidth:r,isQuote:t,standalone:n,setTranslatedText:i})=>{const{time:s,dateStr:o,timeStr:a}=pu(()=>{const l=new Date(e.created_at*1e3),u=l.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),f=l.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});return{time:l,dateStr:u,timeStr:f}},[e.created_at]);return v("div",{className:"flex items-center gap-2 justify-between",children:[v(dt,{when:r,children:v(CK,{event:e,isQuote:t,standalone:n,fullWidth:r})}),v("div",{className:"flex flex-col",children:v("div",{children:[v(Qt,{href:`/${de.toNostrBech32Address(e.pubkey,"npub")}`,className:"font-bold",children:v(Er,{pub:e.pubkey})}),v("small",{className:"text-neutral-500",children:[v("span",{className:"mx-2",children:"·"}),v(Qt,{href:`/${de.toNostrBech32Address(e.id,"note")}`,className:"tooltip","data-tip":`${o} ${a}`,children:s&&hr.getRelativeTimeText(s)})]})]})}),v(dt,{when:!t,children:v("div",{className:"flex-1 flex items-center justify-end",children:v(_V,{id:e.id,event:e,onTranslate:i})})})]})},oTe=({attachments:e,name:r,text:t})=>{var a;const n=(a=e==null?void 0:e.find(l=>l.type==="image"))==null?void 0:a.data,s=`"${t.length>128?`${t.slice(0,128)}...`:t}"`,o=`${r||"User"} on Iris`;return v(_h,{titleTemplate:"%s",children:[v("title",{children:`${o}: ${s}`}),v("meta",{name:"description",content:s}),v("meta",{property:"og:type",content:"article"}),n?v("meta",{property:"og:image",content:n}):null,v("meta",{property:"og:title",content:o}),v("meta",{property:"og:description",content:s})]})},aTe=gi(oTe);let uA=!0,xV=!0,EV=!0,SV=!0;De.get("settings").on(e=>{uA=e.loadReactions!==!1,xV=e.showLikes!==!1,EV=e.showZaps!==!1,SV=e.showReposts!==!1});const QE=500,eS=8,lTe=({standalone:e,isQuote:r,fullWidth:t,asInlineQuote:n,event:i,meta:s,wot:o})=>{var C;const[a,l]=Me(""),[u,f]=Me(!1),[c,d]=Me(""),[y,w]=Me(!1);St(()=>{if(e)return et.getProfile(i.pubkey,g=>{d((g==null?void 0:g.display_name)||(g==null?void 0:g.name)||"")})},[i.pubkey]);const b=((C=i.content)==null?void 0:C.length)===2&&hr.isEmoji(i.content);let T=i.content||"";const _=[],A=T.match(/(https?:\/\/[^\s]+)/g);A&&A.forEach(g=>{let M;try{M=new URL(g)}catch{console.log("invalid url",g);return}M.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&_.push({type:"image",data:`${M.href}`})}),T=T.length>QE&&!u&&!e?`${T.slice(0,QE)}...`:T;const x=T.split(`
`);T=x.length>eS&&!u&&!e?`${x.slice(0,eS).join(`
`)}...`:T,T=hr.highlightEverything(T.trim(),i,{showMentionedMessages:!n,onImageClick:g=>I(g)});function I(g){g.preventDefault(),w(!0)}function O(){var g;return(_==null?void 0:_.length)>1||((g=i.content)==null?void 0:g.length)>QE||i.content.split(`
`).length>eS}return v("div",{className:"flex-grow",children:[v(sTe,{standalone:e,event:i,isQuote:r,fullWidth:t,setTranslatedText:l}),v(dt,{when:e,children:v(aTe,{name:c,text:T,attachments:_})}),v(dt,{when:s.torrentId,children:v(Rm,{torrentId:s.torrentId,autopause:!e})}),v(dt,{when:(T==null?void 0:T.length)>0,children:v("div",{className:`preformatted-wrap pb-1 ${b&&"text-2xl"} ${o==null?void 0:o.option}`,children:[T,v(dt,{when:a,children:v("p",{children:v("i",{children:a})})})]})}),v(dt,{when:!n&&!e&&O(),children:v("a",{className:"text-sm link mb-2",onClick:g=>{g.preventDefault(),f(!u)},children:he(`show_${u?"less":"more"}`)})}),v(dt,{when:!n&&uA,children:v(eTe,{settings:{showLikes:xV,showZaps:EV,showReposts:SV},standalone:e,event:i,wot:o},i.id+"reactions")}),v(dt,{when:r&&!uA,children:v("div",{style:{marginBottom:"15px"}})}),v(dt,{when:e,children:[v("hr",{className:"-mx-2 opacity-10 my-2"}),v(Y_,{waitForFocus:!0,autofocus:!e,replyingTo:i.id,placeholder:he("write_your_reply")})]}),v(dt,{when:y,children:v(a$e,{images:_==null?void 0:_.map(g=>g.data),onClose:()=>w(!1)})})]})},uTe=gi(lTe),s8=({event:e,meta:r={},asInlineQuote:t=!1,isReply:n=!1,isQuote:i=!1,isQuoting:s=!1,showReplies:o=0,showRepliedMsg:a,standalone:l=!1,fullWidth:u})=>{const[f,c]=Me([]);!l&&o&&f.length&&(i=!0),r.replyingTo&&a&&(s=!0),a===void 0&&(a=l),u===void 0&&(u=!n&&!s&&!i&&!t);const d=G_(vt(e.id),["badMessage","neutralMessage","goodMessage"],""),y=pu(()=>{const A=[];return l?A.push(""):A.push("cursor-pointer transition-all ease-in-out duration-200 hover:bg-neutral-999"),i&&A.push("quote pb-2"),s?A.push("quoting pt-0"):A.push("pt-4"),t&&A.push("inline-quote border-2 border-neutral-900 rounded-lg my-2"),u&&A.push("full-width"),A.join(" ")},[l,i,s,t,u]);St(()=>{if(o)return Re.getReplies(e.id,wn.debounce(A=>{const x=Array.from(A).slice(0,o);x.sort((I,O)=>{const C=Re.db.by("id",I),g=Re.db.by("id",O);return C.created_at-g.created_at}),c(x)},500,{leading:!0,trailing:!0}))},[e.id,o]);let w=Re.getEventRoot(e);w||(w=r.replyingTo);function b(A){var x,I;if(!l&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(O=>A.target.closest(O))&&!((x=window.getSelection())!=null&&x.toString())){if(A.stopPropagation(),e.kind===7){const O=(I=e.tags)==null?void 0:I.reverse().find(C=>C[0]==="e")[1];return _r(`/${O}`)}_r(`/${de.toNostrBech32Address(e.id,"note")}`)}}const T=v(dt,{when:r.replyingTo&&a,children:v(Wo,{id:r.replyingTo,isQuote:!0,showReplies:0},e.id+r.replyingTo)}),_=v(dt,{when:!l&&!n&&!s&&w,children:v(Qt,{className:"text-iris-blue text-sm block mb-2",href:`/${de.toNostrBech32Address(w||"","note")}`,children:he("show_thread")})});return v(lt,{children:[T,v("div",{className:`px-2 md:px-4 pb-2 ${y}`,onClick:A=>b(A),children:[_,v("div",{className:"flex flex-row",onClick:A=>b(A),children:[v(dt,{when:!u,children:v(CK,{event:e,isQuote:i,standalone:l,fullWidth:u})}),v(uTe,{event:e,meta:r,standalone:l,isQuote:i,asInlineQuote:t,fullWidth:u,wot:d})]})]},e.id+"note"),v(dt,{when:!(i||t),children:v("hr",{className:"opacity-10"})}),v(ewe,{each:f,children:A=>v(Wo,{id:A,isReply:!0,isQuoting:!l,showReplies:1},A)})]})};function cTe(e){var n;const t=((n=e.event.tags)==null?void 0:n.some(i=>i[0]==="p"&&i[1]===de.getPubKey()))?"started following you":"updated their following list";return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:{display:"flex",alignItems:"center"},children:[v("i",{className:"repost-btn reposted",style:{marginRight:15},children:eo.newFollower}),v(Qt,{href:`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v(Er,{pub:e.event.pubkey})}),v("span",{className:"mar-left5",children:[" ",t]})]})})})}const fTe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),_r(`/${de.toNostrBech32Address(r,"note")}`))};function hTe(e){var u;const[r,t]=Me([]),n=Re.getEventReplyingTo(e.event),i=Re.db.by("id",n),s=(i==null?void 0:i.pubkey)===de.getPubKey(),o=(u=i==null?void 0:i.tags)==null?void 0:u.find(f=>f[0]==="p"&&f[1]===de.getPubKey()),a=s?"liked your note":o?"liked a note where you were mentioned":"liked a note";if(St(()=>{if(n)return Re.getLikes(n,f=>{t(Array.from(f))})},[n]),!n)return null;const l=`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`;return v("div",{children:v("div",{onClick:f=>fTe(f,n),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"like-btn text-iris-red",children:v(v3,{width:18})}),v("span",{children:[v("a",{href:l,children:v(Er,{pub:e.event.pubkey})}),r.length>1&&v(lt,{children:[" and ",r.length-1," others "]})," ",a]})]}),v(Wo,{id:n,fullWidth:!1},n+e.event.id)]})},e.event.id)}const dTe=_n.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: black;
  border: 1px solid #333;
  border-radius: 4px;
`,pTe=_n.div`
  flex: 1;
  max-width: 70%;
  display: flex;
  background: var(--main-color);
  justify-content: center;

  @media (max-width: 625px) {
    max-width: 100%;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
`,vTe=_n.div`
  flex: 1;
  max-width: 30%;
  overflow-y: auto;
  background: var(--msg-content-background);

  @media (max-width: 625px) {
    display: none;
  }
`,gTe=({event:e,onClose:r,attachment:t})=>v(Eu,{width:"90%",height:"90%",centerVertically:!0,onClose:r,children:v(dTe,{children:[v(pTe,{children:t.type==="image"?v(yu,{className:"rounded-sm",src:t.url}):v("video",{loop:!0,autoPlay:!0,src:t.url,controls:!0,poster:`https://imgproxy.iris.to/thumbnail/428/${t.url}`})}),v(vTe,{children:v(Wo,{id:e.id,standalone:!0,showReplies:1/0})})]})}),yTe=n$e`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`;function mTe({attachment:e}){return e.type==="video"?v("div",{style:{position:"absolute",top:"8px",right:"8px"},children:eo.video}):v(lt,{})}const bTe=_n.img`
  display: none;
`,wTe=_n.a`
  position: relative;
  aspect-ratio: 1;
  color: white;
  background-size: cover;
  background-position: center;
  background-color: #ccc;
  background-image: url(${e=>{var r;return((r=e.attachment)==null?void 0:r.type)==="video"?`https://imgproxy.iris.to/thumbnail/428/${e.attachment.url}`:e.proxyError?`${e.attachment.url}`:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${e.attachment.url}`}});
  & .dropdown {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
  }
  & .dropbtn {
    padding-top: 0px;
    margin-top: -5px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
    color: white;
    user-select: none;
  }
  &:hover {
    opacity: 0.8;
  }

  & svg {
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
  }

  opacity: ${e=>e.fadeIn?0:1};
  animation: ${e=>e.fadeIn?zP`
          ${yTe} 0.5s ease-in-out forwards
        `:"none"};
`;function $Te(e){var u;const[r,t]=Me(-1),[n,i]=Me([]),s=f=>{i(c=>{const d=[...c];return d[f]=!0,d})};if(e.event.kind!==1){const f=Re.getEventReplyingTo(e.event);return f?v(Wo,{id:f,renderAs:"NoteImage"}):null}const o=[],a=(u=e.event.content)==null?void 0:u.match(/(https?:\/\/[^\s]+)/g);a&&a.forEach(f=>{let c;try{c=new URL(f)}catch{console.log("invalid url",f);return}c.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&o.push({type:"image",url:c.href}),c.pathname.toLowerCase().match(/\.(mp4|mkv|avi|flv|wmv|mov|webm)$/)&&o.push({type:"video",url:c.href})});const l=(f,c)=>{window.innerWidth>625&&(f.preventDefault(),f.stopPropagation(),t(c))};return v(lt,{children:o.map((f,c)=>v(lt,{children:[v(wTe,{href:`/${de.toNostrBech32Address(e.event.id,"note")}`,onClick:d=>l(d,c),attachment:f,fadeIn:e.fadeIn,proxyError:n[c],children:v(mTe,{attachment:f})},e.event.id+c),f.type==="image"&&v(bTe,{src:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${f.url}`,onError:()=>s(c)}),r===c&&v(gTe,{attachment:f,onClose:()=>t(-1),event:e.event})]}))})}const _Te=gi($Te);function o8(e){var i;const[r,t]=Me([]),n=Re.getRepostedEventId(e.event)||"";return St(()=>{if(e.notification){const s=Re.getReposts(n,o=>{t(Array.from(o))});return()=>s()}},[e.notification,n]),v("div",{children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{children:v($H,{width:18})}),v(Qt,{href:`/${de.toNostrBech32Address(e.event.pubkey,"npub")}`,children:v(Er,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),v("span",{children:[r.length>1&&`and ${r.length-1} others`," ",he("reposted")]})]}),v(Wo,{id:n,fullWidth:e.fullWidth},n+e.event.id)]})}const xTe=(e,r)=>{var n;const t=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>t.closest(i))||(n=window.getSelection())!=null&&n.toString()||(e.stopPropagation(),_r(`/${de.toNostrBech32Address(r,"note")}`))};function ETe(e){var f;const[r,t]=Me([]),n=Re.getEventReplyingTo(e.event),i=Re.db.by("id",n),s=(i==null?void 0:i.pubkey)===de.getPubKey(),o=(f=i==null?void 0:i.tags)==null?void 0:f.find(c=>c[0]==="p"&&c[1]===de.getPubKey()),a=s?"zapped your note":o?"zapped a note where you were mentioned":"zapped a note";if(St(()=>n?Re.getZaps(n,c=>{t(Array.from(c.values()))}):()=>null,[n]),!n)return null;let l=null;try{l=Re.getZappingUser(e.event.id)}catch(c){return console.error("no zapping user found for event",e.event.id,c),""}const u=`/${l}`;return v("div",{children:v("div",{onClick:c=>xTe(c,n||""),children:[v("div",{className:"flex gap-1 items-center text-sm text-neutral-500 px-2 pt-2",children:[v("i",{className:"zap-btn text-iris-orange",children:v(tue,{width:18,height:18})}),v("div",{children:[v("a",{href:u,children:v(Er,{pub:l||""})}),r.length>1&&v("span",{children:[" and ",r.length-1," others "]})," ",a]})]}),v(Wo,{id:n,fullWidth:!1},n+e.event.id)]})})}const STe=e=>{const[r,t]=Me({sortedReplies:[],meta:{},event:Re.db.by("id",de.toNostrHexAddress(e.id))}),n=Vo(),i=Vo(!1),s=u=>{if(clearTimeout(n.current),i.current)return;r.retrieving&&t(d=>({...d,retrieving:!1}));const f=Re.getNoteReplyingTo(u),c={npub:de.toNostrBech32Address(u.pubkey,"npub"),noteId:de.toNostrBech32Address(u.id,"note"),time:u.created_at*1e3,isMine:de.getPubKey()===u.pubkey,attachments:[],replyingTo:f};t(d=>({...d,event:u,meta:c}))};St(()=>{if(!e.id){console.log("error: no id",e);return}i.current=!1;const u=de.toNostrHexAddress(e.id);return n.current=setTimeout(()=>{t(f=>({...f,retrieving:!0}))},1e3),u&&Re.getEventById(u,!0,f=>s(f)),()=>{i.current=!0}},[]),St(()=>{e.standalone&&!r.msg&&r.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const o=()=>e.asInlineQuote?null:v(_V,{id:e.id||"",event:r.event}),a=()=>{var c;let u="msg";return e.standalone&&(u+=" standalone"),(e.isQuote||e.showReplies&&((c=r.sortedReplies)==null?void 0:c.length))&&(u+=" quote"),u};return e.id?r.event?et.isBlocked(r.event.pubkey)?e.standalone||e.isQuote?v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("p",{style:{display:"flex",alignItems:"center"},children:[v("i",{style:{marginRight:"15px"},children:eo.newFollower}),v("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var f,c,d;let u=s8;if(r.event.kind===1){const y=(c=(f=r.event)==null?void 0:f.tags)==null?void 0:c.findIndex(w=>w[0]==="e"&&w[3]==="mention");((d=r.event)==null?void 0:d.content)===`#[${y}]`&&(u=o8)}else u={1:s8,3:cTe,6:o8,7:hTe,9735:ETe}[r.event.kind];return e.renderAs==="NoteImage"&&(u=_Te),u?v(u,{className:a(),event:r.event,meta:r.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<r.event.created_at,...e},e.id):(console.error("unknown event kind",r.event),null)})():e.renderAs==="NoteImage"?null:v("div",{className:a(),children:v("div",{className:`msg-content retrieving ${r.retrieving?"opacity-100":"opacity-0"} transition-opacity duration-700 ease-in-out`,style:{display:"flex",alignItems:"center"},children:[v("div",{className:"text",children:he("looking_up_message")}),v("div",{children:o()})]})},e.id):(console.error("no id on event",e),null)},Wo=gi(STe),a8=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,l8=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,tS=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,kTe=/\bnostr:(n(?:event|profile)1\w+)\b/g,u8=/(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;let hn={};De.get("settings").on(e=>hn=e);let kV={};De.get("settings").put({});De.get("existingIrisToAddress").on(e=>kV=e);const TTe=navigator.userAgent.toLowerCase(),ITe=TTe.indexOf(" electron/")>-1,hr={wtClient:void 0,formatAmount(e,r=2){return typeof e!="number"?"":e<1e3?e.toFixed(r):e<1e6?(e/1e3).toFixed(r)+"K":e<1e9?(e/1e6).toFixed(r)+"M":(e/1e9).toFixed(r)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(a8)!==null},async translateText(e){const t=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:Uo.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return t==null?void 0:t.translatedText},handleLightningLinkClick(e){e.preventDefault();const r=e.target.closest("A").href;r.startsWith("lightning:")&&window.open(r,"_self")},highlightEverything(e,r,t={showMentionedMessages:!0}){let n=zr(e,a8,(s,o)=>v("span",{className:"emoji",children:s},s+o));return t.showMentionedMessages&&(n=zr(n,tS,(s,o)=>v(Wo,{id:de.toNostrHexAddress(s)||"",asInlineQuote:!0},s+o))),hn.enableTwitter!==!1&&(n=zr(n,/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,(o,a)=>v("iframe",{style:{"max-width":"350px",height:"450px","background-color":"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(o)}`},o+a))),hn.enableVideos!==!1&&(n=zr(n,/(https?:\/\/[^?\s]+\/[^?\s]+\.(?:mp4|mkv|avi|flv|wmv|mov|webm)(?:\?\S*)?)\b/gi,(o,a)=>v("video",{className:"py-2 rounded max-h-[70vh] md:max-h-96 max-w-full",src:o,poster:`https://imgproxy.iris.to/thumbnail/428/${o}`,muted:!this.isMobile&&hn.autoplayVideos!==!1,autoPlay:!this.isMobile&&hn.autoplayVideos!==!1,playsInline:!0,controls:!0,loop:!0,onLoadedData:l=>{!this.isMobile&&hn.autoplayVideos&&l.target.play()}},o+a))),hn.enableAudio!==!1&&(n=zr(n,/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,(o,a)=>v("audio",{src:o,controls:!0,loop:!0},o+a))),hn.enableYoutube!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,(o,a)=>v("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableInstagram!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,(o,a)=>v("iframe",{class:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${o}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableSoundCloud!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,(o,a)=>(console.log("match: "+o),console.log("match 0: "+o[0]),console.log("match 1: "+o[1]),console.log("match 2: "+o[2]),v("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${o}`,frameBorder:"0",allow:"encrypted-media"},o+a)))),hn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${o}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${o}`,frameBorder:"0",allow:"encrypted-media"},o+a))),hn.enableSpotify!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/playlist\/)([\w-]+)(?:\S+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/playlist/${o}`,frameBorder:"0",allow:"encrypted-media"},o+a))),hn.enableAppleMusic!==!1&&(n=zr(n,/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,(o,a)=>v("iframe",{class:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableAppleMusic!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(podcasts\.apple\.com\/.*)/g,(o,a)=>{console.log("embed url: "+o);const l=o.includes("?i=")?"applepodcast-small":"applepodcast-large";return v("iframe",{class:l,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${o}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a)})),hn.enableTidal!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,(o,a)=>v("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${o}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableTiktok!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,(o,a)=>v("iframe",{class:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${o}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableTwitch!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,(o,a)=>v("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${o}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableTwitch!==!1&&(n=zr(n,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,(o,a)=>v("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${o}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},o+a))),hn.enableWavlake!==!1&&(n=zr(n,/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,(o,a)=>v("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${o}`,frameBorder:"0",loading:"lazy"},o+a))),hn.enableTorrent!==!1&&(n=zr(n,/(magnet:\?xt=urn:btih:.*)/gi,(o,a)=>(console.log("magnet link",o),v(Rm,{preview:!0,torrentId:o},o+a)))),hn.enableImages!==!1&&(n=zr(n,/(https?:\/\/[^\s]*\.(?:jpg|jpeg|gif|png|webp)(\?[^\s]*)?( |$|\n))/gi,(o,a)=>v(yu,{className:"py-2 md:rounded max-h-[70vh] md:max-h-96 max-w-full cursor-pointer",onClick:t.onImageClick,src:o},o+a))),n=this.highlightText(n,r,t),n=zr(n,/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,s=>(s.startsWith("lightning:")||(s=`lightning:${s}`),v("a",{href:s,onClick:o=>this.handleLightningLinkClick(o),children:"⚡ Pay with lightning"}))),n},isMobile:function(){let e=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),highlightText(e,r,t={}){return e=zr(e,l8,(n,i)=>{n=n.replace(/@/g,"");const s=`/${n}`;return v(lt,{children:[" ",v("a",{href:s,className:"link",children:["@",v(Er,{pub:n,hideBadge:!0},n+i)]})]})}),e=zr(e,kTe,(n,i)=>{try{const{type:s,data:o}=Dc.decode(n);if(s==="nprofile")return v(lt,{children:[" ",v(Qt,{href:`/${o.pubkey}`,className:"link",children:["@",v(Er,{pub:o.pubkey,hideBadge:!0},n+i)]})]});if(s==="nevent")return v(Wo,{id:o.id,asInlineQuote:!0},n+i)}catch(s){return console.log(s),n}}),e=zr(e,tS,n=>{n=n.replace(/@/g,"");const i=`/${n}`;return v(lt,{children:[" ",v("a",{href:i,className:"link",children:n})]})}),e=zr(e,/((?:https?:\/\/\S*[^.?,)\s])|(?:iris\.to\/\S*[^.?,)\s]))/gi,(n,i)=>{const s=n.replace(/^(https:\/\/)?iris.to/,""),o=s!==n;return v("a",{className:"link",target:"_blank",onClick:a=>{o&&(a.preventDefault(),_r(s))},href:s,children:n.replace(/^https?:\/\//,"").replace(/\/$/,"")},n+i)}),r!=null&&r.tags&&(e=zr(e,/#\[(\d+)\]/g,(n,i)=>{const s=r.tags[parseInt(n,10)];if(s){const o=s[1].replace("@","");if(s[0]==="p"){const a=`/${de.toNostrBech32Address(o,"npub")}`;return v("a",{href:a,children:["@",v(Er,{pub:o,hideBadge:!0},o+i)]})}else if(s[0]==="e")return t.showMentionedMessages?v(Wo,{id:o,asInlineQuote:!0},o+i):v(Qt,{className:"link",href:`/${de.toNostrBech32Address(o,"note")}`,children:s[1]})}return n})),e=zr(e,u8,n=>v(Qt,{className:"link",href:`/search/${encodeURIComponent(n)}`,children:n})),e=e.map(n=>typeof n=="string"?n.replace(/^\n+|\n+$/g,""):n),e},copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const r=document.createElement("textarea");r.textContent=e,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}finally{document.body.removeChild(r)}}return!1},showConsoleWarning(){const e="Stop!",r=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const t="font-family:helvetica; font-size:20px; ";[[e,`${t}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[r,t],["",""]].map(n=>{setTimeout(console.log.bind(console,`
%c${n[0]}`,n[1]))})}},formatTime(e){const r=e.toLocaleTimeString(void 0,{timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},formatDate(e){const r=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),t=r.split(":");return t.length===3?`${t[0]}:${t[1]}${t[2].slice(2)}`:r},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,r,t,n){if(t||(t=new Date,n=t.toLocaleDateString(void 0,{dateStyle:"short"})),r===n)return"today";const i=Math.round((t.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):r},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const r=QT.decode(e,1e3),t=QT.fromWords(r.words);return new TextDecoder().decode(Uint8Array.from(t))}catch(r){return console.error("bech32ToText failed",r),""}},getRelativeTimeText(e){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;return t<n?he("now"):t<i?Math.floor(t/n)+"m":t<s?Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},formatBytes(e,r=2){if(e===0)return"0 Bytes";const t=1024,n=r<0?0:r,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,s)).toFixed(n))} ${i[s]}`},download(e,r,t,n,i){n===null&&(n="utf-8");const s=document.createElement("a");s.href=i||`data:${t};charset=${n},${encodeURI(r)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const r=new FileReader;return r.readAsDataURL(e),new Promise((t,n)=>{r.onload=function(){t(r.result)},r.onerror=function(i){n(`Error: ${i}`)}})},scrollToMessageListBottom:$_(()=>{Jt("#message-view")[0]&&Jt("#message-view").scrollTop(Jt("#message-view")[0].scrollHeight-Jt("#message-view")[0].clientHeight)},100),getMyProfileLink(){const e=kV.name||de.toNostrBech32Address(de.getPubKey(),"npub");return this.buildURL(e)},buildURL(e,r={},t=""){const n=new URL(window.location.origin);return n.pathname=e,r&&ep.forEach(r,(i,s)=>{n.searchParams.append(s,i)}),t&&(n.hash=t),n.toString()},arrayToHex(e){return Array.from(e,r=>("0"+(r&255).toString(16)).slice(-2)).join("")},isElectron:ITe,pubKeyRegex:l8,noteRegex:tS,hashtagRegex:u8},de={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:Lp,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,r=!1){const t=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),t&&location.reload(),De.get("loggedIn").put(!0),r&&setTimeout(()=>{_r("/following")}),De.get("showLoginModal").put(!1)},generateKey(){const e=H3();return{priv:e,rpub:Lp(e)}},getOrCreate(e){let r=localStorage.getItem("iris.myKey");return r||(r=localStorage.getItem("chatKeyPair")),r?(this.key=JSON.parse(r),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),De.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),De.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return((e=this.key)==null?void 0:e.rpub)||""},getPrivKey(){var e;return((e=this.key)==null?void 0:e.priv)||""},encrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?Fp.encrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"encrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},decrypt:async function(e,r){const t=this.key;return r=r||t.rpub||"",t.priv?Fp.decrypt(t.priv,r,e):window.nostr?new Promise(n=>{this.processWindowNostr({op:"decrypt",data:e,pub:r,callback:n})}):Promise.reject("no private key")},sign:async function(e){const r=this.getPrivKey();return r?WU(e,r):window.nostr?new Promise(t=>{this.processWindowNostr({op:"sign",data:e,callback:t})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:r,pub:t,callback:n}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(t,r),n):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(t,r),n):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(r),s=>n(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,r){return e.then(t=>{r(t)}).catch(t=>{console.error(t),r(null)})},async decryptMessage(e,r){var n;const t=Re.decryptedMessages.get(e);if(t){r(t);return}try{const i=this.getPubKey(),s=Re.db.by("id",e),o=s.pubkey===i?(n=s.tags)==null?void 0:n.find(l=>l[0]==="p")[1]:s.pubkey;if(!(s&&o))return;let a=await this.decrypt(s.content,o);a!=null&&a.content&&(a=a.content),Re.decryptedMessages.set(e,a),r(a)}catch(i){console.error(i)}},async getPubKeyByNip05Address(e){try{const[r,t]=e.split("@"),n=`https://${t}/.well-known/nostr.json?name=${r}`;return(await(await fetch(n)).json()).names[r]||null}catch(r){return console.error(r),null}},async verifyNip05Address(e,r){try{const[t,n]=e.split("@"),i=`https://${n}/.well-known/nostr.json?name=${t}`,a=(await(await fetch(i)).json()).names;return a[t]===r||a[t.toLowerCase()]===r}catch{return!1}},toNostrBech32Address:function(e,r){if(!e)return null;if(!r)throw new Error("prefix is required");try{const n=BT(e);return r!==n.prefix?null:QD(r,n.data)}catch{}const t=e.match(/^[0-9a-fA-F]{64}$/);if(t!==null){const n=t[0].match(/.{1,2}/g);if(n!==null){const i=new Uint8Array(n.map(s=>parseInt(s,16)));return QD(r,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:r}=BT(e);return hr.arrayToHex(r)}catch{}return null}},ATe=[{url:"/",icon:EH,activeIcon:kH},{url:"/chat",icon:p3,activeIcon:g3},{url:"/post/new",icon:Vle,activeIcon:xue},{url:"/search",icon:IH,activeIcon:eo.magnifyingGlassBold}],OTe=()=>{const[e,r]=Me(!1),[t,n]=Me("/"),[i,s]=Me(null);St(()=>{De.get("isMyProfile").on(u=>r(u)),De.get("activeRoute").on(u=>{const f=u.replace("/chat/new","").replace("/chat/",""),c=f.length<u.length?f:null;n(u),s(c)})},[]);const o=u=>{u&&window.scrollTo({top:0})},a=(u,f,c)=>{const d=new RegExp(`^${u}(/|$)`).test(t);return v(Qt,{href:u,className:`btn flex-grow ${d?"active":""}`,onClick:()=>o(d),children:[v(dt,{when:d,children:v(c,{width:24})}),v(dt,{when:!d,children:v(f,{width:24})})]})},l=de.toNostrBech32Address(de.getPubKey(),"npub");return v(dt,{when:l&&!i,children:v("footer",{className:"fixed md:hidden bottom-0 z-10 w-full bg-base-200 pb-safe-area",children:v("div",{className:"flex",children:[ATe.map(u=>a(u.url,u.icon,u.activeIcon)),v(Qt,{href:`/${l}`,onClick:()=>o(e),className:"rounded-full btn flex flex-grow",children:v("span",{className:`${e?"border-white":"border-black"} flex rounded-full border-2`,children:v(fs,{str:l,width:28})})})]})})})},CTe=(e,r)=>r.indexOf(e.slice(-4))!==-1,c8=e=>CTe(e.name,[".jpg","jpeg",".gif",".png"]);class PTe extends jn{constructor(){super(...arguments);ce(this,"torrentId");ce(this,"filePath");ce(this,"torrent")}componentDidMount(){De.get("player").on(t=>{const n=t&&t.torrentId,i=t&&t.filePath;n!==this.torrentId?(this.filePath=i,this.torrentId=n,this.setState({torrentId:n,isOpen:!!t,splitPath:i&&i.split("/")}),n&&this.startTorrenting()):i&&i!==this.filePath&&(this.filePath=i,this.setState({splitPath:i&&i.split("/")}),this.openFile())}),De.get("player").get("paused").on(t=>this.setPaused(t))}setPaused(t){const i=this.base.querySelector("audio");i&&(t?i.pause():i.play())}onTorrent(t){this.torrent=t;const n=t.files.find(a=>c8(a));let i=t.files.find(a=>c8(a)&&(a.name.indexOf("cover")>-1||a.name.indexOf("poster")>-1));i=i||n;const o=this.base.querySelector(".cover");o.innerHTML="",i&&o.appendChild(i.appendTo()),this.setState({isOpen:!0}),this.openFile()}openFile(){if(this.torrent){const t=this.torrent.files.find(o=>o.path===this.filePath),i=this.base.querySelector(".player");i.innerHTML="",t&&i.appendChild(t.appendTo({autoplay:!0,muted:!1}));const s=i.querySelector("audio");s&&(s.onpause=s.onplay=o=>{const a=o.target;De.get("player").get("paused").put(!!a.paused)})}}async startTorrenting(){const{default:t}=await $r(()=>import("./index-3b8a4aab.js").then(s=>s.i),[]),n=new t,i=n.get(this.torrentId);i?this.onTorrent(i):n.add(this.torrentId,(s,o)=>this.onTorrent(o))}closeClicked(){this.setPaused(!0),De.get("player").put(null)}render(){const t=this.state;return v(lt,{children:v("div",{className:"media-player",style:{display:t.isOpen?"":"none"},children:[v("div",{className:"player"}),v("div",{className:"cover"}),v(Qt,{href:`/torrent/${encodeURIComponent(this.state.torrentId??"")}`,className:"info",children:t.splitPath?t.splitPath.map((n,i)=>{var s;return i===(((s=t.splitPath)==null?void 0:s.length)||0)-1?(n=n.split(".").slice(0,-1).join("."),v("p",{children:v("b",{children:n})})):v("p",{children:n})}):""}),v("div",{className:"close",onClick:()=>this.closeClicked(),children:eo.close})]})})}}const NTe=[{url:"/",text:"home",icon:EH,activeIcon:kH},{url:"/search",text:"search",icon:IH,activeIcon:eo.magnifyingGlassBold},{url:"/chat",text:"messages",icon:p3,activeIcon:g3},{url:"/settings",text:"settings",icon:_H,activeIcon:iue},{url:"/about",text:"about",icon:Hle,activeIcon:pue}];function RTe(){const[e,r]=Me(0),[t,n]=Me(""),[i,s]=Me(!1);St(()=>{const f=De.get("unseenMsgsTotal").on(r),c=De.get("activeRoute").on(n);return()=>{f(),c()}},[]),pu(()=>{const f=new Date;return f.getMonth()===2&&f.getDate()===17},[]);const o=()=>{De.get("scrollUp").put(!0),window.scrollTo(0,0)},a=()=>v(Eu,{centerVertically:!0,showContainer:!0,onClose:()=>s(!1),children:v(Y_,{onSubmit:()=>s(!1),placeholder:he("whats_on_your_mind"),autofocus:!0})}),l=()=>{const f=de.getPubKey(),c=de.toNostrBech32Address(f,"npub");return v("div",{className:"flex justify-center xl:justify-start",children:v(Qt,{href:`/${c}`,className:"btn btn-ghost md:max-xl:btn-circle",children:[v(fs,{str:f,width:34}),v("div",{className:"hidden xl:block ml-2",children:v(Er,{pub:f,hideBadge:!0})})]})})},u=f=>{const c=new RegExp(`^${f.url}(/|$)`).test(t),d=c?f.activeIcon:f.icon;return v("div",{children:v("a",{onClick:()=>o(),className:`${c?"active":""} inline-flex w-auto flex items-center space-x-4 p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900`,href:f.url,children:[v(dt,{when:f.text==="messages"&&e,children:v("span",{class:"unseen unseen-total",children:e})}),v(d,{width:26}),v("span",{className:"hidden xl:flex pr-2",children:he(f.text)})]})})};return v("div",{className:"sticky border-r border-neutral-900 top-0 z-20 h-screen max-h-screen hidden md:flex xl:w-56 flex-col px-2 py-4 flex-shrink-0",children:[v("a",{className:"flex items-center gap-3 px-2 mb-4",tabIndex:3,href:"/",onClick:()=>o(),children:[v("img",{src:"/img/dwotr/logo30.png",width:"30",height:"30"}),v("h1",{className:"hidden xl:flex text-3xl",children:"Dpeep"})]}),v("a",{href:"https://github.com/DigitalTrustProtocol/DWoTR-Documentation/blob/main/Trust.md",target:"_blank",children:v("small",{className:"pl-3",children:"Iris clone with DWoTR"})}),v("div",{className:"flex flex-col gap-2",children:NTe.map(f=>u(f))}),v("div",{class:"py-2 flex-1",children:[v("button",{className:"btn btn-primary md:max-xl:btn-circle mt-2",onClick:()=>s(!i),children:[v(AH,{width:26}),v("span",{className:"hidden xl:flex",children:he("new_post")})]}),v(dt,{when:i,children:a()})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),l()]})}const DTe={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const r=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(r.status===200){const n=await r.json();console.log("existingIrisToAddress",n),De.get("existingIrisToAddress").put(n);const i=setTimeout(()=>{n!=null&&n.confirmed||De.get("showNoIrisToAddress").put(!0)},1e3);return De.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:n}}const t=setTimeout(()=>{De.get("showNoIrisToAddress").put(!0)},2e3);De.get("showNoIrisToAddress").on(n=>{n||clearTimeout(t)})},setAsPrimary(e){const r=e+"@iris.to",t=setTimeout(()=>{et.setMetadata({nip05:r})},2e3);et.getProfile(de.getPubKey(),n=>{n&&(clearTimeout(t),n.nip05!==r&&(n.nip05=r,et.setMetadata(n)))})},async enableReserved(e){const r=de.getPubKey(),t={content:`iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Re.getEventHash(t),t.sig=await de.sign(t);const n=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").put({confirmed:!0,name:e}),n.status===200)return{error:null,existing:{confirmed:!0,name:e}};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const r=de.getPubKey(),t={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};t.id=Re.getEventHash(t),t.sig=await de.sign(t);const n=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.status===200)return De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};n.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},f8=3e4;function TV(e){var r,t;return(t=(r=e.tags)==null?void 0:r.find(([n])=>n==="d"))==null?void 0:t[1]}function BTe(e){var r;return(r=e["#d"])==null?void 0:r[0]}class MTe{constructor(){ce(this,"eventsByPathAndAuthor",new Map)}set(r){const t=TV(r);if(!t)return!1;this.eventsByPathAndAuthor.has(t)||this.eventsByPathAndAuthor.set(t,new Map);let n=this.eventsByPathAndAuthor.get(t);n||(n=new Map,this.eventsByPathAndAuthor.set(t,n));const i=n==null?void 0:n.get(r.pubkey);return i&&i.created_at>r.created_at?!1:(n.set(r.pubkey,r),!0)}get(r,t){const n=BTe(r);if(!n)throw new Error(`filter has no #d tag: ${JSON.stringify(r)}`);const i=this.eventsByPathAndAuthor.get(n);if(i)for(const[s,o]of i)(!r.authors||r.authors.indexOf(s)!==-1)&&t(o)}}class h8{constructor(r,t,n,i,s,o){ce(this,"store");ce(this,"listeners");ce(this,"publish");ce(this,"subscribe");ce(this,"unsubscribe");ce(this,"filter");ce(this,"encrypt");ce(this,"decrypt");this.publish=r,this.subscribe=t,this.unsubscribe=n,this.filter=i,this.encrypt=s,this.decrypt=o,this.store=new MTe,this.listeners=new Map}async publishSetEvent(r,t){let n;if(this.encrypt){const i=JSON.stringify(t);if(n=await this.encrypt(i),i===n)throw new Error(`Encryption failed: ${i} === ${n}`)}else n=JSON.stringify(t);return this.publish({kind:f8,tags:[["d",r]],content:n,created_at:Math.floor(Date.now()/1e3)})}async set(r,t){try{const n=await this.publishSetEvent(r,t);if(n)return this.store.set(n)&&this.notifyListeners(n),!0}catch(n){console.error(n)}return!1}async getEventValue(r){let t=this.decrypt?await this.decrypt(r.content):r.content;try{t=JSON.parse(t)}catch{throw new Error(`Failed to parse event content: ${t}`)}return t}get(r,t,n={}){n=Object.assign({},n,this.filter,{"#d":[r],kinds:[f8]});const i=this.addListener(n,t);return this.store.get(n,s=>this.callbackFromEvent(s,t)),this.subscribe([n],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(r,t){const n=Math.random().toString(36).substr(2,9),i={filter:r,callback:t,off:()=>{this.listeners.delete(n),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(n,i),i}removeListener(r){const t=this.listeners.get(r);t&&t.off()}callbackFromEvent(r,t){const n=TV(r);if(!n)throw new Error(`event has no d tag: ${JSON.stringify(r)}`);this.getEventValue(r).then(i=>{t(i,n,r)})}async notifyListeners(r){for(const t of this.listeners.values())W3(t.filter,r)&&this.callbackFromEvent(r,t.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}const Th={public:void 0,private:void 0,async logOut(){var e;if(_r("/"),navigator.serviceWorker){const r=await navigator.serviceWorker.getRegistration();r&&r.pushManager&&((e=r.active)==null||e.postMessage({key:null}),await r.pushManager.getSubscription())}ul.clear(),localStorage.clear(),dn.clear().then(()=>{location.reload()})},unsubscribe(){},onLoggedIn(){const e=de.getPubKey(),r=vt(e);et.followDistanceByUser.set(r,0),et.followersByUser.set(r,new Set),et.usersByFollowDistance.set(0,new Set([r]));const t=(s,o)=>{var u;const l=(u=s[0]["#d"])==null?void 0:u[0];if(l){const f=Re.keyValueEvents.get(l);f&&o(f)}return Bt.subscribe(s[0],o,!0),"0"};De.get("globalFilter").once(s=>{s||De.get("globalFilter").put(Re.DEFAULT_GLOBAL_FILTER)}),this.private=new h8((...s)=>Re.publish(...s),t,()=>this.unsubscribe(),{authors:[e]},(...s)=>de.encrypt(...s),(...s)=>de.decrypt(...s)),this.public=new h8((...s)=>Re.publish(...s),t,()=>this.unsubscribe(),{authors:[e]}),this.public.get("notifications/lastOpened",s=>{s!==Re.notificationsSeenTime&&(Re.notificationsSeenTime=s,Re.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",s=>{if(s==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(s==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),sn.init(),Lw.loadEvents();const n=setTimeout(()=>{DTe.checkExistingAccount(e)},1e3);et.getProfile(e,async s=>{s&&s.nip05&&s.nip05.endsWith("@iris.to")&&(De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").get("name").put(s.nip05.replace("@iris.to","")),clearTimeout(n))});const i=et.getFollowersByUser(e,s=>{s!=null&&s.size?(De.get("noFollowers").put(!1),i()):De.get("noFollowers").put(!0)});setTimeout(()=>{Bt.subscribe({authors:[e]},void 0,!0),Bt.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),Re.getDirectMessages()},200),setInterval(()=>{console.log("handled msgs per second",Math.round(Re.handledMsgsPerSecond/5)),Re.handledMsgsPerSecond=0},5e3)},init:function(e){de.getOrCreate(e),De.get("loggedIn").on(()=>this.onLoggedIn()),De.get("loggedIn").on(()=>this.onLoggedIn())}};let Su=class extends $n{constructor(){super();ce(this,"userId",null);ce(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(t){t.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}setTitle(t){let n=t.split("/")[1]||he("home");n.startsWith("note")?n=he("post"):n.startsWith("npub")?(this.userId=n,n=v(Er,{pub:this.userId||""},`${this.userId}title`)):n=n.charAt(0).toUpperCase()+n.slice(1);const i=t.replace("/chat/new","").replace("/chat/","");t.indexOf("/chat/")===0&&t.indexOf("/chat/new")!==0&&(this.userId=i.length<t.length?i:null,t.indexOf("/chat/")===0&&this.userId===de.getPubKey()?n=v(lt,{children:[v("b",{className:"mr-5",children:"📝"})," ",v("b",{children:he("note_to_self")})]}):n=v(Er,{pub:this.userId||""},`${this.userId}title`)),this.setState({title:n})}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),De.get("showParticipants").on(this.inject()),De.get("unseenMsgsTotal").on(this.inject()),De.get("unseenNotificationCount").on(this.inject()),De.get("showConnectedRelays").on(this.inject()),De.get("isMyProfile").on(this.inject()),De.get("activeRoute").on(this.sub(t=>{this.setState({about:null,activeRoute:t,showMobileSearch:!1}),this.setTitle(t)})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){window.scrollTo(0,0),this.userId&&this.userId.indexOf("hashtag")===-1&&_r("/"+this.userId)}updateRelayCount(){this.setState({connectedRelays:sn.getConnectedRelayCount()})}renderSearchBox(){return this.userId?"":v(WP,{onSelect:t=>_r(`/${t.key}`)})}renderConnectedRelays(){return v("a",{href:"/settings/network",className:`ml-2 tooltip tooltip-bottom mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,"data-tip":he("connected_relays"),children:v("small",{className:"flex items-center gap-2",children:[v("span",{class:"icon",children:eo.network}),v("span",{children:this.state.connectedRelays})]})})}renderTitle(){const t=this.state.activeRoute==="/";return v("div",{className:`flex-1 text-center ${t?"invisible md:visible":""}`,onClick:()=>this.onTitleClicked(),children:this.state.title})}renderNotifications(){return v(lt,{children:[v(dt,{when:this.state.isMyProfile,children:v(Qt,{href:"/settings",className:"md:hidden",children:v(_H,{width:28})})}),v("a",{href:"/notifications",className:`relative inline-block ${this.state.isMyProfile?"hidden md:flex":""}`,children:[this.state.activeRoute==="/notifications"?v(v3,{width:28}):v(xH,{width:28}),v(dt,{when:this.state.unseenNotificationCount,children:v("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-iris-purple text-white text-sm rounded-full h-5 w-5 flex items-center justify-center",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount})})]})]})}renderLoginBtns(){return v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>De.get("showLoginModal").put(!0),children:he("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>De.get("showLoginModal").put(!0),children:he("sign_up")})]})}renderBackBtnOrLogo(){return this.state.activeRoute==="/"?v(lt,{children:[v("div",{className:"flex flex-row items-center gap-2 md:hidden",children:[v("img",{src:"/img/dwotr/logo30.png",style:"padding-top:5px"}),v("h1",{className:"text-3xl",children:"Dpeep"})]}),v("h6",{children:"Iris clone with DWoTR"})]}):v(SH,{width:24,onClick:()=>this.backButtonClicked()})}render(){const n=!!de.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[this.renderBackBtnOrLogo(),v(dt,{when:n&&this.state.showConnectedRelays,children:this.renderConnectedRelays()}),this.renderTitle(),v(dt,{when:n,children:this.renderNotifications()}),v(dt,{when:!n,children:this.renderLoginBtns()})]})})})}};const J0="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8";class LTe extends $n{render(){return v(lt,{children:[v(Su,{}),v("div",{className:"main-view prose",id:"settings",children:v("div",{className:"px-2 md:px-4 py-2",children:[v("h2",{className:"mt-0",children:he("about")}),v("p",{children:"Iris is like the social networking apps we're used to, but better:"}),v("ul",{children:[v("li",{children:[v("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),v("li",{children:[v("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),v("li",{children:[v("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!hr.isStandalone()&&v(lt,{children:[v("h3",{children:"Versions"}),v("p",{children:v("ul",{children:[v("li",{children:[v("a",{target:"_blank",href:"https://iris.to",children:"iris.to"})," ","(web)"]}),v("li",{children:[v("a",{target:"_blank",href:"https://github.com/irislib/iris-messenger/releases/latest",children:"Desktop"})," ","(macOS, Windows, Linux)"]}),v("li",{children:v("a",{target:"_blank",href:"https://apps.apple.com/app/iris-the-nostr-client/id1665849007",children:"iOS"})}),v("li",{children:[v("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=to.iris.twa",children:"Android"})," ","(",v("a",{target:"_blank",href:"https://github.com/irislib/iris-messenger/releases/tag/jan2023",children:"apk"}),")"]})]})})]}),v("h3",{children:"Iris docs"}),v("p",{children:["Visit Iris ",v("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),v("h3",{children:"Privacy"}),v("p",{children:he("application_security_warning")}),v("h3",{children:"Follow"}),v("div",{className:"flex flex-row items-center w-full justify-between",children:[v(Qt,{href:`/${J0}`,className:"flex flex-row items-center gap-2",children:[v(fs,{str:J0,width:40}),v(Er,{pub:J0,placeholder:"Iris"})]}),v(jh,{className:"btn btn-neutral btn-sm",id:J0})]}),v("p",{children:[v("a",{href:"https://t.me/irismessenger",children:"Telegram"})," channel."]}),v("p",{children:["Released under MIT license. Code:"," ",v("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"."]}),v("br",{})]})})]})}}class GP extends jn{constructor(){super(...arguments);ce(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t.message}}componentDidCatch(t){console.error(t),this.setState({error:t.message})}render(){return this.state.error?v("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}const FTe=e=>e;function jTe({date:e}){const r=new Date,t=Math.floor((r.getTime()-e.getTime())/1e3),n=60,i=60*n,s=24*i;let o="";return t<n?o=FTe("now"):t<i?o=Math.floor(t/n)+"m":t<s?o=Math.floor(t/i)+"h":e.getFullYear()===r.getFullYear()?o=e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):o=e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),v(lt,{children:o})}const zTe=gi(({event:e})=>{var r,t;return v("div",{className:"flex gap-4 w-full break-words",children:[v("div",{className:"flex-shrink-0",children:v(Qt,{href:`/${Dc.npubEncode(e.pubkey)}`,children:v(fs,{str:e.pubkey,width:30})})}),v(Qt,{href:`/${Dc.noteEncode(e.id)}`,className:"w-full",children:[v("b",{children:v(Er,{pub:e.pubkey})})," | ",v("span",{className:"text-neutral-400",children:[v(jTe,{date:new Date(e.created_at*1e3)}),v("br",{}),((r=e.content)==null?void 0:r.length)>80?`${(t=e.content)==null?void 0:t.slice(0,80)}...`:e.content]})]})]},e.id)}),HTe=({events:e})=>{const r=[];return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:[v(aue,{width:20,className:"text-iris-orange"}),"Trending 24h"]}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-6 text-xs overflow-x-hidden",children:e.filter(t=>!r[t.pubkey]).map(t=>v(zTe,{event:t}))})]})},UTe=gi(HTe),IV=(e,r,t=n=>n)=>{const n=localStorage.getItem(r),i=n?JSON.parse(n).data:[],[s,o]=Me(i);return St(()=>{const a=()=>{fetch(e).then(l=>l.json()).then(l=>{const u=t(l);o(u),localStorage.setItem(r,JSON.stringify({data:u,timestamp:new Date().getTime()}))}).catch(()=>{if(n){const{data:l}=JSON.parse(n);o(l)}})};if(n){const{timestamp:l}=JSON.parse(n);(new Date().getTime()-l)/1e3/60>=15&&a()}else a()},[e,r,t]),s},WTe=e=>{const[r,t]=Me(ls.getDefaultProfile(vt(e)));return St(()=>{if(!e)return;const n=ls.getProfile(e,i=>{i&&t(i)});return()=>{n()}},[e]),r},qTe=gi(({pubkey:e})=>{var t,n;const r=WTe(e);return v(Qt,{href:`/${Dc.npubEncode(e)}`,className:"flex flex-row gap-4 w-full break-words",children:[v("span",{className:"flex-shrink-0",children:v(fs,{str:e,width:30})}),v("span",{className:"flex-1",children:[v("b",{children:v(Er,{pub:e})}),v("br",{}),v("span",{className:"text-neutral-400",children:[(t=r==null?void 0:r.about)==null?void 0:t.slice(0,100),((n=r==null?void 0:r.about)==null?void 0:n.length)>100?"...":""]})]}),v("span",{className:"flex-shrink-0",children:v(jh,{className:"btn btn-sm",id:e})})]},e)}),KTe=gi(()=>{const e=`https://api.nostr.band/v0/suggested/profiles/${de.getPubKey()}`,r=IV(e,"followSuggestions",n=>n.profiles||[]);if(!r.length)return null;const t=r.sort(()=>.5-Math.random()).slice(0,8).map(n=>n.pubkey);return v("div",{className:"card-body p-2",children:[v("h2",{className:"card-title",children:"Follow suggestions"}),v("hr",{className:"opacity-10"}),v("div",{className:"flex flex-wrap gap-4 items-center text-xs overflow-x-hidden",children:t.map(n=>v(qTe,{pubkey:n},n))})]})}),AV=e=>{const n=IV("https://api.nostr.band/v0/trending/notes","trendingNotes",i=>{const s=i.notes.map(o=>o.event);return s.forEach(o=>{Re.handle(o)}),s});return v("div",{class:"sticky border-l border-neutral-900 top-0 right-0 px-4 py-2 mx-2 md:mx-0 flex flex-col gap-4 h-screen",children:[v(WP,{focus:e.focus,onSelect:({key:i})=>{_r("/"+i)}}),v("div",{className:"max-h-[50vh] overflow-y-scroll",children:v(UTe,{events:n})}),v("div",{className:"max-h-[50vh] overflow-y-scroll",children:v(KTe,{})})]})};let OV=!0;const CV=function(){OV=!1,window.removeEventListener("popstate",CV)};window.addEventListener("popstate",CV);let zh=class extends $n{constructor(){super(...arguments);ce(this,"class","");ce(this,"id","");ce(this,"observer",null);ce(this,"scrollPosition",0);ce(this,"hideSideBar",!1);ce(this,"hideHeader",!1);ce(this,"saveScrollPosition",wn.debounce(()=>{const t=window.scrollY||document.documentElement.scrollTop,i={...window.history.state,scrollPosition:t};window.history.replaceState(i,"")},100));ce(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(t=>{t.forEach(()=>{this.restoreScrollPosition(!1)})}),this.observer.observe(document.body),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3)})}render(){return v("div",{className:"flex flex-row h-full w-full",children:[v("div",{className:`flex flex-col w-full h-full ${this.hideSideBar?"":"lg:w-2/3"}`,children:[v(dt,{when:!this.hideHeader,children:v(Su,{})}),v("div",{class:this.class,id:this.id,className:"h-full",children:v(GP,{children:this.renderView()})})]}),v(dt,{when:!this.hideSideBar,children:v("div",{className:"flex-col hidden lg:flex lg:w-1/3",children:v(AV,{focus:!1})})})]})}componentDidMount(){window.addEventListener("scroll",this.saveScrollPosition),this.restoreScrollPosition()}restoreScrollPosition(t=!0){var s,o;const n=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!OV&&n!==i)t&&this.observeScrollElement(),this.scrollPosition||(this.scrollPosition=(o=window.history.state)==null?void 0:o.scrollPosition),this.scrollPosition&&window.scrollTo(0,this.scrollPosition);else{const l={...window.history.state||{},previousState:n};window.history.replaceState(l,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect(),window.removeEventListener("scroll",this.saveScrollPosition)}};const VTe=({chat:e,active:r=!1,latestMsgId:t=null})=>{const[n,i]=Me(null),[s,o]=Me({}),[a,l]=Me("");St(()=>{e.length<20&&De.get("groups").get(e).on(b=>{b.name&&i(b.name)}),f()},[e]),St(()=>{f()},[t]);const u=w=>{w.keyCode===13&&w.target.click()},f=()=>{if(!t)return;const w=Re.db.by("id",t);w&&(o(w),de.decryptMessage(t,b=>{l(b)}))},c=r?"bg-neutral-800":"hover:bg-neutral-900",d=s.created_at&&hr.getRelativeTimeText(new Date(s.created_at*1e3))||"",y=de.toNostrBech32Address(e,"npub");return v("div",{onKeyUp:u,role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 ${c}`,onClick:()=>_r(`/chat/${y||e}`),children:[v(fs,{str:y||e,width:49}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:[v("span",{className:"name",children:[v(dt,{when:n,children:n}),v(dt,{when:!n,children:[v(dt,{when:e===de.getPubKey(),children:v("span",{className:"font-bold italic",children:["📝 ",he("note_to_self")]})}),v(dt,{when:e!==de.getPubKey(),children:v(Er,{pub:e})}),v("small",{className:"ml-2 latest-time text-neutral-500",children:d})]})]}),v("small",{className:"text-neutral-500 truncate",children:a})]})})]})},GTe=gi(VTe),YTe=({active:e})=>v("div",{role:"button",tabIndex:0,className:`flex p-2 flex-row gap-4 h-16 items-center cursor-pointer hover:bg-neutral-900 ${e?"bg-neutral-700":""}`,onClick:()=>_r("/chat/new"),children:[v("div",{className:"flex justify-center items-center w-12 h-12 rounded-full",children:v(AH,{className:"w-6 h-6"})}),v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col",children:v("span",{className:"name",children:he("new_chat")})})})]}),ZTe=Date.now(),XTe=({activeChat:e,className:r})=>{const[t,n]=Me(new Map),[i,s]=Me(new Map),[o,a]=Me([]),[l]=Me(Date.now()-ZTe<1e3),u=Vo(null),f=()=>{Notification&&Notification.requestPermission().then(d=>{(d==="granted"||d==="denied")&&Jt("#enable-notifications-prompt").slideUp()})};St(()=>{const d=[],y=()=>{d.push(Re.getDirectMessages(async w=>{let b=Array.from(w.keys());const T=await De.get("globalFilter").get("maxFollowDistance").once(),_=Object.keys(await De.get("blockedUsers").once()||{});b=b.filter(x=>!_.includes(x)&&et.getFollowDistance(x)<=T);const A=new Map(b.map(x=>[x,w.get(x)]));n(A)}))};return l?setTimeout(y,1e3):y(),d.push(De.get("scrollUp").on(()=>{window.scrollTo(0,0),u.current&&(u.current.scrollTop=0)})),d.push(De.get("groups").map((w,b)=>{w&&b&&(w.eventIds=new Map,s(T=>new Map(T.set(b,w))))})),()=>d.forEach(w=>w())},[]),St(()=>{const d=new Map(t);i.forEach((w,b)=>{d.set(b,w)});const y=Array.from(d.keys()).sort((w,b)=>{if(w.length<b.length)return-1;const T=d.get(w).eventIds,_=d.get(b).eventIds,A=T.length?Re.db.by("id",T[0]):null,x=_.length?Re.db.by("id",_[0]):null;return(x==null?void 0:x.created_at)-(A==null?void 0:A.created_at)});a(y)},[t,i]);const c=e&&de.toNostrHexAddress(e)||e;return v("section",{className:`md:border-r border-neutral-800 overflow-x-hidden overflow-y-auto h-full md:px-0 w-full md:w-64 ${r}`,ref:u,children:[v("div",{id:"enable-notifications-prompt",className:"hidden",onClick:f,children:[v("div",{className:"title",children:he("get_notified_new_messages")}),v("div",{children:v("a",{children:he("turn_on_desktop_notifications")})})]}),v("div",{className:"flex flex-1 flex-col",children:[v(YTe,{active:c==="new"}),o.map(d=>{var y;return v(GTe,{active:d===c,chat:d,latestMsgId:(y=t.get(d))==null?void 0:y.eventIds[0]},d)})]})]})},PV=e=>{const[r,t]=Me(e.text||""),[n,i]=Me(null),[s,o]=Me(!1);St(()=>{Jt("a").click(_=>{const A=Jt(_.target).attr("href");A&&A.indexOf("https://iris.to/")===0&&(_.preventDefault(),_r(A.replace("https://iris.to/","")))});let T=r;T?a(T):de.decryptMessage(e.id,_=>{T=_,a(T)})},[e.id,r]);const a=T=>{try{const _=T.slice(T.indexOf("{")),A=JSON.parse(_);if(g_(A)&&$m(A)&&A.tags.length===1&&A.tags[0][0]==="p"&&A.tags[0][1]===e.pubkey){A.text=A.content,i(A);return}}catch{}o(!0),t(T)};if(n)return v(PV,{...n,showName:!0,selfAuthored:n.pubkey===de.getPubKey()});if(!s)return null;const l=()=>{_r(`/${de.toNostrBech32Address(e.pubkey,"npub")}`)},u=r&&r.length===2&&hr.isEmoji(r),f=hr.highlightEverything(r||""),c=typeof e.created_at=="object"?e.created_at:new Date(e.created_at*1e3),d="",y=d.seen?"text-green-500":"text-neutral-500",w=d.delivered?"border-green-500":"border-neutral-500",b=e.selfAuthored?"self-end bg-iris-blue text-white":"self-start bg-neutral-700 text-white";return v("div",{className:`p-2 w-full md:w-2/3 rounded-xl mb-1 ${b} ${y} ${w} flex flex-col items-start`,children:v("div",{className:"w-full",children:[v("div",{className:"mb-2",children:e.showName&&v("small",{onClick:l,className:"cursor-pointer text-xs",children:v(Er,{pub:e.pubkey},e.pubkey)})}),e.torrentId&&v(Rm,{torrentId:e.torrentId}),v("div",{className:`preformatted-wrap text-base ${u?"text-4xl":""}`,children:f}),v("div",{className:`${e.selfAuthored?"text-right":"text-left"} text-xs text-white`,children:e.id?hr.getRelativeTimeText(c):hr.formatTime(c)})]})})},JTe=gi(PV),QTe=({activeChat:e,class:r,autofocus:t,onSubmit:n,keyPair:i})=>{const[s,o]=Me(""),a=Vo(null);St(()=>{var d;!hr.isMobile&&t!==!1&&((d=a.current)==null||d.focus())},[t]);const l=d=>{try{const y=de.toNostrHexAddress(e);if(!y)throw new Error("invalid public key "+y);return de.encrypt(d,y)}catch(y){console.error(y)}},u=async d=>{if(d.preventDefault(),!s.length)return;const y=4,w=Math.floor(Date.now()/1e3),b={kind:y,created_at:w};if(i){let T={kind:y,created_at:w,content:s,tags:[["p",i.pubKey]]};T=await Re.sign(T),b.content=await Fp.encrypt(i.privKey,i.pubKey,`${s}

${JSON.stringify(T)}`),b.pubkey=i.pubKey,b.tags=[["p",i.pubKey]],console.log("event",b),b.id=Eh(b),b.sig=U3(b,i.privKey)}else{const T=de.toNostrHexAddress(e);if(b.content=await l(s),b.tags=[["p",T]],!T)throw new Error("invalid public key "+T)}Re.publish(b),o(""),n==null||n()},f=d=>{const y=d.target.value;o(y),De.get("channels").get(e).get("msgDraft").put(y)},c=d=>{(d.metaKey||d.ctrlKey)&&d.key==="Enter"&&u(d)};return v("form",{autoComplete:"off",className:`flex flex-none flex-row gap-2 p-2 message-form sticky w-full bottom-0 w-96 max-w-screen bg-black ${r||""}`,onSubmit:u,children:[v("input",{ref:a,className:"input input-sm flex-1 new-msg",onInput:f,onKeyDown:c,type:"text",placeholder:"Type a message",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0,value:s}),v("button",{className:"btn btn-neutral btn-sm",style:{marginRight:"0"},children:v(p3,{width:"24"})})]})};function eIe({id:e}){const r=Vo(null),[t,n]=Me([]),[i,s]=Me(!0),[o,a]=Me(""),[l,u]=Me(!1),[f,c]=Me(void 0),[d,y]=Me(!1);let w,b;const T=()=>{let B=Jt(".day-separator").last(),L=B.position();for(;B&&L&&L.top-55>0;)B=B.prevAll(".day-separator").first(),L=B.position();const q=B.clone(),Q=Jt("<div>").css({position:"fixed",top:70,"text-align":"center"}).attr("id","floating-day-separator").width(Jt("#message-view").width()).append(q);Jt("#floating-day-separator").remove(),setTimeout(()=>q.fadeOut(),2e3),Jt("#message-view").prepend(Q)},_=()=>{const B=de.toNostrHexAddress(e);q1e(B)},A=()=>{const B=Jt("#message-view");B[0].scrollHeight-B.scrollTop()<=B.outerHeight()+200?Jt("#scroll-down-btn:visible").fadeOut(150):Jt("#scroll-down-btn:not(:visible)").fadeIn(150)},x=$h(()=>(f==null?void 0:f.privKey)&&de.toNostrBech32Address(f.privKey,"nsec")||"",[f]),I=()=>{b=b||$_(()=>{Jt("#attachment-preview:visible").length||(T(),A())},200),b()},O=()=>{hr.scrollToMessageListBottom();const B=document.getElementById("message-list");B&&(B.style.paddingBottom="0")},C=()=>{let B;const L=de.getPubKey(),q=new Date,Q=q.toLocaleDateString();let re,Z;const j=[];return e&&e.length>4&&(t.forEach(X=>{let ie;if(typeof X=="string"?ie=Re.db.by("id",X):ie=X,!ie)return null;const Ee=new Date(ie.created_at*1e3);let $e;if(Ee){const He=Ee.toLocaleDateString();if(He!==re){$e=!0;const Ve=hr.getDaySeparatorText(Ee,He,q,Q);j.push(v("div",{className:"px-2 mt-3 mb-4 py-1 inline-block day-separator bg-black opacity-50 text-white rounded-full",children:he(Ve.toLowerCase())}))}re=He}let Pe=$e;!$e&&Z&&ie.pubkey!==Z&&(j.push(v("div",{className:"m-2"})),Pe=!0),Z=ie.pubkey,j.push(Je(JTe,{...ie,showName:Pe,selfAuthored:ie.pubkey===L,key:`${ie.created_at}${ie.pubkey}`,chatId:e}))}),B=v("div",{className:"main-view p-2 overflow-y-auto overflow-x-hidden flex-grow min-h-screen",id:"message-view",onScroll:()=>I(),children:[v("div",{id:"message-list",className:"w-full flex flex-col items-center",children:[j,v("div",{className:"italic my-2 text-neutral-500 w-full text-center",children:[v(dt,{when:d&&f,children:[v("div",{children:he("secret_chat")}),v("div",{className:"flex gap-2 flex-1 items-center justify-center my-4",children:[v("button",{className:"btn btn-neutral btn-sm",onClick:()=>u(X=>!X),children:[v(Iue,{width:"20"}),he("show_qr_code")]}),v(Hi,{className:"btn btn-neutral btn-sm",copyStr:x(),text:"Copy nsec"}),v(Hi,{className:"btn btn-neutral btn-sm",copyStr:hr.buildURL("chat",void 0,x()),text:he("copy_link")})]}),v(dt,{when:l,children:v(KP,{data:"nostr:"+x()})})]}),v(dt,{when:!d&&de.toNostrHexAddress(e)!==L,children:[v("div",{children:he("dm_privacy_warning")}),v("div",{className:"mt-4 flex gap-2 justify-center",children:[v(dt,{when:o,children:v("button",{className:"btn btn-neutral btn-sm",onClick:()=>M_(o),children:"Go to secret chat"})}),v(dt,{when:!o,children:v("button",{className:"btn btn-neutral btn-sm",onClick:_,children:"Invite to secret chat"})})]})]})]})]}),v("div",{id:"attachment-preview",className:"attachment-preview",style:{display:"none"}})]})),B},g=new Map,M=()=>v(lt,{children:[v("div",{id:"scroll-down-btn",style:{display:"none"},onClick:()=>O(),children:v(Nle,{width:"24"})}),v(QTe,{activeChat:e,onSubmit:()=>O(),keyPair:f},e)]});return St(()=>{const B=de.toNostrHexAddress(e),L=re=>{w=Bt.subscribe({kinds:[4],"#p":[de.getPubKey()],authors:[re]}),Re.getDirectMessagesByUser(re,Z=>{Z&&n(Z.reverse())})};De.get("chatInvites").get(B).once(re=>{re!=null&&re.priv&&a(re.priv)});const q=()=>{De.get("groups").get(e).on(re=>{const Z=re.key,j=Lp(Z);c({privKey:Z,pubKey:j}),w=Bt.subscribe({kinds:[4],"#p":[j],authors:[j]},async X=>{const ie=await Fp.decrypt(Z,j,X.content);g.set(X.id,{...X,text:ie}),n(Array.from(g.values()))})})};B?L(B):(y(!0),q());const Q=document.getElementById("message-list");if(Q){Q.style.paddingBottom="0",Q.style.paddingTop="0";const re=Jt("#message-view");re.off("scroll").on("scroll",()=>{const Z=re[0].scrollHeight-re.scrollTop()==re.outerHeight();i&&!Z?s(!1):!i&&Z&&s(!0)})}return()=>{w&&w()}},[e]),St(()=>{i&&hr.scrollToMessageListBottom(),Jt(".msg-content img").off("load").on("load",()=>i&&hr.scrollToMessageListBottom())},[i]),v(lt,{children:[v(_h,{children:v("title",{children:"Messages"})}),v("div",{id:"chat-main",ref:r,className:`${e?"":"hidden"} flex flex-1 flex-col`,children:[C(),v(dt,{when:e&&e.length>4,children:M()})]})]})}const tIe=({activeChat:e})=>{const r=()=>{window.history.back()},t=()=>{window.scrollTo(0,0),e&&e.length>15&&_r("/"+de.toNostrBech32Address(e,"npub"))},n=()=>v("div",{className:"flex gap-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>De.get("showLoginModal").put(!0),children:he("log_in")}),v("button",{className:"btn btn-sm btn-neutral",onClick:()=>De.get("showLoginModal").put(!0),children:he("sign_up")})]}),s=!!de.getPubKey();return v("div",{className:"sticky top-0 z-10 cursor-pointer flex flex-wrap",onClick:t,children:v("div",{className:"w-full overflow-x-hidden bg-black md:bg-opacity-50 md:shadow-lg md:backdrop-blur-lg px-2",children:v("div",{className:"flex items-center justify-between h-12",children:[v(SH,{width:24,onClick:r}),v(dt,{when:e,children:v("div",{className:"flex flex-row gap-2 items-center",children:[v(fs,{width:30,str:e}),v(Er,{pub:e})]})}),v(dt,{when:!e,children:v("div",{className:"flex flex-row gap-2 items-center",children:he("chat")})}),v(dt,{when:s,children:v("div",{})}),v(dt,{when:!s,children:n()})]})})})};class d8 extends zh{constructor(){super();ce(this,"id");ce(this,"renderContent",t=>t==="new"?v(K1e,{}):t?v(eIe,{id:t},t):v("div",{className:"hidden md:flex flex-col items-center justify-center flex-1",children:[v("div",{className:"my-4",children:v(g3,{className:"w-24 h-24 text-neutral-400"})}),v("div",{className:"text-neutral-400",children:he("dm_privacy_warning")})]}));this.id="chat-view",this.hideSideBar=!0,this.hideHeader=!0}componentDidMount(){super.componentDidMount();const t=window.location.hash.substr(1);t&&t.startsWith("nsec")&&(window.history.replaceState({},document.title,window.location.pathname),de.getPubKey()||de.loginAsNewUser(),IK(t))}renderView(){const{id:t}=this.props;return v("div",{className:"flex flex-col h-screen",children:[v(tIe,{activeChat:t},t),v("div",{className:"flex flex-row flex-grow overflow-hidden",children:[v("div",{className:`flex-shrink-0 ${t?"hidden md:flex overflow-y-auto h-screen":"flex overflow-y-auto h-screen"}`,children:v(XTe,{activeChat:t,className:t?"hidden md:flex":"flex"})}),v("div",{className:`flex-grow min-h-screen overflow-y-scroll ${t?"flex":"hidden md:flex"}`,children:this.renderContent(t)},`chat-content-${t}`)]})]})}}const rIe=e=>{const[r,t]=Me("");return v(lt,{children:[v("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;if(s&&s.length){const o=new FormData;o.append("fileToUpload",s[0]),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:o}).then(async a=>{const l=await a.json();l&&e.onUrl&&e.onUrl(l)}).catch(a=>{console.error("upload error",a),t("upload failed: "+JSON.stringify(a))})}}}),r?v("p",{children:r}):null]})},nIe={lud16:"Bitcoin lightning address ⚡ (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class iIe extends $n{constructor(t){super(t);ce(this,"saveOnChange",wn.debounce(()=>{const t=this.state.profile;Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n]=t[n].trim())}),et.setMetadata(t)},2e3));ce(this,"setProfileAttribute",(t,n)=>{t=t.trim();const i=Object.assign({},this.state.profile);n?i[t]=n:delete i[t],this.setState({profile:i,edited:!0}),this.saveOnChange()});ce(this,"handleSubmit",t=>{t.preventDefault(),et.setMetadata(this.state.profile);const n=de.toNostrBech32Address(de.getPubKey(),"npub");_r("/"+n)});ce(this,"handleAddField",t=>{t.preventDefault();const n=this.state.newFieldName,i=this.state.newFieldValue;n&&i&&(this.setProfileAttribute(n,i),this.setState({newFieldName:"",newFieldValue:""}),et.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){et.getProfile(de.getPubKey(),t=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete t.created_at,this.setState({profile:t}))})}render(){const t=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(n=>{t.includes(n)||t.push(n)}),v(lt,{children:[v(Su,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container prose",children:[v("h3",{children:he("edit_profile")}),v("form",{onSubmit:n=>this.handleSubmit(n),children:[t.map(n=>{const i=this.state.profile[n],s=typeof i=="string"||typeof i>"u";return v("p",{children:[v("label",{htmlFor:n,children:[nIe[n]||n,":"]}),v("br",{}),v("input",{className:"input w-full",type:"text",id:n,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:o=>s&&this.setProfileAttribute(n,o.target.value)}),n==="lud16"&&!i&&v("p",{children:v("small",{children:he("install_lightning_wallet_prompt")})}),n==="picture"||n==="banner"?v(lt,{children:[v("p",{children:v(rIe,{onUrl:o=>this.setProfileAttribute(n,o)})}),i&&v("p",{children:v(yu,{src:i})})]}):null]})}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Save"})})]}),v("h4",{children:"Add new field"}),v("form",{onSubmit:n=>this.handleAddField(n),children:[v("p",{children:[v("label",{htmlFor:"newFieldName",children:"Field name:"}),v("br",{}),v("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",className:"input w-full",placeholder:he("field_name"),onInput:n=>this.setState({newFieldName:n.target.value})})]}),v("p",{children:[v("label",{htmlFor:"newFieldValue",children:"Field value:"}),v("br",{}),v("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",className:"input w-full",placeholder:he("field_value"),onInput:n=>this.setState({newFieldValue:n.target.value})})]}),v("p",{children:v("button",{className:"btn btn-primary",type:"submit",children:"Add new attribute"})})]})]})})]})}}const p8=_n.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;

  &:nth-child(odd) {
    background-color: var(--zebra-stripe-bg);
  }
`,Q0=_n.div`
  flex: 1;
  padding: 0 10px;

  &:first-of-type {
    flex: none;
  }
`,NV=({path:e})=>{const[r,t]=Me(void 0);return St(()=>{var i;const n=(i=Th.public)==null?void 0:i.get(e,t);return()=>n==null?void 0:n.off()}),typeof r=="object"&&r!==null?v(p8,{children:[v(Q0,{children:e}),v(Q0,{children:Object.keys(r).map(n=>v(NV,{path:`${e}/${n}`}))})]}):v(p8,{class:"node",children:[v(Q0,{children:e}),v(Q0,{children:JSON.stringify(r)})]})};function v8({path:e}){return e=e||"/",v(lt,{children:[v(Su,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container",children:[v("h2",{children:[he("explorer")," ",e]}),v("div",{class:"explorer",children:v(NV,{path:e})})]})})]})}function sIe({events:e,displayCount:r,renderAs:t,showRepliedMsg:n,openedAt:i,settings:s}){return e.slice(0,r).map(o=>v(GP,{children:v(Wo,{id:o,showRepliedMsg:n,renderAs:t,feedOpenedAt:i,showReplies:0,fullWidth:!s.showReplies},o)}))}const oIe=gi(sIe),aIe=({settings:e,onChange:r})=>{const[t,n]=Me(e);St(()=>{n(e)},[e]);const i=()=>{const l=new URL(window.location.href);t.display==="grid"?l.searchParams.set("display","grid"):l.searchParams.delete("display"),t.showReplies===!1?l.searchParams.set("showReplies","0"):l.searchParams.delete("showReplies"),t.realtime?l.searchParams.set("realtime","1"):l.searchParams.delete("realtime"),window.history.replaceState({},document.title,l.toString())},s=()=>{r(t),i()},o=[{type:"checkbox",id:"display_realtime",checked:t.realtime,label:he("realtime"),onChange:()=>n({...t,realtime:!t.realtime})},{type:"checkbox",id:"show_replies",checked:t.showReplies,name:"show_replies",label:he("show_replies"),onChange:()=>n({...t,showReplies:!t.showReplies})}],a=[{label:he("display"),name:"display",inputs:[{value:"posts",id:"display_posts",label:he("posts")},{value:"grid",id:"display_grid",label:he("grid")}],checked:t.display,onChange:l=>n({...t,display:l.target.value})},{label:he("sort_by"),name:"sortBy",inputs:[{value:"created_at",id:"sortByTime",label:he("time")},{value:"likes",id:"sortByLikes",label:he("likes")},{value:"zaps",id:"sortByZaps",label:he("zaps")}],checked:t.sortBy,onChange:l=>n({...t,sortBy:l.target.value})},{label:he("sort_direction"),name:"ordering",inputs:[{value:"desc",id:"ordering_desc",label:"▼"},{value:"asc",id:"ordering_asc",label:"▲"}],checked:t.sortDirection,onChange:l=>n({...t,sortDirection:l.target.value})},{label:he("timespan"),name:"timespan",inputs:[{value:"all",id:"timespanAll",label:he("All time")},{value:"day",id:"timespanDay",label:he("day")},{value:"week",id:"timespanWeek",label:he("week")},{value:"month",id:"timespanMonth",label:he("month")},{value:"year",id:"timespanYear",label:he("year")}],checked:t.timespan,onChange:l=>n({...t,timespan:l.target.value})}];return v("div",{className:"msg",children:v("div",{className:"msg-content",children:v("div",{style:"display:flex;flex-direction:column",children:[v("div",{children:o.map((l,u)=>v("span",{children:[v("input",{...l}),v("label",{htmlFor:l.id,children:l.label})]},u))}),a.map((l,u)=>v("div",{style:{flexDirection:"column"},children:[v("p",{children:[l.label,":"]}),v("p",{children:l.inputs.map((f,c)=>v("span",{children:[v("input",{type:"radio",name:l.name,id:f.id,value:f.value,checked:l.checked===f.value,onChange:l.onChange}),v("label",{htmlFor:f.id,children:f.label})]},c))})]},u)),v("p",{children:v(ch,{onClick:s,children:he("save")})})]})})})};function lIe({setDisplay:e,display:r,index:t}){const n=["posts","postsAndReplies","likes"].includes(t);return v("div",{className:"flex mb-px lg:mb-1",children:[v("button",{onClick:()=>{e("posts"),De.get("settings").get("feed").get("display").put("posts")},className:`${r==="grid"?"hover:bg-neutral-900":"bg-neutral-800"} ${n?"isProfile_left":""} rounded-sm flex justify-center flex-1 p-3`,children:v(Ele,{width:24,height:24})}),v("button",{onClick:()=>{e("grid"),De.get("settings").get("feed").get("display").put("grid")},className:`${r==="grid"?"bg-neutral-800":"hover:bg-neutral-900"} ${n?"isProfile_right":""} rounded-sm flex justify-center flex-1 p-3`,children:v(Zle,{width:24,height:24})})]})}const uIe=_n.div`
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 4px;
  @media (max-width: 1023px) {
    grid-gap: 1px;
  }
`;function cIe({onClick:e}){return v("button",{className:"btn btn-neutral btn-sm m-4",onClick:e,children:he("show_more")})}function fIe({onClick:e}){return v("div",{className:"fixed bottom-16 md:bottom-8 justify-center items-center z-10 flex w-full md:w-1/2 pb-safe-area",children:v("div",{className:"btn btn-sm opacity-90 hover:opacity-100 hover:bg-iris-blue bg-iris-blue text-white",onClick:e,children:he("show_n_new_messages").replace("{n} ","")})})}class g8{constructor(r,t){ce(this,"eventMap");ce(this,"sortedEventIds");ce(this,"sortBy");ce(this,"sortDirection");this.sortBy=r,this.sortDirection=t,this.eventMap=new Map,this.sortedEventIds=[]}compareFn(r,t){var s,o,a,l;let n,i;return!r||!t?0:r&&!t?-1:!r&&t?1:(this.sortBy==="created_at"?(n=r.created_at,i=t.created_at):this.sortBy==="likes"?(n=((s=Re.likesByMessageId.get(r.id))==null?void 0:s.size)||0,i=((o=Re.likesByMessageId.get(t.id))==null?void 0:o.size)||0):this.sortBy==="zaps"&&(n=((a=Re.zapsByNote.get(r.id))==null?void 0:a.size)||0,i=((l=Re.zapsByNote.get(t.id))==null?void 0:l.size)||0),this.sortDirection==="desc"?i-n:n-i)}has(r){return this.eventMap.has(r)}add(r){if(!r||!r.id||!r.created_at)throw new Error("Invalid event");return this.eventMap.has(r.id)?!1:(this.eventMap.set(r.id,r),this.insertEventId(r.id),!0)}delete(r){if(!this.eventMap.delete(r))return!1;const n=this.sortedEventIds.findIndex(i=>i===r);return n===-1?!1:(this.sortedEventIds.splice(n,1),!0)}get eventIds(){return this.sortedEventIds}get(r){return this.eventMap.get(r)}events(){return this.sortedEventIds.map(r=>this.eventMap.get(r))}last(){return this.eventMap.get(this.sortedEventIds[this.sortedEventIds.length-1])}first(){return this.eventMap.get(this.sortedEventIds[0])}get size(){return this.eventMap.size}insertEventId(r){const t=this.eventMap.get(r);let n=0,i=this.sortedEventIds.length;for(;n<i;){const s=Math.floor((n+i)/2),o=this.eventMap.get(this.sortedEventIds[s]);this.compareFn(t,o)<0?i=s:n=s+1}this.sortedEventIds.splice(n,0,r)}}const Dd=10;let RV=!0;const DV=function(){RV=!1,window.removeEventListener("popstate",DV)};window.addEventListener("popstate",DV);const y8={display:"posts",realtime:!1,showReplies:!1,sortBy:"created_at",sortDirection:"desc",timespan:"all"};let hIe=class extends $n{constructor(t){super(t);ce(this,"openedAt");ce(this,"subscribeRetryTimeout");ce(this,"unsub");ce(this,"unsubLoadMore");ce(this,"twoSecondsPassed");ce(this,"sortedEventMap");ce(this,"handleScroll",()=>{if(this.state.displayCount<this.state.events.length){const t=window.scrollY||document.documentElement.scrollTop,n=document.documentElement.clientHeight,i=document.documentElement.scrollHeight;t+n>=i-1e3&&(this.setState({displayCount:this.state.displayCount+Dd}),console.log("show more events",this.state.displayCount))}else if(!this.unsubLoadMore){console.log("loadMore");const t=()=>{var i;(i=this.unsubLoadMore)==null||i.call(this),this.unsubLoadMore=void 0};let n=setTimeout(t,2e3);this.unsubLoadMore=this.getEvents(i=>{console.log("got More"),this.handleEvent(i),clearTimeout(n),n=setTimeout(t,2e3)})}});ce(this,"handleScrollKeys",t=>{const n=t.key;n==="j"&&window.scrollBy({top:document.documentElement.clientHeight/2,left:0,behavior:"smooth"}),n==="k"&&window.scrollBy({top:-document.documentElement.clientHeight/2,left:0,behavior:"smooth"})});ce(this,"replaceState",wn.debounce(()=>{window.history.replaceState({...window.history.state,state:this.state},"")},1e3,{leading:!0,trailing:!0}));let n={};De.get("settings").get("feed").once(i=>n=i),this.state={events:[],queuedEvents:[],displayCount:Dd,settings:this.getSettings(n)},this.openedAt=Math.floor(Date.now()/1e3),this.twoSecondsPassed=!1,this.sortedEventMap=new g8(this.state.settings.sortBy,this.state.settings.sortDirection)}getSettings(t={}){var i,s,o,a;let n={...y8};["global","follows"].includes(((i=this.props)==null?void 0:i.index)||"")&&(n=Object.assign(n,t)),((s=this.props)==null?void 0:s.index)!=="notifications"&&t.display&&(n.display=t.display),((o=this.props)==null?void 0:o.index)==="posts"&&(n.showReplies=!1),["postsAndReplies","notifications","likes"].includes(((a=this.props)==null?void 0:a.index)||"")&&(n.showReplies=!0);for(const l in n){const u=hr.getUrlParameter(l);u!==null&&(u==="1"||u==="0"?n[l]=u==="1":n[l]=u)}return this.props.keyword&&(n.showReplies=!0),n}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("keyup",this.handleScrollKeys),this.unsub&&this.unsub()}componentDidMount(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("keyup",this.handleScrollKeys),this.subscribe(),hV(this.state.settings,y8)&&De.get("settings").get("feed").on(this.sub(t=>{const n=this.getSettings(t);this.setState({settings:n})}))}componentWillMount(){var t;!RV&&((t=window.history.state)!=null&&t.state)&&this.setState(window.history.state.state)}subscribe(){var t,n;(t=this.unsub)==null||t.call(this),(n=this.unsubLoadMore)==null||n.call(this),clearTimeout(this.subscribeRetryTimeout),this.startTwoSecondsTimer(),this.subscribeWithRetry(i=>this.handleEvent(i))}subscribeWithRetry(t){const n=()=>{var i,s;(i=this.unsub)==null||i.call(this),(s=this.unsubLoadMore)==null||s.call(this),this.props.index==="notifications"?this.unsub=Re.notifications.subscribe(o=>{o.forEach(a=>t(Re.db.by("id",a)))}):this.subscribeToEvents(t)};n(),this.sortedEventMap.size===0&&(this.subscribeRetryTimeout=setTimeout(n,1e3))}startTwoSecondsTimer(){this.twoSecondsPassed=!1,setTimeout(()=>{this.twoSecondsPassed=!0},2e3)}update(){const t=this.state.events,n=t[Math.min(this.state.displayCount-1,t.length-1)],i=Re.db.by("id",n),s=[];this.sortedEventMap.events().forEach(o=>{o.created_at<(i==null?void 0:i.created_at)&&s.push(o.id)}),this.updateState(s)}updateState(t){this.twoSecondsPassed&&!this.state.settings.realtime&&this.state.events.length>5?this.setState({queuedEvents:[...this.state.queuedEvents,...t]}):this.setState({events:this.sortedEventMap.eventIds,queuedEvents:[]})}handleEvent(t){this.shouldIgnoreEvent(t)||(this.sortedEventMap.add(t),this.update())}shouldIgnoreEvent(t){var i;if(this.sortedEventMap.has(t.id)||et.isBlocked(t.pubkey))return!0;const n=Re.getEventReplyingTo(t);if(n){if(!this.state.settings.showReplies)return!0;const s=(i=Re.db.by("id",n))==null?void 0:i.pubkey;if(s&&et.isBlocked(s))return!0}return!1}subscribeToEvents(t){var o;this.unsub=this.getEvents(t);const n=vt(de.getPubKey()),i=(o=et.followedByUser.get(n))==null?void 0:o.size,s=Bt.subscribe({authors:[de.getPubKey()],kinds:[3]},()=>{var a;i!==((a=et.followedByUser.get(n))==null?void 0:a.size)&&(s(),this.subscribe())})}getEvents(t){return()=>{}}componentDidUpdate(t,n){var i,s,o,a;(((i=n.settings)==null?void 0:i.showReplies)!==((s=this.state.settings)==null?void 0:s.showReplies)||((o=n.settings)==null?void 0:o.display)!==((a=this.state.settings)==null?void 0:a.display))&&this.subscribe(),this.handleScroll(),this.replaceState(),(this.props.filter!==t.filter||this.props.keyword!==t.keyword)&&(this.sortedEventMap=new g8(this.state.settings.sortBy,this.state.settings.sortDirection),this.setState({events:[]}),this.componentDidMount())}oldestEventCreatedAt(){var t;return(t=this.sortedEventMap.last())==null?void 0:t.created_at}showQueuedEvents(){this.setState({events:this.sortedEventMap.eventIds,queuedEvents:[],displayCount:Dd}),window.scrollTo(0,0)}render(){if(this.unmounted)return;const{displayCount:t,settings:n,queuedEvents:i,settingsOpen:s}=this.state,{index:o,keyword:a}=this.props,l=o!=="likes"&&!a,u=i.length>0&&!s,f=n.display==="grid"?"NoteImage":null,c=v(oIe,{events:this.state.events,displayCount:t,renderAs:f,showRepliedMsg:l,openedAt:this.openedAt,settings:n});return v("div",{className:"mb-4",children:[v(dt,{when:u,children:v(fIe,{onClick:()=>this.showQueuedEvents()})}),v(dt,{when:o!=="notifications"&&this.state.settingsOpen,children:v(aIe,{settings:n,onChange:d=>this.setState({displayCount:Dd,settings:d})})}),v(dt,{when:["global","follows"].includes(o||""),children:v("div",{className:"flex items-center mx-4 my-4",children:[v("div",{className:`btn btn-sm  mr-2 ${this.state.settings.showReplies?"btn-neutral":"btn-primary"}`,onClick:()=>this.setState({settings:{...this.state.settings,showReplies:!1}}),children:he("posts")}),v("div",{className:`btn btn-sm ${this.state.settings.showReplies?"btn-primary":"btn-neutral"}`,onClick:()=>this.setState({settings:{...this.state.settings,showReplies:!0}}),children:he("posts_and_replies")})]})}),v(dt,{when:o!=="notifications",children:v(lIe,{index:o,display:n.display,setDisplay:d=>{this.setState({displayCount:Dd,settings:{...n,display:d}}),De.get("settings").get("feed").get("display").put(d)}})}),v(dt,{when:this.state.events.length===0,children:v("div",{className:"px-2 md:px-4 py-2",children:this.props.emptyMessage||he("no_events_yet")})}),f==="NoteImage"?v(uIe,{children:c}):c,v(dt,{when:t<this.state.events.length,children:v(cIe,{onClick:()=>this.setState({displayCount:t+Dd})})})]})}};const dIe={all:0,day:24*60*60,week:7*24*60*60,month:30*24*60*60,year:365*24*60*60};let hy=class extends hIe{addSinceUntil(r){const t=this.getSince(),n=this.oldestEventCreatedAt();return t&&(r.since=t),n&&(r.until=n),r}getSince(){if(this.state.settings.timespan!=="all")return Math.floor(Date.now()/1e3)-dIe[this.state.settings.timespan]}getCallbackForPostsIndex(r){return t=>{this.props.index==="posts"&&Re.getEventReplyingTo(t)&&!Re.isRepost(t)||r(t)}}subscribeToNostrUser(r){let t={authors:[this.props.nostrUser||""],kinds:[1,6]};return t=this.addSinceUntil(t),console.log("subscribing to nostr user",this.props.nostrUser,t),this.props.index==="likes"?(t.kinds=[7],Bt.subscribe(t,r,!1,!1)):Bt.subscribe(t,this.getCallbackForPostsIndex(r),!1,!1)}subscribeToKeyword(r){let t={keywords:[this.props.keyword.toLowerCase()],kinds:[1],limit:1e3};return t=this.addSinceUntil(t),Bt.subscribe(t,n=>{var i;return((i=n.content)==null?void 0:i.toLowerCase().includes(this.props.keyword.toLowerCase()))&&r(n)},!1)}subscribeToFollows(r){const t=de.getPubKey(),n=Array.from(et.followedByUser.get(vt(t))||[]).map(s=>Qi(s));n.push(t);let i={kinds:[1,6],limit:300};return n.length<1e3&&(i.authors=n),i=this.addSinceUntil(i),Bt.subscribe(i,s=>{(s.pubkey===t||et.isFollowing(t,s.pubkey))&&r(s)},!0)}subscribeToGlobalFeed(r){let t={kinds:[1,6],limit:300};return t=this.addSinceUntil(t),Bt.subscribe(t,r,!0)}getEvents(r){return this.props.nostrUser?this.subscribeToNostrUser(r):this.props.keyword?this.subscribeToKeyword(r):this.props.index==="follows"?this.subscribeToFollows(r):this.subscribeToGlobalFeed(r)}};const BV=e=>{const r=`https://iris.to/${de.toNostrBech32Address(e.pub,"npub")}`;return v(Eu,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:v("div",{style:{textAlign:"center",flex:1},children:[v(KP,{data:r}),v("p",{children:v(Er,{pub:e.pub})})]})})},pIe=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']],vIe=_n.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
`,gIe=_n.div`
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
`;class yIe extends $n{componentDidMount(){De.get("noFollowers").on(this.inject()),De.get("hasNostrFollowers").on(this.inject()),De.get("showFollowSuggestions").on(this.inject()),De.get("showNoIrisToAddress").on(this.inject()),De.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return v("div",{className:"flex flex-col flex-grow px-2 py-4 md:px-4 gap-2",children:[v("p",{className:"text-base",children:he("follow_someone_info")}),pIe.map(([r,t])=>v("div",{className:"flex items-center space-x-4",children:[v(Qt,{href:`/${r}`,className:"flex flex-grow items-center space-x-2",children:[v("div",{className:"w-10 h-10",children:v(fs,{str:r,width:40})}),v("div",{className:"flex-grow",children:[v(Er,{pub:r,placeholder:"Suggested follow"}),v("p",{className:"text-sm text-gray-500",children:t})]})]}),v(jh,{id:r})]})),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",onClick:()=>De.get("showFollowSuggestions").put(!1),children:he("done")})}),v("p",{className:"text-base",children:[he("alternatively"),v("i",{children:" "}),v(Qt,{href:`/${de.toNostrBech32Address(de.getPubKey(),"npub")}`,className:"link",children:he("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return v(vIe,{children:[v(gIe,{onClick:()=>De.get("noFollowers").put(!1),children:v(OH,{width:24})}),v("p",{children:he("no_followers_yet")}),v("div",{className:"flex gap-2 my-2",children:[v(Hi,{className:"btn btn-neutral",text:he("copy_link"),copyStr:hr.getMyProfileLink()}),v("button",{className:"btn btn-neutral",onClick:()=>this.setState({showQrModal:!0}),children:he("show_qr_code")})]}),v("small",{children:he("no_followers_yet_info")}),this.state.showQrModal&&v(BV,{onClose:()=>this.setState({showQrModal:!1}),pub:de.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return v("div",{className:"flex flex-col gap-2 mb-2",children:[v("p",{children:"Get your own iris.to/username?"}),v("p",{className:"flex gap-2",children:[v("button",{className:"btn btn-primary",onClick:()=>_r("/settings/iris_account"),children:"Yes please"}),v("button",{className:"btn btn-neutral",onClick:()=>De.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let r;return this.state.showFollowSuggestions?r=this.renderFollowSuggestions():this.state.showNoIrisToAddress?r=this.renderGetIrisAddress():this.state.noFollowers&&(r=this.renderNoFollowers()),r?v("div",{class:"msg",children:v("div",{class:"msg-content",children:r})}):""}}class rS extends zh{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const r=this.props.index||"msgs";return v("div",{className:"flex flex-row",children:v("div",{className:"flex flex-col w-full",children:[this.props.keyword?v("h2",{className:"text-2xl mb-2",children:[he("search"),': "',this.props.keyword,'"']}):v(lt,{children:[v(yIe,{}),v("div",{className:"hidden md:block px-4",children:v(Y_,{autofocus:!1,placeholder:he("whats_on_your_mind")})})]}),v(hy,{keyword:this.props.keyword,index:this.props.index,path:r},this.props.index||"feed")]})})}}const mIe=gi(({hexKey:e})=>{var t;const r=de.toNostrBech32Address(e,"npub")||"";return v("div",{className:"flex w-full",children:[v(Qt,{href:`/${r}`,className:"flex flex-1 gap-4",children:[v(fs,{str:r,width:49}),v("div",{children:[v(Er,{pub:r}),v("br",{}),v("span",{className:"text-neutral-500 text-sm",children:[((t=et.followersByUser.get(vt(e)))==null?void 0:t.size)||0,v("i",{children:" "}),"followers"]})]})]}),e!==de.getPubKey()&&v(jh,{id:r})]},r)});class m8 extends zh{constructor(){super();ce(this,"follows");ce(this,"myPub");ce(this,"updateSortedFollows",$_(()=>{const t=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),n=Array.from(this.follows).sort(t);this.setState({follows:n})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(t,n){var o,a;const i=(o=et.profiles.get(vt(t)))==null?void 0:o.name,s=(a=et.profiles.get(vt(n)))==null?void 0:a.name;return!i&&!s?t.localeCompare(n):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(t,n){const i=et.followDistanceByUser.get(vt(t)),s=et.followDistanceByUser.get(vt(n));return i===s?this.sortByName(t,n):i===void 0?1:s===void 0||i<s?-1:1}getFollows(){const t=de.toNostrHexAddress(this.props.id)||"";t&&et.getFollowedByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const t=de.toNostrHexAddress(this.props.id)||"";t&&et.getFollowersByUser(t,n=>{this.follows=n,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=de.toNostrBech32Address(de.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),De.get("contacts").on(this.inject()))}followAll(){confirm(`${he("follow_all")} (${this.state.follows.length})?`)&&et.setFollowed(this.state.follows)}renderFollows(){return this.state.follows.map(t=>v(mIe,{hexKey:t}))}renderView(){const t=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return v("div",{className:"px-4 mb-4",children:[v("div",{className:"flex justify-between mb-4",children:[v("span",{className:"text-xl font-bold",children:[v("a",{className:"link",href:`/${this.props.id}`,children:v(Er,{pub:this.props.id})}),":",v("i",{children:" "}),v("span",{style:{flex:1},className:"ml-1",children:this.props.followers?he("followers"):he("following")})]}),v(dt,{when:t,children:v("span",{style:"text-align: right",className:"hidden md:inline",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[he("follow_all")," (",this.state.follows.length,")"]})})})]}),v(dt,{when:t,children:v("p",{style:"text-align: right",className:"inline md:hidden",children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.followAll(),children:[he("follow_all")," (",this.state.follows.length,")"]})})}),v("div",{className:"flex flex-col w-full gap-4",children:[this.renderFollows(),this.state.follows.length===0?"—":""]})]})}}function bIe(e){const[r,t]=Me(""),n=de.toNostrHexAddress(r),i=de.toNostrBech32Address(r,"note"),s=de.toNostrBech32Address(r,"npub"),o=de.toNostrBech32Address(r,"nsec");return v(lt,{children:[v(Su,{}),v("div",{class:"main-view",id:"settings",children:v("div",{class:"centered-container mobile-padding15",children:[v("h2",{children:he("key_converter")}),v("p",{children:v("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:a=>{var l;return t((l=a.target.value)==null?void 0:l.trim())}})}),r&&n&&(r===n?v(lt,{children:[v("p",{children:[v("b",{children:"note:"})," ",i]}),v("p",{children:[v("b",{children:"npub:"})," ",s]}),v("p",{children:[v("b",{children:"nsec:"})," ",o]})]}):v("p",{children:[v("b",{children:"hex:"})," ",n]})),r&&!n&&v("p",{children:v("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const YP=2n**256n,fh=YP-0x1000003d1n,ZP=YP-0x14551231950b75fc4402da1732fc9bebfn,MV=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,LV=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,FV={p:fh,n:ZP,a:0n,b:7n,Gx:MV,Gy:LV},hh=32,b8=e=>Ct(Ct(e*e)*e+FV.b),ci=(e="")=>{throw new Error(e)},Z_=e=>typeof e=="bigint",jV=e=>typeof e=="string",nS=e=>Z_(e)&&0n<e&&e<fh,zV=e=>Z_(e)&&0n<e&&e<ZP,HV=(e,r)=>!(e instanceof Uint8Array)||typeof r=="number"&&r>0&&e.length!==r?ci("Uint8Array expected"):e,Vy=e=>new Uint8Array(e),XP=(e,r)=>HV(jV(e)?X_(e):Vy(e),r),Ct=(e,r=fh)=>{let t=e%r;return t>=0n?t:r+t},w8=e=>e instanceof zo?e:ci("Point expected");let $8;class zo{constructor(r,t,n){this.px=r,this.py=t,this.pz=n}static fromAffine(r){return new zo(r.x,r.y,1n)}static fromHex(r){r=XP(r);let t;const n=r[0],i=r.subarray(1),s=_8(i,0,hh),o=r.length;if(o===33&&[2,3].includes(n)){nS(s)||ci("Point hex invalid: x not FE");let a=wIe(b8(s));const l=(a&1n)===1n;(n&1)===1!==l&&(a=Ct(-a)),t=new zo(s,a,1n)}return o===65&&n===4&&(t=new zo(s,_8(i,hh,2*hh),1n)),t?t.ok():ci("Point is not on curve")}static fromPrivateKey(r){return Sp.mul(cA(r))}get x(){return this.aff().x}get y(){return this.aff().y}equals(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=w8(r),l=Ct(t*a),u=Ct(s*i),f=Ct(n*a),c=Ct(o*i);return l===u&&f===c}negate(){return new zo(this.px,Ct(-this.py),this.pz)}double(){return this.add(this)}add(r){const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=w8(r),{a:l,b:u}=FV;let f=0n,c=0n,d=0n;const y=Ct(u*3n);let w=Ct(t*s),b=Ct(n*o),T=Ct(i*a),_=Ct(t+n),A=Ct(s+o);_=Ct(_*A),A=Ct(w+b),_=Ct(_-A),A=Ct(t+i);let x=Ct(s+a);return A=Ct(A*x),x=Ct(w+T),A=Ct(A-x),x=Ct(n+i),f=Ct(o+a),x=Ct(x*f),f=Ct(b+T),x=Ct(x-f),d=Ct(l*A),f=Ct(y*T),d=Ct(f+d),f=Ct(b-d),d=Ct(b+d),c=Ct(f*d),b=Ct(w+w),b=Ct(b+w),T=Ct(l*T),A=Ct(y*A),b=Ct(b+T),T=Ct(w-T),T=Ct(l*T),A=Ct(A+T),w=Ct(b*A),c=Ct(c+w),w=Ct(x*A),f=Ct(_*f),f=Ct(f-w),w=Ct(_*b),d=Ct(x*d),d=Ct(d+w),new zo(f,c,d)}mul(r,t=!0){if(!t&&r===0n)return iw;if(zV(r)||ci("invalid scalar"),this.equals(Sp))return _Ie(r).p;let n=iw,i=Sp;for(let s=this;r>0n;s=s.double(),r>>=1n)r&1n?n=n.add(s):t&&(i=i.add(s));return n}mulAddQUns(r,t,n){return this.mul(t,!1).add(r.mul(n,!1)).ok()}toAffine(){const{px:r,py:t,pz:n}=this;if(this.equals(iw))return{x:0n,y:0n};if(n===1n)return{x:r,y:t};const i=WV(n);return Ct(n*i)!==1n&&ci("invalid inverse"),{x:Ct(r*i),y:Ct(t*i)}}assertValidity(){const{x:r,y:t}=this.aff();return(!nS(r)||!nS(t))&&ci("Point invalid: x or y"),Ct(t*t)===b8(r)?this:ci("Point invalid: not on curve")}multiply(r){return this.mul(r)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(r=!0){const{x:t,y:n}=this.aff();return(r?(n&1n)===0n?"02":"03":"04")+x8(t)+(r?"":x8(n))}toRawBytes(r=!0){return X_(this.toHex(r))}}zo.BASE=new zo(MV,LV,1n);zo.ZERO=new zo(0n,1n,0n);const{BASE:Sp,ZERO:iw}=zo,UV=(e,r)=>e.toString(16).padStart(r,"0"),JP=e=>Array.from(e).map(r=>UV(r,2)).join(""),X_=e=>{const r=e.length;(!jV(e)||r%2)&&ci("hex invalid 1");const t=Vy(r/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);(Number.isNaN(o)||o<0)&&ci("hex invalid 2"),t[n]=o}return t},J_=e=>BigInt("0x"+(JP(e)||"0")),_8=(e,r,t)=>J_(e.slice(r,t)),QP=e=>Z_(e)&&e>=0n&&e<YP?X_(UV(e,2*hh)):ci("bigint expected"),x8=e=>JP(QP(e)),E8=(...e)=>{const r=Vy(e.reduce((n,i)=>n+HV(i).length,0));let t=0;return e.forEach(n=>{r.set(n,t),t+=n.length}),r},WV=(e,r=fh)=>{(e===0n||r<=0n)&&ci("no inverse n="+e+" mod="+r);let t=Ct(e,r),n=r,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,l=i-s*o;n=t,t=a,i=s,s=l}return n===1n?Ct(i,r):ci("no inverse")},wIe=e=>{let r=1n;for(let t=e,n=(fh+1n)/4n;n>0n;n>>=1n)n&1n&&(r=r*t%fh),t=t*t%fh;return Ct(r*r)===e?r:ci("sqrt invalid")},cA=e=>(Z_(e)||(e=J_(XP(e,hh))),zV(e)?e:ci("private key out of range")),S8=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let sw;function qV(e){e=XP(e);const r=hh+8;(e.length<r||e.length>1024)&&ci("expected proper params");const t=Ct(J_(e),ZP-1n)+1n;return QP(t)}const KV={hexToBytes:X_,bytesToHex:JP,concatBytes:E8,bytesToNumberBE:J_,numberToBytesBE:QP,mod:Ct,invert:WV,hmacSha256Async:async(e,...r)=>{const t=S8();if(!t)return ci("etc.hmacSha256Async not set");const n=t.subtle,i=await n.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Vy(await n.sign("HMAC",i,E8(...r)))},hmacSha256Sync:sw,hashToPrivateKey:qV,randomBytes:e=>{const r=S8();return r||ci("crypto.getRandomValues must be defined"),r.getRandomValues(Vy(e))}},k8={normPrivateKeyToScalar:cA,isValidPrivateKey:e=>{try{return!!cA(e)}catch{return!1}},randomPrivateKey:()=>qV(KV.randomBytes(hh+8)),precompute(e=8,r=Sp){return r.multiply(3n),r}};Object.defineProperties(KV,{hmacSha256Sync:{configurable:!1,get(){return sw},set(e){sw||(sw=e)}}});const jf=8,$Ie=()=>{const e=[],r=256/jf+1;let t=Sp,n=t;for(let i=0;i<r;i++){n=t,e.push(n);for(let s=1;s<2**(jf-1);s++)n=n.add(t),e.push(n);t=n.double()}return e},_Ie=e=>{const r=$8||($8=$Ie()),t=(f,c)=>{let d=c.negate();return f?d:c};let n=iw,i=Sp;const s=1+256/jf,o=2**(jf-1),a=BigInt(2**jf-1),l=2**jf,u=BigInt(jf);for(let f=0;f<s;f++){const c=f*o;let d=Number(e&a);e>>=u,d>o&&(d-=l,e+=1n);const y=c,w=c+Math.abs(d)-1,b=f%2!==0,T=d<0;d===0?i=i.add(t(b,r[y])):n=n.add(t(T,r[w]))}return{p:n,f:i}},xIe=v(lt,{children:[v("b",{children:"End User Licence Agreement"}),v("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),v("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),v("ul",{children:[v("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),v("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),v("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),v("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),v("li",{children:"illegal content related to gambling."})]}),v("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),v("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),v("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),v("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function EIe({onAccept:e,onDecline:r}){return v("div",{class:"m-1 bg-black overflow-y-scroll absolute inset-0 pb-safe-area",children:[v("div",{className:"prose",children:xIe}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-primary",onClick:e,children:"Accept"}),v("button",{className:"btn btn-default",onClick:r,children:"Decline"})]})]})}function SIe(e){const r=e.target,t=Jt(r).val();rp.indexOf(t)>=0&&(localStorage.setItem("language",t),location.reload())}const kIe=()=>v("div",{className:"flex flex-row w-full justify-center items-center",children:[v(TH,{width:24}),v("select",{className:"input rounded-full",onChange:e=>SIe(e),value:Uo,children:Object.keys(Hy).map(e=>v("option",{value:e,children:Hy[e]}))})]});class ow extends jn{constructor(){super(...arguments);ce(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const t=document.getElementById("login-form-name");t&&t.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(t){t.preventDefault();const n=await window.nostr.getPublicKey();de.login({rpub:n},this.props.fullScreen)}async onPasteKey(t){var s;const n=(s=t.target.value)==null?void 0:s.trim();if(!n.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(n)}catch{}if(!i)if(k8.isValidPrivateKey(n))i={priv:n,rpub:de.getPublicKey(n)};else try{const{data:o,prefix:a}=BT(n),l=hr.arrayToHex(o);a==="npub"?i={rpub:l}:a==="nsec"&&(i={priv:l,rpub:de.getPublicKey(l)})}catch(o){this.setState({privateKeyError:he("invalid_private_key")}),console.error(o)}i&&(await de.login(i,this.props.fullScreen),t.target.value="",hr.copyToClipboard(""))}showCreateAccount(t){t.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const t=document.getElementById("login-form-name"),n=t==null?void 0:t.value;de.loginAsNewUser(this.props.fullScreen),De.get("showFollowSuggestions").put(!0),n&&setTimeout(()=>{et.setMetadata({display_name:n})},100);const i=Math.floor(Date.now()/1e3);Re.notificationsSeenTime=i}onLoginFormSubmit(t){t.preventDefault(),hr.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(t){const n=t.target.value;if(n.indexOf('"priv"')!==-1||k8.isValidPrivateKey(n)||n.startsWith("nsec")||n.startsWith("npub")){this.onPasteKey(t),t.target.value="";return}this.setState({inputStyle:n.length?"text-align: center":""})}renderExistingAccountLogin(){return v(lt,{children:[v("input",{className:"rounded-full input input-bordered centered-placeholder",id:"paste-privkey",autoFocus:!0,onInput:t=>this.onPasteKey(t),placeholder:he("paste_private_key"),type:"password"}),this.state.privateKeyError&&v("p",{className:"error",children:this.state.privateKeyError})]})}render(){return v("section",{className:`flex items-center justify-center ${this.props.fullScreen?"h-screen":""}`,children:[this.state.showEula&&v(EIe,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),v("div",{className:"w-full max-w-sm",children:this.state.showSwitchAccount?v("div",{className:"text-center shadow-md rounded px-8 pt-6 pb-8 mb-4 flex gap-2 flex-col",children:[v("p",{className:"link",children:v("a",{href:"",id:"show-create-account",onClick:t=>this.showCreateAccount(t),children:he("back")})}),this.renderExistingAccountLogin()]}):v("form",{className:"shadow-md bg-black rounded px-8 pt-6 pb-8 mb-4 gap-4 flex flex-col items-center justify-center",autocomplete:"off",onSubmit:t=>this.onLoginFormSubmit(t),children:[v("img",{className:"w-20 h-20 mx-auto",src:"/img/android-chrome-192x192.png",alt:"iris"}),v("h1",{className:"text-2xl font-bold",children:"Dpeep"}),v("input",{className:"input centered-placeholder",style:this.state.inputStyle,onInput:t=>this.onNameChange(t),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:he("whats_your_name")}),v("p",{className:"my-2",children:v("button",{className:"btn btn-primary",type:"submit",children:he("new_user_go")})}),window.nostr?v("p",{className:"text-center link",children:v("a",{href:"",onClick:t=>this.nostrExtensionLogin(t),children:he("nostr_extension_login")})}):null,v("p",{className:"text-center link",children:v("a",{href:"",id:"show-existing-account-login",onClick:t=>{t.preventDefault(),this.setState({showSwitchAccount:!0})},children:he("private_key_login")})}),v(kIe,{})]})})]})}}class TIe extends ow{render(){return this.renderExistingAccountLogin()}}function IIe(e){return v("div",{className:"px-2 md:px-4 py-8 justify-center flex flex-col items-center",children:[v("div",{className:"my-4",children:he("logout_confirmation_info")}),v("div",{className:"my-4 flex flex-row gap-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>_r("/settings"),children:he("back")}),v("button",{className:"btn btn-primary",onClick:()=>Th.logOut(),children:he("log_out")})]})]})}class T8 extends zh{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const r=de.toNostrBech32Address(this.props.id,"note");if(r&&this.props.id!==r){_r(`/${r}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(r){r.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let r;return this.props.id==="new"?r=v("div",{className:"m-2",children:v(Y_,{placeholder:he("whats_on_your_mind"),forceAutofocusMobile:!0,autofocus:!0,onSubmit:()=>_r("/")})}):r=v(Wo,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),v("div",{className:"w-full",children:r})}}class AIe extends zh{constructor(){super(...arguments);ce(this,"class","public-messages-view");ce(this,"updateNotificationsLastOpened",wn.debounce(()=>{const t=De.get("settings").get("notifications").get("saveLastOpened");t.once(n=>{var i;if(n!==!1){const s=Math.floor(Date.now()/1e3);((i=Th.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),t.put(!1)),De.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return v("div",{class:"centered-container",children:v(hy,{index:"notifications",emptyMessage:he("no_notifications_yet")},"notifications")})}}var OIe=["className","activeClass","activeClassName","path"];function iS(e){var r=e.className,t=e.activeClass,n=e.activeClassName,i=e.path,s=function(f,c){if(f==null)return{};var d,y,w={},b=Object.keys(f);for(y=0;y<b.length;y++)c.indexOf(d=b[y])>=0||(w[d]=f[d]);return w}(e,OIe),o=yle()[0],a=i&&o.path&&PT(o.path,i,{})||PT(o.url,s.href,{}),l=s.class||r||"",u=a&&(t||n)||"";return s.class=l+(l&&u&&" ")+u,Je(Qt,s)}class CIe extends VP{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=he("report_public"),this.actionDone=he("reported"),this.hoverAction=he("unreport")}onClick(r){r.preventDefault();const t=!this.state[this.key];if(confirm(t?"Publicly report this user?":"Unreport user?")){const n=de.toNostrHexAddress(this.props.id);n&&et.flag(n,t)}}componentDidMount(){et.getFlaggedUsers(r=>{const t=de.toNostrHexAddress(this.props.id),n=t&&(r==null?void 0:r.has(t));this.setState({reported:n})})}}const PIe=({hexPub:e,npub:r,rawDataJson:t,isMyProfile:n})=>{async function i(a){a.preventDefault(),_r("/"),de.login({rpub:e})}const[s,o]=Me(!1);return v(lt,{children:[v($V,{children:[v(Hi,{className:"btn btn-sm",text:he("copy_link"),copyStr:window.location.href},`${e}copyLink`),v(Hi,{className:"btn btn-sm",text:he("copy_user_ID"),copyStr:r},`${e}copyNpub`),v("button",{className:"btn btn-sm",onClick:()=>o(!0),children:he("show_qr_code")}),v(Hi,{className:"btn btn-sm",text:he("copy_raw_data"),copyStr:t},`${e}copyData`),v(dt,{when:!n&&!de.getPrivKey(),children:v("button",{className:"btn btn-sm",onClick:i,children:[he("view_as")+" ",v(Er,{pub:e,hideBadge:!0})]})}),v(dt,{when:!n,children:v(lt,{children:[v(VP,{className:"btn btn-sm",id:e}),v(CIe,{className:"btn btn-sm",id:e})]})})]}),v(dt,{when:s,children:v(BV,{pub:e,onClose:()=>o(!1)})})]})},NIe=({picture:e,onError:r})=>{const[t,n]=Me(!1),i=()=>{n(!0)},s=()=>{n(!1)};return e?v("div",{className:"rounded-full border-4 border-black",children:[v(yu,{width:128,square:!0,className:"rounded-full cursor-pointer",src:e,onError:r,onClick:i}),t&&v(Eu,{centerVertically:!0,onClose:s,children:v(yu,{className:"max-w-full max-h-[90vh]",square:!0,src:e,onError:r})})]}):null},RIe=({hexPub:e})=>{const[r,t]=Me({showTrustsList:!1,trusted:!1,showDistrustsList:!1,distrusted:!1,renderTrustScore:"",renderDistrustScore:"",processing:!1}),n=G_(vt(e));St(()=>{var u;if(!n)return;const o=(u=n.vertice)==null?void 0:u.score;if(!o)return;let a=o.isDirectTrusted(),l=o.isDirectDistrusted();t(f=>({...f,trusted:a,distrusted:l,renderTrustScore:a?o.renderTrustCount():"",renderDistrustScore:l?o.renderDistrustCount():"",processing:!1}))},[n]);function i(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!r.trusted,distrusted:!1,processing:!0}),(async()=>{let a=r.trusted?0:1;await rr.publishTrust(e,a,nu.Key)})()}function s(o){o.preventDefault(),o.stopPropagation(),t({...r,trusted:!1,distrusted:!r.distrusted,processing:!0}),(async()=>{let a=r.distrusted?0:-1;await rr.publishTrust(e,a,nu.Key)})()}return v(lt,{children:v("div",{className:"flex-1 flex gap-4",children:[v("a",{className:`msg-btn trust-btn ${r.trusted?"trusted":""} cursor-pointer`,onClick:o=>i(o),title:r.trusted?"Trusted":"Trust",children:r.trusted?v(l$,{size:24,fill:"green",stroke:"currentColor"}):v(l$,{size:24,fill:"none",stroke:"currentColor"})}),v("a",{className:`msg-btn trust-btn ${r.distrusted?"distrusted":""} cursor-pointer`,onClick:o=>s(o),title:r.distrusted?"Distrusted":"Distrust",children:r.distrusted?v(a$,{size:24,fill:"red",stroke:"currentColor"}):v(a$,{size:24,fill:"none",stroke:"currentColor"})})]})})},Gy=(e,r=["red","grey","green"])=>r[e+1],DIe=(e,r=!1)=>!e||!r&&!e.hasTrustScore()?null:e.trusts.join("/"),BIe=(e,r=!1)=>!e||!r&&!e.hasDistrustScore()?null:e.distrusts.join("/"),VV=(e,r,t=!1)=>!e||!t&&!e.hasTrustScore()?null:v("a",{href:`/graph/${r}/key/in/trust/path`,className:"cursor-pointer hover:underline",title:"Trusts at degree 0/1/2",children:[DIe(e,t)," ",v("span",{className:"text-neutral-500",children:"Trusts"})]}),GV=(e,r,t=!1)=>!e||!t&&!e.hasDistrustScore()?null:v("a",{href:`/graph/${r}/key/in/distrust/path`,className:"cursor-pointer hover:underline",title:"Distrusts at degree 0/1/2",children:[BIe(e,t)," ",v("span",{className:"text-neutral-500",children:"Distrusts"})]}),MIe=({hexPub:e})=>{const[r]=Me(de.toNostrBech32Address(e,"npub")),[t,n]=Me(),i=G_(vt(e),void 0,"");return St(()=>{var o;const s=(o=i.vertice)==null?void 0:o.score;s&&n(a=>({...a,score:s}))},[i]),v(lt,{children:[VV(t==null?void 0:t.score,r,!0),GV(t==null?void 0:t.score,r,!0)]})},LIe=({address:e})=>{const[r,t]=Me(0),[n,i]=Me(0),[s,o]=Me(0),[a,l]=Me(0),[u,f]=Me([]),c=de.getPubKey()===e;return St(()=>{const d=[];fetch(`https://eu.rbr.bio/${e}/info.json`).then(w=>{w.ok&&w.json().then(b=>{var T;b&&(l((T=b.following)==null?void 0:T.length),o(b.followerCount))})});const y=$_(w=>{const b=new Set;for(const T of w)et.getFollowDistance(T)===1&&b.add(T);f(Array.from(b))},1e3);return setTimeout(()=>{d.push(et.getFollowersByUser(e,w=>{i(w.size),y(w)})),d.push(et.getFollowedByUser(e,w=>t(w.size)))},1e3),()=>{d.forEach(w=>w())}},[e]),v("div",{children:[v("div",{className:"text-sm flex gap-4",children:[v(Qt,{href:`/follows/${e}`,children:[v("b",{children:Math.max(r,a)}),v("span",{className:"text-neutral-500",children:[" ",he("following")]})]}),v(Qt,{href:`/followers/${e}`,children:[v("b",{children:Math.max(n,s)}),v("span",{className:"text-neutral-500",children:[" ",he("followers")]})]}),v(MIe,{hexPub:e})]}),v(dt,{when:!c&&u.length>0,children:v("div",{className:"text-neutral-500",children:v("small",{children:["Followed by"," ",u.slice(0,3).map((d,y)=>v("span",{children:[v(dt,{when:y>0,children:", "}),v(Qt,{className:"hover:underline",href:`/${de.toNostrBech32Address(d,"npub")}`,children:v(Er,{pub:d,hideBadge:!0})})," "]},d)),v(dt,{when:u.length>3,children:v("span",{children:[" ","and ",v("b",{children:u.length-3})," other users you follow"]})})]})})}),v(dt,{when:et.isFollowing(e,de.getPubKey()),children:v("div",{className:"text-neutral-500",children:v("small",{children:he("follows_you")})})})]})},FIe=gi(LIe),jIe=e=>{var C;const{hexPub:r,npub:t}=e,[n,i]=Me(et.profiles.get(vt(r))||{}),[s,o]=Me(""),[a,l]=Me(""),[u,f]=Me(!1),[c,d]=Me(""),[y,w]=Me(""),[b,T]=Me(!1),[_,A]=Me(!1),x=$h((g,M)=>{const B=[];return B.push(Bt.subscribe({authors:[g],kinds:[0,3]},void 0,!1,!1)),B.push(et.getProfile(g,L=>{if(!L)return;if(!(M&&M.endsWith("@iris.to"))&&L.nip05&&L.nip05valid){const Z=L.nip05,j=Z.split("@"),X=j[0],ie=j[1];let Ee;ie==="iris.to"?X==="_"?Ee="iris":Ee=X:X==="_"?Ee=ie:Ee=Z,d(Ee),Ee=window.location.pathname.replace(/[^/]+/,Ee);const $e=window.history.state;window.history.replaceState($e,"",Ee)}let Q=L.lud16||L.lud06;Q&&!Q.startsWith("lightning:")&&(Q="lightning:"+Q),o(Q);let re="";try{const Z=L.website&&(L.website.match(/^https?:\/\//)?L.website:"http://"+L.website),j=new URL(Z);re=j.href.endsWith("/")?j.href.slice(0,-1):j.href}catch{re=""}l(re),i(L)},!0)),()=>{B.forEach(L=>L())}},[]);St(()=>{const g=[],M=Re.db.findOne({kind:0,pubkey:r}),B=Re.db.findOne({kind:3,pubkey:r});M&&g.push(M),B&&g.push(B),w(JSON.stringify(g,null,2)),T(r===de.getPubKey()),x(r,c);const L=De.get("loggedIn").on(Q=>{f(Q)}),q=et.getBlockedUsers(Q=>{A(Q.has(r))});return()=>{q(),L()}},[r]);const I=_?v(fs,{str:t,hidePicture:!0,width:128},`${t}avatar`):v(NIe,{picture:n.picture,onError:()=>null},`${r}picture`),O=()=>!u&&De.get("showLoginModal").put(!0);return v("div",{children:v("div",{className:"mb-2 mx-4 md:px-4 md:mx-0 flex flex-col gap-2",children:[v("div",{className:"flex flex-row",children:[v("div",{className:n.banner?"-mt-24":"",children:I}),v("div",{className:"flex-1 justify-end items-center flex gap-2",children:[v("div",{onClick:O,children:[v("a",{href:"/graph/"+t,className:"link px-2",children:"Web of Trust"}),v(dt,{when:b,children:v("a",{className:"btn btn-sm btn-neutral",href:"/profile/edit",children:he("edit_profile")})}),v(dt,{when:!b,children:[v(jh,{id:r},`${r}follow`),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>u&&_r(`/chat/${t}`),children:he("send_message")})]})]}),v(PIe,{hexPub:r,npub:t,rawDataJson:y,isMyProfile:b})]})]}),v("div",{className:"profile-header-stuff",children:[v("div",{className:"flex-1 profile-name",children:[v("span",{className:"text-xl",children:v(Er,{pub:r})}),v(dt,{when:n.nip05&&n.nip05valid,children:[v("br",{}),v("small",{className:"text-iris-green",children:(C=n.nip05)==null?void 0:C.replace(/^_@/,"")})]})]}),v(FIe,{address:r}),v("div",{className:"py-2",children:[v("p",{className:"text-sm",children:n.about}),v("div",{className:"flex flex-1 flex-row align-center justify-center mt-4",children:[v(RIe,{hexPub:r}),v(dt,{when:s,children:v("div",{className:"flex-1",children:v("a",{className:"btn btn-sm btn-neutral",href:s,onClick:g=>hr.handleLightningLinkClick(g),children:["⚡ ",he("tip_lightning")]})})}),v(dt,{when:a,children:v("div",{className:"flex-1",children:v("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"link",children:a==null?void 0:a.replace(/^https?:\/\//,"")})})})]})]})]})]})},`${r}details`)};class e1 extends zh{constructor(){super();ce(this,"subscriptions");ce(this,"unsub");this.state={followedUserCount:0,followerCount:0},this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers)return v("div",{className:"msg",children:v("div",{className:"msg-content",children:[v("p",{children:["Share your profile link so ",this.state.name||"this user"," can follow you:"]}),v("p",{children:v(Hi,{text:he("copy_link"),copyStr:hr.getMyProfileLink()})}),v("small",{children:he("no_followers_yet_info")})]})})}async viewAs(t){t.preventDefault(),_r("/"),de.login({rpub:this.state.hexPub})}renderTabs(){const t=window.location.pathname.split("/")[1],n=window.location.pathname,i=s=>n===s?"btn btn-sm btn-primary":"btn btn-sm btn-neutral";return v("div",{className:"flex mx-4 gap-2 mb-4 overflow-x-auto",children:[v(iS,{className:i("/"+t),href:"/"+t,children:[he("posts"),v(dt,{when:this.state.noPosts,children:" (0)"})]}),v(iS,{className:i("/"+t+"/replies"),href:"/"+t+"/replies",children:[he("posts")," & ",he("replies"),v(dt,{when:this.state.noReplies,children:" (0)"})]}),v(iS,{className:i("/"+t+"/likes"),href:"/"+t+"/likes",children:[he("likes"),v(dt,{when:this.state.noLikes,children:" (0)"})]})]})}renderTab(){return this.state.hexPub?this.props.tab==="replies"?v(hy,{index:"postsAndReplies",nostrUser:this.state.hexPub},`replies${this.state.hexPub}`):this.props.tab==="likes"?v(hy,{index:"likes",nostrUser:this.state.hexPub},`likes${this.state.hexPub}`):this.props.tab==="media"?v("div",{children:"TODO media message feed"}):v("div",{children:[this.getNotification(),v(hy,{index:"posts",nostrUser:this.state.hexPub},`posts${this.state.hexPub}`)]}):v("div",{})}renderView(){const{hexPub:t,display_name:n,name:i,profile:s,banner:o,picture:a,blocked:l}=this.state;if(!t)return v("div",{});const u=n||i||"Profile",f=`${u} | Iris`,c=`Latest posts by ${n||i||"user"}. ${(s==null?void 0:s.about)||""}`;return v(lt,{children:[v(dt,{when:o,children:v("div",{className:"mb-4 h-48 bg-cover bg-center",style:{backgroundImage:`url(${o})`}})}),v("div",{children:[v(_h,{children:[v("title",{children:u}),v("meta",{name:"description",content:c}),v("meta",{property:"og:type",content:"profile"}),v(dt,{when:a,children:[v("meta",{property:"og:image",content:a}),v("meta",{name:"twitter:image",content:a})]}),v("meta",{property:"og:title",content:f}),v("meta",{property:"og:description",content:c})]}),v(jIe,{npub:this.state.npub,hexPub:this.state.hexPub}),v(dt,{when:!l,children:[this.renderTabs(),this.renderTab()]})]})]})}componentWillUnmount(){var t;super.componentWillUnmount(),(t=this.unsub)==null||t.call(this),De.get("isMyProfile").put(!1)}componentDidUpdate(t,n){var i;!n.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}loadProfile(t){const n=t===de.getPubKey();De.get("isMyProfile").put(n),De.get("noFollowers").on(this.inject()),this.subscriptions.push(et.getProfile(t,i=>{let s;try{if(s=i.banner&&new URL(i.banner).toString(),!s)return;s=OK(s)?s:`https://imgproxy.iris.to/insecure/plain/${s}`,this.setState({banner:s})}catch{console.log("Invalid banner URL",i.banner)}}))}componentDidMount(){this.restoreScrollPosition();const t=this.props.id,n=de.toNostrBech32Address(t,"npub");if(De.get("loggedIn").on(this.inject()),n&&n!==t){_r(`/${n}`,!0);return}const i=de.toNostrHexAddress(t);if(!i){let s=t;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),de.getPubKeyByNip05Address(s).then(o=>{if(o){const a=de.toNostrBech32Address(o,"npub");a&&a!==o&&(this.setState({npub:a,hexPub:o}),this.loadProfile(o))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:de.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}class zIe extends $n{onLogoutClick(r){r?_r("/logout"):Th.logOut()}async onExtensionLoginClick(r){r.preventDefault();const t=await window.nostr.getPublicKey();de.login({rpub:t})}deleteAccount(){confirm(`${he("delete_account")}?`)&&(Re.publish({kind:0,content:JSON.stringify({deleted:!0})}),Re.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{Th.logOut()},1e3))}render(){const r=de.getPrivKey();let t;r&&(t=Dc.nsecEncode(r));const n=de.getPubKey(),i=Dc.npubEncode(n),s=!!de.getPrivKey();return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("account")}),s?v("p",{children:[v("b",{children:he("save_backup_of_privkey_first")})," ",he("otherwise_cant_log_in_again")]}):null,v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.onLogoutClick(s),children:he("log_out")}),v("button",{className:"btn btn-sm btn-primary",onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:he("switch_account")})]}),this.state.showSwitchAccount?Ao`
                <p>
                  <${TIe} />
                </p>
                <p>
                  <a href="" onClick=${o=>this.onExtensionLoginClick(o)}>
                    ${he("nostr_extension_login")}
                  </a>
                </p>
              `:"",v("h3",{children:he("public_key")}),v("p",{children:v("small",{children:i})}),v("div",{className:"flex gap-2 my-2",children:[v(Hi,{className:"btn btn-neutral btn-sm",copyStr:i,text:"Copy npub"}),v(Hi,{className:"btn btn-neutral btn-sm",copyStr:n,text:"Copy hex"})]}),v("h3",{children:he("private_key")}),v("div",{className:"flex gap-2 my-2",children:r?v(lt,{children:[v(Hi,{className:"btn btn-neutral btn-sm",copyStr:t,text:"Copy nsec"}),v(Hi,{className:"btn btn-neutral btn-sm",copyStr:r,text:"Copy hex"})]}):v("p",{children:he("private_key_not_present_good")})}),r?v("p",{children:he("private_key_warning")}):"",hr.isStandalone()?v(lt,{children:[v("h3",{children:he("delete_account")}),v("p",{children:v("button",{className:"btn btn-sm btn-danger",onClick:()=>this.deleteAccount(),children:he("delete_account")})})]}):null]})})}}const HIe=()=>{const[e,r]=Me(!1);return St(()=>{var t;(t=Th.public)==null||t.get("settings/colorScheme",()=>{}),De.get("showConnectedRelays").on(r)},[]),v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("appearance")}),v("p",{children:[v("input",{className:"checkbox",type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:e,onChange:t=>{De.get("showConnectedRelays").put(t.currentTarget.checked)}}),v("label",{htmlFor:"showConnectedRelays",children:[" ",he("show_connected_relays_in_header")]})]})]})})};class UIe extends $n{profileExportJson(){const r=de.getPubKey();let t=[];const n=Re.db.findOne({kind:0,pubkey:r}),i=Re.db.findOne({kind:3,pubkey:r});return n&&t.push(n),i&&t.push(i),t=JSON.stringify(t,null,2),t}async exportMyEvents(){console.log("exporting my events");const r=de.getPubKey(),t=[];let n=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await ul.db.events.where({pubkey:r}).each(i=>{t.push(i),n++}),this.setState({saveMessage:`Found ${n} events`,downloadMyEventsMessage:null}),JSON.stringify(t)}render(){return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("backup")}),v("h3",{children:he("save")}),v("p",{children:[he("profile")," & ",he("follows"),":"]}),v("p",{children:[v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:he("download")}),v(Hi,{text:he("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),v("p",{children:[he("your_events"),":"]}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||he("download")})}),this.state.saveMessage&&v("p",{children:this.state.saveMessage}),this.state.saveError&&v("p",{class:"warning",children:this.state.saveError}),v("h3",{children:he("load")}),v("p",{children:v("button",{className:"btn btn-sm btn-neutral",onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),v("p",{children:v("textarea",{className:"textarea",onInput:r=>this.import(r.target.value),placeholder:he("paste_event_json")})}),this.state.loadError&&v("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&v("p",{class:"positive",children:he("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&v(lt,{children:[v("p",{class:"positive",children:he("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(r=>v("div",{className:"profile-link-container",children:[v(Qt,{href:`/${de.toNostrBech32Address(r,"npub")}`,className:"profile-link",children:[v(fs,{str:r,width:40}),v(Er,{pub:r})]}),v(jh,{id:r})]}))]})]})})}async onClickDownload(r,t){try{this.setState({saveMessage:null,saveError:null});const n=await t(),i="data:text/json;charset=utf-8,"+encodeURIComponent(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove()}catch(n){console.error(n),this.setState({saveError:n.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=t=>{var s;const i=(s=t.target.files)==null?void 0:s[0];if(i){const o=new FileReader;o.onload=()=>{this.import(o.result)},o.readAsText(i)}},r.click()}import(r){var t;if(!r||r.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let n=JSON.parse(r);Array.isArray(n)||(n=[n]);for(const i of n){if(!i.sig)continue;Re.publish(i);const s=de.getPubKey();if(i.pubkey===s&&i.kind===3){const o=i.tags.filter(u=>u[0]==="p").map(u=>u[1]),a=(((t=Re.db.findOne({kind:3,pubkey:s}))==null?void 0:t.tags)||[]).filter(u=>u[0]==="p").map(u=>u[1]),l=o.filter(u=>!a.includes(u));et.setFollowed(l),this.setState({restoredFollows:l})}}this.setState({loadError:null,importedEvents:n.length})}catch(n){this.setState({loadError:n.message})}}}class WIe extends $n{constructor(){super(),this.state={settings:{}}}componentDidMount(){De.get("settings").on(this.inject())}render(){const r=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],t=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("content")}),v("h3",{children:he("notes")}),r.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>De.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n)),v("h3",{children:he("media")}),t.map(({setting:n,label:i})=>v("p",{children:[v("input",{type:"checkbox",checked:this.state.settings[n]!==!1,onChange:()=>De.get("settings").get(n).put(this.state.settings[n]===!1),id:n}),v("label",{htmlFor:n,children:[" ",i]})]},n))]})})}}class qIe extends $n{render(){const r=(n,i,s)=>v("p",{children:[v("input",{type:"checkbox",id:n,checked:this.state[n]===void 0?s:this.state[n],onChange:o=>{const a=o.target.checked;De.get("dev").get(n).put(a)}}),v("label",{htmlFor:n,children:i})]}),t=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexed03",label:"Use central index server for kinds 0 and 3",defaultValue:!0},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:"Developer"}),v("p",{children:"Settings intended for Dpeep developers."}),t.map(({key:n,label:i,defaultValue:s})=>r(n,i,s))]})})}componentDidMount(){De.get("dev").on(this.sub(r=>this.setState(r)))}}class KIe extends $n{constructor(){super(...arguments);ce(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});ce(this,"checkAvailabilityFromAPI",wn.debounce(async t=>{const n=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(t)}`);if(t===this.state.newUserName)if(n.status<500){const i=await n.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(t,n=!0){return v(lt,{children:[v("p",{children:["Username: ",v("b",{children:t})]}),v("p",{children:["Short link:"," ",n?v("a",{href:`https://iris.to/${t}`,onClick:i=>{i.preventDefault(),_r(`/${t}`)},children:["iris.to/",t]}):v(lt,{children:["iris.to/",t]})]}),v("p",{children:["Nostr address (nip05): ",v("b",{children:[t,"@iris.to"]})]})]})}render(){let t;if(this.state.irisToActive){const n=this.state.profile.nip05.split("@")[0];t=this.renderAccountName(n)}else this.state.existing&&this.state.existing.confirmed?t=v("div",{children:[v("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),v("p",{children:v(ch,{onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?t=v("div",{children:[v("p",{className:"text-iris-green",children:["Username iris.to/",v("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),v("p",{children:v(ch,{onClick:()=>this.enableReserved(),children:"Yes please"})}),v("p",{children:v(ch,{onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?t=v("div",{className:"text-iris-red",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=n=>this.register(n),t=v(lt,{children:[v("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),v("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):t=v("div",{children:[v("p",{children:"Register an Iris username (iris.to/username)"}),v("form",{onSubmit:n=>this.showChallenge(n),children:[v("div",{className:"flex gap-2",children:[v("input",{className:"input",type:"text",placeholder:"Username",value:this.state.newUserName,onInput:n=>this.onNewUserNameChange(n)}),v("button",{className:"btn btn-primary",type:"submit",children:"Register"})]}),v("p",{children:this.state.newUserNameValid?v(lt,{children:[v("span",{className:"text-iris-green",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):v("span",{className:"text-iris-red",children:this.state.invalidUsernameMessage})})]})]});return v(lt,{children:[v("h3",{children:"Iris.to account"}),t,v("p",{children:v("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})}async onNewUserNameChange(t){const n=t.target.value;if(n.length===0){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:""});return}if(n.length<8||n.length>15){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 8 and 15 characters"});return}if(!n.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:n,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:n,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(n)}showChallenge(t){t.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(t){console.log("register",t);const n=de.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};i.id=Re.getEventHash(i),i.sig=await de.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:t})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(o=>{this.setState({error:o.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const t=this.state.existing.name+"@iris.to",n=setTimeout(()=>{et.setMetadata({nip05:t})},2e3);et.getProfile(de.getPubKey(),i=>{i&&(clearTimeout(n),i.nip05!==t&&(i.nip05=t,et.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const t=de.getPubKey(),n={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Re.getEventHash(n),n.sig=await de.sign(n);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});De.get("showNoIrisToAddress").put(!1),De.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const t=de.getPubKey(),n={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=Re.getEventHash(n),n.sig=await de.sign(n);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const t=de.getPubKey();et.getProfile(t,n=>{const i=n&&n.nip05&&n.nip05valid&&n.nip05.endsWith("@iris.to");this.setState({profile:n,irisToActive:i}),n&&!i&&this.checkExistingAccount(t)},!0),this.checkExistingAccount(t)}async checkExistingAccount(t){const n=await fetch(`https://api.iris.to/user/find?public_key=${t}`);if(n.status===200){const i=await n.json();this.setState({existing:i})}}}const VIe=()=>v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("language")}),v("div",{class:"centered-container",children:Object.keys(Hy).map(e=>{let r;return e==Uo?r=v("input",{type:"radio",name:"language",id:e,onChange:t=>I8(t),value:e,checked:!0}):r=v("input",{type:"radio",name:"language",id:e,onChange:t=>I8(t),value:e}),v(lt,{children:[r,v("label",{for:e,children:[" ",Hy[e]]}),v("br",{})]},e)})})]})});function I8(e){const r=e.target.value;rp.indexOf(r)>=0&&(localStorage.setItem("language",r),location.reload())}const GIe=()=>{const[e,r]=Me(Array.from(sn.relays.values())),[t,n]=Me([]),[i,s]=Me("");St(()=>{const c=setInterval(()=>{r(Array.from(sn.relays.values()))},2e3);return()=>clearInterval(c)}),St(()=>{n(sn.getPopularRelays())},[]);const o=c=>{De.get("relays").get(c.url).put(null),sn.remove(c.url)},a=c=>c.includes("://")?c:`wss://${c}`,l=(c,d)=>{const y=a(d);De.get("relays").get(y).put({enabled:!0,newRelayUrlWithProtocol:y}),c.preventDefault(),sn.add(y),s("")},u=c=>{try{return Bt.relayPool.relayByUrl.get(c.url).status}catch{return 3}},f=c=>{switch(u(c)){case 0:return"text-iris-yellow";case 1:return"text-iris-green";case 2:return"text-iris-yellow";case 3:return"";default:return"status"}};return v("div",{className:"centered-container",children:[v("h2",{children:he("network")}),v("div",{className:"flex flex-col gap-2",children:[e.map(c=>v("div",{className:"flex gap-2 flex-row peer",children:[v("div",{className:"flex-1",children:[v("span",{className:f(c),children:"⬤ "}),c.url]},c.url),v("button",{className:"btn btn-neutral btn-sm",onClick:()=>o(c),children:he("remove")}),v("input",{className:"checkbox",type:"checkbox",checked:c.enabled!==!1,onChange:()=>{c.enabled=c.enabled===!1,c.enabled?sn.enable(c.url):sn.disable(c.url)}})]})),v("div",{className:"flex flex-row peer gap-2",children:[v("div",{className:"flex-cell",children:v("input",{className:"input",id:"new-relay-url",type:"text",placeholder:he("new_relay_url"),value:i,onChange:c=>s(c.target.value)})},"new"),v("div",{className:"flex-cell no-flex",children:v("button",{className:"btn btn-neutral",onClick:c=>l(c,i),children:he("add")})})]}),v("div",{className:"flex gap-2 my-2",children:[v("button",{className:"btn btn-neutral",onClick:()=>sn.saveToContacts(),children:he("save_relays_publicly")}),v("button",{className:"btn btn-neutral",onClick:()=>sn.restoreDefaults(),children:he("restore_defaults")})]})]}),v("h3",{children:he("popular_relays")}),v("div",{className:"flex flex-col gap-2",children:[v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:he("users")}),v("div",{className:"flex-grow",children:"URL"})]}),t.map(c=>v("div",{className:"flex peer gap-2",children:[v("div",{className:"flex-initial",children:c.users}),v("div",{className:"flex-grow truncate",children:c.url}),v("div",{className:"flex-initial",children:v("button",{className:"btn btn-sm btn-neutral",onClick:d=>l(d,c.url),children:he("add")})})]},c.url))]})]})},YIe=()=>{const[e,r]=Me("USD"),[t,n]=Me(1e3);St(()=>{De.get("displayCurrency").on(s=>{r(s)})},[]),St(()=>{De.get("defaultZapAmount").on(s=>{n(s)})});const i=s=>{const a=s.target.value;De.get("displayCurrency").put(a)};return v(lt,{children:v("div",{class:"centered-container",children:[v("h3",{children:he("payments")}),v("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",v("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),v("p",{children:[v("label",{for:"displayCurrency",children:he("display_currency")}),v("select",{className:"select",id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[v("option",{value:"USD",children:"USD"}),v("option",{value:"EUR",children:"EUR"}),v("option",{value:"JPY",children:"JPY"}),v("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),v("p",{children:[v("label",{for:"defaultZapAmount",children:[he("default_zap_amount")," (sats):"]}),v("input",{className:"input",type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:t,onChange:s=>{De.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class ZIe extends $n{constructor(){super();ce(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let t=!1;const n=this.state.blockedUsers.map(s=>{const o=de.toNostrBech32Address(s,"npub");if(o)return t=!0,v("div",{children:v(Qt,{href:`/${o}`,children:v(Er,{pub:s})})},s)}),i=Array.from(et.usersByFollowDistance.entries()).slice(1);return v(lt,{children:v("div",{class:"centered-container",children:[v("h2",{children:he("social_network")}),v("h3",{children:"Stored on your device"}),v("p",{children:["Total size: ",i.reduce((s,o)=>s+o[1].size,0)," users"]}),v("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>v("div",{children:[s[0]||he("unknown"),": ",s[1].size," users"]})),v("p",{children:"Filter incoming events by follow distance:"}),v("select",{className:"select",value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const o=s.target;De.get("globalFilter").get("maxFollowDistance").put(parseInt(o.value))},children:[v("option",{value:"0",children:"Off"}),v("option",{value:"1",children:"1"}),v("option",{value:"2",children:"2"}),v("option",{value:"3",children:"3"}),v("option",{value:"4",children:"4"}),v("option",{value:"5",children:"5"}),v("option",{value:"6",children:"6"})]}),v("p",{children:"Minimum number of followers at maximum follow distance:"}),v("input",{className:"input",type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||Re.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const o=s.target;De.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(o.value))}}),v("h3",{children:he("blocked_users")}),!t&&he("none"),v("p",{children:v("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?he("hide"):he("show")," ",n.length]})}),this.state.showBlockedUsers&&n]})})}componentDidMount(){et.getBlockedUsers(t=>{this.setState({blockedUsers:Array.from(t)})}),De.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class XIe extends $n{constructor(){super();ce(this,"content","");ce(this,"pages",{account:zIe,network:GIe,appearance:HIe,language:VIe,content:WIe,payments:YIe,backup:UIe,social_network:ZIe,iris_account:KIe,dev:qIe});this.content="home"}render(){const t=this.pages[this.props.id]||this.pages.account;return v("div",{className:"prose",children:v(t,{})})}}const aw={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(aw.iris_account="iris.to");class JIe extends $n{menuLinkClicked(r,t){t.preventDefault(),De.get("toggleSettingsMenu").put(!1),De.get("scrollUp").put(!0),_r(`/settings/${r}`)}render(){const r=this.props.activePage||"account";return v("div",{className:`flex-col w-full md:w-48 flex-shrink-0 ${this.props.activePage?"hidden md:flex":"flex"}`,children:Object.keys(aw).map(t=>{if(aw[t])return v("a",{href:"#",className:`btn inline-flex w-auto flex items-center p-3 rounded-full transition-colors duration-200 hover:bg-neutral-900 ${r===t&&window.innerWidth>624?"active":""}`,onClick:n=>this.menuLinkClicked(t,n),children:[v("span",{class:"text",children:he(aw[t])}),v(dt,{when:t==="language",children:v(TH,{width:16})})]},t)})})}}const QIe=e=>v(lt,{children:[v(Su,{}),v("div",{className:"flex flex-row px-2 md:px-0",children:[v(JIe,{activePage:e.page}),v("div",{className:e.page?"":"hidden md:flex",children:v(XIe,{id:e.page})})]})]});class eAe extends $n{render(){return v(lt,{children:[v(Su,{}),v("div",{className:"main-view",id:"settings",children:v("div",{className:"centered-container mobile-padding15",children:[v("h2",{children:he("subscribe")}),v("h3",{children:"Iris Supporter"}),v("p",{children:"Support open source development and get extra features!"}),v("p",{children:v("ul",{children:[v("li",{children:"Iris Supporter Badge"}),v("li",{children:"Purple checkmark on Iris"}),v("li",{children:"High-quality automatic translations (via deepl.com)"}),v("li",{children:"Iris Supporters' private group chat"}),v("li",{children:"More features to come!"})]})}),v("p",{children:[v("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),v("label",{htmlFor:"subscription_annually",children:[v("b",{children:"8 € / month"})," charged annually (96 € / year)"]})]}),v("p",{children:[v("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),v("label",{htmlFor:"subscription_monthly",children:[v("b",{children:"10 € / month"})," charged monthly (120 € / year)"]})]}),v("p",{children:v(ch,{children:"Subscribe"})}),v("h3",{children:"Iris Titan"}),v("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",v("ul",{children:[v("li",{children:"Iris Titan Badge"}),v("li",{children:"Iris Titans private group chat"}),v("li",{children:"Priority support"})]})]}),v("p",{children:[v("b",{children:"1000 €"})," one-time payment."]}),v("p",{children:v(ch,{children:"Subscribe"})}),v("br",{}),v("br",{})]})})]})}}class tAe extends zh{constructor(){super(),this.class="public-messages-view"}renderView(){return Ao`
      <div id="message-list" class="centered-container">
        <${Rm} standalone=${!0} showFiles=${!0} torrentId=${this.props.id} />
      </div>
    `}}function rAe(){return St(()=>{let e=de.getPubKey();return e&&rr.init(e),()=>{}},[]),null}const nAe=e=>{switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"Yes":"No";case"object":return e instanceof Date?e.toLocaleDateString():e===null?"null":Array.isArray(e)?"Array["+e.length+"]":"Object";case"undefined":return"undefined";case"function":return"function";case"symbol":return e.toString();case"bigint":return e.toString()+"n";default:return"Unknown type"}},sS=({data:e,title:r})=>v("div",{className:"flex flex-col border-2 rounded-lg border-white p-4",children:[v("div",{className:"px-4 py-2 text-left text-lg font-semibold",children:r}),e==null?void 0:e.map(t=>v("div",{className:"flex justify-between p-2",children:[v("span",{className:"whitespace-nowrap",children:t.name})," ",v("span",{className:"flex-grow text-right",children:nAe(t.value)})]}))]}),iAe=["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9","npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a","npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh"],Ro="npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m",Do="npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",da="npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m",Bo="npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk",Dm="npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p",Iv="npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8",Bm="npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6",Mm="npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",A8=[{from:Ro,to:Do,val:1},{from:Ro,to:da,val:1},{from:Ro,to:Bo,val:1},{from:Ro,to:Dm,val:1},{from:Ro,to:Iv,val:1},{from:Ro,to:Bm,val:1},{from:Ro,to:Mm,val:1}],O8=[{from:Do,to:Ro,val:1},{from:Do,to:da,val:1},{from:Do,to:Bo,val:1},{from:Do,to:Dm,val:1},{from:Do,to:Iv,val:1},{from:Do,to:Bm,val:1},{from:Do,to:Mm,val:1}],C8=[{from:da,to:Ro,val:1},{from:da,to:Do,val:1},{from:da,to:Bo,val:1},{from:da,to:Dm,val:1},{from:da,to:Iv,val:1},{from:da,to:Bm,val:1},{from:da,to:Mm,val:1}],P8=[{from:Bo,to:Ro,val:-1},{from:Bo,to:Do,val:-1},{from:Bo,to:da,val:-1},{from:Bo,to:Dm,val:-1},{from:Bo,to:Iv,val:-1},{from:Bo,to:Bm,val:1},{from:Bo,to:Mm,val:1}],sAe=[{from:Iv,to:Ro,val:-1}];function fa(e){let{from:r,to:t}=e;return r=de.toNostrHexAddress(r),t=de.toNostrHexAddress(t),rr.setTrust({...e,from:r,to:t},!0)}function ha(e,r,t){return{from:e,to:r,val:t,entityType:1,context:"nostr",note:"",timestamp:mke()}}function Wl(e){Object.values(e).forEach(r=>{fa(ha(r.from,r.to,r.val))})}const oAe=e=>{const[r,t]=Me(null),[n]=Me([]),i=de.toNostrHexAddress(e.id)||de.getPubKey(),s=de.toNostrBech32Address(i,"npub");St(()=>(rr.whenReady(()=>{ls.getProfiles(iAe,x=>{let I={};x.forEach(g=>{I[vt(g.key)]=g});let O=Object.values(rr.g.edges).length,C=Object.values(rr.g.vertices).length;t(g=>({...g,profiles:x,profileIndex:I,edgesCount:O,nodesCount:C}))}).then(x=>n.push(x))}),()=>{n.forEach(x=>x==null?void 0:x())}),[i]);function o(){let x=Object.values(rr.g.edges).length,I=Object.values(rr.g.vertices).length,O=Object.values(et.profiles);rr.processGraph=!0,rr.processScore(),t(C=>({...C,profiles:O,edgesCount:x,nodesCount:I}))}const a=x=>{x.preventDefault(),et.profiles=new Map,o()},l=x=>{x.preventDefault(),rr.g.vertices={},rr.g.edges={},o()},u=x=>{R1e()},f=x=>{x.preventDefault(),u(),l(x),a(x)},c=x=>{x.preventDefault(),fa(ha(i,Ro,1)),Wl(A8),o()},d=x=>{x.preventDefault(),fa(ha(i,da,1)),Wl(C8),o()},y=x=>{x.preventDefault(),fa(ha(i,Bo,1)),Wl(P8),o()},w=x=>{x.preventDefault(),fa(ha(i,Do,1)),Wl(O8),o()},b=x=>{x.preventDefault(),fa(ha(i,Do,1)),fa(ha(i,Bo,1)),fa(ha(i,Dm,1)),fa(ha(i,Iv,1)),fa(ha(i,Bm,1)),fa(ha(i,Mm,1)),Wl(A8),Wl(C8),Wl(P8),Wl(O8),Wl(sAe),o()},T=()=>{if(!(r!=null&&r.profiles))return;let x=r.profiles.map(I=>({name:I.name,value:de.toNostrBech32Address(I.key,"npub")}));return v(sS,{data:x,title:"Profiles"})},_=()=>{if(!(r!=null&&r.edges))return;let x=r.edges.map(I=>{var O,C;return{name:I.key,value:`${(O=I.out)==null?void 0:O.id} -- ${I.val} --> ${(C=I.in)==null?void 0:C.id}`}});return v(sS,{data:x,title:"Edges"})},A=()=>{let x=[{name:"Profiles",value:r==null?void 0:r.profiles.length},{name:"Vertices",value:r==null?void 0:r.nodesCount},{name:"Edges",value:r==null?void 0:r.edgesCount}];return v(sS,{data:x,title:"Overview"})};return v(lt,{children:[v(Su,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${s}`,children:v(Er,{pub:s})}),v("span",{style:{flex:1},className:"ml-1",children:"Test Data"})]})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),"All trust data generated is solely for testing and will not be submitted to the relays. The profiles used are exclusively for demonstration purposes and do not reflect any real-life trust situations.",v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:[v(Af,{className:"btn btn-sm",onClick:c,children:"Create Jack Graph"}),v(Af,{className:"btn btn-sm",onClick:d,children:"Create Saylor Graph"}),v(Af,{className:"btn btn-sm",onClick:y,children:"Create Saylor Graph"}),v(Af,{className:"btn btn-sm",onClick:w,children:"Create Lyn Graph"}),v(Af,{className:"btn btn-sm",onClick:b,children:"Create All Graphs"}),v(Af,{className:"btn btn-sm",onClick:f,children:"Reset All"})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex",children:[v("div",{className:"flex flex-1 gap-4",children:A()}),v("div",{className:"flex flex-1 gap-4",children:T()}),v("div",{className:"flex flex-1 gap-4",children:_()})]})]})},aAe=({view:e,me:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v("div",{className:"flex flex-wrap gap-4",children:[v("span",{className:"text-neutral-500",children:"View:"}),v(dt,{when:!r,children:v(Qt,{href:t({view:"path"}),className:e=="path"?n:i,children:he("Path")})}),v(Qt,{href:t({view:"graph"}),className:e=="graph"?n:i,children:he("Graph")}),v(Qt,{href:t({view:"list"}),className:e=="list"?n:i,children:he("List")})]})};let YV=!0;const ZV=function(){YV=!1,window.removeEventListener("popstate",ZV)};window.addEventListener("popstate",ZV);const lAe=e=>{const[r,t]=Me(null);let n=0;St(()=>(window.addEventListener("scroll",i),s(),()=>{r&&r.disconnect(),window.removeEventListener("scroll",i)}),[]);let i=wn.debounce(()=>{const a=window.scrollY||document.documentElement.scrollTop,u={...window.history.state,scrollPosition:a};window.history.replaceState(u,"")},100);function s(a=!0){var f,c;const l=window.history.state,u=(f=window.history.state)==null?void 0:f.previousState;if(!YV&&l!==u)a&&o(),n||(n=(c=window.history.state)==null?void 0:c.scrollPosition),n&&window.scrollTo(0,n);else{const y={...window.history.state||{},previousState:l};window.history.replaceState(y,"")}}let o=()=>{t(new ResizeObserver(a=>{a.forEach(()=>{s(!1)})})),r==null||r.observe(document.body),setTimeout(()=>{r&&r.disconnect()},1e3)};return v(lt,{children:v("div",{children:v(GP,{children:e.children})})})},uAe=({entitytype:e,dir:r,setSearch:t})=>{const n="graphlink active",i="graphlink";return v(dt,{when:r=="out",children:v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Subject:"}),v(Qt,{href:t({entitytype:"key"}),className:e=="key"?n:i,children:he("Profile")}),v(Qt,{href:t({entitytype:"item"}),className:e=="item"?n:i,children:he("Post")})]})})},XV=({dir:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:[he("Direction"),":"]}),v(Qt,{href:r({dir:"out"}),className:e=="out"?t:n,children:he("Outgoing")}),v(Qt,{href:r({dir:"in"}),className:e=="in"?t:n,children:he("Incoming")})]})},cAe=({trusttype:e,setSearch:r})=>{const t="graphlink active",n="graphlink";return v("div",{className:"flex gap-4",children:[v("span",{className:"text-neutral-500",children:"Value:"}),v(Qt,{href:r({trusttype:"both"}),className:e=="both"?t:n,children:he("Both")}),v(Qt,{href:r({trusttype:"trust"}),className:e=="trust"?t:n,children:he("Trust")}),v(Qt,{href:r({trusttype:"distrust"}),className:e=="distrust"?t:n,children:he("Distrust")})]})};function fAe(e,r){return!r||e.length==0?[...e]:e.filter(n=>{var s,o;let i=ls.getDefaultProfile(n.id);return!!((s=i==null?void 0:i.name)!=null&&s.toLowerCase().includes(r.toLowerCase())||(o=i==null?void 0:i.display_name)!=null&&o.toLowerCase().includes(r.toLowerCase()))})}function hAe(e,r){return e.degree<r.degree?-1:e.degree>r.degree?1:0}const JV=(e,r,t=!0)=>!e||!r?null:v("div",{className:"text-sm flex flex-2 gap-2",children:[VV(e,r,t),GV(e,r,t)]}),dAe=({props:e})=>{const[r,t]=Me([]),[n,i]=Me([]),[s]=Me([]);St(()=>{let u=vt(e.hexKey);if(!u)return;let f=Bee(e.entitytype,1),c=x0t(e.trusttype,void 0);return o(u,e.dir,f,c),()=>{s.forEach(d=>d==null?void 0:d())}},[e.npub,e.dir,e.entitytype,e.trusttype]),St(()=>{let u=fAe(r,e.filter);u.length==0&&n.length==0||i(u)},[e.filter,r]);async function o(u,f,c,d){let y=[];f=="out"&&(y=rr.g.outTrustById(u,c,d)),e.dir=="in"&&(y=rr.g.trustedBy(u,nu.Key,d));let w=y.map(T=>Qi(T.id)),b=await ls.getProfiles(w,T=>{});s.push(b),y=y.sort(hAe),t(y)}const a=()=>{let u=vt(e.hexKey);return n.length==0?v("div",{className:"text-center",children:he("No results")}):v(lt,{children:n.map(f=>l(f,u))})},l=(u,f)=>{const c=Qi(u.id),d=u.degree,y=u.score,w=de.toNostrBech32Address(c,"npub");let b="",T="";if(e.dir=="in"){const _=u.out[f];_&&(b=`text-${Gy(_.val)}-500 text-2xl`,T="←")}else{const _=u.in[f];_&&(b=`text-${Gy(_.val)}-500 text-2xl`,T="→")}return v("div",{className:"flex w-full py-2",children:[v("div",{className:"flex-0 self-center px-4",children:v("i",{className:b,children:T})}),v(Qt,{href:e.setSearch({npub:w}),className:"flex flex-1 gap-2",children:[v(fs,{str:w,width:49}),v("div",{children:[v(Er,{pub:w,hexKey:c})," ",v("span",{className:"text-sm",children:["ID ",u.id]}),v("br",{}),v("span",{className:"text-sm",children:["Degree ",d]})]})]}),JV(y,w)]},c)};return e.npub?v(lt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(XV,{dir:e.dir,setSearch:e.setSearch}),v(cAe,{trusttype:e.trusttype,setSearch:e.setSearch}),v(uAe,{entitytype:e.entitytype,dir:e.dir,setSearch:e.setSearch})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-col w-full gap-4",children:v(lAe,{children:a()})})]}):null};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Q_(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var N8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u$={},pAe={get exports(){return u$},set exports(e){u$=e}},fA={},vAe={get exports(){return fA},set exports(e){fA=e}},hA={},gAe={get exports(){return hA},set exports(e){hA=e}},t1=function(e){return e&&e.Math==Math&&e},xn=t1(typeof globalThis=="object"&&globalThis)||t1(typeof window=="object"&&window)||t1(typeof self=="object"&&self)||t1(typeof N8=="object"&&N8)||function(){return this}()||Function("return this")(),kr=function(e){try{return!!e()}catch{return!0}},yAe=kr,Lm=!yAe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),mAe=Lm,QV=Function.prototype,R8=QV.apply,D8=QV.call,Av=typeof Reflect=="object"&&Reflect.apply||(mAe?D8.bind(R8):function(){return D8.apply(R8,arguments)}),eG=Lm,tG=Function.prototype,dA=tG.call,bAe=eG&&tG.bind.bind(dA,dA),Br=eG?bAe:function(e){return function(){return dA.apply(e,arguments)}},rG=Br,wAe=rG({}.toString),$Ae=rG("".slice),ku=function(e){return $Ae(wAe(e),8,-1)},_Ae=ku,xAe=Br,e4=function(e){if(_Ae(e)==="Function")return xAe(e)},pA=typeof document=="object"&&document.all,EAe=typeof pA>"u"&&pA!==void 0,nG={all:pA,IS_HTMLDDA:EAe},iG=nG,SAe=iG.all,En=iG.IS_HTMLDDA?function(e){return typeof e=="function"||e===SAe}:function(e){return typeof e=="function"},Hh={},kAe=kr,ri=!kAe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),TAe=Lm,r1=Function.prototype.call,yi=TAe?r1.bind(r1):function(){return r1.apply(r1,arguments)},Fm={},sG={}.propertyIsEnumerable,oG=Object.getOwnPropertyDescriptor,IAe=oG&&!sG.call({1:2},1);Fm.f=IAe?function(r){var t=oG(this,r);return!!t&&t.enumerable}:sG;var Uh=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},AAe=Br,OAe=kr,CAe=ku,oS=Object,PAe=AAe("".split),ex=OAe(function(){return!oS("z").propertyIsEnumerable(0)})?function(e){return CAe(e)=="String"?PAe(e,""):oS(e)}:oS,jm=function(e){return e==null},NAe=jm,RAe=TypeError,zm=function(e){if(NAe(e))throw RAe("Can't call method on "+e);return e},DAe=ex,BAe=zm,Ra=function(e){return DAe(BAe(e))},B8=En,aG=nG,MAe=aG.all,mi=aG.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:B8(e)||e===MAe}:function(e){return typeof e=="object"?e!==null:B8(e)},Kr={},aS=Kr,lS=xn,LAe=En,M8=function(e){return LAe(e)?e:void 0},hs=function(e,r){return arguments.length<2?M8(aS[e])||M8(lS[e]):aS[e]&&aS[e][r]||lS[e]&&lS[e][r]},FAe=Br,on=FAe({}.isPrototypeOf),Yc=typeof navigator<"u"&&String(navigator.userAgent)||"",lG=xn,uS=Yc,L8=lG.process,F8=lG.Deno,j8=L8&&L8.versions||F8&&F8.version,z8=j8&&j8.v8,va,c$;z8&&(va=z8.split("."),c$=va[0]>0&&va[0]<4?1:+(va[0]+va[1]));!c$&&uS&&(va=uS.match(/Edge\/(\d+)/),(!va||va[1]>=74)&&(va=uS.match(/Chrome\/(\d+)/),va&&(c$=+va[1])));var Ov=c$,H8=Ov,jAe=kr,Cv=!!Object.getOwnPropertySymbols&&!jAe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&H8&&H8<41}),zAe=Cv,uG=zAe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",HAe=hs,UAe=En,WAe=on,qAe=uG,KAe=Object,Hm=qAe?function(e){return typeof e=="symbol"}:function(e){var r=HAe("Symbol");return UAe(r)&&WAe(r.prototype,KAe(e))},VAe=String,Pv=function(e){try{return VAe(e)}catch{return"Object"}},GAe=En,YAe=Pv,ZAe=TypeError,Rs=function(e){if(GAe(e))return e;throw ZAe(YAe(e)+" is not a function")},XAe=Rs,JAe=jm,t4=function(e,r){var t=e[r];return JAe(t)?void 0:XAe(t)},cS=yi,fS=En,hS=mi,QAe=TypeError,eOe=function(e,r){var t,n;if(r==="string"&&fS(t=e.toString)&&!hS(n=cS(t,e))||fS(t=e.valueOf)&&!hS(n=cS(t,e))||r!=="string"&&fS(t=e.toString)&&!hS(n=cS(t,e)))return n;throw QAe("Can't convert object to primitive value")},zc={},tOe={get exports(){return zc},set exports(e){zc=e}},rOe=!0,U8=xn,nOe=Object.defineProperty,iOe=function(e,r){try{nOe(U8,e,{value:r,configurable:!0,writable:!0})}catch{U8[e]=r}return r},sOe=xn,oOe=iOe,W8="__core-js_shared__",aOe=sOe[W8]||oOe(W8,{}),r4=aOe,q8=r4;(tOe.exports=function(e,r){return q8[e]||(q8[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var lOe=zm,uOe=Object,Ds=function(e){return uOe(lOe(e))},cOe=Br,fOe=Ds,hOe=cOe({}.hasOwnProperty),qn=Object.hasOwn||function(r,t){return hOe(fOe(r),t)},dOe=Br,pOe=0,vOe=Math.random(),gOe=dOe(1 .toString),tx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+gOe(++pOe+vOe,36)},yOe=xn,mOe=zc,K8=qn,bOe=tx,wOe=Cv,$Oe=uG,ip=yOe.Symbol,dS=mOe("wks"),_Oe=$Oe?ip.for||ip:ip&&ip.withoutSetter||bOe,an=function(e){return K8(dS,e)||(dS[e]=wOe&&K8(ip,e)?ip[e]:_Oe("Symbol."+e)),dS[e]},xOe=yi,V8=mi,G8=Hm,EOe=t4,SOe=eOe,kOe=an,TOe=TypeError,IOe=kOe("toPrimitive"),AOe=function(e,r){if(!V8(e)||G8(e))return e;var t=EOe(e,IOe),n;if(t){if(r===void 0&&(r="default"),n=xOe(t,e,r),!V8(n)||G8(n))return n;throw TOe("Can't convert object to primitive value")}return r===void 0&&(r="number"),SOe(e,r)},OOe=AOe,COe=Hm,rx=function(e){var r=OOe(e,"string");return COe(r)?r:r+""},POe=xn,Y8=mi,vA=POe.document,NOe=Y8(vA)&&Y8(vA.createElement),n4=function(e){return NOe?vA.createElement(e):{}},ROe=ri,DOe=kr,BOe=n4,cG=!ROe&&!DOe(function(){return Object.defineProperty(BOe("div"),"a",{get:function(){return 7}}).a!=7}),MOe=ri,LOe=yi,FOe=Fm,jOe=Uh,zOe=Ra,HOe=rx,UOe=qn,WOe=cG,Z8=Object.getOwnPropertyDescriptor;Hh.f=MOe?Z8:function(r,t){if(r=zOe(r),t=HOe(t),WOe)try{return Z8(r,t)}catch{}if(UOe(r,t))return jOe(!LOe(FOe.f,r,t),r[t])};var qOe=kr,KOe=En,VOe=/#|\.prototype\./,Um=function(e,r){var t=YOe[GOe(e)];return t==XOe?!0:t==ZOe?!1:KOe(r)?qOe(r):!!r},GOe=Um.normalize=function(e){return String(e).replace(VOe,".").toLowerCase()},YOe=Um.data={},ZOe=Um.NATIVE="N",XOe=Um.POLYFILL="P",fG=Um,X8=e4,JOe=Rs,QOe=Lm,eCe=X8(X8.bind),Zc=function(e,r){return JOe(e),r===void 0?e:QOe?eCe(e,r):function(){return e.apply(r,arguments)}},no={},tCe=ri,rCe=kr,hG=tCe&&rCe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),nCe=mi,iCe=String,sCe=TypeError,io=function(e){if(nCe(e))return e;throw sCe(iCe(e)+" is not an object")},oCe=ri,aCe=cG,lCe=hG,n1=io,J8=rx,uCe=TypeError,pS=Object.defineProperty,cCe=Object.getOwnPropertyDescriptor,vS="enumerable",gS="configurable",yS="writable";no.f=oCe?lCe?function(r,t,n){if(n1(r),t=J8(t),n1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&yS in n&&!n[yS]){var i=cCe(r,t);i&&i[yS]&&(r[t]=n.value,n={configurable:gS in n?n[gS]:i[gS],enumerable:vS in n?n[vS]:i[vS],writable:!1})}return pS(r,t,n)}:pS:function(r,t,n){if(n1(r),t=J8(t),n1(n),aCe)try{return pS(r,t,n)}catch{}if("get"in n||"set"in n)throw uCe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var fCe=ri,hCe=no,dCe=Uh,Tu=fCe?function(e,r,t){return hCe.f(e,r,dCe(1,t))}:function(e,r,t){return e[r]=t,e},i1=xn,pCe=Av,vCe=e4,gCe=En,yCe=Hh.f,mCe=fG,Bd=Kr,bCe=Zc,Md=Tu,Q8=qn,wCe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return pCe(e,this,arguments)};return r.prototype=e.prototype,r},Nt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?i1:i?i1[t]:(i1[t]||{}).prototype,a=n?Bd:Bd[t]||Md(Bd,t,{})[t],l=a.prototype,u,f,c,d,y,w,b,T,_;for(d in r)u=mCe(n?d:t+(i?".":"#")+d,e.forced),f=!u&&o&&Q8(o,d),w=a[d],f&&(e.dontCallGetSet?(_=yCe(o,d),b=_&&_.value):b=o[d]),y=f&&b?b:r[d],!(f&&typeof w==typeof y)&&(e.bind&&f?T=bCe(y,i1):e.wrap&&f?T=wCe(y):s&&gCe(y)?T=vCe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&Md(T,"sham",!0),Md(a,d,T),s&&(c=t+"Prototype",Q8(Bd,c)||Md(Bd,c,{}),Md(Bd[c],d,y),e.real&&l&&(u||!l[d])&&Md(l,d,y)))},$Ce=Nt,_Ce=ri,eM=no.f;$Ce({target:"Object",stat:!0,forced:Object.defineProperty!==eM,sham:!_Ce},{defineProperty:eM});var xCe=Kr,dG=xCe.Object,ECe=gAe.exports=function(r,t,n){return dG.defineProperty(r,t,n)};dG.defineProperty.sham&&(ECe.sham=!0);var SCe=hA,pG=SCe,kCe=pG,TCe=kCe,ICe=TCe,ACe=ICe;(function(e){e.exports=ACe})(vAe);(function(e){e.exports=fA})(pAe);var nx=Vt(u$),Yy={},OCe={get exports(){return Yy},set exports(e){Yy=e}},gA={},CCe={get exports(){return gA},set exports(e){gA=e}},PCe=ku,Xc=Array.isArray||function(r){return PCe(r)=="Array"},NCe=Math.ceil,RCe=Math.floor,DCe=Math.trunc||function(r){var t=+r;return(t>0?RCe:NCe)(t)},BCe=DCe,ix=function(e){var r=+e;return r!==r||r===0?0:BCe(r)},MCe=ix,LCe=Math.min,FCe=function(e){return e>0?LCe(MCe(e),9007199254740991):0},jCe=FCe,so=function(e){return jCe(e.length)},zCe=TypeError,HCe=9007199254740991,i4=function(e){if(e>HCe)throw zCe("Maximum allowed index exceeded");return e},UCe=rx,WCe=no,qCe=Uh,Nv=function(e,r,t){var n=UCe(r);n in e?WCe.f(e,n,qCe(0,t)):e[n]=t},KCe=an,VCe=KCe("toStringTag"),vG={};vG[VCe]="z";var s4=String(vG)==="[object z]",GCe=s4,YCe=En,lw=ku,ZCe=an,XCe=ZCe("toStringTag"),JCe=Object,QCe=lw(function(){return arguments}())=="Arguments",e5e=function(e,r){try{return e[r]}catch{}},Iu=GCe?lw:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=e5e(r=JCe(e),XCe))=="string"?t:QCe?lw(r):(n=lw(r))=="Object"&&YCe(r.callee)?"Arguments":n},t5e=Br,r5e=En,yA=r4,n5e=t5e(Function.toString);r5e(yA.inspectSource)||(yA.inspectSource=function(e){return n5e(e)});var gG=yA.inspectSource,i5e=Br,s5e=kr,yG=En,o5e=Iu,a5e=hs,l5e=gG,mG=function(){},u5e=[],bG=a5e("Reflect","construct"),o4=/^\s*(?:class|function)\b/,c5e=i5e(o4.exec),f5e=!o4.exec(mG),Bg=function(r){if(!yG(r))return!1;try{return bG(mG,u5e,r),!0}catch{return!1}},wG=function(r){if(!yG(r))return!1;switch(o5e(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f5e||!!c5e(o4,l5e(r))}catch{return!0}};wG.sham=!0;var sx=!bG||s5e(function(){var e;return Bg(Bg.call)||!Bg(Object)||!Bg(function(){e=!0})||e})?wG:Bg,tM=Xc,h5e=sx,d5e=mi,p5e=an,v5e=p5e("species"),rM=Array,g5e=function(e){var r;return tM(e)&&(r=e.constructor,h5e(r)&&(r===rM||tM(r.prototype))?r=void 0:d5e(r)&&(r=r[v5e],r===null&&(r=void 0))),r===void 0?rM:r},y5e=g5e,ox=function(e,r){return new(y5e(e))(r===0?0:r)},m5e=kr,b5e=an,w5e=Ov,$5e=b5e("species"),Wm=function(e){return w5e>=51||!m5e(function(){var r=[],t=r.constructor={};return t[$5e]=function(){return{foo:1}},r[e](Boolean).foo!==1})},_5e=Nt,x5e=kr,E5e=Xc,S5e=mi,k5e=Ds,T5e=so,nM=i4,iM=Nv,I5e=ox,A5e=Wm,O5e=an,C5e=Ov,$G=O5e("isConcatSpreadable"),P5e=C5e>=51||!x5e(function(){var e=[];return e[$G]=!1,e.concat()[0]!==e}),N5e=function(e){if(!S5e(e))return!1;var r=e[$G];return r!==void 0?!!r:E5e(e)},R5e=!P5e||!A5e("concat");_5e({target:"Array",proto:!0,arity:1,forced:R5e},{concat:function(r){var t=k5e(this),n=I5e(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],N5e(u))for(l=T5e(u),nM(i+l),o=0;o<l;o++,i++)o in u&&iM(n,i,u[o]);else nM(i+1),iM(n,i++,u);return n.length=i,n}});var D5e=Iu,B5e=String,xl=function(e){if(D5e(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return B5e(e)},ax={},M5e=ix,L5e=Math.max,F5e=Math.min,qm=function(e,r){var t=M5e(e);return t<0?L5e(t+r,0):F5e(t,r)},j5e=Ra,z5e=qm,H5e=so,sM=function(e){return function(r,t,n){var i=j5e(r),s=H5e(i),o=z5e(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},a4={includes:sM(!0),indexOf:sM(!1)},Km={},U5e=Br,mS=qn,W5e=Ra,q5e=a4.indexOf,K5e=Km,oM=U5e([].push),_G=function(e,r){var t=W5e(e),n=0,i=[],s;for(s in t)!mS(K5e,s)&&mS(t,s)&&oM(i,s);for(;r.length>n;)mS(t,s=r[n++])&&(~q5e(i,s)||oM(i,s));return i},l4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],V5e=_G,G5e=l4,Vm=Object.keys||function(r){return V5e(r,G5e)},Y5e=ri,Z5e=hG,X5e=no,J5e=io,Q5e=Ra,e3e=Vm;ax.f=Y5e&&!Z5e?Object.defineProperties:function(r,t){J5e(r);for(var n=Q5e(t),i=e3e(t),s=i.length,o=0,a;s>o;)X5e.f(r,a=i[o++],n[a]);return r};var t3e=hs,xG=t3e("document","documentElement"),r3e=zc,n3e=tx,aM=r3e("keys"),lx=function(e){return aM[e]||(aM[e]=n3e(e))},i3e=io,s3e=ax,lM=l4,o3e=Km,a3e=xG,l3e=n4,u3e=lx,uM=">",cM="<",mA="prototype",bA="script",EG=u3e("IE_PROTO"),bS=function(){},SG=function(e){return cM+bA+uM+e+cM+"/"+bA+uM},fM=function(e){e.write(SG("")),e.close();var r=e.parentWindow.Object;return e=null,r},c3e=function(){var e=l3e("iframe"),r="java"+bA+":",t;return e.style.display="none",a3e.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(SG("document.F=Object")),t.close(),t.F},s1,uw=function(){try{s1=new ActiveXObject("htmlfile")}catch{}uw=typeof document<"u"?document.domain&&s1?fM(s1):c3e():fM(s1);for(var e=lM.length;e--;)delete uw[mA][lM[e]];return uw()};o3e[EG]=!0;var Wh=Object.create||function(r,t){var n;return r!==null?(bS[mA]=i3e(r),n=new bS,bS[mA]=null,n[EG]=r):n=uw(),t===void 0?n:s3e.f(n,t)},Gm={},f3e=_G,h3e=l4,d3e=h3e.concat("length","prototype");Gm.f=Object.getOwnPropertyNames||function(r){return f3e(r,d3e)};var u4={},hM=qm,p3e=so,v3e=Nv,g3e=Array,y3e=Math.max,kG=function(e,r,t){for(var n=p3e(e),i=hM(r,n),s=hM(t===void 0?n:t,n),o=g3e(y3e(s-i,0)),a=0;i<s;i++,a++)v3e(o,a,e[i]);return o.length=a,o},m3e=ku,b3e=Ra,TG=Gm.f,w3e=kG,IG=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$3e=function(e){try{return TG(e)}catch{return w3e(IG)}};u4.f=function(r){return IG&&m3e(r)=="Window"?$3e(r):TG(b3e(r))};var Ym={};Ym.f=Object.getOwnPropertySymbols;var _3e=Tu,Rv=function(e,r,t,n){return n&&n.enumerable?e[r]=t:_3e(e,r,t),e},x3e=no,c4=function(e,r,t){return x3e.f(e,r,t)},Zm={},E3e=an;Zm.f=E3e;var dM=Kr,S3e=qn,k3e=Zm,T3e=no.f,Sn=function(e){var r=dM.Symbol||(dM.Symbol={});S3e(r,e)||T3e(r,e,{value:k3e.f(e)})},I3e=yi,A3e=hs,O3e=an,C3e=Rv,AG=function(){var e=A3e("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=O3e("toPrimitive");r&&!r[n]&&C3e(r,n,function(i){return I3e(t,this)},{arity:1})},P3e=s4,N3e=Iu,R3e=P3e?{}.toString:function(){return"[object "+N3e(this)+"]"},D3e=s4,B3e=no.f,M3e=Tu,L3e=qn,F3e=R3e,j3e=an,pM=j3e("toStringTag"),qh=function(e,r,t,n){if(e){var i=t?e:e.prototype;L3e(i,pM)||B3e(i,pM,{configurable:!0,value:r}),n&&!D3e&&M3e(i,"toString",F3e)}},z3e=xn,H3e=En,vM=z3e.WeakMap,U3e=H3e(vM)&&/native code/.test(String(vM)),W3e=U3e,OG=xn,q3e=mi,K3e=Tu,wS=qn,$S=r4,V3e=lx,G3e=Km,gM="Object already initialized",wA=OG.TypeError,Y3e=OG.WeakMap,f$,Zy,h$,Z3e=function(e){return h$(e)?Zy(e):f$(e,{})},X3e=function(e){return function(r){var t;if(!q3e(r)||(t=Zy(r)).type!==e)throw wA("Incompatible receiver, "+e+" required");return t}};if(W3e||$S.state){var el=$S.state||($S.state=new Y3e);el.get=el.get,el.has=el.has,el.set=el.set,f$=function(e,r){if(el.has(e))throw wA(gM);return r.facade=e,el.set(e,r),r},Zy=function(e){return el.get(e)||{}},h$=function(e){return el.has(e)}}else{var Ld=V3e("state");G3e[Ld]=!0,f$=function(e,r){if(wS(e,Ld))throw wA(gM);return r.facade=e,K3e(e,Ld,r),r},Zy=function(e){return wS(e,Ld)?e[Ld]:{}},h$=function(e){return wS(e,Ld)}}var Dv={set:f$,get:Zy,has:h$,enforce:Z3e,getterFor:X3e},J3e=Zc,Q3e=Br,ePe=ex,tPe=Ds,rPe=so,nPe=ox,yM=Q3e([].push),lc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,f,c){for(var d=tPe(l),y=ePe(d),w=J3e(u,f),b=rPe(y),T=0,_=c||nPe,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in y)&&(x=y[T],I=w(x,T,d),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:yM(A,x)}else switch(e){case 4:return!1;case 7:yM(A,x)}return s?-1:n||i?i:A}},Bv={forEach:lc(0),map:lc(1),filter:lc(2),some:lc(3),every:lc(4),find:lc(5),findIndex:lc(6),filterReject:lc(7)},ux=Nt,f4=xn,h4=yi,iPe=Br,Xp=ri,Jp=Cv,sPe=kr,fi=qn,oPe=on,$A=io,cx=Ra,d4=rx,aPe=xl,_A=Uh,Xy=Wh,CG=Vm,lPe=Gm,PG=u4,uPe=Ym,NG=Hh,RG=no,cPe=ax,DG=Fm,mM=Rv,fPe=c4,p4=zc,hPe=lx,BG=Km,bM=tx,dPe=an,pPe=Zm,vPe=Sn,gPe=AG,yPe=qh,MG=Dv,fx=Bv.forEach,ks=hPe("hidden"),hx="Symbol",Jy="prototype",mPe=MG.set,wM=MG.getterFor(hx),_a=Object[Jy],dh=f4.Symbol,Jg=dh&&dh[Jy],bPe=f4.TypeError,_S=f4.QObject,LG=NG.f,zf=RG.f,FG=PG.f,wPe=DG.f,jG=iPe([].push),mu=p4("symbols"),Xm=p4("op-symbols"),$Pe=p4("wks"),xA=!_S||!_S[Jy]||!_S[Jy].findChild,EA=Xp&&sPe(function(){return Xy(zf({},"a",{get:function(){return zf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=LG(_a,r);n&&delete _a[r],zf(e,r,t),n&&e!==_a&&zf(_a,r,n)}:zf,xS=function(e,r){var t=mu[e]=Xy(Jg);return mPe(t,{type:hx,tag:e,description:r}),Xp||(t.description=r),t},dx=function(r,t,n){r===_a&&dx(Xm,t,n),$A(r);var i=d4(t);return $A(n),fi(mu,i)?(n.enumerable?(fi(r,ks)&&r[ks][i]&&(r[ks][i]=!1),n=Xy(n,{enumerable:_A(0,!1)})):(fi(r,ks)||zf(r,ks,_A(1,{})),r[ks][i]=!0),EA(r,i,n)):zf(r,i,n)},v4=function(r,t){$A(r);var n=cx(t),i=CG(n).concat(WG(n));return fx(i,function(s){(!Xp||h4(zG,n,s))&&dx(r,s,n[s])}),r},_Pe=function(r,t){return t===void 0?Xy(r):v4(Xy(r),t)},zG=function(r){var t=d4(r),n=h4(wPe,this,t);return this===_a&&fi(mu,t)&&!fi(Xm,t)?!1:n||!fi(this,t)||!fi(mu,t)||fi(this,ks)&&this[ks][t]?n:!0},HG=function(r,t){var n=cx(r),i=d4(t);if(!(n===_a&&fi(mu,i)&&!fi(Xm,i))){var s=LG(n,i);return s&&fi(mu,i)&&!(fi(n,ks)&&n[ks][i])&&(s.enumerable=!0),s}},UG=function(r){var t=FG(cx(r)),n=[];return fx(t,function(i){!fi(mu,i)&&!fi(BG,i)&&jG(n,i)}),n},WG=function(e){var r=e===_a,t=FG(r?Xm:cx(e)),n=[];return fx(t,function(i){fi(mu,i)&&(!r||fi(_a,i))&&jG(n,mu[i])}),n};Jp||(dh=function(){if(oPe(Jg,this))throw bPe("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:aPe(arguments[0]),t=bM(r),n=function(i){this===_a&&h4(n,Xm,i),fi(this,ks)&&fi(this[ks],t)&&(this[ks][t]=!1),EA(this,t,_A(1,i))};return Xp&&xA&&EA(_a,t,{configurable:!0,set:n}),xS(t,r)},Jg=dh[Jy],mM(Jg,"toString",function(){return wM(this).tag}),mM(dh,"withoutSetter",function(e){return xS(bM(e),e)}),DG.f=zG,RG.f=dx,cPe.f=v4,NG.f=HG,lPe.f=PG.f=UG,uPe.f=WG,pPe.f=function(e){return xS(dPe(e),e)},Xp&&fPe(Jg,"description",{configurable:!0,get:function(){return wM(this).description}}));ux({global:!0,constructor:!0,wrap:!0,forced:!Jp,sham:!Jp},{Symbol:dh});fx(CG($Pe),function(e){vPe(e)});ux({target:hx,stat:!0,forced:!Jp},{useSetter:function(){xA=!0},useSimple:function(){xA=!1}});ux({target:"Object",stat:!0,forced:!Jp,sham:!Xp},{create:_Pe,defineProperty:dx,defineProperties:v4,getOwnPropertyDescriptor:HG});ux({target:"Object",stat:!0,forced:!Jp},{getOwnPropertyNames:UG});gPe();yPe(dh,hx);BG[ks]=!0;var xPe=Cv,qG=xPe&&!!Symbol.for&&!!Symbol.keyFor,EPe=Nt,SPe=hs,kPe=qn,TPe=xl,KG=zc,IPe=qG,ES=KG("string-to-symbol-registry"),APe=KG("symbol-to-string-registry");EPe({target:"Symbol",stat:!0,forced:!IPe},{for:function(e){var r=TPe(e);if(kPe(ES,r))return ES[r];var t=SPe("Symbol")(r);return ES[r]=t,APe[t]=r,t}});var OPe=Nt,CPe=qn,PPe=Hm,NPe=Pv,RPe=zc,DPe=qG,$M=RPe("symbol-to-string-registry");OPe({target:"Symbol",stat:!0,forced:!DPe},{keyFor:function(r){if(!PPe(r))throw TypeError(NPe(r)+" is not a symbol");if(CPe($M,r))return $M[r]}});var BPe=Br,Jm=BPe([].slice),MPe=Br,_M=Xc,LPe=En,xM=ku,FPe=xl,EM=MPe([].push),jPe=function(e){if(LPe(e))return e;if(_M(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?EM(t,i):(typeof i=="number"||xM(i)=="Number"||xM(i)=="String")&&EM(t,FPe(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(_M(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},zPe=Nt,VG=hs,GG=Av,HPe=yi,Qm=Br,YG=kr,SM=En,kM=Hm,ZG=Jm,UPe=jPe,WPe=Cv,qPe=String,Oc=VG("JSON","stringify"),o1=Qm(/./.exec),TM=Qm("".charAt),KPe=Qm("".charCodeAt),VPe=Qm("".replace),GPe=Qm(1 .toString),YPe=/[\uD800-\uDFFF]/g,IM=/^[\uD800-\uDBFF]$/,AM=/^[\uDC00-\uDFFF]$/,OM=!WPe||YG(function(){var e=VG("Symbol")();return Oc([e])!="[null]"||Oc({a:e})!="{}"||Oc(Object(e))!="{}"}),CM=YG(function(){return Oc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Oc("\uDEAD")!=='"\\udead"'}),ZPe=function(e,r){var t=ZG(arguments),n=UPe(r);if(!(!SM(n)&&(e===void 0||kM(e))))return t[1]=function(i,s){if(SM(n)&&(s=HPe(n,this,qPe(i),s)),!kM(s))return s},GG(Oc,null,t)},XPe=function(e,r,t){var n=TM(t,r-1),i=TM(t,r+1);return o1(IM,e)&&!o1(AM,i)||o1(AM,e)&&!o1(IM,n)?"\\u"+GPe(KPe(e,0),16):e};Oc&&zPe({target:"JSON",stat:!0,arity:3,forced:OM||CM},{stringify:function(r,t,n){var i=ZG(arguments),s=GG(OM?ZPe:Oc,null,i);return CM&&typeof s=="string"?VPe(s,YPe,XPe):s}});var JPe=Nt,QPe=Cv,e4e=kr,XG=Ym,t4e=Ds,r4e=!QPe||e4e(function(){XG.f(1)});JPe({target:"Object",stat:!0,forced:r4e},{getOwnPropertySymbols:function(r){var t=XG.f;return t?t(t4e(r)):[]}});var n4e=Sn;n4e("asyncIterator");var i4e=Sn;i4e("hasInstance");var s4e=Sn;s4e("isConcatSpreadable");var o4e=Sn;o4e("iterator");var a4e=Sn;a4e("match");var l4e=Sn;l4e("matchAll");var u4e=Sn;u4e("replace");var c4e=Sn;c4e("search");var f4e=Sn;f4e("species");var h4e=Sn;h4e("split");var d4e=Sn,p4e=AG;d4e("toPrimitive");p4e();var v4e=hs,g4e=Sn,y4e=qh;g4e("toStringTag");y4e(v4e("Symbol"),"Symbol");var m4e=Sn;m4e("unscopables");var b4e=xn,w4e=qh;w4e(b4e.JSON,"JSON",!0);var $4e=Kr,_4e=$4e.Symbol,Mv={},SA=ri,x4e=qn,JG=Function.prototype,E4e=SA&&Object.getOwnPropertyDescriptor,g4=x4e(JG,"name"),S4e=g4&&(function(){}).name==="something",k4e=g4&&(!SA||SA&&E4e(JG,"name").configurable),QG={EXISTS:g4,PROPER:S4e,CONFIGURABLE:k4e},T4e=kr,eY=!T4e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),I4e=qn,A4e=En,O4e=Ds,C4e=lx,P4e=eY,PM=C4e("IE_PROTO"),kA=Object,N4e=kA.prototype,px=P4e?kA.getPrototypeOf:function(e){var r=O4e(e);if(I4e(r,PM))return r[PM];var t=r.constructor;return A4e(t)&&r instanceof t?t.prototype:r instanceof kA?N4e:null},R4e=kr,D4e=En,B4e=mi,M4e=Wh,NM=px,L4e=Rv,F4e=an,TA=F4e("iterator"),tY=!1,iu,SS,kS;[].keys&&(kS=[].keys(),"next"in kS?(SS=NM(NM(kS)),SS!==Object.prototype&&(iu=SS)):tY=!0);var j4e=!B4e(iu)||R4e(function(){var e={};return iu[TA].call(e)!==e});j4e?iu={}:iu=M4e(iu);D4e(iu[TA])||L4e(iu,TA,function(){return this});var rY={IteratorPrototype:iu,BUGGY_SAFARI_ITERATORS:tY},z4e=rY.IteratorPrototype,H4e=Wh,U4e=Uh,W4e=qh,q4e=Mv,K4e=function(){return this},V4e=function(e,r,t,n){var i=r+" Iterator";return e.prototype=H4e(z4e,{next:U4e(+!n,t)}),W4e(e,i,!1,!0),q4e[i]=K4e,e},G4e=Br,Y4e=Rs,Z4e=function(e,r,t){try{return G4e(Y4e(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},X4e=En,J4e=String,Q4e=TypeError,eNe=function(e){if(typeof e=="object"||X4e(e))return e;throw Q4e("Can't set "+J4e(e)+" as a prototype")},tNe=Z4e,rNe=io,nNe=eNe,nY=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=tNe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return rNe(i),nNe(s),e?t(i,s):i.__proto__=s,i}}():void 0),iNe=Nt,sNe=yi,oNe=QG,aNe=V4e,lNe=px,uNe=qh,RM=Rv,cNe=an,DM=Mv,fNe=rY,hNe=oNe.PROPER,a1=fNe.BUGGY_SAFARI_ITERATORS,TS=cNe("iterator"),BM="keys",l1="values",MM="entries",dNe=function(){return this},y4=function(e,r,t,n,i,s,o){aNe(t,r,n);var a=function(_){if(_===i&&d)return d;if(!a1&&_ in f)return f[_];switch(_){case BM:return function(){return new t(this,_)};case l1:return function(){return new t(this,_)};case MM:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,f=e.prototype,c=f[TS]||f["@@iterator"]||i&&f[i],d=!a1&&c||a(i),y=r=="Array"&&f.entries||c,w,b,T;if(y&&(w=lNe(y.call(new e)),w!==Object.prototype&&w.next&&(uNe(w,l,!0,!0),DM[l]=dNe)),hNe&&i==l1&&c&&c.name!==l1&&(u=!0,d=function(){return sNe(c,this)}),i)if(b={values:a(l1),keys:s?d:a(BM),entries:a(MM)},o)for(T in b)(a1||u||!(T in f))&&RM(f,T,b[T]);else iNe({target:r,proto:!0,forced:a1||u},b);return o&&f[TS]!==d&&RM(f,TS,d,{name:i}),DM[r]=d,b},m4=function(e,r){return{value:e,done:r}},pNe=Ra,LM=Mv,iY=Dv;no.f;var vNe=y4,u1=m4,sY="Array Iterator",gNe=iY.set,yNe=iY.getterFor(sY);vNe(Array,"Array",function(e,r){gNe(this,{type:sY,target:pNe(e),index:0,kind:r})},function(){var e=yNe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,u1(void 0,!0)):t=="keys"?u1(n,!1):t=="values"?u1(r[n],!1):u1([n,r[n]],!1)},"values");LM.Arguments=LM.Array;var mNe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},bNe=mNe,wNe=xn,$Ne=Iu,_Ne=Tu,FM=Mv,xNe=an,jM=xNe("toStringTag");for(var IS in bNe){var zM=wNe[IS],AS=zM&&zM.prototype;AS&&$Ne(AS)!==jM&&_Ne(AS,jM,IS),FM[IS]=FM.Array}var ENe=_4e,oY=ENe,SNe=Sn;SNe("dispose");var kNe=oY,TNe=kNe,INe=Sn;INe("asyncDispose");var ANe=Nt,ONe=hs,CNe=Br,aY=ONe("Symbol"),PNe=aY.keyFor,NNe=CNe(aY.prototype.valueOf);ANe({target:"Symbol",stat:!0},{isRegistered:function(r){try{return PNe(NNe(r))!==void 0}catch{return!1}}});var RNe=Nt,DNe=zc,lY=hs,BNe=Br,MNe=Hm,LNe=an,d$=lY("Symbol"),HM=d$.isWellKnown,uY=lY("Object","getOwnPropertyNames"),FNe=BNe(d$.prototype.valueOf),UM=DNe("wks");for(var OS=0,WM=uY(d$),jNe=WM.length;OS<jNe;OS++)try{var qM=WM[OS];MNe(d$[qM])&&LNe(qM)}catch{}RNe({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(HM&&HM(r))return!0;try{for(var t=FNe(r),n=0,i=uY(UM),s=i.length;n<s;n++)if(UM[i[n]]==t)return!0}catch{}return!1}});var zNe=Sn;zNe("matcher");var HNe=Sn;HNe("metadataKey");var UNe=Sn;UNe("observable");var WNe=Sn;WNe("metadata");var qNe=Sn;qNe("patternMatch");var KNe=Sn;KNe("replaceAll");var VNe=TNe,GNe=VNe;(function(e){e.exports=GNe})(CCe);(function(e){e.exports=gA})(OCe);var sp=Vt(Yy),p$={},YNe={get exports(){return p$},set exports(e){p$=e}},IA={},ZNe={get exports(){return IA},set exports(e){IA=e}},b4=Br,XNe=ix,JNe=xl,QNe=zm,eRe=b4("".charAt),KM=b4("".charCodeAt),tRe=b4("".slice),VM=function(e){return function(r,t){var n=JNe(QNe(r)),i=XNe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=KM(n,i),o<55296||o>56319||i+1===s||(a=KM(n,i+1))<56320||a>57343?e?eRe(n,i):o:e?tRe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},rRe={codeAt:VM(!1),charAt:VM(!0)},nRe=rRe.charAt,iRe=xl,cY=Dv,sRe=y4,GM=m4,fY="String Iterator",oRe=cY.set,aRe=cY.getterFor(fY);sRe(String,"String",function(e){oRe(this,{type:fY,string:iRe(e),index:0})},function(){var r=aRe(this),t=r.string,n=r.index,i;return n>=t.length?GM(void 0,!0):(i=nRe(t,n),r.index+=i.length,GM(i,!1))});var lRe=Zm,uRe=lRe.f("iterator"),cRe=uRe,hY=cRe,fRe=hY,hRe=fRe,dRe=hRe,pRe=dRe;(function(e){e.exports=pRe})(ZNe);(function(e){e.exports=IA})(YNe);var vRe=Vt(p$);function Ai(e){"@babel/helpers - typeof";return Ai=typeof sp=="function"&&typeof vRe=="symbol"?function(r){return typeof r}:function(r){return r&&typeof sp=="function"&&r.constructor===sp&&r!==sp.prototype?"symbol":typeof r},Ai(e)}var AA={},gRe={get exports(){return AA},set exports(e){AA=e}},OA={},yRe={get exports(){return OA},set exports(e){OA=e}},mRe=Zm,bRe=mRe.f("toPrimitive"),wRe=bRe,$Re=wRe,_Re=$Re,xRe=_Re,ERe=xRe,SRe=ERe;(function(e){e.exports=SRe})(yRe);(function(e){e.exports=OA})(gRe);var kRe=Vt(AA);function TRe(e,r){if(Ai(e)!=="object"||e===null)return e;var t=e[kRe];if(t!==void 0){var n=t.call(e,r||"default");if(Ai(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function dY(e){var r=TRe(e,"string");return Ai(r)==="symbol"?r:String(r)}function YM(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),nx(e,dY(n.key),n)}}function vx(e,r,t){return r&&YM(e.prototype,r),t&&YM(e,t),nx(e,"prototype",{writable:!1}),e}function An(e,r,t){return r=dY(r),r in e?nx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CA={},IRe={get exports(){return CA},set exports(e){CA=e}},pY=Br,ARe=Rs,ORe=mi,CRe=qn,ZM=Jm,PRe=Lm,vY=Function,NRe=pY([].concat),RRe=pY([].join),CS={},DRe=function(e,r,t){if(!CRe(CS,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";CS[r]=vY("C,a","return new C("+RRe(n,",")+")")}return CS[r](e,t)},gY=PRe?vY.bind:function(r){var t=ARe(this),n=t.prototype,i=ZM(arguments,1),s=function(){var a=NRe(i,ZM(arguments));return this instanceof s?DRe(t,a.length,a):t.apply(r,a)};return ORe(n)&&(s.prototype=n),s},BRe=Nt,XM=gY;BRe({target:"Function",proto:!0,forced:Function.bind!==XM},{bind:XM});var MRe=Kr,Kn=function(e){return MRe[e+"Prototype"]},LRe=Kn,FRe=LRe("Function").bind,jRe=on,zRe=FRe,PS=Function.prototype,HRe=function(e){var r=e.bind;return e===PS||jRe(PS,e)&&r===PS.bind?zRe:r},URe=HRe,yY=URe;(function(e){e.exports=yY})(IRe);var mY=Vt(CA),PA={},WRe={get exports(){return PA},set exports(e){PA=e}},qRe=Rs,KRe=Ds,VRe=ex,GRe=so,YRe=TypeError,JM=function(e){return function(r,t,n,i){qRe(t);var s=KRe(r),o=VRe(s),a=GRe(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw YRe("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},ZRe={left:JM(!1),right:JM(!0)},XRe=kr,eb=function(e,r){var t=[][e];return!!t&&XRe(function(){t.call(null,r||function(){return 1},1)})},JRe=ku,tb=typeof process<"u"&&JRe(process)=="process",QRe=Nt,eDe=ZRe.left,tDe=eb,QM=Ov,rDe=tb,nDe=!rDe&&QM>79&&QM<83,iDe=nDe||!tDe("reduce");QRe({target:"Array",proto:!0,forced:iDe},{reduce:function(r){var t=arguments.length;return eDe(this,r,t,t>1?arguments[1]:void 0)}});var sDe=Kn,oDe=sDe("Array").reduce,aDe=on,lDe=oDe,NS=Array.prototype,uDe=function(e){var r=e.reduce;return e===NS||aDe(NS,e)&&r===NS.reduce?lDe:r},cDe=uDe,fDe=cDe;(function(e){e.exports=fDe})(WRe);var hDe=Vt(PA),NA={},dDe={get exports(){return NA},set exports(e){NA=e}},pDe=Nt,vDe=Bv.filter,gDe=Wm,yDe=gDe("filter");pDe({target:"Array",proto:!0,forced:!yDe},{filter:function(r){return vDe(this,r,arguments.length>1?arguments[1]:void 0)}});var mDe=Kn,bDe=mDe("Array").filter,wDe=on,$De=bDe,RS=Array.prototype,_De=function(e){var r=e.filter;return e===RS||wDe(RS,e)&&r===RS.filter?$De:r},xDe=_De,EDe=xDe;(function(e){e.exports=EDe})(dDe);var op=Vt(NA),RA={},SDe={get exports(){return RA},set exports(e){RA=e}},kDe=Nt,TDe=Bv.map,IDe=Wm,ADe=IDe("map");kDe({target:"Array",proto:!0,forced:!ADe},{map:function(r){return TDe(this,r,arguments.length>1?arguments[1]:void 0)}});var ODe=Kn,CDe=ODe("Array").map,PDe=on,NDe=CDe,DS=Array.prototype,RDe=function(e){var r=e.map;return e===DS||PDe(DS,e)&&r===DS.map?NDe:r},DDe=RDe,BDe=DDe;(function(e){e.exports=BDe})(SDe);var ga=Vt(RA),e7={},MDe={get exports(){return e7},set exports(e){e7=e}},LDe=Xc,FDe=so,jDe=i4,zDe=Zc,bY=function(e,r,t,n,i,s,o,a){for(var l=i,u=0,f=o?zDe(o,a):!1,c,d;u<n;)u in t&&(c=f?f(t[u],u,r):t[u],s>0&&LDe(c)?(d=FDe(c),l=bY(e,r,c,d,l,s-1)-1):(jDe(l+1),e[l]=c),l++),u++;return l},HDe=bY,UDe=Nt,WDe=HDe,qDe=Rs,KDe=Ds,VDe=so,GDe=ox;UDe({target:"Array",proto:!0},{flatMap:function(r){var t=KDe(this),n=VDe(t),i;return qDe(r),i=GDe(t,0),i.length=WDe(i,t,t,n,0,1,r,arguments.length>1?arguments[1]:void 0),i}});var YDe=Kn,ZDe=YDe("Array").flatMap,XDe=on,JDe=ZDe,BS=Array.prototype,QDe=function(e){var r=e.flatMap;return e===BS||XDe(BS,e)&&r===BS.flatMap?JDe:r},eBe=QDe,tBe=eBe;(function(e){e.exports=tBe})(MDe);var DA={},rBe={get exports(){return DA},set exports(e){DA=e}},nBe=yi,t7=io,iBe=t4,wY=function(e,r,t){var n,i;t7(e);try{if(n=iBe(e,"return"),!n){if(r==="throw")throw t;return t}n=nBe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return t7(n),t},sBe=io,oBe=wY,aBe=function(e,r,t,n){try{return n?r(sBe(t)[0],t[1]):r(t)}catch(i){oBe(e,"throw",i)}},lBe=an,uBe=Mv,cBe=lBe("iterator"),fBe=Array.prototype,$Y=function(e){return e!==void 0&&(uBe.Array===e||fBe[cBe]===e)},hBe=Iu,r7=t4,dBe=jm,pBe=Mv,vBe=an,gBe=vBe("iterator"),gx=function(e){if(!dBe(e))return r7(e,gBe)||r7(e,"@@iterator")||pBe[hBe(e)]},yBe=yi,mBe=Rs,bBe=io,wBe=Pv,$Be=gx,_Be=TypeError,w4=function(e,r){var t=arguments.length<2?$Be(e):r;if(mBe(t))return bBe(yBe(t,e));throw _Be(wBe(e)+" is not iterable")},xBe=Zc,EBe=yi,SBe=Ds,kBe=aBe,TBe=$Y,IBe=sx,ABe=so,n7=Nv,OBe=w4,CBe=gx,i7=Array,PBe=function(r){var t=SBe(r),n=IBe(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=xBe(s,i>2?arguments[2]:void 0));var a=CBe(t),l=0,u,f,c,d,y,w;if(a&&!(this===i7&&TBe(a)))for(d=OBe(t,a),y=d.next,f=n?new this:[];!(c=EBe(y,d)).done;l++)w=o?kBe(d,s,[c.value,l],!0):c.value,n7(f,l,w);else for(u=ABe(t),f=n?new this(u):i7(u);u>l;l++)w=o?s(t[l],l):t[l],n7(f,l,w);return f.length=l,f},NBe=an,_Y=NBe("iterator"),xY=!1;try{var RBe=0,s7={next:function(){return{done:!!RBe++}},return:function(){xY=!0}};s7[_Y]=function(){return this},Array.from(s7,function(){throw 2})}catch{}var EY=function(e,r){if(!r&&!xY)return!1;var t=!1;try{var n={};n[_Y]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},DBe=Nt,BBe=PBe,MBe=EY,LBe=!MBe(function(e){Array.from(e)});DBe({target:"Array",stat:!0,forced:LBe},{from:BBe});var FBe=Kr,jBe=FBe.Array.from,zBe=jBe,SY=zBe;(function(e){e.exports=SY})(rBe);var $4=Vt(DA),BA={},HBe={get exports(){return BA},set exports(e){BA=e}},MA={},UBe={get exports(){return MA},set exports(e){MA=e}},WBe=gx,qBe=WBe,KBe=qBe,VBe=KBe,GBe=VBe,YBe=GBe,ZBe=YBe,XBe=ZBe;(function(e){e.exports=XBe})(UBe);(function(e){e.exports=MA})(HBe);var rb=Vt(BA),LA={},JBe={get exports(){return LA},set exports(e){LA=e}},QBe=Kr,e6e=QBe.Object.getOwnPropertySymbols,t6e=e6e,r6e=t6e;(function(e){e.exports=r6e})(JBe);var o7=Vt(LA),FA={},n6e={get exports(){return FA},set exports(e){FA=e}},jA={},i6e={get exports(){return jA},set exports(e){jA=e}},s6e=Nt,o6e=kr,a6e=Ra,kY=Hh.f,TY=ri,l6e=!TY||o6e(function(){kY(1)});s6e({target:"Object",stat:!0,forced:l6e,sham:!TY},{getOwnPropertyDescriptor:function(r,t){return kY(a6e(r),t)}});var u6e=Kr,IY=u6e.Object,c6e=i6e.exports=function(r,t){return IY.getOwnPropertyDescriptor(r,t)};IY.getOwnPropertyDescriptor.sham&&(c6e.sham=!0);var f6e=jA,h6e=f6e;(function(e){e.exports=h6e})(n6e);var AY=Vt(FA),zA={},d6e={get exports(){return zA},set exports(e){zA=e}},p6e=hs,v6e=Br,g6e=Gm,y6e=Ym,m6e=io,b6e=v6e([].concat),_4=p6e("Reflect","ownKeys")||function(r){var t=g6e.f(m6e(r)),n=y6e.f;return n?b6e(t,n(r)):t},w6e=Nt,$6e=ri,_6e=_4,x6e=Ra,E6e=Hh,S6e=Nv;w6e({target:"Object",stat:!0,sham:!$6e},{getOwnPropertyDescriptors:function(r){for(var t=x6e(r),n=E6e.f,i=_6e(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&S6e(s,a,l);return s}});var k6e=Kr,T6e=k6e.Object.getOwnPropertyDescriptors,I6e=T6e,A6e=I6e;(function(e){e.exports=A6e})(d6e);var a7=Vt(zA),HA={},O6e={get exports(){return HA},set exports(e){HA=e}},UA={},C6e={get exports(){return UA},set exports(e){UA=e}},P6e=Nt,N6e=ri,l7=ax.f;P6e({target:"Object",stat:!0,forced:Object.defineProperties!==l7,sham:!N6e},{defineProperties:l7});var R6e=Kr,OY=R6e.Object,D6e=C6e.exports=function(r,t){return OY.defineProperties(r,t)};OY.defineProperties.sham&&(D6e.sham=!0);var B6e=UA,M6e=B6e;(function(e){e.exports=M6e})(O6e);var L6e=Vt(HA),WA={},F6e={get exports(){return WA},set exports(e){WA=e}};(function(e){e.exports=pG})(F6e);var j6e=Vt(WA),qA={},z6e={get exports(){return qA},set exports(e){qA=e}},KA={},H6e={get exports(){return KA},set exports(e){KA=e}},U6e=Nt,W6e=Xc;U6e({target:"Array",stat:!0},{isArray:W6e});var q6e=Kr,K6e=q6e.Array.isArray,V6e=K6e,CY=V6e,G6e=CY,Y6e=G6e,Z6e=Y6e,X6e=Z6e;(function(e){e.exports=X6e})(H6e);(function(e){e.exports=KA})(z6e);var PY=Vt(qA);function J6e(e){if(PY(e))return e}function Q6e(e,r){var t=e==null?null:typeof sp<"u"&&rb(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var v$={},e8e={get exports(){return v$},set exports(e){v$=e}},VA={},t8e={get exports(){return VA},set exports(e){VA=e}},r8e=Nt,u7=Xc,n8e=sx,i8e=mi,c7=qm,s8e=so,o8e=Ra,a8e=Nv,l8e=an,u8e=Wm,c8e=Jm,f8e=u8e("slice"),h8e=l8e("species"),MS=Array,d8e=Math.max;r8e({target:"Array",proto:!0,forced:!f8e},{slice:function(r,t){var n=o8e(this),i=s8e(n),s=c7(r,i),o=c7(t===void 0?i:t,i),a,l,u;if(u7(n)&&(a=n.constructor,n8e(a)&&(a===MS||u7(a.prototype))?a=void 0:i8e(a)&&(a=a[h8e],a===null&&(a=void 0)),a===MS||a===void 0))return c8e(n,s,o);for(l=new(a===void 0?MS:a)(d8e(o-s,0)),u=0;s<o;s++,u++)s in n&&a8e(l,u,n[s]);return l.length=u,l}});var p8e=Kn,v8e=p8e("Array").slice,g8e=on,y8e=v8e,LS=Array.prototype,m8e=function(e){var r=e.slice;return e===LS||g8e(LS,e)&&r===LS.slice?y8e:r},b8e=m8e,NY=b8e,w8e=NY,$8e=w8e,_8e=$8e,x8e=_8e;(function(e){e.exports=x8e})(t8e);(function(e){e.exports=VA})(e8e);var E8e=Vt(v$),GA={},S8e={get exports(){return GA},set exports(e){GA=e}},YA={},k8e={get exports(){return YA},set exports(e){YA=e}},T8e=SY,I8e=T8e,A8e=I8e,O8e=A8e;(function(e){e.exports=O8e})(k8e);(function(e){e.exports=YA})(S8e);var RY=Vt(GA);function ZA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function DY(e,r){var t;if(e){if(typeof e=="string")return ZA(e,r);var n=E8e(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return RY(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZA(e,r)}}function C8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(e,r){return J6e(e)||Q6e(e,r)||DY(e,r)||C8e()}function P8e(e){if(PY(e))return ZA(e)}function N8e(e){if(typeof sp<"u"&&rb(e)!=null||e["@@iterator"]!=null)return RY(e)}function R8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(e){return P8e(e)||N8e(e)||DY(e)||R8e()}var XA={},D8e={get exports(){return XA},set exports(e){XA=e}};(function(e){e.exports=oY})(D8e);var yx=Vt(XA),JA={},B8e={get exports(){return JA},set exports(e){JA=e}},M8e=Kn,L8e=M8e("Array").concat,F8e=on,j8e=L8e,FS=Array.prototype,z8e=function(e){var r=e.concat;return e===FS||F8e(FS,e)&&r===FS.concat?j8e:r},H8e=z8e,U8e=H8e;(function(e){e.exports=U8e})(B8e);var mx=Vt(JA),QA={},W8e={get exports(){return QA},set exports(e){QA=e}};(function(e){e.exports=NY})(W8e);var bx=Vt(QA),eO={},q8e={get exports(){return eO},set exports(e){eO=e}},K8e=Nt,V8e=_4;K8e({target:"Reflect",stat:!0},{ownKeys:V8e});var G8e=Kr,Y8e=G8e.Reflect.ownKeys,Z8e=Y8e,X8e=Z8e;(function(e){e.exports=X8e})(q8e);var J8e=Vt(eO),tO={},Q8e={get exports(){return tO},set exports(e){tO=e}};(function(e){e.exports=CY})(Q8e);var Ks=Vt(tO),rO={},eMe={get exports(){return rO},set exports(e){rO=e}},tMe=Nt,rMe=Ds,BY=Vm,nMe=kr,iMe=nMe(function(){BY(1)});tMe({target:"Object",stat:!0,forced:iMe},{keys:function(r){return BY(rMe(r))}});var sMe=Kr,oMe=sMe.Object.keys,aMe=oMe,lMe=aMe;(function(e){e.exports=lMe})(eMe);var x4=Vt(rO),f7={},uMe={get exports(){return f7},set exports(e){f7=e}},cMe=Nt,fMe=Br,MY=Date,hMe=fMe(MY.prototype.getTime);cMe({target:"Date",stat:!0},{now:function(){return hMe(new MY)}});var dMe=Kr,pMe=dMe.Date.now,vMe=pMe,gMe=vMe;(function(e){e.exports=gMe})(uMe);var nO={},yMe={get exports(){return nO},set exports(e){nO=e}},mMe=Bv.forEach,bMe=eb,wMe=bMe("forEach"),$Me=wMe?[].forEach:function(r){return mMe(this,r,arguments.length>1?arguments[1]:void 0)},_Me=Nt,h7=$Me;_Me({target:"Array",proto:!0,forced:[].forEach!=h7},{forEach:h7});var xMe=Kn,EMe=xMe("Array").forEach,SMe=EMe,kMe=SMe,TMe=Iu,IMe=qn,AMe=on,OMe=kMe,jS=Array.prototype,CMe={DOMTokenList:!0,NodeList:!0},LY=function(e){var r=e.forEach;return e===jS||AMe(jS,e)&&r===jS.forEach||IMe(CMe,TMe(e))?OMe:r};(function(e){e.exports=LY})(yMe);var Ih=Vt(nO),iO={},PMe={get exports(){return iO},set exports(e){iO=e}},NMe=Nt,RMe=Br,DMe=Xc,BMe=RMe([].reverse),d7=[1,2];NMe({target:"Array",proto:!0,forced:String(d7)===String(d7.reverse())},{reverse:function(){return DMe(this)&&(this.length=this.length),BMe(this)}});var MMe=Kn,LMe=MMe("Array").reverse,FMe=on,jMe=LMe,zS=Array.prototype,zMe=function(e){var r=e.reverse;return e===zS||FMe(zS,e)&&r===zS.reverse?jMe:r},HMe=zMe,FY=HMe;(function(e){e.exports=FY})(PMe);var UMe=Vt(iO),sO={},WMe={get exports(){return sO},set exports(e){sO=e}},qMe=ri,KMe=Xc,VMe=TypeError,GMe=Object.getOwnPropertyDescriptor,YMe=qMe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),ZMe=YMe?function(e,r){if(KMe(e)&&!GMe(e,"length").writable)throw VMe("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},p7=Pv,XMe=TypeError,jY=function(e,r){if(!delete e[r])throw XMe("Cannot delete property "+p7(r)+" of "+p7(e))},JMe=Nt,QMe=Ds,e7e=qm,t7e=ix,r7e=so,n7e=ZMe,i7e=i4,s7e=ox,o7e=Nv,HS=jY,a7e=Wm,l7e=a7e("splice"),u7e=Math.max,c7e=Math.min;JMe({target:"Array",proto:!0,forced:!l7e},{splice:function(r,t){var n=QMe(this),i=r7e(n),s=e7e(r,i),o=arguments.length,a,l,u,f,c,d;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=c7e(u7e(t7e(t),0),i-s)),i7e(i+a-l),u=s7e(n,l),f=0;f<l;f++)c=s+f,c in n&&o7e(u,f,n[c]);if(u.length=l,a<l){for(f=s;f<i-l;f++)c=f+l,d=f+a,c in n?n[d]=n[c]:HS(n,d);for(f=i;f>i-l+a;f--)HS(n,f-1)}else if(a>l)for(f=i-l;f>s;f--)c=f+l-1,d=f+a-1,c in n?n[d]=n[c]:HS(n,d);for(f=0;f<a;f++)n[f+s]=arguments[f+2];return n7e(n,i-l+a),u}});var f7e=Kn,h7e=f7e("Array").splice,d7e=on,p7e=h7e,US=Array.prototype,v7e=function(e){var r=e.splice;return e===US||d7e(US,e)&&r===US.splice?p7e:r},g7e=v7e,y7e=g7e;(function(e){e.exports=y7e})(WMe);var zY=Vt(sO),oO={},m7e={get exports(){return oO},set exports(e){oO=e}},v7=ri,b7e=Br,w7e=yi,$7e=kr,WS=Vm,_7e=Ym,x7e=Fm,E7e=Ds,S7e=ex,Fd=Object.assign,g7=Object.defineProperty,k7e=b7e([].concat),T7e=!Fd||$7e(function(){if(v7&&Fd({b:1},Fd(g7({},"a",{enumerable:!0,get:function(){g7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Fd({},e)[t]!=7||WS(Fd({},r)).join("")!=n})?function(r,t){for(var n=E7e(r),i=arguments.length,s=1,o=_7e.f,a=x7e.f;i>s;)for(var l=S7e(arguments[s++]),u=o?k7e(WS(l),o(l)):WS(l),f=u.length,c=0,d;f>c;)d=u[c++],(!v7||w7e(a,l,d))&&(n[d]=l[d]);return n}:Fd,I7e=Nt,y7=T7e;I7e({target:"Object",stat:!0,arity:2,forced:Object.assign!==y7},{assign:y7});var A7e=Kr,O7e=A7e.Object.assign,C7e=O7e,P7e=C7e;(function(e){e.exports=P7e})(m7e);var N7e=Vt(oO),m7={},R7e={get exports(){return m7},set exports(e){m7=e}},D7e=Nt,B7e=a4.includes,M7e=kr,L7e=M7e(function(){return!Array(1).includes()});D7e({target:"Array",proto:!0,forced:L7e},{includes:function(r){return B7e(this,r,arguments.length>1?arguments[1]:void 0)}});var F7e=Kn,j7e=F7e("Array").includes,z7e=mi,H7e=ku,U7e=an,W7e=U7e("match"),q7e=function(e){var r;return z7e(e)&&((r=e[W7e])!==void 0?!!r:H7e(e)=="RegExp")},K7e=q7e,V7e=TypeError,G7e=function(e){if(K7e(e))throw V7e("The method doesn't accept regular expressions");return e},Y7e=an,Z7e=Y7e("match"),X7e=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[Z7e]=!1,"/./"[e](r)}catch{}}return!1},J7e=Nt,Q7e=Br,eLe=G7e,tLe=zm,b7=xl,rLe=X7e,nLe=Q7e("".indexOf);J7e({target:"String",proto:!0,forced:!rLe("includes")},{includes:function(r){return!!~nLe(b7(tLe(this)),b7(eLe(r)),arguments.length>1?arguments[1]:void 0)}});var iLe=Kn,sLe=iLe("String").includes,w7=on,oLe=j7e,aLe=sLe,qS=Array.prototype,KS=String.prototype,lLe=function(e){var r=e.includes;return e===qS||w7(qS,e)&&r===qS.includes?oLe:typeof e=="string"||e===KS||w7(KS,e)&&r===KS.includes?aLe:r},uLe=lLe,cLe=uLe;(function(e){e.exports=cLe})(R7e);var $7={},fLe={get exports(){return $7},set exports(e){$7=e}},hLe=Nt,dLe=kr,pLe=Ds,HY=px,vLe=eY,gLe=dLe(function(){HY(1)});hLe({target:"Object",stat:!0,forced:gLe,sham:!vLe},{getPrototypeOf:function(r){return HY(pLe(r))}});var yLe=Kr,mLe=yLe.Object.getPrototypeOf,bLe=mLe,UY=bLe;(function(e){e.exports=UY})(fLe);var _7={},wLe={get exports(){return _7},set exports(e){_7=e}},$Le=ri,WY=Br,_Le=Vm,xLe=Ra,ELe=Fm.f,SLe=WY(ELe),kLe=WY([].push),x7=function(e){return function(r){for(var t=xLe(r),n=_Le(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!$Le||SLe(t,a))&&kLe(o,e?[a,t[a]]:t[a]);return o}},TLe={entries:x7(!0),values:x7(!1)},ILe=Nt,ALe=TLe.values;ILe({target:"Object",stat:!0},{values:function(r){return ALe(r)}});var OLe=Kr,CLe=OLe.Object.values,PLe=CLe,NLe=PLe;(function(e){e.exports=NLe})(wLe);var E7={},RLe={get exports(){return E7},set exports(e){E7=e}},E4=`	
\v\f\r                　\u2028\u2029\uFEFF`,DLe=Br,BLe=zm,MLe=xl,aO=E4,S7=DLe("".replace),LLe=RegExp("^["+aO+"]+"),FLe=RegExp("(^|[^"+aO+"])["+aO+"]+$"),VS=function(e){return function(r){var t=MLe(BLe(r));return e&1&&(t=S7(t,LLe,"")),e&2&&(t=S7(t,FLe,"$1")),t}},qY={start:VS(1),end:VS(2),trim:VS(3)},KY=xn,jLe=kr,zLe=Br,HLe=xl,ULe=qY.trim,k7=E4,dy=KY.parseInt,T7=KY.Symbol,I7=T7&&T7.iterator,VY=/^[+-]?0x/i,WLe=zLe(VY.exec),qLe=dy(k7+"08")!==8||dy(k7+"0x16")!==22||I7&&!jLe(function(){dy(Object(I7))}),KLe=qLe?function(r,t){var n=ULe(HLe(r));return dy(n,t>>>0||(WLe(VY,n)?16:10))}:dy,VLe=Nt,A7=KLe;VLe({global:!0,forced:parseInt!=A7},{parseInt:A7});var GLe=Kr,YLe=GLe.parseInt,ZLe=YLe,XLe=ZLe;(function(e){e.exports=XLe})(RLe);var O7={},JLe={get exports(){return O7},set exports(e){O7=e}},QLe=Nt,eFe=e4,tFe=a4.indexOf,rFe=eb,lO=eFe([].indexOf),GY=!!lO&&1/lO([1],1,-0)<0,nFe=GY||!rFe("indexOf");QLe({target:"Array",proto:!0,forced:nFe},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return GY?lO(this,r,t)||0:tFe(this,r,t)}});var iFe=Kn,sFe=iFe("Array").indexOf,oFe=on,aFe=sFe,GS=Array.prototype,lFe=function(e){var r=e.indexOf;return e===GS||oFe(GS,e)&&r===GS.indexOf?aFe:r},uFe=lFe,cFe=uFe;(function(e){e.exports=cFe})(JLe);var C7={},fFe={get exports(){return C7},set exports(e){C7=e}},hFe=QG.PROPER,dFe=kr,P7=E4,N7="​᠎",pFe=function(e){return dFe(function(){return!!P7[e]()||N7[e]()!==N7||hFe&&P7[e].name!==e})},vFe=Nt,gFe=qY.trim,yFe=pFe;vFe({target:"String",proto:!0,forced:yFe("trim")},{trim:function(){return gFe(this)}});var mFe=Kn,bFe=mFe("String").trim,wFe=on,$Fe=bFe,YS=String.prototype,_Fe=function(e){var r=e.trim;return typeof e=="string"||e===YS||wFe(YS,e)&&r===YS.trim?$Fe:r},xFe=_Fe,EFe=xFe;(function(e){e.exports=EFe})(fFe);var uO={},SFe={get exports(){return uO},set exports(e){uO=e}},kFe=Nt,TFe=ri,IFe=Wh;kFe({target:"Object",stat:!0,sham:!TFe},{create:IFe});var AFe=Kr,OFe=AFe.Object,CFe=function(r,t){return OFe.create(r,t)},PFe=CFe,YY=PFe;(function(e){e.exports=YY})(SFe);var NFe=Vt(uO),cO={},RFe={get exports(){return cO},set exports(e){cO=e}},fO=Kr,DFe=Av;fO.JSON||(fO.JSON={stringify:JSON.stringify});var BFe=function(r,t,n){return DFe(fO.JSON.stringify,null,arguments)},MFe=BFe,LFe=MFe;(function(e){e.exports=LFe})(RFe);var FFe=Vt(cO),hO={},jFe={get exports(){return hO},set exports(e){hO=e}},zFe=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",HFe=TypeError,ZY=function(e,r){if(e<r)throw HFe("Not enough arguments");return e},XY=xn,UFe=Av,WFe=En,qFe=zFe,KFe=Yc,VFe=Jm,GFe=ZY,YFe=XY.Function,ZFe=/MSIE .\./.test(KFe)||qFe&&function(){var e=XY.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),JY=function(e,r){var t=r?2:1;return ZFe?function(n,i){var s=GFe(arguments.length,1)>t,o=WFe(n)?n:YFe(n),a=s?VFe(arguments,t):[],l=s?function(){UFe(o,this,a)}:o;return r?e(l,i):e(l)}:e},XFe=Nt,QY=xn,JFe=JY,R7=JFe(QY.setInterval,!0);XFe({global:!0,bind:!0,forced:QY.setInterval!==R7},{setInterval:R7});var QFe=Nt,eZ=xn,e9e=JY,D7=e9e(eZ.setTimeout,!0);QFe({global:!0,bind:!0,forced:eZ.setTimeout!==D7},{setTimeout:D7});var t9e=Kr,r9e=t9e.setTimeout;(function(e){e.exports=r9e})(jFe);var n9e=Vt(hO),B7={},i9e={get exports(){return B7},set exports(e){B7=e}},s9e=Ds,M7=qm,o9e=so,a9e=function(r){for(var t=s9e(this),n=o9e(t),i=arguments.length,s=M7(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:M7(o,n);a>s;)t[s++]=r;return t},l9e=Nt,u9e=a9e;l9e({target:"Array",proto:!0},{fill:u9e});var c9e=Kn,f9e=c9e("Array").fill,h9e=on,d9e=f9e,ZS=Array.prototype,p9e=function(e){var r=e.fill;return e===ZS||h9e(ZS,e)&&r===ZS.fill?d9e:r},v9e=p9e,g9e=v9e;(function(e){e.exports=g9e})(i9e);var dO={},y9e={get exports(){return dO},set exports(e){dO=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(y9e);var m9e=dO;/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Oa(){return Oa=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Oa.apply(this,arguments)}function Zo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function c1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pO;typeof Object.assign!="function"?pO=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:pO=Object.assign;var Ah=pO,L7=["","webkit","Moz","MS","ms","o"],b9e=typeof document>"u"?{style:{}}:document.createElement("div"),w9e="function",ap=Math.round,Oh=Math.abs,S4=Date.now;function wx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<L7.length;){if(t=L7[s],n=t?t+i:r,n in e)return n;s++}}var su;typeof window>"u"?su={}:su=window;var tZ=wx(b9e.style,"touchAction"),rZ=tZ!==void 0;function $9e(){if(!rZ)return!1;var e={},r=su.CSS&&su.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?su.CSS.supports("touch-action",t):!0}),e}var nZ="compute",iZ="auto",vO="manipulation",ph="none",Qy="pan-x",em="pan-y",f1=$9e(),_9e=/mobile|tablet|ip(ad|hone|od)|android/i,sZ="ontouchstart"in su,x9e=wx(su,"PointerEvent")!==void 0,E9e=sZ&&_9e.test(navigator.userAgent),nb="touch",S9e="pen",k4="mouse",k9e="kinect",T9e=25,us=1,Kh=2,Hn=4,Ps=8,g$=1,ib=2,sb=4,ob=8,Qp=16,pl=ib|sb,vh=ob|Qp,oZ=pl|vh,aZ=["x","y"],y$=["clientX","clientY"];function ou(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function $x(e,r){return typeof e===w9e?e.apply(r&&r[0]||void 0,r):e}function Qf(e,r){return e.indexOf(r)>-1}function I9e(e){if(Qf(e,ph))return ph;var r=Qf(e,Qy),t=Qf(e,em);return r&&t?ph:r||t?r?Qy:em:Qf(e,vO)?vO:iZ}var lZ=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===nZ&&(n=this.compute()),rZ&&this.manager.element.style&&f1[n]&&(this.manager.element.style[tZ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return ou(this.manager.recognizers,function(i){$x(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),I9e(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Qf(o,ph)&&!f1[ph],l=Qf(o,em)&&!f1[em],u=Qf(o,Qy)&&!f1[Qy];if(a){var f=n.pointers.length===1,c=n.distance<2,d=n.deltaTime<250;if(f&&c&&d)return}if(!(u&&l)&&(a||l&&s&pl||u&&s&vh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function T4(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function uZ(e){var r=e.length;if(r===1)return{x:ap(e[0].clientX),y:ap(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:ap(t/r),y:ap(n/r)}}function F7(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:ap(e.pointers[t].clientX),clientY:ap(e.pointers[t].clientY)},t++;return{timeStamp:S4(),pointers:r,center:uZ(r),deltaX:e.deltaX,deltaY:e.deltaY}}function m$(e,r,t){t||(t=aZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function gO(e,r,t){t||(t=aZ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function cZ(e,r){return e===r?g$:Oh(e)>=Oh(r)?e<0?ib:sb:r<0?ob:Qp}function A9e(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===us||s.eventType===Hn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function fZ(e,r,t){return{x:r/e||0,y:t/e||0}}function O9e(e,r){return m$(r[0],r[1],y$)/m$(e[0],e[1],y$)}function C9e(e,r){return gO(r[1],r[0],y$)+gO(e[1],e[0],y$)}function P9e(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ps&&(n>T9e||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,f=fZ(n,l,u);s=f.x,o=f.y,i=Oh(f.x)>Oh(f.y)?f.x:f.y,a=cZ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function N9e(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=F7(r)),i>1&&!t.firstMultiple?t.firstMultiple=F7(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=uZ(n);r.timeStamp=S4(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=gO(a,l),r.distance=m$(a,l),A9e(t,r),r.offsetDirection=cZ(r.deltaX,r.deltaY);var u=fZ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Oh(u.x)>Oh(u.y)?u.x:u.y,r.scale=o?O9e(o.pointers,n):1,r.rotation=o?C9e(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,P9e(t,r);var f=e.element,c=r.srcEvent,d;c.composedPath?d=c.composedPath()[0]:c.path?d=c.path[0]:d=c.target,T4(d,f)&&(f=d),r.target=f}function R9e(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&us&&n-i===0,o=r&(Hn|Ps)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,N9e(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function tm(e){return e.trim().split(/\s+/g)}function py(e,r,t){ou(tm(r),function(n){e.addEventListener(n,t,!1)})}function vy(e,r,t){ou(tm(r),function(n){e.removeEventListener(n,t,!1)})}function j7(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Lv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){$x(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&py(this.element,this.evEl,this.domHandler),this.evTarget&&py(this.target,this.evTarget,this.domHandler),this.evWin&&py(j7(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&vy(this.element,this.evEl,this.domHandler),this.evTarget&&vy(this.target,this.evTarget,this.domHandler),this.evWin&&vy(j7(this.element),this.evWin,this.domHandler)},e}();function Ch(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var D9e={pointerdown:us,pointermove:Kh,pointerup:Hn,pointercancel:Ps,pointerout:Ps},B9e={2:nb,3:S9e,4:k4,5:k9e},hZ="pointerdown",dZ="pointermove pointerup pointercancel";su.MSPointerEvent&&!su.PointerEvent&&(hZ="MSPointerDown",dZ="MSPointerMove MSPointerUp MSPointerCancel");var pZ=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evEl=hZ,i.evWin=dZ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=D9e[a],u=B9e[i.pointerType]||i.pointerType,f=u===nb,c=Ch(s,i.pointerId,"pointerId");l&us&&(i.button===0||f)?c<0&&(s.push(i),c=s.length-1):l&(Hn|Ps)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Lv);function rm(e){return Array.prototype.slice.call(e,0)}function I4(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Ch(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var M9e={touchstart:us,touchmove:Kh,touchend:Hn,touchcancel:Ps},L9e="touchstart touchmove touchend touchcancel",A4=function(e){Zo(r,e);function r(){var n;return r.prototype.evTarget=L9e,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=M9e[i.type],o=F9e.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:nb,srcEvent:i})},r}(Lv);function F9e(e,r){var t=rm(e.touches),n=this.targetIds;if(r&(us|Kh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=rm(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return T4(u.target,l)}),r===us)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Hn|Ps)&&delete n[o[i].identifier],i++;if(a.length)return[I4(s.concat(a),"identifier",!0),a]}var j9e={mousedown:us,mousemove:Kh,mouseup:Hn},z9e="mousedown",H9e="mousemove mouseup",O4=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evEl=z9e,i.evWin=H9e,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=j9e[i.type];s&us&&i.button===0&&(this.pressed=!0),s&Kh&&i.which!==1&&(s=Hn),this.pressed&&(s&Hn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:k4,srcEvent:i}))},r}(Lv),U9e=2500,z7=25;function H7(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,U9e)}}function W9e(e,r){e&us?(this.primaryTouch=r.changedPointers[0].identifier,H7.call(this,r)):e&(Hn|Ps)&&H7.call(this,r)}function q9e(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=z7&&o<=z7)return!0}return!1}var vZ=function(){var e=function(r){Zo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var f=u.pointerType===nb,c=u.pointerType===k4;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(f)W9e.call(c1(c1(o)),l,u);else if(c&&q9e.call(c1(c1(o)),u))return;o.callback(a,l,u)}},o.touch=new A4(o.manager,o.handler),o.mouse=new O4(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Lv);return e}();function K9e(e){var r,t=e.options.inputClass;return t?r=t:x9e?r=pZ:E9e?r=A4:sZ?r=vZ:r=O4,new r(e,R9e)}function lp(e,r,t){return Array.isArray(e)?(ou(e,t[r],t),!0):!1}var cw=1,qo=2,ev=4,Cc=8,au=Cc,nm=16,fl=32,V9e=1;function G9e(){return V9e++}function h1(e,r){var t=r.manager;return t?t.get(e):e}function U7(e){return e&nm?"cancel":e&Cc?"end":e&ev?"move":e&qo?"start":""}var ab=function(){function e(t){t===void 0&&(t={}),this.options=Oa({enable:!0},t),this.id=G9e(),this.manager=null,this.state=cw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Ah(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(lp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=h1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return lp(n,"dropRecognizeWith",this)?this:(n=h1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(lp(n,"requireFailure",this))return this;var i=this.requireFail;return n=h1(n,this),Ch(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(lp(n,"dropRequireFailure",this))return this;n=h1(n,this);var i=Ch(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Cc&&o(i.options.event+U7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Cc&&o(i.options.event+U7(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=fl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(fl|cw)))return!1;n++}return!0},r.recognize=function(n){var i=Ah({},n);if(!$x(this.options.enable,[this,i])){this.reset(),this.state=fl;return}this.state&(au|nm|fl)&&(this.state=cw),this.state=this.process(i),this.state&(qo|ev|Cc|nm)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),yO=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Oa({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[vO]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&us&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Hn)return this.failTimeout();var f=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||m$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!f?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=au,s.tryEmit()},o.interval),qo):au}return fl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=fl},this.options.interval),fl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===au&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(ab),tv=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(qo|ev),l=this.attrTest(i);return a&&(o&Ps||!l)?s|nm:a||l?o&Hn?s|Cc:s&qo?s|ev:qo:fl},r}(ab);function gZ(e){return e===Qp?"down":e===ob?"up":e===ib?"left":e===sb?"right":""}var C4=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Oa({event:"pan",threshold:10,pointers:1,direction:oZ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&pl&&s.push(em),i&vh&&s.push(Qy),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,f=i.deltaY;return l&s.direction||(s.direction&pl?(l=u===0?g$:u<0?ib:sb,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=f===0?g$:f<0?ob:Qp,o=f!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return tv.prototype.attrTest.call(this,i)&&(this.state&qo||!(this.state&qo)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=gZ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(tv),yZ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({event:"swipe",threshold:10,velocity:.3,direction:pl|vh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return C4.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(pl|vh)?o=i.overallVelocity:s&pl?o=i.overallVelocityX:s&vh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Oh(o)>this.options.velocity&&i.eventType&Hn},t.emit=function(i){var s=gZ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(tv),mZ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[ph]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&qo)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(tv),bZ=function(e){Zo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Oa({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[ph]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&qo)},r}(tv),wZ=function(e){Zo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Oa({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[iZ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Hn|Ps)&&!u)this.reset();else if(i.eventType&us)this.reset(),this._timer=setTimeout(function(){s.state=au,s.tryEmit()},o.time);else if(i.eventType&Hn)return au;return fl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===au&&(i&&i.eventType&Hn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=S4(),this.manager.emit(this.options.event,this._input)))},r}(ab),$Z={domEvents:!1,touchAction:nZ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},W7=[[bZ,{enable:!1}],[mZ,{enable:!1},["rotate"]],[yZ,{direction:pl}],[C4,{direction:pl},["swipe"]],[yO],[yO,{event:"doubletap",taps:2},["tap"]],[wZ]],Y9e=1,q7=2;function K7(e,r){var t=e.element;if(t.style){var n;ou(e.options.cssProps,function(i,s){n=wx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Z9e(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var V7=function(){function e(t,n){var i=this;this.options=Ah({},$Z,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=K9e(this),this.touchAction=new lZ(this,this.options.touchAction),K7(this,!0),ou(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Ah(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?q7:Y9e},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&au)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==q7&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(qo|ev|Cc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof ab)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(lp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(lp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Ch(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return ou(tm(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return ou(tm(n),function(o){i?s[o]&&s[o].splice(Ch(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Z9e(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&K7(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),X9e={touchstart:us,touchmove:Kh,touchend:Hn,touchcancel:Ps},J9e="touchstart",Q9e="touchstart touchmove touchend touchcancel",eje=function(e){Zo(r,e);function r(){var n,i=r.prototype;return i.evTarget=J9e,i.evWin=Q9e,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=X9e[i.type];if(s===us&&(this.started=!0),!!this.started){var o=tje.call(this,i,s);s&(Hn|Ps)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:nb,srcEvent:i})}},r}(Lv);function tje(e,r){var t=rm(e.touches),n=rm(e.changedTouches);return r&(Hn|Ps)&&(t=I4(t.concat(n),"identifier",!0)),[t,n]}function _Z(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var xZ=_Z(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),rje=_Z(function(e,r){return xZ(e,r,!0)},"merge","Use `assign`.");function nje(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Ah(i,t)}function G7(e,r){return function(){return e.apply(r,arguments)}}var ije=function(){var e=function(t,n){return n===void 0&&(n={}),new V7(t,Oa({recognizers:W7.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=oZ,e.DIRECTION_DOWN=Qp,e.DIRECTION_LEFT=ib,e.DIRECTION_RIGHT=sb,e.DIRECTION_UP=ob,e.DIRECTION_HORIZONTAL=pl,e.DIRECTION_VERTICAL=vh,e.DIRECTION_NONE=g$,e.DIRECTION_DOWN=Qp,e.INPUT_START=us,e.INPUT_MOVE=Kh,e.INPUT_END=Hn,e.INPUT_CANCEL=Ps,e.STATE_POSSIBLE=cw,e.STATE_BEGAN=qo,e.STATE_CHANGED=ev,e.STATE_ENDED=Cc,e.STATE_RECOGNIZED=au,e.STATE_CANCELLED=nm,e.STATE_FAILED=fl,e.Manager=V7,e.Input=Lv,e.TouchAction=lZ,e.TouchInput=A4,e.MouseInput=O4,e.PointerEventInput=pZ,e.TouchMouseInput=vZ,e.SingleTouchInput=eje,e.Recognizer=ab,e.AttrRecognizer=tv,e.Tap=yO,e.Pan=C4,e.Swipe=yZ,e.Pinch=mZ,e.Rotate=bZ,e.Press=wZ,e.on=py,e.off=vy,e.each=ou,e.merge=rje,e.extend=xZ,e.bindFn=G7,e.assign=Ah,e.inherit=nje,e.bindFn=G7,e.prefixed=wx,e.toArray=rm,e.inArray=Ch,e.uniqueArray=I4,e.splitStr=tm,e.boolOrFn=$x,e.hasParent=T4,e.addEventListeners=py,e.removeEventListeners=vy,e.defaults=Ah({},$Z,{preset:W7}),e}(),sje=ije;function EZ(e,r){var t=typeof yx<"u"&&rb(e)||e["@@iterator"];if(!t){if(Ks(e)||(t=oje(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function oje(e,r){var t;if(e){if(typeof e=="string")return Y7(e,r);var n=bx(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return $4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y7(e,r)}}function Y7(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var SZ=yx("DELETE");function aje(e){for(var r,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return kZ.apply(void 0,mx(r=[{},e]).call(r,n))}function kZ(){var e=b$.apply(void 0,arguments);return IZ(e),e}function b$(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var n;return b$.apply(void 0,mx(n=[kZ(r[0],r[1])]).call(n,Ts(bx(r).call(r,2))))}var i=r[0],s=r[1],o=EZ(J8e(s)),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===SZ?delete i[l]:i[l]!==null&&s[l]!==null&&Ai(i[l])==="object"&&Ai(s[l])==="object"&&!Ks(i[l])&&!Ks(s[l])?i[l]=b$(i[l],s[l]):i[l]=TZ(s[l]))}}catch(u){o.e(u)}finally{o.f()}return i}function TZ(e){return Ks(e)?ga(e).call(e,function(r){return TZ(r)}):Ai(e)==="object"&&e!==null?b$({},e):e}function IZ(e){for(var r=0,t=x4(e);r<t.length;r++){var n=t[r];e[n]===SZ?delete e[n]:Ai(e[n])==="object"&&e[n]!==null&&IZ(e[n])}}function lje(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var uje=typeof window<"u"?window.Hammer||sje:function(){return lje()};function eu(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=uje(this._dom.overlay);n.on("tap",mY(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ih(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){cje(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}m9e(eu.prototype);eu.current=null;eu.prototype.destroy=function(){var e,r;this.deactivate();var t=EZ(UMe(e=zY(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};eu.prototype.activate=function(){eu.current&&eu.current.deactivate(),eu.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};eu.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};eu.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function cje(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var mO={},fje={get exports(){return mO},set exports(e){mO=e}},hje=sx,dje=Pv,pje=TypeError,AZ=function(e){if(hje(e))return e;throw pje(dje(e)+" is not a constructor")},vje=Nt,gje=hs,XS=Av,yje=gY,Z7=AZ,mje=io,X7=mi,bje=Wh,OZ=kr,P4=gje("Reflect","construct"),wje=Object.prototype,$je=[].push,CZ=OZ(function(){function e(){}return!(P4(function(){},[],e)instanceof e)}),PZ=!OZ(function(){P4(function(){})}),J7=CZ||PZ;vje({target:"Reflect",stat:!0,forced:J7,sham:J7},{construct:function(r,t){Z7(r),mje(t);var n=arguments.length<3?r:Z7(arguments[2]);if(PZ&&!CZ)return P4(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return XS($je,i,t),new(XS(yje,r,i))}var s=n.prototype,o=bje(X7(s)?s:wje),a=XS(r,o,t);return X7(a)?a:o}});var _je=Kr,xje=_je.Reflect.construct,Eje=xje,Sje=Eje;(function(e){e.exports=Sje})(fje);var fw=Vt(mO);function Of(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w$={},kje={get exports(){return w$},set exports(e){w$=e}},bO={},Tje={get exports(){return bO},set exports(e){bO=e}},Ije=YY,Aje=Ije,Oje=Aje,Cje=Oje;(function(e){e.exports=Cje})(Tje);(function(e){e.exports=bO})(kje);var Pje=Vt(w$),$$={},Nje={get exports(){return $$},set exports(e){$$=e}},wO={},Rje={get exports(){return wO},set exports(e){wO=e}},Dje=Nt,Bje=nY;Dje({target:"Object",stat:!0},{setPrototypeOf:Bje});var Mje=Kr,Lje=Mje.Object.setPrototypeOf,Fje=Lje,jje=Fje,zje=jje,Hje=zje,Uje=Hje,Wje=Uje;(function(e){e.exports=Wje})(Rje);(function(e){e.exports=wO})(Nje);var $O=Vt($$),_O={},qje={get exports(){return _O},set exports(e){_O=e}},xO={},Kje={get exports(){return xO},set exports(e){xO=e}},Vje=yY,Gje=Vje,Yje=Gje,Zje=Yje;(function(e){e.exports=Zje})(Kje);(function(e){e.exports=xO})(qje);var NZ=Vt(_O);function EO(e,r){var t;return EO=$O?NZ(t=$O).call(t):function(i,s){return i.__proto__=s,i},EO(e,r)}function Xje(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Pje(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),nx(e,"prototype",{writable:!1}),r&&EO(e,r)}function Jje(e,r){if(r&&(Ai(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Of(e)}var _$={},Qje={get exports(){return _$},set exports(e){_$=e}},SO={},eze={get exports(){return SO},set exports(e){SO=e}},tze=UY,rze=tze,nze=rze,ize=nze;(function(e){e.exports=ize})(eze);(function(e){e.exports=SO})(Qje);var Q7=Vt(_$);function x$(e){var r;return x$=$O?NZ(r=Q7).call(r):function(n){return n.__proto__||Q7(n)},x$(e)}var kO={},sze={get exports(){return kO},set exports(e){kO=e}},TO={},oze={get exports(){return TO},set exports(e){TO=e}};(function(e){var r=Yy,t=p$;function n(i){"@babel/helpers - typeof";return e.exports=n=typeof r=="function"&&typeof t=="symbol"?function(s){return typeof s}:function(s){return s&&typeof r=="function"&&s.constructor===r&&s!==r.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(oze);var IO={},aze={get exports(){return IO},set exports(e){IO=e}},AO={},lze={get exports(){return AO},set exports(e){AO=e}},uze=LY,cze=uze,fze=cze,hze=fze;(function(e){e.exports=hze})(lze);(function(e){e.exports=AO})(aze);var OO={},dze={get exports(){return OO},set exports(e){OO=e}},CO={},pze={get exports(){return CO},set exports(e){CO=e}},eL=qn,vze=_4,gze=Hh,yze=no,mze=function(e,r,t){for(var n=vze(r),i=yze.f,s=gze.f,o=0;o<n.length;o++){var a=n[o];!eL(e,a)&&!(t&&eL(t,a))&&i(e,a,s(r,a))}},bze=mi,wze=Tu,$ze=function(e,r){bze(r)&&"cause"in r&&wze(e,"cause",r.cause)},_ze=Br,RZ=Error,xze=_ze("".replace),Eze=function(e){return String(RZ(e).stack)}("zxcasd"),DZ=/\n\s*at [^:]*:[^\n]*/,Sze=DZ.test(Eze),kze=function(e,r){if(Sze&&typeof e=="string"&&!RZ.prepareStackTrace)for(;r--;)e=xze(e,DZ,"");return e},Tze=kr,Ize=Uh,Aze=!Tze(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",Ize(1,7)),e.stack!==7):!0}),Oze=Tu,Cze=kze,Pze=Aze,tL=Error.captureStackTrace,Nze=function(e,r,t,n){Pze&&(tL?tL(e,r):Oze(e,"stack",Cze(t,n)))},Rze=Zc,Dze=yi,Bze=io,Mze=Pv,Lze=$Y,Fze=so,rL=on,jze=w4,zze=gx,nL=wY,Hze=TypeError,hw=function(e,r){this.stopped=e,this.result=r},iL=hw.prototype,Vh=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=Rze(r,n),u,f,c,d,y,w,b,T=function(A){return u&&nL(u,"normal",A),new hw(!0,A)},_=function(A){return i?(Bze(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(f=zze(e),!f)throw Hze(Mze(e)+" is not iterable");if(Lze(f)){for(c=0,d=Fze(e);d>c;c++)if(y=_(e[c]),y&&rL(iL,y))return y;return new hw(!1)}u=jze(e,f)}for(w=s?e.next:u.next;!(b=Dze(w,u)).done;){try{y=_(b.value)}catch(A){nL(u,"throw",A)}if(typeof y=="object"&&y&&rL(iL,y))return y}return new hw(!1)},Uze=xl,Wze=function(e,r){return e===void 0?arguments.length<2?"":r:Uze(e)},qze=Nt,Kze=on,Vze=px,E$=nY,Gze=mze,BZ=Wh,JS=Tu,QS=Uh,Yze=$ze,Zze=Nze,Xze=Vh,Jze=Wze,Qze=an,eHe=Qze("toStringTag"),S$=Error,tHe=[].push,rv=function(r,t){var n=Kze(ek,this),i;E$?i=E$(S$(),n?Vze(this):ek):(i=n?this:BZ(ek),JS(i,eHe,"Error")),t!==void 0&&JS(i,"message",Jze(t)),Zze(i,rv,i.stack,1),arguments.length>2&&Yze(i,arguments[2]);var s=[];return Xze(r,tHe,{that:s}),JS(i,"errors",s),i};E$?E$(rv,S$):Gze(rv,S$,{name:!0});var ek=rv.prototype=BZ(S$.prototype,{constructor:QS(1,rv),message:QS(1,""),name:QS(1,"AggregateError")});qze({global:!0,constructor:!0,arity:2},{AggregateError:rv});var rHe=hs,nHe=c4,iHe=an,sHe=ri,sL=iHe("species"),MZ=function(e){var r=rHe(e);sHe&&r&&!r[sL]&&nHe(r,sL,{configurable:!0,get:function(){return this}})},oHe=on,aHe=TypeError,N4=function(e,r){if(oHe(r,e))return e;throw aHe("Incorrect invocation")},oL=io,lHe=AZ,uHe=jm,cHe=an,fHe=cHe("species"),LZ=function(e,r){var t=oL(e).constructor,n;return t===void 0||uHe(n=oL(t)[fHe])?r:lHe(n)},hHe=Yc,FZ=/(?:ipad|iphone|ipod).*applewebkit/i.test(hHe),Qs=xn,dHe=Av,pHe=Zc,aL=En,vHe=qn,jZ=kr,lL=xG,gHe=Jm,uL=n4,yHe=ZY,mHe=FZ,bHe=tb,PO=Qs.setImmediate,NO=Qs.clearImmediate,wHe=Qs.process,tk=Qs.Dispatch,$He=Qs.Function,cL=Qs.MessageChannel,_He=Qs.String,rk=0,gy={},fL="onreadystatechange",im,kf,nk,ik;jZ(function(){im=Qs.location});var R4=function(e){if(vHe(gy,e)){var r=gy[e];delete gy[e],r()}},sk=function(e){return function(){R4(e)}},hL=function(e){R4(e.data)},dL=function(e){Qs.postMessage(_He(e),im.protocol+"//"+im.host)};(!PO||!NO)&&(PO=function(r){yHe(arguments.length,1);var t=aL(r)?r:$He(r),n=gHe(arguments,1);return gy[++rk]=function(){dHe(t,void 0,n)},kf(rk),rk},NO=function(r){delete gy[r]},bHe?kf=function(e){wHe.nextTick(sk(e))}:tk&&tk.now?kf=function(e){tk.now(sk(e))}:cL&&!mHe?(nk=new cL,ik=nk.port2,nk.port1.onmessage=hL,kf=pHe(ik.postMessage,ik)):Qs.addEventListener&&aL(Qs.postMessage)&&!Qs.importScripts&&im&&im.protocol!=="file:"&&!jZ(dL)?(kf=dL,Qs.addEventListener("message",hL,!1)):fL in uL("script")?kf=function(e){lL.appendChild(uL("script"))[fL]=function(){lL.removeChild(this),R4(e)}}:kf=function(e){setTimeout(sk(e),0)});var zZ={set:PO,clear:NO},HZ=function(){this.head=null,this.tail=null};HZ.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var UZ=HZ,xHe=Yc,EHe=/ipad|iphone|ipod/i.test(xHe)&&typeof Pebble<"u",SHe=Yc,kHe=/web0s(?!.*chrome)/i.test(SHe),Ph=xn,pL=Zc,THe=Hh.f,ok=zZ.set,IHe=UZ,AHe=FZ,OHe=EHe,CHe=kHe,ak=tb,vL=Ph.MutationObserver||Ph.WebKitMutationObserver,gL=Ph.document,yL=Ph.process,d1=Ph.Promise,mL=THe(Ph,"queueMicrotask"),RO=mL&&mL.value,jd,lk,uk,p1,bL;if(!RO){var v1=new IHe,g1=function(){var e,r;for(ak&&(e=yL.domain)&&e.exit();r=v1.get();)try{r()}catch(t){throw v1.head&&jd(),t}e&&e.enter()};!AHe&&!ak&&!CHe&&vL&&gL?(lk=!0,uk=gL.createTextNode(""),new vL(g1).observe(uk,{characterData:!0}),jd=function(){uk.data=lk=!lk}):!OHe&&d1&&d1.resolve?(p1=d1.resolve(void 0),p1.constructor=d1,bL=pL(p1.then,p1),jd=function(){bL(g1)}):ak?jd=function(){yL.nextTick(g1)}:(ok=pL(ok,Ph),jd=function(){ok(g1)}),RO=function(e){v1.head||jd(),v1.add(e)}}var PHe=RO,NHe=function(e,r){try{arguments.length==1?console.error(e):console.error(e,r)}catch{}},Fv=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},RHe=xn,jv=RHe.Promise,WZ=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",DHe=WZ,BHe=tb,MHe=!DHe&&!BHe&&typeof window=="object"&&typeof document=="object",LHe=xn,yy=jv,FHe=En,jHe=fG,zHe=gG,HHe=an,UHe=MHe,WHe=WZ,ck=Ov,wL=yy&&yy.prototype,qHe=HHe("species"),DO=!1,qZ=FHe(LHe.PromiseRejectionEvent),KHe=jHe("Promise",function(){var e=zHe(yy),r=e!==String(yy);if(!r&&ck===66||!(wL.catch&&wL.finally))return!0;if(!ck||ck<51||!/native code/.test(e)){var t=new yy(function(s){s(1)}),n=function(s){s(function(){},function(){})},i=t.constructor={};if(i[qHe]=n,DO=t.then(function(){})instanceof n,!DO)return!0}return!r&&(UHe||WHe)&&!qZ}),lb={CONSTRUCTOR:KHe,REJECTION_EVENT:qZ,SUBCLASSING:DO},Au={},$L=Rs,VHe=TypeError,GHe=function(e){var r,t;this.promise=new e(function(n,i){if(r!==void 0||t!==void 0)throw VHe("Bad Promise constructor");r=n,t=i}),this.resolve=$L(r),this.reject=$L(t)};Au.f=function(e){return new GHe(e)};var YHe=Nt,k$=tb,Hc=xn,ub=yi,ZHe=Rv,XHe=qh,JHe=MZ,QHe=Rs,BO=En,eUe=mi,tUe=N4,rUe=LZ,KZ=zZ.set,D4=PHe,nUe=NHe,iUe=Fv,sUe=UZ,VZ=Dv,MO=jv,GZ=lb,YZ=Au,_x="Promise",ZZ=GZ.CONSTRUCTOR,oUe=GZ.REJECTION_EVENT,fk=VZ.getterFor(_x),aUe=VZ.set,lUe=MO&&MO.prototype,up=MO,hk=lUe,XZ=Hc.TypeError,LO=Hc.document,B4=Hc.process,FO=YZ.f,uUe=FO,cUe=!!(LO&&LO.createEvent&&Hc.dispatchEvent),JZ="unhandledrejection",fUe="rejectionhandled",_L=0,QZ=1,hUe=2,M4=1,eX=2,y1,xL,dUe,tX=function(e){var r;return eUe(e)&&BO(r=e.then)?r:!1},rX=function(e,r){var t=r.value,n=r.state==QZ,i=n?e.ok:e.fail,s=e.resolve,o=e.reject,a=e.domain,l,u,f;try{i?(n||(r.rejection===eX&&vUe(r),r.rejection=M4),i===!0?l=t:(a&&a.enter(),l=i(t),a&&(a.exit(),f=!0)),l===e.promise?o(XZ("Promise-chain cycle")):(u=tX(l))?ub(u,l,s,o):s(l)):o(t)}catch(c){a&&!f&&a.exit(),o(c)}},nX=function(e,r){e.notified||(e.notified=!0,D4(function(){for(var t=e.reactions,n;n=t.get();)rX(n,e);e.notified=!1,r&&!e.rejection&&pUe(e)}))},iX=function(e,r,t){var n,i;cUe?(n=LO.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Hc.dispatchEvent(n)):n={promise:r,reason:t},!oUe&&(i=Hc["on"+e])?i(n):e===JZ&&nUe("Unhandled promise rejection",t)},pUe=function(e){ub(KZ,Hc,function(){var r=e.facade,t=e.value,n=EL(e),i;if(n&&(i=iUe(function(){k$?B4.emit("unhandledRejection",t,r):iX(JZ,r,t)}),e.rejection=k$||EL(e)?eX:M4,i.error))throw i.value})},EL=function(e){return e.rejection!==M4&&!e.parent},vUe=function(e){ub(KZ,Hc,function(){var r=e.facade;k$?B4.emit("rejectionHandled",r):iX(fUe,r,e.value)})},cp=function(e,r,t){return function(n){e(r,n,t)}},kp=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=hUe,nX(e,!0))},jO=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw XZ("Promise can't be resolved itself");var n=tX(r);n?D4(function(){var i={done:!1};try{ub(n,r,cp(jO,i,e),cp(kp,i,e))}catch(s){kp(i,s,e)}}):(e.value=r,e.state=QZ,nX(e,!1))}catch(i){kp({done:!1},i,e)}}};ZZ&&(up=function(r){tUe(this,hk),QHe(r),ub(y1,this);var t=fk(this);try{r(cp(jO,t),cp(kp,t))}catch(n){kp(t,n)}},hk=up.prototype,y1=function(r){aUe(this,{type:_x,done:!1,notified:!1,parent:!1,reactions:new sUe,rejection:!1,state:_L,value:void 0})},y1.prototype=ZHe(hk,"then",function(r,t){var n=fk(this),i=FO(rUe(this,up));return n.parent=!0,i.ok=BO(r)?r:!0,i.fail=BO(t)&&t,i.domain=k$?B4.domain:void 0,n.state==_L?n.reactions.add(i):D4(function(){rX(i,n)}),i.promise}),xL=function(){var e=new y1,r=fk(e);this.promise=e,this.resolve=cp(jO,r),this.reject=cp(kp,r)},YZ.f=FO=function(e){return e===up||e===dUe?new xL(e):uUe(e)});YHe({global:!0,constructor:!0,wrap:!0,forced:ZZ},{Promise:up});XHe(up,_x,!1,!0);JHe(_x);var gUe=jv,yUe=EY,mUe=lb.CONSTRUCTOR,xx=mUe||!yUe(function(e){gUe.all(e).then(void 0,function(){})}),bUe=Nt,wUe=yi,$Ue=Rs,_Ue=Au,xUe=Fv,EUe=Vh,SUe=xx;bUe({target:"Promise",stat:!0,forced:SUe},{all:function(r){var t=this,n=_Ue.f(t),i=n.resolve,s=n.reject,o=xUe(function(){var a=$Ue(t.resolve),l=[],u=0,f=1;EUe(r,function(c){var d=u++,y=!1;f++,wUe(a,t,c).then(function(w){y||(y=!0,l[d]=w,--f||i(l))},s)}),--f||i(l)});return o.error&&s(o.value),n.promise}});var kUe=Nt,TUe=lb.CONSTRUCTOR,SL=jv;SL&&SL.prototype;kUe({target:"Promise",proto:!0,forced:TUe,real:!0},{catch:function(e){return this.then(void 0,e)}});var IUe=Nt,AUe=yi,OUe=Rs,CUe=Au,PUe=Fv,NUe=Vh,RUe=xx;IUe({target:"Promise",stat:!0,forced:RUe},{race:function(r){var t=this,n=CUe.f(t),i=n.reject,s=PUe(function(){var o=OUe(t.resolve);NUe(r,function(a){AUe(o,t,a).then(n.resolve,i)})});return s.error&&i(s.value),n.promise}});var DUe=Nt,BUe=yi,MUe=Au,LUe=lb.CONSTRUCTOR;DUe({target:"Promise",stat:!0,forced:LUe},{reject:function(r){var t=MUe.f(this);return BUe(t.reject,void 0,r),t.promise}});var FUe=io,jUe=mi,zUe=Au,sX=function(e,r){if(FUe(e),jUe(r)&&r.constructor===e)return r;var t=zUe.f(e),n=t.resolve;return n(r),t.promise},HUe=Nt,UUe=hs,WUe=rOe,qUe=jv,KUe=lb.CONSTRUCTOR,VUe=sX,GUe=UUe("Promise"),YUe=!KUe;HUe({target:"Promise",stat:!0,forced:WUe},{resolve:function(r){return VUe(YUe&&this===GUe?qUe:this,r)}});var ZUe=Nt,XUe=yi,JUe=Rs,QUe=Au,eWe=Fv,tWe=Vh,rWe=xx;ZUe({target:"Promise",stat:!0,forced:rWe},{allSettled:function(r){var t=this,n=QUe.f(t),i=n.resolve,s=n.reject,o=eWe(function(){var a=JUe(t.resolve),l=[],u=0,f=1;tWe(r,function(c){var d=u++,y=!1;f++,XUe(a,t,c).then(function(w){y||(y=!0,l[d]={status:"fulfilled",value:w},--f||i(l))},function(w){y||(y=!0,l[d]={status:"rejected",reason:w},--f||i(l))})}),--f||i(l)});return o.error&&s(o.value),n.promise}});var nWe=Nt,iWe=yi,sWe=Rs,oWe=hs,aWe=Au,lWe=Fv,uWe=Vh,cWe=xx,kL="No one promise resolved";nWe({target:"Promise",stat:!0,forced:cWe},{any:function(r){var t=this,n=oWe("AggregateError"),i=aWe.f(t),s=i.resolve,o=i.reject,a=lWe(function(){var l=sWe(t.resolve),u=[],f=0,c=1,d=!1;uWe(r,function(y){var w=f++,b=!1;c++,iWe(l,t,y).then(function(T){b||d||(d=!0,s(T))},function(T){b||d||(b=!0,u[w]=T,--c||o(new n(u,kL)))})}),--c||o(new n(u,kL))});return a.error&&o(a.value),i.promise}});var fWe=Nt,zO=jv,hWe=kr,dWe=hs,pWe=En,vWe=LZ,TL=sX,gWe=zO&&zO.prototype,yWe=!!zO&&hWe(function(){gWe.finally.call({then:function(){}},function(){})});fWe({target:"Promise",proto:!0,real:!0,forced:yWe},{finally:function(e){var r=vWe(this,dWe("Promise")),t=pWe(e);return this.then(t?function(n){return TL(r,e()).then(function(){return n})}:e,t?function(n){return TL(r,e()).then(function(){throw n})}:e)}});var mWe=Kr,bWe=mWe.Promise,wWe=bWe,$We=wWe,_We=$We,xWe=_We,EWe=Nt,SWe=Au,kWe=Fv;EWe({target:"Promise",stat:!0,forced:!0},{try:function(e){var r=SWe.f(this),t=kWe(e);return(t.error?r.reject:r.resolve)(t.value),r.promise}});var TWe=xWe,IWe=TWe;(function(e){e.exports=IWe})(pze);(function(e){e.exports=CO})(dze);var HO={},AWe={get exports(){return HO},set exports(e){HO=e}},UO={},OWe={get exports(){return UO},set exports(e){UO=e}},CWe=FY,PWe=CWe,NWe=PWe,RWe=NWe;(function(e){e.exports=RWe})(OWe);(function(e){e.exports=UO})(AWe);(function(e){var r=TO.default,t=u$,n=Yy,i=w$,s=_$,o=IO,a=$$,l=OO,u=HO,f=v$;function c(){e.exports=c=function(){return d},e.exports.__esModule=!0,e.exports.default=e.exports;var d={},y=Object.prototype,w=y.hasOwnProperty,b=t||function(_e,ge,Te){_e[ge]=Te.value},T=typeof n=="function"?n:{},_=T.iterator||"@@iterator",A=T.asyncIterator||"@@asyncIterator",x=T.toStringTag||"@@toStringTag";function I(_e,ge,Te){return t(_e,ge,{value:Te,enumerable:!0,configurable:!0,writable:!0}),_e[ge]}try{I({},"")}catch{I=function(Te,je,$){return Te[je]=$}}function O(_e,ge,Te,je){var $=ge&&ge.prototype instanceof M?ge:M,S=i($.prototype),N=new He(je||[]);return b(S,"_invoke",{value:ie(_e,Te,N)}),S}function C(_e,ge,Te){try{return{type:"normal",arg:_e.call(ge,Te)}}catch(je){return{type:"throw",arg:je}}}d.wrap=O;var g={};function M(){}function B(){}function L(){}var q={};I(q,_,function(){return this});var Q=s,re=Q&&Q(Q(Ve([])));re&&re!==y&&w.call(re,_)&&(q=re);var Z=L.prototype=M.prototype=i(q);function j(_e){var ge;o(ge=["next","throw","return"]).call(ge,function(Te){I(_e,Te,function(je){return this._invoke(Te,je)})})}function X(_e,ge){function Te($,S,N,F){var z=C(_e[$],_e,S);if(z.type!=="throw"){var V=z.arg,ae=V.value;return ae&&r(ae)=="object"&&w.call(ae,"__await")?ge.resolve(ae.__await).then(function(ye){Te("next",ye,N,F)},function(ye){Te("throw",ye,N,F)}):ge.resolve(ae).then(function(ye){V.value=ye,N(V)},function(ye){return Te("throw",ye,N,F)})}F(z.arg)}var je;b(this,"_invoke",{value:function(S,N){function F(){return new ge(function(z,V){Te(S,N,z,V)})}return je=je?je.then(F,F):F()}})}function ie(_e,ge,Te){var je="suspendedStart";return function($,S){if(je==="executing")throw new Error("Generator is already running");if(je==="completed"){if($==="throw")throw S;return it()}for(Te.method=$,Te.arg=S;;){var N=Te.delegate;if(N){var F=Ee(N,Te);if(F){if(F===g)continue;return F}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(je==="suspendedStart")throw je="completed",Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);je="executing";var z=C(_e,ge,Te);if(z.type==="normal"){if(je=Te.done?"completed":"suspendedYield",z.arg===g)continue;return{value:z.arg,done:Te.done}}z.type==="throw"&&(je="completed",Te.method="throw",Te.arg=z.arg)}}}function Ee(_e,ge){var Te=ge.method,je=_e.iterator[Te];if(je===void 0)return ge.delegate=null,Te==="throw"&&_e.iterator.return&&(ge.method="return",ge.arg=void 0,Ee(_e,ge),ge.method==="throw")||Te!=="return"&&(ge.method="throw",ge.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),g;var $=C(je,_e.iterator,ge.arg);if($.type==="throw")return ge.method="throw",ge.arg=$.arg,ge.delegate=null,g;var S=$.arg;return S?S.done?(ge[_e.resultName]=S.value,ge.next=_e.nextLoc,ge.method!=="return"&&(ge.method="next",ge.arg=void 0),ge.delegate=null,g):S:(ge.method="throw",ge.arg=new TypeError("iterator result is not an object"),ge.delegate=null,g)}function $e(_e){var ge={tryLoc:_e[0]};1 in _e&&(ge.catchLoc=_e[1]),2 in _e&&(ge.finallyLoc=_e[2],ge.afterLoc=_e[3]),this.tryEntries.push(ge)}function Pe(_e){var ge=_e.completion||{};ge.type="normal",delete ge.arg,_e.completion=ge}function He(_e){this.tryEntries=[{tryLoc:"root"}],o(_e).call(_e,$e,this),this.reset(!0)}function Ve(_e){if(_e){var ge=_e[_];if(ge)return ge.call(_e);if(typeof _e.next=="function")return _e;if(!isNaN(_e.length)){var Te=-1,je=function $(){for(;++Te<_e.length;)if(w.call(_e,Te))return $.value=_e[Te],$.done=!1,$;return $.value=void 0,$.done=!0,$};return je.next=je}}return{next:it}}function it(){return{value:void 0,done:!0}}return B.prototype=L,b(Z,"constructor",{value:L,configurable:!0}),b(L,"constructor",{value:B,configurable:!0}),B.displayName=I(L,x,"GeneratorFunction"),d.isGeneratorFunction=function(_e){var ge=typeof _e=="function"&&_e.constructor;return!!ge&&(ge===B||(ge.displayName||ge.name)==="GeneratorFunction")},d.mark=function(_e){return a?a(_e,L):(_e.__proto__=L,I(_e,x,"GeneratorFunction")),_e.prototype=i(Z),_e},d.awrap=function(_e){return{__await:_e}},j(X.prototype),I(X.prototype,A,function(){return this}),d.AsyncIterator=X,d.async=function(_e,ge,Te,je,$){$===void 0&&($=l);var S=new X(O(_e,ge,Te,je),$);return d.isGeneratorFunction(ge)?S:S.next().then(function(N){return N.done?N.value:S.next()})},j(Z),I(Z,x,"Generator"),I(Z,_,function(){return this}),I(Z,"toString",function(){return"[object Generator]"}),d.keys=function(_e){var ge=Object(_e),Te=[];for(var je in ge)Te.push(je);return u(Te).call(Te),function $(){for(;Te.length;){var S=Te.pop();if(S in ge)return $.value=S,$.done=!1,$}return $.done=!0,$}},d.values=Ve,He.prototype={constructor:He,reset:function(ge){var Te;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(Te=this.tryEntries).call(Te,Pe),!ge)for(var je in this)je.charAt(0)==="t"&&w.call(this,je)&&!isNaN(+f(je).call(je,1))&&(this[je]=void 0)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if(ge.type==="throw")throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var Te=this;function je(V,ae){return N.type="throw",N.arg=ge,Te.next=V,ae&&(Te.method="next",Te.arg=void 0),!!ae}for(var $=this.tryEntries.length-1;$>=0;--$){var S=this.tryEntries[$],N=S.completion;if(S.tryLoc==="root")return je("end");if(S.tryLoc<=this.prev){var F=w.call(S,"catchLoc"),z=w.call(S,"finallyLoc");if(F&&z){if(this.prev<S.catchLoc)return je(S.catchLoc,!0);if(this.prev<S.finallyLoc)return je(S.finallyLoc)}else if(F){if(this.prev<S.catchLoc)return je(S.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return je(S.finallyLoc)}}}},abrupt:function(ge,Te){for(var je=this.tryEntries.length-1;je>=0;--je){var $=this.tryEntries[je];if($.tryLoc<=this.prev&&w.call($,"finallyLoc")&&this.prev<$.finallyLoc){var S=$;break}}S&&(ge==="break"||ge==="continue")&&S.tryLoc<=Te&&Te<=S.finallyLoc&&(S=null);var N=S?S.completion:{};return N.type=ge,N.arg=Te,S?(this.method="next",this.next=S.finallyLoc,g):this.complete(N)},complete:function(ge,Te){if(ge.type==="throw")throw ge.arg;return ge.type==="break"||ge.type==="continue"?this.next=ge.arg:ge.type==="return"?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):ge.type==="normal"&&Te&&(this.next=Te),g},finish:function(ge){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.finallyLoc===ge)return this.complete(je.completion,je.afterLoc),Pe(je),g}},catch:function(ge){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var je=this.tryEntries[Te];if(je.tryLoc===ge){var $=je.completion;if($.type==="throw"){var S=$.arg;Pe(je)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(ge,Te,je){return this.delegate={iterator:Ve(ge),resultName:Te,nextLoc:je},this.method==="next"&&(this.arg=void 0),g}},d}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports})(sze);var dw=kO(),xs=dw;try{regeneratorRuntime=dw}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=dw:Function("r","regeneratorRuntime = r")(dw)}var WO={},DWe={get exports(){return WO},set exports(e){WO=e}},T$={},BWe={get exports(){return T$},set exports(e){T$=e}},MWe=kr,LWe=MWe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),FWe=kr,jWe=mi,zWe=ku,IL=LWe,pw=Object.isExtensible,HWe=FWe(function(){pw(1)}),UWe=HWe||IL?function(r){return!jWe(r)||IL&&zWe(r)=="ArrayBuffer"?!1:pw?pw(r):!0}:pw,WWe=kr,qWe=!WWe(function(){return Object.isExtensible(Object.preventExtensions({}))}),KWe=Nt,VWe=Br,GWe=Km,YWe=mi,L4=qn,ZWe=no.f,AL=Gm,XWe=u4,F4=UWe,JWe=tx,QWe=qWe,oX=!1,bu=JWe("meta"),eqe=0,j4=function(e){ZWe(e,bu,{value:{objectID:"O"+eqe++,weakData:{}}})},tqe=function(e,r){if(!YWe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!L4(e,bu)){if(!F4(e))return"F";if(!r)return"E";j4(e)}return e[bu].objectID},rqe=function(e,r){if(!L4(e,bu)){if(!F4(e))return!0;if(!r)return!1;j4(e)}return e[bu].weakData},nqe=function(e){return QWe&&oX&&F4(e)&&!L4(e,bu)&&j4(e),e},iqe=function(){sqe.enable=function(){},oX=!0;var e=AL.f,r=VWe([].splice),t={};t[bu]=1,e(t).length&&(AL.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===bu){r(i,s,1);break}return i},KWe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:XWe.f}))},sqe=BWe.exports={enable:iqe,fastKey:tqe,getWeakData:rqe,onFreeze:nqe};GWe[bu]=!0;var oqe=Nt,aqe=xn,lqe=T$,uqe=kr,cqe=Tu,fqe=Vh,hqe=N4,dqe=En,pqe=mi,vqe=qh,gqe=no.f,yqe=Bv.forEach,mqe=ri,aX=Dv,bqe=aX.set,wqe=aX.getterFor,lX=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=aqe[e],a=o&&o.prototype,l={},u;if(!mqe||!dqe(o)||!(i||a.forEach&&!uqe(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),lqe.enable();else{u=r(function(d,y){bqe(hqe(d,f),{type:e,collection:new o}),y!=null&&fqe(y,d[s],{that:d,AS_ENTRIES:n})});var f=u.prototype,c=wqe(e);yqe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(d){var y=d=="add"||d=="set";d in a&&!(i&&d=="clear")&&cqe(f,d,function(w,b){var T=c(this).collection;if(!y&&i&&!pqe(w))return d=="get"?void 0:!1;var _=T[d](w===0?0:w,b);return y?this:_})}),i||gqe(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return vqe(u,e,!1,!0),l[e]=u,oqe({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},$qe=Rv,_qe=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:$qe(e,n,r[n],t);return e},xqe=Wh,Eqe=c4,OL=_qe,Sqe=Zc,kqe=N4,Tqe=jm,Iqe=Vh,Aqe=y4,m1=m4,Oqe=MZ,Mg=ri,CL=T$.fastKey,uX=Dv,PL=uX.set,dk=uX.getterFor,cX={getConstructor:function(e,r,t,n){var i=e(function(u,f){kqe(u,s),PL(u,{type:r,index:xqe(null),first:void 0,last:void 0,size:0}),Mg||(u.size=0),Tqe(f)||Iqe(f,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=dk(r),a=function(u,f,c){var d=o(u),y=l(u,f),w,b;return y?y.value=c:(d.last=y={index:b=CL(f,!0),key:f,value:c,previous:w=d.last,next:void 0,removed:!1},d.first||(d.first=y),w&&(w.next=y),Mg?d.size++:u.size++,b!=="F"&&(d.index[b]=y)),u},l=function(u,f){var c=o(u),d=CL(f),y;if(d!=="F")return c.index[d];for(y=c.first;y;y=y.next)if(y.key==f)return y};return OL(s,{clear:function(){for(var f=this,c=o(f),d=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete d[y.index],y=y.next;c.first=c.last=void 0,Mg?c.size=0:f.size=0},delete:function(u){var f=this,c=o(f),d=l(f,u);if(d){var y=d.next,w=d.previous;delete c.index[d.index],d.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==d&&(c.first=y),c.last==d&&(c.last=w),Mg?c.size--:f.size--}return!!d},forEach:function(f){for(var c=o(this),d=Sqe(f,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(d(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(f){return!!l(this,f)}}),OL(s,t?{get:function(f){var c=l(this,f);return c&&c.value},set:function(f,c){return a(this,f===0?0:f,c)}}:{add:function(f){return a(this,f=f===0?0:f,f)}}),Mg&&Eqe(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=dk(r),s=dk(n);Aqe(e,r,function(o,a){PL(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,m1(void 0,!0)):a=="keys"?m1(l.key,!1):a=="values"?m1(l.value,!1):m1([l.key,l.value],!1)},t?"entries":"values",!t,!0),Oqe(r)}},Cqe=lX,Pqe=cX;Cqe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Pqe);var Nqe=Kr,Rqe=Nqe.Map,Dqe=Rqe,Bqe=Dqe;(function(e){e.exports=Bqe})(DWe);var fX=Vt(WO),qO={},Mqe={get exports(){return qO},set exports(e){qO=e}},Lqe=Nt,Fqe=Bv.some,jqe=eb,zqe=jqe("some");Lqe({target:"Array",proto:!0,forced:!zqe},{some:function(r){return Fqe(this,r,arguments.length>1?arguments[1]:void 0)}});var Hqe=Kn,Uqe=Hqe("Array").some,Wqe=on,qqe=Uqe,pk=Array.prototype,Kqe=function(e){var r=e.some;return e===pk||Wqe(pk,e)&&r===pk.some?qqe:r},Vqe=Kqe,Gqe=Vqe;(function(e){e.exports=Gqe})(Mqe);var Yqe=Vt(qO),KO={},Zqe={get exports(){return KO},set exports(e){KO=e}},Xqe=Kn,Jqe=Xqe("Array").keys,Qqe=Jqe,eKe=Qqe,tKe=Iu,rKe=qn,nKe=on,iKe=eKe,vk=Array.prototype,sKe={DOMTokenList:!0,NodeList:!0},oKe=function(e){var r=e.keys;return e===vk||nKe(vk,e)&&r===vk.keys||rKe(sKe,tKe(e))?iKe:r};(function(e){e.exports=oKe})(Zqe);var zd=Vt(KO),VO={},aKe={get exports(){return VO},set exports(e){VO=e}},NL=kG,lKe=Math.floor,GO=function(e,r){var t=e.length,n=lKe(t/2);return t<8?uKe(e,r):cKe(e,GO(NL(e,0,n),r),GO(NL(e,n),r),r)},uKe=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},cKe=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},fKe=GO,hKe=Yc,RL=hKe.match(/firefox\/(\d+)/i),dKe=!!RL&&+RL[1],pKe=Yc,vKe=/MSIE|Trident/.test(pKe),gKe=Yc,DL=gKe.match(/AppleWebKit\/(\d+)\./),yKe=!!DL&&+DL[1],mKe=Nt,hX=Br,bKe=Rs,wKe=Ds,BL=so,$Ke=jY,ML=xl,z4=kr,_Ke=fKe,xKe=eb,LL=dKe,EKe=vKe,FL=Ov,jL=yKe,_c=[],zL=hX(_c.sort),SKe=hX(_c.push),kKe=z4(function(){_c.sort(void 0)}),TKe=z4(function(){_c.sort(null)}),IKe=xKe("sort"),dX=!z4(function(){if(FL)return FL<70;if(!(LL&&LL>3)){if(EKe)return!0;if(jL)return jL<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)_c.push({k:t+i,v:n})}for(_c.sort(function(s,o){return o.v-s.v}),i=0;i<_c.length;i++)t=_c[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),AKe=kKe||!TKe||!IKe||!dX,OKe=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:ML(r)>ML(t)?1:-1}};mKe({target:"Array",proto:!0,forced:AKe},{sort:function(r){r!==void 0&&bKe(r);var t=wKe(this);if(dX)return r===void 0?zL(t):zL(t,r);var n=[],i=BL(t),s,o;for(o=0;o<i;o++)o in t&&SKe(n,t[o]);for(_Ke(n,OKe(r)),s=BL(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)$Ke(t,o++);return t}});var CKe=Kn,PKe=CKe("Array").sort,NKe=on,RKe=PKe,gk=Array.prototype,DKe=function(e){var r=e.sort;return e===gk||NKe(gk,e)&&r===gk.sort?RKe:r},BKe=DKe,MKe=BKe;(function(e){e.exports=MKe})(aKe);var YO=Vt(VO),ZO={},LKe={get exports(){return ZO},set exports(e){ZO=e}},FKe=Kn,jKe=FKe("Array").values,zKe=jKe,HKe=zKe,UKe=Iu,WKe=qn,qKe=on,KKe=HKe,yk=Array.prototype,VKe={DOMTokenList:!0,NodeList:!0},GKe=function(e){var r=e.values;return e===yk||qKe(yk,e)&&r===yk.values||WKe(VKe,UKe(e))?KKe:r};(function(e){e.exports=GKe})(LKe);var HL=Vt(ZO),XO={},YKe={get exports(){return XO},set exports(e){XO=e}};(function(e){e.exports=hY})(YKe);var Tp=Vt(XO),JO={},ZKe={get exports(){return JO},set exports(e){JO=e}},XKe=Kn,JKe=XKe("Array").entries,QKe=JKe,eVe=QKe,tVe=Iu,rVe=qn,nVe=on,iVe=eVe,mk=Array.prototype,sVe={DOMTokenList:!0,NodeList:!0},oVe=function(e){var r=e.entries;return e===mk||nVe(mk,e)&&r===mk.entries||rVe(sVe,tVe(e))?iVe:r};(function(e){e.exports=oVe})(ZKe);var aVe=Vt(JO);let b1;const lVe=new Uint8Array(16);function uVe(){if(!b1&&(b1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b1(lVe)}const Ei=[];for(let e=0;e<256;++e)Ei.push((e+256).toString(16).slice(1));function cVe(e,r=0){return(Ei[e[r+0]]+Ei[e[r+1]]+Ei[e[r+2]]+Ei[e[r+3]]+"-"+Ei[e[r+4]]+Ei[e[r+5]]+"-"+Ei[e[r+6]]+Ei[e[r+7]]+"-"+Ei[e[r+8]]+Ei[e[r+9]]+"-"+Ei[e[r+10]]+Ei[e[r+11]]+Ei[e[r+12]]+Ei[e[r+13]]+Ei[e[r+14]]+Ei[e[r+15]]).toLowerCase()}const fVe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var UL={randomUUID:fVe};function hVe(e,r,t){if(UL.randomUUID&&!r&&!e)return UL.randomUUID();e=e||{};const n=e.random||(e.rng||uVe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return cVe(n)}function WL(e){return typeof e=="string"||typeof e=="number"}var dVe=function(){function e(r){Q_(this,e),An(this,"delay",void 0),An(this,"max",void 0),An(this,"_queue",[]),An(this,"_timeout",null),An(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(r)}return vx(e,[{key:"setOptions",value:function(t){t&&typeof t.delay<"u"&&(this.delay=t.delay),t&&typeof t.max<"u"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,n=this._extended.methods,i=0;i<n.length;i++){var s=n[i];s.original?t[s.name]=s.original:delete t[s.name]}this._extended=null}}},{key:"replace",value:function(t,n){var i=this,s=t[n];if(!s)throw new Error("Method "+n+" undefined");t[n]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=n9e(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,n;Ih(t=zY(n=this._queue).call(n,0)).call(t,function(i){i.fn.apply(i.context||i.fn,i.args||[])})}}],[{key:"extend",value:function(t,n){var i=new e(n);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var s=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];s.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:s},i}}]),e}(),pVe=function(){function e(){Q_(this,e),An(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),An(this,"subscribe",e.prototype.on),An(this,"unsubscribe",e.prototype.off)}return vx(e,[{key:"_trigger",value:function(t,n,i){var s,o;if(t==="*")throw new Error("Cannot trigger event *");Ih(s=mx(o=[]).call(o,Ts(this._subscribers[t]),Ts(this._subscribers["*"]))).call(s,function(a){a(t,n,i??null)})}},{key:"on",value:function(t,n){typeof n=="function"&&this._subscribers[t].push(n)}},{key:"off",value:function(t,n){var i;this._subscribers[t]=op(i=this._subscribers[t]).call(i,function(s){return s!==n})}}]),e}(),QO={},vVe={get exports(){return QO},set exports(e){QO=e}},gVe=lX,yVe=cX;gVe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},yVe);var mVe=Kr,bVe=mVe.Set,wVe=bVe,$Ve=wVe;(function(e){e.exports=$Ve})(vVe);var bk=Vt(QO),eC={},_Ve={get exports(){return eC},set exports(e){eC=e}},tC={},xVe={get exports(){return tC},set exports(e){tC=e}},EVe=w4,SVe=EVe,kVe=SVe,TVe=kVe,IVe=TVe,AVe=IVe,OVe=AVe,CVe=OVe;(function(e){e.exports=CVe})(xVe);(function(e){e.exports=tC})(_Ve);var wk=Vt(eC),pX;function tl(e,r){var t=typeof yx<"u"&&rb(e)||e["@@iterator"];if(!t){if(Ks(e)||(t=PVe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function PVe(e,r){var t;if(e){if(typeof e=="string")return qL(e,r);var n=bx(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return $4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qL(e,r)}}function qL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}pX=Tp;var KL=function(){function e(r){Q_(this,e),An(this,"_pairs",void 0),this._pairs=r}return vx(e,[{key:pX,value:xs.mark(function r(){var t,n,i,s,o;return xs.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=tl(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=$s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:xs.mark(function r(){var t,n,i,s,o;return xs.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=tl(this._pairs),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=9;break}return i=$s(n.value,2),s=i[0],o=i[1],l.next=7,[s,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:xs.mark(function r(){var t,n,i,s;return xs.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=tl(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=$s(n.value,1),s=i[0],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:xs.mark(function r(){var t,n,i,s;return xs.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=tl(this._pairs),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=9;break}return i=$s(n.value,2),s=i[1],a.next=7,s;case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.e(a.t0);case 14:return a.prev=14,t.f(),a.finish(14);case 17:case"end":return a.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return ga(t=Ts(this._pairs)).call(t,function(n){return n[0]})}},{key:"toItemArray",value:function(){var t;return ga(t=Ts(this._pairs)).call(t,function(n){return n[1]})}},{key:"toEntryArray",value:function(){return Ts(this._pairs)}},{key:"toObjectMap",value:function(){var t=NFe(null),n=tl(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=$s(i.value,2),o=s[0],a=s[1];t[o]=a}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"toMap",value:function(){return new fX(this._pairs)}},{key:"toIdSet",value:function(){return new bk(this.toIdArray())}},{key:"toItemSet",value:function(){return new bk(this.toItemArray())}},{key:"cache",value:function(){return new e(Ts(this._pairs))}},{key:"distinct",value:function(t){var n=new bk,i=tl(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=$s(s.value,2),a=o[0],l=o[1];n.add(t(l,a))}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e(An({},Tp,xs.mark(function i(){var s,o,a,l,u;return xs.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=tl(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=10;break}if(a=$s(o.value,2),l=a[0],u=a[1],!t(u,l)){c.next=8;break}return c.next=8,[l,u];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),s.e(c.t0);case 15:return c.prev=15,s.f(),c.finish(15);case 18:case"end":return c.stop()}},i,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var n=tl(this._pairs),i;try{for(n.s();!(i=n.n()).done;){var s=$s(i.value,2),o=s[0],a=s[1];t(a,o)}}catch(l){n.e(l)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e(An({},Tp,xs.mark(function i(){var s,o,a,l,u;return xs.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=tl(n),c.prev=1,s.s();case 3:if((o=s.n()).done){c.next=9;break}return a=$s(o.value,2),l=a[0],u=a[1],c.next=7,[l,t(u,l)];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),s.e(c.t0);case 14:return c.prev=14,s.f(),c.finish(14);case 17:case"end":return c.stop()}},i,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var n=wk(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=$s(i.value,2),l=a[0],u=a[1],f=t(u,l);f>o&&(o=f,s=u)}return s}},{key:"min",value:function(t){var n=wk(this._pairs),i=n.next();if(i.done)return null;for(var s=i.value[1],o=t(i.value[1],i.value[0]);!(i=n.next()).done;){var a=$s(i.value,2),l=a[0],u=a[1],f=t(u,l);f<o&&(o=f,s=u)}return s}},{key:"reduce",value:function(t,n){var i=tl(this._pairs),s;try{for(i.s();!(s=i.n()).done;){var o=$s(s.value,2),a=o[0],l=o[1];n=t(n,l,a)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"sort",value:function(t){var n=this;return new e(An({},Tp,function(){var i;return wk(YO(i=Ts(n._pairs)).call(i,function(s,o){var a=$s(s,2),l=a[0],u=a[1],f=$s(o,2),c=f[0],d=f[1];return t(u,d,l,c)}))}))}}]),e}();function VL(e,r){var t=x4(e);if(o7){var n=o7(e);r&&(n=op(n).call(n,function(i){return AY(e,i).enumerable})),t.push.apply(t,n)}return t}function GL(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?Ih(t=VL(Object(i),!0)).call(t,function(s){An(e,s,i[s])}):a7?L6e(e,a7(i)):Ih(n=VL(Object(i))).call(n,function(s){j6e(e,s,AY(i,s))})}return e}function $k(e,r){var t=typeof yx<"u"&&rb(e)||e["@@iterator"];if(!t){if(Ks(e)||(t=NVe(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function NVe(e,r){var t;if(e){if(typeof e=="string")return YL(e,r);var n=bx(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return $4(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YL(e,r)}}function YL(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function RVe(e){var r=DVe();return function(){var n=x$(e),i;if(r){var s=x$(this).constructor;i=fw(n,arguments,s)}else i=n.apply(this,arguments);return Jje(this,i)}}function DVe(){if(typeof Reflect>"u"||!fw||fw.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(fw(Boolean,[],function(){})),!0}catch{return!1}}function BVe(e,r){return e[r]==null&&(e[r]=hVe()),e}var xa=function(e){Xje(t,e);var r=RVe(t);function t(n,i){var s;return Q_(this,t),s=r.call(this),An(Of(s),"flush",void 0),An(Of(s),"length",void 0),An(Of(s),"_options",void 0),An(Of(s),"_data",void 0),An(Of(s),"_idProp",void 0),An(Of(s),"_queue",null),n&&!Ks(n)&&(i=n,n=[]),s._options=i||{},s._data=new fX,s.length=0,s._idProp=s._options.fieldId||"id",n&&n.length&&s.add(n),s.setOptions(i),s}return vx(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=dVe.extend(this,{replace:["add","update","remove"]})),i.queue&&Ai(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,s){var o=this,a=[],l;if(Ks(i)){var u=ga(i).call(i,function(d){return d[o._idProp]});if(Yqe(u).call(u,function(d){return o._data.has(d)}))throw new Error("A duplicate id was found in the parameter array.");for(var f=0,c=i.length;f<c;f++)l=this._addItem(i[f]),a.push(l)}else if(i&&Ai(i)==="object")l=this._addItem(i),a.push(l);else throw new Error("Unknown dataType");return a.length&&this._trigger("add",{items:a},s),a}},{key:"update",value:function(i,s){var o=this,a=[],l=[],u=[],f=[],c=this._idProp,d=function(_){var A=_[c];if(A!=null&&o._data.has(A)){var x=_,I=N7e({},o._data.get(A)),O=o._updateItem(x);l.push(O),f.push(x),u.push(I)}else{var C=o._addItem(_);a.push(C)}};if(Ks(i))for(var y=0,w=i.length;y<w;y++)i[y]&&Ai(i[y])==="object"?d(i[y]):console.warn("Ignoring input item, which is not an object at index "+y);else if(i&&Ai(i)==="object")d(i);else throw new Error("Unknown dataType");if(a.length&&this._trigger("add",{items:a},s),l.length){var b={items:l,oldData:u,data:f};this._trigger("update",b,s)}return mx(a).call(a,l)}},{key:"updateOnly",value:function(i,s){var o,a=this;Ks(i)||(i=[i]);var l=ga(o=ga(i).call(i,function(f){var c=a._data.get(f[a._idProp]);if(c==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:c,update:f}})).call(o,function(f){var c=f.oldData,d=f.update,y=c[a._idProp],w=aje(c,d);return a._data.set(y,w),{id:y,oldData:c,updatedData:w}});if(l.length){var u={items:ga(l).call(l,function(f){return f.id}),oldData:ga(l).call(l,function(f){return f.oldData}),data:ga(l).call(l,function(f){return f.updatedData})};return this._trigger("update",u,s),u.items}else return[]}},{key:"get",value:function(i,s){var o=void 0,a=void 0,l=void 0;WL(i)?(o=i,l=s):Ks(i)?(a=i,l=s):l=i;var u=l&&l.returnType==="Object"?"Object":"Array",f=l&&op(l),c=[],d=void 0,y=void 0,w=void 0;if(o!=null)d=this._data.get(o),d&&f&&!f(d)&&(d=void 0);else if(a!=null)for(var b=0,T=a.length;b<T;b++)d=this._data.get(a[b]),d!=null&&(!f||f(d))&&c.push(d);else{var _;y=Ts(zd(_=this._data).call(_));for(var A=0,x=y.length;A<x;A++)w=y[A],d=this._data.get(w),d!=null&&(!f||f(d))&&c.push(d)}if(l&&l.order&&o==null&&this._sort(c,l.order),l&&l.fields){var I=l.fields;if(o!=null&&d!=null)d=this._filterFields(d,I);else for(var O=0,C=c.length;O<C;O++)c[O]=this._filterFields(c[O],I)}if(u=="Object"){for(var g={},M=0,B=c.length;M<B;M++){var L=c[M],q=L[this._idProp];g[q]=L}return g}else if(o!=null){var Q;return(Q=d)!==null&&Q!==void 0?Q:null}else return c}},{key:"getIds",value:function(i){var s=this._data,o=i&&op(i),a=i&&i.order,l=Ts(zd(s).call(s)),u=[];if(o)if(a){for(var f=[],c=0,d=l.length;c<d;c++){var y=l[c],w=this._data.get(y);w!=null&&o(w)&&f.push(w)}this._sort(f,a);for(var b=0,T=f.length;b<T;b++)u.push(f[b][this._idProp])}else for(var _=0,A=l.length;_<A;_++){var x=l[_],I=this._data.get(x);I!=null&&o(I)&&u.push(I[this._idProp])}else if(a){for(var O=[],C=0,g=l.length;C<g;C++){var M=l[C];O.push(s.get(M))}this._sort(O,a);for(var B=0,L=O.length;B<L;B++)u.push(O[B][this._idProp])}else for(var q=0,Q=l.length;q<Q;q++){var re=l[q],Z=s.get(re);Z!=null&&u.push(Z[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,s){var o=s&&op(s),a=this._data,l=Ts(zd(a).call(a));if(s&&s.order)for(var u=this.get(s),f=0,c=u.length;f<c;f++){var d=u[f],y=d[this._idProp];i(d,y)}else for(var w=0,b=l.length;w<b;w++){var T=l[w],_=this._data.get(T);_!=null&&(!o||o(_))&&i(_,T)}}},{key:"map",value:function(i,s){for(var o=s&&op(s),a=[],l=this._data,u=Ts(zd(l).call(l)),f=0,c=u.length;f<c;f++){var d=u[f],y=this._data.get(d);y!=null&&(!o||o(y))&&a.push(i(y,d))}return s&&s.order&&this._sort(a,s.order),a}},{key:"_filterFields",value:function(i,s){var o;return i&&hDe(o=Ks(s)?s:x4(s)).call(o,function(a,l){return a[l]=i[l],a},{})}},{key:"_sort",value:function(i,s){if(typeof s=="string"){var o=s;YO(i).call(i,function(a,l){var u=a[o],f=l[o];return u>f?1:u<f?-1:0})}else if(typeof s=="function")YO(i).call(i,s);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,s){for(var o=[],a=[],l=Ks(i)?i:[i],u=0,f=l.length;u<f;u++){var c=this._remove(l[u]);if(c){var d=c[this._idProp];d!=null&&(o.push(d),a.push(c))}}return o.length&&this._trigger("remove",{items:o,oldData:a},s),o}},{key:"_remove",value:function(i){var s;if(WL(i)?s=i:i&&Ai(i)==="object"&&(s=i[this._idProp]),s!=null&&this._data.has(s)){var o=this._data.get(s)||null;return this._data.delete(s),--this.length,o}return null}},{key:"clear",value:function(i){for(var s,o=Ts(zd(s=this._data).call(s)),a=[],l=0,u=o.length;l<u;l++)a.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:a},i),o}},{key:"max",value:function(i){var s,o=null,a=null,l=$k(HL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=f[i];typeof c=="number"&&(a==null||c>a)&&(o=f,a=c)}}catch(d){l.e(d)}finally{l.f()}return o||null}},{key:"min",value:function(i){var s,o=null,a=null,l=$k(HL(s=this._data).call(s)),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=f[i];typeof c=="number"&&(a==null||c<a)&&(o=f,a=c)}}catch(d){l.e(d)}finally{l.f()}return o||null}},{key:"distinct",value:function(i){for(var s=this._data,o=Ts(zd(s).call(s)),a=[],l=0,u=0,f=o.length;u<f;u++){for(var c=o[u],d=s.get(c),y=d[i],w=!1,b=0;b<l;b++)if(a[b]==y){w=!0;break}!w&&y!==void 0&&(a[l]=y,l++)}return a}},{key:"_addItem",value:function(i){var s=BVe(i,this._idProp),o=s[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,s),++this.length,o}},{key:"_updateItem",value:function(i){var s=i[this._idProp];if(s==null)throw new Error("Cannot update item: item has no id (item: "+FFe(i)+")");var o=this._data.get(s);if(!o)throw new Error("Cannot update item: no item with id "+s+" found");return this._data.set(s,GL(GL({},o),i)),s}},{key:"stream",value:function(i){if(i){var s=this._data;return new KL(An({},Tp,xs.mark(function a(){var l,u,f,c;return xs.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:l=$k(i),y.prev=1,l.s();case 3:if((u=l.n()).done){y.next=11;break}if(f=u.value,c=s.get(f),c==null){y.next=9;break}return y.next=9,[f,c];case 9:y.next=3;break;case 11:y.next=16;break;case 13:y.prev=13,y.t0=y.catch(1),l.e(y.t0);case 16:return y.prev=16,l.f(),y.finish(16);case 19:case"end":return y.stop()}},a,null,[[1,13,16,19]])})))}else{var o;return new KL(An({},Tp,mY(o=aVe(this._data)).call(o,this._data)))}}}]),t}(pVe);function MVe(e,r){return Ai(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof Ih(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ga(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function vX(e,r){return Ai(r)==="object"&&r!==null&&e===r.idProp&&typeof Ih(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof ga(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&MVe(e,r.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.6
 * @date    2023-03-23T21:31:19.223Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var rC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nC={},LVe={get exports(){return nC},set exports(e){nC=e}},w1=function(e){return e&&e.Math==Math&&e},Vn=w1(typeof globalThis=="object"&&globalThis)||w1(typeof window=="object"&&window)||w1(typeof self=="object"&&self)||w1(typeof rC=="object"&&rC)||function(){return this}()||Function("return this")(),Tr=function(e){try{return!!e()}catch{return!0}},FVe=Tr,cb=!FVe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),jVe=cb,gX=Function.prototype,ZL=gX.apply,XL=gX.call,fb=typeof Reflect=="object"&&Reflect.apply||(jVe?XL.bind(ZL):function(){return XL.apply(ZL,arguments)}),yX=cb,mX=Function.prototype,iC=mX.call,zVe=yX&&mX.bind.bind(iC,iC),Ir=yX?zVe:function(e){return function(){return iC.apply(e,arguments)}},bX=Ir,HVe=bX({}.toString),UVe=bX("".slice),Ou=function(e){return UVe(HVe(e),8,-1)},WVe=Ou,qVe=Ir,H4=function(e){if(WVe(e)==="Function")return qVe(e)},sC=typeof document=="object"&&document.all,KVe=typeof sC>"u"&&sC!==void 0,wX={all:sC,IS_HTMLDDA:KVe},$X=wX,VVe=$X.all,bi=$X.IS_HTMLDDA?function(e){return typeof e=="function"||e===VVe}:function(e){return typeof e=="function"},zv={},GVe=Tr,ni=!GVe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),YVe=cb,$1=Function.prototype.call,oo=YVe?$1.bind($1):function(){return $1.apply($1,arguments)},hb={},_X={}.propertyIsEnumerable,xX=Object.getOwnPropertyDescriptor,ZVe=xX&&!_X.call({1:2},1);hb.f=ZVe?function(r){var t=xX(this,r);return!!t&&t.enumerable}:_X;var db=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},XVe=Ir,JVe=Tr,QVe=Ou,_k=Object,eGe=XVe("".split),Ex=JVe(function(){return!_k("z").propertyIsEnumerable(0)})?function(e){return QVe(e)=="String"?eGe(e,""):_k(e)}:_k,pb=function(e){return e==null},tGe=pb,rGe=TypeError,vb=function(e){if(tGe(e))throw rGe("Can't call method on "+e);return e},nGe=Ex,iGe=vb,Da=function(e){return nGe(iGe(e))},JL=bi,EX=wX,sGe=EX.all,wi=EX.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:JL(e)||e===sGe}:function(e){return typeof e=="object"?e!==null:JL(e)},xr={},xk=xr,Ek=Vn,oGe=bi,QL=function(e){return oGe(e)?e:void 0},Xo=function(e,r){return arguments.length<2?QL(xk[e])||QL(Ek[e]):xk[e]&&xk[e][r]||Ek[e]&&Ek[e][r]},aGe=Ir,Bn=aGe({}.isPrototypeOf),gb=typeof navigator<"u"&&String(navigator.userAgent)||"",SX=Vn,Sk=gb,eF=SX.process,tF=SX.Deno,rF=eF&&eF.versions||tF&&tF.version,nF=rF&&rF.v8,ya,I$;nF&&(ya=nF.split("."),I$=ya[0]>0&&ya[0]<4?1:+(ya[0]+ya[1]));!I$&&Sk&&(ya=Sk.match(/Edge\/(\d+)/),(!ya||ya[1]>=74)&&(ya=Sk.match(/Chrome\/(\d+)/),ya&&(I$=+ya[1])));var yb=I$,iF=yb,lGe=Tr,Hv=!!Object.getOwnPropertySymbols&&!lGe(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&iF&&iF<41}),uGe=Hv,kX=uGe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",cGe=Xo,fGe=bi,hGe=Bn,dGe=kX,pGe=Object,mb=dGe?function(e){return typeof e=="symbol"}:function(e){var r=cGe("Symbol");return fGe(r)&&hGe(r.prototype,pGe(e))},vGe=String,Uv=function(e){try{return vGe(e)}catch{return"Object"}},gGe=bi,yGe=Uv,mGe=TypeError,Gh=function(e){if(gGe(e))return e;throw mGe(yGe(e)+" is not a function")},bGe=Gh,wGe=pb,U4=function(e,r){var t=e[r];return wGe(t)?void 0:bGe(t)},kk=oo,Tk=bi,Ik=wi,$Ge=TypeError,_Ge=function(e,r){var t,n;if(r==="string"&&Tk(t=e.toString)&&!Ik(n=kk(t,e))||Tk(t=e.valueOf)&&!Ik(n=kk(t,e))||r!=="string"&&Tk(t=e.toString)&&!Ik(n=kk(t,e)))return n;throw $Ge("Can't convert object to primitive value")},Uc={},xGe={get exports(){return Uc},set exports(e){Uc=e}},sF=Vn,EGe=Object.defineProperty,SGe=function(e,r){try{EGe(sF,e,{value:r,configurable:!0,writable:!0})}catch{sF[e]=r}return r},kGe=Vn,TGe=SGe,oF="__core-js_shared__",IGe=kGe[oF]||TGe(oF,{}),W4=IGe,aF=W4;(xGe.exports=function(e,r){return aF[e]||(aF[e]=r!==void 0?r:{})})("versions",[]).push({version:"3.29.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var AGe=vb,OGe=Object,ao=function(e){return OGe(AGe(e))},CGe=Ir,PGe=ao,NGe=CGe({}.hasOwnProperty),$i=Object.hasOwn||function(r,t){return NGe(PGe(r),t)},RGe=Ir,DGe=0,BGe=Math.random(),MGe=RGe(1 .toString),Sx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+MGe(++DGe+BGe,36)},LGe=Vn,FGe=Uc,lF=$i,jGe=Sx,zGe=Hv,HGe=kX,fp=LGe.Symbol,Ak=FGe("wks"),UGe=HGe?fp.for||fp:fp&&fp.withoutSetter||jGe,Mn=function(e){return lF(Ak,e)||(Ak[e]=zGe&&lF(fp,e)?fp[e]:UGe("Symbol."+e)),Ak[e]},WGe=oo,uF=wi,cF=mb,qGe=U4,KGe=_Ge,VGe=Mn,GGe=TypeError,YGe=VGe("toPrimitive"),ZGe=function(e,r){if(!uF(e)||cF(e))return e;var t=qGe(e,YGe),n;if(t){if(r===void 0&&(r="default"),n=WGe(t,e,r),!uF(n)||cF(n))return n;throw GGe("Can't convert object to primitive value")}return r===void 0&&(r="number"),KGe(e,r)},XGe=ZGe,JGe=mb,kx=function(e){var r=XGe(e,"string");return JGe(r)?r:r+""},QGe=Vn,fF=wi,oC=QGe.document,eYe=fF(oC)&&fF(oC.createElement),TX=function(e){return eYe?oC.createElement(e):{}},tYe=ni,rYe=Tr,nYe=TX,IX=!tYe&&!rYe(function(){return Object.defineProperty(nYe("div"),"a",{get:function(){return 7}}).a!=7}),iYe=ni,sYe=oo,oYe=hb,aYe=db,lYe=Da,uYe=kx,cYe=$i,fYe=IX,hF=Object.getOwnPropertyDescriptor;zv.f=iYe?hF:function(r,t){if(r=lYe(r),t=uYe(t),fYe)try{return hF(r,t)}catch{}if(cYe(r,t))return aYe(!sYe(oYe.f,r,t),r[t])};var hYe=Tr,dYe=bi,pYe=/#|\.prototype\./,bb=function(e,r){var t=gYe[vYe(e)];return t==mYe?!0:t==yYe?!1:dYe(r)?hYe(r):!!r},vYe=bb.normalize=function(e){return String(e).replace(pYe,".").toLowerCase()},gYe=bb.data={},yYe=bb.NATIVE="N",mYe=bb.POLYFILL="P",bYe=bb,dF=H4,wYe=Gh,$Ye=cb,_Ye=dF(dF.bind),wb=function(e,r){return wYe(e),r===void 0?e:$Ye?_Ye(e,r):function(){return e.apply(r,arguments)}},Jo={},xYe=ni,EYe=Tr,AX=xYe&&EYe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),SYe=wi,kYe=String,TYe=TypeError,lo=function(e){if(SYe(e))return e;throw TYe(kYe(e)+" is not an object")},IYe=ni,AYe=IX,OYe=AX,_1=lo,pF=kx,CYe=TypeError,Ok=Object.defineProperty,PYe=Object.getOwnPropertyDescriptor,Ck="enumerable",Pk="configurable",Nk="writable";Jo.f=IYe?OYe?function(r,t,n){if(_1(r),t=pF(t),_1(n),typeof r=="function"&&t==="prototype"&&"value"in n&&Nk in n&&!n[Nk]){var i=PYe(r,t);i&&i[Nk]&&(r[t]=n.value,n={configurable:Pk in n?n[Pk]:i[Pk],enumerable:Ck in n?n[Ck]:i[Ck],writable:!1})}return Ok(r,t,n)}:Ok:function(r,t,n){if(_1(r),t=pF(t),_1(n),AYe)try{return Ok(r,t,n)}catch{}if("get"in n||"set"in n)throw CYe("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var NYe=ni,RYe=Jo,DYe=db,Wv=NYe?function(e,r,t){return RYe.f(e,r,DYe(1,t))}:function(e,r,t){return e[r]=t,e},x1=Vn,BYe=fb,MYe=H4,LYe=bi,FYe=zv.f,jYe=bYe,Hd=xr,zYe=wb,Ud=Wv,vF=$i,HYe=function(e){var r=function(t,n,i){if(this instanceof r){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return BYe(e,this,arguments)};return r.prototype=e.prototype,r},zt=function(e,r){var t=e.target,n=e.global,i=e.stat,s=e.proto,o=n?x1:i?x1[t]:(x1[t]||{}).prototype,a=n?Hd:Hd[t]||Ud(Hd,t,{})[t],l=a.prototype,u,f,c,d,y,w,b,T,_;for(d in r)u=jYe(n?d:t+(i?".":"#")+d,e.forced),f=!u&&o&&vF(o,d),w=a[d],f&&(e.dontCallGetSet?(_=FYe(o,d),b=_&&_.value):b=o[d]),y=f&&b?b:r[d],!(f&&typeof w==typeof y)&&(e.bind&&f?T=zYe(y,x1):e.wrap&&f?T=HYe(y):s&&LYe(y)?T=MYe(y):T=y,(e.sham||y&&y.sham||w&&w.sham)&&Ud(T,"sham",!0),Ud(a,d,T),s&&(c=t+"Prototype",vF(Hd,c)||Ud(Hd,c,{}),Ud(Hd[c],d,y),e.real&&l&&(u||!l[d])&&Ud(l,d,y)))},UYe=Math.ceil,WYe=Math.floor,qYe=Math.trunc||function(r){var t=+r;return(t>0?WYe:UYe)(t)},KYe=qYe,Tx=function(e){var r=+e;return r!==r||r===0?0:KYe(r)},VYe=Tx,GYe=Math.max,YYe=Math.min,$b=function(e,r){var t=VYe(e);return t<0?GYe(t+r,0):YYe(t,r)},ZYe=Tx,XYe=Math.min,JYe=function(e){return e>0?XYe(ZYe(e),9007199254740991):0},QYe=JYe,Ba=function(e){return QYe(e.length)},eZe=Da,tZe=$b,rZe=Ba,gF=function(e){return function(r,t,n){var i=eZe(r),s=rZe(i),o=tZe(n,s),a;if(e&&t!=t){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===t)return e||o||0;return!e&&-1}},q4={includes:gF(!0),indexOf:gF(!1)},_b={},nZe=Ir,Rk=$i,iZe=Da,sZe=q4.indexOf,oZe=_b,yF=nZe([].push),OX=function(e,r){var t=iZe(e),n=0,i=[],s;for(s in t)!Rk(oZe,s)&&Rk(t,s)&&yF(i,s);for(;r.length>n;)Rk(t,s=r[n++])&&(~sZe(i,s)||yF(i,s));return i},K4=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],aZe=OX,lZe=K4,xb=Object.keys||function(r){return aZe(r,lZe)},Eb={};Eb.f=Object.getOwnPropertySymbols;var mF=ni,uZe=Ir,cZe=oo,fZe=Tr,Dk=xb,hZe=Eb,dZe=hb,pZe=ao,vZe=Ex,Wd=Object.assign,bF=Object.defineProperty,gZe=uZe([].concat),yZe=!Wd||fZe(function(){if(mF&&Wd({b:1},Wd(bF({},"a",{enumerable:!0,get:function(){bF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(i){r[i]=i}),Wd({},e)[t]!=7||Dk(Wd({},r)).join("")!=n})?function(r,t){for(var n=pZe(r),i=arguments.length,s=1,o=hZe.f,a=dZe.f;i>s;)for(var l=vZe(arguments[s++]),u=o?gZe(Dk(l),o(l)):Dk(l),f=u.length,c=0,d;f>c;)d=u[c++],(!mF||cZe(a,l,d))&&(n[d]=l[d]);return n}:Wd,mZe=zt,wF=yZe;mZe({target:"Object",stat:!0,arity:2,forced:Object.assign!==wF},{assign:wF});var bZe=xr,wZe=bZe.Object.assign,$Ze=wZe,_Ze=$Ze;(function(e){e.exports=_Ze})(LVe);var Un=Pt(nC),aC={},xZe={get exports(){return aC},set exports(e){aC=e}},EZe=Ir,Ix=EZe([].slice),CX=Ir,SZe=Gh,kZe=wi,TZe=$i,$F=Ix,IZe=cb,PX=Function,AZe=CX([].concat),OZe=CX([].join),Bk={},CZe=function(e,r,t){if(!TZe(Bk,r)){for(var n=[],i=0;i<r;i++)n[i]="a["+i+"]";Bk[r]=PX("C,a","return new C("+OZe(n,",")+")")}return Bk[r](e,t)},NX=IZe?PX.bind:function(r){var t=SZe(this),n=t.prototype,i=$F(arguments,1),s=function(){var a=AZe(i,$F(arguments));return this instanceof s?CZe(t,a.length,a):t.apply(r,a)};return kZe(n)&&(s.prototype=n),s},PZe=zt,_F=NX;PZe({target:"Function",proto:!0,forced:Function.bind!==_F},{bind:_F});var NZe=xr,_i=function(e){return NZe[e+"Prototype"]},RZe=_i,DZe=RZe("Function").bind,BZe=Bn,MZe=DZe,Mk=Function.prototype,LZe=function(e){var r=e.bind;return e===Mk||BZe(Mk,e)&&r===Mk.bind?MZe:r},FZe=LZe,RX=FZe;(function(e){e.exports=RX})(xZe);var nt=Pt(aC);function V4(e,r,t,n){e.beginPath(),e.arc(r,t,n,0,2*Math.PI,!1),e.closePath()}function jZe(e,r,t,n){e.beginPath(),e.rect(r-n,t-n,n*2,n*2),e.closePath()}function zZe(e,r,t,n){e.beginPath(),n*=1.15,t+=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t-(a-o)),e.lineTo(r+s,t+o),e.lineTo(r-s,t+o),e.lineTo(r,t-(a-o)),e.closePath()}function HZe(e,r,t,n){e.beginPath(),n*=1.15,t-=.275*n;var i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);e.moveTo(r,t+(a-o)),e.lineTo(r+s,t-o),e.lineTo(r-s,t-o),e.lineTo(r,t+(a-o)),e.closePath()}function UZe(e,r,t,n){e.beginPath(),n*=.82,t+=.1*n;for(var i=0;i<10;i++){var s=i%2===0?n*1.3:n*.5;e.lineTo(r+s*Math.sin(i*2*Math.PI/10),t-s*Math.cos(i*2*Math.PI/10))}e.closePath()}function WZe(e,r,t,n){e.beginPath(),e.lineTo(r,t+n),e.lineTo(r+n,t),e.lineTo(r,t-n),e.lineTo(r-n,t),e.closePath()}function DX(e,r,t,n,i,s){var o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),e.beginPath(),e.moveTo(r+s,t),e.lineTo(r+n-s,t),e.arc(r+n-s,t+s,s,o*270,o*360,!1),e.lineTo(r+n,t+i-s),e.arc(r+n-s,t+i-s,s,0,o*90,!1),e.lineTo(r+s,t+i),e.arc(r+s,t+i-s,s,o*90,o*180,!1),e.lineTo(r,t+s),e.arc(r+s,t+s,s,o*180,o*270,!1),e.closePath()}function lC(e,r,t,n,i){var s=.5522848,o=n/2*s,a=i/2*s,l=r+n,u=t+i,f=r+n/2,c=t+i/2;e.beginPath(),e.moveTo(r,c),e.bezierCurveTo(r,c-a,f-o,t,f,t),e.bezierCurveTo(f+o,t,l,c-a,l,c),e.bezierCurveTo(l,c+a,f+o,u,f,u),e.bezierCurveTo(f-o,u,r,c+a,r,c),e.closePath()}function BX(e,r,t,n,i){var s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,f=a/2*l,c=r+o,d=t+a,y=r+o/2,w=t+a/2,b=t+(i-a/2),T=t+i;e.beginPath(),e.moveTo(c,w),e.bezierCurveTo(c,w+f,y+u,d,y,d),e.bezierCurveTo(y-u,d,r,w+f,r,w),e.bezierCurveTo(r,w-f,y-u,t,y,t),e.bezierCurveTo(y+u,t,c,w-f,c,w),e.lineTo(c,b),e.bezierCurveTo(c,b+f,y+u,T,y,T),e.bezierCurveTo(y-u,T,r,b+f,r,b),e.lineTo(r,w)}function MX(e,r,t,n,i,s){e.beginPath(),e.moveTo(r,t);for(var o=s.length,a=n-r,l=i-t,u=l/a,f=Math.sqrt(a*a+l*l),c=0,d=!0,y=0,w=+s[0];f>=.1;)w=+s[c++%o],w>f&&(w=f),y=Math.sqrt(w*w/(1+u*u)),y=a<0?-y:y,r+=y,t+=u*y,d===!0?e.lineTo(r,t):e.moveTo(r,t),f-=w,d=!d}function qZe(e,r,t,n){e.beginPath();var i=6,s=Math.PI*2/i;e.moveTo(r+n,t);for(var o=1;o<i;o++)e.lineTo(r+n*Math.cos(s*o),t+n*Math.sin(s*o));e.closePath()}var xF={circle:V4,dashedLine:MX,database:BX,diamond:WZe,ellipse:lC,ellipse_vis:lC,hexagon:qZe,roundRect:DX,square:jZe,star:UZe,triangle:zZe,triangleDown:HZe};function KZe(e){return Object.prototype.hasOwnProperty.call(xF,e)?xF[e]:function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(r,n)}}var uC={},VZe={get exports(){return uC},set exports(e){uC=e}};(function(e){e.exports=r;function r(n){if(n)return t(n)}function t(n){for(var i in r.prototype)n[i]=r.prototype[i];return n}r.prototype.on=r.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},r.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(VZe);var LX=uC,cC={},GZe={get exports(){return cC},set exports(e){cC=e}},YZe=Mn,ZZe=YZe("toStringTag"),FX={};FX[ZZe]="z";var G4=String(FX)==="[object z]",XZe=G4,JZe=bi,vw=Ou,QZe=Mn,eXe=QZe("toStringTag"),tXe=Object,rXe=vw(function(){return arguments}())=="Arguments",nXe=function(e,r){try{return e[r]}catch{}},Yh=XZe?vw:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=nXe(r=tXe(e),eXe))=="string"?t:rXe?vw(r):(n=vw(r))=="Object"&&JZe(r.callee)?"Arguments":n},iXe=Yh,sXe=String,El=function(e){if(iXe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return sXe(e)},Y4=Ir,oXe=Tx,aXe=El,lXe=vb,uXe=Y4("".charAt),EF=Y4("".charCodeAt),cXe=Y4("".slice),SF=function(e){return function(r,t){var n=aXe(lXe(r)),i=oXe(t),s=n.length,o,a;return i<0||i>=s?e?"":void 0:(o=EF(n,i),o<55296||o>56319||i+1===s||(a=EF(n,i+1))<56320||a>57343?e?uXe(n,i):o:e?cXe(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},fXe={codeAt:SF(!1),charAt:SF(!0)},hXe=Vn,dXe=bi,kF=hXe.WeakMap,jX=dXe(kF)&&/native code/.test(String(kF)),pXe=Uc,vXe=Sx,TF=pXe("keys"),Ax=function(e){return TF[e]||(TF[e]=vXe(e))},gXe=jX,zX=Vn,yXe=wi,mXe=Wv,Lk=$i,Fk=W4,bXe=Ax,wXe=_b,IF="Object already initialized",fC=zX.TypeError,$Xe=zX.WeakMap,A$,sm,O$,_Xe=function(e){return O$(e)?sm(e):A$(e,{})},xXe=function(e){return function(r){var t;if(!yXe(r)||(t=sm(r)).type!==e)throw fC("Incompatible receiver, "+e+" required");return t}};if(gXe||Fk.state){var rl=Fk.state||(Fk.state=new $Xe);rl.get=rl.get,rl.has=rl.has,rl.set=rl.set,A$=function(e,r){if(rl.has(e))throw fC(IF);return r.facade=e,rl.set(e,r),r},sm=function(e){return rl.get(e)||{}},O$=function(e){return rl.has(e)}}else{var qd=bXe("state");wXe[qd]=!0,A$=function(e,r){if(Lk(e,qd))throw fC(IF);return r.facade=e,mXe(e,qd,r),r},sm=function(e){return Lk(e,qd)?e[qd]:{}},O$=function(e){return Lk(e,qd)}}var Zh={set:A$,get:sm,has:O$,enforce:_Xe,getterFor:xXe},hC=ni,EXe=$i,HX=Function.prototype,SXe=hC&&Object.getOwnPropertyDescriptor,Z4=EXe(HX,"name"),kXe=Z4&&(function(){}).name==="something",TXe=Z4&&(!hC||hC&&SXe(HX,"name").configurable),UX={EXISTS:Z4,PROPER:kXe,CONFIGURABLE:TXe},Ox={},IXe=ni,AXe=AX,OXe=Jo,CXe=lo,PXe=Da,NXe=xb;Ox.f=IXe&&!AXe?Object.defineProperties:function(r,t){CXe(r);for(var n=PXe(t),i=NXe(t),s=i.length,o=0,a;s>o;)OXe.f(r,a=i[o++],n[a]);return r};var RXe=Xo,DXe=RXe("document","documentElement"),BXe=lo,MXe=Ox,AF=K4,LXe=_b,FXe=DXe,jXe=TX,zXe=Ax,OF=">",CF="<",dC="prototype",pC="script",WX=zXe("IE_PROTO"),jk=function(){},qX=function(e){return CF+pC+OF+e+CF+"/"+pC+OF},PF=function(e){e.write(qX("")),e.close();var r=e.parentWindow.Object;return e=null,r},HXe=function(){var e=jXe("iframe"),r="java"+pC+":",t;return e.style.display="none",FXe.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(qX("document.F=Object")),t.close(),t.F},E1,gw=function(){try{E1=new ActiveXObject("htmlfile")}catch{}gw=typeof document<"u"?document.domain&&E1?PF(E1):HXe():PF(E1);for(var e=AF.length;e--;)delete gw[dC][AF[e]];return gw()};LXe[WX]=!0;var qv=Object.create||function(r,t){var n;return r!==null?(jk[dC]=BXe(r),n=new jk,jk[dC]=null,n[WX]=r):n=gw(),t===void 0?n:MXe.f(n,t)},UXe=Tr,KX=!UXe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),WXe=$i,qXe=bi,KXe=ao,VXe=Ax,GXe=KX,NF=VXe("IE_PROTO"),vC=Object,YXe=vC.prototype,Cx=GXe?vC.getPrototypeOf:function(e){var r=KXe(e);if(WXe(r,NF))return r[NF];var t=r.constructor;return qXe(t)&&r instanceof t?t.prototype:r instanceof vC?YXe:null},ZXe=Wv,Sb=function(e,r,t,n){return n&&n.enumerable?e[r]=t:ZXe(e,r,t),e},XXe=Tr,JXe=bi,QXe=wi,eJe=qv,RF=Cx,tJe=Sb,rJe=Mn,gC=rJe("iterator"),VX=!1,lu,zk,Hk;[].keys&&(Hk=[].keys(),"next"in Hk?(zk=RF(RF(Hk)),zk!==Object.prototype&&(lu=zk)):VX=!0);var nJe=!QXe(lu)||XXe(function(){var e={};return lu[gC].call(e)!==e});nJe?lu={}:lu=eJe(lu);JXe(lu[gC])||tJe(lu,gC,function(){return this});var GX={IteratorPrototype:lu,BUGGY_SAFARI_ITERATORS:VX},iJe=G4,sJe=Yh,oJe=iJe?{}.toString:function(){return"[object "+sJe(this)+"]"},aJe=G4,lJe=Jo.f,uJe=Wv,cJe=$i,fJe=oJe,hJe=Mn,DF=hJe("toStringTag"),Kv=function(e,r,t,n){if(e){var i=t?e:e.prototype;cJe(i,DF)||lJe(i,DF,{configurable:!0,value:r}),n&&!aJe&&uJe(i,"toString",fJe)}},Vv={},dJe=GX.IteratorPrototype,pJe=qv,vJe=db,gJe=Kv,yJe=Vv,mJe=function(){return this},bJe=function(e,r,t,n){var i=r+" Iterator";return e.prototype=pJe(dJe,{next:vJe(+!n,t)}),gJe(e,i,!1,!0),yJe[i]=mJe,e},wJe=Ir,$Je=Gh,_Je=function(e,r,t){try{return wJe($Je(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},xJe=bi,EJe=String,SJe=TypeError,kJe=function(e){if(typeof e=="object"||xJe(e))return e;throw SJe("Can't set "+EJe(e)+" as a prototype")},TJe=_Je,IJe=lo,AJe=kJe,OJe=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=TJe(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(i,s){return IJe(i),AJe(s),e?t(i,s):i.__proto__=s,i}}():void 0),CJe=zt,PJe=oo,NJe=UX,RJe=bJe,DJe=Cx,BJe=Kv,BF=Sb,MJe=Mn,MF=Vv,LJe=GX,FJe=NJe.PROPER,S1=LJe.BUGGY_SAFARI_ITERATORS,Uk=MJe("iterator"),LF="keys",k1="values",FF="entries",jJe=function(){return this},X4=function(e,r,t,n,i,s,o){RJe(t,r,n);var a=function(_){if(_===i&&d)return d;if(!S1&&_ in f)return f[_];switch(_){case LF:return function(){return new t(this,_)};case k1:return function(){return new t(this,_)};case FF:return function(){return new t(this,_)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,f=e.prototype,c=f[Uk]||f["@@iterator"]||i&&f[i],d=!S1&&c||a(i),y=r=="Array"&&f.entries||c,w,b,T;if(y&&(w=DJe(y.call(new e)),w!==Object.prototype&&w.next&&(BJe(w,l,!0,!0),MF[l]=jJe)),FJe&&i==k1&&c&&c.name!==k1&&(u=!0,d=function(){return PJe(c,this)}),i)if(b={values:a(k1),keys:s?d:a(LF),entries:a(FF)},o)for(T in b)(S1||u||!(T in f))&&BF(f,T,b[T]);else CJe({target:r,proto:!0,forced:S1||u},b);return o&&f[Uk]!==d&&BF(f,Uk,d,{name:i}),MF[r]=d,b},J4=function(e,r){return{value:e,done:r}},zJe=fXe.charAt,HJe=El,YX=Zh,UJe=X4,jF=J4,ZX="String Iterator",WJe=YX.set,qJe=YX.getterFor(ZX);UJe(String,"String",function(e){WJe(this,{type:ZX,string:HJe(e),index:0})},function(){var r=qJe(this),t=r.string,n=r.index,i;return n>=t.length?jF(void 0,!0):(i=zJe(t,n),r.index+=i.length,jF(i,!1))});var KJe=oo,zF=lo,VJe=U4,XX=function(e,r,t){var n,i;zF(e);try{if(n=VJe(e,"return"),!n){if(r==="throw")throw t;return t}n=KJe(n,e)}catch(s){i=!0,n=s}if(r==="throw")throw t;if(i)throw n;return zF(n),t},GJe=lo,YJe=XX,ZJe=function(e,r,t,n){try{return n?r(GJe(t)[0],t[1]):r(t)}catch(i){YJe(e,"throw",i)}},XJe=Mn,JJe=Vv,QJe=XJe("iterator"),eQe=Array.prototype,JX=function(e){return e!==void 0&&(JJe.Array===e||eQe[QJe]===e)},tQe=Ir,rQe=bi,yC=W4,nQe=tQe(Function.toString);rQe(yC.inspectSource)||(yC.inspectSource=function(e){return nQe(e)});var iQe=yC.inspectSource,sQe=Ir,oQe=Tr,QX=bi,aQe=Yh,lQe=Xo,uQe=iQe,eJ=function(){},cQe=[],tJ=lQe("Reflect","construct"),Q4=/^\s*(?:class|function)\b/,fQe=sQe(Q4.exec),hQe=!Q4.exec(eJ),Lg=function(r){if(!QX(r))return!1;try{return tJ(eJ,cQe,r),!0}catch{return!1}},rJ=function(r){if(!QX(r))return!1;switch(aQe(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return hQe||!!fQe(Q4,uQe(r))}catch{return!0}};rJ.sham=!0;var Px=!tJ||oQe(function(){var e;return Lg(Lg.call)||!Lg(Object)||!Lg(function(){e=!0})||e})?rJ:Lg,dQe=kx,pQe=Jo,vQe=db,Gv=function(e,r,t){var n=dQe(r);n in e?pQe.f(e,n,vQe(0,t)):e[n]=t},gQe=Yh,HF=U4,yQe=pb,mQe=Vv,bQe=Mn,wQe=bQe("iterator"),Nx=function(e){if(!yQe(e))return HF(e,wQe)||HF(e,"@@iterator")||mQe[gQe(e)]},$Qe=oo,_Qe=Gh,xQe=lo,EQe=Uv,SQe=Nx,kQe=TypeError,nJ=function(e,r){var t=arguments.length<2?SQe(e):r;if(_Qe(t))return xQe($Qe(t,e));throw kQe(EQe(e)+" is not iterable")},TQe=wb,IQe=oo,AQe=ao,OQe=ZJe,CQe=JX,PQe=Px,NQe=Ba,UF=Gv,RQe=nJ,DQe=Nx,WF=Array,BQe=function(r){var t=AQe(r),n=PQe(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=TQe(s,i>2?arguments[2]:void 0));var a=DQe(t),l=0,u,f,c,d,y,w;if(a&&!(this===WF&&CQe(a)))for(d=RQe(t,a),y=d.next,f=n?new this:[];!(c=IQe(y,d)).done;l++)w=o?OQe(d,s,[c.value,l],!0):c.value,UF(f,l,w);else for(u=NQe(t),f=n?new this(u):WF(u);u>l;l++)w=o?s(t[l],l):t[l],UF(f,l,w);return f.length=l,f},MQe=Mn,iJ=MQe("iterator"),sJ=!1;try{var LQe=0,qF={next:function(){return{done:!!LQe++}},return:function(){sJ=!0}};qF[iJ]=function(){return this},Array.from(qF,function(){throw 2})}catch{}var FQe=function(e,r){if(!r&&!sJ)return!1;var t=!1;try{var n={};n[iJ]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},jQe=zt,zQe=BQe,HQe=FQe,UQe=!HQe(function(e){Array.from(e)});jQe({target:"Array",stat:!0,forced:UQe},{from:zQe});var WQe=xr,qQe=WQe.Array.from,KQe=qQe,oJ=KQe;(function(e){e.exports=oJ})(GZe);var Xh=Pt(cC),mC={},VQe={get exports(){return mC},set exports(e){mC=e}},bC={},GQe={get exports(){return bC},set exports(e){bC=e}},YQe=Da,KF=Vv,aJ=Zh;Jo.f;var ZQe=X4,T1=J4,lJ="Array Iterator",XQe=aJ.set,JQe=aJ.getterFor(lJ);ZQe(Array,"Array",function(e,r){XQe(this,{type:lJ,target:YQe(e),index:0,kind:r})},function(){var e=JQe(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,T1(void 0,!0)):t=="keys"?T1(n,!1):t=="values"?T1(r[n],!1):T1([n,r[n]],!1)},"values");KF.Arguments=KF.Array;var QQe=Nx,eet=QQe,tet={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ret=tet,net=Vn,iet=Yh,set=Wv,VF=Vv,oet=Mn,GF=oet("toStringTag");for(var Wk in ret){var YF=net[Wk],qk=YF&&YF.prototype;qk&&iet(qk)!==GF&&set(qk,GF,Wk),VF[Wk]=VF.Array}var aet=eet,uet=aet,cet=uet,fet=cet,het=fet,det=het;(function(e){e.exports=det})(GQe);(function(e){e.exports=bC})(VQe);var Cu=Pt(mC),wC={},pet={get exports(){return wC},set exports(e){wC=e}},kb={},vet=OX,get=K4,yet=get.concat("length","prototype");kb.f=Object.getOwnPropertyNames||function(r){return vet(r,yet)};var Rx={},ZF=$b,met=Ba,bet=Gv,wet=Array,$et=Math.max,uJ=function(e,r,t){for(var n=met(e),i=ZF(r,n),s=ZF(t===void 0?n:t,n),o=wet($et(s-i,0)),a=0;i<s;i++,a++)bet(o,a,e[i]);return o.length=a,o},_et=Ou,xet=Da,cJ=kb.f,Eet=uJ,fJ=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ket=function(e){try{return cJ(e)}catch{return Eet(fJ)}};Rx.f=function(r){return fJ&&_et(r)=="Window"?ket(r):cJ(xet(r))};var Tet=Jo,eN=function(e,r,t){return Tet.f(e,r,t)},Tb={},Iet=Mn;Tb.f=Iet;var XF=xr,Aet=$i,Oet=Tb,Cet=Jo.f,kn=function(e){var r=XF.Symbol||(XF.Symbol={});Aet(r,e)||Cet(r,e,{value:Oet.f(e)})},Pet=oo,Net=Xo,Ret=Mn,Det=Sb,hJ=function(){var e=Net("Symbol"),r=e&&e.prototype,t=r&&r.valueOf,n=Ret("toPrimitive");r&&!r[n]&&Det(r,n,function(i){return Pet(t,this)},{arity:1})},Bet=Ou,Jh=Array.isArray||function(r){return Bet(r)=="Array"},JF=Jh,Met=Px,Let=wi,Fet=Mn,jet=Fet("species"),QF=Array,zet=function(e){var r;return JF(e)&&(r=e.constructor,Met(r)&&(r===QF||JF(r.prototype))?r=void 0:Let(r)&&(r=r[jet],r===null&&(r=void 0))),r===void 0?QF:r},Het=zet,tN=function(e,r){return new(Het(e))(r===0?0:r)},Uet=wb,Wet=Ir,qet=Ex,Ket=ao,Vet=Ba,Get=tN,e9=Wet([].push),uc=function(e){var r=e==1,t=e==2,n=e==3,i=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,u,f,c){for(var d=Ket(l),y=qet(d),w=Uet(u,f),b=Vet(y),T=0,_=c||Get,A=r?_(l,b):t||o?_(l,0):void 0,x,I;b>T;T++)if((a||T in y)&&(x=y[T],I=w(x,T,d),e))if(r)A[T]=I;else if(I)switch(e){case 3:return!0;case 5:return x;case 6:return T;case 2:e9(A,x)}else switch(e){case 4:return!1;case 7:e9(A,x)}return s?-1:n||i?i:A}},Jc={forEach:uc(0),map:uc(1),filter:uc(2),some:uc(3),every:uc(4),find:uc(5),findIndex:uc(6),filterReject:uc(7)},Dx=zt,rN=Vn,nN=oo,Yet=Ir,nv=ni,iv=Hv,Zet=Tr,hi=$i,Xet=Bn,$C=lo,Bx=Da,iN=kx,Jet=El,_C=db,om=qv,dJ=xb,Qet=kb,pJ=Rx,ett=Eb,vJ=zv,gJ=Jo,ttt=Ox,yJ=hb,t9=Sb,rtt=eN,sN=Uc,ntt=Ax,mJ=_b,r9=Sx,itt=Mn,stt=Tb,ott=kn,att=hJ,ltt=Kv,bJ=Zh,Mx=Jc.forEach,Is=ntt("hidden"),Lx="Symbol",am="prototype",utt=bJ.set,n9=bJ.getterFor(Lx),Ea=Object[am],gh=rN.Symbol,Qg=gh&&gh[am],ctt=rN.TypeError,Kk=rN.QObject,wJ=vJ.f,Hf=gJ.f,$J=pJ.f,ftt=yJ.f,_J=Yet([].push),wu=sN("symbols"),Ib=sN("op-symbols"),htt=sN("wks"),xC=!Kk||!Kk[am]||!Kk[am].findChild,EC=nv&&Zet(function(){return om(Hf({},"a",{get:function(){return Hf(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var n=wJ(Ea,r);n&&delete Ea[r],Hf(e,r,t),n&&e!==Ea&&Hf(Ea,r,n)}:Hf,Vk=function(e,r){var t=wu[e]=om(Qg);return utt(t,{type:Lx,tag:e,description:r}),nv||(t.description=r),t},Fx=function(r,t,n){r===Ea&&Fx(Ib,t,n),$C(r);var i=iN(t);return $C(n),hi(wu,i)?(n.enumerable?(hi(r,Is)&&r[Is][i]&&(r[Is][i]=!1),n=om(n,{enumerable:_C(0,!1)})):(hi(r,Is)||Hf(r,Is,_C(1,{})),r[Is][i]=!0),EC(r,i,n)):Hf(r,i,n)},oN=function(r,t){$C(r);var n=Bx(t),i=dJ(n).concat(kJ(n));return Mx(i,function(s){(!nv||nN(xJ,n,s))&&Fx(r,s,n[s])}),r},dtt=function(r,t){return t===void 0?om(r):oN(om(r),t)},xJ=function(r){var t=iN(r),n=nN(ftt,this,t);return this===Ea&&hi(wu,t)&&!hi(Ib,t)?!1:n||!hi(this,t)||!hi(wu,t)||hi(this,Is)&&this[Is][t]?n:!0},EJ=function(r,t){var n=Bx(r),i=iN(t);if(!(n===Ea&&hi(wu,i)&&!hi(Ib,i))){var s=wJ(n,i);return s&&hi(wu,i)&&!(hi(n,Is)&&n[Is][i])&&(s.enumerable=!0),s}},SJ=function(r){var t=$J(Bx(r)),n=[];return Mx(t,function(i){!hi(wu,i)&&!hi(mJ,i)&&_J(n,i)}),n},kJ=function(e){var r=e===Ea,t=$J(r?Ib:Bx(e)),n=[];return Mx(t,function(i){hi(wu,i)&&(!r||hi(Ea,i))&&_J(n,wu[i])}),n};iv||(gh=function(){if(Xet(Qg,this))throw ctt("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:Jet(arguments[0]),t=r9(r),n=function(i){this===Ea&&nN(n,Ib,i),hi(this,Is)&&hi(this[Is],t)&&(this[Is][t]=!1),EC(this,t,_C(1,i))};return nv&&xC&&EC(Ea,t,{configurable:!0,set:n}),Vk(t,r)},Qg=gh[am],t9(Qg,"toString",function(){return n9(this).tag}),t9(gh,"withoutSetter",function(e){return Vk(r9(e),e)}),yJ.f=xJ,gJ.f=Fx,ttt.f=oN,vJ.f=EJ,Qet.f=pJ.f=SJ,ett.f=kJ,stt.f=function(e){return Vk(itt(e),e)},nv&&rtt(Qg,"description",{configurable:!0,get:function(){return n9(this).description}}));Dx({global:!0,constructor:!0,wrap:!0,forced:!iv,sham:!iv},{Symbol:gh});Mx(dJ(htt),function(e){ott(e)});Dx({target:Lx,stat:!0,forced:!iv},{useSetter:function(){xC=!0},useSimple:function(){xC=!1}});Dx({target:"Object",stat:!0,forced:!iv,sham:!nv},{create:dtt,defineProperty:Fx,defineProperties:oN,getOwnPropertyDescriptor:EJ});Dx({target:"Object",stat:!0,forced:!iv},{getOwnPropertyNames:SJ});att();ltt(gh,Lx);mJ[Is]=!0;var ptt=Hv,TJ=ptt&&!!Symbol.for&&!!Symbol.keyFor,vtt=zt,gtt=Xo,ytt=$i,mtt=El,IJ=Uc,btt=TJ,Gk=IJ("string-to-symbol-registry"),wtt=IJ("symbol-to-string-registry");vtt({target:"Symbol",stat:!0,forced:!btt},{for:function(e){var r=mtt(e);if(ytt(Gk,r))return Gk[r];var t=gtt("Symbol")(r);return Gk[r]=t,wtt[t]=r,t}});var $tt=zt,_tt=$i,xtt=mb,Ett=Uv,Stt=Uc,ktt=TJ,i9=Stt("symbol-to-string-registry");$tt({target:"Symbol",stat:!0,forced:!ktt},{keyFor:function(r){if(!xtt(r))throw TypeError(Ett(r)+" is not a symbol");if(_tt(i9,r))return i9[r]}});var Ttt=Ir,s9=Jh,Itt=bi,o9=Ou,Att=El,a9=Ttt([].push),Ott=function(e){if(Itt(e))return e;if(s9(e)){for(var r=e.length,t=[],n=0;n<r;n++){var i=e[n];typeof i=="string"?a9(t,i):(typeof i=="number"||o9(i)=="Number"||o9(i)=="String")&&a9(t,Att(i))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(s9(this))return l;for(var u=0;u<s;u++)if(t[u]===a)return l}}},Ctt=zt,AJ=Xo,OJ=fb,Ptt=oo,Ab=Ir,CJ=Tr,l9=bi,u9=mb,PJ=Ix,Ntt=Ott,Rtt=Hv,Dtt=String,Pc=AJ("JSON","stringify"),I1=Ab(/./.exec),c9=Ab("".charAt),Btt=Ab("".charCodeAt),Mtt=Ab("".replace),Ltt=Ab(1 .toString),Ftt=/[\uD800-\uDFFF]/g,f9=/^[\uD800-\uDBFF]$/,h9=/^[\uDC00-\uDFFF]$/,d9=!Rtt||CJ(function(){var e=AJ("Symbol")();return Pc([e])!="[null]"||Pc({a:e})!="{}"||Pc(Object(e))!="{}"}),p9=CJ(function(){return Pc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Pc("\uDEAD")!=='"\\udead"'}),jtt=function(e,r){var t=PJ(arguments),n=Ntt(r);if(!(!l9(n)&&(e===void 0||u9(e))))return t[1]=function(i,s){if(l9(n)&&(s=Ptt(n,this,Dtt(i),s)),!u9(s))return s},OJ(Pc,null,t)},ztt=function(e,r,t){var n=c9(t,r-1),i=c9(t,r+1);return I1(f9,e)&&!I1(h9,i)||I1(h9,e)&&!I1(f9,n)?"\\u"+Ltt(Btt(e,0),16):e};Pc&&Ctt({target:"JSON",stat:!0,arity:3,forced:d9||p9},{stringify:function(r,t,n){var i=PJ(arguments),s=OJ(d9?jtt:Pc,null,i);return p9&&typeof s=="string"?Mtt(s,Ftt,ztt):s}});var Htt=zt,Utt=Hv,Wtt=Tr,NJ=Eb,qtt=ao,Ktt=!Utt||Wtt(function(){NJ.f(1)});Htt({target:"Object",stat:!0,forced:Ktt},{getOwnPropertySymbols:function(r){var t=NJ.f;return t?t(qtt(r)):[]}});var Vtt=xr,Gtt=Vtt.Object.getOwnPropertySymbols,Ytt=Gtt,Ztt=Ytt;(function(e){e.exports=Ztt})(pet);var Wc=Pt(wC),SC={},Xtt={get exports(){return SC},set exports(e){SC=e}},kC={},Jtt={get exports(){return kC},set exports(e){kC=e}},Qtt=zt,ert=Tr,trt=Da,RJ=zv.f,DJ=ni,rrt=!DJ||ert(function(){RJ(1)});Qtt({target:"Object",stat:!0,forced:rrt,sham:!DJ},{getOwnPropertyDescriptor:function(r,t){return RJ(trt(r),t)}});var nrt=xr,BJ=nrt.Object,irt=Jtt.exports=function(r,t){return BJ.getOwnPropertyDescriptor(r,t)};BJ.getOwnPropertyDescriptor.sham&&(irt.sham=!0);var srt=kC,MJ=srt;(function(e){e.exports=MJ})(Xtt);var Qc=Pt(SC),TC={},ort={get exports(){return TC},set exports(e){TC=e}},art=Xo,lrt=Ir,urt=kb,crt=Eb,frt=lo,hrt=lrt([].concat),LJ=art("Reflect","ownKeys")||function(r){var t=urt.f(frt(r)),n=crt.f;return n?hrt(t,n(r)):t},drt=zt,prt=ni,vrt=LJ,grt=Da,yrt=zv,mrt=Gv;drt({target:"Object",stat:!0,sham:!prt},{getOwnPropertyDescriptors:function(r){for(var t=grt(r),n=yrt.f,i=vrt(t),s={},o=0,a,l;i.length>o;)l=n(t,a=i[o++]),l!==void 0&&mrt(s,a,l);return s}});var brt=xr,wrt=brt.Object.getOwnPropertyDescriptors,$rt=wrt,_rt=$rt;(function(e){e.exports=_rt})(ort);var qc=Pt(TC),IC={},xrt={get exports(){return IC},set exports(e){IC=e}},AC={},Ert={get exports(){return AC},set exports(e){AC=e}},Srt=zt,krt=ni,v9=Ox.f;Srt({target:"Object",stat:!0,forced:Object.defineProperties!==v9,sham:!krt},{defineProperties:v9});var Trt=xr,FJ=Trt.Object,Irt=Ert.exports=function(r,t){return FJ.defineProperties(r,t)};FJ.defineProperties.sham&&(Irt.sham=!0);var Art=AC,Ort=Art;(function(e){e.exports=Ort})(xrt);var jx=Pt(IC),OC={},Crt={get exports(){return OC},set exports(e){OC=e}},CC={},Prt={get exports(){return CC},set exports(e){CC=e}},Nrt=zt,Rrt=ni,g9=Jo.f;Nrt({target:"Object",stat:!0,forced:Object.defineProperty!==g9,sham:!Rrt},{defineProperty:g9});var Drt=xr,jJ=Drt.Object,Brt=Prt.exports=function(r,t,n){return jJ.defineProperty(r,t,n)};jJ.defineProperty.sham&&(Brt.sham=!0);var Mrt=CC,zJ=Mrt;(function(e){e.exports=zJ})(Crt);var zx=Pt(OC);function ft(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var PC={},Lrt={get exports(){return PC},set exports(e){PC=e}},NC={},Frt={get exports(){return NC},set exports(e){NC=e}},jrt=zJ,zrt=jrt,Hrt=zrt,Urt=Hrt;(function(e){e.exports=Urt})(Frt);(function(e){e.exports=NC})(Lrt);var Hx=Pt(PC),RC={},Wrt={get exports(){return RC},set exports(e){RC=e}},DC={},qrt={get exports(){return DC},set exports(e){DC=e}},Krt=TypeError,Vrt=9007199254740991,HJ=function(e){if(e>Vrt)throw Krt("Maximum allowed index exceeded");return e},Grt=Tr,Yrt=Mn,Zrt=yb,Xrt=Yrt("species"),Ob=function(e){return Zrt>=51||!Grt(function(){var r=[],t=r.constructor={};return t[Xrt]=function(){return{foo:1}},r[e](Boolean).foo!==1})},Jrt=zt,Qrt=Tr,ent=Jh,tnt=wi,rnt=ao,nnt=Ba,y9=HJ,m9=Gv,int=tN,snt=Ob,ont=Mn,ant=yb,UJ=ont("isConcatSpreadable"),lnt=ant>=51||!Qrt(function(){var e=[];return e[UJ]=!1,e.concat()[0]!==e}),unt=function(e){if(!tnt(e))return!1;var r=e[UJ];return r!==void 0?!!r:ent(e)},cnt=!lnt||!snt("concat");Jrt({target:"Array",proto:!0,arity:1,forced:cnt},{concat:function(r){var t=rnt(this),n=int(t,0),i=0,s,o,a,l,u;for(s=-1,a=arguments.length;s<a;s++)if(u=s===-1?t:arguments[s],unt(u))for(l=nnt(u),y9(i+l),o=0;o<l;o++,i++)o in u&&m9(n,i,u[o]);else y9(i+1),m9(n,i++,u);return n.length=i,n}});var fnt=kn;fnt("asyncIterator");var hnt=kn;hnt("hasInstance");var dnt=kn;dnt("isConcatSpreadable");var pnt=kn;pnt("iterator");var vnt=kn;vnt("match");var gnt=kn;gnt("matchAll");var ynt=kn;ynt("replace");var mnt=kn;mnt("search");var bnt=kn;bnt("species");var wnt=kn;wnt("split");var $nt=kn,_nt=hJ;$nt("toPrimitive");_nt();var xnt=Xo,Ent=kn,Snt=Kv;Ent("toStringTag");Snt(xnt("Symbol"),"Symbol");var knt=kn;knt("unscopables");var Tnt=Vn,Int=Kv;Int(Tnt.JSON,"JSON",!0);var Ant=xr,Ont=Ant.Symbol,Cnt=Ont,WJ=Cnt,Pnt=kn;Pnt("dispose");var Nnt=WJ,Rnt=Nnt,Dnt=kn;Dnt("asyncDispose");var Bnt=zt,Mnt=Xo,Lnt=Ir,qJ=Mnt("Symbol"),Fnt=qJ.keyFor,jnt=Lnt(qJ.prototype.valueOf);Bnt({target:"Symbol",stat:!0},{isRegistered:function(r){try{return Fnt(jnt(r))!==void 0}catch{return!1}}});var znt=zt,Hnt=Uc,KJ=Xo,Unt=Ir,Wnt=mb,qnt=Mn,C$=KJ("Symbol"),b9=C$.isWellKnown,VJ=KJ("Object","getOwnPropertyNames"),Knt=Unt(C$.prototype.valueOf),w9=Hnt("wks");for(var Yk=0,$9=VJ(C$),Vnt=$9.length;Yk<Vnt;Yk++)try{var _9=$9[Yk];Wnt(C$[_9])&&qnt(_9)}catch{}znt({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(r){if(b9&&b9(r))return!0;try{for(var t=Knt(r),n=0,i=VJ(w9),s=i.length;n<s;n++)if(w9[i[n]]==t)return!0}catch{}return!1}});var Gnt=kn;Gnt("matcher");var Ynt=kn;Ynt("metadataKey");var Znt=kn;Znt("observable");var Xnt=kn;Xnt("metadata");var Jnt=kn;Jnt("patternMatch");var Qnt=kn;Qnt("replaceAll");var eit=Rnt,tit=eit;(function(e){e.exports=tit})(qrt);(function(e){e.exports=DC})(Wrt);var hp=Pt(RC),BC={},rit={get exports(){return BC},set exports(e){BC=e}},MC={},nit={get exports(){return MC},set exports(e){MC=e}},iit=Tb,sit=iit.f("iterator"),oit=sit,ait=oit,lit=ait,uit=lit,cit=uit,fit=cit;(function(e){e.exports=fit})(nit);(function(e){e.exports=MC})(rit);var hit=Pt(BC);function Dr(e){"@babel/helpers - typeof";return Dr=typeof hp=="function"&&typeof hit=="symbol"?function(r){return typeof r}:function(r){return r&&typeof hp=="function"&&r.constructor===hp&&r!==hp.prototype?"symbol":typeof r},Dr(e)}var LC={},dit={get exports(){return LC},set exports(e){LC=e}},FC={},pit={get exports(){return FC},set exports(e){FC=e}},vit=Tb,git=vit.f("toPrimitive"),yit=git,mit=yit,bit=mit,wit=bit,$it=wit,_it=$it;(function(e){e.exports=_it})(pit);(function(e){e.exports=FC})(dit);var xit=Pt(LC);function Eit(e,r){if(Dr(e)!=="object"||e===null)return e;var t=e[xit];if(t!==void 0){var n=t.call(e,r||"default");if(Dr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function GJ(e){var r=Eit(e,"string");return Dr(r)==="symbol"?r:String(r)}function x9(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Hx(e,GJ(n.key),n)}}function ht(e,r,t){return r&&x9(e.prototype,r),t&&x9(e,t),Hx(e,"prototype",{writable:!1}),e}function Ux(e,r,t){return r=GJ(r),r in e?Hx(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var jC={},Sit={get exports(){return jC},set exports(e){jC=e}},zC={},kit={get exports(){return zC},set exports(e){zC=e}},Tit=zt,Iit=Jh;Tit({target:"Array",stat:!0},{isArray:Iit});var Ait=xr,Oit=Ait.Array.isArray,Cit=Oit,YJ=Cit,Pit=YJ,Nit=Pit,Rit=Nit,Dit=Rit;(function(e){e.exports=Dit})(kit);(function(e){e.exports=zC})(Sit);var ZJ=Pt(jC);function Bit(e){if(ZJ(e))return e}function Mit(e,r){var t=e==null?null:typeof hp<"u"&&Cu(e)||e["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}var HC={},Lit={get exports(){return HC},set exports(e){HC=e}},UC={},Fit={get exports(){return UC},set exports(e){UC=e}},jit=zt,E9=Jh,zit=Px,Hit=wi,S9=$b,Uit=Ba,Wit=Da,qit=Gv,Kit=Mn,Vit=Ob,Git=Ix,Yit=Vit("slice"),Zit=Kit("species"),Zk=Array,Xit=Math.max;jit({target:"Array",proto:!0,forced:!Yit},{slice:function(r,t){var n=Wit(this),i=Uit(n),s=S9(r,i),o=S9(t===void 0?i:t,i),a,l,u;if(E9(n)&&(a=n.constructor,zit(a)&&(a===Zk||E9(a.prototype))?a=void 0:Hit(a)&&(a=a[Zit],a===null&&(a=void 0)),a===Zk||a===void 0))return Git(n,s,o);for(l=new(a===void 0?Zk:a)(Xit(o-s,0)),u=0;s<o;s++,u++)s in n&&qit(l,u,n[s]);return l.length=u,l}});var Jit=_i,Qit=Jit("Array").slice,est=Bn,tst=Qit,Xk=Array.prototype,rst=function(e){var r=e.slice;return e===Xk||est(Xk,e)&&r===Xk.slice?tst:r},nst=rst,XJ=nst,ist=XJ,sst=ist,ost=sst,ast=ost;(function(e){e.exports=ast})(Fit);(function(e){e.exports=UC})(Lit);var lst=Pt(HC),WC={},ust={get exports(){return WC},set exports(e){WC=e}},qC={},cst={get exports(){return qC},set exports(e){qC=e}},fst=oJ,hst=fst,dst=hst,pst=dst;(function(e){e.exports=pst})(cst);(function(e){e.exports=qC})(ust);var JJ=Pt(WC);function KC(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function QJ(e,r){var t;if(e){if(typeof e=="string")return KC(e,r);var n=lst(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return JJ(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KC(e,r)}}function vst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(e,r){return Bit(e)||Mit(e,r)||QJ(e,r)||vst()}function gst(e){if(ZJ(e))return KC(e)}function yst(e){if(typeof hp<"u"&&Cu(e)!=null||e["@@iterator"]!=null)return JJ(e)}function mst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ll(e){return gst(e)||yst(e)||QJ(e)||mst()}var VC={},bst={get exports(){return VC},set exports(e){VC=e}};(function(e){e.exports=WJ})(bst);var ef=Pt(VC),GC={},wst={get exports(){return GC},set exports(e){GC=e}},$st=_i,_st=$st("Array").concat,xst=Bn,Est=_st,Jk=Array.prototype,Sst=function(e){var r=e.concat;return e===Jk||xst(Jk,e)&&r===Jk.concat?Est:r},kst=Sst,Tst=kst;(function(e){e.exports=Tst})(wst);var aN=Pt(GC),YC={},Ist={get exports(){return YC},set exports(e){YC=e}};(function(e){e.exports=XJ})(Ist);var Oi=Pt(YC),k9={},Ast={get exports(){return k9},set exports(e){k9=e}},Ost=zt,Cst=LJ;Ost({target:"Reflect",stat:!0},{ownKeys:Cst});var Pst=xr,Nst=Pst.Reflect.ownKeys,Rst=Nst,Dst=Rst;(function(e){e.exports=Dst})(Ast);var ZC={},Bst={get exports(){return ZC},set exports(e){ZC=e}};(function(e){e.exports=YJ})(Bst);var Lr=Pt(ZC),XC={},Mst={get exports(){return XC},set exports(e){XC=e}},Lst=zt,Fst=Jc.map,jst=Ob,zst=jst("map");Lst({target:"Array",proto:!0,forced:!zst},{map:function(r){return Fst(this,r,arguments.length>1?arguments[1]:void 0)}});var Hst=_i,Ust=Hst("Array").map,Wst=Bn,qst=Ust,Qk=Array.prototype,Kst=function(e){var r=e.map;return e===Qk||Wst(Qk,e)&&r===Qk.map?qst:r},Vst=Kst,Gst=Vst;(function(e){e.exports=Gst})(Mst);var sv=Pt(XC),JC={},Yst={get exports(){return JC},set exports(e){JC=e}},Zst=zt,Xst=ao,eQ=xb,Jst=Tr,Qst=Jst(function(){eQ(1)});Zst({target:"Object",stat:!0,forced:Qst},{keys:function(r){return eQ(Xst(r))}});var eot=xr,tot=eot.Object.keys,rot=tot,not=rot;(function(e){e.exports=not})(Yst);var mn=Pt(JC),QC={},iot={get exports(){return QC},set exports(e){QC=e}},sot=zt,oot=Ir,tQ=Date,aot=oot(tQ.prototype.getTime);sot({target:"Date",stat:!0},{now:function(){return aot(new tQ)}});var lot=xr,uot=lot.Date.now,cot=uot,fot=cot;(function(e){e.exports=fot})(iot);var P$=Pt(QC),e5={},hot={get exports(){return e5},set exports(e){e5=e}},dot=Tr,Yv=function(e,r){var t=[][e];return!!t&&dot(function(){t.call(null,r||function(){return 1},1)})},pot=Jc.forEach,vot=Yv,got=vot("forEach"),yot=got?[].forEach:function(r){return pot(this,r,arguments.length>1?arguments[1]:void 0)},mot=zt,T9=yot;mot({target:"Array",proto:!0,forced:[].forEach!=T9},{forEach:T9});var bot=_i,wot=bot("Array").forEach,$ot=wot,_ot=$ot,xot=Yh,Eot=$i,Sot=Bn,kot=_ot,eT=Array.prototype,Tot={DOMTokenList:!0,NodeList:!0},Iot=function(e){var r=e.forEach;return e===eT||Sot(eT,e)&&r===eT.forEach||Eot(Tot,xot(e))?kot:r};(function(e){e.exports=Iot})(hot);var qr=Pt(e5),t5={},Aot={get exports(){return t5},set exports(e){t5=e}},Oot=zt,Cot=Ir,Pot=Jh,Not=Cot([].reverse),I9=[1,2];Oot({target:"Array",proto:!0,forced:String(I9)===String(I9.reverse())},{reverse:function(){return Pot(this)&&(this.length=this.length),Not(this)}});var Rot=_i,Dot=Rot("Array").reverse,Bot=Bn,Mot=Dot,tT=Array.prototype,Lot=function(e){var r=e.reverse;return e===tT||Bot(tT,e)&&r===tT.reverse?Mot:r},Fot=Lot,jot=Fot;(function(e){e.exports=jot})(Aot);var yh=Pt(t5),r5={},zot={get exports(){return r5},set exports(e){r5=e}},Hot=ni,Uot=Jh,Wot=TypeError,qot=Object.getOwnPropertyDescriptor,Kot=Hot&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Vot=Kot?function(e,r){if(Uot(e)&&!qot(e,"length").writable)throw Wot("Cannot set read only .length");return e.length=r}:function(e,r){return e.length=r},A9=Uv,Got=TypeError,rQ=function(e,r){if(!delete e[r])throw Got("Cannot delete property "+A9(r)+" of "+A9(e))},Yot=zt,Zot=ao,Xot=$b,Jot=Tx,Qot=Ba,eat=Vot,tat=HJ,rat=tN,nat=Gv,rT=rQ,iat=Ob,sat=iat("splice"),oat=Math.max,aat=Math.min;Yot({target:"Array",proto:!0,forced:!sat},{splice:function(r,t){var n=Zot(this),i=Qot(n),s=Xot(r,i),o=arguments.length,a,l,u,f,c,d;for(o===0?a=l=0:o===1?(a=0,l=i-s):(a=o-2,l=aat(oat(Jot(t),0),i-s)),tat(i+a-l),u=rat(n,l),f=0;f<l;f++)c=s+f,c in n&&nat(u,f,n[c]);if(u.length=l,a<l){for(f=s;f<i-l;f++)c=f+l,d=f+a,c in n?n[d]=n[c]:rT(n,d);for(f=i;f>i-l+a;f--)rT(n,f-1)}else if(a>l)for(f=i-l;f>s;f--)c=f+l-1,d=f+a-1,c in n?n[d]=n[c]:rT(n,d);for(f=0;f<a;f++)n[f+s]=arguments[f+2];return eat(n,i-l+a),u}});var lat=_i,uat=lat("Array").splice,cat=Bn,fat=uat,nT=Array.prototype,hat=function(e){var r=e.splice;return e===nT||cat(nT,e)&&r===nT.splice?fat:r},dat=hat,pat=dat;(function(e){e.exports=pat})(zot);var uu=Pt(r5),n5={},vat={get exports(){return n5},set exports(e){n5=e}},gat=zt,yat=q4.includes,mat=Tr,bat=mat(function(){return!Array(1).includes()});gat({target:"Array",proto:!0,forced:bat},{includes:function(r){return yat(this,r,arguments.length>1?arguments[1]:void 0)}});var wat=_i,$at=wat("Array").includes,_at=wi,xat=Ou,Eat=Mn,Sat=Eat("match"),kat=function(e){var r;return _at(e)&&((r=e[Sat])!==void 0?!!r:xat(e)=="RegExp")},Tat=kat,Iat=TypeError,Aat=function(e){if(Tat(e))throw Iat("The method doesn't accept regular expressions");return e},Oat=Mn,Cat=Oat("match"),Pat=function(e){var r=/./;try{"/./"[e](r)}catch{try{return r[Cat]=!1,"/./"[e](r)}catch{}}return!1},Nat=zt,Rat=Ir,Dat=Aat,Bat=vb,O9=El,Mat=Pat,Lat=Rat("".indexOf);Nat({target:"String",proto:!0,forced:!Mat("includes")},{includes:function(r){return!!~Lat(O9(Bat(this)),O9(Dat(r)),arguments.length>1?arguments[1]:void 0)}});var Fat=_i,jat=Fat("String").includes,C9=Bn,zat=$at,Hat=jat,iT=Array.prototype,sT=String.prototype,Uat=function(e){var r=e.includes;return e===iT||C9(iT,e)&&r===iT.includes?zat:typeof e=="string"||e===sT||C9(sT,e)&&r===sT.includes?Hat:r},Wat=Uat,qat=Wat;(function(e){e.exports=qat})(vat);var vl=Pt(n5),i5={},Kat={get exports(){return i5},set exports(e){i5=e}},Vat=zt,Gat=Tr,Yat=ao,nQ=Cx,Zat=KX,Xat=Gat(function(){nQ(1)});Vat({target:"Object",stat:!0,forced:Xat,sham:!Zat},{getPrototypeOf:function(r){return nQ(Yat(r))}});var Jat=xr,Qat=Jat.Object.getPrototypeOf,elt=Qat,iQ=elt;(function(e){e.exports=iQ})(Kat);var P9=Pt(i5),s5={},tlt={get exports(){return s5},set exports(e){s5=e}},rlt=zt,nlt=Jc.filter,ilt=Ob,slt=ilt("filter");rlt({target:"Array",proto:!0,forced:!slt},{filter:function(r){return nlt(this,r,arguments.length>1?arguments[1]:void 0)}});var olt=_i,alt=olt("Array").filter,llt=Bn,ult=alt,oT=Array.prototype,clt=function(e){var r=e.filter;return e===oT||llt(oT,e)&&r===oT.filter?ult:r},flt=clt,hlt=flt;(function(e){e.exports=hlt})(tlt);var As=Pt(s5),N9={},dlt={get exports(){return N9},set exports(e){N9=e}},plt=ni,sQ=Ir,vlt=xb,glt=Da,ylt=hb.f,mlt=sQ(ylt),blt=sQ([].push),R9=function(e){return function(r){for(var t=glt(r),n=vlt(t),i=n.length,s=0,o=[],a;i>s;)a=n[s++],(!plt||mlt(t,a))&&blt(o,e?[a,t[a]]:t[a]);return o}},wlt={entries:R9(!0),values:R9(!1)},$lt=zt,_lt=wlt.values;$lt({target:"Object",stat:!0},{values:function(r){return _lt(r)}});var xlt=xr,Elt=xlt.Object.values,Slt=Elt,klt=Slt;(function(e){e.exports=klt})(dlt);var o5={},Tlt={get exports(){return o5},set exports(e){o5=e}},Wx=`	
\v\f\r                　\u2028\u2029\uFEFF`,Ilt=Ir,Alt=vb,Olt=El,a5=Wx,D9=Ilt("".replace),Clt=RegExp("^["+a5+"]+"),Plt=RegExp("(^|[^"+a5+"])["+a5+"]+$"),aT=function(e){return function(r){var t=Olt(Alt(r));return e&1&&(t=D9(t,Clt,"")),e&2&&(t=D9(t,Plt,"$1")),t}},lN={start:aT(1),end:aT(2),trim:aT(3)},oQ=Vn,Nlt=Tr,Rlt=Ir,Dlt=El,Blt=lN.trim,B9=Wx,my=oQ.parseInt,M9=oQ.Symbol,L9=M9&&M9.iterator,aQ=/^[+-]?0x/i,Mlt=Rlt(aQ.exec),Llt=my(B9+"08")!==8||my(B9+"0x16")!==22||L9&&!Nlt(function(){my(Object(L9))}),Flt=Llt?function(r,t){var n=Blt(Dlt(r));return my(n,t>>>0||(Mlt(aQ,n)?16:10))}:my,jlt=zt,F9=Flt;jlt({global:!0,forced:parseInt!=F9},{parseInt:F9});var zlt=xr,Hlt=zlt.parseInt,Ult=Hlt,Wlt=Ult;(function(e){e.exports=Wlt})(Tlt);var ma=Pt(o5),l5={},qlt={get exports(){return l5},set exports(e){l5=e}},Klt=zt,Vlt=H4,Glt=q4.indexOf,Ylt=Yv,u5=Vlt([].indexOf),lQ=!!u5&&1/u5([1],1,-0)<0,Zlt=lQ||!Ylt("indexOf");Klt({target:"Array",proto:!0,forced:Zlt},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return lQ?u5(this,r,t)||0:Glt(this,r,t)}});var Xlt=_i,Jlt=Xlt("Array").indexOf,Qlt=Bn,eut=Jlt,lT=Array.prototype,tut=function(e){var r=e.indexOf;return e===lT||Qlt(lT,e)&&r===lT.indexOf?eut:r},rut=tut,nut=rut;(function(e){e.exports=nut})(qlt);var Sr=Pt(l5),j9={},iut={get exports(){return j9},set exports(e){j9=e}},sut=UX.PROPER,out=Tr,z9=Wx,H9="​᠎",aut=function(e){return out(function(){return!!z9[e]()||H9[e]()!==H9||sut&&z9[e].name!==e})},lut=zt,uut=lN.trim,cut=aut;lut({target:"String",proto:!0,forced:cut("trim")},{trim:function(){return uut(this)}});var fut=_i,hut=fut("String").trim,dut=Bn,put=hut,uT=String.prototype,vut=function(e){var r=e.trim;return typeof e=="string"||e===uT||dut(uT,e)&&r===uT.trim?put:r},gut=vut,yut=gut;(function(e){e.exports=yut})(iut);var c5={},mut={get exports(){return c5},set exports(e){c5=e}},but=zt,wut=ni,$ut=qv;but({target:"Object",stat:!0,sham:!wut},{create:$ut});var _ut=xr,xut=_ut.Object,Eut=function(r,t){return xut.create(r,t)},Sut=Eut,uQ=Sut;(function(e){e.exports=uQ})(mut);var mh=Pt(c5),f5={},kut={get exports(){return f5},set exports(e){f5=e}},h5=xr,Tut=fb;h5.JSON||(h5.JSON={stringify:JSON.stringify});var Iut=function(r,t,n){return Tut(h5.JSON.stringify,null,arguments)},Aut=Iut,Out=Aut;(function(e){e.exports=Out})(kut);var Cb=Pt(f5),d5={},Cut={get exports(){return d5},set exports(e){d5=e}},Put=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",Nut=TypeError,Rut=function(e,r){if(e<r)throw Nut("Not enough arguments");return e},cQ=Vn,Dut=fb,But=bi,Mut=Put,Lut=gb,Fut=Ix,jut=Rut,zut=cQ.Function,Hut=/MSIE .\./.test(Lut)||Mut&&function(){var e=cQ.Bun.version.split(".");return e.length<3||e[0]==0&&(e[1]<3||e[1]==3&&e[2]==0)}(),fQ=function(e,r){var t=r?2:1;return Hut?function(n,i){var s=jut(arguments.length,1)>t,o=But(n)?n:zut(n),a=s?Fut(arguments,t):[],l=s?function(){Dut(o,this,a)}:o;return r?e(l,i):e(l)}:e},Uut=zt,hQ=Vn,Wut=fQ,U9=Wut(hQ.setInterval,!0);Uut({global:!0,bind:!0,forced:hQ.setInterval!==U9},{setInterval:U9});var qut=zt,dQ=Vn,Kut=fQ,W9=Kut(dQ.setTimeout,!0);qut({global:!0,bind:!0,forced:dQ.setTimeout!==W9},{setTimeout:W9});var Vut=xr,Gut=Vut.setTimeout;(function(e){e.exports=Gut})(Cut);var gl=Pt(d5),p5={},Yut={get exports(){return p5},set exports(e){p5=e}},Zut=ao,q9=$b,Xut=Ba,Jut=function(r){for(var t=Zut(this),n=Xut(t),i=arguments.length,s=q9(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=o===void 0?n:q9(o,n);a>s;)t[s++]=r;return t},Qut=zt,ect=Jut;Qut({target:"Array",proto:!0},{fill:ect});var tct=_i,rct=tct("Array").fill,nct=Bn,ict=rct,cT=Array.prototype,sct=function(e){var r=e.fill;return e===cT||nct(cT,e)&&r===cT.fill?ict:r},oct=sct,act=oct;(function(e){e.exports=act})(Yut);var Pb=Pt(p5);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ca(){return Ca=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ca.apply(this,arguments)}function Qo(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function A1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v5;typeof Object.assign!="function"?v5=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:v5=Object.assign;var Nh=v5,K9=["","webkit","Moz","MS","ms","o"],lct=typeof document>"u"?{style:{}}:document.createElement("div"),uct="function",dp=Math.round,Rh=Math.abs,uN=Date.now;function qx(e,r){for(var t,n,i=r[0].toUpperCase()+r.slice(1),s=0;s<K9.length;){if(t=K9[s],n=t?t+i:r,n in e)return n;s++}}var cu;typeof window>"u"?cu={}:cu=window;var pQ=qx(lct.style,"touchAction"),vQ=pQ!==void 0;function cct(){if(!vQ)return!1;var e={},r=cu.CSS&&cu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?cu.CSS.supports("touch-action",t):!0}),e}var gQ="compute",yQ="auto",g5="manipulation",bh="none",lm="pan-x",um="pan-y",O1=cct(),fct=/mobile|tablet|ip(ad|hone|od)|android/i,mQ="ontouchstart"in cu,hct=qx(cu,"PointerEvent")!==void 0,dct=mQ&&fct.test(navigator.userAgent),Nb="touch",pct="pen",cN="mouse",vct="kinect",gct=25,cs=1,Qh=2,Wn=4,Ns=8,N$=1,Rb=2,Db=4,Bb=8,ov=16,yl=Rb|Db,wh=Bb|ov,bQ=yl|wh,wQ=["x","y"],R$=["clientX","clientY"];function fu(e,r,t){var n;if(e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(n=0;n<e.length;)r.call(t,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function Kx(e,r){return typeof e===uct?e.apply(r&&r[0]||void 0,r):e}function eh(e,r){return e.indexOf(r)>-1}function yct(e){if(eh(e,bh))return bh;var r=eh(e,lm),t=eh(e,um);return r&&t?bh:r||t?r?lm:um:eh(e,g5)?g5:yQ}var $Q=function(){function e(t,n){this.manager=t,this.set(n)}var r=e.prototype;return r.set=function(n){n===gQ&&(n=this.compute()),vQ&&this.manager.element.style&&O1[n]&&(this.manager.element.style[pQ]=n),this.actions=n.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var n=[];return fu(this.manager.recognizers,function(i){Kx(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),yct(n.join(" "))},r.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=eh(o,bh)&&!O1[bh],l=eh(o,um)&&!O1[um],u=eh(o,lm)&&!O1[lm];if(a){var f=n.pointers.length===1,c=n.distance<2,d=n.deltaTime<250;if(f&&c&&d)return}if(!(u&&l)&&(a||l&&s&yl||u&&s&wh))return this.preventSrc(i)},r.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},e}();function fN(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function _Q(e){var r=e.length;if(r===1)return{x:dp(e[0].clientX),y:dp(e[0].clientY)};for(var t=0,n=0,i=0;i<r;)t+=e[i].clientX,n+=e[i].clientY,i++;return{x:dp(t/r),y:dp(n/r)}}function V9(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:dp(e.pointers[t].clientX),clientY:dp(e.pointers[t].clientY)},t++;return{timeStamp:uN(),pointers:r,center:_Q(r),deltaX:e.deltaX,deltaY:e.deltaY}}function D$(e,r,t){t||(t=wQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.sqrt(n*n+i*i)}function y5(e,r,t){t||(t=wQ);var n=r[t[0]]-e[t[0]],i=r[t[1]]-e[t[1]];return Math.atan2(i,n)*180/Math.PI}function xQ(e,r){return e===r?N$:Rh(e)>=Rh(r)?e<0?Rb:Db:r<0?Bb:ov}function mct(e,r){var t=r.center,n=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(r.eventType===cs||s.eventType===Wn)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=i.x+(t.x-n.x),r.deltaY=i.y+(t.y-n.y)}function EQ(e,r,t){return{x:r/e||0,y:t/e||0}}function bct(e,r){return D$(r[0],r[1],R$)/D$(e[0],e[1],R$)}function wct(e,r){return y5(r[1],r[0],R$)+y5(e[1],e[0],R$)}function $ct(e,r){var t=e.lastInterval||r,n=r.timeStamp-t.timeStamp,i,s,o,a;if(r.eventType!==Ns&&(n>gct||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,f=EQ(n,l,u);s=f.x,o=f.y,i=Rh(f.x)>Rh(f.y)?f.x:f.y,a=xQ(l,u),e.lastInterval=r}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;r.velocity=i,r.velocityX=s,r.velocityY=o,r.direction=a}function _ct(e,r){var t=e.session,n=r.pointers,i=n.length;t.firstInput||(t.firstInput=V9(r)),i>1&&!t.firstMultiple?t.firstMultiple=V9(r):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=r.center=_Q(n);r.timeStamp=uN(),r.deltaTime=r.timeStamp-s.timeStamp,r.angle=y5(a,l),r.distance=D$(a,l),mct(t,r),r.offsetDirection=xQ(r.deltaX,r.deltaY);var u=EQ(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Rh(u.x)>Rh(u.y)?u.x:u.y,r.scale=o?bct(o.pointers,n):1,r.rotation=o?wct(o.pointers,n):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,$ct(t,r);var f=e.element,c=r.srcEvent,d;c.composedPath?d=c.composedPath()[0]:c.path?d=c.path[0]:d=c.target,fN(d,f)&&(f=d),r.target=f}function xct(e,r,t){var n=t.pointers.length,i=t.changedPointers.length,s=r&cs&&n-i===0,o=r&(Wn|Ns)&&n-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(e.session={}),t.eventType=r,_ct(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function cm(e){return e.trim().split(/\s+/g)}function by(e,r,t){fu(cm(r),function(n){e.addEventListener(n,t,!1)})}function wy(e,r,t){fu(cm(r),function(n){e.removeEventListener(n,t,!1)})}function G9(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Zv=function(){function e(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Kx(t.options.enable,[t])&&i.handler(s)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&by(this.element,this.evEl,this.domHandler),this.evTarget&&by(this.target,this.evTarget,this.domHandler),this.evWin&&by(G9(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&wy(this.element,this.evEl,this.domHandler),this.evTarget&&wy(this.target,this.evTarget,this.domHandler),this.evWin&&wy(G9(this.element),this.evWin,this.domHandler)},e}();function Dh(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var n=0;n<e.length;){if(t&&e[n][t]==r||!t&&e[n]===r)return n;n++}return-1}var Ect={pointerdown:cs,pointermove:Qh,pointerup:Wn,pointercancel:Ns,pointerout:Ns},Sct={2:Nb,3:pct,4:cN,5:vct},SQ="pointerdown",kQ="pointermove pointerup pointercancel";cu.MSPointerEvent&&!cu.PointerEvent&&(SQ="MSPointerDown",kQ="MSPointerMove MSPointerUp MSPointerCancel");var TQ=function(e){Qo(r,e);function r(){var n,i=r.prototype;return i.evEl=SQ,i.evWin=kQ,n=e.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=r.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=Ect[a],u=Sct[i.pointerType]||i.pointerType,f=u===Nb,c=Dh(s,i.pointerId,"pointerId");l&cs&&(i.button===0||f)?c<0&&(s.push(i),c=s.length-1):l&(Wn|Ns)&&(o=!0),!(c<0)&&(s[c]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(c,1))},r}(Zv);function fm(e){return Array.prototype.slice.call(e,0)}function hN(e,r,t){for(var n=[],i=[],s=0;s<e.length;){var o=r?e[s][r]:e[s];Dh(i,o)<0&&n.push(e[s]),i[s]=o,s++}return t&&(r?n=n.sort(function(a,l){return a[r]>l[r]}):n=n.sort()),n}var kct={touchstart:cs,touchmove:Qh,touchend:Wn,touchcancel:Ns},Tct="touchstart touchmove touchend touchcancel",dN=function(e){Qo(r,e);function r(){var n;return r.prototype.evTarget=Tct,n=e.apply(this,arguments)||this,n.targetIds={},n}var t=r.prototype;return t.handler=function(i){var s=kct[i.type],o=Ict.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Nb,srcEvent:i})},r}(Zv);function Ict(e,r){var t=fm(e.touches),n=this.targetIds;if(r&(cs|Qh)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,s,o=fm(e.changedTouches),a=[],l=this.target;if(s=t.filter(function(u){return fN(u.target,l)}),r===cs)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),r&(Wn|Ns)&&delete n[o[i].identifier],i++;if(a.length)return[hN(s.concat(a),"identifier",!0),a]}var Act={mousedown:cs,mousemove:Qh,mouseup:Wn},Oct="mousedown",Cct="mousemove mouseup",pN=function(e){Qo(r,e);function r(){var n,i=r.prototype;return i.evEl=Oct,i.evWin=Cct,n=e.apply(this,arguments)||this,n.pressed=!1,n}var t=r.prototype;return t.handler=function(i){var s=Act[i.type];s&cs&&i.button===0&&(this.pressed=!0),s&Qh&&i.which!==1&&(s=Wn),this.pressed&&(s&Wn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:cN,srcEvent:i}))},r}(Zv),Pct=2500,Y9=25;function Z9(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Pct)}}function Nct(e,r){e&cs?(this.primaryTouch=r.changedPointers[0].identifier,Z9.call(this,r)):e&(Wn|Ns)&&Z9.call(this,r)}function Rct(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(r-i.x),o=Math.abs(t-i.y);if(s<=Y9&&o<=Y9)return!0}return!1}var IQ=function(){var e=function(r){Qo(t,r);function t(i,s){var o;return o=r.call(this,i,s)||this,o.handler=function(a,l,u){var f=u.pointerType===Nb,c=u.pointerType===cN;if(!(c&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(f)Nct.call(A1(A1(o)),l,u);else if(c&&Rct.call(A1(A1(o)),u))return;o.callback(a,l,u)}},o.touch=new dN(o.manager,o.handler),o.mouse=new pN(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Zv);return e}();function Dct(e){var r,t=e.options.inputClass;return t?r=t:hct?r=TQ:dct?r=dN:mQ?r=IQ:r=pN,new r(e,xct)}function pp(e,r,t){return Array.isArray(e)?(fu(e,t[r],t),!0):!1}var yw=1,Ko=2,av=4,Nc=8,hu=Nc,hm=16,hl=32,Bct=1;function Mct(){return Bct++}function C1(e,r){var t=r.manager;return t?t.get(e):e}function X9(e){return e&hm?"cancel":e&Nc?"end":e&av?"move":e&Ko?"start":""}var Mb=function(){function e(t){t===void 0&&(t={}),this.options=Ca({enable:!0},t),this.id=Mct(),this.manager=null,this.state=yw,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(n){return Nh(this.options,n),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(n){if(pp(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=C1(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},r.dropRecognizeWith=function(n){return pp(n,"dropRecognizeWith",this)?this:(n=C1(n,this),delete this.simultaneous[n.id],this)},r.requireFailure=function(n){if(pp(n,"requireFailure",this))return this;var i=this.requireFail;return n=C1(n,this),Dh(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},r.dropRequireFailure=function(n){if(pp(n,"dropRequireFailure",this))return this;n=C1(n,this);var i=Dh(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},r.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Nc&&o(i.options.event+X9(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Nc&&o(i.options.event+X9(s))},r.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=hl},r.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(hl|yw)))return!1;n++}return!0},r.recognize=function(n){var i=Nh({},n);if(!Kx(this.options.enable,[this,i])){this.reset(),this.state=hl;return}this.state&(hu|hm|hl)&&(this.state=yw),this.state=this.process(i),this.state&(Ko|av|Nc|hm)&&this.tryEmit(i)},r.process=function(n){},r.getTouchAction=function(){},r.reset=function(){},e}(),m5=function(e){Qo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=r.prototype;return t.getTouchAction=function(){return[g5]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&cs&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Wn)return this.failTimeout();var f=this.pTime?i.timeStamp-this.pTime<o.interval:!0,c=!this.pCenter||D$(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!c||!f?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=hu,s.tryEmit()},o.interval),Ko):hu}return hl},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=hl},this.options.interval),hl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===hu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Mb),lv=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({pointers:1},n))||this}var t=r.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(Ko|av),l=this.attrTest(i);return a&&(o&Ns||!l)?s|hm:a||l?o&Wn?s|Nc:s&Ko?s|av:Ko:hl},r}(Mb);function AQ(e){return e===ov?"down":e===Bb?"up":e===Rb?"left":e===Db?"right":""}var vN=function(e){Qo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"pan",threshold:10,pointers:1,direction:bQ},n))||this,i.pX=null,i.pY=null,i}var t=r.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&yl&&s.push(um),i&wh&&s.push(lm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,f=i.deltaY;return l&s.direction||(s.direction&yl?(l=u===0?N$:u<0?Rb:Db,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=f===0?N$:f<0?Bb:ov,o=f!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return lv.prototype.attrTest.call(this,i)&&(this.state&Ko||!(this.state&Ko)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=AQ(i.direction);s&&(i.additionalEvent=this.options.event+s),e.prototype.emit.call(this,i)},r}(lv),OQ=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"swipe",threshold:10,velocity:.3,direction:yl|wh,pointers:1},n))||this}var t=r.prototype;return t.getTouchAction=function(){return vN.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(yl|wh)?o=i.overallVelocity:s&yl?o=i.overallVelocityX:s&wh&&(o=i.overallVelocityY),e.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Rh(o)>this.options.velocity&&i.eventType&Wn},t.emit=function(i){var s=AQ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},r}(lv),CQ=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"pinch",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[bh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Ko)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}e.prototype.emit.call(this,i)},r}(lv),PQ=function(e){Qo(r,e);function r(n){return n===void 0&&(n={}),e.call(this,Ca({event:"rotate",threshold:0,pointers:2},n))||this}var t=r.prototype;return t.getTouchAction=function(){return[bh]},t.attrTest=function(i){return e.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Ko)},r}(lv),NQ=function(e){Qo(r,e);function r(n){var i;return n===void 0&&(n={}),i=e.call(this,Ca({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=r.prototype;return t.getTouchAction=function(){return[yQ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Wn|Ns)&&!u)this.reset();else if(i.eventType&cs)this.reset(),this._timer=setTimeout(function(){s.state=hu,s.tryEmit()},o.time);else if(i.eventType&Wn)return hu;return hl},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===hu&&(i&&i.eventType&Wn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=uN(),this.manager.emit(this.options.event,this._input)))},r}(Mb),RQ={domEvents:!1,touchAction:gQ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},J9=[[PQ,{enable:!1}],[CQ,{enable:!1},["rotate"]],[OQ,{direction:yl}],[vN,{direction:yl},["swipe"]],[m5],[m5,{event:"doubletap",taps:2},["tap"]],[NQ]],Lct=1,Q9=2;function ej(e,r){var t=e.element;if(t.style){var n;fu(e.options.cssProps,function(i,s){n=qx(t.style,s),r?(e.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=e.oldCssProps[n]||""}),r||(e.oldCssProps={})}}function Fct(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var tj=function(){function e(t,n){var i=this;this.options=Nh({},RQ,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Dct(this),this.touchAction=new $Q(this,this.options.touchAction),ej(this,!0),fu(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var r=e.prototype;return r.set=function(n){return Nh(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},r.stop=function(n){this.session.stopped=n?Q9:Lct},r.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&hu)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==Q9&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ko|av|Nc)&&(i.curRecognizer=s,a=s),l++}},r.get=function(n){if(n instanceof Mb)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},r.add=function(n){if(pp(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},r.remove=function(n){if(pp(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Dh(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},r.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return fu(cm(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},r.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return fu(cm(n),function(o){i?s[o]&&s[o].splice(Dh(s[o],i),1):delete s[o]}),this},r.emit=function(n,i){this.options.domEvents&&Fct(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},r.destroy=function(){this.element&&ej(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),jct={touchstart:cs,touchmove:Qh,touchend:Wn,touchcancel:Ns},zct="touchstart",Hct="touchstart touchmove touchend touchcancel",Uct=function(e){Qo(r,e);function r(){var n,i=r.prototype;return i.evTarget=zct,i.evWin=Hct,n=e.apply(this,arguments)||this,n.started=!1,n}var t=r.prototype;return t.handler=function(i){var s=jct[i.type];if(s===cs&&(this.started=!0),!!this.started){var o=Wct.call(this,i,s);s&(Wn|Ns)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Nb,srcEvent:i})}},r}(Zv);function Wct(e,r){var t=fm(e.touches),n=fm(e.changedTouches);return r&(Wn|Ns)&&(t=hN(t.concat(n),"identifier",!0)),[t,n]}function DQ(e,r,t){var n="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),e.apply(this,arguments)}}var BQ=DQ(function(e,r,t){for(var n=Object.keys(r),i=0;i<n.length;)(!t||t&&e[n[i]]===void 0)&&(e[n[i]]=r[n[i]]),i++;return e},"extend","Use `assign`."),qct=DQ(function(e,r){return BQ(e,r,!0)},"merge","Use `assign`.");function Kct(e,r,t){var n=r.prototype,i;i=e.prototype=Object.create(n),i.constructor=e,i._super=n,t&&Nh(i,t)}function rj(e,r){return function(){return e.apply(r,arguments)}}var MQ=function(){var e=function(t,n){return n===void 0&&(n={}),new tj(t,Ca({recognizers:J9.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=bQ,e.DIRECTION_DOWN=ov,e.DIRECTION_LEFT=Rb,e.DIRECTION_RIGHT=Db,e.DIRECTION_UP=Bb,e.DIRECTION_HORIZONTAL=yl,e.DIRECTION_VERTICAL=wh,e.DIRECTION_NONE=N$,e.DIRECTION_DOWN=ov,e.INPUT_START=cs,e.INPUT_MOVE=Qh,e.INPUT_END=Wn,e.INPUT_CANCEL=Ns,e.STATE_POSSIBLE=yw,e.STATE_BEGAN=Ko,e.STATE_CHANGED=av,e.STATE_ENDED=Nc,e.STATE_RECOGNIZED=hu,e.STATE_CANCELLED=hm,e.STATE_FAILED=hl,e.Manager=tj,e.Input=Zv,e.TouchAction=$Q,e.TouchInput=dN,e.MouseInput=pN,e.PointerEventInput=TQ,e.TouchMouseInput=IQ,e.SingleTouchInput=Uct,e.Recognizer=Mb,e.AttrRecognizer=lv,e.Tap=m5,e.Pan=vN,e.Swipe=OQ,e.Pinch=CQ,e.Rotate=PQ,e.Press=NQ,e.on=by,e.off=wy,e.each=fu,e.merge=qct,e.extend=BQ,e.bindFn=rj,e.assign=Nh,e.inherit=Kct,e.bindFn=rj,e.prefixed=qx,e.toArray=fm,e.inArray=Dh,e.uniqueArray=hN,e.splitStr=cm,e.boolOrFn=Kx,e.hasParent=fN,e.addEventListeners=by,e.removeEventListeners=wy,e.defaults=Nh({},RQ,{preset:J9}),e}();MQ.defaults;var Vct=MQ;function LQ(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Gct(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Gct(e,r){var t;if(e){if(typeof e=="string")return nj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nj(e,r)}}function nj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}ef("DELETE");function Vx(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return Yct(r.length?r:[P$()])}function Yct(e){var r=Zct(e),t=bn(r,3),n=t[0],i=t[1],s=t[2],o=1,a=function(){var u=2091639*n+o*23283064365386963e-26;return n=i,i=s,s=u-(o=u|0)};return a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function Zct(){for(var e=Xct(),r=e(" "),t=e(" "),n=e(" "),i=0;i<arguments.length;i++)r-=e(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),t-=e(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=e(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[r,t,n]}function Xct(){var e=4022871197;return function(r){for(var t=r.toString(),n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function Jct(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var gN=typeof window<"u"?window.Hammer||Vct:function(){return Jct()};function dl(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var n=gN(this._dom.overlay);n.on("tap",nt(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){n.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];qr(i).call(i,function(s){n.on(s,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(s){Qct(s.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(s){("key"in s?s.key==="Escape":s.keyCode===27)&&r.deactivate()}}LX(dl.prototype);dl.current=null;dl.prototype.destroy=function(){var e,r;this.deactivate();var t=LQ(yh(e=uu(r=this._cleanupQueue).call(r,0)).call(e)),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i()}}catch(s){t.e(s)}finally{t.f()}};dl.prototype.activate=function(){dl.current&&dl.current.deactivate(),dl.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};dl.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};dl.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Qct(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var eft=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tft=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rft=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,nft=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function gc(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(gc(r),e.removeChild(r))}}function wc(e){return e instanceof String||typeof e=="string"}function ij(e){return Dr(e)==="object"&&e!==null}function Bh(e,r,t,n){var i=!1;n===!0&&(i=r[t]===null&&e[t]!==void 0),i?delete e[t]:e[t]=r[t]}function FQ(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var n in e)if(r[n]!==void 0)if(r[n]===null||Dr(r[n])!=="object")Bh(e,r,n,t);else{var i=e[n],s=r[n];ij(i)&&ij(s)&&FQ(i,s,t)}}function Xv(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Lr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var s=e[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)r[s]===void 0&&(r[s]={}),r[s].constructor===Object?Zr(r[s],t[s],!1,n):Bh(r,t,s,n);else{if(Lr(t[s]))throw new TypeError("Arrays are not supported by deepExtend");Bh(r,t,s,n)}}return r}function B$(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Lr(t))throw new TypeError("Arrays are not supported by deepExtend");for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!vl(e).call(e,i))if(t[i]&&t[i].constructor===Object)r[i]===void 0&&(r[i]={}),r[i].constructor===Object?Zr(r[i],t[i]):Bh(r,t,i,n);else if(Lr(t[i])){r[i]=[];for(var s=0;s<t[i].length;s++)r[i].push(t[i][s])}else Bh(r,t,i,n);return r}function Zr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)||t===!0)if(Dr(r[i])==="object"&&r[i]!==null&&P9(r[i])===Object.prototype)e[i]===void 0?e[i]=Zr({},r[i],t):Dr(e[i])==="object"&&e[i]!==null&&P9(e[i])===Object.prototype?Zr(e[i],r[i],t):Bh(e,r,i,n);else if(Lr(r[i])){var s;e[i]=Oi(s=r[i]).call(s)}else Bh(e,r,i,n);return e}function M$(e,r){var t;return aN(t=[]).call(t,ll(e),[r])}function ift(e){return Oi(e).call(e)}function sft(e){return e.getBoundingClientRect().left}function oft(e){return e.getBoundingClientRect().top}function gr(e,r){if(Lr(e))for(var t=e.length,n=0;n<t;n++)r(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r(e[i],i,e)}function aft(e,r,t,n){if(e.addEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&vl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,n)}else e.attachEvent("on"+r,t)}function lft(e,r,t,n){if(e.removeEventListener){var i;n===void 0&&(n=!1),r==="mousewheel"&&vl(i=navigator.userAgent).call(i,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,n)}else e.detachEvent("on"+r,t)}function yN(e){var r;switch(e.length){case 3:case 4:return r=tft.exec(e),r?{r:ma(r[1]+r[1],16),g:ma(r[2]+r[2],16),b:ma(r[3]+r[3],16)}:null;case 6:case 7:return r=eft.exec(e),r?{r:ma(r[1],16),g:ma(r[2],16),b:ma(r[3],16)}:null;default:return null}}function Ho(e,r){if(vl(e).call(e,"rgba"))return e;if(vl(e).call(e,"rgb")){var t=e.substr(Sr(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var n=yN(e);return n==null?e:"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}function jQ(e,r,t){var n;return"#"+Oi(n=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(n,1)}function b5(e,r){if(wc(e)){var t=e;if(HQ(t)){var n,i=sv(n=t.substr(4).substr(0,t.length-5).split(",")).call(n,function(d){return ma(d)});t=jQ(i[0],i[1],i[2])}if(zQ(t)===!0){var s=uft(t),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=w5(a.h,a.s,a.v),u=w5(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var f={background:e.background||r.background,border:e.border||r.border,highlight:wc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:wc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return f}else{var c={background:e.background||void 0,border:e.border||void 0,highlight:wc(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:wc(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return c}}function ey(e,r,t){e=e/255,r=r/255,t=t/255;var n=Math.min(e,Math.min(r,t)),i=Math.max(e,Math.max(r,t));if(n===i)return{h:0,s:0,v:n};var s=e===n?r-t:t===n?e-r:t-e,o=e===n?3:t===n?1:5,a=60*(o-s/(i-n))/360,l=(i-n)/i,u=i;return{h:a,s:l,v:u}}function mw(e,r,t){var n,i,s,o=Math.floor(e*6),a=e*6-o,l=t*(1-r),u=t*(1-a*r),f=t*(1-(1-a)*r);switch(o%6){case 0:n=t,i=f,s=l;break;case 1:n=u,i=t,s=l;break;case 2:n=l,i=t,s=f;break;case 3:n=l,i=u,s=t;break;case 4:n=f,i=l,s=t;break;case 5:n=t,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function w5(e,r,t){var n=mw(e,r,t);return jQ(n.r,n.g,n.b)}function uft(e){var r=yN(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return ey(r.r,r.g,r.b)}function zQ(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function HQ(e){return rft.test(e)}function cft(e){return nft.test(e)}function Rc(e){if(e===null||Dr(e)!=="object")return null;if(e instanceof Element)return e;var r=mh(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Dr(e[t])=="object"&&(r[t]=Rc(e[t]));return r}function Mo(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=function(w){return w!=null},s=function(w){return w!==null&&Dr(w)==="object"},o=function(w){for(var b in w)if(Object.prototype.hasOwnProperty.call(w,b))return!1;return!0};if(!s(e))throw new Error("Parameter mergeTarget must be an object");if(!s(r))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(w,b,T){s(w[T])||(w[T]={});var _=b[T],A=w[T];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(A[x]=_[x])},l=r[t],u=s(n)&&!o(n),f=u?n[t]:void 0,c=f?f.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){s(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!s(e[t]))if(i(f))e[t]=mh(f);else return;if(s(l)){var d=!0;l.enabled!==void 0?d=l.enabled:c!==void 0&&(d=f.enabled),a(e,r,t),e[t].enabled=d}}}var fft={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function yc(e,r){var t;Lr(r)||(r=[r]);var n=LQ(e),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s){t=s[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t<"u")break}}}catch(a){n.e(a)}finally{n.f()}return t}var hft={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},dft=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ft(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return ht(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return hft[t]}},{key:"setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var i,s=this._isColorString(t);if(s!==void 0&&(t=s),wc(t)===!0){if(HQ(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(cft(t)===!0){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(zQ(t)===!0){var l=yN(t);i={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:u}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Cb(t));this._setColor(i,n)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n===!0&&(this.previousColor=Un({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",gl(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n===!0&&(this.initialColor=Un({},t)),this.color=t;var i=ey(t.r,t.g,t.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var n=ey(this.color.r,this.color.g,this.color.b);n.v=t/100;var i=mw(n.h,n.s,n.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,n=ey(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-n.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Pb(i).call(i),this.brightnessRange.value=100*n.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,n,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=nt(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=nt(n=this._apply).call(n,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=nt(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=nt(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new gN(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(n){n.isFirst&&t._moveSelector(n)}),this.hammer.on("tap",function(n){t._moveSelector(n)}),this.hammer.on("panstart",function(n){t._moveSelector(n)}),this.hammer.on("panmove",function(n){t._moveSelector(n)}),this.hammer.on("panend",function(n){t._moveSelector(n)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,n,i);var s,o,a,l;this.centerCoordinates={x:n*.5,y:i*.5},this.r=.49*n;var u=2*Math.PI/360,f=1/360,c=1/this.r,d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(u*a),o=this.centerCoordinates.y+l*Math.cos(u*a),d=mw(a*f,l*c,1),t.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",t.fillRect(s-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,n,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var n=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-n.left,s=t.center.y-n.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,u=s-o,f=Math.atan2(l,u),c=.98*Math.min(Math.sqrt(l*l+u*u),a),d=Math.cos(f)*c+o,y=Math.sin(f)*c+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=y-.5*this.colorPickerSelector.clientWidth+"px";var w=f/(2*Math.PI);w=w<0?w+1:w;var b=c/this.r,T=ey(this.color.r,this.color.g,this.color.b);T.h=w,T.s=b;var _=mw(T.h,T.s,T.v);_.a=this.color.a,this.color=_,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function $5(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var n=document.createElement(r[0]);return n.appendChild($5.apply(void 0,ll(Oi(r).call(r,1)))),n}var pft=function(){function e(r,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ft(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Un(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new dft(i),this.wrapper=void 0}return ht(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof t=="string")this.options.filter=t;else if(Lr(t))this.options.filter=t.join();else if(Dr(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),As(t)!==void 0&&(this.options.filter=As(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(n=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,n=t):typeof t=="function"&&(this.options.filter=t,n=!0);As(this.options)===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=As(this.options),n=0,i=!1;for(var s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof t=="function"?(i=t(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(t===!0||Sr(t).call(t,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,n>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var n=this.moduleOptions,i=0;i<t.length;i++)if(n[t[i]]!==void 0)n=n[t[i]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return qr(s).call(s,function(a){n.appendChild(a)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerText=t,this._makeItem([],n)}},{key:"_makeLabel",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+n.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild($5("i","b",t))}else s.innerText=t+":";return s}},{key:"_makeDropdown",value:function(t,n,i){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var o=0;n!==void 0&&Sr(t).call(t,n)!==-1&&(o=Sr(t).call(t,n));for(var a=0;a<t.length;a++){var l=document.createElement("option");l.value=t[a],a===o&&(l.selected="selected"),l.innerText=t[a],s.appendChild(l)}var u=this;s.onchange=function(){u._update(this.value,i)};var f=this._makeLabel(i[i.length-1],i);this._makeItem(i,f,s)}},{key:"_makeRange",value:function(t,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=a}catch{}u.step=l;var f="",c=0;if(n!==void 0){var d=1.2;n<0&&n*d<o?(u.min=Math.ceil(n*d),c=u.min,f="range increased"):n/d<o&&(u.min=Math.ceil(n/d),c=u.min,f="range increased"),n*d>a&&a!==1&&(u.max=Math.ceil(n*d),c=u.max,f="range increased"),u.value=n}else u.value=s;var y=document.createElement("input");y.className="vis-configuration vis-config-rangeinput",y.value=u.value;var w=this;u.onchange=function(){y.value=this.value,w._update(Number(this.value),i)},u.oninput=function(){y.value=this.value};var b=this._makeLabel(i[i.length-1],i),T=this._makeItem(i,b,u,y);f!==""&&this.popupHistory[T]!==c&&(this.popupHistory[T]=c,this._setupPopup(f,T))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=function(){t._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(t,n){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerText=t,s.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],i=n.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=gl(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=gl(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,n,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=t,n!==void 0&&(s.checked=n,n!==t&&(Dr(t)==="object"?n!==t.enabled&&this.changedOptions.push({path:i,value:n}):this.changedOptions.push({path:i,value:n})));var o=this;s.onchange=function(){o._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeTextInput",value:function(t,n,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==t&&this.changedOptions.push({path:i,value:n});var o=this;s.onchange=function(){o._update(this.value,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}},{key:"_makeColorField",value:function(t,n,i){var s=this,o=t[1],a=document.createElement("div");n=n===void 0?o:n,n!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=n):a.className="vis-configuration vis-config-colorBlock none",n=n===void 0?o:n,a.onclick=function(){s._showColorPicker(n,a,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,a)}},{key:"_showColorPicker",value:function(t,n,i){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var a="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";n.style.backgroundColor=a,s._update(a,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=As(this.options),a=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){s=!0;var u=t[l],f=M$(n,l);if(typeof o=="function"&&(s=o(l,n),s===!1&&!Lr(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,s=this._handleObject(u,f,!0),this.allowCreation=i===!1)),s!==!1){a=!0;var c=this._getValue(f);if(Lr(u))this._handleArray(u,c,f);else if(typeof u=="string")this._makeTextInput(u,c,f);else if(typeof u=="boolean")this._makeCheckbox(u,c,f);else if(u instanceof Object){if(!this.hideOption(n,l,this.moduleOptions))if(u.enabled!==void 0){var d=M$(f,"enabled"),y=this._getValue(d);if(y===!0){var w=this._makeLabel(l,f,!0);this._makeItem(f,w),a=this._handleObject(u,f)||a}else this._makeCheckbox(u,y,f)}else{var b=this._makeLabel(l,f,!0);this._makeItem(f,b),a=this._handleObject(u,f)||a}}else console.error("dont know how to handle",u,l,f)}}return a}},{key:"_handleArray",value:function(t,n,i){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,n,i),t[1]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="string"?(this._makeDropdown(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:n})):typeof t[0]=="number"&&(this._makeRange(t,n,i),t[0]!==n&&this.changedOptions.push({path:i,value:Number(n)}))}},{key:"_update",value:function(t,n){var i=this._constructOptions(t,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<n.length;o++)n[o]!=="global"&&(s[n[o]]===void 0&&(s[n[o]]={}),o!==n.length-1?s=s[n[o]]:s[n[o]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild($5("pre","const options = "+Cb(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,t);return t}}]),e}(),vft=function(){function e(r,t){ft(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return ht(e,[{key:"setPosition",value:function(t,n){this.x=ma(t),this.y=ma(n)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var n=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"){var u=!1,f=!0;this.y-n<this.padding&&(f=!1),this.x+i>o-this.padding&&(u=!0),u?a=this.x-i:a=this.x,f?l=this.y-n:l=this.y}else l=this.y-n,l+n+this.padding>s&&(l=s-n-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Fg=!1,sj,_5="background: #FFeeee; color: #dd0000",gft=function(){function e(){ft(this,e)}return ht(e,null,[{key:"validate",value:function(t,n,i){Fg=!1,sj=n;var s=n;return i!==void 0&&(s=n[i]),e.parse(t,s,[]),Fg}},{key:"parse",value:function(t,n,i){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.check(s,t,n,i)}},{key:"check",value:function(t,n,i,s){if(i[t]===void 0&&i.__any__===void 0){e.getSuggestion(t,i,s);return}var o=t,a=!0;i[t]===void 0&&i.__any__!==void 0&&(o="__any__",a=e.getType(n[t])==="object");var l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,n,i,o,l,s)}},{key:"checkFields",value:function(t,n,i,s,o,a){var l=function(d){console.error("%c"+d+e.printLocation(a,t),_5)},u=e.getType(n[t]),f=o[u];f!==void 0?e.getType(f)==="array"&&Sr(f).call(f,n[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(f)+' not "'+n[t]+'". '),Fg=!0):u==="object"&&s!=="__any__"&&(a=M$(a,t),e.parse(n[t],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(mn(o))+". Received ["+u+'] "'+n[t]+'"'),Fg=!0)}},{key:"getType",value:function(t){var n=Dr(t);return n==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Lr(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(t,n,i){var s=e.findInOptions(t,n,i,!1),o=e.findInOptions(t,sj,[],!0),a=8,l=4,u;s.indexMatch!==void 0?u=" in "+e.printLocation(s.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?u=" in "+e.printLocation(s.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):s.distance<=a?u='. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,t):u=". Did you mean one of these: "+e.print(mn(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+u,_5),Fg=!0}},{key:"findInOptions",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],u=t.toLowerCase(),f=void 0;for(var c in n){var d=void 0;if(n[c].__type__!==void 0&&s===!0){var y=e.findInOptions(t,n[c],M$(i,c));o>y.distance&&(a=y.closestMatch,l=y.path,o=y.distance,f=y.indexMatch)}else{var w;Sr(w=c.toLowerCase()).call(w,u)!==-1&&(f=c),d=e.levenshteinDistance(t,c),o>d&&(a=c,l=ift(i),o=d)}}return{closestMatch:a,path:l,distance:o,indexMatch:f}}},{key:"printLocation",value:function(t,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+i+`options = {
`,o=0;o<t.length;o++){for(var a=0;a<o+1;a++)s+="  ";s+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)s+="  ";s+=n+`
`;for(var u=0;u<t.length+1;u++){for(var f=0;f<t.length-u;f++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(t){return Cb(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,n){if(t.length===0)return n.length;if(n.length===0)return t.length;var i=[],s;for(s=0;s<=n.length;s++)i[s]=[s];var o;for(o=0;o<=t.length;o++)i[0][o]=o;for(s=1;s<=n.length;s++)for(o=1;o<=t.length;o++)n.charAt(s-1)==t.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[n.length][t.length]}}]),e}(),yft=dl,mft=pft,Ip=gN,bft=vft,UQ=_5,wft=gft;function $ft(e){return xc=e,Sft()}var WQ={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},mN=mh(WQ);mN.color="color.color";mN.style="dashes";var rs={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},oj={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},xc="",uv=0,fr="",jt="",Ss=rs.NULL;function _ft(){uv=0,fr=xc.charAt(0)}function ai(){uv++,fr=xc.charAt(uv)}function Kd(){return xc.charAt(uv+1)}function aj(e){var r=e.charCodeAt(0);return r<47?r===35||r===46:r<59?r>47:r<91?r>64:r<96?r===95:r<123?r>96:!1}function Kc(e,r){if(e||(e={}),r)for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}function xft(e,r,t){for(var n=r.split("."),i=e;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=t}}function qQ(e,r){for(var t,n,i=null,s=[e],o=e;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(r.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:r.id},e.node&&(i.attr=Kc(i.attr,e.node))),t=s.length-1;t>=0;t--){var a,l=s[t];l.nodes||(l.nodes=[]),Sr(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}r.attr&&(i.attr=Kc(i.attr,r.attr))}function Eft(e,r){if(e.edges||(e.edges=[]),e.edges.push(r),e.edge){var t=Kc({},e.edge);r.attr=Kc(t,r.attr)}}function KQ(e,r,t,n,i){var s={from:r,to:t,type:n};return e.edge&&(s.attr=Kc({},e.edge)),s.attr=Kc(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Xr(){for(Ss=rs.NULL,jt="";fr===" "||fr==="	"||fr===`
`||fr==="\r";)ai();do{var e=!1;if(fr==="#"){for(var r=uv-1;xc.charAt(r)===" "||xc.charAt(r)==="	";)r--;if(xc.charAt(r)===`
`||xc.charAt(r)===""){for(;fr!=""&&fr!=`
`;)ai();e=!0}}if(fr==="/"&&Kd()==="/"){for(;fr!=""&&fr!=`
`;)ai();e=!0}if(fr==="/"&&Kd()==="*"){for(;fr!="";)if(fr==="*"&&Kd()==="/"){ai(),ai();break}else ai();e=!0}for(;fr===" "||fr==="	"||fr===`
`||fr==="\r";)ai()}while(e);if(fr===""){Ss=rs.DELIMITER;return}var t=fr+Kd();if(oj[t]){Ss=rs.DELIMITER,jt=t,ai(),ai();return}if(oj[fr]){Ss=rs.DELIMITER,jt=fr,ai();return}if(aj(fr)||fr==="-"){for(jt+=fr,ai();aj(fr);)jt+=fr,ai();jt==="false"?jt=!1:jt==="true"?jt=!0:isNaN(Number(jt))||(jt=Number(jt)),Ss=rs.IDENTIFIER;return}if(fr==='"'){for(ai();fr!=""&&(fr!='"'||fr==='"'&&Kd()==='"');)fr==='"'?(jt+=fr,ai()):fr==="\\"&&Kd()==="n"?(jt+=`
`,ai()):jt+=fr,ai();if(fr!='"')throw ns('End of string " expected');ai(),Ss=rs.IDENTIFIER;return}for(Ss=rs.UNKNOWN;fr!="";)jt+=fr,ai();throw new SyntaxError('Syntax error in part "'+ZQ(jt,30)+'"')}function Sft(){var e={};if(_ft(),Xr(),jt==="strict"&&(e.strict=!0,Xr()),(jt==="graph"||jt==="digraph")&&(e.type=jt,Xr()),Ss===rs.IDENTIFIER&&(e.id=jt,Xr()),jt!="{")throw ns("Angle bracket { expected");if(Xr(),VQ(e),jt!="}")throw ns("Angle bracket } expected");if(Xr(),jt!=="")throw ns("End of file expected");return Xr(),delete e.node,delete e.edge,delete e.graph,e}function VQ(e){for(;jt!==""&&jt!="}";)kft(e),jt===";"&&Xr()}function kft(e){var r=GQ(e);if(r){YQ(e,r);return}var t=Tft(e);if(!t){if(Ss!=rs.IDENTIFIER)throw ns("Identifier expected");var n=jt;if(Xr(),jt==="="){if(Xr(),Ss!=rs.IDENTIFIER)throw ns("Identifier expected");e[n]=jt,Xr()}else Ift(e,n)}}function GQ(e){var r=null;if(jt==="subgraph"&&(r={},r.type="subgraph",Xr(),Ss===rs.IDENTIFIER&&(r.id=jt,Xr())),jt==="{"){if(Xr(),r||(r={}),r.parent=e,r.node=e.node,r.edge=e.edge,r.graph=e.graph,VQ(r),jt!="}")throw ns("Angle bracket } expected");Xr(),delete r.node,delete r.edge,delete r.graph,delete r.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(r)}return r}function Tft(e){return jt==="node"?(Xr(),e.node=$y(),"node"):jt==="edge"?(Xr(),e.edge=$y(),"edge"):jt==="graph"?(Xr(),e.graph=$y(),"graph"):null}function Ift(e,r){var t={id:r},n=$y();n&&(t.attr=n),qQ(e,t),YQ(e,r)}function YQ(e,r){for(;jt==="->"||jt==="--";){var t,n=jt;Xr();var i=GQ(e);if(i)t=i;else{if(Ss!=rs.IDENTIFIER)throw ns("Identifier or subgraph expected");t=jt,qQ(e,{id:t}),Xr()}var s=$y(),o=KQ(e,r,t,n,s);Eft(e,o),r=t}}function $y(){for(var e,r=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;jt==="[";){for(Xr(),r={};jt!==""&&jt!="]";){if(Ss!=rs.IDENTIFIER)throw ns("Attribute name expected");var o=jt;if(Xr(),jt!="=")throw ns("Equal sign = expected");if(Xr(),Ss!=rs.IDENTIFIER)throw ns("Attribute value expected");var a=jt;o==="style"&&(a=t[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:r,name:o,value:a}),s.push(o),Xr(),jt==","&&Xr()}if(jt!="]")throw ns("Bracket ] expected");Xr()}if(vl(s).call(s,"dir")){var u={};for(u.arrows={},e=0;e<i.length;e++)if(i[e].name==="arrows")if(i[e].value.to!=null)u.arrows.to=e;else if(i[e].value.from!=null)u.arrows.from=e;else throw ns("Invalid value of arrows");else i[e].name==="dir"&&(u.dir=e);var f=i[u.dir].value;if(!vl(s).call(s,"arrows"))if(f==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(f==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(f==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(f==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw ns('Invalid dir type "'+f+'"');var c,d;if(f==="both")u.arrows.to&&u.arrows.from?(d=i[u.arrows.to].value.to.type,c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}},uu(i).call(i,u.arrows.from,1)):u.arrows.to?(d=i[u.arrows.to].value.to.type,c="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="arrow",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}});else if(f==="back")u.arrows.to&&u.arrows.from?(d="",c=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.to?(d="",c="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="",c=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(f==="none"){var y;u.arrows.to?y=u.arrows.to:y=u.arrows.from,i[y]={attr:i[y].attr,name:i[y].name,value:""}}else if(f==="forward")u.arrows.to&&u.arrows.from?(d=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.to?(d=i[u.arrows.to].value.to.type,c="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}):u.arrows.from&&(d="arrow",c="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:c}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw ns('Invalid dir type "'+f+'"');uu(i).call(i,u.dir,1)}var w;if(vl(s).call(s,"penwidth")){var b=[];for(w=i.length,e=0;e<w;e++)i[e].name!=="width"&&(i[e].name==="penwidth"&&(i[e].name="width"),b.push(i[e]));i=b}for(w=i.length,e=0;e<w;e++)xft(i[e].attr,i[e].name,i[e].value);return r}function ns(e){return new SyntaxError(e+', got "'+ZQ(jt,30)+'" (char '+uv+")")}function ZQ(e,r){return e.length<=r?e:e.substr(0,27)+"..."}function Aft(e,r,t){Lr(e)?qr(e).call(e,function(n){Lr(r)?qr(r).call(r,function(i){t(n,i)}):t(n,r)}):Lr(r)?qr(r).call(r,function(n){t(e,n)}):t(e,r)}function fT(e,r,t){for(var n=r.split("."),i=n.pop(),s=e,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=t,e}function lj(e,r){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=r[n];Lr(i)?qr(i).call(i,function(s){fT(t,s,e[n])}):typeof i=="string"?fT(t,i,e[n]):fT(t,n,e[n])}return t}function Oft(e){var r=$ft(e),t={nodes:[],edges:[],options:{}};if(r.nodes){var n;qr(n=r.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};Kc(a,lj(o.attr,WQ)),a.image&&(a.shape="image"),t.nodes.push(a)})}if(r.edges){var i,s=function(a){var l={from:a.from,to:a.to};return Kc(l,lj(a.attr,mN)),l.arrows==null&&a.type==="->"&&(l.arrows="to"),l};qr(i=r.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;qr(u=o.from.edges).call(u,function(c){var d=s(c);t.edges.push(d)})}if(Aft(a,l,function(c,d){var y=KQ(t,c.id,d.id,o.type,o.attr),w=s(y);t.edges.push(w)}),o.to instanceof Object&&o.to.edges){var f;qr(f=o.to.edges).call(f,function(c){var d=s(c);t.edges.push(d)})}})}return r.attr&&(t.options=r.attr),t}function Cft(e,r){var t,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};r!=null&&(r.fixed!=null&&(n.nodes.fixed=r.fixed),r.parseColor!=null&&(n.nodes.parseColor=r.parseColor),r.inheritColor!=null&&(n.edges.inheritColor=r.inheritColor));var i=e.edges,s=sv(i).call(i,function(a){var l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l}),o=sv(t=e.nodes).call(t,function(a){var l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l});return{nodes:o,edges:s}}var Pft={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},Nft={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",close:"Schließen",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},Rft={addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},Dft={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},Bft={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},Mft={addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",close:"Fechar",createEdgeError:"Não foi possível linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},Lft={addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",close:"Закрывать",createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},Fft={addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",addNode:"添加节点",back:"返回",close:"關閉",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},jft={addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",close:"Закрити",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"},zft={addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de créer un lien vers un cluster.",del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},Hft={addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",addNode:"Přidat vrchol",back:"Zpět",close:"Zavřít",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"},Uft=Object.freeze({__proto__:null,cn:Fft,cs:Hft,de:Nft,en:Pft,es:Rft,fr:zft,it:Dft,nl:Bft,pt:Mft,ru:Lft,uk:jft});function Wft(e,r){try{var t=r.split(/[-_ /]/,2),n=bn(t,2),i=n[0],s=n[1],o=i!=null?i.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(o&&a){var l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(e,l))return l;var u;console.warn(aN(u="Unknown variant ".concat(a," of language ")).call(u,o,"."))}if(o){var f=o;if(Object.prototype.hasOwnProperty.call(e,f))return f;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(r,", falling back to English.")),"en"}catch(c){return console.error(c),console.warn("Unexpected error while normalizing locale ".concat(r,", falling back to English.")),"en"}}var qft=function(){function e(){ft(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return ht(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,n=this.image.height;this.width=t,this.height=n;var i=Math.floor(n/2),s=Math.floor(n/4),o=Math.floor(n/8),a=Math.floor(n/16),l=Math.floor(t/2),u=Math.floor(t/4),f=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*u,this.canvas.height=i,this.coordinates=[[0,0,l,i],[l,0,u,s],[l,s,f,o],[5*f,s,c,a]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),n=this.coordinates[0];t.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var s=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,n,i,s,o,a){if(this.initialized())if(n>2){n*=.5;for(var l=0;n>2&&l<this.NUM_ITERATIONS;)n*=.5,l+=1;l>=this.NUM_ITERATIONS&&(l=this.NUM_ITERATIONS-1);var u=this.coordinates[l];t.drawImage(this.canvas,u[0],u[1],u[2],u[3],i,s,o,a)}else t.drawImage(this.image,i,s,o,a)}}]),e}(),Kft=function(){function e(r){ft(this,e),this.images={},this.imageBroken={},this.callback=r}return ht(e,[{key:"_tryloadBrokenUrl",value:function(t,n,i){if(!(t===void 0||i===void 0)){if(n===void 0){console.warn("No broken url image defined");return}i.image.onerror=function(){console.error("Could not load brokenImage:",n)},i.image.src=n}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,n){var i=this,s=this.images[t];if(s)return s;var o=new qft;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,n,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),e}(),x5={},Vft={get exports(){return x5},set exports(e){x5=e}},cv={},Gft={get exports(){return cv},set exports(e){cv=e}},Yft=Tr,Zft=Yft(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Xft=Tr,Jft=wi,Qft=Ou,uj=Zft,bw=Object.isExtensible,eht=Xft(function(){bw(1)}),tht=eht||uj?function(r){return!Jft(r)||uj&&Qft(r)=="ArrayBuffer"?!1:bw?bw(r):!0}:bw,rht=Tr,XQ=!rht(function(){return Object.isExtensible(Object.preventExtensions({}))}),nht=zt,iht=Ir,sht=_b,oht=wi,bN=$i,aht=Jo.f,cj=kb,lht=Rx,wN=tht,uht=Sx,cht=XQ,JQ=!1,$u=uht("meta"),fht=0,$N=function(e){aht(e,$u,{value:{objectID:"O"+fht++,weakData:{}}})},hht=function(e,r){if(!oht(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!bN(e,$u)){if(!wN(e))return"F";if(!r)return"E";$N(e)}return e[$u].objectID},dht=function(e,r){if(!bN(e,$u)){if(!wN(e))return!0;if(!r)return!1;$N(e)}return e[$u].weakData},pht=function(e){return cht&&JQ&&wN(e)&&!bN(e,$u)&&$N(e),e},vht=function(){ght.enable=function(){},JQ=!0;var e=cj.f,r=iht([].splice),t={};t[$u]=1,e(t).length&&(cj.f=function(n){for(var i=e(n),s=0,o=i.length;s<o;s++)if(i[s]===$u){r(i,s,1);break}return i},nht({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:lht.f}))},ght=Gft.exports={enable:vht,fastKey:hht,getWeakData:dht,onFreeze:pht};sht[$u]=!0;var yht=wb,mht=oo,bht=lo,wht=Uv,$ht=JX,_ht=Ba,fj=Bn,xht=nJ,Eht=Nx,hj=XX,Sht=TypeError,ww=function(e,r){this.stopped=e,this.result=r},dj=ww.prototype,_N=function(e,r,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=yht(r,n),u,f,c,d,y,w,b,T=function(A){return u&&hj(u,"normal",A),new ww(!0,A)},_=function(A){return i?(bht(A),a?l(A[0],A[1],T):l(A[0],A[1])):a?l(A,T):l(A)};if(s)u=e.iterator;else if(o)u=e;else{if(f=Eht(e),!f)throw Sht(wht(e)+" is not iterable");if($ht(f)){for(c=0,d=_ht(e);d>c;c++)if(y=_(e[c]),y&&fj(dj,y))return y;return new ww(!1)}u=xht(e,f)}for(w=s?e.next:u.next;!(b=mht(w,u)).done;){try{y=_(b.value)}catch(A){hj(u,"throw",A)}if(typeof y=="object"&&y&&fj(dj,y))return y}return new ww(!1)},kht=Bn,Tht=TypeError,xN=function(e,r){if(kht(r,e))return e;throw Tht("Incorrect invocation")},Iht=zt,Aht=Vn,Oht=cv,Cht=Tr,Pht=Wv,Nht=_N,Rht=xN,Dht=bi,Bht=wi,Mht=Kv,Lht=Jo.f,Fht=Jc.forEach,jht=ni,QQ=Zh,zht=QQ.set,Hht=QQ.getterFor,EN=function(e,r,t){var n=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=n?"set":"add",o=Aht[e],a=o&&o.prototype,l={},u;if(!jht||!Dht(o)||!(i||a.forEach&&!Cht(function(){new o().entries().next()})))u=t.getConstructor(r,e,n,s),Oht.enable();else{u=r(function(d,y){zht(Rht(d,f),{type:e,collection:new o}),y!=null&&Nht(y,d[s],{that:d,AS_ENTRIES:n})});var f=u.prototype,c=Hht(e);Fht(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(d){var y=d=="add"||d=="set";d in a&&!(i&&d=="clear")&&Pht(f,d,function(w,b){var T=c(this).collection;if(!y&&i&&!Bht(w))return d=="get"?void 0:!1;var _=T[d](w===0?0:w,b);return y?this:_})}),i||Lht(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}return Mht(u,e,!1,!0),l[e]=u,Iht({global:!0,forced:!0},l),i||t.setStrong(u,e,n),u},Uht=Sb,SN=function(e,r,t){for(var n in r)t&&t.unsafe&&e[n]?e[n]=r[n]:Uht(e,n,r[n],t);return e},Wht=Xo,qht=eN,Kht=Mn,Vht=ni,pj=Kht("species"),Ght=function(e){var r=Wht(e);Vht&&r&&!r[pj]&&qht(r,pj,{configurable:!0,get:function(){return this}})},Yht=qv,Zht=eN,vj=SN,Xht=wb,Jht=xN,Qht=pb,edt=_N,tdt=X4,P1=J4,rdt=Ght,jg=ni,gj=cv.fastKey,eee=Zh,yj=eee.set,hT=eee.getterFor,tee={getConstructor:function(e,r,t,n){var i=e(function(u,f){Jht(u,s),yj(u,{type:r,index:Yht(null),first:void 0,last:void 0,size:0}),jg||(u.size=0),Qht(f)||edt(f,u[n],{that:u,AS_ENTRIES:t})}),s=i.prototype,o=hT(r),a=function(u,f,c){var d=o(u),y=l(u,f),w,b;return y?y.value=c:(d.last=y={index:b=gj(f,!0),key:f,value:c,previous:w=d.last,next:void 0,removed:!1},d.first||(d.first=y),w&&(w.next=y),jg?d.size++:u.size++,b!=="F"&&(d.index[b]=y)),u},l=function(u,f){var c=o(u),d=gj(f),y;if(d!=="F")return c.index[d];for(y=c.first;y;y=y.next)if(y.key==f)return y};return vj(s,{clear:function(){for(var f=this,c=o(f),d=c.index,y=c.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=void 0),delete d[y.index],y=y.next;c.first=c.last=void 0,jg?c.size=0:f.size=0},delete:function(u){var f=this,c=o(f),d=l(f,u);if(d){var y=d.next,w=d.previous;delete c.index[d.index],d.removed=!0,w&&(w.next=y),y&&(y.previous=w),c.first==d&&(c.first=y),c.last==d&&(c.last=w),jg?c.size--:f.size--}return!!d},forEach:function(f){for(var c=o(this),d=Xht(f,arguments.length>1?arguments[1]:void 0),y;y=y?y.next:c.first;)for(d(y.value,y.key,this);y&&y.removed;)y=y.previous},has:function(f){return!!l(this,f)}}),vj(s,t?{get:function(f){var c=l(this,f);return c&&c.value},set:function(f,c){return a(this,f===0?0:f,c)}}:{add:function(f){return a(this,f=f===0?0:f,f)}}),jg&&Zht(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(e,r,t){var n=r+" Iterator",i=hT(r),s=hT(n);tdt(e,r,function(o,a){yj(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,P1(void 0,!0)):a=="keys"?P1(l.key,!1):a=="values"?P1(l.value,!1):P1([l.key,l.value],!1)},t?"entries":"values",!t,!0),rdt(r)}},ndt=EN,idt=tee;ndt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},idt);var sdt=xr,odt=sdt.Map,adt=odt,ldt=adt;(function(e){e.exports=ldt})(Vft);var ree=Pt(x5),udt=function(){function e(){ft(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Un(this.options,this.defaultOptions)}return ht(e,[{key:"setOptions",value:function(t){var n=["useDefaultGroups"];if(t!==void 0){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Sr(n).call(n,i)===-1){var s=t[i];this.add(i,s)}}}},{key:"clear",value:function(){this._groups=new ree,this._groupNames=[]}},{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._groups.get(t);if(i===void 0&&n)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var s=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[s]),this._groups.set(t,i)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}},{key:"add",value:function(t,n){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,n),n}}]),e}(),E5={},cdt={get exports(){return E5},set exports(e){E5=e}},fdt=zt;fdt({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var hdt=xr,ddt=hdt.Number.isNaN,pdt=ddt,vdt=pdt;(function(e){e.exports=vdt})(cdt);var S5=Pt(E5),k5={},gdt={get exports(){return k5},set exports(e){k5=e}},ydt=Vn,mdt=ydt.isFinite,bdt=Number.isFinite||function(r){return typeof r=="number"&&mdt(r)},wdt=zt,$dt=bdt;wdt({target:"Number",stat:!0},{isFinite:$dt});var _dt=xr,xdt=_dt.Number.isFinite,Edt=xdt,Sdt=Edt;(function(e){e.exports=Sdt})(gdt);var th=Pt(k5),T5={},kdt={get exports(){return T5},set exports(e){T5=e}},Tdt=zt,Idt=Jc.some,Adt=Yv,Odt=Adt("some");Tdt({target:"Array",proto:!0,forced:!Odt},{some:function(r){return Idt(this,r,arguments.length>1?arguments[1]:void 0)}});var Cdt=_i,Pdt=Cdt("Array").some,Ndt=Bn,Rdt=Pdt,dT=Array.prototype,Ddt=function(e){var r=e.some;return e===dT||Ndt(dT,e)&&r===dT.some?Rdt:r},Bdt=Ddt,Mdt=Bdt;(function(e){e.exports=Mdt})(kdt);var Ldt=Pt(T5),I5={},Fdt={get exports(){return I5},set exports(e){I5=e}},nee=Vn,jdt=Tr,zdt=Ir,Hdt=El,Udt=lN.trim,Wdt=Wx,qdt=zdt("".charAt),L$=nee.parseFloat,mj=nee.Symbol,bj=mj&&mj.iterator,Kdt=1/L$(Wdt+"-0")!==-1/0||bj&&!jdt(function(){L$(Object(bj))}),Vdt=Kdt?function(r){var t=Udt(Hdt(r)),n=L$(t);return n===0&&qdt(t,0)=="-"?-0:n}:L$,Gdt=zt,wj=Vdt;Gdt({global:!0,forced:parseFloat!=wj},{parseFloat:wj});var Ydt=xr,Zdt=Ydt.parseFloat,Xdt=Zdt,Jdt=Xdt;(function(e){e.exports=Jdt})(Fdt);var iee=Pt(I5),A5={},Qdt={get exports(){return A5},set exports(e){A5=e}},ept=zt,tpt=Tr,rpt=Rx.f,npt=tpt(function(){return!Object.getOwnPropertyNames(1)});ept({target:"Object",stat:!0,forced:npt},{getOwnPropertyNames:rpt});var ipt=xr,spt=ipt.Object,opt=function(r){return spt.getOwnPropertyNames(r)},apt=opt,lpt=apt;(function(e){e.exports=lpt})(Qdt);var upt=Pt(A5);function kN(e,r){var t=["node","edge","label"],n=!0,i=yc(r,"chosen");if(typeof i=="boolean")n=i;else if(Dr(i)==="object"){if(Sr(t).call(t,e)===-1)throw new Error("choosify: subOption '"+e+"' should be one of '"+t.join("', '")+"'");var s=yc(r,["chosen",e]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function O5(e,r,t){if(e.width<=0||e.height<=0)return!1;if(t!==void 0){var n={x:r.x-t.x,y:r.y-t.y};if(t.angle!==0){var i=-t.angle,s={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y};r=s}else r=n}var o=e.x+e.width,a=e.y+e.width;return e.left<r.x&&o>r.x&&e.top<r.y&&a>r.y}function F$(e){return typeof e=="string"&&e!==""}function see(e,r,t,n){var i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){var o=n.distanceToBorder(e,r),a=Math.sin(r)*o,l=Math.cos(r)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-t):(i=n.x+t,s=n.y-n.shape.height*.5);return{x:i,y:s}}var C5={},cpt={get exports(){return C5},set exports(e){C5=e}},fpt=_i,hpt=fpt("Array").values,dpt=hpt,ppt=dpt,vpt=Yh,gpt=$i,ypt=Bn,mpt=ppt,pT=Array.prototype,bpt={DOMTokenList:!0,NodeList:!0},wpt=function(e){var r=e.values;return e===pT||ypt(pT,e)&&r===pT.values||gpt(bpt,vpt(e))?mpt:r};(function(e){e.exports=wpt})(cpt);var oee=Pt(C5),$pt=function(){function e(r){ft(this,e),this.measureText=r,this.current=0,this.width=0,this.height=0,this.lines=[]}return ht(e,[{key:"_add",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});var s=n;(n===void 0||n==="")&&(s=" ");var o=this.measureText(s,i),a=Un({},oee(o));a.text=n,a.width=o.width,a.mod=i,(n===void 0||n==="")&&(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return t===void 0?0:t.width}},{key:"append",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n)}},{key:"newLine",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,n),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var n=this.lines[t],i=0;if(n.blocks!==void 0)for(var s=0;s<n.blocks.length;s++){var o=n.blocks[s];i<o.height&&(i=o.height)}n.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,n=0,i=0;i<this.lines.length;i++){var s=this.lines[i];s.width>t&&(t=s.width),n+=s.height}this.width=t,this.height=n}},{key:"removeEmptyBlocks",value:function(){for(var t=[],n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.blocks.length!==0&&!(n===this.lines.length-1&&i.width===0)){var s={};Un(s,i),s.blocks=[];for(var o=void 0,a=[],l=0;l<i.blocks.length;l++){var u=i.blocks[l];u.width!==0?a.push(u):o===void 0&&(o=u)}a.length===0&&o!==void 0&&a.push(o),s.blocks=a,t.push(s)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),e}(),_pt={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},$j=function(){function e(r){ft(this,e),this.text=r,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return ht(e,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return/[ \t]/.test(t)?(this.mono?this.add(t):this.spacing=!0,!0):!1}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,n){return!this.mono&&!this[t]&&this.match(n)?(this.setTag(t),!0):!1}},{key:"match",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.prepareRegExp(t),s=bn(i,2),o=s[0],a=s[1],l=o.test(this.text.substr(this.position,a));return l&&n&&(this.position+=a-1),l}},{key:"parseEndTag",value:function(t,n,i){var s=this.mod()===t;return t==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(n)?(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0):!1}},{key:"replace",value:function(t,n){return this.match(t)?(this.add(n),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(t){var n,i;if(t instanceof RegExp)i=t,n=1;else{var s=_pt[t];s!==void 0?i=s:i=new RegExp(t),n=t.length}return[i,n]}}]),e}(),xpt=function(){function e(r,t,n,i){var s=this;ft(this,e),this.ctx=r,this.parent=t,this.selected=n,this.hover=i;var o=function(l,u){if(l===void 0)return 0;var f=s.parent.getFormattingValues(r,n,i,u),c=0;if(l!==""){var d=s.ctx.measureText(l);c=d.width}return{width:c,values:f}};this.lines=new $pt(o)}return ht(e,[{key:"process",value:function(t){if(!F$(t))return this.lines.finalize();var n=this.parent.fontOptions;t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`);var i=String(t).split(`
`),s=i.length;if(n.multi)for(var o=0;o<s;o++){var a=this.splitBlocks(i[o],n.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(n.maxWdt>0)for(var l=0;l<a.length;l++){var u=a[l].mod,f=a[l].text;this.splitStringIntoLines(f,u,!0)}else for(var c=0;c<a.length;c++){var d=a[c].mod,y=a[c].text;this.lines.append(y,d)}this.lines.newLine()}}else if(n.maxWdt>0)for(var w=0;w<s;w++)this.splitStringIntoLines(i[w]);else for(var b=0;b<s;b++)this.lines.newLine(i[b]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var n="none";return t==="markdown"||t==="md"?n="markdown":(t===!0||t==="html")&&(n="html"),n}},{key:"splitHtmlBlocks",value:function(t){for(var n=new $j(t),i=function(l){if(/&/.test(l)){var u=n.replace(n.text,"&lt;","<")||n.replace(n.text,"&amp;","&");return u||n.add("&"),!0}return!1};n.position<n.text.length;){var s=n.text.charAt(n.position),o=n.parseWS(s)||/</.test(s)&&(n.parseStartTag("bold","<b>")||n.parseStartTag("ital","<i>")||n.parseStartTag("mono","<code>")||n.parseEndTag("bold","</b>")||n.parseEndTag("ital","</i>")||n.parseEndTag("mono","</code>"))||i(s);o||n.add(s),n.position++}return n.emitBlock(),n.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var n=this,i=new $j(t),s=!0,o=function(f){return/\\/.test(f)?(i.position<n.text.length+1&&(i.position++,f=n.text.charAt(i.position),/ \t/.test(f)?i.spacing=!0:(i.add(f),s=!1)),!0):!1};i.position<i.text.length;){var a=i.text.charAt(i.position),l=i.parseWS(a)||o(a)||(s||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono");l||(i.add(a),s=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,n){var i=this.decodeMarkupSystem(n);if(i==="none")return[{text:t,mod:"normal"}];if(i==="markdown")return this.splitMarkdownBlocks(t);if(i==="html")return this.splitHtmlBlocks(t)}},{key:"overMaxWidth",value:function(t){var n=this.ctx.measureText(t).width;return this.lines.curWidth()+n>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var n="",i=0;i<t.length;){var s=n===""?"":" ",o=n+s+t[i];if(this.overMaxWidth(o))break;n=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var n=0;n<t.length&&!this.overMaxWidth(Oi(t).call(t,0,n));)n++;return n}},{key:"splitStringIntoLines",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,n),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var s=t.split("\r");s.length>0;){var o=this.getLongestFit(s);if(o===0){var a=s[0],l=this.getLongestFitWord(a);this.lines.newLine(Oi(a).call(a,0,l),n),s[0]=Oi(a).call(a,l)}else{var u=o;s[o-1]===" "?o--:s[u]===" "&&u++;var f=Oi(s).call(s,0,o).join("");o==s.length&&i?this.lines.append(f,n):this.lines.newLine(f,n),s=Oi(s).call(s,u)}}}}]),e}(),zg=["bold","ital","boldital","mono"],aee=function(){function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ft(this,e),this.body=r,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return ht(e,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),F$(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(Dr(t.font)==="object"){var n=t.font.size;n!==void 0&&(this.baseSize=n)}}}},{key:"initFontOptions",value:function(t){var n=this;if(gr(zg,function(i){n.fontOptions[i]={}}),e.parseFontString(this.fontOptions,t)){this.fontOptions.vadjust=0;return}gr(t,function(i,s){i!=null&&Dr(i)!=="object"&&(n.fontOptions[s]=i)})}},{key:"constrain",value:function(t){var n={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=yc(t,"widthConstraint");if(typeof i=="number")n.maxWdt=Number(i),n.minWdt=Number(i);else if(Dr(i)==="object"){var s=yc(t,["widthConstraint","maximum"]);typeof s=="number"&&(n.maxWdt=Number(s));var o=yc(t,["widthConstraint","minimum"]);typeof o=="number"&&(n.minWdt=Number(o))}var a=yc(t,"heightConstraint");if(typeof a=="number")n.minHgt=Number(a);else if(Dr(a)==="object"){var l=yc(t,["heightConstraint","minimum"]);typeof l=="number"&&(n.minHgt=Number(l));var u=yc(t,["heightConstraint","valign"]);typeof u=="string"&&(u==="top"||u==="bottom")&&(n.valign=u)}return n}},{key:"update",value:function(t,n){this.setOptions(t,!0),this.propagateFonts(n),Zr(this.fontOptions,this.constrain(n)),this.fontOptions.chooser=kN("label",n)}},{key:"adjustSizes",value:function(t){var n=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=n,this.fontOptions.minWdt-=n);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,n){for(var i=0;i<n.length;++i)this.addFontToPile(t,n[i])}},{key:"addFontToPile",value:function(t,n){if(n!==void 0&&!(n.font===void 0||n.font===null)){var i=n.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var s=t[i],o={};e.parseFontString(o,s)&&(s=o),gr(s,function(a,l){a!==void 0&&(Object.prototype.hasOwnProperty.call(n,l)||(Sr(zg).call(zg,l)!==-1?n[l]={}:n[l]=a))})}return n}},{key:"getFontOption",value:function(t,n,i){for(var s,o=0;o<t.length;++o){var a=t[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(s=a[n],s==null)continue;var l={};if(e.parseFontString(l,s)&&(s=l),Object.prototype.hasOwnProperty.call(s,i))return s[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,n){for(var i={},s=["color","size","face","mod","vadjust"],o=0;o<s.length;++o){var a=s[o];i[a]=this.getFontOption(t,n,a)}return i}},{key:"propagateFonts",value:function(t){var n=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var s=function(){var l=zg[o],u=n.fontOptions[l],f=n.getFontOptions(i,l);gr(f,function(c,d){u[d]=c}),u.size=Number(u.size),u.vadjust=Number(u.vadjust)},o=0;o<zg.length;++o)s()}},{key:"draw",value:function(t,n,i,s,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var l=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&l<this.elementOptions.scaling.label.drawThreshold-1||(l>=this.elementOptions.scaling.label.maxVisible&&(l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,s,o,n,i,a),this._drawBackground(t),this._drawText(t,n,this.size.yLine,a,l))}}},{key:"_drawBackground",value:function(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var n=this.getSize();t.fillRect(n.left,n.top,n.width,n.height)}}},{key:"_drawText",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,a=this._setAlignment(t,n,i,s),l=bn(a,2);n=l[0],i=l[1],t.textAlign="left",n=n-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(var u=0;u<this.lineCount;u++){var f=this.lines[u];if(f&&f.blocks){var c=0;this.isEdgeLabel||this.fontOptions.align==="center"?c+=(this.size.width-f.width)/2:this.fontOptions.align==="right"&&(c+=this.size.width-f.width);for(var d=0;d<f.blocks.length;d++){var y=f.blocks[d];t.font=y.font;var w=this._getColor(y.color,o,y.strokeColor),b=bn(w,2),T=b[0],_=b[1];y.strokeWidth>0&&(t.lineWidth=y.strokeWidth,t.strokeStyle=_,t.lineJoin="round"),t.fillStyle=T,y.strokeWidth>0&&t.strokeText(y.text,n+c,i+y.vadjust),t.fillText(y.text,n+c,i+y.vadjust),c+=y.width}i+=f.height}}}},{key:"_setAlignment",value:function(t,n,i,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){n=0,i=0;var o=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*o):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*o):t.textBaseline="middle"}else t.textBaseline=s;return[n,i]}},{key:"_getColor",value:function(t,n,i){var s=t||"#000000",o=i||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));s=Ho(s,a),o=Ho(o,a)}return[s,o]}},{key:"getTextSize",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(t,n,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=2,n=this.size.left,i=this.size.top-.5*t;if(this.isEdgeLabel){var s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":n=s,i=-this.size.height*.5;break;case"top":n=s,i=-(this.size.height+t);break;case"bottom":n=s,i=t;break}}var o={left:n,top:i,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,n,i),this.size.left=s-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,n,i,s){var o=function(f,c,d){return c==="normal"?d==="mod"?"":f[d]:f[c][d]!==void 0?f[c][d]:f[d]},a={color:o(this.fontOptions,s,"color"),size:o(this.fontOptions,s,"size"),face:o(this.fontOptions,s,"face"),mod:o(this.fontOptions,s,"mod"),vadjust:o(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(n||i)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,n,i));var l="";return a.mod!==void 0&&a.mod!==""&&(l+=a.mod+" "),l+=a.size+"px "+a.face,t.font=l.replace(/"/g,""),a.font=t.font,a.height=a.size,a}},{key:"differentState",value:function(t,n){return t!==this.selectedState||n!==this.hoverState}},{key:"_processLabelText",value:function(t,n,i,s){var o=new xpt(t,this,n,i);return o.process(s)}},{key:"_processLabel",value:function(t,n,i){if(!(this.labelDirty===!1&&!this.differentState(n,i))){var s=this._processLabelText(t,n,i,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=n,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var t=this.fontOptions.size*this.body.view.scale;return!(t<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,n){if(!n||typeof n!="string")return!1;var i=n.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),e}(),P5={},Ept={get exports(){return P5},set exports(e){P5=e}},Spt=Px,kpt=Uv,Tpt=TypeError,Ipt=function(e){if(Spt(e))return e;throw Tpt(kpt(e)+" is not a constructor")},Apt=zt,Opt=Xo,vT=fb,Cpt=NX,_j=Ipt,Ppt=lo,xj=wi,Npt=qv,lee=Tr,TN=Opt("Reflect","construct"),Rpt=Object.prototype,Dpt=[].push,uee=lee(function(){function e(){}return!(TN(function(){},[],e)instanceof e)}),cee=!lee(function(){TN(function(){})}),Ej=uee||cee;Apt({target:"Reflect",stat:!0,forced:Ej,sham:Ej},{construct:function(r,t){_j(r),Ppt(t);var n=arguments.length<3?r:_j(arguments[2]);if(cee&&!uee)return TN(r,t,n);if(r==n){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var i=[null];return vT(Dpt,i,t),new(vT(Cpt,r,i))}var s=n.prototype,o=Npt(xj(s)?s:Rpt),a=vT(r,o,t);return xj(a)?a:o}});var Bpt=xr,Mpt=Bpt.Reflect.construct,Lpt=Mpt,Fpt=Lpt;(function(e){e.exports=Fpt})(Ept);var qe=Pt(P5),N5={},jpt={get exports(){return N5},set exports(e){N5=e}},R5={},zpt={get exports(){return R5},set exports(e){R5=e}},Hpt=uQ,Upt=Hpt,Wpt=Upt,qpt=Wpt;(function(e){e.exports=qpt})(zpt);(function(e){e.exports=R5})(jpt);var Kpt=Pt(N5),D5={},Vpt={get exports(){return D5},set exports(e){D5=e}},B5={},Gpt={get exports(){return B5},set exports(e){B5=e}},Ypt=zt,Zpt=OJe;Ypt({target:"Object",stat:!0},{setPrototypeOf:Zpt});var Xpt=xr,Jpt=Xpt.Object.setPrototypeOf,Qpt=Jpt,evt=Qpt,tvt=evt,rvt=tvt,nvt=rvt,ivt=nvt;(function(e){e.exports=ivt})(Gpt);(function(e){e.exports=B5})(Vpt);var M5=Pt(D5),L5={},svt={get exports(){return L5},set exports(e){L5=e}},F5={},ovt={get exports(){return F5},set exports(e){F5=e}},avt=RX,lvt=avt,uvt=lvt,cvt=uvt;(function(e){e.exports=cvt})(ovt);(function(e){e.exports=F5})(svt);var IN=Pt(L5);function j5(e,r){var t;return j5=M5?IN(t=M5).call(t):function(i,s){return i.__proto__=s,i},j5(e,r)}function Or(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Kpt(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Hx(e,"prototype",{writable:!1}),r&&j5(e,r)}function fvt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fr(e,r){if(r&&(Dr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fvt(e)}var z5={},hvt={get exports(){return z5},set exports(e){z5=e}},H5={},dvt={get exports(){return H5},set exports(e){H5=e}},pvt=iQ,vvt=pvt,gvt=vvt,yvt=gvt;(function(e){e.exports=yvt})(dvt);(function(e){e.exports=H5})(hvt);var Sj=Pt(z5);function Tt(e){var r;return Tt=M5?IN(r=Sj).call(r):function(n){return n.__proto__||Sj(n)},Tt(e)}var ed=function(){function e(r,t,n){ft(this,e),this.body=t,this.labelModule=n,this.setOptions(r),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&(Dr(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,n){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(n)),Math.abs(this.height/2/Math.sin(n)))+i}},{key:"enableShadow",value:function(t,n){n.shadow&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,n){if(n.borderDashes!==!1)if(t.setLineDash!==void 0){var i=n.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,n){n.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,n.borderDashes=!1))}},{key:"needsRefresh",value:function(t,n){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,n)}},{key:"initContextForDraw",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=n.borderColor,t.fillStyle=n.color}},{key:"performStroke",value:function(t,n){var i=n.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,n),t.stroke(),this.disableBorderDashes(t,n)),t.restore()}},{key:"performFill",value:function(t,n){t.save(),t.fillStyle=n.color,this.enableShadow(t,n),Pb(t).call(t),this.disableShadow(t,n),t.restore(),this.performStroke(t,n)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,n,i,s,o){i!==void 0&&this.resize(i,s,o),this.left=t-this.width/2,this.top=n-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,n,i,s,o){this._updateBoundingBox(t,n,i,s,o)}},{key:"getDimensionsFromLabel",value:function(t,n,i){this.textSize=this.labelModule.getTextSize(t,n,i);var s=this.textSize.width,o=this.textSize.height,a=14;return s===0&&(s=a,o=a),{width:s,height:o}}}]),e}();function mvt(e){var r=bvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function bvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var wvt=function(e){Or(t,e);var r=mvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.width=a.width+this.margin.right+this.margin.left,this.height=a.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),DX(i,this.left,this.top,this.width,this.height,u.borderRadius),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"updateBoundingBox",value:function(i,s,o,a,l){this._updateBoundingBox(i,s,o,a,l);var u=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(u)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(s)),Math.abs(this.height/2/Math.sin(s)))+o}}]),t}(ed);function $vt(e){var r=_vt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function _vt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var AN=function(e){Or(t,e);var r=$vt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o.labelOffset=0,o.selected=!1,o}return ht(t,[{key:"setOptions",value:function(i,s,o){this.options=i,s===void 0&&o===void 0||this.setImages(s,o)}},{key:"setImages",value:function(i,s){s&&this.selected?(this.imageObj=s,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=s)}},{key:"switchImages",value:function(i){var s=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&s){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var i={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var s=this.options.imagePadding;Dr(s)=="object"?(i.top=s.top,i.right=s.right,i.bottom=s.bottom,i.left=s.left):(i.top=s,i.right=s,i.bottom=s,i.left=s)}return i}},{key:"_resizeImage",value:function(){var i,s;if(this.options.shapeProperties.useImageSize===!1){var o=1,a=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:a=this.imageObj.height/this.imageObj.width),i=this.options.size*2*o,s=this.options.size*2*a}else{var l=this._getImagePadding();i=this.imageObj.width+l.left+l.right,s=this.imageObj.height+l.top+l.bottom}this.width=i,this.height=s,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,s,o,a){this.initContextForDraw(i,a),V4(i,s,o,a.size),this.performFill(i,a)}},{key:"_drawImageAtPosition",value:function(i,s){if(this.imageObj.width!=0){i.globalAlpha=s.opacity!==void 0?s.opacity:1,this.enableShadow(i,s);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var a=this._getImagePadding(),l=this.left+a.left,u=this.top+a.top,f=this.width-a.left-a.right,c=this.height-a.top-a.bottom;this.imageObj.drawImageAtPosition(i,o,l,u,f,c),this.disableShadow(i,s)}}},{key:"_drawImageLabel",value:function(i,s,o,a,l){var u=0;if(this.height!==void 0){u=this.height*.5;var f=this.labelModule.getTextSize(i,a,l);f.lineCount>=1&&(u+=f.height/2)}var c=o+u;this.options.label&&(this.labelOffset=u),this.labelModule.draw(i,s,c,a,l,"hanging")}}]),t}(ed);function xvt(e){var r=Evt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Evt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Svt=function(e){Or(t,e);var r=xvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=Math.max(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=l/2,this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this._drawRawCircle(i,s,o,u),this.updateBoundingBox(s,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,o,a,l)}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(AN);function kvt(e){var r=Tvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Tvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Ivt=function(e){Or(t,e);var r=kvt(t);function t(n,i,s,o,a){var l;return ft(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l,this.radius=.5*this.width;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){this.switchImages(a),this.resize();var f=s,c=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,f+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this._drawRawCircle(i,f,c,u),i.save(),i.clip(),this._drawImageAtPosition(i,u),i.restore(),this._drawImageLabel(i,f,c,a,l),this.updateBoundingBox(s,o)}},{key:"updateBoundingBox",value:function(i,s){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=s,this.boundingBox.left=i,this.boundingBox.right=i+this.options.size*2,this.boundingBox.bottom=s+this.options.size*2):(this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.width*.5}}]),t}(AN);function Avt(e){var r=Ovt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ovt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var tf=function(e){Or(t,e);var r=Avt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,o)){var l,u;this.labelModule.getTextSize(i,s,o);var f=2*a.size;this.width=(l=this.customSizeWidth)!==null&&l!==void 0?l:f,this.height=(u=this.customSizeHeight)!==null&&u!==void 0?u:f,this.radius=.5*this.width}}},{key:"_drawShape",value:function(i,s,o,a,l,u,f,c){var d=this;return this.resize(i,u,f,c),this.left=a-this.width/2,this.top=l-this.height/2,this.initContextForDraw(i,c),KZe(s)(i,a,l,c.size),this.performFill(i,c),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(i.font=(u?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",i.fillText(this.options.icon.code,a,l)),{drawExternalLabel:function(){if(d.options.label!==void 0){d.labelModule.calculateLabelSize(i,u,f,a,l,"hanging");var w=l+.5*d.height+.5*d.labelModule.size.height;d.labelModule.draw(i,a,w,u,f,"hanging")}d.updateBoundingBox(a,l)}}}},{key:"updateBoundingBox",value:function(i,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=i-this.options.size,this.boundingBox.right=i+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),t}(ed);function kj(e,r){var t=mn(e);if(Wc){var n=Wc(e);r&&(n=As(n).call(n,function(i){return Qc(e,i).enumerable})),t.push.apply(t,n)}return t}function Cvt(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=kj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):qc?jx(e,qc(i)):qr(n=kj(Object(i))).call(n,function(s){zx(e,s,Qc(i,s))})}return e}function Pvt(e){var r=Nvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Nvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Rvt=function(e){Or(t,e);var r=Pvt(t);function t(n,i,s,o){var a;return ft(this,t),a=r.call(this,n,i,s,o),a.ctxRenderer=o,a}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l,u),this.left=s-this.width/2,this.top=o-this.height/2,i.save();var f=this.ctxRenderer({ctx:i,id:this.options.id,x:s,y:o,state:{selected:a,hover:l},style:Cvt({},u),label:this.options.label});if(f.drawNode!=null&&f.drawNode(),i.restore(),f.drawExternalLabel){var c=f.drawExternalLabel;f.drawExternalLabel=function(){i.save(),c(),i.restore()}}return f.nodeDimensions&&(this.customSizeWidth=f.nodeDimensions.width,this.customSizeHeight=f.nodeDimensions.height),f}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function Dvt(e){var r=Bvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Bvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Mvt=function(e){Or(t,e);var r=Dvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o),l=a.width+this.margin.right+this.margin.left;this.width=l,this.height=l,this.radius=this.width/2}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.initContextForDraw(i,u),BX(i,s-this.width/2,o-this.height/2,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(ed);function Lvt(e){var r=Fvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Fvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var jvt=function(e){Or(t,e);var r=Lvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"diamond",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function zvt(e){var r=Hvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Hvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Uvt=function(e){Or(t,e);var r=zvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"circle",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i){return i&&this.resize(i),this.options.size}}]),t}(tf);function Wvt(e){var r=qvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function qvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Tj=function(e){Or(t,e);var r=Wvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(s,o)){var a=this.getDimensionsFromLabel(i,s,o);this.height=a.height*2,this.width=a.width+a.height,this.radius=.5*this.width}}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(i,u),lC(i,this.left,this.top,this.width,this.height),this.performFill(i,u),this.updateBoundingBox(s,o,i,a,l),this.labelModule.draw(i,s,o,a,l)}},{key:"distanceToBorder",value:function(i,s){i&&this.resize(i);var o=this.width*.5,a=this.height*.5,l=Math.sin(s)*o,u=Math.cos(s)*a;return o*a/Math.sqrt(l*l+u*u)}}]),t}(ed);function Kvt(e){var r=Vvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Vvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Gvt=function(e){Or(t,e);var r=Kvt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){var f=this;return this.resize(i,a,l),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=o-this.height/2,this._icon(i,s,o,a,l,u),{drawExternalLabel:function(){if(f.options.label!==void 0){var d=5;f.labelModule.draw(i,f.left+f.iconSize.width/2+f.margin.left,o+f.height/2+d,a)}f.updateBoundingBox(s,o)}}}},{key:"updateBoundingBox",value:function(i,s){if(this.boundingBox.top=s-this.options.icon.size*.5,this.boundingBox.left=i-this.options.icon.size*.5,this.boundingBox.right=i+this.options.icon.size*.5,this.boundingBox.bottom=s+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(i,s,o,a,l,u){var f=Number(this.options.icon.size);this.options.icon.code!==void 0?(i.font=[this.options.icon.weight!=null?this.options.icon.weight:a?"bold":"",(this.options.icon.weight!=null&&a?5:0)+f+"px",this.options.icon.face].join(" "),i.fillStyle=this.options.icon.color||"black",i.textAlign="center",i.textBaseline="middle",this.enableShadow(i,u),i.fillText(this.options.icon.code,s,o),this.disableShadow(i,u)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(ed);function Yvt(e){var r=Zvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Zvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Xvt=function(e){Or(t,e);var r=Yvt(t);function t(n,i,s,o,a){var l;return ft(this,t),l=r.call(this,n,i,s),l.setImages(o,a),l}return ht(t,[{key:"resize",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var l=this.options.size*2;this.width=l,this.height=l;return}this.needsRefresh(s,o)&&this._resizeImage()}},{key:"draw",value:function(i,s,o,a,l,u){i.save(),this.switchImages(a),this.resize();var f=s,c=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=s,this.top=o,f+=this.width/2,c+=this.height/2):(this.left=s-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var d=this.options.borderWidth,y=this.options.borderWidthSelected||2*this.options.borderWidth,w=(a?y:d)/this.body.view.scale;i.lineWidth=Math.min(this.width,w),i.beginPath();var b=a?this.options.color.highlight.border:l?this.options.color.hover.border:this.options.color.border,T=a?this.options.color.highlight.background:l?this.options.color.hover.background:this.options.color.background;u.opacity!==void 0&&(b=Ho(b,u.opacity),T=Ho(T,u.opacity)),i.strokeStyle=b,i.fillStyle=T,i.rect(this.left-.5*i.lineWidth,this.top-.5*i.lineWidth,this.width+i.lineWidth,this.height+i.lineWidth),Pb(i).call(i),this.performStroke(i,u),i.closePath()}this._drawImageAtPosition(i,u),this._drawImageLabel(i,f,c,a,l),this.updateBoundingBox(s,o),i.restore()}},{key:"updateBoundingBox",value:function(i,s){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=i,this.top=s):(this.left=i-this.width/2,this.top=s-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(AN);function Jvt(e){var r=Qvt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Qvt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var egt=function(e){Or(t,e);var r=Jvt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"square",2,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function tgt(e){var r=rgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function rgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ngt=function(e){Or(t,e);var r=tgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"hexagon",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function igt(e){var r=sgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function sgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ogt=function(e){Or(t,e);var r=igt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"star",4,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function agt(e){var r=lgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function lgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ugt=function(e){Or(t,e);var r=agt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._setMargins(s),o}return ht(t,[{key:"resize",value:function(i,s,o){this.needsRefresh(s,o)&&(this.textSize=this.labelModule.getTextSize(i,s,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,s,o,a,l,u){this.resize(i,a,l),this.left=s-this.width/2,this.top=o-this.height/2,this.enableShadow(i,u),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,a,l),this.disableShadow(i,u),this.updateBoundingBox(s,o,i,a,l)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(ed);function cgt(e){var r=fgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function fgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var hgt=function(e){Or(t,e);var r=cgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangle",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function dgt(e){var r=pgt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function pgt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var vgt=function(e){Or(t,e);var r=dgt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"draw",value:function(i,s,o,a,l,u){return this._drawShape(i,"triangleDown",3,s,o,a,l,u)}},{key:"distanceToBorder",value:function(i,s){return this._distanceToBorder(i,s)}}]),t}(tf);function Ij(e,r){var t=mn(e);if(Wc){var n=Wc(e);r&&(n=As(n).call(n,function(i){return Qc(e,i).enumerable})),t.push.apply(t,n)}return t}function Aj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=Ij(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):qc?jx(e,qc(i)):qr(n=Ij(Object(i))).call(n,function(s){zx(e,s,Qc(i,s))})}return e}var qs=function(){function e(r,t,n,i,s,o){ft(this,e),this.options=Rc(s),this.globalOptions=s,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new aee(this.body,this.options,!1),this.setOptions(r)}return ht(e,[{key:"attachEdge",value:function(t){var n;Sr(n=this.edges).call(n,t)===-1&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var n,i=Sr(n=this.edges).call(n,t);if(i!=-1){var s;uu(s=this.edges).call(s,i,1)}}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(typeof t.color<"u"&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");e.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ma(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ma(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=iee(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=kN("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),t.hidden!==void 0||t.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var n=this.options.opacity;t.borderColor=Ho(t.borderColor,n),t.color=Ho(t.color,n),t.shadowColor=Ho(t.shadowColor,n)}return t}},{key:"updateLabelModule",value:function(t){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),e.updateGroupOptions(this.options,Aj(Aj({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new wvt(this.options,this.body,this.labelModule);break;case"circle":this.shape=new Svt(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new Ivt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new Rvt(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new Mvt(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new jvt(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Uvt(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Tj(this.options,this.body,this.labelModule);break;case"icon":this.shape=new Gvt(this.options,this.body,this.labelModule);break;case"image":this.shape=new Xvt(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new egt(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new ngt(this.options,this.body,this.labelModule);break;case"star":this.shape=new ogt(this.options,this.body,this.labelModule);break;case"text":this.shape=new ugt(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new hgt(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new vgt(this.options,this.body,this.labelModule);break;default:this.shape=new Tj(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,n){return this.shape.distanceToBorder(t,n)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.size=this.options.scaling.min+s*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var n=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,n)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var n=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,n)}},{key:"getItemsOnPoint",value:function(t){var n=[];return this.labelModule.visible()&&O5(this.labelModule.getSize(),t)&&n.push({nodeId:this.id,labelId:0}),O5(this.shape.boundingBox,t)&&n.push({nodeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return t===void 0||t==="center"||t==="top-left"}},{key:"updateGroupOptions",value:function(t,n,i){var s;if(i!==void 0){var o=t.group;if(n!==void 0&&n.group!==void 0&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");var a=typeof o=="number"||typeof o=="string"&&o!="";if(a){var l=i.get(o);l.opacity!==void 0&&n.opacity===void 0&&(e.checkOpacity(l.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+l.opacity),l.opacity=void 0));var u=As(s=upt(n)).call(s,function(f){return n[f]!=null});u.push("font"),B$(u,t,l),t.color=b5(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(B$(a,t,n,i),e.checkMass(n),t.opacity!==void 0&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),n.opacity!==void 0&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),Mo(t,n,"shadow",s),n.color!==void 0&&n.color!==null){var l=b5(n.color);FQ(t.color,l)}else i===!0&&n.color===null&&(t.color=Rc(s.color));n.fixed!==void 0&&n.fixed!==null&&(typeof n.fixed=="boolean"?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(n.fixed.x!==void 0&&typeof n.fixed.x=="boolean"&&(t.fixed.x=n.fixed.x),n.fixed.y!==void 0&&typeof n.fixed.y=="boolean"&&(t.fixed.y=n.fixed.y))),i===!0&&n.font===null&&(t.font=Rc(s.font)),e.updateGroupOptions(t,n,o),n.scaling!==void 0&&Mo(t.scaling,n.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,n){if(t.mass!==void 0&&t.mass<=0){var i="";n!==void 0&&(i=" in node id: "+n),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",UQ),t.mass=1}}}]),e}();function ggt(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=ygt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function ygt(e,r){var t;if(e){if(typeof e=="string")return Oj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oj(e,r)}}function Oj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var mgt=function(){function e(r,t,n,i){var s,o=this;if(ft(this,e),this.body=r,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=nt(s=this.create).call(s,this),this.nodesListeners={add:function(l,u){o.add(u.items)},update:function(l,u){o.update(u.items,u.data,u.oldData)},remove:function(l,u){o.remove(u.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(l,u,f,c){if(u===l)return .5;var d=1/(u-l);return Math.max(0,(c-l)*d)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Rc(this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t,n,i=this;this.body.emitter.on("refreshNodes",nt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",nt(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",function(){gr(i.nodesListeners,function(s,o){i.body.data.nodes&&i.body.data.nodes.off(o,s)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){if(qs.parseOptions(this.options,t),t.opacity!==void 0&&(S5(t.opacity)||!th(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(var n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&this.body.nodes[n].updateShape();if(typeof t.font<"u"||typeof t.widthConstraint<"u"||typeof t.heightConstraint<"u")for(var i=0,s=mn(this.body.nodes);i<s.length;i++){var o=s[i];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(t.size!==void 0)for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.body.nodes[a].needsRefresh();(t.hidden!==void 0||t.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.data.nodes;if(vX("id",t))this.body.data.nodes=t;else if(Lr(t))this.body.data.nodes=new xa,this.body.data.nodes.add(t);else if(!t)this.body.data.nodes=new xa;else throw new TypeError("Array or DataSet expected");if(i&&gr(this.nodesListeners,function(a,l){i.off(l,a)}),this.body.nodes={},this.body.data.nodes){var s=this;gr(this.nodesListeners,function(a,l){s.body.data.nodes.on(l,a)});var o=this.body.data.nodes.getIds();this.add(o,!0)}n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i,s=[],o=0;o<t.length;o++){i=t[o];var a=this.body.data.nodes.get(i),l=this.create(a);s.push(l),this.body.nodes[i]=l}this.layoutEngine.positionInitially(s),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,n,i){for(var s=this.body.nodes,o=!1,a=0;a<t.length;a++){var l=t[a],u=s[l],f=n[a];u!==void 0?u.setOptions(f)&&(o=!0):(o=!0,u=this.create(f),s[l]=u)}!o&&i!==void 0&&(o=Ldt(n).call(n,function(c,d){var y=i[d];return y&&y.level!==c.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var n=this.body.nodes,i=0;i<t.length;i++){var s=t[i];delete n[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qs;return new n(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;gr(this.body.nodes,function(i,s){var o=t.body.data.nodes.get(s);o!==void 0&&(n===!0&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var n={};if(t!==void 0){if(Lr(t)===!0){for(var i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){var s=this.body.nodes[t[i]];n[t[i]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[t]!==void 0){var o=this.body.nodes[t];n[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];n[this.body.nodeIndices[a]]={x:Math.round(l.x),y:Math.round(l.y)}}return n}},{key:"getPosition",value:function(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t=[],n=this.body.data.nodes.getDataSet(),i=ggt(n.get()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.id,l=this.body.nodes[a],u=Math.round(l.x),f=Math.round(l.y);(o.x!==u||o.y!==f)&&t.push({id:a,x:u,y:f})}}catch(c){i.e(c)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,n){var i=[];if(this.body.nodes[t]!==void 0)for(var s=this.body.nodes[t],o={},a=0;a<s.edges.length;a++){var l=s.edges[a];n!=="to"&&l.toId==s.id?o[l.fromId]===void 0&&(i.push(l.fromId),o[l.fromId]=!0):n!=="from"&&l.fromId==s.id&&o[l.toId]===void 0&&(i.push(l.toId),o[l.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var n=[];if(this.body.nodes[t]!==void 0)for(var i=this.body.nodes[t],s=0;s<i.edges.length;s++)n.push(i.edges[s].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return n}},{key:"moveNode",value:function(t,n,i){var s=this;this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(n),this.body.nodes[t].y=Number(i),gl(function(){s.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),e}(),U5={},bgt={get exports(){return U5},set exports(e){U5=e}},W5={},wgt={get exports(){return W5},set exports(e){W5=e}},Cj=$i,$gt=function(e){return e!==void 0&&(Cj(e,"value")||Cj(e,"writable"))},_gt=zt,xgt=oo,Egt=wi,Sgt=lo,kgt=$gt,Tgt=zv,Igt=Cx;function fee(e,r){var t=arguments.length<3?e:arguments[2],n,i;if(Sgt(e)===t)return e[r];if(n=Tgt.f(e,r),n)return kgt(n)?n.value:n.get===void 0?void 0:xgt(n.get,t);if(Egt(i=Igt(e)))return fee(i,r,t)}_gt({target:"Reflect",stat:!0},{get:fee});var Agt=xr,Ogt=Agt.Reflect.get,Cgt=Ogt,Pgt=Cgt,Ngt=Pgt,Rgt=Ngt,Dgt=Rgt,Bgt=Dgt;(function(e){e.exports=Bgt})(wgt);(function(e){e.exports=W5})(bgt);var Pj=Pt(U5),q5={},Mgt={get exports(){return q5},set exports(e){q5=e}},K5={},Lgt={get exports(){return K5},set exports(e){K5=e}},Fgt=MJ,jgt=Fgt,zgt=jgt,Hgt=zgt;(function(e){e.exports=Hgt})(Lgt);(function(e){e.exports=K5})(Mgt);var Ugt=Pt(q5);function Wgt(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Tt(e),e!==null););return e}function $w(){if(typeof Reflect<"u"&&Pj){var e;$w=IN(e=Pj).call(e)}else $w=function(t,n,i){var s=Wgt(t,n);if(s){var o=Ugt(s,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return $w.apply(this,arguments)}var V5={},qgt={get exports(){return V5},set exports(e){V5=e}},Kgt=zt,Nj=Math.hypot,Vgt=Math.abs,Ggt=Math.sqrt,Ygt=!!Nj&&Nj(1/0,NaN)!==1/0;Kgt({target:"Math",stat:!0,arity:2,forced:Ygt},{hypot:function(r,t){for(var n=0,i=0,s=arguments.length,o=0,a,l;i<s;)a=Vgt(arguments[i++]),o<a?(l=o/a,n=n*l*l+1,o=a):a>0?(l=a/o,n+=l*l):n+=a;return o===1/0?1/0:o*Ggt(n)}});var Zgt=xr,Xgt=Zgt.Math.hypot,Jgt=Xgt,Qgt=Jgt;(function(e){e.exports=Qgt})(qgt);var eyt=Pt(V5);function hee(e){var r=tyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function tyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Rn=function(){function e(){ft(this,e)}return ht(e,null,[{key:"transform",value:function(t,n){Lr(t)||(t=[t]);for(var i=n.point.x,s=n.point.y,o=n.angle,a=n.length,l=0;l<t.length;++l){var u=t[l],f=u.x*Math.cos(o)-u.y*Math.sin(o),c=u.x*Math.sin(o)+u.y*Math.cos(o);u.x=i+a*f,u.y=s+a*c}}},{key:"drawPath",value:function(t,n){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)t.lineTo(n[i].x,n[i].y);t.closePath()}}]),e}(),ryt=function(e){Or(t,e);var r=hee(t);function t(){return ft(this,t),r.apply(this,arguments)}return ht(t,null,[{key:"draw",value:function(i,s){if(s.image){i.save(),i.translate(s.point.x,s.point.y),i.rotate(Math.PI/2+s.angle);var o=s.imageWidth!=null?s.imageWidth:s.image.width,a=s.imageHeight!=null?s.imageHeight:s.image.height;s.image.drawImageAtPosition(i,1,-o/2,0,o,a),i.restore()}return!1}}]),t}(Rn),nyt=function(e){Or(t,e);var r=hee(t);function t(){return ft(this,t),r.apply(this,arguments)}return ht(t,null,[{key:"draw",value:function(i,s){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Rn.transform(o,s),Rn.drawPath(i,o),!0}}]),t}(Rn),iyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),syt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};Rn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle-s/2,a=n.angle+s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),oyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.3,y:0};Rn.transform(i,n),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var s=Math.PI,o=n.angle+s/2,a=n.angle+3*s/2;return t.beginPath(),t.arc(i.x,i.y,n.length*.4,o,a,!1),t.stroke(),!0}}]),e}(),ayt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),lyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),uyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i={x:-.4,y:0};return Rn.transform(i,n),V4(t,i.x,i.y,n.length*.4),!0}}]),e}(),cyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),fyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),hyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),dyt=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Rn.transform(i,n),Rn.drawPath(t,i),!0}}]),e}(),dee=function(){function e(){ft(this,e)}return ht(e,null,[{key:"draw",value:function(t,n){var i;switch(n.type&&(i=n.type.toLowerCase()),i){case"image":return ryt.draw(t,n);case"circle":return uyt.draw(t,n);case"box":return fyt.draw(t,n);case"crow":return iyt.draw(t,n);case"curve":return syt.draw(t,n);case"diamond":return hyt.draw(t,n);case"inv_curve":return oyt.draw(t,n);case"triangle":return ayt.draw(t,n);case"inv_triangle":return lyt.draw(t,n);case"bar":return cyt.draw(t,n);case"vee":return dyt.draw(t,n);case"arrow":default:return nyt.draw(t,n)}}}]),e}();function Rj(e,r){var t=mn(e);if(Wc){var n=Wc(e);r&&(n=As(n).call(n,function(i){return Qc(e,i).enumerable})),t.push.apply(t,n)}return t}function Dj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=Rj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):qc?jx(e,qc(i)):qr(n=Rj(Object(i))).call(n,function(s){zx(e,s,Qc(i,s))})}return e}var pee=function(){function e(r,t,n){ft(this,e),this._body=t,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(r),this.fromPoint=this.from,this.toPoint=this.to}return ht(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,n),t.lineWidth=n.width,n.dashes!==!1?this._drawDashedLine(t,n,o):this._drawLine(t,n,o)}},{key:"_drawLine",value:function(t,n,i,s,o){if(this.from!=this.to)this._line(t,n,i,s,o);else{var a=this._getCircleData(t),l=bn(a,3),u=l[0],f=l[1],c=l[2];this._circle(t,n,u,f,c)}}},{key:"_drawDashedLine",value:function(t,n,i,s,o){t.lineCap="round";var a=Lr(n.dashes)?n.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,n,i);else{var l=this._getCircleData(t),u=bn(l,3),f=u[0],c=u[1],d=u[2];this._circle(t,n,f,c,d)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)MX(t,this.from.x,this.from.y,this.to.x,this.to.y,a);else{var y=this._getCircleData(t),w=bn(y,3),b=w[0],T=w[1],_=w[2];this._circle(t,n,b,T,_)}this.enableShadow(t,n),t.stroke(),this.disableShadow(t,n)}}},{key:"findBorderPosition",value:function(t,n,i){return this.from!=this.to?this._findBorderPosition(t,n,i):this._findBorderPositionCircle(t,n,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var n,i=Oi(n=this._getCircleData(t)).call(n,0,2),s=bn(i,2),o=s[0],a=s[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:a,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var n=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);var i=see(t,this.options.selfReference.angle,n,this.from);return[i.x,i.y,n]}},{key:"_pointOnCircle",value:function(t,n,i,s){var o=s*2*Math.PI;return{x:t+i*Math.cos(o),y:n-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,n,i){var s=i.x,o=i.y,a=i.low,l=i.high,u=i.direction,f=10,c=this.options.selfReference.size,d=.05,y,w=(a+l)*.5,b=0;this.options.arrowStrikethrough===!0&&(u===-1?b=this.options.endPointOffset.from:u===1&&(b=this.options.endPointOffset.to));var T=0;do{w=(a+l)*.5,y=this._pointOnCircle(s,o,c,w);var _=Math.atan2(t.y-y.y,t.x-y.x),A=t.distanceToBorder(n,_)+b,x=Math.sqrt(Math.pow(y.x-t.x,2)+Math.pow(y.y-t.y,2)),I=A-x;if(Math.abs(I)<d)break;I>0?u>0?a=w:l=w:u>0?l=w:a=w,++T}while(a<=l&&T<f);return Dj(Dj({},y),{},{t:w})}},{key:"getLineWidth",value:function(t,n){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):n===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,n){if(n.inheritsColor!==!1){if(n.inheritsColor==="both"&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=Ho(this.from.options.color.border,n.opacity),o=Ho(this.to.options.color.border,n.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),i.addColorStop(0,s),i.addColorStop(1,o),i}return n.inheritsColor==="to"?Ho(this.to.options.color.border,n.opacity):Ho(this.from.options.color.border,n.opacity)}else return Ho(n.color,n.opacity)}},{key:"_circle",value:function(t,n,i,s,o){this.enableShadow(t,n);var a=0,l=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var u=this.options.selfReference.angle,f=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:f,direction:-1}),d=this._findBorderPositionCircle(this.from,t,{x:i,y:s,low:u,high:f,direction:1});a=Math.atan2(c.y-s,c.x-i),l=Math.atan2(d.y-s,d.x-i)}t.beginPath(),t.arc(i,s,o,a,l,!1),t.stroke(),this.disableShadow(t,n)}},{key:"getDistanceToEdge",value:function(t,n,i,s,o,a){if(this.from!=this.to)return this._getDistanceToEdge(t,n,i,s,o,a);var l=this._getCircleData(void 0),u=bn(l,3),f=u[0],c=u[1],d=u[2],y=f-o,w=c-a;return Math.abs(Math.sqrt(y*y+w*w)-d)}},{key:"_getDistanceToLine",value:function(t,n,i,s,o,a){var l=i-t,u=s-n,f=l*l+u*u,c=((o-t)*l+(a-n)*u)/f;c>1?c=1:c<0&&(c=0);var d=t+c*l,y=n+c*u,w=d-o,b=y-a;return Math.sqrt(w*w+b*b)}},{key:"getArrowData",value:function(t,n,i,s,o,a){var l,u,f,c,d,y,w,b=a.width;n==="from"?(f=this.from,c=this.to,d=a.fromArrowScale<0,y=Math.abs(a.fromArrowScale),w=a.fromArrowType):n==="to"?(f=this.to,c=this.from,d=a.toArrowScale<0,y=Math.abs(a.toArrowScale),w=a.toArrowType):(f=this.to,c=this.from,d=a.middleArrowScale<0,y=Math.abs(a.middleArrowScale),w=a.middleArrowType);var T=15*y+3*b;if(f!=c){var _=eyt(f.x-c.x,f.y-c.y),A=T/_;if(n!=="middle")if(this.options.smooth.enabled===!0){var x=this._findBorderPosition(f,t,{via:i}),I=this.getPoint(x.t+A*(n==="from"?1:-1),i);l=Math.atan2(x.y-I.y,x.x-I.x),u=x}else l=Math.atan2(f.y-c.y,f.x-c.x),u=this._findBorderPosition(f,t);else{var O=(d?-A:A)/2,C=this.getPoint(.5+O,i),g=this.getPoint(.5-O,i);l=Math.atan2(C.y-g.y,C.x-g.x),u=this.getPoint(.5,i)}}else{var M=this._getCircleData(t),B=bn(M,3),L=B[0],q=B[1],Q=B[2];if(n==="from"){var re=this.options.selfReference.angle,Z=this.options.selfReference.angle+Math.PI,j=this._findBorderPositionCircle(this.from,t,{x:L,y:q,low:re,high:Z,direction:-1});l=j.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=j}else if(n==="to"){var X=this.options.selfReference.angle,ie=this.options.selfReference.angle+Math.PI,Ee=this._findBorderPositionCircle(this.from,t,{x:L,y:q,low:X,high:ie,direction:1});l=Ee.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=Ee}else{var $e=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(L,q,Q,$e),l=$e*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var Pe=u.x-T*.9*Math.cos(l),He=u.y-T*.9*Math.sin(l),Ve={x:Pe,y:He};return{point:u,core:Ve,angle:l,length:T,type:w}}},{key:"drawArrowHead",value:function(t,n,i,s,o){t.strokeStyle=this.getColor(t,n),t.fillStyle=t.strokeStyle,t.lineWidth=n.width;var a=dee.draw(t,o);a&&(this.enableShadow(t,n),Pb(t).call(t),this.disableShadow(t,n))}},{key:"enableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor=n.shadowColor,t.shadowBlur=n.shadowSize,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY)}},{key:"disableShadow",value:function(t,n){n.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,n){if(n.background!==!1){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=n.backgroundColor,t.lineWidth=n.backgroundSize,this.setStrokeDashed(t,n.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,n.dashes)}}},{key:"setStrokeDashed",value:function(t,n){if(n!==!1)if(t.setLineDash!==void 0){var i=Lr(n)?n:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function Bj(e,r){var t=mn(e);if(Wc){var n=Wc(e);r&&(n=As(n).call(n,function(i){return Qc(e,i).enumerable})),t.push.apply(t,n)}return t}function Mj(e){for(var r=1;r<arguments.length;r++){var t,n,i=arguments[r]!=null?arguments[r]:{};r%2?qr(t=Bj(Object(i),!0)).call(t,function(s){Ux(e,s,i[s])}):qc?jx(e,qc(i)):qr(n=Bj(Object(i))).call(n,function(s){zx(e,s,Qc(i,s))})}return e}function pyt(e){var r=vyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function vyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var ON=function(e){Or(t,e);var r=pyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_findBorderPositionBezier",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),a=10,l=.2,u=!1,f=1,c=0,d=this.to,y,w,b=this.options.endPointOffset?this.options.endPointOffset.to:0;i.id===this.from.id&&(d=this.from,u=!0,b=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(b=0);var T=0;do{w=(c+f)*.5,y=this.getPoint(w,o);var _=Math.atan2(d.y-y.y,d.x-y.x),A=d.distanceToBorder(s,_)+b,x=Math.sqrt(Math.pow(y.x-d.x,2)+Math.pow(y.y-d.y,2)),I=A-x;if(Math.abs(I)<l)break;I<0?u===!1?c=w:f=w:u===!1?f=w:c=w,++T}while(c<=f&&T<a);return Mj(Mj({},y),{},{t:w})}},{key:"_getDistanceToBezierEdge",value:function(i,s,o,a,l,u,f){var c=1e9,d,y,w,b,T,_=i,A=s;for(y=1;y<10;y++)w=.1*y,b=Math.pow(1-w,2)*i+2*w*(1-w)*f.x+Math.pow(w,2)*o,T=Math.pow(1-w,2)*s+2*w*(1-w)*f.y+Math.pow(w,2)*a,y>0&&(d=this._getDistanceToLine(_,A,b,T,l,u),c=d<c?d:c),_=b,A=T;return c}},{key:"_bezierCurve",value:function(i,s,o,a){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?a!=null&&a.x!=null?i.bezierCurveTo(o.x,o.y,a.x,a.y,this.toPoint.x,this.toPoint.y):i.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):i.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(i,s),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),t}(pee);function gyt(e){var r=yyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function yyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Lj=function(e){Or(t,e);var r=gyt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return ht(t,[{key:"setOptions",value:function(i){$w(Tt(t.prototype),"setOptions",this).call(this,i);var s=!1;this.options.physics!==i.physics&&(s=!0),this.options=i,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),s===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var i="edgeId:"+this.id,s=this._body.functions.createNode({id:i,shape:"circle",physics:!0,hidden:!0});this._body.nodes[i]=s,this.via=s,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),a=bn(o,3),l=a[0],u=a[1],f=a[2],c=2*Math.PI*(1-i);return{x:l+f*Math.sin(c),y:u+f-f*(1-Math.cos(c))}}else return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*s.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*s.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s,this.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToBezierEdge(i,s,o,a,l,u,this.via)}}]),t}(ON);function myt(e){var r=byt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function byt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Fj=function(e){Or(t,e);var r=myt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s,o){this._bezierCurve(i,s,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var i=this.options.smooth.roundness,s=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),a=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){var l,u;o<=a?l=u=i*a:l=u=i*o,this.from.x>this.to.x&&(l=-l),this.from.y>=this.to.y&&(u=-u);var f=this.from.x+l,c=this.from.y+u;return s==="discrete"&&(o<=a?f=o<i*a?this.from.x:f:c=a<i*o?this.from.y:c),{x:f,y:c}}else if(s==="straightCross"){var d=(1-i)*o,y=(1-i)*a;return o<=a?(d=0,this.from.y<this.to.y&&(y=-y)):(this.from.x<this.to.x&&(d=-d),y=0),{x:this.to.x+d,y:this.to.y+y}}else if(s==="horizontal"){var w=(1-i)*o;return this.from.x<this.to.x&&(w=-w),{x:this.to.x+w,y:this.from.y}}else if(s==="vertical"){var b=(1-i)*a;return this.from.y<this.to.y&&(b=-b),{x:this.from.x,y:this.to.y+b}}else if(s==="curvedCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var T=Math.sqrt(o*o+a*a),_=Math.PI,A=Math.atan2(a,o),x=(A+(i*.5+.5)*_)%(2*_);return{x:this.from.x+(i*.5+.5)*T*Math.sin(x),y:this.from.y+(i*.5+.5)*T*Math.cos(x)}}else if(s==="curvedCCW"){o=this.to.x-this.from.x,a=this.from.y-this.to.y;var I=Math.sqrt(o*o+a*a),O=Math.PI,C=Math.atan2(a,o),g=(C+(-i*.5+.5)*O)%(2*O);return{x:this.from.x+(i*.5+.5)*I*Math.sin(g),y:this.from.y+(i*.5+.5)*I*Math.cos(g)}}else{var M,B;o<=a?M=B=i*a:M=B=i*o,this.from.x>this.to.x&&(M=-M),this.from.y>=this.to.y&&(B=-B);var L=this.from.x+M,q=this.from.y+B;return o<=a?this.from.x<=this.to.x?L=this.to.x<L?this.to.x:L:L=this.to.x>L?this.to.x:L:this.from.y>=this.to.y?q=this.to.y>q?this.to.y:q:q=this.to.y<q?this.to.y:q,{x:L,y:q}}}},{key:"_findBorderPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(i,s,o.via)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(i,s,o,a,l,u,f)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=i,a=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*s.x+Math.pow(o,2)*this.toPoint.x,l=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*s.y+Math.pow(o,2)*this.toPoint.y;return{x:a,y:l}}}]),t}(ON);function wyt(e){var r=$yt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function $yt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var _yt=function(e){Or(t,e);var r=wyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_getDistanceToBezierEdge2",value:function(i,s,o,a,l,u,f,c){for(var d=1e9,y=i,w=s,b=[0,0,0,0],T=1;T<10;T++){var _=.1*T;b[0]=Math.pow(1-_,3),b[1]=3*_*Math.pow(1-_,2),b[2]=3*Math.pow(_,2)*(1-_),b[3]=Math.pow(_,3);var A=b[0]*i+b[1]*f.x+b[2]*c.x+b[3]*o,x=b[0]*s+b[1]*f.y+b[2]*c.y+b[3]*a;if(T>0){var I=this._getDistanceToLine(y,w,A,x,l,u);d=I<d?I:d}y=A,w=x}return d}}]),t}(ON);function xyt(e){var r=Eyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Eyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var jj=function(e){Or(t,e);var r=xyt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s,o){var a=o[0],l=o[1];this._bezierCurve(i,s,a,l)}},{key:"_getViaCoordinates",value:function(){var i=this.from.x-this.to.x,s=this.from.y-this.to.y,o,a,l,u,f=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(a=this.from.y,u=this.to.y,o=this.from.x-f*i,l=this.to.x+f*i):(a=this.from.y-f*s,u=this.to.y+f*s,o=this.from.x,l=this.to.x),[{x:o,y:a},{x:l,y:u}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(i,s){return this._findBorderPositionBezier(i,s)}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),c=bn(f,2),d=c[0],y=c[1];return this._getDistanceToBezierEdge2(i,s,o,a,l,u,d,y)}},{key:"getPoint",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=bn(s,2),a=o[0],l=o[1],u=i,f=[Math.pow(1-u,3),3*u*Math.pow(1-u,2),3*Math.pow(u,2)*(1-u),Math.pow(u,3)],c=f[0]*this.fromPoint.x+f[1]*a.x+f[2]*l.x+f[3]*this.toPoint.x,d=f[0]*this.fromPoint.y+f[1]*a.y+f[2]*l.y+f[3]*this.toPoint.y;return{x:c,y:d}}}]),t}(_yt);function Syt(e){var r=kyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function kyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var zj=function(e){Or(t,e);var r=Syt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_line",value:function(i,s){i.beginPath(),i.moveTo(this.fromPoint.x,this.fromPoint.y),i.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(i,s),i.stroke(),this.disableShadow(i,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(i){return{x:(1-i)*this.fromPoint.x+i*this.toPoint.x,y:(1-i)*this.fromPoint.y+i*this.toPoint.y}}},{key:"_findBorderPosition",value:function(i,s){var o=this.to,a=this.from;i.id===this.from.id&&(o=this.from,a=this.to);var l=Math.atan2(o.y-a.y,o.x-a.x),u=o.x-a.x,f=o.y-a.y,c=Math.sqrt(u*u+f*f),d=i.distanceToBorder(s,l),y=(c-d)/c;return{x:(1-y)*a.x+y*o.x,y:(1-y)*a.y+y*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(i,s,o,a,l,u){return this._getDistanceToLine(i,s,o,a,l,u)}}]),t}(pee),Ap=function(){function e(r,t,n,i,s){if(ft(this,e),t===void 0)throw new Error("No body provided");this.options=Rc(i),this.globalOptions=i,this.defaultOptions=s,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new aee(this.body,this.options,!0),this.setOptions(r)}return ht(e,[{key:"setOptions",value:function(t){if(t){var n=typeof t.physics<"u"&&this.options.physics!==t.physics||typeof t.hidden<"u"&&(this.options.hidden||!1)!==(t.hidden||!1)||typeof t.from<"u"&&this.options.from!==t.from||typeof t.to<"u"&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=iee(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=kN("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,n=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:n,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var a=this.options.selectionWidth;typeof a=="function"?o.width=a(o.width):typeof a=="number"&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var l=this.options.hoverWidth;typeof l=="function"?o.width=l(o.width):typeof l=="number"&&(o.width+=l),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var n=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,n=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof Lj&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof jj&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof Fj&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof zj&&t.type.enabled===!1)&&(i=!1),i===!0&&(n=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(n=!0,this.edgeType=new Lj(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new jj(this.options,this.body,this.labelModule):this.edgeType=new Fj(this.options,this.body,this.labelModule):this.edgeType=new zj(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),n}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,n,i){if(this.options.value!==void 0){var s=this.options.scaling.customScalingFunction(t,n,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*a}this.options.width=this.options.scaling.min+s*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,n,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var n=this.getFormattingValues();if(!n.hidden){var i=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,n.fromArrow&&(s.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),n.fromArrowSrc&&(s.from.image=this.imagelist.load(n.fromArrowSrc)),n.fromArrowImageWidth&&(s.from.imageWidth=n.fromArrowImageWidth),n.fromArrowImageHeight&&(s.from.imageHeight=n.fromArrowImageHeight)),n.toArrow&&(s.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,n),n.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),n.toArrowSrc&&(s.to.image=this.imagelist.load(n.toArrowSrc)),n.toArrowImageWidth&&(s.to.imageWidth=n.toArrowImageWidth),n.toArrowImageHeight&&(s.to.imageHeight=n.toArrowImageHeight)),n.middleArrow&&(s.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,n),n.middleArrowSrc&&(s.middle.image=this.imagelist.load(n.middleArrowSrc)),n.middleArrowImageWidth&&(s.middle.imageWidth=n.middleArrowImageWidth),n.middleArrowImageHeight&&(s.middle.imageHeight=n.middleArrowImageHeight)),n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,s.to)}}},{key:"drawLabel",value:function(t,n){if(this.options.label!==void 0){var i=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover);var o;if(i.id!=s.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,n),t.save();var a=this._getRotation(t);a.angle!=0&&(t.translate(a.x,a.y),t.rotate(a.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var l=see(t,this.options.selfReference.angle,this.options.selfReference.size,i);o=this._pointOnCircle(l.x,l.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var n=[];if(this.labelModule.visible()){var i=this._getRotation();O5(this.labelModule.getSize(),t,i)&&n.push({edgeId:this.id,labelId:0})}var s={left:t.x,top:t.y};return this.isOverlappingWith(s)&&n.push({edgeId:this.id}),n}},{key:"isOverlappingWith",value:function(t){if(this.connected){var n=10,i=this.from.x,s=this.from.y,o=this.to.x,a=this.to.y,l=t.left,u=t.top,f=this.edgeType.getDistanceToEdge(i,s,o,a,l,u);return f<n}else return!1}},{key:"_getRotation",value:function(t){var n=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,n);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var s={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;var o=this.from.y-this.to.y,a=this.from.x-this.to.x,l=Math.atan2(o,a);return(l<-1&&a<0||l>0&&a<0)&&(l+=Math.PI),s.angle=l,s}},{key:"_pointOnCircle",value:function(t,n,i,s){return{x:t+i*Math.cos(s),y:n-i*Math.sin(s)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(Xv(a,t,n,i),n.endPointOffset!==void 0&&n.endPointOffset.from!==void 0&&(th(n.endPointOffset.from)?t.endPointOffset.from=n.endPointOffset.from:(t.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),n.endPointOffset!==void 0&&n.endPointOffset.to!==void 0&&(th(n.endPointOffset.to)?t.endPointOffset.to=n.endPointOffset.to:(t.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),F$(n.label)?t.label=n.label:F$(t.label)||(t.label=void 0),Mo(t,n,"smooth",s),Mo(t,n,"shadow",s),Mo(t,n,"background",s),n.dashes!==void 0&&n.dashes!==null?t.dashes=n.dashes:i===!0&&n.dashes===null&&(t.dashes=mh(s.dashes)),n.scaling!==void 0&&n.scaling!==null?(n.scaling.min!==void 0&&(t.scaling.min=n.scaling.min),n.scaling.max!==void 0&&(t.scaling.max=n.scaling.max),Mo(t.scaling,n.scaling,"label",s.scaling)):i===!0&&n.scaling===null&&(t.scaling=mh(s.scaling)),n.arrows!==void 0&&n.arrows!==null)if(typeof n.arrows=="string"){var l=n.arrows.toLowerCase();t.arrows.to.enabled=Sr(l).call(l,"to")!=-1,t.arrows.middle.enabled=Sr(l).call(l,"middle")!=-1,t.arrows.from.enabled=Sr(l).call(l,"from")!=-1}else if(Dr(n.arrows)==="object")Mo(t.arrows,n.arrows,"to",s.arrows),Mo(t.arrows,n.arrows,"middle",s.arrows),Mo(t.arrows,n.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Cb(n.arrows));else i===!0&&n.arrows===null&&(t.arrows=mh(s.arrows));if(n.color!==void 0&&n.color!==null){var u=wc(n.color)?{color:n.color,highlight:n.color,hover:n.color,inherit:!1,opacity:1}:n.color,f=t.color;if(o)Zr(f,s.color,!1,i);else for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&delete f[c];if(wc(f))f.color=f,f.highlight=f,f.hover=f,f.inherit=!1,u.opacity===void 0&&(f.opacity=1);else{var d=!1;u.color!==void 0&&(f.color=u.color,d=!0),u.highlight!==void 0&&(f.highlight=u.highlight,d=!0),u.hover!==void 0&&(f.hover=u.hover,d=!0),u.inherit!==void 0&&(f.inherit=u.inherit),u.opacity!==void 0&&(f.opacity=Math.min(1,Math.max(0,u.opacity))),d===!0?f.inherit=!1:f.inherit===void 0&&(f.inherit="from")}}else i===!0&&n.color===null&&(t.color=Rc(s.color));i===!0&&n.font===null&&(t.font=Rc(s.font)),Object.prototype.hasOwnProperty.call(n,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=n.selfReferenceSize)}}]),e}(),Tyt=function(){function e(r,t,n){var i,s=this;ft(this,e),this.body=r,this.images=t,this.groups=n,this.body.functions.createEdge=nt(i=this.create).call(i,this),this.edgesListeners={add:function(a,l){s.add(l.items)},update:function(a,l){s.update(l.items)},remove:function(a,l){s.remove(l.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,l,u,f){if(l===a)return .5;var c=1/(l-a);return Math.max(0,(f-a)*c)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Zr(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n,i;this.body.emitter.on("_forceDisableDynamicCurves",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");var a=!1;for(var l in t.body.edges)if(Object.prototype.hasOwnProperty.call(t.body.edges,l)){var u=t.body.edges[l],f=t.body.data.edges.get(l);if(f!=null){var c=f.smooth;c!==void 0&&c.enabled===!0&&c.type==="dynamic"&&(s===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:s}}),a=!0)}}o===!0&&a===!0&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",nt(n=this.refresh).call(n,this)),this.body.emitter.on("refresh",nt(i=this.refresh).call(i,this)),this.body.emitter.on("destroy",function(){gr(t.edgesListeners,function(s,o){t.body.data.edges&&t.body.data.edges.off(o,s)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(t!==void 0){Ap.parseOptions(this.options,t,!0,this.defaultOptions,!0);var n=!1;if(t.smooth!==void 0)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(n=this.body.edges[i].updateEdgeType()||n);if(t.font!==void 0)for(var s in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,s)&&this.body.edges[s].updateLabelModule();(t.hidden!==void 0||t.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.body.data.edges;if(vX("id",t))this.body.data.edges=t;else if(Lr(t))this.body.data.edges=new xa,this.body.data.edges.add(t);else if(!t)this.body.data.edges=new xa;else throw new TypeError("Array or DataSet expected");if(s&&gr(this.edgesListeners,function(a,l){s.off(l,a)}),this.body.edges={},this.body.data.edges){gr(this.edgesListeners,function(a,l){n.body.data.edges.on(l,a)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),i===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.edges,s=this.body.data.edges,o=0;o<t.length;o++){var a=t[o],l=i[a];l&&l.disconnect();var u=s.get(a,{showInternalIds:!0});i[a]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var n=this.body.edges,i=this.body.data.edges,s=!1,o=0;o<t.length;o++){var a=t[o],l=i.get(a),u=n[a];u!==void 0?(u.disconnect(),s=u.setOptions(l)||s,u.connect()):(this.body.edges[a]=this.create(l),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.length!==0){var i=this.body.edges;gr(t,function(s){var o=i[s];o!==void 0&&o.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;gr(this.body.edges,function(n,i){var s=t.body.data.edges.get(i);s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(t){return new Ap(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,n=this.body.nodes,i=this.body.edges;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var s=i[t];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(t){var n=[];if(this.body.edges[t]!==void 0){var i=this.body.edges[t];i.fromId!==void 0&&n.push(i.fromId),i.toId!==void 0&&n.push(i.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,n=[];gr(this.body.edges,function(i,s){var o=t.body.nodes[i.toId],a=t.body.nodes[i.fromId];o!==void 0&&o.isCluster===!0||a!==void 0&&a.isCluster===!0||(o===void 0||a===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(t!=null){var n=this.body.edges,i=[];qr(t).call(t,function(s,o){var a=n[o];a===void 0&&i.push(o)}),this.add(i,!0)}}}]),e}(),vee=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=Vx("BARNES HUT SOLVER")}return ht(e,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t,n=this.body.nodes,i=this.physicsBody.physicsNodeIndices,s=i.length,o=this._formBarnesHutTree(n,i);this.barnesHutTree=o;for(var a=0;a<s;a++)t=n[i[a]],t.options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,n){this._getForceContribution(t.children.NW,n),this._getForceContribution(t.children.NE,n),this._getForceContribution(t.children.SW,n),this._getForceContribution(t.children.SE,n)}},{key:"_getForceContribution",value:function(t,n){if(t.childrenCount>0){var i=t.centerOfMass.x-n.x,s=t.centerOfMass.y-n.y,o=Math.sqrt(i*i+s*s);o*t.calcSize>this.thetaInversed?this._calculateForces(o,i,s,n,t):t.childrenCount===4?this._getForceContributions(t,n):t.children.data.id!=n.id&&this._calculateForces(o,i,s,n,t)}}},{key:"_calculateForces",value:function(t,n,i,s,o){t===0&&(t=.1,n=t),this.overlapAvoidanceFactor<1&&s.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius));var a=this.options.gravitationalConstant*o.mass*s.options.mass/Math.pow(t,3),l=n*a,u=i*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}},{key:"_formBarnesHutTree",value:function(t,n){for(var i,s=n.length,o=t[n[0]].x,a=t[n[0]].y,l=t[n[0]].x,u=t[n[0]].y,f=1;f<s;f++){var c=t[n[f]],d=c.x,y=c.y;c.options.mass>0&&(d<o&&(o=d),d>l&&(l=d),y<a&&(a=y),y>u&&(u=y))}var w=Math.abs(l-o)-Math.abs(u-a);w>0?(a-=.5*w,u+=.5*w):(o+=.5*w,l-=.5*w);var b=1e-5,T=Math.max(b,Math.abs(l-o)),_=.5*T,A=.5*(o+l),x=.5*(a+u),I={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:A-_,maxX:A+_,minY:x-_,maxY:x+_},size:T,calcSize:1/T,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(I.root);for(var O=0;O<s;O++)i=t[n[O]],i.options.mass>0&&this._placeInTree(I.root,i);return I}},{key:"_updateBranchMass",value:function(t,n){var i=t.centerOfMass,s=t.mass+n.options.mass,o=1/s;i.x=i.x*t.mass+n.x*n.options.mass,i.x*=o,i.y=i.y*t.mass+n.y*n.options.mass,i.y*=o,t.mass=s;var a=Math.max(Math.max(n.height,n.radius),n.width);t.maxWidth=t.maxWidth<a?a:t.maxWidth}},{key:"_placeInTree",value:function(t,n,i){(i!=!0||i===void 0)&&this._updateBranchMass(t,n);var s=t.children.NW.range,o;s.maxX>n.x?s.maxY>n.y?o="NW":o="SW":s.maxY>n.y?o="NE":o="SE",this._placeInRegion(t,n,o)}},{key:"_placeInRegion",value:function(t,n,i){var s=t.children[i];switch(s.childrenCount){case 0:s.children.data=n,s.childrenCount=1,this._updateBranchMass(s,n);break;case 1:s.children.data.x===n.x&&s.children.data.y===n.y?(n.x+=this._rng(),n.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,n));break;case 4:this._placeInTree(s,n);break}}},{key:"_splitBranch",value:function(t){var n=null;t.childrenCount===1&&(n=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),n!=null&&this._placeInTree(t,n)}},{key:"_insertRegion",value:function(t,n){var i,s,o,a,l=.5*t.size;switch(n){case"NW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY,a=t.range.minY+l;break;case"NE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY,a=t.range.minY+l;break;case"SW":i=t.range.minX,s=t.range.minX+l,o=t.range.minY+l,a=t.range.maxY;break;case"SE":i=t.range.minX+l,s=t.range.maxX,o=t.range.minY+l,a=t.range.maxY;break}t.children[n]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:s,minY:o,maxY:a},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,n){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,n))}},{key:"_drawBranch",value:function(t,n,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,n),this._drawBranch(t.children.NE,n),this._drawBranch(t.children.SE,n),this._drawBranch(t.children.SW,n)),n.strokeStyle=i,n.beginPath(),n.moveTo(t.range.minX,t.range.minY),n.lineTo(t.range.maxX,t.range.minY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.minY),n.lineTo(t.range.maxX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.maxX,t.range.maxY),n.lineTo(t.range.minX,t.range.maxY),n.stroke(),n.beginPath(),n.moveTo(t.range.minX,t.range.maxY),n.lineTo(t.range.minX,t.range.minY),n.stroke()}}]),e}(),Iyt=function(){function e(r,t,n){ft(this,e),this._rng=Vx("REPULSION SOLVER"),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,f=this.body.nodes,c=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,y=this.options.nodeDistance,w=-2/3/y,b=4/3,T=0;T<c.length-1;T++){l=f[c[T]];for(var _=T+1;_<c.length;_++)u=f[c[_]],t=u.x-l.x,n=u.y-l.y,i=Math.sqrt(t*t+n*n),i===0&&(i=.1*this._rng(),t=i),i<2*y&&(i<.5*y?a=1:a=w*i+b,a=a/i,s=t*a,o=n*a,d[l.id].x-=s,d[l.id].y-=o,d[u.id].x+=s,d[u.id].y+=o)}}}]),e}(),Ayt=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,s=this.options.nodeDistance,o=0;o<n.length-1;o++)for(var a=t[n[o]],l=o+1;l<n.length;l++){var u=t[n[l]];if(a.level===u.level){var f=s+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(u.shape.radius||0)/2),c=u.x-a.x,d=u.y-a.y,y=Math.sqrt(c*c+d*d),w=.05,b=void 0;y<f?b=-Math.pow(w*y,2)+Math.pow(w*f,2):b=0,y!==0&&(b=b/y);var T=c*b,_=d*b;i[a.id].x-=T,i[a.id].y-=_,i[u.id].x+=T,i[u.id].y+=_}}}}]),e}(),gT=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i=this.physicsBody.physicsEdgeIndices,s=this.body.edges,o,a,l,u=0;u<i.length;u++)n=s[i[u]],n.connected===!0&&n.toId!==n.fromId&&this.body.nodes[n.toId]!==void 0&&this.body.nodes[n.fromId]!==void 0&&(n.edgeType.via!==void 0?(t=n.options.length===void 0?this.options.springLength:n.options.length,o=n.to,a=n.edgeType.via,l=n.from,this._calculateSpringForce(o,a,.5*t),this._calculateSpringForce(a,l,.5*t)):(t=n.options.length===void 0?this.options.springLength*1.5:n.options.length,this._calculateSpringForce(n.from,n.to,t)))}},{key:"_calculateSpringForce",value:function(t,n,i){var s=t.x-n.x,o=t.y-n.y,a=Math.max(Math.sqrt(s*s+o*o),.01),l=this.options.springConstant*(i-a)/a,u=s*l,f=o*l;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=u,this.physicsBody.forces[t.id].y+=f),this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x-=u,this.physicsBody.forces[n.id].y-=f)}}]),e}(),Oyt=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o,a,l,u,f=this.body.edges,c=.5,d=this.physicsBody.physicsEdgeIndices,y=this.physicsBody.physicsNodeIndices,w=this.physicsBody.forces,b=0;b<y.length;b++){var T=y[b];w[T].springFx=0,w[T].springFy=0}for(var _=0;_<d.length;_++)n=f[d[_]],n.connected===!0&&(t=n.options.length===void 0?this.options.springLength:n.options.length,i=n.from.x-n.to.x,s=n.from.y-n.to.y,u=Math.sqrt(i*i+s*s),u=u===0?.01:u,l=this.options.springConstant*(t-u)/u,o=i*l,a=s*l,n.to.level!=n.from.level?(w[n.toId]!==void 0&&(w[n.toId].springFx-=o,w[n.toId].springFy-=a),w[n.fromId]!==void 0&&(w[n.fromId].springFx+=o,w[n.fromId].springFy+=a)):(w[n.toId]!==void 0&&(w[n.toId].x-=c*o,w[n.toId].y-=c*a),w[n.fromId]!==void 0&&(w[n.fromId].x+=c*o,w[n.fromId].y+=c*a)));l=1;for(var A,x,I=0;I<y.length;I++){var O=y[I];A=Math.min(l,Math.max(-l,w[O].springFx)),x=Math.min(l,Math.max(-l,w[O].springFy)),w[O].x+=A,w[O].y+=x}for(var C=0,g=0,M=0;M<y.length;M++){var B=y[M];C+=w[B].x,g+=w[B].y}for(var L=C/y.length,q=g/y.length,Q=0;Q<y.length;Q++){var re=y[Q];w[re].x-=L,w[re].y-=q}}}]),e}(),_w=function(){function e(r,t,n){ft(this,e),this.body=r,this.physicsBody=t,this.setOptions(n)}return ht(e,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,n,i,s,o=this.body.nodes,a=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,u=0;u<a.length;u++){var f=a[u];s=o[f],t=-s.x,n=-s.y,i=Math.sqrt(t*t+n*n),this._calculateForces(i,t,n,l,s)}}},{key:"_calculateForces",value:function(t,n,i,s,o){var a=t===0?0:this.options.centralGravity/t;s[o.id].x=n*a,s[o.id].y=i*a}}]),e}();function Cyt(e){var r=Pyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Pyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Nyt=function(e){Or(t,e);var r=Cyt(t);function t(n,i,s){var o;return ft(this,t),o=r.call(this,n,i,s),o._rng=Vx("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return ht(t,[{key:"_calculateForces",value:function(i,s,o,a,l){i===0&&(i=.1*this._rng(),s=i),this.overlapAvoidanceFactor<1&&a.shape.radius&&(i=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,i-a.shape.radius));var u=a.edges.length+1,f=this.options.gravitationalConstant*l.mass*a.options.mass*u/Math.pow(i,2),c=s*f,d=o*f;this.physicsBody.forces[a.id].x+=c,this.physicsBody.forces[a.id].y+=d}}]),t}(vee);function Ryt(e){var r=Dyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Dyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Byt=function(e){Or(t,e);var r=Ryt(t);function t(n,i,s){return ft(this,t),r.call(this,n,i,s)}return ht(t,[{key:"_calculateForces",value:function(i,s,o,a,l){if(i>0){var u=l.edges.length+1,f=this.options.centralGravity*u*l.options.mass;a[l.id].x=s*f,a[l.id].y=o*f}}}]),t}(_w),Myt=function(){function e(r){ft(this,e),this.body=r,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Un(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),t.ready===!0&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){t.ready===!0&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,B$(["stabilization"],this.options,t),Mo(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var n=this.options.wind;n&&((typeof n.x!="number"||S5(n.x))&&(n.x=0),(typeof n.y!="number"||S5(n.y))&&(n.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new Nyt(this.body,this.physicsBody,t),this.edgesSolver=new gT(this.body,this.physicsBody,t),this.gravitySolver=new Byt(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new Iyt(this.body,this.physicsBody,t),this.edgesSolver=new gT(this.body,this.physicsBody,t),this.gravitySolver=new _w(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new Ayt(this.body,this.physicsBody,t),this.edgesSolver=new Oyt(this.body,this.physicsBody,t),this.gravitySolver=new _w(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new vee(this.body,this.physicsBody,t),this.edgesSolver=new gT(this.body,this.physicsBody,t),this.gravitySolver=new _w(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var t;this.viewFunction=nt(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=P$();this.physicsTick();var n=P$()-t;(n<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&gl(function(){t.body.emitter.emit("stabilized",{iterations:n}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var t=1.2;this._evaluateStepQuality()===!0?this.timestep=t*this.timestep:this.timestep/t<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/t))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var t=this.adaptiveCounter%this.adaptiveInterval===0;t?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,n=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&n[s].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(n[s].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[a]={x:0,y:0},this.physicsBody.velocities[a]===void 0&&(this.physicsBody.velocities[a]={x:0,y:0})}for(var l in this.physicsBody.velocities)t[l]===void 0&&delete this.physicsBody.velocities[l]}},{key:"revert",value:function(){var t=mn(this.previousStates),n=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var s=0;s<t.length;s++){var o=t[s];n[o]!==void 0?n[o].options.physics===!0&&(this.referenceState[o]={positions:{x:n[o].x,y:n[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,n[o].x=this.previousStates[o].x,n[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t,n,i,s=this.body.nodes,o=this.referenceState,a=.3;for(var l in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,l)&&s[l]!==void 0&&(t=s[l].x-o[l].positions.x,n=s[l].y-o[l].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),i>a))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,n=0,i=0,s=5,o=0;o<t.length;o++){var a=t[o],l=this._performStep(a);n=Math.max(n,l),i+=l}this.adaptiveTimestepEnabled=i/t.length<s,this.stabilized=n<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,n,i){var s=this.modelOptions.damping*t,o=(n-s)/i;t+=o*this.timestep;var a=this.options.maxVelocity||1e9;return Math.abs(t)>a&&(t=t>0?a:-a),t}},{key:"_performStep",value:function(t){var n=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var s=this.physicsBody.velocities[t];this.previousStates[t]={x:n.x,y:n.y,vx:s.x,vy:s.y},n.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,i.x,n.options.mass),n.x+=s.x*this.timestep):(i.x=0,s.x=0),n.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,i.y,n.options.mass),n.y+=s.y*this.timestep):(i.y=0,s.y=0);var o=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return o}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].x&&t[n].y){var i=t[n].options.fixed;this.freezeCache[n]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.freezeCache[n]!==void 0&&(t[n].options.fixed.x=this.freezeCache[n].x,t[n].options.fixed.y=this.freezeCache[n].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof n!="number"&&(n=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",n)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=n,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,gl(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,n=function(){return t.stabilized===!1&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var s=0;n()&&s<this.options.stabilization.updateInterval;)this.physicsTick(),s++;if(i(),n()){var o;gl(nt(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var i=this.physicsBody.physicsNodeIndices[n],s=this.body.nodes[i],o=this.physicsBody.forces[i],a=20,l=.03,u=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),f=Math.min(Math.max(5,u),15),c=3*f,d=w5((180-Math.min(1,Math.max(0,l*u))*180)/360,1,1),y={x:s.x+a*o.x,y:s.y+a*o.y};t.lineWidth=f,t.strokeStyle=d,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(y.x,y.y),t.stroke();var w=Math.atan2(o.y,o.x);t.fillStyle=d,dee.draw(t,{type:"arrow",point:y,angle:w,length:c}),Pb(t).call(t)}}}]),e}();let N1;const Lyt=new Uint8Array(16);function Fyt(){if(!N1&&(N1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N1(Lyt)}const Si=[];for(let e=0;e<256;++e)Si.push((e+256).toString(16).slice(1));function jyt(e,r=0){return(Si[e[r+0]]+Si[e[r+1]]+Si[e[r+2]]+Si[e[r+3]]+"-"+Si[e[r+4]]+Si[e[r+5]]+"-"+Si[e[r+6]]+Si[e[r+7]]+"-"+Si[e[r+8]]+Si[e[r+9]]+"-"+Si[e[r+10]]+Si[e[r+11]]+Si[e[r+12]]+Si[e[r+13]]+Si[e[r+14]]+Si[e[r+15]]).toLowerCase()}const zyt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Hj={randomUUID:zyt};function _y(e,r,t){if(Hj.randomUUID&&!r&&!e)return Hj.randomUUID();e=e||{};const n=e.random||(e.rng||Fyt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return jyt(n)}var is=function(){function e(){ft(this,e)}return ht(e,null,[{key:"getRange",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.shape.boundingBox.left&&(o=l.shape.boundingBox.left),a<l.shape.boundingBox.right&&(a=l.shape.boundingBox.right),i>l.shape.boundingBox.top&&(i=l.shape.boundingBox.top),s<l.shape.boundingBox.bottom&&(s=l.shape.boundingBox.bottom);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"getRangeCore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=1e9,s=-1e9,o=1e9,a=-1e9,l;if(n.length>0)for(var u=0;u<n.length;u++)l=t[n[u]],o>l.x&&(o=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),s<l.y&&(s=l.y);return o===1e9&&a===-1e9&&i===1e9&&s===-1e9&&(i=0,s=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:s}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,n){var i={};return n===void 0||n==="node"?(Zr(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Zr(i,t.options,!0),i}}]),e}();function Hyt(e){var r=Uyt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Uyt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Wyt=function(e){Or(t,e);var r=Hyt(t);function t(n,i,s,o,a,l){var u;return ft(this,t),u=r.call(this,n,i,s,o,a,l),u.isCluster=!0,u.containedNodes={},u.containedEdges={},u}return ht(t,[{key:"_openChildCluster",value:function(i){var s=this,o=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],gr(o.edges,function(a){delete s.containedEdges[a.id]}),gr(o.containedNodes,function(a,l){s.containedNodes[l]=a}),o.containedNodes={},gr(o.containedEdges,function(a,l){s.containedEdges[l]=a}),o.containedEdges={},gr(o.edges,function(a){gr(s.edges,function(l){var u,f,c=Sr(u=l.clusteringEdgeReplacingIds).call(u,a.id);c!==-1&&(gr(a.clusteringEdgeReplacingIds,function(d){l.clusteringEdgeReplacingIds.push(d),s.body.edges[d].edgeReplacedById=l.id}),uu(f=l.clusteringEdgeReplacingIds).call(f,c,1))})}),o.edges=[]}}]),t}(qs),qyt=function(){function e(r){var t=this;ft(this,e),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Un(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}return ht(e,[{key:"clusterByHubsize",value:function(t,n){t===void 0?t=this._getHubSize():Dr(t)==="object"&&(n=this._checkOptions(t),t=this._getHubSize());for(var i=[],s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodes[this.body.nodeIndices[s]];o.edges.length>=t&&i.push(o.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],n,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");n=this._checkOptions(n);var s={},o={};gr(this.body.nodes,function(a,l){a.options&&n.joinCondition(a.options)===!0&&(s[l]=a,gr(a.edges,function(u){t.clusteredEdges[u.id]===void 0&&(o[u.id]=u)}))}),this._cluster(s,o,n,i)}},{key:"clusterByEdgeCount",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=this._checkOptions(n);for(var o=[],a={},l,u,f,c=function(){var b={},T={},_=i.body.nodeIndices[d],A=i.body.nodes[_];if(a[_]===void 0){f=0,u=[];for(var x=0;x<A.edges.length;x++)l=A.edges[x],i.clusteredEdges[l.id]===void 0&&(l.toId!==l.fromId&&f++,u.push(l));if(f===t){for(var I=function(re){if(n.joinCondition===void 0||n.joinCondition===null)return!0;var Z=is.cloneOptions(re);return n.joinCondition(Z)},O=!0,C=0;C<u.length;C++){l=u[C];var g=i._getConnectedId(l,_);if(I(A))T[l.id]=l,b[_]=A,b[g]=i.body.nodes[g],a[_]=!0;else{O=!1;break}}if(mn(b).length>0&&mn(T).length>0&&O===!0){var M=function(){for(var re=0;re<o.length;++re)for(var Z in b)if(o[re].nodes[Z]!==void 0)return o[re]},B=M();if(B!==void 0){for(var L in b)B.nodes[L]===void 0&&(B.nodes[L]=b[L]);for(var q in T)B.edges[q]===void 0&&(B.edges[q]=T[q])}else o.push({nodes:b,edges:T})}}}},d=0;d<this.body.nodeIndices.length;d++)c();for(var y=0;y<o.length;y++)this._cluster(o[y].nodes,o[y].edges,n,!1);s===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,t,n)}},{key:"clusterBridges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,t,n)}},{key:"clusterByConnection",value:function(t,n){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];n=this._checkOptions(n,o),n.clusterNodeProperties.x===void 0&&(n.clusterNodeProperties.x=o.x),n.clusterNodeProperties.y===void 0&&(n.clusterNodeProperties.y=o.y),n.clusterNodeProperties.fixed===void 0&&(n.clusterNodeProperties.fixed={},n.clusterNodeProperties.fixed.x=o.options.fixed.x,n.clusterNodeProperties.fixed.y=o.options.fixed.y);var a={},l={},u=o.id,f=is.cloneOptions(o);a[u]=o;for(var c=0;c<o.edges.length;c++){var d=o.edges[c];if(this.clusteredEdges[d.id]===void 0){var y=this._getConnectedId(d,u);if(this.clusteredNodes[y]===void 0)if(y!==u)if(n.joinCondition===void 0)l[d.id]=d,a[y]=this.body.nodes[y];else{var w=is.cloneOptions(this.body.nodes[y]);n.joinCondition(f,w)===!0&&(l[d.id]=d,a[y]=this.body.nodes[y])}else l[d.id]=d}}var b=sv(i=mn(a)).call(i,function(I){return a[I].id});for(var T in a)if(Object.prototype.hasOwnProperty.call(a,T))for(var _=a[T],A=0;A<_.edges.length;A++){var x=_.edges[A];Sr(b).call(b,this._getConnectedId(x,_.id))>-1&&(l[x.id]=x)}this._cluster(a,l,n,s)}},{key:"_createClusterEdges",value:function(t,n,i,s){for(var o,a,l,u,f,c,d=mn(t),y=[],w=0;w<d.length;w++){a=d[w],l=t[a];for(var b=0;b<l.edges.length;b++)o=l.edges[b],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?n[o.id]=o:o.toId==a?(u=i.id,f=o.fromId,c=f):(u=o.toId,f=i.id,c=u),t[c]===void 0&&y.push({edge:o,fromId:f,toId:u}))}for(var T=[],_=function(g){for(var M=0;M<T.length;M++){var B=T[M],L=g.fromId===B.fromId&&g.toId===B.toId,q=g.fromId===B.toId&&g.toId===B.fromId;if(L||q)return B}return null},A=0;A<y.length;A++){var x=y[A],I=x.edge,O=_(x);O===null?(O=this._createClusteredEdge(x.fromId,x.toId,I,s),T.push(O)):O.clusteringEdgeReplacingIds.push(I.id),this.body.edges[I.id].edgeReplacedById=O.id,this._backupEdgeOptions(I),I.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.clusteredNodes[a]!==void 0&&o.push(a);for(var l=0;l<o.length;++l)delete t[o[l]];if(mn(t).length!=0&&!(mn(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=!0)){var u=Zr({},i.clusterNodeProperties);if(i.processProperties!==void 0){var f=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var d=is.cloneOptions(t[c]);f.push(d)}var y=[];for(var w in n)if(Object.prototype.hasOwnProperty.call(n,w)&&w.substr(0,12)!=="clusterEdge:"){var b=is.cloneOptions(n[w],"edge");y.push(b)}if(u=i.processProperties(u,f,y),!u)throw new Error("The processProperties function does not return properties!")}u.id===void 0&&(u.id="cluster:"+_y());var T=u.id;u.label===void 0&&(u.label="cluster");var _=void 0;u.x===void 0&&(_=this._getClusterPosition(t),u.x=_.x),u.y===void 0&&(_===void 0&&(_=this._getClusterPosition(t)),u.y=_.y),u.id=T;var A=this.body.functions.createNode(u,Wyt);A.containedNodes=t,A.containedEdges=n,A.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[u.id]=A,this._clusterEdges(t,n,u,i.clusterEdgeProperties),u.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var n=this.clusteredEdges[t.id];n!==void 0&&(t.setOptions({physics:n.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var n=mn(t),i=t[n[0]].x,s=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,l,u=1;u<n.length;u++)l=t[n[u]],i=l.x<i?l.x:i,s=l.x>s?l.x:s,o=l.y<o?l.y:o,a=l.y>a?l.y:a;return{x:.5*(i+s),y:.5*(o+a)}}},{key:"openCluster",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var s=this.body.nodes[t];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),a=Sr(o).call(o,t)-1;if(a>=0){var l=o[a],u=this.body.nodes[l];u._openChildCluster(t),delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged");return}var f=s.containedNodes,c=s.containedEdges;if(n!==void 0&&n.releaseFunction!==void 0&&typeof n.releaseFunction=="function"){var d={},y={x:s.x,y:s.y};for(var w in f)if(Object.prototype.hasOwnProperty.call(f,w)){var b=this.body.nodes[w];d[w]={x:b.x,y:b.y}}var T=n.releaseFunction(y,d);for(var _ in f)if(Object.prototype.hasOwnProperty.call(f,_)){var A=this.body.nodes[_];T[_]!==void 0&&(A.x=T[_].x===void 0?s.x:T[_].x,A.y=T[_].y===void 0?s.y:T[_].y)}}else gr(f,function(Ee){Ee.options.fixed.x===!1&&(Ee.x=s.x),Ee.options.fixed.y===!1&&(Ee.y=s.y)});for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var I=this.body.nodes[x];I.vx=s.vx,I.vy=s.vy,I.setOptions({physics:!0}),delete this.clusteredNodes[x]}for(var O=[],C=0;C<s.edges.length;C++)O.push(s.edges[C]);for(var g=0;g<O.length;g++){for(var M=O[g],B=this._getConnectedId(M,t),L=this.clusteredNodes[B],q=0;q<M.clusteringEdgeReplacingIds.length;q++){var Q=M.clusteringEdgeReplacingIds[q],re=this.body.edges[Q];if(re!==void 0)if(L!==void 0){var Z=this.body.nodes[L.clusterId];Z.containedEdges[re.id]=re,delete c[re.id];var j=re.fromId,X=re.toId;re.toId==B?X=L.clusterId:j=L.clusterId,this._createClusteredEdge(j,X,re,Z.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(re)}M.remove()}for(var ie in c)Object.prototype.hasOwnProperty.call(c,ie)&&this._restoreEdge(c[ie]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var n=[];if(this.isCluster(t)===!0){var i=this.body.nodes[t].containedNodes;for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(this.body.nodes[s].id)}return n}},{key:"findNode",value:function(t){for(var n=[],i=100,s=0,o;this.clusteredNodes[t]!==void 0&&s<i;){if(o=this.body.nodes[t],o===void 0)return[];n.push(o.id),t=this.clusteredNodes[t].clusterId,s++}return o=this.body.nodes[t],o===void 0?[]:(n.push(o.id),yh(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,n){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(n===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(n),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,n){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(n===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),s=0;s<i.length;s++){var o=this.body.edges[i[s]];o.setOptions(n)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var n=[],i=100,s=0;t!==void 0&&this.body.edges[t]!==void 0&&s<i;)n.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,s++;return yh(n).call(n),n}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var n=[t],i=[],s=[],o=100,a=0;n.length>0&&a<o;){var l=n.pop();if(l!==void 0){var u=this.body.edges[l];if(u!==void 0){a++;var f=u.clusteringEdgeReplacingIds;if(f===void 0)s.push(l);else for(var c=0;c<f.length;++c){var d=f[c];Sr(n).call(n,f)!==-1||Sr(i).call(i,f)!==-1||n.push(d)}i.push(l)}}}return s}},{key:"_getConnectedId",value:function(t,n){return t.toId!=n?t.toId:(t.fromId!=n,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,n=0,i=0,s=0,o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];a.edges.length>s&&(s=a.edges.length),t+=a.edges.length,n+=Math.pow(a.edges.length,2),i+=1}t=t/i,n=n/i;var l=n-Math.pow(t,2),u=Math.sqrt(l),f=Math.floor(t+2*u);return f>s&&(f=s),f}},{key:"_createClusteredEdge",value:function(t,n,i,s,o){var a=is.cloneOptions(i,"edge");Zr(a,s),a.from=t,a.to=n,a.id="clusterEdge:"+_y(),o!==void 0&&Zr(a,o);var l=this.body.functions.createEdge(a);return l.clusteringEdgeReplacingIds=[i.id],l.connect(),this.body.edges[l.id]=l,l}},{key:"_clusterEdges",value:function(t,n,i,s){if(n instanceof Ap){var o=n,a={};a[o.id]=o,n=a}if(t instanceof qs){var l=t,u={};u[l.id]=l,t=u}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=i.clusterEdgeProperties),this._createClusterEdges(t,n,i,s);for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)&&this.body.edges[f]!==void 0){var c=this.body.edges[f];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(this.clusteredNodes[d]={clusterId:i.id,node:this.body.nodes[d]},this.body.nodes[d].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(t!==void 0){var n=this.clusteredNodes[t];if(n!==void 0){var i=n.clusterId;if(i!==void 0)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,n){var i=[];return gr(t,function(s){n(s)&&i.push(s)}),i}},{key:"_updateState",value:function(){var t=this,n,i=[],s={},o=function(w){gr(t.body.nodes,function(b){b.isCluster===!0&&w(b)})};for(n in this.clusteredNodes)if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,n)){var a=this.body.nodes[n];a===void 0&&i.push(n)}o(function(y){for(var w=0;w<i.length;w++)delete y.containedNodes[i[w]]});for(var l=0;l<i.length;l++)delete this.clusteredNodes[i[l]];gr(this.clusteredEdges,function(y){var w=t.body.edges[y];(w===void 0||!w.endPointsValid())&&(s[y]=y)}),o(function(y){gr(y.containedEdges,function(w,b){!w.endPointsValid()&&!s[b]&&(s[b]=b)})}),gr(this.body.edges,function(y,w){var b=!0,T=y.clusteringEdgeReplacingIds;if(T!==void 0){var _=0;gr(T,function(A){var x=t.body.edges[A];x!==void 0&&x.endPointsValid()&&(_+=1)}),b=_>0}(!y.endPointsValid()||!b)&&(s[w]=w)}),o(function(y){gr(s,function(w){delete y.containedEdges[w],gr(y.edges,function(b,T){if(b.id===w){y.edges[T]=null;return}b.clusteringEdgeReplacingIds=t._filter(b.clusteringEdgeReplacingIds,function(_){return!s[_]})}),y.edges=t._filter(y.edges,function(b){return b!==null})})}),gr(s,function(y){delete t.clusteredEdges[y]}),gr(s,function(y){delete t.body.edges[y]});var u=mn(this.body.edges);gr(u,function(y){var w=t.body.edges[y],b=t._isClusteredNode(w.fromId)||t._isClusteredNode(w.toId);if(b!==t._isClusteredEdge(w.id))if(b){var T=t._getClusterNodeForNode(w.fromId);T!==void 0&&t._clusterEdges(t.body.nodes[w.fromId],w,T);var _=t._getClusterNodeForNode(w.toId);_!==void 0&&t._clusterEdges(t.body.nodes[w.toId],w,_)}else delete t._clusterEdges[y],t._restoreEdge(w)});for(var f=!1,c=!0,d=function(){var w=[];o(function(T){var _=mn(T.containedNodes).length,A=T.options.allowSingleNodeCluster===!0;(A&&_<1||!A&&_<2)&&w.push(T.id)});for(var b=0;b<w.length;++b)t.openCluster(w[b],{},!1);c=w.length>0,f=f||c};c;)d();f&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return this.clusteredNodes[t]!==void 0}},{key:"_isClusteredEdge",value:function(t){return this.clusteredEdges[t]!==void 0}}]),e}();function Kyt(){var e;window!==void 0&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),e===void 0?window.requestAnimationFrame=function(r){r()}:window.requestAnimationFrame=e}var Vyt=function(){function e(r,t){ft(this,e),Kyt(),this.body=r,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Un(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=gl(function(){var i;t.zooming=!1,nt(i=t._requestRedraw).call(i,t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){t.renderingActive===!1&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",nt(n=this._requestRedraw).call(n,this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,t.requiresTimeout===!0?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];Xv(n,this.options,t)}}},{key:"_requestNextFrame",value:function(t,n){if(!(typeof window>"u")){var i,s=window;return this.requiresTimeout===!0?i=gl(t,n):s.requestAnimationFrame&&(i=s.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var t;this.renderTimer=this._requestNextFrame(nt(t=this._renderStep).call(t,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var n={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,s,o),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var a=this._drawNodes(i,t),l=a.drawExternalLabels;n.drawExternalLabels=l}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),n.drawExternalLabels!=null&&n.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,s,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var n=this.body.nodes,i;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=n[s],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.body.nodes,s=this.body.nodeIndices,o,a=[],l=[],u=20,f=this.canvas.DOMtoCanvas({x:-u,y:-u}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),d={top:f.y,left:f.x,bottom:c.y,right:c.x},y=[],w=0;w<s.length;w++)if(o=i[s[w]],o.hover)l.push(s[w]);else if(o.isSelected())a.push(s[w]);else if(n===!0){var b=o.draw(t);b.drawExternalLabel!=null&&y.push(b.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(d)===!0){var T=o.draw(t);T.drawExternalLabel!=null&&y.push(T.drawExternalLabel)}else o.updateBoundingBox(t,o.selected);var _,A=a.length,x=l.length;for(_=0;_<A;_++){o=i[a[_]];var I=o.draw(t);I.drawExternalLabel!=null&&y.push(I.drawExternalLabel)}for(_=0;_<x;_++){o=i[l[_]];var O=o.draw(t);O.drawExternalLabel!=null&&y.push(O.drawExternalLabel)}return{drawExternalLabels:function(){for(var g=0,M=y;g<M.length;g++){var B=M[g];B()}}}}},{key:"_drawEdges",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.draw(t)}}},{key:"_drawArrows",value:function(t){for(var n=this.body.edges,i=this.body.edgeIndices,s=0;s<i.length;s++){var o=n[i[s]];o.connected===!0&&o.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,Sr(t).call(t,"msie 9.0")!=-1?this.requiresTimeout=!0:Sr(t).call(t,"safari")!=-1&&Sr(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var n=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,n,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),e}(),G5={},Gyt={get exports(){return G5},set exports(e){G5=e}},Yyt=xr,Zyt=Yyt.setInterval;(function(e){e.exports=Zyt})(Gyt);var Xyt=Pt(G5);function j$(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function gee(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}var Jyt=function(){function e(r){ft(this,e),this.body=r,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Un(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this,n;this.body.emitter.once("resize",function(i){i.width!==0&&(t.body.view.translation.x=i.width*.5),i.height!==0&&(t.body.view.translation.y=i.height*.5)}),this.body.emitter.on("setSize",nt(n=this.setSize).call(n,this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var n=this;if(t!==void 0){var i=["width","height","autoResize"];Xv(i,this.options,t)}if(this._cleanUp(),this.options.autoResize===!0){var s;if(window.ResizeObserver){var o=new ResizeObserver(function(){var f=n.setSize();f===!0&&n.body.emitter.emit("_requestRedraw")}),a=this.frame;o.observe(a),this._cleanupCallbacks.push(function(){o.unobserve(a)})}else{var l=Xyt(function(){var f=n.setSize();f===!0&&n.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(l)})}var u=nt(s=this._onResize).call(s,this);aft(window,"resize",u),this._cleanupCallbacks.push(function(){lft(window,"resize",u)})}}},{key:"_cleanUp",value:function(){var t,n,i;qr(t=yh(n=uu(i=this._cleanupCallbacks).call(i,0)).call(n)).call(t,function(s){try{s()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;t!=1&&n!=1?i=this.cameraState.scale*.5*(t+n):t!=1?i=this.cameraState.scale*t:n!=1&&(i=this.cameraState.scale*n),this.body.view.scale=i;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(Sr(t).call(t,"%")!==-1||Sr(t).call(t,"px")!==-1)return t;if(Sr(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Ip(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Ip.DIRECTION_ALL}),j$(this.hammer,function(n){t.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){t.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){t.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){t.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){t.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){t.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){t.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){t.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("wheel",function(n){t.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){t.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){t.body.eventListeners.onContext(n)}),this.hammerFrame=new Ip(this.frame),gee(this.hammerFrame,function(n){t.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),n=this._prepareValue(n);var i=!1,s=this.frame.canvas.width,o=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||n!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=t,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==l||this.frame.canvas.height!==u)&&this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,i=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),e}();function Qyt(e,r){var t=Un({nodes:r,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},e??{});if(!Lr(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=r),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}var emt=function(){function e(r,t){var n,i=this,s;ft(this,e),this.body=r,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",nt(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",nt(s=this.releaseNode).call(s,this))}return ht(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=Qyt(t,this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight,o,a;if(i===0||s===0)a=1,o=is.getRange(this.body.nodes,t.nodes);else if(n===!0){var l=0;for(var u in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,u)){var f=this.body.nodes[u];f.predefinedPosition===!0&&(l+=1)}if(l>.5*this.body.nodeIndices.length){this.fit(t,!1);return}o=is.getRange(this.body.nodes,t.nodes);var c=this.body.nodeIndices.length;a=12.662/(c+7.4147)+.0964822;var d=Math.min(i/600,s/600);a*=d}else{this.body.emitter.emit("_resizeNodes"),o=is.getRange(this.body.nodes,t.nodes);var y=Math.abs(o.maxX-o.minX)*1.1,w=Math.abs(o.maxY-o.minY)*1.1,b=i/y,T=s/w;a=b<=T?b:T}a>t.maxZoomLevel?a=t.maxZoomLevel:a<t.minZoomLevel&&(a=t.minZoomLevel);var _=is.findCenter(o),A={position:_,scale:a,animation:t.animation};this.moveTo(A)}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};n.position=i,n.lockedOnNode=t,this.moveTo(n)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(t===void 0){t={};return}if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!th(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!th(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!th(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!th(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(t!==void 0){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.position.x,y:n.y-t.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},t.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=nt(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=nt(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:n.x-t.x,y:n.y-t.y},s=this.body.view.translation,o={x:s.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;var n=fft[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var i;this.viewFunction=nt(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function Uj(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(f){u(f,"keydown")},l=function(f){u(f,"keyup")},u=function(f,c){if(i[c][f.keyCode]!==void 0){for(var d=i[c][f.keyCode],y=0;y<d.length;y++)(d[y].shift===void 0||d[y].shift==!0&&f.shiftKey==!0||d[y].shift==!1&&f.shiftKey==!1)&&d[y].fn(f);r==!0&&f.preventDefault()}};return n.bind=function(f,c,d){if(d===void 0&&(d="keydown"),s[f]===void 0)throw new Error("unsupported key: "+f);i[d][s[f].code]===void 0&&(i[d][s[f].code]=[]),i[d][s[f].code].push({fn:c,shift:s[f].shift})},n.bindAll=function(f,c){c===void 0&&(c="keydown");for(var d in s)s.hasOwnProperty(d)&&n.bind(d,f,c)},n.getKey=function(f){for(var c in s)if(s.hasOwnProperty(c)){if(f.shiftKey==!0&&s[c].shift==!0&&f.keyCode==s[c].code)return c;if(f.shiftKey==!1&&s[c].shift==!1&&f.keyCode==s[c].code)return c;if(f.keyCode==s[c].code&&c=="shift")return c}return"unknown key, currently not supported"},n.unbind=function(f,c,d){if(d===void 0&&(d="keydown"),s[f]===void 0)throw new Error("unsupported key: "+f);if(c!==void 0){var y=[],w=i[d][s[f].code];if(w!==void 0)for(var b=0;b<w.length;b++)w[b].fn==c&&w[b].shift==s[f].shift||y.push(i[d][s[f].code][b]);i[d][s[f].code]=y}else i[d][s[f].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",a,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",a,!0),t.addEventListener("keyup",l,!0),n}var tmt=function(){function e(r,t){var n=this;ft(this,e),this.body=r,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return ht(e,[{key:"setOptions",value:function(t){t!==void 0&&(this.options=t,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var n=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var s=0;s<n.length;s++){this.navigationDOM[n[s]]=document.createElement("div"),this.navigationDOM[n[s]].className="vis-button vis-"+n[s],this.navigationDOM.wrapper.appendChild(this.navigationDOM[n[s]]);var o=new Ip(this.navigationDOM[n[s]]);if(i[s]==="_fit"){var a;j$(o,nt(a=this._fit).call(a,this))}else{var l;j$(o,nt(l=this.bindToRedraw).call(l,this,i[s]))}this.navigationHammers.push(o)}var u=new Ip(this.canvas.frame);gee(u,function(){t._stopMovement()}),this.navigationHammers.push(u),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){if(this.boundFunctions[t]===void 0){var n;this.boundFunctions[t]=nt(n=this[t]).call(n,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,n=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,n=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,s=n/t,o=(1-s)*this.canvas.canvasViewCenter.x+i.x*s,a=(1-s)*this.canvas.canvasViewCenter.y+i.y*s;this.body.view.scale=n,this.body.view.translation={x:o,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=Uj({container:window,preventDefault:!0}):this.keycharm=Uj({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var n,i,s,o,a,l,u,f,c,d,y,w,b,T,_,A,x,I,O,C,g,M,B,L;nt(n=this.keycharm).call(n,"up",function(){t.bindToRedraw("_moveUp")},"keydown"),nt(i=this.keycharm).call(i,"down",function(){t.bindToRedraw("_moveDown")},"keydown"),nt(s=this.keycharm).call(s,"left",function(){t.bindToRedraw("_moveLeft")},"keydown"),nt(o=this.keycharm).call(o,"right",function(){t.bindToRedraw("_moveRight")},"keydown"),nt(a=this.keycharm).call(a,"=",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(l=this.keycharm).call(l,"num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(u=this.keycharm).call(u,"num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(f=this.keycharm).call(f,"-",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(c=this.keycharm).call(c,"[",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(d=this.keycharm).call(d,"]",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(y=this.keycharm).call(y,"pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),nt(w=this.keycharm).call(w,"pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),nt(b=this.keycharm).call(b,"up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),nt(T=this.keycharm).call(T,"down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),nt(_=this.keycharm).call(_,"left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),nt(A=this.keycharm).call(A,"right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),nt(x=this.keycharm).call(x,"=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(I=this.keycharm).call(I,"num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(O=this.keycharm).call(O,"num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(C=this.keycharm).call(C,"-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(g=this.keycharm).call(g,"[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),nt(M=this.keycharm).call(M,"]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(B=this.keycharm).call(B,"pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),nt(L=this.keycharm).call(L,"pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}]),e}();function rmt(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=nmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function nmt(e,r){var t;if(e){if(typeof e=="string")return Wj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wj(e,r)}}function Wj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var imt=function(){function e(r,t,n){var i,s,o,a,l,u,f,c,d,y,w,b,T;ft(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new tmt(r,t),this.body.eventListeners.onTap=nt(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=nt(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=nt(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=nt(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=nt(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=nt(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=nt(f=this.onDragEnd).call(f,this),this.body.eventListeners.onMouseWheel=nt(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=nt(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=nt(y=this.onMouseMove).call(y,this),this.body.eventListeners.onRelease=nt(w=this.onRelease).call(w,this),this.body.eventListeners.onContext=nt(b=this.onContext).call(b,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=nt(T=this.getPointer).call(T,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Un(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(t!==void 0){var n=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];B$(n,this.options,t),Mo(this.options,t,"keyboard"),t.tooltip&&(Un(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=b5(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-sft(this.canvas.frame.canvas),y:t.y-oft(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n)}},{key:"onDoubleTap",value:function(t){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,n)}},{key:"onHold",value:function(t){var n=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(n,i),this.selectionHandler.commitAndEmit(n,t),this.selectionHandler.generateClickEvent("click",t,n),this.selectionHandler.generateClickEvent("hold",t,n)}},{key:"onRelease",value:function(t){if(new Date().valueOf()-this.touchTime>10){var n=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,n),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(t){var n=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,n)}},{key:"checkSelectionChanges",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,n){var i=function(o,a){for(var l=[],u=0;u<o.length;u++){var f=o[u];Sr(a).call(a,f)===-1&&l.push(f)}return l};return{nodes:i(t.nodes,n.nodes),edges:i(t.edges,n.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(t);var n=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Un({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(n!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=n.id,n.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[n.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var s=rmt(this.selectionHandler.getSelectedNodes()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l={id:a.id,node:a,x:a.x,y:a.y,xFixed:a.options.fixed.x,yFixed:a.options.fixed.y};a.options.fixed.x=!0,a.options.fixed.y=!0,this.drag.selection.push(l)}}catch(u){s.e(u)}finally{s.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var n=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;qr(s).call(s,function(f){var c=f.node;f.xFixed===!1&&(c.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(f.x)+o)),f.yFixed===!1&&(c.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(f.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),this.drag.pointer===void 0){this.onDragStart(t);return}var l=i.x-this.drag.pointer.x,u=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+l,y:this.drag.translation.y+u},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var n=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var s=this.body.selectionBox.position,o={minX:Math.min(s.start.x,s.end.x),minY:Math.min(s.start.y,s.end.y),maxX:Math.max(s.start.x,s.end.x),maxY:Math.max(s.start.y,s.end.y)},a=As(i=this.body.nodeIndices).call(i,function(f){var c=n.body.nodes[f];return c.x>=o.minX&&c.x<=o.maxX&&c.y>=o.minY&&c.y<=o.maxY});qr(a).call(a,function(f){return n.selectionHandler.selectObject(n.body.nodes[f])});var l=this.getPointer(t.center);this.selectionHandler.commitAndEmit(l,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var u=this.drag.selection;u&&u.length?(qr(u).call(u,function(f){f.node.options.fixed.x=f.xFixed,f.node.options.fixed.y=f.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var n=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,n)}},{key:"zoom",value:function(t,n){if(this.options.zoomView===!0){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var s=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,a=t/i,l=(1-a)*n.x+o.x*a,u=(1-a)*n.y+o.y*a;if(this.body.view.scale=t,this.body.view.translation={x:l,y:u},s!=null){var f=this.canvas.canvasToDOM(s);this.drag.pointer.x=f.x,this.drag.pointer.y=f.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:n}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:n})}}},{key:"onMouseWheel",value:function(t){if(this.options.zoomView===!0){if(t.deltaY!==0){var n=this.body.view.scale;n*=1+(t.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var n=this,i=this.getPointer({x:t.clientX,y:t.clientY}),s=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(i),this.popup.hidden===!1&&(s=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),s===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=gl(function(){return n._checkShowPopup(i)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var n=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),s={left:n,top:i,right:n,bottom:i},o=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,l="node";if(this.popupObj===void 0){for(var u=this.body.nodeIndices,f=this.body.nodes,c,d=[],y=0;y<u.length;y++)c=f[u[y]],c.isOverlappingWith(s)===!0&&(a=!0,c.getTitle()!==void 0&&d.push(u[y]));d.length>0&&(this.popupObj=f[d[d.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var w=this.body.edgeIndices,b=this.body.edges,T,_=[],A=0;A<w.length;A++)T=b[w[A]],T.isOverlappingWith(s)===!0&&T.connected===!0&&T.getTitle()!==void 0&&_.push(w[A]);_.length>0&&(this.popupObj=b[_[_.length-1]],l="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new bft(this.canvas.frame)),this.popup.popupTargetType=l,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var n=this.selectionHandler._pointerToPositionObject(t),i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(n),i===!0)){var s=this.selectionHandler.getNodeAt(t);i=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(n));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),Y5={},smt={get exports(){return Y5},set exports(e){Y5=e}},omt=EN,amt=tee;omt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},amt);var lmt=xr,umt=lmt.Set,cmt=umt,fmt=cmt;(function(e){e.exports=fmt})(smt);var Uf=Pt(Y5),Z5={},hmt={get exports(){return Z5},set exports(e){Z5=e}},dmt=Ir,qj=SN,R1=cv.getWeakData,pmt=xN,vmt=lo,gmt=pb,yT=wi,ymt=_N,yee=Jc,Kj=$i,mee=Zh,mmt=mee.set,bmt=mee.getterFor,wmt=yee.find,$mt=yee.findIndex,_mt=dmt([].splice),xmt=0,D1=function(e){return e.frozen||(e.frozen=new bee)},bee=function(){this.entries=[]},mT=function(e,r){return wmt(e.entries,function(t){return t[0]===r})};bee.prototype={get:function(e){var r=mT(this,e);if(r)return r[1]},has:function(e){return!!mT(this,e)},set:function(e,r){var t=mT(this,e);t?t[1]=r:this.entries.push([e,r])},delete:function(e){var r=$mt(this.entries,function(t){return t[0]===e});return~r&&_mt(this.entries,r,1),!!~r}};var Emt={getConstructor:function(e,r,t,n){var i=e(function(l,u){pmt(l,s),mmt(l,{type:r,id:xmt++,frozen:void 0}),gmt(u)||ymt(u,l[n],{that:l,AS_ENTRIES:t})}),s=i.prototype,o=bmt(r),a=function(l,u,f){var c=o(l),d=R1(vmt(u),!0);return d===!0?D1(c).set(u,f):d[c.id]=f,l};return qj(s,{delete:function(l){var u=o(this);if(!yT(l))return!1;var f=R1(l);return f===!0?D1(u).delete(l):f&&Kj(f,u.id)&&delete f[u.id]},has:function(u){var f=o(this);if(!yT(u))return!1;var c=R1(u);return c===!0?D1(f).has(u):c&&Kj(c,f.id)}}),qj(s,t?{get:function(u){var f=o(this);if(yT(u)){var c=R1(u);return c===!0?D1(f).get(u):c?c[f.id]:void 0}},set:function(u,f){return a(this,u,f)}}:{add:function(u){return a(this,u,!0)}}),i}},Smt=XQ,Vj=Vn,xw=Ir,Gj=SN,kmt=cv,Tmt=EN,wee=Emt,B1=wi,M1=Zh.enforce,Imt=Tr,Amt=jX,Lb=Object,Omt=Array.isArray,L1=Lb.isExtensible,$ee=Lb.isFrozen,Cmt=Lb.isSealed,_ee=Lb.freeze,Pmt=Lb.seal,Yj={},Zj={},Nmt=!Vj.ActiveXObject&&"ActiveXObject"in Vj,Hg,xee=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Eee=Tmt("WeakMap",xee,wee),Jd=Eee.prototype,Ew=xw(Jd.set),Rmt=function(){return Smt&&Imt(function(){var e=_ee([]);return Ew(new Eee,e,1),!$ee(e)})};if(Amt)if(Nmt){Hg=wee.getConstructor(xee,"WeakMap",!0),kmt.enable();var Xj=xw(Jd.delete),F1=xw(Jd.has),Jj=xw(Jd.get);Gj(Jd,{delete:function(e){if(B1(e)&&!L1(e)){var r=M1(this);return r.frozen||(r.frozen=new Hg),Xj(this,e)||r.frozen.delete(e)}return Xj(this,e)},has:function(r){if(B1(r)&&!L1(r)){var t=M1(this);return t.frozen||(t.frozen=new Hg),F1(this,r)||t.frozen.has(r)}return F1(this,r)},get:function(r){if(B1(r)&&!L1(r)){var t=M1(this);return t.frozen||(t.frozen=new Hg),F1(this,r)?Jj(this,r):t.frozen.get(r)}return Jj(this,r)},set:function(r,t){if(B1(r)&&!L1(r)){var n=M1(this);n.frozen||(n.frozen=new Hg),F1(this,r)?Ew(this,r,t):n.frozen.set(r,t)}else Ew(this,r,t);return this}})}else Rmt()&&Gj(Jd,{set:function(r,t){var n;return Omt(r)&&($ee(r)?n=Yj:Cmt(r)&&(n=Zj)),Ew(this,r,t),n==Yj&&_ee(r),n==Zj&&Pmt(r),this}});var Dmt=xr,Bmt=Dmt.WeakMap,Mmt=Bmt,Lmt=Mmt;(function(e){e.exports=Lmt})(hmt);var xy=Pt(Z5);function Yr(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function X5(e,r,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,t):i?i.value=t:r.set(e,t),t}function J5(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=Fmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Fmt(e,r){var t;if(e){if(typeof e=="string")return Qj(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qj(e,r)}}function Qj(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Cf,Io,hc,dc,Sw;function ez(e,r){var t=new Uf,n=J5(r),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;e.has(s)||t.add(s)}}catch(o){n.e(o)}finally{n.f()}return t}var tz=function(){function e(){ft(this,e),Cf.set(this,new Uf),Io.set(this,new Uf)}return ht(e,[{key:"size",get:function(){return Yr(this,Io,"f").size}},{key:"add",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Yr(this,Io,"f").add(a)}}},{key:"delete",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];Yr(this,Io,"f").delete(a)}}},{key:"clear",value:function(){Yr(this,Io,"f").clear()}},{key:"getSelection",value:function(){return ll(Yr(this,Io,"f"))}},{key:"getChanges",value:function(){return{added:ll(ez(Yr(this,Cf,"f"),Yr(this,Io,"f"))),deleted:ll(ez(Yr(this,Io,"f"),Yr(this,Cf,"f"))),previous:ll(new Uf(Yr(this,Cf,"f"))),current:ll(new Uf(Yr(this,Io,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();X5(this,Cf,Yr(this,Io,"f"),"f"),X5(this,Io,new Uf(Yr(this,Cf,"f")),"f");var n=J5(t.added),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s.select()}}catch(u){n.e(u)}finally{n.f()}var o=J5(t.deleted),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.unselect()}}catch(u){o.e(u)}finally{o.f()}return t}}]),e}();Cf=new xy,Io=new xy;var jmt=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ft(this,e),hc.set(this,new tz),dc.set(this,new tz),Sw.set(this,void 0),X5(this,Sw,r,"f")}return ht(e,[{key:"sizeNodes",get:function(){return Yr(this,hc,"f").size}},{key:"sizeEdges",get:function(){return Yr(this,dc,"f").size}},{key:"getNodes",value:function(){return Yr(this,hc,"f").getSelection()}},{key:"getEdges",value:function(){return Yr(this,dc,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=Yr(this,hc,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=Yr(this,dc,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){Yr(this,hc,"f").delete(t)}},{key:"deleteEdges",value:function(t){Yr(this,dc,"f").delete(t)}},{key:"clear",value:function(){Yr(this,hc,"f").clear(),Yr(this,dc,"f").clear()}},{key:"commit",value:function(){for(var t,n,i={nodes:Yr(this,hc,"f").commit(),edges:Yr(this,dc,"f").commit()},s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(t=Yr(this,Sw,"f")).call.apply(t,aN(n=[this,i]).call(n,o)),i}}]),e}();hc=new xy,dc=new xy,Sw=new xy;function rz(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=zmt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function zmt(e,r){var t;if(e){if(typeof e=="string")return nz(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nz(e,r)}}function nz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Hmt=function(){function e(r,t){var n=this;ft(this,e),this.body=r,this.canvas=t,this._selectionAccumulator=new jmt,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Un(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return ht(e,[{key:"setOptions",value:function(t){if(t!==void 0){var n=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];Xv(n,this.options,t)}}},{key:"selectOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(n=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return n}},{key:"selectAdditionalOnPoint",value:function(t){var n=!1;if(this.options.selectable===!0){var i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(n=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return n}},{key:"_initBaseEvent",value:function(t,n){var i={};return i.pointer={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)},i.event=t,i}},{key:"generateClickEvent",value:function(t,n,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this._initBaseEvent(n,i);if(o===!0)a.nodes=[],a.edges=[];else{var l=this.getSelection();a.nodes=l.nodes,a.edges=l.edges}s!==void 0&&(a.previousSelection=s),t=="click"&&(a.items=this.getClickedItems(i)),n.controlEdge!==void 0&&(a.controlEdge=n.controlEdge),this.body.emitter.emit(t,a)}},{key:"selectObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(t!==void 0){if(t instanceof qs){if(n===!0){var i;(i=this._selectionAccumulator).addEdges.apply(i,ll(t.edges))}this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var n=[],i=this.body.nodes,s=0;s<this.body.nodeIndices.length;s++){var o=this.body.nodeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}return n}},{key:"_pointerToPositionObject",value:function(t){var n=this.canvas.DOMtoCanvas(t);return{left:n.x-1,top:n.y+1,right:n.x+1,bottom:n.y-1}}},{key:"getNodeAt",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._pointerToPositionObject(t),s=this._getAllNodesOverlappingWith(i);if(s.length>0)return n===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}},{key:"_getEdgesOverlappingWith",value:function(t,n){for(var i=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var o=this.body.edgeIndices[s];i[o].isOverlappingWith(t)&&n.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var n=[];return this._getEdgesOverlappingWith(t,n),n}},{key:"getEdgeAt",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this.canvas.DOMtoCanvas(t),s=10,o=null,a=this.body.edges,l=0;l<this.body.edgeIndices.length;l++){var u=this.body.edgeIndices[l],f=a[u];if(f.connected){var c=f.from.x,d=f.from.y,y=f.to.x,w=f.to.y,b=f.edgeType.getDistanceToEdge(c,d,y,w,i.x,i.y);b<s&&(o=u,s=b)}}if(o!==null)return n===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(t){t instanceof qs?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){if(t instanceof qs){var n;this._selectionAccumulator.deleteNodes(t),(n=this._selectionAccumulator).deleteEdges.apply(n,ll(t.edges))}else this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n);i.hover===!0&&(i.hover=!1,i instanceof qs?(s.node=i.id,this.body.emitter.emit("blurNode",s)):(s.edge=i.id,this.body.emitter.emit("blurEdge",s)))}},{key:"emitHoverEvent",value:function(t,n,i){var s=this._initBaseEvent(t,n),o=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof qs?(s.node=i.id,this.body.emitter.emit("hoverNode",s)):(s.edge=i.id,this.body.emitter.emit("hoverEdge",s))),o}},{key:"hoverObject",value:function(t,n){var i=this.getNodeAt(n);i===void 0&&(i=this.getEdgeAt(n));var s=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(i===void 0||i instanceof qs&&i.id!=o||i instanceof Ap)&&(this.emitBlurEvent(t,n,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],s=!0);for(var a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(s===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(i===void 0||i instanceof Ap&&i.id!=a||i instanceof qs&&!i.hover)&&(this.emitBlurEvent(t,n,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],s=!0));if(i!==void 0){var l=mn(this.hoverObj.edges).length,u=mn(this.hoverObj.nodes).length,f=i instanceof Ap&&l===0&&u===0,c=i instanceof qs&&l===0&&u===0;(s||f||c)&&(s=this.emitHoverEvent(t,n,i)),i instanceof qs&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}s===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,n){var i=!1,s=this._selectionAccumulator.commit(),o={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",n,t,o),i=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",n,t,o),i=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",n,t),i=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",n,t),i=!0),i===!0&&this.generateClickEvent("select",n,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return sv(t=this._selectionAccumulator.getNodes()).call(t,function(n){return n.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return sv(t=this._selectionAccumulator.getEdges()).call(t,function(n){return n.id})}},{key:"setSelection",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((n.unselectAll||n.unselectAll===void 0)&&this.unselectAll(),t.nodes){var i=rz(t.nodes),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=this.body.nodes[o];if(!a)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(a,n.highlightEdges)}}catch(d){i.e(d)}finally{i.f()}}if(t.edges){var l=rz(t.edges),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=this.body.edges[f];if(!c)throw new RangeError('Edge with id "'+f+'" not found');this.selectObject(c)}}catch(d){l.e(d)}finally{l.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:n})}},{key:"selectEdges",value:function(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var n in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,n.id)||this._selectionAccumulator.deleteEdges(n)}},{key:"getClickedItems",value:function(t){for(var n=this.canvas.DOMtoCanvas(t),i=[],s=this.body.nodeIndices,o=this.body.nodes,a=s.length-1;a>=0;a--){var l=o[s[a]],u=l.getItemsOnPoint(n);i.push.apply(i,u)}for(var f=this.body.edgeIndices,c=this.body.edges,d=f.length-1;d>=0;d--){var y=c[f[d]],w=y.getItemsOnPoint(n);i.push.apply(i,w)}return i}}]),e}(),Q5={},Umt={get exports(){return Q5},set exports(e){Q5=e}},iz=uJ,Wmt=Math.floor,e3=function(e,r){var t=e.length,n=Wmt(t/2);return t<8?qmt(e,r):Kmt(e,e3(iz(e,0,n),r),e3(iz(e,n),r),r)},qmt=function(e,r){for(var t=e.length,n=1,i,s;n<t;){for(s=n,i=e[n];s&&r(e[s-1],i)>0;)e[s]=e[--s];s!==n++&&(e[s]=i)}return e},Kmt=function(e,r,t,n){for(var i=r.length,s=t.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?n(r[o],t[a])<=0?r[o++]:t[a++]:o<i?r[o++]:t[a++];return e},Vmt=e3,Gmt=gb,sz=Gmt.match(/firefox\/(\d+)/i),Ymt=!!sz&&+sz[1],Zmt=gb,Xmt=/MSIE|Trident/.test(Zmt),Jmt=gb,oz=Jmt.match(/AppleWebKit\/(\d+)\./),Qmt=!!oz&&+oz[1],ebt=zt,See=Ir,tbt=Gh,rbt=ao,az=Ba,nbt=rQ,lz=El,CN=Tr,ibt=Vmt,sbt=Yv,uz=Ymt,obt=Xmt,cz=yb,fz=Qmt,Ec=[],hz=See(Ec.sort),abt=See(Ec.push),lbt=CN(function(){Ec.sort(void 0)}),ubt=CN(function(){Ec.sort(null)}),cbt=sbt("sort"),kee=!CN(function(){if(cz)return cz<70;if(!(uz&&uz>3)){if(obt)return!0;if(fz)return fz<603;var e="",r,t,n,i;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Ec.push({k:t+i,v:n})}for(Ec.sort(function(s,o){return o.v-s.v}),i=0;i<Ec.length;i++)t=Ec[i].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),fbt=lbt||!ubt||!cbt||!kee,hbt=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:lz(r)>lz(t)?1:-1}};ebt({target:"Array",proto:!0,forced:fbt},{sort:function(r){r!==void 0&&tbt(r);var t=rbt(this);if(kee)return r===void 0?hz(t):hz(t,r);var n=[],i=az(t),s,o;for(o=0;o<i;o++)o in t&&abt(n,t[o]);for(ibt(n,hbt(r)),s=az(n),o=0;o<s;)t[o]=n[o++];for(;o<i;)nbt(t,o++);return t}});var dbt=_i,pbt=dbt("Array").sort,vbt=Bn,gbt=pbt,bT=Array.prototype,ybt=function(e){var r=e.sort;return e===bT||vbt(bT,e)&&r===bT.sort?gbt:r},mbt=ybt,bbt=mbt;(function(e){e.exports=bbt})(Umt);var wT=Pt(Q5),t3={},wbt={get exports(){return t3},set exports(e){t3=e}},$bt=Gh,_bt=ao,xbt=Ex,Ebt=Ba,Sbt=TypeError,dz=function(e){return function(r,t,n,i){$bt(t);var s=_bt(r),o=xbt(s),a=Ebt(s),l=e?a-1:0,u=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=u;break}if(l+=u,e?l<0:a<=l)throw Sbt("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=u)l in o&&(i=t(i,o[l],l,s));return i}},kbt={left:dz(!1),right:dz(!0)},Tbt=Ou,Ibt=typeof process<"u"&&Tbt(process)=="process",Abt=zt,Obt=kbt.left,Cbt=Yv,pz=yb,Pbt=Ibt,Nbt=!Pbt&&pz>79&&pz<83,Rbt=Nbt||!Cbt("reduce");Abt({target:"Array",proto:!0,forced:Rbt},{reduce:function(r){var t=arguments.length;return Obt(this,r,t,t>1?arguments[1]:void 0)}});var Dbt=_i,Bbt=Dbt("Array").reduce,Mbt=Bn,Lbt=Bbt,$T=Array.prototype,Fbt=function(e){var r=e.reduce;return e===$T||Mbt($T,e)&&r===$T.reduce?Lbt:r},jbt=Fbt,zbt=jbt;(function(e){e.exports=zbt})(wbt);var Tee=Pt(t3),dm={},Hbt={get exports(){return dm},set exports(e){dm=e}},Iee={};(function(e){(function(r,t){t(e)})(rC,function(r){r.__esModule=!0,r.sort=T;function t(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var n=32,i=7,s=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(_){return _<1e5?_<100?_<10?0:1:_<1e4?_<1e3?2:3:4:_<1e7?_<1e6?5:6:_<1e9?_<1e8?7:8:9}function l(_,A){if(_===A)return 0;if(~~_===_&&~~A===A){if(_===0||A===0)return _<A?-1:1;if(_<0||A<0){if(A>=0)return-1;if(_>=0)return 1;_=-_,A=-A}var x=a(_),I=a(A),O=0;return x<I?(_*=o[I-x-1],A/=10,O=-1):x>I&&(A*=o[x-I-1],_/=10,O=1),_===A?O:_<A?-1:1}var C=String(_),g=String(A);return C===g?0:C<g?-1:1}function u(_){for(var A=0;_>=n;)A|=_&1,_>>=1;return _+A}function f(_,A,x,I){var O=A+1;if(O===x)return 1;if(I(_[O++],_[A])<0){for(;O<x&&I(_[O],_[O-1])<0;)O++;c(_,A,O)}else for(;O<x&&I(_[O],_[O-1])>=0;)O++;return O-A}function c(_,A,x){for(x--;A<x;){var I=_[A];_[A++]=_[x],_[x--]=I}}function d(_,A,x,I,O){for(I===A&&I++;I<x;I++){for(var C=_[I],g=A,M=I;g<M;){var B=g+M>>>1;O(C,_[B])<0?M=B:g=B+1}var L=I-g;switch(L){case 3:_[g+3]=_[g+2];case 2:_[g+2]=_[g+1];case 1:_[g+1]=_[g];break;default:for(;L>0;)_[g+L]=_[g+L-1],L--}_[g]=C}}function y(_,A,x,I,O,C){var g=0,M=0,B=1;if(C(_,A[x+O])>0){for(M=I-O;B<M&&C(_,A[x+O+B])>0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M),g+=O,B+=O}else{for(M=O+1;B<M&&C(_,A[x+O-B])<=0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M);var L=g;g=O-B,B=O-L}for(g++;g<B;){var q=g+(B-g>>>1);C(_,A[x+q])>0?g=q+1:B=q}return B}function w(_,A,x,I,O,C){var g=0,M=0,B=1;if(C(_,A[x+O])<0){for(M=O+1;B<M&&C(_,A[x+O-B])<0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M);var L=g;g=O-B,B=O-L}else{for(M=I-O;B<M&&C(_,A[x+O+B])>=0;)g=B,B=(B<<1)+1,B<=0&&(B=M);B>M&&(B=M),g+=O,B+=O}for(g++;g<B;){var q=g+(B-g>>>1);C(_,A[x+q])<0?B=q:g=q+1}return B}var b=function(){function _(A,x){t(this,_),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=s,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=A,this.compare=x,this.length=A.length,this.length<2*s&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return _.prototype.pushRun=function(x,I){this.runStart[this.stackSize]=x,this.runLength[this.stackSize]=I,this.stackSize+=1},_.prototype.mergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;if(x>=1&&this.runLength[x-1]<=this.runLength[x]+this.runLength[x+1]||x>=2&&this.runLength[x-2]<=this.runLength[x]+this.runLength[x-1])this.runLength[x-1]<this.runLength[x+1]&&x--;else if(this.runLength[x]>this.runLength[x+1])break;this.mergeAt(x)}},_.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var x=this.stackSize-2;x>0&&this.runLength[x-1]<this.runLength[x+1]&&x--,this.mergeAt(x)}},_.prototype.mergeAt=function(x){var I=this.compare,O=this.array,C=this.runStart[x],g=this.runLength[x],M=this.runStart[x+1],B=this.runLength[x+1];this.runLength[x]=g+B,x===this.stackSize-3&&(this.runStart[x+1]=this.runStart[x+2],this.runLength[x+1]=this.runLength[x+2]),this.stackSize--;var L=w(O[M],O,C,g,0,I);C+=L,g-=L,g!==0&&(B=y(O[C+g-1],O,M,B,B-1,I),B!==0&&(g<=B?this.mergeLow(C,g,M,B):this.mergeHigh(C,g,M,B)))},_.prototype.mergeLow=function(x,I,O,C){var g=this.compare,M=this.array,B=this.tmp,L=0;for(L=0;L<I;L++)B[L]=M[x+L];var q=0,Q=O,re=x;if(M[re++]=M[Q++],--C===0){for(L=0;L<I;L++)M[re+L]=B[q+L];return}if(I===1){for(L=0;L<C;L++)M[re+L]=M[Q+L];M[re+C]=B[q];return}for(var Z=this.minGallop;;){var j=0,X=0,ie=!1;do if(g(M[Q],B[q])<0){if(M[re++]=M[Q++],X++,j=0,--C===0){ie=!0;break}}else if(M[re++]=B[q++],j++,X=0,--I===1){ie=!0;break}while((j|X)<Z);if(ie)break;do{if(j=w(M[Q],B,q,I,0,g),j!==0){for(L=0;L<j;L++)M[re+L]=B[q+L];if(re+=j,q+=j,I-=j,I<=1){ie=!0;break}}if(M[re++]=M[Q++],--C===0){ie=!0;break}if(X=y(B[q],M,Q,C,0,g),X!==0){for(L=0;L<X;L++)M[re+L]=M[Q+L];if(re+=X,Q+=X,C-=X,C===0){ie=!0;break}}if(M[re++]=B[q++],--I===1){ie=!0;break}Z--}while(j>=i||X>=i);if(ie)break;Z<0&&(Z=0),Z+=2}if(this.minGallop=Z,Z<1&&(this.minGallop=1),I===1){for(L=0;L<C;L++)M[re+L]=M[Q+L];M[re+C]=B[q]}else{if(I===0)throw new Error("mergeLow preconditions were not respected");for(L=0;L<I;L++)M[re+L]=B[q+L]}},_.prototype.mergeHigh=function(x,I,O,C){var g=this.compare,M=this.array,B=this.tmp,L=0;for(L=0;L<C;L++)B[L]=M[O+L];var q=x+I-1,Q=C-1,re=O+C-1,Z=0,j=0;if(M[re--]=M[q--],--I===0){for(Z=re-(C-1),L=0;L<C;L++)M[Z+L]=B[L];return}if(C===1){for(re-=I,q-=I,j=re+1,Z=q+1,L=I-1;L>=0;L--)M[j+L]=M[Z+L];M[re]=B[Q];return}for(var X=this.minGallop;;){var ie=0,Ee=0,$e=!1;do if(g(B[Q],M[q])<0){if(M[re--]=M[q--],ie++,Ee=0,--I===0){$e=!0;break}}else if(M[re--]=B[Q--],Ee++,ie=0,--C===1){$e=!0;break}while((ie|Ee)<X);if($e)break;do{if(ie=I-w(B[Q],M,x,I,I-1,g),ie!==0){for(re-=ie,q-=ie,I-=ie,j=re+1,Z=q+1,L=ie-1;L>=0;L--)M[j+L]=M[Z+L];if(I===0){$e=!0;break}}if(M[re--]=B[Q--],--C===1){$e=!0;break}if(Ee=C-y(M[q],B,0,C,C-1,g),Ee!==0){for(re-=Ee,Q-=Ee,C-=Ee,j=re+1,Z=Q+1,L=0;L<Ee;L++)M[j+L]=B[Z+L];if(C<=1){$e=!0;break}}if(M[re--]=M[q--],--I===0){$e=!0;break}X--}while(ie>=i||Ee>=i);if($e)break;X<0&&(X=0),X+=2}if(this.minGallop=X,X<1&&(this.minGallop=1),C===1){for(re-=I,q-=I,j=re+1,Z=q+1,L=I-1;L>=0;L--)M[j+L]=M[Z+L];M[re]=B[Q]}else{if(C===0)throw new Error("mergeHigh preconditions were not respected");for(Z=re-(C-1),L=0;L<C;L++)M[Z+L]=B[L]}},_}();function T(_,A,x,I){if(!Array.isArray(_))throw new TypeError("Can only sort arrays");A?typeof A!="function"&&(I=x,x=A,A=l):A=l,x||(x=0),I||(I=_.length);var O=I-x;if(!(O<2)){var C=0;if(O<n){C=f(_,x,I,A),d(_,x,I,x+C,A);return}var g=new b(_,A),M=u(O);do{if(C=f(_,x,I,A),C<M){var B=O;B>M&&(B=M),d(_,x,x+B,x+C,A),C=B}g.pushRun(x,C),g.mergeRuns(),O-=C,x+=C}while(O!==0);g.forceMergeRuns()}}})})(Iee);(function(e){e.exports=Iee})(Hbt);var vz=Pt(dm);function Aee(e){var r=Ubt();return function(){var n=Tt(e),i;if(r){var s=Tt(this).constructor;i=qe(n,arguments,s)}else i=n.apply(this,arguments);return Fr(this,i)}}function Ubt(){if(typeof Reflect>"u"||!qe||qe.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(qe(Boolean,[],function(){})),!0}catch{return!1}}var Oee=function(){function e(){ft(this,e)}return ht(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,n,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,n){this.fake_use(t,n),this.abstract()}},{key:"shift",value:function(t,n){this.fake_use(t,n),this.abstract()}}]),e}(),Wbt=function(e){Or(t,e);var r=Aee(t);function t(n){var i;return ft(this,t),i=r.call(this),i.layout=n,i}return ht(t,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.x=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_x,max:s.max_x}}},{key:"sort",value:function(i){dm.sort(i,function(s,o){return s.x-o.x})}},{key:"fix",value:function(i,s){i.y=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.y=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].x+=s}}]),t}(Oee),qbt=function(e){Or(t,e);var r=Aee(t);function t(n){var i;return ft(this,t),i=r.call(this),i.layout=n,i}return ht(t,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(i,o),i.y=s}},{key:"getTreeSize",value:function(i){var s=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:s.min_y,max:s.max_y}}},{key:"sort",value:function(i){dm.sort(i,function(s,o){return s.y-o.y})}},{key:"fix",value:function(i,s){i.x=this.layout.options.hierarchical.levelSeparation*s,i.options.fixed.x=!0}},{key:"shift",value:function(i,s){this.layout.body.nodes[i].y+=s}}]),t}(Oee),r3={},Kbt={get exports(){return r3},set exports(e){r3=e}},Vbt=zt,Gbt=Jc.every,Ybt=Yv,Zbt=Ybt("every");Vbt({target:"Array",proto:!0,forced:!Zbt},{every:function(r){return Gbt(this,r,arguments.length>1?arguments[1]:void 0)}});var Xbt=_i,Jbt=Xbt("Array").every,Qbt=Bn,e0t=Jbt,_T=Array.prototype,t0t=function(e){var r=e.every;return e===_T||Qbt(_T,e)&&r===_T.every?e0t:r},r0t=t0t,n0t=r0t;(function(e){e.exports=n0t})(Kbt);var Cee=Pt(r3);function i0t(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=s0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function s0t(e,r){var t;if(e){if(typeof e=="string")return gz(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gz(e,r)}}function gz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function o0t(e,r){var t=new Uf;return qr(e).call(e,function(n){var i;qr(i=n.edges).call(i,function(s){s.connected&&t.add(s)})}),qr(t).call(t,function(n){var i=n.from.id,s=n.to.id;r[i]==null&&(r[i]=0),(r[s]==null||r[i]>=r[s])&&(r[s]=r[i]+1)}),r}function a0t(e){return Pee(function(r){var t,n;return Cee(t=As(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.to===r})},function(r,t){return t>r},"from",e)}function l0t(e){return Pee(function(r){var t,n;return Cee(t=As(n=r.edges).call(n,function(i){return e.has(i.toId)})).call(t,function(i){return i.from===r})},function(r,t){return t<r},"to",e)}function Pee(e,r,t,n){var i,s=mh(null),o=Tee(i=ll(oee(n).call(n))).call(i,function(y,w){return y+1+w.edges.length},0),a=t+"Id",l=t==="to"?1:-1,u=i0t(n),f;try{var c=function(){var w=bn(f.value,2),b=w[0],T=w[1];if(!n.has(b)||!e(T))return"continue";s[b]=0;for(var _=[T],A=0,x,I=function(){var g,M;if(!n.has(b))return"continue";var B=s[x.id]+l;if(qr(g=As(M=x.edges).call(M,function(L){return L.connected&&L.to!==L.from&&L[t]!==x&&n.has(L.toId)&&n.has(L.fromId)})).call(g,function(L){var q=L[a],Q=s[q];(Q==null||r(B,Q))&&(s[q]=B,_.push(L[t]))}),A>o)return{v:{v:o0t(n,s)}};++A};x=_.pop();){var O=I();if(O!=="continue"&&Dr(O)==="object")return O.v}};for(u.s();!(f=u.n()).done;){var d=c();if(d!=="continue"&&Dr(d)==="object")return d.v}}catch(y){u.e(y)}finally{u.f()}return s}var u0t=function(){function e(){ft(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return ht(e,[{key:"addRelation",value:function(t,n){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(n),this.parentReference[n]===void 0&&(this.parentReference[n]=[]),this.parentReference[n].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,n){n!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=n,this.treeIndex=Math.max(n,this.treeIndex))}},{key:"ensureLevel",value:function(t){this.levels[t]===void 0&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var n=this,i={},s=function o(a){if(i[a]!==void 0)return i[a];var l=n.levels[a];if(n.childrenReference[a]){var u=n.childrenReference[a];if(u.length>0)for(var f=0;f<u.length;f++)l=Math.max(l,o(u[f]))}return i[a]=l,l};return s(t)}},{key:"levelDownstream",value:function(t,n){this.levels[n.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[n.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var n=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.levels[i]!==void 0&&(n=Math.min(this.levels[i],n));for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.levels[s]!==void 0&&(this.levels[s]-=n)}},{key:"getTreeSize",value:function(t,n){var i=1e9,s=-1e9,o=1e9,a=-1e9;for(var l in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,l)&&this.trees[l]===n){var u=t[l];i=Math.min(u.x,i),s=Math.max(u.x,s),o=Math.min(u.y,o),a=Math.max(u.y,a)}return{min_x:i,max_x:s,min_y:o,max_y:a}}},{key:"hasSameParent",value:function(t,n){var i=this.parentReference[t.id],s=this.parentReference[n.id];if(i===void 0||s===void 0)return!1;for(var o=0;o<i.length;o++)for(var a=0;a<s.length;a++)if(i[o]==s[a])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,n){return this.trees[t.id]===this.trees[n.id]}},{key:"getLevels",value:function(){return mn(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,n){this.distributionOrdering[n]===void 0&&(this.distributionOrdering[n]=[]);var i=!1,s=this.distributionOrdering[n];for(var o in s)if(s[o]===t){i=!0;break}i||(this.distributionOrdering[n].push(t),this.distributionIndex[t.id]=this.distributionOrdering[n].length-1)}}]),e}(),c0t=function(){function e(r){ft(this,e),this.body=r,this._resetRNG(Math.random()+":"+P$()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Un(this.options,this.defaultOptions),this.bindEventListeners()}return ht(e,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(t.options.hierarchical.enabled===!0){var n=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",n,!1)}})}},{key:"setOptions",value:function(t,n){if(t!==void 0){var i=this.options.hierarchical,s=i.enabled;if(Xv(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Mo(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(n);if(s===!0)return this.body.emitter.emit("refresh"),Zr(n,this.optionsBackup)}return n}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Vx(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(this.options.hierarchical.enabled===!0){var n=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:n.enabled===void 0?!0:n.enabled,solver:"hierarchicalRepulsion"},n.enabled=n.enabled===void 0?!0:n.enabled,n.solver=n.solver||"barnesHut"):Dr(t.physics)==="object"?(n.enabled=t.physics.enabled===void 0?!0:t.physics.enabled,n.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(n.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var s=t.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(i=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},t.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:i,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var n=t.length+50,i=0;i<t.length;i++){var s=t[i],o=2*Math.PI*this._rng();s.x===void 0&&(s.x=n*Math.cos(o)),s.y===void 0&&(s.y=n*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var t=this.body.nodeIndices,n=0,i=0;i<t.length;i++){var s=this.body.nodes[t[i]];s.predefinedPosition===!0&&(n+=1)}if(n<.5*t.length){var o=10,a=0,l=this.options.clusterThreshold,u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>l){for(var f=t.length;t.length>l&&a<=o;){a+=1;var c=t.length;a%3===0?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);var d=t.length;if(c==d&&a%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*f)})}a>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var y=70,w=0;w<t.length;w++){var b=this.body.nodes[t[w]];b.predefinedPosition===!1&&(b.x+=(.5-this._rng())*y,b.y+=(.5-this._rng())*y)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=is.getRangeCore(this.body.nodes,this.body.nodeIndices),n=is.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var s=this.body.nodes[this.body.nodeIndices[i]];s.x-=n.x,s.y-=n.y}}},{key:"_declusterAll",value:function(){for(var t=!0;t===!0;){t=!1;for(var n=0;n<this.body.nodeIndices.length;n++)this.body.nodes[this.body.nodeIndices[n]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[n],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var t,n,i=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new u0t;for(n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&(t=this.body.nodes[n],t.options.level!==void 0?(i=!0,this.hierarchical.levels[n]=t.options.level):s=!0);if(s===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(s===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);var l=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(l),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,n=!1,i={},s=function(){for(var x=a(),I=0,O=0;O<x.length-1;O++){var C=x[O].max-x[O+1].min;I+=C+t.options.hierarchical.treeSpacing,o(O+1,I)}},o=function(x,I){var O=t.hierarchical.trees;for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&O[C]===x&&t.direction.shift(C,I)},a=function(){for(var x=[],I=0;I<t.hierarchical.numTrees();I++)x.push(t.direction.getTreeSize(I));return x},l=function A(x,I){if(!I[x.id]&&(I[x.id]=!0,t.hierarchical.childrenReference[x.id])){var O=t.hierarchical.childrenReference[x.id];if(O.length>0)for(var C=0;C<O.length;C++)A(t.body.nodes[O[C]],I)}},u=function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,O=1e9,C=1e9,g=1e9,M=-1e9;for(var B in x)if(Object.prototype.hasOwnProperty.call(x,B)){var L=t.body.nodes[B],q=t.hierarchical.levels[L.id],Q=t.direction.getPosition(L),re=t._getSpaceAroundNode(L,x),Z=bn(re,2),j=Z[0],X=Z[1];O=Math.min(j,O),C=Math.min(X,C),q<=I&&(g=Math.min(Q,g),M=Math.max(Q,M))}return[g,M,O,C]},f=function(x,I){var O=t.hierarchical.getMaxLevel(x.id),C=t.hierarchical.getMaxLevel(I.id);return Math.min(O,C)},c=function(x,I,O){for(var C=t.hierarchical,g=0;g<I.length;g++){var M=I[g],B=C.distributionOrdering[M];if(B.length>1)for(var L=0;L<B.length-1;L++){var q=B[L],Q=B[L+1];C.hasSameParent(q,Q)&&C.inSameSubNetwork(q,Q)&&x(q,Q,O)}}},d=function(x,I){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=t.direction.getPosition(x),g=t.direction.getPosition(I),M=Math.abs(g-C),B=t.options.hierarchical.nodeSpacing;if(M>B){var L={},q={};l(x,L),l(I,q);var Q=f(x,I),re=u(L,Q),Z=u(q,Q),j=re[1],X=Z[0],ie=Z[2],Ee=Math.abs(j-X);if(Ee>B){var $e=j-X+B;$e<-ie+B&&($e=-ie+B),$e<0&&(t._shiftBlock(I.id,$e),n=!0,O===!0&&t._centerParent(I))}}},y=function(x,I){for(var O=I.id,C=I.edges,g=t.hierarchical.levels[I.id],M=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,B={},L=[],q=0;q<C.length;q++){var Q=C[q];if(Q.toId!=Q.fromId){var re=Q.toId==O?Q.from:Q.to;B[C[q].id]=re,t.hierarchical.levels[re.id]<g&&L.push(Q)}}var Z=function(He,Ve){for(var it=0,_e=0;_e<Ve.length;_e++)if(B[Ve[_e].id]!==void 0){var ge=t.direction.getPosition(B[Ve[_e].id])-He;it+=ge/Math.sqrt(ge*ge+M)}return it},j=function(He,Ve){for(var it=0,_e=0;_e<Ve.length;_e++)if(B[Ve[_e].id]!==void 0){var ge=t.direction.getPosition(B[Ve[_e].id])-He;it-=M*Math.pow(ge*ge+M,-1.5)}return it},X=function(He,Ve){for(var it=t.direction.getPosition(I),_e={},ge=0;ge<He;ge++){var Te=Z(it,Ve),je=j(it,Ve),$=40,S=Math.max(-$,Math.min($,Math.round(Te/je)));if(it=it-S,_e[it]!==void 0)break;_e[it]=ge}return it},ie=function(He){var Ve=t.direction.getPosition(I);if(i[I.id]===void 0){var it={};l(I,it),i[I.id]=it}var _e=u(i[I.id]),ge=_e[2],Te=_e[3],je=He-Ve,$=0;je>0?$=Math.min(je,Te-t.options.hierarchical.nodeSpacing):je<0&&($=-Math.min(-je,ge-t.options.hierarchical.nodeSpacing)),$!=0&&(t._shiftBlock(I.id,$),n=!0)},Ee=function(He){var Ve=t.direction.getPosition(I),it=t._getSpaceAroundNode(I),_e=bn(it,2),ge=_e[0],Te=_e[1],je=He-Ve,$=Ve;je>0?$=Math.min(Ve+(Te-t.options.hierarchical.nodeSpacing),He):je<0&&($=Math.max(Ve-(ge-t.options.hierarchical.nodeSpacing),He)),$!==Ve&&(t.direction.setPosition(I,$),n=!0)},$e=X(x,L);ie($e),$e=X(x,C),Ee($e)},w=function(x){var I=t.hierarchical.getLevels();I=yh(I).call(I);for(var O=0;O<x;O++){n=!1;for(var C=0;C<I.length;C++)for(var g=I[C],M=t.hierarchical.distributionOrdering[g],B=0;B<M.length;B++)y(1e3,M[B]);if(n!==!0)break}},b=function(x){var I=t.hierarchical.getLevels();I=yh(I).call(I);for(var O=0;O<x&&(n=!1,c(d,I,!0),n===!0);O++);},T=function(){for(var x in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,x)&&t._centerParent(t.body.nodes[x])},_=function(){var x=t.hierarchical.getLevels();x=yh(x).call(x);for(var I=0;I<x.length;I++)for(var O=x[I],C=t.hierarchical.distributionOrdering[O],g=0;g<C.length;g++)t._centerParent(C[g])};this.options.hierarchical.blockShifting===!0&&(b(5),T()),this.options.hierarchical.edgeMinimization===!0&&w(20),this.options.hierarchical.parentCentralization===!0&&_(),s()}},{key:"_getSpaceAroundNode",value:function(t,n){var i=!0;n===void 0&&(i=!1);var s=this.hierarchical.levels[t.id];if(s!==void 0){var o=this.hierarchical.distributionIndex[t.id],a=this.direction.getPosition(t),l=this.hierarchical.distributionOrdering[s],u=1e9,f=1e9;if(o!==0){var c=l[o-1];if(i===!0&&n[c.id]===void 0||i===!1){var d=this.direction.getPosition(c);u=a-d}}if(o!=l.length-1){var y=l[o+1];if(i===!0&&n[y.id]===void 0||i===!1){var w=this.direction.getPosition(y);f=Math.min(f,w-a)}}return[u,f]}else return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var n=this.hierarchical.parentReference[t.id],i=0;i<n.length;i++){var s=n[i],o=this.body.nodes[s],a=this.hierarchical.childrenReference[s];if(a!==void 0){var l=this._getCenterPosition(a),u=this.direction.getPosition(o),f=this._getSpaceAroundNode(o),c=bn(f,2),d=c[0],y=c[1],w=u-l;(w<0&&Math.abs(w)<y-this.options.hierarchical.nodeSpacing||w>0&&Math.abs(w)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,l)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,s=mn(t[n]);s=this._indexArrayToNodes(s),wT(i=this.direction).call(i,s);for(var o=0,a=0;a<s.length;a++){var l=s[a];if(this.positionedNodes[l.id]===void 0){var u=this.options.hierarchical.nodeSpacing,f=u*o;o>0&&(f=this.direction.getPosition(s[a-1])+u),this.direction.setPosition(l,f,n),this._validatePositionAndContinue(l,n,f),o++}}}}},{key:"_placeBranchNodes",value:function(t,n){var i,s=this.hierarchical.childrenReference[t];if(s!==void 0){for(var o=[],a=0;a<s.length;a++)o.push(this.body.nodes[s[a]]);wT(i=this.direction).call(i,o);for(var l=0;l<o.length;l++){var u=o[l],f=this.hierarchical.levels[u.id];if(f>n&&this.positionedNodes[u.id]===void 0){var c=this.options.hierarchical.nodeSpacing,d=void 0;l===0?d=this.direction.getPosition(this.body.nodes[t]):d=this.direction.getPosition(o[l-1])+c,this.direction.setPosition(u,d,f),this._validatePositionAndContinue(u,f,d)}else return}var y=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[t],y,n)}}},{key:"_validatePositionAndContinue",value:function(t,n,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[n]!==void 0){var s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[n]]);if(i-s<this.options.hierarchical.nodeSpacing){var o=s+this.options.hierarchical.nodeSpacing-i,a=this._findCommonParent(this.lastNodeOnLevel[n],t.id);this._shiftBlock(a.withChild,o)}}this.lastNodeOnLevel[n]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,n)}}},{key:"_indexArrayToNodes",value:function(t){for(var n=[],i=0;i<t.length;i++)n.push(this.body.nodes[t[i]]);return n}},{key:"_getDistribution",value:function(){var t={},n,i;for(n in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,n)){i=this.body.nodes[n];var s=this.hierarchical.levels[n]===void 0?0:this.hierarchical.levels[n];this.direction.fix(i,s),t[s]===void 0&&(t[s]={}),t[s][n]=i}return t}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return gr(t.edges,function(s){var o;Sr(o=n.body.edgeIndices).call(o,s.id)!==-1&&i.push(s)}),i}},{key:"_getHubSizes",value:function(){var t=this,n={},i=this.body.nodeIndices;gr(i,function(o){var a=t.body.nodes[o],l=t._getActiveEdges(a).length;n[l]=!0});var s=[];return gr(n,function(o){s.push(Number(o))}),wT(vz).call(vz,s,function(o,a){return a-o}),s}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,n=function(u,f){t.hierarchical.levelDownstream(u,f)},i=this._getHubSizes(),s=function(){var u=i[o];if(u===0)return"break";gr(t.body.nodeIndices,function(f){var c=t.body.nodes[f];u===t._getActiveEdges(c).length&&t._crawlNetwork(n,f)})},o=0;o<i.length;++o){var a=s();if(a==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,n=1e5,i=function(a,l,u){},s=function(a,l,u){var f=t.hierarchical.levels[a.id];f===void 0&&(f=t.hierarchical.levels[a.id]=n);var c=i(is.cloneOptions(a,"node"),is.cloneOptions(l,"node"),is.cloneOptions(u,"edge"));t.hierarchical.levels[l.id]=f+c};this._crawlNetwork(s),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,i=Tee(t=this.body.nodeIndices).call(t,function(s,o){return s.set(o,n.body.nodes[o]),s},new ree);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=l0t(i):this.hierarchical.levels=a0t(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,n=function(s,o){t.hierarchical.levels[o.id]>t.hierarchical.levels[s.id]&&t.hierarchical.addRelation(s.id,o.id)};this._crawlNetwork(n),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,s={},o=function d(y,w){if(s[y.id]===void 0){t.hierarchical.setTreeIndex(y,w),s[y.id]=!0;for(var b,T=t._getActiveEdges(y),_=0;_<T.length;_++){var A=T[_];A.connected===!0&&(A.toId==y.id?b=A.from:b=A.to,y.id!=b.id&&(n(y,b,A),d(b,w)))}}};if(i===void 0)for(var a=0,l=0;l<this.body.nodeIndices.length;l++){var u=this.body.nodeIndices[l];if(s[u]===void 0){var f=this.body.nodes[u];o(f,a),a+=1}}else{var c=this.body.nodes[i];if(c===void 0){console.error("Node not found:",i);return}o(c)}}},{key:"_shiftBlock",value:function(t,n){var i=this,s={},o=function a(l){if(!s[l]){s[l]=!0,i.direction.shift(l,n);var u=i.hierarchical.childrenReference[l];if(u!==void 0)for(var f=0;f<u.length;f++)a(u[f])}};o(t)}},{key:"_findCommonParent",value:function(t,n){var i=this,s={},o=function l(u,f){var c=i.hierarchical.parentReference[f];if(c!==void 0)for(var d=0;d<c.length;d++){var y=c[d];u[y]=!0,l(u,y)}},a=function l(u,f){var c=i.hierarchical.parentReference[f];if(c!==void 0)for(var d=0;d<c.length;d++){var y=c[d];if(u[y]!==void 0)return{foundParent:y,withChild:f};var w=l(u,y);if(w.foundParent!==null)return w}return{foundParent:null,withChild:f}};return o(s,t),a(s,n)}},{key:"setDirectionStrategy",value:function(){var t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";t?this.direction=new Wbt(this):this.direction=new qbt(this)}},{key:"_getCenterPosition",value:function(t){for(var n=1e9,i=-1e9,s=0;s<t.length;s++){var o=void 0;if(t[s].id!==void 0)o=t[s];else{var a=t[s];o=this.body.nodes[a]}var l=this.direction.getPosition(o);n=Math.min(n,l),i=Math.max(i,l)}return .5*(n+i)}}]),e}();function f0t(e,r){var t=typeof ef<"u"&&Cu(e)||e["@@iterator"];if(!t){if(Lr(e)||(t=h0t(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function h0t(e,r){var t;if(e){if(typeof e=="string")return yz(e,r);var n=Oi(t=Object.prototype.toString.call(e)).call(t,8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Xh(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yz(e,r)}}function yz(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var d0t=function(){function e(r,t,n,i){var s=this,o,a;ft(this,e),this.body=r,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Un(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",nt(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",nt(a=this._restore).call(a,this))}return ht(e,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,n,i){n!==void 0&&(n.locale!==void 0?this.options.locale=n.locale:this.options.locale=i.locale,n.locales!==void 0?this.options.locales=n.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,Zr(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,n;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),o=i+s,a=this.options.locales[this.options.locale],l=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),l=!0),this.options.addEdge!==!1&&(l===!0?this._createSeperator(1):l=!0,this._createAddEdgeButton(a)),i===1&&typeof this.options.editNode=="function"?(l===!0?this._createSeperator(2):l=!0,this._createEditNodeButton(a)):s===1&&i===0&&this.options.editEdge!==!1&&(l===!0?this._createSeperator(3):l=!0,this._createEditEdgeButton(a)),o!==0&&(i>0&&this.options.deleteNode!==!1?(l===!0&&this._createSeperator(4),this._createDeleteButton(a)):i===0&&this.options.deleteEdge!==!1&&(l===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,nt(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",nt(n=this.showManipulatorToolbar).call(n,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}this._temporaryBindEvent("click",nt(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var n=this.selectionHandler.getSelectedNodes()[0];if(n!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(n.isCluster!==!0){var i=Zr({},n.options,!1);if(i.x=n.x,i.y=n.y,this.options.editNode.length===2)this.options.editNode(i,function(s){s!=null&&t.inMode==="editNode"&&t.body.data.nodes.getDataSet().update(s),t.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,n,i,s,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a,l=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(l),this._createSeperator(),this._createDescription(l.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,nt(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",nt(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",nt(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDrag",nt(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",nt(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",nt(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",Dr(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from.id,t.to.id);return}if(this.guiEnabled===!0){var n,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,nt(n=this.toggleEditMode).call(n,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var s,o,a,l,u=this.body.edges[this.edgeBeingEditedId],f=this._getNewTargetNode(u.from.x,u.from.y),c=this._getNewTargetNode(u.to.x,u.to.y);this.temporaryIds.nodes.push(f.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[f.id]=f,this.body.nodeIndices.push(f.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",nt(s=this._controlNodeTouch).call(s,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",nt(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",nt(a=this._controlNodeDrag).call(a,this)),this._temporaryBindUI("onDragEnd",nt(l=this._controlNodeDragEnd).call(l,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(d){var y=u.edgeType.findBorderPositions(d);f.selected===!1&&(f.x=y.from.x,f.y=y.from.y),c.selected===!1&&(c.x=y.to.x,c.y=y.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var n=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),s=void 0;if(n.length>0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(s=this.options.deleteNode)}else i.length>0&&typeof this.options.deleteEdge=="function"&&(s=this.options.deleteEdge);if(typeof s=="function"){var a={nodes:n,edges:i};if(s.length===2)s(a,function(l){l!=null&&t.inMode==="delete"?(t.body.data.edges.getDataSet().remove(l.edges),t.body.data.nodes.getDataSet().remove(l.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(n),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var t,n;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(n=this.options.locales[this.options.locale])===null||n===void 0?void 0:n.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(t,n){var i=Zr({},this.options.controlNodeStyle);i.id="targetNode"+_y(),i.hidden=!1,i.physics=!1,i.x=t,i.y=n;var s=this.body.functions.createNode(i);return s.shape.boundingBox={left:t,right:t,top:n,bottom:n},s}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},gc(this.editModeDiv);var n=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",n.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,nt(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(gc(this.editModeDiv),gc(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,n=f0t(uu(t=this._domEventListenerCleanupQueue).call(t,0)),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;s()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),gc(this.manipulationDiv),gc(this.editModeDiv),gc(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var n,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addNodeMode).call(n,this))}},{key:"_createAddEdgeButton",value:function(t){var n,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.addEdgeMode).call(n,this))}},{key:"_createEditNodeButton",value:function(t){var n,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editNode).call(n,this))}},{key:"_createEditEdgeButton",value:function(t){var n,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.editEdgeMode).call(n,this))}},{key:"_createDeleteButton",value:function(t){var n,i;this.options.rtl?i="vis-delete-rtl":i="vis-delete";var s=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,nt(n=this.deleteSelected).call(n,this))}},{key:"_createBackButton",value:function(t){var n,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,nt(n=this.showManipulatorToolbar).call(n,this))}},{key:"_createButton",value:function(t,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+n,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=s,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,n){this.temporaryEventFunctions.push({event:t,boundFunction:n}),this.body.emitter.on(t,n)}},{key:"_temporaryBindUI",value:function(t,n){if(this.body.eventListeners[t]!==void 0)this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=n;else throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Cb(mn(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var n=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(n,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,n){var i=new Ip(t,{});j$(i,n),this._domEventListenerCleanupQueue.push(function(){i.destroy()});var s=function(a){var l=a.keyCode,u=a.key;(u==="Enter"||u===" "||l===13||l===32)&&n()};t.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(function(){t.removeEventListener("keyup",s,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var n;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i=Sr(n=this.body.edgeIndices).call(n,this.temporaryIds.edges[t]);if(i!==-1){var s;uu(s=this.body.edgeIndices).call(s,i,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var a;delete this.body.nodes[this.temporaryIds.nodes[o]];var l=Sr(a=this.body.nodeIndices).call(a,this.temporaryIds.nodes[o]);if(l!==-1){var u;uu(u=this.body.nodeIndices).call(u,l,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Un({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),l=s.isOverlappingWith(n);a===!0?(this.selectedControlNode=i,o.edgeType.from=i):l===!0&&(this.selectedControlNode=s,o.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var n=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(n);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--)if(o[l]!==this.selectedControlNode.id){a=this.body.nodes[o[l]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var u=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===u.id?this._performEditEdge(a.id,s.to.id):this._performEditEdge(s.from.id,a.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Un({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var n=this.lastTouch,i=this.selectionHandler.getNodeAt(n);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this._getNewTargetNode(i.x,i.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);var o=this.body.functions.createEdge({id:"connectionEdge"+_y(),from:i.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Sr(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}if(t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,n),this.temporaryIds.nodes[0]!==void 0){var f=this.body.nodes[this.temporaryIds.nodes[0]];f.x=this.canvas._XconvertDOMtoCanvas(n.x),f.y=this.canvas._YconvertDOMtoCanvas(n.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var n=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(n),s=void 0;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),a=void 0,l=o.length-1;l>=0;l--){var u;if(Sr(u=this.temporaryIds.nodes).call(u,o[l])===-1){a=this.body.nodes[o[l]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(s,a.id)),t.controlEdge={from:s,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,n),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var n=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,n,void 0,!0)}},{key:"_performAddNode",value:function(t){var n=this,i={id:_y(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(i,function(s){s!=null&&n.inMode==="addNode"&&n.body.data.nodes.getDataSet().add(s),n.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,n){var i=this,s={from:t,to:n};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(s,function(o){o!=null&&i.inMode==="addEdge"&&(i.body.data.edges.getDataSet().add(o),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,n){var i=this,s={id:this.edgeBeingEditedId,from:t,to:n,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(Dr(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(s,function(a){a==null||i.inMode!=="editEdge"?(i.body.edges[s.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(a),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),ut="string",rt="boolean",Ne="number",ty="array",Ot="object",Nee="dom",p0t="any",xT=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],ET={borderWidth:{number:Ne},borderWidthSelected:{number:Ne,undefined:"undefined"},brokenImage:{string:ut,undefined:"undefined"},chosen:{label:{boolean:rt,function:"function"},node:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{border:{string:ut},background:{string:ut},highlight:{border:{string:ut},background:{string:ut},__type__:{object:Ot,string:ut}},hover:{border:{string:ut},background:{string:ut},__type__:{object:Ot,string:ut}},__type__:{object:Ot,string:ut}},opacity:{number:Ne,undefined:"undefined"},fixed:{x:{boolean:rt},y:{boolean:rt},__type__:{object:Ot,boolean:rt}},font:{align:{string:ut},color:{string:ut},size:{number:Ne},face:{string:ut},background:{string:ut},strokeWidth:{number:Ne},strokeColor:{string:ut},vadjust:{number:Ne},multi:{boolean:rt,string:ut},bold:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},boldital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},ital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},mono:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},__type__:{object:Ot,string:ut}},group:{string:ut,number:Ne,undefined:"undefined"},heightConstraint:{minimum:{number:Ne},valign:{string:ut},__type__:{object:Ot,boolean:rt,number:Ne}},hidden:{boolean:rt},icon:{face:{string:ut},code:{string:ut},size:{number:Ne},color:{string:ut},weight:{string:ut,number:Ne},__type__:{object:Ot}},id:{string:ut,number:Ne},image:{selected:{string:ut,undefined:"undefined"},unselected:{string:ut,undefined:"undefined"},__type__:{object:Ot,string:ut}},imagePadding:{top:{number:Ne},right:{number:Ne},bottom:{number:Ne},left:{number:Ne},__type__:{object:Ot,number:Ne}},label:{string:ut,undefined:"undefined"},labelHighlightBold:{boolean:rt},level:{number:Ne,undefined:"undefined"},margin:{top:{number:Ne},right:{number:Ne},bottom:{number:Ne},left:{number:Ne},__type__:{object:Ot,number:Ne}},mass:{number:Ne},physics:{boolean:rt},scaling:{min:{number:Ne},max:{number:Ne},label:{enabled:{boolean:rt},min:{number:Ne},max:{number:Ne},maxVisible:{number:Ne},drawThreshold:{number:Ne},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:ut},size:{number:Ne},x:{number:Ne},y:{number:Ne},__type__:{object:Ot,boolean:rt}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:rt,array:ty},borderRadius:{number:Ne},interpolation:{boolean:rt},useImageSize:{boolean:rt},useBorderWithImage:{boolean:rt},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ot}},size:{number:Ne},title:{string:ut,dom:Nee,undefined:"undefined"},value:{number:Ne,undefined:"undefined"},widthConstraint:{minimum:{number:Ne},maximum:{number:Ne},__type__:{object:Ot,boolean:rt,number:Ne}},x:{number:Ne},y:{number:Ne},__type__:{object:Ot}},v0t={configure:{enabled:{boolean:rt},filter:{boolean:rt,string:ut,array:ty,function:"function"},container:{dom:Nee},showButton:{boolean:rt},__type__:{object:Ot,boolean:rt,string:ut,array:ty,function:"function"}},edges:{arrows:{to:{enabled:{boolean:rt},scaleFactor:{number:Ne},type:{string:xT},imageHeight:{number:Ne},imageWidth:{number:Ne},src:{string:ut},__type__:{object:Ot,boolean:rt}},middle:{enabled:{boolean:rt},scaleFactor:{number:Ne},type:{string:xT},imageWidth:{number:Ne},imageHeight:{number:Ne},src:{string:ut},__type__:{object:Ot,boolean:rt}},from:{enabled:{boolean:rt},scaleFactor:{number:Ne},type:{string:xT},imageWidth:{number:Ne},imageHeight:{number:Ne},src:{string:ut},__type__:{object:Ot,boolean:rt}},__type__:{string:["from","to","middle"],object:Ot}},endPointOffset:{from:{number:Ne},to:{number:Ne},__type__:{object:Ot,number:Ne}},arrowStrikethrough:{boolean:rt},background:{enabled:{boolean:rt},color:{string:ut},size:{number:Ne},dashes:{boolean:rt,array:ty},__type__:{object:Ot,boolean:rt}},chosen:{label:{boolean:rt,function:"function"},edge:{boolean:rt,function:"function"},__type__:{object:Ot,boolean:rt}},color:{color:{string:ut},highlight:{string:ut},hover:{string:ut},inherit:{string:["from","to","both"],boolean:rt},opacity:{number:Ne},__type__:{object:Ot,string:ut}},dashes:{boolean:rt,array:ty},font:{color:{string:ut},size:{number:Ne},face:{string:ut},background:{string:ut},strokeWidth:{number:Ne},strokeColor:{string:ut},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Ne},multi:{boolean:rt,string:ut},bold:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},boldital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},ital:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},mono:{color:{string:ut},size:{number:Ne},face:{string:ut},mod:{string:ut},vadjust:{number:Ne},__type__:{object:Ot,string:ut}},__type__:{object:Ot,string:ut}},hidden:{boolean:rt},hoverWidth:{function:"function",number:Ne},label:{string:ut,undefined:"undefined"},labelHighlightBold:{boolean:rt},length:{number:Ne,undefined:"undefined"},physics:{boolean:rt},scaling:{min:{number:Ne},max:{number:Ne},label:{enabled:{boolean:rt},min:{number:Ne},max:{number:Ne},maxVisible:{number:Ne},drawThreshold:{number:Ne},__type__:{object:Ot,boolean:rt}},customScalingFunction:{function:"function"},__type__:{object:Ot}},selectionWidth:{function:"function",number:Ne},selfReferenceSize:{number:Ne},selfReference:{size:{number:Ne},angle:{number:Ne},renderBehindTheNode:{boolean:rt},__type__:{object:Ot}},shadow:{enabled:{boolean:rt},color:{string:ut},size:{number:Ne},x:{number:Ne},y:{number:Ne},__type__:{object:Ot,boolean:rt}},smooth:{enabled:{boolean:rt},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Ne},forceDirection:{string:["horizontal","vertical","none"],boolean:rt},__type__:{object:Ot,boolean:rt}},title:{string:ut,undefined:"undefined"},width:{number:Ne},widthConstraint:{maximum:{number:Ne},__type__:{object:Ot,boolean:rt,number:Ne}},value:{number:Ne,undefined:"undefined"},__type__:{object:Ot}},groups:{useDefaultGroups:{boolean:rt},__any__:ET,__type__:{object:Ot}},interaction:{dragNodes:{boolean:rt},dragView:{boolean:rt},hideEdgesOnDrag:{boolean:rt},hideEdgesOnZoom:{boolean:rt},hideNodesOnDrag:{boolean:rt},hover:{boolean:rt},keyboard:{enabled:{boolean:rt},speed:{x:{number:Ne},y:{number:Ne},zoom:{number:Ne},__type__:{object:Ot}},bindToWindow:{boolean:rt},autoFocus:{boolean:rt},__type__:{object:Ot,boolean:rt}},multiselect:{boolean:rt},navigationButtons:{boolean:rt},selectable:{boolean:rt},selectConnectedEdges:{boolean:rt},hoverConnectedEdges:{boolean:rt},tooltipDelay:{number:Ne},zoomView:{boolean:rt},zoomSpeed:{number:Ne},__type__:{object:Ot}},layout:{randomSeed:{undefined:"undefined",number:Ne,string:ut},improvedLayout:{boolean:rt},clusterThreshold:{number:Ne},hierarchical:{enabled:{boolean:rt},levelSeparation:{number:Ne},nodeSpacing:{number:Ne},treeSpacing:{number:Ne},blockShifting:{boolean:rt},edgeMinimization:{boolean:rt},parentCentralization:{boolean:rt},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ot,boolean:rt}},__type__:{object:Ot}},manipulation:{enabled:{boolean:rt},initiallyActive:{boolean:rt},addNode:{boolean:rt,function:"function"},addEdge:{boolean:rt,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ot,boolean:rt,function:"function"}},deleteNode:{boolean:rt,function:"function"},deleteEdge:{boolean:rt,function:"function"},controlNodeStyle:ET,__type__:{object:Ot,boolean:rt}},nodes:ET,physics:{enabled:{boolean:rt},barnesHut:{theta:{number:Ne},gravitationalConstant:{number:Ne},centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},forceAtlas2Based:{theta:{number:Ne},gravitationalConstant:{number:Ne},centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},repulsion:{centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},nodeDistance:{number:Ne},damping:{number:Ne},__type__:{object:Ot}},hierarchicalRepulsion:{centralGravity:{number:Ne},springLength:{number:Ne},springConstant:{number:Ne},nodeDistance:{number:Ne},damping:{number:Ne},avoidOverlap:{number:Ne},__type__:{object:Ot}},maxVelocity:{number:Ne},minVelocity:{number:Ne},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:rt},iterations:{number:Ne},updateInterval:{number:Ne},onlyDynamicEdges:{boolean:rt},fit:{boolean:rt},__type__:{object:Ot,boolean:rt}},timestep:{number:Ne},adaptiveTimestep:{boolean:rt},wind:{x:{number:Ne},y:{number:Ne},__type__:{object:Ot}},__type__:{object:Ot,boolean:rt}},autoResize:{boolean:rt},clickToUse:{boolean:rt},locale:{string:ut},locales:{__any__:{any:p0t},__type__:{object:Ot}},height:{string:ut},width:{string:ut},__type__:{object:Ot}},Ree={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},g0t=function(r,t,n){var i;return!!(vl(r).call(r,"physics")&&vl(i=Ree.physics.solver).call(i,t)&&n.physics.solver!==t&&t!=="wind")},y0t=function(){function e(){ft(this,e)}return ht(e,[{key:"getDistances",value:function(t,n,i){for(var s={},o=t.edges,a=0;a<n.length;a++){var l=n[a],u={};s[l]=u;for(var f=0;f<n.length;f++)u[n[f]]=a==f?0:1e9}for(var c=0;c<i.length;c++){var d=o[i[c]];d.connected===!0&&s[d.fromId]!==void 0&&s[d.toId]!==void 0&&(s[d.fromId][d.toId]=1,s[d.toId][d.fromId]=1)}for(var y=n.length,w=0;w<y;w++)for(var b=n[w],T=s[b],_=0;_<y-1;_++)for(var A=n[_],x=s[A],I=_+1;I<y;I++){var O=n[I],C=s[O],g=Math.min(x[O],x[b]+T[O]);x[O]=g,C[A]=g}return s}}]),e}(),m0t=function(){function e(r,t,n){ft(this,e),this.body=r,this.springLength=t,this.springConstant=n,this.distanceSolver=new y0t}return ht(e,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.distanceSolver.getDistances(this.body,t,n);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();for(var o=.01,a=1,l=0,u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),f=5,c=1e9,d=0,y=0,w=0,b=0,T=0;c>o&&l<u;){l+=1;var _=this._getHighestEnergyNode(i),A=bn(_,4);for(d=A[0],c=A[1],y=A[2],w=A[3],b=c,T=0;b>a&&T<f;){T+=1,this._moveNode(d,y,w);var x=this._getEnergy(d),I=bn(x,3);b=I[0],y=I[1],w=I[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=0,o=n[0],a=0,l=0,u=0;u<n.length;u++){var f=n[u];if(i[f].predefinedPosition!==!0||i[f].isCluster===!0&&t===!0||i[f].options.fixed.x!==!0||i[f].options.fixed.y!==!0){var c=this._getEnergy(f),d=bn(c,3),y=d[0],w=d[1],b=d[2];s<y&&(s=y,o=f,a=w,l=b)}}return[o,s,a,l]}},{key:"_getEnergy",value:function(t){var n=bn(this.E_sums[t],2),i=n[0],s=n[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));return[o,i,s]}},{key:"_moveNode",value:function(t,n,i){for(var s=this.body.nodeIndices,o=this.body.nodes,a=0,l=0,u=0,f=o[t].x,c=o[t].y,d=this.K_matrix[t],y=this.L_matrix[t],w=0;w<s.length;w++){var b=s[w];if(b!==t){var T=o[b].x,_=o[b].y,A=d[b],x=y[b],I=1/Math.pow(Math.pow(f-T,2)+Math.pow(c-_,2),1.5);a+=A*(1-x*Math.pow(c-_,2)*I),l+=A*(x*(f-T)*(c-_)*I),u+=A*(1-x*Math.pow(f-T,2)*I)}}var O=a,C=l,g=n,M=u,B=i,L=(g/O+B/C)/(C/O-M/C),q=-(C*L+g)/O;o[t].x+=q,o[t].y+=L,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var s=0;s<n.length;s++){this.L_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.L_matrix[n[s]][n[o]]=i*t[n[s]][n[o]]}}},{key:"_createK_matrix",value:function(t){var n=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var s=0;s<n.length;s++){this.K_matrix[n[s]]={};for(var o=0;o<n.length;o++)this.K_matrix[n[s]][n[o]]=i*Math.pow(t[n[s]][n[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var s=0;s<t.length;s++){for(var o=t[s],a=n[o].x,l=n[o].y,u=0,f=0,c=s;c<t.length;c++){var d=t[c];if(d!==o){var y=n[d].x,w=n[d].y,b=1/Math.sqrt(Math.pow(a-y,2)+Math.pow(l-w,2));this.E_matrix[o][c]=[this.K_matrix[o][d]*(a-y-this.L_matrix[o][d]*(a-y)*b),this.K_matrix[o][d]*(l-w-this.L_matrix[o][d]*(l-w)*b)],this.E_matrix[d][s]=this.E_matrix[o][c],u+=this.E_matrix[o][c][0],f+=this.E_matrix[o][c][1]}}this.E_sums[o]=[u,f]}}},{key:"_updateE_matrix",value:function(t){for(var n=this.body.nodeIndices,i=this.body.nodes,s=this.E_matrix[t],o=this.K_matrix[t],a=this.L_matrix[t],l=i[t].x,u=i[t].y,f=0,c=0,d=0;d<n.length;d++){var y=n[d];if(y!==t){var w=s[d],b=w[0],T=w[1],_=i[y].x,A=i[y].y,x=1/Math.sqrt(Math.pow(l-_,2)+Math.pow(u-A,2)),I=o[y]*(l-_-a[y]*(l-_)*x),O=o[y]*(u-A-a[y]*(u-A)*x);s[d]=[I,O],f+=I,c+=O;var C=this.E_sums[y];C[0]+=I-b,C[1]+=O-T}}this.E_sums[t]=[f,c]}}]),e}();function kt(e,r,t){var n,i,s,o,a=this;if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:Uft,clickToUse:!1},Un(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:nt(n=this.on).call(n,this),off:nt(i=this.off).call(i,this),emit:nt(s=this.emit).call(s,this),once:nt(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Kft(function(){return a.body.emitter.emit("_requestRedraw")}),this.groups=new udt,this.canvas=new Jyt(this.body),this.selectionHandler=new Hmt(this.body,this.canvas),this.interactionHandler=new imt(this.body,this.canvas,this.selectionHandler),this.view=new emt(this.body,this.canvas),this.renderer=new Vyt(this.body,this.canvas),this.physics=new Myt(this.body),this.layoutEngine=new c0t(this.body),this.clustering=new qyt(this.body),this.manipulation=new d0t(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new mgt(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new Tyt(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new m0t(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(r)}LX(kt.prototype);kt.prototype.setOptions=function(e){var r=this;if(e===null&&(e=void 0),e!==void 0){var t=wft.validate(e,v0t);t===!0&&console.error("%cErrors have been found in the supplied options object.",UQ);var n=["locale","locales","clickToUse"];if(Xv(n,this.options,e),e.locale!==void 0&&(e.locale=Wft(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),e.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new mft(this,this.body.container,Ree,this.canvas.pixelRatio,g0t)),this.configurator.setOptions(e.configure)),this.configurator&&this.configurator.options.enabled===!0){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Zr(i.nodes,this.nodesHandler.options),Zr(i.edges,this.edgesHandler.options),Zr(i.layout,this.layoutEngine.options),Zr(i.interaction,this.selectionHandler.options),Zr(i.interaction,this.renderer.options),Zr(i.interaction,this.interactionHandler.options),Zr(i.manipulation,this.manipulation.options),Zr(i.physics,this.physics.options),Zr(i.global,this.canvas.options),Zr(i.global,this.options),this.configurator.setModuleOptions(i)}e.clickToUse!==void 0?e.clickToUse===!0?this.activator===void 0&&(this.activator=new yft(this.canvas.frame),this.activator.on("change",function(){r.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};kt.prototype._updateVisibleIndices=function(){var e=this.body.nodes,r=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&!this.clustering._isClusteredNode(t)&&e[t].options.hidden===!1&&this.body.nodeIndices.push(e[t].id);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n],s=e[i.fromId],o=e[i.toId],a=s!==void 0&&o!==void 0,l=!this.clustering._isClusteredEdge(n)&&i.options.hidden===!1&&a&&s.options.hidden===!1&&o.options.hidden===!1;l&&this.body.edgeIndices.push(i.id)}};kt.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})};kt.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var r=Oft(e.dot);this.setData(r);return}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var t=Cft(e.gephi);this.setData(t);return}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};kt.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];gc(this.body.container)};kt.prototype._updateValueRange=function(e){var r,t=void 0,n=void 0,i=0;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r].getValue();s!==void 0&&(t=t===void 0?s:Math.min(s,t),n=n===void 0?s:Math.max(s,n),i+=s)}if(t!==void 0&&n!==void 0)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].setValueRange(t,n,i)};kt.prototype.isActive=function(){return!this.activator||this.activator.active};kt.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};kt.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};kt.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};kt.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};kt.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};kt.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};kt.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};kt.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};kt.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};kt.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};kt.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};kt.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};kt.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};kt.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};kt.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};kt.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};kt.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};kt.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};kt.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};kt.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};kt.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};kt.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};kt.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};kt.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};kt.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};kt.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};kt.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};kt.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};kt.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};kt.prototype.getConnectedNodes=function(e){return this.body.nodes[e]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};kt.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};kt.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};kt.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};kt.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};kt.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};kt.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};kt.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};kt.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return e!==void 0&&e.id!==void 0?e.id:e};kt.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};kt.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};kt.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};kt.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};kt.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};kt.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};kt.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};kt.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};kt.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};kt.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};kt.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};function Dee(){const e=Vo(!1);return St(()=>(e.current=!0,()=>{e.current=!1}),[]),$h(()=>e.current,[])}const b0t={layout:{improvedLayout:!0},physics:{solver:"barnesHut",barnesHut:{springLength:200}},autoResize:!1,nodes:{borderWidth:1,size:30,color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"},shadow:!0},edges:{smooth:!1,color:"lightgray",width:1,shadow:!0,arrows:{to:{enabled:!0,scaleFactor:.5}}}};function vp(e,r,t,n){e.length!=0&&e.forEach(function(i){var a,l;let s=r.get(i.id);if(!t){s||r.add(i);return}if(n!=null&&n.has(i.id)){s||r.add(i);return}let o=ls.getDefaultProfile(i.id);if((a=o==null?void 0:o.name)!=null&&a.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}if((l=o==null?void 0:o.display_name)!=null&&l.toLowerCase().includes(t.toLowerCase())){s||r.add(i);return}s&&r.remove(i.id)})}const w0t=({props:e})=>{const r=Vo(null),t=Vo(),n=Dee(),[i,s]=Me(null),[o]=Me(new xa),[a]=Me(new xa),[l]=Me(new xa),[u]=Me([]),[f,c]=Me(e.dir||"in"),[d,y]=Me(e.entitytype);St(()=>{if(r.current){var T={nodes:a,edges:l};return t.current=r.current&&new kt(r.current,T,b0t),t.current.on("click",function(_){if(_.nodes.length==0||!n())return;const A=_.nodes[0];e.setNpub(qp(A)),w(A).then(x=>{let I=new Set([vt(e.hexKey),A]);x&&vp(x,a,e.filter,I)})}),()=>{var _,A;(_=t.current)==null||_.off("click"),(A=t.current)==null||A.destroy()}}},[r]),St(()=>{let T=vt(e.hexKey);if(T)return s(T),(e.dir!=f||e.entitytype!=d)&&(l.clear(),o.clear(),a.clear(),c(e.dir),y(e.entitytype)),w(T).then(_=>{if(!n())return;let A=new Set([vt(e.hexKey)]);_&&vp(_,a,e.filter,A)}),()=>{u.forEach(_=>_==null?void 0:_())}},[e.npub,e.dir,e.entitytype]),St(()=>{if(o.length==0&&a.length==0)return;let T=new Set([vt(e.hexKey)]);vp(o,a,e.filter,T)},[e.filter]);async function w(T){let _=rr.g.vertices[T];if(!_)return;let A={};if(A[T]=_,e.dir=="in")for(const M in _.in){const B=_.in[M];if(!B||!B.out||B.val==0)continue;A[B.out.id]=B.out;let L=Gy(B.val),q=B.out.degree>pa;l.get(B.key)||l.add({id:B.key,from:B.out.id,to:T,color:L,dashes:q})}let x=Bee(e.entitytype);if(e.dir=="out")for(const M in _.out){const B=_.out[M];if(!B||B.val==0||!B.in||B.in.entityType!=x)continue;A[B.in.id]=B.in;let L=Gy(B.val);l.get(B.key)||l.add({id:B.key,from:T,to:B.in.id,color:L})}let I=Object.values(A),O=I.map(M=>Qi(M.id)),C=await ls.getProfiles(O,M=>{n()});u.push(C);let g=new xa;for(const M of I){if(o.get(M.id))continue;const B=et.profiles.get(M.id);let L=ls.ensurePicture(B),q={id:M.id,label:B.name+" (D:"+M.degree+")",image:L,shape:"circularImage"};o.add(q),g.add(q)}return g}const b=T=>{let _=T||i;if(!_)return;a.clear(),o.clear(),l.clear(),w(_).then(x=>{if(!n())return;let I=new Set([vt(e.hexKey)]);x&&vp(x,a,e.filter,I)});const A=qp(_);A!=e.npub&&e.setNpub(A)};return e.npub?v(lt,{children:[v("div",{className:"flex flex-wrap gap-4",children:[v(XV,{dir:e.dir,setSearch:e.setSearch}),v("div",{className:"flex gap-4",children:" "}),v("div",{className:"flex gap-4",children:v("button",{className:"btn btn-primary btn-sm",onClick:()=>{var T;return b((T=t.current)==null?void 0:T.getSelectedNodes()[0])},children:he("Focus")})}),v("div",{className:"flex gap-4",children:v(Qt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"path"}),children:he("Path")})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null},$0t={layout:{randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!0,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"roots"}},physics:{stabilization:!1},autoResize:!1,nodes:{borderWidth:1,size:30,color:{border:"#222222",background:"#666666"},font:{color:"#eeeeee"}},edges:{smooth:!1,color:"lightgray",width:1,arrows:{to:{enabled:!0,scaleFactor:.5}}}},_0t=({props:e})=>{const r=Vo(null),t=Vo(),n=Dee(),[i,s]=Me(null),[o]=Me(new xa),[a]=Me(new xa),[l]=Me(new xa),[u]=Me([]);St(()=>{if(r.current){var y={nodes:a,edges:l};return t.current=r.current&&new kt(r.current,y,$0t),t.current.on("click",function(w){if(w.nodes.length==0)return;const b=w.nodes[0];e.setNpub(qp(b))}),()=>{var w,b;(w=t.current)==null||w.off("click"),(b=t.current)==null||b.destroy()}}},[]),St(()=>{let y=vt(e.hexKey),w=rr.g.vertices[y],b=w==null?void 0:w.score,T=rr.g.getPaths(y),_=Object.create(null);for(let I of T)I!=null&&I.in&&(_[I.in.id]=I.in),I!=null&&I.out&&(_[I.out.id]=I.out);let A=Object.values(_),x=A.map(I=>Qi(I.id));return ls.getProfiles(x,I=>{var O;n()&&(f(A,T),(O=t.current)==null||O.redraw())}).then(I=>{n()?u.push(I):I()}),s(I=>({...I,vId:y,score:b})),()=>{u.forEach(I=>I==null?void 0:I())}},[e.npub]);function f(y,w){var T,_;for(let A of y){let x=et.profiles.get(A.id),I=ls.ensurePicture(x),O=o.get(A.id);if(O){O.label!=x.name+` (ID: ${A.id})`&&(O.label=x.name+` (ID: ${A.id})`),O.image!=I&&(O.image=I);continue}o.add({id:A.id,label:x.name+` (ID: ${A.id})`,image:I,shape:"circularImage"})}for(let A of w){let x=Gy(A.val);l.get(A.key)||l.add({id:A.key,from:(T=A.out)==null?void 0:T.id,to:(_=A.in)==null?void 0:_.id,color:x})}let b=new Set([vt(e.hexKey)]);vp(o,a,e.filter,b)}St(()=>{var w;if(o.length==0&&a.length==0)return;let y=new Set([vt(e.hexKey),vt(de.getPubKey())]);vp(o,a,e.filter,y),(w=t.current)==null||w.redraw()},[e.filter]);const c=y=>{let w=y==null?void 0:y.values();return w?w.join("/"):null},d=y=>{if(!y||!(y==null?void 0:y.resolve()))return null;let{val:b,degree:T,count:_,hasScore:A}=y.resolve(),x=Math.round((b+_)*100/(_*2));return v(lt,{children:A?v(lt,{children:[v("span",{children:["Trust score is ",b]}),v("span",{children:[" from ",_==1?`${_} claim`:`a total of ${_} claims`]}),v("span",{children:[" at degree ",T]}),v("span",{children:[" resulting in ",x,"% trust"]})]}):v("span",{children:"No Score"})})};return e.npub?v(lt,{children:[v("div",{className:"flex flex-col gap-4",children:[v("div",{children:["Aggregated result of score is ",c(i==null?void 0:i.score)]}),v("div",{children:d(i==null?void 0:i.score)})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-4",children:v(Qt,{className:"btn btn-primary btn-sm",href:e.setSearch({view:"graph"}),children:he("Focus")})}),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"h-full w-full flex items-stretch justify-center",children:v("div",{className:"flex-grow",ref:r})})]}):null};function x0t(e,r){let t=e==null?void 0:e.toLocaleLowerCase();return t=="trust"?1:t=="distrust"?-1:r}function Bee(e,r=1){let t=e==null?void 0:e.toLocaleLowerCase();return t=="key"?1:t=="item"?2:r}const E0t=e=>{const[r,t]=Me({ready:!1}),[n,i]=Me(e.npub||de.toNostrBech32Address(de.getPubKey(),"npub")),[s,o]=Me(e.entitytype||"key"),[a,l]=Me(e.trusttype||"trust"),[u,f]=Me(e.dir||"out"),[c,d]=Me(e.view||"graph"),[y,w]=Me(e.filter||""),[b,T]=Me(null),[_]=Me([]),A=de.toNostrHexAddress(n),x=A==de.getPubKey(),I=wn.debounce(B=>w(B),500,{trailing:!0});St(()=>(rr.whenReady(()=>{T(rr.g.vertices[vt(n)]),t(B=>({...B,ready:!0}))}),()=>{_.forEach(B=>B==null?void 0:B())}),[]);const O=$h(B=>{T(rr.g.vertices[vt(B)]),i(B)},[]);St(()=>{e.npub!=n&&O(e.npub||de.toNostrBech32Address(de.getPubKey(),"npub")),e.entitytype!=s&&o(e.entitytype||"key"),e.trusttype!=a&&l(e.trusttype||"trust"),e.dir!=u&&f(e.dir||"out"),e.view!=c&&d(e.view||"graph"),e.filter!=y&&w(e.filter||"")},[e.npub,e.entitytype,e.trusttype,e.dir,e.view,e.filter]);function C(B){const L={npub:n,entitytype:s,trusttype:a,dir:u,view:c,filter:y,...B};return`/graph/${L.npub}/${L.entitytype}/${L.dir}/${L.trusttype}/${L.view}${L.filter?"/"+L.filter:""}`}const g=$h(B=>{},[]),M=()=>{let B={npub:n,hexKey:A,entitytype:s,trusttype:a,dir:u,view:c,filter:y,setNpub:O,route:g,setSearch:C};return c=="path"?v(_0t,{props:B}):c=="list"?v(dAe,{props:B}):v(w0t,{props:B})};return r.ready?v(lt,{children:[v(Su,{}),v("div",{className:"flex justify-between mb-4",children:v("span",{className:"text-2xl font-bold",children:[v("a",{className:"link",href:`/${n}`,children:v(Er,{pub:n})}),v("span",{style:{flex:1},className:"ml-1",children:c})]})}),JV(b==null?void 0:b.score,n,!0),v("hr",{className:"-mx-2 opacity-10 my-2"}),v("div",{className:"flex flex-wrap gap-8",children:[v(aAe,{view:c,setSearch:C,me:x}),v("form",{children:v("label",{children:v("input",{type:"text",placeholder:he("Filter"),tabIndex:1,onInput:B=>{var L;return I((L=B==null?void 0:B.target)==null?void 0:L.value)},className:"input-bordered border-neutral-500 input input-sm w-full"})})})]}),v("hr",{className:"-mx-2 opacity-10 my-2"}),M()]}):null};Th.init({autologin:!1,autofollow:!1});class S0t extends $n{componentDidMount(){window.onload=()=>{De.get("loggedIn").on(this.inject())},De.get("unseenMsgsTotal").on(this.inject()),SK.then(()=>this.setState({translationLoaded:!0})),De.get("showLoginModal").on(this.inject())}handleRoute(r){const t=r.url;this.setState({activeRoute:t}),De.get("activeRoute").put(t)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}electronCmd(r){console.log(r)}render(){let r="";const t=this.state;t.activeRoute&&t.activeRoute.length>1&&(r=hr.capitalize(t.activeRoute.replace("/","").split("?")[0]));const n=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) %s | Dpeep`:"%s | Dpeep",i=t.unseenMsgsTotal?`(${t.unseenMsgsTotal}) Dpeep`:"Dpeep";if(!t.translationLoaded)return v("div",{});if(!t.loggedIn&&window.location.pathname.length<=1)return v(ow,{fullScreen:!0});const s=o=>{var a;return(a=o.id)!=null&&a.startsWith("note")?v(T8,{id:o.id}):v(e1,{id:o.id,tab:"posts",path:o.path})};return v("div",{className:"flex justify-center",children:[v("section",{className:"flex w-full max-w-screen-xl justify-between relative",children:[v(dt,{when:t.loggedIn,children:v(RTe,{})}),v(_h,{titleTemplate:n,defaultTitle:i,children:[v("title",{children:r}),v("meta",{name:"description",content:"Connecting People"}),v("meta",{property:"og:type",content:"website"}),v("meta",{property:"og:title",content:r}),v("meta",{property:"og:description",content:"Connecting People"}),v("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),v("meta",{name:"twitter:card",content:"summary_large_image"}),v("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),v("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),v("div",{className:"pb-16 md:pb-0 relative flex h-full flex-grow flex-col w-1/2",children:v(wH,{onChange:o=>this.handleRoute(o),children:[v(rS,{path:"/",index:"follows"}),v(AV,{path:"/search",focus:!0}),v(bIe,{path:"/key"}),v(rS,{path:"/global",index:"global"}),v(rS,{path:"/search/:keyword"}),v(ow,{path:"/login",fullScreen:!0}),v(AIe,{path:"/notifications"}),v(d8,{path:"/chat/hashtag/:hashtag?"}),v(d8,{path:"/chat/:id?"}),v(T8,{path:"/post/:id+"}),v(tAe,{path:"/torrent/:id+"}),v(LTe,{path:"/about"}),v(QIe,{path:"/settings/:page?"}),v(IIe,{path:"/logout"}),v(v8,{path:"/explorer/:path?"}),v(v8,{path:"/explorer/:path+"}),v(iIe,{path:"/profile/edit"}),v(eAe,{path:"/subscribe"}),v(e1,{path:"/profile/:id",tab:"posts"}),v(e1,{path:"/:id/replies",tab:"replies"}),v(e1,{path:"/:id/likes",tab:"likes"}),v(m8,{path:"/follows/:id"}),v(m8,{followers:!0,path:"/followers/:id"}),v(E0t,{path:"/graph/:npub?/:entitytype?/:dir?/:trusttype?/:view?/:filter?"}),v(oAe,{path:"/diagnostics/:id/:entitytype?/:dir?/:trust1?/:view?/:filter?"}),v(s,{path:"/:id"})]})}),t.loggedIn?v(rAe,{}):null,v(PTe,{}),v(OTe,{})]}),v(dt,{when:t.showLoginModal,children:v(Eu,{centerVertically:!0,showContainer:!0,onClose:()=>De.get("showLoginModal").put(!1),children:v(ow,{})})})]})}}hr.showConsoleWarning();Op(v(S0t,{}),document.getElementById("app"));export{On as c,ro as g,Xve as r};
